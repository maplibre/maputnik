var DN=Object.defineProperty;var FN=(n,e,t)=>e in n?DN(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Kn=(n,e,t)=>FN(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function fl(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function R6(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}var p3={exports:{}},ov={},m3={exports:{}},fs={},JO;function LN(){if(JO)return fs;JO=1;/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),B=Symbol.iterator;function O(De){return De===null||typeof De!="object"?null:(De=B&&De[B]||De["@@iterator"],typeof De=="function"?De:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U=Object.assign,j={};function N(De,He,bt){this.props=De,this.context=He,this.refs=j,this.updater=bt||P}N.prototype.isReactComponent={},N.prototype.setState=function(De,He){if(typeof De!="object"&&typeof De!="function"&&De!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,De,He,"setState")},N.prototype.forceUpdate=function(De){this.updater.enqueueForceUpdate(this,De,"forceUpdate")};function Y(){}Y.prototype=N.prototype;function H(De,He,bt){this.props=De,this.context=He,this.refs=j,this.updater=bt||P}var se=H.prototype=new Y;se.constructor=H,U(se,N.prototype),se.isPureReactComponent=!0;var re=Array.isArray,V=Object.prototype.hasOwnProperty,ne={current:null},G={key:!0,ref:!0,__self:!0,__source:!0};function oe(De,He,bt){var Yt,yt={},Ft=null,Pt=null;if(He!=null)for(Yt in He.ref!==void 0&&(Pt=He.ref),He.key!==void 0&&(Ft=""+He.key),He)V.call(He,Yt)&&!G.hasOwnProperty(Yt)&&(yt[Yt]=He[Yt]);var Ue=arguments.length-2;if(Ue===1)yt.children=bt;else if(1<Ue){for(var Pe=Array(Ue),Be=0;Be<Ue;Be++)Pe[Be]=arguments[Be+2];yt.children=Pe}if(De&&De.defaultProps)for(Yt in Ue=De.defaultProps,Ue)yt[Yt]===void 0&&(yt[Yt]=Ue[Yt]);return{$$typeof:n,type:De,key:Ft,ref:Pt,props:yt,_owner:ne.current}}function he(De,He){return{$$typeof:n,type:De.type,key:He,ref:De.ref,props:De.props,_owner:De._owner}}function fe(De){return typeof De=="object"&&De!==null&&De.$$typeof===n}function Ee(De){var He={"=":"=0",":":"=2"};return"$"+De.replace(/[=:]/g,function(bt){return He[bt]})}var me=/\/+/g;function Se(De,He){return typeof De=="object"&&De!==null&&De.key!=null?Ee(""+De.key):He.toString(36)}function Ke(De,He,bt,Yt,yt){var Ft=typeof De;(Ft==="undefined"||Ft==="boolean")&&(De=null);var Pt=!1;if(De===null)Pt=!0;else switch(Ft){case"string":case"number":Pt=!0;break;case"object":switch(De.$$typeof){case n:case e:Pt=!0}}if(Pt)return Pt=De,yt=yt(Pt),De=Yt===""?"."+Se(Pt,0):Yt,re(yt)?(bt="",De!=null&&(bt=De.replace(me,"$&/")+"/"),Ke(yt,He,bt,"",function(Be){return Be})):yt!=null&&(fe(yt)&&(yt=he(yt,bt+(!yt.key||Pt&&Pt.key===yt.key?"":(""+yt.key).replace(me,"$&/")+"/")+De)),He.push(yt)),1;if(Pt=0,Yt=Yt===""?".":Yt+":",re(De))for(var Ue=0;Ue<De.length;Ue++){Ft=De[Ue];var Pe=Yt+Se(Ft,Ue);Pt+=Ke(Ft,He,bt,Pe,yt)}else if(Pe=O(De),typeof Pe=="function")for(De=Pe.call(De),Ue=0;!(Ft=De.next()).done;)Ft=Ft.value,Pe=Yt+Se(Ft,Ue++),Pt+=Ke(Ft,He,bt,Pe,yt);else if(Ft==="object")throw He=String(De),Error("Objects are not valid as a React child (found: "+(He==="[object Object]"?"object with keys {"+Object.keys(De).join(", ")+"}":He)+"). If you meant to render a collection of children, use an array instead.");return Pt}function xe(De,He,bt){if(De==null)return De;var Yt=[],yt=0;return Ke(De,Yt,"","",function(Ft){return He.call(bt,Ft,yt++)}),Yt}function at(De){if(De._status===-1){var He=De._result;He=He(),He.then(function(bt){(De._status===0||De._status===-1)&&(De._status=1,De._result=bt)},function(bt){(De._status===0||De._status===-1)&&(De._status=2,De._result=bt)}),De._status===-1&&(De._status=0,De._result=He)}if(De._status===1)return De._result.default;throw De._result}var Ze={current:null},Je={transition:null},Ne={ReactCurrentDispatcher:Ze,ReactCurrentBatchConfig:Je,ReactCurrentOwner:ne};function we(){throw Error("act(...) is not supported in production builds of React.")}return fs.Children={map:xe,forEach:function(De,He,bt){xe(De,function(){He.apply(this,arguments)},bt)},count:function(De){var He=0;return xe(De,function(){He++}),He},toArray:function(De){return xe(De,function(He){return He})||[]},only:function(De){if(!fe(De))throw Error("React.Children.only expected to receive a single React element child.");return De}},fs.Component=N,fs.Fragment=t,fs.Profiler=i,fs.PureComponent=H,fs.StrictMode=r,fs.Suspense=f,fs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ne,fs.act=we,fs.cloneElement=function(De,He,bt){if(De==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+De+".");var Yt=U({},De.props),yt=De.key,Ft=De.ref,Pt=De._owner;if(He!=null){if(He.ref!==void 0&&(Ft=He.ref,Pt=ne.current),He.key!==void 0&&(yt=""+He.key),De.type&&De.type.defaultProps)var Ue=De.type.defaultProps;for(Pe in He)V.call(He,Pe)&&!G.hasOwnProperty(Pe)&&(Yt[Pe]=He[Pe]===void 0&&Ue!==void 0?Ue[Pe]:He[Pe])}var Pe=arguments.length-2;if(Pe===1)Yt.children=bt;else if(1<Pe){Ue=Array(Pe);for(var Be=0;Be<Pe;Be++)Ue[Be]=arguments[Be+2];Yt.children=Ue}return{$$typeof:n,type:De.type,key:yt,ref:Ft,props:Yt,_owner:Pt}},fs.createContext=function(De){return De={$$typeof:l,_currentValue:De,_currentValue2:De,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},De.Provider={$$typeof:s,_context:De},De.Consumer=De},fs.createElement=oe,fs.createFactory=function(De){var He=oe.bind(null,De);return He.type=De,He},fs.createRef=function(){return{current:null}},fs.forwardRef=function(De){return{$$typeof:o,render:De}},fs.isValidElement=fe,fs.lazy=function(De){return{$$typeof:x,_payload:{_status:-1,_result:De},_init:at}},fs.memo=function(De,He){return{$$typeof:y,type:De,compare:He===void 0?null:He}},fs.startTransition=function(De){var He=Je.transition;Je.transition={};try{De()}finally{Je.transition=He}},fs.unstable_act=we,fs.useCallback=function(De,He){return Ze.current.useCallback(De,He)},fs.useContext=function(De){return Ze.current.useContext(De)},fs.useDebugValue=function(){},fs.useDeferredValue=function(De){return Ze.current.useDeferredValue(De)},fs.useEffect=function(De,He){return Ze.current.useEffect(De,He)},fs.useId=function(){return Ze.current.useId()},fs.useImperativeHandle=function(De,He,bt){return Ze.current.useImperativeHandle(De,He,bt)},fs.useInsertionEffect=function(De,He){return Ze.current.useInsertionEffect(De,He)},fs.useLayoutEffect=function(De,He){return Ze.current.useLayoutEffect(De,He)},fs.useMemo=function(De,He){return Ze.current.useMemo(De,He)},fs.useReducer=function(De,He,bt){return Ze.current.useReducer(De,He,bt)},fs.useRef=function(De){return Ze.current.useRef(De)},fs.useState=function(De){return Ze.current.useState(De)},fs.useSyncExternalStore=function(De,He,bt){return Ze.current.useSyncExternalStore(De,He,bt)},fs.useTransition=function(){return Ze.current.useTransition()},fs.version="18.3.1",fs}var e8;function Ia(){return e8||(e8=1,m3.exports=LN()),m3.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t8;function UN(){if(t8)return ov;t8=1;var n=Ia(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function l(o,f,y){var x,B={},O=null,P=null;y!==void 0&&(O=""+y),f.key!==void 0&&(O=""+f.key),f.ref!==void 0&&(P=f.ref);for(x in f)r.call(f,x)&&!s.hasOwnProperty(x)&&(B[x]=f[x]);if(o&&o.defaultProps)for(x in f=o.defaultProps,f)B[x]===void 0&&(B[x]=f[x]);return{$$typeof:e,type:o,key:O,ref:P,props:B,_owner:i.current}}return ov.Fragment=t,ov.jsx=l,ov.jsxs=l,ov}var n8;function zN(){return n8||(n8=1,p3.exports=UN()),p3.exports}var ue=zN(),ci=Ia();const Xn=fl(ci);var gD={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},_E=Xn.createContext&&Xn.createContext(gD),jN=["attr","size","title"];function NN(n,e){if(n==null)return{};var t=WN(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function WN(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function Kb(){return Kb=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Kb.apply(this,arguments)}function r8(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Rb(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?r8(Object(t),!0).forEach(function(r){GN(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):r8(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function GN(n,e,t){return e=QN(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function QN(n){var e=YN(n,"string");return typeof e=="symbol"?e:e+""}function YN(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function yD(n){return n&&n.map((e,t)=>Xn.createElement(e.tag,Rb({key:t},e.attr),yD(e.child)))}function Xl(n){return e=>Xn.createElement(qN,Kb({attr:Rb({},n.attr)},e),yD(n.child))}function qN(n){var e=t=>{var{attr:r,size:i,title:s}=n,l=NN(n,jN),o=i||t.size||"1em",f;return t.className&&(f=t.className),n.className&&(f=(f?f+" ":"")+n.className),Xn.createElement("svg",Kb({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,l,{className:f,style:Rb(Rb({color:n.color||t.color},t.style),n.style),height:o,width:o,xmlns:"http://www.w3.org/2000/svg"}),s&&Xn.createElement("title",null,s),n.children)};return _E!==void 0?Xn.createElement(_E.Consumer,null,t=>e(t)):e(gD)}var T_={},g3={exports:{}},uh={},y3={exports:{}},v3={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i8;function VN(){return i8||(i8=1,function(n){function e(Je,Ne){var we=Je.length;Je.push(Ne);e:for(;0<we;){var De=we-1>>>1,He=Je[De];if(0<i(He,Ne))Je[De]=Ne,Je[we]=He,we=De;else break e}}function t(Je){return Je.length===0?null:Je[0]}function r(Je){if(Je.length===0)return null;var Ne=Je[0],we=Je.pop();if(we!==Ne){Je[0]=we;e:for(var De=0,He=Je.length,bt=He>>>1;De<bt;){var Yt=2*(De+1)-1,yt=Je[Yt],Ft=Yt+1,Pt=Je[Ft];if(0>i(yt,we))Ft<He&&0>i(Pt,yt)?(Je[De]=Pt,Je[Ft]=we,De=Ft):(Je[De]=yt,Je[Yt]=we,De=Yt);else if(Ft<He&&0>i(Pt,we))Je[De]=Pt,Je[Ft]=we,De=Ft;else break e}}return Ne}function i(Je,Ne){var we=Je.sortIndex-Ne.sortIndex;return we!==0?we:Je.id-Ne.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var l=Date,o=l.now();n.unstable_now=function(){return l.now()-o}}var f=[],y=[],x=1,B=null,O=3,P=!1,U=!1,j=!1,N=typeof setTimeout=="function"?setTimeout:null,Y=typeof clearTimeout=="function"?clearTimeout:null,H=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function se(Je){for(var Ne=t(y);Ne!==null;){if(Ne.callback===null)r(y);else if(Ne.startTime<=Je)r(y),Ne.sortIndex=Ne.expirationTime,e(f,Ne);else break;Ne=t(y)}}function re(Je){if(j=!1,se(Je),!U)if(t(f)!==null)U=!0,at(V);else{var Ne=t(y);Ne!==null&&Ze(re,Ne.startTime-Je)}}function V(Je,Ne){U=!1,j&&(j=!1,Y(oe),oe=-1),P=!0;var we=O;try{for(se(Ne),B=t(f);B!==null&&(!(B.expirationTime>Ne)||Je&&!Ee());){var De=B.callback;if(typeof De=="function"){B.callback=null,O=B.priorityLevel;var He=De(B.expirationTime<=Ne);Ne=n.unstable_now(),typeof He=="function"?B.callback=He:B===t(f)&&r(f),se(Ne)}else r(f);B=t(f)}if(B!==null)var bt=!0;else{var Yt=t(y);Yt!==null&&Ze(re,Yt.startTime-Ne),bt=!1}return bt}finally{B=null,O=we,P=!1}}var ne=!1,G=null,oe=-1,he=5,fe=-1;function Ee(){return!(n.unstable_now()-fe<he)}function me(){if(G!==null){var Je=n.unstable_now();fe=Je;var Ne=!0;try{Ne=G(!0,Je)}finally{Ne?Se():(ne=!1,G=null)}}else ne=!1}var Se;if(typeof H=="function")Se=function(){H(me)};else if(typeof MessageChannel<"u"){var Ke=new MessageChannel,xe=Ke.port2;Ke.port1.onmessage=me,Se=function(){xe.postMessage(null)}}else Se=function(){N(me,0)};function at(Je){G=Je,ne||(ne=!0,Se())}function Ze(Je,Ne){oe=N(function(){Je(n.unstable_now())},Ne)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Je){Je.callback=null},n.unstable_continueExecution=function(){U||P||(U=!0,at(V))},n.unstable_forceFrameRate=function(Je){0>Je||125<Je?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):he=0<Je?Math.floor(1e3/Je):5},n.unstable_getCurrentPriorityLevel=function(){return O},n.unstable_getFirstCallbackNode=function(){return t(f)},n.unstable_next=function(Je){switch(O){case 1:case 2:case 3:var Ne=3;break;default:Ne=O}var we=O;O=Ne;try{return Je()}finally{O=we}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(Je,Ne){switch(Je){case 1:case 2:case 3:case 4:case 5:break;default:Je=3}var we=O;O=Je;try{return Ne()}finally{O=we}},n.unstable_scheduleCallback=function(Je,Ne,we){var De=n.unstable_now();switch(typeof we=="object"&&we!==null?(we=we.delay,we=typeof we=="number"&&0<we?De+we:De):we=De,Je){case 1:var He=-1;break;case 2:He=250;break;case 5:He=1073741823;break;case 4:He=1e4;break;default:He=5e3}return He=we+He,Je={id:x++,callback:Ne,priorityLevel:Je,startTime:we,expirationTime:He,sortIndex:-1},we>De?(Je.sortIndex=we,e(y,Je),t(f)===null&&Je===t(y)&&(j?(Y(oe),oe=-1):j=!0,Ze(re,we-De))):(Je.sortIndex=He,e(f,Je),U||P||(U=!0,at(V))),Je},n.unstable_shouldYield=Ee,n.unstable_wrapCallback=function(Je){var Ne=O;return function(){var we=O;O=Ne;try{return Je.apply(this,arguments)}finally{O=we}}}}(v3)),v3}var o8;function $N(){return o8||(o8=1,y3.exports=VN()),y3.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s8;function HN(){if(s8)return uh;s8=1;var n=Ia(),e=$N();function t(m){for(var C="https://reactjs.org/docs/error-decoder.html?invariant="+m,D=1;D<arguments.length;D++)C+="&args[]="+encodeURIComponent(arguments[D]);return"Minified React error #"+m+"; visit "+C+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(m,C){l(m,C),l(m+"Capture",C)}function l(m,C){for(i[m]=C,m=0;m<C.length;m++)r.add(C[m])}var o=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,x={},B={};function O(m){return f.call(B,m)?!0:f.call(x,m)?!1:y.test(m)?B[m]=!0:(x[m]=!0,!1)}function P(m,C,D,Q){if(D!==null&&D.type===0)return!1;switch(typeof C){case"function":case"symbol":return!0;case"boolean":return Q?!1:D!==null?!D.acceptsBooleans:(m=m.toLowerCase().slice(0,5),m!=="data-"&&m!=="aria-");default:return!1}}function U(m,C,D,Q){if(C===null||typeof C>"u"||P(m,C,D,Q))return!0;if(Q)return!1;if(D!==null)switch(D.type){case 3:return!C;case 4:return C===!1;case 5:return isNaN(C);case 6:return isNaN(C)||1>C}return!1}function j(m,C,D,Q,le,ge,tt){this.acceptsBooleans=C===2||C===3||C===4,this.attributeName=Q,this.attributeNamespace=le,this.mustUseProperty=D,this.propertyName=m,this.type=C,this.sanitizeURL=ge,this.removeEmptyString=tt}var N={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(m){N[m]=new j(m,0,!1,m,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(m){var C=m[0];N[C]=new j(C,1,!1,m[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(m){N[m]=new j(m,2,!1,m.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(m){N[m]=new j(m,2,!1,m,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(m){N[m]=new j(m,3,!1,m.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(m){N[m]=new j(m,3,!0,m,null,!1,!1)}),["capture","download"].forEach(function(m){N[m]=new j(m,4,!1,m,null,!1,!1)}),["cols","rows","size","span"].forEach(function(m){N[m]=new j(m,6,!1,m,null,!1,!1)}),["rowSpan","start"].forEach(function(m){N[m]=new j(m,5,!1,m.toLowerCase(),null,!1,!1)});var Y=/[\-:]([a-z])/g;function H(m){return m[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(m){var C=m.replace(Y,H);N[C]=new j(C,1,!1,m,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(m){var C=m.replace(Y,H);N[C]=new j(C,1,!1,m,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(m){var C=m.replace(Y,H);N[C]=new j(C,1,!1,m,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(m){N[m]=new j(m,1,!1,m.toLowerCase(),null,!1,!1)}),N.xlinkHref=new j("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(m){N[m]=new j(m,1,!1,m.toLowerCase(),null,!0,!0)});function se(m,C,D,Q){var le=N.hasOwnProperty(C)?N[C]:null;(le!==null?le.type!==0:Q||!(2<C.length)||C[0]!=="o"&&C[0]!=="O"||C[1]!=="n"&&C[1]!=="N")&&(U(C,D,le,Q)&&(D=null),Q||le===null?O(C)&&(D===null?m.removeAttribute(C):m.setAttribute(C,""+D)):le.mustUseProperty?m[le.propertyName]=D===null?le.type===3?!1:"":D:(C=le.attributeName,Q=le.attributeNamespace,D===null?m.removeAttribute(C):(le=le.type,D=le===3||le===4&&D===!0?"":""+D,Q?m.setAttributeNS(Q,C,D):m.setAttribute(C,D))))}var re=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,V=Symbol.for("react.element"),ne=Symbol.for("react.portal"),G=Symbol.for("react.fragment"),oe=Symbol.for("react.strict_mode"),he=Symbol.for("react.profiler"),fe=Symbol.for("react.provider"),Ee=Symbol.for("react.context"),me=Symbol.for("react.forward_ref"),Se=Symbol.for("react.suspense"),Ke=Symbol.for("react.suspense_list"),xe=Symbol.for("react.memo"),at=Symbol.for("react.lazy"),Ze=Symbol.for("react.offscreen"),Je=Symbol.iterator;function Ne(m){return m===null||typeof m!="object"?null:(m=Je&&m[Je]||m["@@iterator"],typeof m=="function"?m:null)}var we=Object.assign,De;function He(m){if(De===void 0)try{throw Error()}catch(D){var C=D.stack.trim().match(/\n( *(at )?)/);De=C&&C[1]||""}return`
`+De+m}var bt=!1;function Yt(m,C){if(!m||bt)return"";bt=!0;var D=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(C)if(C=function(){throw Error()},Object.defineProperty(C.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(C,[])}catch(wn){var Q=wn}Reflect.construct(m,[],C)}else{try{C.call()}catch(wn){Q=wn}m.call(C.prototype)}else{try{throw Error()}catch(wn){Q=wn}m()}}catch(wn){if(wn&&Q&&typeof wn.stack=="string"){for(var le=wn.stack.split(`
`),ge=Q.stack.split(`
`),tt=le.length-1,Ot=ge.length-1;1<=tt&&0<=Ot&&le[tt]!==ge[Ot];)Ot--;for(;1<=tt&&0<=Ot;tt--,Ot--)if(le[tt]!==ge[Ot]){if(tt!==1||Ot!==1)do if(tt--,Ot--,0>Ot||le[tt]!==ge[Ot]){var Wt=`
`+le[tt].replace(" at new "," at ");return m.displayName&&Wt.includes("<anonymous>")&&(Wt=Wt.replace("<anonymous>",m.displayName)),Wt}while(1<=tt&&0<=Ot);break}}}finally{bt=!1,Error.prepareStackTrace=D}return(m=m?m.displayName||m.name:"")?He(m):""}function yt(m){switch(m.tag){case 5:return He(m.type);case 16:return He("Lazy");case 13:return He("Suspense");case 19:return He("SuspenseList");case 0:case 2:case 15:return m=Yt(m.type,!1),m;case 11:return m=Yt(m.type.render,!1),m;case 1:return m=Yt(m.type,!0),m;default:return""}}function Ft(m){if(m==null)return null;if(typeof m=="function")return m.displayName||m.name||null;if(typeof m=="string")return m;switch(m){case G:return"Fragment";case ne:return"Portal";case he:return"Profiler";case oe:return"StrictMode";case Se:return"Suspense";case Ke:return"SuspenseList"}if(typeof m=="object")switch(m.$$typeof){case Ee:return(m.displayName||"Context")+".Consumer";case fe:return(m._context.displayName||"Context")+".Provider";case me:var C=m.render;return m=m.displayName,m||(m=C.displayName||C.name||"",m=m!==""?"ForwardRef("+m+")":"ForwardRef"),m;case xe:return C=m.displayName||null,C!==null?C:Ft(m.type)||"Memo";case at:C=m._payload,m=m._init;try{return Ft(m(C))}catch{}}return null}function Pt(m){var C=m.type;switch(m.tag){case 24:return"Cache";case 9:return(C.displayName||"Context")+".Consumer";case 10:return(C._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return m=C.render,m=m.displayName||m.name||"",C.displayName||(m!==""?"ForwardRef("+m+")":"ForwardRef");case 7:return"Fragment";case 5:return C;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ft(C);case 8:return C===oe?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof C=="function")return C.displayName||C.name||null;if(typeof C=="string")return C}return null}function Ue(m){switch(typeof m){case"boolean":case"number":case"string":case"undefined":return m;case"object":return m;default:return""}}function Pe(m){var C=m.type;return(m=m.nodeName)&&m.toLowerCase()==="input"&&(C==="checkbox"||C==="radio")}function Be(m){var C=Pe(m)?"checked":"value",D=Object.getOwnPropertyDescriptor(m.constructor.prototype,C),Q=""+m[C];if(!m.hasOwnProperty(C)&&typeof D<"u"&&typeof D.get=="function"&&typeof D.set=="function"){var le=D.get,ge=D.set;return Object.defineProperty(m,C,{configurable:!0,get:function(){return le.call(this)},set:function(tt){Q=""+tt,ge.call(this,tt)}}),Object.defineProperty(m,C,{enumerable:D.enumerable}),{getValue:function(){return Q},setValue:function(tt){Q=""+tt},stopTracking:function(){m._valueTracker=null,delete m[C]}}}}function it(m){m._valueTracker||(m._valueTracker=Be(m))}function _t(m){if(!m)return!1;var C=m._valueTracker;if(!C)return!0;var D=C.getValue(),Q="";return m&&(Q=Pe(m)?m.checked?"true":"false":m.value),m=Q,m!==D?(C.setValue(m),!0):!1}function pt(m){if(m=m||(typeof document<"u"?document:void 0),typeof m>"u")return null;try{return m.activeElement||m.body}catch{return m.body}}function Lt(m,C){var D=C.checked;return we({},C,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:D??m._wrapperState.initialChecked})}function nn(m,C){var D=C.defaultValue==null?"":C.defaultValue,Q=C.checked!=null?C.checked:C.defaultChecked;D=Ue(C.value!=null?C.value:D),m._wrapperState={initialChecked:Q,initialValue:D,controlled:C.type==="checkbox"||C.type==="radio"?C.checked!=null:C.value!=null}}function Kt(m,C){C=C.checked,C!=null&&se(m,"checked",C,!1)}function vn(m,C){Kt(m,C);var D=Ue(C.value),Q=C.type;if(D!=null)Q==="number"?(D===0&&m.value===""||m.value!=D)&&(m.value=""+D):m.value!==""+D&&(m.value=""+D);else if(Q==="submit"||Q==="reset"){m.removeAttribute("value");return}C.hasOwnProperty("value")?tn(m,C.type,D):C.hasOwnProperty("defaultValue")&&tn(m,C.type,Ue(C.defaultValue)),C.checked==null&&C.defaultChecked!=null&&(m.defaultChecked=!!C.defaultChecked)}function Gn(m,C,D){if(C.hasOwnProperty("value")||C.hasOwnProperty("defaultValue")){var Q=C.type;if(!(Q!=="submit"&&Q!=="reset"||C.value!==void 0&&C.value!==null))return;C=""+m._wrapperState.initialValue,D||C===m.value||(m.value=C),m.defaultValue=C}D=m.name,D!==""&&(m.name=""),m.defaultChecked=!!m._wrapperState.initialChecked,D!==""&&(m.name=D)}function tn(m,C,D){(C!=="number"||pt(m.ownerDocument)!==m)&&(D==null?m.defaultValue=""+m._wrapperState.initialValue:m.defaultValue!==""+D&&(m.defaultValue=""+D))}var dr=Array.isArray;function Pn(m,C,D,Q){if(m=m.options,C){C={};for(var le=0;le<D.length;le++)C["$"+D[le]]=!0;for(D=0;D<m.length;D++)le=C.hasOwnProperty("$"+m[D].value),m[D].selected!==le&&(m[D].selected=le),le&&Q&&(m[D].defaultSelected=!0)}else{for(D=""+Ue(D),C=null,le=0;le<m.length;le++){if(m[le].value===D){m[le].selected=!0,Q&&(m[le].defaultSelected=!0);return}C!==null||m[le].disabled||(C=m[le])}C!==null&&(C.selected=!0)}}function pn(m,C){if(C.dangerouslySetInnerHTML!=null)throw Error(t(91));return we({},C,{value:void 0,defaultValue:void 0,children:""+m._wrapperState.initialValue})}function $n(m,C){var D=C.value;if(D==null){if(D=C.children,C=C.defaultValue,D!=null){if(C!=null)throw Error(t(92));if(dr(D)){if(1<D.length)throw Error(t(93));D=D[0]}C=D}C==null&&(C=""),D=C}m._wrapperState={initialValue:Ue(D)}}function lr(m,C){var D=Ue(C.value),Q=Ue(C.defaultValue);D!=null&&(D=""+D,D!==m.value&&(m.value=D),C.defaultValue==null&&m.defaultValue!==D&&(m.defaultValue=D)),Q!=null&&(m.defaultValue=""+Q)}function vr(m){var C=m.textContent;C===m._wrapperState.initialValue&&C!==""&&C!==null&&(m.value=C)}function Zn(m){switch(m){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ge(m,C){return m==null||m==="http://www.w3.org/1999/xhtml"?Zn(C):m==="http://www.w3.org/2000/svg"&&C==="foreignObject"?"http://www.w3.org/1999/xhtml":m}var ce,pe=function(m){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(C,D,Q,le){MSApp.execUnsafeLocalFunction(function(){return m(C,D,Q,le)})}:m}(function(m,C){if(m.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in m)m.innerHTML=C;else{for(ce=ce||document.createElement("div"),ce.innerHTML="<svg>"+C.valueOf().toString()+"</svg>",C=ce.firstChild;m.firstChild;)m.removeChild(m.firstChild);for(;C.firstChild;)m.appendChild(C.firstChild)}});function nt(m,C){if(C){var D=m.firstChild;if(D&&D===m.lastChild&&D.nodeType===3){D.nodeValue=C;return}}m.textContent=C}var wt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ht=["Webkit","ms","Moz","O"];Object.keys(wt).forEach(function(m){Ht.forEach(function(C){C=C+m.charAt(0).toUpperCase()+m.substring(1),wt[C]=wt[m]})});function sn(m,C,D){return C==null||typeof C=="boolean"||C===""?"":D||typeof C!="number"||C===0||wt.hasOwnProperty(m)&&wt[m]?(""+C).trim():C+"px"}function Hn(m,C){m=m.style;for(var D in C)if(C.hasOwnProperty(D)){var Q=D.indexOf("--")===0,le=sn(D,C[D],Q);D==="float"&&(D="cssFloat"),Q?m.setProperty(D,le):m[D]=le}}var Ve=we({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function J(m,C){if(C){if(Ve[m]&&(C.children!=null||C.dangerouslySetInnerHTML!=null))throw Error(t(137,m));if(C.dangerouslySetInnerHTML!=null){if(C.children!=null)throw Error(t(60));if(typeof C.dangerouslySetInnerHTML!="object"||!("__html"in C.dangerouslySetInnerHTML))throw Error(t(61))}if(C.style!=null&&typeof C.style!="object")throw Error(t(62))}}function ve(m,C){if(m.indexOf("-")===-1)return typeof C.is=="string";switch(m){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var p=null;function Fe(m){return m=m.target||m.srcElement||window,m.correspondingUseElement&&(m=m.correspondingUseElement),m.nodeType===3?m.parentNode:m}var Qe=null,rt=null,ct=null;function dt(m){if(m=gi(m)){if(typeof Qe!="function")throw Error(t(280));var C=m.stateNode;C&&(C=ta(C),Qe(m.stateNode,m.type,C))}}function qt(m){rt?ct?ct.push(m):ct=[m]:rt=m}function Gt(){if(rt){var m=rt,C=ct;if(ct=rt=null,dt(m),C)for(m=0;m<C.length;m++)dt(C[m])}}function zt(m,C){return m(C)}function on(){}var jt=!1;function Dn(m,C,D){if(jt)return m(C,D);jt=!0;try{return zt(m,C,D)}finally{jt=!1,(rt!==null||ct!==null)&&(on(),Gt())}}function rr(m,C){var D=m.stateNode;if(D===null)return null;var Q=ta(D);if(Q===null)return null;D=Q[C];e:switch(C){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(Q=!Q.disabled)||(m=m.type,Q=!(m==="button"||m==="input"||m==="select"||m==="textarea")),m=!Q;break e;default:m=!1}if(m)return null;if(D&&typeof D!="function")throw Error(t(231,C,typeof D));return D}var Br=!1;if(o)try{var Jn={};Object.defineProperty(Jn,"passive",{get:function(){Br=!0}}),window.addEventListener("test",Jn,Jn),window.removeEventListener("test",Jn,Jn)}catch{Br=!1}function un(m,C,D,Q,le,ge,tt,Ot,Wt){var wn=Array.prototype.slice.call(arguments,3);try{C.apply(D,wn)}catch(ir){this.onError(ir)}}var er=!1,fr=null,Sr=!1,Ur=null,ri={onError:function(m){er=!0,fr=m}};function Or(m,C,D,Q,le,ge,tt,Ot,Wt){er=!1,fr=null,un.apply(ri,arguments)}function ka(m,C,D,Q,le,ge,tt,Ot,Wt){if(Or.apply(this,arguments),er){if(er){var wn=fr;er=!1,fr=null}else throw Error(t(198));Sr||(Sr=!0,Ur=wn)}}function Wi(m){var C=m,D=m;if(m.alternate)for(;C.return;)C=C.return;else{m=C;do C=m,(C.flags&4098)!==0&&(D=C.return),m=C.return;while(m)}return C.tag===3?D:null}function Bi(m){if(m.tag===13){var C=m.memoizedState;if(C===null&&(m=m.alternate,m!==null&&(C=m.memoizedState)),C!==null)return C.dehydrated}return null}function eo(m){if(Wi(m)!==m)throw Error(t(188))}function ws(m){var C=m.alternate;if(!C){if(C=Wi(m),C===null)throw Error(t(188));return C!==m?null:m}for(var D=m,Q=C;;){var le=D.return;if(le===null)break;var ge=le.alternate;if(ge===null){if(Q=le.return,Q!==null){D=Q;continue}break}if(le.child===ge.child){for(ge=le.child;ge;){if(ge===D)return eo(le),m;if(ge===Q)return eo(le),C;ge=ge.sibling}throw Error(t(188))}if(D.return!==Q.return)D=le,Q=ge;else{for(var tt=!1,Ot=le.child;Ot;){if(Ot===D){tt=!0,D=le,Q=ge;break}if(Ot===Q){tt=!0,Q=le,D=ge;break}Ot=Ot.sibling}if(!tt){for(Ot=ge.child;Ot;){if(Ot===D){tt=!0,D=ge,Q=le;break}if(Ot===Q){tt=!0,Q=ge,D=le;break}Ot=Ot.sibling}if(!tt)throw Error(t(189))}}if(D.alternate!==Q)throw Error(t(190))}if(D.tag!==3)throw Error(t(188));return D.stateNode.current===D?m:C}function ko(m){return m=ws(m),m!==null?Hi(m):null}function Hi(m){if(m.tag===5||m.tag===6)return m;for(m=m.child;m!==null;){var C=Hi(m);if(C!==null)return C;m=m.sibling}return null}var Sl=e.unstable_scheduleCallback,Go=e.unstable_cancelCallback,Za=e.unstable_shouldYield,Xa=e.unstable_requestPaint,Yi=e.unstable_now,Lu=e.unstable_getCurrentPriorityLevel,Jl=e.unstable_ImmediatePriority,wo=e.unstable_UserBlockingPriority,wr=e.unstable_NormalPriority,Ta=e.unstable_LowPriority,Ss=e.unstable_IdlePriority,Zs=null,Ye=null;function xt(m){if(Ye&&typeof Ye.onCommitFiberRoot=="function")try{Ye.onCommitFiberRoot(Zs,m,void 0,(m.current.flags&128)===128)}catch{}}var Cn=Math.clz32?Math.clz32:ur,Qn=Math.log,fn=Math.LN2;function ur(m){return m>>>=0,m===0?32:31-(Qn(m)/fn|0)|0}var Di=64,vo=4194304;function rs(m){switch(m&-m){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return m&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return m}}function ua(m,C){var D=m.pendingLanes;if(D===0)return 0;var Q=0,le=m.suspendedLanes,ge=m.pingedLanes,tt=D&268435455;if(tt!==0){var Ot=tt&~le;Ot!==0?Q=rs(Ot):(ge&=tt,ge!==0&&(Q=rs(ge)))}else tt=D&~le,tt!==0?Q=rs(tt):ge!==0&&(Q=rs(ge));if(Q===0)return 0;if(C!==0&&C!==Q&&(C&le)===0&&(le=Q&-Q,ge=C&-C,le>=ge||le===16&&(ge&4194240)!==0))return C;if((Q&4)!==0&&(Q|=D&16),C=m.entangledLanes,C!==0)for(m=m.entanglements,C&=Q;0<C;)D=31-Cn(C),le=1<<D,Q|=m[D],C&=~le;return Q}function eu(m,C){switch(m){case 1:case 2:case 4:return C+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return C+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ii(m,C){for(var D=m.suspendedLanes,Q=m.pingedLanes,le=m.expirationTimes,ge=m.pendingLanes;0<ge;){var tt=31-Cn(ge),Ot=1<<tt,Wt=le[tt];Wt===-1?((Ot&D)===0||(Ot&Q)!==0)&&(le[tt]=eu(Ot,C)):Wt<=C&&(m.expiredLanes|=Ot),ge&=~Ot}}function qi(m){return m=m.pendingLanes&-1073741825,m!==0?m:m&1073741824?1073741824:0}function Aa(){var m=Di;return Di<<=1,(Di&4194240)===0&&(Di=64),m}function Cs(m){for(var C=[],D=0;31>D;D++)C.push(m);return C}function xi(m,C,D){m.pendingLanes|=C,C!==536870912&&(m.suspendedLanes=0,m.pingedLanes=0),m=m.eventTimes,C=31-Cn(C),m[C]=D}function uA(m,C){var D=m.pendingLanes&~C;m.pendingLanes=C,m.suspendedLanes=0,m.pingedLanes=0,m.expiredLanes&=C,m.mutableReadLanes&=C,m.entangledLanes&=C,C=m.entanglements;var Q=m.eventTimes;for(m=m.expirationTimes;0<D;){var le=31-Cn(D),ge=1<<le;C[le]=0,Q[le]=-1,m[le]=-1,D&=~ge}}function Ja(m,C){var D=m.entangledLanes|=C;for(m=m.entanglements;D;){var Q=31-Cn(D),le=1<<Q;le&C|m[Q]&C&&(m[Q]|=C),D&=~le}}var oi=0;function to(m){return m&=-m,1<m?4<m?(m&268435455)!==0?16:536870912:4:1}var $o,Qo,js,Es,Xs,Js=!1,Au=[],Ns=null,Oi=null,is=null,ea=new Map,va=new Map,As=[],pl="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ml(m,C){switch(m){case"focusin":case"focusout":Ns=null;break;case"dragenter":case"dragleave":Oi=null;break;case"mouseover":case"mouseout":is=null;break;case"pointerover":case"pointerout":ea.delete(C.pointerId);break;case"gotpointercapture":case"lostpointercapture":va.delete(C.pointerId)}}function fo(m,C,D,Q,le,ge){return m===null||m.nativeEvent!==ge?(m={blockedOn:C,domEventName:D,eventSystemFlags:Q,nativeEvent:ge,targetContainers:[le]},C!==null&&(C=gi(C),C!==null&&Qo(C)),m):(m.eventSystemFlags|=Q,C=m.targetContainers,le!==null&&C.indexOf(le)===-1&&C.push(le),m)}function Uu(m,C,D,Q,le){switch(C){case"focusin":return Ns=fo(Ns,m,C,D,Q,le),!0;case"dragenter":return Oi=fo(Oi,m,C,D,Q,le),!0;case"mouseover":return is=fo(is,m,C,D,Q,le),!0;case"pointerover":var ge=le.pointerId;return ea.set(ge,fo(ea.get(ge)||null,m,C,D,Q,le)),!0;case"gotpointercapture":return ge=le.pointerId,va.set(ge,fo(va.get(ge)||null,m,C,D,Q,le)),!0}return!1}function zi(m){var C=_s(m.target);if(C!==null){var D=Wi(C);if(D!==null){if(C=D.tag,C===13){if(C=Bi(D),C!==null){m.blockedOn=C,Xs(m.priority,function(){js(D)});return}}else if(C===3&&D.stateNode.current.memoizedState.isDehydrated){m.blockedOn=D.tag===3?D.stateNode.containerInfo:null;return}}}m.blockedOn=null}function qr(m){if(m.blockedOn!==null)return!1;for(var C=m.targetContainers;0<C.length;){var D=si(m.domEventName,m.eventSystemFlags,C[0],m.nativeEvent);if(D===null){D=m.nativeEvent;var Q=new D.constructor(D.type,D);p=Q,D.target.dispatchEvent(Q),p=null}else return C=gi(D),C!==null&&Qo(C),m.blockedOn=D,!1;C.shift()}return!0}function Dl(m,C,D){qr(m)&&D.delete(C)}function Vi(){Js=!1,Ns!==null&&qr(Ns)&&(Ns=null),Oi!==null&&qr(Oi)&&(Oi=null),is!==null&&qr(is)&&(is=null),ea.forEach(Dl),va.forEach(Dl)}function uo(m,C){m.blockedOn===C&&(m.blockedOn=null,Js||(Js=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Vi)))}function Ki(m){function C(le){return uo(le,m)}if(0<Au.length){uo(Au[0],m);for(var D=1;D<Au.length;D++){var Q=Au[D];Q.blockedOn===m&&(Q.blockedOn=null)}}for(Ns!==null&&uo(Ns,m),Oi!==null&&uo(Oi,m),is!==null&&uo(is,m),ea.forEach(C),va.forEach(C),D=0;D<As.length;D++)Q=As[D],Q.blockedOn===m&&(Q.blockedOn=null);for(;0<As.length&&(D=As[0],D.blockedOn===null);)zi(D),D.blockedOn===null&&As.shift()}var ee=re.ReactCurrentBatchConfig,Oe=!0;function st(m,C,D,Q){var le=oi,ge=ee.transition;ee.transition=null;try{oi=1,Er(m,C,D,Q)}finally{oi=le,ee.transition=ge}}function Vt(m,C,D,Q){var le=oi,ge=ee.transition;ee.transition=null;try{oi=4,Er(m,C,D,Q)}finally{oi=le,ee.transition=ge}}function Er(m,C,D,Q){if(Oe){var le=si(m,C,D,Q);if(le===null)wh(m,C,Q,qn,D),ml(m,Q);else if(Uu(le,m,C,D,Q))Q.stopPropagation();else if(ml(m,Q),C&4&&-1<pl.indexOf(m)){for(;le!==null;){var ge=gi(le);if(ge!==null&&$o(ge),ge=si(m,C,D,Q),ge===null&&wh(m,C,Q,qn,D),ge===le)break;le=ge}le!==null&&Q.stopPropagation()}else wh(m,C,Q,null,D)}}var qn=null;function si(m,C,D,Q){if(qn=null,m=Fe(Q),m=_s(m),m!==null)if(C=Wi(m),C===null)m=null;else if(D=C.tag,D===13){if(m=Bi(C),m!==null)return m;m=null}else if(D===3){if(C.stateNode.current.memoizedState.isDehydrated)return C.tag===3?C.stateNode.containerInfo:null;m=null}else C!==m&&(m=null);return qn=m,null}function di(m){switch(m){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Lu()){case Jl:return 1;case wo:return 4;case wr:case Ta:return 16;case Ss:return 536870912;default:return 16}default:return 16}}var Ir=null,Pr=null,pi=null;function Do(){if(pi)return pi;var m,C=Pr,D=C.length,Q,le="value"in Ir?Ir.value:Ir.textContent,ge=le.length;for(m=0;m<D&&C[m]===le[m];m++);var tt=D-m;for(Q=1;Q<=tt&&C[D-Q]===le[ge-Q];Q++);return pi=le.slice(m,1<Q?1-Q:void 0)}function mi(m){var C=m.keyCode;return"charCode"in m?(m=m.charCode,m===0&&C===13&&(m=13)):m=C,m===10&&(m=13),32<=m||m===13?m:0}function zr(){return!0}function Co(){return!1}function Zi(m){function C(D,Q,le,ge,tt){this._reactName=D,this._targetInst=le,this.type=Q,this.nativeEvent=ge,this.target=tt,this.currentTarget=null;for(var Ot in m)m.hasOwnProperty(Ot)&&(D=m[Ot],this[Ot]=D?D(ge):ge[Ot]);return this.isDefaultPrevented=(ge.defaultPrevented!=null?ge.defaultPrevented:ge.returnValue===!1)?zr:Co,this.isPropagationStopped=Co,this}return we(C.prototype,{preventDefault:function(){this.defaultPrevented=!0;var D=this.nativeEvent;D&&(D.preventDefault?D.preventDefault():typeof D.returnValue!="unknown"&&(D.returnValue=!1),this.isDefaultPrevented=zr)},stopPropagation:function(){var D=this.nativeEvent;D&&(D.stopPropagation?D.stopPropagation():typeof D.cancelBubble!="unknown"&&(D.cancelBubble=!0),this.isPropagationStopped=zr)},persist:function(){},isPersistent:zr}),C}var To={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(m){return m.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ca=Zi(To),Pa=we({},To,{view:0,detail:0}),cu=Zi(Pa),Ws,zd,el,gl=we({},Pa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Lf,button:0,buttons:0,relatedTarget:function(m){return m.relatedTarget===void 0?m.fromElement===m.srcElement?m.toElement:m.fromElement:m.relatedTarget},movementX:function(m){return"movementX"in m?m.movementX:(m!==el&&(el&&m.type==="mousemove"?(Ws=m.screenX-el.screenX,zd=m.screenY-el.screenY):zd=Ws=0,el=m),Ws)},movementY:function(m){return"movementY"in m?m.movementY:zd}}),Ad=Zi(gl),du=we({},gl,{dataTransfer:0}),jd=Zi(du),cd=we({},Pa,{relatedTarget:0}),Fo=Zi(cd),Cc=we({},To,{animationName:0,elapsedTime:0,pseudoElement:0}),yh=Zi(Cc),Nd=we({},To,{clipboardData:function(m){return"clipboardData"in m?m.clipboardData:window.clipboardData}}),zu=Zi(Nd),Wd=we({},To,{data:0}),Gd=Zi(Wd),_p={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_c={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Gs(m){var C=this.nativeEvent;return C.getModifierState?C.getModifierState(m):(m=_c[m])?!!C[m]:!1}function Lf(){return Gs}var $h=we({},Pa,{key:function(m){if(m.key){var C=_p[m.key]||m.key;if(C!=="Unidentified")return C}return m.type==="keypress"?(m=mi(m),m===13?"Enter":String.fromCharCode(m)):m.type==="keydown"||m.type==="keyup"?dd[m.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Lf,charCode:function(m){return m.type==="keypress"?mi(m):0},keyCode:function(m){return m.type==="keydown"||m.type==="keyup"?m.keyCode:0},which:function(m){return m.type==="keypress"?mi(m):m.type==="keydown"||m.type==="keyup"?m.keyCode:0}}),jc=Zi($h),Hh=we({},gl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hd=Zi(Hh),Zh=we({},Pa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Lf}),vh=Zi(Zh),ZA=we({},To,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xh=Zi(ZA),bp=we({},gl,{deltaX:function(m){return"deltaX"in m?m.deltaX:"wheelDeltaX"in m?-m.wheelDeltaX:0},deltaY:function(m){return"deltaY"in m?m.deltaY:"wheelDeltaY"in m?-m.wheelDeltaY:"wheelDelta"in m?-m.wheelDelta:0},deltaZ:0,deltaMode:0}),bc=Zi(bp),hu=[9,13,27,32],Nc=o&&"CompositionEvent"in window,ju=null;o&&"documentMode"in document&&(ju=document.documentMode);var EA=o&&"TextEvent"in window&&!ju,Wc=o&&(!Nc||ju&&8<ju&&11>=ju),Ch=" ",Jh=!1;function fu(m,C){switch(m){case"keyup":return hu.indexOf(C.keyCode)!==-1;case"keydown":return C.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function XA(m){return m=m.detail,typeof m=="object"&&"data"in m?m.data:null}var BA=!1;function pu(m,C){switch(m){case"compositionend":return XA(C);case"keypress":return C.which!==32?null:(Jh=!0,Ch);case"textInput":return m=C.data,m===Ch&&Jh?null:m;default:return null}}function ef(m,C){if(BA)return m==="compositionend"||!Nc&&fu(m,C)?(m=Do(),pi=Pr=Ir=null,BA=!1,m):null;switch(m){case"paste":return null;case"keypress":if(!(C.ctrlKey||C.altKey||C.metaKey)||C.ctrlKey&&C.altKey){if(C.char&&1<C.char.length)return C.char;if(C.which)return String.fromCharCode(C.which)}return null;case"compositionend":return Wc&&C.locale!=="ko"?null:C.data;default:return null}}var tf={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fd(m){var C=m&&m.nodeName&&m.nodeName.toLowerCase();return C==="input"?!!tf[m.type]:C==="textarea"}function Qd(m,C,D,Q){qt(Q),C=rc(C,"onChange"),0<C.length&&(D=new ca("onChange","change",null,D,Q),m.push({event:D,listeners:C}))}var tl=null,oa=null;function Lo(m){vd(m,0)}function _h(m){var C=Gr(m);if(_t(C))return m}function am(m,C){if(m==="change")return C}var pd=!1;if(o){var Nu;if(o){var Yd="oninput"in document;if(!Yd){var Uf=document.createElement("div");Uf.setAttribute("oninput","return;"),Yd=typeof Uf.oninput=="function"}Nu=Yd}else Nu=!1;pd=Nu&&(!document.documentMode||9<document.documentMode)}function md(){tl&&(tl.detachEvent("onpropertychange",qd),oa=tl=null)}function qd(m){if(m.propertyName==="value"&&_h(oa)){var C=[];Qd(C,oa,m,Fe(m)),Dn(Lo,C)}}function bh(m,C,D){m==="focusin"?(md(),tl=C,oa=D,tl.attachEvent("onpropertychange",qd)):m==="focusout"&&md()}function Vd(m){if(m==="selectionchange"||m==="keyup"||m==="keydown")return _h(oa)}function OA(m,C){if(m==="click")return _h(C)}function Jt(m,C){if(m==="input"||m==="change")return _h(C)}function In(m,C){return m===C&&(m!==0||1/m===1/C)||m!==m&&C!==C}var an=typeof Object.is=="function"?Object.is:In;function Dr(m,C){if(an(m,C))return!0;if(typeof m!="object"||m===null||typeof C!="object"||C===null)return!1;var D=Object.keys(m),Q=Object.keys(C);if(D.length!==Q.length)return!1;for(Q=0;Q<D.length;Q++){var le=D[Q];if(!f.call(C,le)||!an(m[le],C[le]))return!1}return!0}function Ri(m){for(;m&&m.firstChild;)m=m.firstChild;return m}function Po(m,C){var D=Ri(m);m=0;for(var Q;D;){if(D.nodeType===3){if(Q=m+D.textContent.length,m<=C&&Q>=C)return{node:D,offset:C-m};m=Q}e:{for(;D;){if(D.nextSibling){D=D.nextSibling;break e}D=D.parentNode}D=void 0}D=Ri(D)}}function Bs(m,C){return m&&C?m===C?!0:m&&m.nodeType===3?!1:C&&C.nodeType===3?Bs(m,C.parentNode):"contains"in m?m.contains(C):m.compareDocumentPosition?!!(m.compareDocumentPosition(C)&16):!1:!1}function Jo(){for(var m=window,C=pt();C instanceof m.HTMLIFrameElement;){try{var D=typeof C.contentWindow.location.href=="string"}catch{D=!1}if(D)m=C.contentWindow;else break;C=pt(m.document)}return C}function JA(m){var C=m&&m.nodeName&&m.nodeName.toLowerCase();return C&&(C==="input"&&(m.type==="text"||m.type==="search"||m.type==="tel"||m.type==="url"||m.type==="password")||C==="textarea"||m.contentEditable==="true")}function xh(m){var C=Jo(),D=m.focusedElem,Q=m.selectionRange;if(C!==D&&D&&D.ownerDocument&&Bs(D.ownerDocument.documentElement,D)){if(Q!==null&&JA(D)){if(C=Q.start,m=Q.end,m===void 0&&(m=C),"selectionStart"in D)D.selectionStart=C,D.selectionEnd=Math.min(m,D.value.length);else if(m=(C=D.ownerDocument||document)&&C.defaultView||window,m.getSelection){m=m.getSelection();var le=D.textContent.length,ge=Math.min(Q.start,le);Q=Q.end===void 0?ge:Math.min(Q.end,le),!m.extend&&ge>Q&&(le=Q,Q=ge,ge=le),le=Po(D,ge);var tt=Po(D,Q);le&&tt&&(m.rangeCount!==1||m.anchorNode!==le.node||m.anchorOffset!==le.offset||m.focusNode!==tt.node||m.focusOffset!==tt.offset)&&(C=C.createRange(),C.setStart(le.node,le.offset),m.removeAllRanges(),ge>Q?(m.addRange(C),m.extend(tt.node,tt.offset)):(C.setEnd(tt.node,tt.offset),m.addRange(C)))}}for(C=[],m=D;m=m.parentNode;)m.nodeType===1&&C.push({element:m,left:m.scrollLeft,top:m.scrollTop});for(typeof D.focus=="function"&&D.focus(),D=0;D<C.length;D++)m=C[D],m.element.scrollLeft=m.left,m.element.scrollTop=m.top}}var tu=o&&"documentMode"in document&&11>=document.documentMode,ec=null,mu=null,Ka=null,AA=!1;function xc(m,C,D){var Q=D.window===D?D.document:D.nodeType===9?D:D.ownerDocument;AA||ec==null||ec!==pt(Q)||(Q=ec,"selectionStart"in Q&&JA(Q)?Q={start:Q.selectionStart,end:Q.selectionEnd}:(Q=(Q.ownerDocument&&Q.ownerDocument.defaultView||window).getSelection(),Q={anchorNode:Q.anchorNode,anchorOffset:Q.anchorOffset,focusNode:Q.focusNode,focusOffset:Q.focusOffset}),Ka&&Dr(Ka,Q)||(Ka=Q,Q=rc(mu,"onSelect"),0<Q.length&&(C=new ca("onSelect","select",null,C,D),m.push({event:C,listeners:Q}),C.target=ec)))}function Yr(m,C){var D={};return D[m.toLowerCase()]=C.toLowerCase(),D["Webkit"+m]="webkit"+C,D["Moz"+m]="moz"+C,D}var tc={animationend:Yr("Animation","AnimationEnd"),animationiteration:Yr("Animation","AnimationIteration"),animationstart:Yr("Animation","AnimationStart"),transitionend:Yr("Transition","TransitionEnd")},$d={},cA={};o&&(cA=document.createElement("div").style,"AnimationEvent"in window||(delete tc.animationend.animation,delete tc.animationiteration.animation,delete tc.animationstart.animation),"TransitionEvent"in window||delete tc.transitionend.transition);function Fl(m){if($d[m])return $d[m];if(!tc[m])return m;var C=tc[m],D;for(D in C)if(C.hasOwnProperty(D)&&D in cA)return $d[m]=C[D];return m}var Ll=Fl("animationend"),Mc=Fl("animationiteration"),Wu=Fl("animationstart"),Gu=Fl("transitionend"),gd=new Map,yd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ca(m,C){gd.set(m,C),s(C,[m])}for(var Gc=0;Gc<yd.length;Gc++){var Qc=yd[Gc],Yc=Qc.toLowerCase(),Mh=Qc[0].toUpperCase()+Qc.slice(1);Ca(Yc,"on"+Mh)}Ca(Ll,"onAnimationEnd"),Ca(Mc,"onAnimationIteration"),Ca(Wu,"onAnimationStart"),Ca("dblclick","onDoubleClick"),Ca("focusin","onFocus"),Ca("focusout","onBlur"),Ca(Gu,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),nc=new Set("cancel close invalid load scroll toggle".split(" ").concat(gu));function qc(m,C,D){var Q=m.type||"unknown-event";m.currentTarget=D,ka(Q,C,void 0,m),m.currentTarget=null}function vd(m,C){C=(C&4)!==0;for(var D=0;D<m.length;D++){var Q=m[D],le=Q.event;Q=Q.listeners;e:{var ge=void 0;if(C)for(var tt=Q.length-1;0<=tt;tt--){var Ot=Q[tt],Wt=Ot.instance,wn=Ot.currentTarget;if(Ot=Ot.listener,Wt!==ge&&le.isPropagationStopped())break e;qc(le,Ot,wn),ge=Wt}else for(tt=0;tt<Q.length;tt++){if(Ot=Q[tt],Wt=Ot.instance,wn=Ot.currentTarget,Ot=Ot.listener,Wt!==ge&&le.isPropagationStopped())break e;qc(le,Ot,wn),ge=Wt}}}if(Sr)throw m=Ur,Sr=!1,Ur=null,m}function cs(m,C){var D=C[Sh];D===void 0&&(D=C[Sh]=new Set);var Q=m+"__bubble";D.has(Q)||(Hd(C,m,2,!1),D.add(Q))}function Cd(m,C,D){var Q=0;C&&(Q|=4),Hd(D,m,Q,C)}var dA="_reactListening"+Math.random().toString(36).slice(2);function yu(m){if(!m[dA]){m[dA]=!0,r.forEach(function(D){D!=="selectionchange"&&(nc.has(D)||Cd(D,!1,m),Cd(D,!0,m))});var C=m.nodeType===9?m:m.ownerDocument;C===null||C[dA]||(C[dA]=!0,Cd("selectionchange",!1,C))}}function Hd(m,C,D,Q){switch(di(C)){case 1:var le=st;break;case 4:le=Vt;break;default:le=Er}D=le.bind(null,C,D,m),le=void 0,!Br||C!=="touchstart"&&C!=="touchmove"&&C!=="wheel"||(le=!0),Q?le!==void 0?m.addEventListener(C,D,{capture:!0,passive:le}):m.addEventListener(C,D,!0):le!==void 0?m.addEventListener(C,D,{passive:le}):m.addEventListener(C,D,!1)}function wh(m,C,D,Q,le){var ge=Q;if((C&1)===0&&(C&2)===0&&Q!==null)e:for(;;){if(Q===null)return;var tt=Q.tag;if(tt===3||tt===4){var Ot=Q.stateNode.containerInfo;if(Ot===le||Ot.nodeType===8&&Ot.parentNode===le)break;if(tt===4)for(tt=Q.return;tt!==null;){var Wt=tt.tag;if((Wt===3||Wt===4)&&(Wt=tt.stateNode.containerInfo,Wt===le||Wt.nodeType===8&&Wt.parentNode===le))return;tt=tt.return}for(;Ot!==null;){if(tt=_s(Ot),tt===null)return;if(Wt=tt.tag,Wt===5||Wt===6){Q=ge=tt;continue e}Ot=Ot.parentNode}}Q=Q.return}Dn(function(){var wn=ge,ir=Fe(D),mr=[];e:{var or=gd.get(m);if(or!==void 0){var Vr=ca,ai=m;switch(m){case"keypress":if(mi(D)===0)break e;case"keydown":case"keyup":Vr=jc;break;case"focusin":ai="focus",Vr=Fo;break;case"focusout":ai="blur",Vr=Fo;break;case"beforeblur":case"afterblur":Vr=Fo;break;case"click":if(D.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Vr=Ad;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Vr=jd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Vr=vh;break;case Ll:case Mc:case Wu:Vr=yh;break;case Gu:Vr=Xh;break;case"scroll":Vr=cu;break;case"wheel":Vr=bc;break;case"copy":case"cut":case"paste":Vr=zu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Vr=hd}var ui=(C&4)!==0,xl=!ui&&m==="scroll",hn=ui?or!==null?or+"Capture":null:or;ui=[];for(var en=wn,yn;en!==null;){yn=en;var Cr=yn.stateNode;if(yn.tag===5&&Cr!==null&&(yn=Cr,hn!==null&&(Cr=rr(en,hn),Cr!=null&&ui.push(IA(en,Cr,yn)))),xl)break;en=en.return}0<ui.length&&(or=new Vr(or,ai,null,D,ir),mr.push({event:or,listeners:ui}))}}if((C&7)===0){e:{if(or=m==="mouseover"||m==="pointerover",Vr=m==="mouseout"||m==="pointerout",or&&D!==p&&(ai=D.relatedTarget||D.fromElement)&&(_s(ai)||ai[Cu]))break e;if((Vr||or)&&(or=ir.window===ir?ir:(or=ir.ownerDocument)?or.defaultView||or.parentWindow:window,Vr?(ai=D.relatedTarget||D.toElement,Vr=wn,ai=ai?_s(ai):null,ai!==null&&(xl=Wi(ai),ai!==xl||ai.tag!==5&&ai.tag!==6)&&(ai=null)):(Vr=null,ai=wn),Vr!==ai)){if(ui=Ad,Cr="onMouseLeave",hn="onMouseEnter",en="mouse",(m==="pointerout"||m==="pointerover")&&(ui=hd,Cr="onPointerLeave",hn="onPointerEnter",en="pointer"),xl=Vr==null?or:Gr(Vr),yn=ai==null?or:Gr(ai),or=new ui(Cr,en+"leave",Vr,D,ir),or.target=xl,or.relatedTarget=yn,Cr=null,_s(ir)===wn&&(ui=new ui(hn,en+"enter",ai,D,ir),ui.target=yn,ui.relatedTarget=xl,Cr=ui),xl=Cr,Vr&&ai)t:{for(ui=Vr,hn=ai,en=0,yn=ui;yn;yn=ic(yn))en++;for(yn=0,Cr=hn;Cr;Cr=ic(Cr))yn++;for(;0<en-yn;)ui=ic(ui),en--;for(;0<yn-en;)hn=ic(hn),yn--;for(;en--;){if(ui===hn||hn!==null&&ui===hn.alternate)break t;ui=ic(ui),hn=ic(hn)}ui=null}else ui=null;Vr!==null&&ms(mr,or,Vr,ui,!1),ai!==null&&xl!==null&&ms(mr,xl,ai,ui,!0)}}e:{if(or=wn?Gr(wn):window,Vr=or.nodeName&&or.nodeName.toLowerCase(),Vr==="select"||Vr==="input"&&or.type==="file")var Xr=am;else if(fd(or))if(pd)Xr=Jt;else{Xr=Vd;var Ti=bh}else(Vr=or.nodeName)&&Vr.toLowerCase()==="input"&&(or.type==="checkbox"||or.type==="radio")&&(Xr=OA);if(Xr&&(Xr=Xr(m,wn))){Qd(mr,Xr,D,ir);break e}Ti&&Ti(m,or,wn),m==="focusout"&&(Ti=or._wrapperState)&&Ti.controlled&&or.type==="number"&&tn(or,"number",or.value)}switch(Ti=wn?Gr(wn):window,m){case"focusin":(fd(Ti)||Ti.contentEditable==="true")&&(ec=Ti,mu=wn,Ka=null);break;case"focusout":Ka=mu=ec=null;break;case"mousedown":AA=!0;break;case"contextmenu":case"mouseup":case"dragend":AA=!1,xc(mr,D,ir);break;case"selectionchange":if(tu)break;case"keydown":case"keyup":xc(mr,D,ir)}var Pi;if(Nc)e:{switch(m){case"compositionstart":var ji="onCompositionStart";break e;case"compositionend":ji="onCompositionEnd";break e;case"compositionupdate":ji="onCompositionUpdate";break e}ji=void 0}else BA?fu(m,D)&&(ji="onCompositionEnd"):m==="keydown"&&D.keyCode===229&&(ji="onCompositionStart");ji&&(Wc&&D.locale!=="ko"&&(BA||ji!=="onCompositionStart"?ji==="onCompositionEnd"&&BA&&(Pi=Do()):(Ir=ir,Pr="value"in Ir?Ir.value:Ir.textContent,BA=!0)),Ti=rc(wn,ji),0<Ti.length&&(ji=new Gd(ji,m,null,D,ir),mr.push({event:ji,listeners:Ti}),Pi?ji.data=Pi:(Pi=XA(D),Pi!==null&&(ji.data=Pi)))),(Pi=EA?pu(m,D):ef(m,D))&&(wn=rc(wn,"onBeforeInput"),0<wn.length&&(ir=new Gd("onBeforeInput","beforeinput",null,D,ir),mr.push({event:ir,listeners:wn}),ir.data=Pi))}vd(mr,C)})}function IA(m,C,D){return{instance:m,listener:C,currentTarget:D}}function rc(m,C){for(var D=C+"Capture",Q=[];m!==null;){var le=m,ge=le.stateNode;le.tag===5&&ge!==null&&(le=ge,ge=rr(m,D),ge!=null&&Q.unshift(IA(m,ge,le)),ge=rr(m,C),ge!=null&&Q.push(IA(m,ge,le))),m=m.return}return Q}function ic(m){if(m===null)return null;do m=m.return;while(m&&m.tag!==5);return m||null}function ms(m,C,D,Q,le){for(var ge=C._reactName,tt=[];D!==null&&D!==Q;){var Ot=D,Wt=Ot.alternate,wn=Ot.stateNode;if(Wt!==null&&Wt===Q)break;Ot.tag===5&&wn!==null&&(Ot=wn,le?(Wt=rr(D,ge),Wt!=null&&tt.unshift(IA(D,Wt,Ot))):le||(Wt=rr(D,ge),Wt!=null&&tt.push(IA(D,Wt,Ot)))),D=D.return}tt.length!==0&&m.push({event:C,listeners:tt})}var ao=/\r\n?/g,_d=/\u0000|\uFFFD/g;function Ul(m){return(typeof m=="string"?m:""+m).replace(ao,`
`).replace(_d,"")}function Vc(m,C,D){if(C=Ul(C),Ul(m)!==C&&D)throw Error(t(425))}function oc(){}var bd=null,nl=null;function vu(m,C){return m==="textarea"||m==="noscript"||typeof C.children=="string"||typeof C.children=="number"||typeof C.dangerouslySetInnerHTML=="object"&&C.dangerouslySetInnerHTML!==null&&C.dangerouslySetInnerHTML.__html!=null}var rl=typeof setTimeout=="function"?setTimeout:void 0,sc=typeof clearTimeout=="function"?clearTimeout:void 0,Qu=typeof Promise=="function"?Promise:void 0,xd=typeof queueMicrotask=="function"?queueMicrotask:typeof Qu<"u"?function(m){return Qu.resolve(null).then(m).catch($c)}:rl;function $c(m){setTimeout(function(){throw m})}function Zd(m,C){var D=C,Q=0;do{var le=D.nextSibling;if(m.removeChild(D),le&&le.nodeType===8)if(D=le.data,D==="/$"){if(Q===0){m.removeChild(le),Ki(C);return}Q--}else D!=="$"&&D!=="$?"&&D!=="$!"||Q++;D=le}while(D);Ki(C)}function nu(m){for(;m!=null;m=m.nextSibling){var C=m.nodeType;if(C===1||C===3)break;if(C===8){if(C=m.data,C==="$"||C==="$!"||C==="$?")break;if(C==="/$")return null}}return m}function Yu(m){m=m.previousSibling;for(var C=0;m;){if(m.nodeType===8){var D=m.data;if(D==="$"||D==="$!"||D==="$?"){if(C===0)return m;C--}else D==="/$"&&C++}m=m.previousSibling}return null}var qu=Math.random().toString(36).slice(2),kA="__reactFiber$"+qu,wc="__reactProps$"+qu,Cu="__reactContainer$"+qu,Sh="__reactEvents$"+qu,ot="__reactListeners$"+qu,Vu="__reactHandles$"+qu;function _s(m){var C=m[kA];if(C)return C;for(var D=m.parentNode;D;){if(C=D[Cu]||D[kA]){if(D=C.alternate,C.child!==null||D!==null&&D.child!==null)for(m=Yu(m);m!==null;){if(D=m[kA])return D;m=Yu(m)}return C}m=D,D=m.parentNode}return null}function gi(m){return m=m[kA]||m[Cu],!m||m.tag!==5&&m.tag!==6&&m.tag!==13&&m.tag!==3?null:m}function Gr(m){if(m.tag===5||m.tag===6)return m.stateNode;throw Error(t(33))}function ta(m){return m[wc]||null}var zl=[],TA=-1;function _a(m){return{current:m}}function Us(m){0>TA||(m.current=zl[TA],zl[TA]=null,TA--)}function bs(m,C){TA++,zl[TA]=m.current,m.current=C}var Hc={},ba=_a(Hc),il=_a(!1),gs=Hc;function xr(m,C){var D=m.type.contextTypes;if(!D)return Hc;var Q=m.stateNode;if(Q&&Q.__reactInternalMemoizedUnmaskedChildContext===C)return Q.__reactInternalMemoizedMaskedChildContext;var le={},ge;for(ge in D)le[ge]=C[ge];return Q&&(m=m.stateNode,m.__reactInternalMemoizedUnmaskedChildContext=C,m.__reactInternalMemoizedMaskedChildContext=le),le}function xa(m){return m=m.childContextTypes,m!=null}function Zc(){Us(il),Us(ba)}function nf(m,C,D){if(ba.current!==Hc)throw Error(t(168));bs(ba,C),bs(il,D)}function ac(m,C,D){var Q=m.stateNode;if(C=C.childContextTypes,typeof Q.getChildContext!="function")return D;Q=Q.getChildContext();for(var le in Q)if(!(le in C))throw Error(t(108,Pt(m)||"Unknown",le));return we({},D,Q)}function yl(m){return m=(m=m.stateNode)&&m.__reactInternalMemoizedMergedChildContext||Hc,gs=ba.current,bs(ba,m),bs(il,il.current),!0}function Xd(m,C,D){var Q=m.stateNode;if(!Q)throw Error(t(169));D?(m=ac(m,C,gs),Q.__reactInternalMemoizedMergedChildContext=m,Us(il),Us(ba),bs(ba,m)):Us(il),bs(il,D)}var Mi=null,Md=!1,wd=!1;function $u(m){Mi===null?Mi=[m]:Mi.push(m)}function Sc(m){Md=!0,$u(m)}function lc(){if(!wd&&Mi!==null){wd=!0;var m=0,C=oi;try{var D=Mi;for(oi=1;m<D.length;m++){var Q=D[m];do Q=Q(!0);while(Q!==null)}Mi=null,Md=!1}catch(le){throw Mi!==null&&(Mi=Mi.slice(m+1)),Sl(Jl,lc),le}finally{oi=C,wd=!1}}return null}var Ec=[],ds=0,So=null,_u=0,Ma=[],Ra=0,Bc=null,ol=1,Uo="";function PA(m,C){Ec[ds++]=_u,Ec[ds++]=So,So=m,_u=C}function Sd(m,C,D){Ma[Ra++]=ol,Ma[Ra++]=Uo,Ma[Ra++]=Bc,Bc=m;var Q=ol;m=Uo;var le=32-Cn(Q)-1;Q&=~(1<<le),D+=1;var ge=32-Cn(C)+le;if(30<ge){var tt=le-le%5;ge=(Q&(1<<tt)-1).toString(32),Q>>=tt,le-=tt,ol=1<<32-Cn(C)+le|D<<le|Q,Uo=ge+m}else ol=1<<ge|D<<le|Q,Uo=m}function KA(m){m.return!==null&&(PA(m,1),Sd(m,1,0))}function uc(m){for(;m===So;)So=Ec[--ds],Ec[ds]=null,_u=Ec[--ds],Ec[ds]=null;for(;m===Bc;)Bc=Ma[--Ra],Ma[Ra]=null,Uo=Ma[--Ra],Ma[Ra]=null,ol=Ma[--Ra],Ma[Ra]=null}var da=null,Da=null,Eo=!1,ru=null;function Kr(m,C){var D=GA(5,null,null,0);D.elementType="DELETED",D.stateNode=C,D.return=m,C=m.deletions,C===null?(m.deletions=[D],m.flags|=16):C.push(D)}function ei(m,C){switch(m.tag){case 5:var D=m.type;return C=C.nodeType!==1||D.toLowerCase()!==C.nodeName.toLowerCase()?null:C,C!==null?(m.stateNode=C,da=m,Da=nu(C.firstChild),!0):!1;case 6:return C=m.pendingProps===""||C.nodeType!==3?null:C,C!==null?(m.stateNode=C,da=m,Da=null,!0):!1;case 13:return C=C.nodeType!==8?null:C,C!==null?(D=Bc!==null?{id:ol,overflow:Uo}:null,m.memoizedState={dehydrated:C,treeContext:D,retryLane:1073741824},D=GA(18,null,null,0),D.stateNode=C,D.return=m,m.child=D,da=m,Da=null,!0):!1;default:return!1}}function iu(m){return(m.mode&1)!==0&&(m.flags&128)===0}function vl(m){if(Eo){var C=Da;if(C){var D=C;if(!ei(m,C)){if(iu(m))throw Error(t(418));C=nu(D.nextSibling);var Q=da;C&&ei(m,C)?Kr(Q,D):(m.flags=m.flags&-4097|2,Eo=!1,da=m)}}else{if(iu(m))throw Error(t(418));m.flags=m.flags&-4097|2,Eo=!1,da=m}}}function rf(m){for(m=m.return;m!==null&&m.tag!==5&&m.tag!==3&&m.tag!==13;)m=m.return;da=m}function sl(m){if(m!==da)return!1;if(!Eo)return rf(m),Eo=!0,!1;var C;if((C=m.tag!==3)&&!(C=m.tag!==5)&&(C=m.type,C=C!=="head"&&C!=="body"&&!vu(m.type,m.memoizedProps)),C&&(C=Da)){if(iu(m))throw of(),Error(t(418));for(;C;)Kr(m,C),C=nu(C.nextSibling)}if(rf(m),m.tag===13){if(m=m.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(t(317));e:{for(m=m.nextSibling,C=0;m;){if(m.nodeType===8){var D=m.data;if(D==="/$"){if(C===0){Da=nu(m.nextSibling);break e}C--}else D!=="$"&&D!=="$!"&&D!=="$?"||C++}m=m.nextSibling}Da=null}}else Da=da?nu(m.stateNode.nextSibling):null;return!0}function of(){for(var m=Da;m;)m=nu(m.nextSibling)}function al(){Da=da=null,Eo=!1}function Hu(m){ru===null?ru=[m]:ru.push(m)}var hA=re.ReactCurrentBatchConfig;function Os(m,C,D){if(m=D.ref,m!==null&&typeof m!="function"&&typeof m!="object"){if(D._owner){if(D=D._owner,D){if(D.tag!==1)throw Error(t(309));var Q=D.stateNode}if(!Q)throw Error(t(147,m));var le=Q,ge=""+m;return C!==null&&C.ref!==null&&typeof C.ref=="function"&&C.ref._stringRef===ge?C.ref:(C=function(tt){var Ot=le.refs;tt===null?delete Ot[ge]:Ot[ge]=tt},C._stringRef=ge,C)}if(typeof m!="string")throw Error(t(284));if(!D._owner)throw Error(t(290,m))}return m}function Is(m,C){throw m=Object.prototype.toString.call(C),Error(t(31,m==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":m))}function sf(m){var C=m._init;return C(m._payload)}function Zu(m){function C(hn,en){if(m){var yn=hn.deletions;yn===null?(hn.deletions=[en],hn.flags|=16):yn.push(en)}}function D(hn,en){if(!m)return null;for(;en!==null;)C(hn,en),en=en.sibling;return null}function Q(hn,en){for(hn=new Map;en!==null;)en.key!==null?hn.set(en.key,en):hn.set(en.index,en),en=en.sibling;return hn}function le(hn,en){return hn=hc(hn,en),hn.index=0,hn.sibling=null,hn}function ge(hn,en,yn){return hn.index=yn,m?(yn=hn.alternate,yn!==null?(yn=yn.index,yn<en?(hn.flags|=2,en):yn):(hn.flags|=2,en)):(hn.flags|=1048576,en)}function tt(hn){return m&&hn.alternate===null&&(hn.flags|=2),hn}function Ot(hn,en,yn,Cr){return en===null||en.tag!==6?(en=t0(yn,hn.mode,Cr),en.return=hn,en):(en=le(en,yn),en.return=hn,en)}function Wt(hn,en,yn,Cr){var Xr=yn.type;return Xr===G?ir(hn,en,yn.props.children,Cr,yn.key):en!==null&&(en.elementType===Xr||typeof Xr=="object"&&Xr!==null&&Xr.$$typeof===at&&sf(Xr)===en.type)?(Cr=le(en,yn.props),Cr.ref=Os(hn,en,yn),Cr.return=hn,Cr):(Cr=Vf(yn.type,yn.key,yn.props,null,hn.mode,Cr),Cr.ref=Os(hn,en,yn),Cr.return=hn,Cr)}function wn(hn,en,yn,Cr){return en===null||en.tag!==4||en.stateNode.containerInfo!==yn.containerInfo||en.stateNode.implementation!==yn.implementation?(en=n0(yn,hn.mode,Cr),en.return=hn,en):(en=le(en,yn.children||[]),en.return=hn,en)}function ir(hn,en,yn,Cr,Xr){return en===null||en.tag!==7?(en=$f(yn,hn.mode,Cr,Xr),en.return=hn,en):(en=le(en,yn),en.return=hn,en)}function mr(hn,en,yn){if(typeof en=="string"&&en!==""||typeof en=="number")return en=t0(""+en,hn.mode,yn),en.return=hn,en;if(typeof en=="object"&&en!==null){switch(en.$$typeof){case V:return yn=Vf(en.type,en.key,en.props,null,hn.mode,yn),yn.ref=Os(hn,null,en),yn.return=hn,yn;case ne:return en=n0(en,hn.mode,yn),en.return=hn,en;case at:var Cr=en._init;return mr(hn,Cr(en._payload),yn)}if(dr(en)||Ne(en))return en=$f(en,hn.mode,yn,null),en.return=hn,en;Is(hn,en)}return null}function or(hn,en,yn,Cr){var Xr=en!==null?en.key:null;if(typeof yn=="string"&&yn!==""||typeof yn=="number")return Xr!==null?null:Ot(hn,en,""+yn,Cr);if(typeof yn=="object"&&yn!==null){switch(yn.$$typeof){case V:return yn.key===Xr?Wt(hn,en,yn,Cr):null;case ne:return yn.key===Xr?wn(hn,en,yn,Cr):null;case at:return Xr=yn._init,or(hn,en,Xr(yn._payload),Cr)}if(dr(yn)||Ne(yn))return Xr!==null?null:ir(hn,en,yn,Cr,null);Is(hn,yn)}return null}function Vr(hn,en,yn,Cr,Xr){if(typeof Cr=="string"&&Cr!==""||typeof Cr=="number")return hn=hn.get(yn)||null,Ot(en,hn,""+Cr,Xr);if(typeof Cr=="object"&&Cr!==null){switch(Cr.$$typeof){case V:return hn=hn.get(Cr.key===null?yn:Cr.key)||null,Wt(en,hn,Cr,Xr);case ne:return hn=hn.get(Cr.key===null?yn:Cr.key)||null,wn(en,hn,Cr,Xr);case at:var Ti=Cr._init;return Vr(hn,en,yn,Ti(Cr._payload),Xr)}if(dr(Cr)||Ne(Cr))return hn=hn.get(yn)||null,ir(en,hn,Cr,Xr,null);Is(en,Cr)}return null}function ai(hn,en,yn,Cr){for(var Xr=null,Ti=null,Pi=en,ji=en=0,Gl=null;Pi!==null&&ji<yn.length;ji++){Pi.index>ji?(Gl=Pi,Pi=null):Gl=Pi.sibling;var ys=or(hn,Pi,yn[ji],Cr);if(ys===null){Pi===null&&(Pi=Gl);break}m&&Pi&&ys.alternate===null&&C(hn,Pi),en=ge(ys,en,ji),Ti===null?Xr=ys:Ti.sibling=ys,Ti=ys,Pi=Gl}if(ji===yn.length)return D(hn,Pi),Eo&&PA(hn,ji),Xr;if(Pi===null){for(;ji<yn.length;ji++)Pi=mr(hn,yn[ji],Cr),Pi!==null&&(en=ge(Pi,en,ji),Ti===null?Xr=Pi:Ti.sibling=Pi,Ti=Pi);return Eo&&PA(hn,ji),Xr}for(Pi=Q(hn,Pi);ji<yn.length;ji++)Gl=Vr(Pi,hn,ji,yn[ji],Cr),Gl!==null&&(m&&Gl.alternate!==null&&Pi.delete(Gl.key===null?ji:Gl.key),en=ge(Gl,en,ji),Ti===null?Xr=Gl:Ti.sibling=Gl,Ti=Gl);return m&&Pi.forEach(function(oh){return C(hn,oh)}),Eo&&PA(hn,ji),Xr}function ui(hn,en,yn,Cr){var Xr=Ne(yn);if(typeof Xr!="function")throw Error(t(150));if(yn=Xr.call(yn),yn==null)throw Error(t(151));for(var Ti=Xr=null,Pi=en,ji=en=0,Gl=null,ys=yn.next();Pi!==null&&!ys.done;ji++,ys=yn.next()){Pi.index>ji?(Gl=Pi,Pi=null):Gl=Pi.sibling;var oh=or(hn,Pi,ys.value,Cr);if(oh===null){Pi===null&&(Pi=Gl);break}m&&Pi&&oh.alternate===null&&C(hn,Pi),en=ge(oh,en,ji),Ti===null?Xr=oh:Ti.sibling=oh,Ti=oh,Pi=Gl}if(ys.done)return D(hn,Pi),Eo&&PA(hn,ji),Xr;if(Pi===null){for(;!ys.done;ji++,ys=yn.next())ys=mr(hn,ys.value,Cr),ys!==null&&(en=ge(ys,en,ji),Ti===null?Xr=ys:Ti.sibling=ys,Ti=ys);return Eo&&PA(hn,ji),Xr}for(Pi=Q(hn,Pi);!ys.done;ji++,ys=yn.next())ys=Vr(Pi,hn,ji,ys.value,Cr),ys!==null&&(m&&ys.alternate!==null&&Pi.delete(ys.key===null?ji:ys.key),en=ge(ys,en,ji),Ti===null?Xr=ys:Ti.sibling=ys,Ti=ys);return m&&Pi.forEach(function(l1){return C(hn,l1)}),Eo&&PA(hn,ji),Xr}function xl(hn,en,yn,Cr){if(typeof yn=="object"&&yn!==null&&yn.type===G&&yn.key===null&&(yn=yn.props.children),typeof yn=="object"&&yn!==null){switch(yn.$$typeof){case V:e:{for(var Xr=yn.key,Ti=en;Ti!==null;){if(Ti.key===Xr){if(Xr=yn.type,Xr===G){if(Ti.tag===7){D(hn,Ti.sibling),en=le(Ti,yn.props.children),en.return=hn,hn=en;break e}}else if(Ti.elementType===Xr||typeof Xr=="object"&&Xr!==null&&Xr.$$typeof===at&&sf(Xr)===Ti.type){D(hn,Ti.sibling),en=le(Ti,yn.props),en.ref=Os(hn,Ti,yn),en.return=hn,hn=en;break e}D(hn,Ti);break}else C(hn,Ti);Ti=Ti.sibling}yn.type===G?(en=$f(yn.props.children,hn.mode,Cr,yn.key),en.return=hn,hn=en):(Cr=Vf(yn.type,yn.key,yn.props,null,hn.mode,Cr),Cr.ref=Os(hn,en,yn),Cr.return=hn,hn=Cr)}return tt(hn);case ne:e:{for(Ti=yn.key;en!==null;){if(en.key===Ti)if(en.tag===4&&en.stateNode.containerInfo===yn.containerInfo&&en.stateNode.implementation===yn.implementation){D(hn,en.sibling),en=le(en,yn.children||[]),en.return=hn,hn=en;break e}else{D(hn,en);break}else C(hn,en);en=en.sibling}en=n0(yn,hn.mode,Cr),en.return=hn,hn=en}return tt(hn);case at:return Ti=yn._init,xl(hn,en,Ti(yn._payload),Cr)}if(dr(yn))return ai(hn,en,yn,Cr);if(Ne(yn))return ui(hn,en,yn,Cr);Is(hn,yn)}return typeof yn=="string"&&yn!==""||typeof yn=="number"?(yn=""+yn,en!==null&&en.tag===6?(D(hn,en.sibling),en=le(en,yn),en.return=hn,hn=en):(D(hn,en),en=t0(yn,hn.mode,Cr),en.return=hn,hn=en),tt(hn)):D(hn,en)}return xl}var ks=Zu(!0),Oc=Zu(!1),bu=_a(null),Cl=null,ou=null,Ic=null;function xu(){Ic=ou=Cl=null}function ha(m){var C=bu.current;Us(bu),m._currentValue=C}function Qs(m,C,D){for(;m!==null;){var Q=m.alternate;if((m.childLanes&C)!==C?(m.childLanes|=C,Q!==null&&(Q.childLanes|=C)):Q!==null&&(Q.childLanes&C)!==C&&(Q.childLanes|=C),m===D)break;m=m.return}}function su(m,C){Cl=m,Ic=ou=null,m=m.dependencies,m!==null&&m.firstContext!==null&&((m.lanes&C)!==0&&(El=!0),m.firstContext=null)}function au(m){var C=m._currentValue;if(Ic!==m)if(m={context:m,memoizedValue:C,next:null},ou===null){if(Cl===null)throw Error(t(308));ou=m,Cl.dependencies={lanes:0,firstContext:m}}else ou=ou.next=m;return C}var RA=null;function Mu(m){RA===null?RA=[m]:RA.push(m)}function Ac(m,C,D,Q){var le=C.interleaved;return le===null?(D.next=D,Mu(C)):(D.next=le.next,le.next=D),C.interleaved=D,fA(m,Q)}function fA(m,C){m.lanes|=C;var D=m.alternate;for(D!==null&&(D.lanes|=C),D=m,m=m.return;m!==null;)m.childLanes|=C,D=m.alternate,D!==null&&(D.childLanes|=C),D=m,m=m.return;return D.tag===3?D.stateNode:null}var jl=!1;function Xc(m){m.updateQueue={baseState:m.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function I(m,C){m=m.updateQueue,C.updateQueue===m&&(C.updateQueue={baseState:m.baseState,firstBaseUpdate:m.firstBaseUpdate,lastBaseUpdate:m.lastBaseUpdate,shared:m.shared,effects:m.effects})}function a(m,C){return{eventTime:m,lane:C,tag:0,payload:null,callback:null,next:null}}function c(m,C,D){var Q=m.updateQueue;if(Q===null)return null;if(Q=Q.shared,(Ci&2)!==0){var le=Q.pending;return le===null?C.next=C:(C.next=le.next,le.next=C),Q.pending=C,fA(m,D)}return le=Q.interleaved,le===null?(C.next=C,Mu(Q)):(C.next=le.next,le.next=C),Q.interleaved=C,fA(m,D)}function _(m,C,D){if(C=C.updateQueue,C!==null&&(C=C.shared,(D&4194240)!==0)){var Q=C.lanes;Q&=m.pendingLanes,D|=Q,C.lanes=D,Ja(m,D)}}function M(m,C){var D=m.updateQueue,Q=m.alternate;if(Q!==null&&(Q=Q.updateQueue,D===Q)){var le=null,ge=null;if(D=D.firstBaseUpdate,D!==null){do{var tt={eventTime:D.eventTime,lane:D.lane,tag:D.tag,payload:D.payload,callback:D.callback,next:null};ge===null?le=ge=tt:ge=ge.next=tt,D=D.next}while(D!==null);ge===null?le=ge=C:ge=ge.next=C}else le=ge=C;D={baseState:Q.baseState,firstBaseUpdate:le,lastBaseUpdate:ge,shared:Q.shared,effects:Q.effects},m.updateQueue=D;return}m=D.lastBaseUpdate,m===null?D.firstBaseUpdate=C:m.next=C,D.lastBaseUpdate=C}function T(m,C,D,Q){var le=m.updateQueue;jl=!1;var ge=le.firstBaseUpdate,tt=le.lastBaseUpdate,Ot=le.shared.pending;if(Ot!==null){le.shared.pending=null;var Wt=Ot,wn=Wt.next;Wt.next=null,tt===null?ge=wn:tt.next=wn,tt=Wt;var ir=m.alternate;ir!==null&&(ir=ir.updateQueue,Ot=ir.lastBaseUpdate,Ot!==tt&&(Ot===null?ir.firstBaseUpdate=wn:Ot.next=wn,ir.lastBaseUpdate=Wt))}if(ge!==null){var mr=le.baseState;tt=0,ir=wn=Wt=null,Ot=ge;do{var or=Ot.lane,Vr=Ot.eventTime;if((Q&or)===or){ir!==null&&(ir=ir.next={eventTime:Vr,lane:0,tag:Ot.tag,payload:Ot.payload,callback:Ot.callback,next:null});e:{var ai=m,ui=Ot;switch(or=C,Vr=D,ui.tag){case 1:if(ai=ui.payload,typeof ai=="function"){mr=ai.call(Vr,mr,or);break e}mr=ai;break e;case 3:ai.flags=ai.flags&-65537|128;case 0:if(ai=ui.payload,or=typeof ai=="function"?ai.call(Vr,mr,or):ai,or==null)break e;mr=we({},mr,or);break e;case 2:jl=!0}}Ot.callback!==null&&Ot.lane!==0&&(m.flags|=64,or=le.effects,or===null?le.effects=[Ot]:or.push(Ot))}else Vr={eventTime:Vr,lane:or,tag:Ot.tag,payload:Ot.payload,callback:Ot.callback,next:null},ir===null?(wn=ir=Vr,Wt=mr):ir=ir.next=Vr,tt|=or;if(Ot=Ot.next,Ot===null){if(Ot=le.shared.pending,Ot===null)break;or=Ot,Ot=or.next,or.next=null,le.lastBaseUpdate=or,le.shared.pending=null}}while(!0);if(ir===null&&(Wt=mr),le.baseState=Wt,le.firstBaseUpdate=wn,le.lastBaseUpdate=ir,C=le.shared.interleaved,C!==null){le=C;do tt|=le.lane,le=le.next;while(le!==C)}else ge===null&&(le.shared.lanes=0);Ou|=tt,m.lanes=tt,m.memoizedState=mr}}function z(m,C,D){if(m=C.effects,C.effects=null,m!==null)for(C=0;C<m.length;C++){var Q=m[C],le=Q.callback;if(le!==null){if(Q.callback=null,Q=D,typeof le!="function")throw Error(t(191,le));le.call(Q)}}}var q={},te=_a(q),ae=_a(q),be=_a(q);function ke(m){if(m===q)throw Error(t(174));return m}function Te(m,C){switch(bs(be,C),bs(ae,m),bs(te,q),m=C.nodeType,m){case 9:case 11:C=(C=C.documentElement)?C.namespaceURI:Ge(null,"");break;default:m=m===8?C.parentNode:C,C=m.namespaceURI||null,m=m.tagName,C=Ge(C,m)}Us(te),bs(te,C)}function $e(){Us(te),Us(ae),Us(be)}function Xe(m){ke(be.current);var C=ke(te.current),D=Ge(C,m.type);C!==D&&(bs(ae,m),bs(te,D))}function mt(m){ae.current===m&&(Us(te),Us(ae))}var ut=_a(0);function ft(m){for(var C=m;C!==null;){if(C.tag===13){var D=C.memoizedState;if(D!==null&&(D=D.dehydrated,D===null||D.data==="$?"||D.data==="$!"))return C}else if(C.tag===19&&C.memoizedProps.revealOrder!==void 0){if((C.flags&128)!==0)return C}else if(C.child!==null){C.child.return=C,C=C.child;continue}if(C===m)break;for(;C.sibling===null;){if(C.return===null||C.return===m)return null;C=C.return}C.sibling.return=C.return,C=C.sibling}return null}var vt=[];function Et(){for(var m=0;m<vt.length;m++)vt[m]._workInProgressVersionPrimary=null;vt.length=0}var kt=re.ReactCurrentDispatcher,Rt=re.ReactCurrentBatchConfig,Ut=0,It=null,rn=null,Zt=null,Mn=!1,En=!1,bn=0,On=0;function zn(){throw Error(t(321))}function Ln(m,C){if(C===null)return!1;for(var D=0;D<C.length&&D<m.length;D++)if(!an(m[D],C[D]))return!1;return!0}function Tr(m,C,D,Q,le,ge){if(Ut=ge,It=C,C.memoizedState=null,C.updateQueue=null,C.lanes=0,kt.current=m===null||m.memoizedState===null?af:kc,m=D(Q,le),En){ge=0;do{if(En=!1,bn=0,25<=ge)throw Error(t(301));ge+=1,Zt=rn=null,C.updateQueue=null,kt.current=FA,m=D(Q,le)}while(En)}if(kt.current=Jd,C=rn!==null&&rn.next!==null,Ut=0,Zt=rn=It=null,Mn=!1,C)throw Error(t(300));return m}function Zr(){var m=bn!==0;return bn=0,m}function Xi(){var m={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Zt===null?It.memoizedState=Zt=m:Zt=Zt.next=m,Zt}function _o(){if(rn===null){var m=It.alternate;m=m!==null?m.memoizedState:null}else m=rn.next;var C=Zt===null?It.memoizedState:Zt.next;if(C!==null)Zt=C,rn=m;else{if(m===null)throw Error(t(310));rn=m,m={memoizedState:rn.memoizedState,baseState:rn.baseState,baseQueue:rn.baseQueue,queue:rn.queue,next:null},Zt===null?It.memoizedState=Zt=m:Zt=Zt.next=m}return Zt}function ki(m,C){return typeof C=="function"?C(m):C}function os(m){var C=_o(),D=C.queue;if(D===null)throw Error(t(311));D.lastRenderedReducer=m;var Q=rn,le=Q.baseQueue,ge=D.pending;if(ge!==null){if(le!==null){var tt=le.next;le.next=ge.next,ge.next=tt}Q.baseQueue=le=ge,D.pending=null}if(le!==null){ge=le.next,Q=Q.baseState;var Ot=tt=null,Wt=null,wn=ge;do{var ir=wn.lane;if((Ut&ir)===ir)Wt!==null&&(Wt=Wt.next={lane:0,action:wn.action,hasEagerState:wn.hasEagerState,eagerState:wn.eagerState,next:null}),Q=wn.hasEagerState?wn.eagerState:m(Q,wn.action);else{var mr={lane:ir,action:wn.action,hasEagerState:wn.hasEagerState,eagerState:wn.eagerState,next:null};Wt===null?(Ot=Wt=mr,tt=Q):Wt=Wt.next=mr,It.lanes|=ir,Ou|=ir}wn=wn.next}while(wn!==null&&wn!==ge);Wt===null?tt=Q:Wt.next=Ot,an(Q,C.memoizedState)||(El=!0),C.memoizedState=Q,C.baseState=tt,C.baseQueue=Wt,D.lastRenderedState=Q}if(m=D.interleaved,m!==null){le=m;do ge=le.lane,It.lanes|=ge,Ou|=ge,le=le.next;while(le!==m)}else le===null&&(D.lanes=0);return[C.memoizedState,D.dispatch]}function Yo(m){var C=_o(),D=C.queue;if(D===null)throw Error(t(311));D.lastRenderedReducer=m;var Q=D.dispatch,le=D.pending,ge=C.memoizedState;if(le!==null){D.pending=null;var tt=le=le.next;do ge=m(ge,tt.action),tt=tt.next;while(tt!==le);an(ge,C.memoizedState)||(El=!0),C.memoizedState=ge,C.baseQueue===null&&(C.baseState=ge),D.lastRenderedState=ge}return[ge,Q]}function Ao(){}function po(m,C){var D=It,Q=_o(),le=C(),ge=!an(Q.memoizedState,le);if(ge&&(Q.memoizedState=le,El=!0),Q=Q.queue,Sa(es.bind(null,D,Q,m),[m]),Q.getSnapshot!==C||ge||Zt!==null&&Zt.memoizedState.tag&1){if(D.flags|=2048,_l(9,ss.bind(null,D,Q,le,C),void 0,null),ls===null)throw Error(t(349));(Ut&30)!==0||Fa(D,C,le)}return le}function Fa(m,C,D){m.flags|=16384,m={getSnapshot:C,value:D},C=It.updateQueue,C===null?(C={lastEffect:null,stores:null},It.updateQueue=C,C.stores=[m]):(D=C.stores,D===null?C.stores=[m]:D.push(m))}function ss(m,C,D,Q){C.value=D,C.getSnapshot=Q,wa(C)&&DA(m)}function es(m,C,D){return D(function(){wa(C)&&DA(m)})}function wa(m){var C=m.getSnapshot;m=m.value;try{var D=C();return!an(m,D)}catch{return!0}}function DA(m){var C=fA(m,1);C!==null&&nd(C,m,1,-1)}function wu(m){var C=Xi();return typeof m=="function"&&(m=m()),C.memoizedState=C.baseState=m,m={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ki,lastRenderedState:m},C.queue=m,m=m.dispatch=Bh.bind(null,It,m),[C.memoizedState,m]}function _l(m,C,D,Q){return m={tag:m,create:C,destroy:D,deps:Q,next:null},C=It.updateQueue,C===null?(C={lastEffect:null,stores:null},It.updateQueue=C,C.lastEffect=m.next=m):(D=C.lastEffect,D===null?C.lastEffect=m.next=m:(Q=D.next,D.next=m,m.next=Q,C.lastEffect=m)),m}function La(){return _o().memoizedState}function Xu(m,C,D,Q){var le=Xi();It.flags|=m,le.memoizedState=_l(1|C,D,void 0,Q===void 0?null:Q)}function pA(m,C,D,Q){var le=_o();Q=Q===void 0?null:Q;var ge=void 0;if(rn!==null){var tt=rn.memoizedState;if(ge=tt.destroy,Q!==null&&Ln(Q,tt.deps)){le.memoizedState=_l(C,D,ge,Q);return}}It.flags|=m,le.memoizedState=_l(1|C,D,ge,Q)}function mA(m,C){return Xu(8390656,8,m,C)}function Sa(m,C){return pA(2048,8,m,C)}function lu(m,C){return pA(4,2,m,C)}function Ua(m,C){return pA(4,4,m,C)}function gA(m,C){if(typeof C=="function")return m=m(),C(m),function(){C(null)};if(C!=null)return m=m(),C.current=m,function(){C.current=null}}function hs(m,C,D){return D=D!=null?D.concat([m]):null,pA(4,4,gA.bind(null,C,m),D)}function zo(){}function za(m,C){var D=_o();C=C===void 0?null:C;var Q=D.memoizedState;return Q!==null&&C!==null&&Ln(C,Q[1])?Q[0]:(D.memoizedState=[m,C],m)}function ja(m,C){var D=_o();C=C===void 0?null:C;var Q=D.memoizedState;return Q!==null&&C!==null&&Ln(C,Q[1])?Q[0]:(m=m(),D.memoizedState=[m,C],m)}function yA(m,C,D){return(Ut&21)===0?(m.baseState&&(m.baseState=!1,El=!0),m.memoizedState=D):(an(D,C)||(D=Aa(),It.lanes|=D,Ou|=D,m.baseState=!0),C)}function zf(m,C){var D=oi;oi=D!==0&&4>D?D:4,m(!0);var Q=Rt.transition;Rt.transition={};try{m(!1),C()}finally{oi=D,Rt.transition=Q}}function Eh(){return _o().memoizedState}function jf(m,C,D){var Q=rh(m);if(D={lane:Q,action:D,hasEagerState:!1,eagerState:null,next:null},cc(m))Ts(C,D);else if(D=Ac(m,C,D,Q),D!==null){var le=_A();nd(D,m,Q,le),Su(D,C,Q)}}function Bh(m,C,D){var Q=rh(m),le={lane:Q,action:D,hasEagerState:!1,eagerState:null,next:null};if(cc(m))Ts(C,le);else{var ge=m.alternate;if(m.lanes===0&&(ge===null||ge.lanes===0)&&(ge=C.lastRenderedReducer,ge!==null))try{var tt=C.lastRenderedState,Ot=ge(tt,D);if(le.hasEagerState=!0,le.eagerState=Ot,an(Ot,tt)){var Wt=C.interleaved;Wt===null?(le.next=le,Mu(C)):(le.next=Wt.next,Wt.next=le),C.interleaved=le;return}}catch{}finally{}D=Ac(m,C,le,Q),D!==null&&(le=_A(),nd(D,m,Q,le),Su(D,C,Q))}}function cc(m){var C=m.alternate;return m===It||C!==null&&C===It}function Ts(m,C){En=Mn=!0;var D=m.pending;D===null?C.next=C:(C.next=D.next,D.next=C),m.pending=C}function Su(m,C,D){if((D&4194240)!==0){var Q=C.lanes;Q&=m.pendingLanes,D|=Q,C.lanes=D,Ja(m,D)}}var Jd={readContext:au,useCallback:zn,useContext:zn,useEffect:zn,useImperativeHandle:zn,useInsertionEffect:zn,useLayoutEffect:zn,useMemo:zn,useReducer:zn,useRef:zn,useState:zn,useDebugValue:zn,useDeferredValue:zn,useTransition:zn,useMutableSource:zn,useSyncExternalStore:zn,useId:zn,unstable_isNewReconciler:!1},af={readContext:au,useCallback:function(m,C){return Xi().memoizedState=[m,C===void 0?null:C],m},useContext:au,useEffect:mA,useImperativeHandle:function(m,C,D){return D=D!=null?D.concat([m]):null,Xu(4194308,4,gA.bind(null,C,m),D)},useLayoutEffect:function(m,C){return Xu(4194308,4,m,C)},useInsertionEffect:function(m,C){return Xu(4,2,m,C)},useMemo:function(m,C){var D=Xi();return C=C===void 0?null:C,m=m(),D.memoizedState=[m,C],m},useReducer:function(m,C,D){var Q=Xi();return C=D!==void 0?D(C):C,Q.memoizedState=Q.baseState=C,m={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:m,lastRenderedState:C},Q.queue=m,m=m.dispatch=jf.bind(null,It,m),[Q.memoizedState,m]},useRef:function(m){var C=Xi();return m={current:m},C.memoizedState=m},useState:wu,useDebugValue:zo,useDeferredValue:function(m){return Xi().memoizedState=m},useTransition:function(){var m=wu(!1),C=m[0];return m=zf.bind(null,m[1]),Xi().memoizedState=m,[C,m]},useMutableSource:function(){},useSyncExternalStore:function(m,C,D){var Q=It,le=Xi();if(Eo){if(D===void 0)throw Error(t(407));D=D()}else{if(D=C(),ls===null)throw Error(t(349));(Ut&30)!==0||Fa(Q,C,D)}le.memoizedState=D;var ge={value:D,getSnapshot:C};return le.queue=ge,mA(es.bind(null,Q,ge,m),[m]),Q.flags|=2048,_l(9,ss.bind(null,Q,ge,D,C),void 0,null),D},useId:function(){var m=Xi(),C=ls.identifierPrefix;if(Eo){var D=Uo,Q=ol;D=(Q&~(1<<32-Cn(Q)-1)).toString(32)+D,C=":"+C+"R"+D,D=bn++,0<D&&(C+="H"+D.toString(32)),C+=":"}else D=On++,C=":"+C+"r"+D.toString(32)+":";return m.memoizedState=C},unstable_isNewReconciler:!1},kc={readContext:au,useCallback:za,useContext:au,useEffect:Sa,useImperativeHandle:hs,useInsertionEffect:lu,useLayoutEffect:Ua,useMemo:ja,useReducer:os,useRef:La,useState:function(){return os(ki)},useDebugValue:zo,useDeferredValue:function(m){var C=_o();return yA(C,rn.memoizedState,m)},useTransition:function(){var m=os(ki)[0],C=_o().memoizedState;return[m,C]},useMutableSource:Ao,useSyncExternalStore:po,useId:Eh,unstable_isNewReconciler:!1},FA={readContext:au,useCallback:za,useContext:au,useEffect:Sa,useImperativeHandle:hs,useInsertionEffect:lu,useLayoutEffect:Ua,useMemo:ja,useReducer:Yo,useRef:La,useState:function(){return Yo(ki)},useDebugValue:zo,useDeferredValue:function(m){var C=_o();return rn===null?C.memoizedState=m:yA(C,rn.memoizedState,m)},useTransition:function(){var m=Yo(ki)[0],C=_o().memoizedState;return[m,C]},useMutableSource:Ao,useSyncExternalStore:po,useId:Eh,unstable_isNewReconciler:!1};function ll(m,C){if(m&&m.defaultProps){C=we({},C),m=m.defaultProps;for(var D in m)C[D]===void 0&&(C[D]=m[D]);return C}return C}function xp(m,C,D,Q){C=m.memoizedState,D=D(Q,C),D=D==null?C:we({},C,D),m.memoizedState=D,m.lanes===0&&(m.updateQueue.baseState=D)}var Oh={isMounted:function(m){return(m=m._reactInternals)?Wi(m)===m:!1},enqueueSetState:function(m,C,D){m=m._reactInternals;var Q=_A(),le=rh(m),ge=a(Q,le);ge.payload=C,D!=null&&(ge.callback=D),C=c(m,ge,le),C!==null&&(nd(C,m,le,Q),_(C,m,le))},enqueueReplaceState:function(m,C,D){m=m._reactInternals;var Q=_A(),le=rh(m),ge=a(Q,le);ge.tag=1,ge.payload=C,D!=null&&(ge.callback=D),C=c(m,ge,le),C!==null&&(nd(C,m,le,Q),_(C,m,le))},enqueueForceUpdate:function(m,C){m=m._reactInternals;var D=_A(),Q=rh(m),le=a(D,Q);le.tag=2,C!=null&&(le.callback=C),C=c(m,le,Q),C!==null&&(nd(C,m,Q,D),_(C,m,Q))}};function lm(m,C,D,Q,le,ge,tt){return m=m.stateNode,typeof m.shouldComponentUpdate=="function"?m.shouldComponentUpdate(Q,ge,tt):C.prototype&&C.prototype.isPureReactComponent?!Dr(D,Q)||!Dr(le,ge):!0}function Ed(m,C,D){var Q=!1,le=Hc,ge=C.contextType;return typeof ge=="object"&&ge!==null?ge=au(ge):(le=xa(C)?gs:ba.current,Q=C.contextTypes,ge=(Q=Q!=null)?xr(m,le):Hc),C=new C(D,ge),m.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,C.updater=Oh,m.stateNode=C,C._reactInternals=m,Q&&(m=m.stateNode,m.__reactInternalMemoizedUnmaskedChildContext=le,m.__reactInternalMemoizedMaskedChildContext=ge),C}function Ih(m,C,D,Q){m=C.state,typeof C.componentWillReceiveProps=="function"&&C.componentWillReceiveProps(D,Q),typeof C.UNSAFE_componentWillReceiveProps=="function"&&C.UNSAFE_componentWillReceiveProps(D,Q),C.state!==m&&Oh.enqueueReplaceState(C,C.state,null)}function Mp(m,C,D,Q){var le=m.stateNode;le.props=D,le.state=m.memoizedState,le.refs={},Xc(m);var ge=C.contextType;typeof ge=="object"&&ge!==null?le.context=au(ge):(ge=xa(C)?gs:ba.current,le.context=xr(m,ge)),le.state=m.memoizedState,ge=C.getDerivedStateFromProps,typeof ge=="function"&&(xp(m,C,ge,D),le.state=m.memoizedState),typeof C.getDerivedStateFromProps=="function"||typeof le.getSnapshotBeforeUpdate=="function"||typeof le.UNSAFE_componentWillMount!="function"&&typeof le.componentWillMount!="function"||(C=le.state,typeof le.componentWillMount=="function"&&le.componentWillMount(),typeof le.UNSAFE_componentWillMount=="function"&&le.UNSAFE_componentWillMount(),C!==le.state&&Oh.enqueueReplaceState(le,le.state,null),T(m,D,le,Q),le.state=m.memoizedState),typeof le.componentDidMount=="function"&&(m.flags|=4194308)}function LA(m,C){try{var D="",Q=C;do D+=yt(Q),Q=Q.return;while(Q);var le=D}catch(ge){le=`
Error generating stack: `+ge.message+`
`+ge.stack}return{value:m,source:C,stack:le,digest:null}}function wp(m,C,D){return{value:m,source:null,stack:D??null,digest:C??null}}function Jc(m,C){try{console.error(C.value)}catch(D){setTimeout(function(){throw D})}}var lf=typeof WeakMap=="function"?WeakMap:Map;function ed(m,C,D){D=a(-1,D),D.tag=3,D.payload={element:null};var Q=C.value;return D.callback=function(){qm||(qm=!0,q0=Q),Jc(m,C)},D}function uf(m,C,D){D=a(-1,D),D.tag=3;var Q=m.type.getDerivedStateFromError;if(typeof Q=="function"){var le=C.value;D.payload=function(){return Q(le)},D.callback=function(){Jc(m,C)}}var ge=m.stateNode;return ge!==null&&typeof ge.componentDidCatch=="function"&&(D.callback=function(){Jc(m,C),typeof Q!="function"&&(td===null?td=new Set([this]):td.add(this));var tt=C.stack;this.componentDidCatch(C.value,{componentStack:tt!==null?tt:""})}),D}function Af(m,C,D){var Q=m.pingCache;if(Q===null){Q=m.pingCache=new lf;var le=new Set;Q.set(C,le)}else le=Q.get(C),le===void 0&&(le=new Set,Q.set(C,le));le.has(D)||(le.add(D),m=$y.bind(null,m,C,D),C.then(m,m))}function um(m){do{var C;if((C=m.tag===13)&&(C=m.memoizedState,C=C!==null?C.dehydrated!==null:!0),C)return m;m=m.return}while(m!==null);return null}function eh(m,C,D,Q,le){return(m.mode&1)===0?(m===C?m.flags|=65536:(m.flags|=128,D.flags|=131072,D.flags&=-52805,D.tag===1&&(D.alternate===null?D.tag=17:(C=a(-1,1),C.tag=2,c(D,C,1))),D.lanes|=1),m):(m.flags|=65536,m.lanes=le,m)}var cf=re.ReactCurrentOwner,El=!1;function Nl(m,C,D,Q){C.child=m===null?Oc(C,null,D,Q):ks(C,m.child,D,Q)}function Qm(m,C,D,Q,le){D=D.render;var ge=C.ref;return su(C,le),Q=Tr(m,C,D,Q,ge,le),D=Zr(),m!==null&&!El?(C.updateQueue=m.updateQueue,C.flags&=-2053,m.lanes&=~le,Eu(m,C,le)):(Eo&&D&&KA(C),C.flags|=1,Nl(m,C,Q,le),C.child)}function Nf(m,C,D,Q,le){if(m===null){var ge=D.type;return typeof ge=="function"&&!Cf(ge)&&ge.defaultProps===void 0&&D.compare===null&&D.defaultProps===void 0?(C.tag=15,C.type=ge,Ho(m,C,ge,Q,le)):(m=Vf(D.type,null,Q,C,C.mode,le),m.ref=C.ref,m.return=C,C.child=m)}if(ge=m.child,(m.lanes&le)===0){var tt=ge.memoizedProps;if(D=D.compare,D=D!==null?D:Dr,D(tt,Q)&&m.ref===C.ref)return Eu(m,C,le)}return C.flags|=1,m=hc(ge,Q),m.ref=C.ref,m.return=C,C.child=m}function Ho(m,C,D,Q,le){if(m!==null){var ge=m.memoizedProps;if(Dr(ge,Q)&&m.ref===C.ref)if(El=!1,C.pendingProps=Q=ge,(m.lanes&le)!==0)(m.flags&131072)!==0&&(El=!0);else return C.lanes=m.lanes,Eu(m,C,le)}return Bl(m,C,D,Q,le)}function Wf(m,C,D){var Q=C.pendingProps,le=Q.children,ge=m!==null?m.memoizedState:null;if(Q.mode==="hidden")if((C.mode&1)===0)C.memoizedState={baseLanes:0,cachePool:null,transitions:null},bs(Bu,xs),xs|=D;else{if((D&1073741824)===0)return m=ge!==null?ge.baseLanes|D:D,C.lanes=C.childLanes=1073741824,C.memoizedState={baseLanes:m,cachePool:null,transitions:null},C.updateQueue=null,bs(Bu,xs),xs|=m,null;C.memoizedState={baseLanes:0,cachePool:null,transitions:null},Q=ge!==null?ge.baseLanes:D,bs(Bu,xs),xs|=Q}else ge!==null?(Q=ge.baseLanes|D,C.memoizedState=null):Q=D,bs(Bu,xs),xs|=Q;return Nl(m,C,le,D),C.child}function Bd(m,C){var D=C.ref;(m===null&&D!==null||m!==null&&m.ref!==D)&&(C.flags|=512,C.flags|=2097152)}function Bl(m,C,D,Q,le){var ge=xa(D)?gs:ba.current;return ge=xr(C,ge),su(C,le),D=Tr(m,C,D,Q,ge,le),Q=Zr(),m!==null&&!El?(C.updateQueue=m.updateQueue,C.flags&=-2053,m.lanes&=~le,Eu(m,C,le)):(Eo&&Q&&KA(C),C.flags|=1,Nl(m,C,D,le),C.child)}function vA(m,C,D,Q,le){if(xa(D)){var ge=!0;yl(C)}else ge=!1;if(su(C,le),C.stateNode===null)Ep(m,C),Ed(C,D,Q),Mp(C,D,Q,le),Q=!0;else if(m===null){var tt=C.stateNode,Ot=C.memoizedProps;tt.props=Ot;var Wt=tt.context,wn=D.contextType;typeof wn=="object"&&wn!==null?wn=au(wn):(wn=xa(D)?gs:ba.current,wn=xr(C,wn));var ir=D.getDerivedStateFromProps,mr=typeof ir=="function"||typeof tt.getSnapshotBeforeUpdate=="function";mr||typeof tt.UNSAFE_componentWillReceiveProps!="function"&&typeof tt.componentWillReceiveProps!="function"||(Ot!==Q||Wt!==wn)&&Ih(C,tt,Q,wn),jl=!1;var or=C.memoizedState;tt.state=or,T(C,Q,tt,le),Wt=C.memoizedState,Ot!==Q||or!==Wt||il.current||jl?(typeof ir=="function"&&(xp(C,D,ir,Q),Wt=C.memoizedState),(Ot=jl||lm(C,D,Ot,Q,or,Wt,wn))?(mr||typeof tt.UNSAFE_componentWillMount!="function"&&typeof tt.componentWillMount!="function"||(typeof tt.componentWillMount=="function"&&tt.componentWillMount(),typeof tt.UNSAFE_componentWillMount=="function"&&tt.UNSAFE_componentWillMount()),typeof tt.componentDidMount=="function"&&(C.flags|=4194308)):(typeof tt.componentDidMount=="function"&&(C.flags|=4194308),C.memoizedProps=Q,C.memoizedState=Wt),tt.props=Q,tt.state=Wt,tt.context=wn,Q=Ot):(typeof tt.componentDidMount=="function"&&(C.flags|=4194308),Q=!1)}else{tt=C.stateNode,I(m,C),Ot=C.memoizedProps,wn=C.type===C.elementType?Ot:ll(C.type,Ot),tt.props=wn,mr=C.pendingProps,or=tt.context,Wt=D.contextType,typeof Wt=="object"&&Wt!==null?Wt=au(Wt):(Wt=xa(D)?gs:ba.current,Wt=xr(C,Wt));var Vr=D.getDerivedStateFromProps;(ir=typeof Vr=="function"||typeof tt.getSnapshotBeforeUpdate=="function")||typeof tt.UNSAFE_componentWillReceiveProps!="function"&&typeof tt.componentWillReceiveProps!="function"||(Ot!==mr||or!==Wt)&&Ih(C,tt,Q,Wt),jl=!1,or=C.memoizedState,tt.state=or,T(C,Q,tt,le);var ai=C.memoizedState;Ot!==mr||or!==ai||il.current||jl?(typeof Vr=="function"&&(xp(C,D,Vr,Q),ai=C.memoizedState),(wn=jl||lm(C,D,wn,Q,or,ai,Wt)||!1)?(ir||typeof tt.UNSAFE_componentWillUpdate!="function"&&typeof tt.componentWillUpdate!="function"||(typeof tt.componentWillUpdate=="function"&&tt.componentWillUpdate(Q,ai,Wt),typeof tt.UNSAFE_componentWillUpdate=="function"&&tt.UNSAFE_componentWillUpdate(Q,ai,Wt)),typeof tt.componentDidUpdate=="function"&&(C.flags|=4),typeof tt.getSnapshotBeforeUpdate=="function"&&(C.flags|=1024)):(typeof tt.componentDidUpdate!="function"||Ot===m.memoizedProps&&or===m.memoizedState||(C.flags|=4),typeof tt.getSnapshotBeforeUpdate!="function"||Ot===m.memoizedProps&&or===m.memoizedState||(C.flags|=1024),C.memoizedProps=Q,C.memoizedState=ai),tt.props=Q,tt.state=ai,tt.context=Wt,Q=wn):(typeof tt.componentDidUpdate!="function"||Ot===m.memoizedProps&&or===m.memoizedState||(C.flags|=4),typeof tt.getSnapshotBeforeUpdate!="function"||Ot===m.memoizedProps&&or===m.memoizedState||(C.flags|=1024),Q=!1)}return th(m,C,D,Q,ge,le)}function th(m,C,D,Q,le,ge){Bd(m,C);var tt=(C.flags&128)!==0;if(!Q&&!tt)return le&&Xd(C,D,!1),Eu(m,C,ge);Q=C.stateNode,cf.current=C;var Ot=tt&&typeof D.getDerivedStateFromError!="function"?null:Q.render();return C.flags|=1,m!==null&&tt?(C.child=ks(C,m.child,null,ge),C.child=ks(C,null,Ot,ge)):Nl(m,C,Ot,ge),C.memoizedState=Q.state,le&&Xd(C,D,!0),C.child}function Sp(m){var C=m.stateNode;C.pendingContext?nf(m,C.pendingContext,C.pendingContext!==C.context):C.context&&nf(m,C.context,!1),Te(m,C.containerInfo)}function dc(m,C,D,Q,le){return al(),Hu(le),C.flags|=256,Nl(m,C,D,Q),C.child}var df={dehydrated:null,treeContext:null,retryLane:0};function hf(m){return{baseLanes:m,cachePool:null,transitions:null}}function ff(m,C,D){var Q=C.pendingProps,le=ut.current,ge=!1,tt=(C.flags&128)!==0,Ot;if((Ot=tt)||(Ot=m!==null&&m.memoizedState===null?!1:(le&2)!==0),Ot?(ge=!0,C.flags&=-129):(m===null||m.memoizedState!==null)&&(le|=1),bs(ut,le&1),m===null)return vl(C),m=C.memoizedState,m!==null&&(m=m.dehydrated,m!==null)?((C.mode&1)===0?C.lanes=1:m.data==="$!"?C.lanes=8:C.lanes=1073741824,null):(tt=Q.children,m=Q.fallback,ge?(Q=C.mode,ge=C.child,tt={mode:"hidden",children:tt},(Q&1)===0&&ge!==null?(ge.childLanes=0,ge.pendingProps=tt):ge=e0(tt,Q,0,null),m=$f(m,Q,D,null),ge.return=C,m.return=C,ge.sibling=m,C.child=ge,C.child.memoizedState=hf(D),C.memoizedState=df,m):kh(C,tt));if(le=m.memoizedState,le!==null&&(Ot=le.dehydrated,Ot!==null))return wi(m,C,tt,Q,Ot,le,D);if(ge){ge=Q.fallback,tt=C.mode,le=m.child,Ot=le.sibling;var Wt={mode:"hidden",children:Q.children};return(tt&1)===0&&C.child!==le?(Q=C.child,Q.childLanes=0,Q.pendingProps=Wt,C.deletions=null):(Q=hc(le,Wt),Q.subtreeFlags=le.subtreeFlags&14680064),Ot!==null?ge=hc(Ot,ge):(ge=$f(ge,tt,D,null),ge.flags|=2),ge.return=C,Q.return=C,Q.sibling=ge,C.child=Q,Q=ge,ge=C.child,tt=m.child.memoizedState,tt=tt===null?hf(D):{baseLanes:tt.baseLanes|D,cachePool:null,transitions:tt.transitions},ge.memoizedState=tt,ge.childLanes=m.childLanes&~D,C.memoizedState=df,Q}return ge=m.child,m=ge.sibling,Q=hc(ge,{mode:"visible",children:Q.children}),(C.mode&1)===0&&(Q.lanes=D),Q.return=C,Q.sibling=null,m!==null&&(D=C.deletions,D===null?(C.deletions=[m],C.flags|=16):D.push(m)),C.child=Q,C.memoizedState=null,Q}function kh(m,C){return C=e0({mode:"visible",children:C},m.mode,0,null),C.return=m,m.child=C}function Tc(m,C,D,Q){return Q!==null&&Hu(Q),ks(C,m.child,null,D),m=kh(C,C.pendingProps.children),m.flags|=2,C.memoizedState=null,m}function wi(m,C,D,Q,le,ge,tt){if(D)return C.flags&256?(C.flags&=-257,Q=wp(Error(t(422))),Tc(m,C,tt,Q)):C.memoizedState!==null?(C.child=m.child,C.flags|=128,null):(ge=Q.fallback,le=C.mode,Q=e0({mode:"visible",children:Q.children},le,0,null),ge=$f(ge,le,tt,null),ge.flags|=2,Q.return=C,ge.return=C,Q.sibling=ge,C.child=Q,(C.mode&1)!==0&&ks(C,m.child,null,tt),C.child.memoizedState=hf(tt),C.memoizedState=df,ge);if((C.mode&1)===0)return Tc(m,C,tt,null);if(le.data==="$!"){if(Q=le.nextSibling&&le.nextSibling.dataset,Q)var Ot=Q.dgst;return Q=Ot,ge=Error(t(419)),Q=wp(ge,Q,void 0),Tc(m,C,tt,Q)}if(Ot=(tt&m.childLanes)!==0,El||Ot){if(Q=ls,Q!==null){switch(tt&-tt){case 4:le=2;break;case 16:le=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:le=32;break;case 536870912:le=268435456;break;default:le=0}le=(le&(Q.suspendedLanes|tt))!==0?0:le,le!==0&&le!==ge.retryLane&&(ge.retryLane=le,fA(m,le),nd(Q,m,le,-1))}return Hm(),Q=wp(Error(t(421))),Tc(m,C,tt,Q)}return le.data==="$?"?(C.flags|=128,C.child=m.child,C=i1.bind(null,m),le._reactRetry=C,null):(m=ge.treeContext,Da=nu(le.nextSibling),da=C,Eo=!0,ru=null,m!==null&&(Ma[Ra++]=ol,Ma[Ra++]=Uo,Ma[Ra++]=Bc,ol=m.id,Uo=m.overflow,Bc=C),C=kh(C,Q.children),C.flags|=4096,C)}function Th(m,C,D){m.lanes|=C;var Q=m.alternate;Q!==null&&(Q.lanes|=C),Qs(m.return,C,D)}function bo(m,C,D,Q,le){var ge=m.memoizedState;ge===null?m.memoizedState={isBackwards:C,rendering:null,renderingStartTime:0,last:Q,tail:D,tailMode:le}:(ge.isBackwards=C,ge.rendering=null,ge.renderingStartTime=0,ge.last=Q,ge.tail=D,ge.tailMode=le)}function UA(m,C,D){var Q=C.pendingProps,le=Q.revealOrder,ge=Q.tail;if(Nl(m,C,Q.children,D),Q=ut.current,(Q&2)!==0)Q=Q&1|2,C.flags|=128;else{if(m!==null&&(m.flags&128)!==0)e:for(m=C.child;m!==null;){if(m.tag===13)m.memoizedState!==null&&Th(m,D,C);else if(m.tag===19)Th(m,D,C);else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===C)break e;for(;m.sibling===null;){if(m.return===null||m.return===C)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}Q&=1}if(bs(ut,Q),(C.mode&1)===0)C.memoizedState=null;else switch(le){case"forwards":for(D=C.child,le=null;D!==null;)m=D.alternate,m!==null&&ft(m)===null&&(le=D),D=D.sibling;D=le,D===null?(le=C.child,C.child=null):(le=D.sibling,D.sibling=null),bo(C,!1,le,D,ge);break;case"backwards":for(D=null,le=C.child,C.child=null;le!==null;){if(m=le.alternate,m!==null&&ft(m)===null){C.child=le;break}m=le.sibling,le.sibling=D,D=le,le=m}bo(C,!0,D,null,ge);break;case"together":bo(C,!1,null,null,void 0);break;default:C.memoizedState=null}return C.child}function Ep(m,C){(C.mode&1)===0&&m!==null&&(m.alternate=null,C.alternate=null,C.flags|=2)}function Eu(m,C,D){if(m!==null&&(C.dependencies=m.dependencies),Ou|=C.lanes,(D&C.childLanes)===0)return null;if(m!==null&&C.child!==m.child)throw Error(t(153));if(C.child!==null){for(m=C.child,D=hc(m,m.pendingProps),C.child=D,D.return=C;m.sibling!==null;)m=m.sibling,D=D.sibling=hc(m,m.pendingProps),D.return=C;D.sibling=null}return C.child}function Ym(m,C,D){switch(C.tag){case 3:Sp(C),al();break;case 5:Xe(C);break;case 1:xa(C.type)&&yl(C);break;case 4:Te(C,C.stateNode.containerInfo);break;case 10:var Q=C.type._context,le=C.memoizedProps.value;bs(bu,Q._currentValue),Q._currentValue=le;break;case 13:if(Q=C.memoizedState,Q!==null)return Q.dehydrated!==null?(bs(ut,ut.current&1),C.flags|=128,null):(D&C.child.childLanes)!==0?ff(m,C,D):(bs(ut,ut.current&1),m=Eu(m,C,D),m!==null?m.sibling:null);bs(ut,ut.current&1);break;case 19:if(Q=(D&C.childLanes)!==0,(m.flags&128)!==0){if(Q)return UA(m,C,D);C.flags|=128}if(le=C.memoizedState,le!==null&&(le.rendering=null,le.tail=null,le.lastEffect=null),bs(ut,ut.current),Q)break;return null;case 22:case 23:return C.lanes=0,Wf(m,C,D)}return Eu(m,C,D)}var bl,Am,Ea,cm;bl=function(m,C){for(var D=C.child;D!==null;){if(D.tag===5||D.tag===6)m.appendChild(D.stateNode);else if(D.tag!==4&&D.child!==null){D.child.return=D,D=D.child;continue}if(D===C)break;for(;D.sibling===null;){if(D.return===null||D.return===C)return;D=D.return}D.sibling.return=D.return,D=D.sibling}},Am=function(){},Ea=function(m,C,D,Q){var le=m.memoizedProps;if(le!==Q){m=C.stateNode,ke(te.current);var ge=null;switch(D){case"input":le=Lt(m,le),Q=Lt(m,Q),ge=[];break;case"select":le=we({},le,{value:void 0}),Q=we({},Q,{value:void 0}),ge=[];break;case"textarea":le=pn(m,le),Q=pn(m,Q),ge=[];break;default:typeof le.onClick!="function"&&typeof Q.onClick=="function"&&(m.onclick=oc)}J(D,Q);var tt;D=null;for(wn in le)if(!Q.hasOwnProperty(wn)&&le.hasOwnProperty(wn)&&le[wn]!=null)if(wn==="style"){var Ot=le[wn];for(tt in Ot)Ot.hasOwnProperty(tt)&&(D||(D={}),D[tt]="")}else wn!=="dangerouslySetInnerHTML"&&wn!=="children"&&wn!=="suppressContentEditableWarning"&&wn!=="suppressHydrationWarning"&&wn!=="autoFocus"&&(i.hasOwnProperty(wn)?ge||(ge=[]):(ge=ge||[]).push(wn,null));for(wn in Q){var Wt=Q[wn];if(Ot=le!=null?le[wn]:void 0,Q.hasOwnProperty(wn)&&Wt!==Ot&&(Wt!=null||Ot!=null))if(wn==="style")if(Ot){for(tt in Ot)!Ot.hasOwnProperty(tt)||Wt&&Wt.hasOwnProperty(tt)||(D||(D={}),D[tt]="");for(tt in Wt)Wt.hasOwnProperty(tt)&&Ot[tt]!==Wt[tt]&&(D||(D={}),D[tt]=Wt[tt])}else D||(ge||(ge=[]),ge.push(wn,D)),D=Wt;else wn==="dangerouslySetInnerHTML"?(Wt=Wt?Wt.__html:void 0,Ot=Ot?Ot.__html:void 0,Wt!=null&&Ot!==Wt&&(ge=ge||[]).push(wn,Wt)):wn==="children"?typeof Wt!="string"&&typeof Wt!="number"||(ge=ge||[]).push(wn,""+Wt):wn!=="suppressContentEditableWarning"&&wn!=="suppressHydrationWarning"&&(i.hasOwnProperty(wn)?(Wt!=null&&wn==="onScroll"&&cs("scroll",m),ge||Ot===Wt||(ge=[])):(ge=ge||[]).push(wn,Wt))}D&&(ge=ge||[]).push("style",D);var wn=ge;(C.updateQueue=wn)&&(C.flags|=4)}},cm=function(m,C,D,Q){D!==Q&&(C.flags|=4)};function Ph(m,C){if(!Eo)switch(m.tailMode){case"hidden":C=m.tail;for(var D=null;C!==null;)C.alternate!==null&&(D=C),C=C.sibling;D===null?m.tail=null:D.sibling=null;break;case"collapsed":D=m.tail;for(var Q=null;D!==null;)D.alternate!==null&&(Q=D),D=D.sibling;Q===null?C||m.tail===null?m.tail=null:m.tail.sibling=null:Q.sibling=null}}function uu(m){var C=m.alternate!==null&&m.alternate.child===m.child,D=0,Q=0;if(C)for(var le=m.child;le!==null;)D|=le.lanes|le.childLanes,Q|=le.subtreeFlags&14680064,Q|=le.flags&14680064,le.return=m,le=le.sibling;else for(le=m.child;le!==null;)D|=le.lanes|le.childLanes,Q|=le.subtreeFlags,Q|=le.flags,le.return=m,le=le.sibling;return m.subtreeFlags|=Q,m.childLanes=D,C}function Gf(m,C,D){var Q=C.pendingProps;switch(uc(C),C.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return uu(C),null;case 1:return xa(C.type)&&Zc(),uu(C),null;case 3:return Q=C.stateNode,$e(),Us(il),Us(ba),Et(),Q.pendingContext&&(Q.context=Q.pendingContext,Q.pendingContext=null),(m===null||m.child===null)&&(sl(C)?C.flags|=4:m===null||m.memoizedState.isDehydrated&&(C.flags&256)===0||(C.flags|=1024,ru!==null&&(Bp(ru),ru=null))),Am(m,C),uu(C),null;case 5:mt(C);var le=ke(be.current);if(D=C.type,m!==null&&C.stateNode!=null)Ea(m,C,D,Q,le),m.ref!==C.ref&&(C.flags|=512,C.flags|=2097152);else{if(!Q){if(C.stateNode===null)throw Error(t(166));return uu(C),null}if(m=ke(te.current),sl(C)){Q=C.stateNode,D=C.type;var ge=C.memoizedProps;switch(Q[kA]=C,Q[wc]=ge,m=(C.mode&1)!==0,D){case"dialog":cs("cancel",Q),cs("close",Q);break;case"iframe":case"object":case"embed":cs("load",Q);break;case"video":case"audio":for(le=0;le<gu.length;le++)cs(gu[le],Q);break;case"source":cs("error",Q);break;case"img":case"image":case"link":cs("error",Q),cs("load",Q);break;case"details":cs("toggle",Q);break;case"input":nn(Q,ge),cs("invalid",Q);break;case"select":Q._wrapperState={wasMultiple:!!ge.multiple},cs("invalid",Q);break;case"textarea":$n(Q,ge),cs("invalid",Q)}J(D,ge),le=null;for(var tt in ge)if(ge.hasOwnProperty(tt)){var Ot=ge[tt];tt==="children"?typeof Ot=="string"?Q.textContent!==Ot&&(ge.suppressHydrationWarning!==!0&&Vc(Q.textContent,Ot,m),le=["children",Ot]):typeof Ot=="number"&&Q.textContent!==""+Ot&&(ge.suppressHydrationWarning!==!0&&Vc(Q.textContent,Ot,m),le=["children",""+Ot]):i.hasOwnProperty(tt)&&Ot!=null&&tt==="onScroll"&&cs("scroll",Q)}switch(D){case"input":it(Q),Gn(Q,ge,!0);break;case"textarea":it(Q),vr(Q);break;case"select":case"option":break;default:typeof ge.onClick=="function"&&(Q.onclick=oc)}Q=le,C.updateQueue=Q,Q!==null&&(C.flags|=4)}else{tt=le.nodeType===9?le:le.ownerDocument,m==="http://www.w3.org/1999/xhtml"&&(m=Zn(D)),m==="http://www.w3.org/1999/xhtml"?D==="script"?(m=tt.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild)):typeof Q.is=="string"?m=tt.createElement(D,{is:Q.is}):(m=tt.createElement(D),D==="select"&&(tt=m,Q.multiple?tt.multiple=!0:Q.size&&(tt.size=Q.size))):m=tt.createElementNS(m,D),m[kA]=C,m[wc]=Q,bl(m,C,!1,!1),C.stateNode=m;e:{switch(tt=ve(D,Q),D){case"dialog":cs("cancel",m),cs("close",m),le=Q;break;case"iframe":case"object":case"embed":cs("load",m),le=Q;break;case"video":case"audio":for(le=0;le<gu.length;le++)cs(gu[le],m);le=Q;break;case"source":cs("error",m),le=Q;break;case"img":case"image":case"link":cs("error",m),cs("load",m),le=Q;break;case"details":cs("toggle",m),le=Q;break;case"input":nn(m,Q),le=Lt(m,Q),cs("invalid",m);break;case"option":le=Q;break;case"select":m._wrapperState={wasMultiple:!!Q.multiple},le=we({},Q,{value:void 0}),cs("invalid",m);break;case"textarea":$n(m,Q),le=pn(m,Q),cs("invalid",m);break;default:le=Q}J(D,le),Ot=le;for(ge in Ot)if(Ot.hasOwnProperty(ge)){var Wt=Ot[ge];ge==="style"?Hn(m,Wt):ge==="dangerouslySetInnerHTML"?(Wt=Wt?Wt.__html:void 0,Wt!=null&&pe(m,Wt)):ge==="children"?typeof Wt=="string"?(D!=="textarea"||Wt!=="")&&nt(m,Wt):typeof Wt=="number"&&nt(m,""+Wt):ge!=="suppressContentEditableWarning"&&ge!=="suppressHydrationWarning"&&ge!=="autoFocus"&&(i.hasOwnProperty(ge)?Wt!=null&&ge==="onScroll"&&cs("scroll",m):Wt!=null&&se(m,ge,Wt,tt))}switch(D){case"input":it(m),Gn(m,Q,!1);break;case"textarea":it(m),vr(m);break;case"option":Q.value!=null&&m.setAttribute("value",""+Ue(Q.value));break;case"select":m.multiple=!!Q.multiple,ge=Q.value,ge!=null?Pn(m,!!Q.multiple,ge,!1):Q.defaultValue!=null&&Pn(m,!!Q.multiple,Q.defaultValue,!0);break;default:typeof le.onClick=="function"&&(m.onclick=oc)}switch(D){case"button":case"input":case"select":case"textarea":Q=!!Q.autoFocus;break e;case"img":Q=!0;break e;default:Q=!1}}Q&&(C.flags|=4)}C.ref!==null&&(C.flags|=512,C.flags|=2097152)}return uu(C),null;case 6:if(m&&C.stateNode!=null)cm(m,C,m.memoizedProps,Q);else{if(typeof Q!="string"&&C.stateNode===null)throw Error(t(166));if(D=ke(be.current),ke(te.current),sl(C)){if(Q=C.stateNode,D=C.memoizedProps,Q[kA]=C,(ge=Q.nodeValue!==D)&&(m=da,m!==null))switch(m.tag){case 3:Vc(Q.nodeValue,D,(m.mode&1)!==0);break;case 5:m.memoizedProps.suppressHydrationWarning!==!0&&Vc(Q.nodeValue,D,(m.mode&1)!==0)}ge&&(C.flags|=4)}else Q=(D.nodeType===9?D:D.ownerDocument).createTextNode(Q),Q[kA]=C,C.stateNode=Q}return uu(C),null;case 13:if(Us(ut),Q=C.memoizedState,m===null||m.memoizedState!==null&&m.memoizedState.dehydrated!==null){if(Eo&&Da!==null&&(C.mode&1)!==0&&(C.flags&128)===0)of(),al(),C.flags|=98560,ge=!1;else if(ge=sl(C),Q!==null&&Q.dehydrated!==null){if(m===null){if(!ge)throw Error(t(318));if(ge=C.memoizedState,ge=ge!==null?ge.dehydrated:null,!ge)throw Error(t(317));ge[kA]=C}else al(),(C.flags&128)===0&&(C.memoizedState=null),C.flags|=4;uu(C),ge=!1}else ru!==null&&(Bp(ru),ru=null),ge=!0;if(!ge)return C.flags&65536?C:null}return(C.flags&128)!==0?(C.lanes=D,C):(Q=Q!==null,Q!==(m!==null&&m.memoizedState!==null)&&Q&&(C.child.flags|=8192,(C.mode&1)!==0&&(m===null||(ut.current&1)!==0?Ko===0&&(Ko=3):Hm())),C.updateQueue!==null&&(C.flags|=4),uu(C),null);case 4:return $e(),Am(m,C),m===null&&yu(C.stateNode.containerInfo),uu(C),null;case 10:return ha(C.type._context),uu(C),null;case 17:return xa(C.type)&&Zc(),uu(C),null;case 19:if(Us(ut),ge=C.memoizedState,ge===null)return uu(C),null;if(Q=(C.flags&128)!==0,tt=ge.rendering,tt===null)if(Q)Ph(ge,!1);else{if(Ko!==0||m!==null&&(m.flags&128)!==0)for(m=C.child;m!==null;){if(tt=ft(m),tt!==null){for(C.flags|=128,Ph(ge,!1),Q=tt.updateQueue,Q!==null&&(C.updateQueue=Q,C.flags|=4),C.subtreeFlags=0,Q=D,D=C.child;D!==null;)ge=D,m=Q,ge.flags&=14680066,tt=ge.alternate,tt===null?(ge.childLanes=0,ge.lanes=m,ge.child=null,ge.subtreeFlags=0,ge.memoizedProps=null,ge.memoizedState=null,ge.updateQueue=null,ge.dependencies=null,ge.stateNode=null):(ge.childLanes=tt.childLanes,ge.lanes=tt.lanes,ge.child=tt.child,ge.subtreeFlags=0,ge.deletions=null,ge.memoizedProps=tt.memoizedProps,ge.memoizedState=tt.memoizedState,ge.updateQueue=tt.updateQueue,ge.type=tt.type,m=tt.dependencies,ge.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext}),D=D.sibling;return bs(ut,ut.current&1|2),C.child}m=m.sibling}ge.tail!==null&&Yi()>pf&&(C.flags|=128,Q=!0,Ph(ge,!1),C.lanes=4194304)}else{if(!Q)if(m=ft(tt),m!==null){if(C.flags|=128,Q=!0,D=m.updateQueue,D!==null&&(C.updateQueue=D,C.flags|=4),Ph(ge,!0),ge.tail===null&&ge.tailMode==="hidden"&&!tt.alternate&&!Eo)return uu(C),null}else 2*Yi()-ge.renderingStartTime>pf&&D!==1073741824&&(C.flags|=128,Q=!0,Ph(ge,!1),C.lanes=4194304);ge.isBackwards?(tt.sibling=C.child,C.child=tt):(D=ge.last,D!==null?D.sibling=tt:C.child=tt,ge.last=tt)}return ge.tail!==null?(C=ge.tail,ge.rendering=C,ge.tail=C.sibling,ge.renderingStartTime=Yi(),C.sibling=null,D=ut.current,bs(ut,Q?D&1|2:D&1),C):(uu(C),null);case 22:case 23:return $m(),Q=C.memoizedState!==null,m!==null&&m.memoizedState!==null!==Q&&(C.flags|=8192),Q&&(C.mode&1)!==0?(xs&1073741824)!==0&&(uu(C),C.subtreeFlags&6&&(C.flags|=8192)):uu(C),null;case 24:return null;case 25:return null}throw Error(t(156,C.tag))}function A(m,C){switch(uc(C),C.tag){case 1:return xa(C.type)&&Zc(),m=C.flags,m&65536?(C.flags=m&-65537|128,C):null;case 3:return $e(),Us(il),Us(ba),Et(),m=C.flags,(m&65536)!==0&&(m&128)===0?(C.flags=m&-65537|128,C):null;case 5:return mt(C),null;case 13:if(Us(ut),m=C.memoizedState,m!==null&&m.dehydrated!==null){if(C.alternate===null)throw Error(t(340));al()}return m=C.flags,m&65536?(C.flags=m&-65537|128,C):null;case 19:return Us(ut),null;case 4:return $e(),null;case 10:return ha(C.type._context),null;case 22:case 23:return $m(),null;case 24:return null;default:return null}}var g=!1,S=!1,E=typeof WeakSet=="function"?WeakSet:Set,R=null;function Z(m,C){var D=m.ref;if(D!==null)if(typeof D=="function")try{D(null)}catch(Q){ul(m,C,Q)}else D.current=null}function Ae(m,C,D){try{D()}catch(Q){ul(m,C,Q)}}var Ce=!1;function Ie(m,C){if(bd=Oe,m=Jo(),JA(m)){if("selectionStart"in m)var D={start:m.selectionStart,end:m.selectionEnd};else e:{D=(D=m.ownerDocument)&&D.defaultView||window;var Q=D.getSelection&&D.getSelection();if(Q&&Q.rangeCount!==0){D=Q.anchorNode;var le=Q.anchorOffset,ge=Q.focusNode;Q=Q.focusOffset;try{D.nodeType,ge.nodeType}catch{D=null;break e}var tt=0,Ot=-1,Wt=-1,wn=0,ir=0,mr=m,or=null;t:for(;;){for(var Vr;mr!==D||le!==0&&mr.nodeType!==3||(Ot=tt+le),mr!==ge||Q!==0&&mr.nodeType!==3||(Wt=tt+Q),mr.nodeType===3&&(tt+=mr.nodeValue.length),(Vr=mr.firstChild)!==null;)or=mr,mr=Vr;for(;;){if(mr===m)break t;if(or===D&&++wn===le&&(Ot=tt),or===ge&&++ir===Q&&(Wt=tt),(Vr=mr.nextSibling)!==null)break;mr=or,or=mr.parentNode}mr=Vr}D=Ot===-1||Wt===-1?null:{start:Ot,end:Wt}}else D=null}D=D||{start:0,end:0}}else D=null;for(nl={focusedElem:m,selectionRange:D},Oe=!1,R=C;R!==null;)if(C=R,m=C.child,(C.subtreeFlags&1028)!==0&&m!==null)m.return=C,R=m;else for(;R!==null;){C=R;try{var ai=C.alternate;if((C.flags&1024)!==0)switch(C.tag){case 0:case 11:case 15:break;case 1:if(ai!==null){var ui=ai.memoizedProps,xl=ai.memoizedState,hn=C.stateNode,en=hn.getSnapshotBeforeUpdate(C.elementType===C.type?ui:ll(C.type,ui),xl);hn.__reactInternalSnapshotBeforeUpdate=en}break;case 3:var yn=C.stateNode.containerInfo;yn.nodeType===1?yn.textContent="":yn.nodeType===9&&yn.documentElement&&yn.removeChild(yn.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Cr){ul(C,C.return,Cr)}if(m=C.sibling,m!==null){m.return=C.return,R=m;break}R=C.return}return ai=Ce,Ce=!1,ai}function je(m,C,D){var Q=C.updateQueue;if(Q=Q!==null?Q.lastEffect:null,Q!==null){var le=Q=Q.next;do{if((le.tag&m)===m){var ge=le.destroy;le.destroy=void 0,ge!==void 0&&Ae(C,D,ge)}le=le.next}while(le!==Q)}}function gt(m,C){if(C=C.updateQueue,C=C!==null?C.lastEffect:null,C!==null){var D=C=C.next;do{if((D.tag&m)===m){var Q=D.create;D.destroy=Q()}D=D.next}while(D!==C)}}function Mt(m){var C=m.ref;if(C!==null){var D=m.stateNode;switch(m.tag){case 5:m=D;break;default:m=D}typeof C=="function"?C(m):C.current=m}}function Xt(m){var C=m.alternate;C!==null&&(m.alternate=null,Xt(C)),m.child=null,m.deletions=null,m.sibling=null,m.tag===5&&(C=m.stateNode,C!==null&&(delete C[kA],delete C[wc],delete C[Sh],delete C[ot],delete C[Vu])),m.stateNode=null,m.return=null,m.dependencies=null,m.memoizedProps=null,m.memoizedState=null,m.pendingProps=null,m.stateNode=null,m.updateQueue=null}function Qt(m){return m.tag===5||m.tag===3||m.tag===4}function xn(m){e:for(;;){for(;m.sibling===null;){if(m.return===null||Qt(m.return))return null;m=m.return}for(m.sibling.return=m.return,m=m.sibling;m.tag!==5&&m.tag!==6&&m.tag!==18;){if(m.flags&2||m.child===null||m.tag===4)continue e;m.child.return=m,m=m.child}if(!(m.flags&2))return m.stateNode}}function Fn(m,C,D){var Q=m.tag;if(Q===5||Q===6)m=m.stateNode,C?D.nodeType===8?D.parentNode.insertBefore(m,C):D.insertBefore(m,C):(D.nodeType===8?(C=D.parentNode,C.insertBefore(m,D)):(C=D,C.appendChild(m)),D=D._reactRootContainer,D!=null||C.onclick!==null||(C.onclick=oc));else if(Q!==4&&(m=m.child,m!==null))for(Fn(m,C,D),m=m.sibling;m!==null;)Fn(m,C,D),m=m.sibling}function Ar(m,C,D){var Q=m.tag;if(Q===5||Q===6)m=m.stateNode,C?D.insertBefore(m,C):D.appendChild(m);else if(Q!==4&&(m=m.child,m!==null))for(Ar(m,C,D),m=m.sibling;m!==null;)Ar(m,C,D),m=m.sibling}var tr=null,gr=!1;function yr(m,C,D){for(D=D.child;D!==null;)Rr(m,C,D),D=D.sibling}function Rr(m,C,D){if(Ye&&typeof Ye.onCommitFiberUnmount=="function")try{Ye.onCommitFiberUnmount(Zs,D)}catch{}switch(D.tag){case 5:S||Z(D,C);case 6:var Q=tr,le=gr;tr=null,yr(m,C,D),tr=Q,gr=le,tr!==null&&(gr?(m=tr,D=D.stateNode,m.nodeType===8?m.parentNode.removeChild(D):m.removeChild(D)):tr.removeChild(D.stateNode));break;case 18:tr!==null&&(gr?(m=tr,D=D.stateNode,m.nodeType===8?Zd(m.parentNode,D):m.nodeType===1&&Zd(m,D),Ki(m)):Zd(tr,D.stateNode));break;case 4:Q=tr,le=gr,tr=D.stateNode.containerInfo,gr=!0,yr(m,C,D),tr=Q,gr=le;break;case 0:case 11:case 14:case 15:if(!S&&(Q=D.updateQueue,Q!==null&&(Q=Q.lastEffect,Q!==null))){le=Q=Q.next;do{var ge=le,tt=ge.destroy;ge=ge.tag,tt!==void 0&&((ge&2)!==0||(ge&4)!==0)&&Ae(D,C,tt),le=le.next}while(le!==Q)}yr(m,C,D);break;case 1:if(!S&&(Z(D,C),Q=D.stateNode,typeof Q.componentWillUnmount=="function"))try{Q.props=D.memoizedProps,Q.state=D.memoizedState,Q.componentWillUnmount()}catch(Ot){ul(D,C,Ot)}yr(m,C,D);break;case 21:yr(m,C,D);break;case 22:D.mode&1?(S=(Q=S)||D.memoizedState!==null,yr(m,C,D),S=Q):yr(m,C,D);break;default:yr(m,C,D)}}function ti(m){var C=m.updateQueue;if(C!==null){m.updateQueue=null;var D=m.stateNode;D===null&&(D=m.stateNode=new E),C.forEach(function(Q){var le=WA.bind(null,m,Q);D.has(Q)||(D.add(Q),Q.then(le,le))})}}function jr(m,C){var D=C.deletions;if(D!==null)for(var Q=0;Q<D.length;Q++){var le=D[Q];try{var ge=m,tt=C,Ot=tt;e:for(;Ot!==null;){switch(Ot.tag){case 5:tr=Ot.stateNode,gr=!1;break e;case 3:tr=Ot.stateNode.containerInfo,gr=!0;break e;case 4:tr=Ot.stateNode.containerInfo,gr=!0;break e}Ot=Ot.return}if(tr===null)throw Error(t(160));Rr(ge,tt,le),tr=null,gr=!1;var Wt=le.alternate;Wt!==null&&(Wt.return=null),le.return=null}catch(wn){ul(le,C,wn)}}if(C.subtreeFlags&12854)for(C=C.child;C!==null;)Ji(C,m),C=C.sibling}function Ji(m,C){var D=m.alternate,Q=m.flags;switch(m.tag){case 0:case 11:case 14:case 15:if(jr(C,m),Bo(m),Q&4){try{je(3,m,m.return),gt(3,m)}catch(ui){ul(m,m.return,ui)}try{je(5,m,m.return)}catch(ui){ul(m,m.return,ui)}}break;case 1:jr(C,m),Bo(m),Q&512&&D!==null&&Z(D,D.return);break;case 5:if(jr(C,m),Bo(m),Q&512&&D!==null&&Z(D,D.return),m.flags&32){var le=m.stateNode;try{nt(le,"")}catch(ui){ul(m,m.return,ui)}}if(Q&4&&(le=m.stateNode,le!=null)){var ge=m.memoizedProps,tt=D!==null?D.memoizedProps:ge,Ot=m.type,Wt=m.updateQueue;if(m.updateQueue=null,Wt!==null)try{Ot==="input"&&ge.type==="radio"&&ge.name!=null&&Kt(le,ge),ve(Ot,tt);var wn=ve(Ot,ge);for(tt=0;tt<Wt.length;tt+=2){var ir=Wt[tt],mr=Wt[tt+1];ir==="style"?Hn(le,mr):ir==="dangerouslySetInnerHTML"?pe(le,mr):ir==="children"?nt(le,mr):se(le,ir,mr,wn)}switch(Ot){case"input":vn(le,ge);break;case"textarea":lr(le,ge);break;case"select":var or=le._wrapperState.wasMultiple;le._wrapperState.wasMultiple=!!ge.multiple;var Vr=ge.value;Vr!=null?Pn(le,!!ge.multiple,Vr,!1):or!==!!ge.multiple&&(ge.defaultValue!=null?Pn(le,!!ge.multiple,ge.defaultValue,!0):Pn(le,!!ge.multiple,ge.multiple?[]:"",!1))}le[wc]=ge}catch(ui){ul(m,m.return,ui)}}break;case 6:if(jr(C,m),Bo(m),Q&4){if(m.stateNode===null)throw Error(t(162));le=m.stateNode,ge=m.memoizedProps;try{le.nodeValue=ge}catch(ui){ul(m,m.return,ui)}}break;case 3:if(jr(C,m),Bo(m),Q&4&&D!==null&&D.memoizedState.isDehydrated)try{Ki(C.containerInfo)}catch(ui){ul(m,m.return,ui)}break;case 4:jr(C,m),Bo(m);break;case 13:jr(C,m),Bo(m),le=m.child,le.flags&8192&&(ge=le.memoizedState!==null,le.stateNode.isHidden=ge,!ge||le.alternate!==null&&le.alternate.memoizedState!==null||(Qf=Yi())),Q&4&&ti(m);break;case 22:if(ir=D!==null&&D.memoizedState!==null,m.mode&1?(S=(wn=S)||ir,jr(C,m),S=wn):jr(C,m),Bo(m),Q&8192){if(wn=m.memoizedState!==null,(m.stateNode.isHidden=wn)&&!ir&&(m.mode&1)!==0)for(R=m,ir=m.child;ir!==null;){for(mr=R=ir;R!==null;){switch(or=R,Vr=or.child,or.tag){case 0:case 11:case 14:case 15:je(4,or,or.return);break;case 1:Z(or,or.return);var ai=or.stateNode;if(typeof ai.componentWillUnmount=="function"){Q=or,D=or.return;try{C=Q,ai.props=C.memoizedProps,ai.state=C.memoizedState,ai.componentWillUnmount()}catch(ui){ul(Q,D,ui)}}break;case 5:Z(or,or.return);break;case 22:if(or.memoizedState!==null){Wa(mr);continue}}Vr!==null?(Vr.return=or,R=Vr):Wa(mr)}ir=ir.sibling}e:for(ir=null,mr=m;;){if(mr.tag===5){if(ir===null){ir=mr;try{le=mr.stateNode,wn?(ge=le.style,typeof ge.setProperty=="function"?ge.setProperty("display","none","important"):ge.display="none"):(Ot=mr.stateNode,Wt=mr.memoizedProps.style,tt=Wt!=null&&Wt.hasOwnProperty("display")?Wt.display:null,Ot.style.display=sn("display",tt))}catch(ui){ul(m,m.return,ui)}}}else if(mr.tag===6){if(ir===null)try{mr.stateNode.nodeValue=wn?"":mr.memoizedProps}catch(ui){ul(m,m.return,ui)}}else if((mr.tag!==22&&mr.tag!==23||mr.memoizedState===null||mr===m)&&mr.child!==null){mr.child.return=mr,mr=mr.child;continue}if(mr===m)break e;for(;mr.sibling===null;){if(mr.return===null||mr.return===m)break e;ir===mr&&(ir=null),mr=mr.return}ir===mr&&(ir=null),mr.sibling.return=mr.return,mr=mr.sibling}}break;case 19:jr(C,m),Bo(m),Q&4&&ti(m);break;case 21:break;default:jr(C,m),Bo(m)}}function Bo(m){var C=m.flags;if(C&2){try{e:{for(var D=m.return;D!==null;){if(Qt(D)){var Q=D;break e}D=D.return}throw Error(t(160))}switch(Q.tag){case 5:var le=Q.stateNode;Q.flags&32&&(nt(le,""),Q.flags&=-33);var ge=xn(m);Ar(m,ge,le);break;case 3:case 4:var tt=Q.stateNode.containerInfo,Ot=xn(m);Fn(m,Ot,tt);break;default:throw Error(t(161))}}catch(Wt){ul(m,m.return,Wt)}m.flags&=-3}C&4096&&(m.flags&=-4097)}function Na(m,C,D){R=m,na(m)}function na(m,C,D){for(var Q=(m.mode&1)!==0;R!==null;){var le=R,ge=le.child;if(le.tag===22&&Q){var tt=le.memoizedState!==null||g;if(!tt){var Ot=le.alternate,Wt=Ot!==null&&Ot.memoizedState!==null||S;Ot=g;var wn=S;if(g=tt,(S=Wt)&&!wn)for(R=le;R!==null;)tt=R,Wt=tt.child,tt.tag===22&&tt.memoizedState!==null?Ga(le):Wt!==null?(Wt.return=tt,R=Wt):Ga(le);for(;ge!==null;)R=ge,na(ge),ge=ge.sibling;R=le,g=Ot,S=wn}fa(m)}else(le.subtreeFlags&8772)!==0&&ge!==null?(ge.return=le,R=ge):fa(m)}}function fa(m){for(;R!==null;){var C=R;if((C.flags&8772)!==0){var D=C.alternate;try{if((C.flags&8772)!==0)switch(C.tag){case 0:case 11:case 15:S||gt(5,C);break;case 1:var Q=C.stateNode;if(C.flags&4&&!S)if(D===null)Q.componentDidMount();else{var le=C.elementType===C.type?D.memoizedProps:ll(C.type,D.memoizedProps);Q.componentDidUpdate(le,D.memoizedState,Q.__reactInternalSnapshotBeforeUpdate)}var ge=C.updateQueue;ge!==null&&z(C,ge,Q);break;case 3:var tt=C.updateQueue;if(tt!==null){if(D=null,C.child!==null)switch(C.child.tag){case 5:D=C.child.stateNode;break;case 1:D=C.child.stateNode}z(C,tt,D)}break;case 5:var Ot=C.stateNode;if(D===null&&C.flags&4){D=Ot;var Wt=C.memoizedProps;switch(C.type){case"button":case"input":case"select":case"textarea":Wt.autoFocus&&D.focus();break;case"img":Wt.src&&(D.src=Wt.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(C.memoizedState===null){var wn=C.alternate;if(wn!==null){var ir=wn.memoizedState;if(ir!==null){var mr=ir.dehydrated;mr!==null&&Ki(mr)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}S||C.flags&512&&Mt(C)}catch(or){ul(C,C.return,or)}}if(C===m){R=null;break}if(D=C.sibling,D!==null){D.return=C.return,R=D;break}R=C.return}}function Wa(m){for(;R!==null;){var C=R;if(C===m){R=null;break}var D=C.sibling;if(D!==null){D.return=C.return,R=D;break}R=C.return}}function Ga(m){for(;R!==null;){var C=R;try{switch(C.tag){case 0:case 11:case 15:var D=C.return;try{gt(4,C)}catch(Wt){ul(C,D,Wt)}break;case 1:var Q=C.stateNode;if(typeof Q.componentDidMount=="function"){var le=C.return;try{Q.componentDidMount()}catch(Wt){ul(C,le,Wt)}}var ge=C.return;try{Mt(C)}catch(Wt){ul(C,ge,Wt)}break;case 5:var tt=C.return;try{Mt(C)}catch(Wt){ul(C,tt,Wt)}}}catch(Wt){ul(C,C.return,Wt)}if(C===m){R=null;break}var Ot=C.sibling;if(Ot!==null){Ot.return=C.return,R=Ot;break}R=C.return}}var Wl=Math.ceil,Qa=re.ReactCurrentDispatcher,pa=re.ReactCurrentOwner,as=re.ReactCurrentBatchConfig,Ci=0,ls=null,ra=null,Ys=0,xs=0,Bu=_a(0),Ko=0,Pc=null,Ou=0,zA=0,CA=0,Ya=null,Ol=null,Qf=0,pf=1/0,nh=null,qm=!1,q0=null,td=null,dm=!1,mf=null,jA=0,hm=0,V0=null,Vm=-1,fm=0;function _A(){return(Ci&6)!==0?Yi():Vm!==-1?Vm:Vm=Yi()}function rh(m){return(m.mode&1)===0?1:(Ci&2)!==0&&Ys!==0?Ys&-Ys:hA.transition!==null?(fm===0&&(fm=Aa()),fm):(m=oi,m!==0||(m=window.event,m=m===void 0?16:di(m.type)),m)}function nd(m,C,D,Q){if(50<hm)throw hm=0,V0=null,Error(t(185));xi(m,D,Q),((Ci&2)===0||m!==ls)&&(m===ls&&((Ci&2)===0&&(zA|=D),Ko===4&&Kh(m,Ys)),NA(m,Q),D===1&&Ci===0&&(C.mode&1)===0&&(pf=Yi()+500,Md&&lc()))}function NA(m,C){var D=m.callbackNode;ii(m,C);var Q=ua(m,m===ls?Ys:0);if(Q===0)D!==null&&Go(D),m.callbackNode=null,m.callbackPriority=0;else if(C=Q&-Q,m.callbackPriority!==C){if(D!=null&&Go(D),C===1)m.tag===0?Sc(Jg.bind(null,m)):$u(Jg.bind(null,m)),xd(function(){(Ci&6)===0&&lc()}),D=null;else{switch(to(Q)){case 1:D=Jl;break;case 4:D=wo;break;case 16:D=wr;break;case 536870912:D=Ss;break;default:D=wr}D=X0(D,pm.bind(null,m))}m.callbackPriority=C,m.callbackNode=D}}function pm(m,C){if(Vm=-1,fm=0,(Ci&6)!==0)throw Error(t(327));var D=m.callbackNode;if(yf()&&m.callbackNode!==D)return null;var Q=ua(m,m===ls?Ys:0);if(Q===0)return null;if((Q&30)!==0||(Q&m.expiredLanes)!==0||C)C=Ip(m,Q);else{C=Q;var le=Ci;Ci|=2;var ge=Op();(ls!==m||Ys!==C)&&(nh=null,pf=Yi()+500,qf(m,C));do try{Il();break}catch(Ot){e1(m,Ot)}while(!0);xu(),Qa.current=ge,Ci=le,ra!==null?C=0:(ls=null,Ys=0,C=Ko)}if(C!==0){if(C===2&&(le=qi(m),le!==0&&(Q=le,C=$0(m,le))),C===1)throw D=Pc,qf(m,0),Kh(m,Q),NA(m,Yi()),D;if(C===6)Kh(m,Q);else{if(le=m.current.alternate,(Q&30)===0&&!Vy(le)&&(C=Ip(m,Q),C===2&&(ge=qi(m),ge!==0&&(Q=ge,C=$0(m,ge))),C===1))throw D=Pc,qf(m,0),Kh(m,Q),NA(m,Yi()),D;switch(m.finishedWork=le,m.finishedLanes=Q,C){case 0:case 1:throw Error(t(345));case 2:gf(m,Ol,nh);break;case 3:if(Kh(m,Q),(Q&130023424)===Q&&(C=Qf+500-Yi(),10<C)){if(ua(m,0)!==0)break;if(le=m.suspendedLanes,(le&Q)!==Q){_A(),m.pingedLanes|=m.suspendedLanes&le;break}m.timeoutHandle=rl(gf.bind(null,m,Ol,nh),C);break}gf(m,Ol,nh);break;case 4:if(Kh(m,Q),(Q&4194240)===Q)break;for(C=m.eventTimes,le=-1;0<Q;){var tt=31-Cn(Q);ge=1<<tt,tt=C[tt],tt>le&&(le=tt),Q&=~ge}if(Q=le,Q=Yi()-Q,Q=(120>Q?120:480>Q?480:1080>Q?1080:1920>Q?1920:3e3>Q?3e3:4320>Q?4320:1960*Wl(Q/1960))-Q,10<Q){m.timeoutHandle=rl(gf.bind(null,m,Ol,nh),Q);break}gf(m,Ol,nh);break;case 5:gf(m,Ol,nh);break;default:throw Error(t(329))}}}return NA(m,Yi()),m.callbackNode===D?pm.bind(null,m):null}function $0(m,C){var D=Ya;return m.current.memoizedState.isDehydrated&&(qf(m,C).flags|=256),m=Ip(m,C),m!==2&&(C=Ol,Ol=D,C!==null&&Bp(C)),m}function Bp(m){Ol===null?Ol=m:Ol.push.apply(Ol,m)}function Vy(m){for(var C=m;;){if(C.flags&16384){var D=C.updateQueue;if(D!==null&&(D=D.stores,D!==null))for(var Q=0;Q<D.length;Q++){var le=D[Q],ge=le.getSnapshot;le=le.value;try{if(!an(ge(),le))return!1}catch{return!1}}}if(D=C.child,C.subtreeFlags&16384&&D!==null)D.return=C,C=D;else{if(C===m)break;for(;C.sibling===null;){if(C.return===null||C.return===m)return!0;C=C.return}C.sibling.return=C.return,C=C.sibling}}return!0}function Kh(m,C){for(C&=~CA,C&=~zA,m.suspendedLanes|=C,m.pingedLanes&=~C,m=m.expirationTimes;0<C;){var D=31-Cn(C),Q=1<<D;m[D]=-1,C&=~Q}}function Jg(m){if((Ci&6)!==0)throw Error(t(327));yf();var C=ua(m,0);if((C&1)===0)return NA(m,Yi()),null;var D=Ip(m,C);if(m.tag!==0&&D===2){var Q=qi(m);Q!==0&&(C=Q,D=$0(m,Q))}if(D===1)throw D=Pc,qf(m,0),Kh(m,C),NA(m,Yi()),D;if(D===6)throw Error(t(345));return m.finishedWork=m.current.alternate,m.finishedLanes=C,gf(m,Ol,nh),NA(m,Yi()),null}function H0(m,C){var D=Ci;Ci|=1;try{return m(C)}finally{Ci=D,Ci===0&&(pf=Yi()+500,Md&&lc())}}function Yf(m){mf!==null&&mf.tag===0&&(Ci&6)===0&&yf();var C=Ci;Ci|=1;var D=as.transition,Q=oi;try{if(as.transition=null,oi=1,m)return m()}finally{oi=Q,as.transition=D,Ci=C,(Ci&6)===0&&lc()}}function $m(){xs=Bu.current,Us(Bu)}function qf(m,C){m.finishedWork=null,m.finishedLanes=0;var D=m.timeoutHandle;if(D!==-1&&(m.timeoutHandle=-1,sc(D)),ra!==null)for(D=ra.return;D!==null;){var Q=D;switch(uc(Q),Q.tag){case 1:Q=Q.type.childContextTypes,Q!=null&&Zc();break;case 3:$e(),Us(il),Us(ba),Et();break;case 5:mt(Q);break;case 4:$e();break;case 13:Us(ut);break;case 19:Us(ut);break;case 10:ha(Q.type._context);break;case 22:case 23:$m()}D=D.return}if(ls=m,ra=m=hc(m.current,null),Ys=xs=C,Ko=0,Pc=null,CA=zA=Ou=0,Ol=Ya=null,RA!==null){for(C=0;C<RA.length;C++)if(D=RA[C],Q=D.interleaved,Q!==null){D.interleaved=null;var le=Q.next,ge=D.pending;if(ge!==null){var tt=ge.next;ge.next=le,Q.next=tt}D.pending=Q}RA=null}return m}function e1(m,C){do{var D=ra;try{if(xu(),kt.current=Jd,Mn){for(var Q=It.memoizedState;Q!==null;){var le=Q.queue;le!==null&&(le.pending=null),Q=Q.next}Mn=!1}if(Ut=0,Zt=rn=It=null,En=!1,bn=0,pa.current=null,D===null||D.return===null){Ko=1,Pc=C,ra=null;break}e:{var ge=m,tt=D.return,Ot=D,Wt=C;if(C=Ys,Ot.flags|=32768,Wt!==null&&typeof Wt=="object"&&typeof Wt.then=="function"){var wn=Wt,ir=Ot,mr=ir.tag;if((ir.mode&1)===0&&(mr===0||mr===11||mr===15)){var or=ir.alternate;or?(ir.updateQueue=or.updateQueue,ir.memoizedState=or.memoizedState,ir.lanes=or.lanes):(ir.updateQueue=null,ir.memoizedState=null)}var Vr=um(tt);if(Vr!==null){Vr.flags&=-257,eh(Vr,tt,Ot,ge,C),Vr.mode&1&&Af(ge,wn,C),C=Vr,Wt=wn;var ai=C.updateQueue;if(ai===null){var ui=new Set;ui.add(Wt),C.updateQueue=ui}else ai.add(Wt);break e}else{if((C&1)===0){Af(ge,wn,C),Hm();break e}Wt=Error(t(426))}}else if(Eo&&Ot.mode&1){var xl=um(tt);if(xl!==null){(xl.flags&65536)===0&&(xl.flags|=256),eh(xl,tt,Ot,ge,C),Hu(LA(Wt,Ot));break e}}ge=Wt=LA(Wt,Ot),Ko!==4&&(Ko=2),Ya===null?Ya=[ge]:Ya.push(ge),ge=tt;do{switch(ge.tag){case 3:ge.flags|=65536,C&=-C,ge.lanes|=C;var hn=ed(ge,Wt,C);M(ge,hn);break e;case 1:Ot=Wt;var en=ge.type,yn=ge.stateNode;if((ge.flags&128)===0&&(typeof en.getDerivedStateFromError=="function"||yn!==null&&typeof yn.componentDidCatch=="function"&&(td===null||!td.has(yn)))){ge.flags|=65536,C&=-C,ge.lanes|=C;var Cr=uf(ge,Ot,C);M(ge,Cr);break e}}ge=ge.return}while(ge!==null)}n1(D)}catch(Xr){C=Xr,ra===D&&D!==null&&(ra=D=D.return);continue}break}while(!0)}function Op(){var m=Qa.current;return Qa.current=Jd,m===null?Jd:m}function Hm(){(Ko===0||Ko===3||Ko===2)&&(Ko=4),ls===null||(Ou&268435455)===0&&(zA&268435455)===0||Kh(ls,Ys)}function Ip(m,C){var D=Ci;Ci|=2;var Q=Op();(ls!==m||Ys!==C)&&(nh=null,qf(m,C));do try{t1();break}catch(le){e1(m,le)}while(!0);if(xu(),Ci=D,Qa.current=Q,ra!==null)throw Error(t(261));return ls=null,Ys=0,Ko}function t1(){for(;ra!==null;)Zm(ra)}function Il(){for(;ra!==null&&!Za();)Zm(ra)}function Zm(m){var C=Jm(m.alternate,m,xs);m.memoizedProps=m.pendingProps,C===null?n1(m):ra=C,pa.current=null}function n1(m){var C=m;do{var D=C.alternate;if(m=C.return,(C.flags&32768)===0){if(D=Gf(D,C,xs),D!==null){ra=D;return}}else{if(D=A(D,C),D!==null){D.flags&=32767,ra=D;return}if(m!==null)m.flags|=32768,m.subtreeFlags=0,m.deletions=null;else{Ko=6,ra=null;return}}if(C=C.sibling,C!==null){ra=C;return}ra=C=m}while(C!==null);Ko===0&&(Ko=5)}function gf(m,C,D){var Q=oi,le=as.transition;try{as.transition=null,oi=1,Z0(m,C,D,Q)}finally{as.transition=le,oi=Q}return null}function Z0(m,C,D,Q){do yf();while(mf!==null);if((Ci&6)!==0)throw Error(t(327));D=m.finishedWork;var le=m.finishedLanes;if(D===null)return null;if(m.finishedWork=null,m.finishedLanes=0,D===m.current)throw Error(t(177));m.callbackNode=null,m.callbackPriority=0;var ge=D.lanes|D.childLanes;if(uA(m,ge),m===ls&&(ra=ls=null,Ys=0),(D.subtreeFlags&2064)===0&&(D.flags&2064)===0||dm||(dm=!0,X0(wr,function(){return yf(),null})),ge=(D.flags&15990)!==0,(D.subtreeFlags&15990)!==0||ge){ge=as.transition,as.transition=null;var tt=oi;oi=1;var Ot=Ci;Ci|=4,pa.current=null,Ie(m,D),Ji(D,m),xh(nl),Oe=!!bd,nl=bd=null,m.current=D,Na(D),Xa(),Ci=Ot,oi=tt,as.transition=ge}else m.current=D;if(dm&&(dm=!1,mf=m,jA=le),ge=m.pendingLanes,ge===0&&(td=null),xt(D.stateNode),NA(m,Yi()),C!==null)for(Q=m.onRecoverableError,D=0;D<C.length;D++)le=C[D],Q(le.value,{componentStack:le.stack,digest:le.digest});if(qm)throw qm=!1,m=q0,q0=null,m;return(jA&1)!==0&&m.tag!==0&&yf(),ge=m.pendingLanes,(ge&1)!==0?m===V0?hm++:(hm=0,V0=m):hm=0,lc(),null}function yf(){if(mf!==null){var m=to(jA),C=as.transition,D=oi;try{if(as.transition=null,oi=16>m?16:m,mf===null)var Q=!1;else{if(m=mf,mf=null,jA=0,(Ci&6)!==0)throw Error(t(331));var le=Ci;for(Ci|=4,R=m.current;R!==null;){var ge=R,tt=ge.child;if((R.flags&16)!==0){var Ot=ge.deletions;if(Ot!==null){for(var Wt=0;Wt<Ot.length;Wt++){var wn=Ot[Wt];for(R=wn;R!==null;){var ir=R;switch(ir.tag){case 0:case 11:case 15:je(8,ir,ge)}var mr=ir.child;if(mr!==null)mr.return=ir,R=mr;else for(;R!==null;){ir=R;var or=ir.sibling,Vr=ir.return;if(Xt(ir),ir===wn){R=null;break}if(or!==null){or.return=Vr,R=or;break}R=Vr}}}var ai=ge.alternate;if(ai!==null){var ui=ai.child;if(ui!==null){ai.child=null;do{var xl=ui.sibling;ui.sibling=null,ui=xl}while(ui!==null)}}R=ge}}if((ge.subtreeFlags&2064)!==0&&tt!==null)tt.return=ge,R=tt;else e:for(;R!==null;){if(ge=R,(ge.flags&2048)!==0)switch(ge.tag){case 0:case 11:case 15:je(9,ge,ge.return)}var hn=ge.sibling;if(hn!==null){hn.return=ge.return,R=hn;break e}R=ge.return}}var en=m.current;for(R=en;R!==null;){tt=R;var yn=tt.child;if((tt.subtreeFlags&2064)!==0&&yn!==null)yn.return=tt,R=yn;else e:for(tt=en;R!==null;){if(Ot=R,(Ot.flags&2048)!==0)try{switch(Ot.tag){case 0:case 11:case 15:gt(9,Ot)}}catch(Xr){ul(Ot,Ot.return,Xr)}if(Ot===tt){R=null;break e}var Cr=Ot.sibling;if(Cr!==null){Cr.return=Ot.return,R=Cr;break e}R=Ot.return}}if(Ci=le,lc(),Ye&&typeof Ye.onPostCommitFiberRoot=="function")try{Ye.onPostCommitFiberRoot(Zs,m)}catch{}Q=!0}return Q}finally{oi=D,as.transition=C}}return!1}function Xm(m,C,D){C=LA(D,C),C=ed(m,C,1),m=c(m,C,1),C=_A(),m!==null&&(xi(m,1,C),NA(m,C))}function ul(m,C,D){if(m.tag===3)Xm(m,m,D);else for(;C!==null;){if(C.tag===3){Xm(C,m,D);break}else if(C.tag===1){var Q=C.stateNode;if(typeof C.type.getDerivedStateFromError=="function"||typeof Q.componentDidCatch=="function"&&(td===null||!td.has(Q))){m=LA(D,m),m=uf(C,m,1),C=c(C,m,1),m=_A(),C!==null&&(xi(C,1,m),NA(C,m));break}}C=C.return}}function $y(m,C,D){var Q=m.pingCache;Q!==null&&Q.delete(C),C=_A(),m.pingedLanes|=m.suspendedLanes&D,ls===m&&(Ys&D)===D&&(Ko===4||Ko===3&&(Ys&130023424)===Ys&&500>Yi()-Qf?qf(m,0):CA|=D),NA(m,C)}function r1(m,C){C===0&&((m.mode&1)===0?C=1:(C=vo,vo<<=1,(vo&130023424)===0&&(vo=4194304)));var D=_A();m=fA(m,C),m!==null&&(xi(m,C,D),NA(m,D))}function i1(m){var C=m.memoizedState,D=0;C!==null&&(D=C.retryLane),r1(m,D)}function WA(m,C){var D=0;switch(m.tag){case 13:var Q=m.stateNode,le=m.memoizedState;le!==null&&(D=le.retryLane);break;case 19:Q=m.stateNode;break;default:throw Error(t(314))}Q!==null&&Q.delete(C),r1(m,D)}var Jm;Jm=function(m,C,D){if(m!==null)if(m.memoizedProps!==C.pendingProps||il.current)El=!0;else{if((m.lanes&D)===0&&(C.flags&128)===0)return El=!1,Ym(m,C,D);El=(m.flags&131072)!==0}else El=!1,Eo&&(C.flags&1048576)!==0&&Sd(C,_u,C.index);switch(C.lanes=0,C.tag){case 2:var Q=C.type;Ep(m,C),m=C.pendingProps;var le=xr(C,ba.current);su(C,D),le=Tr(null,C,Q,m,le,D);var ge=Zr();return C.flags|=1,typeof le=="object"&&le!==null&&typeof le.render=="function"&&le.$$typeof===void 0?(C.tag=1,C.memoizedState=null,C.updateQueue=null,xa(Q)?(ge=!0,yl(C)):ge=!1,C.memoizedState=le.state!==null&&le.state!==void 0?le.state:null,Xc(C),le.updater=Oh,C.stateNode=le,le._reactInternals=C,Mp(C,Q,m,D),C=th(null,C,Q,!0,ge,D)):(C.tag=0,Eo&&ge&&KA(C),Nl(null,C,le,D),C=C.child),C;case 16:Q=C.elementType;e:{switch(Ep(m,C),m=C.pendingProps,le=Q._init,Q=le(Q._payload),C.type=Q,le=C.tag=kp(Q),m=ll(Q,m),le){case 0:C=Bl(null,C,Q,m,D);break e;case 1:C=vA(null,C,Q,m,D);break e;case 11:C=Qm(null,C,Q,m,D);break e;case 14:C=Nf(null,C,Q,ll(Q.type,m),D);break e}throw Error(t(306,Q,""))}return C;case 0:return Q=C.type,le=C.pendingProps,le=C.elementType===Q?le:ll(Q,le),Bl(m,C,Q,le,D);case 1:return Q=C.type,le=C.pendingProps,le=C.elementType===Q?le:ll(Q,le),vA(m,C,Q,le,D);case 3:e:{if(Sp(C),m===null)throw Error(t(387));Q=C.pendingProps,ge=C.memoizedState,le=ge.element,I(m,C),T(C,Q,null,D);var tt=C.memoizedState;if(Q=tt.element,ge.isDehydrated)if(ge={element:Q,isDehydrated:!1,cache:tt.cache,pendingSuspenseBoundaries:tt.pendingSuspenseBoundaries,transitions:tt.transitions},C.updateQueue.baseState=ge,C.memoizedState=ge,C.flags&256){le=LA(Error(t(423)),C),C=dc(m,C,Q,D,le);break e}else if(Q!==le){le=LA(Error(t(424)),C),C=dc(m,C,Q,D,le);break e}else for(Da=nu(C.stateNode.containerInfo.firstChild),da=C,Eo=!0,ru=null,D=Oc(C,null,Q,D),C.child=D;D;)D.flags=D.flags&-3|4096,D=D.sibling;else{if(al(),Q===le){C=Eu(m,C,D);break e}Nl(m,C,Q,D)}C=C.child}return C;case 5:return Xe(C),m===null&&vl(C),Q=C.type,le=C.pendingProps,ge=m!==null?m.memoizedProps:null,tt=le.children,vu(Q,le)?tt=null:ge!==null&&vu(Q,ge)&&(C.flags|=32),Bd(m,C),Nl(m,C,tt,D),C.child;case 6:return m===null&&vl(C),null;case 13:return ff(m,C,D);case 4:return Te(C,C.stateNode.containerInfo),Q=C.pendingProps,m===null?C.child=ks(C,null,Q,D):Nl(m,C,Q,D),C.child;case 11:return Q=C.type,le=C.pendingProps,le=C.elementType===Q?le:ll(Q,le),Qm(m,C,Q,le,D);case 7:return Nl(m,C,C.pendingProps,D),C.child;case 8:return Nl(m,C,C.pendingProps.children,D),C.child;case 12:return Nl(m,C,C.pendingProps.children,D),C.child;case 10:e:{if(Q=C.type._context,le=C.pendingProps,ge=C.memoizedProps,tt=le.value,bs(bu,Q._currentValue),Q._currentValue=tt,ge!==null)if(an(ge.value,tt)){if(ge.children===le.children&&!il.current){C=Eu(m,C,D);break e}}else for(ge=C.child,ge!==null&&(ge.return=C);ge!==null;){var Ot=ge.dependencies;if(Ot!==null){tt=ge.child;for(var Wt=Ot.firstContext;Wt!==null;){if(Wt.context===Q){if(ge.tag===1){Wt=a(-1,D&-D),Wt.tag=2;var wn=ge.updateQueue;if(wn!==null){wn=wn.shared;var ir=wn.pending;ir===null?Wt.next=Wt:(Wt.next=ir.next,ir.next=Wt),wn.pending=Wt}}ge.lanes|=D,Wt=ge.alternate,Wt!==null&&(Wt.lanes|=D),Qs(ge.return,D,C),Ot.lanes|=D;break}Wt=Wt.next}}else if(ge.tag===10)tt=ge.type===C.type?null:ge.child;else if(ge.tag===18){if(tt=ge.return,tt===null)throw Error(t(341));tt.lanes|=D,Ot=tt.alternate,Ot!==null&&(Ot.lanes|=D),Qs(tt,D,C),tt=ge.sibling}else tt=ge.child;if(tt!==null)tt.return=ge;else for(tt=ge;tt!==null;){if(tt===C){tt=null;break}if(ge=tt.sibling,ge!==null){ge.return=tt.return,tt=ge;break}tt=tt.return}ge=tt}Nl(m,C,le.children,D),C=C.child}return C;case 9:return le=C.type,Q=C.pendingProps.children,su(C,D),le=au(le),Q=Q(le),C.flags|=1,Nl(m,C,Q,D),C.child;case 14:return Q=C.type,le=ll(Q,C.pendingProps),le=ll(Q.type,le),Nf(m,C,Q,le,D);case 15:return Ho(m,C,C.type,C.pendingProps,D);case 17:return Q=C.type,le=C.pendingProps,le=C.elementType===Q?le:ll(Q,le),Ep(m,C),C.tag=1,xa(Q)?(m=!0,yl(C)):m=!1,su(C,D),Ed(C,Q,le),Mp(C,Q,le,D),th(null,C,Q,!0,m,D);case 19:return UA(m,C,D);case 22:return Wf(m,C,D)}throw Error(t(156,C.tag))};function X0(m,C){return Sl(m,C)}function vf(m,C,D,Q){this.tag=m,this.key=D,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=C,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=Q,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function GA(m,C,D,Q){return new vf(m,C,D,Q)}function Cf(m){return m=m.prototype,!(!m||!m.isReactComponent)}function kp(m){if(typeof m=="function")return Cf(m)?1:0;if(m!=null){if(m=m.$$typeof,m===me)return 11;if(m===xe)return 14}return 2}function hc(m,C){var D=m.alternate;return D===null?(D=GA(m.tag,C,m.key,m.mode),D.elementType=m.elementType,D.type=m.type,D.stateNode=m.stateNode,D.alternate=m,m.alternate=D):(D.pendingProps=C,D.type=m.type,D.flags=0,D.subtreeFlags=0,D.deletions=null),D.flags=m.flags&14680064,D.childLanes=m.childLanes,D.lanes=m.lanes,D.child=m.child,D.memoizedProps=m.memoizedProps,D.memoizedState=m.memoizedState,D.updateQueue=m.updateQueue,C=m.dependencies,D.dependencies=C===null?null:{lanes:C.lanes,firstContext:C.firstContext},D.sibling=m.sibling,D.index=m.index,D.ref=m.ref,D}function Vf(m,C,D,Q,le,ge){var tt=2;if(Q=m,typeof m=="function")Cf(m)&&(tt=1);else if(typeof m=="string")tt=5;else e:switch(m){case G:return $f(D.children,le,ge,C);case oe:tt=8,le|=8;break;case he:return m=GA(12,D,C,le|2),m.elementType=he,m.lanes=ge,m;case Se:return m=GA(13,D,C,le),m.elementType=Se,m.lanes=ge,m;case Ke:return m=GA(19,D,C,le),m.elementType=Ke,m.lanes=ge,m;case Ze:return e0(D,le,ge,C);default:if(typeof m=="object"&&m!==null)switch(m.$$typeof){case fe:tt=10;break e;case Ee:tt=9;break e;case me:tt=11;break e;case xe:tt=14;break e;case at:tt=16,Q=null;break e}throw Error(t(130,m==null?m:typeof m,""))}return C=GA(tt,D,C,le),C.elementType=m,C.type=Q,C.lanes=ge,C}function $f(m,C,D,Q){return m=GA(7,m,Q,C),m.lanes=D,m}function e0(m,C,D,Q){return m=GA(22,m,Q,C),m.elementType=Ze,m.lanes=D,m.stateNode={isHidden:!1},m}function t0(m,C,D){return m=GA(6,m,null,C),m.lanes=D,m}function n0(m,C,D){return C=GA(4,m.children!==null?m.children:[],m.key,C),C.lanes=D,C.stateNode={containerInfo:m.containerInfo,pendingChildren:null,implementation:m.implementation},C}function Hy(m,C,D,Q,le){this.tag=C,this.containerInfo=m,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Cs(0),this.expirationTimes=Cs(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Cs(0),this.identifierPrefix=Q,this.onRecoverableError=le,this.mutableSourceEagerHydrationData=null}function r0(m,C,D,Q,le,ge,tt,Ot,Wt){return m=new Hy(m,C,D,Ot,Wt),C===1?(C=1,ge===!0&&(C|=8)):C=0,ge=GA(3,null,null,C),m.current=ge,ge.stateNode=m,ge.memoizedState={element:Q,isDehydrated:D,cache:null,transitions:null,pendingSuspenseBoundaries:null},Xc(ge),m}function o1(m,C,D){var Q=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ne,key:Q==null?null:""+Q,children:m,containerInfo:C,implementation:D}}function i0(m){if(!m)return Hc;m=m._reactInternals;e:{if(Wi(m)!==m||m.tag!==1)throw Error(t(170));var C=m;do{switch(C.tag){case 3:C=C.stateNode.context;break e;case 1:if(xa(C.type)){C=C.stateNode.__reactInternalMemoizedMergedChildContext;break e}}C=C.return}while(C!==null);throw Error(t(171))}if(m.tag===1){var D=m.type;if(xa(D))return ac(m,D,C)}return C}function o0(m,C,D,Q,le,ge,tt,Ot,Wt){return m=r0(D,Q,!0,m,le,ge,tt,Ot,Wt),m.context=i0(null),D=m.current,Q=_A(),le=rh(D),ge=a(Q,le),ge.callback=C??null,c(D,ge,le),m.current.lanes=le,xi(m,le,Q),NA(m,Q),m}function s0(m,C,D,Q){var le=C.current,ge=_A(),tt=rh(le);return D=i0(D),C.context===null?C.context=D:C.pendingContext=D,C=a(ge,tt),C.payload={element:m},Q=Q===void 0?null:Q,Q!==null&&(C.callback=Q),m=c(le,C,tt),m!==null&&(nd(m,le,tt,ge),_(m,le,tt)),tt}function mm(m){if(m=m.current,!m.child)return null;switch(m.child.tag){case 5:return m.child.stateNode;default:return m.child.stateNode}}function s1(m,C){if(m=m.memoizedState,m!==null&&m.dehydrated!==null){var D=m.retryLane;m.retryLane=D!==0&&D<C?D:C}}function J0(m,C){s1(m,C),(m=m.alternate)&&s1(m,C)}var a1=typeof reportError=="function"?reportError:function(m){console.error(m)};function eg(m){this._internalRoot=m}gm.prototype.render=eg.prototype.render=function(m){var C=this._internalRoot;if(C===null)throw Error(t(409));s0(m,C,null,null)},gm.prototype.unmount=eg.prototype.unmount=function(){var m=this._internalRoot;if(m!==null){this._internalRoot=null;var C=m.containerInfo;Yf(function(){s0(null,m,null,null)}),C[Cu]=null}};function gm(m){this._internalRoot=m}gm.prototype.unstable_scheduleHydration=function(m){if(m){var C=Es();m={blockedOn:null,target:m,priority:C};for(var D=0;D<As.length&&C!==0&&C<As[D].priority;D++);As.splice(D,0,m),D===0&&zi(m)}};function ym(m){return!(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)}function vm(m){return!(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11&&(m.nodeType!==8||m.nodeValue!==" react-mount-point-unstable "))}function Tp(){}function ih(m,C,D,Q,le){if(le){if(typeof Q=="function"){var ge=Q;Q=function(){var wn=mm(tt);ge.call(wn)}}var tt=o0(C,Q,m,0,null,!1,!1,"",Tp);return m._reactRootContainer=tt,m[Cu]=tt.current,yu(m.nodeType===8?m.parentNode:m),Yf(),tt}for(;le=m.lastChild;)m.removeChild(le);if(typeof Q=="function"){var Ot=Q;Q=function(){var wn=mm(Wt);Ot.call(wn)}}var Wt=r0(m,0,!1,null,null,!1,!1,"",Tp);return m._reactRootContainer=Wt,m[Cu]=Wt.current,yu(m.nodeType===8?m.parentNode:m),Yf(function(){s0(C,Wt,D,Q)}),Wt}function Od(m,C,D,Q,le){var ge=D._reactRootContainer;if(ge){var tt=ge;if(typeof le=="function"){var Ot=le;le=function(){var Wt=mm(tt);Ot.call(Wt)}}s0(C,tt,m,le)}else tt=ih(D,C,m,le,Q);return mm(tt)}$o=function(m){switch(m.tag){case 3:var C=m.stateNode;if(C.current.memoizedState.isDehydrated){var D=rs(C.pendingLanes);D!==0&&(Ja(C,D|1),NA(C,Yi()),(Ci&6)===0&&(pf=Yi()+500,lc()))}break;case 13:Yf(function(){var Q=fA(m,1);if(Q!==null){var le=_A();nd(Q,m,1,le)}}),J0(m,1)}},Qo=function(m){if(m.tag===13){var C=fA(m,134217728);if(C!==null){var D=_A();nd(C,m,134217728,D)}J0(m,134217728)}},js=function(m){if(m.tag===13){var C=rh(m),D=fA(m,C);if(D!==null){var Q=_A();nd(D,m,C,Q)}J0(m,C)}},Es=function(){return oi},Xs=function(m,C){var D=oi;try{return oi=m,C()}finally{oi=D}},Qe=function(m,C,D){switch(C){case"input":if(vn(m,D),C=D.name,D.type==="radio"&&C!=null){for(D=m;D.parentNode;)D=D.parentNode;for(D=D.querySelectorAll("input[name="+JSON.stringify(""+C)+'][type="radio"]'),C=0;C<D.length;C++){var Q=D[C];if(Q!==m&&Q.form===m.form){var le=ta(Q);if(!le)throw Error(t(90));_t(Q),vn(Q,le)}}}break;case"textarea":lr(m,D);break;case"select":C=D.value,C!=null&&Pn(m,!!D.multiple,C,!1)}},zt=H0,on=Yf;var Cm={usingClientEntryPoint:!1,Events:[gi,Gr,ta,qt,Gt,H0]},Hf={findFiberByHostInstance:_s,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Zy={bundleType:Hf.bundleType,version:Hf.version,rendererPackageName:Hf.rendererPackageName,rendererConfig:Hf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:re.ReactCurrentDispatcher,findHostInstanceByFiber:function(m){return m=ko(m),m===null?null:m.stateNode},findFiberByHostInstance:Hf.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var a0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!a0.isDisabled&&a0.supportsFiber)try{Zs=a0.inject(Zy),Ye=a0}catch{}}return uh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Cm,uh.createPortal=function(m,C){var D=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ym(C))throw Error(t(200));return o1(m,C,null,D)},uh.createRoot=function(m,C){if(!ym(m))throw Error(t(299));var D=!1,Q="",le=a1;return C!=null&&(C.unstable_strictMode===!0&&(D=!0),C.identifierPrefix!==void 0&&(Q=C.identifierPrefix),C.onRecoverableError!==void 0&&(le=C.onRecoverableError)),C=r0(m,1,!1,null,null,D,!1,Q,le),m[Cu]=C.current,yu(m.nodeType===8?m.parentNode:m),new eg(C)},uh.findDOMNode=function(m){if(m==null)return null;if(m.nodeType===1)return m;var C=m._reactInternals;if(C===void 0)throw typeof m.render=="function"?Error(t(188)):(m=Object.keys(m).join(","),Error(t(268,m)));return m=ko(C),m=m===null?null:m.stateNode,m},uh.flushSync=function(m){return Yf(m)},uh.hydrate=function(m,C,D){if(!vm(C))throw Error(t(200));return Od(null,m,C,!0,D)},uh.hydrateRoot=function(m,C,D){if(!ym(m))throw Error(t(405));var Q=D!=null&&D.hydratedSources||null,le=!1,ge="",tt=a1;if(D!=null&&(D.unstable_strictMode===!0&&(le=!0),D.identifierPrefix!==void 0&&(ge=D.identifierPrefix),D.onRecoverableError!==void 0&&(tt=D.onRecoverableError)),C=o0(C,null,m,1,D??null,le,!1,ge,tt),m[Cu]=C.current,yu(m),Q)for(m=0;m<Q.length;m++)D=Q[m],le=D._getVersion,le=le(D._source),C.mutableSourceEagerHydrationData==null?C.mutableSourceEagerHydrationData=[D,le]:C.mutableSourceEagerHydrationData.push(D,le);return new gm(C)},uh.render=function(m,C,D){if(!vm(C))throw Error(t(200));return Od(null,m,C,!1,D)},uh.unmountComponentAtNode=function(m){if(!vm(m))throw Error(t(40));return m._reactRootContainer?(Yf(function(){Od(null,null,m,!1,function(){m._reactRootContainer=null,m[Cu]=null})}),!0):!1},uh.unstable_batchedUpdates=H0,uh.unstable_renderSubtreeIntoContainer=function(m,C,D,Q){if(!vm(D))throw Error(t(200));if(m==null||m._reactInternals===void 0)throw Error(t(38));return Od(m,C,D,!1,Q)},uh.version="18.3.1-next-f1338f8080-20240426",uh}var a8;function IC(){if(a8)return g3.exports;a8=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),g3.exports=HN(),g3.exports}var l8;function ZN(){if(l8)return T_;l8=1;var n=IC();return T_.createRoot=n.createRoot,T_.hydrateRoot=n.hydrateRoot,T_}var XN=ZN();const JN="modulepreload",eW=function(n){return"/maputnik/"+n},u8={},d1=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),o=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));i=Promise.allSettled(t.map(f=>{if(f=eW(f),f in u8)return;u8[f]=!0;const y=f.endsWith(".css"),x=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${x}`))return;const B=document.createElement("link");if(B.rel=y?"stylesheet":JN,y||(B.as="script"),B.crossOrigin="",B.href=f,o&&B.setAttribute("nonce",o),document.head.appendChild(B),y)return new Promise((O,P)=>{B.addEventListener("load",O),B.addEventListener("error",()=>P(new Error(`Unable to preload CSS for ${f}`)))})}))}function s(l){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=l,window.dispatchEvent(o),!o.defaultPrevented)throw l}return i.then(l=>{for(const o of l||[])o.status==="rejected"&&s(o.reason);return e().catch(s)})},tW=(n,e,t)=>{const r=n[e];return r?typeof r=="function"?r():Promise.resolve(r):new Promise((i,s)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(s.bind(null,new Error("Unknown variable dynamic import: "+e+(e.split("/").length!==t?". Note that variables only represent file names one level deep.":""))))})},Io=n=>typeof n=="string",sv=()=>{let n,e;const t=new Promise((r,i)=>{n=r,e=i});return t.resolve=n,t.reject=e,t},A8=n=>n==null?"":""+n,nW=(n,e,t)=>{n.forEach(r=>{e[r]&&(t[r]=e[r])})},rW=/###/g,c8=n=>n&&n.indexOf("###")>-1?n.replace(rW,"."):n,d8=n=>!n||Io(n),Uv=(n,e,t)=>{const r=Io(e)?e.split("."):e;let i=0;for(;i<r.length-1;){if(d8(n))return{};const s=c8(r[i]);!n[s]&&t&&(n[s]=new t),Object.prototype.hasOwnProperty.call(n,s)?n=n[s]:n={},++i}return d8(n)?{}:{obj:n,k:c8(r[i])}},h8=(n,e,t)=>{const{obj:r,k:i}=Uv(n,e,Object);if(r!==void 0||e.length===1){r[i]=t;return}let s=e[e.length-1],l=e.slice(0,e.length-1),o=Uv(n,l,Object);for(;o.obj===void 0&&l.length;)s=`${l[l.length-1]}.${s}`,l=l.slice(0,l.length-1),o=Uv(n,l,Object),o!=null&&o.obj&&typeof o.obj[`${o.k}.${s}`]<"u"&&(o.obj=void 0);o.obj[`${o.k}.${s}`]=t},iW=(n,e,t,r)=>{const{obj:i,k:s}=Uv(n,e,Object);i[s]=i[s]||[],i[s].push(t)},Db=(n,e)=>{const{obj:t,k:r}=Uv(n,e);if(t&&Object.prototype.hasOwnProperty.call(t,r))return t[r]},oW=(n,e,t)=>{const r=Db(n,t);return r!==void 0?r:Db(e,t)},vD=(n,e,t)=>{for(const r in e)r!=="__proto__"&&r!=="constructor"&&(r in n?Io(n[r])||n[r]instanceof String||Io(e[r])||e[r]instanceof String?t&&(n[r]=e[r]):vD(n[r],e[r],t):n[r]=e[r]);return n},h1=n=>n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var sW={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const aW=n=>Io(n)?n.replace(/[&<>"'\/]/g,e=>sW[e]):n;class lW{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(t!==void 0)return t;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}const uW=[" ",",","?","!",";"],AW=new lW(20),cW=(n,e,t)=>{e=e||"",t=t||"";const r=uW.filter(l=>e.indexOf(l)<0&&t.indexOf(l)<0);if(r.length===0)return!0;const i=AW.getRegExp(`(${r.map(l=>l==="?"?"\\?":l).join("|")})`);let s=!i.test(n);if(!s){const l=n.indexOf(t);l>0&&!i.test(n.substring(0,l))&&(s=!0)}return s},bE=function(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!n)return;if(n[e])return Object.prototype.hasOwnProperty.call(n,e)?n[e]:void 0;const r=e.split(t);let i=n;for(let s=0;s<r.length;){if(!i||typeof i!="object")return;let l,o="";for(let f=s;f<r.length;++f)if(f!==s&&(o+=t),o+=r[f],l=i[o],l!==void 0){if(["string","number","boolean"].indexOf(typeof l)>-1&&f<r.length-1)continue;s+=f-s+1;break}i=l}return i},Fb=n=>n==null?void 0:n.replace("_","-"),dW={type:"logger",log(n){this.output("log",n)},warn(n){this.output("warn",n)},error(n){this.output("error",n)},output(n,e){var t,r;(r=(t=console==null?void 0:console[n])==null?void 0:t.apply)==null||r.call(t,console,e)}};class Lb{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(e,t)}init(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||dW,this.options=t,this.debug=t.debug}log(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.forward(t,"log","",!0)}warn(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.forward(t,"warn","",!0)}error(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.forward(t,"error","")}deprecate(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,r,i){return i&&!this.debug?null:(Io(e[0])&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new Lb(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new Lb(this.logger,e)}}var Gp=new Lb;class z2{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const i=this.observers[r].get(t)||0;this.observers[r].set(t,i+1)}),this}off(e,t){if(this.observers[e]){if(!t){delete this.observers[e];return}this.observers[e].delete(t)}}emit(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];this.observers[e]&&Array.from(this.observers[e].entries()).forEach(l=>{let[o,f]=l;for(let y=0;y<f;y++)o(...r)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(l=>{let[o,f]=l;for(let y=0;y<f;y++)o.apply(o,[e,...r])})}}class f8 extends z2{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,r){var y,x;let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const s=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,l=i.ignoreJSONStructure!==void 0?i.ignoreJSONStructure:this.options.ignoreJSONStructure;let o;e.indexOf(".")>-1?o=e.split("."):(o=[e,t],r&&(Array.isArray(r)?o.push(...r):Io(r)&&s?o.push(...r.split(s)):o.push(r)));const f=Db(this.data,o);return!f&&!t&&!r&&e.indexOf(".")>-1&&(e=o[0],t=o[1],r=o.slice(2).join(".")),f||!l||!Io(r)?f:bE((x=(y=this.data)==null?void 0:y[e])==null?void 0:x[t],r,s)}addResource(e,t,r,i){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const l=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator;let o=[e,t];r&&(o=o.concat(l?r.split(l):r)),e.indexOf(".")>-1&&(o=e.split("."),i=t,t=o[1]),this.addNamespaces(t),h8(this.data,o,i),s.silent||this.emit("added",e,t,r,i)}addResources(e,t,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const s in r)(Io(r[s])||Array.isArray(r[s]))&&this.addResource(e,t,s,r[s],{silent:!0});i.silent||this.emit("added",e,t,r)}addResourceBundle(e,t,r,i,s){let l=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},o=[e,t];e.indexOf(".")>-1&&(o=e.split("."),i=r,r=t,t=o[1]),this.addNamespaces(t);let f=Db(this.data,o)||{};l.skipCopy||(r=JSON.parse(JSON.stringify(r))),i?vD(f,r,s):f={...f,...r},h8(this.data,o,f),l.silent||this.emit("added",e,t,r)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return this.getResource(e,t)!==void 0}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(i=>t[i]&&Object.keys(t[i]).length>0)}toJSON(){return this.data}}var CD={processors:{},addPostProcessor(n){this.processors[n.name]=n},handle(n,e,t,r,i){return n.forEach(s=>{var l;e=((l=this.processors[s])==null?void 0:l.process(e,t,r,i))??e}),e}};const p8={},m8=n=>!Io(n)&&typeof n!="boolean"&&typeof n!="number";class Ub extends z2{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),nW(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Gp.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(e==null)return!1;const r=this.resolve(e,t);return(r==null?void 0:r.res)!==void 0}extractFromKey(e,t){let r=t.nsSeparator!==void 0?t.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const i=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator;let s=t.ns||this.options.defaultNS||[];const l=r&&e.indexOf(r)>-1,o=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!cW(e,r,i);if(l&&!o){const f=e.match(this.interpolator.nestingRegexp);if(f&&f.length>0)return{key:e,namespaces:Io(s)?[s]:s};const y=e.split(r);(r!==i||r===i&&this.options.ns.indexOf(y[0])>-1)&&(s=y.shift()),e=y.join(i)}return{key:e,namespaces:Io(s)?[s]:s}}translate(e,t,r){if(typeof t!="object"&&this.options.overloadTranslationOptionHandler&&(t=this.options.overloadTranslationOptionHandler(arguments)),typeof t=="object"&&(t={...t}),t||(t={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const i=t.returnDetails!==void 0?t.returnDetails:this.options.returnDetails,s=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator,{key:l,namespaces:o}=this.extractFromKey(e[e.length-1],t),f=o[o.length-1],y=t.lng||this.language,x=t.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if((y==null?void 0:y.toLowerCase())==="cimode"){if(x){const Ee=t.nsSeparator||this.options.nsSeparator;return i?{res:`${f}${Ee}${l}`,usedKey:l,exactUsedKey:l,usedLng:y,usedNS:f,usedParams:this.getUsedParamsDetails(t)}:`${f}${Ee}${l}`}return i?{res:l,usedKey:l,exactUsedKey:l,usedLng:y,usedNS:f,usedParams:this.getUsedParamsDetails(t)}:l}const B=this.resolve(e,t);let O=B==null?void 0:B.res;const P=(B==null?void 0:B.usedKey)||l,U=(B==null?void 0:B.exactUsedKey)||l,j=["[object Number]","[object Function]","[object RegExp]"],N=t.joinArrays!==void 0?t.joinArrays:this.options.joinArrays,Y=!this.i18nFormat||this.i18nFormat.handleAsObject,H=t.count!==void 0&&!Io(t.count),se=Ub.hasDefaultValue(t),re=H?this.pluralResolver.getSuffix(y,t.count,t):"",V=t.ordinal&&H?this.pluralResolver.getSuffix(y,t.count,{ordinal:!1}):"",ne=H&&!t.ordinal&&t.count===0,G=ne&&t[`defaultValue${this.options.pluralSeparator}zero`]||t[`defaultValue${re}`]||t[`defaultValue${V}`]||t.defaultValue;let oe=O;Y&&!O&&se&&(oe=G);const he=m8(oe),fe=Object.prototype.toString.apply(oe);if(Y&&oe&&he&&j.indexOf(fe)<0&&!(Io(N)&&Array.isArray(oe))){if(!t.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const Ee=this.options.returnedObjectHandler?this.options.returnedObjectHandler(P,oe,{...t,ns:o}):`key '${l} (${this.language})' returned an object instead of string.`;return i?(B.res=Ee,B.usedParams=this.getUsedParamsDetails(t),B):Ee}if(s){const Ee=Array.isArray(oe),me=Ee?[]:{},Se=Ee?U:P;for(const Ke in oe)if(Object.prototype.hasOwnProperty.call(oe,Ke)){const xe=`${Se}${s}${Ke}`;se&&!O?me[Ke]=this.translate(xe,{...t,defaultValue:m8(G)?G[Ke]:void 0,joinArrays:!1,ns:o}):me[Ke]=this.translate(xe,{...t,joinArrays:!1,ns:o}),me[Ke]===xe&&(me[Ke]=oe[Ke])}O=me}}else if(Y&&Io(N)&&Array.isArray(O))O=O.join(N),O&&(O=this.extendTranslation(O,e,t,r));else{let Ee=!1,me=!1;!this.isValidLookup(O)&&se&&(Ee=!0,O=G),this.isValidLookup(O)||(me=!0,O=l);const Ke=(t.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&me?void 0:O,xe=se&&G!==O&&this.options.updateMissing;if(me||Ee||xe){if(this.logger.log(xe?"updateKey":"missingKey",y,f,l,xe?G:O),s){const Ne=this.resolve(l,{...t,keySeparator:!1});Ne&&Ne.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let at=[];const Ze=this.languageUtils.getFallbackCodes(this.options.fallbackLng,t.lng||this.language);if(this.options.saveMissingTo==="fallback"&&Ze&&Ze[0])for(let Ne=0;Ne<Ze.length;Ne++)at.push(Ze[Ne]);else this.options.saveMissingTo==="all"?at=this.languageUtils.toResolveHierarchy(t.lng||this.language):at.push(t.lng||this.language);const Je=(Ne,we,De)=>{var bt;const He=se&&De!==O?De:Ke;this.options.missingKeyHandler?this.options.missingKeyHandler(Ne,f,we,He,xe,t):(bt=this.backendConnector)!=null&&bt.saveMissing&&this.backendConnector.saveMissing(Ne,f,we,He,xe,t),this.emit("missingKey",Ne,f,we,O)};this.options.saveMissing&&(this.options.saveMissingPlurals&&H?at.forEach(Ne=>{const we=this.pluralResolver.getSuffixes(Ne,t);ne&&t[`defaultValue${this.options.pluralSeparator}zero`]&&we.indexOf(`${this.options.pluralSeparator}zero`)<0&&we.push(`${this.options.pluralSeparator}zero`),we.forEach(De=>{Je([Ne],l+De,t[`defaultValue${De}`]||G)})}):Je(at,l,G))}O=this.extendTranslation(O,e,t,B,r),me&&O===l&&this.options.appendNamespaceToMissingKey&&(O=`${f}:${l}`),(me||Ee)&&this.options.parseMissingKeyHandler&&(O=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${f}:${l}`:l,Ee?O:void 0))}return i?(B.res=O,B.usedParams=this.getUsedParamsDetails(t),B):O}extendTranslation(e,t,r,i,s){var y,x;var l=this;if((y=this.i18nFormat)!=null&&y.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const B=Io(e)&&(((x=r==null?void 0:r.interpolation)==null?void 0:x.skipOnVariables)!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let O;if(B){const U=e.match(this.interpolator.nestingRegexp);O=U&&U.length}let P=r.replace&&!Io(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(P={...this.options.interpolation.defaultVariables,...P}),e=this.interpolator.interpolate(e,P,r.lng||this.language||i.usedLng,r),B){const U=e.match(this.interpolator.nestingRegexp),j=U&&U.length;O<j&&(r.nest=!1)}!r.lng&&i&&i.res&&(r.lng=this.language||i.usedLng),r.nest!==!1&&(e=this.interpolator.nest(e,function(){for(var U=arguments.length,j=new Array(U),N=0;N<U;N++)j[N]=arguments[N];return(s==null?void 0:s[0])===j[0]&&!r.context?(l.logger.warn(`It seems you are nesting recursively key: ${j[0]} in key: ${t[0]}`),null):l.translate(...j,t)},r)),r.interpolation&&this.interpolator.reset()}const o=r.postProcess||this.options.postProcess,f=Io(o)?[o]:o;return e!=null&&(f!=null&&f.length)&&r.applyPostProcessor!==!1&&(e=CD.handle(f,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...i,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r,i,s,l,o;return Io(e)&&(e=[e]),e.forEach(f=>{if(this.isValidLookup(r))return;const y=this.extractFromKey(f,t),x=y.key;i=x;let B=y.namespaces;this.options.fallbackNS&&(B=B.concat(this.options.fallbackNS));const O=t.count!==void 0&&!Io(t.count),P=O&&!t.ordinal&&t.count===0,U=t.context!==void 0&&(Io(t.context)||typeof t.context=="number")&&t.context!=="",j=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);B.forEach(N=>{var Y,H;this.isValidLookup(r)||(o=N,!p8[`${j[0]}-${N}`]&&((Y=this.utils)!=null&&Y.hasLoadedNamespace)&&!((H=this.utils)!=null&&H.hasLoadedNamespace(o))&&(p8[`${j[0]}-${N}`]=!0,this.logger.warn(`key "${i}" for languages "${j.join(", ")}" won't get resolved as namespace "${o}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),j.forEach(se=>{var ne;if(this.isValidLookup(r))return;l=se;const re=[x];if((ne=this.i18nFormat)!=null&&ne.addLookupKeys)this.i18nFormat.addLookupKeys(re,x,se,N,t);else{let G;O&&(G=this.pluralResolver.getSuffix(se,t.count,t));const oe=`${this.options.pluralSeparator}zero`,he=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(O&&(re.push(x+G),t.ordinal&&G.indexOf(he)===0&&re.push(x+G.replace(he,this.options.pluralSeparator)),P&&re.push(x+oe)),U){const fe=`${x}${this.options.contextSeparator}${t.context}`;re.push(fe),O&&(re.push(fe+G),t.ordinal&&G.indexOf(he)===0&&re.push(fe+G.replace(he,this.options.pluralSeparator)),P&&re.push(fe+oe))}}let V;for(;V=re.pop();)this.isValidLookup(r)||(s=V,r=this.getResource(se,N,V,t))}))})}),{res:r,usedKey:i,exactUsedKey:s,usedLng:l,usedNS:o}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,t,r){var s;let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return(s=this.i18nFormat)!=null&&s.getResource?this.i18nFormat.getResource(e,t,r,i):this.resourceStore.getResource(e,t,r,i)}getUsedParamsDetails(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&!Io(e.replace);let i=r?e.replace:e;if(r&&typeof e.count<"u"&&(i.count=e.count),this.options.interpolation.defaultVariables&&(i={...this.options.interpolation.defaultVariables,...i}),!r){i={...i};for(const s of t)delete i[s]}return i}static hasDefaultValue(e){const t="defaultValue";for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t===r.substring(0,t.length)&&e[r]!==void 0)return!0;return!1}}class g8{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Gp.create("languageUtils")}getScriptPartFromCode(e){if(e=Fb(e),!e||e.indexOf("-")<0)return null;const t=e.split("-");return t.length===2||(t.pop(),t[t.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(t.join("-"))}getLanguagePartFromCode(e){if(e=Fb(e),!e||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(Io(e)&&e.indexOf("-")>-1){let t;try{t=Intl.getCanonicalLocales(e)[0]}catch{}return t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(r=>{if(t)return;const i=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(i))&&(t=i)}),!t&&this.options.supportedLngs&&e.forEach(r=>{if(t)return;const i=this.getLanguagePartFromCode(r);if(this.isSupportedCode(i))return t=i;t=this.options.supportedLngs.find(s=>{if(s===i)return s;if(!(s.indexOf("-")<0&&i.indexOf("-")<0)&&(s.indexOf("-")>0&&i.indexOf("-")<0&&s.substring(0,s.indexOf("-"))===i||s.indexOf(i)===0&&i.length>1))return s})}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if(typeof e=="function"&&(e=e(t)),Io(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let r=e[t];return r||(r=e[this.getScriptPartFromCode(t)]),r||(r=e[this.formatLanguageCode(t)]),r||(r=e[this.getLanguagePartFromCode(t)]),r||(r=e.default),r||[]}toResolveHierarchy(e,t){const r=this.getFallbackCodes(t||this.options.fallbackLng||[],e),i=[],s=l=>{l&&(this.isSupportedCode(l)?i.push(l):this.logger.warn(`rejecting language code not found in supportedLngs: ${l}`))};return Io(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&s(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&s(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&s(this.getLanguagePartFromCode(e))):Io(e)&&s(this.formatLanguageCode(e)),r.forEach(l=>{i.indexOf(l)<0&&s(this.formatLanguageCode(l))}),i}}const y8={zero:0,one:1,two:2,few:3,many:4,other:5},v8={select:n=>n===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class hW{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=e,this.options=t,this.logger=Gp.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=Fb(e==="dev"?"en":e),i=t.ordinal?"ordinal":"cardinal",s=JSON.stringify({cleanedCode:r,type:i});if(s in this.pluralRulesCache)return this.pluralRulesCache[s];let l;try{l=new Intl.PluralRules(r,{type:i})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),v8;if(!e.match(/-|_/))return v8;const f=this.languageUtils.getLanguagePartFromCode(e);l=this.getRule(f,t)}return this.pluralRulesCache[s]=l,l}needsPlural(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.getRule(e,t);return r||(r=this.getRule("dev",t)),(r==null?void 0:r.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(e,r).map(i=>`${t}${i}`)}getSuffixes(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.getRule(e,t);return r||(r=this.getRule("dev",t)),r?r.resolvedOptions().pluralCategories.sort((i,s)=>y8[i]-y8[s]).map(i=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${i}`):[]}getSuffix(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=this.getRule(e,r);return i?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${i.select(t)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",t,r))}}const C8=function(n,e,t){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,s=oW(n,e,t);return!s&&i&&Io(t)&&(s=bE(n,t,r),s===void 0&&(s=bE(e,t,r))),s},C3=n=>n.replace(/\$/g,"$$$$");class fW{constructor(){var t;let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=Gp.create("interpolator"),this.options=e,this.format=((t=e==null?void 0:e.interpolation)==null?void 0:t.format)||(r=>r),this.init(e)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:r,useRawValueToEscape:i,prefix:s,prefixEscaped:l,suffix:o,suffixEscaped:f,formatSeparator:y,unescapeSuffix:x,unescapePrefix:B,nestingPrefix:O,nestingPrefixEscaped:P,nestingSuffix:U,nestingSuffixEscaped:j,nestingOptionsSeparator:N,maxReplaces:Y,alwaysFormat:H}=e.interpolation;this.escape=t!==void 0?t:aW,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=i!==void 0?i:!1,this.prefix=s?h1(s):l||"{{",this.suffix=o?h1(o):f||"}}",this.formatSeparator=y||",",this.unescapePrefix=x?"":B||"-",this.unescapeSuffix=this.unescapePrefix?"":x||"",this.nestingPrefix=O?h1(O):P||h1("$t("),this.nestingSuffix=U?h1(U):j||h1(")"),this.nestingOptionsSeparator=N||",",this.maxReplaces=Y||1e3,this.alwaysFormat=H!==void 0?H:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(t,r)=>(t==null?void 0:t.source)===r?(t.lastIndex=0,t):new RegExp(r,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,t,r,i){var P;let s,l,o;const f=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},y=U=>{if(U.indexOf(this.formatSeparator)<0){const H=C8(t,f,U,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(H,void 0,r,{...i,...t,interpolationkey:U}):H}const j=U.split(this.formatSeparator),N=j.shift().trim(),Y=j.join(this.formatSeparator).trim();return this.format(C8(t,f,N,this.options.keySeparator,this.options.ignoreJSONStructure),Y,r,{...i,...t,interpolationkey:N})};this.resetRegExp();const x=(i==null?void 0:i.missingInterpolationHandler)||this.options.missingInterpolationHandler,B=((P=i==null?void 0:i.interpolation)==null?void 0:P.skipOnVariables)!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:U=>C3(U)},{regex:this.regexp,safeValue:U=>this.escapeValue?C3(this.escape(U)):C3(U)}].forEach(U=>{for(o=0;s=U.regex.exec(e);){const j=s[1].trim();if(l=y(j),l===void 0)if(typeof x=="function"){const Y=x(e,s,i);l=Io(Y)?Y:""}else if(i&&Object.prototype.hasOwnProperty.call(i,j))l="";else if(B){l=s[0];continue}else this.logger.warn(`missed to pass in variable ${j} for interpolating ${e}`),l="";else!Io(l)&&!this.useRawValueToEscape&&(l=A8(l));const N=U.safeValue(l);if(e=e.replace(s[0],N),B?(U.regex.lastIndex+=l.length,U.regex.lastIndex-=s[0].length):U.regex.lastIndex=0,o++,o>=this.maxReplaces)break}}),e}nest(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i,s,l;const o=(f,y)=>{const x=this.nestingOptionsSeparator;if(f.indexOf(x)<0)return f;const B=f.split(new RegExp(`${x}[ ]*{`));let O=`{${B[1]}`;f=B[0],O=this.interpolate(O,l);const P=O.match(/'/g),U=O.match(/"/g);(((P==null?void 0:P.length)??0)%2===0&&!U||U.length%2!==0)&&(O=O.replace(/'/g,'"'));try{l=JSON.parse(O),y&&(l={...y,...l})}catch(j){return this.logger.warn(`failed parsing options string in nesting for key ${f}`,j),`${f}${x}${O}`}return l.defaultValue&&l.defaultValue.indexOf(this.prefix)>-1&&delete l.defaultValue,f};for(;i=this.nestingRegexp.exec(e);){let f=[];l={...r},l=l.replace&&!Io(l.replace)?l.replace:l,l.applyPostProcessor=!1,delete l.defaultValue;let y=!1;if(i[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(i[1])){const x=i[1].split(this.formatSeparator).map(B=>B.trim());i[1]=x.shift(),f=x,y=!0}if(s=t(o.call(this,i[1].trim(),l),l),s&&i[0]===e&&!Io(s))return s;Io(s)||(s=A8(s)),s||(this.logger.warn(`missed to resolve ${i[1]} for nesting ${e}`),s=""),y&&(s=f.reduce((x,B)=>this.format(x,B,r.lng,{...r,interpolationkey:i[1].trim()}),s.trim())),e=e.replace(i[0],s),this.regexp.lastIndex=0}return e}}const pW=n=>{let e=n.toLowerCase().trim();const t={};if(n.indexOf("(")>-1){const r=n.split("(");e=r[0].toLowerCase().trim();const i=r[1].substring(0,r[1].length-1);e==="currency"&&i.indexOf(":")<0?t.currency||(t.currency=i.trim()):e==="relativetime"&&i.indexOf(":")<0?t.range||(t.range=i.trim()):i.split(";").forEach(l=>{if(l){const[o,...f]=l.split(":"),y=f.join(":").trim().replace(/^'+|'+$/g,""),x=o.trim();t[x]||(t[x]=y),y==="false"&&(t[x]=!1),y==="true"&&(t[x]=!0),isNaN(y)||(t[x]=parseInt(y,10))}})}return{formatName:e,formatOptions:t}},f1=n=>{const e={};return(t,r,i)=>{let s=i;i&&i.interpolationkey&&i.formatParams&&i.formatParams[i.interpolationkey]&&i[i.interpolationkey]&&(s={...s,[i.interpolationkey]:void 0});const l=r+JSON.stringify(s);let o=e[l];return o||(o=n(Fb(r),i),e[l]=o),o(t)}};class mW{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=Gp.create("formatter"),this.options=e,this.formats={number:f1((t,r)=>{const i=new Intl.NumberFormat(t,{...r});return s=>i.format(s)}),currency:f1((t,r)=>{const i=new Intl.NumberFormat(t,{...r,style:"currency"});return s=>i.format(s)}),datetime:f1((t,r)=>{const i=new Intl.DateTimeFormat(t,{...r});return s=>i.format(s)}),relativetime:f1((t,r)=>{const i=new Intl.RelativeTimeFormat(t,{...r});return s=>i.format(s,r.range||"day")}),list:f1((t,r)=>{const i=new Intl.ListFormat(t,{...r});return s=>i.format(s)})},this.init(e)}init(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};this.formatSeparator=t.interpolation.formatSeparator||","}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=f1(t)}format(e,t,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const s=t.split(this.formatSeparator);if(s.length>1&&s[0].indexOf("(")>1&&s[0].indexOf(")")<0&&s.find(o=>o.indexOf(")")>-1)){const o=s.findIndex(f=>f.indexOf(")")>-1);s[0]=[s[0],...s.splice(1,o)].join(this.formatSeparator)}return s.reduce((o,f)=>{var B;const{formatName:y,formatOptions:x}=pW(f);if(this.formats[y]){let O=o;try{const P=((B=i==null?void 0:i.formatParams)==null?void 0:B[i.interpolationkey])||{},U=P.locale||P.lng||i.locale||i.lng||r;O=this.formats[y](o,U,{...x,...i,...P})}catch(P){this.logger.warn(P)}return O}else this.logger.warn(`there was no format function for ${y}`);return o},e)}}const gW=(n,e)=>{n.pending[e]!==void 0&&(delete n.pending[e],n.pendingCount--)};class yW extends z2{constructor(e,t,r){var s,l;let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=e,this.store=t,this.services=r,this.languageUtils=r.languageUtils,this.options=i,this.logger=Gp.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],(l=(s=this.backend)==null?void 0:s.init)==null||l.call(s,r,i.backend,i)}queueLoad(e,t,r,i){const s={},l={},o={},f={};return e.forEach(y=>{let x=!0;t.forEach(B=>{const O=`${y}|${B}`;!r.reload&&this.store.hasResourceBundle(y,B)?this.state[O]=2:this.state[O]<0||(this.state[O]===1?l[O]===void 0&&(l[O]=!0):(this.state[O]=1,x=!1,l[O]===void 0&&(l[O]=!0),s[O]===void 0&&(s[O]=!0),f[B]===void 0&&(f[B]=!0)))}),x||(o[y]=!0)}),(Object.keys(s).length||Object.keys(l).length)&&this.queue.push({pending:l,pendingCount:Object.keys(l).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(s),pending:Object.keys(l),toLoadLanguages:Object.keys(o),toLoadNamespaces:Object.keys(f)}}loaded(e,t,r){const i=e.split("|"),s=i[0],l=i[1];t&&this.emit("failedLoading",s,l,t),!t&&r&&this.store.addResourceBundle(s,l,r,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&r&&(this.state[e]=0);const o={};this.queue.forEach(f=>{iW(f.loaded,[s],l),gW(f,e),t&&f.errors.push(t),f.pendingCount===0&&!f.done&&(Object.keys(f.loaded).forEach(y=>{o[y]||(o[y]={});const x=f.loaded[y];x.length&&x.forEach(B=>{o[y][B]===void 0&&(o[y][B]=!0)})}),f.done=!0,f.errors.length?f.callback(f.errors):f.callback())}),this.emit("loaded",o),this.queue=this.queue.filter(f=>!f.done)}read(e,t,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,l=arguments.length>5?arguments[5]:void 0;if(!e.length)return l(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:t,fcName:r,tried:i,wait:s,callback:l});return}this.readingCalls++;const o=(y,x)=>{if(this.readingCalls--,this.waitingReads.length>0){const B=this.waitingReads.shift();this.read(B.lng,B.ns,B.fcName,B.tried,B.wait,B.callback)}if(y&&x&&i<this.maxRetries){setTimeout(()=>{this.read.call(this,e,t,r,i+1,s*2,l)},s);return}l(y,x)},f=this.backend[r].bind(this.backend);if(f.length===2){try{const y=f(e,t);y&&typeof y.then=="function"?y.then(x=>o(null,x)).catch(o):o(null,y)}catch(y){o(y)}return}return f(e,t,o)}prepareLoading(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();Io(e)&&(e=this.languageUtils.toResolveHierarchy(e)),Io(t)&&(t=[t]);const s=this.queueLoad(e,t,r,i);if(!s.toLoad.length)return s.pending.length||i(),null;s.toLoad.forEach(l=>{this.loadOne(l)})}load(e,t,r){this.prepareLoading(e,t,{},r)}reload(e,t,r){this.prepareLoading(e,t,{reload:!0},r)}loadOne(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=e.split("|"),i=r[0],s=r[1];this.read(i,s,"read",void 0,void 0,(l,o)=>{l&&this.logger.warn(`${t}loading namespace ${s} for language ${i} failed`,l),!l&&o&&this.logger.log(`${t}loaded namespace ${s} for language ${i}`,o),this.loaded(e,l,o)})}saveMissing(e,t,r,i,s){var f,y,x,B,O;let l=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if((y=(f=this.services)==null?void 0:f.utils)!=null&&y.hasLoadedNamespace&&!((B=(x=this.services)==null?void 0:x.utils)!=null&&B.hasLoadedNamespace(t))){this.logger.warn(`did not save key "${r}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if((O=this.backend)!=null&&O.create){const P={...l,isUpdate:s},U=this.backend.create.bind(this.backend);if(U.length<6)try{let j;U.length===5?j=U(e,t,r,i,P):j=U(e,t,r,i),j&&typeof j.then=="function"?j.then(N=>o(null,N)).catch(o):o(null,j)}catch(j){o(j)}else U(e,t,r,i,o,P)}!e||!e[0]||this.store.addResource(e[0],t,r,i)}}}const _8=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:n=>{let e={};if(typeof n[1]=="object"&&(e=n[1]),Io(n[1])&&(e.defaultValue=n[1]),Io(n[2])&&(e.tDescription=n[2]),typeof n[2]=="object"||typeof n[3]=="object"){const t=n[3]||n[2];Object.keys(t).forEach(r=>{e[r]=t[r]})}return e},interpolation:{escapeValue:!0,format:n=>n,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),b8=n=>{var e,t;return Io(n.ns)&&(n.ns=[n.ns]),Io(n.fallbackLng)&&(n.fallbackLng=[n.fallbackLng]),Io(n.fallbackNS)&&(n.fallbackNS=[n.fallbackNS]),((t=(e=n.supportedLngs)==null?void 0:e.indexOf)==null?void 0:t.call(e,"cimode"))<0&&(n.supportedLngs=n.supportedLngs.concat(["cimode"])),typeof n.initImmediate=="boolean"&&(n.initAsync=n.initImmediate),n},P_=()=>{},vW=n=>{Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach(t=>{typeof n[t]=="function"&&(n[t]=n[t].bind(n))})};class Xv extends z2{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(super(),this.options=b8(e),this.services={},this.logger=Gp,this.modules={external:[]},vW(this),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(){var e=this;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof t=="function"&&(r=t,t={}),t.defaultNS==null&&t.ns&&(Io(t.ns)?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));const i=_8();this.options={...i,...this.options,...b8(t)},this.options.interpolation={...i.interpolation,...this.options.interpolation},t.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=t.keySeparator),t.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=t.nsSeparator);const s=x=>x?typeof x=="function"?new x:x:null;if(!this.options.isClone){this.modules.logger?Gp.init(s(this.modules.logger),this.options):Gp.init(null,this.options);let x;this.modules.formatter?x=this.modules.formatter:x=mW;const B=new g8(this.options);this.store=new f8(this.options.resources,this.options);const O=this.services;O.logger=Gp,O.resourceStore=this.store,O.languageUtils=B,O.pluralResolver=new hW(B,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),x&&(!this.options.interpolation.format||this.options.interpolation.format===i.interpolation.format)&&(O.formatter=s(x),O.formatter.init(O,this.options),this.options.interpolation.format=O.formatter.format.bind(O.formatter)),O.interpolator=new fW(this.options),O.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},O.backendConnector=new yW(s(this.modules.backend),O.resourceStore,O,this.options),O.backendConnector.on("*",function(P){for(var U=arguments.length,j=new Array(U>1?U-1:0),N=1;N<U;N++)j[N-1]=arguments[N];e.emit(P,...j)}),this.modules.languageDetector&&(O.languageDetector=s(this.modules.languageDetector),O.languageDetector.init&&O.languageDetector.init(O,this.options.detection,this.options)),this.modules.i18nFormat&&(O.i18nFormat=s(this.modules.i18nFormat),O.i18nFormat.init&&O.i18nFormat.init(this)),this.translator=new Ub(this.services,this.options),this.translator.on("*",function(P){for(var U=arguments.length,j=new Array(U>1?U-1:0),N=1;N<U;N++)j[N-1]=arguments[N];e.emit(P,...j)}),this.modules.external.forEach(P=>{P.init&&P.init(this)})}if(this.format=this.options.interpolation.format,r||(r=P_),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const x=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);x.length>0&&x[0]!=="dev"&&(this.options.lng=x[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(x=>{this[x]=function(){return e.store[x](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(x=>{this[x]=function(){return e.store[x](...arguments),e}});const f=sv(),y=()=>{const x=(B,O)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),f.resolve(O),r(B,O)};if(this.languages&&!this.isInitialized)return x(null,this.t.bind(this));this.changeLanguage(this.options.lng,x)};return this.options.resources||!this.options.initAsync?y():setTimeout(y,0),f}loadResources(e){var s,l;let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:P_;const i=Io(e)?e:this.language;if(typeof e=="function"&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if((i==null?void 0:i.toLowerCase())==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const o=[],f=y=>{if(!y||y==="cimode")return;this.services.languageUtils.toResolveHierarchy(y).forEach(B=>{B!=="cimode"&&o.indexOf(B)<0&&o.push(B)})};i?f(i):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(x=>f(x)),(l=(s=this.options.preload)==null?void 0:s.forEach)==null||l.call(s,y=>f(y)),this.services.backendConnector.load(o,this.options.ns,y=>{!y&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(y)})}else r(null)}reloadResources(e,t,r){const i=sv();return typeof e=="function"&&(r=e,e=void 0),typeof t=="function"&&(r=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),r||(r=P_),this.services.backendConnector.reload(e,t,s=>{i.resolve(),r(s)}),i}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&CD.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1))for(let t=0;t<this.languages.length;t++){const r=this.languages[t];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}}changeLanguage(e,t){var r=this;this.isLanguageChangingTo=e;const i=sv();this.emit("languageChanging",e);const s=f=>{this.language=f,this.languages=this.services.languageUtils.toResolveHierarchy(f),this.resolvedLanguage=void 0,this.setResolvedLanguage(f)},l=(f,y)=>{y?(s(y),this.translator.changeLanguage(y),this.isLanguageChangingTo=void 0,this.emit("languageChanged",y),this.logger.log("languageChanged",y)):this.isLanguageChangingTo=void 0,i.resolve(function(){return r.t(...arguments)}),t&&t(f,function(){return r.t(...arguments)})},o=f=>{var x,B;!e&&!f&&this.services.languageDetector&&(f=[]);const y=Io(f)?f:this.services.languageUtils.getBestMatchFromCodes(f);y&&(this.language||s(y),this.translator.language||this.translator.changeLanguage(y),(B=(x=this.services.languageDetector)==null?void 0:x.cacheUserLanguage)==null||B.call(x,y)),this.loadResources(y,O=>{l(O,y)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?o(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(o):this.services.languageDetector.detect(o):o(e),i}getFixedT(e,t,r){var i=this;const s=function(l,o){let f;if(typeof o!="object"){for(var y=arguments.length,x=new Array(y>2?y-2:0),B=2;B<y;B++)x[B-2]=arguments[B];f=i.options.overloadTranslationOptionHandler([l,o].concat(x))}else f={...o};f.lng=f.lng||s.lng,f.lngs=f.lngs||s.lngs,f.ns=f.ns||s.ns,f.keyPrefix!==""&&(f.keyPrefix=f.keyPrefix||r||s.keyPrefix);const O=i.options.keySeparator||".";let P;return f.keyPrefix&&Array.isArray(l)?P=l.map(U=>`${f.keyPrefix}${O}${U}`):P=f.keyPrefix?`${f.keyPrefix}${O}${l}`:l,i.t(P,f)};return Io(e)?s.lng=e:s.lngs=e,s.ns=t,s.keyPrefix=r,s}t(){var i;for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return(i=this.translator)==null?void 0:i.translate(...t)}exists(){var i;for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return(i=this.translator)==null?void 0:i.exists(...t)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=t.lng||this.resolvedLanguage||this.languages[0],i=this.options?this.options.fallbackLng:!1,s=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const l=(o,f)=>{const y=this.services.backendConnector.state[`${o}|${f}`];return y===-1||y===0||y===2};if(t.precheck){const o=t.precheck(this,l);if(o!==void 0)return o}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||l(r,e)&&(!i||l(s,e)))}loadNamespaces(e,t){const r=sv();return this.options.ns?(Io(e)&&(e=[e]),e.forEach(i=>{this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}),this.loadResources(i=>{r.resolve(),t&&t(i)}),r):(t&&t(),Promise.resolve())}loadLanguages(e,t){const r=sv();Io(e)&&(e=[e]);const i=this.options.preload||[],s=e.filter(l=>i.indexOf(l)<0&&this.services.languageUtils.isSupportedCode(l));return s.length?(this.options.preload=i.concat(s),this.loadResources(l=>{r.resolve(),t&&t(l)}),r):(t&&t(),Promise.resolve())}dir(e){var i,s;if(e||(e=this.resolvedLanguage||(((i=this.languages)==null?void 0:i.length)>0?this.languages[0]:this.language)),!e)return"rtl";const t=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=((s=this.services)==null?void 0:s.languageUtils)||new g8(_8());return t.indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return new Xv(e,t)}cloneInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:P_;const r=e.forkResourceStore;r&&delete e.forkResourceStore;const i={...this.options,...e,isClone:!0},s=new Xv(i);if((e.debug!==void 0||e.prefix!==void 0)&&(s.logger=s.logger.clone(e)),["store","services","language"].forEach(o=>{s[o]=this[o]}),s.services={...this.services},s.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},r){const o=Object.keys(this.store.data).reduce((f,y)=>(f[y]={...this.store.data[y]},Object.keys(f[y]).reduce((x,B)=>(x[B]={...f[y][B]},x),{})),{});s.store=new f8(o,i),s.services.resourceStore=s.store}return s.translator=new Ub(s.services,i),s.translator.on("*",function(o){for(var f=arguments.length,y=new Array(f>1?f-1:0),x=1;x<f;x++)y[x-1]=arguments[x];s.emit(o,...y)}),s.init(i,t),s.translator.options=i,s.translator.backendConnector.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},s}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const zc=Xv.createInstance();zc.createInstance=Xv.createInstance;zc.createInstance;zc.dir;zc.init;zc.loadResources;zc.reloadResources;zc.use;zc.changeLanguage;zc.getFixedT;zc.t;zc.exists;zc.setDefaultNamespace;zc.hasLoadedNamespace;zc.loadNamespaces;zc.loadLanguages;const{slice:CW,forEach:_W}=[];function bW(n){return _W.call(CW.call(arguments,1),e=>{if(e)for(const t in e)n[t]===void 0&&(n[t]=e[t])}),n}const x8=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,xW=function(n,e){const r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},i=encodeURIComponent(e);let s=`${n}=${i}`;if(r.maxAge>0){const l=r.maxAge-0;if(Number.isNaN(l))throw new Error("maxAge should be a Number");s+=`; Max-Age=${Math.floor(l)}`}if(r.domain){if(!x8.test(r.domain))throw new TypeError("option domain is invalid");s+=`; Domain=${r.domain}`}if(r.path){if(!x8.test(r.path))throw new TypeError("option path is invalid");s+=`; Path=${r.path}`}if(r.expires){if(typeof r.expires.toUTCString!="function")throw new TypeError("option expires is invalid");s+=`; Expires=${r.expires.toUTCString()}`}if(r.httpOnly&&(s+="; HttpOnly"),r.secure&&(s+="; Secure"),r.sameSite)switch(typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite){case!0:s+="; SameSite=Strict";break;case"lax":s+="; SameSite=Lax";break;case"strict":s+="; SameSite=Strict";break;case"none":s+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return s},M8={create(n,e,t,r){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};t&&(i.expires=new Date,i.expires.setTime(i.expires.getTime()+t*60*1e3)),r&&(i.domain=r),document.cookie=xW(n,encodeURIComponent(e),i)},read(n){const e=`${n}=`,t=document.cookie.split(";");for(let r=0;r<t.length;r++){let i=t[r];for(;i.charAt(0)===" ";)i=i.substring(1,i.length);if(i.indexOf(e)===0)return i.substring(e.length,i.length)}return null},remove(n){this.create(n,"",-1)}};var MW={name:"cookie",lookup(n){let{lookupCookie:e}=n;if(e&&typeof document<"u")return M8.read(e)||void 0},cacheUserLanguage(n,e){let{lookupCookie:t,cookieMinutes:r,cookieDomain:i,cookieOptions:s}=e;t&&typeof document<"u"&&M8.create(t,n,r,i,s)}},wW={name:"querystring",lookup(n){var r;let{lookupQuerystring:e}=n,t;if(typeof window<"u"){let{search:i}=window.location;!window.location.search&&((r=window.location.hash)==null?void 0:r.indexOf("?"))>-1&&(i=window.location.hash.substring(window.location.hash.indexOf("?")));const l=i.substring(1).split("&");for(let o=0;o<l.length;o++){const f=l[o].indexOf("=");f>0&&l[o].substring(0,f)===e&&(t=l[o].substring(f+1))}}return t}};let p1=null;const w8=()=>{if(p1!==null)return p1;try{if(p1=typeof window<"u"&&window.localStorage!==null,!p1)return!1;const n="i18next.translate.boo";window.localStorage.setItem(n,"foo"),window.localStorage.removeItem(n)}catch{p1=!1}return p1};var SW={name:"localStorage",lookup(n){let{lookupLocalStorage:e}=n;if(e&&w8())return window.localStorage.getItem(e)||void 0},cacheUserLanguage(n,e){let{lookupLocalStorage:t}=e;t&&w8()&&window.localStorage.setItem(t,n)}};let m1=null;const S8=()=>{if(m1!==null)return m1;try{if(m1=typeof window<"u"&&window.sessionStorage!==null,!m1)return!1;const n="i18next.translate.boo";window.sessionStorage.setItem(n,"foo"),window.sessionStorage.removeItem(n)}catch{m1=!1}return m1};var EW={name:"sessionStorage",lookup(n){let{lookupSessionStorage:e}=n;if(e&&S8())return window.sessionStorage.getItem(e)||void 0},cacheUserLanguage(n,e){let{lookupSessionStorage:t}=e;t&&S8()&&window.sessionStorage.setItem(t,n)}},BW={name:"navigator",lookup(n){const e=[];if(typeof navigator<"u"){const{languages:t,userLanguage:r,language:i}=navigator;if(t)for(let s=0;s<t.length;s++)e.push(t[s]);r&&e.push(r),i&&e.push(i)}return e.length>0?e:void 0}},OW={name:"htmlTag",lookup(n){let{htmlTag:e}=n,t;const r=e||(typeof document<"u"?document.documentElement:null);return r&&typeof r.getAttribute=="function"&&(t=r.getAttribute("lang")),t}},IW={name:"path",lookup(n){var i;let{lookupFromPathIndex:e}=n;if(typeof window>"u")return;const t=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(t)?(i=t[typeof e=="number"?e:0])==null?void 0:i.replace("/",""):void 0}},kW={name:"subdomain",lookup(n){var i,s;let{lookupFromSubdomainIndex:e}=n;const t=typeof e=="number"?e+1:1,r=typeof window<"u"&&((s=(i=window.location)==null?void 0:i.hostname)==null?void 0:s.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i));if(r)return r[t]}};let _D=!1;try{document.cookie,_D=!0}catch{}const bD=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];_D||bD.splice(1,1);const TW=()=>({order:bD,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:n=>n});class xD{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(e,t)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=e,this.options=bW(t,this.options||{},TW()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=i=>i.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=r,this.addDetector(MW),this.addDetector(wW),this.addDetector(SW),this.addDetector(EW),this.addDetector(BW),this.addDetector(OW),this.addDetector(IW),this.addDetector(kW)}addDetector(e){return this.detectors[e.name]=e,this}detect(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,t=[];return e.forEach(r=>{if(this.detectors[r]){let i=this.detectors[r].lookup(this.options);i&&typeof i=="string"&&(i=[i]),i&&(t=t.concat(i))}}),t=t.map(r=>this.options.convertDetectedLanguage(r)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?t:t.length>0?t[0]:null}cacheUserLanguage(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;t&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||t.forEach(r=>{this.detectors[r]&&this.detectors[r].cacheUserLanguage(e,this.options)}))}}xD.type="languageDetector";var PW=function(e){return{type:"backend",init:function(r,i,s){},read:function(r,i,s){if(typeof e=="function"){if(e.length<3){try{var l=e(r,i);l&&typeof l.then=="function"?l.then(function(o){return s(null,o&&o.default||o)}).catch(s):s(null,l)}catch(o){s(o)}return}e(r,i,s);return}s(null,e[r]&&e[r][i])}}},_3,E8;function KW(){return E8||(E8=1,_3={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),_3}var RW=KW();const DW=fl(RW);var FW=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function B8(n){var e={type:"tag",name:"",voidElement:!1,attrs:{},children:[]},t=n.match(/<\/?([^\s]+?)[/\s>]/);if(t&&(e.name=t[1],(DW[t[1]]||n.charAt(n.length-2)==="/")&&(e.voidElement=!0),e.name.startsWith("!--"))){var r=n.indexOf("-->");return{type:"comment",comment:r!==-1?n.slice(4,r):""}}for(var i=new RegExp(FW),s=null;(s=i.exec(n))!==null;)if(s[0].trim())if(s[1]){var l=s[1].trim(),o=[l,""];l.indexOf("=")>-1&&(o=l.split("=")),e.attrs[o[0]]=o[1],i.lastIndex--}else s[2]&&(e.attrs[s[2]]=s[3].trim().substring(1,s[3].length-1));return e}var LW=/<[a-zA-Z0-9\-\!\/](?:"[^"]*"|'[^']*'|[^'">])*>/g,UW=/^\s*$/,zW=Object.create(null);function MD(n,e){switch(e.type){case"text":return n+e.content;case"tag":return n+="<"+e.name+(e.attrs?function(t){var r=[];for(var i in t)r.push(i+'="'+t[i]+'"');return r.length?" "+r.join(" "):""}(e.attrs):"")+(e.voidElement?"/>":">"),e.voidElement?n:n+e.children.reduce(MD,"")+"</"+e.name+">";case"comment":return n+"<!--"+e.comment+"-->"}}var jW={parse:function(n,e){e||(e={}),e.components||(e.components=zW);var t,r=[],i=[],s=-1,l=!1;if(n.indexOf("<")!==0){var o=n.indexOf("<");r.push({type:"text",content:o===-1?n:n.substring(0,o)})}return n.replace(LW,function(f,y){if(l){if(f!=="</"+t.name+">")return;l=!1}var x,B=f.charAt(1)!=="/",O=f.startsWith("<!--"),P=y+f.length,U=n.charAt(P);if(O){var j=B8(f);return s<0?(r.push(j),r):((x=i[s]).children.push(j),r)}if(B&&(s++,(t=B8(f)).type==="tag"&&e.components[t.name]&&(t.type="component",l=!0),t.voidElement||l||!U||U==="<"||t.children.push({type:"text",content:n.slice(P,n.indexOf("<",P))}),s===0&&r.push(t),(x=i[s-1])&&x.children.push(t),i[s]=t),(!B||t.voidElement)&&(s>-1&&(t.voidElement||t.name===f.slice(2,-1))&&(s--,t=s===-1?r:i[s]),!l&&U!=="<"&&U)){x=s===-1?r:i[s].children;var N=n.indexOf("<",P),Y=n.slice(P,N===-1?void 0:N);UW.test(Y)&&(Y=" "),(N>-1&&s+x.length>=0||Y!==" ")&&x.push({type:"text",content:Y})}}),r},stringify:function(n){return n.reduce(function(e,t){return e+MD("",t)},"")}};const _b=(n,e,t,r)=>{var s,l,o,f;const i=[t,{code:e,...r||{}}];if((l=(s=n==null?void 0:n.services)==null?void 0:s.logger)!=null&&l.forward)return n.services.logger.forward(i,"warn","react-i18next::",!0);qh(i[0])&&(i[0]=`react-i18next:: ${i[0]}`),(f=(o=n==null?void 0:n.services)==null?void 0:o.logger)!=null&&f.warn?n.services.logger.warn(...i):console!=null&&console.warn&&console.warn(...i)},O8={},Jv=(n,e,t,r)=>{qh(t)&&O8[t]||(qh(t)&&(O8[t]=new Date),_b(n,e,t,r))},wD=(n,e)=>()=>{if(n.isInitialized)e();else{const t=()=>{setTimeout(()=>{n.off("initialized",t)},0),e()};n.on("initialized",t)}},xE=(n,e,t)=>{n.loadNamespaces(e,wD(n,t))},I8=(n,e,t,r)=>{if(qh(t)&&(t=[t]),n.options.preload&&n.options.preload.indexOf(e)>-1)return xE(n,t,r);t.forEach(i=>{n.options.ns.indexOf(i)<0&&n.options.ns.push(i)}),n.loadLanguages(e,wD(n,r))},NW=(n,e,t={})=>!e.languages||!e.languages.length?(Jv(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(n,{lng:t.lng,precheck:(r,i)=>{var s;if(((s=t.bindI18n)==null?void 0:s.indexOf("languageChanging"))>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!i(r.isLanguageChangingTo,n))return!1}}),WW=n=>n.displayName||n.name||(qh(n)&&n.length>0?n:"Unknown"),qh=n=>typeof n=="string",bg=n=>typeof n=="object"&&n!==null,GW=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,QW={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},YW=n=>QW[n],qW=n=>n.replace(GW,YW);let ME={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:qW};const VW=(n={})=>{ME={...ME,...n}},SD=()=>ME;let ED;const $W=n=>{ED=n},D6=()=>ED,b3=(n,e)=>{var r;if(!n)return!1;const t=((r=n.props)==null?void 0:r.children)??n.children;return e?t.length>0:!!t},x3=n=>{var t,r;if(!n)return[];const e=((t=n.props)==null?void 0:t.children)??n.children;return(r=n.props)!=null&&r.i18nIsDynamicList?ey(e):e},HW=n=>Array.isArray(n)&&n.every(ci.isValidElement),ey=n=>Array.isArray(n)?n:[n],ZW=(n,e)=>{const t={...e};return t.props=Object.assign(n.props,e.props),t},BD=(n,e,t,r)=>{if(!n)return"";let i="";const s=ey(n),l=e!=null&&e.transSupportBasicHtmlNodes?e.transKeepBasicHtmlNodesFor??[]:[];return s.forEach((o,f)=>{if(qh(o)){i+=`${o}`;return}if(ci.isValidElement(o)){const{props:y,type:x}=o,B=Object.keys(y).length,O=l.indexOf(x)>-1,P=y.children;if(!P&&O&&!B){i+=`<${x}/>`;return}if(!P&&(!O||B)||y.i18nIsDynamicList){i+=`<${f}></${f}>`;return}if(O&&B===1&&qh(P)){i+=`<${x}>${P}</${x}>`;return}const U=BD(P,e,t,r);i+=`<${f}>${U}</${f}>`;return}if(o===null){_b(t,"TRANS_NULL_VALUE","Passed in a null value as child",{i18nKey:r});return}if(bg(o)){const{format:y,...x}=o,B=Object.keys(x);if(B.length===1){const O=y?`${B[0]}, ${y}`:B[0];i+=`{{${O}}}`;return}_b(t,"TRANS_INVALID_OBJ","Invalid child - Object should only have keys {{ value, format }} (format is optional).",{i18nKey:r,child:o});return}_b(t,"TRANS_INVALID_VAR","Passed in a variable like {number} - pass variables for interpolation as full objects like {{number}}.",{i18nKey:r,child:o})}),i},XW=(n,e,t,r,i,s)=>{if(e==="")return[];const l=r.transKeepBasicHtmlNodesFor||[],o=e&&new RegExp(l.map(N=>`<${N}`).join("|")).test(e);if(!n&&!o&&!s)return[e];const f={},y=N=>{ey(N).forEach(H=>{qh(H)||(b3(H)?y(x3(H)):bg(H)&&!ci.isValidElement(H)&&Object.assign(f,H))})};y(n);const x=jW.parse(`<0>${e}</0>`),B={...f,...i},O=(N,Y,H)=>{var V;const se=x3(N),re=U(se,Y.children,H);return HW(se)&&re.length===0||(V=N.props)!=null&&V.i18nIsDynamicList?se:re},P=(N,Y,H,se,re)=>{N.dummy?(N.children=Y,H.push(ci.cloneElement(N,{key:se},re?void 0:Y))):H.push(...ci.Children.map([N],V=>{const ne={...V.props};return delete ne.i18nIsDynamicList,ci.createElement(V.type,{...ne,key:se,ref:V.ref},re?null:Y)}))},U=(N,Y,H)=>{const se=ey(N);return ey(Y).reduce((V,ne,G)=>{var he,fe;const oe=((fe=(he=ne.children)==null?void 0:he[0])==null?void 0:fe.content)&&t.services.interpolator.interpolate(ne.children[0].content,B,t.language);if(ne.type==="tag"){let Ee=se[parseInt(ne.name,10)];H.length===1&&!Ee&&(Ee=H[0][ne.name]),Ee||(Ee={});const me=Object.keys(ne.attrs).length!==0?ZW({props:ne.attrs},Ee):Ee,Se=ci.isValidElement(me),Ke=Se&&b3(ne,!0)&&!ne.voidElement,xe=o&&bg(me)&&me.dummy&&!Se,at=bg(n)&&Object.hasOwnProperty.call(n,ne.name);if(qh(me)){const Ze=t.services.interpolator.interpolate(me,B,t.language);V.push(Ze)}else if(b3(me)||Ke){const Ze=O(me,ne,H);P(me,Ze,V,G)}else if(xe){const Ze=U(se,ne.children,H);P(me,Ze,V,G)}else if(Number.isNaN(parseFloat(ne.name)))if(at){const Ze=O(me,ne,H);P(me,Ze,V,G,ne.voidElement)}else if(r.transSupportBasicHtmlNodes&&l.indexOf(ne.name)>-1)if(ne.voidElement)V.push(ci.createElement(ne.name,{key:`${ne.name}-${G}`}));else{const Ze=U(se,ne.children,H);V.push(ci.createElement(ne.name,{key:`${ne.name}-${G}`},Ze))}else if(ne.voidElement)V.push(`<${ne.name} />`);else{const Ze=U(se,ne.children,H);V.push(`<${ne.name}>${Ze}</${ne.name}>`)}else if(bg(me)&&!Se){const Ze=ne.children[0]?oe:null;Ze&&V.push(Ze)}else P(me,oe,V,G,ne.children.length!==1||!oe)}else if(ne.type==="text"){const Ee=r.transWrapTextNodes,me=s?r.unescape(t.services.interpolator.interpolate(ne.content,B,t.language)):t.services.interpolator.interpolate(ne.content,B,t.language);Ee?V.push(ci.createElement(Ee,{key:`${ne.name}-${G}`},me)):V.push(me)}return V},[])},j=U([{dummy:!0,children:n||[]}],x,ey(n||[]));return x3(j[0])},OD=(n,e,t)=>{const r=n.key||e,i=ci.cloneElement(n,{key:r});if(!i.props||!i.props.children||t.indexOf(`${e}/>`)<0&&t.indexOf(`${e} />`)<0)return i;function s(){return ci.createElement(ci.Fragment,null,i)}return ci.createElement(s,{key:r})},JW=(n,e)=>n.map((t,r)=>OD(t,r,e)),eG=(n,e)=>{const t={};return Object.keys(n).forEach(r=>{Object.assign(t,{[r]:OD(n[r],r,e)})}),t},tG=(n,e,t,r)=>n?Array.isArray(n)?JW(n,e):bg(n)?eG(n,e):(Jv(t,"TRANS_INVALID_COMPONENTS",'<Trans /> "components" prop expects an object or array',{i18nKey:r}),null):null;function nG({children:n,count:e,parent:t,i18nKey:r,context:i,tOptions:s={},values:l,defaults:o,components:f,ns:y,i18n:x,t:B,shouldUnescape:O,...P}){var me,Se,Ke,xe,at,Ze;const U=x||D6();if(!U)return Jv(U,"NO_I18NEXT_INSTANCE","Trans: You need to pass in an i18next instance using i18nextReactModule",{i18nKey:r}),n;const j=B||U.t.bind(U)||(Je=>Je),N={...SD(),...(me=U.options)==null?void 0:me.react};let Y=y||j.ns||((Se=U.options)==null?void 0:Se.defaultNS);Y=qh(Y)?[Y]:Y||["translation"];const H=BD(n,N,U,r),se=o||H||N.transEmptyNodeValue||r,{hashTransKey:re}=N,V=r||(re?re(H||se):H||se);(xe=(Ke=U.options)==null?void 0:Ke.interpolation)!=null&&xe.defaultVariables&&(l=l&&Object.keys(l).length>0?{...l,...U.options.interpolation.defaultVariables}:{...U.options.interpolation.defaultVariables});const ne=l||e!==void 0&&!((Ze=(at=U.options)==null?void 0:at.interpolation)!=null&&Ze.alwaysFormat)||!n?s.interpolation:{interpolation:{...s.interpolation,prefix:"#$?",suffix:"?$#"}},G={...s,context:i||s.context,count:e,...l,...ne,defaultValue:se,ns:Y},oe=V?j(V,G):se,he=tG(f,oe,U,r),fe=XW(he||n,oe,U,N,G,O),Ee=t??N.defaultTransParent;return Ee?ci.createElement(Ee,P,fe):fe}const rG={type:"3rdParty",init(n){VW(n.options.react),$W(n)}},ID=ci.createContext();class iG{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(t=>{this.usedNamespaces[t]||(this.usedNamespaces[t]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}function R0({children:n,count:e,parent:t,i18nKey:r,context:i,tOptions:s={},values:l,defaults:o,components:f,ns:y,i18n:x,t:B,shouldUnescape:O,...P}){var H;const{i18n:U,defaultNS:j}=ci.useContext(ID)||{},N=x||U||D6(),Y=B||(N==null?void 0:N.t.bind(N));return nG({children:n,count:e,parent:t,i18nKey:r,context:i,tOptions:s,values:l,defaults:o,components:f,ns:y||(Y==null?void 0:Y.ns)||j||((H=N==null?void 0:N.options)==null?void 0:H.defaultNS),i18n:N,t:B,shouldUnescape:O,...P})}const oG=(n,e)=>{const t=ci.useRef();return ci.useEffect(()=>{t.current=n},[n,e]),t.current},kD=(n,e,t,r)=>n.getFixedT(e,t,r),sG=(n,e,t,r)=>ci.useCallback(kD(n,e,t,r),[n,e,t,r]),aG=(n,e={})=>{var re,V,ne,G;const{i18n:t}=e,{i18n:r,defaultNS:i}=ci.useContext(ID)||{},s=t||r||D6();if(s&&!s.reportNamespaces&&(s.reportNamespaces=new iG),!s){Jv(s,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const oe=(fe,Ee)=>qh(Ee)?Ee:bg(Ee)&&qh(Ee.defaultValue)?Ee.defaultValue:Array.isArray(fe)?fe[fe.length-1]:fe,he=[oe,{},!1];return he.t=oe,he.i18n={},he.ready=!1,he}(re=s.options.react)!=null&&re.wait&&Jv(s,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const l={...SD(),...s.options.react,...e},{useSuspense:o,keyPrefix:f}=l;let y=i||((V=s.options)==null?void 0:V.defaultNS);y=qh(y)?[y]:y||["translation"],(G=(ne=s.reportNamespaces).addUsedNamespaces)==null||G.call(ne,y);const x=(s.isInitialized||s.initializedStoreOnce)&&y.every(oe=>NW(oe,s,l)),B=sG(s,e.lng||null,l.nsMode==="fallback"?y:y[0],f),O=()=>B,P=()=>kD(s,e.lng||null,l.nsMode==="fallback"?y:y[0],f),[U,j]=ci.useState(O);let N=y.join();e.lng&&(N=`${e.lng}${N}`);const Y=oG(N),H=ci.useRef(!0);ci.useEffect(()=>{const{bindI18n:oe,bindI18nStore:he}=l;H.current=!0,!x&&!o&&(e.lng?I8(s,e.lng,y,()=>{H.current&&j(P)}):xE(s,y,()=>{H.current&&j(P)})),x&&Y&&Y!==N&&H.current&&j(P);const fe=()=>{H.current&&j(P)};return oe&&(s==null||s.on(oe,fe)),he&&(s==null||s.store.on(he,fe)),()=>{H.current=!1,s&&(oe==null||oe.split(" ").forEach(Ee=>s.off(Ee,fe))),he&&s&&he.split(" ").forEach(Ee=>s.store.off(Ee,fe))}},[s,N]),ci.useEffect(()=>{H.current&&x&&j(O)},[s,f,x]);const se=[U,s,x];if(se.t=U,se.i18n=s,se.ready=x,x||!x&&!o)return se;throw new Promise(oe=>{e.lng?I8(s,e.lng,y,()=>oe()):xE(s,y,()=>oe())})},zs=(n,e={})=>function(r){function i({forwardedRef:l,...o}){const[f,y,x]=aG(n,{...o,keyPrefix:e.keyPrefix}),B={...o,t:f,i18n:y,tReady:x};return e.withRef&&l?B.ref=l:!e.withRef&&l&&(B.forwardedRef=l),ci.createElement(r,B)}i.displayName=`withI18nextTranslation(${WW(r)})`,i.WrappedComponent=r;const s=(l,o)=>ci.createElement(i,Object.assign({},l,{forwardedRef:o}));return e.withRef?ci.forwardRef(s):i};function Va(){var n="/home/runner/work/maputnik/maputnik/src/i18n.ts",e="f69d9d8f41edfbc571efe934ba014df41eed434c",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/i18n.ts",statementMap:{0:{start:{line:5,column:34},end:{line:13,column:1}},1:{start:{line:14,column:0},end:{line:40,column:3}},2:{start:{line:16,column:4},end:{line:18,column:5}},3:{start:{line:17,column:6},end:{line:17,column:16}},4:{start:{line:19,column:4},end:{line:19,column:593}},5:{start:{line:19,column:119},end:{line:19,column:158}},6:{start:{line:19,column:198},end:{line:19,column:237}},7:{start:{line:19,column:277},end:{line:19,column:316}},8:{start:{line:19,column:356},end:{line:19,column:395}},9:{start:{line:19,column:435},end:{line:19,column:474}},10:{start:{line:19,column:514},end:{line:19,column:553}},11:{start:{line:35,column:4},end:{line:37,column:5}},12:{start:{line:36,column:6},end:{line:36,column:13}},13:{start:{line:38,column:4},end:{line:38,column:77}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:15,column:21},end:{line:15,column:22}},loc:{start:{line:15,column:35},end:{line:20,column:3}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:19,column:113},end:{line:19,column:114}},loc:{start:{line:19,column:119},end:{line:19,column:158}},line:19},2:{name:"(anonymous_2)",decl:{start:{line:19,column:192},end:{line:19,column:193}},loc:{start:{line:19,column:198},end:{line:19,column:237}},line:19},3:{name:"(anonymous_3)",decl:{start:{line:19,column:271},end:{line:19,column:272}},loc:{start:{line:19,column:277},end:{line:19,column:316}},line:19},4:{name:"(anonymous_4)",decl:{start:{line:19,column:350},end:{line:19,column:351}},loc:{start:{line:19,column:356},end:{line:19,column:395}},line:19},5:{name:"(anonymous_5)",decl:{start:{line:19,column:429},end:{line:19,column:430}},loc:{start:{line:19,column:435},end:{line:19,column:474}},line:19},6:{name:"(anonymous_6)",decl:{start:{line:19,column:508},end:{line:19,column:509}},loc:{start:{line:19,column:514},end:{line:19,column:553}},line:19},7:{name:"(anonymous_7)",decl:{start:{line:34,column:21},end:{line:34,column:22}},loc:{start:{line:34,column:41},end:{line:39,column:3}},line:34}},branchMap:{0:{loc:{start:{line:16,column:4},end:{line:18,column:5}},type:"if",locations:[{start:{line:16,column:4},end:{line:18,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:16},1:{loc:{start:{line:35,column:4},end:{line:37,column:5}},type:"if",locations:[{start:{line:35,column:4},end:{line:37,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:35}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/i18n.ts"],names:[],mappings:"AAAA,MAAA,CAAA,oCAAA,CAAA,IAAA,CAAA,CAAA,CAAA,IAAA,CAAA,OAAA,CAAA,MAAA,CAAA,MAAA,CAAA,EAAA,CAAA,CAAA,MAAA,CAAO,IAAU,CAAA,IAAA,CAAA,CAAA,OAAA,CAAA;AACjB,MAAA,CAAO,QAAc,CAAA,IAAA,CAAA,CAAA,OAAA,CAAA,OAAA,CAAA,gBAAA,CAAA;AACrB,MAAA,CAAO,kBAAwB,CAAA,IAAA,CAAA,CAAA,OAAA,CAAA,SAAA,CAAA,EAAA,CAAA,OAAA,CAAA;AAC/B,MAAA,CAAA,CAAA,CAAS,gBAAwB,CAAA,CAAA,CAAA,IAAA,CAAA,CAAA,KAAA,CAAA,OAAA,CAAA;AAE1B,MAAA,CAAA,KAAA,CAAM,kBAAqB,CAAA,CAAA,CAAA;AAAA,CAAA,CAChC,CAAM,EAAA,CAAA,CAAA,CAAA,CAAA,OAAA,CAAA;AAAA,CAAA,CACN,CAAM,EAAA,CAAA,CAAA,CAAA,CAAA,OAAA,CAAA;AAAA,CAAA,CACN,CAAM,EAAA,CAAA,CAAA,CAAA,CAAA,IAAA,CAAA,GAAA,CAAA;AAAA,CAAA,CACN,CAAM,EAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;AAAA,CAAA,CACN,CAAM,EAAA,CAAA,CAAA,CAAA,CAAA,QAAA,CAAA;AAAA,CAAA,CACN,CAAM,EAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;AAAA,CAAA,CACN,CAAM,EAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;AACR,CAAA;AAEA,IACG,CAAA,GAAA,CAAI,QAAQ,CACZ,CAAA,GAAA;AAAA,CACC,CAAA,kBAAA,CAAmB,CAAC,IAAA,CAAA,CAAc,EAAe,CAAA,CAAA,CAAA,CAAA,CAAA;AAC/C,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,CAAI,SAAS,CAAM,EAAA,CAAA,CAAA,CAAA;AAEjB,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,MAAA,CAAO,CAAC,CAAA;AAAA,CACV,CAAA,CAAA,CAAA;AACA,CAAA,CAAA,CAAA,CAAA,MAAA,CAAO,oCAA8B,CAAA,CAAA,0fAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,OAAA,CAAA,CAAA,CAAA,IAAA,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,CAAA,IAAA,CAAA,CAAA,CAAA,CAAA,CAAA;AAAA,CAAA,CACvC,CAAC;AACH,CACC,CAAA,GAAA,CAAI,gBAAgB,CAAA,CACpB,IAAK,CAAA;AAAA,CACJ,CAAA,aAAA,CAAA,CAAe,MAAO,CAAA,IAAA,CAAK,kBAAkB,CAAA;AAAA,CAAA,CAC7C,YAAc,CAAA,CAAA,KAAA;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,EAAA,CAAA,GAAA,CAAA,GAAA,CAAA,IAAA,CAAA,EAAA,CAAA,IAAA,CAAA,QAAA,CAAA;AAAA,CAAA,CACd,WAAa,CAAA,CAAA,KAAA;AAAA,CAAA,CACb,aAAe,CAAA,CAAA;AAAA,CAAA,CAAA,CAAA,CACb,WAAa,CAAA,CAAA;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,KAAA,CAAA,OAAA,CAAA,OAAA,CAAA,GAAA,CAAA;AAAA,CACf,CAAA,CAAA;AAAA,CAAA,CACA,WAAa,CAAA,CAAA,IAAA;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,IAAA,CAAA,KAAA,CAAA,EAAA,CAAA,EAAA,CAAA,GAAA,CAAA,GAAA,CAAA,iBAAA,CAAA,EAAA,CAAA;AAAA,CAAA,CACb,WAAa,CAAA,CAAA,KAAA;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,GAAA,CAAA,GAAA,CAAA,QAAA,CAAA,EAAA,CAAA,KAAA,CAAA,EAAA,CAAA,EAAA,CAAA,GAAA,CAAA,GAAA,CAAA,GAAA,CAAA,OAAA,CAAA,QAAA,CAAA,EAAA,CAAA,GAAA,CAAA;AAAA,CAAA,CACb,iBAAmB,CAAA,CAAA,CAAC,IAAM,CAAA,CAAA,GAAA,CAAA,CAAK,GAAQ,CAAA,CAAA,CAAA,CAAA,CAAA;AACrC,CAAI,CAAA,CAAA,CAAA,EAAA,CAAA,CAAA,IAAA,CAAK,CAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAM,CAAM,EAAA,CAAA,CAAA,CAAA;AAAE,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,MAAA;AAAA,CAAQ,CAAA,CAAA,CAAA;AAChC,CAAQ,CAAA,CAAA,CAAA,OAAA,CAAA,IAAA,CAAK,4BAA4B,GAAG,CAAA,CAAA,CAAA,EAAA,CAAA,CAAA,CAAA,CAAS,KAAK,IAAK,CAAA,CAAA,CAAA,CAAA,CAAI,CAAC,CAAG,CAAA,CAAA,CAAA;AAAA,CACzE,CAAA;AACF,CAAC,CAAA;AAEH,MAAe,CAAA,OAAA,CAAA,IAAA;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f69d9d8f41edfbc571efe934ba014df41eed434c"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Va=function(){return l},l}Va();const TD=(Va().s[0]++,{de:"Deutsch",en:"English",fr:"Franais",he:"",it:"Italiano",ja:"",zh:""});Va().s[1]++;zc.use(xD).use(PW((n,e)=>(Va().f[0]++,Va().s[2]++,n==="en"?(Va().b[0][0]++,Va().s[3]++,{}):(Va().b[0][1]++,Va().s[4]++,tW(Object.assign({"./locales/de/translation.json":()=>(Va().f[1]++,Va().s[5]++,d1(()=>import("./translation-BA-hEPLm.js"),[])),"./locales/fr/translation.json":()=>(Va().f[2]++,Va().s[6]++,d1(()=>import("./translation-J1EAmmGD.js"),[])),"./locales/he/translation.json":()=>(Va().f[3]++,Va().s[7]++,d1(()=>import("./translation-B80Cngny.js"),[])),"./locales/it/translation.json":()=>(Va().f[4]++,Va().s[8]++,d1(()=>import("./translation-Ckdsp6Ku.js"),[])),"./locales/ja/translation.json":()=>(Va().f[5]++,Va().s[9]++,d1(()=>import("./translation-C8OpQe1w.js"),[])),"./locales/zh/translation.json":()=>(Va().f[6]++,Va().s[10]++,d1(()=>import("./translation-zqWUd59b.js"),[]))}),`./locales/${n}/${e}.json`,4))))).use(rG).init({supportedLngs:Object.keys(TD),keySeparator:!1,nsSeparator:!1,interpolation:{escapeValue:!1},saveMissing:!0,fallbackLng:!1,missingKeyHandler:(n,e,t)=>{if(Va().f[7]++,Va().s[11]++,n[0]==="en"){Va().b[1][0]++,Va().s[12]++;return}else Va().b[1][1]++;Va().s[13]++,console.warn(`Missing translation for "${t}" in "${n.join(", ")}"`)}});var K_={exports:{}},k8;function lG(){return k8||(k8=1,function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var t=["constructor","render","componentWillMount","componentDidMount","componentWillReceiveProps","shouldComponentUpdate","componentWillUpdate","componentDidUpdate","componentWillUnmount"],r=[];function i(l){if(l===void 0){console.error("Autobind error: No context provided.");return}var o=Object.getPrototypeOf(l);arguments.length>1?r=Array.prototype.slice.call(arguments,1):r=Object.getOwnPropertyNames(o),r.forEach(function(f){var y=Object.getOwnPropertyDescriptor(o,f);if(y===void 0){console.warn('Autobind: "'+f+'" method not found in class.');return}t.indexOf(f)!==-1||typeof y.value!="function"||Object.defineProperty(o,f,s(o,f,y))})}function s(l,o,f){var y=f.value;return{configurable:!0,get:function(){if(this===l||this.hasOwnProperty(o))return y;var B=y.bind(this);return Object.defineProperty(this,o,{value:B,configurable:!0,writable:!0}),B}}}n.exports=e.default}(K_,K_.exports)),K_.exports}var M3,T8;function uG(){return T8||(T8=1,M3=lG()),M3}var AG=uG();const cG=fl(AG);var Cv={exports:{}};Cv.exports;var P8;function dG(){return P8||(P8=1,function(n,e){var t=200,r="__lodash_hash_undefined__",i=9007199254740991,s="[object Arguments]",l="[object Array]",o="[object Boolean]",f="[object Date]",y="[object Error]",x="[object Function]",B="[object GeneratorFunction]",O="[object Map]",P="[object Number]",U="[object Object]",j="[object Promise]",N="[object RegExp]",Y="[object Set]",H="[object String]",se="[object Symbol]",re="[object WeakMap]",V="[object ArrayBuffer]",ne="[object DataView]",G="[object Float32Array]",oe="[object Float64Array]",he="[object Int8Array]",fe="[object Int16Array]",Ee="[object Int32Array]",me="[object Uint8Array]",Se="[object Uint8ClampedArray]",Ke="[object Uint16Array]",xe="[object Uint32Array]",at=/[\\^$.*+?()[\]{}|]/g,Ze=/\w*$/,Je=/^\[object .+?Constructor\]$/,Ne=/^(?:0|[1-9]\d*)$/,we={};we[s]=we[l]=we[V]=we[ne]=we[o]=we[f]=we[G]=we[oe]=we[he]=we[fe]=we[Ee]=we[O]=we[P]=we[U]=we[N]=we[Y]=we[H]=we[se]=we[me]=we[Se]=we[Ke]=we[xe]=!0,we[y]=we[x]=we[re]=!1;var De=typeof window=="object"&&window&&window.Object===Object&&window,He=typeof self=="object"&&self&&self.Object===Object&&self,bt=De||He||Function("return this")(),Yt=e&&!e.nodeType&&e,yt=Yt&&!0&&n&&!n.nodeType&&n,Ft=yt&&yt.exports===Yt;function Pt(ee,Oe){return ee.set(Oe[0],Oe[1]),ee}function Ue(ee,Oe){return ee.add(Oe),ee}function Pe(ee,Oe){for(var st=-1,Vt=ee?ee.length:0;++st<Vt&&Oe(ee[st],st,ee)!==!1;);return ee}function Be(ee,Oe){for(var st=-1,Vt=Oe.length,Er=ee.length;++st<Vt;)ee[Er+st]=Oe[st];return ee}function it(ee,Oe,st,Vt){for(var Er=-1,qn=ee?ee.length:0;++Er<qn;)st=Oe(st,ee[Er],Er,ee);return st}function _t(ee,Oe){for(var st=-1,Vt=Array(ee);++st<ee;)Vt[st]=Oe(st);return Vt}function pt(ee,Oe){return ee==null?void 0:ee[Oe]}function Lt(ee){var Oe=!1;if(ee!=null&&typeof ee.toString!="function")try{Oe=!!(ee+"")}catch{}return Oe}function nn(ee){var Oe=-1,st=Array(ee.size);return ee.forEach(function(Vt,Er){st[++Oe]=[Er,Vt]}),st}function Kt(ee,Oe){return function(st){return ee(Oe(st))}}function vn(ee){var Oe=-1,st=Array(ee.size);return ee.forEach(function(Vt){st[++Oe]=Vt}),st}var Gn=Array.prototype,tn=Function.prototype,dr=Object.prototype,Pn=bt["__core-js_shared__"],pn=function(){var ee=/[^.]+$/.exec(Pn&&Pn.keys&&Pn.keys.IE_PROTO||"");return ee?"Symbol(src)_1."+ee:""}(),$n=tn.toString,lr=dr.hasOwnProperty,vr=dr.toString,Zn=RegExp("^"+$n.call(lr).replace(at,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ge=Ft?bt.Buffer:void 0,ce=bt.Symbol,pe=bt.Uint8Array,nt=Kt(Object.getPrototypeOf,Object),wt=Object.create,Ht=dr.propertyIsEnumerable,sn=Gn.splice,Hn=Object.getOwnPropertySymbols,Ve=Ge?Ge.isBuffer:void 0,J=Kt(Object.keys,Object),ve=oi(bt,"DataView"),p=oi(bt,"Map"),Fe=oi(bt,"Promise"),Qe=oi(bt,"Set"),rt=oi(bt,"WeakMap"),ct=oi(Object,"create"),dt=Oi(ve),qt=Oi(p),Gt=Oi(Fe),zt=Oi(Qe),on=Oi(rt),jt=ce?ce.prototype:void 0,Dn=jt?jt.valueOf:void 0;function rr(ee){var Oe=-1,st=ee?ee.length:0;for(this.clear();++Oe<st;){var Vt=ee[Oe];this.set(Vt[0],Vt[1])}}function Br(){this.__data__=ct?ct(null):{}}function Jn(ee){return this.has(ee)&&delete this.__data__[ee]}function un(ee){var Oe=this.__data__;if(ct){var st=Oe[ee];return st===r?void 0:st}return lr.call(Oe,ee)?Oe[ee]:void 0}function er(ee){var Oe=this.__data__;return ct?Oe[ee]!==void 0:lr.call(Oe,ee)}function fr(ee,Oe){var st=this.__data__;return st[ee]=ct&&Oe===void 0?r:Oe,this}rr.prototype.clear=Br,rr.prototype.delete=Jn,rr.prototype.get=un,rr.prototype.has=er,rr.prototype.set=fr;function Sr(ee){var Oe=-1,st=ee?ee.length:0;for(this.clear();++Oe<st;){var Vt=ee[Oe];this.set(Vt[0],Vt[1])}}function Ur(){this.__data__=[]}function ri(ee){var Oe=this.__data__,st=Ta(Oe,ee);if(st<0)return!1;var Vt=Oe.length-1;return st==Vt?Oe.pop():sn.call(Oe,st,1),!0}function Or(ee){var Oe=this.__data__,st=Ta(Oe,ee);return st<0?void 0:Oe[st][1]}function ka(ee){return Ta(this.__data__,ee)>-1}function Wi(ee,Oe){var st=this.__data__,Vt=Ta(st,ee);return Vt<0?st.push([ee,Oe]):st[Vt][1]=Oe,this}Sr.prototype.clear=Ur,Sr.prototype.delete=ri,Sr.prototype.get=Or,Sr.prototype.has=ka,Sr.prototype.set=Wi;function Bi(ee){var Oe=-1,st=ee?ee.length:0;for(this.clear();++Oe<st;){var Vt=ee[Oe];this.set(Vt[0],Vt[1])}}function eo(){this.__data__={hash:new rr,map:new(p||Sr),string:new rr}}function ws(ee){return Ja(this,ee).delete(ee)}function ko(ee){return Ja(this,ee).get(ee)}function Hi(ee){return Ja(this,ee).has(ee)}function Sl(ee,Oe){return Ja(this,ee).set(ee,Oe),this}Bi.prototype.clear=eo,Bi.prototype.delete=ws,Bi.prototype.get=ko,Bi.prototype.has=Hi,Bi.prototype.set=Sl;function Go(ee){this.__data__=new Sr(ee)}function Za(){this.__data__=new Sr}function Xa(ee){return this.__data__.delete(ee)}function Yi(ee){return this.__data__.get(ee)}function Lu(ee){return this.__data__.has(ee)}function Jl(ee,Oe){var st=this.__data__;if(st instanceof Sr){var Vt=st.__data__;if(!p||Vt.length<t-1)return Vt.push([ee,Oe]),this;st=this.__data__=new Bi(Vt)}return st.set(ee,Oe),this}Go.prototype.clear=Za,Go.prototype.delete=Xa,Go.prototype.get=Yi,Go.prototype.has=Lu,Go.prototype.set=Jl;function wo(ee,Oe){var st=As(ee)||va(ee)?_t(ee.length,String):[],Vt=st.length,Er=!!Vt;for(var qn in ee)lr.call(ee,qn)&&!(Er&&(qn=="length"||Xs(qn,Vt)))&&st.push(qn);return st}function wr(ee,Oe,st){var Vt=ee[Oe];(!(lr.call(ee,Oe)&&ea(Vt,st))||st===void 0&&!(Oe in ee))&&(ee[Oe]=st)}function Ta(ee,Oe){for(var st=ee.length;st--;)if(ea(ee[st][0],Oe))return st;return-1}function Ss(ee,Oe){return ee&&Cs(Oe,Vi(Oe),ee)}function Zs(ee,Oe,st,Vt,Er,qn,si){var di;if(Vt&&(di=qn?Vt(ee,Er,qn,si):Vt(ee)),di!==void 0)return di;if(!qr(ee))return ee;var Ir=As(ee);if(Ir){if(di=Qo(ee),!Oe)return Aa(ee,di)}else{var Pr=$o(ee),pi=Pr==x||Pr==B;if(fo(ee))return ur(ee,Oe);if(Pr==U||Pr==s||pi&&!qn){if(Lt(ee))return qn?ee:{};if(di=js(pi?{}:ee),!Oe)return xi(ee,Ss(di,ee))}else{if(!we[Pr])return qn?ee:{};di=Es(ee,Pr,Zs,Oe)}}si||(si=new Go);var Do=si.get(ee);if(Do)return Do;if(si.set(ee,di),!Ir)var mi=st?uA(ee):Vi(ee);return Pe(mi||ee,function(zr,Co){mi&&(Co=zr,zr=ee[Co]),wr(di,Co,Zs(zr,Oe,st,Vt,Co,ee,si))}),di}function Ye(ee){return qr(ee)?wt(ee):{}}function xt(ee,Oe,st){var Vt=Oe(ee);return As(ee)?Vt:Be(Vt,st(ee))}function Cn(ee){return vr.call(ee)}function Qn(ee){if(!qr(ee)||Au(ee))return!1;var Oe=Uu(ee)||Lt(ee)?Zn:Je;return Oe.test(Oi(ee))}function fn(ee){if(!Ns(ee))return J(ee);var Oe=[];for(var st in Object(ee))lr.call(ee,st)&&st!="constructor"&&Oe.push(st);return Oe}function ur(ee,Oe){if(Oe)return ee.slice();var st=new ee.constructor(ee.length);return ee.copy(st),st}function Di(ee){var Oe=new ee.constructor(ee.byteLength);return new pe(Oe).set(new pe(ee)),Oe}function vo(ee,Oe){var st=Oe?Di(ee.buffer):ee.buffer;return new ee.constructor(st,ee.byteOffset,ee.byteLength)}function rs(ee,Oe,st){var Vt=Oe?st(nn(ee),!0):nn(ee);return it(Vt,Pt,new ee.constructor)}function ua(ee){var Oe=new ee.constructor(ee.source,Ze.exec(ee));return Oe.lastIndex=ee.lastIndex,Oe}function eu(ee,Oe,st){var Vt=Oe?st(vn(ee),!0):vn(ee);return it(Vt,Ue,new ee.constructor)}function ii(ee){return Dn?Object(Dn.call(ee)):{}}function qi(ee,Oe){var st=Oe?Di(ee.buffer):ee.buffer;return new ee.constructor(st,ee.byteOffset,ee.length)}function Aa(ee,Oe){var st=-1,Vt=ee.length;for(Oe||(Oe=Array(Vt));++st<Vt;)Oe[st]=ee[st];return Oe}function Cs(ee,Oe,st,Vt){st||(st={});for(var Er=-1,qn=Oe.length;++Er<qn;){var si=Oe[Er],di=void 0;wr(st,si,di===void 0?ee[si]:di)}return st}function xi(ee,Oe){return Cs(ee,to(ee),Oe)}function uA(ee){return xt(ee,Vi,to)}function Ja(ee,Oe){var st=ee.__data__;return Js(Oe)?st[typeof Oe=="string"?"string":"hash"]:st.map}function oi(ee,Oe){var st=pt(ee,Oe);return Qn(st)?st:void 0}var to=Hn?Kt(Hn,Object):uo,$o=Cn;(ve&&$o(new ve(new ArrayBuffer(1)))!=ne||p&&$o(new p)!=O||Fe&&$o(Fe.resolve())!=j||Qe&&$o(new Qe)!=Y||rt&&$o(new rt)!=re)&&($o=function(ee){var Oe=vr.call(ee),st=Oe==U?ee.constructor:void 0,Vt=st?Oi(st):void 0;if(Vt)switch(Vt){case dt:return ne;case qt:return O;case Gt:return j;case zt:return Y;case on:return re}return Oe});function Qo(ee){var Oe=ee.length,st=ee.constructor(Oe);return Oe&&typeof ee[0]=="string"&&lr.call(ee,"index")&&(st.index=ee.index,st.input=ee.input),st}function js(ee){return typeof ee.constructor=="function"&&!Ns(ee)?Ye(nt(ee)):{}}function Es(ee,Oe,st,Vt){var Er=ee.constructor;switch(Oe){case V:return Di(ee);case o:case f:return new Er(+ee);case ne:return vo(ee,Vt);case G:case oe:case he:case fe:case Ee:case me:case Se:case Ke:case xe:return qi(ee,Vt);case O:return rs(ee,Vt,st);case P:case H:return new Er(ee);case N:return ua(ee);case Y:return eu(ee,Vt,st);case se:return ii(ee)}}function Xs(ee,Oe){return Oe=Oe??i,!!Oe&&(typeof ee=="number"||Ne.test(ee))&&ee>-1&&ee%1==0&&ee<Oe}function Js(ee){var Oe=typeof ee;return Oe=="string"||Oe=="number"||Oe=="symbol"||Oe=="boolean"?ee!=="__proto__":ee===null}function Au(ee){return!!pn&&pn in ee}function Ns(ee){var Oe=ee&&ee.constructor,st=typeof Oe=="function"&&Oe.prototype||dr;return ee===st}function Oi(ee){if(ee!=null){try{return $n.call(ee)}catch{}try{return ee+""}catch{}}return""}function is(ee){return Zs(ee,!0,!0)}function ea(ee,Oe){return ee===Oe||ee!==ee&&Oe!==Oe}function va(ee){return ml(ee)&&lr.call(ee,"callee")&&(!Ht.call(ee,"callee")||vr.call(ee)==s)}var As=Array.isArray;function pl(ee){return ee!=null&&zi(ee.length)&&!Uu(ee)}function ml(ee){return Dl(ee)&&pl(ee)}var fo=Ve||Ki;function Uu(ee){var Oe=qr(ee)?vr.call(ee):"";return Oe==x||Oe==B}function zi(ee){return typeof ee=="number"&&ee>-1&&ee%1==0&&ee<=i}function qr(ee){var Oe=typeof ee;return!!ee&&(Oe=="object"||Oe=="function")}function Dl(ee){return!!ee&&typeof ee=="object"}function Vi(ee){return pl(ee)?wo(ee):fn(ee)}function uo(){return[]}function Ki(){return!1}n.exports=is}(Cv,Cv.exports)),Cv.exports}var hG=dG();const K8=fl(hG);var w3,R8;function fG(){if(R8)return w3;R8=1;var n=NaN,e="[object Symbol]",t=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,s=/^0o[0-7]+$/i,l=parseInt,o=Object.prototype,f=o.toString;function y(j,N,Y){return j===j&&(Y!==void 0&&(j=j<=Y?j:Y),N!==void 0&&(j=j>=N?j:N)),j}function x(j){var N=typeof j;return!!j&&(N=="object"||N=="function")}function B(j){return!!j&&typeof j=="object"}function O(j){return typeof j=="symbol"||B(j)&&f.call(j)==e}function P(j){if(typeof j=="number")return j;if(O(j))return n;if(x(j)){var N=typeof j.valueOf=="function"?j.valueOf():j;j=x(N)?N+"":N}if(typeof j!="string")return j===0?j:+j;j=j.replace(t,"");var Y=i.test(j);return Y||s.test(j)?l(j.slice(2),Y?2:8):r.test(j)?n:+j}function U(j,N,Y){return Y===void 0&&(Y=N,N=void 0),Y!==void 0&&(Y=P(Y),Y=Y===Y?Y:0),N!==void 0&&(N=P(N),N=N===N?N:0),y(P(j),N,Y)}return w3=U,w3}var pG=fG();const D8=fl(pG);var S3={},av={},F8;function mG(){if(F8)return av;F8=1,av.byteLength=o,av.toByteArray=y,av.fromByteArray=O;for(var n=[],e=[],t=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,s=r.length;i<s;++i)n[i]=r[i],e[r.charCodeAt(i)]=i;e[45]=62,e[95]=63;function l(P){var U=P.length;if(U%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var j=P.indexOf("=");j===-1&&(j=U);var N=j===U?0:4-j%4;return[j,N]}function o(P){var U=l(P),j=U[0],N=U[1];return(j+N)*3/4-N}function f(P,U,j){return(U+j)*3/4-j}function y(P){var U,j=l(P),N=j[0],Y=j[1],H=new t(f(P,N,Y)),se=0,re=Y>0?N-4:N,V;for(V=0;V<re;V+=4)U=e[P.charCodeAt(V)]<<18|e[P.charCodeAt(V+1)]<<12|e[P.charCodeAt(V+2)]<<6|e[P.charCodeAt(V+3)],H[se++]=U>>16&255,H[se++]=U>>8&255,H[se++]=U&255;return Y===2&&(U=e[P.charCodeAt(V)]<<2|e[P.charCodeAt(V+1)]>>4,H[se++]=U&255),Y===1&&(U=e[P.charCodeAt(V)]<<10|e[P.charCodeAt(V+1)]<<4|e[P.charCodeAt(V+2)]>>2,H[se++]=U>>8&255,H[se++]=U&255),H}function x(P){return n[P>>18&63]+n[P>>12&63]+n[P>>6&63]+n[P&63]}function B(P,U,j){for(var N,Y=[],H=U;H<j;H+=3)N=(P[H]<<16&16711680)+(P[H+1]<<8&65280)+(P[H+2]&255),Y.push(x(N));return Y.join("")}function O(P){for(var U,j=P.length,N=j%3,Y=[],H=16383,se=0,re=j-N;se<re;se+=H)Y.push(B(P,se,se+H>re?re:se+H));return N===1?(U=P[j-1],Y.push(n[U>>2]+n[U<<4&63]+"==")):N===2&&(U=(P[j-2]<<8)+P[j-1],Y.push(n[U>>10]+n[U>>4&63]+n[U<<2&63]+"=")),Y.join("")}return av}var R_={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var L8;function gG(){return L8||(L8=1,R_.read=function(n,e,t,r,i){var s,l,o=i*8-r-1,f=(1<<o)-1,y=f>>1,x=-7,B=t?i-1:0,O=t?-1:1,P=n[e+B];for(B+=O,s=P&(1<<-x)-1,P>>=-x,x+=o;x>0;s=s*256+n[e+B],B+=O,x-=8);for(l=s&(1<<-x)-1,s>>=-x,x+=r;x>0;l=l*256+n[e+B],B+=O,x-=8);if(s===0)s=1-y;else{if(s===f)return l?NaN:(P?-1:1)*(1/0);l=l+Math.pow(2,r),s=s-y}return(P?-1:1)*l*Math.pow(2,s-r)},R_.write=function(n,e,t,r,i,s){var l,o,f,y=s*8-i-1,x=(1<<y)-1,B=x>>1,O=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,P=r?0:s-1,U=r?1:-1,j=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,l=x):(l=Math.floor(Math.log(e)/Math.LN2),e*(f=Math.pow(2,-l))<1&&(l--,f*=2),l+B>=1?e+=O/f:e+=O*Math.pow(2,1-B),e*f>=2&&(l++,f/=2),l+B>=x?(o=0,l=x):l+B>=1?(o=(e*f-1)*Math.pow(2,i),l=l+B):(o=e*Math.pow(2,B-1)*Math.pow(2,i),l=0));i>=8;n[t+P]=o&255,P+=U,o/=256,i-=8);for(l=l<<i|o,y+=i;y>0;n[t+P]=l&255,P+=U,l/=256,y-=8);n[t+P-U]|=j*128}),R_}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var U8;function yG(){return U8||(U8=1,function(n){const e=mG(),t=gG(),r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=o,n.SlowBuffer=H,n.INSPECT_MAX_BYTES=50;const i=2147483647;n.kMaxLength=i,o.TYPED_ARRAY_SUPPORT=s(),!o.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const Ge=new Uint8Array(1),ce={foo:function(){return 42}};return Object.setPrototypeOf(ce,Uint8Array.prototype),Object.setPrototypeOf(Ge,ce),Ge.foo()===42}catch{return!1}}Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}});function l(Ge){if(Ge>i)throw new RangeError('The value "'+Ge+'" is invalid for option "size"');const ce=new Uint8Array(Ge);return Object.setPrototypeOf(ce,o.prototype),ce}function o(Ge,ce,pe){if(typeof Ge=="number"){if(typeof ce=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return B(Ge)}return f(Ge,ce,pe)}o.poolSize=8192;function f(Ge,ce,pe){if(typeof Ge=="string")return O(Ge,ce);if(ArrayBuffer.isView(Ge))return U(Ge);if(Ge==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Ge);if(pn(Ge,ArrayBuffer)||Ge&&pn(Ge.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(pn(Ge,SharedArrayBuffer)||Ge&&pn(Ge.buffer,SharedArrayBuffer)))return j(Ge,ce,pe);if(typeof Ge=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const nt=Ge.valueOf&&Ge.valueOf();if(nt!=null&&nt!==Ge)return o.from(nt,ce,pe);const wt=N(Ge);if(wt)return wt;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof Ge[Symbol.toPrimitive]=="function")return o.from(Ge[Symbol.toPrimitive]("string"),ce,pe);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Ge)}o.from=function(Ge,ce,pe){return f(Ge,ce,pe)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array);function y(Ge){if(typeof Ge!="number")throw new TypeError('"size" argument must be of type number');if(Ge<0)throw new RangeError('The value "'+Ge+'" is invalid for option "size"')}function x(Ge,ce,pe){return y(Ge),Ge<=0?l(Ge):ce!==void 0?typeof pe=="string"?l(Ge).fill(ce,pe):l(Ge).fill(ce):l(Ge)}o.alloc=function(Ge,ce,pe){return x(Ge,ce,pe)};function B(Ge){return y(Ge),l(Ge<0?0:Y(Ge)|0)}o.allocUnsafe=function(Ge){return B(Ge)},o.allocUnsafeSlow=function(Ge){return B(Ge)};function O(Ge,ce){if((typeof ce!="string"||ce==="")&&(ce="utf8"),!o.isEncoding(ce))throw new TypeError("Unknown encoding: "+ce);const pe=se(Ge,ce)|0;let nt=l(pe);const wt=nt.write(Ge,ce);return wt!==pe&&(nt=nt.slice(0,wt)),nt}function P(Ge){const ce=Ge.length<0?0:Y(Ge.length)|0,pe=l(ce);for(let nt=0;nt<ce;nt+=1)pe[nt]=Ge[nt]&255;return pe}function U(Ge){if(pn(Ge,Uint8Array)){const ce=new Uint8Array(Ge);return j(ce.buffer,ce.byteOffset,ce.byteLength)}return P(Ge)}function j(Ge,ce,pe){if(ce<0||Ge.byteLength<ce)throw new RangeError('"offset" is outside of buffer bounds');if(Ge.byteLength<ce+(pe||0))throw new RangeError('"length" is outside of buffer bounds');let nt;return ce===void 0&&pe===void 0?nt=new Uint8Array(Ge):pe===void 0?nt=new Uint8Array(Ge,ce):nt=new Uint8Array(Ge,ce,pe),Object.setPrototypeOf(nt,o.prototype),nt}function N(Ge){if(o.isBuffer(Ge)){const ce=Y(Ge.length)|0,pe=l(ce);return pe.length===0||Ge.copy(pe,0,0,ce),pe}if(Ge.length!==void 0)return typeof Ge.length!="number"||$n(Ge.length)?l(0):P(Ge);if(Ge.type==="Buffer"&&Array.isArray(Ge.data))return P(Ge.data)}function Y(Ge){if(Ge>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return Ge|0}function H(Ge){return+Ge!=Ge&&(Ge=0),o.alloc(+Ge)}o.isBuffer=function(ce){return ce!=null&&ce._isBuffer===!0&&ce!==o.prototype},o.compare=function(ce,pe){if(pn(ce,Uint8Array)&&(ce=o.from(ce,ce.offset,ce.byteLength)),pn(pe,Uint8Array)&&(pe=o.from(pe,pe.offset,pe.byteLength)),!o.isBuffer(ce)||!o.isBuffer(pe))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(ce===pe)return 0;let nt=ce.length,wt=pe.length;for(let Ht=0,sn=Math.min(nt,wt);Ht<sn;++Ht)if(ce[Ht]!==pe[Ht]){nt=ce[Ht],wt=pe[Ht];break}return nt<wt?-1:wt<nt?1:0},o.isEncoding=function(ce){switch(String(ce).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(ce,pe){if(!Array.isArray(ce))throw new TypeError('"list" argument must be an Array of Buffers');if(ce.length===0)return o.alloc(0);let nt;if(pe===void 0)for(pe=0,nt=0;nt<ce.length;++nt)pe+=ce[nt].length;const wt=o.allocUnsafe(pe);let Ht=0;for(nt=0;nt<ce.length;++nt){let sn=ce[nt];if(pn(sn,Uint8Array))Ht+sn.length>wt.length?(o.isBuffer(sn)||(sn=o.from(sn)),sn.copy(wt,Ht)):Uint8Array.prototype.set.call(wt,sn,Ht);else if(o.isBuffer(sn))sn.copy(wt,Ht);else throw new TypeError('"list" argument must be an Array of Buffers');Ht+=sn.length}return wt};function se(Ge,ce){if(o.isBuffer(Ge))return Ge.length;if(ArrayBuffer.isView(Ge)||pn(Ge,ArrayBuffer))return Ge.byteLength;if(typeof Ge!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof Ge);const pe=Ge.length,nt=arguments.length>2&&arguments[2]===!0;if(!nt&&pe===0)return 0;let wt=!1;for(;;)switch(ce){case"ascii":case"latin1":case"binary":return pe;case"utf8":case"utf-8":return vn(Ge).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return pe*2;case"hex":return pe>>>1;case"base64":return dr(Ge).length;default:if(wt)return nt?-1:vn(Ge).length;ce=(""+ce).toLowerCase(),wt=!0}}o.byteLength=se;function re(Ge,ce,pe){let nt=!1;if((ce===void 0||ce<0)&&(ce=0),ce>this.length||((pe===void 0||pe>this.length)&&(pe=this.length),pe<=0)||(pe>>>=0,ce>>>=0,pe<=ce))return"";for(Ge||(Ge="utf8");;)switch(Ge){case"hex":return Ne(this,ce,pe);case"utf8":case"utf-8":return Ke(this,ce,pe);case"ascii":return Ze(this,ce,pe);case"latin1":case"binary":return Je(this,ce,pe);case"base64":return Se(this,ce,pe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return we(this,ce,pe);default:if(nt)throw new TypeError("Unknown encoding: "+Ge);Ge=(Ge+"").toLowerCase(),nt=!0}}o.prototype._isBuffer=!0;function V(Ge,ce,pe){const nt=Ge[ce];Ge[ce]=Ge[pe],Ge[pe]=nt}o.prototype.swap16=function(){const ce=this.length;if(ce%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let pe=0;pe<ce;pe+=2)V(this,pe,pe+1);return this},o.prototype.swap32=function(){const ce=this.length;if(ce%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let pe=0;pe<ce;pe+=4)V(this,pe,pe+3),V(this,pe+1,pe+2);return this},o.prototype.swap64=function(){const ce=this.length;if(ce%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let pe=0;pe<ce;pe+=8)V(this,pe,pe+7),V(this,pe+1,pe+6),V(this,pe+2,pe+5),V(this,pe+3,pe+4);return this},o.prototype.toString=function(){const ce=this.length;return ce===0?"":arguments.length===0?Ke(this,0,ce):re.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(ce){if(!o.isBuffer(ce))throw new TypeError("Argument must be a Buffer");return this===ce?!0:o.compare(this,ce)===0},o.prototype.inspect=function(){let ce="";const pe=n.INSPECT_MAX_BYTES;return ce=this.toString("hex",0,pe).replace(/(.{2})/g,"$1 ").trim(),this.length>pe&&(ce+=" ... "),"<Buffer "+ce+">"},r&&(o.prototype[r]=o.prototype.inspect),o.prototype.compare=function(ce,pe,nt,wt,Ht){if(pn(ce,Uint8Array)&&(ce=o.from(ce,ce.offset,ce.byteLength)),!o.isBuffer(ce))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof ce);if(pe===void 0&&(pe=0),nt===void 0&&(nt=ce?ce.length:0),wt===void 0&&(wt=0),Ht===void 0&&(Ht=this.length),pe<0||nt>ce.length||wt<0||Ht>this.length)throw new RangeError("out of range index");if(wt>=Ht&&pe>=nt)return 0;if(wt>=Ht)return-1;if(pe>=nt)return 1;if(pe>>>=0,nt>>>=0,wt>>>=0,Ht>>>=0,this===ce)return 0;let sn=Ht-wt,Hn=nt-pe;const Ve=Math.min(sn,Hn),J=this.slice(wt,Ht),ve=ce.slice(pe,nt);for(let p=0;p<Ve;++p)if(J[p]!==ve[p]){sn=J[p],Hn=ve[p];break}return sn<Hn?-1:Hn<sn?1:0};function ne(Ge,ce,pe,nt,wt){if(Ge.length===0)return-1;if(typeof pe=="string"?(nt=pe,pe=0):pe>2147483647?pe=2147483647:pe<-2147483648&&(pe=-2147483648),pe=+pe,$n(pe)&&(pe=wt?0:Ge.length-1),pe<0&&(pe=Ge.length+pe),pe>=Ge.length){if(wt)return-1;pe=Ge.length-1}else if(pe<0)if(wt)pe=0;else return-1;if(typeof ce=="string"&&(ce=o.from(ce,nt)),o.isBuffer(ce))return ce.length===0?-1:G(Ge,ce,pe,nt,wt);if(typeof ce=="number")return ce=ce&255,typeof Uint8Array.prototype.indexOf=="function"?wt?Uint8Array.prototype.indexOf.call(Ge,ce,pe):Uint8Array.prototype.lastIndexOf.call(Ge,ce,pe):G(Ge,[ce],pe,nt,wt);throw new TypeError("val must be string, number or Buffer")}function G(Ge,ce,pe,nt,wt){let Ht=1,sn=Ge.length,Hn=ce.length;if(nt!==void 0&&(nt=String(nt).toLowerCase(),nt==="ucs2"||nt==="ucs-2"||nt==="utf16le"||nt==="utf-16le")){if(Ge.length<2||ce.length<2)return-1;Ht=2,sn/=2,Hn/=2,pe/=2}function Ve(ve,p){return Ht===1?ve[p]:ve.readUInt16BE(p*Ht)}let J;if(wt){let ve=-1;for(J=pe;J<sn;J++)if(Ve(Ge,J)===Ve(ce,ve===-1?0:J-ve)){if(ve===-1&&(ve=J),J-ve+1===Hn)return ve*Ht}else ve!==-1&&(J-=J-ve),ve=-1}else for(pe+Hn>sn&&(pe=sn-Hn),J=pe;J>=0;J--){let ve=!0;for(let p=0;p<Hn;p++)if(Ve(Ge,J+p)!==Ve(ce,p)){ve=!1;break}if(ve)return J}return-1}o.prototype.includes=function(ce,pe,nt){return this.indexOf(ce,pe,nt)!==-1},o.prototype.indexOf=function(ce,pe,nt){return ne(this,ce,pe,nt,!0)},o.prototype.lastIndexOf=function(ce,pe,nt){return ne(this,ce,pe,nt,!1)};function oe(Ge,ce,pe,nt){pe=Number(pe)||0;const wt=Ge.length-pe;nt?(nt=Number(nt),nt>wt&&(nt=wt)):nt=wt;const Ht=ce.length;nt>Ht/2&&(nt=Ht/2);let sn;for(sn=0;sn<nt;++sn){const Hn=parseInt(ce.substr(sn*2,2),16);if($n(Hn))return sn;Ge[pe+sn]=Hn}return sn}function he(Ge,ce,pe,nt){return Pn(vn(ce,Ge.length-pe),Ge,pe,nt)}function fe(Ge,ce,pe,nt){return Pn(Gn(ce),Ge,pe,nt)}function Ee(Ge,ce,pe,nt){return Pn(dr(ce),Ge,pe,nt)}function me(Ge,ce,pe,nt){return Pn(tn(ce,Ge.length-pe),Ge,pe,nt)}o.prototype.write=function(ce,pe,nt,wt){if(pe===void 0)wt="utf8",nt=this.length,pe=0;else if(nt===void 0&&typeof pe=="string")wt=pe,nt=this.length,pe=0;else if(isFinite(pe))pe=pe>>>0,isFinite(nt)?(nt=nt>>>0,wt===void 0&&(wt="utf8")):(wt=nt,nt=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Ht=this.length-pe;if((nt===void 0||nt>Ht)&&(nt=Ht),ce.length>0&&(nt<0||pe<0)||pe>this.length)throw new RangeError("Attempt to write outside buffer bounds");wt||(wt="utf8");let sn=!1;for(;;)switch(wt){case"hex":return oe(this,ce,pe,nt);case"utf8":case"utf-8":return he(this,ce,pe,nt);case"ascii":case"latin1":case"binary":return fe(this,ce,pe,nt);case"base64":return Ee(this,ce,pe,nt);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return me(this,ce,pe,nt);default:if(sn)throw new TypeError("Unknown encoding: "+wt);wt=(""+wt).toLowerCase(),sn=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Se(Ge,ce,pe){return ce===0&&pe===Ge.length?e.fromByteArray(Ge):e.fromByteArray(Ge.slice(ce,pe))}function Ke(Ge,ce,pe){pe=Math.min(Ge.length,pe);const nt=[];let wt=ce;for(;wt<pe;){const Ht=Ge[wt];let sn=null,Hn=Ht>239?4:Ht>223?3:Ht>191?2:1;if(wt+Hn<=pe){let Ve,J,ve,p;switch(Hn){case 1:Ht<128&&(sn=Ht);break;case 2:Ve=Ge[wt+1],(Ve&192)===128&&(p=(Ht&31)<<6|Ve&63,p>127&&(sn=p));break;case 3:Ve=Ge[wt+1],J=Ge[wt+2],(Ve&192)===128&&(J&192)===128&&(p=(Ht&15)<<12|(Ve&63)<<6|J&63,p>2047&&(p<55296||p>57343)&&(sn=p));break;case 4:Ve=Ge[wt+1],J=Ge[wt+2],ve=Ge[wt+3],(Ve&192)===128&&(J&192)===128&&(ve&192)===128&&(p=(Ht&15)<<18|(Ve&63)<<12|(J&63)<<6|ve&63,p>65535&&p<1114112&&(sn=p))}}sn===null?(sn=65533,Hn=1):sn>65535&&(sn-=65536,nt.push(sn>>>10&1023|55296),sn=56320|sn&1023),nt.push(sn),wt+=Hn}return at(nt)}const xe=4096;function at(Ge){const ce=Ge.length;if(ce<=xe)return String.fromCharCode.apply(String,Ge);let pe="",nt=0;for(;nt<ce;)pe+=String.fromCharCode.apply(String,Ge.slice(nt,nt+=xe));return pe}function Ze(Ge,ce,pe){let nt="";pe=Math.min(Ge.length,pe);for(let wt=ce;wt<pe;++wt)nt+=String.fromCharCode(Ge[wt]&127);return nt}function Je(Ge,ce,pe){let nt="";pe=Math.min(Ge.length,pe);for(let wt=ce;wt<pe;++wt)nt+=String.fromCharCode(Ge[wt]);return nt}function Ne(Ge,ce,pe){const nt=Ge.length;(!ce||ce<0)&&(ce=0),(!pe||pe<0||pe>nt)&&(pe=nt);let wt="";for(let Ht=ce;Ht<pe;++Ht)wt+=lr[Ge[Ht]];return wt}function we(Ge,ce,pe){const nt=Ge.slice(ce,pe);let wt="";for(let Ht=0;Ht<nt.length-1;Ht+=2)wt+=String.fromCharCode(nt[Ht]+nt[Ht+1]*256);return wt}o.prototype.slice=function(ce,pe){const nt=this.length;ce=~~ce,pe=pe===void 0?nt:~~pe,ce<0?(ce+=nt,ce<0&&(ce=0)):ce>nt&&(ce=nt),pe<0?(pe+=nt,pe<0&&(pe=0)):pe>nt&&(pe=nt),pe<ce&&(pe=ce);const wt=this.subarray(ce,pe);return Object.setPrototypeOf(wt,o.prototype),wt};function De(Ge,ce,pe){if(Ge%1!==0||Ge<0)throw new RangeError("offset is not uint");if(Ge+ce>pe)throw new RangeError("Trying to access beyond buffer length")}o.prototype.readUintLE=o.prototype.readUIntLE=function(ce,pe,nt){ce=ce>>>0,pe=pe>>>0,nt||De(ce,pe,this.length);let wt=this[ce],Ht=1,sn=0;for(;++sn<pe&&(Ht*=256);)wt+=this[ce+sn]*Ht;return wt},o.prototype.readUintBE=o.prototype.readUIntBE=function(ce,pe,nt){ce=ce>>>0,pe=pe>>>0,nt||De(ce,pe,this.length);let wt=this[ce+--pe],Ht=1;for(;pe>0&&(Ht*=256);)wt+=this[ce+--pe]*Ht;return wt},o.prototype.readUint8=o.prototype.readUInt8=function(ce,pe){return ce=ce>>>0,pe||De(ce,1,this.length),this[ce]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(ce,pe){return ce=ce>>>0,pe||De(ce,2,this.length),this[ce]|this[ce+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(ce,pe){return ce=ce>>>0,pe||De(ce,2,this.length),this[ce]<<8|this[ce+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(ce,pe){return ce=ce>>>0,pe||De(ce,4,this.length),(this[ce]|this[ce+1]<<8|this[ce+2]<<16)+this[ce+3]*16777216},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(ce,pe){return ce=ce>>>0,pe||De(ce,4,this.length),this[ce]*16777216+(this[ce+1]<<16|this[ce+2]<<8|this[ce+3])},o.prototype.readBigUInt64LE=vr(function(ce){ce=ce>>>0,pt(ce,"offset");const pe=this[ce],nt=this[ce+7];(pe===void 0||nt===void 0)&&Lt(ce,this.length-8);const wt=pe+this[++ce]*2**8+this[++ce]*2**16+this[++ce]*2**24,Ht=this[++ce]+this[++ce]*2**8+this[++ce]*2**16+nt*2**24;return BigInt(wt)+(BigInt(Ht)<<BigInt(32))}),o.prototype.readBigUInt64BE=vr(function(ce){ce=ce>>>0,pt(ce,"offset");const pe=this[ce],nt=this[ce+7];(pe===void 0||nt===void 0)&&Lt(ce,this.length-8);const wt=pe*2**24+this[++ce]*2**16+this[++ce]*2**8+this[++ce],Ht=this[++ce]*2**24+this[++ce]*2**16+this[++ce]*2**8+nt;return(BigInt(wt)<<BigInt(32))+BigInt(Ht)}),o.prototype.readIntLE=function(ce,pe,nt){ce=ce>>>0,pe=pe>>>0,nt||De(ce,pe,this.length);let wt=this[ce],Ht=1,sn=0;for(;++sn<pe&&(Ht*=256);)wt+=this[ce+sn]*Ht;return Ht*=128,wt>=Ht&&(wt-=Math.pow(2,8*pe)),wt},o.prototype.readIntBE=function(ce,pe,nt){ce=ce>>>0,pe=pe>>>0,nt||De(ce,pe,this.length);let wt=pe,Ht=1,sn=this[ce+--wt];for(;wt>0&&(Ht*=256);)sn+=this[ce+--wt]*Ht;return Ht*=128,sn>=Ht&&(sn-=Math.pow(2,8*pe)),sn},o.prototype.readInt8=function(ce,pe){return ce=ce>>>0,pe||De(ce,1,this.length),this[ce]&128?(255-this[ce]+1)*-1:this[ce]},o.prototype.readInt16LE=function(ce,pe){ce=ce>>>0,pe||De(ce,2,this.length);const nt=this[ce]|this[ce+1]<<8;return nt&32768?nt|4294901760:nt},o.prototype.readInt16BE=function(ce,pe){ce=ce>>>0,pe||De(ce,2,this.length);const nt=this[ce+1]|this[ce]<<8;return nt&32768?nt|4294901760:nt},o.prototype.readInt32LE=function(ce,pe){return ce=ce>>>0,pe||De(ce,4,this.length),this[ce]|this[ce+1]<<8|this[ce+2]<<16|this[ce+3]<<24},o.prototype.readInt32BE=function(ce,pe){return ce=ce>>>0,pe||De(ce,4,this.length),this[ce]<<24|this[ce+1]<<16|this[ce+2]<<8|this[ce+3]},o.prototype.readBigInt64LE=vr(function(ce){ce=ce>>>0,pt(ce,"offset");const pe=this[ce],nt=this[ce+7];(pe===void 0||nt===void 0)&&Lt(ce,this.length-8);const wt=this[ce+4]+this[ce+5]*2**8+this[ce+6]*2**16+(nt<<24);return(BigInt(wt)<<BigInt(32))+BigInt(pe+this[++ce]*2**8+this[++ce]*2**16+this[++ce]*2**24)}),o.prototype.readBigInt64BE=vr(function(ce){ce=ce>>>0,pt(ce,"offset");const pe=this[ce],nt=this[ce+7];(pe===void 0||nt===void 0)&&Lt(ce,this.length-8);const wt=(pe<<24)+this[++ce]*2**16+this[++ce]*2**8+this[++ce];return(BigInt(wt)<<BigInt(32))+BigInt(this[++ce]*2**24+this[++ce]*2**16+this[++ce]*2**8+nt)}),o.prototype.readFloatLE=function(ce,pe){return ce=ce>>>0,pe||De(ce,4,this.length),t.read(this,ce,!0,23,4)},o.prototype.readFloatBE=function(ce,pe){return ce=ce>>>0,pe||De(ce,4,this.length),t.read(this,ce,!1,23,4)},o.prototype.readDoubleLE=function(ce,pe){return ce=ce>>>0,pe||De(ce,8,this.length),t.read(this,ce,!0,52,8)},o.prototype.readDoubleBE=function(ce,pe){return ce=ce>>>0,pe||De(ce,8,this.length),t.read(this,ce,!1,52,8)};function He(Ge,ce,pe,nt,wt,Ht){if(!o.isBuffer(Ge))throw new TypeError('"buffer" argument must be a Buffer instance');if(ce>wt||ce<Ht)throw new RangeError('"value" argument is out of bounds');if(pe+nt>Ge.length)throw new RangeError("Index out of range")}o.prototype.writeUintLE=o.prototype.writeUIntLE=function(ce,pe,nt,wt){if(ce=+ce,pe=pe>>>0,nt=nt>>>0,!wt){const Hn=Math.pow(2,8*nt)-1;He(this,ce,pe,nt,Hn,0)}let Ht=1,sn=0;for(this[pe]=ce&255;++sn<nt&&(Ht*=256);)this[pe+sn]=ce/Ht&255;return pe+nt},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(ce,pe,nt,wt){if(ce=+ce,pe=pe>>>0,nt=nt>>>0,!wt){const Hn=Math.pow(2,8*nt)-1;He(this,ce,pe,nt,Hn,0)}let Ht=nt-1,sn=1;for(this[pe+Ht]=ce&255;--Ht>=0&&(sn*=256);)this[pe+Ht]=ce/sn&255;return pe+nt},o.prototype.writeUint8=o.prototype.writeUInt8=function(ce,pe,nt){return ce=+ce,pe=pe>>>0,nt||He(this,ce,pe,1,255,0),this[pe]=ce&255,pe+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(ce,pe,nt){return ce=+ce,pe=pe>>>0,nt||He(this,ce,pe,2,65535,0),this[pe]=ce&255,this[pe+1]=ce>>>8,pe+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(ce,pe,nt){return ce=+ce,pe=pe>>>0,nt||He(this,ce,pe,2,65535,0),this[pe]=ce>>>8,this[pe+1]=ce&255,pe+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(ce,pe,nt){return ce=+ce,pe=pe>>>0,nt||He(this,ce,pe,4,4294967295,0),this[pe+3]=ce>>>24,this[pe+2]=ce>>>16,this[pe+1]=ce>>>8,this[pe]=ce&255,pe+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(ce,pe,nt){return ce=+ce,pe=pe>>>0,nt||He(this,ce,pe,4,4294967295,0),this[pe]=ce>>>24,this[pe+1]=ce>>>16,this[pe+2]=ce>>>8,this[pe+3]=ce&255,pe+4};function bt(Ge,ce,pe,nt,wt){_t(ce,nt,wt,Ge,pe,7);let Ht=Number(ce&BigInt(4294967295));Ge[pe++]=Ht,Ht=Ht>>8,Ge[pe++]=Ht,Ht=Ht>>8,Ge[pe++]=Ht,Ht=Ht>>8,Ge[pe++]=Ht;let sn=Number(ce>>BigInt(32)&BigInt(4294967295));return Ge[pe++]=sn,sn=sn>>8,Ge[pe++]=sn,sn=sn>>8,Ge[pe++]=sn,sn=sn>>8,Ge[pe++]=sn,pe}function Yt(Ge,ce,pe,nt,wt){_t(ce,nt,wt,Ge,pe,7);let Ht=Number(ce&BigInt(4294967295));Ge[pe+7]=Ht,Ht=Ht>>8,Ge[pe+6]=Ht,Ht=Ht>>8,Ge[pe+5]=Ht,Ht=Ht>>8,Ge[pe+4]=Ht;let sn=Number(ce>>BigInt(32)&BigInt(4294967295));return Ge[pe+3]=sn,sn=sn>>8,Ge[pe+2]=sn,sn=sn>>8,Ge[pe+1]=sn,sn=sn>>8,Ge[pe]=sn,pe+8}o.prototype.writeBigUInt64LE=vr(function(ce,pe=0){return bt(this,ce,pe,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeBigUInt64BE=vr(function(ce,pe=0){return Yt(this,ce,pe,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeIntLE=function(ce,pe,nt,wt){if(ce=+ce,pe=pe>>>0,!wt){const Ve=Math.pow(2,8*nt-1);He(this,ce,pe,nt,Ve-1,-Ve)}let Ht=0,sn=1,Hn=0;for(this[pe]=ce&255;++Ht<nt&&(sn*=256);)ce<0&&Hn===0&&this[pe+Ht-1]!==0&&(Hn=1),this[pe+Ht]=(ce/sn>>0)-Hn&255;return pe+nt},o.prototype.writeIntBE=function(ce,pe,nt,wt){if(ce=+ce,pe=pe>>>0,!wt){const Ve=Math.pow(2,8*nt-1);He(this,ce,pe,nt,Ve-1,-Ve)}let Ht=nt-1,sn=1,Hn=0;for(this[pe+Ht]=ce&255;--Ht>=0&&(sn*=256);)ce<0&&Hn===0&&this[pe+Ht+1]!==0&&(Hn=1),this[pe+Ht]=(ce/sn>>0)-Hn&255;return pe+nt},o.prototype.writeInt8=function(ce,pe,nt){return ce=+ce,pe=pe>>>0,nt||He(this,ce,pe,1,127,-128),ce<0&&(ce=255+ce+1),this[pe]=ce&255,pe+1},o.prototype.writeInt16LE=function(ce,pe,nt){return ce=+ce,pe=pe>>>0,nt||He(this,ce,pe,2,32767,-32768),this[pe]=ce&255,this[pe+1]=ce>>>8,pe+2},o.prototype.writeInt16BE=function(ce,pe,nt){return ce=+ce,pe=pe>>>0,nt||He(this,ce,pe,2,32767,-32768),this[pe]=ce>>>8,this[pe+1]=ce&255,pe+2},o.prototype.writeInt32LE=function(ce,pe,nt){return ce=+ce,pe=pe>>>0,nt||He(this,ce,pe,4,2147483647,-2147483648),this[pe]=ce&255,this[pe+1]=ce>>>8,this[pe+2]=ce>>>16,this[pe+3]=ce>>>24,pe+4},o.prototype.writeInt32BE=function(ce,pe,nt){return ce=+ce,pe=pe>>>0,nt||He(this,ce,pe,4,2147483647,-2147483648),ce<0&&(ce=4294967295+ce+1),this[pe]=ce>>>24,this[pe+1]=ce>>>16,this[pe+2]=ce>>>8,this[pe+3]=ce&255,pe+4},o.prototype.writeBigInt64LE=vr(function(ce,pe=0){return bt(this,ce,pe,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),o.prototype.writeBigInt64BE=vr(function(ce,pe=0){return Yt(this,ce,pe,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function yt(Ge,ce,pe,nt,wt,Ht){if(pe+nt>Ge.length)throw new RangeError("Index out of range");if(pe<0)throw new RangeError("Index out of range")}function Ft(Ge,ce,pe,nt,wt){return ce=+ce,pe=pe>>>0,wt||yt(Ge,ce,pe,4),t.write(Ge,ce,pe,nt,23,4),pe+4}o.prototype.writeFloatLE=function(ce,pe,nt){return Ft(this,ce,pe,!0,nt)},o.prototype.writeFloatBE=function(ce,pe,nt){return Ft(this,ce,pe,!1,nt)};function Pt(Ge,ce,pe,nt,wt){return ce=+ce,pe=pe>>>0,wt||yt(Ge,ce,pe,8),t.write(Ge,ce,pe,nt,52,8),pe+8}o.prototype.writeDoubleLE=function(ce,pe,nt){return Pt(this,ce,pe,!0,nt)},o.prototype.writeDoubleBE=function(ce,pe,nt){return Pt(this,ce,pe,!1,nt)},o.prototype.copy=function(ce,pe,nt,wt){if(!o.isBuffer(ce))throw new TypeError("argument should be a Buffer");if(nt||(nt=0),!wt&&wt!==0&&(wt=this.length),pe>=ce.length&&(pe=ce.length),pe||(pe=0),wt>0&&wt<nt&&(wt=nt),wt===nt||ce.length===0||this.length===0)return 0;if(pe<0)throw new RangeError("targetStart out of bounds");if(nt<0||nt>=this.length)throw new RangeError("Index out of range");if(wt<0)throw new RangeError("sourceEnd out of bounds");wt>this.length&&(wt=this.length),ce.length-pe<wt-nt&&(wt=ce.length-pe+nt);const Ht=wt-nt;return this===ce&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(pe,nt,wt):Uint8Array.prototype.set.call(ce,this.subarray(nt,wt),pe),Ht},o.prototype.fill=function(ce,pe,nt,wt){if(typeof ce=="string"){if(typeof pe=="string"?(wt=pe,pe=0,nt=this.length):typeof nt=="string"&&(wt=nt,nt=this.length),wt!==void 0&&typeof wt!="string")throw new TypeError("encoding must be a string");if(typeof wt=="string"&&!o.isEncoding(wt))throw new TypeError("Unknown encoding: "+wt);if(ce.length===1){const sn=ce.charCodeAt(0);(wt==="utf8"&&sn<128||wt==="latin1")&&(ce=sn)}}else typeof ce=="number"?ce=ce&255:typeof ce=="boolean"&&(ce=Number(ce));if(pe<0||this.length<pe||this.length<nt)throw new RangeError("Out of range index");if(nt<=pe)return this;pe=pe>>>0,nt=nt===void 0?this.length:nt>>>0,ce||(ce=0);let Ht;if(typeof ce=="number")for(Ht=pe;Ht<nt;++Ht)this[Ht]=ce;else{const sn=o.isBuffer(ce)?ce:o.from(ce,wt),Hn=sn.length;if(Hn===0)throw new TypeError('The value "'+ce+'" is invalid for argument "value"');for(Ht=0;Ht<nt-pe;++Ht)this[Ht+pe]=sn[Ht%Hn]}return this};const Ue={};function Pe(Ge,ce,pe){Ue[Ge]=class extends pe{constructor(){super(),Object.defineProperty(this,"message",{value:ce.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${Ge}]`,this.stack,delete this.name}get code(){return Ge}set code(wt){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:wt,writable:!0})}toString(){return`${this.name} [${Ge}]: ${this.message}`}}}Pe("ERR_BUFFER_OUT_OF_BOUNDS",function(Ge){return Ge?`${Ge} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Pe("ERR_INVALID_ARG_TYPE",function(Ge,ce){return`The "${Ge}" argument must be of type number. Received type ${typeof ce}`},TypeError),Pe("ERR_OUT_OF_RANGE",function(Ge,ce,pe){let nt=`The value of "${Ge}" is out of range.`,wt=pe;return Number.isInteger(pe)&&Math.abs(pe)>2**32?wt=Be(String(pe)):typeof pe=="bigint"&&(wt=String(pe),(pe>BigInt(2)**BigInt(32)||pe<-(BigInt(2)**BigInt(32)))&&(wt=Be(wt)),wt+="n"),nt+=` It must be ${ce}. Received ${wt}`,nt},RangeError);function Be(Ge){let ce="",pe=Ge.length;const nt=Ge[0]==="-"?1:0;for(;pe>=nt+4;pe-=3)ce=`_${Ge.slice(pe-3,pe)}${ce}`;return`${Ge.slice(0,pe)}${ce}`}function it(Ge,ce,pe){pt(ce,"offset"),(Ge[ce]===void 0||Ge[ce+pe]===void 0)&&Lt(ce,Ge.length-(pe+1))}function _t(Ge,ce,pe,nt,wt,Ht){if(Ge>pe||Ge<ce){const sn=typeof ce=="bigint"?"n":"";let Hn;throw ce===0||ce===BigInt(0)?Hn=`>= 0${sn} and < 2${sn} ** ${(Ht+1)*8}${sn}`:Hn=`>= -(2${sn} ** ${(Ht+1)*8-1}${sn}) and < 2 ** ${(Ht+1)*8-1}${sn}`,new Ue.ERR_OUT_OF_RANGE("value",Hn,Ge)}it(nt,wt,Ht)}function pt(Ge,ce){if(typeof Ge!="number")throw new Ue.ERR_INVALID_ARG_TYPE(ce,"number",Ge)}function Lt(Ge,ce,pe){throw Math.floor(Ge)!==Ge?(pt(Ge,pe),new Ue.ERR_OUT_OF_RANGE("offset","an integer",Ge)):ce<0?new Ue.ERR_BUFFER_OUT_OF_BOUNDS:new Ue.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${ce}`,Ge)}const nn=/[^+/0-9A-Za-z-_]/g;function Kt(Ge){if(Ge=Ge.split("=")[0],Ge=Ge.trim().replace(nn,""),Ge.length<2)return"";for(;Ge.length%4!==0;)Ge=Ge+"=";return Ge}function vn(Ge,ce){ce=ce||1/0;let pe;const nt=Ge.length;let wt=null;const Ht=[];for(let sn=0;sn<nt;++sn){if(pe=Ge.charCodeAt(sn),pe>55295&&pe<57344){if(!wt){if(pe>56319){(ce-=3)>-1&&Ht.push(239,191,189);continue}else if(sn+1===nt){(ce-=3)>-1&&Ht.push(239,191,189);continue}wt=pe;continue}if(pe<56320){(ce-=3)>-1&&Ht.push(239,191,189),wt=pe;continue}pe=(wt-55296<<10|pe-56320)+65536}else wt&&(ce-=3)>-1&&Ht.push(239,191,189);if(wt=null,pe<128){if((ce-=1)<0)break;Ht.push(pe)}else if(pe<2048){if((ce-=2)<0)break;Ht.push(pe>>6|192,pe&63|128)}else if(pe<65536){if((ce-=3)<0)break;Ht.push(pe>>12|224,pe>>6&63|128,pe&63|128)}else if(pe<1114112){if((ce-=4)<0)break;Ht.push(pe>>18|240,pe>>12&63|128,pe>>6&63|128,pe&63|128)}else throw new Error("Invalid code point")}return Ht}function Gn(Ge){const ce=[];for(let pe=0;pe<Ge.length;++pe)ce.push(Ge.charCodeAt(pe)&255);return ce}function tn(Ge,ce){let pe,nt,wt;const Ht=[];for(let sn=0;sn<Ge.length&&!((ce-=2)<0);++sn)pe=Ge.charCodeAt(sn),nt=pe>>8,wt=pe%256,Ht.push(wt),Ht.push(nt);return Ht}function dr(Ge){return e.toByteArray(Kt(Ge))}function Pn(Ge,ce,pe,nt){let wt;for(wt=0;wt<nt&&!(wt+pe>=ce.length||wt>=Ge.length);++wt)ce[wt+pe]=Ge[wt];return wt}function pn(Ge,ce){return Ge instanceof ce||Ge!=null&&Ge.constructor!=null&&Ge.constructor.name!=null&&Ge.constructor.name===ce.name}function $n(Ge){return Ge!==Ge}const lr=function(){const Ge="0123456789abcdef",ce=new Array(256);for(let pe=0;pe<16;++pe){const nt=pe*16;for(let wt=0;wt<16;++wt)ce[nt+wt]=Ge[pe]+Ge[wt]}return ce}();function vr(Ge){return typeof BigInt>"u"?Zn:Ge}function Zn(){throw new Error("BigInt not supported")}}(S3)),S3}var vG=yG();const CG=fl(vG);var E3,z8;function _G(){if(z8)return E3;z8=1;var n="Expected a function",e="__lodash_hash_undefined__",t="[object Function]",r="[object GeneratorFunction]",i="[object Symbol]",s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,l=/^\w*$/,o=/^\./,f=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,y=/[\\^$.*+?()[\]{}|]/g,x=/\\(\\)?/g,B=/^\[object .+?Constructor\]$/,O=typeof window=="object"&&window&&window.Object===Object&&window,P=typeof self=="object"&&self&&self.Object===Object&&self,U=O||P||Function("return this")();function j(J,ve){return J==null?void 0:J[ve]}function N(J){var ve=!1;if(J!=null&&typeof J.toString!="function")try{ve=!!(J+"")}catch{}return ve}var Y=Array.prototype,H=Function.prototype,se=Object.prototype,re=U["__core-js_shared__"],V=function(){var J=/[^.]+$/.exec(re&&re.keys&&re.keys.IE_PROTO||"");return J?"Symbol(src)_1."+J:""}(),ne=H.toString,G=se.hasOwnProperty,oe=se.toString,he=RegExp("^"+ne.call(G).replace(y,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),fe=U.Symbol,Ee=Y.splice,me=dr(U,"Map"),Se=dr(Object,"create"),Ke=fe?fe.prototype:void 0,xe=Ke?Ke.toString:void 0;function at(J){var ve=-1,p=J?J.length:0;for(this.clear();++ve<p;){var Fe=J[ve];this.set(Fe[0],Fe[1])}}function Ze(){this.__data__=Se?Se(null):{}}function Je(J){return this.has(J)&&delete this.__data__[J]}function Ne(J){var ve=this.__data__;if(Se){var p=ve[J];return p===e?void 0:p}return G.call(ve,J)?ve[J]:void 0}function we(J){var ve=this.__data__;return Se?ve[J]!==void 0:G.call(ve,J)}function De(J,ve){var p=this.__data__;return p[J]=Se&&ve===void 0?e:ve,this}at.prototype.clear=Ze,at.prototype.delete=Je,at.prototype.get=Ne,at.prototype.has=we,at.prototype.set=De;function He(J){var ve=-1,p=J?J.length:0;for(this.clear();++ve<p;){var Fe=J[ve];this.set(Fe[0],Fe[1])}}function bt(){this.__data__=[]}function Yt(J){var ve=this.__data__,p=Lt(ve,J);if(p<0)return!1;var Fe=ve.length-1;return p==Fe?ve.pop():Ee.call(ve,p,1),!0}function yt(J){var ve=this.__data__,p=Lt(ve,J);return p<0?void 0:ve[p][1]}function Ft(J){return Lt(this.__data__,J)>-1}function Pt(J,ve){var p=this.__data__,Fe=Lt(p,J);return Fe<0?p.push([J,ve]):p[Fe][1]=ve,this}He.prototype.clear=bt,He.prototype.delete=Yt,He.prototype.get=yt,He.prototype.has=Ft,He.prototype.set=Pt;function Ue(J){var ve=-1,p=J?J.length:0;for(this.clear();++ve<p;){var Fe=J[ve];this.set(Fe[0],Fe[1])}}function Pe(){this.__data__={hash:new at,map:new(me||He),string:new at}}function Be(J){return tn(this,J).delete(J)}function it(J){return tn(this,J).get(J)}function _t(J){return tn(this,J).has(J)}function pt(J,ve){return tn(this,J).set(J,ve),this}Ue.prototype.clear=Pe,Ue.prototype.delete=Be,Ue.prototype.get=it,Ue.prototype.has=_t,Ue.prototype.set=pt;function Lt(J,ve){for(var p=J.length;p--;)if(ce(J[p][0],ve))return p;return-1}function nn(J,ve){ve=Pn(ve,J)?[ve]:Gn(ve);for(var p=0,Fe=ve.length;J!=null&&p<Fe;)J=J[vr(ve[p++])];return p&&p==Fe?J:void 0}function Kt(J){if(!wt(J)||$n(J))return!1;var ve=nt(J)||N(J)?he:B;return ve.test(Zn(J))}function vn(J){if(typeof J=="string")return J;if(sn(J))return xe?xe.call(J):"";var ve=J+"";return ve=="0"&&1/J==-1/0?"-0":ve}function Gn(J){return pe(J)?J:lr(J)}function tn(J,ve){var p=J.__data__;return pn(ve)?p[typeof ve=="string"?"string":"hash"]:p.map}function dr(J,ve){var p=j(J,ve);return Kt(p)?p:void 0}function Pn(J,ve){if(pe(J))return!1;var p=typeof J;return p=="number"||p=="symbol"||p=="boolean"||J==null||sn(J)?!0:l.test(J)||!s.test(J)||ve!=null&&J in Object(ve)}function pn(J){var ve=typeof J;return ve=="string"||ve=="number"||ve=="symbol"||ve=="boolean"?J!=="__proto__":J===null}function $n(J){return!!V&&V in J}var lr=Ge(function(J){J=Hn(J);var ve=[];return o.test(J)&&ve.push(""),J.replace(f,function(p,Fe,Qe,rt){ve.push(Qe?rt.replace(x,"$1"):Fe||p)}),ve});function vr(J){if(typeof J=="string"||sn(J))return J;var ve=J+"";return ve=="0"&&1/J==-1/0?"-0":ve}function Zn(J){if(J!=null){try{return ne.call(J)}catch{}try{return J+""}catch{}}return""}function Ge(J,ve){if(typeof J!="function"||ve&&typeof ve!="function")throw new TypeError(n);var p=function(){var Fe=arguments,Qe=ve?ve.apply(this,Fe):Fe[0],rt=p.cache;if(rt.has(Qe))return rt.get(Qe);var ct=J.apply(this,Fe);return p.cache=rt.set(Qe,ct),ct};return p.cache=new(Ge.Cache||Ue),p}Ge.Cache=Ue;function ce(J,ve){return J===ve||J!==J&&ve!==ve}var pe=Array.isArray;function nt(J){var ve=wt(J)?oe.call(J):"";return ve==t||ve==r}function wt(J){var ve=typeof J;return!!J&&(ve=="object"||ve=="function")}function Ht(J){return!!J&&typeof J=="object"}function sn(J){return typeof J=="symbol"||Ht(J)&&oe.call(J)==i}function Hn(J){return J==null?"":vn(J)}function Ve(J,ve,p){var Fe=J==null?void 0:nn(J,ve);return Fe===void 0?p:Fe}return E3=Ve,E3}var bG=_G();const xG=fl(bG);var _v={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var MG=_v.exports,j8;function wG(){return j8||(j8=1,function(n,e){(function(){var t,r="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",o="Invalid `variable` option passed into `_.template`",f="__lodash_hash_undefined__",y=500,x="__lodash_placeholder__",B=1,O=2,P=4,U=1,j=2,N=1,Y=2,H=4,se=8,re=16,V=32,ne=64,G=128,oe=256,he=512,fe=30,Ee="...",me=800,Se=16,Ke=1,xe=2,at=3,Ze=1/0,Je=9007199254740991,Ne=17976931348623157e292,we=NaN,De=4294967295,He=De-1,bt=De>>>1,Yt=[["ary",G],["bind",N],["bindKey",Y],["curry",se],["curryRight",re],["flip",he],["partial",V],["partialRight",ne],["rearg",oe]],yt="[object Arguments]",Ft="[object Array]",Pt="[object AsyncFunction]",Ue="[object Boolean]",Pe="[object Date]",Be="[object DOMException]",it="[object Error]",_t="[object Function]",pt="[object GeneratorFunction]",Lt="[object Map]",nn="[object Number]",Kt="[object Null]",vn="[object Object]",Gn="[object Promise]",tn="[object Proxy]",dr="[object RegExp]",Pn="[object Set]",pn="[object String]",$n="[object Symbol]",lr="[object Undefined]",vr="[object WeakMap]",Zn="[object WeakSet]",Ge="[object ArrayBuffer]",ce="[object DataView]",pe="[object Float32Array]",nt="[object Float64Array]",wt="[object Int8Array]",Ht="[object Int16Array]",sn="[object Int32Array]",Hn="[object Uint8Array]",Ve="[object Uint8ClampedArray]",J="[object Uint16Array]",ve="[object Uint32Array]",p=/\b__p \+= '';/g,Fe=/\b(__p \+=) '' \+/g,Qe=/(__e\(.*?\)|\b__t\)) \+\n'';/g,rt=/&(?:amp|lt|gt|quot|#39);/g,ct=/[&<>"']/g,dt=RegExp(rt.source),qt=RegExp(ct.source),Gt=/<%-([\s\S]+?)%>/g,zt=/<%([\s\S]+?)%>/g,on=/<%=([\s\S]+?)%>/g,jt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Dn=/^\w*$/,rr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Br=/[\\^$.*+?()[\]{}|]/g,Jn=RegExp(Br.source),un=/^\s+/,er=/\s/,fr=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Sr=/\{\n\/\* \[wrapped with (.+)\] \*/,Ur=/,? & /,ri=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Or=/[()=,{}\[\]\/\s]/,ka=/\\(\\)?/g,Wi=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Bi=/\w*$/,eo=/^[-+]0x[0-9a-f]+$/i,ws=/^0b[01]+$/i,ko=/^\[object .+?Constructor\]$/,Hi=/^0o[0-7]+$/i,Sl=/^(?:0|[1-9]\d*)$/,Go=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Za=/($^)/,Xa=/['\n\r\u2028\u2029\\]/g,Yi="\\ud800-\\udfff",Lu="\\u0300-\\u036f",Jl="\\ufe20-\\ufe2f",wo="\\u20d0-\\u20ff",wr=Lu+Jl+wo,Ta="\\u2700-\\u27bf",Ss="a-z\\xdf-\\xf6\\xf8-\\xff",Zs="\\xac\\xb1\\xd7\\xf7",Ye="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",xt="\\u2000-\\u206f",Cn=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Qn="A-Z\\xc0-\\xd6\\xd8-\\xde",fn="\\ufe0e\\ufe0f",ur=Zs+Ye+xt+Cn,Di="[']",vo="["+Yi+"]",rs="["+ur+"]",ua="["+wr+"]",eu="\\d+",ii="["+Ta+"]",qi="["+Ss+"]",Aa="[^"+Yi+ur+eu+Ta+Ss+Qn+"]",Cs="\\ud83c[\\udffb-\\udfff]",xi="(?:"+ua+"|"+Cs+")",uA="[^"+Yi+"]",Ja="(?:\\ud83c[\\udde6-\\uddff]){2}",oi="[\\ud800-\\udbff][\\udc00-\\udfff]",to="["+Qn+"]",$o="\\u200d",Qo="(?:"+qi+"|"+Aa+")",js="(?:"+to+"|"+Aa+")",Es="(?:"+Di+"(?:d|ll|m|re|s|t|ve))?",Xs="(?:"+Di+"(?:D|LL|M|RE|S|T|VE))?",Js=xi+"?",Au="["+fn+"]?",Ns="(?:"+$o+"(?:"+[uA,Ja,oi].join("|")+")"+Au+Js+")*",Oi="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",is="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",ea=Au+Js+Ns,va="(?:"+[ii,Ja,oi].join("|")+")"+ea,As="(?:"+[uA+ua+"?",ua,Ja,oi,vo].join("|")+")",pl=RegExp(Di,"g"),ml=RegExp(ua,"g"),fo=RegExp(Cs+"(?="+Cs+")|"+As+ea,"g"),Uu=RegExp([to+"?"+qi+"+"+Es+"(?="+[rs,to,"$"].join("|")+")",js+"+"+Xs+"(?="+[rs,to+Qo,"$"].join("|")+")",to+"?"+Qo+"+"+Es,to+"+"+Xs,is,Oi,eu,va].join("|"),"g"),zi=RegExp("["+$o+Yi+wr+fn+"]"),qr=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Dl=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Vi=-1,uo={};uo[pe]=uo[nt]=uo[wt]=uo[Ht]=uo[sn]=uo[Hn]=uo[Ve]=uo[J]=uo[ve]=!0,uo[yt]=uo[Ft]=uo[Ge]=uo[Ue]=uo[ce]=uo[Pe]=uo[it]=uo[_t]=uo[Lt]=uo[nn]=uo[vn]=uo[dr]=uo[Pn]=uo[pn]=uo[vr]=!1;var Ki={};Ki[yt]=Ki[Ft]=Ki[Ge]=Ki[ce]=Ki[Ue]=Ki[Pe]=Ki[pe]=Ki[nt]=Ki[wt]=Ki[Ht]=Ki[sn]=Ki[Lt]=Ki[nn]=Ki[vn]=Ki[dr]=Ki[Pn]=Ki[pn]=Ki[$n]=Ki[Hn]=Ki[Ve]=Ki[J]=Ki[ve]=!0,Ki[it]=Ki[_t]=Ki[vr]=!1;var ee={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},Oe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},st={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Vt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Er=parseFloat,qn=parseInt,si=typeof window=="object"&&window&&window.Object===Object&&window,di=typeof self=="object"&&self&&self.Object===Object&&self,Ir=si||di||Function("return this")(),Pr=e&&!e.nodeType&&e,pi=Pr&&!0&&n&&!n.nodeType&&n,Do=pi&&pi.exports===Pr,mi=Do&&si.process,zr=function(){try{var Jt=pi&&pi.require&&pi.require("util").types;return Jt||mi&&mi.binding&&mi.binding("util")}catch{}}(),Co=zr&&zr.isArrayBuffer,Zi=zr&&zr.isDate,To=zr&&zr.isMap,ca=zr&&zr.isRegExp,Pa=zr&&zr.isSet,cu=zr&&zr.isTypedArray;function Ws(Jt,In,an){switch(an.length){case 0:return Jt.call(In);case 1:return Jt.call(In,an[0]);case 2:return Jt.call(In,an[0],an[1]);case 3:return Jt.call(In,an[0],an[1],an[2])}return Jt.apply(In,an)}function zd(Jt,In,an,Dr){for(var Ri=-1,Po=Jt==null?0:Jt.length;++Ri<Po;){var Bs=Jt[Ri];In(Dr,Bs,an(Bs),Jt)}return Dr}function el(Jt,In){for(var an=-1,Dr=Jt==null?0:Jt.length;++an<Dr&&In(Jt[an],an,Jt)!==!1;);return Jt}function gl(Jt,In){for(var an=Jt==null?0:Jt.length;an--&&In(Jt[an],an,Jt)!==!1;);return Jt}function Ad(Jt,In){for(var an=-1,Dr=Jt==null?0:Jt.length;++an<Dr;)if(!In(Jt[an],an,Jt))return!1;return!0}function du(Jt,In){for(var an=-1,Dr=Jt==null?0:Jt.length,Ri=0,Po=[];++an<Dr;){var Bs=Jt[an];In(Bs,an,Jt)&&(Po[Ri++]=Bs)}return Po}function jd(Jt,In){var an=Jt==null?0:Jt.length;return!!an&&Gs(Jt,In,0)>-1}function cd(Jt,In,an){for(var Dr=-1,Ri=Jt==null?0:Jt.length;++Dr<Ri;)if(an(In,Jt[Dr]))return!0;return!1}function Fo(Jt,In){for(var an=-1,Dr=Jt==null?0:Jt.length,Ri=Array(Dr);++an<Dr;)Ri[an]=In(Jt[an],an,Jt);return Ri}function Cc(Jt,In){for(var an=-1,Dr=In.length,Ri=Jt.length;++an<Dr;)Jt[Ri+an]=In[an];return Jt}function yh(Jt,In,an,Dr){var Ri=-1,Po=Jt==null?0:Jt.length;for(Dr&&Po&&(an=Jt[++Ri]);++Ri<Po;)an=In(an,Jt[Ri],Ri,Jt);return an}function Nd(Jt,In,an,Dr){var Ri=Jt==null?0:Jt.length;for(Dr&&Ri&&(an=Jt[--Ri]);Ri--;)an=In(an,Jt[Ri],Ri,Jt);return an}function zu(Jt,In){for(var an=-1,Dr=Jt==null?0:Jt.length;++an<Dr;)if(In(Jt[an],an,Jt))return!0;return!1}var Wd=Hh("length");function Gd(Jt){return Jt.split("")}function _p(Jt){return Jt.match(ri)||[]}function dd(Jt,In,an){var Dr;return an(Jt,function(Ri,Po,Bs){if(In(Ri,Po,Bs))return Dr=Po,!1}),Dr}function _c(Jt,In,an,Dr){for(var Ri=Jt.length,Po=an+(Dr?1:-1);Dr?Po--:++Po<Ri;)if(In(Jt[Po],Po,Jt))return Po;return-1}function Gs(Jt,In,an){return In===In?_h(Jt,In,an):_c(Jt,$h,an)}function Lf(Jt,In,an,Dr){for(var Ri=an-1,Po=Jt.length;++Ri<Po;)if(Dr(Jt[Ri],In))return Ri;return-1}function $h(Jt){return Jt!==Jt}function jc(Jt,In){var an=Jt==null?0:Jt.length;return an?ZA(Jt,In)/an:we}function Hh(Jt){return function(In){return In==null?t:In[Jt]}}function hd(Jt){return function(In){return Jt==null?t:Jt[In]}}function Zh(Jt,In,an,Dr,Ri){return Ri(Jt,function(Po,Bs,Jo){an=Dr?(Dr=!1,Po):In(an,Po,Bs,Jo)}),an}function vh(Jt,In){var an=Jt.length;for(Jt.sort(In);an--;)Jt[an]=Jt[an].value;return Jt}function ZA(Jt,In){for(var an,Dr=-1,Ri=Jt.length;++Dr<Ri;){var Po=In(Jt[Dr]);Po!==t&&(an=an===t?Po:an+Po)}return an}function Xh(Jt,In){for(var an=-1,Dr=Array(Jt);++an<Jt;)Dr[an]=In(an);return Dr}function bp(Jt,In){return Fo(In,function(an){return[an,Jt[an]]})}function bc(Jt){return Jt&&Jt.slice(0,Yd(Jt)+1).replace(un,"")}function hu(Jt){return function(In){return Jt(In)}}function Nc(Jt,In){return Fo(In,function(an){return Jt[an]})}function ju(Jt,In){return Jt.has(In)}function EA(Jt,In){for(var an=-1,Dr=Jt.length;++an<Dr&&Gs(In,Jt[an],0)>-1;);return an}function Wc(Jt,In){for(var an=Jt.length;an--&&Gs(In,Jt[an],0)>-1;);return an}function Ch(Jt,In){for(var an=Jt.length,Dr=0;an--;)Jt[an]===In&&++Dr;return Dr}var Jh=hd(ee),fu=hd(Oe);function XA(Jt){return"\\"+Vt[Jt]}function BA(Jt,In){return Jt==null?t:Jt[In]}function pu(Jt){return zi.test(Jt)}function ef(Jt){return qr.test(Jt)}function tf(Jt){for(var In,an=[];!(In=Jt.next()).done;)an.push(In.value);return an}function fd(Jt){var In=-1,an=Array(Jt.size);return Jt.forEach(function(Dr,Ri){an[++In]=[Ri,Dr]}),an}function Qd(Jt,In){return function(an){return Jt(In(an))}}function tl(Jt,In){for(var an=-1,Dr=Jt.length,Ri=0,Po=[];++an<Dr;){var Bs=Jt[an];(Bs===In||Bs===x)&&(Jt[an]=x,Po[Ri++]=an)}return Po}function oa(Jt){var In=-1,an=Array(Jt.size);return Jt.forEach(function(Dr){an[++In]=Dr}),an}function Lo(Jt){var In=-1,an=Array(Jt.size);return Jt.forEach(function(Dr){an[++In]=[Dr,Dr]}),an}function _h(Jt,In,an){for(var Dr=an-1,Ri=Jt.length;++Dr<Ri;)if(Jt[Dr]===In)return Dr;return-1}function am(Jt,In,an){for(var Dr=an+1;Dr--;)if(Jt[Dr]===In)return Dr;return Dr}function pd(Jt){return pu(Jt)?md(Jt):Wd(Jt)}function Nu(Jt){return pu(Jt)?qd(Jt):Gd(Jt)}function Yd(Jt){for(var In=Jt.length;In--&&er.test(Jt.charAt(In)););return In}var Uf=hd(st);function md(Jt){for(var In=fo.lastIndex=0;fo.test(Jt);)++In;return In}function qd(Jt){return Jt.match(fo)||[]}function bh(Jt){return Jt.match(Uu)||[]}var Vd=function Jt(In){In=In==null?Ir:OA.defaults(Ir.Object(),In,OA.pick(Ir,Dl));var an=In.Array,Dr=In.Date,Ri=In.Error,Po=In.Function,Bs=In.Math,Jo=In.Object,JA=In.RegExp,xh=In.String,tu=In.TypeError,ec=an.prototype,mu=Po.prototype,Ka=Jo.prototype,AA=In["__core-js_shared__"],xc=mu.toString,Yr=Ka.hasOwnProperty,tc=0,$d=function(){var b=/[^.]+$/.exec(AA&&AA.keys&&AA.keys.IE_PROTO||"");return b?"Symbol(src)_1."+b:""}(),cA=Ka.toString,Fl=xc.call(Jo),Ll=Ir._,Mc=JA("^"+xc.call(Yr).replace(Br,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Wu=Do?In.Buffer:t,Gu=In.Symbol,gd=In.Uint8Array,yd=Wu?Wu.allocUnsafe:t,Ca=Qd(Jo.getPrototypeOf,Jo),Gc=Jo.create,Qc=Ka.propertyIsEnumerable,Yc=ec.splice,Mh=Gu?Gu.isConcatSpreadable:t,gu=Gu?Gu.iterator:t,nc=Gu?Gu.toStringTag:t,qc=function(){try{var b=UA(Jo,"defineProperty");return b({},"",{}),b}catch{}}(),vd=In.clearTimeout!==Ir.clearTimeout&&In.clearTimeout,cs=Dr&&Dr.now!==Ir.Date.now&&Dr.now,Cd=In.setTimeout!==Ir.setTimeout&&In.setTimeout,dA=Bs.ceil,yu=Bs.floor,Hd=Jo.getOwnPropertySymbols,wh=Wu?Wu.isBuffer:t,IA=In.isFinite,rc=ec.join,ic=Qd(Jo.keys,Jo),ms=Bs.max,ao=Bs.min,_d=Dr.now,Ul=In.parseInt,Vc=Bs.random,oc=ec.reverse,bd=UA(In,"DataView"),nl=UA(In,"Map"),vu=UA(In,"Promise"),rl=UA(In,"Set"),sc=UA(In,"WeakMap"),Qu=UA(Jo,"create"),xd=sc&&new sc,$c={},Zd=Wa(bd),nu=Wa(nl),Yu=Wa(vu),qu=Wa(rl),kA=Wa(sc),wc=Gu?Gu.prototype:t,Cu=wc?wc.valueOf:t,Sh=wc?wc.toString:t;function ot(b){if(Yl(b)&&!xo(b)&&!(b instanceof Gr)){if(b instanceof gi)return b;if(Yr.call(b,"__wrapped__"))return Wl(b)}return new gi(b)}var Vu=function(){function b(){}return function(k){if(!kl(k))return{};if(Gc)return Gc(k);b.prototype=k;var $=new b;return b.prototype=t,$}}();function _s(){}function gi(b,k){this.__wrapped__=b,this.__actions__=[],this.__chain__=!!k,this.__index__=0,this.__values__=t}ot.templateSettings={escape:Gt,evaluate:zt,interpolate:on,variable:"",imports:{_:ot}},ot.prototype=_s.prototype,ot.prototype.constructor=ot,gi.prototype=Vu(_s.prototype),gi.prototype.constructor=gi;function Gr(b){this.__wrapped__=b,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=De,this.__views__=[]}function ta(){var b=new Gr(this.__wrapped__);return b.__actions__=Ts(this.__actions__),b.__dir__=this.__dir__,b.__filtered__=this.__filtered__,b.__iteratees__=Ts(this.__iteratees__),b.__takeCount__=this.__takeCount__,b.__views__=Ts(this.__views__),b}function zl(){if(this.__filtered__){var b=new Gr(this);b.__dir__=-1,b.__filtered__=!0}else b=this.clone(),b.__dir__*=-1;return b}function TA(){var b=this.__wrapped__.value(),k=this.__dir__,$=xo(b),ye=k<0,qe=$?b.length:0,ht=Am(0,qe,this.__views__),Tt=ht.start,$t=ht.end,ln=$t-Tt,Yn=ye?$t:Tt-1,Vn=this.__iteratees__,pr=Vn.length,$r=0,Ii=ao(ln,this.__takeCount__);if(!$||!ye&&qe==ln&&Ii==ln)return _l(b,this.__actions__);var no=[];e:for(;ln--&&$r<Ii;){Yn+=k;for(var ts=-1,ro=b[Yn];++ts<pr;){var vs=Vn[ts],Ps=vs.iteratee,Uh=vs.type,Rd=Ps(ro);if(Uh==xe)ro=Rd;else if(!Rd){if(Uh==Ke)continue e;break e}}no[$r++]=ro}return no}Gr.prototype=Vu(_s.prototype),Gr.prototype.constructor=Gr;function _a(b){var k=-1,$=b==null?0:b.length;for(this.clear();++k<$;){var ye=b[k];this.set(ye[0],ye[1])}}function Us(){this.__data__=Qu?Qu(null):{},this.size=0}function bs(b){var k=this.has(b)&&delete this.__data__[b];return this.size-=k?1:0,k}function Hc(b){var k=this.__data__;if(Qu){var $=k[b];return $===f?t:$}return Yr.call(k,b)?k[b]:t}function ba(b){var k=this.__data__;return Qu?k[b]!==t:Yr.call(k,b)}function il(b,k){var $=this.__data__;return this.size+=this.has(b)?0:1,$[b]=Qu&&k===t?f:k,this}_a.prototype.clear=Us,_a.prototype.delete=bs,_a.prototype.get=Hc,_a.prototype.has=ba,_a.prototype.set=il;function gs(b){var k=-1,$=b==null?0:b.length;for(this.clear();++k<$;){var ye=b[k];this.set(ye[0],ye[1])}}function xr(){this.__data__=[],this.size=0}function xa(b){var k=this.__data__,$=da(k,b);if($<0)return!1;var ye=k.length-1;return $==ye?k.pop():Yc.call(k,$,1),--this.size,!0}function Zc(b){var k=this.__data__,$=da(k,b);return $<0?t:k[$][1]}function nf(b){return da(this.__data__,b)>-1}function ac(b,k){var $=this.__data__,ye=da($,b);return ye<0?(++this.size,$.push([b,k])):$[ye][1]=k,this}gs.prototype.clear=xr,gs.prototype.delete=xa,gs.prototype.get=Zc,gs.prototype.has=nf,gs.prototype.set=ac;function yl(b){var k=-1,$=b==null?0:b.length;for(this.clear();++k<$;){var ye=b[k];this.set(ye[0],ye[1])}}function Xd(){this.size=0,this.__data__={hash:new _a,map:new(nl||gs),string:new _a}}function Mi(b){var k=Th(this,b).delete(b);return this.size-=k?1:0,k}function Md(b){return Th(this,b).get(b)}function wd(b){return Th(this,b).has(b)}function $u(b,k){var $=Th(this,b),ye=$.size;return $.set(b,k),this.size+=$.size==ye?0:1,this}yl.prototype.clear=Xd,yl.prototype.delete=Mi,yl.prototype.get=Md,yl.prototype.has=wd,yl.prototype.set=$u;function Sc(b){var k=-1,$=b==null?0:b.length;for(this.__data__=new yl;++k<$;)this.add(b[k])}function lc(b){return this.__data__.set(b,f),this}function Ec(b){return this.__data__.has(b)}Sc.prototype.add=Sc.prototype.push=lc,Sc.prototype.has=Ec;function ds(b){var k=this.__data__=new gs(b);this.size=k.size}function So(){this.__data__=new gs,this.size=0}function _u(b){var k=this.__data__,$=k.delete(b);return this.size=k.size,$}function Ma(b){return this.__data__.get(b)}function Ra(b){return this.__data__.has(b)}function Bc(b,k){var $=this.__data__;if($ instanceof gs){var ye=$.__data__;if(!nl||ye.length<i-1)return ye.push([b,k]),this.size=++$.size,this;$=this.__data__=new yl(ye)}return $.set(b,k),this.size=$.size,this}ds.prototype.clear=So,ds.prototype.delete=_u,ds.prototype.get=Ma,ds.prototype.has=Ra,ds.prototype.set=Bc;function ol(b,k){var $=xo(b),ye=!$&&_m(b),qe=!$&&!ye&&Zf(b),ht=!$&&!ye&&!qe&&Rp(b),Tt=$||ye||qe||ht,$t=Tt?Xh(b.length,xh):[],ln=$t.length;for(var Yn in b)(k||Yr.call(b,Yn))&&!(Tt&&(Yn=="length"||qe&&(Yn=="offset"||Yn=="parent")||ht&&(Yn=="buffer"||Yn=="byteLength"||Yn=="byteOffset")||S(Yn,ln)))&&$t.push(Yn);return $t}function Uo(b){var k=b.length;return k?b[Mn(0,k-1)]:t}function PA(b,k){return Na(Ts(b),iu(k,0,b.length))}function Sd(b){return Na(Ts(b))}function KA(b,k,$){($!==t&&!sh(b[k],$)||$===t&&!(k in b))&&Kr(b,k,$)}function uc(b,k,$){var ye=b[k];(!(Yr.call(b,k)&&sh(ye,$))||$===t&&!(k in b))&&Kr(b,k,$)}function da(b,k){for(var $=b.length;$--;)if(sh(b[$][0],k))return $;return-1}function Da(b,k,$,ye){return Hu(b,function(qe,ht,Tt){k(ye,qe,$(qe),Tt)}),ye}function Eo(b,k){return b&&Su(k,kn(k),b)}function ru(b,k){return b&&Su(k,An(k),b)}function Kr(b,k,$){k=="__proto__"&&qc?qc(b,k,{configurable:!0,enumerable:!0,value:$,writable:!0}):b[k]=$}function ei(b,k){for(var $=-1,ye=k.length,qe=an(ye),ht=b==null;++$<ye;)qe[$]=ht?t:Nt(b,k[$]);return qe}function iu(b,k,$){return b===b&&($!==t&&(b=b<=$?b:$),k!==t&&(b=b>=k?b:k)),b}function vl(b,k,$,ye,qe,ht){var Tt,$t=k&B,ln=k&O,Yn=k&P;if($&&(Tt=qe?$(b,ye,qe,ht):$(b)),Tt!==t)return Tt;if(!kl(b))return b;var Vn=xo(b);if(Vn){if(Tt=Ph(b),!$t)return Ts(b,Tt)}else{var pr=bl(b),$r=pr==_t||pr==pt;if(Zf(b))return hs(b,$t);if(pr==vn||pr==yt||$r&&!qe){if(Tt=ln||$r?{}:uu(b),!$t)return ln?af(b,ru(Tt,b)):Jd(b,Eo(Tt,b))}else{if(!Ki[pr])return qe?b:{};Tt=Gf(b,pr,$t)}}ht||(ht=new ds);var Ii=ht.get(b);if(Ii)return Ii;ht.set(b,Tt),v_(b)?b.forEach(function(ro){Tt.add(vl(ro,k,$,ro,b,ht))}):p_(b)&&b.forEach(function(ro,vs){Tt.set(vs,vl(ro,k,$,vs,b,ht))});var no=Yn?ln?hf:df:ln?An:kn,ts=Vn?t:no(b);return el(ts||b,function(ro,vs){ts&&(vs=ro,ro=b[vs]),uc(Tt,vs,vl(ro,k,$,vs,b,ht))}),Tt}function rf(b){var k=kn(b);return function($){return sl($,b,k)}}function sl(b,k,$){var ye=$.length;if(b==null)return!ye;for(b=Jo(b);ye--;){var qe=$[ye],ht=k[qe],Tt=b[qe];if(Tt===t&&!(qe in b)||!ht(Tt))return!1}return!0}function of(b,k,$){if(typeof b!="function")throw new tu(l);return ti(function(){b.apply(t,$)},k)}function al(b,k,$,ye){var qe=-1,ht=jd,Tt=!0,$t=b.length,ln=[],Yn=k.length;if(!$t)return ln;$&&(k=Fo(k,hu($))),ye?(ht=cd,Tt=!1):k.length>=i&&(ht=ju,Tt=!1,k=new Sc(k));e:for(;++qe<$t;){var Vn=b[qe],pr=$==null?Vn:$(Vn);if(Vn=ye||Vn!==0?Vn:0,Tt&&pr===pr){for(var $r=Yn;$r--;)if(k[$r]===pr)continue e;ln.push(Vn)}else ht(k,pr,ye)||ln.push(Vn)}return ln}var Hu=ll(Cl),hA=ll(ou,!0);function Os(b,k){var $=!0;return Hu(b,function(ye,qe,ht){return $=!!k(ye,qe,ht),$}),$}function Is(b,k,$){for(var ye=-1,qe=b.length;++ye<qe;){var ht=b[ye],Tt=k(ht);if(Tt!=null&&($t===t?Tt===Tt&&!Rc(Tt):$(Tt,$t)))var $t=Tt,ln=ht}return ln}function sf(b,k,$,ye){var qe=b.length;for($=Oo($),$<0&&($=-$>qe?0:qe+$),ye=ye===t||ye>qe?qe:Oo(ye),ye<0&&(ye+=qe),ye=$>ye?0:c1(ye);$<ye;)b[$++]=k;return b}function Zu(b,k){var $=[];return Hu(b,function(ye,qe,ht){k(ye,qe,ht)&&$.push(ye)}),$}function ks(b,k,$,ye,qe){var ht=-1,Tt=b.length;for($||($=g),qe||(qe=[]);++ht<Tt;){var $t=b[ht];k>0&&$($t)?k>1?ks($t,k-1,$,ye,qe):Cc(qe,$t):ye||(qe[qe.length]=$t)}return qe}var Oc=xp(),bu=xp(!0);function Cl(b,k){return b&&Oc(b,k,kn)}function ou(b,k){return b&&bu(b,k,kn)}function Ic(b,k){return du(k,function($){return ah(b[$])})}function xu(b,k){k=Sa(k,b);for(var $=0,ye=k.length;b!=null&&$<ye;)b=b[fa(k[$++])];return $&&$==ye?b:t}function ha(b,k,$){var ye=k(b);return xo(b)?ye:Cc(ye,$(b))}function Qs(b){return b==null?b===t?lr:Kt:nc&&nc in Jo(b)?Ep(b):Fn(b)}function su(b,k){return b>k}function au(b,k){return b!=null&&Yr.call(b,k)}function RA(b,k){return b!=null&&k in Jo(b)}function Mu(b,k,$){return b>=ao(k,$)&&b<ms(k,$)}function Ac(b,k,$){for(var ye=$?cd:jd,qe=b[0].length,ht=b.length,Tt=ht,$t=an(ht),ln=1/0,Yn=[];Tt--;){var Vn=b[Tt];Tt&&k&&(Vn=Fo(Vn,hu(k))),ln=ao(Vn.length,ln),$t[Tt]=!$&&(k||qe>=120&&Vn.length>=120)?new Sc(Tt&&Vn):t}Vn=b[0];var pr=-1,$r=$t[0];e:for(;++pr<qe&&Yn.length<ln;){var Ii=Vn[pr],no=k?k(Ii):Ii;if(Ii=$||Ii!==0?Ii:0,!($r?ju($r,no):ye(Yn,no,$))){for(Tt=ht;--Tt;){var ts=$t[Tt];if(!(ts?ju(ts,no):ye(b[Tt],no,$)))continue e}$r&&$r.push(no),Yn.push(Ii)}}return Yn}function fA(b,k,$,ye){return Cl(b,function(qe,ht,Tt){k(ye,$(qe),ht,Tt)}),ye}function jl(b,k,$){k=Sa(k,b),b=tr(b,k);var ye=b==null?b:b[fa(jA(k))];return ye==null?t:Ws(ye,b,$)}function Xc(b){return Yl(b)&&Qs(b)==yt}function I(b){return Yl(b)&&Qs(b)==Ge}function a(b){return Yl(b)&&Qs(b)==Pe}function c(b,k,$,ye,qe){return b===k?!0:b==null||k==null||!Yl(b)&&!Yl(k)?b!==b&&k!==k:_(b,k,$,ye,c,qe)}function _(b,k,$,ye,qe,ht){var Tt=xo(b),$t=xo(k),ln=Tt?Ft:bl(b),Yn=$t?Ft:bl(k);ln=ln==yt?vn:ln,Yn=Yn==yt?vn:Yn;var Vn=ln==vn,pr=Yn==vn,$r=ln==Yn;if($r&&Zf(b)){if(!Zf(k))return!1;Tt=!0,Vn=!1}if($r&&!Vn)return ht||(ht=new ds),Tt||Rp(b)?vA(b,k,$,ye,qe,ht):th(b,k,ln,$,ye,qe,ht);if(!($&U)){var Ii=Vn&&Yr.call(b,"__wrapped__"),no=pr&&Yr.call(k,"__wrapped__");if(Ii||no){var ts=Ii?b.value():b,ro=no?k.value():k;return ht||(ht=new ds),qe(ts,ro,$,ye,ht)}}return $r?(ht||(ht=new ds),Sp(b,k,$,ye,qe,ht)):!1}function M(b){return Yl(b)&&bl(b)==Lt}function T(b,k,$,ye){var qe=$.length,ht=qe,Tt=!ye;if(b==null)return!ht;for(b=Jo(b);qe--;){var $t=$[qe];if(Tt&&$t[2]?$t[1]!==b[$t[0]]:!($t[0]in b))return!1}for(;++qe<ht;){$t=$[qe];var ln=$t[0],Yn=b[ln],Vn=$t[1];if(Tt&&$t[2]){if(Yn===t&&!(ln in b))return!1}else{var pr=new ds;if(ye)var $r=ye(Yn,Vn,ln,b,k,pr);if(!($r===t?c(Vn,Yn,U|j,ye,pr):$r))return!1}}return!0}function z(b){if(!kl(b)||Ce(b))return!1;var k=ah(b)?Mc:ko;return k.test(Wa(b))}function q(b){return Yl(b)&&Qs(b)==dr}function te(b){return Yl(b)&&bl(b)==Pn}function ae(b){return Yl(b)&&bm(b.length)&&!!uo[Qs(b)]}function be(b){return typeof b=="function"?b:b==null?id:typeof b=="object"?xo(b)?ut(b[0],b[1]):mt(b):ZO(b)}function ke(b){if(!je(b))return ic(b);var k=[];for(var $ in Jo(b))Yr.call(b,$)&&$!="constructor"&&k.push($);return k}function Te(b){if(!kl(b))return xn(b);var k=je(b),$=[];for(var ye in b)ye=="constructor"&&(k||!Yr.call(b,ye))||$.push(ye);return $}function $e(b,k){return b<k}function Xe(b,k){var $=-1,ye=Kc(b)?an(b.length):[];return Hu(b,function(qe,ht,Tt){ye[++$]=k(qe,ht,Tt)}),ye}function mt(b){var k=bo(b);return k.length==1&&k[0][2]?Mt(k[0][0],k[0][1]):function($){return $===b||T($,b,k)}}function ut(b,k){return R(b)&&gt(k)?Mt(fa(b),k):function($){var ye=Nt($,b);return ye===t&&ye===k?Le($,b):c(k,ye,U|j)}}function ft(b,k,$,ye,qe){b!==k&&Oc(k,function(ht,Tt){if(qe||(qe=new ds),kl(ht))vt(b,k,Tt,$,ft,ye,qe);else{var $t=ye?ye(yr(b,Tt),ht,Tt+"",b,k,qe):t;$t===t&&($t=ht),KA(b,Tt,$t)}},An)}function vt(b,k,$,ye,qe,ht,Tt){var $t=yr(b,$),ln=yr(k,$),Yn=Tt.get(ln);if(Yn){KA(b,$,Yn);return}var Vn=ht?ht($t,ln,$+"",b,k,Tt):t,pr=Vn===t;if(pr){var $r=xo(ln),Ii=!$r&&Zf(ln),no=!$r&&!Ii&&Rp(ln);Vn=ln,$r||Ii||no?xo($t)?Vn=$t:Ql($t)?Vn=Ts($t):Ii?(pr=!1,Vn=hs(ln,!0)):no?(pr=!1,Vn=zf(ln,!0)):Vn=[]:ig(ln)||_m(ln)?(Vn=$t,_m($t)?Vn=b_($t):(!kl($t)||ah($t))&&(Vn=uu(ln))):pr=!1}pr&&(Tt.set(ln,Vn),qe(Vn,ln,ye,ht,Tt),Tt.delete(ln)),KA(b,$,Vn)}function Et(b,k){var $=b.length;if($)return k+=k<0?$:0,S(k,$)?b[k]:t}function kt(b,k,$){k.length?k=Fo(k,function(ht){return xo(ht)?function(Tt){return xu(Tt,ht.length===1?ht[0]:ht)}:ht}):k=[id];var ye=-1;k=Fo(k,hu(wi()));var qe=Xe(b,function(ht,Tt,$t){var ln=Fo(k,function(Yn){return Yn(ht)});return{criteria:ln,index:++ye,value:ht}});return vh(qe,function(ht,Tt){return jf(ht,Tt,$)})}function Rt(b,k){return Ut(b,k,function($,ye){return Le(b,ye)})}function Ut(b,k,$){for(var ye=-1,qe=k.length,ht={};++ye<qe;){var Tt=k[ye],$t=xu(b,Tt);$($t,Tt)&&Tr(ht,Sa(Tt,b),$t)}return ht}function It(b){return function(k){return xu(k,b)}}function rn(b,k,$,ye){var qe=ye?Lf:Gs,ht=-1,Tt=k.length,$t=b;for(b===k&&(k=Ts(k)),$&&($t=Fo(b,hu($)));++ht<Tt;)for(var ln=0,Yn=k[ht],Vn=$?$(Yn):Yn;(ln=qe($t,Vn,ln,ye))>-1;)$t!==b&&Yc.call($t,ln,1),Yc.call(b,ln,1);return b}function Zt(b,k){for(var $=b?k.length:0,ye=$-1;$--;){var qe=k[$];if($==ye||qe!==ht){var ht=qe;S(qe)?Yc.call(b,qe,1):wa(b,qe)}}return b}function Mn(b,k){return b+yu(Vc()*(k-b+1))}function En(b,k,$,ye){for(var qe=-1,ht=ms(dA((k-b)/($||1)),0),Tt=an(ht);ht--;)Tt[ye?ht:++qe]=b,b+=$;return Tt}function bn(b,k){var $="";if(!b||k<1||k>Je)return $;do k%2&&($+=b),k=yu(k/2),k&&(b+=b);while(k);return $}function On(b,k){return jr(Ar(b,k,id),b+"")}function zn(b){return Uo(cl(b))}function Ln(b,k){var $=cl(b);return Na($,iu(k,0,$.length))}function Tr(b,k,$,ye){if(!kl(b))return b;k=Sa(k,b);for(var qe=-1,ht=k.length,Tt=ht-1,$t=b;$t!=null&&++qe<ht;){var ln=fa(k[qe]),Yn=$;if(ln==="__proto__"||ln==="constructor"||ln==="prototype")return b;if(qe!=Tt){var Vn=$t[ln];Yn=ye?ye(Vn,ln,$t):t,Yn===t&&(Yn=kl(Vn)?Vn:S(k[qe+1])?[]:{})}uc($t,ln,Yn),$t=$t[ln]}return b}var Zr=xd?function(b,k){return xd.set(b,k),b}:id,Xi=qc?function(b,k){return qc(b,"toString",{configurable:!0,enumerable:!1,value:m0(k),writable:!0})}:id;function _o(b){return Na(cl(b))}function ki(b,k,$){var ye=-1,qe=b.length;k<0&&(k=-k>qe?0:qe+k),$=$>qe?qe:$,$<0&&($+=qe),qe=k>$?0:$-k>>>0,k>>>=0;for(var ht=an(qe);++ye<qe;)ht[ye]=b[ye+k];return ht}function os(b,k){var $;return Hu(b,function(ye,qe,ht){return $=k(ye,qe,ht),!$}),!!$}function Yo(b,k,$){var ye=0,qe=b==null?ye:b.length;if(typeof k=="number"&&k===k&&qe<=bt){for(;ye<qe;){var ht=ye+qe>>>1,Tt=b[ht];Tt!==null&&!Rc(Tt)&&($?Tt<=k:Tt<k)?ye=ht+1:qe=ht}return qe}return Ao(b,k,id,$)}function Ao(b,k,$,ye){var qe=0,ht=b==null?0:b.length;if(ht===0)return 0;k=$(k);for(var Tt=k!==k,$t=k===null,ln=Rc(k),Yn=k===t;qe<ht;){var Vn=yu((qe+ht)/2),pr=$(b[Vn]),$r=pr!==t,Ii=pr===null,no=pr===pr,ts=Rc(pr);if(Tt)var ro=ye||no;else Yn?ro=no&&(ye||$r):$t?ro=no&&$r&&(ye||!Ii):ln?ro=no&&$r&&!Ii&&(ye||!ts):Ii||ts?ro=!1:ro=ye?pr<=k:pr<k;ro?qe=Vn+1:ht=Vn}return ao(ht,He)}function po(b,k){for(var $=-1,ye=b.length,qe=0,ht=[];++$<ye;){var Tt=b[$],$t=k?k(Tt):Tt;if(!$||!sh($t,ln)){var ln=$t;ht[qe++]=Tt===0?0:Tt}}return ht}function Fa(b){return typeof b=="number"?b:Rc(b)?we:+b}function ss(b){if(typeof b=="string")return b;if(xo(b))return Fo(b,ss)+"";if(Rc(b))return Sh?Sh.call(b):"";var k=b+"";return k=="0"&&1/b==-1/0?"-0":k}function es(b,k,$){var ye=-1,qe=jd,ht=b.length,Tt=!0,$t=[],ln=$t;if($)Tt=!1,qe=cd;else if(ht>=i){var Yn=k?null:Qm(b);if(Yn)return oa(Yn);Tt=!1,qe=ju,ln=new Sc}else ln=k?[]:$t;e:for(;++ye<ht;){var Vn=b[ye],pr=k?k(Vn):Vn;if(Vn=$||Vn!==0?Vn:0,Tt&&pr===pr){for(var $r=ln.length;$r--;)if(ln[$r]===pr)continue e;k&&ln.push(pr),$t.push(Vn)}else qe(ln,pr,$)||(ln!==$t&&ln.push(pr),$t.push(Vn))}return $t}function wa(b,k){return k=Sa(k,b),b=tr(b,k),b==null||delete b[fa(jA(k))]}function DA(b,k,$,ye){return Tr(b,k,$(xu(b,k)),ye)}function wu(b,k,$,ye){for(var qe=b.length,ht=ye?qe:-1;(ye?ht--:++ht<qe)&&k(b[ht],ht,b););return $?ki(b,ye?0:ht,ye?ht+1:qe):ki(b,ye?ht+1:0,ye?qe:ht)}function _l(b,k){var $=b;return $ instanceof Gr&&($=$.value()),yh(k,function(ye,qe){return qe.func.apply(qe.thisArg,Cc([ye],qe.args))},$)}function La(b,k,$){var ye=b.length;if(ye<2)return ye?es(b[0]):[];for(var qe=-1,ht=an(ye);++qe<ye;)for(var Tt=b[qe],$t=-1;++$t<ye;)$t!=qe&&(ht[qe]=al(ht[qe]||Tt,b[$t],k,$));return es(ks(ht,1),k,$)}function Xu(b,k,$){for(var ye=-1,qe=b.length,ht=k.length,Tt={};++ye<qe;){var $t=ye<ht?k[ye]:t;$(Tt,b[ye],$t)}return Tt}function pA(b){return Ql(b)?b:[]}function mA(b){return typeof b=="function"?b:id}function Sa(b,k){return xo(b)?b:R(b,k)?[b]:na(u(b))}var lu=On;function Ua(b,k,$){var ye=b.length;return $=$===t?ye:$,!k&&$>=ye?b:ki(b,k,$)}var gA=vd||function(b){return Ir.clearTimeout(b)};function hs(b,k){if(k)return b.slice();var $=b.length,ye=yd?yd($):new b.constructor($);return b.copy(ye),ye}function zo(b){var k=new b.constructor(b.byteLength);return new gd(k).set(new gd(b)),k}function za(b,k){var $=k?zo(b.buffer):b.buffer;return new b.constructor($,b.byteOffset,b.byteLength)}function ja(b){var k=new b.constructor(b.source,Bi.exec(b));return k.lastIndex=b.lastIndex,k}function yA(b){return Cu?Jo(Cu.call(b)):{}}function zf(b,k){var $=k?zo(b.buffer):b.buffer;return new b.constructor($,b.byteOffset,b.length)}function Eh(b,k){if(b!==k){var $=b!==t,ye=b===null,qe=b===b,ht=Rc(b),Tt=k!==t,$t=k===null,ln=k===k,Yn=Rc(k);if(!$t&&!Yn&&!ht&&b>k||ht&&Tt&&ln&&!$t&&!Yn||ye&&Tt&&ln||!$&&ln||!qe)return 1;if(!ye&&!ht&&!Yn&&b<k||Yn&&$&&qe&&!ye&&!ht||$t&&$&&qe||!Tt&&qe||!ln)return-1}return 0}function jf(b,k,$){for(var ye=-1,qe=b.criteria,ht=k.criteria,Tt=qe.length,$t=$.length;++ye<Tt;){var ln=Eh(qe[ye],ht[ye]);if(ln){if(ye>=$t)return ln;var Yn=$[ye];return ln*(Yn=="desc"?-1:1)}}return b.index-k.index}function Bh(b,k,$,ye){for(var qe=-1,ht=b.length,Tt=$.length,$t=-1,ln=k.length,Yn=ms(ht-Tt,0),Vn=an(ln+Yn),pr=!ye;++$t<ln;)Vn[$t]=k[$t];for(;++qe<Tt;)(pr||qe<ht)&&(Vn[$[qe]]=b[qe]);for(;Yn--;)Vn[$t++]=b[qe++];return Vn}function cc(b,k,$,ye){for(var qe=-1,ht=b.length,Tt=-1,$t=$.length,ln=-1,Yn=k.length,Vn=ms(ht-$t,0),pr=an(Vn+Yn),$r=!ye;++qe<Vn;)pr[qe]=b[qe];for(var Ii=qe;++ln<Yn;)pr[Ii+ln]=k[ln];for(;++Tt<$t;)($r||qe<ht)&&(pr[Ii+$[Tt]]=b[qe++]);return pr}function Ts(b,k){var $=-1,ye=b.length;for(k||(k=an(ye));++$<ye;)k[$]=b[$];return k}function Su(b,k,$,ye){var qe=!$;$||($={});for(var ht=-1,Tt=k.length;++ht<Tt;){var $t=k[ht],ln=ye?ye($[$t],b[$t],$t,$,b):t;ln===t&&(ln=b[$t]),qe?Kr($,$t,ln):uc($,$t,ln)}return $}function Jd(b,k){return Su(b,Eu(b),k)}function af(b,k){return Su(b,Ym(b),k)}function kc(b,k){return function($,ye){var qe=xo($)?zd:Da,ht=k?k():{};return qe($,b,wi(ye,2),ht)}}function FA(b){return On(function(k,$){var ye=-1,qe=$.length,ht=qe>1?$[qe-1]:t,Tt=qe>2?$[2]:t;for(ht=b.length>3&&typeof ht=="function"?(qe--,ht):t,Tt&&E($[0],$[1],Tt)&&(ht=qe<3?t:ht,qe=1),k=Jo(k);++ye<qe;){var $t=$[ye];$t&&b(k,$t,ye,ht)}return k})}function ll(b,k){return function($,ye){if($==null)return $;if(!Kc($))return b($,ye);for(var qe=$.length,ht=k?qe:-1,Tt=Jo($);(k?ht--:++ht<qe)&&ye(Tt[ht],ht,Tt)!==!1;);return $}}function xp(b){return function(k,$,ye){for(var qe=-1,ht=Jo(k),Tt=ye(k),$t=Tt.length;$t--;){var ln=Tt[b?$t:++qe];if($(ht[ln],ln,ht)===!1)break}return k}}function Oh(b,k,$){var ye=k&N,qe=Ih(b);function ht(){var Tt=this&&this!==Ir&&this instanceof ht?qe:b;return Tt.apply(ye?$:this,arguments)}return ht}function lm(b){return function(k){k=u(k);var $=pu(k)?Nu(k):t,ye=$?$[0]:k.charAt(0),qe=$?Ua($,1).join(""):k.slice(1);return ye[b]()+qe}}function Ed(b){return function(k){return yh(O_(Vl(k).replace(pl,"")),b,"")}}function Ih(b){return function(){var k=arguments;switch(k.length){case 0:return new b;case 1:return new b(k[0]);case 2:return new b(k[0],k[1]);case 3:return new b(k[0],k[1],k[2]);case 4:return new b(k[0],k[1],k[2],k[3]);case 5:return new b(k[0],k[1],k[2],k[3],k[4]);case 6:return new b(k[0],k[1],k[2],k[3],k[4],k[5]);case 7:return new b(k[0],k[1],k[2],k[3],k[4],k[5],k[6])}var $=Vu(b.prototype),ye=b.apply($,k);return kl(ye)?ye:$}}function Mp(b,k,$){var ye=Ih(b);function qe(){for(var ht=arguments.length,Tt=an(ht),$t=ht,ln=Tc(qe);$t--;)Tt[$t]=arguments[$t];var Yn=ht<3&&Tt[0]!==ln&&Tt[ht-1]!==ln?[]:tl(Tt,ln);if(ht-=Yn.length,ht<$)return El(b,k,Jc,qe.placeholder,t,Tt,Yn,t,t,$-ht);var Vn=this&&this!==Ir&&this instanceof qe?ye:b;return Ws(Vn,this,Tt)}return qe}function LA(b){return function(k,$,ye){var qe=Jo(k);if(!Kc(k)){var ht=wi($,3);k=kn(k),$=function($t){return ht(qe[$t],$t,qe)}}var Tt=b(k,$,ye);return Tt>-1?qe[ht?k[Tt]:Tt]:t}}function wp(b){return dc(function(k){var $=k.length,ye=$,qe=gi.prototype.thru;for(b&&k.reverse();ye--;){var ht=k[ye];if(typeof ht!="function")throw new tu(l);if(qe&&!Tt&&kh(ht)=="wrapper")var Tt=new gi([],!0)}for(ye=Tt?ye:$;++ye<$;){ht=k[ye];var $t=kh(ht),ln=$t=="wrapper"?ff(ht):t;ln&&Ae(ln[0])&&ln[1]==(G|se|V|oe)&&!ln[4].length&&ln[9]==1?Tt=Tt[kh(ln[0])].apply(Tt,ln[3]):Tt=ht.length==1&&Ae(ht)?Tt[$t]():Tt.thru(ht)}return function(){var Yn=arguments,Vn=Yn[0];if(Tt&&Yn.length==1&&xo(Vn))return Tt.plant(Vn).value();for(var pr=0,$r=$?k[pr].apply(this,Yn):Vn;++pr<$;)$r=k[pr].call(this,$r);return $r}})}function Jc(b,k,$,ye,qe,ht,Tt,$t,ln,Yn){var Vn=k&G,pr=k&N,$r=k&Y,Ii=k&(se|re),no=k&he,ts=$r?t:Ih(b);function ro(){for(var vs=arguments.length,Ps=an(vs),Uh=vs;Uh--;)Ps[Uh]=arguments[Uh];if(Ii)var Rd=Tc(ro),zh=Ch(Ps,Rd);if(ye&&(Ps=Bh(Ps,ye,qe,Ii)),ht&&(Ps=cc(Ps,ht,Tt,Ii)),vs-=zh,Ii&&vs<Yn){var iA=tl(Ps,Rd);return El(b,k,Jc,ro.placeholder,$,Ps,iA,$t,ln,Yn-vs)}var Jf=pr?$:this,Sm=$r?Jf[b]:b;return vs=Ps.length,$t?Ps=gr(Ps,$t):no&&vs>1&&Ps.reverse(),Vn&&ln<vs&&(Ps.length=ln),this&&this!==Ir&&this instanceof ro&&(Sm=ts||Ih(Sm)),Sm.apply(Jf,Ps)}return ro}function lf(b,k){return function($,ye){return fA($,b,k(ye),{})}}function ed(b,k){return function($,ye){var qe;if($===t&&ye===t)return k;if($!==t&&(qe=$),ye!==t){if(qe===t)return ye;typeof $=="string"||typeof ye=="string"?($=ss($),ye=ss(ye)):($=Fa($),ye=Fa(ye)),qe=b($,ye)}return qe}}function uf(b){return dc(function(k){return k=Fo(k,hu(wi())),On(function($){var ye=this;return b(k,function(qe){return Ws(qe,ye,$)})})})}function Af(b,k){k=k===t?" ":ss(k);var $=k.length;if($<2)return $?bn(k,b):k;var ye=bn(k,dA(b/pd(k)));return pu(k)?Ua(Nu(ye),0,b).join(""):ye.slice(0,b)}function um(b,k,$,ye){var qe=k&N,ht=Ih(b);function Tt(){for(var $t=-1,ln=arguments.length,Yn=-1,Vn=ye.length,pr=an(Vn+ln),$r=this&&this!==Ir&&this instanceof Tt?ht:b;++Yn<Vn;)pr[Yn]=ye[Yn];for(;ln--;)pr[Yn++]=arguments[++$t];return Ws($r,qe?$:this,pr)}return Tt}function eh(b){return function(k,$,ye){return ye&&typeof ye!="number"&&E(k,$,ye)&&($=ye=t),k=kd(k),$===t?($=k,k=0):$=kd($),ye=ye===t?k<$?1:-1:kd(ye),En(k,$,ye,b)}}function cf(b){return function(k,$){return typeof k=="string"&&typeof $=="string"||(k=rd(k),$=rd($)),b(k,$)}}function El(b,k,$,ye,qe,ht,Tt,$t,ln,Yn){var Vn=k&se,pr=Vn?Tt:t,$r=Vn?t:Tt,Ii=Vn?ht:t,no=Vn?t:ht;k|=Vn?V:ne,k&=~(Vn?ne:V),k&H||(k&=-4);var ts=[b,k,qe,Ii,pr,no,$r,$t,ln,Yn],ro=$.apply(t,ts);return Ae(b)&&Rr(ro,ts),ro.placeholder=ye,Ji(ro,b,k)}function Nl(b){var k=Bs[b];return function($,ye){if($=rd($),ye=ye==null?0:ao(Oo(ye),292),ye&&IA($)){var qe=(u($)+"e").split("e"),ht=k(qe[0]+"e"+(+qe[1]+ye));return qe=(u(ht)+"e").split("e"),+(qe[0]+"e"+(+qe[1]-ye))}return k($)}}var Qm=rl&&1/oa(new rl([,-0]))[1]==Ze?function(b){return new rl(b)}:d3;function Nf(b){return function(k){var $=bl(k);return $==Lt?fd(k):$==Pn?Lo(k):bp(k,b(k))}}function Ho(b,k,$,ye,qe,ht,Tt,$t){var ln=k&Y;if(!ln&&typeof b!="function")throw new tu(l);var Yn=ye?ye.length:0;if(Yn||(k&=-97,ye=qe=t),Tt=Tt===t?Tt:ms(Oo(Tt),0),$t=$t===t?$t:Oo($t),Yn-=qe?qe.length:0,k&ne){var Vn=ye,pr=qe;ye=qe=t}var $r=ln?t:ff(b),Ii=[b,k,$,ye,qe,Vn,pr,ht,Tt,$t];if($r&&Qt(Ii,$r),b=Ii[0],k=Ii[1],$=Ii[2],ye=Ii[3],qe=Ii[4],$t=Ii[9]=Ii[9]===t?ln?0:b.length:ms(Ii[9]-Yn,0),!$t&&k&(se|re)&&(k&=-25),!k||k==N)var no=Oh(b,k,$);else k==se||k==re?no=Mp(b,k,$t):(k==V||k==(N|V))&&!qe.length?no=um(b,k,$,ye):no=Jc.apply(t,Ii);var ts=$r?Zr:Rr;return Ji(ts(no,Ii),b,k)}function Wf(b,k,$,ye){return b===t||sh(b,Ka[$])&&!Yr.call(ye,$)?k:b}function Bd(b,k,$,ye,qe,ht){return kl(b)&&kl(k)&&(ht.set(k,b),ft(b,k,t,Bd,ht),ht.delete(k)),b}function Bl(b){return ig(b)?t:b}function vA(b,k,$,ye,qe,ht){var Tt=$&U,$t=b.length,ln=k.length;if($t!=ln&&!(Tt&&ln>$t))return!1;var Yn=ht.get(b),Vn=ht.get(k);if(Yn&&Vn)return Yn==k&&Vn==b;var pr=-1,$r=!0,Ii=$&j?new Sc:t;for(ht.set(b,k),ht.set(k,b);++pr<$t;){var no=b[pr],ts=k[pr];if(ye)var ro=Tt?ye(ts,no,pr,k,b,ht):ye(no,ts,pr,b,k,ht);if(ro!==t){if(ro)continue;$r=!1;break}if(Ii){if(!zu(k,function(vs,Ps){if(!ju(Ii,Ps)&&(no===vs||qe(no,vs,$,ye,ht)))return Ii.push(Ps)})){$r=!1;break}}else if(!(no===ts||qe(no,ts,$,ye,ht))){$r=!1;break}}return ht.delete(b),ht.delete(k),$r}function th(b,k,$,ye,qe,ht,Tt){switch($){case ce:if(b.byteLength!=k.byteLength||b.byteOffset!=k.byteOffset)return!1;b=b.buffer,k=k.buffer;case Ge:return!(b.byteLength!=k.byteLength||!ht(new gd(b),new gd(k)));case Ue:case Pe:case nn:return sh(+b,+k);case it:return b.name==k.name&&b.message==k.message;case dr:case pn:return b==k+"";case Lt:var $t=fd;case Pn:var ln=ye&U;if($t||($t=oa),b.size!=k.size&&!ln)return!1;var Yn=Tt.get(b);if(Yn)return Yn==k;ye|=j,Tt.set(b,k);var Vn=vA($t(b),$t(k),ye,qe,ht,Tt);return Tt.delete(b),Vn;case $n:if(Cu)return Cu.call(b)==Cu.call(k)}return!1}function Sp(b,k,$,ye,qe,ht){var Tt=$&U,$t=df(b),ln=$t.length,Yn=df(k),Vn=Yn.length;if(ln!=Vn&&!Tt)return!1;for(var pr=ln;pr--;){var $r=$t[pr];if(!(Tt?$r in k:Yr.call(k,$r)))return!1}var Ii=ht.get(b),no=ht.get(k);if(Ii&&no)return Ii==k&&no==b;var ts=!0;ht.set(b,k),ht.set(k,b);for(var ro=Tt;++pr<ln;){$r=$t[pr];var vs=b[$r],Ps=k[$r];if(ye)var Uh=Tt?ye(Ps,vs,$r,k,b,ht):ye(vs,Ps,$r,b,k,ht);if(!(Uh===t?vs===Ps||qe(vs,Ps,$,ye,ht):Uh)){ts=!1;break}ro||(ro=$r=="constructor")}if(ts&&!ro){var Rd=b.constructor,zh=k.constructor;Rd!=zh&&"constructor"in b&&"constructor"in k&&!(typeof Rd=="function"&&Rd instanceof Rd&&typeof zh=="function"&&zh instanceof zh)&&(ts=!1)}return ht.delete(b),ht.delete(k),ts}function dc(b){return jr(Ar(b,t,CA),b+"")}function df(b){return ha(b,kn,Eu)}function hf(b){return ha(b,An,Ym)}var ff=xd?function(b){return xd.get(b)}:d3;function kh(b){for(var k=b.name+"",$=$c[k],ye=Yr.call($c,k)?$.length:0;ye--;){var qe=$[ye],ht=qe.func;if(ht==null||ht==b)return qe.name}return k}function Tc(b){var k=Yr.call(ot,"placeholder")?ot:b;return k.placeholder}function wi(){var b=ot.iteratee||rA;return b=b===rA?be:b,arguments.length?b(arguments[0],arguments[1]):b}function Th(b,k){var $=b.__data__;return Z(k)?$[typeof k=="string"?"string":"hash"]:$.map}function bo(b){for(var k=kn(b),$=k.length;$--;){var ye=k[$],qe=b[ye];k[$]=[ye,qe,gt(qe)]}return k}function UA(b,k){var $=BA(b,k);return z($)?$:t}function Ep(b){var k=Yr.call(b,nc),$=b[nc];try{b[nc]=t;var ye=!0}catch{}var qe=cA.call(b);return ye&&(k?b[nc]=$:delete b[nc]),qe}var Eu=Hd?function(b){return b==null?[]:(b=Jo(b),du(Hd(b),function(k){return Qc.call(b,k)}))}:h3,Ym=Hd?function(b){for(var k=[];b;)Cc(k,Eu(b)),b=Ca(b);return k}:h3,bl=Qs;(bd&&bl(new bd(new ArrayBuffer(1)))!=ce||nl&&bl(new nl)!=Lt||vu&&bl(vu.resolve())!=Gn||rl&&bl(new rl)!=Pn||sc&&bl(new sc)!=vr)&&(bl=function(b){var k=Qs(b),$=k==vn?b.constructor:t,ye=$?Wa($):"";if(ye)switch(ye){case Zd:return ce;case nu:return Lt;case Yu:return Gn;case qu:return Pn;case kA:return vr}return k});function Am(b,k,$){for(var ye=-1,qe=$.length;++ye<qe;){var ht=$[ye],Tt=ht.size;switch(ht.type){case"drop":b+=Tt;break;case"dropRight":k-=Tt;break;case"take":k=ao(k,b+Tt);break;case"takeRight":b=ms(b,k-Tt);break}}return{start:b,end:k}}function Ea(b){var k=b.match(Sr);return k?k[1].split(Ur):[]}function cm(b,k,$){k=Sa(k,b);for(var ye=-1,qe=k.length,ht=!1;++ye<qe;){var Tt=fa(k[ye]);if(!(ht=b!=null&&$(b,Tt)))break;b=b[Tt]}return ht||++ye!=qe?ht:(qe=b==null?0:b.length,!!qe&&bm(qe)&&S(Tt,qe)&&(xo(b)||_m(b)))}function Ph(b){var k=b.length,$=new b.constructor(k);return k&&typeof b[0]=="string"&&Yr.call(b,"index")&&($.index=b.index,$.input=b.input),$}function uu(b){return typeof b.constructor=="function"&&!je(b)?Vu(Ca(b)):{}}function Gf(b,k,$){var ye=b.constructor;switch(k){case Ge:return zo(b);case Ue:case Pe:return new ye(+b);case ce:return za(b,$);case pe:case nt:case wt:case Ht:case sn:case Hn:case Ve:case J:case ve:return zf(b,$);case Lt:return new ye;case nn:case pn:return new ye(b);case dr:return ja(b);case Pn:return new ye;case $n:return yA(b)}}function A(b,k){var $=k.length;if(!$)return b;var ye=$-1;return k[ye]=($>1?"& ":"")+k[ye],k=k.join($>2?", ":" "),b.replace(fr,`{
/* [wrapped with `+k+`] */
`)}function g(b){return xo(b)||_m(b)||!!(Mh&&b&&b[Mh])}function S(b,k){var $=typeof b;return k=k??Je,!!k&&($=="number"||$!="symbol"&&Sl.test(b))&&b>-1&&b%1==0&&b<k}function E(b,k,$){if(!kl($))return!1;var ye=typeof k;return(ye=="number"?Kc($)&&S(k,$.length):ye=="string"&&k in $)?sh($[k],b):!1}function R(b,k){if(xo(b))return!1;var $=typeof b;return $=="number"||$=="symbol"||$=="boolean"||b==null||Rc(b)?!0:Dn.test(b)||!jt.test(b)||k!=null&&b in Jo(k)}function Z(b){var k=typeof b;return k=="string"||k=="number"||k=="symbol"||k=="boolean"?b!=="__proto__":b===null}function Ae(b){var k=kh(b),$=ot[k];if(typeof $!="function"||!(k in Gr.prototype))return!1;if(b===$)return!0;var ye=ff($);return!!ye&&b===ye[0]}function Ce(b){return!!$d&&$d in b}var Ie=AA?ah:f3;function je(b){var k=b&&b.constructor,$=typeof k=="function"&&k.prototype||Ka;return b===$}function gt(b){return b===b&&!kl(b)}function Mt(b,k){return function($){return $==null?!1:$[b]===k&&(k!==t||b in Jo($))}}function Xt(b){var k=Cr(b,function(ye){return $.size===y&&$.clear(),ye}),$=k.cache;return k}function Qt(b,k){var $=b[1],ye=k[1],qe=$|ye,ht=qe<(N|Y|G),Tt=ye==G&&$==se||ye==G&&$==oe&&b[7].length<=k[8]||ye==(G|oe)&&k[7].length<=k[8]&&$==se;if(!(ht||Tt))return b;ye&N&&(b[2]=k[2],qe|=$&N?0:H);var $t=k[3];if($t){var ln=b[3];b[3]=ln?Bh(ln,$t,k[4]):$t,b[4]=ln?tl(b[3],x):k[4]}return $t=k[5],$t&&(ln=b[5],b[5]=ln?cc(ln,$t,k[6]):$t,b[6]=ln?tl(b[5],x):k[6]),$t=k[7],$t&&(b[7]=$t),ye&G&&(b[8]=b[8]==null?k[8]:ao(b[8],k[8])),b[9]==null&&(b[9]=k[9]),b[0]=k[0],b[1]=qe,b}function xn(b){var k=[];if(b!=null)for(var $ in Jo(b))k.push($);return k}function Fn(b){return cA.call(b)}function Ar(b,k,$){return k=ms(k===t?b.length-1:k,0),function(){for(var ye=arguments,qe=-1,ht=ms(ye.length-k,0),Tt=an(ht);++qe<ht;)Tt[qe]=ye[k+qe];qe=-1;for(var $t=an(k+1);++qe<k;)$t[qe]=ye[qe];return $t[k]=$(Tt),Ws(b,this,$t)}}function tr(b,k){return k.length<2?b:xu(b,ki(k,0,-1))}function gr(b,k){for(var $=b.length,ye=ao(k.length,$),qe=Ts(b);ye--;){var ht=k[ye];b[ye]=S(ht,$)?qe[ht]:t}return b}function yr(b,k){if(!(k==="constructor"&&typeof b[k]=="function")&&k!="__proto__")return b[k]}var Rr=Bo(Zr),ti=Cd||function(b,k){return Ir.setTimeout(b,k)},jr=Bo(Xi);function Ji(b,k,$){var ye=k+"";return jr(b,A(ye,Ga(Ea(ye),$)))}function Bo(b){var k=0,$=0;return function(){var ye=_d(),qe=Se-(ye-$);if($=ye,qe>0){if(++k>=me)return arguments[0]}else k=0;return b.apply(t,arguments)}}function Na(b,k){var $=-1,ye=b.length,qe=ye-1;for(k=k===t?ye:k;++$<k;){var ht=Mn($,qe),Tt=b[ht];b[ht]=b[$],b[$]=Tt}return b.length=k,b}var na=Xt(function(b){var k=[];return b.charCodeAt(0)===46&&k.push(""),b.replace(rr,function($,ye,qe,ht){k.push(qe?ht.replace(ka,"$1"):ye||$)}),k});function fa(b){if(typeof b=="string"||Rc(b))return b;var k=b+"";return k=="0"&&1/b==-1/0?"-0":k}function Wa(b){if(b!=null){try{return xc.call(b)}catch{}try{return b+""}catch{}}return""}function Ga(b,k){return el(Yt,function($){var ye="_."+$[0];k&$[1]&&!jd(b,ye)&&b.push(ye)}),b.sort()}function Wl(b){if(b instanceof Gr)return b.clone();var k=new gi(b.__wrapped__,b.__chain__);return k.__actions__=Ts(b.__actions__),k.__index__=b.__index__,k.__values__=b.__values__,k}function Qa(b,k,$){($?E(b,k,$):k===t)?k=1:k=ms(Oo(k),0);var ye=b==null?0:b.length;if(!ye||k<1)return[];for(var qe=0,ht=0,Tt=an(dA(ye/k));qe<ye;)Tt[ht++]=ki(b,qe,qe+=k);return Tt}function pa(b){for(var k=-1,$=b==null?0:b.length,ye=0,qe=[];++k<$;){var ht=b[k];ht&&(qe[ye++]=ht)}return qe}function as(){var b=arguments.length;if(!b)return[];for(var k=an(b-1),$=arguments[0],ye=b;ye--;)k[ye-1]=arguments[ye];return Cc(xo($)?Ts($):[$],ks(k,1))}var Ci=On(function(b,k){return Ql(b)?al(b,ks(k,1,Ql,!0)):[]}),ls=On(function(b,k){var $=jA(k);return Ql($)&&($=t),Ql(b)?al(b,ks(k,1,Ql,!0),wi($,2)):[]}),ra=On(function(b,k){var $=jA(k);return Ql($)&&($=t),Ql(b)?al(b,ks(k,1,Ql,!0),t,$):[]});function Ys(b,k,$){var ye=b==null?0:b.length;return ye?(k=$||k===t?1:Oo(k),ki(b,k<0?0:k,ye)):[]}function xs(b,k,$){var ye=b==null?0:b.length;return ye?(k=$||k===t?1:Oo(k),k=ye-k,ki(b,0,k<0?0:k)):[]}function Bu(b,k){return b&&b.length?wu(b,wi(k,3),!0,!0):[]}function Ko(b,k){return b&&b.length?wu(b,wi(k,3),!0):[]}function Pc(b,k,$,ye){var qe=b==null?0:b.length;return qe?($&&typeof $!="number"&&E(b,k,$)&&($=0,ye=qe),sf(b,k,$,ye)):[]}function Ou(b,k,$){var ye=b==null?0:b.length;if(!ye)return-1;var qe=$==null?0:Oo($);return qe<0&&(qe=ms(ye+qe,0)),_c(b,wi(k,3),qe)}function zA(b,k,$){var ye=b==null?0:b.length;if(!ye)return-1;var qe=ye-1;return $!==t&&(qe=Oo($),qe=$<0?ms(ye+qe,0):ao(qe,ye-1)),_c(b,wi(k,3),qe,!0)}function CA(b){var k=b==null?0:b.length;return k?ks(b,1):[]}function Ya(b){var k=b==null?0:b.length;return k?ks(b,Ze):[]}function Ol(b,k){var $=b==null?0:b.length;return $?(k=k===t?1:Oo(k),ks(b,k)):[]}function Qf(b){for(var k=-1,$=b==null?0:b.length,ye={};++k<$;){var qe=b[k];ye[qe[0]]=qe[1]}return ye}function pf(b){return b&&b.length?b[0]:t}function nh(b,k,$){var ye=b==null?0:b.length;if(!ye)return-1;var qe=$==null?0:Oo($);return qe<0&&(qe=ms(ye+qe,0)),Gs(b,k,qe)}function qm(b){var k=b==null?0:b.length;return k?ki(b,0,-1):[]}var q0=On(function(b){var k=Fo(b,pA);return k.length&&k[0]===b[0]?Ac(k):[]}),td=On(function(b){var k=jA(b),$=Fo(b,pA);return k===jA($)?k=t:$.pop(),$.length&&$[0]===b[0]?Ac($,wi(k,2)):[]}),dm=On(function(b){var k=jA(b),$=Fo(b,pA);return k=typeof k=="function"?k:t,k&&$.pop(),$.length&&$[0]===b[0]?Ac($,t,k):[]});function mf(b,k){return b==null?"":rc.call(b,k)}function jA(b){var k=b==null?0:b.length;return k?b[k-1]:t}function hm(b,k,$){var ye=b==null?0:b.length;if(!ye)return-1;var qe=ye;return $!==t&&(qe=Oo($),qe=qe<0?ms(ye+qe,0):ao(qe,ye-1)),k===k?am(b,k,qe):_c(b,$h,qe,!0)}function V0(b,k){return b&&b.length?Et(b,Oo(k)):t}var Vm=On(fm);function fm(b,k){return b&&b.length&&k&&k.length?rn(b,k):b}function _A(b,k,$){return b&&b.length&&k&&k.length?rn(b,k,wi($,2)):b}function rh(b,k,$){return b&&b.length&&k&&k.length?rn(b,k,t,$):b}var nd=dc(function(b,k){var $=b==null?0:b.length,ye=ei(b,k);return Zt(b,Fo(k,function(qe){return S(qe,$)?+qe:qe}).sort(Eh)),ye});function NA(b,k){var $=[];if(!(b&&b.length))return $;var ye=-1,qe=[],ht=b.length;for(k=wi(k,3);++ye<ht;){var Tt=b[ye];k(Tt,ye,b)&&($.push(Tt),qe.push(ye))}return Zt(b,qe),$}function pm(b){return b==null?b:oc.call(b)}function $0(b,k,$){var ye=b==null?0:b.length;return ye?($&&typeof $!="number"&&E(b,k,$)?(k=0,$=ye):(k=k==null?0:Oo(k),$=$===t?ye:Oo($)),ki(b,k,$)):[]}function Bp(b,k){return Yo(b,k)}function Vy(b,k,$){return Ao(b,k,wi($,2))}function Kh(b,k){var $=b==null?0:b.length;if($){var ye=Yo(b,k);if(ye<$&&sh(b[ye],k))return ye}return-1}function Jg(b,k){return Yo(b,k,!0)}function H0(b,k,$){return Ao(b,k,wi($,2),!0)}function Yf(b,k){var $=b==null?0:b.length;if($){var ye=Yo(b,k,!0)-1;if(sh(b[ye],k))return ye}return-1}function $m(b){return b&&b.length?po(b):[]}function qf(b,k){return b&&b.length?po(b,wi(k,2)):[]}function e1(b){var k=b==null?0:b.length;return k?ki(b,1,k):[]}function Op(b,k,$){return b&&b.length?(k=$||k===t?1:Oo(k),ki(b,0,k<0?0:k)):[]}function Hm(b,k,$){var ye=b==null?0:b.length;return ye?(k=$||k===t?1:Oo(k),k=ye-k,ki(b,k<0?0:k,ye)):[]}function Ip(b,k){return b&&b.length?wu(b,wi(k,3),!1,!0):[]}function t1(b,k){return b&&b.length?wu(b,wi(k,3)):[]}var Il=On(function(b){return es(ks(b,1,Ql,!0))}),Zm=On(function(b){var k=jA(b);return Ql(k)&&(k=t),es(ks(b,1,Ql,!0),wi(k,2))}),n1=On(function(b){var k=jA(b);return k=typeof k=="function"?k:t,es(ks(b,1,Ql,!0),t,k)});function gf(b){return b&&b.length?es(b):[]}function Z0(b,k){return b&&b.length?es(b,wi(k,2)):[]}function yf(b,k){return k=typeof k=="function"?k:t,b&&b.length?es(b,t,k):[]}function Xm(b){if(!(b&&b.length))return[];var k=0;return b=du(b,function($){if(Ql($))return k=ms($.length,k),!0}),Xh(k,function($){return Fo(b,Hh($))})}function ul(b,k){if(!(b&&b.length))return[];var $=Xm(b);return k==null?$:Fo($,function(ye){return Ws(k,t,ye)})}var $y=On(function(b,k){return Ql(b)?al(b,k):[]}),r1=On(function(b){return La(du(b,Ql))}),i1=On(function(b){var k=jA(b);return Ql(k)&&(k=t),La(du(b,Ql),wi(k,2))}),WA=On(function(b){var k=jA(b);return k=typeof k=="function"?k:t,La(du(b,Ql),t,k)}),Jm=On(Xm);function X0(b,k){return Xu(b||[],k||[],uc)}function vf(b,k){return Xu(b||[],k||[],Tr)}var GA=On(function(b){var k=b.length,$=k>1?b[k-1]:t;return $=typeof $=="function"?(b.pop(),$):t,ul(b,$)});function Cf(b){var k=ot(b);return k.__chain__=!0,k}function kp(b,k){return k(b),b}function hc(b,k){return k(b)}var Vf=dc(function(b){var k=b.length,$=k?b[0]:0,ye=this.__wrapped__,qe=function(ht){return ei(ht,b)};return k>1||this.__actions__.length||!(ye instanceof Gr)||!S($)?this.thru(qe):(ye=ye.slice($,+$+(k?1:0)),ye.__actions__.push({func:hc,args:[qe],thisArg:t}),new gi(ye,this.__chain__).thru(function(ht){return k&&!ht.length&&ht.push(t),ht}))});function $f(){return Cf(this)}function e0(){return new gi(this.value(),this.__chain__)}function t0(){this.__values__===t&&(this.__values__=ag(this.value()));var b=this.__index__>=this.__values__.length,k=b?t:this.__values__[this.__index__++];return{done:b,value:k}}function n0(){return this}function Hy(b){for(var k,$=this;$ instanceof _s;){var ye=Wl($);ye.__index__=0,ye.__values__=t,k?qe.__wrapped__=ye:k=ye;var qe=ye;$=$.__wrapped__}return qe.__wrapped__=b,k}function r0(){var b=this.__wrapped__;if(b instanceof Gr){var k=b;return this.__actions__.length&&(k=new Gr(this)),k=k.reverse(),k.__actions__.push({func:hc,args:[pm],thisArg:t}),new gi(k,this.__chain__)}return this.thru(pm)}function o1(){return _l(this.__wrapped__,this.__actions__)}var i0=kc(function(b,k,$){Yr.call(b,$)?++b[$]:Kr(b,$,1)});function o0(b,k,$){var ye=xo(b)?Ad:Os;return $&&E(b,k,$)&&(k=t),ye(b,wi(k,3))}function s0(b,k){var $=xo(b)?du:Zu;return $(b,wi(k,3))}var mm=LA(Ou),s1=LA(zA);function J0(b,k){return ks(Cm(b,k),1)}function a1(b,k){return ks(Cm(b,k),Ze)}function eg(b,k,$){return $=$===t?1:Oo($),ks(Cm(b,k),$)}function gm(b,k){var $=xo(b)?el:Hu;return $(b,wi(k,3))}function ym(b,k){var $=xo(b)?gl:hA;return $(b,wi(k,3))}var vm=kc(function(b,k,$){Yr.call(b,$)?b[$].push(k):Kr(b,$,[k])});function Tp(b,k,$,ye){b=Kc(b)?b:cl(b),$=$&&!ye?Oo($):0;var qe=b.length;return $<0&&($=ms(qe+$,0)),og(b)?$<=qe&&b.indexOf(k,$)>-1:!!qe&&Gs(b,k,$)>-1}var ih=On(function(b,k,$){var ye=-1,qe=typeof k=="function",ht=Kc(b)?an(b.length):[];return Hu(b,function(Tt){ht[++ye]=qe?Ws(k,Tt,$):jl(Tt,k,$)}),ht}),Od=kc(function(b,k,$){Kr(b,$,k)});function Cm(b,k){var $=xo(b)?Fo:Xe;return $(b,wi(k,3))}function Hf(b,k,$,ye){return b==null?[]:(xo(k)||(k=k==null?[]:[k]),$=ye?t:$,xo($)||($=$==null?[]:[$]),kt(b,k,$))}var Zy=kc(function(b,k,$){b[$?0:1].push(k)},function(){return[[],[]]});function a0(b,k,$){var ye=xo(b)?yh:Zh,qe=arguments.length<3;return ye(b,wi(k,4),$,qe,Hu)}function m(b,k,$){var ye=xo(b)?Nd:Zh,qe=arguments.length<3;return ye(b,wi(k,4),$,qe,hA)}function C(b,k){var $=xo(b)?du:Zu;return $(b,Xr(wi(k,3)))}function D(b){var k=xo(b)?Uo:zn;return k(b)}function Q(b,k,$){($?E(b,k,$):k===t)?k=1:k=Oo(k);var ye=xo(b)?PA:Ln;return ye(b,k)}function le(b){var k=xo(b)?Sd:_o;return k(b)}function ge(b){if(b==null)return 0;if(Kc(b))return og(b)?pd(b):b.length;var k=bl(b);return k==Lt||k==Pn?b.size:ke(b).length}function tt(b,k,$){var ye=xo(b)?zu:os;return $&&E(b,k,$)&&(k=t),ye(b,wi(k,3))}var Ot=On(function(b,k){if(b==null)return[];var $=k.length;return $>1&&E(b,k[0],k[1])?k=[]:$>2&&E(k[0],k[1],k[2])&&(k=[k[0]]),kt(b,ks(k,1),[])}),Wt=cs||function(){return Ir.Date.now()};function wn(b,k){if(typeof k!="function")throw new tu(l);return b=Oo(b),function(){if(--b<1)return k.apply(this,arguments)}}function ir(b,k,$){return k=$?t:k,k=b&&k==null?b.length:k,Ho(b,G,t,t,t,t,k)}function mr(b,k){var $;if(typeof k!="function")throw new tu(l);return b=Oo(b),function(){return--b>0&&($=k.apply(this,arguments)),b<=1&&(k=t),$}}var or=On(function(b,k,$){var ye=N;if($.length){var qe=tl($,Tc(or));ye|=V}return Ho(b,ye,k,$,qe)}),Vr=On(function(b,k,$){var ye=N|Y;if($.length){var qe=tl($,Tc(Vr));ye|=V}return Ho(k,ye,b,$,qe)});function ai(b,k,$){k=$?t:k;var ye=Ho(b,se,t,t,t,t,t,k);return ye.placeholder=ai.placeholder,ye}function ui(b,k,$){k=$?t:k;var ye=Ho(b,re,t,t,t,t,t,k);return ye.placeholder=ui.placeholder,ye}function xl(b,k,$){var ye,qe,ht,Tt,$t,ln,Yn=0,Vn=!1,pr=!1,$r=!0;if(typeof b!="function")throw new tu(l);k=rd(k)||0,kl($)&&(Vn=!!$.leading,pr="maxWait"in $,ht=pr?ms(rd($.maxWait)||0,k):ht,$r="trailing"in $?!!$.trailing:$r);function Ii(iA){var Jf=ye,Sm=qe;return ye=qe=t,Yn=iA,Tt=b.apply(Sm,Jf),Tt}function no(iA){return Yn=iA,$t=ti(vs,k),Vn?Ii(iA):Tt}function ts(iA){var Jf=iA-ln,Sm=iA-Yn,XO=k-Jf;return pr?ao(XO,ht-Sm):XO}function ro(iA){var Jf=iA-ln,Sm=iA-Yn;return ln===t||Jf>=k||Jf<0||pr&&Sm>=ht}function vs(){var iA=Wt();if(ro(iA))return Ps(iA);$t=ti(vs,ts(iA))}function Ps(iA){return $t=t,$r&&ye?Ii(iA):(ye=qe=t,Tt)}function Uh(){$t!==t&&gA($t),Yn=0,ye=ln=qe=$t=t}function Rd(){return $t===t?Tt:Ps(Wt())}function zh(){var iA=Wt(),Jf=ro(iA);if(ye=arguments,qe=this,ln=iA,Jf){if($t===t)return no(ln);if(pr)return gA($t),$t=ti(vs,k),Ii(ln)}return $t===t&&($t=ti(vs,k)),Tt}return zh.cancel=Uh,zh.flush=Rd,zh}var hn=On(function(b,k){return of(b,1,k)}),en=On(function(b,k,$){return of(b,rd(k)||0,$)});function yn(b){return Ho(b,he)}function Cr(b,k){if(typeof b!="function"||k!=null&&typeof k!="function")throw new tu(l);var $=function(){var ye=arguments,qe=k?k.apply(this,ye):ye[0],ht=$.cache;if(ht.has(qe))return ht.get(qe);var Tt=b.apply(this,ye);return $.cache=ht.set(qe,Tt)||ht,Tt};return $.cache=new(Cr.Cache||yl),$}Cr.Cache=yl;function Xr(b){if(typeof b!="function")throw new tu(l);return function(){var k=arguments;switch(k.length){case 0:return!b.call(this);case 1:return!b.call(this,k[0]);case 2:return!b.call(this,k[0],k[1]);case 3:return!b.call(this,k[0],k[1],k[2])}return!b.apply(this,k)}}function Ti(b){return mr(2,b)}var Pi=lu(function(b,k){k=k.length==1&&xo(k[0])?Fo(k[0],hu(wi())):Fo(ks(k,1),hu(wi()));var $=k.length;return On(function(ye){for(var qe=-1,ht=ao(ye.length,$);++qe<ht;)ye[qe]=k[qe].call(this,ye[qe]);return Ws(b,this,ye)})}),ji=On(function(b,k){var $=tl(k,Tc(ji));return Ho(b,V,t,k,$)}),Gl=On(function(b,k){var $=tl(k,Tc(Gl));return Ho(b,ne,t,k,$)}),ys=dc(function(b,k){return Ho(b,oe,t,t,t,k)});function oh(b,k){if(typeof b!="function")throw new tu(l);return k=k===t?k:Oo(k),On(b,k)}function l1(b,k){if(typeof b!="function")throw new tu(l);return k=k==null?0:ms(Oo(k),0),On(function($){var ye=$[k],qe=Ua($,0,k);return ye&&Cc(qe,ye),Ws(b,this,qe)})}function tg(b,k,$){var ye=!0,qe=!0;if(typeof b!="function")throw new tu(l);return kl($)&&(ye="leading"in $?!!$.leading:ye,qe="trailing"in $?!!$.trailing:qe),xl(b,k,{leading:ye,maxWait:k,trailing:qe})}function i_(b){return ir(b,1)}function Xy(b,k){return ji(mA(k),b)}function o_(){if(!arguments.length)return[];var b=arguments[0];return xo(b)?b:[b]}function Id(b){return vl(b,P)}function l0(b,k){return k=typeof k=="function"?k:t,vl(b,P,k)}function s_(b){return vl(b,B|P)}function a_(b,k){return k=typeof k=="function"?k:t,vl(b,B|P,k)}function l_(b,k){return k==null||sl(b,k,kn(k))}function sh(b,k){return b===k||b!==b&&k!==k}var u_=cf(su),A_=cf(function(b,k){return b>=k}),_m=Xc(function(){return arguments}())?Xc:function(b){return Yl(b)&&Yr.call(b,"callee")&&!Qc.call(b,"callee")},xo=an.isArray,Pp=Co?hu(Co):I;function Kc(b){return b!=null&&bm(b.length)&&!ah(b)}function Ql(b){return Yl(b)&&Kc(b)}function c_(b){return b===!0||b===!1||Yl(b)&&Qs(b)==Ue}var Zf=wh||f3,n3=Zi?hu(Zi):a;function r3(b){return Yl(b)&&b.nodeType===1&&!ig(b)}function d_(b){if(b==null)return!0;if(Kc(b)&&(xo(b)||typeof b=="string"||typeof b.splice=="function"||Zf(b)||Rp(b)||_m(b)))return!b.length;var k=bl(b);if(k==Lt||k==Pn)return!b.size;if(je(b))return!ke(b).length;for(var $ in b)if(Yr.call(b,$))return!1;return!0}function ng(b,k){return c(b,k)}function h_(b,k,$){$=typeof $=="function"?$:t;var ye=$?$(b,k):t;return ye===t?c(b,k,t,$):!!ye}function u0(b){if(!Yl(b))return!1;var k=Qs(b);return k==it||k==Be||typeof b.message=="string"&&typeof b.name=="string"&&!ig(b)}function f_(b){return typeof b=="number"&&IA(b)}function ah(b){if(!kl(b))return!1;var k=Qs(b);return k==_t||k==pt||k==Pt||k==tn}function rg(b){return typeof b=="number"&&b==Oo(b)}function bm(b){return typeof b=="number"&&b>-1&&b%1==0&&b<=Je}function kl(b){var k=typeof b;return b!=null&&(k=="object"||k=="function")}function Yl(b){return b!=null&&typeof b=="object"}var p_=To?hu(To):M;function A0(b,k){return b===k||T(b,k,bo(k))}function bA(b,k,$){return $=typeof $=="function"?$:t,T(b,k,bo(k),$)}function Kp(b){return u1(b)&&b!=+b}function Jy(b){if(Ie(b))throw new Ri(s);return z(b)}function m_(b){return b===null}function g_(b){return b==null}function u1(b){return typeof b=="number"||Yl(b)&&Qs(b)==nn}function ig(b){if(!Yl(b)||Qs(b)!=vn)return!1;var k=Ca(b);if(k===null)return!0;var $=Yr.call(k,"constructor")&&k.constructor;return typeof $=="function"&&$ instanceof $&&xc.call($)==Fl}var A1=ca?hu(ca):q;function y_(b){return rg(b)&&b>=-9007199254740991&&b<=Je}var v_=Pa?hu(Pa):te;function og(b){return typeof b=="string"||!xo(b)&&Yl(b)&&Qs(b)==pn}function Rc(b){return typeof b=="symbol"||Yl(b)&&Qs(b)==$n}var Rp=cu?hu(cu):ae;function C_(b){return b===t}function sg(b){return Yl(b)&&bl(b)==vr}function ev(b){return Yl(b)&&Qs(b)==Zn}var __=cf($e),tv=cf(function(b,k){return b<=k});function ag(b){if(!b)return[];if(Kc(b))return og(b)?Nu(b):Ts(b);if(gu&&b[gu])return tf(b[gu]());var k=bl(b),$=k==Lt?fd:k==Pn?oa:cl;return $(b)}function kd(b){if(!b)return b===0?b:0;if(b=rd(b),b===Ze||b===-1/0){var k=b<0?-1:1;return k*Ne}return b===b?b:0}function Oo(b){var k=kd(b),$=k%1;return k===k?$?k-$:k:0}function c1(b){return b?iu(Oo(b),0,De):0}function rd(b){if(typeof b=="number")return b;if(Rc(b))return we;if(kl(b)){var k=typeof b.valueOf=="function"?b.valueOf():b;b=kl(k)?k+"":k}if(typeof b!="string")return b===0?b:+b;b=bc(b);var $=ws.test(b);return $||Hi.test(b)?qn(b.slice(2),$?2:8):eo.test(b)?we:+b}function b_(b){return Su(b,An(b))}function d(b){return b?iu(Oo(b),-9007199254740991,Je):b===0?b:0}function u(b){return b==null?"":ss(b)}var h=FA(function(b,k){if(je(k)||Kc(k)){Su(k,kn(k),b);return}for(var $ in k)Yr.call(k,$)&&uc(b,$,k[$])}),v=FA(function(b,k){Su(k,An(k),b)}),w=FA(function(b,k,$,ye){Su(k,An(k),b,ye)}),K=FA(function(b,k,$,ye){Su(k,kn(k),b,ye)}),F=dc(ei);function W(b,k){var $=Vu(b);return k==null?$:Eo($,k)}var X=On(function(b,k){b=Jo(b);var $=-1,ye=k.length,qe=ye>2?k[2]:t;for(qe&&E(k[0],k[1],qe)&&(ye=1);++$<ye;)for(var ht=k[$],Tt=An(ht),$t=-1,ln=Tt.length;++$t<ln;){var Yn=Tt[$t],Vn=b[Yn];(Vn===t||sh(Vn,Ka[Yn])&&!Yr.call(b,Yn))&&(b[Yn]=ht[Yn])}return b}),ie=On(function(b){return b.push(t,Bd),Ws(cr,t,b)});function de(b,k){return dd(b,wi(k,3),Cl)}function _e(b,k){return dd(b,wi(k,3),ou)}function Re(b,k){return b==null?b:Oc(b,wi(k,3),An)}function ze(b,k){return b==null?b:bu(b,wi(k,3),An)}function We(b,k){return b&&Cl(b,wi(k,3))}function et(b,k){return b&&ou(b,wi(k,3))}function At(b){return b==null?[]:Ic(b,kn(b))}function Ct(b){return b==null?[]:Ic(b,An(b))}function Nt(b,k,$){var ye=b==null?t:xu(b,k);return ye===t?$:ye}function St(b,k){return b!=null&&cm(b,k,au)}function Le(b,k){return b!=null&&cm(b,k,RA)}var lt=lf(function(b,k,$){k!=null&&typeof k.toString!="function"&&(k=cA.call(k)),b[k]=$},m0(id)),Bt=lf(function(b,k,$){k!=null&&typeof k.toString!="function"&&(k=cA.call(k)),Yr.call(b,k)?b[k].push($):b[k]=[$]},wi),dn=On(jl);function kn(b){return Kc(b)?ol(b):ke(b)}function An(b){return Kc(b)?ol(b,!0):Te(b)}function Bn(b,k){var $={};return k=wi(k,3),Cl(b,function(ye,qe,ht){Kr($,k(ye,qe,ht),ye)}),$}function nr(b,k){var $={};return k=wi(k,3),Cl(b,function(ye,qe,ht){Kr($,qe,k(ye,qe,ht))}),$}var jn=FA(function(b,k,$){ft(b,k,$)}),cr=FA(function(b,k,$,ye){ft(b,k,$,ye)}),Tn=dc(function(b,k){var $={};if(b==null)return $;var ye=!1;k=Fo(k,function(ht){return ht=Sa(ht,b),ye||(ye=ht.length>1),ht}),Su(b,hf(b),$),ye&&($=vl($,B|O|P,Bl));for(var qe=k.length;qe--;)wa($,k[qe]);return $});function Nr(b,k){return hi(b,Xr(wi(k)))}var _i=dc(function(b,k){return b==null?{}:Rt(b,k)});function hi(b,k){if(b==null)return{};var $=Fo(hf(b),function(ye){return[ye]});return k=wi(k),Ut(b,$,function(ye,qe){return k(ye,qe[0])})}function Jr(b,k,$){k=Sa(k,b);var ye=-1,qe=k.length;for(qe||(qe=1,b=t);++ye<qe;){var ht=b==null?t:b[fa(k[ye])];ht===t&&(ye=qe,ht=$),b=ah(ht)?ht.call(b):ht}return b}function jo(b,k,$){return b==null?b:Tr(b,k,$)}function Al(b,k,$,ye){return ye=typeof ye=="function"?ye:t,b==null?b:Tr(b,k,$,ye)}var ql=Nf(kn),Ju=Nf(An);function Td(b,k,$){var ye=xo(b),qe=ye||Zf(b)||Rp(b);if(k=wi(k,4),$==null){var ht=b&&b.constructor;qe?$=ye?new ht:[]:kl(b)?$=ah(ht)?Vu(Ca(b)):{}:$={}}return(qe?el:Cl)(b,function(Tt,$t,ln){return k($,Tt,$t,ln)}),$}function Dc(b,k){return b==null?!0:wa(b,k)}function eA(b,k,$){return b==null?b:DA(b,k,mA($))}function qa(b,k,$,ye){return ye=typeof ye=="function"?ye:t,b==null?b:DA(b,k,mA($),ye)}function cl(b){return b==null?[]:Nc(b,kn(b))}function tA(b){return b==null?[]:Nc(b,An(b))}function nA(b,k,$){return $===t&&($=k,k=t),$!==t&&($=rd($),$=$===$?$:0),k!==t&&(k=rd(k),k=k===k?k:0),iu(rd(b),k,$)}function fc(b,k,$){return k=kd(k),$===t?($=k,k=0):$=kd($),b=rd(b),Mu(b,k,$)}function Pd(b,k,$){if($&&typeof $!="boolean"&&E(b,k,$)&&(k=$=t),$===t&&(typeof k=="boolean"?($=k,k=t):typeof b=="boolean"&&($=b,b=t)),b===t&&k===t?(b=0,k=1):(b=kd(b),k===t?(k=b,b=0):k=kd(k)),b>k){var ye=b;b=k,k=ye}if($||b%1||k%1){var qe=Vc();return ao(b+qe*(k-b+Er("1e-"+((qe+"").length-1))),k)}return Mn(b,k)}var Iu=Ed(function(b,k,$){return k=k.toLowerCase(),b+($?pc(k):k)});function pc(b){return iv(u(b).toLowerCase())}function Vl(b){return b=u(b),b&&b.replace(Go,Jh).replace(ml,"")}function ku(b,k,$){b=u(b),k=ss(k);var ye=b.length;$=$===t?ye:iu(Oo($),0,ye);var qe=$;return $-=k.length,$>=0&&b.slice($,qe)==k}function Tu(b){return b=u(b),b&&qt.test(b)?b.replace(ct,fu):b}function $l(b){return b=u(b),b&&Jn.test(b)?b.replace(Br,"\\$&"):b}var ma=Ed(function(b,k,$){return b+($?"-":"")+k.toLowerCase()}),Rh=Ed(function(b,k,$){return b+($?" ":"")+k.toLowerCase()}),c0=lm("toLowerCase");function Dh(b,k,$){b=u(b),k=Oo(k);var ye=k?pd(b):0;if(!k||ye>=k)return b;var qe=(k-ye)/2;return Af(yu(qe),$)+b+Af(dA(qe),$)}function i3(b,k,$){b=u(b),k=Oo(k);var ye=k?pd(b):0;return k&&ye<k?b+Af(k-ye,$):b}function d0(b,k,$){b=u(b),k=Oo(k);var ye=k?pd(b):0;return k&&ye<k?Af(k-ye,$)+b:b}function xm(b,k,$){return $||k==null?k=0:k&&(k=+k),Ul(u(b).replace(un,""),k||0)}function h0(b,k,$){return($?E(b,k,$):k===t)?k=1:k=Oo(k),bn(u(b),k)}function f0(){var b=arguments,k=u(b[0]);return b.length<3?k:k.replace(b[1],b[2])}var p0=Ed(function(b,k,$){return b+($?"_":"")+k.toLowerCase()});function x_(b,k,$){return $&&typeof $!="number"&&E(b,k,$)&&(k=$=t),$=$===t?De:$>>>0,$?(b=u(b),b&&(typeof k=="string"||k!=null&&!A1(k))&&(k=ss(k),!k&&pu(b))?Ua(Nu(b),0,$):b.split(k,$)):[]}var M_=Ed(function(b,k,$){return b+($?" ":"")+iv(k)});function w_(b,k,$){return b=u(b),$=$==null?0:iu(Oo($),0,b.length),k=ss(k),b.slice($,$+k.length)==k}function S_(b,k,$){var ye=ot.templateSettings;$&&E(b,k,$)&&(k=t),b=u(b),k=w({},k,ye,Wf);var qe=w({},k.imports,ye.imports,Wf),ht=kn(qe),Tt=Nc(qe,ht),$t,ln,Yn=0,Vn=k.interpolate||Za,pr="__p += '",$r=JA((k.escape||Za).source+"|"+Vn.source+"|"+(Vn===on?Wi:Za).source+"|"+(k.evaluate||Za).source+"|$","g"),Ii="//# sourceURL="+(Yr.call(k,"sourceURL")?(k.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Vi+"]")+`
`;b.replace($r,function(ro,vs,Ps,Uh,Rd,zh){return Ps||(Ps=Uh),pr+=b.slice(Yn,zh).replace(Xa,XA),vs&&($t=!0,pr+=`' +
__e(`+vs+`) +
'`),Rd&&(ln=!0,pr+=`';
`+Rd+`;
__p += '`),Ps&&(pr+=`' +
((__t = (`+Ps+`)) == null ? '' : __t) +
'`),Yn=zh+ro.length,ro}),pr+=`';
`;var no=Yr.call(k,"variable")&&k.variable;if(!no)pr=`with (obj) {
`+pr+`
}
`;else if(Or.test(no))throw new Ri(o);pr=(ln?pr.replace(p,""):pr).replace(Fe,"$1").replace(Qe,"$1;"),pr="function("+(no||"obj")+`) {
`+(no?"":`obj || (obj = {});
`)+"var __t, __p = ''"+($t?", __e = _.escape":"")+(ln?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+pr+`return __p
}`;var ts=I_(function(){return Po(ht,Ii+"return "+pr).apply(t,Tt)});if(ts.source=pr,u0(ts))throw ts;return ts}function nv(b){return u(b).toLowerCase()}function rv(b){return u(b).toUpperCase()}function Xf(b,k,$){if(b=u(b),b&&($||k===t))return bc(b);if(!b||!(k=ss(k)))return b;var ye=Nu(b),qe=Nu(k),ht=EA(ye,qe),Tt=Wc(ye,qe)+1;return Ua(ye,ht,Tt).join("")}function E_(b,k,$){if(b=u(b),b&&($||k===t))return b.slice(0,Yd(b)+1);if(!b||!(k=ss(k)))return b;var ye=Nu(b),qe=Wc(ye,Nu(k))+1;return Ua(ye,0,qe).join("")}function B_(b,k,$){if(b=u(b),b&&($||k===t))return b.replace(un,"");if(!b||!(k=ss(k)))return b;var ye=Nu(b),qe=EA(ye,Nu(k));return Ua(ye,qe).join("")}function o3(b,k){var $=fe,ye=Ee;if(kl(k)){var qe="separator"in k?k.separator:qe;$="length"in k?Oo(k.length):$,ye="omission"in k?ss(k.omission):ye}b=u(b);var ht=b.length;if(pu(b)){var Tt=Nu(b);ht=Tt.length}if($>=ht)return b;var $t=$-pd(ye);if($t<1)return ye;var ln=Tt?Ua(Tt,0,$t).join(""):b.slice(0,$t);if(qe===t)return ln+ye;if(Tt&&($t+=ln.length-$t),A1(qe)){if(b.slice($t).search(qe)){var Yn,Vn=ln;for(qe.global||(qe=JA(qe.source,u(Bi.exec(qe))+"g")),qe.lastIndex=0;Yn=qe.exec(Vn);)var pr=Yn.index;ln=ln.slice(0,pr===t?$t:pr)}}else if(b.indexOf(ss(qe),$t)!=$t){var $r=ln.lastIndexOf(qe);$r>-1&&(ln=ln.slice(0,$r))}return ln+ye}function s3(b){return b=u(b),b&&dt.test(b)?b.replace(rt,Uf):b}var a3=Ed(function(b,k,$){return b+($?" ":"")+k.toUpperCase()}),iv=lm("toUpperCase");function O_(b,k,$){return b=u(b),k=$?t:k,k===t?ef(b)?bh(b):_p(b):b.match(k)||[]}var I_=On(function(b,k){try{return Ws(b,t,k)}catch($){return u0($)?$:new Ri($)}}),l3=dc(function(b,k){return el(k,function($){$=fa($),Kr(b,$,or(b[$],b))}),b});function u3(b){var k=b==null?0:b.length,$=wi();return b=k?Fo(b,function(ye){if(typeof ye[1]!="function")throw new tu(l);return[$(ye[0]),ye[1]]}):[],On(function(ye){for(var qe=-1;++qe<k;){var ht=b[qe];if(Ws(ht[0],this,ye))return Ws(ht[1],this,ye)}})}function Fh(b){return rf(vl(b,B))}function m0(b){return function(){return b}}function k_(b,k){return b==null||b!==b?k:b}var A3=wp(),c3=wp(!0);function id(b){return b}function rA(b){return be(typeof b=="function"?b:vl(b,B))}function Kd(b){return mt(vl(b,B))}function Mm(b,k){return ut(b,vl(k,B))}var Lh=On(function(b,k){return function($){return jl($,b,k)}}),wm=On(function(b,k){return function($){return jl(b,$,k)}});function lh(b,k,$){var ye=kn(k),qe=Ic(k,ye);$==null&&!(kl(k)&&(qe.length||!ye.length))&&($=k,k=b,b=this,qe=Ic(k,kn(k)));var ht=!(kl($)&&"chain"in $)||!!$.chain,Tt=ah(b);return el(qe,function($t){var ln=k[$t];b[$t]=ln,Tt&&(b.prototype[$t]=function(){var Yn=this.__chain__;if(ht||Yn){var Vn=b(this.__wrapped__),pr=Vn.__actions__=Ts(this.__actions__);return pr.push({func:ln,args:arguments,thisArg:b}),Vn.__chain__=Yn,Vn}return ln.apply(b,Cc([this.value()],arguments))})}),b}function aN(){return Ir._===this&&(Ir._=Ll),this}function d3(){}function lN(b){return b=Oo(b),On(function(k){return Et(k,b)})}var uN=uf(Fo),AN=uf(Ad),cN=uf(zu);function ZO(b){return R(b)?Hh(fa(b)):It(b)}function dN(b){return function(k){return b==null?t:xu(b,k)}}var hN=eh(),fN=eh(!0);function h3(){return[]}function f3(){return!1}function pN(){return{}}function mN(){return""}function gN(){return!0}function yN(b,k){if(b=Oo(b),b<1||b>Je)return[];var $=De,ye=ao(b,De);k=wi(k),b-=De;for(var qe=Xh(ye,k);++$<b;)k($);return qe}function vN(b){return xo(b)?Fo(b,fa):Rc(b)?[b]:Ts(na(u(b)))}function CN(b){var k=++tc;return u(b)+k}var _N=ed(function(b,k){return b+k},0),bN=Nl("ceil"),xN=ed(function(b,k){return b/k},1),MN=Nl("floor");function wN(b){return b&&b.length?Is(b,id,su):t}function SN(b,k){return b&&b.length?Is(b,wi(k,2),su):t}function EN(b){return jc(b,id)}function BN(b,k){return jc(b,wi(k,2))}function ON(b){return b&&b.length?Is(b,id,$e):t}function IN(b,k){return b&&b.length?Is(b,wi(k,2),$e):t}var kN=ed(function(b,k){return b*k},1),TN=Nl("round"),PN=ed(function(b,k){return b-k},0);function KN(b){return b&&b.length?ZA(b,id):0}function RN(b,k){return b&&b.length?ZA(b,wi(k,2)):0}return ot.after=wn,ot.ary=ir,ot.assign=h,ot.assignIn=v,ot.assignInWith=w,ot.assignWith=K,ot.at=F,ot.before=mr,ot.bind=or,ot.bindAll=l3,ot.bindKey=Vr,ot.castArray=o_,ot.chain=Cf,ot.chunk=Qa,ot.compact=pa,ot.concat=as,ot.cond=u3,ot.conforms=Fh,ot.constant=m0,ot.countBy=i0,ot.create=W,ot.curry=ai,ot.curryRight=ui,ot.debounce=xl,ot.defaults=X,ot.defaultsDeep=ie,ot.defer=hn,ot.delay=en,ot.difference=Ci,ot.differenceBy=ls,ot.differenceWith=ra,ot.drop=Ys,ot.dropRight=xs,ot.dropRightWhile=Bu,ot.dropWhile=Ko,ot.fill=Pc,ot.filter=s0,ot.flatMap=J0,ot.flatMapDeep=a1,ot.flatMapDepth=eg,ot.flatten=CA,ot.flattenDeep=Ya,ot.flattenDepth=Ol,ot.flip=yn,ot.flow=A3,ot.flowRight=c3,ot.fromPairs=Qf,ot.functions=At,ot.functionsIn=Ct,ot.groupBy=vm,ot.initial=qm,ot.intersection=q0,ot.intersectionBy=td,ot.intersectionWith=dm,ot.invert=lt,ot.invertBy=Bt,ot.invokeMap=ih,ot.iteratee=rA,ot.keyBy=Od,ot.keys=kn,ot.keysIn=An,ot.map=Cm,ot.mapKeys=Bn,ot.mapValues=nr,ot.matches=Kd,ot.matchesProperty=Mm,ot.memoize=Cr,ot.merge=jn,ot.mergeWith=cr,ot.method=Lh,ot.methodOf=wm,ot.mixin=lh,ot.negate=Xr,ot.nthArg=lN,ot.omit=Tn,ot.omitBy=Nr,ot.once=Ti,ot.orderBy=Hf,ot.over=uN,ot.overArgs=Pi,ot.overEvery=AN,ot.overSome=cN,ot.partial=ji,ot.partialRight=Gl,ot.partition=Zy,ot.pick=_i,ot.pickBy=hi,ot.property=ZO,ot.propertyOf=dN,ot.pull=Vm,ot.pullAll=fm,ot.pullAllBy=_A,ot.pullAllWith=rh,ot.pullAt=nd,ot.range=hN,ot.rangeRight=fN,ot.rearg=ys,ot.reject=C,ot.remove=NA,ot.rest=oh,ot.reverse=pm,ot.sampleSize=Q,ot.set=jo,ot.setWith=Al,ot.shuffle=le,ot.slice=$0,ot.sortBy=Ot,ot.sortedUniq=$m,ot.sortedUniqBy=qf,ot.split=x_,ot.spread=l1,ot.tail=e1,ot.take=Op,ot.takeRight=Hm,ot.takeRightWhile=Ip,ot.takeWhile=t1,ot.tap=kp,ot.throttle=tg,ot.thru=hc,ot.toArray=ag,ot.toPairs=ql,ot.toPairsIn=Ju,ot.toPath=vN,ot.toPlainObject=b_,ot.transform=Td,ot.unary=i_,ot.union=Il,ot.unionBy=Zm,ot.unionWith=n1,ot.uniq=gf,ot.uniqBy=Z0,ot.uniqWith=yf,ot.unset=Dc,ot.unzip=Xm,ot.unzipWith=ul,ot.update=eA,ot.updateWith=qa,ot.values=cl,ot.valuesIn=tA,ot.without=$y,ot.words=O_,ot.wrap=Xy,ot.xor=r1,ot.xorBy=i1,ot.xorWith=WA,ot.zip=Jm,ot.zipObject=X0,ot.zipObjectDeep=vf,ot.zipWith=GA,ot.entries=ql,ot.entriesIn=Ju,ot.extend=v,ot.extendWith=w,lh(ot,ot),ot.add=_N,ot.attempt=I_,ot.camelCase=Iu,ot.capitalize=pc,ot.ceil=bN,ot.clamp=nA,ot.clone=Id,ot.cloneDeep=s_,ot.cloneDeepWith=a_,ot.cloneWith=l0,ot.conformsTo=l_,ot.deburr=Vl,ot.defaultTo=k_,ot.divide=xN,ot.endsWith=ku,ot.eq=sh,ot.escape=Tu,ot.escapeRegExp=$l,ot.every=o0,ot.find=mm,ot.findIndex=Ou,ot.findKey=de,ot.findLast=s1,ot.findLastIndex=zA,ot.findLastKey=_e,ot.floor=MN,ot.forEach=gm,ot.forEachRight=ym,ot.forIn=Re,ot.forInRight=ze,ot.forOwn=We,ot.forOwnRight=et,ot.get=Nt,ot.gt=u_,ot.gte=A_,ot.has=St,ot.hasIn=Le,ot.head=pf,ot.identity=id,ot.includes=Tp,ot.indexOf=nh,ot.inRange=fc,ot.invoke=dn,ot.isArguments=_m,ot.isArray=xo,ot.isArrayBuffer=Pp,ot.isArrayLike=Kc,ot.isArrayLikeObject=Ql,ot.isBoolean=c_,ot.isBuffer=Zf,ot.isDate=n3,ot.isElement=r3,ot.isEmpty=d_,ot.isEqual=ng,ot.isEqualWith=h_,ot.isError=u0,ot.isFinite=f_,ot.isFunction=ah,ot.isInteger=rg,ot.isLength=bm,ot.isMap=p_,ot.isMatch=A0,ot.isMatchWith=bA,ot.isNaN=Kp,ot.isNative=Jy,ot.isNil=g_,ot.isNull=m_,ot.isNumber=u1,ot.isObject=kl,ot.isObjectLike=Yl,ot.isPlainObject=ig,ot.isRegExp=A1,ot.isSafeInteger=y_,ot.isSet=v_,ot.isString=og,ot.isSymbol=Rc,ot.isTypedArray=Rp,ot.isUndefined=C_,ot.isWeakMap=sg,ot.isWeakSet=ev,ot.join=mf,ot.kebabCase=ma,ot.last=jA,ot.lastIndexOf=hm,ot.lowerCase=Rh,ot.lowerFirst=c0,ot.lt=__,ot.lte=tv,ot.max=wN,ot.maxBy=SN,ot.mean=EN,ot.meanBy=BN,ot.min=ON,ot.minBy=IN,ot.stubArray=h3,ot.stubFalse=f3,ot.stubObject=pN,ot.stubString=mN,ot.stubTrue=gN,ot.multiply=kN,ot.nth=V0,ot.noConflict=aN,ot.noop=d3,ot.now=Wt,ot.pad=Dh,ot.padEnd=i3,ot.padStart=d0,ot.parseInt=xm,ot.random=Pd,ot.reduce=a0,ot.reduceRight=m,ot.repeat=h0,ot.replace=f0,ot.result=Jr,ot.round=TN,ot.runInContext=Jt,ot.sample=D,ot.size=ge,ot.snakeCase=p0,ot.some=tt,ot.sortedIndex=Bp,ot.sortedIndexBy=Vy,ot.sortedIndexOf=Kh,ot.sortedLastIndex=Jg,ot.sortedLastIndexBy=H0,ot.sortedLastIndexOf=Yf,ot.startCase=M_,ot.startsWith=w_,ot.subtract=PN,ot.sum=KN,ot.sumBy=RN,ot.template=S_,ot.times=yN,ot.toFinite=kd,ot.toInteger=Oo,ot.toLength=c1,ot.toLower=nv,ot.toNumber=rd,ot.toSafeInteger=d,ot.toString=u,ot.toUpper=rv,ot.trim=Xf,ot.trimEnd=E_,ot.trimStart=B_,ot.truncate=o3,ot.unescape=s3,ot.uniqueId=CN,ot.upperCase=a3,ot.upperFirst=iv,ot.each=gm,ot.eachRight=ym,ot.first=pf,lh(ot,function(){var b={};return Cl(ot,function(k,$){Yr.call(ot.prototype,$)||(b[$]=k)}),b}(),{chain:!1}),ot.VERSION=r,el(["bind","bindKey","curry","curryRight","partial","partialRight"],function(b){ot[b].placeholder=ot}),el(["drop","take"],function(b,k){Gr.prototype[b]=function($){$=$===t?1:ms(Oo($),0);var ye=this.__filtered__&&!k?new Gr(this):this.clone();return ye.__filtered__?ye.__takeCount__=ao($,ye.__takeCount__):ye.__views__.push({size:ao($,De),type:b+(ye.__dir__<0?"Right":"")}),ye},Gr.prototype[b+"Right"]=function($){return this.reverse()[b]($).reverse()}}),el(["filter","map","takeWhile"],function(b,k){var $=k+1,ye=$==Ke||$==at;Gr.prototype[b]=function(qe){var ht=this.clone();return ht.__iteratees__.push({iteratee:wi(qe,3),type:$}),ht.__filtered__=ht.__filtered__||ye,ht}}),el(["head","last"],function(b,k){var $="take"+(k?"Right":"");Gr.prototype[b]=function(){return this[$](1).value()[0]}}),el(["initial","tail"],function(b,k){var $="drop"+(k?"":"Right");Gr.prototype[b]=function(){return this.__filtered__?new Gr(this):this[$](1)}}),Gr.prototype.compact=function(){return this.filter(id)},Gr.prototype.find=function(b){return this.filter(b).head()},Gr.prototype.findLast=function(b){return this.reverse().find(b)},Gr.prototype.invokeMap=On(function(b,k){return typeof b=="function"?new Gr(this):this.map(function($){return jl($,b,k)})}),Gr.prototype.reject=function(b){return this.filter(Xr(wi(b)))},Gr.prototype.slice=function(b,k){b=Oo(b);var $=this;return $.__filtered__&&(b>0||k<0)?new Gr($):(b<0?$=$.takeRight(-b):b&&($=$.drop(b)),k!==t&&(k=Oo(k),$=k<0?$.dropRight(-k):$.take(k-b)),$)},Gr.prototype.takeRightWhile=function(b){return this.reverse().takeWhile(b).reverse()},Gr.prototype.toArray=function(){return this.take(De)},Cl(Gr.prototype,function(b,k){var $=/^(?:filter|find|map|reject)|While$/.test(k),ye=/^(?:head|last)$/.test(k),qe=ot[ye?"take"+(k=="last"?"Right":""):k],ht=ye||/^find/.test(k);qe&&(ot.prototype[k]=function(){var Tt=this.__wrapped__,$t=ye?[1]:arguments,ln=Tt instanceof Gr,Yn=$t[0],Vn=ln||xo(Tt),pr=function(vs){var Ps=qe.apply(ot,Cc([vs],$t));return ye&&$r?Ps[0]:Ps};Vn&&$&&typeof Yn=="function"&&Yn.length!=1&&(ln=Vn=!1);var $r=this.__chain__,Ii=!!this.__actions__.length,no=ht&&!$r,ts=ln&&!Ii;if(!ht&&Vn){Tt=ts?Tt:new Gr(this);var ro=b.apply(Tt,$t);return ro.__actions__.push({func:hc,args:[pr],thisArg:t}),new gi(ro,$r)}return no&&ts?b.apply(this,$t):(ro=this.thru(pr),no?ye?ro.value()[0]:ro.value():ro)})}),el(["pop","push","shift","sort","splice","unshift"],function(b){var k=ec[b],$=/^(?:push|sort|unshift)$/.test(b)?"tap":"thru",ye=/^(?:pop|shift)$/.test(b);ot.prototype[b]=function(){var qe=arguments;if(ye&&!this.__chain__){var ht=this.value();return k.apply(xo(ht)?ht:[],qe)}return this[$](function(Tt){return k.apply(xo(Tt)?Tt:[],qe)})}}),Cl(Gr.prototype,function(b,k){var $=ot[k];if($){var ye=$.name+"";Yr.call($c,ye)||($c[ye]=[]),$c[ye].push({name:k,func:$})}}),$c[Jc(t,Y).name]=[{name:"wrapper",func:t}],Gr.prototype.clone=ta,Gr.prototype.reverse=zl,Gr.prototype.value=TA,ot.prototype.at=Vf,ot.prototype.chain=$f,ot.prototype.commit=e0,ot.prototype.next=t0,ot.prototype.plant=Hy,ot.prototype.reverse=r0,ot.prototype.toJSON=ot.prototype.valueOf=ot.prototype.value=o1,ot.prototype.first=ot.prototype.head,gu&&(ot.prototype[gu]=n0),ot},OA=Vd();pi?((pi.exports=OA)._=OA,Pr._=OA):Ir._=OA}).call(MG)}(_v,_v.exports)),_v.exports}var j2=wG();const wE=fl(j2);function SG(n,e,t){const r=e<0?n.length+e:e;if(r>=0&&r<n.length){const i=t<0?n.length+t:t,[s]=n.splice(e,1);n.splice(i,0,s)}}var B3,N8;function EG(){if(N8)return B3;N8=1;function n(e){for(var t=5381,r=e.length;r;)t=t*33^e.charCodeAt(--r);return t>>>0}return B3=n,B3}var BG=EG();const W8=fl(BG);var Gh=Uint8Array,ty=Uint16Array,OG=Int32Array,PD=new Gh([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),KD=new Gh([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),IG=new Gh([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),RD=function(n,e){for(var t=new ty(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var i=new OG(t[30]),r=1;r<30;++r)for(var s=t[r];s<t[r+1];++s)i[s]=s-t[r]<<5|r;return{b:t,r:i}},DD=RD(PD,2),FD=DD.b,kG=DD.r;FD[28]=258,kG[258]=28;var TG=RD(KD,0),PG=TG.b,SE=new ty(32768);for(var Rl=0;Rl<32768;++Rl){var g0=(Rl&43690)>>1|(Rl&21845)<<1;g0=(g0&52428)>>2|(g0&13107)<<2,g0=(g0&61680)>>4|(g0&3855)<<4,SE[Rl]=((g0&65280)>>8|(g0&255)<<8)>>1}var zv=function(n,e,t){for(var r=n.length,i=0,s=new ty(e);i<r;++i)n[i]&&++s[n[i]-1];var l=new ty(e);for(i=1;i<e;++i)l[i]=l[i-1]+s[i-1]<<1;var o;if(t){o=new ty(1<<e);var f=15-e;for(i=0;i<r;++i)if(n[i])for(var y=i<<4|n[i],x=e-n[i],B=l[n[i]-1]++<<x,O=B|(1<<x)-1;B<=O;++B)o[SE[B]>>f]=y}else for(o=new ty(r),i=0;i<r;++i)n[i]&&(o[i]=SE[l[n[i]-1]++]>>15-n[i]);return o},kC=new Gh(288);for(var Rl=0;Rl<144;++Rl)kC[Rl]=8;for(var Rl=144;Rl<256;++Rl)kC[Rl]=9;for(var Rl=256;Rl<280;++Rl)kC[Rl]=7;for(var Rl=280;Rl<288;++Rl)kC[Rl]=8;var LD=new Gh(32);for(var Rl=0;Rl<32;++Rl)LD[Rl]=5;var KG=zv(kC,9,1),RG=zv(LD,5,1),O3=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},ep=function(n,e,t){var r=e/8|0;return(n[r]|n[r+1]<<8)>>(e&7)&t},I3=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},DG=function(n){return(n+7)/8|0},FG=function(n,e,t){return(t==null||t>n.length)&&(t=n.length),new Gh(n.subarray(e,t))},LG=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],jh=function(n,e,t){var r=new Error(e||LG[n]);if(r.code=n,Error.captureStackTrace&&Error.captureStackTrace(r,jh),!t)throw r;return r},F6=function(n,e,t,r){var i=n.length,s=0;if(!i||e.f&&!e.l)return t||new Gh(0);var l=!t,o=l||e.i!=2,f=e.i;l&&(t=new Gh(i*3));var y=function(it){var _t=t.length;if(it>_t){var pt=new Gh(Math.max(_t*2,it));pt.set(t),t=pt}},x=e.f||0,B=e.p||0,O=e.b||0,P=e.l,U=e.d,j=e.m,N=e.n,Y=i*8;do{if(!P){x=ep(n,B,1);var H=ep(n,B+1,3);if(B+=3,H)if(H==1)P=KG,U=RG,j=9,N=5;else if(H==2){var ne=ep(n,B,31)+257,G=ep(n,B+10,15)+4,oe=ne+ep(n,B+5,31)+1;B+=14;for(var he=new Gh(oe),fe=new Gh(19),Ee=0;Ee<G;++Ee)fe[IG[Ee]]=ep(n,B+Ee*3,7);B+=G*3;for(var me=O3(fe),Se=(1<<me)-1,Ke=zv(fe,me,1),Ee=0;Ee<oe;){var xe=Ke[ep(n,B,Se)];B+=xe&15;var se=xe>>4;if(se<16)he[Ee++]=se;else{var at=0,Ze=0;for(se==16?(Ze=3+ep(n,B,3),B+=2,at=he[Ee-1]):se==17?(Ze=3+ep(n,B,7),B+=3):se==18&&(Ze=11+ep(n,B,127),B+=7);Ze--;)he[Ee++]=at}}var Je=he.subarray(0,ne),Ne=he.subarray(ne);j=O3(Je),N=O3(Ne),P=zv(Je,j,1),U=zv(Ne,N,1)}else jh(1);else{var se=DG(B)+4,re=n[se-4]|n[se-3]<<8,V=se+re;if(V>i){f&&jh(0);break}o&&y(O+re),t.set(n.subarray(se,V),O),e.b=O+=re,e.p=B=V*8,e.f=x;continue}if(B>Y){f&&jh(0);break}}o&&y(O+131072);for(var we=(1<<j)-1,De=(1<<N)-1,He=B;;He=B){var at=P[I3(n,B)&we],bt=at>>4;if(B+=at&15,B>Y){f&&jh(0);break}if(at||jh(2),bt<256)t[O++]=bt;else if(bt==256){He=B,P=null;break}else{var Yt=bt-254;if(bt>264){var Ee=bt-257,yt=PD[Ee];Yt=ep(n,B,(1<<yt)-1)+FD[Ee],B+=yt}var Ft=U[I3(n,B)&De],Pt=Ft>>4;Ft||jh(3),B+=Ft&15;var Ne=PG[Pt];if(Pt>3){var yt=KD[Pt];Ne+=I3(n,B)&(1<<yt)-1,B+=yt}if(B>Y){f&&jh(0);break}o&&y(O+131072);var Ue=O+Yt;if(O<Ne){var Pe=s-Ne,Be=Math.min(Ne,Ue);for(Pe+O<0&&jh(3);O<Be;++O)t[O]=r[Pe+O]}for(;O<Ue;++O)t[O]=t[O-Ne]}}e.l=P,e.p=He,e.b=O,e.f=x,P&&(x=1,e.m=j,e.d=U,e.n=N)}while(!x);return O!=t.length&&l?FG(t,0,O):t.subarray(0,O)},UG=new Gh(0),zG=function(n){(n[0]!=31||n[1]!=139||n[2]!=8)&&jh(6,"invalid gzip data");var e=n[3],t=10;e&4&&(t+=(n[10]|n[11]<<8)+2);for(var r=(e>>3&1)+(e>>4&1);r>0;r-=!n[t++]);return t+(e&2)},jG=function(n){var e=n.length;return(n[e-4]|n[e-3]<<8|n[e-2]<<16|n[e-1]<<24)>>>0},NG=function(n,e){return((n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31)&&jh(6,"invalid zlib data"),(n[1]>>5&1)==1&&jh(6,"invalid zlib data: "+(n[1]&32?"need":"unexpected")+" dictionary"),(n[1]>>3&4)+2};function WG(n,e){return F6(n,{i:2},e,e)}function GG(n,e){var t=zG(n);return t+8>n.length&&jh(6,"invalid gzip data"),F6(n.subarray(t,-8),{i:2},new Gh(jG(n)),e)}function QG(n,e){return F6(n.subarray(NG(n),-4),{i:2},e,e)}function YG(n,e){return n[0]==31&&n[1]==139&&n[2]==8?GG(n,e):(n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31?WG(n,e):QG(n,e)}var qG=typeof TextDecoder<"u"&&new TextDecoder,VG=0;try{qG.decode(UG,{stream:!0}),VG=1}catch{}var $G=Object.defineProperty,jv=Math.pow,$a=(n,e)=>$G(n,"name",{value:e,configurable:!0}),gc=(n,e,t)=>new Promise((r,i)=>{var s=f=>{try{o(t.next(f))}catch(y){i(y)}},l=f=>{try{o(t.throw(f))}catch(y){i(y)}},o=f=>f.done?r(f.value):Promise.resolve(f.value).then(s,l);o((t=t.apply(n,e)).next())});$a((n,e)=>{let t=!1,r="",i=L.GridLayer.extend({createTile:$a((s,l)=>{let o=document.createElement("img"),f=new AbortController,y=f.signal;return o.cancel=()=>{f.abort()},t||(n.getHeader().then(x=>{x.tileType===1?console.error("Error: archive contains MVT vector tiles, but leafletRasterLayer is for displaying raster tiles. See https://github.com/protomaps/PMTiles/tree/main/js for details."):x.tileType===2?r="image/png":x.tileType===3?r="image/jpeg":x.tileType===4?r="image/webp":x.tileType===5&&(r="image/avif")}),t=!0),n.getZxy(s.z,s.x,s.y,y).then(x=>{if(x){let B=new Blob([x.data],{type:r}),O=window.URL.createObjectURL(B);o.src=O,o.cancel=void 0,l(void 0,o)}}).catch(x=>{if(x.name!=="AbortError")throw x}),o},"createTile"),_removeTile:$a(function(s){let l=this._tiles[s];l&&(l.el.cancel&&l.el.cancel(),l.el.width=0,l.el.height=0,l.el.deleted=!0,L.DomUtil.remove(l.el),delete this._tiles[s],this.fire("tileunload",{tile:l.el,coords:this._keyToTileCoords(s)}))},"_removeTile")});return new i(e)},"leafletRasterLayer");var HG=$a(n=>(e,t)=>{if(t instanceof AbortController)return n(e,t);let r=new AbortController;return n(e,r).then(i=>t(void 0,i.data,i.cacheControl||"",i.expires||""),i=>t(i)).catch(i=>t(i)),{cancel:$a(()=>r.abort(),"cancel")}},"v3compat"),UD=class{constructor(e){this.tilev4=$a((t,r)=>gc(this,null,function*(){if(t.type==="json"){let P=t.url.substr(10),U=this.tiles.get(P);if(U||(U=new BE(P),this.tiles.set(P,U)),this.metadata)return{data:yield U.getTileJson(t.url)};let j=yield U.getHeader();return(j.minLon>=j.maxLon||j.minLat>=j.maxLat)&&console.error(`Bounds of PMTiles archive ${j.minLon},${j.minLat},${j.maxLon},${j.maxLat} are not valid.`),{data:{tiles:[`${t.url}/{z}/{x}/{y}`],minzoom:j.minZoom,maxzoom:j.maxZoom,bounds:[j.minLon,j.minLat,j.maxLon,j.maxLat]}}}let i=new RegExp(/pmtiles:\/\/(.+)\/(\d+)\/(\d+)\/(\d+)/),s=t.url.match(i);if(!s)throw new Error("Invalid PMTiles protocol URL");let l=s[1],o=this.tiles.get(l);o||(o=new BE(l),this.tiles.set(l,o));let f=s[2],y=s[3],x=s[4],B=yield o.getHeader(),O=yield o==null?void 0:o.getZxy(+f,+y,+x,r.signal);if(O)return{data:new Uint8Array(O.data),cacheControl:O.cacheControl,expires:O.expires};if(B.tileType===1){if(this.errorOnMissingTile)throw new Error("Tile not found.");return{data:new Uint8Array}}return{data:null}}),"tilev4"),this.tile=HG(this.tilev4),this.tiles=new Map,this.metadata=(e==null?void 0:e.metadata)||!1,this.errorOnMissingTile=(e==null?void 0:e.errorOnMissingTile)||!1}add(e){this.tiles.set(e.source.getKey(),e)}get(e){return this.tiles.get(e)}};$a(UD,"Protocol");var ZG=UD;function zD(n,e){return(e>>>0)*4294967296+(n>>>0)}$a(zD,"toNum");function jD(n,e){let t=e.buf,r=t[e.pos++],i=(r&112)>>4;if(r<128||(r=t[e.pos++],i|=(r&127)<<3,r<128)||(r=t[e.pos++],i|=(r&127)<<10,r<128)||(r=t[e.pos++],i|=(r&127)<<17,r<128)||(r=t[e.pos++],i|=(r&127)<<24,r<128)||(r=t[e.pos++],i|=(r&1)<<31,r<128))return zD(n,i);throw new Error("Expected varint not more than 10 bytes")}$a(jD,"readVarintRemainder");function Q1(n){let e=n.buf,t=e[n.pos++],r=t&127;return t<128||(t=e[n.pos++],r|=(t&127)<<7,t<128)||(t=e[n.pos++],r|=(t&127)<<14,t<128)||(t=e[n.pos++],r|=(t&127)<<21,t<128)?r:(t=e[n.pos],r|=(t&15)<<28,jD(r,n))}$a(Q1,"readVarint");function L6(n,e,t,r){if(r===0){t===1&&(e[0]=n-1-e[0],e[1]=n-1-e[1]);let i=e[0];e[0]=e[1],e[1]=i}}$a(L6,"rotate");function ND(n,e){let t=jv(2,n),r=e,i=e,s=e,l=[0,0],o=1;for(;o<t;)r=1&s/2,i=1&(s^r),L6(o,l,r,i),l[0]+=o*r,l[1]+=o*i,s=s/4,o*=2;return[n,l[0],l[1]]}$a(ND,"idOnLevel");var XG=[0,1,5,21,85,341,1365,5461,21845,87381,349525,1398101,5592405,22369621,89478485,357913941,1431655765,5726623061,22906492245,91625968981,366503875925,1466015503701,5864062014805,23456248059221,93824992236885,375299968947541,0x5555555555555];function WD(n,e,t){if(n>26)throw new Error("Tile zoom level exceeds max safe number limit (26)");if(e>jv(2,n)-1||t>jv(2,n)-1)throw new Error("tile x/y outside zoom level bounds");let r=XG[n],i=jv(2,n),s=0,l=0,o=0,f=[e,t],y=i/2;for(;y>0;)s=(f[0]&y)>0?1:0,l=(f[1]&y)>0?1:0,o+=y*y*(3*s^l),L6(y,f,s,l),y=y/2;return r+o}$a(WD,"zxyToTileId");function JG(n){let e=0;for(let t=0;t<27;t++){let r=(1<<t)*(1<<t);if(e+r>n)return ND(t,n-e);e+=r}throw new Error("Tile zoom level exceeds max safe number limit (26)")}$a(JG,"tileIdToZxy");var eQ=(n=>(n[n.Unknown=0]="Unknown",n[n.None=1]="None",n[n.Gzip=2]="Gzip",n[n.Brotli=3]="Brotli",n[n.Zstd=4]="Zstd",n))(eQ||{});function N2(n,e){return gc(this,null,function*(){if(e===1||e===0)return n;if(e===2){if(typeof globalThis.DecompressionStream>"u")return YG(new Uint8Array(n));let t=new Response(n).body;if(!t)throw new Error("Failed to read response stream");let r=t.pipeThrough(new globalThis.DecompressionStream("gzip"));return new Response(r).arrayBuffer()}throw new Error("Compression method not supported")})}$a(N2,"defaultDecompress");var tQ=(n=>(n[n.Unknown=0]="Unknown",n[n.Mvt=1]="Mvt",n[n.Png=2]="Png",n[n.Jpeg=3]="Jpeg",n[n.Webp=4]="Webp",n[n.Avif=5]="Avif",n))(tQ||{});function GD(n){return n===1?".mvt":n===2?".png":n===3?".jpg":n===4?".webp":n===5?".avif":""}$a(GD,"tileTypeExt");var nQ=127;function QD(n,e){let t=0,r=n.length-1;for(;t<=r;){let i=r+t>>1,s=e-n[i].tileId;if(s>0)t=i+1;else if(s<0)r=i-1;else return n[i]}return r>=0&&(n[r].runLength===0||e-n[r].tileId<n[r].runLength)?n[r]:null}$a(QD,"findTile");var rQ=class{constructor(e){this.file=e}getKey(){return this.file.name}getBytes(e,t){return gc(this,null,function*(){return{data:yield this.file.slice(e,e+t).arrayBuffer()}})}};$a(rQ,"FileSource");var YD=class{constructor(e,t=new Headers){this.url=e,this.customHeaders=t,this.mustReload=!1;let r="";"navigator"in globalThis&&(r=globalThis.navigator.userAgent||"");let i=r.indexOf("Windows")>-1,s=/Chrome|Chromium|Edg|OPR|Brave/.test(r);this.chromeWindowsNoCache=!1,i&&s&&(this.chromeWindowsNoCache=!0)}getKey(){return this.url}setHeaders(e){this.customHeaders=e}getBytes(e,t,r,i){return gc(this,null,function*(){let s,l;r?l=r:(s=new AbortController,l=s.signal);let o=new Headers(this.customHeaders);o.set("range",`bytes=${e}-${e+t-1}`);let f;this.mustReload?f="reload":this.chromeWindowsNoCache&&(f="no-store");let y=yield fetch(this.url,{signal:l,cache:f,headers:o});if(e===0&&y.status===416){let O=y.headers.get("Content-Range");if(!O||!O.startsWith("bytes */"))throw new Error("Missing content-length on 416 response");let P=+O.substr(8);y=yield fetch(this.url,{signal:l,cache:"reload",headers:{range:`bytes=0-${P-1}`}})}let x=y.headers.get("Etag");if(x!=null&&x.startsWith("W/")&&(x=null),y.status===416||i&&x&&x!==i)throw this.mustReload=!0,new EE(`Server returned non-matching ETag ${i} after one retry. Check browser extensions and servers for issues that may affect correct ETag headers.`);if(y.status>=300)throw new Error(`Bad response code: ${y.status}`);let B=y.headers.get("Content-Length");if(y.status===200&&(!B||+B>t))throw s&&s.abort(),new Error("Server returned no content-length header or content-length exceeding request. Check that your storage backend supports HTTP Byte Serving.");return{data:yield y.arrayBuffer(),etag:x||void 0,cacheControl:y.headers.get("Cache-Control")||void 0,expires:y.headers.get("Expires")||void 0}})}};$a(YD,"FetchSource");var iQ=YD;function bf(n,e){let t=n.getUint32(e+4,!0),r=n.getUint32(e+0,!0);return t*jv(2,32)+r}$a(bf,"getUint64");function qD(n,e){let t=new DataView(n),r=t.getUint8(7);if(r>3)throw new Error(`Archive is spec version ${r} but this library supports up to spec version 3`);return{specVersion:r,rootDirectoryOffset:bf(t,8),rootDirectoryLength:bf(t,16),jsonMetadataOffset:bf(t,24),jsonMetadataLength:bf(t,32),leafDirectoryOffset:bf(t,40),leafDirectoryLength:bf(t,48),tileDataOffset:bf(t,56),tileDataLength:bf(t,64),numAddressedTiles:bf(t,72),numTileEntries:bf(t,80),numTileContents:bf(t,88),clustered:t.getUint8(96)===1,internalCompression:t.getUint8(97),tileCompression:t.getUint8(98),tileType:t.getUint8(99),minZoom:t.getUint8(100),maxZoom:t.getUint8(101),minLon:t.getInt32(102,!0)/1e7,minLat:t.getInt32(106,!0)/1e7,maxLon:t.getInt32(110,!0)/1e7,maxLat:t.getInt32(114,!0)/1e7,centerZoom:t.getUint8(118),centerLon:t.getInt32(119,!0)/1e7,centerLat:t.getInt32(123,!0)/1e7,etag:e}}$a(qD,"bytesToHeader");function U6(n){let e={buf:new Uint8Array(n),pos:0},t=Q1(e),r=[],i=0;for(let s=0;s<t;s++){let l=Q1(e);r.push({tileId:i+l,offset:0,length:0,runLength:1}),i+=l}for(let s=0;s<t;s++)r[s].runLength=Q1(e);for(let s=0;s<t;s++)r[s].length=Q1(e);for(let s=0;s<t;s++){let l=Q1(e);l===0&&s>0?r[s].offset=r[s-1].offset+r[s-1].length:r[s].offset=l-1}return r}$a(U6,"deserializeIndex");var VD=class extends Error{};$a(VD,"EtagMismatch");var EE=VD;function z6(n,e){return gc(this,null,function*(){let t=yield n.getBytes(0,16384);if(new DataView(t.data).getUint16(0,!0)!==19792)throw new Error("Wrong magic number for PMTiles archive");let r=t.data.slice(0,nQ),i=qD(r,t.etag),s=t.data.slice(i.rootDirectoryOffset,i.rootDirectoryOffset+i.rootDirectoryLength),l=`${n.getKey()}|${i.etag||""}|${i.rootDirectoryOffset}|${i.rootDirectoryLength}`,o=U6(yield e(s,i.internalCompression));return[i,[l,o.length,o]]})}$a(z6,"getHeaderAndRoot");function j6(n,e,t,r,i){return gc(this,null,function*(){let s=yield n.getBytes(t,r,void 0,i.etag),l=yield e(s.data,i.internalCompression),o=U6(l);if(o.length===0)throw new Error("Empty directory is invalid");return o})}$a(j6,"getDirectory");var oQ=class{constructor(e=100,t=!0,r=N2){this.cache=new Map,this.maxCacheEntries=e,this.counter=1,this.decompress=r}getHeader(e){return gc(this,null,function*(){let t=e.getKey(),r=this.cache.get(t);if(r)return r.lastUsed=this.counter++,r.data;let i=yield z6(e,this.decompress);return i[1]&&this.cache.set(i[1][0],{lastUsed:this.counter++,data:i[1][2]}),this.cache.set(t,{lastUsed:this.counter++,data:i[0]}),this.prune(),i[0]})}getDirectory(e,t,r,i){return gc(this,null,function*(){let s=`${e.getKey()}|${i.etag||""}|${t}|${r}`,l=this.cache.get(s);if(l)return l.lastUsed=this.counter++,l.data;let o=yield j6(e,this.decompress,t,r,i);return this.cache.set(s,{lastUsed:this.counter++,data:o}),this.prune(),o})}prune(){if(this.cache.size>this.maxCacheEntries){let e=1/0,t;this.cache.forEach((r,i)=>{r.lastUsed<e&&(e=r.lastUsed,t=i)}),t&&this.cache.delete(t)}}invalidate(e){return gc(this,null,function*(){this.cache.delete(e.getKey())})}};$a(oQ,"ResolvedValueCache");var $D=class{constructor(e=100,t=!0,r=N2){this.cache=new Map,this.invalidations=new Map,this.maxCacheEntries=e,this.counter=1,this.decompress=r}getHeader(e){return gc(this,null,function*(){let t=e.getKey(),r=this.cache.get(t);if(r)return r.lastUsed=this.counter++,yield r.data;let i=new Promise((s,l)=>{z6(e,this.decompress).then(o=>{o[1]&&this.cache.set(o[1][0],{lastUsed:this.counter++,data:Promise.resolve(o[1][2])}),s(o[0]),this.prune()}).catch(o=>{l(o)})});return this.cache.set(t,{lastUsed:this.counter++,data:i}),i})}getDirectory(e,t,r,i){return gc(this,null,function*(){let s=`${e.getKey()}|${i.etag||""}|${t}|${r}`,l=this.cache.get(s);if(l)return l.lastUsed=this.counter++,yield l.data;let o=new Promise((f,y)=>{j6(e,this.decompress,t,r,i).then(x=>{f(x),this.prune()}).catch(x=>{y(x)})});return this.cache.set(s,{lastUsed:this.counter++,data:o}),o})}prune(){if(this.cache.size>=this.maxCacheEntries){let e=1/0,t;this.cache.forEach((r,i)=>{r.lastUsed<e&&(e=r.lastUsed,t=i)}),t&&this.cache.delete(t)}}invalidate(e){return gc(this,null,function*(){let t=e.getKey();if(this.invalidations.get(t))return yield this.invalidations.get(t);this.cache.delete(e.getKey());let r=new Promise((i,s)=>{this.getHeader(e).then(l=>{i(),this.invalidations.delete(t)}).catch(l=>{s(l)})});this.invalidations.set(t,r)})}};$a($D,"SharedPromiseCache");var sQ=$D,HD=class{constructor(e,t,r){typeof e=="string"?this.source=new iQ(e):this.source=e,r?this.decompress=r:this.decompress=N2,t?this.cache=t:this.cache=new sQ}getHeader(){return gc(this,null,function*(){return yield this.cache.getHeader(this.source)})}getZxyAttempt(e,t,r,i){return gc(this,null,function*(){let s=WD(e,t,r),l=yield this.cache.getHeader(this.source);if(e<l.minZoom||e>l.maxZoom)return;let o=l.rootDirectoryOffset,f=l.rootDirectoryLength;for(let y=0;y<=3;y++){let x=yield this.cache.getDirectory(this.source,o,f,l),B=QD(x,s);if(B){if(B.runLength>0){let O=yield this.source.getBytes(l.tileDataOffset+B.offset,B.length,i,l.etag);return{data:yield this.decompress(O.data,l.tileCompression),cacheControl:O.cacheControl,expires:O.expires}}o=l.leafDirectoryOffset+B.offset,f=B.length}else return}throw new Error("Maximum directory depth exceeded")})}getZxy(e,t,r,i){return gc(this,null,function*(){try{return yield this.getZxyAttempt(e,t,r,i)}catch(s){if(s instanceof EE)return this.cache.invalidate(this.source),yield this.getZxyAttempt(e,t,r,i);throw s}})}getMetadataAttempt(){return gc(this,null,function*(){let e=yield this.cache.getHeader(this.source),t=yield this.source.getBytes(e.jsonMetadataOffset,e.jsonMetadataLength,void 0,e.etag),r=yield this.decompress(t.data,e.internalCompression),i=new TextDecoder("utf-8");return JSON.parse(i.decode(r))})}getMetadata(){return gc(this,null,function*(){try{return yield this.getMetadataAttempt()}catch(e){if(e instanceof EE)return this.cache.invalidate(this.source),yield this.getMetadataAttempt();throw e}})}getTileJson(e){return gc(this,null,function*(){let t=yield this.getHeader(),r=yield this.getMetadata(),i=GD(t.tileType);return{tilejson:"3.0.0",scheme:"xyz",tiles:[`${e}/{z}/{x}/{y}${i}`],vector_layers:r.vector_layers,attribution:r.attribution,description:r.description,name:r.name,version:r.version,bounds:[t.minLon,t.minLat,t.maxLon,t.maxLat],center:[t.centerLon,t.centerLat,t.centerZoom],minzoom:t.minZoom,maxzoom:t.maxZoom}})}};$a(HD,"PMTiles");var BE=HD,aQ=8,lQ={version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},uQ={"*":{type:"source"}},AQ=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],cQ={type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},dQ={type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},hQ={type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},fQ={type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},pQ={type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},mQ={type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},gQ={id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},yQ=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],vQ={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},CQ={"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},_Q={"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},bQ={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},xQ={"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},MQ={"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},wQ={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},SQ={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},EQ={type:"array",value:"*"},BQ={type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},OQ={type:"enum",values:{Point:{},LineString:{},Polygon:{}}},IQ={type:"array",minimum:0,maximum:24,value:["number","color"],length:2},kQ={type:"array",value:"*",minimum:1},TQ={anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},PQ={"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},KQ={source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},RQ={type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},DQ=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],FQ={"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},LQ={"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},UQ={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},zQ={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},jQ={"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},NQ={"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},WQ={"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},GQ={"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},QQ={duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},YQ={"*":{type:"string"}},Ms={$version:aQ,$root:lQ,sources:uQ,source:AQ,source_vector:cQ,source_raster:dQ,source_raster_dem:hQ,source_geojson:fQ,source_video:pQ,source_image:mQ,layer:gQ,layout:yQ,layout_background:vQ,layout_fill:CQ,layout_circle:_Q,layout_heatmap:bQ,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:xQ,layout_symbol:MQ,layout_raster:wQ,layout_hillshade:SQ,filter:EQ,filter_operator:BQ,geometry_type:OQ,function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:IQ,expression:kQ,light:TQ,sky:PQ,terrain:KQ,projection:RQ,paint:DQ,paint_fill:FQ,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:LQ,paint_circle:UQ,paint_heatmap:zQ,paint_symbol:jQ,paint_raster:NQ,paint_hillshade:WQ,paint_background:GQ,transition:QQ,"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:YQ};const qQ=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function VQ(n,e){const t={};for(const r in n)r!=="ref"&&(t[r]=n[r]);return qQ.forEach(r=>{r in e&&(t[r]=e[r])}),t}function N6(n){n=n.slice();const e=Object.create(null);for(let t=0;t<n.length;t++)e[n[t].id]=n[t];for(let t=0;t<n.length;t++)"ref"in n[t]&&(n[t]=VQ(n[t],e[n[t].ref]));return n}function ga(n,e){if(Array.isArray(n)){if(!Array.isArray(e)||n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(!ga(n[t],e[t]))return!1;return!0}if(typeof n=="object"&&n!==null&&e!==null){if(typeof e!="object"||Object.keys(n).length!==Object.keys(e).length)return!1;for(const r in n)if(!ga(n[r],e[r]))return!1;return!0}return n===e}function Mf(n,e){n.push(e)}function ZD(n,e,t){Mf(t,{command:"addSource",args:[n,e[n]]})}function XD(n,e,t){Mf(e,{command:"removeSource",args:[n]}),t[n]=!0}function $Q(n,e,t,r){XD(n,t,r),ZD(n,e,t)}function HQ(n,e,t){let r;for(r in n[t])if(Object.prototype.hasOwnProperty.call(n[t],r)&&r!=="data"&&!ga(n[t][r],e[t][r]))return!1;for(r in e[t])if(Object.prototype.hasOwnProperty.call(e[t],r)&&r!=="data"&&!ga(n[t][r],e[t][r]))return!1;return!0}function ZQ(n,e,t,r){n=n||{},e=e||{};let i;for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(Object.prototype.hasOwnProperty.call(e,i)||XD(i,t,r));for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&(Object.prototype.hasOwnProperty.call(n,i)?ga(n[i],e[i])||(n[i].type==="geojson"&&e[i].type==="geojson"&&HQ(n,e,i)?Mf(t,{command:"setGeoJSONSourceData",args:[i,e[i].data]}):$Q(i,e,t,r)):ZD(i,e,t))}function D_(n,e,t,r,i,s){n=n||{},e=e||{};for(const l in n)Object.prototype.hasOwnProperty.call(n,l)&&(ga(n[l],e[l])||t.push({command:s,args:[r,l,e[l],i]}));for(const l in e)!Object.prototype.hasOwnProperty.call(e,l)||Object.prototype.hasOwnProperty.call(n,l)||ga(n[l],e[l])||t.push({command:s,args:[r,l,e[l],i]})}function G8(n){return n.id}function Q8(n,e){return n[e.id]=e,n}function XQ(n,e,t){n=n||[],e=e||[];const r=n.map(G8),i=e.map(G8),s=n.reduce(Q8,{}),l=e.reduce(Q8,{}),o=r.slice(),f=Object.create(null);let y,x,B,O,P;for(let U=0,j=0;U<r.length;U++)y=r[U],Object.prototype.hasOwnProperty.call(l,y)?j++:(Mf(t,{command:"removeLayer",args:[y]}),o.splice(o.indexOf(y,j),1));for(let U=0,j=0;U<i.length;U++)y=i[i.length-1-U],o[o.length-1-U]!==y&&(Object.prototype.hasOwnProperty.call(s,y)?(Mf(t,{command:"removeLayer",args:[y]}),o.splice(o.lastIndexOf(y,o.length-j),1)):j++,O=o[o.length-U],Mf(t,{command:"addLayer",args:[l[y],O]}),o.splice(o.length-U,0,y),f[y]=!0);for(let U=0;U<i.length;U++)if(y=i[U],x=s[y],B=l[y],!(f[y]||ga(x,B))){if(!ga(x.source,B.source)||!ga(x["source-layer"],B["source-layer"])||!ga(x.type,B.type)){Mf(t,{command:"removeLayer",args:[y]}),O=o[o.lastIndexOf(y)+1],Mf(t,{command:"addLayer",args:[B,O]});continue}D_(x.layout,B.layout,t,y,null,"setLayoutProperty"),D_(x.paint,B.paint,t,y,null,"setPaintProperty"),ga(x.filter,B.filter)||Mf(t,{command:"setFilter",args:[y,B.filter]}),(!ga(x.minzoom,B.minzoom)||!ga(x.maxzoom,B.maxzoom))&&Mf(t,{command:"setLayerZoomRange",args:[y,B.minzoom,B.maxzoom]});for(P in x)Object.prototype.hasOwnProperty.call(x,P)&&(P==="layout"||P==="paint"||P==="filter"||P==="metadata"||P==="minzoom"||P==="maxzoom"||(P.indexOf("paint.")===0?D_(x[P],B[P],t,y,P.slice(6),"setPaintProperty"):ga(x[P],B[P])||Mf(t,{command:"setLayerProperty",args:[y,P,B[P]]})));for(P in B)!Object.prototype.hasOwnProperty.call(B,P)||Object.prototype.hasOwnProperty.call(x,P)||P==="layout"||P==="paint"||P==="filter"||P==="metadata"||P==="minzoom"||P==="maxzoom"||(P.indexOf("paint.")===0?D_(x[P],B[P],t,y,P.slice(6),"setPaintProperty"):ga(x[P],B[P])||Mf(t,{command:"setLayerProperty",args:[y,P,B[P]]}))}}function JQ(n,e){if(!n)return[{command:"setStyle",args:[e]}];let t=[];try{if(!ga(n.version,e.version))return[{command:"setStyle",args:[e]}];ga(n.center,e.center)||t.push({command:"setCenter",args:[e.center]}),ga(n.centerAltitude,e.centerAltitude)||t.push({command:"setCenterAltitude",args:[e.centerAltitude]}),ga(n.zoom,e.zoom)||t.push({command:"setZoom",args:[e.zoom]}),ga(n.bearing,e.bearing)||t.push({command:"setBearing",args:[e.bearing]}),ga(n.pitch,e.pitch)||t.push({command:"setPitch",args:[e.pitch]}),ga(n.roll,e.roll)||t.push({command:"setRoll",args:[e.roll]}),ga(n.sprite,e.sprite)||t.push({command:"setSprite",args:[e.sprite]}),ga(n.glyphs,e.glyphs)||t.push({command:"setGlyphs",args:[e.glyphs]}),ga(n.transition,e.transition)||t.push({command:"setTransition",args:[e.transition]}),ga(n.light,e.light)||t.push({command:"setLight",args:[e.light]}),ga(n.terrain,e.terrain)||t.push({command:"setTerrain",args:[e.terrain]}),ga(n.sky,e.sky)||t.push({command:"setSky",args:[e.sky]}),ga(n.projection,e.projection)||t.push({command:"setProjection",args:[e.projection]});const r={},i=[];ZQ(n.sources,e.sources,i,r);const s=[];n.layers&&n.layers.forEach(l=>{"source"in l&&r[l.source]?t.push({command:"removeLayer",args:[l.id]}):s.push(l)}),t=t.concat(i),XQ(s,e.layers,t)}catch(r){console.warn("Unable to compute style diff:",r),t=[{command:"setStyle",args:[e]}]}return t}class Mr{constructor(e,t,r,i){this.message=(e?`${e}: `:"")+r,i&&(this.identifier=i),t!=null&&t.__line__&&(this.line=t.__line__)}}function _y(n,...e){for(const t of e)for(const r in t)n[r]=t[r];return n}class Wp extends Error{constructor(e,t){super(t),this.message=t,this.key=e}}class W6{constructor(e,t=[]){this.parent=e,this.bindings={};for(const[r,i]of t)this.bindings[r]=i}concat(e){return new W6(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return this.bindings[e]?!0:this.parent?this.parent.has(e):!1}}const W2={kind:"null"},kr={kind:"number"},ns={kind:"string"},qo={kind:"boolean"},$p={kind:"color"},G2={kind:"projectionDefinition"},uy={kind:"object"},Vo={kind:"value"},eY={kind:"error"},Q2={kind:"collator"},Y2={kind:"formatted"},q2={kind:"padding"},TC={kind:"resolvedImage"},V2={kind:"variableAnchorOffsetCollection"};function Qh(n,e){return{kind:"array",itemType:n,N:e}}function Zl(n){if(n.kind==="array"){const e=Zl(n.itemType);return typeof n.N=="number"?`array<${e}, ${n.N}>`:n.itemType.kind==="value"?"array":`array<${e}>`}else return n.kind}const tY=[W2,kr,ns,qo,$p,G2,Y2,uy,Qh(Vo),q2,TC,V2];function eC(n,e){if(e.kind==="error")return null;if(n.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!eC(n.itemType,e.itemType))&&(typeof n.N!="number"||n.N===e.N))return null}else{if(n.kind===e.kind)return null;if(n.kind==="value"){for(const t of tY)if(!eC(t,e))return null}}return`Expected ${Zl(n)} but found ${Zl(e)} instead.`}function G6(n,e){return e.some(t=>t.kind===n.kind)}function Ig(n,e){return e.some(t=>t==="null"?n===null:t==="array"?Array.isArray(n):t==="object"?n&&!Array.isArray(n)&&typeof n=="object":t===typeof n)}function g1(n,e){return n.kind==="array"&&e.kind==="array"?n.itemType.kind===e.itemType.kind&&typeof n.N=="number":n.kind===e.kind}const JD=.96422,eF=1,tF=.82521,nF=4/29,Ay=6/29,rF=3*Ay*Ay,nY=Ay*Ay*Ay,rY=Math.PI/180,iY=180/Math.PI;function iF(n){return n=n%360,n<0&&(n+=360),n}function oF([n,e,t,r]){n=k3(n),e=k3(e),t=k3(t);let i,s;const l=T3((.2225045*n+.7168786*e+.0606169*t)/eF);n===e&&e===t?i=s=l:(i=T3((.4360747*n+.3850649*e+.1430804*t)/JD),s=T3((.0139322*n+.0971045*e+.7141733*t)/tF));const o=116*l-16;return[o<0?0:o,500*(i-l),200*(l-s),r]}function k3(n){return n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function T3(n){return n>nY?Math.pow(n,1/3):n/rF+nF}function sF([n,e,t,r]){let i=(n+16)/116,s=isNaN(e)?i:i+e/500,l=isNaN(t)?i:i-t/200;return i=eF*K3(i),s=JD*K3(s),l=tF*K3(l),[P3(3.1338561*s-1.6168667*i-.4906146*l),P3(-.9787684*s+1.9161415*i+.033454*l),P3(.0719453*s-.2289914*i+1.4052427*l),r]}function P3(n){return n=n<=.00304?12.92*n:1.055*Math.pow(n,1/2.4)-.055,n<0?0:n>1?1:n}function K3(n){return n>Ay?n*n*n:rF*(n-nF)}function oY(n){const[e,t,r,i]=oF(n),s=Math.sqrt(t*t+r*r);return[Math.round(s*1e4)?iF(Math.atan2(r,t)*iY):NaN,s,e,i]}function sY([n,e,t,r]){return n=isNaN(n)?0:n*rY,sF([t,Math.cos(n)*e,Math.sin(n)*e,r])}function aY([n,e,t,r]){n=iF(n),e/=100,t/=100;function i(s){const l=(s+n/30)%12,o=e*Math.min(t,1-t);return t-o*Math.max(-1,Math.min(l-3,9-l,1))}return[i(0),i(8),i(4),r]}function lY(n){if(n=n.toLowerCase().trim(),n==="transparent")return[0,0,0,0];const e=uY[n];if(e){const[i,s,l]=e;return[i/255,s/255,l/255,1]}if(n.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(n)){const s=n.length<6?1:2;let l=1;return[F_(n.slice(l,l+=s)),F_(n.slice(l,l+=s)),F_(n.slice(l,l+=s)),F_(n.slice(l,l+s)||"ff")]}if(n.startsWith("rgb")){const i=/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,s=n.match(i);if(s){const[l,o,f,y,x,B,O,P,U,j,N,Y]=s,H=[y||" ",O||" ",j].join("");if(H==="  "||H==="  /"||H===",,"||H===",,,"){const se=[f,B,U].join(""),re=se==="%%%"?100:se===""?255:0;if(re){const V=[Y1(+o/re,0,1),Y1(+x/re,0,1),Y1(+P/re,0,1),N?Y8(+N,Y):1];if(q8(V))return V}}return}}const t=/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,r=n.match(t);if(r){const[i,s,l,o,f,y,x,B,O]=r,P=[l||" ",f||" ",x].join("");if(P==="  "||P==="  /"||P===",,"||P===",,,"){const U=[+s,Y1(+o,0,100),Y1(+y,0,100),B?Y8(+B,O):1];if(q8(U))return aY(U)}}}function F_(n){return parseInt(n.padEnd(2,n),16)/255}function Y8(n,e){return Y1(e?n/100:n,0,1)}function Y1(n,e,t){return Math.min(Math.max(e,n),t)}function q8(n){return!n.some(Number.isNaN)}const uY={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function D0(n,e,t){return n+t*(e-n)}function tC(n,e,t){return n.map((r,i)=>D0(r,e[i],t))}function AY(n){return n==="rgb"||n==="hcl"||n==="lab"}let wl=class q1{constructor(e,t,r,i=1,s=!0){this.r=e,this.g=t,this.b=r,this.a=i,s||(this.r*=i,this.g*=i,this.b*=i,i||this.overwriteGetter("rgb",[e,t,r,i]))}static parse(e){if(e instanceof q1)return e;if(typeof e!="string")return;const t=lY(e);if(t)return new q1(...t,!1)}get rgb(){const{r:e,g:t,b:r,a:i}=this,s=i||1/0;return this.overwriteGetter("rgb",[e/s,t/s,r/s,i])}get hcl(){return this.overwriteGetter("hcl",oY(this.rgb))}get lab(){return this.overwriteGetter("lab",oF(this.rgb))}overwriteGetter(e,t){return Object.defineProperty(this,e,{value:t}),t}toString(){const[e,t,r,i]=this.rgb;return`rgba(${[e,t,r].map(s=>Math.round(s*255)).join(",")},${i})`}static interpolate(e,t,r,i="rgb"){switch(i){case"rgb":{const[s,l,o,f]=tC(e.rgb,t.rgb,r);return new q1(s,l,o,f,!1)}case"hcl":{const[s,l,o,f]=e.hcl,[y,x,B,O]=t.hcl;let P,U;if(!isNaN(s)&&!isNaN(y)){let se=y-s;y>s&&se>180?se-=360:y<s&&s-y>180&&(se+=360),P=s+r*se}else isNaN(s)?isNaN(y)?P=NaN:(P=y,(o===1||o===0)&&(U=x)):(P=s,(B===1||B===0)&&(U=l));const[j,N,Y,H]=sY([P,U??D0(l,x,r),D0(o,B,r),D0(f,O,r)]);return new q1(j,N,Y,H,!1)}case"lab":{const[s,l,o,f]=sF(tC(e.lab,t.lab,r));return new q1(s,l,o,f,!1)}}}};wl.black=new wl(0,0,0,1);wl.white=new wl(1,1,1,1);wl.transparent=new wl(0,0,0,0);wl.red=new wl(1,0,0,1);class Q6{constructor(e,t,r){e?this.sensitivity=t?"variant":"case":this.sensitivity=t?"accent":"base",this.locale=r,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,t){return this.collator.compare(e,t)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const cY=["bottom","center","top"];class OE{constructor(e,t,r,i,s,l){this.text=e,this.image=t,this.scale=r,this.fontStack=i,this.textColor=s,this.verticalAlign=l}}class Hp{constructor(e){this.sections=e}static fromString(e){return new Hp([new OE(e,null,null,null,null,null)])}isEmpty(){return this.sections.length===0?!0:!this.sections.some(e=>e.text.length!==0||e.image&&e.image.name.length!==0)}static factory(e){return e instanceof Hp?e:Hp.fromString(e)}toString(){return this.sections.length===0?"":this.sections.map(e=>e.text).join("")}}class Ud{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof Ud)return e;if(typeof e=="number")return new Ud([e,e,e,e]);if(Array.isArray(e)&&!(e.length<1||e.length>4)){for(const t of e)if(typeof t!="number")return;switch(e.length){case 1:e=[e[0],e[0],e[0],e[0]];break;case 2:e=[e[0],e[1],e[0],e[1]];break;case 3:e=[e[0],e[1],e[2],e[1]];break}return new Ud(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,r){return new Ud(tC(e.values,t.values,r))}}class lA{constructor(e){this.name="ExpressionEvaluationError",this.message=e}toJSON(){return this.message}}const dY=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class If{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof If)return e;if(!(!Array.isArray(e)||e.length<1||e.length%2!==0)){for(let t=0;t<e.length;t+=2){const r=e[t],i=e[t+1];if(typeof r!="string"||!dY.has(r)||!Array.isArray(i)||i.length!==2||typeof i[0]!="number"||typeof i[1]!="number")return}return new If(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,r){const i=e.values,s=t.values;if(i.length!==s.length)throw new lA(`Cannot interpolate values of different length. from: ${e.toString()}, to: ${t.toString()}`);const l=[];for(let o=0;o<i.length;o+=2){if(i[o]!==s[o])throw new lA(`Cannot interpolate values containing mismatched anchors. from[${o}]: ${i[o]}, to[${o}]: ${s[o]}`);l.push(i[o]);const[f,y]=i[o+1],[x,B]=s[o+1];l.push([D0(f,x,r),D0(y,B,r)])}return new If(l)}}class Nm{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new Nm({name:e,available:!1}):null}}class Sf{constructor(e,t,r){this.from=e,this.to=t,this.transition=r}static interpolate(e,t,r){return new Sf(e,t,r)}static parse(e){if(e instanceof Sf)return e;if(Array.isArray(e)&&e.length===3&&typeof e[0]=="string"&&typeof e[1]=="string"&&typeof e[2]=="number")return new Sf(e[0],e[1],e[2]);if(typeof e=="object"&&typeof e.from=="string"&&typeof e.to=="string"&&typeof e.transition=="number")return new Sf(e.from,e.to,e.transition);if(typeof e=="string")return new Sf(e,e,1)}}function aF(n,e,t,r){return typeof n=="number"&&n>=0&&n<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof t=="number"&&t>=0&&t<=255?typeof r>"u"||typeof r=="number"&&r>=0&&r<=1?null:`Invalid rgba value [${[n,e,t,r].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof r=="number"?[n,e,t,r]:[n,e,t]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function nC(n){if(n===null||typeof n=="string"||typeof n=="boolean"||typeof n=="number"||n instanceof Sf||n instanceof wl||n instanceof Q6||n instanceof Hp||n instanceof Ud||n instanceof If||n instanceof Nm)return!0;if(Array.isArray(n)){for(const e of n)if(!nC(e))return!1;return!0}else if(typeof n=="object"){for(const e in n)if(!nC(n[e]))return!1;return!0}else return!1}function HA(n){if(n===null)return W2;if(typeof n=="string")return ns;if(typeof n=="boolean")return qo;if(typeof n=="number")return kr;if(n instanceof wl)return $p;if(n instanceof Sf)return G2;if(n instanceof Q6)return Q2;if(n instanceof Hp)return Y2;if(n instanceof Ud)return q2;if(n instanceof If)return V2;if(n instanceof Nm)return TC;if(Array.isArray(n)){const e=n.length;let t;for(const r of n){const i=HA(r);if(!t)t=i;else{if(t===i)continue;t=Vo;break}}return Qh(t||Vo,e)}else return uy}function Nv(n){const e=typeof n;return n===null?"":e==="string"||e==="number"||e==="boolean"?String(n):n instanceof wl||n instanceof Sf||n instanceof Hp||n instanceof Ud||n instanceof If||n instanceof Nm?n.toString():JSON.stringify(n)}class by{constructor(e,t){this.type=e,this.value=t}static parse(e,t){if(e.length!==2)return t.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!nC(e[1]))return t.error("invalid value");const r=e[1];let i=HA(r);const s=t.expectedType;return i.kind==="array"&&i.N===0&&s&&s.kind==="array"&&(typeof s.N!="number"||s.N===0)&&(i=s),new by(i,r)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const L_={string:ns,number:kr,boolean:qo,object:uy};class lp{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let r=1,i;const s=e[0];if(s==="array"){let o;if(e.length>2){const y=e[1];if(typeof y!="string"||!(y in L_)||y==="object")return t.error('The item type argument of "array" must be one of string, number, boolean',1);o=L_[y],r++}else o=Vo;let f;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);f=e[2],r++}i=Qh(o,f)}else{if(!L_[s])throw new Error(`Types doesn't contain name = ${s}`);i=L_[s]}const l=[];for(;r<e.length;r++){const o=t.parse(e[r],r,Vo);if(!o)return null;l.push(o)}return new lp(i,l)}evaluate(e){for(let t=0;t<this.args.length;t++){const r=this.args[t].evaluate(e);if(eC(this.type,HA(r))){if(t===this.args.length-1)throw new lA(`Expected value to be of type ${Zl(this.type)}, but found ${Zl(HA(r))} instead.`)}else return r}throw new Error}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}const V8={"to-boolean":qo,"to-color":$p,"to-number":kr,"to-string":ns};class O0{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const r=e[0];if(!V8[r])throw new Error(`Can't parse ${r} as it is not part of the known types`);if((r==="to-boolean"||r==="to-string")&&e.length!==2)return t.error("Expected one argument.");const i=V8[r],s=[];for(let l=1;l<e.length;l++){const o=t.parse(e[l],l,Vo);if(!o)return null;s.push(o)}return new O0(i,s)}evaluate(e){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(e);case"color":{let t,r;for(const i of this.args){if(t=i.evaluate(e),r=null,t instanceof wl)return t;if(typeof t=="string"){const s=e.parseColor(t);if(s)return s}else if(Array.isArray(t)&&(t.length<3||t.length>4?r=`Invalid rgba value ${JSON.stringify(t)}: expected an array containing either three or four numeric values.`:r=aF(t[0],t[1],t[2],t[3]),!r))return new wl(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new lA(r||`Could not parse color from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"padding":{let t;for(const r of this.args){t=r.evaluate(e);const i=Ud.parse(t);if(i)return i}throw new lA(`Could not parse padding from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"variableAnchorOffsetCollection":{let t;for(const r of this.args){t=r.evaluate(e);const i=If.parse(t);if(i)return i}throw new lA(`Could not parse variableAnchorOffsetCollection from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"number":{let t=null;for(const r of this.args){if(t=r.evaluate(e),t===null)return 0;const i=Number(t);if(!isNaN(i))return i}throw new lA(`Could not convert ${JSON.stringify(t)} to number.`)}case"formatted":return Hp.fromString(Nv(this.args[0].evaluate(e)));case"resolvedImage":return Nm.fromString(Nv(this.args[0].evaluate(e)));case"projectionDefinition":return this.args[0].evaluate(e);default:return Nv(this.args[0].evaluate(e))}}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}const hY=["Unknown","Point","LineString","Polygon"];class lF{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?hY[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(e){let t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=wl.parse(e)),t}}class $2{constructor(e,t,r=[],i,s=new W6,l=[]){this.registry=e,this.path=r,this.key=r.map(o=>`[${o}]`).join(""),this.scope=s,this.errors=l,this.expectedType=i,this._isConstant=t}parse(e,t,r,i,s={}){return t?this.concat(t,r,i)._parse(e,s):this._parse(e,s)}_parse(e,t){(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number")&&(e=["literal",e]);function r(i,s,l){return l==="assert"?new lp(s,[i]):l==="coerce"?new O0(s,[i]):i}if(Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const i=e[0];if(typeof i!="string")return this.error(`Expression name must be a string, but found ${typeof i} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const s=this.registry[i];if(s){let l=s.parse(e,this);if(!l)return null;if(this.expectedType){const o=this.expectedType,f=l.type;if((o.kind==="string"||o.kind==="number"||o.kind==="boolean"||o.kind==="object"||o.kind==="array")&&f.kind==="value")l=r(l,o,t.typeAnnotation||"assert");else if(o.kind==="projectionDefinition"&&(f.kind==="string"||f.kind==="array"))l=r(l,o,t.typeAnnotation||"coerce");else if((o.kind==="color"||o.kind==="formatted"||o.kind==="resolvedImage")&&(f.kind==="value"||f.kind==="string"))l=r(l,o,t.typeAnnotation||"coerce");else if(o.kind==="padding"&&(f.kind==="value"||f.kind==="number"||f.kind==="array"))l=r(l,o,t.typeAnnotation||"coerce");else if(o.kind==="variableAnchorOffsetCollection"&&(f.kind==="value"||f.kind==="array"))l=r(l,o,t.typeAnnotation||"coerce");else if(this.checkSubtype(o,f))return null}if(!(l instanceof by)&&l.type.kind!=="resolvedImage"&&this._isConstant(l)){const o=new lF;try{l=new by(l.type,l.evaluate(o))}catch(f){return this.error(f.message),null}}return l}return this.error(`Unknown expression "${i}". If you wanted a literal array, use ["literal", [...]].`,0)}else return typeof e>"u"?this.error("'undefined' value invalid. Use null instead."):typeof e=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof e} instead.`)}concat(e,t,r){const i=typeof e=="number"?this.path.concat(e):this.path,s=r?this.scope.concat(r):this.scope;return new $2(this.registry,this._isConstant,i,t||null,s,this.errors)}error(e,...t){const r=`${this.key}${t.map(i=>`[${i}]`).join("")}`;this.errors.push(new Wp(r,e))}checkSubtype(e,t){const r=eC(e,t);return r&&this.error(r),r}}class H2{constructor(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const t of this.bindings)e(t[1]);e(this.result)}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const r=[];for(let s=1;s<e.length-1;s+=2){const l=e[s];if(typeof l!="string")return t.error(`Expected string, but found ${typeof l} instead.`,s);if(/[^a-zA-Z0-9_]/.test(l))return t.error("Variable names must contain only alphanumeric characters or '_'.",s);const o=t.parse(e[s+1],s+1);if(!o)return null;r.push([l,o])}const i=t.parse(e[e.length-1],e.length-1,t.expectedType,r);return i?new H2(r,i):null}outputDefined(){return this.result.outputDefined()}}class Z2{constructor(e,t){this.type=t.type,this.name=e,this.boundExpression=t}static parse(e,t){if(e.length!==2||typeof e[1]!="string")return t.error("'var' expression requires exactly one string literal argument.");const r=e[1];return t.scope.has(r)?new Z2(r,t.scope.get(r)):t.error(`Unknown variable "${r}". Make sure "${r}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}}class Y6{constructor(e,t,r){this.type=e,this.index=t,this.input=r}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,kr),i=t.parse(e[2],2,Qh(t.expectedType||Vo));if(!r||!i)return null;const s=i.type;return new Y6(s.itemType,r,i)}evaluate(e){const t=this.index.evaluate(e),r=this.input.evaluate(e);if(t<0)throw new lA(`Array index out of bounds: ${t} < 0.`);if(t>=r.length)throw new lA(`Array index out of bounds: ${t} > ${r.length-1}.`);if(t!==Math.floor(t))throw new lA(`Array index must be an integer, but found ${t} instead.`);return r[t]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}}class q6{constructor(e,t){this.type=qo,this.needle=e,this.haystack=t}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,Vo),i=t.parse(e[2],2,Vo);return!r||!i?null:G6(r.type,[qo,ns,kr,W2,Vo])?new q6(r,i):t.error(`Expected first argument to be of type boolean, string, number or null, but found ${Zl(r.type)} instead`)}evaluate(e){const t=this.needle.evaluate(e),r=this.haystack.evaluate(e);if(!r)return!1;if(!Ig(t,["boolean","string","number","null"]))throw new lA(`Expected first argument to be of type boolean, string, number or null, but found ${Zl(HA(t))} instead.`);if(!Ig(r,["string","array"]))throw new lA(`Expected second argument to be of type array or string, but found ${Zl(HA(r))} instead.`);return r.indexOf(t)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}}class zb{constructor(e,t,r){this.type=kr,this.needle=e,this.haystack=t,this.fromIndex=r}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,Vo),i=t.parse(e[2],2,Vo);if(!r||!i)return null;if(!G6(r.type,[qo,ns,kr,W2,Vo]))return t.error(`Expected first argument to be of type boolean, string, number or null, but found ${Zl(r.type)} instead`);if(e.length===4){const s=t.parse(e[3],3,kr);return s?new zb(r,i,s):null}else return new zb(r,i)}evaluate(e){const t=this.needle.evaluate(e),r=this.haystack.evaluate(e);if(!Ig(t,["boolean","string","number","null"]))throw new lA(`Expected first argument to be of type boolean, string, number or null, but found ${Zl(HA(t))} instead.`);let i;if(this.fromIndex&&(i=this.fromIndex.evaluate(e)),Ig(r,["string"])){const s=r.indexOf(t,i);return s===-1?-1:[...r.slice(0,s)].length}else{if(Ig(r,["array"]))return r.indexOf(t,i);throw new lA(`Expected second argument to be of type array or string, but found ${Zl(HA(r))} instead.`)}}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}}class V6{constructor(e,t,r,i,s,l){this.inputType=e,this.type=t,this.input=r,this.cases=i,this.outputs=s,this.otherwise=l}static parse(e,t){if(e.length<5)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!==1)return t.error("Expected an even number of arguments.");let r,i;t.expectedType&&t.expectedType.kind!=="value"&&(i=t.expectedType);const s={},l=[];for(let y=2;y<e.length-1;y+=2){let x=e[y];const B=e[y+1];Array.isArray(x)||(x=[x]);const O=t.concat(y);if(x.length===0)return O.error("Expected at least one branch label.");for(const U of x){if(typeof U!="number"&&typeof U!="string")return O.error("Branch labels must be numbers or strings.");if(typeof U=="number"&&Math.abs(U)>Number.MAX_SAFE_INTEGER)return O.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof U=="number"&&Math.floor(U)!==U)return O.error("Numeric branch labels must be integer values.");if(!r)r=HA(U);else if(O.checkSubtype(r,HA(U)))return null;if(typeof s[String(U)]<"u")return O.error("Branch labels must be unique.");s[String(U)]=l.length}const P=t.parse(B,y,i);if(!P)return null;i=i||P.type,l.push(P)}const o=t.parse(e[1],1,Vo);if(!o)return null;const f=t.parse(e[e.length-1],e.length-1,i);return!f||o.type.kind!=="value"&&t.concat(1).checkSubtype(r,o.type)?null:new V6(r,i,o,s,l,f)}evaluate(e){const t=this.input.evaluate(e);return(HA(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}}class $6{constructor(e,t,r){this.type=e,this.branches=t,this.otherwise=r}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!==0)return t.error("Expected an odd number of arguments.");let r;t.expectedType&&t.expectedType.kind!=="value"&&(r=t.expectedType);const i=[];for(let l=1;l<e.length-1;l+=2){const o=t.parse(e[l],l,qo);if(!o)return null;const f=t.parse(e[l+1],l+1,r);if(!f)return null;i.push([o,f]),r=r||f.type}const s=t.parse(e[e.length-1],e.length-1,r);if(!s)return null;if(!r)throw new Error("Can't infer output type");return new $6(r,i,s)}evaluate(e){for(const[t,r]of this.branches)if(t.evaluate(e))return r.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[t,r]of this.branches)e(t),e(r);e(this.otherwise)}outputDefined(){return this.branches.every(([e,t])=>t.outputDefined())&&this.otherwise.outputDefined()}}class jb{constructor(e,t,r,i){this.type=e,this.input=t,this.beginIndex=r,this.endIndex=i}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,Vo),i=t.parse(e[2],2,kr);if(!r||!i)return null;if(!G6(r.type,[Qh(Vo),ns,Vo]))return t.error(`Expected first argument to be of type array or string, but found ${Zl(r.type)} instead`);if(e.length===4){const s=t.parse(e[3],3,kr);return s?new jb(r.type,r,i,s):null}else return new jb(r.type,r,i)}evaluate(e){const t=this.input.evaluate(e),r=this.beginIndex.evaluate(e);let i;if(this.endIndex&&(i=this.endIndex.evaluate(e)),Ig(t,["string"]))return[...t].slice(r,i).join("");if(Ig(t,["array"]))return t.slice(r,i);throw new lA(`Expected first argument to be of type array or string, but found ${Zl(HA(t))} instead.`)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}}function X2(n,e){const t=n.length-1;let r=0,i=t,s=0,l,o;for(;r<=i;)if(s=Math.floor((r+i)/2),l=n[s],o=n[s+1],l<=e){if(s===t||e<o)return s;r=s+1}else if(l>e)i=s-1;else throw new lA("Input is not a number.");return 0}class J2{constructor(e,t,r){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(const[i,s]of r)this.labels.push(i),this.outputs.push(s)}static parse(e,t){if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");const r=t.parse(e[1],1,kr);if(!r)return null;const i=[];let s=null;t.expectedType&&t.expectedType.kind!=="value"&&(s=t.expectedType);for(let l=1;l<e.length;l+=2){const o=l===1?-1/0:e[l],f=e[l+1],y=l,x=l+1;if(typeof o!="number")return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',y);if(i.length&&i[i.length-1][0]>=o)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',y);const B=t.parse(f,x,s);if(!B)return null;s=s||B.type,i.push([o,B])}return new J2(s,r,i)}evaluate(e){const t=this.labels,r=this.outputs;if(t.length===1)return r[0].evaluate(e);const i=this.input.evaluate(e);if(i<=t[0])return r[0].evaluate(e);const s=t.length;if(i>=t[s-1])return r[s-1].evaluate(e);const l=X2(t,i);return r[l].evaluate(e)}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}}function fY(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var R3,$8;function pY(){if($8)return R3;$8=1,R3=n;function n(e,t,r,i){this.cx=3*e,this.bx=3*(r-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(i-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=t,this.p2x=r,this.p2y=i}return n.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,t){if(t===void 0&&(t=1e-6),e<0)return 0;if(e>1)return 1;for(var r=e,i=0;i<8;i++){var s=this.sampleCurveX(r)-e;if(Math.abs(s)<t)return r;var l=this.sampleCurveDerivativeX(r);if(Math.abs(l)<1e-6)break;r=r-s/l}var o=0,f=1;for(r=e,i=0;i<20&&(s=this.sampleCurveX(r),!(Math.abs(s-e)<t));i++)e>s?o=r:f=r,r=(f-o)*.5+o;return r},solve:function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))}},R3}var mY=pY(),gY=fY(mY);class kf{constructor(e,t,r,i,s){this.type=e,this.operator=t,this.interpolation=r,this.input=i,this.labels=[],this.outputs=[];for(const[l,o]of s)this.labels.push(l),this.outputs.push(o)}static interpolationFactor(e,t,r,i){let s=0;if(e.name==="exponential")s=D3(t,e.base,r,i);else if(e.name==="linear")s=D3(t,1,r,i);else if(e.name==="cubic-bezier"){const l=e.controlPoints;s=new gY(l[0],l[1],l[2],l[3]).solve(D3(t,1,r,i))}return s}static parse(e,t){let[r,i,s,...l]=e;if(!Array.isArray(i)||i.length===0)return t.error("Expected an interpolation type expression.",1);if(i[0]==="linear")i={name:"linear"};else if(i[0]==="exponential"){const y=i[1];if(typeof y!="number")return t.error("Exponential interpolation requires a numeric base.",1,1);i={name:"exponential",base:y}}else if(i[0]==="cubic-bezier"){const y=i.slice(1);if(y.length!==4||y.some(x=>typeof x!="number"||x<0||x>1))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);i={name:"cubic-bezier",controlPoints:y}}else return t.error(`Unknown interpolation type ${String(i[0])}`,1,0);if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");if(s=t.parse(s,2,kr),!s)return null;const o=[];let f=null;r==="interpolate-hcl"||r==="interpolate-lab"?f=$p:t.expectedType&&t.expectedType.kind!=="value"&&(f=t.expectedType);for(let y=0;y<l.length;y+=2){const x=l[y],B=l[y+1],O=y+3,P=y+4;if(typeof x!="number")return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',O);if(o.length&&o[o.length-1][0]>=x)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',O);const U=t.parse(B,P,f);if(!U)return null;f=f||U.type,o.push([x,U])}return!g1(f,kr)&&!g1(f,G2)&&!g1(f,$p)&&!g1(f,q2)&&!g1(f,V2)&&!g1(f,Qh(kr))?t.error(`Type ${Zl(f)} is not interpolatable.`):new kf(f,r,i,s,o)}evaluate(e){const t=this.labels,r=this.outputs;if(t.length===1)return r[0].evaluate(e);const i=this.input.evaluate(e);if(i<=t[0])return r[0].evaluate(e);const s=t.length;if(i>=t[s-1])return r[s-1].evaluate(e);const l=X2(t,i),o=t[l],f=t[l+1],y=kf.interpolationFactor(this.interpolation,i,o,f),x=r[l].evaluate(e),B=r[l+1].evaluate(e);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return D0(x,B,y);case"color":return wl.interpolate(x,B,y);case"padding":return Ud.interpolate(x,B,y);case"variableAnchorOffsetCollection":return If.interpolate(x,B,y);case"array":return tC(x,B,y);case"projectionDefinition":return Sf.interpolate(x,B,y)}case"interpolate-hcl":return wl.interpolate(x,B,y,"hcl");case"interpolate-lab":return wl.interpolate(x,B,y,"lab")}}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}}function D3(n,e,t,r){const i=r-t,s=n-t;return i===0?0:e===1?s/i:(Math.pow(e,s)-1)/(Math.pow(e,i)-1)}const yY={color:wl.interpolate,number:D0,padding:Ud.interpolate,variableAnchorOffsetCollection:If.interpolate,array:tC};class rC{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let r=null;const i=t.expectedType;i&&i.kind!=="value"&&(r=i);const s=[];for(const o of e.slice(1)){const f=t.parse(o,1+s.length,r,void 0,{typeAnnotation:"omit"});if(!f)return null;r=r||f.type,s.push(f)}if(!r)throw new Error("No output type");return i&&s.some(o=>eC(i,o.type))?new rC(Vo,s):new rC(r,s)}evaluate(e){let t=null,r=0,i;for(const s of this.args)if(r++,t=s.evaluate(e),t&&t instanceof Nm&&!t.available&&(i||(i=t.name),t=null,r===this.args.length&&(t=i)),t!==null)break;return t}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}function H8(n,e){return n==="=="||n==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function vY(n,e,t){return e===t}function CY(n,e,t){return e!==t}function _Y(n,e,t){return e<t}function bY(n,e,t){return e>t}function xY(n,e,t){return e<=t}function MY(n,e,t){return e>=t}function uF(n,e,t,r){return r.compare(e,t)===0}function wY(n,e,t,r){return!uF(n,e,t,r)}function SY(n,e,t,r){return r.compare(e,t)<0}function EY(n,e,t,r){return r.compare(e,t)>0}function BY(n,e,t,r){return r.compare(e,t)<=0}function OY(n,e,t,r){return r.compare(e,t)>=0}function Ry(n,e,t){const r=n!=="=="&&n!=="!=";return class AF{constructor(s,l,o){this.type=qo,this.lhs=s,this.rhs=l,this.collator=o,this.hasUntypedArgument=s.type.kind==="value"||l.type.kind==="value"}static parse(s,l){if(s.length!==3&&s.length!==4)return l.error("Expected two or three arguments.");const o=s[0];let f=l.parse(s[1],1,Vo);if(!f)return null;if(!H8(o,f.type))return l.concat(1).error(`"${o}" comparisons are not supported for type '${Zl(f.type)}'.`);let y=l.parse(s[2],2,Vo);if(!y)return null;if(!H8(o,y.type))return l.concat(2).error(`"${o}" comparisons are not supported for type '${Zl(y.type)}'.`);if(f.type.kind!==y.type.kind&&f.type.kind!=="value"&&y.type.kind!=="value")return l.error(`Cannot compare types '${Zl(f.type)}' and '${Zl(y.type)}'.`);r&&(f.type.kind==="value"&&y.type.kind!=="value"?f=new lp(y.type,[f]):f.type.kind!=="value"&&y.type.kind==="value"&&(y=new lp(f.type,[y])));let x=null;if(s.length===4){if(f.type.kind!=="string"&&y.type.kind!=="string"&&f.type.kind!=="value"&&y.type.kind!=="value")return l.error("Cannot use collator to compare non-string types.");if(x=l.parse(s[3],3,Q2),!x)return null}return new AF(f,y,x)}evaluate(s){const l=this.lhs.evaluate(s),o=this.rhs.evaluate(s);if(r&&this.hasUntypedArgument){const f=HA(l),y=HA(o);if(f.kind!==y.kind||!(f.kind==="string"||f.kind==="number"))throw new lA(`Expected arguments for "${n}" to be (string, string) or (number, number), but found (${f.kind}, ${y.kind}) instead.`)}if(this.collator&&!r&&this.hasUntypedArgument){const f=HA(l),y=HA(o);if(f.kind!=="string"||y.kind!=="string")return e(s,l,o)}return this.collator?t(s,l,o,this.collator.evaluate(s)):e(s,l,o)}eachChild(s){s(this.lhs),s(this.rhs),this.collator&&s(this.collator)}outputDefined(){return!0}}}const IY=Ry("==",vY,uF),kY=Ry("!=",CY,wY),TY=Ry("<",_Y,SY),PY=Ry(">",bY,EY),KY=Ry("<=",xY,BY),RY=Ry(">=",MY,OY);class ex{constructor(e,t,r){this.type=Q2,this.locale=r,this.caseSensitive=e,this.diacriticSensitive=t}static parse(e,t){if(e.length!==2)return t.error("Expected one argument.");const r=e[1];if(typeof r!="object"||Array.isArray(r))return t.error("Collator options argument must be an object.");const i=t.parse(r["case-sensitive"]===void 0?!1:r["case-sensitive"],1,qo);if(!i)return null;const s=t.parse(r["diacritic-sensitive"]===void 0?!1:r["diacritic-sensitive"],1,qo);if(!s)return null;let l=null;return r.locale&&(l=t.parse(r.locale,1,ns),!l)?null:new ex(i,s,l)}evaluate(e){return new Q6(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}}class H6{constructor(e,t,r,i,s){this.type=ns,this.number=e,this.locale=t,this.currency=r,this.minFractionDigits=i,this.maxFractionDigits=s}static parse(e,t){if(e.length!==3)return t.error("Expected two arguments.");const r=t.parse(e[1],1,kr);if(!r)return null;const i=e[2];if(typeof i!="object"||Array.isArray(i))return t.error("NumberFormat options argument must be an object.");let s=null;if(i.locale&&(s=t.parse(i.locale,1,ns),!s))return null;let l=null;if(i.currency&&(l=t.parse(i.currency,1,ns),!l))return null;let o=null;if(i["min-fraction-digits"]&&(o=t.parse(i["min-fraction-digits"],1,kr),!o))return null;let f=null;return i["max-fraction-digits"]&&(f=t.parse(i["max-fraction-digits"],1,kr),!f)?null:new H6(r,s,l,o,f)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}}class Z6{constructor(e){this.type=Y2,this.sections=e}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const r=e[1];if(!Array.isArray(r)&&typeof r=="object")return t.error("First argument must be an image or text section.");const i=[];let s=!1;for(let l=1;l<=e.length-1;++l){const o=e[l];if(s&&typeof o=="object"&&!Array.isArray(o)){s=!1;let f=null;if(o["font-scale"]&&(f=t.parse(o["font-scale"],1,kr),!f))return null;let y=null;if(o["text-font"]&&(y=t.parse(o["text-font"],1,Qh(ns)),!y))return null;let x=null;if(o["text-color"]&&(x=t.parse(o["text-color"],1,$p),!x))return null;let B=null;if(o["vertical-align"]){if(typeof o["vertical-align"]=="string"&&!cY.includes(o["vertical-align"]))return t.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${o["vertical-align"]}' instead.`);if(B=t.parse(o["vertical-align"],1,ns),!B)return null}const O=i[i.length-1];O.scale=f,O.font=y,O.textColor=x,O.verticalAlign=B}else{const f=t.parse(e[l],1,Vo);if(!f)return null;const y=f.type.kind;if(y!=="string"&&y!=="value"&&y!=="null"&&y!=="resolvedImage")return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");s=!0,i.push({content:f,scale:null,font:null,textColor:null,verticalAlign:null})}}return new Z6(i)}evaluate(e){const t=r=>{const i=r.content.evaluate(e);return HA(i)===TC?new OE("",i,null,null,null,r.verticalAlign?r.verticalAlign.evaluate(e):null):new OE(Nv(i),null,r.scale?r.scale.evaluate(e):null,r.font?r.font.evaluate(e).join(","):null,r.textColor?r.textColor.evaluate(e):null,r.verticalAlign?r.verticalAlign.evaluate(e):null)};return new Hp(this.sections.map(t))}eachChild(e){for(const t of this.sections)e(t.content),t.scale&&e(t.scale),t.font&&e(t.font),t.textColor&&e(t.textColor),t.verticalAlign&&e(t.verticalAlign)}outputDefined(){return!1}}class X6{constructor(e){this.type=TC,this.input=e}static parse(e,t){if(e.length!==2)return t.error("Expected two arguments.");const r=t.parse(e[1],1,ns);return r?new X6(r):t.error("No image name provided.")}evaluate(e){const t=this.input.evaluate(e),r=Nm.fromString(t);return r&&e.availableImages&&(r.available=e.availableImages.indexOf(t)>-1),r}eachChild(e){e(this.input)}outputDefined(){return!1}}class J6{constructor(e){this.type=kr,this.input=e}static parse(e,t){if(e.length!==2)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const r=t.parse(e[1],1);return r?r.type.kind!=="array"&&r.type.kind!=="string"&&r.type.kind!=="value"?t.error(`Expected argument of type string or array, but found ${Zl(r.type)} instead.`):new J6(r):null}evaluate(e){const t=this.input.evaluate(e);if(typeof t=="string")return[...t].length;if(Array.isArray(t))return t.length;throw new lA(`Expected value to be of type string or array, but found ${Zl(HA(t))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}}const Zp=8192;function DY(n,e){const t=FY(n[0]),r=UY(n[1]),i=Math.pow(2,e.z);return[Math.round(t*i*Zp),Math.round(r*i*Zp)]}function eB(n,e){const t=Math.pow(2,e.z),r=(n[0]/Zp+e.x)/t,i=(n[1]/Zp+e.y)/t;return[LY(r),zY(i)]}function FY(n){return(180+n)/360}function LY(n){return n*360-180}function UY(n){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n*Math.PI/360)))/360}function zY(n){return 360/Math.PI*Math.atan(Math.exp((180-n*360)*Math.PI/180))-90}function PC(n,e){n[0]=Math.min(n[0],e[0]),n[1]=Math.min(n[1],e[1]),n[2]=Math.max(n[2],e[0]),n[3]=Math.max(n[3],e[1])}function iC(n,e){return!(n[0]<=e[0]||n[2]>=e[2]||n[1]<=e[1]||n[3]>=e[3])}function jY(n,e,t){return e[1]>n[1]!=t[1]>n[1]&&n[0]<(t[0]-e[0])*(n[1]-e[1])/(t[1]-e[1])+e[0]}function NY(n,e,t){const r=n[0]-e[0],i=n[1]-e[1],s=n[0]-t[0],l=n[1]-t[1];return r*l-s*i===0&&r*s<=0&&i*l<=0}function tx(n,e,t,r){const i=[e[0]-n[0],e[1]-n[1]],s=[r[0]-t[0],r[1]-t[1]];return YY(s,i)===0?!1:!!(Z8(n,e,t,r)&&Z8(t,r,n,e))}function WY(n,e,t){for(const r of t)for(let i=0;i<r.length-1;++i)if(tx(n,e,r[i],r[i+1]))return!0;return!1}function Dy(n,e,t=!1){let r=!1;for(const i of e)for(let s=0;s<i.length-1;s++){if(NY(n,i[s],i[s+1]))return t;jY(n,i[s],i[s+1])&&(r=!r)}return r}function GY(n,e){for(const t of e)if(Dy(n,t))return!0;return!1}function cF(n,e){for(const t of n)if(!Dy(t,e))return!1;for(let t=0;t<n.length-1;++t)if(WY(n[t],n[t+1],e))return!1;return!0}function QY(n,e){for(const t of e)if(cF(n,t))return!0;return!1}function YY(n,e){return n[0]*e[1]-n[1]*e[0]}function Z8(n,e,t,r){const i=n[0]-t[0],s=n[1]-t[1],l=e[0]-t[0],o=e[1]-t[1],f=r[0]-t[0],y=r[1]-t[1],x=i*y-f*s,B=l*y-f*o;return x>0&&B<0||x<0&&B>0}function tB(n,e,t){const r=[];for(let i=0;i<n.length;i++){const s=[];for(let l=0;l<n[i].length;l++){const o=DY(n[i][l],t);PC(e,o),s.push(o)}r.push(s)}return r}function dF(n,e,t){const r=[];for(let i=0;i<n.length;i++){const s=tB(n[i],e,t);r.push(s)}return r}function hF(n,e,t,r){if(n[0]<t[0]||n[0]>t[2]){const i=r*.5;let s=n[0]-t[0]>i?-r:t[0]-n[0]>i?r:0;s===0&&(s=n[0]-t[2]>i?-r:t[2]-n[0]>i?r:0),n[0]+=s}PC(e,n)}function qY(n){n[0]=n[1]=1/0,n[2]=n[3]=-1/0}function X8(n,e,t,r){const i=Math.pow(2,r.z)*Zp,s=[r.x*Zp,r.y*Zp],l=[];for(const o of n)for(const f of o){const y=[f.x+s[0],f.y+s[1]];hF(y,e,t,i),l.push(y)}return l}function J8(n,e,t,r){const i=Math.pow(2,r.z)*Zp,s=[r.x*Zp,r.y*Zp],l=[];for(const o of n){const f=[];for(const y of o){const x=[y.x+s[0],y.y+s[1]];PC(e,x),f.push(x)}l.push(f)}if(e[2]-e[0]<=i/2){qY(e);for(const o of l)for(const f of o)hF(f,e,t,i)}return l}function VY(n,e){const t=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=n.canonicalID();if(e.type==="Polygon"){const s=tB(e.coordinates,r,i),l=X8(n.geometry(),t,r,i);if(!iC(t,r))return!1;for(const o of l)if(!Dy(o,s))return!1}if(e.type==="MultiPolygon"){const s=dF(e.coordinates,r,i),l=X8(n.geometry(),t,r,i);if(!iC(t,r))return!1;for(const o of l)if(!GY(o,s))return!1}return!0}function $Y(n,e){const t=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=n.canonicalID();if(e.type==="Polygon"){const s=tB(e.coordinates,r,i),l=J8(n.geometry(),t,r,i);if(!iC(t,r))return!1;for(const o of l)if(!cF(o,s))return!1}if(e.type==="MultiPolygon"){const s=dF(e.coordinates,r,i),l=J8(n.geometry(),t,r,i);if(!iC(t,r))return!1;for(const o of l)if(!QY(o,s))return!1}return!0}class kg{constructor(e,t){this.type=qo,this.geojson=e,this.geometries=t}static parse(e,t){if(e.length!==2)return t.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(nC(e[1])){const r=e[1];if(r.type==="FeatureCollection"){const i=[];for(const s of r.features){const{type:l,coordinates:o}=s.geometry;l==="Polygon"&&i.push(o),l==="MultiPolygon"&&i.push(...o)}if(i.length){const s={type:"MultiPolygon",coordinates:i};return new kg(r,s)}}else if(r.type==="Feature"){const i=r.geometry.type;if(i==="Polygon"||i==="MultiPolygon")return new kg(r,r.geometry)}else if(r.type==="Polygon"||r.type==="MultiPolygon")return new kg(r,r)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return VY(e,this.geometries);if(e.geometryType()==="LineString")return $Y(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class fF{constructor(e=[],t=(r,i)=>r<i?-1:r>i?1:0){if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let r=(this.length>>1)-1;r>=0;r--)this._down(r)}push(e){this.data.push(e),this._up(this.length++)}pop(){if(this.length===0)return;const e=this.data[0],t=this.data.pop();return--this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:r}=this,i=t[e];for(;e>0;){const s=e-1>>1,l=t[s];if(r(i,l)>=0)break;t[e]=l,e=s}t[e]=i}_down(e){const{data:t,compare:r}=this,i=this.length>>1,s=t[e];for(;e<i;){let l=(e<<1)+1;const o=l+1;if(o<this.length&&r(t[o],t[l])<0&&(l=o),r(t[l],s)>=0)break;t[e]=t[l],e=l}t[e]=s}}function HY(n,e){if(n.length<=1)return[n];const r=[];let i,s;for(const l of n){const o=ZY(l);o!==0&&(l.area=Math.abs(o),s===void 0&&(s=o<0),s===o<0?(i&&r.push(i),i=[l]):i.push(l))}return i&&r.push(i),r}function ZY(n){let e=0;for(let t=0,r=n.length,i=r-1,s,l;t<r;i=t++)s=n[t],l=n[i],e+=(l.x-s.x)*(s.y+l.y);return e}const XY=6378.137,e7=1/298.257223563,t7=e7*(2-e7),n7=Math.PI/180;class nB{constructor(e){const t=n7*XY*1e3,r=Math.cos(e*n7),i=1/(1-t7*(1-r*r)),s=Math.sqrt(i);this.kx=t*s*r,this.ky=t*s*i*(1-t7)}distance(e,t){const r=this.wrap(e[0]-t[0])*this.kx,i=(e[1]-t[1])*this.ky;return Math.sqrt(r*r+i*i)}pointOnLine(e,t){let r=1/0,i,s,l,o;for(let f=0;f<e.length-1;f++){let y=e[f][0],x=e[f][1],B=this.wrap(e[f+1][0]-y)*this.kx,O=(e[f+1][1]-x)*this.ky,P=0;(B!==0||O!==0)&&(P=(this.wrap(t[0]-y)*this.kx*B+(t[1]-x)*this.ky*O)/(B*B+O*O),P>1?(y=e[f+1][0],x=e[f+1][1]):P>0&&(y+=B/this.kx*P,x+=O/this.ky*P)),B=this.wrap(t[0]-y)*this.kx,O=(t[1]-x)*this.ky;const U=B*B+O*O;U<r&&(r=U,i=y,s=x,l=f,o=P)}return{point:[i,s],index:l,t:Math.max(0,Math.min(1,o))}}wrap(e){for(;e<-180;)e+=360;for(;e>180;)e-=360;return e}}const IE=100,kE=50;function pF(n,e){return e[0]-n[0]}function Nb(n){return n[1]-n[0]+1}function Lm(n,e){return n[1]>=n[0]&&n[1]<e}function TE(n,e){if(n[0]>n[1])return[null,null];const t=Nb(n);if(e){if(t===2)return[n,null];const i=Math.floor(t/2);return[[n[0],n[0]+i],[n[0]+i,n[1]]]}if(t===1)return[n,null];const r=Math.floor(t/2)-1;return[[n[0],n[0]+r],[n[0]+r+1,n[1]]]}function PE(n,e){if(!Lm(e,n.length))return[1/0,1/0,-1/0,-1/0];const t=[1/0,1/0,-1/0,-1/0];for(let r=e[0];r<=e[1];++r)PC(t,n[r]);return t}function KE(n){const e=[1/0,1/0,-1/0,-1/0];for(const t of n)for(const r of t)PC(e,r);return e}function r7(n){return n[0]!==-1/0&&n[1]!==-1/0&&n[2]!==1/0&&n[3]!==1/0}function rB(n,e,t){if(!r7(n)||!r7(e))return NaN;let r=0,i=0;return n[2]<e[0]&&(r=e[0]-n[2]),n[0]>e[2]&&(r=n[0]-e[2]),n[1]>e[3]&&(i=n[1]-e[3]),n[3]<e[1]&&(i=e[1]-n[3]),t.distance([0,0],[r,i])}function xg(n,e,t){const r=t.pointOnLine(e,n);return t.distance(n,r.point)}function iB(n,e,t,r,i){const s=Math.min(xg(n,[t,r],i),xg(e,[t,r],i)),l=Math.min(xg(t,[n,e],i),xg(r,[n,e],i));return Math.min(s,l)}function JY(n,e,t,r,i){if(!(Lm(e,n.length)&&Lm(r,t.length)))return 1/0;let l=1/0;for(let o=e[0];o<e[1];++o){const f=n[o],y=n[o+1];for(let x=r[0];x<r[1];++x){const B=t[x],O=t[x+1];if(tx(f,y,B,O))return 0;l=Math.min(l,iB(f,y,B,O,i))}}return l}function eq(n,e,t,r,i){if(!(Lm(e,n.length)&&Lm(r,t.length)))return NaN;let l=1/0;for(let o=e[0];o<=e[1];++o)for(let f=r[0];f<=r[1];++f)if(l=Math.min(l,i.distance(n[o],t[f])),l===0)return l;return l}function tq(n,e,t){if(Dy(n,e,!0))return 0;let r=1/0;for(const i of e){const s=i[0],l=i[i.length-1];if(s!==l&&(r=Math.min(r,xg(n,[l,s],t)),r===0))return r;const o=t.pointOnLine(i,n);if(r=Math.min(r,t.distance(n,o.point)),r===0)return r}return r}function nq(n,e,t,r){if(!Lm(e,n.length))return NaN;for(let s=e[0];s<=e[1];++s)if(Dy(n[s],t,!0))return 0;let i=1/0;for(let s=e[0];s<e[1];++s){const l=n[s],o=n[s+1];for(const f of t)for(let y=0,x=f.length,B=x-1;y<x;B=y++){const O=f[B],P=f[y];if(tx(l,o,O,P))return 0;i=Math.min(i,iB(l,o,O,P,r))}}return i}function i7(n,e){for(const t of n)for(const r of t)if(Dy(r,e,!0))return!0;return!1}function rq(n,e,t,r=1/0){const i=KE(n),s=KE(e);if(r!==1/0&&rB(i,s,t)>=r)return r;if(iC(i,s)){if(i7(n,e))return 0}else if(i7(e,n))return 0;let l=1/0;for(const o of n)for(let f=0,y=o.length,x=y-1;f<y;x=f++){const B=o[x],O=o[f];for(const P of e)for(let U=0,j=P.length,N=j-1;U<j;N=U++){const Y=P[N],H=P[U];if(tx(B,O,Y,H))return 0;l=Math.min(l,iB(B,O,Y,H,t))}}return l}function o7(n,e,t,r,i,s){if(!s)return;const l=rB(PE(r,s),i,t);l<e&&n.push([l,s,[0,0]])}function U_(n,e,t,r,i,s,l){if(!s||!l)return;const o=rB(PE(r,s),PE(i,l),t);o<e&&n.push([o,s,l])}function Wb(n,e,t,r,i=1/0){let s=Math.min(r.distance(n[0],t[0][0]),i);if(s===0)return s;const l=new fF([[0,[0,n.length-1],[0,0]]],pF),o=KE(t);for(;l.length>0;){const f=l.pop();if(f[0]>=s)continue;const y=f[1],x=e?kE:IE;if(Nb(y)<=x){if(!Lm(y,n.length))return NaN;if(e){const B=nq(n,y,t,r);if(isNaN(B)||B===0)return B;s=Math.min(s,B)}else for(let B=y[0];B<=y[1];++B){const O=tq(n[B],t,r);if(s=Math.min(s,O),s===0)return 0}}else{const B=TE(y,e);o7(l,s,r,n,o,B[0]),o7(l,s,r,n,o,B[1])}}return s}function Gb(n,e,t,r,i,s=1/0){let l=Math.min(s,i.distance(n[0],t[0]));if(l===0)return l;const o=new fF([[0,[0,n.length-1],[0,t.length-1]]],pF);for(;o.length>0;){const f=o.pop();if(f[0]>=l)continue;const y=f[1],x=f[2],B=e?kE:IE,O=r?kE:IE;if(Nb(y)<=B&&Nb(x)<=O){if(!Lm(y,n.length)&&Lm(x,t.length))return NaN;let P;if(e&&r)P=JY(n,y,t,x,i),l=Math.min(l,P);else if(e&&!r){const U=n.slice(y[0],y[1]+1);for(let j=x[0];j<=x[1];++j)if(P=xg(t[j],U,i),l=Math.min(l,P),l===0)return l}else if(!e&&r){const U=t.slice(x[0],x[1]+1);for(let j=y[0];j<=y[1];++j)if(P=xg(n[j],U,i),l=Math.min(l,P),l===0)return l}else P=eq(n,y,t,x,i),l=Math.min(l,P)}else{const P=TE(y,e),U=TE(x,r);U_(o,l,i,n,t,P[0],U[0]),U_(o,l,i,n,t,P[0],U[1]),U_(o,l,i,n,t,P[1],U[0]),U_(o,l,i,n,t,P[1],U[1])}}return l}function iq(n,e){const t=n.geometry(),r=t.flat().map(l=>eB([l.x,l.y],n.canonical));if(t.length===0)return NaN;const i=new nB(r[0][1]);let s=1/0;for(const l of e){switch(l.type){case"Point":s=Math.min(s,Gb(r,!1,[l.coordinates],!1,i,s));break;case"LineString":s=Math.min(s,Gb(r,!1,l.coordinates,!0,i,s));break;case"Polygon":s=Math.min(s,Wb(r,!1,l.coordinates,i,s));break}if(s===0)return s}return s}function oq(n,e){const t=n.geometry(),r=t.flat().map(l=>eB([l.x,l.y],n.canonical));if(t.length===0)return NaN;const i=new nB(r[0][1]);let s=1/0;for(const l of e){switch(l.type){case"Point":s=Math.min(s,Gb(r,!0,[l.coordinates],!1,i,s));break;case"LineString":s=Math.min(s,Gb(r,!0,l.coordinates,!0,i,s));break;case"Polygon":s=Math.min(s,Wb(r,!0,l.coordinates,i,s));break}if(s===0)return s}return s}function sq(n,e){const t=n.geometry();if(t.length===0||t[0].length===0)return NaN;const r=HY(t).map(l=>l.map(o=>o.map(f=>eB([f.x,f.y],n.canonical)))),i=new nB(r[0][0][0][1]);let s=1/0;for(const l of e)for(const o of r){switch(l.type){case"Point":s=Math.min(s,Wb([l.coordinates],!1,o,i,s));break;case"LineString":s=Math.min(s,Wb(l.coordinates,!0,o,i,s));break;case"Polygon":s=Math.min(s,rq(o,l.coordinates,i,s));break}if(s===0)return s}return s}function F3(n){return n.type==="MultiPolygon"?n.coordinates.map(e=>({type:"Polygon",coordinates:e})):n.type==="MultiLineString"?n.coordinates.map(e=>({type:"LineString",coordinates:e})):n.type==="MultiPoint"?n.coordinates.map(e=>({type:"Point",coordinates:e})):[n]}class Tg{constructor(e,t){this.type=kr,this.geojson=e,this.geometries=t}static parse(e,t){if(e.length!==2)return t.error(`'distance' expression requires exactly one argument, but found ${e.length-1} instead.`);if(nC(e[1])){const r=e[1];if(r.type==="FeatureCollection")return new Tg(r,r.features.map(i=>F3(i.geometry)).flat());if(r.type==="Feature")return new Tg(r,F3(r.geometry));if("type"in r&&"coordinates"in r)return new Tg(r,F3(r))}return t.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return iq(e,this.geometries);if(e.geometryType()==="LineString")return oq(e,this.geometries);if(e.geometryType()==="Polygon")return sq(e,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const oB={"==":IY,"!=":kY,">":PY,"<":TY,">=":RY,"<=":KY,array:lp,at:Y6,boolean:lp,case:$6,coalesce:rC,collator:ex,format:Z6,image:X6,in:q6,"index-of":zb,interpolate:kf,"interpolate-hcl":kf,"interpolate-lab":kf,length:J6,let:H2,literal:by,match:V6,number:lp,"number-format":H6,object:lp,slice:jb,step:J2,string:lp,"to-boolean":O0,"to-color":O0,"to-number":O0,"to-string":O0,var:Z2,within:kg,distance:Tg};class dp{constructor(e,t,r,i){this.name=e,this.type=t,this._evaluate=r,this.args=i}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}static parse(e,t){const r=e[0],i=dp.definitions[r];if(!i)return t.error(`Unknown expression "${r}". If you wanted a literal array, use ["literal", [...]].`,0);const s=Array.isArray(i)?i[0]:i.type,l=Array.isArray(i)?[[i[1],i[2]]]:i.overloads,o=l.filter(([y])=>!Array.isArray(y)||y.length===e.length-1);let f=null;for(const[y,x]of o){f=new $2(t.registry,Qb,t.path,null,t.scope);const B=[];let O=!1;for(let P=1;P<e.length;P++){const U=e[P],j=Array.isArray(y)?y[P-1]:y.type,N=f.parse(U,1+B.length,j);if(!N){O=!0;break}B.push(N)}if(!O){if(Array.isArray(y)&&y.length!==B.length){f.error(`Expected ${y.length} arguments, but found ${B.length} instead.`);continue}for(let P=0;P<B.length;P++){const U=Array.isArray(y)?y[P]:y.type,j=B[P];f.concat(P+1).checkSubtype(U,j.type)}if(f.errors.length===0)return new dp(r,s,x,B)}}if(o.length===1)t.errors.push(...f.errors);else{const x=(o.length?o:l).map(([O])=>lq(O)).join(" | "),B=[];for(let O=1;O<e.length;O++){const P=t.parse(e[O],1+B.length);if(!P)return null;B.push(Zl(P.type))}t.error(`Expected arguments of type ${x}, but found (${B.join(", ")}) instead.`)}return null}static register(e,t){dp.definitions=t;for(const r in t)e[r]=dp}}function s7(n,[e,t,r,i]){e=e.evaluate(n),t=t.evaluate(n),r=r.evaluate(n);const s=i?i.evaluate(n):1,l=aF(e,t,r,s);if(l)throw new lA(l);return new wl(e/255,t/255,r/255,s,!1)}function a7(n,e){return n in e}function L3(n,e){const t=e[n];return typeof t>"u"?null:t}function aq(n,e,t,r){for(;t<=r;){const i=t+r>>1;if(e[i]===n)return!0;e[i]>n?r=i-1:t=i+1}return!1}function lg(n){return{type:n}}dp.register(oB,{error:[eY,[ns],(n,[e])=>{throw new lA(e.evaluate(n))}],typeof:[ns,[Vo],(n,[e])=>Zl(HA(e.evaluate(n)))],"to-rgba":[Qh(kr,4),[$p],(n,[e])=>{const[t,r,i,s]=e.evaluate(n).rgb;return[t*255,r*255,i*255,s]}],rgb:[$p,[kr,kr,kr],s7],rgba:[$p,[kr,kr,kr,kr],s7],has:{type:qo,overloads:[[[ns],(n,[e])=>a7(e.evaluate(n),n.properties())],[[ns,uy],(n,[e,t])=>a7(e.evaluate(n),t.evaluate(n))]]},get:{type:Vo,overloads:[[[ns],(n,[e])=>L3(e.evaluate(n),n.properties())],[[ns,uy],(n,[e,t])=>L3(e.evaluate(n),t.evaluate(n))]]},"feature-state":[Vo,[ns],(n,[e])=>L3(e.evaluate(n),n.featureState||{})],properties:[uy,[],n=>n.properties()],"geometry-type":[ns,[],n=>n.geometryType()],id:[Vo,[],n=>n.id()],zoom:[kr,[],n=>n.globals.zoom],"heatmap-density":[kr,[],n=>n.globals.heatmapDensity||0],"line-progress":[kr,[],n=>n.globals.lineProgress||0],accumulated:[Vo,[],n=>n.globals.accumulated===void 0?null:n.globals.accumulated],"+":[kr,lg(kr),(n,e)=>{let t=0;for(const r of e)t+=r.evaluate(n);return t}],"*":[kr,lg(kr),(n,e)=>{let t=1;for(const r of e)t*=r.evaluate(n);return t}],"-":{type:kr,overloads:[[[kr,kr],(n,[e,t])=>e.evaluate(n)-t.evaluate(n)],[[kr],(n,[e])=>-e.evaluate(n)]]},"/":[kr,[kr,kr],(n,[e,t])=>e.evaluate(n)/t.evaluate(n)],"%":[kr,[kr,kr],(n,[e,t])=>e.evaluate(n)%t.evaluate(n)],ln2:[kr,[],()=>Math.LN2],pi:[kr,[],()=>Math.PI],e:[kr,[],()=>Math.E],"^":[kr,[kr,kr],(n,[e,t])=>Math.pow(e.evaluate(n),t.evaluate(n))],sqrt:[kr,[kr],(n,[e])=>Math.sqrt(e.evaluate(n))],log10:[kr,[kr],(n,[e])=>Math.log(e.evaluate(n))/Math.LN10],ln:[kr,[kr],(n,[e])=>Math.log(e.evaluate(n))],log2:[kr,[kr],(n,[e])=>Math.log(e.evaluate(n))/Math.LN2],sin:[kr,[kr],(n,[e])=>Math.sin(e.evaluate(n))],cos:[kr,[kr],(n,[e])=>Math.cos(e.evaluate(n))],tan:[kr,[kr],(n,[e])=>Math.tan(e.evaluate(n))],asin:[kr,[kr],(n,[e])=>Math.asin(e.evaluate(n))],acos:[kr,[kr],(n,[e])=>Math.acos(e.evaluate(n))],atan:[kr,[kr],(n,[e])=>Math.atan(e.evaluate(n))],min:[kr,lg(kr),(n,e)=>Math.min(...e.map(t=>t.evaluate(n)))],max:[kr,lg(kr),(n,e)=>Math.max(...e.map(t=>t.evaluate(n)))],abs:[kr,[kr],(n,[e])=>Math.abs(e.evaluate(n))],round:[kr,[kr],(n,[e])=>{const t=e.evaluate(n);return t<0?-Math.round(-t):Math.round(t)}],floor:[kr,[kr],(n,[e])=>Math.floor(e.evaluate(n))],ceil:[kr,[kr],(n,[e])=>Math.ceil(e.evaluate(n))],"filter-==":[qo,[ns,Vo],(n,[e,t])=>n.properties()[e.value]===t.value],"filter-id-==":[qo,[Vo],(n,[e])=>n.id()===e.value],"filter-type-==":[qo,[ns],(n,[e])=>n.geometryType()===e.value],"filter-<":[qo,[ns,Vo],(n,[e,t])=>{const r=n.properties()[e.value],i=t.value;return typeof r==typeof i&&r<i}],"filter-id-<":[qo,[Vo],(n,[e])=>{const t=n.id(),r=e.value;return typeof t==typeof r&&t<r}],"filter->":[qo,[ns,Vo],(n,[e,t])=>{const r=n.properties()[e.value],i=t.value;return typeof r==typeof i&&r>i}],"filter-id->":[qo,[Vo],(n,[e])=>{const t=n.id(),r=e.value;return typeof t==typeof r&&t>r}],"filter-<=":[qo,[ns,Vo],(n,[e,t])=>{const r=n.properties()[e.value],i=t.value;return typeof r==typeof i&&r<=i}],"filter-id-<=":[qo,[Vo],(n,[e])=>{const t=n.id(),r=e.value;return typeof t==typeof r&&t<=r}],"filter->=":[qo,[ns,Vo],(n,[e,t])=>{const r=n.properties()[e.value],i=t.value;return typeof r==typeof i&&r>=i}],"filter-id->=":[qo,[Vo],(n,[e])=>{const t=n.id(),r=e.value;return typeof t==typeof r&&t>=r}],"filter-has":[qo,[Vo],(n,[e])=>e.value in n.properties()],"filter-has-id":[qo,[],n=>n.id()!==null&&n.id()!==void 0],"filter-type-in":[qo,[Qh(ns)],(n,[e])=>e.value.indexOf(n.geometryType())>=0],"filter-id-in":[qo,[Qh(Vo)],(n,[e])=>e.value.indexOf(n.id())>=0],"filter-in-small":[qo,[ns,Qh(Vo)],(n,[e,t])=>t.value.indexOf(n.properties()[e.value])>=0],"filter-in-large":[qo,[ns,Qh(Vo)],(n,[e,t])=>aq(n.properties()[e.value],t.value,0,t.value.length-1)],all:{type:qo,overloads:[[[qo,qo],(n,[e,t])=>e.evaluate(n)&&t.evaluate(n)],[lg(qo),(n,e)=>{for(const t of e)if(!t.evaluate(n))return!1;return!0}]]},any:{type:qo,overloads:[[[qo,qo],(n,[e,t])=>e.evaluate(n)||t.evaluate(n)],[lg(qo),(n,e)=>{for(const t of e)if(t.evaluate(n))return!0;return!1}]]},"!":[qo,[qo],(n,[e])=>!e.evaluate(n)],"is-supported-script":[qo,[ns],(n,[e])=>{const t=n.globals&&n.globals.isSupportedScript;return t?t(e.evaluate(n)):!0}],upcase:[ns,[ns],(n,[e])=>e.evaluate(n).toUpperCase()],downcase:[ns,[ns],(n,[e])=>e.evaluate(n).toLowerCase()],concat:[ns,lg(Vo),(n,e)=>e.map(t=>Nv(t.evaluate(n))).join("")],"resolved-locale":[ns,[Q2],(n,[e])=>e.evaluate(n).resolvedLocale()]});function lq(n){return Array.isArray(n)?`(${n.map(Zl).join(", ")})`:`(${Zl(n.type)}...)`}function Qb(n){if(n instanceof Z2)return Qb(n.boundExpression);if(n instanceof dp&&n.name==="error")return!1;if(n instanceof ex)return!1;if(n instanceof kg)return!1;if(n instanceof Tg)return!1;const e=n instanceof O0||n instanceof lp;let t=!0;return n.eachChild(r=>{e?t=t&&Qb(r):t=t&&r instanceof by}),t?nx(n)&&rx(n,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"]):!1}function nx(n){if(n instanceof dp){if(n.name==="get"&&n.args.length===1)return!1;if(n.name==="feature-state")return!1;if(n.name==="has"&&n.args.length===1)return!1;if(n.name==="properties"||n.name==="geometry-type"||n.name==="id")return!1;if(/^filter-/.test(n.name))return!1}if(n instanceof kg||n instanceof Tg)return!1;let e=!0;return n.eachChild(t=>{e&&!nx(t)&&(e=!1)}),e}function oC(n){if(n instanceof dp&&n.name==="feature-state")return!1;let e=!0;return n.eachChild(t=>{e&&!oC(t)&&(e=!1)}),e}function rx(n,e){if(n instanceof dp&&e.indexOf(n.name)>=0)return!1;let t=!0;return n.eachChild(r=>{t&&!rx(r,e)&&(t=!1)}),t}function RE(n){return{result:"success",value:n}}function V1(n){return{result:"error",value:n}}function Yb(n){return n["property-type"]==="data-driven"||n["property-type"]==="cross-faded-data-driven"}function mF(n){return!!n.expression&&n.expression.parameters.indexOf("zoom")>-1}function sB(n){return!!n.expression&&n.expression.interpolated}function Ds(n){return n instanceof Number?"number":n instanceof String?"string":n instanceof Boolean?"boolean":Array.isArray(n)?"array":n===null?"null":typeof n}function Fy(n){return typeof n=="object"&&n!==null&&!Array.isArray(n)}function uq(n){return n}function aB(n,e){const t=e.type==="color",r=n.stops&&typeof n.stops[0][0]=="object",i=r||n.property!==void 0,s=r||!i,l=n.type||(sB(e)?"exponential":"interval");if(t||e.type==="padding"){const x=t?wl.parse:Ud.parse;n=_y({},n),n.stops&&(n.stops=n.stops.map(B=>[B[0],x(B[1])])),n.default?n.default=x(n.default):n.default=x(e.default)}if(n.colorSpace&&!AY(n.colorSpace))throw new Error(`Unknown color space: "${n.colorSpace}"`);let o,f,y;if(l==="exponential")o=l7;else if(l==="interval")o=cq;else if(l==="categorical"){o=Aq,f=Object.create(null);for(const x of n.stops)f[x[0]]=x[1];y=typeof n.stops[0][0]}else if(l==="identity")o=dq;else throw new Error(`Unknown function type "${l}"`);if(r){const x={},B=[];for(let U=0;U<n.stops.length;U++){const j=n.stops[U],N=j[0].zoom;x[N]===void 0&&(x[N]={zoom:N,type:n.type,property:n.property,default:n.default,stops:[]},B.push(N)),x[N].stops.push([j[0].value,j[1]])}const O=[];for(const U of B)O.push([x[U].zoom,aB(x[U],e)]);const P={name:"linear"};return{kind:"composite",interpolationType:P,interpolationFactor:kf.interpolationFactor.bind(void 0,P),zoomStops:O.map(U=>U[0]),evaluate({zoom:U},j){return l7({stops:O,base:n.base},e,U).evaluate(U,j)}}}else if(s){const x=l==="exponential"?{name:"exponential",base:n.base!==void 0?n.base:1}:null;return{kind:"camera",interpolationType:x,interpolationFactor:kf.interpolationFactor.bind(void 0,x),zoomStops:n.stops.map(B=>B[0]),evaluate:({zoom:B})=>o(n,e,B,f,y)}}else return{kind:"source",evaluate(x,B){const O=B&&B.properties?B.properties[n.property]:void 0;return O===void 0?KC(n.default,e.default):o(n,e,O,f,y)}}}function KC(n,e,t){if(n!==void 0)return n;if(e!==void 0)return e;if(t!==void 0)return t}function Aq(n,e,t,r,i){const s=typeof t===i?r[t]:void 0;return KC(s,n.default,e.default)}function cq(n,e,t){if(Ds(t)!=="number")return KC(n.default,e.default);const r=n.stops.length;if(r===1||t<=n.stops[0][0])return n.stops[0][1];if(t>=n.stops[r-1][0])return n.stops[r-1][1];const i=X2(n.stops.map(s=>s[0]),t);return n.stops[i][1]}function l7(n,e,t){const r=n.base!==void 0?n.base:1;if(Ds(t)!=="number")return KC(n.default,e.default);const i=n.stops.length;if(i===1||t<=n.stops[0][0])return n.stops[0][1];if(t>=n.stops[i-1][0])return n.stops[i-1][1];const s=X2(n.stops.map(x=>x[0]),t),l=hq(t,r,n.stops[s][0],n.stops[s+1][0]),o=n.stops[s][1],f=n.stops[s+1][1],y=yY[e.type]||uq;return typeof o.evaluate=="function"?{evaluate(...x){const B=o.evaluate.apply(void 0,x),O=f.evaluate.apply(void 0,x);if(!(B===void 0||O===void 0))return y(B,O,l,n.colorSpace)}}:y(o,f,l,n.colorSpace)}function dq(n,e,t){switch(e.type){case"color":t=wl.parse(t);break;case"formatted":t=Hp.fromString(t.toString());break;case"resolvedImage":t=Nm.fromString(t.toString());break;case"padding":t=Ud.parse(t);break;default:Ds(t)!==e.type&&(e.type!=="enum"||!e.values[t])&&(t=void 0)}return KC(t,n.default,e.default)}function hq(n,e,t,r){const i=r-t,s=n-t;return i===0?0:e===1?s/i:(Math.pow(e,s)-1)/(Math.pow(e,i)-1)}class gF{constructor(e,t){this.expression=e,this._warningHistory={},this._evaluator=new lF,this._defaultValue=t?gq(t):null,this._enumValues=t&&t.type==="enum"?t.values:null}evaluateWithoutErrorHandling(e,t,r,i,s,l){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=r,this._evaluator.canonical=i,this._evaluator.availableImages=s||null,this._evaluator.formattedSection=l,this.expression.evaluate(this._evaluator)}evaluate(e,t,r,i,s,l){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=r||null,this._evaluator.canonical=i,this._evaluator.availableImages=s||null,this._evaluator.formattedSection=l||null;try{const o=this.expression.evaluate(this._evaluator);if(o==null||typeof o=="number"&&o!==o)return this._defaultValue;if(this._enumValues&&!(o in this._enumValues))throw new lA(`Expected value to be one of ${Object.keys(this._enumValues).map(f=>JSON.stringify(f)).join(", ")}, but found ${JSON.stringify(o)} instead.`);return o}catch(o){return this._warningHistory[o.message]||(this._warningHistory[o.message]=!0,typeof console<"u"&&console.warn(o.message)),this._defaultValue}}}function Ly(n){return Array.isArray(n)&&n.length>0&&typeof n[0]=="string"&&n[0]in oB}function ix(n,e){const t=new $2(oB,Qb,[],e?mq(e):void 0),r=t.parse(n,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return r?RE(new gF(r,e)):V1(t.errors)}class DE{constructor(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent=e!=="constant"&&!oC(t.expression)}evaluateWithoutErrorHandling(e,t,r,i,s,l){return this._styleExpression.evaluateWithoutErrorHandling(e,t,r,i,s,l)}evaluate(e,t,r,i,s,l){return this._styleExpression.evaluate(e,t,r,i,s,l)}}class FE{constructor(e,t,r,i){this.kind=e,this.zoomStops=r,this._styleExpression=t,this.isStateDependent=e!=="camera"&&!oC(t.expression),this.interpolationType=i}evaluateWithoutErrorHandling(e,t,r,i,s,l){return this._styleExpression.evaluateWithoutErrorHandling(e,t,r,i,s,l)}evaluate(e,t,r,i,s,l){return this._styleExpression.evaluate(e,t,r,i,s,l)}interpolationFactor(e,t,r){return this.interpolationType?kf.interpolationFactor(this.interpolationType,e,t,r):0}}function fq(n){return n._styleExpression!==void 0}function ox(n,e){const t=ix(n,e);if(t.result==="error")return t;const r=t.value.expression,i=nx(r);if(!i&&!Yb(e))return V1([new Wp("","data expressions not supported")]);const s=rx(r,["zoom"]);if(!s&&!mF(e))return V1([new Wp("","zoom expressions not supported")]);const l=bb(r);if(!l&&!s)return V1([new Wp("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(l instanceof Wp)return V1([l]);if(l instanceof kf&&!sB(e))return V1([new Wp("",'"interpolate" expressions cannot be used with this property')]);if(!l)return RE(i?new DE("constant",t.value):new DE("source",t.value));const o=l instanceof kf?l.interpolation:void 0;return RE(i?new FE("camera",t.value,l.labels,o):new FE("composite",t.value,l.labels,o))}class sx{constructor(e,t){this._parameters=e,this._specification=t,_y(this,aB(this._parameters,this._specification))}static deserialize(e){return new sx(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function pq(n,e){if(Fy(n))return new sx(n,e);if(Ly(n)){const t=ox(n,e);if(t.result==="error")throw new Error(t.value.map(r=>`${r.key}: ${r.message}`).join(", "));return t.value}else{let t=n;return e.type==="color"&&typeof n=="string"?t=wl.parse(n):e.type==="padding"&&(typeof n=="number"||Array.isArray(n))?t=Ud.parse(n):e.type==="variableAnchorOffsetCollection"&&Array.isArray(n)?t=If.parse(n):e.type==="projectionDefinition"&&typeof n=="string"&&(t=Sf.parse(n)),{kind:"constant",evaluate:()=>t}}}function bb(n){let e=null;if(n instanceof H2)e=bb(n.result);else if(n instanceof rC){for(const t of n.args)if(e=bb(t),e)break}else(n instanceof J2||n instanceof kf)&&n.input instanceof dp&&n.input.name==="zoom"&&(e=n);return e instanceof Wp||n.eachChild(t=>{const r=bb(t);r instanceof Wp?e=r:!e&&r?e=new Wp("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&r&&e!==r&&(e=new Wp("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}function mq(n){const e={color:$p,string:ns,number:kr,enum:ns,boolean:qo,formatted:Y2,padding:q2,projectionDefinition:G2,resolvedImage:TC,variableAnchorOffsetCollection:V2};return n.type==="array"?Qh(e[n.value]||Vo,n.length):e[n.type]}function gq(n){return n.type==="color"&&Fy(n.default)?new wl(0,0,0,0):n.type==="color"?wl.parse(n.default)||null:n.type==="padding"?Ud.parse(n.default)||null:n.type==="variableAnchorOffsetCollection"?If.parse(n.default)||null:n.type==="projectionDefinition"?Sf.parse(n.default)||null:n.default===void 0?null:n.default}function RC(n){if(n===!0||n===!1)return!0;if(!Array.isArray(n)||n.length===0)return!1;switch(n[0]){case"has":return n.length>=2&&n[1]!=="$id"&&n[1]!=="$type";case"in":return n.length>=3&&(typeof n[1]!="string"||Array.isArray(n[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return n.length!==3||Array.isArray(n[1])||Array.isArray(n[2]);case"any":case"all":for(const e of n.slice(1))if(!RC(e)&&typeof e!="boolean")return!1;return!0;default:return!0}}const yq={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function vq(n){if(n==null)return{filter:()=>!0,needGeometry:!1};RC(n)||(n=qb(n));const e=ix(n,yq);if(e.result==="error")throw new Error(e.value.map(t=>`${t.key}: ${t.message}`).join(", "));{const t=yF(n);return{filter:(r,i,s)=>e.value.evaluate(r,i,{},s),needGeometry:t}}}function Cq(n,e){return n<e?-1:n>e?1:0}function yF(n){if(!Array.isArray(n))return!1;if(n[0]==="within"||n[0]==="distance")return!0;for(let e=1;e<n.length;e++)if(yF(n[e]))return!0;return!1}function qb(n){if(!n)return!0;const e=n[0];return n.length<=1?e!=="any":e==="=="?U3(n[1],n[2],"=="):e==="!="?z_(U3(n[1],n[2],"==")):e==="<"||e===">"||e==="<="||e===">="?U3(n[1],n[2],e):e==="any"?_q(n.slice(1)):e==="all"?["all"].concat(n.slice(1).map(qb)):e==="none"?["all"].concat(n.slice(1).map(qb).map(z_)):e==="in"?u7(n[1],n.slice(2)):e==="!in"?z_(u7(n[1],n.slice(2))):e==="has"?A7(n[1]):e==="!has"?z_(A7(n[1])):!0}function U3(n,e,t){switch(n){case"$type":return[`filter-type-${t}`,e];case"$id":return[`filter-id-${t}`,e];default:return[`filter-${t}`,n,e]}}function _q(n){return["any"].concat(n.map(qb))}function u7(n,e){if(e.length===0)return!1;switch(n){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(t=>typeof t!=typeof e[0])?["filter-in-large",n,["literal",e.sort(Cq)]]:["filter-in-small",n,["literal",e]]}}function A7(n){switch(n){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",n]}}function z_(n){return["!",n]}function Wv(n,e={}){if(RC(n))return n;if(!n)return!0;const t=n,r=t[0];if(n.length<=1)return r!=="any";switch(r){case"==":case"!=":case"<":case">":case"<=":case">=":{const[,i,s]=n;return xq(i,s,r,e)}case"any":{const[,...i]=t;return["any",...i.map(l=>{const o={},f=Wv(l,o),y=bq(o);return y===!0?f:["case",y,f,!1]})]}case"all":{const[,...i]=t,s=i.map(l=>Wv(l,e));return s.length>1?["all",...s]:s[0]}case"none":{const[,...i]=t;return["!",Wv(["any",...i],{})]}case"in":{const[,i,...s]=t;return c7(i,s)}case"!in":{const[,i,...s]=t;return c7(i,s,!0)}case"has":return d7(t[1]);case"!has":return["!",d7(t[1])];default:return!0}}function bq(n){const e=[];for(const t in n){const r=t==="$id"?["id"]:["get",t];e.push(["==",["typeof",r],n[t]])}return e.length===0?!0:e.length===1?e[0]:["all",...e]}function xq(n,e,t,r){let i;if(n==="$type")return[t,["geometry-type"],e];if(n==="$id"?i=["id"]:i=["get",n],r&&e!==null){const s=typeof e;r[n]=s}return t==="=="&&n!=="$id"&&e===null?["all",["has",n],["==",i,null]]:t==="!="&&n!=="$id"&&e===null?["any",["!",["has",n]],["!=",i,null]]:[t,i,e]}function c7(n,e,t=!1){if(e.length===0)return t;let r;n==="$type"?r=["geometry-type"]:n==="$id"?r=["id"]:r=["get",n];let i=!0;const s=typeof e[0];for(const l of e)if(typeof l!==s){i=!1;break}if(i&&(s==="string"||s==="number")){const l=e.sort().filter((o,f)=>f===0||e[f-1]!==o);return["match",r,l,!t,t]}return t?["all",...e.map(l=>["!=",r,l])]:["any",...e.map(l=>["==",r,l])]}function d7(n){return n==="$type"?!0:n==="$id"?["!=",["id"],null]:["has",n]}function sC(n){return typeof n=="object"?["literal",n]:n}function lB(n,e){let t=n.stops;if(!t)return Mq(n,e);const r=t&&typeof t[0][0]=="object",i=r||n.property!==void 0,s=r||!i;return t=t.map(l=>!i&&e.tokens&&typeof l[1]=="string"?[l[0],vF(l[1])]:[l[0],sC(l[1])]),r?wq(n,e,t):s?Eq(n,e,t):LE(n,e,t)}function Mq(n,e){const t=["get",n.property];if(n.default===void 0)return e.type==="string"?["string",t]:t;if(e.type==="enum")return["match",t,Object.keys(e.values),t,n.default];{const r=[e.type==="color"?"to-color":e.type,t,sC(n.default)];return e.type==="array"&&r.splice(1,0,e.value,e.length||null),r}}function uB(n){switch(n.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function wq(n,e,t){const r={},i={},s=[];for(let o=0;o<t.length;o++){const f=t[o],y=f[0].zoom;r[y]===void 0&&(r[y]={zoom:y,type:n.type,property:n.property,default:n.default},i[y]=[],s.push(y)),i[y].push([f[0].value,f[1]])}if(cB({},e)==="exponential"){const o=[uB(n),["linear"],["zoom"]];for(const f of s){const y=LE(r[f],e,i[f]);cy(o,f,y,!1)}return o}else{const o=["step",["zoom"]];for(const f of s){const y=LE(r[f],e,i[f]);cy(o,f,y,!0)}return AB(o),o}}function Sq(n,e){if(n!==void 0)return n;if(e!==void 0)return e}function h7(n,e){const t=sC(Sq(n.default,e.default));return t===void 0&&e.type==="resolvedImage"?"":t}function LE(n,e,t){const r=cB(n,e),i=["get",n.property];if(r==="categorical"&&typeof t[0][0]=="boolean"){const s=["case"];for(const l of t)s.push(["==",i,l[0]],l[1]);return s.push(h7(n,e)),s}else if(r==="categorical"){const s=["match",i];for(const l of t)cy(s,l[0],l[1],!1);return s.push(h7(n,e)),s}else if(r==="interval"){const s=["step",["number",i]];for(const l of t)cy(s,l[0],l[1],!0);return AB(s),n.default===void 0?s:["case",["==",["typeof",i],"number"],s,sC(n.default)]}else if(r==="exponential"){const s=n.base!==void 0?n.base:1,l=[uB(n),s===1?["linear"]:["exponential",s],["number",i]];for(const o of t)cy(l,o[0],o[1],!1);return n.default===void 0?l:["case",["==",["typeof",i],"number"],l,sC(n.default)]}else throw new Error(`Unknown property function type ${r}`)}function Eq(n,e,t,r=["zoom"]){const i=cB(n,e);let s,l=!1;if(i==="interval")s=["step",r],l=!0;else if(i==="exponential"){const o=n.base!==void 0?n.base:1;s=[uB(n),o===1?["linear"]:["exponential",o],r]}else throw new Error(`Unknown zoom function type "${i}"`);for(const o of t)cy(s,o[0],o[1],l);return AB(s),s}function AB(n){n[0]==="step"&&n.length===3&&(n.push(0),n.push(n[3]))}function cy(n,e,t,r){n.length>3&&e===n[n.length-2]||(r&&n.length===2||n.push(e),n.push(t))}function cB(n,e){return n.type?n.type:e.expression.interpolated?"exponential":"interval"}function vF(n){const e=["concat"],t=/{([^{}]+)}/g;let r=0;for(let i=t.exec(n);i!==null;i=t.exec(n)){const s=n.slice(r,t.lastIndex-i[0].length);r=t.lastIndex,s.length>0&&e.push(s),e.push(["get",i[1]])}if(e.length===1)return n;if(r<n.length)e.push(n.slice(r));else if(e.length===2)return["to-string",e[1]];return e}function Bq(n){for(let e=0;e<Ms.layout.length;e++)for(const t in Ms[Ms.layout[e]])if(t===n)return Ms[Ms.layout[e]][t];for(let e=0;e<Ms.paint.length;e++)for(const t in Ms[Ms.paint[e]])if(t===n)return Ms[Ms.paint[e]][t];return null}function Oq(n,e){for(const t in n.sources)e(n.sources[t])}function Gv(n,e){for(const t of n.layers)e(t)}function dB(n,e,t){function r(i,s){const l=i[s];l&&Object.keys(l).forEach(o=>{t({path:[i.id,s,o],key:o,value:l[o],reference:Bq(o),set(f){l[o]=f}})})}Gv(n,i=>{e.paint&&r(i,"paint"),e.layout&&r(i,"layout")})}function CF(n){const e=n.key,t=n.value;return t?[new Mr(e,t,"constants have been deprecated as of v8")]:[]}function Ru(n){return n instanceof Number||n instanceof String||n instanceof Boolean?n.valueOf():n}function Fg(n){if(Array.isArray(n))return n.map(Fg);if(n instanceof Object&&!(n instanceof Number||n instanceof String||n instanceof Boolean)){const e={};for(const t in n)e[t]=Fg(n[t]);return e}return Ru(n)}function Ef(n){const e=n.key,t=n.value,r=n.valueSpec||{},i=n.objectElementValidators||{},s=n.style,l=n.styleSpec,o=n.validateSpec;let f=[];const y=Ds(t);if(y!=="object")return[new Mr(e,t,`object expected, ${y} found`)];for(const x in t){const B=x.split(".")[0],O=r[B]||r["*"];let P;if(i[B])P=i[B];else if(r[B])P=o;else if(i["*"])P=i["*"];else if(r["*"])P=o;else{f.push(new Mr(e,t[x],`unknown property "${x}"`));continue}f=f.concat(P({key:(e&&`${e}.`)+x,value:t[x],valueSpec:O,style:s,styleSpec:l,object:t,objectKey:x,validateSpec:o},t))}for(const x in r)i[x]||r[x].required&&r[x].default===void 0&&t[x]===void 0&&f.push(new Mr(e,t,`missing required property "${x}"`));return f}function hB(n){const e=n.value,t=n.valueSpec,r=n.validateSpec,i=n.style,s=n.styleSpec,l=n.key,o=n.arrayElementValidator||r;if(Ds(e)!=="array")return[new Mr(l,e,`array expected, ${Ds(e)} found`)];if(t.length&&e.length!==t.length)return[new Mr(l,e,`array length ${t.length} expected, length ${e.length} found`)];if(t["min-length"]&&e.length<t["min-length"])return[new Mr(l,e,`array length at least ${t["min-length"]} expected, length ${e.length} found`)];let f={type:t.value,values:t.values};s.$version<7&&(f.function=t.function),Ds(t.value)==="object"&&(f=t.value);let y=[];for(let x=0;x<e.length;x++)y=y.concat(o({array:e,arrayIndex:x,value:e[x],valueSpec:f,validateSpec:n.validateSpec,style:i,styleSpec:s,key:`${l}[${x}]`}));return y}function fB(n){const e=n.key,t=n.value,r=n.valueSpec;let i=Ds(t);return i==="number"&&t!==t&&(i="NaN"),i!=="number"?[new Mr(e,t,`number expected, ${i} found`)]:"minimum"in r&&t<r.minimum?[new Mr(e,t,`${t} is less than the minimum value ${r.minimum}`)]:"maximum"in r&&t>r.maximum?[new Mr(e,t,`${t} is greater than the maximum value ${r.maximum}`)]:[]}function _F(n){const e=n.valueSpec,t=Ru(n.value.type);let r,i={},s,l;const o=t!=="categorical"&&n.value.property===void 0,f=!o,y=Ds(n.value.stops)==="array"&&Ds(n.value.stops[0])==="array"&&Ds(n.value.stops[0][0])==="object",x=Ef({key:n.key,value:n.value,valueSpec:n.styleSpec.function,validateSpec:n.validateSpec,style:n.style,styleSpec:n.styleSpec,objectElementValidators:{stops:B,default:U}});return t==="identity"&&o&&x.push(new Mr(n.key,n.value,'missing required property "property"')),t!=="identity"&&!n.value.stops&&x.push(new Mr(n.key,n.value,'missing required property "stops"')),t==="exponential"&&n.valueSpec.expression&&!sB(n.valueSpec)&&x.push(new Mr(n.key,n.value,"exponential functions not supported")),n.styleSpec.$version>=8&&(f&&!Yb(n.valueSpec)?x.push(new Mr(n.key,n.value,"property functions not supported")):o&&!mF(n.valueSpec)&&x.push(new Mr(n.key,n.value,"zoom functions not supported"))),(t==="categorical"||y)&&n.value.property===void 0&&x.push(new Mr(n.key,n.value,'"property" property is required')),x;function B(j){if(t==="identity")return[new Mr(j.key,j.value,'identity function may not have a "stops" property')];let N=[];const Y=j.value;return N=N.concat(hB({key:j.key,value:Y,valueSpec:j.valueSpec,validateSpec:j.validateSpec,style:j.style,styleSpec:j.styleSpec,arrayElementValidator:O})),Ds(Y)==="array"&&Y.length===0&&N.push(new Mr(j.key,Y,"array must have at least one stop")),N}function O(j){let N=[];const Y=j.value,H=j.key;if(Ds(Y)!=="array")return[new Mr(H,Y,`array expected, ${Ds(Y)} found`)];if(Y.length!==2)return[new Mr(H,Y,`array length 2 expected, length ${Y.length} found`)];if(y){if(Ds(Y[0])!=="object")return[new Mr(H,Y,`object expected, ${Ds(Y[0])} found`)];if(Y[0].zoom===void 0)return[new Mr(H,Y,"object stop key must have zoom")];if(Y[0].value===void 0)return[new Mr(H,Y,"object stop key must have value")];if(l&&l>Ru(Y[0].zoom))return[new Mr(H,Y[0].zoom,"stop zoom values must appear in ascending order")];Ru(Y[0].zoom)!==l&&(l=Ru(Y[0].zoom),s=void 0,i={}),N=N.concat(Ef({key:`${H}[0]`,value:Y[0],valueSpec:{zoom:{}},validateSpec:j.validateSpec,style:j.style,styleSpec:j.styleSpec,objectElementValidators:{zoom:fB,value:P}}))}else N=N.concat(P({key:`${H}[0]`,value:Y[0],valueSpec:{},validateSpec:j.validateSpec,style:j.style,styleSpec:j.styleSpec},Y));return Ly(Fg(Y[1]))?N.concat([new Mr(`${H}[1]`,Y[1],"expressions are not allowed in function stops.")]):N.concat(j.validateSpec({key:`${H}[1]`,value:Y[1],valueSpec:e,validateSpec:j.validateSpec,style:j.style,styleSpec:j.styleSpec}))}function P(j,N){const Y=Ds(j.value),H=Ru(j.value),se=j.value!==null?j.value:N;if(!r)r=Y;else if(Y!==r)return[new Mr(j.key,se,`${Y} stop domain type must match previous stop domain type ${r}`)];if(Y!=="number"&&Y!=="string"&&Y!=="boolean")return[new Mr(j.key,se,"stop domain value must be a number, string, or boolean")];if(Y!=="number"&&t!=="categorical"){let re=`number expected, ${Y} found`;return Yb(e)&&t===void 0&&(re+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Mr(j.key,se,re)]}return t==="categorical"&&Y==="number"&&(!isFinite(H)||Math.floor(H)!==H)?[new Mr(j.key,se,`integer expected, found ${H}`)]:t!=="categorical"&&Y==="number"&&s!==void 0&&H<s?[new Mr(j.key,se,"stop domain values must appear in ascending order")]:(s=H,t==="categorical"&&H in i?[new Mr(j.key,se,"stop domain values must be unique")]:(i[H]=!0,[]))}function U(j){return j.validateSpec({key:j.key,value:j.value,valueSpec:e,validateSpec:j.validateSpec,style:j.style,styleSpec:j.styleSpec})}}function xy(n){const e=(n.expressionContext==="property"?ox:ix)(Fg(n.value),n.valueSpec);if(e.result==="error")return e.value.map(r=>new Mr(`${n.key}${r.key}`,n.value,r.message));const t=e.value.expression||e.value._styleExpression.expression;if(n.expressionContext==="property"&&n.propertyKey==="text-font"&&!t.outputDefined())return[new Mr(n.key,n.value,`Invalid data expression for "${n.propertyKey}". Output values must be contained as literals within the expression.`)];if(n.expressionContext==="property"&&n.propertyType==="layout"&&!oC(t))return[new Mr(n.key,n.value,'"feature-state" data expressions are not supported with layout properties.')];if(n.expressionContext==="filter"&&!oC(t))return[new Mr(n.key,n.value,'"feature-state" data expressions are not supported with filters.')];if(n.expressionContext&&n.expressionContext.indexOf("cluster")===0){if(!rx(t,["zoom","feature-state"]))return[new Mr(n.key,n.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(n.expressionContext==="cluster-initial"&&!nx(t))return[new Mr(n.key,n.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Iq(n){const e=n.value,t=n.key,r=Ds(e);return r!=="boolean"?[new Mr(t,e,`boolean expected, ${r} found`)]:[]}function kq(n){const e=n.key,t=n.value,r=Ds(t);return r!=="string"?[new Mr(e,t,`color expected, ${r} found`)]:wl.parse(String(t))?[]:[new Mr(e,t,`color expected, "${t}" found`)]}function aC(n){const e=n.key,t=n.value,r=n.valueSpec,i=[];return Array.isArray(r.values)?r.values.indexOf(Ru(t))===-1&&i.push(new Mr(e,t,`expected one of [${r.values.join(", ")}], ${JSON.stringify(t)} found`)):Object.keys(r.values).indexOf(Ru(t))===-1&&i.push(new Mr(e,t,`expected one of [${Object.keys(r.values).join(", ")}], ${JSON.stringify(t)} found`)),i}function pB(n){return RC(Fg(n.value))?xy(_y({},n,{expressionContext:"filter",valueSpec:{value:"boolean"}})):bF(n)}function bF(n){const e=n.value,t=n.key;if(Ds(e)!=="array")return[new Mr(t,e,`array expected, ${Ds(e)} found`)];const r=n.styleSpec;let i,s=[];if(e.length<1)return[new Mr(t,e,"filter array must have at least 1 element")];switch(s=s.concat(aC({key:`${t}[0]`,value:e[0],valueSpec:r.filter_operator,style:n.style,styleSpec:n.styleSpec})),Ru(e[0])){case"<":case"<=":case">":case">=":e.length>=2&&Ru(e[1])==="$type"&&s.push(new Mr(t,e,`"$type" cannot be use with operator "${e[0]}"`));case"==":case"!=":e.length!==3&&s.push(new Mr(t,e,`filter array for operator "${e[0]}" must have 3 elements`));case"in":case"!in":e.length>=2&&(i=Ds(e[1]),i!=="string"&&s.push(new Mr(`${t}[1]`,e[1],`string expected, ${i} found`)));for(let l=2;l<e.length;l++)i=Ds(e[l]),Ru(e[1])==="$type"?s=s.concat(aC({key:`${t}[${l}]`,value:e[l],valueSpec:r.geometry_type,style:n.style,styleSpec:n.styleSpec})):i!=="string"&&i!=="number"&&i!=="boolean"&&s.push(new Mr(`${t}[${l}]`,e[l],`string, number, or boolean expected, ${i} found`));break;case"any":case"all":case"none":for(let l=1;l<e.length;l++)s=s.concat(bF({key:`${t}[${l}]`,value:e[l],style:n.style,styleSpec:n.styleSpec}));break;case"has":case"!has":i=Ds(e[1]),e.length!==2?s.push(new Mr(t,e,`filter array for "${e[0]}" operator must have 2 elements`)):i!=="string"&&s.push(new Mr(`${t}[1]`,e[1],`string expected, ${i} found`));break}return s}function xF(n,e){const t=n.key,r=n.validateSpec,i=n.style,s=n.styleSpec,l=n.value,o=n.objectKey,f=s[`${e}_${n.layerType}`];if(!f)return[];const y=o.match(/^(.*)-transition$/);if(e==="paint"&&y&&f[y[1]]&&f[y[1]].transition)return r({key:t,value:l,valueSpec:s.transition,style:i,styleSpec:s});const x=n.valueSpec||f[o];if(!x)return[new Mr(t,l,`unknown property "${o}"`)];let B;if(Ds(l)==="string"&&Yb(x)&&!x.tokens&&(B=/^{([^}]+)}$/.exec(l)))return[new Mr(t,l,`"${o}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(B[1])} }\`.`)];const O=[];return n.layerType==="symbol"&&(o==="text-field"&&i&&!i.glyphs&&O.push(new Mr(t,l,'use of "text-field" requires a style "glyphs" property')),o==="text-font"&&Fy(Fg(l))&&Ru(l.type)==="identity"&&O.push(new Mr(t,l,'"text-font" does not support identity functions'))),O.concat(r({key:n.key,value:l,valueSpec:x,style:i,styleSpec:s,expressionContext:"property",propertyType:e,propertyKey:o}))}function MF(n){return xF(n,"paint")}function wF(n){return xF(n,"layout")}function SF(n){let e=[];const t=n.value,r=n.key,i=n.style,s=n.styleSpec;!t.type&&!t.ref&&e.push(new Mr(r,t,'either "type" or "ref" is required'));let l=Ru(t.type);const o=Ru(t.ref);if(t.id){const f=Ru(t.id);for(let y=0;y<n.arrayIndex;y++){const x=i.layers[y];Ru(x.id)===f&&e.push(new Mr(r,t.id,`duplicate layer id "${t.id}", previously used at line ${x.id.__line__}`))}}if("ref"in t){["type","source","source-layer","filter","layout"].forEach(y=>{y in t&&e.push(new Mr(r,t[y],`"${y}" is prohibited for ref layers`))});let f;i.layers.forEach(y=>{Ru(y.id)===o&&(f=y)}),f?f.ref?e.push(new Mr(r,t.ref,"ref cannot reference another ref layer")):l=Ru(f.type):e.push(new Mr(r,t.ref,`ref layer "${o}" not found`))}else if(l!=="background")if(!t.source)e.push(new Mr(r,t,'missing required property "source"'));else{const f=i.sources&&i.sources[t.source],y=f&&Ru(f.type);f?y==="vector"&&l==="raster"?e.push(new Mr(r,t.source,`layer "${t.id}" requires a raster source`)):y!=="raster-dem"&&l==="hillshade"?e.push(new Mr(r,t.source,`layer "${t.id}" requires a raster-dem source`)):y==="raster"&&l!=="raster"?e.push(new Mr(r,t.source,`layer "${t.id}" requires a vector source`)):y==="vector"&&!t["source-layer"]?e.push(new Mr(r,t,`layer "${t.id}" must specify a "source-layer"`)):y==="raster-dem"&&l!=="hillshade"?e.push(new Mr(r,t.source,"raster-dem source can only be used with layer type 'hillshade'.")):l==="line"&&t.paint&&t.paint["line-gradient"]&&(y!=="geojson"||!f.lineMetrics)&&e.push(new Mr(r,t,`layer "${t.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):e.push(new Mr(r,t.source,`source "${t.source}" not found`))}return e=e.concat(Ef({key:r,value:t,valueSpec:s.layer,style:n.style,styleSpec:n.styleSpec,validateSpec:n.validateSpec,objectElementValidators:{"*"(){return[]},type(){return n.validateSpec({key:`${r}.type`,value:t.type,valueSpec:s.layer.type,style:n.style,styleSpec:n.styleSpec,validateSpec:n.validateSpec,object:t,objectKey:"type"})},filter:pB,layout(f){return Ef({layer:t,key:f.key,value:f.value,style:f.style,styleSpec:f.styleSpec,validateSpec:f.validateSpec,objectElementValidators:{"*"(y){return wF(_y({layerType:l},y))}}})},paint(f){return Ef({layer:t,key:f.key,value:f.value,style:f.style,styleSpec:f.styleSpec,validateSpec:f.validateSpec,objectElementValidators:{"*"(y){return MF(_y({layerType:l},y))}}})}}})),e}function Lg(n){const e=n.value,t=n.key,r=Ds(e);return r!=="string"?[new Mr(t,e,`string expected, ${r} found`)]:[]}function Tq(n){var e;const t=(e=n.sourceName)!==null&&e!==void 0?e:"",r=n.value,i=n.styleSpec,s=i.source_raster_dem,l=n.style;let o=[];const f=Ds(r);if(r===void 0)return o;if(f!=="object")return o.push(new Mr("source_raster_dem",r,`object expected, ${f} found`)),o;const x=Ru(r.encoding)==="custom",B=["redFactor","greenFactor","blueFactor","baseShift"],O=n.value.encoding?`"${n.value.encoding}"`:"Default";for(const P in r)!x&&B.includes(P)?o.push(new Mr(P,r[P],`In "${t}": "${P}" is only valid when "encoding" is set to "custom". ${O} encoding found`)):s[P]?o=o.concat(n.validateSpec({key:P,value:r[P],valueSpec:s[P],validateSpec:n.validateSpec,style:l,styleSpec:i})):o.push(new Mr(P,r[P],`unknown property "${P}"`));return o}const f7={promoteId:Pq};function EF(n){const e=n.value,t=n.key,r=n.styleSpec,i=n.style,s=n.validateSpec;if(!e.type)return[new Mr(t,e,'"type" is required')];const l=Ru(e.type);let o;switch(l){case"vector":case"raster":return o=Ef({key:t,value:e,valueSpec:r[`source_${l.replace("-","_")}`],style:n.style,styleSpec:r,objectElementValidators:f7,validateSpec:s}),o;case"raster-dem":return o=Tq({sourceName:t,value:e,style:n.style,styleSpec:r,validateSpec:s}),o;case"geojson":if(o=Ef({key:t,value:e,valueSpec:r.source_geojson,style:i,styleSpec:r,validateSpec:s,objectElementValidators:f7}),e.cluster)for(const f in e.clusterProperties){const[y,x]=e.clusterProperties[f],B=typeof y=="string"?[y,["accumulated"],["get",f]]:y;o.push(...xy({key:`${t}.${f}.map`,value:x,validateSpec:s,expressionContext:"cluster-map"})),o.push(...xy({key:`${t}.${f}.reduce`,value:B,validateSpec:s,expressionContext:"cluster-reduce"}))}return o;case"video":return Ef({key:t,value:e,valueSpec:r.source_video,style:i,validateSpec:s,styleSpec:r});case"image":return Ef({key:t,value:e,valueSpec:r.source_image,style:i,validateSpec:s,styleSpec:r});case"canvas":return[new Mr(t,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return aC({key:`${t}.type`,value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:i,validateSpec:s,styleSpec:r})}}function Pq({key:n,value:e}){if(Ds(e)==="string")return Lg({key:n,value:e});{const t=[];for(const r in e)t.push(...Lg({key:`${n}.${r}`,value:e[r]}));return t}}function BF(n){const e=n.value,t=n.styleSpec,r=t.light,i=n.style;let s=[];const l=Ds(e);if(e===void 0)return s;if(l!=="object")return s=s.concat([new Mr("light",e,`object expected, ${l} found`)]),s;for(const o in e){const f=o.match(/^(.*)-transition$/);f&&r[f[1]]&&r[f[1]].transition?s=s.concat(n.validateSpec({key:o,value:e[o],valueSpec:t.transition,validateSpec:n.validateSpec,style:i,styleSpec:t})):r[o]?s=s.concat(n.validateSpec({key:o,value:e[o],valueSpec:r[o],validateSpec:n.validateSpec,style:i,styleSpec:t})):s=s.concat([new Mr(o,e[o],`unknown property "${o}"`)])}return s}function OF(n){const e=n.value,t=n.styleSpec,r=t.sky,i=n.style,s=Ds(e);if(e===void 0)return[];if(s!=="object")return[new Mr("sky",e,`object expected, ${s} found`)];let l=[];for(const o in e)r[o]?l=l.concat(n.validateSpec({key:o,value:e[o],valueSpec:r[o],style:i,styleSpec:t})):l=l.concat([new Mr(o,e[o],`unknown property "${o}"`)]);return l}function IF(n){const e=n.value,t=n.styleSpec,r=t.terrain,i=n.style;let s=[];const l=Ds(e);if(e===void 0)return s;if(l!=="object")return s=s.concat([new Mr("terrain",e,`object expected, ${l} found`)]),s;for(const o in e)r[o]?s=s.concat(n.validateSpec({key:o,value:e[o],valueSpec:r[o],validateSpec:n.validateSpec,style:i,styleSpec:t})):s=s.concat([new Mr(o,e[o],`unknown property "${o}"`)]);return s}function Kq(n){return Lg(n).length===0?[]:xy(n)}function Rq(n){return Lg(n).length===0?[]:xy(n)}function Dq(n){const e=n.key,t=n.value;if(Ds(t)==="array"){if(t.length<1||t.length>4)return[new Mr(e,t,`padding requires 1 to 4 values; ${t.length} values found`)];const i={type:"number"};let s=[];for(let l=0;l<t.length;l++)s=s.concat(n.validateSpec({key:`${e}[${l}]`,value:t[l],validateSpec:n.validateSpec,valueSpec:i}));return s}else return fB({key:e,value:t,valueSpec:{}})}function Fq(n){const e=n.key,t=n.value,r=Ds(t),i=n.styleSpec;if(r!=="array"||t.length<1||t.length%2!==0)return[new Mr(e,t,"variableAnchorOffsetCollection requires a non-empty array of even length")];let s=[];for(let l=0;l<t.length;l+=2)s=s.concat(aC({key:`${e}[${l}]`,value:t[l],valueSpec:i.layout_symbol["text-anchor"]})),s=s.concat(hB({key:`${e}[${l+1}]`,value:t[l+1],valueSpec:{length:2,value:"number"},validateSpec:n.validateSpec,style:n.style,styleSpec:i}));return s}function kF(n){let e=[];const t=n.value,r=n.key;if(Array.isArray(t)){const i=[],s=[];for(const l in t){t[l].id&&i.includes(t[l].id)&&e.push(new Mr(r,t,`all the sprites' ids must be unique, but ${t[l].id} is duplicated`)),i.push(t[l].id),t[l].url&&s.includes(t[l].url)&&e.push(new Mr(r,t,`all the sprites' URLs must be unique, but ${t[l].url} is duplicated`)),s.push(t[l].url);const o={id:{type:"string",required:!0},url:{type:"string",required:!0}};e=e.concat(Ef({key:`${r}[${l}]`,value:t[l],valueSpec:o,validateSpec:n.validateSpec}))}return e}else return Lg({key:r,value:t})}function Lq(n){const e=n.value,t=n.styleSpec,r=t.projection,i=n.style,s=Ds(e);if(e===void 0)return[];if(s!=="object")return[new Mr("projection",e,`object expected, ${s} found`)];let l=[];for(const o in e)r[o]?l=l.concat(n.validateSpec({key:o,value:e[o],valueSpec:r[o],style:i,styleSpec:t})):l=l.concat([new Mr(o,e[o],`unknown property "${o}"`)]);return l}function Uq(n){const e=n.key;let t=n.value;t=t instanceof String?t.valueOf():t;const r=Ds(t);return r==="array"&&!jq(t)&&!zq(t)?[new Mr(e,t,`projection expected, invalid array ${JSON.stringify(t)} found`)]:["array","string"].includes(r)?[]:[new Mr(e,t,`projection expected, invalid type "${r}" found`)]}function zq(n){return!!["interpolate","step","literal"].includes(n[0])}function jq(n){return Array.isArray(n)&&n.length===3&&typeof n[0]=="string"&&typeof n[1]=="string"&&typeof n[2]=="number"}const p7={"*"(){return[]},array:hB,boolean:Iq,number:fB,color:kq,constants:CF,enum:aC,filter:pB,function:_F,layer:SF,object:Ef,source:EF,light:BF,sky:OF,terrain:IF,projection:Lq,projectionDefinition:Uq,string:Lg,formatted:Kq,resolvedImage:Rq,padding:Dq,variableAnchorOffsetCollection:Fq,sprite:kF};function Qv(n){const e=n.value,t=n.valueSpec,r=n.styleSpec;return n.validateSpec=Qv,t.expression&&Fy(Ru(e))?_F(n):t.expression&&Ly(Fg(e))?xy(n):t.type&&p7[t.type]?p7[t.type](n):Ef(_y({},n,{valueSpec:t.type?r[t.type]:t}))}function TF(n){const e=n.value,t=n.key,r=Lg(n);return r.length||(e.indexOf("{fontstack}")===-1&&r.push(new Mr(t,e,'"glyphs" url must include a "{fontstack}" token')),e.indexOf("{range}")===-1&&r.push(new Mr(t,e,'"glyphs" url must include a "{range}" token'))),r}function Df(n,e=Ms){let t=[];return t=t.concat(Qv({key:"",value:n,valueSpec:e.$root,styleSpec:e,style:n,validateSpec:Qv,objectElementValidators:{glyphs:TF,"*"(){return[]}}})),n.constants&&(t=t.concat(CF({key:"constants",value:n.constants,style:n,styleSpec:e,validateSpec:Qv}))),PF(t)}Df.source=om(im(EF));Df.sprite=om(im(kF));Df.glyphs=om(im(TF));Df.light=om(im(BF));Df.sky=om(im(OF));Df.terrain=om(im(IF));Df.layer=om(im(SF));Df.filter=om(im(pB));Df.paintProperty=om(im(MF));Df.layoutProperty=om(im(wF));function im(n){return function(e){return n({...e,validateSpec:Qv})}}function PF(n){return[].concat(n).sort((e,t)=>e.line-t.line)}function om(n){return function(...e){return PF(n.apply(this,e))}}const Nq=/("(?:[^\\"]|\\.)*")|[:,]/g;function Wq(n,e={}){const t=JSON.stringify([1],void 0,e.indent===void 0?2:e.indent).slice(2,-3),r=t===""?1/0:e.maxLength===void 0?80:e.maxLength;let{replacer:i}=e;return function s(l,o,f){l&&typeof l.toJSON=="function"&&(l=l.toJSON());const y=JSON.stringify(l,i);if(y===void 0)return y;const x=r-o.length-f;if(y.length<=x){const B=y.replace(Nq,(O,P)=>P||`${O} `);if(B.length<=x)return B}if(i!=null&&(l=JSON.parse(y),i=void 0),typeof l=="object"&&l!==null){const B=o+t,O=[];let P=0,U,j;if(Array.isArray(l)){U="[",j="]";const{length:N}=l;for(;P<N;P++)O.push(s(l[P],B,P===N-1?0:1)||"null")}else{U="{",j="}";const N=Object.keys(l),{length:Y}=N;for(;P<Y;P++){const H=N[P],se=`${JSON.stringify(H)}: `,re=s(l[H],B,se.length+(P===Y-1?0:1));re!==void 0&&O.push(se+re)}}if(O.length>0)return[U,t+O.join(`,
${B}`),j].join(`
${o}`)}return y}(n,"",0)}function m7(n,e){const t={};for(const r in e)n[r]!==void 0&&(t[r]=n[r]);for(const r in n)t[r]===void 0&&(t[r]=n[r]);return t}function KF(n,e=2){return n=m7(n,Ms.$root),n.layers&&(n.layers=n.layers.map(t=>m7(t,Ms.layer))),Wq(n,{indent:e})}function z3(n,e){for(const t in n)t.indexOf("layout")===0&&e(n[t],t)}function g7(n,e){for(const t in n)t.indexOf("paint")===0&&e(n[t],t)}function UE(n,e){return typeof e=="string"&&e[0]==="@"?UE(n,n.constants[e]):e}function Gq(n){return Array.isArray(n.stops)}function lv(n,e,t){n[t]=n[e],delete n[e]}function Qq(n){n.version=8,Oq(n,i=>{i.type==="video"&&i.url!==void 0&&lv(i,"url","urls"),i.type==="video"&&i.coordinates.forEach(s=>s.reverse())}),Gv(n,i=>{z3(i,s=>{s["symbol-min-distance"]!==void 0&&lv(s,"symbol-min-distance","symbol-spacing")}),g7(i,s=>{s["background-image"]!==void 0&&lv(s,"background-image","background-pattern"),s["line-image"]!==void 0&&lv(s,"line-image","line-pattern"),s["fill-image"]!==void 0&&lv(s,"fill-image","fill-pattern")})}),dB(n,{paint:!0,layout:!0},i=>{const s=UE(n,i.value);Gq(s)&&s.stops.forEach(l=>{l[1]=UE(n,l[1])}),i.set(s)}),delete n.constants,Gv(n,i=>{z3(i,s=>{delete s["text-max-size"],delete s["icon-max-size"]}),g7(i,s=>{s["text-size"]&&(i.layout||(i.layout={}),i.layout["text-size"]=s["text-size"],delete s["text-size"]),s["icon-size"]&&(i.layout||(i.layout={}),i.layout["icon-size"]=s["icon-size"],delete s["icon-size"])})});function e(i){function s(l){return l.split(",").map(o=>o.trim())}if(Array.isArray(i))return i;if(typeof i=="string")return s(i);if(typeof i=="object")return i.stops.forEach(l=>{l[1]=s(l[1])}),i;throw new Error("unexpected font value")}Gv(n,i=>{z3(i,s=>{s["text-font"]&&(s["text-font"]=e(s["text-font"]))})});let t=0;for(let i=n.layers.length-1;i>=0;i--)if(n.layers[i].type!=="symbol"){t=i+1;break}const r=n.layers.splice(t);return r.reverse(),n.layers=n.layers.concat(r),n}function Yq(n){const e=[];return Gv(n,t=>{t.filter&&(t.filter=Wv(t.filter))}),dB(n,{paint:!0,layout:!0},({path:t,value:r,reference:i,set:s})=>{Ly(r)||(typeof r=="object"&&!Array.isArray(r)?(s(lB(r,i)),e.push(t.join("."))):i.tokens&&typeof r=="string"&&s(vF(r)))}),n}function qq(n){return JSON.parse(Vq(JSON.stringify(n)))}function Vq(n){return n.replace(/"hsla?\((.+?)\)"/gi,(e,t)=>{const r=t.match(/^(.+?)\s*,\s*(.+?)\s*,\s*(.+?)(?:\s*,\s*(.+))?$/i);if(r){let[i,s,l,o]=r.slice(1);return[s,l]=[s,l].map(f=>f.endsWith("%")?f:`${parseFloat(f)*100}%`),`"hsl${typeof o=="string"?"a":""}(${[i,s,l,o].filter(Boolean).join(",")})"`}return e})}function $q(n){let e=!1;if(n.version===7&&(n=Qq(n),e=!0),n.version===8&&(e=!!Yq(n),e=!0),dB(n,{paint:!0,layout:!0},({value:t,reference:r,set:i})=>{r.type==="color"&&i(qq(t))}),!e)throw new Error(`Cannot migrate from ${n.version}`);return n}const Hq=Ms,Zq={StyleExpression:gF,StylePropertyFunction:sx,ZoomConstantExpression:DE,ZoomDependentExpression:FE,createExpression:ix,createPropertyExpression:ox,isExpression:Ly,isExpressionFilter:RC,isZoomExpression:fq,normalizePropertyExpression:pq},Xq={convertFunction:lB,createFunction:aB,isFunction:Fy};var ax=IC();const Jq=fl(ax);var xb={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v5.2.0/LICENSE.txt
 */var eV=xb.exports,y7;function tV(){return y7||(y7=1,function(n,e){(function(t,r){n.exports=r()})(eV,function(){var t={},r={};function i(l,o,f){if(r[l]=f,l==="index"){var y="var sharedModule = {}; ("+r.shared+")(sharedModule); ("+r.worker+")(sharedModule);",x={};return r.shared(x),r.index(t,x),typeof window<"u"&&t.setWorkerUrl(window.URL.createObjectURL(new Blob([y],{type:"text/javascript"}))),t}}i("shared",["exports"],function(l){function o(d,u,h,v){return new(h||(h=Promise))(function(w,K){function F(ie){try{X(v.next(ie))}catch(de){K(de)}}function W(ie){try{X(v.throw(ie))}catch(de){K(de)}}function X(ie){var de;ie.done?w(ie.value):(de=ie.value,de instanceof h?de:new h(function(_e){_e(de)})).then(F,W)}X((v=v.apply(d,u||[])).next())})}function f(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d}var y,x;function B(){if(x)return y;function d(u,h){this.x=u,this.y=h}return x=1,y=d,d.prototype={clone:function(){return new d(this.x,this.y)},add:function(u){return this.clone()._add(u)},sub:function(u){return this.clone()._sub(u)},multByPoint:function(u){return this.clone()._multByPoint(u)},divByPoint:function(u){return this.clone()._divByPoint(u)},mult:function(u){return this.clone()._mult(u)},div:function(u){return this.clone()._div(u)},rotate:function(u){return this.clone()._rotate(u)},rotateAround:function(u,h){return this.clone()._rotateAround(u,h)},matMult:function(u){return this.clone()._matMult(u)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(u){return this.x===u.x&&this.y===u.y},dist:function(u){return Math.sqrt(this.distSqr(u))},distSqr:function(u){var h=u.x-this.x,v=u.y-this.y;return h*h+v*v},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(u){return Math.atan2(this.y-u.y,this.x-u.x)},angleWith:function(u){return this.angleWithSep(u.x,u.y)},angleWithSep:function(u,h){return Math.atan2(this.x*h-this.y*u,this.x*u+this.y*h)},_matMult:function(u){var h=u[2]*this.x+u[3]*this.y;return this.x=u[0]*this.x+u[1]*this.y,this.y=h,this},_add:function(u){return this.x+=u.x,this.y+=u.y,this},_sub:function(u){return this.x-=u.x,this.y-=u.y,this},_mult:function(u){return this.x*=u,this.y*=u,this},_div:function(u){return this.x/=u,this.y/=u,this},_multByPoint:function(u){return this.x*=u.x,this.y*=u.y,this},_divByPoint:function(u){return this.x/=u.x,this.y/=u.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var u=this.y;return this.y=this.x,this.x=-u,this},_rotate:function(u){var h=Math.cos(u),v=Math.sin(u),w=v*this.x+h*this.y;return this.x=h*this.x-v*this.y,this.y=w,this},_rotateAround:function(u,h){var v=Math.cos(u),w=Math.sin(u),K=h.y+w*(this.x-h.x)+v*(this.y-h.y);return this.x=h.x+v*(this.x-h.x)-w*(this.y-h.y),this.y=K,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},d.convert=function(u){return u instanceof d?u:Array.isArray(u)?new d(u[0],u[1]):u},y}typeof SuppressedError=="function"&&SuppressedError;var O,P,U=f(B()),j=function(){if(P)return O;function d(u,h,v,w){this.cx=3*u,this.bx=3*(v-u)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*h,this.by=3*(w-h)-this.cy,this.ay=1-this.cy-this.by,this.p1x=u,this.p1y=h,this.p2x=v,this.p2y=w}return P=1,O=d,d.prototype={sampleCurveX:function(u){return((this.ax*u+this.bx)*u+this.cx)*u},sampleCurveY:function(u){return((this.ay*u+this.by)*u+this.cy)*u},sampleCurveDerivativeX:function(u){return(3*this.ax*u+2*this.bx)*u+this.cx},solveCurveX:function(u,h){if(h===void 0&&(h=1e-6),u<0)return 0;if(u>1)return 1;for(var v=u,w=0;w<8;w++){var K=this.sampleCurveX(v)-u;if(Math.abs(K)<h)return v;var F=this.sampleCurveDerivativeX(v);if(Math.abs(F)<1e-6)break;v-=K/F}var W=0,X=1;for(v=u,w=0;w<20&&(K=this.sampleCurveX(v),!(Math.abs(K-u)<h));w++)u>K?W=v:X=v,v=.5*(X-W)+W;return v},solve:function(u,h){return this.sampleCurveY(this.solveCurveX(u,h))}},O}(),N=f(j);let Y,H;function se(){return Y==null&&(Y=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),Y}function re(){if(H==null&&(H=!1,se())){const u=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(u){for(let v=0;v<5*5;v++){const w=4*v;u.fillStyle=`rgb(${w},${w+1},${w+2})`,u.fillRect(v%5,Math.floor(v/5),1,1)}const h=u.getImageData(0,0,5,5).data;for(let v=0;v<5*5*4;v++)if(v%4!=3&&h[v]!==v){H=!0;break}}}return H||!1}var V,ne=1e-6,G=typeof Float32Array<"u"?Float32Array:Array;function oe(){var d=new G(9);return G!=Float32Array&&(d[1]=0,d[2]=0,d[3]=0,d[5]=0,d[6]=0,d[7]=0),d[0]=1,d[4]=1,d[8]=1,d}function he(d){return d[0]=1,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=1,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=1,d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,d}function fe(){var d=new G(3);return G!=Float32Array&&(d[0]=0,d[1]=0,d[2]=0),d}function Ee(d,u,h){var v=new G(3);return v[0]=d,v[1]=u,v[2]=h,v}function me(d,u,h){var v=u[0],w=u[1],K=u[2],F=u[3];return d[0]=h[0]*v+h[4]*w+h[8]*K+h[12]*F,d[1]=h[1]*v+h[5]*w+h[9]*K+h[13]*F,d[2]=h[2]*v+h[6]*w+h[10]*K+h[14]*F,d[3]=h[3]*v+h[7]*w+h[11]*K+h[15]*F,d}function Se(){var d=new G(4);return G!=Float32Array&&(d[0]=0,d[1]=0,d[2]=0),d[3]=1,d}function Ke(){var d=new G(2);return G!=Float32Array&&(d[0]=0,d[1]=0),d}function xe(d,u){var h=new G(2);return h[0]=d,h[1]=u,h}Math.hypot||(Math.hypot=function(){for(var d=0,u=arguments.length;u--;)d+=arguments[u]*arguments[u];return Math.sqrt(d)}),fe(),V=new G(4),G!=Float32Array&&(V[0]=0,V[1]=0,V[2]=0,V[3]=0),fe(),Ee(1,0,0),Ee(0,1,0),Se(),Se(),oe(),Ke();const at=8192;function Ze(d,u,h){return u*(at/(d.tileSize*Math.pow(2,h-d.tileID.overscaledZ)))}function Je(d,u){return(d%u+u)%u}function Ne(d,u,h){return d*(1-h)+u*h}function we(d){if(d<=0)return 0;if(d>=1)return 1;const u=d*d,h=u*d;return 4*(d<.5?h:3*(d-u)+h-.75)}function De(d,u,h,v){const w=new N(d,u,h,v);return K=>w.solve(K)}const He=De(.25,.1,.25,1);function bt(d,u,h){return Math.min(h,Math.max(u,d))}function Yt(d,u,h){const v=h-u,w=((d-u)%v+v)%v+u;return w===u?h:w}function yt(d,...u){for(const h of u)for(const v in h)d[v]=h[v];return d}let Ft=1;function Pt(d,u,h){const v={};for(const w in d)v[w]=u.call(this,d[w],w,d);return v}function Ue(d,u,h){const v={};for(const w in d)u.call(this,d[w],w,d)&&(v[w]=d[w]);return v}function Pe(d){return Array.isArray(d)?d.map(Pe):typeof d=="object"&&d?Pt(d,Pe):d}const Be={};function it(d){Be[d]||(typeof console<"u"&&console.warn(d),Be[d]=!0)}function _t(d,u,h){return(h.y-d.y)*(u.x-d.x)>(u.y-d.y)*(h.x-d.x)}function pt(d){return typeof WorkerGlobalScope<"u"&&d!==void 0&&d instanceof WorkerGlobalScope}let Lt=null;function nn(d){return typeof ImageBitmap<"u"&&d instanceof ImageBitmap}const Kt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function vn(d,u,h,v,w){return o(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const K=new VideoFrame(d,{timestamp:0});try{const F=K==null?void 0:K.format;if(!F||!F.startsWith("BGR")&&!F.startsWith("RGB"))throw new Error(`Unrecognized format ${F}`);const W=F.startsWith("BGR"),X=new Uint8ClampedArray(v*w*4);if(yield K.copyTo(X,function(ie,de,_e,Re,ze){const We=4*Math.max(1,0),et=(Math.max(0,_e)-_e)*Re*4+We,At=4*Re,Ct=Math.max(0,de),Nt=Math.max(0,_e);return{rect:{x:Ct,y:Nt,width:Math.min(ie.width,de+Re)-Ct,height:Math.min(ie.height,_e+ze)-Nt},layout:[{offset:et,stride:At}]}}(d,u,h,v,w)),W)for(let ie=0;ie<X.length;ie+=4){const de=X[ie];X[ie]=X[ie+2],X[ie+2]=de}return X}finally{K.close()}})}let Gn,tn;function dr(d,u,h,v){return d.addEventListener(u,h,v),{unsubscribe:()=>{d.removeEventListener(u,h,v)}}}function Pn(d){return d/Math.PI*180}const pn="AbortError";function $n(){return new Error(pn)}const lr={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function vr(d){return lr.REGISTERED_PROTOCOLS[d.substring(0,d.indexOf("://"))]}const Zn="global-dispatcher";class Ge extends Error{constructor(u,h,v,w){super(`AJAXError: ${h} (${u}): ${v}`),this.status=u,this.statusText=h,this.url=v,this.body=w}}const ce=()=>pt(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,pe=function(d,u){if(/:\/\//.test(d.url)&&!/^https?:|^file:/.test(d.url)){const v=vr(d.url);if(v)return v(d,u);if(pt(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:d,targetMapId:Zn},u)}if(!(/^file:/.test(h=d.url)||/^file:/.test(ce())&&!/^\w+:/.test(h))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(v,w){return o(this,void 0,void 0,function*(){const K=new Request(v.url,{method:v.method||"GET",body:v.body,credentials:v.credentials,headers:v.headers,cache:v.cache,referrer:ce(),signal:w.signal});let F,W;v.type!=="json"||K.headers.has("Accept")||K.headers.set("Accept","application/json");try{F=yield fetch(K)}catch(ie){throw new Ge(0,ie.message,v.url,new Blob)}if(!F.ok){const ie=yield F.blob();throw new Ge(F.status,F.statusText,v.url,ie)}W=v.type==="arrayBuffer"||v.type==="image"?F.arrayBuffer():v.type==="json"?F.json():F.text();const X=yield W;if(w.signal.aborted)throw $n();return{data:X,cacheControl:F.headers.get("Cache-Control"),expires:F.headers.get("Expires")}})}(d,u);if(pt(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:d,mustQueue:!0,targetMapId:Zn},u)}var h;return function(v,w){return new Promise((K,F)=>{var W;const X=new XMLHttpRequest;X.open(v.method||"GET",v.url,!0),v.type!=="arrayBuffer"&&v.type!=="image"||(X.responseType="arraybuffer");for(const ie in v.headers)X.setRequestHeader(ie,v.headers[ie]);v.type==="json"&&(X.responseType="text",!((W=v.headers)===null||W===void 0)&&W.Accept||X.setRequestHeader("Accept","application/json")),X.withCredentials=v.credentials==="include",X.onerror=()=>{F(new Error(X.statusText))},X.onload=()=>{if(!w.signal.aborted)if((X.status>=200&&X.status<300||X.status===0)&&X.response!==null){let ie=X.response;if(v.type==="json")try{ie=JSON.parse(X.response)}catch(de){return void F(de)}K({data:ie,cacheControl:X.getResponseHeader("Cache-Control"),expires:X.getResponseHeader("Expires")})}else{const ie=new Blob([X.response],{type:X.getResponseHeader("Content-Type")});F(new Ge(X.status,X.statusText,v.url,ie))}},w.signal.addEventListener("abort",()=>{X.abort(),F($n())}),X.send(v.body)})}(d,u)};function nt(d){if(!d||d.indexOf("://")<=0||d.indexOf("data:image/")===0||d.indexOf("blob:")===0)return!0;const u=new URL(d),h=window.location;return u.protocol===h.protocol&&u.host===h.host}function wt(d,u,h){h[d]&&h[d].indexOf(u)!==-1||(h[d]=h[d]||[],h[d].push(u))}function Ht(d,u,h){if(h&&h[d]){const v=h[d].indexOf(u);v!==-1&&h[d].splice(v,1)}}class sn{constructor(u,h={}){yt(this,h),this.type=u}}class Hn extends sn{constructor(u,h={}){super("error",yt({error:u},h))}}class Ve{on(u,h){return this._listeners=this._listeners||{},wt(u,h,this._listeners),{unsubscribe:()=>{this.off(u,h)}}}off(u,h){return Ht(u,h,this._listeners),Ht(u,h,this._oneTimeListeners),this}once(u,h){return h?(this._oneTimeListeners=this._oneTimeListeners||{},wt(u,h,this._oneTimeListeners),this):new Promise(v=>this.once(u,v))}fire(u,h){typeof u=="string"&&(u=new sn(u,h||{}));const v=u.type;if(this.listens(v)){u.target=this;const w=this._listeners&&this._listeners[v]?this._listeners[v].slice():[];for(const W of w)W.call(this,u);const K=this._oneTimeListeners&&this._oneTimeListeners[v]?this._oneTimeListeners[v].slice():[];for(const W of K)Ht(v,W,this._oneTimeListeners),W.call(this,u);const F=this._eventedParent;F&&(yt(u,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),F.fire(u))}else u instanceof Hn&&console.error(u.error);return this}listens(u){return this._listeners&&this._listeners[u]&&this._listeners[u].length>0||this._oneTimeListeners&&this._oneTimeListeners[u]&&this._oneTimeListeners[u].length>0||this._eventedParent&&this._eventedParent.listens(u)}setEventedParent(u,h){return this._eventedParent=u,this._eventedParentData=h,this}}var J={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const ve=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function p(d,u){const h={};for(const v in d)v!=="ref"&&(h[v]=d[v]);return ve.forEach(v=>{v in u&&(h[v]=u[v])}),h}function Fe(d,u){if(Array.isArray(d)){if(!Array.isArray(u)||d.length!==u.length)return!1;for(let h=0;h<d.length;h++)if(!Fe(d[h],u[h]))return!1;return!0}if(typeof d=="object"&&d!==null&&u!==null){if(typeof u!="object"||Object.keys(d).length!==Object.keys(u).length)return!1;for(const h in d)if(!Fe(d[h],u[h]))return!1;return!0}return d===u}function Qe(d,u){d.push(u)}function rt(d,u,h){Qe(h,{command:"addSource",args:[d,u[d]]})}function ct(d,u,h){Qe(u,{command:"removeSource",args:[d]}),h[d]=!0}function dt(d,u,h,v){ct(d,h,v),rt(d,u,h)}function qt(d,u,h){let v;for(v in d[h])if(Object.prototype.hasOwnProperty.call(d[h],v)&&v!=="data"&&!Fe(d[h][v],u[h][v]))return!1;for(v in u[h])if(Object.prototype.hasOwnProperty.call(u[h],v)&&v!=="data"&&!Fe(d[h][v],u[h][v]))return!1;return!0}function Gt(d,u,h,v,w,K){d=d||{},u=u||{};for(const F in d)Object.prototype.hasOwnProperty.call(d,F)&&(Fe(d[F],u[F])||h.push({command:K,args:[v,F,u[F],w]}));for(const F in u)Object.prototype.hasOwnProperty.call(u,F)&&!Object.prototype.hasOwnProperty.call(d,F)&&(Fe(d[F],u[F])||h.push({command:K,args:[v,F,u[F],w]}))}function zt(d){return d.id}function on(d,u){return d[u.id]=u,d}class jt{constructor(u,h,v,w){this.message=(u?`${u}: `:"")+v,w&&(this.identifier=w),h!=null&&h.__line__&&(this.line=h.__line__)}}function Dn(d,...u){for(const h of u)for(const v in h)d[v]=h[v];return d}class rr extends Error{constructor(u,h){super(h),this.message=h,this.key=u}}class Br{constructor(u,h=[]){this.parent=u,this.bindings={};for(const[v,w]of h)this.bindings[v]=w}concat(u){return new Br(this,u)}get(u){if(this.bindings[u])return this.bindings[u];if(this.parent)return this.parent.get(u);throw new Error(`${u} not found in scope.`)}has(u){return!!this.bindings[u]||!!this.parent&&this.parent.has(u)}}const Jn={kind:"null"},un={kind:"number"},er={kind:"string"},fr={kind:"boolean"},Sr={kind:"color"},Ur={kind:"projectionDefinition"},ri={kind:"object"},Or={kind:"value"},ka={kind:"collator"},Wi={kind:"formatted"},Bi={kind:"padding"},eo={kind:"resolvedImage"},ws={kind:"variableAnchorOffsetCollection"};function ko(d,u){return{kind:"array",itemType:d,N:u}}function Hi(d){if(d.kind==="array"){const u=Hi(d.itemType);return typeof d.N=="number"?`array<${u}, ${d.N}>`:d.itemType.kind==="value"?"array":`array<${u}>`}return d.kind}const Sl=[Jn,un,er,fr,Sr,Ur,Wi,ri,ko(Or),Bi,eo,ws];function Go(d,u){if(u.kind==="error")return null;if(d.kind==="array"){if(u.kind==="array"&&(u.N===0&&u.itemType.kind==="value"||!Go(d.itemType,u.itemType))&&(typeof d.N!="number"||d.N===u.N))return null}else{if(d.kind===u.kind)return null;if(d.kind==="value"){for(const h of Sl)if(!Go(h,u))return null}}return`Expected ${Hi(d)} but found ${Hi(u)} instead.`}function Za(d,u){return u.some(h=>h.kind===d.kind)}function Xa(d,u){return u.some(h=>h==="null"?d===null:h==="array"?Array.isArray(d):h==="object"?d&&!Array.isArray(d)&&typeof d=="object":h===typeof d)}function Yi(d,u){return d.kind==="array"&&u.kind==="array"?d.itemType.kind===u.itemType.kind&&typeof d.N=="number":d.kind===u.kind}const Lu=.96422,Jl=.82521,wo=4/29,wr=6/29,Ta=3*wr*wr,Ss=wr*wr*wr,Zs=Math.PI/180,Ye=180/Math.PI;function xt(d){return(d%=360)<0&&(d+=360),d}function Cn([d,u,h,v]){let w,K;const F=fn((.2225045*(d=Qn(d))+.7168786*(u=Qn(u))+.0606169*(h=Qn(h)))/1);d===u&&u===h?w=K=F:(w=fn((.4360747*d+.3850649*u+.1430804*h)/Lu),K=fn((.0139322*d+.0971045*u+.7141733*h)/Jl));const W=116*F-16;return[W<0?0:W,500*(w-F),200*(F-K),v]}function Qn(d){return d<=.04045?d/12.92:Math.pow((d+.055)/1.055,2.4)}function fn(d){return d>Ss?Math.pow(d,1/3):d/Ta+wo}function ur([d,u,h,v]){let w=(d+16)/116,K=isNaN(u)?w:w+u/500,F=isNaN(h)?w:w-h/200;return w=1*vo(w),K=Lu*vo(K),F=Jl*vo(F),[Di(3.1338561*K-1.6168667*w-.4906146*F),Di(-.9787684*K+1.9161415*w+.033454*F),Di(.0719453*K-.2289914*w+1.4052427*F),v]}function Di(d){return(d=d<=.00304?12.92*d:1.055*Math.pow(d,1/2.4)-.055)<0?0:d>1?1:d}function vo(d){return d>wr?d*d*d:Ta*(d-wo)}function rs(d){return parseInt(d.padEnd(2,d),16)/255}function ua(d,u){return eu(u?d/100:d,0,1)}function eu(d,u,h){return Math.min(Math.max(u,d),h)}function ii(d){return!d.some(Number.isNaN)}const qi={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function Aa(d,u,h){return d+h*(u-d)}function Cs(d,u,h){return d.map((v,w)=>Aa(v,u[w],h))}class xi{constructor(u,h,v,w=1,K=!0){this.r=u,this.g=h,this.b=v,this.a=w,K||(this.r*=w,this.g*=w,this.b*=w,w||this.overwriteGetter("rgb",[u,h,v,w]))}static parse(u){if(u instanceof xi)return u;if(typeof u!="string")return;const h=function(v){if((v=v.toLowerCase().trim())==="transparent")return[0,0,0,0];const w=qi[v];if(w){const[F,W,X]=w;return[F/255,W/255,X/255,1]}if(v.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(v)){const F=v.length<6?1:2;let W=1;return[rs(v.slice(W,W+=F)),rs(v.slice(W,W+=F)),rs(v.slice(W,W+=F)),rs(v.slice(W,W+F)||"ff")]}if(v.startsWith("rgb")){const F=v.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(F){const[W,X,ie,de,_e,Re,ze,We,et,At,Ct,Nt]=F,St=[de||" ",ze||" ",At].join("");if(St==="  "||St==="  /"||St===",,"||St===",,,"){const Le=[ie,Re,et].join(""),lt=Le==="%%%"?100:Le===""?255:0;if(lt){const Bt=[eu(+X/lt,0,1),eu(+_e/lt,0,1),eu(+We/lt,0,1),Ct?ua(+Ct,Nt):1];if(ii(Bt))return Bt}}return}}const K=v.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(K){const[F,W,X,ie,de,_e,Re,ze,We]=K,et=[X||" ",de||" ",Re].join("");if(et==="  "||et==="  /"||et===",,"||et===",,,"){const At=[+W,eu(+ie,0,100),eu(+_e,0,100),ze?ua(+ze,We):1];if(ii(At))return function([Ct,Nt,St,Le]){function lt(Bt){const dn=(Bt+Ct/30)%12,kn=Nt*Math.min(St,1-St);return St-kn*Math.max(-1,Math.min(dn-3,9-dn,1))}return Ct=xt(Ct),Nt/=100,St/=100,[lt(0),lt(8),lt(4),Le]}(At)}}}(u);return h?new xi(...h,!1):void 0}get rgb(){const{r:u,g:h,b:v,a:w}=this,K=w||1/0;return this.overwriteGetter("rgb",[u/K,h/K,v/K,w])}get hcl(){return this.overwriteGetter("hcl",function(u){const[h,v,w,K]=Cn(u),F=Math.sqrt(v*v+w*w);return[Math.round(1e4*F)?xt(Math.atan2(w,v)*Ye):NaN,F,h,K]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Cn(this.rgb))}overwriteGetter(u,h){return Object.defineProperty(this,u,{value:h}),h}toString(){const[u,h,v,w]=this.rgb;return`rgba(${[u,h,v].map(K=>Math.round(255*K)).join(",")},${w})`}static interpolate(u,h,v,w="rgb"){switch(w){case"rgb":{const[K,F,W,X]=Cs(u.rgb,h.rgb,v);return new xi(K,F,W,X,!1)}case"hcl":{const[K,F,W,X]=u.hcl,[ie,de,_e,Re]=h.hcl;let ze,We;if(isNaN(K)||isNaN(ie))isNaN(K)?isNaN(ie)?ze=NaN:(ze=ie,W!==1&&W!==0||(We=de)):(ze=K,_e!==1&&_e!==0||(We=F));else{let St=ie-K;ie>K&&St>180?St-=360:ie<K&&K-ie>180&&(St+=360),ze=K+v*St}const[et,At,Ct,Nt]=function([St,Le,lt,Bt]){return St=isNaN(St)?0:St*Zs,ur([lt,Math.cos(St)*Le,Math.sin(St)*Le,Bt])}([ze,We??Aa(F,de,v),Aa(W,_e,v),Aa(X,Re,v)]);return new xi(et,At,Ct,Nt,!1)}case"lab":{const[K,F,W,X]=ur(Cs(u.lab,h.lab,v));return new xi(K,F,W,X,!1)}}}}xi.black=new xi(0,0,0,1),xi.white=new xi(1,1,1,1),xi.transparent=new xi(0,0,0,0),xi.red=new xi(1,0,0,1);class uA{constructor(u,h,v){this.sensitivity=u?h?"variant":"case":h?"accent":"base",this.locale=v,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(u,h){return this.collator.compare(u,h)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const Ja=["bottom","center","top"];class oi{constructor(u,h,v,w,K,F){this.text=u,this.image=h,this.scale=v,this.fontStack=w,this.textColor=K,this.verticalAlign=F}}class to{constructor(u){this.sections=u}static fromString(u){return new to([new oi(u,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(u=>u.text.length!==0||u.image&&u.image.name.length!==0)}static factory(u){return u instanceof to?u:to.fromString(u)}toString(){return this.sections.length===0?"":this.sections.map(u=>u.text).join("")}}class $o{constructor(u){this.values=u.slice()}static parse(u){if(u instanceof $o)return u;if(typeof u=="number")return new $o([u,u,u,u]);if(Array.isArray(u)&&!(u.length<1||u.length>4)){for(const h of u)if(typeof h!="number")return;switch(u.length){case 1:u=[u[0],u[0],u[0],u[0]];break;case 2:u=[u[0],u[1],u[0],u[1]];break;case 3:u=[u[0],u[1],u[2],u[1]]}return new $o(u)}}toString(){return JSON.stringify(this.values)}static interpolate(u,h,v){return new $o(Cs(u.values,h.values,v))}}class Qo{constructor(u){this.name="ExpressionEvaluationError",this.message=u}toJSON(){return this.message}}const js=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Es{constructor(u){this.values=u.slice()}static parse(u){if(u instanceof Es)return u;if(Array.isArray(u)&&!(u.length<1)&&u.length%2==0){for(let h=0;h<u.length;h+=2){const v=u[h],w=u[h+1];if(typeof v!="string"||!js.has(v)||!Array.isArray(w)||w.length!==2||typeof w[0]!="number"||typeof w[1]!="number")return}return new Es(u)}}toString(){return JSON.stringify(this.values)}static interpolate(u,h,v){const w=u.values,K=h.values;if(w.length!==K.length)throw new Qo(`Cannot interpolate values of different length. from: ${u.toString()}, to: ${h.toString()}`);const F=[];for(let W=0;W<w.length;W+=2){if(w[W]!==K[W])throw new Qo(`Cannot interpolate values containing mismatched anchors. from[${W}]: ${w[W]}, to[${W}]: ${K[W]}`);F.push(w[W]);const[X,ie]=w[W+1],[de,_e]=K[W+1];F.push([Aa(X,de,v),Aa(ie,_e,v)])}return new Es(F)}}class Xs{constructor(u){this.name=u.name,this.available=u.available}toString(){return this.name}static fromString(u){return u?new Xs({name:u,available:!1}):null}}class Js{constructor(u,h,v){this.from=u,this.to=h,this.transition=v}static interpolate(u,h,v){return new Js(u,h,v)}static parse(u){return u instanceof Js?u:Array.isArray(u)&&u.length===3&&typeof u[0]=="string"&&typeof u[1]=="string"&&typeof u[2]=="number"?new Js(u[0],u[1],u[2]):typeof u=="object"&&typeof u.from=="string"&&typeof u.to=="string"&&typeof u.transition=="number"?new Js(u.from,u.to,u.transition):typeof u=="string"?new Js(u,u,1):void 0}}function Au(d,u,h,v){return typeof d=="number"&&d>=0&&d<=255&&typeof u=="number"&&u>=0&&u<=255&&typeof h=="number"&&h>=0&&h<=255?v===void 0||typeof v=="number"&&v>=0&&v<=1?null:`Invalid rgba value [${[d,u,h,v].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof v=="number"?[d,u,h,v]:[d,u,h]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Ns(d){if(d===null||typeof d=="string"||typeof d=="boolean"||typeof d=="number"||d instanceof Js||d instanceof xi||d instanceof uA||d instanceof to||d instanceof $o||d instanceof Es||d instanceof Xs)return!0;if(Array.isArray(d)){for(const u of d)if(!Ns(u))return!1;return!0}if(typeof d=="object"){for(const u in d)if(!Ns(d[u]))return!1;return!0}return!1}function Oi(d){if(d===null)return Jn;if(typeof d=="string")return er;if(typeof d=="boolean")return fr;if(typeof d=="number")return un;if(d instanceof xi)return Sr;if(d instanceof Js)return Ur;if(d instanceof uA)return ka;if(d instanceof to)return Wi;if(d instanceof $o)return Bi;if(d instanceof Es)return ws;if(d instanceof Xs)return eo;if(Array.isArray(d)){const u=d.length;let h;for(const v of d){const w=Oi(v);if(h){if(h===w)continue;h=Or;break}h=w}return ko(h||Or,u)}return ri}function is(d){const u=typeof d;return d===null?"":u==="string"||u==="number"||u==="boolean"?String(d):d instanceof xi||d instanceof Js||d instanceof to||d instanceof $o||d instanceof Es||d instanceof Xs?d.toString():JSON.stringify(d)}class ea{constructor(u,h){this.type=u,this.value=h}static parse(u,h){if(u.length!==2)return h.error(`'literal' expression requires exactly one argument, but found ${u.length-1} instead.`);if(!Ns(u[1]))return h.error("invalid value");const v=u[1];let w=Oi(v);const K=h.expectedType;return w.kind!=="array"||w.N!==0||!K||K.kind!=="array"||typeof K.N=="number"&&K.N!==0||(w=K),new ea(w,v)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const va={string:er,number:un,boolean:fr,object:ri};class As{constructor(u,h){this.type=u,this.args=h}static parse(u,h){if(u.length<2)return h.error("Expected at least one argument.");let v,w=1;const K=u[0];if(K==="array"){let W,X;if(u.length>2){const ie=u[1];if(typeof ie!="string"||!(ie in va)||ie==="object")return h.error('The item type argument of "array" must be one of string, number, boolean',1);W=va[ie],w++}else W=Or;if(u.length>3){if(u[2]!==null&&(typeof u[2]!="number"||u[2]<0||u[2]!==Math.floor(u[2])))return h.error('The length argument to "array" must be a positive integer literal',2);X=u[2],w++}v=ko(W,X)}else{if(!va[K])throw new Error(`Types doesn't contain name = ${K}`);v=va[K]}const F=[];for(;w<u.length;w++){const W=h.parse(u[w],w,Or);if(!W)return null;F.push(W)}return new As(v,F)}evaluate(u){for(let h=0;h<this.args.length;h++){const v=this.args[h].evaluate(u);if(!Go(this.type,Oi(v)))return v;if(h===this.args.length-1)throw new Qo(`Expected value to be of type ${Hi(this.type)}, but found ${Hi(Oi(v))} instead.`)}throw new Error}eachChild(u){this.args.forEach(u)}outputDefined(){return this.args.every(u=>u.outputDefined())}}const pl={"to-boolean":fr,"to-color":Sr,"to-number":un,"to-string":er};class ml{constructor(u,h){this.type=u,this.args=h}static parse(u,h){if(u.length<2)return h.error("Expected at least one argument.");const v=u[0];if(!pl[v])throw new Error(`Can't parse ${v} as it is not part of the known types`);if((v==="to-boolean"||v==="to-string")&&u.length!==2)return h.error("Expected one argument.");const w=pl[v],K=[];for(let F=1;F<u.length;F++){const W=h.parse(u[F],F,Or);if(!W)return null;K.push(W)}return new ml(w,K)}evaluate(u){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(u);case"color":{let h,v;for(const w of this.args){if(h=w.evaluate(u),v=null,h instanceof xi)return h;if(typeof h=="string"){const K=u.parseColor(h);if(K)return K}else if(Array.isArray(h)&&(v=h.length<3||h.length>4?`Invalid rgba value ${JSON.stringify(h)}: expected an array containing either three or four numeric values.`:Au(h[0],h[1],h[2],h[3]),!v))return new xi(h[0]/255,h[1]/255,h[2]/255,h[3])}throw new Qo(v||`Could not parse color from value '${typeof h=="string"?h:JSON.stringify(h)}'`)}case"padding":{let h;for(const v of this.args){h=v.evaluate(u);const w=$o.parse(h);if(w)return w}throw new Qo(`Could not parse padding from value '${typeof h=="string"?h:JSON.stringify(h)}'`)}case"variableAnchorOffsetCollection":{let h;for(const v of this.args){h=v.evaluate(u);const w=Es.parse(h);if(w)return w}throw new Qo(`Could not parse variableAnchorOffsetCollection from value '${typeof h=="string"?h:JSON.stringify(h)}'`)}case"number":{let h=null;for(const v of this.args){if(h=v.evaluate(u),h===null)return 0;const w=Number(h);if(!isNaN(w))return w}throw new Qo(`Could not convert ${JSON.stringify(h)} to number.`)}case"formatted":return to.fromString(is(this.args[0].evaluate(u)));case"resolvedImage":return Xs.fromString(is(this.args[0].evaluate(u)));case"projectionDefinition":return this.args[0].evaluate(u);default:return is(this.args[0].evaluate(u))}}eachChild(u){this.args.forEach(u)}outputDefined(){return this.args.every(u=>u.outputDefined())}}const fo=["Unknown","Point","LineString","Polygon"];class Uu{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?fo[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(u){let h=this._parseColorCache[u];return h||(h=this._parseColorCache[u]=xi.parse(u)),h}}class zi{constructor(u,h,v=[],w,K=new Br,F=[]){this.registry=u,this.path=v,this.key=v.map(W=>`[${W}]`).join(""),this.scope=K,this.errors=F,this.expectedType=w,this._isConstant=h}parse(u,h,v,w,K={}){return h?this.concat(h,v,w)._parse(u,K):this._parse(u,K)}_parse(u,h){function v(w,K,F){return F==="assert"?new As(K,[w]):F==="coerce"?new ml(K,[w]):w}if(u!==null&&typeof u!="string"&&typeof u!="boolean"&&typeof u!="number"||(u=["literal",u]),Array.isArray(u)){if(u.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const w=u[0];if(typeof w!="string")return this.error(`Expression name must be a string, but found ${typeof w} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const K=this.registry[w];if(K){let F=K.parse(u,this);if(!F)return null;if(this.expectedType){const W=this.expectedType,X=F.type;if(W.kind!=="string"&&W.kind!=="number"&&W.kind!=="boolean"&&W.kind!=="object"&&W.kind!=="array"||X.kind!=="value")if(W.kind!=="projectionDefinition"||X.kind!=="string"&&X.kind!=="array")if(W.kind!=="color"&&W.kind!=="formatted"&&W.kind!=="resolvedImage"||X.kind!=="value"&&X.kind!=="string")if(W.kind!=="padding"||X.kind!=="value"&&X.kind!=="number"&&X.kind!=="array")if(W.kind!=="variableAnchorOffsetCollection"||X.kind!=="value"&&X.kind!=="array"){if(this.checkSubtype(W,X))return null}else F=v(F,W,h.typeAnnotation||"coerce");else F=v(F,W,h.typeAnnotation||"coerce");else F=v(F,W,h.typeAnnotation||"coerce");else F=v(F,W,h.typeAnnotation||"coerce");else F=v(F,W,h.typeAnnotation||"assert")}if(!(F instanceof ea)&&F.type.kind!=="resolvedImage"&&this._isConstant(F)){const W=new Uu;try{F=new ea(F.type,F.evaluate(W))}catch(X){return this.error(X.message),null}}return F}return this.error(`Unknown expression "${w}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(u===void 0?"'undefined' value invalid. Use null instead.":typeof u=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof u} instead.`)}concat(u,h,v){const w=typeof u=="number"?this.path.concat(u):this.path,K=v?this.scope.concat(v):this.scope;return new zi(this.registry,this._isConstant,w,h||null,K,this.errors)}error(u,...h){const v=`${this.key}${h.map(w=>`[${w}]`).join("")}`;this.errors.push(new rr(v,u))}checkSubtype(u,h){const v=Go(u,h);return v&&this.error(v),v}}class qr{constructor(u,h){this.type=h.type,this.bindings=[].concat(u),this.result=h}evaluate(u){return this.result.evaluate(u)}eachChild(u){for(const h of this.bindings)u(h[1]);u(this.result)}static parse(u,h){if(u.length<4)return h.error(`Expected at least 3 arguments, but found ${u.length-1} instead.`);const v=[];for(let K=1;K<u.length-1;K+=2){const F=u[K];if(typeof F!="string")return h.error(`Expected string, but found ${typeof F} instead.`,K);if(/[^a-zA-Z0-9_]/.test(F))return h.error("Variable names must contain only alphanumeric characters or '_'.",K);const W=h.parse(u[K+1],K+1);if(!W)return null;v.push([F,W])}const w=h.parse(u[u.length-1],u.length-1,h.expectedType,v);return w?new qr(v,w):null}outputDefined(){return this.result.outputDefined()}}class Dl{constructor(u,h){this.type=h.type,this.name=u,this.boundExpression=h}static parse(u,h){if(u.length!==2||typeof u[1]!="string")return h.error("'var' expression requires exactly one string literal argument.");const v=u[1];return h.scope.has(v)?new Dl(v,h.scope.get(v)):h.error(`Unknown variable "${v}". Make sure "${v}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(u){return this.boundExpression.evaluate(u)}eachChild(){}outputDefined(){return!1}}class Vi{constructor(u,h,v){this.type=u,this.index=h,this.input=v}static parse(u,h){if(u.length!==3)return h.error(`Expected 2 arguments, but found ${u.length-1} instead.`);const v=h.parse(u[1],1,un),w=h.parse(u[2],2,ko(h.expectedType||Or));return v&&w?new Vi(w.type.itemType,v,w):null}evaluate(u){const h=this.index.evaluate(u),v=this.input.evaluate(u);if(h<0)throw new Qo(`Array index out of bounds: ${h} < 0.`);if(h>=v.length)throw new Qo(`Array index out of bounds: ${h} > ${v.length-1}.`);if(h!==Math.floor(h))throw new Qo(`Array index must be an integer, but found ${h} instead.`);return v[h]}eachChild(u){u(this.index),u(this.input)}outputDefined(){return!1}}class uo{constructor(u,h){this.type=fr,this.needle=u,this.haystack=h}static parse(u,h){if(u.length!==3)return h.error(`Expected 2 arguments, but found ${u.length-1} instead.`);const v=h.parse(u[1],1,Or),w=h.parse(u[2],2,Or);return v&&w?Za(v.type,[fr,er,un,Jn,Or])?new uo(v,w):h.error(`Expected first argument to be of type boolean, string, number or null, but found ${Hi(v.type)} instead`):null}evaluate(u){const h=this.needle.evaluate(u),v=this.haystack.evaluate(u);if(!v)return!1;if(!Xa(h,["boolean","string","number","null"]))throw new Qo(`Expected first argument to be of type boolean, string, number or null, but found ${Hi(Oi(h))} instead.`);if(!Xa(v,["string","array"]))throw new Qo(`Expected second argument to be of type array or string, but found ${Hi(Oi(v))} instead.`);return v.indexOf(h)>=0}eachChild(u){u(this.needle),u(this.haystack)}outputDefined(){return!0}}class Ki{constructor(u,h,v){this.type=un,this.needle=u,this.haystack=h,this.fromIndex=v}static parse(u,h){if(u.length<=2||u.length>=5)return h.error(`Expected 3 or 4 arguments, but found ${u.length-1} instead.`);const v=h.parse(u[1],1,Or),w=h.parse(u[2],2,Or);if(!v||!w)return null;if(!Za(v.type,[fr,er,un,Jn,Or]))return h.error(`Expected first argument to be of type boolean, string, number or null, but found ${Hi(v.type)} instead`);if(u.length===4){const K=h.parse(u[3],3,un);return K?new Ki(v,w,K):null}return new Ki(v,w)}evaluate(u){const h=this.needle.evaluate(u),v=this.haystack.evaluate(u);if(!Xa(h,["boolean","string","number","null"]))throw new Qo(`Expected first argument to be of type boolean, string, number or null, but found ${Hi(Oi(h))} instead.`);let w;if(this.fromIndex&&(w=this.fromIndex.evaluate(u)),Xa(v,["string"])){const K=v.indexOf(h,w);return K===-1?-1:[...v.slice(0,K)].length}if(Xa(v,["array"]))return v.indexOf(h,w);throw new Qo(`Expected second argument to be of type array or string, but found ${Hi(Oi(v))} instead.`)}eachChild(u){u(this.needle),u(this.haystack),this.fromIndex&&u(this.fromIndex)}outputDefined(){return!1}}class ee{constructor(u,h,v,w,K,F){this.inputType=u,this.type=h,this.input=v,this.cases=w,this.outputs=K,this.otherwise=F}static parse(u,h){if(u.length<5)return h.error(`Expected at least 4 arguments, but found only ${u.length-1}.`);if(u.length%2!=1)return h.error("Expected an even number of arguments.");let v,w;h.expectedType&&h.expectedType.kind!=="value"&&(w=h.expectedType);const K={},F=[];for(let ie=2;ie<u.length-1;ie+=2){let de=u[ie];const _e=u[ie+1];Array.isArray(de)||(de=[de]);const Re=h.concat(ie);if(de.length===0)return Re.error("Expected at least one branch label.");for(const We of de){if(typeof We!="number"&&typeof We!="string")return Re.error("Branch labels must be numbers or strings.");if(typeof We=="number"&&Math.abs(We)>Number.MAX_SAFE_INTEGER)return Re.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof We=="number"&&Math.floor(We)!==We)return Re.error("Numeric branch labels must be integer values.");if(v){if(Re.checkSubtype(v,Oi(We)))return null}else v=Oi(We);if(K[String(We)]!==void 0)return Re.error("Branch labels must be unique.");K[String(We)]=F.length}const ze=h.parse(_e,ie,w);if(!ze)return null;w=w||ze.type,F.push(ze)}const W=h.parse(u[1],1,Or);if(!W)return null;const X=h.parse(u[u.length-1],u.length-1,w);return X?W.type.kind!=="value"&&h.concat(1).checkSubtype(v,W.type)?null:new ee(v,w,W,K,F,X):null}evaluate(u){const h=this.input.evaluate(u);return(Oi(h)===this.inputType&&this.outputs[this.cases[h]]||this.otherwise).evaluate(u)}eachChild(u){u(this.input),this.outputs.forEach(u),u(this.otherwise)}outputDefined(){return this.outputs.every(u=>u.outputDefined())&&this.otherwise.outputDefined()}}class Oe{constructor(u,h,v){this.type=u,this.branches=h,this.otherwise=v}static parse(u,h){if(u.length<4)return h.error(`Expected at least 3 arguments, but found only ${u.length-1}.`);if(u.length%2!=0)return h.error("Expected an odd number of arguments.");let v;h.expectedType&&h.expectedType.kind!=="value"&&(v=h.expectedType);const w=[];for(let F=1;F<u.length-1;F+=2){const W=h.parse(u[F],F,fr);if(!W)return null;const X=h.parse(u[F+1],F+1,v);if(!X)return null;w.push([W,X]),v=v||X.type}const K=h.parse(u[u.length-1],u.length-1,v);if(!K)return null;if(!v)throw new Error("Can't infer output type");return new Oe(v,w,K)}evaluate(u){for(const[h,v]of this.branches)if(h.evaluate(u))return v.evaluate(u);return this.otherwise.evaluate(u)}eachChild(u){for(const[h,v]of this.branches)u(h),u(v);u(this.otherwise)}outputDefined(){return this.branches.every(([u,h])=>h.outputDefined())&&this.otherwise.outputDefined()}}class st{constructor(u,h,v,w){this.type=u,this.input=h,this.beginIndex=v,this.endIndex=w}static parse(u,h){if(u.length<=2||u.length>=5)return h.error(`Expected 3 or 4 arguments, but found ${u.length-1} instead.`);const v=h.parse(u[1],1,Or),w=h.parse(u[2],2,un);if(!v||!w)return null;if(!Za(v.type,[ko(Or),er,Or]))return h.error(`Expected first argument to be of type array or string, but found ${Hi(v.type)} instead`);if(u.length===4){const K=h.parse(u[3],3,un);return K?new st(v.type,v,w,K):null}return new st(v.type,v,w)}evaluate(u){const h=this.input.evaluate(u),v=this.beginIndex.evaluate(u);let w;if(this.endIndex&&(w=this.endIndex.evaluate(u)),Xa(h,["string"]))return[...h].slice(v,w).join("");if(Xa(h,["array"]))return h.slice(v,w);throw new Qo(`Expected first argument to be of type array or string, but found ${Hi(Oi(h))} instead.`)}eachChild(u){u(this.input),u(this.beginIndex),this.endIndex&&u(this.endIndex)}outputDefined(){return!1}}function Vt(d,u){const h=d.length-1;let v,w,K=0,F=h,W=0;for(;K<=F;)if(W=Math.floor((K+F)/2),v=d[W],w=d[W+1],v<=u){if(W===h||u<w)return W;K=W+1}else{if(!(v>u))throw new Qo("Input is not a number.");F=W-1}return 0}class Er{constructor(u,h,v){this.type=u,this.input=h,this.labels=[],this.outputs=[];for(const[w,K]of v)this.labels.push(w),this.outputs.push(K)}static parse(u,h){if(u.length-1<4)return h.error(`Expected at least 4 arguments, but found only ${u.length-1}.`);if((u.length-1)%2!=0)return h.error("Expected an even number of arguments.");const v=h.parse(u[1],1,un);if(!v)return null;const w=[];let K=null;h.expectedType&&h.expectedType.kind!=="value"&&(K=h.expectedType);for(let F=1;F<u.length;F+=2){const W=F===1?-1/0:u[F],X=u[F+1],ie=F,de=F+1;if(typeof W!="number")return h.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ie);if(w.length&&w[w.length-1][0]>=W)return h.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',ie);const _e=h.parse(X,de,K);if(!_e)return null;K=K||_e.type,w.push([W,_e])}return new Er(K,v,w)}evaluate(u){const h=this.labels,v=this.outputs;if(h.length===1)return v[0].evaluate(u);const w=this.input.evaluate(u);if(w<=h[0])return v[0].evaluate(u);const K=h.length;return w>=h[K-1]?v[K-1].evaluate(u):v[Vt(h,w)].evaluate(u)}eachChild(u){u(this.input);for(const h of this.outputs)u(h)}outputDefined(){return this.outputs.every(u=>u.outputDefined())}}function qn(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d}var si,di,Ir=function(){if(di)return si;function d(u,h,v,w){this.cx=3*u,this.bx=3*(v-u)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*h,this.by=3*(w-h)-this.cy,this.ay=1-this.cy-this.by,this.p1x=u,this.p1y=h,this.p2x=v,this.p2y=w}return di=1,si=d,d.prototype={sampleCurveX:function(u){return((this.ax*u+this.bx)*u+this.cx)*u},sampleCurveY:function(u){return((this.ay*u+this.by)*u+this.cy)*u},sampleCurveDerivativeX:function(u){return(3*this.ax*u+2*this.bx)*u+this.cx},solveCurveX:function(u,h){if(h===void 0&&(h=1e-6),u<0)return 0;if(u>1)return 1;for(var v=u,w=0;w<8;w++){var K=this.sampleCurveX(v)-u;if(Math.abs(K)<h)return v;var F=this.sampleCurveDerivativeX(v);if(Math.abs(F)<1e-6)break;v-=K/F}var W=0,X=1;for(v=u,w=0;w<20&&(K=this.sampleCurveX(v),!(Math.abs(K-u)<h));w++)u>K?W=v:X=v,v=.5*(X-W)+W;return v},solve:function(u,h){return this.sampleCurveY(this.solveCurveX(u,h))}},si}(),Pr=qn(Ir);class pi{constructor(u,h,v,w,K){this.type=u,this.operator=h,this.interpolation=v,this.input=w,this.labels=[],this.outputs=[];for(const[F,W]of K)this.labels.push(F),this.outputs.push(W)}static interpolationFactor(u,h,v,w){let K=0;if(u.name==="exponential")K=Do(h,u.base,v,w);else if(u.name==="linear")K=Do(h,1,v,w);else if(u.name==="cubic-bezier"){const F=u.controlPoints;K=new Pr(F[0],F[1],F[2],F[3]).solve(Do(h,1,v,w))}return K}static parse(u,h){let[v,w,K,...F]=u;if(!Array.isArray(w)||w.length===0)return h.error("Expected an interpolation type expression.",1);if(w[0]==="linear")w={name:"linear"};else if(w[0]==="exponential"){const ie=w[1];if(typeof ie!="number")return h.error("Exponential interpolation requires a numeric base.",1,1);w={name:"exponential",base:ie}}else{if(w[0]!=="cubic-bezier")return h.error(`Unknown interpolation type ${String(w[0])}`,1,0);{const ie=w.slice(1);if(ie.length!==4||ie.some(de=>typeof de!="number"||de<0||de>1))return h.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);w={name:"cubic-bezier",controlPoints:ie}}}if(u.length-1<4)return h.error(`Expected at least 4 arguments, but found only ${u.length-1}.`);if((u.length-1)%2!=0)return h.error("Expected an even number of arguments.");if(K=h.parse(K,2,un),!K)return null;const W=[];let X=null;v==="interpolate-hcl"||v==="interpolate-lab"?X=Sr:h.expectedType&&h.expectedType.kind!=="value"&&(X=h.expectedType);for(let ie=0;ie<F.length;ie+=2){const de=F[ie],_e=F[ie+1],Re=ie+3,ze=ie+4;if(typeof de!="number")return h.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Re);if(W.length&&W[W.length-1][0]>=de)return h.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Re);const We=h.parse(_e,ze,X);if(!We)return null;X=X||We.type,W.push([de,We])}return Yi(X,un)||Yi(X,Ur)||Yi(X,Sr)||Yi(X,Bi)||Yi(X,ws)||Yi(X,ko(un))?new pi(X,v,w,K,W):h.error(`Type ${Hi(X)} is not interpolatable.`)}evaluate(u){const h=this.labels,v=this.outputs;if(h.length===1)return v[0].evaluate(u);const w=this.input.evaluate(u);if(w<=h[0])return v[0].evaluate(u);const K=h.length;if(w>=h[K-1])return v[K-1].evaluate(u);const F=Vt(h,w),W=pi.interpolationFactor(this.interpolation,w,h[F],h[F+1]),X=v[F].evaluate(u),ie=v[F+1].evaluate(u);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return Aa(X,ie,W);case"color":return xi.interpolate(X,ie,W);case"padding":return $o.interpolate(X,ie,W);case"variableAnchorOffsetCollection":return Es.interpolate(X,ie,W);case"array":return Cs(X,ie,W);case"projectionDefinition":return Js.interpolate(X,ie,W)}case"interpolate-hcl":return xi.interpolate(X,ie,W,"hcl");case"interpolate-lab":return xi.interpolate(X,ie,W,"lab")}}eachChild(u){u(this.input);for(const h of this.outputs)u(h)}outputDefined(){return this.outputs.every(u=>u.outputDefined())}}function Do(d,u,h,v){const w=v-h,K=d-h;return w===0?0:u===1?K/w:(Math.pow(u,K)-1)/(Math.pow(u,w)-1)}const mi={color:xi.interpolate,number:Aa,padding:$o.interpolate,variableAnchorOffsetCollection:Es.interpolate,array:Cs};class zr{constructor(u,h){this.type=u,this.args=h}static parse(u,h){if(u.length<2)return h.error("Expected at least one argument.");let v=null;const w=h.expectedType;w&&w.kind!=="value"&&(v=w);const K=[];for(const W of u.slice(1)){const X=h.parse(W,1+K.length,v,void 0,{typeAnnotation:"omit"});if(!X)return null;v=v||X.type,K.push(X)}if(!v)throw new Error("No output type");const F=w&&K.some(W=>Go(w,W.type));return new zr(F?Or:v,K)}evaluate(u){let h,v=null,w=0;for(const K of this.args)if(w++,v=K.evaluate(u),v&&v instanceof Xs&&!v.available&&(h||(h=v.name),v=null,w===this.args.length&&(v=h)),v!==null)break;return v}eachChild(u){this.args.forEach(u)}outputDefined(){return this.args.every(u=>u.outputDefined())}}function Co(d,u){return d==="=="||d==="!="?u.kind==="boolean"||u.kind==="string"||u.kind==="number"||u.kind==="null"||u.kind==="value":u.kind==="string"||u.kind==="number"||u.kind==="value"}function Zi(d,u,h,v){return v.compare(u,h)===0}function To(d,u,h){const v=d!=="=="&&d!=="!=";return class RF{constructor(K,F,W){this.type=fr,this.lhs=K,this.rhs=F,this.collator=W,this.hasUntypedArgument=K.type.kind==="value"||F.type.kind==="value"}static parse(K,F){if(K.length!==3&&K.length!==4)return F.error("Expected two or three arguments.");const W=K[0];let X=F.parse(K[1],1,Or);if(!X)return null;if(!Co(W,X.type))return F.concat(1).error(`"${W}" comparisons are not supported for type '${Hi(X.type)}'.`);let ie=F.parse(K[2],2,Or);if(!ie)return null;if(!Co(W,ie.type))return F.concat(2).error(`"${W}" comparisons are not supported for type '${Hi(ie.type)}'.`);if(X.type.kind!==ie.type.kind&&X.type.kind!=="value"&&ie.type.kind!=="value")return F.error(`Cannot compare types '${Hi(X.type)}' and '${Hi(ie.type)}'.`);v&&(X.type.kind==="value"&&ie.type.kind!=="value"?X=new As(ie.type,[X]):X.type.kind!=="value"&&ie.type.kind==="value"&&(ie=new As(X.type,[ie])));let de=null;if(K.length===4){if(X.type.kind!=="string"&&ie.type.kind!=="string"&&X.type.kind!=="value"&&ie.type.kind!=="value")return F.error("Cannot use collator to compare non-string types.");if(de=F.parse(K[3],3,ka),!de)return null}return new RF(X,ie,de)}evaluate(K){const F=this.lhs.evaluate(K),W=this.rhs.evaluate(K);if(v&&this.hasUntypedArgument){const X=Oi(F),ie=Oi(W);if(X.kind!==ie.kind||X.kind!=="string"&&X.kind!=="number")throw new Qo(`Expected arguments for "${d}" to be (string, string) or (number, number), but found (${X.kind}, ${ie.kind}) instead.`)}if(this.collator&&!v&&this.hasUntypedArgument){const X=Oi(F),ie=Oi(W);if(X.kind!=="string"||ie.kind!=="string")return u(K,F,W)}return this.collator?h(K,F,W,this.collator.evaluate(K)):u(K,F,W)}eachChild(K){K(this.lhs),K(this.rhs),this.collator&&K(this.collator)}outputDefined(){return!0}}}const ca=To("==",function(d,u,h){return u===h},Zi),Pa=To("!=",function(d,u,h){return u!==h},function(d,u,h,v){return!Zi(0,u,h,v)}),cu=To("<",function(d,u,h){return u<h},function(d,u,h,v){return v.compare(u,h)<0}),Ws=To(">",function(d,u,h){return u>h},function(d,u,h,v){return v.compare(u,h)>0}),zd=To("<=",function(d,u,h){return u<=h},function(d,u,h,v){return v.compare(u,h)<=0}),el=To(">=",function(d,u,h){return u>=h},function(d,u,h,v){return v.compare(u,h)>=0});class gl{constructor(u,h,v){this.type=ka,this.locale=v,this.caseSensitive=u,this.diacriticSensitive=h}static parse(u,h){if(u.length!==2)return h.error("Expected one argument.");const v=u[1];if(typeof v!="object"||Array.isArray(v))return h.error("Collator options argument must be an object.");const w=h.parse(v["case-sensitive"]!==void 0&&v["case-sensitive"],1,fr);if(!w)return null;const K=h.parse(v["diacritic-sensitive"]!==void 0&&v["diacritic-sensitive"],1,fr);if(!K)return null;let F=null;return v.locale&&(F=h.parse(v.locale,1,er),!F)?null:new gl(w,K,F)}evaluate(u){return new uA(this.caseSensitive.evaluate(u),this.diacriticSensitive.evaluate(u),this.locale?this.locale.evaluate(u):null)}eachChild(u){u(this.caseSensitive),u(this.diacriticSensitive),this.locale&&u(this.locale)}outputDefined(){return!1}}class Ad{constructor(u,h,v,w,K){this.type=er,this.number=u,this.locale=h,this.currency=v,this.minFractionDigits=w,this.maxFractionDigits=K}static parse(u,h){if(u.length!==3)return h.error("Expected two arguments.");const v=h.parse(u[1],1,un);if(!v)return null;const w=u[2];if(typeof w!="object"||Array.isArray(w))return h.error("NumberFormat options argument must be an object.");let K=null;if(w.locale&&(K=h.parse(w.locale,1,er),!K))return null;let F=null;if(w.currency&&(F=h.parse(w.currency,1,er),!F))return null;let W=null;if(w["min-fraction-digits"]&&(W=h.parse(w["min-fraction-digits"],1,un),!W))return null;let X=null;return w["max-fraction-digits"]&&(X=h.parse(w["max-fraction-digits"],1,un),!X)?null:new Ad(v,K,F,W,X)}evaluate(u){return new Intl.NumberFormat(this.locale?this.locale.evaluate(u):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(u):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(u):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(u):void 0}).format(this.number.evaluate(u))}eachChild(u){u(this.number),this.locale&&u(this.locale),this.currency&&u(this.currency),this.minFractionDigits&&u(this.minFractionDigits),this.maxFractionDigits&&u(this.maxFractionDigits)}outputDefined(){return!1}}class du{constructor(u){this.type=Wi,this.sections=u}static parse(u,h){if(u.length<2)return h.error("Expected at least one argument.");const v=u[1];if(!Array.isArray(v)&&typeof v=="object")return h.error("First argument must be an image or text section.");const w=[];let K=!1;for(let F=1;F<=u.length-1;++F){const W=u[F];if(K&&typeof W=="object"&&!Array.isArray(W)){K=!1;let X=null;if(W["font-scale"]&&(X=h.parse(W["font-scale"],1,un),!X))return null;let ie=null;if(W["text-font"]&&(ie=h.parse(W["text-font"],1,ko(er)),!ie))return null;let de=null;if(W["text-color"]&&(de=h.parse(W["text-color"],1,Sr),!de))return null;let _e=null;if(W["vertical-align"]){if(typeof W["vertical-align"]=="string"&&!Ja.includes(W["vertical-align"]))return h.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${W["vertical-align"]}' instead.`);if(_e=h.parse(W["vertical-align"],1,er),!_e)return null}const Re=w[w.length-1];Re.scale=X,Re.font=ie,Re.textColor=de,Re.verticalAlign=_e}else{const X=h.parse(u[F],1,Or);if(!X)return null;const ie=X.type.kind;if(ie!=="string"&&ie!=="value"&&ie!=="null"&&ie!=="resolvedImage")return h.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");K=!0,w.push({content:X,scale:null,font:null,textColor:null,verticalAlign:null})}}return new du(w)}evaluate(u){return new to(this.sections.map(h=>{const v=h.content.evaluate(u);return Oi(v)===eo?new oi("",v,null,null,null,h.verticalAlign?h.verticalAlign.evaluate(u):null):new oi(is(v),null,h.scale?h.scale.evaluate(u):null,h.font?h.font.evaluate(u).join(","):null,h.textColor?h.textColor.evaluate(u):null,h.verticalAlign?h.verticalAlign.evaluate(u):null)}))}eachChild(u){for(const h of this.sections)u(h.content),h.scale&&u(h.scale),h.font&&u(h.font),h.textColor&&u(h.textColor),h.verticalAlign&&u(h.verticalAlign)}outputDefined(){return!1}}class jd{constructor(u){this.type=eo,this.input=u}static parse(u,h){if(u.length!==2)return h.error("Expected two arguments.");const v=h.parse(u[1],1,er);return v?new jd(v):h.error("No image name provided.")}evaluate(u){const h=this.input.evaluate(u),v=Xs.fromString(h);return v&&u.availableImages&&(v.available=u.availableImages.indexOf(h)>-1),v}eachChild(u){u(this.input)}outputDefined(){return!1}}class cd{constructor(u){this.type=un,this.input=u}static parse(u,h){if(u.length!==2)return h.error(`Expected 1 argument, but found ${u.length-1} instead.`);const v=h.parse(u[1],1);return v?v.type.kind!=="array"&&v.type.kind!=="string"&&v.type.kind!=="value"?h.error(`Expected argument of type string or array, but found ${Hi(v.type)} instead.`):new cd(v):null}evaluate(u){const h=this.input.evaluate(u);if(typeof h=="string")return[...h].length;if(Array.isArray(h))return h.length;throw new Qo(`Expected value to be of type string or array, but found ${Hi(Oi(h))} instead.`)}eachChild(u){u(this.input)}outputDefined(){return!1}}const Fo=8192;function Cc(d,u){const h=(180+d[0])/360,v=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+d[1]*Math.PI/360)))/360,w=Math.pow(2,u.z);return[Math.round(h*w*Fo),Math.round(v*w*Fo)]}function yh(d,u){const h=Math.pow(2,u.z);return[(w=(d[0]/Fo+u.x)/h,360*w-180),(v=(d[1]/Fo+u.y)/h,360/Math.PI*Math.atan(Math.exp((180-360*v)*Math.PI/180))-90)];var v,w}function Nd(d,u){d[0]=Math.min(d[0],u[0]),d[1]=Math.min(d[1],u[1]),d[2]=Math.max(d[2],u[0]),d[3]=Math.max(d[3],u[1])}function zu(d,u){return!(d[0]<=u[0]||d[2]>=u[2]||d[1]<=u[1]||d[3]>=u[3])}function Wd(d,u,h){const v=d[0]-u[0],w=d[1]-u[1],K=d[0]-h[0],F=d[1]-h[1];return v*F-K*w==0&&v*K<=0&&w*F<=0}function Gd(d,u,h,v){return(w=[v[0]-h[0],v[1]-h[1]])[0]*(K=[u[0]-d[0],u[1]-d[1]])[1]-w[1]*K[0]!=0&&!(!$h(d,u,h,v)||!$h(h,v,d,u));var w,K}function _p(d,u,h){for(const v of h)for(let w=0;w<v.length-1;++w)if(Gd(d,u,v[w],v[w+1]))return!0;return!1}function dd(d,u,h=!1){let v=!1;for(const W of u)for(let X=0;X<W.length-1;X++){if(Wd(d,W[X],W[X+1]))return h;(K=W[X])[1]>(w=d)[1]!=(F=W[X+1])[1]>w[1]&&w[0]<(F[0]-K[0])*(w[1]-K[1])/(F[1]-K[1])+K[0]&&(v=!v)}var w,K,F;return v}function _c(d,u){for(const h of u)if(dd(d,h))return!0;return!1}function Gs(d,u){for(const h of d)if(!dd(h,u))return!1;for(let h=0;h<d.length-1;++h)if(_p(d[h],d[h+1],u))return!1;return!0}function Lf(d,u){for(const h of u)if(Gs(d,h))return!0;return!1}function $h(d,u,h,v){const w=v[0]-h[0],K=v[1]-h[1],F=(d[0]-h[0])*K-w*(d[1]-h[1]),W=(u[0]-h[0])*K-w*(u[1]-h[1]);return F>0&&W<0||F<0&&W>0}function jc(d,u,h){const v=[];for(let w=0;w<d.length;w++){const K=[];for(let F=0;F<d[w].length;F++){const W=Cc(d[w][F],h);Nd(u,W),K.push(W)}v.push(K)}return v}function Hh(d,u,h){const v=[];for(let w=0;w<d.length;w++){const K=jc(d[w],u,h);v.push(K)}return v}function hd(d,u,h,v){if(d[0]<h[0]||d[0]>h[2]){const w=.5*v;let K=d[0]-h[0]>w?-v:h[0]-d[0]>w?v:0;K===0&&(K=d[0]-h[2]>w?-v:h[2]-d[0]>w?v:0),d[0]+=K}Nd(u,d)}function Zh(d,u,h,v){const w=Math.pow(2,v.z)*Fo,K=[v.x*Fo,v.y*Fo],F=[];for(const W of d)for(const X of W){const ie=[X.x+K[0],X.y+K[1]];hd(ie,u,h,w),F.push(ie)}return F}function vh(d,u,h,v){const w=Math.pow(2,v.z)*Fo,K=[v.x*Fo,v.y*Fo],F=[];for(const X of d){const ie=[];for(const de of X){const _e=[de.x+K[0],de.y+K[1]];Nd(u,_e),ie.push(_e)}F.push(ie)}if(u[2]-u[0]<=w/2){(W=u)[0]=W[1]=1/0,W[2]=W[3]=-1/0;for(const X of F)for(const ie of X)hd(ie,u,h,w)}var W;return F}class ZA{constructor(u,h){this.type=fr,this.geojson=u,this.geometries=h}static parse(u,h){if(u.length!==2)return h.error(`'within' expression requires exactly one argument, but found ${u.length-1} instead.`);if(Ns(u[1])){const v=u[1];if(v.type==="FeatureCollection"){const w=[];for(const K of v.features){const{type:F,coordinates:W}=K.geometry;F==="Polygon"&&w.push(W),F==="MultiPolygon"&&w.push(...W)}if(w.length)return new ZA(v,{type:"MultiPolygon",coordinates:w})}else if(v.type==="Feature"){const w=v.geometry.type;if(w==="Polygon"||w==="MultiPolygon")return new ZA(v,v.geometry)}else if(v.type==="Polygon"||v.type==="MultiPolygon")return new ZA(v,v)}return h.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(u){if(u.geometry()!=null&&u.canonicalID()!=null){if(u.geometryType()==="Point")return function(h,v){const w=[1/0,1/0,-1/0,-1/0],K=[1/0,1/0,-1/0,-1/0],F=h.canonicalID();if(v.type==="Polygon"){const W=jc(v.coordinates,K,F),X=Zh(h.geometry(),w,K,F);if(!zu(w,K))return!1;for(const ie of X)if(!dd(ie,W))return!1}if(v.type==="MultiPolygon"){const W=Hh(v.coordinates,K,F),X=Zh(h.geometry(),w,K,F);if(!zu(w,K))return!1;for(const ie of X)if(!_c(ie,W))return!1}return!0}(u,this.geometries);if(u.geometryType()==="LineString")return function(h,v){const w=[1/0,1/0,-1/0,-1/0],K=[1/0,1/0,-1/0,-1/0],F=h.canonicalID();if(v.type==="Polygon"){const W=jc(v.coordinates,K,F),X=vh(h.geometry(),w,K,F);if(!zu(w,K))return!1;for(const ie of X)if(!Gs(ie,W))return!1}if(v.type==="MultiPolygon"){const W=Hh(v.coordinates,K,F),X=vh(h.geometry(),w,K,F);if(!zu(w,K))return!1;for(const ie of X)if(!Lf(ie,W))return!1}return!0}(u,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let Xh=class{constructor(d=[],u=(h,v)=>h<v?-1:h>v?1:0){if(this.data=d,this.length=this.data.length,this.compare=u,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(d){this.data.push(d),this._up(this.length++)}pop(){if(this.length===0)return;const d=this.data[0],u=this.data.pop();return--this.length>0&&(this.data[0]=u,this._down(0)),d}peek(){return this.data[0]}_up(d){const{data:u,compare:h}=this,v=u[d];for(;d>0;){const w=d-1>>1,K=u[w];if(h(v,K)>=0)break;u[d]=K,d=w}u[d]=v}_down(d){const{data:u,compare:h}=this,v=this.length>>1,w=u[d];for(;d<v;){let K=1+(d<<1);const F=K+1;if(F<this.length&&h(u[F],u[K])<0&&(K=F),h(u[K],w)>=0)break;u[d]=u[K],d=K}u[d]=w}};function bp(d,u,h=0,v=d.length-1,w=hu){for(;v>h;){if(v-h>600){const X=v-h+1,ie=u-h+1,de=Math.log(X),_e=.5*Math.exp(2*de/3),Re=.5*Math.sqrt(de*_e*(X-_e)/X)*(ie-X/2<0?-1:1);bp(d,u,Math.max(h,Math.floor(u-ie*_e/X+Re)),Math.min(v,Math.floor(u+(X-ie)*_e/X+Re)),w)}const K=d[u];let F=h,W=v;for(bc(d,h,u),w(d[v],K)>0&&bc(d,h,v);F<W;){for(bc(d,F,W),F++,W--;w(d[F],K)<0;)F++;for(;w(d[W],K)>0;)W--}w(d[h],K)===0?bc(d,h,W):(W++,bc(d,W,v)),W<=u&&(h=W+1),u<=W&&(v=W-1)}}function bc(d,u,h){const v=d[u];d[u]=d[h],d[h]=v}function hu(d,u){return d<u?-1:d>u?1:0}function Nc(d,u){if(d.length<=1)return[d];const h=[];let v,w;for(const K of d){const F=EA(K);F!==0&&(K.area=Math.abs(F),w===void 0&&(w=F<0),w===F<0?(v&&h.push(v),v=[K]):v.push(K))}if(v&&h.push(v),u>1)for(let K=0;K<h.length;K++)h[K].length<=u||(bp(h[K],u,1,h[K].length-1,ju),h[K]=h[K].slice(0,u));return h}function ju(d,u){return u.area-d.area}function EA(d){let u=0;for(let h,v,w=0,K=d.length,F=K-1;w<K;F=w++)h=d[w],v=d[F],u+=(v.x-h.x)*(h.y+v.y);return u}const Wc=1/298.257223563,Ch=Wc*(2-Wc),Jh=Math.PI/180;class fu{constructor(u){const h=6378.137*Jh*1e3,v=Math.cos(u*Jh),w=1/(1-Ch*(1-v*v)),K=Math.sqrt(w);this.kx=h*K*v,this.ky=h*K*w*(1-Ch)}distance(u,h){const v=this.wrap(u[0]-h[0])*this.kx,w=(u[1]-h[1])*this.ky;return Math.sqrt(v*v+w*w)}pointOnLine(u,h){let v,w,K,F,W=1/0;for(let X=0;X<u.length-1;X++){let ie=u[X][0],de=u[X][1],_e=this.wrap(u[X+1][0]-ie)*this.kx,Re=(u[X+1][1]-de)*this.ky,ze=0;_e===0&&Re===0||(ze=(this.wrap(h[0]-ie)*this.kx*_e+(h[1]-de)*this.ky*Re)/(_e*_e+Re*Re),ze>1?(ie=u[X+1][0],de=u[X+1][1]):ze>0&&(ie+=_e/this.kx*ze,de+=Re/this.ky*ze)),_e=this.wrap(h[0]-ie)*this.kx,Re=(h[1]-de)*this.ky;const We=_e*_e+Re*Re;We<W&&(W=We,v=ie,w=de,K=X,F=ze)}return{point:[v,w],index:K,t:Math.max(0,Math.min(1,F))}}wrap(u){for(;u<-180;)u+=360;for(;u>180;)u-=360;return u}}function XA(d,u){return u[0]-d[0]}function BA(d){return d[1]-d[0]+1}function pu(d,u){return d[1]>=d[0]&&d[1]<u}function ef(d,u){if(d[0]>d[1])return[null,null];const h=BA(d);if(u){if(h===2)return[d,null];const w=Math.floor(h/2);return[[d[0],d[0]+w],[d[0]+w,d[1]]]}if(h===1)return[d,null];const v=Math.floor(h/2)-1;return[[d[0],d[0]+v],[d[0]+v+1,d[1]]]}function tf(d,u){if(!pu(u,d.length))return[1/0,1/0,-1/0,-1/0];const h=[1/0,1/0,-1/0,-1/0];for(let v=u[0];v<=u[1];++v)Nd(h,d[v]);return h}function fd(d){const u=[1/0,1/0,-1/0,-1/0];for(const h of d)for(const v of h)Nd(u,v);return u}function Qd(d){return d[0]!==-1/0&&d[1]!==-1/0&&d[2]!==1/0&&d[3]!==1/0}function tl(d,u,h){if(!Qd(d)||!Qd(u))return NaN;let v=0,w=0;return d[2]<u[0]&&(v=u[0]-d[2]),d[0]>u[2]&&(v=d[0]-u[2]),d[1]>u[3]&&(w=d[1]-u[3]),d[3]<u[1]&&(w=u[1]-d[3]),h.distance([0,0],[v,w])}function oa(d,u,h){const v=h.pointOnLine(u,d);return h.distance(d,v.point)}function Lo(d,u,h,v,w){const K=Math.min(oa(d,[h,v],w),oa(u,[h,v],w)),F=Math.min(oa(h,[d,u],w),oa(v,[d,u],w));return Math.min(K,F)}function _h(d,u,h,v,w){if(!pu(u,d.length)||!pu(v,h.length))return 1/0;let K=1/0;for(let F=u[0];F<u[1];++F){const W=d[F],X=d[F+1];for(let ie=v[0];ie<v[1];++ie){const de=h[ie],_e=h[ie+1];if(Gd(W,X,de,_e))return 0;K=Math.min(K,Lo(W,X,de,_e,w))}}return K}function am(d,u,h,v,w){if(!pu(u,d.length)||!pu(v,h.length))return NaN;let K=1/0;for(let F=u[0];F<=u[1];++F)for(let W=v[0];W<=v[1];++W)if(K=Math.min(K,w.distance(d[F],h[W])),K===0)return K;return K}function pd(d,u,h){if(dd(d,u,!0))return 0;let v=1/0;for(const w of u){const K=w[0],F=w[w.length-1];if(K!==F&&(v=Math.min(v,oa(d,[F,K],h)),v===0))return v;const W=h.pointOnLine(w,d);if(v=Math.min(v,h.distance(d,W.point)),v===0)return v}return v}function Nu(d,u,h,v){if(!pu(u,d.length))return NaN;for(let K=u[0];K<=u[1];++K)if(dd(d[K],h,!0))return 0;let w=1/0;for(let K=u[0];K<u[1];++K){const F=d[K],W=d[K+1];for(const X of h)for(let ie=0,de=X.length,_e=de-1;ie<de;_e=ie++){const Re=X[_e],ze=X[ie];if(Gd(F,W,Re,ze))return 0;w=Math.min(w,Lo(F,W,Re,ze,v))}}return w}function Yd(d,u){for(const h of d)for(const v of h)if(dd(v,u,!0))return!0;return!1}function Uf(d,u,h,v=1/0){const w=fd(d),K=fd(u);if(v!==1/0&&tl(w,K,h)>=v)return v;if(zu(w,K)){if(Yd(d,u))return 0}else if(Yd(u,d))return 0;let F=1/0;for(const W of d)for(let X=0,ie=W.length,de=ie-1;X<ie;de=X++){const _e=W[de],Re=W[X];for(const ze of u)for(let We=0,et=ze.length,At=et-1;We<et;At=We++){const Ct=ze[At],Nt=ze[We];if(Gd(_e,Re,Ct,Nt))return 0;F=Math.min(F,Lo(_e,Re,Ct,Nt,h))}}return F}function md(d,u,h,v,w,K){if(!K)return;const F=tl(tf(v,K),w,h);F<u&&d.push([F,K,[0,0]])}function qd(d,u,h,v,w,K,F){if(!K||!F)return;const W=tl(tf(v,K),tf(w,F),h);W<u&&d.push([W,K,F])}function bh(d,u,h,v,w=1/0){let K=Math.min(v.distance(d[0],h[0][0]),w);if(K===0)return K;const F=new Xh([[0,[0,d.length-1],[0,0]]],XA),W=fd(h);for(;F.length>0;){const X=F.pop();if(X[0]>=K)continue;const ie=X[1],de=u?50:100;if(BA(ie)<=de){if(!pu(ie,d.length))return NaN;if(u){const _e=Nu(d,ie,h,v);if(isNaN(_e)||_e===0)return _e;K=Math.min(K,_e)}else for(let _e=ie[0];_e<=ie[1];++_e){const Re=pd(d[_e],h,v);if(K=Math.min(K,Re),K===0)return 0}}else{const _e=ef(ie,u);md(F,K,v,d,W,_e[0]),md(F,K,v,d,W,_e[1])}}return K}function Vd(d,u,h,v,w,K=1/0){let F=Math.min(K,w.distance(d[0],h[0]));if(F===0)return F;const W=new Xh([[0,[0,d.length-1],[0,h.length-1]]],XA);for(;W.length>0;){const X=W.pop();if(X[0]>=F)continue;const ie=X[1],de=X[2],_e=u?50:100,Re=v?50:100;if(BA(ie)<=_e&&BA(de)<=Re){if(!pu(ie,d.length)&&pu(de,h.length))return NaN;let ze;if(u&&v)ze=_h(d,ie,h,de,w),F=Math.min(F,ze);else if(u&&!v){const We=d.slice(ie[0],ie[1]+1);for(let et=de[0];et<=de[1];++et)if(ze=oa(h[et],We,w),F=Math.min(F,ze),F===0)return F}else if(!u&&v){const We=h.slice(de[0],de[1]+1);for(let et=ie[0];et<=ie[1];++et)if(ze=oa(d[et],We,w),F=Math.min(F,ze),F===0)return F}else ze=am(d,ie,h,de,w),F=Math.min(F,ze)}else{const ze=ef(ie,u),We=ef(de,v);qd(W,F,w,d,h,ze[0],We[0]),qd(W,F,w,d,h,ze[0],We[1]),qd(W,F,w,d,h,ze[1],We[0]),qd(W,F,w,d,h,ze[1],We[1])}}return F}function OA(d){return d.type==="MultiPolygon"?d.coordinates.map(u=>({type:"Polygon",coordinates:u})):d.type==="MultiLineString"?d.coordinates.map(u=>({type:"LineString",coordinates:u})):d.type==="MultiPoint"?d.coordinates.map(u=>({type:"Point",coordinates:u})):[d]}class Jt{constructor(u,h){this.type=un,this.geojson=u,this.geometries=h}static parse(u,h){if(u.length!==2)return h.error(`'distance' expression requires exactly one argument, but found ${u.length-1} instead.`);if(Ns(u[1])){const v=u[1];if(v.type==="FeatureCollection")return new Jt(v,v.features.map(w=>OA(w.geometry)).flat());if(v.type==="Feature")return new Jt(v,OA(v.geometry));if("type"in v&&"coordinates"in v)return new Jt(v,OA(v))}return h.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(u){if(u.geometry()!=null&&u.canonicalID()!=null){if(u.geometryType()==="Point")return function(h,v){const w=h.geometry(),K=w.flat().map(X=>yh([X.x,X.y],h.canonical));if(w.length===0)return NaN;const F=new fu(K[0][1]);let W=1/0;for(const X of v){switch(X.type){case"Point":W=Math.min(W,Vd(K,!1,[X.coordinates],!1,F,W));break;case"LineString":W=Math.min(W,Vd(K,!1,X.coordinates,!0,F,W));break;case"Polygon":W=Math.min(W,bh(K,!1,X.coordinates,F,W))}if(W===0)return W}return W}(u,this.geometries);if(u.geometryType()==="LineString")return function(h,v){const w=h.geometry(),K=w.flat().map(X=>yh([X.x,X.y],h.canonical));if(w.length===0)return NaN;const F=new fu(K[0][1]);let W=1/0;for(const X of v){switch(X.type){case"Point":W=Math.min(W,Vd(K,!0,[X.coordinates],!1,F,W));break;case"LineString":W=Math.min(W,Vd(K,!0,X.coordinates,!0,F,W));break;case"Polygon":W=Math.min(W,bh(K,!0,X.coordinates,F,W))}if(W===0)return W}return W}(u,this.geometries);if(u.geometryType()==="Polygon")return function(h,v){const w=h.geometry();if(w.length===0||w[0].length===0)return NaN;const K=Nc(w,0).map(X=>X.map(ie=>ie.map(de=>yh([de.x,de.y],h.canonical)))),F=new fu(K[0][0][0][1]);let W=1/0;for(const X of v)for(const ie of K){switch(X.type){case"Point":W=Math.min(W,bh([X.coordinates],!1,ie,F,W));break;case"LineString":W=Math.min(W,bh(X.coordinates,!0,ie,F,W));break;case"Polygon":W=Math.min(W,Uf(ie,X.coordinates,F,W))}if(W===0)return W}return W}(u,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const In={"==":ca,"!=":Pa,">":Ws,"<":cu,">=":el,"<=":zd,array:As,at:Vi,boolean:As,case:Oe,coalesce:zr,collator:gl,format:du,image:jd,in:uo,"index-of":Ki,interpolate:pi,"interpolate-hcl":pi,"interpolate-lab":pi,length:cd,let:qr,literal:ea,match:ee,number:As,"number-format":Ad,object:As,slice:st,step:Er,string:As,"to-boolean":ml,"to-color":ml,"to-number":ml,"to-string":ml,var:Dl,within:ZA,distance:Jt};class an{constructor(u,h,v,w){this.name=u,this.type=h,this._evaluate=v,this.args=w}evaluate(u){return this._evaluate(u,this.args)}eachChild(u){this.args.forEach(u)}outputDefined(){return!1}static parse(u,h){const v=u[0],w=an.definitions[v];if(!w)return h.error(`Unknown expression "${v}". If you wanted a literal array, use ["literal", [...]].`,0);const K=Array.isArray(w)?w[0]:w.type,F=Array.isArray(w)?[[w[1],w[2]]]:w.overloads,W=F.filter(([ie])=>!Array.isArray(ie)||ie.length===u.length-1);let X=null;for(const[ie,de]of W){X=new zi(h.registry,Jo,h.path,null,h.scope);const _e=[];let Re=!1;for(let ze=1;ze<u.length;ze++){const We=u[ze],et=Array.isArray(ie)?ie[ze-1]:ie.type,At=X.parse(We,1+_e.length,et);if(!At){Re=!0;break}_e.push(At)}if(!Re)if(Array.isArray(ie)&&ie.length!==_e.length)X.error(`Expected ${ie.length} arguments, but found ${_e.length} instead.`);else{for(let ze=0;ze<_e.length;ze++){const We=Array.isArray(ie)?ie[ze]:ie.type,et=_e[ze];X.concat(ze+1).checkSubtype(We,et.type)}if(X.errors.length===0)return new an(v,K,de,_e)}}if(W.length===1)h.errors.push(...X.errors);else{const ie=(W.length?W:F).map(([_e])=>{return Re=_e,Array.isArray(Re)?`(${Re.map(Hi).join(", ")})`:`(${Hi(Re.type)}...)`;var Re}).join(" | "),de=[];for(let _e=1;_e<u.length;_e++){const Re=h.parse(u[_e],1+de.length);if(!Re)return null;de.push(Hi(Re.type))}h.error(`Expected arguments of type ${ie}, but found (${de.join(", ")}) instead.`)}return null}static register(u,h){an.definitions=h;for(const v in h)u[v]=an}}function Dr(d,[u,h,v,w]){u=u.evaluate(d),h=h.evaluate(d),v=v.evaluate(d);const K=w?w.evaluate(d):1,F=Au(u,h,v,K);if(F)throw new Qo(F);return new xi(u/255,h/255,v/255,K,!1)}function Ri(d,u){return d in u}function Po(d,u){const h=u[d];return h===void 0?null:h}function Bs(d){return{type:d}}function Jo(d){if(d instanceof Dl)return Jo(d.boundExpression);if(d instanceof an&&d.name==="error"||d instanceof gl||d instanceof ZA||d instanceof Jt)return!1;const u=d instanceof ml||d instanceof As;let h=!0;return d.eachChild(v=>{h=u?h&&Jo(v):h&&v instanceof ea}),!!h&&JA(d)&&tu(d,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function JA(d){if(d instanceof an&&(d.name==="get"&&d.args.length===1||d.name==="feature-state"||d.name==="has"&&d.args.length===1||d.name==="properties"||d.name==="geometry-type"||d.name==="id"||/^filter-/.test(d.name))||d instanceof ZA||d instanceof Jt)return!1;let u=!0;return d.eachChild(h=>{u&&!JA(h)&&(u=!1)}),u}function xh(d){if(d instanceof an&&d.name==="feature-state")return!1;let u=!0;return d.eachChild(h=>{u&&!xh(h)&&(u=!1)}),u}function tu(d,u){if(d instanceof an&&u.indexOf(d.name)>=0)return!1;let h=!0;return d.eachChild(v=>{h&&!tu(v,u)&&(h=!1)}),h}function ec(d){return{result:"success",value:d}}function mu(d){return{result:"error",value:d}}function Ka(d){return d["property-type"]==="data-driven"||d["property-type"]==="cross-faded-data-driven"}function AA(d){return!!d.expression&&d.expression.parameters.indexOf("zoom")>-1}function xc(d){return!!d.expression&&d.expression.interpolated}function Yr(d){return d instanceof Number?"number":d instanceof String?"string":d instanceof Boolean?"boolean":Array.isArray(d)?"array":d===null?"null":typeof d}function tc(d){return typeof d=="object"&&d!==null&&!Array.isArray(d)}function $d(d){return d}function cA(d,u){const h=u.type==="color",v=d.stops&&typeof d.stops[0][0]=="object",w=v||!(v||d.property!==void 0),K=d.type||(xc(u)?"exponential":"interval");if(h||u.type==="padding"){const de=h?xi.parse:$o.parse;(d=Dn({},d)).stops&&(d.stops=d.stops.map(_e=>[_e[0],de(_e[1])])),d.default=de(d.default?d.default:u.default)}if(d.colorSpace&&(F=d.colorSpace)!=="rgb"&&F!=="hcl"&&F!=="lab")throw new Error(`Unknown color space: "${d.colorSpace}"`);var F;let W,X,ie;if(K==="exponential")W=Wu;else if(K==="interval")W=Mc;else if(K==="categorical"){W=Ll,X=Object.create(null);for(const de of d.stops)X[de[0]]=de[1];ie=typeof d.stops[0][0]}else{if(K!=="identity")throw new Error(`Unknown function type "${K}"`);W=Gu}if(v){const de={},_e=[];for(let We=0;We<d.stops.length;We++){const et=d.stops[We],At=et[0].zoom;de[At]===void 0&&(de[At]={zoom:At,type:d.type,property:d.property,default:d.default,stops:[]},_e.push(At)),de[At].stops.push([et[0].value,et[1]])}const Re=[];for(const We of _e)Re.push([de[We].zoom,cA(de[We],u)]);const ze={name:"linear"};return{kind:"composite",interpolationType:ze,interpolationFactor:pi.interpolationFactor.bind(void 0,ze),zoomStops:Re.map(We=>We[0]),evaluate:({zoom:We},et)=>Wu({stops:Re,base:d.base},u,We).evaluate(We,et)}}if(w){const de=K==="exponential"?{name:"exponential",base:d.base!==void 0?d.base:1}:null;return{kind:"camera",interpolationType:de,interpolationFactor:pi.interpolationFactor.bind(void 0,de),zoomStops:d.stops.map(_e=>_e[0]),evaluate:({zoom:_e})=>W(d,u,_e,X,ie)}}return{kind:"source",evaluate(de,_e){const Re=_e&&_e.properties?_e.properties[d.property]:void 0;return Re===void 0?Fl(d.default,u.default):W(d,u,Re,X,ie)}}}function Fl(d,u,h){return d!==void 0?d:u!==void 0?u:h!==void 0?h:void 0}function Ll(d,u,h,v,w){return Fl(typeof h===w?v[h]:void 0,d.default,u.default)}function Mc(d,u,h){if(Yr(h)!=="number")return Fl(d.default,u.default);const v=d.stops.length;if(v===1||h<=d.stops[0][0])return d.stops[0][1];if(h>=d.stops[v-1][0])return d.stops[v-1][1];const w=Vt(d.stops.map(K=>K[0]),h);return d.stops[w][1]}function Wu(d,u,h){const v=d.base!==void 0?d.base:1;if(Yr(h)!=="number")return Fl(d.default,u.default);const w=d.stops.length;if(w===1||h<=d.stops[0][0])return d.stops[0][1];if(h>=d.stops[w-1][0])return d.stops[w-1][1];const K=Vt(d.stops.map(de=>de[0]),h),F=function(de,_e,Re,ze){const We=ze-Re,et=de-Re;return We===0?0:_e===1?et/We:(Math.pow(_e,et)-1)/(Math.pow(_e,We)-1)}(h,v,d.stops[K][0],d.stops[K+1][0]),W=d.stops[K][1],X=d.stops[K+1][1],ie=mi[u.type]||$d;return typeof W.evaluate=="function"?{evaluate(...de){const _e=W.evaluate.apply(void 0,de),Re=X.evaluate.apply(void 0,de);if(_e!==void 0&&Re!==void 0)return ie(_e,Re,F,d.colorSpace)}}:ie(W,X,F,d.colorSpace)}function Gu(d,u,h){switch(u.type){case"color":h=xi.parse(h);break;case"formatted":h=to.fromString(h.toString());break;case"resolvedImage":h=Xs.fromString(h.toString());break;case"padding":h=$o.parse(h);break;default:Yr(h)===u.type||u.type==="enum"&&u.values[h]||(h=void 0)}return Fl(h,d.default,u.default)}an.register(In,{error:[{kind:"error"},[er],(d,[u])=>{throw new Qo(u.evaluate(d))}],typeof:[er,[Or],(d,[u])=>Hi(Oi(u.evaluate(d)))],"to-rgba":[ko(un,4),[Sr],(d,[u])=>{const[h,v,w,K]=u.evaluate(d).rgb;return[255*h,255*v,255*w,K]}],rgb:[Sr,[un,un,un],Dr],rgba:[Sr,[un,un,un,un],Dr],has:{type:fr,overloads:[[[er],(d,[u])=>Ri(u.evaluate(d),d.properties())],[[er,ri],(d,[u,h])=>Ri(u.evaluate(d),h.evaluate(d))]]},get:{type:Or,overloads:[[[er],(d,[u])=>Po(u.evaluate(d),d.properties())],[[er,ri],(d,[u,h])=>Po(u.evaluate(d),h.evaluate(d))]]},"feature-state":[Or,[er],(d,[u])=>Po(u.evaluate(d),d.featureState||{})],properties:[ri,[],d=>d.properties()],"geometry-type":[er,[],d=>d.geometryType()],id:[Or,[],d=>d.id()],zoom:[un,[],d=>d.globals.zoom],"heatmap-density":[un,[],d=>d.globals.heatmapDensity||0],"line-progress":[un,[],d=>d.globals.lineProgress||0],accumulated:[Or,[],d=>d.globals.accumulated===void 0?null:d.globals.accumulated],"+":[un,Bs(un),(d,u)=>{let h=0;for(const v of u)h+=v.evaluate(d);return h}],"*":[un,Bs(un),(d,u)=>{let h=1;for(const v of u)h*=v.evaluate(d);return h}],"-":{type:un,overloads:[[[un,un],(d,[u,h])=>u.evaluate(d)-h.evaluate(d)],[[un],(d,[u])=>-u.evaluate(d)]]},"/":[un,[un,un],(d,[u,h])=>u.evaluate(d)/h.evaluate(d)],"%":[un,[un,un],(d,[u,h])=>u.evaluate(d)%h.evaluate(d)],ln2:[un,[],()=>Math.LN2],pi:[un,[],()=>Math.PI],e:[un,[],()=>Math.E],"^":[un,[un,un],(d,[u,h])=>Math.pow(u.evaluate(d),h.evaluate(d))],sqrt:[un,[un],(d,[u])=>Math.sqrt(u.evaluate(d))],log10:[un,[un],(d,[u])=>Math.log(u.evaluate(d))/Math.LN10],ln:[un,[un],(d,[u])=>Math.log(u.evaluate(d))],log2:[un,[un],(d,[u])=>Math.log(u.evaluate(d))/Math.LN2],sin:[un,[un],(d,[u])=>Math.sin(u.evaluate(d))],cos:[un,[un],(d,[u])=>Math.cos(u.evaluate(d))],tan:[un,[un],(d,[u])=>Math.tan(u.evaluate(d))],asin:[un,[un],(d,[u])=>Math.asin(u.evaluate(d))],acos:[un,[un],(d,[u])=>Math.acos(u.evaluate(d))],atan:[un,[un],(d,[u])=>Math.atan(u.evaluate(d))],min:[un,Bs(un),(d,u)=>Math.min(...u.map(h=>h.evaluate(d)))],max:[un,Bs(un),(d,u)=>Math.max(...u.map(h=>h.evaluate(d)))],abs:[un,[un],(d,[u])=>Math.abs(u.evaluate(d))],round:[un,[un],(d,[u])=>{const h=u.evaluate(d);return h<0?-Math.round(-h):Math.round(h)}],floor:[un,[un],(d,[u])=>Math.floor(u.evaluate(d))],ceil:[un,[un],(d,[u])=>Math.ceil(u.evaluate(d))],"filter-==":[fr,[er,Or],(d,[u,h])=>d.properties()[u.value]===h.value],"filter-id-==":[fr,[Or],(d,[u])=>d.id()===u.value],"filter-type-==":[fr,[er],(d,[u])=>d.geometryType()===u.value],"filter-<":[fr,[er,Or],(d,[u,h])=>{const v=d.properties()[u.value],w=h.value;return typeof v==typeof w&&v<w}],"filter-id-<":[fr,[Or],(d,[u])=>{const h=d.id(),v=u.value;return typeof h==typeof v&&h<v}],"filter->":[fr,[er,Or],(d,[u,h])=>{const v=d.properties()[u.value],w=h.value;return typeof v==typeof w&&v>w}],"filter-id->":[fr,[Or],(d,[u])=>{const h=d.id(),v=u.value;return typeof h==typeof v&&h>v}],"filter-<=":[fr,[er,Or],(d,[u,h])=>{const v=d.properties()[u.value],w=h.value;return typeof v==typeof w&&v<=w}],"filter-id-<=":[fr,[Or],(d,[u])=>{const h=d.id(),v=u.value;return typeof h==typeof v&&h<=v}],"filter->=":[fr,[er,Or],(d,[u,h])=>{const v=d.properties()[u.value],w=h.value;return typeof v==typeof w&&v>=w}],"filter-id->=":[fr,[Or],(d,[u])=>{const h=d.id(),v=u.value;return typeof h==typeof v&&h>=v}],"filter-has":[fr,[Or],(d,[u])=>u.value in d.properties()],"filter-has-id":[fr,[],d=>d.id()!==null&&d.id()!==void 0],"filter-type-in":[fr,[ko(er)],(d,[u])=>u.value.indexOf(d.geometryType())>=0],"filter-id-in":[fr,[ko(Or)],(d,[u])=>u.value.indexOf(d.id())>=0],"filter-in-small":[fr,[er,ko(Or)],(d,[u,h])=>h.value.indexOf(d.properties()[u.value])>=0],"filter-in-large":[fr,[er,ko(Or)],(d,[u,h])=>function(v,w,K,F){for(;K<=F;){const W=K+F>>1;if(w[W]===v)return!0;w[W]>v?F=W-1:K=W+1}return!1}(d.properties()[u.value],h.value,0,h.value.length-1)],all:{type:fr,overloads:[[[fr,fr],(d,[u,h])=>u.evaluate(d)&&h.evaluate(d)],[Bs(fr),(d,u)=>{for(const h of u)if(!h.evaluate(d))return!1;return!0}]]},any:{type:fr,overloads:[[[fr,fr],(d,[u,h])=>u.evaluate(d)||h.evaluate(d)],[Bs(fr),(d,u)=>{for(const h of u)if(h.evaluate(d))return!0;return!1}]]},"!":[fr,[fr],(d,[u])=>!u.evaluate(d)],"is-supported-script":[fr,[er],(d,[u])=>{const h=d.globals&&d.globals.isSupportedScript;return!h||h(u.evaluate(d))}],upcase:[er,[er],(d,[u])=>u.evaluate(d).toUpperCase()],downcase:[er,[er],(d,[u])=>u.evaluate(d).toLowerCase()],concat:[er,Bs(Or),(d,u)=>u.map(h=>is(h.evaluate(d))).join("")],"resolved-locale":[er,[ka],(d,[u])=>u.evaluate(d).resolvedLocale()]});class gd{constructor(u,h){var v;this.expression=u,this._warningHistory={},this._evaluator=new Uu,this._defaultValue=h?(v=h).type==="color"&&tc(v.default)?new xi(0,0,0,0):v.type==="color"?xi.parse(v.default)||null:v.type==="padding"?$o.parse(v.default)||null:v.type==="variableAnchorOffsetCollection"?Es.parse(v.default)||null:v.type==="projectionDefinition"?Js.parse(v.default)||null:v.default===void 0?null:v.default:null,this._enumValues=h&&h.type==="enum"?h.values:null}evaluateWithoutErrorHandling(u,h,v,w,K,F){return this._evaluator.globals=u,this._evaluator.feature=h,this._evaluator.featureState=v,this._evaluator.canonical=w,this._evaluator.availableImages=K||null,this._evaluator.formattedSection=F,this.expression.evaluate(this._evaluator)}evaluate(u,h,v,w,K,F){this._evaluator.globals=u,this._evaluator.feature=h||null,this._evaluator.featureState=v||null,this._evaluator.canonical=w,this._evaluator.availableImages=K||null,this._evaluator.formattedSection=F||null;try{const W=this.expression.evaluate(this._evaluator);if(W==null||typeof W=="number"&&W!=W)return this._defaultValue;if(this._enumValues&&!(W in this._enumValues))throw new Qo(`Expected value to be one of ${Object.keys(this._enumValues).map(X=>JSON.stringify(X)).join(", ")}, but found ${JSON.stringify(W)} instead.`);return W}catch(W){return this._warningHistory[W.message]||(this._warningHistory[W.message]=!0,typeof console<"u"&&console.warn(W.message)),this._defaultValue}}}function yd(d){return Array.isArray(d)&&d.length>0&&typeof d[0]=="string"&&d[0]in In}function Ca(d,u){const h=new zi(In,Jo,[],u?function(w){const K={color:Sr,string:er,number:un,enum:er,boolean:fr,formatted:Wi,padding:Bi,projectionDefinition:Ur,resolvedImage:eo,variableAnchorOffsetCollection:ws};return w.type==="array"?ko(K[w.value]||Or,w.length):K[w.type]}(u):void 0),v=h.parse(d,void 0,void 0,void 0,u&&u.type==="string"?{typeAnnotation:"coerce"}:void 0);return v?ec(new gd(v,u)):mu(h.errors)}class Gc{constructor(u,h){this.kind=u,this._styleExpression=h,this.isStateDependent=u!=="constant"&&!xh(h.expression)}evaluateWithoutErrorHandling(u,h,v,w,K,F){return this._styleExpression.evaluateWithoutErrorHandling(u,h,v,w,K,F)}evaluate(u,h,v,w,K,F){return this._styleExpression.evaluate(u,h,v,w,K,F)}}class Qc{constructor(u,h,v,w){this.kind=u,this.zoomStops=v,this._styleExpression=h,this.isStateDependent=u!=="camera"&&!xh(h.expression),this.interpolationType=w}evaluateWithoutErrorHandling(u,h,v,w,K,F){return this._styleExpression.evaluateWithoutErrorHandling(u,h,v,w,K,F)}evaluate(u,h,v,w,K,F){return this._styleExpression.evaluate(u,h,v,w,K,F)}interpolationFactor(u,h,v){return this.interpolationType?pi.interpolationFactor(this.interpolationType,u,h,v):0}}function Yc(d,u){const h=Ca(d,u);if(h.result==="error")return h;const v=h.value.expression,w=JA(v);if(!w&&!Ka(u))return mu([new rr("","data expressions not supported")]);const K=tu(v,["zoom"]);if(!K&&!AA(u))return mu([new rr("","zoom expressions not supported")]);const F=gu(v);return F||K?F instanceof rr?mu([F]):F instanceof pi&&!xc(u)?mu([new rr("",'"interpolate" expressions cannot be used with this property')]):ec(F?new Qc(w?"camera":"composite",h.value,F.labels,F instanceof pi?F.interpolation:void 0):new Gc(w?"constant":"source",h.value)):mu([new rr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Mh{constructor(u,h){this._parameters=u,this._specification=h,Dn(this,cA(this._parameters,this._specification))}static deserialize(u){return new Mh(u._parameters,u._specification)}static serialize(u){return{_parameters:u._parameters,_specification:u._specification}}}function gu(d){let u=null;if(d instanceof qr)u=gu(d.result);else if(d instanceof zr){for(const h of d.args)if(u=gu(h),u)break}else(d instanceof Er||d instanceof pi)&&d.input instanceof an&&d.input.name==="zoom"&&(u=d);return u instanceof rr||d.eachChild(h=>{const v=gu(h);v instanceof rr?u=v:!u&&v?u=new rr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):u&&v&&u!==v&&(u=new rr("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),u}function nc(d){if(d===!0||d===!1)return!0;if(!Array.isArray(d)||d.length===0)return!1;switch(d[0]){case"has":return d.length>=2&&d[1]!=="$id"&&d[1]!=="$type";case"in":return d.length>=3&&(typeof d[1]!="string"||Array.isArray(d[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return d.length!==3||Array.isArray(d[1])||Array.isArray(d[2]);case"any":case"all":for(const u of d.slice(1))if(!nc(u)&&typeof u!="boolean")return!1;return!0;default:return!0}}const qc={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function vd(d){if(d==null)return{filter:()=>!0,needGeometry:!1};nc(d)||(d=dA(d));const u=Ca(d,qc);if(u.result==="error")throw new Error(u.value.map(h=>`${h.key}: ${h.message}`).join(", "));return{filter:(h,v,w)=>u.value.evaluate(h,v,{},w),needGeometry:Cd(d)}}function cs(d,u){return d<u?-1:d>u?1:0}function Cd(d){if(!Array.isArray(d))return!1;if(d[0]==="within"||d[0]==="distance")return!0;for(let u=1;u<d.length;u++)if(Cd(d[u]))return!0;return!1}function dA(d){if(!d)return!0;const u=d[0];return d.length<=1?u!=="any":u==="=="?yu(d[1],d[2],"=="):u==="!="?IA(yu(d[1],d[2],"==")):u==="<"||u===">"||u==="<="||u===">="?yu(d[1],d[2],u):u==="any"?(h=d.slice(1),["any"].concat(h.map(dA))):u==="all"?["all"].concat(d.slice(1).map(dA)):u==="none"?["all"].concat(d.slice(1).map(dA).map(IA)):u==="in"?Hd(d[1],d.slice(2)):u==="!in"?IA(Hd(d[1],d.slice(2))):u==="has"?wh(d[1]):u!=="!has"||IA(wh(d[1]));var h}function yu(d,u,h){switch(d){case"$type":return[`filter-type-${h}`,u];case"$id":return[`filter-id-${h}`,u];default:return[`filter-${h}`,d,u]}}function Hd(d,u){if(u.length===0)return!1;switch(d){case"$type":return["filter-type-in",["literal",u]];case"$id":return["filter-id-in",["literal",u]];default:return u.length>200&&!u.some(h=>typeof h!=typeof u[0])?["filter-in-large",d,["literal",u.sort(cs)]]:["filter-in-small",d,["literal",u]]}}function wh(d){switch(d){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",d]}}function IA(d){return["!",d]}function rc(d){const u=typeof d;if(u==="number"||u==="boolean"||u==="string"||d==null)return JSON.stringify(d);if(Array.isArray(d)){let w="[";for(const K of d)w+=`${rc(K)},`;return`${w}]`}const h=Object.keys(d).sort();let v="{";for(let w=0;w<h.length;w++)v+=`${JSON.stringify(h[w])}:${rc(d[h[w]])},`;return`${v}}`}function ic(d){let u="";for(const h of ve)u+=`/${rc(d[h])}`;return u}function ms(d){const u=d.value;return u?[new jt(d.key,u,"constants have been deprecated as of v8")]:[]}function ao(d){return d instanceof Number||d instanceof String||d instanceof Boolean?d.valueOf():d}function _d(d){if(Array.isArray(d))return d.map(_d);if(d instanceof Object&&!(d instanceof Number||d instanceof String||d instanceof Boolean)){const u={};for(const h in d)u[h]=_d(d[h]);return u}return ao(d)}function Ul(d){const u=d.key,h=d.value,v=d.valueSpec||{},w=d.objectElementValidators||{},K=d.style,F=d.styleSpec,W=d.validateSpec;let X=[];const ie=Yr(h);if(ie!=="object")return[new jt(u,h,`object expected, ${ie} found`)];for(const de in h){const _e=de.split(".")[0],Re=v[_e]||v["*"];let ze;if(w[_e])ze=w[_e];else if(v[_e])ze=W;else if(w["*"])ze=w["*"];else{if(!v["*"]){X.push(new jt(u,h[de],`unknown property "${de}"`));continue}ze=W}X=X.concat(ze({key:(u&&`${u}.`)+de,value:h[de],valueSpec:Re,style:K,styleSpec:F,object:h,objectKey:de,validateSpec:W},h))}for(const de in v)w[de]||v[de].required&&v[de].default===void 0&&h[de]===void 0&&X.push(new jt(u,h,`missing required property "${de}"`));return X}function Vc(d){const u=d.value,h=d.valueSpec,v=d.style,w=d.styleSpec,K=d.key,F=d.arrayElementValidator||d.validateSpec;if(Yr(u)!=="array")return[new jt(K,u,`array expected, ${Yr(u)} found`)];if(h.length&&u.length!==h.length)return[new jt(K,u,`array length ${h.length} expected, length ${u.length} found`)];if(h["min-length"]&&u.length<h["min-length"])return[new jt(K,u,`array length at least ${h["min-length"]} expected, length ${u.length} found`)];let W={type:h.value,values:h.values};w.$version<7&&(W.function=h.function),Yr(h.value)==="object"&&(W=h.value);let X=[];for(let ie=0;ie<u.length;ie++)X=X.concat(F({array:u,arrayIndex:ie,value:u[ie],valueSpec:W,validateSpec:d.validateSpec,style:v,styleSpec:w,key:`${K}[${ie}]`}));return X}function oc(d){const u=d.key,h=d.value,v=d.valueSpec;let w=Yr(h);return w==="number"&&h!=h&&(w="NaN"),w!=="number"?[new jt(u,h,`number expected, ${w} found`)]:"minimum"in v&&h<v.minimum?[new jt(u,h,`${h} is less than the minimum value ${v.minimum}`)]:"maximum"in v&&h>v.maximum?[new jt(u,h,`${h} is greater than the maximum value ${v.maximum}`)]:[]}function bd(d){const u=d.valueSpec,h=ao(d.value.type);let v,w,K,F={};const W=h!=="categorical"&&d.value.property===void 0,X=!W,ie=Yr(d.value.stops)==="array"&&Yr(d.value.stops[0])==="array"&&Yr(d.value.stops[0][0])==="object",de=Ul({key:d.key,value:d.value,valueSpec:d.styleSpec.function,validateSpec:d.validateSpec,style:d.style,styleSpec:d.styleSpec,objectElementValidators:{stops:function(ze){if(h==="identity")return[new jt(ze.key,ze.value,'identity function may not have a "stops" property')];let We=[];const et=ze.value;return We=We.concat(Vc({key:ze.key,value:et,valueSpec:ze.valueSpec,validateSpec:ze.validateSpec,style:ze.style,styleSpec:ze.styleSpec,arrayElementValidator:_e})),Yr(et)==="array"&&et.length===0&&We.push(new jt(ze.key,et,"array must have at least one stop")),We},default:function(ze){return ze.validateSpec({key:ze.key,value:ze.value,valueSpec:u,validateSpec:ze.validateSpec,style:ze.style,styleSpec:ze.styleSpec})}}});return h==="identity"&&W&&de.push(new jt(d.key,d.value,'missing required property "property"')),h==="identity"||d.value.stops||de.push(new jt(d.key,d.value,'missing required property "stops"')),h==="exponential"&&d.valueSpec.expression&&!xc(d.valueSpec)&&de.push(new jt(d.key,d.value,"exponential functions not supported")),d.styleSpec.$version>=8&&(X&&!Ka(d.valueSpec)?de.push(new jt(d.key,d.value,"property functions not supported")):W&&!AA(d.valueSpec)&&de.push(new jt(d.key,d.value,"zoom functions not supported"))),h!=="categorical"&&!ie||d.value.property!==void 0||de.push(new jt(d.key,d.value,'"property" property is required')),de;function _e(ze){let We=[];const et=ze.value,At=ze.key;if(Yr(et)!=="array")return[new jt(At,et,`array expected, ${Yr(et)} found`)];if(et.length!==2)return[new jt(At,et,`array length 2 expected, length ${et.length} found`)];if(ie){if(Yr(et[0])!=="object")return[new jt(At,et,`object expected, ${Yr(et[0])} found`)];if(et[0].zoom===void 0)return[new jt(At,et,"object stop key must have zoom")];if(et[0].value===void 0)return[new jt(At,et,"object stop key must have value")];if(K&&K>ao(et[0].zoom))return[new jt(At,et[0].zoom,"stop zoom values must appear in ascending order")];ao(et[0].zoom)!==K&&(K=ao(et[0].zoom),w=void 0,F={}),We=We.concat(Ul({key:`${At}[0]`,value:et[0],valueSpec:{zoom:{}},validateSpec:ze.validateSpec,style:ze.style,styleSpec:ze.styleSpec,objectElementValidators:{zoom:oc,value:Re}}))}else We=We.concat(Re({key:`${At}[0]`,value:et[0],validateSpec:ze.validateSpec,style:ze.style,styleSpec:ze.styleSpec},et));return yd(_d(et[1]))?We.concat([new jt(`${At}[1]`,et[1],"expressions are not allowed in function stops.")]):We.concat(ze.validateSpec({key:`${At}[1]`,value:et[1],valueSpec:u,validateSpec:ze.validateSpec,style:ze.style,styleSpec:ze.styleSpec}))}function Re(ze,We){const et=Yr(ze.value),At=ao(ze.value),Ct=ze.value!==null?ze.value:We;if(v){if(et!==v)return[new jt(ze.key,Ct,`${et} stop domain type must match previous stop domain type ${v}`)]}else v=et;if(et!=="number"&&et!=="string"&&et!=="boolean")return[new jt(ze.key,Ct,"stop domain value must be a number, string, or boolean")];if(et!=="number"&&h!=="categorical"){let Nt=`number expected, ${et} found`;return Ka(u)&&h===void 0&&(Nt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new jt(ze.key,Ct,Nt)]}return h!=="categorical"||et!=="number"||isFinite(At)&&Math.floor(At)===At?h!=="categorical"&&et==="number"&&w!==void 0&&At<w?[new jt(ze.key,Ct,"stop domain values must appear in ascending order")]:(w=At,h==="categorical"&&At in F?[new jt(ze.key,Ct,"stop domain values must be unique")]:(F[At]=!0,[])):[new jt(ze.key,Ct,`integer expected, found ${At}`)]}}function nl(d){const u=(d.expressionContext==="property"?Yc:Ca)(_d(d.value),d.valueSpec);if(u.result==="error")return u.value.map(v=>new jt(`${d.key}${v.key}`,d.value,v.message));const h=u.value.expression||u.value._styleExpression.expression;if(d.expressionContext==="property"&&d.propertyKey==="text-font"&&!h.outputDefined())return[new jt(d.key,d.value,`Invalid data expression for "${d.propertyKey}". Output values must be contained as literals within the expression.`)];if(d.expressionContext==="property"&&d.propertyType==="layout"&&!xh(h))return[new jt(d.key,d.value,'"feature-state" data expressions are not supported with layout properties.')];if(d.expressionContext==="filter"&&!xh(h))return[new jt(d.key,d.value,'"feature-state" data expressions are not supported with filters.')];if(d.expressionContext&&d.expressionContext.indexOf("cluster")===0){if(!tu(h,["zoom","feature-state"]))return[new jt(d.key,d.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(d.expressionContext==="cluster-initial"&&!JA(h))return[new jt(d.key,d.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function vu(d){const u=d.key,h=d.value,v=d.valueSpec,w=[];return Array.isArray(v.values)?v.values.indexOf(ao(h))===-1&&w.push(new jt(u,h,`expected one of [${v.values.join(", ")}], ${JSON.stringify(h)} found`)):Object.keys(v.values).indexOf(ao(h))===-1&&w.push(new jt(u,h,`expected one of [${Object.keys(v.values).join(", ")}], ${JSON.stringify(h)} found`)),w}function rl(d){return nc(_d(d.value))?nl(Dn({},d,{expressionContext:"filter",valueSpec:{value:"boolean"}})):sc(d)}function sc(d){const u=d.value,h=d.key;if(Yr(u)!=="array")return[new jt(h,u,`array expected, ${Yr(u)} found`)];const v=d.styleSpec;let w,K=[];if(u.length<1)return[new jt(h,u,"filter array must have at least 1 element")];switch(K=K.concat(vu({key:`${h}[0]`,value:u[0],valueSpec:v.filter_operator,style:d.style,styleSpec:d.styleSpec})),ao(u[0])){case"<":case"<=":case">":case">=":u.length>=2&&ao(u[1])==="$type"&&K.push(new jt(h,u,`"$type" cannot be use with operator "${u[0]}"`));case"==":case"!=":u.length!==3&&K.push(new jt(h,u,`filter array for operator "${u[0]}" must have 3 elements`));case"in":case"!in":u.length>=2&&(w=Yr(u[1]),w!=="string"&&K.push(new jt(`${h}[1]`,u[1],`string expected, ${w} found`)));for(let F=2;F<u.length;F++)w=Yr(u[F]),ao(u[1])==="$type"?K=K.concat(vu({key:`${h}[${F}]`,value:u[F],valueSpec:v.geometry_type,style:d.style,styleSpec:d.styleSpec})):w!=="string"&&w!=="number"&&w!=="boolean"&&K.push(new jt(`${h}[${F}]`,u[F],`string, number, or boolean expected, ${w} found`));break;case"any":case"all":case"none":for(let F=1;F<u.length;F++)K=K.concat(sc({key:`${h}[${F}]`,value:u[F],style:d.style,styleSpec:d.styleSpec}));break;case"has":case"!has":w=Yr(u[1]),u.length!==2?K.push(new jt(h,u,`filter array for "${u[0]}" operator must have 2 elements`)):w!=="string"&&K.push(new jt(`${h}[1]`,u[1],`string expected, ${w} found`))}return K}function Qu(d,u){const h=d.key,v=d.validateSpec,w=d.style,K=d.styleSpec,F=d.value,W=d.objectKey,X=K[`${u}_${d.layerType}`];if(!X)return[];const ie=W.match(/^(.*)-transition$/);if(u==="paint"&&ie&&X[ie[1]]&&X[ie[1]].transition)return v({key:h,value:F,valueSpec:K.transition,style:w,styleSpec:K});const de=d.valueSpec||X[W];if(!de)return[new jt(h,F,`unknown property "${W}"`)];let _e;if(Yr(F)==="string"&&Ka(de)&&!de.tokens&&(_e=/^{([^}]+)}$/.exec(F)))return[new jt(h,F,`"${W}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(_e[1])} }\`.`)];const Re=[];return d.layerType==="symbol"&&(W==="text-field"&&w&&!w.glyphs&&Re.push(new jt(h,F,'use of "text-field" requires a style "glyphs" property')),W==="text-font"&&tc(_d(F))&&ao(F.type)==="identity"&&Re.push(new jt(h,F,'"text-font" does not support identity functions'))),Re.concat(v({key:d.key,value:F,valueSpec:de,style:w,styleSpec:K,expressionContext:"property",propertyType:u,propertyKey:W}))}function xd(d){return Qu(d,"paint")}function $c(d){return Qu(d,"layout")}function Zd(d){let u=[];const h=d.value,v=d.key,w=d.style,K=d.styleSpec;h.type||h.ref||u.push(new jt(v,h,'either "type" or "ref" is required'));let F=ao(h.type);const W=ao(h.ref);if(h.id){const X=ao(h.id);for(let ie=0;ie<d.arrayIndex;ie++){const de=w.layers[ie];ao(de.id)===X&&u.push(new jt(v,h.id,`duplicate layer id "${h.id}", previously used at line ${de.id.__line__}`))}}if("ref"in h){let X;["type","source","source-layer","filter","layout"].forEach(ie=>{ie in h&&u.push(new jt(v,h[ie],`"${ie}" is prohibited for ref layers`))}),w.layers.forEach(ie=>{ao(ie.id)===W&&(X=ie)}),X?X.ref?u.push(new jt(v,h.ref,"ref cannot reference another ref layer")):F=ao(X.type):u.push(new jt(v,h.ref,`ref layer "${W}" not found`))}else if(F!=="background")if(h.source){const X=w.sources&&w.sources[h.source],ie=X&&ao(X.type);X?ie==="vector"&&F==="raster"?u.push(new jt(v,h.source,`layer "${h.id}" requires a raster source`)):ie!=="raster-dem"&&F==="hillshade"?u.push(new jt(v,h.source,`layer "${h.id}" requires a raster-dem source`)):ie==="raster"&&F!=="raster"?u.push(new jt(v,h.source,`layer "${h.id}" requires a vector source`)):ie!=="vector"||h["source-layer"]?ie==="raster-dem"&&F!=="hillshade"?u.push(new jt(v,h.source,"raster-dem source can only be used with layer type 'hillshade'.")):F!=="line"||!h.paint||!h.paint["line-gradient"]||ie==="geojson"&&X.lineMetrics||u.push(new jt(v,h,`layer "${h.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):u.push(new jt(v,h,`layer "${h.id}" must specify a "source-layer"`)):u.push(new jt(v,h.source,`source "${h.source}" not found`))}else u.push(new jt(v,h,'missing required property "source"'));return u=u.concat(Ul({key:v,value:h,valueSpec:K.layer,style:d.style,styleSpec:d.styleSpec,validateSpec:d.validateSpec,objectElementValidators:{"*":()=>[],type:()=>d.validateSpec({key:`${v}.type`,value:h.type,valueSpec:K.layer.type,style:d.style,styleSpec:d.styleSpec,validateSpec:d.validateSpec,object:h,objectKey:"type"}),filter:rl,layout:X=>Ul({layer:h,key:X.key,value:X.value,style:X.style,styleSpec:X.styleSpec,validateSpec:X.validateSpec,objectElementValidators:{"*":ie=>$c(Dn({layerType:F},ie))}}),paint:X=>Ul({layer:h,key:X.key,value:X.value,style:X.style,styleSpec:X.styleSpec,validateSpec:X.validateSpec,objectElementValidators:{"*":ie=>xd(Dn({layerType:F},ie))}})}})),u}function nu(d){const u=d.value,h=d.key,v=Yr(u);return v!=="string"?[new jt(h,u,`string expected, ${v} found`)]:[]}const Yu={promoteId:function({key:d,value:u}){if(Yr(u)==="string")return nu({key:d,value:u});{const h=[];for(const v in u)h.push(...nu({key:`${d}.${v}`,value:u[v]}));return h}}};function qu(d){const u=d.value,h=d.key,v=d.styleSpec,w=d.style,K=d.validateSpec;if(!u.type)return[new jt(h,u,'"type" is required')];const F=ao(u.type);let W;switch(F){case"vector":case"raster":return W=Ul({key:h,value:u,valueSpec:v[`source_${F.replace("-","_")}`],style:d.style,styleSpec:v,objectElementValidators:Yu,validateSpec:K}),W;case"raster-dem":return W=function(X){var ie;const de=(ie=X.sourceName)!==null&&ie!==void 0?ie:"",_e=X.value,Re=X.styleSpec,ze=Re.source_raster_dem,We=X.style;let et=[];const At=Yr(_e);if(_e===void 0)return et;if(At!=="object")return et.push(new jt("source_raster_dem",_e,`object expected, ${At} found`)),et;const Ct=ao(_e.encoding)==="custom",Nt=["redFactor","greenFactor","blueFactor","baseShift"],St=X.value.encoding?`"${X.value.encoding}"`:"Default";for(const Le in _e)!Ct&&Nt.includes(Le)?et.push(new jt(Le,_e[Le],`In "${de}": "${Le}" is only valid when "encoding" is set to "custom". ${St} encoding found`)):ze[Le]?et=et.concat(X.validateSpec({key:Le,value:_e[Le],valueSpec:ze[Le],validateSpec:X.validateSpec,style:We,styleSpec:Re})):et.push(new jt(Le,_e[Le],`unknown property "${Le}"`));return et}({sourceName:h,value:u,style:d.style,styleSpec:v,validateSpec:K}),W;case"geojson":if(W=Ul({key:h,value:u,valueSpec:v.source_geojson,style:w,styleSpec:v,validateSpec:K,objectElementValidators:Yu}),u.cluster)for(const X in u.clusterProperties){const[ie,de]=u.clusterProperties[X],_e=typeof ie=="string"?[ie,["accumulated"],["get",X]]:ie;W.push(...nl({key:`${h}.${X}.map`,value:de,expressionContext:"cluster-map"})),W.push(...nl({key:`${h}.${X}.reduce`,value:_e,expressionContext:"cluster-reduce"}))}return W;case"video":return Ul({key:h,value:u,valueSpec:v.source_video,style:w,validateSpec:K,styleSpec:v});case"image":return Ul({key:h,value:u,valueSpec:v.source_image,style:w,validateSpec:K,styleSpec:v});case"canvas":return[new jt(h,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return vu({key:`${h}.type`,value:u.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function kA(d){const u=d.value,h=d.styleSpec,v=h.light,w=d.style;let K=[];const F=Yr(u);if(u===void 0)return K;if(F!=="object")return K=K.concat([new jt("light",u,`object expected, ${F} found`)]),K;for(const W in u){const X=W.match(/^(.*)-transition$/);K=K.concat(X&&v[X[1]]&&v[X[1]].transition?d.validateSpec({key:W,value:u[W],valueSpec:h.transition,validateSpec:d.validateSpec,style:w,styleSpec:h}):v[W]?d.validateSpec({key:W,value:u[W],valueSpec:v[W],validateSpec:d.validateSpec,style:w,styleSpec:h}):[new jt(W,u[W],`unknown property "${W}"`)])}return K}function wc(d){const u=d.value,h=d.styleSpec,v=h.sky,w=d.style,K=Yr(u);if(u===void 0)return[];if(K!=="object")return[new jt("sky",u,`object expected, ${K} found`)];let F=[];for(const W in u)F=F.concat(v[W]?d.validateSpec({key:W,value:u[W],valueSpec:v[W],style:w,styleSpec:h}):[new jt(W,u[W],`unknown property "${W}"`)]);return F}function Cu(d){const u=d.value,h=d.styleSpec,v=h.terrain,w=d.style;let K=[];const F=Yr(u);if(u===void 0)return K;if(F!=="object")return K=K.concat([new jt("terrain",u,`object expected, ${F} found`)]),K;for(const W in u)K=K.concat(v[W]?d.validateSpec({key:W,value:u[W],valueSpec:v[W],validateSpec:d.validateSpec,style:w,styleSpec:h}):[new jt(W,u[W],`unknown property "${W}"`)]);return K}function Sh(d){let u=[];const h=d.value,v=d.key;if(Array.isArray(h)){const w=[],K=[];for(const F in h)h[F].id&&w.includes(h[F].id)&&u.push(new jt(v,h,`all the sprites' ids must be unique, but ${h[F].id} is duplicated`)),w.push(h[F].id),h[F].url&&K.includes(h[F].url)&&u.push(new jt(v,h,`all the sprites' URLs must be unique, but ${h[F].url} is duplicated`)),K.push(h[F].url),u=u.concat(Ul({key:`${v}[${F}]`,value:h[F],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:d.validateSpec}));return u}return nu({key:v,value:h})}const ot={"*":()=>[],array:Vc,boolean:function(d){const u=d.value,h=d.key,v=Yr(u);return v!=="boolean"?[new jt(h,u,`boolean expected, ${v} found`)]:[]},number:oc,color:function(d){const u=d.key,h=d.value,v=Yr(h);return v!=="string"?[new jt(u,h,`color expected, ${v} found`)]:xi.parse(String(h))?[]:[new jt(u,h,`color expected, "${h}" found`)]},constants:ms,enum:vu,filter:rl,function:bd,layer:Zd,object:Ul,source:qu,light:kA,sky:wc,terrain:Cu,projection:function(d){const u=d.value,h=d.styleSpec,v=h.projection,w=d.style,K=Yr(u);if(u===void 0)return[];if(K!=="object")return[new jt("projection",u,`object expected, ${K} found`)];let F=[];for(const W in u)F=F.concat(v[W]?d.validateSpec({key:W,value:u[W],valueSpec:v[W],style:w,styleSpec:h}):[new jt(W,u[W],`unknown property "${W}"`)]);return F},projectionDefinition:function(d){const u=d.key;let h=d.value;h=h instanceof String?h.valueOf():h;const v=Yr(h);return v!=="array"||function(w){return Array.isArray(w)&&w.length===3&&typeof w[0]=="string"&&typeof w[1]=="string"&&typeof w[2]=="number"}(h)||function(w){return!!["interpolate","step","literal"].includes(w[0])}(h)?["array","string"].includes(v)?[]:[new jt(u,h,`projection expected, invalid type "${v}" found`)]:[new jt(u,h,`projection expected, invalid array ${JSON.stringify(h)} found`)]},string:nu,formatted:function(d){return nu(d).length===0?[]:nl(d)},resolvedImage:function(d){return nu(d).length===0?[]:nl(d)},padding:function(d){const u=d.key,h=d.value;if(Yr(h)==="array"){if(h.length<1||h.length>4)return[new jt(u,h,`padding requires 1 to 4 values; ${h.length} values found`)];const v={type:"number"};let w=[];for(let K=0;K<h.length;K++)w=w.concat(d.validateSpec({key:`${u}[${K}]`,value:h[K],validateSpec:d.validateSpec,valueSpec:v}));return w}return oc({key:u,value:h,valueSpec:{}})},variableAnchorOffsetCollection:function(d){const u=d.key,h=d.value,v=Yr(h),w=d.styleSpec;if(v!=="array"||h.length<1||h.length%2!=0)return[new jt(u,h,"variableAnchorOffsetCollection requires a non-empty array of even length")];let K=[];for(let F=0;F<h.length;F+=2)K=K.concat(vu({key:`${u}[${F}]`,value:h[F],valueSpec:w.layout_symbol["text-anchor"]})),K=K.concat(Vc({key:`${u}[${F+1}]`,value:h[F+1],valueSpec:{length:2,value:"number"},validateSpec:d.validateSpec,style:d.style,styleSpec:w}));return K},sprite:Sh};function Vu(d){const u=d.value,h=d.valueSpec,v=d.styleSpec;return d.validateSpec=Vu,h.expression&&tc(ao(u))?bd(d):h.expression&&yd(_d(u))?nl(d):h.type&&ot[h.type]?ot[h.type](d):Ul(Dn({},d,{valueSpec:h.type?v[h.type]:h}))}function _s(d){const u=d.value,h=d.key,v=nu(d);return v.length||(u.indexOf("{fontstack}")===-1&&v.push(new jt(h,u,'"glyphs" url must include a "{fontstack}" token')),u.indexOf("{range}")===-1&&v.push(new jt(h,u,'"glyphs" url must include a "{range}" token'))),v}function gi(d,u=J){let h=[];return h=h.concat(Vu({key:"",value:d,valueSpec:u.$root,styleSpec:u,style:d,validateSpec:Vu,objectElementValidators:{glyphs:_s,"*":()=>[]}})),d.constants&&(h=h.concat(ms({key:"constants",value:d.constants}))),ta(h)}function Gr(d){return function(u){return d({...u,validateSpec:Vu})}}function ta(d){return[].concat(d).sort((u,h)=>u.line-h.line)}function zl(d){return function(...u){return ta(d.apply(this,u))}}gi.source=zl(Gr(qu)),gi.sprite=zl(Gr(Sh)),gi.glyphs=zl(Gr(_s)),gi.light=zl(Gr(kA)),gi.sky=zl(Gr(wc)),gi.terrain=zl(Gr(Cu)),gi.layer=zl(Gr(Zd)),gi.filter=zl(Gr(rl)),gi.paintProperty=zl(Gr(xd)),gi.layoutProperty=zl(Gr($c));const TA=gi,_a=TA.light,Us=TA.sky,bs=TA.paintProperty,Hc=TA.layoutProperty;function ba(d,u){let h=!1;if(u&&u.length)for(const v of u)d.fire(new Hn(new Error(v.message))),h=!0;return h}class il{constructor(u,h,v){const w=this.cells=[];if(u instanceof ArrayBuffer){this.arrayBuffer=u;const F=new Int32Array(this.arrayBuffer);u=F[0],this.d=(h=F[1])+2*(v=F[2]);for(let X=0;X<this.d*this.d;X++){const ie=F[3+X],de=F[3+X+1];w.push(ie===de?null:F.subarray(ie,de))}const W=F[3+w.length+1];this.keys=F.subarray(F[3+w.length],W),this.bboxes=F.subarray(W),this.insert=this._insertReadonly}else{this.d=h+2*v;for(let F=0;F<this.d*this.d;F++)w.push([]);this.keys=[],this.bboxes=[]}this.n=h,this.extent=u,this.padding=v,this.scale=h/u,this.uid=0;const K=v/h*u;this.min=-K,this.max=u+K}insert(u,h,v,w,K){this._forEachCell(h,v,w,K,this._insertCell,this.uid++,void 0,void 0),this.keys.push(u),this.bboxes.push(h),this.bboxes.push(v),this.bboxes.push(w),this.bboxes.push(K)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(u,h,v,w,K,F){this.cells[K].push(F)}query(u,h,v,w,K){const F=this.min,W=this.max;if(u<=F&&h<=F&&W<=v&&W<=w&&!K)return Array.prototype.slice.call(this.keys);{const X=[];return this._forEachCell(u,h,v,w,this._queryCell,X,{},K),X}}_queryCell(u,h,v,w,K,F,W,X){const ie=this.cells[K];if(ie!==null){const de=this.keys,_e=this.bboxes;for(let Re=0;Re<ie.length;Re++){const ze=ie[Re];if(W[ze]===void 0){const We=4*ze;(X?X(_e[We+0],_e[We+1],_e[We+2],_e[We+3]):u<=_e[We+2]&&h<=_e[We+3]&&v>=_e[We+0]&&w>=_e[We+1])?(W[ze]=!0,F.push(de[ze])):W[ze]=!1}}}}_forEachCell(u,h,v,w,K,F,W,X){const ie=this._convertToCellCoord(u),de=this._convertToCellCoord(h),_e=this._convertToCellCoord(v),Re=this._convertToCellCoord(w);for(let ze=ie;ze<=_e;ze++)for(let We=de;We<=Re;We++){const et=this.d*We+ze;if((!X||X(this._convertFromCellCoord(ze),this._convertFromCellCoord(We),this._convertFromCellCoord(ze+1),this._convertFromCellCoord(We+1)))&&K.call(this,u,h,v,w,et,F,W,X))return}}_convertFromCellCoord(u){return(u-this.padding)/this.scale}_convertToCellCoord(u){return Math.max(0,Math.min(this.d-1,Math.floor(u*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const u=this.cells,h=3+this.cells.length+1+1;let v=0;for(let F=0;F<this.cells.length;F++)v+=this.cells[F].length;const w=new Int32Array(h+v+this.keys.length+this.bboxes.length);w[0]=this.extent,w[1]=this.n,w[2]=this.padding;let K=h;for(let F=0;F<u.length;F++){const W=u[F];w[3+F]=K,w.set(W,K),K+=W.length}return w[3+u.length]=K,w.set(this.keys,K),K+=this.keys.length,w[3+u.length+1]=K,w.set(this.bboxes,K),K+=this.bboxes.length,w.buffer}static serialize(u,h){const v=u.toArrayBuffer();return h&&h.push(v),{buffer:v}}static deserialize(u){return new il(u.buffer)}}const gs={};function xr(d,u,h={}){if(gs[d])throw new Error(`${d} is already registered.`);Object.defineProperty(u,"_classRegistryKey",{value:d,writeable:!1}),gs[d]={klass:u,omit:h.omit||[],shallow:h.shallow||[]}}xr("Object",Object),xr("TransferableGridIndex",il),xr("Color",xi),xr("Error",Error),xr("AJAXError",Ge),xr("ResolvedImage",Xs),xr("StylePropertyFunction",Mh),xr("StyleExpression",gd,{omit:["_evaluator"]}),xr("ZoomDependentExpression",Qc),xr("ZoomConstantExpression",Gc),xr("CompoundExpression",an,{omit:["_evaluate"]});for(const d in In)In[d]._classRegistryKey||xr(`Expression_${d}`,In[d]);function xa(d){return d&&typeof ArrayBuffer<"u"&&(d instanceof ArrayBuffer||d.constructor&&d.constructor.name==="ArrayBuffer")}function Zc(d){return d.$name||d.constructor._classRegistryKey}function nf(d){return!function(u){if(u===null||typeof u!="object")return!1;const h=Zc(u);return!(!h||h==="Object")}(d)&&(d==null||typeof d=="boolean"||typeof d=="number"||typeof d=="string"||d instanceof Boolean||d instanceof Number||d instanceof String||d instanceof Date||d instanceof RegExp||d instanceof Blob||d instanceof Error||xa(d)||nn(d)||ArrayBuffer.isView(d)||d instanceof ImageData)}function ac(d,u){if(nf(d))return(xa(d)||nn(d))&&u&&u.push(d),ArrayBuffer.isView(d)&&u&&u.push(d.buffer),d instanceof ImageData&&u&&u.push(d.data.buffer),d;if(Array.isArray(d)){const K=[];for(const F of d)K.push(ac(F,u));return K}if(typeof d!="object")throw new Error("can't serialize object of type "+typeof d);const h=Zc(d);if(!h)throw new Error(`can't serialize object of unregistered class ${d.constructor.name}`);if(!gs[h])throw new Error(`${h} is not registered.`);const{klass:v}=gs[h],w=v.serialize?v.serialize(d,u):{};if(v.serialize){if(u&&w===u[u.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const K in d){if(!d.hasOwnProperty(K)||gs[h].omit.indexOf(K)>=0)continue;const F=d[K];w[K]=gs[h].shallow.indexOf(K)>=0?F:ac(F,u)}d instanceof Error&&(w.message=d.message)}if(w.$name)throw new Error("$name property is reserved for worker serialization logic.");return h!=="Object"&&(w.$name=h),w}function yl(d){if(nf(d))return d;if(Array.isArray(d))return d.map(yl);if(typeof d!="object")throw new Error("can't deserialize object of type "+typeof d);const u=Zc(d)||"Object";if(!gs[u])throw new Error(`can't deserialize unregistered class ${u}`);const{klass:h}=gs[u];if(!h)throw new Error(`can't deserialize unregistered class ${u}`);if(h.deserialize)return h.deserialize(d);const v=Object.create(h.prototype);for(const w of Object.keys(d)){if(w==="$name")continue;const K=d[w];v[w]=gs[u].shallow.indexOf(w)>=0?K:yl(K)}return v}class Xd{constructor(){this.first=!0}update(u,h){const v=Math.floor(u);return this.first?(this.first=!1,this.lastIntegerZoom=v,this.lastIntegerZoomTime=0,this.lastZoom=u,this.lastFloorZoom=v,!0):(this.lastFloorZoom>v?(this.lastIntegerZoom=v+1,this.lastIntegerZoomTime=h):this.lastFloorZoom<v&&(this.lastIntegerZoom=v,this.lastIntegerZoomTime=h),u!==this.lastZoom&&(this.lastZoom=u,this.lastFloorZoom=v,!0))}}const Mi={"Latin-1 Supplement":d=>d>=128&&d<=255,"Hangul Jamo":d=>d>=4352&&d<=4607,Khmer:d=>d>=6016&&d<=6143,"General Punctuation":d=>d>=8192&&d<=8303,"Letterlike Symbols":d=>d>=8448&&d<=8527,"Number Forms":d=>d>=8528&&d<=8591,"Miscellaneous Technical":d=>d>=8960&&d<=9215,"Control Pictures":d=>d>=9216&&d<=9279,"Optical Character Recognition":d=>d>=9280&&d<=9311,"Enclosed Alphanumerics":d=>d>=9312&&d<=9471,"Geometric Shapes":d=>d>=9632&&d<=9727,"Miscellaneous Symbols":d=>d>=9728&&d<=9983,"Miscellaneous Symbols and Arrows":d=>d>=11008&&d<=11263,"Ideographic Description Characters":d=>d>=12272&&d<=12287,"CJK Symbols and Punctuation":d=>d>=12288&&d<=12351,Hiragana:d=>d>=12352&&d<=12447,Katakana:d=>d>=12448&&d<=12543,Kanbun:d=>d>=12688&&d<=12703,"CJK Strokes":d=>d>=12736&&d<=12783,"Enclosed CJK Letters and Months":d=>d>=12800&&d<=13055,"CJK Compatibility":d=>d>=13056&&d<=13311,"Yijing Hexagram Symbols":d=>d>=19904&&d<=19967,"CJK Unified Ideographs":d=>d>=19968&&d<=40959,"Hangul Syllables":d=>d>=44032&&d<=55215,"Private Use Area":d=>d>=57344&&d<=63743,"Vertical Forms":d=>d>=65040&&d<=65055,"CJK Compatibility Forms":d=>d>=65072&&d<=65103,"Small Form Variants":d=>d>=65104&&d<=65135,"Halfwidth and Fullwidth Forms":d=>d>=65280&&d<=65519};function Md(d){for(const u of d)if(ds(u.charCodeAt(0)))return!0;return!1}function wd(d){for(const u of d)if(!lc(u.charCodeAt(0)))return!1;return!0}function $u(d){const u=d.map(h=>{try{return new RegExp(`\\p{sc=${h}}`,"u").source}catch{return null}}).filter(h=>h);return new RegExp(u.join("|"),"u")}const Sc=$u(["Arab","Dupl","Mong","Ougr","Syrc"]);function lc(d){return!Sc.test(String.fromCodePoint(d))}const Ec=$u(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function ds(d){return!(d!==746&&d!==747&&(d<4352||!(Mi["CJK Compatibility Forms"](d)&&!(d>=65097&&d<=65103)||Mi["CJK Compatibility"](d)||Mi["CJK Strokes"](d)||!(!Mi["CJK Symbols and Punctuation"](d)||d>=12296&&d<=12305||d>=12308&&d<=12319||d===12336)||Mi["Enclosed CJK Letters and Months"](d)||Mi["Ideographic Description Characters"](d)||Mi.Kanbun(d)||Mi.Katakana(d)&&d!==12540||!(!Mi["Halfwidth and Fullwidth Forms"](d)||d===65288||d===65289||d===65293||d>=65306&&d<=65310||d===65339||d===65341||d===65343||d>=65371&&d<=65503||d===65507||d>=65512&&d<=65519)||!(!Mi["Small Form Variants"](d)||d>=65112&&d<=65118||d>=65123&&d<=65126)||Mi["Vertical Forms"](d)||Mi["Yijing Hexagram Symbols"](d)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(d))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(d))||Ec.test(String.fromCodePoint(d)))))}function So(d){return!(ds(d)||function(u){return!!(Mi["Latin-1 Supplement"](u)&&(u===167||u===169||u===174||u===177||u===188||u===189||u===190||u===215||u===247)||Mi["General Punctuation"](u)&&(u===8214||u===8224||u===8225||u===8240||u===8241||u===8251||u===8252||u===8258||u===8263||u===8264||u===8265||u===8273)||Mi["Letterlike Symbols"](u)||Mi["Number Forms"](u)||Mi["Miscellaneous Technical"](u)&&(u>=8960&&u<=8967||u>=8972&&u<=8991||u>=8996&&u<=9e3||u===9003||u>=9085&&u<=9114||u>=9150&&u<=9165||u===9167||u>=9169&&u<=9179||u>=9186&&u<=9215)||Mi["Control Pictures"](u)&&u!==9251||Mi["Optical Character Recognition"](u)||Mi["Enclosed Alphanumerics"](u)||Mi["Geometric Shapes"](u)||Mi["Miscellaneous Symbols"](u)&&!(u>=9754&&u<=9759)||Mi["Miscellaneous Symbols and Arrows"](u)&&(u>=11026&&u<=11055||u>=11088&&u<=11097||u>=11192&&u<=11243)||Mi["CJK Symbols and Punctuation"](u)||Mi.Katakana(u)||Mi["Private Use Area"](u)||Mi["CJK Compatibility Forms"](u)||Mi["Small Form Variants"](u)||Mi["Halfwidth and Fullwidth Forms"](u)||u===8734||u===8756||u===8757||u>=9984&&u<=10087||u>=10102&&u<=10131||u===65532||u===65533)}(d))}const _u=$u(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function Ma(d){return _u.test(String.fromCodePoint(d))}function Ra(d,u){return!(!u&&Ma(d)||d>=2304&&d<=3583||d>=3840&&d<=4255||Mi.Khmer(d))}function Bc(d){for(const u of d)if(Ma(u.charCodeAt(0)))return!0;return!1}const ol=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(d){this.pluginStatus=d.pluginStatus,this.pluginURL=d.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(d){if(ol.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=d.applyArabicShaping,this.processBidirectionalText=d.processBidirectionalText,this.processStyledBidirectionalText=d.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(d,u){return o(this,void 0,void 0,function*(){if(this.isParsed())return this.getState();if(d.pluginStatus!=="loading")return this.setState(d),d;const h=d.pluginURL,v=new Promise(K=>{this.loadScriptResolve=K});u(h);const w=new Promise(K=>setTimeout(()=>K(),this.TIMEOUT));if(yield Promise.race([v,w]),this.isParsed()){const K={pluginStatus:"loaded",pluginURL:h};return this.setState(K),K}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${h}`)})}};class Uo{constructor(u,h){this.zoom=u,h?(this.now=h.now,this.fadeDuration=h.fadeDuration,this.zoomHistory=h.zoomHistory,this.transition=h.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Xd,this.transition={})}isSupportedScript(u){return function(h,v){for(const w of h)if(!Ra(w.charCodeAt(0),v))return!1;return!0}(u,ol.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const u=this.zoom,h=u-Math.floor(u),v=this.crossFadingFactor();return u>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:h+(1-h)*v}:{fromScale:.5,toScale:1,t:1-(1-v)*h}}}class PA{constructor(u,h){this.property=u,this.value=h,this.expression=function(v,w){if(tc(v))return new Mh(v,w);if(yd(v)){const K=Yc(v,w);if(K.result==="error")throw new Error(K.value.map(F=>`${F.key}: ${F.message}`).join(", "));return K.value}{let K=v;return w.type==="color"&&typeof v=="string"?K=xi.parse(v):w.type!=="padding"||typeof v!="number"&&!Array.isArray(v)?w.type==="variableAnchorOffsetCollection"&&Array.isArray(v)?K=Es.parse(v):w.type==="projectionDefinition"&&typeof v=="string"&&(K=Js.parse(v)):K=$o.parse(v),{kind:"constant",evaluate:()=>K}}}(h===void 0?u.specification.default:h,u.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(u,h,v){return this.property.possiblyEvaluate(this,u,h,v)}}class Sd{constructor(u){this.property=u,this.value=new PA(u,void 0)}transitioned(u,h){return new uc(this.property,this.value,h,yt({},u.transition,this.transition),u.now)}untransitioned(){return new uc(this.property,this.value,null,{},0)}}class KA{constructor(u){this._properties=u,this._values=Object.create(u.defaultTransitionablePropertyValues)}getValue(u){return Pe(this._values[u].value.value)}setValue(u,h){Object.prototype.hasOwnProperty.call(this._values,u)||(this._values[u]=new Sd(this._values[u].property)),this._values[u].value=new PA(this._values[u].property,h===null?void 0:Pe(h))}getTransition(u){return Pe(this._values[u].transition)}setTransition(u,h){Object.prototype.hasOwnProperty.call(this._values,u)||(this._values[u]=new Sd(this._values[u].property)),this._values[u].transition=Pe(h)||void 0}serialize(){const u={};for(const h of Object.keys(this._values)){const v=this.getValue(h);v!==void 0&&(u[h]=v);const w=this.getTransition(h);w!==void 0&&(u[`${h}-transition`]=w)}return u}transitioned(u,h){const v=new da(this._properties);for(const w of Object.keys(this._values))v._values[w]=this._values[w].transitioned(u,h._values[w]);return v}untransitioned(){const u=new da(this._properties);for(const h of Object.keys(this._values))u._values[h]=this._values[h].untransitioned();return u}}class uc{constructor(u,h,v,w,K){this.property=u,this.value=h,this.begin=K+w.delay||0,this.end=this.begin+w.duration||0,u.specification.transition&&(w.delay||w.duration)&&(this.prior=v)}possiblyEvaluate(u,h,v){const w=u.now||0,K=this.value.possiblyEvaluate(u,h,v),F=this.prior;if(F){if(w>this.end)return this.prior=null,K;if(this.value.isDataDriven())return this.prior=null,K;if(w<this.begin)return F.possiblyEvaluate(u,h,v);{const W=(w-this.begin)/(this.end-this.begin);return this.property.interpolate(F.possiblyEvaluate(u,h,v),K,we(W))}}return K}}class da{constructor(u){this._properties=u,this._values=Object.create(u.defaultTransitioningPropertyValues)}possiblyEvaluate(u,h,v){const w=new ru(this._properties);for(const K of Object.keys(this._values))w._values[K]=this._values[K].possiblyEvaluate(u,h,v);return w}hasTransition(){for(const u of Object.keys(this._values))if(this._values[u].prior)return!0;return!1}}class Da{constructor(u){this._properties=u,this._values=Object.create(u.defaultPropertyValues)}hasValue(u){return this._values[u].value!==void 0}getValue(u){return Pe(this._values[u].value)}setValue(u,h){this._values[u]=new PA(this._values[u].property,h===null?void 0:Pe(h))}serialize(){const u={};for(const h of Object.keys(this._values)){const v=this.getValue(h);v!==void 0&&(u[h]=v)}return u}possiblyEvaluate(u,h,v){const w=new ru(this._properties);for(const K of Object.keys(this._values))w._values[K]=this._values[K].possiblyEvaluate(u,h,v);return w}}class Eo{constructor(u,h,v){this.property=u,this.value=h,this.parameters=v}isConstant(){return this.value.kind==="constant"}constantOr(u){return this.value.kind==="constant"?this.value.value:u}evaluate(u,h,v,w){return this.property.evaluate(this.value,this.parameters,u,h,v,w)}}class ru{constructor(u){this._properties=u,this._values=Object.create(u.defaultPossiblyEvaluatedValues)}get(u){return this._values[u]}}class Kr{constructor(u){this.specification=u}possiblyEvaluate(u,h){if(u.isDataDriven())throw new Error("Value should not be data driven");return u.expression.evaluate(h)}interpolate(u,h,v){const w=mi[this.specification.type];return w?w(u,h,v):u}}class ei{constructor(u,h){this.specification=u,this.overrides=h}possiblyEvaluate(u,h,v,w){return new Eo(this,u.expression.kind==="constant"||u.expression.kind==="camera"?{kind:"constant",value:u.expression.evaluate(h,null,{},v,w)}:u.expression,h)}interpolate(u,h,v){if(u.value.kind!=="constant"||h.value.kind!=="constant")return u;if(u.value.value===void 0||h.value.value===void 0)return new Eo(this,{kind:"constant",value:void 0},u.parameters);const w=mi[this.specification.type];if(w){const K=w(u.value.value,h.value.value,v);return new Eo(this,{kind:"constant",value:K},u.parameters)}return u}evaluate(u,h,v,w,K,F){return u.kind==="constant"?u.value:u.evaluate(h,v,w,K,F)}}class iu extends ei{possiblyEvaluate(u,h,v,w){if(u.value===void 0)return new Eo(this,{kind:"constant",value:void 0},h);if(u.expression.kind==="constant"){const K=u.expression.evaluate(h,null,{},v,w),F=u.property.specification.type==="resolvedImage"&&typeof K!="string"?K.name:K,W=this._calculate(F,F,F,h);return new Eo(this,{kind:"constant",value:W},h)}if(u.expression.kind==="camera"){const K=this._calculate(u.expression.evaluate({zoom:h.zoom-1}),u.expression.evaluate({zoom:h.zoom}),u.expression.evaluate({zoom:h.zoom+1}),h);return new Eo(this,{kind:"constant",value:K},h)}return new Eo(this,u.expression,h)}evaluate(u,h,v,w,K,F){if(u.kind==="source"){const W=u.evaluate(h,v,w,K,F);return this._calculate(W,W,W,h)}return u.kind==="composite"?this._calculate(u.evaluate({zoom:Math.floor(h.zoom)-1},v,w),u.evaluate({zoom:Math.floor(h.zoom)},v,w),u.evaluate({zoom:Math.floor(h.zoom)+1},v,w),h):u.value}_calculate(u,h,v,w){return w.zoom>w.zoomHistory.lastIntegerZoom?{from:u,to:h}:{from:v,to:h}}interpolate(u){return u}}class vl{constructor(u){this.specification=u}possiblyEvaluate(u,h,v,w){if(u.value!==void 0){if(u.expression.kind==="constant"){const K=u.expression.evaluate(h,null,{},v,w);return this._calculate(K,K,K,h)}return this._calculate(u.expression.evaluate(new Uo(Math.floor(h.zoom-1),h)),u.expression.evaluate(new Uo(Math.floor(h.zoom),h)),u.expression.evaluate(new Uo(Math.floor(h.zoom+1),h)),h)}}_calculate(u,h,v,w){return w.zoom>w.zoomHistory.lastIntegerZoom?{from:u,to:h}:{from:v,to:h}}interpolate(u){return u}}class rf{constructor(u){this.specification=u}possiblyEvaluate(u,h,v,w){return!!u.expression.evaluate(h,null,{},v,w)}interpolate(){return!1}}class sl{constructor(u){this.properties=u,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const h in u){const v=u[h];v.specification.overridable&&this.overridableProperties.push(h);const w=this.defaultPropertyValues[h]=new PA(v,void 0),K=this.defaultTransitionablePropertyValues[h]=new Sd(v);this.defaultTransitioningPropertyValues[h]=K.untransitioned(),this.defaultPossiblyEvaluatedValues[h]=w.possiblyEvaluate({})}}}xr("DataDrivenProperty",ei),xr("DataConstantProperty",Kr),xr("CrossFadedDataDrivenProperty",iu),xr("CrossFadedProperty",vl),xr("ColorRampProperty",rf);const of="-transition";class al extends Ve{constructor(u,h){if(super(),this.id=u.id,this.type=u.type,this._featureFilter={filter:()=>!0,needGeometry:!1},u.type!=="custom"&&(this.metadata=u.metadata,this.minzoom=u.minzoom,this.maxzoom=u.maxzoom,u.type!=="background"&&(this.source=u.source,this.sourceLayer=u["source-layer"],this.filter=u.filter),h.layout&&(this._unevaluatedLayout=new Da(h.layout)),h.paint)){this._transitionablePaint=new KA(h.paint);for(const v in u.paint)this.setPaintProperty(v,u.paint[v],{validate:!1});for(const v in u.layout)this.setLayoutProperty(v,u.layout[v],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new ru(h.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(u){return u==="visibility"?this.visibility:this._unevaluatedLayout.getValue(u)}setLayoutProperty(u,h,v={}){h!=null&&this._validate(Hc,`layers.${this.id}.layout.${u}`,u,h,v)||(u!=="visibility"?this._unevaluatedLayout.setValue(u,h):this.visibility=h)}getPaintProperty(u){return u.endsWith(of)?this._transitionablePaint.getTransition(u.slice(0,-11)):this._transitionablePaint.getValue(u)}setPaintProperty(u,h,v={}){if(h!=null&&this._validate(bs,`layers.${this.id}.paint.${u}`,u,h,v))return!1;if(u.endsWith(of))return this._transitionablePaint.setTransition(u.slice(0,-11),h||void 0),!1;{const w=this._transitionablePaint._values[u],K=w.property.specification["property-type"]==="cross-faded-data-driven",F=w.value.isDataDriven(),W=w.value;this._transitionablePaint.setValue(u,h),this._handleSpecialPaintPropertyUpdate(u);const X=this._transitionablePaint._values[u].value;return X.isDataDriven()||F||K||this._handleOverridablePaintPropertyUpdate(u,W,X)}}_handleSpecialPaintPropertyUpdate(u){}_handleOverridablePaintPropertyUpdate(u,h,v){return!1}isHidden(u){return!!(this.minzoom&&u<this.minzoom)||!!(this.maxzoom&&u>=this.maxzoom)||this.visibility==="none"}updateTransitions(u){this._transitioningPaint=this._transitionablePaint.transitioned(u,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(u,h){u.getCrossfadeParameters&&(this._crossfadeParameters=u.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(u,void 0,h)),this.paint=this._transitioningPaint.possiblyEvaluate(u,void 0,h)}serialize(){const u={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(u.layout=u.layout||{},u.layout.visibility=this.visibility),Ue(u,(h,v)=>!(h===void 0||v==="layout"&&!Object.keys(h).length||v==="paint"&&!Object.keys(h).length))}_validate(u,h,v,w,K={}){return(!K||K.validate!==!1)&&ba(this,u.call(TA,{key:h,layerType:this.type,objectKey:v,value:w,styleSpec:J,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const u in this.paint._values){const h=this.paint.get(u);if(h instanceof Eo&&Ka(h.property.specification)&&(h.value.kind==="source"||h.value.kind==="composite")&&h.value.isStateDependent)return!0}return!1}}const Hu={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class hA{constructor(u,h){this._structArray=u,this._pos1=h*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Os{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(u,h){return u._trim(),h&&(u.isTransferred=!0,h.push(u.arrayBuffer)),{length:u.length,arrayBuffer:u.arrayBuffer}}static deserialize(u){const h=Object.create(this.prototype);return h.arrayBuffer=u.arrayBuffer,h.length=u.length,h.capacity=u.arrayBuffer.byteLength/h.bytesPerElement,h._refreshViews(),h}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(u){this.reserve(u),this.length=u}reserve(u){if(u>this.capacity){this.capacity=Math.max(u,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const h=this.uint8;this._refreshViews(),h&&this.uint8.set(h)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Is(d,u=1){let h=0,v=0;return{members:d.map(w=>{const K=Hu[w.type].BYTES_PER_ELEMENT,F=h=sf(h,Math.max(u,K)),W=w.components||1;return v=Math.max(v,K),h+=K*W,{name:w.name,type:w.type,components:W,offset:F}}),size:sf(h,Math.max(v,u)),alignment:u}}function sf(d,u){return Math.ceil(d/u)*u}class Zu extends Os{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,h){const v=this.length;return this.resize(v+1),this.emplace(v,u,h)}emplace(u,h,v){const w=2*u;return this.int16[w+0]=h,this.int16[w+1]=v,u}}Zu.prototype.bytesPerElement=4,xr("StructArrayLayout2i4",Zu);class ks extends Os{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,h,v){const w=this.length;return this.resize(w+1),this.emplace(w,u,h,v)}emplace(u,h,v,w){const K=3*u;return this.int16[K+0]=h,this.int16[K+1]=v,this.int16[K+2]=w,u}}ks.prototype.bytesPerElement=6,xr("StructArrayLayout3i6",ks);class Oc extends Os{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,h,v,w){const K=this.length;return this.resize(K+1),this.emplace(K,u,h,v,w)}emplace(u,h,v,w,K){const F=4*u;return this.int16[F+0]=h,this.int16[F+1]=v,this.int16[F+2]=w,this.int16[F+3]=K,u}}Oc.prototype.bytesPerElement=8,xr("StructArrayLayout4i8",Oc);class bu extends Os{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,h,v,w,K,F){const W=this.length;return this.resize(W+1),this.emplace(W,u,h,v,w,K,F)}emplace(u,h,v,w,K,F,W){const X=6*u;return this.int16[X+0]=h,this.int16[X+1]=v,this.int16[X+2]=w,this.int16[X+3]=K,this.int16[X+4]=F,this.int16[X+5]=W,u}}bu.prototype.bytesPerElement=12,xr("StructArrayLayout2i4i12",bu);class Cl extends Os{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,h,v,w,K,F){const W=this.length;return this.resize(W+1),this.emplace(W,u,h,v,w,K,F)}emplace(u,h,v,w,K,F,W){const X=4*u,ie=8*u;return this.int16[X+0]=h,this.int16[X+1]=v,this.uint8[ie+4]=w,this.uint8[ie+5]=K,this.uint8[ie+6]=F,this.uint8[ie+7]=W,u}}Cl.prototype.bytesPerElement=8,xr("StructArrayLayout2i4ub8",Cl);class ou extends Os{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,h){const v=this.length;return this.resize(v+1),this.emplace(v,u,h)}emplace(u,h,v){const w=2*u;return this.float32[w+0]=h,this.float32[w+1]=v,u}}ou.prototype.bytesPerElement=8,xr("StructArrayLayout2f8",ou);class Ic extends Os{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,h,v,w,K,F,W,X,ie,de){const _e=this.length;return this.resize(_e+1),this.emplace(_e,u,h,v,w,K,F,W,X,ie,de)}emplace(u,h,v,w,K,F,W,X,ie,de,_e){const Re=10*u;return this.uint16[Re+0]=h,this.uint16[Re+1]=v,this.uint16[Re+2]=w,this.uint16[Re+3]=K,this.uint16[Re+4]=F,this.uint16[Re+5]=W,this.uint16[Re+6]=X,this.uint16[Re+7]=ie,this.uint16[Re+8]=de,this.uint16[Re+9]=_e,u}}Ic.prototype.bytesPerElement=20,xr("StructArrayLayout10ui20",Ic);class xu extends Os{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,h,v,w,K,F,W,X,ie,de,_e,Re){const ze=this.length;return this.resize(ze+1),this.emplace(ze,u,h,v,w,K,F,W,X,ie,de,_e,Re)}emplace(u,h,v,w,K,F,W,X,ie,de,_e,Re,ze){const We=12*u;return this.int16[We+0]=h,this.int16[We+1]=v,this.int16[We+2]=w,this.int16[We+3]=K,this.uint16[We+4]=F,this.uint16[We+5]=W,this.uint16[We+6]=X,this.uint16[We+7]=ie,this.int16[We+8]=de,this.int16[We+9]=_e,this.int16[We+10]=Re,this.int16[We+11]=ze,u}}xu.prototype.bytesPerElement=24,xr("StructArrayLayout4i4ui4i24",xu);class ha extends Os{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,h,v){const w=this.length;return this.resize(w+1),this.emplace(w,u,h,v)}emplace(u,h,v,w){const K=3*u;return this.float32[K+0]=h,this.float32[K+1]=v,this.float32[K+2]=w,u}}ha.prototype.bytesPerElement=12,xr("StructArrayLayout3f12",ha);class Qs extends Os{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(u){const h=this.length;return this.resize(h+1),this.emplace(h,u)}emplace(u,h){return this.uint32[1*u+0]=h,u}}Qs.prototype.bytesPerElement=4,xr("StructArrayLayout1ul4",Qs);class su extends Os{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,h,v,w,K,F,W,X,ie){const de=this.length;return this.resize(de+1),this.emplace(de,u,h,v,w,K,F,W,X,ie)}emplace(u,h,v,w,K,F,W,X,ie,de){const _e=10*u,Re=5*u;return this.int16[_e+0]=h,this.int16[_e+1]=v,this.int16[_e+2]=w,this.int16[_e+3]=K,this.int16[_e+4]=F,this.int16[_e+5]=W,this.uint32[Re+3]=X,this.uint16[_e+8]=ie,this.uint16[_e+9]=de,u}}su.prototype.bytesPerElement=20,xr("StructArrayLayout6i1ul2ui20",su);class au extends Os{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,h,v,w,K,F){const W=this.length;return this.resize(W+1),this.emplace(W,u,h,v,w,K,F)}emplace(u,h,v,w,K,F,W){const X=6*u;return this.int16[X+0]=h,this.int16[X+1]=v,this.int16[X+2]=w,this.int16[X+3]=K,this.int16[X+4]=F,this.int16[X+5]=W,u}}au.prototype.bytesPerElement=12,xr("StructArrayLayout2i2i2i12",au);class RA extends Os{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,h,v,w,K){const F=this.length;return this.resize(F+1),this.emplace(F,u,h,v,w,K)}emplace(u,h,v,w,K,F){const W=4*u,X=8*u;return this.float32[W+0]=h,this.float32[W+1]=v,this.float32[W+2]=w,this.int16[X+6]=K,this.int16[X+7]=F,u}}RA.prototype.bytesPerElement=16,xr("StructArrayLayout2f1f2i16",RA);class Mu extends Os{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,h,v,w,K,F){const W=this.length;return this.resize(W+1),this.emplace(W,u,h,v,w,K,F)}emplace(u,h,v,w,K,F,W){const X=16*u,ie=4*u,de=8*u;return this.uint8[X+0]=h,this.uint8[X+1]=v,this.float32[ie+1]=w,this.float32[ie+2]=K,this.int16[de+6]=F,this.int16[de+7]=W,u}}Mu.prototype.bytesPerElement=16,xr("StructArrayLayout2ub2f2i16",Mu);class Ac extends Os{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,h,v){const w=this.length;return this.resize(w+1),this.emplace(w,u,h,v)}emplace(u,h,v,w){const K=3*u;return this.uint16[K+0]=h,this.uint16[K+1]=v,this.uint16[K+2]=w,u}}Ac.prototype.bytesPerElement=6,xr("StructArrayLayout3ui6",Ac);class fA extends Os{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,h,v,w,K,F,W,X,ie,de,_e,Re,ze,We,et,At,Ct){const Nt=this.length;return this.resize(Nt+1),this.emplace(Nt,u,h,v,w,K,F,W,X,ie,de,_e,Re,ze,We,et,At,Ct)}emplace(u,h,v,w,K,F,W,X,ie,de,_e,Re,ze,We,et,At,Ct,Nt){const St=24*u,Le=12*u,lt=48*u;return this.int16[St+0]=h,this.int16[St+1]=v,this.uint16[St+2]=w,this.uint16[St+3]=K,this.uint32[Le+2]=F,this.uint32[Le+3]=W,this.uint32[Le+4]=X,this.uint16[St+10]=ie,this.uint16[St+11]=de,this.uint16[St+12]=_e,this.float32[Le+7]=Re,this.float32[Le+8]=ze,this.uint8[lt+36]=We,this.uint8[lt+37]=et,this.uint8[lt+38]=At,this.uint32[Le+10]=Ct,this.int16[St+22]=Nt,u}}fA.prototype.bytesPerElement=48,xr("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",fA);class jl extends Os{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,h,v,w,K,F,W,X,ie,de,_e,Re,ze,We,et,At,Ct,Nt,St,Le,lt,Bt,dn,kn,An,Bn,nr,jn){const cr=this.length;return this.resize(cr+1),this.emplace(cr,u,h,v,w,K,F,W,X,ie,de,_e,Re,ze,We,et,At,Ct,Nt,St,Le,lt,Bt,dn,kn,An,Bn,nr,jn)}emplace(u,h,v,w,K,F,W,X,ie,de,_e,Re,ze,We,et,At,Ct,Nt,St,Le,lt,Bt,dn,kn,An,Bn,nr,jn,cr){const Tn=32*u,Nr=16*u;return this.int16[Tn+0]=h,this.int16[Tn+1]=v,this.int16[Tn+2]=w,this.int16[Tn+3]=K,this.int16[Tn+4]=F,this.int16[Tn+5]=W,this.int16[Tn+6]=X,this.int16[Tn+7]=ie,this.uint16[Tn+8]=de,this.uint16[Tn+9]=_e,this.uint16[Tn+10]=Re,this.uint16[Tn+11]=ze,this.uint16[Tn+12]=We,this.uint16[Tn+13]=et,this.uint16[Tn+14]=At,this.uint16[Tn+15]=Ct,this.uint16[Tn+16]=Nt,this.uint16[Tn+17]=St,this.uint16[Tn+18]=Le,this.uint16[Tn+19]=lt,this.uint16[Tn+20]=Bt,this.uint16[Tn+21]=dn,this.uint16[Tn+22]=kn,this.uint32[Nr+12]=An,this.float32[Nr+13]=Bn,this.float32[Nr+14]=nr,this.uint16[Tn+30]=jn,this.uint16[Tn+31]=cr,u}}jl.prototype.bytesPerElement=64,xr("StructArrayLayout8i15ui1ul2f2ui64",jl);class Xc extends Os{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u){const h=this.length;return this.resize(h+1),this.emplace(h,u)}emplace(u,h){return this.float32[1*u+0]=h,u}}Xc.prototype.bytesPerElement=4,xr("StructArrayLayout1f4",Xc);class I extends Os{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,h,v){const w=this.length;return this.resize(w+1),this.emplace(w,u,h,v)}emplace(u,h,v,w){const K=3*u;return this.uint16[6*u+0]=h,this.float32[K+1]=v,this.float32[K+2]=w,u}}I.prototype.bytesPerElement=12,xr("StructArrayLayout1ui2f12",I);class a extends Os{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,h,v){const w=this.length;return this.resize(w+1),this.emplace(w,u,h,v)}emplace(u,h,v,w){const K=4*u;return this.uint32[2*u+0]=h,this.uint16[K+2]=v,this.uint16[K+3]=w,u}}a.prototype.bytesPerElement=8,xr("StructArrayLayout1ul2ui8",a);class c extends Os{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,h){const v=this.length;return this.resize(v+1),this.emplace(v,u,h)}emplace(u,h,v){const w=2*u;return this.uint16[w+0]=h,this.uint16[w+1]=v,u}}c.prototype.bytesPerElement=4,xr("StructArrayLayout2ui4",c);class _ extends Os{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u){const h=this.length;return this.resize(h+1),this.emplace(h,u)}emplace(u,h){return this.uint16[1*u+0]=h,u}}_.prototype.bytesPerElement=2,xr("StructArrayLayout1ui2",_);class M extends Os{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,h,v,w){const K=this.length;return this.resize(K+1),this.emplace(K,u,h,v,w)}emplace(u,h,v,w,K){const F=4*u;return this.float32[F+0]=h,this.float32[F+1]=v,this.float32[F+2]=w,this.float32[F+3]=K,u}}M.prototype.bytesPerElement=16,xr("StructArrayLayout4f16",M);class T extends hA{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new U(this.anchorPointX,this.anchorPointY)}}T.prototype.size=20;class z extends su{get(u){return new T(this,u)}}xr("CollisionBoxArray",z);class q extends hA{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(u){this._structArray.uint8[this._pos1+37]=u}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(u){this._structArray.uint8[this._pos1+38]=u}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(u){this._structArray.uint32[this._pos4+10]=u}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}q.prototype.size=48;class te extends fA{get(u){return new q(this,u)}}xr("PlacedSymbolArray",te);class ae extends hA{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(u){this._structArray.uint32[this._pos4+12]=u}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}ae.prototype.size=64;class be extends jl{get(u){return new ae(this,u)}}xr("SymbolInstanceArray",be);class ke extends Xc{getoffsetX(u){return this.float32[1*u+0]}}xr("GlyphOffsetArray",ke);class Te extends ks{getx(u){return this.int16[3*u+0]}gety(u){return this.int16[3*u+1]}gettileUnitDistanceFromAnchor(u){return this.int16[3*u+2]}}xr("SymbolLineVertexArray",Te);class $e extends hA{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}$e.prototype.size=12;class Xe extends I{get(u){return new $e(this,u)}}xr("TextAnchorOffsetArray",Xe);class mt extends hA{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}mt.prototype.size=8;class ut extends a{get(u){return new mt(this,u)}}xr("FeatureIndexArray",ut);class ft extends Zu{}class vt extends Zu{}class Et extends Zu{}class kt extends bu{}class Rt extends Cl{}class Ut extends ou{}class It extends Ic{}class rn extends xu{}class Zt extends ha{}class Mn extends Qs{}class En extends au{}class bn extends Mu{}class On extends Ac{}class zn extends c{}const Ln=Is([{name:"a_pos",components:2,type:"Int16"}],4),{members:Tr}=Ln;class Zr{constructor(u=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=u}prepareSegment(u,h,v,w){const K=this.segments[this.segments.length-1];return u>Zr.MAX_VERTEX_ARRAY_LENGTH&&it(`Max vertices per segment is ${Zr.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${u}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${Zr.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!K||K.vertexLength+u>Zr.MAX_VERTEX_ARRAY_LENGTH||K.sortKey!==w?this.createNewSegment(h,v,w):K}createNewSegment(u,h,v){const w={vertexOffset:u.length,primitiveOffset:h.length,vertexLength:0,primitiveLength:0,vaos:{}};return v!==void 0&&(w.sortKey=v),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(w),w}getOrCreateLatestSegment(u,h,v){return this.prepareSegment(0,u,h,v)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const u of this.segments)for(const h in u.vaos)u.vaos[h].destroy()}static simpleSegment(u,h,v,w){return new Zr([{vertexOffset:u,primitiveOffset:h,vertexLength:v,primitiveLength:w,vaos:{},sortKey:0}])}}function Xi(d,u){return 256*(d=bt(Math.floor(d),0,255))+bt(Math.floor(u),0,255)}Zr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,xr("SegmentVector",Zr);const _o=Is([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var ki,os,Yo,Ao={exports:{}},po={exports:{}},Fa={exports:{}},ss=function(){if(Yo)return Ao.exports;Yo=1;var d=(ki||(ki=1,po.exports=function(h,v){var w,K,F,W,X,ie,de,_e;for(K=h.length-(w=3&h.length),F=v,X=3432918353,ie=461845907,_e=0;_e<K;)de=255&h.charCodeAt(_e)|(255&h.charCodeAt(++_e))<<8|(255&h.charCodeAt(++_e))<<16|(255&h.charCodeAt(++_e))<<24,++_e,F=27492+(65535&(W=5*(65535&(F=(F^=de=(65535&(de=(de=(65535&de)*X+(((de>>>16)*X&65535)<<16)&4294967295)<<15|de>>>17))*ie+(((de>>>16)*ie&65535)<<16)&4294967295)<<13|F>>>19))+((5*(F>>>16)&65535)<<16)&4294967295))+((58964+(W>>>16)&65535)<<16);switch(de=0,w){case 3:de^=(255&h.charCodeAt(_e+2))<<16;case 2:de^=(255&h.charCodeAt(_e+1))<<8;case 1:F^=de=(65535&(de=(de=(65535&(de^=255&h.charCodeAt(_e)))*X+(((de>>>16)*X&65535)<<16)&4294967295)<<15|de>>>17))*ie+(((de>>>16)*ie&65535)<<16)&4294967295}return F^=h.length,F=2246822507*(65535&(F^=F>>>16))+((2246822507*(F>>>16)&65535)<<16)&4294967295,F=3266489909*(65535&(F^=F>>>13))+((3266489909*(F>>>16)&65535)<<16)&4294967295,(F^=F>>>16)>>>0}),po.exports),u=(os||(os=1,Fa.exports=function(h,v){for(var w,K=h.length,F=v^K,W=0;K>=4;)w=1540483477*(65535&(w=255&h.charCodeAt(W)|(255&h.charCodeAt(++W))<<8|(255&h.charCodeAt(++W))<<16|(255&h.charCodeAt(++W))<<24))+((1540483477*(w>>>16)&65535)<<16),F=1540483477*(65535&F)+((1540483477*(F>>>16)&65535)<<16)^(w=1540483477*(65535&(w^=w>>>24))+((1540483477*(w>>>16)&65535)<<16)),K-=4,++W;switch(K){case 3:F^=(255&h.charCodeAt(W+2))<<16;case 2:F^=(255&h.charCodeAt(W+1))<<8;case 1:F=1540483477*(65535&(F^=255&h.charCodeAt(W)))+((1540483477*(F>>>16)&65535)<<16)}return F=1540483477*(65535&(F^=F>>>13))+((1540483477*(F>>>16)&65535)<<16),(F^=F>>>15)>>>0}),Fa.exports);return Ao.exports=d,Ao.exports.murmur3=d,Ao.exports.murmur2=u,Ao.exports}(),es=f(ss);class wa{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(u,h,v,w){this.ids.push(DA(u)),this.positions.push(h,v,w)}getPositions(u){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const h=DA(u);let v=0,w=this.ids.length-1;for(;v<w;){const F=v+w>>1;this.ids[F]>=h?w=F:v=F+1}const K=[];for(;this.ids[v]===h;)K.push({index:this.positions[3*v],start:this.positions[3*v+1],end:this.positions[3*v+2]}),v++;return K}static serialize(u,h){const v=new Float64Array(u.ids),w=new Uint32Array(u.positions);return wu(v,w,0,v.length-1),h&&h.push(v.buffer,w.buffer),{ids:v,positions:w}}static deserialize(u){const h=new wa;return h.ids=u.ids,h.positions=u.positions,h.indexed=!0,h}}function DA(d){const u=+d;return!isNaN(u)&&u<=Number.MAX_SAFE_INTEGER?u:es(String(d))}function wu(d,u,h,v){for(;h<v;){const w=d[h+v>>1];let K=h-1,F=v+1;for(;;){do K++;while(d[K]<w);do F--;while(d[F]>w);if(K>=F)break;_l(d,K,F),_l(u,3*K,3*F),_l(u,3*K+1,3*F+1),_l(u,3*K+2,3*F+2)}F-h<v-F?(wu(d,u,h,F),h=F+1):(wu(d,u,F+1,v),v=F)}}function _l(d,u,h){const v=d[u];d[u]=d[h],d[h]=v}xr("FeaturePositionMap",wa);class La{constructor(u,h){this.gl=u.gl,this.location=h}}class Xu extends La{constructor(u,h){super(u,h),this.current=0}set(u){this.current!==u&&(this.current=u,this.gl.uniform1f(this.location,u))}}class pA extends La{constructor(u,h){super(u,h),this.current=[0,0,0,0]}set(u){u[0]===this.current[0]&&u[1]===this.current[1]&&u[2]===this.current[2]&&u[3]===this.current[3]||(this.current=u,this.gl.uniform4f(this.location,u[0],u[1],u[2],u[3]))}}class mA extends La{constructor(u,h){super(u,h),this.current=xi.transparent}set(u){u.r===this.current.r&&u.g===this.current.g&&u.b===this.current.b&&u.a===this.current.a||(this.current=u,this.gl.uniform4f(this.location,u.r,u.g,u.b,u.a))}}const Sa=new Float32Array(16);function lu(d){return[Xi(255*d.r,255*d.g),Xi(255*d.b,255*d.a)]}class Ua{constructor(u,h,v){this.value=u,this.uniformNames=h.map(w=>`u_${w}`),this.type=v}setUniform(u,h,v){u.set(v.constantOr(this.value))}getBinding(u,h,v){return this.type==="color"?new mA(u,h):new Xu(u,h)}}class gA{constructor(u,h){this.uniformNames=h.map(v=>`u_${v}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(u,h){this.pixelRatioFrom=h.pixelRatio,this.pixelRatioTo=u.pixelRatio,this.patternFrom=h.tlbr,this.patternTo=u.tlbr}setUniform(u,h,v,w){const K=w==="u_pattern_to"?this.patternTo:w==="u_pattern_from"?this.patternFrom:w==="u_pixel_ratio_to"?this.pixelRatioTo:w==="u_pixel_ratio_from"?this.pixelRatioFrom:null;K&&u.set(K)}getBinding(u,h,v){return v.substr(0,9)==="u_pattern"?new pA(u,h):new Xu(u,h)}}class hs{constructor(u,h,v,w){this.expression=u,this.type=v,this.maxValue=0,this.paintVertexAttributes=h.map(K=>({name:`a_${K}`,type:"Float32",components:v==="color"?2:1,offset:0})),this.paintVertexArray=new w}populatePaintArray(u,h,v,w,K){const F=this.paintVertexArray.length,W=this.expression.evaluate(new Uo(0),h,{},w,[],K);this.paintVertexArray.resize(u),this._setPaintValue(F,u,W)}updatePaintArray(u,h,v,w){const K=this.expression.evaluate({zoom:0},v,w);this._setPaintValue(u,h,K)}_setPaintValue(u,h,v){if(this.type==="color"){const w=lu(v);for(let K=u;K<h;K++)this.paintVertexArray.emplace(K,w[0],w[1])}else{for(let w=u;w<h;w++)this.paintVertexArray.emplace(w,v);this.maxValue=Math.max(this.maxValue,Math.abs(v))}}upload(u){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=u.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class zo{constructor(u,h,v,w,K,F){this.expression=u,this.uniformNames=h.map(W=>`u_${W}_t`),this.type=v,this.useIntegerZoom=w,this.zoom=K,this.maxValue=0,this.paintVertexAttributes=h.map(W=>({name:`a_${W}`,type:"Float32",components:v==="color"?4:2,offset:0})),this.paintVertexArray=new F}populatePaintArray(u,h,v,w,K){const F=this.expression.evaluate(new Uo(this.zoom),h,{},w,[],K),W=this.expression.evaluate(new Uo(this.zoom+1),h,{},w,[],K),X=this.paintVertexArray.length;this.paintVertexArray.resize(u),this._setPaintValue(X,u,F,W)}updatePaintArray(u,h,v,w){const K=this.expression.evaluate({zoom:this.zoom},v,w),F=this.expression.evaluate({zoom:this.zoom+1},v,w);this._setPaintValue(u,h,K,F)}_setPaintValue(u,h,v,w){if(this.type==="color"){const K=lu(v),F=lu(w);for(let W=u;W<h;W++)this.paintVertexArray.emplace(W,K[0],K[1],F[0],F[1])}else{for(let K=u;K<h;K++)this.paintVertexArray.emplace(K,v,w);this.maxValue=Math.max(this.maxValue,Math.abs(v),Math.abs(w))}}upload(u){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=u.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(u,h){const v=this.useIntegerZoom?Math.floor(h.zoom):h.zoom,w=bt(this.expression.interpolationFactor(v,this.zoom,this.zoom+1),0,1);u.set(w)}getBinding(u,h,v){return new Xu(u,h)}}class za{constructor(u,h,v,w,K,F){this.expression=u,this.type=h,this.useIntegerZoom=v,this.zoom=w,this.layerId=F,this.zoomInPaintVertexArray=new K,this.zoomOutPaintVertexArray=new K}populatePaintArray(u,h,v){const w=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(u),this.zoomOutPaintVertexArray.resize(u),this._setPaintValues(w,u,h.patterns&&h.patterns[this.layerId],v)}updatePaintArray(u,h,v,w,K){this._setPaintValues(u,h,v.patterns&&v.patterns[this.layerId],K)}_setPaintValues(u,h,v,w){if(!w||!v)return;const{min:K,mid:F,max:W}=v,X=w[K],ie=w[F],de=w[W];if(X&&ie&&de)for(let _e=u;_e<h;_e++)this.zoomInPaintVertexArray.emplace(_e,ie.tl[0],ie.tl[1],ie.br[0],ie.br[1],X.tl[0],X.tl[1],X.br[0],X.br[1],ie.pixelRatio,X.pixelRatio),this.zoomOutPaintVertexArray.emplace(_e,ie.tl[0],ie.tl[1],ie.br[0],ie.br[1],de.tl[0],de.tl[1],de.br[0],de.br[1],ie.pixelRatio,de.pixelRatio)}upload(u){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=u.createVertexBuffer(this.zoomInPaintVertexArray,_o.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=u.createVertexBuffer(this.zoomOutPaintVertexArray,_o.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class ja{constructor(u,h,v){this.binders={},this._buffers=[];const w=[];for(const K in u.paint._values){if(!v(K))continue;const F=u.paint.get(K);if(!(F instanceof Eo&&Ka(F.property.specification)))continue;const W=zf(K,u.type),X=F.value,ie=F.property.specification.type,de=F.property.useIntegerZoom,_e=F.property.specification["property-type"],Re=_e==="cross-faded"||_e==="cross-faded-data-driven";if(X.kind==="constant")this.binders[K]=Re?new gA(X.value,W):new Ua(X.value,W,ie),w.push(`/u_${K}`);else if(X.kind==="source"||Re){const ze=Eh(K,ie,"source");this.binders[K]=Re?new za(X,ie,de,h,ze,u.id):new hs(X,W,ie,ze),w.push(`/a_${K}`)}else{const ze=Eh(K,ie,"composite");this.binders[K]=new zo(X,W,ie,de,h,ze),w.push(`/z_${K}`)}}this.cacheKey=w.sort().join("")}getMaxValue(u){const h=this.binders[u];return h instanceof hs||h instanceof zo?h.maxValue:0}populatePaintArrays(u,h,v,w,K){for(const F in this.binders){const W=this.binders[F];(W instanceof hs||W instanceof zo||W instanceof za)&&W.populatePaintArray(u,h,v,w,K)}}setConstantPatternPositions(u,h){for(const v in this.binders){const w=this.binders[v];w instanceof gA&&w.setConstantPatternPositions(u,h)}}updatePaintArrays(u,h,v,w,K){let F=!1;for(const W in u){const X=h.getPositions(W);for(const ie of X){const de=v.feature(ie.index);for(const _e in this.binders){const Re=this.binders[_e];if((Re instanceof hs||Re instanceof zo||Re instanceof za)&&Re.expression.isStateDependent===!0){const ze=w.paint.get(_e);Re.expression=ze.value,Re.updatePaintArray(ie.start,ie.end,de,u[W],K),F=!0}}}}return F}defines(){const u=[];for(const h in this.binders){const v=this.binders[h];(v instanceof Ua||v instanceof gA)&&u.push(...v.uniformNames.map(w=>`#define HAS_UNIFORM_${w}`))}return u}getBinderAttributes(){const u=[];for(const h in this.binders){const v=this.binders[h];if(v instanceof hs||v instanceof zo)for(let w=0;w<v.paintVertexAttributes.length;w++)u.push(v.paintVertexAttributes[w].name);else if(v instanceof za)for(let w=0;w<_o.members.length;w++)u.push(_o.members[w].name)}return u}getBinderUniforms(){const u=[];for(const h in this.binders){const v=this.binders[h];if(v instanceof Ua||v instanceof gA||v instanceof zo)for(const w of v.uniformNames)u.push(w)}return u}getPaintVertexBuffers(){return this._buffers}getUniforms(u,h){const v=[];for(const w in this.binders){const K=this.binders[w];if(K instanceof Ua||K instanceof gA||K instanceof zo){for(const F of K.uniformNames)if(h[F]){const W=K.getBinding(u,h[F],F);v.push({name:F,property:w,binding:W})}}}return v}setUniforms(u,h,v,w){for(const{name:K,property:F,binding:W}of h)this.binders[F].setUniform(W,w,v.get(F),K)}updatePaintBuffers(u){this._buffers=[];for(const h in this.binders){const v=this.binders[h];if(u&&v instanceof za){const w=u.fromScale===2?v.zoomInPaintVertexBuffer:v.zoomOutPaintVertexBuffer;w&&this._buffers.push(w)}else(v instanceof hs||v instanceof zo)&&v.paintVertexBuffer&&this._buffers.push(v.paintVertexBuffer)}}upload(u){for(const h in this.binders){const v=this.binders[h];(v instanceof hs||v instanceof zo||v instanceof za)&&v.upload(u)}this.updatePaintBuffers()}destroy(){for(const u in this.binders){const h=this.binders[u];(h instanceof hs||h instanceof zo||h instanceof za)&&h.destroy()}}}class yA{constructor(u,h,v=()=>!0){this.programConfigurations={};for(const w of u)this.programConfigurations[w.id]=new ja(w,h,v);this.needsUpload=!1,this._featureMap=new wa,this._bufferOffset=0}populatePaintArrays(u,h,v,w,K,F){for(const W in this.programConfigurations)this.programConfigurations[W].populatePaintArrays(u,h,w,K,F);h.id!==void 0&&this._featureMap.add(h.id,v,this._bufferOffset,u),this._bufferOffset=u,this.needsUpload=!0}updatePaintArrays(u,h,v,w){for(const K of v)this.needsUpload=this.programConfigurations[K.id].updatePaintArrays(u,this._featureMap,h,K,w)||this.needsUpload}get(u){return this.programConfigurations[u]}upload(u){if(this.needsUpload){for(const h in this.programConfigurations)this.programConfigurations[h].upload(u);this.needsUpload=!1}}destroy(){for(const u in this.programConfigurations)this.programConfigurations[u].destroy()}}function zf(d,u){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[d]||[d.replace(`${u}-`,"").replace(/-/g,"_")]}function Eh(d,u,h){const v={color:{source:ou,composite:M},number:{source:Xc,composite:ou}},w=function(K){return{"line-pattern":{source:It,composite:It},"fill-pattern":{source:It,composite:It},"fill-extrusion-pattern":{source:It,composite:It}}[K]}(d);return w&&w[h]||v[u][h]}xr("ConstantBinder",Ua),xr("CrossFadedConstantBinder",gA),xr("SourceExpressionBinder",hs),xr("CrossFadedCompositeBinder",za),xr("CompositeExpressionBinder",zo),xr("ProgramConfiguration",ja,{omit:["_buffers"]}),xr("ProgramConfigurationSet",yA);const jf=Math.pow(2,14)-1,Bh=-jf-1;function cc(d){const u=at/d.extent,h=d.loadGeometry();for(let v=0;v<h.length;v++){const w=h[v];for(let K=0;K<w.length;K++){const F=w[K],W=Math.round(F.x*u),X=Math.round(F.y*u);F.x=bt(W,Bh,jf),F.y=bt(X,Bh,jf),(W<F.x||W>F.x+1||X<F.y||X>F.y+1)&&it("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return h}function Ts(d,u){return{type:d.type,id:d.id,properties:d.properties,geometry:u?cc(d):[]}}const Su=-32768;function Jd(d,u,h,v,w){d.emplaceBack(Su+8*u+v,Su+8*h+w)}class af{constructor(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(h=>h.id),this.index=u.index,this.hasPattern=!1,this.layoutVertexArray=new vt,this.indexArray=new On,this.segments=new Zr,this.programConfigurations=new yA(u.layers,u.zoom),this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(u,h,v){const w=this.layers[0],K=[];let F=null,W=!1,X=w.type==="heatmap";if(w.type==="circle"){const de=w;F=de.layout.get("circle-sort-key"),W=!F.isConstant(),X=X||de.paint.get("circle-pitch-alignment")==="map"}const ie=X?h.subdivisionGranularity.circle:1;for(const{feature:de,id:_e,index:Re,sourceLayerIndex:ze}of u){const We=this.layers[0]._featureFilter.needGeometry,et=Ts(de,We);if(!this.layers[0]._featureFilter.filter(new Uo(this.zoom),et,v))continue;const At=W?F.evaluate(et,{},v):void 0,Ct={id:_e,properties:de.properties,type:de.type,sourceLayerIndex:ze,index:Re,geometry:We?et.geometry:cc(de),patterns:{},sortKey:At};K.push(Ct)}W&&K.sort((de,_e)=>de.sortKey-_e.sortKey);for(const de of K){const{geometry:_e,index:Re,sourceLayerIndex:ze}=de,We=u[Re].feature;this.addFeature(de,_e,Re,v,ie),h.featureIndex.insert(We,_e,Re,ze,this.index)}}update(u,h,v){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,h,this.stateDependentLayers,v)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,Tr),this.indexBuffer=u.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(u),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(u,h,v,w,K=1){let F;switch(K){case 1:F=[0,7];break;case 3:F=[0,2,5,7];break;case 5:F=[0,1,3,4,6,7];break;case 7:F=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${K}; valid values are 1, 3, 5, 7.`)}const W=F.length;for(const X of h)for(const ie of X){const de=ie.x,_e=ie.y;if(de<0||de>=at||_e<0||_e>=at)continue;const Re=this.segments.prepareSegment(W*W,this.layoutVertexArray,this.indexArray,u.sortKey),ze=Re.vertexLength;for(let We=0;We<W;We++)for(let et=0;et<W;et++)Jd(this.layoutVertexArray,de,_e,F[et],F[We]);for(let We=0;We<W-1;We++)for(let et=0;et<W-1;et++){const At=ze+We*W+et,Ct=ze+(We+1)*W+et;this.indexArray.emplaceBack(At,Ct+1,At+1),this.indexArray.emplaceBack(At,Ct,Ct+1)}Re.vertexLength+=W*W,Re.primitiveLength+=(W-1)*(W-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,v,{},w)}}function kc(d,u){for(let h=0;h<d.length;h++)if(LA(u,d[h]))return!0;for(let h=0;h<u.length;h++)if(LA(d,u[h]))return!0;return!!Oh(d,u)}function FA(d,u,h){return!!LA(d,u)||!!Ed(u,d,h)}function ll(d,u){if(d.length===1)return Mp(u,d[0]);for(let h=0;h<u.length;h++){const v=u[h];for(let w=0;w<v.length;w++)if(LA(d,v[w]))return!0}for(let h=0;h<d.length;h++)if(Mp(u,d[h]))return!0;for(let h=0;h<u.length;h++)if(Oh(d,u[h]))return!0;return!1}function xp(d,u,h){if(d.length>1){if(Oh(d,u))return!0;for(let v=0;v<u.length;v++)if(Ed(u[v],d,h))return!0}for(let v=0;v<d.length;v++)if(Ed(d[v],u,h))return!0;return!1}function Oh(d,u){if(d.length===0||u.length===0)return!1;for(let h=0;h<d.length-1;h++){const v=d[h],w=d[h+1];for(let K=0;K<u.length-1;K++)if(lm(v,w,u[K],u[K+1]))return!0}return!1}function lm(d,u,h,v){return _t(d,h,v)!==_t(u,h,v)&&_t(d,u,h)!==_t(d,u,v)}function Ed(d,u,h){const v=h*h;if(u.length===1)return d.distSqr(u[0])<v;for(let w=1;w<u.length;w++)if(Ih(d,u[w-1],u[w])<v)return!0;return!1}function Ih(d,u,h){const v=u.distSqr(h);if(v===0)return d.distSqr(u);const w=((d.x-u.x)*(h.x-u.x)+(d.y-u.y)*(h.y-u.y))/v;return d.distSqr(w<0?u:w>1?h:h.sub(u)._mult(w)._add(u))}function Mp(d,u){let h,v,w,K=!1;for(let F=0;F<d.length;F++){h=d[F];for(let W=0,X=h.length-1;W<h.length;X=W++)v=h[W],w=h[X],v.y>u.y!=w.y>u.y&&u.x<(w.x-v.x)*(u.y-v.y)/(w.y-v.y)+v.x&&(K=!K)}return K}function LA(d,u){let h=!1;for(let v=0,w=d.length-1;v<d.length;w=v++){const K=d[v],F=d[w];K.y>u.y!=F.y>u.y&&u.x<(F.x-K.x)*(u.y-K.y)/(F.y-K.y)+K.x&&(h=!h)}return h}function wp(d,u,h){const v=h[0],w=h[2];if(d.x<v.x&&u.x<v.x||d.x>w.x&&u.x>w.x||d.y<v.y&&u.y<v.y||d.y>w.y&&u.y>w.y)return!1;const K=_t(d,u,h[0]);return K!==_t(d,u,h[1])||K!==_t(d,u,h[2])||K!==_t(d,u,h[3])}function Jc(d,u,h){const v=u.paint.get(d).value;return v.kind==="constant"?v.value:h.programConfigurations.get(u.id).getMaxValue(d)}function lf(d){return Math.sqrt(d[0]*d[0]+d[1]*d[1])}function ed(d,u,h,v,w){if(!u[0]&&!u[1])return d;const K=U.convert(u)._mult(w);h==="viewport"&&K._rotate(-v);const F=[];for(let W=0;W<d.length;W++)F.push(d[W].sub(K));return F}let uf,Af;xr("CircleBucket",af,{omit:["layers"]});var um={get paint(){return Af=Af||new sl({"circle-radius":new ei(J.paint_circle["circle-radius"]),"circle-color":new ei(J.paint_circle["circle-color"]),"circle-blur":new ei(J.paint_circle["circle-blur"]),"circle-opacity":new ei(J.paint_circle["circle-opacity"]),"circle-translate":new Kr(J.paint_circle["circle-translate"]),"circle-translate-anchor":new Kr(J.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Kr(J.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Kr(J.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new ei(J.paint_circle["circle-stroke-width"]),"circle-stroke-color":new ei(J.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new ei(J.paint_circle["circle-stroke-opacity"])})},get layout(){return uf=uf||new sl({"circle-sort-key":new ei(J.layout_circle["circle-sort-key"])})}};class eh extends al{constructor(u){super(u,um)}createBucket(u){return new af(u)}queryRadius(u){const h=u;return Jc("circle-radius",this,h)+Jc("circle-stroke-width",this,h)+lf(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:u,feature:h,featureState:v,geometry:w,transform:K,pixelsToTileUnits:F,pixelPosMatrix:W}){const X=ed(u,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-K.bearingInRadians,F),ie=this.paint.get("circle-radius").evaluate(h,v)+this.paint.get("circle-stroke-width").evaluate(h,v),de=this.paint.get("circle-pitch-alignment")==="map",_e=de?X:function(ze,We){return ze.map(et=>cf(et,We))}(X,W),Re=de?ie*F:ie;for(const ze of w)for(const We of ze){const et=de?We:cf(We,W);let At=Re;const Ct=me([],[We.x,We.y,0,1],W);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?At*=Ct[3]/K.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(At*=K.cameraToCenterDistance/Ct[3]),FA(_e,et,At))return!0}return!1}}function cf(d,u){const h=me([],[d.x,d.y,0,1],u);return new U(h[0]/h[3],h[1]/h[3])}class El extends af{}let Nl;xr("HeatmapBucket",El,{omit:["layers"]});var Qm={get paint(){return Nl=Nl||new sl({"heatmap-radius":new ei(J.paint_heatmap["heatmap-radius"]),"heatmap-weight":new ei(J.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Kr(J.paint_heatmap["heatmap-intensity"]),"heatmap-color":new rf(J.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Kr(J.paint_heatmap["heatmap-opacity"])})}};function Nf(d,{width:u,height:h},v,w){if(w){if(w instanceof Uint8ClampedArray)w=new Uint8Array(w.buffer);else if(w.length!==u*h*v)throw new RangeError(`mismatched image size. expected: ${w.length} but got: ${u*h*v}`)}else w=new Uint8Array(u*h*v);return d.width=u,d.height=h,d.data=w,d}function Ho(d,{width:u,height:h},v){if(u===d.width&&h===d.height)return;const w=Nf({},{width:u,height:h},v);Wf(d,w,{x:0,y:0},{x:0,y:0},{width:Math.min(d.width,u),height:Math.min(d.height,h)},v),d.width=u,d.height=h,d.data=w.data}function Wf(d,u,h,v,w,K){if(w.width===0||w.height===0)return u;if(w.width>d.width||w.height>d.height||h.x>d.width-w.width||h.y>d.height-w.height)throw new RangeError("out of range source coordinates for image copy");if(w.width>u.width||w.height>u.height||v.x>u.width-w.width||v.y>u.height-w.height)throw new RangeError("out of range destination coordinates for image copy");const F=d.data,W=u.data;if(F===W)throw new Error("srcData equals dstData, so image is already copied");for(let X=0;X<w.height;X++){const ie=((h.y+X)*d.width+h.x)*K,de=((v.y+X)*u.width+v.x)*K;for(let _e=0;_e<w.width*K;_e++)W[de+_e]=F[ie+_e]}return u}class Bd{constructor(u,h){Nf(this,u,1,h)}resize(u){Ho(this,u,1)}clone(){return new Bd({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(u,h,v,w,K){Wf(u,h,v,w,K,1)}}class Bl{constructor(u,h){Nf(this,u,4,h)}resize(u){Ho(this,u,4)}replace(u,h){h?this.data.set(u):this.data=u instanceof Uint8ClampedArray?new Uint8Array(u.buffer):u}clone(){return new Bl({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(u,h,v,w,K){Wf(u,h,v,w,K,4)}}function vA(d){const u={},h=d.resolution||256,v=d.clips?d.clips.length:1,w=d.image||new Bl({width:h,height:v});if(Math.log(h)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${h}`);const K=(F,W,X)=>{u[d.evaluationKey]=X;const ie=d.expression.evaluate(u);w.data[F+W+0]=Math.floor(255*ie.r/ie.a),w.data[F+W+1]=Math.floor(255*ie.g/ie.a),w.data[F+W+2]=Math.floor(255*ie.b/ie.a),w.data[F+W+3]=Math.floor(255*ie.a)};if(d.clips)for(let F=0,W=0;F<v;++F,W+=4*h)for(let X=0,ie=0;X<h;X++,ie+=4){const de=X/(h-1),{start:_e,end:Re}=d.clips[F];K(W,ie,_e*(1-de)+Re*de)}else for(let F=0,W=0;F<h;F++,W+=4)K(0,W,F/(h-1));return w}xr("AlphaImage",Bd),xr("RGBAImage",Bl);const th="big-fb";class Sp extends al{createBucket(u){return new El(u)}constructor(u){super(u,Qm),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(u){u==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=vA({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(th)&&this.heatmapFbos.delete(th)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let dc;var df={get paint(){return dc=dc||new sl({"hillshade-illumination-direction":new Kr(J.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Kr(J.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Kr(J.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Kr(J.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Kr(J.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Kr(J.paint_hillshade["hillshade-accent-color"])})}};class hf extends al{constructor(u){super(u,df)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const ff=Is([{name:"a_pos",components:2,type:"Int16"}],4),{members:kh}=ff;function Tc(d,u,h){const v=h.patternDependencies;let w=!1;for(const K of u){const F=K.paint.get(`${d}-pattern`);F.isConstant()||(w=!0);const W=F.constantOr(null);W&&(w=!0,v[W.to]=!0,v[W.from]=!0)}return w}function wi(d,u,h,v,w){const K=w.patternDependencies;for(const F of u){const W=F.paint.get(`${d}-pattern`).value;if(W.kind!=="constant"){let X=W.evaluate({zoom:v-1},h,{},w.availableImages),ie=W.evaluate({zoom:v},h,{},w.availableImages),de=W.evaluate({zoom:v+1},h,{},w.availableImages);X=X&&X.name?X.name:X,ie=ie&&ie.name?ie.name:ie,de=de&&de.name?de.name:de,K[X]=!0,K[ie]=!0,K[de]=!0,h.patterns[F.id]={min:X,mid:ie,max:de}}}return h}function Th(d,u,h,v,w){let K;if(w===function(F,W,X,ie){let de=0;for(let _e=W,Re=X-ie;_e<X;_e+=ie)de+=(F[Re]-F[_e])*(F[_e+1]+F[Re+1]),Re=_e;return de}(d,u,h,v)>0)for(let F=u;F<h;F+=v)K=je(F/v|0,d[F],d[F+1],K);else for(let F=h-v;F>=u;F-=v)K=je(F/v|0,d[F],d[F+1],K);return K&&E(K,K.next)&&(gt(K),K=K.next),K}function bo(d,u){if(!d)return d;u||(u=d);let h,v=d;do if(h=!1,v.steiner||!E(v,v.next)&&S(v.prev,v,v.next)!==0)v=v.next;else{if(gt(v),v=u=v.prev,v===v.next)break;h=!0}while(h||v!==u);return u}function UA(d,u,h,v,w,K,F){if(!d)return;!F&&K&&function(X,ie,de,_e){let Re=X;do Re.z===0&&(Re.z=Ph(Re.x,Re.y,ie,de,_e)),Re.prevZ=Re.prev,Re.nextZ=Re.next,Re=Re.next;while(Re!==X);Re.prevZ.nextZ=null,Re.prevZ=null,function(ze){let We,et=1;do{let At,Ct=ze;ze=null;let Nt=null;for(We=0;Ct;){We++;let St=Ct,Le=0;for(let Bt=0;Bt<et&&(Le++,St=St.nextZ,St);Bt++);let lt=et;for(;Le>0||lt>0&&St;)Le!==0&&(lt===0||!St||Ct.z<=St.z)?(At=Ct,Ct=Ct.nextZ,Le--):(At=St,St=St.nextZ,lt--),Nt?Nt.nextZ=At:ze=At,At.prevZ=Nt,Nt=At;Ct=St}Nt.nextZ=null,et*=2}while(We>1)}(Re)}(d,v,w,K);let W=d;for(;d.prev!==d.next;){const X=d.prev,ie=d.next;if(K?Eu(d,v,w,K):Ep(d))u.push(X.i,d.i,ie.i),gt(d),d=ie.next,W=ie.next;else if((d=ie)===W){F?F===1?UA(d=Ym(bo(d),u),u,h,v,w,K,2):F===2&&bl(d,u,h,v,w,K):UA(bo(d),u,h,v,w,K,1);break}}}function Ep(d){const u=d.prev,h=d,v=d.next;if(S(u,h,v)>=0)return!1;const w=u.x,K=h.x,F=v.x,W=u.y,X=h.y,ie=v.y,de=Math.min(w,K,F),_e=Math.min(W,X,ie),Re=Math.max(w,K,F),ze=Math.max(W,X,ie);let We=v.next;for(;We!==u;){if(We.x>=de&&We.x<=Re&&We.y>=_e&&We.y<=ze&&A(w,W,K,X,F,ie,We.x,We.y)&&S(We.prev,We,We.next)>=0)return!1;We=We.next}return!0}function Eu(d,u,h,v){const w=d.prev,K=d,F=d.next;if(S(w,K,F)>=0)return!1;const W=w.x,X=K.x,ie=F.x,de=w.y,_e=K.y,Re=F.y,ze=Math.min(W,X,ie),We=Math.min(de,_e,Re),et=Math.max(W,X,ie),At=Math.max(de,_e,Re),Ct=Ph(ze,We,u,h,v),Nt=Ph(et,At,u,h,v);let St=d.prevZ,Le=d.nextZ;for(;St&&St.z>=Ct&&Le&&Le.z<=Nt;){if(St.x>=ze&&St.x<=et&&St.y>=We&&St.y<=At&&St!==w&&St!==F&&A(W,de,X,_e,ie,Re,St.x,St.y)&&S(St.prev,St,St.next)>=0||(St=St.prevZ,Le.x>=ze&&Le.x<=et&&Le.y>=We&&Le.y<=At&&Le!==w&&Le!==F&&A(W,de,X,_e,ie,Re,Le.x,Le.y)&&S(Le.prev,Le,Le.next)>=0))return!1;Le=Le.nextZ}for(;St&&St.z>=Ct;){if(St.x>=ze&&St.x<=et&&St.y>=We&&St.y<=At&&St!==w&&St!==F&&A(W,de,X,_e,ie,Re,St.x,St.y)&&S(St.prev,St,St.next)>=0)return!1;St=St.prevZ}for(;Le&&Le.z<=Nt;){if(Le.x>=ze&&Le.x<=et&&Le.y>=We&&Le.y<=At&&Le!==w&&Le!==F&&A(W,de,X,_e,ie,Re,Le.x,Le.y)&&S(Le.prev,Le,Le.next)>=0)return!1;Le=Le.nextZ}return!0}function Ym(d,u){let h=d;do{const v=h.prev,w=h.next.next;!E(v,w)&&R(v,h,h.next,w)&&Ce(v,w)&&Ce(w,v)&&(u.push(v.i,h.i,w.i),gt(h),gt(h.next),h=d=w),h=h.next}while(h!==d);return bo(h)}function bl(d,u,h,v,w,K){let F=d;do{let W=F.next.next;for(;W!==F.prev;){if(F.i!==W.i&&g(F,W)){let X=Ie(F,W);return F=bo(F,F.next),X=bo(X,X.next),UA(F,u,h,v,w,K,0),void UA(X,u,h,v,w,K,0)}W=W.next}F=F.next}while(F!==d)}function Am(d,u){let h=d.x-u.x;return h===0&&(h=d.y-u.y,h===0)&&(h=(d.next.y-d.y)/(d.next.x-d.x)-(u.next.y-u.y)/(u.next.x-u.x)),h}function Ea(d,u){const h=function(w,K){let F=K;const W=w.x,X=w.y;let ie,de=-1/0;if(E(w,F))return F;do{if(E(w,F.next))return F.next;if(X<=F.y&&X>=F.next.y&&F.next.y!==F.y){const et=F.x+(X-F.y)*(F.next.x-F.x)/(F.next.y-F.y);if(et<=W&&et>de&&(de=et,ie=F.x<F.next.x?F:F.next,et===W))return ie}F=F.next}while(F!==K);if(!ie)return null;const _e=ie,Re=ie.x,ze=ie.y;let We=1/0;F=ie;do{if(W>=F.x&&F.x>=Re&&W!==F.x&&Gf(X<ze?W:de,X,Re,ze,X<ze?de:W,X,F.x,F.y)){const et=Math.abs(X-F.y)/(W-F.x);Ce(F,w)&&(et<We||et===We&&(F.x>ie.x||F.x===ie.x&&cm(ie,F)))&&(ie=F,We=et)}F=F.next}while(F!==_e);return ie}(d,u);if(!h)return u;const v=Ie(h,d);return bo(v,v.next),bo(h,h.next)}function cm(d,u){return S(d.prev,d,u.prev)<0&&S(u.next,d,d.next)<0}function Ph(d,u,h,v,w){return(d=1431655765&((d=858993459&((d=252645135&((d=16711935&((d=(d-h)*w|0)|d<<8))|d<<4))|d<<2))|d<<1))|(u=1431655765&((u=858993459&((u=252645135&((u=16711935&((u=(u-v)*w|0)|u<<8))|u<<4))|u<<2))|u<<1))<<1}function uu(d){let u=d,h=d;do(u.x<h.x||u.x===h.x&&u.y<h.y)&&(h=u),u=u.next;while(u!==d);return h}function Gf(d,u,h,v,w,K,F,W){return(w-F)*(u-W)>=(d-F)*(K-W)&&(d-F)*(v-W)>=(h-F)*(u-W)&&(h-F)*(K-W)>=(w-F)*(v-W)}function A(d,u,h,v,w,K,F,W){return!(d===F&&u===W)&&Gf(d,u,h,v,w,K,F,W)}function g(d,u){return d.next.i!==u.i&&d.prev.i!==u.i&&!function(h,v){let w=h;do{if(w.i!==h.i&&w.next.i!==h.i&&w.i!==v.i&&w.next.i!==v.i&&R(w,w.next,h,v))return!0;w=w.next}while(w!==h);return!1}(d,u)&&(Ce(d,u)&&Ce(u,d)&&function(h,v){let w=h,K=!1;const F=(h.x+v.x)/2,W=(h.y+v.y)/2;do w.y>W!=w.next.y>W&&w.next.y!==w.y&&F<(w.next.x-w.x)*(W-w.y)/(w.next.y-w.y)+w.x&&(K=!K),w=w.next;while(w!==h);return K}(d,u)&&(S(d.prev,d,u.prev)||S(d,u.prev,u))||E(d,u)&&S(d.prev,d,d.next)>0&&S(u.prev,u,u.next)>0)}function S(d,u,h){return(u.y-d.y)*(h.x-u.x)-(u.x-d.x)*(h.y-u.y)}function E(d,u){return d.x===u.x&&d.y===u.y}function R(d,u,h,v){const w=Ae(S(d,u,h)),K=Ae(S(d,u,v)),F=Ae(S(h,v,d)),W=Ae(S(h,v,u));return w!==K&&F!==W||!(w!==0||!Z(d,h,u))||!(K!==0||!Z(d,v,u))||!(F!==0||!Z(h,d,v))||!(W!==0||!Z(h,u,v))}function Z(d,u,h){return u.x<=Math.max(d.x,h.x)&&u.x>=Math.min(d.x,h.x)&&u.y<=Math.max(d.y,h.y)&&u.y>=Math.min(d.y,h.y)}function Ae(d){return d>0?1:d<0?-1:0}function Ce(d,u){return S(d.prev,d,d.next)<0?S(d,u,d.next)>=0&&S(d,d.prev,u)>=0:S(d,u,d.prev)<0||S(d,d.next,u)<0}function Ie(d,u){const h=Mt(d.i,d.x,d.y),v=Mt(u.i,u.x,u.y),w=d.next,K=u.prev;return d.next=u,u.prev=d,h.next=w,w.prev=h,v.next=h,h.prev=v,K.next=v,v.prev=K,v}function je(d,u,h,v){const w=Mt(d,u,h);return v?(w.next=v.next,w.prev=v,v.next.prev=w,v.next=w):(w.prev=w,w.next=w),w}function gt(d){d.next.prev=d.prev,d.prev.next=d.next,d.prevZ&&(d.prevZ.nextZ=d.nextZ),d.nextZ&&(d.nextZ.prevZ=d.prevZ)}function Mt(d,u,h){return{i:d,x:u,y:h,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class Xt{constructor(u,h){if(h>u)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=u,this._minGranularity=h}getGranularityForZoomLevel(u){return Math.max(Math.floor(this._baseZoomGranularity/(1<<u)),this._minGranularity,1)}}class Qt{constructor(u){this.fill=u.fill,this.line=u.line,this.tile=u.tile,this.stencil=u.stencil,this.circle=u.circle}}Qt.noSubdivision=new Qt({fill:new Xt(0,0),line:new Xt(0,0),tile:new Xt(0,0),stencil:new Xt(0,0),circle:1}),xr("SubdivisionGranularityExpression",Xt),xr("SubdivisionGranularitySetting",Qt);const xn=-32768,Fn=32767;class Ar{constructor(u,h){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=u,this._granularityCellSize=at/u,this._canonical=h}_getKey(u,h){return(u+=32768)<<16|(h+=32768)<<0}_vertexToIndex(u,h){if(u<-32768||h<-32768||u>32767||h>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const v=0|Math.round(u),w=0|Math.round(h),K=this._getKey(v,w);if(this._vertexDictionary.has(K))return this._vertexDictionary.get(K);const F=this._vertexBuffer.length/2;return this._vertexDictionary.set(K,F),this._vertexBuffer.push(v,w),F}_subdivideTrianglesScanline(u){if(this._granularity<2)return function(w,K){const F=[];for(let W=0;W<K.length;W+=3){const X=K[W],ie=K[W+1],de=K[W+2],_e=w[2*X],Re=w[2*X+1];(w[2*ie]-_e)*(w[2*de+1]-Re)-(w[2*ie+1]-Re)*(w[2*de]-_e)>0?(F.push(X),F.push(de),F.push(ie)):(F.push(X),F.push(ie),F.push(de))}return F}(this._vertexBuffer,u);const h=[],v=u.length;for(let w=0;w<v;w+=3){const K=[u[w+0],u[w+1],u[w+2]],F=[this._vertexBuffer[2*u[w+0]+0],this._vertexBuffer[2*u[w+0]+1],this._vertexBuffer[2*u[w+1]+0],this._vertexBuffer[2*u[w+1]+1],this._vertexBuffer[2*u[w+2]+0],this._vertexBuffer[2*u[w+2]+1]];let W=1/0,X=1/0,ie=-1/0,de=-1/0;for(let et=0;et<3;et++){const At=F[2*et],Ct=F[2*et+1];W=Math.min(W,At),ie=Math.max(ie,At),X=Math.min(X,Ct),de=Math.max(de,Ct)}if(W===ie||X===de)continue;const _e=Math.floor(W/this._granularityCellSize),Re=Math.ceil(ie/this._granularityCellSize),ze=Math.floor(X/this._granularityCellSize),We=Math.ceil(de/this._granularityCellSize);if(_e!==Re||ze!==We)for(let et=ze;et<We;et++){const At=this._scanlineGenerateVertexRingForCellRow(et,F,K);yr(this._vertexBuffer,At,h)}else h.push(...K)}return h}_scanlineGenerateVertexRingForCellRow(u,h,v){const w=u*this._granularityCellSize,K=w+this._granularityCellSize,F=[];for(let W=0;W<3;W++){const X=h[2*W],ie=h[2*W+1],de=h[2*(W+1)%6],_e=h[(2*(W+1)+1)%6],Re=h[2*(W+2)%6],ze=h[(2*(W+2)+1)%6],We=de-X,et=_e-ie,At=We===0,Ct=et===0,Nt=(w-ie)/et,St=(K-ie)/et,Le=Math.min(Nt,St),lt=Math.max(Nt,St);if(!Ct&&(Le>=1||lt<=0)||Ct&&(ie<w||ie>K)){_e>=w&&_e<=K&&F.push(v[(W+1)%3]);continue}!Ct&&Le>0&&F.push(this._vertexToIndex(X+We*Le,ie+et*Le));const Bt=X+We*Math.max(Le,0),dn=X+We*Math.min(lt,1);At||this._generateIntraEdgeVertices(F,X,ie,de,_e,Bt,dn),!Ct&&lt<1&&F.push(this._vertexToIndex(X+We*lt,ie+et*lt)),(Ct||_e>=w&&_e<=K)&&F.push(v[(W+1)%3]),!Ct&&(_e<=w||_e>=K)&&this._generateInterEdgeVertices(F,X,ie,de,_e,Re,ze,dn,w,K)}return F}_generateIntraEdgeVertices(u,h,v,w,K,F,W){const X=w-h,ie=K-v,de=ie===0,_e=de?Math.min(h,w):Math.min(F,W),Re=de?Math.max(h,w):Math.max(F,W),ze=Math.floor(_e/this._granularityCellSize)+1,We=Math.ceil(Re/this._granularityCellSize)-1;if(de?h<w:F<W)for(let et=ze;et<=We;et++){const At=et*this._granularityCellSize;u.push(this._vertexToIndex(At,v+ie*(At-h)/X))}else for(let et=We;et>=ze;et--){const At=et*this._granularityCellSize;u.push(this._vertexToIndex(At,v+ie*(At-h)/X))}}_generateInterEdgeVertices(u,h,v,w,K,F,W,X,ie,de){const _e=K-v,Re=F-w,ze=W-K,We=(ie-K)/ze,et=(de-K)/ze,At=Math.min(We,et),Ct=Math.max(We,et),Nt=w+Re*At;let St=Math.floor(Math.min(Nt,X)/this._granularityCellSize)+1,Le=Math.ceil(Math.max(Nt,X)/this._granularityCellSize)-1,lt=X<Nt;const Bt=ze===0;if(Bt&&(W===ie||W===de))return;if(Bt||At>=1||Ct<=0){const kn=v-W,An=F+(h-F)*Math.min((ie-W)/kn,(de-W)/kn);St=Math.floor(Math.min(An,X)/this._granularityCellSize)+1,Le=Math.ceil(Math.max(An,X)/this._granularityCellSize)-1,lt=X<An}const dn=_e>0?de:ie;if(lt)for(let kn=St;kn<=Le;kn++)u.push(this._vertexToIndex(kn*this._granularityCellSize,dn));else for(let kn=Le;kn>=St;kn--)u.push(this._vertexToIndex(kn*this._granularityCellSize,dn))}_generateOutline(u){const h=[];for(const v of u){const w=gr(v,this._granularity,!0),K=this._pointArrayToIndices(w),F=[];for(let W=1;W<K.length;W++)F.push(K[W-1]),F.push(K[W]);h.push(F)}return h}_handlePoles(u){let h=!1,v=!1;this._canonical&&(this._canonical.y===0&&(h=!0),this._canonical.y===(1<<this._canonical.z)-1&&(v=!0)),(h||v)&&this._fillPoles(u,h,v)}_ensureNoPoleVertices(){const u=this._vertexBuffer;for(let h=0;h<u.length;h+=2){const v=u[h+1];v===xn&&(u[h+1]=-32767),v===Fn&&(u[h+1]=32766)}}_generatePoleQuad(u,h,v,w,K,F){w>K!=(F===xn)?(u.push(h),u.push(v),u.push(this._vertexToIndex(w,F)),u.push(v),u.push(this._vertexToIndex(K,F)),u.push(this._vertexToIndex(w,F))):(u.push(v),u.push(h),u.push(this._vertexToIndex(w,F)),u.push(this._vertexToIndex(K,F)),u.push(v),u.push(this._vertexToIndex(w,F)))}_fillPoles(u,h,v){const w=this._vertexBuffer,K=at,F=u.length;for(let W=2;W<F;W+=3){const X=u[W-2],ie=u[W-1],de=u[W],_e=w[2*X],Re=w[2*X+1],ze=w[2*ie],We=w[2*ie+1],et=w[2*de],At=w[2*de+1];h&&(Re===0&&We===0&&this._generatePoleQuad(u,X,ie,_e,ze,xn),We===0&&At===0&&this._generatePoleQuad(u,ie,de,ze,et,xn),At===0&&Re===0&&this._generatePoleQuad(u,de,X,et,_e,xn)),v&&(Re===K&&We===K&&this._generatePoleQuad(u,X,ie,_e,ze,Fn),We===K&&At===K&&this._generatePoleQuad(u,ie,de,ze,et,Fn),At===K&&Re===K&&this._generatePoleQuad(u,de,X,et,_e,Fn))}}_initializeVertices(u){for(let h=0;h<u.length;h+=2)this._vertexToIndex(u[h],u[h+1])}subdividePolygonInternal(u,h){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:v,holeIndices:w}=function(W){const X=[],ie=[];for(const de of W)if(de.length!==0){de!==W[0]&&X.push(ie.length/2);for(let _e=0;_e<de.length;_e++)ie.push(de[_e].x),ie.push(de[_e].y)}return{flattened:ie,holeIndices:X}}(u);let K;this._initializeVertices(v);try{const W=function(ie,de,_e=2){const Re=de&&de.length,ze=Re?de[0]*_e:ie.length;let We=Th(ie,0,ze,_e,!0);const et=[];if(!We||We.next===We.prev)return et;let At,Ct,Nt;if(Re&&(We=function(St,Le,lt,Bt){const dn=[];for(let kn=0,An=Le.length;kn<An;kn++){const Bn=Th(St,Le[kn]*Bt,kn<An-1?Le[kn+1]*Bt:St.length,Bt,!1);Bn===Bn.next&&(Bn.steiner=!0),dn.push(uu(Bn))}dn.sort(Am);for(let kn=0;kn<dn.length;kn++)lt=Ea(dn[kn],lt);return lt}(ie,de,We,_e)),ie.length>80*_e){At=1/0,Ct=1/0;let St=-1/0,Le=-1/0;for(let lt=_e;lt<ze;lt+=_e){const Bt=ie[lt],dn=ie[lt+1];Bt<At&&(At=Bt),dn<Ct&&(Ct=dn),Bt>St&&(St=Bt),dn>Le&&(Le=dn)}Nt=Math.max(St-At,Le-Ct),Nt=Nt!==0?32767/Nt:0}return UA(We,et,_e,At,Ct,Nt,0),et}(v,w),X=this._convertIndices(v,W);K=this._subdivideTrianglesScanline(X)}catch(W){console.error(W)}let F=[];return h&&(F=this._generateOutline(u)),this._ensureNoPoleVertices(),this._handlePoles(K),{verticesFlattened:this._vertexBuffer,indicesTriangles:K,indicesLineList:F}}_convertIndices(u,h){const v=[];for(let w=0;w<h.length;w++)v.push(this._vertexToIndex(u[2*h[w]],u[2*h[w]+1]));return v}_pointArrayToIndices(u){const h=[];for(let v=0;v<u.length;v++){const w=u[v];h.push(this._vertexToIndex(w.x,w.y))}return h}}function tr(d,u,h,v=!0){return new Ar(h,u).subdividePolygonInternal(d,v)}function gr(d,u,h=!1){if(!d||d.length<1)return[];if(d.length<2)return[];const v=d[0],w=d[d.length-1],K=h&&(v.x!==w.x||v.y!==w.y);if(u<2)return K?[...d,d[0]]:[...d];const F=Math.floor(at/u),W=[];W.push(new U(d[0].x,d[0].y));const X=d.length,ie=K?X:X-1;for(let de=0;de<ie;de++){const _e=d[de],Re=de<X-1?d[de+1]:d[0],ze=_e.x,We=_e.y,et=Re.x,At=Re.y,Ct=ze!==et,Nt=We!==At;if(!Ct&&!Nt)continue;const St=et-ze,Le=At-We,lt=Math.abs(St),Bt=Math.abs(Le);let dn=ze,kn=We;for(;;){const Bn=St>0?(Math.floor(dn/F)+1)*F:(Math.ceil(dn/F)-1)*F,nr=Le>0?(Math.floor(kn/F)+1)*F:(Math.ceil(kn/F)-1)*F,jn=Math.abs(dn-Bn),cr=Math.abs(kn-nr),Tn=Math.abs(dn-et),Nr=Math.abs(kn-At),_i=Ct?jn/lt:Number.POSITIVE_INFINITY,hi=Nt?cr/Bt:Number.POSITIVE_INFINITY;if((Tn<=jn||!Ct)&&(Nr<=cr||!Nt))break;if(_i<hi&&Ct||!Nt){dn=Bn,kn+=Le*_i;const Jr=new U(dn,Math.round(kn));W[W.length-1].x===Jr.x&&W[W.length-1].y===Jr.y||W.push(Jr)}else{dn+=St*hi,kn=nr;const Jr=new U(Math.round(dn),kn);W[W.length-1].x===Jr.x&&W[W.length-1].y===Jr.y||W.push(Jr)}}const An=new U(et,At);W[W.length-1].x===An.x&&W[W.length-1].y===An.y||W.push(An)}return W}function yr(d,u,h){if(u.length===0)throw new Error("Subdivision vertex ring is empty.");let v=0,w=d[2*u[0]];for(let X=1;X<u.length;X++){const ie=d[2*u[X]];ie<w&&(w=ie,v=X)}const K=u.length;let F=v,W=(F+1)%K;for(;;){const X=F-1>=0?F-1:K-1,ie=(W+1)%K,de=d[2*u[X]],_e=d[2*u[ie]],Re=d[2*u[F]],ze=d[2*u[F]+1],We=d[2*u[W]+1];let et=!1;if(de<_e)et=!0;else if(de>_e)et=!1;else{const At=We-ze,Ct=-(d[2*u[W]]-Re),Nt=ze<We?1:-1;((de-Re)*At+(d[2*u[X]+1]-ze)*Ct)*Nt>((_e-Re)*At+(d[2*u[ie]+1]-ze)*Ct)*Nt&&(et=!0)}if(et){const At=u[X],Ct=u[F],Nt=u[W];At!==Ct&&At!==Nt&&Ct!==Nt&&h.push(Nt,Ct,At),F--,F<0&&(F=K-1)}else{const At=u[ie],Ct=u[F],Nt=u[W];At!==Ct&&At!==Nt&&Ct!==Nt&&h.push(Nt,Ct,At),W++,W>=K&&(W=0)}if(X===ie)break}}function Rr(d,u,h,v,w,K,F,W,X){const ie=w.length/2,de=F&&W&&X;if(ie<Zr.MAX_VERTEX_ARRAY_LENGTH){const _e=u.prepareSegment(ie,h,v),Re=_e.vertexLength;for(let et=0;et<K.length;et+=3)v.emplaceBack(Re+K[et],Re+K[et+1],Re+K[et+2]);let ze,We;_e.vertexLength+=ie,_e.primitiveLength+=K.length/3,de&&(We=F.prepareSegment(ie,h,W),ze=We.vertexLength,We.vertexLength+=ie);for(let et=0;et<w.length;et+=2)d(w[et],w[et+1]);if(de)for(let et=0;et<X.length;et++){const At=X[et];for(let Ct=1;Ct<At.length;Ct+=2)W.emplaceBack(ze+At[Ct-1],ze+At[Ct]);We.primitiveLength+=At.length/2}}else(function(_e,Re,ze,We,et,At){const Ct=[];for(let Bt=0;Bt<We.length/2;Bt++)Ct.push(-1);const Nt={count:0};let St=0,Le=_e.getOrCreateLatestSegment(Re,ze),lt=Le.vertexLength;for(let Bt=2;Bt<et.length;Bt+=3){const dn=et[Bt-2],kn=et[Bt-1],An=et[Bt];let Bn=Ct[dn]<St,nr=Ct[kn]<St,jn=Ct[An]<St;Le.vertexLength+((Bn?1:0)+(nr?1:0)+(jn?1:0))>Zr.MAX_VERTEX_ARRAY_LENGTH&&(Le=_e.createNewSegment(Re,ze),St=Nt.count,Bn=!0,nr=!0,jn=!0,lt=0);const cr=ti(Ct,We,At,Nt,dn,Bn,Le),Tn=ti(Ct,We,At,Nt,kn,nr,Le),Nr=ti(Ct,We,At,Nt,An,jn,Le);ze.emplaceBack(lt+cr-St,lt+Tn-St,lt+Nr-St),Le.primitiveLength++}})(u,h,v,w,K,d),de&&function(_e,Re,ze,We,et,At){const Ct=[];for(let Bt=0;Bt<We.length/2;Bt++)Ct.push(-1);const Nt={count:0};let St=0,Le=_e.getOrCreateLatestSegment(Re,ze),lt=Le.vertexLength;for(let Bt=0;Bt<et.length;Bt++){const dn=et[Bt];for(let kn=1;kn<et[Bt].length;kn+=2){const An=dn[kn-1],Bn=dn[kn];let nr=Ct[An]<St,jn=Ct[Bn]<St;Le.vertexLength+((nr?1:0)+(jn?1:0))>Zr.MAX_VERTEX_ARRAY_LENGTH&&(Le=_e.createNewSegment(Re,ze),St=Nt.count,nr=!0,jn=!0,lt=0);const cr=ti(Ct,We,At,Nt,An,nr,Le),Tn=ti(Ct,We,At,Nt,Bn,jn,Le);ze.emplaceBack(lt+cr-St,lt+Tn-St),Le.primitiveLength++}}}(F,h,W,w,X,d),u.forceNewSegmentOnNextPrepare(),F==null||F.forceNewSegmentOnNextPrepare()}function ti(d,u,h,v,w,K,F){if(K){const W=v.count;return h(u[2*w],u[2*w+1]),d[w]=v.count,v.count++,F.vertexLength++,W}return d[w]}class jr{constructor(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(h=>h.id),this.index=u.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Et,this.indexArray=new On,this.indexArray2=new zn,this.programConfigurations=new yA(u.layers,u.zoom),this.segments=new Zr,this.segments2=new Zr,this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(u,h,v){this.hasPattern=Tc("fill",this.layers,h);const w=this.layers[0].layout.get("fill-sort-key"),K=!w.isConstant(),F=[];for(const{feature:W,id:X,index:ie,sourceLayerIndex:de}of u){const _e=this.layers[0]._featureFilter.needGeometry,Re=Ts(W,_e);if(!this.layers[0]._featureFilter.filter(new Uo(this.zoom),Re,v))continue;const ze=K?w.evaluate(Re,{},v,h.availableImages):void 0,We={id:X,properties:W.properties,type:W.type,sourceLayerIndex:de,index:ie,geometry:_e?Re.geometry:cc(W),patterns:{},sortKey:ze};F.push(We)}K&&F.sort((W,X)=>W.sortKey-X.sortKey);for(const W of F){const{geometry:X,index:ie,sourceLayerIndex:de}=W;if(this.hasPattern){const _e=wi("fill",this.layers,W,this.zoom,h);this.patternFeatures.push(_e)}else this.addFeature(W,X,ie,v,{},h.subdivisionGranularity);h.featureIndex.insert(u[ie].feature,X,ie,de,this.index)}}update(u,h,v){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,h,this.stateDependentLayers,v)}addFeatures(u,h,v){for(const w of this.patternFeatures)this.addFeature(w,w.geometry,w.index,h,v,u.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,kh),this.indexBuffer=u.createIndexBuffer(this.indexArray),this.indexBuffer2=u.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(u),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(u,h,v,w,K,F){for(const W of Nc(h,500)){const X=tr(W,w,F.fill.getGranularityForZoomLevel(w.z)),ie=this.layoutVertexArray;Rr((de,_e)=>{ie.emplaceBack(de,_e)},this.segments,this.layoutVertexArray,this.indexArray,X.verticesFlattened,X.indicesTriangles,this.segments2,this.indexArray2,X.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,v,K,w)}}let Ji,Bo;xr("FillBucket",jr,{omit:["layers","patternFeatures"]});var Na={get paint(){return Bo=Bo||new sl({"fill-antialias":new Kr(J.paint_fill["fill-antialias"]),"fill-opacity":new ei(J.paint_fill["fill-opacity"]),"fill-color":new ei(J.paint_fill["fill-color"]),"fill-outline-color":new ei(J.paint_fill["fill-outline-color"]),"fill-translate":new Kr(J.paint_fill["fill-translate"]),"fill-translate-anchor":new Kr(J.paint_fill["fill-translate-anchor"]),"fill-pattern":new iu(J.paint_fill["fill-pattern"])})},get layout(){return Ji=Ji||new sl({"fill-sort-key":new ei(J.layout_fill["fill-sort-key"])})}};class na extends al{constructor(u){super(u,Na)}recalculate(u,h){super.recalculate(u,h);const v=this.paint._values["fill-outline-color"];v.value.kind==="constant"&&v.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(u){return new jr(u)}queryRadius(){return lf(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:u,geometry:h,transform:v,pixelsToTileUnits:w}){return ll(ed(u,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-v.bearingInRadians,w),h)}isTileClipped(){return!0}}const fa=Is([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Wa=Is([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Ga}=fa;var Wl,Qa,pa,as,Ci,ls,ra,Ys={};function xs(){if(Qa)return Wl;Qa=1;var d=B();function u(w,K,F,W,X){this.properties={},this.extent=F,this.type=0,this._pbf=w,this._geometry=-1,this._keys=W,this._values=X,w.readFields(h,this,K)}function h(w,K,F){w==1?K.id=F.readVarint():w==2?function(W,X){for(var ie=W.readVarint()+W.pos;W.pos<ie;){var de=X._keys[W.readVarint()],_e=X._values[W.readVarint()];X.properties[de]=_e}}(F,K):w==3?K.type=F.readVarint():w==4&&(K._geometry=F.pos)}function v(w){for(var K,F,W=0,X=0,ie=w.length,de=ie-1;X<ie;de=X++)W+=((F=w[de]).x-(K=w[X]).x)*(K.y+F.y);return W}return Wl=u,u.types=["Unknown","Point","LineString","Polygon"],u.prototype.loadGeometry=function(){var w=this._pbf;w.pos=this._geometry;for(var K,F=w.readVarint()+w.pos,W=1,X=0,ie=0,de=0,_e=[];w.pos<F;){if(X<=0){var Re=w.readVarint();W=7&Re,X=Re>>3}if(X--,W===1||W===2)ie+=w.readSVarint(),de+=w.readSVarint(),W===1&&(K&&_e.push(K),K=[]),K.push(new d(ie,de));else{if(W!==7)throw new Error("unknown command "+W);K&&K.push(K[0].clone())}}return K&&_e.push(K),_e},u.prototype.bbox=function(){var w=this._pbf;w.pos=this._geometry;for(var K=w.readVarint()+w.pos,F=1,W=0,X=0,ie=0,de=1/0,_e=-1/0,Re=1/0,ze=-1/0;w.pos<K;){if(W<=0){var We=w.readVarint();F=7&We,W=We>>3}if(W--,F===1||F===2)(X+=w.readSVarint())<de&&(de=X),X>_e&&(_e=X),(ie+=w.readSVarint())<Re&&(Re=ie),ie>ze&&(ze=ie);else if(F!==7)throw new Error("unknown command "+F)}return[de,Re,_e,ze]},u.prototype.toGeoJSON=function(w,K,F){var W,X,ie=this.extent*Math.pow(2,F),de=this.extent*w,_e=this.extent*K,Re=this.loadGeometry(),ze=u.types[this.type];function We(Ct){for(var Nt=0;Nt<Ct.length;Nt++){var St=Ct[Nt];Ct[Nt]=[360*(St.x+de)/ie-180,360/Math.PI*Math.atan(Math.exp((180-360*(St.y+_e)/ie)*Math.PI/180))-90]}}switch(this.type){case 1:var et=[];for(W=0;W<Re.length;W++)et[W]=Re[W][0];We(Re=et);break;case 2:for(W=0;W<Re.length;W++)We(Re[W]);break;case 3:for(Re=function(Ct){var Nt=Ct.length;if(Nt<=1)return[Ct];for(var St,Le,lt=[],Bt=0;Bt<Nt;Bt++){var dn=v(Ct[Bt]);dn!==0&&(Le===void 0&&(Le=dn<0),Le===dn<0?(St&&lt.push(St),St=[Ct[Bt]]):St.push(Ct[Bt]))}return St&&lt.push(St),lt}(Re),W=0;W<Re.length;W++)for(X=0;X<Re[W].length;X++)We(Re[W][X])}Re.length===1?Re=Re[0]:ze="Multi"+ze;var At={type:"Feature",geometry:{type:ze,coordinates:Re},properties:this.properties};return"id"in this&&(At.id=this.id),At},Wl}function Bu(){if(as)return pa;as=1;var d=xs();function u(v,w){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=v,this._keys=[],this._values=[],this._features=[],v.readFields(h,this,w),this.length=this._features.length}function h(v,w,K){v===15?w.version=K.readVarint():v===1?w.name=K.readString():v===5?w.extent=K.readVarint():v===2?w._features.push(K.pos):v===3?w._keys.push(K.readString()):v===4&&w._values.push(function(F){for(var W=null,X=F.readVarint()+F.pos;F.pos<X;){var ie=F.readVarint()>>3;W=ie===1?F.readString():ie===2?F.readFloat():ie===3?F.readDouble():ie===4?F.readVarint64():ie===5?F.readVarint():ie===6?F.readSVarint():ie===7?F.readBoolean():null}return W}(K))}return pa=u,u.prototype.feature=function(v){if(v<0||v>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[v];var w=this._pbf.readVarint()+this._pbf.pos;return new d(this._pbf,w,this.extent,this._keys,this._values)},pa}function Ko(){return ra||(ra=1,Ys.VectorTile=function(){if(ls)return Ci;ls=1;var d=Bu();function u(h,v,w){if(h===3){var K=new d(w,w.readVarint()+w.pos);K.length&&(v[K.name]=K)}}return Ci=function(h,v){this.layers=h.readFields(u,{},v)},Ci}(),Ys.VectorTileFeature=xs(),Ys.VectorTileLayer=Bu()),Ys}var Pc=f(Ko());const Ou=Pc.VectorTileFeature.types,zA=Math.pow(2,13);function CA(d,u,h,v,w,K,F,W){d.emplaceBack(u,h,2*Math.floor(v*zA)+F,w*zA*2,K*zA*2,Math.round(W))}class Ya{constructor(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(h=>h.id),this.index=u.index,this.hasPattern=!1,this.layoutVertexArray=new kt,this.centroidVertexArray=new ft,this.indexArray=new On,this.programConfigurations=new yA(u.layers,u.zoom),this.segments=new Zr,this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(u,h,v){this.features=[],this.hasPattern=Tc("fill-extrusion",this.layers,h);for(const{feature:w,id:K,index:F,sourceLayerIndex:W}of u){const X=this.layers[0]._featureFilter.needGeometry,ie=Ts(w,X);if(!this.layers[0]._featureFilter.filter(new Uo(this.zoom),ie,v))continue;const de={id:K,sourceLayerIndex:W,index:F,geometry:X?ie.geometry:cc(w),properties:w.properties,type:w.type,patterns:{}};this.hasPattern?this.features.push(wi("fill-extrusion",this.layers,de,this.zoom,h)):this.addFeature(de,de.geometry,F,v,{},h.subdivisionGranularity),h.featureIndex.insert(w,de.geometry,F,W,this.index,!0)}}addFeatures(u,h,v){for(const w of this.features){const{geometry:K}=w;this.addFeature(w,K,w.index,h,v,u.subdivisionGranularity)}}update(u,h,v){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,h,this.stateDependentLayers,v)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,Ga),this.centroidVertexBuffer=u.createVertexBuffer(this.centroidVertexArray,Wa.members,!0),this.indexBuffer=u.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(u),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(u,h,v,w,K,F){for(const W of Nc(h,500)){const X={x:0,y:0,sampleCount:0},ie=this.layoutVertexArray.length;this.processPolygon(X,w,u,W,F);const de=this.layoutVertexArray.length-ie,_e=Math.floor(X.x/X.sampleCount),Re=Math.floor(X.y/X.sampleCount);for(let ze=0;ze<de;ze++)this.centroidVertexArray.emplaceBack(_e,Re)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,v,K,w)}processPolygon(u,h,v,w,K){if(w.length<1||pf(w[0]))return;for(const _e of w)_e.length!==0&&Ol(u,_e);const F={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},W=K.fill.getGranularityForZoomLevel(h.z),X=Ou[v.type]==="Polygon";for(const _e of w){if(_e.length===0||pf(_e))continue;const Re=gr(_e,W,X);this._generateSideFaces(Re,F)}if(!X)return;const ie=tr(w,h,W,!1),de=this.layoutVertexArray;Rr((_e,Re)=>{CA(de,_e,Re,0,0,1,1,0)},this.segments,this.layoutVertexArray,this.indexArray,ie.verticesFlattened,ie.indicesTriangles)}_generateSideFaces(u,h){let v=0;for(let w=1;w<u.length;w++){const K=u[w],F=u[w-1];if(Qf(K,F))continue;h.segment.vertexLength+4>Zr.MAX_VERTEX_ARRAY_LENGTH&&(h.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const W=K.sub(F)._perp()._unit(),X=F.dist(K);v+X>32768&&(v=0),CA(this.layoutVertexArray,K.x,K.y,W.x,W.y,0,0,v),CA(this.layoutVertexArray,K.x,K.y,W.x,W.y,0,1,v),v+=X,CA(this.layoutVertexArray,F.x,F.y,W.x,W.y,0,0,v),CA(this.layoutVertexArray,F.x,F.y,W.x,W.y,0,1,v);const ie=h.segment.vertexLength;this.indexArray.emplaceBack(ie,ie+2,ie+1),this.indexArray.emplaceBack(ie+1,ie+2,ie+3),h.segment.vertexLength+=4,h.segment.primitiveLength+=2}}}function Ol(d,u){for(let h=0;h<u.length;h++){const v=u[h];h===u.length-1&&u[0].x===v.x&&u[0].y===v.y||(d.x+=v.x,d.y+=v.y,d.sampleCount++)}}function Qf(d,u){return d.x===u.x&&(d.x<0||d.x>at)||d.y===u.y&&(d.y<0||d.y>at)}function pf(d){return d.every(u=>u.x<0)||d.every(u=>u.x>at)||d.every(u=>u.y<0)||d.every(u=>u.y>at)}let nh;xr("FillExtrusionBucket",Ya,{omit:["layers","features"]});var qm={get paint(){return nh=nh||new sl({"fill-extrusion-opacity":new Kr(J["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new ei(J["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Kr(J["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Kr(J["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new iu(J["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new ei(J["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new ei(J["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Kr(J["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class q0 extends al{constructor(u){super(u,qm)}createBucket(u){return new Ya(u)}queryRadius(){return lf(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:u,feature:h,featureState:v,geometry:w,transform:K,pixelsToTileUnits:F,pixelPosMatrix:W}){const X=ed(u,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-K.bearingInRadians,F),ie=this.paint.get("fill-extrusion-height").evaluate(h,v),de=this.paint.get("fill-extrusion-base").evaluate(h,v),_e=function(ze,We,et){const At=[];for(const Ct of ze){const Nt=[Ct.x,Ct.y,0,1];me(Nt,Nt,We),At.push(new U(Nt[0]/Nt[3],Nt[1]/Nt[3]))}return At}(X,W),Re=function(ze,We,et,At){const Ct=[],Nt=[],St=At[8]*We,Le=At[9]*We,lt=At[10]*We,Bt=At[11]*We,dn=At[8]*et,kn=At[9]*et,An=At[10]*et,Bn=At[11]*et;for(const nr of ze){const jn=[],cr=[];for(const Tn of nr){const Nr=Tn.x,_i=Tn.y,hi=At[0]*Nr+At[4]*_i+At[12],Jr=At[1]*Nr+At[5]*_i+At[13],jo=At[2]*Nr+At[6]*_i+At[14],Al=At[3]*Nr+At[7]*_i+At[15],ql=jo+lt,Ju=Al+Bt,Td=hi+dn,Dc=Jr+kn,eA=jo+An,qa=Al+Bn,cl=new U((hi+St)/Ju,(Jr+Le)/Ju);cl.z=ql/Ju,jn.push(cl);const tA=new U(Td/qa,Dc/qa);tA.z=eA/qa,cr.push(tA)}Ct.push(jn),Nt.push(cr)}return[Ct,Nt]}(w,de,ie,W);return function(ze,We,et){let At=1/0;ll(et,We)&&(At=dm(et,We[0]));for(let Ct=0;Ct<We.length;Ct++){const Nt=We[Ct],St=ze[Ct];for(let Le=0;Le<Nt.length-1;Le++){const lt=Nt[Le],Bt=[lt,Nt[Le+1],St[Le+1],St[Le],lt];kc(et,Bt)&&(At=Math.min(At,dm(et,Bt)))}}return At!==1/0&&At}(Re[0],Re[1],_e)}}function td(d,u){return d.x*u.x+d.y*u.y}function dm(d,u){if(d.length===1){let h=0;const v=u[h++];let w;for(;!w||v.equals(w);)if(w=u[h++],!w)return 1/0;for(;h<u.length;h++){const K=u[h],F=d[0],W=w.sub(v),X=K.sub(v),ie=F.sub(v),de=td(W,W),_e=td(W,X),Re=td(X,X),ze=td(ie,W),We=td(ie,X),et=de*Re-_e*_e,At=(Re*ze-_e*We)/et,Ct=(de*We-_e*ze)/et,Nt=v.z*(1-At-Ct)+w.z*At+K.z*Ct;if(isFinite(Nt))return Nt}return 1/0}{let h=1/0;for(const v of u)h=Math.min(h,v.z);return h}}const mf=Is([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:jA}=mf,hm=Is([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:V0}=hm,Vm=Pc.VectorTileFeature.types,fm=Math.cos(Math.PI/180*37.5),_A=Math.pow(2,14)/.5;class rh{constructor(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(h=>h.id),this.index=u.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(h=>{this.gradients[h.id]={}}),this.layoutVertexArray=new Rt,this.layoutVertexArray2=new Ut,this.indexArray=new On,this.programConfigurations=new yA(u.layers,u.zoom),this.segments=new Zr,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(u,h,v){this.hasPattern=Tc("line",this.layers,h);const w=this.layers[0].layout.get("line-sort-key"),K=!w.isConstant(),F=[];for(const{feature:W,id:X,index:ie,sourceLayerIndex:de}of u){const _e=this.layers[0]._featureFilter.needGeometry,Re=Ts(W,_e);if(!this.layers[0]._featureFilter.filter(new Uo(this.zoom),Re,v))continue;const ze=K?w.evaluate(Re,{},v):void 0,We={id:X,properties:W.properties,type:W.type,sourceLayerIndex:de,index:ie,geometry:_e?Re.geometry:cc(W),patterns:{},sortKey:ze};F.push(We)}K&&F.sort((W,X)=>W.sortKey-X.sortKey);for(const W of F){const{geometry:X,index:ie,sourceLayerIndex:de}=W;if(this.hasPattern){const _e=wi("line",this.layers,W,this.zoom,h);this.patternFeatures.push(_e)}else this.addFeature(W,X,ie,v,{},h.subdivisionGranularity);h.featureIndex.insert(u[ie].feature,X,ie,de,this.index)}}update(u,h,v){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,h,this.stateDependentLayers,v)}addFeatures(u,h,v){for(const w of this.patternFeatures)this.addFeature(w,w.geometry,w.index,h,v,u.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(u){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=u.createVertexBuffer(this.layoutVertexArray2,V0)),this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,jA),this.indexBuffer=u.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(u),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(u){if(u.properties&&Object.prototype.hasOwnProperty.call(u.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(u.properties,"mapbox_clip_end"))return{start:+u.properties.mapbox_clip_start,end:+u.properties.mapbox_clip_end}}addFeature(u,h,v,w,K,F){const W=this.layers[0].layout,X=W.get("line-join").evaluate(u,{}),ie=W.get("line-cap"),de=W.get("line-miter-limit"),_e=W.get("line-round-limit");this.lineClips=this.lineFeatureClips(u);for(const Re of h)this.addLine(Re,u,X,ie,de,_e,w,F);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,v,K,w)}addLine(u,h,v,w,K,F,W,X){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,u=gr(u,W?X.line.getGranularityForZoomLevel(W.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let St=0;St<u.length-1;St++)this.totalDistance+=u[St].dist(u[St+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const ie=Vm[h.type]==="Polygon";let de=u.length;for(;de>=2&&u[de-1].equals(u[de-2]);)de--;let _e=0;for(;_e<de-1&&u[_e].equals(u[_e+1]);)_e++;if(de<(ie?3:2))return;v==="bevel"&&(K=1.05);const Re=this.overscaling<=16?15*at/(512*this.overscaling):0,ze=this.segments.prepareSegment(10*de,this.layoutVertexArray,this.indexArray);let We,et,At,Ct,Nt;this.e1=this.e2=-1,ie&&(We=u[de-2],Nt=u[_e].sub(We)._unit()._perp());for(let St=_e;St<de;St++){if(At=St===de-1?ie?u[_e+1]:void 0:u[St+1],At&&u[St].equals(At))continue;Nt&&(Ct=Nt),We&&(et=We),We=u[St],Nt=At?At.sub(We)._unit()._perp():Ct,Ct=Ct||Nt;let Le=Ct.add(Nt);Le.x===0&&Le.y===0||Le._unit();const lt=Ct.x*Nt.x+Ct.y*Nt.y,Bt=Le.x*Nt.x+Le.y*Nt.y,dn=Bt!==0?1/Bt:1/0,kn=2*Math.sqrt(2-2*Bt),An=Bt<fm&&et&&At,Bn=Ct.x*Nt.y-Ct.y*Nt.x>0;if(An&&St>_e){const cr=We.dist(et);if(cr>2*Re){const Tn=We.sub(We.sub(et)._mult(Re/cr)._round());this.updateDistance(et,Tn),this.addCurrentVertex(Tn,Ct,0,0,ze),et=Tn}}const nr=et&&At;let jn=nr?v:ie?"butt":w;if(nr&&jn==="round"&&(dn<F?jn="miter":dn<=2&&(jn="fakeround")),jn==="miter"&&dn>K&&(jn="bevel"),jn==="bevel"&&(dn>2&&(jn="flipbevel"),dn<K&&(jn="miter")),et&&this.updateDistance(et,We),jn==="miter")Le._mult(dn),this.addCurrentVertex(We,Le,0,0,ze);else if(jn==="flipbevel"){if(dn>100)Le=Nt.mult(-1);else{const cr=dn*Ct.add(Nt).mag()/Ct.sub(Nt).mag();Le._perp()._mult(cr*(Bn?-1:1))}this.addCurrentVertex(We,Le,0,0,ze),this.addCurrentVertex(We,Le.mult(-1),0,0,ze)}else if(jn==="bevel"||jn==="fakeround"){const cr=-Math.sqrt(dn*dn-1),Tn=Bn?cr:0,Nr=Bn?0:cr;if(et&&this.addCurrentVertex(We,Ct,Tn,Nr,ze),jn==="fakeround"){const _i=Math.round(180*kn/Math.PI/20);for(let hi=1;hi<_i;hi++){let Jr=hi/_i;if(Jr!==.5){const Al=Jr-.5;Jr+=Jr*Al*(Jr-1)*((1.0904+lt*(lt*(3.55645-1.43519*lt)-3.2452))*Al*Al+(.848013+lt*(.215638*lt-1.06021)))}const jo=Nt.sub(Ct)._mult(Jr)._add(Ct)._unit()._mult(Bn?-1:1);this.addHalfVertex(We,jo.x,jo.y,!1,Bn,0,ze)}}At&&this.addCurrentVertex(We,Nt,-Tn,-Nr,ze)}else if(jn==="butt")this.addCurrentVertex(We,Le,0,0,ze);else if(jn==="square"){const cr=et?1:-1;this.addCurrentVertex(We,Le,cr,cr,ze)}else jn==="round"&&(et&&(this.addCurrentVertex(We,Ct,0,0,ze),this.addCurrentVertex(We,Ct,1,1,ze,!0)),At&&(this.addCurrentVertex(We,Nt,-1,-1,ze,!0),this.addCurrentVertex(We,Nt,0,0,ze)));if(An&&St<de-1){const cr=We.dist(At);if(cr>2*Re){const Tn=We.add(At.sub(We)._mult(Re/cr)._round());this.updateDistance(We,Tn),this.addCurrentVertex(Tn,Nt,0,0,ze),We=Tn}}}}addCurrentVertex(u,h,v,w,K,F=!1){const W=h.y*w-h.x,X=-h.y-h.x*w;this.addHalfVertex(u,h.x+h.y*v,h.y-h.x*v,F,!1,v,K),this.addHalfVertex(u,W,X,F,!0,-w,K),this.distance>_A/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(u,h,v,w,K,F))}addHalfVertex({x:u,y:h},v,w,K,F,W,X){const ie=.5*(this.lineClips?this.scaledDistance*(_A-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((u<<1)+(K?1:0),(h<<1)+(F?1:0),Math.round(63*v)+128,Math.round(63*w)+128,1+(W===0?0:W<0?-1:1)|(63&ie)<<2,ie>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const de=X.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,de,this.e2),X.primitiveLength++),F?this.e2=de:this.e1=de}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(u,h){this.distance+=u.dist(h),this.updateScaledDistance()}}let nd,NA;xr("LineBucket",rh,{omit:["layers","patternFeatures"]});var pm={get paint(){return NA=NA||new sl({"line-opacity":new ei(J.paint_line["line-opacity"]),"line-color":new ei(J.paint_line["line-color"]),"line-translate":new Kr(J.paint_line["line-translate"]),"line-translate-anchor":new Kr(J.paint_line["line-translate-anchor"]),"line-width":new ei(J.paint_line["line-width"]),"line-gap-width":new ei(J.paint_line["line-gap-width"]),"line-offset":new ei(J.paint_line["line-offset"]),"line-blur":new ei(J.paint_line["line-blur"]),"line-dasharray":new vl(J.paint_line["line-dasharray"]),"line-pattern":new iu(J.paint_line["line-pattern"]),"line-gradient":new rf(J.paint_line["line-gradient"])})},get layout(){return nd=nd||new sl({"line-cap":new Kr(J.layout_line["line-cap"]),"line-join":new ei(J.layout_line["line-join"]),"line-miter-limit":new Kr(J.layout_line["line-miter-limit"]),"line-round-limit":new Kr(J.layout_line["line-round-limit"]),"line-sort-key":new ei(J.layout_line["line-sort-key"])})}};class $0 extends ei{possiblyEvaluate(u,h){return h=new Uo(Math.floor(h.zoom),{now:h.now,fadeDuration:h.fadeDuration,zoomHistory:h.zoomHistory,transition:h.transition}),super.possiblyEvaluate(u,h)}evaluate(u,h,v,w){return h=yt({},h,{zoom:Math.floor(h.zoom)}),super.evaluate(u,h,v,w)}}let Bp;class Vy extends al{constructor(u){super(u,pm),this.gradientVersion=0,Bp||(Bp=new $0(pm.paint.properties["line-width"].specification),Bp.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(u){if(u==="line-gradient"){const h=this.gradientExpression();this.stepInterpolant=!!function(v){return v._styleExpression!==void 0}(h)&&h._styleExpression.expression instanceof Er,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(u,h){super.recalculate(u,h),this.paint._values["line-floorwidth"]=Bp.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,u)}createBucket(u){return new rh(u)}queryRadius(u){const h=u,v=Kh(Jc("line-width",this,h),Jc("line-gap-width",this,h)),w=Jc("line-offset",this,h);return v/2+Math.abs(w)+lf(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:u,feature:h,featureState:v,geometry:w,transform:K,pixelsToTileUnits:F}){const W=ed(u,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-K.bearingInRadians,F),X=F/2*Kh(this.paint.get("line-width").evaluate(h,v),this.paint.get("line-gap-width").evaluate(h,v)),ie=this.paint.get("line-offset").evaluate(h,v);return ie&&(w=function(de,_e){const Re=[];for(let ze=0;ze<de.length;ze++){const We=de[ze],et=[];for(let At=0;At<We.length;At++){const Ct=We[At-1],Nt=We[At],St=We[At+1],Le=At===0?new U(0,0):Nt.sub(Ct)._unit()._perp(),lt=At===We.length-1?new U(0,0):St.sub(Nt)._unit()._perp(),Bt=Le._add(lt)._unit(),dn=Bt.x*lt.x+Bt.y*lt.y;dn!==0&&Bt._mult(1/dn),et.push(Bt._mult(_e)._add(Nt))}Re.push(et)}return Re}(w,ie*F)),function(de,_e,Re){for(let ze=0;ze<_e.length;ze++){const We=_e[ze];if(de.length>=3){for(let et=0;et<We.length;et++)if(LA(de,We[et]))return!0}if(xp(de,We,Re))return!0}return!1}(W,w,X)}isTileClipped(){return!0}}function Kh(d,u){return u>0?u+2*d:d}const Jg=Is([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),H0=Is([{name:"a_projected_pos",components:3,type:"Float32"}],4);Is([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Yf=Is([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);Is([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const $m=Is([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),qf=Is([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function e1(d,u,h){return d.sections.forEach(v=>{v.text=function(w,K,F){const W=K.layout.get("text-transform").evaluate(F,{});return W==="uppercase"?w=w.toLocaleUpperCase():W==="lowercase"&&(w=w.toLocaleLowerCase()),ol.applyArabicShaping&&(w=ol.applyArabicShaping(w)),w}(v.text,u,h)}),d}Is([{name:"triangle",components:3,type:"Uint16"}]),Is([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Is([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),Is([{type:"Float32",name:"offsetX"}]),Is([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),Is([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Op={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var Hm,Ip,t1,Il=24,Zm={};function n1(){return Hm||(Hm=1,Zm.read=function(d,u,h,v,w){var K,F,W=8*w-v-1,X=(1<<W)-1,ie=X>>1,de=-7,_e=h?w-1:0,Re=h?-1:1,ze=d[u+_e];for(_e+=Re,K=ze&(1<<-de)-1,ze>>=-de,de+=W;de>0;K=256*K+d[u+_e],_e+=Re,de-=8);for(F=K&(1<<-de)-1,K>>=-de,de+=v;de>0;F=256*F+d[u+_e],_e+=Re,de-=8);if(K===0)K=1-ie;else{if(K===X)return F?NaN:1/0*(ze?-1:1);F+=Math.pow(2,v),K-=ie}return(ze?-1:1)*F*Math.pow(2,K-v)},Zm.write=function(d,u,h,v,w,K){var F,W,X,ie=8*K-w-1,de=(1<<ie)-1,_e=de>>1,Re=w===23?Math.pow(2,-24)-Math.pow(2,-77):0,ze=v?0:K-1,We=v?1:-1,et=u<0||u===0&&1/u<0?1:0;for(u=Math.abs(u),isNaN(u)||u===1/0?(W=isNaN(u)?1:0,F=de):(F=Math.floor(Math.log(u)/Math.LN2),u*(X=Math.pow(2,-F))<1&&(F--,X*=2),(u+=F+_e>=1?Re/X:Re*Math.pow(2,1-_e))*X>=2&&(F++,X/=2),F+_e>=de?(W=0,F=de):F+_e>=1?(W=(u*X-1)*Math.pow(2,w),F+=_e):(W=u*Math.pow(2,_e-1)*Math.pow(2,w),F=0));w>=8;d[h+ze]=255&W,ze+=We,W/=256,w-=8);for(F=F<<w|W,ie+=w;ie>0;d[h+ze]=255&F,ze+=We,F/=256,ie-=8);d[h+ze-We]|=128*et}),Zm}function gf(){if(t1)return Ip;t1=1,Ip=u;var d=n1();function u(Le){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(Le)?Le:new Uint8Array(Le||0),this.pos=0,this.type=0,this.length=this.buf.length}u.Varint=0,u.Fixed64=1,u.Bytes=2,u.Fixed32=5;var h=4294967296,v=1/h,w=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");function K(Le){return Le.type===u.Bytes?Le.readVarint()+Le.pos:Le.pos+1}function F(Le,lt,Bt){return Bt?4294967296*lt+(Le>>>0):4294967296*(lt>>>0)+(Le>>>0)}function W(Le,lt,Bt){var dn=lt<=16383?1:lt<=2097151?2:lt<=268435455?3:Math.floor(Math.log(lt)/(7*Math.LN2));Bt.realloc(dn);for(var kn=Bt.pos-1;kn>=Le;kn--)Bt.buf[kn+dn]=Bt.buf[kn]}function X(Le,lt){for(var Bt=0;Bt<Le.length;Bt++)lt.writeVarint(Le[Bt])}function ie(Le,lt){for(var Bt=0;Bt<Le.length;Bt++)lt.writeSVarint(Le[Bt])}function de(Le,lt){for(var Bt=0;Bt<Le.length;Bt++)lt.writeFloat(Le[Bt])}function _e(Le,lt){for(var Bt=0;Bt<Le.length;Bt++)lt.writeDouble(Le[Bt])}function Re(Le,lt){for(var Bt=0;Bt<Le.length;Bt++)lt.writeBoolean(Le[Bt])}function ze(Le,lt){for(var Bt=0;Bt<Le.length;Bt++)lt.writeFixed32(Le[Bt])}function We(Le,lt){for(var Bt=0;Bt<Le.length;Bt++)lt.writeSFixed32(Le[Bt])}function et(Le,lt){for(var Bt=0;Bt<Le.length;Bt++)lt.writeFixed64(Le[Bt])}function At(Le,lt){for(var Bt=0;Bt<Le.length;Bt++)lt.writeSFixed64(Le[Bt])}function Ct(Le,lt){return(Le[lt]|Le[lt+1]<<8|Le[lt+2]<<16)+16777216*Le[lt+3]}function Nt(Le,lt,Bt){Le[Bt]=lt,Le[Bt+1]=lt>>>8,Le[Bt+2]=lt>>>16,Le[Bt+3]=lt>>>24}function St(Le,lt){return(Le[lt]|Le[lt+1]<<8|Le[lt+2]<<16)+(Le[lt+3]<<24)}return u.prototype={destroy:function(){this.buf=null},readFields:function(Le,lt,Bt){for(Bt=Bt||this.length;this.pos<Bt;){var dn=this.readVarint(),kn=dn>>3,An=this.pos;this.type=7&dn,Le(kn,lt,this),this.pos===An&&this.skip(dn)}return lt},readMessage:function(Le,lt){return this.readFields(Le,lt,this.readVarint()+this.pos)},readFixed32:function(){var Le=Ct(this.buf,this.pos);return this.pos+=4,Le},readSFixed32:function(){var Le=St(this.buf,this.pos);return this.pos+=4,Le},readFixed64:function(){var Le=Ct(this.buf,this.pos)+Ct(this.buf,this.pos+4)*h;return this.pos+=8,Le},readSFixed64:function(){var Le=Ct(this.buf,this.pos)+St(this.buf,this.pos+4)*h;return this.pos+=8,Le},readFloat:function(){var Le=d.read(this.buf,this.pos,!0,23,4);return this.pos+=4,Le},readDouble:function(){var Le=d.read(this.buf,this.pos,!0,52,8);return this.pos+=8,Le},readVarint:function(Le){var lt,Bt,dn=this.buf;return lt=127&(Bt=dn[this.pos++]),Bt<128?lt:(lt|=(127&(Bt=dn[this.pos++]))<<7,Bt<128?lt:(lt|=(127&(Bt=dn[this.pos++]))<<14,Bt<128?lt:(lt|=(127&(Bt=dn[this.pos++]))<<21,Bt<128?lt:function(kn,An,Bn){var nr,jn,cr=Bn.buf;if(nr=(112&(jn=cr[Bn.pos++]))>>4,jn<128||(nr|=(127&(jn=cr[Bn.pos++]))<<3,jn<128)||(nr|=(127&(jn=cr[Bn.pos++]))<<10,jn<128)||(nr|=(127&(jn=cr[Bn.pos++]))<<17,jn<128)||(nr|=(127&(jn=cr[Bn.pos++]))<<24,jn<128)||(nr|=(1&(jn=cr[Bn.pos++]))<<31,jn<128))return F(kn,nr,An);throw new Error("Expected varint not more than 10 bytes")}(lt|=(15&(Bt=dn[this.pos]))<<28,Le,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var Le=this.readVarint();return Le%2==1?(Le+1)/-2:Le/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var Le=this.readVarint()+this.pos,lt=this.pos;return this.pos=Le,Le-lt>=12&&w?function(Bt,dn,kn){return w.decode(Bt.subarray(dn,kn))}(this.buf,lt,Le):function(Bt,dn,kn){for(var An="",Bn=dn;Bn<kn;){var nr,jn,cr,Tn=Bt[Bn],Nr=null,_i=Tn>239?4:Tn>223?3:Tn>191?2:1;if(Bn+_i>kn)break;_i===1?Tn<128&&(Nr=Tn):_i===2?(192&(nr=Bt[Bn+1]))==128&&(Nr=(31&Tn)<<6|63&nr)<=127&&(Nr=null):_i===3?(jn=Bt[Bn+2],(192&(nr=Bt[Bn+1]))==128&&(192&jn)==128&&((Nr=(15&Tn)<<12|(63&nr)<<6|63&jn)<=2047||Nr>=55296&&Nr<=57343)&&(Nr=null)):_i===4&&(jn=Bt[Bn+2],cr=Bt[Bn+3],(192&(nr=Bt[Bn+1]))==128&&(192&jn)==128&&(192&cr)==128&&((Nr=(15&Tn)<<18|(63&nr)<<12|(63&jn)<<6|63&cr)<=65535||Nr>=1114112)&&(Nr=null)),Nr===null?(Nr=65533,_i=1):Nr>65535&&(Nr-=65536,An+=String.fromCharCode(Nr>>>10&1023|55296),Nr=56320|1023&Nr),An+=String.fromCharCode(Nr),Bn+=_i}return An}(this.buf,lt,Le)},readBytes:function(){var Le=this.readVarint()+this.pos,lt=this.buf.subarray(this.pos,Le);return this.pos=Le,lt},readPackedVarint:function(Le,lt){if(this.type!==u.Bytes)return Le.push(this.readVarint(lt));var Bt=K(this);for(Le=Le||[];this.pos<Bt;)Le.push(this.readVarint(lt));return Le},readPackedSVarint:function(Le){if(this.type!==u.Bytes)return Le.push(this.readSVarint());var lt=K(this);for(Le=Le||[];this.pos<lt;)Le.push(this.readSVarint());return Le},readPackedBoolean:function(Le){if(this.type!==u.Bytes)return Le.push(this.readBoolean());var lt=K(this);for(Le=Le||[];this.pos<lt;)Le.push(this.readBoolean());return Le},readPackedFloat:function(Le){if(this.type!==u.Bytes)return Le.push(this.readFloat());var lt=K(this);for(Le=Le||[];this.pos<lt;)Le.push(this.readFloat());return Le},readPackedDouble:function(Le){if(this.type!==u.Bytes)return Le.push(this.readDouble());var lt=K(this);for(Le=Le||[];this.pos<lt;)Le.push(this.readDouble());return Le},readPackedFixed32:function(Le){if(this.type!==u.Bytes)return Le.push(this.readFixed32());var lt=K(this);for(Le=Le||[];this.pos<lt;)Le.push(this.readFixed32());return Le},readPackedSFixed32:function(Le){if(this.type!==u.Bytes)return Le.push(this.readSFixed32());var lt=K(this);for(Le=Le||[];this.pos<lt;)Le.push(this.readSFixed32());return Le},readPackedFixed64:function(Le){if(this.type!==u.Bytes)return Le.push(this.readFixed64());var lt=K(this);for(Le=Le||[];this.pos<lt;)Le.push(this.readFixed64());return Le},readPackedSFixed64:function(Le){if(this.type!==u.Bytes)return Le.push(this.readSFixed64());var lt=K(this);for(Le=Le||[];this.pos<lt;)Le.push(this.readSFixed64());return Le},skip:function(Le){var lt=7&Le;if(lt===u.Varint)for(;this.buf[this.pos++]>127;);else if(lt===u.Bytes)this.pos=this.readVarint()+this.pos;else if(lt===u.Fixed32)this.pos+=4;else{if(lt!==u.Fixed64)throw new Error("Unimplemented type: "+lt);this.pos+=8}},writeTag:function(Le,lt){this.writeVarint(Le<<3|lt)},realloc:function(Le){for(var lt=this.length||16;lt<this.pos+Le;)lt*=2;if(lt!==this.length){var Bt=new Uint8Array(lt);Bt.set(this.buf),this.buf=Bt,this.length=lt}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(Le){this.realloc(4),Nt(this.buf,Le,this.pos),this.pos+=4},writeSFixed32:function(Le){this.realloc(4),Nt(this.buf,Le,this.pos),this.pos+=4},writeFixed64:function(Le){this.realloc(8),Nt(this.buf,-1&Le,this.pos),Nt(this.buf,Math.floor(Le*v),this.pos+4),this.pos+=8},writeSFixed64:function(Le){this.realloc(8),Nt(this.buf,-1&Le,this.pos),Nt(this.buf,Math.floor(Le*v),this.pos+4),this.pos+=8},writeVarint:function(Le){(Le=+Le||0)>268435455||Le<0?function(lt,Bt){var dn,kn;if(lt>=0?(dn=lt%4294967296|0,kn=lt/4294967296|0):(kn=~(-lt/4294967296),4294967295^(dn=~(-lt%4294967296))?dn=dn+1|0:(dn=0,kn=kn+1|0)),lt>=18446744073709552e3||lt<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");Bt.realloc(10),function(An,Bn,nr){nr.buf[nr.pos++]=127&An|128,An>>>=7,nr.buf[nr.pos++]=127&An|128,An>>>=7,nr.buf[nr.pos++]=127&An|128,An>>>=7,nr.buf[nr.pos++]=127&An|128,nr.buf[nr.pos]=127&(An>>>=7)}(dn,0,Bt),function(An,Bn){var nr=(7&An)<<4;Bn.buf[Bn.pos++]|=nr|((An>>>=3)?128:0),An&&(Bn.buf[Bn.pos++]=127&An|((An>>>=7)?128:0),An&&(Bn.buf[Bn.pos++]=127&An|((An>>>=7)?128:0),An&&(Bn.buf[Bn.pos++]=127&An|((An>>>=7)?128:0),An&&(Bn.buf[Bn.pos++]=127&An|((An>>>=7)?128:0),An&&(Bn.buf[Bn.pos++]=127&An)))))}(kn,Bt)}(Le,this):(this.realloc(4),this.buf[this.pos++]=127&Le|(Le>127?128:0),Le<=127||(this.buf[this.pos++]=127&(Le>>>=7)|(Le>127?128:0),Le<=127||(this.buf[this.pos++]=127&(Le>>>=7)|(Le>127?128:0),Le<=127||(this.buf[this.pos++]=Le>>>7&127))))},writeSVarint:function(Le){this.writeVarint(Le<0?2*-Le-1:2*Le)},writeBoolean:function(Le){this.writeVarint(!!Le)},writeString:function(Le){Le=String(Le),this.realloc(4*Le.length),this.pos++;var lt=this.pos;this.pos=function(dn,kn,An){for(var Bn,nr,jn=0;jn<kn.length;jn++){if((Bn=kn.charCodeAt(jn))>55295&&Bn<57344){if(!nr){Bn>56319||jn+1===kn.length?(dn[An++]=239,dn[An++]=191,dn[An++]=189):nr=Bn;continue}if(Bn<56320){dn[An++]=239,dn[An++]=191,dn[An++]=189,nr=Bn;continue}Bn=nr-55296<<10|Bn-56320|65536,nr=null}else nr&&(dn[An++]=239,dn[An++]=191,dn[An++]=189,nr=null);Bn<128?dn[An++]=Bn:(Bn<2048?dn[An++]=Bn>>6|192:(Bn<65536?dn[An++]=Bn>>12|224:(dn[An++]=Bn>>18|240,dn[An++]=Bn>>12&63|128),dn[An++]=Bn>>6&63|128),dn[An++]=63&Bn|128)}return An}(this.buf,Le,this.pos);var Bt=this.pos-lt;Bt>=128&&W(lt,Bt,this),this.pos=lt-1,this.writeVarint(Bt),this.pos+=Bt},writeFloat:function(Le){this.realloc(4),d.write(this.buf,Le,this.pos,!0,23,4),this.pos+=4},writeDouble:function(Le){this.realloc(8),d.write(this.buf,Le,this.pos,!0,52,8),this.pos+=8},writeBytes:function(Le){var lt=Le.length;this.writeVarint(lt),this.realloc(lt);for(var Bt=0;Bt<lt;Bt++)this.buf[this.pos++]=Le[Bt]},writeRawMessage:function(Le,lt){this.pos++;var Bt=this.pos;Le(lt,this);var dn=this.pos-Bt;dn>=128&&W(Bt,dn,this),this.pos=Bt-1,this.writeVarint(dn),this.pos+=dn},writeMessage:function(Le,lt,Bt){this.writeTag(Le,u.Bytes),this.writeRawMessage(lt,Bt)},writePackedVarint:function(Le,lt){lt.length&&this.writeMessage(Le,X,lt)},writePackedSVarint:function(Le,lt){lt.length&&this.writeMessage(Le,ie,lt)},writePackedBoolean:function(Le,lt){lt.length&&this.writeMessage(Le,Re,lt)},writePackedFloat:function(Le,lt){lt.length&&this.writeMessage(Le,de,lt)},writePackedDouble:function(Le,lt){lt.length&&this.writeMessage(Le,_e,lt)},writePackedFixed32:function(Le,lt){lt.length&&this.writeMessage(Le,ze,lt)},writePackedSFixed32:function(Le,lt){lt.length&&this.writeMessage(Le,We,lt)},writePackedFixed64:function(Le,lt){lt.length&&this.writeMessage(Le,et,lt)},writePackedSFixed64:function(Le,lt){lt.length&&this.writeMessage(Le,At,lt)},writeBytesField:function(Le,lt){this.writeTag(Le,u.Bytes),this.writeBytes(lt)},writeFixed32Field:function(Le,lt){this.writeTag(Le,u.Fixed32),this.writeFixed32(lt)},writeSFixed32Field:function(Le,lt){this.writeTag(Le,u.Fixed32),this.writeSFixed32(lt)},writeFixed64Field:function(Le,lt){this.writeTag(Le,u.Fixed64),this.writeFixed64(lt)},writeSFixed64Field:function(Le,lt){this.writeTag(Le,u.Fixed64),this.writeSFixed64(lt)},writeVarintField:function(Le,lt){this.writeTag(Le,u.Varint),this.writeVarint(lt)},writeSVarintField:function(Le,lt){this.writeTag(Le,u.Varint),this.writeSVarint(lt)},writeStringField:function(Le,lt){this.writeTag(Le,u.Bytes),this.writeString(lt)},writeFloatField:function(Le,lt){this.writeTag(Le,u.Fixed32),this.writeFloat(lt)},writeDoubleField:function(Le,lt){this.writeTag(Le,u.Fixed64),this.writeDouble(lt)},writeBooleanField:function(Le,lt){this.writeVarintField(Le,!!lt)}},Ip}var Z0=f(gf());const yf=3;function Xm(d,u,h){d===1&&h.readMessage(ul,u)}function ul(d,u,h){if(d===3){const{id:v,bitmap:w,width:K,height:F,left:W,top:X,advance:ie}=h.readMessage($y,{});u.push({id:v,bitmap:new Bd({width:K+2*yf,height:F+2*yf},w),metrics:{width:K,height:F,left:W,top:X,advance:ie}})}}function $y(d,u,h){d===1?u.id=h.readVarint():d===2?u.bitmap=h.readBytes():d===3?u.width=h.readVarint():d===4?u.height=h.readVarint():d===5?u.left=h.readSVarint():d===6?u.top=h.readSVarint():d===7&&(u.advance=h.readVarint())}const r1=yf;function i1(d){let u=0,h=0;for(const F of d)u+=F.w*F.h,h=Math.max(h,F.w);d.sort((F,W)=>W.h-F.h);const v=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(u/.95)),h),h:1/0}];let w=0,K=0;for(const F of d)for(let W=v.length-1;W>=0;W--){const X=v[W];if(!(F.w>X.w||F.h>X.h)){if(F.x=X.x,F.y=X.y,K=Math.max(K,F.y+F.h),w=Math.max(w,F.x+F.w),F.w===X.w&&F.h===X.h){const ie=v.pop();W<v.length&&(v[W]=ie)}else F.h===X.h?(X.x+=F.w,X.w-=F.w):F.w===X.w?(X.y+=F.h,X.h-=F.h):(v.push({x:X.x+F.w,y:X.y,w:X.w-F.w,h:F.h}),X.y+=F.h,X.h-=F.h);break}}return{w,h:K,fill:u/(w*K)||0}}const WA=1;class Jm{constructor(u,{pixelRatio:h,version:v,stretchX:w,stretchY:K,content:F,textFitWidth:W,textFitHeight:X}){this.paddedRect=u,this.pixelRatio=h,this.stretchX=w,this.stretchY=K,this.content=F,this.version=v,this.textFitWidth=W,this.textFitHeight=X}get tl(){return[this.paddedRect.x+WA,this.paddedRect.y+WA]}get br(){return[this.paddedRect.x+this.paddedRect.w-WA,this.paddedRect.y+this.paddedRect.h-WA]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*WA)/this.pixelRatio,(this.paddedRect.h-2*WA)/this.pixelRatio]}}class X0{constructor(u,h){const v={},w={};this.haveRenderCallbacks=[];const K=[];this.addImages(u,v,K),this.addImages(h,w,K);const{w:F,h:W}=i1(K),X=new Bl({width:F||1,height:W||1});for(const ie in u){const de=u[ie],_e=v[ie].paddedRect;Bl.copy(de.data,X,{x:0,y:0},{x:_e.x+WA,y:_e.y+WA},de.data)}for(const ie in h){const de=h[ie],_e=w[ie].paddedRect,Re=_e.x+WA,ze=_e.y+WA,We=de.data.width,et=de.data.height;Bl.copy(de.data,X,{x:0,y:0},{x:Re,y:ze},de.data),Bl.copy(de.data,X,{x:0,y:et-1},{x:Re,y:ze-1},{width:We,height:1}),Bl.copy(de.data,X,{x:0,y:0},{x:Re,y:ze+et},{width:We,height:1}),Bl.copy(de.data,X,{x:We-1,y:0},{x:Re-1,y:ze},{width:1,height:et}),Bl.copy(de.data,X,{x:0,y:0},{x:Re+We,y:ze},{width:1,height:et})}this.image=X,this.iconPositions=v,this.patternPositions=w}addImages(u,h,v){for(const w in u){const K=u[w],F={x:0,y:0,w:K.data.width+2*WA,h:K.data.height+2*WA};v.push(F),h[w]=new Jm(F,K),K.hasRenderCallback&&this.haveRenderCallbacks.push(w)}}patchUpdatedImages(u,h){u.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const v in u.updatedImages)this.patchUpdatedImage(this.iconPositions[v],u.getImage(v),h),this.patchUpdatedImage(this.patternPositions[v],u.getImage(v),h)}patchUpdatedImage(u,h,v){if(!u||!h||u.version===h.version)return;u.version=h.version;const[w,K]=u.tl;v.update(h.data,void 0,{x:w,y:K})}}var vf;xr("ImagePosition",Jm),xr("ImageAtlas",X0),l.ag=void 0,(vf=l.ag||(l.ag={}))[vf.none=0]="none",vf[vf.horizontal=1]="horizontal",vf[vf.vertical=2]="vertical",vf[vf.horizontalOnly=3]="horizontalOnly";const GA=-17;class Cf{constructor(){this.scale=1,this.fontStack="",this.imageName=null,this.verticalAlign="bottom"}static forText(u,h,v){const w=new Cf;return w.scale=u||1,w.fontStack=h,w.verticalAlign=v||"bottom",w}static forImage(u,h){const v=new Cf;return v.imageName=u,v.verticalAlign=h||"bottom",v}}class kp{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(u,h){const v=new kp;for(let w=0;w<u.sections.length;w++){const K=u.sections[w];K.image?v.addImageSection(K):v.addTextSection(K,h)}return v}length(){return this.text.length}getSection(u){return this.sections[this.sectionIndex[u]]}getSectionIndex(u){return this.sectionIndex[u]}getCharCode(u){return this.text.charCodeAt(u)}verticalizePunctuation(){this.text=function(u){let h="";for(let v=0;v<u.length;v++){const w=u.charCodeAt(v+1)||null,K=u.charCodeAt(v-1)||null;h+=w&&So(w)&&!Op[u[v+1]]||K&&So(K)&&!Op[u[v-1]]||!Op[u[v]]?u[v]:Op[u[v]]}return h}(this.text)}trim(){let u=0;for(let v=0;v<this.text.length&&Vf[this.text.charCodeAt(v)];v++)u++;let h=this.text.length;for(let v=this.text.length-1;v>=0&&v>=u&&Vf[this.text.charCodeAt(v)];v--)h--;this.text=this.text.substring(u,h),this.sectionIndex=this.sectionIndex.slice(u,h)}substring(u,h){const v=new kp;return v.text=this.text.substring(u,h),v.sectionIndex=this.sectionIndex.slice(u,h),v.sections=this.sections,v}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((u,h)=>Math.max(u,this.sections[h].scale),0)}getMaxImageSize(u){let h=0,v=0;for(let w=0;w<this.length();w++){const K=this.getSection(w);if(K.imageName){const F=u[K.imageName];if(!F)continue;const W=F.displaySize;h=Math.max(h,W[0]),v=Math.max(v,W[1])}}return{maxImageWidth:h,maxImageHeight:v}}addTextSection(u,h){this.text+=u.text,this.sections.push(Cf.forText(u.scale,u.fontStack||h,u.verticalAlign));const v=this.sections.length-1;for(let w=0;w<u.text.length;++w)this.sectionIndex.push(v)}addImageSection(u){const h=u.image?u.image.name:"";if(h.length===0)return void it("Can't add FormattedSection with an empty image.");const v=this.getNextImageSectionCharCode();v?(this.text+=String.fromCharCode(v),this.sections.push(Cf.forImage(h,u.verticalAlign)),this.sectionIndex.push(this.sections.length-1)):it("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function hc(d,u,h,v,w,K,F,W,X,ie,de,_e,Re,ze,We){const et=kp.fromFeature(d,w);let At;_e===l.ag.vertical&&et.verticalizePunctuation();const{processBidirectionalText:Ct,processStyledBidirectionalText:Nt}=ol;if(Ct&&et.sections.length===1){At=[];const lt=Ct(et.toString(),i0(et,ie,K,u,v,ze));for(const Bt of lt){const dn=new kp;dn.text=Bt,dn.sections=et.sections;for(let kn=0;kn<Bt.length;kn++)dn.sectionIndex.push(0);At.push(dn)}}else if(Nt){At=[];const lt=Nt(et.text,et.sectionIndex,i0(et,ie,K,u,v,ze));for(const Bt of lt){const dn=new kp;dn.text=Bt[0],dn.sectionIndex=Bt[1],dn.sections=et.sections,At.push(dn)}}else At=function(lt,Bt){const dn=[],kn=lt.text;let An=0;for(const Bn of Bt)dn.push(lt.substring(An,Bn)),An=Bn;return An<kn.length&&dn.push(lt.substring(An,kn.length)),dn}(et,i0(et,ie,K,u,v,ze));const St=[],Le={positionedLines:St,text:et.toString(),top:de[1],bottom:de[1],left:de[0],right:de[0],writingMode:_e,iconsInText:!1,verticalizable:!1};return function(lt,Bt,dn,kn,An,Bn,nr,jn,cr,Tn,Nr,_i){let hi=0,Jr=0,jo=0,Al=0;const ql=jn==="right"?1:jn==="left"?0:.5,Ju=Il/_i;let Td=0;for(const qa of An){qa.trim();const cl=qa.getMaxScale(),tA={positionedGlyphs:[],lineOffset:0};lt.positionedLines[Td]=tA;const nA=tA.positionedGlyphs;let fc=0;if(!qa.length()){Jr+=Bn,++Td;continue}const Pd=s0(kn,qa,Ju);for(let pc=0;pc<qa.length();pc++){const Vl=qa.getSection(pc),ku=qa.getSectionIndex(pc),Tu=qa.getCharCode(pc),$l=s1(cr,Nr,Tu);let ma;if(Vl.imageName){if(lt.iconsInText=!0,Vl.scale=Vl.scale*Ju,ma=a1(Vl,$l,cl,Pd,kn),!ma)continue;fc=Math.max(fc,ma.imageOffset)}else if(ma=J0(Vl,Tu,$l,Pd,Bt,dn),!ma)continue;const{rect:Rh,metrics:c0,baselineOffset:Dh}=ma;nA.push({glyph:Tu,imageName:Vl.imageName,x:hi,y:Jr+Dh+GA,vertical:$l,scale:Vl.scale,fontStack:Vl.fontStack,sectionIndex:ku,metrics:c0,rect:Rh}),$l?(lt.verticalizable=!0,hi+=(Vl.imageName?c0.advance:Il)*Vl.scale+Tn):hi+=c0.advance*Vl.scale+Tn}nA.length!==0&&(jo=Math.max(hi-Tn,jo),eg(nA,0,nA.length-1,ql)),hi=0,tA.lineOffset=Math.max(fc,(cl-1)*Il);const Iu=Bn*cl+fc;Jr+=Iu,Al=Math.max(Iu,Al),++Td}const{horizontalAlign:Dc,verticalAlign:eA}=o0(nr);(function(qa,cl,tA,nA,fc,Pd,Iu,pc,Vl){const ku=(cl-tA)*fc;let Tu=0;Tu=Pd!==Iu?-pc*nA-GA:-nA*Vl*Iu+.5*Iu;for(const $l of qa)for(const ma of $l.positionedGlyphs)ma.x+=ku,ma.y+=Tu})(lt.positionedLines,ql,Dc,eA,jo,Al,Bn,Jr,An.length),lt.top+=-eA*Jr,lt.bottom=lt.top+Jr,lt.left+=-Dc*jo,lt.right=lt.left+jo}(Le,u,h,v,At,F,W,X,_e,ie,Re,We),!function(lt){for(const Bt of lt)if(Bt.positionedGlyphs.length!==0)return!1;return!0}(St)&&Le}const Vf={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},$f={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},e0={40:!0};function t0(d,u,h,v,w,K){if(u.imageName){const F=v[u.imageName];return F?F.displaySize[0]*u.scale*Il/K+w:0}{const F=h[u.fontStack],W=F&&F[d];return W?W.metrics.advance*u.scale+w:0}}function n0(d,u,h,v){const w=Math.pow(d-u,2);return v?d<u?w/2:2*w:w+Math.abs(h)*h}function Hy(d,u,h){let v=0;return d===10&&(v-=1e4),h&&(v+=150),d!==40&&d!==65288||(v+=50),u!==41&&u!==65289||(v+=50),v}function r0(d,u,h,v,w,K){let F=null,W=n0(u,h,w,K);for(const X of v){const ie=n0(u-X.x,h,w,K)+X.badness;ie<=W&&(F=X,W=ie)}return{index:d,x:u,priorBreak:F,badness:W}}function o1(d){return d?o1(d.priorBreak).concat(d.index):[]}function i0(d,u,h,v,w,K){if(!d)return[];const F=[],W=function(_e,Re,ze,We,et,At){let Ct=0;for(let Nt=0;Nt<_e.length();Nt++){const St=_e.getSection(Nt);Ct+=t0(_e.getCharCode(Nt),St,We,et,Re,At)}return Ct/Math.max(1,Math.ceil(Ct/ze))}(d,u,h,v,w,K),X=d.text.indexOf("")>=0;let ie=0;for(let _e=0;_e<d.length();_e++){const Re=d.getSection(_e),ze=d.getCharCode(_e);if(Vf[ze]||(ie+=t0(ze,Re,v,w,u,K)),_e<d.length()-1){const We=!((de=ze)<11904)&&(!!Mi["CJK Compatibility Forms"](de)||!!Mi["CJK Compatibility"](de)||!!Mi["CJK Strokes"](de)||!!Mi["CJK Symbols and Punctuation"](de)||!!Mi["Enclosed CJK Letters and Months"](de)||!!Mi["Halfwidth and Fullwidth Forms"](de)||!!Mi["Ideographic Description Characters"](de)||!!Mi["Vertical Forms"](de)||Ec.test(String.fromCodePoint(de)));($f[ze]||We||Re.imageName||_e!==d.length()-2&&e0[d.getCharCode(_e+1)])&&F.push(r0(_e+1,ie,W,F,Hy(ze,d.getCharCode(_e+1),We&&X),!1))}}var de;return o1(r0(d.length(),ie,W,F,0,!0))}function o0(d){let u=.5,h=.5;switch(d){case"right":case"top-right":case"bottom-right":u=1;break;case"left":case"top-left":case"bottom-left":u=0}switch(d){case"bottom":case"bottom-right":case"bottom-left":h=1;break;case"top":case"top-right":case"top-left":h=0}return{horizontalAlign:u,verticalAlign:h}}function s0(d,u,h){const v=u.getMaxScale()*Il,{maxImageWidth:w,maxImageHeight:K}=u.getMaxImageSize(d),F=Math.max(v,K*h);return{verticalLineContentWidth:Math.max(v,w*h),horizontalLineContentHeight:F}}function mm(d){switch(d){case"top":return 0;case"center":return .5;default:return 1}}function s1(d,u,h){return!(d===l.ag.horizontal||!u&&!ds(h)||u&&(Vf[h]||(v=h,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(v)))));var v}function J0(d,u,h,v,w,K){const F=K[d.fontStack],W=function(ie,de,_e,Re){if(ie&&ie.rect)return ie;const ze=de[_e.fontStack],We=ze&&ze[Re];return We?{rect:null,metrics:We.metrics}:null}(F&&F[u],w,d,u);if(W===null)return null;let X;if(h)X=v.verticalLineContentWidth-d.scale*Il;else{const ie=mm(d.verticalAlign);X=(v.horizontalLineContentHeight-d.scale*Il)*ie}return{rect:W.rect,metrics:W.metrics,baselineOffset:X}}function a1(d,u,h,v,w){const K=w[d.imageName];if(!K)return null;const F=K.paddedRect,W=K.displaySize,X={width:W[0],height:W[1],left:WA,top:-3,advance:u?W[1]:W[0]};let ie;if(u)ie=v.verticalLineContentWidth-W[1]*d.scale;else{const de=mm(d.verticalAlign);ie=(v.horizontalLineContentHeight-W[1]*d.scale)*de}return{rect:F,metrics:X,baselineOffset:ie,imageOffset:(u?W[0]:W[1])*d.scale-Il*h}}function eg(d,u,h,v){if(v===0)return;const w=d[h],K=(d[h].x+w.metrics.advance*w.scale)*v;for(let F=u;F<=h;F++)d[F].x-=K}function gm(d,u,h){const{horizontalAlign:v,verticalAlign:w}=o0(h),K=u[0]-d.displaySize[0]*v,F=u[1]-d.displaySize[1]*w;return{image:d,top:F,bottom:F+d.displaySize[1],left:K,right:K+d.displaySize[0]}}function ym(d){var u,h;let v=d.left,w=d.top,K=d.right-v,F=d.bottom-w;const W=(u=d.image.textFitWidth)!==null&&u!==void 0?u:"stretchOrShrink",X=(h=d.image.textFitHeight)!==null&&h!==void 0?h:"stretchOrShrink",ie=(d.image.content[2]-d.image.content[0])/(d.image.content[3]-d.image.content[1]);if(X==="proportional"){if(W==="stretchOnly"&&K/F<ie||W==="proportional"){const de=Math.ceil(F*ie);v*=de/K,K=de}}else if(W==="proportional"&&X==="stretchOnly"&&ie!==0&&K/F>ie){const de=Math.ceil(K/ie);w*=de/F,F=de}return{x1:v,y1:w,x2:v+K,y2:w+F}}function vm(d,u,h,v,w,K){const F=d.image;let W;if(F.content){const At=F.content,Ct=F.pixelRatio||1;W=[At[0]/Ct,At[1]/Ct,F.displaySize[0]-At[2]/Ct,F.displaySize[1]-At[3]/Ct]}const X=u.left*K,ie=u.right*K;let de,_e,Re,ze;h==="width"||h==="both"?(ze=w[0]+X-v[3],_e=w[0]+ie+v[1]):(ze=w[0]+(X+ie-F.displaySize[0])/2,_e=ze+F.displaySize[0]);const We=u.top*K,et=u.bottom*K;return h==="height"||h==="both"?(de=w[1]+We-v[0],Re=w[1]+et+v[2]):(de=w[1]+(We+et-F.displaySize[1])/2,Re=de+F.displaySize[1]),{image:F,top:de,right:_e,bottom:Re,left:ze,collisionPadding:W}}const Tp=255,ih=128,Od=Tp*ih;function Cm(d,u){const{expression:h}=u;if(h.kind==="constant")return{kind:"constant",layoutSize:h.evaluate(new Uo(d+1))};if(h.kind==="source")return{kind:"source"};{const{zoomStops:v,interpolationType:w}=h;let K=0;for(;K<v.length&&v[K]<=d;)K++;K=Math.max(0,K-1);let F=K;for(;F<v.length&&v[F]<d+1;)F++;F=Math.min(v.length-1,F);const W=v[K],X=v[F];return h.kind==="composite"?{kind:"composite",minZoom:W,maxZoom:X,interpolationType:w}:{kind:"camera",minZoom:W,maxZoom:X,minSize:h.evaluate(new Uo(W)),maxSize:h.evaluate(new Uo(X)),interpolationType:w}}}function Hf(d,u,h){let v="never";const w=d.get(u);return w?v=w:d.get(h)&&(v="always"),v}const Zy=Pc.VectorTileFeature.types,a0=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function m(d,u,h,v,w,K,F,W,X,ie,de,_e,Re){const ze=W?Math.min(Od,Math.round(W[0])):0,We=W?Math.min(Od,Math.round(W[1])):0;d.emplaceBack(u,h,Math.round(32*v),Math.round(32*w),K,F,(ze<<1)+(X?1:0),We,16*ie,16*de,256*_e,256*Re)}function C(d,u,h){d.emplaceBack(u.x,u.y,h),d.emplaceBack(u.x,u.y,h),d.emplaceBack(u.x,u.y,h),d.emplaceBack(u.x,u.y,h)}function D(d){for(const u of d.sections)if(Bc(u.text))return!0;return!1}class Q{constructor(u){this.layoutVertexArray=new rn,this.indexArray=new On,this.programConfigurations=u,this.segments=new Zr,this.dynamicLayoutVertexArray=new Zt,this.opacityVertexArray=new Mn,this.hasVisibleVertices=!1,this.placedSymbolArray=new te}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(u,h,v,w){this.isEmpty()||(v&&(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,Jg.members),this.indexBuffer=u.createIndexBuffer(this.indexArray,h),this.dynamicLayoutVertexBuffer=u.createVertexBuffer(this.dynamicLayoutVertexArray,H0.members,!0),this.opacityVertexBuffer=u.createVertexBuffer(this.opacityVertexArray,a0,!0),this.opacityVertexBuffer.itemSize=1),(v||w)&&this.programConfigurations.upload(u))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}xr("SymbolBuffers",Q);class le{constructor(u,h,v){this.layoutVertexArray=new u,this.layoutAttributes=h,this.indexArray=new v,this.segments=new Zr,this.collisionVertexArray=new bn}upload(u){this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=u.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=u.createVertexBuffer(this.collisionVertexArray,Yf.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}xr("CollisionBuffers",le);class ge{constructor(u){this.collisionBoxArray=u.collisionBoxArray,this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(F=>F.id),this.index=u.index,this.pixelRatio=u.pixelRatio,this.sourceLayerIndex=u.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const h=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Cm(this.zoom,h["text-size"]),this.iconSizeData=Cm(this.zoom,h["icon-size"]);const v=this.layers[0].layout,w=v.get("symbol-sort-key"),K=v.get("symbol-z-order");this.canOverlap=Hf(v,"text-overlap","text-allow-overlap")!=="never"||Hf(v,"icon-overlap","icon-allow-overlap")!=="never"||v.get("text-ignore-placement")||v.get("icon-ignore-placement"),this.sortFeaturesByKey=K!=="viewport-y"&&!w.isConstant(),this.sortFeaturesByY=(K==="viewport-y"||K==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,v.get("symbol-placement")==="point"&&(this.writingModes=v.get("text-writing-mode").map(F=>l.ag[F])),this.stateDependentLayerIds=this.layers.filter(F=>F.isStateDependent()).map(F=>F.id),this.sourceID=u.sourceID}createArrays(){this.text=new Q(new yA(this.layers,this.zoom,u=>/^text/.test(u))),this.icon=new Q(new yA(this.layers,this.zoom,u=>/^icon/.test(u))),this.glyphOffsetArray=new ke,this.lineVertexArray=new Te,this.symbolInstances=new be,this.textAnchorOffsets=new Xe}calculateGlyphDependencies(u,h,v,w,K){for(let F=0;F<u.length;F++)if(h[u.charCodeAt(F)]=!0,(v||w)&&K){const W=Op[u.charAt(F)];W&&(h[W.charCodeAt(0)]=!0)}}populate(u,h,v){const w=this.layers[0],K=w.layout,F=K.get("text-font"),W=K.get("text-field"),X=K.get("icon-image"),ie=(W.value.kind!=="constant"||W.value.value instanceof to&&!W.value.value.isEmpty()||W.value.value.toString().length>0)&&(F.value.kind!=="constant"||F.value.value.length>0),de=X.value.kind!=="constant"||!!X.value.value||Object.keys(X.parameters).length>0,_e=K.get("symbol-sort-key");if(this.features=[],!ie&&!de)return;const Re=h.iconDependencies,ze=h.glyphDependencies,We=h.availableImages,et=new Uo(this.zoom);for(const{feature:At,id:Ct,index:Nt,sourceLayerIndex:St}of u){const Le=w._featureFilter.needGeometry,lt=Ts(At,Le);if(!w._featureFilter.filter(et,lt,v))continue;let Bt,dn;if(Le||(lt.geometry=cc(At)),ie){const An=w.getValueAndResolveTokens("text-field",lt,v,We),Bn=to.factory(An),nr=this.hasRTLText=this.hasRTLText||D(Bn);(!nr||ol.getRTLTextPluginStatus()==="unavailable"||nr&&ol.isParsed())&&(Bt=e1(Bn,w,lt))}if(de){const An=w.getValueAndResolveTokens("icon-image",lt,v,We);dn=An instanceof Xs?An:Xs.fromString(An)}if(!Bt&&!dn)continue;const kn=this.sortFeaturesByKey?_e.evaluate(lt,{},v):void 0;if(this.features.push({id:Ct,text:Bt,icon:dn,index:Nt,sourceLayerIndex:St,geometry:lt.geometry,properties:At.properties,type:Zy[At.type],sortKey:kn}),dn&&(Re[dn.name]=!0),Bt){const An=F.evaluate(lt,{},v).join(","),Bn=K.get("text-rotation-alignment")!=="viewport"&&K.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(l.ag.vertical)>=0;for(const nr of Bt.sections)if(nr.image)Re[nr.image.name]=!0;else{const jn=Md(Bt.toString()),cr=nr.fontStack||An,Tn=ze[cr]=ze[cr]||{};this.calculateGlyphDependencies(nr.text,Tn,Bn,this.allowVerticalPlacement,jn)}}}K.get("symbol-placement")==="line"&&(this.features=function(At){const Ct={},Nt={},St=[];let Le=0;function lt(An){St.push(At[An]),Le++}function Bt(An,Bn,nr){const jn=Nt[An];return delete Nt[An],Nt[Bn]=jn,St[jn].geometry[0].pop(),St[jn].geometry[0]=St[jn].geometry[0].concat(nr[0]),jn}function dn(An,Bn,nr){const jn=Ct[Bn];return delete Ct[Bn],Ct[An]=jn,St[jn].geometry[0].shift(),St[jn].geometry[0]=nr[0].concat(St[jn].geometry[0]),jn}function kn(An,Bn,nr){const jn=nr?Bn[0][Bn[0].length-1]:Bn[0][0];return`${An}:${jn.x}:${jn.y}`}for(let An=0;An<At.length;An++){const Bn=At[An],nr=Bn.geometry,jn=Bn.text?Bn.text.toString():null;if(!jn){lt(An);continue}const cr=kn(jn,nr),Tn=kn(jn,nr,!0);if(cr in Nt&&Tn in Ct&&Nt[cr]!==Ct[Tn]){const Nr=dn(cr,Tn,nr),_i=Bt(cr,Tn,St[Nr].geometry);delete Ct[cr],delete Nt[Tn],Nt[kn(jn,St[_i].geometry,!0)]=_i,St[Nr].geometry=null}else cr in Nt?Bt(cr,Tn,nr):Tn in Ct?dn(cr,Tn,nr):(lt(An),Ct[cr]=Le-1,Nt[Tn]=Le-1)}return St.filter(An=>An.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((At,Ct)=>At.sortKey-Ct.sortKey)}update(u,h,v){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(u,h,this.layers,v),this.icon.programConfigurations.updatePaintArrays(u,h,this.layers,v))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(u){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(u),this.iconCollisionBox.upload(u)),this.text.upload(u,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(u,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(u,h){const v=this.lineVertexArray.length;if(u.segment!==void 0){let w=u.dist(h[u.segment+1]),K=u.dist(h[u.segment]);const F={};for(let W=u.segment+1;W<h.length;W++)F[W]={x:h[W].x,y:h[W].y,tileUnitDistanceFromAnchor:w},W<h.length-1&&(w+=h[W+1].dist(h[W]));for(let W=u.segment||0;W>=0;W--)F[W]={x:h[W].x,y:h[W].y,tileUnitDistanceFromAnchor:K},W>0&&(K+=h[W-1].dist(h[W]));for(let W=0;W<h.length;W++){const X=F[W];this.lineVertexArray.emplaceBack(X.x,X.y,X.tileUnitDistanceFromAnchor)}}return{lineStartIndex:v,lineLength:this.lineVertexArray.length-v}}addSymbols(u,h,v,w,K,F,W,X,ie,de,_e,Re){const ze=u.indexArray,We=u.layoutVertexArray,et=u.segments.prepareSegment(4*h.length,We,ze,this.canOverlap?F.sortKey:void 0),At=this.glyphOffsetArray.length,Ct=et.vertexLength,Nt=this.allowVerticalPlacement&&W===l.ag.vertical?Math.PI/2:0,St=F.text&&F.text.sections;for(let Le=0;Le<h.length;Le++){const{tl:lt,tr:Bt,bl:dn,br:kn,tex:An,pixelOffsetTL:Bn,pixelOffsetBR:nr,minFontScaleX:jn,minFontScaleY:cr,glyphOffset:Tn,isSDF:Nr,sectionIndex:_i}=h[Le],hi=et.vertexLength,Jr=Tn[1];m(We,X.x,X.y,lt.x,Jr+lt.y,An.x,An.y,v,Nr,Bn.x,Bn.y,jn,cr),m(We,X.x,X.y,Bt.x,Jr+Bt.y,An.x+An.w,An.y,v,Nr,nr.x,Bn.y,jn,cr),m(We,X.x,X.y,dn.x,Jr+dn.y,An.x,An.y+An.h,v,Nr,Bn.x,nr.y,jn,cr),m(We,X.x,X.y,kn.x,Jr+kn.y,An.x+An.w,An.y+An.h,v,Nr,nr.x,nr.y,jn,cr),C(u.dynamicLayoutVertexArray,X,Nt),ze.emplaceBack(hi,hi+2,hi+1),ze.emplaceBack(hi+1,hi+2,hi+3),et.vertexLength+=4,et.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Tn[0]),Le!==h.length-1&&_i===h[Le+1].sectionIndex||u.programConfigurations.populatePaintArrays(We.length,F,F.index,{},Re,St&&St[_i])}u.placedSymbolArray.emplaceBack(X.x,X.y,At,this.glyphOffsetArray.length-At,Ct,ie,de,X.segment,v?v[0]:0,v?v[1]:0,w[0],w[1],W,0,!1,0,_e)}_addCollisionDebugVertex(u,h,v,w,K,F){return h.emplaceBack(0,0),u.emplaceBack(v.x,v.y,w,K,Math.round(F.x),Math.round(F.y))}addCollisionDebugVertices(u,h,v,w,K,F,W){const X=K.segments.prepareSegment(4,K.layoutVertexArray,K.indexArray),ie=X.vertexLength,de=K.layoutVertexArray,_e=K.collisionVertexArray,Re=W.anchorX,ze=W.anchorY;this._addCollisionDebugVertex(de,_e,F,Re,ze,new U(u,h)),this._addCollisionDebugVertex(de,_e,F,Re,ze,new U(v,h)),this._addCollisionDebugVertex(de,_e,F,Re,ze,new U(v,w)),this._addCollisionDebugVertex(de,_e,F,Re,ze,new U(u,w)),X.vertexLength+=4;const We=K.indexArray;We.emplaceBack(ie,ie+1),We.emplaceBack(ie+1,ie+2),We.emplaceBack(ie+2,ie+3),We.emplaceBack(ie+3,ie),X.primitiveLength+=4}addDebugCollisionBoxes(u,h,v,w){for(let K=u;K<h;K++){const F=this.collisionBoxArray.get(K);this.addCollisionDebugVertices(F.x1,F.y1,F.x2,F.y2,w?this.textCollisionBox:this.iconCollisionBox,F.anchorPoint,v)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new le(En,$m.members,zn),this.iconCollisionBox=new le(En,$m.members,zn);for(let u=0;u<this.symbolInstances.length;u++){const h=this.symbolInstances.get(u);this.addDebugCollisionBoxes(h.textBoxStartIndex,h.textBoxEndIndex,h,!0),this.addDebugCollisionBoxes(h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h,!0),this.addDebugCollisionBoxes(h.iconBoxStartIndex,h.iconBoxEndIndex,h,!1),this.addDebugCollisionBoxes(h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex,h,!1)}}_deserializeCollisionBoxesForSymbol(u,h,v,w,K,F,W,X,ie){const de={};for(let _e=h;_e<v;_e++){const Re=u.get(_e);de.textBox={x1:Re.x1,y1:Re.y1,x2:Re.x2,y2:Re.y2,anchorPointX:Re.anchorPointX,anchorPointY:Re.anchorPointY},de.textFeatureIndex=Re.featureIndex;break}for(let _e=w;_e<K;_e++){const Re=u.get(_e);de.verticalTextBox={x1:Re.x1,y1:Re.y1,x2:Re.x2,y2:Re.y2,anchorPointX:Re.anchorPointX,anchorPointY:Re.anchorPointY},de.verticalTextFeatureIndex=Re.featureIndex;break}for(let _e=F;_e<W;_e++){const Re=u.get(_e);de.iconBox={x1:Re.x1,y1:Re.y1,x2:Re.x2,y2:Re.y2,anchorPointX:Re.anchorPointX,anchorPointY:Re.anchorPointY},de.iconFeatureIndex=Re.featureIndex;break}for(let _e=X;_e<ie;_e++){const Re=u.get(_e);de.verticalIconBox={x1:Re.x1,y1:Re.y1,x2:Re.x2,y2:Re.y2,anchorPointX:Re.anchorPointX,anchorPointY:Re.anchorPointY},de.verticalIconFeatureIndex=Re.featureIndex;break}return de}deserializeCollisionBoxes(u){this.collisionArrays=[];for(let h=0;h<this.symbolInstances.length;h++){const v=this.symbolInstances.get(h);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(u,v.textBoxStartIndex,v.textBoxEndIndex,v.verticalTextBoxStartIndex,v.verticalTextBoxEndIndex,v.iconBoxStartIndex,v.iconBoxEndIndex,v.verticalIconBoxStartIndex,v.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(u,h){const v=u.placedSymbolArray.get(h),w=v.vertexStartIndex+4*v.numGlyphs;for(let K=v.vertexStartIndex;K<w;K+=4)u.indexArray.emplaceBack(K,K+2,K+1),u.indexArray.emplaceBack(K+1,K+2,K+3)}getSortedSymbolIndexes(u){if(this.sortedAngle===u&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const h=Math.sin(u),v=Math.cos(u),w=[],K=[],F=[];for(let W=0;W<this.symbolInstances.length;++W){F.push(W);const X=this.symbolInstances.get(W);w.push(0|Math.round(h*X.anchorX+v*X.anchorY)),K.push(X.featureIndex)}return F.sort((W,X)=>w[W]-w[X]||K[X]-K[W]),F}addToSortKeyRanges(u,h){const v=this.sortKeyRanges[this.sortKeyRanges.length-1];v&&v.sortKey===h?v.symbolInstanceEnd=u+1:this.sortKeyRanges.push({sortKey:h,symbolInstanceStart:u,symbolInstanceEnd:u+1})}sortFeatures(u){if(this.sortFeaturesByY&&this.sortedAngle!==u&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(u),this.sortedAngle=u,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const h of this.symbolInstanceIndexes){const v=this.symbolInstances.get(h);this.featureSortOrder.push(v.featureIndex),[v.rightJustifiedTextSymbolIndex,v.centerJustifiedTextSymbolIndex,v.leftJustifiedTextSymbolIndex].forEach((w,K,F)=>{w>=0&&F.indexOf(w)===K&&this.addIndicesForPlacedSymbol(this.text,w)}),v.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,v.verticalPlacedTextSymbolIndex),v.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,v.placedIconSymbolIndex),v.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,v.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let tt,Ot;xr("SymbolBucket",ge,{omit:["layers","collisionBoxArray","features","compareText"]}),ge.MAX_GLYPHS=65535,ge.addDynamicAttributes=C;var Wt={get paint(){return Ot=Ot||new sl({"icon-opacity":new ei(J.paint_symbol["icon-opacity"]),"icon-color":new ei(J.paint_symbol["icon-color"]),"icon-halo-color":new ei(J.paint_symbol["icon-halo-color"]),"icon-halo-width":new ei(J.paint_symbol["icon-halo-width"]),"icon-halo-blur":new ei(J.paint_symbol["icon-halo-blur"]),"icon-translate":new Kr(J.paint_symbol["icon-translate"]),"icon-translate-anchor":new Kr(J.paint_symbol["icon-translate-anchor"]),"text-opacity":new ei(J.paint_symbol["text-opacity"]),"text-color":new ei(J.paint_symbol["text-color"],{runtimeType:Sr,getOverride:d=>d.textColor,hasOverride:d=>!!d.textColor}),"text-halo-color":new ei(J.paint_symbol["text-halo-color"]),"text-halo-width":new ei(J.paint_symbol["text-halo-width"]),"text-halo-blur":new ei(J.paint_symbol["text-halo-blur"]),"text-translate":new Kr(J.paint_symbol["text-translate"]),"text-translate-anchor":new Kr(J.paint_symbol["text-translate-anchor"])})},get layout(){return tt=tt||new sl({"symbol-placement":new Kr(J.layout_symbol["symbol-placement"]),"symbol-spacing":new Kr(J.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Kr(J.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new ei(J.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Kr(J.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Kr(J.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Kr(J.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Kr(J.layout_symbol["icon-ignore-placement"]),"icon-optional":new Kr(J.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Kr(J.layout_symbol["icon-rotation-alignment"]),"icon-size":new ei(J.layout_symbol["icon-size"]),"icon-text-fit":new Kr(J.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Kr(J.layout_symbol["icon-text-fit-padding"]),"icon-image":new ei(J.layout_symbol["icon-image"]),"icon-rotate":new ei(J.layout_symbol["icon-rotate"]),"icon-padding":new ei(J.layout_symbol["icon-padding"]),"icon-keep-upright":new Kr(J.layout_symbol["icon-keep-upright"]),"icon-offset":new ei(J.layout_symbol["icon-offset"]),"icon-anchor":new ei(J.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Kr(J.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Kr(J.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Kr(J.layout_symbol["text-rotation-alignment"]),"text-field":new ei(J.layout_symbol["text-field"]),"text-font":new ei(J.layout_symbol["text-font"]),"text-size":new ei(J.layout_symbol["text-size"]),"text-max-width":new ei(J.layout_symbol["text-max-width"]),"text-line-height":new Kr(J.layout_symbol["text-line-height"]),"text-letter-spacing":new ei(J.layout_symbol["text-letter-spacing"]),"text-justify":new ei(J.layout_symbol["text-justify"]),"text-radial-offset":new ei(J.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Kr(J.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new ei(J.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new ei(J.layout_symbol["text-anchor"]),"text-max-angle":new Kr(J.layout_symbol["text-max-angle"]),"text-writing-mode":new Kr(J.layout_symbol["text-writing-mode"]),"text-rotate":new ei(J.layout_symbol["text-rotate"]),"text-padding":new Kr(J.layout_symbol["text-padding"]),"text-keep-upright":new Kr(J.layout_symbol["text-keep-upright"]),"text-transform":new ei(J.layout_symbol["text-transform"]),"text-offset":new ei(J.layout_symbol["text-offset"]),"text-allow-overlap":new Kr(J.layout_symbol["text-allow-overlap"]),"text-overlap":new Kr(J.layout_symbol["text-overlap"]),"text-ignore-placement":new Kr(J.layout_symbol["text-ignore-placement"]),"text-optional":new Kr(J.layout_symbol["text-optional"])})}};class wn{constructor(u){if(u.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=u.property.overrides?u.property.overrides.runtimeType:Jn,this.defaultValue=u}evaluate(u){if(u.formattedSection){const h=this.defaultValue.property.overrides;if(h&&h.hasOverride(u.formattedSection))return h.getOverride(u.formattedSection)}return u.feature&&u.featureState?this.defaultValue.evaluate(u.feature,u.featureState):this.defaultValue.property.specification.default}eachChild(u){this.defaultValue.isConstant()||u(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}xr("FormatSectionOverride",wn,{omit:["defaultValue"]});class ir extends al{constructor(u){super(u,Wt)}recalculate(u,h){if(super.recalculate(u,h),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const v=this.layout.get("text-writing-mode");if(v){const w=[];for(const K of v)w.indexOf(K)<0&&w.push(K);this.layout._values["text-writing-mode"]=w}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(u,h,v,w){const K=this.layout.get(u).evaluate(h,{},v,w),F=this._unevaluatedLayout._values[u];return F.isDataDriven()||yd(F.value)||!K?K:function(W,X){return X.replace(/{([^{}]+)}/g,(ie,de)=>W&&de in W?String(W[de]):"")}(h.properties,K)}createBucket(u){return new ge(u)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const u of Wt.paint.overridableProperties){if(!ir.hasPaintOverride(this.layout,u))continue;const h=this.paint.get(u),v=new wn(h),w=new gd(v,h.property.specification);let K=null;K=h.value.kind==="constant"||h.value.kind==="source"?new Gc("source",w):new Qc("composite",w,h.value.zoomStops),this.paint._values[u]=new Eo(h.property,K,h.parameters)}}_handleOverridablePaintPropertyUpdate(u,h,v){return!(!this.layout||h.isDataDriven()||v.isDataDriven())&&ir.hasPaintOverride(this.layout,u)}static hasPaintOverride(u,h){const v=u.get("text-field"),w=Wt.paint.properties[h];let K=!1;const F=W=>{for(const X of W)if(w.overrides&&w.overrides.hasOverride(X))return void(K=!0)};if(v.value.kind==="constant"&&v.value.value instanceof to)F(v.value.value.sections);else if(v.value.kind==="source"){const W=ie=>{K||(ie instanceof ea&&Oi(ie.value)===Wi?F(ie.value.sections):ie instanceof du?F(ie.sections):ie.eachChild(W))},X=v.value;X._styleExpression&&W(X._styleExpression.expression)}return K}}let mr;var or={get paint(){return mr=mr||new sl({"background-color":new Kr(J.paint_background["background-color"]),"background-pattern":new vl(J.paint_background["background-pattern"]),"background-opacity":new Kr(J.paint_background["background-opacity"])})}};class Vr extends al{constructor(u){super(u,or)}}let ai;var ui={get paint(){return ai=ai||new sl({"raster-opacity":new Kr(J.paint_raster["raster-opacity"]),"raster-hue-rotate":new Kr(J.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Kr(J.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Kr(J.paint_raster["raster-brightness-max"]),"raster-saturation":new Kr(J.paint_raster["raster-saturation"]),"raster-contrast":new Kr(J.paint_raster["raster-contrast"]),"raster-resampling":new Kr(J.paint_raster["raster-resampling"]),"raster-fade-duration":new Kr(J.paint_raster["raster-fade-duration"])})}};class xl extends al{constructor(u){super(u,ui)}}class hn extends al{constructor(u){super(u,{}),this.onAdd=h=>{this.implementation.onAdd&&this.implementation.onAdd(h,h.painter.context.gl)},this.onRemove=h=>{this.implementation.onRemove&&this.implementation.onRemove(h,h.painter.context.gl)},this.implementation=u}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class en{constructor(u){this._methodToThrottle=u,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const yn={once:!0},Cr=63710088e-1;class Xr{constructor(u,h){if(isNaN(u)||isNaN(h))throw new Error(`Invalid LngLat object: (${u}, ${h})`);if(this.lng=+u,this.lat=+h,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Xr(Yt(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(u){const h=Math.PI/180,v=this.lat*h,w=u.lat*h,K=Math.sin(v)*Math.sin(w)+Math.cos(v)*Math.cos(w)*Math.cos((u.lng-this.lng)*h);return Cr*Math.acos(Math.min(K,1))}static convert(u){if(u instanceof Xr)return u;if(Array.isArray(u)&&(u.length===2||u.length===3))return new Xr(Number(u[0]),Number(u[1]));if(!Array.isArray(u)&&typeof u=="object"&&u!==null)return new Xr(Number("lng"in u?u.lng:u.lon),Number(u.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const Ti=2*Math.PI*Cr;function Pi(d){return Ti*Math.cos(d*Math.PI/180)}function ji(d){return(180+d)/360}function Gl(d){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+d*Math.PI/360)))/360}function ys(d,u){return d/Pi(u)}function oh(d){return 360/Math.PI*Math.atan(Math.exp((180-360*d)*Math.PI/180))-90}function l1(d,u){return d*Pi(oh(u))}class tg{constructor(u,h,v=0){this.x=+u,this.y=+h,this.z=+v}static fromLngLat(u,h=0){const v=Xr.convert(u);return new tg(ji(v.lng),Gl(v.lat),ys(h,v.lat))}toLngLat(){return new Xr(360*this.x-180,oh(this.y))}toAltitude(){return l1(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/Ti*(u=oh(this.y),1/Math.cos(u*Math.PI/180));var u}}function i_(d,u,h){var v=2*Math.PI*6378137/256/Math.pow(2,h);return[d*v-2*Math.PI*6378137/2,u*v-2*Math.PI*6378137/2]}class Xy{constructor(u,h,v){if(!function(w,K,F){return!(w<0||w>25||F<0||F>=Math.pow(2,w)||K<0||K>=Math.pow(2,w))}(u,h,v))throw new Error(`x=${h}, y=${v}, z=${u} outside of bounds. 0<=x<${Math.pow(2,u)}, 0<=y<${Math.pow(2,u)} 0<=z<=25 `);this.z=u,this.x=h,this.y=v,this.key=l0(0,u,u,h,v)}equals(u){return this.z===u.z&&this.x===u.x&&this.y===u.y}url(u,h,v){const w=(F=this.y,W=this.z,X=i_(256*(K=this.x),256*(F=Math.pow(2,W)-F-1),W),ie=i_(256*(K+1),256*(F+1),W),X[0]+","+X[1]+","+ie[0]+","+ie[1]);var K,F,W,X,ie;const de=function(_e,Re,ze){let We,et="";for(let At=_e;At>0;At--)We=1<<At-1,et+=(Re&We?1:0)+(ze&We?2:0);return et}(this.z,this.x,this.y);return u[(this.x+this.y)%u.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(v==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,h>1?"@2x":"").replace(/{quadkey}/g,de).replace(/{bbox-epsg-3857}/g,w)}isChildOf(u){const h=this.z-u.z;return h>0&&u.x===this.x>>h&&u.y===this.y>>h}getTilePoint(u){const h=Math.pow(2,this.z);return new U((u.x*h-this.x)*at,(u.y*h-this.y)*at)}toString(){return`${this.z}/${this.x}/${this.y}`}}class o_{constructor(u,h){this.wrap=u,this.canonical=h,this.key=l0(u,h.z,h.z,h.x,h.y)}}class Id{constructor(u,h,v,w,K){if(this.terrainRttPosMatrix32f=null,u<v)throw new Error(`overscaledZ should be >= z; overscaledZ = ${u}; z = ${v}`);this.overscaledZ=u,this.wrap=h,this.canonical=new Xy(v,+w,+K),this.key=l0(h,u,v,w,K)}clone(){return new Id(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(u){return this.overscaledZ===u.overscaledZ&&this.wrap===u.wrap&&this.canonical.equals(u.canonical)}scaledTo(u){if(u>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${u}; overscaledZ = ${this.overscaledZ}`);const h=this.canonical.z-u;return u>this.canonical.z?new Id(u,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Id(u,this.wrap,u,this.canonical.x>>h,this.canonical.y>>h)}calculateScaledKey(u,h){if(u>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${u}; overscaledZ = ${this.overscaledZ}`);const v=this.canonical.z-u;return u>this.canonical.z?l0(this.wrap*+h,u,this.canonical.z,this.canonical.x,this.canonical.y):l0(this.wrap*+h,u,u,this.canonical.x>>v,this.canonical.y>>v)}isChildOf(u){if(u.wrap!==this.wrap)return!1;const h=this.canonical.z-u.canonical.z;return u.overscaledZ===0||u.overscaledZ<this.overscaledZ&&u.canonical.x===this.canonical.x>>h&&u.canonical.y===this.canonical.y>>h}children(u){if(this.overscaledZ>=u)return[new Id(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const h=this.canonical.z+1,v=2*this.canonical.x,w=2*this.canonical.y;return[new Id(h,this.wrap,h,v,w),new Id(h,this.wrap,h,v+1,w),new Id(h,this.wrap,h,v,w+1),new Id(h,this.wrap,h,v+1,w+1)]}isLessThan(u){return this.wrap<u.wrap||!(this.wrap>u.wrap)&&(this.overscaledZ<u.overscaledZ||!(this.overscaledZ>u.overscaledZ)&&(this.canonical.x<u.canonical.x||!(this.canonical.x>u.canonical.x)&&this.canonical.y<u.canonical.y))}wrapped(){return new Id(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(u){return new Id(this.overscaledZ,u,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new o_(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(u){return this.canonical.getTilePoint(new tg(u.x-this.wrap,u.y))}}function l0(d,u,h,v,w){(d*=2)<0&&(d=-1*d-1);const K=1<<h;return(K*K*d+K*w+v).toString(36)+h.toString(36)+u.toString(36)}xr("CanonicalTileID",Xy),xr("OverscaledTileID",Id,{omit:["terrainRttPosMatrix32f"]});class s_{constructor(u,h,v,w=1,K=1,F=1,W=0){if(this.uid=u,h.height!==h.width)throw new RangeError("DEM tiles must be square");if(v&&!["mapbox","terrarium","custom"].includes(v))return void it(`"${v}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=h.height;const X=this.dim=h.height-2;switch(this.data=new Uint32Array(h.data.buffer),v){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=w,this.greenFactor=K,this.blueFactor=F,this.baseShift=W;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let ie=0;ie<X;ie++)this.data[this._idx(-1,ie)]=this.data[this._idx(0,ie)],this.data[this._idx(X,ie)]=this.data[this._idx(X-1,ie)],this.data[this._idx(ie,-1)]=this.data[this._idx(ie,0)],this.data[this._idx(ie,X)]=this.data[this._idx(ie,X-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(X,-1)]=this.data[this._idx(X-1,0)],this.data[this._idx(-1,X)]=this.data[this._idx(0,X-1)],this.data[this._idx(X,X)]=this.data[this._idx(X-1,X-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let ie=0;ie<X;ie++)for(let de=0;de<X;de++){const _e=this.get(ie,de);_e>this.max&&(this.max=_e),_e<this.min&&(this.min=_e)}}get(u,h){const v=new Uint8Array(this.data.buffer),w=4*this._idx(u,h);return this.unpack(v[w],v[w+1],v[w+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(u,h){if(u<-1||u>=this.dim+1||h<-1||h>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(h+1)*this.stride+(u+1)}unpack(u,h,v){return u*this.redFactor+h*this.greenFactor+v*this.blueFactor-this.baseShift}getPixels(){return new Bl({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(u,h,v){if(this.dim!==u.dim)throw new Error("dem dimension mismatch");let w=h*this.dim,K=h*this.dim+this.dim,F=v*this.dim,W=v*this.dim+this.dim;switch(h){case-1:w=K-1;break;case 1:K=w+1}switch(v){case-1:F=W-1;break;case 1:W=F+1}const X=-h*this.dim,ie=-v*this.dim;for(let de=F;de<W;de++)for(let _e=w;_e<K;_e++)this.data[this._idx(_e,de)]=u.data[this._idx(_e+X,de+ie)]}}xr("DEMData",s_);class a_{constructor(u){this._stringToNumber={},this._numberToString=[];for(let h=0;h<u.length;h++){const v=u[h];this._stringToNumber[v]=h,this._numberToString[h]=v}}encode(u){return this._stringToNumber[u]}decode(u){if(u>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${u} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[u]}}class l_{constructor(u,h,v,w,K){this.type="Feature",this._vectorTileFeature=u,u._z=h,u._x=v,u._y=w,this.properties=u.properties,this.id=K}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(u){this._geometry=u}toJSON(){const u={geometry:this.geometry};for(const h in this)h!=="_geometry"&&h!=="_vectorTileFeature"&&(u[h]=this[h]);return u}}class sh{constructor(u,h){this.tileID=u,this.x=u.canonical.x,this.y=u.canonical.y,this.z=u.canonical.z,this.grid=new il(at,16,0),this.grid3D=new il(at,16,0),this.featureIndexArray=new ut,this.promoteId=h}insert(u,h,v,w,K,F){const W=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(v,w,K);const X=F?this.grid3D:this.grid;for(let ie=0;ie<h.length;ie++){const de=h[ie],_e=[1/0,1/0,-1/0,-1/0];for(let Re=0;Re<de.length;Re++){const ze=de[Re];_e[0]=Math.min(_e[0],ze.x),_e[1]=Math.min(_e[1],ze.y),_e[2]=Math.max(_e[2],ze.x),_e[3]=Math.max(_e[3],ze.y)}_e[0]<at&&_e[1]<at&&_e[2]>=0&&_e[3]>=0&&X.insert(W,_e[0],_e[1],_e[2],_e[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Pc.VectorTile(new Z0(this.rawTileData)).layers,this.sourceLayerCoder=new a_(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(u,h,v,w){this.loadVTLayers();const K=u.params,F=at/u.tileSize/u.scale,W=vd(K.filter),X=u.queryGeometry,ie=u.queryPadding*F,de=A_(X),_e=this.grid.query(de.minX-ie,de.minY-ie,de.maxX+ie,de.maxY+ie),Re=A_(u.cameraQueryGeometry),ze=this.grid3D.query(Re.minX-ie,Re.minY-ie,Re.maxX+ie,Re.maxY+ie,(At,Ct,Nt,St)=>function(Le,lt,Bt,dn,kn){for(const Bn of Le)if(lt<=Bn.x&&Bt<=Bn.y&&dn>=Bn.x&&kn>=Bn.y)return!0;const An=[new U(lt,Bt),new U(lt,kn),new U(dn,kn),new U(dn,Bt)];if(Le.length>2){for(const Bn of An)if(LA(Le,Bn))return!0}for(let Bn=0;Bn<Le.length-1;Bn++)if(wp(Le[Bn],Le[Bn+1],An))return!0;return!1}(u.cameraQueryGeometry,At-ie,Ct-ie,Nt+ie,St+ie));for(const At of ze)_e.push(At);_e.sort(_m);const We={};let et;for(let At=0;At<_e.length;At++){const Ct=_e[At];if(Ct===et)continue;et=Ct;const Nt=this.featureIndexArray.get(Ct);let St=null;this.loadMatchingFeature(We,Nt.bucketIndex,Nt.sourceLayerIndex,Nt.featureIndex,W,K.layers,K.availableImages,h,v,w,(Le,lt,Bt)=>(St||(St=cc(Le)),lt.queryIntersectsFeature({queryGeometry:X,feature:Le,featureState:Bt,geometry:St,zoom:this.z,transform:u.transform,pixelsToTileUnits:F,pixelPosMatrix:u.pixelPosMatrix})))}return We}loadMatchingFeature(u,h,v,w,K,F,W,X,ie,de,_e){const Re=this.bucketLayerIDs[h];if(F&&!Re.some(At=>F.has(At)))return;const ze=this.sourceLayerCoder.decode(v),We=this.vtLayers[ze].feature(w);if(K.needGeometry){const At=Ts(We,!0);if(!K.filter(new Uo(this.tileID.overscaledZ),At,this.tileID.canonical))return}else if(!K.filter(new Uo(this.tileID.overscaledZ),We))return;const et=this.getId(We,ze);for(let At=0;At<Re.length;At++){const Ct=Re[At];if(F&&!F.has(Ct))continue;const Nt=X[Ct];if(!Nt)continue;let St={};et&&de&&(St=de.getState(Nt.sourceLayer||"_geojsonTileLayer",et));const Le=yt({},ie[Ct]);Le.paint=u_(Le.paint,Nt.paint,We,St,W),Le.layout=u_(Le.layout,Nt.layout,We,St,W);const lt=!_e||_e(We,Nt,St);if(!lt)continue;const Bt=new l_(We,this.z,this.x,this.y,et);Bt.layer=Le;let dn=u[Ct];dn===void 0&&(dn=u[Ct]=[]),dn.push({featureIndex:w,feature:Bt,intersectionZ:lt})}}lookupSymbolFeatures(u,h,v,w,K,F,W,X){const ie={};this.loadVTLayers();const de=vd(K);for(const _e of u)this.loadMatchingFeature(ie,v,w,_e,de,F,W,X,h);return ie}hasLayer(u){for(const h of this.bucketLayerIDs)for(const v of h)if(u===v)return!0;return!1}getId(u,h){var v;let w=u.id;return this.promoteId&&(w=u.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[h]],typeof w=="boolean"&&(w=Number(w)),w===void 0&&(!((v=u.properties)===null||v===void 0)&&v.cluster)&&this.promoteId&&(w=Number(u.properties.cluster_id))),w}}function u_(d,u,h,v,w){return Pt(d,(K,F)=>{const W=u instanceof ru?u.get(F):null;return W&&W.evaluate?W.evaluate(h,v,w):W})}function A_(d){let u=1/0,h=1/0,v=-1/0,w=-1/0;for(const K of d)u=Math.min(u,K.x),h=Math.min(h,K.y),v=Math.max(v,K.x),w=Math.max(w,K.y);return{minX:u,minY:h,maxX:v,maxY:w}}function _m(d,u){return u-d}function xo(d,u,h,v,w){const K=[];for(let F=0;F<d.length;F++){const W=d[F];let X;for(let ie=0;ie<W.length-1;ie++){let de=W[ie],_e=W[ie+1];de.x<u&&_e.x<u||(de.x<u?de=new U(u,de.y+(u-de.x)/(_e.x-de.x)*(_e.y-de.y))._round():_e.x<u&&(_e=new U(u,de.y+(u-de.x)/(_e.x-de.x)*(_e.y-de.y))._round()),de.y<h&&_e.y<h||(de.y<h?de=new U(de.x+(h-de.y)/(_e.y-de.y)*(_e.x-de.x),h)._round():_e.y<h&&(_e=new U(de.x+(h-de.y)/(_e.y-de.y)*(_e.x-de.x),h)._round()),de.x>=v&&_e.x>=v||(de.x>=v?de=new U(v,de.y+(v-de.x)/(_e.x-de.x)*(_e.y-de.y))._round():_e.x>=v&&(_e=new U(v,de.y+(v-de.x)/(_e.x-de.x)*(_e.y-de.y))._round()),de.y>=w&&_e.y>=w||(de.y>=w?de=new U(de.x+(w-de.y)/(_e.y-de.y)*(_e.x-de.x),w)._round():_e.y>=w&&(_e=new U(de.x+(w-de.y)/(_e.y-de.y)*(_e.x-de.x),w)._round()),X&&de.equals(X[X.length-1])||(X=[de],K.push(X)),X.push(_e)))))}}return K}xr("FeatureIndex",sh,{omit:["rawTileData","sourceLayerCoder"]});class Pp extends U{constructor(u,h,v,w){super(u,h),this.angle=v,w!==void 0&&(this.segment=w)}clone(){return new Pp(this.x,this.y,this.angle,this.segment)}}function Kc(d,u,h,v,w){if(u.segment===void 0||h===0)return!0;let K=u,F=u.segment+1,W=0;for(;W>-h/2;){if(F--,F<0)return!1;W-=d[F].dist(K),K=d[F]}W+=d[F].dist(d[F+1]),F++;const X=[];let ie=0;for(;W<h/2;){const de=d[F],_e=d[F+1];if(!_e)return!1;let Re=d[F-1].angleTo(de)-de.angleTo(_e);for(Re=Math.abs((Re+3*Math.PI)%(2*Math.PI)-Math.PI),X.push({distance:W,angleDelta:Re}),ie+=Re;W-X[0].distance>v;)ie-=X.shift().angleDelta;if(ie>w)return!1;F++,W+=de.dist(_e)}return!0}function Ql(d){let u=0;for(let h=0;h<d.length-1;h++)u+=d[h].dist(d[h+1]);return u}function c_(d,u,h){return d?.6*u*h:0}function Zf(d,u){return Math.max(d?d.right-d.left:0,u?u.right-u.left:0)}function n3(d,u,h,v,w,K){const F=c_(h,w,K),W=Zf(h,v)*K;let X=0;const ie=Ql(d)/2;for(let de=0;de<d.length-1;de++){const _e=d[de],Re=d[de+1],ze=_e.dist(Re);if(X+ze>ie){const We=(ie-X)/ze,et=mi.number(_e.x,Re.x,We),At=mi.number(_e.y,Re.y,We),Ct=new Pp(et,At,Re.angleTo(_e),de);return Ct._round(),!F||Kc(d,Ct,W,F,u)?Ct:void 0}X+=ze}}function r3(d,u,h,v,w,K,F,W,X){const ie=c_(v,K,F),de=Zf(v,w),_e=de*F,Re=d[0].x===0||d[0].x===X||d[0].y===0||d[0].y===X;return u-_e<u/4&&(u=_e+u/4),d_(d,Re?u/2*W%u:(de/2+2*K)*F*W%u,u,ie,h,_e,Re,!1,X)}function d_(d,u,h,v,w,K,F,W,X){const ie=K/2,de=Ql(d);let _e=0,Re=u-h,ze=[];for(let We=0;We<d.length-1;We++){const et=d[We],At=d[We+1],Ct=et.dist(At),Nt=At.angleTo(et);for(;Re+h<_e+Ct;){Re+=h;const St=(Re-_e)/Ct,Le=mi.number(et.x,At.x,St),lt=mi.number(et.y,At.y,St);if(Le>=0&&Le<X&&lt>=0&&lt<X&&Re-ie>=0&&Re+ie<=de){const Bt=new Pp(Le,lt,Nt,We);Bt._round(),v&&!Kc(d,Bt,K,v,w)||ze.push(Bt)}}_e+=Ct}return W||ze.length||F||(ze=d_(d,_e/2,h,v,w,K,F,!0,X)),ze}xr("Anchor",Pp);const ng=WA;function h_(d,u,h,v){const w=[],K=d.image,F=K.pixelRatio,W=K.paddedRect.w-2*ng,X=K.paddedRect.h-2*ng;let ie={x1:d.left,y1:d.top,x2:d.right,y2:d.bottom};const de=K.stretchX||[[0,W]],_e=K.stretchY||[[0,X]],Re=(Tn,Nr)=>Tn+Nr[1]-Nr[0],ze=de.reduce(Re,0),We=_e.reduce(Re,0),et=W-ze,At=X-We;let Ct=0,Nt=ze,St=0,Le=We,lt=0,Bt=et,dn=0,kn=At;if(K.content&&v){const Tn=K.content,Nr=Tn[2]-Tn[0],_i=Tn[3]-Tn[1];(K.textFitWidth||K.textFitHeight)&&(ie=ym(d)),Ct=u0(de,0,Tn[0]),St=u0(_e,0,Tn[1]),Nt=u0(de,Tn[0],Tn[2]),Le=u0(_e,Tn[1],Tn[3]),lt=Tn[0]-Ct,dn=Tn[1]-St,Bt=Nr-Nt,kn=_i-Le}const An=ie.x1,Bn=ie.y1,nr=ie.x2-An,jn=ie.y2-Bn,cr=(Tn,Nr,_i,hi)=>{const Jr=ah(Tn.stretch-Ct,Nt,nr,An),jo=rg(Tn.fixed-lt,Bt,Tn.stretch,ze),Al=ah(Nr.stretch-St,Le,jn,Bn),ql=rg(Nr.fixed-dn,kn,Nr.stretch,We),Ju=ah(_i.stretch-Ct,Nt,nr,An),Td=rg(_i.fixed-lt,Bt,_i.stretch,ze),Dc=ah(hi.stretch-St,Le,jn,Bn),eA=rg(hi.fixed-dn,kn,hi.stretch,We),qa=new U(Jr,Al),cl=new U(Ju,Al),tA=new U(Ju,Dc),nA=new U(Jr,Dc),fc=new U(jo/F,ql/F),Pd=new U(Td/F,eA/F),Iu=u*Math.PI/180;if(Iu){const ku=Math.sin(Iu),Tu=Math.cos(Iu),$l=[Tu,-ku,ku,Tu];qa._matMult($l),cl._matMult($l),nA._matMult($l),tA._matMult($l)}const pc=Tn.stretch+Tn.fixed,Vl=Nr.stretch+Nr.fixed;return{tl:qa,tr:cl,bl:nA,br:tA,tex:{x:K.paddedRect.x+ng+pc,y:K.paddedRect.y+ng+Vl,w:_i.stretch+_i.fixed-pc,h:hi.stretch+hi.fixed-Vl},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:fc,pixelOffsetBR:Pd,minFontScaleX:Bt/F/nr,minFontScaleY:kn/F/jn,isSDF:h}};if(v&&(K.stretchX||K.stretchY)){const Tn=f_(de,et,ze),Nr=f_(_e,At,We);for(let _i=0;_i<Tn.length-1;_i++){const hi=Tn[_i],Jr=Tn[_i+1];for(let jo=0;jo<Nr.length-1;jo++)w.push(cr(hi,Nr[jo],Jr,Nr[jo+1]))}}else w.push(cr({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:W+1},{fixed:0,stretch:X+1}));return w}function u0(d,u,h){let v=0;for(const w of d)v+=Math.max(u,Math.min(h,w[1]))-Math.max(u,Math.min(h,w[0]));return v}function f_(d,u,h){const v=[{fixed:-1,stretch:0}];for(const[w,K]of d){const F=v[v.length-1];v.push({fixed:w-F.stretch,stretch:F.stretch}),v.push({fixed:w-F.stretch,stretch:F.stretch+(K-w)})}return v.push({fixed:u+ng,stretch:h}),v}function ah(d,u,h,v){return d/u*h+v}function rg(d,u,h,v){return d-u*h/v}class bm{constructor(u,h,v,w,K,F,W,X,ie,de){var _e;if(this.boxStartIndex=u.length,ie){let Re=F.top,ze=F.bottom;const We=F.collisionPadding;We&&(Re-=We[1],ze+=We[3]);let et=ze-Re;et>0&&(et=Math.max(10,et),this.circleDiameter=et)}else{const Re=!((_e=F.image)===null||_e===void 0)&&_e.content&&(F.image.textFitWidth||F.image.textFitHeight)?ym(F):{x1:F.left,y1:F.top,x2:F.right,y2:F.bottom};Re.y1=Re.y1*W-X[0],Re.y2=Re.y2*W+X[2],Re.x1=Re.x1*W-X[3],Re.x2=Re.x2*W+X[1];const ze=F.collisionPadding;if(ze&&(Re.x1-=ze[0]*W,Re.y1-=ze[1]*W,Re.x2+=ze[2]*W,Re.y2+=ze[3]*W),de){const We=new U(Re.x1,Re.y1),et=new U(Re.x2,Re.y1),At=new U(Re.x1,Re.y2),Ct=new U(Re.x2,Re.y2),Nt=de*Math.PI/180;We._rotate(Nt),et._rotate(Nt),At._rotate(Nt),Ct._rotate(Nt),Re.x1=Math.min(We.x,et.x,At.x,Ct.x),Re.x2=Math.max(We.x,et.x,At.x,Ct.x),Re.y1=Math.min(We.y,et.y,At.y,Ct.y),Re.y2=Math.max(We.y,et.y,At.y,Ct.y)}u.emplaceBack(h.x,h.y,Re.x1,Re.y1,Re.x2,Re.y2,v,w,K)}this.boxEndIndex=u.length}}class kl{constructor(u=[],h=(v,w)=>v<w?-1:v>w?1:0){if(this.data=u,this.length=this.data.length,this.compare=h,this.length>0)for(let v=(this.length>>1)-1;v>=0;v--)this._down(v)}push(u){this.data.push(u),this._up(this.length++)}pop(){if(this.length===0)return;const u=this.data[0],h=this.data.pop();return--this.length>0&&(this.data[0]=h,this._down(0)),u}peek(){return this.data[0]}_up(u){const{data:h,compare:v}=this,w=h[u];for(;u>0;){const K=u-1>>1,F=h[K];if(v(w,F)>=0)break;h[u]=F,u=K}h[u]=w}_down(u){const{data:h,compare:v}=this,w=this.length>>1,K=h[u];for(;u<w;){let F=1+(u<<1);const W=F+1;if(W<this.length&&v(h[W],h[F])<0&&(F=W),v(h[F],K)>=0)break;h[u]=h[F],u=F}h[u]=K}}function Yl(d,u=1,h=!1){let v=1/0,w=1/0,K=-1/0,F=-1/0;const W=d[0];for(let ze=0;ze<W.length;ze++){const We=W[ze];(!ze||We.x<v)&&(v=We.x),(!ze||We.y<w)&&(w=We.y),(!ze||We.x>K)&&(K=We.x),(!ze||We.y>F)&&(F=We.y)}const X=Math.min(K-v,F-w);let ie=X/2;const de=new kl([],p_);if(X===0)return new U(v,w);for(let ze=v;ze<K;ze+=X)for(let We=w;We<F;We+=X)de.push(new A0(ze+ie,We+ie,ie,d));let _e=function(ze){let We=0,et=0,At=0;const Ct=ze[0];for(let Nt=0,St=Ct.length,Le=St-1;Nt<St;Le=Nt++){const lt=Ct[Nt],Bt=Ct[Le],dn=lt.x*Bt.y-Bt.x*lt.y;et+=(lt.x+Bt.x)*dn,At+=(lt.y+Bt.y)*dn,We+=3*dn}return new A0(et/We,At/We,0,ze)}(d),Re=de.length;for(;de.length;){const ze=de.pop();(ze.d>_e.d||!_e.d)&&(_e=ze,h&&console.log("found best %d after %d probes",Math.round(1e4*ze.d)/1e4,Re)),ze.max-_e.d<=u||(ie=ze.h/2,de.push(new A0(ze.p.x-ie,ze.p.y-ie,ie,d)),de.push(new A0(ze.p.x+ie,ze.p.y-ie,ie,d)),de.push(new A0(ze.p.x-ie,ze.p.y+ie,ie,d)),de.push(new A0(ze.p.x+ie,ze.p.y+ie,ie,d)),Re+=4)}return h&&(console.log(`num probes: ${Re}`),console.log(`best distance: ${_e.d}`)),_e.p}function p_(d,u){return u.max-d.max}function A0(d,u,h,v){this.p=new U(d,u),this.h=h,this.d=function(w,K){let F=!1,W=1/0;for(let X=0;X<K.length;X++){const ie=K[X];for(let de=0,_e=ie.length,Re=_e-1;de<_e;Re=de++){const ze=ie[de],We=ie[Re];ze.y>w.y!=We.y>w.y&&w.x<(We.x-ze.x)*(w.y-ze.y)/(We.y-ze.y)+ze.x&&(F=!F),W=Math.min(W,Ih(w,ze,We))}}return(F?1:-1)*Math.sqrt(W)}(this.p,v),this.max=this.d+this.h*Math.SQRT2}var bA;l.ax=void 0,(bA=l.ax||(l.ax={}))[bA.center=1]="center",bA[bA.left=2]="left",bA[bA.right=3]="right",bA[bA.top=4]="top",bA[bA.bottom=5]="bottom",bA[bA["top-left"]=6]="top-left",bA[bA["top-right"]=7]="top-right",bA[bA["bottom-left"]=8]="bottom-left",bA[bA["bottom-right"]=9]="bottom-right";const Kp=7,Jy=Number.POSITIVE_INFINITY;function m_(d,u){return u[1]!==Jy?function(h,v,w){let K=0,F=0;switch(v=Math.abs(v),w=Math.abs(w),h){case"top-right":case"top-left":case"top":F=w-Kp;break;case"bottom-right":case"bottom-left":case"bottom":F=-w+Kp}switch(h){case"top-right":case"bottom-right":case"right":K=-v;break;case"top-left":case"bottom-left":case"left":K=v}return[K,F]}(d,u[0],u[1]):function(h,v){let w=0,K=0;v<0&&(v=0);const F=v/Math.SQRT2;switch(h){case"top-right":case"top-left":K=F-Kp;break;case"bottom-right":case"bottom-left":K=-F+Kp;break;case"bottom":K=-v+Kp;break;case"top":K=v-Kp}switch(h){case"top-right":case"bottom-right":w=-F;break;case"top-left":case"bottom-left":w=F;break;case"left":w=v;break;case"right":w=-v}return[w,K]}(d,u[0])}function g_(d,u,h){var v;const w=d.layout,K=(v=w.get("text-variable-anchor-offset"))===null||v===void 0?void 0:v.evaluate(u,{},h);if(K){const W=K.values,X=[];for(let ie=0;ie<W.length;ie+=2){const de=X[ie]=W[ie],_e=W[ie+1].map(Re=>Re*Il);de.startsWith("top")?_e[1]-=Kp:de.startsWith("bottom")&&(_e[1]+=Kp),X[ie+1]=_e}return new Es(X)}const F=w.get("text-variable-anchor");if(F){let W;W=d._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[w.get("text-radial-offset").evaluate(u,{},h)*Il,Jy]:w.get("text-offset").evaluate(u,{},h).map(ie=>ie*Il);const X=[];for(const ie of F)X.push(ie,m_(ie,W));return new Es(X)}return null}function u1(d){switch(d){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function ig(d,u,h,v,w,K,F,W,X,ie,de,_e){let Re=K.textMaxSize.evaluate(u,{});Re===void 0&&(Re=F);const ze=d.layers[0].layout,We=ze.get("icon-offset").evaluate(u,{},de),et=y_(h.horizontal),At=F/24,Ct=d.tilePixelRatio*At,Nt=d.tilePixelRatio*Re/24,St=d.tilePixelRatio*W,Le=d.tilePixelRatio*ze.get("symbol-spacing"),lt=ze.get("text-padding")*d.tilePixelRatio,Bt=function(_i,hi,Jr,jo=1){const Al=_i.get("icon-padding").evaluate(hi,{},Jr),ql=Al&&Al.values;return[ql[0]*jo,ql[1]*jo,ql[2]*jo,ql[3]*jo]}(ze,u,de,d.tilePixelRatio),dn=ze.get("text-max-angle")/180*Math.PI,kn=ze.get("text-rotation-alignment")!=="viewport"&&ze.get("symbol-placement")!=="point",An=ze.get("icon-rotation-alignment")==="map"&&ze.get("symbol-placement")!=="point",Bn=ze.get("symbol-placement"),nr=Le/2,jn=ze.get("icon-text-fit");let cr;v&&jn!=="none"&&(d.allowVerticalPlacement&&h.vertical&&(cr=vm(v,h.vertical,jn,ze.get("icon-text-fit-padding"),We,At)),et&&(v=vm(v,et,jn,ze.get("icon-text-fit-padding"),We,At)));const Tn=de?_e.line.getGranularityForZoomLevel(de.z):1,Nr=(_i,hi)=>{hi.x<0||hi.x>=at||hi.y<0||hi.y>=at||function(Jr,jo,Al,ql,Ju,Td,Dc,eA,qa,cl,tA,nA,fc,Pd,Iu,pc,Vl,ku,Tu,$l,ma,Rh,c0,Dh,i3){const d0=Jr.addToLineVertexArray(jo,Al);let xm,h0,f0,p0,x_=0,M_=0,w_=0,S_=0,nv=-1,rv=-1;const Xf={};let E_=es("");if(Jr.allowVerticalPlacement&&ql.vertical){const rA=eA.layout.get("text-rotate").evaluate(ma,{},Dh)+90;f0=new bm(qa,jo,cl,tA,nA,ql.vertical,fc,Pd,Iu,rA),Dc&&(p0=new bm(qa,jo,cl,tA,nA,Dc,Vl,ku,Iu,rA))}if(Ju){const rA=eA.layout.get("icon-rotate").evaluate(ma,{}),Kd=eA.layout.get("icon-text-fit")!=="none",Mm=h_(Ju,rA,c0,Kd),Lh=Dc?h_(Dc,rA,c0,Kd):void 0;h0=new bm(qa,jo,cl,tA,nA,Ju,Vl,ku,!1,rA),x_=4*Mm.length;const wm=Jr.iconSizeData;let lh=null;wm.kind==="source"?(lh=[ih*eA.layout.get("icon-size").evaluate(ma,{})],lh[0]>Od&&it(`${Jr.layerIds[0]}: Value for "icon-size" is >= ${Tp}. Reduce your "icon-size".`)):wm.kind==="composite"&&(lh=[ih*Rh.compositeIconSizes[0].evaluate(ma,{},Dh),ih*Rh.compositeIconSizes[1].evaluate(ma,{},Dh)],(lh[0]>Od||lh[1]>Od)&&it(`${Jr.layerIds[0]}: Value for "icon-size" is >= ${Tp}. Reduce your "icon-size".`)),Jr.addSymbols(Jr.icon,Mm,lh,$l,Tu,ma,l.ag.none,jo,d0.lineStartIndex,d0.lineLength,-1,Dh),nv=Jr.icon.placedSymbolArray.length-1,Lh&&(M_=4*Lh.length,Jr.addSymbols(Jr.icon,Lh,lh,$l,Tu,ma,l.ag.vertical,jo,d0.lineStartIndex,d0.lineLength,-1,Dh),rv=Jr.icon.placedSymbolArray.length-1)}const B_=Object.keys(ql.horizontal);for(const rA of B_){const Kd=ql.horizontal[rA];if(!xm){E_=es(Kd.text);const Lh=eA.layout.get("text-rotate").evaluate(ma,{},Dh);xm=new bm(qa,jo,cl,tA,nA,Kd,fc,Pd,Iu,Lh)}const Mm=Kd.positionedLines.length===1;if(w_+=A1(Jr,jo,Kd,Td,eA,Iu,ma,pc,d0,ql.vertical?l.ag.horizontal:l.ag.horizontalOnly,Mm?B_:[rA],Xf,nv,Rh,Dh),Mm)break}ql.vertical&&(S_+=A1(Jr,jo,ql.vertical,Td,eA,Iu,ma,pc,d0,l.ag.vertical,["vertical"],Xf,rv,Rh,Dh));const o3=xm?xm.boxStartIndex:Jr.collisionBoxArray.length,s3=xm?xm.boxEndIndex:Jr.collisionBoxArray.length,a3=f0?f0.boxStartIndex:Jr.collisionBoxArray.length,iv=f0?f0.boxEndIndex:Jr.collisionBoxArray.length,O_=h0?h0.boxStartIndex:Jr.collisionBoxArray.length,I_=h0?h0.boxEndIndex:Jr.collisionBoxArray.length,l3=p0?p0.boxStartIndex:Jr.collisionBoxArray.length,u3=p0?p0.boxEndIndex:Jr.collisionBoxArray.length;let Fh=-1;const m0=(rA,Kd)=>rA&&rA.circleDiameter?Math.max(rA.circleDiameter,Kd):Kd;Fh=m0(xm,Fh),Fh=m0(f0,Fh),Fh=m0(h0,Fh),Fh=m0(p0,Fh);const k_=Fh>-1?1:0;k_&&(Fh*=i3/Il),Jr.glyphOffsetArray.length>=ge.MAX_GLYPHS&&it("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),ma.sortKey!==void 0&&Jr.addToSortKeyRanges(Jr.symbolInstances.length,ma.sortKey);const A3=g_(eA,ma,Dh),[c3,id]=function(rA,Kd){const Mm=rA.length,Lh=Kd==null?void 0:Kd.values;if((Lh==null?void 0:Lh.length)>0)for(let wm=0;wm<Lh.length;wm+=2){const lh=Lh[wm+1];rA.emplaceBack(l.ax[Lh[wm]],lh[0],lh[1])}return[Mm,rA.length]}(Jr.textAnchorOffsets,A3);Jr.symbolInstances.emplaceBack(jo.x,jo.y,Xf.right>=0?Xf.right:-1,Xf.center>=0?Xf.center:-1,Xf.left>=0?Xf.left:-1,Xf.vertical||-1,nv,rv,E_,o3,s3,a3,iv,O_,I_,l3,u3,cl,w_,S_,x_,M_,k_,0,fc,Fh,c3,id)}(d,hi,_i,h,v,w,cr,d.layers[0],d.collisionBoxArray,u.index,u.sourceLayerIndex,d.index,Ct,[lt,lt,lt,lt],kn,X,St,Bt,An,We,u,K,ie,de,F)};if(Bn==="line")for(const _i of xo(u.geometry,0,0,at,at)){const hi=gr(_i,Tn),Jr=r3(hi,Le,dn,h.vertical||et,v,24,Nt,d.overscaling,at);for(const jo of Jr)et&&v_(d,et.text,nr,jo)||Nr(hi,jo)}else if(Bn==="line-center"){for(const _i of u.geometry)if(_i.length>1){const hi=gr(_i,Tn),Jr=n3(hi,dn,h.vertical||et,v,24,Nt);Jr&&Nr(hi,Jr)}}else if(u.type==="Polygon")for(const _i of Nc(u.geometry,0)){const hi=Yl(_i,16);Nr(gr(_i[0],Tn,!0),new Pp(hi.x,hi.y,0))}else if(u.type==="LineString")for(const _i of u.geometry){const hi=gr(_i,Tn);Nr(hi,new Pp(hi[0].x,hi[0].y,0))}else if(u.type==="Point")for(const _i of u.geometry)for(const hi of _i)Nr([hi],new Pp(hi.x,hi.y,0))}function A1(d,u,h,v,w,K,F,W,X,ie,de,_e,Re,ze,We){const et=function(Nt,St,Le,lt,Bt,dn,kn,An){const Bn=lt.layout.get("text-rotate").evaluate(dn,{})*Math.PI/180,nr=[];for(const jn of St.positionedLines)for(const cr of jn.positionedGlyphs){if(!cr.rect)continue;const Tn=cr.rect||{};let Nr=r1+1,_i=!0,hi=1,Jr=0;const jo=(Bt||An)&&cr.vertical,Al=cr.metrics.advance*cr.scale/2;if(An&&St.verticalizable&&(Jr=jn.lineOffset/2-(cr.imageName?-(Il-cr.metrics.width*cr.scale)/2:(cr.scale-1)*Il)),cr.imageName){const ku=kn[cr.imageName];_i=ku.sdf,hi=ku.pixelRatio,Nr=WA/hi}const ql=Bt?[cr.x+Al,cr.y]:[0,0];let Ju=Bt?[0,0]:[cr.x+Al+Le[0],cr.y+Le[1]-Jr],Td=[0,0];jo&&(Td=Ju,Ju=[0,0]);const Dc=cr.metrics.isDoubleResolution?2:1,eA=(cr.metrics.left-Nr)*cr.scale-Al+Ju[0],qa=(-cr.metrics.top-Nr)*cr.scale+Ju[1],cl=eA+Tn.w/Dc*cr.scale/hi,tA=qa+Tn.h/Dc*cr.scale/hi,nA=new U(eA,qa),fc=new U(cl,qa),Pd=new U(eA,tA),Iu=new U(cl,tA);if(jo){const ku=new U(-Al,Al-GA),Tu=-Math.PI/2,$l=Il/2-Al,ma=new U(5-GA-$l,-(cr.imageName?$l:0)),Rh=new U(...Td);nA._rotateAround(Tu,ku)._add(ma)._add(Rh),fc._rotateAround(Tu,ku)._add(ma)._add(Rh),Pd._rotateAround(Tu,ku)._add(ma)._add(Rh),Iu._rotateAround(Tu,ku)._add(ma)._add(Rh)}if(Bn){const ku=Math.sin(Bn),Tu=Math.cos(Bn),$l=[Tu,-ku,ku,Tu];nA._matMult($l),fc._matMult($l),Pd._matMult($l),Iu._matMult($l)}const pc=new U(0,0),Vl=new U(0,0);nr.push({tl:nA,tr:fc,bl:Pd,br:Iu,tex:Tn,writingMode:St.writingMode,glyphOffset:ql,sectionIndex:cr.sectionIndex,isSDF:_i,pixelOffsetTL:pc,pixelOffsetBR:Vl,minFontScaleX:0,minFontScaleY:0})}return nr}(0,h,W,w,K,F,v,d.allowVerticalPlacement),At=d.textSizeData;let Ct=null;At.kind==="source"?(Ct=[ih*w.layout.get("text-size").evaluate(F,{})],Ct[0]>Od&&it(`${d.layerIds[0]}: Value for "text-size" is >= ${Tp}. Reduce your "text-size".`)):At.kind==="composite"&&(Ct=[ih*ze.compositeTextSizes[0].evaluate(F,{},We),ih*ze.compositeTextSizes[1].evaluate(F,{},We)],(Ct[0]>Od||Ct[1]>Od)&&it(`${d.layerIds[0]}: Value for "text-size" is >= ${Tp}. Reduce your "text-size".`)),d.addSymbols(d.text,et,Ct,W,K,F,ie,u,X.lineStartIndex,X.lineLength,Re,We);for(const Nt of de)_e[Nt]=d.text.placedSymbolArray.length-1;return 4*et.length}function y_(d){for(const u in d)return d[u];return null}function v_(d,u,h,v){const w=d.compareText;if(u in w){const K=w[u];for(let F=K.length-1;F>=0;F--)if(v.dist(K[F])<h)return!0}else w[u]=[];return w[u].push(v),!1}const og=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Rc{static from(u){if(!(u instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[h,v]=new Uint8Array(u,0,2);if(h!==219)throw new Error("Data does not appear to be in a KDBush format.");const w=v>>4;if(w!==1)throw new Error(`Got v${w} data when expected v1.`);const K=og[15&v];if(!K)throw new Error("Unrecognized array type.");const[F]=new Uint16Array(u,2,1),[W]=new Uint32Array(u,4,1);return new Rc(W,F,K,u)}constructor(u,h=64,v=Float64Array,w){if(isNaN(u)||u<0)throw new Error(`Unpexpected numItems value: ${u}.`);this.numItems=+u,this.nodeSize=Math.min(Math.max(+h,2),65535),this.ArrayType=v,this.IndexArrayType=u<65536?Uint16Array:Uint32Array;const K=og.indexOf(this.ArrayType),F=2*u*this.ArrayType.BYTES_PER_ELEMENT,W=u*this.IndexArrayType.BYTES_PER_ELEMENT,X=(8-W%8)%8;if(K<0)throw new Error(`Unexpected typed array class: ${v}.`);w&&w instanceof ArrayBuffer?(this.data=w,this.ids=new this.IndexArrayType(this.data,8,u),this.coords=new this.ArrayType(this.data,8+W+X,2*u),this._pos=2*u,this._finished=!0):(this.data=new ArrayBuffer(8+F+W+X),this.ids=new this.IndexArrayType(this.data,8,u),this.coords=new this.ArrayType(this.data,8+W+X,2*u),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+K]),new Uint16Array(this.data,2,1)[0]=h,new Uint32Array(this.data,4,1)[0]=u)}add(u,h){const v=this._pos>>1;return this.ids[v]=v,this.coords[this._pos++]=u,this.coords[this._pos++]=h,v}finish(){const u=this._pos>>1;if(u!==this.numItems)throw new Error(`Added ${u} items when expected ${this.numItems}.`);return Rp(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(u,h,v,w){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:K,coords:F,nodeSize:W}=this,X=[0,K.length-1,0],ie=[];for(;X.length;){const de=X.pop()||0,_e=X.pop()||0,Re=X.pop()||0;if(_e-Re<=W){for(let At=Re;At<=_e;At++){const Ct=F[2*At],Nt=F[2*At+1];Ct>=u&&Ct<=v&&Nt>=h&&Nt<=w&&ie.push(K[At])}continue}const ze=Re+_e>>1,We=F[2*ze],et=F[2*ze+1];We>=u&&We<=v&&et>=h&&et<=w&&ie.push(K[ze]),(de===0?u<=We:h<=et)&&(X.push(Re),X.push(ze-1),X.push(1-de)),(de===0?v>=We:w>=et)&&(X.push(ze+1),X.push(_e),X.push(1-de))}return ie}within(u,h,v){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:w,coords:K,nodeSize:F}=this,W=[0,w.length-1,0],X=[],ie=v*v;for(;W.length;){const de=W.pop()||0,_e=W.pop()||0,Re=W.pop()||0;if(_e-Re<=F){for(let At=Re;At<=_e;At++)__(K[2*At],K[2*At+1],u,h)<=ie&&X.push(w[At]);continue}const ze=Re+_e>>1,We=K[2*ze],et=K[2*ze+1];__(We,et,u,h)<=ie&&X.push(w[ze]),(de===0?u-v<=We:h-v<=et)&&(W.push(Re),W.push(ze-1),W.push(1-de)),(de===0?u+v>=We:h+v>=et)&&(W.push(ze+1),W.push(_e),W.push(1-de))}return X}}function Rp(d,u,h,v,w,K){if(w-v<=h)return;const F=v+w>>1;C_(d,u,F,v,w,K),Rp(d,u,h,v,F-1,1-K),Rp(d,u,h,F+1,w,1-K)}function C_(d,u,h,v,w,K){for(;w>v;){if(w-v>600){const ie=w-v+1,de=h-v+1,_e=Math.log(ie),Re=.5*Math.exp(2*_e/3),ze=.5*Math.sqrt(_e*Re*(ie-Re)/ie)*(de-ie/2<0?-1:1);C_(d,u,h,Math.max(v,Math.floor(h-de*Re/ie+ze)),Math.min(w,Math.floor(h+(ie-de)*Re/ie+ze)),K)}const F=u[2*h+K];let W=v,X=w;for(sg(d,u,v,h),u[2*w+K]>F&&sg(d,u,v,w);W<X;){for(sg(d,u,W,X),W++,X--;u[2*W+K]<F;)W++;for(;u[2*X+K]>F;)X--}u[2*v+K]===F?sg(d,u,v,X):(X++,sg(d,u,X,w)),X<=h&&(v=X+1),h<=X&&(w=X-1)}}function sg(d,u,h,v){ev(d,h,v),ev(u,2*h,2*v),ev(u,2*h+1,2*v+1)}function ev(d,u,h){const v=d[u];d[u]=d[h],d[h]=v}function __(d,u,h,v){const w=d-h,K=u-v;return w*w+K*K}var tv;l.cg=void 0,(tv=l.cg||(l.cg={})).create="create",tv.load="load",tv.fullLoad="fullLoad";let ag=null,kd=[];const Oo=1e3/60,c1="loadTime",rd="fullLoadTime",b_={mark(d){performance.mark(d)},frame(d){const u=d;ag!=null&&kd.push(u-ag),ag=u},clearMetrics(){ag=null,kd=[],performance.clearMeasures(c1),performance.clearMeasures(rd);for(const d in l.cg)performance.clearMarks(l.cg[d])},getPerformanceMetrics(){performance.measure(c1,l.cg.create,l.cg.load),performance.measure(rd,l.cg.create,l.cg.fullLoad);const d=performance.getEntriesByName(c1)[0].duration,u=performance.getEntriesByName(rd)[0].duration,h=kd.length,v=1/(kd.reduce((K,F)=>K+F,0)/h/1e3),w=kd.filter(K=>K>Oo).reduce((K,F)=>K+(F-Oo)/Oo,0);return{loadTime:d,fullLoadTime:u,fps:v,percentDroppedFrames:w/(h+w)*100,totalFrames:h}}};l.$=tg,l.A=G,l.B=mi,l.C=Uo,l.D=Kr,l.E=Ve,l.F=Us,l.G=function(d){if(Lt==null){const u=d.navigator?d.navigator.userAgent:null;Lt=!!d.safari||!(!u||!(/\b(iPad|iPhone|iPod)\b/.test(u)||u.match("Safari")&&!u.match("Chrome")))}return Lt},l.H=class{constructor(d,u){this.target=d,this.mapId=u,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new en(()=>this.process()),this.subscription=dr(this.target,"message",h=>this.receive(h),!1),this.globalScope=pt(self)?d:window}registerMessageHandler(d,u){this.messageHandlers[d]=u}sendAsync(d,u){return new Promise((h,v)=>{const w=Math.round(1e18*Math.random()).toString(36).substring(0,10),K=u?dr(u.signal,"abort",()=>{K==null||K.unsubscribe(),delete this.resolveRejects[w];const X={id:w,type:"<cancel>",origin:location.origin,targetMapId:d.targetMapId,sourceMapId:this.mapId};this.target.postMessage(X)},yn):null;this.resolveRejects[w]={resolve:X=>{K==null||K.unsubscribe(),h(X)},reject:X=>{K==null||K.unsubscribe(),v(X)}};const F=[],W=Object.assign(Object.assign({},d),{id:w,sourceMapId:this.mapId,origin:location.origin,data:ac(d.data,F)});this.target.postMessage(W,{transfer:F})})}receive(d){const u=d.data,h=u.id;if(!(u.origin!=="file://"&&location.origin!=="file://"&&u.origin!=="resource://android"&&location.origin!=="resource://android"&&u.origin!==location.origin||u.targetMapId&&this.mapId!==u.targetMapId)){if(u.type==="<cancel>"){delete this.tasks[h];const v=this.abortControllers[h];return delete this.abortControllers[h],void(v&&v.abort())}if(pt(self)||u.mustQueue)return this.tasks[h]=u,this.taskQueue.push(h),void this.invoker.trigger();this.processTask(h,u)}}process(){if(this.taskQueue.length===0)return;const d=this.taskQueue.shift(),u=this.tasks[d];delete this.tasks[d],this.taskQueue.length>0&&this.invoker.trigger(),u&&this.processTask(d,u)}processTask(d,u){return o(this,void 0,void 0,function*(){if(u.type==="<response>"){const w=this.resolveRejects[d];return delete this.resolveRejects[d],w?void(u.error?w.reject(yl(u.error)):w.resolve(yl(u.data))):void 0}if(!this.messageHandlers[u.type])return void this.completeTask(d,new Error(`Could not find a registered handler for ${u.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const h=yl(u.data),v=new AbortController;this.abortControllers[d]=v;try{const w=yield this.messageHandlers[u.type](u.sourceMapId,h,v);this.completeTask(d,null,w)}catch(w){this.completeTask(d,w)}})}completeTask(d,u,h){const v=[];delete this.abortControllers[d];const w={id:d,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:u?ac(u):null,data:ac(h,v)};this.target.postMessage(w,{transfer:v})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},l.I=Jm,l.J=Zn,l.K=function(){var d=new G(16);return G!=Float32Array&&(d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[11]=0,d[12]=0,d[13]=0,d[14]=0),d[0]=1,d[5]=1,d[10]=1,d[15]=1,d},l.L=function(d,u,h){var v,w,K,F,W,X,ie,de,_e,Re,ze,We,et=h[0],At=h[1],Ct=h[2];return u===d?(d[12]=u[0]*et+u[4]*At+u[8]*Ct+u[12],d[13]=u[1]*et+u[5]*At+u[9]*Ct+u[13],d[14]=u[2]*et+u[6]*At+u[10]*Ct+u[14],d[15]=u[3]*et+u[7]*At+u[11]*Ct+u[15]):(w=u[1],K=u[2],F=u[3],W=u[4],X=u[5],ie=u[6],de=u[7],_e=u[8],Re=u[9],ze=u[10],We=u[11],d[0]=v=u[0],d[1]=w,d[2]=K,d[3]=F,d[4]=W,d[5]=X,d[6]=ie,d[7]=de,d[8]=_e,d[9]=Re,d[10]=ze,d[11]=We,d[12]=v*et+W*At+_e*Ct+u[12],d[13]=w*et+X*At+Re*Ct+u[13],d[14]=K*et+ie*At+ze*Ct+u[14],d[15]=F*et+de*At+We*Ct+u[15]),d},l.M=function(d,u,h){var v=h[0],w=h[1],K=h[2];return d[0]=u[0]*v,d[1]=u[1]*v,d[2]=u[2]*v,d[3]=u[3]*v,d[4]=u[4]*w,d[5]=u[5]*w,d[6]=u[6]*w,d[7]=u[7]*w,d[8]=u[8]*K,d[9]=u[9]*K,d[10]=u[10]*K,d[11]=u[11]*K,d[12]=u[12],d[13]=u[13],d[14]=u[14],d[15]=u[15],d},l.N=function(d,u,h){var v=u[0],w=u[1],K=u[2],F=u[3],W=u[4],X=u[5],ie=u[6],de=u[7],_e=u[8],Re=u[9],ze=u[10],We=u[11],et=u[12],At=u[13],Ct=u[14],Nt=u[15],St=h[0],Le=h[1],lt=h[2],Bt=h[3];return d[0]=St*v+Le*W+lt*_e+Bt*et,d[1]=St*w+Le*X+lt*Re+Bt*At,d[2]=St*K+Le*ie+lt*ze+Bt*Ct,d[3]=St*F+Le*de+lt*We+Bt*Nt,d[4]=(St=h[4])*v+(Le=h[5])*W+(lt=h[6])*_e+(Bt=h[7])*et,d[5]=St*w+Le*X+lt*Re+Bt*At,d[6]=St*K+Le*ie+lt*ze+Bt*Ct,d[7]=St*F+Le*de+lt*We+Bt*Nt,d[8]=(St=h[8])*v+(Le=h[9])*W+(lt=h[10])*_e+(Bt=h[11])*et,d[9]=St*w+Le*X+lt*Re+Bt*At,d[10]=St*K+Le*ie+lt*ze+Bt*Ct,d[11]=St*F+Le*de+lt*We+Bt*Nt,d[12]=(St=h[12])*v+(Le=h[13])*W+(lt=h[14])*_e+(Bt=h[15])*et,d[13]=St*w+Le*X+lt*Re+Bt*At,d[14]=St*K+Le*ie+lt*ze+Bt*Ct,d[15]=St*F+Le*de+lt*We+Bt*Nt,d},l.O=function(d,u){const h={};for(let v=0;v<u.length;v++){const w=u[v];w in d&&(h[w]=d[w])}return h},l.P=U,l.Q=Xr,l.R=Bl,l.S=Gl,l.T=KA,l.U=ji,l.V=se,l.W=re,l.X=vn,l.Y=Id,l.Z=at,l._=o,l.a=lr,l.a$=function(){const d=new Float32Array(16);return he(d),d},l.a0=Xy,l.a1=d=>{const u=window.document.createElement("video");return u.muted=!0,new Promise(h=>{u.onloadstart=()=>{h(u)};for(const v of d){const w=window.document.createElement("source");nt(v)||(u.crossOrigin="Anonymous"),w.src=v,u.appendChild(w)}})},l.a2=jt,l.a3=function(){return Ft++},l.a4=z,l.a5=ge,l.a6=vd,l.a7=Ts,l.a8=l_,l.a9=function(d){const u={};if(d.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(h,v,w,K)=>{const F=w||K;return u[v]=!F||F.toLowerCase(),""}),u["max-age"]){const h=parseInt(u["max-age"],10);isNaN(h)?delete u["max-age"]:u["max-age"]=h}return u},l.aA=o0,l.aB=Rc,l.aC=Is,l.aD=Qt,l.aE=ft,l.aF=Zr,l.aG=On,l.aH=function(d){return Math.pow(2,d)},l.aI=85.051129,l.aJ=ys,l.aK=Yt,l.aL=Pn,l.aM=l1,l.aN=function(d,u,h){return d[0]=u[0]*h,d[1]=u[1]*h,d[2]=u[2]*h,d},l.aO=function(d,u,h){return d[0]=u[0]+h[0],d[1]=u[1]+h[1],d[2]=u[2]+h[2],d},l.aP=function(d){var u=new G(3);return u[0]=d[0],u[1]=d[1],u[2]=d[2],u},l.aQ=function(d,u,h){return d[0]=u[0]*h[0],d[1]=u[1]*h[1],d[2]=u[2]*h[2],d[3]=u[3]*h[3],d},l.aR=function(d,u,h){return d[0]=u[0]-h[0],d[1]=u[1]-h[1],d[2]=u[2]-h[2],d},l.aS=function(d,u){var h=u[0],v=u[1],w=u[2],K=h*h+v*v+w*w;return K>0&&(K=1/Math.sqrt(K)),d[0]=u[0]*K,d[1]=u[1]*K,d[2]=u[2]*K,d},l.aT=function(d,u,h){var v=u[0],w=u[1],K=u[2],F=h[0],W=h[1],X=h[2];return d[0]=w*X-K*W,d[1]=K*F-v*X,d[2]=v*W-w*F,d},l.aU=function(d,u){return d[0]*u[0]+d[1]*u[1]+d[2]*u[2]},l.aV=o_,l.aW=l0,l.aX=function(d,u,h,v,w){var K,F=1/Math.tan(u/2);return d[0]=F/h,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=F,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[11]=-1,d[12]=0,d[13]=0,d[15]=0,w!=null&&w!==1/0?(d[10]=(w+v)*(K=1/(v-w)),d[14]=2*w*v*K):(d[10]=-1,d[14]=-2*v),d},l.aY=function(d){var u=new G(16);return u[0]=d[0],u[1]=d[1],u[2]=d[2],u[3]=d[3],u[4]=d[4],u[5]=d[5],u[6]=d[6],u[7]=d[7],u[8]=d[8],u[9]=d[9],u[10]=d[10],u[11]=d[11],u[12]=d[12],u[13]=d[13],u[14]=d[14],u[15]=d[15],u},l.aZ=function(d,u,h){var v=Math.sin(h),w=Math.cos(h),K=u[0],F=u[1],W=u[2],X=u[3],ie=u[4],de=u[5],_e=u[6],Re=u[7];return u!==d&&(d[8]=u[8],d[9]=u[9],d[10]=u[10],d[11]=u[11],d[12]=u[12],d[13]=u[13],d[14]=u[14],d[15]=u[15]),d[0]=K*w+ie*v,d[1]=F*w+de*v,d[2]=W*w+_e*v,d[3]=X*w+Re*v,d[4]=ie*w-K*v,d[5]=de*w-F*v,d[6]=_e*w-W*v,d[7]=Re*w-X*v,d},l.a_=function(d,u,h){var v=Math.sin(h),w=Math.cos(h),K=u[4],F=u[5],W=u[6],X=u[7],ie=u[8],de=u[9],_e=u[10],Re=u[11];return u!==d&&(d[0]=u[0],d[1]=u[1],d[2]=u[2],d[3]=u[3],d[12]=u[12],d[13]=u[13],d[14]=u[14],d[15]=u[15]),d[4]=K*w+ie*v,d[5]=F*w+de*v,d[6]=W*w+_e*v,d[7]=X*w+Re*v,d[8]=ie*w-K*v,d[9]=de*w-F*v,d[10]=_e*w-W*v,d[11]=Re*w-X*v,d},l.aa=function(d){return Math.log(d)/Math.LN2},l.ab=function(d){var u=d[0],h=d[1];return u*u+h*h},l.ac=function(d){return d*Math.PI/180},l.ad=bt,l.ae=function(d,u){const h=[];for(const v in d)v in u||h.push(v);return h},l.af=function(d,u){let h=0,v=0;if(d.kind==="constant")v=d.layoutSize;else if(d.kind!=="source"){const{interpolationType:w,minZoom:K,maxZoom:F}=d,W=w?bt(pi.interpolationFactor(w,u,K,F),0,1):0;d.kind==="camera"?v=mi.number(d.minSize,d.maxSize,W):h=W}return{uSizeT:h,uSize:v}},l.ah=function(d,{uSize:u,uSizeT:h},{lowerSize:v,upperSize:w}){return d.kind==="source"?v/ih:d.kind==="composite"?mi.number(v/ih,w/ih,h):u},l.ai=function(d,u){var h=u[0],v=u[1],w=u[2],K=u[3],F=u[4],W=u[5],X=u[6],ie=u[7],de=u[8],_e=u[9],Re=u[10],ze=u[11],We=u[12],et=u[13],At=u[14],Ct=u[15],Nt=h*W-v*F,St=h*X-w*F,Le=h*ie-K*F,lt=v*X-w*W,Bt=v*ie-K*W,dn=w*ie-K*X,kn=de*et-_e*We,An=de*At-Re*We,Bn=de*Ct-ze*We,nr=_e*At-Re*et,jn=_e*Ct-ze*et,cr=Re*Ct-ze*At,Tn=Nt*cr-St*jn+Le*nr+lt*Bn-Bt*An+dn*kn;return Tn?(d[0]=(W*cr-X*jn+ie*nr)*(Tn=1/Tn),d[1]=(w*jn-v*cr-K*nr)*Tn,d[2]=(et*dn-At*Bt+Ct*lt)*Tn,d[3]=(Re*Bt-_e*dn-ze*lt)*Tn,d[4]=(X*Bn-F*cr-ie*An)*Tn,d[5]=(h*cr-w*Bn+K*An)*Tn,d[6]=(At*Le-We*dn-Ct*St)*Tn,d[7]=(de*dn-Re*Le+ze*St)*Tn,d[8]=(F*jn-W*Bn+ie*kn)*Tn,d[9]=(v*Bn-h*jn-K*kn)*Tn,d[10]=(We*Bt-et*Le+Ct*Nt)*Tn,d[11]=(_e*Le-de*Bt-ze*Nt)*Tn,d[12]=(W*An-F*nr-X*kn)*Tn,d[13]=(h*nr-v*An+w*kn)*Tn,d[14]=(et*St-We*lt-At*Nt)*Tn,d[15]=(de*lt-_e*St+Re*Nt)*Tn,d):null},l.aj=Ke,l.ak=function(d){return Math.hypot(d[0],d[1])},l.al=function(d){return d[0]=0,d[1]=0,d},l.am=function(d,u,h){return d[0]=u[0]*h,d[1]=u[1]*h,d},l.an=C,l.ao=me,l.ap=function(d,u,h,v){const w=u.y-d.y,K=u.x-d.x,F=v.y-h.y,W=v.x-h.x,X=F*K-W*w;if(X===0)return null;const ie=(W*(d.y-h.y)-F*(d.x-h.x))/X;return new U(d.x+ie*K,d.y+ie*w)},l.aq=xo,l.ar=kc,l.as=he,l.at=function(d){let u=1/0,h=1/0,v=-1/0,w=-1/0;for(const K of d)u=Math.min(u,K.x),h=Math.min(h,K.y),v=Math.max(v,K.x),w=Math.max(w,K.y);return[u,h,v,w]},l.au=Il,l.av=Ze,l.aw=function(d,u,h,v,w=!1){if(!h[0]&&!h[1])return[0,0];const K=w?v==="map"?-d.bearingInRadians:0:v==="viewport"?d.bearingInRadians:0;if(K){const F=Math.sin(K),W=Math.cos(K);h=[h[0]*W-h[1]*F,h[0]*F+h[1]*W]}return[w?h[0]:Ze(u,h[0],d.zoom),w?h[1]:Ze(u,h[1],d.zoom)]},l.ay=Hf,l.az=u1,l.b=nn,l.b$=d=>d.type==="circle",l.b0=function(){const d=new Float64Array(16);return he(d),d},l.b1=function(){return new Float64Array(16)},l.b2=function(d,u,h){const v=new Float64Array(4);return function(w,K,F,W){var X=.5*Math.PI/180;K*=X,F*=X,W*=X;var ie=Math.sin(K),de=Math.cos(K),_e=Math.sin(F),Re=Math.cos(F),ze=Math.sin(W),We=Math.cos(W);w[0]=ie*Re*We-de*_e*ze,w[1]=de*_e*We+ie*Re*ze,w[2]=de*Re*ze-ie*_e*We,w[3]=de*Re*We+ie*_e*ze}(v,d,u-90,h),v},l.b3=function(d,u,h,v){var w,K,F,W,X,ie=u[0],de=u[1],_e=u[2],Re=u[3],ze=h[0],We=h[1],et=h[2],At=h[3];return(K=ie*ze+de*We+_e*et+Re*At)<0&&(K=-K,ze=-ze,We=-We,et=-et,At=-At),1-K>ne?(w=Math.acos(K),F=Math.sin(w),W=Math.sin((1-v)*w)/F,X=Math.sin(v*w)/F):(W=1-v,X=v),d[0]=W*ie+X*ze,d[1]=W*de+X*We,d[2]=W*_e+X*et,d[3]=W*Re+X*At,d},l.b4=function(d){const u=new Float64Array(9);var h,v,w,K,F,W,X,ie,de,_e,Re,ze,We,et,At,Ct,Nt,St;_e=(w=(v=d)[0])*(X=w+w),Re=(K=v[1])*X,We=(F=v[2])*X,et=F*(ie=K+K),Ct=(W=v[3])*X,Nt=W*ie,St=W*(de=F+F),(h=u)[0]=1-(ze=K*ie)-(At=F*de),h[3]=Re-St,h[6]=We+Nt,h[1]=Re+St,h[4]=1-_e-At,h[7]=et-Ct,h[2]=We-Nt,h[5]=et+Ct,h[8]=1-_e-ze;const Le=Pn(-Math.asin(bt(u[2],-1,1)));let lt,Bt;return Math.hypot(u[5],u[8])<.001?(lt=0,Bt=-Pn(Math.atan2(u[3],u[4]))):(lt=Pn(u[5]===0&&u[8]===0?0:Math.atan2(u[5],u[8])),Bt=Pn(u[1]===0&&u[0]===0?0:Math.atan2(u[1],u[0]))),{roll:lt,pitch:Le+90,bearing:Bt}},l.b5=function(d,u){return d.roll==u.roll&&d.pitch==u.pitch&&d.bearing==u.bearing},l.b6=xi,l.b7=Xu,l.b8=xn,l.b9=Fn,l.bA=function(d){const u=[],h=d.id;return h===void 0&&u.push({message:`layers.${h}: missing required property "id"`}),d.render===void 0&&u.push({message:`layers.${h}: missing required method "render"`}),d.renderingMode&&d.renderingMode!=="2d"&&d.renderingMode!=="3d"&&u.push({message:`layers.${h}: property "renderingMode" must be either "2d" or "3d"`}),u},l.bB=function d(u,h){if(Array.isArray(u)){if(!Array.isArray(h)||u.length!==h.length)return!1;for(let v=0;v<u.length;v++)if(!d(u[v],h[v]))return!1;return!0}if(typeof u=="object"&&u!==null&&h!==null){if(typeof h!="object"||Object.keys(u).length!==Object.keys(h).length)return!1;for(const v in u)if(!d(u[v],h[v]))return!1;return!0}return u===h},l.bC=Pt,l.bD=Ue,l.bE=class extends La{constructor(d,u){super(d,u),this.current=0}set(d){this.current!==d&&(this.current=d,this.gl.uniform1i(this.location,d))}},l.bF=mA,l.bG=class extends La{constructor(d,u){super(d,u),this.current=Sa}set(d){if(d[12]!==this.current[12]||d[0]!==this.current[0])return this.current=d,void this.gl.uniformMatrix4fv(this.location,!1,d);for(let u=1;u<16;u++)if(d[u]!==this.current[u]){this.current=d,this.gl.uniformMatrix4fv(this.location,!1,d);break}}},l.bH=pA,l.bI=class extends La{constructor(d,u){super(d,u),this.current=[0,0,0]}set(d){d[0]===this.current[0]&&d[1]===this.current[1]&&d[2]===this.current[2]||(this.current=d,this.gl.uniform3f(this.location,d[0],d[1],d[2]))}},l.bJ=class extends La{constructor(d,u){super(d,u),this.current=[0,0]}set(d){d[0]===this.current[0]&&d[1]===this.current[1]||(this.current=d,this.gl.uniform2f(this.location,d[0],d[1]))}},l.bK=oe,l.bL=function(d,u){var h=Math.sin(u),v=Math.cos(u);return d[0]=v,d[1]=h,d[2]=0,d[3]=-h,d[4]=v,d[5]=0,d[6]=0,d[7]=0,d[8]=1,d},l.bM=function(d,u,h){var v=u[0],w=u[1],K=u[2];return d[0]=v*h[0]+w*h[3]+K*h[6],d[1]=v*h[1]+w*h[4]+K*h[7],d[2]=v*h[2]+w*h[5]+K*h[8],d},l.bN=function(d,u,h,v,w,K,F){var W=1/(u-h),X=1/(v-w),ie=1/(K-F);return d[0]=-2*W,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=-2*X,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=2*ie,d[11]=0,d[12]=(u+h)*W,d[13]=(w+v)*X,d[14]=(F+K)*ie,d[15]=1,d},l.bO=class extends RA{},l.bP=qf,l.bQ=class extends Ac{},l.bR=th,l.bS=function(d){return d<=1?1:Math.pow(2,Math.ceil(Math.log(d)/Math.LN2))},l.bT=vA,l.bU=function(d,u,h){var v=u[0],w=u[1],K=u[2],F=h[3]*v+h[7]*w+h[11]*K+h[15];return d[0]=(h[0]*v+h[4]*w+h[8]*K+h[12])/(F=F||1),d[1]=(h[1]*v+h[5]*w+h[9]*K+h[13])/F,d[2]=(h[2]*v+h[6]*w+h[10]*K+h[14])/F,d},l.bV=class extends Oc{},l.bW=class extends _{},l.bX=function(d,u){return d[0]===u[0]&&d[1]===u[1]&&d[2]===u[2]&&d[3]===u[3]&&d[4]===u[4]&&d[5]===u[5]&&d[6]===u[6]&&d[7]===u[7]&&d[8]===u[8]&&d[9]===u[9]&&d[10]===u[10]&&d[11]===u[11]&&d[12]===u[12]&&d[13]===u[13]&&d[14]===u[14]&&d[15]===u[15]},l.bY=function(d,u){var h=d[0],v=d[1],w=d[2],K=d[3],F=d[4],W=d[5],X=d[6],ie=d[7],de=d[8],_e=d[9],Re=d[10],ze=d[11],We=d[12],et=d[13],At=d[14],Ct=d[15],Nt=u[0],St=u[1],Le=u[2],lt=u[3],Bt=u[4],dn=u[5],kn=u[6],An=u[7],Bn=u[8],nr=u[9],jn=u[10],cr=u[11],Tn=u[12],Nr=u[13],_i=u[14],hi=u[15];return Math.abs(h-Nt)<=ne*Math.max(1,Math.abs(h),Math.abs(Nt))&&Math.abs(v-St)<=ne*Math.max(1,Math.abs(v),Math.abs(St))&&Math.abs(w-Le)<=ne*Math.max(1,Math.abs(w),Math.abs(Le))&&Math.abs(K-lt)<=ne*Math.max(1,Math.abs(K),Math.abs(lt))&&Math.abs(F-Bt)<=ne*Math.max(1,Math.abs(F),Math.abs(Bt))&&Math.abs(W-dn)<=ne*Math.max(1,Math.abs(W),Math.abs(dn))&&Math.abs(X-kn)<=ne*Math.max(1,Math.abs(X),Math.abs(kn))&&Math.abs(ie-An)<=ne*Math.max(1,Math.abs(ie),Math.abs(An))&&Math.abs(de-Bn)<=ne*Math.max(1,Math.abs(de),Math.abs(Bn))&&Math.abs(_e-nr)<=ne*Math.max(1,Math.abs(_e),Math.abs(nr))&&Math.abs(Re-jn)<=ne*Math.max(1,Math.abs(Re),Math.abs(jn))&&Math.abs(ze-cr)<=ne*Math.max(1,Math.abs(ze),Math.abs(cr))&&Math.abs(We-Tn)<=ne*Math.max(1,Math.abs(We),Math.abs(Tn))&&Math.abs(et-Nr)<=ne*Math.max(1,Math.abs(et),Math.abs(Nr))&&Math.abs(At-_i)<=ne*Math.max(1,Math.abs(At),Math.abs(_i))&&Math.abs(Ct-hi)<=ne*Math.max(1,Math.abs(Ct),Math.abs(hi))},l.bZ=function(d,u){return d[0]=u[0],d[1]=u[1],d[2]=u[2],d[3]=u[3],d[4]=u[4],d[5]=u[5],d[6]=u[6],d[7]=u[7],d[8]=u[8],d[9]=u[9],d[10]=u[10],d[11]=u[11],d[12]=u[12],d[13]=u[13],d[14]=u[14],d[15]=u[15],d},l.b_=d=>d.type==="symbol",l.ba=Xt,l.bb=Ne,l.bc=we,l.bd=Js,l.be=function(d,u,h,v,w){return Ne(v,w,bt((d-u)/(h-u),0,1))},l.bf=Je,l.bg=function(){return new Float64Array(4)},l.bh=function(){return new Float64Array(3)},l.bi=function(d,u,h,v){var w=[],K=[];return w[0]=u[0]-h[0],w[1]=u[1]-h[1],w[2]=u[2]-h[2],K[0]=w[0]*Math.cos(v)-w[1]*Math.sin(v),K[1]=w[0]*Math.sin(v)+w[1]*Math.cos(v),K[2]=w[2],d[0]=K[0]+h[0],d[1]=K[1]+h[1],d[2]=K[2]+h[2],d},l.bj=function(d,u,h,v){var w=[],K=[];return w[0]=u[0]-h[0],w[1]=u[1]-h[1],w[2]=u[2]-h[2],K[0]=w[0],K[1]=w[1]*Math.cos(v)-w[2]*Math.sin(v),K[2]=w[1]*Math.sin(v)+w[2]*Math.cos(v),d[0]=K[0]+h[0],d[1]=K[1]+h[1],d[2]=K[2]+h[2],d},l.bk=function(d,u,h,v){var w=[],K=[];return w[0]=u[0]-h[0],w[1]=u[1]-h[1],w[2]=u[2]-h[2],K[0]=w[2]*Math.sin(v)+w[0]*Math.cos(v),K[1]=w[1],K[2]=w[2]*Math.cos(v)-w[0]*Math.sin(v),d[0]=K[0]+h[0],d[1]=K[1]+h[1],d[2]=K[2]+h[2],d},l.bl=function(d,u,h){var v=Math.sin(h),w=Math.cos(h),K=u[0],F=u[1],W=u[2],X=u[3],ie=u[8],de=u[9],_e=u[10],Re=u[11];return u!==d&&(d[4]=u[4],d[5]=u[5],d[6]=u[6],d[7]=u[7],d[12]=u[12],d[13]=u[13],d[14]=u[14],d[15]=u[15]),d[0]=K*w-ie*v,d[1]=F*w-de*v,d[2]=W*w-_e*v,d[3]=X*w-Re*v,d[8]=K*v+ie*w,d[9]=F*v+de*w,d[10]=W*v+_e*w,d[11]=X*v+Re*w,d},l.bm=function(d,u){const h=Je(d,360),v=Je(u,360),w=v-h,K=v>h?w-360:w+360;return Math.abs(w)<Math.abs(K)?w:K},l.bn=function(d){return d[0]=0,d[1]=0,d[2]=0,d},l.bo=function(d,u,h,v){const w=Math.sqrt(d*d+u*u),K=Math.sqrt(h*h+v*v);d/=w,u/=w,h/=K,v/=K;const F=Math.acos(d*h+u*v);return-u*h+d*v>0?F:-F},l.bp=function(d,u){return d[0]*u[0]+d[1]*u[1]+d[2]*u[2]+d[3]},l.bq=Cr,l.br=function(d,u){const h=Je(d,2*Math.PI),v=Je(u,2*Math.PI);return Math.min(Math.abs(h-v),Math.abs(h-v+2*Math.PI),Math.abs(h-v-2*Math.PI))},l.bs=function(d){return Math.hypot(d[0],d[1],d[2])},l.bt=function(){const d={},u=J.$version;for(const h in J.$root){const v=J.$root[h];if(v.required){let w=null;w=h==="version"?u:v.type==="array"?[]:{},w!=null&&(d[h]=w)}}return d},l.bu=Xd,l.bv=ce,l.bw=function(d){d=d.slice();const u=Object.create(null);for(let h=0;h<d.length;h++)u[d[h].id]=d[h];for(let h=0;h<d.length;h++)"ref"in d[h]&&(d[h]=p(d[h],u[d[h].ref]));return d},l.bx=function(d){if(d.type==="custom")return new hn(d);switch(d.type){case"background":return new Vr(d);case"circle":return new eh(d);case"fill":return new na(d);case"fill-extrusion":return new q0(d);case"heatmap":return new Sp(d);case"hillshade":return new hf(d);case"line":return new Vy(d);case"raster":return new xl(d);case"symbol":return new ir(d)}},l.by=Pe,l.bz=function(d,u){if(!d)return[{command:"setStyle",args:[u]}];let h=[];try{if(!Fe(d.version,u.version))return[{command:"setStyle",args:[u]}];Fe(d.center,u.center)||h.push({command:"setCenter",args:[u.center]}),Fe(d.centerAltitude,u.centerAltitude)||h.push({command:"setCenterAltitude",args:[u.centerAltitude]}),Fe(d.zoom,u.zoom)||h.push({command:"setZoom",args:[u.zoom]}),Fe(d.bearing,u.bearing)||h.push({command:"setBearing",args:[u.bearing]}),Fe(d.pitch,u.pitch)||h.push({command:"setPitch",args:[u.pitch]}),Fe(d.roll,u.roll)||h.push({command:"setRoll",args:[u.roll]}),Fe(d.sprite,u.sprite)||h.push({command:"setSprite",args:[u.sprite]}),Fe(d.glyphs,u.glyphs)||h.push({command:"setGlyphs",args:[u.glyphs]}),Fe(d.transition,u.transition)||h.push({command:"setTransition",args:[u.transition]}),Fe(d.light,u.light)||h.push({command:"setLight",args:[u.light]}),Fe(d.terrain,u.terrain)||h.push({command:"setTerrain",args:[u.terrain]}),Fe(d.sky,u.sky)||h.push({command:"setSky",args:[u.sky]}),Fe(d.projection,u.projection)||h.push({command:"setProjection",args:[u.projection]});const v={},w=[];(function(F,W,X,ie){let de;for(de in W=W||{},F=F||{})Object.prototype.hasOwnProperty.call(F,de)&&(Object.prototype.hasOwnProperty.call(W,de)||ct(de,X,ie));for(de in W)Object.prototype.hasOwnProperty.call(W,de)&&(Object.prototype.hasOwnProperty.call(F,de)?Fe(F[de],W[de])||(F[de].type==="geojson"&&W[de].type==="geojson"&&qt(F,W,de)?Qe(X,{command:"setGeoJSONSourceData",args:[de,W[de].data]}):dt(de,W,X,ie)):rt(de,W,X))})(d.sources,u.sources,w,v);const K=[];d.layers&&d.layers.forEach(F=>{"source"in F&&v[F.source]?h.push({command:"removeLayer",args:[F.id]}):K.push(F)}),h=h.concat(w),function(F,W,X){W=W||[];const ie=(F=F||[]).map(zt),de=W.map(zt),_e=F.reduce(on,{}),Re=W.reduce(on,{}),ze=ie.slice(),We=Object.create(null);let et,At,Ct,Nt,St;for(let Le=0,lt=0;Le<ie.length;Le++)et=ie[Le],Object.prototype.hasOwnProperty.call(Re,et)?lt++:(Qe(X,{command:"removeLayer",args:[et]}),ze.splice(ze.indexOf(et,lt),1));for(let Le=0,lt=0;Le<de.length;Le++)et=de[de.length-1-Le],ze[ze.length-1-Le]!==et&&(Object.prototype.hasOwnProperty.call(_e,et)?(Qe(X,{command:"removeLayer",args:[et]}),ze.splice(ze.lastIndexOf(et,ze.length-lt),1)):lt++,Nt=ze[ze.length-Le],Qe(X,{command:"addLayer",args:[Re[et],Nt]}),ze.splice(ze.length-Le,0,et),We[et]=!0);for(let Le=0;Le<de.length;Le++)if(et=de[Le],At=_e[et],Ct=Re[et],!We[et]&&!Fe(At,Ct))if(Fe(At.source,Ct.source)&&Fe(At["source-layer"],Ct["source-layer"])&&Fe(At.type,Ct.type)){for(St in Gt(At.layout,Ct.layout,X,et,null,"setLayoutProperty"),Gt(At.paint,Ct.paint,X,et,null,"setPaintProperty"),Fe(At.filter,Ct.filter)||Qe(X,{command:"setFilter",args:[et,Ct.filter]}),Fe(At.minzoom,Ct.minzoom)&&Fe(At.maxzoom,Ct.maxzoom)||Qe(X,{command:"setLayerZoomRange",args:[et,Ct.minzoom,Ct.maxzoom]}),At)Object.prototype.hasOwnProperty.call(At,St)&&St!=="layout"&&St!=="paint"&&St!=="filter"&&St!=="metadata"&&St!=="minzoom"&&St!=="maxzoom"&&(St.indexOf("paint.")===0?Gt(At[St],Ct[St],X,et,St.slice(6),"setPaintProperty"):Fe(At[St],Ct[St])||Qe(X,{command:"setLayerProperty",args:[et,St,Ct[St]]}));for(St in Ct)Object.prototype.hasOwnProperty.call(Ct,St)&&!Object.prototype.hasOwnProperty.call(At,St)&&St!=="layout"&&St!=="paint"&&St!=="filter"&&St!=="metadata"&&St!=="minzoom"&&St!=="maxzoom"&&(St.indexOf("paint.")===0?Gt(At[St],Ct[St],X,et,St.slice(6),"setPaintProperty"):Fe(At[St],Ct[St])||Qe(X,{command:"setLayerProperty",args:[et,St,Ct[St]]}))}else Qe(X,{command:"removeLayer",args:[et]}),Nt=ze[ze.lastIndexOf(et)+1],Qe(X,{command:"addLayer",args:[Ct,Nt]})}(K,u.layers,h)}catch(v){console.warn("Unable to compute style diff:",v),h=[{command:"setStyle",args:[u]}]}return h},l.c=$n,l.c0=d=>d.type==="heatmap",l.c1=d=>d.type==="line",l.c2=d=>d.type==="fill",l.c3=d=>d.type==="fill-extrusion",l.c4=d=>d.type==="hillshade",l.c5=d=>d.type==="raster",l.c6=d=>d.type==="background",l.c7=d=>d.type==="custom",l.c8=De,l.c9=function(d,u,h){const v=xe(u.x-h.x,u.y-h.y),w=xe(d.x-h.x,d.y-h.y);var K,F;return Pn(Math.atan2(v[0]*w[1]-v[1]*w[0],(K=v)[0]*(F=w)[0]+K[1]*F[1]))},l.cA=B,l.cB=Ko,l.cC=gf,l.cD=Ca,l.cE=ol,l.ca=He,l.cb=function(d,u,h){var v=u[0],w=u[1];return d[0]=h[0]*v+h[4]*w+h[12],d[1]=h[1]*v+h[5]*w+h[13],d},l.cc=function(d,u){const{x:h,y:v}=tg.fromLngLat(u);return!(d<0||d>25||v<0||v>=1||h<0||h>=1)},l.cd=function(d,u){return d[0]=u[0],d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=u[1],d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=u[2],d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,d},l.ce=class extends ks{},l.cf=b_,l.ch=function(d){return d.message===pn},l.ci=Ge,l.cj=function(d,u){lr.REGISTERED_PROTOCOLS[d]=u},l.ck=function(d){delete lr.REGISTERED_PROTOCOLS[d]},l.cl=function(d,u){const h={};for(let w=0;w<d.length;w++){const K=u&&u[d[w].id]||ic(d[w]);u&&(u[d[w].id]=K);let F=h[K];F||(F=h[K]=[]),F.push(d[w])}const v=[];for(const w in h)v.push(h[w]);return v},l.cm=xr,l.cn=a_,l.co=sh,l.cp=X0,l.cq=function(d){d.bucket.createArrays(),d.bucket.tilePixelRatio=at/(512*d.bucket.overscaling),d.bucket.compareText={},d.bucket.iconsNeedLinear=!1;const u=d.bucket.layers[0],h=u.layout,v=u._unevaluatedLayout._values,w={layoutIconSize:v["icon-size"].possiblyEvaluate(new Uo(d.bucket.zoom+1),d.canonical),layoutTextSize:v["text-size"].possiblyEvaluate(new Uo(d.bucket.zoom+1),d.canonical),textMaxSize:v["text-size"].possiblyEvaluate(new Uo(18))};if(d.bucket.textSizeData.kind==="composite"){const{minZoom:ie,maxZoom:de}=d.bucket.textSizeData;w.compositeTextSizes=[v["text-size"].possiblyEvaluate(new Uo(ie),d.canonical),v["text-size"].possiblyEvaluate(new Uo(de),d.canonical)]}if(d.bucket.iconSizeData.kind==="composite"){const{minZoom:ie,maxZoom:de}=d.bucket.iconSizeData;w.compositeIconSizes=[v["icon-size"].possiblyEvaluate(new Uo(ie),d.canonical),v["icon-size"].possiblyEvaluate(new Uo(de),d.canonical)]}const K=h.get("text-line-height")*Il,F=h.get("text-rotation-alignment")!=="viewport"&&h.get("symbol-placement")!=="point",W=h.get("text-keep-upright"),X=h.get("text-size");for(const ie of d.bucket.features){const de=h.get("text-font").evaluate(ie,{},d.canonical).join(","),_e=X.evaluate(ie,{},d.canonical),Re=w.layoutTextSize.evaluate(ie,{},d.canonical),ze=w.layoutIconSize.evaluate(ie,{},d.canonical),We={horizontal:{},vertical:void 0},et=ie.text;let At,Ct=[0,0];if(et){const Le=et.toString(),lt=h.get("text-letter-spacing").evaluate(ie,{},d.canonical)*Il,Bt=wd(Le)?lt:0,dn=h.get("text-anchor").evaluate(ie,{},d.canonical),kn=g_(u,ie,d.canonical);if(!kn){const jn=h.get("text-radial-offset").evaluate(ie,{},d.canonical);Ct=jn?m_(dn,[jn*Il,Jy]):h.get("text-offset").evaluate(ie,{},d.canonical).map(cr=>cr*Il)}let An=F?"center":h.get("text-justify").evaluate(ie,{},d.canonical);const Bn=h.get("symbol-placement")==="point"?h.get("text-max-width").evaluate(ie,{},d.canonical)*Il:1/0,nr=()=>{d.bucket.allowVerticalPlacement&&Md(Le)&&(We.vertical=hc(et,d.glyphMap,d.glyphPositions,d.imagePositions,de,Bn,K,dn,"left",Bt,Ct,l.ag.vertical,!0,Re,_e))};if(!F&&kn){const jn=new Set;if(An==="auto")for(let Tn=0;Tn<kn.values.length;Tn+=2)jn.add(u1(kn.values[Tn]));else jn.add(An);let cr=!1;for(const Tn of jn)if(!We.horizontal[Tn])if(cr)We.horizontal[Tn]=We.horizontal[0];else{const Nr=hc(et,d.glyphMap,d.glyphPositions,d.imagePositions,de,Bn,K,"center",Tn,Bt,Ct,l.ag.horizontal,!1,Re,_e);Nr&&(We.horizontal[Tn]=Nr,cr=Nr.positionedLines.length===1)}nr()}else{An==="auto"&&(An=u1(dn));const jn=hc(et,d.glyphMap,d.glyphPositions,d.imagePositions,de,Bn,K,dn,An,Bt,Ct,l.ag.horizontal,!1,Re,_e);jn&&(We.horizontal[An]=jn),nr(),Md(Le)&&F&&W&&(We.vertical=hc(et,d.glyphMap,d.glyphPositions,d.imagePositions,de,Bn,K,dn,An,Bt,Ct,l.ag.vertical,!1,Re,_e))}}let Nt=!1;if(ie.icon&&ie.icon.name){const Le=d.imageMap[ie.icon.name];Le&&(At=gm(d.imagePositions[ie.icon.name],h.get("icon-offset").evaluate(ie,{},d.canonical),h.get("icon-anchor").evaluate(ie,{},d.canonical)),Nt=!!Le.sdf,d.bucket.sdfIcons===void 0?d.bucket.sdfIcons=Nt:d.bucket.sdfIcons!==Nt&&it("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Le.pixelRatio!==d.bucket.pixelRatio||h.get("icon-rotate").constantOr(1)!==0)&&(d.bucket.iconsNeedLinear=!0))}const St=y_(We.horizontal)||We.vertical;d.bucket.iconsInText=!!St&&St.iconsInText,(St||At)&&ig(d.bucket,ie,We,At,d.imageMap,w,Re,ze,Ct,Nt,d.canonical,d.subdivisionGranularity)}d.showCollisionBoxes&&d.bucket.generateCollisionDebugBuffers()},l.cr=rh,l.cs=jr,l.ct=Ya,l.cu=Pc,l.cv=Z0,l.cw=class{constructor(d){this._marks={start:[d.url,"start"].join("#"),end:[d.url,"end"].join("#"),measure:d.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let d=performance.getEntriesByName(this._marks.measure);return d.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),d=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),d}},l.cx=function(d,u,h,v,w){return o(this,void 0,void 0,function*(){if(re())try{return yield vn(d,u,h,v,w)}catch{}return function(K,F,W,X,ie){const de=K.width,_e=K.height;Gn&&tn||(Gn=new OffscreenCanvas(de,_e),tn=Gn.getContext("2d",{willReadFrequently:!0})),Gn.width=de,Gn.height=_e,tn.drawImage(K,0,0,de,_e);const Re=tn.getImageData(F,W,X,ie);return tn.clearRect(0,0,de,_e),Re.data}(d,u,h,v,w)})},l.cy=s_,l.cz=f,l.d=nt,l.e=yt,l.f=d=>o(void 0,void 0,void 0,function*(){if(d.byteLength===0)return createImageBitmap(new ImageData(1,1));const u=new Blob([new Uint8Array(d)],{type:"image/png"});try{return createImageBitmap(u)}catch(h){throw new Error(`Could not load image because of ${h.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),l.g=vr,l.h=d=>new Promise((u,h)=>{const v=new Image;v.onload=()=>{u(v),URL.revokeObjectURL(v.src),v.onload=null,window.requestAnimationFrame(()=>{v.src=Kt})},v.onerror=()=>h(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const w=new Blob([new Uint8Array(d)],{type:"image/png"});v.src=d.byteLength?URL.createObjectURL(w):Kt}),l.i=pt,l.j=(d,u)=>pe(yt(d,{type:"json"}),u),l.k=Hn,l.l=sn,l.m=pe,l.n=(d,u)=>pe(yt(d,{type:"arrayBuffer"}),u),l.o=function(d){return new Z0(d).readFields(Xm,[])},l.p=i1,l.q=Bd,l.r=sl,l.s=dr,l.t=_a,l.u=Mi,l.v=J,l.w=it,l.x=ba,l.y=TA,l.z=function([d,u,h]){return u+=90,u*=Math.PI/180,h*=Math.PI/180,{x:d*Math.cos(u)*Math.sin(h),y:d*Math.sin(u)*Math.sin(h),z:d*Math.cos(h)}}}),i("worker",["./shared"],function(l){class o{constructor(J){this.keyCache={},J&&this.replace(J)}replace(J){this._layerConfigs={},this._layers={},this.update(J,[])}update(J,ve){for(const Fe of J){this._layerConfigs[Fe.id]=Fe;const Qe=this._layers[Fe.id]=l.bx(Fe);Qe._featureFilter=l.a6(Qe.filter),this.keyCache[Fe.id]&&delete this.keyCache[Fe.id]}for(const Fe of ve)delete this.keyCache[Fe],delete this._layerConfigs[Fe],delete this._layers[Fe];this.familiesBySource={};const p=l.cl(Object.values(this._layerConfigs),this.keyCache);for(const Fe of p){const Qe=Fe.map(zt=>this._layers[zt.id]),rt=Qe[0];if(rt.visibility==="none")continue;const ct=rt.source||"";let dt=this.familiesBySource[ct];dt||(dt=this.familiesBySource[ct]={});const qt=rt.sourceLayer||"_geojsonTileLayer";let Gt=dt[qt];Gt||(Gt=dt[qt]=[]),Gt.push(Qe)}}}class f{constructor(J){const ve={},p=[];for(const ct in J){const dt=J[ct],qt=ve[ct]={};for(const Gt in dt){const zt=dt[+Gt];if(!zt||zt.bitmap.width===0||zt.bitmap.height===0)continue;const on={x:0,y:0,w:zt.bitmap.width+2,h:zt.bitmap.height+2};p.push(on),qt[Gt]={rect:on,metrics:zt.metrics}}}const{w:Fe,h:Qe}=l.p(p),rt=new l.q({width:Fe||1,height:Qe||1});for(const ct in J){const dt=J[ct];for(const qt in dt){const Gt=dt[+qt];if(!Gt||Gt.bitmap.width===0||Gt.bitmap.height===0)continue;const zt=ve[ct][qt].rect;l.q.copy(Gt.bitmap,rt,{x:0,y:0},{x:zt.x+1,y:zt.y+1},Gt.bitmap)}}this.image=rt,this.positions=ve}}l.cm("GlyphAtlas",f);class y{constructor(J){this.tileID=new l.Y(J.tileID.overscaledZ,J.tileID.wrap,J.tileID.canonical.z,J.tileID.canonical.x,J.tileID.canonical.y),this.uid=J.uid,this.zoom=J.zoom,this.pixelRatio=J.pixelRatio,this.tileSize=J.tileSize,this.source=J.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=J.showCollisionBoxes,this.collectResourceTiming=!!J.collectResourceTiming,this.returnDependencies=!!J.returnDependencies,this.promoteId=J.promoteId,this.inFlightDependencies=[]}parse(J,ve,p,Fe,Qe){return l._(this,void 0,void 0,function*(){this.status="parsing",this.data=J,this.collisionBoxArray=new l.a4;const rt=new l.cn(Object.keys(J.layers).sort()),ct=new l.co(this.tileID,this.promoteId);ct.bucketLayerIDs=[];const dt={},qt={featureIndex:ct,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:p,subdivisionGranularity:Qe},Gt=ve.familiesBySource[this.source];for(const Ur in Gt){const ri=J.layers[Ur];if(!ri)continue;ri.version===1&&l.w(`Vector tile source "${this.source}" layer "${Ur}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Or=rt.encode(Ur),ka=[];for(let Wi=0;Wi<ri.length;Wi++){const Bi=ri.feature(Wi),eo=ct.getId(Bi,Ur);ka.push({feature:Bi,id:eo,index:Wi,sourceLayerIndex:Or})}for(const Wi of Gt[Ur]){const Bi=Wi[0];Bi.source!==this.source&&l.w(`layer.source = ${Bi.source} does not equal this.source = ${this.source}`),Bi.minzoom&&this.zoom<Math.floor(Bi.minzoom)||Bi.maxzoom&&this.zoom>=Bi.maxzoom||Bi.visibility!=="none"&&(x(Wi,this.zoom,p),(dt[Bi.id]=Bi.createBucket({index:ct.bucketLayerIDs.length,layers:Wi,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Or,sourceID:this.source})).populate(ka,qt,this.tileID.canonical),ct.bucketLayerIDs.push(Wi.map(eo=>eo.id)))}}const zt=l.bC(qt.glyphDependencies,Ur=>Object.keys(Ur).map(Number));this.inFlightDependencies.forEach(Ur=>Ur==null?void 0:Ur.abort()),this.inFlightDependencies=[];let on=Promise.resolve({});if(Object.keys(zt).length){const Ur=new AbortController;this.inFlightDependencies.push(Ur),on=Fe.sendAsync({type:"GG",data:{stacks:zt,source:this.source,tileID:this.tileID,type:"glyphs"}},Ur)}const jt=Object.keys(qt.iconDependencies);let Dn=Promise.resolve({});if(jt.length){const Ur=new AbortController;this.inFlightDependencies.push(Ur),Dn=Fe.sendAsync({type:"GI",data:{icons:jt,source:this.source,tileID:this.tileID,type:"icons"}},Ur)}const rr=Object.keys(qt.patternDependencies);let Br=Promise.resolve({});if(rr.length){const Ur=new AbortController;this.inFlightDependencies.push(Ur),Br=Fe.sendAsync({type:"GI",data:{icons:rr,source:this.source,tileID:this.tileID,type:"patterns"}},Ur)}const[Jn,un,er]=yield Promise.all([on,Dn,Br]),fr=new f(Jn),Sr=new l.cp(un,er);for(const Ur in dt){const ri=dt[Ur];ri instanceof l.a5?(x(ri.layers,this.zoom,p),l.cq({bucket:ri,glyphMap:Jn,glyphPositions:fr.positions,imageMap:un,imagePositions:Sr.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:qt.subdivisionGranularity})):ri.hasPattern&&(ri instanceof l.cr||ri instanceof l.cs||ri instanceof l.ct)&&(x(ri.layers,this.zoom,p),ri.addFeatures(qt,this.tileID.canonical,Sr.patternPositions))}return this.status="done",{buckets:Object.values(dt).filter(Ur=>!Ur.isEmpty()),featureIndex:ct,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:fr.image,imageAtlas:Sr,glyphMap:this.returnDependencies?Jn:null,iconMap:this.returnDependencies?un:null,glyphPositions:this.returnDependencies?fr.positions:null}})}}function x(Ve,J,ve){const p=new l.C(J);for(const Fe of Ve)Fe.recalculate(p,ve)}class B{constructor(J,ve,p){this.actor=J,this.layerIndex=ve,this.availableImages=p,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(J,ve){return l._(this,void 0,void 0,function*(){const p=yield l.n(J.request,ve);try{return{vectorTile:new l.cu.VectorTile(new l.cv(p.data)),rawData:p.data,cacheControl:p.cacheControl,expires:p.expires}}catch(Fe){const Qe=new Uint8Array(p.data);let rt=`Unable to parse the tile at ${J.request.url}, `;throw rt+=Qe[0]===31&&Qe[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Fe.message}`,new Error(rt)}})}loadTile(J){return l._(this,void 0,void 0,function*(){const ve=J.uid,p=!!(J&&J.request&&J.request.collectResourceTiming)&&new l.cw(J.request),Fe=new y(J);this.loading[ve]=Fe;const Qe=new AbortController;Fe.abort=Qe;try{const rt=yield this.loadVectorTile(J,Qe);if(delete this.loading[ve],!rt)return null;const ct=rt.rawData,dt={};rt.expires&&(dt.expires=rt.expires),rt.cacheControl&&(dt.cacheControl=rt.cacheControl);const qt={};if(p){const zt=p.finish();zt&&(qt.resourceTiming=JSON.parse(JSON.stringify(zt)))}Fe.vectorTile=rt.vectorTile;const Gt=Fe.parse(rt.vectorTile,this.layerIndex,this.availableImages,this.actor,J.subdivisionGranularity);this.loaded[ve]=Fe,this.fetching[ve]={rawTileData:ct,cacheControl:dt,resourceTiming:qt};try{const zt=yield Gt;return l.e({rawTileData:ct.slice(0)},zt,dt,qt)}finally{delete this.fetching[ve]}}catch(rt){throw delete this.loading[ve],Fe.status="done",this.loaded[ve]=Fe,rt}})}reloadTile(J){return l._(this,void 0,void 0,function*(){const ve=J.uid;if(!this.loaded||!this.loaded[ve])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const p=this.loaded[ve];if(p.showCollisionBoxes=J.showCollisionBoxes,p.status==="parsing"){const Fe=yield p.parse(p.vectorTile,this.layerIndex,this.availableImages,this.actor,J.subdivisionGranularity);let Qe;if(this.fetching[ve]){const{rawTileData:rt,cacheControl:ct,resourceTiming:dt}=this.fetching[ve];delete this.fetching[ve],Qe=l.e({rawTileData:rt.slice(0)},Fe,ct,dt)}else Qe=Fe;return Qe}if(p.status==="done"&&p.vectorTile)return p.parse(p.vectorTile,this.layerIndex,this.availableImages,this.actor,J.subdivisionGranularity)})}abortTile(J){return l._(this,void 0,void 0,function*(){const ve=this.loading,p=J.uid;ve&&ve[p]&&ve[p].abort&&(ve[p].abort.abort(),delete ve[p])})}removeTile(J){return l._(this,void 0,void 0,function*(){this.loaded&&this.loaded[J.uid]&&delete this.loaded[J.uid]})}}class O{constructor(){this.loaded={}}loadTile(J){return l._(this,void 0,void 0,function*(){const{uid:ve,encoding:p,rawImageData:Fe,redFactor:Qe,greenFactor:rt,blueFactor:ct,baseShift:dt}=J,qt=Fe.width+2,Gt=Fe.height+2,zt=l.b(Fe)?new l.R({width:qt,height:Gt},yield l.cx(Fe,-1,-1,qt,Gt)):Fe,on=new l.cy(ve,zt,p,Qe,rt,ct,dt);return this.loaded=this.loaded||{},this.loaded[ve]=on,on})}removeTile(J){const ve=this.loaded,p=J.uid;ve&&ve[p]&&delete ve[p]}}var P,U,j=function(){if(U)return P;function Ve(ve,p){if(ve.length!==0){J(ve[0],p);for(var Fe=1;Fe<ve.length;Fe++)J(ve[Fe],!p)}}function J(ve,p){for(var Fe=0,Qe=0,rt=0,ct=ve.length,dt=ct-1;rt<ct;dt=rt++){var qt=(ve[rt][0]-ve[dt][0])*(ve[dt][1]+ve[rt][1]),Gt=Fe+qt;Qe+=Math.abs(Fe)>=Math.abs(qt)?Fe-Gt+qt:qt-Gt+Fe,Fe=Gt}Fe+Qe>=0!=!!p&&ve.reverse()}return U=1,P=function ve(p,Fe){var Qe,rt=p&&p.type;if(rt==="FeatureCollection")for(Qe=0;Qe<p.features.length;Qe++)ve(p.features[Qe],Fe);else if(rt==="GeometryCollection")for(Qe=0;Qe<p.geometries.length;Qe++)ve(p.geometries[Qe],Fe);else if(rt==="Feature")ve(p.geometry,Fe);else if(rt==="Polygon")Ve(p.coordinates,Fe);else if(rt==="MultiPolygon")for(Qe=0;Qe<p.coordinates.length;Qe++)Ve(p.coordinates[Qe],Fe);return p}}(),N=l.cz(j);const Y=l.cu.VectorTileFeature.prototype.toGeoJSON;class H{constructor(J){this._feature=J,this.extent=l.Z,this.type=J.type,this.properties=J.tags,"id"in J&&!isNaN(J.id)&&(this.id=parseInt(J.id,10))}loadGeometry(){if(this._feature.type===1){const J=[];for(const ve of this._feature.geometry)J.push([new l.P(ve[0],ve[1])]);return J}{const J=[];for(const ve of this._feature.geometry){const p=[];for(const Fe of ve)p.push(new l.P(Fe[0],Fe[1]));J.push(p)}return J}}toGeoJSON(J,ve,p){return Y.call(this,J,ve,p)}}class se{constructor(J){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=l.Z,this.length=J.length,this._features=J}feature(J){return new H(this._features[J])}}var re,V,ne,G={exports:{}},oe=function(){if(ne)return G.exports;ne=1;var Ve=l.cC(),J=function(){if(V)return re;V=1;var Gt=l.cA(),zt=l.cB().VectorTileFeature;function on(Dn,rr){this.options=rr||{},this.features=Dn,this.length=Dn.length}function jt(Dn,rr){this.id=typeof Dn.id=="number"?Dn.id:void 0,this.type=Dn.type,this.rawGeometry=Dn.type===1?[Dn.geometry]:Dn.geometry,this.properties=Dn.tags,this.extent=rr||4096}return re=on,on.prototype.feature=function(Dn){return new jt(this.features[Dn],this.options.extent)},jt.prototype.loadGeometry=function(){var Dn=this.rawGeometry;this.geometry=[];for(var rr=0;rr<Dn.length;rr++){for(var Br=Dn[rr],Jn=[],un=0;un<Br.length;un++)Jn.push(new Gt(Br[un][0],Br[un][1]));this.geometry.push(Jn)}return this.geometry},jt.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Dn=this.geometry,rr=1/0,Br=-1/0,Jn=1/0,un=-1/0,er=0;er<Dn.length;er++)for(var fr=Dn[er],Sr=0;Sr<fr.length;Sr++){var Ur=fr[Sr];rr=Math.min(rr,Ur.x),Br=Math.max(Br,Ur.x),Jn=Math.min(Jn,Ur.y),un=Math.max(un,Ur.y)}return[rr,Jn,Br,un]},jt.prototype.toGeoJSON=zt.prototype.toGeoJSON,re}();function ve(Gt){var zt=new Ve;return function(on,jt){for(var Dn in on.layers)jt.writeMessage(3,p,on.layers[Dn])}(Gt,zt),zt.finish()}function p(Gt,zt){var on;zt.writeVarintField(15,Gt.version||1),zt.writeStringField(1,Gt.name||""),zt.writeVarintField(5,Gt.extent||4096);var jt={keys:[],values:[],keycache:{},valuecache:{}};for(on=0;on<Gt.length;on++)jt.feature=Gt.feature(on),zt.writeMessage(2,Fe,jt);var Dn=jt.keys;for(on=0;on<Dn.length;on++)zt.writeStringField(3,Dn[on]);var rr=jt.values;for(on=0;on<rr.length;on++)zt.writeMessage(4,qt,rr[on])}function Fe(Gt,zt){var on=Gt.feature;on.id!==void 0&&zt.writeVarintField(1,on.id),zt.writeMessage(2,Qe,Gt),zt.writeVarintField(3,on.type),zt.writeMessage(4,dt,on)}function Qe(Gt,zt){var on=Gt.feature,jt=Gt.keys,Dn=Gt.values,rr=Gt.keycache,Br=Gt.valuecache;for(var Jn in on.properties){var un=on.properties[Jn],er=rr[Jn];if(un!==null){er===void 0&&(jt.push(Jn),rr[Jn]=er=jt.length-1),zt.writeVarint(er);var fr=typeof un;fr!=="string"&&fr!=="boolean"&&fr!=="number"&&(un=JSON.stringify(un));var Sr=fr+":"+un,Ur=Br[Sr];Ur===void 0&&(Dn.push(un),Br[Sr]=Ur=Dn.length-1),zt.writeVarint(Ur)}}}function rt(Gt,zt){return(zt<<3)+(7&Gt)}function ct(Gt){return Gt<<1^Gt>>31}function dt(Gt,zt){for(var on=Gt.loadGeometry(),jt=Gt.type,Dn=0,rr=0,Br=on.length,Jn=0;Jn<Br;Jn++){var un=on[Jn],er=1;jt===1&&(er=un.length),zt.writeVarint(rt(1,er));for(var fr=jt===3?un.length-1:un.length,Sr=0;Sr<fr;Sr++){Sr===1&&jt!==1&&zt.writeVarint(rt(2,fr-1));var Ur=un[Sr].x-Dn,ri=un[Sr].y-rr;zt.writeVarint(ct(Ur)),zt.writeVarint(ct(ri)),Dn+=Ur,rr+=ri}jt===3&&zt.writeVarint(rt(7,1))}}function qt(Gt,zt){var on=typeof Gt;on==="string"?zt.writeStringField(1,Gt):on==="boolean"?zt.writeBooleanField(7,Gt):on==="number"&&(Gt%1!=0?zt.writeDoubleField(3,Gt):Gt<0?zt.writeSVarintField(6,Gt):zt.writeVarintField(5,Gt))}return G.exports=ve,G.exports.fromVectorTileJs=ve,G.exports.fromGeojsonVt=function(Gt,zt){zt=zt||{};var on={};for(var jt in Gt)on[jt]=new J(Gt[jt].features,zt),on[jt].name=jt,on[jt].version=zt.version,on[jt].extent=zt.extent;return ve({layers:on})},G.exports.GeoJSONWrapper=J,G.exports}(),he=l.cz(oe);const fe={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Ve=>Ve},Ee=Math.fround||(me=new Float32Array(1),Ve=>(me[0]=+Ve,me[0]));var me;const Se=3,Ke=5,xe=6;class at{constructor(J){this.options=Object.assign(Object.create(fe),J),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(J){const{log:ve,minZoom:p,maxZoom:Fe}=this.options;ve&&console.time("total time");const Qe=`prepare ${J.length} points`;ve&&console.time(Qe),this.points=J;const rt=[];for(let dt=0;dt<J.length;dt++){const qt=J[dt];if(!qt.geometry)continue;const[Gt,zt]=qt.geometry.coordinates,on=Ee(Ne(Gt)),jt=Ee(we(zt));rt.push(on,jt,1/0,dt,-1,1),this.options.reduce&&rt.push(0)}let ct=this.trees[Fe+1]=this._createTree(rt);ve&&console.timeEnd(Qe);for(let dt=Fe;dt>=p;dt--){const qt=+Date.now();ct=this.trees[dt]=this._createTree(this._cluster(ct,dt)),ve&&console.log("z%d: %d clusters in %dms",dt,ct.numItems,+Date.now()-qt)}return ve&&console.timeEnd("total time"),this}getClusters(J,ve){let p=((J[0]+180)%360+360)%360-180;const Fe=Math.max(-90,Math.min(90,J[1]));let Qe=J[2]===180?180:((J[2]+180)%360+360)%360-180;const rt=Math.max(-90,Math.min(90,J[3]));if(J[2]-J[0]>=360)p=-180,Qe=180;else if(p>Qe){const zt=this.getClusters([p,Fe,180,rt],ve),on=this.getClusters([-180,Fe,Qe,rt],ve);return zt.concat(on)}const ct=this.trees[this._limitZoom(ve)],dt=ct.range(Ne(p),we(rt),Ne(Qe),we(Fe)),qt=ct.data,Gt=[];for(const zt of dt){const on=this.stride*zt;Gt.push(qt[on+Ke]>1?Ze(qt,on,this.clusterProps):this.points[qt[on+Se]])}return Gt}getChildren(J){const ve=this._getOriginId(J),p=this._getOriginZoom(J),Fe="No cluster with the specified id.",Qe=this.trees[p];if(!Qe)throw new Error(Fe);const rt=Qe.data;if(ve*this.stride>=rt.length)throw new Error(Fe);const ct=this.options.radius/(this.options.extent*Math.pow(2,p-1)),dt=Qe.within(rt[ve*this.stride],rt[ve*this.stride+1],ct),qt=[];for(const Gt of dt){const zt=Gt*this.stride;rt[zt+4]===J&&qt.push(rt[zt+Ke]>1?Ze(rt,zt,this.clusterProps):this.points[rt[zt+Se]])}if(qt.length===0)throw new Error(Fe);return qt}getLeaves(J,ve,p){const Fe=[];return this._appendLeaves(Fe,J,ve=ve||10,p=p||0,0),Fe}getTile(J,ve,p){const Fe=this.trees[this._limitZoom(J)],Qe=Math.pow(2,J),{extent:rt,radius:ct}=this.options,dt=ct/rt,qt=(p-dt)/Qe,Gt=(p+1+dt)/Qe,zt={features:[]};return this._addTileFeatures(Fe.range((ve-dt)/Qe,qt,(ve+1+dt)/Qe,Gt),Fe.data,ve,p,Qe,zt),ve===0&&this._addTileFeatures(Fe.range(1-dt/Qe,qt,1,Gt),Fe.data,Qe,p,Qe,zt),ve===Qe-1&&this._addTileFeatures(Fe.range(0,qt,dt/Qe,Gt),Fe.data,-1,p,Qe,zt),zt.features.length?zt:null}getClusterExpansionZoom(J){let ve=this._getOriginZoom(J)-1;for(;ve<=this.options.maxZoom;){const p=this.getChildren(J);if(ve++,p.length!==1)break;J=p[0].properties.cluster_id}return ve}_appendLeaves(J,ve,p,Fe,Qe){const rt=this.getChildren(ve);for(const ct of rt){const dt=ct.properties;if(dt&&dt.cluster?Qe+dt.point_count<=Fe?Qe+=dt.point_count:Qe=this._appendLeaves(J,dt.cluster_id,p,Fe,Qe):Qe<Fe?Qe++:J.push(ct),J.length===p)break}return Qe}_createTree(J){const ve=new l.aB(J.length/this.stride|0,this.options.nodeSize,Float32Array);for(let p=0;p<J.length;p+=this.stride)ve.add(J[p],J[p+1]);return ve.finish(),ve.data=J,ve}_addTileFeatures(J,ve,p,Fe,Qe,rt){for(const ct of J){const dt=ct*this.stride,qt=ve[dt+Ke]>1;let Gt,zt,on;if(qt)Gt=Je(ve,dt,this.clusterProps),zt=ve[dt],on=ve[dt+1];else{const rr=this.points[ve[dt+Se]];Gt=rr.properties;const[Br,Jn]=rr.geometry.coordinates;zt=Ne(Br),on=we(Jn)}const jt={type:1,geometry:[[Math.round(this.options.extent*(zt*Qe-p)),Math.round(this.options.extent*(on*Qe-Fe))]],tags:Gt};let Dn;Dn=qt||this.options.generateId?ve[dt+Se]:this.points[ve[dt+Se]].id,Dn!==void 0&&(jt.id=Dn),rt.features.push(jt)}}_limitZoom(J){return Math.max(this.options.minZoom,Math.min(Math.floor(+J),this.options.maxZoom+1))}_cluster(J,ve){const{radius:p,extent:Fe,reduce:Qe,minPoints:rt}=this.options,ct=p/(Fe*Math.pow(2,ve)),dt=J.data,qt=[],Gt=this.stride;for(let zt=0;zt<dt.length;zt+=Gt){if(dt[zt+2]<=ve)continue;dt[zt+2]=ve;const on=dt[zt],jt=dt[zt+1],Dn=J.within(dt[zt],dt[zt+1],ct),rr=dt[zt+Ke];let Br=rr;for(const Jn of Dn){const un=Jn*Gt;dt[un+2]>ve&&(Br+=dt[un+Ke])}if(Br>rr&&Br>=rt){let Jn,un=on*rr,er=jt*rr,fr=-1;const Sr=((zt/Gt|0)<<5)+(ve+1)+this.points.length;for(const Ur of Dn){const ri=Ur*Gt;if(dt[ri+2]<=ve)continue;dt[ri+2]=ve;const Or=dt[ri+Ke];un+=dt[ri]*Or,er+=dt[ri+1]*Or,dt[ri+4]=Sr,Qe&&(Jn||(Jn=this._map(dt,zt,!0),fr=this.clusterProps.length,this.clusterProps.push(Jn)),Qe(Jn,this._map(dt,ri)))}dt[zt+4]=Sr,qt.push(un/Br,er/Br,1/0,Sr,-1,Br),Qe&&qt.push(fr)}else{for(let Jn=0;Jn<Gt;Jn++)qt.push(dt[zt+Jn]);if(Br>1)for(const Jn of Dn){const un=Jn*Gt;if(!(dt[un+2]<=ve)){dt[un+2]=ve;for(let er=0;er<Gt;er++)qt.push(dt[un+er])}}}}return qt}_getOriginId(J){return J-this.points.length>>5}_getOriginZoom(J){return(J-this.points.length)%32}_map(J,ve,p){if(J[ve+Ke]>1){const rt=this.clusterProps[J[ve+xe]];return p?Object.assign({},rt):rt}const Fe=this.points[J[ve+Se]].properties,Qe=this.options.map(Fe);return p&&Qe===Fe?Object.assign({},Qe):Qe}}function Ze(Ve,J,ve){return{type:"Feature",id:Ve[J+Se],properties:Je(Ve,J,ve),geometry:{type:"Point",coordinates:[(p=Ve[J],360*(p-.5)),De(Ve[J+1])]}};var p}function Je(Ve,J,ve){const p=Ve[J+Ke],Fe=p>=1e4?`${Math.round(p/1e3)}k`:p>=1e3?Math.round(p/100)/10+"k":p,Qe=Ve[J+xe],rt=Qe===-1?{}:Object.assign({},ve[Qe]);return Object.assign(rt,{cluster:!0,cluster_id:Ve[J+Se],point_count:p,point_count_abbreviated:Fe})}function Ne(Ve){return Ve/360+.5}function we(Ve){const J=Math.sin(Ve*Math.PI/180),ve=.5-.25*Math.log((1+J)/(1-J))/Math.PI;return ve<0?0:ve>1?1:ve}function De(Ve){const J=(180-360*Ve)*Math.PI/180;return 360*Math.atan(Math.exp(J))/Math.PI-90}function He(Ve,J,ve,p){let Fe=p;const Qe=J+(ve-J>>1);let rt,ct=ve-J;const dt=Ve[J],qt=Ve[J+1],Gt=Ve[ve],zt=Ve[ve+1];for(let on=J+3;on<ve;on+=3){const jt=bt(Ve[on],Ve[on+1],dt,qt,Gt,zt);if(jt>Fe)rt=on,Fe=jt;else if(jt===Fe){const Dn=Math.abs(on-Qe);Dn<ct&&(rt=on,ct=Dn)}}Fe>p&&(rt-J>3&&He(Ve,J,rt,p),Ve[rt+2]=Fe,ve-rt>3&&He(Ve,rt,ve,p))}function bt(Ve,J,ve,p,Fe,Qe){let rt=Fe-ve,ct=Qe-p;if(rt!==0||ct!==0){const dt=((Ve-ve)*rt+(J-p)*ct)/(rt*rt+ct*ct);dt>1?(ve=Fe,p=Qe):dt>0&&(ve+=rt*dt,p+=ct*dt)}return rt=Ve-ve,ct=J-p,rt*rt+ct*ct}function Yt(Ve,J,ve,p){const Fe={id:Ve??null,type:J,geometry:ve,tags:p,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(J==="Point"||J==="MultiPoint"||J==="LineString")yt(Fe,ve);else if(J==="Polygon")yt(Fe,ve[0]);else if(J==="MultiLineString")for(const Qe of ve)yt(Fe,Qe);else if(J==="MultiPolygon")for(const Qe of ve)yt(Fe,Qe[0]);return Fe}function yt(Ve,J){for(let ve=0;ve<J.length;ve+=3)Ve.minX=Math.min(Ve.minX,J[ve]),Ve.minY=Math.min(Ve.minY,J[ve+1]),Ve.maxX=Math.max(Ve.maxX,J[ve]),Ve.maxY=Math.max(Ve.maxY,J[ve+1])}function Ft(Ve,J,ve,p){if(!J.geometry)return;const Fe=J.geometry.coordinates;if(Fe&&Fe.length===0)return;const Qe=J.geometry.type,rt=Math.pow(ve.tolerance/((1<<ve.maxZoom)*ve.extent),2);let ct=[],dt=J.id;if(ve.promoteId?dt=J.properties[ve.promoteId]:ve.generateId&&(dt=p||0),Qe==="Point")Pt(Fe,ct);else if(Qe==="MultiPoint")for(const qt of Fe)Pt(qt,ct);else if(Qe==="LineString")Ue(Fe,ct,rt,!1);else if(Qe==="MultiLineString"){if(ve.lineMetrics){for(const qt of Fe)ct=[],Ue(qt,ct,rt,!1),Ve.push(Yt(dt,"LineString",ct,J.properties));return}Pe(Fe,ct,rt,!1)}else if(Qe==="Polygon")Pe(Fe,ct,rt,!0);else{if(Qe!=="MultiPolygon"){if(Qe==="GeometryCollection"){for(const qt of J.geometry.geometries)Ft(Ve,{id:dt,geometry:qt,properties:J.properties},ve,p);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const qt of Fe){const Gt=[];Pe(qt,Gt,rt,!0),ct.push(Gt)}}Ve.push(Yt(dt,Qe,ct,J.properties))}function Pt(Ve,J){J.push(Be(Ve[0]),it(Ve[1]),0)}function Ue(Ve,J,ve,p){let Fe,Qe,rt=0;for(let dt=0;dt<Ve.length;dt++){const qt=Be(Ve[dt][0]),Gt=it(Ve[dt][1]);J.push(qt,Gt,0),dt>0&&(rt+=p?(Fe*Gt-qt*Qe)/2:Math.sqrt(Math.pow(qt-Fe,2)+Math.pow(Gt-Qe,2))),Fe=qt,Qe=Gt}const ct=J.length-3;J[2]=1,He(J,0,ct,ve),J[ct+2]=1,J.size=Math.abs(rt),J.start=0,J.end=J.size}function Pe(Ve,J,ve,p){for(let Fe=0;Fe<Ve.length;Fe++){const Qe=[];Ue(Ve[Fe],Qe,ve,p),J.push(Qe)}}function Be(Ve){return Ve/360+.5}function it(Ve){const J=Math.sin(Ve*Math.PI/180),ve=.5-.25*Math.log((1+J)/(1-J))/Math.PI;return ve<0?0:ve>1?1:ve}function _t(Ve,J,ve,p,Fe,Qe,rt,ct){if(p/=J,Qe>=(ve/=J)&&rt<p)return Ve;if(rt<ve||Qe>=p)return null;const dt=[];for(const qt of Ve){const Gt=qt.geometry;let zt=qt.type;const on=Fe===0?qt.minX:qt.minY,jt=Fe===0?qt.maxX:qt.maxY;if(on>=ve&&jt<p){dt.push(qt);continue}if(jt<ve||on>=p)continue;let Dn=[];if(zt==="Point"||zt==="MultiPoint")pt(Gt,Dn,ve,p,Fe);else if(zt==="LineString")Lt(Gt,Dn,ve,p,Fe,!1,ct.lineMetrics);else if(zt==="MultiLineString")Kt(Gt,Dn,ve,p,Fe,!1);else if(zt==="Polygon")Kt(Gt,Dn,ve,p,Fe,!0);else if(zt==="MultiPolygon")for(const rr of Gt){const Br=[];Kt(rr,Br,ve,p,Fe,!0),Br.length&&Dn.push(Br)}if(Dn.length){if(ct.lineMetrics&&zt==="LineString"){for(const rr of Dn)dt.push(Yt(qt.id,zt,rr,qt.tags));continue}zt!=="LineString"&&zt!=="MultiLineString"||(Dn.length===1?(zt="LineString",Dn=Dn[0]):zt="MultiLineString"),zt!=="Point"&&zt!=="MultiPoint"||(zt=Dn.length===3?"Point":"MultiPoint"),dt.push(Yt(qt.id,zt,Dn,qt.tags))}}return dt.length?dt:null}function pt(Ve,J,ve,p,Fe){for(let Qe=0;Qe<Ve.length;Qe+=3){const rt=Ve[Qe+Fe];rt>=ve&&rt<=p&&vn(J,Ve[Qe],Ve[Qe+1],Ve[Qe+2])}}function Lt(Ve,J,ve,p,Fe,Qe,rt){let ct=nn(Ve);const dt=Fe===0?Gn:tn;let qt,Gt,zt=Ve.start;for(let Br=0;Br<Ve.length-3;Br+=3){const Jn=Ve[Br],un=Ve[Br+1],er=Ve[Br+2],fr=Ve[Br+3],Sr=Ve[Br+4],Ur=Fe===0?Jn:un,ri=Fe===0?fr:Sr;let Or=!1;rt&&(qt=Math.sqrt(Math.pow(Jn-fr,2)+Math.pow(un-Sr,2))),Ur<ve?ri>ve&&(Gt=dt(ct,Jn,un,fr,Sr,ve),rt&&(ct.start=zt+qt*Gt)):Ur>p?ri<p&&(Gt=dt(ct,Jn,un,fr,Sr,p),rt&&(ct.start=zt+qt*Gt)):vn(ct,Jn,un,er),ri<ve&&Ur>=ve&&(Gt=dt(ct,Jn,un,fr,Sr,ve),Or=!0),ri>p&&Ur<=p&&(Gt=dt(ct,Jn,un,fr,Sr,p),Or=!0),!Qe&&Or&&(rt&&(ct.end=zt+qt*Gt),J.push(ct),ct=nn(Ve)),rt&&(zt+=qt)}let on=Ve.length-3;const jt=Ve[on],Dn=Ve[on+1],rr=Fe===0?jt:Dn;rr>=ve&&rr<=p&&vn(ct,jt,Dn,Ve[on+2]),on=ct.length-3,Qe&&on>=3&&(ct[on]!==ct[0]||ct[on+1]!==ct[1])&&vn(ct,ct[0],ct[1],ct[2]),ct.length&&J.push(ct)}function nn(Ve){const J=[];return J.size=Ve.size,J.start=Ve.start,J.end=Ve.end,J}function Kt(Ve,J,ve,p,Fe,Qe){for(const rt of Ve)Lt(rt,J,ve,p,Fe,Qe,!1)}function vn(Ve,J,ve,p){Ve.push(J,ve,p)}function Gn(Ve,J,ve,p,Fe,Qe){const rt=(Qe-J)/(p-J);return vn(Ve,Qe,ve+(Fe-ve)*rt,1),rt}function tn(Ve,J,ve,p,Fe,Qe){const rt=(Qe-ve)/(Fe-ve);return vn(Ve,J+(p-J)*rt,Qe,1),rt}function dr(Ve,J){const ve=[];for(let p=0;p<Ve.length;p++){const Fe=Ve[p],Qe=Fe.type;let rt;if(Qe==="Point"||Qe==="MultiPoint"||Qe==="LineString")rt=Pn(Fe.geometry,J);else if(Qe==="MultiLineString"||Qe==="Polygon"){rt=[];for(const ct of Fe.geometry)rt.push(Pn(ct,J))}else if(Qe==="MultiPolygon"){rt=[];for(const ct of Fe.geometry){const dt=[];for(const qt of ct)dt.push(Pn(qt,J));rt.push(dt)}}ve.push(Yt(Fe.id,Qe,rt,Fe.tags))}return ve}function Pn(Ve,J){const ve=[];ve.size=Ve.size,Ve.start!==void 0&&(ve.start=Ve.start,ve.end=Ve.end);for(let p=0;p<Ve.length;p+=3)ve.push(Ve[p]+J,Ve[p+1],Ve[p+2]);return ve}function pn(Ve,J){if(Ve.transformed)return Ve;const ve=1<<Ve.z,p=Ve.x,Fe=Ve.y;for(const Qe of Ve.features){const rt=Qe.geometry,ct=Qe.type;if(Qe.geometry=[],ct===1)for(let dt=0;dt<rt.length;dt+=2)Qe.geometry.push($n(rt[dt],rt[dt+1],J,ve,p,Fe));else for(let dt=0;dt<rt.length;dt++){const qt=[];for(let Gt=0;Gt<rt[dt].length;Gt+=2)qt.push($n(rt[dt][Gt],rt[dt][Gt+1],J,ve,p,Fe));Qe.geometry.push(qt)}}return Ve.transformed=!0,Ve}function $n(Ve,J,ve,p,Fe,Qe){return[Math.round(ve*(Ve*p-Fe)),Math.round(ve*(J*p-Qe))]}function lr(Ve,J,ve,p,Fe){const Qe=J===Fe.maxZoom?0:Fe.tolerance/((1<<J)*Fe.extent),rt={features:[],numPoints:0,numSimplified:0,numFeatures:Ve.length,source:null,x:ve,y:p,z:J,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const ct of Ve)vr(rt,ct,Qe,Fe);return rt}function vr(Ve,J,ve,p){const Fe=J.geometry,Qe=J.type,rt=[];if(Ve.minX=Math.min(Ve.minX,J.minX),Ve.minY=Math.min(Ve.minY,J.minY),Ve.maxX=Math.max(Ve.maxX,J.maxX),Ve.maxY=Math.max(Ve.maxY,J.maxY),Qe==="Point"||Qe==="MultiPoint")for(let ct=0;ct<Fe.length;ct+=3)rt.push(Fe[ct],Fe[ct+1]),Ve.numPoints++,Ve.numSimplified++;else if(Qe==="LineString")Zn(rt,Fe,Ve,ve,!1,!1);else if(Qe==="MultiLineString"||Qe==="Polygon")for(let ct=0;ct<Fe.length;ct++)Zn(rt,Fe[ct],Ve,ve,Qe==="Polygon",ct===0);else if(Qe==="MultiPolygon")for(let ct=0;ct<Fe.length;ct++){const dt=Fe[ct];for(let qt=0;qt<dt.length;qt++)Zn(rt,dt[qt],Ve,ve,!0,qt===0)}if(rt.length){let ct=J.tags||null;if(Qe==="LineString"&&p.lineMetrics){ct={};for(const qt in J.tags)ct[qt]=J.tags[qt];ct.mapbox_clip_start=Fe.start/Fe.size,ct.mapbox_clip_end=Fe.end/Fe.size}const dt={geometry:rt,type:Qe==="Polygon"||Qe==="MultiPolygon"?3:Qe==="LineString"||Qe==="MultiLineString"?2:1,tags:ct};J.id!==null&&(dt.id=J.id),Ve.features.push(dt)}}function Zn(Ve,J,ve,p,Fe,Qe){const rt=p*p;if(p>0&&J.size<(Fe?rt:p))return void(ve.numPoints+=J.length/3);const ct=[];for(let dt=0;dt<J.length;dt+=3)(p===0||J[dt+2]>rt)&&(ve.numSimplified++,ct.push(J[dt],J[dt+1])),ve.numPoints++;Fe&&function(dt,qt){let Gt=0;for(let zt=0,on=dt.length,jt=on-2;zt<on;jt=zt,zt+=2)Gt+=(dt[zt]-dt[jt])*(dt[zt+1]+dt[jt+1]);if(Gt>0===qt)for(let zt=0,on=dt.length;zt<on/2;zt+=2){const jt=dt[zt],Dn=dt[zt+1];dt[zt]=dt[on-2-zt],dt[zt+1]=dt[on-1-zt],dt[on-2-zt]=jt,dt[on-1-zt]=Dn}}(ct,Qe),Ve.push(ct)}const Ge={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class ce{constructor(J,ve){const p=(ve=this.options=function(Qe,rt){for(const ct in rt)Qe[ct]=rt[ct];return Qe}(Object.create(Ge),ve)).debug;if(p&&console.time("preprocess data"),ve.maxZoom<0||ve.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ve.promoteId&&ve.generateId)throw new Error("promoteId and generateId cannot be used together.");let Fe=function(Qe,rt){const ct=[];if(Qe.type==="FeatureCollection")for(let dt=0;dt<Qe.features.length;dt++)Ft(ct,Qe.features[dt],rt,dt);else Ft(ct,Qe.type==="Feature"?Qe:{geometry:Qe},rt);return ct}(J,ve);this.tiles={},this.tileCoords=[],p&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ve.indexMaxZoom,ve.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Fe=function(Qe,rt){const ct=rt.buffer/rt.extent;let dt=Qe;const qt=_t(Qe,1,-1-ct,ct,0,-1,2,rt),Gt=_t(Qe,1,1-ct,2+ct,0,-1,2,rt);return(qt||Gt)&&(dt=_t(Qe,1,-ct,1+ct,0,-1,2,rt)||[],qt&&(dt=dr(qt,1).concat(dt)),Gt&&(dt=dt.concat(dr(Gt,-1)))),dt}(Fe,ve),Fe.length&&this.splitTile(Fe,0,0,0),p&&(Fe.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(J,ve,p,Fe,Qe,rt,ct){const dt=[J,ve,p,Fe],qt=this.options,Gt=qt.debug;for(;dt.length;){Fe=dt.pop(),p=dt.pop(),ve=dt.pop(),J=dt.pop();const zt=1<<ve,on=pe(ve,p,Fe);let jt=this.tiles[on];if(!jt&&(Gt>1&&console.time("creation"),jt=this.tiles[on]=lr(J,ve,p,Fe,qt),this.tileCoords.push({z:ve,x:p,y:Fe}),Gt)){Gt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ve,p,Fe,jt.numFeatures,jt.numPoints,jt.numSimplified),console.timeEnd("creation"));const Or=`z${ve}`;this.stats[Or]=(this.stats[Or]||0)+1,this.total++}if(jt.source=J,Qe==null){if(ve===qt.indexMaxZoom||jt.numPoints<=qt.indexMaxPoints)continue}else{if(ve===qt.maxZoom||ve===Qe)continue;if(Qe!=null){const Or=Qe-ve;if(p!==rt>>Or||Fe!==ct>>Or)continue}}if(jt.source=null,J.length===0)continue;Gt>1&&console.time("clipping");const Dn=.5*qt.buffer/qt.extent,rr=.5-Dn,Br=.5+Dn,Jn=1+Dn;let un=null,er=null,fr=null,Sr=null,Ur=_t(J,zt,p-Dn,p+Br,0,jt.minX,jt.maxX,qt),ri=_t(J,zt,p+rr,p+Jn,0,jt.minX,jt.maxX,qt);J=null,Ur&&(un=_t(Ur,zt,Fe-Dn,Fe+Br,1,jt.minY,jt.maxY,qt),er=_t(Ur,zt,Fe+rr,Fe+Jn,1,jt.minY,jt.maxY,qt),Ur=null),ri&&(fr=_t(ri,zt,Fe-Dn,Fe+Br,1,jt.minY,jt.maxY,qt),Sr=_t(ri,zt,Fe+rr,Fe+Jn,1,jt.minY,jt.maxY,qt),ri=null),Gt>1&&console.timeEnd("clipping"),dt.push(un||[],ve+1,2*p,2*Fe),dt.push(er||[],ve+1,2*p,2*Fe+1),dt.push(fr||[],ve+1,2*p+1,2*Fe),dt.push(Sr||[],ve+1,2*p+1,2*Fe+1)}}getTile(J,ve,p){J=+J,ve=+ve,p=+p;const Fe=this.options,{extent:Qe,debug:rt}=Fe;if(J<0||J>24)return null;const ct=1<<J,dt=pe(J,ve=ve+ct&ct-1,p);if(this.tiles[dt])return pn(this.tiles[dt],Qe);rt>1&&console.log("drilling down to z%d-%d-%d",J,ve,p);let qt,Gt=J,zt=ve,on=p;for(;!qt&&Gt>0;)Gt--,zt>>=1,on>>=1,qt=this.tiles[pe(Gt,zt,on)];return qt&&qt.source?(rt>1&&(console.log("found parent tile z%d-%d-%d",Gt,zt,on),console.time("drilling down")),this.splitTile(qt.source,Gt,zt,on,J,ve,p),rt>1&&console.timeEnd("drilling down"),this.tiles[dt]?pn(this.tiles[dt],Qe):null):null}}function pe(Ve,J,ve){return 32*((1<<Ve)*ve+J)+Ve}function nt(Ve,J){return J?Ve.properties[J]:Ve.id}function wt(Ve,J){if(Ve==null)return!0;if(Ve.type==="Feature")return nt(Ve,J)!=null;if(Ve.type==="FeatureCollection"){const ve=new Set;for(const p of Ve.features){const Fe=nt(p,J);if(Fe==null||ve.has(Fe))return!1;ve.add(Fe)}return!0}return!1}function Ht(Ve,J){const ve=new Map;if(Ve!=null)if(Ve.type==="Feature")ve.set(nt(Ve,J),Ve);else for(const p of Ve.features)ve.set(nt(p,J),p);return ve}class sn extends B{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(J,ve){return l._(this,void 0,void 0,function*(){const p=J.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const Fe=this._geoJSONIndex.getTile(p.z,p.x,p.y);if(!Fe)return null;const Qe=new se(Fe.features);let rt=he(Qe);return rt.byteOffset===0&&rt.byteLength===rt.buffer.byteLength||(rt=new Uint8Array(rt)),{vectorTile:Qe,rawData:rt.buffer}})}loadData(J){return l._(this,void 0,void 0,function*(){var ve;(ve=this._pendingRequest)===null||ve===void 0||ve.abort();const p=!!(J&&J.request&&J.request.collectResourceTiming)&&new l.cw(J.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(J,this._pendingRequest),this._geoJSONIndex=J.cluster?new at(function({superclusterOptions:rt,clusterProperties:ct}){if(!ct||!rt)return rt;const dt={},qt={},Gt={accumulated:null,zoom:0},zt={properties:null},on=Object.keys(ct);for(const jt of on){const[Dn,rr]=ct[jt],Br=l.cD(rr),Jn=l.cD(typeof Dn=="string"?[Dn,["accumulated"],["get",jt]]:Dn);dt[jt]=Br.value,qt[jt]=Jn.value}return rt.map=jt=>{zt.properties=jt;const Dn={};for(const rr of on)Dn[rr]=dt[rr].evaluate(Gt,zt);return Dn},rt.reduce=(jt,Dn)=>{zt.properties=Dn;for(const rr of on)Gt.accumulated=jt[rr],jt[rr]=qt[rr].evaluate(Gt,zt)},rt}(J)).load((yield this._pendingData).features):(Fe=yield this._pendingData,new ce(Fe,J.geojsonVtOptions)),this.loaded={};const Qe={};if(p){const rt=p.finish();rt&&(Qe.resourceTiming={},Qe.resourceTiming[J.source]=JSON.parse(JSON.stringify(rt)))}return Qe}catch(Qe){if(delete this._pendingRequest,l.ch(Qe))return{abandoned:!0};throw Qe}var Fe})}getData(){return l._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(J){const ve=this.loaded;return ve&&ve[J.uid]?super.reloadTile(J):this.loadTile(J)}loadAndProcessGeoJSON(J,ve){return l._(this,void 0,void 0,function*(){let p=yield this.loadGeoJSON(J,ve);if(delete this._pendingRequest,typeof p!="object")throw new Error(`Input data given to '${J.source}' is not a valid GeoJSON object.`);if(N(p,!0),J.filter){const Fe=l.cD(J.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Fe.result==="error")throw new Error(Fe.value.map(rt=>`${rt.key}: ${rt.message}`).join(", "));p={type:"FeatureCollection",features:p.features.filter(rt=>Fe.value.evaluate({zoom:0},rt))}}return p})}loadGeoJSON(J,ve){return l._(this,void 0,void 0,function*(){const{promoteId:p}=J;if(J.request){const Fe=yield l.j(J.request,ve);return this._dataUpdateable=wt(Fe.data,p)?Ht(Fe.data,p):void 0,Fe.data}if(typeof J.data=="string")try{const Fe=JSON.parse(J.data);return this._dataUpdateable=wt(Fe,p)?Ht(Fe,p):void 0,Fe}catch{throw new Error(`Input data given to '${J.source}' is not a valid GeoJSON object.`)}if(!J.dataDiff)throw new Error(`Input data given to '${J.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${J.source}`);return function(Fe,Qe,rt){var ct,dt,qt,Gt;if(Qe.removeAll&&Fe.clear(),Qe.remove)for(const zt of Qe.remove)Fe.delete(zt);if(Qe.add)for(const zt of Qe.add){const on=nt(zt,rt);on!=null&&Fe.set(on,zt)}if(Qe.update)for(const zt of Qe.update){let on=Fe.get(zt.id);if(on==null)continue;const jt=!zt.removeAllProperties&&(((ct=zt.removeProperties)===null||ct===void 0?void 0:ct.length)>0||((dt=zt.addOrUpdateProperties)===null||dt===void 0?void 0:dt.length)>0);if((zt.newGeometry||zt.removeAllProperties||jt)&&(on=Object.assign({},on),Fe.set(zt.id,on),jt&&(on.properties=Object.assign({},on.properties))),zt.newGeometry&&(on.geometry=zt.newGeometry),zt.removeAllProperties)on.properties={};else if(((qt=zt.removeProperties)===null||qt===void 0?void 0:qt.length)>0)for(const Dn of zt.removeProperties)Object.prototype.hasOwnProperty.call(on.properties,Dn)&&delete on.properties[Dn];if(((Gt=zt.addOrUpdateProperties)===null||Gt===void 0?void 0:Gt.length)>0)for(const{key:Dn,value:rr}of zt.addOrUpdateProperties)on.properties[Dn]=rr}}(this._dataUpdateable,J.dataDiff,p),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(J){return l._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(J){return this._geoJSONIndex.getClusterExpansionZoom(J.clusterId)}getClusterChildren(J){return this._geoJSONIndex.getChildren(J.clusterId)}getClusterLeaves(J){return this._geoJSONIndex.getLeaves(J.clusterId,J.limit,J.offset)}}class Hn{constructor(J){this.self=J,this.actor=new l.H(J),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(ve,p)=>{if(this.externalWorkerSourceTypes[ve])throw new Error(`Worker source with name "${ve}" already registered.`);this.externalWorkerSourceTypes[ve]=p},this.self.addProtocol=l.cj,this.self.removeProtocol=l.ck,this.self.registerRTLTextPlugin=ve=>{l.cE.setMethods(ve)},this.actor.registerMessageHandler("LDT",(ve,p)=>this._getDEMWorkerSource(ve,p.source).loadTile(p)),this.actor.registerMessageHandler("RDT",(ve,p)=>l._(this,void 0,void 0,function*(){this._getDEMWorkerSource(ve,p.source).removeTile(p)})),this.actor.registerMessageHandler("GCEZ",(ve,p)=>l._(this,void 0,void 0,function*(){return this._getWorkerSource(ve,p.type,p.source).getClusterExpansionZoom(p)})),this.actor.registerMessageHandler("GCC",(ve,p)=>l._(this,void 0,void 0,function*(){return this._getWorkerSource(ve,p.type,p.source).getClusterChildren(p)})),this.actor.registerMessageHandler("GCL",(ve,p)=>l._(this,void 0,void 0,function*(){return this._getWorkerSource(ve,p.type,p.source).getClusterLeaves(p)})),this.actor.registerMessageHandler("LD",(ve,p)=>this._getWorkerSource(ve,p.type,p.source).loadData(p)),this.actor.registerMessageHandler("GD",(ve,p)=>this._getWorkerSource(ve,p.type,p.source).getData()),this.actor.registerMessageHandler("LT",(ve,p)=>this._getWorkerSource(ve,p.type,p.source).loadTile(p)),this.actor.registerMessageHandler("RT",(ve,p)=>this._getWorkerSource(ve,p.type,p.source).reloadTile(p)),this.actor.registerMessageHandler("AT",(ve,p)=>this._getWorkerSource(ve,p.type,p.source).abortTile(p)),this.actor.registerMessageHandler("RMT",(ve,p)=>this._getWorkerSource(ve,p.type,p.source).removeTile(p)),this.actor.registerMessageHandler("RS",(ve,p)=>l._(this,void 0,void 0,function*(){if(!this.workerSources[ve]||!this.workerSources[ve][p.type]||!this.workerSources[ve][p.type][p.source])return;const Fe=this.workerSources[ve][p.type][p.source];delete this.workerSources[ve][p.type][p.source],Fe.removeSource!==void 0&&Fe.removeSource(p)})),this.actor.registerMessageHandler("RM",ve=>l._(this,void 0,void 0,function*(){delete this.layerIndexes[ve],delete this.availableImages[ve],delete this.workerSources[ve],delete this.demWorkerSources[ve]})),this.actor.registerMessageHandler("SR",(ve,p)=>l._(this,void 0,void 0,function*(){this.referrer=p})),this.actor.registerMessageHandler("SRPS",(ve,p)=>this._syncRTLPluginState(ve,p)),this.actor.registerMessageHandler("IS",(ve,p)=>l._(this,void 0,void 0,function*(){this.self.importScripts(p)})),this.actor.registerMessageHandler("SI",(ve,p)=>this._setImages(ve,p)),this.actor.registerMessageHandler("UL",(ve,p)=>l._(this,void 0,void 0,function*(){this._getLayerIndex(ve).update(p.layers,p.removedIds)})),this.actor.registerMessageHandler("SL",(ve,p)=>l._(this,void 0,void 0,function*(){this._getLayerIndex(ve).replace(p)}))}_setImages(J,ve){return l._(this,void 0,void 0,function*(){this.availableImages[J]=ve;for(const p in this.workerSources[J]){const Fe=this.workerSources[J][p];for(const Qe in Fe)Fe[Qe].availableImages=ve}})}_syncRTLPluginState(J,ve){return l._(this,void 0,void 0,function*(){return yield l.cE.syncState(ve,this.self.importScripts)})}_getAvailableImages(J){let ve=this.availableImages[J];return ve||(ve=[]),ve}_getLayerIndex(J){let ve=this.layerIndexes[J];return ve||(ve=this.layerIndexes[J]=new o),ve}_getWorkerSource(J,ve,p){if(this.workerSources[J]||(this.workerSources[J]={}),this.workerSources[J][ve]||(this.workerSources[J][ve]={}),!this.workerSources[J][ve][p]){const Fe={sendAsync:(Qe,rt)=>(Qe.targetMapId=J,this.actor.sendAsync(Qe,rt))};switch(ve){case"vector":this.workerSources[J][ve][p]=new B(Fe,this._getLayerIndex(J),this._getAvailableImages(J));break;case"geojson":this.workerSources[J][ve][p]=new sn(Fe,this._getLayerIndex(J),this._getAvailableImages(J));break;default:this.workerSources[J][ve][p]=new this.externalWorkerSourceTypes[ve](Fe,this._getLayerIndex(J),this._getAvailableImages(J))}}return this.workerSources[J][ve][p]}_getDEMWorkerSource(J,ve){return this.demWorkerSources[J]||(this.demWorkerSources[J]={}),this.demWorkerSources[J][ve]||(this.demWorkerSources[J][ve]=new O),this.demWorkerSources[J][ve]}}return l.i(self)&&(self.worker=new Hn(self)),Hn}),i("index",["exports","./shared"],function(l,o){var f="5.2.0";function y(){var I=new o.A(4);return o.A!=Float32Array&&(I[1]=0,I[2]=0),I[0]=1,I[3]=1,I}let x,B;const O={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(I,a,c){const _=requestAnimationFrame(T=>{M(),a(T)}),{unsubscribe:M}=o.s(I.signal,"abort",()=>{M(),cancelAnimationFrame(_),c(o.c())},!1)},frameAsync(I){return new Promise((a,c)=>{this.frame(I,a,c)})},getImageData(I,a=0){return this.getImageCanvasContext(I).getImageData(-a,-a,I.width+2*a,I.height+2*a)},getImageCanvasContext(I){const a=window.document.createElement("canvas"),c=a.getContext("2d",{willReadFrequently:!0});if(!c)throw new Error("failed to create canvas 2d context");return a.width=I.width,a.height=I.height,c.drawImage(I,0,0,I.width,I.height),c},resolveURL:I=>(x||(x=document.createElement("a")),x.href=I,x.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(B==null&&(B=matchMedia("(prefers-reduced-motion: reduce)")),B.matches)}};class P{static testProp(a){if(!P.docStyle)return a[0];for(let c=0;c<a.length;c++)if(a[c]in P.docStyle)return a[c];return a[0]}static create(a,c,_){const M=window.document.createElement(a);return c!==void 0&&(M.className=c),_&&_.appendChild(M),M}static createNS(a,c){return window.document.createElementNS(a,c)}static disableDrag(){P.docStyle&&P.selectProp&&(P.userSelect=P.docStyle[P.selectProp],P.docStyle[P.selectProp]="none")}static enableDrag(){P.docStyle&&P.selectProp&&(P.docStyle[P.selectProp]=P.userSelect)}static setTransform(a,c){a.style[P.transformProp]=c}static addEventListener(a,c,_,M={}){a.addEventListener(c,_,"passive"in M?M:M.capture)}static removeEventListener(a,c,_,M={}){a.removeEventListener(c,_,"passive"in M?M:M.capture)}static suppressClickInternal(a){a.preventDefault(),a.stopPropagation(),window.removeEventListener("click",P.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",P.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",P.suppressClickInternal,!0)},0)}static getScale(a){const c=a.getBoundingClientRect();return{x:c.width/a.offsetWidth||1,y:c.height/a.offsetHeight||1,boundingClientRect:c}}static getPoint(a,c,_){const M=c.boundingClientRect;return new o.P((_.clientX-M.left)/c.x-a.clientLeft,(_.clientY-M.top)/c.y-a.clientTop)}static mousePos(a,c){const _=P.getScale(a);return P.getPoint(a,_,c)}static touchPos(a,c){const _=[],M=P.getScale(a);for(let T=0;T<c.length;T++)_.push(P.getPoint(a,M,c[T]));return _}static mouseButton(a){return a.button}static remove(a){a.parentNode&&a.parentNode.removeChild(a)}static sanitize(a){const c=new DOMParser().parseFromString(a,"text/html").body||document.createElement("body"),_=c.querySelectorAll("script");for(const M of _)M.remove();return P.clean(c),c.innerHTML}static isPossiblyDangerous(a,c){const _=c.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(a)||!_.includes("javascript:")&&!_.includes("data:"))||!!a.startsWith("on")||void 0}static clean(a){const c=a.children;for(const _ of c)P.removeAttributes(_),P.clean(_)}static removeAttributes(a){for(const{name:c,value:_}of a.attributes)P.isPossiblyDangerous(c,_)&&a.removeAttribute(c)}}P.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,P.selectProp=P.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),P.transformProp=P.testProp(["transform","WebkitTransform"]);const U={supported:!1,testSupport:function(I){!Y&&N&&(H?se(I):j=I)}};let j,N,Y=!1,H=!1;function se(I){const a=I.createTexture();I.bindTexture(I.TEXTURE_2D,a);try{if(I.texImage2D(I.TEXTURE_2D,0,I.RGBA,I.RGBA,I.UNSIGNED_BYTE,N),I.isContextLost())return;U.supported=!0}catch{}I.deleteTexture(a),Y=!0}var re;typeof document<"u"&&(N=document.createElement("img"),N.onload=()=>{j&&se(j),j=null,H=!0},N.onerror=()=>{Y=!0,j=null},N.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(I){let a,c,_,M;I.resetRequestQueue=()=>{a=[],c=0,_=0,M={}},I.addThrottleControl=te=>{const ae=_++;return M[ae]=te,ae},I.removeThrottleControl=te=>{delete M[te],z()},I.getImage=(te,ae,be=!0)=>new Promise((ke,Te)=>{U.supported&&(te.headers||(te.headers={}),te.headers.accept="image/webp,*/*"),o.e(te,{type:"image"}),a.push({abortController:ae,requestParameters:te,supportImageRefresh:be,state:"queued",onError:$e=>{Te($e)},onSuccess:$e=>{ke($e)}}),z()});const T=te=>o._(this,void 0,void 0,function*(){te.state="running";const{requestParameters:ae,supportImageRefresh:be,onError:ke,onSuccess:Te,abortController:$e}=te,Xe=be===!1&&!o.i(self)&&!o.g(ae.url)&&(!ae.headers||Object.keys(ae.headers).reduce((ft,vt)=>ft&&vt==="accept",!0));c++;const mt=Xe?q(ae,$e):o.m(ae,$e);try{const ft=yield mt;delete te.abortController,te.state="completed",ft.data instanceof HTMLImageElement||o.b(ft.data)?Te(ft):ft.data&&Te({data:yield(ut=ft.data,typeof createImageBitmap=="function"?o.f(ut):o.h(ut)),cacheControl:ft.cacheControl,expires:ft.expires})}catch(ft){delete te.abortController,ke(ft)}finally{c--,z()}var ut}),z=()=>{const te=(()=>{for(const ae of Object.keys(M))if(M[ae]())return!0;return!1})()?o.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:o.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let ae=c;ae<te&&a.length>0;ae++){const be=a.shift();be.abortController.signal.aborted?ae--:T(be)}},q=(te,ae)=>new Promise((be,ke)=>{const Te=new Image,$e=te.url,Xe=te.credentials;Xe&&Xe==="include"?Te.crossOrigin="use-credentials":(Xe&&Xe==="same-origin"||!o.d($e))&&(Te.crossOrigin="anonymous"),ae.signal.addEventListener("abort",()=>{Te.src="",ke(o.c())}),Te.fetchPriority="high",Te.onload=()=>{Te.onerror=Te.onload=null,be({data:Te})},Te.onerror=()=>{Te.onerror=Te.onload=null,ae.signal.aborted||ke(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},Te.src=$e})}(re||(re={})),re.resetRequestQueue();class V{constructor(a){this._transformRequestFn=a}transformRequest(a,c){return this._transformRequestFn&&this._transformRequestFn(a,c)||{url:a}}setTransformRequest(a){this._transformRequestFn=a}}function ne(I){const a=[];if(typeof I=="string")a.push({id:"default",url:I});else if(I&&I.length>0){const c=[];for(const{id:_,url:M}of I){const T=`${_}${M}`;c.indexOf(T)===-1&&(c.push(T),a.push({id:_,url:M}))}}return a}function G(I,a,c){try{const _=new URL(I);return _.pathname+=`${a}${c}`,_.toString()}catch{throw new Error(`Invalid sprite URL "${I}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}class oe{constructor(a,c,_,M){this.context=a,this.format=_,this.texture=a.gl.createTexture(),this.update(c,M)}update(a,c,_){const{width:M,height:T}=a,z=!(this.size&&this.size[0]===M&&this.size[1]===T||_),{context:q}=this,{gl:te}=q;if(this.useMipmap=!!(c&&c.useMipmap),te.bindTexture(te.TEXTURE_2D,this.texture),q.pixelStoreUnpackFlipY.set(!1),q.pixelStoreUnpack.set(1),q.pixelStoreUnpackPremultiplyAlpha.set(this.format===te.RGBA&&(!c||c.premultiply!==!1)),z)this.size=[M,T],a instanceof HTMLImageElement||a instanceof HTMLCanvasElement||a instanceof HTMLVideoElement||a instanceof ImageData||o.b(a)?te.texImage2D(te.TEXTURE_2D,0,this.format,this.format,te.UNSIGNED_BYTE,a):te.texImage2D(te.TEXTURE_2D,0,this.format,M,T,0,this.format,te.UNSIGNED_BYTE,a.data);else{const{x:ae,y:be}=_||{x:0,y:0};a instanceof HTMLImageElement||a instanceof HTMLCanvasElement||a instanceof HTMLVideoElement||a instanceof ImageData||o.b(a)?te.texSubImage2D(te.TEXTURE_2D,0,ae,be,te.RGBA,te.UNSIGNED_BYTE,a):te.texSubImage2D(te.TEXTURE_2D,0,ae,be,M,T,te.RGBA,te.UNSIGNED_BYTE,a.data)}this.useMipmap&&this.isSizePowerOfTwo()&&te.generateMipmap(te.TEXTURE_2D)}bind(a,c,_){const{context:M}=this,{gl:T}=M;T.bindTexture(T.TEXTURE_2D,this.texture),_!==T.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(_=T.LINEAR),a!==this.filter&&(T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MAG_FILTER,a),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MIN_FILTER,_||a),this.filter=a),c!==this.wrap&&(T.texParameteri(T.TEXTURE_2D,T.TEXTURE_WRAP_S,c),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_WRAP_T,c),this.wrap=c)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:a}=this.context;a.deleteTexture(this.texture),this.texture=null}}function he(I){const{userImage:a}=I;return!!(a&&a.render&&a.render())&&(I.data.replace(new Uint8Array(a.data.buffer)),!0)}class fe extends o.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new o.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(a){if(this.loaded!==a&&(this.loaded=a,a)){for(const{ids:c,promiseResolve:_}of this.requestors)_(this._getImagesForIds(c));this.requestors=[]}}getImage(a){const c=this.images[a];if(c&&!c.data&&c.spriteData){const _=c.spriteData;c.data=new o.R({width:_.width,height:_.height},_.context.getImageData(_.x,_.y,_.width,_.height).data),c.spriteData=null}return c}addImage(a,c){if(this.images[a])throw new Error(`Image id ${a} already exist, use updateImage instead`);this._validate(a,c)&&(this.images[a]=c)}_validate(a,c){let _=!0;const M=c.data||c.spriteData;return this._validateStretch(c.stretchX,M&&M.width)||(this.fire(new o.k(new Error(`Image "${a}" has invalid "stretchX" value`))),_=!1),this._validateStretch(c.stretchY,M&&M.height)||(this.fire(new o.k(new Error(`Image "${a}" has invalid "stretchY" value`))),_=!1),this._validateContent(c.content,c)||(this.fire(new o.k(new Error(`Image "${a}" has invalid "content" value`))),_=!1),_}_validateStretch(a,c){if(!a)return!0;let _=0;for(const M of a){if(M[0]<_||M[1]<M[0]||c<M[1])return!1;_=M[1]}return!0}_validateContent(a,c){if(!a)return!0;if(a.length!==4)return!1;const _=c.spriteData,M=_&&_.width||c.data.width,T=_&&_.height||c.data.height;return!(a[0]<0||M<a[0]||a[1]<0||T<a[1]||a[2]<0||M<a[2]||a[3]<0||T<a[3]||a[2]<a[0]||a[3]<a[1])}updateImage(a,c,_=!0){const M=this.getImage(a);if(_&&(M.data.width!==c.data.width||M.data.height!==c.data.height))throw new Error(`size mismatch between old image (${M.data.width}x${M.data.height}) and new image (${c.data.width}x${c.data.height}).`);c.version=M.version+1,this.images[a]=c,this.updatedImages[a]=!0}removeImage(a){const c=this.images[a];delete this.images[a],delete this.patterns[a],c.userImage&&c.userImage.onRemove&&c.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(a){return new Promise((c,_)=>{let M=!0;if(!this.isLoaded())for(const T of a)this.images[T]||(M=!1);this.isLoaded()||M?c(this._getImagesForIds(a)):this.requestors.push({ids:a,promiseResolve:c})})}_getImagesForIds(a){const c={};for(const _ of a){let M=this.getImage(_);M||(this.fire(new o.l("styleimagemissing",{id:_})),M=this.getImage(_)),M?c[_]={data:M.data.clone(),pixelRatio:M.pixelRatio,sdf:M.sdf,version:M.version,stretchX:M.stretchX,stretchY:M.stretchY,content:M.content,textFitWidth:M.textFitWidth,textFitHeight:M.textFitHeight,hasRenderCallback:!!(M.userImage&&M.userImage.render)}:o.w(`Image "${_}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return c}getPixelSize(){const{width:a,height:c}=this.atlasImage;return{width:a,height:c}}getPattern(a){const c=this.patterns[a],_=this.getImage(a);if(!_)return null;if(c&&c.position.version===_.version)return c.position;if(c)c.position.version=_.version;else{const M={w:_.data.width+2,h:_.data.height+2,x:0,y:0},T=new o.I(M,_);this.patterns[a]={bin:M,position:T}}return this._updatePatternAtlas(),this.patterns[a].position}bind(a){const c=a.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new oe(a,this.atlasImage,c.RGBA),this.atlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE)}_updatePatternAtlas(){const a=[];for(const T in this.patterns)a.push(this.patterns[T].bin);const{w:c,h:_}=o.p(a),M=this.atlasImage;M.resize({width:c||1,height:_||1});for(const T in this.patterns){const{bin:z}=this.patterns[T],q=z.x+1,te=z.y+1,ae=this.getImage(T).data,be=ae.width,ke=ae.height;o.R.copy(ae,M,{x:0,y:0},{x:q,y:te},{width:be,height:ke}),o.R.copy(ae,M,{x:0,y:ke-1},{x:q,y:te-1},{width:be,height:1}),o.R.copy(ae,M,{x:0,y:0},{x:q,y:te+ke},{width:be,height:1}),o.R.copy(ae,M,{x:be-1,y:0},{x:q-1,y:te},{width:1,height:ke}),o.R.copy(ae,M,{x:0,y:0},{x:q+be,y:te},{width:1,height:ke})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(a){for(const c of a){if(this.callbackDispatchedThisFrame[c])continue;this.callbackDispatchedThisFrame[c]=!0;const _=this.getImage(c);_||o.w(`Image with ID: "${c}" was not found`),he(_)&&this.updateImage(c,_)}}}const Ee=1e20;function me(I,a,c,_,M,T,z,q,te){for(let ae=a;ae<a+_;ae++)Se(I,c*T+ae,T,M,z,q,te);for(let ae=c;ae<c+M;ae++)Se(I,ae*T+a,1,_,z,q,te)}function Se(I,a,c,_,M,T,z){T[0]=0,z[0]=-1e20,z[1]=Ee,M[0]=I[a];for(let q=1,te=0,ae=0;q<_;q++){M[q]=I[a+q*c];const be=q*q;do{const ke=T[te];ae=(M[q]-M[ke]+be-ke*ke)/(q-ke)/2}while(ae<=z[te]&&--te>-1);te++,T[te]=q,z[te]=ae,z[te+1]=Ee}for(let q=0,te=0;q<_;q++){for(;z[te+1]<q;)te++;const ae=T[te],be=q-ae;I[a+q*c]=M[ae]+be*be}}class Ke{constructor(a,c){this.requestManager=a,this.localIdeographFontFamily=c,this.entries={}}setURL(a){this.url=a}getGlyphs(a){return o._(this,void 0,void 0,function*(){const c=[];for(const T in a)for(const z of a[T])c.push(this._getAndCacheGlyphsPromise(T,z));const _=yield Promise.all(c),M={};for(const{stack:T,id:z,glyph:q}of _)M[T]||(M[T]={}),M[T][z]=q&&{id:q.id,bitmap:q.bitmap.clone(),metrics:q.metrics};return M})}_getAndCacheGlyphsPromise(a,c){return o._(this,void 0,void 0,function*(){let _=this.entries[a];_||(_=this.entries[a]={glyphs:{},requests:{},ranges:{}});let M=_.glyphs[c];if(M!==void 0)return{stack:a,id:c,glyph:M};if(M=this._tinySDF(_,a,c),M)return _.glyphs[c]=M,{stack:a,id:c,glyph:M};const T=Math.floor(c/256);if(256*T>65535)throw new Error("glyphs > 65535 not supported");if(_.ranges[T])return{stack:a,id:c,glyph:M};if(!this.url)throw new Error("glyphsUrl is not set");if(!_.requests[T]){const q=Ke.loadGlyphRange(a,T,this.url,this.requestManager);_.requests[T]=q}const z=yield _.requests[T];for(const q in z)this._doesCharSupportLocalGlyph(+q)||(_.glyphs[+q]=z[+q]);return _.ranges[T]=!0,{stack:a,id:c,glyph:z[c]||null}})}_doesCharSupportLocalGlyph(a){return!!this.localIdeographFontFamily&&(new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(a))||o.u["CJK Unified Ideographs"](a)||o.u["Hangul Syllables"](a)||o.u.Hiragana(a)||o.u.Katakana(a)||o.u["CJK Symbols and Punctuation"](a)||o.u["Halfwidth and Fullwidth Forms"](a))}_tinySDF(a,c,_){const M=this.localIdeographFontFamily;if(!M||!this._doesCharSupportLocalGlyph(_))return;let T=a.tinySDF;if(!T){let q="400";/bold/i.test(c)?q="900":/medium/i.test(c)?q="500":/light/i.test(c)&&(q="200"),T=a.tinySDF=new Ke.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:M,fontWeight:q})}const z=T.draw(String.fromCharCode(_));return{id:_,bitmap:new o.q({width:z.width||60,height:z.height||60},z.data),metrics:{width:z.glyphWidth/2||24,height:z.glyphHeight/2||24,left:z.glyphLeft/2+.5||0,top:z.glyphTop/2-27.5||-8,advance:z.glyphAdvance/2||24,isDoubleResolution:!0}}}}Ke.loadGlyphRange=function(I,a,c,_){return o._(this,void 0,void 0,function*(){const M=256*a,T=M+255,z=_.transformRequest(c.replace("{fontstack}",I).replace("{range}",`${M}-${T}`),"Glyphs"),q=yield o.n(z,new AbortController);if(!q||!q.data)throw new Error(`Could not load glyph range. range: ${a}, ${M}-${T}`);const te={};for(const ae of o.o(q.data))te[ae.id]=ae;return te})},Ke.TinySDF=class{constructor({fontSize:I=24,buffer:a=3,radius:c=8,cutoff:_=.25,fontFamily:M="sans-serif",fontWeight:T="normal",fontStyle:z="normal"}={}){this.buffer=a,this.cutoff=_,this.radius=c;const q=this.size=I+4*a,te=this._createCanvas(q),ae=this.ctx=te.getContext("2d",{willReadFrequently:!0});ae.font=`${z} ${T} ${I}px ${M}`,ae.textBaseline="alphabetic",ae.textAlign="left",ae.fillStyle="black",this.gridOuter=new Float64Array(q*q),this.gridInner=new Float64Array(q*q),this.f=new Float64Array(q),this.z=new Float64Array(q+1),this.v=new Uint16Array(q)}_createCanvas(I){const a=document.createElement("canvas");return a.width=a.height=I,a}draw(I){const{width:a,actualBoundingBoxAscent:c,actualBoundingBoxDescent:_,actualBoundingBoxLeft:M,actualBoundingBoxRight:T}=this.ctx.measureText(I),z=Math.ceil(c),q=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(T-M))),te=Math.min(this.size-this.buffer,z+Math.ceil(_)),ae=q+2*this.buffer,be=te+2*this.buffer,ke=Math.max(ae*be,0),Te=new Uint8ClampedArray(ke),$e={data:Te,width:ae,height:be,glyphWidth:q,glyphHeight:te,glyphTop:z,glyphLeft:0,glyphAdvance:a};if(q===0||te===0)return $e;const{ctx:Xe,buffer:mt,gridInner:ut,gridOuter:ft}=this;Xe.clearRect(mt,mt,q,te),Xe.fillText(I,mt,mt+z);const vt=Xe.getImageData(mt,mt,q,te);ft.fill(Ee,0,ke),ut.fill(0,0,ke);for(let Et=0;Et<te;Et++)for(let kt=0;kt<q;kt++){const Rt=vt.data[4*(Et*q+kt)+3]/255;if(Rt===0)continue;const Ut=(Et+mt)*ae+kt+mt;if(Rt===1)ft[Ut]=0,ut[Ut]=Ee;else{const It=.5-Rt;ft[Ut]=It>0?It*It:0,ut[Ut]=It<0?It*It:0}}me(ft,0,0,ae,be,ae,this.f,this.v,this.z),me(ut,mt,mt,q,te,ae,this.f,this.v,this.z);for(let Et=0;Et<ke;Et++){const kt=Math.sqrt(ft[Et])-Math.sqrt(ut[Et]);Te[Et]=Math.round(255-255*(kt/this.radius+this.cutoff))}return $e}};class xe{constructor(){this.specification=o.v.light.position}possiblyEvaluate(a,c){return o.z(a.expression.evaluate(c))}interpolate(a,c,_){return{x:o.B.number(a.x,c.x,_),y:o.B.number(a.y,c.y,_),z:o.B.number(a.z,c.z,_)}}}let at;class Ze extends o.E{constructor(a){super(),at=at||new o.r({anchor:new o.D(o.v.light.anchor),position:new xe,color:new o.D(o.v.light.color),intensity:new o.D(o.v.light.intensity)}),this._transitionable=new o.T(at),this.setLight(a),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(a,c={}){if(!this._validate(o.t,a,c))for(const _ in a){const M=a[_];_.endsWith("-transition")?this._transitionable.setTransition(_.slice(0,-11),M):this._transitionable.setValue(_,M)}}updateTransitions(a){this._transitioning=this._transitionable.transitioned(a,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(a){this.properties=this._transitioning.possiblyEvaluate(a)}_validate(a,c,_){return(!_||_.validate!==!1)&&o.x(this,a.call(o.y,{value:c,style:{glyphs:!0,sprite:!0},styleSpec:o.v}))}}const Je=new o.r({"sky-color":new o.D(o.v.sky["sky-color"]),"horizon-color":new o.D(o.v.sky["horizon-color"]),"fog-color":new o.D(o.v.sky["fog-color"]),"fog-ground-blend":new o.D(o.v.sky["fog-ground-blend"]),"horizon-fog-blend":new o.D(o.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new o.D(o.v.sky["sky-horizon-blend"]),"atmosphere-blend":new o.D(o.v.sky["atmosphere-blend"])});class Ne extends o.E{constructor(a){super(),this._transitionable=new o.T(Je),this.setSky(a),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new o.C(0))}setSky(a,c={}){if(!this._validate(o.F,a,c)){a||(a={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const _ in a){const M=a[_];_.endsWith("-transition")?this._transitionable.setTransition(_.slice(0,-11),M):this._transitionable.setValue(_,M)}}}getSky(){return this._transitionable.serialize()}updateTransitions(a){this._transitioning=this._transitionable.transitioned(a,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(a){this.properties=this._transitioning.possiblyEvaluate(a)}_validate(a,c,_={}){return(_==null?void 0:_.validate)!==!1&&o.x(this,a.call(o.y,o.e({value:c,style:{glyphs:!0,sprite:!0},styleSpec:o.v})))}calculateFogBlendOpacity(a){return a<60?0:a<70?(a-60)/10:1}}class we{constructor(a,c){this.width=a,this.height=c,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(a,c){const _=a.join(",")+String(c);return this.dashEntry[_]||(this.dashEntry[_]=this.addDash(a,c)),this.dashEntry[_]}getDashRanges(a,c,_){const M=[];let T=a.length%2==1?-a[a.length-1]*_:0,z=a[0]*_,q=!0;M.push({left:T,right:z,isDash:q,zeroLength:a[0]===0});let te=a[0];for(let ae=1;ae<a.length;ae++){q=!q;const be=a[ae];T=te*_,te+=be,z=te*_,M.push({left:T,right:z,isDash:q,zeroLength:be===0})}return M}addRoundDash(a,c,_){const M=c/2;for(let T=-_;T<=_;T++){const z=this.width*(this.nextRow+_+T);let q=0,te=a[q];for(let ae=0;ae<this.width;ae++){ae/te.right>1&&(te=a[++q]);const be=Math.abs(ae-te.left),ke=Math.abs(ae-te.right),Te=Math.min(be,ke);let $e;const Xe=T/_*(M+1);if(te.isDash){const mt=M-Math.abs(Xe);$e=Math.sqrt(Te*Te+mt*mt)}else $e=M-Math.sqrt(Te*Te+Xe*Xe);this.data[z+ae]=Math.max(0,Math.min(255,$e+128))}}}addRegularDash(a){for(let q=a.length-1;q>=0;--q){const te=a[q],ae=a[q+1];te.zeroLength?a.splice(q,1):ae&&ae.isDash===te.isDash&&(ae.left=te.left,a.splice(q,1))}const c=a[0],_=a[a.length-1];c.isDash===_.isDash&&(c.left=_.left-this.width,_.right=c.right+this.width);const M=this.width*this.nextRow;let T=0,z=a[T];for(let q=0;q<this.width;q++){q/z.right>1&&(z=a[++T]);const te=Math.abs(q-z.left),ae=Math.abs(q-z.right),be=Math.min(te,ae);this.data[M+q]=Math.max(0,Math.min(255,(z.isDash?be:-be)+128))}}addDash(a,c){const _=c?7:0,M=2*_+1;if(this.nextRow+M>this.height)return o.w("LineAtlas out of space"),null;let T=0;for(let q=0;q<a.length;q++)T+=a[q];if(T!==0){const q=this.width/T,te=this.getDashRanges(a,this.width,q);c?this.addRoundDash(te,q,_):this.addRegularDash(te)}const z={y:(this.nextRow+_+.5)/this.height,height:2*_/this.height,width:T};return this.nextRow+=M,this.dirty=!0,z}bind(a){const c=a.gl;this.texture?(c.bindTexture(c.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,c.texSubImage2D(c.TEXTURE_2D,0,0,0,this.width,this.height,c.ALPHA,c.UNSIGNED_BYTE,this.data))):(this.texture=c.createTexture(),c.bindTexture(c.TEXTURE_2D,this.texture),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texImage2D(c.TEXTURE_2D,0,c.ALPHA,this.width,this.height,0,c.ALPHA,c.UNSIGNED_BYTE,this.data))}}const De="maplibre_preloaded_worker_pool";class He{constructor(){this.active={}}acquire(a){if(!this.workers)for(this.workers=[];this.workers.length<He.workerCount;)this.workers.push(new Worker(o.a.WORKER_URL));return this.active[a]=!0,this.workers.slice()}release(a){delete this.active[a],this.numActive()===0&&(this.workers.forEach(c=>{c.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[De]}numActive(){return Object.keys(this.active).length}}const bt=Math.floor(O.hardwareConcurrency/2);let Yt,yt;function Ft(){return Yt||(Yt=new He),Yt}He.workerCount=o.G(globalThis)?Math.max(Math.min(bt,3),1):1;class Pt{constructor(a,c){this.workerPool=a,this.actors=[],this.currentActor=0,this.id=c;const _=this.workerPool.acquire(c);for(let M=0;M<_.length;M++){const T=new o.H(_[M],c);T.name=`Worker ${M}`,this.actors.push(T)}if(!this.actors.length)throw new Error("No actors found")}broadcast(a,c){const _=[];for(const M of this.actors)_.push(M.sendAsync({type:a,data:c}));return Promise.all(_)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(a=!0){this.actors.forEach(c=>{c.remove()}),this.actors=[],a&&this.workerPool.release(this.id)}registerMessageHandler(a,c){for(const _ of this.actors)_.registerMessageHandler(a,c)}}function Ue(){return yt||(yt=new Pt(Ft(),o.J),yt.registerMessageHandler("GR",(I,a,c)=>o.m(a,c))),yt}function Pe(I,a){const c=o.K();return o.L(c,c,[1,1,0]),o.M(c,c,[.5*I.width,.5*I.height,1]),I.calculatePosMatrix?o.N(c,c,I.calculatePosMatrix(a.toUnwrapped())):c}function Be(I,a,c,_,M,T){var z;const q=function(ke,Te,$e){if(ke)for(const Xe of ke){const mt=Te[Xe];if(mt&&mt.source===$e&&mt.type==="fill-extrusion")return!0}else for(const Xe in Te){const mt=Te[Xe];if(mt.source===$e&&mt.type==="fill-extrusion")return!0}return!1}((z=M==null?void 0:M.layers)!==null&&z!==void 0?z:null,a,I.id),te=T.maxPitchScaleFactor(),ae=I.tilesIn(_,te,q);ae.sort(it);const be=[];for(const ke of ae)be.push({wrappedTileID:ke.tileID.wrapped().key,queryResults:ke.tile.queryRenderedFeatures(a,c,I._state,ke.queryGeometry,ke.cameraQueryGeometry,ke.scale,M,T,te,Pe(I.transform,ke.tileID))});return function(ke,Te){for(const $e in ke)for(const Xe of ke[$e])_t(Xe,Te);return ke}(function(ke){const Te={},$e={};for(const Xe of ke){const mt=Xe.queryResults,ut=Xe.wrappedTileID,ft=$e[ut]=$e[ut]||{};for(const vt in mt){const Et=mt[vt],kt=ft[vt]=ft[vt]||{},Rt=Te[vt]=Te[vt]||[];for(const Ut of Et)kt[Ut.featureIndex]||(kt[Ut.featureIndex]=!0,Rt.push(Ut))}}return Te}(be),I)}function it(I,a){const c=I.tileID,_=a.tileID;return c.overscaledZ-_.overscaledZ||c.canonical.y-_.canonical.y||c.wrap-_.wrap||c.canonical.x-_.canonical.x}function _t(I,a){const c=I.feature,_=a.getFeatureState(c.layer["source-layer"],c.id);c.source=c.layer.source,c.layer["source-layer"]&&(c.sourceLayer=c.layer["source-layer"]),c.state=_}function pt(I,a,c){return o._(this,void 0,void 0,function*(){let _=I;if(I.url?_=(yield o.j(a.transformRequest(I.url,"Source"),c)).data:yield O.frameAsync(c),!_)return null;const M=o.O(o.e(_,I),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in _&&_.vector_layers&&(M.vectorLayerIds=_.vector_layers.map(T=>T.id)),M})}class Lt{constructor(a,c){a&&(c?this.setSouthWest(a).setNorthEast(c):Array.isArray(a)&&(a.length===4?this.setSouthWest([a[0],a[1]]).setNorthEast([a[2],a[3]]):this.setSouthWest(a[0]).setNorthEast(a[1])))}setNorthEast(a){return this._ne=a instanceof o.Q?new o.Q(a.lng,a.lat):o.Q.convert(a),this}setSouthWest(a){return this._sw=a instanceof o.Q?new o.Q(a.lng,a.lat):o.Q.convert(a),this}extend(a){const c=this._sw,_=this._ne;let M,T;if(a instanceof o.Q)M=a,T=a;else{if(!(a instanceof Lt))return Array.isArray(a)?a.length===4||a.every(Array.isArray)?this.extend(Lt.convert(a)):this.extend(o.Q.convert(a)):a&&("lng"in a||"lon"in a)&&"lat"in a?this.extend(o.Q.convert(a)):this;if(M=a._sw,T=a._ne,!M||!T)return this}return c||_?(c.lng=Math.min(M.lng,c.lng),c.lat=Math.min(M.lat,c.lat),_.lng=Math.max(T.lng,_.lng),_.lat=Math.max(T.lat,_.lat)):(this._sw=new o.Q(M.lng,M.lat),this._ne=new o.Q(T.lng,T.lat)),this}getCenter(){return new o.Q((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new o.Q(this.getWest(),this.getNorth())}getSouthEast(){return new o.Q(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(a){const{lng:c,lat:_}=o.Q.convert(a);let M=this._sw.lng<=c&&c<=this._ne.lng;return this._sw.lng>this._ne.lng&&(M=this._sw.lng>=c&&c>=this._ne.lng),this._sw.lat<=_&&_<=this._ne.lat&&M}static convert(a){return a instanceof Lt?a:a&&new Lt(a)}static fromLngLat(a,c=0){const _=360*c/40075017,M=_/Math.cos(Math.PI/180*a.lat);return new Lt(new o.Q(a.lng-M,a.lat-_),new o.Q(a.lng+M,a.lat+_))}adjustAntiMeridian(){const a=new o.Q(this._sw.lng,this._sw.lat),c=new o.Q(this._ne.lng,this._ne.lat);return new Lt(a,a.lng>c.lng?new o.Q(c.lng+360,c.lat):c)}}class nn{constructor(a,c,_){this.bounds=Lt.convert(this.validateBounds(a)),this.minzoom=c||0,this.maxzoom=_||24}validateBounds(a){return Array.isArray(a)&&a.length===4?[Math.max(-180,a[0]),Math.max(-90,a[1]),Math.min(180,a[2]),Math.min(90,a[3])]:[-180,-90,180,90]}contains(a){const c=Math.pow(2,a.z),_=Math.floor(o.U(this.bounds.getWest())*c),M=Math.floor(o.S(this.bounds.getNorth())*c),T=Math.ceil(o.U(this.bounds.getEast())*c),z=Math.ceil(o.S(this.bounds.getSouth())*c);return a.x>=_&&a.x<T&&a.y>=M&&a.y<z}}class Kt extends o.E{constructor(a,c,_,M){if(super(),this.id=a,this.dispatcher=_,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,o.e(this,o.O(c,["url","scheme","tileSize","promoteId"])),this._options=o.e({type:"vector"},c),this._collectResourceTiming=c.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(M)}load(){return o._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new o.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const a=yield pt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),a&&(o.e(this,a),a.bounds&&(this.tileBounds=new nn(a.bounds,this.minzoom,this.maxzoom)),this.fire(new o.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.l("data",{dataType:"source",sourceDataType:"content"})))}catch(a){this._tileJSONRequest=null,this.fire(new o.k(a))}})}loaded(){return this._loaded}hasTile(a){return!this.tileBounds||this.tileBounds.contains(a.canonical)}onAdd(a){this.map=a,this.load()}setSourceProperty(a){this._tileJSONRequest&&this._tileJSONRequest.abort(),a(),this.load()}setTiles(a){return this.setSourceProperty(()=>{this._options.tiles=a}),this}setUrl(a){return this.setSourceProperty(()=>{this.url=a,this._options.url=a}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return o.e({},this._options)}loadTile(a){return o._(this,void 0,void 0,function*(){const c=a.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),_={request:this.map._requestManager.transformRequest(c,"Tile"),uid:a.uid,tileID:a.tileID,zoom:a.tileID.overscaledZ,tileSize:this.tileSize*a.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};_.request.collectResourceTiming=this._collectResourceTiming;let M="RT";if(a.actor&&a.state!=="expired"){if(a.state==="loading")return new Promise((T,z)=>{a.reloadPromise={resolve:T,reject:z}})}else a.actor=this.dispatcher.getActor(),M="LT";a.abortController=new AbortController;try{const T=yield a.actor.sendAsync({type:M,data:_},a.abortController);if(delete a.abortController,a.aborted)return;this._afterTileLoadWorkerResponse(a,T)}catch(T){if(delete a.abortController,a.aborted)return;if(T&&T.status!==404)throw T;this._afterTileLoadWorkerResponse(a,null)}})}_afterTileLoadWorkerResponse(a,c){if(c&&c.resourceTiming&&(a.resourceTiming=c.resourceTiming),c&&this.map._refreshExpiredTiles&&a.setExpiryData(c),a.loadVectorData(c,this.map.painter),a.reloadPromise){const _=a.reloadPromise;a.reloadPromise=null,this.loadTile(a).then(_.resolve).catch(_.reject)}}abortTile(a){return o._(this,void 0,void 0,function*(){a.abortController&&(a.abortController.abort(),delete a.abortController),a.actor&&(yield a.actor.sendAsync({type:"AT",data:{uid:a.uid,type:this.type,source:this.id}}))})}unloadTile(a){return o._(this,void 0,void 0,function*(){a.unloadVectorData(),a.actor&&(yield a.actor.sendAsync({type:"RMT",data:{uid:a.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class vn extends o.E{constructor(a,c,_,M){super(),this.id=a,this.dispatcher=_,this.setEventedParent(M),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=o.e({type:"raster"},c),o.e(this,o.O(c,["url","scheme","tileSize"]))}load(){return o._(this,arguments,void 0,function*(a=!1){this._loaded=!1,this.fire(new o.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const c=yield pt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,c&&(o.e(this,c),c.bounds&&(this.tileBounds=new nn(c.bounds,this.minzoom,this.maxzoom)),this.fire(new o.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:a})))}catch(c){this._tileJSONRequest=null,this.fire(new o.k(c))}})}loaded(){return this._loaded}onAdd(a){this.map=a,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(a){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),a(),this.load(!0)}setTiles(a){return this.setSourceProperty(()=>{this._options.tiles=a}),this}setUrl(a){return this.setSourceProperty(()=>{this.url=a,this._options.url=a}),this}serialize(){return o.e({},this._options)}hasTile(a){return!this.tileBounds||this.tileBounds.contains(a.canonical)}loadTile(a){return o._(this,void 0,void 0,function*(){const c=a.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);a.abortController=new AbortController;try{const _=yield re.getImage(this.map._requestManager.transformRequest(c,"Tile"),a.abortController,this.map._refreshExpiredTiles);if(delete a.abortController,a.aborted)return void(a.state="unloaded");if(_&&_.data){this.map._refreshExpiredTiles&&_.cacheControl&&_.expires&&a.setExpiryData({cacheControl:_.cacheControl,expires:_.expires});const M=this.map.painter.context,T=M.gl,z=_.data;a.texture=this.map.painter.getTileTexture(z.width),a.texture?a.texture.update(z,{useMipmap:!0}):(a.texture=new oe(M,z,T.RGBA,{useMipmap:!0}),a.texture.bind(T.LINEAR,T.CLAMP_TO_EDGE,T.LINEAR_MIPMAP_NEAREST)),a.state="loaded"}}catch(_){if(delete a.abortController,a.aborted)a.state="unloaded";else if(_)throw a.state="errored",_}})}abortTile(a){return o._(this,void 0,void 0,function*(){a.abortController&&(a.abortController.abort(),delete a.abortController)})}unloadTile(a){return o._(this,void 0,void 0,function*(){a.texture&&this.map.painter.saveTileTexture(a.texture)})}hasTransition(){return!1}}class Gn extends vn{constructor(a,c,_,M){super(a,c,_,M),this.type="raster-dem",this.maxzoom=22,this._options=o.e({type:"raster-dem"},c),this.encoding=c.encoding||"mapbox",this.redFactor=c.redFactor,this.greenFactor=c.greenFactor,this.blueFactor=c.blueFactor,this.baseShift=c.baseShift}loadTile(a){return o._(this,void 0,void 0,function*(){const c=a.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),_=this.map._requestManager.transformRequest(c,"Tile");a.neighboringTiles=this._getNeighboringTiles(a.tileID),a.abortController=new AbortController;try{const M=yield re.getImage(_,a.abortController,this.map._refreshExpiredTiles);if(delete a.abortController,a.aborted)return void(a.state="unloaded");if(M&&M.data){const T=M.data;this.map._refreshExpiredTiles&&M.cacheControl&&M.expires&&a.setExpiryData({cacheControl:M.cacheControl,expires:M.expires});const z=o.b(T)&&o.V()?T:yield this.readImageNow(T),q={type:this.type,uid:a.uid,source:this.id,rawImageData:z,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!a.actor||a.state==="expired"){a.actor=this.dispatcher.getActor();const te=yield a.actor.sendAsync({type:"LDT",data:q});a.dem=te,a.needsHillshadePrepare=!0,a.needsTerrainPrepare=!0,a.state="loaded"}}}catch(M){if(delete a.abortController,a.aborted)a.state="unloaded";else if(M)throw a.state="errored",M}})}readImageNow(a){return o._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&o.W()){const c=a.width+2,_=a.height+2;try{return new o.R({width:c,height:_},yield o.X(a,-1,-1,c,_))}catch{}}return O.getImageData(a,1)})}_getNeighboringTiles(a){const c=a.canonical,_=Math.pow(2,c.z),M=(c.x-1+_)%_,T=c.x===0?a.wrap-1:a.wrap,z=(c.x+1+_)%_,q=c.x+1===_?a.wrap+1:a.wrap,te={};return te[new o.Y(a.overscaledZ,T,c.z,M,c.y).key]={backfilled:!1},te[new o.Y(a.overscaledZ,q,c.z,z,c.y).key]={backfilled:!1},c.y>0&&(te[new o.Y(a.overscaledZ,T,c.z,M,c.y-1).key]={backfilled:!1},te[new o.Y(a.overscaledZ,a.wrap,c.z,c.x,c.y-1).key]={backfilled:!1},te[new o.Y(a.overscaledZ,q,c.z,z,c.y-1).key]={backfilled:!1}),c.y+1<_&&(te[new o.Y(a.overscaledZ,T,c.z,M,c.y+1).key]={backfilled:!1},te[new o.Y(a.overscaledZ,a.wrap,c.z,c.x,c.y+1).key]={backfilled:!1},te[new o.Y(a.overscaledZ,q,c.z,z,c.y+1).key]={backfilled:!1}),te}unloadTile(a){return o._(this,void 0,void 0,function*(){a.demTexture&&this.map.painter.saveTileTexture(a.demTexture),a.fbo&&(a.fbo.destroy(),delete a.fbo),a.dem&&delete a.dem,delete a.neighboringTiles,a.state="unloaded",a.actor&&(yield a.actor.sendAsync({type:"RDT",data:{type:this.type,uid:a.uid,source:this.id}}))})}}class tn extends o.E{constructor(a,c,_,M){super(),this.id=a,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=_.getActor(),this.setEventedParent(M),this._data=c.data,this._options=o.e({},c),this._collectResourceTiming=c.collectResourceTiming,c.maxzoom!==void 0&&(this.maxzoom=c.maxzoom),c.type&&(this.type=c.type),c.attribution&&(this.attribution=c.attribution),this.promoteId=c.promoteId,c.clusterMaxZoom!==void 0&&this.maxzoom<=c.clusterMaxZoom&&o.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${c.clusterMaxZoom}".`),this.workerOptions=o.e({source:this.id,cluster:c.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(c.buffer!==void 0?c.buffer:128),tolerance:this._pixelsToTileUnits(c.tolerance!==void 0?c.tolerance:.375),extent:o.Z,maxZoom:this.maxzoom,lineMetrics:c.lineMetrics||!1,generateId:c.generateId||!1},superclusterOptions:{maxZoom:c.clusterMaxZoom!==void 0?c.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,c.clusterMinPoints||2),extent:o.Z,radius:this._pixelsToTileUnits(c.clusterRadius||50),log:!1,generateId:c.generateId||!1},clusterProperties:c.clusterProperties,filter:c.filter},c.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_pixelsToTileUnits(a){return a*(o.Z/this.tileSize)}load(){return o._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(a){this.map=a,this.load()}setData(a){return this._data=a,this._updateWorkerData(),this}updateData(a){return this._updateWorkerData(a),this}getData(){return o._(this,void 0,void 0,function*(){const a=o.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:a})})}setClusterOptions(a){return this.workerOptions.cluster=a.cluster,a&&(a.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(a.clusterRadius)),a.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=a.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(a){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:a,source:this.id}})}getClusterChildren(a){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:a,source:this.id}})}getClusterLeaves(a,c,_){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:a,limit:c,offset:_}})}_updateWorkerData(a){return o._(this,void 0,void 0,function*(){const c=o.e({type:this.type},this.workerOptions);a?c.dataDiff=a:typeof this._data=="string"?(c.request=this.map._requestManager.transformRequest(O.resolveURL(this._data),"Source"),c.request.collectResourceTiming=this._collectResourceTiming):c.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new o.l("dataloading",{dataType:"source"}));try{const _=yield this.actor.sendAsync({type:"LD",data:c});if(this._pendingLoads--,this._removed||_.abandoned)return void this.fire(new o.l("dataabort",{dataType:"source"}));let M=null;_.resourceTiming&&_.resourceTiming[this.id]&&(M=_.resourceTiming[this.id].slice(0));const T={dataType:"source"};this._collectResourceTiming&&M&&M.length>0&&o.e(T,{resourceTiming:M}),this.fire(new o.l("data",Object.assign(Object.assign({},T),{sourceDataType:"metadata"}))),this.fire(new o.l("data",Object.assign(Object.assign({},T),{sourceDataType:"content"})))}catch(_){if(this._pendingLoads--,this._removed)return void this.fire(new o.l("dataabort",{dataType:"source"}));this.fire(new o.k(_))}})}loaded(){return this._pendingLoads===0}loadTile(a){return o._(this,void 0,void 0,function*(){const c=a.actor?"RT":"LT";a.actor=this.actor;const _={type:this.type,uid:a.uid,tileID:a.tileID,zoom:a.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};a.abortController=new AbortController;const M=yield this.actor.sendAsync({type:c,data:_},a.abortController);delete a.abortController,a.unloadVectorData(),a.aborted||a.loadVectorData(M,this.map.painter,c==="RT")})}abortTile(a){return o._(this,void 0,void 0,function*(){a.abortController&&(a.abortController.abort(),delete a.abortController),a.aborted=!0})}unloadTile(a){return o._(this,void 0,void 0,function*(){a.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:a.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return o.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}class dr extends o.E{constructor(a,c,_,M){super(),this.flippedWindingOrder=!1,this.id=a,this.dispatcher=_,this.coordinates=c.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(M),this.options=c}load(a){return o._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new o.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const c=yield re.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,c&&c.data&&(this.image=c.data,a&&(this.coordinates=a),this._finishLoading())}catch(c){this._request=null,this._loaded=!0,this.fire(new o.k(c))}})}loaded(){return this._loaded}updateImage(a){return a.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=a.url,this.load(a.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new o.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(a){this.map=a,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(a){this.coordinates=a;const c=a.map(o.$.fromLngLat);var _;return this.tileID=function(M){let T=1/0,z=1/0,q=-1/0,te=-1/0;for(const Te of M)T=Math.min(T,Te.x),z=Math.min(z,Te.y),q=Math.max(q,Te.x),te=Math.max(te,Te.y);const ae=Math.max(q-T,te-z),be=Math.max(0,Math.floor(-Math.log(ae)/Math.LN2)),ke=Math.pow(2,be);return new o.a0(be,Math.floor((T+q)/2*ke),Math.floor((z+te)/2*ke))}(c),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=c.map(M=>this.tileID.getTilePoint(M)._round()),this.flippedWindingOrder=((_=this.tileCoords)[1].x-_[0].x)*(_[2].y-_[0].y)-(_[1].y-_[0].y)*(_[2].x-_[0].x)<0,this.fire(new o.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const a=this.map.painter.context,c=a.gl;this.texture||(this.texture=new oe(a,this.image,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));let _=!1;for(const M in this.tiles){const T=this.tiles[M];T.state!=="loaded"&&(T.state="loaded",T.texture=this.texture,_=!0)}_&&this.fire(new o.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(a){return o._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(a.tileID.canonical)?(this.tiles[String(a.tileID.wrap)]=a,a.buckets={}):a.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class Pn extends dr{constructor(a,c,_,M){super(a,c,_,M),this.roundZoom=!0,this.type="video",this.options=c}load(){return o._(this,void 0,void 0,function*(){this._loaded=!1;const a=this.options;this.urls=[];for(const c of a.urls)this.urls.push(this.map._requestManager.transformRequest(c,"Source").url);try{const c=yield o.a1(this.urls);if(this._loaded=!0,!c)return;this.video=c,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(c){this.fire(new o.k(c))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(a){if(this.video){const c=this.video.seekable;a<c.start(0)||a>c.end(0)?this.fire(new o.k(new o.a2(`sources.${this.id}`,null,`Playback for this video can be set only between the ${c.start(0)} and ${c.end(0)}-second mark.`))):this.video.currentTime=a}}getVideo(){return this.video}onAdd(a){this.map||(this.map=a,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const a=this.map.painter.context,c=a.gl;this.texture?this.video.paused||(this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE),c.texSubImage2D(c.TEXTURE_2D,0,0,0,c.RGBA,c.UNSIGNED_BYTE,this.video)):(this.texture=new oe(a,this.video,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));let _=!1;for(const M in this.tiles){const T=this.tiles[M];T.state!=="loaded"&&(T.state="loaded",T.texture=this.texture,_=!0)}_&&this.fire(new o.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class pn extends dr{constructor(a,c,_,M){super(a,c,_,M),c.coordinates?Array.isArray(c.coordinates)&&c.coordinates.length===4&&!c.coordinates.some(T=>!Array.isArray(T)||T.length!==2||T.some(z=>typeof z!="number"))||this.fire(new o.k(new o.a2(`sources.${a}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new o.k(new o.a2(`sources.${a}`,null,'missing required property "coordinates"'))),c.animate&&typeof c.animate!="boolean"&&this.fire(new o.k(new o.a2(`sources.${a}`,null,'optional "animate" property must be a boolean value'))),c.canvas?typeof c.canvas=="string"||c.canvas instanceof HTMLCanvasElement||this.fire(new o.k(new o.a2(`sources.${a}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new o.k(new o.a2(`sources.${a}`,null,'missing required property "canvas"'))),this.options=c,this.animate=c.animate===void 0||c.animate}load(){return o._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new o.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(a){this.map=a,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let a=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,a=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,a=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const c=this.map.painter.context,_=c.gl;this.texture?(a||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new oe(c,this.canvas,_.RGBA,{premultiply:!0});let M=!1;for(const T in this.tiles){const z=this.tiles[T];z.state!=="loaded"&&(z.state="loaded",z.texture=this.texture,M=!0)}M&&this.fire(new o.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const a of[this.canvas.width,this.canvas.height])if(isNaN(a)||a<=0)return!0;return!1}}const $n={},lr=I=>{switch(I){case"geojson":return tn;case"image":return dr;case"raster":return vn;case"raster-dem":return Gn;case"vector":return Kt;case"video":return Pn;case"canvas":return pn}return $n[I]},vr="RTLPluginLoaded";class Zn extends o.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=Ue()}_syncState(a){return this.status=a,this.dispatcher.broadcast("SRPS",{pluginStatus:a,pluginURL:this.url}).catch(c=>{throw this.status="error",c})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(a){return o._(this,arguments,void 0,function*(c,_=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=O.resolveURL(c),!this.url)throw new Error(`requested url ${c} is invalid`);if(this.status==="unavailable"){if(!_)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return o._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new o.l(vr))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let Ge=null;function ce(){return Ge||(Ge=new Zn),Ge}class pe{constructor(a,c){this.timeAdded=0,this.fadeEndTime=0,this.tileID=a,this.uid=o.a3(),this.uses=0,this.tileSize=c,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(a){const c=a+this.timeAdded;c<this.fadeEndTime||(this.fadeEndTime=c)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(a){this.demTexture&&a.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(a,c,_){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",a){a.featureIndex&&(this.latestFeatureIndex=a.featureIndex,a.rawTileData?(this.latestRawTileData=a.rawTileData,this.latestFeatureIndex.rawTileData=a.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=a.collisionBoxArray,this.buckets=function(M,T){const z={};if(!T)return z;for(const q of M){const te=q.layerIds.map(ae=>T.getLayer(ae)).filter(Boolean);if(te.length!==0){q.layers=te,q.stateDependentLayerIds&&(q.stateDependentLayers=q.stateDependentLayerIds.map(ae=>te.filter(be=>be.id===ae)[0]));for(const ae of te)z[ae.id]=q}}return z}(a.buckets,c==null?void 0:c.style),this.hasSymbolBuckets=!1;for(const M in this.buckets){const T=this.buckets[M];if(T instanceof o.a5){if(this.hasSymbolBuckets=!0,!_)break;T.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const M in this.buckets){const T=this.buckets[M];if(T instanceof o.a5&&T.hasRTLText){this.hasRTLText=!0,ce().lazyLoad();break}}this.queryPadding=0;for(const M in this.buckets){const T=this.buckets[M];this.queryPadding=Math.max(this.queryPadding,c.style.getLayer(M).queryRadius(T))}a.imageAtlas&&(this.imageAtlas=a.imageAtlas),a.glyphAtlasImage&&(this.glyphAtlasImage=a.glyphAtlasImage)}else this.collisionBoxArray=new o.a4}unloadVectorData(){for(const a in this.buckets)this.buckets[a].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(a){return this.buckets[a.id]}upload(a){for(const _ in this.buckets){const M=this.buckets[_];M.uploadPending()&&M.upload(a)}const c=a.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new oe(a,this.imageAtlas.image,c.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new oe(a,this.glyphAtlasImage,c.ALPHA),this.glyphAtlasImage=null)}prepare(a){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(a,this.imageAtlasTexture)}queryRenderedFeatures(a,c,_,M,T,z,q,te,ae,be){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:M,cameraQueryGeometry:T,scale:z,tileSize:this.tileSize,pixelPosMatrix:be,transform:te,params:q,queryPadding:this.queryPadding*ae},a,c,_):{}}querySourceFeatures(a,c){const _=this.latestFeatureIndex;if(!_||!_.rawTileData)return;const M=_.loadVTLayers(),T=c&&c.sourceLayer?c.sourceLayer:"",z=M._geojsonTileLayer||M[T];if(!z)return;const q=o.a6(c&&c.filter),{z:te,x:ae,y:be}=this.tileID.canonical,ke={z:te,x:ae,y:be};for(let Te=0;Te<z.length;Te++){const $e=z.feature(Te);if(q.needGeometry){const ut=o.a7($e,!0);if(!q.filter(new o.C(this.tileID.overscaledZ),ut,this.tileID.canonical))continue}else if(!q.filter(new o.C(this.tileID.overscaledZ),$e))continue;const Xe=_.getId($e,T),mt=new o.a8($e,te,ae,be,Xe);mt.tile=ke,a.push(mt)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(a){const c=this.expirationTime;if(a.cacheControl){const _=o.a9(a.cacheControl);_["max-age"]&&(this.expirationTime=Date.now()+1e3*_["max-age"])}else a.expires&&(this.expirationTime=new Date(a.expires).getTime());if(this.expirationTime){const _=Date.now();let M=!1;if(this.expirationTime>_)M=!1;else if(c)if(this.expirationTime<c)M=!0;else{const T=this.expirationTime-c;T?this.expirationTime=_+Math.max(T,3e4):M=!0}else M=!0;M?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(a,c){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(a).length===0)return;const _=this.latestFeatureIndex.loadVTLayers();for(const M in this.buckets){if(!c.style.hasLayer(M))continue;const T=this.buckets[M],z=T.layers[0].sourceLayer||"_geojsonTileLayer",q=_[z],te=a[z];if(!q||!te||Object.keys(te).length===0)continue;T.update(te,q,this.imageAtlas&&this.imageAtlas.patternPositions||{});const ae=c&&c.style&&c.style.getLayer(M);ae&&(this.queryPadding=Math.max(this.queryPadding,ae.queryRadius(T)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<O.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(a){this.symbolFadeHoldUntil=O.now()+a}setDependencies(a,c){const _={};for(const M of c)_[M]=!0;this.dependencies[a]=_}hasDependency(a,c){for(const _ of a){const M=this.dependencies[_];if(M){for(const T of c)if(M[T])return!0}}return!1}}class nt{constructor(a,c){this.max=a,this.onRemove=c,this.reset()}reset(){for(const a in this.data)for(const c of this.data[a])c.timeout&&clearTimeout(c.timeout),this.onRemove(c.value);return this.data={},this.order=[],this}add(a,c,_){const M=a.wrapped().key;this.data[M]===void 0&&(this.data[M]=[]);const T={value:c,timeout:void 0};if(_!==void 0&&(T.timeout=setTimeout(()=>{this.remove(a,T)},_)),this.data[M].push(T),this.order.push(M),this.order.length>this.max){const z=this._getAndRemoveByKey(this.order[0]);z&&this.onRemove(z)}return this}has(a){return a.wrapped().key in this.data}getAndRemove(a){return this.has(a)?this._getAndRemoveByKey(a.wrapped().key):null}_getAndRemoveByKey(a){const c=this.data[a].shift();return c.timeout&&clearTimeout(c.timeout),this.data[a].length===0&&delete this.data[a],this.order.splice(this.order.indexOf(a),1),c.value}getByKey(a){const c=this.data[a];return c?c[0].value:null}get(a){return this.has(a)?this.data[a.wrapped().key][0].value:null}remove(a,c){if(!this.has(a))return this;const _=a.wrapped().key,M=c===void 0?0:this.data[_].indexOf(c),T=this.data[_][M];return this.data[_].splice(M,1),T.timeout&&clearTimeout(T.timeout),this.data[_].length===0&&delete this.data[_],this.onRemove(T.value),this.order.splice(this.order.indexOf(_),1),this}setMaxSize(a){for(this.max=a;this.order.length>this.max;){const c=this._getAndRemoveByKey(this.order[0]);c&&this.onRemove(c)}return this}filter(a){const c=[];for(const _ in this.data)for(const M of this.data[_])a(M.value)||c.push(M);for(const _ of c)this.remove(_.value.tileID,_)}}class wt{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(a,c,_){const M=String(c);if(this.stateChanges[a]=this.stateChanges[a]||{},this.stateChanges[a][M]=this.stateChanges[a][M]||{},o.e(this.stateChanges[a][M],_),this.deletedStates[a]===null){this.deletedStates[a]={};for(const T in this.state[a])T!==M&&(this.deletedStates[a][T]=null)}else if(this.deletedStates[a]&&this.deletedStates[a][M]===null){this.deletedStates[a][M]={};for(const T in this.state[a][M])_[T]||(this.deletedStates[a][M][T]=null)}else for(const T in _)this.deletedStates[a]&&this.deletedStates[a][M]&&this.deletedStates[a][M][T]===null&&delete this.deletedStates[a][M][T]}removeFeatureState(a,c,_){if(this.deletedStates[a]===null)return;const M=String(c);if(this.deletedStates[a]=this.deletedStates[a]||{},_&&c!==void 0)this.deletedStates[a][M]!==null&&(this.deletedStates[a][M]=this.deletedStates[a][M]||{},this.deletedStates[a][M][_]=null);else if(c!==void 0)if(this.stateChanges[a]&&this.stateChanges[a][M])for(_ in this.deletedStates[a][M]={},this.stateChanges[a][M])this.deletedStates[a][M][_]=null;else this.deletedStates[a][M]=null;else this.deletedStates[a]=null}getState(a,c){const _=String(c),M=o.e({},(this.state[a]||{})[_],(this.stateChanges[a]||{})[_]);if(this.deletedStates[a]===null)return{};if(this.deletedStates[a]){const T=this.deletedStates[a][c];if(T===null)return{};for(const z in T)delete M[z]}return M}initializeTileState(a,c){a.setFeatureState(this.state,c)}coalesceChanges(a,c){const _={};for(const M in this.stateChanges){this.state[M]=this.state[M]||{};const T={};for(const z in this.stateChanges[M])this.state[M][z]||(this.state[M][z]={}),o.e(this.state[M][z],this.stateChanges[M][z]),T[z]=this.state[M][z];_[M]=T}for(const M in this.deletedStates){this.state[M]=this.state[M]||{};const T={};if(this.deletedStates[M]===null)for(const z in this.state[M])T[z]={},this.state[M][z]={};else for(const z in this.deletedStates[M]){if(this.deletedStates[M][z]===null)this.state[M][z]={};else for(const q of Object.keys(this.deletedStates[M][z]))delete this.state[M][z][q];T[z]=this.state[M][z]}_[M]=_[M]||{},o.e(_[M],T)}if(this.stateChanges={},this.deletedStates={},Object.keys(_).length!==0)for(const M in a)a[M].setFeatureState(_,c)}}function Ht(I,a,c){const _=a.intersectsFrustum(I);if(!c)return _;const M=a.intersectsPlane(c);return _===0||M===0?0:_===2&&M===2?2:1}function sn(I,a,c,_,M){let T=I;const z=Math.atan(a/c),q=Math.hypot(a,c);return T=I+o.aa(_/q/Math.max(.5,Math.cos(o.ac(M/2)))),T+=1*o.aa(Math.cos(z))/2,T+=o.ad(I-T,-0,0),T}function Hn(I,a){const c=(a.roundZoom?Math.round:Math.floor)(I.zoom+o.aa(I.tileSize/a.tileSize));return Math.max(0,c)}function Ve(I,a){const c=I.getCameraFrustum(),_=I.getClippingPlane(),M=I.screenPointToMercatorCoordinate(I.getCameraPoint()),T=o.$.fromLngLat(I.center,I.elevation);M.z=T.z+Math.cos(I.pitchInRadians)*I.cameraToCenterDistance/I.worldSize;const z=I.getCoveringTilesDetailsProvider(),q=z.allowVariableZoom(I,a),te=Hn(I,a),ae=a.minzoom||0,be=a.maxzoom!==void 0?a.maxzoom:I.maxZoom,ke=Math.min(Math.max(0,te),be),Te=Math.pow(2,ke),$e=[Te*M.x,Te*M.y,0],Xe=[Te*T.x,Te*T.y,0],mt=Math.hypot(T.x-M.x,T.y-M.y),ut=Math.abs(T.z-M.z),ft=Math.hypot(mt,ut),vt=Rt=>({zoom:0,x:0,y:0,wrap:Rt,fullyVisible:!1}),Et=[],kt=[];if(I.renderWorldCopies&&z.allowWorldCopies())for(let Rt=1;Rt<=3;Rt++)Et.push(vt(-Rt)),Et.push(vt(Rt));for(Et.push(vt(0));Et.length>0;){const Rt=Et.pop(),Ut=Rt.x,It=Rt.y;let rn=Rt.fullyVisible;const Zt={x:Ut,y:It,z:Rt.zoom},Mn=z.getTileAABB(Zt,Rt.wrap,I.elevation,a);if(!rn){const zn=Ht(c,Mn,_);if(zn===0)continue;rn=zn===2}const En=z.distanceToTile2d(M.x,M.y,Zt,Mn);let bn=te;q&&(bn=(a.calculateTileZoom||sn)(I.zoom+o.aa(I.tileSize/a.tileSize),En,ut,ft,I.fov)),bn=(a.roundZoom?Math.round:Math.floor)(bn),bn=Math.max(0,bn);const On=Math.min(bn,be);if(Rt.wrap=z.getWrap(T,Zt,Rt.wrap),Rt.zoom>=On){if(Rt.zoom<ae)continue;const zn=ke-Rt.zoom,Ln=$e[0]-.5-(Ut<<zn),Tr=$e[1]-.5-(It<<zn),Zr=a.reparseOverscaled?Math.max(Rt.zoom,bn):Rt.zoom;kt.push({tileID:new o.Y(Rt.zoom===be?Zr:Rt.zoom,Rt.wrap,Rt.zoom,Ut,It),distanceSq:o.ab([Xe[0]-.5-Ut,Xe[1]-.5-It]),tileDistanceToCamera:Math.sqrt(Ln*Ln+Tr*Tr)})}else for(let zn=0;zn<4;zn++)Et.push({zoom:Rt.zoom+1,x:(Ut<<1)+zn%2,y:(It<<1)+(zn>>1),wrap:Rt.wrap,fullyVisible:rn})}return kt.sort((Rt,Ut)=>Rt.distanceSq-Ut.distanceSq).map(Rt=>Rt.tileID)}class J extends o.E{constructor(a,c,_){super(),this.id=a,this.dispatcher=_,this.on("data",M=>this._dataHandler(M)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((M,T,z,q)=>{const te=new(lr(T.type))(M,T,z,q);if(te.id!==M)throw new Error(`Expected Source id to be ${M} instead of ${te.id}`);return te})(a,c,_,this),this._tiles={},this._cache=new nt(0,M=>this._unloadTile(M)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new wt,this._didEmitContent=!1,this._updated=!1}onAdd(a){this.map=a,this._maxTileCacheSize=a?a._maxTileCacheSize:null,this._maxTileCacheZoomLevels=a?a._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(a)}onRemove(a){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(a)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const a in this._tiles){const c=this._tiles[a];if(c.state!=="loaded"&&c.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const a=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,a&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(a,c,_){return o._(this,void 0,void 0,function*(){try{yield this._source.loadTile(a),this._tileLoaded(a,c,_)}catch(M){a.state="errored",M.status!==404?this._source.fire(new o.k(M,{tile:a})):this.update(this.transform,this.terrain)}})}_unloadTile(a){this._source.unloadTile&&this._source.unloadTile(a)}_abortTile(a){this._source.abortTile&&this._source.abortTile(a),this._source.fire(new o.l("dataabort",{tile:a,coord:a.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(a){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const c in this._tiles){const _=this._tiles[c];_.upload(a),_.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(a=>a.tileID).sort(ve).map(a=>a.key)}getRenderableIds(a){const c=[];for(const _ in this._tiles)this._isIdRenderable(_,a)&&c.push(this._tiles[_]);return a?c.sort((_,M)=>{const T=_.tileID,z=M.tileID,q=new o.P(T.canonical.x,T.canonical.y)._rotate(-this.transform.bearingInRadians),te=new o.P(z.canonical.x,z.canonical.y)._rotate(-this.transform.bearingInRadians);return T.overscaledZ-z.overscaledZ||te.y-q.y||te.x-q.x}).map(_=>_.tileID.key):c.map(_=>_.tileID).sort(ve).map(_=>_.key)}hasRenderableParent(a){const c=this.findLoadedParent(a,0);return!!c&&this._isIdRenderable(c.tileID.key)}_isIdRenderable(a,c){return this._tiles[a]&&this._tiles[a].hasData()&&!this._coveredTiles[a]&&(c||!this._tiles[a].holdingForFade())}reload(a){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const c in this._tiles)(a||this._tiles[c].state!=="errored")&&this._reloadTile(c,"reloading")}}_reloadTile(a,c){return o._(this,void 0,void 0,function*(){const _=this._tiles[a];_&&(_.state!=="loading"&&(_.state=c),yield this._loadTile(_,a,c))})}_tileLoaded(a,c,_){a.timeAdded=O.now(),_==="expired"&&(a.refreshedUponExpiration=!0),this._setTileReloadTimer(c,a),this.getSource().type==="raster-dem"&&a.dem&&this._backfillDEM(a),this._state.initializeTileState(a,this.map?this.map.painter:null),a.aborted||this._source.fire(new o.l("data",{dataType:"source",tile:a,coord:a.tileID}))}_backfillDEM(a){const c=this.getRenderableIds();for(let M=0;M<c.length;M++){const T=c[M];if(a.neighboringTiles&&a.neighboringTiles[T]){const z=this.getTileByID(T);_(a,z),_(z,a)}}function _(M,T){M.needsHillshadePrepare=!0,M.needsTerrainPrepare=!0;let z=T.tileID.canonical.x-M.tileID.canonical.x;const q=T.tileID.canonical.y-M.tileID.canonical.y,te=Math.pow(2,M.tileID.canonical.z),ae=T.tileID.key;z===0&&q===0||Math.abs(q)>1||(Math.abs(z)>1&&(Math.abs(z+te)===1?z+=te:Math.abs(z-te)===1&&(z-=te)),T.dem&&M.dem&&(M.dem.backfillBorder(T.dem,z,q),M.neighboringTiles&&M.neighboringTiles[ae]&&(M.neighboringTiles[ae].backfilled=!0)))}}getTile(a){return this.getTileByID(a.key)}getTileByID(a){return this._tiles[a]}_retainLoadedChildren(a,c,_,M){for(const T in this._tiles){let z=this._tiles[T];if(M[T]||!z.hasData()||z.tileID.overscaledZ<=c||z.tileID.overscaledZ>_)continue;let q=z.tileID;for(;z&&z.tileID.overscaledZ>c+1;){const ae=z.tileID.scaledTo(z.tileID.overscaledZ-1);z=this._tiles[ae.key],z&&z.hasData()&&(q=ae)}let te=q;for(;te.overscaledZ>c;)if(te=te.scaledTo(te.overscaledZ-1),a[te.key]||a[te.canonical.key]){M[q.key]=q;break}}}findLoadedParent(a,c){if(a.key in this._loadedParentTiles){const _=this._loadedParentTiles[a.key];return _&&_.tileID.overscaledZ>=c?_:null}for(let _=a.overscaledZ-1;_>=c;_--){const M=a.scaledTo(_),T=this._getLoadedTile(M);if(T)return T}}findLoadedSibling(a){return this._getLoadedTile(a)}_getLoadedTile(a){const c=this._tiles[a.key];return c&&c.hasData()?c:this._cache.getByKey(a.wrapped().key)}updateCacheSize(a){const c=Math.ceil(a.width/this._source.tileSize)+1,_=Math.ceil(a.height/this._source.tileSize)+1,M=Math.floor(c*_*(this._maxTileCacheZoomLevels===null?o.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),T=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,M):M;this._cache.setMaxSize(T)}handleWrapJump(a){const c=Math.round((a-(this._prevLng===void 0?a:this._prevLng))/360);if(this._prevLng=a,c){const _={};for(const M in this._tiles){const T=this._tiles[M];T.tileID=T.tileID.unwrapTo(T.tileID.wrap+c),_[T.tileID.key]=T}this._tiles=_;for(const M in this._timers)clearTimeout(this._timers[M]),delete this._timers[M];for(const M in this._tiles)this._setTileReloadTimer(M,this._tiles[M])}}_updateCoveredAndRetainedTiles(a,c,_,M,T,z){const q={},te={},ae=Object.keys(a),be=O.now();for(const ke of ae){const Te=a[ke],$e=this._tiles[ke];if(!$e||$e.fadeEndTime!==0&&$e.fadeEndTime<=be)continue;const Xe=this.findLoadedParent(Te,c),mt=this.findLoadedSibling(Te),ut=Xe||mt||null;ut&&(this._addTile(ut.tileID),q[ut.tileID.key]=ut.tileID),te[ke]=Te}this._retainLoadedChildren(te,M,_,a);for(const ke in q)a[ke]||(this._coveredTiles[ke]=!0,a[ke]=q[ke]);if(z){const ke={},Te={};for(const $e of T)this._tiles[$e.key].hasData()?ke[$e.key]=$e:Te[$e.key]=$e;for(const $e in Te){const Xe=Te[$e].children(this._source.maxzoom);this._tiles[Xe[0].key]&&this._tiles[Xe[1].key]&&this._tiles[Xe[2].key]&&this._tiles[Xe[3].key]&&(ke[Xe[0].key]=a[Xe[0].key]=Xe[0],ke[Xe[1].key]=a[Xe[1].key]=Xe[1],ke[Xe[2].key]=a[Xe[2].key]=Xe[2],ke[Xe[3].key]=a[Xe[3].key]=Xe[3],delete Te[$e])}for(const $e in Te){const Xe=Te[$e],mt=this.findLoadedParent(Xe,this._source.minzoom),ut=this.findLoadedSibling(Xe),ft=mt||ut||null;if(ft){ke[ft.tileID.key]=a[ft.tileID.key]=ft.tileID;for(const vt in ke)ke[vt].isChildOf(ft.tileID)&&delete ke[vt]}}for(const $e in this._tiles)ke[$e]||(this._coveredTiles[$e]=!0)}}update(a,c){if(!this._sourceLoaded||this._paused)return;let _;this.transform=a,this.terrain=c,this.updateCacheSize(a),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?_=a.getVisibleUnwrappedCoordinates(this._source.tileID).map(be=>new o.Y(be.canonical.z,be.wrap,be.canonical.z,be.canonical.x,be.canonical.y)):(_=Ve(a,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:c,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(_=_.filter(be=>this._source.hasTile(be)))):_=[];const M=Hn(a,this._source),T=Math.max(M-J.maxOverzooming,this._source.minzoom),z=Math.max(M+J.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const be={};for(const ke of _)if(ke.canonical.z>this._source.minzoom){const Te=ke.scaledTo(ke.canonical.z-1);be[Te.key]=Te;const $e=ke.scaledTo(Math.max(this._source.minzoom,Math.min(ke.canonical.z,5)));be[$e.key]=$e}_=_.concat(Object.values(be))}const q=_.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,q&&this.fire(new o.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const te=this._updateRetainedTiles(_,M);p(this._source.type)&&this._updateCoveredAndRetainedTiles(te,T,z,M,_,c);for(const be in te)this._tiles[be].clearFadeHold();const ae=o.ae(this._tiles,te);for(const be of ae){const ke=this._tiles[be];ke.hasSymbolBuckets&&!ke.holdingForFade()?ke.setHoldDuration(this.map._fadeDuration):ke.hasSymbolBuckets&&!ke.symbolFadeFinished()||this._removeTile(be)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const a in this._tiles)this._tiles[a].holdingForFade()&&this._removeTile(a)}_updateRetainedTiles(a,c){var _;const M={},T={},z=Math.max(c-J.maxOverzooming,this._source.minzoom),q=Math.max(c+J.maxUnderzooming,this._source.minzoom),te={};for(const ae of a){const be=this._addTile(ae);M[ae.key]=ae,be.hasData()||c<this._source.maxzoom&&(te[ae.key]=ae)}this._retainLoadedChildren(te,c,q,M);for(const ae of a){let be=this._tiles[ae.key];if(be.hasData())continue;if(c+1>this._source.maxzoom){const Te=ae.children(this._source.maxzoom)[0],$e=this.getTile(Te);if($e&&$e.hasData()){M[Te.key]=Te;continue}}else{const Te=ae.children(this._source.maxzoom);if(M[Te[0].key]&&M[Te[1].key]&&M[Te[2].key]&&M[Te[3].key])continue}let ke=be.wasRequested();for(let Te=ae.overscaledZ-1;Te>=z;--Te){const $e=ae.scaledTo(Te);if(T[$e.key])break;if(T[$e.key]=!0,be=this.getTile($e),!be&&ke&&(be=this._addTile($e)),be){const Xe=be.hasData();if((Xe||!(!((_=this.map)===null||_===void 0)&&_.cancelPendingTileRequestsWhileZooming)||ke)&&(M[$e.key]=$e),ke=be.wasRequested(),Xe)break}}}return M}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const a in this._tiles){const c=[];let _,M=this._tiles[a].tileID;for(;M.overscaledZ>0;){if(M.key in this._loadedParentTiles){_=this._loadedParentTiles[M.key];break}c.push(M.key);const T=M.scaledTo(M.overscaledZ-1);if(_=this._getLoadedTile(T),_)break;M=T}for(const T of c)this._loadedParentTiles[T]=_}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const a in this._tiles){const c=this._tiles[a].tileID,_=this._getLoadedTile(c);this._loadedSiblingTiles[c.key]=_}}_addTile(a){let c=this._tiles[a.key];if(c)return c;c=this._cache.getAndRemove(a),c&&(this._setTileReloadTimer(a.key,c),c.tileID=a,this._state.initializeTileState(c,this.map?this.map.painter:null),this._cacheTimers[a.key]&&(clearTimeout(this._cacheTimers[a.key]),delete this._cacheTimers[a.key],this._setTileReloadTimer(a.key,c)));const _=c;return c||(c=new pe(a,this._source.tileSize*a.overscaleFactor()),this._loadTile(c,a.key,c.state)),c.uses++,this._tiles[a.key]=c,_||this._source.fire(new o.l("dataloading",{tile:c,coord:c.tileID,dataType:"source"})),c}_setTileReloadTimer(a,c){a in this._timers&&(clearTimeout(this._timers[a]),delete this._timers[a]);const _=c.getExpiryTimeout();_&&(this._timers[a]=setTimeout(()=>{this._reloadTile(a,"expired"),delete this._timers[a]},_))}_removeTile(a){const c=this._tiles[a];c&&(c.uses--,delete this._tiles[a],this._timers[a]&&(clearTimeout(this._timers[a]),delete this._timers[a]),c.uses>0||(c.hasData()&&c.state!=="reloading"?this._cache.add(c.tileID,c,c.getExpiryTimeout()):(c.aborted=!0,this._abortTile(c),this._unloadTile(c))))}_dataHandler(a){const c=a.sourceDataType;a.dataType==="source"&&c==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&a.dataType==="source"&&c==="content"&&(this.reload(a.sourceDataChanged),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const a in this._tiles)this._removeTile(a);this._cache.reset()}tilesIn(a,c,_){const M=[],T=this.transform;if(!T)return M;const z=_?T.getCameraQueryGeometry(a):a,q=a.map(Xe=>T.screenPointToMercatorCoordinate(Xe,this.terrain)),te=z.map(Xe=>T.screenPointToMercatorCoordinate(Xe,this.terrain)),ae=this.getIds();let be=1/0,ke=1/0,Te=-1/0,$e=-1/0;for(const Xe of te)be=Math.min(be,Xe.x),ke=Math.min(ke,Xe.y),Te=Math.max(Te,Xe.x),$e=Math.max($e,Xe.y);for(let Xe=0;Xe<ae.length;Xe++){const mt=this._tiles[ae[Xe]];if(mt.holdingForFade())continue;const ut=mt.tileID,ft=Math.pow(2,T.zoom-mt.tileID.overscaledZ),vt=c*mt.queryPadding*o.Z/mt.tileSize/ft,Et=[ut.getTilePoint(new o.$(be,ke)),ut.getTilePoint(new o.$(Te,$e))];if(Et[0].x-vt<o.Z&&Et[0].y-vt<o.Z&&Et[1].x+vt>=0&&Et[1].y+vt>=0){const kt=q.map(Ut=>ut.getTilePoint(Ut)),Rt=te.map(Ut=>ut.getTilePoint(Ut));M.push({tile:mt,tileID:ut,queryGeometry:kt,cameraQueryGeometry:Rt,scale:ft})}}return M}getVisibleCoordinates(a){const c=this.getRenderableIds(a).map(_=>this._tiles[_].tileID);return this.transform&&this.transform.populateCache(c),c}hasTransition(){if(this._source.hasTransition())return!0;if(p(this._source.type)){const a=O.now();for(const c in this._tiles)if(this._tiles[c].fadeEndTime>=a)return!0}return!1}setFeatureState(a,c,_){this._state.updateState(a=a||"_geojsonTileLayer",c,_)}removeFeatureState(a,c,_){this._state.removeFeatureState(a=a||"_geojsonTileLayer",c,_)}getFeatureState(a,c){return this._state.getState(a=a||"_geojsonTileLayer",c)}setDependencies(a,c,_){const M=this._tiles[a];M&&M.setDependencies(c,_)}reloadTilesForDependencies(a,c){for(const _ in this._tiles)this._tiles[_].hasDependency(a,c)&&this._reloadTile(_,"reloading");this._cache.filter(_=>!_.hasDependency(a,c))}}function ve(I,a){const c=Math.abs(2*I.wrap)-+(I.wrap<0),_=Math.abs(2*a.wrap)-+(a.wrap<0);return I.overscaledZ-a.overscaledZ||_-c||a.canonical.y-I.canonical.y||a.canonical.x-I.canonical.x}function p(I){return I==="raster"||I==="image"||I==="video"}J.maxOverzooming=10,J.maxUnderzooming=3;class Fe{constructor(a,c){this.reset(a,c)}reset(a,c){this.points=a||[],this._distances=[0];for(let _=1;_<this.points.length;_++)this._distances[_]=this._distances[_-1]+this.points[_].dist(this.points[_-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(c||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(a){if(this.points.length===1)return this.points[0];a=o.ad(a,0,1);let c=1,_=this._distances[c];const M=a*this.paddedLength+this.padding;for(;_<M&&c<this._distances.length;)_=this._distances[++c];const T=c-1,z=this._distances[T],q=_-z,te=q>0?(M-z)/q:0;return this.points[T].mult(1-te).add(this.points[c].mult(te))}}function Qe(I,a){let c=!0;return I==="always"||I!=="never"&&a!=="never"||(c=!1),c}class rt{constructor(a,c,_){const M=this.boxCells=[],T=this.circleCells=[];this.xCellCount=Math.ceil(a/_),this.yCellCount=Math.ceil(c/_);for(let z=0;z<this.xCellCount*this.yCellCount;z++)M.push([]),T.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=a,this.height=c,this.xScale=this.xCellCount/a,this.yScale=this.yCellCount/c,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(a,c,_,M,T){this._forEachCell(c,_,M,T,this._insertBoxCell,this.boxUid++),this.boxKeys.push(a),this.bboxes.push(c),this.bboxes.push(_),this.bboxes.push(M),this.bboxes.push(T)}insertCircle(a,c,_,M){this._forEachCell(c-M,_-M,c+M,_+M,this._insertCircleCell,this.circleUid++),this.circleKeys.push(a),this.circles.push(c),this.circles.push(_),this.circles.push(M)}_insertBoxCell(a,c,_,M,T,z){this.boxCells[T].push(z)}_insertCircleCell(a,c,_,M,T,z){this.circleCells[T].push(z)}_query(a,c,_,M,T,z,q){if(_<0||a>this.width||M<0||c>this.height)return[];const te=[];if(a<=0&&c<=0&&this.width<=_&&this.height<=M){if(T)return[{key:null,x1:a,y1:c,x2:_,y2:M}];for(let ae=0;ae<this.boxKeys.length;ae++)te.push({key:this.boxKeys[ae],x1:this.bboxes[4*ae],y1:this.bboxes[4*ae+1],x2:this.bboxes[4*ae+2],y2:this.bboxes[4*ae+3]});for(let ae=0;ae<this.circleKeys.length;ae++){const be=this.circles[3*ae],ke=this.circles[3*ae+1],Te=this.circles[3*ae+2];te.push({key:this.circleKeys[ae],x1:be-Te,y1:ke-Te,x2:be+Te,y2:ke+Te})}}else this._forEachCell(a,c,_,M,this._queryCell,te,{hitTest:T,overlapMode:z,seenUids:{box:{},circle:{}}},q);return te}query(a,c,_,M){return this._query(a,c,_,M,!1,null)}hitTest(a,c,_,M,T,z){return this._query(a,c,_,M,!0,T,z).length>0}hitTestCircle(a,c,_,M,T){const z=a-_,q=a+_,te=c-_,ae=c+_;if(q<0||z>this.width||ae<0||te>this.height)return!1;const be=[];return this._forEachCell(z,te,q,ae,this._queryCellCircle,be,{hitTest:!0,overlapMode:M,circle:{x:a,y:c,radius:_},seenUids:{box:{},circle:{}}},T),be.length>0}_queryCell(a,c,_,M,T,z,q,te){const{seenUids:ae,hitTest:be,overlapMode:ke}=q,Te=this.boxCells[T];if(Te!==null){const Xe=this.bboxes;for(const mt of Te)if(!ae.box[mt]){ae.box[mt]=!0;const ut=4*mt,ft=this.boxKeys[mt];if(a<=Xe[ut+2]&&c<=Xe[ut+3]&&_>=Xe[ut+0]&&M>=Xe[ut+1]&&(!te||te(ft))&&(!be||!Qe(ke,ft.overlapMode))&&(z.push({key:ft,x1:Xe[ut],y1:Xe[ut+1],x2:Xe[ut+2],y2:Xe[ut+3]}),be))return!0}}const $e=this.circleCells[T];if($e!==null){const Xe=this.circles;for(const mt of $e)if(!ae.circle[mt]){ae.circle[mt]=!0;const ut=3*mt,ft=this.circleKeys[mt];if(this._circleAndRectCollide(Xe[ut],Xe[ut+1],Xe[ut+2],a,c,_,M)&&(!te||te(ft))&&(!be||!Qe(ke,ft.overlapMode))){const vt=Xe[ut],Et=Xe[ut+1],kt=Xe[ut+2];if(z.push({key:ft,x1:vt-kt,y1:Et-kt,x2:vt+kt,y2:Et+kt}),be)return!0}}}return!1}_queryCellCircle(a,c,_,M,T,z,q,te){const{circle:ae,seenUids:be,overlapMode:ke}=q,Te=this.boxCells[T];if(Te!==null){const Xe=this.bboxes;for(const mt of Te)if(!be.box[mt]){be.box[mt]=!0;const ut=4*mt,ft=this.boxKeys[mt];if(this._circleAndRectCollide(ae.x,ae.y,ae.radius,Xe[ut+0],Xe[ut+1],Xe[ut+2],Xe[ut+3])&&(!te||te(ft))&&!Qe(ke,ft.overlapMode))return z.push(!0),!0}}const $e=this.circleCells[T];if($e!==null){const Xe=this.circles;for(const mt of $e)if(!be.circle[mt]){be.circle[mt]=!0;const ut=3*mt,ft=this.circleKeys[mt];if(this._circlesCollide(Xe[ut],Xe[ut+1],Xe[ut+2],ae.x,ae.y,ae.radius)&&(!te||te(ft))&&!Qe(ke,ft.overlapMode))return z.push(!0),!0}}}_forEachCell(a,c,_,M,T,z,q,te){const ae=this._convertToXCellCoord(a),be=this._convertToYCellCoord(c),ke=this._convertToXCellCoord(_),Te=this._convertToYCellCoord(M);for(let $e=ae;$e<=ke;$e++)for(let Xe=be;Xe<=Te;Xe++)if(T.call(this,a,c,_,M,this.xCellCount*Xe+$e,z,q,te))return}_convertToXCellCoord(a){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(a*this.xScale)))}_convertToYCellCoord(a){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(a*this.yScale)))}_circlesCollide(a,c,_,M,T,z){const q=M-a,te=T-c,ae=_+z;return ae*ae>q*q+te*te}_circleAndRectCollide(a,c,_,M,T,z,q){const te=(z-M)/2,ae=Math.abs(a-(M+te));if(ae>te+_)return!1;const be=(q-T)/2,ke=Math.abs(c-(T+be));if(ke>be+_)return!1;if(ae<=te||ke<=be)return!0;const Te=ae-te,$e=ke-be;return Te*Te+$e*$e<=_*_}}function ct(I,a,c){const _=o.K();if(!I){const{vecSouth:ke,vecEast:Te}=qt(a),$e=y();$e[0]=Te[0],$e[1]=Te[1],$e[2]=ke[0],$e[3]=ke[1],M=$e,(be=(z=(T=$e)[0])*(ae=T[3])-(te=T[2])*(q=T[1]))&&(M[0]=ae*(be=1/be),M[1]=-q*be,M[2]=-te*be,M[3]=z*be),_[0]=$e[0],_[1]=$e[1],_[4]=$e[2],_[5]=$e[3]}var M,T,z,q,te,ae,be;return o.M(_,_,[1/c,1/c,1]),_}function dt(I,a,c,_){if(I){const M=o.K();if(!a){const{vecSouth:T,vecEast:z}=qt(c);M[0]=z[0],M[1]=z[1],M[4]=T[0],M[5]=T[1]}return o.M(M,M,[_,_,1]),M}return c.pixelsToClipSpaceMatrix}function qt(I){const a=Math.cos(I.rollInRadians),c=Math.sin(I.rollInRadians),_=Math.cos(I.pitchInRadians),M=Math.cos(I.bearingInRadians),T=Math.sin(I.bearingInRadians),z=o.aj();z[0]=-M*_*c-T*a,z[1]=-T*_*c+M*a;const q=o.ak(z);q<1e-9?o.al(z):o.am(z,z,1/q);const te=o.aj();te[0]=M*_*a-T*c,te[1]=T*_*a+M*c;const ae=o.ak(te);return ae<1e-9?o.al(te):o.am(te,te,1/ae),{vecEast:te,vecSouth:z}}function Gt(I,a,c,_){let M;_?(M=[I,a,_(I,a),1],o.ao(M,M,c)):(M=[I,a,0,1],Bi(M,M,c));const T=M[3];return{point:new o.P(M[0]/T,M[1]/T),signedDistanceFromCamera:T,isOccluded:!1}}function zt(I,a){return .5+I/a*.5}function on(I,a){return I.x>=-a[0]&&I.x<=a[0]&&I.y>=-a[1]&&I.y<=a[1]}function jt(I,a,c,_,M,T,z,q,te,ae,be,ke,Te){const $e=c?I.textSizeData:I.iconSizeData,Xe=o.af($e,a.transform.zoom),mt=[256/a.width*2+1,256/a.height*2+1],ut=c?I.text.dynamicLayoutVertexArray:I.icon.dynamicLayoutVertexArray;ut.clear();const ft=I.lineVertexArray,vt=c?I.text.placedSymbolArray:I.icon.placedSymbolArray,Et=a.transform.width/a.transform.height;let kt=!1;for(let Rt=0;Rt<vt.length;Rt++){const Ut=vt.get(Rt);if(Ut.hidden||Ut.writingMode===o.ag.vertical&&!kt){Wi(Ut.numGlyphs,ut);continue}kt=!1;const It=new o.P(Ut.anchorX,Ut.anchorY),rn={getElevation:Te,pitchedLabelPlaneMatrix:_,lineVertexArray:ft,pitchWithMap:T,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:a.transform,tileAnchorPoint:It,unwrappedTileID:te,width:ae,height:be,translation:ke},Zt=Sr(Ut.anchorX,Ut.anchorY,rn);if(!on(Zt.point,mt)){Wi(Ut.numGlyphs,ut);continue}const Mn=zt(a.transform.cameraToCenterDistance,Zt.signedDistanceFromCamera),En=o.ah($e,Xe,Ut),bn=T?En*a.transform.getPitchedTextCorrection(Ut.anchorX,Ut.anchorY,te)/Mn:En*Mn,On=Br({projectionContext:rn,pitchedLabelPlaneMatrixInverse:M,symbol:Ut,fontSize:bn,flip:!1,keepUpright:z,glyphOffsetArray:I.glyphOffsetArray,dynamicLayoutVertexArray:ut,aspectRatio:Et,rotateToLine:q});kt=On.useVertical,(On.notEnoughRoom||kt||On.needsFlipping&&Br({projectionContext:rn,pitchedLabelPlaneMatrixInverse:M,symbol:Ut,fontSize:bn,flip:!0,keepUpright:z,glyphOffsetArray:I.glyphOffsetArray,dynamicLayoutVertexArray:ut,aspectRatio:Et,rotateToLine:q}).notEnoughRoom)&&Wi(Ut.numGlyphs,ut)}c?I.text.dynamicLayoutVertexBuffer.updateData(ut):I.icon.dynamicLayoutVertexBuffer.updateData(ut)}function Dn(I,a,c,_,M,T,z,q){const te=T.glyphStartIndex+T.numGlyphs,ae=T.lineStartIndex,be=T.lineStartIndex+T.lineLength,ke=a.getoffsetX(T.glyphStartIndex),Te=a.getoffsetX(te-1),$e=Or(I*ke,c,_,M,T.segment,ae,be,q,z);if(!$e)return null;const Xe=Or(I*Te,c,_,M,T.segment,ae,be,q,z);return Xe?q.projectionCache.anyProjectionOccluded?null:{first:$e,last:Xe}:null}function rr(I,a,c,_){return I===o.ag.horizontal&&Math.abs(c.y-a.y)>Math.abs(c.x-a.x)*_?{useVertical:!0}:(I===o.ag.vertical?a.y<c.y:a.x>c.x)?{needsFlipping:!0}:null}function Br(I){const{projectionContext:a,pitchedLabelPlaneMatrixInverse:c,symbol:_,fontSize:M,flip:T,keepUpright:z,glyphOffsetArray:q,dynamicLayoutVertexArray:te,aspectRatio:ae,rotateToLine:be}=I,ke=M/24,Te=_.lineOffsetX*ke,$e=_.lineOffsetY*ke;let Xe;if(_.numGlyphs>1){const mt=_.glyphStartIndex+_.numGlyphs,ut=_.lineStartIndex,ft=_.lineStartIndex+_.lineLength,vt=Dn(ke,q,Te,$e,T,_,be,a);if(!vt)return{notEnoughRoom:!0};const Et=fr(vt.first.point.x,vt.first.point.y,a,c),kt=fr(vt.last.point.x,vt.last.point.y,a,c);if(z&&!T){const Rt=rr(_.writingMode,Et,kt,ae);if(Rt)return Rt}Xe=[vt.first];for(let Rt=_.glyphStartIndex+1;Rt<mt-1;Rt++)Xe.push(Or(ke*q.getoffsetX(Rt),Te,$e,T,_.segment,ut,ft,a,be));Xe.push(vt.last)}else{if(z&&!T){const ut=er(a.tileAnchorPoint.x,a.tileAnchorPoint.y,a).point,ft=_.lineStartIndex+_.segment+1,vt=new o.P(a.lineVertexArray.getx(ft),a.lineVertexArray.gety(ft)),Et=er(vt.x,vt.y,a),kt=Et.signedDistanceFromCamera>0?Et.point:Jn(a.tileAnchorPoint,vt,ut,1,a),Rt=fr(ut.x,ut.y,a,c),Ut=fr(kt.x,kt.y,a,c),It=rr(_.writingMode,Rt,Ut,ae);if(It)return It}const mt=Or(ke*q.getoffsetX(_.glyphStartIndex),Te,$e,T,_.segment,_.lineStartIndex,_.lineStartIndex+_.lineLength,a,be);if(!mt||a.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};Xe=[mt]}for(const mt of Xe)o.an(te,mt.point,mt.angle);return{}}function Jn(I,a,c,_,M){const T=I.add(I.sub(a)._unit()),z=er(T.x,T.y,M).point,q=c.sub(z);return c.add(q._mult(_/q.mag()))}function un(I,a,c){const _=a.projectionCache;if(_.projections[I])return _.projections[I];const M=new o.P(a.lineVertexArray.getx(I),a.lineVertexArray.gety(I)),T=er(M.x,M.y,a);if(T.signedDistanceFromCamera>0)return _.projections[I]=T.point,_.anyProjectionOccluded=_.anyProjectionOccluded||T.isOccluded,T.point;const z=I-c.direction;return Jn(c.distanceFromAnchor===0?a.tileAnchorPoint:new o.P(a.lineVertexArray.getx(z),a.lineVertexArray.gety(z)),M,c.previousVertex,c.absOffsetX-c.distanceFromAnchor+1,a)}function er(I,a,c){const _=I+c.translation[0],M=a+c.translation[1];let T;return c.pitchWithMap?(T=Gt(_,M,c.pitchedLabelPlaneMatrix,c.getElevation),T.isOccluded=!1):(T=c.transform.projectTileCoordinates(_,M,c.unwrappedTileID,c.getElevation),T.point.x=(.5*T.point.x+.5)*c.width,T.point.y=(.5*-T.point.y+.5)*c.height),T}function fr(I,a,c,_){if(c.pitchWithMap){const M=[I,a,0,1];return o.ao(M,M,_),c.transform.projectTileCoordinates(M[0]/M[3],M[1]/M[3],c.unwrappedTileID,c.getElevation).point}return{x:I/c.width*2-1,y:a/c.height*2-1}}function Sr(I,a,c){return c.transform.projectTileCoordinates(I,a,c.unwrappedTileID,c.getElevation)}function Ur(I,a,c){return I._unit()._perp()._mult(a*c)}function ri(I,a,c,_,M,T,z,q,te){if(q.projectionCache.offsets[I])return q.projectionCache.offsets[I];const ae=c.add(a);if(I+te.direction<_||I+te.direction>=M)return q.projectionCache.offsets[I]=ae,ae;const be=un(I+te.direction,q,te),ke=Ur(be.sub(c),z,te.direction),Te=c.add(ke),$e=be.add(ke);return q.projectionCache.offsets[I]=o.ap(T,ae,Te,$e)||ae,q.projectionCache.offsets[I]}function Or(I,a,c,_,M,T,z,q,te){const ae=_?I-a:I+a;let be=ae>0?1:-1,ke=0;_&&(be*=-1,ke=Math.PI),be<0&&(ke+=Math.PI);let Te,$e=be>0?T+M:T+M+1;q.projectionCache.cachedAnchorPoint?Te=q.projectionCache.cachedAnchorPoint:(Te=er(q.tileAnchorPoint.x,q.tileAnchorPoint.y,q).point,q.projectionCache.cachedAnchorPoint=Te);let Xe,mt,ut=Te,ft=Te,vt=0,Et=0;const kt=Math.abs(ae),Rt=[];let Ut;for(;vt+Et<=kt;){if($e+=be,$e<T||$e>=z)return null;vt+=Et,ft=ut,mt=Xe;const Zt={absOffsetX:kt,direction:be,distanceFromAnchor:vt,previousVertex:ft};if(ut=un($e,q,Zt),c===0)Rt.push(ft),Ut=ut.sub(ft);else{let Mn;const En=ut.sub(ft);Mn=En.mag()===0?Ur(un($e+be,q,Zt).sub(ut),c,be):Ur(En,c,be),mt||(mt=ft.add(Mn)),Xe=ri($e,Mn,ut,T,z,mt,c,q,Zt),Rt.push(mt),Ut=Xe.sub(mt)}Et=Ut.mag()}const It=Ut._mult((kt-vt)/Et)._add(mt||ft),rn=ke+Math.atan2(ut.y-ft.y,ut.x-ft.x);return Rt.push(It),{point:It,angle:te?rn:0,path:Rt}}const ka=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Wi(I,a){for(let c=0;c<I;c++){const _=a.length;a.resize(_+4),a.float32.set(ka,3*_)}}function Bi(I,a,c){const _=a[0],M=a[1];return I[0]=c[0]*_+c[4]*M+c[12],I[1]=c[1]*_+c[5]*M+c[13],I[3]=c[3]*_+c[7]*M+c[15],I}const eo=100;class ws{constructor(a,c=new rt(a.width+200,a.height+200,25),_=new rt(a.width+200,a.height+200,25)){this.transform=a,this.grid=c,this.ignoredGrid=_,this.pitchFactor=Math.cos(a.pitch*Math.PI/180)*a.cameraToCenterDistance,this.screenRightBoundary=a.width+eo,this.screenBottomBoundary=a.height+eo,this.gridRightBoundary=a.width+200,this.gridBottomBoundary=a.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(a,c,_,M,T,z,q,te,ae,be,ke,Te){const $e=this.projectAndGetPerspectiveRatio(a.anchorPointX+te[0],a.anchorPointY+te[1],T,be,Te),Xe=_*$e.perspectiveRatio;let mt;if(z||q)mt=this._projectCollisionBox(a,Xe,M,T,z,q,te,$e,be,ke,Te);else{const Ut=$e.x+(ke?ke.x*Xe:0),It=$e.y+(ke?ke.y*Xe:0);mt={allPointsOccluded:!1,box:[Ut+a.x1*Xe,It+a.y1*Xe,Ut+a.x2*Xe,It+a.y2*Xe]}}const[ut,ft,vt,Et]=mt.box,kt=z?mt.allPointsOccluded:$e.isOccluded;let Rt=kt;return Rt||(Rt=$e.perspectiveRatio<this.perspectiveRatioCutoff),Rt||(Rt=!this.isInsideGrid(ut,ft,vt,Et)),Rt||c!=="always"&&this.grid.hitTest(ut,ft,vt,Et,c,ae)?{box:[ut,ft,vt,Et],placeable:!1,offscreen:!1,occluded:kt}:{box:[ut,ft,vt,Et],placeable:!0,offscreen:this.isOffscreen(ut,ft,vt,Et),occluded:kt}}placeCollisionCircles(a,c,_,M,T,z,q,te,ae,be,ke,Te,$e,Xe){const mt=[],ut=new o.P(c.anchorX,c.anchorY),ft=this.getPerspectiveRatio(ut.x,ut.y,z,Xe),vt=(ae?T*this.transform.getPitchedTextCorrection(c.anchorX,c.anchorY,z)/ft:T*ft)/o.au,Et={getElevation:Xe,pitchedLabelPlaneMatrix:q,lineVertexArray:_,pitchWithMap:ae,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:ut,unwrappedTileID:z,width:this.transform.width,height:this.transform.height,translation:$e},kt=Dn(vt,M,c.lineOffsetX*vt,c.lineOffsetY*vt,!1,c,!1,Et);let Rt=!1,Ut=!1,It=!0;if(kt){const rn=.5*ke*ft+Te,Zt=new o.P(-100,-100),Mn=new o.P(this.screenRightBoundary,this.screenBottomBoundary),En=new Fe,bn=kt.first,On=kt.last;let zn=[];for(let Zr=bn.path.length-1;Zr>=1;Zr--)zn.push(bn.path[Zr]);for(let Zr=1;Zr<On.path.length;Zr++)zn.push(On.path[Zr]);const Ln=2.5*rn;if(ae){const Zr=this.projectPathToScreenSpace(zn,Et);zn=Zr.some(Xi=>Xi.signedDistanceFromCamera<=0)?[]:Zr.map(Xi=>Xi.point)}let Tr=[];if(zn.length>0){const Zr=zn[0].clone(),Xi=zn[0].clone();for(let _o=1;_o<zn.length;_o++)Zr.x=Math.min(Zr.x,zn[_o].x),Zr.y=Math.min(Zr.y,zn[_o].y),Xi.x=Math.max(Xi.x,zn[_o].x),Xi.y=Math.max(Xi.y,zn[_o].y);Tr=Zr.x>=Zt.x&&Xi.x<=Mn.x&&Zr.y>=Zt.y&&Xi.y<=Mn.y?[zn]:Xi.x<Zt.x||Zr.x>Mn.x||Xi.y<Zt.y||Zr.y>Mn.y?[]:o.aq([zn],Zt.x,Zt.y,Mn.x,Mn.y)}for(const Zr of Tr){En.reset(Zr,.25*rn);let Xi=0;Xi=En.length<=.5*rn?1:Math.ceil(En.paddedLength/Ln)+1;for(let _o=0;_o<Xi;_o++){const ki=_o/Math.max(Xi-1,1),os=En.lerp(ki),Yo=os.x+eo,Ao=os.y+eo;mt.push(Yo,Ao,rn,0);const po=Yo-rn,Fa=Ao-rn,ss=Yo+rn,es=Ao+rn;if(It=It&&this.isOffscreen(po,Fa,ss,es),Ut=Ut||this.isInsideGrid(po,Fa,ss,es),a!=="always"&&this.grid.hitTestCircle(Yo,Ao,rn,a,be)&&(Rt=!0,!te))return{circles:[],offscreen:!1,collisionDetected:Rt}}}}return{circles:!te&&Rt||!Ut||ft<this.perspectiveRatioCutoff?[]:mt,offscreen:It,collisionDetected:Rt}}projectPathToScreenSpace(a,c){const _=function(M,T){const z=o.K();return o.ai(z,T.pitchedLabelPlaneMatrix),M.map(q=>{const te=Gt(q.x,q.y,z,T.getElevation),ae=T.transform.projectTileCoordinates(te.point.x,te.point.y,T.unwrappedTileID,T.getElevation);return ae.point.x=(.5*ae.point.x+.5)*T.width,ae.point.y=(.5*-ae.point.y+.5)*T.height,ae})}(a,c);return function(M){let T=0,z=0,q=0,te=0;for(let ae=0;ae<M.length;ae++)M[ae].isOccluded?(q=ae+1,te=0):(te++,te>z&&(z=te,T=q));return M.slice(T,T+z)}(_)}queryRenderedSymbols(a){if(a.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const c=[];let _=1/0,M=1/0,T=-1/0,z=-1/0;for(const be of a){const ke=new o.P(be.x+eo,be.y+eo);_=Math.min(_,ke.x),M=Math.min(M,ke.y),T=Math.max(T,ke.x),z=Math.max(z,ke.y),c.push(ke)}const q=this.grid.query(_,M,T,z).concat(this.ignoredGrid.query(_,M,T,z)),te={},ae={};for(const be of q){const ke=be.key;if(te[ke.bucketInstanceId]===void 0&&(te[ke.bucketInstanceId]={}),te[ke.bucketInstanceId][ke.featureIndex])continue;const Te=[new o.P(be.x1,be.y1),new o.P(be.x2,be.y1),new o.P(be.x2,be.y2),new o.P(be.x1,be.y2)];o.ar(c,Te)&&(te[ke.bucketInstanceId][ke.featureIndex]=!0,ae[ke.bucketInstanceId]===void 0&&(ae[ke.bucketInstanceId]=[]),ae[ke.bucketInstanceId].push(ke.featureIndex))}return ae}insertCollisionBox(a,c,_,M,T,z){(_?this.ignoredGrid:this.grid).insert({bucketInstanceId:M,featureIndex:T,collisionGroupID:z,overlapMode:c},a[0],a[1],a[2],a[3])}insertCollisionCircles(a,c,_,M,T,z){const q=_?this.ignoredGrid:this.grid,te={bucketInstanceId:M,featureIndex:T,collisionGroupID:z,overlapMode:c};for(let ae=0;ae<a.length;ae+=4)q.insertCircle(te,a[ae],a[ae+1],a[ae+2])}projectAndGetPerspectiveRatio(a,c,_,M,T){if(T){let z;M?(z=[a,c,M(a,c),1],o.ao(z,z,T)):(z=[a,c,0,1],Bi(z,z,T));const q=z[3];return{x:(z[0]/q+1)/2*this.transform.width+eo,y:(-z[1]/q+1)/2*this.transform.height+eo,perspectiveRatio:.5+this.transform.cameraToCenterDistance/q*.5,isOccluded:!1,signedDistanceFromCamera:q}}{const z=this.transform.projectTileCoordinates(a,c,_,M);return{x:(z.point.x+1)/2*this.transform.width+eo,y:(1-z.point.y)/2*this.transform.height+eo,perspectiveRatio:.5+this.transform.cameraToCenterDistance/z.signedDistanceFromCamera*.5,isOccluded:z.isOccluded,signedDistanceFromCamera:z.signedDistanceFromCamera}}}getPerspectiveRatio(a,c,_,M){const T=this.transform.projectTileCoordinates(a,c,_,M);return .5+this.transform.cameraToCenterDistance/T.signedDistanceFromCamera*.5}isOffscreen(a,c,_,M){return _<eo||a>=this.screenRightBoundary||M<eo||c>this.screenBottomBoundary}isInsideGrid(a,c,_,M){return _>=0&&a<this.gridRightBoundary&&M>=0&&c<this.gridBottomBoundary}getViewportMatrix(){const a=o.as([]);return o.L(a,a,[-100,-100,0]),a}_projectCollisionBox(a,c,_,M,T,z,q,te,ae,be,ke){let Te=1,$e=0,Xe=0,mt=1;const ut=a.anchorPointX+q[0],ft=a.anchorPointY+q[1];if(z&&!T){const zn=this.projectAndGetPerspectiveRatio(ut+1,ft,M,ae,ke),Ln=zn.x-te.x,Tr=Math.atan((zn.y-te.y)/Ln)+(Ln<0?Math.PI:0),Zr=Math.sin(Tr),Xi=Math.cos(Tr);Te=Xi,$e=Zr,Xe=-Zr,mt=Xi}else if(!z&&T){const zn=qt(this.transform);Te=zn.vecEast[0],$e=zn.vecEast[1],Xe=zn.vecSouth[0],mt=zn.vecSouth[1]}let vt=te.x,Et=te.y,kt=c;T&&(vt=ut,Et=ft,kt=Math.pow(2,-(this.transform.zoom-_.overscaledZ)),kt*=this.transform.getPitchedTextCorrection(ut,ft,M),be||(kt*=o.ad(.5+te.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),be&&(vt+=Te*be.x*kt+Xe*be.y*kt,Et+=$e*be.x*kt+mt*be.y*kt);const Rt=a.x1*kt,Ut=a.x2*kt,It=(Rt+Ut)/2,rn=a.y1*kt,Zt=a.y2*kt,Mn=(rn+Zt)/2,En=[{offsetX:Rt,offsetY:rn},{offsetX:It,offsetY:rn},{offsetX:Ut,offsetY:rn},{offsetX:Ut,offsetY:Mn},{offsetX:Ut,offsetY:Zt},{offsetX:It,offsetY:Zt},{offsetX:Rt,offsetY:Zt},{offsetX:Rt,offsetY:Mn}];let bn=[];for(const{offsetX:zn,offsetY:Ln}of En)bn.push(new o.P(vt+Te*zn+Xe*Ln,Et+$e*zn+mt*Ln));let On=!1;if(T){const zn=bn.map(Ln=>this.projectAndGetPerspectiveRatio(Ln.x,Ln.y,M,ae,ke));On=zn.some(Ln=>!Ln.isOccluded),bn=zn.map(Ln=>new o.P(Ln.x,Ln.y))}else On=!0;return{box:o.at(bn),allPointsOccluded:!On}}}class ko{constructor(a,c,_,M){this.opacity=a?Math.max(0,Math.min(1,a.opacity+(a.placed?c:-c))):M&&_?1:0,this.placed=_}isHidden(){return this.opacity===0&&!this.placed}}class Hi{constructor(a,c,_,M,T){this.text=new ko(a?a.text:null,c,_,T),this.icon=new ko(a?a.icon:null,c,M,T)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Sl{constructor(a,c,_){this.text=a,this.icon=c,this.skipFade=_}}class Go{constructor(a,c,_,M,T){this.bucketInstanceId=a,this.featureIndex=c,this.sourceLayerIndex=_,this.bucketIndex=M,this.tileID=T}}class Za{constructor(a){this.crossSourceCollisions=a,this.maxGroupID=0,this.collisionGroups={}}get(a){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[a]){const c=++this.maxGroupID;this.collisionGroups[a]={ID:c,predicate:_=>_.collisionGroupID===c}}return this.collisionGroups[a]}}function Xa(I,a,c,_,M){const{horizontalAlign:T,verticalAlign:z}=o.aA(I);return new o.P(-(T-.5)*a+_[0]*M,-(z-.5)*c+_[1]*M)}class Yi{constructor(a,c,_,M,T){this.transform=a.clone(),this.terrain=c,this.collisionIndex=new ws(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=_,this.retainedQueryData={},this.collisionGroups=new Za(M),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=T,T&&(T.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(a){const c=this.terrain;return c?(_,M)=>c.getElevation(a,_,M):null}getBucketParts(a,c,_,M){const T=_.getBucket(c),z=_.latestFeatureIndex;if(!T||!z||c.id!==T.layerIds[0])return;const q=_.collisionBoxArray,te=T.layers[0].layout,ae=T.layers[0].paint,be=Math.pow(2,this.transform.zoom-_.tileID.overscaledZ),ke=_.tileSize/o.Z,Te=_.tileID.toUnwrapped(),$e=te.get("text-rotation-alignment")==="map",Xe=o.av(_,1,this.transform.zoom),mt=o.aw(this.collisionIndex.transform,_,ae.get("text-translate"),ae.get("text-translate-anchor")),ut=o.aw(this.collisionIndex.transform,_,ae.get("icon-translate"),ae.get("icon-translate-anchor")),ft=ct($e,this.transform,Xe);this.retainedQueryData[T.bucketInstanceId]=new Go(T.bucketInstanceId,z,T.sourceLayerIndex,T.index,_.tileID);const vt={bucket:T,layout:te,translationText:mt,translationIcon:ut,unwrappedTileID:Te,pitchedLabelPlaneMatrix:ft,scale:be,textPixelRatio:ke,holdingForFade:_.holdingForFade(),collisionBoxArray:q,partiallyEvaluatedTextSize:o.af(T.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(T.sourceID)};if(M)for(const Et of T.sortKeyRanges){const{sortKey:kt,symbolInstanceStart:Rt,symbolInstanceEnd:Ut}=Et;a.push({sortKey:kt,symbolInstanceStart:Rt,symbolInstanceEnd:Ut,parameters:vt})}else a.push({symbolInstanceStart:0,symbolInstanceEnd:T.symbolInstances.length,parameters:vt})}attemptAnchorPlacement(a,c,_,M,T,z,q,te,ae,be,ke,Te,$e,Xe,mt,ut,ft,vt,Et,kt){const Rt=o.ax[a.textAnchor],Ut=[a.textOffset0,a.textOffset1],It=Xa(Rt,_,M,Ut,T),rn=this.collisionIndex.placeCollisionBox(c,Te,te,ae,be,q,z,ut,ke.predicate,Et,It,kt);if((!vt||this.collisionIndex.placeCollisionBox(vt,Te,te,ae,be,q,z,ft,ke.predicate,Et,It,kt).placeable)&&rn.placeable){let Zt;if(this.prevPlacement&&this.prevPlacement.variableOffsets[$e.crossTileID]&&this.prevPlacement.placements[$e.crossTileID]&&this.prevPlacement.placements[$e.crossTileID].text&&(Zt=this.prevPlacement.variableOffsets[$e.crossTileID].anchor),$e.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[$e.crossTileID]={textOffset:Ut,width:_,height:M,anchor:Rt,textBoxScale:T,prevAnchor:Zt},this.markUsedJustification(Xe,Rt,$e,mt),Xe.allowVerticalPlacement&&(this.markUsedOrientation(Xe,mt,$e),this.placedOrientations[$e.crossTileID]=mt),{shift:It,placedGlyphBoxes:rn}}}placeLayerBucketPart(a,c,_){const{bucket:M,layout:T,translationText:z,translationIcon:q,unwrappedTileID:te,pitchedLabelPlaneMatrix:ae,textPixelRatio:be,holdingForFade:ke,collisionBoxArray:Te,partiallyEvaluatedTextSize:$e,collisionGroup:Xe}=a.parameters,mt=T.get("text-optional"),ut=T.get("icon-optional"),ft=o.ay(T,"text-overlap","text-allow-overlap"),vt=ft==="always",Et=o.ay(T,"icon-overlap","icon-allow-overlap"),kt=Et==="always",Rt=T.get("text-rotation-alignment")==="map",Ut=T.get("text-pitch-alignment")==="map",It=T.get("icon-text-fit")!=="none",rn=T.get("symbol-z-order")==="viewport-y",Zt=vt&&(kt||!M.hasIconData()||ut),Mn=kt&&(vt||!M.hasTextData()||mt);!M.collisionArrays&&Te&&M.deserializeCollisionBoxes(Te);const En=this.retainedQueryData[M.bucketInstanceId].tileID,bn=this._getTerrainElevationFunc(En),On=this.transform.getFastPathSimpleProjectionMatrix(En),zn=(Ln,Tr,Zr)=>{var Xi,_o;if(c[Ln.crossTileID])return;if(ke)return void(this.placements[Ln.crossTileID]=new Sl(!1,!1,!1));let ki=!1,os=!1,Yo=!0,Ao=null,po={box:null,placeable:!1,offscreen:null,occluded:!1},Fa={placeable:!1},ss=null,es=null,wa=null,DA=0,wu=0,_l=0;Tr.textFeatureIndex?DA=Tr.textFeatureIndex:Ln.useRuntimeCollisionCircles&&(DA=Ln.featureIndex),Tr.verticalTextFeatureIndex&&(wu=Tr.verticalTextFeatureIndex);const La=Tr.textBox;if(La){const Sa=hs=>{let zo=o.ag.horizontal;if(M.allowVerticalPlacement&&!hs&&this.prevPlacement){const za=this.prevPlacement.placedOrientations[Ln.crossTileID];za&&(this.placedOrientations[Ln.crossTileID]=za,zo=za,this.markUsedOrientation(M,zo,Ln))}return zo},lu=(hs,zo)=>{if(M.allowVerticalPlacement&&Ln.numVerticalGlyphVertices>0&&Tr.verticalTextBox){for(const za of M.writingModes)if(za===o.ag.vertical?(po=zo(),Fa=po):po=hs(),po&&po.placeable)break}else po=hs()},Ua=Ln.textAnchorOffsetStartIndex,gA=Ln.textAnchorOffsetEndIndex;if(gA===Ua){const hs=(zo,za)=>{const ja=this.collisionIndex.placeCollisionBox(zo,ft,be,En,te,Ut,Rt,z,Xe.predicate,bn,void 0,On);return ja&&ja.placeable&&(this.markUsedOrientation(M,za,Ln),this.placedOrientations[Ln.crossTileID]=za),ja};lu(()=>hs(La,o.ag.horizontal),()=>{const zo=Tr.verticalTextBox;return M.allowVerticalPlacement&&Ln.numVerticalGlyphVertices>0&&zo?hs(zo,o.ag.vertical):{box:null,offscreen:null}}),Sa(po&&po.placeable)}else{let hs=o.ax[(_o=(Xi=this.prevPlacement)===null||Xi===void 0?void 0:Xi.variableOffsets[Ln.crossTileID])===null||_o===void 0?void 0:_o.anchor];const zo=(ja,yA,zf)=>{const Eh=ja.x2-ja.x1,jf=ja.y2-ja.y1,Bh=Ln.textBoxScale,cc=It&&Et==="never"?yA:null;let Ts=null,Su=ft==="never"?1:2,Jd="never";hs&&Su++;for(let af=0;af<Su;af++){for(let kc=Ua;kc<gA;kc++){const FA=M.textAnchorOffsets.get(kc);if(hs&&FA.textAnchor!==hs)continue;const ll=this.attemptAnchorPlacement(FA,ja,Eh,jf,Bh,Rt,Ut,be,En,te,Xe,Jd,Ln,M,zf,z,q,cc,bn);if(ll&&(Ts=ll.placedGlyphBoxes,Ts&&Ts.placeable))return ki=!0,Ao=ll.shift,Ts}hs?hs=null:Jd=ft}return _&&!Ts&&(Ts={box:this.collisionIndex.placeCollisionBox(La,"always",be,En,te,Ut,Rt,z,Xe.predicate,bn,void 0,On).box,offscreen:!1,placeable:!1,occluded:!1}),Ts};lu(()=>zo(La,Tr.iconBox,o.ag.horizontal),()=>{const ja=Tr.verticalTextBox;return M.allowVerticalPlacement&&(!po||!po.placeable)&&Ln.numVerticalGlyphVertices>0&&ja?zo(ja,Tr.verticalIconBox,o.ag.vertical):{box:null,occluded:!0,offscreen:null}}),po&&(ki=po.placeable,Yo=po.offscreen);const za=Sa(po&&po.placeable);if(!ki&&this.prevPlacement){const ja=this.prevPlacement.variableOffsets[Ln.crossTileID];ja&&(this.variableOffsets[Ln.crossTileID]=ja,this.markUsedJustification(M,ja.anchor,Ln,za))}}}if(ss=po,ki=ss&&ss.placeable,Yo=ss&&ss.offscreen,Ln.useRuntimeCollisionCircles){const Sa=M.text.placedSymbolArray.get(Ln.centerJustifiedTextSymbolIndex),lu=o.ah(M.textSizeData,$e,Sa),Ua=T.get("text-padding");es=this.collisionIndex.placeCollisionCircles(ft,Sa,M.lineVertexArray,M.glyphOffsetArray,lu,te,ae,_,Ut,Xe.predicate,Ln.collisionCircleDiameter,Ua,z,bn),es.circles.length&&es.collisionDetected&&!_&&o.w("Collisions detected, but collision boxes are not shown"),ki=vt||es.circles.length>0&&!es.collisionDetected,Yo=Yo&&es.offscreen}if(Tr.iconFeatureIndex&&(_l=Tr.iconFeatureIndex),Tr.iconBox){const Sa=lu=>this.collisionIndex.placeCollisionBox(lu,Et,be,En,te,Ut,Rt,q,Xe.predicate,bn,It&&Ao?Ao:void 0,On);Fa&&Fa.placeable&&Tr.verticalIconBox?(wa=Sa(Tr.verticalIconBox),os=wa.placeable):(wa=Sa(Tr.iconBox),os=wa.placeable),Yo=Yo&&wa.offscreen}const Xu=mt||Ln.numHorizontalGlyphVertices===0&&Ln.numVerticalGlyphVertices===0,pA=ut||Ln.numIconVertices===0;Xu||pA?pA?Xu||(os=os&&ki):ki=os&&ki:os=ki=os&&ki;const mA=os&&wa.placeable;if(ki&&ss.placeable&&this.collisionIndex.insertCollisionBox(ss.box,ft,T.get("text-ignore-placement"),M.bucketInstanceId,Fa&&Fa.placeable&&wu?wu:DA,Xe.ID),mA&&this.collisionIndex.insertCollisionBox(wa.box,Et,T.get("icon-ignore-placement"),M.bucketInstanceId,_l,Xe.ID),es&&ki&&this.collisionIndex.insertCollisionCircles(es.circles,ft,T.get("text-ignore-placement"),M.bucketInstanceId,DA,Xe.ID),_&&this.storeCollisionData(M.bucketInstanceId,Zr,Tr,ss,wa,es),Ln.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(M.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Ln.crossTileID]=new Sl((ki||Zt)&&!(ss!=null&&ss.occluded),(os||Mn)&&!(wa!=null&&wa.occluded),Yo||M.justReloaded),c[Ln.crossTileID]=!0};if(rn){if(a.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const Ln=M.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let Tr=Ln.length-1;Tr>=0;--Tr){const Zr=Ln[Tr];zn(M.symbolInstances.get(Zr),M.collisionArrays[Zr],Zr)}}else for(let Ln=a.symbolInstanceStart;Ln<a.symbolInstanceEnd;Ln++)zn(M.symbolInstances.get(Ln),M.collisionArrays[Ln],Ln);M.justReloaded=!1}storeCollisionData(a,c,_,M,T,z){if(_.textBox||_.iconBox){let q,te;this.collisionBoxArrays.has(a)?q=this.collisionBoxArrays.get(a):(q=new Map,this.collisionBoxArrays.set(a,q)),q.has(c)?te=q.get(c):(te={text:null,icon:null},q.set(c,te)),_.textBox&&(te.text=M.box),_.iconBox&&(te.icon=T.box)}if(z){let q=this.collisionCircleArrays[a];q===void 0&&(q=this.collisionCircleArrays[a]=[]);for(let te=0;te<z.circles.length;te+=4)q.push(z.circles[te+0]-eo),q.push(z.circles[te+1]-eo),q.push(z.circles[te+2]),q.push(z.collisionDetected?1:0)}}markUsedJustification(a,c,_,M){let T;T=M===o.ag.vertical?_.verticalPlacedTextSymbolIndex:{left:_.leftJustifiedTextSymbolIndex,center:_.centerJustifiedTextSymbolIndex,right:_.rightJustifiedTextSymbolIndex}[o.az(c)];const z=[_.leftJustifiedTextSymbolIndex,_.centerJustifiedTextSymbolIndex,_.rightJustifiedTextSymbolIndex,_.verticalPlacedTextSymbolIndex];for(const q of z)q>=0&&(a.text.placedSymbolArray.get(q).crossTileID=T>=0&&q!==T?0:_.crossTileID)}markUsedOrientation(a,c,_){const M=c===o.ag.horizontal||c===o.ag.horizontalOnly?c:0,T=c===o.ag.vertical?c:0,z=[_.leftJustifiedTextSymbolIndex,_.centerJustifiedTextSymbolIndex,_.rightJustifiedTextSymbolIndex];for(const q of z)a.text.placedSymbolArray.get(q).placedOrientation=M;_.verticalPlacedTextSymbolIndex&&(a.text.placedSymbolArray.get(_.verticalPlacedTextSymbolIndex).placedOrientation=T)}commit(a){this.commitTime=a,this.zoomAtLastRecencyCheck=this.transform.zoom;const c=this.prevPlacement;let _=!1;this.prevZoomAdjustment=c?c.zoomAdjustment(this.transform.zoom):0;const M=c?c.symbolFadeChange(a):1,T=c?c.opacities:{},z=c?c.variableOffsets:{},q=c?c.placedOrientations:{};for(const te in this.placements){const ae=this.placements[te],be=T[te];be?(this.opacities[te]=new Hi(be,M,ae.text,ae.icon),_=_||ae.text!==be.text.placed||ae.icon!==be.icon.placed):(this.opacities[te]=new Hi(null,M,ae.text,ae.icon,ae.skipFade),_=_||ae.text||ae.icon)}for(const te in T){const ae=T[te];if(!this.opacities[te]){const be=new Hi(ae,M,!1,!1);be.isHidden()||(this.opacities[te]=be,_=_||ae.text.placed||ae.icon.placed)}}for(const te in z)this.variableOffsets[te]||!this.opacities[te]||this.opacities[te].isHidden()||(this.variableOffsets[te]=z[te]);for(const te in q)this.placedOrientations[te]||!this.opacities[te]||this.opacities[te].isHidden()||(this.placedOrientations[te]=q[te]);if(c&&c.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");_?this.lastPlacementChangeTime=a:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=c?c.lastPlacementChangeTime:a)}updateLayerOpacities(a,c){const _={};for(const M of c){const T=M.getBucket(a);T&&M.latestFeatureIndex&&a.id===T.layerIds[0]&&this.updateBucketOpacities(T,M.tileID,_,M.collisionBoxArray)}}updateBucketOpacities(a,c,_,M){a.hasTextData()&&(a.text.opacityVertexArray.clear(),a.text.hasVisibleVertices=!1),a.hasIconData()&&(a.icon.opacityVertexArray.clear(),a.icon.hasVisibleVertices=!1),a.hasIconCollisionBoxData()&&a.iconCollisionBox.collisionVertexArray.clear(),a.hasTextCollisionBoxData()&&a.textCollisionBox.collisionVertexArray.clear();const T=a.layers[0],z=T.layout,q=new Hi(null,0,!1,!1,!0),te=z.get("text-allow-overlap"),ae=z.get("icon-allow-overlap"),be=T._unevaluatedLayout.hasValue("text-variable-anchor")||T._unevaluatedLayout.hasValue("text-variable-anchor-offset"),ke=z.get("text-rotation-alignment")==="map",Te=z.get("text-pitch-alignment")==="map",$e=z.get("icon-text-fit")!=="none",Xe=new Hi(null,0,te&&(ae||!a.hasIconData()||z.get("icon-optional")),ae&&(te||!a.hasTextData()||z.get("text-optional")),!0);!a.collisionArrays&&M&&(a.hasIconCollisionBoxData()||a.hasTextCollisionBoxData())&&a.deserializeCollisionBoxes(M);const mt=(ft,vt,Et)=>{for(let kt=0;kt<vt/4;kt++)ft.opacityVertexArray.emplaceBack(Et);ft.hasVisibleVertices=ft.hasVisibleVertices||Et!==Cn},ut=this.collisionBoxArrays.get(a.bucketInstanceId);for(let ft=0;ft<a.symbolInstances.length;ft++){const vt=a.symbolInstances.get(ft),{numHorizontalGlyphVertices:Et,numVerticalGlyphVertices:kt,crossTileID:Rt}=vt;let Ut=this.opacities[Rt];_[Rt]?Ut=q:Ut||(Ut=Xe,this.opacities[Rt]=Ut),_[Rt]=!0;const It=vt.numIconVertices>0,rn=this.placedOrientations[vt.crossTileID],Zt=rn===o.ag.vertical,Mn=rn===o.ag.horizontal||rn===o.ag.horizontalOnly;if(Et>0||kt>0){const bn=xt(Ut.text);mt(a.text,Et,Zt?Cn:bn),mt(a.text,kt,Mn?Cn:bn);const On=Ut.text.isHidden();[vt.rightJustifiedTextSymbolIndex,vt.centerJustifiedTextSymbolIndex,vt.leftJustifiedTextSymbolIndex].forEach(Tr=>{Tr>=0&&(a.text.placedSymbolArray.get(Tr).hidden=On||Zt?1:0)}),vt.verticalPlacedTextSymbolIndex>=0&&(a.text.placedSymbolArray.get(vt.verticalPlacedTextSymbolIndex).hidden=On||Mn?1:0);const zn=this.variableOffsets[vt.crossTileID];zn&&this.markUsedJustification(a,zn.anchor,vt,rn);const Ln=this.placedOrientations[vt.crossTileID];Ln&&(this.markUsedJustification(a,"left",vt,Ln),this.markUsedOrientation(a,Ln,vt))}if(It){const bn=xt(Ut.icon),On=!($e&&vt.verticalPlacedIconSymbolIndex&&Zt);vt.placedIconSymbolIndex>=0&&(mt(a.icon,vt.numIconVertices,On?bn:Cn),a.icon.placedSymbolArray.get(vt.placedIconSymbolIndex).hidden=Ut.icon.isHidden()),vt.verticalPlacedIconSymbolIndex>=0&&(mt(a.icon,vt.numVerticalIconVertices,On?Cn:bn),a.icon.placedSymbolArray.get(vt.verticalPlacedIconSymbolIndex).hidden=Ut.icon.isHidden())}const En=ut&&ut.has(ft)?ut.get(ft):{text:null,icon:null};if(a.hasIconCollisionBoxData()||a.hasTextCollisionBoxData()){const bn=a.collisionArrays[ft];if(bn){let On=new o.P(0,0);if(bn.textBox||bn.verticalTextBox){let zn=!0;if(be){const Ln=this.variableOffsets[Rt];Ln?(On=Xa(Ln.anchor,Ln.width,Ln.height,Ln.textOffset,Ln.textBoxScale),ke&&On._rotate(Te?-this.transform.bearingInRadians:this.transform.bearingInRadians)):zn=!1}if(bn.textBox||bn.verticalTextBox){let Ln;bn.textBox&&(Ln=Zt),bn.verticalTextBox&&(Ln=Mn),Lu(a.textCollisionBox.collisionVertexArray,Ut.text.placed,!zn||Ln,En.text,On.x,On.y)}}if(bn.iconBox||bn.verticalIconBox){const zn=!!(!Mn&&bn.verticalIconBox);let Ln;bn.iconBox&&(Ln=zn),bn.verticalIconBox&&(Ln=!zn),Lu(a.iconCollisionBox.collisionVertexArray,Ut.icon.placed,Ln,En.icon,$e?On.x:0,$e?On.y:0)}}}}if(a.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[a.bucketInstanceId]&&(this.retainedQueryData[a.bucketInstanceId].featureSortOrder=a.featureSortOrder),a.hasTextData()&&a.text.opacityVertexBuffer&&a.text.opacityVertexBuffer.updateData(a.text.opacityVertexArray),a.hasIconData()&&a.icon.opacityVertexBuffer&&a.icon.opacityVertexBuffer.updateData(a.icon.opacityVertexArray),a.hasIconCollisionBoxData()&&a.iconCollisionBox.collisionVertexBuffer&&a.iconCollisionBox.collisionVertexBuffer.updateData(a.iconCollisionBox.collisionVertexArray),a.hasTextCollisionBoxData()&&a.textCollisionBox.collisionVertexBuffer&&a.textCollisionBox.collisionVertexBuffer.updateData(a.textCollisionBox.collisionVertexArray),a.text.opacityVertexArray.length!==a.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${a.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${a.text.layoutVertexArray.length}) / 4`);if(a.icon.opacityVertexArray.length!==a.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${a.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${a.icon.layoutVertexArray.length}) / 4`);a.bucketInstanceId in this.collisionCircleArrays&&(a.collisionCircleArray=this.collisionCircleArrays[a.bucketInstanceId],delete this.collisionCircleArrays[a.bucketInstanceId])}symbolFadeChange(a){return this.fadeDuration===0?1:(a-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(a){return Math.max(0,(this.transform.zoom-a)/1.5)}hasTransitions(a){return this.stale||a-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(a,c){const _=this.zoomAtLastRecencyCheck===c?1-this.zoomAdjustment(c):1;return this.zoomAtLastRecencyCheck=c,this.commitTime+this.fadeDuration*_>a}setStale(){this.stale=!0}}function Lu(I,a,c,_,M,T){_&&_.length!==0||(_=[0,0,0,0]);const z=_[0]-eo,q=_[1]-eo,te=_[2]-eo,ae=_[3]-eo;I.emplaceBack(a?1:0,c?1:0,M||0,T||0,z,q),I.emplaceBack(a?1:0,c?1:0,M||0,T||0,te,q),I.emplaceBack(a?1:0,c?1:0,M||0,T||0,te,ae),I.emplaceBack(a?1:0,c?1:0,M||0,T||0,z,ae)}const Jl=Math.pow(2,25),wo=Math.pow(2,24),wr=Math.pow(2,17),Ta=Math.pow(2,16),Ss=Math.pow(2,9),Zs=Math.pow(2,8),Ye=Math.pow(2,1);function xt(I){if(I.opacity===0&&!I.placed)return 0;if(I.opacity===1&&I.placed)return 4294967295;const a=I.placed?1:0,c=Math.floor(127*I.opacity);return c*Jl+a*wo+c*wr+a*Ta+c*Ss+a*Zs+c*Ye+a}const Cn=0;class Qn{constructor(a){this._sortAcrossTiles=a.layout.get("symbol-z-order")!=="viewport-y"&&!a.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(a,c,_,M,T){const z=this._bucketParts;for(;this._currentTileIndex<a.length;)if(c.getBucketParts(z,M,a[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,T())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,z.sort((q,te)=>q.sortKey-te.sortKey));this._currentPartIndex<z.length;)if(c.placeLayerBucketPart(z[this._currentPartIndex],this._seenCrossTileIDs,_),this._currentPartIndex++,T())return!0;return!1}}class fn{constructor(a,c,_,M,T,z,q,te){this.placement=new Yi(a,c,z,q,te),this._currentPlacementIndex=_.length-1,this._forceFullPlacement=M,this._showCollisionBoxes=T,this._done=!1}isDone(){return this._done}continuePlacement(a,c,_){const M=O.now(),T=()=>!this._forceFullPlacement&&O.now()-M>2;for(;this._currentPlacementIndex>=0;){const z=c[a[this._currentPlacementIndex]],q=this.placement.collisionIndex.transform.zoom;if(z.type==="symbol"&&(!z.minzoom||z.minzoom<=q)&&(!z.maxzoom||z.maxzoom>q)){if(this._inProgressLayer||(this._inProgressLayer=new Qn(z)),this._inProgressLayer.continuePlacement(_[z.source],this.placement,this._showCollisionBoxes,z,T))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(a){return this.placement.commit(a),this.placement}}const ur=512/o.Z/2;class Di{constructor(a,c,_){this.tileID=a,this.bucketInstanceId=_,this._symbolsByKey={};const M=new Map;for(let T=0;T<c.length;T++){const z=c.get(T),q=z.key,te=M.get(q);te?te.push(z):M.set(q,[z])}for(const[T,z]of M){const q={positions:z.map(te=>({x:Math.floor(te.anchorX*ur),y:Math.floor(te.anchorY*ur)})),crossTileIDs:z.map(te=>te.crossTileID)};if(q.positions.length>128){const te=new o.aB(q.positions.length,16,Uint16Array);for(const{x:ae,y:be}of q.positions)te.add(ae,be);te.finish(),delete q.positions,q.index=te}this._symbolsByKey[T]=q}}getScaledCoordinates(a,c){const{x:_,y:M,z:T}=this.tileID.canonical,{x:z,y:q,z:te}=c.canonical,ae=ur/Math.pow(2,te-T),be=(q*o.Z+a.anchorY)*ae,ke=M*o.Z*ur;return{x:Math.floor((z*o.Z+a.anchorX)*ae-_*o.Z*ur),y:Math.floor(be-ke)}}findMatches(a,c,_){const M=this.tileID.canonical.z<c.canonical.z?1:Math.pow(2,this.tileID.canonical.z-c.canonical.z);for(let T=0;T<a.length;T++){const z=a.get(T);if(z.crossTileID)continue;const q=this._symbolsByKey[z.key];if(!q)continue;const te=this.getScaledCoordinates(z,c);if(q.index){const ae=q.index.range(te.x-M,te.y-M,te.x+M,te.y+M).sort();for(const be of ae){const ke=q.crossTileIDs[be];if(!_[ke]){_[ke]=!0,z.crossTileID=ke;break}}}else if(q.positions)for(let ae=0;ae<q.positions.length;ae++){const be=q.positions[ae],ke=q.crossTileIDs[ae];if(Math.abs(be.x-te.x)<=M&&Math.abs(be.y-te.y)<=M&&!_[ke]){_[ke]=!0,z.crossTileID=ke;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:a})=>a)}}class vo{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class rs{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(a){const c=Math.round((a-this.lng)/360);if(c!==0)for(const _ in this.indexes){const M=this.indexes[_],T={};for(const z in M){const q=M[z];q.tileID=q.tileID.unwrapTo(q.tileID.wrap+c),T[q.tileID.key]=q}this.indexes[_]=T}this.lng=a}addBucket(a,c,_){if(this.indexes[a.overscaledZ]&&this.indexes[a.overscaledZ][a.key]){if(this.indexes[a.overscaledZ][a.key].bucketInstanceId===c.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(a.overscaledZ,this.indexes[a.overscaledZ][a.key])}for(let T=0;T<c.symbolInstances.length;T++)c.symbolInstances.get(T).crossTileID=0;this.usedCrossTileIDs[a.overscaledZ]||(this.usedCrossTileIDs[a.overscaledZ]={});const M=this.usedCrossTileIDs[a.overscaledZ];for(const T in this.indexes){const z=this.indexes[T];if(Number(T)>a.overscaledZ)for(const q in z){const te=z[q];te.tileID.isChildOf(a)&&te.findMatches(c.symbolInstances,a,M)}else{const q=z[a.scaledTo(Number(T)).key];q&&q.findMatches(c.symbolInstances,a,M)}}for(let T=0;T<c.symbolInstances.length;T++){const z=c.symbolInstances.get(T);z.crossTileID||(z.crossTileID=_.generate(),M[z.crossTileID]=!0)}return this.indexes[a.overscaledZ]===void 0&&(this.indexes[a.overscaledZ]={}),this.indexes[a.overscaledZ][a.key]=new Di(a,c.symbolInstances,c.bucketInstanceId),!0}removeBucketCrossTileIDs(a,c){for(const _ of c.getCrossTileIDsLists())for(const M of _)delete this.usedCrossTileIDs[a][M]}removeStaleBuckets(a){let c=!1;for(const _ in this.indexes){const M=this.indexes[_];for(const T in M)a[M[T].bucketInstanceId]||(this.removeBucketCrossTileIDs(_,M[T]),delete M[T],c=!0)}return c}}class ua{constructor(){this.layerIndexes={},this.crossTileIDs=new vo,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(a,c,_){let M=this.layerIndexes[a.id];M===void 0&&(M=this.layerIndexes[a.id]=new rs);let T=!1;const z={};M.handleWrapJump(_);for(const q of c){const te=q.getBucket(a);te&&a.id===te.layerIds[0]&&(te.bucketInstanceId||(te.bucketInstanceId=++this.maxBucketInstanceId),M.addBucket(q.tileID,te,this.crossTileIDs)&&(T=!0),z[te.bucketInstanceId]=!0)}return M.removeStaleBuckets(z)&&(T=!0),T}pruneUnusedLayers(a){const c={};a.forEach(_=>{c[_]=!0});for(const _ in this.layerIndexes)c[_]||delete this.layerIndexes[_]}}var eu="void main() {fragColor=vec4(1.0);}";const ii={prelude:qi(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:qi("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:qi("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:qi(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:qi(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:qi(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:qi(eu,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:qi(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:qi(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:qi("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:qi("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:qi("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:qi(eu,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:qi(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:qi(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:qi(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:qi(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:qi(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:qi(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:qi(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));fragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:qi(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:qi(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:qi(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:qi(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:qi(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:qi(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:qi(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:qi(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:qi(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:qi("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:qi("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:qi("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:qi("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:qi(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:qi("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function qi(I,a){const c=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,_=a.match(/in ([\w]+) ([\w]+)/g),M=I.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),T=a.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),z=T?T.concat(M):M,q={};return{fragmentSource:I=I.replace(c,(te,ae,be,ke,Te)=>(q[Te]=!0,ae==="define"?`
#ifndef HAS_UNIFORM_u_${Te}
in ${be} ${ke} ${Te};
#else
uniform ${be} ${ke} u_${Te};
#endif
`:`
#ifdef HAS_UNIFORM_u_${Te}
    ${be} ${ke} ${Te} = u_${Te};
#endif
`)),vertexSource:a=a.replace(c,(te,ae,be,ke,Te)=>{const $e=ke==="float"?"vec2":"vec4",Xe=Te.match(/color/)?"color":$e;return q[Te]?ae==="define"?`
#ifndef HAS_UNIFORM_u_${Te}
uniform lowp float u_${Te}_t;
in ${be} ${$e} a_${Te};
out ${be} ${ke} ${Te};
#else
uniform ${be} ${ke} u_${Te};
#endif
`:Xe==="vec4"?`
#ifndef HAS_UNIFORM_u_${Te}
    ${Te} = a_${Te};
#else
    ${be} ${ke} ${Te} = u_${Te};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Te}
    ${Te} = unpack_mix_${Xe}(a_${Te}, u_${Te}_t);
#else
    ${be} ${ke} ${Te} = u_${Te};
#endif
`:ae==="define"?`
#ifndef HAS_UNIFORM_u_${Te}
uniform lowp float u_${Te}_t;
in ${be} ${$e} a_${Te};
#else
uniform ${be} ${ke} u_${Te};
#endif
`:Xe==="vec4"?`
#ifndef HAS_UNIFORM_u_${Te}
    ${be} ${ke} ${Te} = a_${Te};
#else
    ${be} ${ke} ${Te} = u_${Te};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Te}
    ${be} ${ke} ${Te} = unpack_mix_${Xe}(a_${Te}, u_${Te}_t);
#else
    ${be} ${ke} ${Te} = u_${Te};
#endif
`}),staticAttributes:_,staticUniforms:z}}class Aa{constructor(a,c,_){this.vertexBuffer=a,this.indexBuffer=c,this.segments=_}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var Cs=o.aC([{name:"a_pos",type:"Int16",components:2}]);const xi="#define PROJECTION_MERCATOR",uA="mercator";class Ja{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return uA}get shaderDefine(){return xi}get shaderPreludeCode(){return ii.projectionMercator}get vertexShaderPreludeCode(){return ii.projectionMercator.vertexSource}get subdivisionGranularity(){return o.aD.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(a){}getMeshFromTileID(a,c,_,M,T){if(this._cachedMesh)return this._cachedMesh;const z=new o.aE;z.emplaceBack(0,0),z.emplaceBack(o.Z,0),z.emplaceBack(0,o.Z),z.emplaceBack(o.Z,o.Z);const q=a.createVertexBuffer(z,Cs.members),te=o.aF.simpleSegment(0,0,4,2),ae=new o.aG;ae.emplaceBack(1,0,2),ae.emplaceBack(1,2,3);const be=a.createIndexBuffer(ae);return this._cachedMesh=new Aa(q,be,te),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(a){}}function oi(I,a){const c=o.ad(a.lat,-85.051129,o.aI);return new o.P(o.U(a.lng)*I,o.S(c)*I)}function to(I,a){return new o.$(a.x/I,a.y/I).toLngLat()}function $o(I){return I.cameraToCenterDistance*Math.min(.85*Math.tan(o.ac(90-I.pitch)),Math.tan(o.ac(89.25-I.pitch)))}function Qo(I,a){const c=I.canonical,_=a/o.aH(c.z),M=c.x+Math.pow(2,c.z)*I.wrap,T=o.as(new Float64Array(16));return o.L(T,T,[M*_,c.y*_,0]),o.M(T,T,[_/o.Z,_/o.Z,1]),T}function js(I,a,c,_,M){const T=o.$.fromLngLat(I,a),z=M*o.aJ(1,I.lat),q=z*Math.cos(o.ac(c)),te=Math.sqrt(z*z-q*q),ae=te*Math.sin(o.ac(-_)),be=te*Math.cos(o.ac(-_));return new o.$(T.x+ae,T.y+be,T.z+q)}class Es{constructor(a=0,c=0,_=0,M=0){if(isNaN(a)||a<0||isNaN(c)||c<0||isNaN(_)||_<0||isNaN(M)||M<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=a,this.bottom=c,this.left=_,this.right=M}interpolate(a,c,_){return c.top!=null&&a.top!=null&&(this.top=o.B.number(a.top,c.top,_)),c.bottom!=null&&a.bottom!=null&&(this.bottom=o.B.number(a.bottom,c.bottom,_)),c.left!=null&&a.left!=null&&(this.left=o.B.number(a.left,c.left,_)),c.right!=null&&a.right!=null&&(this.right=o.B.number(a.right,c.right,_)),this}getCenter(a,c){const _=o.ad((this.left+a-this.right)/2,0,a),M=o.ad((this.top+c-this.bottom)/2,0,c);return new o.P(_,M)}equals(a){return this.top===a.top&&this.bottom===a.bottom&&this.left===a.left&&this.right===a.right}clone(){return new Es(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Xs(I,a){if(!I.renderWorldCopies||I.lngRange)return;const c=a.lng-I.center.lng;a.lng+=c>180?-360:c<-180?360:0}function Js(I){return Math.max(0,Math.floor(I))}class Au{constructor(a,c,_,M,T,z){this._callbacks=a,this._tileSize=512,this._renderWorldCopies=z===void 0||!!z,this._minZoom=c||0,this._maxZoom=_||22,this._minPitch=M??0,this._maxPitch=T??60,this.setMaxBounds(),this._width=0,this._height=0,this._center=new o.Q(0,0),this._elevation=0,this._zoom=0,this._tileZoom=Js(this._zoom),this._scale=o.aH(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new Es,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(a,c,_){this._latRange=a.latRange,this._lngRange=a.lngRange,this._width=a.width,this._height=a.height,this._center=a.center,this._elevation=a.elevation,this._minElevationForCurrentTile=a.minElevationForCurrentTile,this._zoom=a.zoom,this._tileZoom=Js(this._zoom),this._scale=o.aH(this._zoom),this._bearingInRadians=a.bearingInRadians,this._fovInRadians=a.fovInRadians,this._pitchInRadians=a.pitchInRadians,this._rollInRadians=a.rollInRadians,this._unmodified=a.unmodified,this._edgeInsets=new Es(a.padding.top,a.padding.bottom,a.padding.left,a.padding.right),this._minZoom=a.minZoom,this._maxZoom=a.maxZoom,this._minPitch=a.minPitch,this._maxPitch=a.maxPitch,this._renderWorldCopies=a.renderWorldCopies,this._cameraToCenterDistance=a.cameraToCenterDistance,this._nearZ=a.nearZ,this._farZ=a.farZ,this._autoCalculateNearFarZ=!_&&a.autoCalculateNearFarZ,c&&this._constrain(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(a){this._minElevationForCurrentTile=a}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(a){this._minZoom!==a&&(this._minZoom=a,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(a){this._maxZoom!==a&&(this._maxZoom=a,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(a){this._minPitch!==a&&(this._minPitch=a,this.setPitch(Math.max(this.pitch,a)))}get maxPitch(){return this._maxPitch}setMaxPitch(a){this._maxPitch!==a&&(this._maxPitch=a,this.setPitch(Math.min(this.pitch,a)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(a){a===void 0?a=!0:a===null&&(a=!1),this._renderWorldCopies=a}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new o.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(a){const c=o.aK(a,-180,180)*Math.PI/180;var _,M,T,z,q,te,ae,be,ke;this._bearingInRadians!==c&&(this._unmodified=!1,this._bearingInRadians=c,this._calcMatrices(),this._rotationMatrix=y(),_=this._rotationMatrix,T=-this._bearingInRadians,z=(M=this._rotationMatrix)[0],q=M[1],te=M[2],ae=M[3],be=Math.sin(T),ke=Math.cos(T),_[0]=z*ke+te*be,_[1]=q*ke+ae*be,_[2]=z*-be+te*ke,_[3]=q*-be+ae*ke)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(a){const c=o.ad(a,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==c&&(this._unmodified=!1,this._pitchInRadians=c,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(a){const c=a/180*Math.PI;this._rollInRadians!==c&&(this._unmodified=!1,this._rollInRadians=c,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return o.aL(this._fovInRadians)}setFov(a){a=o.ad(a,.1,150),this.fov!==a&&(this._unmodified=!1,this._fovInRadians=o.ac(a),this._calcMatrices())}get zoom(){return this._zoom}setZoom(a){const c=this.getConstrained(this._center,a).zoom;this._zoom!==c&&(this._unmodified=!1,this._zoom=c,this._tileZoom=Math.max(0,Math.floor(c)),this._scale=o.aH(c),this._constrain(),this._calcMatrices())}get center(){return this._center}setCenter(a){a.lat===this._center.lat&&a.lng===this._center.lng||(this._unmodified=!1,this._center=a,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(a){a!==this._elevation&&(this._elevation=a,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(a){this._edgeInsets.equals(a)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,a,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(a,c){this._autoCalculateNearFarZ=!1,this._nearZ=a,this._farZ=c,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(a){return this._edgeInsets.equals(a)}interpolatePadding(a,c,_){this._unmodified=!1,this._edgeInsets.interpolate(a,c,_),this._constrain(),this._calcMatrices()}resize(a,c,_=!0){this._width=a,this._height=c,_&&this._constrain(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new Lt([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(a){a?(this._lngRange=[a.getWest(),a.getEast()],this._latRange=[a.getSouth(),a.getNorth()],this._constrain()):(this._lngRange=null,this._latRange=[-85.051129,o.aI])}getConstrained(a,c){return this._callbacks.getConstrained(a,c)}getCameraQueryGeometry(a,c){if(c.length===1)return[c[0],a];{let _=a.x,M=a.y,T=a.x,z=a.y;for(const q of c)_=Math.min(_,q.x),M=Math.min(M,q.y),T=Math.max(T,q.x),z=Math.max(z,q.y);return[new o.P(_,M),new o.P(T,M),new o.P(T,z),new o.P(_,z),new o.P(_,M)]}}_constrain(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const a=this._unmodified,{center:c,zoom:_}=this.getConstrained(this.center,this.zoom);this.setCenter(c),this.setZoom(_),this._unmodified=a,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let a=o.as(new Float64Array(16));o.M(a,a,[this._width/2,-this._height/2,1]),o.L(a,a,[1,-1,0]),this._clipSpaceToPixelsMatrix=a,a=o.as(new Float64Array(16)),o.M(a,a,[1,-1,1]),o.L(a,a,[-1,-1,0]),o.M(a,a,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=a,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(a,c,_,M){const T=_!==void 0?_:this.bearing,z=M=M!==void 0?M:this.pitch,q=o.$.fromLngLat(a,c),te=-Math.cos(o.ac(z)),ae=Math.sin(o.ac(z)),be=ae*Math.sin(o.ac(T)),ke=-ae*Math.cos(o.ac(T));let Te=this.elevation;const $e=c-Te;let Xe;te*$e>=0||Math.abs(te)<.1?(Xe=1e4,Te=c+Xe*te):Xe=-$e/te;let mt,ut,ft=o.aM(1,q.y),vt=0;do{if(vt+=1,vt>10)break;ut=Xe/ft,mt=new o.$(q.x+be*ut,q.y+ke*ut),ft=1/mt.meterInMercatorCoordinateUnits()}while(Math.abs(Xe-ut*ft)>1e-12);return{center:mt.toLngLat(),elevation:Te,zoom:o.aa(this.height/2/Math.tan(this.fovInRadians/2)/ut/this.tileSize)}}recalculateZoomAndCenter(a){if(this.elevation-a==0)return;const c=o.aJ(1,this.center.lat)*this.worldSize,_=this.cameraToCenterDistance/c,M=o.$.fromLngLat(this.center,this.elevation),T=js(this.center,this.elevation,this.pitch,this.bearing,_);this._elevation=a;const z=this.calculateCenterFromCameraLngLatAlt(T.toLngLat(),o.aM(T.z,M.y),this.bearing,this.pitch);this._elevation=z.elevation,this._center=z.center,this.setZoom(z.zoom)}getCameraPoint(){const a=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new o.P(a*Math.sin(this.rollInRadians),a*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const a=o.aJ(1,this.center.lat)*this.worldSize;return js(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/a).toLngLat()}getMercatorTileCoordinates(a){if(!a)return[0,0,1,1];const c=a.canonical.z>=0?1<<a.canonical.z:Math.pow(2,a.canonical.z);return[a.canonical.x/c,a.canonical.y/c,1/c/o.Z,1/c/o.Z]}}class Ns{constructor(a,c){this.min=a,this.max=c,this.center=o.aN([],o.aO([],this.min,this.max),.5)}quadrant(a){const c=[a%2==0,a<2],_=o.aP(this.min),M=o.aP(this.max);for(let T=0;T<c.length;T++)_[T]=c[T]?this.min[T]:this.center[T],M[T]=c[T]?this.center[T]:this.max[T];return M[2]=this.max[2],new Ns(_,M)}distanceX(a){return Math.max(Math.min(this.max[0],a[0]),this.min[0])-a[0]}distanceY(a){return Math.max(Math.min(this.max[1],a[1]),this.min[1])-a[1]}intersectsFrustum(a){let c=!0;for(let _=0;_<a.planes.length;_++){const M=this.intersectsPlane(a.planes[_]);if(M===0)return 0;M===1&&(c=!1)}return c?2:a.aabb.min[0]>this.max[0]||a.aabb.min[1]>this.max[1]||a.aabb.min[2]>this.max[2]||a.aabb.max[0]<this.min[0]||a.aabb.max[1]<this.min[1]||a.aabb.max[2]<this.min[2]?0:1}intersectsPlane(a){let c=a[3],_=a[3];for(let M=0;M<3;M++)a[M]>0?(c+=a[M]*this.min[M],_+=a[M]*this.max[M]):(_+=a[M]*this.min[M],c+=a[M]*this.max[M]);return c>=0?2:_<0?0:1}}class Oi{distanceToTile2d(a,c,_,M){const T=M.distanceX([a,c]),z=M.distanceY([a,c]);return Math.hypot(T,z)}getWrap(a,c,_){return _}getTileAABB(a,c,_,M){var T,z;let q=_,te=_;if(M.terrain){const be=new o.Y(a.z,c,a.z,a.x,a.y),ke=M.terrain.getMinMaxElevation(be);q=(T=ke.minElevation)!==null&&T!==void 0?T:_,te=(z=ke.maxElevation)!==null&&z!==void 0?z:_}const ae=1<<a.z;return new Ns([c+a.x/ae,a.y/ae,q],[c+(a.x+1)/ae,(a.y+1)/ae,te])}allowVariableZoom(a,c){const _=a.fov*(Math.abs(Math.cos(a.rollInRadians))*a.height+Math.abs(Math.sin(a.rollInRadians))*a.width)/a.height,M=o.ad(78.5-_/2,0,60);return!!c.terrain||a.pitch>M}allowWorldCopies(){return!0}recalculateCache(){}}class is{constructor(a,c,_){this.points=a,this.planes=c,this.aabb=_}static fromInvProjectionMatrix(a,c=1,_=0){const M=Math.pow(2,_),T=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(ae=>{const be=1/(ae=o.ao([],ae,a))[3]/c*M;return o.aQ(ae,ae,[be,be,1/ae[3],be])}),z=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(ae=>{const be=o.aR([],T[ae[0]],T[ae[1]]),ke=o.aR([],T[ae[2]],T[ae[1]]),Te=o.aS([],o.aT([],be,ke)),$e=-o.aU(Te,T[ae[1]]);return Te.concat($e)}),q=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],te=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const ae of T)for(let be=0;be<3;be++)q[be]=Math.min(q[be],ae[be]),te[be]=Math.max(te[be],ae[be]);return new is(T,z,new Ns(q,te))}}class ea{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(a){this._helper.setMinZoom(a)}setMaxZoom(a){this._helper.setMaxZoom(a)}setMinPitch(a){this._helper.setMinPitch(a)}setMaxPitch(a){this._helper.setMaxPitch(a)}setRenderWorldCopies(a){this._helper.setRenderWorldCopies(a)}setBearing(a){this._helper.setBearing(a)}setPitch(a){this._helper.setPitch(a)}setRoll(a){this._helper.setRoll(a)}setFov(a){this._helper.setFov(a)}setZoom(a){this._helper.setZoom(a)}setCenter(a){this._helper.setCenter(a)}setElevation(a){this._helper.setElevation(a)}setMinElevationForCurrentTile(a){this._helper.setMinElevationForCurrentTile(a)}setPadding(a){this._helper.setPadding(a)}interpolatePadding(a,c,_){return this._helper.interpolatePadding(a,c,_)}isPaddingEqual(a){return this._helper.isPaddingEqual(a)}resize(a,c,_=!0){this._helper.resize(a,c,_)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(a){this._helper.setMaxBounds(a)}overrideNearFarZ(a,c){this._helper.overrideNearFarZ(a,c)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(a){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),a)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(a,c){}constructor(a,c,_,M,T){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this._helper=new Au({calcMatrices:()=>{this._calcMatrices()},getConstrained:(z,q)=>this.getConstrained(z,q)},a,c,_,M,T),this._coveringTilesDetailsProvider=new Oi}clone(){const a=new ea;return a.apply(this),a}apply(a,c,_){this._helper.apply(a,c,_)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(a){const c=[new o.aV(0,a)];if(this._helper._renderWorldCopies){const _=this.screenPointToMercatorCoordinate(new o.P(0,0)),M=this.screenPointToMercatorCoordinate(new o.P(this._helper._width,0)),T=this.screenPointToMercatorCoordinate(new o.P(this._helper._width,this._helper._height)),z=this.screenPointToMercatorCoordinate(new o.P(0,this._helper._height)),q=Math.floor(Math.min(_.x,M.x,T.x,z.x)),te=Math.floor(Math.max(_.x,M.x,T.x,z.x)),ae=1;for(let be=q-ae;be<=te+ae;be++)be!==0&&c.push(new o.aV(be,a))}return c}getCameraFrustum(){return is.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(a){const c=this.screenPointToLocation(this.centerPoint,a),_=a?a.getElevationForLngLatZoom(c,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(_)}setLocationAtPoint(a,c){const _=o.aJ(this.elevation,this.center.lat),M=this.screenPointToMercatorCoordinateAtZ(c,_),T=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,_),z=o.$.fromLngLat(a),q=new o.$(z.x-(M.x-T.x),z.y-(M.y-T.y));this.setCenter(q==null?void 0:q.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(a,c){return c?this.coordinatePoint(o.$.fromLngLat(a),c.getElevationForLngLatZoom(a,this._helper._tileZoom),this._pixelMatrix3D):this.coordinatePoint(o.$.fromLngLat(a))}screenPointToLocation(a,c){var _;return(_=this.screenPointToMercatorCoordinate(a,c))===null||_===void 0?void 0:_.toLngLat()}screenPointToMercatorCoordinate(a,c){if(c){const _=c.pointCoordinate(a);if(_!=null)return _}return this.screenPointToMercatorCoordinateAtZ(a)}screenPointToMercatorCoordinateAtZ(a,c){const _=c||0,M=[a.x,a.y,0,1],T=[a.x,a.y,1,1];o.ao(M,M,this._pixelMatrixInverse),o.ao(T,T,this._pixelMatrixInverse);const z=M[3],q=T[3],te=M[1]/z,ae=T[1]/q,be=M[2]/z,ke=T[2]/q,Te=be===ke?0:(_-be)/(ke-be);return new o.$(o.B.number(M[0]/z,T[0]/q,Te)/this.worldSize,o.B.number(te,ae,Te)/this.worldSize,_)}coordinatePoint(a,c=0,_=this._pixelMatrix){const M=[a.x*this.worldSize,a.y*this.worldSize,c,1];return o.ao(M,M,_),new o.P(M[0]/M[3],M[1]/M[3])}getBounds(){const a=Math.max(0,this._helper._height/2-$o(this));return new Lt().extend(this.screenPointToLocation(new o.P(0,a))).extend(this.screenPointToLocation(new o.P(this._helper._width,a))).extend(this.screenPointToLocation(new o.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new o.P(0,this._helper._height)))}isPointOnMapSurface(a,c){return c?c.pointCoordinate(a)!=null:a.y>this.height/2-$o(this)}calculatePosMatrix(a,c=!1,_){var M;const T=(M=a.key)!==null&&M!==void 0?M:o.aW(a.wrap,a.canonical.z,a.canonical.z,a.canonical.x,a.canonical.y),z=c?this._alignedPosMatrixCache:this._posMatrixCache;if(z.has(T)){const ae=z.get(T);return _?ae.f32:ae.f64}const q=Qo(a,this.worldSize);o.N(q,c?this._alignedProjMatrix:this._viewProjMatrix,q);const te={f64:q,f32:new Float32Array(q)};return z.set(T,te),_?te.f32:te.f64}calculateFogMatrix(a){const c=a.key,_=this._fogMatrixCacheF32;if(_.has(c))return _.get(c);const M=Qo(a,this.worldSize);return o.N(M,this._fogMatrix,M),_.set(c,new Float32Array(M)),_.get(c)}getConstrained(a,c){c=o.ad(+c,this.minZoom,this.maxZoom);const _={center:new o.Q(a.lng,a.lat),zoom:c};let M=this._helper._lngRange;this._helper._renderWorldCopies||M!==null||(M=[-179.9999999999,180-1e-10]);const T=this.tileSize*o.aH(_.zoom);let z=0,q=T,te=0,ae=T,be=0,ke=0;const{x:Te,y:$e}=this.size;if(this._helper._latRange){const Et=this._helper._latRange;z=o.S(Et[1])*T,q=o.S(Et[0])*T,q-z<$e&&(be=$e/(q-z))}M&&(te=o.aK(o.U(M[0])*T,0,T),ae=o.aK(o.U(M[1])*T,0,T),ae<te&&(ae+=T),ae-te<Te&&(ke=Te/(ae-te)));const{x:Xe,y:mt}=oi(T,a);let ut,ft;const vt=Math.max(ke||0,be||0);if(vt){const Et=new o.P(ke?(ae+te)/2:Xe,be?(q+z)/2:mt);return _.center=to(T,Et).wrap(),_.zoom+=o.aa(vt),_}if(this._helper._latRange){const Et=$e/2;mt-Et<z&&(ft=z+Et),mt+Et>q&&(ft=q-Et)}if(M){const Et=(te+ae)/2;let kt=Xe;this._helper._renderWorldCopies&&(kt=o.aK(Xe,Et-T/2,Et+T/2));const Rt=Te/2;kt-Rt<te&&(ut=te+Rt),kt+Rt>ae&&(ut=ae-Rt)}if(ut!==void 0||ft!==void 0){const Et=new o.P(ut??Xe,ft??mt);_.center=to(T,Et).wrap()}return _}calculateCenterFromCameraLngLatAlt(a,c,_,M){return this._helper.calculateCenterFromCameraLngLatAlt(a,c,_,M)}_calculateNearFarZIfNeeded(a,c,_){if(!this._helper.autoCalculateNearFarZ)return;const M=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),T=a-M*this._helper._pixelPerMeter/Math.cos(c),z=M<0?T:a,q=Math.PI/2+this.pitchInRadians,te=o.ac(this.fov)*(Math.abs(Math.cos(o.ac(this.roll)))*this.height+Math.abs(Math.sin(o.ac(this.roll)))*this.width)/this.height*(.5+_.y/this.height),ae=Math.sin(te)*z/Math.sin(o.ad(Math.PI-q-te,.01,Math.PI-.01)),be=$o(this),ke=Math.atan(be/this._helper.cameraToCenterDistance),Te=o.ac(.75),$e=ke>Te?2*ke*(.5+_.y/(2*be)):Te,Xe=Math.sin($e)*z/Math.sin(o.ad(Math.PI-q-$e,.01,Math.PI-.01)),mt=Math.min(ae,Xe);this._helper._farZ=1.01*(Math.cos(Math.PI/2-c)*mt+z),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const a=this.centerOffset,c=oi(this.worldSize,this.center),_=c.x,M=c.y;this._helper._pixelPerMeter=o.aJ(1,this.center.lat)*this.worldSize;const T=o.ac(Math.min(this.pitch,89.25)),z=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(T));let q;this._calculateNearFarZIfNeeded(z,T,a),q=new Float64Array(16),o.aX(q,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),o.ai(this._invProjMatrix,q),q[8]=2*-a.x/this._helper._width,q[9]=2*a.y/this._helper._height,this._projectionMatrix=o.aY(q),o.M(q,q,[1,-1,1]),o.L(q,q,[0,0,-this._helper.cameraToCenterDistance]),o.aZ(q,q,-this.rollInRadians),o.a_(q,q,this.pitchInRadians),o.aZ(q,q,-this.bearingInRadians),o.L(q,q,[-_,-M,0]),this._mercatorMatrix=o.M([],q,[this.worldSize,this.worldSize,this.worldSize]),o.M(q,q,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=o.N(new Float64Array(16),this.clipSpaceToPixelsMatrix,q),o.L(q,q,[0,0,-this.elevation]),this._viewProjMatrix=q,this._invViewProjMatrix=o.ai([],q);const te=[0,0,-1,1];o.ao(te,te,this._invViewProjMatrix),this._cameraPosition=[te[0]/te[3],te[1]/te[3],te[2]/te[3]],this._fogMatrix=new Float64Array(16),o.aX(this._fogMatrix,this.fovInRadians,this.width/this.height,z,this._helper._farZ),this._fogMatrix[8]=2*-a.x/this.width,this._fogMatrix[9]=2*a.y/this.height,o.M(this._fogMatrix,this._fogMatrix,[1,-1,1]),o.L(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),o.aZ(this._fogMatrix,this._fogMatrix,-this.rollInRadians),o.a_(this._fogMatrix,this._fogMatrix,this.pitchInRadians),o.aZ(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),o.L(this._fogMatrix,this._fogMatrix,[-_,-M,0]),o.M(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),o.L(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=o.N(new Float64Array(16),this.clipSpaceToPixelsMatrix,q);const ae=this._helper._width%2/2,be=this._helper._height%2/2,ke=Math.cos(this.bearingInRadians),Te=Math.sin(-this.bearingInRadians),$e=_-Math.round(_)+ke*ae+Te*be,Xe=M-Math.round(M)+ke*be+Te*ae,mt=new Float64Array(q);if(o.L(mt,mt,[$e>.5?$e-1:$e,Xe>.5?Xe-1:Xe,0]),this._alignedProjMatrix=mt,q=o.ai(new Float64Array(16),this._pixelMatrix),!q)throw new Error("failed to invert matrix");this._pixelMatrixInverse=q,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const a=this.screenPointToMercatorCoordinate(new o.P(0,0)),c=[a.x*this.worldSize,a.y*this.worldSize,0,1];return o.ao(c,c,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const a=o.aJ(1,this.center.lat)*this.worldSize;return js(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/a).toLngLat()}lngLatToCameraDepth(a,c){const _=o.$.fromLngLat(a),M=[_.x*this.worldSize,_.y*this.worldSize,c,1];return o.ao(M,M,this._viewProjMatrix),M[2]/M[3]}getProjectionData(a){const{overscaledTileID:c,aligned:_,applyTerrainMatrix:M}=a,T=this._helper.getMercatorTileCoordinates(c),z=c?this.calculatePosMatrix(c,_,!0):null;let q;return q=c&&c.terrainRttPosMatrix32f&&M?c.terrainRttPosMatrix32f:z||o.a$(),{mainMatrix:q,tileMercatorCoords:T,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:q}}isLocationOccluded(a){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(a,c,_){return 1}transformLightDirection(a){return o.aP(a)}getRayDirectionFromPixel(a){throw new Error("Not implemented.")}projectTileCoordinates(a,c,_,M){const T=this.calculatePosMatrix(_);let z;M?(z=[a,c,M(a,c),1],o.ao(z,z,T)):(z=[a,c,0,1],Bi(z,z,T));const q=z[3];return{point:new o.P(z[0]/q,z[1]/q),signedDistanceFromCamera:q,isOccluded:!1}}populateCache(a){for(const c of a)this.calculatePosMatrix(c)}getMatrixForModel(a,c){const _=o.$.fromLngLat(a,c),M=_.meterInMercatorCoordinateUnits(),T=o.b0();return o.L(T,T,[_.x,_.y,_.z]),o.aZ(T,T,Math.PI),o.a_(T,T,Math.PI/2),o.M(T,T,[-M,M,M]),T}getProjectionDataForCustomLayer(a=!0){const c=new o.Y(0,0,0,0,0),_=this.getProjectionData({overscaledTileID:c,applyGlobeMatrix:a}),M=Qo(c,this.worldSize);o.N(M,this._viewProjMatrix,M),_.tileMercatorCoords=[0,0,1,1];const T=[o.Z,o.Z,this.worldSize/this._helper.pixelsPerMeter],z=o.b1();return o.M(z,M,T),_.fallbackMatrix=z,_.mainMatrix=z,_}getFastPathSimpleProjectionMatrix(a){return this.calculatePosMatrix(a)}}function va(){o.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function As(I){if(I.useSlerp)if(I.k<1){const a=o.b2(I.startEulerAngles.roll,I.startEulerAngles.pitch,I.startEulerAngles.bearing),c=o.b2(I.endEulerAngles.roll,I.endEulerAngles.pitch,I.endEulerAngles.bearing),_=new Float64Array(4);o.b3(_,a,c,I.k);const M=o.b4(_);I.tr.setRoll(M.roll),I.tr.setPitch(M.pitch),I.tr.setBearing(M.bearing)}else I.tr.setRoll(I.endEulerAngles.roll),I.tr.setPitch(I.endEulerAngles.pitch),I.tr.setBearing(I.endEulerAngles.bearing);else I.tr.setRoll(o.B.number(I.startEulerAngles.roll,I.endEulerAngles.roll,I.k)),I.tr.setPitch(o.B.number(I.startEulerAngles.pitch,I.endEulerAngles.pitch,I.k)),I.tr.setBearing(o.B.number(I.startEulerAngles.bearing,I.endEulerAngles.bearing,I.k))}function pl(I,a,c,_,M){const T=M.padding,z=oi(M.worldSize,c.getNorthWest()),q=oi(M.worldSize,c.getNorthEast()),te=oi(M.worldSize,c.getSouthEast()),ae=oi(M.worldSize,c.getSouthWest()),be=o.ac(-_),ke=z.rotate(be),Te=q.rotate(be),$e=te.rotate(be),Xe=ae.rotate(be),mt=new o.P(Math.max(ke.x,Te.x,Xe.x,$e.x),Math.max(ke.y,Te.y,Xe.y,$e.y)),ut=new o.P(Math.min(ke.x,Te.x,Xe.x,$e.x),Math.min(ke.y,Te.y,Xe.y,$e.y)),ft=mt.sub(ut),vt=(M.width-(T.left+T.right+a.left+a.right))/ft.x,Et=(M.height-(T.top+T.bottom+a.top+a.bottom))/ft.y;if(Et<0||vt<0)return void va();const kt=Math.min(o.aa(M.scale*Math.min(vt,Et)),I.maxZoom),Rt=o.P.convert(I.offset),Ut=new o.P((a.left-a.right)/2,(a.top-a.bottom)/2).rotate(o.ac(_)),It=Rt.add(Ut).mult(M.scale/o.aH(kt));return{center:to(M.worldSize,z.add(te).div(2).sub(It)),zoom:kt,bearing:_}}class ml{get useGlobeControls(){return!1}handlePanInertia(a,c){return{easingOffset:a,easingCenter:c.center}}handleMapControlsRollPitchBearingZoom(a,c){a.bearingDelta&&c.setBearing(c.bearing+a.bearingDelta),a.pitchDelta&&c.setPitch(c.pitch+a.pitchDelta),a.rollDelta&&c.setRoll(c.roll+a.rollDelta),a.zoomDelta&&c.setZoom(c.zoom+a.zoomDelta)}handleMapControlsPan(a,c,_){a.around.distSqr(c.centerPoint)<.01||c.setLocationAtPoint(_,a.around)}cameraForBoxAndBearing(a,c,_,M,T){return pl(a,c,_,M,T)}handleJumpToCenterZoom(a,c){a.zoom!==(c.zoom!==void 0?+c.zoom:a.zoom)&&a.setZoom(+c.zoom),c.center!==void 0&&a.setCenter(o.Q.convert(c.center))}handleEaseTo(a,c){const _=a.zoom,M=a.padding,T={roll:a.roll,pitch:a.pitch,bearing:a.bearing},z={roll:c.roll===void 0?a.roll:c.roll,pitch:c.pitch===void 0?a.pitch:c.pitch,bearing:c.bearing===void 0?a.bearing:c.bearing},q=c.zoom!==void 0,te=!a.isPaddingEqual(c.padding);let ae=!1;const be=q?+c.zoom:a.zoom;let ke=a.centerPoint.add(c.offsetAsPoint);const Te=a.screenPointToLocation(ke),{center:$e,zoom:Xe}=a.getConstrained(o.Q.convert(c.center||Te),be??_);Xs(a,$e);const mt=oi(a.worldSize,Te),ut=oi(a.worldSize,$e).sub(mt),ft=o.aH(Xe-_);return ae=Xe!==_,{easeFunc:vt=>{if(ae&&a.setZoom(o.B.number(_,Xe,vt)),o.b5(T,z)||As({startEulerAngles:T,endEulerAngles:z,tr:a,k:vt,useSlerp:T.roll!=z.roll}),te&&(a.interpolatePadding(M,c.padding,vt),ke=a.centerPoint.add(c.offsetAsPoint)),c.around)a.setLocationAtPoint(c.around,c.aroundPoint);else{const Et=o.aH(a.zoom-_),kt=Xe>_?Math.min(2,ft):Math.max(.5,ft),Rt=Math.pow(kt,1-vt),Ut=to(a.worldSize,mt.add(ut.mult(vt*Rt)).mult(Et));a.setLocationAtPoint(a.renderWorldCopies?Ut.wrap():Ut,ke)}},isZooming:ae,elevationCenter:$e}}handleFlyTo(a,c){const _=c.zoom!==void 0,M=a.zoom,T=a.getConstrained(o.Q.convert(c.center||c.locationAtOffset),_?+c.zoom:M),z=T.center,q=T.zoom;Xs(a,z);const te=oi(a.worldSize,c.locationAtOffset),ae=oi(a.worldSize,z).sub(te),be=ae.mag(),ke=o.aH(q-M);let Te;if(c.minZoom!==void 0){const $e=Math.min(+c.minZoom,M,q),Xe=a.getConstrained(z,$e).zoom;Te=o.aH(Xe-M)}return{easeFunc:($e,Xe,mt,ut)=>{a.setZoom($e===1?q:M+o.aa(Xe));const ft=$e===1?z:to(a.worldSize,te.add(ae.mult(mt)).mult(Xe));a.setLocationAtPoint(a.renderWorldCopies?ft.wrap():ft,ut)},scaleOfZoom:ke,targetCenter:z,scaleOfMinZoom:Te,pixelPathLength:be}}}class fo{constructor(a,c,_){this.blendFunction=a,this.blendColor=c,this.mask=_}}fo.Replace=[1,0],fo.disabled=new fo(fo.Replace,o.b6.transparent,[!1,!1,!1,!1]),fo.unblended=new fo(fo.Replace,o.b6.transparent,[!0,!0,!0,!0]),fo.alphaBlended=new fo([1,771],o.b6.transparent,[!0,!0,!0,!0]);const Uu=2305;class zi{constructor(a,c,_){this.enable=a,this.mode=c,this.frontFace=_}}zi.disabled=new zi(!1,1029,Uu),zi.backCCW=new zi(!0,1029,Uu),zi.frontCCW=new zi(!0,1028,Uu);class qr{constructor(a,c,_){this.func=a,this.mask=c,this.range=_}}qr.ReadOnly=!1,qr.ReadWrite=!0,qr.disabled=new qr(519,qr.ReadOnly,[0,1]);const Dl=7680;class Vi{constructor(a,c,_,M,T,z){this.test=a,this.ref=c,this.mask=_,this.fail=M,this.depthFail=T,this.pass=z}}Vi.disabled=new Vi({func:519,mask:0},0,0,Dl,Dl,Dl);const uo=new WeakMap;function Ki(I){var a;if(uo.has(I))return uo.get(I);{const c=(a=I.getParameter(I.VERSION))===null||a===void 0?void 0:a.startsWith("WebGL 2.0");return uo.set(I,c),c}}class ee{get awaitingQuery(){return!!this._readbackQueue}constructor(a){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=a;const c=a.context,_=c.gl;this._texFormat=_.RGBA,this._texType=_.UNSIGNED_BYTE;const M=new o.aE;M.emplaceBack(-1,-1),M.emplaceBack(2,-1),M.emplaceBack(-1,2);const T=new o.aG;T.emplaceBack(0,1,2),this._fullscreenTriangle=new Aa(c.createVertexBuffer(M,Cs.members),c.createIndexBuffer(T),o.aF.simpleSegment(0,0,M.length,T.length)),this._resultBuffer=new Uint8Array(4),c.activeTexture.set(_.TEXTURE1);const z=_.createTexture();_.bindTexture(_.TEXTURE_2D,z),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,_.CLAMP_TO_EDGE),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,_.CLAMP_TO_EDGE),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,_.NEAREST),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,_.NEAREST),_.texImage2D(_.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=c.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(z),Ki(_)&&(this._pbo=_.createBuffer(),_.bindBuffer(_.PIXEL_PACK_BUFFER,this._pbo),_.bufferData(_.PIXEL_PACK_BUFFER,4,_.STREAM_READ),_.bindBuffer(_.PIXEL_PACK_BUFFER,null))}destroy(){const a=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),a.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(a,c){const _=this._updateCount;return this._readbackQueue?_>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():_>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(a,c),this._updateCount++,this._measuredError}_bindFramebuffer(){const a=this._cachedRenderContext.context,c=a.gl;a.activeTexture.set(c.TEXTURE1),c.bindTexture(c.TEXTURE_2D,this._fbo.colorAttachment.get()),a.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(a,c){const _=this._cachedRenderContext.context,M=_.gl;if(this._bindFramebuffer(),_.viewport.set([0,0,this._texWidth,this._texHeight]),_.clear({color:o.b6.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(_,M.TRIANGLES,qr.disabled,Vi.disabled,fo.unblended,zi.disabled,((T,z)=>({u_input:T,u_output_expected:z}))(a,c),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&Ki(M)){M.bindBuffer(M.PIXEL_PACK_BUFFER,this._pbo),M.readBuffer(M.COLOR_ATTACHMENT0),M.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),M.bindBuffer(M.PIXEL_PACK_BUFFER,null);const T=M.fenceSync(M.SYNC_GPU_COMMANDS_COMPLETE,0);M.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:T}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const a=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&Ki(a)){const c=a.clientWaitSync(this._readbackQueue.sync,0,0);if(c===a.WAIT_FAILED)return o.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(c===a.TIMEOUT_EXPIRED)return;a.bindBuffer(a.PIXEL_PACK_BUFFER,this._pbo),a.getBufferSubData(a.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),a.bindBuffer(a.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),a.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=ee._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(a){let c=0;return c+=a[0]/256,c+=a[1]/65536,c+=a[2]/16777216,a[3]<127&&(c=-c),c/128}}const Oe=o.Z/128;function st(I,a){const c=I.granularity!==void 0?Math.max(I.granularity,1):1,_=c+(I.generateBorders?2:0),M=c+(I.extendToNorthPole||I.generateBorders?1:0)+(I.extendToSouthPole||I.generateBorders?1:0),T=_+1,z=M+1,q=I.generateBorders?-1:0,te=I.generateBorders||I.extendToNorthPole?-1:0,ae=c+(I.generateBorders?1:0),be=c+(I.generateBorders||I.extendToSouthPole?1:0),ke=T*z,Te=_*M*6,$e=T*z>65536;if($e&&a==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const Xe=$e||a==="32bit",mt=new Int16Array(2*ke);let ut=0;for(let Et=te;Et<=be;Et++)for(let kt=q;kt<=ae;kt++){let Rt=kt/c*o.Z;kt===-1&&(Rt=-64),kt===c+1&&(Rt=o.Z+Oe);let Ut=Et/c*o.Z;Et===-1&&(Ut=I.extendToNorthPole?o.b8:-64),Et===c+1&&(Ut=I.extendToSouthPole?o.b9:o.Z+Oe),mt[ut++]=Rt,mt[ut++]=Ut}const ft=Xe?new Uint32Array(Te):new Uint16Array(Te);let vt=0;for(let Et=0;Et<M;Et++)for(let kt=0;kt<_;kt++){const Rt=kt+1+Et*T,Ut=kt+(Et+1)*T,It=kt+1+(Et+1)*T;ft[vt++]=kt+Et*T,ft[vt++]=Ut,ft[vt++]=Rt,ft[vt++]=Rt,ft[vt++]=Ut,ft[vt++]=It}return{vertices:mt.buffer.slice(0),indices:ft.buffer.slice(0),uses32bitIndices:Xe}}const Vt=new o.aD({fill:new o.ba(128,2),line:new o.ba(512,0),tile:new o.ba(128,32),stencil:new o.ba(128,1),circle:3});class Er{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return ii.projectionGlobe}get vertexShaderPreludeCode(){return ii.projectionMercator.vertexSource}get subdivisionGranularity(){return Vt}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(a){this._errorMeasurement||(this._errorMeasurement=new ee(a));const c=o.S(this._errorQueryLatitudeDegrees),_=2*Math.atan(Math.exp(Math.PI-c*Math.PI*2))-.5*Math.PI,M=this._errorMeasurement.updateErrorLoop(c,_),T=O.now();M!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=M,this._errorMeasurementLastChangeTime=T);const z=Math.min(Math.max((T-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=o.bb(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,o.bc(z))}_getMeshKey(a){return`${a.granularity.toString(36)}_${a.generateBorders?"b":""}${a.extendToNorthPole?"n":""}${a.extendToSouthPole?"s":""}`}getMeshFromTileID(a,c,_,M,T){const z=(T==="stencil"?Vt.stencil:Vt.tile).getGranularityForZoomLevel(c.z);return this._getMesh(a,{granularity:z,generateBorders:_,extendToNorthPole:c.y===0&&M,extendToSouthPole:c.y===(1<<c.z)-1&&M})}_getMesh(a,c){const _=this._getMeshKey(c);if(_ in this._tileMeshCache)return this._tileMeshCache[_];const M=function(T,z){const q=st(z,"16bit"),te=o.aE.deserialize({arrayBuffer:q.vertices,length:q.vertices.byteLength/2/2}),ae=o.aG.deserialize({arrayBuffer:q.indices,length:q.indices.byteLength/2/3});return new Aa(T.createVertexBuffer(te,Cs.members),T.createIndexBuffer(ae),o.aF.simpleSegment(0,0,te.length,ae.length))}(a,c);return this._tileMeshCache[_]=M,M}recalculate(a){}hasTransition(){const a=O.now();let c=!1;return c=c||(a-this._errorMeasurementLastChangeTime)/1e3<.7,c=c||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,c}setErrorQueryLatitudeDegrees(a){this._errorQueryLatitudeDegrees=a}}const qn=new o.r({type:new o.D(o.v.projection.type)});class si extends o.E{constructor(a){super(),this._transitionable=new o.T(qn),this.setProjection(a),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new o.C(0)),this._mercatorProjection=new Ja,this._verticalPerspectiveProjection=new Er}get transitionState(){const a=this.properties.get("type");if(typeof a=="string"&&a==="mercator")return 0;if(typeof a=="string"&&a==="vertical-perspective")return 1;if(a instanceof o.bd){if(a.from==="vertical-perspective"&&a.to==="mercator")return 1-a.transition;if(a.from==="mercator"&&a.to==="vertical-perspective")return a.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(a){this._mercatorProjection.updateGPUdependent(a),this._verticalPerspectiveProjection.updateGPUdependent(a)}getMeshFromTileID(a,c,_,M,T){return this.currentProjection.getMeshFromTileID(a,c,_,M,T)}setProjection(a){this._transitionable.setValue("type",(a==null?void 0:a.type)||"mercator")}updateTransitions(a){this._transitioning=this._transitionable.transitioned(a,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(a){this.properties=this._transitioning.possiblyEvaluate(a)}setErrorQueryLatitudeDegrees(a){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(a),this._mercatorProjection.setErrorQueryLatitudeDegrees(a)}}function di(I){const a=pi(I.worldSize,I.center.lat);return 2*Math.PI*a}function Ir(I,a,c,_,M){const T=1/(1<<M),z=a/o.Z*T+_*T,q=o.bf((I/o.Z*T+c*T)*Math.PI*2+Math.PI,2*Math.PI),te=2*Math.atan(Math.exp(Math.PI-z*Math.PI*2))-.5*Math.PI,ae=Math.cos(te),be=new Float64Array(3);return be[0]=Math.sin(q)*ae,be[1]=Math.sin(te),be[2]=Math.cos(q)*ae,be}function Pr(I){return function(a,c){const _=Math.cos(c),M=new Float64Array(3);return M[0]=Math.sin(a)*_,M[1]=Math.sin(c),M[2]=Math.cos(a)*_,M}(I.lng*Math.PI/180,I.lat*Math.PI/180)}function pi(I,a){return I/(2*Math.PI)/Math.cos(a*Math.PI/180)}function Do(I){const a=Math.asin(I[1])/Math.PI*180,c=Math.sqrt(I[0]*I[0]+I[2]*I[2]);if(c>1e-6){const _=I[0]/c,M=Math.acos(I[2]/c),T=(_>0?M:-M)/Math.PI*180;return new o.Q(o.aK(T,-180,180),a)}return new o.Q(0,a)}function mi(I){return Math.cos(I*Math.PI/180)}function zr(I,a){const c=mi(I),_=mi(a);return o.aa(_/c)}function Co(I,a){const c=I.rotate(a.bearingInRadians),_=a.zoom+zr(a.center.lat,0),M=o.bb(1/mi(a.center.lat),1/mi(Math.min(Math.abs(a.center.lat),60)),o.be(_,7,3,0,1)),T=360/di({worldSize:a.worldSize,center:{lat:a.center.lat}});return new o.Q(a.center.lng-c.x*T*M,o.ad(a.center.lat+c.y*T,-85.051129,o.aI))}function Zi(I){const a=.5*I,c=Math.sin(a),_=Math.cos(a);return Math.log(c+_)-Math.log(_-c)}function To(I,a,c,_){const M=I.lat+c*_;if(Math.abs(c)>1){const T=(Math.sign(I.lat+c)!==Math.sign(I.lat)?-Math.abs(I.lat):Math.abs(I.lat))*Math.PI/180,z=Math.abs(I.lat+c)*Math.PI/180,q=Zi(T+_*(z-T)),te=Zi(T),ae=Zi(z);return new o.Q(I.lng+a*((q-te)/(ae-te)),M)}return new o.Q(I.lng+a*_,M)}class ca{constructor(a){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._aabbFactory=a}recalculateCache(){if(!this._hadAnyChanges)return;const a=this._cachePrevious;this._cachePrevious=this._cache,this._cache=a,this._cache.clear(),this._hadAnyChanges=!1}getTileAABB(a,c,_,M){const T=`${a.z}_${a.x}_${a.y}`,z=this._cache.get(T);if(z)return z;const q=this._cachePrevious.get(T);if(q)return this._cache.set(T,q),q;const te=this._aabbFactory(a,c,_,M);return this._cache.set(T,te),this._hadAnyChanges=!0,te}}function Pa(I,a,c){const _=I-a;return _<0?-_:Math.max(0,_-c)}function cu(I,a,c,_,M){const T=I-c;let z;return z=T<0?Math.min(-T,1+T-M):T>1?Math.min(Math.max(T-M,0),1-T):0,Math.max(z,Pa(a,_,M))}class Ws{constructor(){this._aabbCache=new ca(this._computeTileAABB)}recalculateCache(){this._aabbCache.recalculateCache()}distanceToTile2d(a,c,_,M){const T=1<<_.z,z=1/T,q=_.x/T,te=_.y/T;let ae=2;return ae=Math.min(ae,cu(a,c,q,te,z)),ae=Math.min(ae,cu(a,c,q+.5,-te-z,z)),ae=Math.min(ae,cu(a,c,q+.5,2-te-z,z)),ae}getWrap(a,c,_){const M=1<<c.z,T=1/M,z=c.x/M,q=Pa(a.x,z,T),te=Pa(a.x,z-1,T),ae=Pa(a.x,z+1,T),be=Math.min(q,te,ae);return be===ae?1:be===te?-1:0}allowVariableZoom(a,c){return Hn(a,c)>4}allowWorldCopies(){return!1}getTileAABB(a,c,_,M){return this._aabbCache.getTileAABB(a,c,_,M)}_computeTileAABB(a,c,_,M){if(a.z<=0)return new Ns([-1,-1,-1],[1,1,1]);if(a.z===1)return new Ns([a.x===0?-1:0,a.y===0?0:-1,-1],[a.x===0?0:1,a.y===0?1:0,1]);{const T=[Ir(0,0,a.x,a.y,a.z),Ir(o.Z,0,a.x,a.y,a.z),Ir(o.Z,o.Z,a.x,a.y,a.z),Ir(0,o.Z,a.x,a.y,a.z)],z=[1,1,1],q=[-1,-1,-1];for(const te of T)for(let ae=0;ae<3;ae++)z[ae]=Math.min(z[ae],te[ae]),q[ae]=Math.max(q[ae],te[ae]);if(a.y===0||a.y===(1<<a.z)-1){const te=[0,a.y===0?1:-1,0];for(let ae=0;ae<3;ae++)z[ae]=Math.min(z[ae],te[ae]),q[ae]=Math.max(q[ae],te[ae])}return new Ns(z,q)}}}class zd{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(a){this._helper.setMinZoom(a)}setMaxZoom(a){this._helper.setMaxZoom(a)}setMinPitch(a){this._helper.setMinPitch(a)}setMaxPitch(a){this._helper.setMaxPitch(a)}setRenderWorldCopies(a){this._helper.setRenderWorldCopies(a)}setBearing(a){this._helper.setBearing(a)}setPitch(a){this._helper.setPitch(a)}setRoll(a){this._helper.setRoll(a)}setFov(a){this._helper.setFov(a)}setZoom(a){this._helper.setZoom(a)}setCenter(a){this._helper.setCenter(a)}setElevation(a){this._helper.setElevation(a)}setMinElevationForCurrentTile(a){this._helper.setMinElevationForCurrentTile(a)}setPadding(a){this._helper.setPadding(a)}interpolatePadding(a,c,_){return this._helper.interpolatePadding(a,c,_)}isPaddingEqual(a){return this._helper.isPaddingEqual(a)}resize(a,c){this._helper.resize(a,c)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(a){this._helper.setMaxBounds(a)}overrideNearFarZ(a,c){this._helper.overrideNearFarZ(a,c)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(a){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),a)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(a){}constructor(){this._cachedClippingPlane=o.bg(),this._projectionMatrix=o.b0(),this._globeViewProjMatrix32f=o.a$(),this._globeViewProjMatrixNoCorrection=o.b0(),this._globeViewProjMatrixNoCorrectionInverted=o.b0(),this._globeProjMatrixInverted=o.b0(),this._cameraPosition=o.bh(),this._globeLatitudeErrorCorrectionRadians=0,this._helper=new Au({calcMatrices:()=>{this._calcMatrices()},getConstrained:(a,c)=>this.getConstrained(a,c)}),this._coveringTilesDetailsProvider=new Ws}clone(){const a=new zd;return a.apply(this),a}apply(a,c){this._globeLatitudeErrorCorrectionRadians=c||0,this._helper.apply(a)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const a=o.bh();return a[0]=this._cameraPosition[0],a[1]=this._cameraPosition[1],a[2]=this._cameraPosition[2],a}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(a){const{overscaledTileID:c,applyGlobeMatrix:_}=a,M=this._helper.getMercatorTileCoordinates(c);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:M,clippingPlane:this._cachedClippingPlane,projectionTransition:_?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(a){const c=this.pitchInRadians,_=this.cameraToCenterDistance/a,M=Math.sin(c)*_,T=Math.cos(c)*_+1,z=1/Math.sqrt(M*M+T*T)*1;let q=-M,te=T;const ae=Math.sqrt(q*q+te*te);q/=ae,te/=ae;const be=[0,q,te];return o.bi(be,be,[0,0,0],-this.bearingInRadians),o.bj(be,be,[0,0,0],-1*this.center.lat*Math.PI/180),o.bk(be,be,[0,0,0],this.center.lng*Math.PI/180),o.aN(be,be,.25),[...be,.25*-z]}isLocationOccluded(a){return!this.isSurfacePointVisible(Pr(a))}transformLightDirection(a){const c=this._helper._center.lng*Math.PI/180,_=this._helper._center.lat*Math.PI/180,M=Math.cos(_),T=[Math.sin(c)*M,Math.sin(_),Math.cos(c)*M],z=[T[2],0,-T[0]],q=[0,0,0];o.aT(q,z,T),o.aS(z,z),o.aS(q,q);const te=[0,0,0];return o.aS(te,[z[0]*a[0]+q[0]*a[1]+T[0]*a[2],z[1]*a[0]+q[1]*a[1]+T[1]*a[2],z[2]*a[0]+q[2]*a[1]+T[2]*a[2]]),te}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(a,c,_){const M=function(q,te,ae){const be=1/(1<<ae.z);return new o.$(q/o.Z*be+ae.x*be,te/o.Z*be+ae.y*be)}(a,c,_.canonical),T=(z=M.y,[o.bf(M.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-z*Math.PI*2))-.5*Math.PI]);var z;return this.getCircleRadiusCorrection()/Math.cos(T[1])}projectTileCoordinates(a,c,_,M){const T=_.canonical,z=Ir(a,c,T.x,T.y,T.z),q=1+(M?M(a,c):0)/o.bq,te=[z[0]*q,z[1]*q,z[2]*q,1];o.ao(te,te,this._globeViewProjMatrixNoCorrection);const ae=this._cachedClippingPlane,be=ae[0]*z[0]+ae[1]*z[1]+ae[2]*z[2]+ae[3]<0;return{point:new o.P(te[0]/te[3],te[1]/te[3]),signedDistanceFromCamera:te[3],isOccluded:be}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const a=pi(this.worldSize,this.center.lat),c=o.b1(),_=o.b1();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*a),o.aX(c,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const M=this.centerOffset;c[8]=2*-M.x/this._helper._width,c[9]=2*M.y/this._helper._height,this._projectionMatrix=o.aY(c),this._globeProjMatrixInverted=o.b1(),o.ai(this._globeProjMatrixInverted,c),o.L(c,c,[0,0,-this.cameraToCenterDistance]),o.aZ(c,c,this.rollInRadians),o.a_(c,c,-this.pitchInRadians),o.aZ(c,c,this.bearingInRadians),o.L(c,c,[0,0,-a]);const T=o.bh();T[0]=a,T[1]=a,T[2]=a,o.a_(_,c,this.center.lat*Math.PI/180),o.bl(_,_,-this.center.lng*Math.PI/180),o.M(_,_,T),this._globeViewProjMatrixNoCorrection=_,o.a_(c,c,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),o.bl(c,c,-this.center.lng*Math.PI/180),o.M(c,c,T),this._globeViewProjMatrix32f=new Float32Array(c),this._globeViewProjMatrixNoCorrectionInverted=o.b1(),o.ai(this._globeViewProjMatrixNoCorrectionInverted,_);const z=o.bh();this._cameraPosition=o.bh(),this._cameraPosition[2]=this.cameraToCenterDistance/a,o.bi(this._cameraPosition,this._cameraPosition,z,-this.rollInRadians),o.bj(this._cameraPosition,this._cameraPosition,z,this.pitchInRadians),o.bi(this._cameraPosition,this._cameraPosition,z,-this.bearingInRadians),o.aO(this._cameraPosition,this._cameraPosition,[0,0,1]),o.bj(this._cameraPosition,this._cameraPosition,z,-this.center.lat*Math.PI/180),o.bk(this._cameraPosition,this._cameraPosition,z,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(a);const q=o.aY(this._globeViewProjMatrixNoCorrectionInverted);o.M(q,q,[1,1,-1]),this._cachedFrustum=is.fromInvProjectionMatrix(q)}calculateFogMatrix(a){o.w("calculateFogMatrix is not supported on globe projection.");const c=o.b1();return o.as(c),c}getVisibleUnwrappedCoordinates(a){return[new o.aV(0,a)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(a){a&&o.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(a,c){if(!this._globeViewProjMatrixNoCorrection)return 1;const _=Pr(a);o.aN(_,_,1+c/o.bq);const M=o.bg();return o.ao(M,[_[0],_[1],_[2],1],this._globeViewProjMatrixNoCorrection),M[2]/M[3]}populateCache(a){}getBounds(){const a=.5*this.width,c=.5*this.height,_=[new o.P(0,0),new o.P(a,0),new o.P(this.width,0),new o.P(this.width,c),new o.P(this.width,this.height),new o.P(a,this.height),new o.P(0,this.height),new o.P(0,c)],M=[];for(const ke of _)M.push(this.unprojectScreenPoint(ke));let T=0,z=0,q=0,te=0;const ae=this.center;for(const ke of M){const Te=o.bm(ae.lng,ke.lng),$e=o.bm(ae.lat,ke.lat);Te<z&&(z=Te),Te>T&&(T=Te),$e<te&&(te=$e),$e>q&&(q=$e)}const be=[ae.lng+z,ae.lat+te,ae.lng+T,ae.lat+q];return this.isSurfacePointOnScreen([0,1,0])&&(be[3]=90,be[0]=-180,be[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(be[1]=-90,be[0]=-180,be[2]=180),new Lt(be)}getConstrained(a,c){const _=o.ad(a.lat,-85.051129,o.aI),M=o.ad(+c,this.minZoom+zr(0,_),this.maxZoom);return{center:new o.Q(a.lng,_),zoom:M}}calculateCenterFromCameraLngLatAlt(a,c,_,M){return this._helper.calculateCenterFromCameraLngLatAlt(a,c,_,M)}setLocationAtPoint(a,c){const _=Pr(this.unprojectScreenPoint(c)),M=Pr(a),T=o.bh();o.bn(T);const z=o.bh();o.bk(z,_,T,-this.center.lng*Math.PI/180),o.bj(z,z,T,this.center.lat*Math.PI/180);const q=M[0]*M[0]+M[2]*M[2],te=z[0]*z[0];if(q<te)return;const ae=Math.sqrt(q-te),be=-ae,ke=o.bo(M[0],M[2],z[0],ae),Te=o.bo(M[0],M[2],z[0],be),$e=o.bh();o.bk($e,M,T,-ke);const Xe=o.bo($e[1],$e[2],z[1],z[2]),mt=o.bh();o.bk(mt,M,T,-Te);const ut=o.bo(mt[1],mt[2],z[1],z[2]),ft=.5*Math.PI,vt=Xe>=-ft&&Xe<=ft,Et=ut>=-ft&&ut<=ft;let kt,Rt;if(vt&&Et){const Zt=this.center.lng*Math.PI/180,Mn=this.center.lat*Math.PI/180;o.br(ke,Zt)+o.br(Xe,Mn)<o.br(Te,Zt)+o.br(ut,Mn)?(kt=ke,Rt=Xe):(kt=Te,Rt=ut)}else if(vt)kt=ke,Rt=Xe;else{if(!Et)return;kt=Te,Rt=ut}const Ut=kt/Math.PI*180,It=Rt/Math.PI*180,rn=this.center.lat;this.setCenter(new o.Q(Ut,o.ad(It,-90,90))),this.setZoom(this.zoom+zr(rn,this.center.lat))}locationToScreenPoint(a,c){const _=Pr(a);if(c){const M=c.getElevationForLngLatZoom(a,this._helper._tileZoom);o.aN(_,_,1+M/o.bq)}return this._projectSurfacePointToScreen(_)}_projectSurfacePointToScreen(a){const c=o.bg();return o.ao(c,[...a,1],this._globeViewProjMatrixNoCorrection),c[0]/=c[3],c[1]/=c[3],new o.P((.5*c[0]+.5)*this.width,(.5*-c[1]+.5)*this.height)}screenPointToMercatorCoordinate(a,c){if(c){const _=c.pointCoordinate(a);if(_)return _}return o.$.fromLngLat(this.unprojectScreenPoint(a))}screenPointToLocation(a,c){var _;return(_=this.screenPointToMercatorCoordinate(a,c))===null||_===void 0?void 0:_.toLngLat()}isPointOnMapSurface(a,c){const _=this._cameraPosition,M=this.getRayDirectionFromPixel(a);return!!this.rayPlanetIntersection(_,M)}getRayDirectionFromPixel(a){const c=o.bg();c[0]=a.x/this.width*2-1,c[1]=-1*(a.y/this.height*2-1),c[2]=1,c[3]=1,o.ao(c,c,this._globeViewProjMatrixNoCorrectionInverted),c[0]/=c[3],c[1]/=c[3],c[2]/=c[3];const _=o.bh();_[0]=c[0]-this._cameraPosition[0],_[1]=c[1]-this._cameraPosition[1],_[2]=c[2]-this._cameraPosition[2];const M=o.bh();return o.aS(M,_),M}isSurfacePointVisible(a){const c=this._cachedClippingPlane;return c[0]*a[0]+c[1]*a[1]+c[2]*a[2]+c[3]>=0}isSurfacePointOnScreen(a){if(!this.isSurfacePointVisible(a))return!1;const c=o.bg();return o.ao(c,[...a,1],this._globeViewProjMatrixNoCorrection),c[0]/=c[3],c[1]/=c[3],c[2]/=c[3],c[0]>-1&&c[0]<1&&c[1]>-1&&c[1]<1&&c[2]>-1&&c[2]<1}rayPlanetIntersection(a,c){const _=o.aU(a,c),M=o.bh(),T=o.bh();o.aN(T,c,_),o.aR(M,a,T);const z=1-o.aU(M,M);if(z<0)return null;const q=o.aU(a,a)-1,te=-_+(_<0?1:-1)*Math.sqrt(z),ae=q/te,be=te;return{tMin:Math.min(ae,be),tMax:Math.max(ae,be)}}unprojectScreenPoint(a){const c=this._cameraPosition,_=this.getRayDirectionFromPixel(a),M=this.rayPlanetIntersection(c,_);if(M){const ae=o.bh();o.aO(ae,c,[_[0]*M.tMin,_[1]*M.tMin,_[2]*M.tMin]);const be=o.bh();return o.aS(be,ae),Do(be)}const T=this._cachedClippingPlane[0]*_[0]+this._cachedClippingPlane[1]*_[1]+this._cachedClippingPlane[2]*_[2],z=-o.bp(this._cachedClippingPlane,c)/T,q=o.bh();if(z>0)o.aO(q,c,[_[0]*z,_[1]*z,_[2]*z]);else{const ae=o.bh();o.aO(ae,c,[2*_[0],2*_[1],2*_[2]]);const be=o.bp(this._cachedClippingPlane,ae);o.aR(q,ae,[this._cachedClippingPlane[0]*be,this._cachedClippingPlane[1]*be,this._cachedClippingPlane[2]*be])}const te=o.bh();return o.aS(te,q),Do(te)}getMatrixForModel(a,c){const _=o.Q.convert(a),M=1/o.bq,T=o.b0();return o.bl(T,T,_.lng/180*Math.PI),o.a_(T,T,-_.lat/180*Math.PI),o.L(T,T,[0,0,1+c/o.bq]),o.a_(T,T,.5*Math.PI),o.M(T,T,[M,M,M]),T}getProjectionDataForCustomLayer(a=!0){const c=this.getProjectionData({overscaledTileID:new o.Y(0,0,0,0,0),applyGlobeMatrix:a});return c.tileMercatorCoords=[0,0,1,1],c}getFastPathSimpleProjectionMatrix(a){}}class el{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(a){this._helper.setMinZoom(a)}setMaxZoom(a){this._helper.setMaxZoom(a)}setMinPitch(a){this._helper.setMinPitch(a)}setMaxPitch(a){this._helper.setMaxPitch(a)}setRenderWorldCopies(a){this._helper.setRenderWorldCopies(a)}setBearing(a){this._helper.setBearing(a)}setPitch(a){this._helper.setPitch(a)}setRoll(a){this._helper.setRoll(a)}setFov(a){this._helper.setFov(a)}setZoom(a){this._helper.setZoom(a)}setCenter(a){this._helper.setCenter(a)}setElevation(a){this._helper.setElevation(a)}setMinElevationForCurrentTile(a){this._helper.setMinElevationForCurrentTile(a)}setPadding(a){this._helper.setPadding(a)}interpolatePadding(a,c,_){return this._helper.interpolatePadding(a,c,_)}isPaddingEqual(a){return this._helper.isPaddingEqual(a)}resize(a,c,_=!0){this._helper.resize(a,c,_)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(a){this._helper.setMaxBounds(a)}overrideNearFarZ(a,c){this._helper.overrideNearFarZ(a,c)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(a){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),a)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(a,c){this._globeness=a,this._globeLatitudeErrorCorrectionRadians=c,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().recalculateCache(),this._mercatorTransform.getCoveringTilesDetailsProvider().recalculateCache()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this._helper=new Au({calcMatrices:()=>{this._calcMatrices()},getConstrained:(a,c)=>this.getConstrained(a,c)}),this._globeness=1,this._mercatorTransform=new ea,this._verticalPerspectiveTransform=new zd}clone(){const a=new el;return a._globeness=this._globeness,a._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,a.apply(this),a}apply(a){this._helper.apply(a),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(a){const c=this._mercatorTransform.getProjectionData(a),_=this._verticalPerspectiveTransform.getProjectionData(a);return{mainMatrix:this.isGlobeRendering?_.mainMatrix:c.mainMatrix,clippingPlane:_.clippingPlane,tileMercatorCoords:_.tileMercatorCoords,projectionTransition:a.applyGlobeMatrix?this._globeness:0,fallbackMatrix:c.fallbackMatrix}}isLocationOccluded(a){return this.currentTransform.isLocationOccluded(a)}transformLightDirection(a){return this.currentTransform.transformLightDirection(a)}getPixelScale(){return o.bb(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return o.bb(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(a,c,_){const M=this._mercatorTransform.getPitchedTextCorrection(a,c,_),T=this._verticalPerspectiveTransform.getPitchedTextCorrection(a,c,_);return o.bb(M,T,this._globeness)}projectTileCoordinates(a,c,_,M){return this.currentTransform.projectTileCoordinates(a,c,_,M)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(a){return this.currentTransform.calculateFogMatrix(a)}getVisibleUnwrappedCoordinates(a){return this.currentTransform.getVisibleUnwrappedCoordinates(a)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(a){this._mercatorTransform.recalculateZoomAndCenter(a),this._verticalPerspectiveTransform.recalculateZoomAndCenter(a)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(a,c){return this.currentTransform.lngLatToCameraDepth(a,c)}populateCache(a){this._mercatorTransform.populateCache(a),this._verticalPerspectiveTransform.populateCache(a)}getBounds(){return this.currentTransform.getBounds()}getConstrained(a,c){return this.currentTransform.getConstrained(a,c)}calculateCenterFromCameraLngLatAlt(a,c,_,M){return this._helper.calculateCenterFromCameraLngLatAlt(a,c,_,M)}setLocationAtPoint(a,c){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(a,c),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(a,c),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(a,c){return this.currentTransform.locationToScreenPoint(a,c)}screenPointToMercatorCoordinate(a,c){return this.currentTransform.screenPointToMercatorCoordinate(a,c)}screenPointToLocation(a,c){return this.currentTransform.screenPointToLocation(a,c)}isPointOnMapSurface(a,c){return this.currentTransform.isPointOnMapSurface(a,c)}getRayDirectionFromPixel(a){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(a)}getMatrixForModel(a,c){return this.currentTransform.getMatrixForModel(a,c)}getProjectionDataForCustomLayer(a=!0){const c=this._mercatorTransform.getProjectionDataForCustomLayer(a);if(!this.isGlobeRendering)return c;const _=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(a);return _.fallbackMatrix=c.mainMatrix,_}getFastPathSimpleProjectionMatrix(a){return this.currentTransform.getFastPathSimpleProjectionMatrix(a)}}class gl{get useGlobeControls(){return!0}handlePanInertia(a,c){const _=Co(a,c);return Math.abs(_.lng-c.center.lng)>180&&(_.lng=c.center.lng+179.5*Math.sign(_.lng-c.center.lng)),{easingCenter:_,easingOffset:new o.P(0,0)}}handleMapControlsRollPitchBearingZoom(a,c){const _=a.around,M=c.screenPointToLocation(_);a.bearingDelta&&c.setBearing(c.bearing+a.bearingDelta),a.pitchDelta&&c.setPitch(c.pitch+a.pitchDelta),a.rollDelta&&c.setRoll(c.roll+a.rollDelta);const T=c.zoom;a.zoomDelta&&c.setZoom(c.zoom+a.zoomDelta);const z=c.zoom-T;if(z===0)return;const q=o.bm(c.center.lng,M.lng),te=q/(Math.abs(q/180)+1),ae=o.bm(c.center.lat,M.lat),be=c.getRayDirectionFromPixel(_),ke=c.cameraPosition,Te=-1*o.aU(ke,be),$e=o.bh();o.aO($e,ke,[be[0]*Te,be[1]*Te,be[2]*Te]);const Xe=o.bs($e)-1,mt=Math.exp(.5*-Math.max(Xe-.3,0)),ut=pi(c.worldSize,c.center.lat)/Math.min(c.width,c.height),ft=o.be(ut,.9,.5,1,.25),vt=(1-o.aH(-z))*Math.min(mt,ft),Et=c.center.lat,kt=c.zoom,Rt=new o.Q(c.center.lng+te*vt,o.ad(c.center.lat+ae*vt,-85.051129,o.aI));c.setLocationAtPoint(M,_);const Ut=c.center,It=o.be(Math.abs(q),45,85,0,1),rn=o.be(ut,.75,.35,0,1),Zt=Math.pow(Math.max(It,rn),.25),Mn=o.bm(Ut.lng,Rt.lng),En=o.bm(Ut.lat,Rt.lat);c.setCenter(new o.Q(Ut.lng+Mn*Zt,Ut.lat+En*Zt).wrap()),c.setZoom(kt+zr(Et,c.center.lat))}handleMapControlsPan(a,c,_){if(!a.panDelta)return;const M=c.center.lat,T=c.zoom;c.setCenter(Co(a.panDelta,c).wrap()),c.setZoom(T+zr(M,c.center.lat))}cameraForBoxAndBearing(a,c,_,M,T){const z=pl(a,c,_,M,T),q=c.left/T.width*2-1,te=(T.width-c.right)/T.width*2-1,ae=c.top/T.height*-2+1,be=(T.height-c.bottom)/T.height*-2+1,ke=o.bm(_.getWest(),_.getEast())<0,Te=ke?_.getEast():_.getWest(),$e=ke?_.getWest():_.getEast(),Xe=Math.max(_.getNorth(),_.getSouth()),mt=Math.min(_.getNorth(),_.getSouth()),ut=Te+.5*o.bm(Te,$e),ft=Xe+.5*o.bm(Xe,mt),vt=T.clone();vt.setCenter(z.center),vt.setBearing(z.bearing),vt.setPitch(0),vt.setRoll(0),vt.setZoom(z.zoom);const Et=vt.modelViewProjectionMatrix,kt=[Pr(_.getNorthWest()),Pr(_.getNorthEast()),Pr(_.getSouthWest()),Pr(_.getSouthEast()),Pr(new o.Q($e,ft)),Pr(new o.Q(Te,ft)),Pr(new o.Q(ut,Xe)),Pr(new o.Q(ut,mt))],Rt=Pr(z.center);let Ut=Number.POSITIVE_INFINITY;for(const It of kt)q<0&&(Ut=gl.getLesserNonNegativeNonNull(Ut,gl.solveVectorScale(It,Rt,Et,"x",q))),te>0&&(Ut=gl.getLesserNonNegativeNonNull(Ut,gl.solveVectorScale(It,Rt,Et,"x",te))),ae>0&&(Ut=gl.getLesserNonNegativeNonNull(Ut,gl.solveVectorScale(It,Rt,Et,"y",ae))),be<0&&(Ut=gl.getLesserNonNegativeNonNull(Ut,gl.solveVectorScale(It,Rt,Et,"y",be)));if(Number.isFinite(Ut)&&Ut!==0)return z.zoom=vt.zoom+o.aa(Ut),z;va()}handleJumpToCenterZoom(a,c){const _=a.center.lat,M=a.getConstrained(c.center?o.Q.convert(c.center):a.center,a.zoom).center;a.setCenter(M.wrap());const T=c.zoom!==void 0?+c.zoom:a.zoom+zr(_,M.lat);a.zoom!==T&&a.setZoom(T)}handleEaseTo(a,c){const _=a.zoom,M=a.center,T=a.padding,z={roll:a.roll,pitch:a.pitch,bearing:a.bearing},q={roll:c.roll===void 0?a.roll:c.roll,pitch:c.pitch===void 0?a.pitch:c.pitch,bearing:c.bearing===void 0?a.bearing:c.bearing},te=c.zoom!==void 0,ae=!a.isPaddingEqual(c.padding);let be=!1;const ke=c.center?o.Q.convert(c.center):M,Te=a.getConstrained(ke,_).center;Xs(a,Te);const $e=a.clone();$e.setCenter(Te),$e.setZoom(te?+c.zoom:_+zr(M.lat,ke.lat)),$e.setBearing(c.bearing);const Xe=new o.P(o.ad(a.centerPoint.x+c.offsetAsPoint.x,0,a.width),o.ad(a.centerPoint.y+c.offsetAsPoint.y,0,a.height));$e.setLocationAtPoint(Te,Xe);const mt=(c.offset&&c.offsetAsPoint.mag())>0?$e.center:Te,ut=te?+c.zoom:_+zr(M.lat,mt.lat),ft=_+zr(M.lat,0),vt=ut+zr(mt.lat,0),Et=o.bm(M.lng,mt.lng),kt=o.bm(M.lat,mt.lat),Rt=o.aH(vt-ft);return be=ut!==_,{easeFunc:Ut=>{if(o.b5(z,q)||As({startEulerAngles:z,endEulerAngles:q,tr:a,k:Ut,useSlerp:z.roll!=q.roll}),ae&&a.interpolatePadding(T,c.padding,Ut),c.around)o.w("Easing around a point is not supported under globe projection."),a.setLocationAtPoint(c.around,c.aroundPoint);else{const It=vt>ft?Math.min(2,Rt):Math.max(.5,Rt),rn=Math.pow(It,1-Ut),Zt=To(M,Et,kt,Ut*rn);a.setCenter(Zt.wrap())}if(be){const It=o.B.number(ft,vt,Ut)+zr(0,a.center.lat);a.setZoom(It)}},isZooming:be,elevationCenter:mt}}handleFlyTo(a,c){const _=c.zoom!==void 0,M=a.center,T=a.zoom,z=a.padding,q=!a.isPaddingEqual(c.padding),te=a.getConstrained(o.Q.convert(c.center||c.locationAtOffset),T).center,ae=_?+c.zoom:a.zoom+zr(a.center.lat,te.lat),be=a.clone();be.setCenter(te),be.setZoom(ae),be.setBearing(c.bearing);const ke=new o.P(o.ad(a.centerPoint.x+c.offsetAsPoint.x,0,a.width),o.ad(a.centerPoint.y+c.offsetAsPoint.y,0,a.height));be.setLocationAtPoint(te,ke);const Te=be.center;Xs(a,Te);const $e=function(kt,Rt,Ut){const It=Pr(Rt),rn=Pr(Ut),Zt=o.aU(It,rn),Mn=Math.acos(Zt),En=di(kt);return Mn/(2*Math.PI)*En}(a,M,Te),Xe=T+zr(M.lat,0),mt=ae+zr(Te.lat,0),ut=o.aH(mt-Xe);let ft;if(typeof c.minZoom=="number"){const kt=+c.minZoom+zr(Te.lat,0),Rt=Math.min(kt,Xe,mt)+zr(0,Te.lat),Ut=a.getConstrained(Te,Rt).zoom+zr(Te.lat,0);ft=o.aH(Ut-Xe)}const vt=o.bm(M.lng,Te.lng),Et=o.bm(M.lat,Te.lat);return{easeFunc:(kt,Rt,Ut,It)=>{const rn=To(M,vt,Et,Ut);q&&a.interpolatePadding(z,c.padding,kt);const Zt=kt===1?Te:rn;a.setCenter(Zt.wrap());const Mn=Xe+o.aa(Rt);a.setZoom(kt===1?ae:Mn+zr(0,Zt.lat))},scaleOfZoom:ut,targetCenter:Te,scaleOfMinZoom:ft,pixelPathLength:$e}}static solveVectorScale(a,c,_,M,T){const z=M==="x"?[_[0],_[4],_[8],_[12]]:[_[1],_[5],_[9],_[13]],q=[_[3],_[7],_[11],_[15]],te=a[0]*z[0]+a[1]*z[1]+a[2]*z[2],ae=a[0]*q[0]+a[1]*q[1]+a[2]*q[2],be=c[0]*z[0]+c[1]*z[1]+c[2]*z[2],ke=c[0]*q[0]+c[1]*q[1]+c[2]*q[2];return be+T*ae===te+T*ke||q[3]*(te-be)+z[3]*(ke-ae)+te*ke==be*ae?null:(be+z[3]-T*ke-T*q[3])/(be-te-T*ke+T*ae)}static getLesserNonNegativeNonNull(a,c){return c!==null&&c>=0&&c<a?c:a}}class Ad{constructor(a){this._globe=a,this._mercatorCameraHelper=new ml,this._verticalPerspectiveCameraHelper=new gl}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(a,c){return this.currentHelper.handlePanInertia(a,c)}handleMapControlsRollPitchBearingZoom(a,c){return this.currentHelper.handleMapControlsRollPitchBearingZoom(a,c)}handleMapControlsPan(a,c,_){this.currentHelper.handleMapControlsPan(a,c,_)}cameraForBoxAndBearing(a,c,_,M,T){return this.currentHelper.cameraForBoxAndBearing(a,c,_,M,T)}handleJumpToCenterZoom(a,c){this.currentHelper.handleJumpToCenterZoom(a,c)}handleEaseTo(a,c){return this.currentHelper.handleEaseTo(a,c)}handleFlyTo(a,c){return this.currentHelper.handleFlyTo(a,c)}}const du=(I,a)=>o.x(I,a&&a.filter(c=>c.identifier!=="source.canvas")),jd=o.bt();class cd extends o.E{constructor(a,c={}){super(),this._rtlPluginLoaded=()=>{for(const _ in this.sourceCaches){const M=this.sourceCaches[_].getSource().type;M!=="vector"&&M!=="geojson"||this.sourceCaches[_].reload()}},this.map=a,this.dispatcher=new Pt(Ft(),a._getMapId()),this.dispatcher.registerMessageHandler("GG",(_,M)=>this.getGlyphs(_,M)),this.dispatcher.registerMessageHandler("GI",(_,M)=>this.getImages(_,M)),this.imageManager=new fe,this.imageManager.setEventedParent(this),this.glyphManager=new Ke(a._requestManager,c.localIdeographFontFamily),this.lineAtlas=new we(256,512),this.crossTileSymbolIndex=new ua,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new o.bu,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",o.bv()),ce().on(vr,this._rtlPluginLoaded),this.on("data",_=>{if(_.dataType!=="source"||_.sourceDataType!=="metadata")return;const M=this.sourceCaches[_.sourceId];if(!M)return;const T=M.getSource();if(T&&T.vectorLayerIds)for(const z in this._layers){const q=this._layers[z];q.source===T.id&&this._validateLayer(q)}})}loadURL(a,c={},_){this.fire(new o.l("dataloading",{dataType:"style"})),c.validate=typeof c.validate!="boolean"||c.validate;const M=this.map._requestManager.transformRequest(a,"Style");this._loadStyleRequest=new AbortController;const T=this._loadStyleRequest;o.j(M,this._loadStyleRequest).then(z=>{this._loadStyleRequest=null,this._load(z.data,c,_)}).catch(z=>{this._loadStyleRequest=null,z&&!T.signal.aborted&&this.fire(new o.k(z))})}loadJSON(a,c={},_){this.fire(new o.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,O.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,c.validate=c.validate!==!1,this._load(a,c,_)}).catch(()=>{})}loadEmpty(){this.fire(new o.l("dataloading",{dataType:"style"})),this._load(jd,{validate:!1})}_load(a,c,_){var M,T;const z=c.transformStyle?c.transformStyle(_,a):a;if(!c.validate||!du(this,o.y(z))){this._loaded=!0,this.stylesheet=z;for(const q in z.sources)this.addSource(q,z.sources[q],{validate:!1});z.sprite?this._loadSprite(z.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(z.glyphs),this._createLayers(),this.light=new Ze(this.stylesheet.light),this._setProjectionInternal(((M=this.stylesheet.projection)===null||M===void 0?void 0:M.type)||"mercator"),this.sky=new Ne(this.stylesheet.sky),this.map.setTerrain((T=this.stylesheet.terrain)!==null&&T!==void 0?T:null),this.fire(new o.l("data",{dataType:"style"})),this.fire(new o.l("style.load"))}}_createLayers(){const a=o.bw(this.stylesheet.layers);this.dispatcher.broadcast("SL",a),this._order=a.map(c=>c.id),this._layers={},this._serializedLayers=null;for(const c of a){const _=o.bx(c);_.setEventedParent(this,{layer:{id:c.id}}),this._layers[c.id]=_}}_loadSprite(a,c=!1,_=void 0){let M;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(T,z,q,te){return o._(this,void 0,void 0,function*(){const ae=ne(T),be=q>1?"@2x":"",ke={},Te={};for(const{id:$e,url:Xe}of ae){const mt=z.transformRequest(G(Xe,be,".json"),"SpriteJSON");ke[$e]=o.j(mt,te);const ut=z.transformRequest(G(Xe,be,".png"),"SpriteImage");Te[$e]=re.getImage(ut,te)}return yield Promise.all([...Object.values(ke),...Object.values(Te)]),function($e,Xe){return o._(this,void 0,void 0,function*(){const mt={};for(const ut in $e){mt[ut]={};const ft=O.getImageCanvasContext((yield Xe[ut]).data),vt=(yield $e[ut]).data;for(const Et in vt){const{width:kt,height:Rt,x:Ut,y:It,sdf:rn,pixelRatio:Zt,stretchX:Mn,stretchY:En,content:bn,textFitWidth:On,textFitHeight:zn}=vt[Et];mt[ut][Et]={data:null,pixelRatio:Zt,sdf:rn,stretchX:Mn,stretchY:En,content:bn,textFitWidth:On,textFitHeight:zn,spriteData:{width:kt,height:Rt,x:Ut,y:It,context:ft}}}}return mt})}(ke,Te)})}(a,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(T=>{if(this._spriteRequest=null,T)for(const z in T){this._spritesImagesIds[z]=[];const q=this._spritesImagesIds[z]?this._spritesImagesIds[z].filter(te=>!(te in T)):[];for(const te of q)this.imageManager.removeImage(te),this._changedImages[te]=!0;for(const te in T[z]){const ae=z==="default"?te:`${z}:${te}`;this._spritesImagesIds[z].push(ae),ae in this.imageManager.images?this.imageManager.updateImage(ae,T[z][te],!1):this.imageManager.addImage(ae,T[z][te]),c&&(this._changedImages[ae]=!0)}}}).catch(T=>{this._spriteRequest=null,M=T,this.fire(new o.k(M))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),c&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"})),_&&_(M)})}_unloadSprite(){for(const a of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(a),this._changedImages[a]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"}))}_validateLayer(a){const c=this.sourceCaches[a.source];if(!c)return;const _=a.sourceLayer;if(!_)return;const M=c.getSource();(M.type==="geojson"||M.vectorLayerIds&&M.vectorLayerIds.indexOf(_)===-1)&&this.fire(new o.k(new Error(`Source layer "${_}" does not exist on source "${M.id}" as specified by style layer "${a.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const a in this.sourceCaches)if(!this.sourceCaches[a].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(a,c=!1){const _=this._serializedAllLayers();if(!a||a.length===0)return Object.values(c?o.by(_):_);const M=[];for(const T of a)if(_[T]){const z=c?o.by(_[T]):_[T];M.push(z)}return M}_serializedAllLayers(){let a=this._serializedLayers;if(a)return a;a=this._serializedLayers={};const c=Object.keys(this._layers);for(const _ of c){const M=this._layers[_];M.type!=="custom"&&(a[_]=M.serialize())}return a}hasTransitions(){var a,c,_;if(!((a=this.light)===null||a===void 0)&&a.hasTransition()||!((c=this.sky)===null||c===void 0)&&c.hasTransition()||!((_=this.projection)===null||_===void 0)&&_.hasTransition())return!0;for(const M in this.sourceCaches)if(this.sourceCaches[M].hasTransition())return!0;for(const M in this._layers)if(this._layers[M].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(a){if(!this._loaded)return;const c=this._changed;if(c){const M=Object.keys(this._updatedLayers),T=Object.keys(this._removedLayers);(M.length||T.length)&&this._updateWorkerLayers(M,T);for(const z in this._updatedSources){const q=this._updatedSources[z];if(q==="reload")this._reloadSource(z);else{if(q!=="clear")throw new Error(`Invalid action ${q}`);this._clearSource(z)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const z in this._updatedPaintProps)this._layers[z].updateTransitions(a);this.light.updateTransitions(a),this.sky.updateTransitions(a),this._resetUpdates()}const _={};for(const M in this.sourceCaches){const T=this.sourceCaches[M];_[M]=T.used,T.used=!1}for(const M of this._order){const T=this._layers[M];T.recalculate(a,this._availableImages),!T.isHidden(a.zoom)&&T.source&&(this.sourceCaches[T.source].used=!0)}for(const M in _){const T=this.sourceCaches[M];!!_[M]!=!!T.used&&T.fire(new o.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:M}))}this.light.recalculate(a),this.sky.recalculate(a),this.projection.recalculate(a),this.z=a.zoom,c&&this.fire(new o.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const a=Object.keys(this._changedImages);if(a.length){for(const c in this.sourceCaches)this.sourceCaches[c].reloadTilesForDependencies(["icons","patterns"],a);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const a in this.sourceCaches)this.sourceCaches[a].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(a,c){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(a,!1),removedIds:c})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(a,c={}){var _;this._checkLoaded();const M=this.serialize();if(a=c.transformStyle?c.transformStyle(M,a):a,((_=c.validate)===null||_===void 0||_)&&du(this,o.y(a)))return!1;(a=o.by(a)).layers=o.bw(a.layers);const T=o.bz(M,a),z=this._getOperationsToPerform(T);if(z.unimplemented.length>0)throw new Error(`Unimplemented: ${z.unimplemented.join(", ")}.`);if(z.operations.length===0)return!1;for(const q of z.operations)q();return this.stylesheet=a,this._serializedLayers=null,!0}_getOperationsToPerform(a){const c=[],_=[];for(const M of a)switch(M.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":c.push(()=>this.addLayer.apply(this,M.args));break;case"removeLayer":c.push(()=>this.removeLayer.apply(this,M.args));break;case"setPaintProperty":c.push(()=>this.setPaintProperty.apply(this,M.args));break;case"setLayoutProperty":c.push(()=>this.setLayoutProperty.apply(this,M.args));break;case"setFilter":c.push(()=>this.setFilter.apply(this,M.args));break;case"addSource":c.push(()=>this.addSource.apply(this,M.args));break;case"removeSource":c.push(()=>this.removeSource.apply(this,M.args));break;case"setLayerZoomRange":c.push(()=>this.setLayerZoomRange.apply(this,M.args));break;case"setLight":c.push(()=>this.setLight.apply(this,M.args));break;case"setGeoJSONSourceData":c.push(()=>this.setGeoJSONSourceData.apply(this,M.args));break;case"setGlyphs":c.push(()=>this.setGlyphs.apply(this,M.args));break;case"setSprite":c.push(()=>this.setSprite.apply(this,M.args));break;case"setTerrain":c.push(()=>this.map.setTerrain.apply(this,M.args));break;case"setSky":c.push(()=>this.setSky.apply(this,M.args));break;case"setProjection":this.setProjection.apply(this,M.args);break;case"setTransition":c.push(()=>{});break;default:_.push(M.command)}return{operations:c,unimplemented:_}}addImage(a,c){if(this.getImage(a))return this.fire(new o.k(new Error(`An image named "${a}" already exists.`)));this.imageManager.addImage(a,c),this._afterImageUpdated(a)}updateImage(a,c){this.imageManager.updateImage(a,c)}getImage(a){return this.imageManager.getImage(a)}removeImage(a){if(!this.getImage(a))return this.fire(new o.k(new Error(`An image named "${a}" does not exist.`)));this.imageManager.removeImage(a),this._afterImageUpdated(a)}_afterImageUpdated(a){this._availableImages=this.imageManager.listImages(),this._changedImages[a]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(a,c,_={}){if(this._checkLoaded(),this.sourceCaches[a]!==void 0)throw new Error(`Source "${a}" already exists.`);if(!c.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(c).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(c.type)>=0&&this._validate(o.y.source,`sources.${a}`,c,null,_))return;this.map&&this.map._collectResourceTiming&&(c.collectResourceTiming=!0);const M=this.sourceCaches[a]=new J(a,c,this.dispatcher);M.style=this,M.setEventedParent(this,()=>({isSourceLoaded:M.loaded(),source:M.serialize(),sourceId:a})),M.onAdd(this.map),this._changed=!0}removeSource(a){if(this._checkLoaded(),this.sourceCaches[a]===void 0)throw new Error("There is no source with this ID");for(const _ in this._layers)if(this._layers[_].source===a)return this.fire(new o.k(new Error(`Source "${a}" cannot be removed while layer "${_}" is using it.`)));const c=this.sourceCaches[a];delete this.sourceCaches[a],delete this._updatedSources[a],c.fire(new o.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:a})),c.setEventedParent(null),c.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(a,c){if(this._checkLoaded(),this.sourceCaches[a]===void 0)throw new Error(`There is no source with this ID=${a}`);const _=this.sourceCaches[a].getSource();if(_.type!=="geojson")throw new Error(`geojsonSource.type is ${_.type}, which is !== 'geojson`);_.setData(c),this._changed=!0}getSource(a){return this.sourceCaches[a]&&this.sourceCaches[a].getSource()}addLayer(a,c,_={}){this._checkLoaded();const M=a.id;if(this.getLayer(M))return void this.fire(new o.k(new Error(`Layer "${M}" already exists on this map.`)));let T;if(a.type==="custom"){if(du(this,o.bA(a)))return;T=o.bx(a)}else{if("source"in a&&typeof a.source=="object"&&(this.addSource(M,a.source),a=o.by(a),a=o.e(a,{source:M})),this._validate(o.y.layer,`layers.${M}`,a,{arrayIndex:-1},_))return;T=o.bx(a),this._validateLayer(T),T.setEventedParent(this,{layer:{id:M}})}const z=c?this._order.indexOf(c):this._order.length;if(c&&z===-1)this.fire(new o.k(new Error(`Cannot add layer "${M}" before non-existing layer "${c}".`)));else{if(this._order.splice(z,0,M),this._layerOrderChanged=!0,this._layers[M]=T,this._removedLayers[M]&&T.source&&T.type!=="custom"){const q=this._removedLayers[M];delete this._removedLayers[M],q.type!==T.type?this._updatedSources[T.source]="clear":(this._updatedSources[T.source]="reload",this.sourceCaches[T.source].pause())}this._updateLayer(T),T.onAdd&&T.onAdd(this.map)}}moveLayer(a,c){if(this._checkLoaded(),this._changed=!0,!this._layers[a])return void this.fire(new o.k(new Error(`The layer '${a}' does not exist in the map's style and cannot be moved.`)));if(a===c)return;const _=this._order.indexOf(a);this._order.splice(_,1);const M=c?this._order.indexOf(c):this._order.length;c&&M===-1?this.fire(new o.k(new Error(`Cannot move layer "${a}" before non-existing layer "${c}".`))):(this._order.splice(M,0,a),this._layerOrderChanged=!0)}removeLayer(a){this._checkLoaded();const c=this._layers[a];if(!c)return void this.fire(new o.k(new Error(`Cannot remove non-existing layer "${a}".`)));c.setEventedParent(null);const _=this._order.indexOf(a);this._order.splice(_,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[a]=c,delete this._layers[a],this._serializedLayers&&delete this._serializedLayers[a],delete this._updatedLayers[a],delete this._updatedPaintProps[a],c.onRemove&&c.onRemove(this.map)}getLayer(a){return this._layers[a]}getLayersOrder(){return[...this._order]}hasLayer(a){return a in this._layers}setLayerZoomRange(a,c,_){this._checkLoaded();const M=this.getLayer(a);M?M.minzoom===c&&M.maxzoom===_||(c!=null&&(M.minzoom=c),_!=null&&(M.maxzoom=_),this._updateLayer(M)):this.fire(new o.k(new Error(`Cannot set the zoom range of non-existing layer "${a}".`)))}setFilter(a,c,_={}){this._checkLoaded();const M=this.getLayer(a);if(M){if(!o.bB(M.filter,c))return c==null?(M.filter=void 0,void this._updateLayer(M)):void(this._validate(o.y.filter,`layers.${M.id}.filter`,c,null,_)||(M.filter=o.by(c),this._updateLayer(M)))}else this.fire(new o.k(new Error(`Cannot filter non-existing layer "${a}".`)))}getFilter(a){return o.by(this.getLayer(a).filter)}setLayoutProperty(a,c,_,M={}){this._checkLoaded();const T=this.getLayer(a);T?o.bB(T.getLayoutProperty(c),_)||(T.setLayoutProperty(c,_,M),this._updateLayer(T)):this.fire(new o.k(new Error(`Cannot style non-existing layer "${a}".`)))}getLayoutProperty(a,c){const _=this.getLayer(a);if(_)return _.getLayoutProperty(c);this.fire(new o.k(new Error(`Cannot get style of non-existing layer "${a}".`)))}setPaintProperty(a,c,_,M={}){this._checkLoaded();const T=this.getLayer(a);T?o.bB(T.getPaintProperty(c),_)||(T.setPaintProperty(c,_,M)&&this._updateLayer(T),this._changed=!0,this._updatedPaintProps[a]=!0,this._serializedLayers=null):this.fire(new o.k(new Error(`Cannot style non-existing layer "${a}".`)))}getPaintProperty(a,c){return this.getLayer(a).getPaintProperty(c)}setFeatureState(a,c){this._checkLoaded();const _=a.source,M=a.sourceLayer,T=this.sourceCaches[_];if(T===void 0)return void this.fire(new o.k(new Error(`The source '${_}' does not exist in the map's style.`)));const z=T.getSource().type;z==="geojson"&&M?this.fire(new o.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):z!=="vector"||M?(a.id===void 0&&this.fire(new o.k(new Error("The feature id parameter must be provided."))),T.setFeatureState(M,a.id,c)):this.fire(new o.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(a,c){this._checkLoaded();const _=a.source,M=this.sourceCaches[_];if(M===void 0)return void this.fire(new o.k(new Error(`The source '${_}' does not exist in the map's style.`)));const T=M.getSource().type,z=T==="vector"?a.sourceLayer:void 0;T!=="vector"||z?c&&typeof a.id!="string"&&typeof a.id!="number"?this.fire(new o.k(new Error("A feature id is required to remove its specific state property."))):M.removeFeatureState(z,a.id,c):this.fire(new o.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(a){this._checkLoaded();const c=a.source,_=a.sourceLayer,M=this.sourceCaches[c];if(M!==void 0)return M.getSource().type!=="vector"||_?(a.id===void 0&&this.fire(new o.k(new Error("The feature id parameter must be provided."))),M.getFeatureState(_,a.id)):void this.fire(new o.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new o.k(new Error(`The source '${c}' does not exist in the map's style.`)))}getTransition(){return o.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const a=o.bC(this.sourceCaches,T=>T.serialize()),c=this._serializeByIds(this._order,!0),_=this.map.getTerrain()||void 0,M=this.stylesheet;return o.bD({version:M.version,name:M.name,metadata:M.metadata,light:M.light,sky:M.sky,center:M.center,zoom:M.zoom,bearing:M.bearing,pitch:M.pitch,sprite:M.sprite,glyphs:M.glyphs,transition:M.transition,projection:M.projection,sources:a,layers:c,terrain:_},T=>T!==void 0)}_updateLayer(a){this._updatedLayers[a.id]=!0,a.source&&!this._updatedSources[a.source]&&this.sourceCaches[a.source].getSource().type!=="raster"&&(this._updatedSources[a.source]="reload",this.sourceCaches[a.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(a){const c=z=>this._layers[z].type==="fill-extrusion",_={},M=[];for(let z=this._order.length-1;z>=0;z--){const q=this._order[z];if(c(q)){_[q]=z;for(const te of a){const ae=te[q];if(ae)for(const be of ae)M.push(be)}}}M.sort((z,q)=>q.intersectionZ-z.intersectionZ);const T=[];for(let z=this._order.length-1;z>=0;z--){const q=this._order[z];if(c(q))for(let te=M.length-1;te>=0;te--){const ae=M[te].feature;if(_[ae.layer.id]<z)break;T.push(ae),M.pop()}else for(const te of a){const ae=te[q];if(ae)for(const be of ae)T.push(be.feature)}}return T}queryRenderedFeatures(a,c,_){c&&c.filter&&this._validate(o.y.filter,"queryRenderedFeatures.filter",c.filter,null,c);const M={};if(c&&c.layers){if(!(Array.isArray(c.layers)||c.layers instanceof Set))return this.fire(new o.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const ae of c.layers){const be=this._layers[ae];if(!be)return this.fire(new o.k(new Error(`The layer '${ae}' does not exist in the map's style and cannot be queried for features.`))),[];M[be.source]=!0}}const T=[];c.availableImages=this._availableImages;const z=this._serializedAllLayers(),q=c.layers instanceof Set?c.layers:Array.isArray(c.layers)?new Set(c.layers):null,te=Object.assign(Object.assign({},c),{layers:q});for(const ae in this.sourceCaches)c.layers&&!M[ae]||T.push(Be(this.sourceCaches[ae],this._layers,z,a,te,_));return this.placement&&T.push(function(ae,be,ke,Te,$e,Xe,mt){const ut={},ft=Xe.queryRenderedSymbols(Te),vt=[];for(const Et of Object.keys(ft).map(Number))vt.push(mt[Et]);vt.sort(it);for(const Et of vt){const kt=Et.featureIndex.lookupSymbolFeatures(ft[Et.bucketInstanceId],be,Et.bucketIndex,Et.sourceLayerIndex,$e.filter,$e.layers,$e.availableImages,ae);for(const Rt in kt){const Ut=ut[Rt]=ut[Rt]||[],It=kt[Rt];It.sort((rn,Zt)=>{const Mn=Et.featureSortOrder;if(Mn){const En=Mn.indexOf(rn.featureIndex);return Mn.indexOf(Zt.featureIndex)-En}return Zt.featureIndex-rn.featureIndex});for(const rn of It)Ut.push(rn)}}return function(Et,kt,Rt){for(const Ut in Et)for(const It of Et[Ut])_t(It,Rt[kt[Ut].source]);return Et}(ut,ae,ke)}(this._layers,z,this.sourceCaches,a,te,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(T)}querySourceFeatures(a,c){c&&c.filter&&this._validate(o.y.filter,"querySourceFeatures.filter",c.filter,null,c);const _=this.sourceCaches[a];return _?function(M,T){const z=M.getRenderableIds().map(ae=>M.getTileByID(ae)),q=[],te={};for(let ae=0;ae<z.length;ae++){const be=z[ae],ke=be.tileID.canonical.key;te[ke]||(te[ke]=!0,be.querySourceFeatures(q,T))}return q}(_,c):[]}getLight(){return this.light.getLight()}setLight(a,c={}){this._checkLoaded();const _=this.light.getLight();let M=!1;for(const z in a)if(!o.bB(a[z],_[z])){M=!0;break}if(!M)return;const T={now:O.now(),transition:o.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(a,c),this.light.updateTransitions(T)}getProjection(){var a;return(a=this.stylesheet)===null||a===void 0?void 0:a.projection}setProjection(a){if(this._checkLoaded(),this.projection){if(this.projection.name===a.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=a,this._setProjectionInternal(a.type)}getSky(){var a;return(a=this.stylesheet)===null||a===void 0?void 0:a.sky}setSky(a,c={}){this._checkLoaded();const _=this.getSky();let M=!1;if(!a&&!_)return;if(a&&!_)M=!0;else if(!a&&_)M=!0;else for(const z in a)if(!o.bB(a[z],_[z])){M=!0;break}if(!M)return;const T={now:O.now(),transition:o.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=a,this.sky.setSky(a,c),this.sky.updateTransitions(T)}_setProjectionInternal(a){const c=function(_){if(Array.isArray(_)){const M=new si({type:_});return{projection:M,transform:new el,cameraHelper:new Ad(M)}}switch(_){case"mercator":return{projection:new Ja,transform:new ea,cameraHelper:new ml};case"globe":{const M=new si({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:M,transform:new el,cameraHelper:new Ad(M)}}case"vertical-perspective":return{projection:new Er,transform:new zd,cameraHelper:new gl};default:return o.w(`Unknown projection name: ${_}. Falling back to mercator projection.`),{projection:new Ja,transform:new ea,cameraHelper:new ml}}}(a);this.projection=c.projection,this.map.migrateProjection(c.transform,c.cameraHelper);for(const _ in this.sourceCaches)this.sourceCaches[_].reload()}_validate(a,c,_,M,T={}){return(!T||T.validate!==!1)&&du(this,a.call(o.y,o.e({key:c,style:this.serialize(),value:_,styleSpec:o.v},M)))}_remove(a=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),ce().off(vr,this._rtlPluginLoaded);for(const c in this._layers)this._layers[c].setEventedParent(null);for(const c in this.sourceCaches){const _=this.sourceCaches[c];_.setEventedParent(null),_.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),a&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(a)}_clearSource(a){this.sourceCaches[a].clearTiles()}_reloadSource(a){this.sourceCaches[a].resume(),this.sourceCaches[a].reload()}_updateSources(a){for(const c in this.sourceCaches)this.sourceCaches[c].update(a,this.map.terrain)}_generateCollisionBoxes(){for(const a in this.sourceCaches)this._reloadSource(a)}_updatePlacement(a,c,_,M,T=!1){let z=!1,q=!1;const te={};for(const ae of this._order){const be=this._layers[ae];if(be.type!=="symbol")continue;if(!te[be.source]){const Te=this.sourceCaches[be.source];te[be.source]=Te.getRenderableIds(!0).map($e=>Te.getTileByID($e)).sort(($e,Xe)=>Xe.tileID.overscaledZ-$e.tileID.overscaledZ||($e.tileID.isLessThan(Xe.tileID)?-1:1))}const ke=this.crossTileSymbolIndex.addLayer(be,te[be.source],a.center.lng);z=z||ke}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((T=T||this._layerOrderChanged||_===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(O.now(),a.zoom))&&(this.pauseablePlacement=new fn(a,this.map.terrain,this._order,T,c,_,M,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,te),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(O.now()),q=!0),z&&this.pauseablePlacement.placement.setStale()),q||z)for(const ae of this._order){const be=this._layers[ae];be.type==="symbol"&&this.placement.updateLayerOpacities(be,te[be.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(O.now())}_releaseSymbolFadeTiles(){for(const a in this.sourceCaches)this.sourceCaches[a].releaseSymbolFadeTiles()}getImages(a,c){return o._(this,void 0,void 0,function*(){const _=yield this.imageManager.getImages(c.icons);this._updateTilesForChangedImages();const M=this.sourceCaches[c.source];return M&&M.setDependencies(c.tileID.key,c.type,c.icons),_})}getGlyphs(a,c){return o._(this,void 0,void 0,function*(){const _=yield this.glyphManager.getGlyphs(c.stacks),M=this.sourceCaches[c.source];return M&&M.setDependencies(c.tileID.key,c.type,[""]),_})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(a,c={}){this._checkLoaded(),a&&this._validate(o.y.glyphs,"glyphs",a,null,c)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=a,this.glyphManager.entries={},this.glyphManager.setURL(a))}addSprite(a,c,_={},M){this._checkLoaded();const T=[{id:a,url:c}],z=[...ne(this.stylesheet.sprite),...T];this._validate(o.y.sprite,"sprite",z,null,_)||(this.stylesheet.sprite=z,this._loadSprite(T,!0,M))}removeSprite(a){this._checkLoaded();const c=ne(this.stylesheet.sprite);if(c.find(_=>_.id===a)){if(this._spritesImagesIds[a])for(const _ of this._spritesImagesIds[a])this.imageManager.removeImage(_),this._changedImages[_]=!0;c.splice(c.findIndex(_=>_.id===a),1),this.stylesheet.sprite=c.length>0?c:void 0,delete this._spritesImagesIds[a],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"}))}else this.fire(new o.k(new Error(`Sprite "${a}" doesn't exists on this map.`)))}getSprite(){return ne(this.stylesheet.sprite)}setSprite(a,c={},_){this._checkLoaded(),a&&this._validate(o.y.sprite,"sprite",a,null,c)||(this.stylesheet.sprite=a,a?this._loadSprite(a,!0,_):(this._unloadSprite(),_&&_(null)))}}var Fo=o.aC([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Cc{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(a,c,_,M,T,z,q,te,ae){this.context=a;let be=this.boundPaintVertexBuffers.length!==M.length;for(let ke=0;!be&&ke<M.length;ke++)this.boundPaintVertexBuffers[ke]!==M[ke]&&(be=!0);!this.vao||this.boundProgram!==c||this.boundLayoutVertexBuffer!==_||be||this.boundIndexBuffer!==T||this.boundVertexOffset!==z||this.boundDynamicVertexBuffer!==q||this.boundDynamicVertexBuffer2!==te||this.boundDynamicVertexBuffer3!==ae?this.freshBind(c,_,M,T,z,q,te,ae):(a.bindVertexArray.set(this.vao),q&&q.bind(),T&&T.dynamicDraw&&T.bind(),te&&te.bind(),ae&&ae.bind())}freshBind(a,c,_,M,T,z,q,te){const ae=a.numAttributes,be=this.context,ke=be.gl;this.vao&&this.destroy(),this.vao=be.createVertexArray(),be.bindVertexArray.set(this.vao),this.boundProgram=a,this.boundLayoutVertexBuffer=c,this.boundPaintVertexBuffers=_,this.boundIndexBuffer=M,this.boundVertexOffset=T,this.boundDynamicVertexBuffer=z,this.boundDynamicVertexBuffer2=q,this.boundDynamicVertexBuffer3=te,c.enableAttributes(ke,a);for(const Te of _)Te.enableAttributes(ke,a);z&&z.enableAttributes(ke,a),q&&q.enableAttributes(ke,a),te&&te.enableAttributes(ke,a),c.bind(),c.setVertexAttribPointers(ke,a,T);for(const Te of _)Te.bind(),Te.setVertexAttribPointers(ke,a,T);z&&(z.bind(),z.setVertexAttribPointers(ke,a,T)),M&&M.bind(),q&&(q.bind(),q.setVertexAttribPointers(ke,a,T)),te&&(te.bind(),te.setVertexAttribPointers(ke,a,T)),be.currentNumAttributes=ae}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const yh=(I,a,c,_,M)=>({u_texture:0,u_ele_delta:I,u_fog_matrix:a,u_fog_color:c?c.properties.get("fog-color"):o.b6.white,u_fog_ground_blend:c?c.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:M?0:c?c.calculateFogBlendOpacity(_):0,u_horizon_color:c?c.properties.get("horizon-color"):o.b6.white,u_horizon_fog_blend:c?c.properties.get("horizon-fog-blend"):1,u_is_globe_mode:M?1:0}),Nd={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function zu(I){const a=[];for(let c=0;c<I.length;c++){if(I[c]===null)continue;const _=I[c].split(" ");a.push(_.pop())}return a}class Wd{constructor(a,c,_,M,T,z,q,te){const ae=a.gl;this.program=ae.createProgram();const be=zu(c.staticAttributes),ke=_?_.getBinderAttributes():[],Te=be.concat(ke),$e=ii.prelude.staticUniforms?zu(ii.prelude.staticUniforms):[],Xe=q.staticUniforms?zu(q.staticUniforms):[],mt=c.staticUniforms?zu(c.staticUniforms):[],ut=_?_.getBinderUniforms():[],ft=$e.concat(Xe).concat(mt).concat(ut),vt=[];for(const Zt of ft)vt.indexOf(Zt)<0&&vt.push(Zt);const Et=_?_.defines():[];Ki(ae)&&Et.unshift("#version 300 es"),T&&Et.push("#define OVERDRAW_INSPECTOR;"),z&&Et.push("#define TERRAIN3D;"),te&&Et.push(te);let kt=Et.concat(ii.prelude.fragmentSource,q.fragmentSource,c.fragmentSource).join(`
`),Rt=Et.concat(ii.prelude.vertexSource,q.vertexSource,c.vertexSource).join(`
`);Ki(ae)||(kt=function(Zt){return Zt.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")}(kt),Rt=function(Zt){return Zt.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")}(Rt));const Ut=ae.createShader(ae.FRAGMENT_SHADER);if(ae.isContextLost())return void(this.failedToCreate=!0);if(ae.shaderSource(Ut,kt),ae.compileShader(Ut),!ae.getShaderParameter(Ut,ae.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${ae.getShaderInfoLog(Ut)}`);ae.attachShader(this.program,Ut);const It=ae.createShader(ae.VERTEX_SHADER);if(ae.isContextLost())return void(this.failedToCreate=!0);if(ae.shaderSource(It,Rt),ae.compileShader(It),!ae.getShaderParameter(It,ae.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${ae.getShaderInfoLog(It)}`);ae.attachShader(this.program,It),this.attributes={};const rn={};this.numAttributes=Te.length;for(let Zt=0;Zt<this.numAttributes;Zt++)Te[Zt]&&(ae.bindAttribLocation(this.program,Zt,Te[Zt]),this.attributes[Te[Zt]]=Zt);if(ae.linkProgram(this.program),!ae.getProgramParameter(this.program,ae.LINK_STATUS))throw new Error(`Program failed to link: ${ae.getProgramInfoLog(this.program)}`);ae.deleteShader(It),ae.deleteShader(Ut);for(let Zt=0;Zt<vt.length;Zt++){const Mn=vt[Zt];if(Mn&&!rn[Mn]){const En=ae.getUniformLocation(this.program,Mn);En&&(rn[Mn]=En)}}this.fixedUniforms=M(a,rn),this.terrainUniforms=((Zt,Mn)=>({u_depth:new o.bE(Zt,Mn.u_depth),u_terrain:new o.bE(Zt,Mn.u_terrain),u_terrain_dim:new o.b7(Zt,Mn.u_terrain_dim),u_terrain_matrix:new o.bG(Zt,Mn.u_terrain_matrix),u_terrain_unpack:new o.bH(Zt,Mn.u_terrain_unpack),u_terrain_exaggeration:new o.b7(Zt,Mn.u_terrain_exaggeration)}))(a,rn),this.projectionUniforms=((Zt,Mn)=>({u_projection_matrix:new o.bG(Zt,Mn.u_projection_matrix),u_projection_tile_mercator_coords:new o.bH(Zt,Mn.u_projection_tile_mercator_coords),u_projection_clipping_plane:new o.bH(Zt,Mn.u_projection_clipping_plane),u_projection_transition:new o.b7(Zt,Mn.u_projection_transition),u_projection_fallback_matrix:new o.bG(Zt,Mn.u_projection_fallback_matrix)}))(a,rn),this.binderUniforms=_?_.getUniforms(a,rn):[]}draw(a,c,_,M,T,z,q,te,ae,be,ke,Te,$e,Xe,mt,ut,ft,vt,Et){const kt=a.gl;if(this.failedToCreate)return;if(a.program.set(this.program),a.setDepthMode(_),a.setStencilMode(M),a.setColorMode(T),a.setCullFace(z),te){a.activeTexture.set(kt.TEXTURE2),kt.bindTexture(kt.TEXTURE_2D,te.depthTexture),a.activeTexture.set(kt.TEXTURE3),kt.bindTexture(kt.TEXTURE_2D,te.texture);for(const Ut in this.terrainUniforms)this.terrainUniforms[Ut].set(te[Ut])}if(ae)for(const Ut in ae)this.projectionUniforms[Nd[Ut]].set(ae[Ut]);if(q)for(const Ut in this.fixedUniforms)this.fixedUniforms[Ut].set(q[Ut]);ut&&ut.setUniforms(a,this.binderUniforms,Xe,{zoom:mt});let Rt=0;switch(c){case kt.LINES:Rt=2;break;case kt.TRIANGLES:Rt=3;break;case kt.LINE_STRIP:Rt=1}for(const Ut of $e.get()){const It=Ut.vaos||(Ut.vaos={});(It[be]||(It[be]=new Cc)).bind(a,this,ke,ut?ut.getPaintVertexBuffers():[],Te,Ut.vertexOffset,ft,vt,Et),kt.drawElements(c,Ut.primitiveLength*Rt,kt.UNSIGNED_SHORT,Ut.primitiveOffset*Rt*2)}}}function Gd(I,a,c){const _=1/o.av(c,1,a.transform.tileZoom),M=Math.pow(2,c.tileID.overscaledZ),T=c.tileSize*Math.pow(2,a.transform.tileZoom)/M,z=T*(c.tileID.canonical.x+c.tileID.wrap*M),q=T*c.tileID.canonical.y;return{u_image:0,u_texsize:c.imageAtlasTexture.size,u_scale:[_,I.fromScale,I.toScale],u_fade:I.t,u_pixel_coord_upper:[z>>16,q>>16],u_pixel_coord_lower:[65535&z,65535&q]}}const _p=(I,a,c,_)=>{const M=I.style.light,T=M.properties.get("position"),z=[T.x,T.y,T.z],q=o.bK();M.properties.get("anchor")==="viewport"&&o.bL(q,I.transform.bearingInRadians),o.bM(z,z,q);const te=I.transform.transformLightDirection(z),ae=M.properties.get("color");return{u_lightpos:z,u_lightpos_globe:te,u_lightintensity:M.properties.get("intensity"),u_lightcolor:[ae.r,ae.g,ae.b],u_vertical_gradient:+a,u_opacity:c,u_fill_translate:_}},dd=(I,a,c,_,M,T,z)=>o.e(_p(I,a,c,_),Gd(T,I,z),{u_height_factor:-Math.pow(2,M.overscaledZ)/z.tileSize/8}),_c=(I,a,c,_)=>o.e(Gd(a,I,c),{u_fill_translate:_}),Gs=(I,a)=>({u_world:I,u_fill_translate:a}),Lf=(I,a,c,_,M)=>o.e(_c(I,a,c,M),{u_world:_}),$h=(I,a,c,_,M)=>{const T=I.transform;let z,q,te=0;if(c.paint.get("circle-pitch-alignment")==="map"){const ae=o.av(a,1,T.zoom);z=!0,q=[ae,ae],te=ae/(o.Z*Math.pow(2,a.tileID.overscaledZ))*2*Math.PI*M}else z=!1,q=T.pixelsToGLUnits;return{u_camera_to_center_distance:T.cameraToCenterDistance,u_scale_with_map:+(c.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+z,u_device_pixel_ratio:I.pixelRatio,u_extrude_scale:q,u_globe_extrude_scale:te,u_translate:_}},jc=I=>({u_pixel_extrude_scale:[1/I.width,1/I.height]}),Hh=I=>({u_viewport_size:[I.width,I.height]}),hd=(I,a=1)=>({u_color:I,u_overlay:0,u_overlay_scale:a}),Zh=(I,a,c,_)=>{const M=o.av(I,1,a)/(o.Z*Math.pow(2,I.tileID.overscaledZ))*2*Math.PI*_;return{u_extrude_scale:o.av(I,1,a),u_intensity:c,u_globe_extrude_scale:M}},vh=(I,a,c,_)=>{const M=o.K();o.bN(M,0,I.width,I.height,0,0,1);const T=I.context.gl;return{u_matrix:M,u_world:[T.drawingBufferWidth,T.drawingBufferHeight],u_image:c,u_color_ramp:_,u_opacity:a.paint.get("heatmap-opacity")}},ZA=(I,a,c)=>{const _=c.paint.get("hillshade-shadow-color"),M=c.paint.get("hillshade-highlight-color"),T=c.paint.get("hillshade-accent-color");let z=c.paint.get("hillshade-illumination-direction")*(Math.PI/180);return c.paint.get("hillshade-illumination-anchor")==="viewport"&&(z+=I.transform.bearingInRadians),{u_image:0,u_latrange:bp(0,a.tileID),u_light:[c.paint.get("hillshade-exaggeration"),z],u_shadow:_,u_highlight:M,u_accent:T}},Xh=(I,a)=>{const c=a.stride,_=o.K();return o.bN(_,0,o.Z,-8192,0,0,1),o.L(_,_,[0,-8192,0]),{u_matrix:_,u_image:1,u_dimension:[c,c],u_zoom:I.overscaledZ,u_unpack:a.getUnpackVector()}};function bp(I,a){const c=Math.pow(2,a.canonical.z),_=a.canonical.y;return[new o.$(0,_/c).toLngLat().lat,new o.$(0,(_+1)/c).toLngLat().lat]}const bc=(I,a,c,_)=>{const M=I.transform;return{u_translation:Wc(I,a,c),u_ratio:_/o.av(a,1,M.zoom),u_device_pixel_ratio:I.pixelRatio,u_units_to_pixels:[1/M.pixelsToGLUnits[0],1/M.pixelsToGLUnits[1]]}},hu=(I,a,c,_,M)=>o.e(bc(I,a,c,_),{u_image:0,u_image_height:M}),Nc=(I,a,c,_,M)=>{const T=I.transform,z=EA(a,T);return{u_translation:Wc(I,a,c),u_texsize:a.imageAtlasTexture.size,u_ratio:_/o.av(a,1,T.zoom),u_device_pixel_ratio:I.pixelRatio,u_image:0,u_scale:[z,M.fromScale,M.toScale],u_fade:M.t,u_units_to_pixels:[1/T.pixelsToGLUnits[0],1/T.pixelsToGLUnits[1]]}},ju=(I,a,c,_,M,T)=>{const z=I.lineAtlas,q=EA(a,I.transform),te=c.layout.get("line-cap")==="round",ae=z.getDash(M.from,te),be=z.getDash(M.to,te),ke=ae.width*T.fromScale,Te=be.width*T.toScale;return o.e(bc(I,a,c,_),{u_patternscale_a:[q/ke,-ae.height/2],u_patternscale_b:[q/Te,-be.height/2],u_sdfgamma:z.width/(256*Math.min(ke,Te)*I.pixelRatio)/2,u_image:0,u_tex_y_a:ae.y,u_tex_y_b:be.y,u_mix:T.t})};function EA(I,a){return 1/o.av(I,1,a.tileZoom)}function Wc(I,a,c){return o.aw(I.transform,a,c.paint.get("line-translate"),c.paint.get("line-translate-anchor"))}const Ch=(I,a,c,_,M)=>{return{u_tl_parent:I,u_scale_parent:a,u_buffer_scale:1,u_fade_t:c.mix,u_opacity:c.opacity*_.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:_.paint.get("raster-brightness-min"),u_brightness_high:_.paint.get("raster-brightness-max"),u_saturation_factor:(z=_.paint.get("raster-saturation"),z>0?1-1/(1.001-z):-z),u_contrast_factor:(T=_.paint.get("raster-contrast"),T>0?1/(1-T):1+T),u_spin_weights:Jh(_.paint.get("raster-hue-rotate")),u_coords_top:[M[0].x,M[0].y,M[1].x,M[1].y],u_coords_bottom:[M[3].x,M[3].y,M[2].x,M[2].y]};var T,z};function Jh(I){I*=Math.PI/180;const a=Math.sin(I),c=Math.cos(I);return[(2*c+1)/3,(-Math.sqrt(3)*a-c+1)/3,(Math.sqrt(3)*a-c+1)/3]}const fu=(I,a,c,_,M,T,z,q,te,ae,be,ke,Te)=>{const $e=z.transform;return{u_is_size_zoom_constant:+(I==="constant"||I==="source"),u_is_size_feature_constant:+(I==="constant"||I==="camera"),u_size_t:a?a.uSizeT:0,u_size:a?a.uSize:0,u_camera_to_center_distance:$e.cameraToCenterDistance,u_pitch:$e.pitch/360*2*Math.PI,u_rotate_symbol:+c,u_aspect_ratio:$e.width/$e.height,u_fade_change:z.options.fadeDuration?z.symbolFadeChange:1,u_label_plane_matrix:q,u_coord_matrix:te,u_is_text:+be,u_pitch_with_map:+_,u_is_along_line:M,u_is_variable_anchor:T,u_texsize:ke,u_texture:0,u_translation:ae,u_pitched_scale:Te}},XA=(I,a,c,_,M,T,z,q,te,ae,be,ke,Te,$e)=>{const Xe=z.transform;return o.e(fu(I,a,c,_,M,T,z,q,te,ae,be,ke,$e),{u_gamma_scale:_?Math.cos(Xe.pitch*Math.PI/180)*Xe.cameraToCenterDistance:1,u_device_pixel_ratio:z.pixelRatio,u_is_halo:1})},BA=(I,a,c,_,M,T,z,q,te,ae,be,ke,Te)=>o.e(XA(I,a,c,_,M,T,z,q,te,ae,!0,be,0,Te),{u_texsize_icon:ke,u_texture_icon:1}),pu=(I,a)=>({u_opacity:I,u_color:a}),ef=(I,a,c,_,M)=>o.e(function(T,z,q,te){const ae=q.imageManager.getPattern(T.from.toString()),be=q.imageManager.getPattern(T.to.toString()),{width:ke,height:Te}=q.imageManager.getPixelSize(),$e=Math.pow(2,te.tileID.overscaledZ),Xe=te.tileSize*Math.pow(2,q.transform.tileZoom)/$e,mt=Xe*(te.tileID.canonical.x+te.tileID.wrap*$e),ut=Xe*te.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:ae.tl,u_pattern_br_a:ae.br,u_pattern_tl_b:be.tl,u_pattern_br_b:be.br,u_texsize:[ke,Te],u_mix:z.t,u_pattern_size_a:ae.displaySize,u_pattern_size_b:be.displaySize,u_scale_a:z.fromScale,u_scale_b:z.toScale,u_tile_units_to_pixels:1/o.av(te,1,q.transform.tileZoom),u_pixel_coord_upper:[mt>>16,ut>>16],u_pixel_coord_lower:[65535&mt,65535&ut]}}(c,M,a,_),{u_opacity:I}),tf=(I,a)=>{},fd={fillExtrusion:(I,a)=>({u_lightpos:new o.bI(I,a.u_lightpos),u_lightpos_globe:new o.bI(I,a.u_lightpos_globe),u_lightintensity:new o.b7(I,a.u_lightintensity),u_lightcolor:new o.bI(I,a.u_lightcolor),u_vertical_gradient:new o.b7(I,a.u_vertical_gradient),u_opacity:new o.b7(I,a.u_opacity),u_fill_translate:new o.bJ(I,a.u_fill_translate)}),fillExtrusionPattern:(I,a)=>({u_lightpos:new o.bI(I,a.u_lightpos),u_lightpos_globe:new o.bI(I,a.u_lightpos_globe),u_lightintensity:new o.b7(I,a.u_lightintensity),u_lightcolor:new o.bI(I,a.u_lightcolor),u_vertical_gradient:new o.b7(I,a.u_vertical_gradient),u_height_factor:new o.b7(I,a.u_height_factor),u_opacity:new o.b7(I,a.u_opacity),u_fill_translate:new o.bJ(I,a.u_fill_translate),u_image:new o.bE(I,a.u_image),u_texsize:new o.bJ(I,a.u_texsize),u_pixel_coord_upper:new o.bJ(I,a.u_pixel_coord_upper),u_pixel_coord_lower:new o.bJ(I,a.u_pixel_coord_lower),u_scale:new o.bI(I,a.u_scale),u_fade:new o.b7(I,a.u_fade)}),fill:(I,a)=>({u_fill_translate:new o.bJ(I,a.u_fill_translate)}),fillPattern:(I,a)=>({u_image:new o.bE(I,a.u_image),u_texsize:new o.bJ(I,a.u_texsize),u_pixel_coord_upper:new o.bJ(I,a.u_pixel_coord_upper),u_pixel_coord_lower:new o.bJ(I,a.u_pixel_coord_lower),u_scale:new o.bI(I,a.u_scale),u_fade:new o.b7(I,a.u_fade),u_fill_translate:new o.bJ(I,a.u_fill_translate)}),fillOutline:(I,a)=>({u_world:new o.bJ(I,a.u_world),u_fill_translate:new o.bJ(I,a.u_fill_translate)}),fillOutlinePattern:(I,a)=>({u_world:new o.bJ(I,a.u_world),u_image:new o.bE(I,a.u_image),u_texsize:new o.bJ(I,a.u_texsize),u_pixel_coord_upper:new o.bJ(I,a.u_pixel_coord_upper),u_pixel_coord_lower:new o.bJ(I,a.u_pixel_coord_lower),u_scale:new o.bI(I,a.u_scale),u_fade:new o.b7(I,a.u_fade),u_fill_translate:new o.bJ(I,a.u_fill_translate)}),circle:(I,a)=>({u_camera_to_center_distance:new o.b7(I,a.u_camera_to_center_distance),u_scale_with_map:new o.bE(I,a.u_scale_with_map),u_pitch_with_map:new o.bE(I,a.u_pitch_with_map),u_extrude_scale:new o.bJ(I,a.u_extrude_scale),u_device_pixel_ratio:new o.b7(I,a.u_device_pixel_ratio),u_globe_extrude_scale:new o.b7(I,a.u_globe_extrude_scale),u_translate:new o.bJ(I,a.u_translate)}),collisionBox:(I,a)=>({u_pixel_extrude_scale:new o.bJ(I,a.u_pixel_extrude_scale)}),collisionCircle:(I,a)=>({u_viewport_size:new o.bJ(I,a.u_viewport_size)}),debug:(I,a)=>({u_color:new o.bF(I,a.u_color),u_overlay:new o.bE(I,a.u_overlay),u_overlay_scale:new o.b7(I,a.u_overlay_scale)}),depth:tf,clippingMask:tf,heatmap:(I,a)=>({u_extrude_scale:new o.b7(I,a.u_extrude_scale),u_intensity:new o.b7(I,a.u_intensity),u_globe_extrude_scale:new o.b7(I,a.u_globe_extrude_scale)}),heatmapTexture:(I,a)=>({u_matrix:new o.bG(I,a.u_matrix),u_world:new o.bJ(I,a.u_world),u_image:new o.bE(I,a.u_image),u_color_ramp:new o.bE(I,a.u_color_ramp),u_opacity:new o.b7(I,a.u_opacity)}),hillshade:(I,a)=>({u_image:new o.bE(I,a.u_image),u_latrange:new o.bJ(I,a.u_latrange),u_light:new o.bJ(I,a.u_light),u_shadow:new o.bF(I,a.u_shadow),u_highlight:new o.bF(I,a.u_highlight),u_accent:new o.bF(I,a.u_accent)}),hillshadePrepare:(I,a)=>({u_matrix:new o.bG(I,a.u_matrix),u_image:new o.bE(I,a.u_image),u_dimension:new o.bJ(I,a.u_dimension),u_zoom:new o.b7(I,a.u_zoom),u_unpack:new o.bH(I,a.u_unpack)}),line:(I,a)=>({u_translation:new o.bJ(I,a.u_translation),u_ratio:new o.b7(I,a.u_ratio),u_device_pixel_ratio:new o.b7(I,a.u_device_pixel_ratio),u_units_to_pixels:new o.bJ(I,a.u_units_to_pixels)}),lineGradient:(I,a)=>({u_translation:new o.bJ(I,a.u_translation),u_ratio:new o.b7(I,a.u_ratio),u_device_pixel_ratio:new o.b7(I,a.u_device_pixel_ratio),u_units_to_pixels:new o.bJ(I,a.u_units_to_pixels),u_image:new o.bE(I,a.u_image),u_image_height:new o.b7(I,a.u_image_height)}),linePattern:(I,a)=>({u_translation:new o.bJ(I,a.u_translation),u_texsize:new o.bJ(I,a.u_texsize),u_ratio:new o.b7(I,a.u_ratio),u_device_pixel_ratio:new o.b7(I,a.u_device_pixel_ratio),u_image:new o.bE(I,a.u_image),u_units_to_pixels:new o.bJ(I,a.u_units_to_pixels),u_scale:new o.bI(I,a.u_scale),u_fade:new o.b7(I,a.u_fade)}),lineSDF:(I,a)=>({u_translation:new o.bJ(I,a.u_translation),u_ratio:new o.b7(I,a.u_ratio),u_device_pixel_ratio:new o.b7(I,a.u_device_pixel_ratio),u_units_to_pixels:new o.bJ(I,a.u_units_to_pixels),u_patternscale_a:new o.bJ(I,a.u_patternscale_a),u_patternscale_b:new o.bJ(I,a.u_patternscale_b),u_sdfgamma:new o.b7(I,a.u_sdfgamma),u_image:new o.bE(I,a.u_image),u_tex_y_a:new o.b7(I,a.u_tex_y_a),u_tex_y_b:new o.b7(I,a.u_tex_y_b),u_mix:new o.b7(I,a.u_mix)}),raster:(I,a)=>({u_tl_parent:new o.bJ(I,a.u_tl_parent),u_scale_parent:new o.b7(I,a.u_scale_parent),u_buffer_scale:new o.b7(I,a.u_buffer_scale),u_fade_t:new o.b7(I,a.u_fade_t),u_opacity:new o.b7(I,a.u_opacity),u_image0:new o.bE(I,a.u_image0),u_image1:new o.bE(I,a.u_image1),u_brightness_low:new o.b7(I,a.u_brightness_low),u_brightness_high:new o.b7(I,a.u_brightness_high),u_saturation_factor:new o.b7(I,a.u_saturation_factor),u_contrast_factor:new o.b7(I,a.u_contrast_factor),u_spin_weights:new o.bI(I,a.u_spin_weights),u_coords_top:new o.bH(I,a.u_coords_top),u_coords_bottom:new o.bH(I,a.u_coords_bottom)}),symbolIcon:(I,a)=>({u_is_size_zoom_constant:new o.bE(I,a.u_is_size_zoom_constant),u_is_size_feature_constant:new o.bE(I,a.u_is_size_feature_constant),u_size_t:new o.b7(I,a.u_size_t),u_size:new o.b7(I,a.u_size),u_camera_to_center_distance:new o.b7(I,a.u_camera_to_center_distance),u_pitch:new o.b7(I,a.u_pitch),u_rotate_symbol:new o.bE(I,a.u_rotate_symbol),u_aspect_ratio:new o.b7(I,a.u_aspect_ratio),u_fade_change:new o.b7(I,a.u_fade_change),u_label_plane_matrix:new o.bG(I,a.u_label_plane_matrix),u_coord_matrix:new o.bG(I,a.u_coord_matrix),u_is_text:new o.bE(I,a.u_is_text),u_pitch_with_map:new o.bE(I,a.u_pitch_with_map),u_is_along_line:new o.bE(I,a.u_is_along_line),u_is_variable_anchor:new o.bE(I,a.u_is_variable_anchor),u_texsize:new o.bJ(I,a.u_texsize),u_texture:new o.bE(I,a.u_texture),u_translation:new o.bJ(I,a.u_translation),u_pitched_scale:new o.b7(I,a.u_pitched_scale)}),symbolSDF:(I,a)=>({u_is_size_zoom_constant:new o.bE(I,a.u_is_size_zoom_constant),u_is_size_feature_constant:new o.bE(I,a.u_is_size_feature_constant),u_size_t:new o.b7(I,a.u_size_t),u_size:new o.b7(I,a.u_size),u_camera_to_center_distance:new o.b7(I,a.u_camera_to_center_distance),u_pitch:new o.b7(I,a.u_pitch),u_rotate_symbol:new o.bE(I,a.u_rotate_symbol),u_aspect_ratio:new o.b7(I,a.u_aspect_ratio),u_fade_change:new o.b7(I,a.u_fade_change),u_label_plane_matrix:new o.bG(I,a.u_label_plane_matrix),u_coord_matrix:new o.bG(I,a.u_coord_matrix),u_is_text:new o.bE(I,a.u_is_text),u_pitch_with_map:new o.bE(I,a.u_pitch_with_map),u_is_along_line:new o.bE(I,a.u_is_along_line),u_is_variable_anchor:new o.bE(I,a.u_is_variable_anchor),u_texsize:new o.bJ(I,a.u_texsize),u_texture:new o.bE(I,a.u_texture),u_gamma_scale:new o.b7(I,a.u_gamma_scale),u_device_pixel_ratio:new o.b7(I,a.u_device_pixel_ratio),u_is_halo:new o.bE(I,a.u_is_halo),u_translation:new o.bJ(I,a.u_translation),u_pitched_scale:new o.b7(I,a.u_pitched_scale)}),symbolTextAndIcon:(I,a)=>({u_is_size_zoom_constant:new o.bE(I,a.u_is_size_zoom_constant),u_is_size_feature_constant:new o.bE(I,a.u_is_size_feature_constant),u_size_t:new o.b7(I,a.u_size_t),u_size:new o.b7(I,a.u_size),u_camera_to_center_distance:new o.b7(I,a.u_camera_to_center_distance),u_pitch:new o.b7(I,a.u_pitch),u_rotate_symbol:new o.bE(I,a.u_rotate_symbol),u_aspect_ratio:new o.b7(I,a.u_aspect_ratio),u_fade_change:new o.b7(I,a.u_fade_change),u_label_plane_matrix:new o.bG(I,a.u_label_plane_matrix),u_coord_matrix:new o.bG(I,a.u_coord_matrix),u_is_text:new o.bE(I,a.u_is_text),u_pitch_with_map:new o.bE(I,a.u_pitch_with_map),u_is_along_line:new o.bE(I,a.u_is_along_line),u_is_variable_anchor:new o.bE(I,a.u_is_variable_anchor),u_texsize:new o.bJ(I,a.u_texsize),u_texsize_icon:new o.bJ(I,a.u_texsize_icon),u_texture:new o.bE(I,a.u_texture),u_texture_icon:new o.bE(I,a.u_texture_icon),u_gamma_scale:new o.b7(I,a.u_gamma_scale),u_device_pixel_ratio:new o.b7(I,a.u_device_pixel_ratio),u_is_halo:new o.bE(I,a.u_is_halo),u_translation:new o.bJ(I,a.u_translation),u_pitched_scale:new o.b7(I,a.u_pitched_scale)}),background:(I,a)=>({u_opacity:new o.b7(I,a.u_opacity),u_color:new o.bF(I,a.u_color)}),backgroundPattern:(I,a)=>({u_opacity:new o.b7(I,a.u_opacity),u_image:new o.bE(I,a.u_image),u_pattern_tl_a:new o.bJ(I,a.u_pattern_tl_a),u_pattern_br_a:new o.bJ(I,a.u_pattern_br_a),u_pattern_tl_b:new o.bJ(I,a.u_pattern_tl_b),u_pattern_br_b:new o.bJ(I,a.u_pattern_br_b),u_texsize:new o.bJ(I,a.u_texsize),u_mix:new o.b7(I,a.u_mix),u_pattern_size_a:new o.bJ(I,a.u_pattern_size_a),u_pattern_size_b:new o.bJ(I,a.u_pattern_size_b),u_scale_a:new o.b7(I,a.u_scale_a),u_scale_b:new o.b7(I,a.u_scale_b),u_pixel_coord_upper:new o.bJ(I,a.u_pixel_coord_upper),u_pixel_coord_lower:new o.bJ(I,a.u_pixel_coord_lower),u_tile_units_to_pixels:new o.b7(I,a.u_tile_units_to_pixels)}),terrain:(I,a)=>({u_texture:new o.bE(I,a.u_texture),u_ele_delta:new o.b7(I,a.u_ele_delta),u_fog_matrix:new o.bG(I,a.u_fog_matrix),u_fog_color:new o.bF(I,a.u_fog_color),u_fog_ground_blend:new o.b7(I,a.u_fog_ground_blend),u_fog_ground_blend_opacity:new o.b7(I,a.u_fog_ground_blend_opacity),u_horizon_color:new o.bF(I,a.u_horizon_color),u_horizon_fog_blend:new o.b7(I,a.u_horizon_fog_blend),u_is_globe_mode:new o.b7(I,a.u_is_globe_mode)}),terrainDepth:(I,a)=>({u_ele_delta:new o.b7(I,a.u_ele_delta)}),terrainCoords:(I,a)=>({u_texture:new o.bE(I,a.u_texture),u_terrain_coords_id:new o.b7(I,a.u_terrain_coords_id),u_ele_delta:new o.b7(I,a.u_ele_delta)}),projectionErrorMeasurement:(I,a)=>({u_input:new o.b7(I,a.u_input),u_output_expected:new o.b7(I,a.u_output_expected)}),atmosphere:(I,a)=>({u_sun_pos:new o.bI(I,a.u_sun_pos),u_atmosphere_blend:new o.b7(I,a.u_atmosphere_blend),u_globe_position:new o.bI(I,a.u_globe_position),u_globe_radius:new o.b7(I,a.u_globe_radius),u_inv_proj_matrix:new o.bG(I,a.u_inv_proj_matrix)}),sky:(I,a)=>({u_sky_color:new o.bF(I,a.u_sky_color),u_horizon_color:new o.bF(I,a.u_horizon_color),u_horizon:new o.bJ(I,a.u_horizon),u_horizon_normal:new o.bJ(I,a.u_horizon_normal),u_sky_horizon_blend:new o.b7(I,a.u_sky_horizon_blend),u_sky_blend:new o.b7(I,a.u_sky_blend)})};class Qd{constructor(a,c,_){this.context=a;const M=a.gl;this.buffer=M.createBuffer(),this.dynamicDraw=!!_,this.context.unbindVAO(),a.bindElementBuffer.set(this.buffer),M.bufferData(M.ELEMENT_ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?M.DYNAMIC_DRAW:M.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(a){const c=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),c.bufferSubData(c.ELEMENT_ARRAY_BUFFER,0,a.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const tl={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class oa{constructor(a,c,_,M){this.length=c.length,this.attributes=_,this.itemSize=c.bytesPerElement,this.dynamicDraw=M,this.context=a;const T=a.gl;this.buffer=T.createBuffer(),a.bindVertexBuffer.set(this.buffer),T.bufferData(T.ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?T.DYNAMIC_DRAW:T.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(a){if(a.length!==this.length)throw new Error(`Length of new data is ${a.length}, which doesn't match current length of ${this.length}`);const c=this.context.gl;this.bind(),c.bufferSubData(c.ARRAY_BUFFER,0,a.arrayBuffer)}enableAttributes(a,c){for(let _=0;_<this.attributes.length;_++){const M=c.attributes[this.attributes[_].name];M!==void 0&&a.enableVertexAttribArray(M)}}setVertexAttribPointers(a,c,_){for(let M=0;M<this.attributes.length;M++){const T=this.attributes[M],z=c.attributes[T.name];z!==void 0&&a.vertexAttribPointer(z,T.components,a[tl[T.type]],!1,this.itemSize,T.offset+this.itemSize*(_||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Lo{constructor(a){this.gl=a.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(a){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class _h extends Lo{getDefault(){return o.b6.transparent}set(a){const c=this.current;(a.r!==c.r||a.g!==c.g||a.b!==c.b||a.a!==c.a||this.dirty)&&(this.gl.clearColor(a.r,a.g,a.b,a.a),this.current=a,this.dirty=!1)}}class am extends Lo{getDefault(){return 1}set(a){(a!==this.current||this.dirty)&&(this.gl.clearDepth(a),this.current=a,this.dirty=!1)}}class pd extends Lo{getDefault(){return 0}set(a){(a!==this.current||this.dirty)&&(this.gl.clearStencil(a),this.current=a,this.dirty=!1)}}class Nu extends Lo{getDefault(){return[!0,!0,!0,!0]}set(a){const c=this.current;(a[0]!==c[0]||a[1]!==c[1]||a[2]!==c[2]||a[3]!==c[3]||this.dirty)&&(this.gl.colorMask(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)}}class Yd extends Lo{getDefault(){return!0}set(a){(a!==this.current||this.dirty)&&(this.gl.depthMask(a),this.current=a,this.dirty=!1)}}class Uf extends Lo{getDefault(){return 255}set(a){(a!==this.current||this.dirty)&&(this.gl.stencilMask(a),this.current=a,this.dirty=!1)}}class md extends Lo{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(a){const c=this.current;(a.func!==c.func||a.ref!==c.ref||a.mask!==c.mask||this.dirty)&&(this.gl.stencilFunc(a.func,a.ref,a.mask),this.current=a,this.dirty=!1)}}class qd extends Lo{getDefault(){const a=this.gl;return[a.KEEP,a.KEEP,a.KEEP]}set(a){const c=this.current;(a[0]!==c[0]||a[1]!==c[1]||a[2]!==c[2]||this.dirty)&&(this.gl.stencilOp(a[0],a[1],a[2]),this.current=a,this.dirty=!1)}}class bh extends Lo{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const c=this.gl;a?c.enable(c.STENCIL_TEST):c.disable(c.STENCIL_TEST),this.current=a,this.dirty=!1}}class Vd extends Lo{getDefault(){return[0,1]}set(a){const c=this.current;(a[0]!==c[0]||a[1]!==c[1]||this.dirty)&&(this.gl.depthRange(a[0],a[1]),this.current=a,this.dirty=!1)}}class OA extends Lo{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const c=this.gl;a?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST),this.current=a,this.dirty=!1}}class Jt extends Lo{getDefault(){return this.gl.LESS}set(a){(a!==this.current||this.dirty)&&(this.gl.depthFunc(a),this.current=a,this.dirty=!1)}}class In extends Lo{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const c=this.gl;a?c.enable(c.BLEND):c.disable(c.BLEND),this.current=a,this.dirty=!1}}class an extends Lo{getDefault(){const a=this.gl;return[a.ONE,a.ZERO]}set(a){const c=this.current;(a[0]!==c[0]||a[1]!==c[1]||this.dirty)&&(this.gl.blendFunc(a[0],a[1]),this.current=a,this.dirty=!1)}}class Dr extends Lo{getDefault(){return o.b6.transparent}set(a){const c=this.current;(a.r!==c.r||a.g!==c.g||a.b!==c.b||a.a!==c.a||this.dirty)&&(this.gl.blendColor(a.r,a.g,a.b,a.a),this.current=a,this.dirty=!1)}}class Ri extends Lo{getDefault(){return this.gl.FUNC_ADD}set(a){(a!==this.current||this.dirty)&&(this.gl.blendEquation(a),this.current=a,this.dirty=!1)}}class Po extends Lo{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const c=this.gl;a?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE),this.current=a,this.dirty=!1}}class Bs extends Lo{getDefault(){return this.gl.BACK}set(a){(a!==this.current||this.dirty)&&(this.gl.cullFace(a),this.current=a,this.dirty=!1)}}class Jo extends Lo{getDefault(){return this.gl.CCW}set(a){(a!==this.current||this.dirty)&&(this.gl.frontFace(a),this.current=a,this.dirty=!1)}}class JA extends Lo{getDefault(){return null}set(a){(a!==this.current||this.dirty)&&(this.gl.useProgram(a),this.current=a,this.dirty=!1)}}class xh extends Lo{getDefault(){return this.gl.TEXTURE0}set(a){(a!==this.current||this.dirty)&&(this.gl.activeTexture(a),this.current=a,this.dirty=!1)}}class tu extends Lo{getDefault(){const a=this.gl;return[0,0,a.drawingBufferWidth,a.drawingBufferHeight]}set(a){const c=this.current;(a[0]!==c[0]||a[1]!==c[1]||a[2]!==c[2]||a[3]!==c[3]||this.dirty)&&(this.gl.viewport(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)}}class ec extends Lo{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,a),this.current=a,this.dirty=!1}}class mu extends Lo{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const c=this.gl;c.bindRenderbuffer(c.RENDERBUFFER,a),this.current=a,this.dirty=!1}}class Ka extends Lo{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const c=this.gl;c.bindTexture(c.TEXTURE_2D,a),this.current=a,this.dirty=!1}}class AA extends Lo{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const c=this.gl;c.bindBuffer(c.ARRAY_BUFFER,a),this.current=a,this.dirty=!1}}class xc extends Lo{getDefault(){return null}set(a){const c=this.gl;c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,a),this.current=a,this.dirty=!1}}class Yr extends Lo{getDefault(){return null}set(a){var c;if(a===this.current&&!this.dirty)return;const _=this.gl;Ki(_)?_.bindVertexArray(a):(c=_.getExtension("OES_vertex_array_object"))===null||c===void 0||c.bindVertexArrayOES(a),this.current=a,this.dirty=!1}}class tc extends Lo{getDefault(){return 4}set(a){if(a===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_ALIGNMENT,a),this.current=a,this.dirty=!1}}class $d extends Lo{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a),this.current=a,this.dirty=!1}}class cA extends Lo{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,a),this.current=a,this.dirty=!1}}class Fl extends Lo{constructor(a,c){super(a),this.context=a,this.parent=c}getDefault(){return null}}class Ll extends Fl{setDirty(){this.dirty=!0}set(a){if(a===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,a,0),this.current=a,this.dirty=!1}}class Mc extends Fl{set(a){if(a===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,a),this.current=a,this.dirty=!1}}class Wu extends Fl{set(a){if(a===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_STENCIL_ATTACHMENT,c.RENDERBUFFER,a),this.current=a,this.dirty=!1}}const Gu="Framebuffer is not complete";class gd{constructor(a,c,_,M,T){this.context=a,this.width=c,this.height=_;const z=a.gl,q=this.framebuffer=z.createFramebuffer();if(this.colorAttachment=new Ll(a,q),M)this.depthAttachment=T?new Wu(a,q):new Mc(a,q);else if(T)throw new Error("Stencil cannot be set without depth");if(z.checkFramebufferStatus(z.FRAMEBUFFER)!==z.FRAMEBUFFER_COMPLETE)throw new Error(Gu)}destroy(){const a=this.context.gl,c=this.colorAttachment.get();if(c&&a.deleteTexture(c),this.depthAttachment){const _=this.depthAttachment.get();_&&a.deleteRenderbuffer(_)}a.deleteFramebuffer(this.framebuffer)}}class yd{constructor(a){var c,_;if(this.gl=a,this.clearColor=new _h(this),this.clearDepth=new am(this),this.clearStencil=new pd(this),this.colorMask=new Nu(this),this.depthMask=new Yd(this),this.stencilMask=new Uf(this),this.stencilFunc=new md(this),this.stencilOp=new qd(this),this.stencilTest=new bh(this),this.depthRange=new Vd(this),this.depthTest=new OA(this),this.depthFunc=new Jt(this),this.blend=new In(this),this.blendFunc=new an(this),this.blendColor=new Dr(this),this.blendEquation=new Ri(this),this.cullFace=new Po(this),this.cullFaceSide=new Bs(this),this.frontFace=new Jo(this),this.program=new JA(this),this.activeTexture=new xh(this),this.viewport=new tu(this),this.bindFramebuffer=new ec(this),this.bindRenderbuffer=new mu(this),this.bindTexture=new Ka(this),this.bindVertexBuffer=new AA(this),this.bindElementBuffer=new xc(this),this.bindVertexArray=new Yr(this),this.pixelStoreUnpack=new tc(this),this.pixelStoreUnpackPremultiplyAlpha=new $d(this),this.pixelStoreUnpackFlipY=new cA(this),this.extTextureFilterAnisotropic=a.getExtension("EXT_texture_filter_anisotropic")||a.getExtension("MOZ_EXT_texture_filter_anisotropic")||a.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=a.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=a.getParameter(a.MAX_TEXTURE_SIZE),Ki(a)){this.HALF_FLOAT=a.HALF_FLOAT;const M=a.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(c=a.RGBA16F)!==null&&c!==void 0?c:M==null?void 0:M.RGBA16F_EXT,this.RGB16F=(_=a.RGB16F)!==null&&_!==void 0?_:M==null?void 0:M.RGB16F_EXT,a.getExtension("EXT_color_buffer_float")}else{a.getExtension("EXT_color_buffer_half_float"),a.getExtension("OES_texture_half_float_linear");const M=a.getExtension("OES_texture_half_float");this.HALF_FLOAT=M==null?void 0:M.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(a,c){return new Qd(this,a,c)}createVertexBuffer(a,c,_){return new oa(this,a,c,_)}createRenderbuffer(a,c,_){const M=this.gl,T=M.createRenderbuffer();return this.bindRenderbuffer.set(T),M.renderbufferStorage(M.RENDERBUFFER,a,c,_),this.bindRenderbuffer.set(null),T}createFramebuffer(a,c,_,M){return new gd(this,a,c,_,M)}clear({color:a,depth:c,stencil:_}){const M=this.gl;let T=0;a&&(T|=M.COLOR_BUFFER_BIT,this.clearColor.set(a),this.colorMask.set([!0,!0,!0,!0])),c!==void 0&&(T|=M.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(c),this.depthMask.set(!0)),_!==void 0&&(T|=M.STENCIL_BUFFER_BIT,this.clearStencil.set(_),this.stencilMask.set(255)),M.clear(T)}setCullFace(a){a.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(a.mode),this.frontFace.set(a.frontFace))}setDepthMode(a){a.func!==this.gl.ALWAYS||a.mask?(this.depthTest.set(!0),this.depthFunc.set(a.func),this.depthMask.set(a.mask),this.depthRange.set(a.range)):this.depthTest.set(!1)}setStencilMode(a){a.test.func!==this.gl.ALWAYS||a.mask?(this.stencilTest.set(!0),this.stencilMask.set(a.mask),this.stencilOp.set([a.fail,a.depthFail,a.pass]),this.stencilFunc.set({func:a.test.func,ref:a.ref,mask:a.test.mask})):this.stencilTest.set(!1)}setColorMode(a){o.bB(a.blendFunction,fo.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(a.blendFunction),this.blendColor.set(a.blendColor)),this.colorMask.set(a.mask)}createVertexArray(){var a;return Ki(this.gl)?this.gl.createVertexArray():(a=this.gl.getExtension("OES_vertex_array_object"))===null||a===void 0?void 0:a.createVertexArrayOES()}deleteVertexArray(a){var c;return Ki(this.gl)?this.gl.deleteVertexArray(a):(c=this.gl.getExtension("OES_vertex_array_object"))===null||c===void 0?void 0:c.deleteVertexArrayOES(a)}unbindVAO(){this.bindVertexArray.set(null)}}let Ca;function Gc(I,a,c,_,M){const T=I.context,z=I.transform,q=T.gl,te=I.useProgram("collisionBox"),ae=[];let be=0,ke=0;for(let ft=0;ft<_.length;ft++){const vt=_[ft],Et=a.getTile(vt).getBucket(c);if(!Et)continue;const kt=M?Et.textCollisionBox:Et.iconCollisionBox,Rt=Et.collisionCircleArray;Rt.length>0&&(ae.push({circleArray:Rt,circleOffset:ke,coord:vt}),be+=Rt.length/4,ke=be),kt&&te.draw(T,q.LINES,qr.disabled,Vi.disabled,I.colorModeForRenderPass(),zi.disabled,jc(I.transform),I.style.map.terrain&&I.style.map.terrain.getTerrainData(vt),z.getProjectionData({overscaledTileID:vt,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),c.id,kt.layoutVertexBuffer,kt.indexBuffer,kt.segments,null,I.transform.zoom,null,null,kt.collisionVertexBuffer)}if(!M||!ae.length)return;const Te=I.useProgram("collisionCircle"),$e=new o.bO;$e.resize(4*be),$e._trim();let Xe=0;for(const ft of ae)for(let vt=0;vt<ft.circleArray.length/4;vt++){const Et=4*vt,kt=ft.circleArray[Et+0],Rt=ft.circleArray[Et+1],Ut=ft.circleArray[Et+2],It=ft.circleArray[Et+3];$e.emplace(Xe++,kt,Rt,Ut,It,0),$e.emplace(Xe++,kt,Rt,Ut,It,1),$e.emplace(Xe++,kt,Rt,Ut,It,2),$e.emplace(Xe++,kt,Rt,Ut,It,3)}(!Ca||Ca.length<2*be)&&(Ca=function(ft){const vt=2*ft,Et=new o.bQ;Et.resize(vt),Et._trim();for(let kt=0;kt<vt;kt++){const Rt=6*kt;Et.uint16[Rt+0]=4*kt+0,Et.uint16[Rt+1]=4*kt+1,Et.uint16[Rt+2]=4*kt+2,Et.uint16[Rt+3]=4*kt+2,Et.uint16[Rt+4]=4*kt+3,Et.uint16[Rt+5]=4*kt+0}return Et}(be));const mt=T.createIndexBuffer(Ca,!0),ut=T.createVertexBuffer($e,o.bP.members,!0);for(const ft of ae){const vt=Hh(I.transform);Te.draw(T,q.TRIANGLES,qr.disabled,Vi.disabled,I.colorModeForRenderPass(),zi.disabled,vt,I.style.map.terrain&&I.style.map.terrain.getTerrainData(ft.coord),null,c.id,ut,mt,o.aF.simpleSegment(0,2*ft.circleOffset,ft.circleArray.length,ft.circleArray.length/2),null,I.transform.zoom,null,null,null)}ut.destroy(),mt.destroy()}const Qc=o.as(new Float32Array(16));function Yc(I,a,c,_,M,T){const{horizontalAlign:z,verticalAlign:q}=o.aA(I);return new o.P((-(z-.5)*a/M+_[0])*T,(-(q-.5)*c/M+_[1])*T)}function Mh(I,a,c,_,M,T){const z=a.tileAnchorPoint.add(new o.P(a.translation[0],a.translation[1]));if(a.pitchWithMap){let q=_.mult(T);c||(q=q.rotate(-M));const te=z.add(q);return Gt(te.x,te.y,a.pitchedLabelPlaneMatrix,a.getElevation).point}if(c){const q=er(a.tileAnchorPoint.x+1,a.tileAnchorPoint.y,a).point.sub(I),te=Math.atan(q.y/q.x)+(q.x<0?Math.PI:0);return I.add(_.rotate(te))}return I.add(_)}function gu(I,a,c,_,M,T,z,q,te,ae,be,ke){const Te=I.text.placedSymbolArray,$e=I.text.dynamicLayoutVertexArray,Xe=I.icon.dynamicLayoutVertexArray,mt={};$e.clear();for(let ut=0;ut<Te.length;ut++){const ft=Te.get(ut),vt=ft.hidden||!ft.crossTileID||I.allowVerticalPlacement&&!ft.placedOrientation?null:_[ft.crossTileID];if(vt){const Et=new o.P(ft.anchorX,ft.anchorY),kt={getElevation:ke,width:M.width,height:M.height,pitchedLabelPlaneMatrix:T,pitchWithMap:c,transform:M,tileAnchorPoint:Et,translation:ae,unwrappedTileID:be},Rt=c?Sr(Et.x,Et.y,kt):er(Et.x,Et.y,kt),Ut=zt(M.cameraToCenterDistance,Rt.signedDistanceFromCamera);let It=o.ah(I.textSizeData,q,ft)*Ut/o.au;c&&(It*=I.tilePixelRatio/z);const{width:rn,height:Zt,anchor:Mn,textOffset:En,textBoxScale:bn}=vt,On=Yc(Mn,rn,Zt,En,bn,It),zn=M.getPitchedTextCorrection(Et.x+ae[0],Et.y+ae[1],be),Ln=Mh(Rt.point,kt,a,On,-M.bearingInRadians,zn),Tr=I.allowVerticalPlacement&&ft.placedOrientation===o.ag.vertical?Math.PI/2:0;for(let Zr=0;Zr<ft.numGlyphs;Zr++)o.an($e,Ln,Tr);te&&ft.associatedIconIndex>=0&&(mt[ft.associatedIconIndex]={shiftedAnchor:Ln,angle:Tr})}else Wi(ft.numGlyphs,$e)}if(te){Xe.clear();const ut=I.icon.placedSymbolArray;for(let ft=0;ft<ut.length;ft++){const vt=ut.get(ft);if(vt.hidden)Wi(vt.numGlyphs,Xe);else{const Et=mt[ft];if(Et)for(let kt=0;kt<vt.numGlyphs;kt++)o.an(Xe,Et.shiftedAnchor,Et.angle);else Wi(vt.numGlyphs,Xe)}}I.icon.dynamicLayoutVertexBuffer.updateData(Xe)}I.text.dynamicLayoutVertexBuffer.updateData($e)}function nc(I,a,c){return c.iconsInText&&a?"symbolTextAndIcon":I?"symbolSDF":"symbolIcon"}function qc(I,a,c,_,M,T,z,q,te,ae,be,ke,Te){const $e=I.context,Xe=$e.gl,mt=I.transform,ut=q==="map",ft=te==="map",vt=q!=="viewport"&&c.layout.get("symbol-placement")!=="point",Et=ut&&!ft&&!vt,kt=!c.layout.get("symbol-sort-key").isConstant();let Rt=!1;const Ut=I.getDepthModeForSublayer(0,qr.ReadOnly),It=c._unevaluatedLayout.hasValue("text-variable-anchor")||c._unevaluatedLayout.hasValue("text-variable-anchor-offset"),rn=[],Zt=mt.getCircleRadiusCorrection();for(const Mn of _){const En=a.getTile(Mn),bn=En.getBucket(c);if(!bn)continue;const On=M?bn.text:bn.icon;if(!On||!On.segments.get().length||!On.hasVisibleVertices)continue;const zn=On.programConfigurations.get(c.id),Ln=M||bn.sdfIcons,Tr=M?bn.textSizeData:bn.iconSizeData,Zr=ft||mt.pitch!==0,Xi=I.useProgram(nc(Ln,M,bn),zn),_o=o.af(Tr,mt.zoom),ki=I.style.map.terrain&&I.style.map.terrain.getTerrainData(Mn);let os,Yo,Ao,po,Fa=[0,0],ss=null;if(M)Yo=En.glyphAtlasTexture,Ao=Xe.LINEAR,os=En.glyphAtlasTexture.size,bn.iconsInText&&(Fa=En.imageAtlasTexture.size,ss=En.imageAtlasTexture,po=Zr||I.options.rotating||I.options.zooming||Tr.kind==="composite"||Tr.kind==="camera"?Xe.LINEAR:Xe.NEAREST);else{const hs=c.layout.get("icon-size").constantOr(0)!==1||bn.iconsNeedLinear;Yo=En.imageAtlasTexture,Ao=Ln||I.options.rotating||I.options.zooming||hs||Zr?Xe.LINEAR:Xe.NEAREST,os=En.imageAtlasTexture.size}const es=o.av(En,1,I.transform.zoom),wa=ct(ut,I.transform,es),DA=o.K();o.ai(DA,wa);const wu=dt(ft,ut,I.transform,es),_l=o.aw(mt,En,T,z),La=mt.getProjectionData({overscaledTileID:Mn,applyGlobeMatrix:!Te,applyTerrainMatrix:!0}),Xu=It&&bn.hasTextData(),pA=c.layout.get("icon-text-fit")!=="none"&&Xu&&bn.hasIconData();if(vt){const hs=I.style.map.terrain?(za,ja)=>I.style.map.terrain.getElevation(Mn,za,ja):null,zo=c.layout.get("text-rotation-alignment")==="map";jt(bn,I,M,wa,DA,ft,ae,zo,Mn.toUnwrapped(),mt.width,mt.height,_l,hs)}const mA=M&&It||pA,Sa=vt||mA?Qc:ft?wa:I.transform.clipSpaceToPixelsMatrix,lu=Ln&&c.paint.get(M?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Ua;Ua=Ln?bn.iconsInText?BA(Tr.kind,_o,Et,ft,vt,mA,I,Sa,wu,_l,os,Fa,Zt):XA(Tr.kind,_o,Et,ft,vt,mA,I,Sa,wu,_l,M,os,0,Zt):fu(Tr.kind,_o,Et,ft,vt,mA,I,Sa,wu,_l,M,os,Zt);const gA={program:Xi,buffers:On,uniformValues:Ua,projectionData:La,atlasTexture:Yo,atlasTextureIcon:ss,atlasInterpolation:Ao,atlasInterpolationIcon:po,isSDF:Ln,hasHalo:lu};if(kt&&bn.canOverlap){Rt=!0;const hs=On.segments.get();for(const zo of hs)rn.push({segments:new o.aF([zo]),sortKey:zo.sortKey,state:gA,terrainData:ki})}else rn.push({segments:On.segments,sortKey:0,state:gA,terrainData:ki})}Rt&&rn.sort((Mn,En)=>Mn.sortKey-En.sortKey);for(const Mn of rn){const En=Mn.state;if($e.activeTexture.set(Xe.TEXTURE0),En.atlasTexture.bind(En.atlasInterpolation,Xe.CLAMP_TO_EDGE),En.atlasTextureIcon&&($e.activeTexture.set(Xe.TEXTURE1),En.atlasTextureIcon&&En.atlasTextureIcon.bind(En.atlasInterpolationIcon,Xe.CLAMP_TO_EDGE)),En.isSDF){const bn=En.uniformValues;En.hasHalo&&(bn.u_is_halo=1,vd(En.buffers,Mn.segments,c,I,En.program,Ut,be,ke,bn,En.projectionData,Mn.terrainData)),bn.u_is_halo=0}vd(En.buffers,Mn.segments,c,I,En.program,Ut,be,ke,En.uniformValues,En.projectionData,Mn.terrainData)}}function vd(I,a,c,_,M,T,z,q,te,ae,be){const ke=_.context;M.draw(ke,ke.gl.TRIANGLES,T,z,q,zi.backCCW,te,be,ae,c.id,I.layoutVertexBuffer,I.indexBuffer,a,c.paint,_.transform.zoom,I.programConfigurations.get(c.id),I.dynamicLayoutVertexBuffer,I.opacityVertexBuffer)}function cs(I,a,c,_,M){const T=I.context,z=T.gl,q=Vi.disabled,te=new fo([z.ONE,z.ONE],o.b6.transparent,[!0,!0,!0,!0]),ae=a.getBucket(c);if(!ae)return;const be=_.key;let ke=c.heatmapFbos.get(be);ke||(ke=dA(T,a.tileSize,a.tileSize),c.heatmapFbos.set(be,ke)),T.bindFramebuffer.set(ke.framebuffer),T.viewport.set([0,0,a.tileSize,a.tileSize]),T.clear({color:o.b6.transparent});const Te=ae.programConfigurations.get(c.id),$e=I.useProgram("heatmap",Te,!M),Xe=I.transform.getProjectionData({overscaledTileID:a.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),mt=I.style.map.terrain.getTerrainData(_);$e.draw(T,z.TRIANGLES,qr.disabled,q,te,zi.disabled,Zh(a,I.transform.zoom,c.paint.get("heatmap-intensity"),1),mt,Xe,c.id,ae.layoutVertexBuffer,ae.indexBuffer,ae.segments,c.paint,I.transform.zoom,Te)}function Cd(I,a,c,_,M){const T=I.context,z=T.gl,q=I.transform;T.setColorMode(I.colorModeForRenderPass());const te=yu(T,a),ae=c.key,be=a.heatmapFbos.get(ae);if(!be)return;T.activeTexture.set(z.TEXTURE0),z.bindTexture(z.TEXTURE_2D,be.colorAttachment.get()),T.activeTexture.set(z.TEXTURE1),te.bind(z.LINEAR,z.CLAMP_TO_EDGE);const ke=q.getProjectionData({overscaledTileID:c,applyTerrainMatrix:M,applyGlobeMatrix:!_});I.useProgram("heatmapTexture").draw(T,z.TRIANGLES,qr.disabled,Vi.disabled,I.colorModeForRenderPass(),zi.disabled,vh(I,a,0,1),null,ke,a.id,I.rasterBoundsBuffer,I.quadTriangleIndexBuffer,I.rasterBoundsSegments,a.paint,q.zoom),be.destroy(),a.heatmapFbos.delete(ae)}function dA(I,a,c){var _,M;const T=I.gl,z=T.createTexture();T.bindTexture(T.TEXTURE_2D,z),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_WRAP_S,T.CLAMP_TO_EDGE),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_WRAP_T,T.CLAMP_TO_EDGE),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MIN_FILTER,T.LINEAR),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MAG_FILTER,T.LINEAR);const q=(_=I.HALF_FLOAT)!==null&&_!==void 0?_:T.UNSIGNED_BYTE,te=(M=I.RGBA16F)!==null&&M!==void 0?M:T.RGBA;T.texImage2D(T.TEXTURE_2D,0,te,a,c,0,T.RGBA,q,null);const ae=I.createFramebuffer(a,c,!1,!1);return ae.colorAttachment.set(z),ae}function yu(I,a){return a.colorRampTexture||(a.colorRampTexture=new oe(I,a.colorRamp,I.gl.RGBA)),a.colorRampTexture}function Hd(I,a,c,_,M){if(!c||!_||!_.imageAtlas)return;const T=_.imageAtlas.patternPositions;let z=T[c.to.toString()],q=T[c.from.toString()];if(!z&&q&&(z=q),!q&&z&&(q=z),!z||!q){const te=M.getPaintProperty(a);z=T[te],q=T[te]}z&&q&&I.setConstantPatternPositions(z,q)}function wh(I,a,c,_,M,T,z,q){const te=I.context.gl,ae="fill-pattern",be=c.paint.get(ae),ke=be&&be.constantOr(1),Te=c.getCrossfadeParameters();let $e,Xe,mt,ut,ft;const vt=I.transform,Et=c.paint.get("fill-translate"),kt=c.paint.get("fill-translate-anchor");z?(Xe=ke&&!c.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",$e=te.LINES):(Xe=ke?"fillPattern":"fill",$e=te.TRIANGLES);const Rt=be.constantOr(null);for(const Ut of _){const It=a.getTile(Ut);if(ke&&!It.patternsLoaded())continue;const rn=It.getBucket(c);if(!rn)continue;const Zt=rn.programConfigurations.get(c.id),Mn=I.useProgram(Xe,Zt),En=I.style.map.terrain&&I.style.map.terrain.getTerrainData(Ut);ke&&(I.context.activeTexture.set(te.TEXTURE0),It.imageAtlasTexture.bind(te.LINEAR,te.CLAMP_TO_EDGE),Zt.updatePaintBuffers(Te)),Hd(Zt,ae,Rt,It,c);const bn=vt.getProjectionData({overscaledTileID:Ut,applyGlobeMatrix:!q,applyTerrainMatrix:!0}),On=o.aw(vt,It,Et,kt);if(z){ut=rn.indexBuffer2,ft=rn.segments2;const Ln=[te.drawingBufferWidth,te.drawingBufferHeight];mt=Xe==="fillOutlinePattern"&&ke?Lf(I,Te,It,Ln,On):Gs(Ln,On)}else ut=rn.indexBuffer,ft=rn.segments,mt=ke?_c(I,Te,It,On):{u_fill_translate:On};let zn;if(I.renderPass==="translucent"&&q){const[Ln]=I.getStencilConfigForOverlapAndUpdateStencilID(_);zn=Ln[Ut.overscaledZ]}else zn=I.stencilModeForClipping(Ut);Mn.draw(I.context,$e,M,zn,T,zi.backCCW,mt,En,bn,c.id,rn.layoutVertexBuffer,ut,ft,c.paint,I.transform.zoom,Zt)}}function IA(I,a,c,_,M,T,z,q){const te=I.context,ae=te.gl,be="fill-extrusion-pattern",ke=c.paint.get(be),Te=ke.constantOr(1),$e=c.getCrossfadeParameters(),Xe=c.paint.get("fill-extrusion-opacity"),mt=ke.constantOr(null),ut=I.transform;for(const ft of _){const vt=a.getTile(ft),Et=vt.getBucket(c);if(!Et)continue;const kt=I.style.map.terrain&&I.style.map.terrain.getTerrainData(ft),Rt=Et.programConfigurations.get(c.id),Ut=I.useProgram(Te?"fillExtrusionPattern":"fillExtrusion",Rt);Te&&(I.context.activeTexture.set(ae.TEXTURE0),vt.imageAtlasTexture.bind(ae.LINEAR,ae.CLAMP_TO_EDGE),Rt.updatePaintBuffers($e));const It=ut.getProjectionData({overscaledTileID:ft,applyGlobeMatrix:!q,applyTerrainMatrix:!0});Hd(Rt,be,mt,vt,c);const rn=o.aw(ut,vt,c.paint.get("fill-extrusion-translate"),c.paint.get("fill-extrusion-translate-anchor")),Zt=c.paint.get("fill-extrusion-vertical-gradient"),Mn=Te?dd(I,Zt,Xe,rn,ft,$e,vt):_p(I,Zt,Xe,rn);Ut.draw(te,te.gl.TRIANGLES,M,T,z,zi.backCCW,Mn,kt,It,c.id,Et.layoutVertexBuffer,Et.indexBuffer,Et.segments,c.paint,I.transform.zoom,Rt,I.style.map.terrain&&Et.centroidVertexBuffer)}}function rc(I,a,c,_,M,T,z,q,te){var ae;const be=I.style.projection,ke=I.context,Te=I.transform,$e=ke.gl,Xe=I.useProgram("hillshade"),mt=!I.options.moving;for(const ut of _){const ft=a.getTile(ut),vt=ft.fbo;if(!vt)continue;const Et=be.getMeshFromTileID(ke,ut.canonical,q,!0,"raster"),kt=(ae=I.style.map.terrain)===null||ae===void 0?void 0:ae.getTerrainData(ut);ke.activeTexture.set($e.TEXTURE0),$e.bindTexture($e.TEXTURE_2D,vt.colorAttachment.get());const Rt=Te.getProjectionData({overscaledTileID:ut,aligned:mt,applyGlobeMatrix:!te,applyTerrainMatrix:!0});Xe.draw(ke,$e.TRIANGLES,T,M[ut.overscaledZ],z,zi.backCCW,ZA(I,ft,c),kt,Rt,c.id,Et.vertexBuffer,Et.indexBuffer,Et.segments)}}const ic=[new o.P(0,0),new o.P(o.Z,0),new o.P(o.Z,o.Z),new o.P(0,o.Z)];function ms(I,a,c,_,M,T,z,q,te=!1,ae=!1){const be=_[_.length-1].overscaledZ,ke=I.context,Te=ke.gl,$e=I.useProgram("raster"),Xe=I.transform,mt=I.style.projection,ut=I.colorModeForRenderPass(),ft=!I.options.moving;for(const vt of _){const Et=I.getDepthModeForSublayer(vt.overscaledZ-be,c.paint.get("raster-opacity")===1?qr.ReadWrite:qr.ReadOnly,Te.LESS),kt=a.getTile(vt);kt.registerFadeDuration(c.paint.get("raster-fade-duration"));const Rt=a.findLoadedParent(vt,0),Ut=a.findLoadedSibling(vt),It=ao(kt,Rt||Ut||null,a,c,I.transform,I.style.map.terrain);let rn,Zt;const Mn=c.paint.get("raster-resampling")==="nearest"?Te.NEAREST:Te.LINEAR;ke.activeTexture.set(Te.TEXTURE0),kt.texture.bind(Mn,Te.CLAMP_TO_EDGE,Te.LINEAR_MIPMAP_NEAREST),ke.activeTexture.set(Te.TEXTURE1),Rt?(Rt.texture.bind(Mn,Te.CLAMP_TO_EDGE,Te.LINEAR_MIPMAP_NEAREST),rn=Math.pow(2,Rt.tileID.overscaledZ-kt.tileID.overscaledZ),Zt=[kt.tileID.canonical.x*rn%1,kt.tileID.canonical.y*rn%1]):kt.texture.bind(Mn,Te.CLAMP_TO_EDGE,Te.LINEAR_MIPMAP_NEAREST),kt.texture.useMipmap&&ke.extTextureFilterAnisotropic&&I.transform.pitch>20&&Te.texParameterf(Te.TEXTURE_2D,ke.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,ke.extTextureFilterAnisotropicMax);const En=I.style.map.terrain&&I.style.map.terrain.getTerrainData(vt),bn=Xe.getProjectionData({overscaledTileID:vt,aligned:ft,applyGlobeMatrix:!ae,applyTerrainMatrix:!0}),On=Ch(Zt||[0,0],rn||1,It,c,q),zn=mt.getMeshFromTileID(ke,vt.canonical,T,z,"raster");$e.draw(ke,Te.TRIANGLES,Et,M?M[vt.overscaledZ]:Vi.disabled,ut,te?zi.frontCCW:zi.backCCW,On,En,bn,c.id,zn.vertexBuffer,zn.indexBuffer,zn.segments)}}function ao(I,a,c,_,M,T){const z=_.paint.get("raster-fade-duration");if(!T&&z>0){const q=O.now(),te=(q-I.timeAdded)/z,ae=a?(q-a.timeAdded)/z:-1,be=c.getSource(),ke=Hn(M,{tileSize:be.tileSize,roundZoom:be.roundZoom}),Te=!a||Math.abs(a.tileID.overscaledZ-ke)>Math.abs(I.tileID.overscaledZ-ke),$e=Te&&I.refreshedUponExpiration?1:o.ad(Te?te:1-ae,0,1);return I.refreshedUponExpiration&&te>=1&&(I.refreshedUponExpiration=!1),a?{opacity:1,mix:1-$e}:{opacity:$e,mix:0}}return{opacity:1,mix:0}}const _d=new o.b6(1,0,0,1),Ul=new o.b6(0,1,0,1),Vc=new o.b6(0,0,1,1),oc=new o.b6(1,0,1,1),bd=new o.b6(0,1,1,1);function nl(I,a,c,_){rl(I,0,a+c/2,I.transform.width,c,_)}function vu(I,a,c,_){rl(I,a-c/2,0,c,I.transform.height,_)}function rl(I,a,c,_,M,T){const z=I.context,q=z.gl;q.enable(q.SCISSOR_TEST),q.scissor(a*I.pixelRatio,c*I.pixelRatio,_*I.pixelRatio,M*I.pixelRatio),z.clear({color:T}),q.disable(q.SCISSOR_TEST)}function sc(I,a,c){const _=I.context,M=_.gl,T=I.useProgram("debug"),z=qr.disabled,q=Vi.disabled,te=I.colorModeForRenderPass(),ae="$debug",be=I.style.map.terrain&&I.style.map.terrain.getTerrainData(c);_.activeTexture.set(M.TEXTURE0);const ke=a.getTileByID(c.key).latestRawTileData,Te=Math.floor((ke&&ke.byteLength||0)/1024),$e=a.getTile(c).tileSize,Xe=512/Math.min($e,512)*(c.overscaledZ/I.transform.zoom)*.5;let mt=c.canonical.toString();c.overscaledZ!==c.canonical.z&&(mt+=` => ${c.overscaledZ}`),function(ft,vt){ft.initDebugOverlayCanvas();const Et=ft.debugOverlayCanvas,kt=ft.context.gl,Rt=ft.debugOverlayCanvas.getContext("2d");Rt.clearRect(0,0,Et.width,Et.height),Rt.shadowColor="white",Rt.shadowBlur=2,Rt.lineWidth=1.5,Rt.strokeStyle="white",Rt.textBaseline="top",Rt.font="bold 36px Open Sans, sans-serif",Rt.fillText(vt,5,5),Rt.strokeText(vt,5,5),ft.debugOverlayTexture.update(Et),ft.debugOverlayTexture.bind(kt.LINEAR,kt.CLAMP_TO_EDGE)}(I,`${mt} ${Te}kB`);const ut=I.transform.getProjectionData({overscaledTileID:c,applyGlobeMatrix:!0,applyTerrainMatrix:!0});T.draw(_,M.TRIANGLES,z,q,fo.alphaBlended,zi.disabled,hd(o.b6.transparent,Xe),null,ut,ae,I.debugBuffer,I.quadTriangleIndexBuffer,I.debugSegments),T.draw(_,M.LINE_STRIP,z,q,te,zi.disabled,hd(o.b6.red),be,ut,ae,I.debugBuffer,I.tileBorderIndexBuffer,I.debugSegments)}function Qu(I,a,c,_){const{isRenderingGlobe:M}=_,T=I.context,z=T.gl,q=I.transform,te=I.colorModeForRenderPass(),ae=I.getDepthModeFor3D(),be=I.useProgram("terrain");T.bindFramebuffer.set(null),T.viewport.set([0,0,I.width,I.height]);for(const ke of c){const Te=a.getTerrainMesh(ke.tileID),$e=I.renderToTexture.getTexture(ke),Xe=a.getTerrainData(ke.tileID);T.activeTexture.set(z.TEXTURE0),z.bindTexture(z.TEXTURE_2D,$e.texture);const mt=a.getMeshFrameDelta(q.zoom),ut=q.calculateFogMatrix(ke.tileID.toUnwrapped()),ft=yh(mt,ut,I.style.sky,q.pitch,M),vt=q.getProjectionData({overscaledTileID:ke.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});be.draw(T,z.TRIANGLES,ae,Vi.disabled,te,zi.backCCW,ft,Xe,vt,"terrain",Te.vertexBuffer,Te.indexBuffer,Te.segments)}}function xd(I,a){if(!a.mesh){const c=new o.aE;c.emplaceBack(-1,-1),c.emplaceBack(1,-1),c.emplaceBack(1,1),c.emplaceBack(-1,1);const _=new o.aG;_.emplaceBack(0,1,2),_.emplaceBack(0,2,3),a.mesh=new Aa(I.createVertexBuffer(c,Cs.members),I.createIndexBuffer(_),o.aF.simpleSegment(0,0,c.length,_.length))}return a.mesh}class $c{constructor(a,c){this.context=new yd(a),this.transform=c,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:o.as(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=J.maxUnderzooming+J.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new ua}resize(a,c,_){if(this.width=Math.floor(a*_),this.height=Math.floor(c*_),this.pixelRatio=_,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const M of this.style._order)this.style._layers[M].resize()}setup(){const a=this.context,c=new o.aE;c.emplaceBack(0,0),c.emplaceBack(o.Z,0),c.emplaceBack(0,o.Z),c.emplaceBack(o.Z,o.Z),this.tileExtentBuffer=a.createVertexBuffer(c,Cs.members),this.tileExtentSegments=o.aF.simpleSegment(0,0,4,2);const _=new o.aE;_.emplaceBack(0,0),_.emplaceBack(o.Z,0),_.emplaceBack(0,o.Z),_.emplaceBack(o.Z,o.Z),this.debugBuffer=a.createVertexBuffer(_,Cs.members),this.debugSegments=o.aF.simpleSegment(0,0,4,5);const M=new o.bV;M.emplaceBack(0,0,0,0),M.emplaceBack(o.Z,0,o.Z,0),M.emplaceBack(0,o.Z,0,o.Z),M.emplaceBack(o.Z,o.Z,o.Z,o.Z),this.rasterBoundsBuffer=a.createVertexBuffer(M,Fo.members),this.rasterBoundsSegments=o.aF.simpleSegment(0,0,4,2);const T=new o.aE;T.emplaceBack(0,0),T.emplaceBack(o.Z,0),T.emplaceBack(0,o.Z),T.emplaceBack(o.Z,o.Z),this.rasterBoundsBufferPosOnly=a.createVertexBuffer(T,Cs.members),this.rasterBoundsSegmentsPosOnly=o.aF.simpleSegment(0,0,4,5);const z=new o.aE;z.emplaceBack(0,0),z.emplaceBack(1,0),z.emplaceBack(0,1),z.emplaceBack(1,1),this.viewportBuffer=a.createVertexBuffer(z,Cs.members),this.viewportSegments=o.aF.simpleSegment(0,0,4,2);const q=new o.bW;q.emplaceBack(0),q.emplaceBack(1),q.emplaceBack(3),q.emplaceBack(2),q.emplaceBack(0),this.tileBorderIndexBuffer=a.createIndexBuffer(q);const te=new o.aG;te.emplaceBack(1,0,2),te.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=a.createIndexBuffer(te);const ae=this.context.gl;this.stencilClearMode=new Vi({func:ae.ALWAYS,mask:0},0,255,ae.ZERO,ae.ZERO,ae.ZERO),this.tileExtentMesh=new Aa(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const a=this.context,c=a.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const _=o.K();o.bN(_,0,this.width,this.height,0,0,1),o.M(_,_,[c.drawingBufferWidth,c.drawingBufferHeight,0]);const M={mainMatrix:_,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:_};this.useProgram("clippingMask",null,!0).draw(a,c.TRIANGLES,qr.disabled,this.stencilClearMode,fo.disabled,zi.disabled,null,null,M,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(a,c,_){if(this.currentStencilSource===a.source||!a.isTileClipped()||!c||!c.length)return;this.currentStencilSource=a.source,this.nextStencilID+c.length>256&&this.clearStencil();const M=this.context;M.setColorMode(fo.disabled),M.setDepthMode(qr.disabled);const T={};for(const z of c)T[z.key]=this.nextStencilID++;this._renderTileMasks(T,c,_,!0),this._renderTileMasks(T,c,_,!1),this._tileClippingMaskIDs=T}_renderTileMasks(a,c,_,M){const T=this.context,z=T.gl,q=this.style.projection,te=this.transform,ae=this.useProgram("clippingMask");for(const be of c){const ke=a[be.key],Te=this.style.map.terrain&&this.style.map.terrain.getTerrainData(be),$e=q.getMeshFromTileID(this.context,be.canonical,M,!0,"stencil"),Xe=te.getProjectionData({overscaledTileID:be,applyGlobeMatrix:!0,applyTerrainMatrix:!0});ae.draw(T,z.TRIANGLES,qr.disabled,new Vi({func:z.ALWAYS,mask:0},ke,255,z.KEEP,z.KEEP,z.REPLACE),fo.disabled,_?zi.disabled:zi.backCCW,null,Te,Xe,"$clipping",$e.vertexBuffer,$e.indexBuffer,$e.segments)}}_renderTilesDepthBuffer(){const a=this.context,c=a.gl,_=this.style.projection,M=this.transform,T=this.useProgram("depth"),z=this.getDepthModeFor3D(),q=Ve(M,{tileSize:M.tileSize});for(const te of q){const ae=this.style.map.terrain&&this.style.map.terrain.getTerrainData(te),be=_.getMeshFromTileID(this.context,te.canonical,!0,!0,"raster"),ke=M.getProjectionData({overscaledTileID:te,applyGlobeMatrix:!0,applyTerrainMatrix:!0});T.draw(a,c.TRIANGLES,z,Vi.disabled,fo.disabled,zi.backCCW,null,ae,ke,"$clipping",be.vertexBuffer,be.indexBuffer,be.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const a=this.nextStencilID++,c=this.context.gl;return new Vi({func:c.NOTEQUAL,mask:255},a,255,c.KEEP,c.KEEP,c.REPLACE)}stencilModeForClipping(a){const c=this.context.gl;return new Vi({func:c.EQUAL,mask:255},this._tileClippingMaskIDs[a.key],0,c.KEEP,c.KEEP,c.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(a){const c=this.context.gl,_=a.sort((z,q)=>q.overscaledZ-z.overscaledZ),M=_[_.length-1].overscaledZ,T=_[0].overscaledZ-M+1;if(T>1){this.currentStencilSource=void 0,this.nextStencilID+T>256&&this.clearStencil();const z={};for(let q=0;q<T;q++)z[q+M]=new Vi({func:c.GEQUAL,mask:255},q+this.nextStencilID,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID+=T,[z,_]}return[{[M]:Vi.disabled},_]}stencilConfigForOverlapTwoPass(a){const c=this.context.gl,_=a.sort((z,q)=>q.overscaledZ-z.overscaledZ),M=_[_.length-1].overscaledZ,T=_[0].overscaledZ-M+1;if(this.clearStencil(),T>1){const z={},q={};for(let te=0;te<T;te++)z[te+M]=new Vi({func:c.GREATER,mask:255},T+1+te,255,c.KEEP,c.KEEP,c.REPLACE),q[te+M]=new Vi({func:c.GREATER,mask:255},1+te,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID=2*T+1,[z,q,_]}return this.nextStencilID=3,[{[M]:new Vi({func:c.GREATER,mask:255},2,255,c.KEEP,c.KEEP,c.REPLACE)},{[M]:new Vi({func:c.GREATER,mask:255},1,255,c.KEEP,c.KEEP,c.REPLACE)},_]}colorModeForRenderPass(){const a=this.context.gl;return this._showOverdrawInspector?new fo([a.CONSTANT_COLOR,a.ONE],new o.b6(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?fo.unblended:fo.alphaBlended}getDepthModeForSublayer(a,c,_){if(!this.opaquePassEnabledForLayer())return qr.disabled;const M=1-((1+this.currentLayer)*this.numSublayers+a)*this.depthEpsilon;return new qr(_||this.context.gl.LEQUAL,c,[M,M])}getDepthModeFor3D(){return new qr(this.context.gl.LEQUAL,qr.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(a,c){var _,M;this.style=a,this.options=c,this.lineAtlas=a.lineAtlas,this.imageManager=a.imageManager,this.glyphManager=a.glyphManager,this.symbolFadeChange=a.placement.symbolFadeChange(O.now()),this.imageManager.beginFrame();const T=this.style._order,z=this.style.sourceCaches,q={},te={},ae={},be={isRenderingToTexture:!1,isRenderingGlobe:((_=a.projection)===null||_===void 0?void 0:_.transitionState)>0};for(const Te in z){const $e=z[Te];$e.used&&$e.prepare(this.context),q[Te]=$e.getVisibleCoordinates(!1),te[Te]=q[Te].slice().reverse(),ae[Te]=$e.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let Te=0;Te<T.length;Te++)if(this.style._layers[T[Te]].is3D()){this.opaquePassCutoff=Te;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const Te of T){const $e=this.style._layers[Te];if(!$e.hasOffscreenPass()||$e.isHidden(this.transform.zoom))continue;const Xe=te[$e.source];($e.type==="custom"||Xe.length)&&this.renderLayer(this,z[$e.source],$e,Xe,be)}if((M=this.style.projection)===null||M===void 0||M.updateGPUdependent({context:this.context,useProgram:Te=>this.useProgram(Te)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:c.showOverdrawInspector?o.b6.black:o.b6.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(Te,$e){const Xe=Te.context,mt=Xe.gl,ut=((Ut,It,rn)=>{const Zt=Math.cos(It.rollInRadians),Mn=Math.sin(It.rollInRadians),En=$o(It),bn=It.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:Ut.properties.get("sky-color"),u_horizon_color:Ut.properties.get("horizon-color"),u_horizon:[(It.width/2-En*Mn)*rn,(It.height/2+En*Zt)*rn],u_horizon_normal:[-Mn,Zt],u_sky_horizon_blend:Ut.properties.get("sky-horizon-blend")*It.height/2*rn,u_sky_blend:bn}})($e,Te.style.map.transform,Te.pixelRatio),ft=new qr(mt.LEQUAL,qr.ReadWrite,[0,1]),vt=Vi.disabled,Et=Te.colorModeForRenderPass(),kt=Te.useProgram("sky"),Rt=xd(Xe,$e);kt.draw(Xe,mt.TRIANGLES,ft,vt,Et,zi.disabled,ut,null,void 0,"sky",Rt.vertexBuffer,Rt.indexBuffer,Rt.segments)}(this,this.style.sky),this._showOverdrawInspector=c.showOverdrawInspector,this.depthRangeFor3D=[0,1-(a._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=T.length-1;this.currentLayer>=0;this.currentLayer--){const Te=this.style._layers[T[this.currentLayer]],$e=z[Te.source],Xe=q[Te.source];this._renderTileClippingMasks(Te,Xe,!1),this.renderLayer(this,$e,Te,Xe,be)}this.renderPass="translucent";let ke=!1;for(this.currentLayer=0;this.currentLayer<T.length;this.currentLayer++){const Te=this.style._layers[T[this.currentLayer]],$e=z[Te.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(Te,be))continue;this.opaquePassEnabledForLayer()||ke||(ke=!0,be.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const Xe=(Te.type==="symbol"?ae:te)[Te.source];this._renderTileClippingMasks(Te,q[Te.source],!1),this.renderLayer(this,$e,Te,Xe,be)}if(be.isRenderingGlobe&&function(Te,$e,Xe){const mt=Te.context,ut=mt.gl,ft=Te.useProgram("atmosphere"),vt=new qr(ut.LEQUAL,qr.ReadOnly,[0,1]),Et=Te.transform,kt=function(bn,On){const zn=bn.properties.get("position"),Ln=[-zn.x,-zn.y,-zn.z],Tr=o.as(new Float64Array(16));return bn.properties.get("anchor")==="map"&&(o.aZ(Tr,Tr,On.rollInRadians),o.a_(Tr,Tr,-On.pitchInRadians),o.aZ(Tr,Tr,On.bearingInRadians),o.a_(Tr,Tr,On.center.lat*Math.PI/180),o.bl(Tr,Tr,-On.center.lng*Math.PI/180)),o.bU(Ln,Ln,Tr),Ln}(Xe,Te.transform),Rt=Et.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),Ut=$e.properties.get("atmosphere-blend")*Rt.projectionTransition;if(Ut===0)return;const It=pi(Et.worldSize,Et.center.lat),rn=Et.inverseProjectionMatrix,Zt=new Float64Array(4);Zt[3]=1,o.ao(Zt,Zt,Et.modelViewProjectionMatrix),Zt[0]/=Zt[3],Zt[1]/=Zt[3],Zt[2]/=Zt[3],Zt[3]=1,o.ao(Zt,Zt,rn),Zt[0]/=Zt[3],Zt[1]/=Zt[3],Zt[2]/=Zt[3],Zt[3]=1;const Mn=((bn,On,zn,Ln,Tr)=>({u_sun_pos:bn,u_atmosphere_blend:On,u_globe_position:zn,u_globe_radius:Ln,u_inv_proj_matrix:Tr}))(kt,Ut,[Zt[0],Zt[1],Zt[2]],It,rn),En=xd(mt,$e);ft.draw(mt,ut.TRIANGLES,vt,Vi.disabled,fo.alphaBlended,zi.disabled,Mn,null,null,"atmosphere",En.vertexBuffer,En.indexBuffer,En.segments)}(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const Te=function($e,Xe){let mt=null;const ut=Object.values($e._layers).flatMap(kt=>kt.source&&!kt.isHidden(Xe)?[$e.sourceCaches[kt.source]]:[]),ft=ut.filter(kt=>kt.getSource().type==="vector"),vt=ut.filter(kt=>kt.getSource().type!=="vector"),Et=kt=>{(!mt||mt.getSource().maxzoom<kt.getSource().maxzoom)&&(mt=kt)};return ft.forEach(kt=>Et(kt)),mt||vt.forEach(kt=>Et(kt)),mt}(this.style,this.transform.zoom);Te&&function($e,Xe,mt){for(let ut=0;ut<mt.length;ut++)sc($e,Xe,mt[ut])}(this,Te,Te.getVisibleCoordinates())}this.options.showPadding&&function(Te){const $e=Te.transform.padding;nl(Te,Te.transform.height-($e.top||0),3,_d),nl(Te,$e.bottom||0,3,Ul),vu(Te,$e.left||0,3,Vc),vu(Te,Te.transform.width-($e.right||0),3,oc);const Xe=Te.transform.centerPoint;(function(mt,ut,ft,vt){rl(mt,ut-1,ft-10,2,20,vt),rl(mt,ut-10,ft-1,20,2,vt)})(Te,Xe.x,Te.transform.height-Xe.y,bd)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(a){if(!this.style||!this.style.map||!this.style.map.terrain)return;const c=this.terrainFacilitator.matrix,_=this.transform.modelViewProjectionMatrix;let M=this.terrainFacilitator.dirty;M||(M=a?!o.bX(c,_):!o.bY(c,_)),M||(M=this.style.map.terrain.sourceCache.anyTilesAfterTime(this.terrainFacilitator.renderTime)),M&&(o.bZ(c,_),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(T,z){const q=T.context,te=q.gl,ae=T.transform,be=fo.unblended,ke=new qr(te.LEQUAL,qr.ReadWrite,[0,1]),Te=z.sourceCache.getRenderableTiles(),$e=T.useProgram("terrainDepth");q.bindFramebuffer.set(z.getFramebuffer("depth").framebuffer),q.viewport.set([0,0,T.width/devicePixelRatio,T.height/devicePixelRatio]),q.clear({color:o.b6.transparent,depth:1});for(const Xe of Te){const mt=z.getTerrainMesh(Xe.tileID),ut=z.getTerrainData(Xe.tileID),ft=ae.getProjectionData({overscaledTileID:Xe.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),vt={u_ele_delta:z.getMeshFrameDelta(ae.zoom)};$e.draw(q,te.TRIANGLES,ke,Vi.disabled,be,zi.backCCW,vt,ut,ft,"terrain",mt.vertexBuffer,mt.indexBuffer,mt.segments)}q.bindFramebuffer.set(null),q.viewport.set([0,0,T.width,T.height])}(this,this.style.map.terrain),function(T,z){const q=T.context,te=q.gl,ae=T.transform,be=fo.unblended,ke=new qr(te.LEQUAL,qr.ReadWrite,[0,1]),Te=z.getCoordsTexture(),$e=z.sourceCache.getRenderableTiles(),Xe=T.useProgram("terrainCoords");q.bindFramebuffer.set(z.getFramebuffer("coords").framebuffer),q.viewport.set([0,0,T.width/devicePixelRatio,T.height/devicePixelRatio]),q.clear({color:o.b6.transparent,depth:1}),z.coordsIndex=[];for(const mt of $e){const ut=z.getTerrainMesh(mt.tileID),ft=z.getTerrainData(mt.tileID);q.activeTexture.set(te.TEXTURE0),te.bindTexture(te.TEXTURE_2D,Te.texture);const vt={u_terrain_coords_id:(255-z.coordsIndex.length)/255,u_texture:0,u_ele_delta:z.getMeshFrameDelta(ae.zoom)},Et=ae.getProjectionData({overscaledTileID:mt.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});Xe.draw(q,te.TRIANGLES,ke,Vi.disabled,be,zi.backCCW,vt,ft,Et,"terrain",ut.vertexBuffer,ut.indexBuffer,ut.segments),z.coordsIndex.push(mt.tileID.key)}q.bindFramebuffer.set(null),q.viewport.set([0,0,T.width,T.height])}(this,this.style.map.terrain))}renderLayer(a,c,_,M,T){_.isHidden(this.transform.zoom)||(_.type==="background"||_.type==="custom"||(M||[]).length)&&(this.id=_.id,o.b_(_)?function(z,q,te,ae,be,ke){if(z.renderPass!=="translucent")return;const{isRenderingToTexture:Te}=ke,$e=Vi.disabled,Xe=z.colorModeForRenderPass();(te._unevaluatedLayout.hasValue("text-variable-anchor")||te._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(mt,ut,ft,vt,Et,kt,Rt,Ut,It){const rn=ut.transform,Zt=ut.style.map.terrain,Mn=Et==="map",En=kt==="map";for(const bn of mt){const On=vt.getTile(bn),zn=On.getBucket(ft);if(!zn||!zn.text||!zn.text.segments.get().length)continue;const Ln=o.af(zn.textSizeData,rn.zoom),Tr=o.av(On,1,ut.transform.zoom),Zr=ct(Mn,ut.transform,Tr),Xi=ft.layout.get("icon-text-fit")!=="none"&&zn.hasIconData();if(Ln){const _o=Math.pow(2,rn.zoom-On.tileID.overscaledZ),ki=Zt?(os,Yo)=>Zt.getElevation(bn,os,Yo):null;gu(zn,Mn,En,It,rn,Zr,_o,Ln,Xi,o.aw(rn,On,Rt,Ut),bn.toUnwrapped(),ki)}}}(ae,z,te,q,te.layout.get("text-rotation-alignment"),te.layout.get("text-pitch-alignment"),te.paint.get("text-translate"),te.paint.get("text-translate-anchor"),be),te.paint.get("icon-opacity").constantOr(1)!==0&&qc(z,q,te,ae,!1,te.paint.get("icon-translate"),te.paint.get("icon-translate-anchor"),te.layout.get("icon-rotation-alignment"),te.layout.get("icon-pitch-alignment"),te.layout.get("icon-keep-upright"),$e,Xe,Te),te.paint.get("text-opacity").constantOr(1)!==0&&qc(z,q,te,ae,!0,te.paint.get("text-translate"),te.paint.get("text-translate-anchor"),te.layout.get("text-rotation-alignment"),te.layout.get("text-pitch-alignment"),te.layout.get("text-keep-upright"),$e,Xe,Te),q.map.showCollisionBoxes&&(Gc(z,q,te,ae,!0),Gc(z,q,te,ae,!1))}(a,c,_,M,this.style.placement.variableOffsets,T):o.b$(_)?function(z,q,te,ae,be){if(z.renderPass!=="translucent")return;const{isRenderingToTexture:ke}=be,Te=te.paint.get("circle-opacity"),$e=te.paint.get("circle-stroke-width"),Xe=te.paint.get("circle-stroke-opacity"),mt=!te.layout.get("circle-sort-key").isConstant();if(Te.constantOr(1)===0&&($e.constantOr(1)===0||Xe.constantOr(1)===0))return;const ut=z.context,ft=ut.gl,vt=z.transform,Et=z.getDepthModeForSublayer(0,qr.ReadOnly),kt=Vi.disabled,Rt=z.colorModeForRenderPass(),Ut=[],It=vt.getCircleRadiusCorrection();for(let rn=0;rn<ae.length;rn++){const Zt=ae[rn],Mn=q.getTile(Zt),En=Mn.getBucket(te);if(!En)continue;const bn=te.paint.get("circle-translate"),On=te.paint.get("circle-translate-anchor"),zn=o.aw(vt,Mn,bn,On),Ln=En.programConfigurations.get(te.id),Tr=z.useProgram("circle",Ln),Zr=En.layoutVertexBuffer,Xi=En.indexBuffer,_o=z.style.map.terrain&&z.style.map.terrain.getTerrainData(Zt),ki={programConfiguration:Ln,program:Tr,layoutVertexBuffer:Zr,indexBuffer:Xi,uniformValues:$h(z,Mn,te,zn,It),terrainData:_o,projectionData:vt.getProjectionData({overscaledTileID:Zt,applyGlobeMatrix:!ke,applyTerrainMatrix:!0})};if(mt){const os=En.segments.get();for(const Yo of os)Ut.push({segments:new o.aF([Yo]),sortKey:Yo.sortKey,state:ki})}else Ut.push({segments:En.segments,sortKey:0,state:ki})}mt&&Ut.sort((rn,Zt)=>rn.sortKey-Zt.sortKey);for(const rn of Ut){const{programConfiguration:Zt,program:Mn,layoutVertexBuffer:En,indexBuffer:bn,uniformValues:On,terrainData:zn,projectionData:Ln}=rn.state;Mn.draw(ut,ft.TRIANGLES,Et,kt,Rt,zi.backCCW,On,zn,Ln,te.id,En,bn,rn.segments,te.paint,z.transform.zoom,Zt)}}(a,c,_,M,T):o.c0(_)?function(z,q,te,ae,be){if(te.paint.get("heatmap-opacity")===0)return;const ke=z.context,{isRenderingToTexture:Te,isRenderingGlobe:$e}=be;if(z.style.map.terrain){for(const Xe of ae){const mt=q.getTile(Xe);q.hasRenderableParent(Xe)||(z.renderPass==="offscreen"?cs(z,mt,te,Xe,$e):z.renderPass==="translucent"&&Cd(z,te,Xe,Te,$e))}ke.viewport.set([0,0,z.width,z.height])}else z.renderPass==="offscreen"?function(Xe,mt,ut,ft){const vt=Xe.context,Et=vt.gl,kt=Xe.transform,Rt=Vi.disabled,Ut=new fo([Et.ONE,Et.ONE],o.b6.transparent,[!0,!0,!0,!0]);(function(It,rn,Zt){const Mn=It.gl;It.activeTexture.set(Mn.TEXTURE1),It.viewport.set([0,0,rn.width/4,rn.height/4]);let En=Zt.heatmapFbos.get(o.bR);En?(Mn.bindTexture(Mn.TEXTURE_2D,En.colorAttachment.get()),It.bindFramebuffer.set(En.framebuffer)):(En=dA(It,rn.width/4,rn.height/4),Zt.heatmapFbos.set(o.bR,En))})(vt,Xe,ut),vt.clear({color:o.b6.transparent});for(let It=0;It<ft.length;It++){const rn=ft[It];if(mt.hasRenderableParent(rn))continue;const Zt=mt.getTile(rn),Mn=Zt.getBucket(ut);if(!Mn)continue;const En=Mn.programConfigurations.get(ut.id),bn=Xe.useProgram("heatmap",En),On=kt.getProjectionData({overscaledTileID:rn,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),zn=kt.getCircleRadiusCorrection();bn.draw(vt,Et.TRIANGLES,qr.disabled,Rt,Ut,zi.backCCW,Zh(Zt,kt.zoom,ut.paint.get("heatmap-intensity"),zn),null,On,ut.id,Mn.layoutVertexBuffer,Mn.indexBuffer,Mn.segments,ut.paint,kt.zoom,En)}vt.viewport.set([0,0,Xe.width,Xe.height])}(z,q,te,ae):z.renderPass==="translucent"&&function(Xe,mt){const ut=Xe.context,ft=ut.gl;ut.setColorMode(Xe.colorModeForRenderPass());const vt=mt.heatmapFbos.get(o.bR);vt&&(ut.activeTexture.set(ft.TEXTURE0),ft.bindTexture(ft.TEXTURE_2D,vt.colorAttachment.get()),ut.activeTexture.set(ft.TEXTURE1),yu(ut,mt).bind(ft.LINEAR,ft.CLAMP_TO_EDGE),Xe.useProgram("heatmapTexture").draw(ut,ft.TRIANGLES,qr.disabled,Vi.disabled,Xe.colorModeForRenderPass(),zi.disabled,vh(Xe,mt,0,1),null,null,mt.id,Xe.viewportBuffer,Xe.quadTriangleIndexBuffer,Xe.viewportSegments,mt.paint,Xe.transform.zoom))}(z,te)}(a,c,_,M,T):o.c1(_)?function(z,q,te,ae,be){if(z.renderPass!=="translucent")return;const{isRenderingToTexture:ke}=be,Te=te.paint.get("line-opacity"),$e=te.paint.get("line-width");if(Te.constantOr(1)===0||$e.constantOr(1)===0)return;const Xe=z.getDepthModeForSublayer(0,qr.ReadOnly),mt=z.colorModeForRenderPass(),ut=te.paint.get("line-dasharray"),ft=te.paint.get("line-pattern"),vt=ft.constantOr(1),Et=te.paint.get("line-gradient"),kt=te.getCrossfadeParameters(),Rt=vt?"linePattern":ut?"lineSDF":Et?"lineGradient":"line",Ut=z.context,It=Ut.gl,rn=z.transform;let Zt=!0;for(const Mn of ae){const En=q.getTile(Mn);if(vt&&!En.patternsLoaded())continue;const bn=En.getBucket(te);if(!bn)continue;const On=bn.programConfigurations.get(te.id),zn=z.context.program.get(),Ln=z.useProgram(Rt,On),Tr=Zt||Ln.program!==zn,Zr=z.style.map.terrain&&z.style.map.terrain.getTerrainData(Mn),Xi=ft.constantOr(null);if(Xi&&En.imageAtlas){const Ao=En.imageAtlas,po=Ao.patternPositions[Xi.to.toString()],Fa=Ao.patternPositions[Xi.from.toString()];po&&Fa&&On.setConstantPatternPositions(po,Fa)}const _o=rn.getProjectionData({overscaledTileID:Mn,applyGlobeMatrix:!ke,applyTerrainMatrix:!0}),ki=rn.getPixelScale(),os=vt?Nc(z,En,te,ki,kt):ut?ju(z,En,te,ki,ut,kt):Et?hu(z,En,te,ki,bn.lineClipsArray.length):bc(z,En,te,ki);if(vt)Ut.activeTexture.set(It.TEXTURE0),En.imageAtlasTexture.bind(It.LINEAR,It.CLAMP_TO_EDGE),On.updatePaintBuffers(kt);else if(ut&&(Tr||z.lineAtlas.dirty))Ut.activeTexture.set(It.TEXTURE0),z.lineAtlas.bind(Ut);else if(Et){const Ao=bn.gradients[te.id];let po=Ao.texture;if(te.gradientVersion!==Ao.version){let Fa=256;if(te.stepInterpolant){const ss=q.getSource().maxzoom,es=Mn.canonical.z===ss?Math.ceil(1<<z.transform.maxZoom-Mn.canonical.z):1;Fa=o.ad(o.bS(bn.maxLineLength/o.Z*1024*es),256,Ut.maxTextureSize)}Ao.gradient=o.bT({expression:te.gradientExpression(),evaluationKey:"lineProgress",resolution:Fa,image:Ao.gradient||void 0,clips:bn.lineClipsArray}),Ao.texture?Ao.texture.update(Ao.gradient):Ao.texture=new oe(Ut,Ao.gradient,It.RGBA),Ao.version=te.gradientVersion,po=Ao.texture}Ut.activeTexture.set(It.TEXTURE0),po.bind(te.stepInterpolant?It.NEAREST:It.LINEAR,It.CLAMP_TO_EDGE)}let Yo;if(ke){const[Ao]=z.getStencilConfigForOverlapAndUpdateStencilID(ae);Yo=Ao[Mn.overscaledZ]}else Yo=z.stencilModeForClipping(Mn);Ln.draw(Ut,It.TRIANGLES,Xe,Yo,mt,zi.disabled,os,Zr,_o,te.id,bn.layoutVertexBuffer,bn.indexBuffer,bn.segments,te.paint,z.transform.zoom,On,bn.layoutVertexBuffer2),Zt=!1}}(a,c,_,M,T):o.c2(_)?function(z,q,te,ae,be){const ke=te.paint.get("fill-color"),Te=te.paint.get("fill-opacity");if(Te.constantOr(1)===0)return;const{isRenderingToTexture:$e}=be,Xe=z.colorModeForRenderPass(),mt=te.paint.get("fill-pattern"),ut=z.opaquePassEnabledForLayer()&&!mt.constantOr(1)&&ke.constantOr(o.b6.transparent).a===1&&Te.constantOr(0)===1?"opaque":"translucent";if(z.renderPass===ut){const ft=z.getDepthModeForSublayer(1,z.renderPass==="opaque"?qr.ReadWrite:qr.ReadOnly);wh(z,q,te,ae,ft,Xe,!1,$e)}if(z.renderPass==="translucent"&&te.paint.get("fill-antialias")){const ft=z.getDepthModeForSublayer(te.getPaintProperty("fill-outline-color")?2:0,qr.ReadOnly);wh(z,q,te,ae,ft,Xe,!0,$e)}}(a,c,_,M,T):o.c3(_)?function(z,q,te,ae,be){const ke=te.paint.get("fill-extrusion-opacity");if(ke===0)return;const{isRenderingToTexture:Te}=be;if(z.renderPass==="translucent"){const $e=new qr(z.context.gl.LEQUAL,qr.ReadWrite,z.depthRangeFor3D);if(ke!==1||te.paint.get("fill-extrusion-pattern").constantOr(1))IA(z,q,te,ae,$e,Vi.disabled,fo.disabled,Te),IA(z,q,te,ae,$e,z.stencilModeFor3D(),z.colorModeForRenderPass(),Te);else{const Xe=z.colorModeForRenderPass();IA(z,q,te,ae,$e,Vi.disabled,Xe,Te)}}}(a,c,_,M,T):o.c4(_)?function(z,q,te,ae,be){if(z.renderPass!=="offscreen"&&z.renderPass!=="translucent")return;const{isRenderingToTexture:ke}=be,Te=z.context,$e=z.style.projection.useSubdivision,Xe=z.getDepthModeForSublayer(0,qr.ReadOnly),mt=z.colorModeForRenderPass();if(z.renderPass==="offscreen")(function(ut,ft,vt,Et,kt,Rt,Ut){const It=ut.context,rn=It.gl;for(const Zt of vt){const Mn=ft.getTile(Zt),En=Mn.dem;if(!En||!En.data||!Mn.needsHillshadePrepare)continue;const bn=En.dim,On=En.stride,zn=En.getPixels();if(It.activeTexture.set(rn.TEXTURE1),It.pixelStoreUnpackPremultiplyAlpha.set(!1),Mn.demTexture=Mn.demTexture||ut.getTileTexture(On),Mn.demTexture){const Tr=Mn.demTexture;Tr.update(zn,{premultiply:!1}),Tr.bind(rn.NEAREST,rn.CLAMP_TO_EDGE)}else Mn.demTexture=new oe(It,zn,rn.RGBA,{premultiply:!1}),Mn.demTexture.bind(rn.NEAREST,rn.CLAMP_TO_EDGE);It.activeTexture.set(rn.TEXTURE0);let Ln=Mn.fbo;if(!Ln){const Tr=new oe(It,{width:bn,height:bn,data:null},rn.RGBA);Tr.bind(rn.LINEAR,rn.CLAMP_TO_EDGE),Ln=Mn.fbo=It.createFramebuffer(bn,bn,!0,!1),Ln.colorAttachment.set(Tr.texture)}It.bindFramebuffer.set(Ln.framebuffer),It.viewport.set([0,0,bn,bn]),ut.useProgram("hillshadePrepare").draw(It,rn.TRIANGLES,kt,Rt,Ut,zi.disabled,Xh(Mn.tileID,En),null,null,Et.id,ut.rasterBoundsBuffer,ut.quadTriangleIndexBuffer,ut.rasterBoundsSegments),Mn.needsHillshadePrepare=!1}})(z,q,ae,te,Xe,Vi.disabled,mt),Te.viewport.set([0,0,z.width,z.height]);else if(z.renderPass==="translucent")if($e){const[ut,ft,vt]=z.stencilConfigForOverlapTwoPass(ae);rc(z,q,te,vt,ut,Xe,mt,!1,ke),rc(z,q,te,vt,ft,Xe,mt,!0,ke)}else{const[ut,ft]=z.getStencilConfigForOverlapAndUpdateStencilID(ae);rc(z,q,te,ft,ut,Xe,mt,!1,ke)}}(a,c,_,M,T):o.c5(_)?function(z,q,te,ae,be){if(z.renderPass!=="translucent"||te.paint.get("raster-opacity")===0||!ae.length)return;const{isRenderingToTexture:ke}=be,Te=q.getSource(),$e=z.style.projection.useSubdivision;if(Te instanceof dr)ms(z,q,te,ae,null,!1,!1,Te.tileCoords,Te.flippedWindingOrder,ke);else if($e){const[Xe,mt,ut]=z.stencilConfigForOverlapTwoPass(ae);ms(z,q,te,ut,Xe,!1,!0,ic,!1,ke),ms(z,q,te,ut,mt,!0,!0,ic,!1,ke)}else{const[Xe,mt]=z.getStencilConfigForOverlapAndUpdateStencilID(ae);ms(z,q,te,mt,Xe,!1,!0,ic,!1,ke)}}(a,c,_,M,T):o.c6(_)?function(z,q,te,ae,be){const ke=te.paint.get("background-color"),Te=te.paint.get("background-opacity");if(Te===0)return;const{isRenderingToTexture:$e}=be,Xe=z.context,mt=Xe.gl,ut=z.style.projection,ft=z.transform,vt=ft.tileSize,Et=te.paint.get("background-pattern");if(z.isPatternMissing(Et))return;const kt=!Et&&ke.a===1&&Te===1&&z.opaquePassEnabledForLayer()?"opaque":"translucent";if(z.renderPass!==kt)return;const Rt=Vi.disabled,Ut=z.getDepthModeForSublayer(0,kt==="opaque"?qr.ReadWrite:qr.ReadOnly),It=z.colorModeForRenderPass(),rn=z.useProgram(Et?"backgroundPattern":"background"),Zt=ae||Ve(ft,{tileSize:vt,terrain:z.style.map.terrain});Et&&(Xe.activeTexture.set(mt.TEXTURE0),z.imageManager.bind(z.context));const Mn=te.getCrossfadeParameters();for(const En of Zt){const bn=ft.getProjectionData({overscaledTileID:En,applyGlobeMatrix:!$e,applyTerrainMatrix:!0}),On=Et?ef(Te,z,Et,{tileID:En,tileSize:vt},Mn):pu(Te,ke),zn=z.style.map.terrain&&z.style.map.terrain.getTerrainData(En),Ln=ut.getMeshFromTileID(Xe,En.canonical,!1,!0,"raster");rn.draw(Xe,mt.TRIANGLES,Ut,Rt,It,zi.backCCW,On,zn,bn,te.id,Ln.vertexBuffer,Ln.indexBuffer,Ln.segments)}}(a,0,_,M,T):o.c7(_)&&function(z,q,te,ae){const{isRenderingGlobe:be}=ae,ke=z.context,Te=te.implementation,$e=z.style.projection,Xe=z.transform,mt=Xe.getProjectionDataForCustomLayer(be),ut={farZ:Xe.farZ,nearZ:Xe.nearZ,fov:Xe.fov*Math.PI/180,modelViewProjectionMatrix:Xe.modelViewProjectionMatrix,projectionMatrix:Xe.projectionMatrix,shaderData:{variantName:$e.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${$e.shaderPreludeCode.vertexSource}`,define:$e.shaderDefine},defaultProjectionData:mt},ft=Te.renderingMode?Te.renderingMode:"2d";if(z.renderPass==="offscreen"){const vt=Te.prerender;vt&&(z.setCustomLayerDefaults(),ke.setColorMode(z.colorModeForRenderPass()),vt.call(Te,ke.gl,ut),ke.setDirty(),z.setBaseState())}else if(z.renderPass==="translucent"){z.setCustomLayerDefaults(),ke.setColorMode(z.colorModeForRenderPass()),ke.setStencilMode(Vi.disabled);const vt=ft==="3d"?z.getDepthModeFor3D():z.getDepthModeForSublayer(0,qr.ReadOnly);ke.setDepthMode(vt),Te.render(ke.gl,ut),ke.setDirty(),z.setBaseState(),ke.bindFramebuffer.set(null)}}(a,0,_,T))}saveTileTexture(a){const c=this._tileTextures[a.size[0]];c?c.push(a):this._tileTextures[a.size[0]]=[a]}getTileTexture(a){const c=this._tileTextures[a];return c&&c.length>0?c.pop():null}isPatternMissing(a){if(!a)return!1;if(!a.from||!a.to)return!0;const c=this.imageManager.getPattern(a.from.toString()),_=this.imageManager.getPattern(a.to.toString());return!c||!_}useProgram(a,c,_=!1){this.cache=this.cache||{};const M=!!this.style.map.terrain,T=this.style.projection,z=a+(c?c.cacheKey:"")+`/${_?uA:T.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(M?"/terrain":"");return this.cache[z]||(this.cache[z]=new Wd(this.context,ii[a],c,fd[a],this._showOverdrawInspector,M,_?ii.projectionMercator:T.shaderPreludeCode,_?xi:T.shaderDefine)),this.cache[z]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const a=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(a.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new oe(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:a,drawingBufferHeight:c}=this.context.gl;return this.width!==a||this.height!==c}}function Zd(I,a){let c,_=!1,M=null,T=null;const z=()=>{M=null,_&&(I.apply(T,c),M=setTimeout(z,a),_=!1)};return(...q)=>(_=!0,T=this,c=q,M||z(),M)}class nu{constructor(a){this._getCurrentHash=()=>{const c=window.location.hash.replace("#","");if(this._hashName){let _;return c.split("&").map(M=>M.split("=")).forEach(M=>{M[0]===this._hashName&&(_=M)}),(_&&_[1]||"").split("/")}return c.split("/")},this._onHashChange=()=>{const c=this._getCurrentHash();if(!this._isValidHash(c))return!1;const _=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(c[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+c[2],+c[1]],zoom:+c[0],bearing:_,pitch:+(c[4]||0)}),!0},this._updateHashUnthrottled=()=>{const c=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,c)},this._removeHash=()=>{const c=this._getCurrentHash();if(c.length===0)return;const _=c.join("/");let M=_;M.split("&").length>0&&(M=M.split("&")[0]),this._hashName&&(M=`${this._hashName}=${_}`);let T=window.location.hash.replace(M,"");T.startsWith("#&")?T=T.slice(0,1)+T.slice(2):T==="#"&&(T="");let z=window.location.href.replace(/(#.+)?$/,T);z=z.replace("&&","&"),window.history.replaceState(window.history.state,null,z)},this._updateHash=Zd(this._updateHashUnthrottled,300),this._hashName=a&&encodeURIComponent(a)}addTo(a){return this._map=a,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(a){const c=this._map.getCenter(),_=Math.round(100*this._map.getZoom())/100,M=Math.ceil((_*Math.LN2+Math.log(512/360/.5))/Math.LN10),T=Math.pow(10,M),z=Math.round(c.lng*T)/T,q=Math.round(c.lat*T)/T,te=this._map.getBearing(),ae=this._map.getPitch();let be="";if(be+=a?`/${z}/${q}/${_}`:`${_}/${q}/${z}`,(te||ae)&&(be+="/"+Math.round(10*te)/10),ae&&(be+=`/${Math.round(ae)}`),this._hashName){const ke=this._hashName;let Te=!1;const $e=window.location.hash.slice(1).split("&").map(Xe=>{const mt=Xe.split("=")[0];return mt===ke?(Te=!0,`${mt}=${be}`):Xe}).filter(Xe=>Xe);return Te||$e.push(`${ke}=${be}`),`#${$e.join("&")}`}return`#${be}`}_isValidHash(a){if(a.length<3||a.some(isNaN))return!1;try{new o.Q(+a[2],+a[1])}catch{return!1}const c=+a[0],_=+(a[3]||0),M=+(a[4]||0);return c>=this._map.getMinZoom()&&c<=this._map.getMaxZoom()&&_>=-180&&_<=180&&M>=this._map.getMinPitch()&&M<=this._map.getMaxPitch()}}const Yu={linearity:.3,easing:o.c8(0,0,.3,1)},qu=o.e({deceleration:2500,maxSpeed:1400},Yu),kA=o.e({deceleration:20,maxSpeed:1400},Yu),wc=o.e({deceleration:1e3,maxSpeed:360},Yu),Cu=o.e({deceleration:1e3,maxSpeed:90},Yu),Sh=o.e({deceleration:1e3,maxSpeed:360},Yu);class ot{constructor(a){this._map=a,this.clear()}clear(){this._inertiaBuffer=[]}record(a){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:O.now(),settings:a})}_drainInertiaBuffer(){const a=this._inertiaBuffer,c=O.now();for(;a.length>0&&c-a[0].time>160;)a.shift()}_onMoveEnd(a){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const c={zoom:0,bearing:0,pitch:0,roll:0,pan:new o.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:T}of this._inertiaBuffer)c.zoom+=T.zoomDelta||0,c.bearing+=T.bearingDelta||0,c.pitch+=T.pitchDelta||0,c.roll+=T.rollDelta||0,T.panDelta&&c.pan._add(T.panDelta),T.around&&(c.around=T.around),T.pinchAround&&(c.pinchAround=T.pinchAround);const _=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,M={};if(c.pan.mag()){const T=_s(c.pan.mag(),_,o.e({},qu,a||{})),z=c.pan.mult(T.amount/c.pan.mag()),q=this._map.cameraHelper.handlePanInertia(z,this._map.transform);M.center=q.easingCenter,M.offset=q.easingOffset,Vu(M,T)}if(c.zoom){const T=_s(c.zoom,_,kA);M.zoom=this._map.transform.zoom+T.amount,Vu(M,T)}if(c.bearing){const T=_s(c.bearing,_,wc);M.bearing=this._map.transform.bearing+o.ad(T.amount,-179,179),Vu(M,T)}if(c.pitch){const T=_s(c.pitch,_,Cu);M.pitch=this._map.transform.pitch+T.amount,Vu(M,T)}if(c.roll){const T=_s(c.roll,_,Sh);M.roll=this._map.transform.roll+o.ad(T.amount,-179,179),Vu(M,T)}if(M.zoom||M.bearing){const T=c.pinchAround===void 0?c.around:c.pinchAround;M.around=T?this._map.unproject(T):this._map.getCenter()}return this.clear(),o.e(M,{noMoveStart:!0})}}function Vu(I,a){(!I.duration||I.duration<a.duration)&&(I.duration=a.duration,I.easing=a.easing)}function _s(I,a,c){const{maxSpeed:_,linearity:M,deceleration:T}=c,z=o.ad(I*M/(a/1e3),-_,_),q=Math.abs(z)/(T*M);return{easing:c.easing,duration:1e3*q,amount:z*(q/2)}}class gi extends o.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(a,c,_,M={}){const T=P.mousePos(c.getCanvas(),_),z=c.unproject(T);super(a,o.e({point:T,lngLat:z,originalEvent:_},M)),this._defaultPrevented=!1,this.target=c}}class Gr extends o.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(a,c,_){const M=a==="touchend"?_.changedTouches:_.touches,T=P.touchPos(c.getCanvasContainer(),M),z=T.map(te=>c.unproject(te)),q=T.reduce((te,ae,be,ke)=>te.add(ae.div(ke.length)),new o.P(0,0));super(a,{points:T,point:q,lngLats:z,lngLat:c.unproject(q),originalEvent:_}),this._defaultPrevented=!1}}class ta extends o.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(a,c,_){super(a,{originalEvent:_}),this._defaultPrevented=!1}}class zl{constructor(a,c){this._map=a,this._clickTolerance=c.clickTolerance}reset(){delete this._mousedownPos}wheel(a){return this._firePreventable(new ta(a.type,this._map,a))}mousedown(a,c){return this._mousedownPos=c,this._firePreventable(new gi(a.type,this._map,a))}mouseup(a){this._map.fire(new gi(a.type,this._map,a))}click(a,c){this._mousedownPos&&this._mousedownPos.dist(c)>=this._clickTolerance||this._map.fire(new gi(a.type,this._map,a))}dblclick(a){return this._firePreventable(new gi(a.type,this._map,a))}mouseover(a){this._map.fire(new gi(a.type,this._map,a))}mouseout(a){this._map.fire(new gi(a.type,this._map,a))}touchstart(a){return this._firePreventable(new Gr(a.type,this._map,a))}touchmove(a){this._map.fire(new Gr(a.type,this._map,a))}touchend(a){this._map.fire(new Gr(a.type,this._map,a))}touchcancel(a){this._map.fire(new Gr(a.type,this._map,a))}_firePreventable(a){if(this._map.fire(a),a.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class TA{constructor(a){this._map=a}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(a){this._map.fire(new gi(a.type,this._map,a))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new gi("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(a){this._delayContextMenu?this._contextMenuEvent=a:this._ignoreContextMenu||this._map.fire(new gi(a.type,this._map,a)),this._map.listens("contextmenu")&&a.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class _a{constructor(a){this._map=a}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(a){return this.transform.screenPointToLocation(o.P.convert(a),this._map.terrain)}}class Us{constructor(a,c){this._map=a,this._tr=new _a(a),this._el=a.getCanvasContainer(),this._container=a.getContainer(),this._clickTolerance=c.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(a,c){this.isEnabled()&&a.shiftKey&&a.button===0&&(P.disableDrag(),this._startPos=this._lastPos=c,this._active=!0)}mousemoveWindow(a,c){if(!this._active)return;const _=c;if(this._lastPos.equals(_)||!this._box&&_.dist(this._startPos)<this._clickTolerance)return;const M=this._startPos;this._lastPos=_,this._box||(this._box=P.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",a));const T=Math.min(M.x,_.x),z=Math.max(M.x,_.x),q=Math.min(M.y,_.y),te=Math.max(M.y,_.y);P.setTransform(this._box,`translate(${T}px,${q}px)`),this._box.style.width=z-T+"px",this._box.style.height=te-q+"px"}mouseupWindow(a,c){if(!this._active||a.button!==0)return;const _=this._startPos,M=c;if(this.reset(),P.suppressClick(),_.x!==M.x||_.y!==M.y)return this._map.fire(new o.l("boxzoomend",{originalEvent:a})),{cameraAnimation:T=>T.fitScreenCoordinates(_,M,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",a)}keydown(a){this._active&&a.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",a))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(P.remove(this._box),this._box=null),P.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(a,c){return this._map.fire(new o.l(a,{originalEvent:c}))}}function bs(I,a){if(I.length!==a.length)throw new Error(`The number of touches and points are not equal - touches ${I.length}, points ${a.length}`);const c={};for(let _=0;_<I.length;_++)c[I[_].identifier]=a[_];return c}class Hc{constructor(a){this.reset(),this.numTouches=a.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(a,c,_){(this.centroid||_.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=a.timeStamp),_.length===this.numTouches&&(this.centroid=function(M){const T=new o.P(0,0);for(const z of M)T._add(z);return T.div(M.length)}(c),this.touches=bs(_,c)))}touchmove(a,c,_){if(this.aborted||!this.centroid)return;const M=bs(_,c);for(const T in this.touches){const z=M[T];(!z||z.dist(this.touches[T])>30)&&(this.aborted=!0)}}touchend(a,c,_){if((!this.centroid||a.timeStamp-this.startTime>500)&&(this.aborted=!0),_.length===0){const M=!this.aborted&&this.centroid;if(this.reset(),M)return M}}}class ba{constructor(a){this.singleTap=new Hc(a),this.numTaps=a.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(a,c,_){this.singleTap.touchstart(a,c,_)}touchmove(a,c,_){this.singleTap.touchmove(a,c,_)}touchend(a,c,_){const M=this.singleTap.touchend(a,c,_);if(M){const T=a.timeStamp-this.lastTime<500,z=!this.lastTap||this.lastTap.dist(M)<30;if(T&&z||this.reset(),this.count++,this.lastTime=a.timeStamp,this.lastTap=M,this.count===this.numTaps)return this.reset(),M}}}class il{constructor(a){this._tr=new _a(a),this._zoomIn=new ba({numTouches:1,numTaps:2}),this._zoomOut=new ba({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(a,c,_){this._zoomIn.touchstart(a,c,_),this._zoomOut.touchstart(a,c,_)}touchmove(a,c,_){this._zoomIn.touchmove(a,c,_),this._zoomOut.touchmove(a,c,_)}touchend(a,c,_){const M=this._zoomIn.touchend(a,c,_),T=this._zoomOut.touchend(a,c,_),z=this._tr;return M?(this._active=!0,a.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:q=>q.easeTo({duration:300,zoom:z.zoom+1,around:z.unproject(M)},{originalEvent:a})}):T?(this._active=!0,a.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:q=>q.easeTo({duration:300,zoom:z.zoom-1,around:z.unproject(T)},{originalEvent:a})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class gs{constructor(a){this._enabled=!!a.enable,this._moveStateManager=a.moveStateManager,this._clickTolerance=a.clickTolerance||1,this._moveFunction=a.move,this._activateOnStart=!!a.activateOnStart,a.assignEvents(this),this.reset()}reset(a){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(a)}_move(...a){const c=this._moveFunction(...a);if(c.bearingDelta||c.pitchDelta||c.rollDelta||c.around||c.panDelta)return this._active=!0,c}dragStart(a,c){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(a)&&(this._moveStateManager.startMove(a),this._lastPoint=Array.isArray(c)?c[0]:c,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(a,c){if(!this.isEnabled())return;const _=this._lastPoint;if(!_)return;if(a.preventDefault(),!this._moveStateManager.isValidMoveEvent(a))return void this.reset(a);const M=Array.isArray(c)?c[0]:c;return!this._moved&&M.dist(_)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=M,this._move(_,M))}dragEnd(a){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(a)&&(this._moved&&P.suppressClick(),this.reset(a))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const xr={0:1,2:2};class xa{constructor(a){this._correctEvent=a.checkCorrectEvent}startMove(a){const c=P.mouseButton(a);this._eventButton=c}endMove(a){delete this._eventButton}isValidStartEvent(a){return this._correctEvent(a)}isValidMoveEvent(a){return!function(c,_){const M=xr[_];return c.buttons===void 0||(c.buttons&M)!==M}(a,this._eventButton)}isValidEndEvent(a){return P.mouseButton(a)===this._eventButton}}class Zc{constructor(){this._firstTouch=void 0}_isOneFingerTouch(a){return a.targetTouches.length===1}_isSameTouchEvent(a){return a.targetTouches[0].identifier===this._firstTouch}startMove(a){this._firstTouch=a.targetTouches[0].identifier}endMove(a){delete this._firstTouch}isValidStartEvent(a){return this._isOneFingerTouch(a)}isValidMoveEvent(a){return this._isOneFingerTouch(a)&&this._isSameTouchEvent(a)}isValidEndEvent(a){return this._isOneFingerTouch(a)&&this._isSameTouchEvent(a)}}class nf{constructor(a=new xa({checkCorrectEvent:()=>!0}),c=new Zc){this.mouseMoveStateManager=a,this.oneFingerTouchMoveStateManager=c}_executeRelevantHandler(a,c,_){return a instanceof MouseEvent?c(a):typeof TouchEvent<"u"&&a instanceof TouchEvent?_(a):void 0}startMove(a){this._executeRelevantHandler(a,c=>this.mouseMoveStateManager.startMove(c),c=>this.oneFingerTouchMoveStateManager.startMove(c))}endMove(a){this._executeRelevantHandler(a,c=>this.mouseMoveStateManager.endMove(c),c=>this.oneFingerTouchMoveStateManager.endMove(c))}isValidStartEvent(a){return this._executeRelevantHandler(a,c=>this.mouseMoveStateManager.isValidStartEvent(c),c=>this.oneFingerTouchMoveStateManager.isValidStartEvent(c))}isValidMoveEvent(a){return this._executeRelevantHandler(a,c=>this.mouseMoveStateManager.isValidMoveEvent(c),c=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(c))}isValidEndEvent(a){return this._executeRelevantHandler(a,c=>this.mouseMoveStateManager.isValidEndEvent(c),c=>this.oneFingerTouchMoveStateManager.isValidEndEvent(c))}}const ac=I=>{I.mousedown=I.dragStart,I.mousemoveWindow=I.dragMove,I.mouseup=I.dragEnd,I.contextmenu=a=>{a.preventDefault()}};class yl{constructor(a,c){this._clickTolerance=a.clickTolerance||1,this._map=c,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new o.P(0,0)}_shouldBePrevented(a){return a<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(a,c,_){return this._calculateTransform(a,c,_)}touchmove(a,c,_){if(this._active){if(!this._shouldBePrevented(_.length))return a.preventDefault(),this._calculateTransform(a,c,_);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",a)}}touchend(a,c,_){this._calculateTransform(a,c,_),this._active&&this._shouldBePrevented(_.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(a,c,_){_.length>0&&(this._active=!0);const M=bs(_,c),T=new o.P(0,0),z=new o.P(0,0);let q=0;for(const ae in M){const be=M[ae],ke=this._touches[ae];ke&&(T._add(be),z._add(be.sub(ke)),q++,M[ae]=be)}if(this._touches=M,this._shouldBePrevented(q)||!z.mag())return;const te=z.div(q);return this._sum._add(te),this._sum.mag()<this._clickTolerance?void 0:{around:T.div(q),panDelta:te}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Xd{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(a,c,_){this._firstTwoTouches||_.length<2||(this._firstTwoTouches=[_[0].identifier,_[1].identifier],this._start([c[0],c[1]]))}touchmove(a,c,_){if(!this._firstTwoTouches)return;a.preventDefault();const[M,T]=this._firstTwoTouches,z=Mi(_,c,M),q=Mi(_,c,T);if(!z||!q)return;const te=this._aroundCenter?null:z.add(q).div(2);return this._move([z,q],te,a)}touchend(a,c,_){if(!this._firstTwoTouches)return;const[M,T]=this._firstTwoTouches,z=Mi(_,c,M),q=Mi(_,c,T);z&&q||(this._active&&P.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(a){this._enabled=!0,this._aroundCenter=!!a&&a.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function Mi(I,a,c){for(let _=0;_<I.length;_++)if(I[_].identifier===c)return a[_]}function Md(I,a){return Math.log(I/a)/Math.LN2}class wd extends Xd{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(a){this._startDistance=this._distance=a[0].dist(a[1])}_move(a,c){const _=this._distance;if(this._distance=a[0].dist(a[1]),this._active||!(Math.abs(Md(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Md(this._distance,_),pinchAround:c}}}function $u(I,a){return 180*I.angleWith(a)/Math.PI}class Sc extends Xd{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(a){this._startVector=this._vector=a[0].sub(a[1]),this._minDiameter=a[0].dist(a[1])}_move(a,c,_){const M=this._vector;if(this._vector=a[0].sub(a[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:$u(this._vector,M),pinchAround:c}}_isBelowThreshold(a){this._minDiameter=Math.min(this._minDiameter,a.mag());const c=25/(Math.PI*this._minDiameter)*360,_=$u(a,this._startVector);return Math.abs(_)<c}}function lc(I){return Math.abs(I.y)>Math.abs(I.x)}class Ec extends Xd{constructor(a){super(),this._currentTouchCount=0,this._map=a}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(a,c,_){super.touchstart(a,c,_),this._currentTouchCount=_.length}_start(a){this._lastPoints=a,lc(a[0].sub(a[1]))&&(this._valid=!1)}_move(a,c,_){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const M=a[0].sub(this._lastPoints[0]),T=a[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(M,T,_.timeStamp),this._valid?(this._lastPoints=a,this._active=!0,{pitchDelta:(M.y+T.y)/2*-.5}):void 0}gestureBeginsVertically(a,c,_){if(this._valid!==void 0)return this._valid;const M=a.mag()>=2,T=c.mag()>=2;if(!M&&!T)return;if(!M||!T)return this._firstMove===void 0&&(this._firstMove=_),_-this._firstMove<100&&void 0;const z=a.y>0==c.y>0;return lc(a)&&lc(c)&&z}}const ds={panStep:100,bearingStep:15,pitchStep:10};class So{constructor(a){this._tr=new _a(a);const c=ds;this._panStep=c.panStep,this._bearingStep=c.bearingStep,this._pitchStep=c.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(a){if(a.altKey||a.ctrlKey||a.metaKey)return;let c=0,_=0,M=0,T=0,z=0;switch(a.keyCode){case 61:case 107:case 171:case 187:c=1;break;case 189:case 109:case 173:c=-1;break;case 37:a.shiftKey?_=-1:(a.preventDefault(),T=-1);break;case 39:a.shiftKey?_=1:(a.preventDefault(),T=1);break;case 38:a.shiftKey?M=1:(a.preventDefault(),z=-1);break;case 40:a.shiftKey?M=-1:(a.preventDefault(),z=1);break;default:return}return this._rotationDisabled&&(_=0,M=0),{cameraAnimation:q=>{const te=this._tr;q.easeTo({duration:300,easeId:"keyboardHandler",easing:_u,zoom:c?Math.round(te.zoom)+c*(a.shiftKey?2:1):te.zoom,bearing:te.bearing+_*this._bearingStep,pitch:te.pitch+M*this._pitchStep,offset:[-T*this._panStep,-z*this._panStep],center:te.center},{originalEvent:a})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function _u(I){return I*(2-I)}const Ma=4.000244140625;class Ra{constructor(a,c){this._onTimeout=_=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(_)},this._map=a,this._tr=new _a(a),this._triggerRenderFrame=c,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(a){this._defaultZoomRate=a}setWheelZoomRate(a){this._wheelZoomRate=a}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(a){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!a&&a.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(a){return!!this._map.cooperativeGestures.isEnabled()&&!(a.ctrlKey||this._map.cooperativeGestures.isBypassed(a))}wheel(a){if(!this.isEnabled())return;if(this._shouldBePrevented(a))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",a);let c=a.deltaMode===WheelEvent.DOM_DELTA_LINE?40*a.deltaY:a.deltaY;const _=O.now(),M=_-(this._lastWheelEventTime||0);this._lastWheelEventTime=_,c!==0&&c%Ma==0?this._type="wheel":c!==0&&Math.abs(c)<4?this._type="trackpad":M>400?(this._type=null,this._lastValue=c,this._timeout=setTimeout(this._onTimeout,40,a)):this._type||(this._type=Math.abs(M*c)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,c+=this._lastValue)),a.shiftKey&&c&&(c/=4),this._type&&(this._lastWheelEvent=a,this._delta-=c,this._active||this._start(a)),a.preventDefault()}_start(a){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const c=P.mousePos(this._map.getCanvas(),a),_=this._tr;this._aroundPoint=this._aroundCenter?_.transform.locationToScreenPoint(o.Q.convert(_.center)):c,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const a=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const q=a.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=q),typeof this._targetZoom=="number"&&(this._targetZoom+=q)}if(this._delta!==0){const q=this._type==="wheel"&&Math.abs(this._delta)>Ma?this._wheelZoomRate:this._defaultZoomRate;let te=2/(1+Math.exp(-Math.abs(this._delta*q)));this._delta<0&&te!==0&&(te=1/te);const ae=typeof this._targetZoom!="number"?a.scale:o.aH(this._targetZoom);this._targetZoom=Math.min(a.maxZoom,Math.max(a.minZoom,o.aa(ae*te))),this._type==="wheel"&&(this._startZoom=a.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const c=typeof this._targetZoom!="number"?a.zoom:this._targetZoom,_=this._startZoom,M=this._easing;let T,z=!1;if(this._type==="wheel"&&_&&M){const q=O.now()-this._lastWheelEventTime,te=Math.min((q+5)/200,1),ae=M(te);T=o.B.number(_,c,ae),te<1?this._frameId||(this._frameId=!0):z=!0}else T=c,z=!0;return this._active=!0,z&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout},200)),this._lastExpectedZoom=T,{noInertia:!0,needsRenderFrame:!z,zoomDelta:T-a.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(a){let c=o.ca;if(this._prevEase){const _=this._prevEase,M=(O.now()-_.start)/_.duration,T=_.easing(M+.01)-_.easing(M),z=.27/Math.sqrt(T*T+1e-4)*.01,q=Math.sqrt(.0729-z*z);c=o.c8(z,q,.25,1)}return this._prevEase={start:O.now(),duration:a,easing:c},c}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Bc{constructor(a,c){this._clickZoom=a,this._tapZoom=c}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class ol{constructor(a){this._tr=new _a(a),this.reset()}reset(){this._active=!1}dblclick(a,c){return a.preventDefault(),{cameraAnimation:_=>{_.easeTo({duration:300,zoom:this._tr.zoom+(a.shiftKey?-1:1),around:this._tr.unproject(c)},{originalEvent:a})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Uo{constructor(){this._tap=new ba({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(a,c,_){if(!this._swipePoint)if(this._tapTime){const M=c[0],T=a.timeStamp-this._tapTime<500,z=this._tapPoint.dist(M)<30;T&&z?_.length>0&&(this._swipePoint=M,this._swipeTouch=_[0].identifier):this.reset()}else this._tap.touchstart(a,c,_)}touchmove(a,c,_){if(this._tapTime){if(this._swipePoint){if(_[0].identifier!==this._swipeTouch)return;const M=c[0],T=M.y-this._swipePoint.y;return this._swipePoint=M,a.preventDefault(),this._active=!0,{zoomDelta:T/128}}}else this._tap.touchmove(a,c,_)}touchend(a,c,_){if(this._tapTime)this._swipePoint&&_.length===0&&this.reset();else{const M=this._tap.touchend(a,c,_);M&&(this._tapTime=a.timeStamp,this._tapPoint=M)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class PA{constructor(a,c,_){this._el=a,this._mousePan=c,this._touchPan=_}enable(a){this._inertiaOptions=a||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Sd{constructor(a,c,_,M){this._pitchWithRotate=a.pitchWithRotate,this._rollEnabled=a.rollEnabled,this._mouseRotate=c,this._mousePitch=_,this._mouseRoll=M}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class KA{constructor(a,c,_,M){this._el=a,this._touchZoom=c,this._touchRotate=_,this._tapDragZoom=M,this._rotationDisabled=!1,this._enabled=!0}enable(a){this._touchZoom.enable(a),this._rotationDisabled||this._touchRotate.enable(a),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class uc{constructor(a,c){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=a,this._options=c,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const a=this._map.getCanvasContainer();a.classList.add("maplibregl-cooperative-gestures"),this._container=P.create("div","maplibregl-cooperative-gesture-screen",a);let c=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(c=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const _=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),M=document.createElement("div");M.className="maplibregl-desktop-message",M.textContent=c,this._container.appendChild(M);const T=document.createElement("div");T.className="maplibregl-mobile-message",T.textContent=_,this._container.appendChild(T),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(P.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(a){return a[this._bypassKey]}notifyGestureBlocked(a,c){this._enabled&&(this._map.fire(new o.l("cooperativegestureprevented",{gestureType:a,originalEvent:c})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const da=I=>I.zoom||I.drag||I.roll||I.pitch||I.rotate;class Da extends o.l{}function Eo(I){return I.panDelta&&I.panDelta.mag()||I.zoomDelta||I.bearingDelta||I.pitchDelta||I.rollDelta}class ru{constructor(a,c){this.handleWindowEvent=M=>{this.handleEvent(M,`${M.type}Window`)},this.handleEvent=(M,T)=>{if(M.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const z=M.type==="renderFrame"?void 0:M,q={needsRenderFrame:!1},te={},ae={},be=M.touches,ke=be?this._getMapTouches(be):void 0,Te=ke?P.touchPos(this._map.getCanvas(),ke):P.mousePos(this._map.getCanvas(),M);for(const{handlerName:mt,handler:ut,allowed:ft}of this._handlers){if(!ut.isEnabled())continue;let vt;this._blockedByActive(ae,ft,mt)?ut.reset():ut[T||M.type]&&(vt=ut[T||M.type](M,Te,ke),this.mergeHandlerResult(q,te,vt,mt,z),vt&&vt.needsRenderFrame&&this._triggerRenderFrame()),(vt||ut.isActive())&&(ae[mt]=ut)}const $e={};for(const mt in this._previousActiveHandlers)ae[mt]||($e[mt]=z);this._previousActiveHandlers=ae,(Object.keys($e).length||Eo(q))&&(this._changes.push([q,te,$e]),this._triggerRenderFrame()),(Object.keys(ae).length||Eo(q))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Xe}=q;Xe&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Xe(this._map))},this._map=a,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new ot(a),this._bearingSnap=c.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(c);const _=this._el;this._listeners=[[_,"touchstart",{passive:!0}],[_,"touchmove",{passive:!1}],[_,"touchend",void 0],[_,"touchcancel",void 0],[_,"mousedown",void 0],[_,"mousemove",void 0],[_,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[_,"mouseover",void 0],[_,"mouseout",void 0],[_,"dblclick",void 0],[_,"click",void 0],[_,"keydown",{capture:!1}],[_,"keyup",void 0],[_,"wheel",{passive:!1}],[_,"contextmenu",void 0],[window,"blur",void 0]];for(const[M,T,z]of this._listeners)P.addEventListener(M,T,M===document?this.handleWindowEvent:this.handleEvent,z)}destroy(){for(const[a,c,_]of this._listeners)P.removeEventListener(a,c,a===document?this.handleWindowEvent:this.handleEvent,_)}_addDefaultHandlers(a){const c=this._map,_=c.getCanvasContainer();this._add("mapEvent",new zl(c,a));const M=c.boxZoom=new Us(c,a);this._add("boxZoom",M),a.interactive&&a.boxZoom&&M.enable();const T=c.cooperativeGestures=new uc(c,a.cooperativeGestures);this._add("cooperativeGestures",T),a.cooperativeGestures&&T.enable();const z=new il(c),q=new ol(c);c.doubleClickZoom=new Bc(q,z),this._add("tapZoom",z),this._add("clickZoom",q),a.interactive&&a.doubleClickZoom&&c.doubleClickZoom.enable();const te=new Uo;this._add("tapDragZoom",te);const ae=c.touchPitch=new Ec(c);this._add("touchPitch",ae),a.interactive&&a.touchPitch&&c.touchPitch.enable(a.touchPitch);const be=()=>c.project(c.getCenter()),ke=function({enable:kt,clickTolerance:Rt,aroundCenter:Ut=!0,minPixelCenterThreshold:It=100,rotateDegreesPerPixelMoved:rn=.8},Zt){const Mn=new xa({checkCorrectEvent:En=>P.mouseButton(En)===0&&En.ctrlKey||P.mouseButton(En)===2&&!En.ctrlKey});return new gs({clickTolerance:Rt,move:(En,bn)=>{const On=Zt();if(Ut&&Math.abs(On.y-En.y)>It)return{bearingDelta:o.c9(new o.P(En.x,bn.y),bn,On)};let zn=(bn.x-En.x)*rn;return Ut&&bn.y<On.y&&(zn=-zn),{bearingDelta:zn}},moveStateManager:Mn,enable:kt,assignEvents:ac})}(a,be),Te=function({enable:kt,clickTolerance:Rt,pitchDegreesPerPixelMoved:Ut=-.5}){const It=new xa({checkCorrectEvent:rn=>P.mouseButton(rn)===0&&rn.ctrlKey||P.mouseButton(rn)===2});return new gs({clickTolerance:Rt,move:(rn,Zt)=>({pitchDelta:(Zt.y-rn.y)*Ut}),moveStateManager:It,enable:kt,assignEvents:ac})}(a),$e=function({enable:kt,clickTolerance:Rt,rollDegreesPerPixelMoved:Ut=.3},It){const rn=new xa({checkCorrectEvent:Zt=>P.mouseButton(Zt)===2&&Zt.ctrlKey});return new gs({clickTolerance:Rt,move:(Zt,Mn)=>{const En=It();let bn=(Mn.x-Zt.x)*Ut;return Mn.y<En.y&&(bn=-bn),{rollDelta:bn}},moveStateManager:rn,enable:kt,assignEvents:ac})}(a,be);c.dragRotate=new Sd(a,ke,Te,$e),this._add("mouseRotate",ke,["mousePitch"]),this._add("mousePitch",Te,["mouseRotate","mouseRoll"]),this._add("mouseRoll",$e,["mousePitch"]),a.interactive&&a.dragRotate&&c.dragRotate.enable();const Xe=function({enable:kt,clickTolerance:Rt}){const Ut=new xa({checkCorrectEvent:It=>P.mouseButton(It)===0&&!It.ctrlKey});return new gs({clickTolerance:Rt,move:(It,rn)=>({around:rn,panDelta:rn.sub(It)}),activateOnStart:!0,moveStateManager:Ut,enable:kt,assignEvents:ac})}(a),mt=new yl(a,c);c.dragPan=new PA(_,Xe,mt),this._add("mousePan",Xe),this._add("touchPan",mt,["touchZoom","touchRotate"]),a.interactive&&a.dragPan&&c.dragPan.enable(a.dragPan);const ut=new Sc,ft=new wd;c.touchZoomRotate=new KA(_,ft,ut,te),this._add("touchRotate",ut,["touchPan","touchZoom"]),this._add("touchZoom",ft,["touchPan","touchRotate"]),a.interactive&&a.touchZoomRotate&&c.touchZoomRotate.enable(a.touchZoomRotate);const vt=c.scrollZoom=new Ra(c,()=>this._triggerRenderFrame());this._add("scrollZoom",vt,["mousePan"]),a.interactive&&a.scrollZoom&&c.scrollZoom.enable(a.scrollZoom);const Et=c.keyboard=new So(c);this._add("keyboard",Et),a.interactive&&a.keyboard&&c.keyboard.enable(),this._add("blockableMapEvent",new TA(c))}_add(a,c,_){this._handlers.push({handlerName:a,handler:c,allowed:_}),this._handlersById[a]=c}stop(a){if(!this._updatingCamera){for(const{handler:c}of this._handlers)c.reset();this._inertia.clear(),this._fireEvents({},{},a),this._changes=[]}}isActive(){for(const{handler:a}of this._handlers)if(a.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!da(this._eventsInProgress)||this.isZooming()}_blockedByActive(a,c,_){for(const M in a)if(M!==_&&(!c||c.indexOf(M)<0))return!0;return!1}_getMapTouches(a){const c=[];for(const _ of a)this._el.contains(_.target)&&c.push(_);return c}mergeHandlerResult(a,c,_,M,T){if(!_)return;o.e(a,_);const z={handlerName:M,originalEvent:_.originalEvent||T};_.zoomDelta!==void 0&&(c.zoom=z),_.panDelta!==void 0&&(c.drag=z),_.rollDelta!==void 0&&(c.roll=z),_.pitchDelta!==void 0&&(c.pitch=z),_.bearingDelta!==void 0&&(c.rotate=z)}_applyChanges(){const a={},c={},_={};for(const[M,T,z]of this._changes)M.panDelta&&(a.panDelta=(a.panDelta||new o.P(0,0))._add(M.panDelta)),M.zoomDelta&&(a.zoomDelta=(a.zoomDelta||0)+M.zoomDelta),M.bearingDelta&&(a.bearingDelta=(a.bearingDelta||0)+M.bearingDelta),M.pitchDelta&&(a.pitchDelta=(a.pitchDelta||0)+M.pitchDelta),M.rollDelta&&(a.rollDelta=(a.rollDelta||0)+M.rollDelta),M.around!==void 0&&(a.around=M.around),M.pinchAround!==void 0&&(a.pinchAround=M.pinchAround),M.noInertia&&(a.noInertia=M.noInertia),o.e(c,T),o.e(_,z);this._updateMapTransform(a,c,_),this._changes=[]}_updateMapTransform(a,c,_){const M=this._map,T=M._getTransformForUpdate(),z=M.terrain;if(!(Eo(a)||z&&this._terrainMovement))return this._fireEvents(c,_,!0);M._stop(!0);let{panDelta:q,zoomDelta:te,bearingDelta:ae,pitchDelta:be,rollDelta:ke,around:Te,pinchAround:$e}=a;$e!==void 0&&(Te=$e),Te=Te||M.transform.centerPoint,z&&!T.isPointOnMapSurface(Te)&&(Te=T.centerPoint);const Xe={panDelta:q,zoomDelta:te,rollDelta:ke,pitchDelta:be,bearingDelta:ae,around:Te};this._map.cameraHelper.useGlobeControls&&!T.isPointOnMapSurface(Te)&&(Te=T.centerPoint);const mt=Te.distSqr(T.centerPoint)<.01?T.center:T.screenPointToLocation(q?Te.sub(q):Te);z?(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(Xe,T),this._terrainMovement||!c.drag&&!c.zoom?c.drag&&this._terrainMovement?T.setCenter(T.screenPointToLocation(T.centerPoint.sub(q))):this._map.cameraHelper.handleMapControlsPan(Xe,T,mt):(this._terrainMovement=!0,this._map._elevationFreeze=!0,this._map.cameraHelper.handleMapControlsPan(Xe,T,mt))):(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(Xe,T),this._map.cameraHelper.handleMapControlsPan(Xe,T,mt)),M._applyUpdatedTransform(T),this._map._update(),a.noInertia||this._inertia.record(a),this._fireEvents(c,_,!0)}_fireEvents(a,c,_){const M=da(this._eventsInProgress),T=da(a),z={};for(const ke in a){const{originalEvent:Te}=a[ke];this._eventsInProgress[ke]||(z[`${ke}start`]=Te),this._eventsInProgress[ke]=a[ke]}!M&&T&&this._fireEvent("movestart",T.originalEvent);for(const ke in z)this._fireEvent(ke,z[ke]);T&&this._fireEvent("move",T.originalEvent);for(const ke in a){const{originalEvent:Te}=a[ke];this._fireEvent(ke,Te)}const q={};let te;for(const ke in this._eventsInProgress){const{handlerName:Te,originalEvent:$e}=this._eventsInProgress[ke];this._handlersById[Te].isActive()||(delete this._eventsInProgress[ke],te=c[Te]||$e,q[`${ke}end`]=te)}for(const ke in q)this._fireEvent(ke,q[ke]);const ae=da(this._eventsInProgress),be=(M||T)&&!ae;if(be&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const ke=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&ke.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(ke)}if(_&&be){this._updatingCamera=!0;const ke=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Te=$e=>$e!==0&&-this._bearingSnap<$e&&$e<this._bearingSnap;!ke||!ke.essential&&O.prefersReducedMotion?(this._map.fire(new o.l("moveend",{originalEvent:te})),Te(this._map.getBearing())&&this._map.resetNorth()):(Te(ke.bearing||this._map.getBearing())&&(ke.bearing=0),ke.freezeElevation=!0,this._map.easeTo(ke,{originalEvent:te})),this._updatingCamera=!1}}_fireEvent(a,c){this._map.fire(new o.l(a,c?{originalEvent:c}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(a=>{delete this._frameId,this.handleEvent(new Da("renderFrame",{timeStamp:a})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Kr extends o.E{constructor(a,c,_){super(),this._renderFrameCallback=()=>{const M=Math.min((O.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(M)),M<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=a,this._bearingSnap=_.bearingSnap,this.cameraHelper=c,this.on("moveend",()=>{delete this._requestedCameraState})}migrateProjection(a,c){a.apply(this.transform),this.transform=a,this.cameraHelper=c}getCenter(){return new o.Q(this.transform.center.lng,this.transform.center.lat)}setCenter(a,c){return this.jumpTo({center:a},c)}getCenterElevation(){return this.transform.elevation}setCenterElevation(a,c){return this.jumpTo({elevation:a},c),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(a){this._centerClampedToGround=a}panBy(a,c,_){return a=o.P.convert(a).mult(-1),this.panTo(this.transform.center,o.e({offset:a},c),_)}panTo(a,c,_){return this.easeTo(o.e({center:a},c),_)}getZoom(){return this.transform.zoom}setZoom(a,c){return this.jumpTo({zoom:a},c),this}zoomTo(a,c,_){return this.easeTo(o.e({zoom:a},c),_)}zoomIn(a,c){return this.zoomTo(this.getZoom()+1,a,c),this}zoomOut(a,c){return this.zoomTo(this.getZoom()-1,a,c),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(a,c){return a!=this.transform.fov&&(this.transform.setFov(a),this.fire(new o.l("movestart",c)).fire(new o.l("move",c)).fire(new o.l("moveend",c))),this}getBearing(){return this.transform.bearing}setBearing(a,c){return this.jumpTo({bearing:a},c),this}getPadding(){return this.transform.padding}setPadding(a,c){return this.jumpTo({padding:a},c),this}rotateTo(a,c,_){return this.easeTo(o.e({bearing:a},c),_)}resetNorth(a,c){return this.rotateTo(0,o.e({duration:1e3},a),c),this}resetNorthPitch(a,c){return this.easeTo(o.e({bearing:0,pitch:0,roll:0,duration:1e3},a),c),this}snapToNorth(a,c){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(a,c):this}getPitch(){return this.transform.pitch}setPitch(a,c){return this.jumpTo({pitch:a},c),this}getRoll(){return this.transform.roll}setRoll(a,c){return this.jumpTo({roll:a},c),this}cameraForBounds(a,c){a=Lt.convert(a).adjustAntiMeridian();const _=c&&c.bearing||0;return this._cameraForBoxAndBearing(a.getNorthWest(),a.getSouthEast(),_,c)}_cameraForBoxAndBearing(a,c,_,M){const T={top:0,bottom:0,right:0,left:0};if(typeof(M=o.e({padding:T,offset:[0,0],maxZoom:this.transform.maxZoom},M)).padding=="number"){const ae=M.padding;M.padding={top:ae,bottom:ae,right:ae,left:ae}}const z=o.e(T,M.padding);M.padding=z;const q=this.transform,te=new Lt(a,c);return this.cameraHelper.cameraForBoxAndBearing(M,z,te,_,q)}fitBounds(a,c,_){return this._fitInternal(this.cameraForBounds(a,c),c,_)}fitScreenCoordinates(a,c,_,M,T){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(o.P.convert(a)),this.transform.screenPointToLocation(o.P.convert(c)),_,M),M,T)}_fitInternal(a,c,_){return a?(delete(c=o.e(a,c)).padding,c.linear?this.easeTo(c,_):this.flyTo(c,_)):this}jumpTo(a,c){this.stop();const _=this._getTransformForUpdate();let M=!1,T=!1,z=!1;const q=_.zoom;this.cameraHelper.handleJumpToCenterZoom(_,a);const te=_.zoom!==q;return"elevation"in a&&_.elevation!==+a.elevation&&_.setElevation(+a.elevation),"bearing"in a&&_.bearing!==+a.bearing&&(M=!0,_.setBearing(+a.bearing)),"pitch"in a&&_.pitch!==+a.pitch&&(T=!0,_.setPitch(+a.pitch)),"roll"in a&&_.roll!==+a.roll&&(z=!0,_.setRoll(+a.roll)),a.padding==null||_.isPaddingEqual(a.padding)||_.setPadding(a.padding),this._applyUpdatedTransform(_),this.fire(new o.l("movestart",c)).fire(new o.l("move",c)),te&&this.fire(new o.l("zoomstart",c)).fire(new o.l("zoom",c)).fire(new o.l("zoomend",c)),M&&this.fire(new o.l("rotatestart",c)).fire(new o.l("rotate",c)).fire(new o.l("rotateend",c)),T&&this.fire(new o.l("pitchstart",c)).fire(new o.l("pitch",c)).fire(new o.l("pitchend",c)),z&&this.fire(new o.l("rollstart",c)).fire(new o.l("roll",c)).fire(new o.l("rollend",c)),this.fire(new o.l("moveend",c))}calculateCameraOptionsFromTo(a,c,_,M=0){const T=o.$.fromLngLat(a,c),z=o.$.fromLngLat(_,M),q=z.x-T.x,te=z.y-T.y,ae=z.z-T.z,be=Math.hypot(q,te,ae);if(be===0)throw new Error("Can't calculate camera options with same From and To");const ke=Math.hypot(q,te),Te=o.aa(this.transform.cameraToCenterDistance/be/this.transform.tileSize),$e=180*Math.atan2(q,-te)/Math.PI;let Xe=180*Math.acos(ke/be)/Math.PI;return Xe=ae<0?90-Xe:90+Xe,{center:z.toLngLat(),elevation:M,zoom:Te,pitch:Xe,bearing:$e}}calculateCameraOptionsFromCameraLngLatAltRotation(a,c,_,M,T){const z=this.transform.calculateCenterFromCameraLngLatAlt(a,c,_,M);return{center:z.center,elevation:z.elevation,zoom:z.zoom,bearing:_,pitch:M,roll:T}}easeTo(a,c){this._stop(!1,a.easeId),((a=o.e({offset:[0,0],duration:500,easing:o.ca},a)).animate===!1||!a.essential&&O.prefersReducedMotion)&&(a.duration=0);const _=this._getTransformForUpdate(),M=this.getBearing(),T=_.pitch,z=_.roll,q="bearing"in a?this._normalizeBearing(a.bearing,M):M,te="pitch"in a?+a.pitch:T,ae="roll"in a?this._normalizeBearing(a.roll,z):z,be="padding"in a?a.padding:_.padding,ke=o.P.convert(a.offset);let Te,$e;a.around&&(Te=o.Q.convert(a.around),$e=_.locationToScreenPoint(Te));const Xe={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},mt=this.cameraHelper.handleEaseTo(_,{bearing:q,pitch:te,roll:ae,padding:be,around:Te,aroundPoint:$e,offsetAsPoint:ke,offset:a.offset,zoom:a.zoom,center:a.center});return this._rotating=this._rotating||M!==q,this._pitching=this._pitching||te!==T,this._rolling=this._rolling||ae!==z,this._padding=!_.isPaddingEqual(be),this._zooming=this._zooming||mt.isZooming,this._easeId=a.easeId,this._prepareEase(c,a.noMoveStart,Xe),this.terrain&&this._prepareElevation(mt.elevationCenter),this._ease(ut=>{mt.easeFunc(ut),this.terrain&&!a.freezeElevation&&this._updateElevation(ut),this._applyUpdatedTransform(_),this._fireMoveEvents(c)},ut=>{this.terrain&&a.freezeElevation&&this._finalizeElevation(),this._afterEase(c,ut)},a),this}_prepareEase(a,c,_={}){this._moving=!0,c||_.moving||this.fire(new o.l("movestart",a)),this._zooming&&!_.zooming&&this.fire(new o.l("zoomstart",a)),this._rotating&&!_.rotating&&this.fire(new o.l("rotatestart",a)),this._pitching&&!_.pitching&&this.fire(new o.l("pitchstart",a)),this._rolling&&!_.rolling&&this.fire(new o.l("rollstart",a))}_prepareElevation(a){this._elevationCenter=a,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(a,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(a){this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const c=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(a<1&&c!==this._elevationTarget){const _=this._elevationTarget-this._elevationStart;this._elevationStart+=a*(_-(c-(_*a+this._elevationStart))/(1-a)),this._elevationTarget=c}this.transform.setElevation(o.B.number(this._elevationStart,this._elevationTarget,a))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(a){if(!this.terrain&&a.elevation>=0&&a.pitch<=90)return{};const c=a.getCameraLngLat(),_=a.getCameraAltitude(),M=this.terrain?this.terrain.getElevationForLngLatZoom(c,a.zoom):0;if(_<M){const T=this.calculateCameraOptionsFromTo(c,M,a.center,a.elevation);return{pitch:T.pitch,zoom:T.zoom}}return{}}_applyUpdatedTransform(a){const c=[];if(c.push(M=>this._elevateCameraIfInsideTerrain(M)),this.transformCameraUpdate&&c.push(M=>this.transformCameraUpdate(M)),!c.length)return;const _=a.clone();for(const M of c){const T=_.clone(),{center:z,zoom:q,roll:te,pitch:ae,bearing:be,elevation:ke}=M(T);z&&T.setCenter(z),ke!==void 0&&T.setElevation(ke),q!==void 0&&T.setZoom(q),te!==void 0&&T.setRoll(te),ae!==void 0&&T.setPitch(ae),be!==void 0&&T.setBearing(be),_.apply(T)}this.transform.apply(_)}_fireMoveEvents(a){this.fire(new o.l("move",a)),this._zooming&&this.fire(new o.l("zoom",a)),this._rotating&&this.fire(new o.l("rotate",a)),this._pitching&&this.fire(new o.l("pitch",a)),this._rolling&&this.fire(new o.l("roll",a))}_afterEase(a,c){if(this._easeId&&c&&this._easeId===c)return;delete this._easeId;const _=this._zooming,M=this._rotating,T=this._pitching,z=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,_&&this.fire(new o.l("zoomend",a)),M&&this.fire(new o.l("rotateend",a)),T&&this.fire(new o.l("pitchend",a)),z&&this.fire(new o.l("rollend",a)),this.fire(new o.l("moveend",a))}flyTo(a,c){if(!a.essential&&O.prefersReducedMotion){const bn=o.O(a,["center","zoom","bearing","pitch","roll","elevation"]);return this.jumpTo(bn,c)}this.stop(),a=o.e({offset:[0,0],speed:1.2,curve:1.42,easing:o.ca},a);const _=this._getTransformForUpdate(),M=_.bearing,T=_.pitch,z=_.roll,q=_.padding,te="bearing"in a?this._normalizeBearing(a.bearing,M):M,ae="pitch"in a?+a.pitch:T,be="roll"in a?this._normalizeBearing(a.roll,z):z,ke="padding"in a?a.padding:_.padding,Te=o.P.convert(a.offset);let $e=_.centerPoint.add(Te);const Xe=_.screenPointToLocation($e),mt=this.cameraHelper.handleFlyTo(_,{bearing:te,pitch:ae,roll:be,padding:ke,locationAtOffset:Xe,offsetAsPoint:Te,center:a.center,minZoom:a.minZoom,zoom:a.zoom});let ut=a.curve;const ft=Math.max(_.width,_.height),vt=ft/mt.scaleOfZoom,Et=mt.pixelPathLength;typeof mt.scaleOfMinZoom=="number"&&(ut=Math.sqrt(ft/mt.scaleOfMinZoom/Et*2));const kt=ut*ut;function Rt(bn){const On=(vt*vt-ft*ft+(bn?-1:1)*kt*kt*Et*Et)/(2*(bn?vt:ft)*kt*Et);return Math.log(Math.sqrt(On*On+1)-On)}function Ut(bn){return(Math.exp(bn)-Math.exp(-bn))/2}function It(bn){return(Math.exp(bn)+Math.exp(-bn))/2}const rn=Rt(!1);let Zt=function(bn){return It(rn)/It(rn+ut*bn)},Mn=function(bn){return ft*((It(rn)*(Ut(On=rn+ut*bn)/It(On))-Ut(rn))/kt)/Et;var On},En=(Rt(!0)-rn)/ut;if(Math.abs(Et)<2e-6||!isFinite(En)){if(Math.abs(ft-vt)<1e-6)return this.easeTo(a,c);const bn=vt<ft?-1:1;En=Math.abs(Math.log(vt/ft))/ut,Mn=()=>0,Zt=On=>Math.exp(bn*ut*On)}return a.duration="duration"in a?+a.duration:1e3*En/("screenSpeed"in a?+a.screenSpeed/ut:+a.speed),a.maxDuration&&a.duration>a.maxDuration&&(a.duration=0),this._zooming=!0,this._rotating=M!==te,this._pitching=ae!==T,this._rolling=be!==z,this._padding=!_.isPaddingEqual(ke),this._prepareEase(c,!1),this.terrain&&this._prepareElevation(mt.targetCenter),this._ease(bn=>{const On=bn*En,zn=1/Zt(On),Ln=Mn(On);this._rotating&&_.setBearing(o.B.number(M,te,bn)),this._pitching&&_.setPitch(o.B.number(T,ae,bn)),this._rolling&&_.setRoll(o.B.number(z,be,bn)),this._padding&&(_.interpolatePadding(q,ke,bn),$e=_.centerPoint.add(Te)),mt.easeFunc(bn,zn,Ln,$e),this.terrain&&!a.freezeElevation&&this._updateElevation(bn),this._applyUpdatedTransform(_),this._fireMoveEvents(c)},()=>{this.terrain&&a.freezeElevation&&this._finalizeElevation(),this._afterEase(c)},a),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(a,c){var _;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const M=this._onEaseEnd;delete this._onEaseEnd,M.call(this,c)}return a||(_=this.handlers)===null||_===void 0||_.stop(!1),this}_ease(a,c,_){_.animate===!1||_.duration===0?(a(1),c()):(this._easeStart=O.now(),this._easeOptions=_,this._onEaseFrame=a,this._onEaseEnd=c,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(a,c){a=o.aK(a,-180,180);const _=Math.abs(a-c);return Math.abs(a-360-c)<_&&(a-=360),Math.abs(a+360-c)<_&&(a+=360),a}queryTerrainElevation(a){return this.terrain?this.terrain.getElevationForLngLatZoom(o.Q.convert(a),this.transform.tileZoom):null}}const ei={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class iu{constructor(a=ei){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=c=>{!c||c.sourceDataType!=="metadata"&&c.sourceDataType!=="visibility"&&c.dataType!=="style"&&c.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=a}getDefaultPosition(){return"bottom-right"}onAdd(a){return this._map=a,this._compact=this.options.compact,this._container=P.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=P.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=P.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){P.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._sanitizedAttributionHTML=void 0}_setElementTitle(a,c){const _=this._map._getUIString(`AttributionControl.${c}`);a.title=_,a.setAttribute("aria-label",_)}_updateAttributions(){if(!this._map.style)return;let a=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?a=a.concat(this.options.customAttribution.map(M=>typeof M!="string"?"":M)):typeof this.options.customAttribution=="string"&&a.push(this.options.customAttribution)),this._map.style.stylesheet){const M=this._map.style.stylesheet;this.styleOwner=M.owner,this.styleId=M.id}const c=this._map.style.sourceCaches;for(const M in c){const T=c[M];if(T.used||T.usedForTerrain){const z=T.getSource();z.attribution&&a.indexOf(z.attribution)<0&&a.push(z.attribution)}}a=a.filter(M=>String(M).trim()),a.sort((M,T)=>M.length-T.length),a=a.filter((M,T)=>{for(let z=T+1;z<a.length;z++)if(a[z].indexOf(M)>=0)return!1;return!0});const _=a.join(" | ");_!==this._sanitizedAttributionHTML&&(this._sanitizedAttributionHTML=P.sanitize(_),a.length?(this._innerContainer.innerHTML=this._sanitizedAttributionHTML,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class vl{constructor(a={}){this._updateCompact=()=>{const c=this._container.children;if(c.length){const _=c[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&_.classList.add("maplibregl-compact"):_.classList.remove("maplibregl-compact")}},this.options=a}getDefaultPosition(){return"bottom-left"}onAdd(a){this._map=a,this._compact=this.options&&this.options.compact,this._container=P.create("div","maplibregl-ctrl");const c=P.create("a","maplibregl-ctrl-logo");return c.target="_blank",c.rel="noopener nofollow",c.href="https://maplibre.org/",c.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),c.setAttribute("rel","noopener nofollow"),this._container.appendChild(c),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){P.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class rf{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(a){const c=++this._id;return this._queue.push({callback:a,id:c,cancelled:!1}),c}remove(a){const c=this._currentlyRunning,_=c?this._queue.concat(c):this._queue;for(const M of _)if(M.id===a)return void(M.cancelled=!0)}run(a=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const c=this._currentlyRunning=this._queue;this._queue=[];for(const _ of c)if(!_.cancelled&&(_.callback(a),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var sl=o.aC([{name:"a_pos3d",type:"Int16",components:3}]);class of extends o.E{constructor(a){super(),this._lastTilesetChange=O.now(),this.sourceCache=a,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=a._source.tileSize*2**this.deltaZoom,a.usedForTerrain=!0,a.tileSize=this.tileSize}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(a,c){this.sourceCache.update(a,c),this._renderableTilesKeys=[];const _={};for(const M of Ve(a,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:c,calculateTileZoom:this.sourceCache._source.calculateTileZoom}))_[M.key]=!0,this._renderableTilesKeys.push(M.key),this._tiles[M.key]||(M.terrainRttPosMatrix32f=new Float64Array(16),o.bN(M.terrainRttPosMatrix32f,0,o.Z,o.Z,0,0,1),this._tiles[M.key]=new pe(M,this.tileSize),this._lastTilesetChange=O.now());for(const M in this._tiles)_[M]||delete this._tiles[M]}freeRtt(a){for(const c in this._tiles){const _=this._tiles[c];(!a||_.tileID.equals(a)||_.tileID.isChildOf(a)||a.isChildOf(_.tileID))&&(_.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(a=>this.getTileByID(a))}getTileByID(a){return this._tiles[a]}getTerrainCoords(a){const c={};for(const _ of this._renderableTilesKeys){const M=this._tiles[_].tileID,T=a.clone(),z=o.b1();if(M.canonical.equals(a.canonical))o.bN(z,0,o.Z,o.Z,0,0,1);else if(M.canonical.isChildOf(a.canonical)){const q=M.canonical.z-a.canonical.z,te=M.canonical.x-(M.canonical.x>>q<<q),ae=M.canonical.y-(M.canonical.y>>q<<q),be=o.Z>>q;o.bN(z,0,be,be,0,0,1),o.L(z,z,[-te*be,-ae*be,0])}else{if(!a.canonical.isChildOf(M.canonical))continue;{const q=a.canonical.z-M.canonical.z,te=a.canonical.x-(a.canonical.x>>q<<q),ae=a.canonical.y-(a.canonical.y>>q<<q),be=o.Z>>q;o.bN(z,0,o.Z,o.Z,0,0,1),o.L(z,z,[te*be,ae*be,0]),o.M(z,z,[1/2**q,1/2**q,0])}}T.terrainRttPosMatrix32f=new Float32Array(z),c[_]=T}return c}getSourceTile(a,c){const _=this.sourceCache._source;let M=a.overscaledZ-this.deltaZoom;if(M>_.maxzoom&&(M=_.maxzoom),M<_.minzoom)return null;this._sourceTileCache[a.key]||(this._sourceTileCache[a.key]=a.scaledTo(M).key);let T=this.sourceCache.getTileByID(this._sourceTileCache[a.key]);if((!T||!T.dem)&&c)for(;M>=_.minzoom&&(!T||!T.dem);)T=this.sourceCache.getTileByID(a.scaledTo(M--).key);return T}anyTilesAfterTime(a=Date.now()){return this._lastTilesetChange>=a}}class al{constructor(a,c,_){this._meshCache={},this.painter=a,this.sourceCache=new of(c),this.options=_,this.exaggeration=typeof _.exaggeration=="number"?_.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(a,c,_,M=o.Z){var T;if(!(c>=0&&c<M&&_>=0&&_<M))return 0;const z=this.getTerrainData(a),q=(T=z.tile)===null||T===void 0?void 0:T.dem;if(!q)return 0;const te=o.cb([],[c/M*o.Z,_/M*o.Z],z.u_terrain_matrix),ae=[te[0]*q.dim,te[1]*q.dim],be=Math.floor(ae[0]),ke=Math.floor(ae[1]),Te=ae[0]-be,$e=ae[1]-ke;return q.get(be,ke)*(1-Te)*(1-$e)+q.get(be+1,ke)*Te*(1-$e)+q.get(be,ke+1)*(1-Te)*$e+q.get(be+1,ke+1)*Te*$e}getElevationForLngLatZoom(a,c){if(!o.cc(c,a.wrap()))return 0;const{tileID:_,mercatorX:M,mercatorY:T}=this._getOverscaledTileIDFromLngLatZoom(a,c);return this.getElevation(_,M%o.Z,T%o.Z,o.Z)}getElevation(a,c,_,M=o.Z){return this.getDEMElevation(a,c,_,M)*this.exaggeration}getTerrainData(a){if(!this._emptyDemTexture){const M=this.painter.context,T=new o.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new oe(M,T,M.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new oe(M,new o.R({width:1,height:1}),M.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(M.gl.NEAREST,M.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=o.as([])}const c=this.sourceCache.getSourceTile(a,!0);if(c&&c.dem&&(!c.demTexture||c.needsTerrainPrepare)){const M=this.painter.context;c.demTexture=this.painter.getTileTexture(c.dem.stride),c.demTexture?c.demTexture.update(c.dem.getPixels(),{premultiply:!1}):c.demTexture=new oe(M,c.dem.getPixels(),M.gl.RGBA,{premultiply:!1}),c.demTexture.bind(M.gl.NEAREST,M.gl.CLAMP_TO_EDGE),c.needsTerrainPrepare=!1}const _=c&&c+c.tileID.key+a.key;if(_&&!this._demMatrixCache[_]){const M=this.sourceCache.sourceCache._source.maxzoom;let T=a.canonical.z-c.tileID.canonical.z;a.overscaledZ>a.canonical.z&&(a.canonical.z>=M?T=a.canonical.z-M:o.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const z=a.canonical.x-(a.canonical.x>>T<<T),q=a.canonical.y-(a.canonical.y>>T<<T),te=o.cd(new Float64Array(16),[1/(o.Z<<T),1/(o.Z<<T),0]);o.L(te,te,[z*o.Z,q*o.Z,0]),this._demMatrixCache[a.key]={matrix:te,coord:a}}return{u_depth:2,u_terrain:3,u_terrain_dim:c&&c.dem&&c.dem.dim||1,u_terrain_matrix:_?this._demMatrixCache[a.key].matrix:this._emptyDemMatrix,u_terrain_unpack:c&&c.dem&&c.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(c&&c.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:c}}getFramebuffer(a){const c=this.painter,_=c.width/devicePixelRatio,M=c.height/devicePixelRatio;return!this._fbo||this._fbo.width===_&&this._fbo.height===M||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new oe(c.context,{width:_,height:M,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new oe(c.context,{width:_,height:M,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=c.context.createFramebuffer(_,M,!0,!1),this._fbo.depthAttachment.set(c.context.createRenderbuffer(c.context.gl.DEPTH_COMPONENT16,_,M))),this._fbo.colorAttachment.set(a==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const a=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const c=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let T=0,z=0;T<this._coordsTextureSize;T++)for(let q=0;q<this._coordsTextureSize;q++,z+=4)c[z+0]=255&q,c[z+1]=255&T,c[z+2]=q>>8<<4|T>>8,c[z+3]=0;const _=new o.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(c.buffer)),M=new oe(a,_,a.gl.RGBA,{premultiply:!1});return M.bind(a.gl.NEAREST,a.gl.CLAMP_TO_EDGE),this._coordsTexture=M,M}pointCoordinate(a){this.painter.maybeDrawDepthAndCoords(!0);const c=new Uint8Array(4),_=this.painter.context,M=_.gl,T=Math.round(a.x*this.painter.pixelRatio/devicePixelRatio),z=Math.round(a.y*this.painter.pixelRatio/devicePixelRatio),q=Math.round(this.painter.height/devicePixelRatio);_.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),M.readPixels(T,q-z-1,1,1,M.RGBA,M.UNSIGNED_BYTE,c),_.bindFramebuffer.set(null);const te=c[0]+(c[2]>>4<<8),ae=c[1]+((15&c[2])<<8),be=this.coordsIndex[255-c[3]],ke=be&&this.sourceCache.getTileByID(be);if(!ke)return null;const Te=this._coordsTextureSize,$e=(1<<ke.tileID.canonical.z)*Te;return new o.$((ke.tileID.canonical.x*Te+te)/$e+ke.tileID.wrap,(ke.tileID.canonical.y*Te+ae)/$e,this.getElevation(ke.tileID,te,ae,Te))}depthAtPoint(a){const c=new Uint8Array(4),_=this.painter.context,M=_.gl;return _.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),M.readPixels(a.x,this.painter.height/devicePixelRatio-a.y-1,1,1,M.RGBA,M.UNSIGNED_BYTE,c),_.bindFramebuffer.set(null),(c[0]/16777216+c[1]/65536+c[2]/256+c[3])/256}getTerrainMesh(a){var c;const _=((c=this.painter.style.projection)===null||c===void 0?void 0:c.transitionState)>0,M=_&&a.canonical.y===0,T=_&&a.canonical.y===(1<<a.canonical.z)-1,z=`m_${M?"n":""}_${T?"s":""}`;if(this._meshCache[z])return this._meshCache[z];const q=this.painter.context,te=new o.ce,ae=new o.aG,be=this.meshSize,ke=o.Z/be,Te=be*be;for(let It=0;It<=be;It++)for(let rn=0;rn<=be;rn++)te.emplaceBack(rn*ke,It*ke,0);for(let It=0;It<Te;It+=be+1)for(let rn=0;rn<be;rn++)ae.emplaceBack(rn+It,be+rn+It+1,be+rn+It+2),ae.emplaceBack(rn+It,be+rn+It+2,rn+It+1);const $e=te.length,Xe=$e+(be+1),mt=(be+1)*be,ut=M?o.b8:0,ft=M?0:1,vt=T?o.b9:o.Z,Et=T?0:1;for(let It=0;It<=be;It++)te.emplaceBack(It*ke,ut,ft);for(let It=0;It<=be;It++)te.emplaceBack(It*ke,vt,Et);for(let It=0;It<be;It++)ae.emplaceBack(mt+It,Xe+It,Xe+It+1),ae.emplaceBack(mt+It,Xe+It+1,mt+It+1),ae.emplaceBack(0+It,$e+It+1,$e+It),ae.emplaceBack(0+It,0+It+1,$e+It+1);const kt=te.length,Rt=kt+2*(be+1);for(const It of[0,1])for(let rn=0;rn<=be;rn++)for(const Zt of[0,1])te.emplaceBack(It*o.Z,rn*ke,Zt);for(let It=0;It<2*be;It+=2)ae.emplaceBack(kt+It,kt+It+1,kt+It+3),ae.emplaceBack(kt+It,kt+It+3,kt+It+2),ae.emplaceBack(Rt+It,Rt+It+3,Rt+It+1),ae.emplaceBack(Rt+It,Rt+It+2,Rt+It+3);const Ut=new Aa(q.createVertexBuffer(te,sl.members),q.createIndexBuffer(ae),o.aF.simpleSegment(0,0,te.length,ae.length));return this._meshCache[z]=Ut,Ut}getMeshFrameDelta(a){return 2*Math.PI*o.bq/Math.pow(2,Math.max(a,0))/5}getMinTileElevationForLngLatZoom(a,c){var _;const{tileID:M}=this._getOverscaledTileIDFromLngLatZoom(a,c);return(_=this.getMinMaxElevation(M).minElevation)!==null&&_!==void 0?_:0}getMinMaxElevation(a){const c=this.getTerrainData(a).tile,_={minElevation:null,maxElevation:null};return c&&c.dem&&(_.minElevation=c.dem.min*this.exaggeration,_.maxElevation=c.dem.max*this.exaggeration),_}_getOverscaledTileIDFromLngLatZoom(a,c){const _=o.$.fromLngLat(a.wrap()),M=(1<<c)*o.Z,T=_.x*M,z=_.y*M,q=Math.floor(T/o.Z),te=Math.floor(z/o.Z);return{tileID:new o.Y(c,0,c,q,te),mercatorX:T,mercatorY:z}}}class Hu{constructor(a,c,_){this._context=a,this._size=c,this._tileSize=_,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const a of this._objects)a.texture.destroy(),a.fbo.destroy()}_createObject(a){const c=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),_=new oe(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return _.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),c.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),c.colorAttachment.set(_.texture),{id:a,fbo:c,texture:_,stamp:-1,inUse:!1}}getObjectForId(a){return this._objects[a]}useObject(a){a.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(c=>a.id!==c),this._recentlyUsed.push(a.id)}stampObject(a){a.stamp=++this._stamp}getOrCreateFreeObject(){for(const c of this._recentlyUsed)if(!this._objects[c].inUse)return this._objects[c];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const a=this._createObject(this._objects.length);return this._objects.push(a),a}freeObject(a){a.inUse=!1}freeAllObjects(){for(const a of this._objects)this.freeObject(a)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(a=>!a.inUse)===!1}}const hA={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class Os{constructor(a,c){this.painter=a,this.terrain=c,this.pool=new Hu(a.context,30,c.sourceCache.tileSize*c.qualityFactor)}destruct(){this.pool.destruct()}getTexture(a){return this.pool.getObjectForId(a.rtt[this._stacks.length-1].id).texture}prepareForRender(a,c){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=a._order.filter(_=>!a._layers[_].isHidden(c)),this._coordsAscending={};for(const _ in a.sourceCaches){this._coordsAscending[_]={};const M=a.sourceCaches[_].getVisibleCoordinates();for(const T of M){const z=this.terrain.sourceCache.getTerrainCoords(T);for(const q in z)this._coordsAscending[_][q]||(this._coordsAscending[_][q]=[]),this._coordsAscending[_][q].push(z[q])}}this._coordsAscendingStr={};for(const _ of a._order){const M=a._layers[_],T=M.source;if(hA[M.type]&&!this._coordsAscendingStr[T]){this._coordsAscendingStr[T]={};for(const z in this._coordsAscending[T])this._coordsAscendingStr[T][z]=this._coordsAscending[T][z].map(q=>q.key).sort().join()}}for(const _ of this._renderableTiles)for(const M in this._coordsAscendingStr){const T=this._coordsAscendingStr[M][_.tileID.key];T&&T!==_.rttCoords[M]&&(_.rtt=[])}}renderLayer(a,c){if(a.isHidden(this.painter.transform.zoom))return!1;const _=Object.assign(Object.assign({},c),{isRenderingToTexture:!0}),M=a.type,T=this.painter,z=this._renderableLayerIds[this._renderableLayerIds.length-1]===a.id;if(hA[M]&&(this._prevType&&hA[this._prevType]||this._stacks.push([]),this._prevType=M,this._stacks[this._stacks.length-1].push(a.id),!z))return!0;if(hA[this._prevType]||hA[M]&&z){this._prevType=M;const q=this._stacks.length-1,te=this._stacks[q]||[];for(const ae of this._renderableTiles){if(this.pool.isFull()&&(Qu(this.painter,this.terrain,this._rttTiles,_),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(ae),ae.rtt[q]){const ke=this.pool.getObjectForId(ae.rtt[q].id);if(ke.stamp===ae.rtt[q].stamp){this.pool.useObject(ke);continue}}const be=this.pool.getOrCreateFreeObject();this.pool.useObject(be),this.pool.stampObject(be),ae.rtt[q]={id:be.id,stamp:be.stamp},T.context.bindFramebuffer.set(be.fbo.framebuffer),T.context.clear({color:o.b6.transparent,stencil:0}),T.currentStencilSource=void 0;for(let ke=0;ke<te.length;ke++){const Te=T.style._layers[te[ke]],$e=Te.source?this._coordsAscending[Te.source][ae.tileID.key]:[ae.tileID];T.context.viewport.set([0,0,be.fbo.width,be.fbo.height]),T._renderTileClippingMasks(Te,$e,!0),T.renderLayer(T,T.style.sourceCaches[Te.source],Te,$e,_),Te.source&&(ae.rttCoords[Te.source]=this._coordsAscendingStr[Te.source][ae.tileID.key])}}return Qu(this.painter,this.terrain,this._rttTiles,_),this._rttTiles=[],this.pool.freeAllObjects(),hA[M]}return!1}}const Is={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},sf=f,Zu={hash:!1,interactive:!0,bearingSnap:7,attributionControl:ei,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:o.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0},ks={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class Oc{constructor(a,c,_=!1){this.mousedown=T=>{this.startMove(T,P.mousePos(this.element,T)),P.addEventListener(window,"mousemove",this.mousemove),P.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=T=>{this.move(T,P.mousePos(this.element,T))},this.mouseup=T=>{this._rotatePitchHanlder.dragEnd(T),this.offTemp()},this.touchstart=T=>{T.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=P.touchPos(this.element,T.targetTouches)[0],this.startMove(T,this._startPos),P.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),P.addEventListener(window,"touchend",this.touchend))},this.touchmove=T=>{T.targetTouches.length!==1?this.reset():(this._lastPos=P.touchPos(this.element,T.targetTouches)[0],this.move(T,this._lastPos))},this.touchend=T=>{T.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHanlder.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=c;const M=new nf;this._rotatePitchHanlder=new gs({clickTolerance:3,move:(T,z)=>{const q=c.getBoundingClientRect(),te=new o.P((q.bottom-q.top)/2,(q.right-q.left)/2);return{bearingDelta:o.c9(new o.P(T.x,z.y),z,te),pitchDelta:_?-.5*(z.y-T.y):void 0}},moveStateManager:M,enable:!0,assignEvents:()=>{}}),this.map=a,P.addEventListener(c,"mousedown",this.mousedown),P.addEventListener(c,"touchstart",this.touchstart,{passive:!1}),P.addEventListener(c,"touchcancel",this.reset)}startMove(a,c){this._rotatePitchHanlder.dragStart(a,c),P.disableDrag()}move(a,c){const _=this.map,{bearingDelta:M,pitchDelta:T}=this._rotatePitchHanlder.dragMove(a,c)||{};M&&_.setBearing(_.getBearing()+M),T&&_.setPitch(_.getPitch()+T)}off(){const a=this.element;P.removeEventListener(a,"mousedown",this.mousedown),P.removeEventListener(a,"touchstart",this.touchstart,{passive:!1}),P.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),P.removeEventListener(window,"touchend",this.touchend),P.removeEventListener(a,"touchcancel",this.reset),this.offTemp()}offTemp(){P.enableDrag(),P.removeEventListener(window,"mousemove",this.mousemove),P.removeEventListener(window,"mouseup",this.mouseup),P.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),P.removeEventListener(window,"touchend",this.touchend)}}let bu;function Cl(I,a,c){const _=new o.Q(I.lng,I.lat);if(I=new o.Q(I.lng,I.lat),a){const M=new o.Q(I.lng-360,I.lat),T=new o.Q(I.lng+360,I.lat),z=c.locationToScreenPoint(I).distSqr(a);c.locationToScreenPoint(M).distSqr(a)<z?I=M:c.locationToScreenPoint(T).distSqr(a)<z&&(I=T)}for(;Math.abs(I.lng-c.center.lng)>180;){const M=c.locationToScreenPoint(I);if(M.x>=0&&M.y>=0&&M.x<=c.width&&M.y<=c.height)break;I.lng>c.center.lng?I.lng-=360:I.lng+=360}return I.lng!==_.lng&&c.isPointOnMapSurface(c.locationToScreenPoint(I))?I:_}const ou={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Ic(I,a,c){const _=I.classList;for(const M in ou)_.remove(`maplibregl-${c}-anchor-${M}`);_.add(`maplibregl-${c}-anchor-${a}`)}class xu extends o.E{constructor(a){if(super(),this._onKeyPress=c=>{const _=c.code,M=c.charCode||c.keyCode;_!=="Space"&&_!=="Enter"&&M!==32&&M!==13||this.togglePopup()},this._onMapClick=c=>{const _=c.originalEvent.target,M=this._element;this._popup&&(_===M||M.contains(_))&&this.togglePopup()},this._update=c=>{var _;if(!this._map)return;const M=this._map.loaded()&&!this._map.isMoving();((c==null?void 0:c.type)==="terrain"||(c==null?void 0:c.type)==="render"&&!M)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?Cl(this._lngLat,this._flatPos,this._map.transform):(_=this._lngLat)===null||_===void 0?void 0:_.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let T="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?T=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(T=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let z="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?z="rotateX(0deg)":this._pitchAlignment==="map"&&(z=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||c&&c.type!=="moveend"||(this._pos=this._pos.round()),P.setTransform(this._element,`${ou[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${z} ${T}`),O.frameAsync(new AbortController).then(()=>{this._updateOpacity(c&&c.type==="moveend")}).catch(()=>{})},this._onMove=c=>{if(!this._isDragging){const _=this._clickTolerance||this._map._clickTolerance;this._isDragging=c.point.dist(this._pointerdownPos)>=_}this._isDragging&&(this._pos=c.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new o.l("dragstart"))),this.fire(new o.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new o.l("dragend")),this._state="inactive"},this._addDragHandler=c=>{this._element.contains(c.originalEvent.target)&&(c.preventDefault(),this._positionDelta=c.point.sub(this._pos).add(this._offset),this._pointerdownPos=c.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=a&&a.anchor||"center",this._color=a&&a.color||"#3FB1CE",this._scale=a&&a.scale||1,this._draggable=a&&a.draggable||!1,this._clickTolerance=a&&a.clickTolerance||0,this._subpixelPositioning=a&&a.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=a&&a.rotation||0,this._rotationAlignment=a&&a.rotationAlignment||"auto",this._pitchAlignment=a&&a.pitchAlignment&&a.pitchAlignment!=="auto"?a.pitchAlignment:this._rotationAlignment,this.setOpacity(a==null?void 0:a.opacity,a==null?void 0:a.opacityWhenCovered),a&&a.element)this._element=a.element,this._offset=o.P.convert(a&&a.offset||[0,0]);else{this._defaultMarker=!0,this._element=P.create("div");const c=P.createNS("http://www.w3.org/2000/svg","svg"),_=41,M=27;c.setAttributeNS(null,"display","block"),c.setAttributeNS(null,"height",`${_}px`),c.setAttributeNS(null,"width",`${M}px`),c.setAttributeNS(null,"viewBox",`0 0 ${M} ${_}`);const T=P.createNS("http://www.w3.org/2000/svg","g");T.setAttributeNS(null,"stroke","none"),T.setAttributeNS(null,"stroke-width","1"),T.setAttributeNS(null,"fill","none"),T.setAttributeNS(null,"fill-rule","evenodd");const z=P.createNS("http://www.w3.org/2000/svg","g");z.setAttributeNS(null,"fill-rule","nonzero");const q=P.createNS("http://www.w3.org/2000/svg","g");q.setAttributeNS(null,"transform","translate(3.0, 29.0)"),q.setAttributeNS(null,"fill","#000000");const te=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const ft of te){const vt=P.createNS("http://www.w3.org/2000/svg","ellipse");vt.setAttributeNS(null,"opacity","0.04"),vt.setAttributeNS(null,"cx","10.5"),vt.setAttributeNS(null,"cy","5.80029008"),vt.setAttributeNS(null,"rx",ft.rx),vt.setAttributeNS(null,"ry",ft.ry),q.appendChild(vt)}const ae=P.createNS("http://www.w3.org/2000/svg","g");ae.setAttributeNS(null,"fill",this._color);const be=P.createNS("http://www.w3.org/2000/svg","path");be.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),ae.appendChild(be);const ke=P.createNS("http://www.w3.org/2000/svg","g");ke.setAttributeNS(null,"opacity","0.25"),ke.setAttributeNS(null,"fill","#000000");const Te=P.createNS("http://www.w3.org/2000/svg","path");Te.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),ke.appendChild(Te);const $e=P.createNS("http://www.w3.org/2000/svg","g");$e.setAttributeNS(null,"transform","translate(6.0, 7.0)"),$e.setAttributeNS(null,"fill","#FFFFFF");const Xe=P.createNS("http://www.w3.org/2000/svg","g");Xe.setAttributeNS(null,"transform","translate(8.0, 8.0)");const mt=P.createNS("http://www.w3.org/2000/svg","circle");mt.setAttributeNS(null,"fill","#000000"),mt.setAttributeNS(null,"opacity","0.25"),mt.setAttributeNS(null,"cx","5.5"),mt.setAttributeNS(null,"cy","5.5"),mt.setAttributeNS(null,"r","5.4999962");const ut=P.createNS("http://www.w3.org/2000/svg","circle");ut.setAttributeNS(null,"fill","#FFFFFF"),ut.setAttributeNS(null,"cx","5.5"),ut.setAttributeNS(null,"cy","5.5"),ut.setAttributeNS(null,"r","5.4999962"),Xe.appendChild(mt),Xe.appendChild(ut),z.appendChild(q),z.appendChild(ae),z.appendChild(ke),z.appendChild($e),z.appendChild(Xe),c.appendChild(z),c.setAttributeNS(null,"height",_*this._scale+"px"),c.setAttributeNS(null,"width",M*this._scale+"px"),this._element.appendChild(c),this._offset=o.P.convert(a&&a.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",c=>{c.preventDefault()}),this._element.addEventListener("mousedown",c=>{c.preventDefault()}),Ic(this._element,this._anchor,"marker"),a&&a.className)for(const c of a.className.split(" "))this._element.classList.add(c);this._popup=null}addTo(a){return this.remove(),this._map=a,this._element.setAttribute("aria-label",a._getUIString("Marker.Title")),a.getCanvasContainer().appendChild(this._element),a.on("move",this._update),a.on("moveend",this._update),a.on("terrain",this._update),a.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),P.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(a){return this._lngLat=o.Q.convert(a),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(a){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),a){if(!("offset"in a.options)){const M=Math.abs(13.5)/Math.SQRT2;a.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[M,-1*(38.1-13.5+M)],"bottom-right":[-M,-1*(38.1-13.5+M)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=a,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(a){return this._subpixelPositioning=a,this}getPopup(){return this._popup}togglePopup(){const a=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:a?(a.isOpen()?a.remove():(a.setLngLat(this._lngLat),a.addTo(this._map)),this):this}_updateOpacity(a=!1){var c,_;if(!(!((c=this._map)===null||c===void 0)&&c.terrain)){const ke=this._map.transform.isLocationOccluded(this._lngLat)?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==ke&&(this._element.style.opacity=ke))}if(a)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const M=this._map,T=M.terrain.depthAtPoint(this._pos),z=M.terrain.getElevationForLngLatZoom(this._lngLat,M.transform.tileZoom);if(M.transform.lngLatToCameraDepth(this._lngLat,z)-T<.006)return void(this._element.style.opacity=this._opacity);const q=-this._offset.y/M.transform.pixelsPerMeter,te=Math.sin(M.getPitch()*Math.PI/180)*q,ae=M.terrain.depthAtPoint(new o.P(this._pos.x,this._pos.y-this._offset.y)),be=M.transform.lngLatToCameraDepth(this._lngLat,z+te)-ae>.006;!((_=this._popup)===null||_===void 0)&&_.isOpen()&&be&&this._popup.remove(),this._element.style.opacity=be?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(a){return this._offset=o.P.convert(a),this._update(),this}addClassName(a){this._element.classList.add(a)}removeClassName(a){this._element.classList.remove(a)}toggleClassName(a){return this._element.classList.toggle(a)}setDraggable(a){return this._draggable=!!a,this._map&&(a?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(a){return this._rotation=a||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(a){return this._rotationAlignment=a||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(a){return this._pitchAlignment=a&&a!=="auto"?a:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(a,c){return(this._opacity===void 0||a===void 0&&c===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),a!==void 0&&(this._opacity=a),c!==void 0&&(this._opacityWhenCovered=c),this._map&&this._updateOpacity(!0),this}}const ha={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Qs=0,su=!1;const au={maxWidth:100,unit:"metric"};function RA(I,a,c){const _=c&&c.maxWidth||100,M=I._container.clientHeight/2,T=I._container.clientWidth/2,z=I.unproject([T-_/2,M]),q=I.unproject([T+_/2,M]),te=Math.round(I.project(q).x-I.project(z).x),ae=Math.min(_,te,I._container.clientWidth),be=z.distanceTo(q);if(c&&c.unit==="imperial"){const ke=3.2808*be;ke>5280?Mu(a,ae,ke/5280,I._getUIString("ScaleControl.Miles")):Mu(a,ae,ke,I._getUIString("ScaleControl.Feet"))}else c&&c.unit==="nautical"?Mu(a,ae,be/1852,I._getUIString("ScaleControl.NauticalMiles")):be>=1e3?Mu(a,ae,be/1e3,I._getUIString("ScaleControl.Kilometers")):Mu(a,ae,be,I._getUIString("ScaleControl.Meters"))}function Mu(I,a,c,_){const M=function(T){const z=Math.pow(10,`${Math.floor(T)}`.length-1);let q=T/z;return q=q>=10?10:q>=5?5:q>=3?3:q>=2?2:q>=1?1:function(te){const ae=Math.pow(10,Math.ceil(-Math.log(te)/Math.LN10));return Math.round(te*ae)/ae}(q),z*q}(c);I.style.width=a*(M/c)+"px",I.innerHTML=`${M}&nbsp;${_}`}const Ac={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},fA=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function jl(I){if(I){if(typeof I=="number"){const a=Math.round(Math.abs(I)/Math.SQRT2);return{center:new o.P(0,0),top:new o.P(0,I),"top-left":new o.P(a,a),"top-right":new o.P(-a,a),bottom:new o.P(0,-I),"bottom-left":new o.P(a,-a),"bottom-right":new o.P(-a,-a),left:new o.P(I,0),right:new o.P(-I,0)}}if(I instanceof o.P||Array.isArray(I)){const a=o.P.convert(I);return{center:a,top:a,"top-left":a,"top-right":a,bottom:a,"bottom-left":a,"bottom-right":a,left:a,right:a}}return{center:o.P.convert(I.center||[0,0]),top:o.P.convert(I.top||[0,0]),"top-left":o.P.convert(I["top-left"]||[0,0]),"top-right":o.P.convert(I["top-right"]||[0,0]),bottom:o.P.convert(I.bottom||[0,0]),"bottom-left":o.P.convert(I["bottom-left"]||[0,0]),"bottom-right":o.P.convert(I["bottom-right"]||[0,0]),left:o.P.convert(I.left||[0,0]),right:o.P.convert(I.right||[0,0])}}return jl(new o.P(0,0))}const Xc=f;l.AJAXError=o.ci,l.Event=o.l,l.Evented=o.E,l.LngLat=o.Q,l.MercatorCoordinate=o.$,l.Point=o.P,l.addProtocol=o.cj,l.config=o.a,l.removeProtocol=o.ck,l.AttributionControl=iu,l.BoxZoomHandler=Us,l.CanvasSource=pn,l.CooperativeGesturesHandler=uc,l.DoubleClickZoomHandler=Bc,l.DragPanHandler=PA,l.DragRotateHandler=Sd,l.EdgeInsets=Es,l.FullscreenControl=class extends o.E{constructor(I={}){super(),this._onFullscreenChange=()=>{var a;let c=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((a=c==null?void 0:c.shadowRoot)===null||a===void 0)&&a.fullscreenElement;)c=c.shadowRoot.fullscreenElement;c===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,I&&I.container&&(I.container instanceof HTMLElement?this._container=I.container:o.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(I){return this._map=I,this._container||(this._container=this._map.getContainer()),this._controlContainer=P.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){P.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const I=this._fullscreenButton=P.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);P.create("span","maplibregl-ctrl-icon",I).setAttribute("aria-hidden","true"),I.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const I=this._getTitle();this._fullscreenButton.setAttribute("aria-label",I),this._fullscreenButton.title=I}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new o.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new o.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},l.GeoJSONSource=tn,l.GeolocateControl=class extends o.E{constructor(I){super(),this._onSuccess=a=>{if(this._map){if(this._isOutOfMapMaxBounds(a))return this._setErrorState(),this.fire(new o.l("outofmaxbounds",a)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=a,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(a),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(a),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new o.l("geolocate",a)),this._finish()}},this._updateCamera=a=>{const c=new o.Q(a.coords.longitude,a.coords.latitude),_=a.coords.accuracy,M=this._map.getBearing(),T=o.e({bearing:M},this.options.fitBoundsOptions),z=Lt.fromLngLat(c,_);this._map.fitBounds(z,T,{geolocateSource:!0})},this._updateMarker=a=>{if(a){const c=new o.Q(a.coords.longitude,a.coords.latitude);this._accuracyCircleMarker.setLngLat(c).addTo(this._map),this._userLocationDotMarker.setLngLat(c).addTo(this._map),this._accuracy=a.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=a=>{if(this._map){if(this.options.trackUserLocation)if(a.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(a.code===3&&su)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new o.l("error",a)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",a=>a.preventDefault()),this._geolocateButton=P.create("button","maplibregl-ctrl-geolocate",this._container),P.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=a=>{if(this._map){if(a===!1){o.w("Geolocation support is not available so the GeolocateControl will be disabled.");const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}else{const c=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=P.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new xu({element:this._dotElement}),this._circleElement=P.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new xu({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",c=>{c.geolocateSource||this._watchState!=="ACTIVE_LOCK"||c.originalEvent&&c.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new o.l("trackuserlocationend")),this.fire(new o.l("userlocationlostfocus")))})}},this.options=o.e({},ha,I)}onAdd(I){return this._map=I,this._container=P.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return o._(this,arguments,void 0,function*(a=!1){if(bu!==void 0&&!a)return bu;if(window.navigator.permissions===void 0)return bu=!!window.navigator.geolocation,bu;try{bu=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{bu=!!window.navigator.geolocation}return bu})}().then(a=>this._finishSetupUI(a)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),P.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Qs=0,su=!1}_isOutOfMapMaxBounds(I){const a=this._map.getMaxBounds(),c=I.coords;return a&&(c.longitude<a.getWest()||c.longitude>a.getEast()||c.latitude<a.getSouth()||c.latitude>a.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const I=this._map.getBounds(),a=I.getSouthEast(),c=I.getNorthEast(),_=a.distanceTo(c),M=Math.ceil(this._accuracy/(_/this._map._container.clientHeight)*2);this._circleElement.style.width=`${M}px`,this._circleElement.style.height=`${M}px`}trigger(){if(!this._setup)return o.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new o.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Qs--,su=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new o.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new o.l("trackuserlocationstart")),this.fire(new o.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let I;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Qs++,Qs>1?(I={maximumAge:6e5,timeout:0},su=!0):(I=this.options.positionOptions,su=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,I)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},l.GlobeControl=class{constructor(){this._toggleProjection=()=>{var I;const a=(I=this._map.getProjection())===null||I===void 0?void 0:I.type;this._map.setProjection(a!=="mercator"&&a?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var I;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((I=this._map.getProjection())===null||I===void 0?void 0:I.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(I){return this._map=I,this._container=P.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=P.create("button","maplibregl-ctrl-globe",this._container),P.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){P.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},l.Hash=nu,l.ImageSource=dr,l.KeyboardHandler=So,l.LngLatBounds=Lt,l.LogoControl=vl,l.Map=class extends Kr{constructor(I){var a,c;o.cf.mark(o.cg.create);const _=Object.assign(Object.assign(Object.assign({},Zu),I),{canvasContextAttributes:Object.assign(Object.assign({},Zu.canvasContextAttributes),I.canvasContextAttributes)});if(_.minZoom!=null&&_.maxZoom!=null&&_.minZoom>_.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(_.minPitch!=null&&_.maxPitch!=null&&_.minPitch>_.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(_.minPitch!=null&&_.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(_.maxPitch!=null&&_.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const M=new ea,T=new ml;if(_.minZoom!==void 0&&M.setMinZoom(_.minZoom),_.maxZoom!==void 0&&M.setMaxZoom(_.maxZoom),_.minPitch!==void 0&&M.setMinPitch(_.minPitch),_.maxPitch!==void 0&&M.setMaxPitch(_.maxPitch),_.renderWorldCopies!==void 0&&M.setRenderWorldCopies(_.renderWorldCopies),super(M,T,{bearingSnap:_.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new rf,this._controls=[],this._mapId=o.a3(),this._contextLost=q=>{q.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new o.l("webglcontextlost",{originalEvent:q}))},this._contextRestored=q=>{this._setupPainter(),this.resize(),this._update(),this.fire(new o.l("webglcontextrestored",{originalEvent:q}))},this._onMapScroll=q=>{if(q.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=_.interactive,this._maxTileCacheSize=_.maxTileCacheSize,this._maxTileCacheZoomLevels=_.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},_.canvasContextAttributes),this._trackResize=_.trackResize===!0,this._bearingSnap=_.bearingSnap,this._centerClampedToGround=_.centerClampedToGround,this._refreshExpiredTiles=_.refreshExpiredTiles===!0,this._fadeDuration=_.fadeDuration,this._crossSourceCollisions=_.crossSourceCollisions===!0,this._collectResourceTiming=_.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},Is),_.locale),this._clickTolerance=_.clickTolerance,this._overridePixelRatio=_.pixelRatio,this._maxCanvasSize=_.maxCanvasSize,this.transformCameraUpdate=_.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=_.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=re.addThrottleControl(()=>this.isMoving()),this._requestManager=new V(_.transformRequest),typeof _.container=="string"){if(this._container=document.getElementById(_.container),!this._container)throw new Error(`Container '${_.container}' not found.`)}else{if(!(_.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=_.container}if(_.maxBounds&&this.setMaxBounds(_.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let q=!1;const te=Zd(ae=>{this._trackResize&&!this._removed&&(this.resize(ae),this.redraw())},50);this._resizeObserver=new ResizeObserver(ae=>{q?te(ae):q=!0}),this._resizeObserver.observe(this._container)}this.handlers=new ru(this,_),this._hash=_.hash&&new nu(typeof _.hash=="string"&&_.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:_.center,elevation:_.elevation,zoom:_.zoom,bearing:_.bearing,pitch:_.pitch,roll:_.roll}),_.bounds&&(this.resize(),this.fitBounds(_.bounds,o.e({},_.fitBoundsOptions,{duration:0}))));const z=typeof _.style=="string"||((c=(a=_.style)===null||a===void 0?void 0:a.projection)===null||c===void 0?void 0:c.type)!=="globe";this.resize(null,z),this._localIdeographFontFamily=_.localIdeographFontFamily,this._validateStyle=_.validateStyle,_.style&&this.setStyle(_.style,{localIdeographFontFamily:_.localIdeographFontFamily}),_.attributionControl&&this.addControl(new iu(typeof _.attributionControl=="boolean"?void 0:_.attributionControl)),_.maplibreLogo&&this.addControl(new vl,_.logoPosition),this.on("style.load",()=>{if(z||this._resizeTransform(),this.transform.unmodified){const q=o.O(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(q)}}),this.on("data",q=>{this._update(q.dataType==="style"),this.fire(new o.l(`${q.dataType}data`,q))}),this.on("dataloading",q=>{this.fire(new o.l(`${q.dataType}dataloading`,q))}),this.on("dataabort",q=>{this.fire(new o.l("sourcedataabort",q))})}_getMapId(){return this._mapId}addControl(I,a){if(a===void 0&&(a=I.getDefaultPosition?I.getDefaultPosition():"top-right"),!I||!I.onAdd)return this.fire(new o.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const c=I.onAdd(this);this._controls.push(I);const _=this._controlPositions[a];return a.indexOf("bottom")!==-1?_.insertBefore(c,_.firstChild):_.appendChild(c),this}removeControl(I){if(!I||!I.onRemove)return this.fire(new o.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const a=this._controls.indexOf(I);return a>-1&&this._controls.splice(a,1),I.onRemove(this),this}hasControl(I){return this._controls.indexOf(I)>-1}calculateCameraOptionsFromTo(I,a,c,_){return _==null&&this.terrain&&(_=this.terrain.getElevationForLngLatZoom(c,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(I,a,c,_)}resize(I,a=!0){const[c,_]=this._containerDimensions(),M=this._getClampedPixelRatio(c,_);if(this._resizeCanvas(c,_,M),this.painter.resize(c,_,M),this.painter.overLimit()){const z=this.painter.context.gl;this._maxCanvasSize=[z.drawingBufferWidth,z.drawingBufferHeight];const q=this._getClampedPixelRatio(c,_);this._resizeCanvas(c,_,q),this.painter.resize(c,_,q)}this._resizeTransform(a);const T=!this._moving;return T&&(this.stop(),this.fire(new o.l("movestart",I)).fire(new o.l("move",I))),this.fire(new o.l("resize",I)),T&&this.fire(new o.l("moveend",I)),this}_resizeTransform(I=!0){var a;const[c,_]=this._containerDimensions();this.transform.resize(c,_,I),(a=this._requestedCameraState)===null||a===void 0||a.resize(c,_,I)}_getClampedPixelRatio(I,a){const{0:c,1:_}=this._maxCanvasSize,M=this.getPixelRatio(),T=I*M,z=a*M;return Math.min(T>c?c/T:1,z>_?_/z:1)*M}getPixelRatio(){var I;return(I=this._overridePixelRatio)!==null&&I!==void 0?I:devicePixelRatio}setPixelRatio(I){this._overridePixelRatio=I,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(I){return this.transform.setMaxBounds(Lt.convert(I)),this._update()}setMinZoom(I){if((I=I??-2)>=-2&&I<=this.transform.maxZoom)return this.transform.setMinZoom(I),this._update(),this.getZoom()<I&&this.setZoom(I),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(I){if((I=I??22)>=this.transform.minZoom)return this.transform.setMaxZoom(I),this._update(),this.getZoom()>I&&this.setZoom(I),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(I){if((I=I??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(I>=0&&I<=this.transform.maxPitch)return this.transform.setMinPitch(I),this._update(),this.getPitch()<I&&this.setPitch(I),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(I){if((I=I??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(I>=this.transform.minPitch)return this.transform.setMaxPitch(I),this._update(),this.getPitch()>I&&this.setPitch(I),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(I){return this.transform.setRenderWorldCopies(I),this._update()}project(I){return this.transform.locationToScreenPoint(o.Q.convert(I),this.style&&this.terrain)}unproject(I){return this.transform.screenPointToLocation(o.P.convert(I),this.terrain)}isMoving(){var I;return this._moving||((I=this.handlers)===null||I===void 0?void 0:I.isMoving())}isZooming(){var I;return this._zooming||((I=this.handlers)===null||I===void 0?void 0:I.isZooming())}isRotating(){var I;return this._rotating||((I=this.handlers)===null||I===void 0?void 0:I.isRotating())}_createDelegatedListener(I,a,c){if(I==="mouseenter"||I==="mouseover"){let _=!1;return{layers:a,listener:c,delegates:{mousemove:T=>{const z=a.filter(te=>this.getLayer(te)),q=z.length!==0?this.queryRenderedFeatures(T.point,{layers:z}):[];q.length?_||(_=!0,c.call(this,new gi(I,this,T.originalEvent,{features:q}))):_=!1},mouseout:()=>{_=!1}}}}if(I==="mouseleave"||I==="mouseout"){let _=!1;return{layers:a,listener:c,delegates:{mousemove:z=>{const q=a.filter(te=>this.getLayer(te));(q.length!==0?this.queryRenderedFeatures(z.point,{layers:q}):[]).length?_=!0:_&&(_=!1,c.call(this,new gi(I,this,z.originalEvent)))},mouseout:z=>{_&&(_=!1,c.call(this,new gi(I,this,z.originalEvent)))}}}}{const _=M=>{const T=a.filter(q=>this.getLayer(q)),z=T.length!==0?this.queryRenderedFeatures(M.point,{layers:T}):[];z.length&&(M.features=z,c.call(this,M),delete M.features)};return{layers:a,listener:c,delegates:{[I]:_}}}}_saveDelegatedListener(I,a){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[I]=this._delegatedListeners[I]||[],this._delegatedListeners[I].push(a)}_removeDelegatedListener(I,a,c){if(!this._delegatedListeners||!this._delegatedListeners[I])return;const _=this._delegatedListeners[I];for(let M=0;M<_.length;M++){const T=_[M];if(T.listener===c&&T.layers.length===a.length&&T.layers.every(z=>a.includes(z))){for(const z in T.delegates)this.off(z,T.delegates[z]);return void _.splice(M,1)}}}on(I,a,c){if(c===void 0)return super.on(I,a);const _=typeof a=="string"?[a]:a,M=this._createDelegatedListener(I,_,c);this._saveDelegatedListener(I,M);for(const T in M.delegates)this.on(T,M.delegates[T]);return{unsubscribe:()=>{this._removeDelegatedListener(I,_,c)}}}once(I,a,c){if(c===void 0)return super.once(I,a);const _=typeof a=="string"?[a]:a,M=this._createDelegatedListener(I,_,c);for(const T in M.delegates){const z=M.delegates[T];M.delegates[T]=(...q)=>{this._removeDelegatedListener(I,_,c),z(...q)}}this._saveDelegatedListener(I,M);for(const T in M.delegates)this.once(T,M.delegates[T]);return this}off(I,a,c){return c===void 0?super.off(I,a):(this._removeDelegatedListener(I,typeof a=="string"?[a]:a,c),this)}queryRenderedFeatures(I,a){if(!this.style)return[];let c;const _=I instanceof o.P||Array.isArray(I),M=_?I:[[0,0],[this.transform.width,this.transform.height]];if(a=a||(_?{}:I)||{},M instanceof o.P||typeof M[0]=="number")c=[o.P.convert(M)];else{const T=o.P.convert(M[0]),z=o.P.convert(M[1]);c=[T,new o.P(z.x,T.y),z,new o.P(T.x,z.y),T]}return this.style.queryRenderedFeatures(c,a,this.transform)}querySourceFeatures(I,a){return this.style.querySourceFeatures(I,a)}setStyle(I,a){return(a=o.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},a)).diff!==!1&&a.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&I?(this._diffStyle(I,a),this):(this._localIdeographFontFamily=a.localIdeographFontFamily,this._updateStyle(I,a))}setTransformRequest(I){return this._requestManager.setTransformRequest(I),this}_getUIString(I){const a=this._locale[I];if(a==null)throw new Error(`Missing UI string '${I}'`);return a}_updateStyle(I,a){var c,_;if(a.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(I,a));const M=this.style&&a.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!I)),I?(this.style=new cd(this,a||{}),this.style.setEventedParent(this,{style:this.style}),typeof I=="string"?this.style.loadURL(I,a,M):this.style.loadJSON(I,a,M),this):((_=(c=this.style)===null||c===void 0?void 0:c.projection)===null||_===void 0||_.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new cd(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(I,a){if(typeof I=="string"){const c=this._requestManager.transformRequest(I,"Style");o.j(c,new AbortController).then(_=>{this._updateDiff(_.data,a)}).catch(_=>{_&&this.fire(new o.k(_))})}else typeof I=="object"&&this._updateDiff(I,a)}_updateDiff(I,a){try{this.style.setState(I,a)&&this._update(!0)}catch(c){o.w(`Unable to perform style diff: ${c.message||c.error||c}.  Rebuilding the style from scratch.`),this._updateStyle(I,a)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():o.w("There is no style added to the map.")}addSource(I,a){return this._lazyInitEmptyStyle(),this.style.addSource(I,a),this._update(!0)}isSourceLoaded(I){const a=this.style&&this.style.sourceCaches[I];if(a!==void 0)return a.loaded();this.fire(new o.k(new Error(`There is no source with ID '${I}'`)))}setTerrain(I){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),I){const a=this.style.sourceCaches[I.source];if(!a)throw new Error(`cannot load terrain, because there exists no source with ID: ${I.source}`);this.terrain===null&&a.reload();for(const c in this.style._layers){const _=this.style._layers[c];_.type==="hillshade"&&_.source===I.source&&o.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new al(this.painter,a,I),this.painter.renderToTexture=new Os(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=c=>{c.dataType==="style"?this.terrain.sourceCache.freeRtt():c.dataType==="source"&&c.tile&&(c.sourceId!==I.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),this.terrain.sourceCache.freeRtt(c.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new o.l("terrain",{terrain:I})),this}getTerrain(){var I,a;return(a=(I=this.terrain)===null||I===void 0?void 0:I.options)!==null&&a!==void 0?a:null}areTilesLoaded(){const I=this.style&&this.style.sourceCaches;for(const a in I){const c=I[a]._tiles;for(const _ in c){const M=c[_];if(M.state!=="loaded"&&M.state!=="errored")return!1}}return!0}removeSource(I){return this.style.removeSource(I),this._update(!0)}getSource(I){return this.style.getSource(I)}addImage(I,a,c={}){const{pixelRatio:_=1,sdf:M=!1,stretchX:T,stretchY:z,content:q,textFitWidth:te,textFitHeight:ae}=c;if(this._lazyInitEmptyStyle(),!(a instanceof HTMLImageElement||o.b(a))){if(a.width===void 0||a.height===void 0)return this.fire(new o.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:be,height:ke,data:Te}=a,$e=a;return this.style.addImage(I,{data:new o.R({width:be,height:ke},new Uint8Array(Te)),pixelRatio:_,stretchX:T,stretchY:z,content:q,textFitWidth:te,textFitHeight:ae,sdf:M,version:0,userImage:$e}),$e.onAdd&&$e.onAdd(this,I),this}}{const{width:be,height:ke,data:Te}=O.getImageData(a);this.style.addImage(I,{data:new o.R({width:be,height:ke},Te),pixelRatio:_,stretchX:T,stretchY:z,content:q,textFitWidth:te,textFitHeight:ae,sdf:M,version:0})}}updateImage(I,a){const c=this.style.getImage(I);if(!c)return this.fire(new o.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const _=a instanceof HTMLImageElement||o.b(a)?O.getImageData(a):a,{width:M,height:T,data:z}=_;if(M===void 0||T===void 0)return this.fire(new o.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(M!==c.data.width||T!==c.data.height)return this.fire(new o.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const q=!(a instanceof HTMLImageElement||o.b(a));return c.data.replace(z,q),this.style.updateImage(I,c),this}getImage(I){return this.style.getImage(I)}hasImage(I){return I?!!this.style.getImage(I):(this.fire(new o.k(new Error("Missing required image id"))),!1)}removeImage(I){this.style.removeImage(I)}loadImage(I){return re.getImage(this._requestManager.transformRequest(I,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(I,a){return this._lazyInitEmptyStyle(),this.style.addLayer(I,a),this._update(!0)}moveLayer(I,a){return this.style.moveLayer(I,a),this._update(!0)}removeLayer(I){return this.style.removeLayer(I),this._update(!0)}getLayer(I){return this.style.getLayer(I)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(I,a,c){return this.style.setLayerZoomRange(I,a,c),this._update(!0)}setFilter(I,a,c={}){return this.style.setFilter(I,a,c),this._update(!0)}getFilter(I){return this.style.getFilter(I)}setPaintProperty(I,a,c,_={}){return this.style.setPaintProperty(I,a,c,_),this._update(!0)}getPaintProperty(I,a){return this.style.getPaintProperty(I,a)}setLayoutProperty(I,a,c,_={}){return this.style.setLayoutProperty(I,a,c,_),this._update(!0)}getLayoutProperty(I,a){return this.style.getLayoutProperty(I,a)}setGlyphs(I,a={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(I,a),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(I,a,c={}){return this._lazyInitEmptyStyle(),this.style.addSprite(I,a,c,_=>{_||this._update(!0)}),this}removeSprite(I){return this._lazyInitEmptyStyle(),this.style.removeSprite(I),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(I,a={}){return this._lazyInitEmptyStyle(),this.style.setSprite(I,a,c=>{c||this._update(!0)}),this}setLight(I,a={}){return this._lazyInitEmptyStyle(),this.style.setLight(I,a),this._update(!0)}getLight(){return this.style.getLight()}setSky(I,a={}){return this._lazyInitEmptyStyle(),this.style.setSky(I,a),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(I,a){return this.style.setFeatureState(I,a),this._update()}removeFeatureState(I,a){return this.style.removeFeatureState(I,a),this._update()}getFeatureState(I){return this.style.getFeatureState(I)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let I=0,a=0;return this._container&&(I=this._container.clientWidth||400,a=this._container.clientHeight||300),[I,a]}_setupContainer(){const I=this._container;I.classList.add("maplibregl-map");const a=this._canvasContainer=P.create("div","maplibregl-canvas-container",I);this._interactive&&a.classList.add("maplibregl-interactive"),this._canvas=P.create("canvas","maplibregl-canvas",a),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const c=this._containerDimensions(),_=this._getClampedPixelRatio(c[0],c[1]);this._resizeCanvas(c[0],c[1],_);const M=this._controlContainer=P.create("div","maplibregl-control-container",I),T=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(z=>{T[z]=P.create("div",`maplibregl-ctrl-${z} `,M)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(I,a,c){this._canvas.width=Math.floor(c*I),this._canvas.height=Math.floor(c*a),this._canvas.style.width=`${I}px`,this._canvas.style.height=`${a}px`}_setupPainter(){const I=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let a=null;this._canvas.addEventListener("webglcontextcreationerror",_=>{a={requestedAttributes:I},_&&(a.statusMessage=_.statusMessage,a.type=_.type)},{once:!0});let c=null;if(c=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,I):this._canvas.getContext("webgl2",I)||this._canvas.getContext("webgl",I),!c){const _="Failed to initialize WebGL";throw a?(a.message=_,new Error(JSON.stringify(a))):new Error(_)}this.painter=new $c(c,this.transform),U.testSupport(c)}migrateProjection(I,a){super.migrateProjection(I,a),this.painter.transform=I,this.fire(new o.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(I){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||I,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(I){return this._update(),this._renderTaskQueue.add(I)}_cancelRenderFrame(I){this._renderTaskQueue.remove(I)}_render(I){var a,c,_,M,T;const z=this._idleTriggered?this._fadeDuration:0,q=((a=this.style.projection)===null||a===void 0?void 0:a.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(I),this._removed)return;let te=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const ke=this.transform.zoom,Te=O.now();this.style.zoomHistory.update(ke,Te);const $e=new o.C(ke,{now:Te,fadeDuration:z,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Xe=$e.crossFadingFactor();Xe===1&&Xe===this._crossFadingFactor||(te=!0,this._crossFadingFactor=Xe),this.style.update($e)}const ae=((c=this.style.projection)===null||c===void 0?void 0:c.transitionState)>0!==q;(_=this.style.projection)===null||_===void 0||_.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((M=this.style.projection)===null||M===void 0?void 0:M.transitionState,(T=this.style.projection)===null||T===void 0?void 0:T.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||ae)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,z,this._crossSourceCollisions,ae),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:z,showPadding:this.showPadding}),this.fire(new o.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,o.cf.mark(o.cg.load),this.fire(new o.l("load"))),this.style&&(this.style.hasTransitions()||te)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const be=this._sourcesDirty||this._styleDirty||this._placementDirty;return be||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new o.l("idle")),!this._loaded||this._fullyLoaded||be||(this._fullyLoaded=!0,o.cf.mark(o.cg.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var I;this._hash&&this._hash.remove();for(const c of this._controls)c.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),re.removeThrottleControl(this._imageQueueHandle),(I=this._resizeObserver)===null||I===void 0||I.disconnect();const a=this.painter.context.gl.getExtension("WEBGL_lose_context");a!=null&&a.loseContext&&a.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),P.remove(this._canvasContainer),P.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),o.cf.clearMetrics(),this._removed=!0,this.fire(new o.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,O.frame(this._frameRequest,I=>{o.cf.frame(I),this._frameRequest=null;try{this._render(I)}catch(a){if(!o.ch(a)&&!function(c){return c.message===Gu}(a))throw a}},()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(I){this._showTileBoundaries!==I&&(this._showTileBoundaries=I,this._update())}get showPadding(){return!!this._showPadding}set showPadding(I){this._showPadding!==I&&(this._showPadding=I,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(I){this._showCollisionBoxes!==I&&(this._showCollisionBoxes=I,I?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(I){this._showOverdrawInspector!==I&&(this._showOverdrawInspector=I,this._update())}get repaint(){return!!this._repaint}set repaint(I){this._repaint!==I&&(this._repaint=I,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(I){this._vertices=I,this._update()}get version(){return sf}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(I){return this._lazyInitEmptyStyle(),this.style.setProjection(I),this._update(!0)}},l.MapMouseEvent=gi,l.MapTouchEvent=Gr,l.MapWheelEvent=ta,l.Marker=xu,l.NavigationControl=class{constructor(I){this._updateZoomButtons=()=>{const a=this._map.getZoom(),c=a===this._map.getMaxZoom(),_=a===this._map.getMinZoom();this._zoomInButton.disabled=c,this._zoomOutButton.disabled=_,this._zoomInButton.setAttribute("aria-disabled",c.toString()),this._zoomOutButton.setAttribute("aria-disabled",_.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(a,c)=>{const _=this._map._getUIString(`NavigationControl.${c}`);a.title=_,a.setAttribute("aria-label",_)},this.options=o.e({},ks,I),this._container=P.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",a=>a.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",a=>this._map.zoomIn({},{originalEvent:a})),P.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",a=>this._map.zoomOut({},{originalEvent:a})),P.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",a=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:a}):this._map.resetNorth({},{originalEvent:a})}),this._compassIcon=P.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(I){return this._map=I,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Oc(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){P.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(I,a){const c=P.create("button",I,this._container);return c.type="button",c.addEventListener("click",a),c}},l.Popup=class extends o.E{constructor(I){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:void 0)},this.remove=()=>(this._content&&P.remove(this._content),this._container&&(P.remove(this._container),delete this._container),this._closeButton&&this._closeButton.removeEventListener("click",this._onClose),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new o.l("close"))),this),this._onMouseUp=a=>{this._update(a.point)},this._onMouseMove=a=>{this._update(a.point)},this._onDrag=a=>{this._update(a.point)},this._update=a=>{var c;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=P.create("div","maplibregl-popup",this._map.getContainer()),this._tip=P.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const q of this.options.className.split(" "))this._container.classList.add(q);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?Cl(this._lngLat,this._flatPos,this._map.transform):(c=this._lngLat)===null||c===void 0?void 0:c.wrap(),this._trackPointer&&!a)return;const _=this._flatPos=this._pos=this._trackPointer&&a?a:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&a?a:this._map.transform.locationToScreenPoint(this._lngLat));let M=this.options.anchor;const T=jl(this.options.offset);if(!M){const q=this._container.offsetWidth,te=this._container.offsetHeight;let ae;ae=_.y+T.bottom.y<te?["top"]:_.y>this._map.transform.height-te?["bottom"]:[],_.x<q/2?ae.push("left"):_.x>this._map.transform.width-q/2&&ae.push("right"),M=ae.length===0?"bottom":ae.join("-")}let z=_.add(T[M]);this.options.subpixelPositioning||(z=z.round()),P.setTransform(this._container,`${ou[M]} translate(${z.x}px,${z.y}px)`),Ic(this._container,M,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=o.e(Object.create(Ac),I)}addTo(I){return this._map&&this.remove(),this._map=I,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new o.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(I){return this._lngLat=o.Q.convert(I),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(I){return this.setDOMContent(document.createTextNode(I))}setHTML(I){const a=document.createDocumentFragment(),c=document.createElement("body");let _;for(c.innerHTML=I;_=c.firstChild,_;)a.appendChild(_);return this.setDOMContent(a)}getMaxWidth(){var I;return(I=this._container)===null||I===void 0?void 0:I.style.maxWidth}setMaxWidth(I){return this.options.maxWidth=I,this._update(),this}setDOMContent(I){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=P.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(I),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(I){return this._container&&this._container.classList.add(I),this}removeClassName(I){return this._container&&this._container.classList.remove(I),this}setOffset(I){return this.options.offset=I,this._update(),this}toggleClassName(I){if(this._container)return this._container.classList.toggle(I)}setSubpixelPositioning(I){this.options.subpixelPositioning=I}_createCloseButton(){this.options.closeButton&&(this._closeButton=P.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const I=this._container.querySelector(fA);I&&I.focus()}},l.RasterDEMTileSource=Gn,l.RasterTileSource=vn,l.ScaleControl=class{constructor(I){this._onMove=()=>{RA(this._map,this._container,this.options)},this.setUnit=a=>{this.options.unit=a,RA(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},au),I)}getDefaultPosition(){return"bottom-left"}onAdd(I){return this._map=I,this._container=P.create("div","maplibregl-ctrl maplibregl-ctrl-scale",I.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){P.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},l.ScrollZoomHandler=Ra,l.Style=cd,l.TerrainControl=class{constructor(I){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=I}onAdd(I){return this._map=I,this._container=P.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=P.create("button","maplibregl-ctrl-terrain",this._container),P.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){P.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},l.TwoFingersTouchPitchHandler=Ec,l.TwoFingersTouchRotateHandler=Sc,l.TwoFingersTouchZoomHandler=wd,l.TwoFingersTouchZoomRotateHandler=KA,l.VectorTileSource=Kt,l.VideoSource=Pn,l.addSourceType=(I,a)=>o._(void 0,void 0,void 0,function*(){if(lr(I))throw new Error(`A source type called "${I}" already exists.`);((c,_)=>{$n[c]=_})(I,a)}),l.clearPrewarmedResources=function(){const I=Yt;I&&(I.isPreloaded()&&I.numActive()===1?(I.release(De),Yt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},l.createTileMesh=st,l.getMaxParallelImageRequests=function(){return o.a.MAX_PARALLEL_IMAGE_REQUESTS},l.getRTLTextPluginStatus=function(){return ce().getRTLTextPluginStatus()},l.getVersion=function(){return Xc},l.getWorkerCount=function(){return He.workerCount},l.getWorkerUrl=function(){return o.a.WORKER_URL},l.importScriptInWorkers=function(I){return Ue().broadcast("IS",I)},l.prewarm=function(){Ft().acquire(De)},l.setMaxParallelImageRequests=function(I){o.a.MAX_PARALLEL_IMAGE_REQUESTS=I},l.setRTLTextPlugin=function(I,a){return ce().setRTLTextPlugin(I,a)},l.setWorkerCount=function(I){He.workerCount=I},l.setWorkerUrl=function(I){o.a.WORKER_URL=I}});var s=t;return s})}(xb)),xb.exports}var nV=tV();const $1=fl(nV);var j_=typeof globalThis<"u"?globalThis:typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:{};function DF(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var bv={exports:{}};bv.exports;var v7;function rV(){return v7||(v7=1,function(n,e){var t=200,r="__lodash_hash_undefined__",i=1,s=2,l=9007199254740991,o="[object Arguments]",f="[object Array]",y="[object AsyncFunction]",x="[object Boolean]",B="[object Date]",O="[object Error]",P="[object Function]",U="[object GeneratorFunction]",j="[object Map]",N="[object Number]",Y="[object Null]",H="[object Object]",se="[object Promise]",re="[object Proxy]",V="[object RegExp]",ne="[object Set]",G="[object String]",oe="[object Symbol]",he="[object Undefined]",fe="[object WeakMap]",Ee="[object ArrayBuffer]",me="[object DataView]",Se="[object Float32Array]",Ke="[object Float64Array]",xe="[object Int8Array]",at="[object Int16Array]",Ze="[object Int32Array]",Je="[object Uint8Array]",Ne="[object Uint8ClampedArray]",we="[object Uint16Array]",De="[object Uint32Array]",He=/[\\^$.*+?()[\]{}|]/g,bt=/^\[object .+?Constructor\]$/,Yt=/^(?:0|[1-9]\d*)$/,yt={};yt[Se]=yt[Ke]=yt[xe]=yt[at]=yt[Ze]=yt[Je]=yt[Ne]=yt[we]=yt[De]=!0,yt[o]=yt[f]=yt[Ee]=yt[x]=yt[me]=yt[B]=yt[O]=yt[P]=yt[j]=yt[N]=yt[H]=yt[V]=yt[ne]=yt[G]=yt[fe]=!1;var Ft=typeof j_=="object"&&j_&&j_.Object===Object&&j_,Pt=typeof self=="object"&&self&&self.Object===Object&&self,Ue=Ft||Pt||Function("return this")(),Pe=e&&!e.nodeType&&e,Be=Pe&&!0&&n&&!n.nodeType&&n,it=Be&&Be.exports===Pe,_t=it&&Ft.process,pt=function(){try{return _t&&_t.binding&&_t.binding("util")}catch{}}(),Lt=pt&&pt.isTypedArray;function nn(ee,Oe){for(var st=-1,Vt=ee==null?0:ee.length,Er=0,qn=[];++st<Vt;){var si=ee[st];Oe(si,st,ee)&&(qn[Er++]=si)}return qn}function Kt(ee,Oe){for(var st=-1,Vt=Oe.length,Er=ee.length;++st<Vt;)ee[Er+st]=Oe[st];return ee}function vn(ee,Oe){for(var st=-1,Vt=ee==null?0:ee.length;++st<Vt;)if(Oe(ee[st],st,ee))return!0;return!1}function Gn(ee,Oe){for(var st=-1,Vt=Array(ee);++st<ee;)Vt[st]=Oe(st);return Vt}function tn(ee){return function(Oe){return ee(Oe)}}function dr(ee,Oe){return ee.has(Oe)}function Pn(ee,Oe){return ee==null?void 0:ee[Oe]}function pn(ee){var Oe=-1,st=Array(ee.size);return ee.forEach(function(Vt,Er){st[++Oe]=[Er,Vt]}),st}function $n(ee,Oe){return function(st){return ee(Oe(st))}}function lr(ee){var Oe=-1,st=Array(ee.size);return ee.forEach(function(Vt){st[++Oe]=Vt}),st}var vr=Array.prototype,Zn=Function.prototype,Ge=Object.prototype,ce=Ue["__core-js_shared__"],pe=Zn.toString,nt=Ge.hasOwnProperty,wt=function(){var ee=/[^.]+$/.exec(ce&&ce.keys&&ce.keys.IE_PROTO||"");return ee?"Symbol(src)_1."+ee:""}(),Ht=Ge.toString,sn=RegExp("^"+pe.call(nt).replace(He,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Hn=it?Ue.Buffer:void 0,Ve=Ue.Symbol,J=Ue.Uint8Array,ve=Ge.propertyIsEnumerable,p=vr.splice,Fe=Ve?Ve.toStringTag:void 0,Qe=Object.getOwnPropertySymbols,rt=Hn?Hn.isBuffer:void 0,ct=$n(Object.keys,Object),dt=to(Ue,"DataView"),qt=to(Ue,"Map"),Gt=to(Ue,"Promise"),zt=to(Ue,"Set"),on=to(Ue,"WeakMap"),jt=to(Object,"create"),Dn=Oi(dt),rr=Oi(qt),Br=Oi(Gt),Jn=Oi(zt),un=Oi(on),er=Ve?Ve.prototype:void 0,fr=er?er.valueOf:void 0;function Sr(ee){var Oe=-1,st=ee==null?0:ee.length;for(this.clear();++Oe<st;){var Vt=ee[Oe];this.set(Vt[0],Vt[1])}}function Ur(){this.__data__=jt?jt(null):{},this.size=0}function ri(ee){var Oe=this.has(ee)&&delete this.__data__[ee];return this.size-=Oe?1:0,Oe}function Or(ee){var Oe=this.__data__;if(jt){var st=Oe[ee];return st===r?void 0:st}return nt.call(Oe,ee)?Oe[ee]:void 0}function ka(ee){var Oe=this.__data__;return jt?Oe[ee]!==void 0:nt.call(Oe,ee)}function Wi(ee,Oe){var st=this.__data__;return this.size+=this.has(ee)?0:1,st[ee]=jt&&Oe===void 0?r:Oe,this}Sr.prototype.clear=Ur,Sr.prototype.delete=ri,Sr.prototype.get=Or,Sr.prototype.has=ka,Sr.prototype.set=Wi;function Bi(ee){var Oe=-1,st=ee==null?0:ee.length;for(this.clear();++Oe<st;){var Vt=ee[Oe];this.set(Vt[0],Vt[1])}}function eo(){this.__data__=[],this.size=0}function ws(ee){var Oe=this.__data__,st=ur(Oe,ee);if(st<0)return!1;var Vt=Oe.length-1;return st==Vt?Oe.pop():p.call(Oe,st,1),--this.size,!0}function ko(ee){var Oe=this.__data__,st=ur(Oe,ee);return st<0?void 0:Oe[st][1]}function Hi(ee){return ur(this.__data__,ee)>-1}function Sl(ee,Oe){var st=this.__data__,Vt=ur(st,ee);return Vt<0?(++this.size,st.push([ee,Oe])):st[Vt][1]=Oe,this}Bi.prototype.clear=eo,Bi.prototype.delete=ws,Bi.prototype.get=ko,Bi.prototype.has=Hi,Bi.prototype.set=Sl;function Go(ee){var Oe=-1,st=ee==null?0:ee.length;for(this.clear();++Oe<st;){var Vt=ee[Oe];this.set(Vt[0],Vt[1])}}function Za(){this.size=0,this.__data__={hash:new Sr,map:new(qt||Bi),string:new Sr}}function Xa(ee){var Oe=oi(this,ee).delete(ee);return this.size-=Oe?1:0,Oe}function Yi(ee){return oi(this,ee).get(ee)}function Lu(ee){return oi(this,ee).has(ee)}function Jl(ee,Oe){var st=oi(this,ee),Vt=st.size;return st.set(ee,Oe),this.size+=st.size==Vt?0:1,this}Go.prototype.clear=Za,Go.prototype.delete=Xa,Go.prototype.get=Yi,Go.prototype.has=Lu,Go.prototype.set=Jl;function wo(ee){var Oe=-1,st=ee==null?0:ee.length;for(this.__data__=new Go;++Oe<st;)this.add(ee[Oe])}function wr(ee){return this.__data__.set(ee,r),this}function Ta(ee){return this.__data__.has(ee)}wo.prototype.add=wo.prototype.push=wr,wo.prototype.has=Ta;function Ss(ee){var Oe=this.__data__=new Bi(ee);this.size=Oe.size}function Zs(){this.__data__=new Bi,this.size=0}function Ye(ee){var Oe=this.__data__,st=Oe.delete(ee);return this.size=Oe.size,st}function xt(ee){return this.__data__.get(ee)}function Cn(ee){return this.__data__.has(ee)}function Qn(ee,Oe){var st=this.__data__;if(st instanceof Bi){var Vt=st.__data__;if(!qt||Vt.length<t-1)return Vt.push([ee,Oe]),this.size=++st.size,this;st=this.__data__=new Go(Vt)}return st.set(ee,Oe),this.size=st.size,this}Ss.prototype.clear=Zs,Ss.prototype.delete=Ye,Ss.prototype.get=xt,Ss.prototype.has=Cn,Ss.prototype.set=Qn;function fn(ee,Oe){var st=va(ee),Vt=!st&&ea(ee),Er=!st&&!Vt&&pl(ee),qn=!st&&!Vt&&!Er&&Dl(ee),si=st||Vt||Er||qn,di=si?Gn(ee.length,String):[],Ir=di.length;for(var Pr in ee)nt.call(ee,Pr)&&!(si&&(Pr=="length"||Er&&(Pr=="offset"||Pr=="parent")||qn&&(Pr=="buffer"||Pr=="byteLength"||Pr=="byteOffset")||Es(Pr,Ir)))&&di.push(Pr);return di}function ur(ee,Oe){for(var st=ee.length;st--;)if(is(ee[st][0],Oe))return st;return-1}function Di(ee,Oe,st){var Vt=Oe(ee);return va(ee)?Vt:Kt(Vt,st(ee))}function vo(ee){return ee==null?ee===void 0?he:Y:Fe&&Fe in Object(ee)?$o(ee):Ns(ee)}function rs(ee){return qr(ee)&&vo(ee)==o}function ua(ee,Oe,st,Vt,Er){return ee===Oe?!0:ee==null||Oe==null||!qr(ee)&&!qr(Oe)?ee!==ee&&Oe!==Oe:eu(ee,Oe,st,Vt,ua,Er)}function eu(ee,Oe,st,Vt,Er,qn){var si=va(ee),di=va(Oe),Ir=si?f:js(ee),Pr=di?f:js(Oe);Ir=Ir==o?H:Ir,Pr=Pr==o?H:Pr;var pi=Ir==H,Do=Pr==H,mi=Ir==Pr;if(mi&&pl(ee)){if(!pl(Oe))return!1;si=!0,pi=!1}if(mi&&!pi)return qn||(qn=new Ss),si||Dl(ee)?Cs(ee,Oe,st,Vt,Er,qn):xi(ee,Oe,Ir,st,Vt,Er,qn);if(!(st&i)){var zr=pi&&nt.call(ee,"__wrapped__"),Co=Do&&nt.call(Oe,"__wrapped__");if(zr||Co){var Zi=zr?ee.value():ee,To=Co?Oe.value():Oe;return qn||(qn=new Ss),Er(Zi,To,st,Vt,qn)}}return mi?(qn||(qn=new Ss),uA(ee,Oe,st,Vt,Er,qn)):!1}function ii(ee){if(!zi(ee)||Js(ee))return!1;var Oe=fo(ee)?sn:bt;return Oe.test(Oi(ee))}function qi(ee){return qr(ee)&&Uu(ee.length)&&!!yt[vo(ee)]}function Aa(ee){if(!Au(ee))return ct(ee);var Oe=[];for(var st in Object(ee))nt.call(ee,st)&&st!="constructor"&&Oe.push(st);return Oe}function Cs(ee,Oe,st,Vt,Er,qn){var si=st&i,di=ee.length,Ir=Oe.length;if(di!=Ir&&!(si&&Ir>di))return!1;var Pr=qn.get(ee);if(Pr&&qn.get(Oe))return Pr==Oe;var pi=-1,Do=!0,mi=st&s?new wo:void 0;for(qn.set(ee,Oe),qn.set(Oe,ee);++pi<di;){var zr=ee[pi],Co=Oe[pi];if(Vt)var Zi=si?Vt(Co,zr,pi,Oe,ee,qn):Vt(zr,Co,pi,ee,Oe,qn);if(Zi!==void 0){if(Zi)continue;Do=!1;break}if(mi){if(!vn(Oe,function(To,ca){if(!dr(mi,ca)&&(zr===To||Er(zr,To,st,Vt,qn)))return mi.push(ca)})){Do=!1;break}}else if(!(zr===Co||Er(zr,Co,st,Vt,qn))){Do=!1;break}}return qn.delete(ee),qn.delete(Oe),Do}function xi(ee,Oe,st,Vt,Er,qn,si){switch(st){case me:if(ee.byteLength!=Oe.byteLength||ee.byteOffset!=Oe.byteOffset)return!1;ee=ee.buffer,Oe=Oe.buffer;case Ee:return!(ee.byteLength!=Oe.byteLength||!qn(new J(ee),new J(Oe)));case x:case B:case N:return is(+ee,+Oe);case O:return ee.name==Oe.name&&ee.message==Oe.message;case V:case G:return ee==Oe+"";case j:var di=pn;case ne:var Ir=Vt&i;if(di||(di=lr),ee.size!=Oe.size&&!Ir)return!1;var Pr=si.get(ee);if(Pr)return Pr==Oe;Vt|=s,si.set(ee,Oe);var pi=Cs(di(ee),di(Oe),Vt,Er,qn,si);return si.delete(ee),pi;case oe:if(fr)return fr.call(ee)==fr.call(Oe)}return!1}function uA(ee,Oe,st,Vt,Er,qn){var si=st&i,di=Ja(ee),Ir=di.length,Pr=Ja(Oe),pi=Pr.length;if(Ir!=pi&&!si)return!1;for(var Do=Ir;Do--;){var mi=di[Do];if(!(si?mi in Oe:nt.call(Oe,mi)))return!1}var zr=qn.get(ee);if(zr&&qn.get(Oe))return zr==Oe;var Co=!0;qn.set(ee,Oe),qn.set(Oe,ee);for(var Zi=si;++Do<Ir;){mi=di[Do];var To=ee[mi],ca=Oe[mi];if(Vt)var Pa=si?Vt(ca,To,mi,Oe,ee,qn):Vt(To,ca,mi,ee,Oe,qn);if(!(Pa===void 0?To===ca||Er(To,ca,st,Vt,qn):Pa)){Co=!1;break}Zi||(Zi=mi=="constructor")}if(Co&&!Zi){var cu=ee.constructor,Ws=Oe.constructor;cu!=Ws&&"constructor"in ee&&"constructor"in Oe&&!(typeof cu=="function"&&cu instanceof cu&&typeof Ws=="function"&&Ws instanceof Ws)&&(Co=!1)}return qn.delete(ee),qn.delete(Oe),Co}function Ja(ee){return Di(ee,Vi,Qo)}function oi(ee,Oe){var st=ee.__data__;return Xs(Oe)?st[typeof Oe=="string"?"string":"hash"]:st.map}function to(ee,Oe){var st=Pn(ee,Oe);return ii(st)?st:void 0}function $o(ee){var Oe=nt.call(ee,Fe),st=ee[Fe];try{ee[Fe]=void 0;var Vt=!0}catch{}var Er=Ht.call(ee);return Vt&&(Oe?ee[Fe]=st:delete ee[Fe]),Er}var Qo=Qe?function(ee){return ee==null?[]:(ee=Object(ee),nn(Qe(ee),function(Oe){return ve.call(ee,Oe)}))}:uo,js=vo;(dt&&js(new dt(new ArrayBuffer(1)))!=me||qt&&js(new qt)!=j||Gt&&js(Gt.resolve())!=se||zt&&js(new zt)!=ne||on&&js(new on)!=fe)&&(js=function(ee){var Oe=vo(ee),st=Oe==H?ee.constructor:void 0,Vt=st?Oi(st):"";if(Vt)switch(Vt){case Dn:return me;case rr:return j;case Br:return se;case Jn:return ne;case un:return fe}return Oe});function Es(ee,Oe){return Oe=Oe??l,!!Oe&&(typeof ee=="number"||Yt.test(ee))&&ee>-1&&ee%1==0&&ee<Oe}function Xs(ee){var Oe=typeof ee;return Oe=="string"||Oe=="number"||Oe=="symbol"||Oe=="boolean"?ee!=="__proto__":ee===null}function Js(ee){return!!wt&&wt in ee}function Au(ee){var Oe=ee&&ee.constructor,st=typeof Oe=="function"&&Oe.prototype||Ge;return ee===st}function Ns(ee){return Ht.call(ee)}function Oi(ee){if(ee!=null){try{return pe.call(ee)}catch{}try{return ee+""}catch{}}return""}function is(ee,Oe){return ee===Oe||ee!==ee&&Oe!==Oe}var ea=rs(function(){return arguments}())?rs:function(ee){return qr(ee)&&nt.call(ee,"callee")&&!ve.call(ee,"callee")},va=Array.isArray;function As(ee){return ee!=null&&Uu(ee.length)&&!fo(ee)}var pl=rt||Ki;function ml(ee,Oe){return ua(ee,Oe)}function fo(ee){if(!zi(ee))return!1;var Oe=vo(ee);return Oe==P||Oe==U||Oe==y||Oe==re}function Uu(ee){return typeof ee=="number"&&ee>-1&&ee%1==0&&ee<=l}function zi(ee){var Oe=typeof ee;return ee!=null&&(Oe=="object"||Oe=="function")}function qr(ee){return ee!=null&&typeof ee=="object"}var Dl=Lt?tn(Lt):qi;function Vi(ee){return As(ee)?fn(ee):Aa(ee)}function uo(){return[]}function Ki(){return!1}n.exports=ml}(bv,bv.exports)),bv.exports}var iV=rV(),oV=DF(iV);function zE(n,e,t){const r={id:[e,t,"circle"].join("_"),source:e,type:"circle",paint:{"circle-color":n,"circle-radius":2},filter:["==","$type","Point"]};return t&&(r["source-layer"]=t),r}function jE(n,e,t,r){const i={id:[t,r,"polygon"].join("_"),source:t,type:"fill",paint:{"fill-color":n,"fill-antialias":!0,"fill-outline-color":n},filter:["==","$type","Polygon"]};return r&&(i["source-layer"]=r),i}function NE(n,e,t){const r={id:[e,t,"line"].join("_"),source:e,layout:{"line-join":"round","line-cap":"round"},type:"line",paint:{"line-color":n},filter:["==","$type","LineString"]};return t&&(r["source-layer"]=t),r}function sV(n,e){const t=[],r=[],i=[];function s(l){return{circle:e(l,.8),line:e(l,.6),polygon:e(l,.3),polygonOutline:e(l,.6),default:e(l,1)}}return Object.keys(n).forEach(l=>{const o=n[l];if(!o||o.length===0){const f=s(l);r.push(zE(f.circle,l)),i.push(NE(f.line,l)),t.push(jE(f.polygon,f.polygonOutline,l))}else o.forEach(f=>{const y=s(f);r.push(zE(y.circle,l,f)),i.push(NE(y.line,l,f)),t.push(jE(y.polygon,y.polygonOutline,l,f))})}),t.concat(i).concat(r)}function aV(n,e,t){t=Object.assign({backgroundColor:"#fff"},t);const r={id:"background",type:"background",paint:{"background-color":t.backgroundColor}},i={};return Object.keys(n.sources).forEach(s=>{const l=n.sources[s];(l.type==="vector"||l.type==="geojson")&&(i[s]=l)}),Object.assign(n,{layers:[r].concat(e),sources:i})}var C7={polygonLayer:jE,lineLayer:NE,circleLayer:zE,generateInspectStyle:aV,generateColoredLayers:sV};class lV{constructor(e){e=Object.assign({show:!0,onToggle(){}},e),this._btn=this.createButton(),this._btn.onclick=e.onToggle,this.elem=this.createContainer(this._btn,e.show)}createButton(){const e=document.createElement("button");return e.className="maplibregl-ctrl-icon maplibregl-ctrl-inspect",e.type="button",e.title="Toggle Inspect",e.setAttribute("aria-label","Toggle Inspect"),e}createContainer(e,t){const r=document.createElement("div");return r.className="maplibregl-ctrl maplibregl-ctrl-group",r.appendChild(e),t||(r.style.display="none"),r}setInspectIcon(){this._btn.className="maplibregl-ctrl-icon maplibregl-ctrl-inspect"}setMapIcon(){this._btn.className="maplibregl-ctrl-icon maplibregl-ctrl-map"}}function uV(n){return typeof n>"u"||n===null?n:n instanceof Date?n.toLocaleString():typeof n=="object"||typeof n=="number"||typeof n=="string"?n.toString():n}function j3(n,e){return`<div class="maplibregl-inspect_property"><div class="maplibregl-inspect_property-name">${n}</div><div class="maplibregl-inspect_property-value">${uV(e)}</div></div>`}function AV(n){return`<div class="maplibregl-inspect_layer">${n}</div>`}function cV(n){const e=AV(n.layer["source-layer"]||n.layer.source),t=j3("$id",n.id),r=j3("$type",n.geometry.type),i=Object.keys(n.properties).map(s=>j3(s,n.properties[s]));return[e,t,r].concat(i).join("")}function dV(n){return n.map(e=>`<div class="maplibregl-inspect_feature">${cV(e)}</div>`).join("")}function hV(n){return`<div class="maplibregl-inspect_popup">${dV(n)}</div>`}var xv={exports:{}},fV=xv.exports,_7;function pV(){return _7||(_7=1,function(n,e){(function(t,r){{var i=r();n.exports&&(e=n.exports=i),e.randomColor=i}})(fV,function(){var t=null,r={};Y();var i=[],s=function(G){if(G=G||{},G.seed!==void 0&&G.seed!==null&&G.seed===parseInt(G.seed,10))t=G.seed;else if(typeof G.seed=="string")t=V(G.seed);else{if(G.seed!==void 0&&G.seed!==null)throw new TypeError("The seed value must be an integer or string");t=null}var oe,he,fe;if(G.count!==null&&G.count!==void 0){for(var Ee=G.count,me=[],Se=0;Se<G.count;Se++)i.push(!1);for(G.count=null;Ee>me.length;){var Ke=s(G);t!==null&&(G.seed=t),me.push(Ke)}return G.count=Ee,me}return oe=l(G),he=o(oe,G),fe=f(oe,he,G),y([oe,he,fe],G)};function l(G){if(i.length>0){var oe=ne(G.hue),he=U(oe),fe=(oe[1]-oe[0])/i.length,Ee=parseInt((he-oe[0])/fe);i[Ee]===!0?Ee=(Ee+2)%i.length:i[Ee]=!0;var me=(oe[0]+Ee*fe)%359,Se=(oe[0]+(Ee+1)*fe)%359;return oe=[me,Se],he=U(oe),he<0&&(he=360+he),he}else{var oe=B(G.hue);return he=U(oe),he<0&&(he=360+he),he}}function o(G,oe){if(oe.hue==="monochrome")return 0;if(oe.luminosity==="random")return U([0,100]);var he=O(G),fe=he[0],Ee=he[1];switch(oe.luminosity){case"bright":fe=55;break;case"dark":fe=Ee-10;break;case"light":Ee=55;break}return U([fe,Ee])}function f(G,oe,he){var fe=x(G,oe),Ee=100;switch(he.luminosity){case"dark":Ee=fe+20;break;case"light":fe=(Ee+fe)/2;break;case"random":fe=0,Ee=100;break}return U([fe,Ee])}function y(G,oe){switch(oe.format){case"hsvArray":return G;case"hslArray":return re(G);case"hsl":var he=re(G);return"hsl("+he[0]+", "+he[1]+"%, "+he[2]+"%)";case"hsla":var fe=re(G),Se=oe.alpha||Math.random();return"hsla("+fe[0]+", "+fe[1]+"%, "+fe[2]+"%, "+Se+")";case"rgbArray":return H(G);case"rgb":var Ee=H(G);return"rgb("+Ee.join(", ")+")";case"rgba":var me=H(G),Se=oe.alpha||Math.random();return"rgba("+me.join(", ")+", "+Se+")";default:return j(G)}}function x(G,oe){for(var he=P(G).lowerBounds,fe=0;fe<he.length-1;fe++){var Ee=he[fe][0],me=he[fe][1],Se=he[fe+1][0],Ke=he[fe+1][1];if(oe>=Ee&&oe<=Se){var xe=(Ke-me)/(Se-Ee),at=me-xe*Ee;return xe*oe+at}}return 0}function B(G){if(typeof parseInt(G)=="number"){var oe=parseInt(G);if(oe<360&&oe>0)return[oe,oe]}if(typeof G=="string"){if(r[G]){var he=r[G];if(he.hueRange)return he.hueRange}else if(G.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var fe=se(G)[0];return[fe,fe]}}return[0,360]}function O(G){return P(G).saturationRange}function P(G){G>=334&&G<=360&&(G-=360);for(var oe in r){var he=r[oe];if(he.hueRange&&G>=he.hueRange[0]&&G<=he.hueRange[1])return r[oe]}return"Color not found"}function U(G){if(t===null){var oe=.618033988749895,he=Math.random();return he+=oe,he%=1,Math.floor(G[0]+he*(G[1]+1-G[0]))}else{var fe=G[1]||1,Ee=G[0]||0;t=(t*9301+49297)%233280;var me=t/233280;return Math.floor(Ee+me*(fe-Ee))}}function j(G){var oe=H(G);function he(Ee){var me=Ee.toString(16);return me.length==1?"0"+me:me}var fe="#"+he(oe[0])+he(oe[1])+he(oe[2]);return fe}function N(G,oe,he){var fe=he[0][0],Ee=he[he.length-1][0],me=he[he.length-1][1],Se=he[0][1];r[G]={hueRange:oe,lowerBounds:he,saturationRange:[fe,Ee],brightnessRange:[me,Se]}}function Y(){N("monochrome",null,[[0,0],[100,0]]),N("red",[-26,18],[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]),N("orange",[18,46],[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]),N("yellow",[46,62],[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]),N("green",[62,178],[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]),N("blue",[178,257],[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]),N("purple",[257,282],[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]),N("pink",[282,334],[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]])}function H(G){var oe=G[0];oe===0&&(oe=1),oe===360&&(oe=359),oe=oe/360;var he=G[1]/100,fe=G[2]/100,Ee=Math.floor(oe*6),me=oe*6-Ee,Se=fe*(1-he),Ke=fe*(1-me*he),xe=fe*(1-(1-me)*he),at=256,Ze=256,Je=256;switch(Ee){case 0:at=fe,Ze=xe,Je=Se;break;case 1:at=Ke,Ze=fe,Je=Se;break;case 2:at=Se,Ze=fe,Je=xe;break;case 3:at=Se,Ze=Ke,Je=fe;break;case 4:at=xe,Ze=Se,Je=fe;break;case 5:at=fe,Ze=Se,Je=Ke;break}var Ne=[Math.floor(at*255),Math.floor(Ze*255),Math.floor(Je*255)];return Ne}function se(G){G=G.replace(/^#/,""),G=G.length===3?G.replace(/(.)/g,"$1$1"):G;var oe=parseInt(G.substr(0,2),16)/255,he=parseInt(G.substr(2,2),16)/255,fe=parseInt(G.substr(4,2),16)/255,Ee=Math.max(oe,he,fe),me=Ee-Math.min(oe,he,fe),Se=Ee?me/Ee:0;switch(Ee){case oe:return[60*((he-fe)/me%6)||0,Se,Ee];case he:return[60*((fe-oe)/me+2)||0,Se,Ee];case fe:return[60*((oe-he)/me+4)||0,Se,Ee]}}function re(G){var oe=G[0],he=G[1]/100,fe=G[2]/100,Ee=(2-he)*fe;return[oe,Math.round(he*fe/(Ee<1?Ee:2-Ee)*1e4)/100,Ee/2*100]}function V(G){for(var oe=0,he=0;he!==G.length&&!(oe>=Number.MAX_SAFE_INTEGER);he++)oe+=G.charCodeAt(he);return oe}function ne(G){if(isNaN(G)){if(typeof G=="string"){if(r[G]){var he=r[G];if(he.hueRange)return he.hueRange}else if(G.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var fe=se(G)[0];return P(fe).hueRange}}}else{var oe=parseInt(G);if(oe<360&&oe>0)return P(G).hueRange}return[0,360]}return s})}(xv,xv.exports)),xv.exports}var mV=pV(),gV=DF(mV);function yV(n,e){let t="bright",r;return/water|ocean|lake|sea|river/.test(n)&&(r="blue"),/state|country|place/.test(n)&&(r="pink"),/road|highway|transport|streets/.test(n)&&(r="orange"),/contour|building|earth/.test(n)&&(r="monochrome"),/building/.test(n)&&(t="dark"),/earth/.test(n)&&(t="light"),/contour|landuse/.test(n)&&(r="yellow"),/wood|forest|park|landcover|land|natural/.test(n)&&(r="green"),`rgba(${gV({luminosity:t,hue:r,seed:n,format:"rgbArray"}).join(", ")}, ${e||"1"})`}var vV={brightColor:yV};function CV(n){return n.metadata&&n.metadata["maplibregl-inspect:inspect"]}function _V(n){return Object.assign(n,{metadata:Object.assign({},n.metadata,{"maplibregl-inspect:inspect":!0})})}class mB{constructor(e){if(this._onSourceChange=r=>{if(r.sourceDataType==="visibility"||!r.isSourceLoaded)return;const i=Object.assign({},this.sources);this._setSourcesFromMap(),!oV(i,this.sources)&&Object.keys(this.sources).length>0&&setTimeout(()=>this.render(),1e3)},this._onStyleChange=()=>{const r=this._map.getStyle();CV(r)||(this._originalStyle=r)},this._onRightClick=()=>{!this.options.showMapPopupOnHover&&!this.options.showInspectMapPopupOnHover&&!this.options.blockHoverPopupOnClick&&this._popup&&this._popup.remove()},this._onMousemove=r=>{if(this._showInspectMap){if(!this.options.showInspectMapPopup||r.type==="mousemove"&&!this.options.showInspectMapPopupOnHover)return;r.type==="click"&&this.options.showInspectMapPopupOnHover&&this.options.blockHoverPopupOnClick&&(this._popupBlocked=!this._popupBlocked)}else{if(!this.options.showMapPopup||r.type==="mousemove"&&!this.options.showMapPopupOnHover)return;r.type==="click"&&this.options.showMapPopupOnHover&&this.options.blockHoverPopupOnClick&&(this._popupBlocked=!this._popupBlocked)}if(!this._popupBlocked&&this._popup){let i;this.options.selectThreshold===0?i=r.point:i=[[r.point.x-this.options.selectThreshold,r.point.y+this.options.selectThreshold],[r.point.x+this.options.selectThreshold,r.point.y-this.options.selectThreshold]];const s=this._map.queryRenderedFeatures(i,this.options.queryParameters)||[];if(this._map.getCanvas().style.cursor=s.length?"pointer":"",!s.length)this._popup.remove();else{this._popup.setLngLat(r.lngLat);const l=this.options.renderPopup(s);typeof l=="string"?this._popup.setHTML(l):this._popup.setDOMContent(l),this._popup.addTo(this._map)}}},!(this instanceof mB))throw new Error("MaplibreInspect needs to be called with the new keyword");let t=null;window.maplibregl?t=new window.maplibregl.Popup({closeButton:!1,closeOnClick:!1}):e.popup||console.error("Maplibre GL JS can not be found. Make sure to include it or pass an initialized MaplibreGL Popup to MaplibreInspect if you are using moduleis."),this.options=Object.assign({showInspectMap:!1,showInspectButton:!0,showInspectMapPopup:!0,showMapPopup:!1,showMapPopupOnHover:!0,showInspectMapPopupOnHover:!0,blockHoverPopupOnClick:!1,backgroundColor:"#fff",assignLayerColor:vV.brightColor,buildInspectStyle:C7.generateInspectStyle,renderPopup:hV,popup:t,selectThreshold:5,useInspectStyle:!0,queryParameters:{},sources:{},toggleCallback(){},manageStyleOutside:!1},e),this.sources=this.options.sources,this.assignLayerColor=this.options.assignLayerColor,this._popup=this.options.popup,this._popupBlocked=!1,this._showInspectMap=this.options.showInspectMap,this._toggle=new lV({show:this.options.showInspectButton,onToggle:()=>this.toggleInspector()})}toggleInspector(){this._showInspectMap=!this._showInspectMap,this._popupBlocked=!1,this.options.toggleCallback(this._showInspectMap),this.render()}_inspectStyle(){const e=C7.generateColoredLayers(this.sources,this.assignLayerColor);return this.options.buildInspectStyle(this._map.getStyle(),e,{backgroundColor:this.options.backgroundColor})}render(){this._showInspectMap?(this.options.useInspectStyle&&this._map.setStyle(_V(this._inspectStyle())),this._toggle.setMapIcon()):this._originalStyle&&(this._popup&&this._popup.remove(),this.options.useInspectStyle&&this._map.setStyle(this._originalStyle),this._toggle.setInspectIcon())}_setSourcesFromMap(){const e=Object.keys(this._map.getStyle().sources);Object.keys(this._map.style.sourceCaches).forEach(t=>{const r=this._map.style.sourceCaches[t]||{_source:{}},i=r._source.vectorLayerIds;i?this.sources[t]=i:r._source.type==="geojson"&&(this.sources[t]=[])}),Object.keys(this.sources).forEach(t=>{e.indexOf(t)===-1&&delete this.sources[t]})}setOriginalStyle(e){this._originalStyle=e,this._setSourcesFromMap()}onAdd(e){return this._map=e,Object.keys(this.sources).length===0&&(e.on("tiledata",this._onSourceChange),e.on("sourcedata",this._onSourceChange)),e.on("styledata",this._onStyleChange),e.on("load",this._onStyleChange),e.on("mousemove",this._onMousemove),e.on("click",this._onMousemove),e.on("contextmenu",this._onRightClick),this._toggle.elem}onRemove(){this._map.off("styledata",this._onStyleChange),this._map.off("load",this._onStyleChange),this._map.off("tiledata",this._onSourceChange),this._map.off("sourcedata",this._onSourceChange),this._map.off("mousemove",this._onMousemove),this._map.off("click",this._onMousemove),this._map.off("contextmenu",this._onRightClick);const e=this._toggle.elem;e.parentNode.removeChild(e),this._map=void 0}}var Mv={exports:{}},bV=Mv.exports,b7;function xV(){return b7||(b7=1,function(n,e){(function(t,r){{var i=r();n.exports&&(e=n.exports=i),e.randomColor=i}})(bV,function(){var t=null,r={};Y();var i=[],s=function(G){if(G=G||{},G.seed!==void 0&&G.seed!==null&&G.seed===parseInt(G.seed,10))t=G.seed;else if(typeof G.seed=="string")t=V(G.seed);else{if(G.seed!==void 0&&G.seed!==null)throw new TypeError("The seed value must be an integer or string");t=null}var oe,he,fe;if(G.count!==null&&G.count!==void 0){for(var Ee=G.count,me=[],Se=0;Se<G.count;Se++)i.push(!1);for(G.count=null;Ee>me.length;){var Ke=s(G);t!==null&&(G.seed=t),me.push(Ke)}return G.count=Ee,me}return oe=l(G),he=o(oe,G),fe=f(oe,he,G),y([oe,he,fe],G)};function l(G){if(i.length>0){var oe=ne(G.hue),he=U(oe),fe=(oe[1]-oe[0])/i.length,Ee=parseInt((he-oe[0])/fe);i[Ee]===!0?Ee=(Ee+2)%i.length:i[Ee]=!0;var me=(oe[0]+Ee*fe)%359,Se=(oe[0]+(Ee+1)*fe)%359;return oe=[me,Se],he=U(oe),he<0&&(he=360+he),he}else{var oe=B(G.hue);return he=U(oe),he<0&&(he=360+he),he}}function o(G,oe){if(oe.hue==="monochrome")return 0;if(oe.luminosity==="random")return U([0,100]);var he=O(G),fe=he[0],Ee=he[1];switch(oe.luminosity){case"bright":fe=55;break;case"dark":fe=Ee-10;break;case"light":Ee=55;break}return U([fe,Ee])}function f(G,oe,he){var fe=x(G,oe),Ee=100;switch(he.luminosity){case"dark":Ee=fe+20;break;case"light":fe=(Ee+fe)/2;break;case"random":fe=0,Ee=100;break}return U([fe,Ee])}function y(G,oe){switch(oe.format){case"hsvArray":return G;case"hslArray":return re(G);case"hsl":var he=re(G);return"hsl("+he[0]+", "+he[1]+"%, "+he[2]+"%)";case"hsla":var fe=re(G),Se=oe.alpha||Math.random();return"hsla("+fe[0]+", "+fe[1]+"%, "+fe[2]+"%, "+Se+")";case"rgbArray":return H(G);case"rgb":var Ee=H(G);return"rgb("+Ee.join(", ")+")";case"rgba":var me=H(G),Se=oe.alpha||Math.random();return"rgba("+me.join(", ")+", "+Se+")";default:return j(G)}}function x(G,oe){for(var he=P(G).lowerBounds,fe=0;fe<he.length-1;fe++){var Ee=he[fe][0],me=he[fe][1],Se=he[fe+1][0],Ke=he[fe+1][1];if(oe>=Ee&&oe<=Se){var xe=(Ke-me)/(Se-Ee),at=me-xe*Ee;return xe*oe+at}}return 0}function B(G){if(typeof parseInt(G)=="number"){var oe=parseInt(G);if(oe<360&&oe>0)return[oe,oe]}if(typeof G=="string"){if(r[G]){var he=r[G];if(he.hueRange)return he.hueRange}else if(G.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var fe=se(G)[0];return[fe,fe]}}return[0,360]}function O(G){return P(G).saturationRange}function P(G){G>=334&&G<=360&&(G-=360);for(var oe in r){var he=r[oe];if(he.hueRange&&G>=he.hueRange[0]&&G<=he.hueRange[1])return r[oe]}return"Color not found"}function U(G){if(t===null){var oe=.618033988749895,he=Math.random();return he+=oe,he%=1,Math.floor(G[0]+he*(G[1]+1-G[0]))}else{var fe=G[1]||1,Ee=G[0]||0;t=(t*9301+49297)%233280;var me=t/233280;return Math.floor(Ee+me*(fe-Ee))}}function j(G){var oe=H(G);function he(Ee){var me=Ee.toString(16);return me.length==1?"0"+me:me}var fe="#"+he(oe[0])+he(oe[1])+he(oe[2]);return fe}function N(G,oe,he){var fe=he[0][0],Ee=he[he.length-1][0],me=he[he.length-1][1],Se=he[0][1];r[G]={hueRange:oe,lowerBounds:he,saturationRange:[fe,Ee],brightnessRange:[me,Se]}}function Y(){N("monochrome",null,[[0,0],[100,0]]),N("red",[-26,18],[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]),N("orange",[18,46],[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]),N("yellow",[46,62],[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]),N("green",[62,178],[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]),N("blue",[178,257],[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]),N("purple",[257,282],[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]),N("pink",[282,334],[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]])}function H(G){var oe=G[0];oe===0&&(oe=1),oe===360&&(oe=359),oe=oe/360;var he=G[1]/100,fe=G[2]/100,Ee=Math.floor(oe*6),me=oe*6-Ee,Se=fe*(1-he),Ke=fe*(1-me*he),xe=fe*(1-(1-me)*he),at=256,Ze=256,Je=256;switch(Ee){case 0:at=fe,Ze=xe,Je=Se;break;case 1:at=Ke,Ze=fe,Je=Se;break;case 2:at=Se,Ze=fe,Je=xe;break;case 3:at=Se,Ze=Ke,Je=fe;break;case 4:at=xe,Ze=Se,Je=fe;break;case 5:at=fe,Ze=Se,Je=Ke;break}var Ne=[Math.floor(at*255),Math.floor(Ze*255),Math.floor(Je*255)];return Ne}function se(G){G=G.replace(/^#/,""),G=G.length===3?G.replace(/(.)/g,"$1$1"):G;var oe=parseInt(G.substr(0,2),16)/255,he=parseInt(G.substr(2,2),16)/255,fe=parseInt(G.substr(4,2),16)/255,Ee=Math.max(oe,he,fe),me=Ee-Math.min(oe,he,fe),Se=Ee?me/Ee:0;switch(Ee){case oe:return[60*((he-fe)/me%6)||0,Se,Ee];case he:return[60*((fe-oe)/me+2)||0,Se,Ee];case fe:return[60*((oe-he)/me+4)||0,Se,Ee]}}function re(G){var oe=G[0],he=G[1]/100,fe=G[2]/100,Ee=(2-he)*fe;return[oe,Math.round(he*fe/(Ee<1?Ee:2-Ee)*1e4)/100,Ee/2*100]}function V(G){for(var oe=0,he=0;he!==G.length&&!(oe>=Number.MAX_SAFE_INTEGER);he++)oe+=G.charCodeAt(he);return oe}function ne(G){if(isNaN(G)){if(typeof G=="string"){if(r[G]){var he=r[G];if(he.hueRange)return he.hueRange}else if(G.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var fe=se(G)[0];return P(fe).hueRange}}}else{var oe=parseInt(G);if(oe<360&&oe>0)return P(G).hueRange}return[0,360]}return s})}(Mv,Mv.exports)),Mv.exports}var MV=xV();const wV=fl(MV);function SV(n,e){let t="bright",r;return/water|ocean|lake|sea|river/.test(n)&&(r="blue"),/state|country|place/.test(n)&&(r="pink"),/road|highway|transport|streets/.test(n)&&(r="orange"),/contour|building|earth/.test(n)&&(r="monochrome"),/building/.test(n)&&(t="dark"),/earth/.test(n)&&(t="light"),/contour|landuse/.test(n)&&(r="yellow"),/wood|forest|park|landcover|land|natural/.test(n)&&(r="green"),`rgba(${wV({luminosity:t,hue:r,seed:n,format:"rgbArray"}).join(", ")}, ${e||"1"})`}const FF={brightColor:SV};var N3={exports:{}},W3,x7;function EV(){if(x7)return W3;x7=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return W3=n,W3}var G3,M7;function BV(){if(M7)return G3;M7=1;var n=EV();function e(){}function t(){}return t.resetWarningCache=e,G3=function(){function r(l,o,f,y,x,B){if(B!==n){var O=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw O.name="Invariant Violation",O}}r.isRequired=r;function i(){return r}var s={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:t,resetWarningCache:e};return s.PropTypes=s,s},G3}var w7;function mp(){return w7||(w7=1,N3.exports=BV()()),N3.exports}var OV=mp();const yi=fl(OV);var S7=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n};function IV(n,e){var t={};for(var r in n)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r]);return t}var j0=function(e,t){var r=e.children,i=e.color,s=e.size,l=e.style,o=e.width,f=e.height,y=IV(e,["children","color","size","style","width","height"]),x=t.reactIconBase,B=x===void 0?{}:x,O=s||B.size||"1em";return Xn.createElement("svg",S7({children:r,fill:"currentColor",preserveAspectRatio:"xMidYMid meet",height:f||O,width:o||O},B,y,{style:S7({verticalAlign:"middle",color:i||B.color},B.style||{},l)}))};j0.propTypes={color:yi.string,size:yi.oneOfType([yi.string,yi.number]),width:yi.oneOfType([yi.string,yi.number]),height:yi.oneOfType([yi.string,yi.number]),style:yi.object};j0.contextTypes={reactIconBase:yi.shape(j0.propTypes)};function Vb(){var n="/home/runner/work/maputnik/maputnik/src/components/IconLine.tsx",e="ace6118dd0ae83e2ceb20b70664ae2267741d924",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/IconLine.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:6,column:478}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:7,column:3}},line:5}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/IconLine.tsx"],names:[],mappings:"AAQQ;AARR,OAAO,WAAW;AAClB,OAAO,cAAc;AAGrB,qBAAqB,iBAAiB,MAAM,UAAU;AAAA,EACpD,SAAS;AACP,WACE,oBAAC,YAAS,SAAQ,aAAa,GAAG,KAAK,OACrC,8BAAC,UAAK,GAAE,iUAAgU,WAAU,kBAAiB,GACrW;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ace6118dd0ae83e2ceb20b70664ae2267741d924"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Vb=function(){return l},l}Vb();class kV extends Xn.Component{render(){return Vb().f[0]++,Vb().s[0]++,ue.jsx(j0,{viewBox:"0 0 20 20",...this.props,children:ue.jsx("path",{d:"M 12.34,1.29 C 12.5114,1.1076 12.7497,1.0029 13,1 13.5523,1 14,1.4477 14,2 14.0047,2.2478 13.907,2.4866 13.73,2.66 9.785626,6.5516986 6.6148407,9.7551593 2.65,13.72 2.4793,13.8963 2.2453,13.9971 2,14 1.4477,14 1,13.5523 1,13 0.9953,12.7522 1.093,12.5134 1.27,12.34 4.9761967,8.7018093 9.0356422,4.5930579 12.34,1.29 Z",transform:"translate(2,2)"})})}}function $b(){var n="/home/runner/work/maputnik/maputnik/src/components/IconFill.tsx",e="8b9fc49e8fc93b42e35f3a9b2accdbccf6dcdb84",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/IconFill.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:6,column:562}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:7,column:3}},line:5}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/IconFill.tsx"],names:[],mappings:"AAQQ;AARR,OAAO,WAAW;AAClB,OAAO,cAAc;AAGrB,qBAAqB,iBAAiB,MAAM,UAAU;AAAA,EACpD,SAAS;AACP,WACE,oBAAC,YAAS,SAAQ,aAAa,GAAG,KAAK,OACrC,8BAAC,UAAK,GAAE,kbAAib,GAC3b;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8b9fc49e8fc93b42e35f3a9b2accdbccf6dcdb84"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return $b=function(){return l},l}$b();class N_ extends Xn.Component{render(){return $b().f[0]++,$b().s[0]++,ue.jsx(j0,{viewBox:"0 0 20 20",...this.props,children:ue.jsx("path",{d:"M 2.84978,9.763512 9.462149,4.7316391 16.47225,9.478015 9.859886,14.509879 2.84978,9.763512 m -1.028761,0.492069 7.414535,5.020197 c 0.372277,0.25206 0.958697,0.239771 1.30985,-0.02745 L 17.539255,9.926162 C 17.89041,9.658941 17.873288,9.238006 17.501015,8.985946 L 10.08648,3.9657402 C 9.714204,3.7136802 9.127782,3.7259703 8.776627,3.9931918 L 1.782775,9.315365 c -0.3511551,0.267221 -0.3340331,0.688156 0.03824,0.940216 l 0,0 z"})})}}function Hb(){var n="/home/runner/work/maputnik/maputnik/src/components/IconSymbol.tsx",e="6ac2e596376f8b8c2e117c4345e33d1afb8f583b",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/IconSymbol.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:6,column:535}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:7,column:3}},line:5}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/IconSymbol.tsx"],names:[],mappings:"AASU;AATV,OAAO,WAAW;AAClB,OAAO,cAAc;AAGrB,qBAAqB,mBAAmB,MAAM,UAAU;AAAA,EACtD,SAAS;AACP,WACE,oBAAC,YAAS,SAAQ,aAAa,GAAG,KAAK,OACrC,8BAAC,OAAE,WAAU,wDACX,8BAAC,UAAK,GAAE,4SAA2S,GACrT,GACF;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"6ac2e596376f8b8c2e117c4345e33d1afb8f583b"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Hb=function(){return l},l}Hb();class TV extends Xn.Component{render(){return Hb().f[0]++,Hb().s[0]++,ue.jsx(j0,{viewBox:"0 0 20 20",...this.props,children:ue.jsx("g",{transform:"matrix(1.2718518,0,0,1.2601269,16.559526,-7.4065264)",children:ue.jsx("path",{d:"m -9.7959773,11.060163 c -0.3734787,-0.724437 -0.3580577,-1.2147051 -0.00547,-1.8767873 l 8.6034029,-0.019416 c 0.39670292,0.6865644 0.38365934,1.4750693 -0.011097,1.8864953 l -3.1359613,-0.0033 -0.013695,7.1305 c -0.4055357,0.397083 -1.3146432,0.397083 -1.7769191,-0.02274 l 0.030226,-7.104422 z"})})})}}function Zb(){var n="/home/runner/work/maputnik/maputnik/src/components/IconBackground.tsx",e="f8813cd7d4a9138ff3fc7253bc195b86370ed6cf",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/IconBackground.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:6,column:464}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:7,column:3}},line:5}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/IconBackground.tsx"],names:[],mappings:"AAQQ;AARR,OAAO,WAAW;AAClB,OAAO,cAAc;AAGrB,qBAAqB,uBAAuB,MAAM,UAAU;AAAA,EAC1D,SAAS;AACP,WACE,oBAAC,YAAS,SAAQ,aAAa,GAAG,KAAK,OACrC,8BAAC,UAAK,GAAE,gVAA+U,GACzV;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f8813cd7d4a9138ff3fc7253bc195b86370ed6cf"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Zb=function(){return l},l}Zb();class E7 extends Xn.Component{render(){return Zb().f[0]++,Zb().s[0]++,ue.jsx(j0,{viewBox:"0 0 20 20",...this.props,children:ue.jsx("path",{d:"m 1.821019,10.255581 7.414535,5.020197 c 0.372277,0.25206 0.958697,0.239771 1.30985,-0.02745 L 17.539255,9.926162 C 17.89041,9.658941 17.873288,9.238006 17.501015,8.985946 L 10.08648,3.9657402 C 9.714204,3.7136802 9.127782,3.7259703 8.776627,3.9931918 L 1.782775,9.315365 c -0.3511551,0.267221 -0.3340331,0.688156 0.03824,0.940216 z"})})}}function Xb(){var n="/home/runner/work/maputnik/maputnik/src/components/IconCircle.tsx",e="35a8c3687dcdeffeb7f2fe2d9c05ced9e802b5ca",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/IconCircle.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:6,column:378}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:7,column:3}},line:5}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/IconCircle.tsx"],names:[],mappings:"AAQQ;AARR,OAAO,WAAW;AAClB,OAAO,cAAc;AAGrB,qBAAqB,mBAAmB,MAAM,UAAU;AAAA,EACtD,SAAS;AACP,WACE,oBAAC,YAAS,SAAQ,aAAa,GAAG,KAAK,OACrC,8BAAC,UAAK,WAAU,kBAAiB,GAAE,6NAA4N,GACjQ;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"35a8c3687dcdeffeb7f2fe2d9c05ced9e802b5ca"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Xb=function(){return l},l}Xb();class PV extends Xn.Component{render(){return Xb().f[0]++,Xb().s[0]++,ue.jsx(j0,{viewBox:"0 0 20 20",...this.props,children:ue.jsx("path",{transform:"translate(2 2)",d:"M7.5,0C11.6422,0,15,3.3578,15,7.5S11.6422,15,7.5,15 S0,11.6422,0,7.5S3.3578,0,7.5,0z M7.5,1.6666c-3.2217,0-5.8333,2.6117-5.8333,5.8334S4.2783,13.3334,7.5,13.3334 s5.8333-2.6117,5.8333-5.8334S10.7217,1.6666,7.5,1.6666z"})})}}function Uy(n){return Xl({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"},child:[]}]})(n)}function KV(n){return Xl({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 19.59V8l-6-6H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c.45 0 .85-.15 1.19-.4l-4.43-4.43c-.8.52-1.74.83-2.76.83-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5c0 1.02-.31 1.96-.83 2.75L20 19.59zM9 13c0 1.66 1.34 3 3 3s3-1.34 3-3-1.34-3-3-3-3 1.34-3 3z"},child:[]}]})(n)}function RV(n){return Xl({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11 18h2v-2h-2v2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4z"},child:[]}]})(n)}function DV(n){return Xl({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M14.59 8 12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41 14.59 8zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"},child:[]}]})(n)}function FV(n){return Xl({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M11 7h2v2h-2V7zm0 4h2v6h-2v-6zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"},child:[]}]})(n)}function LV(n){return Xl({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zm6.93 6h-2.95a15.65 15.65 0 0 0-1.38-3.56A8.03 8.03 0 0 1 18.92 8zM12 4.04c.83 1.2 1.48 2.53 1.91 3.96h-3.82c.43-1.43 1.08-2.76 1.91-3.96zM4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2 0 .68.06 1.34.14 2H4.26zm.82 2h2.95c.32 1.25.78 2.45 1.38 3.56A7.987 7.987 0 0 1 5.08 16zm2.95-8H5.08a7.987 7.987 0 0 1 4.33-3.56A15.65 15.65 0 0 0 8.03 8zM12 19.96c-.83-1.2-1.48-2.53-1.91-3.96h3.82c-.43 1.43-1.08 2.76-1.91 3.96zM14.34 14H9.66c-.09-.66-.16-1.32-.16-2 0-.68.07-1.35.16-2h4.68c.09.65.16 1.32.16 2 0 .68-.07 1.34-.16 2zm.25 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95a8.03 8.03 0 0 1-4.33 3.56zM16.36 14c.08-.66.14-1.32.14-2 0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2h-3.38z"},child:[]}]})(n)}function UV(n){return Xl({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 4H5a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h4v-2H5V8h14v10h-4v2h4c1.1 0 2-.9 2-2V6a2 2 0 0 0-2-2zm-7 6-4 4h3v6h2v-6h3l-4-4z"},child:[]}]})(n)}function zV(n){return Xl({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58a.49.49 0 0 0 .12-.61l-1.92-3.32a.488.488 0 0 0-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54a.484.484 0 0 0-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58a.49.49 0 0 0-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"},child:[]}]})(n)}function jV(n){return Xl({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0zm0 0h24v24H0zm0 0h24v24H0zm0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46A11.804 11.804 0 0 0 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"},child:[]}]})(n)}function NV(n){return Xl({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"},child:[]}]})(n)}function LF(n){return Xl({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"},child:[]}]})(n)}function WV(n){return Xl({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"},child:[]}]})(n)}function WE(n){return Xl({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"},child:[]}]})(n)}function GV(n){return Xl({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z"},child:[]}]})(n)}function QV(n){return Xl({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M18 4H6v2l6.5 6L6 18v2h12v-3h-7l5-5-5-5h7z"},child:[]}]})(n)}function YV(n){return Xl({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"},child:[]}]})(n)}function B7(n){return Xl({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z"},child:[]}]})(n)}function qV(n){return Xl({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m11.99 18.54-7.37-5.73L3 14.07l9 7 9-7-1.63-1.27-7.38 5.74zM12 16l7.36-5.73L21 9l-9-7-9 7 1.63 1.27L12 16z"},child:[]}]})(n)}function VV(n){return Xl({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m20.5 3-.16.03L15 5.1 9 3 3.36 4.9c-.21.07-.36.25-.36.48V20.5c0 .28.22.5.5.5l.16-.03L9 18.9l6 2.1 5.64-1.9c.21-.07.36-.25.36-.48V3.5c0-.28-.22-.5-.5-.5zM15 19l-6-2.11V5l6 2.11V19z"},child:[]}]})(n)}function $V(n){return Xl({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m7 10 5 5 5-5z"},child:[]}]})(n)}function HV(n){return Xl({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m7 14 5-5 5 5z"},child:[]}]})(n)}function ZV(n){return Xl({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"},child:[]}]})(n)}function XV(n){return Xl({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"},child:[]}]})(n)}function JV(n){return Xl({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"19",r:"2"},child:[]},{tag:"path",attr:{d:"M10 3h4v12h-4z"},child:[]}]})(n)}function Jb(){var n="/home/runner/work/maputnik/maputnik/src/components/IconMissing.tsx",e="90c8ed80956547e1dbbdff164a42850c33eed62e",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/IconMissing.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:6,column:66}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:7,column:3}},line:5}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/IconMissing.tsx"],names:[],mappings:"AAOM;AAPN,OAAO,WAAW;AAClB,SAAQ,sBAAqB;AAG7B,qBAAqB,oBAAoB,MAAM,UAAU;AAAA,EACvD,SAAS;AACP,WACE,oBAAC,kBAAgB,GAAG,KAAK,OAAO;AAAA,EAEpC;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"90c8ed80956547e1dbbdff164a42850c33eed62e"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Jb=function(){return l},l}Jb();class e$ extends Xn.Component{render(){return Jb().f[0]++,Jb().s[0]++,ue.jsx(JV,{...this.props})}}function Tl(){var n="/home/runner/work/maputnik/maputnik/src/components/IconLayer.tsx",e="89bd7eb08374d10a1476c7cf1e0e39f530ce1ff1",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/IconLayer.tsx",statementMap:{0:{start:{line:11,column:22},end:{line:11,column:49}},1:{start:{line:12,column:4},end:{line:33,column:5}},2:{start:{line:14,column:8},end:{line:14,column:69}},3:{start:{line:16,column:8},end:{line:16,column:63}},4:{start:{line:18,column:8},end:{line:18,column:63}},5:{start:{line:20,column:8},end:{line:20,column:63}},6:{start:{line:22,column:8},end:{line:22,column:63}},7:{start:{line:24,column:8},end:{line:24,column:69}},8:{start:{line:26,column:8},end:{line:26,column:63}},9:{start:{line:28,column:8},end:{line:28,column:65}},10:{start:{line:30,column:8},end:{line:30,column:65}},11:{start:{line:32,column:8},end:{line:32,column:66}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:34,column:3}},line:10}},branchMap:{0:{loc:{start:{line:12,column:4},end:{line:33,column:5}},type:"switch",locations:[{start:{line:13,column:6},end:{line:14,column:69}},{start:{line:15,column:6},end:{line:16,column:63}},{start:{line:17,column:6},end:{line:18,column:63}},{start:{line:19,column:6},end:{line:20,column:63}},{start:{line:21,column:6},end:{line:22,column:63}},{start:{line:23,column:6},end:{line:24,column:69}},{start:{line:25,column:6},end:{line:26,column:63}},{start:{line:27,column:6},end:{line:28,column:65}},{start:{line:29,column:6},end:{line:30,column:65}},{start:{line:31,column:6},end:{line:32,column:66}}],line:12}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},f:{0:0},b:{0:[0,0,0,0,0,0,0,0,0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/IconLayer.tsx"],names:[],mappings:"AAmBkC;AAnBlC,OAAO,WAAW;AAElB,OAAO,cAAc;AACrB,OAAO,cAAc;AACrB,OAAO,gBAAgB;AACvB,OAAO,oBAAoB;AAC3B,OAAO,gBAAgB;AACvB,OAAO,iBAAiB;AAQxB,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,SAAS;AACP,UAAM,YAAY,EAAE,OAAO,KAAK,MAAM,MAAM;AAC5C,YAAO,KAAK,MAAM,MAAM;AAAA,MACxB,KAAK;AAAkB,eAAO,oBAAC,kBAAgB,GAAG,WAAW;AAAA,MAC7D,KAAK;AAAU,eAAO,oBAAC,YAAU,GAAG,WAAW;AAAA,MAC/C,KAAK;AAAa,eAAO,oBAAC,YAAU,GAAG,WAAW;AAAA,MAClD,KAAK;AAAW,eAAO,oBAAC,YAAU,GAAG,WAAW;AAAA,MAChD,KAAK;AAAQ,eAAO,oBAAC,YAAU,GAAG,WAAW;AAAA,MAC7C,KAAK;AAAc,eAAO,oBAAC,kBAAgB,GAAG,WAAW;AAAA,MACzD,KAAK;AAAQ,eAAO,oBAAC,YAAU,GAAG,WAAW;AAAA,MAC7C,KAAK;AAAU,eAAO,oBAAC,cAAY,GAAG,WAAW;AAAA,MACjD,KAAK;AAAU,eAAO,oBAAC,cAAY,GAAG,WAAW;AAAA,MACjD;AAAS,eAAO,oBAAC,eAAa,GAAG,WAAW;AAAA,IAC5C;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"89bd7eb08374d10a1476c7cf1e0e39f530ce1ff1"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Tl=function(){return l},l}Tl();class UF extends Xn.Component{render(){Tl().f[0]++;const e=(Tl().s[0]++,{style:this.props.style});switch(Tl().s[1]++,this.props.type){case"fill-extrusion":return Tl().b[0][0]++,Tl().s[2]++,ue.jsx(E7,{...e});case"raster":return Tl().b[0][1]++,Tl().s[3]++,ue.jsx(N_,{...e});case"hillshade":return Tl().b[0][2]++,Tl().s[4]++,ue.jsx(N_,{...e});case"heatmap":return Tl().b[0][3]++,Tl().s[5]++,ue.jsx(N_,{...e});case"fill":return Tl().b[0][4]++,Tl().s[6]++,ue.jsx(N_,{...e});case"background":return Tl().b[0][5]++,Tl().s[7]++,ue.jsx(E7,{...e});case"line":return Tl().b[0][6]++,Tl().s[8]++,ue.jsx(kV,{...e});case"symbol":return Tl().b[0][7]++,Tl().s[9]++,ue.jsx(TV,{...e});case"circle":return Tl().b[0][8]++,Tl().s[10]++,ue.jsx(PV,{...e});default:return Tl().b[0][9]++,Tl().s[11]++,ue.jsx(e$,{...e})}}}function ni(){var n="/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlLayerPopup.tsx",e="ea1e9940e142b9a2a1c672f6983f6f5748c841e6",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlLayerPopup.tsx",statementMap:{0:{start:{line:5,column:18},end:{line:5,column:20}},1:{start:{line:6,column:27},end:{line:6,column:29}},2:{start:{line:7,column:2},end:{line:18,column:5}},3:{start:{line:8,column:22},end:{line:8,column:51}},4:{start:{line:9,column:4},end:{line:17,column:5}},5:{start:{line:10,column:6},end:{line:10,column:43}},6:{start:{line:11,column:28},end:{line:11,column:91}},7:{start:{line:11,column:59},end:{line:11,column:90}},8:{start:{line:12,column:6},end:{line:12,column:65}},9:{start:{line:14,column:6},end:{line:14,column:52}},10:{start:{line:15,column:6},end:{line:15,column:39}},11:{start:{line:16,column:6},end:{line:16,column:45}},12:{start:{line:19,column:2},end:{line:19,column:17}},13:{start:{line:23,column:4},end:{line:25,column:5}},14:{start:{line:24,column:6},end:{line:24,column:13}},15:{start:{line:26,column:4},end:{line:44,column:5}},16:{start:{line:27,column:25},end:{line:27,column:44}},17:{start:{line:28,column:6},end:{line:30,column:7}},18:{start:{line:29,column:8},end:{line:29,column:48}},19:{start:{line:31,column:6},end:{line:33,column:7}},20:{start:{line:32,column:8},end:{line:32,column:48}},21:{start:{line:34,column:6},end:{line:36,column:7}},22:{start:{line:35,column:8},end:{line:35,column:48}},23:{start:{line:37,column:6},end:{line:39,column:7}},24:{start:{line:38,column:8},end:{line:38,column:58}},25:{start:{line:40,column:6},end:{line:40,column:21}},26:{start:{line:42,column:6},end:{line:42,column:63}},27:{start:{line:43,column:6},end:{line:43,column:21}},28:{start:{line:47,column:20},end:{line:47,column:67}},29:{start:{line:48,column:18},end:{line:93,column:6}},30:{start:{line:49,column:21},end:{line:88,column:8}},31:{start:{line:50,column:29},end:{line:50,column:76}},32:{start:{line:51,column:8},end:{line:87,column:10}},33:{start:{line:68,column:20},end:{line:68,column:63}},34:{start:{line:89,column:6},end:{line:92,column:26}},35:{start:{line:94,column:4},end:{line:94,column:102}}},fnMap:{0:{name:"groupFeaturesBySourceLayer",decl:{start:{line:4,column:9},end:{line:4,column:35}},loc:{start:{line:4,column:46},end:{line:20,column:1}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:7,column:19},end:{line:7,column:20}},loc:{start:{line:7,column:32},end:{line:18,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:11,column:52},end:{line:11,column:53}},loc:{start:{line:11,column:59},end:{line:11,column:90}},line:11},3:{name:"(anonymous_3)",decl:{start:{line:22,column:2},end:{line:22,column:3}},loc:{start:{line:22,column:35},end:{line:45,column:3}},line:22},4:{name:"(anonymous_4)",decl:{start:{line:46,column:2},end:{line:46,column:3}},loc:{start:{line:46,column:11},end:{line:95,column:3}},line:46},5:{name:"(anonymous_5)",decl:{start:{line:48,column:43},end:{line:48,column:44}},loc:{start:{line:48,column:62},end:{line:93,column:5}},line:48},6:{name:"(anonymous_6)",decl:{start:{line:49,column:48},end:{line:49,column:49}},loc:{start:{line:49,column:66},end:{line:88,column:7}},line:49},7:{name:"(anonymous_7)",decl:{start:{line:67,column:27},end:{line:67,column:28}},loc:{start:{line:67,column:33},end:{line:69,column:19}},line:67}},branchMap:{0:{loc:{start:{line:9,column:4},end:{line:17,column:5}},type:"if",locations:[{start:{line:9,column:4},end:{line:17,column:5}},{start:{line:13,column:11},end:{line:17,column:5}}],line:9},1:{loc:{start:{line:14,column:27},end:{line:14,column:51}},type:"binary-expr",locations:[{start:{line:14,column:27},end:{line:14,column:45}},{start:{line:14,column:49},end:{line:14,column:51}}],line:14},2:{loc:{start:{line:23,column:4},end:{line:25,column:5}},type:"if",locations:[{start:{line:23,column:4},end:{line:25,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:23},3:{loc:{start:{line:28,column:6},end:{line:30,column:7}},type:"if",locations:[{start:{line:28,column:6},end:{line:30,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:28},4:{loc:{start:{line:28,column:10},end:{line:28,column:64}},type:"binary-expr",locations:[{start:{line:28,column:10},end:{line:28,column:36}},{start:{line:28,column:40},end:{line:28,column:64}}],line:28},5:{loc:{start:{line:31,column:6},end:{line:33,column:7}},type:"if",locations:[{start:{line:31,column:6},end:{line:33,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:31},6:{loc:{start:{line:31,column:10},end:{line:31,column:64}},type:"binary-expr",locations:[{start:{line:31,column:10},end:{line:31,column:36}},{start:{line:31,column:40},end:{line:31,column:64}}],line:31},7:{loc:{start:{line:34,column:6},end:{line:36,column:7}},type:"if",locations:[{start:{line:34,column:6},end:{line:36,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:34},8:{loc:{start:{line:34,column:10},end:{line:34,column:64}},type:"binary-expr",locations:[{start:{line:34,column:10},end:{line:34,column:36}},{start:{line:34,column:40},end:{line:34,column:64}}],line:34},9:{loc:{start:{line:37,column:6},end:{line:39,column:7}},type:"if",locations:[{start:{line:37,column:6},end:{line:39,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},10:{loc:{start:{line:37,column:10},end:{line:37,column:84}},type:"binary-expr",locations:[{start:{line:37,column:10},end:{line:37,column:46}},{start:{line:37,column:50},end:{line:37,column:84}}],line:37},11:{loc:{start:{line:71,column:20},end:{line:75,column:24}},type:"binary-expr",locations:[{start:{line:71,column:20},end:{line:71,column:38}},{start:{line:71,column:58},end:{line:75,column:24}}],line:71},12:{loc:{start:{line:77,column:20},end:{line:80,column:24}},type:"binary-expr",locations:[{start:{line:77,column:20},end:{line:77,column:35}},{start:{line:77,column:55},end:{line:80,column:24}}],line:77}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlLayerPopup.tsx"],names:[],mappings:"AA8EU,cAkBsB,YAlBtB;AA9EV,OAAO,WAAW;AAClB,OAAO,eAAe;AAGtB,SAAS,2BAA2B,UAA4B;AAC9D,QAAM,UAA6C,CAAC;AAEpD,QAAM,mBAA4C,CAAC;AAEnD,WAAS,QAAQ,aAAW;AAC1B,UAAM,YAAY,QAAQ,MAAM,cAAc;AAC9C,QAAG,OAAO,UAAU,eAAe,KAAK,kBAAkB,QAAQ,MAAM,EAAE,GAAG;AAC3E,uBAAiB,QAAQ,MAAM,EAAE;AAEjC,YAAM,gBAAgB,QAAQ,SAAS,EAAE,KAAK,CAAC,MAAsB,EAAE,MAAM,OAAO,QAAQ,MAAM,EAAE;AAEpG,oBAAe,UAAU,iBAAiB,QAAQ,MAAM,EAAE;AAAA,IAC5D,OAAO;AACL,cAAQ,SAAS,IAAI,QAAQ,SAAS,KAAK,CAAC;AAC5C,cAAQ,SAAS,EAAE,KAAK,OAAO;AAE/B,uBAAiB,QAAQ,MAAM,EAAE,IAAI;AAAA,IACvC;AAAA,EACF,CAAC;AAED,SAAO;AACT;AAQA,MAAM,0BAA0B,MAAM,UAAkC;AAAA,EACtE,iBAAiB,SAAyB,OAAgB;AAExD,QAAI,CAAC,QAAQ,MAAM,OAAO;AACxB;AAAA,IACF;AAEA,QAAI;AACF,YAAM,aAAa,QAAQ,MAAM;AAEjC,UAAG,gBAAgB,cAAc,WAAW,YAAY,GAAG;AACzD,eAAO,OAAO,WAAW,YAAY,CAAC;AAAA,MACxC;AACA,UAAI,gBAAgB,cAAc,WAAW,YAAY,GAAG;AAC1D,eAAO,OAAO,WAAW,YAAY,CAAC;AAAA,MACxC;AACA,UAAI,gBAAgB,cAAc,WAAW,YAAY,GAAG;AAC1D,eAAO,OAAO,WAAW,YAAY,CAAC;AAAA,MACxC;AACA,UAAI,0BAA0B,cAAc,WAAW,sBAAsB,GAAG;AAC9E,eAAO,OAAO,WAAW,sBAAsB,CAAC;AAAA,MAClD;AAEA,aAAO;AAAA,IACT,SAGO,KAAK;AACV,cAAQ,KAAK,uCAAuC,GAAG;AACvD,aAAO;AAAA,IACT;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,UAAU,2BAA2B,KAAK,MAAM,QAAQ;AAE9D,UAAM,QAAQ,OAAO,KAAK,OAAO,EAAE,IAAI,mBAAiB;AACtD,YAAM,SAAS,QAAQ,aAAa,EAAE,IAAI,CAAC,SAAyB,QAAgB;AAClF,cAAM,eAAe,KAAK,iBAAiB,SAAS,KAAK,MAAM,IAAI;AAEnE,eAAO;AAAA,UAAC;AAAA;AAAA,YAEN,WAAU;AAAA,YAEV;AAAA;AAAA,gBAAC;AAAA;AAAA,kBACC,WAAU;AAAA,kBACV,OAAO,EAAC,YAAY,aAAY;AAAA;AAAA,cACjC;AAAA,cACD;AAAA,gBAAC;AAAA;AAAA,kBACC,WAAU;AAAA,kBACV,SAAS,MAAM;AACb,yBAAK,MAAM,cAAc,QAAQ,MAAM,EAAE;AAAA,kBAC3C;AAAA,kBAEC;AAAA,4BAAQ,MAAM,QACb,oBAAC,aAAU,MAAM,QAAQ,MAAM,MAAM,OAAO;AAAA,sBAC1C,OAAO;AAAA,sBACP,QAAQ;AAAA,sBACR,cAAc;AAAA,oBAChB,GAAE;AAAA,oBAEH,QAAQ,MAAM;AAAA,oBACd,QAAQ,WAAW,qBAAC,UAAK;AAAA;AAAA,sBAAI,QAAQ;AAAA,uBAAQ;AAAA;AAAA;AAAA,cAChD;AAAA;AAAA;AAAA,UAtBK;AAAA,QAuBP;AAAA,MACF,CAAC;AACD,aAAO,qBAAC,SACN;AAAA,4BAAC,SAAI,WAAU,2BAA2B,yBAAc;AAAA,QACvD;AAAA,WAFc,aAGjB;AAAA,IACF,CAAC;AAED,WAAO,oBAAC,SAAI,WAAU,gCACnB,iBACH;AAAA,EACF;AACF;AAGA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ea1e9940e142b9a2a1c672f6983f6f5748c841e6"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return ni=function(){return l},l}ni();function t$(n){ni().f[0]++;const e=(ni().s[0]++,{}),t=(ni().s[1]++,{});return ni().s[2]++,n.forEach(r=>{ni().f[1]++;const i=(ni().s[3]++,r.layer["source-layer"]);if(ni().s[4]++,Object.prototype.hasOwnProperty.call(t,r.layer.id)){ni().b[0][0]++,ni().s[5]++,t[r.layer.id]++;const s=(ni().s[6]++,e[i].find(l=>(ni().f[2]++,ni().s[7]++,l.layer.id===r.layer.id)));ni().s[8]++,s.counter=t[r.layer.id]}else ni().b[0][1]++,ni().s[9]++,e[i]=(ni().b[1][0]++,e[i]||(ni().b[1][1]++,[])),ni().s[10]++,e[i].push(r),ni().s[11]++,t[r.layer.id]=1}),ni().s[12]++,e}class zF extends Xn.Component{_getFeatureColor(e,t){if(ni().f[3]++,ni().s[13]++,e.layer.paint)ni().b[2][1]++;else{ni().b[2][0]++,ni().s[14]++;return}ni().s[15]++;try{const r=(ni().s[16]++,e.layer.paint);return ni().s[17]++,ni().b[4][0]++,"text-color"in r&&(ni().b[4][1]++,r["text-color"])?(ni().b[3][0]++,ni().s[18]++,String(r["text-color"])):(ni().b[3][1]++,ni().s[19]++,ni().b[6][0]++,"fill-color"in r&&(ni().b[6][1]++,r["fill-color"])?(ni().b[5][0]++,ni().s[20]++,String(r["fill-color"])):(ni().b[5][1]++,ni().s[21]++,ni().b[8][0]++,"line-color"in r&&(ni().b[8][1]++,r["line-color"])?(ni().b[7][0]++,ni().s[22]++,String(r["line-color"])):(ni().b[7][1]++,ni().s[23]++,ni().b[10][0]++,"fill-extrusion-color"in r&&(ni().b[10][1]++,r["fill-extrusion-color"])?(ni().b[9][0]++,ni().s[24]++,String(r["fill-extrusion-color"])):(ni().b[9][1]++,ni().s[25]++,"black"))))}catch(r){return ni().s[26]++,console.warn("Unable to get feature color, error:",r),ni().s[27]++,"black"}}render(){ni().f[4]++;const e=(ni().s[28]++,t$(this.props.features)),t=(ni().s[29]++,Object.keys(e).map(r=>{ni().f[5]++;const i=(ni().s[30]++,e[r].map((s,l)=>{ni().f[6]++;const o=(ni().s[31]++,this._getFeatureColor(s,this.props.zoom));return ni().s[32]++,ue.jsxs("div",{className:"maputnik-popup-layer",children:[ue.jsx("div",{className:"maputnik-popup-layer__swatch",style:{background:o}}),ue.jsxs("label",{className:"maputnik-popup-layer__label",onClick:()=>{ni().f[7]++,ni().s[33]++,this.props.onLayerSelect(s.layer.id)},children:[(ni().b[11][0]++,s.layer.type&&(ni().b[11][1]++,ue.jsx(UF,{type:s.layer.type,style:{width:14,height:14,paddingRight:3}}))),s.layer.id,(ni().b[12][0]++,s.counter&&(ni().b[12][1]++,ue.jsxs("span",{children:["  ",s.counter]})))]})]},l)}));return ni().s[34]++,ue.jsxs("div",{children:[ue.jsx("div",{className:"maputnik-popup-layer-id",children:r}),i]},r)}));return ni().s[35]++,ue.jsx("div",{className:"maputnik-feature-layer-popup",children:t})}}function $i(){var n="/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlFeaturePropertyPopup.tsx",e="72aafaa905031d9408c36c83b71947160ac6dbad",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlFeaturePropertyPopup.tsx",statementMap:{0:{start:{line:4,column:2},end:{line:4,column:67}},1:{start:{line:4,column:54},end:{line:4,column:67}},2:{start:{line:5,column:2},end:{line:5,column:59}},3:{start:{line:5,column:29},end:{line:5,column:59}},4:{start:{line:6,column:2},end:{line:6,column:115}},5:{start:{line:6,column:91},end:{line:6,column:115}},6:{start:{line:7,column:2},end:{line:7,column:15}},7:{start:{line:10,column:2},end:{line:13,column:12}},8:{start:{line:16,column:2},end:{line:32,column:12}},9:{start:{line:29,column:23},end:{line:29,column:55}},10:{start:{line:30,column:6},end:{line:30,column:74}},11:{start:{line:35,column:25},end:{line:35,column:27}},12:{start:{line:36,column:2},end:{line:49,column:5}},13:{start:{line:37,column:25},end:{line:39,column:6}},14:{start:{line:38,column:6},end:{line:38,column:156}},15:{start:{line:40,column:4},end:{line:48,column:5}},16:{start:{line:41,column:6},end:{line:41,column:35}},17:{start:{line:43,column:6},end:{line:47,column:7}},18:{start:{line:44,column:8},end:{line:44,column:58}},19:{start:{line:46,column:8},end:{line:46,column:60}},20:{start:{line:50,column:2},end:{line:50,column:24}},21:{start:{line:54,column:21},end:{line:54,column:66}},22:{start:{line:55,column:4},end:{line:55,column:250}}},fnMap:{0:{name:"displayValue",decl:{start:{line:3,column:9},end:{line:3,column:21}},loc:{start:{line:3,column:29},end:{line:8,column:1}},line:3},1:{name:"renderKeyValueTableRow",decl:{start:{line:9,column:9},end:{line:9,column:31}},loc:{start:{line:9,column:44},end:{line:14,column:1}},line:9},2:{name:"renderFeature",decl:{start:{line:15,column:9},end:{line:15,column:22}},loc:{start:{line:15,column:37},end:{line:33,column:1}},line:15},3:{name:"(anonymous_3)",decl:{start:{line:28,column:40},end:{line:28,column:41}},loc:{start:{line:28,column:58},end:{line:31,column:5}},line:28},4:{name:"removeDuplicatedFeatures",decl:{start:{line:34,column:9},end:{line:34,column:33}},loc:{start:{line:34,column:44},end:{line:51,column:1}},line:34},5:{name:"(anonymous_5)",decl:{start:{line:36,column:19},end:{line:36,column:20}},loc:{start:{line:36,column:32},end:{line:49,column:3}},line:36},6:{name:"(anonymous_6)",decl:{start:{line:37,column:50},end:{line:37,column:51}},loc:{start:{line:37,column:64},end:{line:39,column:5}},line:37},7:{name:"(anonymous_7)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:11},end:{line:56,column:3}},line:53}},branchMap:{0:{loc:{start:{line:4,column:2},end:{line:4,column:67}},type:"if",locations:[{start:{line:4,column:2},end:{line:4,column:67}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:4},1:{loc:{start:{line:4,column:6},end:{line:4,column:52}},type:"binary-expr",locations:[{start:{line:4,column:6},end:{line:4,column:34}},{start:{line:4,column:38},end:{line:4,column:52}}],line:4},2:{loc:{start:{line:5,column:2},end:{line:5,column:59}},type:"if",locations:[{start:{line:5,column:2},end:{line:5,column:59}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:5},3:{loc:{start:{line:6,column:2},end:{line:6,column:115}},type:"if",locations:[{start:{line:6,column:2},end:{line:6,column:115}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:6},4:{loc:{start:{line:6,column:6},end:{line:6,column:89}},type:"binary-expr",locations:[{start:{line:6,column:6},end:{line:6,column:31}},{start:{line:6,column:35},end:{line:6,column:60}},{start:{line:6,column:64},end:{line:6,column:89}}],line:6},5:{loc:{start:{line:21,column:6},end:{line:24,column:10}},type:"binary-expr",locations:[{start:{line:21,column:6},end:{line:21,column:32}},{start:{line:21,column:52},end:{line:24,column:10}}],line:21},6:{loc:{start:{line:38,column:13},end:{line:38,column:155}},type:"binary-expr",locations:[{start:{line:38,column:13},end:{line:38,column:77}},{start:{line:38,column:81},end:{line:38,column:155}}],line:38},7:{loc:{start:{line:40,column:4},end:{line:48,column:5}},type:"if",locations:[{start:{line:40,column:4},end:{line:48,column:5}},{start:{line:42,column:11},end:{line:48,column:5}}],line:40},8:{loc:{start:{line:43,column:6},end:{line:47,column:7}},type:"if",locations:[{start:{line:43,column:6},end:{line:47,column:7}},{start:{line:45,column:13},end:{line:47,column:7}}],line:43}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlFeaturePropertyPopup.tsx"],names:[],mappings:"AAkBS,SACL,KADK;AAlBT,OAAO,WAAW;AAQlB,SAAS,aAAa,OAAoD;AACxE,MAAI,OAAO,UAAU,eAAe,UAAU,KAAM,QAAO;AAC3D,MAAI,iBAAiB,KAAM,QAAO,MAAM,eAAe;AACvD,MAAI,OAAO,UAAU,YACb,OAAO,UAAU,YACjB,OAAO,UAAU,SAAU,QAAO,MAAM,SAAS;AACzD,SAAO;AACT;AAEA,SAAS,uBAAuB,KAAa,OAA2B;AACtE,SAAO,qBAAC,QACN;AAAA,wBAAC,QAAG,WAAU,6BAA6B,eAAI;AAAA,IAC/C,oBAAC,QAAG,WAAU,6BAA6B,iBAAM;AAAA,OAFnC,GAGhB;AACF;AAEA,SAAS,cAAc,SAAyB,KAAa;AAC3D,SAAO,qBAAC,MAAM,UAAN,EACN;AAAA,wBAAC,QACC,+BAAC,QAAG,SAAS,GAAG,WAAU,2BAA2B;AAAA,cAAQ,MAAM,QAAQ;AAAA,MAAE;AAAA,MAAG,QAAQ,MAAM,cAAc;AAAA,MAAG,QAAQ,sBAAsB,qBAAC,UAAK;AAAA;AAAA,QAAI,QAAQ;AAAA,SAAmB;AAAA,OAAQ,GAC5L;AAAA,IACC,uBAAuB,SAAS,QAAQ,SAAS,IAAI;AAAA,IACrD,uBAAuB,OAAO,aAAa,QAAQ,EAAE,CAAC;AAAA,IACtD,OAAO,KAAK,QAAQ,UAAU,EAAE,IAAI,kBAAgB;AACnD,YAAM,WAAW,QAAQ,WAAW,YAAY;AAChD,aAAO,uBAAuB,cAAc,aAAa,QAAQ,CAAC;AAAA,IACpE,CAAC;AAAA,OATyB,GAU5B;AACF;AAEA,SAAS,yBAAyB,UAA4B;AAC5D,QAAM,iBAAmC,CAAC;AAE1C,WAAS,QAAQ,aAAW;AAC1B,UAAM,eAAe,eAAe,UAAU,cAAY;AACxD,aAAO,QAAQ,MAAM,cAAc,MAAM,SAAS,MAAM,cAAc,KACjE,KAAK,UAAU,QAAQ,UAAU,MAAM,KAAK,UAAU,SAAS,UAAU;AAAA,IAChF,CAAC;AAED,QAAG,iBAAiB,IAAI;AACtB,qBAAe,KAAK,OAAO;AAAA,IAC7B,OAAO;AACL,UAAG,wBAAwB,eAAe,YAAY,GAAG;AACvD,uBAAe,YAAY,EAAE;AAAA,MAC/B,OAAO;AACL,uBAAe,YAAY,EAAE,qBAAqB;AAAA,MACpD;AAAA,IACF;AAAA,EACF,CAAC;AAED,SAAO;AACT;AAMA,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,SAAS;AACP,UAAM,WAAW,yBAAyB,KAAK,MAAM,QAAQ;AAC7D,WAAO,oBAAC,SAAI,WAAU,mCACpB,8BAAC,WAAM,WAAU,wBACf,8BAAC,WACE,mBAAS,IAAI,aAAa,GAC7B,GACF,GACF;AAAA,EACF;AACF;AAGA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"72aafaa905031d9408c36c83b71947160ac6dbad"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return $i=function(){return l},l}$i();function O7(n){return $i().f[0]++,$i().s[0]++,$i().b[1][0]++,typeof n>"u"||($i().b[1][1]++,n===null)?($i().b[0][0]++,$i().s[1]++,n):($i().b[0][1]++,$i().s[2]++,n instanceof Date?($i().b[2][0]++,$i().s[3]++,n.toLocaleString()):($i().b[2][1]++,$i().s[4]++,$i().b[4][0]++,typeof n=="object"||($i().b[4][1]++,typeof n=="number")||($i().b[4][2]++,typeof n=="string")?($i().b[3][0]++,$i().s[5]++,n.toString()):($i().b[3][1]++,$i().s[6]++,n)))}function Q3(n,e){return $i().f[1]++,$i().s[7]++,ue.jsxs("tr",{children:[ue.jsx("td",{className:"maputnik-popup-table-cell",children:n}),ue.jsx("td",{className:"maputnik-popup-table-cell",children:e})]},n)}function n$(n,e){return $i().f[2]++,$i().s[8]++,ue.jsxs(Xn.Fragment,{children:[ue.jsx("tr",{children:ue.jsxs("td",{colSpan:2,className:"maputnik-popup-layer-id",children:[n.layer.source,": ",n.layer["source-layer"],($i().b[5][0]++,n.inspectModeCounter&&($i().b[5][1]++,ue.jsxs("span",{children:["  ",n.inspectModeCounter]})))]})}),Q3("$type",n.geometry.type),Q3("$id",O7(n.id)),Object.keys(n.properties).map(t=>{$i().f[3]++;const r=($i().s[9]++,n.properties[t]);return $i().s[10]++,Q3(t,O7(r))})]},e)}function r$(n){$i().f[4]++;const e=($i().s[11]++,[]);return $i().s[12]++,n.forEach(t=>{$i().f[5]++;const r=($i().s[13]++,e.findIndex(i=>($i().f[6]++,$i().s[14]++,$i().b[6][0]++,t.layer["source-layer"]===i.layer["source-layer"]&&($i().b[6][1]++,JSON.stringify(t.properties)===JSON.stringify(i.properties)))));$i().s[15]++,r===-1?($i().b[7][0]++,$i().s[16]++,e.push(t)):($i().b[7][1]++,$i().s[17]++,"inspectModeCounter"in e[r]?($i().b[8][0]++,$i().s[18]++,e[r].inspectModeCounter++):($i().b[8][1]++,$i().s[19]++,e[r].inspectModeCounter=2))}),$i().s[20]++,e}class i$ extends Xn.Component{render(){$i().f[7]++;const e=($i().s[21]++,r$(this.props.features));return $i().s[22]++,ue.jsx("div",{className:"maputnik-feature-property-popup",children:ue.jsx("table",{className:"maputnik-popup-table",children:ue.jsx("tbody",{children:e.map(n$)})})})}}const Yv={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},jF=Object.create(null);for(const n in Yv)Object.hasOwn(Yv,n)&&(jF[Yv[n]]=n);const $A={to:{},get:{}};$A.get=function(n){const e=n.slice(0,3).toLowerCase();let t,r;switch(e){case"hsl":{t=$A.get.hsl(n),r="hsl";break}case"hwb":{t=$A.get.hwb(n),r="hwb";break}default:{t=$A.get.rgb(n),r="rgb";break}}return t?{model:r,value:t}:null};$A.get.rgb=function(n){if(!n)return null;const e=/^#([a-f\d]{3,4})$/i,t=/^#([a-f\d]{6})([a-f\d]{2})?$/i,r=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|/]\s*([+-]?[\d.]+)(%?)\s*)?\)$/,i=/^rgba?\(\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*(?:[,|/]\s*([+-]?[\d.]+)(%?)\s*)?\)$/,s=/^(\w+)$/;let l=[0,0,0,1],o,f,y;if(o=n.match(t)){for(y=o[2],o=o[1],f=0;f<3;f++){const x=f*2;l[f]=Number.parseInt(o.slice(x,x+2),16)}y&&(l[3]=Number.parseInt(y,16)/255)}else if(o=n.match(e)){for(o=o[1],y=o[3],f=0;f<3;f++)l[f]=Number.parseInt(o[f]+o[f],16);y&&(l[3]=Number.parseInt(y+y,16)/255)}else if(o=n.match(r)){for(f=0;f<3;f++)l[f]=Number.parseInt(o[f+1],10);o[4]&&(l[3]=o[5]?Number.parseFloat(o[4])*.01:Number.parseFloat(o[4]))}else if(o=n.match(i)){for(f=0;f<3;f++)l[f]=Math.round(Number.parseFloat(o[f+1])*2.55);o[4]&&(l[3]=o[5]?Number.parseFloat(o[4])*.01:Number.parseFloat(o[4]))}else return(o=n.match(s))?o[1]==="transparent"?[0,0,0,0]:Object.hasOwn(Yv,o[1])?(l=Yv[o[1]],l[3]=1,l):null:null;for(f=0;f<3;f++)l[f]=F0(l[f],0,255);return l[3]=F0(l[3],0,1),l};$A.get.hsl=function(n){if(!n)return null;const e=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*(?:[,|/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,t=n.match(e);if(t){const r=Number.parseFloat(t[4]),i=(Number.parseFloat(t[1])%360+360)%360,s=F0(Number.parseFloat(t[2]),0,100),l=F0(Number.parseFloat(t[3]),0,100),o=F0(Number.isNaN(r)?1:r,0,1);return[i,s,l,o]}return null};$A.get.hwb=function(n){if(!n)return null;const e=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d.]+)%\s*,\s*([+-]?[\d.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,t=n.match(e);if(t){const r=Number.parseFloat(t[4]),i=(Number.parseFloat(t[1])%360+360)%360,s=F0(Number.parseFloat(t[2]),0,100),l=F0(Number.parseFloat(t[3]),0,100),o=F0(Number.isNaN(r)?1:r,0,1);return[i,s,l,o]}return null};$A.to.hex=function(...n){return"#"+W_(n[0])+W_(n[1])+W_(n[2])+(n[3]<1?W_(Math.round(n[3]*255)):"")};$A.to.rgb=function(...n){return n.length<4||n[3]===1?"rgb("+Math.round(n[0])+", "+Math.round(n[1])+", "+Math.round(n[2])+")":"rgba("+Math.round(n[0])+", "+Math.round(n[1])+", "+Math.round(n[2])+", "+n[3]+")"};$A.to.rgb.percent=function(...n){const e=Math.round(n[0]/255*100),t=Math.round(n[1]/255*100),r=Math.round(n[2]/255*100);return n.length<4||n[3]===1?"rgb("+e+"%, "+t+"%, "+r+"%)":"rgba("+e+"%, "+t+"%, "+r+"%, "+n[3]+")"};$A.to.hsl=function(...n){return n.length<4||n[3]===1?"hsl("+n[0]+", "+n[1]+"%, "+n[2]+"%)":"hsla("+n[0]+", "+n[1]+"%, "+n[2]+"%, "+n[3]+")"};$A.to.hwb=function(...n){let e="";return n.length>=4&&n[3]!==1&&(e=", "+n[3]),"hwb("+n[0]+", "+n[1]+"%, "+n[2]+"%"+e+")"};$A.to.keyword=function(...n){return jF[n.slice(0,3)]};function F0(n,e,t){return Math.min(Math.max(e,n),t)}function W_(n){const e=Math.round(n).toString(16).toUpperCase();return e.length<2?"0"+e:e}const lC={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},NF={};for(const n of Object.keys(lC))NF[lC[n]]=n;const Ai={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}},Km=(6/29)**3;for(const n of Object.keys(Ai)){if(!("channels"in Ai[n]))throw new Error("missing channels property: "+n);if(!("labels"in Ai[n]))throw new Error("missing channel labels property: "+n);if(Ai[n].labels.length!==Ai[n].channels)throw new Error("channel and label counts mismatch: "+n);const{channels:e,labels:t}=Ai[n];delete Ai[n].channels,delete Ai[n].labels,Object.defineProperty(Ai[n],"channels",{value:e}),Object.defineProperty(Ai[n],"labels",{value:t})}Ai.rgb.hsl=function(n){const e=n[0]/255,t=n[1]/255,r=n[2]/255,i=Math.min(e,t,r),s=Math.max(e,t,r),l=s-i;let o,f;switch(s){case i:{o=0;break}case e:{o=(t-r)/l;break}case t:{o=2+(r-e)/l;break}case r:{o=4+(e-t)/l;break}}o=Math.min(o*60,360),o<0&&(o+=360);const y=(i+s)/2;return s===i?f=0:y<=.5?f=l/(s+i):f=l/(2-s-i),[o,f*100,y*100]};Ai.rgb.hsv=function(n){let e,t,r,i,s;const l=n[0]/255,o=n[1]/255,f=n[2]/255,y=Math.max(l,o,f),x=y-Math.min(l,o,f),B=function(O){return(y-O)/6/x+1/2};if(x===0)i=0,s=0;else{switch(s=x/y,e=B(l),t=B(o),r=B(f),y){case l:{i=r-t;break}case o:{i=1/3+e-r;break}case f:{i=2/3+t-e;break}}i<0?i+=1:i>1&&(i-=1)}return[i*360,s*100,y*100]};Ai.rgb.hwb=function(n){const e=n[0],t=n[1];let r=n[2];const i=Ai.rgb.hsl(n)[0],s=1/255*Math.min(e,Math.min(t,r));return r=1-1/255*Math.max(e,Math.max(t,r)),[i,s*100,r*100]};Ai.rgb.cmyk=function(n){const e=n[0]/255,t=n[1]/255,r=n[2]/255,i=Math.min(1-e,1-t,1-r),s=(1-e-i)/(1-i)||0,l=(1-t-i)/(1-i)||0,o=(1-r-i)/(1-i)||0;return[s*100,l*100,o*100,i*100]};function o$(n,e){return(n[0]-e[0])**2+(n[1]-e[1])**2+(n[2]-e[2])**2}Ai.rgb.keyword=function(n){const e=NF[n];if(e)return e;let t=Number.POSITIVE_INFINITY,r;for(const i of Object.keys(lC)){const s=lC[i],l=o$(n,s);l<t&&(t=l,r=i)}return r};Ai.keyword.rgb=function(n){return lC[n]};Ai.rgb.xyz=function(n){let e=n[0]/255,t=n[1]/255,r=n[2]/255;e=e>.04045?((e+.055)/1.055)**2.4:e/12.92,t=t>.04045?((t+.055)/1.055)**2.4:t/12.92,r=r>.04045?((r+.055)/1.055)**2.4:r/12.92;const i=e*.4124564+t*.3575761+r*.1804375,s=e*.2126729+t*.7151522+r*.072175,l=e*.0193339+t*.119192+r*.9503041;return[i*100,s*100,l*100]};Ai.rgb.lab=function(n){const e=Ai.rgb.xyz(n);let t=e[0],r=e[1],i=e[2];t/=95.047,r/=100,i/=108.883,t=t>Km?t**(1/3):7.787*t+16/116,r=r>Km?r**(1/3):7.787*r+16/116,i=i>Km?i**(1/3):7.787*i+16/116;const s=116*r-16,l=500*(t-r),o=200*(r-i);return[s,l,o]};Ai.hsl.rgb=function(n){const e=n[0]/360,t=n[1]/100,r=n[2]/100;let i,s;if(t===0)return s=r*255,[s,s,s];const l=r<.5?r*(1+t):r+t-r*t,o=2*r-l,f=[0,0,0];for(let y=0;y<3;y++)i=e+1/3*-(y-1),i<0&&i++,i>1&&i--,6*i<1?s=o+(l-o)*6*i:2*i<1?s=l:3*i<2?s=o+(l-o)*(2/3-i)*6:s=o,f[y]=s*255;return f};Ai.hsl.hsv=function(n){const e=n[0];let t=n[1]/100,r=n[2]/100,i=t;const s=Math.max(r,.01);r*=2,t*=r<=1?r:2-r,i*=s<=1?s:2-s;const l=(r+t)/2,o=r===0?2*i/(s+i):2*t/(r+t);return[e,o*100,l*100]};Ai.hsv.rgb=function(n){const e=n[0]/60,t=n[1]/100;let r=n[2]/100;const i=Math.floor(e)%6,s=e-Math.floor(e),l=255*r*(1-t),o=255*r*(1-t*s),f=255*r*(1-t*(1-s));switch(r*=255,i){case 0:return[r,f,l];case 1:return[o,r,l];case 2:return[l,r,f];case 3:return[l,o,r];case 4:return[f,l,r];case 5:return[r,l,o]}};Ai.hsv.hsl=function(n){const e=n[0],t=n[1]/100,r=n[2]/100,i=Math.max(r,.01);let s,l;l=(2-t)*r;const o=(2-t)*i;return s=t*i,s/=o<=1?o:2-o,s=s||0,l/=2,[e,s*100,l*100]};Ai.hwb.rgb=function(n){const e=n[0]/360;let t=n[1]/100,r=n[2]/100;const i=t+r;let s;i>1&&(t/=i,r/=i);const l=Math.floor(6*e),o=1-r;s=6*e-l,(l&1)!==0&&(s=1-s);const f=t+s*(o-t);let y,x,B;switch(l){default:case 6:case 0:{y=o,x=f,B=t;break}case 1:{y=f,x=o,B=t;break}case 2:{y=t,x=o,B=f;break}case 3:{y=t,x=f,B=o;break}case 4:{y=f,x=t,B=o;break}case 5:{y=o,x=t,B=f;break}}return[y*255,x*255,B*255]};Ai.cmyk.rgb=function(n){const e=n[0]/100,t=n[1]/100,r=n[2]/100,i=n[3]/100,s=1-Math.min(1,e*(1-i)+i),l=1-Math.min(1,t*(1-i)+i),o=1-Math.min(1,r*(1-i)+i);return[s*255,l*255,o*255]};Ai.xyz.rgb=function(n){const e=n[0]/100,t=n[1]/100,r=n[2]/100;let i,s,l;return i=e*3.2404542+t*-1.5371385+r*-.4985314,s=e*-.969266+t*1.8760108+r*.041556,l=e*.0556434+t*-.2040259+r*1.0572252,i=i>.0031308?1.055*i**(1/2.4)-.055:i*12.92,s=s>.0031308?1.055*s**(1/2.4)-.055:s*12.92,l=l>.0031308?1.055*l**(1/2.4)-.055:l*12.92,i=Math.min(Math.max(0,i),1),s=Math.min(Math.max(0,s),1),l=Math.min(Math.max(0,l),1),[i*255,s*255,l*255]};Ai.xyz.lab=function(n){let e=n[0],t=n[1],r=n[2];e/=95.047,t/=100,r/=108.883,e=e>Km?e**(1/3):7.787*e+16/116,t=t>Km?t**(1/3):7.787*t+16/116,r=r>Km?r**(1/3):7.787*r+16/116;const i=116*t-16,s=500*(e-t),l=200*(t-r);return[i,s,l]};Ai.lab.xyz=function(n){const e=n[0],t=n[1],r=n[2];let i,s,l;s=(e+16)/116,i=t/500+s,l=s-r/200;const o=s**3,f=i**3,y=l**3;return s=o>Km?o:(s-16/116)/7.787,i=f>Km?f:(i-16/116)/7.787,l=y>Km?y:(l-16/116)/7.787,i*=95.047,s*=100,l*=108.883,[i,s,l]};Ai.lab.lch=function(n){const e=n[0],t=n[1],r=n[2];let i;i=Math.atan2(r,t)*360/2/Math.PI,i<0&&(i+=360);const l=Math.sqrt(t*t+r*r);return[e,l,i]};Ai.lch.lab=function(n){const e=n[0],t=n[1],i=n[2]/360*2*Math.PI,s=t*Math.cos(i),l=t*Math.sin(i);return[e,s,l]};Ai.rgb.ansi16=function(n,e=null){const[t,r,i]=n;let s=e===null?Ai.rgb.hsv(n)[2]:e;if(s=Math.round(s/50),s===0)return 30;let l=30+(Math.round(i/255)<<2|Math.round(r/255)<<1|Math.round(t/255));return s===2&&(l+=60),l};Ai.hsv.ansi16=function(n){return Ai.rgb.ansi16(Ai.hsv.rgb(n),n[2])};Ai.rgb.ansi256=function(n){const e=n[0],t=n[1],r=n[2];return e>>4===t>>4&&t>>4===r>>4?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(t/255*5)+Math.round(r/255*5)};Ai.ansi16.rgb=function(n){n=n[0];let e=n%10;if(e===0||e===7)return n>50&&(e+=3.5),e=e/10.5*255,[e,e,e];const t=(Math.trunc(n>50)+1)*.5,r=(e&1)*t*255,i=(e>>1&1)*t*255,s=(e>>2&1)*t*255;return[r,i,s]};Ai.ansi256.rgb=function(n){if(n=n[0],n>=232){const s=(n-232)*10+8;return[s,s,s]}n-=16;let e;const t=Math.floor(n/36)/5*255,r=Math.floor((e=n%36)/6)/5*255,i=e%6/5*255;return[t,r,i]};Ai.rgb.hex=function(n){const t=(((Math.round(n[0])&255)<<16)+((Math.round(n[1])&255)<<8)+(Math.round(n[2])&255)).toString(16).toUpperCase();return"000000".slice(t.length)+t};Ai.hex.rgb=function(n){const e=n.toString(16).match(/[a-f\d]{6}|[a-f\d]{3}/i);if(!e)return[0,0,0];let t=e[0];e[0].length===3&&(t=[...t].map(o=>o+o).join(""));const r=Number.parseInt(t,16),i=r>>16&255,s=r>>8&255,l=r&255;return[i,s,l]};Ai.rgb.hcg=function(n){const e=n[0]/255,t=n[1]/255,r=n[2]/255,i=Math.max(Math.max(e,t),r),s=Math.min(Math.min(e,t),r),l=i-s;let o;const f=l<1?s/(1-l):0;return l<=0?o=0:i===e?o=(t-r)/l%6:i===t?o=2+(r-e)/l:o=4+(e-t)/l,o/=6,o%=1,[o*360,l*100,f*100]};Ai.hsl.hcg=function(n){const e=n[1]/100,t=n[2]/100,r=t<.5?2*e*t:2*e*(1-t);let i=0;return r<1&&(i=(t-.5*r)/(1-r)),[n[0],r*100,i*100]};Ai.hsv.hcg=function(n){const e=n[1]/100,t=n[2]/100,r=e*t;let i=0;return r<1&&(i=(t-r)/(1-r)),[n[0],r*100,i*100]};Ai.hcg.rgb=function(n){const e=n[0]/360,t=n[1]/100,r=n[2]/100;if(t===0)return[r*255,r*255,r*255];const i=[0,0,0],s=e%1*6,l=s%1,o=1-l;let f=0;switch(Math.floor(s)){case 0:{i[0]=1,i[1]=l,i[2]=0;break}case 1:{i[0]=o,i[1]=1,i[2]=0;break}case 2:{i[0]=0,i[1]=1,i[2]=l;break}case 3:{i[0]=0,i[1]=o,i[2]=1;break}case 4:{i[0]=l,i[1]=0,i[2]=1;break}default:i[0]=1,i[1]=0,i[2]=o}return f=(1-t)*r,[(t*i[0]+f)*255,(t*i[1]+f)*255,(t*i[2]+f)*255]};Ai.hcg.hsv=function(n){const e=n[1]/100,t=n[2]/100,r=e+t*(1-e);let i=0;return r>0&&(i=e/r),[n[0],i*100,r*100]};Ai.hcg.hsl=function(n){const e=n[1]/100,r=n[2]/100*(1-e)+.5*e;let i=0;return r>0&&r<.5?i=e/(2*r):r>=.5&&r<1&&(i=e/(2*(1-r))),[n[0],i*100,r*100]};Ai.hcg.hwb=function(n){const e=n[1]/100,t=n[2]/100,r=e+t*(1-e);return[n[0],(r-e)*100,(1-r)*100]};Ai.hwb.hcg=function(n){const e=n[1]/100,r=1-n[2]/100,i=r-e;let s=0;return i<1&&(s=(r-i)/(1-i)),[n[0],i*100,s*100]};Ai.apple.rgb=function(n){return[n[0]/65535*255,n[1]/65535*255,n[2]/65535*255]};Ai.rgb.apple=function(n){return[n[0]/255*65535,n[1]/255*65535,n[2]/255*65535]};Ai.gray.rgb=function(n){return[n[0]/100*255,n[0]/100*255,n[0]/100*255]};Ai.gray.hsl=function(n){return[0,0,n[0]]};Ai.gray.hsv=Ai.gray.hsl;Ai.gray.hwb=function(n){return[0,100,n[0]]};Ai.gray.cmyk=function(n){return[0,0,0,n[0]]};Ai.gray.lab=function(n){return[n[0],0,0]};Ai.gray.hex=function(n){const e=Math.round(n[0]/100*255)&255,r=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".slice(r.length)+r};Ai.rgb.gray=function(n){return[(n[0]+n[1]+n[2])/3/255*100]};function s$(){const n={},e=Object.keys(Ai);for(let{length:t}=e,r=0;r<t;r++)n[e[r]]={distance:-1,parent:null};return n}function a$(n){const e=s$(),t=[n];for(e[n].distance=0;t.length>0;){const r=t.pop(),i=Object.keys(Ai[r]);for(let{length:s}=i,l=0;l<s;l++){const o=i[l],f=e[o];f.distance===-1&&(f.distance=e[r].distance+1,f.parent=r,t.unshift(o))}}return e}function l$(n,e){return function(t){return e(n(t))}}function u$(n,e){const t=[e[n].parent,n];let r=Ai[e[n].parent][n],i=e[n].parent;for(;e[i].parent;)t.unshift(e[i].parent),r=l$(Ai[e[i].parent][i],r),i=e[i].parent;return r.conversion=t,r}function A$(n){const e=a$(n),t={},r=Object.keys(e);for(let{length:i}=r,s=0;s<i;s++){const l=r[s];e[l].parent!==null&&(t[l]=u$(l,e))}return t}const yc={},c$=Object.keys(Ai);function d$(n){const e=function(...t){const r=t[0];return r==null?r:(r.length>1&&(t=r),n(t))};return"conversion"in n&&(e.conversion=n.conversion),e}function h$(n){const e=function(...t){const r=t[0];if(r==null)return r;r.length>1&&(t=r);const i=n(t);if(typeof i=="object")for(let{length:s}=i,l=0;l<s;l++)i[l]=Math.round(i[l]);return i};return"conversion"in n&&(e.conversion=n.conversion),e}for(const n of c$){yc[n]={},Object.defineProperty(yc[n],"channels",{value:Ai[n].channels}),Object.defineProperty(yc[n],"labels",{value:Ai[n].labels});const e=A$(n),t=Object.keys(e);for(const r of t){const i=e[r];yc[n][r]=h$(i),yc[n][r].raw=d$(i)}}const WF=["keyword","gray","hex"],GE={};for(const n of Object.keys(yc))GE[[...yc[n].labels].sort().join("")]=n;const qv={};function MA(n,e){if(!(this instanceof MA))return new MA(n,e);if(e&&e in WF&&(e=null),e&&!(e in yc))throw new Error("Unknown model: "+e);let t,r;if(n==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(n instanceof MA)this.model=n.model,this.color=[...n.color],this.valpha=n.valpha;else if(typeof n=="string"){const i=$A.get(n);if(i===null)throw new Error("Unable to parse color from string: "+n);this.model=i.model,r=yc[this.model].channels,this.color=i.value.slice(0,r),this.valpha=typeof i.value[r]=="number"?i.value[r]:1}else if(n.length>0){this.model=e||"rgb",r=yc[this.model].channels;const i=Array.prototype.slice.call(n,0,r);this.color=QE(i,r),this.valpha=typeof n[r]=="number"?n[r]:1}else if(typeof n=="number")this.model="rgb",this.color=[n>>16&255,n>>8&255,n&255],this.valpha=1;else{this.valpha=1;const i=Object.keys(n);"alpha"in n&&(i.splice(i.indexOf("alpha"),1),this.valpha=typeof n.alpha=="number"?n.alpha:0);const s=i.sort().join("");if(!(s in GE))throw new Error("Unable to parse color from object: "+JSON.stringify(n));this.model=GE[s];const{labels:l}=yc[this.model],o=[];for(t=0;t<l.length;t++)o.push(n[l[t]]);this.color=QE(o)}if(qv[this.model])for(r=yc[this.model].channels,t=0;t<r;t++){const i=qv[this.model][t];i&&(this.color[t]=i(this.color[t]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}MA.prototype={toString(){return this.string()},toJSON(){return this[this.model]()},string(n){let e=this.model in $A.to?this:this.rgb();e=e.round(typeof n=="number"?n:1);const t=e.valpha===1?e.color:[...e.color,this.valpha];return $A.to[e.model](...t)},percentString(n){const e=this.rgb().round(typeof n=="number"?n:1),t=e.valpha===1?e.color:[...e.color,this.valpha];return $A.to.rgb.percent(...t)},array(){return this.valpha===1?[...this.color]:[...this.color,this.valpha]},object(){const n={},{channels:e}=yc[this.model],{labels:t}=yc[this.model];for(let r=0;r<e;r++)n[t[r]]=this.color[r];return this.valpha!==1&&(n.alpha=this.valpha),n},unitArray(){const n=this.rgb().color;return n[0]/=255,n[1]/=255,n[2]/=255,this.valpha!==1&&n.push(this.valpha),n},unitObject(){const n=this.rgb().object();return n.r/=255,n.g/=255,n.b/=255,this.valpha!==1&&(n.alpha=this.valpha),n},round(n){return n=Math.max(n||0,0),new MA([...this.color.map(p$(n)),this.valpha],this.model)},alpha(n){return n!==void 0?new MA([...this.color,Math.max(0,Math.min(1,n))],this.model):this.valpha},red:Pu("rgb",0,QA(255)),green:Pu("rgb",1,QA(255)),blue:Pu("rgb",2,QA(255)),hue:Pu(["hsl","hsv","hsl","hwb","hcg"],0,n=>(n%360+360)%360),saturationl:Pu("hsl",1,QA(100)),lightness:Pu("hsl",2,QA(100)),saturationv:Pu("hsv",1,QA(100)),value:Pu("hsv",2,QA(100)),chroma:Pu("hcg",1,QA(100)),gray:Pu("hcg",2,QA(100)),white:Pu("hwb",1,QA(100)),wblack:Pu("hwb",2,QA(100)),cyan:Pu("cmyk",0,QA(100)),magenta:Pu("cmyk",1,QA(100)),yellow:Pu("cmyk",2,QA(100)),black:Pu("cmyk",3,QA(100)),x:Pu("xyz",0,QA(95.047)),y:Pu("xyz",1,QA(100)),z:Pu("xyz",2,QA(108.833)),l:Pu("lab",0,QA(100)),a:Pu("lab",1),b:Pu("lab",2),keyword(n){return n!==void 0?new MA(n):yc[this.model].keyword(this.color)},hex(n){return n!==void 0?new MA(n):$A.to.hex(...this.rgb().round().color)},hexa(n){if(n!==void 0)return new MA(n);const e=this.rgb().round().color;let t=Math.round(this.valpha*255).toString(16).toUpperCase();return t.length===1&&(t="0"+t),$A.to.hex(...e)+t},rgbNumber(){const n=this.rgb().color;return(n[0]&255)<<16|(n[1]&255)<<8|n[2]&255},luminosity(){const n=this.rgb().color,e=[];for(const[t,r]of n.entries()){const i=r/255;e[t]=i<=.04045?i/12.92:((i+.055)/1.055)**2.4}return .2126*e[0]+.7152*e[1]+.0722*e[2]},contrast(n){const e=this.luminosity(),t=n.luminosity();return e>t?(e+.05)/(t+.05):(t+.05)/(e+.05)},level(n){const e=this.contrast(n);return e>=7?"AAA":e>=4.5?"AA":""},isDark(){const n=this.rgb().color;return(n[0]*2126+n[1]*7152+n[2]*722)/1e4<128},isLight(){return!this.isDark()},negate(){const n=this.rgb();for(let e=0;e<3;e++)n.color[e]=255-n.color[e];return n},lighten(n){const e=this.hsl();return e.color[2]+=e.color[2]*n,e},darken(n){const e=this.hsl();return e.color[2]-=e.color[2]*n,e},saturate(n){const e=this.hsl();return e.color[1]+=e.color[1]*n,e},desaturate(n){const e=this.hsl();return e.color[1]-=e.color[1]*n,e},whiten(n){const e=this.hwb();return e.color[1]+=e.color[1]*n,e},blacken(n){const e=this.hwb();return e.color[2]+=e.color[2]*n,e},grayscale(){const n=this.rgb().color,e=n[0]*.3+n[1]*.59+n[2]*.11;return MA.rgb(e,e,e)},fade(n){return this.alpha(this.valpha-this.valpha*n)},opaquer(n){return this.alpha(this.valpha+this.valpha*n)},rotate(n){const e=this.hsl();let t=e.color[0];return t=(t+n)%360,t=t<0?360+t:t,e.color[0]=t,e},mix(n,e){if(!n||!n.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof n);const t=n.rgb(),r=this.rgb(),i=e===void 0?.5:e,s=2*i-1,l=t.alpha()-r.alpha(),o=((s*l===-1?s:(s+l)/(1+s*l))+1)/2,f=1-o;return MA.rgb(o*t.red()+f*r.red(),o*t.green()+f*r.green(),o*t.blue()+f*r.blue(),t.alpha()*i+r.alpha()*(1-i))}};for(const n of Object.keys(yc)){if(WF.includes(n))continue;const{channels:e}=yc[n];MA.prototype[n]=function(...t){return this.model===n?new MA(this):t.length>0?new MA(t,n):new MA([...m$(yc[this.model][n].raw(this.color)),this.valpha],n)},MA[n]=function(...t){let r=t[0];return typeof r=="number"&&(r=QE(t,e)),new MA(r,n)}}function f$(n,e){return Number(n.toFixed(e))}function p$(n){return function(e){return f$(e,n)}}function Pu(n,e,t){n=Array.isArray(n)?n:[n];for(const r of n)(qv[r]||(qv[r]=[]))[e]=t;return n=n[0],function(r){let i;return r!==void 0?(t&&(r=t(r)),i=this[n](),i.color[e]=r,i):(i=this[n]().color[e],t&&(i=t(i)),i)}}function QA(n){return function(e){return Math.max(0,Math.min(n,e))}}function m$(n){return Array.isArray(n)?n:[n]}function QE(n,e){for(let t=0;t<e;t++)typeof n[t]!="number"&&(n[t]=0);return n}function qs(){var n="/home/runner/work/maputnik/maputnik/src/libs/zoomcontrol.ts",e="9dd3eea5f46b0cc48ff3173a7af02bc32aa63f10",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/zoomcontrol.ts",statementMap:{0:{start:{line:2,column:9},end:{line:2,column:15}},1:{start:{line:3,column:15},end:{line:3,column:21}},2:{start:{line:4,column:12},end:{line:4,column:16}},3:{start:{line:8,column:4},end:{line:8,column:20}},4:{start:{line:9,column:4},end:{line:9,column:52}},5:{start:{line:10,column:4},end:{line:10,column:93}},6:{start:{line:11,column:4},end:{line:11,column:70}},7:{start:{line:12,column:4},end:{line:12,column:27}},8:{start:{line:13,column:4},end:{line:13,column:29}},9:{start:{line:14,column:4},end:{line:14,column:27}},10:{start:{line:17,column:4},end:{line:17,column:60}},11:{start:{line:20,column:4},end:{line:22,column:6}},12:{start:{line:23,column:4},end:{line:23,column:57}},13:{start:{line:24,column:4},end:{line:24,column:27}},14:{start:{line:27,column:4},end:{line:27,column:57}},15:{start:{line:27,column:33},end:{line:27,column:55}},16:{start:{line:28,column:4},end:{line:28,column:57}},17:{start:{line:28,column:33},end:{line:28,column:55}},18:{start:{line:29,column:4},end:{line:29,column:58}},19:{start:{line:29,column:34},end:{line:29,column:56}},20:{start:{line:32,column:4},end:{line:32,column:60}},21:{start:{line:33,column:4},end:{line:33,column:23}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:16},end:{line:6,column:3}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:13},end:{line:15,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:16,column:2},end:{line:16,column:3}},loc:{start:{line:16,column:20},end:{line:18,column:3}},line:16},3:{name:"(anonymous_3)",decl:{start:{line:19,column:2},end:{line:19,column:3}},loc:{start:{line:19,column:18},end:{line:25,column:3}},line:19},4:{name:"(anonymous_4)",decl:{start:{line:26,column:2},end:{line:26,column:3}},loc:{start:{line:26,column:22},end:{line:30,column:3}},line:26},5:{name:"(anonymous_5)",decl:{start:{line:27,column:27},end:{line:27,column:28}},loc:{start:{line:27,column:33},end:{line:27,column:55}},line:27},6:{name:"(anonymous_6)",decl:{start:{line:28,column:27},end:{line:28,column:28}},loc:{start:{line:28,column:33},end:{line:28,column:55}},line:28},7:{name:"(anonymous_7)",decl:{start:{line:29,column:28},end:{line:29,column:29}},loc:{start:{line:29,column:34},end:{line:29,column:56}},line:29},8:{name:"(anonymous_8)",decl:{start:{line:31,column:2},end:{line:31,column:3}},loc:{start:{line:31,column:13},end:{line:34,column:3}},line:31}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/zoomcontrol.ts"],names:[],mappings:"AAEA,qBAAqB,YAAY;AAAA,EAC/B,OAAuB;AAAA,EACvB,aAAyC;AAAA,EACzC,UAAkC;AAAA,EAElC,cAAc;AAAA,EAAC;AAAA,EAEf,MAAM,KAAU;AACd,SAAK,OAAO;AACZ,SAAK,aAAa,SAAS,cAAc,KAAK;AAC9C,SAAK,WAAW,YAAY;AAC5B,SAAK,WAAW,aAAa,eAAe,oBAAoB;AAChE,SAAK,SAAS,OAAO;AACrB,SAAK,kBAAkB;AAEvB,WAAO,KAAK;AAAA,EACd;AAAA,EAEA,kBAAkB;AAChB,SAAK,QAAS,YAAY,KAAK,KAAM,QAAQ,EAAE,QAAQ,CAAC;AAAA,EAC1D;AAAA,EAEA,SAAS,OAAe;AACtB,SAAK,WAAY,YAAY;AAAA,QACzB,KAAK;AAAA;AAET,SAAK,UAAU,KAAK,WAAY,cAAc,MAAM;AACpD,SAAK,gBAAgB;AAAA,EACvB;AAAA,EAEA,oBAAoB;AAClB,SAAK,KAAM,GAAG,UAAU,MAAM,KAAK,gBAAgB,CAAC;AACpD,SAAK,KAAM,GAAG,UAAU,MAAM,KAAK,gBAAgB,CAAC;AACpD,SAAK,KAAM,GAAG,WAAW,MAAM,KAAK,gBAAgB,CAAC;AAAA,EACvD;AAAA,EAEA,WAAW;AACT,SAAK,WAAY,WAAY,YAAY,KAAK,UAAW;AACzD,SAAK,OAAO;AAAA,EACd;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"9dd3eea5f46b0cc48ff3173a7af02bc32aa63f10"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return qs=function(){return l},l}qs();class g${constructor(){Kn(this,"_map",(qs().s[0]++,void 0));Kn(this,"_container",(qs().s[1]++,void 0));Kn(this,"_textEl",(qs().s[2]++,null));qs().f[0]++}onAdd(e){return qs().f[1]++,qs().s[3]++,this._map=e,qs().s[4]++,this._container=document.createElement("div"),qs().s[5]++,this._container.className="maplibregl-ctrl maplibregl-ctrl-group maplibregl-ctrl-zoom",qs().s[6]++,this._container.setAttribute("data-wd-key","maplibre:ctrl-zoom"),qs().s[7]++,this.setLabel("Zoom:"),qs().s[8]++,this.addEventListeners(),qs().s[9]++,this._container}updateZoomLevel(){qs().f[2]++,qs().s[10]++,this._textEl.innerHTML=this._map.getZoom().toFixed(2)}setLabel(e){qs().f[3]++,qs().s[11]++,this._container.innerHTML=`
      ${e} <span></span>
    `,qs().s[12]++,this._textEl=this._container.querySelector("span"),qs().s[13]++,this.updateZoomLevel()}addEventListeners(){qs().f[4]++,qs().s[14]++,this._map.on("render",()=>(qs().f[5]++,qs().s[15]++,this.updateZoomLevel())),qs().s[16]++,this._map.on("zoomIn",()=>(qs().f[6]++,qs().s[17]++,this.updateZoomLevel())),qs().s[18]++,this._map.on("zoomOut",()=>(qs().f[7]++,qs().s[19]++,this.updateZoomLevel()))}onRemove(){qs().f[8]++,qs().s[20]++,this._container.parentNode.removeChild(this._container),qs().s[21]++,this._map=void 0}}function YE(n,e,t){const r={id:[e,t,"circle"].join("_"),source:e,type:"circle",paint:{"circle-color":n,"circle-radius":2},filter:["==","$type","Point"]};return t&&(r["source-layer"]=t),r}function qE(n,e,t,r){const i={id:[t,r,"polygon"].join("_"),source:t,type:"fill",paint:{"fill-color":n,"fill-antialias":!0,"fill-outline-color":n},filter:["==","$type","Polygon"]};return r&&(i["source-layer"]=r),i}function VE(n,e,t){const r={id:[e,t,"line"].join("_"),source:e,layout:{"line-join":"round","line-cap":"round"},type:"line",paint:{"line-color":n},filter:["==","$type","LineString"]};return t&&(r["source-layer"]=t),r}function y$(n,e){const t=[],r=[],i=[];function s(l){return{circle:e(l,.8),line:e(l,.6),polygon:e(l,.3),polygonOutline:e(l,.6),default:e(l,1)}}return Object.keys(n).forEach(l=>{const o=n[l];if(!o||o.length===0){const f=s(l);r.push(YE(f.circle,l)),i.push(VE(f.line,l)),t.push(qE(f.polygon,f.polygonOutline,l))}else o.forEach(f=>{const y=s(f);r.push(YE(y.circle,l,f)),i.push(VE(y.line,l,f)),t.push(qE(y.polygon,y.polygonOutline,l,f))})}),t.concat(i).concat(r)}function v$(n,e,t){t=Object.assign({backgroundColor:"#fff"},t);const r={id:"background",type:"background",paint:{"background-color":t.backgroundColor}},i={};return Object.keys(n.sources).forEach(s=>{const l=n.sources[s];(l.type==="vector"||l.type==="geojson")&&(i[s]=l)}),Object.assign(n,{layers:[r].concat(e),sources:i})}const Y3={polygonLayer:qE,lineLayer:VE,circleLayer:YE,generateInspectStyle:v$,generateColoredLayers:y$};function go(){var n="/home/runner/work/maputnik/maputnik/src/libs/highlight.ts",e="aec0f701e803624fae461cc89b5fc887ff556587",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/highlight.ts",statementMap:{0:{start:{line:4,column:2},end:{line:8,column:3}},1:{start:{line:5,column:4},end:{line:5,column:33}},2:{start:{line:6,column:9},end:{line:8,column:3}},3:{start:{line:7,column:4},end:{line:7,column:30}},4:{start:{line:9,column:2},end:{line:13,column:3}},5:{start:{line:10,column:4},end:{line:10,column:28}},6:{start:{line:12,column:4},end:{line:12,column:23}},7:{start:{line:14,column:2},end:{line:14,column:29}},8:{start:{line:15,column:2},end:{line:15,column:11}},9:{start:{line:18,column:2},end:{line:18,column:84}},10:{start:{line:18,column:72},end:{line:18,column:84}},11:{start:{line:19,column:24},end:{line:19,column:51}},12:{start:{line:20,column:16},end:{line:20,column:52}},13:{start:{line:21,column:2},end:{line:23,column:3}},14:{start:{line:22,column:4},end:{line:22,column:104}},15:{start:{line:24,column:2},end:{line:26,column:3}},16:{start:{line:25,column:4},end:{line:25,column:96}},17:{start:{line:27,column:2},end:{line:29,column:3}},18:{start:{line:28,column:4},end:{line:28,column:94}},19:{start:{line:30,column:2},end:{line:30,column:14}}},fnMap:{0:{name:"changeLayer",decl:{start:{line:3,column:9},end:{line:3,column:20}},loc:{start:{line:3,column:31},end:{line:16,column:1}},line:3},1:{name:"colorHighlightedLayer",decl:{start:{line:17,column:16},end:{line:17,column:37}},loc:{start:{line:17,column:45},end:{line:31,column:1}},line:17}},branchMap:{0:{loc:{start:{line:4,column:2},end:{line:8,column:3}},type:"if",locations:[{start:{line:4,column:2},end:{line:8,column:3}},{start:{line:6,column:9},end:{line:8,column:3}}],line:4},1:{loc:{start:{line:6,column:9},end:{line:8,column:3}},type:"if",locations:[{start:{line:6,column:9},end:{line:8,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:6},2:{loc:{start:{line:9,column:2},end:{line:13,column:3}},type:"if",locations:[{start:{line:9,column:2},end:{line:13,column:3}},{start:{line:11,column:9},end:{line:13,column:3}}],line:9},3:{loc:{start:{line:18,column:2},end:{line:18,column:84}},type:"if",locations:[{start:{line:18,column:2},end:{line:18,column:84}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:18},4:{loc:{start:{line:18,column:6},end:{line:18,column:70}},type:"binary-expr",locations:[{start:{line:18,column:6},end:{line:18,column:12}},{start:{line:18,column:16},end:{line:18,column:43}},{start:{line:18,column:47},end:{line:18,column:70}}],line:18},5:{loc:{start:{line:19,column:24},end:{line:19,column:51}},type:"binary-expr",locations:[{start:{line:19,column:24},end:{line:19,column:45}},{start:{line:19,column:49},end:{line:19,column:51}}],line:19},6:{loc:{start:{line:21,column:2},end:{line:23,column:3}},type:"if",locations:[{start:{line:21,column:2},end:{line:23,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:21},7:{loc:{start:{line:21,column:6},end:{line:21,column:62}},type:"binary-expr",locations:[{start:{line:21,column:6},end:{line:21,column:27}},{start:{line:21,column:31},end:{line:21,column:62}}],line:21},8:{loc:{start:{line:24,column:2},end:{line:26,column:3}},type:"if",locations:[{start:{line:24,column:2},end:{line:26,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:24},9:{loc:{start:{line:24,column:6},end:{line:24,column:56}},type:"binary-expr",locations:[{start:{line:24,column:6},end:{line:24,column:29}},{start:{line:24,column:33},end:{line:24,column:56}}],line:24},10:{loc:{start:{line:27,column:2},end:{line:29,column:3}},type:"if",locations:[{start:{line:27,column:2},end:{line:29,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:27}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0},f:{0:0,1:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/highlight.ts"],names:[],mappings:"AAAA,OAAO,cAAc;AACrB,OAAO,YAAY;AAKnB,SAAS,YAAY,GAAqB,OAA2B;AACnE,MAAG,EAAE,SAAS,UAAU;AACtB,MAAE,MAAO,eAAe,IAAI;AAAA,EAC9B,WAAU,EAAE,SAAS,QAAQ;AAC3B,MAAE,MAAO,YAAY,IAAI;AAAA,EAC3B;AAEA,MAAG,YAAY,OAAO;AACpB,MAAE,SAAS,MAAM;AAAA,EACnB,OAAO;AACL,WAAO,EAAE,QAAQ;AAAA,EACnB;AACA,IAAE,KAAK,EAAE,KAAK;AACd,SAAO;AACT;AAEO,gBAAS,sBAAsB,OAAqD;AACzF,MAAG,CAAC,SAAS,MAAM,SAAS,gBAAgB,MAAM,SAAS,SAAU,QAAO;AAE5E,QAAM,gBAAgB,MAAM,cAAc,KAAK;AAC/C,QAAM,QAAQ,OAAO,YAAY,eAAe,CAAC;AAEjD,MAAG,MAAM,SAAS,UAAU,MAAM,SAAS,kBAAkB;AAC3D,WAAO,YAAY,SAAS,aAAa,OAAO,OAAO,MAAM,QAAQ,MAAM,cAAc,CAAC,GAAG,KAAK;AAAA,EACpG;AAEA,MAAG,MAAM,SAAS,YAAY,MAAM,SAAS,UAAU;AACrD,WAAO,YAAY,SAAS,YAAY,OAAO,MAAM,QAAQ,MAAM,cAAc,CAAC,GAAG,KAAK;AAAA,EAC5F;AAEA,MAAG,MAAM,SAAS,QAAQ;AACxB,WAAO,YAAY,SAAS,UAAU,OAAO,MAAM,QAAQ,MAAM,cAAc,CAAC,GAAG,KAAK;AAAA,EAC1F;AAEA,SAAO;AACT;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"aec0f701e803624fae461cc89b5fc887ff556587"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return go=function(){return l},l}go();function q3(n,e){return go().f[0]++,go().s[0]++,n.type==="circle"?(go().b[0][0]++,go().s[1]++,n.paint["circle-radius"]=3):(go().b[0][1]++,go().s[2]++,n.type==="line"?(go().b[1][0]++,go().s[3]++,n.paint["line-width"]=2):go().b[1][1]++),go().s[4]++,"filter"in e?(go().b[2][0]++,go().s[5]++,n.filter=e.filter):(go().b[2][1]++,go().s[6]++,delete n.filter),go().s[7]++,n.id=n.id+"_highlight",go().s[8]++,n}function C$(n){if(go().f[1]++,go().s[9]++,go().b[4][0]++,!n||(go().b[4][1]++,n.type==="background")||(go().b[4][2]++,n.type==="raster"))return go().b[3][0]++,go().s[10]++,null;go().b[3][1]++;const e=(go().s[11]++,go().b[5][0]++,n["source-layer"]||(go().b[5][1]++,"")),t=(go().s[12]++,FF.brightColor(e,1));return go().s[13]++,go().b[7][0]++,n.type==="fill"||(go().b[7][1]++,n.type==="fill-extrusion")?(go().b[6][0]++,go().s[14]++,q3(Y3.polygonLayer(t,t,n.source,n["source-layer"]),n)):(go().b[6][1]++,go().s[15]++,go().b[9][0]++,n.type==="symbol"||(go().b[9][1]++,n.type==="circle")?(go().b[8][0]++,go().s[16]++,q3(Y3.circleLayer(t,n.source,n["source-layer"]),n)):(go().b[8][1]++,go().s[17]++,n.type==="line"?(go().b[10][0]++,go().s[18]++,q3(Y3.lineLayer(t,n.source,n["source-layer"]),n)):(go().b[10][1]++,go().s[19]++,null)))}function gB(){var n="/home/runner/work/maputnik/maputnik/src/libs/maplibre-rtl.ts",e="a9dc98f82c73787713de0672aff7a601bfeb069d",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/maplibre-rtl.ts",statementMap:{0:{start:{line:2,column:0},end:{line:2,column:115}}},fnMap:{},branchMap:{},s:{0:0},f:{},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/maplibre-rtl.ts"],names:[],mappings:"AAAA,OAAO,gBAAgB;AAEvB,WAAW,iBAAiB,gFAAgF,KAAK;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a9dc98f82c73787713de0672aff7a601bfeb069d"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return gB=function(){return l},l}gB();gB().s[0]++;$1.setRTLTextPlugin("https://unpkg.com/@mapbox/mapbox-gl-rtl-text@0.2.3/mapbox-gl-rtl-text.min.js",!1);function V3(n,e,t,r){function i(s){return s instanceof t?s:new t(function(l){l(s)})}return new(t||(t=Promise))(function(s,l){function o(x){try{y(r.next(x))}catch(B){l(B)}}function f(x){try{y(r.throw(x))}catch(B){l(B)}}function y(x){x.done?s(x.value):i(x.value).then(o,f)}y((r=r.apply(n,e||[])).next())})}var G_=typeof globalThis<"u"?globalThis:typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:{};function lx(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var $3,I7;function GF(){if(I7)return $3;I7=1,$3=e;var n=Object.prototype.hasOwnProperty;function e(){for(var t={},r=0;r<arguments.length;r++){var i=arguments[r];for(var s in i)n.call(i,s)&&(t[s]=i[s])}return t}return $3}var H3={exports:{}},k7;function _$(){return k7||(k7=1,function(n,e){(function(){var t={};n.exports=t,t.simpleFilter=function(r,i){return i.filter(function(s){return t.test(r,s)})},t.test=function(r,i){return t.match(r,i)!==null},t.match=function(r,i,s){s=s||{};var l=0,o=[],f=i.length,y=0,x=0,B=s.pre||"",O=s.post||"",P=s.caseSensitive&&i||i.toLowerCase(),U;r=s.caseSensitive&&r||r.toLowerCase();for(var j=0;j<f;j++)U=i[j],P[j]===r[l]?(U=B+U+O,l+=1,x+=1+x):x=0,y+=x,o[o.length]=U;return l===r.length?(y=P===r?1/0:y,{rendered:o.join(""),score:y}):null},t.filter=function(r,i,s){return!i||i.length===0?[]:typeof r!="string"?i:(s=s||{},i.reduce(function(l,o,f,y){var x=o;s.extract&&(x=s.extract(o));var B=t.match(r,x,s);return B!=null&&(l[l.length]={string:B.rendered,score:B.score,index:f,original:o}),l},[]).sort(function(l,o){var f=o.score-l.score;return f||l.index-o.index}))}})()}(H3)),H3.exports}var Z3,T7;function b$(){if(T7)return Z3;T7=1;var n=function(e){return this.component=e,this.items=[],this.active=e.options.noInitialSelection?-1:0,this.wrapper=document.createElement("div"),this.wrapper.className="suggestions-wrapper",this.element=document.createElement("ul"),this.element.className="suggestions",this.wrapper.appendChild(this.element),this.selectingListItem=!1,e.el.parentNode.insertBefore(this.wrapper,e.el.nextSibling),this};return n.prototype.show=function(){this.element.style.display="block"},n.prototype.hide=function(){this.element.style.display="none"},n.prototype.add=function(e){this.items.push(e)},n.prototype.clear=function(){this.items=[],this.active=this.component.options.noInitialSelection?-1:0},n.prototype.isEmpty=function(){return!this.items.length},n.prototype.isVisible=function(){return this.element.style.display==="block"},n.prototype.draw=function(){if(this.element.innerHTML="",this.items.length===0){this.hide();return}for(var e=0;e<this.items.length;e++)this.drawItem(this.items[e],this.active===e);this.show()},n.prototype.drawItem=function(e,t){var r=document.createElement("li"),i=document.createElement("a");t&&(r.className+=" active"),i.innerHTML=e.string,r.appendChild(i),this.element.appendChild(r),r.addEventListener("mousedown",(function(){this.selectingListItem=!0}).bind(this)),r.addEventListener("mouseup",(function(){this.handleMouseUp.call(this,e)}).bind(this))},n.prototype.handleMouseUp=function(e){this.selectingListItem=!1,this.component.value(e.original),this.clear(),this.draw()},n.prototype.move=function(e){this.active=e,this.draw()},n.prototype.previous=function(){this.move(this.active<=0?this.items.length-1:this.active-1)},n.prototype.next=function(){this.move(this.active>=this.items.length-1?0:this.active+1)},n.prototype.drawError=function(e){var t=document.createElement("li");t.innerHTML=e,this.element.appendChild(t),this.show()},Z3=n,Z3}var X3,P7;function x$(){if(P7)return X3;P7=1;var n=GF(),e=_$(),t=b$(),r=function(i,s,l){return l=l||{},this.options=n({minLength:2,limit:5,filter:!0,hideOnBlur:!0,noInitialSelection:!0},l),this.el=i,this.data=s||[],this.list=new t(this),this.query="",this.selected=null,this.list.draw(),this.el.addEventListener("keyup",(function(o){this.handleKeyUp(o.keyCode,o)}).bind(this),!1),this.el.addEventListener("keydown",(function(o){this.handleKeyDown(o)}).bind(this)),this.el.addEventListener("focus",(function(){this.handleFocus()}).bind(this)),this.el.addEventListener("blur",(function(){this.handleBlur()}).bind(this)),this.el.addEventListener("paste",(function(o){this.handlePaste(o)}).bind(this)),this.render=this.options.render?this.options.render.bind(this):this.render.bind(this),this.getItemValue=this.options.getItemValue?this.options.getItemValue.bind(this):this.getItemValue.bind(this),this};return r.prototype.handleKeyUp=function(i,s){if(!(i===40||i===38||i===27||i===9)){if(i===13){this.list.items[this.list.active]&&(this.list.handleMouseUp(this.list.items[this.list.active]),s.stopPropagation());return}this.handleInputChange(this.el.value)}},r.prototype.handleKeyDown=function(i){switch(i.keyCode){case 13:this.list.active>=0&&(this.list.selectingListItem=!0);break;case 9:this.list.isEmpty()||(this.list.isVisible()&&i.preventDefault(),this.value(this.list.active>=0?this.list.items[this.list.active].original:null),this.list.hide());break;case 27:this.list.isEmpty()||this.list.hide();break;case 38:this.list.previous();break;case 40:this.list.next();break}},r.prototype.handleBlur=function(){!this.list.selectingListItem&&this.options.hideOnBlur&&this.list.hide()},r.prototype.handlePaste=function(i){if(i.clipboardData)this.handleInputChange(i.clipboardData.getData("Text"));else{var s=this;setTimeout(function(){s.handleInputChange(i.target.value)},100)}},r.prototype.handleInputChange=function(i){if(this.query=this.normalize(i),this.list.clear(),this.query.length<this.options.minLength){this.list.draw();return}this.getCandidates((function(s){for(var l=0;l<s.length&&(this.list.add(s[l]),l!==this.options.limit-1);l++);this.list.draw()}).bind(this))},r.prototype.handleFocus=function(){this.list.isEmpty()||this.list.show(),this.list.selectingListItem=!1},r.prototype.update=function(i){this.data=i,this.handleKeyUp()},r.prototype.clear=function(){this.data=[],this.list.clear()},r.prototype.normalize=function(i){return i=i.toLowerCase(),i},r.prototype.match=function(i,s){return i.indexOf(s)>-1},r.prototype.value=function(i){if(this.selected=i,this.el.value=this.getItemValue(i||{place_name:this.query}),document.createEvent){var s=document.createEvent("HTMLEvents");s.initEvent("change",!0,!1),this.el.dispatchEvent(s)}else this.el.fireEvent("onchange")},r.prototype.getCandidates=function(i){var s={pre:"<strong>",post:"</strong>",extract:(function(o){return this.getItemValue(o)}).bind(this)},l;this.options.filter?(l=e.filter(this.query,this.data,s),l=l.map((function(o){return{original:o.original,string:this.render(o.original,o.string)}}).bind(this))):l=this.data.map((function(o){var f=this.render(o);return{original:o,string:f}}).bind(this)),i(l)},r.prototype.getItemValue=function(i){return i},r.prototype.render=function(i,s){if(s)return s;for(var l=i.original?this.getItemValue(i.original):this.getItemValue(i),o=this.normalize(l),f=o.lastIndexOf(this.query);f>-1;){var y=f+this.query.length;l=l.slice(0,f)+"<strong>"+l.slice(f,y)+"</strong>"+l.slice(y),f=o.slice(0,f).lastIndexOf(this.query)}return l},r.prototype.renderError=function(i){this.list.drawError(i)},X3=r,X3}var J3,K7;function M$(){if(K7)return J3;K7=1;var n=x$();return J3=n,typeof window<"u"&&(window.Suggestions=n),J3}var w$=M$(),S$=lx(w$),Mb={exports:{}},E$=Mb.exports,R7;function B$(){return R7||(R7=1,function(n){(function(e,t,r){n.exports?n.exports=r():e[t]=r()})(E$,"subtag",function(){var e="",t=/^([a-zA-Z]{2,3})(?:[_-]+([a-zA-Z]{3})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{4})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{2}|[0-9]{3})(?=$|[_-]+))?/;function r(f){return f.match(t)||[]}function i(f){return r(f).filter(function(y,x){return y&&x})}function s(f){return f=r(f),{language:f[1]||e,extlang:f[2]||e,script:f[3]||e,region:f[4]||e}}function l(f,y,x){Object.defineProperty(f,y,{value:x,enumerable:!0})}function o(f,y,x){function B(O){return r(O)[f]||e}l(B,"pattern",y),l(s,x,B)}return o(1,/^[a-zA-Z]{2,3}$/,"language"),o(2,/^[a-zA-Z]{3}$/,"extlang"),o(3,/^[a-zA-Z]{4}$/,"script"),o(4,/^[a-zA-Z]{2}$|^[0-9]{3}$/,"region"),l(s,"split",i),s})}(Mb)),Mb.exports}var O$=B$(),I$=lx(O$),e4,D7;function k$(){if(D7)return e4;D7=1;var n="Expected a function",e=NaN,t="[object Symbol]",r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,l=/^0o[0-7]+$/i,o=parseInt,f=typeof G_=="object"&&G_&&G_.Object===Object&&G_,y=typeof self=="object"&&self&&self.Object===Object&&self,x=f||y||Function("return this")(),B=Object.prototype,O=B.toString,P=Math.max,U=Math.min,j=function(){return x.Date.now()};function N(V,ne,G){var oe,he,fe,Ee,me,Se,Ke=0,xe=!1,at=!1,Ze=!0;if(typeof V!="function")throw new TypeError(n);ne=re(ne)||0,Y(G)&&(xe=!!G.leading,at="maxWait"in G,fe=at?P(re(G.maxWait)||0,ne):fe,Ze="trailing"in G?!!G.trailing:Ze);function Je(Pt){var Ue=oe,Pe=he;return oe=he=void 0,Ke=Pt,Ee=V.apply(Pe,Ue),Ee}function Ne(Pt){return Ke=Pt,me=setTimeout(He,ne),xe?Je(Pt):Ee}function we(Pt){var Ue=Pt-Se,Pe=Pt-Ke,Be=ne-Ue;return at?U(Be,fe-Pe):Be}function De(Pt){var Ue=Pt-Se,Pe=Pt-Ke;return Se===void 0||Ue>=ne||Ue<0||at&&Pe>=fe}function He(){var Pt=j();if(De(Pt))return bt(Pt);me=setTimeout(He,we(Pt))}function bt(Pt){return me=void 0,Ze&&oe?Je(Pt):(oe=he=void 0,Ee)}function Yt(){me!==void 0&&clearTimeout(me),Ke=0,oe=Se=he=me=void 0}function yt(){return me===void 0?Ee:bt(j())}function Ft(){var Pt=j(),Ue=De(Pt);if(oe=arguments,he=this,Se=Pt,Ue){if(me===void 0)return Ne(Se);if(at)return me=setTimeout(He,ne),Je(Se)}return me===void 0&&(me=setTimeout(He,ne)),Ee}return Ft.cancel=Yt,Ft.flush=yt,Ft}function Y(V){var ne=typeof V;return!!V&&(ne=="object"||ne=="function")}function H(V){return!!V&&typeof V=="object"}function se(V){return typeof V=="symbol"||H(V)&&O.call(V)==t}function re(V){if(typeof V=="number")return V;if(se(V))return e;if(Y(V)){var ne=typeof V.valueOf=="function"?V.valueOf():V;V=Y(ne)?ne+"":ne}if(typeof V!="string")return V===0?V:+V;V=V.replace(r,"");var G=s.test(V);return G||l.test(V)?o(V.slice(2),G?2:8):i.test(V)?e:+V}return e4=N,e4}var T$=k$(),P$=lx(T$),K$=GF(),tp=lx(K$),Q_={exports:{}},F7;function R$(){if(F7)return Q_.exports;F7=1;var n=typeof Reflect=="object"?Reflect:null,e=n&&typeof n.apply=="function"?n.apply:function(V,ne,G){return Function.prototype.apply.call(V,ne,G)},t;n&&typeof n.ownKeys=="function"?t=n.ownKeys:Object.getOwnPropertySymbols?t=function(V){return Object.getOwnPropertyNames(V).concat(Object.getOwnPropertySymbols(V))}:t=function(V){return Object.getOwnPropertyNames(V)};function r(re){console&&console.warn&&console.warn(re)}var i=Number.isNaN||function(V){return V!==V};function s(){s.init.call(this)}Q_.exports=s,Q_.exports.once=Y,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var l=10;function o(re){if(typeof re!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof re)}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(re){if(typeof re!="number"||re<0||i(re))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+re+".");l=re}}),s.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(V){if(typeof V!="number"||V<0||i(V))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+V+".");return this._maxListeners=V,this};function f(re){return re._maxListeners===void 0?s.defaultMaxListeners:re._maxListeners}s.prototype.getMaxListeners=function(){return f(this)},s.prototype.emit=function(V){for(var ne=[],G=1;G<arguments.length;G++)ne.push(arguments[G]);var oe=V==="error",he=this._events;if(he!==void 0)oe=oe&&he.error===void 0;else if(!oe)return!1;if(oe){var fe;if(ne.length>0&&(fe=ne[0]),fe instanceof Error)throw fe;var Ee=new Error("Unhandled error."+(fe?" ("+fe.message+")":""));throw Ee.context=fe,Ee}var me=he[V];if(me===void 0)return!1;if(typeof me=="function")e(me,this,ne);else for(var Se=me.length,Ke=U(me,Se),G=0;G<Se;++G)e(Ke[G],this,ne);return!0};function y(re,V,ne,G){var oe,he,fe;if(o(ne),he=re._events,he===void 0?(he=re._events=Object.create(null),re._eventsCount=0):(he.newListener!==void 0&&(re.emit("newListener",V,ne.listener?ne.listener:ne),he=re._events),fe=he[V]),fe===void 0)fe=he[V]=ne,++re._eventsCount;else if(typeof fe=="function"?fe=he[V]=G?[ne,fe]:[fe,ne]:G?fe.unshift(ne):fe.push(ne),oe=f(re),oe>0&&fe.length>oe&&!fe.warned){fe.warned=!0;var Ee=new Error("Possible EventEmitter memory leak detected. "+fe.length+" "+String(V)+" listeners added. Use emitter.setMaxListeners() to increase limit");Ee.name="MaxListenersExceededWarning",Ee.emitter=re,Ee.type=V,Ee.count=fe.length,r(Ee)}return re}s.prototype.addListener=function(V,ne){return y(this,V,ne,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(V,ne){return y(this,V,ne,!0)};function x(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function B(re,V,ne){var G={fired:!1,wrapFn:void 0,target:re,type:V,listener:ne},oe=x.bind(G);return oe.listener=ne,G.wrapFn=oe,oe}s.prototype.once=function(V,ne){return o(ne),this.on(V,B(this,V,ne)),this},s.prototype.prependOnceListener=function(V,ne){return o(ne),this.prependListener(V,B(this,V,ne)),this},s.prototype.removeListener=function(V,ne){var G,oe,he,fe,Ee;if(o(ne),oe=this._events,oe===void 0)return this;if(G=oe[V],G===void 0)return this;if(G===ne||G.listener===ne)--this._eventsCount===0?this._events=Object.create(null):(delete oe[V],oe.removeListener&&this.emit("removeListener",V,G.listener||ne));else if(typeof G!="function"){for(he=-1,fe=G.length-1;fe>=0;fe--)if(G[fe]===ne||G[fe].listener===ne){Ee=G[fe].listener,he=fe;break}if(he<0)return this;he===0?G.shift():j(G,he),G.length===1&&(oe[V]=G[0]),oe.removeListener!==void 0&&this.emit("removeListener",V,Ee||ne)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(V){var ne,G,oe;if(G=this._events,G===void 0)return this;if(G.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):G[V]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete G[V]),this;if(arguments.length===0){var he=Object.keys(G),fe;for(oe=0;oe<he.length;++oe)fe=he[oe],fe!=="removeListener"&&this.removeAllListeners(fe);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(ne=G[V],typeof ne=="function")this.removeListener(V,ne);else if(ne!==void 0)for(oe=ne.length-1;oe>=0;oe--)this.removeListener(V,ne[oe]);return this};function O(re,V,ne){var G=re._events;if(G===void 0)return[];var oe=G[V];return oe===void 0?[]:typeof oe=="function"?ne?[oe.listener||oe]:[oe]:ne?N(oe):U(oe,oe.length)}s.prototype.listeners=function(V){return O(this,V,!0)},s.prototype.rawListeners=function(V){return O(this,V,!1)},s.listenerCount=function(re,V){return typeof re.listenerCount=="function"?re.listenerCount(V):P.call(re,V)},s.prototype.listenerCount=P;function P(re){var V=this._events;if(V!==void 0){var ne=V[re];if(typeof ne=="function")return 1;if(ne!==void 0)return ne.length}return 0}s.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]};function U(re,V){for(var ne=new Array(V),G=0;G<V;++G)ne[G]=re[G];return ne}function j(re,V){for(;V+1<re.length;V++)re[V]=re[V+1];re.pop()}function N(re){for(var V=new Array(re.length),ne=0;ne<V.length;++ne)V[ne]=re[ne].listener||re[ne];return V}function Y(re,V){return new Promise(function(ne,G){function oe(fe){re.removeListener(V,he),G(fe)}function he(){typeof re.removeListener=="function"&&re.removeListener("error",oe),ne([].slice.call(arguments))}se(re,V,he,{once:!0}),V!=="error"&&H(re,oe,{once:!0})})}function H(re,V,ne){typeof re.on=="function"&&se(re,"error",V,ne)}function se(re,V,ne,G){if(typeof re.on=="function")G.once?re.once(V,ne):re.on(V,ne);else if(typeof re.addEventListener=="function")re.addEventListener(V,function oe(he){G.once&&re.removeEventListener(V,oe),ne(he)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof re)}return Q_.exports}var D$=R$();const L7={fr:{name:"France",bbox:[[-4.59235,41.380007],[9.560016,51.148506]]},us:{name:"United States",bbox:[[-171.791111,18.91619],[-66.96466,71.357764]]},ru:{name:"Russia",bbox:[[19.66064,41.151416],[190.10042,81.2504]]},ca:{name:"Canada",bbox:[[-140.99778,41.675105],[-52.648099,83.23324]]}},F$={de:"Suche",it:"Ricerca",en:"Search",nl:"Zoeken",fr:"Chercher",ca:"Cerca",he:"",ja:"",lv:"Meklt",pt:"Procurar",sr:"",zh:"",cs:"Vyhledvn",hu:"Keress",ka:"",nb:"Ske",sk:"Vyhadvanie",th:"",fi:"Hae",is:"Leita",ko:"",pl:"Szukaj",sl:"Iskanje",fa:"",ru:""},L$={en:"No results found",de:"Keine Ergebnisse gefunden"},U$={en:"There was an error reaching the server",de:"Verbindung fehlgeschlagen"};var uv={placeholder:F$,errorNoResults:L$,errorConnectionFailed:U$};const z$=/(-?\d+\.?\d*)[, ]+(-?\d+\.?\d*)[ ]*$/;class j${constructor(e,t){this.options={zoom:16,flyTo:!0,trackProximity:!0,showResultsWhileTyping:!1,minLength:2,reverseGeocode:!1,limit:5,enableEventLogging:!0,marker:!0,popup:!1,maplibregl:void 0,collapsed:!1,clearAndBlurOnEsc:!1,clearOnBlur:!1,proximityMinZoom:9,getItemValue:r=>r.text!==void 0?r.text:r.place_name,render:function(r){if(!r.geometry){const s=r.text,l=s.toLowerCase().indexOf(this.query.toLowerCase()),o=this.query.length,f=s.substring(0,l),y=s.substring(l,l+o),x=s.substring(l+o);return'<div class="maplibregl-ctrl-geocoder--suggestion"><svg class="maplibregl-ctrl-geocoder--suggestion-icon" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="M22.8702 20.1258H21.4248L20.9125 19.6318C22.7055 17.546 23.785 14.8382 23.785 11.8925C23.785 5.32419 18.4608 0 11.8925 0C5.32419 0 0 5.32419 0 11.8925C0 18.4608 5.32419 23.785 11.8925 23.785C14.8382 23.785 17.546 22.7055 19.6318 20.9125L20.1258 21.4248V22.8702L29.2739 32L32 29.2739L22.8702 20.1258ZM11.8925 20.1258C7.33676 20.1258 3.65923 16.4483 3.65923 11.8925C3.65923 7.33676 7.33676 3.65923 11.8925 3.65923C16.4483 3.65923 20.1258 7.33676 20.1258 11.8925C20.1258 16.4483 16.4483 20.1258 11.8925 20.1258Z" fill="#687078"/></svg><div class="maplibregl-ctrl-geocoder--suggestion-info"><div class="maplibregl-ctrl-geocoder--suggestion-title">'+f+'<span class="maplibregl-ctrl-geocoder--suggestion-match">'+y+"</span>"+x+"</div></div></div>"}const i=r.place_name.split(",");return'<div class="maplibregl-ctrl-geocoder--result"><svg class="maplibregl-ctrl-geocoder--result-icon" viewBox="0 0 24 32" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 0C5.36571 0 0 5.38676 0 12.0471C0 21.0824 12 32 12 32C12 32 24 21.0824 24 12.0471C24 5.38676 18.6343 0 12 0ZM12 16.3496C9.63428 16.3496 7.71429 14.4221 7.71429 12.0471C7.71429 9.67207 9.63428 7.74454 12 7.74454C14.3657 7.74454 16.2857 9.67207 16.2857 12.0471C16.2857 14.4221 14.3657 16.3496 12 16.3496Z" fill="#687078"/></svg><div><div class="maplibregl-ctrl-geocoder--result-title">'+i[0]+'</div><div class="maplibregl-ctrl-geocoder--result-address">'+i.splice(1,i.length).join(",")+"</div></div></div>"},popupRender:r=>{const i=r.place_name.split(",");return'<div class="maplibregl-ctrl-geocoder--suggestion popup-suggestion"><div class="maplibregl-ctrl-geocoder--suggestion-title popup-suggestion-title">'+i[0]+'</div><div class="maplibregl-ctrl-geocoder--suggestion-address popup-suggestion-address">'+i.splice(1,i.length).join(",")+"</div></div>"},showResultMarkers:!0,debounceSearch:200},this._eventEmitter=new D$.EventEmitter,this.options=tp({},this.options,t),this.fresh=!0,this.lastSelected=null,this.geocoderApi=e}addTo(e){function t(r,i){if(!document.body.contains(i))throw new Error("Element provided to #addTo() exists, but is not in the DOM");const s=r.onAdd();i.appendChild(s)}if(e instanceof HTMLElement)t(this,e);else if(typeof e=="string"){const r=document.querySelectorAll(e);if(r.length===0)throw new Error("Element "+e+"not found.");if(r.length>1)throw new Error("Geocoder can only be added to a single html element");t(this,r[0])}else if("addControl"in e)e.addControl(this);else throw new Error("Error: addTo must be a maplibre-gl-js map, an html element, or a CSS selector query for a single html element")}onAdd(e){if(e&&typeof e!="string"&&(this._map=e),this.setLanguage(),this.options.localGeocoderOnly&&!this.options.localGeocoder)throw new Error("A localGeocoder function must be specified to use localGeocoderOnly mode");this._onChange=this._onChange.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onPaste=this._onPaste.bind(this),this._onBlur=this._onBlur.bind(this),this._showButton=this._showButton.bind(this),this._hideButton=this._hideButton.bind(this),this._onQueryResult=this._onQueryResult.bind(this),this.clear=this.clear.bind(this),this._updateProximity=this._updateProximity.bind(this),this._collapse=this._collapse.bind(this),this._unCollapse=this._unCollapse.bind(this),this._clear=this._clear.bind(this),this._clearOnBlur=this._clearOnBlur.bind(this);const t=this.container=document.createElement("div");t.className="maplibregl-ctrl-geocoder maplibregl-ctrl maplibregl-ctrl-geocoder maplibregl-ctrl";const r=this.createIcon("search",'<path d="M7.4 2.5c-2.7 0-4.9 2.2-4.9 4.9s2.2 4.9 4.9 4.9c1 0 1.8-.2 2.5-.8l3.7 3.7c.2.2.4.3.8.3.7 0 1.1-.4 1.1-1.1 0-.3-.1-.5-.3-.8L11.4 10c.4-.8.8-1.6.8-2.5.1-2.8-2.1-5-4.8-5zm0 1.6c1.8 0 3.2 1.4 3.2 3.2s-1.4 3.2-3.2 3.2-3.3-1.3-3.3-3.1 1.4-3.3 3.3-3.3z"/>');this._inputEl=document.createElement("input"),this._inputEl.type="text",this._inputEl.className="maplibregl-ctrl-geocoder--input",this.setPlaceholder(),this.options.collapsed&&(this._collapse(),this.container.addEventListener("mouseenter",this._unCollapse),this.container.addEventListener("mouseleave",this._collapse),this._inputEl.addEventListener("focus",this._unCollapse)),(this.options.collapsed||this.options.clearOnBlur)&&this._inputEl.addEventListener("blur",this._onBlur),this._inputEl.addEventListener("keydown",P$(this._onKeyDown,this.options.debounceSearch)),this._inputEl.addEventListener("paste",this._onPaste),this._inputEl.addEventListener("change",this._onChange),this.container.addEventListener("mouseenter",this._showButton),this.container.addEventListener("mouseleave",this._hideButton);const i=document.createElement("div");i.classList.add("maplibregl-ctrl-geocoder--pin-right"),this._clearEl=document.createElement("button"),this._clearEl.setAttribute("type","button"),this._clearEl.setAttribute("aria-label","Clear"),this._clearEl.addEventListener("click",this.clear),this._clearEl.className="maplibregl-ctrl-geocoder--button";const s=this.createIcon("close",'<path d="M3.8 2.5c-.6 0-1.3.7-1.3 1.3 0 .3.2.7.5.8L7.2 9 3 13.2c-.3.3-.5.7-.5 1 0 .6.7 1.3 1.3 1.3.3 0 .7-.2 1-.5L9 10.8l4.2 4.2c.2.3.7.3 1 .3.6 0 1.3-.7 1.3-1.3 0-.3-.2-.7-.3-1l-4.4-4L15 4.6c.3-.2.5-.5.5-.8 0-.7-.7-1.3-1.3-1.3-.3 0-.7.2-1 .3L9 7.1 4.8 2.8c-.3-.1-.7-.3-1-.3z"/>');return this._clearEl.appendChild(s),this._loadingEl=this.createIcon("loading",'<path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"/><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"/>'),i.appendChild(this._clearEl),i.appendChild(this._loadingEl),t.appendChild(r),t.appendChild(this._inputEl),t.appendChild(i),this._typeahead=new S$(this._inputEl,[],{filter:!1,minLength:this.options.minLength,limit:this.options.limit,noInitialSelection:!0}),this.setRenderFunction(this.options.render),this._typeahead.getItemValue=this.options.getItemValue,this.mapMarker=null,this.resultMarkers=[],this._handleMarker=this._handleMarker.bind(this),this._handleResultMarkers=this._handleResultMarkers.bind(this),this._map&&(this.options.trackProximity&&(this._updateProximity(),this._map.on("moveend",this._updateProximity)),this._maplibregl=this.options.maplibregl,!this._maplibregl&&this.options.marker&&(console.error("No maplibregl detected in options. Map markers are disabled. Please set options.maplibregl."),this.options.marker=!1)),t}createIcon(e,t){const r=document.createElementNS("http://www.w3.org/2000/svg","svg");if(r.setAttribute("class","maplibregl-ctrl-geocoder--icon maplibregl-ctrl-geocoder--icon-"+e),r.setAttribute("viewBox","0 0 18 18"),r.setAttribute("xml:space","preserve"),r.setAttribute("width","18"),r.setAttribute("height","18"),"innerHTML"in r)r.innerHTML=t;else{const i=document.createElement("div");i.innerHTML="<svg>"+t.valueOf().toString()+"</svg>";const s=i.firstChild,l=s.firstChild;r.appendChild(l)}return r}onRemove(){return this.container.remove(),this.options.trackProximity&&this._map&&this._map.off("moveend",this._updateProximity),this._removeMarker(),this._map=null,this}_onPaste(e){const t=(e.clipboardData||window.clipboardData).getData("text");t.length>=this.options.minLength&&this.options.showResultsWhileTyping&&this._geocode(t)}_onKeyDown(e){if(e.keyCode===27&&this.options.clearAndBlurOnEsc)return this._clear(e),this._inputEl.blur();const s=this._inputEl.value;if(!s)return this.fresh=!0,e.keyCode!==9&&this.clear(e),this._clearEl.style.display="none";if(!(e.metaKey||[9,27,37,39,38,40].indexOf(e.keyCode)!==-1)){if(e.keyCode===13)if(!this.options.showResultsWhileTyping)this._typeahead.selected||this._geocode(s);else{this._typeahead.selected==null&&this.geocoderApi.getSuggestions?this._geocode(s,!0):this._typeahead.selected==null&&this.options.showResultMarkers&&this._fitBoundsForMarkers();return}s.length>=this.options.minLength&&this.options.showResultsWhileTyping&&this._geocode(s)}}_showButton(){this._inputEl.value.length>0&&(this._clearEl.style.display="block")}_hideButton(){this._typeahead.selected&&(this._clearEl.style.display="none")}_onBlur(e){this.options.clearOnBlur&&this._clearOnBlur(e),this.options.collapsed&&this._collapse()}_onChange(){const e=this._typeahead.selected;if(e&&!e.geometry)e.placeId?this._geocode(e.placeId,!0,!0):this._geocode(e.text,!0);else if(e&&JSON.stringify(e)!==this.lastSelected){if(this._clearEl.style.display="none",this.options.flyTo){let t;if(this._removeResultMarkers(),e.properties&&L7[e.properties.short_code])t=tp({},this.options.flyTo),this._map&&this._map.fitBounds(L7[e.properties.short_code].bbox,t);else if(e.bbox){const r=e.bbox;t=tp({},this.options.flyTo),this._map&&this._map.fitBounds([[r[0],r[1]],[r[2],r[3]]],t)}else{const r={zoom:this.options.zoom};t=tp({},r,this.options.flyTo),e.center?t.center=e.center:e.geometry&&e.geometry.type&&e.geometry.type==="Point"&&e.geometry.coordinates&&(t.center=e.geometry.coordinates),this._map&&this._map.flyTo(t)}}this.options.marker&&this._maplibregl&&this._handleMarker(e),this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0),this.lastSelected=JSON.stringify(e),this._typeahead.selected=null,this._eventEmitter.emit("result",{result:e})}}_getConfigForRequest(){return["bbox","limit","proximity","countries","types","language","reverseMode"].reduce((r,i)=>(this.options[i]&&(["countries","types","language"].indexOf(i)>-1?r[i]=this.options[i].split(/[\s,]+/):r[i]=this.options[i],i==="proximity"&&this.options[i]&&typeof this.options[i].longitude=="number"&&typeof this.options[i].latitude=="number"&&(r[i]=[this.options[i].longitude,this.options[i].latitude])),r),{})}_geocode(e){return V3(this,arguments,void 0,function*(t,r=!1,i=!1){this._loadingEl.style.display="block",this._eventEmitter.emit("loading",{query:t});const s=this._getConfigForRequest(),l=this._createGeocodeRequest(s,t,r,i),o=this.options.localGeocoder?this.options.localGeocoder(t)||[]:[];try{const f=yield l;yield this._handleGeocodeResponse(f,s,t,r,o)}catch(f){this._handleGeocodeErrorResponse(f,o)}return l})}_createGeocodeRequest(e,t,r,i){return this.options.localGeocoderOnly?Promise.resolve({}):this.options.reverseGeocode&&z$.test(t)?this._createReverseGeocodeRequest(t,e):(e.query=t,this.geocoderApi.getSuggestions?r?this.geocoderApi.searchByPlaceId&&i?this.geocoderApi.searchByPlaceId(e):this.geocoderApi.forwardGeocode(e):this.geocoderApi.getSuggestions(e):this.geocoderApi.forwardGeocode(e))}_createReverseGeocodeRequest(e,t){const r=e.split(/[\s(,)?]+/).map(i=>parseFloat(i)).reverse();return t.query=r,t.limit=1,"proximity"in t&&delete t.proximity,this.geocoderApi.reverseGeocode(t)}_handleGeocodeResponse(e,t,r,i,s){return V3(this,void 0,void 0,function*(){this._loadingEl.style.display="none";let l={};e?l=e:l={type:"FeatureCollection",features:[]},l.config=t,this.fresh&&(this.fresh=!1),l.features=l.features?s.concat(l.features):s;const o=this.options.externalGeocoder?this.options.externalGeocoder(r,l.features,t)||Promise.resolve([]):Promise.resolve([]);try{const y=yield o;l.features=l.features?y.concat(l.features):y}catch{}this.options.filter&&l.features.length&&(l.features=l.features.filter(this.options.filter));let f=[];"suggestions"in l?f=l.suggestions:"place"in l?f=[l.place]:f=l.features,f.length?(this._clearEl.style.display="block",this._typeahead.update(f),(!this.options.showResultsWhileTyping||i)&&this.options.showResultMarkers&&(l.features.length>0||"place"in l)&&this._fitBoundsForMarkers(),this._eventEmitter.emit("results",l)):(this._clearEl.style.display="none",this._typeahead.selected=null,this._renderNoResults(),this._eventEmitter.emit("results",l))})}_handleGeocodeErrorResponse(e,t){this._loadingEl.style.display="none",t.length&&this.options.localGeocoder?(this._clearEl.style.display="block",this._typeahead.update(t)):(this._clearEl.style.display="none",this._typeahead.selected=null,this._renderError()),this._eventEmitter.emit("results",{features:t}),this._eventEmitter.emit("error",{error:e})}_clear(e){e&&e.preventDefault(),this._inputEl.value="",this._typeahead.selected=null,this._typeahead.clear(),this._onChange(),this._clearEl.style.display="none",this._removeMarker(),this._removeResultMarkers(),this.lastSelected=null,this._eventEmitter.emit("clear"),this.fresh=!0}clear(e){this._clear(e),this._inputEl.focus()}_clearOnBlur(e){e.relatedTarget&&this._clear(e)}_onQueryResult(e){if(!("features"in e)||!e.features.length)return;const t=e.features[0];this._typeahead.selected=t,this._inputEl.value=t.place_name,this._onChange()}_updateProximity(){if(this._map)if(this._map.getZoom()>this.options.proximityMinZoom){const e=this._map.getCenter().wrap();this.setProximity({longitude:e.lng,latitude:e.lat})}else this.setProximity(null)}_collapse(){!this._inputEl.value&&this._inputEl!==document.activeElement&&this.container.classList.add("maplibregl-ctrl-geocoder--collapsed")}_unCollapse(){this.container.classList.remove("maplibregl-ctrl-geocoder--collapsed")}query(e){return V3(this,void 0,void 0,function*(){const t=yield this._geocode(e);this._onQueryResult(t)})}_renderError(){const e=`<div class='maplibre-gl-geocoder--error'>${this._localize("errorConnectionFailed")}</div>`;this._renderMessage(e)}_renderNoResults(){const e=`<div class='maplibre-gl-geocoder--error maplibre-gl-geocoder--no-results'>
        ${this._localize("errorNoResults")}</div>`;this._renderMessage(e)}_renderMessage(e){this._typeahead.update([]),this._typeahead.selected=null,this._typeahead.clear(),this._typeahead.renderError(e)}_localize(e){const t=I$.language(this.options.language.split(",")[0]);return this.options.language&&(uv!=null&&uv[e][t])?uv[e][t]:uv[e].en}_fitBoundsForMarkers(){if(this._typeahead.data.length<1)return;const e=this._typeahead.data.filter(t=>typeof t!="string").slice(0,this.options.limit);if(this._clearEl.style.display="none",this.options.flyTo&&this._maplibregl&&this._map){const r=tp({},{padding:100},this.options.flyTo),i=new this._maplibregl.LngLatBounds;for(const s of e)i.extend(s.geometry.coordinates);this._map.fitBounds(i,r)}return e.length>0&&this._maplibregl&&this._handleResultMarkers(e),this}setInput(e){return this._inputEl.value=e,this._typeahead.selected=null,this._typeahead.clear(),e.length>=this.options.minLength&&this.options.showResultsWhileTyping&&this._geocode(e),this}setProximity(e){return this.options.proximity=e,this}getProximity(){return this.options.proximity}setRenderFunction(e){return e&&typeof e=="function"&&(this._typeahead.render=e),this}getRenderFunction(){return this._typeahead.render}setLanguage(e){return this.options.language=e||this.options.language||navigator.language,this}getLanguage(){return this.options.language}getZoom(){return this.options.zoom}setZoom(e){return this.options.zoom=e,this}getFlyTo(){return this.options.flyTo}setFlyTo(e){return this.options.flyTo=e,this}getPlaceholder(){return this.options.placeholder}setPlaceholder(e){return this.placeholder=e||this.options.placeholder||this._localize("placeholder"),this._inputEl.placeholder=this.placeholder,this._inputEl.setAttribute("aria-label",this.placeholder),this}getBbox(){return this.options.bbox}setBbox(e){return this.options.bbox=e,this}getCountries(){return this.options.countries}setCountries(e){return this.options.countries=e,this}getTypes(){return this.options.types}setTypes(e){return this.options.types=e,this}getMinLength(){return this.options.minLength}setMinLength(e){return this.options.minLength=e,this._typeahead&&(this._typeahead.options.minLength=e),this}getLimit(){return this.options.limit}setLimit(e){return this.options.limit=e,this._typeahead&&(this._typeahead.options.limit=e),this}getFilter(){return this.options.filter}setFilter(e){return this.options.filter=e,this}setGeocoderApi(e){return this.geocoderApi=e,this}getGeocoderApi(){return this.geocoderApi}_handleMarker(e){if(!this._map)return;this._removeMarker();const r=tp({},{color:"#4668F2"},this.options.marker);this.mapMarker=new this._maplibregl.Marker(r);let i;if(this.options.popup){const l=tp({},{},this.options.popup);i=new this._maplibregl.Popup(l).setHTML(this.options.popupRender(e))}return e.center?(this.mapMarker.setLngLat(e.center).addTo(this._map),this.options.popup&&this.mapMarker.setPopup(i)):e.geometry&&e.geometry.type&&e.geometry.type==="Point"&&e.geometry.coordinates&&(this.mapMarker.setLngLat(e.geometry.coordinates).addTo(this._map),this.options.popup&&this.mapMarker.setPopup(i)),this}_removeMarker(){this.mapMarker&&(this.mapMarker.remove(),this.mapMarker=null)}_handleResultMarkers(e){if(!this._map)return;this._removeResultMarkers();let r=tp({},{color:"#4668F2"},this.options.showResultMarkers);for(const i of e){let s;if(this.options.showResultMarkers){this.options.showResultMarkers&&this.options.showResultMarkers.element&&(s=this.options.showResultMarkers.element.cloneNode(!0),r=tp(r,{element:s}));const l=new this._maplibregl.Marker(tp({},r,{element:s}));let o;if(this.options.popup){const y=tp({},{},this.options.popup);o=new this._maplibregl.Popup(y).setHTML(this.options.popupRender(i))}i.center?(l.setLngLat(i.center).addTo(this._map),this.options.popup&&l.setPopup(o)):i.geometry&&i.geometry.type&&i.geometry.type==="Point"&&i.geometry.coordinates&&(l.setLngLat(i.geometry.coordinates).addTo(this._map),this.options.popup&&l.setPopup(o)),this.resultMarkers.push(l)}}return this}_removeResultMarkers(){this.resultMarkers&&this.resultMarkers.length>0&&(this.resultMarkers.forEach(function(e){e.remove()}),this.resultMarkers=[])}on(e,t){return this._eventEmitter.on(e,t),this}once(e){return new Promise(t=>{this._eventEmitter.once(e,t)})}off(e,t){return this._eventEmitter.removeListener(e,t),this}}function Sn(){var n="/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGl.tsx",e="300acb3537cd75ba7433c8df32ce2e40c6bb2cf5",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGl.tsx",statementMap:{0:{start:{line:21,column:2},end:{line:21,column:36}},1:{start:{line:22,column:2},end:{line:22,column:19}},2:{start:{line:25,column:26},end:{line:31,column:3}},3:{start:{line:32,column:16},end:{line:32,column:55}},4:{start:{line:33,column:2},end:{line:35,column:3}},5:{start:{line:34,column:4},end:{line:34,column:30}},6:{start:{line:36,column:18},end:{line:36,column:20}},7:{start:{line:37,column:2},end:{line:42,column:5}},8:{start:{line:38,column:19},end:{line:38,column:53}},9:{start:{line:39,column:4},end:{line:41,column:5}},10:{start:{line:40,column:6},end:{line:40,column:33}},11:{start:{line:43,column:23},end:{line:47,column:3}},12:{start:{line:48,column:2},end:{line:48,column:22}},13:{start:{line:51,column:24},end:{line:61,column:3}},14:{start:{line:62,column:14},end:{line:62,column:18}},15:{start:{line:64,column:4},end:{line:64,column:17}},16:{start:{line:65,column:4},end:{line:70,column:6}},17:{start:{line:71,column:4},end:{line:73,column:7}},18:{start:{line:72,column:6},end:{line:72,column:25}},19:{start:{line:76,column:17},end:{line:76,column:22}},20:{start:{line:77,column:4},end:{line:80,column:5}},21:{start:{line:78,column:6},end:{line:78,column:132}},22:{start:{line:81,column:4},end:{line:81,column:18}},23:{start:{line:84,column:16},end:{line:84,column:30}},24:{start:{line:85,column:28},end:{line:85,column:79}},25:{start:{line:86,column:4},end:{line:91,column:5}},26:{start:{line:87,column:6},end:{line:87,column:52}},27:{start:{line:88,column:6},end:{line:88,column:70}},28:{start:{line:89,column:6},end:{line:89,column:70}},29:{start:{line:90,column:6},end:{line:90,column:76}},30:{start:{line:92,column:4},end:{line:94,column:5}},31:{start:{line:93,column:6},end:{line:93,column:43}},32:{start:{line:95,column:4},end:{line:100,column:5}},33:{start:{line:96,column:6},end:{line:96,column:59}},34:{start:{line:97,column:6},end:{line:99,column:14}},35:{start:{line:98,column:8},end:{line:98,column:36}},36:{start:{line:103,column:20},end:{line:112,column:5}},37:{start:{line:113,column:21},end:{line:113,column:53}},38:{start:{line:114,column:4},end:{line:114,column:53}},39:{start:{line:115,column:16},end:{line:115,column:43}},40:{start:{line:116,column:26},end:{line:120,column:5}},41:{start:{line:117,column:21},end:{line:117,column:36}},42:{start:{line:118,column:19},end:{line:118,column:32}},43:{start:{line:119,column:6},end:{line:119,column:44}},44:{start:{line:121,column:4},end:{line:121,column:20}},45:{start:{line:122,column:4},end:{line:122,column:56}},46:{start:{line:123,column:4},end:{line:123,column:56}},47:{start:{line:124,column:4},end:{line:124,column:62}},48:{start:{line:125,column:21},end:{line:125,column:43}},49:{start:{line:126,column:24},end:{line:126,column:41}},50:{start:{line:127,column:4},end:{line:127,column:45}},51:{start:{line:128,column:16},end:{line:128,column:74}},52:{start:{line:129,column:4},end:{line:129,column:37}},53:{start:{line:130,column:20},end:{line:130,column:49}},54:{start:{line:131,column:20},end:{line:151,column:6}},55:{start:{line:141,column:8},end:{line:141,column:82}},56:{start:{line:143,column:62},end:{line:143,column:141}},57:{start:{line:145,column:8},end:{line:149,column:9}},58:{start:{line:146,column:10},end:{line:146,column:108}},59:{start:{line:148,column:10},end:{line:148,column:160}},60:{start:{line:152,column:4},end:{line:152,column:28}},61:{start:{line:153,column:4},end:{line:161,column:7}},62:{start:{line:154,column:6},end:{line:160,column:9}},63:{start:{line:162,column:4},end:{line:167,column:7}},64:{start:{line:163,column:6},end:{line:163,column:40}},65:{start:{line:163,column:33},end:{line:163,column:40}},66:{start:{line:164,column:6},end:{line:166,column:9}},67:{start:{line:168,column:4},end:{line:170,column:7}},68:{start:{line:169,column:6},end:{line:169,column:30}},69:{start:{line:171,column:4},end:{line:175,column:7}},70:{start:{line:172,column:6},end:{line:174,column:9}},71:{start:{line:176,column:4},end:{line:176,column:37}},72:{start:{line:177,column:4},end:{line:177,column:37}},73:{start:{line:179,column:22},end:{line:182,column:3}},74:{start:{line:180,column:18},end:{line:180,column:82}},75:{start:{line:180,column:66},end:{line:180,column:81}},76:{start:{line:181,column:4},end:{line:181,column:36}},77:{start:{line:184,column:27},end:{line:217,column:5}},78:{start:{line:186,column:25},end:{line:186,column:27}},79:{start:{line:187,column:8},end:{line:212,column:9}},80:{start:{line:188,column:26},end:{line:188,column:138}},81:{start:{line:189,column:27},end:{line:189,column:47}},82:{start:{line:190,column:26},end:{line:190,column:47}},83:{start:{line:191,column:10},end:{line:209,column:11}},84:{start:{line:192,column:27},end:{line:195,column:13}},85:{start:{line:196,column:26},end:{line:207,column:13}},86:{start:{line:208,column:12},end:{line:208,column:33}},87:{start:{line:211,column:10},end:{line:211,column:69}},88:{start:{line:213,column:8},end:{line:215,column:10}},89:{start:{line:218,column:21},end:{line:221,column:6}},90:{start:{line:222,column:4},end:{line:222,column:41}},91:{start:{line:223,column:4},end:{line:223,column:20}},92:{start:{line:226,column:14},end:{line:226,column:26}},93:{start:{line:227,column:4},end:{line:227,column:53}},94:{start:{line:228,column:4},end:{line:228,column:49}},95:{start:{line:229,column:4},end:{line:238,column:6}},96:{start:{line:235,column:20},end:{line:235,column:38}},97:{start:{line:241,column:22},end:{line:241,column:62}}},fnMap:{0:{name:"renderPopup",decl:{start:{line:20,column:9},end:{line:20,column:20}},loc:{start:{line:20,column:39},end:{line:23,column:1}},line:20},1:{name:"buildInspectStyle",decl:{start:{line:24,column:9},end:{line:24,column:26}},loc:{start:{line:24,column:78},end:{line:49,column:1}},line:24},2:{name:"(anonymous_2)",decl:{start:{line:37,column:48},end:{line:37,column:49}},loc:{start:{line:37,column:62},end:{line:42,column:3}},line:37},3:{name:"(anonymous_3)",decl:{start:{line:52,column:17},end:{line:52,column:18}},loc:{start:{line:52,column:23},end:{line:53,column:5}},line:52},4:{name:"(anonymous_4)",decl:{start:{line:54,column:18},end:{line:54,column:19}},loc:{start:{line:54,column:24},end:{line:55,column:5}},line:54},5:{name:"(anonymous_5)",decl:{start:{line:56,column:19},end:{line:56,column:20}},loc:{start:{line:56,column:25},end:{line:57,column:5}},line:56},6:{name:"(anonymous_6)",decl:{start:{line:58,column:14},end:{line:58,column:15}},loc:{start:{line:58,column:20},end:{line:59,column:5}},line:58},7:{name:"(anonymous_7)",decl:{start:{line:63,column:2},end:{line:63,column:3}},loc:{start:{line:63,column:21},end:{line:74,column:3}},line:63},8:{name:"(anonymous_8)",decl:{start:{line:71,column:34},end:{line:71,column:35}},loc:{start:{line:71,column:40},end:{line:73,column:5}},line:71},9:{name:"(anonymous_9)",decl:{start:{line:75,column:2},end:{line:75,column:3}},loc:{start:{line:75,column:46},end:{line:82,column:3}},line:75},10:{name:"(anonymous_10)",decl:{start:{line:83,column:2},end:{line:83,column:3}},loc:{start:{line:83,column:23},end:{line:101,column:3}},line:83},11:{name:"(anonymous_11)",decl:{start:{line:97,column:17},end:{line:97,column:18}},loc:{start:{line:97,column:23},end:{line:99,column:7}},line:97},12:{name:"(anonymous_12)",decl:{start:{line:102,column:2},end:{line:102,column:3}},loc:{start:{line:102,column:22},end:{line:178,column:3}},line:102},13:{name:"(anonymous_13)",decl:{start:{line:116,column:26},end:{line:116,column:27}},loc:{start:{line:116,column:32},end:{line:120,column:5}},line:116},14:{name:"(anonymous_14)",decl:{start:{line:140,column:24},end:{line:140,column:25}},loc:{start:{line:140,column:44},end:{line:142,column:7}},line:140},15:{name:"(anonymous_15)",decl:{start:{line:143,column:25},end:{line:143,column:26}},loc:{start:{line:143,column:62},end:{line:143,column:141}},line:143},16:{name:"(anonymous_16)",decl:{start:{line:144,column:19},end:{line:144,column:20}},loc:{start:{line:144,column:33},end:{line:150,column:7}},line:144},17:{name:"(anonymous_17)",decl:{start:{line:153,column:25},end:{line:153,column:26}},loc:{start:{line:153,column:31},end:{line:161,column:5}},line:153},18:{name:"(anonymous_18)",decl:{start:{line:162,column:19},end:{line:162,column:20}},loc:{start:{line:162,column:26},end:{line:167,column:5}},line:162},19:{name:"(anonymous_19)",decl:{start:{line:168,column:20},end:{line:168,column:21}},loc:{start:{line:168,column:27},end:{line:170,column:5}},line:168},20:{name:"(anonymous_20)",decl:{start:{line:171,column:19},end:{line:171,column:20}},loc:{start:{line:171,column:27},end:{line:175,column:5}},line:171},21:{name:"(anonymous_21)",decl:{start:{line:179,column:22},end:{line:179,column:23}},loc:{start:{line:179,column:30},end:{line:182,column:3}},line:179},22:{name:"(anonymous_22)",decl:{start:{line:180,column:55},end:{line:180,column:56}},loc:{start:{line:180,column:66},end:{line:180,column:81}},line:180},23:{name:"(anonymous_23)",decl:{start:{line:183,column:2},end:{line:183,column:3}},loc:{start:{line:183,column:20},end:{line:224,column:3}},line:183},24:{name:"(anonymous_24)",decl:{start:{line:185,column:22},end:{line:185,column:23}},loc:{start:{line:185,column:40},end:{line:216,column:7}},line:185},25:{name:"(anonymous_25)",decl:{start:{line:225,column:2},end:{line:225,column:3}},loc:{start:{line:225,column:11},end:{line:239,column:3}},line:225},26:{name:"(anonymous_26)",decl:{start:{line:235,column:13},end:{line:235,column:14}},loc:{start:{line:235,column:20},end:{line:235,column:38}},line:235}},branchMap:{0:{loc:{start:{line:33,column:2},end:{line:35,column:3}},type:"if",locations:[{start:{line:33,column:2},end:{line:35,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:33},1:{loc:{start:{line:39,column:4},end:{line:41,column:5}},type:"if",locations:[{start:{line:39,column:4},end:{line:41,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:39},2:{loc:{start:{line:39,column:8},end:{line:39,column:64}},type:"binary-expr",locations:[{start:{line:39,column:8},end:{line:39,column:32}},{start:{line:39,column:36},end:{line:39,column:64}}],line:39},3:{loc:{start:{line:78,column:15},end:{line:78,column:131}},type:"binary-expr",locations:[{start:{line:78,column:15},end:{line:78,column:71}},{start:{line:78,column:75},end:{line:78,column:131}}],line:78},4:{loc:{start:{line:86,column:4},end:{line:91,column:5}},type:"if",locations:[{start:{line:86,column:4},end:{line:91,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:86},5:{loc:{start:{line:92,column:4},end:{line:94,column:5}},type:"if",locations:[{start:{line:92,column:4},end:{line:94,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:92},6:{loc:{start:{line:92,column:8},end:{line:92,column:98}},type:"binary-expr",locations:[{start:{line:92,column:8},end:{line:92,column:26}},{start:{line:92,column:30},end:{line:92,column:98}}],line:92},7:{loc:{start:{line:95,column:4},end:{line:100,column:5}},type:"if",locations:[{start:{line:95,column:4},end:{line:100,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:95},8:{loc:{start:{line:95,column:8},end:{line:95,column:59}},type:"binary-expr",locations:[{start:{line:95,column:8},end:{line:95,column:26}},{start:{line:95,column:30},end:{line:95,column:59}}],line:95},9:{loc:{start:{line:145,column:8},end:{line:149,column:9}},type:"if",locations:[{start:{line:145,column:8},end:{line:149,column:9}},{start:{line:147,column:15},end:{line:149,column:9}}],line:145},10:{loc:{start:{line:163,column:6},end:{line:163,column:40}},type:"if",locations:[{start:{line:163,column:6},end:{line:163,column:40}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:163}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0,87:0,88:0,89:0,90:0,91:0,92:0,93:0,94:0,95:0,96:0,97:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGl.tsx"],names:[],mappings:"AA+L6B;AA/L7B,OAAO,WAAuB;AAC9B,OAAO,cAAc;AACrB,OAAO,gBAAwG;AAC/G,OAAO,qBAAqB;AAC5B,OAAO,YAAY;AACnB,OAAO,6BAA6B;AACpC,OAAO,uCAA2D;AAClE,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,SAA2B,6BAA6B;AACxD,OAAO;AACP,OAAO;AACP,OAAO;AACP,OAAO,sBAA0E;AACjF,OAAO;AACP,SAAS,uBAAwC;AACjD,OAAO,aAAa;AACpB,SAAS,gBAAgB;AAEzB,SAAS,YAAY,OAAoB,WAA4C;AACnF,WAAS,OAAO,OAAO,SAAS;AAChC,SAAO;AACT;AAEA,SAAS,kBAAkB,kBAAsC,eAAmC,kBAAqC;AACvI,QAAM,kBAAkB;AAAA,IACtB,MAAM;AAAA,IACN,QAAQ;AAAA,IACR,SAAS;AAAA,MACP,oBAAoB;AAAA,IACtB;AAAA,EACF;AAEA,QAAM,QAAQ,sBAAsB,gBAAgB;AACpD,MAAG,OAAO;AACR,kBAAc,KAAK,KAAK;AAAA,EAC1B;AAEA,QAAM,UAA+C,CAAC;AAEtD,SAAO,KAAK,iBAAiB,OAAO,EAAE,QAAQ,cAAY;AACxD,UAAM,SAAS,iBAAiB,QAAQ,QAAQ;AAChD,QAAG,OAAO,SAAS,YAAY,OAAO,SAAS,cAAc;AAC3D,cAAQ,QAAQ,IAAI;AAAA,IACtB;AAAA,EACF,CAAC;AAED,QAAM,eAAe;AAAA,IACnB,GAAG;AAAA,IACH;AAAA,IACA,QAAQ,CAAC,eAAe,EAAE,OAAO,aAAqC;AAAA,EACxE;AACA,SAAO;AACT;AAyBA,MAAM,8BAA8B,MAAM,UAA0D;AAAA,EAClG,OAAO,eAAe;AAAA,IACpB,aAAa,MAAM;AAAA,IAAC;AAAA,IACpB,cAAc,MAAM;AAAA,IAAC;AAAA,IACrB,eAAe,MAAM;AAAA,IAAC;AAAA,IACtB,UAAU,MAAM;AAAA,IAAC;AAAA,IACjB,SAAS,CAAC;AAAA,EACZ;AAAA,EACA,YAAmC;AAAA,EAEnC,YAAY,OAAmC;AAC7C,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,KAAK;AAAA,MACL,SAAS;AAAA,MACT,UAAU;AAAA,MACV,aAAa;AAAA,IACf;AACA,YAAQ,GAAG,mBAAmB,MAAM;AAClC,WAAK,YAAY;AAAA,IACnB,CAAC;AAAA,EACH;AAAA,EAGA,sBAAsB,WAAuC,WAA+B;AAC1F,QAAI,SAAS;AACb,QAAI;AACF,eAAS,KAAK,UAAU,KAAK,KAAK,MAAM,KAAK,UAAU,SAAS,KAAK,KAAK,UAAU,KAAK,KAAK,MAAM,KAAK,UAAU,SAAS;AAAA,IAC9H,SAAQ,IAAI;AAAA,IAEZ;AACA,WAAO;AAAA,EACT;AAAA,EAEA,qBAAqB;AACnB,UAAM,MAAM,KAAK,MAAM;AAEvB,UAAM,kBAAkB,KAAK,MAAM,oBAAoB,KAAK,MAAM,QAAQ;AAC1E,QAAI,KAAK;AAIP,UAAI,SAAS,iBAAiB,EAAC,MAAM,KAAI,CAAC;AAC1C,UAAI,qBAAqB,KAAK,MAAM,SAAS;AAC7C,UAAI,qBAAqB,KAAK,MAAM,SAAS;AAC7C,UAAI,wBAAwB,KAAK,MAAM,SAAS;AAAA,IAClD;AAEA,QAAG,KAAK,MAAM,WAAW,KAAK,MAAM,uBAAuB,KAAK,MAAM,QAAQ,iBAAiB;AAC7F,WAAK,MAAM,QAAQ,gBAAgB;AAAA,IACrC;AACA,QAAI,KAAK,MAAM,WAAW,KAAK,MAAM,oBAAoB;AACvD,WAAK,MAAM,QAAQ,iBAAiB,eAAe;AAEnD,iBAAW,MAAM;AACf,aAAK,MAAM,QAAS,OAAO;AAAA,MAC7B,GAAG,GAAG;AAAA,IACR;AAAA,EAEF;AAAA,EAEA,oBAAoB;AAClB,UAAM,UAAU;AAAA,MACd,GAAG,KAAK,MAAM;AAAA,MACd,WAAW,KAAK;AAAA,MAChB,OAAO,KAAK,MAAM;AAAA,MAClB,MAAM;AAAA,MACN,SAAS;AAAA;AAAA;AAAA,MAGT,0BAA0B;AAAA,IAC5B;AAEA,UAAM,WAAW,IAAI,SAAS,EAAC,UAAU,KAAI,CAAC;AAC9C,eAAW,YAAY,WAAU,SAAS,IAAI;AAC9C,UAAM,MAAM,IAAI,WAAW,IAAI,OAAO;AAEtC,UAAM,gBAAgB,MAAM;AAC1B,YAAM,SAAS,IAAI,UAAU;AAC7B,YAAM,OAAO,IAAI,QAAQ;AACzB,WAAK,MAAM,SAAS,EAAC,QAAQ,KAAI,CAAC;AAAA,IACpC;AACA,kBAAc;AAEd,QAAI,qBAAqB,QAAQ;AACjC,QAAI,qBAAqB,QAAQ;AACjC,QAAI,wBAAwB,QAAQ;AAEpC,UAAM,WAAW,KAAK,aAAa,GAAG;AAEtC,UAAM,cAAc,IAAI,YAAY;AACpC,QAAI,WAAW,aAAa,WAAW;AAEvC,UAAM,MAAM,IAAI,WAAW,kBAAkB,EAAC,gBAAe,KAAI,CAAC;AAClE,QAAI,WAAW,KAAK,WAAW;AAE/B,UAAM,UAAU,SAAS,cAAc,KAAK;AAE5C,UAAM,UAAU,IAAI,gBAAgB;AAAA,MAClC,OAAO,IAAI,WAAW,MAAM;AAAA,QAC1B,cAAc;AAAA,MAChB,CAAC;AAAA,MACD,cAAc;AAAA,MACd,qBAAqB;AAAA,MACrB,4BAA4B;AAAA,MAC5B,mBAAmB;AAAA,MACnB,wBAAwB;AAAA,MACxB,kBAAkB,CAAC,SAAiB,UAAkB;AACpD,eAAO,MAAM,OAAO,YAAY,SAAS,KAAK,CAAC,EAAE,WAAW,GAAG,EAAE,OAAO;AAAA,MAC1E;AAAA,MACA,mBAAmB,CAAC,kBAAsC,kBAAsC,kBAAkB,kBAAkB,eAAe,KAAK,MAAM,gBAAgB;AAAA,MAC9K,aAAa,CAAC,aAA+B;AAC3C,YAAG,KAAK,MAAM,oBAAoB;AAChC,iBAAO,YAAY,oBAAC,qCAAkC,UAAoB,GAAI,OAAO;AAAA,QACvF,OAAO;AACL,iBAAO,YAAY,oBAAC,2BAAwB,UAAoB,eAAe,KAAK,mBAAmB,MAAM,KAAK,MAAM,MAAM,GAAI,OAAO;AAAA,QAC3I;AAAA,MACF;AAAA,IACF,CAAC;AACD,QAAI,WAAW,OAAO;AAEtB,QAAI,GAAG,cAAc,MAAM;AACzB,WAAK,SAAS;AAAA,QACZ;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA,MAAM,IAAI,QAAQ;AAAA,MACpB,CAAC;AAAA,IACH,CAAC;AAED,QAAI,GAAG,QAAQ,OAAK;AAClB,UAAG,EAAE,aAAa,OAAQ;AAC1B,WAAK,MAAM,aAAc;AAAA,QACvB,KAAK,KAAK,MAAM;AAAA,MAClB,CAAC;AAAA,IACH,CAAC;AAED,QAAI,GAAG,SAAS,OAAK;AACnB,cAAQ,IAAI,SAAS,CAAC;AAAA,IACxB,CAAC;AAED,QAAI,GAAG,QAAQ,QAAM;AACnB,WAAK,SAAS;AAAA,QACZ,MAAM,IAAI,QAAQ;AAAA,MACpB,CAAC;AAAA,IACH,CAAC;AAED,QAAI,GAAG,WAAW,aAAa;AAC/B,QAAI,GAAG,WAAW,aAAa;AAAA,EACjC;AAAA,EAEA,oBAAoB,CAAC,OAAe;AAClC,UAAM,QAAQ,KAAK,MAAM,SAAS,OAAO,UAAU,WAAS,MAAM,OAAO,EAAE;AAC3E,SAAK,MAAM,cAAc,KAAK;AAAA,EAChC;AAAA,EAEA,aAAa,KAAU;AACrB,UAAM,iBAAiB;AAAA,MACrB,gBAAgB,OAAO,WAAsC;AAC3D,cAAM,WAAW,CAAC;AAClB,YAAI;AACF,gBAAM,UAAU,gDAAgD,OAAO,KAAK;AAC5E,gBAAM,WAAW,MAAM,MAAM,OAAO;AACpC,gBAAM,UAAU,MAAM,SAAS,KAAK;AACpC,qBAAW,WAAW,QAAQ,UAAU;AACtC,kBAAM,SAAS;AAAA,cACb,QAAQ,KAAK,CAAC,KACT,QAAQ,KAAK,CAAC,IAAI,QAAQ,KAAK,CAAC,KAAK;AAAA,cAC1C,QAAQ,KAAK,CAAC,KACT,QAAQ,KAAK,CAAC,IAAI,QAAQ,KAAK,CAAC,KAAK;AAAA,YAC5C;AACA,kBAAM,QAAQ;AAAA,cACZ,MAAM;AAAA,cACN,UAAU;AAAA,gBACR,MAAM;AAAA,gBACN,aAAa;AAAA,cACf;AAAA,cACA,YAAY,QAAQ,WAAW;AAAA,cAC/B,YAAY,QAAQ;AAAA,cACpB,MAAM,QAAQ,WAAW;AAAA,cACzB,YAAY,CAAC,OAAO;AAAA,cACpB;AAAA,YACF;AACA,qBAAS,KAAK,KAAK;AAAA,UACrB;AAAA,QACF,SAAS,GAAG;AACV,kBAAQ,MAAM,wCAAwC,CAAC,EAAE;AAAA,QAC3D;AACA,eAAO;AAAA,UACL;AAAA,QACF;AAAA,MACF;AAAA,IACF;AACA,UAAM,WAAW,IAAI,iBAAiB,gBAAgB;AAAA,MACpD,aAAa,KAAK,MAAM,EAAE,QAAQ;AAAA,MAClC,YAAY;AAAA,IACd,CAAC;AACD,QAAI,WAAW,UAAU,UAAU;AACnC,WAAO;AAAA,EACT;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,SAAK,MAAM,UAAU,eAAe,EAAE,QAAQ,CAAC;AAC/C,SAAK,MAAM,aAAa,SAAS,EAAE,OAAO,CAAC;AAC3C,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,MAAK;AAAA,QACL,cAAY,EAAE,UAAU;AAAA,QACxB,KAAK,OAAK,KAAK,YAAY;AAAA,QAC3B,eAAY;AAAA;AAAA,IACb;AAAA,EACH;AACF;AAEA,MAAM,gBAAgB,gBAAgB,EAAE,qBAAqB;AAC7D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"300acb3537cd75ba7433c8df32ce2e40c6bb2cf5"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Sn=function(){return l},l}Sn();function U7(n,e){return Sn().f[0]++,Sn().s[0]++,Jq.render(n,e),Sn().s[1]++,e}function N$(n,e,t){Sn().f[1]++;const r=(Sn().s[2]++,{id:"background",type:"background",paint:{"background-color":"#1c1f24"}}),i=(Sn().s[3]++,C$(t));Sn().s[4]++,i?(Sn().b[0][0]++,Sn().s[5]++,e.push(i)):Sn().b[0][1]++;const s=(Sn().s[6]++,{});Sn().s[7]++,Object.keys(n.sources).forEach(o=>{Sn().f[2]++;const f=(Sn().s[8]++,n.sources[o]);Sn().s[9]++,Sn().b[2][0]++,f.type!=="raster"&&(Sn().b[2][1]++,f.type!=="raster-dem")?(Sn().b[1][0]++,Sn().s[10]++,s[o]=f):Sn().b[1][1]++});const l=(Sn().s[11]++,{...n,sources:s,layers:[r].concat(e)});return Sn().s[12]++,l}class QF extends Xn.Component{constructor(t){Sn().f[7]++,Sn().s[15]++;super(t);Kn(this,"container",(Sn().s[14]++,null));Kn(this,"onLayerSelectById",(Sn().s[73]++,t=>{Sn().f[21]++;const r=(Sn().s[74]++,this.props.mapStyle.layers.findIndex(i=>(Sn().f[22]++,Sn().s[75]++,i.id===t)));Sn().s[76]++,this.props.onLayerSelect(r)}));Sn().s[16]++,this.state={map:null,inspect:null,geocoder:null,zoomControl:null},Sn().s[17]++,zc.on("languageChanged",()=>{Sn().f[8]++,Sn().s[18]++,this.forceUpdate()})}shouldComponentUpdate(t,r){Sn().f[9]++;let i=(Sn().s[19]++,!1);Sn().s[20]++;try{Sn().s[21]++,i=(Sn().b[3][0]++,JSON.stringify(this.props)!==JSON.stringify(t)||(Sn().b[3][1]++,JSON.stringify(this.state)!==JSON.stringify(r)))}catch{}return Sn().s[22]++,i}componentDidUpdate(){var i,s,l;Sn().f[10]++;const t=(Sn().s[23]++,this.state.map),r=(Sn().s[24]++,this.props.replaceAccessTokens(this.props.mapStyle));Sn().s[25]++,t?(Sn().b[4][0]++,Sn().s[26]++,t.setStyle(r,{diff:!0}),Sn().s[27]++,t.showTileBoundaries=(i=this.props.options)==null?void 0:i.showTileBoundaries,Sn().s[28]++,t.showCollisionBoxes=(s=this.props.options)==null?void 0:s.showCollisionBoxes,Sn().s[29]++,t.showOverdrawInspector=(l=this.props.options)==null?void 0:l.showOverdrawInspector):Sn().b[4][1]++,Sn().s[30]++,Sn().b[6][0]++,this.state.inspect&&(Sn().b[6][1]++,this.props.inspectModeEnabled!==this.state.inspect._showInspectMap)?(Sn().b[5][0]++,Sn().s[31]++,this.state.inspect.toggleInspector()):Sn().b[5][1]++,Sn().s[32]++,Sn().b[8][0]++,this.state.inspect&&(Sn().b[8][1]++,this.props.inspectModeEnabled)?(Sn().b[7][0]++,Sn().s[33]++,this.state.inspect.setOriginalStyle(r),Sn().s[34]++,setTimeout(()=>{Sn().f[11]++,Sn().s[35]++,this.state.inspect.render()},500)):Sn().b[7][1]++}componentDidMount(){Sn().f[12]++;const t=(Sn().s[36]++,{...this.props.options,container:this.container,style:this.props.mapStyle,hash:!0,maxZoom:24,localIdeographFontFamily:!1}),r=(Sn().s[37]++,new ZG({metadata:!0}));Sn().s[38]++,$1.addProtocol("pmtiles",r.tile);const i=(Sn().s[39]++,new $1.Map(t));Sn().s[40]++;const s=()=>{Sn().f[13]++;const B=(Sn().s[41]++,i.getCenter()),O=(Sn().s[42]++,i.getZoom());Sn().s[43]++,this.props.onChange({center:B,zoom:O})};Sn().s[44]++,s(),Sn().s[45]++,i.showTileBoundaries=t.showTileBoundaries,Sn().s[46]++,i.showCollisionBoxes=t.showCollisionBoxes,Sn().s[47]++,i.showOverdrawInspector=t.showOverdrawInspector;const l=(Sn().s[48]++,this.initGeocoder(i)),o=(Sn().s[49]++,new g$);Sn().s[50]++,i.addControl(o,"top-right");const f=(Sn().s[51]++,new $1.NavigationControl({visualizePitch:!0}));Sn().s[52]++,i.addControl(f,"top-right");const y=(Sn().s[53]++,document.createElement("div")),x=(Sn().s[54]++,new mB({popup:new $1.Popup({closeOnClick:!1}),showMapPopup:!0,showMapPopupOnHover:!1,showInspectMapPopupOnHover:!0,showInspectButton:!1,blockHoverPopupOnClick:!0,assignLayerColor:(B,O)=>(Sn().f[14]++,Sn().s[55]++,MA(FF.brightColor(B,O)).desaturate(.5).string()),buildInspectStyle:(B,O)=>(Sn().f[15]++,Sn().s[56]++,N$(B,O,this.props.highlightedLayer)),renderPopup:B=>(Sn().f[16]++,Sn().s[57]++,this.props.inspectModeEnabled?(Sn().b[9][0]++,Sn().s[58]++,U7(ue.jsx(i$,{features:B}),y)):(Sn().b[9][1]++,Sn().s[59]++,U7(ue.jsx(zF,{features:B,onLayerSelect:this.onLayerSelectById,zoom:this.state.zoom}),y)))}));Sn().s[60]++,i.addControl(x),Sn().s[61]++,i.on("style.load",()=>{Sn().f[17]++,Sn().s[62]++,this.setState({map:i,inspect:x,geocoder:l,zoomControl:o,zoom:i.getZoom()})}),Sn().s[63]++,i.on("data",B=>{if(Sn().f[18]++,Sn().s[64]++,B.dataType!=="tile"){Sn().b[10][0]++,Sn().s[65]++;return}else Sn().b[10][1]++;Sn().s[66]++,this.props.onDataChange({map:this.state.map})}),Sn().s[67]++,i.on("error",B=>{Sn().f[19]++,Sn().s[68]++,console.log("ERROR",B)}),Sn().s[69]++,i.on("zoom",B=>{Sn().f[20]++,Sn().s[70]++,this.setState({zoom:i.getZoom()})}),Sn().s[71]++,i.on("dragend",s),Sn().s[72]++,i.on("zoomend",s)}initGeocoder(t){Sn().f[23]++;const r=(Sn().s[77]++,{forwardGeocode:async s=>{Sn().f[24]++;const l=(Sn().s[78]++,[]);Sn().s[79]++;try{const o=(Sn().s[80]++,`https://nominatim.openstreetmap.org/search?q=${s.query}&format=geojson&polygon_geojson=1&addressdetails=1`),f=(Sn().s[81]++,await fetch(o)),y=(Sn().s[82]++,await f.json());Sn().s[83]++;for(const x of y.features){const B=(Sn().s[84]++,[x.bbox[0]+(x.bbox[2]-x.bbox[0])/2,x.bbox[1]+(x.bbox[3]-x.bbox[1])/2]),O=(Sn().s[85]++,{type:"Feature",geometry:{type:"Point",coordinates:B},place_name:x.properties.display_name,properties:x.properties,text:x.properties.display_name,place_type:["place"],center:B});Sn().s[86]++,l.push(O)}}catch(o){Sn().s[87]++,console.error(`Failed to forwardGeocode with error: ${o}`)}return Sn().s[88]++,{features:l}}}),i=(Sn().s[89]++,new j$(r,{placeholder:this.props.t("Search"),maplibregl:$1}));return Sn().s[90]++,t.addControl(i,"top-left"),Sn().s[91]++,i}render(){var r,i;Sn().f[25]++;const t=(Sn().s[92]++,this.props.t);return Sn().s[93]++,(r=this.state.geocoder)==null||r.setPlaceholder(t("Search")),Sn().s[94]++,(i=this.state.zoomControl)==null||i.setLabel(t("Zoom:")),Sn().s[95]++,ue.jsx("div",{className:"maputnik-map__map",role:"region","aria-label":t("Map view"),ref:s=>(Sn().f[26]++,Sn().s[96]++,this.container=s),"data-wd-key":"maplibre:map"})}}Kn(QF,"defaultProps",(Sn().s[13]++,{onMapLoaded:()=>{Sn().f[3]++},onDataChange:()=>{Sn().f[4]++},onLayerSelect:()=>{Sn().f[5]++},onChange:()=>{Sn().f[6]++},options:{}}));const W$=(Sn().s[97]++,zs()(QF));var z7={thin:100,hairline:100,"ultra-light":200,"extra-light":200,light:300,book:300,regular:400,normal:400,plain:400,roman:400,standard:400,medium:500,"semi-bold":600,"demi-bold":600,bold:700,"extra-bold":800,"ultra-bold":800,heavy:900,black:900,"heavy-black":900,fat:900,poster:900,"ultra-black":950,"extra-black":950},Av=" ",j7=/(italic|oblique)$/i,N7={};function $E(n,e,t){var r=N7[n];if(!r){Array.isArray(n)||(n=[n]);for(var i=400,s="normal",l=[],o,f,y=0,x=n.length;y<x;++y){var B=n[y],O=B.split(" "),P=O[O.length-1].toLowerCase();P=="normal"||P=="italic"||P=="oblique"?(s=f?s:P,f=!0,O.pop(),P=O[O.length-1].toLowerCase()):j7.test(P)&&(P=P.replace(j7,""),s=f?s:O[O.length-1].replace(P,""),f=!0);for(var U in z7){var j=O.length>1?O[O.length-2].toLowerCase():"";if(P==U||P==U.replace("-","")||j+"-"+P==U){i=o?i:z7[U],O.pop(),j&&U.startsWith(j)&&O.pop();break}}!o&&typeof P=="number"&&(i=P,o=!0);var N=O.join(Av).replace("Klokantech Noto Sans","Noto Sans");N.indexOf(Av)!==-1&&(N='"'+N+'"'),l.push(N)}r=N7[n]=[s,i,l]}return r[0]+Av+r[1]+Av+e+"px"+(t?"/"+t:"")+Av+r[2]}function G$(n,e,t){let r,i;t=t||Rm;let s=0,l=n.length,o=!1;for(;s<l;)r=s+(l-s>>1),i=+t(n[r],e),i<0?s=r+1:(l=r,o=!i);return o?s:~s}function Rm(n,e){return n>e?1:n<e?-1:0}function Q$(n,e){return n<e?1:n>e?-1:0}function ux(n,e,t){if(n[0]<=e)return 0;const r=n.length;if(e<=n[r-1])return r-1;if(typeof t=="function"){for(let i=1;i<r;++i){const s=n[i];if(s===e)return i;if(s<e)return t(e,n[i-1],s)>0?i-1:i}return r-1}if(t>0){for(let i=1;i<r;++i)if(n[i]<e)return i-1;return r-1}if(t<0){for(let i=1;i<r;++i)if(n[i]<=e)return i;return r-1}for(let i=1;i<r;++i){if(n[i]==e)return i;if(n[i]<e)return n[i-1]-e<e-n[i]?i-1:i}return r-1}function Y$(n,e,t){for(;e<t;){const r=n[e];n[e]=n[t],n[t]=r,++e,--t}}function Xp(n,e){const t=Array.isArray(e)?e:[e],r=t.length;for(let i=0;i<r;i++)n[n.length]=t[i]}function Q0(n,e){const t=n.length;if(t!==e.length)return!1;for(let r=0;r<t;r++)if(n[r]!==e[r])return!1;return!0}function q$(n,e,t){const r=e;return n.every(function(i,s){if(s===0)return!0;const l=r(n[s-1],i);return!(l>0||l===0)})}function uC(){return!0}function Ax(){return!1}function My(){}function YF(n){let e,t,r;return function(){const i=Array.prototype.slice.call(arguments);return(!t||this!==r||!Q0(i,t))&&(r=this,t=i,e=n.apply(this,arguments)),e}}function wy(n){function e(){let t;try{t=n()}catch(r){return Promise.reject(r)}return t instanceof Promise?t:Promise.resolve(t)}return e()}const Sy={PROPERTYCHANGE:"propertychange"},lo={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};class DC{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function FC(n){for(const e in n)delete n[e]}function N0(n){let e;for(e in n)return!1;return!e}class gp{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}class LC extends DC{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,t){if(!e||!t)return;const r=this.listeners_||(this.listeners_={}),i=r[e]||(r[e]=[]);i.includes(t)||i.push(t)}dispatchEvent(e){const t=typeof e=="string",r=t?e:e.type,i=this.listeners_&&this.listeners_[r];if(!i)return;const s=t?new gp(e):e;s.target||(s.target=this.eventTarget_||this);const l=this.dispatching_||(this.dispatching_={}),o=this.pendingRemovals_||(this.pendingRemovals_={});r in l||(l[r]=0,o[r]=0),++l[r];let f;for(let y=0,x=i.length;y<x;++y)if("handleEvent"in i[y]?f=i[y].handleEvent(s):f=i[y].call(this,s),f===!1||s.propagationStopped){f=!1;break}if(--l[r]===0){let y=o[r];for(delete o[r];y--;)this.removeEventListener(r,My);delete l[r]}return f}disposeInternal(){this.listeners_&&FC(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,t){if(!this.listeners_)return;const r=this.listeners_[e];if(!r)return;const i=r.indexOf(t);i!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(r[i]=My,++this.pendingRemovals_[e]):(r.splice(i,1),r.length===0&&delete this.listeners_[e]))}}function Fs(n,e,t,r,i){if(i){const l=t;t=function(o){return n.removeEventListener(e,t),l.call(r??this,o)}}else r&&r!==n&&(t=t.bind(r));const s={target:n,type:e,listener:t};return n.addEventListener(e,t),s}function e2(n,e,t,r){return Fs(n,e,t,r,!0)}function hl(n){n&&n.target&&(n.target.removeEventListener(n.type,n.listener),FC(n))}class UC extends LC{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(lo.CHANGE)}getRevision(){return this.revision_}onInternal(e,t){if(Array.isArray(e)){const r=e.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=Fs(this,e[s],t);return i}return Fs(this,e,t)}onceInternal(e,t){let r;if(Array.isArray(e)){const i=e.length;r=new Array(i);for(let s=0;s<i;++s)r[s]=e2(this,e[s],t)}else r=e2(this,e,t);return t.ol_key=r,r}unInternal(e,t){const r=t.ol_key;if(r)V$(r);else if(Array.isArray(e))for(let i=0,s=e.length;i<s;++i)this.removeEventListener(e[i],t);else this.removeEventListener(e,t)}}UC.prototype.on;UC.prototype.once;UC.prototype.un;function V$(n){if(Array.isArray(n))for(let e=0,t=n.length;e<t;++e)hl(n[e]);else hl(n)}function yo(){throw new Error("Unimplemented abstract method.")}let $$=0;function Wo(n){return n.ol_uid||(n.ol_uid=String(++$$))}class W7 extends gp{constructor(e,t,r){super(e),this.key=t,this.oldValue=r}}class yp extends UC{constructor(e){super(),this.on,this.once,this.un,Wo(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,t){let r;r=`change:${e}`,this.hasListener(r)&&this.dispatchEvent(new W7(r,e,t)),r=Sy.PROPERTYCHANGE,this.hasListener(r)&&this.dispatchEvent(new W7(r,e,t))}addChangeListener(e,t){this.addEventListener(`change:${e}`,t)}removeChangeListener(e,t){this.removeEventListener(`change:${e}`,t)}set(e,t,r){const i=this.values_||(this.values_={});if(r)i[e]=t;else{const s=i[e];i[e]=t,s!==t&&this.notify(e,s)}}setProperties(e,t){for(const r in e)this.set(r,e[r],t)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,t){if(this.values_&&e in this.values_){const r=this.values_[e];delete this.values_[e],N0(this.values_)&&(this.values_=null),t||this.notify(e,r)}}}function Hs(n,e){if(!n)throw new Error(e)}class cx extends yp{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const t=e;this.setGeometry(t)}else{const t=e;this.setProperties(t)}}clone(){const e=new cx(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const t=this.getGeometry();t&&e.setGeometry(t.clone());const r=this.getStyle();return r&&e.setStyle(r),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(hl(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=Fs(e,lo.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?H$(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function H$(n){if(typeof n=="function")return n;let e;return Array.isArray(n)?e=n:(Hs(typeof n.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[n]),function(){return e}}const mc={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function HE(n){const e=Pf();for(let t=0,r=n.length;t<r;++t)Vv(e,n[t]);return e}function Z$(n,e,t){const r=Math.min.apply(null,n),i=Math.min.apply(null,e),s=Math.max.apply(null,n),l=Math.max.apply(null,e);return Um(r,i,s,l,t)}function L0(n,e,t){return t?(t[0]=n[0]-e,t[1]=n[1]-e,t[2]=n[2]+e,t[3]=n[3]+e,t):[n[0]-e,n[1]-e,n[2]+e,n[3]+e]}function qF(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n.slice()}function Qg(n,e,t){let r,i;return e<n[0]?r=n[0]-e:n[2]<e?r=e-n[2]:r=0,t<n[1]?i=n[1]-t:n[3]<t?i=t-n[3]:i=0,r*r+i*i}function Ug(n,e){return yB(n,e[0],e[1])}function Qp(n,e){return n[0]<=e[0]&&e[2]<=n[2]&&n[1]<=e[1]&&e[3]<=n[3]}function yB(n,e,t){return n[0]<=e&&e<=n[2]&&n[1]<=t&&t<=n[3]}function ZE(n,e){const t=n[0],r=n[1],i=n[2],s=n[3],l=e[0],o=e[1];let f=mc.UNKNOWN;return l<t?f=f|mc.LEFT:l>i&&(f=f|mc.RIGHT),o<r?f=f|mc.BELOW:o>s&&(f=f|mc.ABOVE),f===mc.UNKNOWN&&(f=mc.INTERSECTING),f}function Pf(){return[1/0,1/0,-1/0,-1/0]}function Um(n,e,t,r,i){return i?(i[0]=n,i[1]=e,i[2]=t,i[3]=r,i):[n,e,t,r]}function zy(n){return Um(1/0,1/0,-1/0,-1/0,n)}function VF(n,e){const t=n[0],r=n[1];return Um(t,r,t,r,e)}function vB(n,e,t,r,i){const s=zy(i);return HF(s,n,e,t,r)}function zm(n,e){return n[0]==e[0]&&n[2]==e[2]&&n[1]==e[1]&&n[3]==e[3]}function $F(n,e){return e[0]<n[0]&&(n[0]=e[0]),e[2]>n[2]&&(n[2]=e[2]),e[1]<n[1]&&(n[1]=e[1]),e[3]>n[3]&&(n[3]=e[3]),n}function Vv(n,e){e[0]<n[0]&&(n[0]=e[0]),e[0]>n[2]&&(n[2]=e[0]),e[1]<n[1]&&(n[1]=e[1]),e[1]>n[3]&&(n[3]=e[1])}function HF(n,e,t,r,i){for(;t<r;t+=i)X$(n,e[t],e[t+1]);return n}function X$(n,e,t){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}function ZF(n,e){let t;return t=e(dx(n)),t||(t=e(hx(n)),t)||(t=e(fx(n)),t)||(t=e(Wm(n)),t)?t:!1}function XE(n){let e=0;return Yg(n)||(e=Ls(n)*aA(n)),e}function dx(n){return[n[0],n[1]]}function hx(n){return[n[2],n[1]]}function Kf(n){return[(n[0]+n[2])/2,(n[1]+n[3])/2]}function J$(n,e){let t;if(e==="bottom-left")t=dx(n);else if(e==="bottom-right")t=hx(n);else if(e==="top-left")t=Wm(n);else if(e==="top-right")t=fx(n);else throw new Error("Invalid corner");return t}function t2(n,e,t,r,i){const[s,l,o,f,y,x,B,O]=XF(n,e,t,r);return Um(Math.min(s,o,y,B),Math.min(l,f,x,O),Math.max(s,o,y,B),Math.max(l,f,x,O),i)}function XF(n,e,t,r){const i=e*r[0]/2,s=e*r[1]/2,l=Math.cos(t),o=Math.sin(t),f=i*l,y=i*o,x=s*l,B=s*o,O=n[0],P=n[1];return[O-f+B,P-y-x,O-f-B,P-y+x,O+f-B,P+y+x,O+f+B,P+y-x,O-f+B,P-y-x]}function aA(n){return n[3]-n[1]}function fp(n,e,t){const r=t||Pf();return Du(n,e)?(n[0]>e[0]?r[0]=n[0]:r[0]=e[0],n[1]>e[1]?r[1]=n[1]:r[1]=e[1],n[2]<e[2]?r[2]=n[2]:r[2]=e[2],n[3]<e[3]?r[3]=n[3]:r[3]=e[3]):zy(r),r}function Wm(n){return[n[0],n[3]]}function fx(n){return[n[2],n[3]]}function Ls(n){return n[2]-n[0]}function Du(n,e){return n[0]<=e[2]&&n[2]>=e[0]&&n[1]<=e[3]&&n[3]>=e[1]}function Yg(n){return n[2]<n[0]||n[3]<n[1]}function eH(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n}function tH(n,e,t){let r=!1;const i=ZE(n,e),s=ZE(n,t);if(i===mc.INTERSECTING||s===mc.INTERSECTING)r=!0;else{const l=n[0],o=n[1],f=n[2],y=n[3],x=e[0],B=e[1],O=t[0],P=t[1],U=(P-B)/(O-x);let j,N;s&mc.ABOVE&&!(i&mc.ABOVE)&&(j=O-(P-y)/U,r=j>=l&&j<=f),!r&&s&mc.RIGHT&&!(i&mc.RIGHT)&&(N=P-(O-f)*U,r=N>=o&&N<=y),!r&&s&mc.BELOW&&!(i&mc.BELOW)&&(j=O-(P-o)/U,r=j>=l&&j<=f),!r&&s&mc.LEFT&&!(i&mc.LEFT)&&(N=P-(O-l)*U,r=N>=o&&N<=y)}return r}function nH(n,e,t,r){if(Yg(n))return zy(t);let i=[];i=[n[0],n[1],n[2],n[1],n[2],n[3],n[0],n[3]],e(i,i,2);const s=[],l=[];for(let o=0,f=i.length;o<f;o+=2)s.push(i[o]),l.push(i[o+1]);return Z$(s,l,t)}function JF(n,e){const t=e.getExtent(),r=Kf(n);if(e.canWrapX()&&(r[0]<t[0]||r[0]>=t[2])){const i=Ls(t),l=Math.floor((r[0]-t[0])/i)*i;n[0]-=l,n[2]-=l}return n}function eL(n,e,t){if(e.canWrapX()){const r=e.getExtent();if(!isFinite(n[0])||!isFinite(n[2]))return[[r[0],n[1],r[2],n[3]]];JF(n,e);const i=Ls(r);if(Ls(n)>i&&!t)return[[r[0],n[1],r[2],n[3]]];if(n[0]<r[0])return[[n[0]+i,n[1],r[2],n[3]],[r[0],n[1],n[2],n[3]]];if(n[2]>r[2])return[[n[0],n[1],r[2],n[3]],[r[0],n[1],n[2]-i,n[3]]]}return[n]}function tL(n,e,t,r){const i=[];let s=Pf();for(let l=0,o=t.length;l<o;++l){const f=t[l];s=vB(n,e,f[0],r),i.push((s[0]+s[2])/2,(s[1]+s[3])/2),e=f[f.length-1]}return i}function rH(n,e,t,r,i){return!ZF(i,function(l){return!Mg(n,e,t,r,l[0],l[1])})}function Mg(n,e,t,r,i,s){let l=0,o=n[t-r],f=n[t-r+1];for(;e<t;e+=r){const y=n[e],x=n[e+1];f<=s?x>s&&(y-o)*(s-f)-(i-o)*(x-f)>0&&l++:x<=s&&(y-o)*(s-f)-(i-o)*(x-f)<0&&l--,o=y,f=x}return l!==0}function CB(n,e,t,r,i,s){if(t.length===0||!Mg(n,e,t[0],r,i,s))return!1;for(let l=1,o=t.length;l<o;++l)if(Mg(n,t[l-1],t[l],r,i,s))return!1;return!0}function iH(n,e,t,r,i,s){if(t.length===0)return!1;for(let l=0,o=t.length;l<o;++l){const f=t[l];if(CB(n,e,f,r,i,s))return!0;e=f[f.length-1]}return!1}function _B(n,e,t,r,i,s,l){let o,f,y,x,B,O,P;const U=i[s+1],j=[];for(let H=0,se=t.length;H<se;++H){const re=t[H];for(x=n[re-r],O=n[re-r+1],o=e;o<re;o+=r)B=n[o],P=n[o+1],(U<=O&&P<=U||O<=U&&U<=P)&&(y=(U-O)/(P-O)*(B-x)+x,j.push(y)),x=B,O=P}let N=NaN,Y=-1/0;for(j.sort(Rm),x=j[0],o=1,f=j.length;o<f;++o){B=j[o];const H=Math.abs(B-x);H>Y&&(y=(x+B)/2,CB(n,e,t,r,y,U)&&(N=y,Y=H)),x=B}return isNaN(N)&&(N=i[s]),l?(l.push(N,U,Y),l):[N,U,Y]}function nL(n,e,t,r,i){let s=[];for(let l=0,o=t.length;l<o;++l){const f=t[l];s=_B(n,e,f,r,i,2*l,s),e=f[f.length-1]}return s}function SA(n,e,t){return Math.min(Math.max(n,e),t)}function oH(n,e,t,r,i,s){const l=i-t,o=s-r;if(l!==0||o!==0){const f=((n-t)*l+(e-r)*o)/(l*l+o*o);f>1?(t=i,r=s):f>0&&(t+=l*f,r+=o*f)}return Pg(n,e,t,r)}function Pg(n,e,t,r){const i=t-n,s=r-e;return i*i+s*s}function sH(n){const e=n.length;for(let r=0;r<e;r++){let i=r,s=Math.abs(n[r][r]);for(let o=r+1;o<e;o++){const f=Math.abs(n[o][r]);f>s&&(s=f,i=o)}if(s===0)return null;const l=n[i];n[i]=n[r],n[r]=l;for(let o=r+1;o<e;o++){const f=-n[o][r]/n[r][r];for(let y=r;y<e+1;y++)r==y?n[o][y]=0:n[o][y]+=f*n[r][y]}}const t=new Array(e);for(let r=e-1;r>=0;r--){t[r]=n[r][e]/n[r][r];for(let i=r-1;i>=0;i--)n[i][e]-=n[i][r]*t[r]}return t}function G7(n){return n*180/Math.PI}function U0(n){return n*Math.PI/180}function Kg(n,e){const t=n%e;return t*e<0?t+e:t}function Nh(n,e,t){return n+t*(e-n)}function bB(n,e){const t=Math.pow(10,e);return Math.round(n*t)/t}function Y_(n,e){return Math.floor(bB(n,e))}function I0(n,e){return Math.ceil(bB(n,e))}function JE(n,e,t){if(n>=e&&n<t)return n;const r=t-e;return((n-e)%r+r)%r+e}function n2(n,e,t,r,i,s,l){let o,f;const y=(t-e)/r;if(y===1)o=e;else if(y===2)o=e,f=i;else if(y!==0){let x=n[e],B=n[e+1],O=0;const P=[0];for(let N=e+r;N<t;N+=r){const Y=n[N],H=n[N+1];O+=Math.sqrt((Y-x)*(Y-x)+(H-B)*(H-B)),P.push(O),x=Y,B=H}const U=i*O,j=G$(P,U);j<0?(f=(U-P[-j-2])/(P[-j-1]-P[-j-2]),o=e+(-j-2)*r):o=e+j*r}l=l>1?l:2,s=s||new Array(l);for(let x=0;x<l;++x)s[x]=o===void 0?NaN:f===void 0?n[o+x]:Nh(n[o+x],n[o+r+x],f);return s}function e6(n,e,t,r,i,s){if(t==e)return null;let l;if(i<n[e+r-1])return s?(l=n.slice(e,e+r),l[r-1]=i,l):null;if(n[t-1]<i)return s?(l=n.slice(t-r,t),l[r-1]=i,l):null;if(i==n[e+r-1])return n.slice(e,e+r);let o=e/r,f=t/r;for(;o<f;){const O=o+f>>1;i<n[(O+1)*r-1]?f=O:o=O+1}const y=n[o*r-1];if(i==y)return n.slice((o-1)*r,(o-1)*r+r);const x=n[(o+1)*r-1],B=(i-y)/(x-y);l=[];for(let O=0;O<r-1;++O)l.push(Nh(n[(o-1)*r+O],n[o*r+O],B));return l.push(i),l}function aH(n,e,t,r,i,s,l){if(l)return e6(n,e,t[t.length-1],r,i,s);let o;if(i<n[r-1])return s?(o=n.slice(0,r),o[r-1]=i,o):null;if(n[n.length-1]<i)return s?(o=n.slice(n.length-r),o[r-1]=i,o):null;for(let f=0,y=t.length;f<y;++f){const x=t[f];if(e!=x){if(i<n[e+r-1])return null;if(i<=n[x-1])return e6(n,e,x,r,i,!1);e=x}}return null}function lH(n,e,t,r){for(;e<t-r;){for(let i=0;i<r;++i){const s=n[e+i];n[e+i]=n[t-r+i],n[t-r+i]=s}e+=r,t-=r}}function xB(n,e,t,r){let i=0,s=n[t-r],l=n[t-r+1];for(;e<t;e+=r){const o=n[e],f=n[e+1];i+=(o-s)*(f+l),s=o,l=f}return i===0?void 0:i>0}function MB(n,e,t,r,i){i=i!==void 0?i:!1;for(let s=0,l=t.length;s<l;++s){const o=t[s],f=xB(n,e,o,r);if(s===0){if(i&&f||!i&&!f)return!1}else if(i&&!f||!i&&f)return!1;e=o}return!0}function rL(n,e,t,r,i){for(let s=0,l=t.length;s<l;++s){const o=t[s];if(!MB(n,e,o,r,i))return!1;o.length&&(e=o[o.length-1])}return!0}function r2(n,e,t,r,i){i=i!==void 0?i:!1;for(let s=0,l=t.length;s<l;++s){const o=t[s],f=xB(n,e,o,r);(s===0?i&&f||!i&&!f:i&&!f||!i&&f)&&lH(n,e,o,r),e=o}return e}function t6(n,e,t,r,i){for(let s=0,l=t.length;s<l;++s)e=r2(n,e,t[s],r,i);return e}function iL(n,e){const t=[];let r=0,i=0,s;for(let l=0,o=e.length;l<o;++l){const f=e[l],y=xB(n,r,f,2);if(s===void 0&&(s=y),y===s)t.push(e.slice(i,l+1));else{if(t.length===0)continue;t[t.length-1].push(e[i])}i=l+1,r=f}return t}function px(n,e,t,r,i,s,l){const o=(t-e)/r;if(o<3){for(;e<t;e+=r)s[l++]=n[e],s[l++]=n[e+1];return l}const f=new Array(o);f[0]=1,f[o-1]=1;const y=[e,t-r];let x=0;for(;y.length>0;){const B=y.pop(),O=y.pop();let P=0;const U=n[O],j=n[O+1],N=n[B],Y=n[B+1];for(let H=O+r;H<B;H+=r){const se=n[H],re=n[H+1],V=oH(se,re,U,j,N,Y);V>P&&(x=H,P=V)}P>i&&(f[(x-e)/r]=1,O+r<x&&y.push(O,x),x+r<B&&y.push(x,B))}for(let B=0;B<o;++B)f[B]&&(s[l++]=n[e+B*r],s[l++]=n[e+B*r+1]);return l}function oL(n,e,t,r,i,s,l,o){for(let f=0,y=t.length;f<y;++f){const x=t[f];l=px(n,e,x,r,i,s,l),o.push(l),e=x}return l}function gg(n,e){return e*Math.round(n/e)}function uH(n,e,t,r,i,s,l){if(e==t)return l;let o=gg(n[e],i),f=gg(n[e+1],i);e+=r,s[l++]=o,s[l++]=f;let y,x;do if(y=gg(n[e],i),x=gg(n[e+1],i),e+=r,e==t)return s[l++]=y,s[l++]=x,l;while(y==o&&x==f);for(;e<t;){const B=gg(n[e],i),O=gg(n[e+1],i);if(e+=r,B==y&&O==x)continue;const P=y-o,U=x-f,j=B-o,N=O-f;if(P*N==U*j&&(P<0&&j<P||P==j||P>0&&j>P)&&(U<0&&N<U||U==N||U>0&&N>U)){y=B,x=O;continue}s[l++]=y,s[l++]=x,o=y,f=x,y=B,x=O}return s[l++]=y,s[l++]=x,l}function wB(n,e,t,r,i,s,l,o){for(let f=0,y=t.length;f<y;++f){const x=t[f];l=uH(n,e,x,r,i,s,l),o.push(l),e=x}return l}function AH(n,e,t,r,i,s,l,o){for(let f=0,y=t.length;f<y;++f){const x=t[f],B=[];l=wB(n,e,x,r,i,s,l,B),o.push(B),e=x[x.length-1]}return l}function z0(n,e,t,r,i,s,l){s=s||[],l=l||2;let o=0;for(let f=e;f<t;f+=r){const y=n[f],x=n[f+1];s[o++]=i[0]*y+i[2]*x+i[4],s[o++]=i[1]*y+i[3]*x+i[5];for(let B=2;B<l;B++)s[o++]=n[f+B]}return s&&s.length!=o&&(s.length=o),s}function sL(n,e,t,r,i,s,l){l=l||[];const o=Math.cos(i),f=Math.sin(i),y=s[0],x=s[1];let B=0;for(let O=e;O<t;O+=r){const P=n[O]-y,U=n[O+1]-x;l[B++]=y+P*o-U*f,l[B++]=x+P*f+U*o;for(let j=O+2;j<O+r;++j)l[B++]=n[j]}return l&&l.length!=B&&(l.length=B),l}function cH(n,e,t,r,i,s,l,o){o=o||[];const f=l[0],y=l[1];let x=0;for(let B=e;B<t;B+=r){const O=n[B]-f,P=n[B+1]-y;o[x++]=f+i*O,o[x++]=y+s*P;for(let U=B+2;U<B+r;++U)o[x++]=n[U]}return o&&o.length!=x&&(o.length=x),o}function dH(n,e,t,r,i,s,l){l=l||[];let o=0;for(let f=e;f<t;f+=r){l[o++]=n[f]+i,l[o++]=n[f+1]+s;for(let y=f+2;y<f+r;++y)l[o++]=n[y]}return l&&l.length!=o&&(l.length=o),l}function aL(...n){console.warn(...n)}function hH(n,e){return n[0]+=+e[0],n[1]+=+e[1],n}function i2(n,e){let t=!0;for(let r=n.length-1;r>=0;--r)if(n[r]!=e[r]){t=!1;break}return t}function SB(n,e){const t=Math.cos(e),r=Math.sin(e),i=n[0]*t-n[1]*r,s=n[1]*t+n[0]*r;return n[0]=i,n[1]=s,n}function fH(n,e){return n[0]*=e,n[1]*=e,n}function EB(n,e){if(e.canWrapX()){const t=Ls(e.getExtent()),r=pH(n,e,t);r&&(n[0]-=r*t)}return n}function pH(n,e,t){const r=e.getExtent();let i=0;return e.canWrapX()&&(n[0]<r[0]||n[0]>r[2])&&(t=t||Ls(r),i=Math.floor((n[0]-r[0])/t)),i}const W0={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class mx{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||W0[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const zC=6378137,ny=Math.PI*zC,mH=[-ny,-ny,ny,ny],gH=[-180,-85,180,85],q_=zC*Math.log(Math.tan(Math.PI/2));class y1 extends mx{constructor(e){super({code:e,units:"m",extent:mH,global:!0,worldExtent:gH,getPointResolution:function(t,r){return t/Math.cosh(r[1]/zC)}})}}const Q7=[new y1("EPSG:3857"),new y1("EPSG:102100"),new y1("EPSG:102113"),new y1("EPSG:900913"),new y1("http://www.opengis.net/def/crs/EPSG/0/3857"),new y1("http://www.opengis.net/gml/srs/epsg.xml#3857")];function yH(n,e,t,r){const i=n.length;t=t>1?t:2,r=r??t,e===void 0&&(t>2?e=n.slice():e=new Array(i));for(let s=0;s<i;s+=r){e[s]=ny*n[s]/180;let l=zC*Math.log(Math.tan(Math.PI*(+n[s+1]+90)/360));l>q_?l=q_:l<-q_&&(l=-q_),e[s+1]=l}return e}function vH(n,e,t,r){const i=n.length;t=t>1?t:2,r=r??t,e===void 0&&(t>2?e=n.slice():e=new Array(i));for(let s=0;s<i;s+=r)e[s]=180*n[s]/ny,e[s+1]=360*Math.atan(Math.exp(n[s+1]/zC))/Math.PI-90;return e}const CH=6378137,Y7=[-180,-90,180,90],_H=Math.PI*CH/180;class ug extends mx{constructor(e,t){super({code:e,units:"degrees",extent:Y7,axisOrientation:t,global:!0,metersPerUnit:_H,worldExtent:Y7})}}const q7=[new ug("CRS:84"),new ug("EPSG:4326","neu"),new ug("urn:ogc:def:crs:OGC:1.3:CRS84"),new ug("urn:ogc:def:crs:OGC:2:84"),new ug("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new ug("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new ug("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let n6={};function bH(n){return n6[n]||n6[n.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function xH(n,e){n6[n]=e}let dy={};function AC(n,e,t){const r=n.getCode(),i=e.getCode();r in dy||(dy[r]={}),dy[r][i]=t}function t4(n,e){return n in dy&&e in dy[n]?dy[n][e]:null}const o2=.9996,Tf=.00669438,gx=Tf*Tf,yx=gx*Tf,wg=Tf/(1-Tf),V7=Math.sqrt(1-Tf),Ey=(1-V7)/(1+V7),lL=Ey*Ey,BB=lL*Ey,OB=BB*Ey,uL=OB*Ey,AL=1-Tf/4-3*gx/64-5*yx/256,MH=3*Tf/8+3*gx/32+45*yx/1024,wH=15*gx/256+45*yx/1024,SH=35*yx/3072,EH=3/2*Ey-27/32*BB+269/512*uL,BH=21/16*lL-55/32*OB,OH=151/96*BB-417/128*uL,IH=1097/512*OB,s2=6378137;function kH(n,e,t){const r=n-5e5,l=(t.north?e:e-1e7)/o2/(s2*AL),o=l+EH*Math.sin(2*l)+BH*Math.sin(4*l)+OH*Math.sin(6*l)+IH*Math.sin(8*l),f=Math.sin(o),y=f*f,x=Math.cos(o),B=f/x,O=B*B,P=O*O,U=1-Tf*y,j=Math.sqrt(1-Tf*y),N=s2/j,Y=(1-Tf)/U,H=wg*x**2,se=H*H,re=r/(N*o2),V=re*re,ne=V*re,G=ne*re,oe=G*re,he=oe*re,fe=o-B/Y*(V/2-G/24*(5+3*O+10*H-4*se-9*wg))+he/720*(61+90*O+298*H+45*P-252*wg-3*se);let Ee=(re-ne/6*(1+2*O+H)+oe/120*(5-2*H+28*O-3*se+8*wg+24*P))/x;return Ee=JE(Ee+U0(cL(t.number)),-Math.PI,Math.PI),[G7(Ee),G7(fe)]}const $7=-80,H7=84,TH=-180,PH=180;function KH(n,e,t){n=JE(n,TH,PH),e<$7?e=$7:e>H7&&(e=H7);const r=U0(e),i=Math.sin(r),s=Math.cos(r),l=i/s,o=l*l,f=o*o,y=U0(n),x=cL(t.number),B=U0(x),O=s2/Math.sqrt(1-Tf*i**2),P=wg*s**2,U=s*JE(y-B,-Math.PI,Math.PI),j=U*U,N=j*U,Y=N*U,H=Y*U,se=H*U,re=s2*(AL*r-MH*Math.sin(2*r)+wH*Math.sin(4*r)-SH*Math.sin(6*r)),V=o2*O*(U+N/6*(1-o+P)+H/120*(5-18*o+f+72*P-58*wg))+5e5;let ne=o2*(re+O*l*(j/2+Y/24*(5-o+9*P+4*P**2)+se/720*(61-58*o+f+600*P-330*wg)));return t.north||(ne+=1e7),[V,ne]}function cL(n){return(n-1)*6-180+3}const RH=[/^EPSG:(\d+)$/,/^urn:ogc:def:crs:EPSG::(\d+)$/,/^http:\/\/www\.opengis\.net\/def\/crs\/EPSG\/0\/(\d+)$/];function dL(n){let e=0;for(const i of RH){const s=n.match(i);if(s){e=parseInt(s[1]);break}}if(!e)return null;let t=0,r=!1;return e>32700&&e<32761?t=e-32700:e>32600&&e<32661&&(r=!0,t=e-32600),t?{number:t,north:r}:null}function Z7(n,e){return function(t,r,i,s){const l=t.length;i=i>1?i:2,s=s??i,r||(i>2?r=t.slice():r=new Array(l));for(let o=0;o<l;o+=s){const f=t[o],y=t[o+1],x=n(f,y,e);r[o]=x[0],r[o+1]=x[1]}return r}}function DH(n){return dL(n)?new mx({code:n,units:"m"}):null}function FH(n){const e=dL(n.getCode());return e?{forward:Z7(KH,e),inverse:Z7(kH,e)}:null}const LH=63710088e-1;function X7(n,e,t){t=t||LH;const r=U0(n[1]),i=U0(e[1]),s=(i-r)/2,l=U0(e[0]-n[0])/2,o=Math.sin(s)*Math.sin(s)+Math.sin(l)*Math.sin(l)*Math.cos(r)*Math.cos(i);return 2*t*Math.atan2(Math.sqrt(o),Math.sqrt(1-o))}const UH=[FH],zH=[DH];let r6=!0;function hL(n){r6=!1}function IB(n,e){if(e!==void 0){for(let t=0,r=n.length;t<r;++t)e[t]=n[t];e=e}else e=n.slice();return e}function i6(n){xH(n.getCode(),n),AC(n,n,IB)}function jH(n){n.forEach(i6)}function ya(n){if(typeof n!="string")return n;const e=bH(n);if(e)return e;for(const t of zH){const r=t(n);if(r)return r}return null}function o6(n,e,t,r){n=ya(n);let i;const s=n.getPointResolutionFunc();if(s){if(i=s(e,t),r&&r!==n.getUnits()){const l=n.getMetersPerUnit();l&&(i=i*l/W0[r])}}else{const l=n.getUnits();if(l=="degrees"&&!r||r=="degrees")i=e;else{const o=jC(n,ya("EPSG:4326"));if(!o&&l!=="degrees")i=e*n.getMetersPerUnit();else{let y=[t[0]-e/2,t[1],t[0]+e/2,t[1],t[0],t[1]-e/2,t[0],t[1]+e/2];y=o(y,y,2);const x=X7(y.slice(0,2),y.slice(2,4)),B=X7(y.slice(4,6),y.slice(6,8));i=(x+B)/2}const f=r?W0[r]:n.getMetersPerUnit();f!==void 0&&(i/=f)}}return i}function J7(n){jH(n),n.forEach(function(e){n.forEach(function(t){e!==t&&AC(e,t,IB)})})}function NH(n,e,t,r){n.forEach(function(i){e.forEach(function(s){AC(i,s,t),AC(s,i,r)})})}function kB(n,e){return n?typeof n=="string"?ya(n):n:ya(e)}function WH(n){return function(e,t,r,i){const s=e.length;r=r!==void 0?r:2,i=i??r,t=t!==void 0?t:new Array(s);for(let l=0;l<s;l+=i){const o=n(e.slice(l,l+r)),f=o.length;for(let y=0,x=i;y<x;++y)t[l+y]=y>=f?e[l+y]:o[y]}return t}}function s6(n,e){return hL(),vx(n,"EPSG:4326",e!==void 0?e:"EPSG:3857")}function n4(n,e){const t=vx(n,"EPSG:3857","EPSG:4326"),r=t[0];return(r<-180||r>180)&&(t[0]=Kg(r+180,360)-180),t}function Rg(n,e){if(n===e)return!0;const t=n.getUnits()===e.getUnits();return(n.getCode()===e.getCode()||jC(n,e)===IB)&&t}function jC(n,e){const t=n.getCode(),r=e.getCode();let i=t4(t,r);if(i)return i;let s=null,l=null;for(const f of UH)s||(s=f(n)),l||(l=f(e));if(!s&&!l)return null;const o="EPSG:4326";if(l)if(s)i=r4(s.inverse,l.forward);else{const f=t4(t,o);f&&(i=r4(f,l.forward))}else{const f=t4(o,r);f&&(i=r4(s.inverse,f))}return i&&(i6(n),i6(e),AC(n,e,i)),i}function r4(n,e){return function(t,r,i,s){return r=n(t,r,i,s),e(r,r,i,s)}}function cC(n,e){const t=ya(n),r=ya(e);return jC(t,r)}function vx(n,e,t){const r=cC(e,t);if(!r){const i=ya(e).getCode(),s=ya(t).getCode();throw new Error(`No transform available between ${i} and ${s}`)}return r(n,void 0,n.length)}let GH=null;function QH(){return GH}function a6(n,e){return n}function Im(n,e){return r6&&!i2(n,[0,0])&&n[0]>=-180&&n[0]<=180&&n[1]>=-90&&n[1]<=90&&(r6=!1,aL("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),n}function TB(n,e){return n}function Yp(n,e){return n}function YH(){J7(Q7),J7(q7),NH(q7,Q7,yH,vH)}YH();const fL=new Array(6);function gh(){return[1,0,0,1,0,0]}function eI(n){return KB(n,1,0,0,1,0,0)}function PB(n,e){const t=n[0],r=n[1],i=n[2],s=n[3],l=n[4],o=n[5],f=e[0],y=e[1],x=e[2],B=e[3],O=e[4],P=e[5];return n[0]=t*f+i*y,n[1]=r*f+s*y,n[2]=t*x+i*B,n[3]=r*x+s*B,n[4]=t*O+i*P+l,n[5]=r*O+s*P+o,n}function KB(n,e,t,r,i,s,l){return n[0]=e,n[1]=t,n[2]=r,n[3]=i,n[4]=s,n[5]=l,n}function qH(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n}function wA(n,e){const t=e[0],r=e[1];return e[0]=n[0]*t+n[2]*r+n[4],e[1]=n[1]*t+n[3]*r+n[5],e}function i4(n,e,t){return PB(n,KB(fL,e,0,0,t,0,0))}function VH(n,e,t){return PB(n,KB(fL,1,0,0,1,e,t))}function em(n,e,t,r,i,s,l,o){const f=Math.sin(s),y=Math.cos(s);return n[0]=r*y,n[1]=i*f,n[2]=-r*f,n[3]=i*y,n[4]=l*r*y-o*r*f+e,n[5]=l*i*f+o*i*y+t,n}function pL(n,e){const t=$H(e);Hs(t!==0,"Transformation matrix cannot be inverted");const r=e[0],i=e[1],s=e[2],l=e[3],o=e[4],f=e[5];return n[0]=l/t,n[1]=-i/t,n[2]=-s/t,n[3]=r/t,n[4]=(s*f-l*o)/t,n[5]=-(r*f-i*o)/t,n}function $H(n){return n[0]*n[3]-n[1]*n[2]}const tI=[1e6,1e6,1e6,1e6,2,2];function HH(n){return"matrix("+n.map((t,r)=>Math.round(t*tI[r])/tI[r]).join(", ")+")"}const nI=gh(),ZH=[NaN,NaN];class mL extends yp{constructor(){super(),this.extent_=Pf(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=YF((e,t,r)=>{if(!r)return this.getSimplifiedGeometry(t);const i=this.clone();return i.applyTransform(r),i.getSimplifiedGeometry(t)})}simplifyTransformed(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}clone(){return yo()}closestPointXY(e,t,r,i){return yo()}containsXY(e,t){return this.closestPointXY(e,t,ZH,Number.MIN_VALUE)===0}getClosestPoint(e,t){return t=t||[NaN,NaN],this.closestPointXY(e[0],e[1],t,1/0),t}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return yo()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&zy(t),this.extentRevision_=this.getRevision()}return eH(this.extent_,e)}rotate(e,t){yo()}scale(e,t,r){yo()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return yo()}getType(){return yo()}applyTransform(e){yo()}intersectsExtent(e){return yo()}translate(e,t){yo()}transform(e,t){const r=ya(e),i=r.getUnits()=="tile-pixels"?function(s,l,o){const f=r.getExtent(),y=r.getWorldExtent(),x=aA(y)/aA(f);em(nI,y[0],y[3],x,-x,0,0,0);const B=z0(s,0,s.length,o,nI,l),O=cC(r,t);return O?O(B,B,o):B}:cC(r,t);return this.applyTransform(i),this}}class qg extends mL{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return vB(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return yo()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,t){this.stride=rI(e),this.layout=e,this.flatCoordinates=t}setCoordinates(e,t){yo()}setLayout(e,t,r){let i;if(e)i=rI(e);else{for(let s=0;s<r;++s){if(t.length===0){this.layout="XY",this.stride=2;return}t=t[0]}i=t.length,e=Vg(i)}this.layout=e,this.stride=i}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(e,t){const r=this.getFlatCoordinates();if(r){const i=this.getStride();sL(r,0,r.length,i,e,t,r),this.changed()}}scale(e,t,r){t===void 0&&(t=e),r||(r=Kf(this.getExtent()));const i=this.getFlatCoordinates();if(i){const s=this.getStride();cH(i,0,i.length,s,e,t,r,i),this.changed()}}translate(e,t){const r=this.getFlatCoordinates();if(r){const i=this.getStride();dH(r,0,r.length,i,e,t,r),this.changed()}}}function Vg(n){let e;return n==2?e="XY":n==3?e="XYZ":n==4&&(e="XYZM"),e}function rI(n){let e;return n=="XY"?e=2:n=="XYZ"||n=="XYM"?e=3:n=="XYZM"&&(e=4),e}function XH(n,e,t){const r=n.getFlatCoordinates();if(!r)return null;const i=n.getStride();return z0(r,0,r.length,i,e,t)}function JH(n,e,t,r){for(let i=0,s=t.length;i<s;++i)n[e++]=t[i];return e}function Cx(n,e,t,r){for(let i=0,s=t.length;i<s;++i){const l=t[i];for(let o=0;o<r;++o)n[e++]=l[o]}return e}function NC(n,e,t,r,i){i=i||[];let s=0;for(let l=0,o=t.length;l<o;++l){const f=Cx(n,e,t[l],r);i[s++]=f,e=f}return i.length=s,i}function gL(n,e,t,r,i){i=i||[];let s=0;for(let l=0,o=t.length;l<o;++l){const f=NC(n,e,t[l],r,i[s]);f.length===0&&(f[0]=e),i[s++]=f,e=f[f.length-1]}return i.length=s,i}class a2 extends mL{constructor(e){super(),this.geometries_=e,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(hl),this.changeEventsKeys_.length=0}listenGeometriesChange_(){const e=this.geometries_;for(let t=0,r=e.length;t<r;++t)this.changeEventsKeys_.push(Fs(e[t],lo.CHANGE,this.changed,this))}clone(){const e=new a2(o4(this.geometries_));return e.applyProperties(this),e}closestPointXY(e,t,r,i){if(i<Qg(this.getExtent(),e,t))return i;const s=this.geometries_;for(let l=0,o=s.length;l<o;++l)i=s[l].closestPointXY(e,t,r,i);return i}containsXY(e,t){const r=this.geometries_;for(let i=0,s=r.length;i<s;++i)if(r[i].containsXY(e,t))return!0;return!1}computeExtent(e){zy(e);const t=this.geometries_;for(let r=0,i=t.length;r<i;++r)$F(e,t[r].getExtent());return e}getGeometries(){return o4(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const t=this.geometries_;for(let r=0,i=t.length;r<i;++r)t[r].getType()===this.getType()?e=e.concat(t[r].getGeometriesArrayRecursive()):e.push(t[r]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=[],r=this.geometries_;let i=!1;for(let s=0,l=r.length;s<l;++s){const o=r[s],f=o.getSimplifiedGeometry(e);t.push(f),f!==o&&(i=!0)}return i?new a2(t):(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getType(){return"GeometryCollection"}intersectsExtent(e){const t=this.geometries_;for(let r=0,i=t.length;r<i;++r)if(t[r].intersectsExtent(e))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(e,t){const r=this.geometries_;for(let i=0,s=r.length;i<s;++i)r[i].rotate(e,t);this.changed()}scale(e,t,r){r||(r=Kf(this.getExtent()));const i=this.geometries_;for(let s=0,l=i.length;s<l;++s)i[s].scale(e,t,r);this.changed()}setGeometries(e){this.setGeometriesArray(o4(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const t=this.geometries_;for(let r=0,i=t.length;r<i;++r)t[r].applyTransform(e);this.changed()}translate(e,t){const r=this.geometries_;for(let i=0,s=r.length;i<s;++i)r[i].translate(e,t);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function o4(n){return n.map(e=>e.clone())}function yL(n,e,t,r){let i=0;const s=n[t-r],l=n[t-r+1];let o=0,f=0;for(;e<t;e+=r){const y=n[e]-s,x=n[e+1]-l;i+=f*y-o*x,o=y,f=x}return i/2}function vL(n,e,t,r){let i=0;for(let s=0,l=t.length;s<l;++s){const o=t[s];i+=yL(n,e,o,r),e=o}return i}function eZ(n,e,t,r){let i=0;for(let s=0,l=t.length;s<l;++s){const o=t[s];i+=vL(n,e,o,r),e=o[o.length-1]}return i}function iI(n,e,t,r,i,s,l){const o=n[e],f=n[e+1],y=n[t]-o,x=n[t+1]-f;let B;if(y===0&&x===0)B=e;else{const O=((i-o)*y+(s-f)*x)/(y*y+x*x);if(O>1)B=t;else if(O>0){for(let P=0;P<r;++P)l[P]=Nh(n[e+P],n[t+P],O);l.length=r;return}else B=e}for(let O=0;O<r;++O)l[O]=n[B+O];l.length=r}function RB(n,e,t,r,i){let s=n[e],l=n[e+1];for(e+=r;e<t;e+=r){const o=n[e],f=n[e+1],y=Pg(s,l,o,f);y>i&&(i=y),s=o,l=f}return i}function DB(n,e,t,r,i){for(let s=0,l=t.length;s<l;++s){const o=t[s];i=RB(n,e,o,r,i),e=o}return i}function tZ(n,e,t,r,i){for(let s=0,l=t.length;s<l;++s){const o=t[s];i=DB(n,e,o,r,i),e=o[o.length-1]}return i}function FB(n,e,t,r,i,s,l,o,f,y,x){if(e==t)return y;let B,O;if(i===0){if(O=Pg(l,o,n[e],n[e+1]),O<y){for(B=0;B<r;++B)f[B]=n[e+B];return f.length=r,O}return y}x=x||[NaN,NaN];let P=e+r;for(;P<t;)if(iI(n,P-r,P,r,l,o,x),O=Pg(l,o,x[0],x[1]),O<y){for(y=O,B=0;B<r;++B)f[B]=x[B];f.length=r,P+=r}else P+=r*Math.max((Math.sqrt(O)-Math.sqrt(y))/i|0,1);if(s&&(iI(n,t-r,e,r,l,o,x),O=Pg(l,o,x[0],x[1]),O<y)){for(y=O,B=0;B<r;++B)f[B]=x[B];f.length=r}return y}function LB(n,e,t,r,i,s,l,o,f,y,x){x=x||[NaN,NaN];for(let B=0,O=t.length;B<O;++B){const P=t[B];y=FB(n,e,P,r,i,s,l,o,f,y,x),e=P}return y}function nZ(n,e,t,r,i,s,l,o,f,y,x){x=x||[NaN,NaN];for(let B=0,O=t.length;B<O;++B){const P=t[B];y=LB(n,e,P,r,i,s,l,o,f,y,x),e=P[P.length-1]}return y}function k0(n,e,t,r,i){i=i!==void 0?i:[];let s=0;for(let l=e;l<t;l+=r)i[s++]=n.slice(l,l+r);return i.length=s,i}function dC(n,e,t,r,i){i=i!==void 0?i:[];let s=0;for(let l=0,o=t.length;l<o;++l){const f=t[l];i[s++]=k0(n,e,f,r,i[s]),e=f}return i.length=s,i}function l6(n,e,t,r,i){i=i!==void 0?i:[];let s=0;for(let l=0,o=t.length;l<o;++l){const f=t[l];i[s++]=f.length===1&&f[0]===e?[]:dC(n,e,f,r,i[s]),e=f[f.length-1]}return i.length=s,i}class hC extends qg{constructor(e,t){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}clone(){return new hC(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,r,i){return i<Qg(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(RB(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),FB(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,r,i))}getArea(){return yL(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return k0(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const t=[];return t.length=px(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new hC(t,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Cx(this.flatCoordinates,0,e,this.stride),this.changed()}}function CL(n,e,t,r,i){let s;for(e+=r;e<t;e+=r)if(s=i(n.slice(e-r,e),n.slice(e,e+r)),s)return s;return!1}function _x(n,e,t,r,i,s){return s=s??HF(Pf(),n,e,t,r),Du(i,s)?s[0]>=i[0]&&s[2]<=i[2]||s[1]>=i[1]&&s[3]<=i[3]?!0:CL(n,e,t,r,function(l,o){return tH(i,l,o)}):!1}function rZ(n,e,t,r,i){for(let s=0,l=t.length;s<l;++s){if(_x(n,e,t[s],r,i))return!0;e=t[s]}return!1}function _L(n,e,t,r,i){return!!(_x(n,e,t,r,i)||Mg(n,e,t,r,i[0],i[1])||Mg(n,e,t,r,i[0],i[3])||Mg(n,e,t,r,i[2],i[1])||Mg(n,e,t,r,i[2],i[3]))}function bL(n,e,t,r,i){if(!_L(n,e,t[0],r,i))return!1;if(t.length===1)return!0;for(let s=1,l=t.length;s<l;++s)if(rH(n,t[s-1],t[s],r,i)&&!_x(n,t[s-1],t[s],r,i))return!1;return!0}function iZ(n,e,t,r,i){for(let s=0,l=t.length;s<l;++s){const o=t[s];if(bL(n,e,o,r,i))return!0;e=o[o.length-1]}return!1}function xL(n,e,t,r){let i=n[e],s=n[e+1],l=0;for(let o=e+r;o<t;o+=r){const f=n[o],y=n[o+1];l+=Math.sqrt((f-i)*(f-i)+(y-s)*(y-s)),i=f,s=y}return l}class zg extends qg{constructor(e,t){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendCoordinate(e){Xp(this.flatCoordinates,e),this.changed()}clone(){const e=new zg(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,r,i){return i<Qg(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(RB(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),FB(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,t,r,i))}forEachSegment(e){return CL(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,t){return this.layout!="XYM"&&this.layout!="XYZM"?null:(t=t!==void 0?t:!1,e6(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t))}getCoordinates(){return k0(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,t){return n2(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,this.stride)}getLength(){return xL(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const t=[];return t.length=px(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new zg(t,"XY")}getType(){return"LineString"}intersectsExtent(e){return _x(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,this.getExtent())}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Cx(this.flatCoordinates,0,e,this.stride),this.changed()}}class fC extends qg{constructor(e,t,r){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,t);else if(t!==void 0&&r)this.setFlatCoordinates(t,e),this.ends_=r;else{const i=e,s=[],l=[];for(let f=0,y=i.length;f<y;++f){const x=i[f];Xp(s,x.getFlatCoordinates()),l.push(s.length)}const o=i.length===0?this.getLayout():i[0].getLayout();this.setFlatCoordinates(o,s),this.ends_=l}}appendLineString(e){Xp(this.flatCoordinates,e.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new fC(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,r,i){return i<Qg(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(DB(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),LB(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,t,r,i))}getCoordinateAtM(e,t,r){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(t=t!==void 0?t:!1,r=r!==void 0?r:!1,aH(this.flatCoordinates,0,this.ends_,this.stride,e,t,r))}getCoordinates(){return dC(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new zg(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,t=this.ends_,r=this.layout,i=[];let s=0;for(let l=0,o=t.length;l<o;++l){const f=t[l],y=new zg(e.slice(s,f),r);i.push(y),s=f}return i}getFlatMidpoints(){const e=[],t=this.flatCoordinates;let r=0;const i=this.ends_,s=this.stride;for(let l=0,o=i.length;l<o;++l){const f=i[l],y=n2(t,r,f,s,.5);Xp(e,y),r=f}return e}getSimplifiedGeometryInternal(e){const t=[],r=[];return t.length=oL(this.flatCoordinates,0,this.ends_,this.stride,e,t,0,r),new fC(t,"XY",r)}getType(){return"MultiLineString"}intersectsExtent(e){return rZ(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const r=NC(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=r.length===0?0:r[r.length-1],this.changed()}}class jg extends qg{constructor(e,t){super(),this.setCoordinates(e,t)}clone(){const e=new jg(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,r,i){const s=this.flatCoordinates,l=Pg(e,t,s[0],s[1]);if(l<i){const o=this.stride;for(let f=0;f<o;++f)r[f]=s[f];return r.length=o,l}return i}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return VF(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return yB(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,t){this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=JH(this.flatCoordinates,0,e,this.stride),this.changed()}}class WC extends qg{constructor(e,t){super(),t&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendPoint(e){Xp(this.flatCoordinates,e.getFlatCoordinates()),this.changed()}clone(){const e=new WC(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,r,i){if(i<Qg(this.getExtent(),e,t))return i;const s=this.flatCoordinates,l=this.stride;for(let o=0,f=s.length;o<f;o+=l){const y=Pg(e,t,s[o],s[o+1]);if(y<i){i=y;for(let x=0;x<l;++x)r[x]=s[o+x];r.length=l}}return i}getCoordinates(){return k0(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){const t=this.flatCoordinates.length/this.stride;return e<0||t<=e?null:new jg(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,t=this.layout,r=this.stride,i=[];for(let s=0,l=e.length;s<l;s+=r){const o=new jg(e.slice(s,s+r),t);i.push(o)}return i}getType(){return"MultiPoint"}intersectsExtent(e){const t=this.flatCoordinates,r=this.stride;for(let i=0,s=t.length;i<s;i+=r){const l=t[i],o=t[i+1];if(yB(e,l,o))return!0}return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Cx(this.flatCoordinates,0,e,this.stride),this.changed()}}class jm extends qg{constructor(e,t,r){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,t!==void 0&&r?(this.setFlatCoordinates(t,e),this.ends_=r):this.setCoordinates(e,t)}appendLinearRing(e){this.flatCoordinates?Xp(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new jm(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,r,i){return i<Qg(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(DB(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),LB(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,r,i))}containsXY(e,t){return CB(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}getArea(){return vL(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),r2(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,dC(t,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=Kf(this.getExtent());this.flatInteriorPoint_=_B(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new jg(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new hC(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,t=this.flatCoordinates,r=this.ends_,i=[];let s=0;for(let l=0,o=r.length;l<o;++l){const f=r[l],y=new hC(t.slice(s,f),e);i.push(y),s=f}return i}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;MB(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=r2(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],r=[];return t.length=wB(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,r),new jm(t,"XY",r)}getType(){return"Polygon"}intersectsExtent(e){return bL(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const r=NC(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=r.length===0?0:r[r.length-1],this.changed()}}function oI(n){if(Yg(n))throw new Error("Cannot create polygon from empty extent");const e=n[0],t=n[1],r=n[2],i=n[3],s=[e,t,e,i,r,i,r,t,e,t];return new jm(s,"XY",[s.length])}class pC extends qg{constructor(e,t,r){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!r&&!Array.isArray(e[0])){const i=e,s=[],l=[];for(let o=0,f=i.length;o<f;++o){const y=i[o],x=s.length,B=y.getEnds();for(let O=0,P=B.length;O<P;++O)B[O]+=x;Xp(s,y.getFlatCoordinates()),l.push(B)}t=i.length===0?this.getLayout():i[0].getLayout(),e=s,r=l}t!==void 0&&r?(this.setFlatCoordinates(t,e),this.endss_=r):this.setCoordinates(e,t)}appendPolygon(e){let t;if(!this.flatCoordinates)this.flatCoordinates=e.getFlatCoordinates().slice(),t=e.getEnds().slice(),this.endss_.push();else{const r=this.flatCoordinates.length;Xp(this.flatCoordinates,e.getFlatCoordinates()),t=e.getEnds().slice();for(let i=0,s=t.length;i<s;++i)t[i]+=r}this.endss_.push(t),this.changed()}clone(){const e=this.endss_.length,t=new Array(e);for(let i=0;i<e;++i)t[i]=this.endss_[i].slice();const r=new pC(this.flatCoordinates.slice(),this.layout,t);return r.applyProperties(this),r}closestPointXY(e,t,r,i){return i<Qg(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(tZ(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),nZ(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,t,r,i))}containsXY(e,t){return iH(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,t)}getArea(){return eZ(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),t6(t,0,this.endss_,this.stride,e)):t=this.flatCoordinates,l6(t,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=tL(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=nL(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new WC(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;rL(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=t6(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],r=[];return t.length=AH(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),t,0,r),new pC(t,"XY",r)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let t;if(e===0)t=0;else{const s=this.endss_[e-1];t=s[s.length-1]}const r=this.endss_[e].slice(),i=r[r.length-1];if(t!==0)for(let s=0,l=r.length;s<l;++s)r[s]-=t;return new jm(this.flatCoordinates.slice(t,i),this.layout,r)}getPolygons(){const e=this.layout,t=this.flatCoordinates,r=this.endss_,i=[];let s=0;for(let l=0,o=r.length;l<o;++l){const f=r[l].slice(),y=f[f.length-1];if(s!==0)for(let B=0,O=f.length;B<O;++B)f[B]-=s;const x=new jm(t.slice(s,y),e,f);i.push(x),s=y}return i}getType(){return"MultiPolygon"}intersectsExtent(e){return iZ(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const r=gL(this.flatCoordinates,0,e,this.stride,this.endss_);if(r.length===0)this.flatCoordinates.length=0;else{const i=r[r.length-1];this.flatCoordinates.length=i.length===0?0:i[i.length-1]}this.changed()}}const sI=gh();class ld{constructor(e,t,r,i,s,l){this.styleFunction,this.extent_,this.id_=l,this.type_=e,this.flatCoordinates_=t,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=r||null,this.properties_=s,this.squaredTolerance_,this.stride_=i,this.simplifiedGeometry_}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?VF(this.flatCoordinates_):vB(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=Kf(this.getExtent());this.flatInteriorPoints_=_B(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=iL(this.flatCoordinates_,this.ends_),t=tL(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=nL(this.flatCoordinates_,0,e,2,t)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=n2(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let t=0;const r=this.ends_;for(let i=0,s=r.length;i<s;++i){const l=r[i],o=n2(e,t,l,2,.5);Xp(this.flatMidpoints_,o),t=l}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,t){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){e=ya(e);const t=e.getExtent(),r=e.getWorldExtent();if(t&&r){const i=aA(r)/aA(t);em(sI,r[0],r[3],i,-i,0,0,0),z0(this.flatCoordinates_,0,this.flatCoordinates_.length,2,sI,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){var e;return new ld(this.type_,this.flatCoordinates_.slice(),(e=this.ends_)==null?void 0:e.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=YF((e,t)=>{if(e===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),t&&this.simplifiedGeometry_.applyTransform(t);const r=this.simplifiedGeometry_.getFlatCoordinates();let i;switch(this.type_){case"LineString":r.length=px(r,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,e,r,0),i=[r.length];break;case"MultiLineString":i=[],r.length=oL(r,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,e,r,0,i);break;case"Polygon":i=[],r.length=wB(r,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(e),r,0,i);break}return i&&(this.simplifiedGeometry_=new ld(this.type_,r,i,2,this.properties_,this.id_)),this.squaredTolerance_=e,this.simplifiedGeometry_}),this}}ld.prototype.getFlatCoordinates=ld.prototype.getOrientedFlatCoordinates;const fi={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4},aI={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};var lI={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function oZ(n){var x,B;var e,t=[],r=1,i;if(typeof n=="number")return{space:"rgb",values:[n>>>16,(n&65280)>>>8,n&255],alpha:1};if(typeof n=="number")return{space:"rgb",values:[n>>>16,(n&65280)>>>8,n&255],alpha:1};if(n=String(n).toLowerCase(),aI[n])t=aI[n].slice(),i="rgb";else if(n==="transparent")r=0,i="rgb",t=[0,0,0];else if(n[0]==="#"){var s=n.slice(1),l=s.length,o=l<=4;r=1,o?(t=[parseInt(s[0]+s[0],16),parseInt(s[1]+s[1],16),parseInt(s[2]+s[2],16)],l===4&&(r=parseInt(s[3]+s[3],16)/255)):(t=[parseInt(s[0]+s[1],16),parseInt(s[2]+s[3],16),parseInt(s[4]+s[5],16)],l===8&&(r=parseInt(s[6]+s[7],16)/255)),t[0]||(t[0]=0),t[1]||(t[1]=0),t[2]||(t[2]=0),i="rgb"}else if(e=/^((?:rgba?|hs[lvb]a?|hwba?|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms|oklch|oklab|color))\s*\(([^\)]*)\)/.exec(n)){var f=e[1];i=f.replace(/a$/,"");var y=i==="cmyk"?4:i==="gray"?1:3;t=e[2].trim().split(/\s*[,\/]\s*|\s+/),i==="color"&&(i=t.shift()),t=t.map(function(O,P){if(O[O.length-1]==="%")return O=parseFloat(O)/100,P===3?O:i==="rgb"?O*255:i[0]==="h"||i[0]==="l"&&!P?O*100:i==="lab"?O*125:i==="lch"?P<2?O*150:O*360:i[0]==="o"&&!P?O:i==="oklab"?O*.4:i==="oklch"?P<2?O*.4:O*360:O;if(i[P]==="h"||P===2&&i[i.length-1]==="h"){if(lI[O]!==void 0)return lI[O];if(O.endsWith("deg"))return parseFloat(O);if(O.endsWith("turn"))return parseFloat(O)*360;if(O.endsWith("grad"))return parseFloat(O)*360/400;if(O.endsWith("rad"))return parseFloat(O)*180/Math.PI}return O==="none"?0:parseFloat(O)}),r=t.length>y?t.pop():1}else/[0-9](?:\s|\/|,)/.test(n)&&(t=n.match(/([0-9]+)/g).map(function(O){return parseFloat(O)}),i=((B=(x=n.match(/([a-z])/ig))==null?void 0:x.join(""))==null?void 0:B.toLowerCase())||"rgb");return{space:i,values:t,alpha:r}}const mC={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]},s4={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(n){var e=n[0]/360,t=n[1]/100,r=n[2]/100,i,s,l,o,f,y=0;if(t===0)return f=r*255,[f,f,f];for(s=r<.5?r*(1+t):r+t-r*t,i=2*r-s,o=[0,0,0];y<3;)l=e+1/3*-(y-1),l<0?l++:l>1&&l--,f=6*l<1?i+(s-i)*6*l:2*l<1?s:3*l<2?i+(s-i)*(2/3-l)*6:i,o[y++]=f*255;return o}};mC.hsl=function(n){var e=n[0]/255,t=n[1]/255,r=n[2]/255,i=Math.min(e,t,r),s=Math.max(e,t,r),l=s-i,o,f,y;return s===i?o=0:e===s?o=(t-r)/l:t===s?o=2+(r-e)/l:r===s&&(o=4+(e-t)/l),o=Math.min(o*60,360),o<0&&(o+=360),y=(i+s)/2,s===i?f=0:y<=.5?f=l/(s+i):f=l/(2-s-i),[o,f*100,y*100]};function sZ(n){Array.isArray(n)&&n.raw&&(n=String.raw(...arguments)),n instanceof Number&&(n=+n);var e,t=oZ(n);if(!t.space)return[];const r=t.space[0]==="h"?s4.min:mC.min,i=t.space[0]==="h"?s4.max:mC.max;return e=Array(3),e[0]=Math.min(Math.max(t.values[0],r[0]),i[0]),e[1]=Math.min(Math.max(t.values[1],r[1]),i[1]),e[2]=Math.min(Math.max(t.values[2],r[2]),i[2]),t.space[0]==="h"&&(e=s4.rgb(e)),e.push(Math.min(Math.max(t.alpha,0),1)),e}var Lc={name:"xyz",min:[0,0,0],channel:["X","Y","Z"],alias:["XYZ","ciexyz","cie1931"]};Lc.whitepoint={2:{A:[109.85,100,35.585],C:[98.074,100,118.232],D50:[96.422,100,82.521],D55:[95.682,100,92.149],D65:[95.045592705167,100,108.9057750759878],D75:[94.972,100,122.638],F2:[99.187,100,67.395],F7:[95.044,100,108.755],F11:[100.966,100,64.37],E:[100,100,100]},10:{A:[111.144,100,35.2],C:[97.285,100,116.145],D50:[96.72,100,81.427],D55:[95.799,100,90.926],D65:[94.811,100,107.304],D75:[94.416,100,120.641],F2:[103.28,100,69.026],F7:[95.792,100,107.687],F11:[103.866,100,65.627],E:[100,100,100]}};Lc.max=Lc.whitepoint[2].D65;Lc.rgb=function(n,e){e=e||Lc.whitepoint[2].E;var t=n[0]/e[0],r=n[1]/e[1],i=n[2]/e[2],s,l,o;return s=t*3.240969941904521+r*-1.537383177570093+i*-.498610760293,l=t*-.96924363628087+r*1.87596750150772+i*.041555057407175,o=t*.055630079696993+r*-.20397695888897+i*1.056971514242878,s=s>.0031308?1.055*Math.pow(s,1/2.4)-.055:s=s*12.92,l=l>.0031308?1.055*Math.pow(l,1/2.4)-.055:l=l*12.92,o=o>.0031308?1.055*Math.pow(o,1/2.4)-.055:o=o*12.92,s=Math.min(Math.max(0,s),1),l=Math.min(Math.max(0,l),1),o=Math.min(Math.max(0,o),1),[s*255,l*255,o*255]};mC.xyz=function(n,e){var t=n[0]/255,r=n[1]/255,i=n[2]/255;t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92,r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92,i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92;var s=t*.41239079926595+r*.35758433938387+i*.18048078840183,l=t*.21263900587151+r*.71516867876775+i*.072192315360733,o=t*.019330818715591+r*.11919477979462+i*.95053215224966;return e=e||Lc.whitepoint[2].E,[s*e[0],l*e[1],o*e[2]]};const UB={name:"luv",min:[0,-134,-140],max:[100,224,122],channel:["lightness","u","v"],alias:["LUV","cieluv","cie1976"],xyz:function(n,e,t){var r,i,s,l,o,f,y,x,B,O,P,U,j;if(s=n[0],l=n[1],o=n[2],s===0)return[0,0,0];var N=.0011070564598794539;return e=e||"D65",t=t||2,B=Lc.whitepoint[t][e][0],O=Lc.whitepoint[t][e][1],P=Lc.whitepoint[t][e][2],U=4*B/(B+15*O+3*P),j=9*O/(B+15*O+3*P),r=l/(13*s)+U||0,i=o/(13*s)+j||0,y=s>8?O*Math.pow((s+16)/116,3):O*s*N,f=y*9*r/(4*i)||0,x=y*(12-3*r-20*i)/(4*i)||0,[f,y,x]}};Lc.luv=function(n,e,t){var r,i,s,l,o,f,y,x,B,O,P,U,j,N=.008856451679035631,Y=903.2962962962961;e=e||"D65",t=t||2,B=Lc.whitepoint[t][e][0],O=Lc.whitepoint[t][e][1],P=Lc.whitepoint[t][e][2],U=4*B/(B+15*O+3*P),j=9*O/(B+15*O+3*P),f=n[0],y=n[1],x=n[2],r=4*f/(f+15*y+3*x)||0,i=9*y/(f+15*y+3*x)||0;var H=y/O;return s=H<=N?Y*H:116*Math.pow(H,1/3)-16,l=13*s*(r-U),o=13*s*(i-j),[s,l,o]};var ML={name:"lchuv",channel:["lightness","chroma","hue"],alias:["LCHuv","cielchuv"],min:[0,0,0],max:[100,100,360],luv:function(n){var e=n[0],t=n[1],r=n[2],i,s,l;return l=r/360*2*Math.PI,i=t*Math.cos(l),s=t*Math.sin(l),[e,i,s]},xyz:function(n){return UB.xyz(ML.luv(n))}};UB.lchuv=function(n){var e=n[0],t=n[1],r=n[2],i=Math.sqrt(t*t+r*r),s=Math.atan2(r,t),l=s*360/2/Math.PI;return l<0&&(l+=360),[e,i,l]};Lc.lchuv=function(n){return UB.lchuv(Lc.luv(n))};const zB=[NaN,NaN,NaN,0];function aZ(n){return typeof n=="string"?n:NB(n)}const lZ=1024,cv={};let a4=0;function uZ(n){if(n.length===4)return n;const e=n.slice();return e[3]=1,e}function uI(n){const e=Lc.lchuv(mC.xyz(n));return e[3]=n[3],e}function AZ(n){const e=Lc.rgb(ML.xyz(n));return e[3]=n[3],e}function jB(n){if(n==="none")return zB;if(cv.hasOwnProperty(n))return cv[n];if(a4>=lZ){let t=0;for(const r in cv)(t++&3)===0&&(delete cv[r],--a4)}const e=sZ(n);if(e.length!==4)throw new Error('failed to parse "'+n+'" as color');for(const t of e)if(isNaN(t))throw new Error('failed to parse "'+n+'" as color');return wL(e),cv[n]=e,++a4,e}function By(n){return Array.isArray(n)?n:jB(n)}function wL(n){return n[0]=SA(n[0]+.5|0,0,255),n[1]=SA(n[1]+.5|0,0,255),n[2]=SA(n[2]+.5|0,0,255),n[3]=SA(n[3],0,1),n}function NB(n){let e=n[0];e!=(e|0)&&(e=e+.5|0);let t=n[1];t!=(t|0)&&(t=t+.5|0);let r=n[2];r!=(r|0)&&(r=r+.5|0);const i=n[3]===void 0?1:Math.round(n[3]*1e3)/1e3;return"rgba("+e+","+t+","+r+","+i+")"}const G0=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",cZ=G0.includes("firefox"),dZ=G0.includes("safari")&&!G0.includes("chrom");dZ&&(G0.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(G0));const hZ=G0.includes("webkit")&&!G0.includes("edge"),SL=G0.includes("macintosh"),EL=typeof devicePixelRatio<"u"?devicePixelRatio:1,BL=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,OL=typeof Image<"u"&&Image.prototype.decode,fZ=typeof createImageBitmap=="function",IL=function(){let n=!1;try{const e=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return n}();function Fu(n,e,t,r){let i;return t&&t.length?i=t.shift():BL?i=new OffscreenCanvas(n||300,e||300):i=document.createElement("canvas"),n&&(i.width=n),e&&(i.height=e),i.getContext("2d",r)}let l4;function l2(){return l4||(l4=Fu(1,1)),l4}function GC(n){const e=n.canvas;e.width=1,e.height=1,n.clearRect(0,0,1,1)}function pZ(n){let e=n.offsetWidth;const t=getComputedStyle(n);return e+=parseInt(t.marginLeft,10)+parseInt(t.marginRight,10),e}function mZ(n){let e=n.offsetHeight;const t=getComputedStyle(n);return e+=parseInt(t.marginTop,10)+parseInt(t.marginBottom,10),e}function AI(n,e){const t=e.parentNode;t&&t.replaceChild(n,e)}function kL(n){for(;n.lastChild;)n.lastChild.remove()}function gZ(n,e){const t=n.childNodes;for(let r=0;;++r){const i=t[r],s=e[r];if(!i&&!s)break;if(i!==s){if(!i){n.appendChild(s);continue}if(!s){n.removeChild(i),--r;continue}n.insertBefore(s,i)}}}class WB extends LC{constructor(e,t,r,i){super(),this.extent=e,this.pixelRatio_=r,this.resolution=t,this.state=typeof i=="function"?fi.IDLE:i,this.image_=null,this.loader=typeof i=="function"?i:null}changed(){this.dispatchEvent(lo.CHANGE)}getExtent(){return this.extent}getImage(){return this.image_}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){if(this.state==fi.IDLE&&this.loader){this.state=fi.LOADING,this.changed();const e=this.getResolution(),t=Array.isArray(e)?e[0]:e;wy(()=>this.loader(this.getExtent(),t,this.getPixelRatio())).then(r=>{"image"in r&&(this.image_=r.image),"extent"in r&&(this.extent=r.extent),"resolution"in r&&(this.resolution=r.resolution),"pixelRatio"in r&&(this.pixelRatio_=r.pixelRatio),(r instanceof HTMLImageElement||fZ&&r instanceof ImageBitmap||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement)&&(this.image_=r),this.state=fi.LOADED}).catch(r=>{this.state=fi.ERROR,console.error(r)}).finally(()=>this.changed())}}setImage(e){this.image_=e}setResolution(e){this.resolution=e}}function yZ(n,e,t){const r=n;let i=!0,s=!1,l=!1;const o=[e2(r,lo.LOAD,function(){l=!0,s||e()})];return r.src&&OL?(s=!0,r.decode().then(function(){i&&e()}).catch(function(f){i&&(l?e():t())})):o.push(e2(r,lo.ERROR,t)),function(){i=!1,o.forEach(hl)}}function vZ(n,e){return new Promise((t,r)=>{function i(){l(),t(n)}function s(){l(),r(new Error("Image load error"))}function l(){n.removeEventListener("load",i),n.removeEventListener("error",s)}n.addEventListener("load",i),n.addEventListener("error",s)})}function CZ(n,e){return e&&(n.src=e),n.src&&OL?new Promise((t,r)=>n.decode().then(()=>t(n)).catch(i=>n.complete&&n.width?t(n):r(i))):vZ(n)}class _Z{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const t in this.cache_){const r=this.cache_[t];(e++&3)===0&&!r.hasListener()&&(delete this.cache_[t],delete this.patternCache_[t],--this.cacheSize_)}}}get(e,t,r){const i=u4(e,t,r);return i in this.cache_?this.cache_[i]:null}getPattern(e,t,r){const i=u4(e,t,r);return i in this.patternCache_?this.patternCache_[i]:null}set(e,t,r,i,s){const l=u4(e,t,r),o=l in this.cache_;this.cache_[l]=i,s&&(i.getImageState()===fi.IDLE&&i.load(),i.getImageState()===fi.LOADING?i.ready().then(()=>{this.patternCache_[l]=l2().createPattern(i.getImage(1),"repeat")}):this.patternCache_[l]=l2().createPattern(i.getImage(1),"repeat")),o||++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function u4(n,e,t){const r=t?By(t):"null";return e+":"+n+":"+r}const Bf=new _Z;let dv=null;class TL extends LC{constructor(e,t,r,i,s){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=r,this.canvas_={},this.color_=s,this.imageState_=i===void 0?fi.IDLE:i,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=t,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===fi.LOADED){dv||(dv=Fu(1,1,void 0,{willReadFrequently:!0})),dv.drawImage(this.image_,0,0);try{dv.getImageData(0,0,1,1),this.tainted_=!1}catch{dv=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(lo.CHANGE)}handleImageError_(){this.imageState_=fi.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=fi.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],t=this.size_[1],r=Fu(e,t);r.fillRect(0,0,e,t),this.hitDetectionImage_=r.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===fi.IDLE){this.image_||this.initializeImage_(),this.imageState_=fi.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&CZ(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==fi.LOADED)return;const t=this.image_,r=Fu(Math.ceil(t.width*e),Math.ceil(t.height*e)),i=r.canvas;r.scale(e,e),r.drawImage(t,0,0),r.globalCompositeOperation="multiply",r.fillStyle=aZ(this.color_),r.fillRect(0,0,i.width/e,i.height/e),r.globalCompositeOperation="destination-in",r.drawImage(t,0,0),this.canvas_[e]=i}ready(){return this.ready_||(this.ready_=new Promise(e=>{if(this.imageState_===fi.LOADED||this.imageState_===fi.ERROR)e();else{const t=()=>{(this.imageState_===fi.LOADED||this.imageState_===fi.ERROR)&&(this.removeEventListener(lo.CHANGE,t),e())};this.addEventListener(lo.CHANGE,t)}})),this.ready_}}function GB(n,e,t,r,i,s){let l=e===void 0?void 0:Bf.get(e,t,i);return l||(l=new TL(n,n&&"src"in n?n.src||void 0:e,t,r,i),Bf.set(e,t,i,l,s)),s&&l&&!Bf.getPattern(e,t,i)&&Bf.set(e,t,i,l,s),l}function qp(n){return n?Array.isArray(n)?NB(n):typeof n=="object"&&"src"in n?bZ(n):n:null}function bZ(n){if(!n.offset||!n.size)return Bf.getPattern(n.src,"anonymous",n.color);const e=n.src+":"+n.offset,t=Bf.getPattern(e,void 0,n.color);if(t)return t;const r=Bf.get(n.src,"anonymous",null);if(r.getImageState()!==fi.LOADED)return null;const i=Fu(n.size[0],n.size[1]);return i.drawImage(r.getImage(1),n.offset[0],n.offset[1],n.size[0],n.size[1],0,0,n.size[0],n.size[1]),GB(i.canvas,e,void 0,fi.LOADED,n.color,!0),Bf.getPattern(e,void 0,n.color)}const V_="ol-hidden",xZ="ol-selectable",bx="ol-unselectable",QB="ol-control",cI="ol-collapsed",MZ=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),dI=["style","variant","weight","size","lineHeight","family"],PL=function(n){const e=n.match(MZ);if(!e)return null;const t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let r=0,i=dI.length;r<i;++r){const s=e[r+1];s!==void 0&&(t[dI[r]]=s)}return t.families=t.family.split(/,\s?/),t},KL="10px sans-serif",hh="#000",Oy="round",Dm=[],Fm=0,Iy="round",gC=10,yC="#000",vC="center",u2="middle",Sg=[0,0,0,0],CC=1,Dp=new yp;let H1=null,u6;const A6={},RL=function(){const e="32px ",t=["monospace","serif"],r=t.length,i="wmytzilWMYTZIL@#/&?$%10";let s,l;function o(y,x,B){let O=!0;for(let P=0;P<r;++P){const U=t[P];if(l=A2(y+" "+x+" "+e+U,i),B!=U){const j=A2(y+" "+x+" "+e+B+","+U,i);O=O&&j!=l}}return!!O}function f(){let y=!0;const x=Dp.getKeys();for(let B=0,O=x.length;B<O;++B){const P=x[B];if(Dp.get(P)<100){const[U,j,N]=P.split(`
`);o(U,j,N)?(FC(A6),H1=null,u6=void 0,Dp.set(P,100)):(Dp.set(P,Dp.get(P)+1,!0),y=!1)}}y&&(clearInterval(s),s=void 0)}return function(y){const x=PL(y);if(!x)return;const B=x.families;for(let O=0,P=B.length;O<P;++O){const U=B[O],j=x.style+`
`+x.weight+`
`+U;Dp.get(j)===void 0&&(Dp.set(j,100,!0),o(x.style,x.weight,U)||(Dp.set(j,0,!0),s===void 0&&(s=setInterval(f,32))))}}}(),wZ=function(){let n;return function(e){let t=A6[e];if(t==null){if(BL){const r=PL(e),i=DL(e,"g");t=(isNaN(Number(r.lineHeight))?1.2:Number(r.lineHeight))*(i.actualBoundingBoxAscent+i.actualBoundingBoxDescent)}else n||(n=document.createElement("div"),n.innerHTML="M",n.style.minHeight="0",n.style.maxHeight="none",n.style.height="auto",n.style.padding="0",n.style.border="none",n.style.position="absolute",n.style.display="block",n.style.left="-99999px"),n.style.font=e,document.body.appendChild(n),t=n.offsetHeight,document.body.removeChild(n);A6[e]=t}return t}}();function DL(n,e){return H1||(H1=Fu(1,1)),n!=u6&&(H1.font=n,u6=H1.font),H1.measureText(e)}function A2(n,e){return DL(n,e).width}function hI(n,e,t){if(e in t)return t[e];const r=e.split(`
`).reduce((i,s)=>Math.max(i,A2(n,s)),0);return t[e]=r,r}function SZ(n,e){const t=[],r=[],i=[];let s=0,l=0,o=0,f=0;for(let y=0,x=e.length;y<=x;y+=2){const B=e[y];if(B===`
`||y===x){s=Math.max(s,l),i.push(l),l=0,o+=f,f=0;continue}const O=e[y+1]||n.font,P=A2(O,B);t.push(P),l+=P;const U=wZ(O);r.push(U),f=Math.max(f,U)}return{width:s,height:o,widths:t,heights:r,lineWidths:i}}function EZ(n,e,t,r,i,s,l,o,f,y,x){n.save(),t!==1&&(n.globalAlpha===void 0?n.globalAlpha=B=>B.globalAlpha*=t:n.globalAlpha*=t),e&&n.transform.apply(n,e),r.contextInstructions?(n.translate(f,y),n.scale(x[0],x[1]),BZ(r,n)):x[0]<0||x[1]<0?(n.translate(f,y),n.scale(x[0],x[1]),n.drawImage(r,i,s,l,o,0,0,l,o)):n.drawImage(r,i,s,l,o,f,y,l*x[0],o*x[1]),n.restore()}function BZ(n,e){const t=n.contextInstructions;for(let r=0,i=t.length;r<i;r+=2)Array.isArray(t[r+1])?e[t[r]].apply(e,t[r+1]):e[t[r]]=t[r+1]}function fI(n){return n[0]>0&&n[1]>0}function OZ(n,e,t){return t===void 0&&(t=[0,0]),t[0]=n[0]*e+.5|0,t[1]=n[1]*e+.5|0,t}function ud(n,e){return Array.isArray(n)?n:(e===void 0?e=[n,n]:(e[0]=n,e[1]=n),e)}class xx{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=ud(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new xx({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return yo()}getImage(e){return yo()}getHitDetectionImage(){return yo()}getPixelRatio(e){return 1}getImageState(){return yo()}getImageSize(){return yo()}getOrigin(){return yo()}getSize(){return yo()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=ud(e)}listenImageChange(e){yo()}load(){yo()}unlistenImageChange(e){yo()}ready(){return Promise.resolve()}}class Mx extends xx{constructor(e){super({opacity:1,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius=e.radius,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?fi.LOADING:fi.LOADED,this.imageState_===fi.LOADING&&this.ready().then(()=>this.imageState_=fi.LOADED),this.render()}clone(){const e=this.getScale(),t=new Mx({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}getAnchor(){const e=this.size_,t=this.getDisplacement(),r=this.getScaleArray();return[e[0]/2-t[0]/r[0],e[1]/2+t[1]/r[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){var s,l;const t=(s=this.fill_)==null?void 0:s.getKey(),r=`${e},${this.angle_},${this.radius},${this.radius2_},${this.points_},${t}`+Object.values(this.renderOptions_).join(",");let i=(l=Bf.get(r,null,null))==null?void 0:l.getImage(1);if(!i){const o=this.renderOptions_,f=Math.ceil(o.size*e),y=Fu(f,f);this.draw_(o,y,e),i=y.canvas,Bf.set(r,null,null,new TL(i,void 0,null,fi.LOADED,null))}return i}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,t,r){if(t===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return t;let i=this.radius,s=this.radius2_===void 0?i:this.radius2_;if(i<s){const ne=i;i=s,s=ne}const l=this.radius2_===void 0?this.points_:this.points_*2,o=2*Math.PI/l,f=s*Math.sin(o),y=Math.sqrt(s*s-f*f),x=i-y,B=Math.sqrt(f*f+x*x),O=B/f;if(e==="miter"&&O<=r)return O*t;const P=t/2/O,U=t/2*(x/B),N=Math.sqrt((i+P)*(i+P)+U*U)-i;if(this.radius2_===void 0||e==="bevel")return N*2;const Y=i*Math.sin(o),H=Math.sqrt(i*i-Y*Y),se=s-H,V=Math.sqrt(Y*Y+se*se)/Y;if(V<=r){const ne=V*t/2-s-i;return 2*Math.max(N,ne)}return N*2}createRenderOptions(){let e=Oy,t=Iy,r=0,i=null,s=0,l,o=0;this.stroke_&&(l=qp(this.stroke_.getColor()??yC),o=this.stroke_.getWidth()??CC,i=this.stroke_.getLineDash(),s=this.stroke_.getLineDashOffset()??0,t=this.stroke_.getLineJoin()??Iy,e=this.stroke_.getLineCap()??Oy,r=this.stroke_.getMiterLimit()??gC);const f=this.calculateLineJoinSize_(t,o,r),y=Math.max(this.radius,this.radius2_||0),x=Math.ceil(2*y+f);return{strokeStyle:l,strokeWidth:o,size:x,lineCap:e,lineDash:i,lineDashOffset:s,lineJoin:t,miterLimit:r}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,t,r){if(t.scale(r,r),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_){let i=this.fill_.getColor();i===null&&(i=hh),t.fillStyle=qp(i),t.fill()}e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}createHitDetectionCanvas_(e){let t;if(this.fill_){let r=this.fill_.getColor(),i=0;typeof r=="string"&&(r=By(r)),r===null?i=1:Array.isArray(r)&&(i=r.length===4?r[3]:1),i===0&&(t=Fu(e.size,e.size),this.drawHitDetectionCanvas_(e,t))}return t?t.canvas:this.getImage(1)}createPath_(e){let t=this.points_;const r=this.radius;if(t===1/0)e.arc(0,0,r,0,2*Math.PI);else{const i=this.radius2_===void 0?r:this.radius2_;this.radius2_!==void 0&&(t*=2);const s=this.angle_-Math.PI/2,l=2*Math.PI/t;for(let o=0;o<t;o++){const f=s+o*l,y=o%2===0?r:i;e.lineTo(y*Math.cos(f),y*Math.sin(f))}e.closePath()}}drawHitDetectionCanvas_(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=hh,t.fill(),e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class QC extends Mx{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),t=new QC({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}setRadius(e){this.radius=e,this.render()}}class Pm{constructor(e){e=e||{},this.patternImage_=null,this.color_=null,e.color!==void 0&&this.setColor(e.color)}clone(){const e=this.getColor();return new Pm({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){if(e!==null&&typeof e=="object"&&"src"in e){const t=GB(null,e.src,"anonymous",void 0,e.offset?null:e.color?e.color:null,!(e.offset&&e.size));t.ready().then(()=>{this.patternImage_=null}),t.getImageState()===fi.IDLE&&t.load(),t.getImageState()===fi.LOADING&&(this.patternImage_=t)}this.color_=e}getKey(){const e=this.getColor();return e?e instanceof CanvasPattern||e instanceof CanvasGradient?Wo(e):typeof e=="object"&&"src"in e?e.src+":"+e.offset:By(e).toString():""}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}function pI(n,e,t,r){return t!==void 0&&r!==void 0?[t/n,r/e]:t!==void 0?t/n:r!==void 0?r/e:1}let c2=class FL extends xx{constructor(e){e=e||{};const t=e.opacity!==void 0?e.opacity:1,r=e.rotation!==void 0?e.rotation:0,i=e.scale!==void 0?e.scale:1,s=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:t,rotation:r,scale:i,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:s,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const l=e.img!==void 0?e.img:null;let o=e.src;Hs(!(o!==void 0&&l),"`image` and `src` cannot be provided at the same time"),(o===void 0||o.length===0)&&l&&(o=l.src||Wo(l)),Hs(o!==void 0&&o.length>0,"A defined and non-empty `src` or `image` must be provided"),Hs(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let f;if(e.src!==void 0?f=fi.IDLE:l!==void 0&&("complete"in l?l.complete?f=l.src?fi.LOADED:fi.IDLE:f=fi.LOADING:f=fi.LOADED),this.color_=e.color!==void 0?By(e.color):null,this.iconImage_=GB(l,o,this.crossOrigin_,f,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,this.initialOptions_,e.width!==void 0||e.height!==void 0){let y,x;if(e.size)[y,x]=e.size;else{const B=this.getImage(1);if(B.width&&B.height)y=B.width,x=B.height;else if(B instanceof HTMLImageElement){this.initialOptions_=e;const O=()=>{if(this.unlistenImageChange(O),!this.initialOptions_)return;const P=this.iconImage_.getSize();this.setScale(pI(P[0],P[1],e.width,e.height))};this.listenImageChange(O);return}}y!==void 0&&this.setScale(pI(y,x,e.width,e.height))}}clone(){let e,t,r;return this.initialOptions_?(t=this.initialOptions_.width,r=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new FL({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:t,height:r,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const i=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!i)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=i[0]),this.anchorYUnits_=="fraction"&&(e[1]*=i[1])}if(this.anchorOrigin_!="top-left"){if(!i)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+i[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+i[1])}this.normalizedAnchor_=e}const t=this.getDisplacement(),r=this.getScaleArray();return[e[0]-t[0]/r[0],e[1]+t[1]/r[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const t=this.getSize(),r=this.iconImage_.getSize();if(!t||!r)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=r[0]-t[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=r[1]-t[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==fi.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){const e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==fi.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(lo.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(lo.CHANGE,e)}ready(){return this.iconImage_.ready()}};class T0{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new T0({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}class Wh{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=mI,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new Wh({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(t){return t.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=mI,this.geometry_=e}setZIndex(e){this.zIndex_=e}}function IZ(n){let e;if(typeof n=="function")e=n;else{let t;Array.isArray(n)?t=n:(Hs(typeof n.getZIndex=="function","Expected an `Style` or an array of `Style`"),t=[n]),e=function(){return t}}return e}let A4=null;function LL(n,e){if(!A4){const t=new Pm({color:"rgba(255,255,255,0.4)"}),r=new T0({color:"#3399CC",width:1.25});A4=[new Wh({image:new QC({fill:t,stroke:r,radius:5}),fill:t,stroke:r})]}return A4}function mI(n){return n.getGeometry()}const kZ="#333";class wx{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.keepUpright_=e.keepUpright,this.scale_=e.scale,this.scaleArray_=ud(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new Pm({color:kZ}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new wx({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),keepUpright:this.getKeepUpright(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getKeepUpright(){return this.keepUpright_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setKeepUpright(e){this.keepUpright_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=ud(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}const fh={ADD:"add",REMOVE:"remove"},gI={LENGTH:"length"};class $_ extends gp{constructor(e,t,r){super(e),this.element=t,this.index=r}}class Vp extends yp{constructor(e,t){if(super(),this.on,this.once,this.un,t=t||{},this.unique_=!!t.unique,this.array_=e||[],this.unique_)for(let r=0,i=this.array_.length;r<i;++r)this.assertUnique_(this.array_[r],r);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let t=0,r=e.length;t<r;++t)this.push(e[t]);return this}forEach(e){const t=this.array_;for(let r=0,i=t.length;r<i;++r)e(t[r],r,t)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(gI.LENGTH)}insertAt(e,t){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new $_(fh.ADD,t,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);const t=this.getLength();return this.insertAt(t,e),this.getLength()}remove(e){const t=this.array_;for(let r=0,i=t.length;r<i;++r)if(t[r]===e)return this.removeAt(r)}removeAt(e){if(e<0||e>=this.getLength())return;const t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new $_(fh.REMOVE,t,e)),t}setAt(e,t){const r=this.getLength();if(e>=r){this.insertAt(e,t);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t,e);const i=this.array_[e];this.array_[e]=t,this.dispatchEvent(new $_(fh.REMOVE,i,e)),this.dispatchEvent(new $_(fh.ADD,t,e))}updateLength_(){this.set(gI.LENGTH,this.array_.length)}assertUnique_(e,t){for(let r=0,i=this.array_.length;r<i;++r)if(this.array_[r]===e&&r!==t)throw new Error("Duplicate item added to a unique collection")}}const Of={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"};class UL{drawCustom(e,t,r,i,s){}drawGeometry(e){}setStyle(e){}drawCircle(e,t,r){}drawFeature(e,t,r){}drawGeometryCollection(e,t,r){}drawLineString(e,t,r){}drawMultiLineString(e,t,r){}drawMultiPoint(e,t,r){}drawMultiPolygon(e,t,r){}drawPoint(e,t,r){}drawPolygon(e,t,r){}drawText(e,t,r){}setFillStrokeStyle(e,t){}setImageStyle(e,t){}setTextStyle(e,t){}}class TZ extends UL{constructor(e,t,r,i,s,l,o){super(),this.context_=e,this.pixelRatio_=t,this.extent_=r,this.transform_=i,this.transformRotation_=i?bB(Math.atan2(i[1],i[0]),10):0,this.viewRotation_=s,this.squaredTolerance_=l,this.userTransform_=o,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=gh()}drawImages_(e,t,r,i){if(!this.image_)return;const s=z0(e,t,r,i,this.transform_,this.pixelCoordinates_),l=this.context_,o=this.tmpLocalTransform_,f=l.globalAlpha;this.imageOpacity_!=1&&(l.globalAlpha=f*this.imageOpacity_);let y=this.imageRotation_;this.transformRotation_===0&&(y-=this.viewRotation_),this.imageRotateWithView_&&(y+=this.viewRotation_);for(let x=0,B=s.length;x<B;x+=2){const O=s[x]-this.imageAnchorX_,P=s[x+1]-this.imageAnchorY_;if(y!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const U=O+this.imageAnchorX_,j=P+this.imageAnchorY_;em(o,U,j,1,1,y,-U,-j),l.save(),l.transform.apply(l,o),l.translate(U,j),l.scale(this.imageScale_[0],this.imageScale_[1]),l.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),l.restore()}else l.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,O,P,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(l.globalAlpha=f)}drawText_(e,t,r,i){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const s=z0(e,t,r,i,this.transform_,this.pixelCoordinates_),l=this.context_;let o=this.textRotation_;for(this.transformRotation_===0&&(o-=this.viewRotation_),this.textRotateWithView_&&(o+=this.viewRotation_);t<r;t+=i){const f=s[t]+this.textOffsetX_,y=s[t+1]+this.textOffsetY_;o!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(l.save(),l.translate(f-this.textOffsetX_,y-this.textOffsetY_),l.rotate(o),l.translate(this.textOffsetX_,this.textOffsetY_),l.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&l.strokeText(this.text_,0,0),this.textFillState_&&l.fillText(this.text_,0,0),l.restore()):(this.textStrokeState_&&l.strokeText(this.text_,f,y),this.textFillState_&&l.fillText(this.text_,f,y))}}moveToLineTo_(e,t,r,i,s){const l=this.context_,o=z0(e,t,r,i,this.transform_,this.pixelCoordinates_);l.moveTo(o[0],o[1]);let f=o.length;s&&(f-=2);for(let y=2;y<f;y+=2)l.lineTo(o[y],o[y+1]);return s&&l.closePath(),r}drawRings_(e,t,r,i){for(let s=0,l=r.length;s<l;++s)t=this.moveToLineTo_(e,t,r[s],i,!0);return t}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Du(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=XH(e,this.transform_,this.pixelCoordinates_),r=t[2]-t[0],i=t[3]-t[1],s=Math.sqrt(r*r+i*i),l=this.context_;l.beginPath(),l.arc(t[0],t[1],s,0,2*Math.PI),this.fillState_&&l.fill(),this.strokeState_&&l.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break}}drawFeature(e,t){const r=t.getGeometryFunction()(e);r&&(this.setStyle(t),this.drawGeometry(r))}drawGeometryCollection(e){const t=e.getGeometriesArray();for(let r=0,i=t.length;r<i;++r)this.drawGeometry(t[r])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),r=e.getStride();this.image_&&this.drawImages_(t,0,t.length,r),this.text_!==""&&this.drawText_(t,0,t.length,r)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),r=e.getStride();this.image_&&this.drawImages_(t,0,t.length,r),this.text_!==""&&this.drawText_(t,0,t.length,r)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Du(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const t=this.context_,r=e.getFlatCoordinates();t.beginPath(),this.moveToLineTo_(r,0,r.length,e.getStride(),!1),t.stroke()}if(this.text_!==""){const t=e.getFlatMidpoint();this.drawText_(t,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getExtent();if(Du(this.extent_,t)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const r=this.context_,i=e.getFlatCoordinates();let s=0;const l=e.getEnds(),o=e.getStride();r.beginPath();for(let f=0,y=l.length;f<y;++f)s=this.moveToLineTo_(i,s,l[f],o,!1);r.stroke()}if(this.text_!==""){const r=e.getFlatMidpoints();this.drawText_(r,0,r.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Du(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_;t.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoint();this.drawText_(t,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Du(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_,r=e.getOrientedFlatCoordinates();let i=0;const s=e.getEndss(),l=e.getStride();t.beginPath();for(let o=0,f=s.length;o<f;++o){const y=s[o];i=this.drawRings_(r,i,y,l)}this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoints();this.drawText_(t,0,t.length,2)}}}setContextFillState_(e){const t=this.context_,r=this.contextFillState_;r?r.fillStyle!=e.fillStyle&&(r.fillStyle=e.fillStyle,t.fillStyle=e.fillStyle):(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const t=this.context_,r=this.contextStrokeState_;r?(r.lineCap!=e.lineCap&&(r.lineCap=e.lineCap,t.lineCap=e.lineCap),Q0(r.lineDash,e.lineDash)||t.setLineDash(r.lineDash=e.lineDash),r.lineDashOffset!=e.lineDashOffset&&(r.lineDashOffset=e.lineDashOffset,t.lineDashOffset=e.lineDashOffset),r.lineJoin!=e.lineJoin&&(r.lineJoin=e.lineJoin,t.lineJoin=e.lineJoin),r.lineWidth!=e.lineWidth&&(r.lineWidth=e.lineWidth,t.lineWidth=e.lineWidth),r.miterLimit!=e.miterLimit&&(r.miterLimit=e.miterLimit,t.miterLimit=e.miterLimit),r.strokeStyle!=e.strokeStyle&&(r.strokeStyle=e.strokeStyle,t.strokeStyle=e.strokeStyle)):(t.lineCap=e.lineCap,t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const t=this.context_,r=this.contextTextState_,i=e.textAlign?e.textAlign:vC;r?(r.font!=e.font&&(r.font=e.font,t.font=e.font),r.textAlign!=i&&(r.textAlign=i,t.textAlign=i),r.textBaseline!=e.textBaseline&&(r.textBaseline=e.textBaseline,t.textBaseline=e.textBaseline)):(t.font=e.font,t.textAlign=i,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:i,textBaseline:e.textBaseline})}setFillStrokeStyle(e,t){if(!e)this.fillState_=null;else{const r=e.getColor();this.fillState_={fillStyle:qp(r||hh)}}if(!t)this.strokeState_=null;else{const r=t.getColor(),i=t.getLineCap(),s=t.getLineDash(),l=t.getLineDashOffset(),o=t.getLineJoin(),f=t.getWidth(),y=t.getMiterLimit(),x=s||Dm;this.strokeState_={lineCap:i!==void 0?i:Oy,lineDash:this.pixelRatio_===1?x:x.map(B=>B*this.pixelRatio_),lineDashOffset:(l||Fm)*this.pixelRatio_,lineJoin:o!==void 0?o:Iy,lineWidth:(f!==void 0?f:CC)*this.pixelRatio_,miterLimit:y!==void 0?y:gC,strokeStyle:qp(r||yC)}}}setImageStyle(e){let t;if(!e||!(t=e.getSize())){this.image_=null;return}const r=e.getPixelRatio(this.pixelRatio_),i=e.getAnchor(),s=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=i[0]*r,this.imageAnchorY_=i[1]*r,this.imageHeight_=t[1]*r,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=s[0],this.imageOriginY_=s[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const l=e.getScaleArray();this.imageScale_=[l[0]*this.pixelRatio_/r,l[1]*this.pixelRatio_/r],this.imageWidth_=t[0]*r}setTextStyle(e){if(!e)this.text_="";else{const t=e.getFill();if(!t)this.textFillState_=null;else{const P=t.getColor();this.textFillState_={fillStyle:qp(P||hh)}}const r=e.getStroke();if(!r)this.textStrokeState_=null;else{const P=r.getColor(),U=r.getLineCap(),j=r.getLineDash(),N=r.getLineDashOffset(),Y=r.getLineJoin(),H=r.getWidth(),se=r.getMiterLimit();this.textStrokeState_={lineCap:U!==void 0?U:Oy,lineDash:j||Dm,lineDashOffset:N||Fm,lineJoin:Y!==void 0?Y:Iy,lineWidth:H!==void 0?H:CC,miterLimit:se!==void 0?se:gC,strokeStyle:qp(P||yC)}}const i=e.getFont(),s=e.getOffsetX(),l=e.getOffsetY(),o=e.getRotateWithView(),f=e.getRotation(),y=e.getScaleArray(),x=e.getText(),B=e.getTextAlign(),O=e.getTextBaseline();this.textState_={font:i!==void 0?i:KL,textAlign:B!==void 0?B:vC,textBaseline:O!==void 0?O:u2},this.text_=x!==void 0?Array.isArray(x)?x.reduce((P,U,j)=>P+=j%2?" ":U,""):x:"",this.textOffsetX_=s!==void 0?this.pixelRatio_*s:0,this.textOffsetY_=l!==void 0?this.pixelRatio_*l:0,this.textRotateWithView_=o!==void 0?o:!1,this.textRotation_=f!==void 0?f:0,this.textScale_=[this.pixelRatio_*y[0],this.pixelRatio_*y[1]]}}}const PZ=.5,zL={Point:jZ,LineString:LZ,Polygon:WZ,MultiPoint:NZ,MultiLineString:UZ,MultiPolygon:zZ,GeometryCollection:FZ,Circle:RZ};function KZ(n,e){return parseInt(Wo(n),10)-parseInt(Wo(e),10)}function c6(n,e){const t=jL(n,e);return t*t}function jL(n,e){return PZ*n/e}function RZ(n,e,t,r,i){const s=t.getFill(),l=t.getStroke();if(s||l){const f=n.getBuilder(t.getZIndex(),"Circle");f.setFillStrokeStyle(s,l),f.drawCircle(e,r,i)}const o=t.getText();if(o&&o.getText()){const f=n.getBuilder(t.getZIndex(),"Text");f.setTextStyle(o),f.drawText(e,r)}}function d2(n,e,t,r,i,s,l,o){const f=[],y=t.getImage();if(y){let O=!0;const P=y.getImageState();P==fi.LOADED||P==fi.ERROR?O=!1:P==fi.IDLE&&y.load(),O&&f.push(y.ready())}const x=t.getFill();x&&x.loading()&&f.push(x.ready());const B=f.length>0;return B&&Promise.all(f).then(()=>i(null)),DZ(n,e,t,r,s,l,o),B}function DZ(n,e,t,r,i,s,l){const o=t.getGeometryFunction()(e);if(!o)return;const f=o.simplifyTransformed(r,i);if(t.getRenderer())NL(n,f,t,e,l);else{const x=zL[f.getType()];x(n,f,t,e,l,s)}}function NL(n,e,t,r,i){if(e.getType()=="GeometryCollection"){const l=e.getGeometries();for(let o=0,f=l.length;o<f;++o)NL(n,l[o],t,r,i);return}n.getBuilder(t.getZIndex(),"Default").drawCustom(e,r,t.getRenderer(),t.getHitDetectionRenderer(),i)}function FZ(n,e,t,r,i,s){const l=e.getGeometriesArray();let o,f;for(o=0,f=l.length;o<f;++o){const y=zL[l[o].getType()];y(n,l[o],t,r,i,s)}}function LZ(n,e,t,r,i){const s=t.getStroke();if(s){const o=n.getBuilder(t.getZIndex(),"LineString");o.setFillStrokeStyle(null,s),o.drawLineString(e,r,i)}const l=t.getText();if(l&&l.getText()){const o=n.getBuilder(t.getZIndex(),"Text");o.setTextStyle(l),o.drawText(e,r,i)}}function UZ(n,e,t,r,i){const s=t.getStroke();if(s){const o=n.getBuilder(t.getZIndex(),"LineString");o.setFillStrokeStyle(null,s),o.drawMultiLineString(e,r,i)}const l=t.getText();if(l&&l.getText()){const o=n.getBuilder(t.getZIndex(),"Text");o.setTextStyle(l),o.drawText(e,r,i)}}function zZ(n,e,t,r,i){const s=t.getFill(),l=t.getStroke();if(l||s){const f=n.getBuilder(t.getZIndex(),"Polygon");f.setFillStrokeStyle(s,l),f.drawMultiPolygon(e,r,i)}const o=t.getText();if(o&&o.getText()){const f=n.getBuilder(t.getZIndex(),"Text");f.setTextStyle(o),f.drawText(e,r,i)}}function jZ(n,e,t,r,i,s){const l=t.getImage(),o=t.getText(),f=o&&o.getText(),y=s&&l&&f?{}:void 0;if(l){if(l.getImageState()!=fi.LOADED)return;const x=n.getBuilder(t.getZIndex(),"Image");x.setImageStyle(l,y),x.drawPoint(e,r,i)}if(f){const x=n.getBuilder(t.getZIndex(),"Text");x.setTextStyle(o,y),x.drawText(e,r,i)}}function NZ(n,e,t,r,i,s){const l=t.getImage(),o=l&&l.getOpacity()!==0,f=t.getText(),y=f&&f.getText(),x=s&&o&&y?{}:void 0;if(o){if(l.getImageState()!=fi.LOADED)return;const B=n.getBuilder(t.getZIndex(),"Image");B.setImageStyle(l,x),B.drawMultiPoint(e,r,i)}if(y){const B=n.getBuilder(t.getZIndex(),"Text");B.setTextStyle(f,x),B.drawText(e,r,i)}}function WZ(n,e,t,r,i){const s=t.getFill(),l=t.getStroke();if(s||l){const f=n.getBuilder(t.getZIndex(),"Polygon");f.setFillStrokeStyle(s,l),f.drawPolygon(e,r,i)}const o=t.getText();if(o&&o.getText()){const f=n.getBuilder(t.getZIndex(),"Text");f.setTextStyle(o),f.drawText(e,r,i)}}let GZ=!1;function WL(n,e,t,r,i,s,l){const o=new XMLHttpRequest;o.open("GET",typeof n=="function"?n(t,r,i):n,!0),e.getType()=="arraybuffer"&&(o.responseType="arraybuffer"),o.withCredentials=GZ,o.onload=function(f){if(!o.status||o.status>=200&&o.status<300){const y=e.getType();try{let x;y=="text"||y=="json"?x=o.responseText:y=="xml"?x=o.responseXML||o.responseText:y=="arraybuffer"&&(x=o.response),x?s(e.readFeatures(x,{extent:t,featureProjection:i}),e.readProjection(x)):l()}catch{l()}}else l()},o.onerror=l,o.send()}function yI(n,e){return function(t,r,i,s,l){WL(n,e,t,r,i,(o,f)=>{this.addFeatures(o),s!==void 0&&s(o)},l||My)}}function QZ(n,e){return[[-1/0,-1/0,1/0,1/0]]}function YZ(n,e){return[n]}function GL(n,e,t=0,r=n.length-1,i=qZ){for(;r>t;){if(r-t>600){const f=r-t+1,y=e-t+1,x=Math.log(f),B=.5*Math.exp(2*x/3),O=.5*Math.sqrt(x*B*(f-B)/f)*(y-f/2<0?-1:1),P=Math.max(t,Math.floor(e-y*B/f+O)),U=Math.min(r,Math.floor(e+(f-y)*B/f+O));GL(n,e,P,U,i)}const s=n[e];let l=t,o=r;for(hv(n,t,e),i(n[r],s)>0&&hv(n,t,r);l<o;){for(hv(n,l,o),l++,o--;i(n[l],s)<0;)l++;for(;i(n[o],s)>0;)o--}i(n[t],s)===0?hv(n,t,o):(o++,hv(n,o,r)),o<=e&&(t=o+1),e<=o&&(r=o-1)}}function hv(n,e,t){const r=n[e];n[e]=n[t],n[t]=r}function qZ(n,e){return n<e?-1:n>e?1:0}let QL=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let t=this.data;const r=[];if(!Z_(e,t))return r;const i=this.toBBox,s=[];for(;t;){for(let l=0;l<t.children.length;l++){const o=t.children[l],f=t.leaf?i(o):o;Z_(e,f)&&(t.leaf?r.push(o):d4(e,f)?this._all(o,r):s.push(o))}t=s.pop()}return r}collides(e){let t=this.data;if(!Z_(e,t))return!1;const r=[];for(;t;){for(let i=0;i<t.children.length;i++){const s=t.children[i],l=t.leaf?this.toBBox(s):s;if(Z_(e,l)){if(t.leaf||d4(e,l))return!0;r.push(s)}}t=r.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let r=0;r<e.length;r++)this.insert(e[r]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=t;else if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const r=this.data;this.data=t,t=r}this._insert(t,this.data.height-t.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=Z1([]),this}remove(e,t){if(!e)return this;let r=this.data;const i=this.toBBox(e),s=[],l=[];let o,f,y;for(;r||s.length;){if(r||(r=s.pop(),f=s[s.length-1],o=l.pop(),y=!0),r.leaf){const x=VZ(e,r.children,t);if(x!==-1)return r.children.splice(x,1),s.push(r),this._condense(s),this}!y&&!r.leaf&&d4(r,i)?(s.push(r),l.push(o),o=0,f=r,r=r.children[0]):f?(o++,r=f.children[o],y=!1):r=null}return this}toBBox(e){return e}compareMinX(e,t){return e.minX-t.minX}compareMinY(e,t){return e.minY-t.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){const r=[];for(;e;)e.leaf?t.push(...e.children):r.push(...e.children),e=r.pop();return t}_build(e,t,r,i){const s=r-t+1;let l=this._maxEntries,o;if(s<=l)return o=Z1(e.slice(t,r+1)),v1(o,this.toBBox),o;i||(i=Math.ceil(Math.log(s)/Math.log(l)),l=Math.ceil(s/Math.pow(l,i-1))),o=Z1([]),o.leaf=!1,o.height=i;const f=Math.ceil(s/l),y=f*Math.ceil(Math.sqrt(l));vI(e,t,r,y,this.compareMinX);for(let x=t;x<=r;x+=y){const B=Math.min(x+y-1,r);vI(e,x,B,f,this.compareMinY);for(let O=x;O<=B;O+=f){const P=Math.min(O+f-1,B);o.children.push(this._build(e,O,P,i-1))}}return v1(o,this.toBBox),o}_chooseSubtree(e,t,r,i){for(;i.push(t),!(t.leaf||i.length-1===r);){let s=1/0,l=1/0,o;for(let f=0;f<t.children.length;f++){const y=t.children[f],x=c4(y),B=ZZ(e,y)-x;B<l?(l=B,s=x<s?x:s,o=y):B===l&&x<s&&(s=x,o=y)}t=o||t.children[0]}return t}_insert(e,t,r){const i=r?e:this.toBBox(e),s=[],l=this._chooseSubtree(i,this.data,t,s);for(l.children.push(e),Sv(l,i);t>=0&&s[t].children.length>this._maxEntries;)this._split(s,t),t--;this._adjustParentBBoxes(i,s,t)}_split(e,t){const r=e[t],i=r.children.length,s=this._minEntries;this._chooseSplitAxis(r,s,i);const l=this._chooseSplitIndex(r,s,i),o=Z1(r.children.splice(l,r.children.length-l));o.height=r.height,o.leaf=r.leaf,v1(r,this.toBBox),v1(o,this.toBBox),t?e[t-1].children.push(o):this._splitRoot(r,o)}_splitRoot(e,t){this.data=Z1([e,t]),this.data.height=e.height+1,this.data.leaf=!1,v1(this.data,this.toBBox)}_chooseSplitIndex(e,t,r){let i,s=1/0,l=1/0;for(let o=t;o<=r-t;o++){const f=wv(e,0,o,this.toBBox),y=wv(e,o,r,this.toBBox),x=XZ(f,y),B=c4(f)+c4(y);x<s?(s=x,i=o,l=B<l?B:l):x===s&&B<l&&(l=B,i=o)}return i||r-t}_chooseSplitAxis(e,t,r){const i=e.leaf?this.compareMinX:$Z,s=e.leaf?this.compareMinY:HZ,l=this._allDistMargin(e,t,r,i),o=this._allDistMargin(e,t,r,s);l<o&&e.children.sort(i)}_allDistMargin(e,t,r,i){e.children.sort(i);const s=this.toBBox,l=wv(e,0,t,s),o=wv(e,r-t,r,s);let f=H_(l)+H_(o);for(let y=t;y<r-t;y++){const x=e.children[y];Sv(l,e.leaf?s(x):x),f+=H_(l)}for(let y=r-t-1;y>=t;y--){const x=e.children[y];Sv(o,e.leaf?s(x):x),f+=H_(o)}return f}_adjustParentBBoxes(e,t,r){for(let i=r;i>=0;i--)Sv(t[i],e)}_condense(e){for(let t=e.length-1,r;t>=0;t--)e[t].children.length===0?t>0?(r=e[t-1].children,r.splice(r.indexOf(e[t]),1)):this.clear():v1(e[t],this.toBBox)}};function VZ(n,e,t){if(!t)return e.indexOf(n);for(let r=0;r<e.length;r++)if(t(n,e[r]))return r;return-1}function v1(n,e){wv(n,0,n.children.length,e,n)}function wv(n,e,t,r,i){i||(i=Z1(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(let s=e;s<t;s++){const l=n.children[s];Sv(i,n.leaf?r(l):l)}return i}function Sv(n,e){return n.minX=Math.min(n.minX,e.minX),n.minY=Math.min(n.minY,e.minY),n.maxX=Math.max(n.maxX,e.maxX),n.maxY=Math.max(n.maxY,e.maxY),n}function $Z(n,e){return n.minX-e.minX}function HZ(n,e){return n.minY-e.minY}function c4(n){return(n.maxX-n.minX)*(n.maxY-n.minY)}function H_(n){return n.maxX-n.minX+(n.maxY-n.minY)}function ZZ(n,e){return(Math.max(e.maxX,n.maxX)-Math.min(e.minX,n.minX))*(Math.max(e.maxY,n.maxY)-Math.min(e.minY,n.minY))}function XZ(n,e){const t=Math.max(n.minX,e.minX),r=Math.max(n.minY,e.minY),i=Math.min(n.maxX,e.maxX),s=Math.min(n.maxY,e.maxY);return Math.max(0,i-t)*Math.max(0,s-r)}function d4(n,e){return n.minX<=e.minX&&n.minY<=e.minY&&e.maxX<=n.maxX&&e.maxY<=n.maxY}function Z_(n,e){return e.minX<=n.maxX&&e.minY<=n.maxY&&e.maxX>=n.minX&&e.maxY>=n.minY}function Z1(n){return{children:n,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function vI(n,e,t,r,i){const s=[e,t];for(;s.length;){if(t=s.pop(),e=s.pop(),t-e<=r)continue;const l=e+Math.ceil((t-e)/r/2)*r;GL(n,l,e,t,i),s.push(e,l,l,t)}}class CI{constructor(e){this.rbush_=new QL(e),this.items_={}}insert(e,t){const r={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(r),this.items_[Wo(t)]=r}load(e,t){const r=new Array(t.length);for(let i=0,s=t.length;i<s;i++){const l=e[i],o=t[i],f={minX:l[0],minY:l[1],maxX:l[2],maxY:l[3],value:o};r[i]=f,this.items_[Wo(o)]=f}this.rbush_.load(r)}remove(e){const t=Wo(e),r=this.items_[t];return delete this.items_[t],this.rbush_.remove(r)!==null}update(e,t){const r=this.items_[Wo(t)],i=[r.minX,r.minY,r.maxX,r.maxY];zm(i,e)||(this.remove(t),this.insert(e,t))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(e){const t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(t).map(function(i){return i.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,t){return this.forEach_(this.getInExtent(e),t)}forEach_(e,t){let r;for(let i=0,s=e.length;i<s;i++)if(r=t(e[i]),r)return r;return r}isEmpty(){return N0(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const t=this.rbush_.toJSON();return Um(t.minX,t.minY,t.maxX,t.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const t in e.items_)this.items_[t]=e.items_[t]}}class jy extends yp{constructor(e){super(),this.projection=ya(e.projection),this.attributions_=_I(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible??!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const t=this;this.viewPromise_=new Promise(function(r,i){t.viewResolver=r,t.viewRejector=i})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=_I(e),this.changed()}setState(e){this.state_=e,this.changed()}}function _I(n){return n?typeof n=="function"?n:(Array.isArray(n)||(n=[n]),e=>n):null}const _f={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};class y0 extends gp{constructor(e,t,r){super(e),this.feature=t,this.features=r}}class wb extends jy{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=My,this.format_=e.format||null,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(Hs(this.format_,"`format` must be set when `url` is set"),this.loader_=yI(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:QZ;const t=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=t?new CI:null,this.loadedExtentsRtree_=new CI,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let r,i;Array.isArray(e.features)?i=e.features:e.features&&(r=e.features,i=r.getArray()),!t&&r===void 0&&(r=new Vp(i)),i!==void 0&&this.addFeaturesInternal(i),r!==void 0&&this.bindFeaturesCollection_(r)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const t=Wo(e);if(!this.addToIndex_(t,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(t,e);const r=e.getGeometry();if(r){const i=r.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(i,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new y0(_f.ADDFEATURE,e))}setupChangeEvents_(e,t){t instanceof ld||(this.featureChangeKeys_[e]=[Fs(t,lo.CHANGE,this.handleFeatureChange_,this),Fs(t,Sy.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(e,t){let r=!0;if(t.getId()!==void 0){const i=String(t.getId());if(!(i in this.idIndex_))this.idIndex_[i]=t;else if(t instanceof ld){const s=this.idIndex_[i];s instanceof ld?Array.isArray(s)?s.push(t):this.idIndex_[i]=[s,t]:r=!1}else r=!1}return r&&(Hs(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=t),r}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const t=[],r=[],i=[];for(let s=0,l=e.length;s<l;s++){const o=e[s],f=Wo(o);this.addToIndex_(f,o)&&r.push(o)}for(let s=0,l=r.length;s<l;s++){const o=r[s],f=Wo(o);this.setupChangeEvents_(f,o);const y=o.getGeometry();if(y){const x=y.getExtent();t.push(x),i.push(o)}else this.nullGeometryFeatures_[f]=o}if(this.featuresRtree_&&this.featuresRtree_.load(t,i),this.hasListener(_f.ADDFEATURE))for(let s=0,l=r.length;s<l;s++)this.dispatchEvent(new y0(_f.ADDFEATURE,r[s]))}bindFeaturesCollection_(e){let t=!1;this.addEventListener(_f.ADDFEATURE,function(r){t||(t=!0,e.push(r.feature),t=!1)}),this.addEventListener(_f.REMOVEFEATURE,function(r){t||(t=!0,e.remove(r.feature),t=!1)}),e.addEventListener(fh.ADD,r=>{t||(t=!0,this.addFeature(r.element),t=!1)}),e.addEventListener(fh.REMOVE,r=>{t||(t=!0,this.removeFeature(r.element),t=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const r in this.featureChangeKeys_)this.featureChangeKeys_[r].forEach(hl);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(r=>{this.removeFeatureInternal(r)});for(const r in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[r])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const t=new y0(_f.CLEAR);this.dispatchEvent(t),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,t){const r=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(r,function(i){const s=i.getGeometry();if(s instanceof ld||s.intersectsCoordinate(e))return t(i)})}forEachFeatureInExtent(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureIntersectingExtent(e,t){return this.forEachFeatureInExtent(e,function(r){const i=r.getGeometry();if(i instanceof ld||i.intersectsExtent(e)){const s=t(r);if(s)return s}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),N0(this.nullGeometryFeatures_)||Xp(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const t=[];return this.forEachFeatureAtCoordinateDirect(e,function(r){t.push(r)}),t}getFeaturesInExtent(e,t){if(this.featuresRtree_){if(!(t&&t.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const i=eL(e,t);return[].concat(...i.map(s=>this.featuresRtree_.getInExtent(s)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,t){const r=e[0],i=e[1];let s=null;const l=[NaN,NaN];let o=1/0;const f=[-1/0,-1/0,1/0,1/0];return t=t||uC,this.featuresRtree_.forEachInExtent(f,function(y){if(t(y)){const x=y.getGeometry(),B=o;if(o=x instanceof ld?0:x.closestPointXY(r,i,l,o),o<B){s=y;const O=Math.sqrt(o);f[0]=r-O,f[1]=i-O,f[2]=r+O,f[3]=i+O}}}),s}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const t=this.idIndex_[e.toString()];return t!==void 0?t:null}getFeatureByUid(e){const t=this.uidIndex_[e];return t!==void 0?t:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const t=e.target,r=Wo(t),i=t.getGeometry();if(!i)r in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[r]=t);else{const l=i.getExtent();r in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[r],this.featuresRtree_&&this.featuresRtree_.insert(l,t)):this.featuresRtree_&&this.featuresRtree_.update(l,t)}const s=t.getId();if(s!==void 0){const l=s.toString();this.idIndex_[l]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[l]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[r]=t;this.changed(),this.dispatchEvent(new y0(_f.CHANGEFEATURE,t))}hasFeature(e){const t=e.getId();return t!==void 0?t in this.idIndex_:Wo(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&N0(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,t,r){const i=this.loadedExtentsRtree_,s=this.strategy_(e,t,r);for(let l=0,o=s.length;l<o;++l){const f=s[l];i.forEachInExtent(f,function(x){return Qp(x.extent,f)})||(++this.loadingExtentsCount_,this.dispatchEvent(new y0(_f.FEATURESLOADSTART)),this.loader_.call(this,f,t,r,x=>{--this.loadingExtentsCount_,this.dispatchEvent(new y0(_f.FEATURESLOADEND,void 0,x))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new y0(_f.FEATURESLOADERROR))}),i.insert(f,{extent:f.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const t=this.loadedExtentsRtree_,r=t.forEachInExtent(e,function(i){if(zm(i.extent,e))return i});r&&t.remove(r)}removeFeatures(e){let t=!1;for(let r=0,i=e.length;r<i;++r)t=this.removeFeatureInternal(e[r])||t;t&&this.changed()}removeFeature(e){if(!e)return;this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const t=Wo(e);if(!(t in this.uidIndex_))return!1;t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e);const r=this.featureChangeKeys_[t];r==null||r.forEach(hl),delete this.featureChangeKeys_[t];const i=e.getId();if(i!==void 0){const s=i.toString(),l=this.idIndex_[s];l===e?delete this.idIndex_[s]:Array.isArray(l)&&(l.splice(l.indexOf(e),1),l.length===1&&(this.idIndex_[s]=l[0]))}return delete this.uidIndex_[t],this.hasListener(_f.REMOVEFEATURE)&&this.dispatchEvent(new y0(_f.REMOVEFEATURE,e)),!0}removeFromIdIndex_(e){for(const t in this.idIndex_)if(this.idIndex_[t]===e){delete this.idIndex_[t];break}}setLoader(e){this.loader_=e}setUrl(e){Hs(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(yI(e,this.format_))}setOverlaps(e){this.overlaps_=e,this.changed()}}const Hl={ANIMATING:0,INTERACTING:1},Qi={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},X_=[Qi.FILL],P0=[Qi.STROKE],Eg=[Qi.BEGIN_PATH],bI=[Qi.CLOSE_PATH];class YC extends UL{constructor(e,t,r,i){super(),this.tolerance=e,this.maxExtent=t,this.pixelRatio=i,this.maxLineWidth=0,this.resolution=r,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const t=this.pixelRatio;return t==1?e:e.map(function(r){return r*t})}appendFlatPointCoordinates(e,t){const r=this.getBufferedMaxExtent(),i=this.tmpCoordinate_,s=this.coordinates;let l=s.length;for(let o=0,f=e.length;o<f;o+=t)i[0]=e[o],i[1]=e[o+1],Ug(r,i)&&(s[l++]=i[0],s[l++]=i[1]);return l}appendFlatLineCoordinates(e,t,r,i,s,l){const o=this.coordinates;let f=o.length;const y=this.getBufferedMaxExtent();l&&(t+=i);let x=e[t],B=e[t+1];const O=this.tmpCoordinate_;let P=!0,U,j,N;for(U=t+i;U<r;U+=i)O[0]=e[U],O[1]=e[U+1],N=ZE(y,O),N!==j?(P&&(o[f++]=x,o[f++]=B,P=!1),o[f++]=O[0],o[f++]=O[1]):N===mc.INTERSECTING?(o[f++]=O[0],o[f++]=O[1],P=!1):P=!0,x=O[0],B=O[1],j=N;return(s&&P||U===t+i)&&(o[f++]=x,o[f++]=B),f}drawCustomCoordinates_(e,t,r,i,s){for(let l=0,o=r.length;l<o;++l){const f=r[l],y=this.appendFlatLineCoordinates(e,t,f,i,!1,!1);s.push(y),t=f}return t}drawCustom(e,t,r,i,s){this.beginGeometry(e,t,s);const l=e.getType(),o=e.getStride(),f=this.coordinates.length;let y,x,B,O,P;switch(l){case"MultiPolygon":y=e.getOrientedFlatCoordinates(),O=[];const U=e.getEndss();P=0;for(let j=0,N=U.length;j<N;++j){const Y=[];P=this.drawCustomCoordinates_(y,P,U[j],o,Y),O.push(Y)}this.instructions.push([Qi.CUSTOM,f,O,e,r,l6,s]),this.hitDetectionInstructions.push([Qi.CUSTOM,f,O,e,i||r,l6,s]);break;case"Polygon":case"MultiLineString":B=[],y=l=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),P=this.drawCustomCoordinates_(y,0,e.getEnds(),o,B),this.instructions.push([Qi.CUSTOM,f,B,e,r,dC,s]),this.hitDetectionInstructions.push([Qi.CUSTOM,f,B,e,i||r,dC,s]);break;case"LineString":case"Circle":y=e.getFlatCoordinates(),x=this.appendFlatLineCoordinates(y,0,y.length,o,!1,!1),this.instructions.push([Qi.CUSTOM,f,x,e,r,k0,s]),this.hitDetectionInstructions.push([Qi.CUSTOM,f,x,e,i||r,k0,s]);break;case"MultiPoint":y=e.getFlatCoordinates(),x=this.appendFlatPointCoordinates(y,o),x>f&&(this.instructions.push([Qi.CUSTOM,f,x,e,r,k0,s]),this.hitDetectionInstructions.push([Qi.CUSTOM,f,x,e,i||r,k0,s]));break;case"Point":y=e.getFlatCoordinates(),this.coordinates.push(y[0],y[1]),x=this.coordinates.length,this.instructions.push([Qi.CUSTOM,f,x,e,r,void 0,s]),this.hitDetectionInstructions.push([Qi.CUSTOM,f,x,e,i||r,void 0,s]);break}this.endGeometry(t)}beginGeometry(e,t,r){this.beginGeometryInstruction1_=[Qi.BEGIN_GEOMETRY,t,0,e,r],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[Qi.BEGIN_GEOMETRY,t,0,e,r],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;e.reverse();let t;const r=e.length;let i,s,l=-1;for(t=0;t<r;++t)i=e[t],s=i[0],s==Qi.END_GEOMETRY?l=t:s==Qi.BEGIN_GEOMETRY&&(i[2]=t,Y$(this.hitDetectionInstructions,l,t),l=-1)}fillStyleToState(e,t={}){if(e){const r=e.getColor();t.fillPatternScale=r&&typeof r=="object"&&"src"in r?this.pixelRatio:1,t.fillStyle=qp(r||hh)}else t.fillStyle=void 0;return t}strokeStyleToState(e,t={}){if(e){const r=e.getColor();t.strokeStyle=qp(r||yC);const i=e.getLineCap();t.lineCap=i!==void 0?i:Oy;const s=e.getLineDash();t.lineDash=s?s.slice():Dm;const l=e.getLineDashOffset();t.lineDashOffset=l||Fm;const o=e.getLineJoin();t.lineJoin=o!==void 0?o:Iy;const f=e.getWidth();t.lineWidth=f!==void 0?f:CC;const y=e.getMiterLimit();t.miterLimit=y!==void 0?y:gC,t.lineWidth>this.maxLineWidth&&(this.maxLineWidth=t.lineWidth,this.bufferedMaxExtent_=null)}else t.strokeStyle=void 0,t.lineCap=void 0,t.lineDash=null,t.lineDashOffset=void 0,t.lineJoin=void 0,t.lineWidth=void 0,t.miterLimit=void 0;return t}setFillStrokeStyle(e,t){const r=this.state;this.fillStyleToState(e,r),this.strokeStyleToState(t,r)}createFill(e){const t=e.fillStyle,r=[Qi.SET_FILL_STYLE,t];return typeof t!="string"&&r.push(e.fillPatternScale),r}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[Qi.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash?this.applyPixelRatio(e.lineDash):null,e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,t){const r=e.fillStyle;(typeof r!="string"||e.currentFillStyle!=r)&&(r!==void 0&&this.instructions.push(t.call(this,e)),e.currentFillStyle=r)}updateStrokeStyle(e,t){const r=e.strokeStyle,i=e.lineCap,s=e.lineDash,l=e.lineDashOffset,o=e.lineJoin,f=e.lineWidth,y=e.miterLimit;(e.currentStrokeStyle!=r||e.currentLineCap!=i||s!=e.currentLineDash&&!Q0(e.currentLineDash,s)||e.currentLineDashOffset!=l||e.currentLineJoin!=o||e.currentLineWidth!=f||e.currentMiterLimit!=y)&&(r!==void 0&&t.call(this,e),e.currentStrokeStyle=r,e.currentLineCap=i,e.currentLineDash=s,e.currentLineDashOffset=l,e.currentLineJoin=o,e.currentLineWidth=f,e.currentMiterLimit=y)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const t=[Qi.END_GEOMETRY,e];this.instructions.push(t),this.hitDetectionInstructions.push(t)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=qF(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;L0(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class JZ extends YC{constructor(e,t,r,i){super(e,t,r,i),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,t,r){if(!this.image_||this.maxExtent&&!Ug(this.maxExtent,e.getFlatCoordinates()))return;this.beginGeometry(e,t,r);const i=e.getFlatCoordinates(),s=e.getStride(),l=this.coordinates.length,o=this.appendFlatPointCoordinates(i,s);this.instructions.push([Qi.DRAW_IMAGE,l,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Qi.DRAW_IMAGE,l,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}drawMultiPoint(e,t,r){if(!this.image_)return;this.beginGeometry(e,t,r);const i=e.getFlatCoordinates(),s=[];for(let f=0,y=i.length;f<y;f+=e.getStride())(!this.maxExtent||Ug(this.maxExtent,i.slice(f,f+2)))&&s.push(i[f],i[f+1]);const l=this.coordinates.length,o=this.appendFlatPointCoordinates(s,2);this.instructions.push([Qi.DRAW_IMAGE,l,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Qi.DRAW_IMAGE,l,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,t){const r=e.getAnchor(),i=e.getSize(),s=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=r[0],this.anchorY_=r[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=i[1],this.opacity_=e.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=i[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}class eX extends YC{constructor(e,t,r,i){super(e,t,r,i)}drawFlatCoordinates_(e,t,r,i){const s=this.coordinates.length,l=this.appendFlatLineCoordinates(e,t,r,i,!1,!1),o=[Qi.MOVE_TO_LINE_TO,s,l];return this.instructions.push(o),this.hitDetectionInstructions.push(o),r}drawLineString(e,t,r){const i=this.state,s=i.strokeStyle,l=i.lineWidth;if(s===void 0||l===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,t,r),this.hitDetectionInstructions.push([Qi.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Dm,Fm],Eg);const o=e.getFlatCoordinates(),f=e.getStride();this.drawFlatCoordinates_(o,0,o.length,f),this.hitDetectionInstructions.push(P0),this.endGeometry(t)}drawMultiLineString(e,t,r){const i=this.state,s=i.strokeStyle,l=i.lineWidth;if(s===void 0||l===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,t,r),this.hitDetectionInstructions.push([Qi.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Dm,Fm],Eg);const o=e.getEnds(),f=e.getFlatCoordinates(),y=e.getStride();let x=0;for(let B=0,O=o.length;B<O;++B)x=this.drawFlatCoordinates_(f,x,o[B],y);this.hitDetectionInstructions.push(P0),this.endGeometry(t)}finish(){const e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(P0),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(P0),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(Eg)}}class xI extends YC{constructor(e,t,r,i){super(e,t,r,i)}drawFlatCoordinatess_(e,t,r,i){const s=this.state,l=s.fillStyle!==void 0,o=s.strokeStyle!==void 0,f=r.length;this.instructions.push(Eg),this.hitDetectionInstructions.push(Eg);for(let y=0;y<f;++y){const x=r[y],B=this.coordinates.length,O=this.appendFlatLineCoordinates(e,t,x,i,!0,!o),P=[Qi.MOVE_TO_LINE_TO,B,O];this.instructions.push(P),this.hitDetectionInstructions.push(P),o&&(this.instructions.push(bI),this.hitDetectionInstructions.push(bI)),t=x}return l&&(this.instructions.push(X_),this.hitDetectionInstructions.push(X_)),o&&(this.instructions.push(P0),this.hitDetectionInstructions.push(P0)),t}drawCircle(e,t,r){const i=this.state,s=i.fillStyle,l=i.strokeStyle;if(s===void 0&&l===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,r),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([Qi.SET_FILL_STYLE,hh]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Qi.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Dm,Fm]);const o=e.getFlatCoordinates(),f=e.getStride(),y=this.coordinates.length;this.appendFlatLineCoordinates(o,0,o.length,f,!1,!1);const x=[Qi.CIRCLE,y];this.instructions.push(Eg,x),this.hitDetectionInstructions.push(Eg,x),i.fillStyle!==void 0&&(this.instructions.push(X_),this.hitDetectionInstructions.push(X_)),i.strokeStyle!==void 0&&(this.instructions.push(P0),this.hitDetectionInstructions.push(P0)),this.endGeometry(t)}drawPolygon(e,t,r){const i=this.state,s=i.fillStyle,l=i.strokeStyle;if(s===void 0&&l===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,r),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([Qi.SET_FILL_STYLE,hh]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Qi.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Dm,Fm]);const o=e.getEnds(),f=e.getOrientedFlatCoordinates(),y=e.getStride();this.drawFlatCoordinatess_(f,0,o,y),this.endGeometry(t)}drawMultiPolygon(e,t,r){const i=this.state,s=i.fillStyle,l=i.strokeStyle;if(s===void 0&&l===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,r),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([Qi.SET_FILL_STYLE,hh]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Qi.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Dm,Fm]);const o=e.getEndss(),f=e.getOrientedFlatCoordinates(),y=e.getStride();let x=0;for(let B=0,O=o.length;B<O;++B)x=this.drawFlatCoordinatess_(f,x,o[B],y);this.endGeometry(t)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const t=this.coordinates;for(let r=0,i=t.length;r<i;++r)t[r]=gg(t[r],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;e.fillStyle!==void 0&&this.updateFillStyle(e,this.createFill),e.strokeStyle!==void 0&&this.updateStrokeStyle(e,this.applyStroke)}}function tX(n,e,t,r,i){const s=[];let l=t,o=0,f=e.slice(t,2);for(;o<n&&l+i<r;){const[y,x]=f.slice(-2),B=e[l+i],O=e[l+i+1],P=Math.sqrt((B-y)*(B-y)+(O-x)*(O-x));if(o+=P,o>=n){const U=(n-o+P)/P,j=Nh(y,B,U),N=Nh(x,O,U);f.push(j,N),s.push(f),f=[j,N],o==n&&(l+=i),o=0}else if(o<n)f.push(e[l+i],e[l+i+1]),l+=i;else{const U=P-o,j=Nh(y,B,U/P),N=Nh(x,O,U/P);f.push(j,N),s.push(f),f=[j,N],o=0,l+=i}}return o>0&&s.push(f),s}function nX(n,e,t,r,i){let s=t,l=t,o=0,f=0,y=t,x,B,O,P,U,j,N,Y,H,se;for(B=t;B<r;B+=i){const re=e[B],V=e[B+1];U!==void 0&&(H=re-U,se=V-j,P=Math.sqrt(H*H+se*se),N!==void 0&&(f+=O,x=Math.acos((N*H+Y*se)/(O*P)),x>n&&(f>o&&(o=f,s=y,l=B),f=0,y=B-i)),O=P,N=H,Y=se),U=re,j=V}return f+=P,f>o?[y,B]:[s,l]}const h2={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class rX extends YC{constructor(e,t,r,i){super(e,t,r,i),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textKeepUpright_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[hh]={fillStyle:hh},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,t,r){const i=this.textFillState_,s=this.textStrokeState_,l=this.textState_;if(this.text_===""||!l||!i&&!s)return;const o=this.coordinates;let f=o.length;const y=e.getType();let x=null,B=e.getStride();if(l.placement==="line"&&(y=="LineString"||y=="MultiLineString"||y=="Polygon"||y=="MultiPolygon")){if(!Du(this.maxExtent,e.getExtent()))return;let O;if(x=e.getFlatCoordinates(),y=="LineString")O=[x.length];else if(y=="MultiLineString")O=e.getEnds();else if(y=="Polygon")O=e.getEnds().slice(0,1);else if(y=="MultiPolygon"){const N=e.getEndss();O=[];for(let Y=0,H=N.length;Y<H;++Y)O.push(N[Y][0])}this.beginGeometry(e,t,r);const P=l.repeat,U=P?void 0:l.textAlign;let j=0;for(let N=0,Y=O.length;N<Y;++N){let H;P?H=tX(P*this.resolution,x,j,O[N],B):H=[x.slice(j,O[N])];for(let se=0,re=H.length;se<re;++se){const V=H[se];let ne=0,G=V.length;if(U==null){const he=nX(l.maxAngle,V,0,V.length,2);ne=he[0],G=he[1]}for(let he=ne;he<G;he+=B)o.push(V[he],V[he+1]);const oe=o.length;j=O[N],this.drawChars_(f,oe),f=oe}}this.endGeometry(t)}else{let O=l.overflow?null:[];switch(y){case"Point":case"MultiPoint":x=e.getFlatCoordinates();break;case"LineString":x=e.getFlatMidpoint();break;case"Circle":x=e.getCenter();break;case"MultiLineString":x=e.getFlatMidpoints(),B=2;break;case"Polygon":x=e.getFlatInteriorPoint(),l.overflow||O.push(x[2]/this.resolution),B=3;break;case"MultiPolygon":const re=e.getFlatInteriorPoints();x=[];for(let V=0,ne=re.length;V<ne;V+=3)l.overflow||O.push(re[V+2]/this.resolution),x.push(re[V],re[V+1]);if(x.length===0)return;B=2;break}const P=this.appendFlatPointCoordinates(x,B);if(P===f)return;if(O&&(P-f)/2!==x.length/B){let re=f/2;O=O.filter((V,ne)=>{const G=o[(re+ne)*2]===x[ne*B]&&o[(re+ne)*2+1]===x[ne*B+1];return G||--re,G})}this.saveTextStates_();const U=l.backgroundFill?this.createFill(this.fillStyleToState(l.backgroundFill)):null,j=l.backgroundStroke?this.createStroke(this.strokeStyleToState(l.backgroundStroke)):null;this.beginGeometry(e,t,r);let N=l.padding;if(N!=Sg&&(l.scale[0]<0||l.scale[1]<0)){let re=l.padding[0],V=l.padding[1],ne=l.padding[2],G=l.padding[3];l.scale[0]<0&&(V=-V,G=-G),l.scale[1]<0&&(re=-re,ne=-ne),N=[re,V,ne,G]}const Y=this.pixelRatio;this.instructions.push([Qi.DRAW_IMAGE,f,P,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,N==Sg?Sg:N.map(function(re){return re*Y}),U,j,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,O]);const H=1/Y,se=U?U.slice(0):null;se&&(se[1]=hh),this.hitDetectionInstructions.push([Qi.DRAW_IMAGE,f,P,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[H,H],NaN,this.declutterMode_,this.declutterImageWithText_,N,se,j,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?hh:this.fillKey_,this.textOffsetX_,this.textOffsetY_,O]),this.endGeometry(t)}}saveTextStates_(){const e=this.textStrokeState_,t=this.textState_,r=this.textFillState_,i=this.strokeKey_;e&&(i in this.strokeStates||(this.strokeStates[i]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const s=this.textKey_;s in this.textStates||(this.textStates[s]={font:t.font,textAlign:t.textAlign||vC,justify:t.justify,textBaseline:t.textBaseline||u2,scale:t.scale});const l=this.fillKey_;r&&(l in this.fillStates||(this.fillStates[l]={fillStyle:r.fillStyle}))}drawChars_(e,t){const r=this.textStrokeState_,i=this.textState_,s=this.strokeKey_,l=this.textKey_,o=this.fillKey_;this.saveTextStates_();const f=this.pixelRatio,y=h2[i.textBaseline],x=this.textOffsetY_*f,B=this.text_,O=r?r.lineWidth*Math.abs(i.scale[0])/2:0;this.instructions.push([Qi.DRAW_CHARS,e,t,y,i.overflow,o,i.maxAngle,f,x,s,O*f,B,l,1,this.declutterMode_,this.textKeepUpright_]),this.hitDetectionInstructions.push([Qi.DRAW_CHARS,e,t,y,i.overflow,o&&hh,i.maxAngle,f,x,s,O*f,B,l,1/f,this.declutterMode_,this.textKeepUpright_])}setTextStyle(e,t){let r,i,s;if(!e)this.text_="";else{const l=e.getFill();l?(i=this.textFillState_,i||(i={},this.textFillState_=i),i.fillStyle=qp(l.getColor()||hh)):(i=null,this.textFillState_=i);const o=e.getStroke();if(!o)s=null,this.textStrokeState_=s;else{s=this.textStrokeState_,s||(s={},this.textStrokeState_=s);const j=o.getLineDash(),N=o.getLineDashOffset(),Y=o.getWidth(),H=o.getMiterLimit();s.lineCap=o.getLineCap()||Oy,s.lineDash=j?j.slice():Dm,s.lineDashOffset=N===void 0?Fm:N,s.lineJoin=o.getLineJoin()||Iy,s.lineWidth=Y===void 0?CC:Y,s.miterLimit=H===void 0?gC:H,s.strokeStyle=qp(o.getColor()||yC)}r=this.textState_;const f=e.getFont()||KL;RL(f);const y=e.getScaleArray();r.overflow=e.getOverflow(),r.font=f,r.maxAngle=e.getMaxAngle(),r.placement=e.getPlacement(),r.textAlign=e.getTextAlign(),r.repeat=e.getRepeat(),r.justify=e.getJustify(),r.textBaseline=e.getTextBaseline()||u2,r.backgroundFill=e.getBackgroundFill(),r.backgroundStroke=e.getBackgroundStroke(),r.padding=e.getPadding()||Sg,r.scale=y===void 0?[1,1]:y;const x=e.getOffsetX(),B=e.getOffsetY(),O=e.getRotateWithView(),P=e.getKeepUpright(),U=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=x===void 0?0:x,this.textOffsetY_=B===void 0?0:B,this.textRotateWithView_=O===void 0?!1:O,this.textKeepUpright_=P===void 0?!0:P,this.textRotation_=U===void 0?0:U,this.strokeKey_=s?(typeof s.strokeStyle=="string"?s.strokeStyle:Wo(s.strokeStyle))+s.lineCap+s.lineDashOffset+"|"+s.lineWidth+s.lineJoin+s.miterLimit+"["+s.lineDash.join()+"]":"",this.textKey_=r.font+r.scale+(r.textAlign||"?")+(r.repeat||"?")+(r.justify||"?")+(r.textBaseline||"?"),this.fillKey_=i&&i.fillStyle?typeof i.fillStyle=="string"?i.fillStyle:"|"+Wo(i.fillStyle):""}this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}const iX={Circle:xI,Default:YC,Image:JZ,LineString:eX,Polygon:xI,Text:rX};class YL{constructor(e,t,r,i){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=i,this.resolution_=r,this.buildersByZIndex_={}}finish(){const e={};for(const t in this.buildersByZIndex_){e[t]=e[t]||{};const r=this.buildersByZIndex_[t];for(const i in r){const s=r[i].finish();e[t][i]=s}}return e}getBuilder(e,t){const r=e!==void 0?e.toString():"0";let i=this.buildersByZIndex_[r];i===void 0&&(i={},this.buildersByZIndex_[r]=i);let s=i[t];if(s===void 0){const l=iX[t];s=new l(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),i[t]=s}return s}}function oX(n,e,t,r,i,s,l,o,f,y,x,B,O=!0){let P=n[e],U=n[e+1],j=0,N=0,Y=0,H=0;function se(){j=P,N=U,e+=r,P=n[e],U=n[e+1],H+=Y,Y=Math.sqrt((P-j)*(P-j)+(U-N)*(U-N))}do se();while(e<t-r&&H+Y<s);let re=Y===0?0:(s-H)/Y;const V=Nh(j,P,re),ne=Nh(N,U,re),G=e-r,oe=H,he=s+o*f(y,i,x);for(;e<t-r&&H+Y<he;)se();re=Y===0?0:(he-H)/Y;const fe=Nh(j,P,re),Ee=Nh(N,U,re);let me=!1;if(O)if(B){const Ze=[V,ne,fe,Ee];sL(Ze,0,4,2,B,Ze,Ze),me=Ze[0]>Ze[2]}else me=V>fe;const Se=Math.PI,Ke=[],xe=G+r===e;e=G,Y=0,H=oe,P=n[e],U=n[e+1];let at;if(xe){se(),at=Math.atan2(U-N,P-j),me&&(at+=at>0?-Se:Se);const Ze=(fe+V)/2,Je=(Ee+ne)/2;return Ke[0]=[Ze,Je,(he-s)/2,at,i],Ke}i=i.replace(/\n/g," ");for(let Ze=0,Je=i.length;Ze<Je;){se();let Ne=Math.atan2(U-N,P-j);if(me&&(Ne+=Ne>0?-Se:Se),at!==void 0){let yt=Ne-at;if(yt+=yt>Se?-2*Se:yt<-Se?2*Se:0,Math.abs(yt)>l)return null}at=Ne;const we=Ze;let De=0;for(;Ze<Je;++Ze){const yt=me?Je-Ze-1:Ze,Ft=o*f(y,i[yt],x);if(e+r<t&&H+Y<s+De+Ft/2)break;De+=Ft}if(Ze===we)continue;const He=me?i.substring(Je-we,Je-Ze):i.substring(we,Ze);re=Y===0?0:(s+De/2-H)/Y;const bt=Nh(j,P,re),Yt=Nh(N,U,re);Ke.push([bt,Yt,De/2,Ne,He]),s+=De}return Ke}class YB{constructor(){Kn(this,"pushMethodArgs_",(...e)=>(this.instructions_[this.zIndex+this.offset_].push(e),this));this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(l2(),{get:(e,t)=>{if(typeof l2()[t]=="function")return this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(t),this.pushMethodArgs_},set:(e,t,r)=>(this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(t,r),!0)})}pushFunction(e){this.instructions_[this.zIndex+this.offset_].push(e)}getContext(){return this.context_}draw(e){this.instructions_.forEach(t=>{for(let r=0,i=t.length;r<i;++r){const s=t[r];if(typeof s=="function"){s(e);continue}const l=t[++r];if(typeof e[s]=="function")e[s](...l);else{if(typeof l=="function"){e[s]=l(e);continue}e[s]=l}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}const C1=Pf(),v0=[],Em=[],Bm=[],C0=[];function MI(n){return n[3].declutterBox}const wI=new RegExp("[-----]");function h4(n,e){return e==="start"?e=wI.test(n)?"right":"left":e==="end"&&(e=wI.test(n)?"left":"right"),h2[e]}function sX(n,e,t){return t>0&&n.push(`
`,""),n.push(e,""),n}class aX{constructor(e,t,r,i,s){this.overlaps=r,this.pixelRatio=t,this.resolution=e,this.alignAndScaleFill_,this.instructions=i.instructions,this.coordinates=i.coordinates,this.coordinateCache_={},this.renderedTransform_=gh(),this.hitDetectionInstructions=i.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=i.fillStates||{},this.strokeStates=i.strokeStates||{},this.textStates=i.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=s?new YB:null}getZIndexContext(){return this.zIndexContext_}createLabel(e,t,r,i){const s=e+t+r+i;if(this.labels_[s])return this.labels_[s];const l=i?this.strokeStates[i]:null,o=r?this.fillStates[r]:null,f=this.textStates[t],y=this.pixelRatio,x=[f.scale[0]*y,f.scale[1]*y],B=f.justify?h2[f.justify]:h4(Array.isArray(e)?e[0]:e,f.textAlign||vC),O=i&&l.lineWidth?l.lineWidth:0,P=Array.isArray(e)?e:String(e).split(`
`).reduce(sX,[]),{width:U,height:j,widths:N,heights:Y,lineWidths:H}=SZ(f,P),se=U+O,re=[],V=(se+2)*x[0],ne=(j+O)*x[1],G={width:V<0?Math.floor(V):Math.ceil(V),height:ne<0?Math.floor(ne):Math.ceil(ne),contextInstructions:re};(x[0]!=1||x[1]!=1)&&re.push("scale",x),i&&(re.push("strokeStyle",l.strokeStyle),re.push("lineWidth",O),re.push("lineCap",l.lineCap),re.push("lineJoin",l.lineJoin),re.push("miterLimit",l.miterLimit),re.push("setLineDash",[l.lineDash]),re.push("lineDashOffset",l.lineDashOffset)),r&&re.push("fillStyle",o.fillStyle),re.push("textBaseline","middle"),re.push("textAlign","center");const oe=.5-B;let he=B*se+oe*O;const fe=[],Ee=[];let me=0,Se=0,Ke=0,xe=0,at;for(let Ze=0,Je=P.length;Ze<Je;Ze+=2){const Ne=P[Ze];if(Ne===`
`){Se+=me,me=0,he=B*se+oe*O,++xe;continue}const we=P[Ze+1]||f.font;we!==at&&(i&&fe.push("font",we),r&&Ee.push("font",we),at=we),me=Math.max(me,Y[Ke]);const De=[Ne,he+oe*N[Ke]+B*(N[Ke]-H[xe]),.5*(O+me)+Se];he+=N[Ke],i&&fe.push("strokeText",De),r&&Ee.push("fillText",De),++Ke}return Array.prototype.push.apply(re,fe),Array.prototype.push.apply(re,Ee),this.labels_[s]=G,G}replayTextBackground_(e,t,r,i,s,l,o){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,r),e.lineTo.apply(e,i),e.lineTo.apply(e,s),e.lineTo.apply(e,t),l&&(this.alignAndScaleFill_=l[2],e.fillStyle=l[1],this.fill_(e)),o&&(this.setStrokeStyle_(e,o),e.stroke())}calculateImageOrLabelDimensions_(e,t,r,i,s,l,o,f,y,x,B,O,P,U,j,N){o*=O[0],f*=O[1];let Y=r-o,H=i-f;const se=s+y>e?e-y:s,re=l+x>t?t-x:l,V=U[3]+se*O[0]+U[1],ne=U[0]+re*O[1]+U[2],G=Y-U[3],oe=H-U[0];(j||B!==0)&&(v0[0]=G,C0[0]=G,v0[1]=oe,Em[1]=oe,Em[0]=G+V,Bm[0]=Em[0],Bm[1]=oe+ne,C0[1]=Bm[1]);let he;return B!==0?(he=em(gh(),r,i,1,1,B,-r,-i),wA(he,v0),wA(he,Em),wA(he,Bm),wA(he,C0),Um(Math.min(v0[0],Em[0],Bm[0],C0[0]),Math.min(v0[1],Em[1],Bm[1],C0[1]),Math.max(v0[0],Em[0],Bm[0],C0[0]),Math.max(v0[1],Em[1],Bm[1],C0[1]),C1)):Um(Math.min(G,G+V),Math.min(oe,oe+ne),Math.max(G,G+V),Math.max(oe,oe+ne),C1),P&&(Y=Math.round(Y),H=Math.round(H)),{drawImageX:Y,drawImageY:H,drawImageW:se,drawImageH:re,originX:y,originY:x,declutterBox:{minX:C1[0],minY:C1[1],maxX:C1[2],maxY:C1[3],value:N},canvasTransform:he,scale:O}}replayImageOrLabel_(e,t,r,i,s,l,o){const f=!!(l||o),y=i.declutterBox,x=o?o[2]*i.scale[0]/2:0;return y.minX-x<=t[0]&&y.maxX+x>=0&&y.minY-x<=t[1]&&y.maxY+x>=0&&(f&&this.replayTextBackground_(e,v0,Em,Bm,C0,l,o),EZ(e,i.canvasTransform,s,r,i.originX,i.originY,i.drawImageW,i.drawImageH,i.drawImageX,i.drawImageY,i.scale)),!0}fill_(e){const t=this.alignAndScaleFill_;if(t){const r=wA(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;e.save(),e.translate(r[0]%i,r[1]%i),t!==1&&e.scale(t,t),e.rotate(this.viewRotation_)}e.fill(),t&&e.restore()}setStrokeStyle_(e,t){e.strokeStyle=t[1],e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.lineDashOffset=t[7],e.setLineDash(t[6])}drawLabelWithPointPlacement_(e,t,r,i){const s=this.textStates[t],l=this.createLabel(e,t,i,r),o=this.strokeStates[r],f=this.pixelRatio,y=h4(Array.isArray(e)?e[0]:e,s.textAlign||vC),x=h2[s.textBaseline||u2],B=o&&o.lineWidth?o.lineWidth:0,O=l.width/f-2*s.scale[0],P=y*O+2*(.5-y)*B,U=x*l.height/f+2*(.5-x)*B;return{label:l,anchorX:P,anchorY:U}}execute_(e,t,r,i,s,l,o,f){const y=this.zIndexContext_;let x;this.pixelCoordinates_&&Q0(r,this.renderedTransform_)?x=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),x=z0(this.coordinates,0,this.coordinates.length,2,r,this.pixelCoordinates_),qH(this.renderedTransform_,r));let B=0;const O=i.length;let P=0,U,j,N,Y,H,se,re,V,ne,G,oe,he,fe,Ee=0,me=0;const Se=this.coordinateCache_,Ke=this.viewRotation_,xe=Math.round(Math.atan2(-r[1],r[0])*1e12)/1e12,at={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:Ke},Ze=this.instructions!=i||this.overlaps?0:200;let Je,Ne,we,De;for(;B<O;){const He=i[B];switch(He[0]){case Qi.BEGIN_GEOMETRY:Je=He[1],De=He[3],Je.getGeometry()?o!==void 0&&!Du(o,De.getExtent())?B=He[2]+1:++B:B=He[2],y&&(y.zIndex=He[4]);break;case Qi.BEGIN_PATH:Ee>Ze&&(this.fill_(e),Ee=0),me>Ze&&(e.stroke(),me=0),!Ee&&!me&&(e.beginPath(),H=NaN,se=NaN),++B;break;case Qi.CIRCLE:P=He[1];const Yt=x[P],yt=x[P+1],Ft=x[P+2],Pt=x[P+3],Ue=Ft-Yt,Pe=Pt-yt,Be=Math.sqrt(Ue*Ue+Pe*Pe);e.moveTo(Yt+Be,yt),e.arc(Yt,yt,Be,0,2*Math.PI,!0),++B;break;case Qi.CLOSE_PATH:e.closePath(),++B;break;case Qi.CUSTOM:P=He[1],U=He[2];const it=He[3],_t=He[4],pt=He[5];at.geometry=it,at.feature=Je,B in Se||(Se[B]=[]);const Lt=Se[B];pt?pt(x,P,U,2,Lt):(Lt[0]=x[P],Lt[1]=x[P+1],Lt.length=2),y&&(y.zIndex=He[6]),_t(Lt,at),++B;break;case Qi.DRAW_IMAGE:P=He[1],U=He[2],ne=He[3],j=He[4],N=He[5];let nn=He[6];const Kt=He[7],vn=He[8],Gn=He[9],tn=He[10];let dr=He[11];const Pn=He[12];let pn=He[13];Y=He[14]||"declutter";const $n=He[15];if(!ne&&He.length>=20){G=He[19],oe=He[20],he=He[21],fe=He[22];const Gt=this.drawLabelWithPointPlacement_(G,oe,he,fe);ne=Gt.label,He[3]=ne;const zt=He[23];j=(Gt.anchorX-zt)*this.pixelRatio,He[4]=j;const on=He[24];N=(Gt.anchorY-on)*this.pixelRatio,He[5]=N,nn=ne.height,He[6]=nn,pn=ne.width,He[13]=pn}let lr;He.length>25&&(lr=He[25]);let vr,Zn,Ge;He.length>17?(vr=He[16],Zn=He[17],Ge=He[18]):(vr=Sg,Zn=null,Ge=null),tn&&xe?dr+=Ke:!tn&&!xe&&(dr-=Ke);let ce=0;for(;P<U;P+=2){if(lr&&lr[ce++]<pn/this.pixelRatio)continue;const Gt=this.calculateImageOrLabelDimensions_(ne.width,ne.height,x[P],x[P+1],pn,nn,j,N,vn,Gn,dr,Pn,s,vr,!!Zn||!!Ge,Je),zt=[e,t,ne,Gt,Kt,Zn,Ge];if(f){let on,jt,Dn;if($n){const Jn=U-P;if(!$n[Jn]){$n[Jn]={args:zt,declutterMode:Y};continue}const un=$n[Jn];on=un.args,jt=un.declutterMode,delete $n[Jn],Dn=MI(on)}let rr,Br;if(on&&(jt!=="declutter"||!f.collides(Dn))&&(rr=!0),(Y!=="declutter"||!f.collides(Gt.declutterBox))&&(Br=!0),jt==="declutter"&&Y==="declutter"){const Jn=rr&&Br;rr=Jn,Br=Jn}rr&&(jt!=="none"&&f.insert(Dn),this.replayImageOrLabel_.apply(this,on)),Br&&(Y!=="none"&&f.insert(Gt.declutterBox),this.replayImageOrLabel_.apply(this,zt))}else this.replayImageOrLabel_.apply(this,zt)}++B;break;case Qi.DRAW_CHARS:const pe=He[1],nt=He[2],wt=He[3],Ht=He[4];fe=He[5];const sn=He[6],Hn=He[7],Ve=He[8];he=He[9];const J=He[10];G=He[11],oe=He[12];const ve=[He[13],He[13]];Y=He[14]||"declutter";const p=He[15],Fe=this.textStates[oe],Qe=Fe.font,rt=[Fe.scale[0]*Hn,Fe.scale[1]*Hn];let ct;Qe in this.widths_?ct=this.widths_[Qe]:(ct={},this.widths_[Qe]=ct);const dt=xL(x,pe,nt,2),qt=Math.abs(rt[0])*hI(Qe,G,ct);if(Ht||qt<=dt){const Gt=this.textStates[oe].textAlign,zt=(dt-qt)*h4(G,Gt),on=oX(x,pe,nt,2,G,zt,sn,Math.abs(rt[0]),hI,Qe,ct,xe?0:this.viewRotation_,p);e:if(on){const jt=[];let Dn,rr,Br,Jn,un;if(he)for(Dn=0,rr=on.length;Dn<rr;++Dn){un=on[Dn],Br=un[4],Jn=this.createLabel(Br,oe,"",he),j=un[2]+(rt[0]<0?-J:J),N=wt*Jn.height+(.5-wt)*2*J*rt[1]/rt[0]-Ve;const er=this.calculateImageOrLabelDimensions_(Jn.width,Jn.height,un[0],un[1],Jn.width,Jn.height,j,N,0,0,un[3],ve,!1,Sg,!1,Je);if(f&&Y==="declutter"&&f.collides(er.declutterBox))break e;jt.push([e,t,Jn,er,1,null,null])}if(fe)for(Dn=0,rr=on.length;Dn<rr;++Dn){un=on[Dn],Br=un[4],Jn=this.createLabel(Br,oe,fe,""),j=un[2],N=wt*Jn.height-Ve;const er=this.calculateImageOrLabelDimensions_(Jn.width,Jn.height,un[0],un[1],Jn.width,Jn.height,j,N,0,0,un[3],ve,!1,Sg,!1,Je);if(f&&Y==="declutter"&&f.collides(er.declutterBox))break e;jt.push([e,t,Jn,er,1,null,null])}f&&Y!=="none"&&f.load(jt.map(MI));for(let er=0,fr=jt.length;er<fr;++er)this.replayImageOrLabel_.apply(this,jt[er])}}++B;break;case Qi.END_GEOMETRY:if(l!==void 0){Je=He[1];const Gt=l(Je,De,Y);if(Gt)return Gt}++B;break;case Qi.FILL:Ze?Ee++:this.fill_(e),++B;break;case Qi.MOVE_TO_LINE_TO:for(P=He[1],U=He[2],Ne=x[P],we=x[P+1],e.moveTo(Ne,we),H=Ne+.5|0,se=we+.5|0,P+=2;P<U;P+=2)Ne=x[P],we=x[P+1],re=Ne+.5|0,V=we+.5|0,(P==U-2||re!==H||V!==se)&&(e.lineTo(Ne,we),H=re,se=V);++B;break;case Qi.SET_FILL_STYLE:this.alignAndScaleFill_=He[2],Ee&&(this.fill_(e),Ee=0,me&&(e.stroke(),me=0)),e.fillStyle=He[1],++B;break;case Qi.SET_STROKE_STYLE:me&&(e.stroke(),me=0),this.setStrokeStyle_(e,He),++B;break;case Qi.STROKE:Ze?me++:e.stroke(),++B;break;default:++B;break}}Ee&&this.fill_(e),me&&e.stroke()}execute(e,t,r,i,s,l){this.viewRotation_=i,this.execute_(e,t,r,this.instructions,s,void 0,void 0,l)}executeHitDetection(e,t,r,i,s){return this.viewRotation_=r,this.execute_(e,[e.canvas.width,e.canvas.height],t,this.hitDetectionInstructions,!0,i,s)}}const ry=["Polygon","Circle","LineString","Image","Text","Default"],f2=["Image","Text"],lX=ry.filter(n=>!f2.includes(n));class qL{constructor(e,t,r,i,s,l,o){this.maxExtent_=e,this.overlaps_=i,this.pixelRatio_=r,this.resolution_=t,this.renderBuffer_=l,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=gh(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(s,o)}clip(e,t){const r=this.getClipCoords(t);e.beginPath(),e.moveTo(r[0],r[1]),e.lineTo(r[2],r[3]),e.lineTo(r[4],r[5]),e.lineTo(r[6],r[7]),e.clip()}createExecutors_(e,t){for(const r in e){let i=this.executorsByZIndex_[r];i===void 0&&(i={},this.executorsByZIndex_[r]=i);const s=e[r];for(const l in s){const o=s[l];i[l]=new aX(this.resolution_,this.pixelRatio_,this.overlaps_,o,t)}}}hasExecutors(e){for(const t in this.executorsByZIndex_){const r=this.executorsByZIndex_[t];for(let i=0,s=e.length;i<s;++i)if(e[i]in r)return!0}return!1}forEachFeatureAtCoordinate(e,t,r,i,s,l){i=Math.round(i);const o=i*2+1,f=em(this.hitDetectionTransform_,i+.5,i+.5,1/t,-1/t,-r,-e[0],-e[1]),y=!this.hitDetectionContext_;y&&(this.hitDetectionContext_=Fu(o,o,void 0,{willReadFrequently:!0}));const x=this.hitDetectionContext_;x.canvas.width!==o||x.canvas.height!==o?(x.canvas.width=o,x.canvas.height=o):y||x.clearRect(0,0,o,o);let B;this.renderBuffer_!==void 0&&(B=Pf(),Vv(B,e),L0(B,t*(this.renderBuffer_+i),B));const O=uX(i);let P;function U(V,ne,G){const oe=x.getImageData(0,0,o,o).data;for(let he=0,fe=O.length;he<fe;he++)if(oe[O[he]]>0){if(!l||G==="none"||P!=="Image"&&P!=="Text"||l.includes(V)){const Ee=(O[he]-3)/4,me=i-Ee%o,Se=i-(Ee/o|0),Ke=s(V,ne,me*me+Se*Se);if(Ke)return Ke}x.clearRect(0,0,o,o);break}}const j=Object.keys(this.executorsByZIndex_).map(Number);j.sort(Rm);let N,Y,H,se,re;for(N=j.length-1;N>=0;--N){const V=j[N].toString();for(H=this.executorsByZIndex_[V],Y=ry.length-1;Y>=0;--Y)if(P=ry[Y],se=H[P],se!==void 0&&(re=se.executeHitDetection(x,f,r,U,B),re))return re}}getClipCoords(e){const t=this.maxExtent_;if(!t)return null;const r=t[0],i=t[1],s=t[2],l=t[3],o=[r,i,r,l,s,l,s,i];return z0(o,0,8,2,e,o),o}isEmpty(){return N0(this.executorsByZIndex_)}execute(e,t,r,i,s,l,o){const f=Object.keys(this.executorsByZIndex_).map(Number);f.sort(o?Q$:Rm),l=l||ry;const y=ry.length;for(let x=0,B=f.length;x<B;++x){const O=f[x].toString(),P=this.executorsByZIndex_[O];for(let U=0,j=l.length;U<j;++U){const N=l[U],Y=P[N];if(Y!==void 0){const H=o===null?void 0:Y.getZIndexContext(),se=H?H.getContext():e,re=this.maxExtent_&&N!=="Image"&&N!=="Text";if(re&&(se.save(),this.clip(se,r)),!H||N==="Text"||N==="Image"?Y.execute(se,t,r,i,s,o):H.pushFunction(V=>Y.execute(V,t,r,i,s,o)),re&&se.restore(),H){H.offset();const V=f[x]*y+U;this.deferredZIndexContexts_[V]||(this.deferredZIndexContexts_[V]=[]),this.deferredZIndexContexts_[V].push(H)}}}}this.renderedContext_=e}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const e=this.deferredZIndexContexts_,t=Object.keys(e).map(Number).sort(Rm);for(let r=0,i=t.length;r<i;++r)e[t[r]].forEach(s=>{s.draw(this.renderedContext_),s.clear()}),e[t[r]].length=0}}const f4={};function uX(n){if(f4[n]!==void 0)return f4[n];const e=n*2+1,t=n*n,r=new Array(t+1);for(let s=0;s<=n;++s)for(let l=0;l<=n;++l){const o=s*s+l*l;if(o>t)break;let f=r[o];f||(f=[],r[o]=f),f.push(((n+s)*e+(n+l))*4+3),s>0&&f.push(((n-s)*e+(n+l))*4+3),l>0&&(f.push(((n+s)*e+(n-l))*4+3),s>0&&f.push(((n-s)*e+(n-l))*4+3))}const i=[];for(let s=0,l=r.length;s<l;++s)r[s]&&i.push(...r[s]);return f4[n]=i,i}const Yh=.5;function VL(n,e,t,r,i,s,l,o,f){const y=f?TB(i):i,x=n[0]*Yh,B=n[1]*Yh,O=Fu(x,B);O.imageSmoothingEnabled=!1;const P=O.canvas,U=new TZ(O,Yh,i,null,l,o,f?jC(QH(),f):null),j=t.length,N=Math.floor((256*256*256-1)/j),Y={};for(let se=1;se<=j;++se){const re=t[se-1],V=re.getStyleFunction()||r;if(!V)continue;let ne=V(re,s);if(!ne)continue;Array.isArray(ne)||(ne=[ne]);const oe=(se*N).toString(16).padStart(7,"#00000");for(let he=0,fe=ne.length;he<fe;++he){const Ee=ne[he],me=Ee.getGeometryFunction()(re);if(!me||!Du(y,me.getExtent()))continue;const Se=Ee.clone(),Ke=Se.getFill();Ke&&Ke.setColor(oe);const xe=Se.getStroke();xe&&(xe.setColor(oe),xe.setLineDash(null)),Se.setText(void 0);const at=Ee.getImage();if(at){const we=at.getImageSize();if(!we)continue;const De=Fu(we[0],we[1],void 0,{alpha:!1}),He=De.canvas;De.fillStyle=oe,De.fillRect(0,0,He.width,He.height),Se.setImage(new c2({img:He,anchor:at.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:at.getOrigin(),opacity:1,size:at.getSize(),scale:at.getScale(),rotation:at.getRotation(),rotateWithView:at.getRotateWithView()}))}const Ze=Se.getZIndex()||0;let Je=Y[Ze];Je||(Je={},Y[Ze]=Je,Je.Polygon=[],Je.Circle=[],Je.LineString=[],Je.Point=[]);const Ne=me.getType();if(Ne==="GeometryCollection"){const we=me.getGeometriesArrayRecursive();for(let De=0,He=we.length;De<He;++De){const bt=we[De];Je[bt.getType().replace("Multi","")].push(bt,Se)}}else Je[Ne.replace("Multi","")].push(me,Se)}}const H=Object.keys(Y).map(Number).sort(Rm);for(let se=0,re=H.length;se<re;++se){const V=Y[H[se]];for(const ne in V){const G=V[ne];for(let oe=0,he=G.length;oe<he;oe+=2){U.setStyle(G[oe+1]);for(let fe=0,Ee=e.length;fe<Ee;++fe)U.setTransform(e[fe]),U.drawGeometry(G[oe])}}}return O.getImageData(0,0,P.width,P.height)}function $L(n,e,t){const r=[];if(t){const i=Math.floor(Math.round(n[0])*Yh),s=Math.floor(Math.round(n[1])*Yh),l=(SA(i,0,t.width-1)+SA(s,0,t.height-1)*t.width)*4,o=t.data[l],f=t.data[l+1],x=t.data[l+2]+256*(f+256*o),B=Math.floor((256*256*256-1)/e.length);x&&x%B===0&&r.push(e[x/B-1])}return r}class HL extends gp{constructor(e,t,r,i){super(e),this.inversePixelTransform=t,this.frameState=r,this.context=i}}const AX=5;class cX extends UC{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.staleKeys_=new Array,this.maxStaleKeys=AX}getStaleKeys(){return this.staleKeys_}prependStaleKey(e){this.staleKeys_.unshift(e),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(e){return yo()}getData(e){return null}prepareFrame(e){return yo()}renderFrame(e,t){return yo()}forEachFeatureAtCoordinate(e,t,r,i,s){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const t=e.target;(t.getState()===fi.LOADED||t.getState()===fi.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let t=e.getState();return t!=fi.LOADED&&t!=fi.ERROR&&e.addEventListener(lo.CHANGE,this.boundHandleImageChange_),t==fi.IDLE&&(e.load(),t=e.getState()),t==fi.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}renderDeferred(e){}disposeInternal(){delete this.layer_,super.disposeInternal()}}const SI=[];let X1=null;function dX(){X1=Fu(1,1,void 0,{willReadFrequently:!0})}class qB extends cX{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=gh(),this.pixelTransform=gh(),this.inversePixelTransform=gh(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(e,t,r){X1||dX(),X1.clearRect(0,0,1,1);let i;try{X1.drawImage(e,t,r,1,1,0,0,1,1),i=X1.getImageData(0,0,1,1).data}catch{return X1=null,null}return i}getBackground(e){let r=this.getLayer().getBackground();return typeof r=="function"&&(r=r(e.viewState.resolution)),r||void 0}useContainer(e,t,r){const i=this.getLayer().getClassName();let s,l;if(e&&e.className===i&&(!r||e&&e.style.backgroundColor&&Q0(By(e.style.backgroundColor),By(r)))){const o=e.firstElementChild;o instanceof HTMLCanvasElement&&(l=o.getContext("2d"))}if(l&&l.canvas.style.transform===t?(this.container=e,this.context=l,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){s=document.createElement("div"),s.className=i;let o=s.style;o.position="absolute",o.width="100%",o.height="100%",l=Fu();const f=l.canvas;s.appendChild(f),o=f.style,o.position="absolute",o.left="0",o.transformOrigin="top left",this.container=s,this.context=l}!this.containerReused&&r&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=r)}clipUnrotated(e,t,r){const i=Wm(r),s=fx(r),l=hx(r),o=dx(r);wA(t.coordinateToPixelTransform,i),wA(t.coordinateToPixelTransform,s),wA(t.coordinateToPixelTransform,l),wA(t.coordinateToPixelTransform,o);const f=this.inversePixelTransform;wA(f,i),wA(f,s),wA(f,l),wA(f,o),e.save(),e.beginPath(),e.moveTo(Math.round(i[0]),Math.round(i[1])),e.lineTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(l[0]),Math.round(l[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.clip()}prepareContainer(e,t){const r=e.extent,i=e.viewState.resolution,s=e.viewState.rotation,l=e.pixelRatio,o=Math.round(Ls(r)/i*l),f=Math.round(aA(r)/i*l);em(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/l,1/l,s,-o/2,-f/2),pL(this.inversePixelTransform,this.pixelTransform);const y=HH(this.pixelTransform);if(this.useContainer(t,y,this.getBackground(e)),!this.containerReused){const x=this.context.canvas;x.width!=o||x.height!=f?(x.width=o,x.height=f):this.context.clearRect(0,0,o,f),y!==x.style.transform&&(x.style.transform=y)}}dispatchRenderEvent_(e,t,r){const i=this.getLayer();if(i.hasListener(e)){const s=new HL(e,this.inversePixelTransform,r,t);i.dispatchEvent(s)}}preRender(e,t){this.frameState=t,!t.declutter&&this.dispatchRenderEvent_(Of.PRERENDER,e,t)}postRender(e,t){t.declutter||this.dispatchRenderEvent_(Of.POSTRENDER,e,t)}renderDeferredInternal(e){}getRenderContext(e){return e.declutter&&!this.deferredContext_&&(this.deferredContext_=new YB),e.declutter?this.deferredContext_.getContext():this.context}renderDeferred(e){e.declutter&&(this.dispatchRenderEvent_(Of.PRERENDER,this.context,e),e.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(e),this.dispatchRenderEvent_(Of.POSTRENDER,this.context,e))}getRenderTransform(e,t,r,i,s,l,o){const f=s/2,y=l/2,x=i/t,B=-x,O=-e[0]+o,P=-e[1];return em(this.tempTransform,f,y,x,B,-r,O,P)}disposeInternal(){delete this.frameState,super.disposeInternal()}}class hX extends qB{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=Pf(),this.wrappedRenderedExtent_=Pf(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(e,t,r){const i=t.extent,s=t.viewState,l=s.center,o=s.resolution,f=s.projection,y=s.rotation,x=f.getExtent(),B=this.getLayer().getSource(),O=this.getLayer().getDeclutter(),P=t.pixelRatio,U=t.viewHints,j=!(U[Hl.ANIMATING]||U[Hl.INTERACTING]),N=this.context,Y=Math.round(Ls(i)/o*P),H=Math.round(aA(i)/o*P),se=B.getWrapX()&&f.canWrapX(),re=se?Ls(x):null,V=se?Math.ceil((i[2]-x[2])/re)+1:1;let ne=se?Math.floor((i[0]-x[0])/re):0;do{let G=this.getRenderTransform(l,o,0,P,Y,H,ne*re);t.declutter&&(G=G.slice(0)),e.execute(N,[N.canvas.width,N.canvas.height],G,y,j,r===void 0?ry:r?f2:lX,r?O&&t.declutter[O]:void 0)}while(++ne<V)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=Fu(this.context.canvas.width,this.context.canvas.height,SI))}resetDrawContext_(){if(this.opacity_!==1){const e=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=e,GC(this.context),SI.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(e){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,e,!0)}renderDeferredInternal(e){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(e,t){const r=e.layerStatesArray[e.layerIndex];this.opacity_=r.opacity;const i=e.viewState;this.prepareContainer(e,t);const s=this.context,l=this.replayGroup_;let o=l&&!l.isEmpty();if(!o&&!(this.getLayer().hasListener(Of.PRERENDER)||this.getLayer().hasListener(Of.POSTRENDER)))return null;if(this.setDrawContext_(),this.preRender(s,e),i.projection,this.clipped_=!1,o&&r.extent&&this.clipping){const f=Yp(r.extent);o=Du(f,e.extent),this.clipped_=o&&!Qp(f,e.extent),this.clipped_&&this.clipUnrotated(s,e,f)}return o&&this.renderWorlds(l,e,this.getLayer().getDeclutter()?!1:void 0),!e.declutter&&this.clipped_&&s.restore(),this.postRender(s,e),this.renderedRotation_!==i.rotation&&(this.renderedRotation_=i.rotation,this.hitDetectionImageData_=null),e.declutter||this.resetDrawContext_(),this.container}getFeatures(e){return new Promise(t=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const r=this.frameState.size.slice(),i=this.renderedCenter_,s=this.renderedResolution_,l=this.renderedRotation_,o=this.renderedProjection_,f=this.wrappedRenderedExtent_,y=this.getLayer(),x=[],B=r[0]*Yh,O=r[1]*Yh;x.push(this.getRenderTransform(i,s,l,Yh,B,O,0).slice());const P=y.getSource(),U=o.getExtent();if(P.getWrapX()&&o.canWrapX()&&!Qp(U,f)){let j=f[0];const N=Ls(U);let Y=0,H;for(;j<U[0];)--Y,H=N*Y,x.push(this.getRenderTransform(i,s,l,Yh,B,O,H).slice()),j+=N;for(Y=0,j=f[2];j>U[2];)++Y,H=N*Y,x.push(this.getRenderTransform(i,s,l,Yh,B,O,H).slice()),j-=N}this.hitDetectionImageData_=VL(r,x,this.renderedFeatures_,y.getStyleFunction(),f,s,l,c6(s,this.renderedPixelRatio_),null)}t($L(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,t,r,i,s){var O,P;if(!this.replayGroup_)return;const l=t.viewState.resolution,o=t.viewState.rotation,f=this.getLayer(),y={},x=function(U,j,N){const Y=Wo(U),H=y[Y];if(H){if(H!==!0&&N<H.distanceSq){if(N===0)return y[Y]=!0,s.splice(s.lastIndexOf(H),1),i(U,f,j);H.geometry=j,H.distanceSq=N}}else{if(N===0)return y[Y]=!0,i(U,f,j);s.push(y[Y]={feature:U,layer:f,geometry:j,distanceSq:N,callback:i})}},B=this.getLayer().getDeclutter();return this.replayGroup_.forEachFeatureAtCoordinate(e,l,o,r,x,B?(P=(O=t.declutter)==null?void 0:O[B])==null?void 0:P.all().map(U=>U.value):null)}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const t=this.getLayer(),r=t.getSource();if(!r)return!1;const i=e.viewHints[Hl.ANIMATING],s=e.viewHints[Hl.INTERACTING],l=t.getUpdateWhileAnimating(),o=t.getUpdateWhileInteracting();if(this.ready&&!l&&i||!o&&s)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const f=e.extent,y=e.viewState,x=y.projection,B=y.resolution,O=e.pixelRatio,P=t.getRevision(),U=t.getRenderBuffer();let j=t.getRenderOrder();j===void 0&&(j=KZ);const N=y.center.slice(),Y=L0(f,U*B),H=Y.slice(),se=[Y.slice()],re=x.getExtent();if(r.getWrapX()&&x.canWrapX()&&!Qp(re,e.extent)){const Ke=Ls(re),xe=Math.max(Ls(Y)/2,Ke);Y[0]=re[0]-xe,Y[2]=re[2]+xe,EB(N,x);const at=JF(se[0],x);at[0]<re[0]&&at[2]<re[2]?se.push([at[0]+Ke,at[1],at[2]+Ke,at[3]]):at[0]>re[0]&&at[2]>re[2]&&se.push([at[0]-Ke,at[1],at[2]-Ke,at[3]])}if(this.ready&&this.renderedResolution_==B&&this.renderedRevision_==P&&this.renderedRenderOrder_==j&&this.renderedFrameDeclutter_===!!e.declutter&&Qp(this.wrappedRenderedExtent_,Y))return Q0(this.renderedExtent_,H)||(this.hitDetectionImageData_=null,this.renderedExtent_=H),this.renderedCenter_=N,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const V=new YL(jL(B,O),Y,B,O);let ne;for(let Ke=0,xe=se.length;Ke<xe;++Ke)r.loadFeatures(se[Ke],B,x);const G=c6(B,O);let oe=!0;const he=(Ke,xe)=>{let at;const Ze=Ke.getStyleFunction()||t.getStyleFunction();if(Ze&&(at=Ze(Ke,B)),at){const Je=this.renderFeature(Ke,G,at,V,ne,this.getLayer().getDeclutter(),xe);oe=oe&&!Je}},fe=TB(Y),Ee=r.getFeaturesInExtent(fe);j&&Ee.sort(j);for(let Ke=0,xe=Ee.length;Ke<xe;++Ke)he(Ee[Ke],Ke);this.renderedFeatures_=Ee,this.ready=oe;const me=V.finish(),Se=new qL(Y,B,O,r.getOverlaps(),me,t.getRenderBuffer(),!!e.declutter);return this.renderedResolution_=B,this.renderedRevision_=P,this.renderedRenderOrder_=j,this.renderedFrameDeclutter_=!!e.declutter,this.renderedExtent_=H,this.wrappedRenderedExtent_=Y,this.renderedCenter_=N,this.renderedProjection_=x,this.renderedPixelRatio_=O,this.replayGroup_=Se,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,t,r,i,s,l,o){if(!r)return!1;let f=!1;if(Array.isArray(r))for(let y=0,x=r.length;y<x;++y)f=d2(i,e,r[y],t,this.boundHandleStyleImageChange_,s,l,o)||f;else f=d2(i,e,r,t,this.boundHandleStyleImageChange_,s,l,o);return f}}let $g=0;const Fd=1<<$g++,Rs=1<<$g++,ph=1<<$g++,up=1<<$g++,Ng=1<<$g++,Ev=1<<$g++,J_=Math.pow(2,$g)-1,VB={[Fd]:"boolean",[Rs]:"number",[ph]:"string",[up]:"color",[Ng]:"number[]",[Ev]:"size"},fX=Object.keys(VB).map(Number).sort(Rm);function pX(n){return n in VB}function Bv(n){const e=[];for(const t of fX)Ov(n,t)&&e.push(VB[t]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function Ov(n,e){return(n&e)===e}function _0(n,e){return n===e}class qA{constructor(e,t){if(!pX(e))throw new Error(`literal expressions must have a specific type, got ${Bv(e)}`);this.type=e,this.value=t}}class mX{constructor(e,t,...r){this.type=e,this.operator=t,this.args=r}}function ZL(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,mapState:!1}}function Uc(n,e,t){switch(typeof n){case"boolean":{if(_0(e,ph))return new qA(ph,n?"true":"false");if(!Ov(e,Fd))throw new Error(`got a boolean, but expected ${Bv(e)}`);return new qA(Fd,n)}case"number":{if(_0(e,Ev))return new qA(Ev,ud(n));if(_0(e,Fd))return new qA(Fd,!!n);if(_0(e,ph))return new qA(ph,n.toString());if(!Ov(e,Rs))throw new Error(`got a number, but expected ${Bv(e)}`);return new qA(Rs,n)}case"string":{if(_0(e,up))return new qA(up,jB(n));if(_0(e,Fd))return new qA(Fd,!!n);if(!Ov(e,ph))throw new Error(`got a string, but expected ${Bv(e)}`);return new qA(ph,n)}}if(!Array.isArray(n))throw new Error("expression must be an array or a primitive value");if(n.length===0)throw new Error("empty expression");if(typeof n[0]=="string")return EX(n,e,t);for(const r of n)if(typeof r!="number")throw new Error("expected an array of numbers");if(_0(e,Ev)){if(n.length!==2)throw new Error(`expected an array of two values for a size, got ${n.length}`);return new qA(Ev,n)}if(_0(e,up)){if(n.length===3)return new qA(up,[...n,1]);if(n.length===4)return new qA(up,n);throw new Error(`expected an array of 3 or 4 values for a color, got ${n.length}`)}if(!Ov(e,Ng))throw new Error(`got an array of numbers, but expected ${Bv(e)}`);return new qA(Ng,n)}const Nn={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",LineMetric:"line-metric",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string",Has:"has"},gX={[Nn.Get]:mo(Zo(1,1/0),EI),[Nn.Var]:mo(Zo(1,1),yX),[Nn.Has]:mo(Zo(1,1/0),EI),[Nn.Id]:mo(vX,_1),[Nn.Concat]:mo(Zo(2,1/0),sa(ph)),[Nn.GeometryType]:mo(CX,_1),[Nn.LineMetric]:mo(_1),[Nn.Resolution]:mo(p4,_1),[Nn.Zoom]:mo(p4,_1),[Nn.Time]:mo(p4,_1),[Nn.Any]:mo(Zo(2,1/0),sa(Fd)),[Nn.All]:mo(Zo(2,1/0),sa(Fd)),[Nn.Not]:mo(Zo(1,1),sa(Fd)),[Nn.Equal]:mo(Zo(2,2),sa(J_)),[Nn.NotEqual]:mo(Zo(2,2),sa(J_)),[Nn.GreaterThan]:mo(Zo(2,2),sa(Rs)),[Nn.GreaterThanOrEqualTo]:mo(Zo(2,2),sa(Rs)),[Nn.LessThan]:mo(Zo(2,2),sa(Rs)),[Nn.LessThanOrEqualTo]:mo(Zo(2,2),sa(Rs)),[Nn.Multiply]:mo(Zo(2,1/0),BI),[Nn.Coalesce]:mo(Zo(2,1/0),BI),[Nn.Divide]:mo(Zo(2,2),sa(Rs)),[Nn.Add]:mo(Zo(2,1/0),sa(Rs)),[Nn.Subtract]:mo(Zo(2,2),sa(Rs)),[Nn.Clamp]:mo(Zo(3,3),sa(Rs)),[Nn.Mod]:mo(Zo(2,2),sa(Rs)),[Nn.Pow]:mo(Zo(2,2),sa(Rs)),[Nn.Abs]:mo(Zo(1,1),sa(Rs)),[Nn.Floor]:mo(Zo(1,1),sa(Rs)),[Nn.Ceil]:mo(Zo(1,1),sa(Rs)),[Nn.Round]:mo(Zo(1,1),sa(Rs)),[Nn.Sin]:mo(Zo(1,1),sa(Rs)),[Nn.Cos]:mo(Zo(1,1),sa(Rs)),[Nn.Atan]:mo(Zo(1,2),sa(Rs)),[Nn.Sqrt]:mo(Zo(1,1),sa(Rs)),[Nn.Match]:mo(Zo(4,1/0),OI,bX),[Nn.Between]:mo(Zo(3,3),sa(Rs)),[Nn.Interpolate]:mo(Zo(6,1/0),OI,xX),[Nn.Case]:mo(Zo(3,1/0),_X,MX),[Nn.In]:mo(Zo(2,2),wX),[Nn.Number]:mo(Zo(1,1/0),sa(J_)),[Nn.String]:mo(Zo(1,1/0),sa(J_)),[Nn.Array]:mo(Zo(1,1/0),sa(Rs)),[Nn.Color]:mo(Zo(1,4),sa(Rs)),[Nn.Band]:mo(Zo(1,3),sa(Rs)),[Nn.Palette]:mo(Zo(2,2),SX),[Nn.ToString]:mo(Zo(1,1),sa(Fd|Rs|ph|up))};function EI(n,e,t){const r=n.length-1,i=new Array(r);for(let s=0;s<r;++s){const l=n[s+1];switch(typeof l){case"number":{i[s]=new qA(Rs,l);break}case"string":{i[s]=new qA(ph,l);break}default:throw new Error(`expected a string key or numeric array index for a get operation, got ${l}`)}s===0&&t.properties.add(String(l))}return i}function yX(n,e,t){const r=n[1];if(typeof r!="string")throw new Error("expected a string argument for var operation");return t.variables.add(r),[new qA(ph,r)]}function vX(n,e,t){t.featureId=!0}function CX(n,e,t){t.geometryType=!0}function p4(n,e,t){t.mapState=!0}function _1(n,e,t){const r=n[0];if(n.length!==1)throw new Error(`expected no arguments for ${r} operation`);return[]}function Zo(n,e){return function(t,r,i){const s=t[0],l=t.length-1;if(n===e){if(l!==n){const o=n===1?"":"s";throw new Error(`expected ${n} argument${o} for ${s}, got ${l}`)}}else if(l<n||l>e){const o=e===1/0?`${n} or more`:`${n} to ${e}`;throw new Error(`expected ${o} arguments for ${s}, got ${l}`)}}}function BI(n,e,t){const r=n.length-1,i=new Array(r);for(let s=0;s<r;++s){const l=Uc(n[s+1],e,t);i[s]=l}return i}function sa(n){return function(e,t,r){const i=e.length-1,s=new Array(i);for(let l=0;l<i;++l){const o=Uc(e[l+1],n,r);s[l]=o}return s}}function _X(n,e,t){const r=n[0],i=n.length-1;if(i%2===0)throw new Error(`expected an odd number of arguments for ${r}, got ${i} instead`)}function OI(n,e,t){const r=n[0],i=n.length-1;if(i%2===1)throw new Error(`expected an even number of arguments for operation ${r}, got ${i} instead`)}function bX(n,e,t){const r=n.length-1,i=ph|Rs|Fd,s=Uc(n[1],i,t),l=Uc(n[n.length-1],e,t),o=new Array(r-2);for(let f=0;f<r-2;f+=2){try{const y=Uc(n[f+2],s.type,t);o[f]=y}catch(y){throw new Error(`failed to parse argument ${f+1} of match expression: ${y.message}`)}try{const y=Uc(n[f+3],l.type,t);o[f+1]=y}catch(y){throw new Error(`failed to parse argument ${f+2} of match expression: ${y.message}`)}}return[s,...o,l]}function xX(n,e,t){const r=n[1];let i;switch(r[0]){case"linear":i=1;break;case"exponential":const f=r[1];if(typeof f!="number"||f<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(f)} instead`);i=f;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(r)}`)}const s=new qA(Rs,i);let l;try{l=Uc(n[2],Rs,t)}catch(f){throw new Error(`failed to parse argument 1 in interpolate expression: ${f.message}`)}const o=new Array(n.length-3);for(let f=0;f<o.length;f+=2){try{const y=Uc(n[f+3],Rs,t);o[f]=y}catch(y){throw new Error(`failed to parse argument ${f+2} for interpolate expression: ${y.message}`)}try{const y=Uc(n[f+4],e,t);o[f+1]=y}catch(y){throw new Error(`failed to parse argument ${f+3} for interpolate expression: ${y.message}`)}}return[s,l,...o]}function MX(n,e,t){const r=Uc(n[n.length-1],e,t),i=new Array(n.length-1);for(let s=0;s<i.length-1;s+=2){try{const l=Uc(n[s+1],Fd,t);i[s]=l}catch(l){throw new Error(`failed to parse argument ${s} of case expression: ${l.message}`)}try{const l=Uc(n[s+2],r.type,t);i[s+1]=l}catch(l){throw new Error(`failed to parse argument ${s+1} of case expression: ${l.message}`)}}return i[i.length-1]=r,i}function wX(n,e,t){let r=n[2];if(!Array.isArray(r))throw new Error('the second argument for the "in" operator must be an array');let i;if(typeof r[0]=="string"){if(r[0]!=="literal")throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(r[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');r=r[1],i=ph}else i=Rs;const s=new Array(r.length);for(let o=0;o<s.length;o++)try{const f=Uc(r[o],i,t);s[o]=f}catch(f){throw new Error(`failed to parse haystack item ${o} for "in" expression: ${f.message}`)}return[Uc(n[1],i,t),...s]}function SX(n,e,t){let r;try{r=Uc(n[1],Rs,t)}catch(l){throw new Error(`failed to parse first argument in palette expression: ${l.message}`)}const i=n[2];if(!Array.isArray(i))throw new Error("the second argument of palette must be an array");const s=new Array(i.length);for(let l=0;l<s.length;l++){let o;try{o=Uc(i[l],up,t)}catch(f){throw new Error(`failed to parse color at index ${l} in palette expression: ${f.message}`)}if(!(o instanceof qA))throw new Error(`the palette color at index ${l} must be a literal value`);s[l]=o}return[r,...s]}function mo(...n){return function(e,t,r){const i=e[0];let s;for(let l=0;l<n.length;l++){const o=n[l](e,t,r);if(l==n.length-1){if(!o)throw new Error("expected last argument validator to return the parsed args");s=o}}return new mX(t,i,...s)}}function EX(n,e,t){const r=n[0],i=gX[r];if(!i)throw new Error(`unknown operator: ${r}`);return i(n,e,t)}function XL(n){if(!n)return"";const e=n.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return XL(n.getGeometries()[0]);default:return""}}function JL(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function Gm(n,e,t){const r=Uc(n,e,t);return pp(r)}function pp(n,e){if(n instanceof qA){if(n.type===up&&typeof n.value=="string"){const r=jB(n.value);return function(){return r}}return function(){return n.value}}const t=n.operator;switch(t){case Nn.Number:case Nn.String:case Nn.Coalesce:return BX(n);case Nn.Get:case Nn.Var:case Nn.Has:return OX(n);case Nn.Id:return r=>r.featureId;case Nn.GeometryType:return r=>r.geometryType;case Nn.Concat:{const r=n.args.map(i=>pp(i));return i=>"".concat(...r.map(s=>s(i).toString()))}case Nn.Resolution:return r=>r.resolution;case Nn.Any:case Nn.All:case Nn.Between:case Nn.In:case Nn.Not:return kX(n);case Nn.Equal:case Nn.NotEqual:case Nn.LessThan:case Nn.LessThanOrEqualTo:case Nn.GreaterThan:case Nn.GreaterThanOrEqualTo:return IX(n);case Nn.Multiply:case Nn.Divide:case Nn.Add:case Nn.Subtract:case Nn.Clamp:case Nn.Mod:case Nn.Pow:case Nn.Abs:case Nn.Floor:case Nn.Ceil:case Nn.Round:case Nn.Sin:case Nn.Cos:case Nn.Atan:case Nn.Sqrt:return TX(n);case Nn.Case:return PX(n);case Nn.Match:return KX(n);case Nn.Interpolate:return RX(n);case Nn.ToString:return DX(n);default:throw new Error(`Unsupported operator ${t}`)}}function BX(n,e){const t=n.operator,r=n.args.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=pp(n.args[s]);switch(t){case Nn.Coalesce:return s=>{for(let l=0;l<r;++l){const o=i[l](s);if(typeof o<"u"&&o!==null)return o}throw new Error("Expected one of the values to be non-null")};case Nn.Number:case Nn.String:return s=>{for(let l=0;l<r;++l){const o=i[l](s);if(typeof o===t)return o}throw new Error(`Expected one of the values to be a ${t}`)};default:throw new Error(`Unsupported assertion operator ${t}`)}}function OX(n,e){const r=n.args[0].value;switch(n.operator){case Nn.Get:return i=>{const s=n.args;let l=i.properties[r];for(let o=1,f=s.length;o<f;++o){const x=s[o].value;l=l[x]}return l};case Nn.Var:return i=>i.variables[r];case Nn.Has:return i=>{const s=n.args;if(!(r in i.properties))return!1;let l=i.properties[r];for(let o=1,f=s.length;o<f;++o){const x=s[o].value;if(!l||!Object.hasOwn(l,x))return!1;l=l[x]}return!0};default:throw new Error(`Unsupported accessor operator ${n.operator}`)}}function IX(n,e){const t=n.operator,r=pp(n.args[0]),i=pp(n.args[1]);switch(t){case Nn.Equal:return s=>r(s)===i(s);case Nn.NotEqual:return s=>r(s)!==i(s);case Nn.LessThan:return s=>r(s)<i(s);case Nn.LessThanOrEqualTo:return s=>r(s)<=i(s);case Nn.GreaterThan:return s=>r(s)>i(s);case Nn.GreaterThanOrEqualTo:return s=>r(s)>=i(s);default:throw new Error(`Unsupported comparison operator ${t}`)}}function kX(n,e){const t=n.operator,r=n.args.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=pp(n.args[s]);switch(t){case Nn.Any:return s=>{for(let l=0;l<r;++l)if(i[l](s))return!0;return!1};case Nn.All:return s=>{for(let l=0;l<r;++l)if(!i[l](s))return!1;return!0};case Nn.Between:return s=>{const l=i[0](s),o=i[1](s),f=i[2](s);return l>=o&&l<=f};case Nn.In:return s=>{const l=i[0](s);for(let o=1;o<r;++o)if(l===i[o](s))return!0;return!1};case Nn.Not:return s=>!i[0](s);default:throw new Error(`Unsupported logical operator ${t}`)}}function TX(n,e){const t=n.operator,r=n.args.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=pp(n.args[s]);switch(t){case Nn.Multiply:return s=>{let l=1;for(let o=0;o<r;++o)l*=i[o](s);return l};case Nn.Divide:return s=>i[0](s)/i[1](s);case Nn.Add:return s=>{let l=0;for(let o=0;o<r;++o)l+=i[o](s);return l};case Nn.Subtract:return s=>i[0](s)-i[1](s);case Nn.Clamp:return s=>{const l=i[0](s),o=i[1](s);if(l<o)return o;const f=i[2](s);return l>f?f:l};case Nn.Mod:return s=>i[0](s)%i[1](s);case Nn.Pow:return s=>Math.pow(i[0](s),i[1](s));case Nn.Abs:return s=>Math.abs(i[0](s));case Nn.Floor:return s=>Math.floor(i[0](s));case Nn.Ceil:return s=>Math.ceil(i[0](s));case Nn.Round:return s=>Math.round(i[0](s));case Nn.Sin:return s=>Math.sin(i[0](s));case Nn.Cos:return s=>Math.cos(i[0](s));case Nn.Atan:return r===2?s=>Math.atan2(i[0](s),i[1](s)):s=>Math.atan(i[0](s));case Nn.Sqrt:return s=>Math.sqrt(i[0](s));default:throw new Error(`Unsupported numeric operator ${t}`)}}function PX(n,e){const t=n.args.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=pp(n.args[i]);return i=>{for(let s=0;s<t-1;s+=2)if(r[s](i))return r[s+1](i);return r[t-1](i)}}function KX(n,e){const t=n.args.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=pp(n.args[i]);return i=>{const s=r[0](i);for(let l=1;l<t;l+=2)if(s===r[l](i))return r[l+1](i);return r[t-1](i)}}function RX(n,e){const t=n.args.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=pp(n.args[i]);return i=>{const s=r[0](i),l=r[1](i);let o,f;for(let y=2;y<t;y+=2){const x=r[y](i);let B=r[y+1](i);const O=Array.isArray(B);if(O&&(B=uZ(B)),x>=l)return y===2?B:O?FX(s,l,o,f,x,B):Iv(s,l,o,f,x,B);o=x,f=B}return f}}function DX(n,e){const t=n.operator,r=n.args.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=pp(n.args[s]);switch(t){case Nn.ToString:return s=>{const l=i[0](s);return n.args[0].type===up?NB(l):l.toString()};default:throw new Error(`Unsupported convert operator ${t}`)}}function Iv(n,e,t,r,i,s){const l=i-t;if(l===0)return r;const o=e-t,f=n===1?o/l:(Math.pow(n,o)-1)/(Math.pow(n,l)-1);return r+f*(s-r)}function FX(n,e,t,r,i,s){if(i-t===0)return r;const o=uI(r),f=uI(s);let y=f[2]-o[2];y>180?y-=360:y<-180&&(y+=360);const x=[Iv(n,e,t,o[0],i,f[0]),Iv(n,e,t,o[1],i,f[1]),o[2]+Iv(n,e,t,0,i,y),Iv(n,e,t,r[3],i,s[3])];return wL(AZ(x))}function LX(n){return!0}function UX(n){const e=ZL(),t=zX(n,e),r=JL();return function(i,s){if(r.properties=i.getPropertiesInternal(),r.resolution=s,e.featureId){const l=i.getId();l!==void 0?r.featureId=l:r.featureId=null}return e.geometryType&&(r.geometryType=XL(i.getGeometry())),t(r)}}function II(n){const e=ZL(),t=n.length,r=new Array(t);for(let l=0;l<t;++l)r[l]=d6(n[l],e);const i=JL(),s=new Array(t);return function(l,o){if(i.properties=l.getPropertiesInternal(),i.resolution=o,e.featureId){const y=l.getId();y!==void 0?i.featureId=y:i.featureId=null}let f=0;for(let y=0;y<t;++y){const x=r[y](i);x&&(s[f]=x,f+=1)}return s.length=f,s}}function zX(n,e){const t=n.length,r=new Array(t);for(let i=0;i<t;++i){const s=n[i],l="filter"in s?Gm(s.filter,Fd,e):LX;let o;if(Array.isArray(s.style)){const f=s.style.length;o=new Array(f);for(let y=0;y<f;++y)o[y]=d6(s.style[y],e)}else o=[d6(s.style,e)];r[i]={filter:l,styles:o}}return function(i){const s=[];let l=!1;for(let o=0;o<t;++o){const f=r[o].filter;if(f(i)&&!(n[o].else&&l)){l=!0;for(const y of r[o].styles){const x=y(i);x&&s.push(x)}}}return s}}function d6(n,e){const t=_C(n,"",e),r=bC(n,"",e),i=jX(n,e),s=NX(n,e),l=mh(n,"z-index",e);if(!t&&!r&&!i&&!s&&!N0(n))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(n));const o=new Wh;return function(f){let y=!0;if(t){const x=t(f);x&&(y=!1),o.setFill(x)}if(r){const x=r(f);x&&(y=!1),o.setStroke(x)}if(i){const x=i(f);x&&(y=!1),o.setText(x)}if(s){const x=s(f);x&&(y=!1),o.setImage(x)}return l&&o.setZIndex(l(f)),y?null:o}}function _C(n,e,t){let r;if(e+"fill-pattern-src"in n)r=YX(n,e+"fill-",t);else{if(n[e+"fill-color"]==="none")return s=>null;r=$B(n,e+"fill-color",t)}if(!r)return null;const i=new Pm;return function(s){const l=r(s);return l===zB?null:(i.setColor(l),i)}}function bC(n,e,t){const r=mh(n,e+"stroke-width",t),i=$B(n,e+"stroke-color",t);if(!r&&!i)return null;const s=Tm(n,e+"stroke-line-cap",t),l=Tm(n,e+"stroke-line-join",t),o=eU(n,e+"stroke-line-dash",t),f=mh(n,e+"stroke-line-dash-offset",t),y=mh(n,e+"stroke-miter-limit",t),x=new T0;return function(B){if(i){const O=i(B);if(O===zB)return null;x.setColor(O)}if(r&&x.setWidth(r(B)),s){const O=s(B);if(O!=="butt"&&O!=="round"&&O!=="square")throw new Error("Expected butt, round, or square line cap");x.setLineCap(O)}if(l){const O=l(B);if(O!=="bevel"&&O!=="round"&&O!=="miter")throw new Error("Expected bevel, round, or miter line join");x.setLineJoin(O)}return o&&x.setLineDash(o(B)),f&&x.setLineDashOffset(f(B)),y&&x.setMiterLimit(y(B)),x}}function jX(n,e){const t="text-",r=Tm(n,t+"value",e);if(!r)return null;const i=_C(n,t,e),s=_C(n,t+"background-",e),l=bC(n,t,e),o=bC(n,t+"background-",e),f=Tm(n,t+"font",e),y=mh(n,t+"max-angle",e),x=mh(n,t+"offset-x",e),B=mh(n,t+"offset-y",e),O=hy(n,t+"overflow",e),P=Tm(n,t+"placement",e),U=mh(n,t+"repeat",e),j=Sx(n,t+"scale",e),N=hy(n,t+"rotate-with-view",e),Y=mh(n,t+"rotation",e),H=Tm(n,t+"align",e),se=Tm(n,t+"justify",e),re=Tm(n,t+"baseline",e),V=hy(n,t+"keep-upright",e),ne=eU(n,t+"padding",e),G=Ex(n,t+"declutter-mode"),oe=new wx({declutterMode:G});return function(he){if(oe.setText(r(he)),i&&oe.setFill(i(he)),s&&oe.setBackgroundFill(s(he)),l&&oe.setStroke(l(he)),o&&oe.setBackgroundStroke(o(he)),f&&oe.setFont(f(he)),y&&oe.setMaxAngle(y(he)),x&&oe.setOffsetX(x(he)),B&&oe.setOffsetY(B(he)),O&&oe.setOverflow(O(he)),P){const fe=P(he);if(fe!=="point"&&fe!=="line")throw new Error("Expected point or line for text-placement");oe.setPlacement(fe)}if(U&&oe.setRepeat(U(he)),j&&oe.setScale(j(he)),N&&oe.setRotateWithView(N(he)),Y&&oe.setRotation(Y(he)),H){const fe=H(he);if(fe!=="left"&&fe!=="center"&&fe!=="right"&&fe!=="end"&&fe!=="start")throw new Error("Expected left, right, center, start, or end for text-align");oe.setTextAlign(fe)}if(se){const fe=se(he);if(fe!=="left"&&fe!=="right"&&fe!=="center")throw new Error("Expected left, right, or center for text-justify");oe.setJustify(fe)}if(re){const fe=re(he);if(fe!=="bottom"&&fe!=="top"&&fe!=="middle"&&fe!=="alphabetic"&&fe!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");oe.setTextBaseline(fe)}return ne&&oe.setPadding(ne(he)),V&&oe.setKeepUpright(V(he)),oe}}function NX(n,e){return"icon-src"in n?WX(n,e):"shape-points"in n?GX(n,e):"circle-radius"in n?QX(n,e):null}function WX(n,e){const t="icon-",r=t+"src",i=tU(n[r],r),s=p2(n,t+"anchor",e),l=Sx(n,t+"scale",e),o=mh(n,t+"opacity",e),f=p2(n,t+"displacement",e),y=mh(n,t+"rotation",e),x=hy(n,t+"rotate-with-view",e),B=TI(n,t+"anchor-origin"),O=PI(n,t+"anchor-x-units"),P=PI(n,t+"anchor-y-units"),U=HX(n,t+"color"),j=VX(n,t+"cross-origin"),N=$X(n,t+"offset"),Y=TI(n,t+"offset-origin"),H=m2(n,t+"width"),se=m2(n,t+"height"),re=qX(n,t+"size"),V=Ex(n,t+"declutter-mode"),ne=new c2({src:i,anchorOrigin:B,anchorXUnits:O,anchorYUnits:P,color:U,crossOrigin:j,offset:N,offsetOrigin:Y,height:se,width:H,size:re,declutterMode:V});return function(G){return o&&ne.setOpacity(o(G)),f&&ne.setDisplacement(f(G)),y&&ne.setRotation(y(G)),x&&ne.setRotateWithView(x(G)),l&&ne.setScale(l(G)),s&&ne.setAnchor(s(G)),ne}}function GX(n,e){const t="shape-",r=t+"points",i=t+"radius",s=h6(n[r],r),l=h6(n[i],i),o=_C(n,t,e),f=bC(n,t,e),y=Sx(n,t+"scale",e),x=p2(n,t+"displacement",e),B=mh(n,t+"rotation",e),O=hy(n,t+"rotate-with-view",e),P=m2(n,t+"radius2"),U=m2(n,t+"angle"),j=Ex(n,t+"declutter-mode"),N=new Mx({points:s,radius:l,radius2:P,angle:U,declutterMode:j});return function(Y){return o&&N.setFill(o(Y)),f&&N.setStroke(f(Y)),x&&N.setDisplacement(x(Y)),B&&N.setRotation(B(Y)),O&&N.setRotateWithView(O(Y)),y&&N.setScale(y(Y)),N}}function QX(n,e){const t="circle-",r=_C(n,t,e),i=bC(n,t,e),s=mh(n,t+"radius",e),l=Sx(n,t+"scale",e),o=p2(n,t+"displacement",e),f=mh(n,t+"rotation",e),y=hy(n,t+"rotate-with-view",e),x=Ex(n,t+"declutter-mode"),B=new QC({radius:5,declutterMode:x});return function(O){return s&&B.setRadius(s(O)),r&&B.setFill(r(O)),i&&B.setStroke(i(O)),o&&B.setDisplacement(o(O)),f&&B.setRotation(f(O)),y&&B.setRotateWithView(y(O)),l&&B.setScale(l(O)),B}}function mh(n,e,t){if(!(e in n))return;const r=Gm(n[e],Rs,t);return function(i){return h6(r(i),e)}}function Tm(n,e,t){if(!(e in n))return null;const r=Gm(n[e],ph,t);return function(i){return tU(r(i),e)}}function YX(n,e,t){const r=Tm(n,e+"pattern-src",t),i=kI(n,e+"pattern-offset",t),s=kI(n,e+"pattern-size",t),l=$B(n,e+"color",t);return function(o){return{src:r(o),offset:i&&i(o),size:s&&s(o),color:l&&l(o)}}}function hy(n,e,t){if(!(e in n))return null;const r=Gm(n[e],Fd,t);return function(i){const s=r(i);if(typeof s!="boolean")throw new Error(`Expected a boolean for ${e}`);return s}}function $B(n,e,t){if(!(e in n))return null;const r=Gm(n[e],up,t);return function(i){return nU(r(i),e)}}function eU(n,e,t){if(!(e in n))return null;const r=Gm(n[e],Ng,t);return function(i){return qC(r(i),e)}}function p2(n,e,t){if(!(e in n))return null;const r=Gm(n[e],Ng,t);return function(i){const s=qC(r(i),e);if(s.length!==2)throw new Error(`Expected two numbers for ${e}`);return s}}function kI(n,e,t){if(!(e in n))return null;const r=Gm(n[e],Ng,t);return function(i){return rU(r(i),e)}}function Sx(n,e,t){if(!(e in n))return null;const r=Gm(n[e],Ng|Rs,t);return function(i){return ZX(r(i),e)}}function m2(n,e){const t=n[e];if(t!==void 0){if(typeof t!="number")throw new Error(`Expected a number for ${e}`);return t}}function qX(n,e){const t=n[e];if(t!==void 0){if(typeof t=="number")return ud(t);if(!Array.isArray(t))throw new Error(`Expected a number or size array for ${e}`);if(t.length!==2||typeof t[0]!="number"||typeof t[1]!="number")throw new Error(`Expected a number or size array for ${e}`);return t}}function VX(n,e){const t=n[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);return t}}function TI(n,e){const t=n[e];if(t!==void 0){if(t!=="bottom-left"&&t!=="bottom-right"&&t!=="top-left"&&t!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return t}}function PI(n,e){const t=n[e];if(t!==void 0){if(t!=="pixels"&&t!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return t}}function $X(n,e){const t=n[e];if(t!==void 0)return qC(t,e)}function Ex(n,e){const t=n[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);if(t!=="declutter"&&t!=="obstacle"&&t!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return t}}function HX(n,e){const t=n[e];if(t!==void 0)return nU(t,e)}function qC(n,e){if(!Array.isArray(n))throw new Error(`Expected an array for ${e}`);const t=n.length;for(let r=0;r<t;++r)if(typeof n[r]!="number")throw new Error(`Expected an array of numbers for ${e}`);return n}function tU(n,e){if(typeof n!="string")throw new Error(`Expected a string for ${e}`);return n}function h6(n,e){if(typeof n!="number")throw new Error(`Expected a number for ${e}`);return n}function nU(n,e){if(typeof n=="string")return n;const t=qC(n,e),r=t.length;if(r<3||r>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return t}function rU(n,e){const t=qC(n,e);if(t.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return t}function ZX(n,e){return typeof n=="number"?n:rU(n,e)}const np={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};function KI(n,e,t){return function(r,i,s,l,o){if(!r)return;if(!i&&!e)return r;const f=e?0:s[0]*i,y=e?0:s[1]*i,x=o?o[0]:0,B=o?o[1]:0;let O=n[0]+f/2+x,P=n[2]-f/2+x,U=n[1]+y/2+B,j=n[3]-y/2+B;O>P&&(O=(P+O)/2,P=O),U>j&&(U=(j+U)/2,j=U);let N=SA(r[0],O,P),Y=SA(r[1],U,j);if(l&&t&&i){const H=30*i;N+=-H*Math.log(1+Math.max(0,O-r[0])/H)+H*Math.log(1+Math.max(0,r[0]-P)/H),Y+=-H*Math.log(1+Math.max(0,U-r[1])/H)+H*Math.log(1+Math.max(0,r[1]-j)/H)}return[N,Y]}}function XX(n){return n}function iU(n){return Math.pow(n,3)}function Ny(n){return 1-iU(1-n)}function JX(n){return 3*n*n-2*n*n*n}function eJ(n){return n}function HB(n,e,t,r){const i=Ls(e)/t[0],s=aA(e)/t[1];return r?Math.min(n,Math.max(i,s)):Math.min(n,Math.min(i,s))}function ZB(n,e,t){let r=Math.min(n,e);const i=50;return r*=Math.log(1+i*Math.max(0,n/e-1))/i+1,t&&(r=Math.max(r,t),r/=Math.log(1+i*Math.max(0,t/n-1))/i+1),SA(r,t/2,e*2)}function tJ(n,e,t,r){return e=e!==void 0?e:!0,function(i,s,l,o){if(i!==void 0){const f=n[0],y=n[n.length-1],x=t?HB(f,t,l,r):f;if(o)return e?ZB(i,x,y):SA(i,y,x);const B=Math.min(x,i),O=Math.floor(ux(n,B,s));return n[O]>x&&O<n.length-1?n[O+1]:n[O]}}}function nJ(n,e,t,r,i,s){return r=r!==void 0?r:!0,t=t!==void 0?t:0,function(l,o,f,y){if(l!==void 0){const x=i?HB(e,i,f,s):e;if(y)return r?ZB(l,x,t):SA(l,t,x);const B=1e-9,O=Math.ceil(Math.log(e/x)/Math.log(n)-B),P=-o*(.5-B)+.5,U=Math.min(x,l),j=Math.floor(Math.log(e/U)/Math.log(n)+P),N=Math.max(O,j),Y=e/Math.pow(n,N);return SA(Y,t,x)}}}function RI(n,e,t,r,i){return t=t!==void 0?t:!0,function(s,l,o,f){if(s!==void 0){const y=r?HB(n,r,o,i):n;return!t||!f?SA(s,e,y):ZB(s,y,e)}}}function XB(n){if(n!==void 0)return 0}function DI(n){if(n!==void 0)return n}function rJ(n){const e=2*Math.PI/n;return function(t,r){if(r)return t;if(t!==void 0)return t=Math.floor(t/e+.5)*e,t}}function iJ(n){const e=U0(5);return function(t,r){return r||t===void 0?t:Math.abs(t)<=e?0:t}}const oU=42,JB=256,m4=0;class Ap extends yp{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=kB(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&hL(),e.center&&(e.center=Im(e.center,this.projection_)),e.extent&&(e.extent=Yp(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const t=Object.assign({},e);for(const o in np)delete t[o];this.setProperties(t,!0);const r=sJ(e);this.maxResolution_=r.maxResolution,this.minResolution_=r.minResolution,this.zoomFactor_=r.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=r.minZoom;const i=oJ(e),s=r.constraint,l=aJ(e);this.constraints_={center:i,resolution:s,rotation:l},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let t=this.padding_;this.padding_=e;const r=this.getCenterInternal();if(r){const i=e||[0,0,0,0];t=t||[0,0,0,0];const s=this.getResolution(),l=s/2*(i[3]-t[3]+t[1]-i[1]),o=s/2*(i[0]-t[0]+t[2]-i[2]);this.setCenterInternal([r[0]+l,r[1]-o])}}getUpdatedOptions_(e){const t=this.getProperties();return t.resolution!==void 0?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object.assign({},t,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const t=new Array(arguments.length);for(let r=0;r<t.length;++r){let i=arguments[r];i.center&&(i=Object.assign({},i),i.center=Im(i.center,this.getProjection())),i.anchor&&(i=Object.assign({},i),i.anchor=Im(i.anchor,this.getProjection())),t[r]=i}this.animateInternal.apply(this,t)}animateInternal(e){let t=arguments.length,r;t>1&&typeof arguments[t-1]=="function"&&(r=arguments[t-1],--t);let i=0;for(;i<t&&!this.isDef();++i){const x=arguments[i];x.center&&this.setCenterInternal(x.center),x.zoom!==void 0?this.setZoom(x.zoom):x.resolution&&this.setResolution(x.resolution),x.rotation!==void 0&&this.setRotation(x.rotation)}if(i===t){r&&eb(r,!0);return}let s=Date.now(),l=this.targetCenter_.slice(),o=this.targetResolution_,f=this.targetRotation_;const y=[];for(;i<t;++i){const x=arguments[i],B={start:s,complete:!1,anchor:x.anchor,duration:x.duration!==void 0?x.duration:1e3,easing:x.easing||JX,callback:r};if(x.center&&(B.sourceCenter=l,B.targetCenter=x.center.slice(),l=B.targetCenter),x.zoom!==void 0?(B.sourceResolution=o,B.targetResolution=this.getResolutionForZoom(x.zoom),o=B.targetResolution):x.resolution&&(B.sourceResolution=o,B.targetResolution=x.resolution,o=B.targetResolution),x.rotation!==void 0){B.sourceRotation=f;const O=Kg(x.rotation-f+Math.PI,2*Math.PI)-Math.PI;B.targetRotation=f+O,f=B.targetRotation}lJ(B)?B.complete=!0:s+=B.duration,y.push(B)}this.animations_.push(y),this.setHint(Hl.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[Hl.ANIMATING]>0}getInteracting(){return this.hints_[Hl.INTERACTING]>0}cancelAnimations(){this.setHint(Hl.ANIMATING,-this.hints_[Hl.ANIMATING]);let e;for(let t=0,r=this.animations_.length;t<r;++t){const i=this.animations_[t];if(i[0].callback&&eb(i[0].callback,!1),!e)for(let s=0,l=i.length;s<l;++s){const o=i[s];if(!o.complete){e=o.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let t=!1;for(let r=this.animations_.length-1;r>=0;--r){const i=this.animations_[r];let s=!0;for(let l=0,o=i.length;l<o;++l){const f=i[l];if(f.complete)continue;const y=e-f.start;let x=f.duration>0?y/f.duration:1;x>=1?(f.complete=!0,x=1):s=!1;const B=f.easing(x);if(f.sourceCenter){const O=f.sourceCenter[0],P=f.sourceCenter[1],U=f.targetCenter[0],j=f.targetCenter[1];this.nextCenter_=f.targetCenter;const N=O+B*(U-O),Y=P+B*(j-P);this.targetCenter_=[N,Y]}if(f.sourceResolution&&f.targetResolution){const O=B===1?f.targetResolution:f.sourceResolution+B*(f.targetResolution-f.sourceResolution);if(f.anchor){const P=this.getViewportSize_(this.getRotation()),U=this.constraints_.resolution(O,0,P,!0);this.targetCenter_=this.calculateCenterZoom(U,f.anchor)}this.nextResolution_=f.targetResolution,this.targetResolution_=O,this.applyTargetState_(!0)}if(f.sourceRotation!==void 0&&f.targetRotation!==void 0){const O=B===1?Kg(f.targetRotation+Math.PI,2*Math.PI)-Math.PI:f.sourceRotation+B*(f.targetRotation-f.sourceRotation);if(f.anchor){const P=this.constraints_.rotation(O,!0);this.targetCenter_=this.calculateCenterRotate(P,f.anchor)}this.nextRotation_=f.targetRotation,this.targetRotation_=O}if(this.applyTargetState_(!0),t=!0,!f.complete)break}if(s){this.animations_[r]=null,this.setHint(Hl.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const l=i[0].callback;l&&eb(l,!0)}}this.animations_=this.animations_.filter(Boolean),t&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,t){let r;const i=this.getCenterInternal();return i!==void 0&&(r=[i[0]-t[0],i[1]-t[1]],SB(r,e-this.getRotation()),hH(r,t)),r}calculateCenterZoom(e,t){let r;const i=this.getCenterInternal(),s=this.getResolution();if(i!==void 0&&s!==void 0){const l=t[0]-e*(t[0]-i[0])/s,o=t[1]-e*(t[1]-i[1])/s;r=[l,o]}return r}getViewportSize_(e){const t=this.viewportSize_;if(e){const r=t[0],i=t[1];return[Math.abs(r*Math.cos(e))+Math.abs(i*Math.sin(e)),Math.abs(r*Math.sin(e))+Math.abs(i*Math.cos(e))]}return t}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&a6(e,this.getProjection())}getCenterInternal(){return this.get(np.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const t=this.calculateExtentInternal(e);return TB(t,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const t=this.getCenterInternal();Hs(t,"The view center is not defined");const r=this.getResolution();Hs(r!==void 0,"The view resolution is not defined");const i=this.getRotation();return Hs(i!==void 0,"The view rotation is not defined"),t2(t,r,i,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(np.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,t){return this.getResolutionForExtentInternal(Yp(e,this.getProjection()),t)}getResolutionForExtentInternal(e,t){t=t||this.getViewportSizeMinusPadding_();const r=Ls(e)/t[0],i=aA(e)/t[1];return Math.max(r,i)}getResolutionForValueFunction(e){e=e||2;const t=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,i=Math.log(t/r)/Math.log(e);return function(s){return t/Math.pow(e,s*i)}}getRotation(){return this.get(np.ROTATION)}getValueForResolutionFunction(e){const t=Math.log(e||2),r=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,s=Math.log(r/i)/t;return function(l){return Math.log(r/l)/t/s}}getViewportSizeMinusPadding_(e){let t=this.getViewportSize_(e);const r=this.padding_;return r&&(t=[t[0]-r[1]-r[3],t[1]-r[0]-r[2]]),t}getState(){const e=this.getProjection(),t=this.getResolution(),r=this.getRotation();let i=this.getCenterInternal();const s=this.padding_;if(s){const l=this.getViewportSizeMinusPadding_();i=g4(i,this.getViewportSize_(),[l[0]/2+s[3],l[1]/2+s[0]],t,r)}return{center:i.slice(0),projection:e!==void 0?e:null,resolution:t,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:r,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const t=this.getResolution();return t!==void 0&&(e=this.getZoomForResolution(t)),e}getZoomForResolution(e){let t=this.minZoom_||0,r,i;if(this.resolutions_){const s=ux(this.resolutions_,e,1);t=s,r=this.resolutions_[s],s==this.resolutions_.length-1?i=2:i=r/this.resolutions_[s+1]}else r=this.maxResolution_,i=this.zoomFactor_;return t+Math.log(r/e)/Math.log(i)}getResolutionForZoom(e){var t;if((t=this.resolutions_)!=null&&t.length){if(this.resolutions_.length===1)return this.resolutions_[0];const r=SA(Math.floor(e),0,this.resolutions_.length-2),i=this.resolutions_[r]/this.resolutions_[r+1];return this.resolutions_[r]/Math.pow(i,SA(e-r,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,t){let r;if(Hs(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(e)){Hs(!Yg(e),"Cannot fit empty extent provided as `geometry`");const i=Yp(e,this.getProjection());r=oI(i)}else if(e.getType()==="Circle"){const i=Yp(e.getExtent(),this.getProjection());r=oI(i),r.rotate(this.getRotation(),Kf(i))}else r=e;this.fitInternal(r,t)}rotatedExtentForGeometry(e){const t=this.getRotation(),r=Math.cos(t),i=Math.sin(-t),s=e.getFlatCoordinates(),l=e.getStride();let o=1/0,f=1/0,y=-1/0,x=-1/0;for(let B=0,O=s.length;B<O;B+=l){const P=s[B]*r-s[B+1]*i,U=s[B]*i+s[B+1]*r;o=Math.min(o,P),f=Math.min(f,U),y=Math.max(y,P),x=Math.max(x,U)}return[o,f,y,x]}fitInternal(e,t){t=t||{};let r=t.size;r||(r=this.getViewportSizeMinusPadding_());const i=t.padding!==void 0?t.padding:[0,0,0,0],s=t.nearest!==void 0?t.nearest:!1;let l;t.minResolution!==void 0?l=t.minResolution:t.maxZoom!==void 0?l=this.getResolutionForZoom(t.maxZoom):l=0;const o=this.rotatedExtentForGeometry(e);let f=this.getResolutionForExtentInternal(o,[r[0]-i[1]-i[3],r[1]-i[0]-i[2]]);f=isNaN(f)?l:Math.max(f,l),f=this.getConstrainedResolution(f,s?0:1);const y=this.getRotation(),x=Math.sin(y),B=Math.cos(y),O=Kf(o);O[0]+=(i[1]-i[3])/2*f,O[1]+=(i[0]-i[2])/2*f;const P=O[0]*B-O[1]*x,U=O[1]*B+O[0]*x,j=this.getConstrainedCenter([P,U],f),N=t.callback?t.callback:My;t.duration!==void 0?this.animateInternal({resolution:f,center:j,duration:t.duration,easing:t.easing},N):(this.targetResolution_=f,this.targetCenter_=j,this.applyTargetState_(!1,!0),eb(N,!0))}centerOn(e,t,r){this.centerOnInternal(Im(e,this.getProjection()),t,r)}centerOnInternal(e,t,r){this.setCenterInternal(g4(e,t,r,this.getResolution(),this.getRotation()))}calculateCenterShift(e,t,r,i){let s;const l=this.padding_;if(l&&e){const o=this.getViewportSizeMinusPadding_(-r),f=g4(e,i,[o[0]/2+l[3],o[1]/2+l[0]],t,r);s=[e[0]-f[0],e[1]-f[1]]}return s}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const t=a6(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}adjustCenterInternal(e){const t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}adjustResolution(e,t){t=t&&Im(t,this.getProjection()),this.adjustResolutionInternal(e,t)}adjustResolutionInternal(e,t){const r=this.getAnimating()||this.getInteracting(),i=this.getViewportSize_(this.getRotation()),s=this.constraints_.resolution(this.targetResolution_*e,0,i,r);t&&(this.targetCenter_=this.calculateCenterZoom(s,t)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,t){this.adjustResolution(Math.pow(this.zoomFactor_,-e),t)}adjustRotation(e,t){t&&(t=Im(t,this.getProjection())),this.adjustRotationInternal(e,t)}adjustRotationInternal(e,t){const r=this.getAnimating()||this.getInteracting(),i=this.constraints_.rotation(this.targetRotation_+e,r);t&&(this.targetCenter_=this.calculateCenterRotate(i,t)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&Im(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,t){const r=this.getAnimating()||this.getInteracting()||t,i=this.constraints_.rotation(this.targetRotation_,r),s=this.getViewportSize_(i),l=this.constraints_.resolution(this.targetResolution_,0,s,r),o=this.constraints_.center(this.targetCenter_,l,s,r,this.calculateCenterShift(this.targetCenter_,l,i,s));this.get(np.ROTATION)!==i&&this.set(np.ROTATION,i),this.get(np.RESOLUTION)!==l&&(this.set(np.RESOLUTION,l),this.set("zoom",this.getZoom(),!0)),(!o||!this.get(np.CENTER)||!i2(this.get(np.CENTER),o))&&this.set(np.CENTER,o),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,t,r){e=e!==void 0?e:200;const i=t||0,s=this.constraints_.rotation(this.targetRotation_),l=this.getViewportSize_(s),o=this.constraints_.resolution(this.targetResolution_,i,l),f=this.constraints_.center(this.targetCenter_,o,l,!1,this.calculateCenterShift(this.targetCenter_,o,s,l));if(e===0&&!this.cancelAnchor_){this.targetResolution_=o,this.targetRotation_=s,this.targetCenter_=f,this.applyTargetState_();return}r=r||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==o||this.getRotation()!==s||!this.getCenterInternal()||!i2(this.getCenterInternal(),f))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:s,center:f,resolution:o,duration:e,easing:Ny,anchor:r}))}beginInteraction(){this.resolveConstraints(0),this.setHint(Hl.INTERACTING,1)}endInteraction(e,t,r){r=r&&Im(r,this.getProjection()),this.endInteractionInternal(e,t,r)}endInteractionInternal(e,t,r){this.getInteracting()&&(this.setHint(Hl.INTERACTING,-1),this.resolveConstraints(e,t,r))}getConstrainedCenter(e,t){const r=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),r)}getConstrainedZoom(e,t){const r=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(r,t))}getConstrainedResolution(e,t){t=t||0;const r=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,t,r)}}function eb(n,e){setTimeout(function(){n(e)},0)}function oJ(n){if(n.extent!==void 0){const t=n.smoothExtentConstraint!==void 0?n.smoothExtentConstraint:!0;return KI(n.extent,n.constrainOnlyCenter,t)}const e=kB(n.projection,"EPSG:3857");if(n.multiWorld!==!0&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,KI(t,!1,!1)}return XX}function sJ(n){let e,t,r,l=n.minZoom!==void 0?n.minZoom:m4,o=n.maxZoom!==void 0?n.maxZoom:28;const f=n.zoomFactor!==void 0?n.zoomFactor:2,y=n.multiWorld!==void 0?n.multiWorld:!1,x=n.smoothResolutionConstraint!==void 0?n.smoothResolutionConstraint:!0,B=n.showFullExtent!==void 0?n.showFullExtent:!1,O=kB(n.projection,"EPSG:3857"),P=O.getExtent();let U=n.constrainOnlyCenter,j=n.extent;if(!y&&!j&&O.isGlobal()&&(U=!1,j=P),n.resolutions!==void 0){const N=n.resolutions;t=N[l],r=N[o]!==void 0?N[o]:N[N.length-1],n.constrainResolution?e=tJ(N,x,!U&&j,B):e=RI(t,r,x,!U&&j,B)}else{const Y=(P?Math.max(Ls(P),aA(P)):360*W0.degrees/O.getMetersPerUnit())/JB/Math.pow(2,m4),H=Y/Math.pow(2,28-m4);t=n.maxResolution,t!==void 0?l=0:t=Y/Math.pow(f,l),r=n.minResolution,r===void 0&&(n.maxZoom!==void 0?n.maxResolution!==void 0?r=t/Math.pow(f,o):r=Y/Math.pow(f,o):r=H),o=l+Math.floor(Math.log(t/r)/Math.log(f)),r=t/Math.pow(f,o-l),n.constrainResolution?e=nJ(f,t,r,x,!U&&j,B):e=RI(t,r,x,!U&&j,B)}return{constraint:e,maxResolution:t,minResolution:r,minZoom:l,zoomFactor:f}}function aJ(n){if(n.enableRotation!==void 0?n.enableRotation:!0){const t=n.constrainRotation;return t===void 0||t===!0?iJ():t===!1?DI:typeof t=="number"?rJ(t):DI}return XB}function lJ(n){return!(n.sourceCenter&&n.targetCenter&&!i2(n.sourceCenter,n.targetCenter)||n.sourceResolution!==n.targetResolution||n.sourceRotation!==n.targetRotation)}function g4(n,e,t,r,i){const s=Math.cos(-i);let l=Math.sin(-i),o=n[0]*s-n[1]*l,f=n[1]*s+n[0]*l;o+=(e[0]/2-t[0])*r,f+=(t[1]-e[1]/2)*r,l=-l;const y=o*s-f*l,x=f*s+o*l;return[y,x]}const Ba={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class sU extends yp{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const t=Object.assign({},e);typeof e.properties=="object"&&(delete t.properties,Object.assign(t,e.properties)),t[Ba.OPACITY]=e.opacity!==void 0?e.opacity:1,Hs(typeof t[Ba.OPACITY]=="number","Layer opacity must be a number"),t[Ba.VISIBLE]=e.visible!==void 0?e.visible:!0,t[Ba.Z_INDEX]=e.zIndex,t[Ba.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,t[Ba.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,t[Ba.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,t[Ba.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=t.className!==void 0?t.className:"ol-layer",delete t.className,this.setProperties(t),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const t=this.state_||{layer:this,managed:e===void 0?!0:e},r=this.getZIndex();return t.opacity=SA(Math.round(this.getOpacity()*100)/100,0,1),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=r===void 0&&!t.managed?1/0:r,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t}getLayersArray(e){return yo()}getLayerStatesArray(e){return yo()}getExtent(){return this.get(Ba.EXTENT)}getMaxResolution(){return this.get(Ba.MAX_RESOLUTION)}getMinResolution(){return this.get(Ba.MIN_RESOLUTION)}getMinZoom(){return this.get(Ba.MIN_ZOOM)}getMaxZoom(){return this.get(Ba.MAX_ZOOM)}getOpacity(){return this.get(Ba.OPACITY)}getSourceState(){return yo()}getVisible(){return this.get(Ba.VISIBLE)}getZIndex(){return this.get(Ba.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(Ba.EXTENT,e)}setMaxResolution(e){this.set(Ba.MAX_RESOLUTION,e)}setMinResolution(e){this.set(Ba.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(Ba.MAX_ZOOM,e)}setMinZoom(e){this.set(Ba.MIN_ZOOM,e)}setOpacity(e){Hs(typeof e=="number","Layer opacity must be a number"),this.set(Ba.OPACITY,e)}setVisible(e){this.set(Ba.VISIBLE,e)}setZIndex(e){this.set(Ba.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}class Wy extends sU{constructor(e){const t=Object.assign({},e);delete t.source,super(t),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(Ba.SOURCE,this.handleSourcePropertyChange_);const r=e.source?e.source:null;this.setSource(r)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(Ba.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(hl(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=Fs(e,lo.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0)),this.clearRenderer()),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let t;const r=this.getMapInternal();!e&&r&&(e=r.getView()),e instanceof Ap?t={viewState:e.getState(),extent:e.calculateExtent()}:t=e,!t.layerStatesArray&&r&&(t.layerStatesArray=r.getLayerGroup().getLayerStatesArray());let i;if(t.layerStatesArray){if(i=t.layerStatesArray.find(l=>l.layer===this),!i)return!1}else i=this.getLayerState();const s=this.getExtent();return eO(i,t.viewState)&&(!s||Du(s,t.extent))}getAttributions(e){var s;if(!this.isVisible(e))return[];const t=(s=this.getSource())==null?void 0:s.getAttributions();if(!t)return[];const r=e instanceof Ap?e.getViewStateAndExtent():e;let i=t(r);return Array.isArray(i)||(i=[i]),i}render(e,t){const r=this.getRenderer();return r.prepareFrame(e)?(this.rendered=!0,r.renderFrame(e,t)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(e,t){}renderDeferred(e){const t=this.getRenderer();t&&t.renderDeferred(e)}setMapInternal(e){e||this.unrender(),this.set(Ba.MAP,e)}getMapInternal(){return this.get(Ba.MAP)}setMap(e){this.mapPrecomposeKey_&&(hl(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(hl(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=Fs(e,Of.PRECOMPOSE,this.handlePrecompose_,this),this.mapRenderKey_=Fs(this,lo.CHANGE,e.render,e),this.changed())}handlePrecompose_(e){const t=e.frameState.layerStatesArray,r=this.getLayerState(!1);Hs(!t.some(i=>i.layer===r.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),t.push(r)}setSource(e){this.set(Ba.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}clearRenderer(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_)}disposeInternal(){this.clearRenderer(),this.setSource(null),super.disposeInternal()}}function eO(n,e){if(!n.visible)return!1;const t=e.resolution;if(t<n.minResolution||t>=n.maxResolution)return!1;const r=e.zoom;return r>n.minZoom&&r<=n.maxZoom}const FI={RENDER_ORDER:"renderOrder"};class tO extends Wy{constructor(e){e=e||{};const t=Object.assign({},e);delete t.style,delete t.renderBuffer,delete t.updateWhileAnimating,delete t.updateWhileInteracting,super(t),this.declutter_=e.declutter?String(e.declutter):void 0,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(FI.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e,t){const r=this.getDeclutter();r in e.declutter||(e.declutter[r]=new QL(9)),this.getRenderer().renderDeclutter(e,t)}setRenderOrder(e){this.set(FI.RENDER_ORDER,e)}setStyle(e){this.style_=e===void 0?LL:e;const t=uJ(e);this.styleFunction_=e===null?void 0:IZ(t),this.changed()}setDeclutter(e){this.declutter_=e?String(e):void 0,this.changed()}}function uJ(n){if(n===void 0)return LL;if(!n)return null;if(typeof n=="function"||n instanceof Wh)return n;if(!Array.isArray(n))return II([n]);if(n.length===0)return[];const e=n.length,t=n[0];if(t instanceof Wh){const i=new Array(e);for(let s=0;s<e;++s){const l=n[s];if(!(l instanceof Wh))throw new Error("Expected a list of style instances");i[s]=l}return i}if("style"in t){const i=new Array(e);for(let s=0;s<e;++s){const l=n[s];if(!("style"in l))throw new Error("Expected a list of rules with a style property");i[s]=l}return UX(i)}return II(n)}class nO extends tO{constructor(e){super(e)}createRenderer(){return new hX(this)}}class AJ extends WB{constructor(e,t,r,i,s){const l=s!==void 0?fi.IDLE:fi.LOADED;super(e,t,r,l),this.loader_=s!==void 0?s:null,this.canvas_=i,this.error_=null}getError(){return this.error_}handleLoad_(e){e?(this.error_=e,this.state=fi.ERROR):this.state=fi.LOADED,this.changed()}load(){this.state==fi.IDLE&&(this.state=fi.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))}getImage(){return this.canvas_}}const Lr={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class VC extends LC{constructor(e,t,r){super(),r=r||{},this.tileCoord=e,this.state=t,this.key="",this.transition_=r.transition===void 0?250:r.transition,this.transitionStarts_={},this.interpolate=!!r.interpolate}changed(){this.dispatchEvent(lo.CHANGE)}release(){this.setState(Lr.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==Lr.EMPTY){if(this.state!==Lr.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}}load(){yo()}getAlpha(e,t){if(!this.transition_)return 1;let r=this.transitionStarts_[e];if(!r)r=t,this.transitionStarts_[e]=r;else if(r===-1)return 1;const i=t-r+1e3/60;return i>=this.transition_?1:iU(i/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}disposeInternal(){this.release(),super.disposeInternal()}}class aU extends VC{constructor(e,t,r,i,s,l){super(e,t,l),this.crossOrigin_=i,this.src_=r,this.key=r,this.image_=new Image,i!==null&&(this.image_.crossOrigin=i),this.unlisten_=null,this.tileLoadFunction_=s}getImage(){return this.image_}setImage(e){this.image_=e,this.state=Lr.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=Lr.ERROR,this.unlistenImage_(),this.image_=cJ(),this.changed()}handleImageLoad_(){const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=Lr.LOADED:this.state=Lr.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==Lr.ERROR&&(this.state=Lr.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==Lr.IDLE&&(this.state=Lr.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=yZ(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}disposeInternal(){this.unlistenImage_(),this.image_=null,super.disposeInternal()}}function cJ(){const n=Fu(1,1);return n.fillStyle="rgba(0,0,0,0)",n.fillRect(0,0,1,1),n.canvas}class dJ{constructor(e,t,r){this.decay_=e,this.minVelocity_=t,this.delay_=r,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,t){this.points_.push(e,t,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;let r=t-3;for(;r>0&&this.points_[r+2]>e;)r-=3;const i=this.points_[t+2]-this.points_[r+2];if(i<1e3/60)return!1;const s=this.points_[t]-this.points_[r],l=this.points_[t+1]-this.points_[r+1];return this.angle_=Math.atan2(l,s),this.initialVelocity_=Math.sqrt(s*s+l*l)/i,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}class J1 extends gp{constructor(e,t,r){super(e),this.map=t,this.frameState=r!==void 0?r:null}}class M0 extends J1{constructor(e,t,r,i,s,l){super(e,t,s),this.originalEvent=r,this.pixel_=null,this.coordinate_=null,this.dragging=i!==void 0?i:!1,this.activePointers=l}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const Ku={SINGLECLICK:"singleclick",CLICK:lo.CLICK,DBLCLICK:lo.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},f6={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};class hJ extends LC{constructor(e,t){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=t===void 0?1:t,this.down_=null;const r=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=r,this.pointerdownListenerKey_=Fs(r,f6.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=Fs(r,f6.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(lo.TOUCHMOVE,this.boundHandleTouchMove_,IL?{passive:!1}:!1)}emulateClick_(e){let t=new M0(Ku.CLICK,this.map_,e);this.dispatchEvent(t),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new M0(Ku.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const r=new M0(Ku.SINGLECLICK,this.map_,e);this.dispatchEvent(r)},250)}updateActivePointers_(e){const t=e,r=t.pointerId;if(t.type==Ku.POINTERUP||t.type==Ku.POINTERCANCEL){delete this.trackedTouches_[r];for(const i in this.trackedTouches_)if(this.trackedTouches_[i].target!==t.target){delete this.trackedTouches_[i];break}}else(t.type==Ku.POINTERDOWN||t.type==Ku.POINTERMOVE)&&(this.trackedTouches_[r]=t);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const t=new M0(Ku.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.emulateClicks_&&!t.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(hl),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const t=new M0(Ku.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(t),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const r=this.map_.getOwnerDocument();this.dragListenerKeys_.push(Fs(r,Ku.POINTERMOVE,this.handlePointerMove_,this),Fs(r,Ku.POINTERUP,this.handlePointerUp_,this),Fs(this.element_,Ku.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==r&&this.dragListenerKeys_.push(Fs(this.element_.getRootNode(),Ku.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const t=new M0(Ku.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(t)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const t=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new M0(Ku.POINTERMOVE,this.map_,e,t))}handleTouchMove_(e){const t=this.originalPointerMoveEvent_;(!t||t.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(hl(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(lo.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(hl(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(hl),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const km={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},sd={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},g2=1/0;class fJ{constructor(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,FC(this.queuedElements_)}dequeue(){const e=this.elements_,t=this.priorities_,r=e[0];e.length==1?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));const i=this.keyFunction_(r);return delete this.queuedElements_[i],r}enqueue(e){Hs(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const t=this.priorityFunction_(e);return t!=g2?(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const t=this.elements_,r=this.priorities_,i=t.length,s=t[e],l=r[e],o=e;for(;e<i>>1;){const f=this.getLeftChildIndex_(e),y=this.getRightChildIndex_(e),x=y<i&&r[y]<r[f]?y:f;t[e]=t[x],r[e]=r[x],e=x}t[e]=s,r[e]=l,this.siftDown_(o,e)}siftDown_(e,t){const r=this.elements_,i=this.priorities_,s=r[t],l=i[t];for(;t>e;){const o=this.getParentIndex_(t);if(i[o]>l)r[t]=r[o],i[t]=i[o],t=o;else break}r[t]=s,i[t]=l}reprioritize(){const e=this.priorityFunction_,t=this.elements_,r=this.priorities_;let i=0;const s=t.length;let l,o,f;for(o=0;o<s;++o)l=t[o],f=e(l),f==g2?delete this.queuedElements_[this.keyFunction_(l)]:(r[i]=f,t[i++]=l);t.length=i,r.length=i,this.heapify_()}}class lU extends fJ{constructor(e,t){super(r=>e.apply(null,r),r=>r[0].getKey()),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const t=super.enqueue(e);return t&&e[0].addEventListener(lo.CHANGE,this.boundHandleTileChange_),t}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const t=e.target,r=t.getState();if(r===Lr.LOADED||r===Lr.ERROR||r===Lr.EMPTY){r!==Lr.ERROR&&t.removeEventListener(lo.CHANGE,this.boundHandleTileChange_);const i=t.getKey();i in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[i],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,t){let r=0;for(;this.tilesLoading_<e&&r<t&&this.getCount()>0;){const i=this.dequeue()[0],s=i.getKey();i.getState()===Lr.IDLE&&!(s in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[s]=!0,++this.tilesLoading_,++r,i.load())}}}function pJ(n,e,t,r,i){if(!n||!(t in n.wantedTiles)||!n.wantedTiles[t][e.getKey()])return g2;const s=n.viewState.center,l=r[0]-s[0],o=r[1]-s[1];return 65536*Math.log(i)+Math.sqrt(l*l+o*o)/i}class rO extends yp{constructor(e){super();const t=e.element;t&&!e.target&&!t.style.pointerEvents&&(t.style.pointerEvents="auto"),this.element=t||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){var e;(e=this.element)==null||e.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(e){var t;this.map_&&((t=this.element)==null||t.remove());for(let r=0,i=this.listenerKeys.length;r<i;++r)hl(this.listenerKeys[r]);if(this.listenerKeys.length=0,this.map_=e,e){const r=this.target_??e.getOverlayContainerStopEvent();this.element&&r.appendChild(this.element),this.render!==My&&this.listenerKeys.push(Fs(e,km.POSTRENDER,this.render,this)),e.render()}}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}class mJ extends rO{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.attributions_=e.attributions;const t=e.className!==void 0?e.className:"ol-attribution",r=e.tipLabel!==void 0?e.tipLabel:"Attributions",i=e.expandClassName!==void 0?e.expandClassName:t+"-expand",s=e.collapseLabel!==void 0?e.collapseLabel:"",l=e.collapseClassName!==void 0?e.collapseClassName:t+"-collapse";typeof s=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=s,this.collapseLabel_.className=l):this.collapseLabel_=s;const o=e.label!==void 0?e.label:"i";typeof o=="string"?(this.label_=document.createElement("span"),this.label_.textContent=o,this.label_.className=i):this.label_=o;const f=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=r,this.toggleButton_.appendChild(f),this.toggleButton_.addEventListener(lo.CLICK,this.handleClick_.bind(this),!1);const y=t+" "+bx+" "+QB+(this.collapsed_&&this.collapsible_?" "+cI:"")+(this.collapsible_?"":" ol-uncollapsible"),x=this.element;x.className=y,x.appendChild(this.toggleButton_),x.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const t=this.getMap().getAllLayers(),r=new Set(t.flatMap(i=>i.getAttributions(e)));if(this.attributions_!==void 0&&(Array.isArray(this.attributions_)?this.attributions_.forEach(i=>r.add(i)):r.add(this.attributions_)),!this.overrideCollapsible_){const i=!t.some(s=>{var l;return((l=s.getSource())==null?void 0:l.getAttributionsCollapsible())===!1});this.setCollapsible(i)}return Array.from(r)}async updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=await Promise.all(this.collectSourceAttributions_(e).map(i=>wy(()=>i))),r=t.length>0;if(this.renderedVisible_!=r&&(this.element.style.display=r?"":"none",this.renderedVisible_=r),!Q0(t,this.renderedAttributions_)){kL(this.ulElement_);for(let i=0,s=t.length;i<s;++i){const l=document.createElement("li");l.innerHTML=t[i],this.ulElement_.appendChild(l)}this.renderedAttributions_=t}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(cI),this.collapsed_?AI(this.collapseLabel_,this.label_):AI(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}class gJ extends rO{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const t=e.className!==void 0?e.className:"ol-rotate",r=e.label!==void 0?e.label:"",i=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof r=="string"?(this.label_=document.createElement("span"),this.label_.className=i,this.label_.textContent=r):(this.label_=r,this.label_.classList.add(i));const s=e.tipLabel?e.tipLabel:"Reset rotation",l=document.createElement("button");l.className=t+"-reset",l.setAttribute("type","button"),l.title=s,l.appendChild(this.label_),l.addEventListener(lo.CLICK,this.handleClick_.bind(this),!1);const o=t+" "+bx+" "+QB,f=this.element;f.className=o,f.appendChild(l),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(V_)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const r=t.getRotation();r!==void 0&&(this.duration_>0&&r%(2*Math.PI)!==0?t.animate({rotation:0,duration:this.duration_,easing:Ny}):t.setRotation(0))}render(e){const t=e.frameState;if(!t)return;const r=t.viewState.rotation;if(r!=this.rotation_){const i="rotate("+r+"rad)";if(this.autoHide_){const s=this.element.classList.contains(V_);!s&&r===0?this.element.classList.add(V_):s&&r!==0&&this.element.classList.remove(V_)}this.label_.style.transform=i}this.rotation_=r}}class yJ extends rO{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const t=e.className!==void 0?e.className:"ol-zoom",r=e.delta!==void 0?e.delta:1,i=e.zoomInClassName!==void 0?e.zoomInClassName:t+"-in",s=e.zoomOutClassName!==void 0?e.zoomOutClassName:t+"-out",l=e.zoomInLabel!==void 0?e.zoomInLabel:"+",o=e.zoomOutLabel!==void 0?e.zoomOutLabel:"",f=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",y=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",x=document.createElement("button");x.className=i,x.setAttribute("type","button"),x.title=f,x.appendChild(typeof l=="string"?document.createTextNode(l):l),x.addEventListener(lo.CLICK,this.handleClick_.bind(this,r),!1);const B=document.createElement("button");B.className=s,B.setAttribute("type","button"),B.title=y,B.appendChild(typeof o=="string"?document.createTextNode(o):o),B.addEventListener(lo.CLICK,this.handleClick_.bind(this,-r),!1);const O=t+" "+bx+" "+QB,P=this.element;P.className=O,P.appendChild(x),P.appendChild(B),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,t){t.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const r=this.getMap().getView();if(!r)return;const i=r.getZoom();if(i!==void 0){const s=r.getConstrainedZoom(i+e);this.duration_>0?(r.getAnimating()&&r.cancelAnimations(),r.animate({zoom:s,duration:this.duration_,easing:Ny})):r.setZoom(s)}}}function vJ(n){n=n||{};const e=new Vp;return(n.zoom!==void 0?n.zoom:!0)&&e.push(new yJ(n.zoomOptions)),(n.rotate!==void 0?n.rotate:!0)&&e.push(new gJ(n.rotateOptions)),(n.attribution!==void 0?n.attribution:!0)&&e.push(new mJ(n.attributionOptions)),e}const LI={ACTIVE:"active"};class $C extends yp{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(LI.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(LI.ACTIVE,e)}setMap(e){this.map_=e}}function CJ(n,e,t){const r=n.getCenterInternal();if(r){const i=[r[0]+e[0],r[1]+e[1]];n.animateInternal({duration:t!==void 0?t:250,easing:eJ,center:n.getConstrainedCenter(i)})}}function iO(n,e,t,r){const i=n.getZoom();if(i===void 0)return;const s=n.getConstrainedZoom(i+e),l=n.getResolutionForZoom(s);n.getAnimating()&&n.cancelAnimations(),n.animate({resolution:l,anchor:t,duration:r!==void 0?r:250,easing:Ny})}class _J extends $C{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let t=!1;if(e.type==Ku.DBLCLICK){const r=e.originalEvent,i=e.map,s=e.coordinate,l=r.shiftKey?-this.delta_:this.delta_,o=i.getView();iO(o,l,s,this.duration_),r.preventDefault(),t=!0}return!t}}function p6(n){const e=arguments;return function(t){let r=!0;for(let i=0,s=e.length;i<s&&(r=r&&e[i](t),!!r);++i);return r}}const bJ=function(n){const e=n.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},xJ=function(n){const e=n.map.getTargetElement(),t=e.getRootNode(),r=n.map.getOwnerDocument().activeElement;return t instanceof ShadowRoot?t.host.contains(r):e.contains(r)},uU=function(n){const e=n.map.getTargetElement(),t=e.getRootNode();return(t instanceof ShadowRoot?t.host:e).hasAttribute("tabindex")?xJ(n):!0},MJ=uC,AU=function(n){const e=n.originalEvent;return e.button==0&&!(hZ&&SL&&e.ctrlKey)},cU=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},wJ=function(n){const e=n.originalEvent;return SL?e.metaKey:e.ctrlKey},SJ=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},dU=function(n){const e=n.originalEvent,t=e.target.tagName;return t!=="INPUT"&&t!=="SELECT"&&t!=="TEXTAREA"&&!e.target.isContentEditable},y4=function(n){const e=n.originalEvent;return Hs(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.pointerType=="mouse"},EJ=function(n){const e=n.originalEvent;return Hs(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.isPrimary&&e.button===0};class HC extends $C{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==Ku.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==Ku.POINTERUP){const r=this.handleUpEvent(e);this.handlingDownUpSequence=r&&this.targetPointers.length>0}}else if(e.type==Ku.POINTERDOWN){const r=this.handleDownEvent(e);this.handlingDownUpSequence=r,t=this.stopDown(r)}else e.type==Ku.POINTERMOVE&&this.handleMoveEvent(e);return!t}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function oO(n){const e=n.length;let t=0,r=0;for(let i=0;i<e;i++)t+=n[i].clientX,r+=n[i].clientY;return{clientX:t/e,clientY:r/e}}class BJ extends HC{constructor(e){super({stopDown:Ax}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const t=e.condition?e.condition:p6(cU,EJ);this.condition_=e.onFocusOnly?p6(uU,t):t,this.noKinetic_=!1}handleDragEvent(e){const t=e.map;this.panning_||(this.panning_=!0,t.getView().beginInteraction());const r=this.targetPointers,i=t.getEventPixel(oO(r));if(r.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){const s=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],o=e.map.getView();fH(s,o.getResolution()),SB(s,o.getRotation()),o.adjustCenterInternal(s)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=r.length,e.originalEvent.preventDefault()}handleUpEvent(e){const t=e.map,r=t.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const i=this.kinetic_.getDistance(),s=this.kinetic_.getAngle(),l=r.getCenterInternal(),o=t.getPixelFromCoordinateInternal(l),f=t.getCoordinateFromPixelInternal([o[0]-i*Math.cos(s),o[1]-i*Math.sin(s)]);r.animateInternal({center:r.getConstrainedCenter(f),duration:500,easing:Ny})}return this.panning_&&(this.panning_=!1,r.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const r=e.map.getView();return this.lastCentroid=null,r.getAnimating()&&r.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class OJ extends HC{constructor(e){e=e||{},super({stopDown:Ax}),this.condition_=e.condition?e.condition:bJ,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!y4(e))return;const t=e.map,r=t.getView();if(r.getConstraints().rotation===XB)return;const i=t.getSize(),s=e.pixel,l=Math.atan2(i[1]/2-s[1],s[0]-i[0]/2);if(this.lastAngle_!==void 0){const o=l-this.lastAngle_;r.adjustRotationInternal(-o)}this.lastAngle_=l}handleUpEvent(e){return y4(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return y4(e)&&AU(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class IJ extends DC{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,t=this.endPixel_,r="px",i=this.element_.style;i.left=Math.min(e[0],t[0])+r,i.top=Math.min(e[1],t[1])+r,i.width=Math.abs(t[0]-e[0])+r,i.height=Math.abs(t[1]-e[1])+r}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const e=this.startPixel_,t=this.endPixel_,i=[e,[e[0],t[1]],t,[t[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);i[4]=i[0].slice(),this.geometry_?this.geometry_.setCoordinates([i]):this.geometry_=new jm([i])}getGeometry(){return this.geometry_}}const b1={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class fv extends gp{constructor(e,t,r){super(e),this.coordinate=t,this.mapBrowserEvent=r}}class kJ extends HC{constructor(e){super(),this.on,this.once,this.un,e=e??{},this.box_=new IJ(e.className||"ol-dragbox"),this.minArea_=e.minArea??64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition??AU,this.boxEndCondition_=e.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(e,t,r){const i=r[0]-t[0],s=r[1]-t[1];return i*i+s*s>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.startPixel_&&(this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new fv(b1.BOXDRAG,e.coordinate,e)))}handleUpEvent(e){if(!this.startPixel_)return!1;const t=this.boxEndCondition_(e,this.startPixel_,e.pixel);return t&&this.onBoxEnd(e),this.dispatchEvent(new fv(t?b1.BOXEND:b1.BOXCANCEL,e.coordinate,e)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new fv(b1.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}setActive(e){e||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new fv(b1.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(e)}setMap(e){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new fv(b1.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setMap(e)}}class TJ extends kJ{constructor(e){e=e||{};const t=e.condition?e.condition:SJ;super({condition:t,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const r=this.getMap().getView();let i=this.getGeometry();if(this.out_){const s=r.rotatedExtentForGeometry(i),l=r.getResolutionForExtentInternal(s),o=r.getResolution()/l;i=i.clone(),i.scale(o*o)}r.fitInternal(i,{duration:this.duration_,easing:Ny})}}const Ag={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class PJ extends $C{constructor(e){super(),e=e||{},this.defaultCondition_=function(t){return cU(t)&&dU(t)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let t=!1;if(e.type==lo.KEYDOWN){const r=e.originalEvent,i=r.key;if(this.condition_(e)&&(i==Ag.DOWN||i==Ag.LEFT||i==Ag.RIGHT||i==Ag.UP)){const l=e.map.getView(),o=l.getResolution()*this.pixelDelta_;let f=0,y=0;i==Ag.DOWN?y=-o:i==Ag.LEFT?f=-o:i==Ag.RIGHT?f=o:y=o;const x=[f,y];SB(x,l.getRotation()),CJ(l,x,this.duration_),r.preventDefault(),t=!0}}return!t}}class KJ extends $C{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(t){return!wJ(t)&&dU(t)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let t=!1;if(e.type==lo.KEYDOWN||e.type==lo.KEYPRESS){const r=e.originalEvent,i=r.key;if(this.condition_(e)&&(i==="+"||i==="-")){const s=e.map,l=i==="+"?this.delta_:-this.delta_,o=s.getView();iO(o,l,void 0,this.duration_),r.preventDefault(),t=!0}}return!t}}class RJ extends $C{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const t=e.condition?e.condition:MJ;this.condition_=e.onFocusOnly?p6(uU,t):t,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(e){if(!this.condition_(e)||e.type!==lo.WHEEL)return!0;const r=e.map,i=e.originalEvent;i.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.pixel);let s;if(e.type==lo.WHEEL&&(s=i.deltaY,cZ&&i.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(s/=EL),i.deltaMode===WheelEvent.DOM_DELTA_LINE&&(s*=40)),s===0)return!1;this.lastDelta_=s;const l=Date.now();this.startTime_===void 0&&(this.startTime_=l),(!this.mode_||l-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(s)<4?"trackpad":"wheel");const o=r.getView();if(this.mode_==="trackpad"&&!(o.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(o.getAnimating()&&o.cancelAnimations(),o.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),o.adjustZoom(-s/this.deltaPerZoom_,this.lastAnchor_?r.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=l,!1;this.totalDelta_+=s;const f=Math.max(this.timeout_-(l-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,r),f),!1}handleWheelZoom_(e){const t=e.getView();t.getAnimating()&&t.cancelAnimations();let r=-SA(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(t.getConstrainResolution()||this.constrainResolution_)&&(r=r?r>0?1:-1:0),iO(t,r,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}class DJ extends HC{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=Ax),super(t),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let t=0;const r=this.targetPointers[0],i=this.targetPointers[1],s=Math.atan2(i.clientY-r.clientY,i.clientX-r.clientX);if(this.lastAngle_!==void 0){const f=s-this.lastAngle_;this.rotationDelta_+=f,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=f}this.lastAngle_=s;const l=e.map,o=l.getView();o.getConstraints().rotation!==XB&&(this.anchor_=l.getCoordinateFromPixelInternal(l.getEventPixel(oO(this.targetPointers))),this.rotating_&&(l.render(),o.adjustRotationInternal(t,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}class FJ extends HC{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=Ax),super(t),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let t=1;const r=this.targetPointers[0],i=this.targetPointers[1],s=r.clientX-i.clientX,l=r.clientY-i.clientY,o=Math.sqrt(s*s+l*l);this.lastDistance_!==void 0&&(t=this.lastDistance_/o),this.lastDistance_=o;const f=e.map,y=f.getView();t!=1&&(this.lastScaleDelta_=t),this.anchor_=f.getCoordinateFromPixelInternal(f.getEventPixel(oO(this.targetPointers))),f.render(),y.adjustResolutionInternal(t,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const r=e.map.getView(),i=this.lastScaleDelta_>1?1:-1;return r.endInteraction(this.duration_,i),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}function LJ(n){n=n||{};const e=new Vp,t=new dJ(-.005,.05,100);return(n.altShiftDragRotate!==void 0?n.altShiftDragRotate:!0)&&e.push(new OJ),(n.doubleClickZoom!==void 0?n.doubleClickZoom:!0)&&e.push(new _J({delta:n.zoomDelta,duration:n.zoomDuration})),(n.dragPan!==void 0?n.dragPan:!0)&&e.push(new BJ({onFocusOnly:n.onFocusOnly,kinetic:t})),(n.pinchRotate!==void 0?n.pinchRotate:!0)&&e.push(new DJ),(n.pinchZoom!==void 0?n.pinchZoom:!0)&&e.push(new FJ({duration:n.zoomDuration})),(n.keyboard!==void 0?n.keyboard:!0)&&(e.push(new PJ),e.push(new KJ({delta:n.zoomDelta,duration:n.zoomDuration}))),(n.mouseWheelZoom!==void 0?n.mouseWheelZoom:!0)&&e.push(new RJ({onFocusOnly:n.onFocusOnly,duration:n.zoomDuration})),(n.shiftDragZoom!==void 0?n.shiftDragZoom:!0)&&e.push(new TJ({duration:n.zoomDuration})),e}class S0 extends gp{constructor(e,t){super(e),this.layer=t}}const v4={LAYERS:"layers"};class Gy extends sU{constructor(e){e=e||{};const t=Object.assign({},e);delete t.layers;let r=e.layers;super(t),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(v4.LAYERS,this.handleLayersChanged_),r?Array.isArray(r)?r=new Vp(r.slice(),{unique:!0}):Hs(typeof r.getArray=="function","Expected `layers` to be an array or a `Collection`"):r=new Vp(void 0,{unique:!0}),this.setLayers(r)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(hl),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(Fs(e,fh.ADD,this.handleLayersAdd_,this),Fs(e,fh.REMOVE,this.handleLayersRemove_,this));for(const r in this.listenerKeys_)this.listenerKeys_[r].forEach(hl);FC(this.listenerKeys_);const t=e.getArray();for(let r=0,i=t.length;r<i;r++){const s=t[r];this.registerLayerListeners_(s),this.dispatchEvent(new S0("addlayer",s))}this.changed()}registerLayerListeners_(e){const t=[Fs(e,Sy.PROPERTYCHANGE,this.handleLayerChange_,this),Fs(e,lo.CHANGE,this.handleLayerChange_,this)];e instanceof Gy&&t.push(Fs(e,"addlayer",this.handleLayerGroupAdd_,this),Fs(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[Wo(e)]=t}handleLayerGroupAdd_(e){this.dispatchEvent(new S0("addlayer",e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new S0("removelayer",e.layer))}handleLayersAdd_(e){const t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new S0("addlayer",t)),this.changed()}handleLayersRemove_(e){const t=e.element,r=Wo(t);this.listenerKeys_[r].forEach(hl),delete this.listenerKeys_[r],this.dispatchEvent(new S0("removelayer",t)),this.changed()}getLayers(){return this.get(v4.LAYERS)}setLayers(e){const t=this.getLayers();if(t){const r=t.getArray();for(let i=0,s=r.length;i<s;++i)this.dispatchEvent(new S0("removelayer",r[i]))}this.set(v4.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(t){t.getLayersArray(e)}),e}getLayerStatesArray(e){const t=e!==void 0?e:[],r=t.length;this.getLayers().forEach(function(l){l.getLayerStatesArray(t)});const i=this.getLayerState();let s=i.zIndex;!e&&i.zIndex===void 0&&(s=0);for(let l=r,o=t.length;l<o;l++){const f=t[l];f.opacity*=i.opacity,f.visible=f.visible&&i.visible,f.maxResolution=Math.min(f.maxResolution,i.maxResolution),f.minResolution=Math.max(f.minResolution,i.minResolution),f.minZoom=Math.max(f.minZoom,i.minZoom),f.maxZoom=Math.min(f.maxZoom,i.maxZoom),i.extent!==void 0&&(f.extent!==void 0?f.extent=fp(f.extent,i.extent):f.extent=i.extent),f.zIndex===void 0&&(f.zIndex=s)}return t}getSourceState(){return"ready"}}class UJ extends DC{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,t){yo()}calculateMatrices2D(e){const t=e.viewState,r=e.coordinateToPixelTransform,i=e.pixelToCoordinateTransform;em(r,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),pL(i,r)}forEachFeatureAtCoordinate(e,t,r,i,s,l,o,f){let y;const x=t.viewState;function B(re,V,ne,G){return s.call(l,V,re?ne:null,G)}const O=x.projection,P=EB(e.slice(),O),U=[[0,0]];if(O.canWrapX()&&i){const re=O.getExtent(),V=Ls(re);U.push([-V,0],[V,0])}const j=t.layerStatesArray,N=j.length,Y=[],H=[];for(let re=0;re<U.length;re++)for(let V=N-1;V>=0;--V){const ne=j[V],G=ne.layer;if(G.hasRenderer()&&eO(ne,x)&&o.call(f,G)){const oe=G.getRenderer(),he=G.getSource();if(oe&&he){const fe=he.getWrapX()?P:e,Ee=B.bind(null,ne.managed);H[0]=fe[0]+U[re][0],H[1]=fe[1]+U[re][1],y=oe.forEachFeatureAtCoordinate(H,t,r,Ee,Y)}if(y)return y}}if(Y.length===0)return;const se=1/Y.length;return Y.forEach((re,V)=>re.distanceSq+=V*se),Y.sort((re,V)=>re.distanceSq-V.distanceSq),Y.some(re=>y=re.callback(re.feature,re.layer,re.geometry)),y}hasFeatureAtCoordinate(e,t,r,i,s,l){return this.forEachFeatureAtCoordinate(e,t,r,i,uC,this,s,l)!==void 0}getMap(){return this.map_}renderFrame(e){yo()}scheduleExpireIconCache(e){Bf.canExpireCache()&&e.postRenderFunctions.push(zJ)}}function zJ(n,e){Bf.expire()}class jJ extends UJ{constructor(e){super(e),this.fontChangeListenerKey_=Fs(Dp,Sy.PROPERTYCHANGE,e.redrawText,e),this.element_=document.createElement("div");const t=this.element_.style;t.position="absolute",t.width="100%",t.height="100%",t.zIndex="0",this.element_.className=bx+" ol-layers";const r=e.getViewport();r.insertBefore(this.element_,r.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,t){const r=this.getMap();if(r.hasListener(e)){const i=new HL(e,void 0,t);r.dispatchEvent(i)}}disposeInternal(){hl(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(Of.PRECOMPOSE,e);const t=e.layerStatesArray.sort((o,f)=>o.zIndex-f.zIndex);t.some(o=>o.layer instanceof tO&&o.layer.getDeclutter())&&(e.declutter={});const i=e.viewState;this.children_.length=0;const s=[];let l=null;for(let o=0,f=t.length;o<f;++o){const y=t[o];e.layerIndex=o;const x=y.layer,B=x.getSourceState();if(!eO(y,i)||B!="ready"&&B!="undefined"){x.unrender();continue}const O=x.render(e,l);O&&(O!==l&&(this.children_.push(O),l=O),s.push(y))}this.declutter(e,s),gZ(this.element_,this.children_),this.dispatchRenderEvent(Of.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}declutter(e,t){if(e.declutter){for(let r=t.length-1;r>=0;--r){const i=t[r],s=i.layer;s.getDeclutter()&&s.renderDeclutter(e,i)}t.forEach(r=>r.layer.renderDeferred(e))}}}function hU(n){if(n instanceof Wy){n.setMapInternal(null);return}n instanceof Gy&&n.getLayers().forEach(hU)}function fU(n,e){if(n instanceof Wy){n.setMapInternal(e);return}if(n instanceof Gy){const t=n.getLayers().getArray();for(let r=0,i=t.length;r<i;++r)fU(t[r],e)}}let sO=class extends yp{constructor(e){super(),e=e||{},this.on,this.once,this.un;const t=NJ(e);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:EL,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=gh(),this.pixelToCoordinateTransform_=gh(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=t.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=t.controls||vJ(),this.interactions=t.interactions||LJ({onFocusOnly:!0}),this.overlays_=t.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new lU(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(sd.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(sd.VIEW,this.handleViewChanged_),this.addChangeListener(sd.SIZE,this.handleSizeChanged_),this.addChangeListener(sd.TARGET,this.handleTargetChanged_),this.setProperties(t.values);const r=this;e.view&&!(e.view instanceof Ap)&&e.view.then(function(i){r.setView(new Ap(i))}),this.controls.addEventListener(fh.ADD,i=>{i.element.setMap(this)}),this.controls.addEventListener(fh.REMOVE,i=>{i.element.setMap(null)}),this.interactions.addEventListener(fh.ADD,i=>{i.element.setMap(this)}),this.interactions.addEventListener(fh.REMOVE,i=>{i.element.setMap(null)}),this.overlays_.addEventListener(fh.ADD,i=>{this.addOverlayInternal_(i.element)}),this.overlays_.addEventListener(fh.REMOVE,i=>{const s=i.element.getId();s!==void 0&&delete this.overlayIdIndex_[s.toString()],i.element.setMap(null)}),this.controls.forEach(i=>{i.setMap(this)}),this.interactions.forEach(i=>{i.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){fU(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const t=e.getId();t!==void 0&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,t,r){if(!this.frameState_||!this.renderer_)return;const i=this.getCoordinateFromPixelInternal(e);r=r!==void 0?r:{};const s=r.hitTolerance!==void 0?r.hitTolerance:0,l=r.layerFilter!==void 0?r.layerFilter:uC,o=r.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(i,this.frameState_,s,o,t,null,l,null)}getFeaturesAtPixel(e,t){const r=[];return this.forEachFeatureAtPixel(e,function(i){r.push(i)},t),r}getAllLayers(){const e=[];function t(r){r.forEach(function(i){i instanceof Gy?t(i.getLayers()):e.push(i)})}return t(this.getLayers()),e}hasFeatureAtPixel(e,t){if(!this.frameState_||!this.renderer_)return!1;const r=this.getCoordinateFromPixelInternal(e);t=t!==void 0?t:{};const i=t.layerFilter!==void 0?t.layerFilter:uC,s=t.hitTolerance!==void 0?t.hitTolerance:0,l=t.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(r,this.frameState_,s,l,i,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const r=this.viewport_.getBoundingClientRect(),i=this.getSize(),s=r.width/i[0],l=r.height/i[1],o="changedTouches"in e?e.changedTouches[0]:e;return[(o.clientX-r.left)/s,(o.clientY-r.top)/l]}getTarget(){return this.get(sd.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return a6(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const t=this.frameState_;return t?wA(t.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const t=this.overlayIdIndex_[e.toString()];return t!==void 0?t:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(sd.LAYERGROUP)}setLayers(e){const t=this.getLayerGroup();if(e instanceof Vp){t.setLayers(e);return}const r=t.getLayers();r.clear(),r.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,r=e.length;t<r;++t){const i=e[t];if(!i.visible)continue;const s=i.layer.getRenderer();if(s&&!s.ready)return!0;const l=i.layer.getSource();if(l&&l.loading)return!0}return!1}getPixelFromCoordinate(e){const t=Im(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}getPixelFromCoordinateInternal(e){const t=this.frameState_;return t?wA(t.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(sd.SIZE)}getView(){return this.get(sd.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,t,r,i){return pJ(this.frameState_,e,t,r,i)}handleBrowserEvent(e,t){t=t||e.type;const r=new M0(t,this,e);this.handleMapBrowserEvent(r)}handleMapBrowserEvent(e){if(!this.frameState_)return;const t=e.originalEvent,r=t.type;if(r===f6.POINTERDOWN||r===lo.WHEEL||r===lo.KEYDOWN){const i=this.getOwnerDocument(),s=this.viewport_.getRootNode?this.viewport_.getRootNode():i,l=t.target,o=s instanceof ShadowRoot?s.host===l?s.host.ownerDocument:s:s===i?i.documentElement:s;if(this.overlayContainerStopEvent_.contains(l)||!o.contains(l))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const i=this.getInteractions().getArray().slice();for(let s=i.length-1;s>=0;s--){const l=i[s];if(l.getMap()!==this||!l.getActive()||!this.getTargetElement())continue;if(!l.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){let i=this.maxTilesLoading_,s=i;if(e){const l=e.viewHints;if(l[Hl.ANIMATING]||l[Hl.INTERACTING]){const o=Date.now()-e.time>8;i=o?0:8,s=o?0:2}}t.getTilesLoading()<i&&(t.reprioritize(),t.loadMoreTiles(i,s))}e&&this.renderer_&&!e.animate&&(this.renderComplete_?(this.hasListener(Of.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(Of.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new J1(km.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new J1(km.LOADSTART,this,e))));const r=this.postRenderFunctions_;if(e)for(let i=0,s=r.length;i<s;++i)r[i](this,e);r.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let r=0,i=this.targetChangeHandlerKeys_.length;r<i;++r)hl(this.targetChangeHandlerKeys_[r]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(lo.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(lo.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const r=this.targetElement_.getRootNode();r instanceof ShadowRoot&&this.resizeObserver_.unobserve(r.host),this.setSize(void 0)}const e=this.getTarget(),t=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=t,!t)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new jJ(this)),this.mapBrowserEventHandler_=new hJ(this,this.moveTolerance_);for(const s in Ku)this.mapBrowserEventHandler_.addEventListener(Ku[s],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(lo.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(lo.WHEEL,this.boundHandleBrowserEvent_,IL?{passive:!1}:!1);let r;if(this.keyboardEventTarget_)r=this.keyboardEventTarget_;else{const s=t.getRootNode();r=s instanceof ShadowRoot?s.host:t}this.targetChangeHandlerKeys_=[Fs(r,lo.KEYDOWN,this.handleBrowserEvent,this),Fs(r,lo.KEYPRESS,this.handleBrowserEvent,this)];const i=t.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.observe(i.host),this.resizeObserver_.observe(t)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(hl(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(hl(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=Fs(e,Sy.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Fs(e,lo.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(hl),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new S0("addlayer",e)),this.layerGroupPropertyListenerKeys_=[Fs(e,Sy.PROPERTYCHANGE,this.render,this),Fs(e,lo.CHANGE,this.render,this),Fs(e,"addlayer",this.handleLayerAdd_,this),Fs(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,r=e.length;t<r;++t){const i=e[t].layer;i.hasRenderer()&&i.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){hU(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const t=this.getSize(),r=this.getView(),i=this.frameState_;let s=null;if(t!==void 0&&fI(t)&&r&&r.isDef()){const l=r.getHints(this.frameState_?this.frameState_.viewHints:void 0),o=r.getState();if(s={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:t2(o.center,o.resolution,o.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:o,viewHints:l,wantedTiles:{},mapId:Wo(this),renderTargets:{}},o.nextCenter&&o.nextResolution){const f=isNaN(o.nextRotation)?o.rotation:o.nextRotation;s.nextExtent=t2(o.nextCenter,o.nextResolution,f,t)}}this.frameState_=s,this.renderer_.renderFrame(s),s&&(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),i&&(!this.previousExtent_||!Yg(this.previousExtent_)&&!zm(s.extent,this.previousExtent_))&&(this.dispatchEvent(new J1(km.MOVESTART,this,i)),this.previousExtent_=zy(this.previousExtent_)),this.previousExtent_&&!s.viewHints[Hl.ANIMATING]&&!s.viewHints[Hl.INTERACTING]&&!zm(s.extent,this.previousExtent_)&&(this.dispatchEvent(new J1(km.MOVEEND,this,s)),qF(s.extent,this.previousExtent_))),this.dispatchEvent(new J1(km.POSTRENDER,this,s)),this.renderComplete_=(this.hasListener(km.LOADSTART)||this.hasListener(km.LOADEND)||this.hasListener(Of.RENDERCOMPLETE))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const t=this.getLayerGroup();t&&this.handleLayerRemove_(new S0("removelayer",t)),this.set(sd.LAYERGROUP,e)}setSize(e){this.set(sd.SIZE,e)}setTarget(e){this.set(sd.TARGET,e)}setView(e){if(!e||e instanceof Ap){this.set(sd.VIEW,e);return}this.set(sd.VIEW,new Ap);const t=this;e.then(function(r){t.setView(new Ap(r))})}updateSize(){const e=this.getTargetElement();let t;if(e){const i=getComputedStyle(e),s=e.offsetWidth-parseFloat(i.borderLeftWidth)-parseFloat(i.paddingLeft)-parseFloat(i.paddingRight)-parseFloat(i.borderRightWidth),l=e.offsetHeight-parseFloat(i.borderTopWidth)-parseFloat(i.paddingTop)-parseFloat(i.paddingBottom)-parseFloat(i.borderBottomWidth);!isNaN(s)&&!isNaN(l)&&(t=[Math.max(0,s),Math.max(0,l)],!fI(t)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&aL("No map visible because the map container's width or height are 0."))}const r=this.getSize();t&&(!r||!Q0(t,r))&&(this.setSize(t),this.updateViewportSize_(t))}updateViewportSize_(e){const t=this.getView();t&&t.setViewportSize(e)}};function NJ(n){let e=null;n.keyboardEventTarget!==void 0&&(e=typeof n.keyboardEventTarget=="string"?document.getElementById(n.keyboardEventTarget):n.keyboardEventTarget);const t={},r=n.layers&&typeof n.layers.getLayers=="function"?n.layers:new Gy({layers:n.layers});t[sd.LAYERGROUP]=r,t[sd.TARGET]=n.target,t[sd.VIEW]=n.view instanceof Ap?n.view:new Ap;let i;n.controls!==void 0&&(Array.isArray(n.controls)?i=new Vp(n.controls.slice()):(Hs(typeof n.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),i=n.controls));let s;n.interactions!==void 0&&(Array.isArray(n.interactions)?s=new Vp(n.interactions.slice()):(Hs(typeof n.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),s=n.interactions));let l;return n.overlays!==void 0?Array.isArray(n.overlays)?l=new Vp(n.overlays.slice()):(Hs(typeof n.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),l=n.overlays):l=new Vp,{controls:i,interactions:s,keyboardEventTarget:e,overlays:l,values:t}}const od={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"};class WJ extends yp{constructor(e){super(),this.on,this.once,this.un,this.options=e,this.id=e.id,this.insertFirst=e.insertFirst!==void 0?e.insertFirst:!0,this.stopEvent=e.stopEvent!==void 0?e.stopEvent:!0,this.element=document.createElement("div"),this.element.className=e.className!==void 0?e.className:"ol-overlay-container "+xZ,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=e.autoPan===!0?{}:e.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(od.ELEMENT,this.handleElementChanged),this.addChangeListener(od.MAP,this.handleMapChanged),this.addChangeListener(od.OFFSET,this.handleOffsetChanged),this.addChangeListener(od.POSITION,this.handlePositionChanged),this.addChangeListener(od.POSITIONING,this.handlePositioningChanged),e.element!==void 0&&this.setElement(e.element),this.setOffset(e.offset!==void 0?e.offset:[0,0]),this.setPositioning(e.positioning||"top-left"),e.position!==void 0&&this.setPosition(e.position)}getElement(){return this.get(od.ELEMENT)}getId(){return this.id}getMap(){return this.get(od.MAP)||null}getOffset(){return this.get(od.OFFSET)}getPosition(){return this.get(od.POSITION)}getPositioning(){return this.get(od.POSITIONING)}handleElementChanged(){kL(this.element);const e=this.getElement();e&&this.element.appendChild(e)}handleMapChanged(){var t;this.mapPostrenderListenerKey&&((t=this.element)==null||t.remove(),hl(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const e=this.getMap();if(e){this.mapPostrenderListenerKey=Fs(e,km.POSTRENDER,this.render,this),this.updatePixelPosition();const r=this.stopEvent?e.getOverlayContainerStopEvent():e.getOverlayContainer();this.insertFirst?r.insertBefore(this.element,r.childNodes[0]||null):r.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(e){this.set(od.ELEMENT,e)}setMap(e){this.set(od.MAP,e)}setOffset(e){this.set(od.OFFSET,e)}setPosition(e){this.set(od.POSITION,e)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(e){const t=this.getMap();if(!t||!t.getTargetElement()||!this.get(od.POSITION))return;const r=this.getRect(t.getTargetElement(),t.getSize()),i=this.getElement(),s=this.getRect(i,[pZ(i),mZ(i)]);e=e||{};const l=e.margin===void 0?20:e.margin;if(!Qp(r,s)){const o=s[0]-r[0],f=r[2]-s[2],y=s[1]-r[1],x=r[3]-s[3],B=[0,0];if(o<0?B[0]=o-l:f<0&&(B[0]=Math.abs(f)+l),y<0?B[1]=y-l:x<0&&(B[1]=Math.abs(x)+l),B[0]!==0||B[1]!==0){const O=t.getView().getCenterInternal(),P=t.getPixelFromCoordinateInternal(O);if(!P)return;const U=[P[0]+B[0],P[1]+B[1]],j=e.animation||{};t.getView().animateInternal({center:t.getCoordinateFromPixelInternal(U),duration:j.duration,easing:j.easing})}}}getRect(e,t){const r=e.getBoundingClientRect(),i=r.left+window.pageXOffset,s=r.top+window.pageYOffset;return[i,s,i+t[0],s+t[1]]}setPositioning(e){this.set(od.POSITIONING,e)}setVisible(e){this.rendered.visible!==e&&(this.element.style.display=e?"":"none",this.rendered.visible=e)}updatePixelPosition(){const e=this.getMap(),t=this.getPosition();if(!e||!e.isRendered()||!t){this.setVisible(!1);return}const r=e.getPixelFromCoordinate(t),i=e.getSize();this.updateRenderedPosition(r,i)}updateRenderedPosition(e,t){const r=this.element.style,i=this.getOffset(),s=this.getPositioning();this.setVisible(!0);const l=Math.round(e[0]+i[0])+"px",o=Math.round(e[1]+i[1])+"px";let f="0%",y="0%";s=="bottom-right"||s=="center-right"||s=="top-right"?f="-100%":(s=="bottom-center"||s=="center-center"||s=="top-center")&&(f="-50%"),s=="bottom-left"||s=="bottom-center"||s=="bottom-right"?y="-100%":(s=="center-left"||s=="center-center"||s=="center-right")&&(y="-50%");const x=`translate(${f}, ${y}) translate(${l}, ${o})`;this.rendered.transform_!=x&&(this.rendered.transform_=x,r.transform=x)}getOptions(){return this.options}}class aO{constructor(e,t,r,i){this.minX=e,this.maxX=t,this.minY=r,this.maxY=i}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function x1(n,e,t,r,i){return i!==void 0?(i.minX=n,i.maxX=e,i.minY=t,i.maxY=r,i):new aO(n,e,t,r)}const UI=[];class GJ extends VC{constructor(e,t,r,i,s){super(e,t,{transition:0}),this.context_=null,this.executorGroups={},this.loadingSourceTiles=0,this.hitDetectionImageData={},this.replayState_={},this.sourceTiles=[],this.errorTileKeys={},this.wantedResolution,this.getSourceTiles=i.bind(void 0,this),this.removeSourceTiles_=s,this.wrappedTileCoord=r}getContext(){return this.context_||(this.context_=Fu(1,1,UI)),this.context_}hasContext(){return!!this.context_}getImage(){return this.hasContext()?this.getContext().canvas:null}getReplayState(e){const t=Wo(e);return t in this.replayState_||(this.replayState_[t]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[t]}load(){this.getSourceTiles()}release(){this.context_&&(GC(this.context_),UI.push(this.context_.canvas),this.context_=null),this.removeSourceTiles_(this),this.sourceTiles.length=0,super.release()}}let pU=class extends VC{constructor(e,t,r,i,s,l){super(e,t,l),this.extent=null,this.format_=i,this.features_=null,this.loader_,this.projection=null,this.resolution,this.tileLoadFunction_=s,this.url_=r,this.key=r}getTileUrl(){return this.url_}getFormat(){return this.format_}getFeatures(){return this.features_}load(){this.state==Lr.IDLE&&(this.setState(Lr.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))}onLoad(e,t){this.setFeatures(e)}onError(){this.setState(Lr.ERROR)}setFeatures(e){this.features_=e,this.setState(Lr.LOADED)}setLoader(e){this.loader_=e}};const mU="https://api.mapbox.com";function lO(n){const e="mapbox://";return n.indexOf(e)!==0?"":n.slice(e.length)}function QJ(n,e,t){const r=lO(n);if(!r)return decodeURI(new URL(n,t).href);const i="sprites/";if(r.indexOf(i)!==0)throw new Error(`unexpected sprites url: ${n}`);const s=r.slice(i.length);return`${mU}/styles/v1/${s}/sprite?access_token=${e}`}function y2(n,e){const t=lO(n);if(!t)return decodeURI(new URL(n,location.href).href);const r="styles/";if(t.indexOf(r)!==0)throw new Error(`unexpected style url: ${n}`);const i=t.slice(r.length);return`${mU}/styles/v1/${i}?&access_token=${e}`}const YJ=["a","b","c","d"];function Sb(n,e,t,r){const i=new URL(n,r||location.href),s=lO(n);if(!s)return e?(i.searchParams.has(t)||i.searchParams.set(t,e),[decodeURI(i.href)]):[decodeURI(i.href)];if(s==="mapbox.satellite"){const l=window.devicePixelRatio>=1.5?"@2x":"";return[`https://api.mapbox.com/v4/${s}/{z}/{x}/{y}${l}.webp?access_token=${e}`]}return YJ.map(l=>`https://${l}.tiles.mapbox.com/v4/${s}/{z}/{x}/{y}.vector.pbf?access_token=${e}`)}const zI={},jI={};let qJ=0;function uO(n){return n.id||(n.id=qJ++),n.id}function VJ(n,e){return uO(n)+"."+Wo(e)}function gU(n){let e=zI[n.id];return e||(e={},zI[uO(n)]=e),e}function $J(n){let e=jI[n.id];return e||(e={},jI[uO(n)]=e),e}function C4(n){return n*Math.PI/180}const Jp=function(){const n=[];for(let e=78271.51696402048;n.length<=24;e/=2)n.push(e);return n}();function Bx(n,e){if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof OffscreenCanvas<"u")return new OffscreenCanvas(n,e);const t=document.createElement("canvas");return t.width=n,t.height=e,t}function AO(n,e){let t=0;const r=e.length;for(;t<r;++t)if(e[t]<n&&t+1<r){const s=e[t]/e[t+1];return t+Math.log(e[t]/n)/Math.log(s)}return r-1}function kv(n,e){const t=Math.floor(n),r=Math.pow(2,n-t);return e[t]/r}const M1={};function ky(n,e,t={},r){if(e in M1)return r&&(r.url=M1[e][0].url),M1[e][1];const i=t.transformRequest&&t.transformRequest(e,n)||e,s=function(f){return delete M1[e],Promise.reject(new Error("Error fetching source "+e))},l=function(f){return delete M1[e],f.ok?f.json():Promise.reject(new Error("Error fetching source "+e))},o=wy(()=>i).then(f=>f instanceof Response?(r&&(r.url=f.url),l(f)):(f instanceof Request||(f=new Request(f)),f.headers.get("Accept")||f.headers.set("Accept","application/json"),r&&(r.url=f.url),fetch(f).then(l).catch(s))).catch(s);return M1[e]=[i,o],o}function yU(n,e){if(typeof n=="string")if(n.trim().startsWith("{"))try{const t=JSON.parse(n);return Promise.resolve(t)}catch(t){return Promise.reject(t)}else return n=y2(n,e.accessToken),ky("Style",n,e);else return Promise.resolve(n)}const NI={};function vU(n,e,t={}){const r=[e,JSON.stringify(n)].toString();let i=NI[r];if(!i||t.transformRequest){let s;t.transformRequest&&(s=(o,f)=>{const y=t.transformRequest&&t.transformRequest(f,"Tiles")||f;if(o instanceof pU)o.setLoader((x,B,O)=>{const P=function(U){U.arrayBuffer().then(j=>{const Y=o.getFormat().readFeatures(j,{extent:x,featureProjection:O});o.setFeatures(Y)})};wy(()=>y).then(U=>{if(U instanceof Response)return P(U);fetch(U).then(P).catch(j=>o.setState(Lr.ERROR))}).catch(U=>o.setState(Lr.ERROR))});else{const x=o.getImage();wy(()=>y).then(B=>{if(typeof B=="string"){x.src=B;return}const O=P=>P.blob().then(U=>{const j=URL.createObjectURL(U);x.addEventListener("load",()=>URL.revokeObjectURL(j)),x.addEventListener("error",()=>URL.revokeObjectURL(j)),x.src=j});if(B instanceof Response)return O(B);fetch(B).then(O).catch(P=>o.setState(Lr.ERROR))}).catch(B=>o.setState(Lr.ERROR))}});const l=n.url;if(l&&!n.tiles){const o=Sb(l,t.accessToken,t.accessTokenParam||"access_token",e||location.href);if(l.startsWith("mapbox://"))i=Promise.resolve({tileJson:Object.assign({},n,{url:void 0,tiles:o}),tileLoadFunction:s});else{const f={};i=ky("Source",o[0],t,f).then(function(y){return y.tiles=y.tiles.map(function(x){return y.scheme==="tms"&&(x=x.replace("{y}","{-y}")),Sb(x,t.accessToken,t.accessTokenParam||"access_token",f.url)[0]}),Promise.resolve({tileJson:y,tileLoadFunction:s})})}}else n=Object.assign({},n,{tiles:n.tiles.map(function(o){return n.scheme==="tms"&&(o=o.replace("{y}","{-y}")),Sb(o,t.accessToken,t.accessTokenParam||"access_token",e||location.href)[0]})}),i=Promise.resolve({tileJson:Object.assign({},n),tileLoadFunction:s});NI[r]=i}return i}function WI(n,e,t,r){const i=[2*t*e.pixelRatio+e.width,2*t*e.pixelRatio+e.height],s=Bx(i[0],i[1]),l=s.getContext("2d");l.drawImage(n,e.x,e.y,e.width,e.height,t*e.pixelRatio,t*e.pixelRatio,e.width,e.height);const o=l.getImageData(0,0,i[0],i[1]);l.globalCompositeOperation="destination-over",l.fillStyle=`rgba(${r.r*255},${r.g*255},${r.b*255},${r.a})`;const f=o.data;for(let y=0,x=o.width;y<x;++y)for(let B=0,O=o.height;B<O;++B){const P=(B*x+y)*4;f[P+3]>0&&l.arc(y,B,t*e.pixelRatio,0,2*Math.PI)}return l.fill(),s}function HJ(n,e,t){const r=Math.max(0,Math.min(1,(t-n)/(e-n)));return r*r*(3-2*r)}function GI(n,e,t){const r=Bx(e.width,e.height),i=r.getContext("2d");i.drawImage(n,e.x,e.y,e.width,e.height,0,0,e.width,e.height);const s=i.getImageData(0,0,e.width,e.height),l=s.data;for(let o=0,f=s.width;o<f;++o)for(let y=0,x=s.height;y<x;++y){const B=(y*f+o)*4,O=l[B+3]/255,P=.75,U=.1,j=HJ(P-U,P+U,O);j>0?(l[B+0]=Math.round(255*t.r*j),l[B+1]=Math.round(255*t.g*j),l[B+2]=Math.round(255*t.b*j),l[B+3]=Math.round(255*j)):l[B+3]=0}return i.putImageData(s,0,0),r}const ZJ=Array(256).join("");function m6(n,e){if(e>=.05){let t="";const r=n.split(`
`),i=ZJ.slice(0,Math.round(e/.1));for(let s=0,l=r.length;s<l;++s)s>0&&(t+=`
`),t+=r[s].split("").join(i);return t}return n}let _4;function CU(){return _4||(_4=Bx(1,1).getContext("2d")),_4}function cg(n,e){return CU().measureText(n).width+(n.length-1)*e}const QI={};function g6(n,e,t,r){if(n.indexOf(`
`)!==-1){const l=n.split(`
`),o=[];for(let f=0,y=l.length;f<y;++f)o.push(g6(l[f],e,t,r));return o.join(`
`)}const i=t+","+e+","+n+","+r;let s=QI[i];if(!s){const l=n.split(" ");if(l.length>1){const o=CU();o.font=e;const y=o.measureText("M").width*t;let x="";const B=[];for(let O=0,P=l.length;O<P;++O){const U=l[O],j=x+(x?" ":"")+U;cg(j,r)<=y?x=j:(x&&B.push(x),x=U)}x&&B.push(x);for(let O=0,P=B.length;O<P&&P>1;++O){const U=B[O];if(cg(U,r)<y*.35){const j=O>0?cg(B[O-1],r):1/0,N=O<P-1?cg(B[O+1],r):1/0;B.splice(O,1),P-=1,j<N?(B[O-1]+=" "+U,O-=1):B[O]=U+" "+B[O]}}for(let O=0,P=B.length-1;O<P;++O){const U=B[O],j=B[O+1];if(cg(U,r)>y*.7&&cg(j,r)<y*.6){const N=U.split(" "),Y=N.pop();cg(Y,r)<y*.2&&(B[O]=N.join(" "),B[O+1]=Y+" "+j),P-=1}}s=B.join(`
`)}else s=n;s=m6(s,r),QI[i]=s}return s}const XJ=/font-family: ?([^;]*);/,JJ=/("|')/g;let tb;function eee(n){if(!tb){tb={};const e=document.styleSheets;for(let t=0,r=e.length;t<r;++t){const i=e[t];try{const s=i.rules||i.cssRules;if(s)for(let l=0,o=s.length;l<o;++l){const f=s[l];if(f.type==5){const y=f.cssText.match(XJ);tb[y[1].replace(JJ,"")]=!0}}}catch{}}}return n in tb}const b4={};function tee(n,e="https://cdn.jsdelivr.net/npm/@fontsource/{font-family}/{fontweight}{-fontstyle}.css"){const t=n.toString();if(t in b4)return b4[t];const r=[];for(let i=0,s=n.length;i<s;++i){n[i]=n[i].replace("Arial Unicode MS","Arial");const l=n[i],o=$E(l,1);RL(o);const f=o.split(" ");r.push([f.slice(3).join(" ").replace(/"/g,""),f[1],f[0]])}for(let i=0,s=r.length;i<s;++i){const l=r[i],o=l[0];if(!eee(o)&&Dp.get(`${l[2]}
${l[1]} 
${o}`)!==100){const f=e.replace("{font-family}",o.replace(/ /g,"-").toLowerCase()).replace("{Font+Family}",o.replace(/ /g,"+")).replace("{fontweight}",l[1]).replace("{-fontstyle}",l[2].replace("normal","").replace(/(.+)/,"-$1")).replace("{fontstyle}",l[2]);if(!document.querySelector('link[href="'+f+'"]')){const y=document.createElement("link");y.href=f,y.rel="stylesheet",document.head.appendChild(y)}}}return b4[t]=n,n}const nee={Point:1,MultiPoint:1,LineString:2,MultiLineString:2,Polygon:3,MultiPolygon:3},ree={center:[.5,.5],left:[0,.5],right:[1,.5],top:[.5,0],bottom:[.5,1],"top-left":[0,0],"top-right":[1,0],"bottom-left":[0,1],"bottom-right":[1,1]},iee=function(n,e){const t=ox(n,e);if(t.result==="error")throw new Error(t.value.map(r=>`${r.key}: ${r.message}`).join(", "));return t.value},y6={},v2={zoom:0};let nb,x4;function Si(n,e,t,r,i,s,l){const o=n.id;s||(s={},console.warn("No functionCache provided to getValue()")),s[o]||(s[o]={});const f=s[o];if(!f[t]){let y=(n[e]||y6)[t];const x=Hq[`${e}_${n.type}`][t];y===void 0&&(y=x.default);let B=Ly(y);if(!B&&Fy(y)&&(y=lB(y,x),B=!0),B){const O=iee(y,x);f[t]=O.evaluate.bind(O)}else x.type=="color"&&(y=wl.parse(y)),f[t]=function(){return y}}return v2.zoom=r,f[t](v2,i,l)}function YI(n,e,t,r,i){return Si(n,"layout",`${r}-allow-overlap`,e,t,i)?Si(n,"layout",`${r}-ignore-placement`,e,t,i)?"none":"obstacle":"declutter"}function oee(n,e,t,r,i){return i||console.warn("No filterCache provided to evaluateFilter()"),n in i||(i[n]=vq(e).filter),v2.zoom=r,i[n](v2,t)}function w0(n,e){if(n){if(n.a===0||e===0)return;const t=n.a;return e=e===void 0?1:e,t===0?"transparent":"rgba("+Math.round(n.r*255/t)+","+Math.round(n.g*255/t)+","+Math.round(n.b*255/t)+","+t*e+")"}return n}const see=/\{[^{}}]*\}/g;function M4(n,e){return n.replace(see,function(t){return e[t.slice(1,-1)]||""})}const aee={};function lee(n,e,t,r=Jp,i=void 0,s=void 0,l=void 0,o=void 0){if(typeof e=="string"&&(e=JSON.parse(e)),e.version!=8)throw new Error("glStyle version 8 required.");aee[VJ(e,n)]=Array.from(arguments);let f,y,x;s&&wy(()=>s).then(async G=>{let oe;if(typeof Image<"u"){const he=new Image;if(typeof G=="string")he.crossOrigin="anonymous",he.src=G;else{let fe;G instanceof Request?fe=await fetch(G):G instanceof Response&&(fe=G);const Ee=await fe.blob();oe=URL.createObjectURL(Ee),he.src=oe}he.addEventListener("load",function fe(){he.removeEventListener("load",fe),f=he,y=[he.width,he.height],n.changed(),oe&&URL.revokeObjectURL(oe)}),he.addEventListener("error",function fe(){URL.revokeObjectURL(oe),he.removeEventListener("error",fe)})}else if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope){const he=self;he.postMessage({action:"loadImage",src:G}),he.addEventListener("message",function(Ee){Ee.data.action==="imageLoaded"&&Ee.data.src===G&&(f=Ee.data.image,y=[f.width,f.height])})}});const B=N6(e.layers),O={},P=[],U={},j={},N=gU(e),Y=$J(e);let H;for(let G=0,oe=B.length;G<oe;++G){const he=B[G],fe=he.id;if(typeof t=="string"&&he.source==t||Array.isArray(t)&&t.indexOf(fe)!==-1){const Ee=he["source-layer"];if(H){if(he.source!==H)throw new Error(`Layer "${fe}" does not use source "${H}`)}else{H=he.source;const Se=e.sources[H];if(!Se)throw new Error(`Source "${H}" is not defined`);const Ke=Se.type;if(Ke!=="vector"&&Ke!=="geojson")throw new Error(`Source "${H}" is not of type "vector" or "geojson", but "${Ke}"`)}let me=O[Ee];me||(me=[],O[Ee]=me),me.push({layer:he,index:G}),P.push(fe)}}const se=new T0,re=new Pm,V=[],ne=function(G,oe,he){const fe=G.getProperties(),Ee=O[fe.layer];if(!Ee)return;let me=r.indexOf(oe);me==-1&&(me=AO(oe,r));const Se=nee[G.getGeometry().getType()],Ke={id:G.getId(),properties:fe,type:Se},xe=n.get("mapbox-featurestate")[G.getId()];let at=-1;for(let Ze=0,Je=Ee.length;Ze<Je;++Ze){const Ne=Ee[Ze],we=Ne.layer,De=we.id;if(he!==void 0&&he!==De)continue;const He=we.layout||y6,bt=we.paint||y6;if(He.visibility==="none"||"minzoom"in we&&me<we.minzoom||"maxzoom"in we&&me>=we.maxzoom)continue;const Yt=we.filter;if(!Yt||oee(De,Yt,Ke,me,Y)){let yt,Ft,Pt,Ue,Pe,Be;const it=Ne.index;if(Se==3&&(we.type=="fill"||we.type=="fill-extrusion"))if(Ft=Si(we,"paint",we.type+"-opacity",me,Ke,N,xe),we.type+"-pattern"in bt){const lr=Si(we,"paint",we.type+"-pattern",me,Ke,N,xe);if(lr){const vr=typeof lr=="string"?M4(lr,fe):lr.toString();if(f&&i&&i[vr]){++at,Be=V[at],(!Be||!Be.getFill()||Be.getStroke()||Be.getText())&&(Be=new Wh({fill:new Pm}),V[at]=Be),Pt=Be.getFill(),Be.setZIndex(it);const Zn=vr+"."+Ft;let Ge=j[Zn];if(!Ge){const ce=i[vr],pe=Bx(ce.width,ce.height),nt=pe.getContext("2d");nt.globalAlpha=Ft,nt.drawImage(f,ce.x,ce.y,ce.width,ce.height,0,0,ce.width,ce.height),Ge=nt.createPattern(pe,"repeat"),j[Zn]=Ge}Pt.setColor(Ge)}}}else yt=w0(Si(we,"paint",we.type+"-color",me,Ke,N,xe),Ft),we.type+"-outline-color"in bt&&(Pe=w0(Si(we,"paint",we.type+"-outline-color",me,Ke,N,xe),Ft)),Pe||(Pe=yt),(yt||Pe)&&(++at,Be=V[at],(!Be||yt&&!Be.getFill()||!yt&&Be.getFill()||Pe&&!Be.getStroke()||!Pe&&Be.getStroke()||Be.getText())&&(Be=new Wh({fill:yt?new Pm:void 0,stroke:Pe?new T0:void 0}),V[at]=Be),yt&&(Pt=Be.getFill(),Pt.setColor(yt)),Pe&&(Ue=Be.getStroke(),Ue.setColor(Pe),Ue.setWidth(.5)),Be.setZIndex(it));if(Se!=1&&we.type=="line"){"line-pattern"in bt?yt=void 0:yt=w0(Si(we,"paint","line-color",me,Ke,N,xe),Si(we,"paint","line-opacity",me,Ke,N,xe));const lr=Si(we,"paint","line-width",me,Ke,N,xe);yt&&lr>0&&(++at,Be=V[at],(!Be||!Be.getStroke()||Be.getFill()||Be.getText())&&(Be=new Wh({stroke:new T0}),V[at]=Be),Ue=Be.getStroke(),Ue.setLineCap(Si(we,"layout","line-cap",me,Ke,N,xe)),Ue.setLineJoin(Si(we,"layout","line-join",me,Ke,N,xe)),Ue.setMiterLimit(Si(we,"layout","line-miter-limit",me,Ke,N,xe)),Ue.setColor(yt),Ue.setWidth(lr),Ue.setLineDash(bt["line-dasharray"]?Si(we,"paint","line-dasharray",me,Ke,N,xe).map(function(vr){return vr*lr}):null),Be.setZIndex(it))}let _t=!1,pt=null,Lt=0,nn,Kt,vn;if((Se==1||Se==2)&&"icon-image"in He){const lr=Si(we,"layout","icon-image",me,Ke,N,xe);if(lr){nn=typeof lr=="string"?M4(lr,fe):lr.toString();let vr;const Zn=o?o(n,nn):void 0;if(f&&i&&i[nn]||Zn){const Ge=Si(we,"layout","icon-rotation-alignment",me,Ke,N,xe);if(Se==2){const ce=G.getGeometry();if(ce.getFlatMidpoint||ce.getFlatMidpoints){const pe=ce.getExtent();if(Math.sqrt(Math.max(Math.pow((pe[2]-pe[0])/oe,2),Math.pow((pe[3]-pe[1])/oe,2)))>150){const wt=ce.getType()==="MultiLineString"?ce.getFlatMidpoints():ce.getFlatMidpoint();if(x4||(nb=[NaN,NaN],x4=new ld("Point",nb,[],2,{},void 0)),vr=x4,nb[0]=wt[0],nb[1]=wt[1],Si(we,"layout","symbol-placement",me,Ke,N,xe)==="line"&&Ge==="map"){const sn=ce.getStride(),Hn=ce.getFlatCoordinates();for(let Ve=0,J=Hn.length-sn;Ve<J;Ve+=sn){const ve=Hn[Ve],p=Hn[Ve+1],Fe=Hn[Ve+sn],Qe=Hn[Ve+sn+1],rt=Math.min(ve,Fe),ct=Math.max(ve,Fe),dt=wt[0],qt=wt[1],Gt=(Qe-p)*(dt-ve)-(Fe-ve)*(qt-p);if(Math.abs(Gt)<.001&&dt<=ct&&dt>=rt){Lt=Math.atan2(p-Qe,Fe-ve);break}}}}}}if(Se!==2||vr){const ce=Si(we,"layout","icon-size",me,Ke,N,xe),pe=bt["icon-color"]!==void 0?Si(we,"paint","icon-color",me,Ke,N,xe):null;if(!pe||pe.a!==0){const nt=Si(we,"paint","icon-halo-color",me,Ke,N,xe),wt=Si(we,"paint","icon-halo-width",me,Ke,N,xe);let Ht=`${nn}.${ce}.${wt}.${nt}`;if(pe!==null&&(Ht+=`.${pe}`),Kt=U[Ht],!Kt){const sn=YI(we,me,Ke,"icon",N);let Hn;"icon-offset"in He&&(Hn=Si(we,"layout","icon-offset",me,Ke,N,xe).slice(0),Hn[0]*=ce,Hn[1]*=-ce);let Ve=pe?[pe.r*255,pe.g*255,pe.b*255,pe.a]:void 0;if(Zn){const J={color:Ve,rotateWithView:Ge==="map",displacement:Hn,declutterMode:sn,scale:ce};typeof Zn=="string"?J.src=Zn:(J.img=Zn,J.imgSize=[Zn.width,Zn.height]),Kt=new c2(J)}else{const J=i[nn];let ve,p,Fe;wt?J.sdf?(ve=WI(GI(f,J,pe||[0,0,0,1]),{x:0,y:0,width:J.width,height:J.height,pixelRatio:J.pixelRatio},wt,nt),Ve=void 0):ve=WI(f,J,wt,nt):(J.sdf?(x||(x=GI(f,{x:0,y:0,width:y[0],height:y[1]},{r:1,g:1,b:1,a:1})),ve=x):ve=f,p=[J.width,J.height],Fe=[J.x,J.y]),Kt=new c2({color:Ve,img:ve,imgSize:y,size:p,offset:Fe,rotateWithView:Ge==="map",scale:ce/J.pixelRatio,displacement:Hn,declutterMode:sn})}U[Ht]=Kt}}Kt&&(++at,Be=V[at],(!Be||!Be.getImage()||Be.getFill()||Be.getStroke())&&(Be=new Wh,V[at]=Be),Be.setGeometry(vr),Kt.setRotation(Lt+C4(Si(we,"layout","icon-rotate",me,Ke,N,xe))),Kt.setOpacity(Si(we,"paint","icon-opacity",me,Ke,N,xe)),Kt.setAnchor(ree[Si(we,"layout","icon-anchor",me,Ke,N,xe)]),Be.setImage(Kt),pt=Be.getText(),Be.setText(void 0),Be.setZIndex(it),_t=!0,vn=!1)}else vn=!0}}}if(Se==1&&we.type==="circle"){++at,Be=V[at],(!Be||!Be.getImage()||Be.getFill()||Be.getStroke())&&(Be=new Wh,V[at]=Be);const lr="circle-radius"in bt?Si(we,"paint","circle-radius",me,Ke,N,xe):5,vr=w0(Si(we,"paint","circle-stroke-color",me,Ke,N,xe),Si(we,"paint","circle-stroke-opacity",me,Ke,N,xe)),Zn=Si(we,"paint","circle-translate",me,Ke,N,xe),Ge=w0(Si(we,"paint","circle-color",me,Ke,N,xe),Si(we,"paint","circle-opacity",me,Ke,N,xe)),ce=Si(we,"paint","circle-stroke-width",me,Ke,N,xe),pe=lr+"."+vr+"."+Ge+"."+ce+"."+Zn[0]+"."+Zn[1];Kt=U[pe],Kt||(Kt=new QC({radius:lr,displacement:[Zn[0],-Zn[1]],stroke:vr&&ce>0?new T0({width:ce,color:vr}):void 0,fill:Ge?new Pm({color:Ge}):void 0,declutterMode:"none"}),U[pe]=Kt),Be.setImage(Kt),pt=Be.getText(),Be.setText(void 0),Be.setGeometry(void 0),Be.setZIndex(it),_t=!0}let Gn,tn,dr,Pn,pn,$n;if("text-field"in He){Pn=Math.round(Si(we,"layout","text-size",me,Ke,N,xe));const lr=Si(we,"layout","text-font",me,Ke,N,xe);dr=Si(we,"layout","text-line-height",me,Ke,N,xe),tn=$E(l?l(lr,e.metadata?e.metadata["ol:webfonts"]:void 0):lr,Pn,dr),tn.includes("sans-serif")||(tn+=",sans-serif"),pn=Si(we,"layout","text-letter-spacing",me,Ke,N,xe),$n=Si(we,"layout","text-max-width",me,Ke,N,xe);const vr=Si(we,"layout","text-field",me,Ke,N,xe);typeof vr=="object"&&vr.sections?vr.sections.length===1?Gn=vr.toString():Gn=vr.sections.reduce((Zn,Ge,ce)=>{const pe=Ge.fontStack?Ge.fontStack.split(","):lr,nt=$E(l?l(pe):pe,Pn*(Ge.scale||1),dr);let wt=Ge.text;if(wt===`
`)return Zn.push(`
`,""),Zn;if(Se==2)return Zn.push(m6(wt,pn),nt),Zn;wt=g6(wt,nt,$n,pn).split(`
`);for(let Ht=0,sn=wt.length;Ht<sn;++Ht)Ht>0&&Zn.push(`
`,""),Zn.push(wt[Ht],nt);return Zn},[]):Gn=M4(vr,fe).trim(),Ft=Si(we,"paint","text-opacity",me,Ke,N,xe)}if(Gn&&Ft&&!vn){_t||(++at,Be=V[at],(!Be||!Be.getText()||Be.getFill()||Be.getStroke())&&(Be=new Wh,V[at]=Be),Be.setImage(void 0),Be.setGeometry(void 0));const lr=YI(we,me,Ke,"text",N);Be.getText()||Be.setText(pt),pt=Be.getText(),(!pt||"getDeclutterMode"in pt&&pt.getDeclutterMode()!==lr)&&(pt=new wx({padding:[2,2,2,2],declutterMode:lr}),Be.setText(pt));const vr=Si(we,"layout","text-transform",me,Ke,N,xe);vr=="uppercase"?Gn=Array.isArray(Gn)?Gn.map((Qe,rt)=>rt%2?Qe:Qe.toUpperCase()):Gn.toUpperCase():vr=="lowercase"&&(Gn=Array.isArray(Gn)?Gn.map((Qe,rt)=>rt%2?Qe:Qe.toLowerCase()):Gn.toLowerCase());const Zn=Array.isArray(Gn)?Gn:Se==2?m6(Gn,pn):g6(Gn,tn,$n,pn);if(pt.setText(Zn),pt.setFont(tn),pt.setRotation(C4(Si(we,"layout","text-rotate",me,Ke,N,xe))),typeof pt.setKeepUpright=="function"){const Qe=Si(we,"layout","text-keep-upright",me,Ke,N,xe);pt.setKeepUpright(Qe)}const Ge=Si(we,"layout","text-anchor",me,Ke,N,xe),ce=_t||Se==1?"point":Si(we,"layout","symbol-placement",me,Ke,N,xe);let pe;if(ce==="line-center"?(pt.setPlacement("line"),pe="center"):pt.setPlacement(ce),ce==="line"&&typeof pt.setRepeat=="function"){const Qe=Si(we,"layout","symbol-spacing",me,Ke,N,xe);pt.setRepeat(Qe*2)}pt.setOverflow(ce==="point");let nt=Si(we,"paint","text-halo-width",me,Ke,N,xe);const wt=Si(we,"layout","text-offset",me,Ke,N,xe),Ht=Si(we,"paint","text-translate",me,Ke,N,xe);let sn=0,Hn=0;if(ce=="point"){pe="center",Ge.indexOf("left")!==-1?(pe="left",Hn=nt):Ge.indexOf("right")!==-1&&(pe="right",Hn=-nt);const Qe=Si(we,"layout","text-rotation-alignment",me,Ke,N,xe);pt.setRotateWithView(Qe=="map")}else pt.setMaxAngle(C4(Si(we,"layout","text-max-angle",me,Ke,N,xe))*Gn.length/Zn.length),pt.setRotateWithView(!1);pt.setTextAlign(pe);let Ve="middle";Ge.indexOf("bottom")==0?(Ve="bottom",sn=-nt-.5*(dr-1)*Pn):Ge.indexOf("top")==0&&(Ve="top",sn=nt+.5*(dr-1)*Pn),pt.setTextBaseline(Ve);const J=Si(we,"layout","text-justify",me,Ke,N,xe);pt.setJustify(J==="auto"?void 0:J),pt.setOffsetX(wt[0]*Pn+Hn+Ht[0]),pt.setOffsetY(wt[1]*Pn+sn+Ht[1]),re.setColor(w0(Si(we,"paint","text-color",me,Ke,N,xe),Ft)),pt.setFill(re);const ve=w0(Si(we,"paint","text-halo-color",me,Ke,N,xe),Ft);if(ve&&nt>0){se.setColor(ve),nt*=2;const Qe=.5*Pn;se.setWidth(nt<=Qe?nt:Qe),pt.setStroke(se)}else pt.setStroke(void 0);const p=Si(we,"layout","text-padding",me,Ke,N,xe),Fe=pt.getPadding();p!==Fe[0]&&(Fe[0]=p,Fe[1]=p,Fe[2]=p,Fe[3]=p),Be.setZIndex(it)}}}if(at>-1)return V.length=at+1,V};return n.setStyle(ne),n.set("mapbox-source",H),n.set("mapbox-layers",P),n.set("mapbox-featurestate",n.get("mapbox-featurestate")||{}),ne}class _U{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=cx,this.supportedMediaTypes=null}getReadOptions(e,t){if(t){let r=t.dataProjection?ya(t.dataProjection):this.readProjection(e);t.extent&&r&&r.getUnits()==="tile-pixels"&&(r=ya(r),r.setWorldExtent(t.extent)),t={dataProjection:r,featureProjection:t.featureProjection}}return this.adaptOptions(t)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},e)}getType(){return yo()}readFeature(e,t){return yo()}readFeatures(e,t){return yo()}readGeometry(e,t){return yo()}readProjection(e){return yo()}writeFeature(e,t){return yo()}writeFeatures(e,t){return yo()}writeGeometry(e,t){return yo()}}function Ox(n,e,t){const r=t?ya(t.featureProjection):null,i=t?ya(t.dataProjection):null;let s=n;if(r&&i&&!Rg(r,i)){e&&(s=n.clone());const l=e?r:i,o=e?i:r;l.getUnits()==="tile-pixels"?s.transform(l,o):s.applyTransform(cC(l,o))}if(e&&t&&t.decimals!==void 0){const l=Math.pow(10,t.decimals),o=function(f){for(let y=0,x=f.length;y<x;++y)f[y]=Math.round(f[y]*l)/l;return f};s===n&&(s=n.clone()),s.applyTransform(o)}return s}const uee={Point:jg,LineString:zg,Polygon:jm,MultiPoint:WC,MultiLineString:fC,MultiPolygon:pC};function Aee(n,e,t){return Array.isArray(e[0])?(rL(n,0,e,t)||(n=n.slice(),t6(n,0,e,t)),n):(MB(n,0,e,t)||(n=n.slice(),r2(n,0,e,t)),n)}function bU(n,e){var s;const t=n.geometry;if(!t)return[];if(Array.isArray(t))return t.map(l=>bU({...n,geometry:l})).flat();const r=t.type==="MultiPolygon"?"Polygon":t.type;if(r==="GeometryCollection"||r==="Circle")throw new Error("Unsupported geometry type: "+r);const i=t.layout.length;return Ox(new ld(r,r==="Polygon"?Aee(t.flatCoordinates,t.ends,i):t.flatCoordinates,(s=t.ends)==null?void 0:s.flat(),i,n.properties||{},n.id).enableSimplifyTransformed(),!1,e)}function cO(n,e){if(!n)return null;if(Array.isArray(n)){const r=n.map(i=>cO(i,e));return new a2(r)}const t=uee[n.type];return Ox(new t(n.flatCoordinates,n.layout||"XY",n.ends),!1,e)}class cee extends _U{constructor(){super()}getType(){return"json"}readFeature(e,t){return this.readFeatureFromObject(rb(e),this.getReadOptions(e,t))}readFeatures(e,t){return this.readFeaturesFromObject(rb(e),this.getReadOptions(e,t))}readFeatureFromObject(e,t){return yo()}readFeaturesFromObject(e,t){return yo()}readGeometry(e,t){return this.readGeometryFromObject(rb(e),this.getReadOptions(e,t))}readGeometryFromObject(e,t){return yo()}readProjection(e){return this.readProjectionFromObject(rb(e))}readProjectionFromObject(e){return yo()}writeFeature(e,t){return JSON.stringify(this.writeFeatureObject(e,t))}writeFeatureObject(e,t){return yo()}writeFeatures(e,t){return JSON.stringify(this.writeFeaturesObject(e,t))}writeFeaturesObject(e,t){return yo()}writeGeometry(e,t){return JSON.stringify(this.writeGeometryObject(e,t))}writeGeometryObject(e,t){return yo()}}function rb(n){if(typeof n=="string"){const e=JSON.parse(n);return e||null}return n!==null?n:null}class qI extends cee{constructor(e){e=e||{},super(),this.dataProjection=ya(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=ya(e.featureProjection)),e.featureClass&&(this.featureClass=e.featureClass),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,t){let r=null;e.type==="Feature"?r=e:r={type:"Feature",geometry:e,properties:null};const i=dO(r.geometry);if(this.featureClass===ld)return bU({geometry:i,id:r.id,properties:r.properties},t);const s=new cx;return this.geometryName_?s.setGeometryName(this.geometryName_):this.extractGeometryName_&&r.geometry_name&&s.setGeometryName(r.geometry_name),s.setGeometry(cO(i,t)),"id"in r&&s.setId(r.id),r.properties&&s.setProperties(r.properties,!0),s}readFeaturesFromObject(e,t){const r=e;let i=null;if(r.type==="FeatureCollection"){const s=e;i=[];const l=s.features;for(let o=0,f=l.length;o<f;++o){const y=this.readFeatureFromObject(l[o],t);y&&i.push(y)}}else i=[this.readFeatureFromObject(e,t)];return i.flat()}readGeometryFromObject(e,t){return dee(e,t)}readProjectionFromObject(e){const t=e.crs;let r;if(t)if(t.type=="name")r=ya(t.properties.name);else if(t.type==="EPSG")r=ya("EPSG:"+t.properties.code);else throw new Error("Unknown SRS type");else r=this.dataProjection;return r}writeFeatureObject(e,t){t=this.adaptOptions(t);const r={type:"Feature",geometry:null,properties:null},i=e.getId();if(i!==void 0&&(r.id=i),!e.hasProperties())return r;const s=e.getProperties(),l=e.getGeometry();return l&&(r.geometry=v6(l,t),delete s[e.getGeometryName()]),N0(s)||(r.properties=s),r}writeFeaturesObject(e,t){t=this.adaptOptions(t);const r=[];for(let i=0,s=e.length;i<s;++i)r.push(this.writeFeatureObject(e[i],t));return{type:"FeatureCollection",features:r}}writeGeometryObject(e,t){return v6(e,this.adaptOptions(t))}}function dO(n,e){if(!n)return null;let t;switch(n.type){case"Point":{t=fee(n);break}case"LineString":{t=pee(n);break}case"Polygon":{t=vee(n);break}case"MultiPoint":{t=gee(n);break}case"MultiLineString":{t=mee(n);break}case"MultiPolygon":{t=yee(n);break}case"GeometryCollection":{t=hee(n);break}default:throw new Error("Unsupported GeoJSON type: "+n.type)}return t}function dee(n,e){const t=dO(n);return cO(t,e)}function hee(n,e){return n.geometries.map(function(r){return dO(r)})}function fee(n){const e=n.coordinates;return{type:"Point",flatCoordinates:e,layout:Vg(e.length)}}function pee(n){var r;const e=n.coordinates,t=e.flat();return{type:"LineString",flatCoordinates:t,ends:[t.length],layout:Vg(((r=e[0])==null?void 0:r.length)||2)}}function mee(n){var s,l;const e=n.coordinates,t=((l=(s=e[0])==null?void 0:s[0])==null?void 0:l.length)||2,r=[],i=NC(r,0,e,t);return{type:"MultiLineString",flatCoordinates:r,ends:i,layout:Vg(t)}}function gee(n){var t;const e=n.coordinates;return{type:"MultiPoint",flatCoordinates:e.flat(),layout:Vg(((t=e[0])==null?void 0:t.length)||2)}}function yee(n){var s,l;const e=n.coordinates,t=[],r=((l=(s=e[0])==null?void 0:s[0])==null?void 0:l[0].length)||2,i=gL(t,0,e,r);return{type:"MultiPolygon",flatCoordinates:t,ends:i,layout:Vg(r)}}function vee(n){var s,l;const e=n.coordinates,t=[],r=(l=(s=e[0])==null?void 0:s[0])==null?void 0:l.length,i=NC(t,0,e,r);return{type:"Polygon",flatCoordinates:t,ends:i,layout:Vg(r)}}function v6(n,e){n=Ox(n,!0,e);const t=n.getType();let r;switch(t){case"Point":{r=wee(n);break}case"LineString":{r=_ee(n);break}case"Polygon":{r=See(n,e);break}case"MultiPoint":{r=xee(n);break}case"MultiLineString":{r=bee(n);break}case"MultiPolygon":{r=Mee(n,e);break}case"GeometryCollection":{r=Cee(n,e);break}case"Circle":{r={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+t)}return r}function Cee(n,e){return e=Object.assign({},e),delete e.featureProjection,{type:"GeometryCollection",geometries:n.getGeometriesArray().map(function(r){return v6(r,e)})}}function _ee(n,e){return{type:"LineString",coordinates:n.getCoordinates()}}function bee(n,e){return{type:"MultiLineString",coordinates:n.getCoordinates()}}function xee(n,e){return{type:"MultiPoint",coordinates:n.getCoordinates()}}function Mee(n,e){let t;return e&&(t=e.rightHanded),{type:"MultiPolygon",coordinates:n.getCoordinates(t)}}function wee(n,e){return{type:"Point",coordinates:n.getCoordinates()}}function See(n,e){let t;return e&&(t=e.rightHanded),{type:"Polygon",coordinates:n.getCoordinates(t)}}const C6=65536*65536,VI=1/C6,Eee=12,$I=typeof TextDecoder>"u"?null:new TextDecoder("utf-8"),w4=0,ib=1,pv=2,ob=5;class Bee{constructor(e=new Uint8Array(16)){this.buf=ArrayBuffer.isView(e)?e:new Uint8Array(e),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(e,t,r=this.length){for(;this.pos<r;){const i=this.readVarint(),s=i>>3,l=this.pos;this.type=i&7,e(s,t,this),this.pos===l&&this.skip(i)}return t}readMessage(e,t){return this.readFields(e,t,this.readVarint()+this.pos)}readFixed32(){const e=this.dataView.getUint32(this.pos,!0);return this.pos+=4,e}readSFixed32(){const e=this.dataView.getInt32(this.pos,!0);return this.pos+=4,e}readFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*C6;return this.pos+=8,e}readSFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*C6;return this.pos+=8,e}readFloat(){const e=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,e}readDouble(){const e=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,e}readVarint(e){const t=this.buf;let r,i;return i=t[this.pos++],r=i&127,i<128||(i=t[this.pos++],r|=(i&127)<<7,i<128)||(i=t[this.pos++],r|=(i&127)<<14,i<128)||(i=t[this.pos++],r|=(i&127)<<21,i<128)?r:(i=t[this.pos],r|=(i&15)<<28,Oee(r,e,this))}readVarint64(){return this.readVarint(!0)}readSVarint(){const e=this.readVarint();return e%2===1?(e+1)/-2:e/2}readBoolean(){return!!this.readVarint()}readString(){const e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=Eee&&$I?$I.decode(this.buf.subarray(t,e)):Nee(this.buf,t,e)}readBytes(){const e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t}readPackedVarint(e=[],t){const r=this.readPackedEnd();for(;this.pos<r;)e.push(this.readVarint(t));return e}readPackedSVarint(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSVarint());return e}readPackedBoolean(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readBoolean());return e}readPackedFloat(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFloat());return e}readPackedDouble(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readDouble());return e}readPackedFixed32(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFixed32());return e}readPackedSFixed32(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSFixed32());return e}readPackedFixed64(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFixed64());return e}readPackedSFixed64(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSFixed64());return e}readPackedEnd(){return this.type===pv?this.readVarint()+this.pos:this.pos+1}skip(e){const t=e&7;if(t===w4)for(;this.buf[this.pos++]>127;);else if(t===pv)this.pos=this.readVarint()+this.pos;else if(t===ob)this.pos+=4;else if(t===ib)this.pos+=8;else throw new Error(`Unimplemented type: ${t}`)}writeTag(e,t){this.writeVarint(e<<3|t)}realloc(e){let t=this.length||16;for(;t<this.pos+e;)t*=2;if(t!==this.length){const r=new Uint8Array(t);r.set(this.buf),this.buf=r,this.dataView=new DataView(r.buffer),this.length=t}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeSFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,e&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*VI),!0),this.pos+=8}writeSFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,e&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*VI),!0),this.pos+=8}writeVarint(e){if(e=+e||0,e>268435455||e<0){Iee(e,this);return}this.realloc(4),this.buf[this.pos++]=e&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=e>>>7&127)))}writeSVarint(e){this.writeVarint(e<0?-e*2-1:e*2)}writeBoolean(e){this.writeVarint(+e)}writeString(e){e=String(e),this.realloc(e.length*4),this.pos++;const t=this.pos;this.pos=Wee(this.buf,e,this.pos);const r=this.pos-t;r>=128&&HI(t,r,this),this.pos=t-1,this.writeVarint(r),this.pos+=r}writeFloat(e){this.realloc(4),this.dataView.setFloat32(this.pos,e,!0),this.pos+=4}writeDouble(e){this.realloc(8),this.dataView.setFloat64(this.pos,e,!0),this.pos+=8}writeBytes(e){const t=e.length;this.writeVarint(t),this.realloc(t);for(let r=0;r<t;r++)this.buf[this.pos++]=e[r]}writeRawMessage(e,t){this.pos++;const r=this.pos;e(t,this);const i=this.pos-r;i>=128&&HI(r,i,this),this.pos=r-1,this.writeVarint(i),this.pos+=i}writeMessage(e,t,r){this.writeTag(e,pv),this.writeRawMessage(t,r)}writePackedVarint(e,t){t.length&&this.writeMessage(e,Pee,t)}writePackedSVarint(e,t){t.length&&this.writeMessage(e,Kee,t)}writePackedBoolean(e,t){t.length&&this.writeMessage(e,Fee,t)}writePackedFloat(e,t){t.length&&this.writeMessage(e,Ree,t)}writePackedDouble(e,t){t.length&&this.writeMessage(e,Dee,t)}writePackedFixed32(e,t){t.length&&this.writeMessage(e,Lee,t)}writePackedSFixed32(e,t){t.length&&this.writeMessage(e,Uee,t)}writePackedFixed64(e,t){t.length&&this.writeMessage(e,zee,t)}writePackedSFixed64(e,t){t.length&&this.writeMessage(e,jee,t)}writeBytesField(e,t){this.writeTag(e,pv),this.writeBytes(t)}writeFixed32Field(e,t){this.writeTag(e,ob),this.writeFixed32(t)}writeSFixed32Field(e,t){this.writeTag(e,ob),this.writeSFixed32(t)}writeFixed64Field(e,t){this.writeTag(e,ib),this.writeFixed64(t)}writeSFixed64Field(e,t){this.writeTag(e,ib),this.writeSFixed64(t)}writeVarintField(e,t){this.writeTag(e,w4),this.writeVarint(t)}writeSVarintField(e,t){this.writeTag(e,w4),this.writeSVarint(t)}writeStringField(e,t){this.writeTag(e,pv),this.writeString(t)}writeFloatField(e,t){this.writeTag(e,ob),this.writeFloat(t)}writeDoubleField(e,t){this.writeTag(e,ib),this.writeDouble(t)}writeBooleanField(e,t){this.writeVarintField(e,+t)}}function Oee(n,e,t){const r=t.buf;let i,s;if(s=r[t.pos++],i=(s&112)>>4,s<128||(s=r[t.pos++],i|=(s&127)<<3,s<128)||(s=r[t.pos++],i|=(s&127)<<10,s<128)||(s=r[t.pos++],i|=(s&127)<<17,s<128)||(s=r[t.pos++],i|=(s&127)<<24,s<128)||(s=r[t.pos++],i|=(s&1)<<31,s<128))return w1(n,i,e);throw new Error("Expected varint not more than 10 bytes")}function w1(n,e,t){return t?e*4294967296+(n>>>0):(e>>>0)*4294967296+(n>>>0)}function Iee(n,e){let t,r;if(n>=0?(t=n%4294967296|0,r=n/4294967296|0):(t=~(-n%4294967296),r=~(-n/4294967296),t^4294967295?t=t+1|0:(t=0,r=r+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),kee(t,r,e),Tee(r,e)}function kee(n,e,t){t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos]=n&127}function Tee(n,e){const t=(n&7)<<4;e.buf[e.pos++]|=t|((n>>>=3)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127)))))}function HI(n,e,t){const r=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(Math.LN2*7));t.realloc(r);for(let i=t.pos-1;i>=n;i--)t.buf[i+r]=t.buf[i]}function Pee(n,e){for(let t=0;t<n.length;t++)e.writeVarint(n[t])}function Kee(n,e){for(let t=0;t<n.length;t++)e.writeSVarint(n[t])}function Ree(n,e){for(let t=0;t<n.length;t++)e.writeFloat(n[t])}function Dee(n,e){for(let t=0;t<n.length;t++)e.writeDouble(n[t])}function Fee(n,e){for(let t=0;t<n.length;t++)e.writeBoolean(n[t])}function Lee(n,e){for(let t=0;t<n.length;t++)e.writeFixed32(n[t])}function Uee(n,e){for(let t=0;t<n.length;t++)e.writeSFixed32(n[t])}function zee(n,e){for(let t=0;t<n.length;t++)e.writeFixed64(n[t])}function jee(n,e){for(let t=0;t<n.length;t++)e.writeSFixed64(n[t])}function Nee(n,e,t){let r="",i=e;for(;i<t;){const s=n[i];let l=null,o=s>239?4:s>223?3:s>191?2:1;if(i+o>t)break;let f,y,x;o===1?s<128&&(l=s):o===2?(f=n[i+1],(f&192)===128&&(l=(s&31)<<6|f&63,l<=127&&(l=null))):o===3?(f=n[i+1],y=n[i+2],(f&192)===128&&(y&192)===128&&(l=(s&15)<<12|(f&63)<<6|y&63,(l<=2047||l>=55296&&l<=57343)&&(l=null))):o===4&&(f=n[i+1],y=n[i+2],x=n[i+3],(f&192)===128&&(y&192)===128&&(x&192)===128&&(l=(s&15)<<18|(f&63)<<12|(y&63)<<6|x&63,(l<=65535||l>=1114112)&&(l=null))),l===null?(l=65533,o=1):l>65535&&(l-=65536,r+=String.fromCharCode(l>>>10&1023|55296),l=56320|l&1023),r+=String.fromCharCode(l),i+=o}return r}function Wee(n,e,t){for(let r=0,i,s;r<e.length;r++){if(i=e.charCodeAt(r),i>55295&&i<57344)if(s)if(i<56320){n[t++]=239,n[t++]=191,n[t++]=189,s=i;continue}else i=s-55296<<10|i-56320|65536,s=null;else{i>56319||r+1===e.length?(n[t++]=239,n[t++]=191,n[t++]=189):s=i;continue}else s&&(n[t++]=239,n[t++]=191,n[t++]=189,s=null);i<128?n[t++]=i:(i<2048?n[t++]=i>>6|192:(i<65536?n[t++]=i>>12|224:(n[t++]=i>>18|240,n[t++]=i>>12&63|128),n[t++]=i>>6&63|128),n[t++]=i&63|128)}return t}class Gee extends _U{constructor(e){super(),e=e||{},this.dataProjection=new mx({code:"",units:"tile-pixels"}),this.featureClass=e.featureClass?e.featureClass:ld,this.geometryName_=e.geometryName,this.layerName_=e.layerName?e.layerName:"layer",this.layers_=e.layers?e.layers:null,this.idProperty_=e.idProperty,this.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"]}readRawGeometry_(e,t,r,i){e.pos=t.geometry;const s=e.readVarint()+e.pos;let l=1,o=0,f=0,y=0,x=0,B=0;for(;e.pos<s;){if(!o){const O=e.readVarint();l=O&7,o=O>>3}if(o--,l===1||l===2)f+=e.readSVarint(),y+=e.readSVarint(),l===1&&x>B&&(i.push(x),B=x),r.push(f,y),x+=2;else if(l===7)x>B&&(r.push(r[B],r[B+1]),x+=2);else throw new Error("Invalid command found in the PBF")}x>B&&(i.push(x),B=x)}createFeature_(e,t,r){const i=t.type;if(i===0)return null;let s;const l=t.properties;let o;this.idProperty_?(o=l[this.idProperty_],delete l[this.idProperty_]):o=t.id,l[this.layerName_]=t.layer.name;const f=[],y=[];this.readRawGeometry_(e,t,f,y);const x=$ee(i,y.length);if(this.featureClass===ld)s=new this.featureClass(x,f,y,2,l,o),s.transform(r.dataProjection);else{let B;if(x=="Polygon"){const U=iL(f,y);B=U.length>1?new pC(f,"XY",U):new jm(f,"XY",y)}else B=x==="Point"?new jg(f,"XY"):x==="LineString"?new zg(f,"XY"):x==="MultiPoint"?new WC(f,"XY"):x==="MultiLineString"?new fC(f,"XY",y):null;const O=this.featureClass;s=new O,this.geometryName_&&s.setGeometryName(this.geometryName_);const P=Ox(B,!1,r);s.setGeometry(P),o!==void 0&&s.setId(o),s.setProperties(l,!0)}return s}getType(){return"arraybuffer"}readFeatures(e,t){const r=this.layers_;t=this.adaptOptions(t);const i=ya(t.dataProjection);i.setWorldExtent(t.extent),t.dataProjection=i;const s=new Bee(e),l=s.readFields(Qee,{}),o=[];for(const f in l){if(r&&!r.includes(f))continue;const y=l[f],x=y?[0,0,y.extent,y.extent]:null;i.setExtent(x);for(let B=0,O=y.length;B<O;++B){const P=Vee(s,y,B),U=this.createFeature_(s,P,t);U!==null&&o.push(U)}}return o}readProjection(e){return this.dataProjection}setLayers(e){this.layers_=e}}function Qee(n,e,t){if(n===3){const r={keys:[],values:[],features:[]},i=t.readVarint()+t.pos;t.readFields(Yee,r,i),r.length=r.features.length,r.length&&(e[r.name]=r)}}function Yee(n,e,t){if(n===15)e.version=t.readVarint();else if(n===1)e.name=t.readString();else if(n===5)e.extent=t.readVarint();else if(n===2)e.features.push(t.pos);else if(n===3)e.keys.push(t.readString());else if(n===4){let r=null;const i=t.readVarint()+t.pos;for(;t.pos<i;)n=t.readVarint()>>3,r=n===1?t.readString():n===2?t.readFloat():n===3?t.readDouble():n===4?t.readVarint64():n===5?t.readVarint():n===6?t.readSVarint():n===7?t.readBoolean():null;e.values.push(r)}}function qee(n,e,t){if(n==1)e.id=t.readVarint();else if(n==2){const r=t.readVarint()+t.pos;for(;t.pos<r;){const i=e.layer.keys[t.readVarint()],s=e.layer.values[t.readVarint()];e.properties[i]=s}}else n==3?e.type=t.readVarint():n==4&&(e.geometry=t.pos)}function Vee(n,e,t){n.pos=e.features[t];const r=n.readVarint()+n.pos,i={layer:e,type:0,properties:{}};return n.readFields(qee,i,r),i}function $ee(n,e){let t;return n===1?t=e===1?"Point":"MultiPoint":n===2?t=e===1?"LineString":"MultiLineString":n===3&&(t="Polygon"),t}class Hee extends qB{constructor(e){super(e),this.image=null}getImage(){return this.image?this.image.getImage():null}prepareFrame(e){const t=e.layerStatesArray[e.layerIndex],r=e.pixelRatio,i=e.viewState,s=i.resolution,l=this.getLayer().getSource(),o=e.viewHints;let f=e.extent;if(t.extent!==void 0&&(f=fp(f,Yp(t.extent,i.projection))),!o[Hl.ANIMATING]&&!o[Hl.INTERACTING]&&!Yg(f))if(l){const y=i.projection,x=l.getImage(f,s,r,y);x&&(this.loadImage(x)?this.image=x:x.getState()===fi.EMPTY&&(this.image=null))}else this.image=null;return!!this.image}getData(e){const t=this.frameState;if(!t)return null;const r=this.getLayer(),i=wA(t.pixelToCoordinateTransform,e.slice()),s=r.getExtent();if(s&&!Ug(s,i))return null;const l=this.image.getExtent(),o=this.image.getImage(),f=Ls(l),y=Math.floor(o.width*((i[0]-l[0])/f));if(y<0||y>=o.width)return null;const x=aA(l),B=Math.floor(o.height*((l[3]-i[1])/x));return B<0||B>=o.height?null:this.getImageData(o,y,B)}renderFrame(e,t){const r=this.image,i=r.getExtent(),s=r.getResolution(),[l,o]=Array.isArray(s)?s:[s,s],f=r.getPixelRatio(),y=e.layerStatesArray[e.layerIndex],x=e.pixelRatio,B=e.viewState,O=B.center,P=B.resolution,U=x*l/(P*f),j=x*o/(P*f);this.prepareContainer(e,t);const N=this.context.canvas.width,Y=this.context.canvas.height,H=this.getRenderContext(e);let se=!1,re=!0;if(y.extent){const he=Yp(y.extent,B.projection);re=Du(he,e.extent),se=re&&!Qp(he,e.extent),se&&this.clipUnrotated(H,e,he)}const V=r.getImage(),ne=em(this.tempTransform,N/2,Y/2,U,j,0,f*(i[0]-O[0])/l,f*(O[1]-i[3])/o);this.renderedResolution=o*x/f;const G=V.width*ne[0],oe=V.height*ne[3];if(this.getLayer().getSource().getInterpolate()||(H.imageSmoothingEnabled=!1),this.preRender(H,e),re&&G>=.5&&oe>=.5){const he=ne[4],fe=ne[5],Ee=y.opacity;Ee!==1&&(H.save(),H.globalAlpha=Ee),H.drawImage(V,0,0,+V.width,+V.height,he,fe,G,oe),Ee!==1&&H.restore()}return this.postRender(this.context,e),se&&H.restore(),H.imageSmoothingEnabled=!0,this.container}}class Zee extends Wy{constructor(e){e=e||{},super(e)}}class xU extends Zee{constructor(e){super(e)}createRenderer(){return new Hee(this)}getData(e){return super.getData(e)}}function _6(n){return n instanceof Image||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageBitmap?n:null}const Xee=new Error("disposed"),Jee=[256,256];class ZI extends VC{constructor(e){const t=Lr.IDLE;super(e.tileCoord,t,{transition:e.transition,interpolate:e.interpolate}),this.loader_=e.loader,this.data_=null,this.error_=null,this.size_=e.size||null,this.controller_=e.controller||null}getSize(){if(this.size_)return this.size_;const e=_6(this.data_);return e?[e.width,e.height]:Jee}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==Lr.IDLE&&this.state!==Lr.ERROR)return;this.state=Lr.LOADING,this.changed();const e=this;this.loader_().then(function(t){e.data_=t,e.state=Lr.LOADED,e.changed()}).catch(function(t){e.error_=t,e.state=Lr.ERROR,e.changed()})}disposeInternal(){this.controller_&&(this.controller_.abort(Xee),this.controller_=null),super.disposeInternal()}}let S4;const fy=[];function XI(n,e,t,r,i){n.beginPath(),n.moveTo(0,0),n.lineTo(e,t),n.lineTo(r,i),n.closePath(),n.save(),n.clip(),n.fillRect(0,0,Math.max(e,r)+1,Math.max(t,i)),n.restore()}function E4(n,e){return Math.abs(n[e*4]-210)>2||Math.abs(n[e*4+3]-.75*255)>2}function ete(){if(S4===void 0){const n=Fu(6,6,fy);n.globalCompositeOperation="lighter",n.fillStyle="rgba(210, 0, 0, 0.75)",XI(n,4,5,4,0),XI(n,4,5,0,5);const e=n.getImageData(0,0,3,3).data;S4=E4(e,0)||E4(e,4)||E4(e,8),GC(n),fy.push(n.canvas)}return S4}function b6(n,e,t,r){const i=vx(t,e,n);let s=o6(e,r,t);const l=e.getMetersPerUnit();l!==void 0&&(s*=l);const o=n.getMetersPerUnit();o!==void 0&&(s/=o);const f=n.getExtent();if(!f||Ug(f,i)){const y=o6(n,s,i)/s;isFinite(y)&&y>0&&(s/=y)}return s}function tte(n,e,t,r){const i=Kf(t);let s=b6(n,e,i,r);return(!isFinite(s)||s<=0)&&ZF(t,function(l){return s=b6(n,e,l,r),isFinite(s)&&s>0}),s}function MU(n,e,t,r,i,s,l,o,f,y,x,B,O,P){const U=Fu(Math.round(t*n),Math.round(t*e),fy);if(B||(U.imageSmoothingEnabled=!1),f.length===0)return U.canvas;U.scale(t,t);function j(V){return Math.round(V*t)/t}U.globalCompositeOperation="lighter";const N=Pf();f.forEach(function(V,ne,G){$F(N,V.extent)});let Y;const H=t/r,se=(B?1:1+Math.pow(2,-24))/H;if(!O||f.length!==1||y!==0){if(Y=Fu(Math.round(Ls(N)*H),Math.round(aA(N)*H),fy),B||(Y.imageSmoothingEnabled=!1),i&&P){const V=(i[0]-N[0])*H,ne=-(i[3]-N[3])*H,G=Ls(i)*H,oe=aA(i)*H;Y.rect(V,ne,G,oe),Y.clip()}f.forEach(function(V,ne,G){if(V.image.width>0&&V.image.height>0){if(V.clipExtent){Y.save();const me=(V.clipExtent[0]-N[0])*H,Se=-(V.clipExtent[3]-N[3])*H,Ke=Ls(V.clipExtent)*H,xe=aA(V.clipExtent)*H;Y.rect(B?me:Math.round(me),B?Se:Math.round(Se),B?Ke:Math.round(me+Ke)-Math.round(me),B?xe:Math.round(Se+xe)-Math.round(Se)),Y.clip()}const oe=(V.extent[0]-N[0])*H,he=-(V.extent[3]-N[3])*H,fe=Ls(V.extent)*H,Ee=aA(V.extent)*H;Y.drawImage(V.image,y,y,V.image.width-2*y,V.image.height-2*y,B?oe:Math.round(oe),B?he:Math.round(he),B?fe:Math.round(oe+fe)-Math.round(oe),B?Ee:Math.round(he+Ee)-Math.round(he)),V.clipExtent&&Y.restore()}})}const re=Wm(l);return o.getTriangles().forEach(function(V,ne,G){const oe=V.source,he=V.target;let fe=oe[0][0],Ee=oe[0][1],me=oe[1][0],Se=oe[1][1],Ke=oe[2][0],xe=oe[2][1];const at=j((he[0][0]-re[0])/s),Ze=j(-(he[0][1]-re[1])/s),Je=j((he[1][0]-re[0])/s),Ne=j(-(he[1][1]-re[1])/s),we=j((he[2][0]-re[0])/s),De=j(-(he[2][1]-re[1])/s),He=fe,bt=Ee;fe=0,Ee=0,me-=He,Se-=bt,Ke-=He,xe-=bt;const Yt=[[me,Se,0,0,Je-at],[Ke,xe,0,0,we-at],[0,0,me,Se,Ne-Ze],[0,0,Ke,xe,De-Ze]],yt=sH(Yt);if(!yt)return;if(U.save(),U.beginPath(),ete()||!B){U.moveTo(Je,Ne);const Pt=4,Ue=at-Je,Pe=Ze-Ne;for(let Be=0;Be<Pt;Be++)U.lineTo(Je+j((Be+1)*Ue/Pt),Ne+j(Be*Pe/(Pt-1))),Be!=Pt-1&&U.lineTo(Je+j((Be+1)*Ue/Pt),Ne+j((Be+1)*Pe/(Pt-1)));U.lineTo(we,De)}else U.moveTo(Je,Ne),U.lineTo(at,Ze),U.lineTo(we,De);U.clip(),U.transform(yt[0],yt[2],yt[1],yt[3],at,Ze),U.translate(N[0]-He,N[3]-bt);let Ft;if(Y)Ft=Y.canvas,U.scale(se,-se);else{const Pt=f[0],Ue=Pt.extent;Ft=Pt.image,U.scale(Ls(Ue)/Ft.width,-aA(Ue)/Ft.height)}U.drawImage(Ft,0,0),U.restore()}),Y&&(GC(Y),fy.push(Y.canvas)),x&&(U.save(),U.globalCompositeOperation="source-over",U.strokeStyle="black",U.lineWidth=1,o.getTriangles().forEach(function(V,ne,G){const oe=V.target,he=(oe[0][0]-re[0])/s,fe=-(oe[0][1]-re[1])/s,Ee=(oe[1][0]-re[0])/s,me=-(oe[1][1]-re[1])/s,Se=(oe[2][0]-re[0])/s,Ke=-(oe[2][1]-re[1])/s;U.beginPath(),U.moveTo(Ee,me),U.lineTo(he,fe),U.lineTo(Se,Ke),U.closePath(),U.stroke()}),U.restore()),U.canvas}const nte=10,JI=.25;class wU{constructor(e,t,r,i,s,l,o){this.sourceProj_=e,this.targetProj_=t;let f={};const y=o?WH(se=>wA(o,vx(se,this.targetProj_,this.sourceProj_))):cC(this.targetProj_,this.sourceProj_);this.transformInv_=function(se){const re=se[0]+"/"+se[1];return f[re]||(f[re]=y(se)),f[re]},this.maxSourceExtent_=i,this.errorThresholdSquared_=s*s,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!i&&!!this.sourceProj_.getExtent()&&Ls(i)>=Ls(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Ls(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Ls(this.targetProj_.getExtent()):null;const x=Wm(r),B=fx(r),O=hx(r),P=dx(r),U=this.transformInv_(x),j=this.transformInv_(B),N=this.transformInv_(O),Y=this.transformInv_(P),H=nte+(l?Math.max(0,Math.ceil(Math.log2(XE(r)/(l*l*256*256)))):0);if(this.addQuad_(x,B,O,P,U,j,N,Y,H),this.wrapsXInSource_){let se=1/0;this.triangles_.forEach(function(re,V,ne){se=Math.min(se,re.source[0][0],re.source[1][0],re.source[2][0])}),this.triangles_.forEach(re=>{if(Math.max(re.source[0][0],re.source[1][0],re.source[2][0])-se>this.sourceWorldWidth_/2){const V=[[re.source[0][0],re.source[0][1]],[re.source[1][0],re.source[1][1]],[re.source[2][0],re.source[2][1]]];V[0][0]-se>this.sourceWorldWidth_/2&&(V[0][0]-=this.sourceWorldWidth_),V[1][0]-se>this.sourceWorldWidth_/2&&(V[1][0]-=this.sourceWorldWidth_),V[2][0]-se>this.sourceWorldWidth_/2&&(V[2][0]-=this.sourceWorldWidth_);const ne=Math.min(V[0][0],V[1][0],V[2][0]);Math.max(V[0][0],V[1][0],V[2][0])-ne<this.sourceWorldWidth_/2&&(re.source=V)}})}f={}}addTriangle_(e,t,r,i,s,l){this.triangles_.push({source:[i,s,l],target:[e,t,r]})}addQuad_(e,t,r,i,s,l,o,f,y){const x=HE([s,l,o,f]),B=this.sourceWorldWidth_?Ls(x)/this.sourceWorldWidth_:null,O=this.sourceWorldWidth_,P=this.sourceProj_.canWrapX()&&B>.5&&B<1;let U=!1;if(y>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const N=HE([e,t,r,i]);U=Ls(N)/this.targetWorldWidth_>JI||U}!P&&this.sourceProj_.isGlobal()&&B&&(U=B>JI||U)}if(!U&&this.maxSourceExtent_&&isFinite(x[0])&&isFinite(x[1])&&isFinite(x[2])&&isFinite(x[3])&&!Du(x,this.maxSourceExtent_))return;let j=0;if(!U&&(!isFinite(s[0])||!isFinite(s[1])||!isFinite(l[0])||!isFinite(l[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(f[0])||!isFinite(f[1]))){if(y>0)U=!0;else if(j=(!isFinite(s[0])||!isFinite(s[1])?8:0)+(!isFinite(l[0])||!isFinite(l[1])?4:0)+(!isFinite(o[0])||!isFinite(o[1])?2:0)+(!isFinite(f[0])||!isFinite(f[1])?1:0),j!=1&&j!=2&&j!=4&&j!=8)return}if(y>0){if(!U){const N=[(e[0]+r[0])/2,(e[1]+r[1])/2],Y=this.transformInv_(N);let H;P?H=(Kg(s[0],O)+Kg(o[0],O))/2-Kg(Y[0],O):H=(s[0]+o[0])/2-Y[0];const se=(s[1]+o[1])/2-Y[1];U=H*H+se*se>this.errorThresholdSquared_}if(U){if(Math.abs(e[0]-r[0])<=Math.abs(e[1]-r[1])){const N=[(t[0]+r[0])/2,(t[1]+r[1])/2],Y=this.transformInv_(N),H=[(i[0]+e[0])/2,(i[1]+e[1])/2],se=this.transformInv_(H);this.addQuad_(e,t,N,H,s,l,Y,se,y-1),this.addQuad_(H,N,r,i,se,Y,o,f,y-1)}else{const N=[(e[0]+t[0])/2,(e[1]+t[1])/2],Y=this.transformInv_(N),H=[(r[0]+i[0])/2,(r[1]+i[1])/2],se=this.transformInv_(H);this.addQuad_(e,N,H,i,s,Y,se,f,y-1),this.addQuad_(N,t,r,H,Y,l,o,se,y-1)}return}}if(P){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}(j&11)==0&&this.addTriangle_(e,r,i,s,o,f),(j&14)==0&&this.addTriangle_(e,r,t,s,o,l),j&&((j&13)==0&&this.addTriangle_(t,i,e,l,f,s),(j&7)==0&&this.addTriangle_(t,i,r,l,f,o))}calculateSourceExtent(){const e=Pf();return this.triangles_.forEach(function(t,r,i){const s=t.source;Vv(e,s[0]),Vv(e,s[1]),Vv(e,s[2])}),e}getTriangles(){return this.triangles_}}const SU=.5;class EU extends VC{constructor(e,t,r,i,s,l,o,f,y,x,B,O){super(s,Lr.IDLE,O),this.renderEdges_=B!==void 0?B:!1,this.pixelRatio_=o,this.gutter_=f,this.canvas_=null,this.sourceTileGrid_=t,this.targetTileGrid_=i,this.wrappedTileCoord_=l||s,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=e.canWrapX()?e.getExtent():void 0;const P=i.getTileCoordExtent(this.wrappedTileCoord_),U=this.targetTileGrid_.getExtent();let j=this.sourceTileGrid_.getExtent();const N=U?fp(P,U):P;if(XE(N)===0){this.state=Lr.EMPTY;return}const Y=e.getExtent();Y&&(j?j=fp(j,Y):j=Y);const H=i.getResolution(this.wrappedTileCoord_[0]),se=tte(e,r,N,H);if(!isFinite(se)||se<=0){this.state=Lr.EMPTY;return}const re=x!==void 0?x:SU;if(this.triangulation_=new wU(e,r,N,j,se*re,H),this.triangulation_.getTriangles().length===0){this.state=Lr.EMPTY;return}this.sourceZ_=t.getZForResolution(se);let V=this.triangulation_.calculateSourceExtent();if(j&&(e.canWrapX()?(V[1]=SA(V[1],j[1],j[3]),V[3]=SA(V[3],j[1],j[3])):V=fp(V,j)),!XE(V))this.state=Lr.EMPTY;else{let ne=0,G=0;e.canWrapX()&&(ne=Ls(Y),G=Math.floor((V[0]-Y[0])/ne)),eL(V.slice(),e,!0).forEach(he=>{const fe=t.getTileRangeForExtentAndZ(he,this.sourceZ_);for(let Ee=fe.minX;Ee<=fe.maxX;Ee++)for(let me=fe.minY;me<=fe.maxY;me++){const Se=y(this.sourceZ_,Ee,me,o);if(Se){const Ke=G*ne;this.sourceTiles_.push({tile:Se,offset:Ke})}}++G}),this.sourceTiles_.length===0&&(this.state=Lr.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(t=>{var i;const r=t.tile;if(r&&r.getState()==Lr.LOADED){const s=this.sourceTileGrid_.getTileCoordExtent(r.tileCoord);s[0]+=t.offset,s[2]+=t.offset;const l=(i=this.clipExtent_)==null?void 0:i.slice();l&&(l[0]+=t.offset,l[2]+=t.offset),e.push({extent:s,clipExtent:l,image:r.getImage()})}}),this.sourceTiles_.length=0,e.length===0)this.state=Lr.ERROR;else{const t=this.wrappedTileCoord_[0],r=this.targetTileGrid_.getTileSize(t),i=typeof r=="number"?r:r[0],s=typeof r=="number"?r:r[1],l=this.targetTileGrid_.getResolution(t),o=this.sourceTileGrid_.getResolution(this.sourceZ_),f=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=MU(i,s,this.pixelRatio_,o,this.sourceTileGrid_.getExtent(),l,f,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=Lr.LOADED}this.changed()}load(){if(this.state==Lr.IDLE){this.state=Lr.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:t})=>{const r=t.getState();if(r==Lr.IDLE||r==Lr.LOADING){e++;const i=Fs(t,lo.CHANGE,s=>{const l=t.getState();(l==Lr.LOADED||l==Lr.ERROR||l==Lr.EMPTY)&&(hl(i),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(i)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:t},r,i){t.getState()==Lr.IDLE&&t.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(hl),this.sourcesListenerKeys_=null}release(){this.canvas_&&(GC(this.canvas_.getContext("2d")),fy.push(this.canvas_),this.canvas_=null),super.release()}}class rte{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}deleteOldest(){const e=this.pop();e instanceof DC&&e.dispose()}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.deleteOldest()}clear(){for(;this.oldest_;)this.deleteOldest()}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let t=this.oldest_;for(;t;)e(t.value_,t.key_,this),t=t.newer}get(e,t){const r=this.entries_[e];return Hs(r!==void 0,"Tried to get a value for a key that does not exist in the cache"),r===this.newest_||(r===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(r.newer.older=r.older,r.older.newer=r.newer),r.newer=null,r.older=this.newest_,this.newest_.newer=r,this.newest_=r),r.value_}remove(e){const t=this.entries_[e];return Hs(t!==void 0,"Tried to get a value for a key that does not exist in the cache"),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let t=0,r;for(r=this.newest_;r;r=r.older)e[t++]=r.key_;return e}getValues(){const e=new Array(this.count_);let t=0,r;for(r=this.newest_;r;r=r.older)e[t++]=r.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){var t;return(t=this.entries_[e])==null?void 0:t.value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,t){this.get(e),this.entries_[e].value_=t}set(e,t){Hs(!(e in this.entries_),"Tried to set a value for a key that is used already");const r={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=r:this.oldest_=r,this.newest_=r,this.entries_[e]=r,++this.count_}setSize(e){this.highWaterMark=e}}function C2(n,e,t,r){return r!==void 0?(r[0]=n,r[1]=e,r[2]=t,r):[n,e,t]}function ite(n,e,t){return n+"/"+e+"/"+t}function ote(n){return ste(n[0],n[1],n[2])}function ste(n,e,t){return(e<<n)+t}function ate(n,e){const t=n[0],r=n[1],i=n[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;const s=e.getFullTileRange(t);return s?s.containsXY(r,i):!0}function B4(n,e,t,r){return`${n},${ite(e,t,r)}`}function O4(n,e,t){if(!(t in n))return n[t]=new Set([e]),!0;const r=n[t],i=r.has(e);return i||r.add(e),!i}function lte(n,e,t){const r=n[t];return r?r.delete(e):!1}function e9(n,e){const t=n.layerStatesArray[n.layerIndex];t.extent&&(e=fp(e,Yp(t.extent,n.viewState.projection)));const r=t.layer.getRenderSource();if(!r.getWrapX()){const i=r.getTileGridForProjection(n.viewState.projection).getExtent();i&&(e=fp(e,i))}return e}class BU extends qB{constructor(e,t){super(e),t=t||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision_,this.renderedTiles=[],this.renderedSourceKey_,this.renderedSourceRevision_,this.tempExtent=Pf(),this.tempTileRange_=new aO(0,0,0,0),this.tempTileCoord_=C2(0,0,0);const r=t.cacheSize!==void 0?t.cacheSize:512;this.tileCache_=new rte(r),this.maxStaleKeys=r*.5}getTileCache(){return this.tileCache_}getOrCreateTile(e,t,r,i){const s=this.tileCache_,o=this.getLayer().getSource(),f=B4(o.getKey(),e,t,r);let y;if(s.containsKey(f))y=s.get(f);else{if(y=o.getTile(e,t,r,i.pixelRatio,i.viewState.projection),!y)return null;s.set(f,y)}return y}getTile(e,t,r,i){const s=this.getOrCreateTile(e,t,r,i);return s||null}getData(e){const t=this.frameState;if(!t)return null;const r=this.getLayer(),i=wA(t.pixelToCoordinateTransform,e.slice()),s=r.getExtent();if(s&&!Ug(s,i))return null;const l=t.viewState,o=r.getRenderSource(),f=o.getTileGridForProjection(l.projection),y=o.getTilePixelRatio(t.pixelRatio);for(let x=f.getZForResolution(l.resolution);x>=f.getMinZoom();--x){const B=f.getTileCoordForCoordAndZ(i,x),O=this.getTile(x,B[1],B[2],t);if(!O||O.getState()!==Lr.LOADED)continue;const P=f.getOrigin(x),U=ud(f.getTileSize(x)),j=f.getResolution(x);let N;if(O instanceof aU||O instanceof EU)N=O.getImage();else if(O instanceof ZI){if(N=_6(O.getData()),!N)continue}else continue;const Y=Math.floor(y*((i[0]-P[0])/j-B[1]*U[0])),H=Math.floor(y*((P[1]-i[1])/j-B[2]*U[1])),se=Math.round(y*o.getGutterForProjection(l.projection));return this.getImageData(N,Y+se,H+se)}return null}prepareFrame(e){this.renderedProjection?e.viewState.projection!==this.renderedProjection&&(this.tileCache_.clear(),this.renderedProjection=e.viewState.projection):this.renderedProjection=e.viewState.projection;const t=this.getLayer().getSource();if(!t)return!1;const r=t.getRevision();return this.renderedRevision_?this.renderedRevision_!==r&&(this.renderedRevision_=r,this.renderedSourceKey_===t.getKey()&&this.tileCache_.clear()):this.renderedRevision_=r,!0}enqueueTiles(e,t,r,i,s){const l=e.viewState,o=this.getLayer(),f=o.getRenderSource(),y=f.getTileGridForProjection(l.projection),x=Wo(f);x in e.wantedTiles||(e.wantedTiles[x]={});const B=e.wantedTiles[x],O=o.getMapInternal(),P=Math.max(r-s,y.getMinZoom(),y.getZForResolution(Math.min(o.getMaxResolution(),O?O.getView().getResolutionForZoom(Math.max(o.getMinZoom(),0)):y.getResolution(0)),f.zDirection)),U=l.rotation,j=U?XF(l.center,l.resolution,U,e.size):void 0;for(let N=r;N>=P;--N){const Y=y.getTileRangeForExtentAndZ(t,N,this.tempTileRange_),H=y.getResolution(N);for(let se=Y.minX;se<=Y.maxX;++se)for(let re=Y.minY;re<=Y.maxY;++re){if(U&&!y.tileCoordIntersectsViewport([N,se,re],j))continue;const V=this.getTile(N,se,re,e);if(!V||!O4(i,V,N))continue;const G=V.getKey();if(B[G]=!0,V.getState()===Lr.IDLE&&!e.tileQueue.isKeyQueued(G)){const oe=C2(N,se,re,this.tempTileCoord_);e.tileQueue.enqueue([V,x,y.getTileCoordCenter(oe),H])}}}}findStaleTile_(e,t){const r=this.tileCache_,i=e[0],s=e[1],l=e[2],o=this.getStaleKeys();for(let f=0;f<o.length;++f){const y=B4(o[f],i,s,l);if(r.containsKey(y)){const x=r.peek(y);if(x.getState()===Lr.LOADED)return x.endTransition(Wo(this)),O4(t,x,i),!0}}return!1}findAltTiles_(e,t,r,i){const s=e.getTileRangeForTileCoordAndZ(t,r,this.tempTileRange_);if(!s)return!1;let l=!0;const o=this.tileCache_,y=this.getLayer().getRenderSource().getKey();for(let x=s.minX;x<=s.maxX;++x)for(let B=s.minY;B<=s.maxY;++B){const O=B4(y,r,x,B);let P=!1;if(o.containsKey(O)){const U=o.peek(O);U.getState()===Lr.LOADED&&(O4(i,U,r),P=!0)}P||(l=!1)}return l}renderFrame(e,t){let r=!0;this.renderComplete=!0;const i=e.layerStatesArray[e.layerIndex],s=e.viewState,l=s.projection,o=s.resolution,f=s.center,y=e.pixelRatio,x=this.getLayer(),B=x.getSource(),O=B.getTileGridForProjection(l),P=O.getZForResolution(o,B.zDirection),U=O.getResolution(P),j=B.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==j&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=j):this.renderedSourceKey_=j;let N=e.extent;const Y=B.getTilePixelRatio(y);this.prepareContainer(e,t);const H=this.context.canvas.width,se=this.context.canvas.height,re=i.extent&&Yp(i.extent);re&&(N=fp(N,Yp(i.extent)));const V=U*H/2/Y,ne=U*se/2/Y,G=[f[0]-V,f[1]-ne,f[0]+V,f[1]+ne],oe={};this.renderedTiles.length=0;const he=x.getPreload();if(e.nextExtent){const Ne=O.getZForResolution(s.nextResolution,B.zDirection),we=e9(e,e.nextExtent);this.enqueueTiles(e,we,Ne,oe,he)}const fe=e9(e,N);if(this.enqueueTiles(e,fe,P,oe,0),he>0&&setTimeout(()=>{this.enqueueTiles(e,fe,P-1,oe,he-1)},0),!(P in oe))return this.container;const Ee=Wo(this),me=e.time;for(const Ne of oe[P]){const we=Ne.getState();if(we===Lr.EMPTY)continue;const De=Ne.tileCoord;if(we===Lr.LOADED&&Ne.getAlpha(Ee,me)===1){Ne.endTransition(Ee);continue}if(we!==Lr.IDLE&&(r=!1),we!==Lr.ERROR&&(this.renderComplete=!1),this.findStaleTile_(De,oe)){lte(oe,Ne,P),e.animate=!0;continue}if(this.findAltTiles_(O,De,P+1,oe))continue;const Yt=O.getMinZoom();for(let yt=P-1;yt>=Yt&&!this.findAltTiles_(O,De,yt,oe);--yt);}const Se=U/o*y/Y,Ke=this.getRenderContext(e);em(this.tempTransform,H/2,se/2,Se,Se,0,-H/2,-se/2),i.extent&&this.clipUnrotated(Ke,e,re),B.getInterpolate()||(Ke.imageSmoothingEnabled=!1),this.preRender(Ke,e);const xe=Object.keys(oe).map(Number);xe.sort(Rm);let at;const Ze=[],Je=[];for(let Ne=xe.length-1;Ne>=0;--Ne){const we=xe[Ne],De=B.getTilePixelSize(we,y,l),bt=O.getResolution(we)/U,Yt=De[0]*bt*Se,yt=De[1]*bt*Se,Ft=O.getTileCoordForCoordAndZ(Wm(G),we),Pt=O.getTileCoordExtent(Ft),Ue=wA(this.tempTransform,[Y*(Pt[0]-G[0])/U,Y*(G[3]-Pt[3])/U]),Pe=Y*B.getGutterForProjection(l);for(const Be of oe[we]){if(Be.getState()!==Lr.LOADED)continue;const it=Be.tileCoord,_t=Ft[1]-it[1],pt=Math.round(Ue[0]-(_t-1)*Yt),Lt=Ft[2]-it[2],nn=Math.round(Ue[1]-(Lt-1)*yt),Kt=Math.round(Ue[0]-_t*Yt),vn=Math.round(Ue[1]-Lt*yt),Gn=pt-Kt,tn=nn-vn,dr=xe.length===1;let Pn=!1;at=[Kt,vn,Kt+Gn,vn,Kt+Gn,vn+tn,Kt,vn+tn];for(let pn=0,$n=Ze.length;pn<$n;++pn)if(!dr&&we<Je[pn]){const lr=Ze[pn];Du([Kt,vn,Kt+Gn,vn+tn],[lr[0],lr[3],lr[4],lr[7]])&&(Pn||(Ke.save(),Pn=!0),Ke.beginPath(),Ke.moveTo(at[0],at[1]),Ke.lineTo(at[2],at[3]),Ke.lineTo(at[4],at[5]),Ke.lineTo(at[6],at[7]),Ke.moveTo(lr[6],lr[7]),Ke.lineTo(lr[4],lr[5]),Ke.lineTo(lr[2],lr[3]),Ke.lineTo(lr[0],lr[1]),Ke.clip())}Ze.push(at),Je.push(we),this.drawTile(Be,e,Kt,vn,Gn,tn,Pe,dr),Pn&&Ke.restore(),this.renderedTiles.unshift(Be),this.updateUsedTiles(e.usedTiles,B,Be)}}if(this.renderedResolution=U,this.extentChanged=!this.renderedExtent_||!zm(this.renderedExtent_,G),this.renderedExtent_=G,this.renderedPixelRatio=y,this.postRender(this.context,e),i.extent&&Ke.restore(),Ke.imageSmoothingEnabled=!0,this.renderComplete){const Ne=(we,De)=>{const He=Wo(B),bt=De.wantedTiles[He],Yt=bt?Object.keys(bt).length:0;this.updateCacheSize(Yt),this.tileCache_.expireCache()};e.postRenderFunctions.push(Ne)}return!this.renderComplete&&!r&&(e.animate=!0),this.container}updateCacheSize(e){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,e*2)}drawTile(e,t,r,i,s,l,o,f){let y;if(e instanceof ZI){if(y=_6(e.getData()),!y)throw new Error("Rendering array data is not yet supported")}else y=this.getTileImage(e);if(!y)return;const x=this.getRenderContext(t),B=Wo(this),O=t.layerStatesArray[t.layerIndex],P=O.opacity*(f?e.getAlpha(B,t.time):1),U=P!==x.globalAlpha;U&&(x.save(),x.globalAlpha=P),x.drawImage(y,o,o,y.width-2*o,y.height-2*o,r,i,s,l),U&&x.restore(),P!==O.opacity?t.animate=!0:f&&e.endTransition(B)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}updateUsedTiles(e,t,r){const i=Wo(t);i in e||(e[i]={}),e[i][r.getKey()]=!0}}const K0={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class ute extends Wy{constructor(e){e=e||{};const t=Object.assign({},e),r=e.cacheSize;delete e.cacheSize,delete t.preload,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=r,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getCacheSize(){return this.cacheSize_}getPreload(){return this.get(K0.PRELOAD)}setPreload(e){this.set(K0.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(K0.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(K0.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}class OU extends ute{constructor(e){super(e)}createRenderer(){return new BU(this,{cacheSize:this.getCacheSize()})}}const Ate={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},t9={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]};class cte extends BU{constructor(e,t){super(e,t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.renderedLayerRevision_,this.renderedPixelToCoordinateTransform_=null,this.renderedRotation_,this.renderedOpacity_=1,this.tmpTransform_=gh(),this.tileClipContexts_=null}drawTile(e,t,r,i,s,l,o,f){this.updateExecutorGroup_(e,t.pixelRatio,t.viewState.projection),this.tileImageNeedsRender_(e)&&this.renderTileImage_(e,t),super.drawTile(e,t,r,i,s,l,o,f)}getTile(e,t,r,i){const s=this.getOrCreateTile(e,t,r,i);if(!s)return null;const o=i.viewState.resolution,f=i.viewHints;return(!(f[Hl.ANIMATING]||f[Hl.INTERACTING])||!s.wantedResolution)&&(s.wantedResolution=o),s}prepareFrame(e){const t=this.getLayer().getRevision();return this.renderedLayerRevision_!==t&&(this.renderedLayerRevision_=t,this.renderedTiles.length=0),super.prepareFrame(e)}updateExecutorGroup_(e,t,r){const i=this.getLayer(),s=i.getRevision(),l=i.getRenderOrder()||null,o=e.wantedResolution,f=e.getReplayState(i);if(!f.dirty&&f.renderedResolution===o&&f.renderedRevision==s&&f.renderedRenderOrder==l)return;const y=i.getSource(),x=!!i.getDeclutter(),B=y.getTileGrid(),P=y.getTileGridForProjection(r).getTileCoordExtent(e.wrappedTileCoord),U=y.getSourceTiles(t,r,e),j=Wo(i);delete e.hitDetectionImageData[j],e.executorGroups[j]=[],f.dirty=!1;for(let N=0,Y=U.length;N<Y;++N){const H=U[N];if(H.getState()!=Lr.LOADED)continue;const se=H.tileCoord,re=B.getTileCoordExtent(se),V=fp(P,re),ne=L0(V,i.getRenderBuffer()*o,this.tempExtent),G=zm(re,V)?null:ne,oe=new YL(0,V,o,t),he=c6(o,t),fe=function(xe,at){let Ze;const Je=xe.getStyleFunction()||i.getStyleFunction();if(Je&&(Ze=Je(xe,o)),Ze){const Ne=this.renderFeature(xe,he,Ze,oe,x,at);f.dirty=f.dirty||Ne}},Ee=H.getFeatures();l&&l!==f.renderedRenderOrder&&Ee.sort(l);for(let xe=0,at=Ee.length;xe<at;++xe){const Ze=Ee[xe];(!G||Du(G,Ze.getGeometry().getExtent()))&&fe.call(this,Ze,xe)}const me=oe.finish(),Se=i.getRenderMode()!=="vector"&&x&&U.length===1?null:V,Ke=new qL(Se,o,t,y.getOverlaps(),me,i.getRenderBuffer(),!0);e.executorGroups[j].push(Ke)}f.renderedRevision=s,f.renderedRenderOrder=l,f.renderedResolution=o}forEachFeatureAtCoordinate(e,t,r,i,s){var se,re;const l=t.viewState.resolution,o=t.viewState.rotation;r=r??0;const f=this.getLayer(),x=f.getSource().getTileGridForProjection(t.viewState.projection),B=HE([e]);L0(B,l*r,B);const O={},P=function(V,ne,G){let oe=V.getId();oe===void 0&&(oe=Wo(V));const he=O[oe];if(he){if(he!==!0&&G<he.distanceSq){if(G===0)return O[oe]=!0,s.splice(s.lastIndexOf(he),1),i(V,f,ne);he.geometry=ne,he.distanceSq=G}}else{if(G===0)return O[oe]=!0,i(V,f,ne);s.push(O[oe]={feature:V,layer:f,geometry:ne,distanceSq:G,callback:i})}},U=this.renderedTiles,j=Wo(f),N=f.getDeclutter(),Y=N?(re=(se=t.declutter)==null?void 0:se[N])==null?void 0:re.all().map(V=>V.value):null;let H;e:for(let V=0,ne=U.length;V<ne;++V){const G=U[V],oe=x.getTileCoordExtent(G.wrappedTileCoord);if(!Du(oe,B))continue;const he=G.executorGroups[j];for(let fe=0,Ee=he.length;fe<Ee;++fe)if(H=he[fe].forEachFeatureAtCoordinate(e,l,o,r,P,Y),H)break e}return H}getFeatures(e){return this.renderedTiles.length===0?Promise.resolve([]):new Promise((t,r)=>{const i=this.getLayer(),s=i.getSource(),l=this.renderedProjection,o=l.getExtent(),f=this.renderedResolution,y=s.getTileGridForProjection(l),x=wA(this.renderedPixelToCoordinateTransform_,e.slice()),B=y.getTileCoordForCoordAndResolution(x,f).toString(),O=this.renderedTiles.find(se=>se.tileCoord.toString()===B&&se.getState()===Lr.LOADED);if(!O||O.loadingSourceTiles>0){t([]);return}s.getWrapX()&&l.canWrapX()&&!Qp(o,y.getTileCoordExtent(O.tileCoord))&&EB(x,l);const P=Wo(i),U=y.getTileCoordExtent(O.wrappedTileCoord),j=Wm(U),N=[(x[0]-j[0])/f,(j[1]-x[1])/f],Y=O.getSourceTiles().reduce((se,re)=>se.concat(re.getFeatures()),[]);let H=O.hitDetectionImageData[P];if(!H){const se=ud(y.getTileSize(y.getZForResolution(f,s.zDirection))),re=this.renderedRotation_,V=[this.getRenderTransform(y.getTileCoordCenter(O.wrappedTileCoord),f,0,Yh,se[0]*Yh,se[1]*Yh,0)];H=VL(se,V,Y,i.getStyleFunction(),y.getTileCoordExtent(O.wrappedTileCoord),O.getReplayState(i).renderedResolution,re),O.hitDetectionImageData[P]=H}t($L(N,Y,H))})}getFeaturesInExtent(e){const t=[],r=this.getTileCache();if(r.getCount()===0)return t;const s=this.getLayer().getSource().getTileGridForProjection(this.frameState.viewState.projection),l=s.getZForResolution(this.renderedResolution),o={};return r.forEach(f=>{if(f.tileCoord[0]!==l||f.getState()!==Lr.LOADED)return;const y=f.getSourceTiles();for(let x=0,B=y.length;x<B;++x){const O=y[x],P=O.getKey();if(P in o)continue;o[P]=!0;const U=O.tileCoord;if(Du(e,s.getTileCoordExtent(U))){const j=O.getFeatures();if(j)for(let N=0,Y=j.length;N<Y;++N){const H=j[N],se=H.getGeometry();Du(e,se.getExtent())&&t.push(H)}}}}),t}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.renderedLayerRevision_!==void 0&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}renderDeclutter(e,t){var O;const r=this.context,i=r.globalAlpha;r.globalAlpha=t.opacity;const s=e.viewHints,l=!(s[Hl.ANIMATING]||s[Hl.INTERACTING]),o=[this.context.canvas.width,this.context.canvas.height],f=this.getLayer().getDeclutter(),y=f?(O=e.declutter)==null?void 0:O[f]:void 0,x=Wo(this.getLayer()),B=this.renderedTiles;for(let P=0,U=B.length;P<U;++P){const j=B[P],N=j.executorGroups[x];if(N)for(let Y=N.length-1;Y>=0;--Y)N[Y].execute(this.context,o,this.getTileRenderTransform(j,e),e.viewState.rotation,l,f2,y)}r.globalAlpha=i}renderDeferredInternal(e){const t=this.renderedTiles,r=Wo(this.getLayer()),i=t.reduce((f,y,x)=>(y.executorGroups[r].forEach(B=>f.push({executorGroup:B,index:x})),f),[]),s=i.map(({executorGroup:f})=>f.getDeferredZIndexContexts()),l={};for(let f=0,y=i.length;f<y;++f){const x=i[f].executorGroup.getDeferredZIndexContexts();for(const B in x)l[B]=!0}Object.keys(l).map(Number).sort(Rm).forEach(f=>{s.forEach((y,x)=>{y[f]&&(y[f].forEach(B=>{const{executorGroup:O,index:P}=i[x],U=O.getRenderedContext(),j=U.globalAlpha;U.globalAlpha=this.renderedOpacity_;const N=this.tileClipContexts_[P];N&&N.draw(U),B.draw(U),N&&U.restore(),U.globalAlpha=j,B.clear()}),y[f].length=0)})})}getTileRenderTransform(e,t){const r=t.pixelRatio,i=t.viewState,s=i.center,l=i.resolution,o=i.rotation,f=t.size,y=Math.round(f[0]*r),x=Math.round(f[1]*r),O=this.getLayer().getSource().getTileGridForProjection(t.viewState.projection),P=e.tileCoord,U=O.getTileCoordExtent(e.wrappedTileCoord),j=O.getTileCoordExtent(P,this.tempExtent)[0]-U[0];return PB(i4(this.inversePixelTransform.slice(),1/r,1/r),this.getRenderTransform(s,l,o,r,y,x,j))}postRender(e,t){var V;const r=t.viewHints,i=!(r[Hl.ANIMATING]||r[Hl.INTERACTING]);this.renderedPixelToCoordinateTransform_=t.pixelToCoordinateTransform.slice(),this.renderedRotation_=t.viewState.rotation,this.renderedOpacity_=t.layerStatesArray[t.layerIndex].opacity;const s=this.getLayer(),l=s.getRenderMode(),o=e.globalAlpha;e.globalAlpha=this.renderedOpacity_;const f=s.getDeclutter(),y=f?t9[l].filter(ne=>!f2.includes(ne)):t9[l],x=t.viewState,B=x.rotation,O=s.getSource(),U=O.getTileGridForProjection(x.projection).getZForResolution(x.resolution,O.zDirection),j=this.renderedTiles,N=[],Y=[],H=[],se=Wo(s);let re=!0;for(let ne=j.length-1;ne>=0;--ne){const G=j[ne];re=re&&!G.getReplayState(s).dirty;const oe=G.executorGroups[se].filter(xe=>xe.hasExecutors(y));if(oe.length===0)continue;const he=this.getTileRenderTransform(G,t),fe=G.tileCoord[0];let Ee=!1;const me=oe[0].getClipCoords(he);let Se=e,Ke;if(me){Ke=new YB,Se=Ke.getContext();for(let xe=0,at=N.length;xe<at;++xe)if(U!==fe&&fe<Y[xe]){const Ze=N[xe];Du([me[0],me[3],me[4],me[7]],[Ze[0],Ze[3],Ze[4],Ze[7]])&&(Ee||(Se.save(),Ee=!0),Se.beginPath(),Se.moveTo(me[0],me[1]),Se.lineTo(me[2],me[3]),Se.lineTo(me[4],me[5]),Se.lineTo(me[6],me[7]),Se.moveTo(Ze[6],Ze[7]),Se.lineTo(Ze[4],Ze[5]),Se.lineTo(Ze[2],Ze[3]),Se.lineTo(Ze[0],Ze[1]),Se.clip())}N.push(me),Y.push(fe)}for(let xe=0,at=oe.length;xe<at;++xe)oe[xe].execute(e,[e.canvas.width,e.canvas.height],he,B,i,y,(V=t.declutter)==null?void 0:V[f]);Ee&&(Se===e?Se.restore():H[ne]=Ke)}e.globalAlpha=o,this.ready=re,this.tileClipContexts_=H,t.declutter||this.renderDeferredInternal(t),super.postRender(e,t)}renderFeature(e,t,r,i,s,l){if(!r)return!1;let o=!1;if(Array.isArray(r))for(let f=0,y=r.length;f<y;++f)o=d2(i,e,r[f],t,this.boundHandleStyleImageChange_,void 0,s,l)||o;else o=d2(i,e,r,t,this.boundHandleStyleImageChange_,void 0,s,l);return o}tileImageNeedsRender_(e){const t=this.getLayer();if(t.getRenderMode()==="vector")return!1;const r=e.getReplayState(t),i=t.getRevision(),s=e.wantedResolution;return r.renderedTileResolution!==s||r.renderedTileRevision!==i}renderTileImage_(e,t){const r=this.getLayer(),i=e.getReplayState(r),s=r.getRevision(),l=e.executorGroups[Wo(r)];i.renderedTileRevision=s;const o=e.wrappedTileCoord,f=o[0],y=r.getSource();let x=t.pixelRatio;const O=t.viewState.projection,P=y.getTileGridForProjection(O),U=P.getResolution(e.tileCoord[0]),j=t.pixelRatio/e.wantedResolution*U,N=P.getResolution(f),Y=e.getContext();x=Math.round(Math.max(x,j/x));const H=y.getTilePixelSize(f,x,O);Y.canvas.width=H[0],Y.canvas.height=H[1];const se=x/j;if(se!==1){const G=eI(this.tmpTransform_);i4(G,se,se),Y.setTransform.apply(Y,G)}const re=P.getTileCoordExtent(o,this.tempExtent),V=j/N,ne=eI(this.tmpTransform_);i4(ne,V,-V),VH(ne,-re[0],-re[3]);for(let G=0,oe=l.length;G<oe;++G)l[G].execute(Y,[Y.canvas.width*se,Y.canvas.height*se],ne,0,!0,Ate[r.getRenderMode()],null);i.renderedTileResolution=e.wantedResolution}}class $v extends tO{constructor(e){e=e||{};const t=Object.assign({},e);delete t.preload;const r=e.cacheSize===void 0?0:e.cacheSize;delete e.cacheSize,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=r;const i=e.renderMode||"hybrid";Hs(i=="hybrid"||i=="vector","`renderMode` must be `'hybrid'` or `'vector'`"),this.renderMode_=i,this.setPreload(e.preload?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0),this.getBackground,this.setBackground}createRenderer(){return new cte(this,{cacheSize:this.cacheSize_})}getFeatures(e){return super.getFeatures(e)}getFeaturesInExtent(e){return this.getRenderer().getFeaturesInExtent(e)}getRenderMode(){return this.renderMode_}getPreload(){return this.get(K0.PRELOAD)}getUseInterimTilesOnError(){return this.get(K0.USE_INTERIM_TILES_ON_ERROR)}setPreload(e){this.set(K0.PRELOAD,e)}setUseInterimTilesOnError(e){this.set(K0.USE_INTERIM_TILES_ON_ERROR,e)}}function x6(n){return Array.isArray(n)?Math.min(...n):n}class dte extends WB{constructor(e,t,r,i,s,l,o){let f=e.getExtent();f&&e.canWrapX()&&(f=f.slice(),f[0]=-1/0,f[2]=1/0);let y=t.getExtent();y&&t.canWrapX()&&(y=y.slice(),y[0]=-1/0,y[2]=1/0);const x=y?fp(r,y):r,B=Kf(x),O=b6(e,t,B,i),P=SU,U=new wU(e,t,x,f,O*P,i),j=U.calculateSourceExtent(),N=Yg(j)?null:l(j,O,s),Y=N?fi.IDLE:fi.EMPTY,H=N?N.getPixelRatio():1;super(r,i,H,Y),this.targetProj_=t,this.maxSourceExtent_=f,this.triangulation_=U,this.targetResolution_=i,this.targetExtent_=r,this.sourceImage_=N,this.sourcePixelRatio_=H,this.interpolate_=o,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==fi.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const e=this.sourceImage_.getState();if(e==fi.LOADED){const t=Ls(this.targetExtent_)/this.targetResolution_,r=aA(this.targetExtent_)/this.targetResolution_;this.canvas_=MU(t,r,this.sourcePixelRatio_,x6(this.sourceImage_.getResolution()),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_,!0)}this.state=e,this.changed()}load(){if(this.state==fi.IDLE){this.state=fi.LOADING,this.changed();const e=this.sourceImage_.getState();e==fi.LOADED||e==fi.ERROR?this.reproject_():(this.sourceListenerKey_=Fs(this.sourceImage_,lo.CHANGE,t=>{const r=this.sourceImage_.getState();(r==fi.LOADED||r==fi.ERROR)&&(this.unlistenSource_(),this.reproject_())}),this.sourceImage_.load())}}unlistenSource_(){hl(this.sourceListenerKey_),this.sourceListenerKey_=null}}const sb=4,I4={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"};class hte extends gp{constructor(e,t){super(e),this.image=t}}class IU extends jy{constructor(e){super({attributions:e.attributions,projection:e.projection,state:e.state,interpolate:e.interpolate!==void 0?e.interpolate:!0}),this.on,this.once,this.un,this.loader=e.loader||null,this.resolutions_=e.resolutions!==void 0?e.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0,this.image=null,this.wantedExtent_,this.wantedResolution_,this.static_=e.loader?e.loader.length===0:!1,this.wantedProjection_=null}getResolutions(){return this.resolutions_}setResolutions(e){this.resolutions_=e}findNearestResolution(e){const t=this.getResolutions();if(t){const r=ux(t,e,0);e=t[r]}return e}getImage(e,t,r,i){const s=this.getProjection();if(!s||!i||Rg(s,i))return s&&(i=s),this.getImageInternal(e,t,r,i);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&Rg(this.reprojectedImage_.getProjection(),i)&&this.reprojectedImage_.getResolution()==t&&zm(this.reprojectedImage_.getExtent(),e))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new dte(s,i,e,t,r,(l,o,f)=>this.getImageInternal(l,o,f,s),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(e,t,r,i){if(this.loader){const s=fte(e,t,r,1),l=this.findNearestResolution(t);if(this.image&&(this.static_||this.wantedProjection_===i&&(this.wantedExtent_&&Qp(this.wantedExtent_,s)||Qp(this.image.getExtent(),s))&&(this.wantedResolution_&&x6(this.wantedResolution_)===l||x6(this.image.getResolution())===l)))return this.image;this.wantedProjection_=i,this.wantedExtent_=s,this.wantedResolution_=l,this.image=new WB(s,l,r,this.loader),this.image.addEventListener(lo.CHANGE,this.handleImageChange.bind(this))}return this.image}handleImageChange(e){const t=e.target;let r;switch(t.getState()){case fi.LOADING:this.loading=!0,r=I4.IMAGELOADSTART;break;case fi.LOADED:this.loading=!1,r=I4.IMAGELOADEND;break;case fi.ERROR:this.loading=!1,r=I4.IMAGELOADERROR;break;default:return}this.hasListener(r)&&this.dispatchEvent(new hte(r,t))}}function fte(n,e,t,r){const i=e/t,s=Kf(n),l=I0(Ls(n)/i,sb),o=I0(aA(n)/i,sb),f=I0((r-1)*l/2,sb),y=l+2*f,x=I0((r-1)*o/2,sb),B=o+2*x;return t2(s,i,0,[y,B])}const S1=[0,0,0],b0=5;class Ix{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,Hs(q$(this.resolutions_,(i,s)=>s-i),"`resolutions` must be sorted in descending order");let t;if(!e.origins){for(let i=0,s=this.resolutions_.length-1;i<s;++i)if(!t)t=this.resolutions_[i]/this.resolutions_[i+1];else if(this.resolutions_[i]/this.resolutions_[i+1]!==t){t=void 0;break}}this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,Hs(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const r=e.extent;r!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=Wm(r)),Hs(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,Hs(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:JB,Hs(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=r!==void 0?r:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((i,s)=>{const l=new aO(Math.min(0,i[0]),Math.max(i[0]-1,-1),Math.min(0,i[1]),Math.max(i[1]-1,-1));if(r){const o=this.getTileRangeForExtentAndZ(r,s);l.minX=Math.max(o.minX,l.minX),l.maxX=Math.min(o.maxX,l.maxX),l.minY=Math.max(o.minY,l.minY),l.maxY=Math.min(o.maxY,l.maxY)}return l}):r&&this.calculateTileRanges_(r)}forEachTileCoord(e,t,r){const i=this.getTileRangeForExtentAndZ(e,t);for(let s=i.minX,l=i.maxX;s<=l;++s)for(let o=i.minY,f=i.maxY;o<=f;++o)r([t,s,o])}forEachTileCoordParentTileRange(e,t,r,i){let s,l,o,f=null,y=e[0]-1;for(this.zoomFactor_===2?(l=e[1],o=e[2]):f=this.getTileCoordExtent(e,i);y>=this.minZoom;){if(l!==void 0&&o!==void 0?(l=Math.floor(l/2),o=Math.floor(o/2),s=x1(l,l,o,o,r)):s=this.getTileRangeForExtentAndZ(f,y,r),t(y,s))return!0;--y}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,t,r){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const s=e[1]*2,l=e[2]*2;return x1(s,s+1,l,l+1,t)}const i=this.getTileCoordExtent(e,r||this.tmpExtent_);return this.getTileRangeForExtentAndZ(i,e[0]+1,t)}return null}getTileRangeForTileCoordAndZ(e,t,r){if(t>this.maxZoom||t<this.minZoom)return null;const i=e[0],s=e[1],l=e[2];if(t===i)return x1(s,l,s,l,r);if(this.zoomFactor_){const f=Math.pow(this.zoomFactor_,t-i),y=Math.floor(s*f),x=Math.floor(l*f);if(t<i)return x1(y,y,x,x,r);const B=Math.floor(f*(s+1))-1,O=Math.floor(f*(l+1))-1;return x1(y,B,x,O,r)}const o=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(o,t,r)}getTileRangeForExtentAndZ(e,t,r){this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,S1);const i=S1[1],s=S1[2];this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,S1);const l=S1[1],o=S1[2];return x1(i,l,s,o,r)}getTileCoordCenter(e){const t=this.getOrigin(e[0]),r=this.getResolution(e[0]),i=ud(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*i[0]*r,t[1]-(e[2]+.5)*i[1]*r]}getTileCoordExtent(e,t){const r=this.getOrigin(e[0]),i=this.getResolution(e[0]),s=ud(this.getTileSize(e[0]),this.tmpSize_),l=r[0]+e[1]*s[0]*i,o=r[1]-(e[2]+1)*s[1]*i,f=l+s[0]*i,y=o+s[1]*i;return Um(l,o,f,y,t)}getTileCoordForCoordAndResolution(e,t,r){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,r)}getTileCoordForXYAndResolution_(e,t,r,i,s){const l=this.getZForResolution(r),o=r/this.getResolution(l),f=this.getOrigin(l),y=ud(this.getTileSize(l),this.tmpSize_);let x=o*(e-f[0])/r/y[0],B=o*(f[1]-t)/r/y[1];return i?(x=I0(x,b0)-1,B=I0(B,b0)-1):(x=Y_(x,b0),B=Y_(B,b0)),C2(l,x,B,s)}getTileCoordForXYAndZ_(e,t,r,i,s){const l=this.getOrigin(r),o=this.getResolution(r),f=ud(this.getTileSize(r),this.tmpSize_);let y=(e-l[0])/o/f[0],x=(l[1]-t)/o/f[1];return i?(y=I0(y,b0)-1,x=I0(x,b0)-1):(y=Y_(y,b0),x=Y_(x,b0)),C2(r,y,x,s)}getTileCoordForCoordAndZ(e,t,r){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,r)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,t){const r=ux(this.resolutions_,e,t||0);return SA(r,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,t){return _L(t,0,t.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const t=this.resolutions_.length,r=new Array(t);for(let i=this.minZoom;i<t;++i)r[i]=this.getTileRangeForExtentAndZ(e,i);this.fullTileRanges_=r}}function kU(n){let e=n.getDefaultTileGrid();return e||(e=gte(n),n.setDefaultTileGrid(e)),e}function pte(n,e,t){const r=e[0],i=n.getTileCoordCenter(e),s=kx(t);if(!Ug(s,i)){const l=Ls(s),o=Math.ceil((s[0]-i[0])/l);return i[0]+=l*o,n.getTileCoordForCoordAndZ(i,r)}return e}function mte(n,e,t,r){r=r!==void 0?r:"top-left";const i=TU(n,e,t);return new Ix({extent:n,origin:J$(n,r),resolutions:i,tileSize:t})}function hO(n){const e=n||{},t=e.extent||ya("EPSG:3857").getExtent(),r={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:TU(t,e.maxZoom,e.tileSize,e.maxResolution)};return new Ix(r)}function TU(n,e,t,r){e=e!==void 0?e:oU,t=ud(t!==void 0?t:JB);const i=aA(n),s=Ls(n);r=r>0?r:Math.max(s/t[0],i/t[1]);const l=e+1,o=new Array(l);for(let f=0;f<l;++f)o[f]=r/Math.pow(2,f);return o}function gte(n,e,t,r){const i=kx(n);return mte(i,e,t,r)}function kx(n){n=ya(n);let e=n.getExtent();if(!e){const t=180*W0.degrees/n.getMetersPerUnit();e=Um(-t,-t,t,t)}return e}class PU extends jy{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const t=[256,256];this.tileGrid&&ud(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),t),this.tmpSize=[0,0],this.key_=e.key||Wo(this),this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getResolutions(e){const t=e?this.getTileGridForProjection(e):this.tileGrid;return t?t.getResolutions():null}getTile(e,t,r,i,s){return yo()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:kU(e)}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,t,r){const i=this.getTileGridForProjection(r),s=this.getTilePixelRatio(t),l=ud(i.getTileSize(e),this.tmpSize);return s==1?l:OZ(l,s,this.tmpSize)}getTileCoordForTileUrlFunction(e,t){const r=t!==void 0?t:this.getProjection(),i=t!==void 0?this.getTileGridForProjection(r):this.tileGrid||this.getTileGridForProjection(r);return this.getWrapX()&&r.isGlobal()&&(e=pte(i,e,r)),ate(e,i)?e:null}clear(){}refresh(){this.clear(),super.refresh()}}class yte extends gp{constructor(e,t){super(e),this.tile=t}}function KU(n){return function(e){const t=e.buffers,r=e.meta,i=e.imageOps,s=e.width,l=e.height,o=t.length,f=t[0].byteLength;if(i){const O=new Array(o);for(let U=0;U<o;++U)O[U]=new ImageData(new Uint8ClampedArray(t[U]),s,l);return n(O,r).data.buffer}const y=new Uint8ClampedArray(f),x=new Array(o),B=new Array(o);for(let O=0;O<o;++O)x[O]=new Uint8ClampedArray(t[O]),B[O]=[0,0,0,0];for(let O=0;O<f;O+=4){for(let U=0;U<o;++U){const j=x[U];B[U][0]=j[O],B[U][1]=j[O+1],B[U][2]=j[O+2],B[U][3]=j[O+3]}const P=n(B,r);y[O]=P[0],y[O+1]=P[1],y[O+2]=P[2],y[O+3]=P[3]}return y.buffer}}function vte(n,e){const r=Object.keys(n.lib||{}).map(function(s){return"const "+s+" = "+n.lib[s].toString()+";"}).concat(["const __minion__ = ("+KU.toString()+")(",n.operation.toString(),");",'self.addEventListener("message", function(event) {',"  const buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),i=new Worker(typeof Blob>"u"?"data:text/javascript;base64,"+Buffer.from(r.join(`
`),"binary").toString("base64"):URL.createObjectURL(new Blob(r,{type:"text/javascript"})));return i.addEventListener("message",e),i}function Cte(n,e){const t=KU(n.operation);let r=!1;return{postMessage:function(i){setTimeout(function(){r||e({data:{buffer:t(i),meta:i.meta}})},0)},terminate:function(){r=!0}}}class _te extends DC{constructor(e){super(),this.imageOps_=!!e.imageOps;let t;e.threads===0?t=0:this.imageOps_?t=1:t=e.threads||1;const r=new Array(t);if(t)for(let i=0;i<t;++i)r[i]=vte(e,this.onWorkerMessage_.bind(this,i));else r[0]=Cte(e,this.onWorkerMessage_.bind(this,0));this.workers_=r,this.queue_=[],this.maxQueueLength_=e.queue||1/0,this.running_=0,this.dataLookup_={},this.job_=null}process(e,t,r){this.enqueue_({inputs:e,meta:t,callback:r}),this.dispatch_()}enqueue_(e){for(this.queue_.push(e);this.queue_.length>this.maxQueueLength_;)this.queue_.shift().callback(null,null)}dispatch_(){if(this.running_||this.queue_.length===0)return;const e=this.queue_.shift();this.job_=e;const t=e.inputs[0].width,r=e.inputs[0].height,i=e.inputs.map(function(f){return f.data.buffer}),s=this.workers_.length;if(this.running_=s,s===1){this.workers_[0].postMessage({buffers:i,meta:e.meta,imageOps:this.imageOps_,width:t,height:r},i);return}const l=e.inputs[0].data.length,o=4*Math.ceil(l/4/s);for(let f=0;f<s;++f){const y=f*o,x=[];for(let B=0,O=i.length;B<O;++B)x.push(i[B].slice(y,y+o));this.workers_[f].postMessage({buffers:x,meta:e.meta,imageOps:this.imageOps_,width:t,height:r},x)}}onWorkerMessage_(e,t){this.disposed||(this.dataLookup_[e]=t.data,--this.running_,this.running_===0&&this.resolveJob_())}resolveJob_(){const e=this.job_,t=this.workers_.length;let r,i;if(t===1)r=new Uint8ClampedArray(this.dataLookup_[0].buffer),i=this.dataLookup_[0].meta;else{const s=e.inputs[0].data.length;r=new Uint8ClampedArray(s),i=new Array(t);const l=4*Math.ceil(s/4/t);for(let o=0;o<t;++o){const f=this.dataLookup_[o].buffer,y=o*l;r.set(new Uint8ClampedArray(f),y),i[o]=this.dataLookup_[o].meta}}this.job_=null,this.dataLookup_={},e.callback(null,new ImageData(r,e.inputs[0].width,e.inputs[0].height),i),this.dispatch_()}disposeInternal(){for(let e=0;e<this.workers_.length;++e)this.workers_[e].terminate();this.workers_.length=0}}const n9={BEFOREOPERATIONS:"beforeoperations",AFTEROPERATIONS:"afteroperations"};class r9 extends gp{constructor(e,t,r){super(e),this.extent=t.extent,this.resolution=t.viewState.resolution/t.pixelRatio,this.data=r}}class RU extends IU{constructor(e){super({projection:null}),this.on,this.once,this.un,this.processor_=null,this.operationType_=e.operationType!==void 0?e.operationType:"pixel",this.threads_=e.threads!==void 0?e.threads:1,this.layers_=Mte(e.sources);const t=this.changed.bind(this);for(let r=0,i=this.layers_.length;r<i;++r)this.layers_[r].addEventListener(lo.CHANGE,t);this.useResolutions_=e.resolutions!==null,this.tileQueue_=new lU(function(){return 1},this.processSources_.bind(this)),this.requestedFrameState_,this.renderedImageCanvas_=null,this.renderedRevision_,this.frameState_={animate:!1,coordinateToPixelTransform:gh(),declutter:null,extent:null,index:0,layerIndex:0,layerStatesArray:xte(this.layers_),pixelRatio:1,pixelToCoordinateTransform:gh(),postRenderFunctions:[],size:[0,0],tileQueue:this.tileQueue_,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{},mapId:Wo(this),renderTargets:{}},this.setAttributions(function(r){var s;const i=[];for(let l=0,o=e.sources.length;l<o;++l){const f=e.sources[l],y=f instanceof jy?f:f.getSource();if(!y)continue;const x=(s=y.getAttributions())==null?void 0:s(r);typeof x=="string"?i.push(x):x!==void 0&&i.push(...x)}return i}),e.operation!==void 0&&this.setOperation(e.operation,e.lib)}setOperation(e,t){this.processor_&&this.processor_.dispose(),this.processor_=new _te({operation:e,imageOps:this.operationType_==="image",queue:1,lib:t,threads:this.threads_}),this.changed()}updateFrameState_(e,t,r){const i=Object.assign({},this.frameState_);i.viewState=Object.assign({},i.viewState);const s=Kf(e);i.size[0]=Math.ceil(Ls(e)/t),i.size[1]=Math.ceil(aA(e)/t),i.extent=[s[0]-i.size[0]*t/2,s[1]-i.size[1]*t/2,s[0]+i.size[0]*t/2,s[1]+i.size[1]*t/2],i.time=Date.now();const l=i.viewState;return l.center=s,l.projection=r,l.resolution=t,i}allSourcesReady_(){let e=!0,t;for(let r=0,i=this.layers_.length;r<i;++r)if(t=this.layers_[r].getSource(),!t||t.getState()!=="ready"){e=!1;break}return e}getImage(e,t,r,i){if(!this.allSourcesReady_())return null;this.tileQueue_.loadMoreTiles(16,16),t=this.findNearestResolution(t);const s=this.updateFrameState_(e,t,i);if(this.requestedFrameState_=s,this.renderedImageCanvas_){const l=this.renderedImageCanvas_.getResolution(),o=this.renderedImageCanvas_.getExtent();(t!==l||!zm(s.extent,o))&&(this.renderedImageCanvas_=null)}return(!this.renderedImageCanvas_||this.getRevision()!==this.renderedRevision_)&&this.processSources_(),s.animate&&requestAnimationFrame(this.changed.bind(this)),this.renderedImageCanvas_}processSources_(){const e=this.requestedFrameState_,t=this.layers_.length,r=new Array(t);for(let s=0;s<t;++s){e.layerIndex=s,e.renderTargets={};const l=bte(this.layers_[s],e);if(l)r[s]=l;else return}const i={};this.dispatchEvent(new r9(n9.BEFOREOPERATIONS,e,i)),this.processor_.process(r,i,this.onWorkerComplete_.bind(this,e))}onWorkerComplete_(e,t,r,i){if(t||!r)return;const s=e.extent,l=e.viewState.resolution;if(l!==this.requestedFrameState_.viewState.resolution||!zm(s,this.requestedFrameState_.extent))return;let o;if(this.renderedImageCanvas_)o=this.renderedImageCanvas_.getImage().getContext("2d");else{const f=Math.round(Ls(s)/l),y=Math.round(aA(s)/l);o=Fu(f,y),this.renderedImageCanvas_=new AJ(s,l,1,o.canvas)}o.putImageData(r,0,0),e.animate?requestAnimationFrame(this.changed.bind(this)):this.changed(),this.renderedRevision_=this.getRevision(),this.dispatchEvent(new r9(n9.AFTEROPERATIONS,e,i))}getResolutions(e){if(!this.useResolutions_)return null;let t=super.getResolutions();if(!t)for(let r=0,i=this.layers_.length;r<i&&(t=this.layers_[r].getSource().getResolutions(e),!t);++r);return t}disposeInternal(){this.processor_&&this.processor_.dispose(),super.disposeInternal()}}RU.prototype.dispose;let dg=null;function bte(n,e){const t=n.getRenderer();if(!t)throw new Error("Unsupported layer type: "+n);if(!t.prepareFrame(e))return null;const r=e.size[0],i=e.size[1];if(r===0||i===0)return null;const s=t.renderFrame(e,null);let l;if(s instanceof HTMLCanvasElement)l=s;else{if(s&&(l=s.firstElementChild),!(l instanceof HTMLCanvasElement))throw new Error("Unsupported rendered element: "+l);if(l.width===r&&l.height===i)return l.getContext("2d").getImageData(0,0,r,i)}if(!dg)dg=Fu(r,i,void 0,{willReadFrequently:!0});else{const o=dg.canvas;o.width!==r||o.height!==i?dg=Fu(r,i,void 0,{willReadFrequently:!0}):dg.clearRect(0,0,r,i)}return dg.drawImage(l,0,0,r,i),dg.getImageData(0,0,r,i)}function xte(n){return n.map(function(e){return e.getLayerState()})}function Mte(n){const e=n.length,t=new Array(e);for(let r=0;r<e;++r)t[r]=wte(n[r]);return t}function wte(n){let e;return n instanceof jy?n instanceof PU?e=new OU({source:n}):n instanceof IU&&(e=new xU({source:n})):e=n,e}function Ste(n,e,t,r){const i=document.createElement("script"),s="olc_"+Wo(e);function l(){delete window[s],i.parentNode.removeChild(i)}i.async=!0,i.src=n+(n.includes("?")?"&":"?")+"callback="+s;const o=setTimeout(function(){l(),t&&t()},1e4);window[s]=function(f){clearTimeout(o),l(),e(f)},document.head.appendChild(i)}const Ete=/\{z\}/g,Bte=/\{x\}/g,Ote=/\{y\}/g,Ite=/\{-y\}/g;function kte(n,e,t,r,i){return n.replace(Ete,e.toString()).replace(Bte,t.toString()).replace(Ote,r.toString()).replace(Ite,function(){if(i===void 0)throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(i-r).toString()})}function Tte(n){const e=[];let t=/\{([a-z])-([a-z])\}/.exec(n);if(t){const r=t[1].charCodeAt(0),i=t[2].charCodeAt(0);let s;for(s=r;s<=i;++s)e.push(n.replace(t[0],String.fromCharCode(s)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(n),t){const r=parseInt(t[2],10);for(let i=parseInt(t[1],10);i<=r;i++)e.push(n.replace(t[0],i.toString()));return e}return e.push(n),e}function Pte(n,e){return function(t,r,i){if(!t)return;let s;const l=t[0];if(e){const o=e.getFullTileRange(l);o&&(s=o.getHeight()-1)}return kte(n,l,t[1],t[2],s)}}function DU(n,e){const t=n.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=Pte(n[i],e);return Kte(r)}function Kte(n){return n.length===1?n[0]:function(e,t,r){if(!e)return;const i=ote(e),s=Kg(i,n.length);return n[s](e,t,r)}}const k4={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};class Tx extends PU{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===Tx.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const t=e.target,r=Wo(t),i=t.getState();let s;i==Lr.LOADING?(this.tileLoadingKeys_[r]=!0,s=k4.TILELOADSTART):r in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[r],s=i==Lr.ERROR?k4.TILELOADERROR:i==Lr.LOADED?k4.TILELOADEND:void 0),s!=null&&this.dispatchEvent(new yte(s,t))}setTileLoadFunction(e){this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,t){this.tileUrlFunction=e,typeof t<"u"?this.setKey(t):this.changed()}setUrl(e){const t=Tte(e);this.urls=t,this.setUrls(t)}setUrls(e){this.urls=e;const t=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(DU(e,this.tileGrid),t):this.setKey(t)}tileUrlFunction(e,t,r){}}class Rte extends Tx{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:Dte,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:aU,this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}getGutterForProjection(e){return this.getProjection()&&e&&!Rg(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||Rg(t,e)))return this.tileGrid;const r=Wo(e);return r in this.tileGridForProjection||(this.tileGridForProjection[r]=kU(e)),this.tileGridForProjection[r]}createTile_(e,t,r,i,s,l){const o=[e,t,r],f=this.getTileCoordForTileUrlFunction(o,s),y=f?this.tileUrlFunction(f,i,s):void 0,x=new this.tileClass(o,y!==void 0?Lr.IDLE:Lr.EMPTY,y!==void 0?y:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return x.key=l,x.addEventListener(lo.CHANGE,this.handleTileChange.bind(this)),x}getTile(e,t,r,i,s){const l=this.getProjection();if(!l||!s||Rg(l,s))return this.getTileInternal(e,t,r,i,l||s);const o=[e,t,r],f=this.getKey(),y=this.getTileGridForProjection(l),x=this.getTileGridForProjection(s),B=this.getTileCoordForTileUrlFunction(o,s),O=new EU(l,y,s,x,o,B,this.getTilePixelRatio(i),this.getGutter(),(P,U,j,N)=>this.getTileInternal(P,U,j,N,l),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return O.key=f,O}getTileInternal(e,t,r,i,s){const l=this.getKey();return this.createTile_(e,t,r,i,s,l)}setRenderReprojectionEdges(e){this.renderReprojectionEdges_!=e&&(this.renderReprojectionEdges_=e,this.changed())}setTileGridForProjection(e,t){const r=ya(e);if(r){const i=Wo(r);i in this.tileGridForProjection||(this.tileGridForProjection[i]=t)}}}function Dte(n,e){n.getImage().src=e}class FU extends Rte{constructor(e){if(super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:ya("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:"loading",tileLoadFunction:e.tileLoadFunction,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.tileJSON_=null,this.tileSize_=e.tileSize,e.url)if(e.jsonp)Ste(e.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{const t=new XMLHttpRequest;t.addEventListener("load",this.onXHRLoad_.bind(this)),t.addEventListener("error",this.onXHRError_.bind(this)),t.open("GET",e.url),t.send()}else if(e.tileJSON)this.handleTileJSONResponse(e.tileJSON);else throw new Error("Either `url` or `tileJSON` options must be provided")}onXHRLoad_(e){const t=e.target;if(!t.status||t.status>=200&&t.status<300){let r;try{r=JSON.parse(t.responseText)}catch{this.handleTileJSONError();return}this.handleTileJSONResponse(r)}else this.handleTileJSONError()}onXHRError_(e){this.handleTileJSONError()}getTileJSON(){return this.tileJSON_}handleTileJSONResponse(e){const t=ya("EPSG:4326"),r=this.getProjection();let i;if(e.bounds!==void 0){const y=jC(t,r);i=nH(e.bounds,y)}const s=kx(r),l=e.minzoom||0,o=e.maxzoom||22,f=hO({extent:s,maxZoom:o,minZoom:l,tileSize:this.tileSize_});if(this.tileGrid=f,this.tileUrlFunction=DU(e.tiles,f),e.attribution&&!this.getAttributions()){const y=i!==void 0?i:s;this.setAttributions(function(x){return Du(y,x.extent)?[e.attribution]:null})}this.tileJSON_=e,this.setState("ready")}handleTileJSONError(){this.setState("error")}}class LU extends Tx{constructor(e){const t=e.projection||"EPSG:3857",r=e.extent||kx(t),i=e.tileGrid||hO({extent:r,maxResolution:e.maxResolution,maxZoom:e.maxZoom!==void 0?e.maxZoom:22,minZoom:e.minZoom,tileSize:e.tileSize||512});super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,interpolate:!0,projection:t,state:e.state,tileGrid:i,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:UU,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX===void 0?!0:e.wrapX,transition:e.transition,zDirection:e.zDirection===void 0?1:e.zDirection}),this.format_=e.format?e.format:null,this.tileKeysBySourceTileUrl_={},this.sourceTiles_={},this.overlaps_=e.overlaps==null?!0:e.overlaps,this.tileClass=e.tileClass?e.tileClass:pU,this.tileGrids_={}}getOverlaps(){return this.overlaps_}getSourceTiles(e,t,r){if(r.getState()===Lr.IDLE){r.setState(Lr.LOADING);const i=r.wrappedTileCoord,s=this.getTileGridForProjection(t),l=s.getTileCoordExtent(i),o=i[0],f=s.getResolution(o);L0(l,-f,l);const y=this.tileGrid,x=y.getExtent();x&&fp(l,x,l);const B=y.getZForResolution(f,this.zDirection);y.forEachTileCoord(l,B,O=>{const P=this.tileUrlFunction(O,e,t);this.sourceTiles_[P]||(this.sourceTiles_[P]=new this.tileClass(O,P?Lr.IDLE:Lr.EMPTY,P,this.format_,this.tileLoadFunction));const U=this.sourceTiles_[P];r.sourceTiles.push(U),this.tileKeysBySourceTileUrl_[P]||(this.tileKeysBySourceTileUrl_[P]=[]),this.tileKeysBySourceTileUrl_[P].push(r.getKey());const j=U.getState();if(j<Lr.LOADED){const N=Y=>{this.handleTileChange(Y);const H=U.getState();if(H===Lr.LOADED||H===Lr.ERROR){const se=U.getKey();se in r.errorTileKeys?U.getState()===Lr.LOADED&&delete r.errorTileKeys[se]:r.loadingSourceTiles--,H===Lr.ERROR?r.errorTileKeys[se]=!0:U.removeEventListener(lo.CHANGE,N),r.loadingSourceTiles===0&&r.setState(N0(r.errorTileKeys)?Lr.LOADED:Lr.ERROR)}};U.addEventListener(lo.CHANGE,N),r.loadingSourceTiles++}j===Lr.IDLE&&(U.extent=y.getTileCoordExtent(O),U.projection=t,U.resolution=y.getResolution(O[0]),U.load())}),r.loadingSourceTiles||r.setState(r.sourceTiles.some(O=>O.getState()===Lr.ERROR)?Lr.ERROR:Lr.LOADED)}return r.sourceTiles}removeSourceTiles(e){const t=e.getKey(),r=e.sourceTiles;for(let i=0,s=r.length;i<s;++i){const l=r[i].getTileUrl();if(!this.tileKeysBySourceTileUrl_[l])return;const o=this.tileKeysBySourceTileUrl_[l].indexOf(t);o!==-1&&(this.tileKeysBySourceTileUrl_[l].splice(o,1),this.tileKeysBySourceTileUrl_[l].length===0&&(delete this.tileKeysBySourceTileUrl_[l],delete this.sourceTiles_[l]))}}getTile(e,t,r,i,s){const l=[e,t,r];let o=this.getTileCoordForTileUrlFunction(l,s);const f=this.getTileGrid().getExtent(),y=this.getTileGridForProjection(s);if(o&&f){const O=y.getTileCoordExtent(o);L0(O,-y.getResolution(e),O),Du(f,O)||(o=null)}let x=!0;if(o!==null){const O=this.tileGrid,P=y.getResolution(e),U=O.getZForResolution(P,1),j=y.getTileCoordExtent(o);L0(j,-P,j),O.forEachTileCoord(j,U,N=>{x=x&&!this.tileUrlFunction(N,i,s)})}const B=new GJ(l,x?Lr.EMPTY:Lr.IDLE,o,this.getSourceTiles.bind(this,i,s),this.removeSourceTiles.bind(this));return B.key=this.getKey(),B}getTileGridForProjection(e){const t=e.getCode();let r=this.tileGrids_[t];if(!r){const i=this.tileGrid,s=i.getResolutions().slice(),l=s.map(function(y,x){return i.getOrigin(x)}),o=s.map(function(y,x){return i.getTileSize(x)}),f=oU+1;for(let y=s.length;y<f;++y)s.push(s[y-1]/2),l.push(l[y-1]),o.push(o[y-1]);r=new Ix({extent:i.getExtent(),origins:l,resolutions:s,tileSizes:o}),this.tileGrids_[t]=r}return r}getTilePixelRatio(e){return e}getTilePixelSize(e,t,r){const i=this.getTileGridForProjection(r),s=ud(i.getTileSize(e),this.tmpSize);return[Math.round(s[0]*t),Math.round(s[1]*t)]}setOverlaps(e){this.overlaps_=e,this.changed()}}function UU(n,e){n.setLoader(function(t,r,i){WL(e,n.getFormat(),t,r,i,n.onLoad.bind(n),n.onError.bind(n))})}function Fte(n,e){const t=n[0],r=t.width,i=t.height,s=t.data,l=new Uint8ClampedArray(s.length),o=e.resolution*2,f=r-1,y=i-1,x=[0,0,0,0],B=2*Math.PI,O=Math.PI/2,P=Math.PI*e.sunEl/180,U=Math.PI*e.sunAz/180,j=Math.cos(P),N=Math.sin(P),Y=e.highlightColor,H=e.shadowColor,se=e.accentColor,re=e.encoding;let V,ne,G,oe,he,fe,Ee,me,Se,Ke,xe,at,Ze,Je,Ne,we,De,He,bt,Yt,yt,Ft;function Pt(Ue,Pe="mapbox"){if(Pe==="mapbox")return(Ue[0]*256*256+Ue[1]*256+Ue[2])*.1-1e4;if(Pe==="terrarium")return Ue[0]*256+Ue[1]+Ue[2]/256-32768}for(ne=0;ne<=y;++ne)for(he=ne===0?0:ne-1,fe=ne===y?y:ne+1,V=0;V<=f;++V)G=V===0?0:V-1,oe=V===f?f:V+1,Ee=(ne*r+G)*4,x[0]=s[Ee],x[1]=s[Ee+1],x[2]=s[Ee+2],x[3]=s[Ee+3],me=e.vert*Pt(x,re),Ee=(ne*r+oe)*4,x[0]=s[Ee],x[1]=s[Ee+1],x[2]=s[Ee+2],x[3]=s[Ee+3],Se=e.vert*Pt(x,re),Ke=(Se-me)/o,Ee=(he*r+V)*4,x[0]=s[Ee],x[1]=s[Ee+1],x[2]=s[Ee+2],x[3]=s[Ee+3],me=e.vert*Pt(x,re),Ee=(fe*r+V)*4,x[0]=s[Ee],x[1]=s[Ee+1],x[2]=s[Ee+2],x[3]=s[Ee+3],Se=e.vert*Pt(x,re),xe=(Se-me)/o,Ze=Math.atan2(xe,-Ke),Ze<0?Ze=O-Ze:Ze>O?Ze=B-Ze+O:Ze=O-Ze,at=Math.atan(Math.sqrt(Ke*Ke+xe*xe)),Ft=N*Math.cos(at)+j*Math.sin(at)*Math.cos(U-Ze),Je=Math.cos(at),Ne=255*Ft,bt=Math.min(Math.max(2*e.sunEl,0),1),Yt=1.875-e.opacity*1.75,yt=e.opacity!==.5?O*((Math.pow(Yt,at)-1)/(Math.pow(Yt,O)-1)):at,De={r:(1-Je)*se.r*bt*255,g:(1-Je)*se.g*bt*255,b:(1-Je)*se.b*bt*255,a:(1-Je)*se.a*bt*255},we=Math.abs(((Ze+U)/Math.PI+.5)%2-1),He={r:(Y.r*(1-we)+H.r*we)*Ne,g:(Y.g*(1-we)+H.g*we)*Ne,b:(Y.b*(1-we)+H.b*we)*Ne,a:(Y.a*(1-we)+H.a*we)*Ne},Ee=(ne*r+V)*4,l[Ee]=De.r*(1-we)+He.r,l[Ee+1]=De.g*(1-we)+He.g,l[Ee+2]=De.b*(1-we)+He.b,l[Ee+3]=s[Ee+3]*e.opacity*bt*Math.sin(yt);return new ImageData(l,r,i)}function Lte(n,e=512){return n.getExtent()?hO({extent:n.getExtent(),tileSize:e,maxZoom:22}).getResolutions():Jp}function zU(n,e){return e.accessToken||(e=Object.assign({},e),new URL(n).searchParams.forEach((r,i)=>{e.accessToken=r,e.accessTokenParam=i})),e}function Ute(n,e,t="",r={},i=void 0){let s,l,o,f,y=!0;return typeof t!="string"&&!Array.isArray(t)?(o=t,f=o.source||o.layers,r=o):f=t,typeof r=="string"?(s=r,o={}):(s=r.styleUrl,o=r),o.updateSource===!1&&(y=!1),i||(i=o.resolutions),!s&&typeof e=="string"&&!e.trim().startsWith("{")&&(s=e),s&&(s=s.startsWith("data:")?location.href:y2(s,o.accessToken),o=zU(s,o)),new Promise(function(x,B){yU(e,o).then(function(O){if(O.version!=8)return B(new Error("glStyle version 8 required."));if(!(n instanceof nO||n instanceof $v))return B(new Error("Can only apply to VectorLayer or VectorTileLayer"));const P=n instanceof $v?"vector":"geojson";if(f?Array.isArray(f)?l=O.layers.find(function(re){return re.id===f[0]}).source:l=f:(l=Object.keys(O.sources).find(function(re){return O.sources[re].type===P}),f=l),!l)return B(new Error(`No ${P} source found in the glStyle.`));function U(){if(!y)return Promise.resolve();if(n instanceof $v)return WU(O.sources[l],s,o).then(function(G){const oe=n.getSource();oe?G!==oe&&(oe.setTileUrlFunction(G.getTileUrlFunction()),typeof oe.setUrls=="function"&&typeof G.getUrls=="function"&&oe.setUrls(G.getUrls()),oe.format_||(oe.format_=G.format_),oe.getAttributions()||oe.setAttributions(G.getAttributions()),oe.getTileLoadFunction()===UU&&oe.setTileLoadFunction(G.getTileLoadFunction()),Rg(oe.getProjection(),G.getProjection())&&(oe.tileGrid=G.getTileGrid())):n.setSource(G);const he=n.getSource().getTileGrid();!isFinite(n.getMaxResolution())&&!isFinite(n.getMinZoom())&&he.getMinZoom()>0&&n.setMaxResolution(kv(Math.max(0,he.getMinZoom()-1e-12),he.getResolutions()))});const re=O.sources[l];let V=n.getSource();(!V||V.get("mapbox-source")!==re)&&(V=YU(re,s,o));const ne=n.getSource();return ne?V!==ne&&(ne.getAttributions()||ne.setAttributions(V.getAttributions()),ne.format_||(ne.format_=V.getFormat()),ne.url_=V.getUrl()):n.setSource(V),Promise.resolve()}let j,N,Y,H;function se(){if(!H&&(!O.sprite||N)){if(o.projection&&!i){const V=ya(o.projection).getUnits();V!=="m"&&(i=Jp.map(ne=>ne/W0[V]))}H=lee(n,O,f,i,N,Y,(re,V=o.webfonts)=>tee(re,V),o.getImage),n.getStyle()?U().then(x).catch(B):B(new Error(`Nothing to show for source [${l}]`))}else H?(n.setStyle(H),U().then(x).catch(B)):B(new Error("Something went wrong trying to apply style."))}if(O.sprite){const re=new URL(QJ(O.sprite,o.accessToken,s||location.href));j=window.devicePixelRatio>=1.5?.5:1;const V=j==.5?"@2x":"";let ne=re.origin+re.pathname+V+".json"+re.search;new Promise(function(G,oe){ky("Sprite",ne,o).then(G).catch(function(he){ne=re.origin+re.pathname+".json"+re.search,ky("Sprite",ne,o).then(G).catch(oe)})}).then(function(G){if(G===void 0&&B(new Error("No sprites found.")),N=G,Y=re.origin+re.pathname+V+".png"+re.search,o.transformRequest){const oe=o.transformRequest(Y,"SpriteImage")||Y;(oe instanceof Request||oe instanceof Promise)&&(Y=oe)}se()}).catch(function(G){B(new Error(`Sprites cannot be loaded: ${ne}: ${G.message}`))})}else se()}).catch(B)})}const E0={};function jU(n,e){let t;return n.some(function(r){if(r.id==e)return t=r.source,!0}),t}function zte(n,e){const t=n.bounds;if(t){const r=s6([t[0],t[1]],e),i=s6([t[2],t[3]],e);return[r[0],r[1],i[0],i[1]]}return ya(e).getExtent()}function NU(n,e,t){const r=new FU({tileJSON:e,tileSize:n.tileSize||e.tileSize||512}),i=r.getTileJSON(),s=r.getTileGrid(),l=ya(t.projection||"EPSG:3857"),o=zte(i,l),f=l.getExtent(),y=i.minzoom||0,x=i.maxzoom||22,B={attributions:r.getAttributions(),projection:l,tileGrid:new Ix({origin:f?Wm(f):s.getOrigin(0),extent:o||s.getExtent(),minZoom:y,resolutions:Lte(l,e.tileSize).slice(0,x+1),tileSize:s.getTileSize(0)})};return Array.isArray(i.tiles)?B.urls=i.tiles:B.url=i.tiles,B}function jte(n,e,t,r){const i={id:n.id,type:n.type},s=n.layout||{},l=n.paint||{};i.paint=l;const o=AO(e,t.resolutions||Jp);let f;const y=Si(i,"paint","background-color",o,E0,r);return l["background-opacity"]!==void 0&&(f=Si(i,"paint","background-opacity",o,E0,r)),s.visibility=="none"?void 0:w0(y,f)}function Nte(n,e,t){const r=document.createElement("div");return r.className="ol-mapbox-style-background",r.style.position="absolute",r.style.width="100%",r.style.height="100%",new Wy({source:new jy({}),render(i){const s=jte(n,i.viewState.resolution,e,t);return r.style.backgroundColor=s,r}})}function WU(n,e,t){return new Promise(function(r,i){vU(n,e,t).then(function({tileJson:s,tileLoadFunction:l}){const o=NU(n,s,t);o.tileLoadFunction=l,o.format=new Gee,r(new LU(o))}).catch(i)})}function Wte(n,e,t){const r=new $v({declutter:!0,visible:!1});return WU(n,e,t).then(function(i){i.set("mapbox-source",n),r.setSource(i)}).catch(function(i){r.setSource(void 0)}),r}function GU(n){return`{bbox-${(n?n.getCode():"EPSG:3857").toLowerCase().replace(/[^a-z0-9]/g,"-")}}`}function Gte(n,e,t){return new Promise(function(r,i){vU(n,e,t).then(function({tileJson:s,tileLoadFunction:l}){const o=new FU({interpolate:t.interpolate===void 0?!0:t.interpolate,transition:0,crossOrigin:"anonymous",tileJSON:s});o.tileGrid=NU(n,s,t).tileGrid,t.projection&&(o.projection=ya(t.projection));const f=o.getTileUrlFunction();l&&o.setTileLoadFunction(l),o.setTileUrlFunction(function(y,x,B){const O=GU(B);let P=f(y,x,B);if(P.indexOf(O)!=-1){const U=o.getTileGrid().getTileCoordExtent(y);P=P.replace(O,U.toString())}return P}),o.set("mapbox-source",n),r(o)}).catch(function(s){i(s)})})}function QU(n,e,t){const r=new OU;return Gte(n,e,t).then(function(i){r.setSource(i)}).catch(function(){r.setSource(void 0)}),r}function Qte(n,e,t){const r=QU(n,e,t);return new xU({source:new RU({operationType:"image",operation:Fte,sources:[r]})})}function YU(n,e,t){const r=t.projection?new qI({dataProjection:t.projection}):new qI,i=n.data,s={};if(typeof i=="string"){const[o]=Sb(i,t.accessToken,t.accessTokenParam||"access_token",e||location.href);if(/\{bbox-[0-9a-z-]+\}/.test(o)){const y=(B,O,P)=>{const U=GU(P);return o.replace(U,`${B.join(",")}`)},x=new wb({attributions:n.attribution,format:r,loader:(B,O,P,U,j)=>{const N=typeof y=="function"?y(B,O,P):y;ky("GeoJSON",N,t).then(Y=>{const H=x.getFormat().readFeatures(Y,{featureProjection:P});x.addFeatures(H),U(H)}).catch(Y=>{x.removeLoadedExtent(B),j()})},strategy:YZ});return x.set("mapbox-source",n),x}const f=new wb({attributions:n.attribution,format:r,url:o,loader:(y,x,B,O,P)=>{ky("GeoJSON",o,t).then(U=>{const j=f.getFormat().readFeatures(U,{featureProjection:B});f.addFeatures(j),O(j)}).catch(U=>{f.removeLoadedExtent(y),P()})}});return f}s.features=r.readFeatures(i,{featureProjection:"EPSG:3857"});const l=new wb(Object.assign({attributions:n.attribution,format:r},s));return l.set("mapbox-source",n),l}function Yte(n,e,t){return new nO({declutter:!0,source:YU(n,e,t),visible:!1})}function qte(n,e,t){let r=null;return function(i){n.paint&&"raster-opacity"in n.paint&&i.frameState.viewState.zoom!==r&&(r=i.frameState.viewState.zoom,delete t[n.id],Vte(n,e,r,t))}}function Vte(n,e,t,r){const i=Si(n,"paint","raster-opacity",t,E0,r);e.setOpacity(i)}function $te(n,e){function t(){const r=e.get("mapbox-style");if(!r)return;const i=N6(r.layers),s=n.get("mapbox-layers"),l=i.filter(function(o){return s.includes(o.id)}).some(function(o){return!o.layout||!o.layout.visibility||o.layout.visibility==="visible"});n.get("visible")!==l&&n.setVisible(l)}n.on("change",t),t()}function Hte(n,e,t,r){const i=gU(n),s=n.layers,l=t.type,o=t.source||jU(s,t.ref),f=n.sources[o];let y;if(l=="background")y=Nte(t,r,i);else if(f.type=="vector")y=Wte(f,e,r);else if(f.type=="raster")y=QU(f,e,r),y.setVisible(t.layout?t.layout.visibility!=="none":!0),y.on("prerender",qte(t,y,i));else if(f.type=="geojson")y=Yte(f,e,r);else if(f.type=="raster-dem"&&t.type=="hillshade"){const B=Qte(f,e,r);y=B,B.getSource().on("beforeoperations",function(O){const P=O.data;P.resolution=o6(r.projection||"EPSG:3857",O.resolution,Kf(O.extent),"m");const U=AO(O.resolution,r.resolutions||Jp);P.encoding=f.encoding,P.vert=5*Si(t,"paint","hillshade-exaggeration",U,E0,i),P.sunAz=Si(t,"paint","hillshade-illumination-direction",U,E0,i),P.sunEl=35,P.opacity=.3,P.highlightColor=Si(t,"paint","hillshade-highlight-color",U,E0,i),P.shadowColor=Si(t,"paint","hillshade-shadow-color",U,E0,i),P.accentColor=Si(t,"paint","hillshade-accent-color",U,E0,i)}),y.setVisible(t.layout?t.layout.visibility!=="none":!0)}const x=o;return y&&y.set("mapbox-source",x),y}function i9(n,e,t,r){const i=[];let s=null;if(e instanceof sO){if(s=e.getView(),!s.isDef()&&!s.getRotation()&&!s.getResolutions()){const B=r.projection?ya(r.projection):s.getProjection();s=new Ap(Object.assign(s.getProperties(),{maxResolution:Jp[0]/W0[B.getUnits()],projection:r.projection||s.getProjection()})),e.setView(s)}"center"in n&&!s.getCenter()&&s.setCenter(s6(n.center,s.getProjection())),"zoom"in n&&s.getZoom()===void 0&&s.setResolution(Jp[0]/W0[s.getProjection().getUnits()]/Math.pow(2,n.zoom)),(!s.getCenter()||s.getZoom()===void 0)&&s.fit(s.getProjection().getExtent(),{nearest:!0,size:e.getSize()})}e.set("mapbox-style",n),e.set("mapbox-metadata",{styleUrl:t,options:r});const l=n.layers;let o=[],f,y,x;for(let B=0,O=l.length;B<O;++B){const P=l[B],U=P.type;if(U=="heatmap"){console.debug(`layers[${B}].type "${U}" not supported`);continue}else x=P.source||jU(l,P.ref),(!x||x!=y)&&(o.length&&(i.push(o9(f,o,n,t,e,r)),o=[]),f=Hte(n,t,P,r),f instanceof nO||f instanceof $v||(o=[]),y=f.get("mapbox-source")),o.push(P.id)}return i.push(o9(f,o,n,t,e,r)),Promise.all(i)}function Zte(n,e,t={}){let r,i;if(typeof n=="string"||n instanceof HTMLElement?i=new sO({target:n}):i=n,typeof e=="string"){const s=e.startsWith("data:")?location.href:y2(e,t.accessToken);t=zU(s,t),r=new Promise(function(l,o){yU(e,t).then(function(f){i9(f,i,s,t).then(function(){l(i)}).catch(o)}).catch(function(f){o(new Error(`Could not load ${e}: ${f.message}`))})})}else r=new Promise(function(s,l){i9(e,i,!t.styleUrl||t.styleUrl.startsWith("data:")?location.href:y2(t.styleUrl,t.accessToken),t).then(function(){s(i)}).catch(l)});return r}function o9(n,e,t,r,i,s={}){let l=24,o=0;const f=t.layers;for(let y=0,x=f.length;y<x;++y){const B=f[y];e.indexOf(B.id)!==-1&&(l=Math.min("minzoom"in B?B.minzoom:0,l),o=Math.max("maxzoom"in B?B.maxzoom:24,o))}return new Promise(function(y,x){const B=function(){const P=n.getSource();if(!P||P.getState()==="error"){x(new Error("Error accessing data for source "+n.get("mapbox-source")));return}if("getTileGrid"in P){const U=P.getTileGrid();if(U){const j=U.getMinZoom();(l>0||j>0)&&n.setMaxResolution(Math.min(kv(Math.max(0,l-1e-12),Jp),kv(Math.max(0,j-1e-12),U.getResolutions()))),o<24&&n.setMinResolution(kv(o,Jp))}}else l>0&&n.setMaxResolution(kv(Math.max(0,l-1e-12),Jp));P instanceof wb||P instanceof LU?Ute(n,t,e,Object.assign({styleUrl:r},s)).then(function(){$te(n,i),y()}).catch(x):y()};n.set("mapbox-layers",e);const O=i.getLayers();O.getArray().indexOf(n)===-1&&O.push(n),n.getSource()?B():n.once("change:source",B)})}function li(){var n="/home/runner/work/maputnik/maputnik/src/components/MapOpenLayers.tsx",e="28a80ffabe289131cb2e371ab6bf55f9bb46f37a",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/MapOpenLayers.tsx",statementMap:{0:{start:{line:11,column:2},end:{line:15,column:3}},1:{start:{line:12,column:4},end:{line:12,column:16}},2:{start:{line:14,column:4},end:{line:14,column:149}},3:{start:{line:14,column:103},end:{line:14,column:133}},4:{start:{line:18,column:24},end:{line:25,column:3}},5:{start:{line:28,column:14},end:{line:28,column:18}},6:{start:{line:30,column:19},end:{line:30,column:23}},7:{start:{line:32,column:4},end:{line:32,column:17}},8:{start:{line:33,column:4},end:{line:38,column:6}},9:{start:{line:39,column:4},end:{line:39,column:67}},10:{start:{line:42,column:4},end:{line:42,column:26}},11:{start:{line:42,column:19},end:{line:42,column:26}},12:{start:{line:43,column:4},end:{line:43,column:33}},13:{start:{line:44,column:4},end:{line:44,column:33}},14:{start:{line:47,column:4},end:{line:51,column:5}},15:{start:{line:48,column:6},end:{line:50,column:8}},16:{start:{line:54,column:4},end:{line:61,column:7}},17:{start:{line:62,column:16},end:{line:69,column:6}},18:{start:{line:70,column:4},end:{line:78,column:7}},19:{start:{line:71,column:21},end:{line:71,column:45}},20:{start:{line:72,column:6},end:{line:77,column:9}},21:{start:{line:79,column:22},end:{line:89,column:5}},22:{start:{line:80,column:19},end:{line:80,column:42}},23:{start:{line:81,column:21},end:{line:81,column:56}},24:{start:{line:82,column:6},end:{line:88,column:9}},25:{start:{line:90,column:4},end:{line:90,column:16}},26:{start:{line:91,column:4},end:{line:91,column:33}},27:{start:{line:92,column:4},end:{line:102,column:7}},28:{start:{line:93,column:21},end:{line:93,column:56}},29:{start:{line:94,column:6},end:{line:101,column:9}},30:{start:{line:103,column:4},end:{line:103,column:19}},31:{start:{line:104,column:4},end:{line:106,column:6}},32:{start:{line:108,column:17},end:{line:111,column:3}},33:{start:{line:109,column:4},end:{line:109,column:20}},34:{start:{line:110,column:4},end:{line:110,column:37}},35:{start:{line:113,column:14},end:{line:113,column:26}},36:{start:{line:114,column:4},end:{line:181,column:9}},37:{start:{line:118,column:22},end:{line:118,column:45}},38:{start:{line:173,column:22},end:{line:173,column:40}},39:{start:{line:184,column:22},end:{line:184,column:62}}},fnMap:{0:{name:"renderCoords",decl:{start:{line:10,column:9},end:{line:10,column:21}},loc:{start:{line:10,column:30},end:{line:16,column:1}},line:10},1:{name:"(anonymous_1)",decl:{start:{line:14,column:92},end:{line:14,column:93}},loc:{start:{line:14,column:103},end:{line:14,column:133}},line:14},2:{name:"(anonymous_2)",decl:{start:{line:19,column:17},end:{line:19,column:18}},loc:{start:{line:19,column:23},end:{line:20,column:5}},line:19},3:{name:"(anonymous_3)",decl:{start:{line:21,column:18},end:{line:21,column:19}},loc:{start:{line:21,column:24},end:{line:22,column:5}},line:21},4:{name:"(anonymous_4)",decl:{start:{line:23,column:19},end:{line:23,column:20}},loc:{start:{line:23,column:25},end:{line:24,column:5}},line:23},5:{name:"(anonymous_5)",decl:{start:{line:31,column:2},end:{line:31,column:3}},loc:{start:{line:31,column:21},end:{line:40,column:3}},line:31},6:{name:"(anonymous_6)",decl:{start:{line:41,column:2},end:{line:41,column:3}},loc:{start:{line:41,column:28},end:{line:45,column:3}},line:41},7:{name:"(anonymous_7)",decl:{start:{line:46,column:2},end:{line:46,column:3}},loc:{start:{line:46,column:32},end:{line:52,column:3}},line:46},8:{name:"(anonymous_8)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:22},end:{line:107,column:3}},line:53},9:{name:"(anonymous_9)",decl:{start:{line:70,column:26},end:{line:70,column:27}},loc:{start:{line:70,column:35},end:{line:78,column:5}},line:70},10:{name:"(anonymous_10)",decl:{start:{line:79,column:22},end:{line:79,column:23}},loc:{start:{line:79,column:28},end:{line:89,column:5}},line:79},11:{name:"(anonymous_11)",decl:{start:{line:92,column:25},end:{line:92,column:26}},loc:{start:{line:92,column:33},end:{line:102,column:5}},line:92},12:{name:"(anonymous_12)",decl:{start:{line:108,column:17},end:{line:108,column:18}},loc:{start:{line:108,column:24},end:{line:111,column:3}},line:108},13:{name:"(anonymous_13)",decl:{start:{line:112,column:2},end:{line:112,column:3}},loc:{start:{line:112,column:11},end:{line:182,column:3}},line:112},14:{name:"(anonymous_14)",decl:{start:{line:118,column:15},end:{line:118,column:16}},loc:{start:{line:118,column:22},end:{line:118,column:45}},line:118},15:{name:"(anonymous_15)",decl:{start:{line:173,column:15},end:{line:173,column:16}},loc:{start:{line:173,column:22},end:{line:173,column:40}},line:173}},branchMap:{0:{loc:{start:{line:11,column:2},end:{line:15,column:3}},type:"if",locations:[{start:{line:11,column:2},end:{line:15,column:3}},{start:{line:13,column:9},end:{line:15,column:3}}],line:11},1:{loc:{start:{line:11,column:6},end:{line:11,column:34}},type:"binary-expr",locations:[{start:{line:11,column:6},end:{line:11,column:13}},{start:{line:11,column:17},end:{line:11,column:34}}],line:11},2:{loc:{start:{line:42,column:4},end:{line:42,column:26}},type:"if",locations:[{start:{line:42,column:4},end:{line:42,column:26}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:42},3:{loc:{start:{line:47,column:4},end:{line:51,column:5}},type:"if",locations:[{start:{line:47,column:4},end:{line:51,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:47},4:{loc:{start:{line:134,column:26},end:{line:134,column:59}},type:"binary-expr",locations:[{start:{line:134,column:26},end:{line:134,column:53}},{start:{line:134,column:57},end:{line:134,column:59}}],line:134},5:{loc:{start:{line:146,column:6},end:{line:168,column:10}},type:"binary-expr",locations:[{start:{line:146,column:6},end:{line:146,column:29}},{start:{line:146,column:49},end:{line:168,column:10}}],line:146}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/MapOpenLayers.tsx"],names:[],mappings:"AAoBW,cAyIL,YAzIK;AApBX,OAAO,WAAW;AAClB,SAAQ,gBAAe;AACvB,SAA0B,uBAAuB;AAEjD,OAAO,6BAA6B;AAEpC,OAAO;AAEP,SAAQ,aAAY;AACpB,SAAQ,KAAK,MAAM,eAAc;AAEjC,SAAQ,gBAAe;AAIvB,SAAS,aAAc,QAAkB;AACvC,MAAI,CAAC,UAAU,OAAO,SAAS,GAAG;AAChC,WAAO;AAAA,EACT,OACK;AACH,WAAO,oBAAC,UAAK,WAAU,mBACpB,iBAAO,IAAI,CAAC,UAAU,OAAO,KAAK,EAAE,SAAS,GAAG,GAAQ,CAAC,EAAE,KAAK,IAAI,GACvE;AAAA,EACF;AACF;AAqBA,MAAM,8BAA8B,MAAM,UAA0D;AAAA,EAClG,OAAO,eAAe;AAAA,IACpB,aAAa,MAAM;AAAA,IAAC;AAAA,IACpB,cAAc,MAAM;AAAA,IAAC;AAAA,IACrB,eAAe,MAAM;AAAA,IAAC;AAAA,EACxB;AAAA,EACA;AAAA,EACA;AAAA,EACA,YAAmC;AAAA,EACnC;AAAA,EACA,iBAAqC;AAAA,EAErC,YAAY,OAAmC;AAC7C,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,MAAM;AAAA,MACN,UAAU;AAAA,MACV,QAAQ,CAAC;AAAA,MACT,QAAQ,CAAC;AAAA,IACX;AACA,SAAK,cAAc,SAAS,KAAK,aAAa,KAAK,IAAI,GAAG,GAAG;AAAA,EAC/D;AAAA,EAEA,aAAa,aAAiC;AAC5C,QAAG,CAAC,KAAK,IAAK;AAGd,SAAK,IAAI,UAAU,EAAE,MAAM;AAC3B,UAAM,KAAK,KAAK,WAAW;AAAA,EAC7B;AAAA,EAEA,mBAAmB,WAAuC;AACxD,QAAI,KAAK,MAAM,aAAa,UAAU,UAAU;AAC9C,WAAK;AAAA,QACH,KAAK,MAAM,oBAAoB,KAAK,MAAM,QAAQ;AAAA,MACpD;AAAA,IACF;AAAA,EACF;AAAA,EAEA,oBAAoB;AAClB,SAAK,UAAU,IAAI,QAAQ;AAAA,MACzB,SAAS,KAAK;AAAA,MACd,SAAS;AAAA,QACP,WAAW;AAAA,UACT,UAAU;AAAA,QACZ;AAAA,MACF;AAAA,IACF,CAAC;AAED,UAAM,MAAM,IAAI,IAAI;AAAA,MAClB,QAAQ,KAAK;AAAA,MACb,UAAU,CAAC,KAAK,OAAO;AAAA,MACvB,MAAM,IAAI,KAAK;AAAA,QACb,MAAM;AAAA,QACN,QAAQ,CAAC,KAAK,GAAG;AAAA,MACnB,CAAC;AAAA,IACH,CAAC;AAED,QAAI,GAAG,eAAe,CAAC,QAAQ;AAC7B,YAAM,SAAS,SAAS,IAAI,UAAU;AACtC,WAAK,SAAS;AAAA,QACZ,QAAQ;AAAA,UACN,OAAO,CAAC,EAAE,QAAQ,CAAC;AAAA,UACnB,OAAO,CAAC,EAAE,QAAQ,CAAC;AAAA,QACrB;AAAA,MACF,CAAC;AAAA,IACH,CAAC;AAED,UAAM,YAAY,MAAM;AACtB,YAAM,OAAO,IAAI,QAAQ,EAAE,QAAQ;AACnC,YAAM,SAAS,SAAS,IAAI,QAAQ,EAAE,UAAU,CAAE;AAElD,WAAK,MAAM,SAAS;AAAA,QAClB;AAAA,QACA,QAAQ;AAAA,UACN,KAAK,OAAO,CAAC;AAAA,UACb,KAAK,OAAO,CAAC;AAAA,QACf;AAAA,MACF,CAAC;AAAA,IACH;AAEA,cAAU;AACV,QAAI,GAAG,WAAW,SAAS;AAE3B,QAAI,GAAG,cAAc,CAAC,OAAO;AAC3B,YAAM,SAAS,SAAS,IAAI,QAAQ,EAAE,UAAU,CAAE;AAClD,WAAK,SAAS;AAAA,QACZ,QAAQ;AAAA,UACN,OAAO,CAAC,EAAE,QAAQ,CAAC;AAAA,UACnB,OAAO,CAAC,EAAE,QAAQ,CAAC;AAAA,QACrB;AAAA,QACA,UAAU,IAAI,QAAQ,EAAE,YAAY,EAAE,QAAQ,CAAC;AAAA,QAC/C,MAAM,IAAI,QAAQ,EAAE,QAAQ,EAAG,QAAQ,CAAC;AAAA,MAC1C,CAAC;AAAA,IACH,CAAC;AAID,SAAK,MAAM;AACX,SAAK;AAAA,MACH,KAAK,MAAM,oBAAoB,KAAK,MAAM,QAAQ;AAAA,IACpD;AAAA,EACF;AAAA,EAEA,eAAe,CAAC,MAAW;AACzB,MAAE,OAAO,KAAK;AACd,SAAK,QAAS,YAAY,MAAS;AAAA,EACrC;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SAAI,WAAU,yBACpB;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,KAAK,OAAK,KAAK,iBAAiB;AAAA,UAChC,OAAO,EAAC,YAAY,QAAO;AAAA,UAC3B,WAAU;AAAA,UAEV;AAAA;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,SAAS,KAAK;AAAA,gBACd,cAAY,EAAE,aAAa;AAAA,gBAC5B;AAAA;AAAA,YAED;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,UAAU,KAAK,MAAM,oBAAoB,CAAC;AAAA,gBAC1C,eAAe,KAAK,MAAM;AAAA;AAAA,YAC5B;AAAA;AAAA;AAAA,MACF;AAAA,MACA,qBAAC,SAAI,WAAU,oBACZ;AAAA,UAAE,OAAO;AAAA,QAAE;AAAA,QAAE,KAAK,MAAM;AAAA,SAC3B;AAAA,MACC,KAAK,MAAM,gBACV,qBAAC,SAAI,WAAU,qBACb;AAAA,6BAAC,SACC;AAAA,+BAAC,WAAO;AAAA,cAAE,SAAS;AAAA,YAAE;AAAA,aAAC;AAAA,UACtB,oBAAC,UAAM,uBAAa,KAAK,MAAM,MAAM,GAAE;AAAA,WACzC;AAAA,QACA,qBAAC,SACC;AAAA,+BAAC,WAAO;AAAA,cAAE,SAAS;AAAA,YAAE;AAAA,aAAC;AAAA,UACtB,oBAAC,UAAM,uBAAa,KAAK,MAAM,MAAM,GAAE;AAAA,WACzC;AAAA,QACA,qBAAC,SACC;AAAA,+BAAC,WAAO;AAAA,cAAE,WAAW;AAAA,YAAE;AAAA,aAAC;AAAA,UACxB,oBAAC,UAAM,eAAK,MAAM,UAAS;AAAA,WAC7B;AAAA,SACF;AAAA,MAEF;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,KAAK,OAAK,KAAK,YAAY;AAAA,UAC3B,MAAK;AAAA,UACL,cAAY,EAAE,UAAU;AAAA,UACxB,OAAO;AAAA,YACL,GAAG,KAAK,MAAM;AAAA,UAChB;AAAA;AAAA,MACF;AAAA,OACF;AAAA,EACF;AACF;AAEA,MAAM,gBAAgB,gBAAgB,EAAE,qBAAqB;AAC7D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"28a80ffabe289131cb2e371ab6bf55f9bb46f37a"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return li=function(){return l},l}li();function s9(n){return li().f[0]++,li().s[0]++,li().b[1][0]++,!n||(li().b[1][1]++,n.length<2)?(li().b[0][0]++,li().s[1]++,null):(li().b[0][1]++,li().s[2]++,ue.jsx("span",{className:"maputnik-coords",children:n.map(e=>(li().f[1]++,li().s[3]++,String(e).padStart(7,""))).join(", ")}))}class qU extends Xn.Component{constructor(t){li().f[5]++,li().s[7]++;super(t);Kn(this,"updateStyle");Kn(this,"map");Kn(this,"container",(li().s[5]++,null));Kn(this,"overlay");Kn(this,"popupContainer",(li().s[6]++,null));Kn(this,"closeOverlay",(li().s[32]++,t=>{li().f[12]++,li().s[33]++,t.target.blur(),li().s[34]++,this.overlay.setPosition(void 0)}));li().s[8]++,this.state={zoom:"0",rotation:"0",cursor:[],center:[]},li().s[9]++,this.updateStyle=j2.throttle(this._updateStyle.bind(this),200)}_updateStyle(t){if(li().f[6]++,li().s[10]++,this.map)li().b[2][1]++;else{li().b[2][0]++,li().s[11]++;return}li().s[12]++,this.map.getLayers().clear(),li().s[13]++,Zte(this.map,t)}componentDidUpdate(t){li().f[7]++,li().s[14]++,this.props.mapStyle!==t.mapStyle?(li().b[3][0]++,li().s[15]++,this.updateStyle(this.props.replaceAccessTokens(this.props.mapStyle))):li().b[3][1]++}componentDidMount(){li().f[8]++,li().s[16]++,this.overlay=new WJ({element:this.popupContainer,autoPan:{animation:{duration:250}}});const t=(li().s[17]++,new sO({target:this.container,overlays:[this.overlay],view:new Ap({zoom:1,center:[180,-90]})}));li().s[18]++,t.on("pointermove",i=>{li().f[9]++;const s=(li().s[19]++,n4(i.coordinate));li().s[20]++,this.setState({cursor:[s[0].toFixed(2),s[1].toFixed(2)]})}),li().s[21]++;const r=()=>{li().f[10]++;const i=(li().s[22]++,t.getView().getZoom()),s=(li().s[23]++,n4(t.getView().getCenter()));li().s[24]++,this.props.onChange({zoom:i,center:{lng:s[0],lat:s[1]}})};li().s[25]++,r(),li().s[26]++,t.on("moveend",r),li().s[27]++,t.on("postrender",i=>{li().f[11]++;const s=(li().s[28]++,n4(t.getView().getCenter()));li().s[29]++,this.setState({center:[s[0].toFixed(2),s[1].toFixed(2)],rotation:t.getView().getRotation().toFixed(2),zoom:t.getView().getZoom().toFixed(2)})}),li().s[30]++,this.map=t,li().s[31]++,this.updateStyle(this.props.replaceAccessTokens(this.props.mapStyle))}render(){li().f[13]++;const t=(li().s[35]++,this.props.t);return li().s[36]++,ue.jsxs("div",{className:"maputnik-ol-container",children:[ue.jsxs("div",{ref:r=>(li().f[14]++,li().s[37]++,this.popupContainer=r),style:{background:"black"},className:"maputnik-popup",children:[ue.jsx("button",{className:"maplibregl-popup-close-button",onClick:this.closeOverlay,"aria-label":t("Close popup"),children:""}),ue.jsx(zF,{features:(li().b[4][0]++,this.state.selectedFeatures||(li().b[4][1]++,[])),onLayerSelect:this.props.onLayerSelect})]}),ue.jsxs("div",{className:"maputnik-ol-zoom",children:[t("Zoom:")," ",this.state.zoom]}),(li().b[5][0]++,this.props.debugToolbox&&(li().b[5][1]++,ue.jsxs("div",{className:"maputnik-ol-debug",children:[ue.jsxs("div",{children:[ue.jsxs("label",{children:[t("cursor:")," "]}),ue.jsx("span",{children:s9(this.state.cursor)})]}),ue.jsxs("div",{children:[ue.jsxs("label",{children:[t("center:")," "]}),ue.jsx("span",{children:s9(this.state.center)})]}),ue.jsxs("div",{children:[ue.jsxs("label",{children:[t("rotation:")," "]}),ue.jsx("span",{children:this.state.rotation})]})]}))),ue.jsx("div",{className:"maputnik-ol",ref:r=>(li().f[15]++,li().s[38]++,this.container=r),role:"region","aria-label":t("Map view"),style:{...this.props.style}})]})}}Kn(qU,"defaultProps",(li().s[4]++,{onMapLoaded:()=>{li().f[2]++},onDataChange:()=>{li().f[3]++},onLayerSelect:()=>{li().f[4]++}}));const Xte=(li().s[39]++,zs()(qU));var T4={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var a9;function Jte(){return a9||(a9=1,function(n){(function(){var e={}.hasOwnProperty;function t(){for(var s="",l=0;l<arguments.length;l++){var o=arguments[l];o&&(s=i(s,r(o)))}return s}function r(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return t.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var l="";for(var o in s)e.call(s,o)&&s[o]&&(l=i(l,o));return l}function i(s,l){return l?s?s+" "+l:s+l:s}n.exports?(t.default=t,n.exports=t):window.classNames=t})()}(T4)),T4.exports}var ene=Jte();const tm=fl(ene);function Cg(){var n="/home/runner/work/maputnik/maputnik/src/components/Collapser.tsx",e="e73e8fb606fcd7318a8222b2e50c576ed3ad8702",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/Collapser.tsx",statementMap:{0:{start:{line:6,column:22},end:{line:10,column:5}},1:{start:{line:11,column:4},end:{line:11,column:154}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:12,column:3}},line:5}},branchMap:{0:{loc:{start:{line:11,column:11},end:{line:11,column:153}},type:"cond-expr",locations:[{start:{line:11,column:52},end:{line:11,column:92}},{start:{line:11,column:111},end:{line:11,column:153}}],line:11}},s:{0:0,1:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/Collapser.tsx"],names:[],mappings:"AAeoC;AAfpC,OAAO,WAAW;AAClB,SAAQ,iBAAiB,qBAAoB;AAO7C,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,SAAS;AACP,UAAM,YAAY;AAAA,MAChB,OAAO;AAAA,MACP,QAAQ;AAAA,MACR,GAAG,KAAK,MAAM;AAAA,IAChB;AACA,WAAO,KAAK,MAAM,cAAc,oBAAC,iBAAc,OAAO,WAAU,IAAK,oBAAC,mBAAgB,OAAO,WAAW;AAAA,EAC1G;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e73e8fb606fcd7318a8222b2e50c576ed3ad8702"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Cg=function(){return l},l}Cg();class tne extends Xn.Component{render(){Cg().f[0]++;const e=(Cg().s[0]++,{width:20,height:20,...this.props.style});return Cg().s[1]++,this.props.isCollapsed?(Cg().b[0][0]++,ue.jsx(HV,{style:e})):(Cg().b[0][1]++,ue.jsx($V,{style:e}))}}function iy(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerListGroup.tsx",e="b04bfec534013c327fd210571832bbd2813a944a",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/LayerListGroup.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:32,column:9}},1:{start:{line:11,column:25},end:{line:11,column:72}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:33,column:3}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:11,column:17},end:{line:11,column:18}},loc:{start:{line:11,column:25},end:{line:11,column:72}},line:11}},branchMap:{},s:{0:0,1:0},f:{0:0,1:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerListGroup.tsx"],names:[],mappings:"AAcM,SAIE,KAJF;AAdN,OAAO,WAAW;AAClB,OAAO,eAAe;AAUtB,qBAAqB,uBAAuB,MAAM,UAA+B;AAAA,EAC/E,SAAS;AACP,WAAO,oBAAC,QAAG,WAAU,6BACnB;AAAA,MAAC;AAAA;AAAA,QAAI,WAAU;AAAA,QACb,eAAa,sBAAoB,KAAK,MAAM,aAAa;AAAA,QACzD,SAAS,QAAM,KAAK,MAAM,eAAe,CAAC,KAAK,MAAM,QAAQ;AAAA,QAE7D;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,iBAAe,KAAK,MAAM,eAAe;AAAA,cACzC,iBAAe,KAAK,MAAM;AAAA,cAEzB,eAAK,MAAM;AAAA;AAAA,UACd;AAAA,UACA,oBAAC,UAAK,WAAU,kBAAiB;AAAA,UACjC;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,QAAQ,IAAI,OAAO,GAAG;AAAA,cAC/B,aAAa,KAAK,MAAM;AAAA;AAAA,UAC1B;AAAA;AAAA;AAAA,IACF,GACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"b04bfec534013c327fd210571832bbd2813a944a"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return iy=function(){return l},l}iy();class nne extends Xn.Component{render(){return iy().f[0]++,iy().s[0]++,ue.jsx("li",{className:"maputnik-layer-list-group",children:ue.jsxs("div",{className:"maputnik-layer-list-group-header","data-wd-key":"layer-list-group:"+this.props["data-wd-key"],onClick:e=>(iy().f[1]++,iy().s[1]++,this.props.onActiveToggle(!this.props.isActive)),children:[ue.jsx("button",{className:"maputnik-layer-list-group-title","aria-controls":this.props["aria-controls"],"aria-expanded":this.props.isActive,children:this.props.title}),ue.jsx("span",{className:"maputnik-space"}),ue.jsx(tne,{style:{height:14,width:14},isCollapsed:this.props.isActive})]})})}}function xC(){return xC=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},xC.apply(null,arguments)}function rne(n){if(Array.isArray(n))return n}function ine(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,s,l,o=[],f=!0,y=!1;try{if(s=(t=t.call(n)).next,e!==0)for(;!(f=(r=s.call(t)).done)&&(o.push(r.value),o.length!==e);f=!0);}catch(x){y=!0,i=x}finally{try{if(!f&&t.return!=null&&(l=t.return(),Object(l)!==l))return}finally{if(y)throw i}}return o}}function M6(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function VU(n,e){if(n){if(typeof n=="string")return M6(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?M6(n,e):void 0}}function one(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $U(n,e){return rne(n)||ine(n,e)||VU(n,e)||one()}function Ty(n){"@babel/helpers - typeof";return Ty=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ty(n)}function sne(n,e){if(Ty(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(Ty(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function HU(n){var e=sne(n,"string");return Ty(e)=="symbol"?e:e+""}function Oa(n,e,t){return(e=HU(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function P4(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&r.push.apply(r,Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.forEach(function(i){Oa(n,i,t[i])})}return n}function ZC(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function ane(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,HU(r.key),r)}}function XC(n,e,t){return e&&ane(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function us(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function fO(n,e){if(e&&(Ty(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return us(n)}function MC(n){return MC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},MC(n)}function w6(n,e){return w6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},w6(n,e)}function pO(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&w6(n,e)}var K4,l9;function lne(){if(l9)return K4;l9=1;var n=function(e,t,r,i,s,l,o,f){if(!e){var y;if(t===void 0)y=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var x=[r,i,s,l,o,f],B=0;y=new Error(t.replace(/%s/g,function(){return x[B++]})),y.name="Invariant Violation"}throw y.framesToPop=1,y}};return K4=n,K4}var une=lne();const Wg=fl(une);function Ane(n){if(Array.isArray(n))return M6(n)}function cne(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function dne(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hne(n){return Ane(n)||cne(n)||VU(n)||dne()}var fne=function(){function n(){ZC(this,n),Oa(this,"refs",{})}return XC(n,[{key:"add",value:function(t,r){this.refs[t]||(this.refs[t]=[]),this.refs[t].push(r)}},{key:"remove",value:function(t,r){var i=this.getIndex(t,r);i!==-1&&this.refs[t].splice(i,1)}},{key:"isActive",value:function(){return this.active}},{key:"getActive",value:function(){var t=this;return this.refs[this.active.collection].find(function(r){var i=r.node;return i.sortableInfo.index==t.active.index})}},{key:"getIndex",value:function(t,r){return this.refs[t].indexOf(r)}},{key:"getOrderedRefs",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.active.collection;return this.refs[t].sort(pne)}}]),n}();function pne(n,e){var t=n.node.sortableInfo.index,r=e.node.sortableInfo.index;return t-r}function ZU(n,e){return Object.keys(n).reduce(function(t,r){return e.indexOf(r)===-1&&(t[r]=n[r]),t},{})}var E1={end:["touchend","touchcancel","mouseup"],move:["touchmove","mousemove"],start:["touchstart","mousedown"]},XU=function(){if(typeof window>"u"||typeof document>"u")return"";var n=window.getComputedStyle(document.documentElement,"")||["-moz-hidden-iframe"],e=(Array.prototype.slice.call(n).join("").match(/-(moz|webkit|ms)-/)||n.OLink===""&&["","o"])[1];switch(e){case"ms":return"ms";default:return e&&e.length?e[0].toUpperCase()+e.substr(1):""}}();function ab(n,e){Object.keys(e).forEach(function(t){n.style[t]=e[t]})}function lb(n,e){n.style["".concat(XU,"Transform")]=e==null?"":"translate3d(".concat(e.x,"px,").concat(e.y,"px,0)")}function R4(n,e){n.style["".concat(XU,"TransitionDuration")]=e==null?"":"".concat(e,"ms")}function Tv(n,e){for(;n;){if(e(n))return n;n=n.parentNode}return null}function u9(n,e,t){return Math.max(n,Math.min(t,e))}function oy(n){return n.substr(-2)==="px"?parseFloat(n):0}function mne(n){var e=window.getComputedStyle(n);return{bottom:oy(e.marginBottom),left:oy(e.marginLeft),right:oy(e.marginRight),top:oy(e.marginTop)}}function mO(n,e){var t=e.displayName||e.name;return t?"".concat(n,"(").concat(t,")"):n}function D4(n,e){var t=n.getBoundingClientRect();return{top:t.top+e.top,left:t.left+e.left}}function mv(n){return n.touches&&n.touches.length?{x:n.touches[0].pageX,y:n.touches[0].pageY}:n.changedTouches&&n.changedTouches.length?{x:n.changedTouches[0].pageX,y:n.changedTouches[0].pageY}:{x:n.pageX,y:n.pageY}}function gne(n){return n.touches&&n.touches.length||n.changedTouches&&n.changedTouches.length}function Eb(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{left:0,top:0};if(n){var r={left:t.left+n.offsetLeft,top:t.top+n.offsetTop};return n.parentNode===e?r:Eb(n.parentNode,e,r)}}function yne(n,e,t){return n<t&&n>e?n-1:n>t&&n<e?n+1:n}function A9(n){var e=n.lockOffset,t=n.width,r=n.height,i=e,s=e,l="px";if(typeof e=="string"){var o=/^[+-]?\d*(?:\.\d*)?(px|%)$/.exec(e);Wg(o!==null,'lockOffset value should be a number or a string of a number followed by "px" or "%". Given %s',e),i=parseFloat(e),s=parseFloat(e),l=o[1]}return Wg(isFinite(i)&&isFinite(s),"lockOffset value should be a finite. Given %s",e),l==="%"&&(i=i*t/100,s=s*r/100),{x:i,y:s}}function vne(n){var e=n.height,t=n.width,r=n.lockOffset,i=Array.isArray(r)?r:[r,r];Wg(i.length===2,"lockOffset prop of SortableContainer should be a single value or an array of exactly two values. Given %s",r);var s=$U(i,2),l=s[0],o=s[1];return[A9({height:e,lockOffset:l,width:t}),A9({height:e,lockOffset:o,width:t})]}function Cne(n){var e=window.getComputedStyle(n),t=/(auto|scroll)/,r=["overflow","overflowX","overflowY"];return r.find(function(i){return t.test(e[i])})}function JU(n){return n instanceof HTMLElement?Cne(n)?n:JU(n.parentNode):null}function _ne(n){var e=window.getComputedStyle(n);return e.display==="grid"?{x:oy(e.gridColumnGap),y:oy(e.gridRowGap)}:{x:0,y:0}}var hg={TAB:9,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40},_g={Anchor:"A",Button:"BUTTON",Canvas:"CANVAS",Input:"INPUT",Option:"OPTION",Textarea:"TEXTAREA",Select:"SELECT"};function bne(n){var e="input, textarea, select, canvas, [contenteditable]",t=n.querySelectorAll(e),r=n.cloneNode(!0),i=hne(r.querySelectorAll(e));return i.forEach(function(s,l){if(s.type!=="file"&&(s.value=t[l].value),s.type==="radio"&&s.name&&(s.name="__sortableClone__".concat(s.name)),s.tagName===_g.Canvas&&t[l].width>0&&t[l].height>0){var o=s.getContext("2d");o.drawImage(t[l],0,0)}}),r}function xne(n){var e,t,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{withRef:!1};return t=e=function(i){pO(s,i);function s(){var l,o;ZC(this,s);for(var f=arguments.length,y=new Array(f),x=0;x<f;x++)y[x]=arguments[x];return o=fO(this,(l=MC(s)).call.apply(l,[this].concat(y))),Oa(us(us(o)),"wrappedInstance",ci.createRef()),o}return XC(s,[{key:"componentDidMount",value:function(){var o=ax.findDOMNode(this);o.sortableHandle=!0}},{key:"getWrappedInstance",value:function(){return Wg(r.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableHandle() call"),this.wrappedInstance.current}},{key:"render",value:function(){var o=r.withRef?this.wrappedInstance:null;return ci.createElement(n,xC({ref:o},this.props))}}]),s}(ci.Component),Oa(e,"displayName",mO("sortableHandle",n)),t}function c9(n){return n.sortableHandle!=null}var Mne=function(){function n(e,t){ZC(this,n),this.container=e,this.onScrollCallback=t}return XC(n,[{key:"clear",value:function(){this.interval!=null&&(clearInterval(this.interval),this.interval=null)}},{key:"update",value:function(t){var r=this,i=t.translate,s=t.minTranslate,l=t.maxTranslate,o=t.width,f=t.height,y={x:0,y:0},x={x:1,y:1},B={x:10,y:10},O=this.container,P=O.scrollTop,U=O.scrollLeft,j=O.scrollHeight,N=O.scrollWidth,Y=O.clientHeight,H=O.clientWidth,se=P===0,re=j-P-Y===0,V=U===0,ne=N-U-H===0;i.y>=l.y-f/2&&!re?(y.y=1,x.y=B.y*Math.abs((l.y-f/2-i.y)/f)):i.x>=l.x-o/2&&!ne?(y.x=1,x.x=B.x*Math.abs((l.x-o/2-i.x)/o)):i.y<=s.y+f/2&&!se?(y.y=-1,x.y=B.y*Math.abs((i.y-f/2-s.y)/f)):i.x<=s.x+o/2&&!V&&(y.x=-1,x.x=B.x*Math.abs((i.x-o/2-s.x)/o)),this.interval&&(this.clear(),this.isAutoScrolling=!1),(y.x!==0||y.y!==0)&&(this.interval=setInterval(function(){r.isAutoScrolling=!0;var G={left:x.x*y.x,top:x.y*y.y};r.container.scrollTop+=G.top,r.container.scrollLeft+=G.left,r.onScrollCallback(G)},5))}}]),n}();function wne(n){var e=n.node;return{height:e.offsetHeight,width:e.offsetWidth}}function Sne(n){var e=[_g.Input,_g.Textarea,_g.Select,_g.Option,_g.Button];return!!(e.indexOf(n.target.tagName)!==-1||Tv(n.target,function(t){return t.contentEditable==="true"}))}var ez={axis:yi.oneOf(["x","y","xy"]),contentWindow:yi.any,disableAutoscroll:yi.bool,distance:yi.number,getContainer:yi.func,getHelperDimensions:yi.func,helperClass:yi.string,helperContainer:yi.oneOfType([yi.func,typeof HTMLElement>"u"?yi.any:yi.instanceOf(HTMLElement)]),hideSortableGhost:yi.bool,keyboardSortingTransitionDuration:yi.number,lockAxis:yi.string,lockOffset:yi.oneOfType([yi.number,yi.string,yi.arrayOf(yi.oneOfType([yi.number,yi.string]))]),lockToContainerEdges:yi.bool,onSortEnd:yi.func,onSortMove:yi.func,onSortOver:yi.func,onSortStart:yi.func,pressDelay:yi.number,pressThreshold:yi.number,keyCodes:yi.shape({lift:yi.arrayOf(yi.number),drop:yi.arrayOf(yi.number),cancel:yi.arrayOf(yi.number),up:yi.arrayOf(yi.number),down:yi.arrayOf(yi.number)}),shouldCancelStart:yi.func,transitionDuration:yi.number,updateBeforeSortStart:yi.func,useDragHandle:yi.bool,useWindowAsScrollContainer:yi.bool},tz={lift:[hg.SPACE],drop:[hg.SPACE],cancel:[hg.ESC],up:[hg.UP,hg.LEFT],down:[hg.DOWN,hg.RIGHT]},Ene={axis:"y",disableAutoscroll:!1,distance:0,getHelperDimensions:wne,hideSortableGhost:!0,lockOffset:"50%",lockToContainerEdges:!1,pressDelay:0,pressThreshold:5,keyCodes:tz,shouldCancelStart:Sne,transitionDuration:300,useWindowAsScrollContainer:!1},Bne=Object.keys(ez);function One(n){Wg(!(n.distance&&n.pressDelay),"Attempted to set both `pressDelay` and `distance` on SortableContainer, you may only use one or the other, not both at the same time.")}function Ine(n,e){try{var t=n()}catch(r){return e(!0,r)}return t&&t.then?t.then(e.bind(null,!1),e.bind(null,!0)):e(!1,value)}var nz=ci.createContext({manager:{}});function kne(n){var e,t,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{withRef:!1};return t=e=function(i){pO(s,i);function s(l){var o;ZC(this,s),o=fO(this,MC(s).call(this,l)),Oa(us(us(o)),"state",{}),Oa(us(us(o)),"handleStart",function(y){var x=o.props,B=x.distance,O=x.shouldCancelStart;if(!(y.button===2||O(y))){o.touched=!0,o.position=mv(y);var P=Tv(y.target,function(se){return se.sortableInfo!=null});if(P&&P.sortableInfo&&o.nodeIsChild(P)&&!o.state.sorting){var U=o.props.useDragHandle,j=P.sortableInfo,N=j.index,Y=j.collection,H=j.disabled;if(H||U&&!Tv(y.target,c9))return;o.manager.active={collection:Y,index:N},!gne(y)&&y.target.tagName===_g.Anchor&&y.preventDefault(),B||(o.props.pressDelay===0?o.handlePress(y):o.pressTimer=setTimeout(function(){return o.handlePress(y)},o.props.pressDelay))}}}),Oa(us(us(o)),"nodeIsChild",function(y){return y.sortableInfo.manager===o.manager}),Oa(us(us(o)),"handleMove",function(y){var x=o.props,B=x.distance,O=x.pressThreshold;if(!o.state.sorting&&o.touched&&!o._awaitingUpdateBeforeSortStart){var P=mv(y),U={x:o.position.x-P.x,y:o.position.y-P.y},j=Math.abs(U.x)+Math.abs(U.y);o.delta=U,!B&&(!O||j>=O)?(clearTimeout(o.cancelTimer),o.cancelTimer=setTimeout(o.cancel,0)):B&&j>=B&&o.manager.isActive()&&o.handlePress(y)}}),Oa(us(us(o)),"handleEnd",function(){o.touched=!1,o.cancel()}),Oa(us(us(o)),"cancel",function(){var y=o.props.distance,x=o.state.sorting;x||(y||clearTimeout(o.pressTimer),o.manager.active=null)}),Oa(us(us(o)),"handlePress",function(y){try{var x=o.manager.getActive(),B=function(){if(x){var O=function(){var fe=V.sortableInfo.index,Ee=mne(V),me=_ne(o.container),Se=o.scrollContainer.getBoundingClientRect(),Ke=j({index:fe,node:V,collection:ne});if(o.node=V,o.margin=Ee,o.gridGap=me,o.width=Ke.width,o.height=Ke.height,o.marginOffset={x:o.margin.left+o.margin.right+o.gridGap.x,y:Math.max(o.margin.top,o.margin.bottom,o.gridGap.y)},o.boundingClientRect=V.getBoundingClientRect(),o.containerBoundingRect=Se,o.index=fe,o.newIndex=fe,o.axis={x:U.indexOf("x")>=0,y:U.indexOf("y")>=0},o.offsetEdge=Eb(V,o.container),G?o.initialOffset=mv(P4({},y,{pageX:o.boundingClientRect.left,pageY:o.boundingClientRect.top})):o.initialOffset=mv(y),o.initialScroll={left:o.scrollContainer.scrollLeft,top:o.scrollContainer.scrollTop},o.initialWindowScroll={left:window.pageXOffset,top:window.pageYOffset},o.helper=o.helperContainer.appendChild(bne(V)),ab(o.helper,{boxSizing:"border-box",height:"".concat(o.height,"px"),left:"".concat(o.boundingClientRect.left-Ee.left,"px"),pointerEvents:"none",position:"fixed",top:"".concat(o.boundingClientRect.top-Ee.top,"px"),width:"".concat(o.width,"px")}),G&&o.helper.focus(),Y&&(o.sortableGhost=V,ab(V,{opacity:0,visibility:"hidden"})),o.minTranslate={},o.maxTranslate={},G){var xe=re?{top:0,left:0,width:o.contentWindow.innerWidth,height:o.contentWindow.innerHeight}:o.containerBoundingRect,at=xe.top,Ze=xe.left,Je=xe.width,Ne=xe.height,we=at+Ne,De=Ze+Je;o.axis.x&&(o.minTranslate.x=Ze-o.boundingClientRect.left,o.maxTranslate.x=De-(o.boundingClientRect.left+o.width)),o.axis.y&&(o.minTranslate.y=at-o.boundingClientRect.top,o.maxTranslate.y=we-(o.boundingClientRect.top+o.height))}else o.axis.x&&(o.minTranslate.x=(re?0:Se.left)-o.boundingClientRect.left-o.width/2,o.maxTranslate.x=(re?o.contentWindow.innerWidth:Se.left+Se.width)-o.boundingClientRect.left-o.width/2),o.axis.y&&(o.minTranslate.y=(re?0:Se.top)-o.boundingClientRect.top-o.height/2,o.maxTranslate.y=(re?o.contentWindow.innerHeight:Se.top+Se.height)-o.boundingClientRect.top-o.height/2);N&&N.split(" ").forEach(function(He){return o.helper.classList.add(He)}),o.listenerNode=y.touches?y.target:o.contentWindow,G?(o.listenerNode.addEventListener("wheel",o.handleKeyEnd,!0),o.listenerNode.addEventListener("mousedown",o.handleKeyEnd,!0),o.listenerNode.addEventListener("keydown",o.handleKeyDown)):(E1.move.forEach(function(He){return o.listenerNode.addEventListener(He,o.handleSortMove,!1)}),E1.end.forEach(function(He){return o.listenerNode.addEventListener(He,o.handleSortEnd,!1)})),o.setState({sorting:!0,sortingIndex:fe}),se&&se({node:V,index:fe,collection:ne,isKeySorting:G,nodes:o.manager.getOrderedRefs(),helper:o.helper},y),G&&o.keyMove(0)},P=o.props,U=P.axis,j=P.getHelperDimensions,N=P.helperClass,Y=P.hideSortableGhost,H=P.updateBeforeSortStart,se=P.onSortStart,re=P.useWindowAsScrollContainer,V=x.node,ne=x.collection,G=o.manager.isKeySorting,oe=function(){if(typeof H=="function"){o._awaitingUpdateBeforeSortStart=!0;var he=Ine(function(){var fe=V.sortableInfo.index;return Promise.resolve(H({collection:ne,index:fe,node:V,isKeySorting:G},y)).then(function(){})},function(fe,Ee){if(o._awaitingUpdateBeforeSortStart=!1,fe)throw Ee;return Ee});if(he&&he.then)return he.then(function(){})}}();return oe&&oe.then?oe.then(O):O(oe)}}();return Promise.resolve(B&&B.then?B.then(function(){}):void 0)}catch(O){return Promise.reject(O)}}),Oa(us(us(o)),"handleSortMove",function(y){var x=o.props.onSortMove;typeof y.preventDefault=="function"&&y.cancelable&&y.preventDefault(),o.updateHelperPosition(y),o.animateNodes(),o.autoscroll(),x&&x(y)}),Oa(us(us(o)),"handleSortEnd",function(y){var x=o.props,B=x.hideSortableGhost,O=x.onSortEnd,P=o.manager,U=P.active.collection,j=P.isKeySorting,N=o.manager.getOrderedRefs();o.listenerNode&&(j?(o.listenerNode.removeEventListener("wheel",o.handleKeyEnd,!0),o.listenerNode.removeEventListener("mousedown",o.handleKeyEnd,!0),o.listenerNode.removeEventListener("keydown",o.handleKeyDown)):(E1.move.forEach(function(V){return o.listenerNode.removeEventListener(V,o.handleSortMove)}),E1.end.forEach(function(V){return o.listenerNode.removeEventListener(V,o.handleSortEnd)}))),o.helper.parentNode.removeChild(o.helper),B&&o.sortableGhost&&ab(o.sortableGhost,{opacity:"",visibility:""});for(var Y=0,H=N.length;Y<H;Y++){var se=N[Y],re=se.node;se.edgeOffset=null,se.boundingClientRect=null,lb(re,null),R4(re,null),se.translate=null}o.autoScroller.clear(),o.manager.active=null,o.manager.isKeySorting=!1,o.setState({sorting:!1,sortingIndex:null}),typeof O=="function"&&O({collection:U,newIndex:o.newIndex,oldIndex:o.index,isKeySorting:j,nodes:N},y),o.touched=!1}),Oa(us(us(o)),"autoscroll",function(){var y=o.props.disableAutoscroll,x=o.manager.isKeySorting;if(y){o.autoScroller.clear();return}if(x){var B=P4({},o.translate),O=0,P=0;o.axis.x&&(B.x=Math.min(o.maxTranslate.x,Math.max(o.minTranslate.x,o.translate.x)),O=o.translate.x-B.x),o.axis.y&&(B.y=Math.min(o.maxTranslate.y,Math.max(o.minTranslate.y,o.translate.y)),P=o.translate.y-B.y),o.translate=B,lb(o.helper,o.translate),o.scrollContainer.scrollLeft+=O,o.scrollContainer.scrollTop+=P;return}o.autoScroller.update({height:o.height,maxTranslate:o.maxTranslate,minTranslate:o.minTranslate,translate:o.translate,width:o.width})}),Oa(us(us(o)),"onAutoScroll",function(y){o.translate.x+=y.left,o.translate.y+=y.top,o.animateNodes()}),Oa(us(us(o)),"handleKeyDown",function(y){var x=y.keyCode,B=o.props,O=B.shouldCancelStart,P=B.keyCodes,U=P===void 0?{}:P,j=P4({},tz,U);o.manager.active&&!o.manager.isKeySorting||!o.manager.active&&(!j.lift.includes(x)||O(y)||!o.isValidSortingTarget(y))||(y.stopPropagation(),y.preventDefault(),j.lift.includes(x)&&!o.manager.active?o.keyLift(y):j.drop.includes(x)&&o.manager.active?o.keyDrop(y):j.cancel.includes(x)?(o.newIndex=o.manager.active.index,o.keyDrop(y)):j.up.includes(x)?o.keyMove(-1):j.down.includes(x)&&o.keyMove(1))}),Oa(us(us(o)),"keyLift",function(y){var x=y.target,B=Tv(x,function(j){return j.sortableInfo!=null}),O=B.sortableInfo,P=O.index,U=O.collection;o.initialFocusedNode=x,o.manager.isKeySorting=!0,o.manager.active={index:P,collection:U},o.handlePress(y)}),Oa(us(us(o)),"keyMove",function(y){var x=o.manager.getOrderedRefs(),B=x[x.length-1].node.sortableInfo.index,O=o.newIndex+y,P=o.newIndex;if(!(O<0||O>B)){o.prevIndex=P,o.newIndex=O;var U=yne(o.newIndex,o.prevIndex,o.index),j=x.find(function(G){var oe=G.node;return oe.sortableInfo.index===U}),N=j.node,Y=o.containerScrollDelta,H=j.boundingClientRect||D4(N,Y),se=j.translate||{x:0,y:0},re={top:H.top+se.y-Y.top,left:H.left+se.x-Y.left},V=P<O,ne={x:V&&o.axis.x?N.offsetWidth-o.width:0,y:V&&o.axis.y?N.offsetHeight-o.height:0};o.handleSortMove({pageX:re.left+ne.x,pageY:re.top+ne.y,ignoreTransition:y===0})}}),Oa(us(us(o)),"keyDrop",function(y){o.handleSortEnd(y),o.initialFocusedNode&&o.initialFocusedNode.focus()}),Oa(us(us(o)),"handleKeyEnd",function(y){o.manager.active&&o.keyDrop(y)}),Oa(us(us(o)),"isValidSortingTarget",function(y){var x=o.props.useDragHandle,B=y.target,O=Tv(B,function(P){return P.sortableInfo!=null});return O&&O.sortableInfo&&!O.sortableInfo.disabled&&(x?c9(B):B.sortableInfo)});var f=new fne;return One(l),o.manager=f,o.wrappedInstance=ci.createRef(),o.sortableContextValue={manager:f},o.events={end:o.handleEnd,move:o.handleMove,start:o.handleStart},o}return XC(s,[{key:"componentDidMount",value:function(){var o=this,f=this.props.useWindowAsScrollContainer,y=this.getContainer();Promise.resolve(y).then(function(x){o.container=x,o.document=o.container.ownerDocument||document;var B=o.props.contentWindow||o.document.defaultView||window;o.contentWindow=typeof B=="function"?B():B,o.scrollContainer=f?o.document.scrollingElement||o.document.documentElement:JU(o.container)||o.container,o.autoScroller=new Mne(o.scrollContainer,o.onAutoScroll),Object.keys(o.events).forEach(function(O){return E1[O].forEach(function(P){return o.container.addEventListener(P,o.events[O],!1)})}),o.container.addEventListener("keydown",o.handleKeyDown)})}},{key:"componentWillUnmount",value:function(){var o=this;this.helper&&this.helper.parentNode&&this.helper.parentNode.removeChild(this.helper),this.container&&(Object.keys(this.events).forEach(function(f){return E1[f].forEach(function(y){return o.container.removeEventListener(y,o.events[f])})}),this.container.removeEventListener("keydown",this.handleKeyDown))}},{key:"updateHelperPosition",value:function(o){var f=this.props,y=f.lockAxis,x=f.lockOffset,B=f.lockToContainerEdges,O=f.transitionDuration,P=f.keyboardSortingTransitionDuration,U=P===void 0?O:P,j=this.manager.isKeySorting,N=o.ignoreTransition,Y=mv(o),H={x:Y.x-this.initialOffset.x,y:Y.y-this.initialOffset.y};if(H.y-=window.pageYOffset-this.initialWindowScroll.top,H.x-=window.pageXOffset-this.initialWindowScroll.left,this.translate=H,B){var se=vne({height:this.height,lockOffset:x,width:this.width}),re=$U(se,2),V=re[0],ne=re[1],G={x:this.width/2-V.x,y:this.height/2-V.y},oe={x:this.width/2-ne.x,y:this.height/2-ne.y};H.x=u9(this.minTranslate.x+G.x,this.maxTranslate.x-oe.x,H.x),H.y=u9(this.minTranslate.y+G.y,this.maxTranslate.y-oe.y,H.y)}y==="x"?H.y=0:y==="y"&&(H.x=0),j&&U&&!N&&R4(this.helper,U),lb(this.helper,H)}},{key:"animateNodes",value:function(){var o=this.props,f=o.transitionDuration,y=o.hideSortableGhost,x=o.onSortOver,B=this.containerScrollDelta,O=this.windowScrollDelta,P=this.manager.getOrderedRefs(),U={left:this.offsetEdge.left+this.translate.x+B.left,top:this.offsetEdge.top+this.translate.y+B.top},j=this.manager.isKeySorting,N=this.newIndex;this.newIndex=null;for(var Y=0,H=P.length;Y<H;Y++){var se=P[Y].node,re=se.sortableInfo.index,V=se.offsetWidth,ne=se.offsetHeight,G={height:this.height>ne?ne/2:this.height/2,width:this.width>V?V/2:this.width/2},oe=j&&re>this.index&&re<=N,he=j&&re<this.index&&re>=N,fe={x:0,y:0},Ee=P[Y].edgeOffset;Ee||(Ee=Eb(se,this.container),P[Y].edgeOffset=Ee,j&&(P[Y].boundingClientRect=D4(se,B)));var me=Y<P.length-1&&P[Y+1],Se=Y>0&&P[Y-1];if(me&&!me.edgeOffset&&(me.edgeOffset=Eb(me.node,this.container),j&&(me.boundingClientRect=D4(me.node,B))),re===this.index){y&&(this.sortableGhost=se,ab(se,{opacity:0,visibility:"hidden"}));continue}f&&R4(se,f),this.axis.x?this.axis.y?he||re<this.index&&(U.left+O.left-G.width<=Ee.left&&U.top+O.top<=Ee.top+G.height||U.top+O.top+G.height<=Ee.top)?(fe.x=this.width+this.marginOffset.x,Ee.left+fe.x>this.containerBoundingRect.width-G.width&&me&&(fe.x=me.edgeOffset.left-Ee.left,fe.y=me.edgeOffset.top-Ee.top),this.newIndex===null&&(this.newIndex=re)):(oe||re>this.index&&(U.left+O.left+G.width>=Ee.left&&U.top+O.top+G.height>=Ee.top||U.top+O.top+G.height>=Ee.top+ne))&&(fe.x=-(this.width+this.marginOffset.x),Ee.left+fe.x<this.containerBoundingRect.left+G.width&&Se&&(fe.x=Se.edgeOffset.left-Ee.left,fe.y=Se.edgeOffset.top-Ee.top),this.newIndex=re):oe||re>this.index&&U.left+O.left+G.width>=Ee.left?(fe.x=-(this.width+this.marginOffset.x),this.newIndex=re):(he||re<this.index&&U.left+O.left<=Ee.left+G.width)&&(fe.x=this.width+this.marginOffset.x,this.newIndex==null&&(this.newIndex=re)):this.axis.y&&(oe||re>this.index&&U.top+O.top+G.height>=Ee.top?(fe.y=-(this.height+this.marginOffset.y),this.newIndex=re):(he||re<this.index&&U.top+O.top<=Ee.top+G.height)&&(fe.y=this.height+this.marginOffset.y,this.newIndex==null&&(this.newIndex=re))),lb(se,fe),P[Y].translate=fe}this.newIndex==null&&(this.newIndex=this.index),j&&(this.newIndex=N);var Ke=j?this.prevIndex:N;x&&this.newIndex!==Ke&&x({collection:this.manager.active.collection,index:this.index,newIndex:this.newIndex,oldIndex:Ke,isKeySorting:j,nodes:P,helper:this.helper})}},{key:"getWrappedInstance",value:function(){return Wg(r.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableContainer() call"),this.wrappedInstance.current}},{key:"getContainer",value:function(){var o=this.props.getContainer;return typeof o!="function"?ax.findDOMNode(this):o(r.withRef?this.getWrappedInstance():void 0)}},{key:"render",value:function(){var o=r.withRef?this.wrappedInstance:null;return ci.createElement(nz.Provider,{value:this.sortableContextValue},ci.createElement(n,xC({ref:o},ZU(this.props,Bne))))}},{key:"helperContainer",get:function(){var o=this.props.helperContainer;return typeof o=="function"?o():this.props.helperContainer||this.document.body}},{key:"containerScrollDelta",get:function(){var o=this.props.useWindowAsScrollContainer;return o?{left:0,top:0}:{left:this.scrollContainer.scrollLeft-this.initialScroll.left,top:this.scrollContainer.scrollTop-this.initialScroll.top}}},{key:"windowScrollDelta",get:function(){return{left:this.contentWindow.pageXOffset-this.initialWindowScroll.left,top:this.contentWindow.pageYOffset-this.initialWindowScroll.top}}}]),s}(ci.Component),Oa(e,"displayName",mO("sortableList",n)),Oa(e,"defaultProps",Ene),Oa(e,"propTypes",ez),t}var rz={index:yi.number.isRequired,collection:yi.oneOfType([yi.number,yi.string]),disabled:yi.bool},Tne=Object.keys(rz);function Pne(n){var e,t,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{withRef:!1};return t=e=function(i){pO(s,i);function s(){var l,o;ZC(this,s);for(var f=arguments.length,y=new Array(f),x=0;x<f;x++)y[x]=arguments[x];return o=fO(this,(l=MC(s)).call.apply(l,[this].concat(y))),Oa(us(us(o)),"wrappedInstance",ci.createRef()),o}return XC(s,[{key:"componentDidMount",value:function(){this.register()}},{key:"componentDidUpdate",value:function(o){this.node&&(o.index!==this.props.index&&(this.node.sortableInfo.index=this.props.index),o.disabled!==this.props.disabled&&(this.node.sortableInfo.disabled=this.props.disabled)),o.collection!==this.props.collection&&(this.unregister(o.collection),this.register())}},{key:"componentWillUnmount",value:function(){this.unregister()}},{key:"register",value:function(){var o=this.props,f=o.collection,y=o.disabled,x=o.index,B=ax.findDOMNode(this);B.sortableInfo={collection:f,disabled:y,index:x,manager:this.context.manager},this.node=B,this.ref={node:B},this.context.manager.add(f,this.ref)}},{key:"unregister",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props.collection;this.context.manager.remove(o,this.ref)}},{key:"getWrappedInstance",value:function(){return Wg(r.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableElement() call"),this.wrappedInstance.current}},{key:"render",value:function(){var o=r.withRef?this.wrappedInstance:null;return ci.createElement(n,xC({ref:o},ZU(this.props,Tne)))}}]),s}(ci.Component),Oa(e,"displayName",mO("sortableElement",n)),Oa(e,"contextType",nz),Oa(e,"propTypes",rz),Oa(e,"defaultProps",{collection:0}),t}function so(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerListItem.tsx",e="c4894131c5d7f6ef28da960f43f4c830425a38cb",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/LayerListItem.tsx",statementMap:{0:{start:{line:8,column:23},end:{line:19,column:2}},1:{start:{line:9,column:2},end:{line:18,column:7}},2:{start:{line:22,column:4},end:{line:31,column:5}},3:{start:{line:24,column:8},end:{line:24,column:54}},4:{start:{line:26,column:8},end:{line:26,column:53}},5:{start:{line:28,column:8},end:{line:28,column:56}},6:{start:{line:30,column:8},end:{line:30,column:49}},7:{start:{line:34,column:51},end:{line:34,column:61}},8:{start:{line:35,column:25},end:{line:35,column:27}},9:{start:{line:36,column:4},end:{line:41,column:5}},10:{start:{line:37,column:6},end:{line:37,column:76}},11:{start:{line:38,column:6},end:{line:40,column:7}},12:{start:{line:39,column:8},end:{line:39,column:103}},13:{start:{line:42,column:4},end:{line:53,column:6}},14:{start:{line:57,column:24},end:{line:66,column:3}},15:{start:{line:67,column:29},end:{line:69,column:3}},16:{start:{line:71,column:4},end:{line:73,column:6}},17:{start:{line:76,column:29},end:{line:76,column:82}},18:{start:{line:77,column:4},end:{line:122,column:6}},19:{start:{line:81,column:25},end:{line:81,column:72}},20:{start:{line:97,column:31},end:{line:97,column:79}},21:{start:{line:106,column:31},end:{line:106,column:76}},22:{start:{line:116,column:31},end:{line:116,column:88}},23:{start:{line:125,column:30},end:{line:125,column:106}},24:{start:{line:125,column:73},end:{line:125,column:105}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:38},end:{line:8,column:39}},loc:{start:{line:8,column:49},end:{line:19,column:1}},line:8},1:{name:"(anonymous_1)",decl:{start:{line:21,column:2},end:{line:21,column:3}},loc:{start:{line:21,column:15},end:{line:32,column:3}},line:21},2:{name:"(anonymous_2)",decl:{start:{line:33,column:2},end:{line:33,column:3}},loc:{start:{line:33,column:11},end:{line:54,column:3}},line:33},3:{name:"(anonymous_3)",decl:{start:{line:60,column:17},end:{line:60,column:18}},loc:{start:{line:60,column:23},end:{line:61,column:5}},line:60},4:{name:"(anonymous_4)",decl:{start:{line:62,column:20},end:{line:62,column:21}},loc:{start:{line:62,column:26},end:{line:63,column:5}},line:62},5:{name:"(anonymous_5)",decl:{start:{line:64,column:29},end:{line:64,column:30}},loc:{start:{line:64,column:35},end:{line:65,column:5}},line:64},6:{name:"(anonymous_6)",decl:{start:{line:70,column:2},end:{line:70,column:3}},loc:{start:{line:70,column:20},end:{line:74,column:3}},line:70},7:{name:"(anonymous_7)",decl:{start:{line:75,column:2},end:{line:75,column:3}},loc:{start:{line:75,column:11},end:{line:123,column:3}},line:75},8:{name:"(anonymous_8)",decl:{start:{line:81,column:17},end:{line:81,column:18}},loc:{start:{line:81,column:25},end:{line:81,column:72}},line:81},9:{name:"(anonymous_9)",decl:{start:{line:97,column:23},end:{line:97,column:24}},loc:{start:{line:97,column:31},end:{line:97,column:79}},line:97},10:{name:"(anonymous_10)",decl:{start:{line:106,column:23},end:{line:106,column:24}},loc:{start:{line:106,column:31},end:{line:106,column:76}},line:106},11:{name:"(anonymous_11)",decl:{start:{line:116,column:23},end:{line:116,column:24}},loc:{start:{line:116,column:31},end:{line:116,column:88}},line:116},12:{name:"(anonymous_12)",decl:{start:{line:125,column:46},end:{line:125,column:47}},loc:{start:{line:125,column:73},end:{line:125,column:105}},line:125}},branchMap:{0:{loc:{start:{line:22,column:4},end:{line:31,column:5}},type:"switch",locations:[{start:{line:23,column:6},end:{line:24,column:54}},{start:{line:25,column:6},end:{line:26,column:53}},{start:{line:27,column:6},end:{line:28,column:56}},{start:{line:29,column:6},end:{line:30,column:49}}],line:22},1:{loc:{start:{line:36,column:4},end:{line:41,column:5}},type:"if",locations:[{start:{line:36,column:4},end:{line:41,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:36},2:{loc:{start:{line:38,column:6},end:{line:40,column:7}},type:"if",locations:[{start:{line:38,column:6},end:{line:40,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:38},3:{loc:{start:{line:76,column:29},end:{line:76,column:82}},type:"cond-expr",locations:[{start:{line:76,column:67},end:{line:76,column:73}},{start:{line:76,column:76},end:{line:76,column:82}}],line:76}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0},b:{0:[0,0,0,0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerListItem.tsx"],names:[],mappings:"AAgBS,SACL,KADK;AAhBT,OAAO,WAAW;AAClB,OAAO,eAAe;AACtB,OAAO,gBAAgB;AAEvB,SAAQ,eAAe,cAAc,iBAAiB,gBAAe;AAErE,OAAO,eAAe;AACtB,SAAQ,iBAAiB,sBAAqB;AAQ9C,MAAM,iBAAiB,eAAe,CAAC,UAA+B;AACpE,SAAO,qBAAC,SAAI,WAAU,mCACpB;AAAA;AAAA,MAAC;AAAA;AAAA,QACC,WAAU;AAAA,QACV,MAAM,MAAM;AAAA;AAAA,IACd;AAAA,IACA,oBAAC,YAAO,WAAU,+BACf,gBAAM,SACT;AAAA,KACF;AACF,CAAC;AAUD,MAAM,mBAAmB,MAAM,UAA2B;AAAA,EACxD,aAAa;AACX,YAAO,KAAK,MAAM,QAAQ;AAAA,MAC1B,KAAK;AAAa,eAAO,oBAAC,iBAAc;AAAA,MACxC,KAAK;AAAQ,eAAO,oBAAC,gBAAa;AAAA,MAClC,KAAK;AAAQ,eAAO,oBAAC,mBAAgB;AAAA,MACrC,KAAK;AAAU,eAAO,oBAAC,YAAS;AAAA,IAChC;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,gBAAgB,mBAAkB,IAAI,KAAK;AAElD,QAAI,iBAAiB;AACrB,QAAI,gBAAgB;AAClB,uBAAiB,oCAAoC,cAAc;AAEnE,UAAI,oBAAoB;AACtB,0BAAkB,qCAAqC,cAAc,KAAK,kBAAkB;AAAA,MAC9F;AAAA,IACF;AAEA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,UAAU;AAAA,QACV,OAAO,KAAK,MAAM;AAAA,QAClB,WAAW,mCAAmC,cAAc;AAAA,QAC5D,eAAa,KAAK,MAAM;AAAA,QACxB,SAAS,KAAK,MAAM;AAAA,QACpB,eAAY;AAAA,QAEX,eAAK,WAAW;AAAA;AAAA,IACnB;AAAA,EACF;AACF;AAgBA,MAAM,sBAAsB,MAAM,UAA8B;AAAA,EAC9D,OAAO,eAAe;AAAA,IACpB,YAAY;AAAA,IACZ,YAAY;AAAA,IACZ,aAAa,MAAM;AAAA,IAAC;AAAA,IACpB,gBAAgB,MAAM;AAAA,IAAC;AAAA,IACvB,yBAAyB,MAAM;AAAA,IAAC;AAAA,EAClC;AAAA,EAEA,OAAO,oBAAoB;AAAA,IACzB,eAAe,UAAU;AAAA,EAC3B;AAAA,EAEA,kBAAkB;AAChB,WAAO;AAAA,MACL,eAAe,EAAE,MAAM,GAAG;AAAA,IAC5B;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,mBAAmB,KAAK,MAAM,eAAe,YAAY,SAAS;AAExE,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,IAAI,KAAK,MAAM;AAAA,QAEf,SAAS,QAAM,KAAK,MAAM,cAAc,KAAK,MAAM,UAAU;AAAA,QAC7D,eAAa,qBAAmB,KAAK,MAAM;AAAA,QAC3C,WAAW,WAAW;AAAA,UACpB,4BAA4B;AAAA,UAC5B,qCAAqC,KAAK,MAAM;AAAA,UAChD,CAAC,KAAK,MAAM,SAAU,GAAG;AAAA,QAC3B,CAAC;AAAA,QACD;AAAA,8BAAC,kBAAgB,GAAG,KAAK,OAAO;AAAA,UAChC,oBAAC,UAAK,OAAO,EAAC,UAAU,EAAC,GAAG;AAAA,UAC5B;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,qBAAmB,KAAK,MAAM,UAAQ;AAAA,cAC7C,QAAQ;AAAA,cACR,gBAAe;AAAA,cACf,SAAS,QAAM,KAAK,MAAM,eAAgB,KAAK,MAAM,UAAU;AAAA;AAAA,UACjE;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,qBAAmB,KAAK,MAAM,UAAQ;AAAA,cAC7C,QAAQ;AAAA,cACR,gBAAe;AAAA,cACf,SAAS,QAAM,KAAK,MAAM,YAAa,KAAK,MAAM,UAAU;AAAA;AAAA,UAC9D;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,qBAAmB,KAAK,MAAM,UAAQ;AAAA,cAC7C,QAAQ;AAAA,cACR,gBAAe;AAAA,cACf,oBAAoB;AAAA,cACpB,SAAS,QAAM,KAAK,MAAM,wBAAyB,KAAK,MAAM,UAAU;AAAA;AAAA,UAC1E;AAAA;AAAA;AAAA,MA5BK,KAAK,MAAM;AAAA,IA6BlB;AAAA,EACF;AACF;AAEA,MAAM,wBAAwB,gBAAoC,CAAC,UAA8B,oBAAC,iBAAe,GAAG,OAAO,CAAE;AAE7H,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"c4894131c5d7f6ef28da960f43f4c830425a38cb"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return so=function(){return l},l}so();const Kne=(so().s[0]++,xne(n=>(so().f[0]++,so().s[1]++,ue.jsxs("div",{className:"maputnik-layer-list-item-handle",children:[ue.jsx(UF,{className:"layer-handle__icon",type:n.layerType}),ue.jsx("button",{className:"maputnik-layer-list-item-id",children:n.layerId})]}))));class F4 extends Xn.Component{renderIcon(){switch(so().f[1]++,so().s[2]++,this.props.action){case"duplicate":return so().b[0][0]++,so().s[3]++,ue.jsx(WV,{});case"show":return so().b[0][1]++,so().s[4]++,ue.jsx(NV,{});case"hide":return so().b[0][2]++,so().s[5]++,ue.jsx(jV,{});case"delete":return so().b[0][3]++,so().s[6]++,ue.jsx(Uy,{})}}render(){so().f[2]++;const{classBlockName:e,classBlockModifier:t}=(so().s[7]++,this.props);let r=(so().s[8]++,"");return so().s[9]++,e?(so().b[1][0]++,so().s[10]++,r=`maputnik-layer-list-icon-action__${e}`,so().s[11]++,t?(so().b[2][0]++,so().s[12]++,r+=` maputnik-layer-list-icon-action__${e}--${t}`):so().b[2][1]++):so().b[1][1]++,so().s[13]++,ue.jsx("button",{tabIndex:-1,title:this.props.action,className:`maputnik-layer-list-icon-action ${r}`,"data-wd-key":this.props.wdKey,onClick:this.props.onClick,"aria-hidden":"true",children:this.renderIcon()})}}class S6 extends Xn.Component{getChildContext(){return so().f[6]++,so().s[16]++,{reactIconBase:{size:14}}}render(){so().f[7]++;const e=(so().s[17]++,this.props.visibility==="visible"?(so().b[3][0]++,"show"):(so().b[3][1]++,"hide"));return so().s[18]++,ue.jsxs("li",{id:this.props.id,onClick:t=>(so().f[8]++,so().s[19]++,this.props.onLayerSelect(this.props.layerIndex)),"data-wd-key":"layer-list-item:"+this.props.layerId,className:tm({"maputnik-layer-list-item":!0,"maputnik-layer-list-item-selected":this.props.isSelected,[this.props.className]:!0}),children:[ue.jsx(Kne,{...this.props}),ue.jsx("span",{style:{flexGrow:1}}),ue.jsx(F4,{wdKey:"layer-list-item:"+this.props.layerId+":delete",action:"delete",classBlockName:"delete",onClick:t=>(so().f[9]++,so().s[20]++,this.props.onLayerDestroy(this.props.layerIndex))}),ue.jsx(F4,{wdKey:"layer-list-item:"+this.props.layerId+":copy",action:"duplicate",classBlockName:"duplicate",onClick:t=>(so().f[10]++,so().s[21]++,this.props.onLayerCopy(this.props.layerIndex))}),ue.jsx(F4,{wdKey:"layer-list-item:"+this.props.layerId+":toggle-visibility",action:e,classBlockName:"visibility",classBlockModifier:e,onClick:t=>(so().f[11]++,so().s[22]++,this.props.onLayerVisibilityToggle(this.props.layerIndex))})]},this.props.layerId)}}Kn(S6,"defaultProps",(so().s[14]++,{isSelected:!1,visibility:"visible",onLayerCopy:()=>{so().f[3]++},onLayerDestroy:()=>{so().f[4]++},onLayerVisibilityToggle:()=>{so().f[5]++}})),Kn(S6,"childContextTypes",(so().s[15]++,{reactIconBase:yi.object}));const Rne=(so().s[23]++,Pne(n=>(so().f[12]++,so().s[24]++,ue.jsx(S6,{...n}))));function _2(){var n="/home/runner/work/maputnik/maputnik/src/components/InputButton.tsx",e="522bfc6b8aacbfd03b55d947af2897dc69beb570",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputButton.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:20,column:6}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:21,column:3}},line:5}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputButton.tsx"],names:[],mappings:"AAkBW;AAlBX,OAAO,WAAW;AAClB,OAAO,gBAAgB;AAevB,qBAAqB,oBAAoB,MAAM,UAA4B;AAAA,EACzE,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,IAAI,KAAK,MAAM;AAAA,QACf,OAAO,KAAK,MAAM;AAAA,QAClB,MAAM,KAAK,MAAM;AAAA,QACjB,SAAS,KAAK,MAAM;AAAA,QACpB,UAAU,KAAK,MAAM;AAAA,QACrB,cAAY,KAAK,MAAM,YAAY;AAAA,QACnC,WAAW,WAAW,mBAAmB,KAAK,MAAM,SAAS;AAAA,QAC7D,eAAa,KAAK,MAAM,aAAa;AAAA,QACrC,OAAO,KAAK,MAAM;AAAA,QAEjB,eAAK,MAAM;AAAA;AAAA,IACd;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"522bfc6b8aacbfd03b55d947af2897dc69beb570"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return _2=function(){return l},l}_2();class Ha extends Xn.Component{render(){return _2().f[0]++,_2().s[0]++,ue.jsx("button",{id:this.props.id,title:this.props.title,type:this.props.type,onClick:this.props.onClick,disabled:this.props.disabled,"aria-label":this.props["aria-label"],className:tm("maputnik-button",this.props.className),"data-wd-key":this.props["data-wd-key"],style:this.props.style,children:this.props.children})}}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var iz=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],b2=iz.join(","),oz=typeof Element>"u",Gg=oz?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,x2=!oz&&Element.prototype.getRootNode?function(n){var e;return n==null||(e=n.getRootNode)===null||e===void 0?void 0:e.call(n)}:function(n){return n==null?void 0:n.ownerDocument},M2=function n(e,t){var r;t===void 0&&(t=!0);var i=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),s=i===""||i==="true",l=s||t&&e&&n(e.parentNode);return l},Dne=function(e){var t,r=e==null||(t=e.getAttribute)===null||t===void 0?void 0:t.call(e,"contenteditable");return r===""||r==="true"},sz=function(e,t,r){if(M2(e))return[];var i=Array.prototype.slice.apply(e.querySelectorAll(b2));return t&&Gg.call(e,b2)&&i.unshift(e),i=i.filter(r),i},az=function n(e,t,r){for(var i=[],s=Array.from(e);s.length;){var l=s.shift();if(!M2(l,!1))if(l.tagName==="SLOT"){var o=l.assignedElements(),f=o.length?o:l.children,y=n(f,!0,r);r.flatten?i.push.apply(i,y):i.push({scopeParent:l,candidates:y})}else{var x=Gg.call(l,b2);x&&r.filter(l)&&(t||!e.includes(l))&&i.push(l);var B=l.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(l),O=!M2(B,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(l));if(B&&O){var P=n(B===!0?l.children:B.children,!0,r);r.flatten?i.push.apply(i,P):i.push({scopeParent:l,candidates:P})}else s.unshift.apply(s,l.children)}}return i},lz=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},B0=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||Dne(e))&&!lz(e)?0:e.tabIndex},Fne=function(e,t){var r=B0(e);return r<0&&t&&!lz(e)?0:r},Lne=function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex},uz=function(e){return e.tagName==="INPUT"},Une=function(e){return uz(e)&&e.type==="hidden"},zne=function(e){var t=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return t},jne=function(e,t){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===t)return e[r]},Nne=function(e){if(!e.name)return!0;var t=e.form||x2(e),r=function(o){return t.querySelectorAll('input[type="radio"][name="'+o+'"]')},i;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")i=r(window.CSS.escape(e.name));else try{i=r(e.name)}catch(l){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",l.message),!1}var s=jne(i,e.form);return!s||s===e},Wne=function(e){return uz(e)&&e.type==="radio"},Gne=function(e){return Wne(e)&&!Nne(e)},Qne=function(e){var t,r=e&&x2(e),i=(t=r)===null||t===void 0?void 0:t.host,s=!1;if(r&&r!==e){var l,o,f;for(s=!!((l=i)!==null&&l!==void 0&&(o=l.ownerDocument)!==null&&o!==void 0&&o.contains(i)||e!=null&&(f=e.ownerDocument)!==null&&f!==void 0&&f.contains(e));!s&&i;){var y,x,B;r=x2(i),i=(y=r)===null||y===void 0?void 0:y.host,s=!!((x=i)!==null&&x!==void 0&&(B=x.ownerDocument)!==null&&B!==void 0&&B.contains(i))}}return s},d9=function(e){var t=e.getBoundingClientRect(),r=t.width,i=t.height;return r===0&&i===0},Yne=function(e,t){var r=t.displayCheck,i=t.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var s=Gg.call(e,"details>summary:first-of-type"),l=s?e.parentElement:e;if(Gg.call(l,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof i=="function"){for(var o=e;e;){var f=e.parentElement,y=x2(e);if(f&&!f.shadowRoot&&i(f)===!0)return d9(e);e.assignedSlot?e=e.assignedSlot:!f&&y!==e.ownerDocument?e=y.host:e=f}e=o}if(Qne(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return d9(e);return!1},qne=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var t=e.parentElement;t;){if(t.tagName==="FIELDSET"&&t.disabled){for(var r=0;r<t.children.length;r++){var i=t.children.item(r);if(i.tagName==="LEGEND")return Gg.call(t,"fieldset[disabled] *")?!0:!i.contains(e)}return!0}t=t.parentElement}return!1},w2=function(e,t){return!(t.disabled||M2(t)||Une(t)||Yne(t,e)||zne(t)||qne(t))},E6=function(e,t){return!(Gne(t)||B0(t)<0||!w2(e,t))},Vne=function(e){var t=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(t)||t>=0)},$ne=function n(e){var t=[],r=[];return e.forEach(function(i,s){var l=!!i.scopeParent,o=l?i.scopeParent:i,f=Fne(o,l),y=l?n(i.candidates):o;f===0?l?t.push.apply(t,y):t.push(o):r.push({documentOrder:s,tabIndex:f,item:i,isScope:l,content:y})}),r.sort(Lne).reduce(function(i,s){return s.isScope?i.push.apply(i,s.content):i.push(s.content),i},[]).concat(t)},Az=function(e,t){t=t||{};var r;return t.getShadowRoot?r=az([e],t.includeContainer,{filter:E6.bind(null,t),flatten:!1,getShadowRoot:t.getShadowRoot,shadowRootFilter:Vne}):r=sz(e,t.includeContainer,E6.bind(null,t)),$ne(r)},cz=function(e,t){t=t||{};var r;return t.getShadowRoot?r=az([e],t.includeContainer,{filter:w2.bind(null,t),flatten:!0,getShadowRoot:t.getShadowRoot}):r=sz(e,t.includeContainer,w2.bind(null,t)),r},yg=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return Gg.call(e,b2)===!1?!1:E6(t,e)},Hne=iz.concat("iframe").join(","),Bb=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return Gg.call(e,Hne)===!1?!1:w2(t,e)};const Zne=Object.freeze(Object.defineProperty({__proto__:null,focusable:cz,getTabIndex:B0,isFocusable:Bb,isTabbable:yg,tabbable:Az},Symbol.toStringTag,{value:"Module"}));/*!
* focus-trap 7.5.4
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function h9(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function f9(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?h9(Object(t),!0).forEach(function(r){Xne(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):h9(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Xne(n,e,t){return e=ere(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Jne(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function ere(n){var e=Jne(n,"string");return typeof e=="symbol"?e:String(e)}var p9={activateTrap:function(e,t){if(e.length>0){var r=e[e.length-1];r!==t&&r.pause()}var i=e.indexOf(t);i===-1||e.splice(i,1),e.push(t)},deactivateTrap:function(e,t){var r=e.indexOf(t);r!==-1&&e.splice(r,1),e.length>0&&e[e.length-1].unpause()}},tre=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},nre=function(e){return(e==null?void 0:e.key)==="Escape"||(e==null?void 0:e.key)==="Esc"||(e==null?void 0:e.keyCode)===27},Hv=function(e){return(e==null?void 0:e.key)==="Tab"||(e==null?void 0:e.keyCode)===9},rre=function(e){return Hv(e)&&!e.shiftKey},ire=function(e){return Hv(e)&&e.shiftKey},m9=function(e){return setTimeout(e,0)},g9=function(e,t){var r=-1;return e.every(function(i,s){return t(i)?(r=s,!1):!0}),r},gv=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return typeof e=="function"?e.apply(void 0,r):e},ub=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},ore=[],sre=function(e,t){var r=(t==null?void 0:t.document)||document,i=(t==null?void 0:t.trapStack)||ore,s=f9({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:rre,isKeyBackward:ire},t),l={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},o,f=function(me,Se,Ke){return me&&me[Se]!==void 0?me[Se]:s[Ke||Se]},y=function(me,Se){var Ke=typeof(Se==null?void 0:Se.composedPath)=="function"?Se.composedPath():void 0;return l.containerGroups.findIndex(function(xe){var at=xe.container,Ze=xe.tabbableNodes;return at.contains(me)||(Ke==null?void 0:Ke.includes(at))||Ze.find(function(Je){return Je===me})})},x=function(me){var Se=s[me];if(typeof Se=="function"){for(var Ke=arguments.length,xe=new Array(Ke>1?Ke-1:0),at=1;at<Ke;at++)xe[at-1]=arguments[at];Se=Se.apply(void 0,xe)}if(Se===!0&&(Se=void 0),!Se){if(Se===void 0||Se===!1)return Se;throw new Error("`".concat(me,"` was specified but was not a node, or did not return a node"))}var Ze=Se;if(typeof Se=="string"&&(Ze=r.querySelector(Se),!Ze))throw new Error("`".concat(me,"` as selector refers to no known node"));return Ze},B=function(){var me=x("initialFocus");if(me===!1)return!1;if(me===void 0||!Bb(me,s.tabbableOptions))if(y(r.activeElement)>=0)me=r.activeElement;else{var Se=l.tabbableGroups[0],Ke=Se&&Se.firstTabbableNode;me=Ke||x("fallbackFocus")}if(!me)throw new Error("Your focus-trap needs to have at least one focusable element");return me},O=function(){if(l.containerGroups=l.containers.map(function(me){var Se=Az(me,s.tabbableOptions),Ke=cz(me,s.tabbableOptions),xe=Se.length>0?Se[0]:void 0,at=Se.length>0?Se[Se.length-1]:void 0,Ze=Ke.find(function(we){return yg(we)}),Je=Ke.slice().reverse().find(function(we){return yg(we)}),Ne=!!Se.find(function(we){return B0(we)>0});return{container:me,tabbableNodes:Se,focusableNodes:Ke,posTabIndexesFound:Ne,firstTabbableNode:xe,lastTabbableNode:at,firstDomTabbableNode:Ze,lastDomTabbableNode:Je,nextTabbableNode:function(De){var He=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,bt=Se.indexOf(De);return bt<0?He?Ke.slice(Ke.indexOf(De)+1).find(function(Yt){return yg(Yt)}):Ke.slice(0,Ke.indexOf(De)).reverse().find(function(Yt){return yg(Yt)}):Se[bt+(He?1:-1)]}}}),l.tabbableGroups=l.containerGroups.filter(function(me){return me.tabbableNodes.length>0}),l.tabbableGroups.length<=0&&!x("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(l.containerGroups.find(function(me){return me.posTabIndexesFound})&&l.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")},P=function Ee(me){var Se=me.activeElement;if(Se)return Se.shadowRoot&&Se.shadowRoot.activeElement!==null?Ee(Se.shadowRoot):Se},U=function Ee(me){if(me!==!1&&me!==P(document)){if(!me||!me.focus){Ee(B());return}me.focus({preventScroll:!!s.preventScroll}),l.mostRecentlyFocusedNode=me,tre(me)&&me.select()}},j=function(me){var Se=x("setReturnFocus",me);return Se||(Se===!1?!1:me)},N=function(me){var Se=me.target,Ke=me.event,xe=me.isBackward,at=xe===void 0?!1:xe;Se=Se||ub(Ke),O();var Ze=null;if(l.tabbableGroups.length>0){var Je=y(Se,Ke),Ne=Je>=0?l.containerGroups[Je]:void 0;if(Je<0)at?Ze=l.tabbableGroups[l.tabbableGroups.length-1].lastTabbableNode:Ze=l.tabbableGroups[0].firstTabbableNode;else if(at){var we=g9(l.tabbableGroups,function(Ft){var Pt=Ft.firstTabbableNode;return Se===Pt});if(we<0&&(Ne.container===Se||Bb(Se,s.tabbableOptions)&&!yg(Se,s.tabbableOptions)&&!Ne.nextTabbableNode(Se,!1))&&(we=Je),we>=0){var De=we===0?l.tabbableGroups.length-1:we-1,He=l.tabbableGroups[De];Ze=B0(Se)>=0?He.lastTabbableNode:He.lastDomTabbableNode}else Hv(Ke)||(Ze=Ne.nextTabbableNode(Se,!1))}else{var bt=g9(l.tabbableGroups,function(Ft){var Pt=Ft.lastTabbableNode;return Se===Pt});if(bt<0&&(Ne.container===Se||Bb(Se,s.tabbableOptions)&&!yg(Se,s.tabbableOptions)&&!Ne.nextTabbableNode(Se))&&(bt=Je),bt>=0){var Yt=bt===l.tabbableGroups.length-1?0:bt+1,yt=l.tabbableGroups[Yt];Ze=B0(Se)>=0?yt.firstTabbableNode:yt.firstDomTabbableNode}else Hv(Ke)||(Ze=Ne.nextTabbableNode(Se))}}else Ze=x("fallbackFocus");return Ze},Y=function(me){var Se=ub(me);if(!(y(Se,me)>=0)){if(gv(s.clickOutsideDeactivates,me)){o.deactivate({returnFocus:s.returnFocusOnDeactivate});return}gv(s.allowOutsideClick,me)||me.preventDefault()}},H=function(me){var Se=ub(me),Ke=y(Se,me)>=0;if(Ke||Se instanceof Document)Ke&&(l.mostRecentlyFocusedNode=Se);else{me.stopImmediatePropagation();var xe,at=!0;if(l.mostRecentlyFocusedNode)if(B0(l.mostRecentlyFocusedNode)>0){var Ze=y(l.mostRecentlyFocusedNode),Je=l.containerGroups[Ze].tabbableNodes;if(Je.length>0){var Ne=Je.findIndex(function(we){return we===l.mostRecentlyFocusedNode});Ne>=0&&(s.isKeyForward(l.recentNavEvent)?Ne+1<Je.length&&(xe=Je[Ne+1],at=!1):Ne-1>=0&&(xe=Je[Ne-1],at=!1))}}else l.containerGroups.some(function(we){return we.tabbableNodes.some(function(De){return B0(De)>0})})||(at=!1);else at=!1;at&&(xe=N({target:l.mostRecentlyFocusedNode,isBackward:s.isKeyBackward(l.recentNavEvent)})),U(xe||l.mostRecentlyFocusedNode||B())}l.recentNavEvent=void 0},se=function(me){var Se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;l.recentNavEvent=me;var Ke=N({event:me,isBackward:Se});Ke&&(Hv(me)&&me.preventDefault(),U(Ke))},re=function(me){if(nre(me)&&gv(s.escapeDeactivates,me)!==!1){me.preventDefault(),o.deactivate();return}(s.isKeyForward(me)||s.isKeyBackward(me))&&se(me,s.isKeyBackward(me))},V=function(me){var Se=ub(me);y(Se,me)>=0||gv(s.clickOutsideDeactivates,me)||gv(s.allowOutsideClick,me)||(me.preventDefault(),me.stopImmediatePropagation())},ne=function(){if(l.active)return p9.activateTrap(i,o),l.delayInitialFocusTimer=s.delayInitialFocus?m9(function(){U(B())}):U(B()),r.addEventListener("focusin",H,!0),r.addEventListener("mousedown",Y,{capture:!0,passive:!1}),r.addEventListener("touchstart",Y,{capture:!0,passive:!1}),r.addEventListener("click",V,{capture:!0,passive:!1}),r.addEventListener("keydown",re,{capture:!0,passive:!1}),o},G=function(){if(l.active)return r.removeEventListener("focusin",H,!0),r.removeEventListener("mousedown",Y,!0),r.removeEventListener("touchstart",Y,!0),r.removeEventListener("click",V,!0),r.removeEventListener("keydown",re,!0),o},oe=function(me){var Se=me.some(function(Ke){var xe=Array.from(Ke.removedNodes);return xe.some(function(at){return at===l.mostRecentlyFocusedNode})});Se&&U(B())},he=typeof window<"u"&&"MutationObserver"in window?new MutationObserver(oe):void 0,fe=function(){he&&(he.disconnect(),l.active&&!l.paused&&l.containers.map(function(me){he.observe(me,{subtree:!0,childList:!0})}))};return o={get active(){return l.active},get paused(){return l.paused},activate:function(me){if(l.active)return this;var Se=f(me,"onActivate"),Ke=f(me,"onPostActivate"),xe=f(me,"checkCanFocusTrap");xe||O(),l.active=!0,l.paused=!1,l.nodeFocusedBeforeActivation=r.activeElement,Se==null||Se();var at=function(){xe&&O(),ne(),fe(),Ke==null||Ke()};return xe?(xe(l.containers.concat()).then(at,at),this):(at(),this)},deactivate:function(me){if(!l.active)return this;var Se=f9({onDeactivate:s.onDeactivate,onPostDeactivate:s.onPostDeactivate,checkCanReturnFocus:s.checkCanReturnFocus},me);clearTimeout(l.delayInitialFocusTimer),l.delayInitialFocusTimer=void 0,G(),l.active=!1,l.paused=!1,fe(),p9.deactivateTrap(i,o);var Ke=f(Se,"onDeactivate"),xe=f(Se,"onPostDeactivate"),at=f(Se,"checkCanReturnFocus"),Ze=f(Se,"returnFocus","returnFocusOnDeactivate");Ke==null||Ke();var Je=function(){m9(function(){Ze&&U(j(l.nodeFocusedBeforeActivation)),xe==null||xe()})};return Ze&&at?(at(j(l.nodeFocusedBeforeActivation)).then(Je,Je),this):(Je(),this)},pause:function(me){if(l.paused||!l.active)return this;var Se=f(me,"onPause"),Ke=f(me,"onPostPause");return l.paused=!0,Se==null||Se(),G(),fe(),Ke==null||Ke(),this},unpause:function(me){if(!l.paused||!l.active)return this;var Se=f(me,"onUnpause"),Ke=f(me,"onPostUnpause");return l.paused=!1,Se==null||Se(),O(),ne(),fe(),Ke==null||Ke(),this},updateContainerElements:function(me){var Se=[].concat(me).filter(Boolean);return l.containers=Se.map(function(Ke){return typeof Ke=="string"?r.querySelector(Ke):Ke}),l.active&&O(),fe(),this}},o.updateContainerElements(e),o};const are=Object.freeze(Object.defineProperty({__proto__:null,createFocusTrap:sre},Symbol.toStringTag,{value:"Module"})),lre=R6(are),ure=R6(Zne);var L4,y9;function Are(){if(y9)return L4;y9=1;function n(ne){"@babel/helpers - typeof";return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(G){return typeof G}:function(G){return G&&typeof Symbol=="function"&&G.constructor===Symbol&&G!==Symbol.prototype?"symbol":typeof G},n(ne)}function e(ne,G){if(!(ne instanceof G))throw new TypeError("Cannot call a class as a function")}function t(ne,G){for(var oe=0;oe<G.length;oe++){var he=G[oe];he.enumerable=he.enumerable||!1,he.configurable=!0,"value"in he&&(he.writable=!0),Object.defineProperty(ne,O(he.key),he)}}function r(ne,G,oe){return t(ne.prototype,G),Object.defineProperty(ne,"prototype",{writable:!1}),ne}function i(ne,G){if(typeof G!="function"&&G!==null)throw new TypeError("Super expression must either be null or a function");ne.prototype=Object.create(G&&G.prototype,{constructor:{value:ne,writable:!0,configurable:!0}}),Object.defineProperty(ne,"prototype",{writable:!1}),G&&s(ne,G)}function s(ne,G){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(he,fe){return he.__proto__=fe,he},s(ne,G)}function l(ne){var G=y();return function(){var he=x(ne),fe;if(G){var Ee=x(this).constructor;fe=Reflect.construct(he,arguments,Ee)}else fe=he.apply(this,arguments);return o(this,fe)}}function o(ne,G){if(G&&(n(G)==="object"||typeof G=="function"))return G;if(G!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return f(ne)}function f(ne){if(ne===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ne}function y(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function x(ne){return x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(oe){return oe.__proto__||Object.getPrototypeOf(oe)},x(ne)}function B(ne,G,oe){return G=O(G),G in ne?Object.defineProperty(ne,G,{value:oe,enumerable:!0,configurable:!0,writable:!0}):ne[G]=oe,ne}function O(ne){var G=P(ne,"string");return n(G)==="symbol"?G:String(G)}function P(ne,G){if(n(ne)!=="object"||ne===null)return ne;var oe=ne[Symbol.toPrimitive];if(oe!==void 0){var he=oe.call(ne,G||"default");if(n(he)!=="object")return he;throw new TypeError("@@toPrimitive must return a primitive value.")}return(G==="string"?String:Number)(ne)}var U=Ia(),j=mp(),N=lre,Y=N.createFocusTrap,H=ure,se=H.isFocusable,re=function(ne){i(oe,ne);var G=l(oe);function oe(he){var fe;e(this,oe),fe=G.call(this,he),B(f(fe),"getNodeForOption",function(Se){var Ke,xe=(Ke=this.internalOptions[Se])!==null&&Ke!==void 0?Ke:this.originalOptions[Se];if(typeof xe=="function"){for(var at=arguments.length,Ze=new Array(at>1?at-1:0),Je=1;Je<at;Je++)Ze[Je-1]=arguments[Je];xe=xe.apply(void 0,Ze)}if(xe===!0&&(xe=void 0),!xe){if(xe===void 0||xe===!1)return xe;throw new Error("`".concat(Se,"` was specified but was not a node, or did not return a node"))}var Ne=xe;if(typeof xe=="string"){var we;if(Ne=(we=this.getDocument())===null||we===void 0?void 0:we.querySelector(xe),!Ne)throw new Error("`".concat(Se,"` as selector refers to no known node"))}return Ne}),fe.handleDeactivate=fe.handleDeactivate.bind(f(fe)),fe.handlePostDeactivate=fe.handlePostDeactivate.bind(f(fe)),fe.handleClickOutsideDeactivates=fe.handleClickOutsideDeactivates.bind(f(fe)),fe.internalOptions={returnFocusOnDeactivate:!1,checkCanReturnFocus:null,onDeactivate:fe.handleDeactivate,onPostDeactivate:fe.handlePostDeactivate,clickOutsideDeactivates:fe.handleClickOutsideDeactivates},fe.originalOptions={returnFocusOnDeactivate:!0,onDeactivate:null,onPostDeactivate:null,checkCanReturnFocus:null,clickOutsideDeactivates:!1};var Ee=he.focusTrapOptions;for(var me in Ee)if(Object.prototype.hasOwnProperty.call(Ee,me)){if(me==="returnFocusOnDeactivate"||me==="onDeactivate"||me==="onPostDeactivate"||me==="checkCanReturnFocus"||me==="clickOutsideDeactivates"){fe.originalOptions[me]=Ee[me];continue}fe.internalOptions[me]=Ee[me]}return fe.outsideClick=null,fe.focusTrapElements=he.containerElements||[],fe.updatePreviousElement(),fe}return r(oe,[{key:"getDocument",value:function(){return this.props.focusTrapOptions.document||(typeof document<"u"?document:void 0)}},{key:"getReturnFocusNode",value:function(){var fe=this.getNodeForOption("setReturnFocus",this.previouslyFocusedElement);return fe||(fe===!1?!1:this.previouslyFocusedElement)}},{key:"updatePreviousElement",value:function(){var fe=this.getDocument();fe&&(this.previouslyFocusedElement=fe.activeElement)}},{key:"deactivateTrap",value:function(){!this.focusTrap||!this.focusTrap.active||this.focusTrap.deactivate({returnFocus:!1,checkCanReturnFocus:null,onDeactivate:this.originalOptions.onDeactivate})}},{key:"handleClickOutsideDeactivates",value:function(fe){var Ee=typeof this.originalOptions.clickOutsideDeactivates=="function"?this.originalOptions.clickOutsideDeactivates.call(null,fe):this.originalOptions.clickOutsideDeactivates;return Ee&&(this.outsideClick={target:fe.target,allowDeactivation:Ee}),Ee}},{key:"handleDeactivate",value:function(){this.originalOptions.onDeactivate&&this.originalOptions.onDeactivate.call(null),this.deactivateTrap()}},{key:"handlePostDeactivate",value:function(){var fe=this,Ee=function(){var Se=fe.getReturnFocusNode(),Ke=!!(fe.originalOptions.returnFocusOnDeactivate&&Se!==null&&Se!==void 0&&Se.focus&&(!fe.outsideClick||fe.outsideClick.allowDeactivation&&!se(fe.outsideClick.target,fe.internalOptions.tabbableOptions))),xe=fe.internalOptions.preventScroll,at=xe===void 0?!1:xe;Ke&&Se.focus({preventScroll:at}),fe.originalOptions.onPostDeactivate&&fe.originalOptions.onPostDeactivate.call(null),fe.outsideClick=null};this.originalOptions.checkCanReturnFocus?this.originalOptions.checkCanReturnFocus.call(null,this.getReturnFocusNode()).then(Ee,Ee):Ee()}},{key:"setupFocusTrap",value:function(){if(this.focusTrap)this.props.active&&!this.focusTrap.active&&(this.focusTrap.activate(),this.props.paused&&this.focusTrap.pause());else{var fe=this.focusTrapElements.some(Boolean);fe&&(this.focusTrap=this.props._createFocusTrap(this.focusTrapElements,this.internalOptions),this.props.active&&this.focusTrap.activate(),this.props.paused&&this.focusTrap.pause())}}},{key:"componentDidMount",value:function(){this.props.active&&this.setupFocusTrap()}},{key:"componentDidUpdate",value:function(fe){if(this.focusTrap){fe.containerElements!==this.props.containerElements&&this.focusTrap.updateContainerElements(this.props.containerElements);var Ee=!fe.active&&this.props.active,me=fe.active&&!this.props.active,Se=!fe.paused&&this.props.paused,Ke=fe.paused&&!this.props.paused;if(Ee&&(this.updatePreviousElement(),this.focusTrap.activate()),me){this.deactivateTrap();return}Se&&this.focusTrap.pause(),Ke&&this.focusTrap.unpause()}else fe.containerElements!==this.props.containerElements&&(this.focusTrapElements=this.props.containerElements),this.props.active&&(this.updatePreviousElement(),this.setupFocusTrap())}},{key:"componentWillUnmount",value:function(){this.deactivateTrap()}},{key:"render",value:function(){var fe=this,Ee=this.props.children?U.Children.only(this.props.children):void 0;if(Ee){if(Ee.type&&Ee.type===U.Fragment)throw new Error("A focus-trap cannot use a Fragment as its child container. Try replacing it with a <div> element.");var me=function(xe){var at=fe.props.containerElements;Ee&&(typeof Ee.ref=="function"?Ee.ref(xe):Ee.ref&&(Ee.ref.current=xe)),fe.focusTrapElements=at||[xe]},Se=U.cloneElement(Ee,{ref:me});return Se}return null}}]),oe}(U.Component),V=typeof Element>"u"?Function:Element;return re.propTypes={active:j.bool,paused:j.bool,focusTrapOptions:j.shape({document:j.object,onActivate:j.func,onPostActivate:j.func,checkCanFocusTrap:j.func,onPause:j.func,onPostPause:j.func,onUnpause:j.func,onPostUnpause:j.func,onDeactivate:j.func,onPostDeactivate:j.func,checkCanReturnFocus:j.func,initialFocus:j.oneOfType([j.instanceOf(V),j.string,j.bool,j.func]),fallbackFocus:j.oneOfType([j.instanceOf(V),j.string,j.func]),escapeDeactivates:j.oneOfType([j.bool,j.func]),clickOutsideDeactivates:j.oneOfType([j.bool,j.func]),returnFocusOnDeactivate:j.bool,setReturnFocus:j.oneOfType([j.instanceOf(V),j.string,j.bool,j.func]),allowOutsideClick:j.oneOfType([j.bool,j.func]),preventScroll:j.bool,tabbableOptions:j.shape({displayCheck:j.oneOf(["full","legacy-full","non-zero-area","none"]),getShadowRoot:j.oneOfType([j.bool,j.func])}),trapStack:j.array,isKeyForward:j.func,isKeyBackward:j.func}),containerElements:j.arrayOf(j.instanceOf(V)),children:j.oneOfType([j.element,j.instanceOf(V)])},re.defaultProps={active:!0,paused:!1,focusTrapOptions:{},_createFocusTrap:Y},L4=re,L4}var U4={exports:{}},v9;function cre(){return v9||(v9=1,function(n){(function(e){var t=!1,r,i;function s(){if(typeof r<"u")return r;var B=document.documentElement,O=document.createElement("div");return O.setAttribute("style","width:99px;height:99px;position:absolute;top:-9999px;overflow:scroll;"),B.appendChild(O),r=O.offsetWidth-O.clientWidth,B.removeChild(O),r}function l(){return document.documentElement.scrollHeight>window.innerHeight}function o(B){if(!(typeof document>"u"||t)){var O=document.documentElement;i=window.pageYOffset,l()?O.style.width="calc(100% - "+s()+"px)":O.style.width="100%",O.style.position="fixed",O.style.top=-i+"px",O.style.overflow="hidden",t=!0}}function f(){if(!(typeof document>"u"||!t)){var B=document.documentElement;B.style.width="",B.style.position="",B.style.top="",B.style.overflow="",window.scroll(0,i),t=!1}}function y(){if(t){f();return}o()}var x={on:o,off:f,toggle:y};n.exports=x})()}(U4)),U4.exports}var z4,C9;function dre(){if(C9)return z4;C9=1;function n(se){"@babel/helpers - typeof";return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(re){return typeof re}:function(re){return re&&typeof Symbol=="function"&&re.constructor===Symbol&&re!==Symbol.prototype?"symbol":typeof re},n(se)}function e(se,re){if(!(se instanceof re))throw new TypeError("Cannot call a class as a function")}function t(se,re){for(var V=0;V<re.length;V++){var ne=re[V];ne.enumerable=ne.enumerable||!1,ne.configurable=!0,"value"in ne&&(ne.writable=!0),Object.defineProperty(se,ne.key,ne)}}function r(se,re,V){return re&&t(se.prototype,re),Object.defineProperty(se,"prototype",{writable:!1}),se}function i(se,re){if(typeof re!="function"&&re!==null)throw new TypeError("Super expression must either be null or a function");se.prototype=Object.create(re&&re.prototype,{constructor:{value:se,writable:!0,configurable:!0}}),Object.defineProperty(se,"prototype",{writable:!1}),re&&s(se,re)}function s(se,re){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(ne,G){return ne.__proto__=G,ne},s(se,re)}function l(se){var re=y();return function(){var ne=x(se),G;if(re){var oe=x(this).constructor;G=Reflect.construct(ne,arguments,oe)}else G=ne.apply(this,arguments);return o(this,G)}}function o(se,re){if(re&&(n(re)==="object"||typeof re=="function"))return re;if(re!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return f(se)}function f(se){if(se===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return se}function y(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function x(se){return x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(V){return V.__proto__||Object.getPrototypeOf(V)},x(se)}function B(se,re,V){return re in se?Object.defineProperty(se,re,{value:V,enumerable:!0,configurable:!0,writable:!0}):se[re]=V,se}var O=Ia(),P=IC(),U=Are(),j=cre(),N=function(se){i(V,se);var re=l(V);function V(ne){var G;if(e(this,V),G=re.call(this,ne),B(f(G),"getApplicationNode",function(){return G.props.getApplicationNode?G.props.getApplicationNode():G.props.applicationNode}),B(f(G),"checkUnderlayClick",function(oe){G.dialogNode&&G.dialogNode.contains(oe.target)||oe.pageX>oe.target.ownerDocument.documentElement.offsetWidth||oe.pageY>oe.target.ownerDocument.documentElement.offsetHeight||G.exit(oe)}),B(f(G),"checkDocumentKeyDown",function(oe){G.props.escapeExits&&(oe.key==="Escape"||oe.key==="Esc"||oe.keyCode===27)&&G.exit(oe)}),B(f(G),"exit",function(oe){G.props.onExit&&G.props.onExit(oe)}),!ne.titleText&&!ne.titleId)throw new Error("react-aria-modal instances should have a `titleText` or `titleId`");return G}return r(V,[{key:"componentDidMount",value:function(){this.props.onEnter&&this.props.onEnter();var G=this.getApplicationNode();setTimeout(function(){G&&G.setAttribute("aria-hidden","true")},0),this.props.escapeExits&&this.addKeyDownListener(),this.props.scrollDisabled&&j.on()}},{key:"componentDidUpdate",value:function(G){G.scrollDisabled&&!this.props.scrollDisabled?j.off():!G.scrollDisabled&&this.props.scrollDisabled&&j.on(),this.props.escapeExits&&!G.escapeExits?this.addKeyDownListener():!this.props.escapeExits&&G.escapeExits&&this.removeKeyDownListener()}},{key:"componentWillUnmount",value:function(){this.props.scrollDisabled&&j.off();var G=this.getApplicationNode();G&&G.setAttribute("aria-hidden","false"),this.removeKeyDownListener()}},{key:"addKeyDownListener",value:function(){var G=this;setTimeout(function(){document.addEventListener("keydown",G.checkDocumentKeyDown)})}},{key:"removeKeyDownListener",value:function(){var G=this;setTimeout(function(){document.removeEventListener("keydown",G.checkDocumentKeyDown)})}},{key:"render",value:function(){var G=this.props,oe={};if(G.includeDefaultStyles&&(oe={position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:1050,overflowX:"hidden",overflowY:"auto",WebkitOverflowScrolling:"touch",textAlign:"center"},G.underlayColor&&(oe.background=G.underlayColor),G.underlayClickExits&&(oe.cursor="pointer")),G.underlayStyle)for(var he in G.underlayStyle)G.underlayStyle.hasOwnProperty(he)&&(oe[he]=G.underlayStyle[he]);var fe={className:G.underlayClass,style:oe};G.underlayClickExits&&(fe.onMouseDown=this.checkUnderlayClick);for(var Ee in this.props.underlayProps)fe[Ee]=this.props.underlayProps[Ee];var me={};G.includeDefaultStyles&&(me={display:"inline-block",height:"100%",verticalAlign:"middle"});var Se={key:"a",style:me},Ke={};if(G.includeDefaultStyles&&(Ke={display:"inline-block",textAlign:"left",top:0,maxWidth:"100%",cursor:"auto",outline:G.focusDialog?0:null},G.verticallyCenter&&(Ke.verticalAlign="middle",Ke.top=0)),G.dialogStyle)for(var xe in G.dialogStyle)G.dialogStyle.hasOwnProperty(xe)&&(Ke[xe]=G.dialogStyle[xe]);var at={key:"b",ref:(function(we){this.dialogNode=we}).bind(this),role:G.alert?"alertdialog":"dialog",id:G.dialogId,className:G.dialogClass,style:Ke};G.titleId?at["aria-labelledby"]=G.titleId:G.titleText&&(at["aria-label"]=G.titleText),G.focusDialog&&(at.tabIndex="-1");for(var Ze in G)/^(data-|aria-)/.test(Ze)&&(at[Ze]=G[Ze]);var Je=[O.createElement("div",at,G.children)];G.verticallyCenter&&Je.unshift(O.createElement("div",Se));var Ne=G.focusTrapOptions||{};return(G.focusDialog||G.initialFocus)&&(Ne.initialFocus=G.focusDialog?"#".concat(this.props.dialogId):G.initialFocus),Ne.escapeDeactivates=G.escapeExits,O.createElement(U,{focusTrapOptions:Ne,paused:G.focusTrapPaused},O.createElement("div",fe,Je))}}]),V}(O.Component);B(N,"defaultProps",{underlayProps:{},dialogId:"react-aria-modal-dialog",underlayClickExits:!0,escapeExits:!0,underlayColor:"rgba(0,0,0,0.5)",includeDefaultStyles:!0,focusTrapPaused:!1,scrollDisabled:!0});function Y(se,re){if(!window.document)return function(){return null};re=re||{};var V=function(ne){i(oe,ne);var G=l(oe);function oe(){var he;e(this,oe);for(var fe=arguments.length,Ee=new Array(fe),me=0;me<fe;me++)Ee[me]=arguments[me];return he=G.call.apply(G,[this].concat(Ee)),B(f(he),"container",null),he}return r(oe,[{key:"componentDidMount",value:function(){re.renderTo?this.container=typeof re.renderTo=="string"?document.querySelector(re.renderTo):re.renderTo:(this.container=document.createElement("div"),document.body.appendChild(this.container)),this.forceUpdate()}},{key:"componentWillUnmount",value:function(){re.renderTo||this.container.parentNode.removeChild(this.container)}},{key:"render",value:function(){return this.container===null||!this.props.mounted?null:P.createPortal(O.createElement(se,this.props,this.props.children),this.container)}}]),oe}(O.Component);return B(V,"defaultProps",{mounted:!0}),V}var H=Y(N);return H.renderTo=function(se){return Y(N,{renderTo:se})},z4=H,z4}var hre=dre();const fre=fl(hre);function xA(){var n="/home/runner/work/maputnik/maputnik/src/components/Modal.tsx",e="55b511200efca707daa3ccb304d63dc159a8f390",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/Modal.tsx",statementMap:{0:{start:{line:8,column:24},end:{line:10,column:3}},1:{start:{line:12,column:12},end:{line:19,column:3}},2:{start:{line:13,column:4},end:{line:15,column:5}},3:{start:{line:14,column:6},end:{line:14,column:36}},4:{start:{line:16,column:4},end:{line:18,column:10}},5:{start:{line:17,column:6},end:{line:17,column:37}},6:{start:{line:21,column:14},end:{line:21,column:26}},7:{start:{line:22,column:4},end:{line:60,column:5}},8:{start:{line:23,column:6},end:{line:57,column:8}},9:{start:{line:59,column:6},end:{line:59,column:19}},10:{start:{line:63,column:14},end:{line:63,column:46}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:12,column:12},end:{line:12,column:13}},loc:{start:{line:12,column:18},end:{line:19,column:3}},line:12},1:{name:"(anonymous_1)",decl:{start:{line:16,column:15},end:{line:16,column:16}},loc:{start:{line:16,column:21},end:{line:18,column:5}},line:16},2:{name:"(anonymous_2)",decl:{start:{line:20,column:2},end:{line:20,column:3}},loc:{start:{line:20,column:11},end:{line:61,column:3}},line:20}},branchMap:{0:{loc:{start:{line:13,column:4},end:{line:15,column:5}},type:"if",locations:[{start:{line:13,column:4},end:{line:15,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:13},1:{loc:{start:{line:22,column:4},end:{line:60,column:5}},type:"if",locations:[{start:{line:22,column:4},end:{line:60,column:5}},{start:{line:58,column:11},end:{line:60,column:5}}],line:22}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0},f:{0:0,1:0,2:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/Modal.tsx"],names:[],mappings:"AAgDU,SACE,KADF;AAhDV,OAAO,WAAkC;AACzC,SAAQ,eAAc;AACtB,OAAO,eAAe;AACtB,OAAO,gBAAgB;AACvB,SAA0B,uBAAuB;AAajD,MAAM,sBAAsB,MAAM,UAA8B;AAAA,EAC9D,OAAO,eAAe;AAAA,IACpB,oBAAoB;AAAA,EACtB;AAAA;AAAA,EAGA,UAAU,MAAM;AACd,QAAI,SAAS,eAAe;AAC1B,MAAC,SAAS,cAA8B,KAAK;AAAA,IAC/C;AAEA,eAAW,MAAM;AACf,WAAK,MAAM,aAAa,KAAK;AAAA,IAC/B,GAAG,CAAC;AAAA,EACN;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,QAAG,KAAK,MAAM,QAAQ;AACpB,aAAO;AAAA,QAAC;AAAA;AAAA,UACN,WAAW,KAAK,MAAM;AAAA,UACtB,oBAAoB,KAAK,MAAM;AAAA,UAE/B,eAAe,KAAK,MAAM;AAAA,UAC1B,eAAa,KAAK,MAAM,aAAa;AAAA,UACrC,kBAAkB;AAAA,UAClB,QAAQ,KAAK;AAAA,UAEb;AAAA,YAAC;AAAA;AAAA,cAAI,WAAW,WAAW,kBAAkB,KAAK,MAAM,SAAS;AAAA,cAC/D,eAAa,KAAK,MAAM,aAAa;AAAA,cAErC;AAAA,qCAAC,YAAO,WAAU,yBAChB;AAAA,sCAAC,QAAG,WAAU,+BAA+B,eAAK,MAAM,OAAM;AAAA,kBAC9D,oBAAC,UAAK,WAAU,+BAA8B;AAAA,kBAC9C;AAAA,oBAAC;AAAA;AAAA,sBAAO,WAAU;AAAA,sBAChB,OAAO,EAAE,aAAa;AAAA,sBACtB,SAAS,KAAK;AAAA,sBACd,eAAa,KAAK,MAAM,aAAa,IAAE;AAAA,sBAEvC,8BAAC,WAAQ;AAAA;AAAA,kBACX;AAAA,mBACF;AAAA,gBACA,oBAAC,SAAI,WAAU,2BACb,8BAAC,SAAI,WAAU,0BAA0B,eAAK,MAAM,UAAS,GAC/D;AAAA;AAAA;AAAA,UACF;AAAA;AAAA,MACF;AAAA,IACF,OACK;AACH,aAAO;AAAA,IACT;AAAA,EACF;AACF;AAEA,MAAM,QAAQ,gBAAgB,EAAE,aAAa;AAC7C,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"55b511200efca707daa3ccb304d63dc159a8f390"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return xA=function(){return l},l}xA();class dz extends Xn.Component{constructor(){super(...arguments);Kn(this,"onClose",(xA().s[1]++,()=>{xA().f[0]++,xA().s[2]++,document.activeElement?(xA().b[0][0]++,xA().s[3]++,document.activeElement.blur()):xA().b[0][1]++,xA().s[4]++,setTimeout(()=>{xA().f[1]++,xA().s[5]++,this.props.onOpenToggle(!1)},0)}))}render(){xA().f[2]++;const t=(xA().s[6]++,this.props.t);return xA().s[7]++,this.props.isOpen?(xA().b[1][0]++,xA().s[8]++,ue.jsx(fre,{titleText:this.props.title,underlayClickExits:this.props.underlayClickExits,underlayProps:this.props.underlayProps,"data-wd-key":this.props["data-wd-key"],verticallyCenter:!0,onExit:this.onClose,children:ue.jsxs("div",{className:tm("maputnik-modal",this.props.className),"data-wd-key":this.props["data-wd-key"],children:[ue.jsxs("header",{className:"maputnik-modal-header",children:[ue.jsx("h1",{className:"maputnik-modal-header-title",children:this.props.title}),ue.jsx("span",{className:"maputnik-modal-header-space"}),ue.jsx("button",{className:"maputnik-modal-header-toggle",title:t("Close modal"),onClick:this.onClose,"data-wd-key":this.props["data-wd-key"]+".close-modal",children:ue.jsx(ZV,{})})]}),ue.jsx("div",{className:"maputnik-modal-scroller",children:ue.jsx("div",{className:"maputnik-modal-content",children:this.props.children})})]})})):(xA().b[1][1]++,xA().s[9]++,!1)}}Kn(dz,"defaultProps",(xA().s[0]++,{underlayClickExits:!0}));const Y0=(xA().s[10]++,zs()(dz)),pre=8,mre={version:{required:!0,type:"enum",values:[8],doc:"Style specification version number. Must be 8.",example:8},name:{type:"string",doc:"A human-readable name for the style.",example:"Bright"},metadata:{type:"*",doc:"Arbitrary properties useful to track with the stylesheet, but do not influence rendering. Properties should be prefixed to avoid collisions, like 'maplibre:'.",example:{"styleeditor:slimmode":!0,"styleeditor:comment":"Style generated 1677776383","styleeditor:version":"3.14.159265","example:object":{String:"one",Number:2,Boolean:!1}}},center:{type:"array",value:"number",doc:"Default map center in longitude and latitude.  The style center will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:[-73.9749,40.7736]},centerAltitude:{type:"number",doc:"Default map center altitude in meters above sea level. The style center altitude defines the altitude where the camera is looking at and will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:123.4,"sdk-support":{"basic functionality":{js:"5.0.0",android:"https://github.com/maplibre/maplibre-native/issues/2980",ios:"https://github.com/maplibre/maplibre-native/issues/2980"}}},zoom:{type:"number",doc:"Default zoom level.  The style zoom will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:12.5},bearing:{type:"number",default:0,period:360,units:"degrees",doc:'Default bearing, in degrees. The bearing is the compass direction that is "up"; for example, a bearing of 90 orients the map so that east is up. This value will be used only if the map has not been positioned by other means (e.g. map options or user interaction).',example:29},pitch:{type:"number",default:0,units:"degrees",doc:"Default pitch, in degrees. Zero is perpendicular to the surface, for a look straight down at the map, while a greater value like 60 looks ahead towards the horizon. The style pitch will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:50,"sdk-support":{"0-60 degrees":{js:"0.8.0",android:"1.0.0",ios:"1.0.0"},"0-85 degrees":{js:"2.0.0",android:"https://github.com/maplibre/maplibre-native/issues/1909",ios:"https://github.com/maplibre/maplibre-native/issues/1909"},"0-180 degrees":{js:"5.0.0",android:"https://github.com/maplibre/maplibre-native/issues/1909",ios:"https://github.com/maplibre/maplibre-native/issues/1909"}}},roll:{type:"number",default:0,units:"degrees",doc:"Default roll, in degrees. The roll angle is measured counterclockwise about the camera boresight. The style roll will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:45,"sdk-support":{"basic functionality":{js:"5.0.0",android:"https://github.com/maplibre/maplibre-native/issues/2941",ios:"https://github.com/maplibre/maplibre-native/issues/2941"}}},light:{type:"light",doc:"The global light source.",example:{anchor:"viewport",color:"white",intensity:.4}},sky:{type:"sky",doc:"The map's sky configuration. **Note:** this definition is still experimental and is under development in maplibre-gl-js.",example:{"sky-color":"#199EF3","sky-horizon-blend":.5,"horizon-color":"#ffffff","horizon-fog-blend":.5,"fog-color":"#0000ff","fog-ground-blend":.5,"atmosphere-blend":["interpolate",["linear"],["zoom"],0,1,10,1,12,0]}},projection:{type:"projection",doc:"The projection configuration",example:{type:["interpolate",["linear"],["zoom"],10,"vertical-perspective",12,"mercator"]}},terrain:{type:"terrain",doc:"The terrain configuration.",example:{source:"raster-dem-source",exaggeration:.5}},sources:{required:!0,type:"sources",doc:"Sources state which data the map should display. Specify the type of source with the `type` property. Adding a source isn't enough to make data appear on the map because sources don't contain styling details like color or width. Layers refer to a source and give it a visual representation. This makes it possible to style the same source in different ways, like differentiating between types of roads in a highways layer.\n\nTiled sources (vector and raster) must specify their details according to the [TileJSON specification](https://github.com/mapbox/tilejson-spec).",example:{"maplibre-demotiles":{type:"vector",url:"https://demotiles.maplibre.org/tiles/tiles.json"},"maplibre-tilejson":{type:"vector",url:"http://api.example.com/tilejson.json"},"maplibre-streets":{type:"vector",tiles:["http://a.example.com/tiles/{z}/{x}/{y}.pbf","http://b.example.com/tiles/{z}/{x}/{y}.pbf"],maxzoom:14},"wms-imagery":{type:"raster",tiles:["http://a.example.com/wms?bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&srs=EPSG:3857&width=256&height=256&layers=example"],tileSize:256}}},sprite:{type:"sprite",doc:"An array of `{id: 'my-sprite', url: 'https://example.com/sprite'}` objects. Each object should represent a unique URL to load a sprite from and and a unique ID to use as a prefix when referencing images from that sprite (i.e. 'my-sprite:image'). All the URLs are internally extended to load both .json and .png files. If the `id` field is equal to 'default', the prefix is omitted (just 'image' instead of 'default:image'). All the IDs and URLs must be unique. For backwards compatibility, instead of an array, one can also provide a single string that represent a URL to load the sprite from. The images in this case won't be prefixed.",example:"https://demotiles.maplibre.org/styles/osm-bright-gl-style/sprite"},glyphs:{type:"string",doc:`A URL template for loading signed-distance-field glyph sets in PBF format. 

The URL must include:

 - \`{fontstack}\` - When requesting glyphs, this token is replaced with a comma separated list of fonts from a font stack specified in the text-font property of a symbol layer. 

 - \`{range}\` - When requesting glyphs, this token is replaced with a range of 256 Unicode code points. For example, to load glyphs for the Unicode Basic Latin and Basic Latin-1 Supplement blocks, the range would be 0-255. The actual ranges that are loaded are determined at runtime based on what text needs to be displayed.

This property is required if any layer uses the \`text-field\` layout property. The URL must be absolute, containing the [scheme, authority and path components](https://en.wikipedia.org/wiki/URL#Syntax).`,example:"https://demotiles.maplibre.org/font/{fontstack}/{range}.pbf"},transition:{type:"transition",doc:"A global transition definition to use as a default across properties, to be used for timing transitions between one value and the next when no property-specific transition is set. Collision-based symbol fading is controlled independently of the style's `transition` property.",example:{duration:300,delay:0}},layers:{required:!0,type:"array",value:"layer",doc:"A style's `layers` property lists all the layers available in that style. The type of layer is specified by the `type` property, and must be one of `background`, `fill`, `line`, `symbol`, `raster`, `circle`, `fill-extrusion`, `heatmap`, `hillshade`.\n\nExcept for layers of the `background` type, each layer needs to refer to a source. Layers take the data that they get from a source, optionally filter features, and then define how those features are styled.",example:[{id:"coastline",source:"maplibre","source-layer":"countries",type:"line",paint:{"line-color":"#198EC8"}}]}},gre={"*":{type:"source",doc:"Specification of a data source. For vector and raster sources, either TileJSON or a URL to a TileJSON must be provided. For image and video sources, a URL must be provided. For GeoJSON sources, a URL or inline GeoJSON must be provided."}},yre=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],vre={type:{required:!0,type:"enum",values:{vector:{doc:"A vector tile source."}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:` and `https:`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by MapLibre."},scheme:{type:"enum",values:{xyz:{doc:"Slippy map tilenames scheme."},tms:{doc:"OSGeo spec scheme."}},default:"xyz",doc:"Influences the y direction of the tile coordinates. The global-mercator (aka Spherical Mercator) profile is assumed."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},promoteId:{type:"promoteId",doc:"A property to use as a feature id (for feature state). Either a property name, or an object of the form `{<sourceLayer>: <propertyName>}`. If specified as a string for a vector tile source, the same property is used across all its source layers."},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0",js:"wontfix"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},Cre={type:{required:!0,type:"enum",values:{raster:{doc:"A raster tile source."}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:` and `https:`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by MapLibre."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},tileSize:{type:"number",default:512,units:"pixels",doc:"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},scheme:{type:"enum",values:{xyz:{doc:"Slippy map tilenames scheme."},tms:{doc:"OSGeo spec scheme."}},default:"xyz",doc:"Influences the y direction of the tile coordinates. The global-mercator (aka Spherical Mercator) profile is assumed."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0",js:"wontfix"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},_re={type:{required:!0,type:"enum",values:{"raster-dem":{doc:"A RGB-encoded raster DEM source"}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:` and `https:`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by MapLibre."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},tileSize:{type:"number",default:512,units:"pixels",doc:"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},encoding:{type:"enum",values:{terrarium:{doc:"Terrarium format PNG tiles. See https://aws.amazon.com/es/public-datasets/terrain/ for more info."},mapbox:{doc:"Mapbox Terrain RGB tiles. See https://www.mapbox.com/help/access-elevation-data/#mapbox-terrain-rgb for more info."},custom:{doc:"Decodes tiles using the redFactor, blueFactor, greenFactor, baseShift parameters."}},default:"mapbox",doc:"The encoding used by this source. Mapbox Terrain RGB is used by default.","sdk-support":{"mapbox, terrarium":{js:"0.43.0",ios:"6.0.0",android:"6.0.0"},custom:{js:"3.4.0",ios:"https://github.com/maplibre/maplibre-native/issues/2783",android:"https://github.com/maplibre/maplibre-native/issues/2783"}}},redFactor:{type:"number",default:1,doc:"Value that will be multiplied by the red channel value when decoding. Only used on custom encodings.","sdk-support":{"basic functionality":{js:"3.4.0",ios:"https://github.com/maplibre/maplibre-native/issues/2783",android:"https://github.com/maplibre/maplibre-native/issues/2783"}}},blueFactor:{type:"number",default:1,doc:"Value that will be multiplied by the blue channel value when decoding. Only used on custom encodings.","sdk-support":{"basic functionality":{js:"3.4.0",ios:"https://github.com/maplibre/maplibre-native/issues/2783",android:"https://github.com/maplibre/maplibre-native/issues/2783"}}},greenFactor:{type:"number",default:1,doc:"Value that will be multiplied by the green channel value when decoding. Only used on custom encodings.","sdk-support":{"basic functionality":{js:"3.4.0",ios:"https://github.com/maplibre/maplibre-native/issues/2358",android:"https://github.com/maplibre/maplibre-native/issues/2783"}}},baseShift:{type:"number",default:0,doc:"Value that will be added to the encoding mix when decoding. Only used on custom encodings.","sdk-support":{"basic functionality":{js:"3.4.0",ios:"https://github.com/maplibre/maplibre-native/issues/2783",android:"https://github.com/maplibre/maplibre-native/issues/2783"}}},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0",js:"wontfix"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},bre={type:{required:!0,type:"enum",values:{geojson:{doc:"A GeoJSON data source."}},doc:"The data type of the GeoJSON source."},data:{required:!0,type:"*",doc:"A URL to a GeoJSON file, or inline GeoJSON."},maxzoom:{type:"number",default:18,doc:"Maximum zoom level at which to create vector tiles (higher means greater detail at high zoom levels)."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},buffer:{type:"number",default:128,maximum:512,minimum:0,doc:"Size of the tile buffer on each side. A value of 0 produces no buffer. A value of 512 produces a buffer as wide as the tile itself. Larger values produce fewer rendering artifacts near tile edges and slower performance."},filter:{type:"*",doc:"An expression for filtering features prior to processing them for rendering."},tolerance:{type:"number",default:.375,doc:"Douglas-Peucker simplification tolerance (higher means simpler geometries and faster performance)."},cluster:{type:"boolean",default:!1,doc:"If the data is a collection of point features, setting this to true clusters the points by radius into groups. Cluster groups become new `Point` features in the source with additional properties:\n\n * `cluster` Is `true` if the point is a cluster \n\n * `cluster_id` A unique id for the cluster to be used in conjunction with the [cluster inspection methods](https://maplibre.org/maplibre-gl-js/docs/API/classes/GeoJSONSource/#getclusterexpansionzoom)\n\n * `point_count` Number of original points grouped into this cluster\n\n * `point_count_abbreviated` An abbreviated point count"},clusterRadius:{type:"number",default:50,minimum:0,doc:"Radius of each cluster if clustering is enabled. A value of 512 indicates a radius equal to the width of a tile."},clusterMaxZoom:{type:"number",doc:"Max zoom on which to cluster points if clustering is enabled. Defaults to one zoom less than maxzoom (so that last zoom features are not clustered). Clusters are re-evaluated at integer zoom levels so setting clusterMaxZoom to 14 means the clusters will be displayed until z15."},clusterMinPoints:{type:"number",doc:"Minimum number of points necessary to form a cluster if clustering is enabled. Defaults to `2`."},clusterProperties:{type:"*",doc:'An object defining custom properties on the generated clusters if clustering is enabled, aggregating values from clustered points. Has the form `{"property_name": [operator, map_expression]}`. `operator` is any expression function that accepts at least 2 operands (e.g. `"+"` or `"max"`)  it accumulates the property value from clusters/points the cluster contains; `map_expression` produces the value of a single point.\n\nExample: `{"sum": ["+", ["get", "scalerank"]]}`.\n\nFor more advanced use cases, in place of `operator`, you can use a custom reduce expression that references a special `["accumulated"]` value, e.g.:\n\n`{"sum": [["+", ["accumulated"], ["get", "sum"]], ["get", "scalerank"]]}`'},lineMetrics:{type:"boolean",default:!1,doc:"Whether to calculate line distance metrics. This is required for line layers that specify `line-gradient` values."},generateId:{type:"boolean",default:!1,doc:"Whether to generate ids for the geojson features. When enabled, the `feature.id` property will be auto assigned based on its index in the `features` array, over-writing any previous values."},promoteId:{type:"promoteId",doc:"A property to use as a feature id (for feature state). Either a property name, or an object of the form `{<sourceLayer>: <propertyName>}`."}},xre={type:{required:!0,type:"enum",values:{video:{doc:"A video data source."}},doc:"The data type of the video source."},urls:{required:!0,type:"array",value:"string",doc:"URLs to video content in order of preferred format."},coordinates:{required:!0,doc:"Corners of video specified in longitude, latitude pairs.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},Mre={type:{required:!0,type:"enum",values:{image:{doc:"An image data source."}},doc:"The data type of the image source."},url:{required:!0,type:"string",doc:"URL that points to an image."},coordinates:{required:!0,doc:"Corners of image specified in longitude, latitude pairs.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},wre={id:{type:"string",doc:"Unique layer name.",required:!0},type:{type:"enum",values:{fill:{doc:"A filled polygon with an optional stroked border.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},line:{doc:"A stroked line.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},symbol:{doc:"An icon or a text label.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},circle:{doc:"A filled circle.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},heatmap:{doc:"A heatmap.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}}},"fill-extrusion":{doc:"An extruded (3D) polygon.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}},raster:{doc:"Raster map textures such as satellite imagery.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},hillshade:{doc:"Client-side hillshading visualization based on DEM data. The implementation supports Mapbox Terrain RGB, Mapzen Terrarium tiles and custom encodings.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}}},background:{doc:"The background color or pattern of the map.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}}},doc:"Rendering type of this layer.",required:!0},metadata:{type:"*",doc:"Arbitrary properties useful to track with the layer, but do not influence rendering. Properties should be prefixed to avoid collisions, like 'maplibre:'.",example:{"source:comment":"Hydrology FCCODE 460 - Narrow wash"}},source:{type:"string",doc:"Name of a source description to be used for this layer. Required for all layer types except `background`."},"source-layer":{type:"string",doc:"Layer to use from a vector tile source. Required for vector tile sources; prohibited for all other source types, including GeoJSON sources."},minzoom:{type:"number",minimum:0,maximum:24,doc:"The minimum zoom level for the layer. At zoom levels less than the minzoom, the layer will be hidden."},maxzoom:{type:"number",minimum:0,maximum:24,doc:"The maximum zoom level for the layer. At zoom levels equal to or greater than the maxzoom, the layer will be hidden."},filter:{type:"filter",doc:"A expression specifying conditions on source features. Only features that match the filter are displayed. Zoom expressions in filters are only evaluated at integer zoom levels. The `feature-state` expression is not supported in filter expressions."},layout:{type:"layout",doc:"Layout properties for the layer."},paint:{type:"paint",doc:"Default paint properties for this layer."}},Sre=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],Ere={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},"property-type":"constant"}},Bre={"fill-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.1.0",ios:"5.8.0"},"data-driven styling":{js:"1.2.0",android:"9.1.0",ios:"5.8.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},"property-type":"constant"}},Ore={"circle-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.2.0",ios:"5.9.0"},"data-driven styling":{js:"1.2.0",android:"9.2.0",ios:"5.9.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},"property-type":"constant"}},Ire={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}},"property-type":"constant"}},kre={"line-cap":{type:"enum",values:{butt:{doc:"A cap with a squared-off end which is drawn to the exact endpoint of the line."},round:{doc:"A cap with a rounded end which is drawn beyond the endpoint of the line at a radius of one-half of the line's width and centered on the endpoint of the line."},square:{doc:"A cap with a squared-off end which is drawn beyond the endpoint of the line at a distance of one-half of the line's width."}},default:"butt",doc:"The display of line endings.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{doc:"A join with a squared-off end which is drawn beyond the endpoint of the line at a distance of one-half of the line's width."},round:{doc:"A join with a rounded end which is drawn beyond the endpoint of the line at a radius of one-half of the line's width and centered on the endpoint of the line."},miter:{doc:"A join with a sharp, angled corner which is drawn with the outer sides beyond the endpoint of the path until they meet."}},default:"miter",doc:"The display of lines when joining.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,doc:"Used to automatically convert miter joins to bevel joins for sharp angles.",requires:[{"line-join":"miter"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,doc:"Used to automatically convert round joins to miter joins for shallow angles.",requires:[{"line-join":"round"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.1.0",ios:"5.8.0"},"data-driven styling":{js:"1.2.0",android:"9.1.0",ios:"5.8.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},"property-type":"constant"}},Tre=JSON.parse('{"symbol-placement":{"type":"enum","values":{"point":{"doc":"The label is placed at the point where the geometry is located."},"line":{"doc":"The label is placed along the line of the geometry. Can only be used on `LineString` and `Polygon` geometries."},"line-center":{"doc":"The label is placed at the center of the line of the geometry. Can only be used on `LineString` and `Polygon` geometries. Note that a single feature in a vector tile may contain multiple line geometries."}},"default":"point","doc":"Label placement relative to its geometry.","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"`line-center` value":{"js":"0.47.0","android":"6.4.0","ios":"4.3.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","doc":"Distance between two symbol anchors.","requires":[{"symbol-placement":"line"}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"doc":"If true, the symbols will not cross tile edges to avoid mutual collisions. Recommended in layers that don\'t have enough padding in the vector tile to prevent collisions, or if it is a point symbol layer placed after a line symbol layer. When using a client that supports global collision detection, like MapLibre GL JS version 0.42.0 or greater, enabling this property is not needed to prevent clipped labels at tile boundaries.","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","doc":"Sorts features in ascending order based on this value. Features with lower sort keys are drawn and placed first.  When `icon-allow-overlap` or `text-allow-overlap` is `false`, features with a lower sort key will have priority during placement. When `icon-allow-overlap` or `text-allow-overlap` is set to `true`, features with a higher sort key will overlap over features with a lower sort key.","sdk-support":{"basic functionality":{"js":"0.53.0","android":"7.4.0","ios":"4.11.0"},"data-driven styling":{"js":"0.53.0","android":"7.4.0","ios":"4.11.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{"doc":"Sorts symbols by `symbol-sort-key` if set. Otherwise, sorts symbols by their y-position relative to the viewport if `icon-allow-overlap` or `text-allow-overlap` is set to `true` or `icon-ignore-placement` or `text-ignore-placement` is `false`."},"viewport-y":{"doc":"Sorts symbols by their y-position relative to the viewport if `icon-allow-overlap` or `text-allow-overlap` is set to `true` or `icon-ignore-placement` or `text-ignore-placement` is `false`."},"source":{"doc":"Sorts symbols by `symbol-sort-key` if set. Otherwise, no sorting is applied; symbols are rendered in the same order as the source data."}},"default":"auto","doc":"Determines whether overlapping symbols in the same layer are rendered in the order that they appear in the data source or by their y-position relative to the viewport. To control the order and prioritization of symbols otherwise, use `symbol-sort-key`.","sdk-support":{"basic functionality":{"js":"0.49.0","android":"6.6.0","ios":"4.5.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"doc":"If true, the icon will be visible even if it collides with other previously drawn symbols.","requires":["icon-image",{"!":"icon-overlap"}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-overlap":{"type":"enum","values":{"never":{"doc":"The icon will be hidden if it collides with any other previously drawn symbol."},"always":{"doc":"The icon will be visible even if it collides with any other previously drawn symbol."},"cooperative":{"doc":"If the icon collides with another previously drawn symbol, the overlap mode for that symbol is checked. If the previous symbol was placed using `never` overlap mode, the new icon is hidden. If the previous symbol was placed using `always` or `cooperative` overlap mode, the new icon is visible."}},"doc":"Allows for control over whether to show an icon when it overlaps other symbols on the map. If `icon-overlap` is not set, `icon-allow-overlap` is used instead.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"2.1.0","android":"https://github.com/maplibre/maplibre-native/issues/251","ios":"https://github.com/maplibre/maplibre-native/issues/251"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"doc":"If true, other symbols can be visible even if they collide with the icon.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"doc":"If true, text will display without their corresponding icons when the icon collides with other symbols and the text does not.","requires":["icon-image","text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{"doc":"When `symbol-placement` is set to `point`, aligns icons east-west. When `symbol-placement` is set to `line` or `line-center`, aligns icon x-axes with the line."},"viewport":{"doc":"Produces icons whose x-axes are aligned with the x-axis of the viewport, regardless of the value of `symbol-placement`."},"auto":{"doc":"When `symbol-placement` is set to `point`, this is equivalent to `viewport`. When `symbol-placement` is set to `line` or `line-center`, this is equivalent to `map`."}},"default":"auto","doc":"In combination with `symbol-placement`, determines the rotation behavior of icons.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"`auto` value":{"js":"0.25.0","android":"4.2.0","ios":"3.4.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","doc":"Scales the original size of the icon by the provided factor. The new pixel size of the image will be the original pixel size multiplied by `icon-size`. 1 is the original size; 3 triples the size of the image.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.35.0","android":"5.1.0","ios":"3.6.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{"doc":"The icon is displayed at its intrinsic aspect ratio."},"width":{"doc":"The icon is scaled in the x-dimension to fit the width of the text."},"height":{"doc":"The icon is scaled in the y-dimension to fit the height of the text."},"both":{"doc":"The icon is scaled in both x- and y-dimensions."}},"default":"none","doc":"Scales the icon to fit around the associated text.","requires":["icon-image","text-field"],"sdk-support":{"basic functionality":{"js":"0.21.0","android":"4.2.0","ios":"3.4.0"},"stretchable icons":{"js":"1.6.0","android":"9.2.0","ios":"5.8.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","doc":"Size of the additional area added to dimensions determined by `icon-text-fit`, in clockwise order: top, right, bottom, left.","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"sdk-support":{"basic functionality":{"js":"0.21.0","android":"4.2.0","ios":"3.4.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","doc":"Name of image in sprite to use for drawing an image background.","tokens":true,"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.35.0","android":"5.1.0","ios":"3.6.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","doc":"Rotates the icon clockwise.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.21.0","android":"5.0.0","ios":"3.5.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"padding","default":[2],"units":"pixels","doc":"Size of additional area round the icon bounding box used for detecting symbol collisions.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"2.2.0","android":"https://github.com/maplibre/maplibre-native/issues/2754","ios":"https://github.com/maplibre/maplibre-native/issues/2754"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{"type":"boolean","default":false,"doc":"If true, the icon may be flipped to prevent it from being rendered upside-down.","requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"doc":"Offset distance of icon from its anchor. Positive values indicate right and down, while negative values indicate left and up. Each component is multiplied by the value of `icon-size` to obtain the final offset in pixels. When combined with `icon-rotate` the offset will be as if the rotated direction was up.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.29.0","android":"5.0.0","ios":"3.5.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{"doc":"The center of the icon is placed closest to the anchor."},"left":{"doc":"The left side of the icon is placed closest to the anchor."},"right":{"doc":"The right side of the icon is placed closest to the anchor."},"top":{"doc":"The top of the icon is placed closest to the anchor."},"bottom":{"doc":"The bottom of the icon is placed closest to the anchor."},"top-left":{"doc":"The top left corner of the icon is placed closest to the anchor."},"top-right":{"doc":"The top right corner of the icon is placed closest to the anchor."},"bottom-left":{"doc":"The bottom left corner of the icon is placed closest to the anchor."},"bottom-right":{"doc":"The bottom right corner of the icon is placed closest to the anchor."}},"default":"center","doc":"Part of the icon placed closest to the anchor.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.40.0","android":"5.2.0","ios":"3.7.0"},"data-driven styling":{"js":"0.40.0","android":"5.2.0","ios":"3.7.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{"doc":"The icon is aligned to the plane of the map."},"viewport":{"doc":"The icon is aligned to the plane of the viewport."},"auto":{"doc":"Automatically matches the value of `icon-rotation-alignment`."}},"default":"auto","doc":"Orientation of icon when map is pitched.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.39.0","android":"5.2.0","ios":"3.7.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{"doc":"The text is aligned to the plane of the map."},"viewport":{"doc":"The text is aligned to the plane of the viewport."},"auto":{"doc":"Automatically matches the value of `text-rotation-alignment`."}},"default":"auto","doc":"Orientation of text when map is pitched.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.21.0","android":"4.2.0","ios":"3.4.0"},"`auto` value":{"js":"0.25.0","android":"4.2.0","ios":"3.4.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{"doc":"When `symbol-placement` is set to `point`, aligns text east-west. When `symbol-placement` is set to `line` or `line-center`, aligns text x-axes with the line."},"viewport":{"doc":"Produces glyphs whose x-axes are aligned with the x-axis of the viewport, regardless of the value of `symbol-placement`."},"viewport-glyph":{"doc":"When `symbol-placement` is set to `point`, aligns text to the x-axis of the viewport. When `symbol-placement` is set to `line` or `line-center`, aligns glyphs to the x-axis of the viewport and places them along the line."},"auto":{"doc":"When `symbol-placement` is set to `point`, this is equivalent to `viewport`. When `symbol-placement` is set to `line` or `line-center`, this is equivalent to `map`."}},"default":"auto","doc":"In combination with `symbol-placement`, determines the rotation behavior of the individual glyphs forming the text.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"`auto` value":{"js":"0.25.0","android":"4.2.0","ios":"3.4.0"},"`viewport-glyph` value":{"js":"2.1.8","android":"https://github.com/maplibre/maplibre-native/issues/250","ios":"https://github.com/maplibre/maplibre-native/issues/250"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"doc":"Value to use for a text label. If a plain `string` is provided, it will be treated as a `formatted` with default/inherited formatting options.","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.33.0","android":"5.0.0","ios":"3.5.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"doc":"Font stack to use for displaying text.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.43.0","android":"6.0.0","ios":"4.0.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","doc":"Font size.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.35.0","android":"5.1.0","ios":"3.6.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","doc":"The maximum line width for text wrapping.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.40.0","android":"5.2.0","ios":"3.7.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","doc":"Text leading value for multi-line text.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","doc":"Text tracking amount.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.40.0","android":"5.2.0","ios":"3.7.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{"doc":"The text is aligned towards the anchor position."},"left":{"doc":"The text is aligned to the left."},"center":{"doc":"The text is centered."},"right":{"doc":"The text is aligned to the right."}},"default":"center","doc":"Text justification options.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.39.0","android":"5.2.0","ios":"3.7.0"},"auto":{"js":"0.54.0","android":"7.4.0","ios":"4.10.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"doc":"Radial offset of text, in the direction of the symbol\'s anchor. Useful in combination with `text-variable-anchor`, which defaults to using the two-dimensional `text-offset` if present.","sdk-support":{"basic functionality":{"js":"0.54.0","android":"7.4.0","ios":"4.10.0"},"data-driven styling":{"js":"0.54.0","android":"7.4.0","ios":"4.10.0"}},"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{"doc":"The center of the text is placed closest to the anchor."},"left":{"doc":"The left side of the text is placed closest to the anchor."},"right":{"doc":"The right side of the text is placed closest to the anchor."},"top":{"doc":"The top of the text is placed closest to the anchor."},"bottom":{"doc":"The bottom of the text is placed closest to the anchor."},"top-left":{"doc":"The top left corner of the text is placed closest to the anchor."},"top-right":{"doc":"The top right corner of the text is placed closest to the anchor."},"bottom-left":{"doc":"The bottom left corner of the text is placed closest to the anchor."},"bottom-right":{"doc":"The bottom right corner of the text is placed closest to the anchor."}},"requires":["text-field",{"symbol-placement":["point"]}],"doc":"To increase the chance of placing high-priority labels on the map, you can provide an array of `text-anchor` locations: the renderer will attempt to place the label at each location, in order, before moving onto the next label. Use `text-justify: auto` to choose justification based on anchor position. To apply an offset, use the `text-radial-offset` or the two-dimensional `text-offset`.","sdk-support":{"basic functionality":{"js":"0.54.0","android":"7.4.0","ios":"4.10.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{"type":"variableAnchorOffsetCollection","requires":["text-field",{"symbol-placement":["point"]}],"doc":"To increase the chance of placing high-priority labels on the map, you can provide an array of `text-anchor` locations, each paired with an offset value. The renderer will attempt to place the label at each location, in order, before moving on to the next location+offset. Use `text-justify: auto` to choose justification based on anchor position. \\n\\n The length of the array must be even, and must alternate between enum and point entries. i.e., each anchor location must be accompanied by a point, and that point defines the offset when the corresponding anchor location is used. Positive offset values indicate right and down, while negative values indicate left and up. Anchor locations may repeat, allowing the renderer to try multiple offsets to try and place a label using the same anchor. \\n\\n When present, this property takes precedence over `text-anchor`, `text-variable-anchor`, `text-offset`, and `text-radial-offset`. \\n\\n ```json \\n\\n { \\"text-variable-anchor-offset\\": [\\"top\\", [0, 4], \\"left\\", [3,0], \\"bottom\\", [1, 1]] } \\n\\n ``` \\n\\n When the renderer chooses the `top` anchor, `[0, 4]` will be used for `text-offset`; the text will be shifted down by 4 ems. \\n\\n When the renderer chooses the `left` anchor, `[3, 0]` will be used for `text-offset`; the text will be shifted right by 3 ems.","sdk-support":{"basic functionality":{"js":"3.3.0","ios":"6.8.0","android":"11.6.0"},"data-driven styling":{"js":"3.3.0","ios":"https://github.com/maplibre/maplibre-native/issues/2358","android":"https://github.com/maplibre/maplibre-native/issues/2358"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{"type":"enum","values":{"center":{"doc":"The center of the text is placed closest to the anchor."},"left":{"doc":"The left side of the text is placed closest to the anchor."},"right":{"doc":"The right side of the text is placed closest to the anchor."},"top":{"doc":"The top of the text is placed closest to the anchor."},"bottom":{"doc":"The bottom of the text is placed closest to the anchor."},"top-left":{"doc":"The top left corner of the text is placed closest to the anchor."},"top-right":{"doc":"The top right corner of the text is placed closest to the anchor."},"bottom-left":{"doc":"The bottom left corner of the text is placed closest to the anchor."},"bottom-right":{"doc":"The bottom right corner of the text is placed closest to the anchor."}},"default":"center","doc":"Part of the text placed closest to the anchor.","requires":["text-field",{"!":"text-variable-anchor"}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.39.0","android":"5.2.0","ios":"3.7.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","doc":"Maximum angle change between adjacent characters.","requires":["text-field",{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{"doc":"If a text\'s language supports horizontal writing mode, symbols with point placement would be laid out horizontally."},"vertical":{"doc":"If a text\'s language supports vertical writing mode, symbols with point placement would be laid out vertically."}},"doc":"The property allows control over a symbol\'s orientation. Note that the property values act as a hint, so that a symbol whose language doesnt support the provided orientation will be laid out in its natural orientation. Example: English point symbol will be rendered horizontally even if array value contains single \'vertical\' enum value. The order of elements in an array define priority order for the placement of an orientation variant.","requires":["text-field",{"symbol-placement":["point"]}],"sdk-support":{"basic functionality":{"js":"1.3.0","android":"8.3.0","ios":"5.3.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","doc":"Rotates the text clockwise.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.35.0","android":"5.1.0","ios":"3.6.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","doc":"Size of the additional area around the text bounding box used for detecting symbol collisions.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"doc":"If true, the text may be flipped vertically to prevent it from being rendered upside-down.","requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{"doc":"The text is not altered."},"uppercase":{"doc":"Forces all letters to be displayed in uppercase."},"lowercase":{"doc":"Forces all letters to be displayed in lowercase."}},"default":"none","doc":"Specifies how to capitalize text, similar to the CSS `text-transform` property.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.33.0","android":"5.0.0","ios":"3.5.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","doc":"Offset distance of text from its anchor. Positive values indicate right and down, while negative values indicate left and up. If used with text-variable-anchor, input values will be taken as absolute values. Offsets along the x- and y-axis will be applied automatically based on the anchor position.","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.35.0","android":"5.1.0","ios":"3.6.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"doc":"If true, the text will be visible even if it collides with other previously drawn symbols.","requires":["text-field",{"!":"text-overlap"}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-overlap":{"type":"enum","values":{"never":{"doc":"The text will be hidden if it collides with any other previously drawn symbol."},"always":{"doc":"The text will be visible even if it collides with any other previously drawn symbol."},"cooperative":{"doc":"If the text collides with another previously drawn symbol, the overlap mode for that symbol is checked. If the previous symbol was placed using `never` overlap mode, the new text is hidden. If the previous symbol was placed using `always` or `cooperative` overlap mode, the new text is visible."}},"doc":"Allows for control over whether to show symbol text when it overlaps other symbols on the map. If `text-overlap` is not set, `text-allow-overlap` is used instead","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"2.1.0","android":"https://github.com/maplibre/maplibre-native/issues/251","ios":"https://github.com/maplibre/maplibre-native/issues/251"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"doc":"If true, other symbols can be visible even if they collide with the text.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"doc":"If true, icons will display without their corresponding text when the text collides with other symbols and the icon does not.","requires":["text-field","icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{"doc":"The layer is shown."},"none":{"doc":"The layer is not shown."}},"default":"visible","doc":"Whether this layer is displayed.","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"property-type":"constant"}}'),Pre={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},"property-type":"constant"}},Kre={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},"property-type":"constant"}},Rre={type:"array",value:"*",doc:"A filter selects specific features from a layer."},Dre={type:"enum",values:{"==":{doc:'`["==", key, value]` equality: `feature[key] = value`'},"!=":{doc:'`["!=", key, value]` inequality: `feature[key]  value`'},">":{doc:'`[">", key, value]` greater than: `feature[key] > value`'},">=":{doc:'`[">=", key, value]` greater than or equal: `feature[key]  value`'},"<":{doc:'`["<", key, value]` less than: `feature[key] < value`'},"<=":{doc:'`["<=", key, value]` less than or equal: `feature[key]  value`'},in:{doc:'`["in", key, v0, ..., vn]` set inclusion: `feature[key]  {v0, ..., vn}`'},"!in":{doc:'`["!in", key, v0, ..., vn]` set exclusion: `feature[key]  {v0, ..., vn}`'},all:{doc:'`["all", f0, ..., fn]` logical `AND`: `f0  ...  fn`'},any:{doc:'`["any", f0, ..., fn]` logical `OR`: `f0  ...  fn`'},none:{doc:'`["none", f0, ..., fn]` logical `NOR`: `f0  ...  fn`'},has:{doc:'`["has", key]` `feature[key]` exists'},"!has":{doc:'`["!has", key]` `feature[key]` does not exist'}},doc:"The filter operator."},Fre={type:"enum",values:{Point:{doc:"Filter to point geometries."},LineString:{doc:"Filter to line geometries."},Polygon:{doc:"Filter to polygon geometries."}},doc:"The geometry type for the filter to select."},Lre={type:"array",minimum:0,maximum:24,value:["number","color"],length:2,doc:"Zoom level and value pair."},Ure={type:"array",value:"*",minimum:1,doc:"An expression defines a function that can be used for data-driven style properties or feature filters."},zre=JSON.parse('{"doc":"","type":"enum","values":{"let":{"doc":"Binds expressions to named variables, which can then be referenced in the result expression using `[\\"var\\", \\"variable_name\\"]`.\\n\\n - [Visualize population density](https://maplibre.org/maplibre-gl-js/docs/examples/visualize-population-density/)","example":{"syntax":{"method":["string","value","expression"],"result":"value"},"value":["let","someNumber",500,["interpolate",["linear"],["var","someNumber"],274,"#edf8e9",1551,"#006d2c"]]},"group":"Variable binding","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"var":{"doc":"References variable bound using `let`.\\n\\n - [Visualize population density](https://maplibre.org/maplibre-gl-js/docs/examples/visualize-population-density/)","example":{"syntax":{"method":["string"],"result":"value"},"value":["var","density"]},"group":"Variable binding","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"literal":{"doc":"Provides a literal array or object value.\\n\\n - [Display and style rich text labels](https://maplibre.org/maplibre-gl-js/docs/examples/display-and-style-rich-text-labels/)","example":{"syntax":{"method":["JSON object or array"],"result":"array | object"},"value":["literal",["DIN Offc Pro Italic","Arial Unicode MS Regular"]]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"array":{"doc":"Asserts that the input is an array (optionally with a specific item type and length). If, when the input expression is evaluated, it is not of the asserted type, then this assertion will cause the whole expression to be aborted.","example":{"syntax":{"method":["value","string?","number?"],"result":"array"},"value":["array",["literal",["a","b","c"]],"string",3]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"at":{"doc":"Retrieves an item from an array.","example":{"syntax":{"method":["number","value"],"result":"value"},"value":["at",1,["literal",["a","b","c"]]]},"group":"Lookup","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"in":{"doc":"Determines whether an item exists in an array or a substring exists in a string.\\n\\n - [Measure distances](https://maplibre.org/maplibre-gl-js/docs/examples/measure/)","example":{"syntax":{"method":["value","value"],"result":"boolean"},"value":["in","$type","Point"]},"group":"Lookup","sdk-support":{"basic functionality":{"js":"1.6.0","android":"9.1.0","ios":"5.8.0"}}},"index-of":{"doc":"Returns the first position at which an item can be found in an array or a substring can be found in a string, or `-1` if the input cannot be found. Accepts an optional index from where to begin the search. In a string, a UTF-16 surrogate pair counts as a single position.","example":{"syntax":{"method":["value","value","number?"],"result":"number"},"value":["index-of","foo",["baz","bar","hello","foo","world"]]},"group":"Lookup","sdk-support":{"basic functionality":{"js":"1.10.0","android":"10.3.0","ios":"6.0.0"}}},"slice":{"doc":"Returns an item from an array or a substring from a string from a specified start index, or between a start index and an end index if set. The return value is inclusive of the start index but not of the end index. In a string, a UTF-16 surrogate pair counts as a single position.","example":{"syntax":{"method":["value","number","number?"],"result":"value"},"value":["slice",["get","name"],0,3]},"group":"Lookup","sdk-support":{"basic functionality":{"js":"1.10.0","android":"10.3.0","ios":"6.0.0"}}},"case":{"doc":"Selects the first output whose corresponding test condition evaluates to true, or the fallback value otherwise.\\n\\n - [Create a hover effect](https://maplibre.org/maplibre-gl-js/docs/examples/hover-styles/)\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/cluster-html/)","example":{"syntax":{"method":["value","value","...","fallback: value"],"result":"value"},"value":["case",["boolean",["feature-state","hover"],false],1,0.5]},"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"match":{"doc":"Selects the output whose label value matches the input value, or the fallback value if no match is found. The input can be any expression (e.g. `[\\"get\\", \\"building_type\\"]`). Each label must be either:\\n\\n - a single literal value; or\\n\\n - an array of literal values, whose values must be all strings or all numbers (e.g. `[100, 101]` or `[\\"c\\", \\"b\\"]`). The input matches if any of the values in the array matches, similar to the `\\"in\\"` operator.\\n\\nEach label must be unique. If the input type does not match the type of the labels, the result will be the fallback value.","example":{"syntax":{"method":["value","value","...","fallback: value"],"result":"value"},"value":["match",["get","building_type"],"residential","#f00","commercial","#0f0","#000"]},"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"coalesce":{"doc":"Evaluates each expression in turn until the first non-null value is obtained, and returns that value.\\n\\n - [Use a fallback image](https://maplibre.org/maplibre-gl-js/docs/examples/fallback-image/)","example":{"syntax":{"method":["coalesce","value","fallback"],"result":"value"},"value":["coalesce",["image",["concat",["get","icon"],"_15"]],["image","marker_15"]]},"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"step":{"doc":"Produces discrete, stepped results by evaluating a piecewise-constant function defined by pairs of input and output values (\\"stops\\"). The `input` may be any numeric expression (e.g., `[\\"get\\", \\"population\\"]`). Stop inputs must be numeric literals in strictly ascending order. Returns the output value of the stop just less than the input, or the first output if the input is less than the first stop.\\n\\n - [Create and style clusters](https://maplibre.org/maplibre-gl-js/docs/examples/cluster/)","example":{"syntax":{"method":["step","number","number","number","..."],"result":"number"},"value":["step",["get","point_count"],20,100,30,750,40]},"group":"Ramps, scales, curves","sdk-support":{"basic functionality":{"js":"0.42.0","android":"6.0.0","ios":"4.0.0"}}},"interpolate":{"doc":"Produces continuous, smooth results by interpolating between pairs of input and output values (\\"stops\\"). The `input` may be any numeric expression (e.g., `[\\"get\\", \\"population\\"]`). Stop inputs must be numeric literals in strictly ascending order. The output type must be `number`, `array<number>`, or `color`.\\n\\nInterpolation types:\\n\\n- `[\\"linear\\"]`, or an expression returning one of those types: Interpolates linearly between the pair of stops just less than and just greater than the input.\\n\\n- `[\\"exponential\\", base]`: Interpolates exponentially between the stops just less than and just greater than the input. `base` controls the rate at which the output increases: higher values make the output increase more towards the high end of the range. With values close to 1 the output increases linearly.\\n\\n- `[\\"cubic-bezier\\", x1, y1, x2, y2]`: Interpolates using the cubic bezier curve defined by the given control points.\\n\\n - [Animate map camera around a point](https://maplibre.org/maplibre-gl-js/docs/examples/animate-camera-around-point/)\\n\\n - [Change building color based on zoom level](https://maplibre.org/maplibre-gl-js/docs/examples/change-building-color-based-on-zoom-level/)\\n\\n - [Create a heatmap layer](https://maplibre.org/maplibre-gl-js/docs/examples/heatmap-layer/)\\n\\n - [Visualize population density](https://maplibre.org/maplibre-gl-js/docs/examples/visualize-population-density/)","example":{"syntax":{"method":["[\\"linear\\"] | [\\"exponential\\", base] | [\\"cubic-bezier\\", x1, y1, x2, y2]","number","number","number","..."],"result":"number | array<number> | color"},"value":["interpolate",["linear"],["zoom"],15,0,15.05,["get","height"]]},"group":"Ramps, scales, curves","sdk-support":{"basic functionality":{"js":"0.42.0","android":"6.0.0","ios":"4.0.0"}}},"interpolate-hcl":{"doc":"Produces continuous, smooth results by interpolating between pairs of input and output values (\\"stops\\"). Works like `interpolate`, but the output type must be `color`, and the interpolation is performed in the Hue-Chroma-Luminance color space.","example":{"syntax":{"method":["[\\"linear\\"] | [\\"exponential\\", base] | [\\"cubic-bezier\\", x1, y1, x2, y2]","number","number","number","..."],"result":"color"},"value":["interpolate-hcl",["linear"],["zoom"],15,"#f00",15.05,"#00f"]},"group":"Ramps, scales, curves","sdk-support":{"basic functionality":{"js":"0.49.0","ios":"https://github.com/maplibre/maplibre-native/issues/2784","android":"https://github.com/maplibre/maplibre-native/issues/2784"}}},"interpolate-lab":{"doc":"Produces continuous, smooth results by interpolating between pairs of input and output values (\\"stops\\"). Works like `interpolate`, but the output type must be `color`, and the interpolation is performed in the CIELAB color space.","example":{"syntax":{"method":["[\\"linear\\"] | [\\"exponential\\", base] | [\\"cubic-bezier\\", x1, y1, x2, y2]","number","number","number","..."],"result":"color"},"value":["interpolate-lab",["linear"],["zoom"],15,"#f00",15.05,"#00f"]},"group":"Ramps, scales, curves","sdk-support":{"basic functionality":{"js":"0.49.0","ios":"https://github.com/maplibre/maplibre-native/issues/2784","android":"https://github.com/maplibre/maplibre-native/issues/2784"}}},"ln2":{"doc":"Returns mathematical constant ln(2).","example":{"syntax":{"method":[],"result":"number"},"value":["ln2"]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"pi":{"doc":"Returns the mathematical constant pi.","example":{"syntax":{"method":[],"result":"number"},"value":["pi"]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"e":{"doc":"Returns the mathematical constant e.","example":{"syntax":{"method":[],"result":"number"},"value":["e"]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"typeof":{"doc":"Returns a string describing the type of the given value.","example":{"syntax":{"method":["value"],"result":"string"},"value":["typeof",["get","name"]]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"string":{"doc":"Asserts that the input value is a string. If multiple values are provided, each one is evaluated in order until a string is obtained. If none of the inputs are strings, the expression is an error.","example":{"syntax":{"method":["value","fallback: value","fallback: value","..."],"result":"string"},"value":["string",["get","name"]]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"number":{"doc":"Asserts that the input value is a number. If multiple values are provided, each one is evaluated in order until a number is obtained. If none of the inputs are numbers, the expression is an error.","example":{"syntax":{"method":["value","fallback: value","fallback: value","..."],"result":"number"},"value":["number",["get","population"]]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"boolean":{"doc":"Asserts that the input value is a boolean. If multiple values are provided, each one is evaluated in order until a boolean is obtained. If none of the inputs are booleans, the expression is an error.\\n\\n - [Create a hover effect](https://maplibre.org/maplibre-gl-js/docs/examples/hover-styles/)","example":{"syntax":{"method":["value","fallback: value","fallback: value","..."],"result":"boolean"},"value":["boolean",["feature-state","hover"],false]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"object":{"doc":"Asserts that the input value is an object. If multiple values are provided, each one is evaluated in order until an object is obtained. If none of the inputs are objects, the expression is an error.","example":{"syntax":{"method":["value","fallback: value","fallback: value","..."],"result":"object"},"value":["object",["get","some-property"]]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"collator":{"doc":"Returns a `collator` for use in locale-dependent comparison operations. The `case-sensitive` and `diacritic-sensitive` options default to `false`. The `locale` argument specifies the IETF language tag of the locale to use. If none is provided, the default locale is used. If the requested locale is not available, the `collator` will use a system-defined fallback locale. Use `resolved-locale` to test the results of locale fallback behavior.","example":{"syntax":{"method":["collator","{ \\"case-sensitive\\": boolean, \\"diacritic-sensitive\\": boolean, \\"locale\\": string }"],"result":"collator"},"value":["collator",{"case-sensitive":true,"diacritic-sensitive":true,"locale":"fr"}]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},"format":{"doc":"Returns a `formatted` string for displaying mixed-format text in the `text-field` property. The input may contain a string literal or expression, including an [`\'image\'`](#image) expression. Strings may be followed by a style override object that supports the following properties:\\n\\n- `\\"text-font\\"`: Overrides the font stack specified by the root layout property.\\n\\n- `\\"text-color\\"`: Overrides the color specified by the root paint property.\\n\\n- `\\"font-scale\\"`: Applies a scaling factor on `text-size` as specified by the root layout property.\\n\\n- `\\"vertical-align\\"`: Aligns vertically text section or image in relation to the row it belongs to. Possible values are: \\n\\t- `\\"bottom\\"` *default*: align the bottom of this section with the bottom of other sections.\\n<img alt=\\"Visual representation of bottom alignment\\" src=\\"https://github.com/user-attachments/assets/0474a2fd-a4b2-417c-9187-7a13a28695bc\\"/>\\n\\t- `\\"center\\"`: align the center of this section with the center of other sections.\\n<img alt=\\"Visual representation of center alignment\\" src=\\"https://github.com/user-attachments/assets/92237455-be6d-4c5d-b8f6-8127effc1950\\"/>\\n\\t- `\\"top\\"`: align the top of this section with the top of other sections.\\n<img alt=\\"Visual representation of top alignment\\" src=\\"https://github.com/user-attachments/assets/45dccb28-d977-4abb-a006-4ea9792b7c53\\"/>\\n\\t- Refer to [the design proposal](https://github.com/maplibre/maplibre-style-spec/issues/832) for more details.\\n\\n - [Change the case of labels](https://maplibre.org/maplibre-gl-js/docs/examples/change-case-of-labels/)\\n\\n - [Display and style rich text labels](https://maplibre.org/maplibre-gl-js/docs/examples/display-and-style-rich-text-labels/)","example":{"syntax":{"method":["value","{ \\"text-font\\": string, \\"text-color\\": color, \\"font-scale\\": number, \\"vertical-align\\": \\"bottom\\" | \\"center\\" | \\"top\\" }","..."],"result":"formatted"},"value":["format",["upcase",["get","FacilityName"]],{"font-scale":0.8},"\\n\\n",{},["downcase",["get","Comments"]],{"font-scale":0.6,"vertical-align":"center"}]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.48.0","android":"6.7.0","ios":"4.6.0"},"text-font":{"js":"0.48.0","android":"6.7.0","ios":"4.6.0"},"font-scale":{"js":"0.48.0","android":"6.7.0","ios":"4.6.0"},"text-color":{"js":"1.3.0","android":"7.3.0","ios":"4.10.0"},"vertical-align":{"js":"https://github.com/maplibre/maplibre-gl-js/issues/5043","android":"https://github.com/maplibre/maplibre-native/issues/3055","ios":"https://github.com/maplibre/maplibre-native/issues/3055"},"image":{"js":"1.6.0","android":"8.6.0","ios":"5.7.0"}}},"image":{"doc":"Returns an `image` type for use in `icon-image`, `*-pattern` entries and as a section in the `format` expression. If set, the `image` argument will check that the requested image exists in the style and will return either the resolved image name or `null`, depending on whether or not the image is currently in the style. This validation process is synchronous and requires the image to have been added to the style before requesting it in the `image` argument.\\n\\n - [Use a fallback image](https://maplibre.org/maplibre-gl-js/docs/examples/fallback-image/)","example":{"syntax":{"method":["value"],"result":"image"},"value":["image","marker_15"]},"group":"Types","sdk-support":{"basic functionality":{"js":"1.4.0","android":"8.6.0","ios":"5.7.0"}}},"number-format":{"doc":"Converts the input number into a string representation using the providing formatting rules. If set, the `locale` argument specifies the locale to use, as a BCP 47 language tag. If set, the `currency` argument specifies an ISO 4217 code to use for currency-style formatting. If set, the `min-fraction-digits` and `max-fraction-digits` arguments specify the minimum and maximum number of fractional digits to include.\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/cluster-html/)","example":{"syntax":{"method":["number","{ \\"locale\\": string, \\"currency\\": string, \\"min-fraction-digits\\": number, \\"max-fraction-digits\\": number }"],"result":"string"},"value":["number-format",["get","mag"],{"min-fraction-digits":1,"max-fraction-digits":1}]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.54.0","android":"8.4.0","ios":"supported"}}},"to-string":{"doc":"Converts the input value to a string. If the input is `null`, the result is `\\"\\"`. If the input is a boolean, the result is `\\"true\\"` or `\\"false\\"`. If the input is a number, it is converted to a string as specified by the [\\"NumberToString\\" algorithm](https://tc39.github.io/ecma262/#sec-tostring-applied-to-the-number-type) of the ECMAScript Language Specification. If the input is a color, it is converted to a string of the form `\\"rgba(r,g,b,a)\\"`, where `r`, `g`, and `b` are numerals ranging from 0 to 255, and `a` ranges from 0 to 1. Otherwise, the input is converted to a string in the format specified by the [`JSON.stringify`](https://tc39.github.io/ecma262/#sec-json.stringify) function of the ECMAScript Language Specification.\\n\\n - [Create a time slider](https://maplibre.org/maplibre-gl-js/docs/examples/timeline-animation/)","example":{"syntax":{"method":["value"],"result":"string"},"value":["to-string",["get","mag"]]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"to-number":{"doc":"Converts the input value to a number, if possible. If the input is `null` or `false`, the result is 0. If the input is `true`, the result is 1. If the input is a string, it is converted to a number as specified by the [\\"ToNumber Applied to the String Type\\" algorithm](https://tc39.github.io/ecma262/#sec-tonumber-applied-to-the-string-type) of the ECMAScript Language Specification. If multiple values are provided, each one is evaluated in order until the first successful conversion is obtained. If none of the inputs can be converted, the expression is an error.","example":{"syntax":{"method":["value","fallback: value","fallback: value","..."],"result":"number"},"value":["to-number","someProperty"]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"to-boolean":{"doc":"Converts the input value to a boolean. The result is `false` when then input is an empty string, 0, `false`, `null`, or `NaN`; otherwise it is `true`.","example":{"syntax":{"method":["value"],"result":"boolean"},"value":["to-boolean","someProperty"]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"to-rgba":{"doc":"Returns a four-element array containing the input color\'s red, green, blue, and alpha components, in that order.","example":{"syntax":{"method":["color"],"result":"array"},"value":["to-rgba","#ff0000"]},"group":"Color","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"to-color":{"doc":"Converts the input value to a color. If multiple values are provided, each one is evaluated in order until the first successful conversion is obtained. If none of the inputs can be converted, the expression is an error.\\n\\n - [Visualize population density](https://maplibre.org/maplibre-gl-js/docs/examples/visualize-population-density/)","example":{"syntax":{"method":["value","fallback: value","fallback: value","..."],"result":"color"},"value":["to-color","#edf8e9"]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"rgb":{"doc":"Creates a color value from red, green, and blue components, which must range between 0 and 255, and an alpha component of 1. If any component is out of range, the expression is an error.","example":{"syntax":{"method":["number","number","number"],"result":"color"},"value":["rgb",255,0,0]},"group":"Color","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"rgba":{"doc":"Creates a color value from red, green, blue components, which must range between 0 and 255, and an alpha component which must range between 0 and 1. If any component is out of range, the expression is an error.","example":{"syntax":{"method":["number","number","number","number"],"result":"color"},"value":["rgba",255,0,0,1]},"group":"Color","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"get":{"doc":"Retrieves a property value from the current feature\'s properties, or from another object if a second argument is provided. Returns null if the requested property is missing.\\n\\n - [Change the case of labels](https://maplibre.org/maplibre-gl-js/docs/examples/change-case-of-labels/)\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/cluster-html/)\\n\\n - [Extrude polygons for 3D indoor mapping](https://maplibre.org/maplibre-gl-js/docs/examples/3d-extrusion-floorplan/)","example":{"syntax":{"method":["string"],"result":"value"},"value":["get","someProperty"]},"group":"Lookup","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"has":{"doc":"Tests for the presence of an property value in the current feature\'s properties, or from another object if a second argument is provided.\\n\\n - [Create and style clusters](https://maplibre.org/maplibre-gl-js/docs/examples/cluster/)","example":{"syntax":{"method":["string"],"result":"boolean"},"value":["has","someProperty"]},"group":"Lookup","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"length":{"doc":"Gets the length of an array or string. In a string, a UTF-16 surrogate pair counts as a single position.","example":{"syntax":{"method":["array"],"result":"number"},"value":["length",["get","myArray"]]},"group":"Lookup","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"properties":{"doc":"Gets the feature properties object.  Note that in some cases, it may be more efficient to use [\\"get\\", \\"property_name\\"] directly.","example":{"syntax":{"method":[],"result":"value"},"value":["properties"]},"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"feature-state":{"doc":"Retrieves a property value from the current feature\'s state. Returns null if the requested property is not present on the feature\'s state. A feature\'s state is not part of the GeoJSON or vector tile data, and must be set programmatically on each feature. When `source.promoteId` is not provided, features are identified by their `id` attribute, which must be an integer or a string that can be cast to an integer. When `source.promoteId` is provided, features are identified by their `promoteId` property, which may be a number, string, or any primitive data type. Note that [\\"feature-state\\"] can only be used with paint properties that support data-driven styling.\\n\\n - [Create a hover effect](https://maplibre.org/maplibre-gl-js/docs/examples/hover-styles/)","example":{"syntax":{"method":["string"],"result":"value"},"value":["feature-state","hover"]},"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.46.0","ios":"https://github.com/maplibre/maplibre-native/issues/1698","android":"https://github.com/maplibre/maplibre-native/issues/1698"}}},"geometry-type":{"doc":"Returns the feature\'s simple geometry type: `Point`, `LineString`, or `Polygon`. `MultiPoint`, `MultiLineString`, and `MultiPolygon` are returned as `Point`, `LineString`, and `Polygon`, respectively.","example":{"syntax":{"method":[],"result":"string"},"value":["==",["geometry-type"],"Polygon"]},"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"id":{"doc":"Gets the feature\'s id, if it has one.","example":{"syntax":{"method":[],"result":"value"},"value":["id"]},"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"zoom":{"doc":"Gets the current zoom level.  Note that in style layout and paint properties, [\\"zoom\\"] may only appear as the input to a top-level \\"step\\" or \\"interpolate\\" expression.","example":{"syntax":{"method":[],"result":"number"},"value":["interpolate",["linear"],["zoom"],15,0,15.05,["get","height"]]},"group":"Zoom","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"heatmap-density":{"doc":"Gets the kernel density estimation of a pixel in a heatmap layer, which is a relative measure of how many data points are crowded around a particular pixel. Can only be used in the `heatmap-color` property.","example":{"syntax":{"method":[],"result":"number"},"value":["heatmap-density"]},"group":"Heatmap","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"line-progress":{"doc":"Gets the progress along a gradient line. Can only be used in the `line-gradient` property.","example":{"syntax":{"method":["number"],"result":"number"},"value":["line-progress",0.5]},"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.5.0","ios":"4.6.0"}}},"accumulated":{"doc":"Gets the value of a cluster property accumulated so far. Can only be used in the `clusterProperties` option of a clustered GeoJSON source.","example":{"syntax":{"method":["string"],"result":"value"},"value":["accumulated","sum"]},"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.53.0","ios":"supported","android":"supported"}}},"+":{"doc":"Returns the sum of the inputs.","example":{"syntax":{"method":["number","number","..."],"result":"number"},"value":["+",2,3]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"*":{"doc":"Returns the product of the inputs.","example":{"syntax":{"method":["number","number","..."],"result":"number"},"value":["*",2,3]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"-":{"doc":"For two inputs, returns the result of subtracting the second input from the first. For a single input, returns the result of subtracting it from 0.","example":{"syntax":{"method":["number","number?"],"result":"number"},"value":["-",10]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"/":{"doc":"Returns the result of floating point division of the first input by the second.\\n\\n - [Visualize population density](https://maplibre.org/maplibre-gl-js/docs/examples/visualize-population-density/)","example":{"syntax":{"method":["number","number"],"result":"number"},"value":["/",["get","population"],["get","sq-km"]]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"%":{"doc":"Returns the remainder after integer division of the first input by the second.","example":{"syntax":{"method":["number","number"],"result":"number"},"value":["%",10,3]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"^":{"doc":"Returns the result of raising the first input to the power specified by the second.","example":{"syntax":{"method":["number","number"],"result":"number"},"value":["^",2,3]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"sqrt":{"doc":"Returns the square root of the input.","example":{"syntax":{"method":["number"],"result":"number"},"value":["sqrt",9]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.42.0","android":"6.0.0","ios":"4.0.0"}}},"log10":{"doc":"Returns the base-ten logarithm of the input.","example":{"syntax":{"method":["number"],"result":"number"},"value":["log10",8]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"ln":{"doc":"Returns the natural logarithm of the input.","example":{"syntax":{"method":["number"],"result":"number"},"value":["ln",8]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"log2":{"doc":"Returns the base-two logarithm of the input.","example":{"syntax":{"method":["number"],"result":"number"},"value":["log2",8]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"sin":{"doc":"Returns the sine of the input.","example":{"syntax":{"method":["number"],"result":"number"},"value":["sin",1]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"cos":{"doc":"Returns the cosine of the input.","example":{"syntax":{"method":["number"],"result":"number"},"value":["cos",1]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"tan":{"doc":"Returns the tangent of the input.","example":{"syntax":{"method":["number"],"result":"number"},"value":["tan",1]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"asin":{"doc":"Returns the arcsine of the input.","example":{"syntax":{"method":["number"],"result":"number"},"value":["asin",1]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"acos":{"doc":"Returns the arccosine of the input.","example":{"syntax":{"method":["number"],"result":"number"},"value":["acos",1]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"atan":{"doc":"Returns the arctangent of the input.","example":{"syntax":{"method":["number"],"result":"number"},"value":["atan",1]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"min":{"doc":"Returns the minimum value of the inputs.","example":{"syntax":{"method":["number","number","..."],"result":"number"},"value":["min",1,2]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"max":{"doc":"Returns the maximum value of the inputs.","example":{"syntax":{"method":["number","number","..."],"result":"number"},"value":["max",1,2]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"round":{"doc":"Rounds the input to the nearest integer. Halfway values are rounded away from zero. For example, `[\\"round\\", -1.5]` evaluates to -2.","example":{"syntax":{"method":["number"],"result":"number"},"value":["round",1.5]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.0.0","ios":"4.0.0"}}},"abs":{"doc":"Returns the absolute value of the input.","example":{"syntax":{"method":["number"],"result":"number"},"value":["abs",-1.5]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.0.0","ios":"4.0.0"}}},"ceil":{"doc":"Returns the smallest integer that is greater than or equal to the input.","example":{"syntax":{"method":["number"],"result":"number"},"value":["ceil",1.5]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.0.0","ios":"4.0.0"}}},"floor":{"doc":"Returns the largest integer that is less than or equal to the input.","example":{"syntax":{"method":["number"],"result":"number"},"value":["floor",1.5]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.0.0","ios":"4.0.0"}}},"distance":{"doc":"Returns the shortest distance in meters between the evaluated feature and the input geometry. The input value can be a valid GeoJSON of type `Point`, `MultiPoint`, `LineString`, `MultiLineString`, `Polygon`, `MultiPolygon`, `Feature`, or `FeatureCollection`. Distance values returned may vary in precision due to loss in precision from encoding geometries, particularly below zoom level 13.","example":{"syntax":{"method":["GeoJSON geometry"],"result":"number"},"value":["distance",{"type":"Point","coordinates":[0,0]}]},"group":"Math","sdk-support":{"basic functionality":{"js":"4.2.0","android":"9.2.0","ios":"5.9.0"}}},"==":{"doc":"Returns `true` if the input values are equal, `false` otherwise. The comparison is strictly typed: values of different runtime types are always considered unequal. Cases where the types are known to be different at parse time are considered invalid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.\\n\\n - [Add multiple geometries from one GeoJSON source](https://maplibre.org/maplibre-gl-js/docs/examples/multiple-geometries/)\\n\\n - [Create a time slider](https://maplibre.org/maplibre-gl-js/docs/examples/timeline-animation/)\\n\\n - [Display buildings in 3D](https://maplibre.org/maplibre-gl-js/docs/examples/3d-buildings/)\\n\\n - [Filter symbols by toggling a list](https://maplibre.org/maplibre-gl-js/docs/examples/filter-markers/)","example":{"syntax":{"method":["value","value","collator?"],"result":"boolean"},"value":["==","$type","Polygon"]},"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},"!=":{"doc":"Returns `true` if the input values are not equal, `false` otherwise. The comparison is strictly typed: values of different runtime types are always considered unequal. Cases where the types are known to be different at parse time are considered invalid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/cluster-html/)","example":{"syntax":{"method":["value","value","collator?"],"result":"boolean"},"value":["!=","cluster",true]},"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},">":{"doc":"Returns `true` if the first input is strictly greater than the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.","example":{"syntax":{"method":["value","value","collator?"],"result":"boolean"},"value":[">",["get","mag"],2]},"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},"<":{"doc":"Returns `true` if the first input is strictly less than the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/cluster-html/)","example":{"syntax":{"method":["value","value","collator?"],"result":"boolean"},"value":["<",["get","mag"],2]},"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},">=":{"doc":"Returns `true` if the first input is greater than or equal to the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/cluster-html/)","example":{"syntax":{"method":["value","value","collator?"],"result":"boolean"},"value":[">=",["get","mag"],6]},"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},"<=":{"doc":"Returns `true` if the first input is less than or equal to the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.","example":{"syntax":{"method":["value","value","collator?"],"result":"boolean"},"value":["<=",["get","mag"],6]},"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},"all":{"doc":"Returns `true` if all the inputs are `true`, `false` otherwise. The inputs are evaluated in order, and evaluation is short-circuiting: once an input expression evaluates to `false`, the result is `false` and no further input expressions are evaluated.\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/cluster-html/)","example":{"syntax":{"method":["boolean","boolean","..."],"result":"boolean"},"value":["all",[">=",["get","mag"],4],["<",["get","mag"],5]]},"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"any":{"doc":"Returns `true` if any of the inputs are `true`, `false` otherwise. The inputs are evaluated in order, and evaluation is short-circuiting: once an input expression evaluates to `true`, the result is `true` and no further input expressions are evaluated.","example":{"syntax":{"method":["boolean","boolean","..."],"result":"boolean"},"value":["any",[">=",["get","mag"],4],["<",["get","mag"],5]]},"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"!":{"doc":"Logical negation. Returns `true` if the input is `false`, and `false` if the input is `true`.\\n\\n - [Create and style clusters](https://maplibre.org/maplibre-gl-js/docs/examples/cluster/)","example":{"syntax":{"method":["value","value","collator?"],"result":"boolean"},"value":["!",["has","point_count"]]},"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"within":{"doc":"Returns `true` if the evaluated feature is fully contained inside a boundary of the input geometry, `false` otherwise. The input value can be a valid GeoJSON of type `Polygon`, `MultiPolygon`, `Feature`, or `FeatureCollection`. Supported features for evaluation:\\n\\n- `Point`: Returns `false` if a point is on the boundary or falls outside the boundary.\\n\\n- `LineString`: Returns `false` if any part of a line falls outside the boundary, the line intersects the boundary, or a line\'s endpoint is on the boundary.","example":{"syntax":{"method":["GeoJSON geometry"],"result":"boolean"},"value":["within",{"type":"Polygon","coordinates":[[[0,0],[0,5],[5,5],[5,0],[0,0]]]}]},"group":"Decision","sdk-support":{"basic functionality":{"js":"1.9.0","android":"9.1.0","ios":"5.8.0"}}},"is-supported-script":{"doc":"Returns `true` if the input string is expected to render legibly. Returns `false` if the input string contains sections that cannot be rendered without potential loss of meaning (e.g. Indic scripts that require complex text shaping, or right-to-left scripts if the `mapbox-gl-rtl-text` plugin is not in use in MapLibre GL JS).","example":{"syntax":{"method":["string"],"result":"boolean"},"value":["is-supported-script",""]},"group":"String","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.6.0","ios":"supported"}}},"upcase":{"doc":"Returns the input string converted to uppercase. Follows the Unicode Default Case Conversion algorithm and the locale-insensitive case mappings in the Unicode Character Database.\\n\\n - [Change the case of labels](https://maplibre.org/maplibre-gl-js/docs/examples/change-case-of-labels/)","example":{"syntax":{"method":["string"],"result":"string"},"value":["upcase",["get","name"]]},"group":"String","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"downcase":{"doc":"Returns the input string converted to lowercase. Follows the Unicode Default Case Conversion algorithm and the locale-insensitive case mappings in the Unicode Character Database.\\n\\n - [Change the case of labels](https://maplibre.org/maplibre-gl-js/docs/examples/change-case-of-labels/)","example":{"syntax":{"method":["string"],"result":"string"},"value":["downcase",["get","name"]]},"group":"String","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"concat":{"doc":"Returns a `string` consisting of the concatenation of the inputs. Each input is converted to a string as if by `to-string`.\\n\\n - [Add a generated icon to the map](https://maplibre.org/maplibre-gl-js/docs/examples/add-image-missing-generated/)\\n\\n - [Create a time slider](https://maplibre.org/maplibre-gl-js/docs/examples/timeline-animation/)\\n\\n - [Use a fallback image](https://maplibre.org/maplibre-gl-js/docs/examples/fallback-image/)\\n\\n - [Variable label placement](https://maplibre.org/maplibre-gl-js/docs/examples/variable-label-placement/)","example":{"syntax":{"method":["string","string","..."],"result":"string"},"value":["concat","square-rgb-",["get","color"]]},"group":"String","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"resolved-locale":{"doc":"Returns the IETF language tag of the locale being used by the provided `collator`. This can be used to determine the default system locale, or to determine if a requested locale was successfully loaded.","example":{"syntax":{"method":["collator"],"result":"string"},"value":["resolved-locale",["collator",{"case-sensitive":true,"diacritic-sensitive":false,"locale":"de"}]]},"group":"String","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}}}}'),jre={anchor:{type:"enum",default:"viewport",values:{map:{doc:"The position of the light source is aligned to the rotation of the map."},viewport:{doc:"The position of the light source is aligned to the rotation of the viewport."}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]},doc:"Whether extruded geometries are lit relative to the map or viewport.",example:"map","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},doc:"Position of the light source relative to lit (extruded) geometries, in [r radial coordinate, a azimuthal angle, p polar angle] where r indicates the distance from the center of the base of an object to its light, a indicates the position of the light relative to 0 (0 when `light.anchor` is set to `viewport` corresponds to the top of the viewport, or 0 when `light.anchor` is set to `map` corresponds to due north, and degrees proceed clockwise), and p indicates the height of the light (from 0, directly above, to 180, directly below).",example:[1.5,90,80],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Color tint for lighting extruded geometries.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Intensity of lighting (on a scale from 0 to 1). Higher numbers will present as more extreme contrast.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}}},Nre={"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The base color for the sky."},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The base color at the horizon."},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The base color for the fog. Requires 3D terrain."},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"How to blend the fog over the 3D terrain. Where 0 is the map center and 1 is the horizon."},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"How to blend the fog color and the horizon color. Where 0 is using the horizon color only and 1 is using the fog color only."},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"How to blend the sky color and the horizon color. Where 1 is blending the color at the middle of the sky and 0 is not blending at all and using the sky color only."},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"How to blend the atmosphere. Where 1 is visible atmosphere and 0 is hidden. It is best to interpolate this expression when using globe projection."}},Wre={source:{type:"string",doc:"The source for the terrain data.",required:!0,"sdk-support":{"basic functionality":{js:"2.2.0",ios:"https://github.com/maplibre/maplibre-native/issues/252",android:"https://github.com/maplibre/maplibre-native/issues/252"}}},exaggeration:{type:"number",minimum:0,doc:"The exaggeration of the terrain - how high it will look.",default:1,"sdk-support":{"basic functionality":{js:"2.2.0",ios:"https://github.com/maplibre/maplibre-native/issues/252",android:"https://github.com/maplibre/maplibre-native/issues/252"}}}},Gre={type:{type:"projectionDefinition",doc:"The projection definition type. Can be specified as a string, a transition state, or an expression.",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},Qre=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],Yre={"fill-antialias":{type:"boolean",default:!0,doc:"Whether or not the fill should be antialiased.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire fill layer. In contrast to the `fill-color`, this value will also affect the 1px stroke around the fill, if the stroke is used.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.21.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",doc:"The color of the filled part of this layer. This color can be specified as `rgba` with an alpha component and the color's opacity will not affect the opacity of the 1px stroke, if it is used.",transition:!0,requires:[{"!":"fill-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.19.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",doc:"The outline color of the fill. Matches the value of `fill-color` if unspecified.",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.19.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{doc:"The fill is translated relative to the map."},viewport:{doc:"The fill is translated relative to the viewport."}},doc:"Controls the frame of reference for `fill-translate`.",default:"map",requires:["fill-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing image fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},qre={"line-opacity":{type:"number",doc:"The opacity at which the line will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",doc:"The color with which the line will be drawn.",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.23.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{doc:"The line is translated relative to the map."},viewport:{doc:"The line is translated relative to the viewport."}},doc:"Controls the frame of reference for `line-translate`.",default:"map",requires:["line-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",doc:"Stroke thickness.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,doc:"Draws a line casing outside of a line's actual path. Value indicates the width of the inner gap.",transition:!0,units:"pixels","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,doc:"The line's offset. For linear features, a positive value offsets the line to the right, relative to the direction of the line, and a negative value to the left. For polygon features, a positive value results in an inset, and a negative value results in an outset.",transition:!0,units:"pixels","sdk-support":{"basic functionality":{js:"0.12.1",android:"3.0.0",ios:"3.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Blur applied to the line, in pixels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",doc:"Specifies the lengths of the alternating dashes and gaps that form the dash pattern. The lengths are later scaled by the line width. To convert a dash length to pixels, multiply the length by the current line width. Note that GeoJSON sources with `lineMetrics: true` specified won't render dashed lines to the expected scale. Also note that zoom-dependent expressions will be evaluated only at integer zoom levels.",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"https://github.com/maplibre/maplibre-gl-js/issues/1235",ios:"https://github.com/maplibre/maplibre-native/issues/744",android:"https://github.com/maplibre/maplibre-native/issues/744"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing image lines. For seamless patterns, image width must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",doc:'Defines a gradient with which to color a line feature. Can only be used with GeoJSON sources that specify `"lineMetrics": true`.',transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],"sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.4.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},Vre={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",doc:"Circle radius.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.18.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",doc:"The fill color of the circle.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.18.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,doc:"Amount to blur the circle. 1 blurs the circle such that only the centerpoint is full opacity.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.20.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",doc:"The opacity at which the circle will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.20.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{doc:"The circle is translated relative to the map."},viewport:{doc:"The circle is translated relative to the viewport."}},doc:"Controls the frame of reference for `circle-translate`.",default:"map",requires:["circle-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{doc:"Circles are scaled according to their apparent distance to the camera."},viewport:{doc:"Circles are not scaled."}},default:"map",doc:"Controls the scaling behavior of the circle when the map is pitched.","sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{doc:"The circle is aligned to the plane of the map."},viewport:{doc:"The circle is aligned to the plane of the viewport."}},default:"viewport",doc:"Orientation of circle when map is pitched.","sdk-support":{"basic functionality":{js:"0.39.0",android:"5.2.0",ios:"3.7.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"The width of the circle's stroke. Strokes are placed outside of the `circle-radius`.","sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",doc:"The stroke color of the circle.",transition:!0,"sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",doc:"The opacity of the circle's stroke.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},$re={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",doc:"Radius of influence of one heatmap point in pixels. Increasing the value makes the heatmap smoother, but less detailed.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"},"data-driven styling":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,doc:"A measure of how much an individual point contributes to the heatmap. A value of 10 would be equivalent to having 10 points of weight 1 in the same spot. Especially useful when combined with clustering.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"},"data-driven styling":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,doc:"Similar to `heatmap-weight` but controls the intensity of the heatmap globally. Primarily used for adjusting the heatmap based on zoom level.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],doc:'Defines the color of each pixel based on its density value in a heatmap.  Should be an expression that uses `["heatmap-density"]` as input.',transition:!1,"sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",doc:"The global opacity at which the heatmap layer will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Hre={"icon-opacity":{doc:"The opacity at which the icon will be drawn.",type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,doc:"The color of the icon. This can only be used with SDF icons.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,doc:"The color of the icon's halo. Icon halos can only be used with SDF icons.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Distance of halo to the icon outline. \n\nThe unit is in pixels only for SDF sprites that were created with a blur radius of 8, multiplied by the display density. I.e., the radius needs to be 16 for `@2x` sprites, etc.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Fade out the halo towards the outside.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"Distance that the icon's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{doc:"Icons are translated relative to the map."},viewport:{doc:"Icons are translated relative to the viewport."}},doc:"Controls the frame of reference for `icon-translate`.",default:"map",requires:["icon-image","icon-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",doc:"The opacity at which the text will be drawn.",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",doc:"The color with which the text will be drawn.",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,doc:"The color of the text's halo, which helps it stand out from backgrounds.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Distance of halo to the font outline. Max text halo width is 1/4 of the font-size.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"The halo's fadeout distance towards the outside.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"Distance that the text's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{doc:"The text is translated relative to the map."},viewport:{doc:"The text is translated relative to the viewport."}},doc:"Controls the frame of reference for `text-translate`.",default:"map",requires:["text-field","text-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},Zre={"raster-opacity":{type:"number",doc:"The opacity at which the image will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",doc:"Rotates hues around the color wheel.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",doc:"Increase or reduce the brightness of the image. The value is the minimum brightness.",default:0,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",doc:"Increase or reduce the brightness of the image. The value is the maximum brightness.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",doc:"Increase or reduce the saturation of the image.",default:0,minimum:-1,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",doc:"Increase or reduce the contrast of the image.",default:0,minimum:-1,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",doc:"The resampling/interpolation method to use for overscaling, also known as texture magnification filter",values:{linear:{doc:"(Bi)linear filtering interpolates pixel values using the weighted average of the four closest original source pixels creating a smooth but blurry look when overscaled"},nearest:{doc:"Nearest neighbor filtering interpolates pixel values using the nearest original source pixel creating a sharp but pixelated look when overscaled"}},default:"linear","sdk-support":{"basic functionality":{js:"0.47.0",android:"6.3.0",ios:"4.2.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",doc:"Fade duration when a new tile is added, or when a video is started or its coordinates are updated.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Xre={"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,doc:"The direction of the light source used to generate the hillshading with 0 as the top of the viewport if `hillshade-illumination-anchor` is set to `viewport` and due north if `hillshade-illumination-anchor` is set to `map`.",transition:!1,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{doc:"The hillshade illumination is relative to the north direction."},viewport:{doc:"The hillshade illumination is relative to the top of the viewport."}},default:"viewport",doc:"Direction of light source when map is rotated.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",doc:"Intensity of the hillshade",default:.5,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",doc:"The shading color of areas that face away from the light source.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",doc:"The shading color of areas that faces towards the light source.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",doc:"The shading color used to accentuate rugged terrain like sharp cliffs and gorges.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Jre={"background-color":{type:"color",default:"#000000",doc:"The color with which the background will be drawn.",transition:!0,requires:[{"!":"background-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing an image background. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity at which the background will be drawn.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},eie={duration:{type:"number",default:300,minimum:0,units:"milliseconds",doc:"Time allotted for transitions to complete."},delay:{type:"number",default:0,minimum:0,units:"milliseconds",doc:"Length of time before a transition begins."}},tie={"*":{type:"string",doc:"A name of a feature property to use as ID for feature state."}},Xo={$version:pre,$root:mre,sources:gre,source:yre,source_vector:vre,source_raster:Cre,source_raster_dem:_re,source_geojson:bre,source_video:xre,source_image:Mre,layer:wre,layout:Sre,layout_background:Ere,layout_fill:Bre,layout_circle:Ore,layout_heatmap:Ire,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},"property-type":"constant"}},layout_line:kre,layout_symbol:Tre,layout_raster:Pre,layout_hillshade:Kre,filter:Rre,filter_operator:Dre,geometry_type:Fre,function:{expression:{type:"expression",doc:"An expression."},stops:{type:"array",doc:"An array of stops.",value:"function_stop"},base:{type:"number",default:1,minimum:0,doc:"The exponential base of the interpolation curve. It controls the rate at which the result increases. Higher values make the result increase more towards the high end of the range. With `1` the stops are interpolated linearly."},property:{type:"string",doc:"The name of a feature property to use as the function input.",default:"$zoom"},type:{type:"enum",values:{identity:{doc:"Return the input value as the output value."},exponential:{doc:"Generate an output by interpolating between stops just less than and just greater than the function input."},interval:{doc:"Return the output value of the stop just less than the function input."},categorical:{doc:"Return the output value of the stop equal to the function input."}},doc:"The interpolation strategy to use in function evaluation.",default:"exponential"},colorSpace:{type:"enum",values:{rgb:{doc:"Use the RGB color space to interpolate color values"},lab:{doc:"Use the LAB color space to interpolate color values."},hcl:{doc:"Use the HCL color space to interpolate color values, interpolating the Hue, Chroma, and Luminance channels individually."}},doc:"The color space in which colors interpolated. Interpolating colors in perceptual color spaces like LAB and HCL tend to produce color ramps that look more consistent and produce colors that can be differentiated more easily than those interpolated in RGB space.",default:"rgb"},default:{type:"*",required:!1,doc:`A value to serve as a fallback function result when a value isn't otherwise available. It is used in the following circumstances:

* In categorical functions, when the feature value does not match any of the stop domain values.

* In property and zoom-and-property functions, when a feature does not contain a value for the specified property.

* In identity functions, when the feature value is not valid for the style property (for example, if the function is being used for a \`circle-color\` property but the feature property value is not a string or not a valid color).

* In interval or exponential property and zoom-and-property functions, when the feature value is not numeric.

If no default is provided, the style property's default is used in these circumstances.`}},function_stop:Lre,expression:Ure,expression_name:zre,light:jre,sky:Nre,terrain:Wre,projection:Gre,paint:Qre,paint_fill:Yre,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire fill extrusion layer. This is rendered on a per-layer, not per-feature, basis, and data-driven styling is not available.",transition:!0,"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",doc:"The base color of the extruded fill. The extrusion's surfaces will be shaded differently based on this color in combination with the root `light` settings. If this color is specified as `rgba` with an alpha component, the alpha component will be ignored; use `fill-extrusion-opacity` to set layer opacity.",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up (on the flat plane), respectively.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{doc:"The fill extrusion is translated relative to the map."},viewport:{doc:"The fill extrusion is translated relative to the viewport."}},doc:"Controls the frame of reference for `fill-extrusion-translate`.",default:"map",requires:["fill-extrusion-translate"],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing images on extruded fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",doc:"The height with which to extrude this layer.",transition:!0,"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",doc:"The height with which to extrude the base of this layer. Must be less than or equal to `fill-extrusion-height`.",transition:!0,requires:["fill-extrusion-height"],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,doc:"Whether to apply a vertical gradient to the sides of a fill-extrusion layer. If true, sides will be shaded slightly darker farther down.",transition:!1,"sdk-support":{"basic functionality":{js:"0.50.0",ios:"4.7.0",android:"7.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:qre,paint_circle:Vre,paint_heatmap:$re,paint_symbol:Hre,paint_raster:Zre,paint_hillshade:Xre,paint_background:Jre,transition:eie,"property-type":{"data-driven":{type:"property-type",doc:"Property is interpolable and can be represented using a property expression."},"cross-faded":{type:"property-type",doc:"Property is non-interpolable; rather, its values will be cross-faded to smoothly transition between integer zooms."},"cross-faded-data-driven":{type:"property-type",doc:"Property is non-interpolable; rather, its values will be cross-faded to smoothly transition between integer zooms. It can be represented using a property expression."},"color-ramp":{type:"property-type",doc:"Property should be specified using a color ramp from which the output color can be sampled based on a property calculation."},"data-constant":{type:"property-type",doc:"Property is interpolable but cannot be represented using a property expression."},constant:{type:"property-type",doc:"Property is constant across all zoom levels and property values."}},promoteId:tie};function Ks(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldDocLabel.tsx",e="3158bd93bbefd1bd0e63d26617da070781685c25",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldDocLabel.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:6,column:17}},1:{start:{line:7,column:4},end:{line:9,column:6}},2:{start:{line:11,column:16},end:{line:19,column:3}},3:{start:{line:12,column:4},end:{line:18,column:7}},4:{start:{line:15,column:6},end:{line:17,column:7}},5:{start:{line:16,column:8},end:{line:16,column:48}},6:{start:{line:21,column:33},end:{line:21,column:43}},7:{start:{line:22,column:20},end:{line:22,column:35}},8:{start:{line:23,column:4},end:{line:42,column:5}},9:{start:{line:24,column:6},end:{line:37,column:14}},10:{start:{line:32,column:27},end:{line:32,column:61}},11:{start:{line:38,column:11},end:{line:42,column:5}},12:{start:{line:39,column:6},end:{line:39,column:174}},13:{start:{line:41,column:22},end:{line:41,column:37}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:21},end:{line:10,column:3}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:11,column:16},end:{line:11,column:17}},loc:{start:{line:11,column:26},end:{line:19,column:3}},line:11},2:{name:"(anonymous_2)",decl:{start:{line:14,column:7},end:{line:14,column:8}},loc:{start:{line:14,column:13},end:{line:18,column:5}},line:14},3:{name:"(anonymous_3)",decl:{start:{line:20,column:2},end:{line:20,column:3}},loc:{start:{line:20,column:11},end:{line:43,column:3}},line:20},4:{name:"(anonymous_4)",decl:{start:{line:32,column:21},end:{line:32,column:22}},loc:{start:{line:32,column:27},end:{line:32,column:61}},line:32}},branchMap:{0:{loc:{start:{line:15,column:6},end:{line:17,column:7}},type:"if",locations:[{start:{line:15,column:6},end:{line:17,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:15},1:{loc:{start:{line:22,column:20},end:{line:22,column:35}},type:"binary-expr",locations:[{start:{line:22,column:20},end:{line:22,column:29}},{start:{line:22,column:33},end:{line:22,column:35}}],line:22},2:{loc:{start:{line:23,column:4},end:{line:42,column:5}},type:"if",locations:[{start:{line:23,column:4},end:{line:42,column:5}},{start:{line:38,column:11},end:{line:42,column:5}}],line:23},3:{loc:{start:{line:30,column:26},end:{line:30,column:106}},type:"cond-expr",locations:[{start:{line:30,column:44},end:{line:30,column:74}},{start:{line:30,column:77},end:{line:30,column:106}}],line:30},4:{loc:{start:{line:31,column:67},end:{line:31,column:102}},type:"cond-expr",locations:[{start:{line:31,column:85},end:{line:31,column:91}},{start:{line:31,column:94},end:{line:31,column:102}}],line:31},5:{loc:{start:{line:34,column:22},end:{line:34,column:120}},type:"cond-expr",locations:[{start:{line:34,column:56},end:{line:34,column:79}},{start:{line:34,column:98},end:{line:34,column:120}}],line:34},6:{loc:{start:{line:38,column:11},end:{line:42,column:5}},type:"if",locations:[{start:{line:38,column:11},end:{line:42,column:5}},{start:{line:40,column:11},end:{line:42,column:5}}],line:38}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldDocLabel.tsx"],names:[],mappings:"AAuCQ,SASuB,KATvB;AAvCR,OAAO,WAAW;AAClB,SAAQ,eAAe,sBAAqB;AAc5C,qBAAqB,sBAAsB,MAAM,UAAkD;AAAA,EACjG,YAAa,OAA2B;AACtC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,MAAM;AAAA,IACR;AAAA,EACF;AAAA,EAEA,cAAc,CAAC,SAAkB;AAC/B,SAAK,SAAS;AAAA,MACZ;AAAA,IACF,GAAG,MAAM;AACP,UAAI,KAAK,MAAM,aAAa;AAC1B,aAAK,MAAM,YAAY,KAAK,MAAM,IAAI;AAAA,MACxC;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,OAAO,UAAS,IAAI,KAAK;AAChC,UAAM,EAAC,IAAG,IAAI,aAAa,CAAC;AAE5B,QAAI,KAAK;AACP,aAAO,oBAAC,WAAM,WAAU,wBACtB,+BAAC,SAAI,WAAU,uBACZ;AAAA;AAAA,QACA;AAAA,QACD;AAAA,UAAC;AAAA;AAAA,YACC,cAAY,KAAK,MAAM,OAAO,iCAAiC;AAAA,YAC/D,WAAW,4CAA4C,KAAK,MAAM,OAAO,SAAS,QAAQ;AAAA,YAC1F,SAAS,MAAM,KAAK,YAAY,CAAC,KAAK,MAAM,IAAI;AAAA,YAChD,eAAa,sBAAoB;AAAA,YAEhC,eAAK,MAAM,OAAO,oBAAC,kBAAe,IAAK,oBAAC,iBAAc;AAAA;AAAA,QACzD;AAAA,SACF,GACF;AAAA,IACF,WACS,OAAO;AACd,aAAO,oBAAC,WAAM,WAAU,wBACtB,8BAAC,SAAI,WAAU,uBACZ,iBACH,GACF;AAAA,IACF,OACK;AACH,0BAAC,SAAI;AAAA,IACP;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"3158bd93bbefd1bd0e63d26617da070781685c25"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Ks=function(){return l},l}Ks();class gO extends Xn.Component{constructor(t){Ks().f[0]++,Ks().s[0]++;super(t);Kn(this,"onToggleDoc",(Ks().s[2]++,t=>{Ks().f[1]++,Ks().s[3]++,this.setState({open:t},()=>{Ks().f[2]++,Ks().s[4]++,this.props.onToggleDoc?(Ks().b[0][0]++,Ks().s[5]++,this.props.onToggleDoc(this.state.open)):Ks().b[0][1]++})}));Ks().s[1]++,this.state={open:!1}}render(){Ks().f[3]++;const{label:t,fieldSpec:r}=(Ks().s[6]++,this.props),{doc:i}=(Ks().s[7]++,Ks().b[1][0]++,r||(Ks().b[1][1]++,{}));if(Ks().s[8]++,i)return Ks().b[2][0]++,Ks().s[9]++,ue.jsx("label",{className:"maputnik-doc-wrapper",children:ue.jsxs("div",{className:"maputnik-doc-target",children:[t,"",ue.jsx("button",{"aria-label":this.state.open?(Ks().b[3][0]++,"close property documentation"):(Ks().b[3][1]++,"open property documentation"),className:`maputnik-doc-button maputnik-doc-button--${this.state.open?(Ks().b[4][0]++,"open"):(Ks().b[4][1]++,"closed")}`,onClick:()=>(Ks().f[4]++,Ks().s[10]++,this.onToggleDoc(!this.state.open)),"data-wd-key":"field-doc-button-"+t,children:this.state.open?(Ks().b[5][0]++,ue.jsx(DV,{})):(Ks().b[5][1]++,ue.jsx(FV,{}))})]})});if(Ks().b[2][1]++,Ks().s[11]++,t)return Ks().b[6][0]++,Ks().s[12]++,ue.jsx("label",{className:"maputnik-doc-wrapper",children:ue.jsx("div",{className:"maputnik-doc-target",children:t})});Ks().b[6][1]++,Ks().s[13]++}}function ia(){var n="/home/runner/work/maputnik/maputnik/src/components/Doc.tsx",e="52a1547e724051448ae0a009c4c7c40d9bb9067f",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/Doc.tsx",statementMap:{0:{start:{line:3,column:16},end:{line:8,column:1}},1:{start:{line:11,column:26},end:{line:11,column:36}},2:{start:{line:12,column:52},end:{line:12,column:61}},3:{start:{line:13,column:23},end:{line:13,column:47}},4:{start:{line:14,column:25},end:{line:16,column:26}},5:{start:{line:17,column:4},end:{line:48,column:9}},6:{start:{line:21,column:10},end:{line:24,column:20}},7:{start:{line:31,column:12},end:{line:31,column:75}},8:{start:{line:35,column:10},end:{line:44,column:20}},9:{start:{line:38,column:14},end:{line:42,column:15}},10:{start:{line:39,column:16},end:{line:39,column:81}},11:{start:{line:41,column:16},end:{line:41,column:72}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:49,column:3}},line:10},1:{name:"(anonymous_1)",decl:{start:{line:20,column:119},end:{line:20,column:120}},loc:{start:{line:20,column:137},end:{line:25,column:9}},line:20},2:{name:"(anonymous_2)",decl:{start:{line:30,column:37},end:{line:30,column:38}},loc:{start:{line:30,column:49},end:{line:32,column:11}},line:30},3:{name:"(anonymous_3)",decl:{start:{line:34,column:80},end:{line:34,column:81}},loc:{start:{line:34,column:103},end:{line:45,column:9}},line:34},4:{name:"(anonymous_4)",decl:{start:{line:37,column:37},end:{line:37,column:38}},loc:{start:{line:37,column:44},end:{line:43,column:13}},line:37}},branchMap:{0:{loc:{start:{line:14,column:25},end:{line:16,column:26}},type:"binary-expr",locations:[{start:{line:14,column:25},end:{line:14,column:33}},{start:{line:16,column:4},end:{line:16,column:26}}],line:14},1:{loc:{start:{line:18,column:6},end:{line:26,column:10}},type:"binary-expr",locations:[{start:{line:18,column:6},end:{line:18,column:9}},{start:{line:18,column:29},end:{line:26,column:10}}],line:18},2:{loc:{start:{line:20,column:8},end:{line:25,column:13}},type:"binary-expr",locations:[{start:{line:20,column:8},end:{line:20,column:20}},{start:{line:20,column:40},end:{line:25,column:13}}],line:20},3:{loc:{start:{line:27,column:6},end:{line:46,column:13}},type:"binary-expr",locations:[{start:{line:27,column:6},end:{line:27,column:16}},{start:{line:27,column:36},end:{line:46,column:13}}],line:27},4:{loc:{start:{line:38,column:14},end:{line:42,column:15}},type:"if",locations:[{start:{line:38,column:14},end:{line:42,column:15}},{start:{line:40,column:21},end:{line:42,column:15}}],line:38},5:{loc:{start:{line:47,column:6},end:{line:47,column:215}},type:"binary-expr",locations:[{start:{line:47,column:6},end:{line:47,column:12}},{start:{line:47,column:16},end:{line:47,column:30}},{start:{line:47,column:50},end:{line:47,column:215}}],line:47}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/Doc.tsx"],names:[],mappings:"AAwCM,mBAGM,KAKQ,YARd;AAxCN,OAAO,WAAW;AAElB,MAAM,UAAU;AAAA,EACd,IAAI;AAAA,EACJ,SAAS;AAAA,EACT,KAAK;AAAA,EACL,OAAO;AACT;AAkBA,qBAAqB,YAAY,MAAM,UAAoB;AAAA,EACzD,SAAU;AACR,UAAM,EAAC,UAAS,IAAI,KAAK;AAEzB,UAAM,EAAC,KAAK,QAAQ,QAAQ,eAAc,IAAI;AAC9C,UAAM,aAAa,UAAU,aAAa;AAE1C,UAAM,eACJ,CAAC,CAAC;AAAA;AAAA,IAGF,CAAC,MAAM,QAAQ,MAAM;AAGvB,WACE,iCACG;AAAA,aACC,qBAAC,SAAI,WAAU,WACb;AAAA,4BAAC,SAAI,WAAU,gBAAe,eAAY,kBAAkB,eAAI;AAAA,QAC/D,gBACC,oBAAC,QAAG,WAAU,mBACX,iBAAO,QAAQ,MAAM,EAAE,IAAI,CAAC,CAAC,KAAK,KAAK,MAAM;AAC5C,iBACE,qBAAC,QACC;AAAA,gCAAC,UAAM,eAAK,UAAU,GAAG,GAAE;AAAA,YAC3B,oBAAC,SAAK,gBAAM,KAAI;AAAA,eAFT,GAGT;AAAA,QAEJ,CAAC,GACH;AAAA,SAEJ;AAAA,MAED,cACC,oBAAC,SAAI,WAAU,wBACb,+BAAC,WAAM,WAAU,+BACf;AAAA,4BAAC,WACC,+BAAC,QACC;AAAA,8BAAC,QAAG;AAAA,UACH,OAAO,OAAO,OAAO,EAAE,IAAI,YAAU;AACpC,mBAAO,oBAAC,QAAiB,oBAAT,MAAgB;AAAA,UAClC,CAAC;AAAA,WACH,GACF;AAAA,QACA,oBAAC,WACE,iBAAO,QAAQ,UAAU,EAAE,IAAI,CAAC,CAAC,KAAK,UAAU,MAAM;AACrD,iBACE,qBAAC,QACC;AAAA,gCAAC,QAAI,eAAI;AAAA,YACR,OAAO,KAAK,OAAO,EAAE,IAAI,CAAC,MAAM;AAC/B,kBAAI,OAAO,UAAU,eAAe,KAAK,YAAY,CAAC,GAAG;AACvD,uBAAO,oBAAC,QAAY,qBAAW,CAAyB,KAAxC,CAA0C;AAAA,cAC5D,OACK;AACH,uBAAO,oBAAC,QAAW,kBAAH,CAAK;AAAA,cACvB;AAAA,YACF,CAAC;AAAA,eATM,GAUT;AAAA,QAEJ,CAAC,GACH;AAAA,SACF,GACF;AAAA,MAED,UAAU,kBACT,oBAAC,SAAI,WAAU,uBACb,8BAAC,OAAE,MAAM,QAAS,QAAO,UAAS,KAAI,cAAc,0BAAe,GACrE;AAAA,OAEJ;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"52a1547e724051448ae0a009c4c7c40d9bb9067f"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return ia=function(){return l},l}ia();const _9=(ia().s[0]++,{js:"JS",android:"Android",ios:"iOS",macos:"macOS"});class yO extends Xn.Component{render(){ia().f[0]++;const{fieldSpec:e}=(ia().s[1]++,this.props),{doc:t,values:r,docUrl:i,docUrlLinkText:s}=(ia().s[2]++,e),l=(ia().s[3]++,e["sdk-support"]),o=(ia().s[4]++,ia().b[0][0]++,!!r&&(ia().b[0][1]++,!Array.isArray(r)));return ia().s[5]++,ue.jsxs(ue.Fragment,{children:[(ia().b[1][0]++,t&&(ia().b[1][1]++,ue.jsxs("div",{className:"SpecDoc",children:[ue.jsx("div",{className:"SpecDoc__doc","data-wd-key":"spec-field-doc",children:t}),(ia().b[2][0]++,o&&(ia().b[2][1]++,ue.jsx("ul",{className:"SpecDoc__values",children:Object.entries(r).map(([f,y])=>(ia().f[1]++,ia().s[6]++,ue.jsxs("li",{children:[ue.jsx("code",{children:JSON.stringify(f)}),ue.jsx("div",{children:y.doc})]},f)))})))]}))),(ia().b[3][0]++,l&&(ia().b[3][1]++,ue.jsx("div",{className:"SpecDoc__sdk-support",children:ue.jsxs("table",{className:"SpecDoc__sdk-support__table",children:[ue.jsx("thead",{children:ue.jsxs("tr",{children:[ue.jsx("th",{}),Object.values(_9).map(f=>(ia().f[2]++,ia().s[7]++,ue.jsx("th",{children:f},f)))]})}),ue.jsx("tbody",{children:Object.entries(l).map(([f,y])=>(ia().f[3]++,ia().s[8]++,ue.jsxs("tr",{children:[ue.jsx("td",{children:f}),Object.keys(_9).map(x=>(ia().f[4]++,ia().s[9]++,Object.prototype.hasOwnProperty.call(y,x)?(ia().b[4][0]++,ia().s[10]++,ue.jsx("td",{children:y[x]},x)):(ia().b[4][1]++,ia().s[11]++,ue.jsx("td",{children:"no"},x))))]},f)))})]})}))),(ia().b[5][0]++,i&&(ia().b[5][1]++,s)&&(ia().b[5][2]++,ue.jsx("div",{className:"SpecDoc__learn-more",children:ue.jsx("a",{href:i,target:"_blank",rel:"noreferrer",children:s})})))]})}}function No(){var n="/home/runner/work/maputnik/maputnik/src/components/Block.tsx",e="ca04d739d50d9528a1765863025280bc88ee5e77",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/Block.tsx",statementMap:{0:{start:{line:7,column:13},end:{line:7,column:17}},1:{start:{line:9,column:4},end:{line:9,column:17}},2:{start:{line:10,column:4},end:{line:12,column:6}},3:{start:{line:15,column:18},end:{line:15,column:32}},4:{start:{line:16,column:4},end:{line:18,column:5}},5:{start:{line:17,column:6},end:{line:17,column:64}},6:{start:{line:20,column:16},end:{line:24,column:3}},7:{start:{line:21,column:4},end:{line:23,column:7}},8:{start:{line:31,column:17},end:{line:40,column:3}},9:{start:{line:32,column:15},end:{line:32,column:39}},10:{start:{line:33,column:21},end:{line:33,column:48}},11:{start:{line:34,column:4},end:{line:36,column:5}},12:{start:{line:35,column:6},end:{line:35,column:30}},13:{start:{line:37,column:4},end:{line:39,column:5}},14:{start:{line:38,column:6},end:{line:38,column:29}},15:{start:{line:42,column:4},end:{line:75,column:6}},16:{start:{line:64,column:95},end:{line:64,column:113}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:21},end:{line:13,column:3}},line:8},1:{name:"(anonymous_1)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:14},end:{line:19,column:3}},line:14},2:{name:"(anonymous_2)",decl:{start:{line:20,column:16},end:{line:20,column:17}},loc:{start:{line:20,column:25},end:{line:24,column:3}},line:20},3:{name:"(anonymous_3)",decl:{start:{line:31,column:17},end:{line:31,column:18}},loc:{start:{line:31,column:28},end:{line:40,column:3}},line:31},4:{name:"(anonymous_4)",decl:{start:{line:41,column:2},end:{line:41,column:3}},loc:{start:{line:41,column:11},end:{line:76,column:3}},line:41},5:{name:"(anonymous_5)",decl:{start:{line:64,column:87},end:{line:64,column:88}},loc:{start:{line:64,column:95},end:{line:64,column:113}},line:64}},branchMap:{0:{loc:{start:{line:16,column:4},end:{line:18,column:5}},type:"if",locations:[{start:{line:16,column:4},end:{line:18,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:16},1:{loc:{start:{line:17,column:33},end:{line:17,column:62}},type:"cond-expr",locations:[{start:{line:17,column:48},end:{line:17,column:54}},{start:{line:17,column:57},end:{line:17,column:62}}],line:17},2:{loc:{start:{line:34,column:4},end:{line:36,column:5}},type:"if",locations:[{start:{line:34,column:4},end:{line:36,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:34},3:{loc:{start:{line:34,column:8},end:{line:34,column:66}},type:"binary-expr",locations:[{start:{line:34,column:8},end:{line:34,column:53}},{start:{line:34,column:57},end:{line:34,column:66}}],line:34},4:{loc:{start:{line:37,column:4},end:{line:39,column:5}},type:"if",locations:[{start:{line:37,column:4},end:{line:39,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},5:{loc:{start:{line:54,column:10},end:{line:61,column:14}},type:"binary-expr",locations:[{start:{line:54,column:10},end:{line:54,column:30}},{start:{line:54,column:50},end:{line:61,column:14}}],line:54},6:{loc:{start:{line:62,column:10},end:{line:62,column:134}},type:"binary-expr",locations:[{start:{line:62,column:10},end:{line:62,column:31}},{start:{line:62,column:51},end:{line:62,column:134}}],line:62},7:{loc:{start:{line:65,column:10},end:{line:72,column:11}},type:"binary-expr",locations:[{start:{line:65,column:10},end:{line:65,column:30}},{start:{line:65,column:50},end:{line:72,column:11}}],line:65},8:{loc:{start:{line:69,column:32},end:{line:69,column:64}},type:"cond-expr",locations:[{start:{line:69,column:53},end:{line:69,column:55}},{start:{line:69,column:58},end:{line:69,column:64}}],line:69}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/Block.tsx"],names:[],mappings:"AAgEW,SAWD,KAXC;AAhEX,OAAO,WAAgD;AACvD,OAAO,gBAAgB;AACvB,OAAO,mBAAmB;AAC1B,OAAO,SAAS;AAmBhB,qBAAqB,cAAc,MAAM,UAAkC;AAAA,EACzE,WAAkC;AAAA,EAElC,YAAa,OAAmB;AAC9B,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,SAAS;AAAA,IACX;AAAA,EACF;AAAA,EAEA,SAAS,GAAwE;AAC/E,UAAM,QAAQ,EAAE,OAAO;AACvB,QAAI,KAAK,MAAM,UAAU;AACvB,aAAO,KAAK,MAAM,SAAS,UAAU,KAAK,SAAY,KAAK;AAAA,IAC7D;AAAA,EACF;AAAA,EAEA,cAAc,CAAC,QAAiB;AAC9B,SAAK,SAAS;AAAA,MACZ,SAAS;AAAA,IACX,CAAC;AAAA,EACH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQA,eAAe,CAAC,UAAoC;AAClD,UAAM,KAAK,MAAM,YAAY;AAC7B,UAAM,WAAW,KAAK,UAAU,SAAS,EAAE;AAE3C,QAAI,MAAM,YAAY,OAAO,aAAa,WAAW,CAAC,UAAU;AAC9D,YAAM,gBAAgB;AAAA,IACxB;AACA,QAAI,MAAM,YAAY,OAAO,aAAa,KAAK;AAC7C,YAAM,eAAe;AAAA,IACvB;AAAA,EACF;AAAA,EAEA,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QAAM,OAAO,KAAK,MAAM;AAAA,QAC9B,eAAa,KAAK,MAAM,aAAa;AAAA,QACrC,WAAW,WAAW;AAAA,UACpB,wBAAwB;AAAA,UACxB,8BAA8B,KAAK,MAAM;AAAA,UACzC,yBAAyB,KAAK,MAAM;AAAA,QACtC,CAAC;AAAA,QACD,SAAS,KAAK;AAAA,QAEb;AAAA,eAAK,MAAM,aACV,oBAAC,SAAI,WAAU,8BACb;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,KAAK,MAAM;AAAA,cAClB,aAAa,KAAK;AAAA,cAClB,WAAW,KAAK,MAAM;AAAA;AAAA,UACxB,GACF;AAAA,UAED,CAAC,KAAK,MAAM,aACX,oBAAC,SAAI,WAAU,8BACZ,eAAK,MAAM,OACd;AAAA,UAEF,oBAAC,SAAI,WAAU,+BACZ,eAAK,MAAM,QACd;AAAA,UACA,oBAAC,SAAI,WAAU,gCAA+B,KAAK,QAAM,KAAK,WAAW,IACtE,eAAK,MAAM,UACd;AAAA,UACC,KAAK,MAAM,aACV;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,OAAO,EAAC,SAAS,KAAK,MAAM,UAAU,KAAK,OAAM;AAAA,cAEjD,8BAAC,OAAI,WAAW,KAAK,MAAM,WAAW;AAAA;AAAA,UACxC;AAAA;AAAA;AAAA,IAEJ;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ca04d739d50d9528a1765863025280bc88ee5e77"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return No=function(){return l},l}No();class la extends Xn.Component{constructor(t){No().f[0]++,No().s[1]++;super(t);Kn(this,"_blockEl",(No().s[0]++,null));Kn(this,"onToggleDoc",(No().s[6]++,t=>{No().f[2]++,No().s[7]++,this.setState({showDoc:t})}));Kn(this,"onLabelClick",(No().s[8]++,t=>{var s;No().f[3]++;const r=(No().s[9]++,t.nativeEvent.target),i=(No().s[10]++,(s=this._blockEl)==null?void 0:s.contains(r));No().s[11]++,No().b[3][0]++,t.nativeEvent.target.nodeName!=="INPUT"&&(No().b[3][1]++,!i)?(No().b[2][0]++,No().s[12]++,t.stopPropagation()):No().b[2][1]++,No().s[13]++,t.nativeEvent.target.nodeName!=="A"?(No().b[4][0]++,No().s[14]++,t.preventDefault()):No().b[4][1]++}));No().s[2]++,this.state={showDoc:!1}}onChange(t){No().f[1]++;const r=(No().s[3]++,t.target.value);if(No().s[4]++,this.props.onChange)return No().b[0][0]++,No().s[5]++,this.props.onChange(r===""?(No().b[1][0]++,void 0):(No().b[1][1]++,r));No().b[0][1]++}render(){return No().f[4]++,No().s[15]++,ue.jsxs("label",{style:this.props.style,"data-wd-key":this.props["data-wd-key"],className:tm({"maputnik-input-block":!0,"maputnik-input-block--wide":this.props.wideMode,"maputnik-action-block":this.props.action}),onClick:this.onLabelClick,children:[(No().b[5][0]++,this.props.fieldSpec&&(No().b[5][1]++,ue.jsx("div",{className:"maputnik-input-block-label",children:ue.jsx(gO,{label:this.props.label,onToggleDoc:this.onToggleDoc,fieldSpec:this.props.fieldSpec})}))),(No().b[6][0]++,!this.props.fieldSpec&&(No().b[6][1]++,ue.jsx("div",{className:"maputnik-input-block-label",children:this.props.label}))),ue.jsx("div",{className:"maputnik-input-block-action",children:this.props.action}),ue.jsx("div",{className:"maputnik-input-block-content",ref:t=>(No().f[5]++,No().s[16]++,this._blockEl=t),children:this.props.children}),(No().b[7][0]++,this.props.fieldSpec&&(No().b[7][1]++,ue.jsx("div",{className:"maputnik-doc-inline",style:{display:this.state.showDoc?(No().b[8][0]++,""):(No().b[8][1]++,"none")},children:ue.jsx(yO,{fieldSpec:this.props.fieldSpec})})))]})}}function Fc(){var n="/home/runner/work/maputnik/maputnik/src/components/InputSelect.tsx",e="1b99a181d4a9dd7b629113889cbb71c3a4bb4d42",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputSelect.tsx",statementMap:{0:{start:{line:5,column:18},end:{line:5,column:36}},1:{start:{line:6,column:4},end:{line:8,column:5}},2:{start:{line:7,column:6},end:{line:7,column:43}},3:{start:{line:7,column:35},end:{line:7,column:41}},4:{start:{line:9,column:4},end:{line:21,column:6}},5:{start:{line:17,column:25},end:{line:17,column:60}},6:{start:{line:19,column:64},end:{line:19,column:115}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:2},end:{line:4,column:3}},loc:{start:{line:4,column:11},end:{line:22,column:3}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:7,column:28},end:{line:7,column:29}},loc:{start:{line:7,column:35},end:{line:7,column:41}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:17,column:18},end:{line:17,column:19}},loc:{start:{line:17,column:25},end:{line:17,column:60}},line:17},3:{name:"(anonymous_3)",decl:{start:{line:19,column:30},end:{line:19,column:31}},loc:{start:{line:19,column:64},end:{line:19,column:115}},line:19}},branchMap:{0:{loc:{start:{line:6,column:4},end:{line:8,column:5}},type:"if",locations:[{start:{line:6,column:4},end:{line:8,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:6},1:{loc:{start:{line:6,column:8},end:{line:6,column:56}},type:"binary-expr",locations:[{start:{line:6,column:8},end:{line:6,column:26}},{start:{line:6,column:30},end:{line:6,column:56}}],line:6}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},f:{0:0,1:0,2:0,3:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputSelect.tsx"],names:[],mappings:"AA4BsC;AA5BtC,OAAO,WAAW;AAYlB,qBAAqB,oBAAoB,MAAM,UAA4B;AAAA,EACzE,SAAS;AACP,QAAI,UAAU,KAAK,MAAM;AACzB,QAAG,QAAQ,SAAS,KAAK,CAAC,MAAM,QAAQ,QAAQ,CAAC,CAAC,GAAG;AACnD,gBAAU,QAAQ,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;AAAA,IACrC;AAEA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,eAAa,KAAK,MAAM,aAAa;AAAA,QACrC,OAAO,KAAK,MAAM;AAAA,QAClB,OAAO,KAAK,MAAM;AAAA,QAClB,OAAO,KAAK,MAAM;AAAA,QAClB,UAAU,OAAK,KAAK,MAAM,SAAS,EAAE,OAAO,KAAK;AAAA,QACjD,cAAY,KAAK,MAAM,YAAY;AAAA,QAEjC,kBAAQ,IAAI,CAAC,CAAC,KAAK,KAAK,MAAM,oBAAC,YAAiB,OAAO,KAAM,mBAAlB,GAAwB,CAAS;AAAA;AAAA,IAChF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"1b99a181d4a9dd7b629113889cbb71c3a4bb4d42"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Fc=function(){return l},l}Fc();class Hg extends Xn.Component{render(){Fc().f[0]++;let e=(Fc().s[0]++,this.props.options);return Fc().s[1]++,Fc().b[1][0]++,e.length>0&&(Fc().b[1][1]++,!Array.isArray(e[0]))?(Fc().b[0][0]++,Fc().s[2]++,e=e.map(t=>(Fc().f[1]++,Fc().s[3]++,[t,t]))):Fc().b[0][1]++,Fc().s[4]++,ue.jsx("select",{className:"maputnik-select","data-wd-key":this.props["data-wd-key"],style:this.props.style,title:this.props.title,value:this.props.value,onChange:t=>(Fc().f[2]++,Fc().s[5]++,this.props.onChange(t.target.value)),"aria-label":this.props["aria-label"],children:e.map(([t,r])=>(Fc().f[3]++,Fc().s[6]++,ue.jsx("option",{value:t,children:r},t)))})}}function Fi(){var n="/home/runner/work/maputnik/maputnik/src/components/InputString.tsx",e="ffe977722e3215b5f6718c464b93680839810a41",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputString.tsx",statementMap:{0:{start:{line:3,column:24},end:{line:6,column:3}},1:{start:{line:8,column:4},end:{line:8,column:17}},2:{start:{line:9,column:4},end:{line:12,column:6}},3:{start:{line:15,column:4},end:{line:19,column:5}},4:{start:{line:16,column:6},end:{line:18,column:8}},5:{start:{line:20,column:4},end:{line:20,column:14}},6:{start:{line:25,column:4},end:{line:36,column:5}},7:{start:{line:26,column:6},end:{line:26,column:23}},8:{start:{line:27,column:6},end:{line:30,column:8}},9:{start:{line:32,column:6},end:{line:32,column:20}},10:{start:{line:33,column:6},end:{line:35,column:8}},11:{start:{line:37,column:4},end:{line:39,column:5}},12:{start:{line:38,column:6},end:{line:38,column:48}},13:{start:{line:40,column:4},end:{line:70,column:7}},14:{start:{line:51,column:8},end:{line:56,column:11}},15:{start:{line:55,column:10},end:{line:55,column:71}},16:{start:{line:55,column:34},end:{line:55,column:71}},17:{start:{line:59,column:8},end:{line:62,column:9}},18:{start:{line:60,column:10},end:{line:60,column:44}},19:{start:{line:61,column:10},end:{line:61,column:73}},20:{start:{line:61,column:35},end:{line:61,column:73}},21:{start:{line:65,column:8},end:{line:67,column:9}},22:{start:{line:66,column:10},end:{line:66,column:48}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:13},end:{line:4,column:14}},loc:{start:{line:4,column:19},end:{line:5,column:5}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:21},end:{line:13,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:48},end:{line:21,column:3}},line:14},3:{name:"(anonymous_3)",decl:{start:{line:22,column:2},end:{line:22,column:3}},loc:{start:{line:22,column:11},end:{line:71,column:3}},line:22},4:{name:"(anonymous_4)",decl:{start:{line:50,column:16},end:{line:50,column:17}},loc:{start:{line:50,column:23},end:{line:57,column:7}},line:50},5:{name:"(anonymous_5)",decl:{start:{line:54,column:11},end:{line:54,column:12}},loc:{start:{line:54,column:17},end:{line:56,column:9}},line:54},6:{name:"(anonymous_6)",decl:{start:{line:58,column:14},end:{line:58,column:15}},loc:{start:{line:58,column:20},end:{line:63,column:7}},line:58},7:{name:"(anonymous_7)",decl:{start:{line:64,column:17},end:{line:64,column:18}},loc:{start:{line:64,column:24},end:{line:68,column:7}},line:64}},branchMap:{0:{loc:{start:{line:11,column:13},end:{line:11,column:30}},type:"binary-expr",locations:[{start:{line:11,column:13},end:{line:11,column:24}},{start:{line:11,column:28},end:{line:11,column:30}}],line:11},1:{loc:{start:{line:15,column:4},end:{line:19,column:5}},type:"if",locations:[{start:{line:15,column:4},end:{line:19,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:15},2:{loc:{start:{line:25,column:4},end:{line:36,column:5}},type:"if",locations:[{start:{line:25,column:4},end:{line:36,column:5}},{start:{line:31,column:11},end:{line:36,column:5}}],line:25},3:{loc:{start:{line:37,column:4},end:{line:39,column:5}},type:"if",locations:[{start:{line:37,column:4},end:{line:39,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},4:{loc:{start:{line:43,column:18},end:{line:43,column:125}},type:"cond-expr",locations:[{start:{line:43,column:83},end:{line:43,column:104}},{start:{line:43,column:107},end:{line:43,column:125}}],line:43},5:{loc:{start:{line:47,column:13},end:{line:47,column:64}},type:"cond-expr",locations:[{start:{line:47,column:43},end:{line:47,column:45}},{start:{line:47,column:48},end:{line:47,column:64}}],line:47},6:{loc:{start:{line:55,column:10},end:{line:55,column:71}},type:"if",locations:[{start:{line:55,column:10},end:{line:55,column:71}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:55},7:{loc:{start:{line:59,column:8},end:{line:62,column:9}},type:"if",locations:[{start:{line:59,column:8},end:{line:62,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:59},8:{loc:{start:{line:61,column:10},end:{line:61,column:73}},type:"if",locations:[{start:{line:61,column:10},end:{line:61,column:73}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:61},9:{loc:{start:{line:65,column:8},end:{line:67,column:9}},type:"if",locations:[{start:{line:65,column:8},end:{line:67,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:65},10:{loc:{start:{line:65,column:12},end:{line:65,column:51}},type:"binary-expr",locations:[{start:{line:65,column:12},end:{line:65,column:28}},{start:{line:65,column:32},end:{line:65,column:51}}],line:65}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputString.tsx"],names:[],mappings:"AAAA,OAAO,WAAW;AAsBlB,qBAAqB,oBAAoB,MAAM,UAA8C;AAAA,EAC3F,OAAO,eAAe;AAAA,IACpB,SAAS,MAAM;AAAA,IAAC;AAAA,EAClB;AAAA,EAEA,YAAY,OAAyB;AACnC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,SAAS;AAAA,MACT,OAAO,MAAM,SAAS;AAAA,IACxB;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAAmC,OAAyB;AAC1F,QAAI,CAAC,MAAM,SAAS;AAClB,aAAO;AAAA,QACL,OAAO,MAAM;AAAA,MACf;AAAA,IACF;AACA,WAAO,CAAC;AAAA,EACV;AAAA,EAEA,SAAS;AACP,QAAI;AACJ,QAAI;AAEJ,QAAG,KAAK,MAAM,OAAO;AACnB,YAAM;AACN,gBAAU;AAAA,QACR;AAAA,QACA;AAAA,MACF;AAAA,IACF,OACK;AACH,YAAM;AACN,gBAAU;AAAA,QACR;AAAA,MACF;AAAA,IACF;AAEA,QAAG,KAAK,MAAM,UAAU;AACtB,cAAQ,KAAK,2BAA2B;AAAA,IAC1C;AAEA,WAAO,MAAM,cAAc,KAAK;AAAA,MAC9B,cAAc,KAAK,MAAM,YAAY;AAAA,MACrC,eAAe,KAAK,MAAM,aAAa;AAAA,MACvC,YAAY,OAAO,UAAU,eAAe,KAAK,KAAK,OAAO,YAAY,IAAI,KAAK,MAAM,aAAa,EAAE,QAAQ;AAAA,MAC/G,UAAU,KAAK,MAAM;AAAA,MACrB,WAAW,QAAQ,KAAK,GAAG;AAAA,MAC3B,OAAO,KAAK,MAAM;AAAA,MAClB,OAAO,KAAK,MAAM,UAAU,SAAY,KAAK,KAAK,MAAM;AAAA,MACxD,aAAa,KAAK,MAAM;AAAA,MACxB,OAAO,KAAK,MAAM;AAAA,MAClB,UAAU,CAAC,MAA2E;AACpF,aAAK,SAAS;AAAA,UACZ,SAAS;AAAA,UACT,OAAO,EAAE,OAAO;AAAA,QAClB,GAAG,MAAM;AACP,cAAI,KAAK,MAAM,QAAS,MAAK,MAAM,QAAQ,KAAK,MAAM,KAAK;AAAA,QAC7D,CAAC;AAAA,MACH;AAAA,MACA,QAAQ,MAAM;AACZ,YAAG,KAAK,MAAM,UAAQ,KAAK,MAAM,OAAO;AACtC,eAAK,SAAS,EAAC,SAAS,MAAK,CAAC;AAC9B,cAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,KAAK,MAAM,KAAK;AAAA,QAC/D;AAAA,MACF;AAAA,MACA,WAAW,CAAC,MAAM;AAChB,YAAI,EAAE,YAAY,MAAM,KAAK,MAAM,UAAU;AAC3C,eAAK,MAAM,SAAS,KAAK,MAAM,KAAK;AAAA,QACtC;AAAA,MACF;AAAA,MACA,UAAU,KAAK,MAAM;AAAA,IACvB,CAAC;AAAA,EACH;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ffe977722e3215b5f6718c464b93680839810a41"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Fi=function(){return l},l}Fi();class Rf extends Xn.Component{constructor(e){Fi().f[1]++,Fi().s[1]++,super(e),Fi().s[2]++,this.state={editing:!1,value:(Fi().b[0][0]++,e.value||(Fi().b[0][1]++,""))}}static getDerivedStateFromProps(e,t){if(Fi().f[2]++,Fi().s[3]++,t.editing)Fi().b[1][1]++;else return Fi().b[1][0]++,Fi().s[4]++,{value:e.value};return Fi().s[5]++,{}}render(){Fi().f[3]++;let e,t;return Fi().s[6]++,this.props.multi?(Fi().b[2][0]++,Fi().s[7]++,e="textarea",Fi().s[8]++,t=["maputnik-string","maputnik-string--multi"]):(Fi().b[2][1]++,Fi().s[9]++,e="input",Fi().s[10]++,t=["maputnik-string"]),Fi().s[11]++,this.props.disabled?(Fi().b[3][0]++,Fi().s[12]++,t.push("maputnik-string--disabled")):Fi().b[3][1]++,Fi().s[13]++,Xn.createElement(e,{"aria-label":this.props["aria-label"],"data-wd-key":this.props["data-wd-key"],spellCheck:Object.prototype.hasOwnProperty.call(this.props,"spellCheck")?(Fi().b[4][0]++,this.props.spellCheck):(Fi().b[4][1]++,e!=="input"),disabled:this.props.disabled,className:t.join(" "),style:this.props.style,value:this.state.value===void 0?(Fi().b[5][0]++,""):(Fi().b[5][1]++,this.state.value),placeholder:this.props.default,title:this.props.title,onChange:r=>{Fi().f[4]++,Fi().s[14]++,this.setState({editing:!0,value:r.target.value},()=>{Fi().f[5]++,Fi().s[15]++,this.props.onInput?(Fi().b[6][0]++,Fi().s[16]++,this.props.onInput(this.state.value)):Fi().b[6][1]++})},onBlur:()=>{Fi().f[6]++,Fi().s[17]++,this.state.value!==this.props.value?(Fi().b[7][0]++,Fi().s[18]++,this.setState({editing:!1}),Fi().s[19]++,this.props.onChange?(Fi().b[8][0]++,Fi().s[20]++,this.props.onChange(this.state.value)):Fi().b[8][1]++):Fi().b[7][1]++},onKeyDown:r=>{Fi().f[7]++,Fi().s[21]++,Fi().b[10][0]++,r.keyCode===13&&(Fi().b[10][1]++,this.props.onChange)?(Fi().b[9][0]++,Fi().s[22]++,this.props.onChange(this.state.value)):Fi().b[9][1]++},required:this.props.required})}}Kn(Rf,"defaultProps",(Fi().s[0]++,{onInput:()=>{Fi().f[0]++}}));function ip(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldType.tsx",e="7881723dfc9d5af5c18468677e4f429a5a061179",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldType.tsx",statementMap:{0:{start:{line:9,column:24},end:{line:11,column:3}},1:{start:{line:13,column:14},end:{line:13,column:26}},2:{start:{line:14,column:4},end:{line:50,column:6}},3:{start:{line:53,column:18},end:{line:53,column:54}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:12,column:2},end:{line:12,column:3}},loc:{start:{line:12,column:11},end:{line:51,column:3}},line:12}},branchMap:{0:{loc:{start:{line:22,column:10},end:{line:28,column:11}},type:"binary-expr",locations:[{start:{line:22,column:10},end:{line:22,column:29}},{start:{line:22,column:49},end:{line:28,column:11}}],line:22},1:{loc:{start:{line:29,column:10},end:{line:47,column:11}},type:"binary-expr",locations:[{start:{line:29,column:10},end:{line:29,column:30}},{start:{line:29,column:50},end:{line:47,column:11}}],line:29}},s:{0:0,1:0,2:0,3:0},f:{0:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldType.tsx"],names:[],mappings:"AAuBW,SAKH,KALG;AAvBX,OAAO,WAAW;AAElB,OAAO,YAAY;AACnB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,SAA0B,uBAAuB;AAUjD,MAAM,0BAA0B,MAAM,UAAkC;AAAA,EACtE,OAAO,eAAe;AAAA,IACpB,UAAU;AAAA,EACZ;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QAAM,OAAO,EAAE,MAAM;AAAA,QAAG,WAAW,OAAO,MAAM;AAAA,QACtD,eAAa,KAAK,MAAM;AAAA,QACxB,OAAO,KAAK,MAAM;AAAA,QAEjB;AAAA,eAAK,MAAM,YACV;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,KAAK,MAAM;AAAA,cAClB,UAAU;AAAA;AAAA,UACZ;AAAA,UAED,CAAC,KAAK,MAAM,YACX;AAAA,YAAC;AAAA;AAAA,cACC,SAAS;AAAA,gBACP,CAAC,cAAc,YAAY;AAAA,gBAC3B,CAAC,QAAQ,MAAM;AAAA,gBACf,CAAC,QAAQ,MAAM;AAAA,gBACf,CAAC,UAAU,QAAQ;AAAA,gBACnB,CAAC,UAAU,QAAQ;AAAA,gBACnB,CAAC,UAAU,QAAQ;AAAA,gBACnB,CAAC,kBAAkB,gBAAgB;AAAA,gBACnC,CAAC,aAAa,WAAW;AAAA,gBACzB,CAAC,WAAW,SAAS;AAAA,cACvB;AAAA,cACA,UAAU,KAAK,MAAM;AAAA,cACrB,OAAO,KAAK,MAAM;AAAA,cAClB,eAAa,KAAK,MAAM,QAAQ;AAAA;AAAA,UAClC;AAAA;AAAA;AAAA,IAEJ;AAAA,EACF;AACF;AAEA,MAAM,YAAY,gBAAgB,EAAE,iBAAiB;AACrD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"7881723dfc9d5af5c18468677e4f429a5a061179"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return ip=function(){return l},l}ip();class hz extends Xn.Component{render(){ip().f[0]++;const e=(ip().s[1]++,this.props.t);return ip().s[2]++,ue.jsxs(la,{label:e("Type"),fieldSpec:Xo.layer.type,"data-wd-key":this.props.wdKey,error:this.props.error,children:[(ip().b[0][0]++,this.props.disabled&&(ip().b[0][1]++,ue.jsx(Rf,{value:this.props.value,disabled:!0}))),(ip().b[1][0]++,!this.props.disabled&&(ip().b[1][1]++,ue.jsx(Hg,{options:[["background","Background"],["fill","Fill"],["line","Line"],["symbol","Symbol"],["raster","Raster"],["circle","Circle"],["fill-extrusion","Fill Extrusion"],["hillshade","Hillshade"],["heatmap","Heatmap"]],onChange:this.props.onChange,value:this.props.value,"data-wd-key":this.props.wdKey+".select"})))]})}}Kn(hz,"defaultProps",(ip().s[0]++,{disabled:!1}));const fz=(ip().s[3]++,zs()(hz));function S2(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldId.tsx",e="f6ac2bd12dbef0198dd96da668f75e4659321d69",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldId.tsx",statementMap:{0:{start:{line:8,column:4},end:{line:24,column:6}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:11},end:{line:25,column:3}},line:7}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldId.tsx"],names:[],mappings:"AAoBM;AApBN,OAAO,WAAW;AAElB,OAAO,YAAY;AACnB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AASxB,qBAAqB,gBAAgB,MAAM,UAAwB;AAAA,EACjE,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QAAM,OAAM;AAAA,QAAK,WAAW,OAAO,MAAM;AAAA,QAE/C,eAAa,KAAK,MAAM;AAAA,QACxB,OAAO,KAAK,MAAM;AAAA,QAElB;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,KAAK,MAAM;AAAA,YAClB,SAAS,KAAK,MAAM;AAAA,YACpB,eAAa,KAAK,MAAM,QAAQ;AAAA;AAAA,QAClC;AAAA;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f6ac2bd12dbef0198dd96da668f75e4659321d69"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return S2=function(){return l},l}S2();class pz extends Xn.Component{render(){return S2().f[0]++,S2().s[0]++,ue.jsx(la,{label:"ID",fieldSpec:Xo.layer.id,"data-wd-key":this.props.wdKey,error:this.props.error,children:ue.jsx(Rf,{value:this.props.value,onInput:this.props.onChange,"data-wd-key":this.props.wdKey+".input"})})}}var j4={exports:{}},b9;function nie(){if(b9)return j4.exports;b9=1;var n=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source;function e(Ze){var Je,Ne,we,De=Ze.ownerDocument,He=De.body,bt=De&&De.documentElement;return Je=Ze.getBoundingClientRect(),Ne=Je.left,we=Je.top,Ne-=bt.clientLeft||He.clientLeft||0,we-=bt.clientTop||He.clientTop||0,{left:Ne,top:we}}function t(Ze,Je){var Ne=Ze["page"+(Je?"Y":"X")+"Offset"],we="scroll"+(Je?"Top":"Left");if(typeof Ne!="number"){var De=Ze.document;Ne=De.documentElement[we],typeof Ne!="number"&&(Ne=De.body[we])}return Ne}function r(Ze){return t(Ze)}function i(Ze){return t(Ze,!0)}function s(Ze){var Je=e(Ze),Ne=Ze.ownerDocument,we=Ne.defaultView||Ne.parentWindow;return Je.left+=r(we),Je.top+=i(we),Je}function l(Ze,Je,Ne){var we="",De=Ze.ownerDocument;return(Ne=Ne||De.defaultView.getComputedStyle(Ze,null))&&(we=Ne.getPropertyValue(Je)||Ne[Je]),we}var o=new RegExp("^("+n+")(?!px)[a-z%]+$","i"),f=/^(top|right|bottom|left)$/,y="currentStyle",x="runtimeStyle",B="left",O="px";function P(Ze,Je){var Ne=Ze[y]&&Ze[y][Je];if(o.test(Ne)&&!f.test(Je)){var we=Ze.style,De=we[B],He=Ze[x][B];Ze[x][B]=Ze[y][B],we[B]=Je==="fontSize"?"1em":Ne||0,Ne=we.pixelLeft+O,we[B]=De,Ze[x][B]=He}return Ne===""?"auto":Ne}var U;typeof window<"u"&&(U=window.getComputedStyle?l:P);function j(Ze,Je){Ke(Ze,"position")==="static"&&(Ze.style.position="relative");var Ne=s(Ze),we={},De,He;for(He in Je)De=parseFloat(Ke(Ze,He))||0,we[He]=De+Je[He]-Ne[He];Ke(Ze,we)}function N(Ze,Je){for(var Ne=0;Ne<Ze.length;Ne++)Je(Ze[Ne])}function Y(Ze){return U(Ze,"boxSizing")==="border-box"}var H=["margin","border","padding"],se=-1,re=2,V=1,ne=0;function G(Ze,Je,Ne){var we={},De=Ze.style,He;for(He in Je)we[He]=De[He],De[He]=Je[He];Ne.call(Ze);for(He in Je)De[He]=we[He]}function oe(Ze,Je,Ne){var we=0,De,He,bt;for(He=0;He<Je.length;He++)if(De=Je[He],De)for(bt=0;bt<Ne.length;bt++){var Yt;De==="border"?Yt=De+Ne[bt]+"Width":Yt=De+Ne[bt],we+=parseFloat(U(Ze,Yt))||0}return we}function he(Ze){return Ze!=null&&Ze==Ze.window}var fe={};N(["Width","Height"],function(Ze){fe["doc"+Ze]=function(Je){var Ne=Je.document;return Math.max(Ne.documentElement["scroll"+Ze],Ne.body["scroll"+Ze],fe["viewport"+Ze](Ne))},fe["viewport"+Ze]=function(Je){var Ne="client"+Ze,we=Je.document,De=we.body,He=we.documentElement,bt=He[Ne];return we.compatMode==="CSS1Compat"&&bt||De&&De[Ne]||bt}});function Ee(Ze,Je,Ne){if(he(Ze))return Je==="width"?fe.viewportWidth(Ze):fe.viewportHeight(Ze);if(Ze.nodeType===9)return Je==="width"?fe.docWidth(Ze):fe.docHeight(Ze);var we=Je==="width"?["Left","Right"]:["Top","Bottom"],De=Je==="width"?Ze.offsetWidth:Ze.offsetHeight;U(Ze);var He=Y(Ze),bt=0;(De==null||De<=0)&&(De=void 0,bt=U(Ze,Je),(bt==null||Number(bt)<0)&&(bt=Ze.style[Je]||0),bt=parseFloat(bt)||0),Ne===void 0&&(Ne=He?V:se);var Yt=De!==void 0||He,yt=De||bt;return Ne===se?Yt?yt-oe(Ze,["border","padding"],we):bt:Yt?yt+(Ne===V?0:Ne===re?-oe(Ze,["border"],we):oe(Ze,["margin"],we)):bt+oe(Ze,H.slice(Ne),we)}var me={position:"absolute",visibility:"hidden",display:"block"};function Se(Ze){var Je,Ne=arguments;return Ze.offsetWidth!==0?Je=Ee.apply(void 0,Ne):G(Ze,me,function(){Je=Ee.apply(void 0,Ne)}),Je}N(["width","height"],function(Ze){var Je=Ze.charAt(0).toUpperCase()+Ze.slice(1);fe["outer"+Je]=function(we,De){return we&&Se(we,Ze,De?ne:V)};var Ne=Ze==="width"?["Left","Right"]:["Top","Bottom"];fe[Ze]=function(we,De){if(De!==void 0){if(we){U(we);var He=Y(we);return He&&(De+=oe(we,["padding","border"],Ne)),Ke(we,Ze,De)}return}return we&&Se(we,Ze,se)}});function Ke(Ze,Je,Ne){if(typeof Je=="object"){for(var we in Je)Ke(Ze,we,Je[we]);return}if(typeof Ne<"u")typeof Ne=="number"&&(Ne=Ne+"px"),Ze.style[Je]=Ne;else return U(Ze,Je)}function xe(Ze,Je){for(var Ne in Je)Ze[Ne]=Je[Ne];return Ze}var at=j4.exports={getWindow:function(Ze){var Je=Ze.ownerDocument||Ze;return Je.defaultView||Je.parentWindow},offset:function(Ze,Je){if(typeof Je<"u")j(Ze,Je);else return s(Ze)},isWindow:he,each:N,css:Ke,clone:function(Ze){var Je={};for(var Ne in Ze)Je[Ne]=Ze[Ne];var we=Ze.overflow;if(we)for(Ne in Ze)Je.overflow[Ne]=Ze.overflow[Ne];return Je},mix:xe,scrollLeft:function(Ze,Je){if(he(Ze)){if(Je===void 0)return r(Ze);window.scrollTo(Je,i(Ze))}else{if(Je===void 0)return Ze.scrollLeft;Ze.scrollLeft=Je}},scrollTop:function(Ze,Je){if(he(Ze)){if(Je===void 0)return i(Ze);window.scrollTo(r(Ze),Je)}else{if(Je===void 0)return Ze.scrollTop;Ze.scrollTop=Je}},merge:function(){for(var Ze={},Je=0;Je<arguments.length;Je++)at.mix(Ze,arguments[Je]);return Ze},viewportWidth:0,viewportHeight:0};return xe(at,fe),j4.exports}var N4,x9;function rie(){if(x9)return N4;x9=1;var n=nie();function e(t,r,i){i=i||{},r.nodeType===9&&(r=n.getWindow(r));var s=i.allowHorizontalScroll,l=i.onlyScrollIfNeeded,o=i.alignWithTop,f=i.alignWithLeft;s=s===void 0?!0:s;var y=n.isWindow(r),x=n.offset(t),B=n.outerHeight(t),O=n.outerWidth(t),P,U,j,N,Y,H,se,re,V,ne;y?(se=r,ne=n.height(se),V=n.width(se),re={left:n.scrollLeft(se),top:n.scrollTop(se)},Y={left:x.left-re.left,top:x.top-re.top},H={left:x.left+O-(re.left+V),top:x.top+B-(re.top+ne)},N=re):(P=n.offset(r),U=r.clientHeight,j=r.clientWidth,N={left:r.scrollLeft,top:r.scrollTop},Y={left:x.left-(P.left+(parseFloat(n.css(r,"borderLeftWidth"))||0)),top:x.top-(P.top+(parseFloat(n.css(r,"borderTopWidth"))||0))},H={left:x.left+O-(P.left+j+(parseFloat(n.css(r,"borderRightWidth"))||0)),top:x.top+B-(P.top+U+(parseFloat(n.css(r,"borderBottomWidth"))||0))}),Y.top<0||H.top>0?o===!0?n.scrollTop(r,N.top+Y.top):o===!1?n.scrollTop(r,N.top+H.top):Y.top<0?n.scrollTop(r,N.top+Y.top):n.scrollTop(r,N.top+H.top):l||(o=o===void 0?!0:!!o,o?n.scrollTop(r,N.top+Y.top):n.scrollTop(r,N.top+H.top)),s&&(Y.left<0||H.left>0?f===!0?n.scrollLeft(r,N.left+Y.left):f===!1?n.scrollLeft(r,N.left+H.left):Y.left<0?n.scrollLeft(r,N.left+Y.left):n.scrollLeft(r,N.left+H.left):l||(f=f===void 0?!0:!!f,f?n.scrollLeft(r,N.left+Y.left):n.scrollLeft(r,N.left+H.left)))}return N4=e,N4}var W4,M9;function iie(){return M9||(M9=1,W4=rie()),W4}var G4,w9;function oie(){if(w9)return G4;w9=1;var n=Object.assign||function(P){for(var U=1;U<arguments.length;U++){var j=arguments[U];for(var N in j)Object.prototype.hasOwnProperty.call(j,N)&&(P[N]=j[N])}return P},e=function(){function P(U,j){for(var N=0;N<j.length;N++){var Y=j[N];Y.enumerable=Y.enumerable||!1,Y.configurable=!0,"value"in Y&&(Y.writable=!0),Object.defineProperty(U,Y.key,Y)}}return function(U,j,N){return j&&P(U.prototype,j),N&&P(U,N),U}}();function t(P,U){if(!(P instanceof U))throw new TypeError("Cannot call a class as a function")}function r(P,U){if(!P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return U&&(typeof U=="object"||typeof U=="function")?U:P}function i(P,U){if(typeof U!="function"&&U!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof U);P.prototype=Object.create(U&&U.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}}),U&&(Object.setPrototypeOf?Object.setPrototypeOf(P,U):P.__proto__=U)}var s=Ia(),l=mp(),o=IC(),f=o.findDOMNode,y=iie(),x=["blur","checkValidity","click","focus","select","setCustomValidity","setSelectionRange","setRangeText"];function B(){return{x:window.pageXOffset!==void 0?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,y:window.pageYOffset!==void 0?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop}}var O=function(P){i(U,P);function U(j){t(this,U);var N=r(this,(U.__proto__||Object.getPrototypeOf(U)).call(this,j));return N.state={isOpen:!1,highlightedIndex:null},N._debugStates=[],N.ensureHighlightedIndex=N.ensureHighlightedIndex.bind(N),N.exposeAPI=N.exposeAPI.bind(N),N.handleInputFocus=N.handleInputFocus.bind(N),N.handleInputBlur=N.handleInputBlur.bind(N),N.handleChange=N.handleChange.bind(N),N.handleKeyDown=N.handleKeyDown.bind(N),N.handleInputClick=N.handleInputClick.bind(N),N.maybeAutoCompleteText=N.maybeAutoCompleteText.bind(N),N}return e(U,[{key:"componentWillMount",value:function(){this.refs={},this._ignoreBlur=!1,this._ignoreFocus=!1,this._scrollOffset=null,this._scrollTimer=null}},{key:"componentWillUnmount",value:function(){clearTimeout(this._scrollTimer),this._scrollTimer=null}},{key:"componentWillReceiveProps",value:function(N){this.state.highlightedIndex!==null&&this.setState(this.ensureHighlightedIndex),N.autoHighlight&&(this.props.value!==N.value||this.state.highlightedIndex===null)&&this.setState(this.maybeAutoCompleteText)}},{key:"componentDidMount",value:function(){this.isOpen()&&this.setMenuPositions()}},{key:"componentDidUpdate",value:function(N,Y){(this.state.isOpen&&!Y.isOpen||"open"in this.props&&this.props.open&&!N.open)&&this.setMenuPositions(),this.maybeScrollItemIntoView(),Y.isOpen!==this.state.isOpen&&this.props.onMenuVisibilityChange(this.state.isOpen)}},{key:"exposeAPI",value:function(N){var Y=this;this.refs.input=N,x.forEach(function(H){return Y[H]=N&&N[H]&&N[H].bind(N)})}},{key:"maybeScrollItemIntoView",value:function(){if(this.isOpen()&&this.state.highlightedIndex!==null){var N=this.refs["item-"+this.state.highlightedIndex],Y=this.refs.menu;y(f(N),f(Y),{onlyScrollIfNeeded:!0})}}},{key:"handleKeyDown",value:function(N){U.keyDownHandlers[N.key]?U.keyDownHandlers[N.key].call(this,N):this.isOpen()||this.setState({isOpen:!0})}},{key:"handleChange",value:function(N){this.props.onChange(N,N.target.value)}},{key:"getFilteredItems",value:function(N){var Y=N.items;return N.shouldItemRender&&(Y=Y.filter(function(H){return N.shouldItemRender(H,N.value)})),N.sortItems&&Y.sort(function(H,se){return N.sortItems(H,se,N.value)}),Y}},{key:"maybeAutoCompleteText",value:function(N,Y){for(var H=N.highlightedIndex,se=Y.value,re=Y.getItemValue,V=H===null?0:H,ne=this.getFilteredItems(Y),G=0;G<ne.length&&!Y.isItemSelectable(ne[V]);G++)V=(V+1)%ne.length;var oe=ne[V]&&Y.isItemSelectable(ne[V])?ne[V]:null;if(se!==""&&oe){var he=re(oe),fe=he.toLowerCase().indexOf(se.toLowerCase())===0;if(fe)return{highlightedIndex:V}}return{highlightedIndex:null}}},{key:"ensureHighlightedIndex",value:function(N,Y){if(N.highlightedIndex>=this.getFilteredItems(Y).length)return{highlightedIndex:null}}},{key:"setMenuPositions",value:function(){var N=this.refs.input,Y=N.getBoundingClientRect(),H=window.window.getComputedStyle(N),se=parseInt(H.marginBottom,10)||0,re=parseInt(H.marginLeft,10)||0,V=parseInt(H.marginRight,10)||0;this.setState({menuTop:Y.bottom+se,menuLeft:Y.left+re,menuWidth:Y.width+re+V})}},{key:"highlightItemFromMouse",value:function(N){this.setState({highlightedIndex:N})}},{key:"selectItemFromMouse",value:function(N){var Y=this,H=this.props.getItemValue(N);this.setIgnoreBlur(!1),this.setState({isOpen:!1,highlightedIndex:null},function(){Y.props.onSelect(H,N)})}},{key:"setIgnoreBlur",value:function(N){this._ignoreBlur=N}},{key:"renderMenu",value:function(){var N=this,Y=this.getFilteredItems(this.props).map(function(re,V){var ne=N.props.renderItem(re,N.state.highlightedIndex===V,{cursor:"default"});return s.cloneElement(ne,{onMouseEnter:N.props.isItemSelectable(re)?function(){return N.highlightItemFromMouse(V)}:null,onClick:N.props.isItemSelectable(re)?function(){return N.selectItemFromMouse(re)}:null,ref:function(oe){return N.refs["item-"+V]=oe}})}),H={left:this.state.menuLeft,top:this.state.menuTop,minWidth:this.state.menuWidth},se=this.props.renderMenu(Y,this.props.value,H);return s.cloneElement(se,{ref:function(V){return N.refs.menu=V},onTouchStart:function(){return N.setIgnoreBlur(!0)},onMouseEnter:function(){return N.setIgnoreBlur(!0)},onMouseLeave:function(){return N.setIgnoreBlur(!1)}})}},{key:"handleInputBlur",value:function(N){var Y=this;if(this._ignoreBlur){this._ignoreFocus=!0,this._scrollOffset=B(),this.refs.input.focus();return}var H=void 0,se=this.state.highlightedIndex;if(this.props.selectOnBlur&&se!==null){var re=this.getFilteredItems(this.props),V=re[se],ne=this.props.getItemValue(V);H=function(){return Y.props.onSelect(ne,V)}}this.setState({isOpen:!1,highlightedIndex:null},H);var G=this.props.inputProps.onBlur;G&&G(N)}},{key:"handleInputFocus",value:function(N){var Y=this;if(this._ignoreFocus){this._ignoreFocus=!1;var H=this._scrollOffset,se=H.x,re=H.y;this._scrollOffset=null,window.scrollTo(se,re),clearTimeout(this._scrollTimer),this._scrollTimer=setTimeout(function(){Y._scrollTimer=null,window.scrollTo(se,re)},0);return}this.setState({isOpen:!0});var V=this.props.inputProps.onFocus;V&&V(N)}},{key:"isInputFocused",value:function(){var N=this.refs.input;return N.ownerDocument&&N===N.ownerDocument.activeElement}},{key:"handleInputClick",value:function(){this.isInputFocused()&&!this.isOpen()&&this.setState({isOpen:!0})}},{key:"composeEventHandlers",value:function(N,Y){return Y?function(H){N(H),Y(H)}:N}},{key:"isOpen",value:function(){return"open"in this.props?this.props.open:this.state.isOpen}},{key:"render",value:function(){this.props.debug&&this._debugStates.push({id:this._debugStates.length,state:this.state});var N=this.props.inputProps,Y=this.isOpen();return s.createElement("div",n({style:n({},this.props.wrapperStyle)},this.props.wrapperProps),this.props.renderInput(n({},N,{role:"combobox","aria-autocomplete":"list","aria-expanded":Y,autoComplete:"off",ref:this.exposeAPI,onFocus:this.handleInputFocus,onBlur:this.handleInputBlur,onChange:this.handleChange,onKeyDown:this.composeEventHandlers(this.handleKeyDown,N.onKeyDown),onClick:this.composeEventHandlers(this.handleInputClick,N.onClick),value:this.props.value})),Y&&this.renderMenu(),this.props.debug&&s.createElement("pre",{style:{marginLeft:300}},JSON.stringify(this._debugStates.slice(Math.max(0,this._debugStates.length-5),this._debugStates.length),null,2)))}}]),U}(s.Component);return O.propTypes={items:l.array.isRequired,value:l.any,onChange:l.func,onSelect:l.func,shouldItemRender:l.func,isItemSelectable:l.func,sortItems:l.func,getItemValue:l.func.isRequired,renderItem:l.func.isRequired,renderMenu:l.func,menuStyle:l.object,renderInput:l.func,inputProps:l.object,wrapperProps:l.object,wrapperStyle:l.object,autoHighlight:l.bool,selectOnBlur:l.bool,onMenuVisibilityChange:l.func,open:l.bool,debug:l.bool},O.defaultProps={value:"",wrapperProps:{},wrapperStyle:{display:"inline-block"},inputProps:{},renderInput:function(U){return s.createElement("input",U)},onChange:function(){},onSelect:function(){},isItemSelectable:function(){return!0},renderMenu:function(U,j,N){return s.createElement("div",{style:n({},N,this.menuStyle),children:U})},menuStyle:{borderRadius:"3px",boxShadow:"0 2px 12px rgba(0, 0, 0, 0.1)",background:"rgba(255, 255, 255, 0.9)",padding:"2px 0",fontSize:"90%",position:"fixed",overflow:"auto",maxHeight:"50%"},autoHighlight:!0,selectOnBlur:!1,onMenuVisibilityChange:function(){}},O.keyDownHandlers={ArrowDown:function(U){U.preventDefault();var j=this.getFilteredItems(this.props);if(j.length){for(var N=this.state.highlightedIndex,Y=N===null?-1:N,H=0;H<j.length;H++){var se=(Y+H+1)%j.length;if(this.props.isItemSelectable(j[se])){Y=se;break}}Y>-1&&Y!==N&&this.setState({highlightedIndex:Y,isOpen:!0})}},ArrowUp:function(U){U.preventDefault();var j=this.getFilteredItems(this.props);if(j.length){for(var N=this.state.highlightedIndex,Y=N===null?j.length:N,H=0;H<j.length;H++){var se=(Y-(1+H)+j.length)%j.length;if(this.props.isItemSelectable(j[se])){Y=se;break}}Y!==j.length&&this.setState({highlightedIndex:Y,isOpen:!0})}},Enter:function(U){var j=this;if(U.keyCode===13)if(this.setIgnoreBlur(!1),this.isOpen())if(this.state.highlightedIndex==null)this.setState({isOpen:!1},function(){j.refs.input.select()});else{U.preventDefault();var N=this.getFilteredItems(this.props)[this.state.highlightedIndex],Y=this.props.getItemValue(N);this.setState({isOpen:!1,highlightedIndex:null},function(){j.refs.input.setSelectionRange(Y.length,Y.length),j.props.onSelect(Y,N)})}else return},Escape:function(){this.setIgnoreBlur(!1),this.setState({highlightedIndex:null,isOpen:!1})},Tab:function(){this.setIgnoreBlur(!1)}},G4=O,G4}var sie=oie();const aie=fl(sie);function Ro(){var n="/home/runner/work/maputnik/maputnik/src/components/InputAutocomplete.tsx",e="6ef9facf9aeabdae687b5aca973710969d826d60",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputAutocomplete.tsx",statementMap:{0:{start:{line:5,column:19},end:{line:5,column:22}},1:{start:{line:7,column:10},end:{line:9,column:3}},2:{start:{line:10,column:23},end:{line:10,column:27}},3:{start:{line:11,column:24},end:{line:15,column:3}},4:{start:{line:17,column:4},end:{line:25,column:5}},5:{start:{line:18,column:24},end:{line:18,column:96}},6:{start:{line:19,column:31},end:{line:19,column:62}},7:{start:{line:20,column:6},end:{line:24,column:7}},8:{start:{line:21,column:8},end:{line:23,column:11}},9:{start:{line:28,column:4},end:{line:28,column:25}},10:{start:{line:31,column:4},end:{line:31,column:25}},11:{start:{line:34,column:4},end:{line:34,column:47}},12:{start:{line:37,column:4},end:{line:86,column:6}},13:{start:{line:41,column:10},end:{line:41,column:39}},14:{start:{line:63,column:36},end:{line:63,column:43}},15:{start:{line:64,column:29},end:{line:64,column:45}},16:{start:{line:65,column:33},end:{line:65,column:49}},17:{start:{line:67,column:14},end:{line:69,column:15}},18:{start:{line:68,column:16},end:{line:68,column:79}},19:{start:{line:70,column:14},end:{line:70,column:27}},20:{start:{line:72,column:65},end:{line:82,column:13}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:12,column:14},end:{line:12,column:15}},loc:{start:{line:12,column:20},end:{line:13,column:5}},line:12},1:{name:"(anonymous_1)",decl:{start:{line:16,column:2},end:{line:16,column:3}},loc:{start:{line:16,column:18},end:{line:26,column:3}},line:16},2:{name:"(anonymous_2)",decl:{start:{line:27,column:2},end:{line:27,column:3}},loc:{start:{line:27,column:22},end:{line:29,column:3}},line:27},3:{name:"(anonymous_3)",decl:{start:{line:30,column:2},end:{line:30,column:3}},loc:{start:{line:30,column:23},end:{line:32,column:3}},line:30},4:{name:"(anonymous_4)",decl:{start:{line:33,column:2},end:{line:33,column:3}},loc:{start:{line:33,column:14},end:{line:35,column:3}},line:33},5:{name:"(anonymous_5)",decl:{start:{line:36,column:2},end:{line:36,column:3}},loc:{start:{line:36,column:11},end:{line:87,column:3}},line:36},6:{name:"(anonymous_6)",decl:{start:{line:40,column:13},end:{line:40,column:14}},loc:{start:{line:40,column:21},end:{line:42,column:9}},line:40},7:{name:"(anonymous_7)",decl:{start:{line:63,column:26},end:{line:63,column:27}},loc:{start:{line:63,column:36},end:{line:63,column:43}},line:63},8:{name:"(anonymous_8)",decl:{start:{line:64,column:22},end:{line:64,column:23}},loc:{start:{line:64,column:29},end:{line:64,column:45}},line:64},9:{name:"(anonymous_9)",decl:{start:{line:65,column:22},end:{line:65,column:23}},loc:{start:{line:65,column:33},end:{line:65,column:49}},line:65},10:{name:"(anonymous_10)",decl:{start:{line:66,column:30},end:{line:66,column:31}},loc:{start:{line:66,column:52},end:{line:71,column:13}},line:66},11:{name:"(anonymous_11)",decl:{start:{line:72,column:24},end:{line:72,column:25}},loc:{start:{line:72,column:65},end:{line:82,column:13}},line:72}},branchMap:{0:{loc:{start:{line:17,column:4},end:{line:25,column:5}},type:"if",locations:[{start:{line:17,column:4},end:{line:25,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:17},1:{loc:{start:{line:20,column:6},end:{line:24,column:7}},type:"if",locations:[{start:{line:20,column:6},end:{line:24,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:20},2:{loc:{start:{line:34,column:24},end:{line:34,column:45}},type:"cond-expr",locations:[{start:{line:34,column:35},end:{line:34,column:41}},{start:{line:34,column:44},end:{line:34,column:45}}],line:34},3:{loc:{start:{line:66,column:37},end:{line:66,column:47}},type:"default-arg",locations:[{start:{line:66,column:45},end:{line:66,column:47}}],line:66},4:{loc:{start:{line:67,column:14},end:{line:69,column:15}},type:"if",locations:[{start:{line:67,column:14},end:{line:69,column:15}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:67}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0],4:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputAutocomplete.tsx"],names:[],mappings:"AAsFU;AAtFV,OAAO,WAAW;AAClB,OAAO,gBAAgB;AACvB,OAAO,kBAAkB;AAGzB,MAAM,aAAa;AAUnB,qBAAqB,0BAA0B,MAAM,UAAkC;AAAA,EACrF,QAAQ;AAAA,IACN,WAAW;AAAA,EACb;AAAA,EAEA,qBAA4C;AAAA,EAE5C,OAAO,eAAe;AAAA,IACpB,UAAU,MAAM;AAAA,IAAC;AAAA,IACjB,SAAS,CAAC;AAAA,EACZ;AAAA,EAEA,gBAAgB;AACd,QAAG,KAAK,MAAM,4BAA4B;AACxC,YAAM,YAAY,OAAO,cAAc,KAAK,mBAAoB,sBAAsB,EAAE;AACxF,YAAM,mBAAmB,KAAK,IAAI,WAAW,UAAU;AAEvD,UAAG,oBAAoB,KAAK,MAAM,WAAW;AAC3C,aAAK,SAAS;AAAA,UACZ,WAAW;AAAA,QACb,CAAC;AAAA,MACH;AAAA,IACF;AAAA,EACF;AAAA,EAEA,oBAAoB;AAClB,SAAK,cAAc;AAAA,EACrB;AAAA,EAEA,qBAAqB;AACnB,SAAK,cAAc;AAAA,EACrB;AAAA,EAEA,SAAS,GAAW;AAClB,SAAK,MAAM,SAAS,MAAM,KAAK,SAAY,CAAC;AAAA,EAC9C;AAAA,EAEA,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,KAAK,CAAC,OAAO;AACX,eAAK,qBAAqB;AAAA,QAC5B;AAAA,QAEA;AAAA,UAAC;AAAA;AAAA,YACC,WAAW;AAAA,cACT,UAAU;AAAA,cACV,UAAU;AAAA,cACV,WAAW,KAAK,MAAM;AAAA,cACtB,QAAQ;AAAA,YACV;AAAA,YACA,cAAc;AAAA,cACZ,WAAW;AAAA,cACX,OAAO,CAAC;AAAA,YACV;AAAA,YACA,YAAY;AAAA,cACV,cAAc,KAAK,MAAM,YAAY;AAAA,cACrC,WAAW;AAAA,cACX,YAAY;AAAA,YACd;AAAA,YACA,OAAO,KAAK,MAAM;AAAA,YAClB,OAAO,KAAK,MAAM;AAAA,YAClB,cAAc,CAAC,SAAS,KAAK,CAAC;AAAA,YAC9B,UAAU,OAAK,KAAK,SAAS,CAAC;AAAA,YAC9B,UAAU,CAAC,IAAI,MAAM,KAAK,SAAS,CAAC;AAAA,YACpC,kBAAkB,CAAC,MAAM,QAAM,OAAO;AACpC,kBAAI,OAAO,UAAW,UAAU;AAC9B,uBAAO,KAAK,CAAC,EAAE,YAAY,EAAE,QAAQ,MAAM,YAAY,CAAC,IAAI;AAAA,cAC9D;AACA,qBAAO;AAAA,YACT;AAAA,YACA,YAAY,CAAC,MAAM,kBACjB;AAAA,cAAC;AAAA;AAAA,gBAEC,WAAW,WAAW;AAAA,kBACpB,mCAAmC;AAAA,kBACnC,4CAA4C;AAAA,gBAC9C,CAAC;AAAA,gBAEA,eAAK,CAAC;AAAA;AAAA,cANF,KAAK,CAAC;AAAA,YAOb;AAAA;AAAA,QAEJ;AAAA;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"6ef9facf9aeabdae687b5aca973710969d826d60"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Ro=function(){return l},l}Ro();const S9=(Ro().s[0]++,140);class Qy extends Xn.Component{constructor(){super(...arguments);Kn(this,"state",(Ro().s[1]++,{maxHeight:S9}));Kn(this,"autocompleteMenuEl",(Ro().s[2]++,null))}calcMaxHeight(){if(Ro().f[1]++,Ro().s[4]++,this.props.keepMenuWithinWindowBounds){Ro().b[0][0]++;const t=(Ro().s[5]++,window.innerHeight-this.autocompleteMenuEl.getBoundingClientRect().top),r=(Ro().s[6]++,Math.min(t,S9));Ro().s[7]++,r!=this.state.maxHeight?(Ro().b[1][0]++,Ro().s[8]++,this.setState({maxHeight:r})):Ro().b[1][1]++}else Ro().b[0][1]++}componentDidMount(){Ro().f[2]++,Ro().s[9]++,this.calcMaxHeight()}componentDidUpdate(){Ro().f[3]++,Ro().s[10]++,this.calcMaxHeight()}onChange(t){Ro().f[4]++,Ro().s[11]++,this.props.onChange(t===""?(Ro().b[2][0]++,void 0):(Ro().b[2][1]++,t))}render(){return Ro().f[5]++,Ro().s[12]++,ue.jsx("div",{ref:t=>{Ro().f[6]++,Ro().s[13]++,this.autocompleteMenuEl=t},children:ue.jsx(aie,{menuStyle:{position:"fixed",overflow:"auto",maxHeight:this.state.maxHeight,zIndex:"998"},wrapperProps:{className:"maputnik-autocomplete",style:{}},inputProps:{"aria-label":this.props["aria-label"],className:"maputnik-string",spellCheck:!1},value:this.props.value,items:this.props.options,getItemValue:t=>(Ro().f[7]++,Ro().s[14]++,t[0]),onSelect:t=>(Ro().f[8]++,Ro().s[15]++,this.onChange(t)),onChange:(t,r)=>(Ro().f[9]++,Ro().s[16]++,this.onChange(r)),shouldItemRender:(t,r=(Ro().b[3][0]++,""))=>(Ro().f[10]++,Ro().s[17]++,typeof r=="string"?(Ro().b[4][0]++,Ro().s[18]++,t[0].toLowerCase().indexOf(r.toLowerCase())>-1):(Ro().b[4][1]++,Ro().s[19]++,!1)),renderItem:(t,r)=>(Ro().f[11]++,Ro().s[20]++,ue.jsx("div",{className:tm({"maputnik-autocomplete-menu-item":!0,"maputnik-autocomplete-menu-item-selected":r}),children:t[1]},t[0]))})})}}Kn(Qy,"defaultProps",(Ro().s[3]++,{onChange:()=>{Ro().f[0]++},options:[]}));function zp(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldSource.tsx",e="ab049bb75b4ddccd0f9bdd2bba8785d564ca92f6",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldSource.tsx",statementMap:{0:{start:{line:8,column:24},end:{line:12,column:3}},1:{start:{line:14,column:14},end:{line:14,column:26}},2:{start:{line:15,column:4},end:{line:31,column:6}},3:{start:{line:27,column:56},end:{line:27,column:66}},4:{start:{line:34,column:20},end:{line:34,column:58}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:14},end:{line:9,column:15}},loc:{start:{line:9,column:20},end:{line:10,column:5}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:13,column:2},end:{line:13,column:3}},loc:{start:{line:13,column:11},end:{line:32,column:3}},line:13},2:{name:"(anonymous_2)",decl:{start:{line:27,column:47},end:{line:27,column:48}},loc:{start:{line:27,column:56},end:{line:27,column:66}},line:27}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0,1:0,2:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldSource.tsx"],names:[],mappings:"AA6BM;AA7BN,OAAO,WAAW;AAElB,OAAO,YAAY;AACnB,OAAO,WAAW;AAClB,OAAO,uBAAuB;AAC9B,SAA0B,uBAAuB;AAUjD,MAAM,4BAA4B,MAAM,UAAoC;AAAA,EAC1E,OAAO,eAAe;AAAA,IACpB,UAAU,MAAM;AAAA,IAAC;AAAA,IACjB,WAAW,CAAC;AAAA,EACd;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,OAAO,EAAE,QAAQ;AAAA,QACjB,WAAW,OAAO,MAAM;AAAA,QACxB,OAAO,KAAK,MAAM;AAAA,QAClB,eAAa,KAAK,MAAM;AAAA,QAExB;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,KAAK,MAAM;AAAA,YAClB,UAAU,KAAK,MAAM;AAAA,YACrB,SAAS,KAAK,MAAM,WAAW,IAAI,SAAO,CAAC,KAAK,GAAG,CAAC;AAAA;AAAA,QACtD;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,cAAc,gBAAgB,EAAE,mBAAmB;AACzD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ab049bb75b4ddccd0f9bdd2bba8785d564ca92f6"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return zp=function(){return l},l}zp();class mz extends Xn.Component{render(){var t;zp().f[1]++;const e=(zp().s[1]++,this.props.t);return zp().s[2]++,ue.jsx(la,{label:e("Source"),fieldSpec:Xo.layer.source,error:this.props.error,"data-wd-key":this.props.wdKey,children:ue.jsx(Qy,{value:this.props.value,onChange:this.props.onChange,options:(t=this.props.sourceIds)==null?void 0:t.map(r=>(zp().f[2]++,zp().s[3]++,[r,r]))})})}}Kn(mz,"defaultProps",(zp().s[0]++,{onChange:()=>{zp().f[0]++},sourceIds:[]}));const gz=(zp().s[4]++,zs()(mz));function jp(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldSourceLayer.tsx",e="d17faa4f03faf23184e12eb0563d322067d1f63d",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldSourceLayer.tsx",statementMap:{0:{start:{line:8,column:24},end:{line:13,column:3}},1:{start:{line:15,column:14},end:{line:15,column:26}},2:{start:{line:16,column:4},end:{line:33,column:6}},3:{start:{line:29,column:59},end:{line:29,column:65}},4:{start:{line:36,column:25},end:{line:36,column:68}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:14},end:{line:9,column:15}},loc:{start:{line:9,column:20},end:{line:10,column:5}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:11},end:{line:34,column:3}},line:14},2:{name:"(anonymous_2)",decl:{start:{line:29,column:52},end:{line:29,column:53}},loc:{start:{line:29,column:59},end:{line:29,column:65}},line:29}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0,1:0,2:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldSourceLayer.tsx"],names:[],mappings:"AA8BM;AA9BN,OAAO,WAAW;AAElB,SAAQ,cAAa;AACrB,OAAO,WAAW;AAClB,OAAO,uBAAuB;AAC9B,SAA0B,uBAAuB;AAUjD,MAAM,iCAAiC,MAAM,UAAyC;AAAA,EACpF,OAAO,eAAe;AAAA,IACpB,UAAU,MAAM;AAAA,IAAC;AAAA,IACjB,gBAAgB,CAAC;AAAA,IACjB,SAAS;AAAA,EACX;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,OAAO,EAAE,cAAc;AAAA,QACvB,WAAW,OAAO,MAAM,cAAc;AAAA,QACtC,eAAY;AAAA,QACZ,OAAO,KAAK,MAAM;AAAA,QAElB;AAAA,UAAC;AAAA;AAAA,YACC,4BAA4B,CAAC,CAAC,KAAK,MAAM;AAAA,YACzC,OAAO,KAAK,MAAM;AAAA,YAClB,UAAU,KAAK,MAAM;AAAA,YACrB,SAAS,KAAK,MAAM,gBAAgB,IAAI,OAAK,CAAC,GAAG,CAAC,CAAC;AAAA;AAAA,QACrD;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,mBAAmB,gBAAgB,EAAE,wBAAwB;AACnE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d17faa4f03faf23184e12eb0563d322067d1f63d"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return jp=function(){return l},l}jp();class yz extends Xn.Component{render(){var t;jp().f[1]++;const e=(jp().s[1]++,this.props.t);return jp().s[2]++,ue.jsx(la,{label:e("Source Layer"),fieldSpec:Ms.layer["source-layer"],"data-wd-key":"layer-source-layer",error:this.props.error,children:ue.jsx(Qy,{keepMenuWithinWindowBounds:!!this.props.isFixed,value:this.props.value,onChange:this.props.onChange,options:(t=this.props.sourceLayerIds)==null?void 0:t.map(r=>(jp().f[2]++,jp().s[3]++,[r,r]))})})}}Kn(yz,"defaultProps",(jp().s[0]++,{onChange:()=>{jp().f[0]++},sourceLayerIds:[],isFixed:!1}));const vz=(jp().s[4]++,zs()(yz));function Wr(){var n="/home/runner/work/maputnik/maputnik/src/components/ModalAdd.tsx",e="7a9f0314912c2a2e8e47cddf3aaf5469476531e0",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ModalAdd.tsx",statementMap:{0:{start:{line:11,column:13},end:{line:26,column:3}},1:{start:{line:12,column:26},end:{line:12,column:52}},2:{start:{line:13,column:18},end:{line:16,column:5}},3:{start:{line:17,column:4},end:{line:22,column:5}},4:{start:{line:18,column:6},end:{line:18,column:39}},5:{start:{line:19,column:6},end:{line:21,column:7}},6:{start:{line:20,column:8},end:{line:20,column:59}},7:{start:{line:23,column:4},end:{line:23,column:30}},8:{start:{line:24,column:4},end:{line:24,column:45}},9:{start:{line:25,column:4},end:{line:25,column:35}},10:{start:{line:28,column:4},end:{line:28,column:17}},11:{start:{line:29,column:18},end:{line:32,column:5}},12:{start:{line:33,column:4},end:{line:36,column:5}},13:{start:{line:34,column:6},end:{line:34,column:56}},14:{start:{line:35,column:6},end:{line:35,column:66}},15:{start:{line:37,column:4},end:{line:37,column:23}},16:{start:{line:40,column:20},end:{line:40,column:34}},17:{start:{line:41,column:20},end:{line:41,column:35}},18:{start:{line:42,column:32},end:{line:42,column:56}},19:{start:{line:43,column:32},end:{line:43,column:56}},20:{start:{line:44,column:4},end:{line:51,column:5}},21:{start:{line:48,column:6},end:{line:50,column:9}},22:{start:{line:54,column:22},end:{line:54,column:54}},23:{start:{line:55,column:4},end:{line:55,column:34}},24:{start:{line:58,column:20},end:{line:58,column:22}},25:{start:{line:59,column:18},end:{line:79,column:5}},26:{start:{line:80,column:4},end:{line:85,column:5}},27:{start:{line:81,column:22},end:{line:81,column:30}},28:{start:{line:82,column:6},end:{line:84,column:7}},29:{start:{line:83,column:8},end:{line:83,column:26}},30:{start:{line:86,column:4},end:{line:86,column:19}},31:{start:{line:89,column:14},end:{line:89,column:26}},32:{start:{line:90,column:20},end:{line:90,column:52}},33:{start:{line:91,column:19},end:{line:91,column:61}},34:{start:{line:92,column:4},end:{line:148,column:6}},35:{start:{line:107,column:16},end:{line:107,column:41}},36:{start:{line:116,column:31},end:{line:116,column:57}},37:{start:{line:125,column:31},end:{line:125,column:59}},38:{start:{line:134,column:31},end:{line:134,column:67}},39:{start:{line:151,column:17},end:{line:151,column:52}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:11,column:13},end:{line:11,column:14}},loc:{start:{line:11,column:19},end:{line:26,column:3}},line:11},1:{name:"(anonymous_1)",decl:{start:{line:27,column:2},end:{line:27,column:3}},loc:{start:{line:27,column:21},end:{line:38,column:3}},line:27},2:{name:"(anonymous_2)",decl:{start:{line:39,column:2},end:{line:39,column:3}},loc:{start:{line:39,column:44},end:{line:52,column:3}},line:39},3:{name:"(anonymous_3)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:29},end:{line:56,column:3}},line:53},4:{name:"(anonymous_4)",decl:{start:{line:57,column:2},end:{line:57,column:3}},loc:{start:{line:57,column:19},end:{line:87,column:3}},line:57},5:{name:"(anonymous_5)",decl:{start:{line:88,column:2},end:{line:88,column:3}},loc:{start:{line:88,column:11},end:{line:149,column:3}},line:88},6:{name:"(anonymous_6)",decl:{start:{line:106,column:24},end:{line:106,column:25}},loc:{start:{line:106,column:31},end:{line:108,column:15}},line:106},7:{name:"(anonymous_7)",decl:{start:{line:116,column:24},end:{line:116,column:25}},loc:{start:{line:116,column:31},end:{line:116,column:57}},line:116},8:{name:"(anonymous_8)",decl:{start:{line:125,column:24},end:{line:125,column:25}},loc:{start:{line:125,column:31},end:{line:125,column:59}},line:125},9:{name:"(anonymous_9)",decl:{start:{line:134,column:24},end:{line:134,column:25}},loc:{start:{line:134,column:31},end:{line:134,column:67}},line:134}},branchMap:{0:{loc:{start:{line:17,column:4},end:{line:22,column:5}},type:"if",locations:[{start:{line:17,column:4},end:{line:22,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:17},1:{loc:{start:{line:19,column:6},end:{line:21,column:7}},type:"if",locations:[{start:{line:19,column:6},end:{line:21,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:19},2:{loc:{start:{line:19,column:10},end:{line:19,column:68}},type:"binary-expr",locations:[{start:{line:19,column:10},end:{line:19,column:38}},{start:{line:19,column:42},end:{line:19,column:68}}],line:19},3:{loc:{start:{line:33,column:4},end:{line:36,column:5}},type:"if",locations:[{start:{line:33,column:4},end:{line:36,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:33},4:{loc:{start:{line:44,column:4},end:{line:51,column:5}},type:"if",locations:[{start:{line:44,column:4},end:{line:51,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:44},5:{loc:{start:{line:46,column:6},end:{line:46,column:160}},type:"binary-expr",locations:[{start:{line:46,column:6},end:{line:46,column:25}},{start:{line:46,column:29},end:{line:46,column:52}},{start:{line:46,column:56},end:{line:46,column:106}},{start:{line:46,column:110},end:{line:46,column:160}}],line:46},6:{loc:{start:{line:54,column:22},end:{line:54,column:54}},type:"binary-expr",locations:[{start:{line:54,column:22},end:{line:54,column:48}},{start:{line:54,column:52},end:{line:54,column:54}}],line:54},7:{loc:{start:{line:55,column:11},end:{line:55,column:33}},type:"binary-expr",locations:[{start:{line:55,column:11},end:{line:55,column:27}},{start:{line:55,column:31},end:{line:55,column:33}}],line:55},8:{loc:{start:{line:82,column:6},end:{line:84,column:7}},type:"if",locations:[{start:{line:82,column:6},end:{line:84,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:82},9:{loc:{start:{line:82,column:10},end:{line:82,column:61}},type:"binary-expr",locations:[{start:{line:82,column:10},end:{line:82,column:24}},{start:{line:82,column:28},end:{line:82,column:61}}],line:82},10:{loc:{start:{line:119,column:10},end:{line:127,column:11}},type:"binary-expr",locations:[{start:{line:119,column:10},end:{line:119,column:42}},{start:{line:119,column:62},end:{line:127,column:11}}],line:119},11:{loc:{start:{line:128,column:10},end:{line:136,column:11}},type:"binary-expr",locations:[{start:{line:128,column:10},end:{line:128,column:87}},{start:{line:128,column:107},end:{line:136,column:11}}],line:128}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0,0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ModalAdd.tsx"],names:[],mappings:"AA2IM,SACE,KADF;AA3IN,OAAO,WAAW;AAElB,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAClB,OAAO,eAAe;AACtB,OAAO,aAAa;AACpB,OAAO,iBAAiB;AACxB,OAAO,sBAAsB;AAE7B,SAA0B,uBAAuB;AAkBjD,MAAM,yBAAyB,MAAM,UAAgD;AAAA,EACnF,WAAW,MAAM;AACf,UAAM,gBAAgB,KAAK,MAAM,OAAO,MAAM,CAAC;AAC/C,UAAM,QAAuB;AAAA,MAC3B,IAAI,KAAK,MAAM;AAAA,MACf,MAAM,KAAK,MAAM;AAAA,IACnB;AAEA,QAAG,KAAK,MAAM,SAAS,cAAc;AACnC,YAAM,SAAS,KAAK,MAAM;AAC1B,UAAG,KAAK,MAAM,SAAS,YAAY,KAAK,MAAM,cAAc,GAAG;AAC7D,cAAM,cAAc,IAAI,KAAK,MAAM,cAAc;AAAA,MACnD;AAAA,IACF;AAEA,kBAAc,KAAK,KAA2B;AAE9C,SAAK,MAAM,eAAe,aAAa;AACvC,SAAK,MAAM,aAAa,KAAK;AAAA,EAC/B;AAAA,EAEA,YAAY,OAA8B;AACxC,UAAM,KAAK;AACX,UAAM,QAAuB;AAAA,MAC3B,MAAM;AAAA,MACN,IAAI;AAAA,IACN;AAEA,QAAG,MAAM,QAAQ,SAAS,GAAG;AAC3B,YAAM,SAAS,OAAO,KAAK,KAAK,MAAM,OAAO,EAAE,CAAC;AAChD,YAAM,cAAc,IAAI,KAAK,MAAM,QAAQ,MAAM,MAAgD,EAAE,CAAC;AAAA,IACtG;AACA,SAAK,QAAQ;AAAA,EACf;AAAA,EAEA,mBAAmB,YAAmC,WAA0B;AAE9E,UAAM,UAAU,UAAU;AAC1B,UAAM,UAAU,KAAK,MAAM;AAE3B,UAAM,sBAAsB,KAAK,WAAW,OAAO;AACnD,UAAM,sBAAsB,KAAK,WAAW,OAAO;AAEnD;AAAA;AAAA,MAEE,YAAY,WACT,UAAU,WAAW,MAErB,oBAAoB,QAAQ,UAAU,MAAO,IAAI,MAEjD,oBAAoB,QAAQ,KAAK,MAAM,MAAO,IAAI;AAAA,MACrD;AAEA,WAAK,SAAS;AAAA,QACZ,QAAQ;AAAA,MACV,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,mBAAmB,QAAgB;AACjC,UAAM,YAAY,KAAK,MAAM,QAAQ,MAAM,KAAK,CAAC;AACjD,WAAO,UAAU,UAAU,CAAC;AAAA,EAC9B;AAAA,EAEA,WAAW,MAAc;AACvB,UAAM,UAAU,CAAC;AAEjB,UAAM,QAAQ;AAAA,MACZ,QAAQ;AAAA,QACN;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,MACF;AAAA,MACA,QAAQ;AAAA,QACN;AAAA,MACF;AAAA,MACA,SAAS;AAAA,QACP;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,MACF;AAAA,IACF;AAEA,eAAU,CAAC,KAAK,GAAG,KAAK,OAAO,QAAQ,KAAK,MAAM,OAAO,GAAU;AACjE,YAAM,UAAU,IAAI;AACpB,UAAG,MAAM,OAAO,KAAK,MAAM,OAAO,EAAE,QAAQ,IAAI,IAAI,IAAI;AACtD,gBAAQ,KAAK,GAAG;AAAA,MAClB;AAAA,IACF;AAEA,WAAO;AAAA,EACT;AAAA,EAGA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,UAAU,KAAK,WAAW,KAAK,MAAM,IAAI;AAC/C,UAAM,SAAS,KAAK,mBAAmB,KAAK,MAAM,MAAO;AAEzD,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,WAAW;AAAA,QACpB,eAAY;AAAA,QACZ,WAAU;AAAA,QAEV,+BAAC,SAAI,WAAU,sBACb;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,KAAK,MAAM;AAAA,cAClB,OAAM;AAAA,cACN,UAAU,CAAC,MAAc;AACvB,qBAAK,SAAS,EAAE,IAAI,EAAE,CAAC;AAAA,cACzB;AAAA;AAAA,UACF;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,KAAK,MAAM;AAAA,cAClB,OAAM;AAAA,cACN,UAAU,CAAC,MAAkC,KAAK,SAAS,EAAE,MAAM,EAAE,CAAC;AAAA;AAAA,UACxE;AAAA,UACC,KAAK,MAAM,SAAS,gBACvB;AAAA,YAAC;AAAA;AAAA,cACC,WAAW;AAAA,cACX,OAAM;AAAA,cACN,OAAO,KAAK,MAAM;AAAA,cAClB,UAAU,CAAC,MAAc,KAAK,SAAS,EAAE,QAAQ,EAAE,CAAC;AAAA;AAAA,UACtD;AAAA,UAEG,CAAC,cAAc,UAAU,aAAa,SAAS,EAAE,QAAQ,KAAK,MAAM,IAAI,IAAI,KAC/E;AAAA,YAAC;AAAA;AAAA,cACC,SAAS;AAAA,cACT,gBAAgB;AAAA,cAChB,OAAO,KAAK,MAAM,cAAc;AAAA,cAChC,UAAU,CAAC,MAAc,KAAK,SAAS,EAAE,gBAAgB,EAAE,CAAC;AAAA;AAAA,UAC9D;AAAA,UAEE;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK;AAAA,cACd,eAAY;AAAA,cAEX,YAAE,WAAW;AAAA;AAAA,UAChB;AAAA,WACF;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,WAAW,gBAAgB,EAAE,gBAAgB;AACnD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"7a9f0314912c2a2e8e47cddf3aaf5469476531e0"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Wr=function(){return l},l}Wr();class lie extends Xn.Component{constructor(t){Wr().f[1]++,Wr().s[10]++;super(t);Kn(this,"addLayer",(Wr().s[0]++,()=>{Wr().f[0]++;const t=(Wr().s[1]++,this.props.layers.slice(0)),r=(Wr().s[2]++,{id:this.state.id,type:this.state.type});Wr().s[3]++,this.state.type!=="background"?(Wr().b[0][0]++,Wr().s[4]++,r.source=this.state.source,Wr().s[5]++,Wr().b[2][0]++,this.state.type!=="raster"&&(Wr().b[2][1]++,this.state["source-layer"])?(Wr().b[1][0]++,Wr().s[6]++,r["source-layer"]=this.state["source-layer"]):Wr().b[1][1]++):Wr().b[0][1]++,Wr().s[7]++,t.push(r),Wr().s[8]++,this.props.onLayersChange(t),Wr().s[9]++,this.props.onOpenToggle(!1)}));const r=(Wr().s[11]++,{type:"fill",id:""});Wr().s[12]++,t.sources.length>0?(Wr().b[3][0]++,Wr().s[13]++,r.source=Object.keys(this.props.sources)[0],Wr().s[14]++,r["source-layer"]=this.props.sources[r.source][0]):Wr().b[3][1]++,Wr().s[15]++,this.state=r}componentDidUpdate(t,r){Wr().f[2]++;const i=(Wr().s[16]++,r.type),s=(Wr().s[17]++,this.state.type),l=(Wr().s[18]++,this.getSources(i)),o=(Wr().s[19]++,this.getSources(s));Wr().s[20]++,Wr().b[5][0]++,i!==s&&(Wr().b[5][1]++,r.source!=="")&&(Wr().b[5][2]++,l.indexOf(r.source)>-1)&&(Wr().b[5][3]++,o.indexOf(this.state.source)<0)?(Wr().b[4][0]++,Wr().s[21]++,this.setState({source:""})):Wr().b[4][1]++}getLayersForSource(t){Wr().f[3]++;const r=(Wr().s[22]++,Wr().b[6][0]++,this.props.sources[t]||(Wr().b[6][1]++,{}));return Wr().s[23]++,Wr().b[7][0]++,r.layers||(Wr().b[7][1]++,[])}getSources(t){Wr().f[4]++;const r=(Wr().s[24]++,[]),i=(Wr().s[25]++,{vector:["fill","line","symbol","circle","fill-extrusion","heatmap"],raster:["raster"],geojson:["fill","line","symbol","circle","fill-extrusion","heatmap"]});Wr().s[26]++;for(const[s,l]of Object.entries(this.props.sources)){const o=(Wr().s[27]++,l.type);Wr().s[28]++,Wr().b[9][0]++,i[o]&&(Wr().b[9][1]++,i[o].indexOf(t)>-1)?(Wr().b[8][0]++,Wr().s[29]++,r.push(s)):Wr().b[8][1]++}return Wr().s[30]++,r}render(){Wr().f[5]++;const t=(Wr().s[31]++,this.props.t),r=(Wr().s[32]++,this.getSources(this.state.type)),i=(Wr().s[33]++,this.getLayersForSource(this.state.source));return Wr().s[34]++,ue.jsx(Y0,{isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:t("Add Layer"),"data-wd-key":"modal:add-layer",className:"maputnik-add-modal",children:ue.jsxs("div",{className:"maputnik-add-layer",children:[ue.jsx(pz,{value:this.state.id,wdKey:"add-layer.layer-id",onChange:s=>{Wr().f[6]++,Wr().s[35]++,this.setState({id:s})}}),ue.jsx(fz,{value:this.state.type,wdKey:"add-layer.layer-type",onChange:s=>(Wr().f[7]++,Wr().s[36]++,this.setState({type:s}))}),(Wr().b[10][0]++,this.state.type!=="background"&&(Wr().b[10][1]++,ue.jsx(gz,{sourceIds:r,wdKey:"add-layer.layer-source-block",value:this.state.source,onChange:s=>(Wr().f[8]++,Wr().s[37]++,this.setState({source:s}))}))),(Wr().b[11][0]++,["background","raster","hillshade","heatmap"].indexOf(this.state.type)<0&&(Wr().b[11][1]++,ue.jsx(vz,{isFixed:!0,sourceLayerIds:i,value:this.state["source-layer"],onChange:s=>(Wr().f[9]++,Wr().s[38]++,this.setState({"source-layer":s}))}))),ue.jsx(Ha,{className:"maputnik-add-layer-button",onClick:this.addLayer,"data-wd-key":"add-layer",children:t("Add Layer")})]})})}}const uie=(Wr().s[39]++,zs()(lie));function Bg(){var n="/home/runner/work/maputnik/maputnik/src/libs/document-uid.ts",e="a991ed6da2a27b46f1adbb88a645aa2ee0df375e",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/document-uid.ts",statementMap:{0:{start:{line:1,column:10},end:{line:1,column:11}},1:{start:{line:3,column:2},end:{line:3,column:8}},2:{start:{line:4,column:2},end:{line:4,column:22}}},fnMap:{0:{name:"generateUniqueId",decl:{start:{line:2,column:24},end:{line:2,column:40}},loc:{start:{line:2,column:54},end:{line:5,column:1}},line:2}},branchMap:{0:{loc:{start:{line:2,column:41},end:{line:2,column:52}},type:"default-arg",locations:[{start:{line:2,column:50},end:{line:2,column:52}}],line:2}},s:{0:0,1:0,2:0},f:{0:0},b:{0:[0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/document-uid.ts"],names:[],mappings:"AAGA,IAAI,MAAM;AAEV,wBAAwB,iBAAiB,SAAO,IAAI;AAClD;AACA,SAAO,SAAO;AAChB;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a991ed6da2a27b46f1adbb88a645aa2ee0df375e"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Bg=function(){return l},l}Bg();let E9=(Bg().s[0]++,0);function Py(n=(Bg().b[0][0]++,"")){return Bg().f[0]++,Bg().s[1]++,E9++,Bg().s[2]++,n+E9}function Ni(){var n="/home/runner/work/maputnik/maputnik/src/libs/layer.ts",e="8d7d71e3a97c0e4b8cc5fd0ca26b8fdf4aa2aa36",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/layer.ts",statementMap:{0:{start:{line:3,column:28},end:{line:3,column:46}},1:{start:{line:4,column:2},end:{line:8,column:5}},2:{start:{line:5,column:4},end:{line:7,column:5}},3:{start:{line:6,column:6},end:{line:6,column:45}},4:{start:{line:9,column:29},end:{line:9,column:48}},5:{start:{line:10,column:2},end:{line:14,column:5}},6:{start:{line:11,column:4},end:{line:13,column:5}},7:{start:{line:12,column:6},end:{line:12,column:46}},8:{start:{line:15,column:2},end:{line:20,column:4}},9:{start:{line:23,column:2},end:{line:59,column:3}},10:{start:{line:24,column:4},end:{line:43,column:5}},11:{start:{line:25,column:23},end:{line:31,column:7}},12:{start:{line:32,column:6},end:{line:32,column:39}},13:{start:{line:33,column:6},end:{line:35,column:7}},14:{start:{line:34,column:8},end:{line:34,column:31}},15:{start:{line:36,column:6},end:{line:36,column:22}},16:{start:{line:38,column:23},end:{line:40,column:7}},17:{start:{line:41,column:6},end:{line:41,column:32}},18:{start:{line:42,column:6},end:{line:42,column:22}},19:{start:{line:45,column:4},end:{line:58,column:5}},20:{start:{line:46,column:6},end:{line:52,column:8}},21:{start:{line:54,column:6},end:{line:57,column:8}},22:{start:{line:62,column:2},end:{line:62,column:64}},23:{start:{line:65,column:29},end:{line:65,column:56}},24:{start:{line:66,column:19},end:{line:66,column:22}},25:{start:{line:67,column:2},end:{line:74,column:3}},26:{start:{line:67,column:15},end:{line:67,column:18}},27:{start:{line:68,column:32},end:{line:68,column:61}},28:{start:{line:69,column:4},end:{line:73,column:5}},29:{start:{line:70,column:6},end:{line:70,column:25}},30:{start:{line:72,column:6},end:{line:72,column:24}},31:{start:{line:75,column:2},end:{line:75,column:20}}},fnMap:{0:{name:"changeType",decl:{start:{line:2,column:16},end:{line:2,column:26}},loc:{start:{line:2,column:43},end:{line:21,column:1}},line:2},1:{name:"(anonymous_1)",decl:{start:{line:4,column:41},end:{line:4,column:42}},loc:{start:{line:4,column:59},end:{line:8,column:3}},line:4},2:{name:"(anonymous_2)",decl:{start:{line:10,column:42},end:{line:10,column:43}},loc:{start:{line:10,column:60},end:{line:14,column:3}},line:10},3:{name:"changeProperty",decl:{start:{line:22,column:16},end:{line:22,column:30}},loc:{start:{line:22,column:65},end:{line:60,column:1}},line:22},4:{name:"layerPrefix",decl:{start:{line:61,column:16},end:{line:61,column:27}},loc:{start:{line:61,column:34},end:{line:63,column:1}},line:61},5:{name:"findClosestCommonPrefix",decl:{start:{line:64,column:16},end:{line:64,column:39}},loc:{start:{line:64,column:53},end:{line:76,column:1}},line:64}},branchMap:{0:{loc:{start:{line:5,column:4},end:{line:7,column:5}},type:"if",locations:[{start:{line:5,column:4},end:{line:7,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:5},1:{loc:{start:{line:11,column:4},end:{line:13,column:5}},type:"if",locations:[{start:{line:11,column:4},end:{line:13,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:11},2:{loc:{start:{line:23,column:2},end:{line:59,column:3}},type:"if",locations:[{start:{line:23,column:2},end:{line:59,column:3}},{start:{line:44,column:9},end:{line:59,column:3}}],line:23},3:{loc:{start:{line:24,column:4},end:{line:43,column:5}},type:"if",locations:[{start:{line:24,column:4},end:{line:43,column:5}},{start:{line:37,column:11},end:{line:43,column:5}}],line:24},4:{loc:{start:{line:33,column:6},end:{line:35,column:7}},type:"if",locations:[{start:{line:33,column:6},end:{line:35,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:33},5:{loc:{start:{line:45,column:4},end:{line:58,column:5}},type:"if",locations:[{start:{line:45,column:4},end:{line:58,column:5}},{start:{line:53,column:11},end:{line:58,column:5}}],line:45},6:{loc:{start:{line:69,column:4},end:{line:73,column:5}},type:"if",locations:[{start:{line:69,column:4},end:{line:73,column:5}},{start:{line:71,column:11},end:{line:73,column:5}}],line:69}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/layer.ts"],names:[],mappings:"AAAA,SAAQ,cAAa;AAGd,gBAAS,WAAW,OAA2B,SAAiB;AACrE,QAAM,oBAAiD,EAAE,GAAG,MAAM,MAAM;AACxE,SAAO,KAAK,iBAAiB,EAAE,QAAQ,kBAAgB;AACrD,QAAG,EAAE,gBAAgB,OAAO,WAAW,OAAO,IAAI;AAChD,aAAO,kBAAkB,YAAiD;AAAA,IAC5E;AAAA,EACF,CAAC;AAED,QAAM,qBAAmD,EAAE,GAAG,MAAM,OAAO;AAC3E,SAAO,KAAK,kBAAkB,EAAE,QAAQ,kBAAgB;AACtD,QAAG,EAAE,gBAAgB,OAAO,YAAY,OAAO,IAAI;AACjD,aAAO,mBAAmB,YAAkD;AAAA,IAC9E;AAAA,EACF,CAAC;AAED,SAAO;AAAA,IACL,GAAG;AAAA,IACH,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,MAAM;AAAA,EACR;AACF;AAKO,gBAAS,eAAe,OAA2B,OAAwC,UAAkB,UAAe;AAEjI,MAAG,aAAa,QAAW;AACzB,QAAG,OAAO;AACR,YAAM,WAAgB;AAAA,QACpB,GAAG;AAAA;AAAA,QAEH,CAAC,KAAK,GAAG;AAAA,UACP,GAAG,MAAM,KAAK;AAAA,QAChB;AAAA,MACF;AACA,aAAO,SAAS,KAAK,EAAE,QAAQ;AAG/B,UAAG,OAAO,KAAK,SAAS,KAAK,CAAC,EAAE,SAAS,GAAG;AAC1C,eAAO,SAAS,KAAK;AAAA,MACvB;AACA,aAAO;AAAA,IACT,OAAO;AACL,YAAM,WAAgB;AAAA,QACpB,GAAG;AAAA,MACL;AACA,aAAO,SAAS,QAAQ;AACxB,aAAO;AAAA,IACT;AAAA,EACF,OACK;AACH,QAAG,OAAO;AACR,aAAO;AAAA,QACL,GAAG;AAAA,QACH,CAAC,KAAK,GAAG;AAAA,UACP,GAAG,MAAM,KAAK;AAAA,UACd,CAAC,QAAQ,GAAG;AAAA,QACd;AAAA,MACF;AAAA,IACF,OAAO;AACL,aAAO;AAAA,QACL,GAAG;AAAA,QACH,CAAC,QAAQ,GAAG;AAAA,MACd;AAAA,IACF;AAAA,EACF;AACF;AAEO,gBAAS,YAAY,MAAc;AACxC,SAAO,KAAK,QAAQ,KAAK,GAAG,EAAE,QAAQ,KAAK,GAAG,EAAE,MAAM,GAAG,EAAE,CAAC;AAC9D;AAEO,gBAAS,wBAAwB,QAA8B,KAAa;AACjF,QAAM,qBAAqB,YAAY,OAAO,GAAG,EAAE,EAAE;AACrD,MAAI,aAAa;AACjB,WAAS,IAAI,KAAK,IAAI,GAAG,KAAK;AAC5B,UAAM,sBAAsB,YAAY,OAAO,IAAE,CAAC,EAAE,EAAE;AACtD,QAAG,wBAAwB,oBAAoB;AAC7C,mBAAa,IAAI;AAAA,IACnB,OAAO;AACL,aAAO;AAAA,IACT;AAAA,EACF;AACA,SAAO;AACT;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8d7d71e3a97c0e4b8cc5fd0ca26b8fdf4aa2aa36"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Ni=function(){return l},l}Ni();function Aie(n,e){Ni().f[0]++;const t=(Ni().s[0]++,{...n.paint});Ni().s[1]++,Object.keys(t).forEach(i=>{Ni().f[1]++,Ni().s[2]++,i in Ms["paint_"+e]?Ni().b[0][1]++:(Ni().b[0][0]++,Ni().s[3]++,delete t[i])});const r=(Ni().s[4]++,{...n.layout});return Ni().s[5]++,Object.keys(r).forEach(i=>{Ni().f[2]++,Ni().s[6]++,i in Ms["layout_"+e]?Ni().b[1][1]++:(Ni().b[1][0]++,Ni().s[7]++,delete r[i])}),Ni().s[8]++,{...n,paint:t,layout:r,type:e}}function cie(n,e,t,r){if(Ni().f[3]++,Ni().s[9]++,r===void 0)if(Ni().b[2][0]++,Ni().s[10]++,e){Ni().b[3][0]++;const i=(Ni().s[11]++,{...n,[e]:{...n[e]}});return Ni().s[12]++,delete i[e][t],Ni().s[13]++,Object.keys(i[e]).length<1?(Ni().b[4][0]++,Ni().s[14]++,delete i[e]):Ni().b[4][1]++,Ni().s[15]++,i}else{Ni().b[3][1]++;const i=(Ni().s[16]++,{...n});return Ni().s[17]++,delete i[t],Ni().s[18]++,i}else return Ni().b[2][1]++,Ni().s[19]++,e?(Ni().b[5][0]++,Ni().s[20]++,{...n,[e]:{...n[e],[t]:r}}):(Ni().b[5][1]++,Ni().s[21]++,{...n,[t]:r})}function sy(n){return Ni().f[4]++,Ni().s[22]++,n.replace(" ","-").replace("_","-").split("-")[0]}function die(n,e){Ni().f[5]++;const t=(Ni().s[23]++,sy(n[e].id));let r=(Ni().s[24]++,e);Ni().s[25]++;for(let i=(Ni().s[26]++,e);i>0;i--){const s=(Ni().s[27]++,sy(n[i-1].id));if(Ni().s[28]++,s===t)Ni().b[6][0]++,Ni().s[29]++,r=i-1;else return Ni().b[6][1]++,Ni().s[30]++,r}return Ni().s[31]++,r}function _n(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerList.tsx",e="fce844afd94013ad4b9b4e84bd148b8b849d3079",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/LayerList.tsx",statementMap:{0:{start:{line:13,column:24},end:{line:16,column:3}},1:{start:{line:20,column:4},end:{line:20,column:17}},2:{start:{line:21,column:4},end:{line:21,column:45}},3:{start:{line:22,column:4},end:{line:22,column:48}},4:{start:{line:23,column:4},end:{line:32,column:6}},5:{start:{line:35,column:4},end:{line:44,column:7}},6:{start:{line:46,column:17},end:{line:63,column:3}},7:{start:{line:47,column:14},end:{line:47,column:15}},8:{start:{line:48,column:22},end:{line:48,column:24}},9:{start:{line:49,column:4},end:{line:58,column:7}},10:{start:{line:50,column:26},end:{line:50,column:51}},11:{start:{line:51,column:24},end:{line:51,column:52}},12:{start:{line:52,column:6},end:{line:54,column:7}},13:{start:{line:53,column:8},end:{line:53,column:63}},14:{start:{line:55,column:6},end:{line:57,column:9}},15:{start:{line:56,column:8},end:{line:56,column:17}},16:{start:{line:59,column:4},end:{line:62,column:7}},17:{start:{line:65,column:19},end:{line:65,column:21}},18:{start:{line:66,column:41},end:{line:66,column:50}},19:{start:{line:67,column:4},end:{line:84,column:5}},20:{start:{line:67,column:17},end:{line:67,column:18}},21:{start:{line:68,column:24},end:{line:68,column:44}},22:{start:{line:69,column:28},end:{line:69,column:52}},23:{start:{line:70,column:6},end:{line:73,column:8}},24:{start:{line:74,column:20},end:{line:77,column:7}},25:{start:{line:78,column:6},end:{line:83,column:7}},26:{start:{line:79,column:26},end:{line:79,column:51}},27:{start:{line:80,column:8},end:{line:80,column:30}},28:{start:{line:82,column:8},end:{line:82,column:29}},29:{start:{line:85,column:4},end:{line:85,column:18}},30:{start:{line:88,column:22},end:{line:88,column:50}},31:{start:{line:89,column:22},end:{line:89,column:55}},32:{start:{line:90,column:4},end:{line:94,column:5}},33:{start:{line:91,column:6},end:{line:91,column:68}},34:{start:{line:93,column:6},end:{line:93,column:35}},35:{start:{line:95,column:4},end:{line:97,column:7}},36:{start:{line:100,column:22},end:{line:100,column:78}},37:{start:{line:101,column:4},end:{line:101,column:51}},38:{start:{line:104,column:4},end:{line:106,column:5}},39:{start:{line:105,column:6},end:{line:105,column:18}},40:{start:{line:108,column:18},end:{line:110,column:7}},41:{start:{line:111,column:6},end:{line:115,column:7}},42:{start:{line:112,column:8},end:{line:114,column:10}},43:{start:{line:116,column:6},end:{line:116,column:17}},44:{start:{line:118,column:24},end:{line:121,column:5}},45:{start:{line:123,column:18},end:{line:125,column:7}},46:{start:{line:126,column:6},end:{line:126,column:27}},47:{start:{line:127,column:6},end:{line:127,column:17}},48:{start:{line:129,column:23},end:{line:132,column:5}},49:{start:{line:133,column:25},end:{line:133,column:53}},50:{start:{line:134,column:4},end:{line:134,column:24}},51:{start:{line:137,column:4},end:{line:153,column:5}},52:{start:{line:138,column:31},end:{line:138,column:59}},53:{start:{line:139,column:6},end:{line:152,column:7}},54:{start:{line:140,column:23},end:{line:140,column:44}},55:{start:{line:141,column:24},end:{line:144,column:9}},56:{start:{line:145,column:25},end:{line:150,column:19}},57:{start:{line:146,column:10},end:{line:146,column:37}},58:{start:{line:147,column:10},end:{line:149,column:11}},59:{start:{line:148,column:12},end:{line:148,column:36}},60:{start:{line:151,column:8},end:{line:151,column:33}},61:{start:{line:156,column:22},end:{line:156,column:24}},62:{start:{line:157,column:14},end:{line:157,column:15}},63:{start:{line:158,column:26},end:{line:158,column:46}},64:{start:{line:159,column:4},end:{line:210,column:7}},65:{start:{line:160,column:26},end:{line:160,column:51}},66:{start:{line:161,column:6},end:{line:174,column:7}},67:{start:{line:162,column:36},end:{line:172,column:9}},68:{start:{line:166,column:47},end:{line:166,column:52}},69:{start:{line:173,column:8},end:{line:173,column:28}},70:{start:{line:175,column:6},end:{line:209,column:9}},71:{start:{line:176,column:25},end:{line:176,column:72}},72:{start:{line:177,column:27},end:{line:179,column:10}},73:{start:{line:178,column:10},end:{line:178,column:97}},74:{start:{line:180,column:32},end:{line:180,column:34}},75:{start:{line:181,column:8},end:{line:183,column:9}},76:{start:{line:182,column:10},end:{line:182,column:53}},77:{start:{line:184,column:41},end:{line:206,column:9}},78:{start:{line:207,column:8},end:{line:207,column:33}},79:{start:{line:208,column:8},end:{line:208,column:17}},80:{start:{line:211,column:14},end:{line:211,column:26}},81:{start:{line:212,column:4},end:{line:264,column:6}},82:{start:{line:267,column:27},end:{line:267,column:72}},83:{start:{line:268,column:35},end:{line:268,column:118}},84:{start:{line:268,column:80},end:{line:268,column:117}},85:{start:{line:271,column:4},end:{line:280,column:6}},86:{start:{line:278,column:33},end:{line:278,column:38}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:14,column:19},end:{line:14,column:20}},loc:{start:{line:14,column:25},end:{line:15,column:5}},line:14},1:{name:"(anonymous_1)",decl:{start:{line:19,column:2},end:{line:19,column:3}},loc:{start:{line:19,column:21},end:{line:33,column:3}},line:19},2:{name:"(anonymous_2)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:25},end:{line:45,column:3}},line:34},3:{name:"(anonymous_3)",decl:{start:{line:46,column:17},end:{line:46,column:18}},loc:{start:{line:46,column:23},end:{line:63,column:3}},line:46},4:{name:"(anonymous_4)",decl:{start:{line:49,column:33},end:{line:49,column:34}},loc:{start:{line:49,column:45},end:{line:58,column:5}},line:49},5:{name:"(anonymous_5)",decl:{start:{line:55,column:21},end:{line:55,column:22}},loc:{start:{line:55,column:33},end:{line:57,column:7}},line:55},6:{name:"(anonymous_6)",decl:{start:{line:64,column:2},end:{line:64,column:3}},loc:{start:{line:64,column:18},end:{line:86,column:3}},line:64},7:{name:"(anonymous_7)",decl:{start:{line:87,column:2},end:{line:87,column:3}},loc:{start:{line:87,column:37},end:{line:98,column:3}},line:87},8:{name:"(anonymous_8)",decl:{start:{line:99,column:2},end:{line:99,column:3}},loc:{start:{line:99,column:32},end:{line:102,column:3}},line:99},9:{name:"(anonymous_9)",decl:{start:{line:103,column:2},end:{line:103,column:3}},loc:{start:{line:103,column:46},end:{line:135,column:3}},line:103},10:{name:"getRequiredProps",decl:{start:{line:107,column:13},end:{line:107,column:29}},loc:{start:{line:107,column:37},end:{line:117,column:5}},line:107},11:{name:"withoutLayers",decl:{start:{line:122,column:13},end:{line:122,column:26}},loc:{start:{line:122,column:34},end:{line:128,column:5}},line:122},12:{name:"(anonymous_12)",decl:{start:{line:136,column:2},end:{line:136,column:3}},loc:{start:{line:136,column:32},end:{line:154,column:3}},line:136},13:{name:"(anonymous_13)",decl:{start:{line:145,column:50},end:{line:145,column:51}},loc:{start:{line:145,column:63},end:{line:150,column:9}},line:145},14:{name:"(anonymous_14)",decl:{start:{line:155,column:2},end:{line:155,column:3}},loc:{start:{line:155,column:11},end:{line:265,column:3}},line:155},15:{name:"(anonymous_15)",decl:{start:{line:159,column:26},end:{line:159,column:27}},loc:{start:{line:159,column:38},end:{line:210,column:5}},line:159},16:{name:"(anonymous_16)",decl:{start:{line:166,column:40},end:{line:166,column:41}},loc:{start:{line:166,column:47},end:{line:166,column:52}},line:166},17:{name:"(anonymous_17)",decl:{start:{line:175,column:21},end:{line:175,column:22}},loc:{start:{line:175,column:44},end:{line:209,column:7}},line:175},18:{name:"(anonymous_18)",decl:{start:{line:177,column:50},end:{line:177,column:51}},loc:{start:{line:177,column:61},end:{line:179,column:9}},line:177},19:{name:"(anonymous_19)",decl:{start:{line:268,column:53},end:{line:268,column:54}},loc:{start:{line:268,column:80},end:{line:268,column:117}},line:268},20:{name:"(anonymous_20)",decl:{start:{line:270,column:2},end:{line:270,column:3}},loc:{start:{line:270,column:11},end:{line:281,column:3}},line:270},21:{name:"(anonymous_21)",decl:{start:{line:278,column:27},end:{line:278,column:28}},loc:{start:{line:278,column:33},end:{line:278,column:38}},line:278}},branchMap:{0:{loc:{start:{line:52,column:6},end:{line:54,column:7}},type:"if",locations:[{start:{line:52,column:6},end:{line:54,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:52},1:{loc:{start:{line:72,column:8},end:{line:72,column:79}},type:"cond-expr",locations:[{start:{line:72,column:41},end:{line:72,column:75}},{start:{line:72,column:78},end:{line:72,column:79}}],line:72},2:{loc:{start:{line:78,column:6},end:{line:83,column:7}},type:"if",locations:[{start:{line:78,column:6},end:{line:83,column:7}},{start:{line:81,column:13},end:{line:83,column:7}}],line:78},3:{loc:{start:{line:78,column:10},end:{line:78,column:81}},type:"binary-expr",locations:[{start:{line:78,column:10},end:{line:78,column:23}},{start:{line:78,column:27},end:{line:78,column:81}}],line:78},4:{loc:{start:{line:90,column:4},end:{line:94,column:5}},type:"if",locations:[{start:{line:90,column:4},end:{line:94,column:5}},{start:{line:92,column:11},end:{line:94,column:5}}],line:90},5:{loc:{start:{line:101,column:11},end:{line:101,column:50}},type:"cond-expr",locations:[{start:{line:101,column:34},end:{line:101,column:38}},{start:{line:101,column:41},end:{line:101,column:50}}],line:101},6:{loc:{start:{line:104,column:4},end:{line:106,column:5}},type:"if",locations:[{start:{line:104,column:4},end:{line:106,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:104},7:{loc:{start:{line:111,column:6},end:{line:115,column:7}},type:"if",locations:[{start:{line:111,column:6},end:{line:115,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:111},8:{loc:{start:{line:133,column:27},end:{line:133,column:52}},type:"binary-expr",locations:[{start:{line:133,column:27},end:{line:133,column:38}},{start:{line:133,column:42},end:{line:133,column:52}}],line:133},9:{loc:{start:{line:137,column:4},end:{line:153,column:5}},type:"if",locations:[{start:{line:137,column:4},end:{line:153,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:137},10:{loc:{start:{line:139,column:6},end:{line:152,column:7}},type:"if",locations:[{start:{line:139,column:6},end:{line:152,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:139},11:{loc:{start:{line:139,column:10},end:{line:139,column:51}},type:"binary-expr",locations:[{start:{line:139,column:10},end:{line:139,column:26}},{start:{line:139,column:30},end:{line:139,column:51}}],line:139},12:{loc:{start:{line:147,column:10},end:{line:149,column:11}},type:"if",locations:[{start:{line:147,column:10},end:{line:149,column:11}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:147},13:{loc:{start:{line:147,column:14},end:{line:147,column:68}},type:"binary-expr",locations:[{start:{line:147,column:14},end:{line:147,column:32}},{start:{line:147,column:36},end:{line:147,column:68}}],line:147},14:{loc:{start:{line:161,column:6},end:{line:174,column:7}},type:"if",locations:[{start:{line:161,column:6},end:{line:174,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:161},15:{loc:{start:{line:168,column:22},end:{line:168,column:98}},type:"binary-expr",locations:[{start:{line:168,column:22},end:{line:168,column:57}},{start:{line:168,column:61},end:{line:168,column:98}}],line:168},16:{loc:{start:{line:178,column:17},end:{line:178,column:96}},type:"binary-expr",locations:[{start:{line:178,column:17},end:{line:178,column:29}},{start:{line:178,column:33},end:{line:178,column:62}},{start:{line:178,column:66},end:{line:178,column:96}}],line:178},17:{loc:{start:{line:181,column:8},end:{line:183,column:9}},type:"if",locations:[{start:{line:181,column:8},end:{line:183,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:181},18:{loc:{start:{line:188,column:52},end:{line:188,column:153}},type:"binary-expr",locations:[{start:{line:188,column:52},end:{line:188,column:69}},{start:{line:188,column:73},end:{line:188,column:112}},{start:{line:188,column:116},end:{line:188,column:153}}],line:188},19:{loc:{start:{line:189,column:53},end:{line:189,column:105}},type:"binary-expr",locations:[{start:{line:189,column:53},end:{line:189,column:84}},{start:{line:189,column:88},end:{line:189,column:105}}],line:189},20:{loc:{start:{line:197,column:25},end:{line:197,column:43}},type:"binary-expr",locations:[{start:{line:197,column:25},end:{line:197,column:37}},{start:{line:197,column:41},end:{line:197,column:43}}],line:197},21:{loc:{start:{line:241,column:26},end:{line:241,column:96}},type:"cond-expr",locations:[{start:{line:241,column:69},end:{line:241,column:82}},{start:{line:241,column:85},end:{line:241,column:96}}],line:241}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0,0],17:[0,0],18:[0,0,0],19:[0,0],20:[0,0],21:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerList.tsx"],names:[],mappings:"AAmNoB,cAoEd,YApEc;AAnNpB,OAAO,WAAuB;AAC9B,OAAO,gBAAgB;AACvB,OAAO,YAAY;AAEnB,OAAO,oBAAoB;AAC3B,OAAO,mBAAmB;AAC1B,OAAO,cAAc;AAErB,SAAwB,yBAAwB;AAEhD,OAAO,sBAAsB;AAC7B,SAAS,yBAAyB,mBAAmB;AACrD,SAA0B,uBAAuB;AAuBjD,MAAM,mCAAmC,MAAM,UAAoE;AAAA,EACjH,OAAO,eAAe;AAAA,IACpB,eAAe,MAAM;AAAA,IAAC;AAAA,EACxB;AAAA,EACA;AAAA,EACA;AAAA,EAEA,YAAY,OAAwC;AAClD,UAAM,KAAK;AACX,SAAK,kBAAkB,MAAM,UAAU;AACvC,SAAK,qBAAqB,MAAM,UAAU;AAC1C,SAAK,QAAQ;AAAA,MACX,iBAAiB,CAAC;AAAA,MAClB,sBAAsB;AAAA,MACtB,MAAM;AAAA,QACJ,KAAK,CAAC,iBAAiB;AAAA,MACzB;AAAA,MACA,QAAQ;AAAA,QACN,KAAK;AAAA,MACP;AAAA,IACF;AAAA,EACF;AAAA,EAEA,YAAY,WAAmB;AAC7B,SAAK,SAAS;AAAA,MACZ,MAAM;AAAA,QACJ,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,SAAS,GAAG,CAAC,iBAAiB;AAAA,MACjC;AAAA,MACA,QAAQ;AAAA,QACN,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,SAAS,GAAG,CAAC,KAAK,MAAM,OAAO,SAAS;AAAA,MAC3C;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,eAAe,MAAM;AACnB,QAAI,MAAM;AAEV,UAAM,YAAqC,CAAC;AAE5C,SAAK,cAAc,EAAE,QAAQ,YAAU;AACrC,YAAM,cAAc,YAAY,OAAO,CAAC,EAAE,EAAE;AAC5C,YAAM,YAAY,CAAC,aAAa,GAAG,EAAE,KAAK,GAAG;AAG7C,UAAI,OAAO,SAAS,GAAG;AACrB,kBAAU,SAAS,IAAI,KAAK,MAAM;AAAA,MACpC;AAEA,aAAO,QAAQ,CAAC,WAAW;AACzB,eAAO;AAAA,MACT,CAAC;AAAA,IACH,CAAC;AAED,SAAK,SAAS;AAAA,MACZ,iBAAiB;AAAA,MACjB,sBAAsB,CAAC,KAAK,MAAM;AAAA,IACpC,CAAC;AAAA,EACH;AAAA,EAEA,gBAA0D;AACxD,UAAM,SAAS,CAAC;AAChB,UAAM,eAAe,oBAAI,IAAI;AAE7B,aAAS,IAAI,GAAG,IAAI,KAAK,MAAM,OAAO,QAAQ,KAAK;AACjD,YAAM,YAAY,KAAK,MAAM,OAAO,CAAC;AACrC,YAAM,gBAAgB,KAAK,MAAM,OAAO,IAAE,CAAC;AAC3C,mBAAa;AAAA,QAAI,UAAU;AAAA,QACzB,aAAa,IAAI,UAAU,EAAE,IAAI,aAAa,IAAI,UAAU,EAAE,IAAI,IAAI;AAAA,MACxE;AACA,YAAM,QAAQ;AAAA,QACZ,GAAG;AAAA,QACH,KAAK,eAAe,UAAU,EAAE,IAAI,aAAa,IAAI,UAAU,EAAE,CAAC;AAAA,MACpE;AACA,UAAG,iBAAiB,YAAY,cAAc,EAAE,KAAK,YAAY,MAAM,EAAE,GAAG;AAC1E,cAAM,YAAY,OAAO,OAAO,SAAS,CAAC;AAC1C,kBAAU,KAAK,KAAK;AAAA,MACtB,OAAO;AACL,eAAO,KAAK,CAAC,KAAK,CAAC;AAAA,MACrB;AAAA,IACF;AACA,WAAO;AAAA,EACT;AAAA,EAEA,iBAAiB,aAAqB,KAAa;AACjD,UAAM,YAAY,CAAC,aAAa,GAAG,EAAE,KAAK,GAAG;AAC7C,UAAM,YAAY,EAAE,GAAG,KAAK,MAAM,gBAAgB;AAClD,QAAG,aAAa,KAAK,MAAM,iBAAiB;AAC1C,gBAAU,SAAS,IAAI,CAAC,KAAK,MAAM,gBAAgB,SAAS;AAAA,IAC9D,OAAO;AACL,gBAAU,SAAS,IAAI;AAAA,IACzB;AACA,SAAK,SAAS;AAAA,MACZ,iBAAiB;AAAA,IACnB,CAAC;AAAA,EACH;AAAA,EAEA,YAAY,aAAqB,KAAa;AAC5C,UAAM,YAAY,KAAK,MAAM,gBAAgB,CAAC,aAAa,GAAG,EAAE,KAAK,GAAG,CAAC;AACzE,WAAO,cAAc,SAAY,OAAO;AAAA,EAC1C;AAAA,EAEA,sBAAuB,WAAoC,WAAoC;AAE7F,QAAI,KAAK,UAAU,WAAW;AAC5B,aAAO;AAAA,IACT;AAIA,aAAS,iBAAiB,OAA2B;AACnD,YAAM,MAAiD;AAAA,QACrD,IAAI,MAAM;AAAA,MACZ;AAEA,UAAI,MAAM,QAAQ;AAChB,YAAI,SAAS;AAAA,UACX,YAAY,MAAM,OAAO;AAAA,QAC3B;AAAA,MACF;AACA,aAAO;AAAA,IACT;AACA,UAAM,cAAc,OAAO;AAAA,MACzB,UAAU,OAAO,IAAI,gBAAgB;AAAA,MACrC,KAAK,MAAM,OAAO,IAAI,gBAAgB;AAAA,IACxC;AAEA,aAAS,cAAc,OAAgC;AACrD,YAAM,MAAM;AAAA,QACV,GAAG;AAAA,MACL;AACA,aAAO,IAAI,QAAQ;AACnB,aAAO;AAAA,IACT;AAIA,UAAM,aAAa,OAAO;AAAA,MACxB,cAAc,KAAK,KAAK;AAAA,MACxB,cAAc,SAAS;AAAA,IACzB;AAEA,UAAM,eAAe,EAAE,eAAe;AACtC,WAAO;AAAA,EACT;AAAA,EAEA,mBAAoB,WAAoC;AACtD,QAAI,UAAU,uBAAuB,KAAK,MAAM,oBAAoB;AAClE,YAAM,mBAAmB,KAAK,gBAAgB;AAC9C,UAAI,oBAAoB,iBAAiB,MAAM;AAC7C,cAAM,SAAS,iBAAiB;AAChC,cAAM,UAAU;AAAA,UACd,MAAM,KAAK,mBAAmB;AAAA,UAC9B,WAAW;AAAA,QACb;AACA,cAAM,WAAW,IAAI,qBAAqB,aAAW;AACnD,mBAAS,UAAU,MAAM;AACzB,cAAI,QAAQ,SAAS,KAAK,QAAQ,CAAC,EAAE,oBAAoB,GAAG;AAC1D,mBAAO,eAAe;AAAA,UACxB;AAAA,QACF,GAAG,OAAO;AAEV,iBAAS,QAAQ,MAAM;AAAA,MACzB;AAAA,IACF;AAAA,EACF;AAAA,EAEA,SAAS;AAEP,UAAM,YAA2B,CAAC;AAClC,QAAI,MAAM;AACV,UAAM,gBAAgB,KAAK,cAAc;AACzC,kBAAc,QAAQ,YAAU;AAC9B,YAAM,cAAc,YAAY,OAAO,CAAC,EAAE,EAAE;AAC5C,UAAG,OAAO,SAAS,GAAG;AACpB,cAAM,MAAM;AAAA,UAAC;AAAA;AAAA,YACX,eAAa,CAAC,aAAa,GAAG,EAAE,KAAK,GAAG;AAAA,YACxC,iBAAe,OAAO,IAAI,OAAK,EAAE,GAAG,EAAE,KAAK,GAAG;AAAA,YAE9C,OAAO;AAAA,YACP,UAAU,CAAC,KAAK,YAAY,aAAa,GAAG,KAAK,QAAQ,KAAK,MAAM;AAAA,YACpE,gBAAgB,KAAK,iBAAiB,KAAK,MAAM,aAAa,GAAG;AAAA;AAAA,UAH5D,SAAS,WAAW,IAAI,GAAG;AAAA,QAIlC;AACA,kBAAU,KAAK,GAAG;AAAA,MACpB;AAEA,aAAO,QAAQ,CAAC,OAAO,eAAe;AACpC,cAAM,WAAW,wBAAwB,KAAK,MAAM,QAAQ,GAAG;AAE/D,cAAM,aAAa,KAAK,MAAM,OAAO,KAAK,WAAS;AACjD,iBACE,MAAM,UACN,MAAM,OAAO,SAAS,WACtB,MAAM,OAAO,KAAK,SAAS;AAAA,QAE/B,CAAC;AAED,cAAM,kBAAgD,CAAC;AACvD,YAAI,QAAQ,KAAK,MAAM,oBAAoB;AACzC,0BAAgB,MAAM,KAAK;AAAA,QAC7B;AAEA,cAAM,WAAW;AAAA,UAAC;AAAA;AAAA,YAChB,WAAW,WAAW;AAAA,cACpB,sCAAsC,OAAO,SAAS,KAAK,KAAK,YAAY,aAAa,QAAQ,KAAK,QAAQ,KAAK,MAAM;AAAA,cACzH,uCAAuC,cAAc,OAAO,SAAS,KAAK,OAAO,SAAS;AAAA,cAC1F,mCAAmC,CAAC,CAAC;AAAA,YACvC,CAAC;AAAA,YACD,OAAO;AAAA,YAEP,IAAI,MAAM;AAAA,YACV,SAAS,MAAM;AAAA,YACf,YAAY;AAAA,YACZ,WAAW,MAAM;AAAA,YACjB,aAAa,MAAM,UAAU,CAAC,GAAG;AAAA,YACjC,YAAY,QAAQ,KAAK,MAAM;AAAA,YAC/B,eAAe,KAAK,MAAM;AAAA,YAC1B,gBAAgB,KAAK,MAAM,gBAAgB,KAAK,IAAI;AAAA,YACpD,aAAa,KAAK,MAAM,YAAY,KAAK,IAAI;AAAA,YAC7C,yBAAyB,KAAK,MAAM,wBAAwB,KAAK,IAAI;AAAA,YACpE,GAAG;AAAA;AAAA,UAXC,MAAM;AAAA,QAYb;AACA,kBAAU,KAAK,QAAQ;AACvB,eAAO;AAAA,MACT,CAAC;AAAA,IACH,CAAC;AAED,UAAM,IAAI,KAAK,MAAM;AAErB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,MAAK;AAAA,QACL,cAAY,EAAE,aAAa;AAAA,QAC3B,KAAK,KAAK;AAAA,QAEV;AAAA;AAAA,YAAC;AAAA;AAAA,cAEC,QAAQ,KAAK,MAAM;AAAA,cACnB,SAAS,KAAK,MAAM;AAAA,cACpB,QAAQ,KAAK,MAAM,OAAO;AAAA,cAC1B,cAAc,KAAK,YAAY,KAAK,MAAM,KAAK;AAAA,cAC/C,gBAAgB,KAAK,MAAM;AAAA;AAAA,YALtB,KAAK,MAAM,KAAK;AAAA,UAMvB;AAAA,UACA,qBAAC,YAAO,WAAU,8BAChB;AAAA,gCAAC,UAAK,WAAU,oCAAoC,YAAE,QAAQ,GAAE;AAAA,YAChE,oBAAC,UAAK,WAAU,kBAAiB;AAAA,YACjC,oBAAC,SAAI,WAAU,6BACb,8BAAC,SAAI,WAAU,wBACb;AAAA,cAAC;AAAA;AAAA,gBACC,IAAG;AAAA,gBACH,eAAY;AAAA,gBACZ,SAAS,KAAK;AAAA,gBACd,WAAU;AAAA,gBACT,eAAK,MAAM,yBAAyB,OACnC,EAAE,UAAU,IAEZ,EAAE,QAAQ;AAAA;AAAA,YAEd,GACF,GACF;AAAA,YACA,oBAAC,SAAI,WAAU,6BACb,8BAAC,SAAI,WAAU,wBACb;AAAA,cAAC;AAAA;AAAA,gBACC,SAAS,KAAK,YAAY,KAAK,MAAM,KAAK;AAAA,gBAC1C,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACT,YAAE,WAAW;AAAA;AAAA,YAChB,GACF,GACF;AAAA,aACF;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,MAAK;AAAA,cACL,cAAY,EAAE,aAAa;AAAA,cAE3B,8BAAC,QAAG,WAAU,iCACX,qBACH;AAAA;AAAA,UACF;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,qBAAqB,gBAAgB,EAAE,0BAA0B;AACvE,MAAM,6BAA6B,kBAAkB,CAAC,UAAmC,oBAAC,sBAAoB,GAAG,OAAO,CAAE;AAM1H,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QACL,GAAG,KAAK;AAAA,QACT,aAAY;AAAA,QACZ,WAAW,KAAK,MAAM,YAAY,KAAK,IAAI;AAAA,QAC3C,eAAe;AAAA,QACf,mBAAmB,MAAM;AAAA;AAAA,IAC3B;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"fce844afd94013ad4b9b4e84bd148b8b849d3079"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return _n=function(){return l},l}_n();class Cz extends Xn.Component{constructor(t){_n().f[1]++,_n().s[1]++;super(t);Kn(this,"selectedItemRef");Kn(this,"scrollContainerRef");Kn(this,"toggleLayers",(_n().s[6]++,()=>{_n().f[3]++;let t=(_n().s[7]++,0);const r=(_n().s[8]++,{});_n().s[9]++,this.groupedLayers().forEach(i=>{_n().f[4]++;const s=(_n().s[10]++,sy(i[0].id)),l=(_n().s[11]++,[s,t].join("-"));_n().s[12]++,i.length>1?(_n().b[0][0]++,_n().s[13]++,r[l]=this.state.areAllGroupsExpanded):_n().b[0][1]++,_n().s[14]++,i.forEach(o=>{_n().f[5]++,_n().s[15]++,t+=1})}),_n().s[16]++,this.setState({collapsedGroups:r,areAllGroupsExpanded:!this.state.areAllGroupsExpanded})}));_n().s[2]++,this.selectedItemRef=Xn.createRef(),_n().s[3]++,this.scrollContainerRef=Xn.createRef(),_n().s[4]++,this.state={collapsedGroups:{},areAllGroupsExpanded:!1,keys:{add:+Py()},isOpen:{add:!1}}}toggleModal(t){_n().f[2]++,_n().s[5]++,this.setState({keys:{...this.state.keys,[t]:+Py()},isOpen:{...this.state.isOpen,[t]:!this.state.isOpen[t]}})}groupedLayers(){_n().f[6]++;const t=(_n().s[17]++,[]),r=(_n().s[18]++,new Map);_n().s[19]++;for(let i=(_n().s[20]++,0);i<this.props.layers.length;i++){const s=(_n().s[21]++,this.props.layers[i]),l=(_n().s[22]++,this.props.layers[i-1]);_n().s[23]++,r.set(s.id,r.has(s.id)?(_n().b[1][0]++,r.get(s.id)+1):(_n().b[1][1]++,0));const o=(_n().s[24]++,{...s,key:`layers-list-${s.id}-${r.get(s.id)}`});if(_n().s[25]++,_n().b[3][0]++,l&&(_n().b[3][1]++,sy(l.id)==sy(o.id))){_n().b[2][0]++;const f=(_n().s[26]++,t[t.length-1]);_n().s[27]++,f.push(o)}else _n().b[2][1]++,_n().s[28]++,t.push([o])}return _n().s[29]++,t}toggleLayerGroup(t,r){_n().f[7]++;const i=(_n().s[30]++,[t,r].join("-")),s=(_n().s[31]++,{...this.state.collapsedGroups});_n().s[32]++,i in this.state.collapsedGroups?(_n().b[4][0]++,_n().s[33]++,s[i]=!this.state.collapsedGroups[i]):(_n().b[4][1]++,_n().s[34]++,s[i]=!1),_n().s[35]++,this.setState({collapsedGroups:s})}isCollapsed(t,r){_n().f[8]++;const i=(_n().s[36]++,this.state.collapsedGroups[[t,r].join("-")]);return _n().s[37]++,i===void 0?(_n().b[5][0]++,!0):(_n().b[5][1]++,i)}shouldComponentUpdate(t,r){if(_n().f[9]++,_n().s[38]++,this.state!==r)return _n().b[6][0]++,_n().s[39]++,!0;_n().b[6][1]++;function i(y){_n().f[10]++;const x=(_n().s[40]++,{id:y.id});return _n().s[41]++,y.layout?(_n().b[7][0]++,_n().s[42]++,x.layout={visibility:y.layout.visibility}):_n().b[7][1]++,_n().s[43]++,x}const s=(_n().s[44]++,wE.isEqual(t.layers.map(i),this.props.layers.map(i)));function l(y){_n().f[11]++;const x=(_n().s[45]++,{...y});return _n().s[46]++,delete x.layers,_n().s[47]++,x}const o=(_n().s[48]++,wE.isEqual(l(this.props),l(t))),f=(_n().s[49]++,_n().b[8][0]++,!(s&&(_n().b[8][1]++,o)));return _n().s[50]++,f}componentDidUpdate(t){if(_n().f[12]++,_n().s[51]++,t.selectedLayerIndex!==this.props.selectedLayerIndex){_n().b[9][0]++;const r=(_n().s[52]++,this.selectedItemRef.current);if(_n().s[53]++,_n().b[11][0]++,r&&(_n().b[11][1]++,r.node)){_n().b[10][0]++;const i=(_n().s[54]++,r.node),s=(_n().s[55]++,{root:this.scrollContainerRef.current,threshold:1}),l=(_n().s[56]++,new IntersectionObserver(o=>{_n().f[13]++,_n().s[57]++,l.unobserve(i),_n().s[58]++,_n().b[13][0]++,o.length>0&&(_n().b[13][1]++,o[0].intersectionRatio<1)?(_n().b[12][0]++,_n().s[59]++,i.scrollIntoView()):_n().b[12][1]++},s));_n().s[60]++,l.observe(i)}else _n().b[10][1]++}else _n().b[9][1]++}render(){_n().f[14]++;const t=(_n().s[61]++,[]);let r=(_n().s[62]++,0);const i=(_n().s[63]++,this.groupedLayers());_n().s[64]++,i.forEach(l=>{_n().f[15]++;const o=(_n().s[65]++,sy(l[0].id));if(_n().s[66]++,l.length>1){_n().b[14][0]++;const f=(_n().s[67]++,ue.jsx(nne,{"data-wd-key":[o,r].join("-"),"aria-controls":l.map(y=>(_n().f[16]++,_n().s[68]++,y.key)).join(" "),title:o,isActive:(_n().b[15][0]++,!this.isCollapsed(o,r)||(_n().b[15][1]++,r===this.props.selectedLayerIndex)),onActiveToggle:this.toggleLayerGroup.bind(this,o,r)},`group-${o}-${r}`));_n().s[69]++,t.push(f)}else _n().b[14][1]++;_n().s[70]++,l.forEach((f,y)=>{var U;_n().f[17]++;const x=(_n().s[71]++,die(this.props.layers,r)),B=(_n().s[72]++,this.props.errors.find(j=>(_n().f[18]++,_n().s[73]++,_n().b[16][0]++,j.parsed&&(_n().b[16][1]++,j.parsed.type==="layer")&&(_n().b[16][2]++,j.parsed.data.index==r)))),O=(_n().s[74]++,{});_n().s[75]++,r===this.props.selectedLayerIndex?(_n().b[17][0]++,_n().s[76]++,O.ref=this.selectedItemRef):_n().b[17][1]++;const P=(_n().s[77]++,ue.jsx(Rne,{className:tm({"maputnik-layer-list-item-collapsed":(_n().b[18][0]++,l.length>1&&(_n().b[18][1]++,this.isCollapsed(o,x))&&(_n().b[18][2]++,r!==this.props.selectedLayerIndex)),"maputnik-layer-list-item-group-last":(_n().b[19][0]++,y==l.length-1&&(_n().b[19][1]++,l.length>1)),"maputnik-layer-list-item--error":!!B}),index:r,id:f.key,layerId:f.id,layerIndex:r,layerType:f.type,visibility:(_n().b[20][0]++,f.layout||(_n().b[20][1]++,{})).visibility,isSelected:r===this.props.selectedLayerIndex,onLayerSelect:this.props.onLayerSelect,onLayerDestroy:(U=this.props.onLayerDestroy)==null?void 0:U.bind(this),onLayerCopy:this.props.onLayerCopy.bind(this),onLayerVisibilityToggle:this.props.onLayerVisibilityToggle.bind(this),...O},f.key));_n().s[78]++,t.push(P),_n().s[79]++,r+=1})});const s=(_n().s[80]++,this.props.t);return _n().s[81]++,ue.jsxs("section",{className:"maputnik-layer-list",role:"complementary","aria-label":s("Layers list"),ref:this.scrollContainerRef,children:[ue.jsx(uie,{layers:this.props.layers,sources:this.props.sources,isOpen:this.state.isOpen.add,onOpenToggle:this.toggleModal.bind(this,"add"),onLayersChange:this.props.onLayersChange},this.state.keys.add),ue.jsxs("header",{className:"maputnik-layer-list-header",children:[ue.jsx("span",{className:"maputnik-layer-list-header-title",children:s("Layers")}),ue.jsx("span",{className:"maputnik-space"}),ue.jsx("div",{className:"maputnik-default-property",children:ue.jsx("div",{className:"maputnik-multibutton",children:ue.jsx("button",{id:"skip-target-layer-list","data-wd-key":"skip-target-layer-list",onClick:this.toggleLayers,className:"maputnik-button",children:this.state.areAllGroupsExpanded===!0?(_n().b[21][0]++,s("Collapse")):(_n().b[21][1]++,s("Expand"))})})}),ue.jsx("div",{className:"maputnik-default-property",children:ue.jsx("div",{className:"maputnik-multibutton",children:ue.jsx("button",{onClick:this.toggleModal.bind(this,"add"),"data-wd-key":"layer-list:add-layer",className:"maputnik-button maputnik-button-selected",children:s("Add Layer")})})})]}),ue.jsx("div",{role:"navigation","aria-label":s("Layers list"),children:ue.jsx("ul",{className:"maputnik-layer-list-container",children:t})})]})}}Kn(Cz,"defaultProps",(_n().s[0]++,{onLayerSelect:()=>{_n().f[0]++}}));const hie=(_n().s[82]++,zs()(Cz)),fie=(_n().s[83]++,kne(n=>(_n().f[19]++,_n().s[84]++,ue.jsx(hie,{...n}))));class pie extends Xn.Component{render(){return _n().f[20]++,_n().s[85]++,ue.jsx(fie,{...this.props,helperClass:"sortableHelper",onSortEnd:this.props.onMoveLayer.bind(this),useDragHandle:!0,shouldCancelStart:()=>(_n().f[21]++,_n().s[86]++,!1)})}}var Q4,B9;function _z(){if(B9)return Q4;B9=1;var n={},e="a menu outside a mounted Wrapper with an id, or a menu that does not exist";function t(l,o){n[l]=o}function r(l){delete n[l]}function i(l,o){var f=n[l];if(!f)throw new Error("Cannot open "+e);f.openMenu(o)}function s(l,o){var f=n[l];if(!f)throw new Error("Cannot close "+e);f.closeMenu(o)}return Q4={registerManager:t,unregisterManager:r,openMenu:i,closeMenu:s},Q4}var Y4,O9;function mie(){if(O9)return Y4;O9=1;function n(i){i=i||{};var s=i.keybindings||{};this._settings={keybindings:{next:s.next||{keyCode:40},prev:s.prev||{keyCode:38},first:s.first,last:s.last},wrap:i.wrap,stringSearch:i.stringSearch,stringSearchDelay:800},this._keybindingsLookup=[];var l,o;for(l in this._settings.keybindings)o=this._settings.keybindings[l],o&&[].concat(o).forEach((function(f){f.metaKey=f.metaKey||!1,f.ctrlKey=f.ctrlKey||!1,f.altKey=f.altKey||!1,f.shiftKey=f.shiftKey||!1,this._keybindingsLookup.push({action:l,eventMatcher:f})}).bind(this));this._searchString="",this._members=[],i.members&&this.setMembers(i.members),this._boundHandleKeydownEvent=this._handleKeydownEvent.bind(this)}n.prototype.activate=function(){return document.addEventListener("keydown",this._boundHandleKeydownEvent,!0),this},n.prototype.deactivate=function(){return document.removeEventListener("keydown",this._boundHandleKeydownEvent,!0),this._clearSearchStringRefreshTimer(),this},n.prototype._handleKeydownEvent=function(i){var s=this._getActiveElementIndex();if(s!==-1){var l=!1;this._keybindingsLookup.forEach((function(o){if(e(o.eventMatcher,i))switch(l=!0,i.preventDefault(),o.action){case"next":this.moveFocusForward();break;case"prev":this.moveFocusBack();break;case"first":this.moveFocusToFirst();break;case"last":this.moveFocusToLast();break;default:return}}).bind(this)),l||this._handleUnboundKey(i)}},n.prototype.moveFocusForward=function(){var i=this._getActiveElementIndex(),s;return i<this._members.length-1?s=i+1:this._settings.wrap?s=0:s=i,this.focusNodeAtIndex(s),s},n.prototype.moveFocusBack=function(){var i=this._getActiveElementIndex(),s;return i>0?s=i-1:this._settings.wrap?s=this._members.length-1:s=i,this.focusNodeAtIndex(s),s},n.prototype.moveFocusToFirst=function(){this.focusNodeAtIndex(0)},n.prototype.moveFocusToLast=function(){this.focusNodeAtIndex(this._members.length-1)},n.prototype._handleUnboundKey=function(i){if(this._settings.stringSearch){if(this._searchString!==""&&(i.key===" "||i.keyCode===32))return i.preventDefault(),-1;if(!t(i.keyCode)||i.ctrlKey||i.metaKey||i.altKey)return-1;i.preventDefault(),this._addToSearchString(String.fromCharCode(i.keyCode)),this._runStringSearch()}},n.prototype._clearSearchString=function(){this._searchString=""},n.prototype._addToSearchString=function(i){this._searchString+=i.toLowerCase()},n.prototype._startSearchStringRefreshTimer=function(){var i=this;this._clearSearchStringRefreshTimer(),this._stringSearchTimer=setTimeout(function(){i._clearSearchString()},this._settings.stringSearchDelay)},n.prototype._clearSearchStringRefreshTimer=function(){clearTimeout(this._stringSearchTimer)},n.prototype._runStringSearch=function(){this._startSearchStringRefreshTimer(),this.moveFocusByString(this._searchString)},n.prototype.moveFocusByString=function(i){for(var s,l=0,o=this._members.length;l<o;l++)if(s=this._members[l],!!s.text&&s.text.indexOf(i)===0)return r(s.node)},n.prototype._findIndexOfNode=function(i){for(var s=0,l=this._members.length;s<l;s++)if(this._members[s].node===i)return s;return-1},n.prototype._getActiveElementIndex=function(){return this._findIndexOfNode(document.activeElement)},n.prototype.focusNodeAtIndex=function(i){var s=this._members[i];return s&&r(s.node),this},n.prototype.addMember=function(i,s){var l=i.node||i,o=i.text||l.getAttribute("data-focus-group-text")||l.textContent||"";this._checkNode(l);var f=o.replace(/[\W_]/g,"").toLowerCase(),y={node:l,text:f};return s!=null?this._members.splice(s,0,y):this._members.push(y),this},n.prototype.removeMember=function(i){var s=typeof i=="number"?i:this._findIndexOfNode(i);if(s!==-1)return this._members.splice(s,1),this},n.prototype.clearMembers=function(){return this._members=[],this},n.prototype.setMembers=function(i){this.clearMembers();for(var s=0,l=i.length;s<l;s++)this.addMember(i[s]);return this},n.prototype.getMembers=function(){return this._members},n.prototype._checkNode=function(i){if(!i.nodeType||i.nodeType!==window.Node.ELEMENT_NODE)throw new Error("focus-group: only DOM nodes allowed");return i};function e(i,s){for(var l in i)if(s[l]!==void 0&&i[l]!==s[l])return!1;return!0}function t(i){return i>=65&&i<=90}function r(i){!i||!i.focus||(i.focus(),i.tagName.toLowerCase()==="input"&&i.select())}return Y4=function(s){return new n(s)},Y4}var q4,I9;function gie(){if(I9)return q4;I9=1;var n=mie(),e=_z(),t={wrap:!0,stringSearch:!0},r={init:function(f){this.updateOptions(f),this.handleBlur=i.bind(this),this.handleSelection=s.bind(this),this.handleMenuKey=l.bind(this),this.focusGroup=n(t),this.button=null,this.menu=null,this.isOpen=!1},updateOptions:function(f){var y=this.options;this.options=f||this.options||{},typeof this.options.closeOnSelection>"u"&&(this.options.closeOnSelection=!0),typeof this.options.closeOnBlur>"u"&&(this.options.closeOnBlur=!0),this.options.id&&e.registerManager(this.options.id,this),y&&y.id&&y.id!==this.options.id&&e.unregisterManager(this.options.id,this)},focusItem:function(f){this.focusGroup.focusNodeAtIndex(f)},addItem:function(f){this.focusGroup.addMember(f)},clearItems:function(){this.focusGroup.clearMembers()},handleButtonNonArrowKey:function(f){this.focusGroup._handleUnboundKey(f)},destroy:function(){this.button=null,this.menu=null,this.focusGroup.deactivate(),clearTimeout(this.blurTimer),clearTimeout(this.moveFocusTimer)},update:function(){this.menu.setState({isOpen:this.isOpen}),this.button.setState({menuOpen:this.isOpen}),this.options.onMenuToggle&&this.options.onMenuToggle({isOpen:this.isOpen})},openMenu:function(f){if(!this.isOpen&&(f=f||{},f.focusMenu===void 0&&(f.focusMenu=!0),this.isOpen=!0,this.update(),this.focusGroup.activate(),f.focusMenu)){var y=this;this.moveFocusTimer=setTimeout(function(){y.focusItem(0)},0)}},closeMenu:function(f){this.isOpen&&(f=f||{},this.isOpen=!1,this.update(),f.focusButton&&this.button.ref.current.focus())},toggleMenu:function(f,y){f=f||{},y=y||{},this.isOpen?this.closeMenu(f):this.openMenu(y)}};function i(){var o=this;o.blurTimer=setTimeout(function(){if(o.button){var f=o.button.ref.current;if(f){var y=f.ownerDocument.activeElement;if(!(f&&y===f)){var x=o.menu.ref.current;if(x===y){o.focusItem(0);return}x&&x.contains(y)||o.isOpen&&o.closeMenu({focusButton:!1})}}}},0)}function s(o,f){this.options.closeOnSelection&&this.closeMenu({focusButton:!0}),this.options.onSelection&&this.options.onSelection(o,f)}function l(o){if(this.isOpen)switch(o.key){case"Escape":o.preventDefault(),this.closeMenu({focusButton:!0});break;case"Home":o.preventDefault(),this.focusGroup.moveFocusToFirst();break;case"End":o.preventDefault(),this.focusGroup.moveFocusToLast();break}}return q4=function(o){var f=Object.create(r);return f.init(o),f},q4}var V4,k9;function Px(){if(k9)return V4;k9=1;var n=Ia(),e=n.createContext();return V4=e,V4}var $4,T9;function Kx(){if(T9)return $4;T9=1;var n=mp();return $4={refType:n.oneOfType([n.func,n.shape({current:n.elementType})])},$4}var H4,P9;function Rx(){return P9||(P9=1,H4=function(n,e,t){t=t||{};for(var r in e)e.hasOwnProperty(r)&&(t[r]||(n[r]=e[r]))}),H4}var Z4,K9;function yie(){if(K9)return Z4;K9=1;function n(P,U){if(!(P instanceof U))throw new TypeError("Cannot call a class as a function")}function e(P,U){if(!P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return U&&(typeof U=="object"||typeof U=="function")?U:P}function t(P,U){if(typeof U!="function"&&U!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof U);P.prototype=Object.create(U&&U.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}}),U&&(Object.setPrototypeOf?Object.setPrototypeOf(P,U):P.__proto__=U)}var r=Ia(),i=mp(),s=gie(),l=Px(),o=Kx(),f=o.refType,y=Rx(),x={children:i.node.isRequired,forwardedRef:f,onMenuToggle:i.func,onSelection:i.func,closeOnSelection:i.bool,closeOnBlur:i.bool,tag:i.string},B=function(U){return{onMenuToggle:U.onMenuToggle,onSelection:U.onSelection,closeOnSelection:U.closeOnSelection,closeOnBlur:U.closeOnBlur,id:U.id}},O=function(P){t(U,P);function U(j){n(this,U);var N=e(this,P.call(this,j));return N.manager=s(B(j)),N}return U.prototype.componentDidUpdate=function(){this.manager.updateOptions(B(this.props))},U.prototype.render=function(){var N={};return y(N,this.props,x),r.createElement(l.Provider,{value:this.manager},r.createElement(this.props.tag,N,this.props.children))},U}(r.Component);return O.propTypes=x,O.defaultProps={tag:"div"},Z4=r.forwardRef(function(P,U){var j={forwardedRef:U};return y(j,P,{children:x.children,forwardedRef:x.forwardedRef}),y(j,{forwardedRef:U}),r.createElement(O,j,P.children)}),Z4}var X4,R9;function vie(){if(R9)return X4;R9=1;function n(O,P){if(!(O instanceof P))throw new TypeError("Cannot call a class as a function")}function e(O,P){if(!O)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P&&(typeof P=="object"||typeof P=="function")?P:O}function t(O,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof P);O.prototype=Object.create(P&&P.prototype,{constructor:{value:O,enumerable:!1,writable:!0,configurable:!0}}),P&&(Object.setPrototypeOf?Object.setPrototypeOf(O,P):O.__proto__=P)}var r=Ia(),i=mp(),s=Px(),l=Kx(),o=l.refType,f=Rx(),y={ambManager:i.object.isRequired,children:i.node.isRequired,disabled:i.bool,forwardedRef:o,tag:i.string},x=function(){return["button","fieldset","input","optgroup","option","select","textarea"]},B=function(O){t(P,O);function P(){var U,j,N;n(this,P);for(var Y=arguments.length,H=Array(Y),se=0;se<Y;se++)H[se]=arguments[se];return N=(U=(j=e(this,O.call.apply(O,[this].concat(H))),j),j.ref=r.createRef(),j.handleKeyDown=function(re){if(!j.props.disabled){var V=j.props.ambManager;switch(re.key){case"ArrowDown":re.preventDefault(),V.isOpen?V.focusItem(0):V.openMenu();break;case"Enter":case" ":re.preventDefault(),V.toggleMenu();break;case"Escape":V.handleMenuKey(re);break;default:V.handleButtonNonArrowKey(re)}}},j.handleClick=function(){j.props.disabled||j.props.ambManager.toggleMenu({},{focusMenu:!1})},j.setRef=function(re){j.ref.current=re,typeof j.props.forwardedRef=="function"?j.props.forwardedRef(re):j.props.forwardedRef&&(j.props.forwardedRef.current=re)},U),e(j,N)}return P.prototype.componentDidMount=function(){this.props.ambManager.button=this},P.prototype.componentWillUnmount=function(){this.props.ambManager.destroy()},P.prototype.render=function(){var j=this.props,N=this.props.ambManager,Y={role:"button",tabIndex:j.disabled?"":"0","aria-haspopup":!0,"aria-expanded":N.isOpen,"aria-disabled":j.disabled,onKeyDown:this.handleKeyDown,onClick:this.handleClick},H={};return f(H,y),x().indexOf(j.tag)>=0&&delete H.disabled,N.options.closeOnBlur&&(Y.onBlur=N.handleBlur),f(Y,j,H),f(Y,{ref:this.setRef}),r.createElement(j.tag,Y,j.children)},P}(r.Component);return B.propTypes=y,B.defaultProps={tag:"span"},X4=r.forwardRef(function(O,P){return r.createElement(s.Consumer,null,function(U){var j={ambManager:U,forwardedRef:P};return f(j,O,{ambManager:y.ambManager,children:y.children,forwardedRef:y.forwardedRef}),r.createElement(B,j,O.children)})}),X4}var J4,D9;function Cie(){return D9||(D9=1,J4=function(e,t,r){var i=0,s=0,l=!1,o=!1,f=!1;e.addEventListener("click",y,r),e.addEventListener("touchstart",x,r);function y(N){f||t(N)}function x(N){f=!0,!l&&(l=!0,e.addEventListener("touchmove",B,r),e.addEventListener("touchend",O,r),e.addEventListener("touchcancel",P,r),o=!1,i=N.touches[0].clientX,s=N.touches[0].clientY)}function B(N){o||Math.abs(N.touches[0].clientX-i)<=10&&Math.abs(N.touches[0].clientY-s)<=10||(o=!0)}function O(N){l=!1,U(),o||t(N)}function P(){l=!1,o=!1,i=0,s=0}function U(){e.removeEventListener("touchmove",B,r),e.removeEventListener("touchend",O,r),e.removeEventListener("touchcancel",P,r)}function j(){e.removeEventListener("click",y,r),e.removeEventListener("touchstart",x,r),U()}return{remove:j}}),J4}var e5,F9;function _ie(){if(F9)return e5;F9=1;function n(O,P){if(!(O instanceof P))throw new TypeError("Cannot call a class as a function")}function e(O,P){if(!O)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P&&(typeof P=="object"||typeof P=="function")?P:O}function t(O,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof P);O.prototype=Object.create(P&&P.prototype,{constructor:{value:O,enumerable:!1,writable:!0,configurable:!0}}),P&&(Object.setPrototypeOf?Object.setPrototypeOf(O,P):O.__proto__=P)}var r=Ia(),i=mp(),s=Cie(),l=Px(),o=Kx(),f=o.refType,y=Rx(),x={ambManager:i.object.isRequired,children:i.oneOfType([i.func,i.node]).isRequired,forwardedRef:f,tag:i.string},B=function(O){t(P,O);function P(){var U,j,N;n(this,P);for(var Y=arguments.length,H=Array(Y),se=0;se<Y;se++)H[se]=arguments[se];return N=(U=(j=e(this,O.call.apply(O,[this].concat(H))),j),j.ref=r.createRef(),j.addTapListener=function(){var re=j.ref.current;if(re){var V=re.ownerDocument;V&&(j.tapListener=s(V.documentElement,j.handleTap))}},j.handleTap=function(re){j.ref.current.contains(re.target)||j.props.ambManager.button.ref.current.contains(re.target)||j.props.ambManager.closeMenu()},j.setRef=function(re){j.ref.current=re,typeof j.props.forwardedRef=="function"?j.props.forwardedRef(re):j.props.forwardedRef&&(j.props.forwardedRef.current=re)},U),e(j,N)}return P.prototype.componentDidMount=function(){this.props.ambManager.menu=this},P.prototype.componentDidUpdate=function(){var j=this.props.ambManager;j.options.closeOnBlur&&(j.isOpen&&!this.tapListener?this.addTapListener():!j.isOpen&&this.tapListener&&(this.tapListener.remove(),delete this.tapListener),j.isOpen||j.clearItems())},P.prototype.componentWillUnmount=function(){this.tapListener&&this.tapListener.remove(),this.props.ambManager.destroy()},P.prototype.render=function(){var j=this.props,N=this.props.ambManager,Y=function(){return typeof j.children=="function"?j.children({isOpen:N.isOpen}):N.isOpen?j.children:!1}();if(!Y)return!1;var H={onKeyDown:N.handleMenuKey,role:"menu",tabIndex:-1};return N.options.closeOnBlur&&(H.onBlur=N.handleBlur),y(H,j,x),y(H,{ref:this.setRef}),r.createElement(j.tag,H,Y)},P}(r.Component);return B.propTypes=x,B.defaultProps={tag:"div"},e5=r.forwardRef(function(O,P){return r.createElement(l.Consumer,null,function(U){var j={ambManager:U,forwardedRef:P};return y(j,O,{ambManager:x.ambManager,children:x.children,forwardedRef:x.forwardedRef}),r.createElement(B,j,O.children)})}),e5}var t5,L9;function bie(){if(L9)return t5;L9=1;function n(B,O){if(!(B instanceof O))throw new TypeError("Cannot call a class as a function")}function e(B,O){if(!B)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return O&&(typeof O=="object"||typeof O=="function")?O:B}function t(B,O){if(typeof O!="function"&&O!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof O);B.prototype=Object.create(O&&O.prototype,{constructor:{value:B,enumerable:!1,writable:!0,configurable:!0}}),O&&(Object.setPrototypeOf?Object.setPrototypeOf(B,O):B.__proto__=O)}var r=Ia(),i=mp(),s=Px(),l=Kx(),o=l.refType,f=Rx(),y={ambManager:i.object.isRequired,children:i.node.isRequired,forwardedRef:o,tag:i.string,text:i.string,value:i.any},x=function(B){t(O,B);function O(){var P,U,j;n(this,O);for(var N=arguments.length,Y=Array(N),H=0;H<N;H++)Y[H]=arguments[H];return j=(P=(U=e(this,B.call.apply(B,[this].concat(Y))),U),U.ref=r.createRef(),U.handleKeyDown=function(se){se.key!=="Enter"&&se.key!==" "||U.props.tag==="a"&&U.props.href||(se.preventDefault(),U.selectItem(se))},U.selectItem=function(se){var re=typeof U.props.value<"u"?U.props.value:U.props.children;U.props.ambManager.handleSelection(re,se)},U.setRef=function(se){U.ref.current=se,typeof U.props.forwardedRef=="function"?U.props.forwardedRef(se):U.props.forwardedRef&&(U.props.forwardedRef.current=se)},P),e(U,j)}return O.prototype.componentDidMount=function(){this.props.ambManager.addItem({node:this.ref.current,text:this.props.text})},O.prototype.render=function(){var U={onClick:this.selectItem,onKeyDown:this.handleKeyDown,role:"menuitem",tabIndex:"-1",ref:this.setRef};return f(U,this.props,y),r.createElement(this.props.tag,U,this.props.children)},O}(r.Component);return x.propTypes=y,x.defaultProps={tag:"div"},t5=r.forwardRef(function(B,O){return r.createElement(s.Consumer,null,function(P){var U={ambManager:P,forwardedRef:O};return f(U,B,{ambManager:y.ambManager,children:y.children,forwardedRef:y.forwardedRef}),r.createElement(x,U,B.children)})}),t5}var n5,U9;function xie(){if(U9)return n5;U9=1;var n=_z();return n5={Wrapper:yie(),Button:vie(),Menu:_ie(),MenuItem:bie(),openMenu:n.openMenu,closeMenu:n.closeMenu},n5}var Ab=xie();function z9(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function B6(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?z9(Object(t),!0).forEach(function(r){Kl(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):z9(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Dx(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function j9(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function Fx(n,e,t){return e&&j9(n.prototype,e),t&&j9(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function Kl(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function nm(){return nm=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},nm.apply(this,arguments)}function vO(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&O6(n,e)}function E2(n){return E2=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},E2(n)}function O6(n,e){return O6=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},O6(n,e)}function Mie(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function wie(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function Lx(n,e){if(n==null)return{};var t=wie(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function sp(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Sie(n,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return sp(n)}function CO(n){var e=Mie();return function(){var r=E2(n),i;if(e){var s=E2(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return Sie(this,i)}}function Eie(n,e){return Iie(n)||Tie(n,e)||bz(n,e)||Kie()}function Bie(n){return Oie(n)||kie(n)||bz(n)||Pie()}function Oie(n){if(Array.isArray(n))return I6(n)}function Iie(n){if(Array.isArray(n))return n}function kie(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Tie(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r=[],i=!0,s=!1,l,o;try{for(t=t.call(n);!(i=(l=t.next()).done)&&(r.push(l.value),!(e&&r.length===e));i=!0);}catch(f){s=!0,o=f}finally{try{!i&&t.return!=null&&t.return()}finally{if(s)throw o}}return r}}function bz(n,e){if(n){if(typeof n=="string")return I6(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return I6(n,e)}}function I6(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Pie(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Kie(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Rie=Fx(function n(e){var t=this,r=e.expanded,i=r===void 0?[]:r,s=e.allowMultipleExpanded,l=s===void 0?!1:s,o=e.allowZeroExpanded,f=o===void 0?!1:o;Dx(this,n),Kl(this,"expanded",void 0),Kl(this,"allowMultipleExpanded",void 0),Kl(this,"allowZeroExpanded",void 0),Kl(this,"toggleExpanded",function(y){if(t.isItemDisabled(y))return t;var x=t.isItemExpanded(y);return x?t.augment({expanded:t.expanded.filter(function(B){return B!==y})}):t.augment({expanded:t.allowMultipleExpanded?[].concat(Bie(t.expanded),[y]):[y]})}),Kl(this,"isItemDisabled",function(y){var x=t.isItemExpanded(y),B=t.expanded.length===1;return!!(x&&!t.allowZeroExpanded&&B)}),Kl(this,"isItemExpanded",function(y){return t.expanded.indexOf(y)!==-1}),Kl(this,"getPanelAttributes",function(y,x){var B=x??t.isItemExpanded(y);return{role:t.allowMultipleExpanded?void 0:"region","aria-hidden":t.allowMultipleExpanded?!B:void 0,"aria-labelledby":t.getButtonId(y),id:t.getPanelId(y),hidden:B?void 0:!0}}),Kl(this,"getHeadingAttributes",function(){return{role:"heading"}}),Kl(this,"getButtonAttributes",function(y,x){var B=x??t.isItemExpanded(y),O=t.isItemDisabled(y);return{id:t.getButtonId(y),"aria-disabled":O,"aria-expanded":B,"aria-controls":t.getPanelId(y),role:"button",tabIndex:0}}),Kl(this,"getPanelId",function(y){return"accordion__panel-".concat(y)}),Kl(this,"getButtonId",function(y){return"accordion__heading-".concat(y)}),Kl(this,"augment",function(y){return new n(B6({expanded:t.expanded,allowMultipleExpanded:t.allowMultipleExpanded,allowZeroExpanded:t.allowZeroExpanded},y))}),this.expanded=i,this.allowMultipleExpanded=l,this.allowZeroExpanded=f}),xz=ci.createContext(null),Mz=function(n){vO(t,n);var e=CO(t);function t(){var r;Dx(this,t);for(var i=arguments.length,s=new Array(i),l=0;l<i;l++)s[l]=arguments[l];return r=e.call.apply(e,[this].concat(s)),Kl(sp(r),"state",new Rie({expanded:r.props.preExpanded,allowMultipleExpanded:r.props.allowMultipleExpanded,allowZeroExpanded:r.props.allowZeroExpanded})),Kl(sp(r),"toggleExpanded",function(o){r.setState(function(f){return f.toggleExpanded(o)},function(){r.props.onChange&&r.props.onChange(r.state.expanded)})}),Kl(sp(r),"isItemDisabled",function(o){return r.state.isItemDisabled(o)}),Kl(sp(r),"isItemExpanded",function(o){return r.state.isItemExpanded(o)}),Kl(sp(r),"getPanelAttributes",function(o,f){return r.state.getPanelAttributes(o,f)}),Kl(sp(r),"getHeadingAttributes",function(){return r.state.getHeadingAttributes()}),Kl(sp(r),"getButtonAttributes",function(o,f){return r.state.getButtonAttributes(o,f)}),r}return Fx(t,[{key:"render",value:function(){var i=this.state,s=i.allowZeroExpanded,l=i.allowMultipleExpanded;return ci.createElement(xz.Provider,{value:{allowMultipleExpanded:l,allowZeroExpanded:s,toggleExpanded:this.toggleExpanded,isItemDisabled:this.isItemDisabled,isItemExpanded:this.isItemExpanded,getPanelAttributes:this.getPanelAttributes,getHeadingAttributes:this.getHeadingAttributes,getButtonAttributes:this.getButtonAttributes}},this.props.children||null)}}]),t}(ci.PureComponent);Kl(Mz,"defaultProps",{allowMultipleExpanded:!1,allowZeroExpanded:!1});var wz=function(n){vO(t,n);var e=CO(t);function t(){var r;Dx(this,t);for(var i=arguments.length,s=new Array(i),l=0;l<i;l++)s[l]=arguments[l];return r=e.call.apply(e,[this].concat(s)),Kl(sp(r),"renderChildren",function(o){return o?r.props.children(o):null}),r}return Fx(t,[{key:"render",value:function(){return ci.createElement(xz.Consumer,null,this.renderChildren)}}]),t}(ci.PureComponent),Die=["className","allowMultipleExpanded","allowZeroExpanded","onChange","preExpanded"],Fie=function(e){var t=e.className,r=t===void 0?"accordion":t,i=e.allowMultipleExpanded,s=e.allowZeroExpanded,l=e.onChange,o=e.preExpanded,f=Lx(e,Die);return ci.createElement(Mz,{preExpanded:o,allowMultipleExpanded:i,allowZeroExpanded:s,onChange:l},ci.createElement("div",nm({"data-accordion-component":"Accordion",className:r},f)))},k6;(function(n){n.Accordion="Accordion",n.AccordionItem="AccordionItem",n.AccordionItemButton="AccordionItemButton",n.AccordionItemHeading="AccordionItemHeading",n.AccordionItemPanel="AccordionItemPanel"})(k6||(k6={}));var Sz=k6,r5=0;function Lie(){var n=r5;return r5=r5+1,"raa-".concat(n)}var Uie=ci.useId||Lie,zie=/[\u0009\u000a\u000c\u000d\u0020]/g;function wC(n){return n===""||zie.test(n)?(console.error('uuid must be a valid HTML5 id but was given "'.concat(n,'", ASCII whitespaces are forbidden')),!1):!0}var Ez=ci.createContext(null),jie=function(e){var t=e.children,r=e.uuid,i=e.accordionContext,s=e.dangerouslySetExpanded,l=function(){i.toggleExpanded(r)},o=function(y){var x=s??y.isItemExpanded(r),B=y.isItemDisabled(r),O=y.getPanelAttributes(r,s),P=y.getHeadingAttributes(r),U=y.getButtonAttributes(r,s);return ci.createElement(Ez.Provider,{value:{uuid:r,expanded:x,disabled:B,toggleExpanded:l,panelAttributes:O,headingAttributes:P,buttonAttributes:U}},t)};return ci.createElement(wz,null,o)},Nie=function(e){return ci.createElement(wz,null,function(t){return ci.createElement(jie,nm({},e,{accordionContext:t}))})},Ux=function(e){var t=e.children,r=function(s){return s?t(s):null};return ci.createElement(Ez.Consumer,null,r)},Wie=["uuid","dangerouslySetExpanded","className","activeClassName"],Bz=function(e){var t=e.uuid,r=e.dangerouslySetExpanded,i=e.className,s=i===void 0?"accordion__item":i,l=e.activeClassName,o=Lx(e,Wie),f=ci.useState(Uie()),y=Eie(f,1),x=y[0],B=t??x,O=function(U){var j=U.expanded,N=j&&l?l:s;return ci.createElement("div",nm({"data-accordion-component":"AccordionItem",className:N},o))};return wC(B.toString()),o.id&&wC(o.id),ci.createElement(Nie,{uuid:B,dangerouslySetExpanded:r},ci.createElement(Ux,null,O))};Bz.displayName=Sz.AccordionItem;function Oz(n){return n&&(n.matches('[data-accordion-component="Accordion"]')?n:Oz(n.parentElement))}function zx(n){var e=Oz(n);return e&&Array.from(e.querySelectorAll('[data-accordion-component="AccordionItemButton"]'))}function Gie(n){var e=zx(n)||[],t=e[0];t&&t.focus()}function Qie(n){var e=zx(n)||[],t=e[e.length-1];t&&t.focus()}function Yie(n){var e=zx(n)||[],t=e.indexOf(n);if(t!==-1){var r=e[t+1];r&&r.focus()}}function qie(n){var e=zx(n)||[],t=e.indexOf(n);if(t!==-1){var r=e[t-1];r&&r.focus()}}var Om={END:"End",ENTER:"Enter",HOME:"Home",SPACE:" ",SPACE_DEPRECATED:"Spacebar",UP:"ArrowUp",DOWN:"ArrowDown",LEFT:"ArrowLeft",RIGHT:"ArrowRight"},Vie=["toggleExpanded","className"],$ie=function(e){var t=e.toggleExpanded,r=e.className,i=r===void 0?"accordion__button":r,s=Lx(e,Vie),l=function(f){var y=f.key;if((y===Om.ENTER||y===Om.SPACE||y===Om.SPACE_DEPRECATED)&&(f.preventDefault(),t()),f.target instanceof HTMLElement)switch(y){case Om.HOME:{f.preventDefault(),Gie(f.target);break}case Om.END:{f.preventDefault(),Qie(f.target);break}case Om.LEFT:case Om.UP:{f.preventDefault(),qie(f.target);break}case Om.RIGHT:case Om.DOWN:{f.preventDefault(),Yie(f.target);break}}};return s.id&&wC(s.id),ci.createElement("div",nm({className:i},s,{role:"button",tabIndex:0,onClick:t,onKeyDown:l,"data-accordion-component":"AccordionItemButton"}))},Hie=function(e){return ci.createElement(Ux,null,function(t){var r=t.toggleExpanded,i=t.buttonAttributes;return ci.createElement($ie,nm({toggleExpanded:r},e,i))})},Zie={className:"accordion__heading","aria-level":3},Xie=`AccordionItemButton may contain only one child element, which must be an instance of AccordionItemButton.

From the WAI-ARIA spec (https://www.w3.org/TR/wai-aria-practices-1.1/#accordion):

The button element is the only element inside the heading element. That is, if there are other visually persistent elements, they are not included inside the heading element.

`,Iz=function(n){vO(t,n);var e=CO(t);function t(){var r;Dx(this,t);for(var i=arguments.length,s=new Array(i),l=0;l<i;l++)s[l]=arguments[l];return r=e.call.apply(e,[this].concat(s)),Kl(sp(r),"ref",void 0),Kl(sp(r),"setRef",function(o){r.ref=o}),r}return Fx(t,[{key:"componentDidUpdate",value:function(){t.VALIDATE(this.ref)}},{key:"componentDidMount",value:function(){t.VALIDATE(this.ref)}},{key:"render",value:function(){return ci.createElement("div",nm({"data-accordion-component":"AccordionItemHeading"},this.props,{ref:this.setRef}))}}],[{key:"VALIDATE",value:function(i){if(i===void 0)throw new Error("ref is undefined");if(!(i.childElementCount===1&&i.firstElementChild&&i.firstElementChild.getAttribute("data-accordion-component")==="AccordionItemButton"))throw new Error(Xie)}}]),t}(ci.PureComponent);Kl(Iz,"defaultProps",Zie);var kz=function(e){return ci.createElement(Ux,null,function(t){var r=t.headingAttributes;return e.id&&wC(e.id),ci.createElement(Iz,nm({},e,r))})};kz.displayName=Sz.AccordionItemHeading;var Jie=["className","region","id"],eoe=function(e){var t=e.className,r=t===void 0?"accordion__panel":t,i=e.region,s=e.id,l=Lx(e,Jie),o=function(y){var x=y.panelAttributes;s&&wC(s);var B=B6(B6({},x),{},{"aria-labelledby":i?x["aria-labelledby"]:void 0});return ci.createElement("div",nm({"data-accordion-component":"AccordionItemPanel",className:r},l,B,{role:i?"region":void 0}))};return ci.createElement(Ux,null,o)},Ob={exports:{}},toe=Ob.exports,N9;function jx(){return N9||(N9=1,function(n,e){(function(t,r){n.exports=r()})(toe,function(){var t=navigator.userAgent,r=navigator.platform,i=/gecko\/\d/i.test(t),s=/MSIE \d/.test(t),l=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(t),o=/Edge\/(\d+)/.exec(t),f=s||l||o,y=f&&(s?document.documentMode||6:+(o||l)[1]),x=!o&&/WebKit\//.test(t),B=x&&/Qt\/\d+\.\d+/.test(t),O=!o&&/Chrome\/(\d+)/.exec(t),P=O&&+O[1],U=/Opera\//.test(t),j=/Apple Computer/.test(navigator.vendor),N=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(t),Y=/PhantomJS/.test(t),H=j&&(/Mobile\/\w+/.test(t)||navigator.maxTouchPoints>2),se=/Android/.test(t),re=H||se||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(t),V=H||/Mac/.test(r),ne=/\bCrOS\b/.test(t),G=/win/i.test(r),oe=U&&t.match(/Version\/(\d*\.\d*)/);oe&&(oe=Number(oe[1])),oe&&oe>=15&&(U=!1,x=!0);var he=V&&(B||U&&(oe==null||oe<12.11)),fe=i||f&&y>=9;function Ee(A){return new RegExp("(^|\\s)"+A+"(?:$|\\s)\\s*")}var me=function(A,g){var S=A.className,E=Ee(g).exec(S);if(E){var R=S.slice(E.index+E[0].length);A.className=S.slice(0,E.index)+(R?E[1]+R:"")}};function Se(A){for(var g=A.childNodes.length;g>0;--g)A.removeChild(A.firstChild);return A}function Ke(A,g){return Se(A).appendChild(g)}function xe(A,g,S,E){var R=document.createElement(A);if(S&&(R.className=S),E&&(R.style.cssText=E),typeof g=="string")R.appendChild(document.createTextNode(g));else if(g)for(var Z=0;Z<g.length;++Z)R.appendChild(g[Z]);return R}function at(A,g,S,E){var R=xe(A,g,S,E);return R.setAttribute("role","presentation"),R}var Ze;document.createRange?Ze=function(A,g,S,E){var R=document.createRange();return R.setEnd(E||A,S),R.setStart(A,g),R}:Ze=function(A,g,S){var E=document.body.createTextRange();try{E.moveToElementText(A.parentNode)}catch{return E}return E.collapse(!0),E.moveEnd("character",S),E.moveStart("character",g),E};function Je(A,g){if(g.nodeType==3&&(g=g.parentNode),A.contains)return A.contains(g);do if(g.nodeType==11&&(g=g.host),g==A)return!0;while(g=g.parentNode)}function Ne(A){var g=A.ownerDocument||A,S;try{S=A.activeElement}catch{S=g.body||null}for(;S&&S.shadowRoot&&S.shadowRoot.activeElement;)S=S.shadowRoot.activeElement;return S}function we(A,g){var S=A.className;Ee(g).test(S)||(A.className+=(S?" ":"")+g)}function De(A,g){for(var S=A.split(" "),E=0;E<S.length;E++)S[E]&&!Ee(S[E]).test(g)&&(g+=" "+S[E]);return g}var He=function(A){A.select()};H?He=function(A){A.selectionStart=0,A.selectionEnd=A.value.length}:f&&(He=function(A){try{A.select()}catch{}});function bt(A){return A.display.wrapper.ownerDocument}function Yt(A){return yt(A.display.wrapper)}function yt(A){return A.getRootNode?A.getRootNode():A.ownerDocument}function Ft(A){return bt(A).defaultView}function Pt(A){var g=Array.prototype.slice.call(arguments,1);return function(){return A.apply(null,g)}}function Ue(A,g,S){g||(g={});for(var E in A)A.hasOwnProperty(E)&&(S!==!1||!g.hasOwnProperty(E))&&(g[E]=A[E]);return g}function Pe(A,g,S,E,R){g==null&&(g=A.search(/[^\s\u00a0]/),g==-1&&(g=A.length));for(var Z=E||0,Ae=R||0;;){var Ce=A.indexOf("	",Z);if(Ce<0||Ce>=g)return Ae+(g-Z);Ae+=Ce-Z,Ae+=S-Ae%S,Z=Ce+1}}var Be=function(){this.id=null,this.f=null,this.time=0,this.handler=Pt(this.onTimeout,this)};Be.prototype.onTimeout=function(A){A.id=0,A.time<=+new Date?A.f():setTimeout(A.handler,A.time-+new Date)},Be.prototype.set=function(A,g){this.f=g;var S=+new Date+A;(!this.id||S<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,A),this.time=S)};function it(A,g){for(var S=0;S<A.length;++S)if(A[S]==g)return S;return-1}var _t=50,pt={toString:function(){return"CodeMirror.Pass"}},Lt={scroll:!1},nn={origin:"*mouse"},Kt={origin:"+move"};function vn(A,g,S){for(var E=0,R=0;;){var Z=A.indexOf("	",E);Z==-1&&(Z=A.length);var Ae=Z-E;if(Z==A.length||R+Ae>=g)return E+Math.min(Ae,g-R);if(R+=Z-E,R+=S-R%S,E=Z+1,R>=g)return E}}var Gn=[""];function tn(A){for(;Gn.length<=A;)Gn.push(dr(Gn)+" ");return Gn[A]}function dr(A){return A[A.length-1]}function Pn(A,g){for(var S=[],E=0;E<A.length;E++)S[E]=g(A[E],E);return S}function pn(A,g,S){for(var E=0,R=S(g);E<A.length&&S(A[E])<=R;)E++;A.splice(E,0,g)}function $n(){}function lr(A,g){var S;return Object.create?S=Object.create(A):($n.prototype=A,S=new $n),g&&Ue(g,S),S}var vr=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function Zn(A){return/\w/.test(A)||A>""&&(A.toUpperCase()!=A.toLowerCase()||vr.test(A))}function Ge(A,g){return g?g.source.indexOf("\\w")>-1&&Zn(A)?!0:g.test(A):Zn(A)}function ce(A){for(var g in A)if(A.hasOwnProperty(g)&&A[g])return!1;return!0}var pe=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function nt(A){return A.charCodeAt(0)>=768&&pe.test(A)}function wt(A,g,S){for(;(S<0?g>0:g<A.length)&&nt(A.charAt(g));)g+=S;return g}function Ht(A,g,S){for(var E=g>S?-1:1;;){if(g==S)return g;var R=(g+S)/2,Z=E<0?Math.ceil(R):Math.floor(R);if(Z==g)return A(Z)?g:S;A(Z)?S=Z:g=Z+E}}function sn(A,g,S,E){if(!A)return E(g,S,"ltr",0);for(var R=!1,Z=0;Z<A.length;++Z){var Ae=A[Z];(Ae.from<S&&Ae.to>g||g==S&&Ae.to==g)&&(E(Math.max(Ae.from,g),Math.min(Ae.to,S),Ae.level==1?"rtl":"ltr",Z),R=!0)}R||E(g,S,"ltr")}var Hn=null;function Ve(A,g,S){var E;Hn=null;for(var R=0;R<A.length;++R){var Z=A[R];if(Z.from<g&&Z.to>g)return R;Z.to==g&&(Z.from!=Z.to&&S=="before"?E=R:Hn=R),Z.from==g&&(Z.from!=Z.to&&S!="before"?E=R:Hn=R)}return E??Hn}var J=function(){var A="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",g="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function S(je){return je<=247?A.charAt(je):1424<=je&&je<=1524?"R":1536<=je&&je<=1785?g.charAt(je-1536):1774<=je&&je<=2220?"r":8192<=je&&je<=8203?"w":je==8204?"b":"L"}var E=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,R=/[stwN]/,Z=/[LRr]/,Ae=/[Lb1n]/,Ce=/[1n]/;function Ie(je,gt,Mt){this.level=je,this.from=gt,this.to=Mt}return function(je,gt){var Mt=gt=="ltr"?"L":"R";if(je.length==0||gt=="ltr"&&!E.test(je))return!1;for(var Xt=je.length,Qt=[],xn=0;xn<Xt;++xn)Qt.push(S(je.charCodeAt(xn)));for(var Fn=0,Ar=Mt;Fn<Xt;++Fn){var tr=Qt[Fn];tr=="m"?Qt[Fn]=Ar:Ar=tr}for(var gr=0,yr=Mt;gr<Xt;++gr){var Rr=Qt[gr];Rr=="1"&&yr=="r"?Qt[gr]="n":Z.test(Rr)&&(yr=Rr,Rr=="r"&&(Qt[gr]="R"))}for(var ti=1,jr=Qt[0];ti<Xt-1;++ti){var Ji=Qt[ti];Ji=="+"&&jr=="1"&&Qt[ti+1]=="1"?Qt[ti]="1":Ji==","&&jr==Qt[ti+1]&&(jr=="1"||jr=="n")&&(Qt[ti]=jr),jr=Ji}for(var Bo=0;Bo<Xt;++Bo){var Na=Qt[Bo];if(Na==",")Qt[Bo]="N";else if(Na=="%"){var na=void 0;for(na=Bo+1;na<Xt&&Qt[na]=="%";++na);for(var fa=Bo&&Qt[Bo-1]=="!"||na<Xt&&Qt[na]=="1"?"1":"N",Wa=Bo;Wa<na;++Wa)Qt[Wa]=fa;Bo=na-1}}for(var Ga=0,Wl=Mt;Ga<Xt;++Ga){var Qa=Qt[Ga];Wl=="L"&&Qa=="1"?Qt[Ga]="L":Z.test(Qa)&&(Wl=Qa)}for(var pa=0;pa<Xt;++pa)if(R.test(Qt[pa])){var as=void 0;for(as=pa+1;as<Xt&&R.test(Qt[as]);++as);for(var Ci=(pa?Qt[pa-1]:Mt)=="L",ls=(as<Xt?Qt[as]:Mt)=="L",ra=Ci==ls?Ci?"L":"R":Mt,Ys=pa;Ys<as;++Ys)Qt[Ys]=ra;pa=as-1}for(var xs=[],Bu,Ko=0;Ko<Xt;)if(Ae.test(Qt[Ko])){var Pc=Ko;for(++Ko;Ko<Xt&&Ae.test(Qt[Ko]);++Ko);xs.push(new Ie(0,Pc,Ko))}else{var Ou=Ko,zA=xs.length,CA=gt=="rtl"?1:0;for(++Ko;Ko<Xt&&Qt[Ko]!="L";++Ko);for(var Ya=Ou;Ya<Ko;)if(Ce.test(Qt[Ya])){Ou<Ya&&(xs.splice(zA,0,new Ie(1,Ou,Ya)),zA+=CA);var Ol=Ya;for(++Ya;Ya<Ko&&Ce.test(Qt[Ya]);++Ya);xs.splice(zA,0,new Ie(2,Ol,Ya)),zA+=CA,Ou=Ya}else++Ya;Ou<Ko&&xs.splice(zA,0,new Ie(1,Ou,Ko))}return gt=="ltr"&&(xs[0].level==1&&(Bu=je.match(/^\s+/))&&(xs[0].from=Bu[0].length,xs.unshift(new Ie(0,0,Bu[0].length))),dr(xs).level==1&&(Bu=je.match(/\s+$/))&&(dr(xs).to-=Bu[0].length,xs.push(new Ie(0,Xt-Bu[0].length,Xt)))),gt=="rtl"?xs.reverse():xs}}();function ve(A,g){var S=A.order;return S==null&&(S=A.order=J(A.text,g)),S}var p=[],Fe=function(A,g,S){if(A.addEventListener)A.addEventListener(g,S,!1);else if(A.attachEvent)A.attachEvent("on"+g,S);else{var E=A._handlers||(A._handlers={});E[g]=(E[g]||p).concat(S)}};function Qe(A,g){return A._handlers&&A._handlers[g]||p}function rt(A,g,S){if(A.removeEventListener)A.removeEventListener(g,S,!1);else if(A.detachEvent)A.detachEvent("on"+g,S);else{var E=A._handlers,R=E&&E[g];if(R){var Z=it(R,S);Z>-1&&(E[g]=R.slice(0,Z).concat(R.slice(Z+1)))}}}function ct(A,g){var S=Qe(A,g);if(S.length)for(var E=Array.prototype.slice.call(arguments,2),R=0;R<S.length;++R)S[R].apply(null,E)}function dt(A,g,S){return typeof g=="string"&&(g={type:g,preventDefault:function(){this.defaultPrevented=!0}}),ct(A,S||g.type,A,g),Dn(g)||g.codemirrorIgnore}function qt(A){var g=A._handlers&&A._handlers.cursorActivity;if(g)for(var S=A.curOp.cursorActivityHandlers||(A.curOp.cursorActivityHandlers=[]),E=0;E<g.length;++E)it(S,g[E])==-1&&S.push(g[E])}function Gt(A,g){return Qe(A,g).length>0}function zt(A){A.prototype.on=function(g,S){Fe(this,g,S)},A.prototype.off=function(g,S){rt(this,g,S)}}function on(A){A.preventDefault?A.preventDefault():A.returnValue=!1}function jt(A){A.stopPropagation?A.stopPropagation():A.cancelBubble=!0}function Dn(A){return A.defaultPrevented!=null?A.defaultPrevented:A.returnValue==!1}function rr(A){on(A),jt(A)}function Br(A){return A.target||A.srcElement}function Jn(A){var g=A.which;return g==null&&(A.button&1?g=1:A.button&2?g=3:A.button&4&&(g=2)),V&&A.ctrlKey&&g==1&&(g=3),g}var un=function(){if(f&&y<9)return!1;var A=xe("div");return"draggable"in A||"dragDrop"in A}(),er;function fr(A){if(er==null){var g=xe("span","");Ke(A,xe("span",[g,document.createTextNode("x")])),A.firstChild.offsetHeight!=0&&(er=g.offsetWidth<=1&&g.offsetHeight>2&&!(f&&y<8))}var S=er?xe("span",""):xe("span","",null,"display: inline-block; width: 1px; margin-right: -1px");return S.setAttribute("cm-text",""),S}var Sr;function Ur(A){if(Sr!=null)return Sr;var g=Ke(A,document.createTextNode("AA")),S=Ze(g,0,1).getBoundingClientRect(),E=Ze(g,1,2).getBoundingClientRect();return Se(A),!S||S.left==S.right?!1:Sr=E.right-S.right<3}var ri=`

b`.split(/\n/).length!=3?function(A){for(var g=0,S=[],E=A.length;g<=E;){var R=A.indexOf(`
`,g);R==-1&&(R=A.length);var Z=A.slice(g,A.charAt(R-1)=="\r"?R-1:R),Ae=Z.indexOf("\r");Ae!=-1?(S.push(Z.slice(0,Ae)),g+=Ae+1):(S.push(Z),g=R+1)}return S}:function(A){return A.split(/\r\n?|\n/)},Or=window.getSelection?function(A){try{return A.selectionStart!=A.selectionEnd}catch{return!1}}:function(A){var g;try{g=A.ownerDocument.selection.createRange()}catch{}return!g||g.parentElement()!=A?!1:g.compareEndPoints("StartToEnd",g)!=0},ka=function(){var A=xe("div");return"oncopy"in A?!0:(A.setAttribute("oncopy","return;"),typeof A.oncopy=="function")}(),Wi=null;function Bi(A){if(Wi!=null)return Wi;var g=Ke(A,xe("span","x")),S=g.getBoundingClientRect(),E=Ze(g,0,1).getBoundingClientRect();return Wi=Math.abs(S.left-E.left)>1}var eo={},ws={};function ko(A,g){arguments.length>2&&(g.dependencies=Array.prototype.slice.call(arguments,2)),eo[A]=g}function Hi(A,g){ws[A]=g}function Sl(A){if(typeof A=="string"&&ws.hasOwnProperty(A))A=ws[A];else if(A&&typeof A.name=="string"&&ws.hasOwnProperty(A.name)){var g=ws[A.name];typeof g=="string"&&(g={name:g}),A=lr(g,A),A.name=g.name}else{if(typeof A=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(A))return Sl("application/xml");if(typeof A=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(A))return Sl("application/json")}return typeof A=="string"?{name:A}:A||{name:"null"}}function Go(A,g){g=Sl(g);var S=eo[g.name];if(!S)return Go(A,"text/plain");var E=S(A,g);if(Za.hasOwnProperty(g.name)){var R=Za[g.name];for(var Z in R)R.hasOwnProperty(Z)&&(E.hasOwnProperty(Z)&&(E["_"+Z]=E[Z]),E[Z]=R[Z])}if(E.name=g.name,g.helperType&&(E.helperType=g.helperType),g.modeProps)for(var Ae in g.modeProps)E[Ae]=g.modeProps[Ae];return E}var Za={};function Xa(A,g){var S=Za.hasOwnProperty(A)?Za[A]:Za[A]={};Ue(g,S)}function Yi(A,g){if(g===!0)return g;if(A.copyState)return A.copyState(g);var S={};for(var E in g){var R=g[E];R instanceof Array&&(R=R.concat([])),S[E]=R}return S}function Lu(A,g){for(var S;A.innerMode&&(S=A.innerMode(g),!(!S||S.mode==A));)g=S.state,A=S.mode;return S||{mode:A,state:g}}function Jl(A,g,S){return A.startState?A.startState(g,S):!0}var wo=function(A,g,S){this.pos=this.start=0,this.string=A,this.tabSize=g||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=S};wo.prototype.eol=function(){return this.pos>=this.string.length},wo.prototype.sol=function(){return this.pos==this.lineStart},wo.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},wo.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},wo.prototype.eat=function(A){var g=this.string.charAt(this.pos),S;if(typeof A=="string"?S=g==A:S=g&&(A.test?A.test(g):A(g)),S)return++this.pos,g},wo.prototype.eatWhile=function(A){for(var g=this.pos;this.eat(A););return this.pos>g},wo.prototype.eatSpace=function(){for(var A=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>A},wo.prototype.skipToEnd=function(){this.pos=this.string.length},wo.prototype.skipTo=function(A){var g=this.string.indexOf(A,this.pos);if(g>-1)return this.pos=g,!0},wo.prototype.backUp=function(A){this.pos-=A},wo.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Pe(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?Pe(this.string,this.lineStart,this.tabSize):0)},wo.prototype.indentation=function(){return Pe(this.string,null,this.tabSize)-(this.lineStart?Pe(this.string,this.lineStart,this.tabSize):0)},wo.prototype.match=function(A,g,S){if(typeof A=="string"){var E=function(Ae){return S?Ae.toLowerCase():Ae},R=this.string.substr(this.pos,A.length);if(E(R)==E(A))return g!==!1&&(this.pos+=A.length),!0}else{var Z=this.string.slice(this.pos).match(A);return Z&&Z.index>0?null:(Z&&g!==!1&&(this.pos+=Z[0].length),Z)}},wo.prototype.current=function(){return this.string.slice(this.start,this.pos)},wo.prototype.hideFirstChars=function(A,g){this.lineStart+=A;try{return g()}finally{this.lineStart-=A}},wo.prototype.lookAhead=function(A){var g=this.lineOracle;return g&&g.lookAhead(A)},wo.prototype.baseToken=function(){var A=this.lineOracle;return A&&A.baseToken(this.pos)};function wr(A,g){if(g-=A.first,g<0||g>=A.size)throw new Error("There is no line "+(g+A.first)+" in the document.");for(var S=A;!S.lines;)for(var E=0;;++E){var R=S.children[E],Z=R.chunkSize();if(g<Z){S=R;break}g-=Z}return S.lines[g]}function Ta(A,g,S){var E=[],R=g.line;return A.iter(g.line,S.line+1,function(Z){var Ae=Z.text;R==S.line&&(Ae=Ae.slice(0,S.ch)),R==g.line&&(Ae=Ae.slice(g.ch)),E.push(Ae),++R}),E}function Ss(A,g,S){var E=[];return A.iter(g,S,function(R){E.push(R.text)}),E}function Zs(A,g){var S=g-A.height;if(S)for(var E=A;E;E=E.parent)E.height+=S}function Ye(A){if(A.parent==null)return null;for(var g=A.parent,S=it(g.lines,A),E=g.parent;E;g=E,E=E.parent)for(var R=0;E.children[R]!=g;++R)S+=E.children[R].chunkSize();return S+g.first}function xt(A,g){var S=A.first;e:do{for(var E=0;E<A.children.length;++E){var R=A.children[E],Z=R.height;if(g<Z){A=R;continue e}g-=Z,S+=R.chunkSize()}return S}while(!A.lines);for(var Ae=0;Ae<A.lines.length;++Ae){var Ce=A.lines[Ae],Ie=Ce.height;if(g<Ie)break;g-=Ie}return S+Ae}function Cn(A,g){return g>=A.first&&g<A.first+A.size}function Qn(A,g){return String(A.lineNumberFormatter(g+A.firstLineNumber))}function fn(A,g,S){if(S===void 0&&(S=null),!(this instanceof fn))return new fn(A,g,S);this.line=A,this.ch=g,this.sticky=S}function ur(A,g){return A.line-g.line||A.ch-g.ch}function Di(A,g){return A.sticky==g.sticky&&ur(A,g)==0}function vo(A){return fn(A.line,A.ch)}function rs(A,g){return ur(A,g)<0?g:A}function ua(A,g){return ur(A,g)<0?A:g}function eu(A,g){return Math.max(A.first,Math.min(g,A.first+A.size-1))}function ii(A,g){if(g.line<A.first)return fn(A.first,0);var S=A.first+A.size-1;return g.line>S?fn(S,wr(A,S).text.length):qi(g,wr(A,g.line).text.length)}function qi(A,g){var S=A.ch;return S==null||S>g?fn(A.line,g):S<0?fn(A.line,0):A}function Aa(A,g){for(var S=[],E=0;E<g.length;E++)S[E]=ii(A,g[E]);return S}var Cs=function(A,g){this.state=A,this.lookAhead=g},xi=function(A,g,S,E){this.state=g,this.doc=A,this.line=S,this.maxLookAhead=E||0,this.baseTokens=null,this.baseTokenPos=1};xi.prototype.lookAhead=function(A){var g=this.doc.getLine(this.line+A);return g!=null&&A>this.maxLookAhead&&(this.maxLookAhead=A),g},xi.prototype.baseToken=function(A){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=A;)this.baseTokenPos+=2;var g=this.baseTokens[this.baseTokenPos+1];return{type:g&&g.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-A}},xi.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},xi.fromSaved=function(A,g,S){return g instanceof Cs?new xi(A,Yi(A.mode,g.state),S,g.lookAhead):new xi(A,Yi(A.mode,g),S)},xi.prototype.save=function(A){var g=A!==!1?Yi(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new Cs(g,this.maxLookAhead):g};function uA(A,g,S,E){var R=[A.state.modeGen],Z={};Js(A,g.text,A.doc.mode,S,function(je,gt){return R.push(je,gt)},Z,E);for(var Ae=S.state,Ce=function(je){S.baseTokens=R;var gt=A.state.overlays[je],Mt=1,Xt=0;S.state=!0,Js(A,g.text,gt.mode,S,function(Qt,xn){for(var Fn=Mt;Xt<Qt;){var Ar=R[Mt];Ar>Qt&&R.splice(Mt,1,Qt,R[Mt+1],Ar),Mt+=2,Xt=Math.min(Qt,Ar)}if(xn)if(gt.opaque)R.splice(Fn,Mt-Fn,Qt,"overlay "+xn),Mt=Fn+2;else for(;Fn<Mt;Fn+=2){var tr=R[Fn+1];R[Fn+1]=(tr?tr+" ":"")+"overlay "+xn}},Z),S.state=Ae,S.baseTokens=null,S.baseTokenPos=1},Ie=0;Ie<A.state.overlays.length;++Ie)Ce(Ie);return{styles:R,classes:Z.bgClass||Z.textClass?Z:null}}function Ja(A,g,S){if(!g.styles||g.styles[0]!=A.state.modeGen){var E=oi(A,Ye(g)),R=g.text.length>A.options.maxHighlightLength&&Yi(A.doc.mode,E.state),Z=uA(A,g,E);R&&(E.state=R),g.stateAfter=E.save(!R),g.styles=Z.styles,Z.classes?g.styleClasses=Z.classes:g.styleClasses&&(g.styleClasses=null),S===A.doc.highlightFrontier&&(A.doc.modeFrontier=Math.max(A.doc.modeFrontier,++A.doc.highlightFrontier))}return g.styles}function oi(A,g,S){var E=A.doc,R=A.display;if(!E.mode.startState)return new xi(E,!0,g);var Z=Au(A,g,S),Ae=Z>E.first&&wr(E,Z-1).stateAfter,Ce=Ae?xi.fromSaved(E,Ae,Z):new xi(E,Jl(E.mode),Z);return E.iter(Z,g,function(Ie){to(A,Ie.text,Ce);var je=Ce.line;Ie.stateAfter=je==g-1||je%5==0||je>=R.viewFrom&&je<R.viewTo?Ce.save():null,Ce.nextLine()}),S&&(E.modeFrontier=Ce.line),Ce}function to(A,g,S,E){var R=A.doc.mode,Z=new wo(g,A.options.tabSize,S);for(Z.start=Z.pos=E||0,g==""&&$o(R,S.state);!Z.eol();)Qo(R,Z,S.state),Z.start=Z.pos}function $o(A,g){if(A.blankLine)return A.blankLine(g);if(A.innerMode){var S=Lu(A,g);if(S.mode.blankLine)return S.mode.blankLine(S.state)}}function Qo(A,g,S,E){for(var R=0;R<10;R++){E&&(E[0]=Lu(A,S).mode);var Z=A.token(g,S);if(g.pos>g.start)return Z}throw new Error("Mode "+A.name+" failed to advance stream.")}var js=function(A,g,S){this.start=A.start,this.end=A.pos,this.string=A.current(),this.type=g||null,this.state=S};function Es(A,g,S,E){var R=A.doc,Z=R.mode,Ae;g=ii(R,g);var Ce=wr(R,g.line),Ie=oi(A,g.line,S),je=new wo(Ce.text,A.options.tabSize,Ie),gt;for(E&&(gt=[]);(E||je.pos<g.ch)&&!je.eol();)je.start=je.pos,Ae=Qo(Z,je,Ie.state),E&&gt.push(new js(je,Ae,Yi(R.mode,Ie.state)));return E?gt:new js(je,Ae,Ie.state)}function Xs(A,g){if(A)for(;;){var S=A.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!S)break;A=A.slice(0,S.index)+A.slice(S.index+S[0].length);var E=S[1]?"bgClass":"textClass";g[E]==null?g[E]=S[2]:new RegExp("(?:^|\\s)"+S[2]+"(?:$|\\s)").test(g[E])||(g[E]+=" "+S[2])}return A}function Js(A,g,S,E,R,Z,Ae){var Ce=S.flattenSpans;Ce==null&&(Ce=A.options.flattenSpans);var Ie=0,je=null,gt=new wo(g,A.options.tabSize,E),Mt,Xt=A.options.addModeClass&&[null];for(g==""&&Xs($o(S,E.state),Z);!gt.eol();){if(gt.pos>A.options.maxHighlightLength?(Ce=!1,Ae&&to(A,g,E,gt.pos),gt.pos=g.length,Mt=null):Mt=Xs(Qo(S,gt,E.state,Xt),Z),Xt){var Qt=Xt[0].name;Qt&&(Mt="m-"+(Mt?Qt+" "+Mt:Qt))}if(!Ce||je!=Mt){for(;Ie<gt.start;)Ie=Math.min(gt.start,Ie+5e3),R(Ie,je);je=Mt}gt.start=gt.pos}for(;Ie<gt.pos;){var xn=Math.min(gt.pos,Ie+5e3);R(xn,je),Ie=xn}}function Au(A,g,S){for(var E,R,Z=A.doc,Ae=S?-1:g-(A.doc.mode.innerMode?1e3:100),Ce=g;Ce>Ae;--Ce){if(Ce<=Z.first)return Z.first;var Ie=wr(Z,Ce-1),je=Ie.stateAfter;if(je&&(!S||Ce+(je instanceof Cs?je.lookAhead:0)<=Z.modeFrontier))return Ce;var gt=Pe(Ie.text,null,A.options.tabSize);(R==null||E>gt)&&(R=Ce-1,E=gt)}return R}function Ns(A,g){if(A.modeFrontier=Math.min(A.modeFrontier,g),!(A.highlightFrontier<g-10)){for(var S=A.first,E=g-1;E>S;E--){var R=wr(A,E).stateAfter;if(R&&(!(R instanceof Cs)||E+R.lookAhead<g)){S=E+1;break}}A.highlightFrontier=Math.min(A.highlightFrontier,S)}}var Oi=!1,is=!1;function ea(){Oi=!0}function va(){is=!0}function As(A,g,S){this.marker=A,this.from=g,this.to=S}function pl(A,g){if(A)for(var S=0;S<A.length;++S){var E=A[S];if(E.marker==g)return E}}function ml(A,g){for(var S,E=0;E<A.length;++E)A[E]!=g&&(S||(S=[])).push(A[E]);return S}function fo(A,g,S){var E=S&&window.WeakSet&&(S.markedSpans||(S.markedSpans=new WeakSet));E&&A.markedSpans&&E.has(A.markedSpans)?A.markedSpans.push(g):(A.markedSpans=A.markedSpans?A.markedSpans.concat([g]):[g],E&&E.add(A.markedSpans)),g.marker.attachLine(A)}function Uu(A,g,S){var E;if(A)for(var R=0;R<A.length;++R){var Z=A[R],Ae=Z.marker,Ce=Z.from==null||(Ae.inclusiveLeft?Z.from<=g:Z.from<g);if(Ce||Z.from==g&&Ae.type=="bookmark"&&(!S||!Z.marker.insertLeft)){var Ie=Z.to==null||(Ae.inclusiveRight?Z.to>=g:Z.to>g);(E||(E=[])).push(new As(Ae,Z.from,Ie?null:Z.to))}}return E}function zi(A,g,S){var E;if(A)for(var R=0;R<A.length;++R){var Z=A[R],Ae=Z.marker,Ce=Z.to==null||(Ae.inclusiveRight?Z.to>=g:Z.to>g);if(Ce||Z.from==g&&Ae.type=="bookmark"&&(!S||Z.marker.insertLeft)){var Ie=Z.from==null||(Ae.inclusiveLeft?Z.from<=g:Z.from<g);(E||(E=[])).push(new As(Ae,Ie?null:Z.from-g,Z.to==null?null:Z.to-g))}}return E}function qr(A,g){if(g.full)return null;var S=Cn(A,g.from.line)&&wr(A,g.from.line).markedSpans,E=Cn(A,g.to.line)&&wr(A,g.to.line).markedSpans;if(!S&&!E)return null;var R=g.from.ch,Z=g.to.ch,Ae=ur(g.from,g.to)==0,Ce=Uu(S,R,Ae),Ie=zi(E,Z,Ae),je=g.text.length==1,gt=dr(g.text).length+(je?R:0);if(Ce)for(var Mt=0;Mt<Ce.length;++Mt){var Xt=Ce[Mt];if(Xt.to==null){var Qt=pl(Ie,Xt.marker);Qt?je&&(Xt.to=Qt.to==null?null:Qt.to+gt):Xt.to=R}}if(Ie)for(var xn=0;xn<Ie.length;++xn){var Fn=Ie[xn];if(Fn.to!=null&&(Fn.to+=gt),Fn.from==null){var Ar=pl(Ce,Fn.marker);Ar||(Fn.from=gt,je&&(Ce||(Ce=[])).push(Fn))}else Fn.from+=gt,je&&(Ce||(Ce=[])).push(Fn)}Ce&&(Ce=Dl(Ce)),Ie&&Ie!=Ce&&(Ie=Dl(Ie));var tr=[Ce];if(!je){var gr=g.text.length-2,yr;if(gr>0&&Ce)for(var Rr=0;Rr<Ce.length;++Rr)Ce[Rr].to==null&&(yr||(yr=[])).push(new As(Ce[Rr].marker,null,null));for(var ti=0;ti<gr;++ti)tr.push(yr);tr.push(Ie)}return tr}function Dl(A){for(var g=0;g<A.length;++g){var S=A[g];S.from!=null&&S.from==S.to&&S.marker.clearWhenEmpty!==!1&&A.splice(g--,1)}return A.length?A:null}function Vi(A,g,S){var E=null;if(A.iter(g.line,S.line+1,function(Qt){if(Qt.markedSpans)for(var xn=0;xn<Qt.markedSpans.length;++xn){var Fn=Qt.markedSpans[xn].marker;Fn.readOnly&&(!E||it(E,Fn)==-1)&&(E||(E=[])).push(Fn)}}),!E)return null;for(var R=[{from:g,to:S}],Z=0;Z<E.length;++Z)for(var Ae=E[Z],Ce=Ae.find(0),Ie=0;Ie<R.length;++Ie){var je=R[Ie];if(!(ur(je.to,Ce.from)<0||ur(je.from,Ce.to)>0)){var gt=[Ie,1],Mt=ur(je.from,Ce.from),Xt=ur(je.to,Ce.to);(Mt<0||!Ae.inclusiveLeft&&!Mt)&&gt.push({from:je.from,to:Ce.from}),(Xt>0||!Ae.inclusiveRight&&!Xt)&&gt.push({from:Ce.to,to:je.to}),R.splice.apply(R,gt),Ie+=gt.length-3}}return R}function uo(A){var g=A.markedSpans;if(g){for(var S=0;S<g.length;++S)g[S].marker.detachLine(A);A.markedSpans=null}}function Ki(A,g){if(g){for(var S=0;S<g.length;++S)g[S].marker.attachLine(A);A.markedSpans=g}}function ee(A){return A.inclusiveLeft?-1:0}function Oe(A){return A.inclusiveRight?1:0}function st(A,g){var S=A.lines.length-g.lines.length;if(S!=0)return S;var E=A.find(),R=g.find(),Z=ur(E.from,R.from)||ee(A)-ee(g);if(Z)return-Z;var Ae=ur(E.to,R.to)||Oe(A)-Oe(g);return Ae||g.id-A.id}function Vt(A,g){var S=is&&A.markedSpans,E;if(S)for(var R=void 0,Z=0;Z<S.length;++Z)R=S[Z],R.marker.collapsed&&(g?R.from:R.to)==null&&(!E||st(E,R.marker)<0)&&(E=R.marker);return E}function Er(A){return Vt(A,!0)}function qn(A){return Vt(A,!1)}function si(A,g){var S=is&&A.markedSpans,E;if(S)for(var R=0;R<S.length;++R){var Z=S[R];Z.marker.collapsed&&(Z.from==null||Z.from<g)&&(Z.to==null||Z.to>g)&&(!E||st(E,Z.marker)<0)&&(E=Z.marker)}return E}function di(A,g,S,E,R){var Z=wr(A,g),Ae=is&&Z.markedSpans;if(Ae)for(var Ce=0;Ce<Ae.length;++Ce){var Ie=Ae[Ce];if(Ie.marker.collapsed){var je=Ie.marker.find(0),gt=ur(je.from,S)||ee(Ie.marker)-ee(R),Mt=ur(je.to,E)||Oe(Ie.marker)-Oe(R);if(!(gt>=0&&Mt<=0||gt<=0&&Mt>=0)&&(gt<=0&&(Ie.marker.inclusiveRight&&R.inclusiveLeft?ur(je.to,S)>=0:ur(je.to,S)>0)||gt>=0&&(Ie.marker.inclusiveRight&&R.inclusiveLeft?ur(je.from,E)<=0:ur(je.from,E)<0)))return!0}}}function Ir(A){for(var g;g=Er(A);)A=g.find(-1,!0).line;return A}function Pr(A){for(var g;g=qn(A);)A=g.find(1,!0).line;return A}function pi(A){for(var g,S;g=qn(A);)A=g.find(1,!0).line,(S||(S=[])).push(A);return S}function Do(A,g){var S=wr(A,g),E=Ir(S);return S==E?g:Ye(E)}function mi(A,g){if(g>A.lastLine())return g;var S=wr(A,g),E;if(!zr(A,S))return g;for(;E=qn(S);)S=E.find(1,!0).line;return Ye(S)+1}function zr(A,g){var S=is&&g.markedSpans;if(S){for(var E=void 0,R=0;R<S.length;++R)if(E=S[R],!!E.marker.collapsed){if(E.from==null)return!0;if(!E.marker.widgetNode&&E.from==0&&E.marker.inclusiveLeft&&Co(A,g,E))return!0}}}function Co(A,g,S){if(S.to==null){var E=S.marker.find(1,!0);return Co(A,E.line,pl(E.line.markedSpans,S.marker))}if(S.marker.inclusiveRight&&S.to==g.text.length)return!0;for(var R=void 0,Z=0;Z<g.markedSpans.length;++Z)if(R=g.markedSpans[Z],R.marker.collapsed&&!R.marker.widgetNode&&R.from==S.to&&(R.to==null||R.to!=S.from)&&(R.marker.inclusiveLeft||S.marker.inclusiveRight)&&Co(A,g,R))return!0}function Zi(A){A=Ir(A);for(var g=0,S=A.parent,E=0;E<S.lines.length;++E){var R=S.lines[E];if(R==A)break;g+=R.height}for(var Z=S.parent;Z;S=Z,Z=S.parent)for(var Ae=0;Ae<Z.children.length;++Ae){var Ce=Z.children[Ae];if(Ce==S)break;g+=Ce.height}return g}function To(A){if(A.height==0)return 0;for(var g=A.text.length,S,E=A;S=Er(E);){var R=S.find(0,!0);E=R.from.line,g+=R.from.ch-R.to.ch}for(E=A;S=qn(E);){var Z=S.find(0,!0);g-=E.text.length-Z.from.ch,E=Z.to.line,g+=E.text.length-Z.to.ch}return g}function ca(A){var g=A.display,S=A.doc;g.maxLine=wr(S,S.first),g.maxLineLength=To(g.maxLine),g.maxLineChanged=!0,S.iter(function(E){var R=To(E);R>g.maxLineLength&&(g.maxLineLength=R,g.maxLine=E)})}var Pa=function(A,g,S){this.text=A,Ki(this,g),this.height=S?S(this):1};Pa.prototype.lineNo=function(){return Ye(this)},zt(Pa);function cu(A,g,S,E){A.text=g,A.stateAfter&&(A.stateAfter=null),A.styles&&(A.styles=null),A.order!=null&&(A.order=null),uo(A),Ki(A,S);var R=E?E(A):1;R!=A.height&&Zs(A,R)}function Ws(A){A.parent=null,uo(A)}var zd={},el={};function gl(A,g){if(!A||/^\s*$/.test(A))return null;var S=g.addModeClass?el:zd;return S[A]||(S[A]=A.replace(/\S+/g,"cm-$&"))}function Ad(A,g){var S=at("span",null,null,x?"padding-right: .1px":null),E={pre:at("pre",[S],"CodeMirror-line"),content:S,col:0,pos:0,cm:A,trailingSpace:!1,splitSpaces:A.getOption("lineWrapping")};g.measure={};for(var R=0;R<=(g.rest?g.rest.length:0);R++){var Z=R?g.rest[R-1]:g.line,Ae=void 0;E.pos=0,E.addToken=jd,Ur(A.display.measure)&&(Ae=ve(Z,A.doc.direction))&&(E.addToken=Fo(E.addToken,Ae)),E.map=[];var Ce=g!=A.display.externalMeasured&&Ye(Z);yh(Z,E,Ja(A,Z,Ce)),Z.styleClasses&&(Z.styleClasses.bgClass&&(E.bgClass=De(Z.styleClasses.bgClass,E.bgClass||"")),Z.styleClasses.textClass&&(E.textClass=De(Z.styleClasses.textClass,E.textClass||""))),E.map.length==0&&E.map.push(0,0,E.content.appendChild(fr(A.display.measure))),R==0?(g.measure.map=E.map,g.measure.cache={}):((g.measure.maps||(g.measure.maps=[])).push(E.map),(g.measure.caches||(g.measure.caches=[])).push({}))}if(x){var Ie=E.content.lastChild;(/\bcm-tab\b/.test(Ie.className)||Ie.querySelector&&Ie.querySelector(".cm-tab"))&&(E.content.className="cm-tab-wrap-hack")}return ct(A,"renderLine",A,g.line,E.pre),E.pre.className&&(E.textClass=De(E.pre.className,E.textClass||"")),E}function du(A){var g=xe("span","","cm-invalidchar");return g.title="\\u"+A.charCodeAt(0).toString(16),g.setAttribute("aria-label",g.title),g}function jd(A,g,S,E,R,Z,Ae){if(g){var Ce=A.splitSpaces?cd(g,A.trailingSpace):g,Ie=A.cm.state.specialChars,je=!1,gt;if(!Ie.test(g))A.col+=g.length,gt=document.createTextNode(Ce),A.map.push(A.pos,A.pos+g.length,gt),f&&y<9&&(je=!0),A.pos+=g.length;else{gt=document.createDocumentFragment();for(var Mt=0;;){Ie.lastIndex=Mt;var Xt=Ie.exec(g),Qt=Xt?Xt.index-Mt:g.length-Mt;if(Qt){var xn=document.createTextNode(Ce.slice(Mt,Mt+Qt));f&&y<9?gt.appendChild(xe("span",[xn])):gt.appendChild(xn),A.map.push(A.pos,A.pos+Qt,xn),A.col+=Qt,A.pos+=Qt}if(!Xt)break;Mt+=Qt+1;var Fn=void 0;if(Xt[0]=="	"){var Ar=A.cm.options.tabSize,tr=Ar-A.col%Ar;Fn=gt.appendChild(xe("span",tn(tr),"cm-tab")),Fn.setAttribute("role","presentation"),Fn.setAttribute("cm-text","	"),A.col+=tr}else Xt[0]=="\r"||Xt[0]==`
`?(Fn=gt.appendChild(xe("span",Xt[0]=="\r"?"":"","cm-invalidchar")),Fn.setAttribute("cm-text",Xt[0]),A.col+=1):(Fn=A.cm.options.specialCharPlaceholder(Xt[0]),Fn.setAttribute("cm-text",Xt[0]),f&&y<9?gt.appendChild(xe("span",[Fn])):gt.appendChild(Fn),A.col+=1);A.map.push(A.pos,A.pos+1,Fn),A.pos++}}if(A.trailingSpace=Ce.charCodeAt(g.length-1)==32,S||E||R||je||Z||Ae){var gr=S||"";E&&(gr+=E),R&&(gr+=R);var yr=xe("span",[gt],gr,Z);if(Ae)for(var Rr in Ae)Ae.hasOwnProperty(Rr)&&Rr!="style"&&Rr!="class"&&yr.setAttribute(Rr,Ae[Rr]);return A.content.appendChild(yr)}A.content.appendChild(gt)}}function cd(A,g){if(A.length>1&&!/  /.test(A))return A;for(var S=g,E="",R=0;R<A.length;R++){var Z=A.charAt(R);Z==" "&&S&&(R==A.length-1||A.charCodeAt(R+1)==32)&&(Z=""),E+=Z,S=Z==" "}return E}function Fo(A,g){return function(S,E,R,Z,Ae,Ce,Ie){R=R?R+" cm-force-border":"cm-force-border";for(var je=S.pos,gt=je+E.length;;){for(var Mt=void 0,Xt=0;Xt<g.length&&(Mt=g[Xt],!(Mt.to>je&&Mt.from<=je));Xt++);if(Mt.to>=gt)return A(S,E,R,Z,Ae,Ce,Ie);A(S,E.slice(0,Mt.to-je),R,Z,null,Ce,Ie),Z=null,E=E.slice(Mt.to-je),je=Mt.to}}}function Cc(A,g,S,E){var R=!E&&S.widgetNode;R&&A.map.push(A.pos,A.pos+g,R),!E&&A.cm.display.input.needsContentAttribute&&(R||(R=A.content.appendChild(document.createElement("span"))),R.setAttribute("cm-marker",S.id)),R&&(A.cm.display.input.setUneditable(R),A.content.appendChild(R)),A.pos+=g,A.trailingSpace=!1}function yh(A,g,S){var E=A.markedSpans,R=A.text,Z=0;if(!E){for(var Ae=1;Ae<S.length;Ae+=2)g.addToken(g,R.slice(Z,Z=S[Ae]),gl(S[Ae+1],g.cm.options));return}for(var Ce=R.length,Ie=0,je=1,gt="",Mt,Xt,Qt=0,xn,Fn,Ar,tr,gr;;){if(Qt==Ie){xn=Fn=Ar=Xt="",gr=null,tr=null,Qt=1/0;for(var yr=[],Rr=void 0,ti=0;ti<E.length;++ti){var jr=E[ti],Ji=jr.marker;if(Ji.type=="bookmark"&&jr.from==Ie&&Ji.widgetNode)yr.push(Ji);else if(jr.from<=Ie&&(jr.to==null||jr.to>Ie||Ji.collapsed&&jr.to==Ie&&jr.from==Ie)){if(jr.to!=null&&jr.to!=Ie&&Qt>jr.to&&(Qt=jr.to,Fn=""),Ji.className&&(xn+=" "+Ji.className),Ji.css&&(Xt=(Xt?Xt+";":"")+Ji.css),Ji.startStyle&&jr.from==Ie&&(Ar+=" "+Ji.startStyle),Ji.endStyle&&jr.to==Qt&&(Rr||(Rr=[])).push(Ji.endStyle,jr.to),Ji.title&&((gr||(gr={})).title=Ji.title),Ji.attributes)for(var Bo in Ji.attributes)(gr||(gr={}))[Bo]=Ji.attributes[Bo];Ji.collapsed&&(!tr||st(tr.marker,Ji)<0)&&(tr=jr)}else jr.from>Ie&&Qt>jr.from&&(Qt=jr.from)}if(Rr)for(var Na=0;Na<Rr.length;Na+=2)Rr[Na+1]==Qt&&(Fn+=" "+Rr[Na]);if(!tr||tr.from==Ie)for(var na=0;na<yr.length;++na)Cc(g,0,yr[na]);if(tr&&(tr.from||0)==Ie){if(Cc(g,(tr.to==null?Ce+1:tr.to)-Ie,tr.marker,tr.from==null),tr.to==null)return;tr.to==Ie&&(tr=!1)}}if(Ie>=Ce)break;for(var fa=Math.min(Ce,Qt);;){if(gt){var Wa=Ie+gt.length;if(!tr){var Ga=Wa>fa?gt.slice(0,fa-Ie):gt;g.addToken(g,Ga,Mt?Mt+xn:xn,Ar,Ie+Ga.length==Qt?Fn:"",Xt,gr)}if(Wa>=fa){gt=gt.slice(fa-Ie),Ie=fa;break}Ie=Wa,Ar=""}gt=R.slice(Z,Z=S[je++]),Mt=gl(S[je++],g.cm.options)}}}function Nd(A,g,S){this.line=g,this.rest=pi(g),this.size=this.rest?Ye(dr(this.rest))-S+1:1,this.node=this.text=null,this.hidden=zr(A,g)}function zu(A,g,S){for(var E=[],R,Z=g;Z<S;Z=R){var Ae=new Nd(A.doc,wr(A.doc,Z),Z);R=Z+Ae.size,E.push(Ae)}return E}var Wd=null;function Gd(A){Wd?Wd.ops.push(A):A.ownsGroup=Wd={ops:[A],delayedCallbacks:[]}}function _p(A){var g=A.delayedCallbacks,S=0;do{for(;S<g.length;S++)g[S].call(null);for(var E=0;E<A.ops.length;E++){var R=A.ops[E];if(R.cursorActivityHandlers)for(;R.cursorActivityCalled<R.cursorActivityHandlers.length;)R.cursorActivityHandlers[R.cursorActivityCalled++].call(null,R.cm)}}while(S<g.length)}function dd(A,g){var S=A.ownsGroup;if(S)try{_p(S)}finally{Wd=null,g(S)}}var _c=null;function Gs(A,g){var S=Qe(A,g);if(S.length){var E=Array.prototype.slice.call(arguments,2),R;Wd?R=Wd.delayedCallbacks:_c?R=_c:(R=_c=[],setTimeout(Lf,0));for(var Z=function(Ce){R.push(function(){return S[Ce].apply(null,E)})},Ae=0;Ae<S.length;++Ae)Z(Ae)}}function Lf(){var A=_c;_c=null;for(var g=0;g<A.length;++g)A[g]()}function $h(A,g,S,E){for(var R=0;R<g.changes.length;R++){var Z=g.changes[R];Z=="text"?Zh(A,g):Z=="gutter"?ZA(A,g,S,E):Z=="class"?vh(A,g):Z=="widget"&&Xh(A,g,E)}g.changes=null}function jc(A){return A.node==A.text&&(A.node=xe("div",null,null,"position: relative"),A.text.parentNode&&A.text.parentNode.replaceChild(A.node,A.text),A.node.appendChild(A.text),f&&y<8&&(A.node.style.zIndex=2)),A.node}function Hh(A,g){var S=g.bgClass?g.bgClass+" "+(g.line.bgClass||""):g.line.bgClass;if(S&&(S+=" CodeMirror-linebackground"),g.background)S?g.background.className=S:(g.background.parentNode.removeChild(g.background),g.background=null);else if(S){var E=jc(g);g.background=E.insertBefore(xe("div",null,S),E.firstChild),A.display.input.setUneditable(g.background)}}function hd(A,g){var S=A.display.externalMeasured;return S&&S.line==g.line?(A.display.externalMeasured=null,g.measure=S.measure,S.built):Ad(A,g)}function Zh(A,g){var S=g.text.className,E=hd(A,g);g.text==g.node&&(g.node=E.pre),g.text.parentNode.replaceChild(E.pre,g.text),g.text=E.pre,E.bgClass!=g.bgClass||E.textClass!=g.textClass?(g.bgClass=E.bgClass,g.textClass=E.textClass,vh(A,g)):S&&(g.text.className=S)}function vh(A,g){Hh(A,g),g.line.wrapClass?jc(g).className=g.line.wrapClass:g.node!=g.text&&(g.node.className="");var S=g.textClass?g.textClass+" "+(g.line.textClass||""):g.line.textClass;g.text.className=S||""}function ZA(A,g,S,E){if(g.gutter&&(g.node.removeChild(g.gutter),g.gutter=null),g.gutterBackground&&(g.node.removeChild(g.gutterBackground),g.gutterBackground=null),g.line.gutterClass){var R=jc(g);g.gutterBackground=xe("div",null,"CodeMirror-gutter-background "+g.line.gutterClass,"left: "+(A.options.fixedGutter?E.fixedPos:-E.gutterTotalWidth)+"px; width: "+E.gutterTotalWidth+"px"),A.display.input.setUneditable(g.gutterBackground),R.insertBefore(g.gutterBackground,g.text)}var Z=g.line.gutterMarkers;if(A.options.lineNumbers||Z){var Ae=jc(g),Ce=g.gutter=xe("div",null,"CodeMirror-gutter-wrapper","left: "+(A.options.fixedGutter?E.fixedPos:-E.gutterTotalWidth)+"px");if(Ce.setAttribute("aria-hidden","true"),A.display.input.setUneditable(Ce),Ae.insertBefore(Ce,g.text),g.line.gutterClass&&(Ce.className+=" "+g.line.gutterClass),A.options.lineNumbers&&(!Z||!Z["CodeMirror-linenumbers"])&&(g.lineNumber=Ce.appendChild(xe("div",Qn(A.options,S),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+E.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+A.display.lineNumInnerWidth+"px"))),Z)for(var Ie=0;Ie<A.display.gutterSpecs.length;++Ie){var je=A.display.gutterSpecs[Ie].className,gt=Z.hasOwnProperty(je)&&Z[je];gt&&Ce.appendChild(xe("div",[gt],"CodeMirror-gutter-elt","left: "+E.gutterLeft[je]+"px; width: "+E.gutterWidth[je]+"px"))}}}function Xh(A,g,S){g.alignable&&(g.alignable=null);for(var E=Ee("CodeMirror-linewidget"),R=g.node.firstChild,Z=void 0;R;R=Z)Z=R.nextSibling,E.test(R.className)&&g.node.removeChild(R);bc(A,g,S)}function bp(A,g,S,E){var R=hd(A,g);return g.text=g.node=R.pre,R.bgClass&&(g.bgClass=R.bgClass),R.textClass&&(g.textClass=R.textClass),vh(A,g),ZA(A,g,S,E),bc(A,g,E),g.node}function bc(A,g,S){if(hu(A,g.line,g,S,!0),g.rest)for(var E=0;E<g.rest.length;E++)hu(A,g.rest[E],g,S,!1)}function hu(A,g,S,E,R){if(g.widgets)for(var Z=jc(S),Ae=0,Ce=g.widgets;Ae<Ce.length;++Ae){var Ie=Ce[Ae],je=xe("div",[Ie.node],"CodeMirror-linewidget"+(Ie.className?" "+Ie.className:""));Ie.handleMouseEvents||je.setAttribute("cm-ignore-events","true"),Nc(Ie,je,S,E),A.display.input.setUneditable(je),R&&Ie.above?Z.insertBefore(je,S.gutter||S.text):Z.appendChild(je),Gs(Ie,"redraw")}}function Nc(A,g,S,E){if(A.noHScroll){(S.alignable||(S.alignable=[])).push(g);var R=E.wrapperWidth;g.style.left=E.fixedPos+"px",A.coverGutter||(R-=E.gutterTotalWidth,g.style.paddingLeft=E.gutterTotalWidth+"px"),g.style.width=R+"px"}A.coverGutter&&(g.style.zIndex=5,g.style.position="relative",A.noHScroll||(g.style.marginLeft=-E.gutterTotalWidth+"px"))}function ju(A){if(A.height!=null)return A.height;var g=A.doc.cm;if(!g)return 0;if(!Je(document.body,A.node)){var S="position: relative;";A.coverGutter&&(S+="margin-left: -"+g.display.gutters.offsetWidth+"px;"),A.noHScroll&&(S+="width: "+g.display.wrapper.clientWidth+"px;"),Ke(g.display.measure,xe("div",[A.node],null,S))}return A.height=A.node.parentNode.offsetHeight}function EA(A,g){for(var S=Br(g);S!=A.wrapper;S=S.parentNode)if(!S||S.nodeType==1&&S.getAttribute("cm-ignore-events")=="true"||S.parentNode==A.sizer&&S!=A.mover)return!0}function Wc(A){return A.lineSpace.offsetTop}function Ch(A){return A.mover.offsetHeight-A.lineSpace.offsetHeight}function Jh(A){if(A.cachedPaddingH)return A.cachedPaddingH;var g=Ke(A.measure,xe("pre","x","CodeMirror-line-like")),S=window.getComputedStyle?window.getComputedStyle(g):g.currentStyle,E={left:parseInt(S.paddingLeft),right:parseInt(S.paddingRight)};return!isNaN(E.left)&&!isNaN(E.right)&&(A.cachedPaddingH=E),E}function fu(A){return _t-A.display.nativeBarWidth}function XA(A){return A.display.scroller.clientWidth-fu(A)-A.display.barWidth}function BA(A){return A.display.scroller.clientHeight-fu(A)-A.display.barHeight}function pu(A,g,S){var E=A.options.lineWrapping,R=E&&XA(A);if(!g.measure.heights||E&&g.measure.width!=R){var Z=g.measure.heights=[];if(E){g.measure.width=R;for(var Ae=g.text.firstChild.getClientRects(),Ce=0;Ce<Ae.length-1;Ce++){var Ie=Ae[Ce],je=Ae[Ce+1];Math.abs(Ie.bottom-je.bottom)>2&&Z.push((Ie.bottom+je.top)/2-S.top)}}Z.push(S.bottom-S.top)}}function ef(A,g,S){if(A.line==g)return{map:A.measure.map,cache:A.measure.cache};if(A.rest){for(var E=0;E<A.rest.length;E++)if(A.rest[E]==g)return{map:A.measure.maps[E],cache:A.measure.caches[E]};for(var R=0;R<A.rest.length;R++)if(Ye(A.rest[R])>S)return{map:A.measure.maps[R],cache:A.measure.caches[R],before:!0}}}function tf(A,g){g=Ir(g);var S=Ye(g),E=A.display.externalMeasured=new Nd(A.doc,g,S);E.lineN=S;var R=E.built=Ad(A,E);return E.text=R.pre,Ke(A.display.lineMeasure,R.pre),E}function fd(A,g,S,E){return oa(A,tl(A,g),S,E)}function Qd(A,g){if(g>=A.display.viewFrom&&g<A.display.viewTo)return A.display.view[Fl(A,g)];var S=A.display.externalMeasured;if(S&&g>=S.lineN&&g<S.lineN+S.size)return S}function tl(A,g){var S=Ye(g),E=Qd(A,S);E&&!E.text?E=null:E&&E.changes&&($h(A,E,S,xc(A)),A.curOp.forceUpdate=!0),E||(E=tf(A,g));var R=ef(E,g,S);return{line:g,view:E,rect:null,map:R.map,cache:R.cache,before:R.before,hasHeights:!1}}function oa(A,g,S,E,R){g.before&&(S=-1);var Z=S+(E||""),Ae;return g.cache.hasOwnProperty(Z)?Ae=g.cache[Z]:(g.rect||(g.rect=g.view.text.getBoundingClientRect()),g.hasHeights||(pu(A,g.view,g.rect),g.hasHeights=!0),Ae=pd(A,g,S,E),Ae.bogus||(g.cache[Z]=Ae)),{left:Ae.left,right:Ae.right,top:R?Ae.rtop:Ae.top,bottom:R?Ae.rbottom:Ae.bottom}}var Lo={left:0,right:0,top:0,bottom:0};function _h(A,g,S){for(var E,R,Z,Ae,Ce,Ie,je=0;je<A.length;je+=3)if(Ce=A[je],Ie=A[je+1],g<Ce?(R=0,Z=1,Ae="left"):g<Ie?(R=g-Ce,Z=R+1):(je==A.length-3||g==Ie&&A[je+3]>g)&&(Z=Ie-Ce,R=Z-1,g>=Ie&&(Ae="right")),R!=null){if(E=A[je+2],Ce==Ie&&S==(E.insertLeft?"left":"right")&&(Ae=S),S=="left"&&R==0)for(;je&&A[je-2]==A[je-3]&&A[je-1].insertLeft;)E=A[(je-=3)+2],Ae="left";if(S=="right"&&R==Ie-Ce)for(;je<A.length-3&&A[je+3]==A[je+4]&&!A[je+5].insertLeft;)E=A[(je+=3)+2],Ae="right";break}return{node:E,start:R,end:Z,collapse:Ae,coverStart:Ce,coverEnd:Ie}}function am(A,g){var S=Lo;if(g=="left")for(var E=0;E<A.length&&(S=A[E]).left==S.right;E++);else for(var R=A.length-1;R>=0&&(S=A[R]).left==S.right;R--);return S}function pd(A,g,S,E){var R=_h(g.map,S,E),Z=R.node,Ae=R.start,Ce=R.end,Ie=R.collapse,je;if(Z.nodeType==3){for(var gt=0;gt<4;gt++){for(;Ae&&nt(g.line.text.charAt(R.coverStart+Ae));)--Ae;for(;R.coverStart+Ce<R.coverEnd&&nt(g.line.text.charAt(R.coverStart+Ce));)++Ce;if(f&&y<9&&Ae==0&&Ce==R.coverEnd-R.coverStart?je=Z.parentNode.getBoundingClientRect():je=am(Ze(Z,Ae,Ce).getClientRects(),E),je.left||je.right||Ae==0)break;Ce=Ae,Ae=Ae-1,Ie="right"}f&&y<11&&(je=Nu(A.display.measure,je))}else{Ae>0&&(Ie=E="right");var Mt;A.options.lineWrapping&&(Mt=Z.getClientRects()).length>1?je=Mt[E=="right"?Mt.length-1:0]:je=Z.getBoundingClientRect()}if(f&&y<9&&!Ae&&(!je||!je.left&&!je.right)){var Xt=Z.parentNode.getClientRects()[0];Xt?je={left:Xt.left,right:Xt.left+AA(A.display),top:Xt.top,bottom:Xt.bottom}:je=Lo}for(var Qt=je.top-g.rect.top,xn=je.bottom-g.rect.top,Fn=(Qt+xn)/2,Ar=g.view.measure.heights,tr=0;tr<Ar.length-1&&!(Fn<Ar[tr]);tr++);var gr=tr?Ar[tr-1]:0,yr=Ar[tr],Rr={left:(Ie=="right"?je.right:je.left)-g.rect.left,right:(Ie=="left"?je.left:je.right)-g.rect.left,top:gr,bottom:yr};return!je.left&&!je.right&&(Rr.bogus=!0),A.options.singleCursorHeightPerLine||(Rr.rtop=Qt,Rr.rbottom=xn),Rr}function Nu(A,g){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!Bi(A))return g;var S=screen.logicalXDPI/screen.deviceXDPI,E=screen.logicalYDPI/screen.deviceYDPI;return{left:g.left*S,right:g.right*S,top:g.top*E,bottom:g.bottom*E}}function Yd(A){if(A.measure&&(A.measure.cache={},A.measure.heights=null,A.rest))for(var g=0;g<A.rest.length;g++)A.measure.caches[g]={}}function Uf(A){A.display.externalMeasure=null,Se(A.display.lineMeasure);for(var g=0;g<A.display.view.length;g++)Yd(A.display.view[g])}function md(A){Uf(A),A.display.cachedCharWidth=A.display.cachedTextHeight=A.display.cachedPaddingH=null,A.options.lineWrapping||(A.display.maxLineChanged=!0),A.display.lineNumChars=null}function qd(A){return O&&se?-(A.body.getBoundingClientRect().left-parseInt(getComputedStyle(A.body).marginLeft)):A.defaultView.pageXOffset||(A.documentElement||A.body).scrollLeft}function bh(A){return O&&se?-(A.body.getBoundingClientRect().top-parseInt(getComputedStyle(A.body).marginTop)):A.defaultView.pageYOffset||(A.documentElement||A.body).scrollTop}function Vd(A){var g=Ir(A),S=g.widgets,E=0;if(S)for(var R=0;R<S.length;++R)S[R].above&&(E+=ju(S[R]));return E}function OA(A,g,S,E,R){if(!R){var Z=Vd(g);S.top+=Z,S.bottom+=Z}if(E=="line")return S;E||(E="local");var Ae=Zi(g);if(E=="local"?Ae+=Wc(A.display):Ae-=A.display.viewOffset,E=="page"||E=="window"){var Ce=A.display.lineSpace.getBoundingClientRect();Ae+=Ce.top+(E=="window"?0:bh(bt(A)));var Ie=Ce.left+(E=="window"?0:qd(bt(A)));S.left+=Ie,S.right+=Ie}return S.top+=Ae,S.bottom+=Ae,S}function Jt(A,g,S){if(S=="div")return g;var E=g.left,R=g.top;if(S=="page")E-=qd(bt(A)),R-=bh(bt(A));else if(S=="local"||!S){var Z=A.display.sizer.getBoundingClientRect();E+=Z.left,R+=Z.top}var Ae=A.display.lineSpace.getBoundingClientRect();return{left:E-Ae.left,top:R-Ae.top}}function In(A,g,S,E,R){return E||(E=wr(A.doc,g.line)),OA(A,E,fd(A,E,g.ch,R),S)}function an(A,g,S,E,R,Z){E=E||wr(A.doc,g.line),R||(R=tl(A,E));function Ae(xn,Fn){var Ar=oa(A,R,xn,Fn?"right":"left",Z);return Fn?Ar.left=Ar.right:Ar.right=Ar.left,OA(A,E,Ar,S)}var Ce=ve(E,A.doc.direction),Ie=g.ch,je=g.sticky;if(Ie>=E.text.length?(Ie=E.text.length,je="before"):Ie<=0&&(Ie=0,je="after"),!Ce)return Ae(je=="before"?Ie-1:Ie,je=="before");function gt(xn,Fn,Ar){var tr=Ce[Fn],gr=tr.level==1;return Ae(Ar?xn-1:xn,gr!=Ar)}var Mt=Ve(Ce,Ie,je),Xt=Hn,Qt=gt(Ie,Mt,je=="before");return Xt!=null&&(Qt.other=gt(Ie,Xt,je!="before")),Qt}function Dr(A,g){var S=0;g=ii(A.doc,g),A.options.lineWrapping||(S=AA(A.display)*g.ch);var E=wr(A.doc,g.line),R=Zi(E)+Wc(A.display);return{left:S,right:S,top:R,bottom:R+E.height}}function Ri(A,g,S,E,R){var Z=fn(A,g,S);return Z.xRel=R,E&&(Z.outside=E),Z}function Po(A,g,S){var E=A.doc;if(S+=A.display.viewOffset,S<0)return Ri(E.first,0,null,-1,-1);var R=xt(E,S),Z=E.first+E.size-1;if(R>Z)return Ri(E.first+E.size-1,wr(E,Z).text.length,null,1,1);g<0&&(g=0);for(var Ae=wr(E,R);;){var Ce=xh(A,Ae,R,g,S),Ie=si(Ae,Ce.ch+(Ce.xRel>0||Ce.outside>0?1:0));if(!Ie)return Ce;var je=Ie.find(1);if(je.line==R)return je;Ae=wr(E,R=je.line)}}function Bs(A,g,S,E){E-=Vd(g);var R=g.text.length,Z=Ht(function(Ae){return oa(A,S,Ae-1).bottom<=E},R,0);return R=Ht(function(Ae){return oa(A,S,Ae).top>E},Z,R),{begin:Z,end:R}}function Jo(A,g,S,E){S||(S=tl(A,g));var R=OA(A,g,oa(A,S,E),"line").top;return Bs(A,g,S,R)}function JA(A,g,S,E){return A.bottom<=S?!1:A.top>S?!0:(E?A.left:A.right)>g}function xh(A,g,S,E,R){R-=Zi(g);var Z=tl(A,g),Ae=Vd(g),Ce=0,Ie=g.text.length,je=!0,gt=ve(g,A.doc.direction);if(gt){var Mt=(A.options.lineWrapping?ec:tu)(A,g,S,Z,gt,E,R);je=Mt.level!=1,Ce=je?Mt.from:Mt.to-1,Ie=je?Mt.to:Mt.from-1}var Xt=null,Qt=null,xn=Ht(function(ti){var jr=oa(A,Z,ti);return jr.top+=Ae,jr.bottom+=Ae,JA(jr,E,R,!1)?(jr.top<=R&&jr.left<=E&&(Xt=ti,Qt=jr),!0):!1},Ce,Ie),Fn,Ar,tr=!1;if(Qt){var gr=E-Qt.left<Qt.right-E,yr=gr==je;xn=Xt+(yr?0:1),Ar=yr?"after":"before",Fn=gr?Qt.left:Qt.right}else{!je&&(xn==Ie||xn==Ce)&&xn++,Ar=xn==0?"after":xn==g.text.length?"before":oa(A,Z,xn-(je?1:0)).bottom+Ae<=R==je?"after":"before";var Rr=an(A,fn(S,xn,Ar),"line",g,Z);Fn=Rr.left,tr=R<Rr.top?-1:R>=Rr.bottom?1:0}return xn=wt(g.text,xn,1),Ri(S,xn,Ar,tr,E-Fn)}function tu(A,g,S,E,R,Z,Ae){var Ce=Ht(function(Mt){var Xt=R[Mt],Qt=Xt.level!=1;return JA(an(A,fn(S,Qt?Xt.to:Xt.from,Qt?"before":"after"),"line",g,E),Z,Ae,!0)},0,R.length-1),Ie=R[Ce];if(Ce>0){var je=Ie.level!=1,gt=an(A,fn(S,je?Ie.from:Ie.to,je?"after":"before"),"line",g,E);JA(gt,Z,Ae,!0)&&gt.top>Ae&&(Ie=R[Ce-1])}return Ie}function ec(A,g,S,E,R,Z,Ae){var Ce=Bs(A,g,E,Ae),Ie=Ce.begin,je=Ce.end;/\s/.test(g.text.charAt(je-1))&&je--;for(var gt=null,Mt=null,Xt=0;Xt<R.length;Xt++){var Qt=R[Xt];if(!(Qt.from>=je||Qt.to<=Ie)){var xn=Qt.level!=1,Fn=oa(A,E,xn?Math.min(je,Qt.to)-1:Math.max(Ie,Qt.from)).right,Ar=Fn<Z?Z-Fn+1e9:Fn-Z;(!gt||Mt>Ar)&&(gt=Qt,Mt=Ar)}}return gt||(gt=R[R.length-1]),gt.from<Ie&&(gt={from:Ie,to:gt.to,level:gt.level}),gt.to>je&&(gt={from:gt.from,to:je,level:gt.level}),gt}var mu;function Ka(A){if(A.cachedTextHeight!=null)return A.cachedTextHeight;if(mu==null){mu=xe("pre",null,"CodeMirror-line-like");for(var g=0;g<49;++g)mu.appendChild(document.createTextNode("x")),mu.appendChild(xe("br"));mu.appendChild(document.createTextNode("x"))}Ke(A.measure,mu);var S=mu.offsetHeight/50;return S>3&&(A.cachedTextHeight=S),Se(A.measure),S||1}function AA(A){if(A.cachedCharWidth!=null)return A.cachedCharWidth;var g=xe("span","xxxxxxxxxx"),S=xe("pre",[g],"CodeMirror-line-like");Ke(A.measure,S);var E=g.getBoundingClientRect(),R=(E.right-E.left)/10;return R>2&&(A.cachedCharWidth=R),R||10}function xc(A){for(var g=A.display,S={},E={},R=g.gutters.clientLeft,Z=g.gutters.firstChild,Ae=0;Z;Z=Z.nextSibling,++Ae){var Ce=A.display.gutterSpecs[Ae].className;S[Ce]=Z.offsetLeft+Z.clientLeft+R,E[Ce]=Z.clientWidth}return{fixedPos:Yr(g),gutterTotalWidth:g.gutters.offsetWidth,gutterLeft:S,gutterWidth:E,wrapperWidth:g.wrapper.clientWidth}}function Yr(A){return A.scroller.getBoundingClientRect().left-A.sizer.getBoundingClientRect().left}function tc(A){var g=Ka(A.display),S=A.options.lineWrapping,E=S&&Math.max(5,A.display.scroller.clientWidth/AA(A.display)-3);return function(R){if(zr(A.doc,R))return 0;var Z=0;if(R.widgets)for(var Ae=0;Ae<R.widgets.length;Ae++)R.widgets[Ae].height&&(Z+=R.widgets[Ae].height);return S?Z+(Math.ceil(R.text.length/E)||1)*g:Z+g}}function $d(A){var g=A.doc,S=tc(A);g.iter(function(E){var R=S(E);R!=E.height&&Zs(E,R)})}function cA(A,g,S,E){var R=A.display;if(!S&&Br(g).getAttribute("cm-not-content")=="true")return null;var Z,Ae,Ce=R.lineSpace.getBoundingClientRect();try{Z=g.clientX-Ce.left,Ae=g.clientY-Ce.top}catch{return null}var Ie=Po(A,Z,Ae),je;if(E&&Ie.xRel>0&&(je=wr(A.doc,Ie.line).text).length==Ie.ch){var gt=Pe(je,je.length,A.options.tabSize)-je.length;Ie=fn(Ie.line,Math.max(0,Math.round((Z-Jh(A.display).left)/AA(A.display))-gt))}return Ie}function Fl(A,g){if(g>=A.display.viewTo||(g-=A.display.viewFrom,g<0))return null;for(var S=A.display.view,E=0;E<S.length;E++)if(g-=S[E].size,g<0)return E}function Ll(A,g,S,E){g==null&&(g=A.doc.first),S==null&&(S=A.doc.first+A.doc.size),E||(E=0);var R=A.display;if(E&&S<R.viewTo&&(R.updateLineNumbers==null||R.updateLineNumbers>g)&&(R.updateLineNumbers=g),A.curOp.viewChanged=!0,g>=R.viewTo)is&&Do(A.doc,g)<R.viewTo&&Wu(A);else if(S<=R.viewFrom)is&&mi(A.doc,S+E)>R.viewFrom?Wu(A):(R.viewFrom+=E,R.viewTo+=E);else if(g<=R.viewFrom&&S>=R.viewTo)Wu(A);else if(g<=R.viewFrom){var Z=Gu(A,S,S+E,1);Z?(R.view=R.view.slice(Z.index),R.viewFrom=Z.lineN,R.viewTo+=E):Wu(A)}else if(S>=R.viewTo){var Ae=Gu(A,g,g,-1);Ae?(R.view=R.view.slice(0,Ae.index),R.viewTo=Ae.lineN):Wu(A)}else{var Ce=Gu(A,g,g,-1),Ie=Gu(A,S,S+E,1);Ce&&Ie?(R.view=R.view.slice(0,Ce.index).concat(zu(A,Ce.lineN,Ie.lineN)).concat(R.view.slice(Ie.index)),R.viewTo+=E):Wu(A)}var je=R.externalMeasured;je&&(S<je.lineN?je.lineN+=E:g<je.lineN+je.size&&(R.externalMeasured=null))}function Mc(A,g,S){A.curOp.viewChanged=!0;var E=A.display,R=A.display.externalMeasured;if(R&&g>=R.lineN&&g<R.lineN+R.size&&(E.externalMeasured=null),!(g<E.viewFrom||g>=E.viewTo)){var Z=E.view[Fl(A,g)];if(Z.node!=null){var Ae=Z.changes||(Z.changes=[]);it(Ae,S)==-1&&Ae.push(S)}}}function Wu(A){A.display.viewFrom=A.display.viewTo=A.doc.first,A.display.view=[],A.display.viewOffset=0}function Gu(A,g,S,E){var R=Fl(A,g),Z,Ae=A.display.view;if(!is||S==A.doc.first+A.doc.size)return{index:R,lineN:S};for(var Ce=A.display.viewFrom,Ie=0;Ie<R;Ie++)Ce+=Ae[Ie].size;if(Ce!=g){if(E>0){if(R==Ae.length-1)return null;Z=Ce+Ae[R].size-g,R++}else Z=Ce-g;g+=Z,S+=Z}for(;Do(A.doc,S)!=S;){if(R==(E<0?0:Ae.length-1))return null;S+=E*Ae[R-(E<0?1:0)].size,R+=E}return{index:R,lineN:S}}function gd(A,g,S){var E=A.display,R=E.view;R.length==0||g>=E.viewTo||S<=E.viewFrom?(E.view=zu(A,g,S),E.viewFrom=g):(E.viewFrom>g?E.view=zu(A,g,E.viewFrom).concat(E.view):E.viewFrom<g&&(E.view=E.view.slice(Fl(A,g))),E.viewFrom=g,E.viewTo<S?E.view=E.view.concat(zu(A,E.viewTo,S)):E.viewTo>S&&(E.view=E.view.slice(0,Fl(A,S)))),E.viewTo=S}function yd(A){for(var g=A.display.view,S=0,E=0;E<g.length;E++){var R=g[E];!R.hidden&&(!R.node||R.changes)&&++S}return S}function Ca(A){A.display.input.showSelection(A.display.input.prepareSelection())}function Gc(A,g){g===void 0&&(g=!0);var S=A.doc,E={},R=E.cursors=document.createDocumentFragment(),Z=E.selection=document.createDocumentFragment(),Ae=A.options.$customCursor;Ae&&(g=!0);for(var Ce=0;Ce<S.sel.ranges.length;Ce++)if(!(!g&&Ce==S.sel.primIndex)){var Ie=S.sel.ranges[Ce];if(!(Ie.from().line>=A.display.viewTo||Ie.to().line<A.display.viewFrom)){var je=Ie.empty();if(Ae){var gt=Ae(A,Ie);gt&&Qc(A,gt,R)}else(je||A.options.showCursorWhenSelecting)&&Qc(A,Ie.head,R);je||Mh(A,Ie,Z)}}return E}function Qc(A,g,S){var E=an(A,g,"div",null,null,!A.options.singleCursorHeightPerLine),R=S.appendChild(xe("div","","CodeMirror-cursor"));if(R.style.left=E.left+"px",R.style.top=E.top+"px",R.style.height=Math.max(0,E.bottom-E.top)*A.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(A.getWrapperElement().className)){var Z=In(A,g,"div",null,null),Ae=Z.right-Z.left;R.style.width=(Ae>0?Ae:A.defaultCharWidth())+"px"}if(E.other){var Ce=S.appendChild(xe("div","","CodeMirror-cursor CodeMirror-secondarycursor"));Ce.style.display="",Ce.style.left=E.other.left+"px",Ce.style.top=E.other.top+"px",Ce.style.height=(E.other.bottom-E.other.top)*.85+"px"}}function Yc(A,g){return A.top-g.top||A.left-g.left}function Mh(A,g,S){var E=A.display,R=A.doc,Z=document.createDocumentFragment(),Ae=Jh(A.display),Ce=Ae.left,Ie=Math.max(E.sizerWidth,XA(A)-E.sizer.offsetLeft)-Ae.right,je=R.direction=="ltr";function gt(yr,Rr,ti,jr){Rr<0&&(Rr=0),Rr=Math.round(Rr),jr=Math.round(jr),Z.appendChild(xe("div",null,"CodeMirror-selected","position: absolute; left: "+yr+`px;
                             top: `+Rr+"px; width: "+(ti??Ie-yr)+`px;
                             height: `+(jr-Rr)+"px"))}function Mt(yr,Rr,ti){var jr=wr(R,yr),Ji=jr.text.length,Bo,Na;function na(Ga,Wl){return In(A,fn(yr,Ga),"div",jr,Wl)}function fa(Ga,Wl,Qa){var pa=Jo(A,jr,null,Ga),as=Wl=="ltr"==(Qa=="after")?"left":"right",Ci=Qa=="after"?pa.begin:pa.end-(/\s/.test(jr.text.charAt(pa.end-1))?2:1);return na(Ci,as)[as]}var Wa=ve(jr,R.direction);return sn(Wa,Rr||0,ti??Ji,function(Ga,Wl,Qa,pa){var as=Qa=="ltr",Ci=na(Ga,as?"left":"right"),ls=na(Wl-1,as?"right":"left"),ra=Rr==null&&Ga==0,Ys=ti==null&&Wl==Ji,xs=pa==0,Bu=!Wa||pa==Wa.length-1;if(ls.top-Ci.top<=3){var Ko=(je?ra:Ys)&&xs,Pc=(je?Ys:ra)&&Bu,Ou=Ko?Ce:(as?Ci:ls).left,zA=Pc?Ie:(as?ls:Ci).right;gt(Ou,Ci.top,zA-Ou,Ci.bottom)}else{var CA,Ya,Ol,Qf;as?(CA=je&&ra&&xs?Ce:Ci.left,Ya=je?Ie:fa(Ga,Qa,"before"),Ol=je?Ce:fa(Wl,Qa,"after"),Qf=je&&Ys&&Bu?Ie:ls.right):(CA=je?fa(Ga,Qa,"before"):Ce,Ya=!je&&ra&&xs?Ie:Ci.right,Ol=!je&&Ys&&Bu?Ce:ls.left,Qf=je?fa(Wl,Qa,"after"):Ie),gt(CA,Ci.top,Ya-CA,Ci.bottom),Ci.bottom<ls.top&&gt(Ce,Ci.bottom,null,ls.top),gt(Ol,ls.top,Qf-Ol,ls.bottom)}(!Bo||Yc(Ci,Bo)<0)&&(Bo=Ci),Yc(ls,Bo)<0&&(Bo=ls),(!Na||Yc(Ci,Na)<0)&&(Na=Ci),Yc(ls,Na)<0&&(Na=ls)}),{start:Bo,end:Na}}var Xt=g.from(),Qt=g.to();if(Xt.line==Qt.line)Mt(Xt.line,Xt.ch,Qt.ch);else{var xn=wr(R,Xt.line),Fn=wr(R,Qt.line),Ar=Ir(xn)==Ir(Fn),tr=Mt(Xt.line,Xt.ch,Ar?xn.text.length+1:null).end,gr=Mt(Qt.line,Ar?0:null,Qt.ch).start;Ar&&(tr.top<gr.top-2?(gt(tr.right,tr.top,null,tr.bottom),gt(Ce,gr.top,gr.left,gr.bottom)):gt(tr.right,tr.top,gr.left-tr.right,tr.bottom)),tr.bottom<gr.top&&gt(Ce,tr.bottom,null,gr.top)}S.appendChild(Z)}function gu(A){if(A.state.focused){var g=A.display;clearInterval(g.blinker);var S=!0;g.cursorDiv.style.visibility="",A.options.cursorBlinkRate>0?g.blinker=setInterval(function(){A.hasFocus()||cs(A),g.cursorDiv.style.visibility=(S=!S)?"":"hidden"},A.options.cursorBlinkRate):A.options.cursorBlinkRate<0&&(g.cursorDiv.style.visibility="hidden")}}function nc(A){A.hasFocus()||(A.display.input.focus(),A.state.focused||vd(A))}function qc(A){A.state.delayingBlurEvent=!0,setTimeout(function(){A.state.delayingBlurEvent&&(A.state.delayingBlurEvent=!1,A.state.focused&&cs(A))},100)}function vd(A,g){A.state.delayingBlurEvent&&!A.state.draggingText&&(A.state.delayingBlurEvent=!1),A.options.readOnly!="nocursor"&&(A.state.focused||(ct(A,"focus",A,g),A.state.focused=!0,we(A.display.wrapper,"CodeMirror-focused"),!A.curOp&&A.display.selForContextMenu!=A.doc.sel&&(A.display.input.reset(),x&&setTimeout(function(){return A.display.input.reset(!0)},20)),A.display.input.receivedFocus()),gu(A))}function cs(A,g){A.state.delayingBlurEvent||(A.state.focused&&(ct(A,"blur",A,g),A.state.focused=!1,me(A.display.wrapper,"CodeMirror-focused")),clearInterval(A.display.blinker),setTimeout(function(){A.state.focused||(A.display.shift=!1)},150))}function Cd(A){for(var g=A.display,S=g.lineDiv.offsetTop,E=Math.max(0,g.scroller.getBoundingClientRect().top),R=g.lineDiv.getBoundingClientRect().top,Z=0,Ae=0;Ae<g.view.length;Ae++){var Ce=g.view[Ae],Ie=A.options.lineWrapping,je=void 0,gt=0;if(!Ce.hidden){if(R+=Ce.line.height,f&&y<8){var Mt=Ce.node.offsetTop+Ce.node.offsetHeight;je=Mt-S,S=Mt}else{var Xt=Ce.node.getBoundingClientRect();je=Xt.bottom-Xt.top,!Ie&&Ce.text.firstChild&&(gt=Ce.text.firstChild.getBoundingClientRect().right-Xt.left-1)}var Qt=Ce.line.height-je;if((Qt>.005||Qt<-.005)&&(R<E&&(Z-=Qt),Zs(Ce.line,je),dA(Ce.line),Ce.rest))for(var xn=0;xn<Ce.rest.length;xn++)dA(Ce.rest[xn]);if(gt>A.display.sizerWidth){var Fn=Math.ceil(gt/AA(A.display));Fn>A.display.maxLineLength&&(A.display.maxLineLength=Fn,A.display.maxLine=Ce.line,A.display.maxLineChanged=!0)}}}Math.abs(Z)>2&&(g.scroller.scrollTop+=Z)}function dA(A){if(A.widgets)for(var g=0;g<A.widgets.length;++g){var S=A.widgets[g],E=S.node.parentNode;E&&(S.height=E.offsetHeight)}}function yu(A,g,S){var E=S&&S.top!=null?Math.max(0,S.top):A.scroller.scrollTop;E=Math.floor(E-Wc(A));var R=S&&S.bottom!=null?S.bottom:E+A.wrapper.clientHeight,Z=xt(g,E),Ae=xt(g,R);if(S&&S.ensure){var Ce=S.ensure.from.line,Ie=S.ensure.to.line;Ce<Z?(Z=Ce,Ae=xt(g,Zi(wr(g,Ce))+A.wrapper.clientHeight)):Math.min(Ie,g.lastLine())>=Ae&&(Z=xt(g,Zi(wr(g,Ie))-A.wrapper.clientHeight),Ae=Ie)}return{from:Z,to:Math.max(Ae,Z+1)}}function Hd(A,g){if(!dt(A,"scrollCursorIntoView")){var S=A.display,E=S.sizer.getBoundingClientRect(),R=null,Z=S.wrapper.ownerDocument;if(g.top+E.top<0?R=!0:g.bottom+E.top>(Z.defaultView.innerHeight||Z.documentElement.clientHeight)&&(R=!1),R!=null&&!Y){var Ae=xe("div","",null,`position: absolute;
                         top: `+(g.top-S.viewOffset-Wc(A.display))+`px;
                         height: `+(g.bottom-g.top+fu(A)+S.barHeight)+`px;
                         left: `+g.left+"px; width: "+Math.max(2,g.right-g.left)+"px;");A.display.lineSpace.appendChild(Ae),Ae.scrollIntoView(R),A.display.lineSpace.removeChild(Ae)}}}function wh(A,g,S,E){E==null&&(E=0);var R;!A.options.lineWrapping&&g==S&&(S=g.sticky=="before"?fn(g.line,g.ch+1,"before"):g,g=g.ch?fn(g.line,g.sticky=="before"?g.ch-1:g.ch,"after"):g);for(var Z=0;Z<5;Z++){var Ae=!1,Ce=an(A,g),Ie=!S||S==g?Ce:an(A,S);R={left:Math.min(Ce.left,Ie.left),top:Math.min(Ce.top,Ie.top)-E,right:Math.max(Ce.left,Ie.left),bottom:Math.max(Ce.bottom,Ie.bottom)+E};var je=rc(A,R),gt=A.doc.scrollTop,Mt=A.doc.scrollLeft;if(je.scrollTop!=null&&(oc(A,je.scrollTop),Math.abs(A.doc.scrollTop-gt)>1&&(Ae=!0)),je.scrollLeft!=null&&(nl(A,je.scrollLeft),Math.abs(A.doc.scrollLeft-Mt)>1&&(Ae=!0)),!Ae)break}return R}function IA(A,g){var S=rc(A,g);S.scrollTop!=null&&oc(A,S.scrollTop),S.scrollLeft!=null&&nl(A,S.scrollLeft)}function rc(A,g){var S=A.display,E=Ka(A.display);g.top<0&&(g.top=0);var R=A.curOp&&A.curOp.scrollTop!=null?A.curOp.scrollTop:S.scroller.scrollTop,Z=BA(A),Ae={};g.bottom-g.top>Z&&(g.bottom=g.top+Z);var Ce=A.doc.height+Ch(S),Ie=g.top<E,je=g.bottom>Ce-E;if(g.top<R)Ae.scrollTop=Ie?0:g.top;else if(g.bottom>R+Z){var gt=Math.min(g.top,(je?Ce:g.bottom)-Z);gt!=R&&(Ae.scrollTop=gt)}var Mt=A.options.fixedGutter?0:S.gutters.offsetWidth,Xt=A.curOp&&A.curOp.scrollLeft!=null?A.curOp.scrollLeft:S.scroller.scrollLeft-Mt,Qt=XA(A)-S.gutters.offsetWidth,xn=g.right-g.left>Qt;return xn&&(g.right=g.left+Qt),g.left<10?Ae.scrollLeft=0:g.left<Xt?Ae.scrollLeft=Math.max(0,g.left+Mt-(xn?0:10)):g.right>Qt+Xt-3&&(Ae.scrollLeft=g.right+(xn?0:10)-Qt),Ae}function ic(A,g){g!=null&&(Ul(A),A.curOp.scrollTop=(A.curOp.scrollTop==null?A.doc.scrollTop:A.curOp.scrollTop)+g)}function ms(A){Ul(A);var g=A.getCursor();A.curOp.scrollToPos={from:g,to:g,margin:A.options.cursorScrollMargin}}function ao(A,g,S){(g!=null||S!=null)&&Ul(A),g!=null&&(A.curOp.scrollLeft=g),S!=null&&(A.curOp.scrollTop=S)}function _d(A,g){Ul(A),A.curOp.scrollToPos=g}function Ul(A){var g=A.curOp.scrollToPos;if(g){A.curOp.scrollToPos=null;var S=Dr(A,g.from),E=Dr(A,g.to);Vc(A,S,E,g.margin)}}function Vc(A,g,S,E){var R=rc(A,{left:Math.min(g.left,S.left),top:Math.min(g.top,S.top)-E,right:Math.max(g.right,S.right),bottom:Math.max(g.bottom,S.bottom)+E});ao(A,R.scrollLeft,R.scrollTop)}function oc(A,g){Math.abs(A.doc.scrollTop-g)<2||(i||gs(A,{top:g}),bd(A,g,!0),i&&gs(A),zl(A,100))}function bd(A,g,S){g=Math.max(0,Math.min(A.display.scroller.scrollHeight-A.display.scroller.clientHeight,g)),!(A.display.scroller.scrollTop==g&&!S)&&(A.doc.scrollTop=g,A.display.scrollbars.setScrollTop(g),A.display.scroller.scrollTop!=g&&(A.display.scroller.scrollTop=g))}function nl(A,g,S,E){g=Math.max(0,Math.min(g,A.display.scroller.scrollWidth-A.display.scroller.clientWidth)),!((S?g==A.doc.scrollLeft:Math.abs(A.doc.scrollLeft-g)<2)&&!E)&&(A.doc.scrollLeft=g,nf(A),A.display.scroller.scrollLeft!=g&&(A.display.scroller.scrollLeft=g),A.display.scrollbars.setScrollLeft(g))}function vu(A){var g=A.display,S=g.gutters.offsetWidth,E=Math.round(A.doc.height+Ch(A.display));return{clientHeight:g.scroller.clientHeight,viewHeight:g.wrapper.clientHeight,scrollWidth:g.scroller.scrollWidth,clientWidth:g.scroller.clientWidth,viewWidth:g.wrapper.clientWidth,barLeft:A.options.fixedGutter?S:0,docHeight:E,scrollHeight:E+fu(A)+g.barHeight,nativeBarWidth:g.nativeBarWidth,gutterWidth:S}}var rl=function(A,g,S){this.cm=S;var E=this.vert=xe("div",[xe("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),R=this.horiz=xe("div",[xe("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");E.tabIndex=R.tabIndex=-1,A(E),A(R),Fe(E,"scroll",function(){E.clientHeight&&g(E.scrollTop,"vertical")}),Fe(R,"scroll",function(){R.clientWidth&&g(R.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,f&&y<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};rl.prototype.update=function(A){var g=A.scrollWidth>A.clientWidth+1,S=A.scrollHeight>A.clientHeight+1,E=A.nativeBarWidth;if(S){this.vert.style.display="block",this.vert.style.bottom=g?E+"px":"0";var R=A.viewHeight-(g?E:0);this.vert.firstChild.style.height=Math.max(0,A.scrollHeight-A.clientHeight+R)+"px"}else this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0";if(g){this.horiz.style.display="block",this.horiz.style.right=S?E+"px":"0",this.horiz.style.left=A.barLeft+"px";var Z=A.viewWidth-A.barLeft-(S?E:0);this.horiz.firstChild.style.width=Math.max(0,A.scrollWidth-A.clientWidth+Z)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&A.clientHeight>0&&(E==0&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:S?E:0,bottom:g?E:0}},rl.prototype.setScrollLeft=function(A){this.horiz.scrollLeft!=A&&(this.horiz.scrollLeft=A),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},rl.prototype.setScrollTop=function(A){this.vert.scrollTop!=A&&(this.vert.scrollTop=A),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},rl.prototype.zeroWidthHack=function(){var A=V&&!N?"12px":"18px";this.horiz.style.height=this.vert.style.width=A,this.horiz.style.visibility=this.vert.style.visibility="hidden",this.disableHoriz=new Be,this.disableVert=new Be},rl.prototype.enableZeroWidthBar=function(A,g,S){A.style.visibility="";function E(){var R=A.getBoundingClientRect(),Z=S=="vert"?document.elementFromPoint(R.right-1,(R.top+R.bottom)/2):document.elementFromPoint((R.right+R.left)/2,R.bottom-1);Z!=A?A.style.visibility="hidden":g.set(1e3,E)}g.set(1e3,E)},rl.prototype.clear=function(){var A=this.horiz.parentNode;A.removeChild(this.horiz),A.removeChild(this.vert)};var sc=function(){};sc.prototype.update=function(){return{bottom:0,right:0}},sc.prototype.setScrollLeft=function(){},sc.prototype.setScrollTop=function(){},sc.prototype.clear=function(){};function Qu(A,g){g||(g=vu(A));var S=A.display.barWidth,E=A.display.barHeight;xd(A,g);for(var R=0;R<4&&S!=A.display.barWidth||E!=A.display.barHeight;R++)S!=A.display.barWidth&&A.options.lineWrapping&&Cd(A),xd(A,vu(A)),S=A.display.barWidth,E=A.display.barHeight}function xd(A,g){var S=A.display,E=S.scrollbars.update(g);S.sizer.style.paddingRight=(S.barWidth=E.right)+"px",S.sizer.style.paddingBottom=(S.barHeight=E.bottom)+"px",S.heightForcer.style.borderBottom=E.bottom+"px solid transparent",E.right&&E.bottom?(S.scrollbarFiller.style.display="block",S.scrollbarFiller.style.height=E.bottom+"px",S.scrollbarFiller.style.width=E.right+"px"):S.scrollbarFiller.style.display="",E.bottom&&A.options.coverGutterNextToScrollbar&&A.options.fixedGutter?(S.gutterFiller.style.display="block",S.gutterFiller.style.height=E.bottom+"px",S.gutterFiller.style.width=g.gutterWidth+"px"):S.gutterFiller.style.display=""}var $c={native:rl,null:sc};function Zd(A){A.display.scrollbars&&(A.display.scrollbars.clear(),A.display.scrollbars.addClass&&me(A.display.wrapper,A.display.scrollbars.addClass)),A.display.scrollbars=new $c[A.options.scrollbarStyle](function(g){A.display.wrapper.insertBefore(g,A.display.scrollbarFiller),Fe(g,"mousedown",function(){A.state.focused&&setTimeout(function(){return A.display.input.focus()},0)}),g.setAttribute("cm-not-content","true")},function(g,S){S=="horizontal"?nl(A,g):oc(A,g)},A),A.display.scrollbars.addClass&&we(A.display.wrapper,A.display.scrollbars.addClass)}var nu=0;function Yu(A){A.curOp={cm:A,viewChanged:!1,startHeight:A.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++nu,markArrays:null},Gd(A.curOp)}function qu(A){var g=A.curOp;g&&dd(g,function(S){for(var E=0;E<S.ops.length;E++)S.ops[E].cm.curOp=null;kA(S)})}function kA(A){for(var g=A.ops,S=0;S<g.length;S++)wc(g[S]);for(var E=0;E<g.length;E++)Cu(g[E]);for(var R=0;R<g.length;R++)Sh(g[R]);for(var Z=0;Z<g.length;Z++)ot(g[Z]);for(var Ae=0;Ae<g.length;Ae++)Vu(g[Ae])}function wc(A){var g=A.cm,S=g.display;Us(g),A.updateMaxLine&&ca(g),A.mustUpdate=A.viewChanged||A.forceUpdate||A.scrollTop!=null||A.scrollToPos&&(A.scrollToPos.from.line<S.viewFrom||A.scrollToPos.to.line>=S.viewTo)||S.maxLineChanged&&g.options.lineWrapping,A.update=A.mustUpdate&&new _a(g,A.mustUpdate&&{top:A.scrollTop,ensure:A.scrollToPos},A.forceUpdate)}function Cu(A){A.updatedDisplay=A.mustUpdate&&ba(A.cm,A.update)}function Sh(A){var g=A.cm,S=g.display;A.updatedDisplay&&Cd(g),A.barMeasure=vu(g),S.maxLineChanged&&!g.options.lineWrapping&&(A.adjustWidthTo=fd(g,S.maxLine,S.maxLine.text.length).left+3,g.display.sizerWidth=A.adjustWidthTo,A.barMeasure.scrollWidth=Math.max(S.scroller.clientWidth,S.sizer.offsetLeft+A.adjustWidthTo+fu(g)+g.display.barWidth),A.maxScrollLeft=Math.max(0,S.sizer.offsetLeft+A.adjustWidthTo-XA(g))),(A.updatedDisplay||A.selectionChanged)&&(A.preparedSelection=S.input.prepareSelection())}function ot(A){var g=A.cm;A.adjustWidthTo!=null&&(g.display.sizer.style.minWidth=A.adjustWidthTo+"px",A.maxScrollLeft<g.doc.scrollLeft&&nl(g,Math.min(g.display.scroller.scrollLeft,A.maxScrollLeft),!0),g.display.maxLineChanged=!1);var S=A.focus&&A.focus==Ne(Yt(g));A.preparedSelection&&g.display.input.showSelection(A.preparedSelection,S),(A.updatedDisplay||A.startHeight!=g.doc.height)&&Qu(g,A.barMeasure),A.updatedDisplay&&Zc(g,A.barMeasure),A.selectionChanged&&gu(g),g.state.focused&&A.updateInput&&g.display.input.reset(A.typing),S&&nc(A.cm)}function Vu(A){var g=A.cm,S=g.display,E=g.doc;if(A.updatedDisplay&&il(g,A.update),S.wheelStartX!=null&&(A.scrollTop!=null||A.scrollLeft!=null||A.scrollToPos)&&(S.wheelStartX=S.wheelStartY=null),A.scrollTop!=null&&bd(g,A.scrollTop,A.forceScroll),A.scrollLeft!=null&&nl(g,A.scrollLeft,!0,!0),A.scrollToPos){var R=wh(g,ii(E,A.scrollToPos.from),ii(E,A.scrollToPos.to),A.scrollToPos.margin);Hd(g,R)}var Z=A.maybeHiddenMarkers,Ae=A.maybeUnhiddenMarkers;if(Z)for(var Ce=0;Ce<Z.length;++Ce)Z[Ce].lines.length||ct(Z[Ce],"hide");if(Ae)for(var Ie=0;Ie<Ae.length;++Ie)Ae[Ie].lines.length&&ct(Ae[Ie],"unhide");S.wrapper.offsetHeight&&(E.scrollTop=g.display.scroller.scrollTop),A.changeObjs&&ct(g,"changes",g,A.changeObjs),A.update&&A.update.finish()}function _s(A,g){if(A.curOp)return g();Yu(A);try{return g()}finally{qu(A)}}function gi(A,g){return function(){if(A.curOp)return g.apply(A,arguments);Yu(A);try{return g.apply(A,arguments)}finally{qu(A)}}}function Gr(A){return function(){if(this.curOp)return A.apply(this,arguments);Yu(this);try{return A.apply(this,arguments)}finally{qu(this)}}}function ta(A){return function(){var g=this.cm;if(!g||g.curOp)return A.apply(this,arguments);Yu(g);try{return A.apply(this,arguments)}finally{qu(g)}}}function zl(A,g){A.doc.highlightFrontier<A.display.viewTo&&A.state.highlight.set(g,Pt(TA,A))}function TA(A){var g=A.doc;if(!(g.highlightFrontier>=A.display.viewTo)){var S=+new Date+A.options.workTime,E=oi(A,g.highlightFrontier),R=[];g.iter(E.line,Math.min(g.first+g.size,A.display.viewTo+500),function(Z){if(E.line>=A.display.viewFrom){var Ae=Z.styles,Ce=Z.text.length>A.options.maxHighlightLength?Yi(g.mode,E.state):null,Ie=uA(A,Z,E,!0);Ce&&(E.state=Ce),Z.styles=Ie.styles;var je=Z.styleClasses,gt=Ie.classes;gt?Z.styleClasses=gt:je&&(Z.styleClasses=null);for(var Mt=!Ae||Ae.length!=Z.styles.length||je!=gt&&(!je||!gt||je.bgClass!=gt.bgClass||je.textClass!=gt.textClass),Xt=0;!Mt&&Xt<Ae.length;++Xt)Mt=Ae[Xt]!=Z.styles[Xt];Mt&&R.push(E.line),Z.stateAfter=E.save(),E.nextLine()}else Z.text.length<=A.options.maxHighlightLength&&to(A,Z.text,E),Z.stateAfter=E.line%5==0?E.save():null,E.nextLine();if(+new Date>S)return zl(A,A.options.workDelay),!0}),g.highlightFrontier=E.line,g.modeFrontier=Math.max(g.modeFrontier,E.line),R.length&&_s(A,function(){for(var Z=0;Z<R.length;Z++)Mc(A,R[Z],"text")})}}var _a=function(A,g,S){var E=A.display;this.viewport=g,this.visible=yu(E,A.doc,g),this.editorIsHidden=!E.wrapper.offsetWidth,this.wrapperHeight=E.wrapper.clientHeight,this.wrapperWidth=E.wrapper.clientWidth,this.oldDisplayWidth=XA(A),this.force=S,this.dims=xc(A),this.events=[]};_a.prototype.signal=function(A,g){Gt(A,g)&&this.events.push(arguments)},_a.prototype.finish=function(){for(var A=0;A<this.events.length;A++)ct.apply(null,this.events[A])};function Us(A){var g=A.display;!g.scrollbarsClipped&&g.scroller.offsetWidth&&(g.nativeBarWidth=g.scroller.offsetWidth-g.scroller.clientWidth,g.heightForcer.style.height=fu(A)+"px",g.sizer.style.marginBottom=-g.nativeBarWidth+"px",g.sizer.style.borderRightWidth=fu(A)+"px",g.scrollbarsClipped=!0)}function bs(A){if(A.hasFocus())return null;var g=Ne(Yt(A));if(!g||!Je(A.display.lineDiv,g))return null;var S={activeElt:g};if(window.getSelection){var E=Ft(A).getSelection();E.anchorNode&&E.extend&&Je(A.display.lineDiv,E.anchorNode)&&(S.anchorNode=E.anchorNode,S.anchorOffset=E.anchorOffset,S.focusNode=E.focusNode,S.focusOffset=E.focusOffset)}return S}function Hc(A){if(!(!A||!A.activeElt||A.activeElt==Ne(yt(A.activeElt)))&&(A.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(A.activeElt.nodeName)&&A.anchorNode&&Je(document.body,A.anchorNode)&&Je(document.body,A.focusNode))){var g=A.activeElt.ownerDocument,S=g.defaultView.getSelection(),E=g.createRange();E.setEnd(A.anchorNode,A.anchorOffset),E.collapse(!1),S.removeAllRanges(),S.addRange(E),S.extend(A.focusNode,A.focusOffset)}}function ba(A,g){var S=A.display,E=A.doc;if(g.editorIsHidden)return Wu(A),!1;if(!g.force&&g.visible.from>=S.viewFrom&&g.visible.to<=S.viewTo&&(S.updateLineNumbers==null||S.updateLineNumbers>=S.viewTo)&&S.renderedView==S.view&&yd(A)==0)return!1;ac(A)&&(Wu(A),g.dims=xc(A));var R=E.first+E.size,Z=Math.max(g.visible.from-A.options.viewportMargin,E.first),Ae=Math.min(R,g.visible.to+A.options.viewportMargin);S.viewFrom<Z&&Z-S.viewFrom<20&&(Z=Math.max(E.first,S.viewFrom)),S.viewTo>Ae&&S.viewTo-Ae<20&&(Ae=Math.min(R,S.viewTo)),is&&(Z=Do(A.doc,Z),Ae=mi(A.doc,Ae));var Ce=Z!=S.viewFrom||Ae!=S.viewTo||S.lastWrapHeight!=g.wrapperHeight||S.lastWrapWidth!=g.wrapperWidth;gd(A,Z,Ae),S.viewOffset=Zi(wr(A.doc,S.viewFrom)),A.display.mover.style.top=S.viewOffset+"px";var Ie=yd(A);if(!Ce&&Ie==0&&!g.force&&S.renderedView==S.view&&(S.updateLineNumbers==null||S.updateLineNumbers>=S.viewTo))return!1;var je=bs(A);return Ie>4&&(S.lineDiv.style.display="none"),xr(A,S.updateLineNumbers,g.dims),Ie>4&&(S.lineDiv.style.display=""),S.renderedView=S.view,Hc(je),Se(S.cursorDiv),Se(S.selectionDiv),S.gutters.style.height=S.sizer.style.minHeight=0,Ce&&(S.lastWrapHeight=g.wrapperHeight,S.lastWrapWidth=g.wrapperWidth,zl(A,400)),S.updateLineNumbers=null,!0}function il(A,g){for(var S=g.viewport,E=!0;;E=!1){if(!E||!A.options.lineWrapping||g.oldDisplayWidth==XA(A)){if(S&&S.top!=null&&(S={top:Math.min(A.doc.height+Ch(A.display)-BA(A),S.top)}),g.visible=yu(A.display,A.doc,S),g.visible.from>=A.display.viewFrom&&g.visible.to<=A.display.viewTo)break}else E&&(g.visible=yu(A.display,A.doc,S));if(!ba(A,g))break;Cd(A);var R=vu(A);Ca(A),Qu(A,R),Zc(A,R),g.force=!1}g.signal(A,"update",A),(A.display.viewFrom!=A.display.reportedViewFrom||A.display.viewTo!=A.display.reportedViewTo)&&(g.signal(A,"viewportChange",A,A.display.viewFrom,A.display.viewTo),A.display.reportedViewFrom=A.display.viewFrom,A.display.reportedViewTo=A.display.viewTo)}function gs(A,g){var S=new _a(A,g);if(ba(A,S)){Cd(A),il(A,S);var E=vu(A);Ca(A),Qu(A,E),Zc(A,E),S.finish()}}function xr(A,g,S){var E=A.display,R=A.options.lineNumbers,Z=E.lineDiv,Ae=Z.firstChild;function Ce(xn){var Fn=xn.nextSibling;return x&&V&&A.display.currentWheelTarget==xn?xn.style.display="none":xn.parentNode.removeChild(xn),Fn}for(var Ie=E.view,je=E.viewFrom,gt=0;gt<Ie.length;gt++){var Mt=Ie[gt];if(!Mt.hidden)if(!Mt.node||Mt.node.parentNode!=Z){var Xt=bp(A,Mt,je,S);Z.insertBefore(Xt,Ae)}else{for(;Ae!=Mt.node;)Ae=Ce(Ae);var Qt=R&&g!=null&&g<=je&&Mt.lineNumber;Mt.changes&&(it(Mt.changes,"gutter")>-1&&(Qt=!1),$h(A,Mt,je,S)),Qt&&(Se(Mt.lineNumber),Mt.lineNumber.appendChild(document.createTextNode(Qn(A.options,je)))),Ae=Mt.node.nextSibling}je+=Mt.size}for(;Ae;)Ae=Ce(Ae)}function xa(A){var g=A.gutters.offsetWidth;A.sizer.style.marginLeft=g+"px",Gs(A,"gutterChanged",A)}function Zc(A,g){A.display.sizer.style.minHeight=g.docHeight+"px",A.display.heightForcer.style.top=g.docHeight+"px",A.display.gutters.style.height=g.docHeight+A.display.barHeight+fu(A)+"px"}function nf(A){var g=A.display,S=g.view;if(!(!g.alignWidgets&&(!g.gutters.firstChild||!A.options.fixedGutter))){for(var E=Yr(g)-g.scroller.scrollLeft+A.doc.scrollLeft,R=g.gutters.offsetWidth,Z=E+"px",Ae=0;Ae<S.length;Ae++)if(!S[Ae].hidden){A.options.fixedGutter&&(S[Ae].gutter&&(S[Ae].gutter.style.left=Z),S[Ae].gutterBackground&&(S[Ae].gutterBackground.style.left=Z));var Ce=S[Ae].alignable;if(Ce)for(var Ie=0;Ie<Ce.length;Ie++)Ce[Ie].style.left=Z}A.options.fixedGutter&&(g.gutters.style.left=E+R+"px")}}function ac(A){if(!A.options.lineNumbers)return!1;var g=A.doc,S=Qn(A.options,g.first+g.size-1),E=A.display;if(S.length!=E.lineNumChars){var R=E.measure.appendChild(xe("div",[xe("div",S)],"CodeMirror-linenumber CodeMirror-gutter-elt")),Z=R.firstChild.offsetWidth,Ae=R.offsetWidth-Z;return E.lineGutter.style.width="",E.lineNumInnerWidth=Math.max(Z,E.lineGutter.offsetWidth-Ae)+1,E.lineNumWidth=E.lineNumInnerWidth+Ae,E.lineNumChars=E.lineNumInnerWidth?S.length:-1,E.lineGutter.style.width=E.lineNumWidth+"px",xa(A.display),!0}return!1}function yl(A,g){for(var S=[],E=!1,R=0;R<A.length;R++){var Z=A[R],Ae=null;if(typeof Z!="string"&&(Ae=Z.style,Z=Z.className),Z=="CodeMirror-linenumbers")if(g)E=!0;else continue;S.push({className:Z,style:Ae})}return g&&!E&&S.push({className:"CodeMirror-linenumbers",style:null}),S}function Xd(A){var g=A.gutters,S=A.gutterSpecs;Se(g),A.lineGutter=null;for(var E=0;E<S.length;++E){var R=S[E],Z=R.className,Ae=R.style,Ce=g.appendChild(xe("div",null,"CodeMirror-gutter "+Z));Ae&&(Ce.style.cssText=Ae),Z=="CodeMirror-linenumbers"&&(A.lineGutter=Ce,Ce.style.width=(A.lineNumWidth||1)+"px")}g.style.display=S.length?"":"none",xa(A)}function Mi(A){Xd(A.display),Ll(A),nf(A)}function Md(A,g,S,E){var R=this;this.input=S,R.scrollbarFiller=xe("div",null,"CodeMirror-scrollbar-filler"),R.scrollbarFiller.setAttribute("cm-not-content","true"),R.gutterFiller=xe("div",null,"CodeMirror-gutter-filler"),R.gutterFiller.setAttribute("cm-not-content","true"),R.lineDiv=at("div",null,"CodeMirror-code"),R.selectionDiv=xe("div",null,null,"position: relative; z-index: 1"),R.cursorDiv=xe("div",null,"CodeMirror-cursors"),R.measure=xe("div",null,"CodeMirror-measure"),R.lineMeasure=xe("div",null,"CodeMirror-measure"),R.lineSpace=at("div",[R.measure,R.lineMeasure,R.selectionDiv,R.cursorDiv,R.lineDiv],null,"position: relative; outline: none");var Z=at("div",[R.lineSpace],"CodeMirror-lines");R.mover=xe("div",[Z],null,"position: relative"),R.sizer=xe("div",[R.mover],"CodeMirror-sizer"),R.sizerWidth=null,R.heightForcer=xe("div",null,null,"position: absolute; height: "+_t+"px; width: 1px;"),R.gutters=xe("div",null,"CodeMirror-gutters"),R.lineGutter=null,R.scroller=xe("div",[R.sizer,R.heightForcer,R.gutters],"CodeMirror-scroll"),R.scroller.setAttribute("tabIndex","-1"),R.wrapper=xe("div",[R.scrollbarFiller,R.gutterFiller,R.scroller],"CodeMirror"),O&&P>=105&&(R.wrapper.style.clipPath="inset(0px)"),R.wrapper.setAttribute("translate","no"),f&&y<8&&(R.gutters.style.zIndex=-1,R.scroller.style.paddingRight=0),!x&&!(i&&re)&&(R.scroller.draggable=!0),A&&(A.appendChild?A.appendChild(R.wrapper):A(R.wrapper)),R.viewFrom=R.viewTo=g.first,R.reportedViewFrom=R.reportedViewTo=g.first,R.view=[],R.renderedView=null,R.externalMeasured=null,R.viewOffset=0,R.lastWrapHeight=R.lastWrapWidth=0,R.updateLineNumbers=null,R.nativeBarWidth=R.barHeight=R.barWidth=0,R.scrollbarsClipped=!1,R.lineNumWidth=R.lineNumInnerWidth=R.lineNumChars=null,R.alignWidgets=!1,R.cachedCharWidth=R.cachedTextHeight=R.cachedPaddingH=null,R.maxLine=null,R.maxLineLength=0,R.maxLineChanged=!1,R.wheelDX=R.wheelDY=R.wheelStartX=R.wheelStartY=null,R.shift=!1,R.selForContextMenu=null,R.activeTouch=null,R.gutterSpecs=yl(E.gutters,E.lineNumbers),Xd(R),S.init(R)}var wd=0,$u=null;f?$u=-.53:i?$u=15:O?$u=-.7:j&&($u=-1/3);function Sc(A){var g=A.wheelDeltaX,S=A.wheelDeltaY;return g==null&&A.detail&&A.axis==A.HORIZONTAL_AXIS&&(g=A.detail),S==null&&A.detail&&A.axis==A.VERTICAL_AXIS?S=A.detail:S==null&&(S=A.wheelDelta),{x:g,y:S}}function lc(A){var g=Sc(A);return g.x*=$u,g.y*=$u,g}function Ec(A,g){O&&P==102&&(A.display.chromeScrollHack==null?A.display.sizer.style.pointerEvents="none":clearTimeout(A.display.chromeScrollHack),A.display.chromeScrollHack=setTimeout(function(){A.display.chromeScrollHack=null,A.display.sizer.style.pointerEvents=""},100));var S=Sc(g),E=S.x,R=S.y,Z=$u;g.deltaMode===0&&(E=g.deltaX,R=g.deltaY,Z=1);var Ae=A.display,Ce=Ae.scroller,Ie=Ce.scrollWidth>Ce.clientWidth,je=Ce.scrollHeight>Ce.clientHeight;if(E&&Ie||R&&je){if(R&&V&&x){e:for(var gt=g.target,Mt=Ae.view;gt!=Ce;gt=gt.parentNode)for(var Xt=0;Xt<Mt.length;Xt++)if(Mt[Xt].node==gt){A.display.currentWheelTarget=gt;break e}}if(E&&!i&&!U&&Z!=null){R&&je&&oc(A,Math.max(0,Ce.scrollTop+R*Z)),nl(A,Math.max(0,Ce.scrollLeft+E*Z)),(!R||R&&je)&&on(g),Ae.wheelStartX=null;return}if(R&&Z!=null){var Qt=R*Z,xn=A.doc.scrollTop,Fn=xn+Ae.wrapper.clientHeight;Qt<0?xn=Math.max(0,xn+Qt-50):Fn=Math.min(A.doc.height,Fn+Qt+50),gs(A,{top:xn,bottom:Fn})}wd<20&&g.deltaMode!==0&&(Ae.wheelStartX==null?(Ae.wheelStartX=Ce.scrollLeft,Ae.wheelStartY=Ce.scrollTop,Ae.wheelDX=E,Ae.wheelDY=R,setTimeout(function(){if(Ae.wheelStartX!=null){var Ar=Ce.scrollLeft-Ae.wheelStartX,tr=Ce.scrollTop-Ae.wheelStartY,gr=tr&&Ae.wheelDY&&tr/Ae.wheelDY||Ar&&Ae.wheelDX&&Ar/Ae.wheelDX;Ae.wheelStartX=Ae.wheelStartY=null,gr&&($u=($u*wd+gr)/(wd+1),++wd)}},200)):(Ae.wheelDX+=E,Ae.wheelDY+=R))}}var ds=function(A,g){this.ranges=A,this.primIndex=g};ds.prototype.primary=function(){return this.ranges[this.primIndex]},ds.prototype.equals=function(A){if(A==this)return!0;if(A.primIndex!=this.primIndex||A.ranges.length!=this.ranges.length)return!1;for(var g=0;g<this.ranges.length;g++){var S=this.ranges[g],E=A.ranges[g];if(!Di(S.anchor,E.anchor)||!Di(S.head,E.head))return!1}return!0},ds.prototype.deepCopy=function(){for(var A=[],g=0;g<this.ranges.length;g++)A[g]=new So(vo(this.ranges[g].anchor),vo(this.ranges[g].head));return new ds(A,this.primIndex)},ds.prototype.somethingSelected=function(){for(var A=0;A<this.ranges.length;A++)if(!this.ranges[A].empty())return!0;return!1},ds.prototype.contains=function(A,g){g||(g=A);for(var S=0;S<this.ranges.length;S++){var E=this.ranges[S];if(ur(g,E.from())>=0&&ur(A,E.to())<=0)return S}return-1};var So=function(A,g){this.anchor=A,this.head=g};So.prototype.from=function(){return ua(this.anchor,this.head)},So.prototype.to=function(){return rs(this.anchor,this.head)},So.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};function _u(A,g,S){var E=A&&A.options.selectionsMayTouch,R=g[S];g.sort(function(Xt,Qt){return ur(Xt.from(),Qt.from())}),S=it(g,R);for(var Z=1;Z<g.length;Z++){var Ae=g[Z],Ce=g[Z-1],Ie=ur(Ce.to(),Ae.from());if(E&&!Ae.empty()?Ie>0:Ie>=0){var je=ua(Ce.from(),Ae.from()),gt=rs(Ce.to(),Ae.to()),Mt=Ce.empty()?Ae.from()==Ae.head:Ce.from()==Ce.head;Z<=S&&--S,g.splice(--Z,2,new So(Mt?gt:je,Mt?je:gt))}}return new ds(g,S)}function Ma(A,g){return new ds([new So(A,g||A)],0)}function Ra(A){return A.text?fn(A.from.line+A.text.length-1,dr(A.text).length+(A.text.length==1?A.from.ch:0)):A.to}function Bc(A,g){if(ur(A,g.from)<0)return A;if(ur(A,g.to)<=0)return Ra(g);var S=A.line+g.text.length-(g.to.line-g.from.line)-1,E=A.ch;return A.line==g.to.line&&(E+=Ra(g).ch-g.to.ch),fn(S,E)}function ol(A,g){for(var S=[],E=0;E<A.sel.ranges.length;E++){var R=A.sel.ranges[E];S.push(new So(Bc(R.anchor,g),Bc(R.head,g)))}return _u(A.cm,S,A.sel.primIndex)}function Uo(A,g,S){return A.line==g.line?fn(S.line,A.ch-g.ch+S.ch):fn(S.line+(A.line-g.line),A.ch)}function PA(A,g,S){for(var E=[],R=fn(A.first,0),Z=R,Ae=0;Ae<g.length;Ae++){var Ce=g[Ae],Ie=Uo(Ce.from,R,Z),je=Uo(Ra(Ce),R,Z);if(R=Ce.to,Z=je,S=="around"){var gt=A.sel.ranges[Ae],Mt=ur(gt.head,gt.anchor)<0;E[Ae]=new So(Mt?je:Ie,Mt?Ie:je)}else E[Ae]=new So(Ie,Ie)}return new ds(E,A.sel.primIndex)}function Sd(A){A.doc.mode=Go(A.options,A.doc.modeOption),KA(A)}function KA(A){A.doc.iter(function(g){g.stateAfter&&(g.stateAfter=null),g.styles&&(g.styles=null)}),A.doc.modeFrontier=A.doc.highlightFrontier=A.doc.first,zl(A,100),A.state.modeGen++,A.curOp&&Ll(A)}function uc(A,g){return g.from.ch==0&&g.to.ch==0&&dr(g.text)==""&&(!A.cm||A.cm.options.wholeLineUpdateBefore)}function da(A,g,S,E){function R(gr){return S?S[gr]:null}function Z(gr,yr,Rr){cu(gr,yr,Rr,E),Gs(gr,"change",gr,g)}function Ae(gr,yr){for(var Rr=[],ti=gr;ti<yr;++ti)Rr.push(new Pa(je[ti],R(ti),E));return Rr}var Ce=g.from,Ie=g.to,je=g.text,gt=wr(A,Ce.line),Mt=wr(A,Ie.line),Xt=dr(je),Qt=R(je.length-1),xn=Ie.line-Ce.line;if(g.full)A.insert(0,Ae(0,je.length)),A.remove(je.length,A.size-je.length);else if(uc(A,g)){var Fn=Ae(0,je.length-1);Z(Mt,Mt.text,Qt),xn&&A.remove(Ce.line,xn),Fn.length&&A.insert(Ce.line,Fn)}else if(gt==Mt)if(je.length==1)Z(gt,gt.text.slice(0,Ce.ch)+Xt+gt.text.slice(Ie.ch),Qt);else{var Ar=Ae(1,je.length-1);Ar.push(new Pa(Xt+gt.text.slice(Ie.ch),Qt,E)),Z(gt,gt.text.slice(0,Ce.ch)+je[0],R(0)),A.insert(Ce.line+1,Ar)}else if(je.length==1)Z(gt,gt.text.slice(0,Ce.ch)+je[0]+Mt.text.slice(Ie.ch),R(0)),A.remove(Ce.line+1,xn);else{Z(gt,gt.text.slice(0,Ce.ch)+je[0],R(0)),Z(Mt,Xt+Mt.text.slice(Ie.ch),Qt);var tr=Ae(1,je.length-1);xn>1&&A.remove(Ce.line+1,xn-1),A.insert(Ce.line+1,tr)}Gs(A,"change",A,g)}function Da(A,g,S){function E(R,Z,Ae){if(R.linked)for(var Ce=0;Ce<R.linked.length;++Ce){var Ie=R.linked[Ce];if(Ie.doc!=Z){var je=Ae&&Ie.sharedHist;S&&!je||(g(Ie.doc,je),E(Ie.doc,R,je))}}}E(A,null,!0)}function Eo(A,g){if(g.cm)throw new Error("This document is already in use.");A.doc=g,g.cm=A,$d(A),Sd(A),ru(A),A.options.direction=g.direction,A.options.lineWrapping||ca(A),A.options.mode=g.modeOption,Ll(A)}function ru(A){(A.doc.direction=="rtl"?we:me)(A.display.lineDiv,"CodeMirror-rtl")}function Kr(A){_s(A,function(){ru(A),Ll(A)})}function ei(A){this.done=[],this.undone=[],this.undoDepth=A?A.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=A?A.maxGeneration:1}function iu(A,g){var S={from:vo(g.from),to:Ra(g),text:Ta(A,g.from,g.to)};return hA(A,S,g.from.line,g.to.line+1),Da(A,function(E){return hA(E,S,g.from.line,g.to.line+1)},!0),S}function vl(A){for(;A.length;){var g=dr(A);if(g.ranges)A.pop();else break}}function rf(A,g){if(g)return vl(A.done),dr(A.done);if(A.done.length&&!dr(A.done).ranges)return dr(A.done);if(A.done.length>1&&!A.done[A.done.length-2].ranges)return A.done.pop(),dr(A.done)}function sl(A,g,S,E){var R=A.history;R.undone.length=0;var Z=+new Date,Ae,Ce;if((R.lastOp==E||R.lastOrigin==g.origin&&g.origin&&(g.origin.charAt(0)=="+"&&R.lastModTime>Z-(A.cm?A.cm.options.historyEventDelay:500)||g.origin.charAt(0)=="*"))&&(Ae=rf(R,R.lastOp==E)))Ce=dr(Ae.changes),ur(g.from,g.to)==0&&ur(g.from,Ce.to)==0?Ce.to=Ra(g):Ae.changes.push(iu(A,g));else{var Ie=dr(R.done);for((!Ie||!Ie.ranges)&&Hu(A.sel,R.done),Ae={changes:[iu(A,g)],generation:R.generation},R.done.push(Ae);R.done.length>R.undoDepth;)R.done.shift(),R.done[0].ranges||R.done.shift()}R.done.push(S),R.generation=++R.maxGeneration,R.lastModTime=R.lastSelTime=Z,R.lastOp=R.lastSelOp=E,R.lastOrigin=R.lastSelOrigin=g.origin,Ce||ct(A,"historyAdded")}function of(A,g,S,E){var R=g.charAt(0);return R=="*"||R=="+"&&S.ranges.length==E.ranges.length&&S.somethingSelected()==E.somethingSelected()&&new Date-A.history.lastSelTime<=(A.cm?A.cm.options.historyEventDelay:500)}function al(A,g,S,E){var R=A.history,Z=E&&E.origin;S==R.lastSelOp||Z&&R.lastSelOrigin==Z&&(R.lastModTime==R.lastSelTime&&R.lastOrigin==Z||of(A,Z,dr(R.done),g))?R.done[R.done.length-1]=g:Hu(g,R.done),R.lastSelTime=+new Date,R.lastSelOrigin=Z,R.lastSelOp=S,E&&E.clearRedo!==!1&&vl(R.undone)}function Hu(A,g){var S=dr(g);S&&S.ranges&&S.equals(A)||g.push(A)}function hA(A,g,S,E){var R=g["spans_"+A.id],Z=0;A.iter(Math.max(A.first,S),Math.min(A.first+A.size,E),function(Ae){Ae.markedSpans&&((R||(R=g["spans_"+A.id]={}))[Z]=Ae.markedSpans),++Z})}function Os(A){if(!A)return null;for(var g,S=0;S<A.length;++S)A[S].marker.explicitlyCleared?g||(g=A.slice(0,S)):g&&g.push(A[S]);return g?g.length?g:null:A}function Is(A,g){var S=g["spans_"+A.id];if(!S)return null;for(var E=[],R=0;R<g.text.length;++R)E.push(Os(S[R]));return E}function sf(A,g){var S=Is(A,g),E=qr(A,g);if(!S)return E;if(!E)return S;for(var R=0;R<S.length;++R){var Z=S[R],Ae=E[R];if(Z&&Ae)e:for(var Ce=0;Ce<Ae.length;++Ce){for(var Ie=Ae[Ce],je=0;je<Z.length;++je)if(Z[je].marker==Ie.marker)continue e;Z.push(Ie)}else Ae&&(S[R]=Ae)}return S}function Zu(A,g,S){for(var E=[],R=0;R<A.length;++R){var Z=A[R];if(Z.ranges){E.push(S?ds.prototype.deepCopy.call(Z):Z);continue}var Ae=Z.changes,Ce=[];E.push({changes:Ce});for(var Ie=0;Ie<Ae.length;++Ie){var je=Ae[Ie],gt=void 0;if(Ce.push({from:je.from,to:je.to,text:je.text}),g)for(var Mt in je)(gt=Mt.match(/^spans_(\d+)$/))&&it(g,Number(gt[1]))>-1&&(dr(Ce)[Mt]=je[Mt],delete je[Mt])}}return E}function ks(A,g,S,E){if(E){var R=A.anchor;if(S){var Z=ur(g,R)<0;Z!=ur(S,R)<0?(R=g,g=S):Z!=ur(g,S)<0&&(g=S)}return new So(R,g)}else return new So(S||g,g)}function Oc(A,g,S,E,R){R==null&&(R=A.cm&&(A.cm.display.shift||A.extend)),ha(A,new ds([ks(A.sel.primary(),g,S,R)],0),E)}function bu(A,g,S){for(var E=[],R=A.cm&&(A.cm.display.shift||A.extend),Z=0;Z<A.sel.ranges.length;Z++)E[Z]=ks(A.sel.ranges[Z],g[Z],null,R);var Ae=_u(A.cm,E,A.sel.primIndex);ha(A,Ae,S)}function Cl(A,g,S,E){var R=A.sel.ranges.slice(0);R[g]=S,ha(A,_u(A.cm,R,A.sel.primIndex),E)}function ou(A,g,S,E){ha(A,Ma(g,S),E)}function Ic(A,g,S){var E={ranges:g.ranges,update:function(R){this.ranges=[];for(var Z=0;Z<R.length;Z++)this.ranges[Z]=new So(ii(A,R[Z].anchor),ii(A,R[Z].head))},origin:S&&S.origin};return ct(A,"beforeSelectionChange",A,E),A.cm&&ct(A.cm,"beforeSelectionChange",A.cm,E),E.ranges!=g.ranges?_u(A.cm,E.ranges,E.ranges.length-1):g}function xu(A,g,S){var E=A.history.done,R=dr(E);R&&R.ranges?(E[E.length-1]=g,Qs(A,g,S)):ha(A,g,S)}function ha(A,g,S){Qs(A,g,S),al(A,A.sel,A.cm?A.cm.curOp.id:NaN,S)}function Qs(A,g,S){(Gt(A,"beforeSelectionChange")||A.cm&&Gt(A.cm,"beforeSelectionChange"))&&(g=Ic(A,g,S));var E=S&&S.bias||(ur(g.primary().head,A.sel.primary().head)<0?-1:1);su(A,RA(A,g,E,!0)),!(S&&S.scroll===!1)&&A.cm&&A.cm.getOption("readOnly")!="nocursor"&&ms(A.cm)}function su(A,g){g.equals(A.sel)||(A.sel=g,A.cm&&(A.cm.curOp.updateInput=1,A.cm.curOp.selectionChanged=!0,qt(A.cm)),Gs(A,"cursorActivity",A))}function au(A){su(A,RA(A,A.sel,null,!1))}function RA(A,g,S,E){for(var R,Z=0;Z<g.ranges.length;Z++){var Ae=g.ranges[Z],Ce=g.ranges.length==A.sel.ranges.length&&A.sel.ranges[Z],Ie=Ac(A,Ae.anchor,Ce&&Ce.anchor,S,E),je=Ae.head==Ae.anchor?Ie:Ac(A,Ae.head,Ce&&Ce.head,S,E);(R||Ie!=Ae.anchor||je!=Ae.head)&&(R||(R=g.ranges.slice(0,Z)),R[Z]=new So(Ie,je))}return R?_u(A.cm,R,g.primIndex):g}function Mu(A,g,S,E,R){var Z=wr(A,g.line);if(Z.markedSpans)for(var Ae=0;Ae<Z.markedSpans.length;++Ae){var Ce=Z.markedSpans[Ae],Ie=Ce.marker,je="selectLeft"in Ie?!Ie.selectLeft:Ie.inclusiveLeft,gt="selectRight"in Ie?!Ie.selectRight:Ie.inclusiveRight;if((Ce.from==null||(je?Ce.from<=g.ch:Ce.from<g.ch))&&(Ce.to==null||(gt?Ce.to>=g.ch:Ce.to>g.ch))){if(R&&(ct(Ie,"beforeCursorEnter"),Ie.explicitlyCleared))if(Z.markedSpans){--Ae;continue}else break;if(!Ie.atomic)continue;if(S){var Mt=Ie.find(E<0?1:-1),Xt=void 0;if((E<0?gt:je)&&(Mt=fA(A,Mt,-E,Mt&&Mt.line==g.line?Z:null)),Mt&&Mt.line==g.line&&(Xt=ur(Mt,S))&&(E<0?Xt<0:Xt>0))return Mu(A,Mt,g,E,R)}var Qt=Ie.find(E<0?-1:1);return(E<0?je:gt)&&(Qt=fA(A,Qt,E,Qt.line==g.line?Z:null)),Qt?Mu(A,Qt,g,E,R):null}}return g}function Ac(A,g,S,E,R){var Z=E||1,Ae=Mu(A,g,S,Z,R)||!R&&Mu(A,g,S,Z,!0)||Mu(A,g,S,-Z,R)||!R&&Mu(A,g,S,-Z,!0);return Ae||(A.cantEdit=!0,fn(A.first,0))}function fA(A,g,S,E){return S<0&&g.ch==0?g.line>A.first?ii(A,fn(g.line-1)):null:S>0&&g.ch==(E||wr(A,g.line)).text.length?g.line<A.first+A.size-1?fn(g.line+1,0):null:new fn(g.line,g.ch+S)}function jl(A){A.setSelection(fn(A.firstLine(),0),fn(A.lastLine()),Lt)}function Xc(A,g,S){var E={canceled:!1,from:g.from,to:g.to,text:g.text,origin:g.origin,cancel:function(){return E.canceled=!0}};return S&&(E.update=function(R,Z,Ae,Ce){R&&(E.from=ii(A,R)),Z&&(E.to=ii(A,Z)),Ae&&(E.text=Ae),Ce!==void 0&&(E.origin=Ce)}),ct(A,"beforeChange",A,E),A.cm&&ct(A.cm,"beforeChange",A.cm,E),E.canceled?(A.cm&&(A.cm.curOp.updateInput=2),null):{from:E.from,to:E.to,text:E.text,origin:E.origin}}function I(A,g,S){if(A.cm){if(!A.cm.curOp)return gi(A.cm,I)(A,g,S);if(A.cm.state.suppressEdits)return}if(!((Gt(A,"beforeChange")||A.cm&&Gt(A.cm,"beforeChange"))&&(g=Xc(A,g,!0),!g))){var E=Oi&&!S&&Vi(A,g.from,g.to);if(E)for(var R=E.length-1;R>=0;--R)a(A,{from:E[R].from,to:E[R].to,text:R?[""]:g.text,origin:g.origin});else a(A,g)}}function a(A,g){if(!(g.text.length==1&&g.text[0]==""&&ur(g.from,g.to)==0)){var S=ol(A,g);sl(A,g,S,A.cm?A.cm.curOp.id:NaN),M(A,g,S,qr(A,g));var E=[];Da(A,function(R,Z){!Z&&it(E,R.history)==-1&&(ae(R.history,g),E.push(R.history)),M(R,g,null,qr(R,g))})}}function c(A,g,S){var E=A.cm&&A.cm.state.suppressEdits;if(!(E&&!S)){for(var R=A.history,Z,Ae=A.sel,Ce=g=="undo"?R.done:R.undone,Ie=g=="undo"?R.undone:R.done,je=0;je<Ce.length&&(Z=Ce[je],!(S?Z.ranges&&!Z.equals(A.sel):!Z.ranges));je++);if(je!=Ce.length){for(R.lastOrigin=R.lastSelOrigin=null;;)if(Z=Ce.pop(),Z.ranges){if(Hu(Z,Ie),S&&!Z.equals(A.sel)){ha(A,Z,{clearRedo:!1});return}Ae=Z}else if(E){Ce.push(Z);return}else break;var gt=[];Hu(Ae,Ie),Ie.push({changes:gt,generation:R.generation}),R.generation=Z.generation||++R.maxGeneration;for(var Mt=Gt(A,"beforeChange")||A.cm&&Gt(A.cm,"beforeChange"),Xt=function(Fn){var Ar=Z.changes[Fn];if(Ar.origin=g,Mt&&!Xc(A,Ar,!1))return Ce.length=0,{};gt.push(iu(A,Ar));var tr=Fn?ol(A,Ar):dr(Ce);M(A,Ar,tr,sf(A,Ar)),!Fn&&A.cm&&A.cm.scrollIntoView({from:Ar.from,to:Ra(Ar)});var gr=[];Da(A,function(yr,Rr){!Rr&&it(gr,yr.history)==-1&&(ae(yr.history,Ar),gr.push(yr.history)),M(yr,Ar,null,sf(yr,Ar))})},Qt=Z.changes.length-1;Qt>=0;--Qt){var xn=Xt(Qt);if(xn)return xn.v}}}}function _(A,g){if(g!=0&&(A.first+=g,A.sel=new ds(Pn(A.sel.ranges,function(R){return new So(fn(R.anchor.line+g,R.anchor.ch),fn(R.head.line+g,R.head.ch))}),A.sel.primIndex),A.cm)){Ll(A.cm,A.first,A.first-g,g);for(var S=A.cm.display,E=S.viewFrom;E<S.viewTo;E++)Mc(A.cm,E,"gutter")}}function M(A,g,S,E){if(A.cm&&!A.cm.curOp)return gi(A.cm,M)(A,g,S,E);if(g.to.line<A.first){_(A,g.text.length-1-(g.to.line-g.from.line));return}if(!(g.from.line>A.lastLine())){if(g.from.line<A.first){var R=g.text.length-1-(A.first-g.from.line);_(A,R),g={from:fn(A.first,0),to:fn(g.to.line+R,g.to.ch),text:[dr(g.text)],origin:g.origin}}var Z=A.lastLine();g.to.line>Z&&(g={from:g.from,to:fn(Z,wr(A,Z).text.length),text:[g.text[0]],origin:g.origin}),g.removed=Ta(A,g.from,g.to),S||(S=ol(A,g)),A.cm?T(A.cm,g,E):da(A,g,E),Qs(A,S,Lt),A.cantEdit&&Ac(A,fn(A.firstLine(),0))&&(A.cantEdit=!1)}}function T(A,g,S){var E=A.doc,R=A.display,Z=g.from,Ae=g.to,Ce=!1,Ie=Z.line;A.options.lineWrapping||(Ie=Ye(Ir(wr(E,Z.line))),E.iter(Ie,Ae.line+1,function(Qt){if(Qt==R.maxLine)return Ce=!0,!0})),E.sel.contains(g.from,g.to)>-1&&qt(A),da(E,g,S,tc(A)),A.options.lineWrapping||(E.iter(Ie,Z.line+g.text.length,function(Qt){var xn=To(Qt);xn>R.maxLineLength&&(R.maxLine=Qt,R.maxLineLength=xn,R.maxLineChanged=!0,Ce=!1)}),Ce&&(A.curOp.updateMaxLine=!0)),Ns(E,Z.line),zl(A,400);var je=g.text.length-(Ae.line-Z.line)-1;g.full?Ll(A):Z.line==Ae.line&&g.text.length==1&&!uc(A.doc,g)?Mc(A,Z.line,"text"):Ll(A,Z.line,Ae.line+1,je);var gt=Gt(A,"changes"),Mt=Gt(A,"change");if(Mt||gt){var Xt={from:Z,to:Ae,text:g.text,removed:g.removed,origin:g.origin};Mt&&Gs(A,"change",A,Xt),gt&&(A.curOp.changeObjs||(A.curOp.changeObjs=[])).push(Xt)}A.display.selForContextMenu=null}function z(A,g,S,E,R){var Z;E||(E=S),ur(E,S)<0&&(Z=[E,S],S=Z[0],E=Z[1]),typeof g=="string"&&(g=A.splitLines(g)),I(A,{from:S,to:E,text:g,origin:R})}function q(A,g,S,E){S<A.line?A.line+=E:g<A.line&&(A.line=g,A.ch=0)}function te(A,g,S,E){for(var R=0;R<A.length;++R){var Z=A[R],Ae=!0;if(Z.ranges){Z.copied||(Z=A[R]=Z.deepCopy(),Z.copied=!0);for(var Ce=0;Ce<Z.ranges.length;Ce++)q(Z.ranges[Ce].anchor,g,S,E),q(Z.ranges[Ce].head,g,S,E);continue}for(var Ie=0;Ie<Z.changes.length;++Ie){var je=Z.changes[Ie];if(S<je.from.line)je.from=fn(je.from.line+E,je.from.ch),je.to=fn(je.to.line+E,je.to.ch);else if(g<=je.to.line){Ae=!1;break}}Ae||(A.splice(0,R+1),R=0)}}function ae(A,g){var S=g.from.line,E=g.to.line,R=g.text.length-(E-S)-1;te(A.done,S,E,R),te(A.undone,S,E,R)}function be(A,g,S,E){var R=g,Z=g;return typeof g=="number"?Z=wr(A,eu(A,g)):R=Ye(g),R==null?null:(E(Z,R)&&A.cm&&Mc(A.cm,R,S),Z)}function ke(A){this.lines=A,this.parent=null;for(var g=0,S=0;S<A.length;++S)A[S].parent=this,g+=A[S].height;this.height=g}ke.prototype={chunkSize:function(){return this.lines.length},removeInner:function(A,g){for(var S=A,E=A+g;S<E;++S){var R=this.lines[S];this.height-=R.height,Ws(R),Gs(R,"delete")}this.lines.splice(A,g)},collapse:function(A){A.push.apply(A,this.lines)},insertInner:function(A,g,S){this.height+=S,this.lines=this.lines.slice(0,A).concat(g).concat(this.lines.slice(A));for(var E=0;E<g.length;++E)g[E].parent=this},iterN:function(A,g,S){for(var E=A+g;A<E;++A)if(S(this.lines[A]))return!0}};function Te(A){this.children=A;for(var g=0,S=0,E=0;E<A.length;++E){var R=A[E];g+=R.chunkSize(),S+=R.height,R.parent=this}this.size=g,this.height=S,this.parent=null}Te.prototype={chunkSize:function(){return this.size},removeInner:function(A,g){this.size-=g;for(var S=0;S<this.children.length;++S){var E=this.children[S],R=E.chunkSize();if(A<R){var Z=Math.min(g,R-A),Ae=E.height;if(E.removeInner(A,Z),this.height-=Ae-E.height,R==Z&&(this.children.splice(S--,1),E.parent=null),(g-=Z)==0)break;A=0}else A-=R}if(this.size-g<25&&(this.children.length>1||!(this.children[0]instanceof ke))){var Ce=[];this.collapse(Ce),this.children=[new ke(Ce)],this.children[0].parent=this}},collapse:function(A){for(var g=0;g<this.children.length;++g)this.children[g].collapse(A)},insertInner:function(A,g,S){this.size+=g.length,this.height+=S;for(var E=0;E<this.children.length;++E){var R=this.children[E],Z=R.chunkSize();if(A<=Z){if(R.insertInner(A,g,S),R.lines&&R.lines.length>50){for(var Ae=R.lines.length%25+25,Ce=Ae;Ce<R.lines.length;){var Ie=new ke(R.lines.slice(Ce,Ce+=25));R.height-=Ie.height,this.children.splice(++E,0,Ie),Ie.parent=this}R.lines=R.lines.slice(0,Ae),this.maybeSpill()}break}A-=Z}},maybeSpill:function(){if(!(this.children.length<=10)){var A=this;do{var g=A.children.splice(A.children.length-5,5),S=new Te(g);if(A.parent){A.size-=S.size,A.height-=S.height;var R=it(A.parent.children,A);A.parent.children.splice(R+1,0,S)}else{var E=new Te(A.children);E.parent=A,A.children=[E,S],A=E}S.parent=A.parent}while(A.children.length>10);A.parent.maybeSpill()}},iterN:function(A,g,S){for(var E=0;E<this.children.length;++E){var R=this.children[E],Z=R.chunkSize();if(A<Z){var Ae=Math.min(g,Z-A);if(R.iterN(A,Ae,S))return!0;if((g-=Ae)==0)break;A=0}else A-=Z}}};var $e=function(A,g,S){if(S)for(var E in S)S.hasOwnProperty(E)&&(this[E]=S[E]);this.doc=A,this.node=g};$e.prototype.clear=function(){var A=this.doc.cm,g=this.line.widgets,S=this.line,E=Ye(S);if(!(E==null||!g)){for(var R=0;R<g.length;++R)g[R]==this&&g.splice(R--,1);g.length||(S.widgets=null);var Z=ju(this);Zs(S,Math.max(0,S.height-Z)),A&&(_s(A,function(){Xe(A,S,-Z),Mc(A,E,"widget")}),Gs(A,"lineWidgetCleared",A,this,E))}},$e.prototype.changed=function(){var A=this,g=this.height,S=this.doc.cm,E=this.line;this.height=null;var R=ju(this)-g;R&&(zr(this.doc,E)||Zs(E,E.height+R),S&&_s(S,function(){S.curOp.forceUpdate=!0,Xe(S,E,R),Gs(S,"lineWidgetChanged",S,A,Ye(E))}))},zt($e);function Xe(A,g,S){Zi(g)<(A.curOp&&A.curOp.scrollTop||A.doc.scrollTop)&&ic(A,S)}function mt(A,g,S,E){var R=new $e(A,S,E),Z=A.cm;return Z&&R.noHScroll&&(Z.display.alignWidgets=!0),be(A,g,"widget",function(Ae){var Ce=Ae.widgets||(Ae.widgets=[]);if(R.insertAt==null?Ce.push(R):Ce.splice(Math.min(Ce.length,Math.max(0,R.insertAt)),0,R),R.line=Ae,Z&&!zr(A,Ae)){var Ie=Zi(Ae)<A.scrollTop;Zs(Ae,Ae.height+ju(R)),Ie&&ic(Z,R.height),Z.curOp.forceUpdate=!0}return!0}),Z&&Gs(Z,"lineWidgetAdded",Z,R,typeof g=="number"?g:Ye(g)),R}var ut=0,ft=function(A,g){this.lines=[],this.type=g,this.doc=A,this.id=++ut};ft.prototype.clear=function(){if(!this.explicitlyCleared){var A=this.doc.cm,g=A&&!A.curOp;if(g&&Yu(A),Gt(this,"clear")){var S=this.find();S&&Gs(this,"clear",S.from,S.to)}for(var E=null,R=null,Z=0;Z<this.lines.length;++Z){var Ae=this.lines[Z],Ce=pl(Ae.markedSpans,this);A&&!this.collapsed?Mc(A,Ye(Ae),"text"):A&&(Ce.to!=null&&(R=Ye(Ae)),Ce.from!=null&&(E=Ye(Ae))),Ae.markedSpans=ml(Ae.markedSpans,Ce),Ce.from==null&&this.collapsed&&!zr(this.doc,Ae)&&A&&Zs(Ae,Ka(A.display))}if(A&&this.collapsed&&!A.options.lineWrapping)for(var Ie=0;Ie<this.lines.length;++Ie){var je=Ir(this.lines[Ie]),gt=To(je);gt>A.display.maxLineLength&&(A.display.maxLine=je,A.display.maxLineLength=gt,A.display.maxLineChanged=!0)}E!=null&&A&&this.collapsed&&Ll(A,E,R+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,A&&au(A.doc)),A&&Gs(A,"markerCleared",A,this,E,R),g&&qu(A),this.parent&&this.parent.clear()}},ft.prototype.find=function(A,g){A==null&&this.type=="bookmark"&&(A=1);for(var S,E,R=0;R<this.lines.length;++R){var Z=this.lines[R],Ae=pl(Z.markedSpans,this);if(Ae.from!=null&&(S=fn(g?Z:Ye(Z),Ae.from),A==-1))return S;if(Ae.to!=null&&(E=fn(g?Z:Ye(Z),Ae.to),A==1))return E}return S&&{from:S,to:E}},ft.prototype.changed=function(){var A=this,g=this.find(-1,!0),S=this,E=this.doc.cm;!g||!E||_s(E,function(){var R=g.line,Z=Ye(g.line),Ae=Qd(E,Z);if(Ae&&(Yd(Ae),E.curOp.selectionChanged=E.curOp.forceUpdate=!0),E.curOp.updateMaxLine=!0,!zr(S.doc,R)&&S.height!=null){var Ce=S.height;S.height=null;var Ie=ju(S)-Ce;Ie&&Zs(R,R.height+Ie)}Gs(E,"markerChanged",E,A)})},ft.prototype.attachLine=function(A){if(!this.lines.length&&this.doc.cm){var g=this.doc.cm.curOp;(!g.maybeHiddenMarkers||it(g.maybeHiddenMarkers,this)==-1)&&(g.maybeUnhiddenMarkers||(g.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(A)},ft.prototype.detachLine=function(A){if(this.lines.splice(it(this.lines,A),1),!this.lines.length&&this.doc.cm){var g=this.doc.cm.curOp;(g.maybeHiddenMarkers||(g.maybeHiddenMarkers=[])).push(this)}},zt(ft);function vt(A,g,S,E,R){if(E&&E.shared)return kt(A,g,S,E,R);if(A.cm&&!A.cm.curOp)return gi(A.cm,vt)(A,g,S,E,R);var Z=new ft(A,R),Ae=ur(g,S);if(E&&Ue(E,Z,!1),Ae>0||Ae==0&&Z.clearWhenEmpty!==!1)return Z;if(Z.replacedWith&&(Z.collapsed=!0,Z.widgetNode=at("span",[Z.replacedWith],"CodeMirror-widget"),E.handleMouseEvents||Z.widgetNode.setAttribute("cm-ignore-events","true"),E.insertLeft&&(Z.widgetNode.insertLeft=!0)),Z.collapsed){if(di(A,g.line,g,S,Z)||g.line!=S.line&&di(A,S.line,g,S,Z))throw new Error("Inserting collapsed marker partially overlapping an existing one");va()}Z.addToHistory&&sl(A,{from:g,to:S,origin:"markText"},A.sel,NaN);var Ce=g.line,Ie=A.cm,je;if(A.iter(Ce,S.line+1,function(Mt){Ie&&Z.collapsed&&!Ie.options.lineWrapping&&Ir(Mt)==Ie.display.maxLine&&(je=!0),Z.collapsed&&Ce!=g.line&&Zs(Mt,0),fo(Mt,new As(Z,Ce==g.line?g.ch:null,Ce==S.line?S.ch:null),A.cm&&A.cm.curOp),++Ce}),Z.collapsed&&A.iter(g.line,S.line+1,function(Mt){zr(A,Mt)&&Zs(Mt,0)}),Z.clearOnEnter&&Fe(Z,"beforeCursorEnter",function(){return Z.clear()}),Z.readOnly&&(ea(),(A.history.done.length||A.history.undone.length)&&A.clearHistory()),Z.collapsed&&(Z.id=++ut,Z.atomic=!0),Ie){if(je&&(Ie.curOp.updateMaxLine=!0),Z.collapsed)Ll(Ie,g.line,S.line+1);else if(Z.className||Z.startStyle||Z.endStyle||Z.css||Z.attributes||Z.title)for(var gt=g.line;gt<=S.line;gt++)Mc(Ie,gt,"text");Z.atomic&&au(Ie.doc),Gs(Ie,"markerAdded",Ie,Z)}return Z}var Et=function(A,g){this.markers=A,this.primary=g;for(var S=0;S<A.length;++S)A[S].parent=this};Et.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var A=0;A<this.markers.length;++A)this.markers[A].clear();Gs(this,"clear")}},Et.prototype.find=function(A,g){return this.primary.find(A,g)},zt(Et);function kt(A,g,S,E,R){E=Ue(E),E.shared=!1;var Z=[vt(A,g,S,E,R)],Ae=Z[0],Ce=E.widgetNode;return Da(A,function(Ie){Ce&&(E.widgetNode=Ce.cloneNode(!0)),Z.push(vt(Ie,ii(Ie,g),ii(Ie,S),E,R));for(var je=0;je<Ie.linked.length;++je)if(Ie.linked[je].isParent)return;Ae=dr(Z)}),new Et(Z,Ae)}function Rt(A){return A.findMarks(fn(A.first,0),A.clipPos(fn(A.lastLine())),function(g){return g.parent})}function Ut(A,g){for(var S=0;S<g.length;S++){var E=g[S],R=E.find(),Z=A.clipPos(R.from),Ae=A.clipPos(R.to);if(ur(Z,Ae)){var Ce=vt(A,Z,Ae,E.primary,E.primary.type);E.markers.push(Ce),Ce.parent=E}}}function It(A){for(var g=function(E){var R=A[E],Z=[R.primary.doc];Da(R.primary.doc,function(Ie){return Z.push(Ie)});for(var Ae=0;Ae<R.markers.length;Ae++){var Ce=R.markers[Ae];it(Z,Ce.doc)==-1&&(Ce.parent=null,R.markers.splice(Ae--,1))}},S=0;S<A.length;S++)g(S)}var rn=0,Zt=function(A,g,S,E,R){if(!(this instanceof Zt))return new Zt(A,g,S,E,R);S==null&&(S=0),Te.call(this,[new ke([new Pa("",null)])]),this.first=S,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=S;var Z=fn(S,0);this.sel=Ma(Z),this.history=new ei(null),this.id=++rn,this.modeOption=g,this.lineSep=E,this.direction=R=="rtl"?"rtl":"ltr",this.extend=!1,typeof A=="string"&&(A=this.splitLines(A)),da(this,{from:Z,to:Z,text:A}),ha(this,Ma(Z),Lt)};Zt.prototype=lr(Te.prototype,{constructor:Zt,iter:function(A,g,S){S?this.iterN(A-this.first,g-A,S):this.iterN(this.first,this.first+this.size,A)},insert:function(A,g){for(var S=0,E=0;E<g.length;++E)S+=g[E].height;this.insertInner(A-this.first,g,S)},remove:function(A,g){this.removeInner(A-this.first,g)},getValue:function(A){var g=Ss(this,this.first,this.first+this.size);return A===!1?g:g.join(A||this.lineSeparator())},setValue:ta(function(A){var g=fn(this.first,0),S=this.first+this.size-1;I(this,{from:g,to:fn(S,wr(this,S).text.length),text:this.splitLines(A),origin:"setValue",full:!0},!0),this.cm&&ao(this.cm,0,0),ha(this,Ma(g),Lt)}),replaceRange:function(A,g,S,E){g=ii(this,g),S=S?ii(this,S):g,z(this,A,g,S,E)},getRange:function(A,g,S){var E=Ta(this,ii(this,A),ii(this,g));return S===!1?E:S===""?E.join(""):E.join(S||this.lineSeparator())},getLine:function(A){var g=this.getLineHandle(A);return g&&g.text},getLineHandle:function(A){if(Cn(this,A))return wr(this,A)},getLineNumber:function(A){return Ye(A)},getLineHandleVisualStart:function(A){return typeof A=="number"&&(A=wr(this,A)),Ir(A)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(A){return ii(this,A)},getCursor:function(A){var g=this.sel.primary(),S;return A==null||A=="head"?S=g.head:A=="anchor"?S=g.anchor:A=="end"||A=="to"||A===!1?S=g.to():S=g.from(),S},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:ta(function(A,g,S){ou(this,ii(this,typeof A=="number"?fn(A,g||0):A),null,S)}),setSelection:ta(function(A,g,S){ou(this,ii(this,A),ii(this,g||A),S)}),extendSelection:ta(function(A,g,S){Oc(this,ii(this,A),g&&ii(this,g),S)}),extendSelections:ta(function(A,g){bu(this,Aa(this,A),g)}),extendSelectionsBy:ta(function(A,g){var S=Pn(this.sel.ranges,A);bu(this,Aa(this,S),g)}),setSelections:ta(function(A,g,S){if(A.length){for(var E=[],R=0;R<A.length;R++)E[R]=new So(ii(this,A[R].anchor),ii(this,A[R].head||A[R].anchor));g==null&&(g=Math.min(A.length-1,this.sel.primIndex)),ha(this,_u(this.cm,E,g),S)}}),addSelection:ta(function(A,g,S){var E=this.sel.ranges.slice(0);E.push(new So(ii(this,A),ii(this,g||A))),ha(this,_u(this.cm,E,E.length-1),S)}),getSelection:function(A){for(var g=this.sel.ranges,S,E=0;E<g.length;E++){var R=Ta(this,g[E].from(),g[E].to());S=S?S.concat(R):R}return A===!1?S:S.join(A||this.lineSeparator())},getSelections:function(A){for(var g=[],S=this.sel.ranges,E=0;E<S.length;E++){var R=Ta(this,S[E].from(),S[E].to());A!==!1&&(R=R.join(A||this.lineSeparator())),g[E]=R}return g},replaceSelection:function(A,g,S){for(var E=[],R=0;R<this.sel.ranges.length;R++)E[R]=A;this.replaceSelections(E,g,S||"+input")},replaceSelections:ta(function(A,g,S){for(var E=[],R=this.sel,Z=0;Z<R.ranges.length;Z++){var Ae=R.ranges[Z];E[Z]={from:Ae.from(),to:Ae.to(),text:this.splitLines(A[Z]),origin:S}}for(var Ce=g&&g!="end"&&PA(this,E,g),Ie=E.length-1;Ie>=0;Ie--)I(this,E[Ie]);Ce?xu(this,Ce):this.cm&&ms(this.cm)}),undo:ta(function(){c(this,"undo")}),redo:ta(function(){c(this,"redo")}),undoSelection:ta(function(){c(this,"undo",!0)}),redoSelection:ta(function(){c(this,"redo",!0)}),setExtending:function(A){this.extend=A},getExtending:function(){return this.extend},historySize:function(){for(var A=this.history,g=0,S=0,E=0;E<A.done.length;E++)A.done[E].ranges||++g;for(var R=0;R<A.undone.length;R++)A.undone[R].ranges||++S;return{undo:g,redo:S}},clearHistory:function(){var A=this;this.history=new ei(this.history),Da(this,function(g){return g.history=A.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(A){return A&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(A){return this.history.generation==(A||this.cleanGeneration)},getHistory:function(){return{done:Zu(this.history.done),undone:Zu(this.history.undone)}},setHistory:function(A){var g=this.history=new ei(this.history);g.done=Zu(A.done.slice(0),null,!0),g.undone=Zu(A.undone.slice(0),null,!0)},setGutterMarker:ta(function(A,g,S){return be(this,A,"gutter",function(E){var R=E.gutterMarkers||(E.gutterMarkers={});return R[g]=S,!S&&ce(R)&&(E.gutterMarkers=null),!0})}),clearGutter:ta(function(A){var g=this;this.iter(function(S){S.gutterMarkers&&S.gutterMarkers[A]&&be(g,S,"gutter",function(){return S.gutterMarkers[A]=null,ce(S.gutterMarkers)&&(S.gutterMarkers=null),!0})})}),lineInfo:function(A){var g;if(typeof A=="number"){if(!Cn(this,A)||(g=A,A=wr(this,A),!A))return null}else if(g=Ye(A),g==null)return null;return{line:g,handle:A,text:A.text,gutterMarkers:A.gutterMarkers,textClass:A.textClass,bgClass:A.bgClass,wrapClass:A.wrapClass,widgets:A.widgets}},addLineClass:ta(function(A,g,S){return be(this,A,g=="gutter"?"gutter":"class",function(E){var R=g=="text"?"textClass":g=="background"?"bgClass":g=="gutter"?"gutterClass":"wrapClass";if(!E[R])E[R]=S;else{if(Ee(S).test(E[R]))return!1;E[R]+=" "+S}return!0})}),removeLineClass:ta(function(A,g,S){return be(this,A,g=="gutter"?"gutter":"class",function(E){var R=g=="text"?"textClass":g=="background"?"bgClass":g=="gutter"?"gutterClass":"wrapClass",Z=E[R];if(Z)if(S==null)E[R]=null;else{var Ae=Z.match(Ee(S));if(!Ae)return!1;var Ce=Ae.index+Ae[0].length;E[R]=Z.slice(0,Ae.index)+(!Ae.index||Ce==Z.length?"":" ")+Z.slice(Ce)||null}else return!1;return!0})}),addLineWidget:ta(function(A,g,S){return mt(this,A,g,S)}),removeLineWidget:function(A){A.clear()},markText:function(A,g,S){return vt(this,ii(this,A),ii(this,g),S,S&&S.type||"range")},setBookmark:function(A,g){var S={replacedWith:g&&(g.nodeType==null?g.widget:g),insertLeft:g&&g.insertLeft,clearWhenEmpty:!1,shared:g&&g.shared,handleMouseEvents:g&&g.handleMouseEvents};return A=ii(this,A),vt(this,A,A,S,"bookmark")},findMarksAt:function(A){A=ii(this,A);var g=[],S=wr(this,A.line).markedSpans;if(S)for(var E=0;E<S.length;++E){var R=S[E];(R.from==null||R.from<=A.ch)&&(R.to==null||R.to>=A.ch)&&g.push(R.marker.parent||R.marker)}return g},findMarks:function(A,g,S){A=ii(this,A),g=ii(this,g);var E=[],R=A.line;return this.iter(A.line,g.line+1,function(Z){var Ae=Z.markedSpans;if(Ae)for(var Ce=0;Ce<Ae.length;Ce++){var Ie=Ae[Ce];!(Ie.to!=null&&R==A.line&&A.ch>=Ie.to||Ie.from==null&&R!=A.line||Ie.from!=null&&R==g.line&&Ie.from>=g.ch)&&(!S||S(Ie.marker))&&E.push(Ie.marker.parent||Ie.marker)}++R}),E},getAllMarks:function(){var A=[];return this.iter(function(g){var S=g.markedSpans;if(S)for(var E=0;E<S.length;++E)S[E].from!=null&&A.push(S[E].marker)}),A},posFromIndex:function(A){var g,S=this.first,E=this.lineSeparator().length;return this.iter(function(R){var Z=R.text.length+E;if(Z>A)return g=A,!0;A-=Z,++S}),ii(this,fn(S,g))},indexFromPos:function(A){A=ii(this,A);var g=A.ch;if(A.line<this.first||A.ch<0)return 0;var S=this.lineSeparator().length;return this.iter(this.first,A.line,function(E){g+=E.text.length+S}),g},copy:function(A){var g=new Zt(Ss(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return g.scrollTop=this.scrollTop,g.scrollLeft=this.scrollLeft,g.sel=this.sel,g.extend=!1,A&&(g.history.undoDepth=this.history.undoDepth,g.setHistory(this.getHistory())),g},linkedDoc:function(A){A||(A={});var g=this.first,S=this.first+this.size;A.from!=null&&A.from>g&&(g=A.from),A.to!=null&&A.to<S&&(S=A.to);var E=new Zt(Ss(this,g,S),A.mode||this.modeOption,g,this.lineSep,this.direction);return A.sharedHist&&(E.history=this.history),(this.linked||(this.linked=[])).push({doc:E,sharedHist:A.sharedHist}),E.linked=[{doc:this,isParent:!0,sharedHist:A.sharedHist}],Ut(E,Rt(this)),E},unlinkDoc:function(A){if(A instanceof Ho&&(A=A.doc),this.linked)for(var g=0;g<this.linked.length;++g){var S=this.linked[g];if(S.doc==A){this.linked.splice(g,1),A.unlinkDoc(this),It(Rt(this));break}}if(A.history==this.history){var E=[A.id];Da(A,function(R){return E.push(R.id)},!0),A.history=new ei(null),A.history.done=Zu(this.history.done,E),A.history.undone=Zu(this.history.undone,E)}},iterLinkedDocs:function(A){Da(this,A)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(A){return this.lineSep?A.split(this.lineSep):ri(A)},lineSeparator:function(){return this.lineSep||`
`},setDirection:ta(function(A){A!="rtl"&&(A="ltr"),A!=this.direction&&(this.direction=A,this.iter(function(g){return g.order=null}),this.cm&&Kr(this.cm))})}),Zt.prototype.eachLine=Zt.prototype.iter;var Mn=0;function En(A){var g=this;if(zn(g),!(dt(g,A)||EA(g.display,A))){on(A),f&&(Mn=+new Date);var S=cA(g,A,!0),E=A.dataTransfer.files;if(!(!S||g.isReadOnly()))if(E&&E.length&&window.FileReader&&window.File)for(var R=E.length,Z=Array(R),Ae=0,Ce=function(){++Ae==R&&gi(g,function(){S=ii(g.doc,S);var Qt={from:S,to:S,text:g.doc.splitLines(Z.filter(function(xn){return xn!=null}).join(g.doc.lineSeparator())),origin:"paste"};I(g.doc,Qt),xu(g.doc,Ma(ii(g.doc,S),ii(g.doc,Ra(Qt))))})()},Ie=function(Qt,xn){if(g.options.allowDropFileTypes&&it(g.options.allowDropFileTypes,Qt.type)==-1){Ce();return}var Fn=new FileReader;Fn.onerror=function(){return Ce()},Fn.onload=function(){var Ar=Fn.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(Ar)){Ce();return}Z[xn]=Ar,Ce()},Fn.readAsText(Qt)},je=0;je<E.length;je++)Ie(E[je],je);else{if(g.state.draggingText&&g.doc.sel.contains(S)>-1){g.state.draggingText(A),setTimeout(function(){return g.display.input.focus()},20);return}try{var gt=A.dataTransfer.getData("Text");if(gt){var Mt;if(g.state.draggingText&&!g.state.draggingText.copy&&(Mt=g.listSelections()),Qs(g.doc,Ma(S,S)),Mt)for(var Xt=0;Xt<Mt.length;++Xt)z(g.doc,"",Mt[Xt].anchor,Mt[Xt].head,"drag");g.replaceSelection(gt,"around","paste"),g.display.input.focus()}}catch{}}}}function bn(A,g){if(f&&(!A.state.draggingText||+new Date-Mn<100)){rr(g);return}if(!(dt(A,g)||EA(A.display,g))&&(g.dataTransfer.setData("Text",A.getSelection()),g.dataTransfer.effectAllowed="copyMove",g.dataTransfer.setDragImage&&!j)){var S=xe("img",null,null,"position: fixed; left: 0; top: 0;");S.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",U&&(S.width=S.height=1,A.display.wrapper.appendChild(S),S._top=S.offsetTop),g.dataTransfer.setDragImage(S,0,0),U&&S.parentNode.removeChild(S)}}function On(A,g){var S=cA(A,g);if(S){var E=document.createDocumentFragment();Qc(A,S,E),A.display.dragCursor||(A.display.dragCursor=xe("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),A.display.lineSpace.insertBefore(A.display.dragCursor,A.display.cursorDiv)),Ke(A.display.dragCursor,E)}}function zn(A){A.display.dragCursor&&(A.display.lineSpace.removeChild(A.display.dragCursor),A.display.dragCursor=null)}function Ln(A){if(document.getElementsByClassName){for(var g=document.getElementsByClassName("CodeMirror"),S=[],E=0;E<g.length;E++){var R=g[E].CodeMirror;R&&S.push(R)}S.length&&S[0].operation(function(){for(var Z=0;Z<S.length;Z++)A(S[Z])})}}var Tr=!1;function Zr(){Tr||(Xi(),Tr=!0)}function Xi(){var A;Fe(window,"resize",function(){A==null&&(A=setTimeout(function(){A=null,Ln(_o)},100))}),Fe(window,"blur",function(){return Ln(cs)})}function _o(A){var g=A.display;g.cachedCharWidth=g.cachedTextHeight=g.cachedPaddingH=null,g.scrollbarsClipped=!1,A.setSize()}for(var ki={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},os=0;os<10;os++)ki[os+48]=ki[os+96]=String(os);for(var Yo=65;Yo<=90;Yo++)ki[Yo]=String.fromCharCode(Yo);for(var Ao=1;Ao<=12;Ao++)ki[Ao+111]=ki[Ao+63235]="F"+Ao;var po={};po.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},po.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},po.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},po.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},po.default=V?po.macDefault:po.pcDefault;function Fa(A){var g=A.split(/-(?!$)/);A=g[g.length-1];for(var S,E,R,Z,Ae=0;Ae<g.length-1;Ae++){var Ce=g[Ae];if(/^(cmd|meta|m)$/i.test(Ce))Z=!0;else if(/^a(lt)?$/i.test(Ce))S=!0;else if(/^(c|ctrl|control)$/i.test(Ce))E=!0;else if(/^s(hift)?$/i.test(Ce))R=!0;else throw new Error("Unrecognized modifier name: "+Ce)}return S&&(A="Alt-"+A),E&&(A="Ctrl-"+A),Z&&(A="Cmd-"+A),R&&(A="Shift-"+A),A}function ss(A){var g={};for(var S in A)if(A.hasOwnProperty(S)){var E=A[S];if(/^(name|fallthrough|(de|at)tach)$/.test(S))continue;if(E=="..."){delete A[S];continue}for(var R=Pn(S.split(" "),Fa),Z=0;Z<R.length;Z++){var Ae=void 0,Ce=void 0;Z==R.length-1?(Ce=R.join(" "),Ae=E):(Ce=R.slice(0,Z+1).join(" "),Ae="...");var Ie=g[Ce];if(!Ie)g[Ce]=Ae;else if(Ie!=Ae)throw new Error("Inconsistent bindings for "+Ce)}delete A[S]}for(var je in g)A[je]=g[je];return A}function es(A,g,S,E){g=_l(g);var R=g.call?g.call(A,E):g[A];if(R===!1)return"nothing";if(R==="...")return"multi";if(R!=null&&S(R))return"handled";if(g.fallthrough){if(Object.prototype.toString.call(g.fallthrough)!="[object Array]")return es(A,g.fallthrough,S,E);for(var Z=0;Z<g.fallthrough.length;Z++){var Ae=es(A,g.fallthrough[Z],S,E);if(Ae)return Ae}}}function wa(A){var g=typeof A=="string"?A:ki[A.keyCode];return g=="Ctrl"||g=="Alt"||g=="Shift"||g=="Mod"}function DA(A,g,S){var E=A;return g.altKey&&E!="Alt"&&(A="Alt-"+A),(he?g.metaKey:g.ctrlKey)&&E!="Ctrl"&&(A="Ctrl-"+A),(he?g.ctrlKey:g.metaKey)&&E!="Mod"&&(A="Cmd-"+A),!S&&g.shiftKey&&E!="Shift"&&(A="Shift-"+A),A}function wu(A,g){if(U&&A.keyCode==34&&A.char)return!1;var S=ki[A.keyCode];return S==null||A.altGraphKey?!1:(A.keyCode==3&&A.code&&(S=A.code),DA(S,A,g))}function _l(A){return typeof A=="string"?po[A]:A}function La(A,g){for(var S=A.doc.sel.ranges,E=[],R=0;R<S.length;R++){for(var Z=g(S[R]);E.length&&ur(Z.from,dr(E).to)<=0;){var Ae=E.pop();if(ur(Ae.from,Z.from)<0){Z.from=Ae.from;break}}E.push(Z)}_s(A,function(){for(var Ce=E.length-1;Ce>=0;Ce--)z(A.doc,"",E[Ce].from,E[Ce].to,"+delete");ms(A)})}function Xu(A,g,S){var E=wt(A.text,g+S,S);return E<0||E>A.text.length?null:E}function pA(A,g,S){var E=Xu(A,g.ch,S);return E==null?null:new fn(g.line,E,S<0?"after":"before")}function mA(A,g,S,E,R){if(A){g.doc.direction=="rtl"&&(R=-R);var Z=ve(S,g.doc.direction);if(Z){var Ae=R<0?dr(Z):Z[0],Ce=R<0==(Ae.level==1),Ie=Ce?"after":"before",je;if(Ae.level>0||g.doc.direction=="rtl"){var gt=tl(g,S);je=R<0?S.text.length-1:0;var Mt=oa(g,gt,je).top;je=Ht(function(Xt){return oa(g,gt,Xt).top==Mt},R<0==(Ae.level==1)?Ae.from:Ae.to-1,je),Ie=="before"&&(je=Xu(S,je,1))}else je=R<0?Ae.to:Ae.from;return new fn(E,je,Ie)}}return new fn(E,R<0?S.text.length:0,R<0?"before":"after")}function Sa(A,g,S,E){var R=ve(g,A.doc.direction);if(!R)return pA(g,S,E);S.ch>=g.text.length?(S.ch=g.text.length,S.sticky="before"):S.ch<=0&&(S.ch=0,S.sticky="after");var Z=Ve(R,S.ch,S.sticky),Ae=R[Z];if(A.doc.direction=="ltr"&&Ae.level%2==0&&(E>0?Ae.to>S.ch:Ae.from<S.ch))return pA(g,S,E);var Ce=function(tr,gr){return Xu(g,tr instanceof fn?tr.ch:tr,gr)},Ie,je=function(tr){return A.options.lineWrapping?(Ie=Ie||tl(A,g),Jo(A,g,Ie,tr)):{begin:0,end:g.text.length}},gt=je(S.sticky=="before"?Ce(S,-1):S.ch);if(A.doc.direction=="rtl"||Ae.level==1){var Mt=Ae.level==1==E<0,Xt=Ce(S,Mt?1:-1);if(Xt!=null&&(Mt?Xt<=Ae.to&&Xt<=gt.end:Xt>=Ae.from&&Xt>=gt.begin)){var Qt=Mt?"before":"after";return new fn(S.line,Xt,Qt)}}var xn=function(tr,gr,yr){for(var Rr=function(Bo,Na){return Na?new fn(S.line,Ce(Bo,1),"before"):new fn(S.line,Bo,"after")};tr>=0&&tr<R.length;tr+=gr){var ti=R[tr],jr=gr>0==(ti.level!=1),Ji=jr?yr.begin:Ce(yr.end,-1);if(ti.from<=Ji&&Ji<ti.to||(Ji=jr?ti.from:Ce(ti.to,-1),yr.begin<=Ji&&Ji<yr.end))return Rr(Ji,jr)}},Fn=xn(Z+E,E,gt);if(Fn)return Fn;var Ar=E>0?gt.end:Ce(gt.begin,-1);return Ar!=null&&!(E>0&&Ar==g.text.length)&&(Fn=xn(E>0?0:R.length-1,E,je(Ar)),Fn)?Fn:null}var lu={selectAll:jl,singleSelection:function(A){return A.setSelection(A.getCursor("anchor"),A.getCursor("head"),Lt)},killLine:function(A){return La(A,function(g){if(g.empty()){var S=wr(A.doc,g.head.line).text.length;return g.head.ch==S&&g.head.line<A.lastLine()?{from:g.head,to:fn(g.head.line+1,0)}:{from:g.head,to:fn(g.head.line,S)}}else return{from:g.from(),to:g.to()}})},deleteLine:function(A){return La(A,function(g){return{from:fn(g.from().line,0),to:ii(A.doc,fn(g.to().line+1,0))}})},delLineLeft:function(A){return La(A,function(g){return{from:fn(g.from().line,0),to:g.from()}})},delWrappedLineLeft:function(A){return La(A,function(g){var S=A.charCoords(g.head,"div").top+5,E=A.coordsChar({left:0,top:S},"div");return{from:E,to:g.from()}})},delWrappedLineRight:function(A){return La(A,function(g){var S=A.charCoords(g.head,"div").top+5,E=A.coordsChar({left:A.display.lineDiv.offsetWidth+100,top:S},"div");return{from:g.from(),to:E}})},undo:function(A){return A.undo()},redo:function(A){return A.redo()},undoSelection:function(A){return A.undoSelection()},redoSelection:function(A){return A.redoSelection()},goDocStart:function(A){return A.extendSelection(fn(A.firstLine(),0))},goDocEnd:function(A){return A.extendSelection(fn(A.lastLine()))},goLineStart:function(A){return A.extendSelectionsBy(function(g){return Ua(A,g.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(A){return A.extendSelectionsBy(function(g){return hs(A,g.head)},{origin:"+move",bias:1})},goLineEnd:function(A){return A.extendSelectionsBy(function(g){return gA(A,g.head.line)},{origin:"+move",bias:-1})},goLineRight:function(A){return A.extendSelectionsBy(function(g){var S=A.cursorCoords(g.head,"div").top+5;return A.coordsChar({left:A.display.lineDiv.offsetWidth+100,top:S},"div")},Kt)},goLineLeft:function(A){return A.extendSelectionsBy(function(g){var S=A.cursorCoords(g.head,"div").top+5;return A.coordsChar({left:0,top:S},"div")},Kt)},goLineLeftSmart:function(A){return A.extendSelectionsBy(function(g){var S=A.cursorCoords(g.head,"div").top+5,E=A.coordsChar({left:0,top:S},"div");return E.ch<A.getLine(E.line).search(/\S/)?hs(A,g.head):E},Kt)},goLineUp:function(A){return A.moveV(-1,"line")},goLineDown:function(A){return A.moveV(1,"line")},goPageUp:function(A){return A.moveV(-1,"page")},goPageDown:function(A){return A.moveV(1,"page")},goCharLeft:function(A){return A.moveH(-1,"char")},goCharRight:function(A){return A.moveH(1,"char")},goColumnLeft:function(A){return A.moveH(-1,"column")},goColumnRight:function(A){return A.moveH(1,"column")},goWordLeft:function(A){return A.moveH(-1,"word")},goGroupRight:function(A){return A.moveH(1,"group")},goGroupLeft:function(A){return A.moveH(-1,"group")},goWordRight:function(A){return A.moveH(1,"word")},delCharBefore:function(A){return A.deleteH(-1,"codepoint")},delCharAfter:function(A){return A.deleteH(1,"char")},delWordBefore:function(A){return A.deleteH(-1,"word")},delWordAfter:function(A){return A.deleteH(1,"word")},delGroupBefore:function(A){return A.deleteH(-1,"group")},delGroupAfter:function(A){return A.deleteH(1,"group")},indentAuto:function(A){return A.indentSelection("smart")},indentMore:function(A){return A.indentSelection("add")},indentLess:function(A){return A.indentSelection("subtract")},insertTab:function(A){return A.replaceSelection("	")},insertSoftTab:function(A){for(var g=[],S=A.listSelections(),E=A.options.tabSize,R=0;R<S.length;R++){var Z=S[R].from(),Ae=Pe(A.getLine(Z.line),Z.ch,E);g.push(tn(E-Ae%E))}A.replaceSelections(g)},defaultTab:function(A){A.somethingSelected()?A.indentSelection("add"):A.execCommand("insertTab")},transposeChars:function(A){return _s(A,function(){for(var g=A.listSelections(),S=[],E=0;E<g.length;E++)if(g[E].empty()){var R=g[E].head,Z=wr(A.doc,R.line).text;if(Z){if(R.ch==Z.length&&(R=new fn(R.line,R.ch-1)),R.ch>0)R=new fn(R.line,R.ch+1),A.replaceRange(Z.charAt(R.ch-1)+Z.charAt(R.ch-2),fn(R.line,R.ch-2),R,"+transpose");else if(R.line>A.doc.first){var Ae=wr(A.doc,R.line-1).text;Ae&&(R=new fn(R.line,1),A.replaceRange(Z.charAt(0)+A.doc.lineSeparator()+Ae.charAt(Ae.length-1),fn(R.line-1,Ae.length-1),R,"+transpose"))}}S.push(new So(R,R))}A.setSelections(S)})},newlineAndIndent:function(A){return _s(A,function(){for(var g=A.listSelections(),S=g.length-1;S>=0;S--)A.replaceRange(A.doc.lineSeparator(),g[S].anchor,g[S].head,"+input");g=A.listSelections();for(var E=0;E<g.length;E++)A.indentLine(g[E].from().line,null,!0);ms(A)})},openLine:function(A){return A.replaceSelection(`
`,"start")},toggleOverwrite:function(A){return A.toggleOverwrite()}};function Ua(A,g){var S=wr(A.doc,g),E=Ir(S);return E!=S&&(g=Ye(E)),mA(!0,A,E,g,1)}function gA(A,g){var S=wr(A.doc,g),E=Pr(S);return E!=S&&(g=Ye(E)),mA(!0,A,S,g,-1)}function hs(A,g){var S=Ua(A,g.line),E=wr(A.doc,S.line),R=ve(E,A.doc.direction);if(!R||R[0].level==0){var Z=Math.max(S.ch,E.text.search(/\S/)),Ae=g.line==S.line&&g.ch<=Z&&g.ch;return fn(S.line,Ae?0:Z,S.sticky)}return S}function zo(A,g,S){if(typeof g=="string"&&(g=lu[g],!g))return!1;A.display.input.ensurePolled();var E=A.display.shift,R=!1;try{A.isReadOnly()&&(A.state.suppressEdits=!0),S&&(A.display.shift=!1),R=g(A)!=pt}finally{A.display.shift=E,A.state.suppressEdits=!1}return R}function za(A,g,S){for(var E=0;E<A.state.keyMaps.length;E++){var R=es(g,A.state.keyMaps[E],S,A);if(R)return R}return A.options.extraKeys&&es(g,A.options.extraKeys,S,A)||es(g,A.options.keyMap,S,A)}var ja=new Be;function yA(A,g,S,E){var R=A.state.keySeq;if(R){if(wa(g))return"handled";if(/\'$/.test(g)?A.state.keySeq=null:ja.set(50,function(){A.state.keySeq==R&&(A.state.keySeq=null,A.display.input.reset())}),zf(A,R+" "+g,S,E))return!0}return zf(A,g,S,E)}function zf(A,g,S,E){var R=za(A,g,E);return R=="multi"&&(A.state.keySeq=g),R=="handled"&&Gs(A,"keyHandled",A,g,S),(R=="handled"||R=="multi")&&(on(S),gu(A)),!!R}function Eh(A,g){var S=wu(g,!0);return S?g.shiftKey&&!A.state.keySeq?yA(A,"Shift-"+S,g,function(E){return zo(A,E,!0)})||yA(A,S,g,function(E){if(typeof E=="string"?/^go[A-Z]/.test(E):E.motion)return zo(A,E)}):yA(A,S,g,function(E){return zo(A,E)}):!1}function jf(A,g,S){return yA(A,"'"+S+"'",g,function(E){return zo(A,E,!0)})}var Bh=null;function cc(A){var g=this;if(!(A.target&&A.target!=g.display.input.getField())&&(g.curOp.focus=Ne(Yt(g)),!dt(g,A))){f&&y<11&&A.keyCode==27&&(A.returnValue=!1);var S=A.keyCode;g.display.shift=S==16||A.shiftKey;var E=Eh(g,A);U&&(Bh=E?S:null,!E&&S==88&&!ka&&(V?A.metaKey:A.ctrlKey)&&g.replaceSelection("",null,"cut")),i&&!V&&!E&&S==46&&A.shiftKey&&!A.ctrlKey&&document.execCommand&&document.execCommand("cut"),S==18&&!/\bCodeMirror-crosshair\b/.test(g.display.lineDiv.className)&&Ts(g)}}function Ts(A){var g=A.display.lineDiv;we(g,"CodeMirror-crosshair");function S(E){(E.keyCode==18||!E.altKey)&&(me(g,"CodeMirror-crosshair"),rt(document,"keyup",S),rt(document,"mouseover",S))}Fe(document,"keyup",S),Fe(document,"mouseover",S)}function Su(A){A.keyCode==16&&(this.doc.sel.shift=!1),dt(this,A)}function Jd(A){var g=this;if(!(A.target&&A.target!=g.display.input.getField())&&!(EA(g.display,A)||dt(g,A)||A.ctrlKey&&!A.altKey||V&&A.metaKey)){var S=A.keyCode,E=A.charCode;if(U&&S==Bh){Bh=null,on(A);return}if(!(U&&(!A.which||A.which<10)&&Eh(g,A))){var R=String.fromCharCode(E??S);R!="\b"&&(jf(g,A,R)||g.display.input.onKeyPress(A))}}}var af=400,kc=function(A,g,S){this.time=A,this.pos=g,this.button=S};kc.prototype.compare=function(A,g,S){return this.time+af>A&&ur(g,this.pos)==0&&S==this.button};var FA,ll;function xp(A,g){var S=+new Date;return ll&&ll.compare(S,A,g)?(FA=ll=null,"triple"):FA&&FA.compare(S,A,g)?(ll=new kc(S,A,g),FA=null,"double"):(FA=new kc(S,A,g),ll=null,"single")}function Oh(A){var g=this,S=g.display;if(!(dt(g,A)||S.activeTouch&&S.input.supportsTouch())){if(S.input.ensurePolled(),S.shift=A.shiftKey,EA(S,A)){x||(S.scroller.draggable=!1,setTimeout(function(){return S.scroller.draggable=!0},100));return}if(!ed(g,A)){var E=cA(g,A),R=Jn(A),Z=E?xp(E,R):"single";Ft(g).focus(),R==1&&g.state.selectingText&&g.state.selectingText(A),!(E&&lm(g,R,E,Z,A))&&(R==1?E?Ih(g,E,Z,A):Br(A)==S.scroller&&on(A):R==2?(E&&Oc(g.doc,E),setTimeout(function(){return S.input.focus()},20)):R==3&&(fe?g.display.input.onContextMenu(A):qc(g)))}}}function lm(A,g,S,E,R){var Z="Click";return E=="double"?Z="Double"+Z:E=="triple"&&(Z="Triple"+Z),Z=(g==1?"Left":g==2?"Middle":"Right")+Z,yA(A,DA(Z,R),R,function(Ae){if(typeof Ae=="string"&&(Ae=lu[Ae]),!Ae)return!1;var Ce=!1;try{A.isReadOnly()&&(A.state.suppressEdits=!0),Ce=Ae(A,S)!=pt}finally{A.state.suppressEdits=!1}return Ce})}function Ed(A,g,S){var E=A.getOption("configureMouse"),R=E?E(A,g,S):{};if(R.unit==null){var Z=ne?S.shiftKey&&S.metaKey:S.altKey;R.unit=Z?"rectangle":g=="single"?"char":g=="double"?"word":"line"}return(R.extend==null||A.doc.extend)&&(R.extend=A.doc.extend||S.shiftKey),R.addNew==null&&(R.addNew=V?S.metaKey:S.ctrlKey),R.moveOnDrag==null&&(R.moveOnDrag=!(V?S.altKey:S.ctrlKey)),R}function Ih(A,g,S,E){f?setTimeout(Pt(nc,A),0):A.curOp.focus=Ne(Yt(A));var R=Ed(A,S,E),Z=A.doc.sel,Ae;A.options.dragDrop&&un&&!A.isReadOnly()&&S=="single"&&(Ae=Z.contains(g))>-1&&(ur((Ae=Z.ranges[Ae]).from(),g)<0||g.xRel>0)&&(ur(Ae.to(),g)>0||g.xRel<0)?Mp(A,E,g,R):wp(A,E,g,R)}function Mp(A,g,S,E){var R=A.display,Z=!1,Ae=gi(A,function(je){x&&(R.scroller.draggable=!1),A.state.draggingText=!1,A.state.delayingBlurEvent&&(A.hasFocus()?A.state.delayingBlurEvent=!1:qc(A)),rt(R.wrapper.ownerDocument,"mouseup",Ae),rt(R.wrapper.ownerDocument,"mousemove",Ce),rt(R.scroller,"dragstart",Ie),rt(R.scroller,"drop",Ae),Z||(on(je),E.addNew||Oc(A.doc,S,null,null,E.extend),x&&!j||f&&y==9?setTimeout(function(){R.wrapper.ownerDocument.body.focus({preventScroll:!0}),R.input.focus()},20):R.input.focus())}),Ce=function(je){Z=Z||Math.abs(g.clientX-je.clientX)+Math.abs(g.clientY-je.clientY)>=10},Ie=function(){return Z=!0};x&&(R.scroller.draggable=!0),A.state.draggingText=Ae,Ae.copy=!E.moveOnDrag,Fe(R.wrapper.ownerDocument,"mouseup",Ae),Fe(R.wrapper.ownerDocument,"mousemove",Ce),Fe(R.scroller,"dragstart",Ie),Fe(R.scroller,"drop",Ae),A.state.delayingBlurEvent=!0,setTimeout(function(){return R.input.focus()},20),R.scroller.dragDrop&&R.scroller.dragDrop()}function LA(A,g,S){if(S=="char")return new So(g,g);if(S=="word")return A.findWordAt(g);if(S=="line")return new So(fn(g.line,0),ii(A.doc,fn(g.line+1,0)));var E=S(A,g);return new So(E.from,E.to)}function wp(A,g,S,E){f&&qc(A);var R=A.display,Z=A.doc;on(g);var Ae,Ce,Ie=Z.sel,je=Ie.ranges;if(E.addNew&&!E.extend?(Ce=Z.sel.contains(S),Ce>-1?Ae=je[Ce]:Ae=new So(S,S)):(Ae=Z.sel.primary(),Ce=Z.sel.primIndex),E.unit=="rectangle")E.addNew||(Ae=new So(S,S)),S=cA(A,g,!0,!0),Ce=-1;else{var gt=LA(A,S,E.unit);E.extend?Ae=ks(Ae,gt.anchor,gt.head,E.extend):Ae=gt}E.addNew?Ce==-1?(Ce=je.length,ha(Z,_u(A,je.concat([Ae]),Ce),{scroll:!1,origin:"*mouse"})):je.length>1&&je[Ce].empty()&&E.unit=="char"&&!E.extend?(ha(Z,_u(A,je.slice(0,Ce).concat(je.slice(Ce+1)),0),{scroll:!1,origin:"*mouse"}),Ie=Z.sel):Cl(Z,Ce,Ae,nn):(Ce=0,ha(Z,new ds([Ae],0),nn),Ie=Z.sel);var Mt=S;function Xt(yr){if(ur(Mt,yr)!=0)if(Mt=yr,E.unit=="rectangle"){for(var Rr=[],ti=A.options.tabSize,jr=Pe(wr(Z,S.line).text,S.ch,ti),Ji=Pe(wr(Z,yr.line).text,yr.ch,ti),Bo=Math.min(jr,Ji),Na=Math.max(jr,Ji),na=Math.min(S.line,yr.line),fa=Math.min(A.lastLine(),Math.max(S.line,yr.line));na<=fa;na++){var Wa=wr(Z,na).text,Ga=vn(Wa,Bo,ti);Bo==Na?Rr.push(new So(fn(na,Ga),fn(na,Ga))):Wa.length>Ga&&Rr.push(new So(fn(na,Ga),fn(na,vn(Wa,Na,ti))))}Rr.length||Rr.push(new So(S,S)),ha(Z,_u(A,Ie.ranges.slice(0,Ce).concat(Rr),Ce),{origin:"*mouse",scroll:!1}),A.scrollIntoView(yr)}else{var Wl=Ae,Qa=LA(A,yr,E.unit),pa=Wl.anchor,as;ur(Qa.anchor,pa)>0?(as=Qa.head,pa=ua(Wl.from(),Qa.anchor)):(as=Qa.anchor,pa=rs(Wl.to(),Qa.head));var Ci=Ie.ranges.slice(0);Ci[Ce]=Jc(A,new So(ii(Z,pa),as)),ha(Z,_u(A,Ci,Ce),nn)}}var Qt=R.wrapper.getBoundingClientRect(),xn=0;function Fn(yr){var Rr=++xn,ti=cA(A,yr,!0,E.unit=="rectangle");if(ti)if(ur(ti,Mt)!=0){A.curOp.focus=Ne(Yt(A)),Xt(ti);var jr=yu(R,Z);(ti.line>=jr.to||ti.line<jr.from)&&setTimeout(gi(A,function(){xn==Rr&&Fn(yr)}),150)}else{var Ji=yr.clientY<Qt.top?-20:yr.clientY>Qt.bottom?20:0;Ji&&setTimeout(gi(A,function(){xn==Rr&&(R.scroller.scrollTop+=Ji,Fn(yr))}),50)}}function Ar(yr){A.state.selectingText=!1,xn=1/0,yr&&(on(yr),R.input.focus()),rt(R.wrapper.ownerDocument,"mousemove",tr),rt(R.wrapper.ownerDocument,"mouseup",gr),Z.history.lastSelOrigin=null}var tr=gi(A,function(yr){yr.buttons===0||!Jn(yr)?Ar(yr):Fn(yr)}),gr=gi(A,Ar);A.state.selectingText=gr,Fe(R.wrapper.ownerDocument,"mousemove",tr),Fe(R.wrapper.ownerDocument,"mouseup",gr)}function Jc(A,g){var S=g.anchor,E=g.head,R=wr(A.doc,S.line);if(ur(S,E)==0&&S.sticky==E.sticky)return g;var Z=ve(R);if(!Z)return g;var Ae=Ve(Z,S.ch,S.sticky),Ce=Z[Ae];if(Ce.from!=S.ch&&Ce.to!=S.ch)return g;var Ie=Ae+(Ce.from==S.ch==(Ce.level!=1)?0:1);if(Ie==0||Ie==Z.length)return g;var je;if(E.line!=S.line)je=(E.line-S.line)*(A.doc.direction=="ltr"?1:-1)>0;else{var gt=Ve(Z,E.ch,E.sticky),Mt=gt-Ae||(E.ch-S.ch)*(Ce.level==1?-1:1);gt==Ie-1||gt==Ie?je=Mt<0:je=Mt>0}var Xt=Z[Ie+(je?-1:0)],Qt=je==(Xt.level==1),xn=Qt?Xt.from:Xt.to,Fn=Qt?"after":"before";return S.ch==xn&&S.sticky==Fn?g:new So(new fn(S.line,xn,Fn),E)}function lf(A,g,S,E){var R,Z;if(g.touches)R=g.touches[0].clientX,Z=g.touches[0].clientY;else try{R=g.clientX,Z=g.clientY}catch{return!1}if(R>=Math.floor(A.display.gutters.getBoundingClientRect().right))return!1;E&&on(g);var Ae=A.display,Ce=Ae.lineDiv.getBoundingClientRect();if(Z>Ce.bottom||!Gt(A,S))return Dn(g);Z-=Ce.top-Ae.viewOffset;for(var Ie=0;Ie<A.display.gutterSpecs.length;++Ie){var je=Ae.gutters.childNodes[Ie];if(je&&je.getBoundingClientRect().right>=R){var gt=xt(A.doc,Z),Mt=A.display.gutterSpecs[Ie];return ct(A,S,A,gt,Mt.className,g),Dn(g)}}}function ed(A,g){return lf(A,g,"gutterClick",!0)}function uf(A,g){EA(A.display,g)||Af(A,g)||dt(A,g,"contextmenu")||fe||A.display.input.onContextMenu(g)}function Af(A,g){return Gt(A,"gutterContextMenu")?lf(A,g,"gutterContextMenu",!1):!1}function um(A){A.display.wrapper.className=A.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+A.options.theme.replace(/(^|\s)\s*/g," cm-s-"),md(A)}var eh={toString:function(){return"CodeMirror.Init"}},cf={},El={};function Nl(A){var g=A.optionHandlers;function S(E,R,Z,Ae){A.defaults[E]=R,Z&&(g[E]=Ae?function(Ce,Ie,je){je!=eh&&Z(Ce,Ie,je)}:Z)}A.defineOption=S,A.Init=eh,S("value","",function(E,R){return E.setValue(R)},!0),S("mode",null,function(E,R){E.doc.modeOption=R,Sd(E)},!0),S("indentUnit",2,Sd,!0),S("indentWithTabs",!1),S("smartIndent",!0),S("tabSize",4,function(E){KA(E),md(E),Ll(E)},!0),S("lineSeparator",null,function(E,R){if(E.doc.lineSep=R,!!R){var Z=[],Ae=E.doc.first;E.doc.iter(function(Ie){for(var je=0;;){var gt=Ie.text.indexOf(R,je);if(gt==-1)break;je=gt+R.length,Z.push(fn(Ae,gt))}Ae++});for(var Ce=Z.length-1;Ce>=0;Ce--)z(E.doc,R,Z[Ce],fn(Z[Ce].line,Z[Ce].ch+R.length))}}),S("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\u202d\u202e\u2066\u2067\u2069\ufeff\ufff9-\ufffc]/g,function(E,R,Z){E.state.specialChars=new RegExp(R.source+(R.test("	")?"":"|	"),"g"),Z!=eh&&E.refresh()}),S("specialCharPlaceholder",du,function(E){return E.refresh()},!0),S("electricChars",!0),S("inputStyle",re?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),S("spellcheck",!1,function(E,R){return E.getInputField().spellcheck=R},!0),S("autocorrect",!1,function(E,R){return E.getInputField().autocorrect=R},!0),S("autocapitalize",!1,function(E,R){return E.getInputField().autocapitalize=R},!0),S("rtlMoveVisually",!G),S("wholeLineUpdateBefore",!0),S("theme","default",function(E){um(E),Mi(E)},!0),S("keyMap","default",function(E,R,Z){var Ae=_l(R),Ce=Z!=eh&&_l(Z);Ce&&Ce.detach&&Ce.detach(E,Ae),Ae.attach&&Ae.attach(E,Ce||null)}),S("extraKeys",null),S("configureMouse",null),S("lineWrapping",!1,Nf,!0),S("gutters",[],function(E,R){E.display.gutterSpecs=yl(R,E.options.lineNumbers),Mi(E)},!0),S("fixedGutter",!0,function(E,R){E.display.gutters.style.left=R?Yr(E.display)+"px":"0",E.refresh()},!0),S("coverGutterNextToScrollbar",!1,function(E){return Qu(E)},!0),S("scrollbarStyle","native",function(E){Zd(E),Qu(E),E.display.scrollbars.setScrollTop(E.doc.scrollTop),E.display.scrollbars.setScrollLeft(E.doc.scrollLeft)},!0),S("lineNumbers",!1,function(E,R){E.display.gutterSpecs=yl(E.options.gutters,R),Mi(E)},!0),S("firstLineNumber",1,Mi,!0),S("lineNumberFormatter",function(E){return E},Mi,!0),S("showCursorWhenSelecting",!1,Ca,!0),S("resetSelectionOnContextMenu",!0),S("lineWiseCopyCut",!0),S("pasteLinesPerSelection",!0),S("selectionsMayTouch",!1),S("readOnly",!1,function(E,R){R=="nocursor"&&(cs(E),E.display.input.blur()),E.display.input.readOnlyChanged(R)}),S("screenReaderLabel",null,function(E,R){R=R===""?null:R,E.display.input.screenReaderLabelChanged(R)}),S("disableInput",!1,function(E,R){R||E.display.input.reset()},!0),S("dragDrop",!0,Qm),S("allowDropFileTypes",null),S("cursorBlinkRate",530),S("cursorScrollMargin",0),S("cursorHeight",1,Ca,!0),S("singleCursorHeightPerLine",!0,Ca,!0),S("workTime",100),S("workDelay",100),S("flattenSpans",!0,KA,!0),S("addModeClass",!1,KA,!0),S("pollInterval",100),S("undoDepth",200,function(E,R){return E.doc.history.undoDepth=R}),S("historyEventDelay",1250),S("viewportMargin",10,function(E){return E.refresh()},!0),S("maxHighlightLength",1e4,KA,!0),S("moveInputWithCursor",!0,function(E,R){R||E.display.input.resetPosition()}),S("tabindex",null,function(E,R){return E.display.input.getField().tabIndex=R||""}),S("autofocus",null),S("direction","ltr",function(E,R){return E.doc.setDirection(R)},!0),S("phrases",null)}function Qm(A,g,S){var E=S&&S!=eh;if(!g!=!E){var R=A.display.dragFunctions,Z=g?Fe:rt;Z(A.display.scroller,"dragstart",R.start),Z(A.display.scroller,"dragenter",R.enter),Z(A.display.scroller,"dragover",R.over),Z(A.display.scroller,"dragleave",R.leave),Z(A.display.scroller,"drop",R.drop)}}function Nf(A){A.options.lineWrapping?(we(A.display.wrapper,"CodeMirror-wrap"),A.display.sizer.style.minWidth="",A.display.sizerWidth=null):(me(A.display.wrapper,"CodeMirror-wrap"),ca(A)),$d(A),Ll(A),md(A),setTimeout(function(){return Qu(A)},100)}function Ho(A,g){var S=this;if(!(this instanceof Ho))return new Ho(A,g);this.options=g=g?Ue(g):{},Ue(cf,g,!1);var E=g.value;typeof E=="string"?E=new Zt(E,g.mode,null,g.lineSeparator,g.direction):g.mode&&(E.modeOption=g.mode),this.doc=E;var R=new Ho.inputStyles[g.inputStyle](this),Z=this.display=new Md(A,E,R,g);Z.wrapper.CodeMirror=this,um(this),g.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),Zd(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new Be,keySeq:null,specialChars:null},g.autofocus&&!re&&Z.input.focus(),f&&y<11&&setTimeout(function(){return S.display.input.reset(!0)},20),Wf(this),Zr(),Yu(this),this.curOp.forceUpdate=!0,Eo(this,E),g.autofocus&&!re||this.hasFocus()?setTimeout(function(){S.hasFocus()&&!S.state.focused&&vd(S)},20):cs(this);for(var Ae in El)El.hasOwnProperty(Ae)&&El[Ae](this,g[Ae],eh);ac(this),g.finishInit&&g.finishInit(this);for(var Ce=0;Ce<Bd.length;++Ce)Bd[Ce](this);qu(this),x&&g.lineWrapping&&getComputedStyle(Z.lineDiv).textRendering=="optimizelegibility"&&(Z.lineDiv.style.textRendering="auto")}Ho.defaults=cf,Ho.optionHandlers=El;function Wf(A){var g=A.display;Fe(g.scroller,"mousedown",gi(A,Oh)),f&&y<11?Fe(g.scroller,"dblclick",gi(A,function(Ie){if(!dt(A,Ie)){var je=cA(A,Ie);if(!(!je||ed(A,Ie)||EA(A.display,Ie))){on(Ie);var gt=A.findWordAt(je);Oc(A.doc,gt.anchor,gt.head)}}})):Fe(g.scroller,"dblclick",function(Ie){return dt(A,Ie)||on(Ie)}),Fe(g.scroller,"contextmenu",function(Ie){return uf(A,Ie)}),Fe(g.input.getField(),"contextmenu",function(Ie){g.scroller.contains(Ie.target)||uf(A,Ie)});var S,E={end:0};function R(){g.activeTouch&&(S=setTimeout(function(){return g.activeTouch=null},1e3),E=g.activeTouch,E.end=+new Date)}function Z(Ie){if(Ie.touches.length!=1)return!1;var je=Ie.touches[0];return je.radiusX<=1&&je.radiusY<=1}function Ae(Ie,je){if(je.left==null)return!0;var gt=je.left-Ie.left,Mt=je.top-Ie.top;return gt*gt+Mt*Mt>20*20}Fe(g.scroller,"touchstart",function(Ie){if(!dt(A,Ie)&&!Z(Ie)&&!ed(A,Ie)){g.input.ensurePolled(),clearTimeout(S);var je=+new Date;g.activeTouch={start:je,moved:!1,prev:je-E.end<=300?E:null},Ie.touches.length==1&&(g.activeTouch.left=Ie.touches[0].pageX,g.activeTouch.top=Ie.touches[0].pageY)}}),Fe(g.scroller,"touchmove",function(){g.activeTouch&&(g.activeTouch.moved=!0)}),Fe(g.scroller,"touchend",function(Ie){var je=g.activeTouch;if(je&&!EA(g,Ie)&&je.left!=null&&!je.moved&&new Date-je.start<300){var gt=A.coordsChar(g.activeTouch,"page"),Mt;!je.prev||Ae(je,je.prev)?Mt=new So(gt,gt):!je.prev.prev||Ae(je,je.prev.prev)?Mt=A.findWordAt(gt):Mt=new So(fn(gt.line,0),ii(A.doc,fn(gt.line+1,0))),A.setSelection(Mt.anchor,Mt.head),A.focus(),on(Ie)}R()}),Fe(g.scroller,"touchcancel",R),Fe(g.scroller,"scroll",function(){g.scroller.clientHeight&&(oc(A,g.scroller.scrollTop),nl(A,g.scroller.scrollLeft,!0),ct(A,"scroll",A))}),Fe(g.scroller,"mousewheel",function(Ie){return Ec(A,Ie)}),Fe(g.scroller,"DOMMouseScroll",function(Ie){return Ec(A,Ie)}),Fe(g.wrapper,"scroll",function(){return g.wrapper.scrollTop=g.wrapper.scrollLeft=0}),g.dragFunctions={enter:function(Ie){dt(A,Ie)||rr(Ie)},over:function(Ie){dt(A,Ie)||(On(A,Ie),rr(Ie))},start:function(Ie){return bn(A,Ie)},drop:gi(A,En),leave:function(Ie){dt(A,Ie)||zn(A)}};var Ce=g.input.getField();Fe(Ce,"keyup",function(Ie){return Su.call(A,Ie)}),Fe(Ce,"keydown",gi(A,cc)),Fe(Ce,"keypress",gi(A,Jd)),Fe(Ce,"focus",function(Ie){return vd(A,Ie)}),Fe(Ce,"blur",function(Ie){return cs(A,Ie)})}var Bd=[];Ho.defineInitHook=function(A){return Bd.push(A)};function Bl(A,g,S,E){var R=A.doc,Z;S==null&&(S="add"),S=="smart"&&(R.mode.indent?Z=oi(A,g).state:S="prev");var Ae=A.options.tabSize,Ce=wr(R,g),Ie=Pe(Ce.text,null,Ae);Ce.stateAfter&&(Ce.stateAfter=null);var je=Ce.text.match(/^\s*/)[0],gt;if(!E&&!/\S/.test(Ce.text))gt=0,S="not";else if(S=="smart"&&(gt=R.mode.indent(Z,Ce.text.slice(je.length),Ce.text),gt==pt||gt>150)){if(!E)return;S="prev"}S=="prev"?g>R.first?gt=Pe(wr(R,g-1).text,null,Ae):gt=0:S=="add"?gt=Ie+A.options.indentUnit:S=="subtract"?gt=Ie-A.options.indentUnit:typeof S=="number"&&(gt=Ie+S),gt=Math.max(0,gt);var Mt="",Xt=0;if(A.options.indentWithTabs)for(var Qt=Math.floor(gt/Ae);Qt;--Qt)Xt+=Ae,Mt+="	";if(Xt<gt&&(Mt+=tn(gt-Xt)),Mt!=je)return z(R,Mt,fn(g,0),fn(g,je.length),"+input"),Ce.stateAfter=null,!0;for(var xn=0;xn<R.sel.ranges.length;xn++){var Fn=R.sel.ranges[xn];if(Fn.head.line==g&&Fn.head.ch<je.length){var Ar=fn(g,je.length);Cl(R,xn,new So(Ar,Ar));break}}}var vA=null;function th(A){vA=A}function Sp(A,g,S,E,R){var Z=A.doc;A.display.shift=!1,E||(E=Z.sel);var Ae=+new Date-200,Ce=R=="paste"||A.state.pasteIncoming>Ae,Ie=ri(g),je=null;if(Ce&&E.ranges.length>1)if(vA&&vA.text.join(`
`)==g){if(E.ranges.length%vA.text.length==0){je=[];for(var gt=0;gt<vA.text.length;gt++)je.push(Z.splitLines(vA.text[gt]))}}else Ie.length==E.ranges.length&&A.options.pasteLinesPerSelection&&(je=Pn(Ie,function(tr){return[tr]}));for(var Mt=A.curOp.updateInput,Xt=E.ranges.length-1;Xt>=0;Xt--){var Qt=E.ranges[Xt],xn=Qt.from(),Fn=Qt.to();Qt.empty()&&(S&&S>0?xn=fn(xn.line,xn.ch-S):A.state.overwrite&&!Ce?Fn=fn(Fn.line,Math.min(wr(Z,Fn.line).text.length,Fn.ch+dr(Ie).length)):Ce&&vA&&vA.lineWise&&vA.text.join(`
`)==Ie.join(`
`)&&(xn=Fn=fn(xn.line,0)));var Ar={from:xn,to:Fn,text:je?je[Xt%je.length]:Ie,origin:R||(Ce?"paste":A.state.cutIncoming>Ae?"cut":"+input")};I(A.doc,Ar),Gs(A,"inputRead",A,Ar)}g&&!Ce&&df(A,g),ms(A),A.curOp.updateInput<2&&(A.curOp.updateInput=Mt),A.curOp.typing=!0,A.state.pasteIncoming=A.state.cutIncoming=-1}function dc(A,g){var S=A.clipboardData&&A.clipboardData.getData("Text");if(S)return A.preventDefault(),!g.isReadOnly()&&!g.options.disableInput&&g.hasFocus()&&_s(g,function(){return Sp(g,S,0,null,"paste")}),!0}function df(A,g){if(!(!A.options.electricChars||!A.options.smartIndent))for(var S=A.doc.sel,E=S.ranges.length-1;E>=0;E--){var R=S.ranges[E];if(!(R.head.ch>100||E&&S.ranges[E-1].head.line==R.head.line)){var Z=A.getModeAt(R.head),Ae=!1;if(Z.electricChars){for(var Ce=0;Ce<Z.electricChars.length;Ce++)if(g.indexOf(Z.electricChars.charAt(Ce))>-1){Ae=Bl(A,R.head.line,"smart");break}}else Z.electricInput&&Z.electricInput.test(wr(A.doc,R.head.line).text.slice(0,R.head.ch))&&(Ae=Bl(A,R.head.line,"smart"));Ae&&Gs(A,"electricInput",A,R.head.line)}}}function hf(A){for(var g=[],S=[],E=0;E<A.doc.sel.ranges.length;E++){var R=A.doc.sel.ranges[E].head.line,Z={anchor:fn(R,0),head:fn(R+1,0)};S.push(Z),g.push(A.getRange(Z.anchor,Z.head))}return{text:g,ranges:S}}function ff(A,g,S,E){A.setAttribute("autocorrect",S?"on":"off"),A.setAttribute("autocapitalize",E?"on":"off"),A.setAttribute("spellcheck",!!g)}function kh(){var A=xe("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),g=xe("div",[A],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return x?A.style.width="1000px":A.setAttribute("wrap","off"),H&&(A.style.border="1px solid black"),g}function Tc(A){var g=A.optionHandlers,S=A.helpers={};A.prototype={constructor:A,focus:function(){Ft(this).focus(),this.display.input.focus()},setOption:function(E,R){var Z=this.options,Ae=Z[E];Z[E]==R&&E!="mode"||(Z[E]=R,g.hasOwnProperty(E)&&gi(this,g[E])(this,R,Ae),ct(this,"optionChange",this,E))},getOption:function(E){return this.options[E]},getDoc:function(){return this.doc},addKeyMap:function(E,R){this.state.keyMaps[R?"push":"unshift"](_l(E))},removeKeyMap:function(E){for(var R=this.state.keyMaps,Z=0;Z<R.length;++Z)if(R[Z]==E||R[Z].name==E)return R.splice(Z,1),!0},addOverlay:Gr(function(E,R){var Z=E.token?E:A.getMode(this.options,E);if(Z.startState)throw new Error("Overlays may not be stateful.");pn(this.state.overlays,{mode:Z,modeSpec:E,opaque:R&&R.opaque,priority:R&&R.priority||0},function(Ae){return Ae.priority}),this.state.modeGen++,Ll(this)}),removeOverlay:Gr(function(E){for(var R=this.state.overlays,Z=0;Z<R.length;++Z){var Ae=R[Z].modeSpec;if(Ae==E||typeof E=="string"&&Ae.name==E){R.splice(Z,1),this.state.modeGen++,Ll(this);return}}}),indentLine:Gr(function(E,R,Z){typeof R!="string"&&typeof R!="number"&&(R==null?R=this.options.smartIndent?"smart":"prev":R=R?"add":"subtract"),Cn(this.doc,E)&&Bl(this,E,R,Z)}),indentSelection:Gr(function(E){for(var R=this.doc.sel.ranges,Z=-1,Ae=0;Ae<R.length;Ae++){var Ce=R[Ae];if(Ce.empty())Ce.head.line>Z&&(Bl(this,Ce.head.line,E,!0),Z=Ce.head.line,Ae==this.doc.sel.primIndex&&ms(this));else{var Ie=Ce.from(),je=Ce.to(),gt=Math.max(Z,Ie.line);Z=Math.min(this.lastLine(),je.line-(je.ch?0:1))+1;for(var Mt=gt;Mt<Z;++Mt)Bl(this,Mt,E);var Xt=this.doc.sel.ranges;Ie.ch==0&&R.length==Xt.length&&Xt[Ae].from().ch>0&&Cl(this.doc,Ae,new So(Ie,Xt[Ae].to()),Lt)}}}),getTokenAt:function(E,R){return Es(this,E,R)},getLineTokens:function(E,R){return Es(this,fn(E),R,!0)},getTokenTypeAt:function(E){E=ii(this.doc,E);var R=Ja(this,wr(this.doc,E.line)),Z=0,Ae=(R.length-1)/2,Ce=E.ch,Ie;if(Ce==0)Ie=R[2];else for(;;){var je=Z+Ae>>1;if((je?R[je*2-1]:0)>=Ce)Ae=je;else if(R[je*2+1]<Ce)Z=je+1;else{Ie=R[je*2+2];break}}var gt=Ie?Ie.indexOf("overlay "):-1;return gt<0?Ie:gt==0?null:Ie.slice(0,gt-1)},getModeAt:function(E){var R=this.doc.mode;return R.innerMode?A.innerMode(R,this.getTokenAt(E).state).mode:R},getHelper:function(E,R){return this.getHelpers(E,R)[0]},getHelpers:function(E,R){var Z=[];if(!S.hasOwnProperty(R))return Z;var Ae=S[R],Ce=this.getModeAt(E);if(typeof Ce[R]=="string")Ae[Ce[R]]&&Z.push(Ae[Ce[R]]);else if(Ce[R])for(var Ie=0;Ie<Ce[R].length;Ie++){var je=Ae[Ce[R][Ie]];je&&Z.push(je)}else Ce.helperType&&Ae[Ce.helperType]?Z.push(Ae[Ce.helperType]):Ae[Ce.name]&&Z.push(Ae[Ce.name]);for(var gt=0;gt<Ae._global.length;gt++){var Mt=Ae._global[gt];Mt.pred(Ce,this)&&it(Z,Mt.val)==-1&&Z.push(Mt.val)}return Z},getStateAfter:function(E,R){var Z=this.doc;return E=eu(Z,E??Z.first+Z.size-1),oi(this,E+1,R).state},cursorCoords:function(E,R){var Z,Ae=this.doc.sel.primary();return E==null?Z=Ae.head:typeof E=="object"?Z=ii(this.doc,E):Z=E?Ae.from():Ae.to(),an(this,Z,R||"page")},charCoords:function(E,R){return In(this,ii(this.doc,E),R||"page")},coordsChar:function(E,R){return E=Jt(this,E,R||"page"),Po(this,E.left,E.top)},lineAtHeight:function(E,R){return E=Jt(this,{top:E,left:0},R||"page").top,xt(this.doc,E+this.display.viewOffset)},heightAtLine:function(E,R,Z){var Ae=!1,Ce;if(typeof E=="number"){var Ie=this.doc.first+this.doc.size-1;E<this.doc.first?E=this.doc.first:E>Ie&&(E=Ie,Ae=!0),Ce=wr(this.doc,E)}else Ce=E;return OA(this,Ce,{top:0,left:0},R||"page",Z||Ae).top+(Ae?this.doc.height-Zi(Ce):0)},defaultTextHeight:function(){return Ka(this.display)},defaultCharWidth:function(){return AA(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(E,R,Z,Ae,Ce){var Ie=this.display;E=an(this,ii(this.doc,E));var je=E.bottom,gt=E.left;if(R.style.position="absolute",R.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(R),Ie.sizer.appendChild(R),Ae=="over")je=E.top;else if(Ae=="above"||Ae=="near"){var Mt=Math.max(Ie.wrapper.clientHeight,this.doc.height),Xt=Math.max(Ie.sizer.clientWidth,Ie.lineSpace.clientWidth);(Ae=="above"||E.bottom+R.offsetHeight>Mt)&&E.top>R.offsetHeight?je=E.top-R.offsetHeight:E.bottom+R.offsetHeight<=Mt&&(je=E.bottom),gt+R.offsetWidth>Xt&&(gt=Xt-R.offsetWidth)}R.style.top=je+"px",R.style.left=R.style.right="",Ce=="right"?(gt=Ie.sizer.clientWidth-R.offsetWidth,R.style.right="0px"):(Ce=="left"?gt=0:Ce=="middle"&&(gt=(Ie.sizer.clientWidth-R.offsetWidth)/2),R.style.left=gt+"px"),Z&&IA(this,{left:gt,top:je,right:gt+R.offsetWidth,bottom:je+R.offsetHeight})},triggerOnKeyDown:Gr(cc),triggerOnKeyPress:Gr(Jd),triggerOnKeyUp:Su,triggerOnMouseDown:Gr(Oh),execCommand:function(E){if(lu.hasOwnProperty(E))return lu[E].call(null,this)},triggerElectric:Gr(function(E){df(this,E)}),findPosH:function(E,R,Z,Ae){var Ce=1;R<0&&(Ce=-1,R=-R);for(var Ie=ii(this.doc,E),je=0;je<R&&(Ie=wi(this.doc,Ie,Ce,Z,Ae),!Ie.hitSide);++je);return Ie},moveH:Gr(function(E,R){var Z=this;this.extendSelectionsBy(function(Ae){return Z.display.shift||Z.doc.extend||Ae.empty()?wi(Z.doc,Ae.head,E,R,Z.options.rtlMoveVisually):E<0?Ae.from():Ae.to()},Kt)}),deleteH:Gr(function(E,R){var Z=this.doc.sel,Ae=this.doc;Z.somethingSelected()?Ae.replaceSelection("",null,"+delete"):La(this,function(Ce){var Ie=wi(Ae,Ce.head,E,R,!1);return E<0?{from:Ie,to:Ce.head}:{from:Ce.head,to:Ie}})}),findPosV:function(E,R,Z,Ae){var Ce=1,Ie=Ae;R<0&&(Ce=-1,R=-R);for(var je=ii(this.doc,E),gt=0;gt<R;++gt){var Mt=an(this,je,"div");if(Ie==null?Ie=Mt.left:Mt.left=Ie,je=Th(this,Mt,Ce,Z),je.hitSide)break}return je},moveV:Gr(function(E,R){var Z=this,Ae=this.doc,Ce=[],Ie=!this.display.shift&&!Ae.extend&&Ae.sel.somethingSelected();if(Ae.extendSelectionsBy(function(gt){if(Ie)return E<0?gt.from():gt.to();var Mt=an(Z,gt.head,"div");gt.goalColumn!=null&&(Mt.left=gt.goalColumn),Ce.push(Mt.left);var Xt=Th(Z,Mt,E,R);return R=="page"&&gt==Ae.sel.primary()&&ic(Z,In(Z,Xt,"div").top-Mt.top),Xt},Kt),Ce.length)for(var je=0;je<Ae.sel.ranges.length;je++)Ae.sel.ranges[je].goalColumn=Ce[je]}),findWordAt:function(E){var R=this.doc,Z=wr(R,E.line).text,Ae=E.ch,Ce=E.ch;if(Z){var Ie=this.getHelper(E,"wordChars");(E.sticky=="before"||Ce==Z.length)&&Ae?--Ae:++Ce;for(var je=Z.charAt(Ae),gt=Ge(je,Ie)?function(Mt){return Ge(Mt,Ie)}:/\s/.test(je)?function(Mt){return/\s/.test(Mt)}:function(Mt){return!/\s/.test(Mt)&&!Ge(Mt)};Ae>0&&gt(Z.charAt(Ae-1));)--Ae;for(;Ce<Z.length&&gt(Z.charAt(Ce));)++Ce}return new So(fn(E.line,Ae),fn(E.line,Ce))},toggleOverwrite:function(E){E!=null&&E==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?we(this.display.cursorDiv,"CodeMirror-overwrite"):me(this.display.cursorDiv,"CodeMirror-overwrite"),ct(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==Ne(Yt(this))},isReadOnly:function(){return!!(this.options.readOnly||this.doc.cantEdit)},scrollTo:Gr(function(E,R){ao(this,E,R)}),getScrollInfo:function(){var E=this.display.scroller;return{left:E.scrollLeft,top:E.scrollTop,height:E.scrollHeight-fu(this)-this.display.barHeight,width:E.scrollWidth-fu(this)-this.display.barWidth,clientHeight:BA(this),clientWidth:XA(this)}},scrollIntoView:Gr(function(E,R){E==null?(E={from:this.doc.sel.primary().head,to:null},R==null&&(R=this.options.cursorScrollMargin)):typeof E=="number"?E={from:fn(E,0),to:null}:E.from==null&&(E={from:E,to:null}),E.to||(E.to=E.from),E.margin=R||0,E.from.line!=null?_d(this,E):Vc(this,E.from,E.to,E.margin)}),setSize:Gr(function(E,R){var Z=this,Ae=function(Ie){return typeof Ie=="number"||/^\d+$/.test(String(Ie))?Ie+"px":Ie};E!=null&&(this.display.wrapper.style.width=Ae(E)),R!=null&&(this.display.wrapper.style.height=Ae(R)),this.options.lineWrapping&&Uf(this);var Ce=this.display.viewFrom;this.doc.iter(Ce,this.display.viewTo,function(Ie){if(Ie.widgets){for(var je=0;je<Ie.widgets.length;je++)if(Ie.widgets[je].noHScroll){Mc(Z,Ce,"widget");break}}++Ce}),this.curOp.forceUpdate=!0,ct(this,"refresh",this)}),operation:function(E){return _s(this,E)},startOperation:function(){return Yu(this)},endOperation:function(){return qu(this)},refresh:Gr(function(){var E=this.display.cachedTextHeight;Ll(this),this.curOp.forceUpdate=!0,md(this),ao(this,this.doc.scrollLeft,this.doc.scrollTop),xa(this.display),(E==null||Math.abs(E-Ka(this.display))>.5||this.options.lineWrapping)&&$d(this),ct(this,"refresh",this)}),swapDoc:Gr(function(E){var R=this.doc;return R.cm=null,this.state.selectingText&&this.state.selectingText(),Eo(this,E),md(this),this.display.input.reset(),ao(this,E.scrollLeft,E.scrollTop),this.curOp.forceScroll=!0,Gs(this,"swapDoc",this,R),R}),phrase:function(E){var R=this.options.phrases;return R&&Object.prototype.hasOwnProperty.call(R,E)?R[E]:E},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},zt(A),A.registerHelper=function(E,R,Z){S.hasOwnProperty(E)||(S[E]=A[E]={_global:[]}),S[E][R]=Z},A.registerGlobalHelper=function(E,R,Z,Ae){A.registerHelper(E,R,Ae),S[E]._global.push({pred:Z,val:Ae})}}function wi(A,g,S,E,R){var Z=g,Ae=S,Ce=wr(A,g.line),Ie=R&&A.direction=="rtl"?-S:S;function je(){var gr=g.line+Ie;return gr<A.first||gr>=A.first+A.size?!1:(g=new fn(gr,g.ch,g.sticky),Ce=wr(A,gr))}function gt(gr){var yr;if(E=="codepoint"){var Rr=Ce.text.charCodeAt(g.ch+(S>0?0:-1));if(isNaN(Rr))yr=null;else{var ti=S>0?Rr>=55296&&Rr<56320:Rr>=56320&&Rr<57343;yr=new fn(g.line,Math.max(0,Math.min(Ce.text.length,g.ch+S*(ti?2:1))),-S)}}else R?yr=Sa(A.cm,Ce,g,S):yr=pA(Ce,g,S);if(yr==null)if(!gr&&je())g=mA(R,A.cm,Ce,g.line,Ie);else return!1;else g=yr;return!0}if(E=="char"||E=="codepoint")gt();else if(E=="column")gt(!0);else if(E=="word"||E=="group")for(var Mt=null,Xt=E=="group",Qt=A.cm&&A.cm.getHelper(g,"wordChars"),xn=!0;!(S<0&&!gt(!xn));xn=!1){var Fn=Ce.text.charAt(g.ch)||`
`,Ar=Ge(Fn,Qt)?"w":Xt&&Fn==`
`?"n":!Xt||/\s/.test(Fn)?null:"p";if(Xt&&!xn&&!Ar&&(Ar="s"),Mt&&Mt!=Ar){S<0&&(S=1,gt(),g.sticky="after");break}if(Ar&&(Mt=Ar),S>0&&!gt(!xn))break}var tr=Ac(A,g,Z,Ae,!0);return Di(Z,tr)&&(tr.hitSide=!0),tr}function Th(A,g,S,E){var R=A.doc,Z=g.left,Ae;if(E=="page"){var Ce=Math.min(A.display.wrapper.clientHeight,Ft(A).innerHeight||R(A).documentElement.clientHeight),Ie=Math.max(Ce-.5*Ka(A.display),3);Ae=(S>0?g.bottom:g.top)+S*Ie}else E=="line"&&(Ae=S>0?g.bottom+3:g.top-3);for(var je;je=Po(A,Z,Ae),!!je.outside;){if(S<0?Ae<=0:Ae>=R.height){je.hitSide=!0;break}Ae+=S*5}return je}var bo=function(A){this.cm=A,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new Be,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};bo.prototype.init=function(A){var g=this,S=this,E=S.cm,R=S.div=A.lineDiv;R.contentEditable=!0,ff(R,E.options.spellcheck,E.options.autocorrect,E.options.autocapitalize);function Z(Ce){for(var Ie=Ce.target;Ie;Ie=Ie.parentNode){if(Ie==R)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(Ie.className))break}return!1}Fe(R,"paste",function(Ce){!Z(Ce)||dt(E,Ce)||dc(Ce,E)||y<=11&&setTimeout(gi(E,function(){return g.updateFromDOM()}),20)}),Fe(R,"compositionstart",function(Ce){g.composing={data:Ce.data,done:!1}}),Fe(R,"compositionupdate",function(Ce){g.composing||(g.composing={data:Ce.data,done:!1})}),Fe(R,"compositionend",function(Ce){g.composing&&(Ce.data!=g.composing.data&&g.readFromDOMSoon(),g.composing.done=!0)}),Fe(R,"touchstart",function(){return S.forceCompositionEnd()}),Fe(R,"input",function(){g.composing||g.readFromDOMSoon()});function Ae(Ce){if(!(!Z(Ce)||dt(E,Ce))){if(E.somethingSelected())th({lineWise:!1,text:E.getSelections()}),Ce.type=="cut"&&E.replaceSelection("",null,"cut");else if(E.options.lineWiseCopyCut){var Ie=hf(E);th({lineWise:!0,text:Ie.text}),Ce.type=="cut"&&E.operation(function(){E.setSelections(Ie.ranges,0,Lt),E.replaceSelection("",null,"cut")})}else return;if(Ce.clipboardData){Ce.clipboardData.clearData();var je=vA.text.join(`
`);if(Ce.clipboardData.setData("Text",je),Ce.clipboardData.getData("Text")==je){Ce.preventDefault();return}}var gt=kh(),Mt=gt.firstChild;ff(Mt),E.display.lineSpace.insertBefore(gt,E.display.lineSpace.firstChild),Mt.value=vA.text.join(`
`);var Xt=Ne(yt(R));He(Mt),setTimeout(function(){E.display.lineSpace.removeChild(gt),Xt.focus(),Xt==R&&S.showPrimarySelection()},50)}}Fe(R,"copy",Ae),Fe(R,"cut",Ae)},bo.prototype.screenReaderLabelChanged=function(A){A?this.div.setAttribute("aria-label",A):this.div.removeAttribute("aria-label")},bo.prototype.prepareSelection=function(){var A=Gc(this.cm,!1);return A.focus=Ne(yt(this.div))==this.div,A},bo.prototype.showSelection=function(A,g){!A||!this.cm.display.view.length||((A.focus||g)&&this.showPrimarySelection(),this.showMultipleSelections(A))},bo.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},bo.prototype.showPrimarySelection=function(){var A=this.getSelection(),g=this.cm,S=g.doc.sel.primary(),E=S.from(),R=S.to();if(g.display.viewTo==g.display.viewFrom||E.line>=g.display.viewTo||R.line<g.display.viewFrom){A.removeAllRanges();return}var Z=bl(g,A.anchorNode,A.anchorOffset),Ae=bl(g,A.focusNode,A.focusOffset);if(!(Z&&!Z.bad&&Ae&&!Ae.bad&&ur(ua(Z,Ae),E)==0&&ur(rs(Z,Ae),R)==0)){var Ce=g.display.view,Ie=E.line>=g.display.viewFrom&&UA(g,E)||{node:Ce[0].measure.map[2],offset:0},je=R.line<g.display.viewTo&&UA(g,R);if(!je){var gt=Ce[Ce.length-1].measure,Mt=gt.maps?gt.maps[gt.maps.length-1]:gt.map;je={node:Mt[Mt.length-1],offset:Mt[Mt.length-2]-Mt[Mt.length-3]}}if(!Ie||!je){A.removeAllRanges();return}var Xt=A.rangeCount&&A.getRangeAt(0),Qt;try{Qt=Ze(Ie.node,Ie.offset,je.offset,je.node)}catch{}Qt&&(!i&&g.state.focused?(A.collapse(Ie.node,Ie.offset),Qt.collapsed||(A.removeAllRanges(),A.addRange(Qt))):(A.removeAllRanges(),A.addRange(Qt)),Xt&&A.anchorNode==null?A.addRange(Xt):i&&this.startGracePeriod()),this.rememberSelection()}},bo.prototype.startGracePeriod=function(){var A=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){A.gracePeriod=!1,A.selectionChanged()&&A.cm.operation(function(){return A.cm.curOp.selectionChanged=!0})},20)},bo.prototype.showMultipleSelections=function(A){Ke(this.cm.display.cursorDiv,A.cursors),Ke(this.cm.display.selectionDiv,A.selection)},bo.prototype.rememberSelection=function(){var A=this.getSelection();this.lastAnchorNode=A.anchorNode,this.lastAnchorOffset=A.anchorOffset,this.lastFocusNode=A.focusNode,this.lastFocusOffset=A.focusOffset},bo.prototype.selectionInEditor=function(){var A=this.getSelection();if(!A.rangeCount)return!1;var g=A.getRangeAt(0).commonAncestorContainer;return Je(this.div,g)},bo.prototype.focus=function(){this.cm.options.readOnly!="nocursor"&&((!this.selectionInEditor()||Ne(yt(this.div))!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},bo.prototype.blur=function(){this.div.blur()},bo.prototype.getField=function(){return this.div},bo.prototype.supportsTouch=function(){return!0},bo.prototype.receivedFocus=function(){var A=this,g=this;this.selectionInEditor()?setTimeout(function(){return A.pollSelection()},20):_s(this.cm,function(){return g.cm.curOp.selectionChanged=!0});function S(){g.cm.state.focused&&(g.pollSelection(),g.polling.set(g.cm.options.pollInterval,S))}this.polling.set(this.cm.options.pollInterval,S)},bo.prototype.selectionChanged=function(){var A=this.getSelection();return A.anchorNode!=this.lastAnchorNode||A.anchorOffset!=this.lastAnchorOffset||A.focusNode!=this.lastFocusNode||A.focusOffset!=this.lastFocusOffset},bo.prototype.pollSelection=function(){if(!(this.readDOMTimeout!=null||this.gracePeriod||!this.selectionChanged())){var A=this.getSelection(),g=this.cm;if(se&&O&&this.cm.display.gutterSpecs.length&&Ep(A.anchorNode)){this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),this.focus();return}if(!this.composing){this.rememberSelection();var S=bl(g,A.anchorNode,A.anchorOffset),E=bl(g,A.focusNode,A.focusOffset);S&&E&&_s(g,function(){ha(g.doc,Ma(S,E),Lt),(S.bad||E.bad)&&(g.curOp.selectionChanged=!0)})}}},bo.prototype.pollContent=function(){this.readDOMTimeout!=null&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var A=this.cm,g=A.display,S=A.doc.sel.primary(),E=S.from(),R=S.to();if(E.ch==0&&E.line>A.firstLine()&&(E=fn(E.line-1,wr(A.doc,E.line-1).length)),R.ch==wr(A.doc,R.line).text.length&&R.line<A.lastLine()&&(R=fn(R.line+1,0)),E.line<g.viewFrom||R.line>g.viewTo-1)return!1;var Z,Ae,Ce;E.line==g.viewFrom||(Z=Fl(A,E.line))==0?(Ae=Ye(g.view[0].line),Ce=g.view[0].node):(Ae=Ye(g.view[Z].line),Ce=g.view[Z-1].node.nextSibling);var Ie=Fl(A,R.line),je,gt;if(Ie==g.view.length-1?(je=g.viewTo-1,gt=g.lineDiv.lastChild):(je=Ye(g.view[Ie+1].line)-1,gt=g.view[Ie+1].node.previousSibling),!Ce)return!1;for(var Mt=A.doc.splitLines(Ym(A,Ce,gt,Ae,je)),Xt=Ta(A.doc,fn(Ae,0),fn(je,wr(A.doc,je).text.length));Mt.length>1&&Xt.length>1;)if(dr(Mt)==dr(Xt))Mt.pop(),Xt.pop(),je--;else if(Mt[0]==Xt[0])Mt.shift(),Xt.shift(),Ae++;else break;for(var Qt=0,xn=0,Fn=Mt[0],Ar=Xt[0],tr=Math.min(Fn.length,Ar.length);Qt<tr&&Fn.charCodeAt(Qt)==Ar.charCodeAt(Qt);)++Qt;for(var gr=dr(Mt),yr=dr(Xt),Rr=Math.min(gr.length-(Mt.length==1?Qt:0),yr.length-(Xt.length==1?Qt:0));xn<Rr&&gr.charCodeAt(gr.length-xn-1)==yr.charCodeAt(yr.length-xn-1);)++xn;if(Mt.length==1&&Xt.length==1&&Ae==E.line)for(;Qt&&Qt>E.ch&&gr.charCodeAt(gr.length-xn-1)==yr.charCodeAt(yr.length-xn-1);)Qt--,xn++;Mt[Mt.length-1]=gr.slice(0,gr.length-xn).replace(/^\u200b+/,""),Mt[0]=Mt[0].slice(Qt).replace(/\u200b+$/,"");var ti=fn(Ae,Qt),jr=fn(je,Xt.length?dr(Xt).length-xn:0);if(Mt.length>1||Mt[0]||ur(ti,jr))return z(A.doc,Mt,ti,jr,"+input"),!0},bo.prototype.ensurePolled=function(){this.forceCompositionEnd()},bo.prototype.reset=function(){this.forceCompositionEnd()},bo.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},bo.prototype.readFromDOMSoon=function(){var A=this;this.readDOMTimeout==null&&(this.readDOMTimeout=setTimeout(function(){if(A.readDOMTimeout=null,A.composing)if(A.composing.done)A.composing=null;else return;A.updateFromDOM()},80))},bo.prototype.updateFromDOM=function(){var A=this;(this.cm.isReadOnly()||!this.pollContent())&&_s(this.cm,function(){return Ll(A.cm)})},bo.prototype.setUneditable=function(A){A.contentEditable="false"},bo.prototype.onKeyPress=function(A){A.charCode==0||this.composing||(A.preventDefault(),this.cm.isReadOnly()||gi(this.cm,Sp)(this.cm,String.fromCharCode(A.charCode==null?A.keyCode:A.charCode),0))},bo.prototype.readOnlyChanged=function(A){this.div.contentEditable=String(A!="nocursor")},bo.prototype.onContextMenu=function(){},bo.prototype.resetPosition=function(){},bo.prototype.needsContentAttribute=!0;function UA(A,g){var S=Qd(A,g.line);if(!S||S.hidden)return null;var E=wr(A.doc,g.line),R=ef(S,E,g.line),Z=ve(E,A.doc.direction),Ae="left";if(Z){var Ce=Ve(Z,g.ch);Ae=Ce%2?"right":"left"}var Ie=_h(R.map,g.ch,Ae);return Ie.offset=Ie.collapse=="right"?Ie.end:Ie.start,Ie}function Ep(A){for(var g=A;g;g=g.parentNode)if(/CodeMirror-gutter-wrapper/.test(g.className))return!0;return!1}function Eu(A,g){return g&&(A.bad=!0),A}function Ym(A,g,S,E,R){var Z="",Ae=!1,Ce=A.doc.lineSeparator(),Ie=!1;function je(Qt){return function(xn){return xn.id==Qt}}function gt(){Ae&&(Z+=Ce,Ie&&(Z+=Ce),Ae=Ie=!1)}function Mt(Qt){Qt&&(gt(),Z+=Qt)}function Xt(Qt){if(Qt.nodeType==1){var xn=Qt.getAttribute("cm-text");if(xn){Mt(xn);return}var Fn=Qt.getAttribute("cm-marker"),Ar;if(Fn){var tr=A.findMarks(fn(E,0),fn(R+1,0),je(+Fn));tr.length&&(Ar=tr[0].find(0))&&Mt(Ta(A.doc,Ar.from,Ar.to).join(Ce));return}if(Qt.getAttribute("contenteditable")=="false")return;var gr=/^(pre|div|p|li|table|br)$/i.test(Qt.nodeName);if(!/^br$/i.test(Qt.nodeName)&&Qt.textContent.length==0)return;gr&&gt();for(var yr=0;yr<Qt.childNodes.length;yr++)Xt(Qt.childNodes[yr]);/^(pre|p)$/i.test(Qt.nodeName)&&(Ie=!0),gr&&(Ae=!0)}else Qt.nodeType==3&&Mt(Qt.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;Xt(g),g!=S;)g=g.nextSibling,Ie=!1;return Z}function bl(A,g,S){var E;if(g==A.display.lineDiv){if(E=A.display.lineDiv.childNodes[S],!E)return Eu(A.clipPos(fn(A.display.viewTo-1)),!0);g=null,S=0}else for(E=g;;E=E.parentNode){if(!E||E==A.display.lineDiv)return null;if(E.parentNode&&E.parentNode==A.display.lineDiv)break}for(var R=0;R<A.display.view.length;R++){var Z=A.display.view[R];if(Z.node==E)return Am(Z,g,S)}}function Am(A,g,S){var E=A.text.firstChild,R=!1;if(!g||!Je(E,g))return Eu(fn(Ye(A.line),0),!0);if(g==E&&(R=!0,g=E.childNodes[S],S=0,!g)){var Z=A.rest?dr(A.rest):A.line;return Eu(fn(Ye(Z),Z.text.length),R)}var Ae=g.nodeType==3?g:null,Ce=g;for(!Ae&&g.childNodes.length==1&&g.firstChild.nodeType==3&&(Ae=g.firstChild,S&&(S=Ae.nodeValue.length));Ce.parentNode!=E;)Ce=Ce.parentNode;var Ie=A.measure,je=Ie.maps;function gt(Ar,tr,gr){for(var yr=-1;yr<(je?je.length:0);yr++)for(var Rr=yr<0?Ie.map:je[yr],ti=0;ti<Rr.length;ti+=3){var jr=Rr[ti+2];if(jr==Ar||jr==tr){var Ji=Ye(yr<0?A.line:A.rest[yr]),Bo=Rr[ti]+gr;return(gr<0||jr!=Ar)&&(Bo=Rr[ti+(gr?1:0)]),fn(Ji,Bo)}}}var Mt=gt(Ae,Ce,S);if(Mt)return Eu(Mt,R);for(var Xt=Ce.nextSibling,Qt=Ae?Ae.nodeValue.length-S:0;Xt;Xt=Xt.nextSibling){if(Mt=gt(Xt,Xt.firstChild,0),Mt)return Eu(fn(Mt.line,Mt.ch-Qt),R);Qt+=Xt.textContent.length}for(var xn=Ce.previousSibling,Fn=S;xn;xn=xn.previousSibling){if(Mt=gt(xn,xn.firstChild,-1),Mt)return Eu(fn(Mt.line,Mt.ch+Fn),R);Fn+=xn.textContent.length}}var Ea=function(A){this.cm=A,this.prevInput="",this.pollingFast=!1,this.polling=new Be,this.hasSelection=!1,this.composing=null,this.resetting=!1};Ea.prototype.init=function(A){var g=this,S=this,E=this.cm;this.createField(A);var R=this.textarea;A.wrapper.insertBefore(this.wrapper,A.wrapper.firstChild),H&&(R.style.width="0px"),Fe(R,"input",function(){f&&y>=9&&g.hasSelection&&(g.hasSelection=null),S.poll()}),Fe(R,"paste",function(Ae){dt(E,Ae)||dc(Ae,E)||(E.state.pasteIncoming=+new Date,S.fastPoll())});function Z(Ae){if(!dt(E,Ae)){if(E.somethingSelected())th({lineWise:!1,text:E.getSelections()});else if(E.options.lineWiseCopyCut){var Ce=hf(E);th({lineWise:!0,text:Ce.text}),Ae.type=="cut"?E.setSelections(Ce.ranges,null,Lt):(S.prevInput="",R.value=Ce.text.join(`
`),He(R))}else return;Ae.type=="cut"&&(E.state.cutIncoming=+new Date)}}Fe(R,"cut",Z),Fe(R,"copy",Z),Fe(A.scroller,"paste",function(Ae){if(!(EA(A,Ae)||dt(E,Ae))){if(!R.dispatchEvent){E.state.pasteIncoming=+new Date,S.focus();return}var Ce=new Event("paste");Ce.clipboardData=Ae.clipboardData,R.dispatchEvent(Ce)}}),Fe(A.lineSpace,"selectstart",function(Ae){EA(A,Ae)||on(Ae)}),Fe(R,"compositionstart",function(){var Ae=E.getCursor("from");S.composing&&S.composing.range.clear(),S.composing={start:Ae,range:E.markText(Ae,E.getCursor("to"),{className:"CodeMirror-composing"})}}),Fe(R,"compositionend",function(){S.composing&&(S.poll(),S.composing.range.clear(),S.composing=null)})},Ea.prototype.createField=function(A){this.wrapper=kh(),this.textarea=this.wrapper.firstChild;var g=this.cm.options;ff(this.textarea,g.spellcheck,g.autocorrect,g.autocapitalize)},Ea.prototype.screenReaderLabelChanged=function(A){A?this.textarea.setAttribute("aria-label",A):this.textarea.removeAttribute("aria-label")},Ea.prototype.prepareSelection=function(){var A=this.cm,g=A.display,S=A.doc,E=Gc(A);if(A.options.moveInputWithCursor){var R=an(A,S.sel.primary().head,"div"),Z=g.wrapper.getBoundingClientRect(),Ae=g.lineDiv.getBoundingClientRect();E.teTop=Math.max(0,Math.min(g.wrapper.clientHeight-10,R.top+Ae.top-Z.top)),E.teLeft=Math.max(0,Math.min(g.wrapper.clientWidth-10,R.left+Ae.left-Z.left))}return E},Ea.prototype.showSelection=function(A){var g=this.cm,S=g.display;Ke(S.cursorDiv,A.cursors),Ke(S.selectionDiv,A.selection),A.teTop!=null&&(this.wrapper.style.top=A.teTop+"px",this.wrapper.style.left=A.teLeft+"px")},Ea.prototype.reset=function(A){if(!(this.contextMenuPending||this.composing&&A)){var g=this.cm;if(this.resetting=!0,g.somethingSelected()){this.prevInput="";var S=g.getSelection();this.textarea.value=S,g.state.focused&&He(this.textarea),f&&y>=9&&(this.hasSelection=S)}else A||(this.prevInput=this.textarea.value="",f&&y>=9&&(this.hasSelection=null));this.resetting=!1}},Ea.prototype.getField=function(){return this.textarea},Ea.prototype.supportsTouch=function(){return!1},Ea.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!re||Ne(yt(this.textarea))!=this.textarea))try{this.textarea.focus()}catch{}},Ea.prototype.blur=function(){this.textarea.blur()},Ea.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Ea.prototype.receivedFocus=function(){this.slowPoll()},Ea.prototype.slowPoll=function(){var A=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){A.poll(),A.cm.state.focused&&A.slowPoll()})},Ea.prototype.fastPoll=function(){var A=!1,g=this;g.pollingFast=!0;function S(){var E=g.poll();!E&&!A?(A=!0,g.polling.set(60,S)):(g.pollingFast=!1,g.slowPoll())}g.polling.set(20,S)},Ea.prototype.poll=function(){var A=this,g=this.cm,S=this.textarea,E=this.prevInput;if(this.contextMenuPending||this.resetting||!g.state.focused||Or(S)&&!E&&!this.composing||g.isReadOnly()||g.options.disableInput||g.state.keySeq)return!1;var R=S.value;if(R==E&&!g.somethingSelected())return!1;if(f&&y>=9&&this.hasSelection===R||V&&/[\uf700-\uf7ff]/.test(R))return g.display.input.reset(),!1;if(g.doc.sel==g.display.selForContextMenu){var Z=R.charCodeAt(0);if(Z==8203&&!E&&(E=""),Z==8666)return this.reset(),this.cm.execCommand("undo")}for(var Ae=0,Ce=Math.min(E.length,R.length);Ae<Ce&&E.charCodeAt(Ae)==R.charCodeAt(Ae);)++Ae;return _s(g,function(){Sp(g,R.slice(Ae),E.length-Ae,null,A.composing?"*compose":null),R.length>1e3||R.indexOf(`
`)>-1?S.value=A.prevInput="":A.prevInput=R,A.composing&&(A.composing.range.clear(),A.composing.range=g.markText(A.composing.start,g.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},Ea.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Ea.prototype.onKeyPress=function(){f&&y>=9&&(this.hasSelection=null),this.fastPoll()},Ea.prototype.onContextMenu=function(A){var g=this,S=g.cm,E=S.display,R=g.textarea;g.contextMenuPending&&g.contextMenuPending();var Z=cA(S,A),Ae=E.scroller.scrollTop;if(!Z||U)return;var Ce=S.options.resetSelectionOnContextMenu;Ce&&S.doc.sel.contains(Z)==-1&&gi(S,ha)(S.doc,Ma(Z),Lt);var Ie=R.style.cssText,je=g.wrapper.style.cssText,gt=g.wrapper.offsetParent.getBoundingClientRect();g.wrapper.style.cssText="position: static",R.style.cssText=`position: absolute; width: 30px; height: 30px;
      top: `+(A.clientY-gt.top-5)+"px; left: "+(A.clientX-gt.left-5)+`px;
      z-index: 1000; background: `+(f?"rgba(255, 255, 255, .05)":"transparent")+`;
      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);`;var Mt;x&&(Mt=R.ownerDocument.defaultView.scrollY),E.input.focus(),x&&R.ownerDocument.defaultView.scrollTo(null,Mt),E.input.reset(),S.somethingSelected()||(R.value=g.prevInput=" "),g.contextMenuPending=Qt,E.selForContextMenu=S.doc.sel,clearTimeout(E.detectingSelectAll);function Xt(){if(R.selectionStart!=null){var Fn=S.somethingSelected(),Ar=""+(Fn?R.value:"");R.value="",R.value=Ar,g.prevInput=Fn?"":"",R.selectionStart=1,R.selectionEnd=Ar.length,E.selForContextMenu=S.doc.sel}}function Qt(){if(g.contextMenuPending==Qt&&(g.contextMenuPending=!1,g.wrapper.style.cssText=je,R.style.cssText=Ie,f&&y<9&&E.scrollbars.setScrollTop(E.scroller.scrollTop=Ae),R.selectionStart!=null)){(!f||f&&y<9)&&Xt();var Fn=0,Ar=function(){E.selForContextMenu==S.doc.sel&&R.selectionStart==0&&R.selectionEnd>0&&g.prevInput==""?gi(S,jl)(S):Fn++<10?E.detectingSelectAll=setTimeout(Ar,500):(E.selForContextMenu=null,E.input.reset())};E.detectingSelectAll=setTimeout(Ar,200)}}if(f&&y>=9&&Xt(),fe){rr(A);var xn=function(){rt(window,"mouseup",xn),setTimeout(Qt,20)};Fe(window,"mouseup",xn)}else setTimeout(Qt,50)},Ea.prototype.readOnlyChanged=function(A){A||this.reset(),this.textarea.disabled=A=="nocursor",this.textarea.readOnly=!!A},Ea.prototype.setUneditable=function(){},Ea.prototype.needsContentAttribute=!1;function cm(A,g){if(g=g?Ue(g):{},g.value=A.value,!g.tabindex&&A.tabIndex&&(g.tabindex=A.tabIndex),!g.placeholder&&A.placeholder&&(g.placeholder=A.placeholder),g.autofocus==null){var S=Ne(yt(A));g.autofocus=S==A||A.getAttribute("autofocus")!=null&&S==document.body}function E(){A.value=Ce.getValue()}var R;if(A.form&&(Fe(A.form,"submit",E),!g.leaveSubmitMethodAlone)){var Z=A.form;R=Z.submit;try{var Ae=Z.submit=function(){E(),Z.submit=R,Z.submit(),Z.submit=Ae}}catch{}}g.finishInit=function(Ie){Ie.save=E,Ie.getTextArea=function(){return A},Ie.toTextArea=function(){Ie.toTextArea=isNaN,E(),A.parentNode.removeChild(Ie.getWrapperElement()),A.style.display="",A.form&&(rt(A.form,"submit",E),!g.leaveSubmitMethodAlone&&typeof A.form.submit=="function"&&(A.form.submit=R))}},A.style.display="none";var Ce=Ho(function(Ie){return A.parentNode.insertBefore(Ie,A.nextSibling)},g);return Ce}function Ph(A){A.off=rt,A.on=Fe,A.wheelEventPixels=lc,A.Doc=Zt,A.splitLines=ri,A.countColumn=Pe,A.findColumn=vn,A.isWordChar=Zn,A.Pass=pt,A.signal=ct,A.Line=Pa,A.changeEnd=Ra,A.scrollbarModel=$c,A.Pos=fn,A.cmpPos=ur,A.modes=eo,A.mimeModes=ws,A.resolveMode=Sl,A.getMode=Go,A.modeExtensions=Za,A.extendMode=Xa,A.copyState=Yi,A.startState=Jl,A.innerMode=Lu,A.commands=lu,A.keyMap=po,A.keyName=wu,A.isModifierKey=wa,A.lookupKey=es,A.normalizeKeyMap=ss,A.StringStream=wo,A.SharedTextMarker=Et,A.TextMarker=ft,A.LineWidget=$e,A.e_preventDefault=on,A.e_stopPropagation=jt,A.e_stop=rr,A.addClass=we,A.contains=Je,A.rmClass=me,A.keyNames=ki}Nl(Ho),Tc(Ho);var uu="iter insert remove copy getEditor constructor".split(" ");for(var Gf in Zt.prototype)Zt.prototype.hasOwnProperty(Gf)&&it(uu,Gf)<0&&(Ho.prototype[Gf]=function(A){return function(){return A.apply(this.doc,arguments)}}(Zt.prototype[Gf]));return zt(Zt),Ho.inputStyles={textarea:Ea,contenteditable:bo},Ho.defineMode=function(A){!Ho.defaults.mode&&A!="null"&&(Ho.defaults.mode=A),ko.apply(this,arguments)},Ho.defineMIME=Hi,Ho.defineMode("null",function(){return{token:function(A){return A.skipToEnd()}}}),Ho.defineMIME("text/plain","null"),Ho.defineExtension=function(A,g){Ho.prototype[A]=g},Ho.defineDocExtension=function(A,g){Zt.prototype[A]=g},Ho.fromTextArea=cm,Ph(Ho),Ho.version="5.65.18",Ho})}(Ob)),Ob.exports}var noe=jx();const cp=fl(noe);var W9={exports:{}},G9;function roe(){return G9||(G9=1,function(n,e){(function(t){t(jx())})(function(t){t.defineMode("javascript",function(r,i){var s=r.indentUnit,l=i.statementIndent,o=i.jsonld,f=i.json||o,y=i.trackScope!==!1,x=i.typescript,B=i.wordCharacters||/[\w$\xa1-\uffff]/,O=function(){function Ye(vo){return{type:vo,style:"keyword"}}var xt=Ye("keyword a"),Cn=Ye("keyword b"),Qn=Ye("keyword c"),fn=Ye("keyword d"),ur=Ye("operator"),Di={type:"atom",style:"atom"};return{if:Ye("if"),while:xt,with:xt,else:Cn,do:Cn,try:Cn,finally:Cn,return:fn,break:fn,continue:fn,new:Ye("new"),delete:Qn,void:Qn,throw:Qn,debugger:Ye("debugger"),var:Ye("var"),const:Ye("var"),let:Ye("var"),function:Ye("function"),catch:Ye("catch"),for:Ye("for"),switch:Ye("switch"),case:Ye("case"),default:Ye("default"),in:ur,typeof:ur,instanceof:ur,true:Di,false:Di,null:Di,undefined:Di,NaN:Di,Infinity:Di,this:Ye("this"),class:Ye("class"),super:Ye("atom"),yield:Qn,export:Ye("export"),import:Ye("import"),extends:Qn,await:Qn}}(),P=/[+\-*&%=<>!?|~^@]/,U=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function j(Ye){for(var xt=!1,Cn,Qn=!1;(Cn=Ye.next())!=null;){if(!xt){if(Cn=="/"&&!Qn)return;Cn=="["?Qn=!0:Qn&&Cn=="]"&&(Qn=!1)}xt=!xt&&Cn=="\\"}}var N,Y;function H(Ye,xt,Cn){return N=Ye,Y=Cn,xt}function se(Ye,xt){var Cn=Ye.next();if(Cn=='"'||Cn=="'")return xt.tokenize=re(Cn),xt.tokenize(Ye,xt);if(Cn=="."&&Ye.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return H("number","number");if(Cn=="."&&Ye.match(".."))return H("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(Cn))return H(Cn);if(Cn=="="&&Ye.eat(">"))return H("=>","operator");if(Cn=="0"&&Ye.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return H("number","number");if(/\d/.test(Cn))return Ye.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),H("number","number");if(Cn=="/")return Ye.eat("*")?(xt.tokenize=V,V(Ye,xt)):Ye.eat("/")?(Ye.skipToEnd(),H("comment","comment")):Zs(Ye,xt,1)?(j(Ye),Ye.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),H("regexp","string-2")):(Ye.eat("="),H("operator","operator",Ye.current()));if(Cn=="`")return xt.tokenize=ne,ne(Ye,xt);if(Cn=="#"&&Ye.peek()=="!")return Ye.skipToEnd(),H("meta","meta");if(Cn=="#"&&Ye.eatWhile(B))return H("variable","property");if(Cn=="<"&&Ye.match("!--")||Cn=="-"&&Ye.match("->")&&!/\S/.test(Ye.string.slice(0,Ye.start)))return Ye.skipToEnd(),H("comment","comment");if(P.test(Cn))return(Cn!=">"||!xt.lexical||xt.lexical.type!=">")&&(Ye.eat("=")?(Cn=="!"||Cn=="=")&&Ye.eat("="):/[<>*+\-|&?]/.test(Cn)&&(Ye.eat(Cn),Cn==">"&&Ye.eat(Cn))),Cn=="?"&&Ye.eat(".")?H("."):H("operator","operator",Ye.current());if(B.test(Cn)){Ye.eatWhile(B);var Qn=Ye.current();if(xt.lastType!="."){if(O.propertyIsEnumerable(Qn)){var fn=O[Qn];return H(fn.type,fn.style,Qn)}if(Qn=="async"&&Ye.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return H("async","keyword",Qn)}return H("variable","variable",Qn)}}function re(Ye){return function(xt,Cn){var Qn=!1,fn;if(o&&xt.peek()=="@"&&xt.match(U))return Cn.tokenize=se,H("jsonld-keyword","meta");for(;(fn=xt.next())!=null&&!(fn==Ye&&!Qn);)Qn=!Qn&&fn=="\\";return Qn||(Cn.tokenize=se),H("string","string")}}function V(Ye,xt){for(var Cn=!1,Qn;Qn=Ye.next();){if(Qn=="/"&&Cn){xt.tokenize=se;break}Cn=Qn=="*"}return H("comment","comment")}function ne(Ye,xt){for(var Cn=!1,Qn;(Qn=Ye.next())!=null;){if(!Cn&&(Qn=="`"||Qn=="$"&&Ye.eat("{"))){xt.tokenize=se;break}Cn=!Cn&&Qn=="\\"}return H("quasi","string-2",Ye.current())}var G="([{}])";function oe(Ye,xt){xt.fatArrowAt&&(xt.fatArrowAt=null);var Cn=Ye.string.indexOf("=>",Ye.start);if(!(Cn<0)){if(x){var Qn=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(Ye.string.slice(Ye.start,Cn));Qn&&(Cn=Qn.index)}for(var fn=0,ur=!1,Di=Cn-1;Di>=0;--Di){var vo=Ye.string.charAt(Di),rs=G.indexOf(vo);if(rs>=0&&rs<3){if(!fn){++Di;break}if(--fn==0){vo=="("&&(ur=!0);break}}else if(rs>=3&&rs<6)++fn;else if(B.test(vo))ur=!0;else if(/["'\/`]/.test(vo))for(;;--Di){if(Di==0)return;var ua=Ye.string.charAt(Di-1);if(ua==vo&&Ye.string.charAt(Di-2)!="\\"){Di--;break}}else if(ur&&!fn){++Di;break}}ur&&!fn&&(xt.fatArrowAt=Di)}}var he={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function fe(Ye,xt,Cn,Qn,fn,ur){this.indented=Ye,this.column=xt,this.type=Cn,this.prev=fn,this.info=ur,Qn!=null&&(this.align=Qn)}function Ee(Ye,xt){if(!y)return!1;for(var Cn=Ye.localVars;Cn;Cn=Cn.next)if(Cn.name==xt)return!0;for(var Qn=Ye.context;Qn;Qn=Qn.prev)for(var Cn=Qn.vars;Cn;Cn=Cn.next)if(Cn.name==xt)return!0}function me(Ye,xt,Cn,Qn,fn){var ur=Ye.cc;for(Se.state=Ye,Se.stream=fn,Se.marked=null,Se.cc=ur,Se.style=xt,Ye.lexical.hasOwnProperty("align")||(Ye.lexical.align=!0);;){var Di=ur.length?ur.pop():f?it:Pe;if(Di(Cn,Qn)){for(;ur.length&&ur[ur.length-1].lex;)ur.pop()();return Se.marked?Se.marked:Cn=="variable"&&Ee(Ye,Qn)?"variable-2":xt}}}var Se={state:null,column:null,marked:null,cc:null};function Ke(){for(var Ye=arguments.length-1;Ye>=0;Ye--)Se.cc.push(arguments[Ye])}function xe(){return Ke.apply(null,arguments),!0}function at(Ye,xt){for(var Cn=xt;Cn;Cn=Cn.next)if(Cn.name==Ye)return!0;return!1}function Ze(Ye){var xt=Se.state;if(Se.marked="def",!!y){if(xt.context){if(xt.lexical.info=="var"&&xt.context&&xt.context.block){var Cn=Je(Ye,xt.context);if(Cn!=null){xt.context=Cn;return}}else if(!at(Ye,xt.localVars)){xt.localVars=new De(Ye,xt.localVars);return}}i.globalVars&&!at(Ye,xt.globalVars)&&(xt.globalVars=new De(Ye,xt.globalVars))}}function Je(Ye,xt){if(xt)if(xt.block){var Cn=Je(Ye,xt.prev);return Cn?Cn==xt.prev?xt:new we(Cn,xt.vars,!0):null}else return at(Ye,xt.vars)?xt:new we(xt.prev,new De(Ye,xt.vars),!1);else return null}function Ne(Ye){return Ye=="public"||Ye=="private"||Ye=="protected"||Ye=="abstract"||Ye=="readonly"}function we(Ye,xt,Cn){this.prev=Ye,this.vars=xt,this.block=Cn}function De(Ye,xt){this.name=Ye,this.next=xt}var He=new De("this",new De("arguments",null));function bt(){Se.state.context=new we(Se.state.context,Se.state.localVars,!1),Se.state.localVars=He}function Yt(){Se.state.context=new we(Se.state.context,Se.state.localVars,!0),Se.state.localVars=null}bt.lex=Yt.lex=!0;function yt(){Se.state.localVars=Se.state.context.vars,Se.state.context=Se.state.context.prev}yt.lex=!0;function Ft(Ye,xt){var Cn=function(){var Qn=Se.state,fn=Qn.indented;if(Qn.lexical.type=="stat")fn=Qn.lexical.indented;else for(var ur=Qn.lexical;ur&&ur.type==")"&&ur.align;ur=ur.prev)fn=ur.indented;Qn.lexical=new fe(fn,Se.stream.column(),Ye,null,Qn.lexical,xt)};return Cn.lex=!0,Cn}function Pt(){var Ye=Se.state;Ye.lexical.prev&&(Ye.lexical.type==")"&&(Ye.indented=Ye.lexical.indented),Ye.lexical=Ye.lexical.prev)}Pt.lex=!0;function Ue(Ye){function xt(Cn){return Cn==Ye?xe():Ye==";"||Cn=="}"||Cn==")"||Cn=="]"?Ke():xe(xt)}return xt}function Pe(Ye,xt){return Ye=="var"?xe(Ft("vardef",xt),jt,Ue(";"),Pt):Ye=="keyword a"?xe(Ft("form"),pt,Pe,Pt):Ye=="keyword b"?xe(Ft("form"),Pe,Pt):Ye=="keyword d"?Se.stream.match(/^\s*$/,!1)?xe():xe(Ft("stat"),nn,Ue(";"),Pt):Ye=="debugger"?xe(Ue(";")):Ye=="{"?xe(Ft("}"),Yt,Ht,Pt,yt):Ye==";"?xe():Ye=="if"?(Se.state.lexical.info=="else"&&Se.state.cc[Se.state.cc.length-1]==Pt&&Se.state.cc.pop()(),xe(Ft("form"),pt,Pe,Pt,er)):Ye=="function"?xe(ri):Ye=="for"?xe(Ft("form"),Yt,fr,Pe,yt,Pt):Ye=="class"||x&&xt=="interface"?(Se.marked="keyword",xe(Ft("form",Ye=="class"?Ye:xt),eo,Pt)):Ye=="variable"?x&&xt=="declare"?(Se.marked="keyword",xe(Pe)):x&&(xt=="module"||xt=="enum"||xt=="type")&&Se.stream.match(/^\s*\w/,!1)?(Se.marked="keyword",xt=="enum"?xe(wr):xt=="type"?xe(ka,Ue("operator"),ve,Ue(";")):xe(Ft("form"),Dn,Ue("{"),Ft("}"),Ht,Pt,Pt)):x&&xt=="namespace"?(Se.marked="keyword",xe(Ft("form"),it,Pe,Pt)):x&&xt=="abstract"?(Se.marked="keyword",xe(Pe)):xe(Ft("stat"),vr):Ye=="switch"?xe(Ft("form"),pt,Ue("{"),Ft("}","switch"),Yt,Ht,Pt,Pt,yt):Ye=="case"?xe(it,Ue(":")):Ye=="default"?xe(Ue(":")):Ye=="catch"?xe(Ft("form"),bt,Be,Pe,Pt,yt):Ye=="export"?xe(Ft("stat"),Sl,Pt):Ye=="import"?xe(Ft("stat"),Za,Pt):Ye=="async"?xe(Pe):xt=="@"?xe(it,Pe):Ke(Ft("stat"),it,Ue(";"),Pt)}function Be(Ye){if(Ye=="(")return xe(Wi,Ue(")"))}function it(Ye,xt){return Lt(Ye,xt,!1)}function _t(Ye,xt){return Lt(Ye,xt,!0)}function pt(Ye){return Ye!="("?Ke():xe(Ft(")"),nn,Ue(")"),Pt)}function Lt(Ye,xt,Cn){if(Se.state.fatArrowAt==Se.stream.start){var Qn=Cn?Pn:dr;if(Ye=="(")return xe(bt,Ft(")"),nt(Wi,")"),Pt,Ue("=>"),Qn,yt);if(Ye=="variable")return Ke(bt,Dn,Ue("=>"),Qn,yt)}var fn=Cn?vn:Kt;return he.hasOwnProperty(Ye)?xe(fn):Ye=="function"?xe(ri,fn):Ye=="class"||x&&xt=="interface"?(Se.marked="keyword",xe(Ft("form"),Bi,Pt)):Ye=="keyword c"||Ye=="async"?xe(Cn?_t:it):Ye=="("?xe(Ft(")"),nn,Ue(")"),Pt,fn):Ye=="operator"||Ye=="spread"?xe(Cn?_t:it):Ye=="["?xe(Ft("]"),wo,Pt,fn):Ye=="{"?wt(Ge,"}",null,fn):Ye=="quasi"?Ke(Gn,fn):Ye=="new"?xe(pn(Cn)):xe()}function nn(Ye){return Ye.match(/[;\}\)\],]/)?Ke():Ke(it)}function Kt(Ye,xt){return Ye==","?xe(nn):vn(Ye,xt,!1)}function vn(Ye,xt,Cn){var Qn=Cn==!1?Kt:vn,fn=Cn==!1?it:_t;if(Ye=="=>")return xe(bt,Cn?Pn:dr,yt);if(Ye=="operator")return/\+\+|--/.test(xt)||x&&xt=="!"?xe(Qn):x&&xt=="<"&&Se.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?xe(Ft(">"),nt(ve,">"),Pt,Qn):xt=="?"?xe(it,Ue(":"),fn):xe(fn);if(Ye=="quasi")return Ke(Gn,Qn);if(Ye!=";"){if(Ye=="(")return wt(_t,")","call",Qn);if(Ye==".")return xe(Zn,Qn);if(Ye=="[")return xe(Ft("]"),nn,Ue("]"),Pt,Qn);if(x&&xt=="as")return Se.marked="keyword",xe(ve,Qn);if(Ye=="regexp")return Se.state.lastType=Se.marked="operator",Se.stream.backUp(Se.stream.pos-Se.stream.start-1),xe(fn)}}function Gn(Ye,xt){return Ye!="quasi"?Ke():xt.slice(xt.length-2)!="${"?xe(Gn):xe(nn,tn)}function tn(Ye){if(Ye=="}")return Se.marked="string-2",Se.state.tokenize=ne,xe(Gn)}function dr(Ye){return oe(Se.stream,Se.state),Ke(Ye=="{"?Pe:it)}function Pn(Ye){return oe(Se.stream,Se.state),Ke(Ye=="{"?Pe:_t)}function pn(Ye){return function(xt){return xt=="."?xe(Ye?lr:$n):xt=="variable"&&x?xe(Gt,Ye?vn:Kt):Ke(Ye?_t:it)}}function $n(Ye,xt){if(xt=="target")return Se.marked="keyword",xe(Kt)}function lr(Ye,xt){if(xt=="target")return Se.marked="keyword",xe(vn)}function vr(Ye){return Ye==":"?xe(Pt,Pe):Ke(Kt,Ue(";"),Pt)}function Zn(Ye){if(Ye=="variable")return Se.marked="property",xe()}function Ge(Ye,xt){if(Ye=="async")return Se.marked="property",xe(Ge);if(Ye=="variable"||Se.style=="keyword"){if(Se.marked="property",xt=="get"||xt=="set")return xe(ce);var Cn;return x&&Se.state.fatArrowAt==Se.stream.start&&(Cn=Se.stream.match(/^\s*:\s*/,!1))&&(Se.state.fatArrowAt=Se.stream.pos+Cn[0].length),xe(pe)}else{if(Ye=="number"||Ye=="string")return Se.marked=o?"property":Se.style+" property",xe(pe);if(Ye=="jsonld-keyword")return xe(pe);if(x&&Ne(xt))return Se.marked="keyword",xe(Ge);if(Ye=="[")return xe(it,sn,Ue("]"),pe);if(Ye=="spread")return xe(_t,pe);if(xt=="*")return Se.marked="keyword",xe(Ge);if(Ye==":")return Ke(pe)}}function ce(Ye){return Ye!="variable"?Ke(pe):(Se.marked="property",xe(ri))}function pe(Ye){if(Ye==":")return xe(_t);if(Ye=="(")return Ke(ri)}function nt(Ye,xt,Cn){function Qn(fn,ur){if(Cn?Cn.indexOf(fn)>-1:fn==","){var Di=Se.state.lexical;return Di.info=="call"&&(Di.pos=(Di.pos||0)+1),xe(function(vo,rs){return vo==xt||rs==xt?Ke():Ke(Ye)},Qn)}return fn==xt||ur==xt?xe():Cn&&Cn.indexOf(";")>-1?Ke(Ye):xe(Ue(xt))}return function(fn,ur){return fn==xt||ur==xt?xe():Ke(Ye,Qn)}}function wt(Ye,xt,Cn){for(var Qn=3;Qn<arguments.length;Qn++)Se.cc.push(arguments[Qn]);return xe(Ft(xt,Cn),nt(Ye,xt),Pt)}function Ht(Ye){return Ye=="}"?xe():Ke(Pe,Ht)}function sn(Ye,xt){if(x){if(Ye==":")return xe(ve);if(xt=="?")return xe(sn)}}function Hn(Ye,xt){if(x&&(Ye==":"||xt=="in"))return xe(ve)}function Ve(Ye){if(x&&Ye==":")return Se.stream.match(/^\s*\w+\s+is\b/,!1)?xe(it,J,ve):xe(ve)}function J(Ye,xt){if(xt=="is")return Se.marked="keyword",xe()}function ve(Ye,xt){if(xt=="keyof"||xt=="typeof"||xt=="infer"||xt=="readonly")return Se.marked="keyword",xe(xt=="typeof"?_t:ve);if(Ye=="variable"||xt=="void")return Se.marked="type",xe(qt);if(xt=="|"||xt=="&")return xe(ve);if(Ye=="string"||Ye=="number"||Ye=="atom")return xe(qt);if(Ye=="[")return xe(Ft("]"),nt(ve,"]",","),Pt,qt);if(Ye=="{")return xe(Ft("}"),Fe,Pt,qt);if(Ye=="(")return xe(nt(dt,")"),p,qt);if(Ye=="<")return xe(nt(ve,">"),ve);if(Ye=="quasi")return Ke(rt,qt)}function p(Ye){if(Ye=="=>")return xe(ve)}function Fe(Ye){return Ye.match(/[\}\)\]]/)?xe():Ye==","||Ye==";"?xe(Fe):Ke(Qe,Fe)}function Qe(Ye,xt){if(Ye=="variable"||Se.style=="keyword")return Se.marked="property",xe(Qe);if(xt=="?"||Ye=="number"||Ye=="string")return xe(Qe);if(Ye==":")return xe(ve);if(Ye=="[")return xe(Ue("variable"),Hn,Ue("]"),Qe);if(Ye=="(")return Ke(Or,Qe);if(!Ye.match(/[;\}\)\],]/))return xe()}function rt(Ye,xt){return Ye!="quasi"?Ke():xt.slice(xt.length-2)!="${"?xe(rt):xe(ve,ct)}function ct(Ye){if(Ye=="}")return Se.marked="string-2",Se.state.tokenize=ne,xe(rt)}function dt(Ye,xt){return Ye=="variable"&&Se.stream.match(/^\s*[?:]/,!1)||xt=="?"?xe(dt):Ye==":"?xe(ve):Ye=="spread"?xe(dt):Ke(ve)}function qt(Ye,xt){if(xt=="<")return xe(Ft(">"),nt(ve,">"),Pt,qt);if(xt=="|"||Ye=="."||xt=="&")return xe(ve);if(Ye=="[")return xe(ve,Ue("]"),qt);if(xt=="extends"||xt=="implements")return Se.marked="keyword",xe(ve);if(xt=="?")return xe(ve,Ue(":"),ve)}function Gt(Ye,xt){if(xt=="<")return xe(Ft(">"),nt(ve,">"),Pt,qt)}function zt(){return Ke(ve,on)}function on(Ye,xt){if(xt=="=")return xe(ve)}function jt(Ye,xt){return xt=="enum"?(Se.marked="keyword",xe(wr)):Ke(Dn,sn,Jn,un)}function Dn(Ye,xt){if(x&&Ne(xt))return Se.marked="keyword",xe(Dn);if(Ye=="variable")return Ze(xt),xe();if(Ye=="spread")return xe(Dn);if(Ye=="[")return wt(Br,"]");if(Ye=="{")return wt(rr,"}")}function rr(Ye,xt){return Ye=="variable"&&!Se.stream.match(/^\s*:/,!1)?(Ze(xt),xe(Jn)):(Ye=="variable"&&(Se.marked="property"),Ye=="spread"?xe(Dn):Ye=="}"?Ke():Ye=="["?xe(it,Ue("]"),Ue(":"),rr):xe(Ue(":"),Dn,Jn))}function Br(){return Ke(Dn,Jn)}function Jn(Ye,xt){if(xt=="=")return xe(_t)}function un(Ye){if(Ye==",")return xe(jt)}function er(Ye,xt){if(Ye=="keyword b"&&xt=="else")return xe(Ft("form","else"),Pe,Pt)}function fr(Ye,xt){if(xt=="await")return xe(fr);if(Ye=="(")return xe(Ft(")"),Sr,Pt)}function Sr(Ye){return Ye=="var"?xe(jt,Ur):Ye=="variable"?xe(Ur):Ke(Ur)}function Ur(Ye,xt){return Ye==")"?xe():Ye==";"?xe(Ur):xt=="in"||xt=="of"?(Se.marked="keyword",xe(it,Ur)):Ke(it,Ur)}function ri(Ye,xt){if(xt=="*")return Se.marked="keyword",xe(ri);if(Ye=="variable")return Ze(xt),xe(ri);if(Ye=="(")return xe(bt,Ft(")"),nt(Wi,")"),Pt,Ve,Pe,yt);if(x&&xt=="<")return xe(Ft(">"),nt(zt,">"),Pt,ri)}function Or(Ye,xt){if(xt=="*")return Se.marked="keyword",xe(Or);if(Ye=="variable")return Ze(xt),xe(Or);if(Ye=="(")return xe(bt,Ft(")"),nt(Wi,")"),Pt,Ve,yt);if(x&&xt=="<")return xe(Ft(">"),nt(zt,">"),Pt,Or)}function ka(Ye,xt){if(Ye=="keyword"||Ye=="variable")return Se.marked="type",xe(ka);if(xt=="<")return xe(Ft(">"),nt(zt,">"),Pt)}function Wi(Ye,xt){return xt=="@"&&xe(it,Wi),Ye=="spread"?xe(Wi):x&&Ne(xt)?(Se.marked="keyword",xe(Wi)):x&&Ye=="this"?xe(sn,Jn):Ke(Dn,sn,Jn)}function Bi(Ye,xt){return Ye=="variable"?eo(Ye,xt):ws(Ye,xt)}function eo(Ye,xt){if(Ye=="variable")return Ze(xt),xe(ws)}function ws(Ye,xt){if(xt=="<")return xe(Ft(">"),nt(zt,">"),Pt,ws);if(xt=="extends"||xt=="implements"||x&&Ye==",")return xt=="implements"&&(Se.marked="keyword"),xe(x?ve:it,ws);if(Ye=="{")return xe(Ft("}"),ko,Pt)}function ko(Ye,xt){if(Ye=="async"||Ye=="variable"&&(xt=="static"||xt=="get"||xt=="set"||x&&Ne(xt))&&Se.stream.match(/^\s+#?[\w$\xa1-\uffff]/,!1))return Se.marked="keyword",xe(ko);if(Ye=="variable"||Se.style=="keyword")return Se.marked="property",xe(Hi,ko);if(Ye=="number"||Ye=="string")return xe(Hi,ko);if(Ye=="[")return xe(it,sn,Ue("]"),Hi,ko);if(xt=="*")return Se.marked="keyword",xe(ko);if(x&&Ye=="(")return Ke(Or,ko);if(Ye==";"||Ye==",")return xe(ko);if(Ye=="}")return xe();if(xt=="@")return xe(it,ko)}function Hi(Ye,xt){if(xt=="!"||xt=="?")return xe(Hi);if(Ye==":")return xe(ve,Jn);if(xt=="=")return xe(_t);var Cn=Se.state.lexical.prev,Qn=Cn&&Cn.info=="interface";return Ke(Qn?Or:ri)}function Sl(Ye,xt){return xt=="*"?(Se.marked="keyword",xe(Jl,Ue(";"))):xt=="default"?(Se.marked="keyword",xe(it,Ue(";"))):Ye=="{"?xe(nt(Go,"}"),Jl,Ue(";")):Ke(Pe)}function Go(Ye,xt){if(xt=="as")return Se.marked="keyword",xe(Ue("variable"));if(Ye=="variable")return Ke(_t,Go)}function Za(Ye){return Ye=="string"?xe():Ye=="("?Ke(it):Ye=="."?Ke(Kt):Ke(Xa,Yi,Jl)}function Xa(Ye,xt){return Ye=="{"?wt(Xa,"}"):(Ye=="variable"&&Ze(xt),xt=="*"&&(Se.marked="keyword"),xe(Lu))}function Yi(Ye){if(Ye==",")return xe(Xa,Yi)}function Lu(Ye,xt){if(xt=="as")return Se.marked="keyword",xe(Xa)}function Jl(Ye,xt){if(xt=="from")return Se.marked="keyword",xe(it)}function wo(Ye){return Ye=="]"?xe():Ke(nt(_t,"]"))}function wr(){return Ke(Ft("form"),Dn,Ue("{"),Ft("}"),nt(Ta,"}"),Pt,Pt)}function Ta(){return Ke(Dn,Jn)}function Ss(Ye,xt){return Ye.lastType=="operator"||Ye.lastType==","||P.test(xt.charAt(0))||/[,.]/.test(xt.charAt(0))}function Zs(Ye,xt,Cn){return xt.tokenize==se&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(xt.lastType)||xt.lastType=="quasi"&&/\{\s*$/.test(Ye.string.slice(0,Ye.pos-(Cn||0)))}return{startState:function(Ye){var xt={tokenize:se,lastType:"sof",cc:[],lexical:new fe((Ye||0)-s,0,"block",!1),localVars:i.localVars,context:i.localVars&&new we(null,null,!1),indented:Ye||0};return i.globalVars&&typeof i.globalVars=="object"&&(xt.globalVars=i.globalVars),xt},token:function(Ye,xt){if(Ye.sol()&&(xt.lexical.hasOwnProperty("align")||(xt.lexical.align=!1),xt.indented=Ye.indentation(),oe(Ye,xt)),xt.tokenize!=V&&Ye.eatSpace())return null;var Cn=xt.tokenize(Ye,xt);return N=="comment"?Cn:(xt.lastType=N=="operator"&&(Y=="++"||Y=="--")?"incdec":N,me(xt,Cn,N,Y,Ye))},indent:function(Ye,xt){if(Ye.tokenize==V||Ye.tokenize==ne)return t.Pass;if(Ye.tokenize!=se)return 0;var Cn=xt&&xt.charAt(0),Qn=Ye.lexical,fn;if(!/^\s*else\b/.test(xt))for(var ur=Ye.cc.length-1;ur>=0;--ur){var Di=Ye.cc[ur];if(Di==Pt)Qn=Qn.prev;else if(Di!=er&&Di!=yt)break}for(;(Qn.type=="stat"||Qn.type=="form")&&(Cn=="}"||(fn=Ye.cc[Ye.cc.length-1])&&(fn==Kt||fn==vn)&&!/^[,\.=+\-*:?[\(]/.test(xt));)Qn=Qn.prev;l&&Qn.type==")"&&Qn.prev.type=="stat"&&(Qn=Qn.prev);var vo=Qn.type,rs=Cn==vo;return vo=="vardef"?Qn.indented+(Ye.lastType=="operator"||Ye.lastType==","?Qn.info.length+1:0):vo=="form"&&Cn=="{"?Qn.indented:vo=="form"?Qn.indented+s:vo=="stat"?Qn.indented+(Ss(Ye,xt)?l||s:0):Qn.info=="switch"&&!rs&&i.doubleIndentSwitch!=!1?Qn.indented+(/^(?:case|default)\b/.test(xt)?s:2*s):Qn.align?Qn.column+(rs?0:1):Qn.indented+(rs?0:s)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:f?null:"/*",blockCommentEnd:f?null:"*/",blockCommentContinue:f?null:" * ",lineComment:f?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:f?"json":"javascript",jsonldMode:o,jsonMode:f,expressionAllowed:Zs,skipExpression:function(Ye){me(Ye,"atom","atom","true",new t.StringStream("",2,null))}}}),t.registerHelper("wordChars","javascript",/[\w$]/),t.defineMIME("text/javascript","javascript"),t.defineMIME("text/ecmascript","javascript"),t.defineMIME("application/javascript","javascript"),t.defineMIME("application/x-javascript","javascript"),t.defineMIME("application/ecmascript","javascript"),t.defineMIME("application/json",{name:"javascript",json:!0}),t.defineMIME("application/x-json",{name:"javascript",json:!0}),t.defineMIME("application/manifest+json",{name:"javascript",json:!0}),t.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),t.defineMIME("text/typescript",{name:"javascript",typescript:!0}),t.defineMIME("application/typescript",{name:"javascript",typescript:!0})})}()),W9.exports}roe();var Q9={exports:{}},Y9;function ioe(){return Y9||(Y9=1,function(n,e){(function(t){t(jx())})(function(t){var r="CodeMirror-lint-markers",i="CodeMirror-lint-line-";function s(G,oe,he){var fe=document.createElement("div");fe.className="CodeMirror-lint-tooltip cm-s-"+G.options.theme,fe.appendChild(he.cloneNode(!0)),G.state.lint.options.selfContain?G.getWrapperElement().appendChild(fe):document.body.appendChild(fe);function Ee(me){if(!fe.parentNode)return t.off(document,"mousemove",Ee);var Se=Math.max(0,me.clientY-fe.offsetHeight-5),Ke=Math.max(0,Math.min(me.clientX+5,fe.ownerDocument.defaultView.innerWidth-fe.offsetWidth));fe.style.top=Se+"px",fe.style.left=Ke+"px"}return t.on(document,"mousemove",Ee),Ee(oe),fe.style.opacity!=null&&(fe.style.opacity=1),fe}function l(G){G.parentNode&&G.parentNode.removeChild(G)}function o(G){G.parentNode&&(G.style.opacity==null&&l(G),G.style.opacity=0,setTimeout(function(){l(G)},600))}function f(G,oe,he,fe){var Ee=s(G,oe,he);function me(){t.off(fe,"mouseout",me),Ee&&(o(Ee),Ee=null)}var Se=setInterval(function(){if(Ee)for(var Ke=fe;;Ke=Ke.parentNode){if(Ke&&Ke.nodeType==11&&(Ke=Ke.host),Ke==document.body)return;if(!Ke){me();break}}if(!Ee)return clearInterval(Se)},400);t.on(fe,"mouseout",me)}function y(G,oe,he){this.marked=[],oe instanceof Function&&(oe={getAnnotations:oe}),(!oe||oe===!0)&&(oe={}),this.options={},this.linterOptions=oe.options||{};for(var fe in x)this.options[fe]=x[fe];for(var fe in oe)x.hasOwnProperty(fe)?oe[fe]!=null&&(this.options[fe]=oe[fe]):oe.options||(this.linterOptions[fe]=oe[fe]);this.timeout=null,this.hasGutter=he,this.onMouseOver=function(Ee){ne(G,Ee)},this.waitingFor=0}var x={highlightLines:!1,tooltips:!0,delay:500,lintOnChange:!0,getAnnotations:null,async:!1,selfContain:null,formatAnnotation:null,onUpdateLinting:null};function B(G){var oe=G.state.lint;oe.hasGutter&&G.clearGutter(r),oe.options.highlightLines&&O(G);for(var he=0;he<oe.marked.length;++he)oe.marked[he].clear();oe.marked.length=0}function O(G){G.eachLine(function(oe){var he=oe.wrapClass&&/\bCodeMirror-lint-line-\w+\b/.exec(oe.wrapClass);he&&G.removeLineClass(oe,"wrap",he[0])})}function P(G,oe,he,fe,Ee){var me=document.createElement("div"),Se=me;return me.className="CodeMirror-lint-marker CodeMirror-lint-marker-"+he,fe&&(Se=me.appendChild(document.createElement("div")),Se.className="CodeMirror-lint-marker CodeMirror-lint-marker-multiple"),Ee!=!1&&t.on(Se,"mouseover",function(Ke){f(G,Ke,oe,Se)}),me}function U(G,oe){return G=="error"?G:oe}function j(G){for(var oe=[],he=0;he<G.length;++he){var fe=G[he],Ee=fe.from.line;(oe[Ee]||(oe[Ee]=[])).push(fe)}return oe}function N(G){var oe=G.severity;oe||(oe="error");var he=document.createElement("div");return he.className="CodeMirror-lint-message CodeMirror-lint-message-"+oe,typeof G.messageHTML<"u"?he.innerHTML=G.messageHTML:he.appendChild(document.createTextNode(G.message)),he}function Y(G,oe){var he=G.state.lint,fe=++he.waitingFor;function Ee(){fe=-1,G.off("change",Ee)}G.on("change",Ee),oe(G.getValue(),function(me,Se){G.off("change",Ee),he.waitingFor==fe&&(Se&&me instanceof t&&(me=Se),G.operation(function(){se(G,me)}))},he.linterOptions,G)}function H(G){var oe=G.state.lint;if(oe){var he=oe.options,fe=he.getAnnotations||G.getHelper(t.Pos(0,0),"lint");if(fe)if(he.async||fe.async)Y(G,fe);else{var Ee=fe(G.getValue(),oe.linterOptions,G);if(!Ee)return;Ee.then?Ee.then(function(me){G.operation(function(){se(G,me)})}):G.operation(function(){se(G,Ee)})}}}function se(G,oe){var he=G.state.lint;if(he){var fe=he.options;B(G);for(var Ee=j(oe),me=0;me<Ee.length;++me){var Se=Ee[me];if(Se){for(var Ke=null,xe=he.hasGutter&&document.createDocumentFragment(),at=0;at<Se.length;++at){var Ze=Se[at],Je=Ze.severity;Je||(Je="error"),Ke=U(Ke,Je),fe.formatAnnotation&&(Ze=fe.formatAnnotation(Ze)),he.hasGutter&&xe.appendChild(N(Ze)),Ze.to&&he.marked.push(G.markText(Ze.from,Ze.to,{className:"CodeMirror-lint-mark CodeMirror-lint-mark-"+Je,__annotation:Ze}))}he.hasGutter&&G.setGutterMarker(me,r,P(G,xe,Ke,Se.length>1,fe.tooltips)),fe.highlightLines&&G.addLineClass(me,"wrap",i+Ke)}}fe.onUpdateLinting&&fe.onUpdateLinting(oe,Ee,G)}}function re(G){var oe=G.state.lint;oe&&(clearTimeout(oe.timeout),oe.timeout=setTimeout(function(){H(G)},oe.options.delay))}function V(G,oe,he){for(var fe=he.target||he.srcElement,Ee=document.createDocumentFragment(),me=0;me<oe.length;me++){var Se=oe[me];Ee.appendChild(N(Se))}f(G,he,Ee,fe)}function ne(G,oe){var he=oe.target||oe.srcElement;if(/\bCodeMirror-lint-mark-/.test(he.className)){for(var fe=he.getBoundingClientRect(),Ee=(fe.left+fe.right)/2,me=(fe.top+fe.bottom)/2,Se=G.findMarksAt(G.coordsChar({left:Ee,top:me},"client")),Ke=[],xe=0;xe<Se.length;++xe){var at=Se[xe].__annotation;at&&Ke.push(at)}Ke.length&&V(G,Ke,oe)}}t.defineOption("lint",!1,function(G,oe,he){if(he&&he!=t.Init&&(B(G),G.state.lint.options.lintOnChange!==!1&&G.off("change",re),t.off(G.getWrapperElement(),"mouseover",G.state.lint.onMouseOver),clearTimeout(G.state.lint.timeout),delete G.state.lint),oe){for(var fe=G.getOption("gutters"),Ee=!1,me=0;me<fe.length;++me)fe[me]==r&&(Ee=!0);var Se=G.state.lint=new y(G,oe,Ee);Se.options.lintOnChange&&G.on("change",re),Se.options.tooltips!=!1&&Se.options.tooltips!="gutter"&&t.on(G.getWrapperElement(),"mouseover",Se.onMouseOver),H(G)}}),t.defineExtension("performLint",function(){H(this)})})}()),Q9.exports}ioe();var q9={exports:{}},V9;function ooe(){return V9||(V9=1,function(n,e){(function(t){t(jx())})(function(t){var r=/MSIE \d/.test(navigator.userAgent)&&(document.documentMode==null||document.documentMode<8),i=t.Pos,s={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<","<":">>",">":"<<"};function l(O){return O&&O.bracketRegex||/[(){}[\]]/}function o(O,P,U){var j=O.getLineHandle(P.line),N=P.ch-1,Y=U&&U.afterCursor;Y==null&&(Y=/(^| )cm-fat-cursor($| )/.test(O.getWrapperElement().className));var H=l(U),se=!Y&&N>=0&&H.test(j.text.charAt(N))&&s[j.text.charAt(N)]||H.test(j.text.charAt(N+1))&&s[j.text.charAt(++N)];if(!se)return null;var re=se.charAt(1)==">"?1:-1;if(U&&U.strict&&re>0!=(N==P.ch))return null;var V=O.getTokenTypeAt(i(P.line,N+1)),ne=f(O,i(P.line,N+(re>0?1:0)),re,V,U);return ne==null?null:{from:i(P.line,N),to:ne&&ne.pos,match:ne&&ne.ch==se.charAt(0),forward:re>0}}function f(O,P,U,j,N){for(var Y=N&&N.maxScanLineLength||1e4,H=N&&N.maxScanLines||1e3,se=[],re=l(N),V=U>0?Math.min(P.line+H,O.lastLine()+1):Math.max(O.firstLine()-1,P.line-H),ne=P.line;ne!=V;ne+=U){var G=O.getLine(ne);if(G){var oe=U>0?0:G.length-1,he=U>0?G.length:-1;if(!(G.length>Y))for(ne==P.line&&(oe=P.ch-(U<0?1:0));oe!=he;oe+=U){var fe=G.charAt(oe);if(re.test(fe)&&(j===void 0||(O.getTokenTypeAt(i(ne,oe+1))||"")==(j||""))){var Ee=s[fe];if(Ee&&Ee.charAt(1)==">"==U>0)se.push(fe);else if(se.length)se.pop();else return{pos:i(ne,oe),ch:fe}}}}}return ne-U==(U>0?O.lastLine():O.firstLine())?!1:null}function y(O,P,U){for(var j=O.state.matchBrackets.maxHighlightLineLength||1e3,N=U&&U.highlightNonMatching,Y=[],H=O.listSelections(),se=0;se<H.length;se++){var re=H[se].empty()&&o(O,H[se].head,U);if(re&&(re.match||N!==!1)&&O.getLine(re.from.line).length<=j){var V=re.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";Y.push(O.markText(re.from,i(re.from.line,re.from.ch+1),{className:V})),re.to&&O.getLine(re.to.line).length<=j&&Y.push(O.markText(re.to,i(re.to.line,re.to.ch+1),{className:V}))}}if(Y.length){r&&O.state.focused&&O.focus();var ne=function(){O.operation(function(){for(var G=0;G<Y.length;G++)Y[G].clear()})};if(P)setTimeout(ne,800);else return ne}}function x(O){O.operation(function(){O.state.matchBrackets.currentlyHighlighted&&(O.state.matchBrackets.currentlyHighlighted(),O.state.matchBrackets.currentlyHighlighted=null),O.state.matchBrackets.currentlyHighlighted=y(O,!1,O.state.matchBrackets)})}function B(O){O.state.matchBrackets&&O.state.matchBrackets.currentlyHighlighted&&(O.state.matchBrackets.currentlyHighlighted(),O.state.matchBrackets.currentlyHighlighted=null)}t.defineOption("matchBrackets",!1,function(O,P,U){U&&U!=t.Init&&(O.off("cursorActivity",x),O.off("focus",x),O.off("blur",B),B(O)),P&&(O.state.matchBrackets=typeof P=="object"?P:{},O.on("cursorActivity",x),O.on("focus",x),O.on("blur",B))}),t.defineExtension("matchBrackets",function(){y(this,!0)}),t.defineExtension("findMatchingBracket",function(O,P,U){return(U||typeof P=="boolean")&&(U?(U.strict=P,P=U):P=P?{strict:!0}:null),o(this,O,P)}),t.defineExtension("scanForBracket",function(O,P,U,j){return f(this,O,P,U,j)})})}()),q9.exports}ooe();const soe=/("(?:[^\\"]|\\.)*")|[:,]/g;function Tz(n,e={}){const t=JSON.stringify([1],void 0,e.indent===void 0?2:e.indent).slice(2,-3),r=t===""?1/0:e.maxLength===void 0?80:e.maxLength;let{replacer:i}=e;return function s(l,o,f){l&&typeof l.toJSON=="function"&&(l=l.toJSON());const y=JSON.stringify(l,i);if(y===void 0)return y;const x=r-o.length-f;if(y.length<=x){const B=y.replace(soe,(O,P)=>P||`${O} `);if(B.length<=x)return B}if(i!=null&&(l=JSON.parse(y),i=void 0),typeof l=="object"&&l!==null){const B=o+t,O=[];let P=0,U,j;if(Array.isArray(l)){U="[",j="]";const{length:N}=l;for(;P<N;P++)O.push(s(l[P],B,P===N-1?0:1)||"null")}else{U="{",j="}";const N=Object.keys(l),{length:Y}=N;for(;P<Y;P++){const H=N[P],se=`${JSON.stringify(H)}: `,re=s(l[H],B,se.length+(P===Y-1?0:1));re!==void 0&&O.push(se+re)}}if(O.length>0)return[U,t+O.join(`,
${B}`),j].join(`
${o}`)}return y}(n,"",0)}var Pv={exports:{}},aoe=Pv.exports,$9;function loe(){return $9||($9=1,function(n,e){(function(t,r){r(e)})(aoe,function(t){const r={isWhiteSpace:function(we){return we===" "||we===""||we==="\uFEFF"||we>="	"&&we<="\r"||we===""||we>=""&&we<=""||we==="\u2028"||we==="\u2029"||we===""||we===""||we===""},isWhiteSpaceJSON:function(we){return we===" "||we==="	"||we===`
`||we==="\r"},isLineTerminator:function(we){return we===`
`||we==="\r"||we==="\u2028"||we==="\u2029"},isLineTerminatorJSON:function(we){return we===`
`||we==="\r"},isIdentifierStart:function(we){return we==="$"||we==="_"||we>="A"&&we<="Z"||we>="a"&&we<="z"||we>=""&&r.NonAsciiIdentifierStart.test(we)},isIdentifierPart:function(we){return we==="$"||we==="_"||we>="A"&&we<="Z"||we>="a"&&we<="z"||we>="0"&&we<="9"||we>=""&&r.NonAsciiIdentifierPart.test(we)},NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F0\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,NonAsciiIdentifierPart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0\u08A2-\u08AC\u08E4-\u08FE\u0900-\u0963\u0966-\u096F\u0971-\u0977\u0979-\u097F\u0981-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C01-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58\u0C59\u0C60-\u0C63\u0C66-\u0C6F\u0C82\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D02\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D57\u0D60-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F0\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191C\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1CD0-\u1CD2\u1CD4-\u1CF6\u1D00-\u1DE6\u1DFC-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA697\uA69F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA827\uA840-\uA873\uA880-\uA8C4\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7B\uAA80-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE26\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/};function i(Ne){return Ne>="0"&&Ne<="9"||Ne>="A"&&Ne<="F"||Ne>="a"&&Ne<="f"}function s(Ne){return Ne>="0"&&Ne<="7"}function l(Ne){return Ne>="0"&&Ne<="9"}function o(Ne){return Ne.charCodeAt(0)===65279}const f={"'":"'",'"':'"',"\\":"\\",b:"\b",f:"\f",n:`
`,r:"\r",t:"	",v:"\v","/":"/"},y=Object.hasOwn,x={};function B(Ne,we){(typeof Ne!="string"||!(Ne instanceof String))&&(Ne=String(Ne));const De=we.mode==="json5",He=we.ignoreBOM,bt=we.ignoreComments||we.mode==="cjson"||De,Yt=we.ignoreTrailingCommas||De,yt=we.ignoreProtoKey,Ft=we.ignorePrototypeKeys,Pt=we.allowSingleQuotedStrings||De,Ue=we.allowDuplicateObjectKeys,Pe=we.reviver,Be=we.tokenize,it=we.rawTokens,_t=we.tokenLocations,pt=we.tokenPaths,Lt=De?r.isLineTerminator:r.isLineTerminatorJSON,nn=De?r.isWhiteSpace:r.isWhiteSpaceJSON,Kt=Ne.length;let vn=0,Gn=0,tn=0;const dr=[];let Pn,pn,$n;if(Be){let Qe=null,rt,ct;Pn=function(){if(Qe!==null)throw Error("internal error, token overlap");rt=vn+1,ct=tn-Gn+1,Qe=tn},pn=function(dt,qt){if(Qe!==tn){const Gt={type:dt};it&&(Gt.raw=Ne.substr(Qe,tn-Qe)),qt!==void 0&&(Gt.value=qt),_t&&(Gt.location={start:{column:ct,line:rt,offset:Qe}}),pt&&(Gt.path=$n.slice()),dr.push(Gt)}return Qe=null,qt},pt&&($n=[])}function lr(){let Qe;return tn<Kt?Qe=`Unexpected token ${JSON.stringify(Ne[tn])}`:Qe="Unexpected end of input",Qe}function vr(Qe){const rt=tn-Gn+1;++vn;const ct=Ee(Qe,Ne,tn,vn,rt),dt=SyntaxError(ct.message);return dt.reason=Qe,dt.excerpt=ct.excerpt,dt.pointer=ct.pointer,dt.location={start:{column:rt,line:vn,offset:tn}},dt}function Zn(Qe){throw Qe||(Qe=lr()),vr(Qe)}function Ge(Qe){Qe==="\r"&&Ne[tn]===`
`&&++tn,Gn=tn,++vn}function ce(){if(tn<Kt){Pn==null||Pn();const Qe=Ne[tn++];if(Qe==='"'||Qe==="'"&&Pt){const rt=p(Qe);return pn==null||pn("literal",rt),rt}if(Qe==="{")return pn==null||pn("symbol","{"),Hn();if(Qe==="[")return pn==null||pn("symbol","["),Ve();if(Qe==="-"||Qe==="."||l(Qe)||De&&(Qe==="+"||Qe==="I"||Qe==="N")){const rt=J();return pn==null||pn("literal",rt),rt}if(Qe==="n")return sn("null"),pn==null||pn("literal",null),null;if(Qe==="t")return sn("true"),pn==null||pn("literal",!0),!0;if(Qe==="f")return sn("false"),pn==null||pn("literal",!1),!1;--tn,pn==null||pn();return}}function pe(){let Qe;if(tn<Kt){Pn==null||Pn();const rt=Ne[tn++];if(rt==='"'||rt==="'"&&Pt){const ct=p(rt);return pn==null||pn("literal",ct),ct}if(rt==="{")return pn==null||pn("symbol","{"),Hn();if(rt==="[")return pn==null||pn("symbol","["),Ve();if(rt==="."||l(rt)){const ct=J();return pn==null||pn("literal",ct),ct}if(De&&r.isIdentifierStart(rt)||rt==="\\"&&Ne[tn]==="u"){const ct=tn-1;if(Qe=ve(),Qe===void 0){tn=ct,pn==null||pn();return}return pn==null||pn("literal",Qe),Qe}--tn,pn==null||pn();return}}function nt(){o(Ne)&&(Pn==null||Pn(),++tn,pn==null||pn("bom"))}function wt(){let Qe;function rt(){Qe||(Qe=!0,--tn,Pn(),++tn)}function ct(){Qe&&(Qe=!1,pn("whitespace"))}for(;tn<Kt;){const dt=Ne[tn++];if(Lt(dt))Pn&&rt(),Ge(dt);else if(nn(dt))Pn&&rt();else if(dt==="/"&&bt&&(Ne[tn]==="/"||Ne[tn]==="*"))Pn&&(--tn,ct(),Pn(),++tn),Ht(Ne[tn++]==="*"),pn==null||pn("comment");else{--tn;break}}pn&&ct()}function Ht(Qe){for(;tn<Kt;){const rt=Ne[tn++];if(Lt(rt)){if(!Qe){--tn;return}Ge(rt)}else if(rt==="*"&&Qe&&Ne[tn]==="/"){++tn;return}}Qe&&Zn("Unclosed multiline comment")}function sn(Qe){const rt=tn;for(let ct=1,dt=Qe.length;ct<dt;++ct)(tn>=Kt||Qe[ct]!==Ne[tn])&&(tn=rt-1,Zn()),++tn}function Hn(){let Qe={},rt=!1;for(;tn<Kt;){wt();const ct=pe();Ue===!1&&y(Qe,ct)&&Zn(`Duplicate key: "${ct}"`),wt(),Pn==null||Pn();let dt=Ne[tn++];if(pn==null||pn("symbol",dt),dt==="}"&&ct===void 0)return!Yt&&rt&&(--tn,Zn("Trailing comma in object")),Qe;if(dt===":"&&ct!==void 0){wt(),$n==null||$n.push(ct);let qt=ce();if($n==null||$n.pop(),qt===void 0&&Zn(`No value found for key "${ct}"`),typeof ct!="string"&&(!De||typeof ct!="number")&&Zn(`Wrong key type: "${ct}"`),Ft&&(ct in x||x[ct]!=null)||yt&&ct==="__proto__"||(Pe&&(qt=Pe(ct,qt)),qt!==void 0&&(rt=!0,ct==="__proto__"?Qe=Object.assign(JSON.parse(`{"__proto__":${JSON.stringify(qt)}}`),Qe):Qe[ct]=qt)),wt(),Pn==null||Pn(),dt=Ne[tn++],pn==null||pn("symbol",dt),dt!==","){if(dt==="}")return Qe;Zn()}}else--tn,Zn()}Zn()}function Ve(){const Qe=[];for(;tn<Kt;){wt(),$n==null||$n.push(Qe.length);let rt=ce();$n==null||$n.pop(),wt(),Pn==null||Pn();const ct=Ne[tn++];if(pn==null||pn("symbol",ct),rt!==void 0&&(Pe&&(rt=Pe(String(Qe.length),rt)),rt===void 0?(++Qe.length,rt=!0):Qe.push(rt)),ct===",")rt===void 0&&Zn("Elisions are not supported");else{if(ct==="]")return!Yt&&rt===void 0&&Qe.length&&(--tn,Zn("Trailing comma in array")),Qe;--tn,Zn()}}}function J(){--tn;let Qe=tn,rt=Ne[tn++];const ct=function(dt){const qt=Ne.substr(Qe,tn-Qe);let Gt;if(dt?Gt=Number.parseInt(qt.replace(/^0o?/,""),8):Gt=Number(qt),Number.isNaN(Gt))--tn,Zn(`Bad numeric literal - "${Ne.substr(Qe,tn-Qe+1)}"`);else if(!De&&!qt.match(/^-?(0|[1-9][0-9]*)(\.[0-9]+)?(e[+-]?[0-9]+)?$/i))--tn,Zn(`Non-json numeric literal - "${Ne.substr(Qe,tn-Qe+1)}"`);else return Gt};if((rt==="-"||rt==="+"&&De)&&(rt=Ne[tn++]),rt==="N"&&De)return sn("NaN"),Number.NaN;if(rt==="I"&&De)return sn("Infinity"),ct();if(rt>="1"&&rt<="9"){for(;tn<Kt&&l(Ne[tn]);)++tn;rt=Ne[tn++]}if(rt==="0"){rt=Ne[tn++];const dt=rt==="o"||rt==="O"||s(rt),qt=rt==="x"||rt==="X";if(De&&(dt||qt)){for(;tn<Kt&&(qt?i:s)(Ne[tn]);)++tn;let Gt=1;return Ne[Qe]==="-"?(Gt=-1,++Qe):Ne[Qe]==="+"&&++Qe,Gt*ct(dt)}}if(rt==="."){for(;tn<Kt&&l(Ne[tn]);)++tn;rt=Ne[tn++]}if(rt==="e"||rt==="E"){for(rt=Ne[tn++],(rt==="-"||rt==="+")&&++tn;tn<Kt&&l(Ne[tn]);)++tn;rt=Ne[tn++]}return--tn,ct()}function ve(){--tn;let Qe="";for(;tn<Kt;){let rt=Ne[tn++];if(rt==="\\"&&Ne[tn]==="u"&&i(Ne[tn+1])&&i(Ne[tn+2])&&i(Ne[tn+3])&&i(Ne[tn+4])&&(rt=String.fromCharCode(Number.parseInt(Ne.substr(tn+1,4),16)),tn+=5),Qe.length)if(r.isIdentifierPart(rt))Qe+=rt;else return--tn,Qe;else if(r.isIdentifierStart(rt))Qe+=rt;else return}Zn()}function p(Qe){let rt="";for(;tn<Kt;){let ct=Ne[tn++];if(ct===Qe)return rt;if(ct==="\\")if(tn>=Kt&&Zn(),ct=Ne[tn++],f[ct]&&(De||ct!=="v"&&(ct!=="'"||Pt)))rt+=f[ct];else if(De&&Lt(ct))Ge(ct);else if(ct==="u"||ct==="x"&&De){const dt=ct==="u"?4:2;for(let qt=0;qt<dt;++qt)tn>=Kt&&Zn(),i(Ne[tn])||Zn("Bad escape sequence"),tn++;rt+=String.fromCharCode(Number.parseInt(Ne.substr(tn-dt,dt),16))}else if(De&&s(ct)){let dt;ct<"4"&&s(Ne[tn])&&s(Ne[tn+1])?dt=3:s(Ne[tn])?dt=2:dt=1,tn+=dt-1,rt+=String.fromCharCode(Number.parseInt(Ne.substr(tn-dt,dt),8))}else De?rt+=ct:(--tn,Zn());else Lt(ct)?Zn():(!De&&ct.charCodeAt(0)<32&&(--tn,Zn("Unexpected control character")),rt+=ct)}Zn()}He&&nt(),wt();let Fe=ce();if(Fe!==void 0||tn<Kt){if(wt(),tn>=Kt)return Pe&&(Fe=Pe("",Fe)),Be?dr:Fe;Zn()}else Zn(tn?"No data, only a whitespace":"No data, empty input")}function O(Ne,we){return typeof we=="function"?we={reviver:we}:we||(we={}),B(Ne,we)}function P(Ne,we){we||(we={});const De=we.tokenize;we.tokenize=!0;const He=B(Ne,we);return we.tokenize=De,He}function U(Ne){return Ne.toString().replace(/~/g,"~0").replace(/\//g,"~1")}function j(Ne){return Ne.length===0?"":`/${Ne.map(U).join("/")}`}function N(Ne){return Ne.replace(/~1/g,"/").replace(/~0/g,"~")}function Y(Ne){if(Ne==="")return[];if(Ne[0]!=="/")throw new Error('Missing initial "/" in the reference');return Ne.substr(1).split("/").map(N)}function H(Ne,we){const De=Ne.substr(0,we).split(/\r?\n/),He=De.length,bt=De[He-1].length+1;return{line:He,column:bt}}function se(Ne,we,De){if(we>1){const He=/\r?\n/g;let bt;for(;bt=He.exec(Ne);)if(--we===1)return bt.index+De}return De-1}function re(Ne,we){const De=Math.max(0,we-20),He=Ne.substr(De,we-De);return(we>20?"...":"")+He.replace(/\r?\n/g,"")}function V(Ne,we){let De=Math.max(0,we-20);De+=we-De;const He=Ne.length-De;return Ne.substr(De,Math.min(20,He)).replace(/\r?\n/g,"")+(He>20?"...":"")}function ne(Ne,we){const De=re(Ne,we),He=V(Ne,we),bt=`${new Array(De.length+1).join("-")}^`;return{excerpt:De+He,pointer:bt}}function G(Ne){let we=Ne.message.replace("JSON.parse: ","").replace("JSON Parse error: ","");const De=we.charAt(0);return De>="a"&&(we=De.toUpperCase()+we.substr(1)),we}function oe(Ne,we){const De=/ in JSON at position (\d+)$/.exec(we);if(De){const He=+De[1],bt=H(Ne,He);return{offset:He,line:bt.line,column:bt.column,reason:we.substr(0,De.index)}}}function he(Ne,we){const De=/ end of JSON input$/.exec(we);if(De){const He=Ne.length,bt=H(Ne,He);return{offset:He,line:bt.line,column:bt.column,reason:we.substr(0,De.index+4)}}}function fe(Ne,we){const De=/ at line (\d+) column (\d+) of the JSON data$/.exec(we);if(De){const He=+De[1],bt=+De[2];return{offset:se(Ne,He,bt),line:He,column:bt,reason:we.substr(0,De.index)}}}function Ee(Ne,we,De,He,bt){const Yt=ne(we,De),yt=Yt.excerpt;let Ft,Pt;return typeof He=="number"?(Pt=Yt.pointer,Ft=`Parse error on line ${He}, column ${bt}:
${yt}
${Pt}
${Ne}`):Ft=`Parse error in JSON input:
${yt}
${Ne}`,{message:Ft,excerpt:yt,pointer:Pt}}function me(Ne,we){let De=G(we);const He=oe(Ne,De)||he(Ne,De)||fe(Ne,De);let bt,Yt,yt;He?(bt=He.offset,Yt=He.line,yt=He.column,De=He.reason):bt=0,we.reason=De;const Ft=Ee(De,Ne,bt,Yt,yt);return we.message=Ft.message,we.excerpt=Ft.excerpt,Ft.pointer&&(we.pointer=Ft.pointer,we.location={start:{column:yt,line:Yt,offset:bt}}),we}function Se(Ne,we){try{return JSON.parse(Ne,we)}catch(De){const He=me(Ne,De);if(De.location)throw He;return O(Ne,we)}}const Ke=typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor),xe=typeof process<"u"&&process.version.startsWith("v4.");function at(Ne){return Ne.ignoreBOM||Ne.ignoreComments||Ne.ignoreTrailingCommas||Ne.allowSingleQuotedStrings||Ne.allowDuplicateObjectKeys===!1||Ne.ignoreProtoKey||Ne.ignorePrototypeKeys||Ne.mode==="cjson"||Ne.mode==="json5"||Ke||xe}function Ze(Ne){if(typeof Ne=="function")return Ne;if(Ne)return Ne.reviver}function Je(Ne,we){return we||(we={}),at(we)?O(Ne,we):Se(Ne,Ze(we))}t.parse=Je,t.tokenize=P,t.pathToPointer=j,t.pointerToPath=Y,t.parseNative=Se,t.parseCustom=O,t.getErrorTexts=Ee,Object.defineProperty(t,"__esModule",{value:!0})})}(Pv,Pv.exports)),Pv.exports}var uoe=loe(),Ib={exports:{}},Aoe=Ib.exports,H9;function coe(){return H9||(H9=1,function(n,e){(function(t,r){n.exports=r()})(Aoe,function(){var t=typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:{};function r(Pe,Be){return Be={exports:{}},Pe(Be,Be.exports),Be.exports}var i=r(function(Pe){function Be(){var it=0,_t=1,pt=2,Lt=3,nn=4,Kt=5,vn=6,Gn=7,tn=8,dr=9,Pn=10,pn=11,$n=12,lr=13,vr=14,Zn=15,Ge=16,ce=17,pe=0,nt=1,wt=2,Ht=3,sn=4;function Hn(p,Fe){return 55296<=p.charCodeAt(Fe)&&p.charCodeAt(Fe)<=56319&&56320<=p.charCodeAt(Fe+1)&&p.charCodeAt(Fe+1)<=57343}function Ve(p,Fe){Fe===void 0&&(Fe=0);var Qe=p.charCodeAt(Fe);if(55296<=Qe&&Qe<=56319&&Fe<p.length-1){var rt=Qe,ct=p.charCodeAt(Fe+1);return 56320<=ct&&ct<=57343?(rt-55296)*1024+(ct-56320)+65536:rt}if(56320<=Qe&&Qe<=57343&&Fe>=1){var rt=p.charCodeAt(Fe-1),ct=Qe;return 55296<=rt&&rt<=56319?(rt-55296)*1024+(ct-56320)+65536:ct}return Qe}function J(p,Fe,Qe){var rt=[p].concat(Fe).concat([Qe]),ct=rt[rt.length-2],dt=Qe,qt=rt.lastIndexOf(vr);if(qt>1&&rt.slice(1,qt).every(function(on){return on==Lt})&&[Lt,lr,ce].indexOf(p)==-1)return wt;var Gt=rt.lastIndexOf(nn);if(Gt>0&&rt.slice(1,Gt).every(function(on){return on==nn})&&[$n,nn].indexOf(ct)==-1)return rt.filter(function(on){return on==nn}).length%2==1?Ht:sn;if(ct==it&&dt==_t)return pe;if(ct==pt||ct==it||ct==_t)return dt==vr&&Fe.every(function(on){return on==Lt})?wt:nt;if(dt==pt||dt==it||dt==_t)return nt;if(ct==vn&&(dt==vn||dt==Gn||dt==dr||dt==Pn))return pe;if((ct==dr||ct==Gn)&&(dt==Gn||dt==tn))return pe;if((ct==Pn||ct==tn)&&dt==tn)return pe;if(dt==Lt||dt==Zn)return pe;if(dt==Kt)return pe;if(ct==$n)return pe;var zt=rt.indexOf(Lt)!=-1?rt.lastIndexOf(Lt)-1:rt.length-2;return[lr,ce].indexOf(rt[zt])!=-1&&rt.slice(zt+1,-1).every(function(on){return on==Lt})&&dt==vr||ct==Zn&&[Ge,ce].indexOf(dt)!=-1?pe:Fe.indexOf(nn)!=-1?wt:ct==nn&&dt==nn?pe:nt}this.nextBreak=function(p,Fe){if(Fe===void 0&&(Fe=0),Fe<0)return 0;if(Fe>=p.length-1)return p.length;for(var Qe=ve(Ve(p,Fe)),rt=[],ct=Fe+1;ct<p.length;ct++)if(!Hn(p,ct-1)){var dt=ve(Ve(p,ct));if(J(Qe,rt,dt))return ct;rt.push(dt)}return p.length},this.splitGraphemes=function(p){for(var Fe=[],Qe=0,rt;(rt=this.nextBreak(p,Qe))<p.length;)Fe.push(p.slice(Qe,rt)),Qe=rt;return Qe<p.length&&Fe.push(p.slice(Qe)),Fe},this.iterateGraphemes=function(p){var Fe=0,Qe={next:(function(){var rt,ct;return(ct=this.nextBreak(p,Fe))<p.length?(rt=p.slice(Fe,ct),Fe=ct,{value:rt,done:!1}):Fe<p.length?(rt=p.slice(Fe),Fe=p.length,{value:rt,done:!1}):{value:void 0,done:!0}}).bind(this)};return typeof Symbol<"u"&&Symbol.iterator&&(Qe[Symbol.iterator]=function(){return Qe}),Qe},this.countGraphemes=function(p){for(var Fe=0,Qe=0,rt;(rt=this.nextBreak(p,Qe))<p.length;)Qe=rt,Fe++;return Qe<p.length&&Fe++,Fe};function ve(p){return 1536<=p&&p<=1541||p==1757||p==1807||p==2274||p==3406||p==69821||70082<=p&&p<=70083||p==72250||72326<=p&&p<=72329||p==73030?$n:p==13?it:p==10?_t:0<=p&&p<=9||11<=p&&p<=12||14<=p&&p<=31||127<=p&&p<=159||p==173||p==1564||p==6158||p==8203||8206<=p&&p<=8207||p==8232||p==8233||8234<=p&&p<=8238||8288<=p&&p<=8292||p==8293||8294<=p&&p<=8303||55296<=p&&p<=57343||p==65279||65520<=p&&p<=65528||65529<=p&&p<=65531||113824<=p&&p<=113827||119155<=p&&p<=119162||p==917504||p==917505||917506<=p&&p<=917535||917632<=p&&p<=917759||918e3<=p&&p<=921599?pt:768<=p&&p<=879||1155<=p&&p<=1159||1160<=p&&p<=1161||1425<=p&&p<=1469||p==1471||1473<=p&&p<=1474||1476<=p&&p<=1477||p==1479||1552<=p&&p<=1562||1611<=p&&p<=1631||p==1648||1750<=p&&p<=1756||1759<=p&&p<=1764||1767<=p&&p<=1768||1770<=p&&p<=1773||p==1809||1840<=p&&p<=1866||1958<=p&&p<=1968||2027<=p&&p<=2035||2070<=p&&p<=2073||2075<=p&&p<=2083||2085<=p&&p<=2087||2089<=p&&p<=2093||2137<=p&&p<=2139||2260<=p&&p<=2273||2275<=p&&p<=2306||p==2362||p==2364||2369<=p&&p<=2376||p==2381||2385<=p&&p<=2391||2402<=p&&p<=2403||p==2433||p==2492||p==2494||2497<=p&&p<=2500||p==2509||p==2519||2530<=p&&p<=2531||2561<=p&&p<=2562||p==2620||2625<=p&&p<=2626||2631<=p&&p<=2632||2635<=p&&p<=2637||p==2641||2672<=p&&p<=2673||p==2677||2689<=p&&p<=2690||p==2748||2753<=p&&p<=2757||2759<=p&&p<=2760||p==2765||2786<=p&&p<=2787||2810<=p&&p<=2815||p==2817||p==2876||p==2878||p==2879||2881<=p&&p<=2884||p==2893||p==2902||p==2903||2914<=p&&p<=2915||p==2946||p==3006||p==3008||p==3021||p==3031||p==3072||3134<=p&&p<=3136||3142<=p&&p<=3144||3146<=p&&p<=3149||3157<=p&&p<=3158||3170<=p&&p<=3171||p==3201||p==3260||p==3263||p==3266||p==3270||3276<=p&&p<=3277||3285<=p&&p<=3286||3298<=p&&p<=3299||3328<=p&&p<=3329||3387<=p&&p<=3388||p==3390||3393<=p&&p<=3396||p==3405||p==3415||3426<=p&&p<=3427||p==3530||p==3535||3538<=p&&p<=3540||p==3542||p==3551||p==3633||3636<=p&&p<=3642||3655<=p&&p<=3662||p==3761||3764<=p&&p<=3769||3771<=p&&p<=3772||3784<=p&&p<=3789||3864<=p&&p<=3865||p==3893||p==3895||p==3897||3953<=p&&p<=3966||3968<=p&&p<=3972||3974<=p&&p<=3975||3981<=p&&p<=3991||3993<=p&&p<=4028||p==4038||4141<=p&&p<=4144||4146<=p&&p<=4151||4153<=p&&p<=4154||4157<=p&&p<=4158||4184<=p&&p<=4185||4190<=p&&p<=4192||4209<=p&&p<=4212||p==4226||4229<=p&&p<=4230||p==4237||p==4253||4957<=p&&p<=4959||5906<=p&&p<=5908||5938<=p&&p<=5940||5970<=p&&p<=5971||6002<=p&&p<=6003||6068<=p&&p<=6069||6071<=p&&p<=6077||p==6086||6089<=p&&p<=6099||p==6109||6155<=p&&p<=6157||6277<=p&&p<=6278||p==6313||6432<=p&&p<=6434||6439<=p&&p<=6440||p==6450||6457<=p&&p<=6459||6679<=p&&p<=6680||p==6683||p==6742||6744<=p&&p<=6750||p==6752||p==6754||6757<=p&&p<=6764||6771<=p&&p<=6780||p==6783||6832<=p&&p<=6845||p==6846||6912<=p&&p<=6915||p==6964||6966<=p&&p<=6970||p==6972||p==6978||7019<=p&&p<=7027||7040<=p&&p<=7041||7074<=p&&p<=7077||7080<=p&&p<=7081||7083<=p&&p<=7085||p==7142||7144<=p&&p<=7145||p==7149||7151<=p&&p<=7153||7212<=p&&p<=7219||7222<=p&&p<=7223||7376<=p&&p<=7378||7380<=p&&p<=7392||7394<=p&&p<=7400||p==7405||p==7412||7416<=p&&p<=7417||7616<=p&&p<=7673||7675<=p&&p<=7679||p==8204||8400<=p&&p<=8412||8413<=p&&p<=8416||p==8417||8418<=p&&p<=8420||8421<=p&&p<=8432||11503<=p&&p<=11505||p==11647||11744<=p&&p<=11775||12330<=p&&p<=12333||12334<=p&&p<=12335||12441<=p&&p<=12442||p==42607||42608<=p&&p<=42610||42612<=p&&p<=42621||42654<=p&&p<=42655||42736<=p&&p<=42737||p==43010||p==43014||p==43019||43045<=p&&p<=43046||43204<=p&&p<=43205||43232<=p&&p<=43249||43302<=p&&p<=43309||43335<=p&&p<=43345||43392<=p&&p<=43394||p==43443||43446<=p&&p<=43449||p==43452||p==43493||43561<=p&&p<=43566||43569<=p&&p<=43570||43573<=p&&p<=43574||p==43587||p==43596||p==43644||p==43696||43698<=p&&p<=43700||43703<=p&&p<=43704||43710<=p&&p<=43711||p==43713||43756<=p&&p<=43757||p==43766||p==44005||p==44008||p==44013||p==64286||65024<=p&&p<=65039||65056<=p&&p<=65071||65438<=p&&p<=65439||p==66045||p==66272||66422<=p&&p<=66426||68097<=p&&p<=68099||68101<=p&&p<=68102||68108<=p&&p<=68111||68152<=p&&p<=68154||p==68159||68325<=p&&p<=68326||p==69633||69688<=p&&p<=69702||69759<=p&&p<=69761||69811<=p&&p<=69814||69817<=p&&p<=69818||69888<=p&&p<=69890||69927<=p&&p<=69931||69933<=p&&p<=69940||p==70003||70016<=p&&p<=70017||70070<=p&&p<=70078||70090<=p&&p<=70092||70191<=p&&p<=70193||p==70196||70198<=p&&p<=70199||p==70206||p==70367||70371<=p&&p<=70378||70400<=p&&p<=70401||p==70460||p==70462||p==70464||p==70487||70502<=p&&p<=70508||70512<=p&&p<=70516||70712<=p&&p<=70719||70722<=p&&p<=70724||p==70726||p==70832||70835<=p&&p<=70840||p==70842||p==70845||70847<=p&&p<=70848||70850<=p&&p<=70851||p==71087||71090<=p&&p<=71093||71100<=p&&p<=71101||71103<=p&&p<=71104||71132<=p&&p<=71133||71219<=p&&p<=71226||p==71229||71231<=p&&p<=71232||p==71339||p==71341||71344<=p&&p<=71349||p==71351||71453<=p&&p<=71455||71458<=p&&p<=71461||71463<=p&&p<=71467||72193<=p&&p<=72198||72201<=p&&p<=72202||72243<=p&&p<=72248||72251<=p&&p<=72254||p==72263||72273<=p&&p<=72278||72281<=p&&p<=72283||72330<=p&&p<=72342||72344<=p&&p<=72345||72752<=p&&p<=72758||72760<=p&&p<=72765||p==72767||72850<=p&&p<=72871||72874<=p&&p<=72880||72882<=p&&p<=72883||72885<=p&&p<=72886||73009<=p&&p<=73014||p==73018||73020<=p&&p<=73021||73023<=p&&p<=73029||p==73031||92912<=p&&p<=92916||92976<=p&&p<=92982||94095<=p&&p<=94098||113821<=p&&p<=113822||p==119141||119143<=p&&p<=119145||119150<=p&&p<=119154||119163<=p&&p<=119170||119173<=p&&p<=119179||119210<=p&&p<=119213||119362<=p&&p<=119364||121344<=p&&p<=121398||121403<=p&&p<=121452||p==121461||p==121476||121499<=p&&p<=121503||121505<=p&&p<=121519||122880<=p&&p<=122886||122888<=p&&p<=122904||122907<=p&&p<=122913||122915<=p&&p<=122916||122918<=p&&p<=122922||125136<=p&&p<=125142||125252<=p&&p<=125258||917536<=p&&p<=917631||917760<=p&&p<=917999?Lt:127462<=p&&p<=127487?nn:p==2307||p==2363||2366<=p&&p<=2368||2377<=p&&p<=2380||2382<=p&&p<=2383||2434<=p&&p<=2435||2495<=p&&p<=2496||2503<=p&&p<=2504||2507<=p&&p<=2508||p==2563||2622<=p&&p<=2624||p==2691||2750<=p&&p<=2752||p==2761||2763<=p&&p<=2764||2818<=p&&p<=2819||p==2880||2887<=p&&p<=2888||2891<=p&&p<=2892||p==3007||3009<=p&&p<=3010||3014<=p&&p<=3016||3018<=p&&p<=3020||3073<=p&&p<=3075||3137<=p&&p<=3140||3202<=p&&p<=3203||p==3262||3264<=p&&p<=3265||3267<=p&&p<=3268||3271<=p&&p<=3272||3274<=p&&p<=3275||3330<=p&&p<=3331||3391<=p&&p<=3392||3398<=p&&p<=3400||3402<=p&&p<=3404||3458<=p&&p<=3459||3536<=p&&p<=3537||3544<=p&&p<=3550||3570<=p&&p<=3571||p==3635||p==3763||3902<=p&&p<=3903||p==3967||p==4145||4155<=p&&p<=4156||4182<=p&&p<=4183||p==4228||p==6070||6078<=p&&p<=6085||6087<=p&&p<=6088||6435<=p&&p<=6438||6441<=p&&p<=6443||6448<=p&&p<=6449||6451<=p&&p<=6456||6681<=p&&p<=6682||p==6741||p==6743||6765<=p&&p<=6770||p==6916||p==6965||p==6971||6973<=p&&p<=6977||6979<=p&&p<=6980||p==7042||p==7073||7078<=p&&p<=7079||p==7082||p==7143||7146<=p&&p<=7148||p==7150||7154<=p&&p<=7155||7204<=p&&p<=7211||7220<=p&&p<=7221||p==7393||7410<=p&&p<=7411||p==7415||43043<=p&&p<=43044||p==43047||43136<=p&&p<=43137||43188<=p&&p<=43203||43346<=p&&p<=43347||p==43395||43444<=p&&p<=43445||43450<=p&&p<=43451||43453<=p&&p<=43456||43567<=p&&p<=43568||43571<=p&&p<=43572||p==43597||p==43755||43758<=p&&p<=43759||p==43765||44003<=p&&p<=44004||44006<=p&&p<=44007||44009<=p&&p<=44010||p==44012||p==69632||p==69634||p==69762||69808<=p&&p<=69810||69815<=p&&p<=69816||p==69932||p==70018||70067<=p&&p<=70069||70079<=p&&p<=70080||70188<=p&&p<=70190||70194<=p&&p<=70195||p==70197||70368<=p&&p<=70370||70402<=p&&p<=70403||p==70463||70465<=p&&p<=70468||70471<=p&&p<=70472||70475<=p&&p<=70477||70498<=p&&p<=70499||70709<=p&&p<=70711||70720<=p&&p<=70721||p==70725||70833<=p&&p<=70834||p==70841||70843<=p&&p<=70844||p==70846||p==70849||71088<=p&&p<=71089||71096<=p&&p<=71099||p==71102||71216<=p&&p<=71218||71227<=p&&p<=71228||p==71230||p==71340||71342<=p&&p<=71343||p==71350||71456<=p&&p<=71457||p==71462||72199<=p&&p<=72200||p==72249||72279<=p&&p<=72280||p==72343||p==72751||p==72766||p==72873||p==72881||p==72884||94033<=p&&p<=94078||p==119142||p==119149?Kt:4352<=p&&p<=4447||43360<=p&&p<=43388?vn:4448<=p&&p<=4519||55216<=p&&p<=55238?Gn:4520<=p&&p<=4607||55243<=p&&p<=55291?tn:p==44032||p==44060||p==44088||p==44116||p==44144||p==44172||p==44200||p==44228||p==44256||p==44284||p==44312||p==44340||p==44368||p==44396||p==44424||p==44452||p==44480||p==44508||p==44536||p==44564||p==44592||p==44620||p==44648||p==44676||p==44704||p==44732||p==44760||p==44788||p==44816||p==44844||p==44872||p==44900||p==44928||p==44956||p==44984||p==45012||p==45040||p==45068||p==45096||p==45124||p==45152||p==45180||p==45208||p==45236||p==45264||p==45292||p==45320||p==45348||p==45376||p==45404||p==45432||p==45460||p==45488||p==45516||p==45544||p==45572||p==45600||p==45628||p==45656||p==45684||p==45712||p==45740||p==45768||p==45796||p==45824||p==45852||p==45880||p==45908||p==45936||p==45964||p==45992||p==46020||p==46048||p==46076||p==46104||p==46132||p==46160||p==46188||p==46216||p==46244||p==46272||p==46300||p==46328||p==46356||p==46384||p==46412||p==46440||p==46468||p==46496||p==46524||p==46552||p==46580||p==46608||p==46636||p==46664||p==46692||p==46720||p==46748||p==46776||p==46804||p==46832||p==46860||p==46888||p==46916||p==46944||p==46972||p==47e3||p==47028||p==47056||p==47084||p==47112||p==47140||p==47168||p==47196||p==47224||p==47252||p==47280||p==47308||p==47336||p==47364||p==47392||p==47420||p==47448||p==47476||p==47504||p==47532||p==47560||p==47588||p==47616||p==47644||p==47672||p==47700||p==47728||p==47756||p==47784||p==47812||p==47840||p==47868||p==47896||p==47924||p==47952||p==47980||p==48008||p==48036||p==48064||p==48092||p==48120||p==48148||p==48176||p==48204||p==48232||p==48260||p==48288||p==48316||p==48344||p==48372||p==48400||p==48428||p==48456||p==48484||p==48512||p==48540||p==48568||p==48596||p==48624||p==48652||p==48680||p==48708||p==48736||p==48764||p==48792||p==48820||p==48848||p==48876||p==48904||p==48932||p==48960||p==48988||p==49016||p==49044||p==49072||p==49100||p==49128||p==49156||p==49184||p==49212||p==49240||p==49268||p==49296||p==49324||p==49352||p==49380||p==49408||p==49436||p==49464||p==49492||p==49520||p==49548||p==49576||p==49604||p==49632||p==49660||p==49688||p==49716||p==49744||p==49772||p==49800||p==49828||p==49856||p==49884||p==49912||p==49940||p==49968||p==49996||p==50024||p==50052||p==50080||p==50108||p==50136||p==50164||p==50192||p==50220||p==50248||p==50276||p==50304||p==50332||p==50360||p==50388||p==50416||p==50444||p==50472||p==50500||p==50528||p==50556||p==50584||p==50612||p==50640||p==50668||p==50696||p==50724||p==50752||p==50780||p==50808||p==50836||p==50864||p==50892||p==50920||p==50948||p==50976||p==51004||p==51032||p==51060||p==51088||p==51116||p==51144||p==51172||p==51200||p==51228||p==51256||p==51284||p==51312||p==51340||p==51368||p==51396||p==51424||p==51452||p==51480||p==51508||p==51536||p==51564||p==51592||p==51620||p==51648||p==51676||p==51704||p==51732||p==51760||p==51788||p==51816||p==51844||p==51872||p==51900||p==51928||p==51956||p==51984||p==52012||p==52040||p==52068||p==52096||p==52124||p==52152||p==52180||p==52208||p==52236||p==52264||p==52292||p==52320||p==52348||p==52376||p==52404||p==52432||p==52460||p==52488||p==52516||p==52544||p==52572||p==52600||p==52628||p==52656||p==52684||p==52712||p==52740||p==52768||p==52796||p==52824||p==52852||p==52880||p==52908||p==52936||p==52964||p==52992||p==53020||p==53048||p==53076||p==53104||p==53132||p==53160||p==53188||p==53216||p==53244||p==53272||p==53300||p==53328||p==53356||p==53384||p==53412||p==53440||p==53468||p==53496||p==53524||p==53552||p==53580||p==53608||p==53636||p==53664||p==53692||p==53720||p==53748||p==53776||p==53804||p==53832||p==53860||p==53888||p==53916||p==53944||p==53972||p==54e3||p==54028||p==54056||p==54084||p==54112||p==54140||p==54168||p==54196||p==54224||p==54252||p==54280||p==54308||p==54336||p==54364||p==54392||p==54420||p==54448||p==54476||p==54504||p==54532||p==54560||p==54588||p==54616||p==54644||p==54672||p==54700||p==54728||p==54756||p==54784||p==54812||p==54840||p==54868||p==54896||p==54924||p==54952||p==54980||p==55008||p==55036||p==55064||p==55092||p==55120||p==55148||p==55176?dr:44033<=p&&p<=44059||44061<=p&&p<=44087||44089<=p&&p<=44115||44117<=p&&p<=44143||44145<=p&&p<=44171||44173<=p&&p<=44199||44201<=p&&p<=44227||44229<=p&&p<=44255||44257<=p&&p<=44283||44285<=p&&p<=44311||44313<=p&&p<=44339||44341<=p&&p<=44367||44369<=p&&p<=44395||44397<=p&&p<=44423||44425<=p&&p<=44451||44453<=p&&p<=44479||44481<=p&&p<=44507||44509<=p&&p<=44535||44537<=p&&p<=44563||44565<=p&&p<=44591||44593<=p&&p<=44619||44621<=p&&p<=44647||44649<=p&&p<=44675||44677<=p&&p<=44703||44705<=p&&p<=44731||44733<=p&&p<=44759||44761<=p&&p<=44787||44789<=p&&p<=44815||44817<=p&&p<=44843||44845<=p&&p<=44871||44873<=p&&p<=44899||44901<=p&&p<=44927||44929<=p&&p<=44955||44957<=p&&p<=44983||44985<=p&&p<=45011||45013<=p&&p<=45039||45041<=p&&p<=45067||45069<=p&&p<=45095||45097<=p&&p<=45123||45125<=p&&p<=45151||45153<=p&&p<=45179||45181<=p&&p<=45207||45209<=p&&p<=45235||45237<=p&&p<=45263||45265<=p&&p<=45291||45293<=p&&p<=45319||45321<=p&&p<=45347||45349<=p&&p<=45375||45377<=p&&p<=45403||45405<=p&&p<=45431||45433<=p&&p<=45459||45461<=p&&p<=45487||45489<=p&&p<=45515||45517<=p&&p<=45543||45545<=p&&p<=45571||45573<=p&&p<=45599||45601<=p&&p<=45627||45629<=p&&p<=45655||45657<=p&&p<=45683||45685<=p&&p<=45711||45713<=p&&p<=45739||45741<=p&&p<=45767||45769<=p&&p<=45795||45797<=p&&p<=45823||45825<=p&&p<=45851||45853<=p&&p<=45879||45881<=p&&p<=45907||45909<=p&&p<=45935||45937<=p&&p<=45963||45965<=p&&p<=45991||45993<=p&&p<=46019||46021<=p&&p<=46047||46049<=p&&p<=46075||46077<=p&&p<=46103||46105<=p&&p<=46131||46133<=p&&p<=46159||46161<=p&&p<=46187||46189<=p&&p<=46215||46217<=p&&p<=46243||46245<=p&&p<=46271||46273<=p&&p<=46299||46301<=p&&p<=46327||46329<=p&&p<=46355||46357<=p&&p<=46383||46385<=p&&p<=46411||46413<=p&&p<=46439||46441<=p&&p<=46467||46469<=p&&p<=46495||46497<=p&&p<=46523||46525<=p&&p<=46551||46553<=p&&p<=46579||46581<=p&&p<=46607||46609<=p&&p<=46635||46637<=p&&p<=46663||46665<=p&&p<=46691||46693<=p&&p<=46719||46721<=p&&p<=46747||46749<=p&&p<=46775||46777<=p&&p<=46803||46805<=p&&p<=46831||46833<=p&&p<=46859||46861<=p&&p<=46887||46889<=p&&p<=46915||46917<=p&&p<=46943||46945<=p&&p<=46971||46973<=p&&p<=46999||47001<=p&&p<=47027||47029<=p&&p<=47055||47057<=p&&p<=47083||47085<=p&&p<=47111||47113<=p&&p<=47139||47141<=p&&p<=47167||47169<=p&&p<=47195||47197<=p&&p<=47223||47225<=p&&p<=47251||47253<=p&&p<=47279||47281<=p&&p<=47307||47309<=p&&p<=47335||47337<=p&&p<=47363||47365<=p&&p<=47391||47393<=p&&p<=47419||47421<=p&&p<=47447||47449<=p&&p<=47475||47477<=p&&p<=47503||47505<=p&&p<=47531||47533<=p&&p<=47559||47561<=p&&p<=47587||47589<=p&&p<=47615||47617<=p&&p<=47643||47645<=p&&p<=47671||47673<=p&&p<=47699||47701<=p&&p<=47727||47729<=p&&p<=47755||47757<=p&&p<=47783||47785<=p&&p<=47811||47813<=p&&p<=47839||47841<=p&&p<=47867||47869<=p&&p<=47895||47897<=p&&p<=47923||47925<=p&&p<=47951||47953<=p&&p<=47979||47981<=p&&p<=48007||48009<=p&&p<=48035||48037<=p&&p<=48063||48065<=p&&p<=48091||48093<=p&&p<=48119||48121<=p&&p<=48147||48149<=p&&p<=48175||48177<=p&&p<=48203||48205<=p&&p<=48231||48233<=p&&p<=48259||48261<=p&&p<=48287||48289<=p&&p<=48315||48317<=p&&p<=48343||48345<=p&&p<=48371||48373<=p&&p<=48399||48401<=p&&p<=48427||48429<=p&&p<=48455||48457<=p&&p<=48483||48485<=p&&p<=48511||48513<=p&&p<=48539||48541<=p&&p<=48567||48569<=p&&p<=48595||48597<=p&&p<=48623||48625<=p&&p<=48651||48653<=p&&p<=48679||48681<=p&&p<=48707||48709<=p&&p<=48735||48737<=p&&p<=48763||48765<=p&&p<=48791||48793<=p&&p<=48819||48821<=p&&p<=48847||48849<=p&&p<=48875||48877<=p&&p<=48903||48905<=p&&p<=48931||48933<=p&&p<=48959||48961<=p&&p<=48987||48989<=p&&p<=49015||49017<=p&&p<=49043||49045<=p&&p<=49071||49073<=p&&p<=49099||49101<=p&&p<=49127||49129<=p&&p<=49155||49157<=p&&p<=49183||49185<=p&&p<=49211||49213<=p&&p<=49239||49241<=p&&p<=49267||49269<=p&&p<=49295||49297<=p&&p<=49323||49325<=p&&p<=49351||49353<=p&&p<=49379||49381<=p&&p<=49407||49409<=p&&p<=49435||49437<=p&&p<=49463||49465<=p&&p<=49491||49493<=p&&p<=49519||49521<=p&&p<=49547||49549<=p&&p<=49575||49577<=p&&p<=49603||49605<=p&&p<=49631||49633<=p&&p<=49659||49661<=p&&p<=49687||49689<=p&&p<=49715||49717<=p&&p<=49743||49745<=p&&p<=49771||49773<=p&&p<=49799||49801<=p&&p<=49827||49829<=p&&p<=49855||49857<=p&&p<=49883||49885<=p&&p<=49911||49913<=p&&p<=49939||49941<=p&&p<=49967||49969<=p&&p<=49995||49997<=p&&p<=50023||50025<=p&&p<=50051||50053<=p&&p<=50079||50081<=p&&p<=50107||50109<=p&&p<=50135||50137<=p&&p<=50163||50165<=p&&p<=50191||50193<=p&&p<=50219||50221<=p&&p<=50247||50249<=p&&p<=50275||50277<=p&&p<=50303||50305<=p&&p<=50331||50333<=p&&p<=50359||50361<=p&&p<=50387||50389<=p&&p<=50415||50417<=p&&p<=50443||50445<=p&&p<=50471||50473<=p&&p<=50499||50501<=p&&p<=50527||50529<=p&&p<=50555||50557<=p&&p<=50583||50585<=p&&p<=50611||50613<=p&&p<=50639||50641<=p&&p<=50667||50669<=p&&p<=50695||50697<=p&&p<=50723||50725<=p&&p<=50751||50753<=p&&p<=50779||50781<=p&&p<=50807||50809<=p&&p<=50835||50837<=p&&p<=50863||50865<=p&&p<=50891||50893<=p&&p<=50919||50921<=p&&p<=50947||50949<=p&&p<=50975||50977<=p&&p<=51003||51005<=p&&p<=51031||51033<=p&&p<=51059||51061<=p&&p<=51087||51089<=p&&p<=51115||51117<=p&&p<=51143||51145<=p&&p<=51171||51173<=p&&p<=51199||51201<=p&&p<=51227||51229<=p&&p<=51255||51257<=p&&p<=51283||51285<=p&&p<=51311||51313<=p&&p<=51339||51341<=p&&p<=51367||51369<=p&&p<=51395||51397<=p&&p<=51423||51425<=p&&p<=51451||51453<=p&&p<=51479||51481<=p&&p<=51507||51509<=p&&p<=51535||51537<=p&&p<=51563||51565<=p&&p<=51591||51593<=p&&p<=51619||51621<=p&&p<=51647||51649<=p&&p<=51675||51677<=p&&p<=51703||51705<=p&&p<=51731||51733<=p&&p<=51759||51761<=p&&p<=51787||51789<=p&&p<=51815||51817<=p&&p<=51843||51845<=p&&p<=51871||51873<=p&&p<=51899||51901<=p&&p<=51927||51929<=p&&p<=51955||51957<=p&&p<=51983||51985<=p&&p<=52011||52013<=p&&p<=52039||52041<=p&&p<=52067||52069<=p&&p<=52095||52097<=p&&p<=52123||52125<=p&&p<=52151||52153<=p&&p<=52179||52181<=p&&p<=52207||52209<=p&&p<=52235||52237<=p&&p<=52263||52265<=p&&p<=52291||52293<=p&&p<=52319||52321<=p&&p<=52347||52349<=p&&p<=52375||52377<=p&&p<=52403||52405<=p&&p<=52431||52433<=p&&p<=52459||52461<=p&&p<=52487||52489<=p&&p<=52515||52517<=p&&p<=52543||52545<=p&&p<=52571||52573<=p&&p<=52599||52601<=p&&p<=52627||52629<=p&&p<=52655||52657<=p&&p<=52683||52685<=p&&p<=52711||52713<=p&&p<=52739||52741<=p&&p<=52767||52769<=p&&p<=52795||52797<=p&&p<=52823||52825<=p&&p<=52851||52853<=p&&p<=52879||52881<=p&&p<=52907||52909<=p&&p<=52935||52937<=p&&p<=52963||52965<=p&&p<=52991||52993<=p&&p<=53019||53021<=p&&p<=53047||53049<=p&&p<=53075||53077<=p&&p<=53103||53105<=p&&p<=53131||53133<=p&&p<=53159||53161<=p&&p<=53187||53189<=p&&p<=53215||53217<=p&&p<=53243||53245<=p&&p<=53271||53273<=p&&p<=53299||53301<=p&&p<=53327||53329<=p&&p<=53355||53357<=p&&p<=53383||53385<=p&&p<=53411||53413<=p&&p<=53439||53441<=p&&p<=53467||53469<=p&&p<=53495||53497<=p&&p<=53523||53525<=p&&p<=53551||53553<=p&&p<=53579||53581<=p&&p<=53607||53609<=p&&p<=53635||53637<=p&&p<=53663||53665<=p&&p<=53691||53693<=p&&p<=53719||53721<=p&&p<=53747||53749<=p&&p<=53775||53777<=p&&p<=53803||53805<=p&&p<=53831||53833<=p&&p<=53859||53861<=p&&p<=53887||53889<=p&&p<=53915||53917<=p&&p<=53943||53945<=p&&p<=53971||53973<=p&&p<=53999||54001<=p&&p<=54027||54029<=p&&p<=54055||54057<=p&&p<=54083||54085<=p&&p<=54111||54113<=p&&p<=54139||54141<=p&&p<=54167||54169<=p&&p<=54195||54197<=p&&p<=54223||54225<=p&&p<=54251||54253<=p&&p<=54279||54281<=p&&p<=54307||54309<=p&&p<=54335||54337<=p&&p<=54363||54365<=p&&p<=54391||54393<=p&&p<=54419||54421<=p&&p<=54447||54449<=p&&p<=54475||54477<=p&&p<=54503||54505<=p&&p<=54531||54533<=p&&p<=54559||54561<=p&&p<=54587||54589<=p&&p<=54615||54617<=p&&p<=54643||54645<=p&&p<=54671||54673<=p&&p<=54699||54701<=p&&p<=54727||54729<=p&&p<=54755||54757<=p&&p<=54783||54785<=p&&p<=54811||54813<=p&&p<=54839||54841<=p&&p<=54867||54869<=p&&p<=54895||54897<=p&&p<=54923||54925<=p&&p<=54951||54953<=p&&p<=54979||54981<=p&&p<=55007||55009<=p&&p<=55035||55037<=p&&p<=55063||55065<=p&&p<=55091||55093<=p&&p<=55119||55121<=p&&p<=55147||55149<=p&&p<=55175||55177<=p&&p<=55203?Pn:p==9757||p==9977||9994<=p&&p<=9997||p==127877||127938<=p&&p<=127940||p==127943||127946<=p&&p<=127948||128066<=p&&p<=128067||128070<=p&&p<=128080||p==128110||128112<=p&&p<=128120||p==128124||128129<=p&&p<=128131||128133<=p&&p<=128135||p==128170||128372<=p&&p<=128373||p==128378||p==128400||128405<=p&&p<=128406||128581<=p&&p<=128583||128587<=p&&p<=128591||p==128675||128692<=p&&p<=128694||p==128704||p==128716||129304<=p&&p<=129308||129310<=p&&p<=129311||p==129318||129328<=p&&p<=129337||129341<=p&&p<=129342||129489<=p&&p<=129501?lr:127995<=p&&p<=127999?vr:p==8205?Zn:p==9792||p==9794||9877<=p&&p<=9878||p==9992||p==10084||p==127752||p==127806||p==127859||p==127891||p==127908||p==127912||p==127979||p==127981||p==128139||128187<=p&&p<=128188||p==128295||p==128300||p==128488||p==128640||p==128658?Ge:128102<=p&&p<=128105?ce:pn}return this}Pe.exports&&(Pe.exports=Be)}),s=new i,l=function(Be,it,_t){for(var pt=s.iterateGraphemes(Be.substring(it)),Lt="",nn=0;nn<_t-it;nn++){var Kt=pt.next();if(Lt+=Kt.value,Kt.done)break}return Lt},o=function(Pe,Be,it,_t,pt,Lt,nn){return{start:{line:Pe,column:Be,offset:it},end:{line:_t,column:pt,offset:Lt},source:nn||null}},f=r(function(Pe,Be){(function(it,_t){Pe.exports=_t()})(t,function(){var it="",_t,pt=Lt;function Lt(Pn,pn){if(typeof Pn!="string")throw new TypeError("expected a string");if(pn===1)return Pn;if(pn===2)return Pn+Pn;var $n=Pn.length*pn;if(_t!==Pn||typeof _t>"u")_t=Pn,it="";else if(it.length>=$n)return it.substr(0,$n);for(;$n>it.length&&pn>1;)pn&1&&(it+=Pn),pn>>=1,Pn+=Pn;return it+=Pn,it=it.substr(0,$n),it}var nn=function(pn,$n,lr){if(pn==null||$n==null)return pn;var vr=String(pn),Zn=typeof $n=="number"?$n:parseInt($n,10);if(isNaN(Zn)||!isFinite(Zn))return vr;var Ge=vr.length;if(Ge>=Zn)return vr;var ce=String(lr);ce===""&&(ce=" ");for(var pe=Zn-Ge;ce.length<pe;)ce+=ce;var nt=ce.length>pe?ce.substr(0,pe):ce;return nt+vr},Kt=Object.assign||function(Pn){for(var pn=1;pn<arguments.length;pn++){var $n=arguments[pn];for(var lr in $n)Object.prototype.hasOwnProperty.call($n,lr)&&(Pn[lr]=$n[lr])}return Pn};function vn(Pn,pn,$n,lr){var vr=String(pn),Zn=nn(vr,$n," "),Ge=pt(" ",lr.tabSize);return Zn+" | "+Pn.replace(/\t/g,Ge)}function Gn(Pn,pn,$n,lr,vr){return Pn.slice(pn,$n).map(function(Zn,Ge){return vn(Zn,pn+Ge+1,lr,vr)}).join(`
`)}var tn={extraLines:2,tabSize:4},dr=function(pn,$n,lr,vr){vr=Kt({},tn,vr);var Zn=pn.split(/\r\n?|\n|\f/),Ge=Math.max(1,$n-vr.extraLines)-1,ce=Math.min($n+vr.extraLines,Zn.length),pe=String(ce).length,nt=Gn(Zn,Ge,$n,pe,vr),wt=vn(Zn[$n-1].substring(0,lr-1),$n,pe,vr),Ht=pt(" ",wt.length)+"^",sn=Gn(Zn,$n,ce,pe,vr);return[nt,Ht,sn].filter(Boolean).join(`
`)};return dr})}),y=new Error().stack,x=function(Pe){var Be=Object.create(SyntaxError.prototype);return Object.assign(Be,Pe,{name:"SyntaxError"}),Object.defineProperty(Be,"stack",{get:function(){return y?y.replace(/^(.+\n){1,3}/,String(Be)+`
`):""}}),Be},B=function(Pe,Be,it,_t,pt){throw x({message:_t?Pe+`
`+f(Be,_t,pt):Pe,rawMessage:Pe,source:it,line:_t,column:pt})},O={unexpectedEnd:function(){return"Unexpected end of input"},unexpectedToken:function(Be){for(var it=arguments.length,_t=Array(it>1?it-1:0),pt=1;pt<it;pt++)_t[pt-1]=arguments[pt];return"Unexpected token <"+Be+"> at "+_t.filter(Boolean).join(":")}},P={unexpectedSymbol:function(Be){for(var it=arguments.length,_t=Array(it>1?it-1:0),pt=1;pt<it;pt++)_t[pt-1]=arguments[pt];return"Unexpected symbol <"+Be+"> at "+_t.filter(Boolean).join(":")}},U={LEFT_BRACE:0,RIGHT_BRACE:1,LEFT_BRACKET:2,RIGHT_BRACKET:3,COLON:4,COMMA:5,STRING:6,NUMBER:7,TRUE:8,FALSE:9,NULL:10},j={"{":U.LEFT_BRACE,"}":U.RIGHT_BRACE,"[":U.LEFT_BRACKET,"]":U.RIGHT_BRACKET,":":U.COLON,",":U.COMMA},N={true:U.TRUE,false:U.FALSE,null:U.NULL},Y={_START_:0,START_QUOTE_OR_CHAR:1,ESCAPE:2},H={'"':0,"\\":1,"/":2,b:3,f:4,n:5,r:6,t:7,u:8},se={_START_:0,MINUS:1,ZERO:2,DIGIT:3,POINT:4,DIGIT_FRACTION:5,EXP:6,EXP_DIGIT_OR_SIGN:7};function re(Pe){return Pe>="1"&&Pe<="9"}function V(Pe){return Pe>="0"&&Pe<="9"}function ne(Pe){return V(Pe)||Pe>="a"&&Pe<="f"||Pe>="A"&&Pe<="F"}function G(Pe){return Pe==="e"||Pe==="E"}function oe(Pe,Be,it,_t){var pt=Pe.charAt(Be);if(pt==="\r")Be++,it++,_t=1,Pe.charAt(Be)===`
`&&Be++;else if(pt===`
`)Be++,it++,_t=1;else if(pt==="	"||pt===" ")Be++,_t++;else return null;return{index:Be,line:it,column:_t}}function he(Pe,Be,it,_t){var pt=Pe.charAt(Be);return pt in j?{type:j[pt],line:it,column:_t+1,index:Be+1,value:null}:null}function fe(Pe,Be,it,_t){for(var pt in N)if(N.hasOwnProperty(pt)&&Pe.substr(Be,pt.length)===pt)return{type:N[pt],line:it,column:_t+pt.length,index:Be+pt.length,value:pt};return null}function Ee(Pe,Be,it,_t){for(var pt=Be,Lt=Y._START_;Be<Pe.length;){var nn=Pe.charAt(Be);switch(Lt){case Y._START_:{if(nn==='"')Be++,Lt=Y.START_QUOTE_OR_CHAR;else return null;break}case Y.START_QUOTE_OR_CHAR:{if(nn==="\\")Be++,Lt=Y.ESCAPE;else{if(nn==='"')return Be++,{type:U.STRING,line:it,column:_t+Be-pt,index:Be,value:Pe.slice(pt,Be)};Be++}break}case Y.ESCAPE:{if(nn in H){if(Be++,nn==="u")for(var Kt=0;Kt<4;Kt++){var vn=Pe.charAt(Be);if(vn&&ne(vn))Be++;else return null}Lt=Y.START_QUOTE_OR_CHAR}else return null;break}}}}function me(Pe,Be,it,_t){var pt=Be,Lt=Be,nn=se._START_;e:for(;Be<Pe.length;){var Kt=Pe.charAt(Be);switch(nn){case se._START_:{if(Kt==="-")nn=se.MINUS;else if(Kt==="0")Lt=Be+1,nn=se.ZERO;else if(re(Kt))Lt=Be+1,nn=se.DIGIT;else return null;break}case se.MINUS:{if(Kt==="0")Lt=Be+1,nn=se.ZERO;else if(re(Kt))Lt=Be+1,nn=se.DIGIT;else return null;break}case se.ZERO:{if(Kt===".")nn=se.POINT;else if(G(Kt))nn=se.EXP;else break e;break}case se.DIGIT:{if(V(Kt))Lt=Be+1;else if(Kt===".")nn=se.POINT;else if(G(Kt))nn=se.EXP;else break e;break}case se.POINT:{if(V(Kt))Lt=Be+1,nn=se.DIGIT_FRACTION;else break e;break}case se.DIGIT_FRACTION:{if(V(Kt))Lt=Be+1;else if(G(Kt))nn=se.EXP;else break e;break}case se.EXP:{if(Kt==="+"||Kt==="-")nn=se.EXP_DIGIT_OR_SIGN;else if(V(Kt))Lt=Be+1,nn=se.EXP_DIGIT_OR_SIGN;else break e;break}case se.EXP_DIGIT_OR_SIGN:{if(V(Kt))Lt=Be+1;else break e;break}}Be++}return Lt>0?{type:U.NUMBER,line:it,column:_t+Lt-pt,index:Lt,value:Pe.slice(pt,Lt)}:null}var Se=function(Be,it){for(var _t=1,pt=1,Lt=0,nn=[];Lt<Be.length;){var Kt=[Be,Lt,_t,pt],vn=oe.apply(void 0,Kt);if(vn){Lt=vn.index,_t=vn.line,pt=vn.column;continue}var Gn=he.apply(void 0,Kt)||fe.apply(void 0,Kt)||Ee.apply(void 0,Kt)||me.apply(void 0,Kt);if(Gn){var tn={type:Gn.type,value:Gn.value,loc:o(_t,pt,Lt,Gn.line,Gn.column,Gn.index,it.source)};nn.push(tn),Lt=Gn.index,_t=Gn.line,pt=Gn.column}else B(P.unexpectedSymbol(l(Be,Lt,Lt+1),it.source,_t,pt),Be,it.source,_t,pt)}return nn},Ke={_START_:0,OPEN_OBJECT:1,PROPERTY:2,COMMA:3},xe={_START_:0,KEY:1,COLON:2},at={_START_:0,OPEN_ARRAY:1,VALUE:2,COMMA:3},Ze={loc:!0,source:null};function Je(Pe,Be,it){var _t=Be.length>0?Be[Be.length-1].loc.end:{line:1,column:1};B(O.unexpectedEnd(),Pe,it.source,_t.line,_t.column)}function Ne(Pe){for(var Be=0,it=0;it<4;it++)Be=Be*16+parseInt(Pe[it],16);return String.fromCharCode(Be)}var we={b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},De=['"',"\\","/"];function He(Pe){for(var Be="",it=0;it<Pe.length;it++){var _t=Pe.charAt(it);if(_t==="\\"){it++;var pt=Pe.charAt(it);if(pt==="u")Be+=Ne(Pe.substr(it+1,4)),it+=4;else if(De.indexOf(pt)!==-1)Be+=pt;else if(pt in we)Be+=we[pt];else break}else Be+=_t}return Be}function bt(Pe,Be,it,_t){for(var pt=void 0,Lt={type:"Object",children:[]},nn=Ke._START_;it<Be.length;){var Kt=Be[it];switch(nn){case Ke._START_:{if(Kt.type===U.LEFT_BRACE)pt=Kt,nn=Ke.OPEN_OBJECT,it++;else return null;break}case Ke.OPEN_OBJECT:{if(Kt.type===U.RIGHT_BRACE)return _t.loc&&(Lt.loc=o(pt.loc.start.line,pt.loc.start.column,pt.loc.start.offset,Kt.loc.end.line,Kt.loc.end.column,Kt.loc.end.offset,_t.source)),{value:Lt,index:it+1};var vn=Yt(Pe,Be,it,_t);Lt.children.push(vn.value),nn=Ke.PROPERTY,it=vn.index;break}case Ke.PROPERTY:{if(Kt.type===U.RIGHT_BRACE)return _t.loc&&(Lt.loc=o(pt.loc.start.line,pt.loc.start.column,pt.loc.start.offset,Kt.loc.end.line,Kt.loc.end.column,Kt.loc.end.offset,_t.source)),{value:Lt,index:it+1};Kt.type===U.COMMA?(nn=Ke.COMMA,it++):B(O.unexpectedToken(l(Pe,Kt.loc.start.offset,Kt.loc.end.offset),_t.source,Kt.loc.start.line,Kt.loc.start.column),Pe,_t.source,Kt.loc.start.line,Kt.loc.start.column);break}case Ke.COMMA:{var Gn=Yt(Pe,Be,it,_t);Gn?(it=Gn.index,Lt.children.push(Gn.value),nn=Ke.PROPERTY):B(O.unexpectedToken(l(Pe,Kt.loc.start.offset,Kt.loc.end.offset),_t.source,Kt.loc.start.line,Kt.loc.start.column),Pe,_t.source,Kt.loc.start.line,Kt.loc.start.column);break}}}Je(Pe,Be,_t)}function Yt(Pe,Be,it,_t){for(var pt=void 0,Lt={type:"Property",key:null,value:null},nn=xe._START_;it<Be.length;){var Kt=Be[it];switch(nn){case xe._START_:{if(Kt.type===U.STRING){var vn={type:"Identifier",value:He(Pe.slice(Kt.loc.start.offset+1,Kt.loc.end.offset-1)),raw:Kt.value};_t.loc&&(vn.loc=Kt.loc),pt=Kt,Lt.key=vn,nn=xe.KEY,it++}else return null;break}case xe.KEY:{Kt.type===U.COLON?(nn=xe.COLON,it++):B(O.unexpectedToken(l(Pe,Kt.loc.start.offset,Kt.loc.end.offset),_t.source,Kt.loc.start.line,Kt.loc.start.column),Pe,_t.source,Kt.loc.start.line,Kt.loc.start.column);break}case xe.COLON:{var Gn=Pt(Pe,Be,it,_t);return Lt.value=Gn.value,_t.loc&&(Lt.loc=o(pt.loc.start.line,pt.loc.start.column,pt.loc.start.offset,Gn.value.loc.end.line,Gn.value.loc.end.column,Gn.value.loc.end.offset,_t.source)),{value:Lt,index:Gn.index}}}}}function yt(Pe,Be,it,_t){for(var pt=void 0,Lt={type:"Array",children:[]},nn=at._START_,Kt=void 0;it<Be.length;)switch(Kt=Be[it],nn){case at._START_:{if(Kt.type===U.LEFT_BRACKET)pt=Kt,nn=at.OPEN_ARRAY,it++;else return null;break}case at.OPEN_ARRAY:{if(Kt.type===U.RIGHT_BRACKET)return _t.loc&&(Lt.loc=o(pt.loc.start.line,pt.loc.start.column,pt.loc.start.offset,Kt.loc.end.line,Kt.loc.end.column,Kt.loc.end.offset,_t.source)),{value:Lt,index:it+1};var vn=Pt(Pe,Be,it,_t);it=vn.index,Lt.children.push(vn.value),nn=at.VALUE;break}case at.VALUE:{if(Kt.type===U.RIGHT_BRACKET)return _t.loc&&(Lt.loc=o(pt.loc.start.line,pt.loc.start.column,pt.loc.start.offset,Kt.loc.end.line,Kt.loc.end.column,Kt.loc.end.offset,_t.source)),{value:Lt,index:it+1};Kt.type===U.COMMA?(nn=at.COMMA,it++):B(O.unexpectedToken(l(Pe,Kt.loc.start.offset,Kt.loc.end.offset),_t.source,Kt.loc.start.line,Kt.loc.start.column),Pe,_t.source,Kt.loc.start.line,Kt.loc.start.column);break}case at.COMMA:{var Gn=Pt(Pe,Be,it,_t);it=Gn.index,Lt.children.push(Gn.value),nn=at.VALUE;break}}Je(Pe,Be,_t)}function Ft(Pe,Be,it,_t){var pt=Be[it],Lt=null;switch(pt.type){case U.STRING:{Lt=He(Pe.slice(pt.loc.start.offset+1,pt.loc.end.offset-1));break}case U.NUMBER:{Lt=Number(pt.value);break}case U.TRUE:{Lt=!0;break}case U.FALSE:{Lt=!1;break}case U.NULL:{Lt=null;break}default:return null}var nn={type:"Literal",value:Lt,raw:pt.value};return _t.loc&&(nn.loc=pt.loc),{value:nn,index:it+1}}function Pt(Pe,Be,it,_t){var pt=Be[it],Lt=Ft.apply(void 0,arguments)||bt.apply(void 0,arguments)||yt.apply(void 0,arguments);if(Lt)return Lt;B(O.unexpectedToken(l(Pe,pt.loc.start.offset,pt.loc.end.offset),_t.source,pt.loc.start.line,pt.loc.start.column),Pe,_t.source,pt.loc.start.line,pt.loc.start.column)}var Ue=function(Pe,Be){Be=Object.assign({},Ze,Be);var it=Se(Pe,Be);it.length===0&&Je(Pe,it,Be);var _t=Pt(Pe,it,0,Be);if(_t.index===it.length)return _t.value;var pt=it[_t.index];B(O.unexpectedToken(l(Pe,pt.loc.start.offset,pt.loc.end.offset),Be.source,pt.loc.start.line,pt.loc.start.column),Pe,Be.source,pt.loc.start.line,pt.loc.start.column)};return Ue})}(Ib)),Ib.exports}var doe=coe();const hoe=fl(doe);function hr(){var n="/home/runner/work/maputnik/maputnik/src/libs/codemirror-mgl.ts",e="89c156e637b20b434cfb214df7fad7d710253070",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/codemirror-mgl.ts",statementMap:{0:{start:{line:5,column:0},end:{line:10,column:3}},1:{start:{line:6,column:2},end:{line:9,column:4}},2:{start:{line:12,column:16},end:{line:12,column:18}},3:{start:{line:13,column:2},end:{line:30,column:3}},4:{start:{line:14,column:4},end:{line:14,column:16}},5:{start:{line:16,column:23},end:{line:16,column:71}},6:{start:{line:17,column:4},end:{line:29,column:5}},7:{start:{line:18,column:18},end:{line:23,column:7}},8:{start:{line:24,column:6},end:{line:28,column:9}},9:{start:{line:31,column:2},end:{line:31,column:15}},10:{start:{line:33,column:0},end:{line:35,column:3}},11:{start:{line:34,column:2},end:{line:34,column:26}},12:{start:{line:36,column:0},end:{line:130,column:3}},13:{start:{line:37,column:16},end:{line:37,column:32}},14:{start:{line:38,column:22},end:{line:38,column:26}},15:{start:{line:39,column:2},end:{line:41,column:3}},16:{start:{line:40,column:4},end:{line:40,column:17}},17:{start:{line:42,column:14},end:{line:42,column:29}},18:{start:{line:43,column:16},end:{line:43,column:32}},19:{start:{line:45,column:4},end:{line:65,column:5}},20:{start:{line:46,column:6},end:{line:46,column:20}},21:{start:{line:47,column:11},end:{line:65,column:5}},22:{start:{line:48,column:6},end:{line:48,column:18}},23:{start:{line:49,column:11},end:{line:65,column:5}},24:{start:{line:50,column:6},end:{line:50,column:20}},25:{start:{line:52,column:18},end:{line:52,column:25}},26:{start:{line:54,column:6},end:{line:63,column:7}},27:{start:{line:55,column:8},end:{line:55,column:41}},28:{start:{line:57,column:8},end:{line:59,column:11}},29:{start:{line:58,column:10},end:{line:58,column:101}},30:{start:{line:60,column:8},end:{line:62,column:9}},31:{start:{line:61,column:10},end:{line:61,column:34}},32:{start:{line:64,column:6},end:{line:64,column:63}},33:{start:{line:67,column:12},end:{line:67,column:16}},34:{start:{line:68,column:2},end:{line:99,column:3}},35:{start:{line:69,column:19},end:{line:79,column:6}},36:{start:{line:80,column:4},end:{line:94,column:5}},37:{start:{line:81,column:6},end:{line:93,column:8}},38:{start:{line:84,column:10},end:{line:84,column:76}},39:{start:{line:86,column:34},end:{line:86,column:85}},40:{start:{line:87,column:10},end:{line:91,column:12}},41:{start:{line:95,column:9},end:{line:99,column:3}},42:{start:{line:96,column:4},end:{line:96,column:56}},43:{start:{line:98,column:4},end:{line:98,column:50}},44:{start:{line:100,column:2},end:{line:128,column:3}},45:{start:{line:101,column:19},end:{line:101,column:28}},46:{start:{line:102,column:4},end:{line:127,column:7}},47:{start:{line:103,column:31},end:{line:103,column:36}},48:{start:{line:104,column:6},end:{line:126,column:7}},49:{start:{line:105,column:31},end:{line:105,column:64}},50:{start:{line:106,column:20},end:{line:110,column:9}},51:{start:{line:111,column:8},end:{line:111,column:24}},52:{start:{line:112,column:13},end:{line:126,column:7}},53:{start:{line:113,column:21},end:{line:113,column:83}},54:{start:{line:114,column:28},end:{line:114,column:64}},55:{start:{line:115,column:8},end:{line:118,column:9}},56:{start:{line:116,column:10},end:{line:116,column:69}},57:{start:{line:117,column:10},end:{line:117,column:17}},58:{start:{line:119,column:24},end:{line:119,column:35}},59:{start:{line:120,column:31},end:{line:120,column:34}},60:{start:{line:121,column:8},end:{line:125,column:11}},61:{start:{line:129,column:2},end:{line:129,column:15}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:29},end:{line:5,column:30}},loc:{start:{line:5,column:55},end:{line:10,column:1}},line:5},1:{name:"tryToParse",decl:{start:{line:11,column:9},end:{line:11,column:19}},loc:{start:{line:11,column:26},end:{line:32,column:1}},line:11},2:{name:"(anonymous_2)",decl:{start:{line:33,column:42},end:{line:33,column:43}},loc:{start:{line:33,column:52},end:{line:35,column:1}},line:33},3:{name:"(anonymous_3)",decl:{start:{line:36,column:41},end:{line:36,column:42}},loc:{start:{line:36,column:62},end:{line:130,column:1}},line:36},4:{name:"getArrayPositionalFromAst",decl:{start:{line:44,column:11},end:{line:44,column:36}},loc:{start:{line:44,column:49},end:{line:66,column:3}},line:44},5:{name:"(anonymous_5)",decl:{start:{line:57,column:37},end:{line:57,column:38}},loc:{start:{line:57,column:52},end:{line:59,column:9}},line:57},6:{name:"(anonymous_6)",decl:{start:{line:83,column:29},end:{line:83,column:30}},loc:{start:{line:83,column:38},end:{line:85,column:9}},line:83},7:{name:"(anonymous_7)",decl:{start:{line:85,column:15},end:{line:85,column:16}},loc:{start:{line:85,column:24},end:{line:92,column:9}},line:85},8:{name:"(anonymous_8)",decl:{start:{line:102,column:19},end:{line:102,column:20}},loc:{start:{line:102,column:30},end:{line:127,column:5}},line:102}},branchMap:{0:{loc:{start:{line:17,column:4},end:{line:29,column:5}},type:"if",locations:[{start:{line:17,column:4},end:{line:29,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:17},1:{loc:{start:{line:39,column:2},end:{line:41,column:3}},type:"if",locations:[{start:{line:39,column:2},end:{line:41,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:39},2:{loc:{start:{line:45,column:4},end:{line:65,column:5}},type:"if",locations:[{start:{line:45,column:4},end:{line:65,column:5}},{start:{line:47,column:11},end:{line:65,column:5}}],line:45},3:{loc:{start:{line:47,column:11},end:{line:65,column:5}},type:"if",locations:[{start:{line:47,column:11},end:{line:65,column:5}},{start:{line:49,column:11},end:{line:65,column:5}}],line:47},4:{loc:{start:{line:49,column:11},end:{line:65,column:5}},type:"if",locations:[{start:{line:49,column:11},end:{line:65,column:5}},{start:{line:51,column:11},end:{line:65,column:5}}],line:49},5:{loc:{start:{line:54,column:6},end:{line:63,column:7}},type:"if",locations:[{start:{line:54,column:6},end:{line:63,column:7}},{start:{line:56,column:13},end:{line:63,column:7}}],line:54},6:{loc:{start:{line:58,column:17},end:{line:58,column:100}},type:"binary-expr",locations:[{start:{line:58,column:17},end:{line:58,column:30}},{start:{line:58,column:34},end:{line:58,column:69}},{start:{line:58,column:73},end:{line:58,column:100}}],line:58},7:{loc:{start:{line:60,column:8},end:{line:62,column:9}},type:"if",locations:[{start:{line:60,column:8},end:{line:62,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:60},8:{loc:{start:{line:68,column:2},end:{line:99,column:3}},type:"if",locations:[{start:{line:68,column:2},end:{line:99,column:3}},{start:{line:95,column:9},end:{line:99,column:3}}],line:68},9:{loc:{start:{line:80,column:4},end:{line:94,column:5}},type:"if",locations:[{start:{line:80,column:4},end:{line:94,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:80},10:{loc:{start:{line:95,column:9},end:{line:99,column:3}},type:"if",locations:[{start:{line:95,column:9},end:{line:99,column:3}},{start:{line:97,column:9},end:{line:99,column:3}}],line:95},11:{loc:{start:{line:100,column:2},end:{line:128,column:3}},type:"if",locations:[{start:{line:100,column:2},end:{line:128,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:100},12:{loc:{start:{line:104,column:6},end:{line:126,column:7}},type:"if",locations:[{start:{line:104,column:6},end:{line:126,column:7}},{start:{line:112,column:13},end:{line:126,column:7}}],line:104},13:{loc:{start:{line:112,column:13},end:{line:126,column:7}},type:"if",locations:[{start:{line:112,column:13},end:{line:126,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:112},14:{loc:{start:{line:115,column:8},end:{line:118,column:9}},type:"if",locations:[{start:{line:115,column:8},end:{line:118,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:115}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/codemirror-mgl.ts"],names:[],mappings:"AAAA,SAAQ,aAAY;AACpB,OAAO,gBAAiC;AACxC,OAAO,eAAe;AACtB,SAAQ,YAAY,wBAAuB;AAK3C,WAAW,WAAW,OAAO,CAAC,QAAQ,iBAAiB;AAErD,SAAO,WAAW,MAAM;AAAA,IACtB,EAAC,GAAG,QAAQ,MAAM,KAAI;AAAA,IACtB;AAAA,EACF;AACF,CAAC;AAGD,SAAS,WAAW,MAAc;AAEhC,QAAM,QAAkC,CAAC;AACzC,MAAI;AACF,UAAM,IAAI;AAAA,EACZ,SACM,KAAU;AAEd,UAAM,aAAa,IAAI,SAAS,EAAE,MAAM,0BAA0B;AAClE,QAAI,YAAY;AACd,YAAM,MAAM;AAAA,QACV,YAAY,SAAS,WAAW,CAAC,GAAG,EAAE;AAAA,QACtC,cAAc,SAAS,WAAW,CAAC,GAAG,EAAE;AAAA,QACxC,WAAW,SAAS,WAAW,CAAC,GAAG,EAAE;AAAA,QACrC,aAAa,SAAS,WAAW,CAAC,GAAG,EAAE;AAAA,MACzC;AAGA,YAAM,KAAK;AAAA,QACT,MAAM,WAAW,IAAI,IAAI,aAAa,GAAG,IAAI,YAAY;AAAA,QACzD,IAAI,WAAW,IAAI,IAAI,YAAY,GAAG,IAAI,WAAW;AAAA,QACrD,SAAS;AAAA,MACX,CAAC;AAAA,IACH;AAAA,EACF;AAEA,SAAO;AACT;AAEA,WAAW,eAAe,QAAQ,QAAQ,CAAC,SAAiB;AAC1D,SAAO,WAAW,IAAI;AACxB,CAAC;AAED,WAAW,eAAe,QAAQ,OAAO,CAAC,MAAc,MAAW,QAAa;AAE9E,QAAM,QAAkC,WAAW,IAAI;AAEvD,QAAM,EAAC,QAAO,IAAI;AAElB,MAAI,MAAM,SAAS,GAAG;AAEpB,WAAO;AAAA,EACT;AAEA,QAAM,MAAM,UAAU,IAAI;AAC1B,QAAM,QAAQ,KAAK,MAAM,IAAI;AAE7B,WAAS,0BAA0B,MAAW,MAAgB;AAC5D,QAAI,CAAC,MAAM;AACT,aAAO;AAAA,IACT,WACS,KAAK,SAAS,GAAG;AACxB,aAAO;AAAA,IACT,WACS,CAAC,KAAK,UAAU;AACvB,aAAO;AAAA,IACT,OACK;AACH,YAAM,MAAM,KAAK,CAAC;AAClB,UAAI;AACJ,UAAI,IAAI,MAAM,UAAU,GAAG;AACzB,kBAAU,KAAK,SAAS,KAAK,CAAC,CAAC;AAAA,MACjC,OACK;AACH,kBAAU,KAAK,SAAS,KAAK,CAAC,cAAmB;AAC/C,iBACE,UAAU,OACV,UAAU,IAAI,SAAS,gBACvB,UAAU,IAAI,UAAU;AAAA,QAE5B,CAAC;AACD,YAAI,SAAS;AACX,oBAAU,QAAQ;AAAA,QACpB;AAAA,MACF;AACA,aAAO,0BAA0B,SAAS,KAAK,MAAM,CAAC,CAAC;AAAA,IACzD;AAAA,EACF;AAEA,MAAI,MAA6D;AACjE,MAAI,YAAY,SAAS;AAEvB,UAAM,SAAS,iBAAiB;AAAA,MAC9B,WAAW;AAAA,MACX,QAAQ;AAAA,MACR,YAAY,CAAC;AAAA,MACb,WAAW,CAAC;AAAA,MACZ,UAAU;AAAA,MACV,UAAU;AAAA,MACV,UAAU;AAAA,QACR;AAAA,MACF;AAAA,IACF,CAAC;AAED,QAAI,QAAQ;AACV,YAAM;AAAA,QACJ,QAAQ;AAAA,QACR,OAAO,OACJ,OAAO,SAAO;AAEb,iBAAO,CAAC,IAAI,QAAQ,MAAM,sCAAsC;AAAA,QAClE,CAAC,EACA,IAAI,SAAO;AAEV,gBAAM,kBAAkB,IAAI,QAAQ,QAAQ,iBAAiB,EAAE,EAAE,MAAM,GAAG;AAC1E,iBAAO;AAAA,YACL,MAAM;AAAA,YACN,KAAK,gBAAgB,CAAC;AAAA,YACtB,SAAS,gBAAgB,CAAC;AAAA,UAC5B;AAAA,QACF,CAAC;AAAA,MACL;AAAA,IACF;AAAA,EACF,WACS,YAAY,cAAc;AACjC,UAAM,WAAW,iBAAiB,OAAO,KAAK,IAAI;AAAA,EACpD,OACK;AACH,UAAM,IAAI,MAAM,mBAAmB,OAAO,EAAE;AAAA,EAC9C;AAEA,MAAI,KAAK,WAAW,SAAS;AAC3B,UAAM,SAAS,IAAI;AACnB,WAAO,QAAQ,WAAS;AACtB,YAAM,EAAC,KAAK,QAAO,IAAI;AAEvB,UAAI,CAAC,KAAK;AACR,cAAM,iBAAiB,IAAI,cAAc,IAAI,SAAS,CAAC;AACvD,cAAM,MAAM;AAAA,UACV,MAAM,WAAW,IAAI,IAAI,UAAU,GAAG,CAAC;AAAA,UACvC,IAAI,WAAW,IAAI,IAAI,SAAS,GAAG,eAAe,KAAK,MAAM;AAAA,UAC7D;AAAA,QACF;AACA,cAAM,KAAK,GAAG;AAAA,MAChB,WACS,KAAK;AACZ,cAAM,OAAO,IAAI,QAAQ,YAAY,EAAE,EAAE,MAAM,WAAW,EAAE,OAAO,OAAO;AAC1E,cAAM,cAAc,0BAA0B,KAAK,IAAI;AACvD,YAAI,CAAC,aAAa;AAChB,kBAAQ,KAAK,uCAAuC,KAAK;AACzD;AAAA,QACF;AAEA,cAAM,EAAC,IAAG,IAAI;AACd,cAAM,EAAC,OAAO,IAAG,IAAI;AAErB,cAAM,KAAK;AAAA,UACT,MAAM,WAAW,IAAI,MAAM,OAAO,GAAG,MAAM,MAAM;AAAA,UACjD,IAAI,WAAW,IAAI,IAAI,OAAO,GAAG,IAAI,MAAM;AAAA,UAC3C;AAAA,QACF,CAAC;AAAA,MACH;AAAA,IACF,CAAC;AAAA,EACH;AAEA,SAAO;AACT,CAAC;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"89c156e637b20b434cfb214df7fad7d710253070"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return hr=function(){return l},l}hr();hr().s[0]++;cp.defineMode("mgl",(n,e)=>(hr().f[0]++,hr().s[1]++,cp.modes.javascript({...n,json:!0},e)));function Pz(n){hr().f[1]++;const e=(hr().s[2]++,[]);hr().s[3]++;try{hr().s[4]++,uoe.parse(n)}catch(t){const r=(hr().s[5]++,t.toString().match(/line (\d+), column (\d+)/));if(hr().s[6]++,r){hr().b[0][0]++;const i=(hr().s[7]++,{first_line:parseInt(r[1],10),first_column:parseInt(r[2],10),last_line:parseInt(r[1],10),last_column:parseInt(r[2],10)});hr().s[8]++,e.push({from:cp.Pos(i.first_line-1,i.first_column),to:cp.Pos(i.last_line-1,i.last_column),message:t})}else hr().b[0][1]++}return hr().s[9]++,e}hr().s[10]++;cp.registerHelper("lint","json",n=>(hr().f[2]++,hr().s[11]++,Pz(n)));hr().s[12]++;cp.registerHelper("lint","mgl",(n,e,t)=>{hr().f[3]++;const r=(hr().s[13]++,Pz(n)),{context:i}=(hr().s[14]++,e);if(hr().s[15]++,r.length>0)return hr().b[1][0]++,hr().s[16]++,r;hr().b[1][1]++;const s=(hr().s[17]++,hoe(n)),l=(hr().s[18]++,JSON.parse(n));function o(y,x){if(hr().f[4]++,hr().s[19]++,y){if(hr().b[2][1]++,hr().s[21]++,x.length<1)return hr().b[3][0]++,hr().s[22]++,y;if(hr().b[3][1]++,hr().s[23]++,y.children){hr().b[4][1]++;const B=(hr().s[25]++,x[0]);let O;return hr().s[26]++,B.match(/^[0-9]+$/)?(hr().b[5][0]++,hr().s[27]++,O=y.children[x[0]]):(hr().b[5][1]++,hr().s[28]++,O=y.children.find(P=>(hr().f[5]++,hr().s[29]++,hr().b[6][0]++,P.key&&(hr().b[6][1]++,P.key.type==="Identifier")&&(hr().b[6][2]++,P.key.value===B))),hr().s[30]++,O?(hr().b[7][0]++,hr().s[31]++,O=O.value):hr().b[7][1]++),hr().s[32]++,o(O,x.slice(1))}else{hr().b[4][0]++,hr().s[24]++;return}}else{hr().b[2][0]++,hr().s[20]++;return}}let f=(hr().s[33]++,null);if(hr().s[34]++,i==="layer"){hr().b[8][0]++;const y=(hr().s[35]++,Df({version:8,name:"Empty Style",metadata:{},sources:{},sprite:"",glyphs:"https://example.com/glyphs/{fontstack}/{range}.pbf",layers:[l]}));hr().s[36]++,y?(hr().b[9][0]++,hr().s[37]++,f={result:"error",value:y.filter(x=>(hr().f[6]++,hr().s[38]++,!x.message.match(/^layers\[0\]: source ".*" not found$/))).map(x=>{hr().f[7]++;const B=(hr().s[39]++,x.message.replace(/^layers\[0\]./,"").split(":"));return hr().s[40]++,{name:"",key:B[0],message:B[1]}})}):hr().b[9][1]++}else if(hr().b[8][1]++,hr().s[41]++,i==="expression")hr().b[10][0]++,hr().s[42]++,f=Zq.createExpression(l,e.spec);else throw hr().b[10][1]++,hr().s[43]++,new Error(`Invalid context ${i}`);if(hr().s[44]++,(f==null?void 0:f.result)==="error"){hr().b[11][0]++;const y=(hr().s[45]++,f.value);hr().s[46]++,y.forEach(x=>{hr().f[8]++;const{key:B,message:O}=(hr().s[47]++,x);if(hr().s[48]++,B)if(hr().b[12][1]++,hr().s[52]++,B){hr().b[13][0]++;const P=(hr().s[53]++,B.replace(/^\[|\]$/g,"").split(/\.|[[\]]+/).filter(Boolean)),U=(hr().s[54]++,o(s,P));if(hr().s[55]++,U)hr().b[14][1]++;else{hr().b[14][0]++,hr().s[56]++,console.warn("Something went wrong parsing error:",x),hr().s[57]++;return}const{loc:j}=(hr().s[58]++,U),{start:N,end:Y}=(hr().s[59]++,j);hr().s[60]++,r.push({from:cp.Pos(N.line-1,N.column),to:cp.Pos(Y.line-1,Y.column),message:O})}else hr().b[13][1]++;else{hr().b[12][0]++;const P=(hr().s[49]++,t.getLineHandle(t.lastLine())),U=(hr().s[50]++,{from:cp.Pos(t.firstLine(),0),to:cp.Pos(t.lastLine(),P.text.length),message:O});hr().s[51]++,r.push(U)}})}else hr().b[11][1]++;return hr().s[61]++,r});function _r(){var n="/home/runner/work/maputnik/maputnik/src/components/InputJson.tsx",e="da44fe7250311daecfc0a96e15b8409621007dbc",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputJson.tsx",statementMap:{0:{start:{line:14,column:24},end:{line:29,column:3}},1:{start:{line:19,column:6},end:{line:19,column:65}},2:{start:{line:32,column:8},end:{line:32,column:12}},3:{start:{line:33,column:22},end:{line:33,column:27}},4:{start:{line:35,column:4},end:{line:35,column:17}},5:{start:{line:36,column:4},end:{line:36,column:32}},6:{start:{line:37,column:4},end:{line:41,column:6}},7:{start:{line:44,column:4},end:{line:60,column:7}},8:{start:{line:61,column:4},end:{line:61,column:42}},9:{start:{line:62,column:4},end:{line:62,column:40}},10:{start:{line:63,column:4},end:{line:63,column:38}},11:{start:{line:65,column:18},end:{line:67,column:3}},12:{start:{line:66,column:4},end:{line:66,column:31}},13:{start:{line:68,column:12},end:{line:74,column:3}},14:{start:{line:69,column:4},end:{line:69,column:49}},15:{start:{line:69,column:28},end:{line:69,column:49}},16:{start:{line:70,column:4},end:{line:73,column:7}},17:{start:{line:75,column:11},end:{line:82,column:3}},18:{start:{line:76,column:4},end:{line:76,column:32}},19:{start:{line:77,column:4},end:{line:77,column:47}},20:{start:{line:77,column:27},end:{line:77,column:47}},21:{start:{line:78,column:4},end:{line:81,column:7}},22:{start:{line:84,column:4},end:{line:84,column:43}},23:{start:{line:85,column:4},end:{line:85,column:41}},24:{start:{line:86,column:4},end:{line:86,column:39}},25:{start:{line:89,column:4},end:{line:94,column:5}},26:{start:{line:90,column:6},end:{line:90,column:36}},27:{start:{line:91,column:6},end:{line:93,column:8}},28:{start:{line:96,column:13},end:{line:123,column:3}},29:{start:{line:97,column:4},end:{line:103,column:5}},30:{start:{line:98,column:6},end:{line:98,column:37}},31:{start:{line:99,column:6},end:{line:101,column:9}},32:{start:{line:102,column:6},end:{line:102,column:13}},33:{start:{line:104,column:20},end:{line:104,column:40}},34:{start:{line:105,column:4},end:{line:119,column:5}},35:{start:{line:107,column:6},end:{line:112,column:7}},36:{start:{line:108,column:8},end:{line:108,column:42}},37:{start:{line:110,column:8},end:{line:110,column:19}},38:{start:{line:111,column:8},end:{line:111,column:27}},39:{start:{line:113,column:6},end:{line:118,column:7}},40:{start:{line:114,column:8},end:{line:114,column:35}},41:{start:{line:116,column:8},end:{line:116,column:66}},42:{start:{line:116,column:33},end:{line:116,column:66}},43:{start:{line:117,column:8},end:{line:117,column:61}},44:{start:{line:117,column:36},end:{line:117,column:61}},45:{start:{line:120,column:4},end:{line:122,column:7}},46:{start:{line:125,column:14},end:{line:125,column:26}},47:{start:{line:126,column:28},end:{line:126,column:38}},48:{start:{line:127,column:18},end:{line:127,column:20}},49:{start:{line:128,column:4},end:{line:130,column:5}},50:{start:{line:129,column:6},end:{line:129,column:45}},51:{start:{line:131,column:4},end:{line:145,column:9}},52:{start:{line:141,column:23},end:{line:141,column:36}},53:{start:{line:148,column:18},end:{line:148,column:54}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:18,column:14},end:{line:18,column:15}},loc:{start:{line:18,column:24},end:{line:20,column:5}},line:18},1:{name:"(anonymous_1)",decl:{start:{line:21,column:13},end:{line:21,column:14}},loc:{start:{line:21,column:19},end:{line:22,column:5}},line:21},2:{name:"(anonymous_2)",decl:{start:{line:23,column:12},end:{line:23,column:13}},loc:{start:{line:23,column:18},end:{line:24,column:5}},line:23},3:{name:"(anonymous_3)",decl:{start:{line:25,column:19},end:{line:25,column:20}},loc:{start:{line:25,column:25},end:{line:26,column:5}},line:25},4:{name:"(anonymous_4)",decl:{start:{line:27,column:17},end:{line:27,column:18}},loc:{start:{line:27,column:23},end:{line:28,column:5}},line:27},5:{name:"(anonymous_5)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:21},end:{line:42,column:3}},line:34},6:{name:"(anonymous_6)",decl:{start:{line:43,column:2},end:{line:43,column:3}},loc:{start:{line:43,column:22},end:{line:64,column:3}},line:43},7:{name:"(anonymous_7)",decl:{start:{line:65,column:18},end:{line:65,column:19}},loc:{start:{line:65,column:24},end:{line:67,column:3}},line:65},8:{name:"(anonymous_8)",decl:{start:{line:68,column:12},end:{line:68,column:13}},loc:{start:{line:68,column:18},end:{line:74,column:3}},line:68},9:{name:"(anonymous_9)",decl:{start:{line:75,column:11},end:{line:75,column:12}},loc:{start:{line:75,column:17},end:{line:82,column:3}},line:75},10:{name:"(anonymous_10)",decl:{start:{line:83,column:2},end:{line:83,column:3}},loc:{start:{line:83,column:25},end:{line:87,column:3}},line:83},11:{name:"(anonymous_11)",decl:{start:{line:88,column:2},end:{line:88,column:3}},loc:{start:{line:88,column:32},end:{line:95,column:3}},line:88},12:{name:"(anonymous_12)",decl:{start:{line:96,column:13},end:{line:96,column:14}},loc:{start:{line:96,column:21},end:{line:123,column:3}},line:96},13:{name:"(anonymous_13)",decl:{start:{line:124,column:2},end:{line:124,column:3}},loc:{start:{line:124,column:11},end:{line:146,column:3}},line:124},14:{name:"(anonymous_14)",decl:{start:{line:141,column:15},end:{line:141,column:16}},loc:{start:{line:141,column:23},end:{line:141,column:36}},line:141}},branchMap:{0:{loc:{start:{line:46,column:12},end:{line:48,column:7}},type:"binary-expr",locations:[{start:{line:46,column:12},end:{line:46,column:27}},{start:{line:46,column:31},end:{line:48,column:7}}],line:46},1:{loc:{start:{line:54,column:12},end:{line:56,column:7}},type:"binary-expr",locations:[{start:{line:54,column:12},end:{line:54,column:27}},{start:{line:54,column:31},end:{line:56,column:7}}],line:54},2:{loc:{start:{line:69,column:4},end:{line:69,column:49}},type:"if",locations:[{start:{line:69,column:4},end:{line:69,column:49}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:69},3:{loc:{start:{line:77,column:4},end:{line:77,column:47}},type:"if",locations:[{start:{line:77,column:4},end:{line:77,column:47}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:77},4:{loc:{start:{line:89,column:4},end:{line:94,column:5}},type:"if",locations:[{start:{line:89,column:4},end:{line:94,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:89},5:{loc:{start:{line:89,column:8},end:{line:89,column:69}},type:"binary-expr",locations:[{start:{line:89,column:8},end:{line:89,column:29}},{start:{line:89,column:33},end:{line:89,column:69}}],line:89},6:{loc:{start:{line:97,column:4},end:{line:103,column:5}},type:"if",locations:[{start:{line:97,column:4},end:{line:103,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:97},7:{loc:{start:{line:105,column:4},end:{line:119,column:5}},type:"if",locations:[{start:{line:105,column:4},end:{line:119,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:105},8:{loc:{start:{line:113,column:6},end:{line:118,column:7}},type:"if",locations:[{start:{line:113,column:6},end:{line:118,column:7}},{start:{line:115,column:13},end:{line:118,column:7}}],line:113},9:{loc:{start:{line:113,column:10},end:{line:113,column:41}},type:"binary-expr",locations:[{start:{line:113,column:10},end:{line:113,column:13}},{start:{line:113,column:17},end:{line:113,column:41}}],line:113},10:{loc:{start:{line:116,column:8},end:{line:116,column:66}},type:"if",locations:[{start:{line:116,column:8},end:{line:116,column:66}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:116},11:{loc:{start:{line:117,column:8},end:{line:117,column:61}},type:"if",locations:[{start:{line:117,column:8},end:{line:117,column:61}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:117},12:{loc:{start:{line:128,column:4},end:{line:130,column:5}},type:"if",locations:[{start:{line:128,column:4},end:{line:130,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:128}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputJson.tsx"],names:[],mappings:"AAyKQ,SACQ,KADR;AAzKR,OAAO,WAAW;AAClB,OAAO,gBAAgB;AACvB,OAAO,gBAA8B;AACrC,SAAS,OAAwB,uBAAuB;AAExD,OAAO;AACP,OAAO;AACP,OAAO;AACP,OAAO;AACP,OAAO;AACP,OAAO,qBAAqB;AAC5B,OAAO;AA2BP,MAAM,0BAA0B,MAAM,UAAkD;AAAA,EACtF,OAAO,eAAe;AAAA,IACpB,aAAa;AAAA,IACb,cAAc;AAAA,IACd,SAAS,CAAC,yBAAyB;AAAA,IACnC,UAAU,CAAC,SAAc;AACvB,aAAO,gBAAgB,MAAM,EAAC,QAAQ,GAAG,WAAW,GAAE,CAAC;AAAA,IACzD;AAAA,IACA,SAAS,MAAM;AAAA,IAAC;AAAA,IAChB,QAAQ,MAAM;AAAA,IAAC;AAAA,IACf,eAAe,MAAM;AAAA,IAAC;AAAA,IACtB,aAAa,MAAM;AAAA,IAAC;AAAA,EACtB;AAAA,EACA;AAAA,EACA;AAAA,EACA,MAA6B;AAAA,EAC7B,oBAA6B;AAAA,EAE7B,YAAY,OAA+B;AACzC,UAAM,KAAK;AACX,SAAK,YAAY;AACjB,SAAK,QAAQ;AAAA,MACX,WAAW;AAAA,MACX,aAAa;AAAA,MACb,WAAW,KAAK,MAAM,SAAU,KAAK,MAAM,KAAK;AAAA,IAClD;AAAA,EACF;AAAA,EAEA,oBAAqB;AACnB,SAAK,OAAO,WAAW,KAAK,KAAM;AAAA,MAChC,OAAO,KAAK,MAAM,SAAU,KAAK,MAAM,KAAK;AAAA,MAC5C,MAAM,KAAK,MAAM,QAAQ;AAAA,QACvB,MAAM;AAAA,MACR;AAAA,MACA,cAAc,KAAK,MAAM;AAAA,MACzB,SAAS;AAAA,MACT,OAAO;AAAA,MACP,gBAAgB;AAAA,MAChB,aAAa,KAAK,MAAM;AAAA,MACxB,MAAM,KAAK,MAAM,QAAQ;AAAA,QACvB,SAAS;AAAA,MACX;AAAA,MACA,eAAe;AAAA,MACf,SAAS,KAAK,MAAM;AAAA,MACpB,gBAAgB;AAAA,IAClB,CAAC;AAED,SAAK,KAAK,GAAG,UAAU,KAAK,QAAQ;AACpC,SAAK,KAAK,GAAG,SAAS,KAAK,OAAO;AAClC,SAAK,KAAK,GAAG,QAAQ,KAAK,MAAM;AAAA,EAClC;AAAA,EAEA,gBAAgB,MAAM;AACpB,SAAK,YAAY;AAAA,EACnB;AAAA,EAEA,UAAU,MAAM;AACd,QAAI,KAAK,MAAM,QAAS,MAAK,MAAM,QAAQ;AAC3C,SAAK,SAAS;AAAA,MACZ,WAAW;AAAA,MACX,aAAc,KAAK,cAAc;AAAA,IACnC,CAAC;AAAA,EACH;AAAA,EAEA,SAAS,MAAM;AACb,SAAK,YAAY;AACjB,QAAI,KAAK,MAAM,OAAQ,MAAK,MAAM,OAAO;AACzC,SAAK,SAAS;AAAA,MACZ,WAAW;AAAA,MACX,aAAa;AAAA,IACf,CAAC;AAAA,EACH;AAAA,EAEA,uBAAwB;AACtB,SAAK,KAAM,IAAI,UAAU,KAAK,QAAQ;AACtC,SAAK,KAAM,IAAI,SAAS,KAAK,OAAO;AACpC,SAAK,KAAM,IAAI,QAAQ,KAAK,MAAM;AAAA,EACpC;AAAA,EAEA,mBAAmB,WAA2B;AAC5C,QAAI,CAAC,KAAK,MAAM,aAAa,UAAU,UAAU,KAAK,MAAM,OAAO;AACjE,WAAK,oBAAoB;AACzB,WAAK,KAAM;AAAA,QACT,KAAK,MAAM,SAAU,KAAK,MAAM,KAAK;AAAA,MACvC;AAAA,IACF;AAAA,EACF;AAAA,EAEA,WAAW,CAAC,OAAgB;AAC1B,QAAI,KAAK,mBAAmB;AAC1B,WAAK,oBAAoB;AACzB,WAAK,SAAS;AAAA,QACZ,WAAW,KAAK,KAAM,SAAS;AAAA,MACjC,CAAC;AACD;AAAA,IACF;AACA,UAAM,UAAU,KAAK,KAAM,SAAS;AAEpC,QAAI,KAAK,MAAM,cAAc,SAAS;AACpC,UAAI,aAAa;AACjB,UAAI;AACF,sBAAc,KAAK,MAAM,OAAO;AAAA,MAClC,SAAQ,MAAM;AACZ,cAAM;AACN,gBAAQ,KAAK,IAAI;AAAA,MACnB;AAEA,UAAI,OAAO,KAAK,MAAM,eAAe;AACnC,aAAK,MAAM,cAAc;AAAA,MAC3B,OACK;AACH,YAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,WAAW;AACxD,YAAI,KAAK,MAAM,YAAa,MAAK,MAAM,YAAY;AAAA,MACrD;AAAA,IACF;AAEA,SAAK,SAAS;AAAA,MACZ,WAAW;AAAA,IACb,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,EAAC,YAAW,IAAI,KAAK;AAC3B,UAAM,QAAQ,CAAC;AACf,QAAI,KAAK,MAAM,WAAW;AACxB,YAAM,YAAY,KAAK,MAAM;AAAA,IAC/B;AAEA,WAAO,qBAAC,SAAI,WAAU,cAAa,eAAe,KAAK,eAAe,eAAY,QAChF;AAAA,0BAAC,SAAI,WAAW,WAAW,uBAAuB,EAAC,2BAA2B,YAAW,CAAC,GACxF,+BAAC,SAAM,GAAM;AAAA;AAAA,QACL,oBAAC,SAAI,iBAAG;AAAA,QAAM;AAAA,SACtB,GACF;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,WAAW,WAAW,wBAAwB,KAAK,MAAM,SAAS;AAAA,UAClE,KAAK,CAAC,OAAO,KAAK,MAAM;AAAA,UACxB;AAAA;AAAA,MACF;AAAA,OACF;AAAA,EACF;AACF;AAEA,MAAM,YAAY,gBAAgB,EAAE,iBAAiB;AACrD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"da44fe7250311daecfc0a96e15b8409621007dbc"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return _r=function(){return l},l}_r();class Kz extends Xn.Component{constructor(t){_r().f[5]++,_r().s[4]++;super(t);Kn(this,"_keyEvent");Kn(this,"_doc");Kn(this,"_el",(_r().s[2]++,null));Kn(this,"_cancelNextChange",(_r().s[3]++,!1));Kn(this,"onPointerDown",(_r().s[11]++,()=>{_r().f[7]++,_r().s[12]++,this._keyEvent="pointer"}));Kn(this,"onFocus",(_r().s[13]++,()=>{_r().f[8]++,_r().s[14]++,this.props.onFocus?(_r().b[2][0]++,_r().s[15]++,this.props.onFocus()):_r().b[2][1]++,_r().s[16]++,this.setState({isEditing:!0,showMessage:this._keyEvent==="keyboard"})}));Kn(this,"onBlur",(_r().s[17]++,()=>{_r().f[9]++,_r().s[18]++,this._keyEvent="keyboard",_r().s[19]++,this.props.onBlur?(_r().b[3][0]++,_r().s[20]++,this.props.onBlur()):_r().b[3][1]++,_r().s[21]++,this.setState({isEditing:!1,showMessage:!1})}));Kn(this,"onChange",(_r().s[28]++,t=>{if(_r().f[12]++,_r().s[29]++,this._cancelNextChange){_r().b[6][0]++,_r().s[30]++,this._cancelNextChange=!1,_r().s[31]++,this.setState({prevValue:this._doc.getValue()}),_r().s[32]++;return}else _r().b[6][1]++;const r=(_r().s[33]++,this._doc.getValue());if(_r().s[34]++,this.state.prevValue!==r){_r().b[7][0]++;let i,s;_r().s[35]++;try{_r().s[36]++,i=JSON.parse(r)}catch(l){_r().s[37]++,s=l,_r().s[38]++,console.warn(l)}_r().s[39]++,_r().b[9][0]++,s&&(_r().b[9][1]++,this.props.onJSONInvalid)?(_r().b[8][0]++,_r().s[40]++,this.props.onJSONInvalid()):(_r().b[8][1]++,_r().s[41]++,this.props.onChange?(_r().b[10][0]++,_r().s[42]++,this.props.onChange(i)):_r().b[10][1]++,_r().s[43]++,this.props.onJSONValid?(_r().b[11][0]++,_r().s[44]++,this.props.onJSONValid()):_r().b[11][1]++)}else _r().b[7][1]++;_r().s[45]++,this.setState({prevValue:r})}));_r().s[5]++,this._keyEvent="keyboard",_r().s[6]++,this.state={isEditing:!1,showMessage:!1,prevValue:this.props.getValue(this.props.layer)}}componentDidMount(){_r().f[6]++,_r().s[7]++,this._doc=cp(this._el,{value:this.props.getValue(this.props.layer),mode:(_r().b[0][0]++,this.props.mode||(_r().b[0][1]++,{name:"mgl"})),lineWrapping:this.props.lineWrapping,tabSize:2,theme:"maputnik",viewportMargin:1/0,lineNumbers:this.props.lineNumbers,lint:(_r().b[1][0]++,this.props.lint||(_r().b[1][1]++,{context:"layer"})),matchBrackets:!0,gutters:this.props.gutters,scrollbarStyle:"null"}),_r().s[8]++,this._doc.on("change",this.onChange),_r().s[9]++,this._doc.on("focus",this.onFocus),_r().s[10]++,this._doc.on("blur",this.onBlur)}componentWillUnMount(){_r().f[10]++,_r().s[22]++,this._doc.off("change",this.onChange),_r().s[23]++,this._doc.off("focus",this.onFocus),_r().s[24]++,this._doc.off("blur",this.onBlur)}componentDidUpdate(t){_r().f[11]++,_r().s[25]++,_r().b[5][0]++,!this.state.isEditing&&(_r().b[5][1]++,t.layer!==this.props.layer)?(_r().b[4][0]++,_r().s[26]++,this._cancelNextChange=!0,_r().s[27]++,this._doc.setValue(this.props.getValue(this.props.layer))):_r().b[4][1]++}render(){_r().f[13]++;const t=(_r().s[46]++,this.props.t),{showMessage:r}=(_r().s[47]++,this.state),i=(_r().s[48]++,{});return _r().s[49]++,this.props.maxHeight?(_r().b[12][0]++,_r().s[50]++,i.maxHeight=this.props.maxHeight):_r().b[12][1]++,_r().s[51]++,ue.jsxs("div",{className:"JSONEditor",onPointerDown:this.onPointerDown,"aria-hidden":"true",children:[ue.jsx("div",{className:tm("JSONEditor__message",{"JSONEditor__message--on":r}),children:ue.jsxs(R0,{t,children:["Press ",ue.jsx("kbd",{children:"ESC"})," to lose focus"]})}),ue.jsx("div",{className:tm("codemirror-container",this.props.className),ref:s=>(_r().f[14]++,_r().s[52]++,this._el=s),style:i})]})}}Kn(Kz,"defaultProps",(_r().s[0]++,{lineNumbers:!0,lineWrapping:!1,gutters:["CodeMirror-lint-markers"],getValue:t=>(_r().f[0]++,_r().s[1]++,Tz(t,{indent:2,maxLength:40})),onFocus:()=>{_r().f[1]++},onBlur:()=>{_r().f[2]++},onJSONInvalid:()=>{_r().f[3]++},onJSONValid:()=>{_r().f[4]++}}));const foe=(_r().s[53]++,zs()(Kz));function B2(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldJson.tsx",e="60f4cd40e505c4a9f8de1078b77716b10a4a4264",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldJson.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:6,column:61}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:7,column:3}},line:5}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldJson.tsx"],names:[],mappings:"AASW;AATX,OAAO,WAAW;AAClB,OAAO,eAAiC;AAMxC,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,SAAS;AACP,WAAO,oBAAC,aAAW,GAAG,KAAK,OAAO;AAAA,EACpC;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"60f4cd40e505c4a9f8de1078b77716b10a4a4264"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return B2=function(){return l},l}B2();class _O extends Xn.Component{render(){return B2().f[0]++,B2().s[0]++,ue.jsx(foe,{...this.props})}}var SC="M12.42,5.29C11.32,5.19 10.35,6 10.25,7.11L10,10H12.82V12H9.82L9.38,17.07C9.18,19.27 7.24,20.9 5.04,20.7C3.79,20.59 2.66,19.9 2,18.83L3.5,17.33C3.83,18.38 4.96,18.97 6,18.63C6.78,18.39 7.33,17.7 7.4,16.89L7.82,12H4.82V10H8L8.27,6.93C8.46,4.73 10.39,3.1 12.6,3.28C13.86,3.39 15,4.09 15.66,5.17L14.16,6.67C13.91,5.9 13.23,5.36 12.42,5.29M22,13.65L20.59,12.24L17.76,15.07L14.93,12.24L13.5,13.65L16.35,16.5L13.5,19.31L14.93,20.72L17.76,17.89L20.59,20.72L22,19.31L19.17,16.5L22,13.65Z",poe="M7,10L12,15L17,10H7Z",moe="M7,15L12,10L17,15H7Z",bO="M22,10A2,2 0 0,1 20,12H4A2,2 0 0,1 2,10V3H4V5H8V3H10V5H14V3H16V5H20V3H22V10M4,10H8V7H4V10M10,10H14V7H10V10M20,10V7H16V10H20M11,14H13V17H16V19H13V22H11V19H8V17H11V14Z";function Dg(){var n="/home/runner/work/maputnik/maputnik/src/libs/filterops.ts",e="99dad9631fbee5fc23be2dafaf7c7eea92c38eac",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/filterops.ts",statementMap:{0:{start:{line:2,column:34},end:{line:2,column:56}},1:{start:{line:3,column:28},end:{line:3,column:41}},2:{start:{line:4,column:30},end:{line:4,column:123}},3:{start:{line:4,column:88},end:{line:4,column:122}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:80},end:{line:4,column:81}},loc:{start:{line:4,column:88},end:{line:4,column:122}},line:4}},branchMap:{},s:{0:0,1:0,2:0,3:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/filterops.ts"],names:[],mappings:"AAAA,OAAO,YAAY;AAEZ,aAAM,qBAAqB,CAAC,OAAO,OAAO,MAAM;AAChD,aAAM,eAAe,CAAC,MAAM,KAAK;AACjC,aAAM,iBAAiB,OAC3B,KAAK,OAAO,gBAAgB,MAAM,EAClC,OAAO,QAAM,mBAAmB,QAAQ,EAAE,IAAI,CAAC;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"99dad9631fbee5fc23be2dafaf7c7eea92c38eac"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Dg=function(){return l},l}Dg();const xO=(Dg().s[0]++,["all","any","none"]);Dg().s[1]++;const goe=(Dg().s[2]++,Object.keys(Xo.filter_operator.values).filter(n=>(Dg().f[0]++,Dg().s[3]++,xO.indexOf(n)<0)));function Ei(){var n="/home/runner/work/maputnik/maputnik/src/components/SingleFilterEditor.tsx",e="d18e3b448d830733ac17bcacd45f7c08e364baa2",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/SingleFilterEditor.tsx",statementMap:{0:{start:{line:8,column:2},end:{line:8,column:25}},1:{start:{line:8,column:16},end:{line:8,column:25}},2:{start:{line:9,column:2},end:{line:9,column:25}},3:{start:{line:9,column:16},end:{line:9,column:25}},4:{start:{line:10,column:2},end:{line:10,column:23}},5:{start:{line:13,column:19},end:{line:13,column:40}},6:{start:{line:14,column:2},end:{line:16,column:3}},7:{start:{line:15,column:4},end:{line:15,column:13}},8:{start:{line:17,column:2},end:{line:23,column:3}},9:{start:{line:18,column:4},end:{line:18,column:16}},10:{start:{line:19,column:9},end:{line:23,column:3}},11:{start:{line:20,column:4},end:{line:20,column:17}},12:{start:{line:22,column:4},end:{line:22,column:13}},13:{start:{line:26,column:2},end:{line:26,column:21}},14:{start:{line:27,column:2},end:{line:27,column:22}},15:{start:{line:28,column:2},end:{line:28,column:11}},16:{start:{line:31,column:24},end:{line:33,column:3}},17:{start:{line:35,column:20},end:{line:35,column:76}},18:{start:{line:36,column:4},end:{line:40,column:5}},19:{start:{line:37,column:6},end:{line:37,column:43}},20:{start:{line:38,column:11},end:{line:40,column:5}},21:{start:{line:39,column:6},end:{line:39,column:47}},22:{start:{line:41,column:4},end:{line:41,column:35}},23:{start:{line:44,column:14},end:{line:44,column:31}},24:{start:{line:45,column:21},end:{line:45,column:25}},25:{start:{line:46,column:25},end:{line:46,column:29}},26:{start:{line:47,column:23},end:{line:47,column:33}},27:{start:{line:48,column:4},end:{line:75,column:9}},28:{start:{line:54,column:72},end:{line:54,column:92}},29:{start:{line:55,column:41},end:{line:55,column:104}},30:{start:{line:63,column:37},end:{line:63,column:100}},31:{start:{line:72,column:27},end:{line:72,column:89}}},fnMap:{0:{name:"tryParseInt",decl:{start:{line:7,column:9},end:{line:7,column:20}},loc:{start:{line:7,column:24},end:{line:11,column:1}},line:7},1:{name:"tryParseBool",decl:{start:{line:12,column:9},end:{line:12,column:21}},loc:{start:{line:12,column:25},end:{line:24,column:1}},line:12},2:{name:"parseFilter",decl:{start:{line:25,column:9},end:{line:25,column:20}},loc:{start:{line:25,column:24},end:{line:29,column:1}},line:25},3:{name:"(anonymous_3)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:58},end:{line:42,column:3}},line:34},4:{name:"(anonymous_4)",decl:{start:{line:43,column:2},end:{line:43,column:3}},loc:{start:{line:43,column:11},end:{line:76,column:3}},line:43},5:{name:"(anonymous_5)",decl:{start:{line:54,column:58},end:{line:54,column:59}},loc:{start:{line:54,column:72},end:{line:54,column:92}},line:54},6:{name:"(anonymous_6)",decl:{start:{line:55,column:20},end:{line:55,column:21}},loc:{start:{line:55,column:41},end:{line:55,column:104}},line:55},7:{name:"(anonymous_7)",decl:{start:{line:63,column:20},end:{line:63,column:21}},loc:{start:{line:63,column:37},end:{line:63,column:100}},line:63},8:{name:"(anonymous_8)",decl:{start:{line:72,column:20},end:{line:72,column:21}},loc:{start:{line:72,column:27},end:{line:72,column:89}},line:72}},branchMap:{0:{loc:{start:{line:8,column:2},end:{line:8,column:25}},type:"if",locations:[{start:{line:8,column:2},end:{line:8,column:25}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:8},1:{loc:{start:{line:9,column:2},end:{line:9,column:25}},type:"if",locations:[{start:{line:9,column:2},end:{line:9,column:25}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:9},2:{loc:{start:{line:14,column:2},end:{line:16,column:3}},type:"if",locations:[{start:{line:14,column:2},end:{line:16,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:14},3:{loc:{start:{line:17,column:2},end:{line:23,column:3}},type:"if",locations:[{start:{line:17,column:2},end:{line:23,column:3}},{start:{line:19,column:9},end:{line:23,column:3}}],line:17},4:{loc:{start:{line:19,column:9},end:{line:23,column:3}},type:"if",locations:[{start:{line:19,column:9},end:{line:23,column:3}},{start:{line:21,column:9},end:{line:23,column:3}}],line:19},5:{loc:{start:{line:36,column:4},end:{line:40,column:5}},type:"if",locations:[{start:{line:36,column:4},end:{line:40,column:5}},{start:{line:38,column:11},end:{line:40,column:5}}],line:36},6:{loc:{start:{line:36,column:8},end:{line:36,column:49}},type:"binary-expr",locations:[{start:{line:36,column:8},end:{line:36,column:26}},{start:{line:36,column:30},end:{line:36,column:49}}],line:36},7:{loc:{start:{line:38,column:11},end:{line:40,column:5}},type:"if",locations:[{start:{line:38,column:11},end:{line:40,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:38},8:{loc:{start:{line:67,column:6},end:{line:74,column:10}},type:"binary-expr",locations:[{start:{line:67,column:6},end:{line:67,column:27}},{start:{line:67,column:47},end:{line:74,column:10}}],line:67}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/SingleFilterEditor.tsx"],names:[],mappings:"AA+DW,SAEH,KAFG;AA/DX,OAAO,WAAW;AAElB,SAAQ,sBAAqB;AAC7B,OAAO,iBAAiB;AACxB,OAAO,uBAAuB;AAC9B,OAAO,iBAAiB;AAExB,SAAS,YAAY,GAAoB;AACvC,MAAI,MAAM,GAAI,QAAO;AACrB,MAAI,MAAM,CAAW,EAAG,QAAO;AAC/B,SAAO,WAAW,CAAW;AAC/B;AAEA,SAAS,aAAa,GAAqB;AACzC,QAAM,WAAY,OAAO,MAAO;AAChC,MAAG,CAAC,UAAU;AACZ,WAAO;AAAA,EACT;AAEA,MAAG,EAAE,MAAM,cAAc,GAAG;AAC1B,WAAO;AAAA,EACT,WACQ,EAAE,MAAM,eAAe,GAAG;AAChC,WAAO;AAAA,EACT,OACK;AACH,WAAO;AAAA,EACT;AACF;AAEA,SAAS,YAAY,GAA8B;AACjD,MAAI,YAAY,CAAQ;AACxB,MAAI,aAAa,CAAQ;AACzB,SAAO;AACT;AAQA,qBAAqB,2BAA2B,MAAM,UAAmC;AAAA,EACvF,OAAO,eAAe;AAAA,IACpB,YAAY,CAAC;AAAA,EACf;AAAA,EAEA,oBAAoB,UAAkB,cAAsB,YAAsB;AAChF,QAAI,YAAY,CAAC,UAAU,cAAc,GAAG,WAAW,IAAI,WAAW,CAAC;AACvE,QAAG,aAAa,SAAS,aAAa,QAAQ;AAC5C,kBAAY,CAAC,UAAU,YAAY;AAAA,IACrC,WAAU,WAAW,WAAW,GAAG;AACjC,kBAAY,CAAC,UAAU,cAAc,EAAE;AAAA,IACzC;AACA,SAAK,MAAM,SAAS,SAAS;AAAA,EAC/B;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,WAAW,EAAE,CAAC;AACpB,UAAM,eAAe,EAAE,CAAC;AACxB,UAAM,aAAa,EAAE,MAAM,CAAC;AAE5B,WAAO,qBAAC,SAAI,WAAU,iCACpB;AAAA,0BAAC,SAAI,WAAU,mCACb;AAAA,QAAC;AAAA;AAAA,UACC,cAAW;AAAA,UACX,OAAO;AAAA,UACP,SAAS,OAAO,KAAK,KAAK,MAAM,UAAW,EAAE,IAAI,cAAY,CAAC,UAAU,QAAQ,CAAC;AAAA,UACjF,UAAU,CAAC,oBAA4B,KAAK,oBAAoB,UAAU,iBAAiB,UAAU;AAAA;AAAA,MACvG,GACF;AAAA,MACA,oBAAC,SAAI,WAAU,mCACb;AAAA,QAAC;AAAA;AAAA,UACC,cAAW;AAAA,UACX,OAAO;AAAA,UACP,UAAU,CAAC,gBAAwB,KAAK,oBAAoB,aAAa,cAAc,UAAU;AAAA,UACjG,SAAS;AAAA;AAAA,MACX,GACF;AAAA,MACC,WAAW,SAAS,KACrB,oBAAC,SAAI,WAAU,+BACb;AAAA,QAAC;AAAA;AAAA,UACC,cAAW;AAAA,UACX,OAAO,WAAW,KAAK,GAAG;AAAA,UAC1B,UAAU,CAAC,MAAc,KAAK,oBAAoB,UAAU,cAAc,EAAE,MAAM,GAAG,CAAC;AAAA;AAAA,MACxF,GACF;AAAA,OAEF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d18e3b448d830733ac17bcacd45f7c08e364baa2"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Ei=function(){return l},l}Ei();function yoe(n){return Ei().f[0]++,Ei().s[0]++,n===""?(Ei().b[0][0]++,Ei().s[1]++,n):(Ei().b[0][1]++,Ei().s[2]++,isNaN(n)?(Ei().b[1][0]++,Ei().s[3]++,n):(Ei().b[1][1]++,Ei().s[4]++,parseFloat(n)))}function voe(n){Ei().f[1]++;const e=(Ei().s[5]++,typeof n=="string");if(Ei().s[6]++,e)Ei().b[2][1]++;else return Ei().b[2][0]++,Ei().s[7]++,n;return Ei().s[8]++,n.match(/^\s*true\s*$/)?(Ei().b[3][0]++,Ei().s[9]++,!0):(Ei().b[3][1]++,Ei().s[10]++,n.match(/^\s*false\s*$/)?(Ei().b[4][0]++,Ei().s[11]++,!1):(Ei().b[4][1]++,Ei().s[12]++,n))}function Coe(n){return Ei().f[2]++,Ei().s[13]++,n=yoe(n),Ei().s[14]++,n=voe(n),Ei().s[15]++,n}class Rz extends Xn.Component{onFilterPartChanged(e,t,r){Ei().f[3]++;let i=(Ei().s[17]++,[e,t,...r.map(Coe)]);Ei().s[18]++,Ei().b[6][0]++,e==="has"||(Ei().b[6][1]++,e==="!has")?(Ei().b[5][0]++,Ei().s[19]++,i=[e,t]):(Ei().b[5][1]++,Ei().s[20]++,r.length===0?(Ei().b[7][0]++,Ei().s[21]++,i=[e,t,""]):Ei().b[7][1]++),Ei().s[22]++,this.props.onChange(i)}render(){Ei().f[4]++;const e=(Ei().s[23]++,this.props.filter),t=(Ei().s[24]++,e[0]),r=(Ei().s[25]++,e[1]),i=(Ei().s[26]++,e.slice(2));return Ei().s[27]++,ue.jsxs("div",{className:"maputnik-filter-editor-single",children:[ue.jsx("div",{className:"maputnik-filter-editor-property",children:ue.jsx(Qy,{"aria-label":"key",value:r,options:Object.keys(this.props.properties).map(s=>(Ei().f[5]++,Ei().s[28]++,[s,s])),onChange:s=>(Ei().f[6]++,Ei().s[29]++,this.onFilterPartChanged(t,s,i))})}),ue.jsx("div",{className:"maputnik-filter-editor-operator",children:ue.jsx(Hg,{"aria-label":"function",value:t,onChange:s=>(Ei().f[7]++,Ei().s[30]++,this.onFilterPartChanged(s,r,i)),options:goe})}),(Ei().b[8][0]++,i.length>0&&(Ei().b[8][1]++,ue.jsx("div",{className:"maputnik-filter-editor-args",children:ue.jsx(Rf,{"aria-label":"value",value:i.join(","),onChange:s=>(Ei().f[8]++,Ei().s[31]++,this.onFilterPartChanged(t,r,s.split(",")))})})))]})}}Kn(Rz,"defaultProps",(Ei().s[16]++,{properties:{}}));function py(){var n="/home/runner/work/maputnik/maputnik/src/components/FilterEditorBlock.tsx",e="cef1671f65ba48cf49a518a548a597faa051d67d",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FilterEditorBlock.tsx",statementMap:{0:{start:{line:8,column:14},end:{line:8,column:26}},1:{start:{line:9,column:4},end:{line:20,column:9}},2:{start:{line:23,column:26},end:{line:23,column:70}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:11},end:{line:21,column:3}},line:7}},branchMap:{},s:{0:0,1:0,2:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FilterEditorBlock.tsx"],names:[],mappings:"AAYW,SAOD,KAPC;AAZX,OAAO,WAAkC;AACzC,OAAO,iBAAiB;AACxB,SAAQ,gBAAe;AACvB,SAA0B,uBAAuB;AAMjD,MAAM,kCAAkC,MAAM,UAA0C;AAAA,EACtF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SAAI,WAAU,gCACpB;AAAA,0BAAC,SAAI,WAAU,uCACb;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,SAAS,KAAK,MAAM;AAAA,UACpB,OAAO,EAAE,qBAAqB;AAAA,UAE9B,8BAAC,YAAS;AAAA;AAAA,MACZ,GACF;AAAA,MACA,oBAAC,SAAI,WAAU,wCACZ,eAAK,MAAM,UACd;AAAA,OACF;AAAA,EACF;AACF;AAEA,MAAM,oBAAoB,gBAAgB,EAAE,yBAAyB;AACrE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"cef1671f65ba48cf49a518a548a597faa051d67d"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return py=function(){return l},l}py();class _oe extends Xn.Component{render(){py().f[0]++;const e=(py().s[0]++,this.props.t);return py().s[1]++,ue.jsxs("div",{className:"maputnik-filter-editor-block",children:[ue.jsx("div",{className:"maputnik-filter-editor-block-action",children:ue.jsx(Ha,{className:"maputnik-delete-filter",onClick:this.props.onDelete,title:e("Delete filter block"),children:ue.jsx(Uy,{})})}),ue.jsx("div",{className:"maputnik-filter-editor-block-content",children:this.props.children})]})}}const boe=(py().s[2]++,zs()(_oe));var i5,Z9;function xoe(){if(Z9)return i5;Z9=1;var n="[object Symbol]",e="\\ud800-\\udfff",t="\\u0300-\\u036f\\ufe20-\\ufe23",r="\\u20d0-\\u20f0",i="\\ufe0e\\ufe0f",s="["+e+"]",l="["+t+r+"]",o="\\ud83c[\\udffb-\\udfff]",f="(?:"+l+"|"+o+")",y="[^"+e+"]",x="(?:\\ud83c[\\udde6-\\uddff]){2}",B="[\\ud800-\\udbff][\\udc00-\\udfff]",O="\\u200d",P=f+"?",U="["+i+"]?",j="(?:"+O+"(?:"+[y,x,B].join("|")+")"+U+P+")*",N=U+P+j,Y="(?:"+[y+l+"?",l,x,B,s].join("|")+")",H=RegExp(o+"(?="+o+")|"+Y+N,"g"),se=RegExp("["+O+e+t+r+i+"]"),re=typeof window=="object"&&window&&window.Object===Object&&window,V=typeof self=="object"&&self&&self.Object===Object&&self,ne=re||V||Function("return this")();function G(yt){return yt.split("")}function oe(yt){return se.test(yt)}function he(yt){return oe(yt)?fe(yt):G(yt)}function fe(yt){return yt.match(H)||[]}var Ee=Object.prototype,me=Ee.toString,Se=ne.Symbol,Ke=Se?Se.prototype:void 0,xe=Ke?Ke.toString:void 0;function at(yt,Ft,Pt){var Ue=-1,Pe=yt.length;Ft<0&&(Ft=-Ft>Pe?0:Pe+Ft),Pt=Pt>Pe?Pe:Pt,Pt<0&&(Pt+=Pe),Pe=Ft>Pt?0:Pt-Ft>>>0,Ft>>>=0;for(var Be=Array(Pe);++Ue<Pe;)Be[Ue]=yt[Ue+Ft];return Be}function Ze(yt){if(typeof yt=="string")return yt;if(De(yt))return xe?xe.call(yt):"";var Ft=yt+"";return Ft=="0"&&1/yt==-1/0?"-0":Ft}function Je(yt,Ft,Pt){var Ue=yt.length;return Pt=Pt===void 0?Ue:Pt,!Ft&&Pt>=Ue?yt:at(yt,Ft,Pt)}function Ne(yt){return function(Ft){Ft=He(Ft);var Pt=oe(Ft)?he(Ft):void 0,Ue=Pt?Pt[0]:Ft.charAt(0),Pe=Pt?Je(Pt,1).join(""):Ft.slice(1);return Ue[yt]()+Pe}}function we(yt){return!!yt&&typeof yt=="object"}function De(yt){return typeof yt=="symbol"||we(yt)&&me.call(yt)==n}function He(yt){return yt==null?"":Ze(yt)}function bt(yt){return Yt(He(yt).toLowerCase())}var Yt=Ne("toUpperCase");return i5=bt,i5}var Moe=xoe();const MO=fl(Moe);function Fp(){var n="/home/runner/work/maputnik/maputnik/src/libs/label-from-field-name.ts",e="8b86d889d32efa9a6cc667b2fa3579002dfb58fc",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/label-from-field-name.ts",statementMap:{0:{start:{line:4,column:16},end:{line:4,column:36}},1:{start:{line:5,column:2},end:{line:9,column:3}},2:{start:{line:6,column:4},end:{line:6,column:52}},3:{start:{line:8,column:4},end:{line:8,column:22}},4:{start:{line:10,column:2},end:{line:10,column:27}}},fnMap:{0:{name:"labelFromFieldName",decl:{start:{line:2,column:24},end:{line:2,column:42}},loc:{start:{line:2,column:54},end:{line:11,column:1}},line:2}},branchMap:{0:{loc:{start:{line:5,column:2},end:{line:9,column:3}},type:"if",locations:[{start:{line:5,column:2},end:{line:9,column:3}},{start:{line:7,column:9},end:{line:9,column:3}}],line:5}},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/label-from-field-name.ts"],names:[],mappings:"AAAA,OAAO,gBAAgB;AAEvB,wBAAwB,mBAAmB,WAAmB;AAC5D,MAAI;AACJ,QAAM,QAAQ,UAAU,MAAM,GAAG;AACjC,MAAI,MAAM,SAAS,GAAG;AACpB,YAAQ,UAAU,MAAM,GAAG,EAAE,MAAM,CAAC,EAAE,KAAK,GAAG;AAAA,EAChD,OACK;AACH,YAAQ;AAAA,EACV;AACA,SAAO,WAAW,KAAK;AACzB;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8b86d889d32efa9a6cc667b2fa3579002dfb58fc"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Fp=function(){return l},l}Fp();function Nx(n){Fp().f[0]++;let e;const t=(Fp().s[0]++,n.split("-"));return Fp().s[1]++,t.length>1?(Fp().b[0][0]++,Fp().s[2]++,e=n.split("-").slice(1).join(" ")):(Fp().b[0][1]++,Fp().s[3]++,e=n),Fp().s[4]++,MO(e)}function Mo(){var n="/home/runner/work/maputnik/maputnik/src/components/_ExpressionProperty.tsx",e="550aede3b5713892add5bda71ec153770e1b1129",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/_ExpressionProperty.tsx",statementMap:{0:{start:{line:11,column:24},end:{line:17,column:3}},1:{start:{line:19,column:4},end:{line:19,column:17}},2:{start:{line:20,column:4},end:{line:22,column:6}},3:{start:{line:24,column:18},end:{line:28,column:3}},4:{start:{line:25,column:4},end:{line:27,column:7}},5:{start:{line:29,column:16},end:{line:33,column:3}},6:{start:{line:30,column:4},end:{line:32,column:7}},7:{start:{line:35,column:64},end:{line:35,column:74}},8:{start:{line:36,column:26},end:{line:36,column:36}},9:{start:{line:37,column:25},end:{line:37,column:52}},10:{start:{line:38,column:42},end:{line:60,column:8}},11:{start:{line:61,column:21},end:{line:61,column:83}},12:{start:{line:62,column:23},end:{line:62,column:39}},13:{start:{line:63,column:26},end:{line:63,column:40}},14:{start:{line:64,column:24},end:{line:64,column:26}},15:{start:{line:66,column:6},end:{line:66,column:65}},16:{start:{line:68,column:4},end:{line:79,column:5}},17:{start:{line:69,column:6},end:{line:69,column:52}},18:{start:{line:71,column:6},end:{line:75,column:9}},19:{start:{line:72,column:8},end:{line:72,column:45}},20:{start:{line:74,column:8},end:{line:74,column:39}},21:{start:{line:76,column:6},end:{line:78,column:7}},22:{start:{line:77,column:8},end:{line:77,column:37}},23:{start:{line:80,column:4},end:{line:110,column:6}},24:{start:{line:113,column:27},end:{line:113,column:72}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:13,column:13},end:{line:13,column:14}},loc:{start:{line:13,column:19},end:{line:14,column:5}},line:13},1:{name:"(anonymous_1)",decl:{start:{line:15,column:12},end:{line:15,column:13}},loc:{start:{line:15,column:18},end:{line:16,column:5}},line:15},2:{name:"(anonymous_2)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:21},end:{line:23,column:3}},line:18},3:{name:"(anonymous_3)",decl:{start:{line:24,column:18},end:{line:24,column:19}},loc:{start:{line:24,column:28},end:{line:28,column:3}},line:24},4:{name:"(anonymous_4)",decl:{start:{line:29,column:16},end:{line:29,column:17}},loc:{start:{line:29,column:22},end:{line:33,column:3}},line:29},5:{name:"(anonymous_5)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:11},end:{line:111,column:3}},line:34},6:{name:"getValue",decl:{start:{line:65,column:13},end:{line:65,column:21}},loc:{start:{line:65,column:28},end:{line:67,column:5}},line:65},7:{name:"(anonymous_7)",decl:{start:{line:71,column:36},end:{line:71,column:37}},loc:{start:{line:71,column:55},end:{line:73,column:7}},line:71},8:{name:"(anonymous_8)",decl:{start:{line:73,column:17},end:{line:73,column:18}},loc:{start:{line:73,column:36},end:{line:75,column:7}},line:73}},branchMap:{0:{loc:{start:{line:37,column:25},end:{line:37,column:52}},type:"cond-expr",locations:[{start:{line:37,column:35},end:{line:37,column:45}},{start:{line:37,column:48},end:{line:37,column:52}}],line:37},1:{loc:{start:{line:39,column:6},end:{line:49,column:7}},type:"binary-expr",locations:[{start:{line:39,column:6},end:{line:39,column:23}},{start:{line:39,column:43},end:{line:49,column:7}}],line:39},2:{loc:{start:{line:61,column:21},end:{line:61,column:83}},type:"cond-expr",locations:[{start:{line:61,column:44},end:{line:61,column:53}},{start:{line:61,column:56},end:{line:61,column:83}}],line:61},3:{loc:{start:{line:68,column:4},end:{line:79,column:5}},type:"if",locations:[{start:{line:68,column:4},end:{line:79,column:5}},{start:{line:70,column:11},end:{line:79,column:5}}],line:68},4:{loc:{start:{line:76,column:6},end:{line:78,column:7}},type:"if",locations:[{start:{line:76,column:6},end:{line:78,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:76}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_ExpressionProperty.tsx"],names:[],mappings:"AA6DM,mBASM,KATN;AA7DN,OAAO,WAAW;AAClB,SAAQ,UAAU,cAAa;AAC/B,OAAO,qBAAqB;AAC5B,SAA0B,uBAAuB;AAEjD,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,wBAAwB;AAC/B,OAAO,eAAe;AAqBtB,MAAM,mCAAmC,MAAM,UAAoE;AAAA,EACjH,OAAO,eAAe;AAAA,IACpB,QAAQ,CAAC;AAAA,IACT,SAAS,MAAM;AAAA,IAAC;AAAA,IAChB,QAAQ,MAAM;AAAA,IAAC;AAAA,EACjB;AAAA,EAEA,YAAY,OAAwC;AAClD,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,WAAW;AAAA,IACb;AAAA,EACF;AAAA,EAEA,gBAAgB,CAAC,SAAgB;AAC/B,SAAK,SAAS;AAAA,MACZ,WAAW;AAAA,IACb,CAAC;AAAA,EACH;AAAA,EAEA,cAAc,MAAM;AAClB,SAAK,SAAS;AAAA,MACZ,WAAW;AAAA,IACb,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,GAAG,QAAQ,WAAW,WAAW,OAAO,QAAO,IAAI,KAAK;AAC/D,UAAM,EAAC,UAAS,IAAI,KAAK;AACzB,UAAM,eAAe,UAAU,CAAC,QAAQ,IAAI;AAE5C,UAAM,gBACJ,iCACG;AAAA,WAAK,MAAM,UACV;AAAA,QAAC;AAAA;AAAA,UAEC,SAAS,KAAK,MAAM;AAAA,UACpB,UAAU;AAAA,UACV,WAAU;AAAA,UACV,OAAO,EAAE,wBAAwB;AAAA,UAEjC,8BAAC,UAAO;AAAA;AAAA,QANJ;AAAA,MAON;AAAA,MAEF;AAAA,QAAC;AAAA;AAAA,UAEC,SAAS,KAAK,MAAM;AAAA,UACpB,WAAU;AAAA,UACV,OAAO,EAAE,mBAAmB;AAAA,UAE5B,8BAAC,YAAS;AAAA;AAAA,QALN;AAAA,MAMN;AAAA,OACF;AAGF,UAAM,WAAW,cAAc,SAAY,YAAY,GAAG,SAAS,IAAI,SAAS;AAEhF,UAAM,aAAa,OAAQ,QAAQ;AACnC,UAAM,gBAAgB,GAAG,QAAQ;AACjC,UAAM,cAAc,CAAC;AAErB,aAAS,SAAS,MAAW;AAC3B,aAAO,gBAAgB,MAAM,EAAC,QAAQ,GAAG,WAAW,GAAE,CAAC;AAAA,IACzD;AAEA,QAAI,WAAW;AACb,kBAAY,KAAK,EAAC,SAAS,eAAc,CAAC;AAAA,IAC5C,OACK;AACH,aAAO,QAAQ,MAAO,EACnB,OAAO,CAAC,CAAC,KAAK,MAAM,MAAM;AACzB,eAAO,IAAI,WAAW,aAAa;AAAA,MACrC,CAAC,EACA,QAAQ,CAAC,CAAC,MAAM,KAAK,MAAM;AAC1B,eAAO,YAAY,KAAK,KAAK;AAAA,MAC/B,CAAC;AAEH,UAAI,YAAY;AACd,oBAAY,KAAK,UAAU;AAAA,MAC7B;AAAA,IACF;AAEA,WAAO;AAAA,MAAC;AAAA;AAAA,QAEN,OAAO;AAAA,QACP,WAAW,KAAK,MAAM;AAAA,QACtB,OAAO,EAAE,mBAAmB,KAAK,MAAM,SAAS,CAAC;AAAA,QACjD,QAAQ;AAAA,QACR,UAAU;AAAA,QAEV;AAAA,UAAC;AAAA;AAAA,YACC,MAAM,EAAC,MAAM,MAAK;AAAA,YAClB,MAAM;AAAA,cACJ,SAAS;AAAA,cACT,MAAM,KAAK,MAAM;AAAA,YACnB;AAAA,YACA,WAAU;AAAA,YACV,SAAS,KAAK,MAAM;AAAA,YACpB,QAAQ,KAAK,MAAM;AAAA,YACnB,eAAe,KAAK;AAAA,YACpB,aAAa,KAAK;AAAA,YAClB,OAAO;AAAA,YACP,aAAa;AAAA,YACb,WAAW;AAAA,YACX,cAAc;AAAA,YACd;AAAA,YACA,UAAU,KAAK,MAAM;AAAA;AAAA,QACvB;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,qBAAqB,gBAAgB,EAAE,0BAA0B;AACvE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"550aede3b5713892add5bda71ec153770e1b1129"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Mo=function(){return l},l}Mo();class Dz extends Xn.Component{constructor(t){Mo().f[2]++,Mo().s[1]++;super(t);Kn(this,"onJSONInvalid",(Mo().s[3]++,t=>{Mo().f[3]++,Mo().s[4]++,this.setState({jsonError:!0})}));Kn(this,"onJSONValid",(Mo().s[5]++,()=>{Mo().f[4]++,Mo().s[6]++,this.setState({jsonError:!1})}));Mo().s[2]++,this.state={jsonError:!1}}render(){Mo().f[5]++;const{t,errors:r,fieldName:i,fieldType:s,value:l,canUndo:o}=(Mo().s[7]++,this.props),{jsonError:f}=(Mo().s[8]++,this.state),y=(Mo().s[9]++,o?(Mo().b[0][0]++,!o()):(Mo().b[0][1]++,!0)),x=(Mo().s[10]++,ue.jsxs(ue.Fragment,{children:[(Mo().b[1][0]++,this.props.onUndo&&(Mo().b[1][1]++,ue.jsx(Ha,{onClick:this.props.onUndo,disabled:y,className:"maputnik-delete-stop",title:t("Revert from expression"),children:ue.jsx(GV,{})},"undo_action"))),ue.jsx(Ha,{onClick:this.props.onDelete,className:"maputnik-delete-stop",title:t("Delete expression"),children:ue.jsx(Uy,{})},"delete_action")]})),B=(Mo().s[11]++,s===void 0?(Mo().b[2][0]++,i):(Mo().b[2][1]++,`${s}.${i}`)),O=(Mo().s[12]++,r[B]),P=(Mo().s[13]++,`${B}[`),U=(Mo().s[14]++,[]);function j(N){return Mo().f[6]++,Mo().s[15]++,Tz(N,{indent:2,maxLength:38})}return Mo().s[16]++,f?(Mo().b[3][0]++,Mo().s[17]++,U.push({message:"Invalid JSON"})):(Mo().b[3][1]++,Mo().s[18]++,Object.entries(r).filter(([N,Y])=>(Mo().f[7]++,Mo().s[19]++,N.startsWith(P))).forEach(([N,Y])=>(Mo().f[8]++,Mo().s[20]++,U.push(Y))),Mo().s[21]++,O?(Mo().b[4][0]++,Mo().s[22]++,U.push(O)):Mo().b[4][1]++),Mo().s[23]++,ue.jsx(la,{error:U,fieldSpec:this.props.fieldSpec,label:t(Nx(this.props.fieldName)),action:x,wideMode:!0,children:ue.jsx(_O,{mode:{name:"mgl"},lint:{context:"expression",spec:this.props.fieldSpec},className:"maputnik-expression-editor",onFocus:this.props.onFocus,onBlur:this.props.onBlur,onJSONInvalid:this.onJSONInvalid,onJSONValid:this.onJSONValid,layer:l,lineNumbers:!1,maxHeight:200,lineWrapping:!0,getValue:j,onChange:this.props.onChange})})}}Kn(Dz,"defaultProps",(Mo().s[0]++,{errors:{},onFocus:()=>{Mo().f[0]++},onBlur:()=>{Mo().f[1]++}}));const Fz=(Mo().s[24]++,zs()(Dz));function Un(){var n="/home/runner/work/maputnik/maputnik/src/components/FilterEditor.tsx",e="10bf63b3f71adfa5066d0aecd6eaecbe45ada76f",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FilterEditor.tsx",statementMap:{0:{start:{line:17,column:17},end:{line:17,column:40}},1:{start:{line:18,column:2},end:{line:20,column:3}},2:{start:{line:19,column:4},end:{line:19,column:18}},3:{start:{line:21,column:20},end:{line:21,column:29}},4:{start:{line:22,column:16},end:{line:22,column:31}},5:{start:{line:23,column:2},end:{line:26,column:3}},6:{start:{line:24,column:4},end:{line:24,column:24}},7:{start:{line:25,column:4},end:{line:25,column:32}},8:{start:{line:27,column:2},end:{line:27,column:35}},9:{start:{line:30,column:2},end:{line:30,column:65}},10:{start:{line:33,column:2},end:{line:54,column:4}},11:{start:{line:56,column:19},end:{line:60,column:1}},12:{start:{line:62,column:2},end:{line:64,column:3}},13:{start:{line:63,column:4},end:{line:63,column:16}},14:{start:{line:65,column:21},end:{line:65,column:42}},15:{start:{line:66,column:2},end:{line:66,column:38}},16:{start:{line:69,column:2},end:{line:69,column:52}},17:{start:{line:72,column:2},end:{line:74,column:3}},18:{start:{line:73,column:4},end:{line:73,column:97}},19:{start:{line:73,column:38},end:{line:73,column:59}},20:{start:{line:73,column:75},end:{line:73,column:84}},21:{start:{line:75,column:2},end:{line:75,column:15}},22:{start:{line:78,column:24},end:{line:80,column:3}},23:{start:{line:82,column:4},end:{line:82,column:17}},24:{start:{line:83,column:4},end:{line:86,column:6}},25:{start:{line:90,column:22},end:{line:90,column:58}},26:{start:{line:91,column:4},end:{line:91,column:35}},27:{start:{line:92,column:4},end:{line:92,column:35}},28:{start:{line:95,column:22},end:{line:95,column:58}},29:{start:{line:96,column:4},end:{line:96,column:39}},30:{start:{line:97,column:4},end:{line:97,column:35}},31:{start:{line:99,column:18},end:{line:103,column:3}},32:{start:{line:100,column:26},end:{line:100,column:62}},33:{start:{line:101,column:4},end:{line:101,column:43}},34:{start:{line:102,column:4},end:{line:102,column:39}},35:{start:{line:104,column:16},end:{line:108,column:3}},36:{start:{line:105,column:4},end:{line:107,column:7}},37:{start:{line:109,column:15},end:{line:113,column:3}},38:{start:{line:110,column:4},end:{line:112,column:7}},39:{start:{line:114,column:19},end:{line:120,column:3}},40:{start:{line:115,column:19},end:{line:115,column:46}},41:{start:{line:116,column:4},end:{line:116,column:47}},42:{start:{line:117,column:4},end:{line:119,column:7}},43:{start:{line:122,column:32},end:{line:122,column:75}},44:{start:{line:123,column:4},end:{line:136,column:5}},45:{start:{line:124,column:6},end:{line:127,column:8}},46:{start:{line:128,column:11},end:{line:136,column:5}},47:{start:{line:129,column:6},end:{line:131,column:8}},48:{start:{line:133,column:6},end:{line:135,column:8}},49:{start:{line:139,column:26},end:{line:139,column:36}},50:{start:{line:140,column:36},end:{line:140,column:46}},51:{start:{line:141,column:22},end:{line:143,column:5}},52:{start:{line:144,column:26},end:{line:144,column:33}},53:{start:{line:145,column:36},end:{line:145,column:112}},54:{start:{line:146,column:4},end:{line:271,column:5}},55:{start:{line:147,column:6},end:{line:160,column:11}},56:{start:{line:161,column:11},end:{line:271,column:5}},57:{start:{line:162,column:21},end:{line:162,column:48}},58:{start:{line:163,column:26},end:{line:163,column:35}},59:{start:{line:164,column:22},end:{line:164,column:37}},60:{start:{line:165,column:38},end:{line:173,column:10}},61:{start:{line:174,column:27},end:{line:187,column:8}},62:{start:{line:175,column:22},end:{line:175,column:50}},63:{start:{line:176,column:8},end:{line:186,column:29}},64:{start:{line:188,column:6},end:{line:240,column:11}},65:{start:{line:199,column:33},end:{line:199,column:63}},66:{start:{line:242,column:25},end:{line:242,column:35}},67:{start:{line:243,column:6},end:{line:270,column:11}},68:{start:{line:248,column:14},end:{line:248,column:59}},69:{start:{line:249,column:14},end:{line:249,column:49}},70:{start:{line:274,column:21},end:{line:274,column:60}}},fnMap:{0:{name:"combiningFilter",decl:{start:{line:16,column:9},end:{line:16,column:24}},loc:{start:{line:16,column:32},end:{line:28,column:1}},line:16},1:{name:"migrateFilter",decl:{start:{line:29,column:9},end:{line:29,column:22}},loc:{start:{line:29,column:31},end:{line:31,column:1}},line:29},2:{name:"createStyleFromFilter",decl:{start:{line:32,column:9},end:{line:32,column:30}},loc:{start:{line:32,column:39},end:{line:55,column:1}},line:32},3:{name:"checkIfSimpleFilter",decl:{start:{line:61,column:9},end:{line:61,column:28}},loc:{start:{line:61,column:37},end:{line:67,column:1}},line:61},4:{name:"hasCombiningFilter",decl:{start:{line:68,column:9},end:{line:68,column:27}},loc:{start:{line:68,column:36},end:{line:70,column:1}},line:68},5:{name:"hasNestedCombiningFilter",decl:{start:{line:71,column:9},end:{line:71,column:33}},loc:{start:{line:71,column:42},end:{line:76,column:1}},line:71},6:{name:"(anonymous_6)",decl:{start:{line:73,column:31},end:{line:73,column:32}},loc:{start:{line:73,column:38},end:{line:73,column:59}},line:73},7:{name:"(anonymous_7)",decl:{start:{line:73,column:68},end:{line:73,column:69}},loc:{start:{line:73,column:75},end:{line:73,column:84}},line:73},8:{name:"(anonymous_8)",decl:{start:{line:81,column:2},end:{line:81,column:3}},loc:{start:{line:81,column:21},end:{line:87,column:3}},line:81},9:{name:"(anonymous_9)",decl:{start:{line:89,column:2},end:{line:89,column:3}},loc:{start:{line:89,column:42},end:{line:93,column:3}},line:89},10:{name:"(anonymous_10)",decl:{start:{line:94,column:2},end:{line:94,column:3}},loc:{start:{line:94,column:30},end:{line:98,column:3}},line:94},11:{name:"(anonymous_11)",decl:{start:{line:99,column:18},end:{line:99,column:19}},loc:{start:{line:99,column:24},end:{line:103,column:3}},line:99},12:{name:"(anonymous_12)",decl:{start:{line:104,column:16},end:{line:104,column:17}},loc:{start:{line:104,column:25},end:{line:108,column:3}},line:104},13:{name:"(anonymous_13)",decl:{start:{line:109,column:15},end:{line:109,column:16}},loc:{start:{line:109,column:21},end:{line:113,column:3}},line:109},14:{name:"(anonymous_14)",decl:{start:{line:114,column:19},end:{line:114,column:20}},loc:{start:{line:114,column:25},end:{line:120,column:3}},line:114},15:{name:"(anonymous_15)",decl:{start:{line:121,column:2},end:{line:121,column:3}},loc:{start:{line:121,column:48},end:{line:137,column:3}},line:121},16:{name:"(anonymous_16)",decl:{start:{line:138,column:2},end:{line:138,column:3}},loc:{start:{line:138,column:11},end:{line:272,column:3}},line:138},17:{name:"(anonymous_17)",decl:{start:{line:174,column:39},end:{line:174,column:40}},loc:{start:{line:174,column:51},end:{line:187,column:7}},line:174},18:{name:"(anonymous_18)",decl:{start:{line:199,column:26},end:{line:199,column:27}},loc:{start:{line:199,column:33},end:{line:199,column:63}},line:199},19:{name:"(anonymous_19)",decl:{start:{line:247,column:22},end:{line:247,column:23}},loc:{start:{line:247,column:28},end:{line:250,column:13}},line:247}},branchMap:{0:{loc:{start:{line:17,column:17},end:{line:17,column:40}},type:"binary-expr",locations:[{start:{line:17,column:17},end:{line:17,column:29}},{start:{line:17,column:33},end:{line:17,column:40}}],line:17},1:{loc:{start:{line:18,column:2},end:{line:20,column:3}},type:"if",locations:[{start:{line:18,column:2},end:{line:20,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:18},2:{loc:{start:{line:23,column:2},end:{line:26,column:3}},type:"if",locations:[{start:{line:23,column:2},end:{line:26,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:23},3:{loc:{start:{line:62,column:2},end:{line:64,column:3}},type:"if",locations:[{start:{line:62,column:2},end:{line:64,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:62},4:{loc:{start:{line:62,column:6},end:{line:62,column:59}},type:"binary-expr",locations:[{start:{line:62,column:6},end:{line:62,column:25}},{start:{line:62,column:29},end:{line:62,column:59}}],line:62},5:{loc:{start:{line:72,column:2},end:{line:74,column:3}},type:"if",locations:[{start:{line:72,column:2},end:{line:74,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:72},6:{loc:{start:{line:123,column:4},end:{line:136,column:5}},type:"if",locations:[{start:{line:123,column:4},end:{line:136,column:5}},{start:{line:128,column:11},end:{line:136,column:5}}],line:123},7:{loc:{start:{line:123,column:8},end:{line:123,column:66}},type:"binary-expr",locations:[{start:{line:123,column:8},end:{line:123,column:28}},{start:{line:123,column:32},end:{line:123,column:66}}],line:123},8:{loc:{start:{line:128,column:11},end:{line:136,column:5}},type:"if",locations:[{start:{line:128,column:11},end:{line:136,column:5}},{start:{line:132,column:11},end:{line:136,column:5}}],line:128},9:{loc:{start:{line:128,column:15},end:{line:128,column:73}},type:"binary-expr",locations:[{start:{line:128,column:15},end:{line:128,column:34}},{start:{line:128,column:38},end:{line:128,column:73}}],line:128},10:{loc:{start:{line:145,column:36},end:{line:145,column:112}},type:"binary-expr",locations:[{start:{line:145,column:36},end:{line:145,column:55}},{start:{line:145,column:59},end:{line:145,column:112}}],line:145},11:{loc:{start:{line:146,column:4},end:{line:271,column:5}},type:"if",locations:[{start:{line:146,column:4},end:{line:271,column:5}},{start:{line:161,column:11},end:{line:271,column:5}}],line:146},12:{loc:{start:{line:161,column:11},end:{line:271,column:5}},type:"if",locations:[{start:{line:161,column:11},end:{line:271,column:5}},{start:{line:241,column:11},end:{line:271,column:5}}],line:161},13:{loc:{start:{line:185,column:10},end:{line:185,column:119}},type:"binary-expr",locations:[{start:{line:185,column:10},end:{line:185,column:15}},{start:{line:185,column:35},end:{line:185,column:119}}],line:185},14:{loc:{start:{line:235,column:30},end:{line:235,column:62}},type:"cond-expr",locations:[{start:{line:235,column:51},end:{line:235,column:53}},{start:{line:235,column:56},end:{line:235,column:62}}],line:235},15:{loc:{start:{line:258,column:8},end:{line:269,column:12}},type:"binary-expr",locations:[{start:{line:258,column:8},end:{line:258,column:38}},{start:{line:258,column:58},end:{line:269,column:12}}],line:258}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FilterEditor.tsx"],names:[],mappings:"AAgMQ,SAsDA,UAtDA,KAGA,YAHA;AAhMR,OAAO,WAAW;AAClB,SAAQ,4BAA2B;AACnC,SAAQ,eAAc;AAEtB,SAAQ,QAAQ,SAAS,qBAAoB;AAC7C,SAAQ,0BAAyB;AAEjC,SAAQ,0BAAyB;AACjC,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAClB,OAAO,wBAAwB;AAC/B,OAAO,uBAAuB;AAC9B,OAAO,iBAAiB;AACxB,OAAO,SAAS;AAChB,OAAO,wBAAwB;AAC/B,SAA0B,uBAAuB;AAGjD,SAAS,gBAAgB,OAAuF;AAC9G,QAAM,SAAS,MAAM,UAAU,CAAC,KAAK;AAErC,MAAI,CAAC,MAAM,QAAQ,MAAM,GAAG;AAC1B,WAAO;AAAA,EACT;AAEA,MAAI,cAAc,OAAO,CAAC;AAC1B,MAAI,UAAU,OAAO,MAAM,CAAC;AAE5B,MAAG,mBAAmB,QAAQ,WAAW,IAAI,GAAG;AAC9C,kBAAc;AACd,cAAU,CAAC,OAAO,MAAM,CAAC,CAAC;AAAA,EAC5B;AAEA,SAAO,CAAC,aAAa,GAAG,OAAO;AACjC;AAEA,SAAS,cAAc,QAA6D;AAElF,SAAQ,QAAQ,sBAAsB,MAAM,CAAQ,EAAE,OAAO,CAAC,EAAU;AAC1E;AAEA,SAAS,sBAAsB,QAAgG;AAC7H,SAAO;AAAA,IACL,MAAM;AAAA,IACN,WAAW;AAAA,IACX,QAAQ;AAAA,IACR,YAAY,EAAC,qBAAqB,SAAQ;AAAA,IAC1C,WAAW;AAAA,MACT,OAAO;AAAA,QACL,QAAQ;AAAA,QACR,QAAQ;AAAA,MACV;AAAA,IACF;AAAA,IACA,UAAU;AAAA,IACV,UAAU;AAAA,IACV,UAAU;AAAA,MACR;AAAA,QACE,IAAI;AAAA,QACJ,MAAM;AAAA,QACN,QAAQ;AAAA,QACR;AAAA,MACF;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,aAAa;AAAA,EACjB;AAAA,EACA;AAAA,EACA;AACF;AAGA,SAAS,oBAAqB,QAA6D;AACzF,MAAI,OAAO,WAAW,KAAK,WAAW,SAAS,OAAO,CAAC,CAAC,GAAG;AACzD,WAAO;AAAA,EACT;AACA,QAAM,aAAa,cAAc,MAAM;AACvC,SAAO,CAAC,QAAQ,YAAY,MAAM;AACpC;AAEA,SAAS,mBAAmB,QAA6D;AACvF,SAAO,mBAAmB,QAAQ,OAAO,CAAC,CAAC,KAAK;AAClD;AAEA,SAAS,yBAAyB,QAA6D;AAC7F,MAAG,mBAAmB,MAAM,GAAG;AAC7B,WAAO,OAAO,MAAM,CAAC,EAAE,IAAI,OAAK,mBAAmB,CAAQ,CAAC,EAAE,OAAO,OAAK,KAAK,IAAI,EAAE,SAAS;AAAA,EAChG;AACA,SAAO;AACT;AAgBA,MAAM,6BAA6B,MAAM,UAAwD;AAAA,EAC/F,OAAO,eAAe;AAAA,IACpB,QAAQ,CAAC,KAAK;AAAA,EAChB;AAAA,EAEA,YAAa,OAAkC;AAC7C,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,SAAS;AAAA,MACT,qBAAqB,oBAAoB,gBAAgB,KAAK,CAAC;AAAA,IACjE;AAAA,EACF;AAAA;AAAA,EAGA,oBAAoB,WAAmB,SAAgB;AACrD,UAAM,YAAY,gBAAgB,KAAK,KAAK,EAAE,MAAM,CAAC;AACrD,cAAU,SAAS,IAAI;AACvB,SAAK,MAAM,SAAS,SAAS;AAAA,EAC/B;AAAA,EAEA,iBAAiB,WAAmB;AAClC,UAAM,YAAY,gBAAgB,KAAK,KAAK,EAAE,MAAM,CAAC;AACrD,cAAU,OAAO,YAAY,GAAG,CAAC;AACjC,SAAK,MAAM,SAAS,SAAS;AAAA,EAC/B;AAAA,EAEA,gBAAgB,MAAM;AACpB,UAAM,gBAAgB,gBAAgB,KAAK,KAAK,EAAE,MAAM,CAAC;AACzD,IAAC,cAAwB,KAAK,CAAC,MAAM,QAAQ,EAAE,CAAC;AAChD,SAAK,MAAM,SAAS,aAAa;AAAA,EACnC;AAAA,EAEA,cAAc,CAAC,QAAiB;AAC9B,SAAK,SAAS;AAAA,MACZ,SAAS;AAAA,IACX,CAAC;AAAA,EACH;AAAA,EAEA,aAAa,MAAM;AACjB,SAAK,SAAS;AAAA,MACZ,qBAAqB;AAAA,IACvB,CAAC;AAAA,EACH;AAAA,EAEA,iBAAiB,MAAM;AACrB,UAAM,SAAS,gBAAgB,KAAK,KAAK;AACzC,SAAK,MAAM,SAAS,cAAc,MAAM,CAAC;AACzC,SAAK,SAAS;AAAA,MACZ,qBAAqB;AAAA,IACvB,CAAC;AAAA,EACH;AAAA,EAEA,OAAO,yBAAyB,OAA4C,OAA0B;AACpG,UAAM,sBAAsB,oBAAoB,gBAAgB,KAAK,CAAC;AAGtE,QAAI,CAAC,uBAAuB,MAAM,wBAAwB,MAAM;AAC9D,aAAO;AAAA,QACL,qBAAqB;AAAA,QACrB,qBAAqB;AAAA,MACvB;AAAA,IACF,WACS,uBAAuB,MAAM,wBAAwB,OAAO;AACnE,aAAO;AAAA,QACL,qBAAqB;AAAA,MACvB;AAAA,IACF,OACK;AACH,aAAO;AAAA,QACL,qBAAqB;AAAA,MACvB;AAAA,IACF;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,QAAQ,EAAC,IAAI,KAAK;AACzB,UAAM,EAAC,oBAAmB,IAAI,KAAK;AACnC,UAAM,YAAU;AAAA,MACd,KAAK,OAAO,MAAM,OAAO,MAAM;AAAA,IACjC;AACA,UAAM,gBAAgB,CAAC,KAAK;AAE5B,UAAM,0BAA0B,uBAAuB,yBAAyB,gBAAgB,KAAK,KAAK,CAAC;AAE3G,QAAI,yBAAyB;AAC3B,aAAO,qBAAC,SAAI,WAAU,sCACpB;AAAA,4BAAC,OACE,YAAE,mCAAmC,GACxC;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YACC,SAAS,KAAK;AAAA,YACd,OAAO,EAAE,uBAAuB;AAAA,YAEhC;AAAA,kCAAC,SAAI,OAAO,EAAC,aAAa,SAAS,OAAM,QAAQ,QAAO,QAAQ,eAAe,SAAQ,GAAG,SAAQ,aAChG,8BAAC,UAAK,MAAK,gBAAe,GAAG,oBAAoB,GACnD;AAAA,cACC,EAAE,uBAAuB;AAAA;AAAA;AAAA,QAC5B;AAAA,SACF;AAAA,IACF,WACS,qBAAqB;AAC5B,YAAM,SAAS,gBAAgB,KAAK,KAAK;AACzC,YAAM,cAAc,OAAO,CAAC;AAC5B,YAAM,UAAU,OAAO,MAAM,CAAC;AAE9B,YAAM,UACJ,oBAAC,SACC;AAAA,QAAC;AAAA;AAAA,UACC,SAAS,KAAK;AAAA,UACd,OAAO,EAAE,uBAAuB;AAAA,UAChC,WAAU;AAAA,UAEV,8BAAC,SAAI,OAAO,EAAC,OAAM,QAAQ,QAAO,QAAQ,eAAe,SAAQ,GAAG,SAAQ,aAC1E,8BAAC,UAAK,MAAK,gBAAe,GAAG,oBAAoB,GACnD;AAAA;AAAA,MACF,GACF;AAGF,YAAM,eAAe,QAAQ,IAAI,CAAC,GAAG,QAAQ;AAC3C,cAAM,QAAQ,OAAQ,UAAU,MAAI,CAAC,GAAG;AAExC,eACE,qBAAC,SACC;AAAA,8BAAC,qBAA4B,UAAU,KAAK,iBAAiB,KAAK,MAAM,GAAG,GACzE;AAAA,YAAC;AAAA;AAAA,cACC,YAAY,KAAK,MAAM;AAAA,cACvB,QAAQ;AAAA,cACR,UAAU,KAAK,oBAAoB,KAAK,MAAM,MAAM,CAAC;AAAA;AAAA,UACvD,KALsB,GAMxB;AAAA,UACC,SACC,oBAAC,SAAgB,WAAU,yBAAyB,gBAAM,WAAjD,OAAyD;AAAA,aAT5D,SAAS,GAAG,EAWtB;AAAA,MAEJ,CAAC;AAGD,aACE,iCACE;AAAA;AAAA,UAAC;AAAA;AAAA,YAEC;AAAA,YACA,OAAO,EAAE,QAAQ;AAAA,YACjB,QAAQ;AAAA,YAER;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO;AAAA,gBACP,UAAU,CAAC,MAAqB,KAAK,oBAAoB,GAAG,CAAC;AAAA,gBAC7D,SAAS;AAAA,kBACP,CAAC,OAAO,EAAE,sBAAsB,CAAC;AAAA,kBACjC,CAAC,QAAQ,EAAE,mBAAmB,CAAC;AAAA,kBAC/B,CAAC,OAAO,EAAE,oBAAoB,CAAC;AAAA,gBACjC;AAAA;AAAA,YACF;AAAA;AAAA,UAbI;AAAA,QAcN;AAAA,QACC;AAAA,QACD;AAAA,UAAC;AAAA;AAAA,YAEC,WAAU;AAAA,YAEV;AAAA,cAAC;AAAA;AAAA,gBACC,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACV,SAAS,KAAK;AAAA,gBAEd;AAAA,sCAAC,SAAI,OAAO,EAAC,OAAM,QAAQ,QAAO,QAAQ,eAAe,cAAa,GAAG,SAAQ,aAC/E,8BAAC,UAAK,MAAK,gBAAe,GAAG,sBAAsB,GACrD;AAAA,kBAAM;AAAA,kBAAE,EAAE,YAAY;AAAA;AAAA;AAAA,YACxB;AAAA;AAAA,UAXI;AAAA,QAYN;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YAEC,WAAU;AAAA,YACV,OAAO,EAAC,SAAS,KAAK,MAAM,UAAU,KAAK,OAAM;AAAA,YAEjD,8BAAC,OAAI,WAAsB;AAAA;AAAA,UAJvB;AAAA,QAKN;AAAA,SACF;AAAA,IAEJ,OACK;AACH,YAAM,EAAC,OAAM,IAAI,KAAK;AAEtB,aACE,iCACE;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,UAAU,MAAM;AACd,mBAAK,SAAS,EAAC,qBAAqB,KAAI,CAAC;AACzC,mBAAK,MAAM,SAAS,aAAa;AAAA,YACnC;AAAA,YACA,WAAU;AAAA,YACV;AAAA,YACA,OAAO;AAAA,YACP;AAAA,YACA,UAAU,KAAK,MAAM;AAAA;AAAA,QACvB;AAAA,QACC,KAAK,MAAM,uBACV,qBAAC,SAAI,WAAU,yBACZ;AAAA,YAAE,qCAAqC;AAAA,UACvC;AAAA,UACD;AAAA,YAAC;AAAA;AAAA,cACC,SAAS,KAAK;AAAA,cACd,WAAU;AAAA,cAET,YAAE,0BAA0B;AAAA;AAAA,UAC/B;AAAA,WACF;AAAA,SAEJ;AAAA,IAEJ;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"10bf63b3f71adfa5066d0aecd6eaecbe45ada76f"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Un=function(){return l},l}Un();function x0(n){Un().f[0]++;const e=(Un().s[0]++,Un().b[0][0]++,n.filter||(Un().b[0][1]++,["all"]));if(Un().s[1]++,Array.isArray(e))Un().b[1][1]++;else return Un().b[1][0]++,Un().s[2]++,e;let t=(Un().s[3]++,e[0]),r=(Un().s[4]++,e.slice(1));return Un().s[5]++,xO.indexOf(t)<0?(Un().b[2][0]++,Un().s[6]++,t="all",Un().s[7]++,r=[e.slice(0)]):Un().b[2][1]++,Un().s[8]++,[t,...r]}function woe(n){return Un().f[1]++,Un().s[9]++,$q(Soe(n)).layers[0].filter}function Soe(n){return Un().f[2]++,Un().s[10]++,{id:"tmp",version:8,name:"Empty Style",metadata:{"maputnik:renderer":"mlgljs"},sources:{tmp:{type:"geojson",data:""}},sprite:"",glyphs:"https://orangemug.github.io/font-glyphs/glyphs/{fontstack}/{range}.pbf",layers:[{id:"tmp",type:"fill",source:"tmp",filter:n}]}}const Eoe=(Un().s[11]++,["all","any","none"]);function X9(n){if(Un().f[3]++,Un().s[12]++,Un().b[4][0]++,n.length===1&&(Un().b[4][1]++,Eoe.includes(n[0])))return Un().b[3][0]++,Un().s[13]++,!0;Un().b[3][1]++;const e=(Un().s[14]++,Wv(n));return Un().s[15]++,!j2.isEqual(e,n)}function J9(n){return Un().f[4]++,Un().s[16]++,xO.indexOf(n[0])>=0}function Boe(n){return Un().f[5]++,Un().s[17]++,J9(n)?(Un().b[5][0]++,Un().s[18]++,n.slice(1).map(e=>(Un().f[6]++,Un().s[19]++,J9(e))).filter(e=>(Un().f[7]++,Un().s[20]++,e==!0)).length>0):(Un().b[5][1]++,Un().s[21]++,!1)}class Lz extends Xn.Component{constructor(t){Un().f[8]++,Un().s[23]++;super(t);Kn(this,"addFilterItem",(Un().s[31]++,()=>{Un().f[11]++;const t=(Un().s[32]++,x0(this.props).slice(0));Un().s[33]++,t.push(["==","name",""]),Un().s[34]++,this.props.onChange(t)}));Kn(this,"onToggleDoc",(Un().s[35]++,t=>{Un().f[12]++,Un().s[36]++,this.setState({showDoc:t})}));Kn(this,"makeFilter",(Un().s[37]++,()=>{Un().f[13]++,Un().s[38]++,this.setState({displaySimpleFilter:!0})}));Kn(this,"makeExpression",(Un().s[39]++,()=>{Un().f[14]++;const t=(Un().s[40]++,x0(this.props));Un().s[41]++,this.props.onChange(woe(t)),Un().s[42]++,this.setState({displaySimpleFilter:!1})}));Un().s[24]++,this.state={showDoc:!1,displaySimpleFilter:X9(x0(t))}}onFilterPartChanged(t,r){Un().f[9]++;const i=(Un().s[25]++,x0(this.props).slice(0));Un().s[26]++,i[t]=r,Un().s[27]++,this.props.onChange(i)}deleteFilterItem(t){Un().f[10]++;const r=(Un().s[28]++,x0(this.props).slice(0));Un().s[29]++,r.splice(t+1,1),Un().s[30]++,this.props.onChange(r)}static getDerivedStateFromProps(t,r){Un().f[15]++;const i=(Un().s[43]++,X9(x0(t)));return Un().s[44]++,Un().b[7][0]++,!i&&(Un().b[7][1]++,r.displaySimpleFilter===!0)?(Un().b[6][0]++,Un().s[45]++,{displaySimpleFilter:!1,valueIsSimpleFilter:!1}):(Un().b[6][1]++,Un().s[46]++,Un().b[9][0]++,i&&(Un().b[9][1]++,r.displaySimpleFilter===!1)?(Un().b[8][0]++,Un().s[47]++,{valueIsSimpleFilter:!0}):(Un().b[8][1]++,Un().s[48]++,{valueIsSimpleFilter:!1}))}render(){Un().f[16]++;const{errors:t,t:r}=(Un().s[49]++,this.props),{displaySimpleFilter:i}=(Un().s[50]++,this.state),s=(Un().s[51]++,{doc:Ms.layer.filter.doc+" Combine multiple filters together by using a compound filter."}),l=(Un().s[52]++,["all"]),o=(Un().s[53]++,Un().b[10][0]++,i&&(Un().b[10][1]++,Boe(x0(this.props))));if(Un().s[54]++,o)return Un().b[11][0]++,Un().s[55]++,ue.jsxs("div",{className:"maputnik-filter-editor-unsupported",children:[ue.jsx("p",{children:r("Nested filters are not supported.")}),ue.jsxs(Ha,{onClick:this.makeExpression,title:r("Convert to expression"),children:[ue.jsx("svg",{style:{marginRight:"0.2em",width:"14px",height:"14px",verticalAlign:"middle"},viewBox:"0 0 24 24",children:ue.jsx("path",{fill:"currentColor",d:SC})}),r("Upgrade to expression")]})]});if(Un().b[11][1]++,Un().s[56]++,i){Un().b[12][0]++;const f=(Un().s[57]++,x0(this.props)),y=(Un().s[58]++,f[0]),x=(Un().s[59]++,f.slice(1)),B=(Un().s[60]++,ue.jsx("div",{children:ue.jsx(Ha,{onClick:this.makeExpression,title:r("Convert to expression"),className:"maputnik-make-zoom-function",children:ue.jsx("svg",{style:{width:"14px",height:"14px",verticalAlign:"middle"},viewBox:"0 0 24 24",children:ue.jsx("path",{fill:"currentColor",d:SC})})})})),O=(Un().s[61]++,x.map((P,U)=>{Un().f[17]++;const j=(Un().s[62]++,t[`filter[${U+1}]`]);return Un().s[63]++,ue.jsxs("div",{children:[ue.jsx(boe,{onDelete:this.deleteFilterItem.bind(this,U),children:ue.jsx(Rz,{properties:this.props.properties,filter:P,onChange:this.onFilterPartChanged.bind(this,U+1)})},U),(Un().b[13][0]++,j&&(Un().b[13][1]++,ue.jsx("div",{className:"maputnik-inline-error",children:j.message},"error")))]},`block-${U}`)}));return Un().s[64]++,ue.jsxs(ue.Fragment,{children:[ue.jsx(la,{fieldSpec:s,label:r("Filter"),action:B,children:ue.jsx(Hg,{value:y,onChange:P=>(Un().f[18]++,Un().s[65]++,this.onFilterPartChanged(0,P)),options:[["all",r("every filter matches")],["none",r("no filter matches")],["any",r("any filter matches")]]})},"top"),O,ue.jsx("div",{className:"maputnik-filter-editor-add-wrapper",children:ue.jsxs(Ha,{"data-wd-key":"layer-filter-button",className:"maputnik-add-filter",onClick:this.addFilterItem,children:[ue.jsx("svg",{style:{width:"14px",height:"14px",verticalAlign:"text-bottom"},viewBox:"0 0 24 24",children:ue.jsx("path",{fill:"currentColor",d:bO})})," ",r("Add filter")]})},"buttons"),ue.jsx("div",{className:"maputnik-doc-inline",style:{display:this.state.showDoc?(Un().b[14][0]++,""):(Un().b[14][1]++,"none")},children:ue.jsx(yO,{fieldSpec:s})},"doc")]})}else{Un().b[12][1]++;const{filter:f}=(Un().s[66]++,this.props);return Un().s[67]++,ue.jsxs(ue.Fragment,{children:[ue.jsx(Fz,{onDelete:()=>{Un().f[19]++,Un().s[68]++,this.setState({displaySimpleFilter:!0}),Un().s[69]++,this.props.onChange(l)},fieldName:"filter",fieldSpec:s,value:f,errors:t,onChange:this.props.onChange}),(Un().b[15][0]++,this.state.valueIsSimpleFilter&&(Un().b[15][1]++,ue.jsxs("div",{className:"maputnik-expr-infobox",children:[r("You've entered an old style filter.")," ",ue.jsx("button",{onClick:this.makeFilter,className:"maputnik-expr-infobox__button",children:r("Switch to filter editor.")})]})))]})}}}Kn(Lz,"defaultProps",(Un().s[22]++,{filter:["all"]}));const Ooe=(Un().s[70]++,zs()(Lz));var B1={},Ah={},O1={},o5,ek;function Uz(){if(ek)return o5;ek=1;var n=typeof window=="object"&&window&&window.Object===Object&&window;return o5=n,o5}var s5,tk;function vp(){if(tk)return s5;tk=1;var n=Uz(),e=typeof self=="object"&&self&&self.Object===Object&&self,t=n||e||Function("return this")();return s5=t,s5}var a5,nk;function JC(){if(nk)return a5;nk=1;var n=vp(),e=n.Symbol;return a5=e,a5}var l5,rk;function Ioe(){if(rk)return l5;rk=1;var n=JC(),e=Object.prototype,t=e.hasOwnProperty,r=e.toString,i=n?n.toStringTag:void 0;function s(l){var o=t.call(l,i),f=l[i];try{l[i]=void 0;var y=!0}catch{}var x=r.call(l);return y&&(o?l[i]=f:delete l[i]),x}return l5=s,l5}var u5,ik;function koe(){if(ik)return u5;ik=1;var n=Object.prototype,e=n.toString;function t(r){return e.call(r)}return u5=t,u5}var A5,ok;function Zg(){if(ok)return A5;ok=1;var n=JC(),e=Ioe(),t=koe(),r="[object Null]",i="[object Undefined]",s=n?n.toStringTag:void 0;function l(o){return o==null?o===void 0?i:r:s&&s in Object(o)?e(o):t(o)}return A5=l,A5}var c5,sk;function Vh(){if(sk)return c5;sk=1;var n=Array.isArray;return c5=n,c5}var d5,ak;function sm(){if(ak)return d5;ak=1;function n(e){return e!=null&&typeof e=="object"}return d5=n,d5}var h5,lk;function Toe(){if(lk)return h5;lk=1;var n=Zg(),e=Vh(),t=sm(),r="[object String]";function i(s){return typeof s=="string"||!e(s)&&t(s)&&n(s)==r}return h5=i,h5}var f5,uk;function Poe(){if(uk)return f5;uk=1;function n(e){return function(t,r,i){for(var s=-1,l=Object(t),o=i(t),f=o.length;f--;){var y=o[e?f:++s];if(r(l[y],y,l)===!1)break}return t}}return f5=n,f5}var p5,Ak;function zz(){if(Ak)return p5;Ak=1;var n=Poe(),e=n();return p5=e,p5}var m5,ck;function Koe(){if(ck)return m5;ck=1;function n(e,t){for(var r=-1,i=Array(e);++r<e;)i[r]=t(r);return i}return m5=n,m5}var g5,dk;function Roe(){if(dk)return g5;dk=1;var n=Zg(),e=sm(),t="[object Arguments]";function r(i){return e(i)&&n(i)==t}return g5=r,g5}var y5,hk;function wO(){if(hk)return y5;hk=1;var n=Roe(),e=sm(),t=Object.prototype,r=t.hasOwnProperty,i=t.propertyIsEnumerable,s=n(function(){return arguments}())?n:function(l){return e(l)&&r.call(l,"callee")&&!i.call(l,"callee")};return y5=s,y5}var Kv={exports:{}},v5,fk;function Doe(){if(fk)return v5;fk=1;function n(){return!1}return v5=n,v5}Kv.exports;var pk;function Wx(){return pk||(pk=1,function(n,e){var t=vp(),r=Doe(),i=e&&!e.nodeType&&e,s=i&&!0&&n&&!n.nodeType&&n,l=s&&s.exports===i,o=l?t.Buffer:void 0,f=o?o.isBuffer:void 0,y=f||r;n.exports=y}(Kv,Kv.exports)),Kv.exports}var C5,mk;function SO(){if(mk)return C5;mk=1;var n=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function t(r,i){var s=typeof r;return i=i??n,!!i&&(s=="number"||s!="symbol"&&e.test(r))&&r>-1&&r%1==0&&r<i}return C5=t,C5}var _5,gk;function EO(){if(gk)return _5;gk=1;var n=9007199254740991;function e(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=n}return _5=e,_5}var b5,yk;function Foe(){if(yk)return b5;yk=1;var n=Zg(),e=EO(),t=sm(),r="[object Arguments]",i="[object Array]",s="[object Boolean]",l="[object Date]",o="[object Error]",f="[object Function]",y="[object Map]",x="[object Number]",B="[object Object]",O="[object RegExp]",P="[object Set]",U="[object String]",j="[object WeakMap]",N="[object ArrayBuffer]",Y="[object DataView]",H="[object Float32Array]",se="[object Float64Array]",re="[object Int8Array]",V="[object Int16Array]",ne="[object Int32Array]",G="[object Uint8Array]",oe="[object Uint8ClampedArray]",he="[object Uint16Array]",fe="[object Uint32Array]",Ee={};Ee[H]=Ee[se]=Ee[re]=Ee[V]=Ee[ne]=Ee[G]=Ee[oe]=Ee[he]=Ee[fe]=!0,Ee[r]=Ee[i]=Ee[N]=Ee[s]=Ee[Y]=Ee[l]=Ee[o]=Ee[f]=Ee[y]=Ee[x]=Ee[B]=Ee[O]=Ee[P]=Ee[U]=Ee[j]=!1;function me(Se){return t(Se)&&e(Se.length)&&!!Ee[n(Se)]}return b5=me,b5}var x5,vk;function BO(){if(vk)return x5;vk=1;function n(e){return function(t){return e(t)}}return x5=n,x5}var Rv={exports:{}};Rv.exports;var Ck;function OO(){return Ck||(Ck=1,function(n,e){var t=Uz(),r=e&&!e.nodeType&&e,i=r&&!0&&n&&!n.nodeType&&n,s=i&&i.exports===r,l=s&&t.process,o=function(){try{var f=i&&i.require&&i.require("util").types;return f||l&&l.binding&&l.binding("util")}catch{}}();n.exports=o}(Rv,Rv.exports)),Rv.exports}var M5,_k;function IO(){if(_k)return M5;_k=1;var n=Foe(),e=BO(),t=OO(),r=t&&t.isTypedArray,i=r?e(r):n;return M5=i,M5}var w5,bk;function jz(){if(bk)return w5;bk=1;var n=Koe(),e=wO(),t=Vh(),r=Wx(),i=SO(),s=IO(),l=Object.prototype,o=l.hasOwnProperty;function f(y,x){var B=t(y),O=!B&&e(y),P=!B&&!O&&r(y),U=!B&&!O&&!P&&s(y),j=B||O||P||U,N=j?n(y.length,String):[],Y=N.length;for(var H in y)(x||o.call(y,H))&&!(j&&(H=="length"||P&&(H=="offset"||H=="parent")||U&&(H=="buffer"||H=="byteLength"||H=="byteOffset")||i(H,Y)))&&N.push(H);return N}return w5=f,w5}var S5,xk;function kO(){if(xk)return S5;xk=1;var n=Object.prototype;function e(t){var r=t&&t.constructor,i=typeof r=="function"&&r.prototype||n;return t===i}return S5=e,S5}var E5,Mk;function Nz(){if(Mk)return E5;Mk=1;function n(e,t){return function(r){return e(t(r))}}return E5=n,E5}var B5,wk;function Loe(){if(wk)return B5;wk=1;var n=Nz(),e=n(Object.keys,Object);return B5=e,B5}var O5,Sk;function Uoe(){if(Sk)return O5;Sk=1;var n=kO(),e=Loe(),t=Object.prototype,r=t.hasOwnProperty;function i(s){if(!n(s))return e(s);var l=[];for(var o in Object(s))r.call(s,o)&&o!="constructor"&&l.push(o);return l}return O5=i,O5}var I5,Ek;function Ff(){if(Ek)return I5;Ek=1;function n(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}return I5=n,I5}var k5,Bk;function TO(){if(Bk)return k5;Bk=1;var n=Zg(),e=Ff(),t="[object AsyncFunction]",r="[object Function]",i="[object GeneratorFunction]",s="[object Proxy]";function l(o){if(!e(o))return!1;var f=n(o);return f==r||f==i||f==t||f==s}return k5=l,k5}var T5,Ok;function Yy(){if(Ok)return T5;Ok=1;var n=TO(),e=EO();function t(r){return r!=null&&e(r.length)&&!n(r)}return T5=t,T5}var P5,Ik;function e_(){if(Ik)return P5;Ik=1;var n=jz(),e=Uoe(),t=Yy();function r(i){return t(i)?n(i):e(i)}return P5=r,P5}var K5,kk;function Wz(){if(kk)return K5;kk=1;var n=zz(),e=e_();function t(r,i){return r&&n(r,i,e)}return K5=t,K5}var R5,Tk;function Gx(){if(Tk)return R5;Tk=1;function n(e){return e}return R5=n,R5}var D5,Pk;function Gz(){if(Pk)return D5;Pk=1;var n=Gx();function e(t){return typeof t=="function"?t:n}return D5=e,D5}var F5,Kk;function PO(){if(Kk)return F5;Kk=1;var n=Wz(),e=Gz();function t(r,i){return r&&n(r,e(i))}return F5=t,F5}var L5,Rk;function KO(){if(Rk)return L5;Rk=1;var n=Nz(),e=n(Object.getPrototypeOf,Object);return L5=e,L5}var U5,Dk;function Qz(){if(Dk)return U5;Dk=1;var n=Zg(),e=KO(),t=sm(),r="[object Object]",i=Function.prototype,s=Object.prototype,l=i.toString,o=s.hasOwnProperty,f=l.call(Object);function y(x){if(!t(x)||n(x)!=r)return!1;var B=e(x);if(B===null)return!0;var O=o.call(B,"constructor")&&B.constructor;return typeof O=="function"&&O instanceof O&&l.call(O)==f}return U5=y,U5}var z5,Fk;function Yz(){if(Fk)return z5;Fk=1;function n(e,t){for(var r=-1,i=e==null?0:e.length,s=Array(i);++r<i;)s[r]=t(e[r],r,e);return s}return z5=n,z5}var j5,Lk;function zoe(){if(Lk)return j5;Lk=1;function n(){this.__data__=[],this.size=0}return j5=n,j5}var N5,Uk;function t_(){if(Uk)return N5;Uk=1;function n(e,t){return e===t||e!==e&&t!==t}return N5=n,N5}var W5,zk;function Qx(){if(zk)return W5;zk=1;var n=t_();function e(t,r){for(var i=t.length;i--;)if(n(t[i][0],r))return i;return-1}return W5=e,W5}var G5,jk;function joe(){if(jk)return G5;jk=1;var n=Qx(),e=Array.prototype,t=e.splice;function r(i){var s=this.__data__,l=n(s,i);if(l<0)return!1;var o=s.length-1;return l==o?s.pop():t.call(s,l,1),--this.size,!0}return G5=r,G5}var Q5,Nk;function Noe(){if(Nk)return Q5;Nk=1;var n=Qx();function e(t){var r=this.__data__,i=n(r,t);return i<0?void 0:r[i][1]}return Q5=e,Q5}var Y5,Wk;function Woe(){if(Wk)return Y5;Wk=1;var n=Qx();function e(t){return n(this.__data__,t)>-1}return Y5=e,Y5}var q5,Gk;function Goe(){if(Gk)return q5;Gk=1;var n=Qx();function e(t,r){var i=this.__data__,s=n(i,t);return s<0?(++this.size,i.push([t,r])):i[s][1]=r,this}return q5=e,q5}var V5,Qk;function Yx(){if(Qk)return V5;Qk=1;var n=zoe(),e=joe(),t=Noe(),r=Woe(),i=Goe();function s(l){var o=-1,f=l==null?0:l.length;for(this.clear();++o<f;){var y=l[o];this.set(y[0],y[1])}}return s.prototype.clear=n,s.prototype.delete=e,s.prototype.get=t,s.prototype.has=r,s.prototype.set=i,V5=s,V5}var $5,Yk;function Qoe(){if(Yk)return $5;Yk=1;var n=Yx();function e(){this.__data__=new n,this.size=0}return $5=e,$5}var H5,qk;function Yoe(){if(qk)return H5;qk=1;function n(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}return H5=n,H5}var Z5,Vk;function qoe(){if(Vk)return Z5;Vk=1;function n(e){return this.__data__.get(e)}return Z5=n,Z5}var X5,$k;function Voe(){if($k)return X5;$k=1;function n(e){return this.__data__.has(e)}return X5=n,X5}var J5,Hk;function $oe(){if(Hk)return J5;Hk=1;var n=vp(),e=n["__core-js_shared__"];return J5=e,J5}var eM,Zk;function Hoe(){if(Zk)return eM;Zk=1;var n=$oe(),e=function(){var r=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function t(r){return!!e&&e in r}return eM=t,eM}var tM,Xk;function qz(){if(Xk)return tM;Xk=1;var n=Function.prototype,e=n.toString;function t(r){if(r!=null){try{return e.call(r)}catch{}try{return r+""}catch{}}return""}return tM=t,tM}var nM,Jk;function Zoe(){if(Jk)return nM;Jk=1;var n=TO(),e=Hoe(),t=Ff(),r=qz(),i=/[\\^$.*+?()[\]{}|]/g,s=/^\[object .+?Constructor\]$/,l=Function.prototype,o=Object.prototype,f=l.toString,y=o.hasOwnProperty,x=RegExp("^"+f.call(y).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function B(O){if(!t(O)||e(O))return!1;var P=n(O)?x:s;return P.test(r(O))}return nM=B,nM}var rM,eT;function Xoe(){if(eT)return rM;eT=1;function n(e,t){return e==null?void 0:e[t]}return rM=n,rM}var iM,tT;function Xg(){if(tT)return iM;tT=1;var n=Zoe(),e=Xoe();function t(r,i){var s=e(r,i);return n(s)?s:void 0}return iM=t,iM}var oM,nT;function RO(){if(nT)return oM;nT=1;var n=Xg(),e=vp(),t=n(e,"Map");return oM=t,oM}var sM,rT;function qx(){if(rT)return sM;rT=1;var n=Xg(),e=n(Object,"create");return sM=e,sM}var aM,iT;function Joe(){if(iT)return aM;iT=1;var n=qx();function e(){this.__data__=n?n(null):{},this.size=0}return aM=e,aM}var lM,oT;function ese(){if(oT)return lM;oT=1;function n(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}return lM=n,lM}var uM,sT;function tse(){if(sT)return uM;sT=1;var n=qx(),e="__lodash_hash_undefined__",t=Object.prototype,r=t.hasOwnProperty;function i(s){var l=this.__data__;if(n){var o=l[s];return o===e?void 0:o}return r.call(l,s)?l[s]:void 0}return uM=i,uM}var AM,aT;function nse(){if(aT)return AM;aT=1;var n=qx(),e=Object.prototype,t=e.hasOwnProperty;function r(i){var s=this.__data__;return n?s[i]!==void 0:t.call(s,i)}return AM=r,AM}var cM,lT;function rse(){if(lT)return cM;lT=1;var n=qx(),e="__lodash_hash_undefined__";function t(r,i){var s=this.__data__;return this.size+=this.has(r)?0:1,s[r]=n&&i===void 0?e:i,this}return cM=t,cM}var dM,uT;function ise(){if(uT)return dM;uT=1;var n=Joe(),e=ese(),t=tse(),r=nse(),i=rse();function s(l){var o=-1,f=l==null?0:l.length;for(this.clear();++o<f;){var y=l[o];this.set(y[0],y[1])}}return s.prototype.clear=n,s.prototype.delete=e,s.prototype.get=t,s.prototype.has=r,s.prototype.set=i,dM=s,dM}var hM,AT;function ose(){if(AT)return hM;AT=1;var n=ise(),e=Yx(),t=RO();function r(){this.size=0,this.__data__={hash:new n,map:new(t||e),string:new n}}return hM=r,hM}var fM,cT;function sse(){if(cT)return fM;cT=1;function n(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}return fM=n,fM}var pM,dT;function Vx(){if(dT)return pM;dT=1;var n=sse();function e(t,r){var i=t.__data__;return n(r)?i[typeof r=="string"?"string":"hash"]:i.map}return pM=e,pM}var mM,hT;function ase(){if(hT)return mM;hT=1;var n=Vx();function e(t){var r=n(this,t).delete(t);return this.size-=r?1:0,r}return mM=e,mM}var gM,fT;function lse(){if(fT)return gM;fT=1;var n=Vx();function e(t){return n(this,t).get(t)}return gM=e,gM}var yM,pT;function use(){if(pT)return yM;pT=1;var n=Vx();function e(t){return n(this,t).has(t)}return yM=e,yM}var vM,mT;function Ase(){if(mT)return vM;mT=1;var n=Vx();function e(t,r){var i=n(this,t),s=i.size;return i.set(t,r),this.size+=i.size==s?0:1,this}return vM=e,vM}var CM,gT;function DO(){if(gT)return CM;gT=1;var n=ose(),e=ase(),t=lse(),r=use(),i=Ase();function s(l){var o=-1,f=l==null?0:l.length;for(this.clear();++o<f;){var y=l[o];this.set(y[0],y[1])}}return s.prototype.clear=n,s.prototype.delete=e,s.prototype.get=t,s.prototype.has=r,s.prototype.set=i,CM=s,CM}var _M,yT;function cse(){if(yT)return _M;yT=1;var n=Yx(),e=RO(),t=DO(),r=200;function i(s,l){var o=this.__data__;if(o instanceof n){var f=o.__data__;if(!e||f.length<r-1)return f.push([s,l]),this.size=++o.size,this;o=this.__data__=new t(f)}return o.set(s,l),this.size=o.size,this}return _M=i,_M}var bM,vT;function $x(){if(vT)return bM;vT=1;var n=Yx(),e=Qoe(),t=Yoe(),r=qoe(),i=Voe(),s=cse();function l(o){var f=this.__data__=new n(o);this.size=f.size}return l.prototype.clear=e,l.prototype.delete=t,l.prototype.get=r,l.prototype.has=i,l.prototype.set=s,bM=l,bM}var xM,CT;function dse(){if(CT)return xM;CT=1;var n="__lodash_hash_undefined__";function e(t){return this.__data__.set(t,n),this}return xM=e,xM}var MM,_T;function hse(){if(_T)return MM;_T=1;function n(e){return this.__data__.has(e)}return MM=n,MM}var wM,bT;function fse(){if(bT)return wM;bT=1;var n=DO(),e=dse(),t=hse();function r(i){var s=-1,l=i==null?0:i.length;for(this.__data__=new n;++s<l;)this.add(i[s])}return r.prototype.add=r.prototype.push=e,r.prototype.has=t,wM=r,wM}var SM,xT;function pse(){if(xT)return SM;xT=1;function n(e,t){for(var r=-1,i=e==null?0:e.length;++r<i;)if(t(e[r],r,e))return!0;return!1}return SM=n,SM}var EM,MT;function mse(){if(MT)return EM;MT=1;function n(e,t){return e.has(t)}return EM=n,EM}var BM,wT;function Vz(){if(wT)return BM;wT=1;var n=fse(),e=pse(),t=mse(),r=1,i=2;function s(l,o,f,y,x,B){var O=f&r,P=l.length,U=o.length;if(P!=U&&!(O&&U>P))return!1;var j=B.get(l),N=B.get(o);if(j&&N)return j==o&&N==l;var Y=-1,H=!0,se=f&i?new n:void 0;for(B.set(l,o),B.set(o,l);++Y<P;){var re=l[Y],V=o[Y];if(y)var ne=O?y(V,re,Y,o,l,B):y(re,V,Y,l,o,B);if(ne!==void 0){if(ne)continue;H=!1;break}if(se){if(!e(o,function(G,oe){if(!t(se,oe)&&(re===G||x(re,G,f,y,B)))return se.push(oe)})){H=!1;break}}else if(!(re===V||x(re,V,f,y,B))){H=!1;break}}return B.delete(l),B.delete(o),H}return BM=s,BM}var OM,ST;function $z(){if(ST)return OM;ST=1;var n=vp(),e=n.Uint8Array;return OM=e,OM}var IM,ET;function gse(){if(ET)return IM;ET=1;function n(e){var t=-1,r=Array(e.size);return e.forEach(function(i,s){r[++t]=[s,i]}),r}return IM=n,IM}var kM,BT;function yse(){if(BT)return kM;BT=1;function n(e){var t=-1,r=Array(e.size);return e.forEach(function(i){r[++t]=i}),r}return kM=n,kM}var TM,OT;function vse(){if(OT)return TM;OT=1;var n=JC(),e=$z(),t=t_(),r=Vz(),i=gse(),s=yse(),l=1,o=2,f="[object Boolean]",y="[object Date]",x="[object Error]",B="[object Map]",O="[object Number]",P="[object RegExp]",U="[object Set]",j="[object String]",N="[object Symbol]",Y="[object ArrayBuffer]",H="[object DataView]",se=n?n.prototype:void 0,re=se?se.valueOf:void 0;function V(ne,G,oe,he,fe,Ee,me){switch(oe){case H:if(ne.byteLength!=G.byteLength||ne.byteOffset!=G.byteOffset)return!1;ne=ne.buffer,G=G.buffer;case Y:return!(ne.byteLength!=G.byteLength||!Ee(new e(ne),new e(G)));case f:case y:case O:return t(+ne,+G);case x:return ne.name==G.name&&ne.message==G.message;case P:case j:return ne==G+"";case B:var Se=i;case U:var Ke=he&l;if(Se||(Se=s),ne.size!=G.size&&!Ke)return!1;var xe=me.get(ne);if(xe)return xe==G;he|=o,me.set(ne,G);var at=r(Se(ne),Se(G),he,fe,Ee,me);return me.delete(ne),at;case N:if(re)return re.call(ne)==re.call(G)}return!1}return TM=V,TM}var PM,IT;function Hz(){if(IT)return PM;IT=1;function n(e,t){for(var r=-1,i=t.length,s=e.length;++r<i;)e[s+r]=t[r];return e}return PM=n,PM}var KM,kT;function Zz(){if(kT)return KM;kT=1;var n=Hz(),e=Vh();function t(r,i,s){var l=i(r);return e(r)?l:n(l,s(r))}return KM=t,KM}var RM,TT;function Cse(){if(TT)return RM;TT=1;function n(e,t){for(var r=-1,i=e==null?0:e.length,s=0,l=[];++r<i;){var o=e[r];t(o,r,e)&&(l[s++]=o)}return l}return RM=n,RM}var DM,PT;function Xz(){if(PT)return DM;PT=1;function n(){return[]}return DM=n,DM}var FM,KT;function FO(){if(KT)return FM;KT=1;var n=Cse(),e=Xz(),t=Object.prototype,r=t.propertyIsEnumerable,i=Object.getOwnPropertySymbols,s=i?function(l){return l==null?[]:(l=Object(l),n(i(l),function(o){return r.call(l,o)}))}:e;return FM=s,FM}var LM,RT;function Jz(){if(RT)return LM;RT=1;var n=Zz(),e=FO(),t=e_();function r(i){return n(i,t,e)}return LM=r,LM}var UM,DT;function _se(){if(DT)return UM;DT=1;var n=Jz(),e=1,t=Object.prototype,r=t.hasOwnProperty;function i(s,l,o,f,y,x){var B=o&e,O=n(s),P=O.length,U=n(l),j=U.length;if(P!=j&&!B)return!1;for(var N=P;N--;){var Y=O[N];if(!(B?Y in l:r.call(l,Y)))return!1}var H=x.get(s),se=x.get(l);if(H&&se)return H==l&&se==s;var re=!0;x.set(s,l),x.set(l,s);for(var V=B;++N<P;){Y=O[N];var ne=s[Y],G=l[Y];if(f)var oe=B?f(G,ne,Y,l,s,x):f(ne,G,Y,s,l,x);if(!(oe===void 0?ne===G||y(ne,G,o,f,x):oe)){re=!1;break}V||(V=Y=="constructor")}if(re&&!V){var he=s.constructor,fe=l.constructor;he!=fe&&"constructor"in s&&"constructor"in l&&!(typeof he=="function"&&he instanceof he&&typeof fe=="function"&&fe instanceof fe)&&(re=!1)}return x.delete(s),x.delete(l),re}return UM=i,UM}var zM,FT;function bse(){if(FT)return zM;FT=1;var n=Xg(),e=vp(),t=n(e,"DataView");return zM=t,zM}var jM,LT;function xse(){if(LT)return jM;LT=1;var n=Xg(),e=vp(),t=n(e,"Promise");return jM=t,jM}var NM,UT;function Mse(){if(UT)return NM;UT=1;var n=Xg(),e=vp(),t=n(e,"Set");return NM=t,NM}var WM,zT;function wse(){if(zT)return WM;zT=1;var n=Xg(),e=vp(),t=n(e,"WeakMap");return WM=t,WM}var GM,jT;function Hx(){if(jT)return GM;jT=1;var n=bse(),e=RO(),t=xse(),r=Mse(),i=wse(),s=Zg(),l=qz(),o="[object Map]",f="[object Object]",y="[object Promise]",x="[object Set]",B="[object WeakMap]",O="[object DataView]",P=l(n),U=l(e),j=l(t),N=l(r),Y=l(i),H=s;return(n&&H(new n(new ArrayBuffer(1)))!=O||e&&H(new e)!=o||t&&H(t.resolve())!=y||r&&H(new r)!=x||i&&H(new i)!=B)&&(H=function(se){var re=s(se),V=re==f?se.constructor:void 0,ne=V?l(V):"";if(ne)switch(ne){case P:return O;case U:return o;case j:return y;case N:return x;case Y:return B}return re}),GM=H,GM}var QM,NT;function Sse(){if(NT)return QM;NT=1;var n=$x(),e=Vz(),t=vse(),r=_se(),i=Hx(),s=Vh(),l=Wx(),o=IO(),f=1,y="[object Arguments]",x="[object Array]",B="[object Object]",O=Object.prototype,P=O.hasOwnProperty;function U(j,N,Y,H,se,re){var V=s(j),ne=s(N),G=V?x:i(j),oe=ne?x:i(N);G=G==y?B:G,oe=oe==y?B:oe;var he=G==B,fe=oe==B,Ee=G==oe;if(Ee&&l(j)){if(!l(N))return!1;V=!0,he=!1}if(Ee&&!he)return re||(re=new n),V||o(j)?e(j,N,Y,H,se,re):t(j,N,G,Y,H,se,re);if(!(Y&f)){var me=he&&P.call(j,"__wrapped__"),Se=fe&&P.call(N,"__wrapped__");if(me||Se){var Ke=me?j.value():j,xe=Se?N.value():N;return re||(re=new n),se(Ke,xe,Y,H,re)}}return Ee?(re||(re=new n),r(j,N,Y,H,se,re)):!1}return QM=U,QM}var YM,WT;function ej(){if(WT)return YM;WT=1;var n=Sse(),e=sm();function t(r,i,s,l,o){return r===i?!0:r==null||i==null||!e(r)&&!e(i)?r!==r&&i!==i:n(r,i,s,l,t,o)}return YM=t,YM}var qM,GT;function Ese(){if(GT)return qM;GT=1;var n=$x(),e=ej(),t=1,r=2;function i(s,l,o,f){var y=o.length,x=y,B=!f;if(s==null)return!x;for(s=Object(s);y--;){var O=o[y];if(B&&O[2]?O[1]!==s[O[0]]:!(O[0]in s))return!1}for(;++y<x;){O=o[y];var P=O[0],U=s[P],j=O[1];if(B&&O[2]){if(U===void 0&&!(P in s))return!1}else{var N=new n;if(f)var Y=f(U,j,P,s,l,N);if(!(Y===void 0?e(j,U,t|r,f,N):Y))return!1}}return!0}return qM=i,qM}var VM,QT;function tj(){if(QT)return VM;QT=1;var n=Ff();function e(t){return t===t&&!n(t)}return VM=e,VM}var $M,YT;function Bse(){if(YT)return $M;YT=1;var n=tj(),e=e_();function t(r){for(var i=e(r),s=i.length;s--;){var l=i[s],o=r[l];i[s]=[l,o,n(o)]}return i}return $M=t,$M}var HM,qT;function nj(){if(qT)return HM;qT=1;function n(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}return HM=n,HM}var ZM,VT;function Ose(){if(VT)return ZM;VT=1;var n=Ese(),e=Bse(),t=nj();function r(i){var s=e(i);return s.length==1&&s[0][2]?t(s[0][0],s[0][1]):function(l){return l===i||n(l,i,s)}}return ZM=r,ZM}var XM,$T;function Zx(){if($T)return XM;$T=1;var n=Zg(),e=sm(),t="[object Symbol]";function r(i){return typeof i=="symbol"||e(i)&&n(i)==t}return XM=r,XM}var JM,HT;function LO(){if(HT)return JM;HT=1;var n=Vh(),e=Zx(),t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(s,l){if(n(s))return!1;var o=typeof s;return o=="number"||o=="symbol"||o=="boolean"||s==null||e(s)?!0:r.test(s)||!t.test(s)||l!=null&&s in Object(l)}return JM=i,JM}var ew,ZT;function Ise(){if(ZT)return ew;ZT=1;var n=DO(),e="Expected a function";function t(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new TypeError(e);var s=function(){var l=arguments,o=i?i.apply(this,l):l[0],f=s.cache;if(f.has(o))return f.get(o);var y=r.apply(this,l);return s.cache=f.set(o,y)||f,y};return s.cache=new(t.Cache||n),s}return t.Cache=n,ew=t,ew}var tw,XT;function kse(){if(XT)return tw;XT=1;var n=Ise(),e=500;function t(r){var i=n(r,function(l){return s.size===e&&s.clear(),l}),s=i.cache;return i}return tw=t,tw}var nw,JT;function Tse(){if(JT)return nw;JT=1;var n=kse(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,t=/\\(\\)?/g,r=n(function(i){var s=[];return i.charCodeAt(0)===46&&s.push(""),i.replace(e,function(l,o,f,y){s.push(f?y.replace(t,"$1"):o||l)}),s});return nw=r,nw}var rw,eP;function Pse(){if(eP)return rw;eP=1;var n=JC(),e=Yz(),t=Vh(),r=Zx(),i=n?n.prototype:void 0,s=i?i.toString:void 0;function l(o){if(typeof o=="string")return o;if(t(o))return e(o,l)+"";if(r(o))return s?s.call(o):"";var f=o+"";return f=="0"&&1/o==-1/0?"-0":f}return rw=l,rw}var iw,tP;function Kse(){if(tP)return iw;tP=1;var n=Pse();function e(t){return t==null?"":n(t)}return iw=e,iw}var ow,nP;function rj(){if(nP)return ow;nP=1;var n=Vh(),e=LO(),t=Tse(),r=Kse();function i(s,l){return n(s)?s:e(s,l)?[s]:t(r(s))}return ow=i,ow}var sw,rP;function Xx(){if(rP)return sw;rP=1;var n=Zx();function e(t){if(typeof t=="string"||n(t))return t;var r=t+"";return r=="0"&&1/t==-1/0?"-0":r}return sw=e,sw}var aw,iP;function ij(){if(iP)return aw;iP=1;var n=rj(),e=Xx();function t(r,i){i=n(i,r);for(var s=0,l=i.length;r!=null&&s<l;)r=r[e(i[s++])];return s&&s==l?r:void 0}return aw=t,aw}var lw,oP;function Rse(){if(oP)return lw;oP=1;var n=ij();function e(t,r,i){var s=t==null?void 0:n(t,r);return s===void 0?i:s}return lw=e,lw}var uw,sP;function Dse(){if(sP)return uw;sP=1;function n(e,t){return e!=null&&t in Object(e)}return uw=n,uw}var Aw,aP;function Fse(){if(aP)return Aw;aP=1;var n=rj(),e=wO(),t=Vh(),r=SO(),i=EO(),s=Xx();function l(o,f,y){f=n(f,o);for(var x=-1,B=f.length,O=!1;++x<B;){var P=s(f[x]);if(!(O=o!=null&&y(o,P)))break;o=o[P]}return O||++x!=B?O:(B=o==null?0:o.length,!!B&&i(B)&&r(P,B)&&(t(o)||e(o)))}return Aw=l,Aw}var cw,lP;function Lse(){if(lP)return cw;lP=1;var n=Dse(),e=Fse();function t(r,i){return r!=null&&e(r,i,n)}return cw=t,cw}var dw,uP;function Use(){if(uP)return dw;uP=1;var n=ej(),e=Rse(),t=Lse(),r=LO(),i=tj(),s=nj(),l=Xx(),o=1,f=2;function y(x,B){return r(x)&&i(B)?s(l(x),B):function(O){var P=e(O,x);return P===void 0&&P===B?t(O,x):n(B,P,o|f)}}return dw=y,dw}var hw,AP;function zse(){if(AP)return hw;AP=1;function n(e){return function(t){return t==null?void 0:t[e]}}return hw=n,hw}var fw,cP;function jse(){if(cP)return fw;cP=1;var n=ij();function e(t){return function(r){return n(r,t)}}return fw=e,fw}var pw,dP;function Nse(){if(dP)return pw;dP=1;var n=zse(),e=jse(),t=LO(),r=Xx();function i(s){return t(s)?n(r(s)):e(s)}return pw=i,pw}var mw,hP;function Wse(){if(hP)return mw;hP=1;var n=Ose(),e=Use(),t=Gx(),r=Vh(),i=Nse();function s(l){return typeof l=="function"?l:l==null?t:typeof l=="object"?r(l)?e(l[0],l[1]):n(l):i(l)}return mw=s,mw}var gw,fP;function Gse(){if(fP)return gw;fP=1;var n=Yy();function e(t,r){return function(i,s){if(i==null)return i;if(!n(i))return t(i,s);for(var l=i.length,o=r?l:-1,f=Object(i);(r?o--:++o<l)&&s(f[o],o,f)!==!1;);return i}}return gw=e,gw}var yw,pP;function oj(){if(pP)return yw;pP=1;var n=Wz(),e=Gse(),t=e(n);return yw=t,yw}var vw,mP;function Qse(){if(mP)return vw;mP=1;var n=oj(),e=Yy();function t(r,i){var s=-1,l=e(r)?Array(r.length):[];return n(r,function(o,f,y){l[++s]=i(o,f,y)}),l}return vw=t,vw}var Cw,gP;function Yse(){if(gP)return Cw;gP=1;var n=Yz(),e=Wse(),t=Qse(),r=Vh();function i(s,l){var o=r(s)?n:t;return o(s,e(l,3))}return Cw=i,Cw}var yP;function qse(){if(yP)return O1;yP=1,Object.defineProperty(O1,"__esModule",{value:!0}),O1.flattenNames=void 0;var n=Toe(),e=f(n),t=PO(),r=f(t),i=Qz(),s=f(i),l=Yse(),o=f(l);function f(x){return x&&x.__esModule?x:{default:x}}var y=O1.flattenNames=function x(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],O=[];return(0,o.default)(B,function(P){Array.isArray(P)?x(P).map(function(U){return O.push(U)}):(0,s.default)(P)?(0,r.default)(P,function(U,j){U===!0&&O.push(j),O.push(j+"-"+U)}):(0,e.default)(P)&&O.push(P)}),O};return O1.default=y,O1}var I1={},_w,vP;function sj(){if(vP)return _w;vP=1;function n(e,t){for(var r=-1,i=e==null?0:e.length;++r<i&&t(e[r],r,e)!==!1;);return e}return _w=n,_w}var bw,CP;function aj(){if(CP)return bw;CP=1;var n=Xg(),e=function(){try{var t=n(Object,"defineProperty");return t({},"",{}),t}catch{}}();return bw=e,bw}var xw,_P;function UO(){if(_P)return xw;_P=1;var n=aj();function e(t,r,i){r=="__proto__"&&n?n(t,r,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[r]=i}return xw=e,xw}var Mw,bP;function lj(){if(bP)return Mw;bP=1;var n=UO(),e=t_(),t=Object.prototype,r=t.hasOwnProperty;function i(s,l,o){var f=s[l];(!(r.call(s,l)&&e(f,o))||o===void 0&&!(l in s))&&n(s,l,o)}return Mw=i,Mw}var ww,xP;function n_(){if(xP)return ww;xP=1;var n=lj(),e=UO();function t(r,i,s,l){var o=!s;s||(s={});for(var f=-1,y=i.length;++f<y;){var x=i[f],B=l?l(s[x],r[x],x,s,r):void 0;B===void 0&&(B=r[x]),o?e(s,x,B):n(s,x,B)}return s}return ww=t,ww}var Sw,MP;function Vse(){if(MP)return Sw;MP=1;var n=n_(),e=e_();function t(r,i){return r&&n(i,e(i),r)}return Sw=t,Sw}var Ew,wP;function $se(){if(wP)return Ew;wP=1;function n(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}return Ew=n,Ew}var Bw,SP;function Hse(){if(SP)return Bw;SP=1;var n=Ff(),e=kO(),t=$se(),r=Object.prototype,i=r.hasOwnProperty;function s(l){if(!n(l))return t(l);var o=e(l),f=[];for(var y in l)y=="constructor"&&(o||!i.call(l,y))||f.push(y);return f}return Bw=s,Bw}var Ow,EP;function r_(){if(EP)return Ow;EP=1;var n=jz(),e=Hse(),t=Yy();function r(i){return t(i)?n(i,!0):e(i)}return Ow=r,Ow}var Iw,BP;function Zse(){if(BP)return Iw;BP=1;var n=n_(),e=r_();function t(r,i){return r&&n(i,e(i),r)}return Iw=t,Iw}var Dv={exports:{}};Dv.exports;var OP;function uj(){return OP||(OP=1,function(n,e){var t=vp(),r=e&&!e.nodeType&&e,i=r&&!0&&n&&!n.nodeType&&n,s=i&&i.exports===r,l=s?t.Buffer:void 0,o=l?l.allocUnsafe:void 0;function f(y,x){if(x)return y.slice();var B=y.length,O=o?o(B):new y.constructor(B);return y.copy(O),O}n.exports=f}(Dv,Dv.exports)),Dv.exports}var kw,IP;function Aj(){if(IP)return kw;IP=1;function n(e,t){var r=-1,i=e.length;for(t||(t=Array(i));++r<i;)t[r]=e[r];return t}return kw=n,kw}var Tw,kP;function Xse(){if(kP)return Tw;kP=1;var n=n_(),e=FO();function t(r,i){return n(r,e(r),i)}return Tw=t,Tw}var Pw,TP;function cj(){if(TP)return Pw;TP=1;var n=Hz(),e=KO(),t=FO(),r=Xz(),i=Object.getOwnPropertySymbols,s=i?function(l){for(var o=[];l;)n(o,t(l)),l=e(l);return o}:r;return Pw=s,Pw}var Kw,PP;function Jse(){if(PP)return Kw;PP=1;var n=n_(),e=cj();function t(r,i){return n(r,e(r),i)}return Kw=t,Kw}var Rw,KP;function eae(){if(KP)return Rw;KP=1;var n=Zz(),e=cj(),t=r_();function r(i){return n(i,t,e)}return Rw=r,Rw}var Dw,RP;function tae(){if(RP)return Dw;RP=1;var n=Object.prototype,e=n.hasOwnProperty;function t(r){var i=r.length,s=new r.constructor(i);return i&&typeof r[0]=="string"&&e.call(r,"index")&&(s.index=r.index,s.input=r.input),s}return Dw=t,Dw}var Fw,DP;function zO(){if(DP)return Fw;DP=1;var n=$z();function e(t){var r=new t.constructor(t.byteLength);return new n(r).set(new n(t)),r}return Fw=e,Fw}var Lw,FP;function nae(){if(FP)return Lw;FP=1;var n=zO();function e(t,r){var i=r?n(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.byteLength)}return Lw=e,Lw}var Uw,LP;function rae(){if(LP)return Uw;LP=1;var n=/\w*$/;function e(t){var r=new t.constructor(t.source,n.exec(t));return r.lastIndex=t.lastIndex,r}return Uw=e,Uw}var zw,UP;function iae(){if(UP)return zw;UP=1;var n=JC(),e=n?n.prototype:void 0,t=e?e.valueOf:void 0;function r(i){return t?Object(t.call(i)):{}}return zw=r,zw}var jw,zP;function dj(){if(zP)return jw;zP=1;var n=zO();function e(t,r){var i=r?n(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.length)}return jw=e,jw}var Nw,jP;function oae(){if(jP)return Nw;jP=1;var n=zO(),e=nae(),t=rae(),r=iae(),i=dj(),s="[object Boolean]",l="[object Date]",o="[object Map]",f="[object Number]",y="[object RegExp]",x="[object Set]",B="[object String]",O="[object Symbol]",P="[object ArrayBuffer]",U="[object DataView]",j="[object Float32Array]",N="[object Float64Array]",Y="[object Int8Array]",H="[object Int16Array]",se="[object Int32Array]",re="[object Uint8Array]",V="[object Uint8ClampedArray]",ne="[object Uint16Array]",G="[object Uint32Array]";function oe(he,fe,Ee){var me=he.constructor;switch(fe){case P:return n(he);case s:case l:return new me(+he);case U:return e(he,Ee);case j:case N:case Y:case H:case se:case re:case V:case ne:case G:return i(he,Ee);case o:return new me;case f:case B:return new me(he);case y:return t(he);case x:return new me;case O:return r(he)}}return Nw=oe,Nw}var Ww,NP;function sae(){if(NP)return Ww;NP=1;var n=Ff(),e=Object.create,t=function(){function r(){}return function(i){if(!n(i))return{};if(e)return e(i);r.prototype=i;var s=new r;return r.prototype=void 0,s}}();return Ww=t,Ww}var Gw,WP;function hj(){if(WP)return Gw;WP=1;var n=sae(),e=KO(),t=kO();function r(i){return typeof i.constructor=="function"&&!t(i)?n(e(i)):{}}return Gw=r,Gw}var Qw,GP;function aae(){if(GP)return Qw;GP=1;var n=Hx(),e=sm(),t="[object Map]";function r(i){return e(i)&&n(i)==t}return Qw=r,Qw}var Yw,QP;function lae(){if(QP)return Yw;QP=1;var n=aae(),e=BO(),t=OO(),r=t&&t.isMap,i=r?e(r):n;return Yw=i,Yw}var qw,YP;function uae(){if(YP)return qw;YP=1;var n=Hx(),e=sm(),t="[object Set]";function r(i){return e(i)&&n(i)==t}return qw=r,qw}var Vw,qP;function Aae(){if(qP)return Vw;qP=1;var n=uae(),e=BO(),t=OO(),r=t&&t.isSet,i=r?e(r):n;return Vw=i,Vw}var $w,VP;function cae(){if(VP)return $w;VP=1;var n=$x(),e=sj(),t=lj(),r=Vse(),i=Zse(),s=uj(),l=Aj(),o=Xse(),f=Jse(),y=Jz(),x=eae(),B=Hx(),O=tae(),P=oae(),U=hj(),j=Vh(),N=Wx(),Y=lae(),H=Ff(),se=Aae(),re=e_(),V=r_(),ne=1,G=2,oe=4,he="[object Arguments]",fe="[object Array]",Ee="[object Boolean]",me="[object Date]",Se="[object Error]",Ke="[object Function]",xe="[object GeneratorFunction]",at="[object Map]",Ze="[object Number]",Je="[object Object]",Ne="[object RegExp]",we="[object Set]",De="[object String]",He="[object Symbol]",bt="[object WeakMap]",Yt="[object ArrayBuffer]",yt="[object DataView]",Ft="[object Float32Array]",Pt="[object Float64Array]",Ue="[object Int8Array]",Pe="[object Int16Array]",Be="[object Int32Array]",it="[object Uint8Array]",_t="[object Uint8ClampedArray]",pt="[object Uint16Array]",Lt="[object Uint32Array]",nn={};nn[he]=nn[fe]=nn[Yt]=nn[yt]=nn[Ee]=nn[me]=nn[Ft]=nn[Pt]=nn[Ue]=nn[Pe]=nn[Be]=nn[at]=nn[Ze]=nn[Je]=nn[Ne]=nn[we]=nn[De]=nn[He]=nn[it]=nn[_t]=nn[pt]=nn[Lt]=!0,nn[Se]=nn[Ke]=nn[bt]=!1;function Kt(vn,Gn,tn,dr,Pn,pn){var $n,lr=Gn&ne,vr=Gn&G,Zn=Gn&oe;if(tn&&($n=Pn?tn(vn,dr,Pn,pn):tn(vn)),$n!==void 0)return $n;if(!H(vn))return vn;var Ge=j(vn);if(Ge){if($n=O(vn),!lr)return l(vn,$n)}else{var ce=B(vn),pe=ce==Ke||ce==xe;if(N(vn))return s(vn,lr);if(ce==Je||ce==he||pe&&!Pn){if($n=vr||pe?{}:U(vn),!lr)return vr?f(vn,i($n,vn)):o(vn,r($n,vn))}else{if(!nn[ce])return Pn?vn:{};$n=P(vn,ce,lr)}}pn||(pn=new n);var nt=pn.get(vn);if(nt)return nt;pn.set(vn,$n),se(vn)?vn.forEach(function(sn){$n.add(Kt(sn,Gn,tn,sn,vn,pn))}):Y(vn)&&vn.forEach(function(sn,Hn){$n.set(Hn,Kt(sn,Gn,tn,Hn,vn,pn))});var wt=Zn?vr?x:y:vr?V:re,Ht=Ge?void 0:wt(vn);return e(Ht||vn,function(sn,Hn){Ht&&(Hn=sn,sn=vn[Hn]),t($n,Hn,Kt(sn,Gn,tn,Hn,vn,pn))}),$n}return $w=Kt,$w}var Hw,$P;function dae(){if($P)return Hw;$P=1;var n=cae(),e=1,t=4;function r(i){return n(i,e|t)}return Hw=r,Hw}var HP;function hae(){if(HP)return I1;HP=1,Object.defineProperty(I1,"__esModule",{value:!0}),I1.mergeClasses=void 0;var n=PO(),e=s(n),t=dae(),r=s(t),i=Object.assign||function(o){for(var f=1;f<arguments.length;f++){var y=arguments[f];for(var x in y)Object.prototype.hasOwnProperty.call(y,x)&&(o[x]=y[x])}return o};function s(o){return o&&o.__esModule?o:{default:o}}var l=I1.mergeClasses=function(f){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],x=f.default&&(0,r.default)(f.default)||{};return y.map(function(B){var O=f[B];return O&&(0,e.default)(O,function(P,U){x[U]||(x[U]={}),x[U]=i({},x[U],O[U])}),B}),x};return I1.default=l,I1}var k1={},ZP;function fae(){if(ZP)return k1;ZP=1,Object.defineProperty(k1,"__esModule",{value:!0}),k1.autoprefix=void 0;var n=PO(),e=r(n),t=Object.assign||function(l){for(var o=1;o<arguments.length;o++){var f=arguments[o];for(var y in f)Object.prototype.hasOwnProperty.call(f,y)&&(l[y]=f[y])}return l};function r(l){return l&&l.__esModule?l:{default:l}}var i={borderRadius:function(o){return{msBorderRadius:o,MozBorderRadius:o,OBorderRadius:o,WebkitBorderRadius:o,borderRadius:o}},boxShadow:function(o){return{msBoxShadow:o,MozBoxShadow:o,OBoxShadow:o,WebkitBoxShadow:o,boxShadow:o}},userSelect:function(o){return{WebkitTouchCallout:o,KhtmlUserSelect:o,MozUserSelect:o,msUserSelect:o,WebkitUserSelect:o,userSelect:o}},flex:function(o){return{WebkitBoxFlex:o,MozBoxFlex:o,WebkitFlex:o,msFlex:o,flex:o}},flexBasis:function(o){return{WebkitFlexBasis:o,flexBasis:o}},justifyContent:function(o){return{WebkitJustifyContent:o,justifyContent:o}},transition:function(o){return{msTransition:o,MozTransition:o,OTransition:o,WebkitTransition:o,transition:o}},transform:function(o){return{msTransform:o,MozTransform:o,OTransform:o,WebkitTransform:o,transform:o}},absolute:function(o){var f=o&&o.split(" ");return{position:"absolute",top:f&&f[0],right:f&&f[1],bottom:f&&f[2],left:f&&f[3]}},extend:function(o,f){var y=f[o];return y||{extend:o}}},s=k1.autoprefix=function(o){var f={};return(0,e.default)(o,function(y,x){var B={};(0,e.default)(y,function(O,P){var U=i[P];U?B=t({},B,U(O)):B[P]=O}),f[x]=B}),f};return k1.default=s,k1}var T1={},XP;function pae(){if(XP)return T1;XP=1,Object.defineProperty(T1,"__esModule",{value:!0}),T1.hover=void 0;var n=Object.assign||function(f){for(var y=1;y<arguments.length;y++){var x=arguments[y];for(var B in x)Object.prototype.hasOwnProperty.call(x,B)&&(f[B]=x[B])}return f},e=Ia(),t=r(e);function r(f){return f&&f.__esModule?f:{default:f}}function i(f,y){if(!(f instanceof y))throw new TypeError("Cannot call a class as a function")}function s(f,y){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:f}function l(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(f,y):f.__proto__=y)}var o=T1.hover=function(y){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(B){l(O,B);function O(){var P,U,j,N;i(this,O);for(var Y=arguments.length,H=Array(Y),se=0;se<Y;se++)H[se]=arguments[se];return N=(U=(j=s(this,(P=O.__proto__||Object.getPrototypeOf(O)).call.apply(P,[this].concat(H))),j),j.state={hover:!1},j.handleMouseOver=function(){return j.setState({hover:!0})},j.handleMouseOut=function(){return j.setState({hover:!1})},j.render=function(){return t.default.createElement(x,{onMouseOver:j.handleMouseOver,onMouseOut:j.handleMouseOut},t.default.createElement(y,n({},j.props,j.state)))},U),s(j,N)}return O}(t.default.Component)};return T1.default=o,T1}var P1={},JP;function mae(){if(JP)return P1;JP=1,Object.defineProperty(P1,"__esModule",{value:!0}),P1.active=void 0;var n=Object.assign||function(f){for(var y=1;y<arguments.length;y++){var x=arguments[y];for(var B in x)Object.prototype.hasOwnProperty.call(x,B)&&(f[B]=x[B])}return f},e=Ia(),t=r(e);function r(f){return f&&f.__esModule?f:{default:f}}function i(f,y){if(!(f instanceof y))throw new TypeError("Cannot call a class as a function")}function s(f,y){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:f}function l(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(f,y):f.__proto__=y)}var o=P1.active=function(y){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(B){l(O,B);function O(){var P,U,j,N;i(this,O);for(var Y=arguments.length,H=Array(Y),se=0;se<Y;se++)H[se]=arguments[se];return N=(U=(j=s(this,(P=O.__proto__||Object.getPrototypeOf(O)).call.apply(P,[this].concat(H))),j),j.state={active:!1},j.handleMouseDown=function(){return j.setState({active:!0})},j.handleMouseUp=function(){return j.setState({active:!1})},j.render=function(){return t.default.createElement(x,{onMouseDown:j.handleMouseDown,onMouseUp:j.handleMouseUp},t.default.createElement(y,n({},j.props,j.state)))},U),s(j,N)}return O}(t.default.Component)};return P1.default=o,P1}var cb={},eK;function gae(){if(eK)return cb;eK=1,Object.defineProperty(cb,"__esModule",{value:!0});var n=function(t,r){var i={},s=function(o){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;i[o]=f};return t===0&&s("first-child"),t===r-1&&s("last-child"),(t===0||t%2===0)&&s("even"),Math.abs(t%2)===1&&s("odd"),s("nth-child",t),i};return cb.default=n,cb}var tK;function Cp(){if(tK)return Ah;tK=1,Object.defineProperty(Ah,"__esModule",{value:!0}),Ah.ReactCSS=Ah.loop=Ah.handleActive=Ah.handleHover=Ah.hover=void 0;var n=qse(),e=O(n),t=hae(),r=O(t),i=fae(),s=O(i),l=pae(),o=O(l),f=mae(),y=O(f),x=gae(),B=O(x);function O(U){return U&&U.__esModule?U:{default:U}}Ah.hover=o.default,Ah.handleHover=o.default,Ah.handleActive=y.default,Ah.loop=B.default;var P=Ah.ReactCSS=function(j){for(var N=arguments.length,Y=Array(N>1?N-1:0),H=1;H<N;H++)Y[H-1]=arguments[H];var se=(0,e.default)(Y),re=(0,r.default)(j,se);return(0,s.default)(re)};return Ah.default=P,Ah}var Zw,nK;function fj(){if(nK)return Zw;nK=1;var n=UO(),e=t_();function t(r,i,s){(s!==void 0&&!e(r[i],s)||s===void 0&&!(i in r))&&n(r,i,s)}return Zw=t,Zw}var Xw,rK;function yae(){if(rK)return Xw;rK=1;var n=Yy(),e=sm();function t(r){return e(r)&&n(r)}return Xw=t,Xw}var Jw,iK;function pj(){if(iK)return Jw;iK=1;function n(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}return Jw=n,Jw}var eS,oK;function vae(){if(oK)return eS;oK=1;var n=n_(),e=r_();function t(r){return n(r,e(r))}return eS=t,eS}var tS,sK;function Cae(){if(sK)return tS;sK=1;var n=fj(),e=uj(),t=dj(),r=Aj(),i=hj(),s=wO(),l=Vh(),o=yae(),f=Wx(),y=TO(),x=Ff(),B=Qz(),O=IO(),P=pj(),U=vae();function j(N,Y,H,se,re,V,ne){var G=P(N,H),oe=P(Y,H),he=ne.get(oe);if(he){n(N,H,he);return}var fe=V?V(G,oe,H+"",N,Y,ne):void 0,Ee=fe===void 0;if(Ee){var me=l(oe),Se=!me&&f(oe),Ke=!me&&!Se&&O(oe);fe=oe,me||Se||Ke?l(G)?fe=G:o(G)?fe=r(G):Se?(Ee=!1,fe=e(oe,!0)):Ke?(Ee=!1,fe=t(oe,!0)):fe=[]:B(oe)||s(oe)?(fe=G,s(G)?fe=U(G):(!x(G)||y(G))&&(fe=i(oe))):Ee=!1}Ee&&(ne.set(oe,fe),re(fe,oe,se,V,ne),ne.delete(oe)),n(N,H,fe)}return tS=j,tS}var nS,aK;function _ae(){if(aK)return nS;aK=1;var n=$x(),e=fj(),t=zz(),r=Cae(),i=Ff(),s=r_(),l=pj();function o(f,y,x,B,O){f!==y&&t(y,function(P,U){if(O||(O=new n),i(P))r(f,y,U,x,o,B,O);else{var j=B?B(l(f,U),P,U+"",f,y,O):void 0;j===void 0&&(j=P),e(f,U,j)}},s)}return nS=o,nS}var rS,lK;function bae(){if(lK)return rS;lK=1;function n(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}return rS=n,rS}var iS,uK;function xae(){if(uK)return iS;uK=1;var n=bae(),e=Math.max;function t(r,i,s){return i=e(i===void 0?r.length-1:i,0),function(){for(var l=arguments,o=-1,f=e(l.length-i,0),y=Array(f);++o<f;)y[o]=l[i+o];o=-1;for(var x=Array(i+1);++o<i;)x[o]=l[o];return x[i]=s(y),n(r,this,x)}}return iS=t,iS}var oS,AK;function Mae(){if(AK)return oS;AK=1;function n(e){return function(){return e}}return oS=n,oS}var sS,cK;function wae(){if(cK)return sS;cK=1;var n=Mae(),e=aj(),t=Gx(),r=e?function(i,s){return e(i,"toString",{configurable:!0,enumerable:!1,value:n(s),writable:!0})}:t;return sS=r,sS}var aS,dK;function Sae(){if(dK)return aS;dK=1;var n=800,e=16,t=Date.now;function r(i){var s=0,l=0;return function(){var o=t(),f=e-(o-l);if(l=o,f>0){if(++s>=n)return arguments[0]}else s=0;return i.apply(void 0,arguments)}}return aS=r,aS}var lS,hK;function Eae(){if(hK)return lS;hK=1;var n=wae(),e=Sae(),t=e(n);return lS=t,lS}var uS,fK;function Bae(){if(fK)return uS;fK=1;var n=Gx(),e=xae(),t=Eae();function r(i,s){return t(e(i,s,n),i+"")}return uS=r,uS}var AS,pK;function Oae(){if(pK)return AS;pK=1;var n=t_(),e=Yy(),t=SO(),r=Ff();function i(s,l,o){if(!r(o))return!1;var f=typeof l;return(f=="number"?e(o)&&t(l,o.length):f=="string"&&l in o)?n(o[l],s):!1}return AS=i,AS}var cS,mK;function Iae(){if(mK)return cS;mK=1;var n=Bae(),e=Oae();function t(r){return n(function(i,s){var l=-1,o=s.length,f=o>1?s[o-1]:void 0,y=o>2?s[2]:void 0;for(f=r.length>3&&typeof f=="function"?(o--,f):void 0,y&&e(s[0],s[1],y)&&(f=o<3?void 0:f,o=1),i=Object(i);++l<o;){var x=s[l];x&&r(i,x,l,f)}return i})}return cS=t,cS}var dS,gK;function mj(){if(gK)return dS;gK=1;var n=_ae(),e=Iae(),t=e(function(r,i,s){n(r,i,s)});return dS=t,dS}var hS={},K1={},db={},yK;function kae(){return yK||(yK=1,Object.defineProperty(db,"__esModule",{value:!0}),db.calculateChange=function(e,t,r,i,s){var l=s.clientWidth,o=s.clientHeight,f=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,y=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,x=f-(s.getBoundingClientRect().left+window.pageXOffset),B=y-(s.getBoundingClientRect().top+window.pageYOffset);if(r==="vertical"){var O=void 0;if(B<0?O=0:B>o?O=1:O=Math.round(B*100/o)/100,t.a!==O)return{h:t.h,s:t.s,l:t.l,a:O,source:"rgb"}}else{var P=void 0;if(x<0?P=0:x>l?P=1:P=Math.round(x*100/l)/100,i!==P)return{h:t.h,s:t.s,l:t.l,a:P,source:"rgb"}}return null}),db}var R1={},yv={},vK;function Tae(){if(vK)return yv;vK=1,Object.defineProperty(yv,"__esModule",{value:!0});var n={},e=yv.render=function(r,i,s,l){if(typeof document>"u"&&!l)return null;var o=l?new l:document.createElement("canvas");o.width=s*2,o.height=s*2;var f=o.getContext("2d");return f?(f.fillStyle=r,f.fillRect(0,0,o.width,o.height),f.fillStyle=i,f.fillRect(0,0,s,s),f.translate(s,s),f.fillRect(0,0,s,s),o.toDataURL()):null};return yv.get=function(r,i,s,l){var o=r+"-"+i+"-"+s+(l?"-server":"");if(n[o])return n[o];var f=e(r,i,s,l);return n[o]=f,f},yv}var CK;function jO(){if(CK)return R1;CK=1,Object.defineProperty(R1,"__esModule",{value:!0}),R1.Checkboard=void 0;var n=Object.assign||function(x){for(var B=1;B<arguments.length;B++){var O=arguments[B];for(var P in O)Object.prototype.hasOwnProperty.call(O,P)&&(x[P]=O[P])}return x},e=Ia(),t=f(e),r=Cp(),i=f(r),s=Tae(),l=o(s);function o(x){if(x&&x.__esModule)return x;var B={};if(x!=null)for(var O in x)Object.prototype.hasOwnProperty.call(x,O)&&(B[O]=x[O]);return B.default=x,B}function f(x){return x&&x.__esModule?x:{default:x}}var y=R1.Checkboard=function(B){var O=B.white,P=B.grey,U=B.size,j=B.renderers,N=B.borderRadius,Y=B.boxShadow,H=B.children,se=(0,i.default)({default:{grid:{borderRadius:N,boxShadow:Y,absolute:"0px 0px 0px 0px",background:"url("+l.get(O,P,U,j.canvas)+") center left"}}});return(0,e.isValidElement)(H)?t.default.cloneElement(H,n({},H.props,{style:n({},H.props.style,se.grid)})):t.default.createElement("div",{style:se.grid})};return y.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}},R1.default=y,R1}var _K;function Pae(){if(_K)return K1;_K=1,Object.defineProperty(K1,"__esModule",{value:!0}),K1.Alpha=void 0;var n=Object.assign||function(N){for(var Y=1;Y<arguments.length;Y++){var H=arguments[Y];for(var se in H)Object.prototype.hasOwnProperty.call(H,se)&&(N[se]=H[se])}return N},e=function(){function N(Y,H){for(var se=0;se<H.length;se++){var re=H[se];re.enumerable=re.enumerable||!1,re.configurable=!0,"value"in re&&(re.writable=!0),Object.defineProperty(Y,re.key,re)}}return function(Y,H,se){return H&&N(Y.prototype,H),se&&N(Y,se),Y}}(),t=Ia(),r=B(t),i=Cp(),s=B(i),l=kae(),o=x(l),f=jO(),y=B(f);function x(N){if(N&&N.__esModule)return N;var Y={};if(N!=null)for(var H in N)Object.prototype.hasOwnProperty.call(N,H)&&(Y[H]=N[H]);return Y.default=N,Y}function B(N){return N&&N.__esModule?N:{default:N}}function O(N,Y){if(!(N instanceof Y))throw new TypeError("Cannot call a class as a function")}function P(N,Y){if(!N)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Y&&(typeof Y=="object"||typeof Y=="function")?Y:N}function U(N,Y){if(typeof Y!="function"&&Y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Y);N.prototype=Object.create(Y&&Y.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}}),Y&&(Object.setPrototypeOf?Object.setPrototypeOf(N,Y):N.__proto__=Y)}var j=K1.Alpha=function(N){U(Y,N);function Y(){var H,se,re,V;O(this,Y);for(var ne=arguments.length,G=Array(ne),oe=0;oe<ne;oe++)G[oe]=arguments[oe];return V=(se=(re=P(this,(H=Y.__proto__||Object.getPrototypeOf(Y)).call.apply(H,[this].concat(G))),re),re.handleChange=function(he){var fe=o.calculateChange(he,re.props.hsl,re.props.direction,re.props.a,re.container);fe&&typeof re.props.onChange=="function"&&re.props.onChange(fe,he)},re.handleMouseDown=function(he){re.handleChange(he),window.addEventListener("mousemove",re.handleChange),window.addEventListener("mouseup",re.handleMouseUp)},re.handleMouseUp=function(){re.unbindEventListeners()},re.unbindEventListeners=function(){window.removeEventListener("mousemove",re.handleChange),window.removeEventListener("mouseup",re.handleMouseUp)},se),P(re,V)}return e(Y,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var se=this,re=this.props.rgb,V=(0,s.default)({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+re.r+","+re.g+","+re.b+`, 0) 0%,
           rgba(`+re.r+","+re.g+","+re.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:re.a*100+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+re.r+","+re.g+","+re.b+`, 0) 0%,
           rgba(`+re.r+","+re.g+","+re.b+", 1) 100%)"},pointer:{left:0,top:re.a*100+"%"}},overwrite:n({},this.props.style)},{vertical:this.props.direction==="vertical",overwrite:!0});return r.default.createElement("div",{style:V.alpha},r.default.createElement("div",{style:V.checkboard},r.default.createElement(y.default,{renderers:this.props.renderers})),r.default.createElement("div",{style:V.gradient}),r.default.createElement("div",{style:V.container,ref:function(G){return se.container=G},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},r.default.createElement("div",{style:V.pointer},this.props.pointer?r.default.createElement(this.props.pointer,this.props):r.default.createElement("div",{style:V.slider}))))}}]),Y}(t.PureComponent||t.Component);return K1.default=j,K1}var D1={},bK;function Kae(){if(bK)return D1;bK=1,Object.defineProperty(D1,"__esModule",{value:!0}),D1.EditableInput=void 0;var n=function(){function H(se,re){for(var V=0;V<re.length;V++){var ne=re[V];ne.enumerable=ne.enumerable||!1,ne.configurable=!0,"value"in ne&&(ne.writable=!0),Object.defineProperty(se,ne.key,ne)}}return function(se,re,V){return re&&H(se.prototype,re),V&&H(se,V),se}}(),e=Ia(),t=s(e),r=Cp(),i=s(r);function s(H){return H&&H.__esModule?H:{default:H}}function l(H,se,re){return se in H?Object.defineProperty(H,se,{value:re,enumerable:!0,configurable:!0,writable:!0}):H[se]=re,H}function o(H,se){if(!(H instanceof se))throw new TypeError("Cannot call a class as a function")}function f(H,se){if(!H)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return se&&(typeof se=="object"||typeof se=="function")?se:H}function y(H,se){if(typeof se!="function"&&se!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof se);H.prototype=Object.create(se&&se.prototype,{constructor:{value:H,enumerable:!1,writable:!0,configurable:!0}}),se&&(Object.setPrototypeOf?Object.setPrototypeOf(H,se):H.__proto__=se)}var x=1,B=38,O=40,P=[B,O],U=function(se){return P.indexOf(se)>-1},j=function(se){return Number(String(se).replace(/%/g,""))},N=1,Y=D1.EditableInput=function(H){y(se,H);function se(re){o(this,se);var V=f(this,(se.__proto__||Object.getPrototypeOf(se)).call(this));return V.handleBlur=function(){V.state.blurValue&&V.setState({value:V.state.blurValue,blurValue:null})},V.handleChange=function(ne){V.setUpdatedValue(ne.target.value,ne)},V.handleKeyDown=function(ne){var G=j(ne.target.value);if(!isNaN(G)&&U(ne.keyCode)){var oe=V.getArrowOffset(),he=ne.keyCode===B?G+oe:G-oe;V.setUpdatedValue(he,ne)}},V.handleDrag=function(ne){if(V.props.dragLabel){var G=Math.round(V.props.value+ne.movementX);G>=0&&G<=V.props.dragMax&&V.props.onChange&&V.props.onChange(V.getValueObjectWithLabel(G),ne)}},V.handleMouseDown=function(ne){V.props.dragLabel&&(ne.preventDefault(),V.handleDrag(ne),window.addEventListener("mousemove",V.handleDrag),window.addEventListener("mouseup",V.handleMouseUp))},V.handleMouseUp=function(){V.unbindEventListeners()},V.unbindEventListeners=function(){window.removeEventListener("mousemove",V.handleDrag),window.removeEventListener("mouseup",V.handleMouseUp)},V.state={value:String(re.value).toUpperCase(),blurValue:String(re.value).toUpperCase()},V.inputId="rc-editable-input-"+N++,V}return n(se,[{key:"componentDidUpdate",value:function(V,ne){this.props.value!==this.state.value&&(V.value!==this.props.value||ne.value!==this.state.value)&&(this.input===document.activeElement?this.setState({blurValue:String(this.props.value).toUpperCase()}):this.setState({value:String(this.props.value).toUpperCase(),blurValue:!this.state.blurValue&&String(this.props.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"getValueObjectWithLabel",value:function(V){return l({},this.props.label,V)}},{key:"getArrowOffset",value:function(){return this.props.arrowOffset||x}},{key:"setUpdatedValue",value:function(V,ne){var G=this.props.label?this.getValueObjectWithLabel(V):V;this.props.onChange&&this.props.onChange(G,ne),this.setState({value:V})}},{key:"render",value:function(){var V=this,ne=(0,i.default)({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return t.default.createElement("div",{style:ne.wrap},t.default.createElement("input",{id:this.inputId,style:ne.input,ref:function(oe){return V.input=oe},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?t.default.createElement("label",{htmlFor:this.inputId,style:ne.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),se}(e.PureComponent||e.Component);return D1.default=Y,D1}var F1={},hb={},xK;function Rae(){return xK||(xK=1,Object.defineProperty(hb,"__esModule",{value:!0}),hb.calculateChange=function(e,t,r,i){var s=i.clientWidth,l=i.clientHeight,o=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,f=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,y=o-(i.getBoundingClientRect().left+window.pageXOffset),x=f-(i.getBoundingClientRect().top+window.pageYOffset);if(t==="vertical"){var B=void 0;if(x<0)B=359;else if(x>l)B=0;else{var O=-(x*100/l)+100;B=360*O/100}if(r.h!==B)return{h:B,s:r.s,l:r.l,a:r.a,source:"hsl"}}else{var P=void 0;if(y<0)P=0;else if(y>s)P=359;else{var U=y*100/s;P=360*U/100}if(r.h!==P)return{h:P,s:r.s,l:r.l,a:r.a,source:"hsl"}}return null}),hb}var MK;function Dae(){if(MK)return F1;MK=1,Object.defineProperty(F1,"__esModule",{value:!0}),F1.Hue=void 0;var n=function(){function P(U,j){for(var N=0;N<j.length;N++){var Y=j[N];Y.enumerable=Y.enumerable||!1,Y.configurable=!0,"value"in Y&&(Y.writable=!0),Object.defineProperty(U,Y.key,Y)}}return function(U,j,N){return j&&P(U.prototype,j),N&&P(U,N),U}}(),e=Ia(),t=f(e),r=Cp(),i=f(r),s=Rae(),l=o(s);function o(P){if(P&&P.__esModule)return P;var U={};if(P!=null)for(var j in P)Object.prototype.hasOwnProperty.call(P,j)&&(U[j]=P[j]);return U.default=P,U}function f(P){return P&&P.__esModule?P:{default:P}}function y(P,U){if(!(P instanceof U))throw new TypeError("Cannot call a class as a function")}function x(P,U){if(!P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return U&&(typeof U=="object"||typeof U=="function")?U:P}function B(P,U){if(typeof U!="function"&&U!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof U);P.prototype=Object.create(U&&U.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}}),U&&(Object.setPrototypeOf?Object.setPrototypeOf(P,U):P.__proto__=U)}var O=F1.Hue=function(P){B(U,P);function U(){var j,N,Y,H;y(this,U);for(var se=arguments.length,re=Array(se),V=0;V<se;V++)re[V]=arguments[V];return H=(N=(Y=x(this,(j=U.__proto__||Object.getPrototypeOf(U)).call.apply(j,[this].concat(re))),Y),Y.handleChange=function(ne){var G=l.calculateChange(ne,Y.props.direction,Y.props.hsl,Y.container);G&&typeof Y.props.onChange=="function"&&Y.props.onChange(G,ne)},Y.handleMouseDown=function(ne){Y.handleChange(ne),window.addEventListener("mousemove",Y.handleChange),window.addEventListener("mouseup",Y.handleMouseUp)},Y.handleMouseUp=function(){Y.unbindEventListeners()},N),x(Y,H)}return n(U,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var N=this,Y=this.props.direction,H=Y===void 0?"horizontal":Y,se=(0,i.default)({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:this.props.hsl.h*100/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-(this.props.hsl.h*100/360)+100+"%"}}},{vertical:H==="vertical"});return t.default.createElement("div",{style:se.hue},t.default.createElement("div",{className:"hue-"+H,style:se.container,ref:function(V){return N.container=V},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},t.default.createElement("style",null,`
            .hue-horizontal {
              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0
                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to right, #f00 0%, #ff0
                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }

            .hue-vertical {
              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,
                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,
                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }
          `),t.default.createElement("div",{style:se.pointer},this.props.pointer?t.default.createElement(this.props.pointer,this.props):t.default.createElement("div",{style:se.slider}))))}}]),U}(e.PureComponent||e.Component);return F1.default=O,F1}var L1={},wK;function Fae(){if(wK)return L1;wK=1,Object.defineProperty(L1,"__esModule",{value:!0}),L1.Raised=void 0;var n=Ia(),e=f(n),t=mp(),r=f(t),i=Cp(),s=f(i),l=mj(),o=f(l);function f(x){return x&&x.__esModule?x:{default:x}}var y=L1.Raised=function(B){var O=B.zDepth,P=B.radius,U=B.background,j=B.children,N=B.styles,Y=N===void 0?{}:N,H=(0,s.default)((0,o.default)({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+O+"px "+O*4+"px rgba(0,0,0,.24)",borderRadius:P,background:U}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},Y),{"zDepth-1":O===1});return e.default.createElement("div",{style:H.wrap},e.default.createElement("div",{style:H.bg}),e.default.createElement("div",{style:H.content},j))};return y.propTypes={background:r.default.string,zDepth:r.default.oneOf([0,1,2,3,4,5]),radius:r.default.number,styles:r.default.object},y.defaultProps={background:"#fff",zDepth:1,radius:2,styles:{}},L1.default=y,L1}var U1={},fS,SK;function Lae(){if(SK)return fS;SK=1;var n=vp(),e=function(){return n.Date.now()};return fS=e,fS}var pS,EK;function Uae(){if(EK)return pS;EK=1;var n=/\s/;function e(t){for(var r=t.length;r--&&n.test(t.charAt(r)););return r}return pS=e,pS}var mS,BK;function zae(){if(BK)return mS;BK=1;var n=Uae(),e=/^\s+/;function t(r){return r&&r.slice(0,n(r)+1).replace(e,"")}return mS=t,mS}var gS,OK;function jae(){if(OK)return gS;OK=1;var n=zae(),e=Ff(),t=Zx(),r=NaN,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,l=/^0o[0-7]+$/i,o=parseInt;function f(y){if(typeof y=="number")return y;if(t(y))return r;if(e(y)){var x=typeof y.valueOf=="function"?y.valueOf():y;y=e(x)?x+"":x}if(typeof y!="string")return y===0?y:+y;y=n(y);var B=s.test(y);return B||l.test(y)?o(y.slice(2),B?2:8):i.test(y)?r:+y}return gS=f,gS}var yS,IK;function gj(){if(IK)return yS;IK=1;var n=Ff(),e=Lae(),t=jae(),r="Expected a function",i=Math.max,s=Math.min;function l(o,f,y){var x,B,O,P,U,j,N=0,Y=!1,H=!1,se=!0;if(typeof o!="function")throw new TypeError(r);f=t(f)||0,n(y)&&(Y=!!y.leading,H="maxWait"in y,O=H?i(t(y.maxWait)||0,f):O,se="trailing"in y?!!y.trailing:se);function re(Se){var Ke=x,xe=B;return x=B=void 0,N=Se,P=o.apply(xe,Ke),P}function V(Se){return N=Se,U=setTimeout(oe,f),Y?re(Se):P}function ne(Se){var Ke=Se-j,xe=Se-N,at=f-Ke;return H?s(at,O-xe):at}function G(Se){var Ke=Se-j,xe=Se-N;return j===void 0||Ke>=f||Ke<0||H&&xe>=O}function oe(){var Se=e();if(G(Se))return he(Se);U=setTimeout(oe,ne(Se))}function he(Se){return U=void 0,se&&x?re(Se):(x=B=void 0,P)}function fe(){U!==void 0&&clearTimeout(U),N=0,x=j=B=U=void 0}function Ee(){return U===void 0?P:he(e())}function me(){var Se=e(),Ke=G(Se);if(x=arguments,B=this,j=Se,Ke){if(U===void 0)return V(j);if(H)return clearTimeout(U),U=setTimeout(oe,f),re(j)}return U===void 0&&(U=setTimeout(oe,f)),P}return me.cancel=fe,me.flush=Ee,me}return yS=l,yS}var vS,kK;function Nae(){if(kK)return vS;kK=1;var n=gj(),e=Ff(),t="Expected a function";function r(i,s,l){var o=!0,f=!0;if(typeof i!="function")throw new TypeError(t);return e(l)&&(o="leading"in l?!!l.leading:o,f="trailing"in l?!!l.trailing:f),n(i,s,{leading:o,maxWait:s,trailing:f})}return vS=r,vS}var fb={},TK;function Wae(){return TK||(TK=1,Object.defineProperty(fb,"__esModule",{value:!0}),fb.calculateChange=function(e,t,r){var i=r.getBoundingClientRect(),s=i.width,l=i.height,o=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,f=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,y=o-(r.getBoundingClientRect().left+window.pageXOffset),x=f-(r.getBoundingClientRect().top+window.pageYOffset);y<0?y=0:y>s&&(y=s),x<0?x=0:x>l&&(x=l);var B=y/s,O=1-x/l;return{h:t.h,s:B,v:O,a:t.a,source:"hsv"}}),fb}var PK;function Gae(){if(PK)return U1;PK=1,Object.defineProperty(U1,"__esModule",{value:!0}),U1.Saturation=void 0;var n=function(){function j(N,Y){for(var H=0;H<Y.length;H++){var se=Y[H];se.enumerable=se.enumerable||!1,se.configurable=!0,"value"in se&&(se.writable=!0),Object.defineProperty(N,se.key,se)}}return function(N,Y,H){return Y&&j(N.prototype,Y),H&&j(N,H),N}}(),e=Ia(),t=x(e),r=Cp(),i=x(r),s=Nae(),l=x(s),o=Wae(),f=y(o);function y(j){if(j&&j.__esModule)return j;var N={};if(j!=null)for(var Y in j)Object.prototype.hasOwnProperty.call(j,Y)&&(N[Y]=j[Y]);return N.default=j,N}function x(j){return j&&j.__esModule?j:{default:j}}function B(j,N){if(!(j instanceof N))throw new TypeError("Cannot call a class as a function")}function O(j,N){if(!j)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N&&(typeof N=="object"||typeof N=="function")?N:j}function P(j,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);j.prototype=Object.create(N&&N.prototype,{constructor:{value:j,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(j,N):j.__proto__=N)}var U=U1.Saturation=function(j){P(N,j);function N(Y){B(this,N);var H=O(this,(N.__proto__||Object.getPrototypeOf(N)).call(this,Y));return H.handleChange=function(se){typeof H.props.onChange=="function"&&H.throttle(H.props.onChange,f.calculateChange(se,H.props.hsl,H.container),se)},H.handleMouseDown=function(se){H.handleChange(se);var re=H.getContainerRenderWindow();re.addEventListener("mousemove",H.handleChange),re.addEventListener("mouseup",H.handleMouseUp)},H.handleMouseUp=function(){H.unbindEventListeners()},H.throttle=(0,l.default)(function(se,re,V){se(re,V)},50),H}return n(N,[{key:"componentWillUnmount",value:function(){this.throttle.cancel(),this.unbindEventListeners()}},{key:"getContainerRenderWindow",value:function(){for(var H=this.container,se=window;!se.document.contains(H)&&se.parent!==se;)se=se.parent;return se}},{key:"unbindEventListeners",value:function(){var H=this.getContainerRenderWindow();H.removeEventListener("mousemove",this.handleChange),H.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var H=this,se=this.props.style||{},re=se.color,V=se.white,ne=se.black,G=se.pointer,oe=se.circle,he=(0,i.default)({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-(this.props.hsv.v*100)+100+"%",left:this.props.hsv.s*100+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:`0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),
            0 0 1px 2px rgba(0,0,0,.4)`,borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:re,white:V,black:ne,pointer:G,circle:oe}},{custom:!!this.props.style});return t.default.createElement("div",{style:he.color,ref:function(Ee){return H.container=Ee},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},t.default.createElement("style",null,`
          .saturation-white {
            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));
            background: linear-gradient(to right, #fff, rgba(255,255,255,0));
          }
          .saturation-black {
            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));
            background: linear-gradient(to top, #000, rgba(0,0,0,0));
          }
        `),t.default.createElement("div",{style:he.white,className:"saturation-white"},t.default.createElement("div",{style:he.black,className:"saturation-black"}),t.default.createElement("div",{style:he.pointer},this.props.pointer?t.default.createElement(this.props.pointer,this.props):t.default.createElement("div",{style:he.circle}))))}}]),N}(e.PureComponent||e.Component);return U1.default=U,U1}var z1={},Dd={},CS,KK;function Qae(){if(KK)return CS;KK=1;var n=sj(),e=oj(),t=Gz(),r=Vh();function i(s,l){var o=r(s)?n:e;return o(s,t(l))}return CS=i,CS}var _S,RK;function Yae(){return RK||(RK=1,_S=Qae()),_S}var kb={exports:{}},qae=kb.exports,DK;function Vae(){return DK||(DK=1,function(n,e){(function(t,r){n.exports=r()})(qae,function(){function t(Ue){"@babel/helpers - typeof";return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Pe){return typeof Pe}:function(Pe){return Pe&&typeof Symbol=="function"&&Pe.constructor===Symbol&&Pe!==Symbol.prototype?"symbol":typeof Pe},t(Ue)}var r=/^\s+/,i=/\s+$/;function s(Ue,Pe){if(Ue=Ue||"",Pe=Pe||{},Ue instanceof s)return Ue;if(!(this instanceof s))return new s(Ue,Pe);var Be=l(Ue);this._originalInput=Ue,this._r=Be.r,this._g=Be.g,this._b=Be.b,this._a=Be.a,this._roundA=Math.round(100*this._a)/100,this._format=Pe.format||Be.format,this._gradientType=Pe.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=Be.ok}s.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var Pe=this.toRgb();return(Pe.r*299+Pe.g*587+Pe.b*114)/1e3},getLuminance:function(){var Pe=this.toRgb(),Be,it,_t,pt,Lt,nn;return Be=Pe.r/255,it=Pe.g/255,_t=Pe.b/255,Be<=.03928?pt=Be/12.92:pt=Math.pow((Be+.055)/1.055,2.4),it<=.03928?Lt=it/12.92:Lt=Math.pow((it+.055)/1.055,2.4),_t<=.03928?nn=_t/12.92:nn=Math.pow((_t+.055)/1.055,2.4),.2126*pt+.7152*Lt+.0722*nn},setAlpha:function(Pe){return this._a=Ke(Pe),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var Pe=x(this._r,this._g,this._b);return{h:Pe.h*360,s:Pe.s,v:Pe.v,a:this._a}},toHsvString:function(){var Pe=x(this._r,this._g,this._b),Be=Math.round(Pe.h*360),it=Math.round(Pe.s*100),_t=Math.round(Pe.v*100);return this._a==1?"hsv("+Be+", "+it+"%, "+_t+"%)":"hsva("+Be+", "+it+"%, "+_t+"%, "+this._roundA+")"},toHsl:function(){var Pe=f(this._r,this._g,this._b);return{h:Pe.h*360,s:Pe.s,l:Pe.l,a:this._a}},toHslString:function(){var Pe=f(this._r,this._g,this._b),Be=Math.round(Pe.h*360),it=Math.round(Pe.s*100),_t=Math.round(Pe.l*100);return this._a==1?"hsl("+Be+", "+it+"%, "+_t+"%)":"hsla("+Be+", "+it+"%, "+_t+"%, "+this._roundA+")"},toHex:function(Pe){return O(this._r,this._g,this._b,Pe)},toHexString:function(Pe){return"#"+this.toHex(Pe)},toHex8:function(Pe){return P(this._r,this._g,this._b,this._a,Pe)},toHex8String:function(Pe){return"#"+this.toHex8(Pe)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(xe(this._r,255)*100)+"%",g:Math.round(xe(this._g,255)*100)+"%",b:Math.round(xe(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(xe(this._r,255)*100)+"%, "+Math.round(xe(this._g,255)*100)+"%, "+Math.round(xe(this._b,255)*100)+"%)":"rgba("+Math.round(xe(this._r,255)*100)+"%, "+Math.round(xe(this._g,255)*100)+"%, "+Math.round(xe(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:me[O(this._r,this._g,this._b,!0)]||!1},toFilter:function(Pe){var Be="#"+U(this._r,this._g,this._b,this._a),it=Be,_t=this._gradientType?"GradientType = 1, ":"";if(Pe){var pt=s(Pe);it="#"+U(pt._r,pt._g,pt._b,pt._a)}return"progid:DXImageTransform.Microsoft.gradient("+_t+"startColorstr="+Be+",endColorstr="+it+")"},toString:function(Pe){var Be=!!Pe;Pe=Pe||this._format;var it=!1,_t=this._a<1&&this._a>=0,pt=!Be&&_t&&(Pe==="hex"||Pe==="hex6"||Pe==="hex3"||Pe==="hex4"||Pe==="hex8"||Pe==="name");return pt?Pe==="name"&&this._a===0?this.toName():this.toRgbString():(Pe==="rgb"&&(it=this.toRgbString()),Pe==="prgb"&&(it=this.toPercentageRgbString()),(Pe==="hex"||Pe==="hex6")&&(it=this.toHexString()),Pe==="hex3"&&(it=this.toHexString(!0)),Pe==="hex4"&&(it=this.toHex8String(!0)),Pe==="hex8"&&(it=this.toHex8String()),Pe==="name"&&(it=this.toName()),Pe==="hsl"&&(it=this.toHslString()),Pe==="hsv"&&(it=this.toHsvString()),it||this.toHexString())},clone:function(){return s(this.toString())},_applyModification:function(Pe,Be){var it=Pe.apply(null,[this].concat([].slice.call(Be)));return this._r=it._r,this._g=it._g,this._b=it._b,this.setAlpha(it._a),this},lighten:function(){return this._applyModification(H,arguments)},brighten:function(){return this._applyModification(se,arguments)},darken:function(){return this._applyModification(re,arguments)},desaturate:function(){return this._applyModification(j,arguments)},saturate:function(){return this._applyModification(N,arguments)},greyscale:function(){return this._applyModification(Y,arguments)},spin:function(){return this._applyModification(V,arguments)},_applyCombination:function(Pe,Be){return Pe.apply(null,[this].concat([].slice.call(Be)))},analogous:function(){return this._applyCombination(he,arguments)},complement:function(){return this._applyCombination(ne,arguments)},monochromatic:function(){return this._applyCombination(fe,arguments)},splitcomplement:function(){return this._applyCombination(oe,arguments)},triad:function(){return this._applyCombination(G,[3])},tetrad:function(){return this._applyCombination(G,[4])}},s.fromRatio=function(Ue,Pe){if(t(Ue)=="object"){var Be={};for(var it in Ue)Ue.hasOwnProperty(it)&&(it==="a"?Be[it]=Ue[it]:Be[it]=De(Ue[it]));Ue=Be}return s(Ue,Pe)};function l(Ue){var Pe={r:0,g:0,b:0},Be=1,it=null,_t=null,pt=null,Lt=!1,nn=!1;return typeof Ue=="string"&&(Ue=Ft(Ue)),t(Ue)=="object"&&(yt(Ue.r)&&yt(Ue.g)&&yt(Ue.b)?(Pe=o(Ue.r,Ue.g,Ue.b),Lt=!0,nn=String(Ue.r).substr(-1)==="%"?"prgb":"rgb"):yt(Ue.h)&&yt(Ue.s)&&yt(Ue.v)?(it=De(Ue.s),_t=De(Ue.v),Pe=B(Ue.h,it,_t),Lt=!0,nn="hsv"):yt(Ue.h)&&yt(Ue.s)&&yt(Ue.l)&&(it=De(Ue.s),pt=De(Ue.l),Pe=y(Ue.h,it,pt),Lt=!0,nn="hsl"),Ue.hasOwnProperty("a")&&(Be=Ue.a)),Be=Ke(Be),{ok:Lt,format:Ue.format||nn,r:Math.min(255,Math.max(Pe.r,0)),g:Math.min(255,Math.max(Pe.g,0)),b:Math.min(255,Math.max(Pe.b,0)),a:Be}}function o(Ue,Pe,Be){return{r:xe(Ue,255)*255,g:xe(Pe,255)*255,b:xe(Be,255)*255}}function f(Ue,Pe,Be){Ue=xe(Ue,255),Pe=xe(Pe,255),Be=xe(Be,255);var it=Math.max(Ue,Pe,Be),_t=Math.min(Ue,Pe,Be),pt,Lt,nn=(it+_t)/2;if(it==_t)pt=Lt=0;else{var Kt=it-_t;switch(Lt=nn>.5?Kt/(2-it-_t):Kt/(it+_t),it){case Ue:pt=(Pe-Be)/Kt+(Pe<Be?6:0);break;case Pe:pt=(Be-Ue)/Kt+2;break;case Be:pt=(Ue-Pe)/Kt+4;break}pt/=6}return{h:pt,s:Lt,l:nn}}function y(Ue,Pe,Be){var it,_t,pt;Ue=xe(Ue,360),Pe=xe(Pe,100),Be=xe(Be,100);function Lt(vn,Gn,tn){return tn<0&&(tn+=1),tn>1&&(tn-=1),tn<1/6?vn+(Gn-vn)*6*tn:tn<1/2?Gn:tn<2/3?vn+(Gn-vn)*(2/3-tn)*6:vn}if(Pe===0)it=_t=pt=Be;else{var nn=Be<.5?Be*(1+Pe):Be+Pe-Be*Pe,Kt=2*Be-nn;it=Lt(Kt,nn,Ue+1/3),_t=Lt(Kt,nn,Ue),pt=Lt(Kt,nn,Ue-1/3)}return{r:it*255,g:_t*255,b:pt*255}}function x(Ue,Pe,Be){Ue=xe(Ue,255),Pe=xe(Pe,255),Be=xe(Be,255);var it=Math.max(Ue,Pe,Be),_t=Math.min(Ue,Pe,Be),pt,Lt,nn=it,Kt=it-_t;if(Lt=it===0?0:Kt/it,it==_t)pt=0;else{switch(it){case Ue:pt=(Pe-Be)/Kt+(Pe<Be?6:0);break;case Pe:pt=(Be-Ue)/Kt+2;break;case Be:pt=(Ue-Pe)/Kt+4;break}pt/=6}return{h:pt,s:Lt,v:nn}}function B(Ue,Pe,Be){Ue=xe(Ue,360)*6,Pe=xe(Pe,100),Be=xe(Be,100);var it=Math.floor(Ue),_t=Ue-it,pt=Be*(1-Pe),Lt=Be*(1-_t*Pe),nn=Be*(1-(1-_t)*Pe),Kt=it%6,vn=[Be,Lt,pt,pt,nn,Be][Kt],Gn=[nn,Be,Be,Lt,pt,pt][Kt],tn=[pt,pt,nn,Be,Be,Lt][Kt];return{r:vn*255,g:Gn*255,b:tn*255}}function O(Ue,Pe,Be,it){var _t=[we(Math.round(Ue).toString(16)),we(Math.round(Pe).toString(16)),we(Math.round(Be).toString(16))];return it&&_t[0].charAt(0)==_t[0].charAt(1)&&_t[1].charAt(0)==_t[1].charAt(1)&&_t[2].charAt(0)==_t[2].charAt(1)?_t[0].charAt(0)+_t[1].charAt(0)+_t[2].charAt(0):_t.join("")}function P(Ue,Pe,Be,it,_t){var pt=[we(Math.round(Ue).toString(16)),we(Math.round(Pe).toString(16)),we(Math.round(Be).toString(16)),we(He(it))];return _t&&pt[0].charAt(0)==pt[0].charAt(1)&&pt[1].charAt(0)==pt[1].charAt(1)&&pt[2].charAt(0)==pt[2].charAt(1)&&pt[3].charAt(0)==pt[3].charAt(1)?pt[0].charAt(0)+pt[1].charAt(0)+pt[2].charAt(0)+pt[3].charAt(0):pt.join("")}function U(Ue,Pe,Be,it){var _t=[we(He(it)),we(Math.round(Ue).toString(16)),we(Math.round(Pe).toString(16)),we(Math.round(Be).toString(16))];return _t.join("")}s.equals=function(Ue,Pe){return!Ue||!Pe?!1:s(Ue).toRgbString()==s(Pe).toRgbString()},s.random=function(){return s.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function j(Ue,Pe){Pe=Pe===0?0:Pe||10;var Be=s(Ue).toHsl();return Be.s-=Pe/100,Be.s=at(Be.s),s(Be)}function N(Ue,Pe){Pe=Pe===0?0:Pe||10;var Be=s(Ue).toHsl();return Be.s+=Pe/100,Be.s=at(Be.s),s(Be)}function Y(Ue){return s(Ue).desaturate(100)}function H(Ue,Pe){Pe=Pe===0?0:Pe||10;var Be=s(Ue).toHsl();return Be.l+=Pe/100,Be.l=at(Be.l),s(Be)}function se(Ue,Pe){Pe=Pe===0?0:Pe||10;var Be=s(Ue).toRgb();return Be.r=Math.max(0,Math.min(255,Be.r-Math.round(255*-(Pe/100)))),Be.g=Math.max(0,Math.min(255,Be.g-Math.round(255*-(Pe/100)))),Be.b=Math.max(0,Math.min(255,Be.b-Math.round(255*-(Pe/100)))),s(Be)}function re(Ue,Pe){Pe=Pe===0?0:Pe||10;var Be=s(Ue).toHsl();return Be.l-=Pe/100,Be.l=at(Be.l),s(Be)}function V(Ue,Pe){var Be=s(Ue).toHsl(),it=(Be.h+Pe)%360;return Be.h=it<0?360+it:it,s(Be)}function ne(Ue){var Pe=s(Ue).toHsl();return Pe.h=(Pe.h+180)%360,s(Pe)}function G(Ue,Pe){if(isNaN(Pe)||Pe<=0)throw new Error("Argument to polyad must be a positive number");for(var Be=s(Ue).toHsl(),it=[s(Ue)],_t=360/Pe,pt=1;pt<Pe;pt++)it.push(s({h:(Be.h+pt*_t)%360,s:Be.s,l:Be.l}));return it}function oe(Ue){var Pe=s(Ue).toHsl(),Be=Pe.h;return[s(Ue),s({h:(Be+72)%360,s:Pe.s,l:Pe.l}),s({h:(Be+216)%360,s:Pe.s,l:Pe.l})]}function he(Ue,Pe,Be){Pe=Pe||6,Be=Be||30;var it=s(Ue).toHsl(),_t=360/Be,pt=[s(Ue)];for(it.h=(it.h-(_t*Pe>>1)+720)%360;--Pe;)it.h=(it.h+_t)%360,pt.push(s(it));return pt}function fe(Ue,Pe){Pe=Pe||6;for(var Be=s(Ue).toHsv(),it=Be.h,_t=Be.s,pt=Be.v,Lt=[],nn=1/Pe;Pe--;)Lt.push(s({h:it,s:_t,v:pt})),pt=(pt+nn)%1;return Lt}s.mix=function(Ue,Pe,Be){Be=Be===0?0:Be||50;var it=s(Ue).toRgb(),_t=s(Pe).toRgb(),pt=Be/100,Lt={r:(_t.r-it.r)*pt+it.r,g:(_t.g-it.g)*pt+it.g,b:(_t.b-it.b)*pt+it.b,a:(_t.a-it.a)*pt+it.a};return s(Lt)},s.readability=function(Ue,Pe){var Be=s(Ue),it=s(Pe);return(Math.max(Be.getLuminance(),it.getLuminance())+.05)/(Math.min(Be.getLuminance(),it.getLuminance())+.05)},s.isReadable=function(Ue,Pe,Be){var it=s.readability(Ue,Pe),_t,pt;switch(pt=!1,_t=Pt(Be),_t.level+_t.size){case"AAsmall":case"AAAlarge":pt=it>=4.5;break;case"AAlarge":pt=it>=3;break;case"AAAsmall":pt=it>=7;break}return pt},s.mostReadable=function(Ue,Pe,Be){var it=null,_t=0,pt,Lt,nn,Kt;Be=Be||{},Lt=Be.includeFallbackColors,nn=Be.level,Kt=Be.size;for(var vn=0;vn<Pe.length;vn++)pt=s.readability(Ue,Pe[vn]),pt>_t&&(_t=pt,it=s(Pe[vn]));return s.isReadable(Ue,it,{level:nn,size:Kt})||!Lt?it:(Be.includeFallbackColors=!1,s.mostReadable(Ue,["#fff","#000"],Be))};var Ee=s.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},me=s.hexNames=Se(Ee);function Se(Ue){var Pe={};for(var Be in Ue)Ue.hasOwnProperty(Be)&&(Pe[Ue[Be]]=Be);return Pe}function Ke(Ue){return Ue=parseFloat(Ue),(isNaN(Ue)||Ue<0||Ue>1)&&(Ue=1),Ue}function xe(Ue,Pe){Je(Ue)&&(Ue="100%");var Be=Ne(Ue);return Ue=Math.min(Pe,Math.max(0,parseFloat(Ue))),Be&&(Ue=parseInt(Ue*Pe,10)/100),Math.abs(Ue-Pe)<1e-6?1:Ue%Pe/parseFloat(Pe)}function at(Ue){return Math.min(1,Math.max(0,Ue))}function Ze(Ue){return parseInt(Ue,16)}function Je(Ue){return typeof Ue=="string"&&Ue.indexOf(".")!=-1&&parseFloat(Ue)===1}function Ne(Ue){return typeof Ue=="string"&&Ue.indexOf("%")!=-1}function we(Ue){return Ue.length==1?"0"+Ue:""+Ue}function De(Ue){return Ue<=1&&(Ue=Ue*100+"%"),Ue}function He(Ue){return Math.round(parseFloat(Ue)*255).toString(16)}function bt(Ue){return Ze(Ue)/255}var Yt=function(){var Ue="[-\\+]?\\d+%?",Pe="[-\\+]?\\d*\\.\\d+%?",Be="(?:"+Pe+")|(?:"+Ue+")",it="[\\s|\\(]+("+Be+")[,|\\s]+("+Be+")[,|\\s]+("+Be+")\\s*\\)?",_t="[\\s|\\(]+("+Be+")[,|\\s]+("+Be+")[,|\\s]+("+Be+")[,|\\s]+("+Be+")\\s*\\)?";return{CSS_UNIT:new RegExp(Be),rgb:new RegExp("rgb"+it),rgba:new RegExp("rgba"+_t),hsl:new RegExp("hsl"+it),hsla:new RegExp("hsla"+_t),hsv:new RegExp("hsv"+it),hsva:new RegExp("hsva"+_t),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function yt(Ue){return!!Yt.CSS_UNIT.exec(Ue)}function Ft(Ue){Ue=Ue.replace(r,"").replace(i,"").toLowerCase();var Pe=!1;if(Ee[Ue])Ue=Ee[Ue],Pe=!0;else if(Ue=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var Be;return(Be=Yt.rgb.exec(Ue))?{r:Be[1],g:Be[2],b:Be[3]}:(Be=Yt.rgba.exec(Ue))?{r:Be[1],g:Be[2],b:Be[3],a:Be[4]}:(Be=Yt.hsl.exec(Ue))?{h:Be[1],s:Be[2],l:Be[3]}:(Be=Yt.hsla.exec(Ue))?{h:Be[1],s:Be[2],l:Be[3],a:Be[4]}:(Be=Yt.hsv.exec(Ue))?{h:Be[1],s:Be[2],v:Be[3]}:(Be=Yt.hsva.exec(Ue))?{h:Be[1],s:Be[2],v:Be[3],a:Be[4]}:(Be=Yt.hex8.exec(Ue))?{r:Ze(Be[1]),g:Ze(Be[2]),b:Ze(Be[3]),a:bt(Be[4]),format:Pe?"name":"hex8"}:(Be=Yt.hex6.exec(Ue))?{r:Ze(Be[1]),g:Ze(Be[2]),b:Ze(Be[3]),format:Pe?"name":"hex"}:(Be=Yt.hex4.exec(Ue))?{r:Ze(Be[1]+""+Be[1]),g:Ze(Be[2]+""+Be[2]),b:Ze(Be[3]+""+Be[3]),a:bt(Be[4]+""+Be[4]),format:Pe?"name":"hex8"}:(Be=Yt.hex3.exec(Ue))?{r:Ze(Be[1]+""+Be[1]),g:Ze(Be[2]+""+Be[2]),b:Ze(Be[3]+""+Be[3]),format:Pe?"name":"hex"}:!1}function Pt(Ue){var Pe,Be;return Ue=Ue||{level:"AA",size:"small"},Pe=(Ue.level||"AA").toUpperCase(),Be=(Ue.size||"small").toLowerCase(),Pe!=="AA"&&Pe!=="AAA"&&(Pe="AA"),Be!=="small"&&Be!=="large"&&(Be="small"),{level:Pe,size:Be}}return s})}(kb)),kb.exports}var FK;function yj(){if(FK)return Dd;FK=1,Object.defineProperty(Dd,"__esModule",{value:!0}),Dd.isvalidColorString=Dd.red=Dd.getContrastingColor=Dd.isValidHex=Dd.toState=Dd.simpleCheckForValidColor=void 0;var n=Yae(),e=i(n),t=Vae(),r=i(t);function i(l){return l&&l.__esModule?l:{default:l}}Dd.simpleCheckForValidColor=function(o){var f=["r","g","b","a","h","s","l","v"],y=0,x=0;return(0,e.default)(f,function(B){if(o[B]&&(y+=1,isNaN(o[B])||(x+=1),B==="s"||B==="l")){var O=/^\d+%$/;O.test(o[B])&&(x+=1)}}),y===x?o:!1};var s=Dd.toState=function(o,f){var y=o.hex?(0,r.default)(o.hex):(0,r.default)(o),x=y.toHsl(),B=y.toHsv(),O=y.toRgb(),P=y.toHex();x.s===0&&(x.h=f||0,B.h=f||0);var U=P==="000000"&&O.a===0;return{hsl:x,hex:U?"transparent":"#"+P,rgb:O,hsv:B,oldHue:o.h||f||x.h,source:o.source}};return Dd.isValidHex=function(o){if(o==="transparent")return!0;var f=String(o).charAt(0)==="#"?1:0;return o.length!==4+f&&o.length<7+f&&(0,r.default)(o).isValid()},Dd.getContrastingColor=function(o){if(!o)return"#fff";var f=s(o);if(f.hex==="transparent")return"rgba(0,0,0,0.4)";var y=(f.rgb.r*299+f.rgb.g*587+f.rgb.b*114)/1e3;return y>=128?"#000":"#fff"},Dd.red={hsl:{a:1,h:0,l:.5,s:1},hex:"#ff0000",rgb:{r:255,g:0,b:0,a:1},hsv:{h:0,s:1,v:1,a:1}},Dd.isvalidColorString=function(o,f){var y=o.replace("","");return(0,r.default)(f+" ("+y+")")._ok},Dd}var LK;function $ae(){if(LK)return z1;LK=1,Object.defineProperty(z1,"__esModule",{value:!0}),z1.ColorWrap=void 0;var n=Object.assign||function(U){for(var j=1;j<arguments.length;j++){var N=arguments[j];for(var Y in N)Object.prototype.hasOwnProperty.call(N,Y)&&(U[Y]=N[Y])}return U},e=function(){function U(j,N){for(var Y=0;Y<N.length;Y++){var H=N[Y];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(j,H.key,H)}}return function(j,N,Y){return N&&U(j.prototype,N),Y&&U(j,Y),j}}(),t=Ia(),r=y(t),i=gj(),s=y(i),l=yj(),o=f(l);function f(U){if(U&&U.__esModule)return U;var j={};if(U!=null)for(var N in U)Object.prototype.hasOwnProperty.call(U,N)&&(j[N]=U[N]);return j.default=U,j}function y(U){return U&&U.__esModule?U:{default:U}}function x(U,j){if(!(U instanceof j))throw new TypeError("Cannot call a class as a function")}function B(U,j){if(!U)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j&&(typeof j=="object"||typeof j=="function")?j:U}function O(U,j){if(typeof j!="function"&&j!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof j);U.prototype=Object.create(j&&j.prototype,{constructor:{value:U,enumerable:!1,writable:!0,configurable:!0}}),j&&(Object.setPrototypeOf?Object.setPrototypeOf(U,j):U.__proto__=j)}var P=z1.ColorWrap=function(j){var N=function(Y){O(H,Y);function H(se){x(this,H);var re=B(this,(H.__proto__||Object.getPrototypeOf(H)).call(this));return re.handleChange=function(V,ne){var G=o.simpleCheckForValidColor(V);if(G){var oe=o.toState(V,V.h||re.state.oldHue);re.setState(oe),re.props.onChangeComplete&&re.debounce(re.props.onChangeComplete,oe,ne),re.props.onChange&&re.props.onChange(oe,ne)}},re.handleSwatchHover=function(V,ne){var G=o.simpleCheckForValidColor(V);if(G){var oe=o.toState(V,V.h||re.state.oldHue);re.props.onSwatchHover&&re.props.onSwatchHover(oe,ne)}},re.state=n({},o.toState(se.color,0)),re.debounce=(0,s.default)(function(V,ne,G){V(ne,G)},100),re}return e(H,[{key:"render",value:function(){var re={};return this.props.onSwatchHover&&(re.onSwatchHover=this.handleSwatchHover),r.default.createElement(j,n({},this.props,this.state,{onChange:this.handleChange},re))}}],[{key:"getDerivedStateFromProps",value:function(re,V){return n({},o.toState(re.color,V.oldHue))}}]),H}(t.PureComponent||t.Component);return N.propTypes=n({},j.propTypes),N.defaultProps=n({},j.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),N};return z1.default=P,z1}var j1={},vv={},UK;function Hae(){if(UK)return vv;UK=1,Object.defineProperty(vv,"__esModule",{value:!0}),vv.handleFocus=void 0;var n=Object.assign||function(f){for(var y=1;y<arguments.length;y++){var x=arguments[y];for(var B in x)Object.prototype.hasOwnProperty.call(x,B)&&(f[B]=x[B])}return f},e=function(){function f(y,x){for(var B=0;B<x.length;B++){var O=x[B];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(y,O.key,O)}}return function(y,x,B){return x&&f(y.prototype,x),B&&f(y,B),y}}(),t=Ia(),r=i(t);function i(f){return f&&f.__esModule?f:{default:f}}function s(f,y){if(!(f instanceof y))throw new TypeError("Cannot call a class as a function")}function l(f,y){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:f}function o(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(f,y):f.__proto__=y)}return vv.handleFocus=function(y){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(B){o(O,B);function O(){var P,U,j,N;s(this,O);for(var Y=arguments.length,H=Array(Y),se=0;se<Y;se++)H[se]=arguments[se];return N=(U=(j=l(this,(P=O.__proto__||Object.getPrototypeOf(O)).call.apply(P,[this].concat(H))),j),j.state={focus:!1},j.handleFocus=function(){return j.setState({focus:!0})},j.handleBlur=function(){return j.setState({focus:!1})},U),l(j,N)}return e(O,[{key:"render",value:function(){return r.default.createElement(x,{onFocus:this.handleFocus,onBlur:this.handleBlur},r.default.createElement(y,n({},this.props,this.state)))}}]),O}(r.default.Component)},vv}var zK;function Zae(){if(zK)return j1;zK=1,Object.defineProperty(j1,"__esModule",{value:!0}),j1.Swatch=void 0;var n=Object.assign||function(B){for(var O=1;O<arguments.length;O++){var P=arguments[O];for(var U in P)Object.prototype.hasOwnProperty.call(P,U)&&(B[U]=P[U])}return B},e=Ia(),t=f(e),r=Cp(),i=f(r),s=Hae(),l=jO(),o=f(l);function f(B){return B&&B.__esModule?B:{default:B}}var y=13,x=j1.Swatch=function(O){var P=O.color,U=O.style,j=O.onClick,N=j===void 0?function(){}:j,Y=O.onHover,H=O.title,se=H===void 0?P:H,re=O.children,V=O.focus,ne=O.focusStyle,G=ne===void 0?{}:ne,oe=P==="transparent",he=(0,i.default)({default:{swatch:n({background:P,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},U,V?G:{})}}),fe=function(xe){return N(P,xe)},Ee=function(xe){return xe.keyCode===y&&N(P,xe)},me=function(xe){return Y(P,xe)},Se={};return Y&&(Se.onMouseOver=me),t.default.createElement("div",n({style:he.swatch,onClick:fe,title:se,tabIndex:0,onKeyDown:Ee},Se),re,oe&&t.default.createElement(o.default,{borderRadius:he.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))};return j1.default=(0,s.handleFocus)(x),j1}var jK;function vj(){return jK||(jK=1,function(n){Object.defineProperty(n,"__esModule",{value:!0});var e=Pae();Object.defineProperty(n,"Alpha",{enumerable:!0,get:function(){return y(e).default}});var t=jO();Object.defineProperty(n,"Checkboard",{enumerable:!0,get:function(){return y(t).default}});var r=Kae();Object.defineProperty(n,"EditableInput",{enumerable:!0,get:function(){return y(r).default}});var i=Dae();Object.defineProperty(n,"Hue",{enumerable:!0,get:function(){return y(i).default}});var s=Fae();Object.defineProperty(n,"Raised",{enumerable:!0,get:function(){return y(s).default}});var l=Gae();Object.defineProperty(n,"Saturation",{enumerable:!0,get:function(){return y(l).default}});var o=$ae();Object.defineProperty(n,"ColorWrap",{enumerable:!0,get:function(){return y(o).default}});var f=Zae();Object.defineProperty(n,"Swatch",{enumerable:!0,get:function(){return y(f).default}});function y(x){return x&&x.__esModule?x:{default:x}}}(hS)),hS}var N1={},bS,NK;function Xae(){if(NK)return bS;NK=1;function n(e){return e===void 0}return bS=n,bS}var pb={},WK;function Jae(){if(WK)return pb;WK=1,Object.defineProperty(pb,"__esModule",{value:!0});var n=Object.assign||function(l){for(var o=1;o<arguments.length;o++){var f=arguments[o];for(var y in f)Object.prototype.hasOwnProperty.call(f,y)&&(l[y]=f[y])}return l},e=Ia(),t=r(e);function r(l){return l&&l.__esModule?l:{default:l}}function i(l,o){var f={};for(var y in l)o.indexOf(y)>=0||Object.prototype.hasOwnProperty.call(l,y)&&(f[y]=l[y]);return f}var s=24;return pb.default=function(l){var o=l.fill,f=o===void 0?"currentColor":o,y=l.width,x=y===void 0?s:y,B=l.height,O=B===void 0?s:B,P=l.style,U=P===void 0?{}:P,j=i(l,["fill","width","height","style"]);return t.default.createElement("svg",n({viewBox:"0 0 "+s+" "+s,style:n({fill:f,width:x,height:O},U)},j),t.default.createElement("path",{d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}))},pb}var GK;function ele(){if(GK)return N1;GK=1,Object.defineProperty(N1,"__esModule",{value:!0}),N1.ChromeFields=void 0;var n=function(){function H(se,re){for(var V=0;V<re.length;V++){var ne=re[V];ne.enumerable=ne.enumerable||!1,ne.configurable=!0,"value"in ne&&(ne.writable=!0),Object.defineProperty(se,ne.key,ne)}}return function(se,re,V){return re&&H(se.prototype,re),V&&H(se,V),se}}(),e=Ia(),t=P(e),r=Cp(),i=P(r),s=yj(),l=O(s),o=Xae(),f=P(o),y=vj(),x=Jae(),B=P(x);function O(H){if(H&&H.__esModule)return H;var se={};if(H!=null)for(var re in H)Object.prototype.hasOwnProperty.call(H,re)&&(se[re]=H[re]);return se.default=H,se}function P(H){return H&&H.__esModule?H:{default:H}}function U(H,se){if(!(H instanceof se))throw new TypeError("Cannot call a class as a function")}function j(H,se){if(!H)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return se&&(typeof se=="object"||typeof se=="function")?se:H}function N(H,se){if(typeof se!="function"&&se!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof se);H.prototype=Object.create(se&&se.prototype,{constructor:{value:H,enumerable:!1,writable:!0,configurable:!0}}),se&&(Object.setPrototypeOf?Object.setPrototypeOf(H,se):H.__proto__=se)}var Y=N1.ChromeFields=function(H){N(se,H);function se(re){U(this,se);var V=j(this,(se.__proto__||Object.getPrototypeOf(se)).call(this));return V.toggleViews=function(){V.state.view==="hex"?V.setState({view:"rgb"}):V.state.view==="rgb"?V.setState({view:"hsl"}):V.state.view==="hsl"&&(V.props.hsl.a===1?V.setState({view:"hex"}):V.setState({view:"rgb"}))},V.handleChange=function(ne,G){ne.hex?l.isValidHex(ne.hex)&&V.props.onChange({hex:ne.hex,source:"hex"},G):ne.r||ne.g||ne.b?V.props.onChange({r:ne.r||V.props.rgb.r,g:ne.g||V.props.rgb.g,b:ne.b||V.props.rgb.b,source:"rgb"},G):ne.a?(ne.a<0?ne.a=0:ne.a>1&&(ne.a=1),V.props.onChange({h:V.props.hsl.h,s:V.props.hsl.s,l:V.props.hsl.l,a:Math.round(ne.a*100)/100,source:"rgb"},G)):(ne.h||ne.s||ne.l)&&(typeof ne.s=="string"&&ne.s.includes("%")&&(ne.s=ne.s.replace("%","")),typeof ne.l=="string"&&ne.l.includes("%")&&(ne.l=ne.l.replace("%","")),ne.s==1?ne.s=.01:ne.l==1&&(ne.l=.01),V.props.onChange({h:ne.h||V.props.hsl.h,s:Number((0,f.default)(ne.s)?V.props.hsl.s:ne.s),l:Number((0,f.default)(ne.l)?V.props.hsl.l:ne.l),source:"hsl"},G))},V.showHighlight=function(ne){ne.currentTarget.style.background="#eee"},V.hideHighlight=function(ne){ne.currentTarget.style.background="transparent"},re.hsl.a!==1&&re.view==="hex"?V.state={view:"rgb"}:V.state={view:re.view},V}return n(se,[{key:"render",value:function(){var V=this,ne=(0,i.default)({default:{wrap:{paddingTop:"16px",display:"flex"},fields:{flex:"1",display:"flex",marginLeft:"-6px"},field:{paddingLeft:"6px",width:"100%"},alpha:{paddingLeft:"6px",width:"100%"},toggle:{width:"32px",textAlign:"right",position:"relative"},icon:{marginRight:"-4px",marginTop:"12px",cursor:"pointer",position:"relative"},iconHighlight:{position:"absolute",width:"24px",height:"28px",background:"#eee",borderRadius:"4px",top:"10px",left:"12px",display:"none"},input:{fontSize:"11px",color:"#333",width:"100%",borderRadius:"2px",border:"none",boxShadow:"inset 0 0 0 1px #dadada",height:"21px",textAlign:"center"},label:{textTransform:"uppercase",fontSize:"11px",lineHeight:"11px",color:"#969696",textAlign:"center",display:"block",marginTop:"12px"},svg:{fill:"#333",width:"24px",height:"24px",border:"1px transparent solid",borderRadius:"5px"}},disableAlpha:{alpha:{display:"none"}}},this.props,this.state),G=void 0;return this.state.view==="hex"?G=t.default.createElement("div",{style:ne.fields,className:"flexbox-fix"},t.default.createElement("div",{style:ne.field},t.default.createElement(y.EditableInput,{style:{input:ne.input,label:ne.label},label:"hex",value:this.props.hex,onChange:this.handleChange}))):this.state.view==="rgb"?G=t.default.createElement("div",{style:ne.fields,className:"flexbox-fix"},t.default.createElement("div",{style:ne.field},t.default.createElement(y.EditableInput,{style:{input:ne.input,label:ne.label},label:"r",value:this.props.rgb.r,onChange:this.handleChange})),t.default.createElement("div",{style:ne.field},t.default.createElement(y.EditableInput,{style:{input:ne.input,label:ne.label},label:"g",value:this.props.rgb.g,onChange:this.handleChange})),t.default.createElement("div",{style:ne.field},t.default.createElement(y.EditableInput,{style:{input:ne.input,label:ne.label},label:"b",value:this.props.rgb.b,onChange:this.handleChange})),t.default.createElement("div",{style:ne.alpha},t.default.createElement(y.EditableInput,{style:{input:ne.input,label:ne.label},label:"a",value:this.props.rgb.a,arrowOffset:.01,onChange:this.handleChange}))):this.state.view==="hsl"&&(G=t.default.createElement("div",{style:ne.fields,className:"flexbox-fix"},t.default.createElement("div",{style:ne.field},t.default.createElement(y.EditableInput,{style:{input:ne.input,label:ne.label},label:"h",value:Math.round(this.props.hsl.h),onChange:this.handleChange})),t.default.createElement("div",{style:ne.field},t.default.createElement(y.EditableInput,{style:{input:ne.input,label:ne.label},label:"s",value:Math.round(this.props.hsl.s*100)+"%",onChange:this.handleChange})),t.default.createElement("div",{style:ne.field},t.default.createElement(y.EditableInput,{style:{input:ne.input,label:ne.label},label:"l",value:Math.round(this.props.hsl.l*100)+"%",onChange:this.handleChange})),t.default.createElement("div",{style:ne.alpha},t.default.createElement(y.EditableInput,{style:{input:ne.input,label:ne.label},label:"a",value:this.props.hsl.a,arrowOffset:.01,onChange:this.handleChange})))),t.default.createElement("div",{style:ne.wrap,className:"flexbox-fix"},G,t.default.createElement("div",{style:ne.toggle},t.default.createElement("div",{style:ne.icon,onClick:this.toggleViews,ref:function(he){return V.icon=he}},t.default.createElement(B.default,{style:ne.svg,onMouseOver:this.showHighlight,onMouseEnter:this.showHighlight,onMouseOut:this.hideHighlight}))))}}],[{key:"getDerivedStateFromProps",value:function(V,ne){return V.hsl.a!==1&&ne.view==="hex"?{view:"rgb"}:null}}]),se}(t.default.Component);return Y.defaultProps={view:"hex"},N1.default=Y,N1}var W1={},QK;function tle(){if(QK)return W1;QK=1,Object.defineProperty(W1,"__esModule",{value:!0}),W1.ChromePointer=void 0;var n=Ia(),e=i(n),t=Cp(),r=i(t);function i(l){return l&&l.__esModule?l:{default:l}}var s=W1.ChromePointer=function(){var o=(0,r.default)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",transform:"translate(-6px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return e.default.createElement("div",{style:o.picker})};return W1.default=s,W1}var G1={},YK;function nle(){if(YK)return G1;YK=1,Object.defineProperty(G1,"__esModule",{value:!0}),G1.ChromePointerCircle=void 0;var n=Ia(),e=i(n),t=Cp(),r=i(t);function i(l){return l&&l.__esModule?l:{default:l}}var s=G1.ChromePointerCircle=function(){var o=(0,r.default)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}}});return e.default.createElement("div",{style:o.picker})};return G1.default=s,G1}var qK;function rle(){if(qK)return B1;qK=1,Object.defineProperty(B1,"__esModule",{value:!0}),B1.Chrome=void 0;var n=Ia(),e=j(n),t=mp(),r=j(t),i=Cp(),s=j(i),l=mj(),o=j(l),f=vj(),y=ele(),x=j(y),B=tle(),O=j(B),P=nle(),U=j(P);function j(Y){return Y&&Y.__esModule?Y:{default:Y}}var N=B1.Chrome=function(H){var se=H.width,re=H.onChange,V=H.disableAlpha,ne=H.rgb,G=H.hsl,oe=H.hsv,he=H.hex,fe=H.renderers,Ee=H.styles,me=Ee===void 0?{}:Ee,Se=H.className,Ke=Se===void 0?"":Se,xe=H.defaultView,at=(0,s.default)((0,o.default)({default:{picker:{width:se,background:"#fff",borderRadius:"2px",boxShadow:"0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3)",boxSizing:"initial",fontFamily:"Menlo"},saturation:{width:"100%",paddingBottom:"55%",position:"relative",borderRadius:"2px 2px 0 0",overflow:"hidden"},Saturation:{radius:"2px 2px 0 0"},body:{padding:"16px 16px 12px"},controls:{display:"flex"},color:{width:"32px"},swatch:{marginTop:"6px",width:"16px",height:"16px",borderRadius:"8px",position:"relative",overflow:"hidden"},active:{absolute:"0px 0px 0px 0px",borderRadius:"8px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.1)",background:"rgba("+ne.r+", "+ne.g+", "+ne.b+", "+ne.a+")",zIndex:"2"},toggles:{flex:"1"},hue:{height:"10px",position:"relative",marginBottom:"8px"},Hue:{radius:"2px"},alpha:{height:"10px",position:"relative"},Alpha:{radius:"2px"}},disableAlpha:{color:{width:"22px"},alpha:{display:"none"},hue:{marginBottom:"0px"},swatch:{width:"10px",height:"10px",marginTop:"0px"}}},me),{disableAlpha:V});return e.default.createElement("div",{style:at.picker,className:"chrome-picker "+Ke},e.default.createElement("div",{style:at.saturation},e.default.createElement(f.Saturation,{style:at.Saturation,hsl:G,hsv:oe,pointer:U.default,onChange:re})),e.default.createElement("div",{style:at.body},e.default.createElement("div",{style:at.controls,className:"flexbox-fix"},e.default.createElement("div",{style:at.color},e.default.createElement("div",{style:at.swatch},e.default.createElement("div",{style:at.active}),e.default.createElement(f.Checkboard,{renderers:fe}))),e.default.createElement("div",{style:at.toggles},e.default.createElement("div",{style:at.hue},e.default.createElement(f.Hue,{style:at.Hue,hsl:G,pointer:O.default,onChange:re})),e.default.createElement("div",{style:at.alpha},e.default.createElement(f.Alpha,{style:at.Alpha,rgb:ne,hsl:G,pointer:O.default,renderers:fe,onChange:re})))),e.default.createElement(x.default,{rgb:ne,hsl:G,hex:he,view:xe,onChange:re,disableAlpha:V})))};return N.propTypes={width:r.default.oneOfType([r.default.string,r.default.number]),disableAlpha:r.default.bool,styles:r.default.object,defaultView:r.default.oneOf(["hex","rgb","hsl"])},N.defaultProps={width:225,disableAlpha:!1,styles:{}},B1.default=(0,f.ColorWrap)(N),B1}var ile=rle();const ole=fl(ile);function io(){var n="/home/runner/work/maputnik/maputnik/src/components/InputColor.tsx",e="cb6d03ea084207ffce2f89af246bc26074c13af7",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputColor.tsx",statementMap:{0:{start:{line:7,column:14},end:{line:7,column:23}},1:{start:{line:8,column:2},end:{line:8,column:56}},2:{start:{line:11,column:10},end:{line:13,column:3}},3:{start:{line:14,column:15},end:{line:14,column:19}},4:{start:{line:16,column:4},end:{line:16,column:17}},5:{start:{line:17,column:4},end:{line:17,column:75}},6:{start:{line:20,column:4},end:{line:20,column:27}},7:{start:{line:25,column:21},end:{line:39,column:3}},8:{start:{line:26,column:17},end:{line:26,column:32}},9:{start:{line:27,column:4},end:{line:38,column:5}},10:{start:{line:28,column:18},end:{line:28,column:46}},11:{start:{line:29,column:6},end:{line:32,column:8}},12:{start:{line:34,column:6},end:{line:37,column:8}},13:{start:{line:40,column:17},end:{line:42,column:3}},14:{start:{line:41,column:4},end:{line:41,column:62}},15:{start:{line:44,column:4},end:{line:49,column:5}},16:{start:{line:45,column:6},end:{line:45,column:43}},17:{start:{line:47,column:6},end:{line:47,column:49}},18:{start:{line:48,column:6},end:{line:48,column:39}},19:{start:{line:52,column:4},end:{line:52,column:47}},20:{start:{line:55,column:19},end:{line:55,column:42}},21:{start:{line:56,column:25},end:{line:56,column:44}},22:{start:{line:57,column:31},end:{line:63,column:5}},23:{start:{line:64,column:35},end:{line:99,column:5}},24:{start:{line:79,column:31},end:{line:79,column:67}},25:{start:{line:100,column:24},end:{line:102,column:5}},26:{start:{line:103,column:4},end:{line:122,column:9}},27:{start:{line:113,column:26},end:{line:113,column:49}},28:{start:{line:119,column:27},end:{line:119,column:56}}},fnMap:{0:{name:"formatColor",decl:{start:{line:6,column:9},end:{line:6,column:20}},loc:{start:{line:6,column:28},end:{line:9,column:1}},line:6},1:{name:"(anonymous_1)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:21},end:{line:18,column:3}},line:15},2:{name:"(anonymous_2)",decl:{start:{line:19,column:2},end:{line:19,column:3}},loc:{start:{line:19,column:21},end:{line:21,column:3}},line:19},3:{name:"(anonymous_3)",decl:{start:{line:25,column:21},end:{line:25,column:22}},loc:{start:{line:25,column:27},end:{line:39,column:3}},line:25},4:{name:"(anonymous_4)",decl:{start:{line:40,column:17},end:{line:40,column:18}},loc:{start:{line:40,column:23},end:{line:42,column:3}},line:40},5:{name:"(anonymous_5)",decl:{start:{line:43,column:2},end:{line:43,column:3}},loc:{start:{line:43,column:14},end:{line:50,column:3}},line:43},6:{name:"(anonymous_6)",decl:{start:{line:51,column:2},end:{line:51,column:3}},loc:{start:{line:51,column:14},end:{line:53,column:3}},line:51},7:{name:"(anonymous_7)",decl:{start:{line:54,column:2},end:{line:54,column:3}},loc:{start:{line:54,column:11},end:{line:123,column:3}},line:54},8:{name:"(anonymous_8)",decl:{start:{line:79,column:24},end:{line:79,column:25}},loc:{start:{line:79,column:31},end:{line:79,column:67}},line:79},9:{name:"(anonymous_9)",decl:{start:{line:113,column:15},end:{line:113,column:16}},loc:{start:{line:113,column:26},end:{line:113,column:49}},line:113},10:{name:"(anonymous_10)",decl:{start:{line:119,column:20},end:{line:119,column:21}},loc:{start:{line:119,column:27},end:{line:119,column:56}},line:119}},branchMap:{0:{loc:{start:{line:27,column:4},end:{line:38,column:5}},type:"if",locations:[{start:{line:27,column:4},end:{line:38,column:5}},{start:{line:33,column:11},end:{line:38,column:5}}],line:27},1:{loc:{start:{line:52,column:24},end:{line:52,column:45}},type:"cond-expr",locations:[{start:{line:52,column:35},end:{line:52,column:41}},{start:{line:52,column:44},end:{line:52,column:45}}],line:52},2:{loc:{start:{line:104,column:6},end:{line:104,column:39}},type:"binary-expr",locations:[{start:{line:104,column:6},end:{line:104,column:29}},{start:{line:104,column:33},end:{line:104,column:39}}],line:104},3:{loc:{start:{line:118,column:17},end:{line:118,column:57}},type:"cond-expr",locations:[{start:{line:118,column:36},end:{line:118,column:52}},{start:{line:118,column:55},end:{line:118,column:57}}],line:118}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputColor.tsx"],names:[],mappings:"AAsFmB,SAQb,KARa;AAtFnB,OAAO,WAAW;AAClB,OAAO,WAAW;AAClB,OAAO,kBAAkB;AAEzB,OAAO,YAAY;AAEnB,SAAS,YAAY,OAA4B;AAC/C,QAAM,MAAM,MAAM;AAClB,SAAO,QAAQ,IAAI,CAAC,KAAK,IAAI,CAAC,KAAK,IAAI,CAAC,KAAK,IAAI,CAAC;AACpD;AAaA,qBAAqB,mBAAmB,MAAM,UAA2B;AAAA,EACvE,QAAQ;AAAA,IACN,cAAc;AAAA,EAChB;AAAA,EACA,aAAsC;AAAA,EAEtC,YAAa,OAAwB;AACnC,UAAM,KAAK;AACX,SAAK,kBAAkB,OAAO,SAAS,KAAK,iBAAiB,MAAK,EAAE;AAAA,EACtE;AAAA,EAEA,gBAAgB,GAAW;AACzB,SAAK,MAAM,SAAS,CAAC;AAAA,EACvB;AAAA;AAAA;AAAA;AAAA,EAKA,mBAAmB,MAAM;AACvB,UAAM,OAAO,KAAK;AAClB,QAAG,MAAM;AACP,YAAM,MAAM,KAAK,sBAAsB;AACvC,aAAO;AAAA,QACL,KAAK,IAAI;AAAA,QACT,MAAM,IAAI,OAAO;AAAA,MACnB;AAAA,IACF,OAAO;AACL,aAAO;AAAA,QACL,KAAK;AAAA,QACL,MAAM;AAAA,MACR;AAAA,IACF;AAAA,EACF;AAAA,EAEA,eAAe,MAAM;AACnB,SAAK,SAAS,EAAE,cAAc,CAAC,KAAK,MAAM,aAAa,CAAC;AAAA,EAC1D;AAAA,EAEA,IAAI,QAAQ;AAEV,QAAI;AACF,aAAO,MAAM,KAAK,MAAM,KAAK,EAAE,IAAI;AAAA,IACrC,SACM,KAAK;AACT,cAAQ,KAAK,yBAAyB,GAAG;AACzC,aAAO,MAAM,kBAAkB;AAAA,IACjC;AAAA,EACF;AAAA,EAEA,SAAU,GAAW;AACnB,SAAK,MAAM,SAAS,MAAM,KAAK,SAAY,CAAC;AAAA,EAC9C;AAAA,EAEA,SAAS;AACP,UAAM,SAAS,KAAK,iBAAiB;AACrC,UAAM,eAAe,KAAK,MAAM,OAAO;AACvC,UAAM,qBAAqB;AAAA,MACzB,GAAG,aAAa;AAAA,MAChB,GAAG,aAAa;AAAA,MAChB,GAAG,aAAa;AAAA;AAAA,MAEhB,GAAG,aAAa;AAAA,IAClB;AAEA,UAAM,SAAS;AAAA,MAAC;AAAA;AAAA,QACd,WAAU;AAAA,QACV,OAAO;AAAA,UACL,UAAU;AAAA,UACV,QAAQ;AAAA,UACR,MAAM,OAAO;AAAA,UACb,KAAK,OAAO;AAAA,QACd;AAAA,QACA;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO;AAAA,cACP,UAAU,OAAK,KAAK,gBAAgB,YAAY,CAAC,CAAC;AAAA;AAAA,UACpD;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK;AAAA,cACd,OAAO;AAAA,gBACL,QAAQ;AAAA,gBACR,UAAU;AAAA,gBACV,KAAK;AAAA,gBACL,OAAO;AAAA,gBACP,QAAQ;AAAA,gBACR,MAAM;AAAA,cACR;AAAA;AAAA,UACF;AAAA;AAAA;AAAA,IACF;AAEA,UAAM,cAAc;AAAA,MAClB,iBAAiB,KAAK,MAAM;AAAA,IAC9B;AAEA,WAAO,qBAAC,SAAI,WAAU,0BACnB;AAAA,WAAK,MAAM,gBAAgB;AAAA,MAC5B,oBAAC,SAAI,WAAU,yBAAwB,OAAO,aAAa;AAAA,MAC3D;AAAA,QAAC;AAAA;AAAA,UACC,cAAY,KAAK,MAAM,YAAY;AAAA,UACnC,YAAW;AAAA,UACX,cAAa;AAAA,UACb,WAAU;AAAA,UACV,KAAK,CAAC,UAAU,KAAK,aAAa;AAAA,UAClC,SAAS,KAAK;AAAA,UACd,OAAO,KAAK,MAAM;AAAA,UAClB,MAAM,KAAK,MAAM;AAAA,UACjB,aAAa,KAAK,MAAM;AAAA,UACxB,OAAO,KAAK,MAAM,QAAQ,KAAK,MAAM,QAAQ;AAAA,UAC7C,UAAU,CAAC,MAAM,KAAK,SAAS,EAAE,OAAO,KAAK;AAAA;AAAA,MAC/C;AAAA,OACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"cb6d03ea084207ffce2f89af246bc26074c13af7"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return io=function(){return l},l}io();function sle(n){io().f[0]++;const e=(io().s[0]++,n.rgb);return io().s[1]++,`rgba(${e.r}, ${e.g}, ${e.b}, ${e.a})`}class Cj extends Xn.Component{constructor(t){io().f[1]++,io().s[4]++;super(t);Kn(this,"state",(io().s[2]++,{pickerOpened:!1}));Kn(this,"colorInput",(io().s[3]++,null));Kn(this,"calcPickerOffset",(io().s[7]++,()=>{io().f[3]++;const t=(io().s[8]++,this.colorInput);if(io().s[9]++,t){io().b[0][0]++;const r=(io().s[10]++,t.getBoundingClientRect());return io().s[11]++,{top:r.top,left:r.left+196}}else return io().b[0][1]++,io().s[12]++,{top:160,left:555}}));Kn(this,"togglePicker",(io().s[13]++,()=>{io().f[4]++,io().s[14]++,this.setState({pickerOpened:!this.state.pickerOpened})}));io().s[5]++,this.onChangeNoCheck=wE.throttle(this.onChangeNoCheck,1e3/30)}onChangeNoCheck(t){io().f[2]++,io().s[6]++,this.props.onChange(t)}get color(){io().f[5]++,io().s[15]++;try{return io().s[16]++,MA(this.props.value).rgb()}catch(t){return io().s[17]++,console.warn("Error parsing color: ",t),io().s[18]++,MA("rgb(255,255,255)")}}onChange(t){io().f[6]++,io().s[19]++,this.props.onChange(t===""?(io().b[1][0]++,void 0):(io().b[1][1]++,t))}render(){io().f[7]++;const t=(io().s[20]++,this.calcPickerOffset()),r=(io().s[21]++,this.color.object()),i=(io().s[22]++,{r:r.r,g:r.g,b:r.b,a:r.alpha}),s=(io().s[23]++,ue.jsxs("div",{className:"maputnik-color-picker-offset",style:{position:"fixed",zIndex:1,left:t.left,top:t.top},children:[ue.jsx(ole,{color:i,onChange:o=>(io().f[8]++,io().s[24]++,this.onChangeNoCheck(sle(o)))}),ue.jsx("div",{className:"maputnik-color-picker-offset",onClick:this.togglePicker,style:{zIndex:-1,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}})]})),l=(io().s[25]++,{backgroundColor:this.props.value});return io().s[26]++,ue.jsxs("div",{className:"maputnik-color-wrapper",children:[(io().b[2][0]++,this.state.pickerOpened&&(io().b[2][1]++,s)),ue.jsx("div",{className:"maputnik-color-swatch",style:l}),ue.jsx("input",{"aria-label":this.props["aria-label"],spellCheck:"false",autoComplete:"off",className:"maputnik-color",ref:o=>(io().f[9]++,io().s[27]++,this.colorInput=o),onClick:this.togglePicker,style:this.props.style,name:this.props.name,placeholder:this.props.default,value:this.props.value?(io().b[3][0]++,this.props.value):(io().b[3][1]++,""),onChange:o=>(io().f[10]++,io().s[28]++,this.onChange(o.target.value))})]})}}function gn(){var n="/home/runner/work/maputnik/maputnik/src/components/InputNumber.tsx",e="ab7734237b4c4e642d73d3a00f670557b7ee2f29",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputNumber.tsx",statementMap:{0:{start:{line:5,column:24},end:{line:7,column:3}},1:{start:{line:8,column:19},end:{line:8,column:24}},2:{start:{line:10,column:4},end:{line:10,column:17}},3:{start:{line:11,column:4},end:{line:16,column:6}},4:{start:{line:19,column:4},end:{line:24,column:5}},5:{start:{line:20,column:6},end:{line:23,column:8}},6:{start:{line:25,column:4},end:{line:25,column:16}},7:{start:{line:28,column:18},end:{line:28,column:77}},8:{start:{line:29,column:23},end:{line:29,column:49}},9:{start:{line:30,column:4},end:{line:39,column:5}},10:{start:{line:31,column:6},end:{line:31,column:58}},11:{start:{line:31,column:31},end:{line:31,column:58}},12:{start:{line:32,column:6},end:{line:34,column:9}},13:{start:{line:35,column:11},end:{line:39,column:5}},14:{start:{line:36,column:6},end:{line:38,column:9}},15:{start:{line:40,column:4},end:{line:42,column:7}},16:{start:{line:45,column:4},end:{line:47,column:5}},17:{start:{line:46,column:6},end:{line:46,column:18}},18:{start:{line:48,column:18},end:{line:48,column:20}},19:{start:{line:49,column:4},end:{line:51,column:5}},20:{start:{line:50,column:6},end:{line:50,column:19}},21:{start:{line:52,column:4},end:{line:54,column:5}},22:{start:{line:53,column:6},end:{line:53,column:19}},23:{start:{line:55,column:4},end:{line:57,column:5}},24:{start:{line:56,column:6},end:{line:56,column:19}},25:{start:{line:58,column:4},end:{line:58,column:16}},26:{start:{line:60,column:15},end:{line:74,column:3}},27:{start:{line:61,column:4},end:{line:61,column:38}},28:{start:{line:62,column:4},end:{line:64,column:5}},29:{start:{line:63,column:6},end:{line:63,column:13}},30:{start:{line:65,column:4},end:{line:73,column:5}},31:{start:{line:66,column:6},end:{line:72,column:7}},32:{start:{line:67,column:8},end:{line:67,column:43}},33:{start:{line:68,column:8},end:{line:68,column:56}},34:{start:{line:70,column:8},end:{line:70,column:33}},35:{start:{line:71,column:8},end:{line:71,column:46}},36:{start:{line:75,column:18},end:{line:100,column:3}},37:{start:{line:76,column:16},end:{line:76,column:42}},38:{start:{line:77,column:17},end:{line:77,column:37}},39:{start:{line:78,column:21},end:{line:78,column:26}},40:{start:{line:79,column:4},end:{line:95,column:5}},41:{start:{line:80,column:19},end:{line:80,column:31}},42:{start:{line:81,column:6},end:{line:94,column:7}},43:{start:{line:82,column:8},end:{line:86,column:9}},44:{start:{line:83,column:10},end:{line:83,column:42}},45:{start:{line:85,column:10},end:{line:85,column:42}},46:{start:{line:87,column:8},end:{line:87,column:27}},47:{start:{line:89,column:8},end:{line:93,column:9}},48:{start:{line:90,column:10},end:{line:90,column:31}},49:{start:{line:92,column:10},end:{line:92,column:40}},50:{start:{line:96,column:4},end:{line:96,column:32}},51:{start:{line:97,column:4},end:{line:97,column:70}},52:{start:{line:98,column:4},end:{line:98,column:41}},53:{start:{line:99,column:4},end:{line:99,column:56}},54:{start:{line:99,column:29},end:{line:99,column:56}},55:{start:{line:102,column:4},end:{line:185,column:5}},56:{start:{line:103,column:20},end:{line:103,column:81}},57:{start:{line:104,column:27},end:{line:104,column:82}},58:{start:{line:106,column:6},end:{line:110,column:7}},59:{start:{line:107,column:8},end:{line:107,column:38}},60:{start:{line:109,column:8},end:{line:109,column:27}},61:{start:{line:111,column:6},end:{line:165,column:11}},62:{start:{line:124,column:14},end:{line:124,column:41}},63:{start:{line:127,column:14},end:{line:127,column:67}},64:{start:{line:130,column:14},end:{line:130,column:69}},65:{start:{line:133,column:14},end:{line:137,column:17}},66:{start:{line:152,column:14},end:{line:152,column:47}},67:{start:{line:155,column:14},end:{line:155,column:47}},68:{start:{line:158,column:14},end:{line:158,column:48}},69:{start:{line:159,column:14},end:{line:159,column:32}},70:{start:{line:167,column:20},end:{line:167,column:81}},71:{start:{line:168,column:6},end:{line:184,column:8}},72:{start:{line:176,column:27},end:{line:176,column:59}},73:{start:{line:178,column:12},end:{line:178,column:45}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:2},end:{line:9,column:3}},loc:{start:{line:9,column:21},end:{line:17,column:3}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:48},end:{line:26,column:3}},line:18},2:{name:"(anonymous_2)",decl:{start:{line:27,column:2},end:{line:27,column:3}},loc:{start:{line:27,column:24},end:{line:43,column:3}},line:27},3:{name:"(anonymous_3)",decl:{start:{line:44,column:2},end:{line:44,column:3}},loc:{start:{line:44,column:13},end:{line:59,column:3}},line:44},4:{name:"(anonymous_4)",decl:{start:{line:60,column:15},end:{line:60,column:16}},loc:{start:{line:60,column:21},end:{line:74,column:3}},line:60},5:{name:"(anonymous_5)",decl:{start:{line:75,column:18},end:{line:75,column:19}},loc:{start:{line:75,column:25},end:{line:100,column:3}},line:75},6:{name:"(anonymous_6)",decl:{start:{line:101,column:2},end:{line:101,column:3}},loc:{start:{line:101,column:11},end:{line:186,column:3}},line:101},7:{name:"(anonymous_7)",decl:{start:{line:123,column:23},end:{line:123,column:24}},loc:{start:{line:123,column:29},end:{line:125,column:13}},line:123},8:{name:"(anonymous_8)",decl:{start:{line:126,column:27},end:{line:126,column:28}},loc:{start:{line:126,column:33},end:{line:128,column:13}},line:126},9:{name:"(anonymous_9)",decl:{start:{line:129,column:25},end:{line:129,column:26}},loc:{start:{line:129,column:31},end:{line:131,column:13}},line:129},10:{name:"(anonymous_10)",decl:{start:{line:132,column:20},end:{line:132,column:21}},loc:{start:{line:132,column:26},end:{line:138,column:13}},line:132},11:{name:"(anonymous_11)",decl:{start:{line:151,column:21},end:{line:151,column:22}},loc:{start:{line:151,column:29},end:{line:153,column:13}},line:151},12:{name:"(anonymous_12)",decl:{start:{line:154,column:22},end:{line:154,column:23}},loc:{start:{line:154,column:29},end:{line:156,column:13}},line:154},13:{name:"(anonymous_13)",decl:{start:{line:157,column:20},end:{line:157,column:21}},loc:{start:{line:157,column:28},end:{line:160,column:13}},line:157},14:{name:"(anonymous_14)",decl:{start:{line:176,column:20},end:{line:176,column:21}},loc:{start:{line:176,column:27},end:{line:176,column:59}},line:176},15:{name:"(anonymous_15)",decl:{start:{line:177,column:19},end:{line:177,column:20}},loc:{start:{line:177,column:25},end:{line:179,column:11}},line:177}},branchMap:{0:{loc:{start:{line:19,column:4},end:{line:24,column:5}},type:"if",locations:[{start:{line:19,column:4},end:{line:24,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:19},1:{loc:{start:{line:19,column:8},end:{line:19,column:53}},type:"binary-expr",locations:[{start:{line:19,column:8},end:{line:19,column:22}},{start:{line:19,column:26},end:{line:19,column:53}}],line:19},2:{loc:{start:{line:28,column:18},end:{line:28,column:77}},type:"cond-expr",locations:[{start:{line:28,column:59},end:{line:28,column:65}},{start:{line:28,column:68},end:{line:28,column:77}}],line:28},3:{loc:{start:{line:28,column:18},end:{line:28,column:56}},type:"binary-expr",locations:[{start:{line:28,column:18},end:{line:28,column:33}},{start:{line:28,column:37},end:{line:28,column:56}}],line:28},4:{loc:{start:{line:30,column:4},end:{line:39,column:5}},type:"if",locations:[{start:{line:30,column:4},end:{line:39,column:5}},{start:{line:35,column:11},end:{line:39,column:5}}],line:30},5:{loc:{start:{line:30,column:8},end:{line:30,column:41}},type:"binary-expr",locations:[{start:{line:30,column:8},end:{line:30,column:27}},{start:{line:30,column:31},end:{line:30,column:41}}],line:30},6:{loc:{start:{line:31,column:6},end:{line:31,column:58}},type:"if",locations:[{start:{line:31,column:6},end:{line:31,column:58}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:31},7:{loc:{start:{line:35,column:11},end:{line:39,column:5}},type:"if",locations:[{start:{line:35,column:11},end:{line:39,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:35},8:{loc:{start:{line:35,column:15},end:{line:35,column:49}},type:"binary-expr",locations:[{start:{line:35,column:15},end:{line:35,column:35}},{start:{line:35,column:39},end:{line:35,column:49}}],line:35},9:{loc:{start:{line:41,column:18},end:{line:41,column:53}},type:"cond-expr",locations:[{start:{line:41,column:36},end:{line:41,column:42}},{start:{line:41,column:45},end:{line:41,column:53}}],line:41},10:{loc:{start:{line:45,column:4},end:{line:47,column:5}},type:"if",locations:[{start:{line:45,column:4},end:{line:47,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:45},11:{loc:{start:{line:49,column:4},end:{line:51,column:5}},type:"if",locations:[{start:{line:49,column:4},end:{line:51,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:49},12:{loc:{start:{line:52,column:4},end:{line:54,column:5}},type:"if",locations:[{start:{line:52,column:4},end:{line:54,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:52},13:{loc:{start:{line:52,column:8},end:{line:52,column:56}},type:"binary-expr",locations:[{start:{line:52,column:8},end:{line:52,column:30}},{start:{line:52,column:34},end:{line:52,column:56}}],line:52},14:{loc:{start:{line:55,column:4},end:{line:57,column:5}},type:"if",locations:[{start:{line:55,column:4},end:{line:57,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:55},15:{loc:{start:{line:55,column:8},end:{line:55,column:56}},type:"binary-expr",locations:[{start:{line:55,column:8},end:{line:55,column:30}},{start:{line:55,column:34},end:{line:55,column:56}}],line:55},16:{loc:{start:{line:62,column:4},end:{line:64,column:5}},type:"if",locations:[{start:{line:62,column:4},end:{line:64,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:62},17:{loc:{start:{line:65,column:4},end:{line:73,column:5}},type:"if",locations:[{start:{line:65,column:4},end:{line:73,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:65},18:{loc:{start:{line:66,column:6},end:{line:72,column:7}},type:"if",locations:[{start:{line:66,column:6},end:{line:72,column:7}},{start:{line:69,column:13},end:{line:72,column:7}}],line:66},19:{loc:{start:{line:79,column:4},end:{line:95,column:5}},type:"if",locations:[{start:{line:79,column:4},end:{line:95,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:79},20:{loc:{start:{line:81,column:6},end:{line:94,column:7}},type:"if",locations:[{start:{line:81,column:6},end:{line:94,column:7}},{start:{line:88,column:13},end:{line:94,column:7}}],line:81},21:{loc:{start:{line:82,column:8},end:{line:86,column:9}},type:"if",locations:[{start:{line:82,column:8},end:{line:86,column:9}},{start:{line:84,column:15},end:{line:86,column:9}}],line:82},22:{loc:{start:{line:89,column:8},end:{line:93,column:9}},type:"if",locations:[{start:{line:89,column:8},end:{line:93,column:9}},{start:{line:91,column:15},end:{line:93,column:9}}],line:89},23:{loc:{start:{line:99,column:4},end:{line:99,column:56}},type:"if",locations:[{start:{line:99,column:4},end:{line:99,column:56}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:99},24:{loc:{start:{line:102,column:4},end:{line:185,column:5}},type:"if",locations:[{start:{line:102,column:4},end:{line:185,column:5}},{start:{line:166,column:11},end:{line:185,column:5}}],line:102},25:{loc:{start:{line:102,column:8},end:{line:102,column:205}},type:"binary-expr",locations:[{start:{line:102,column:8},end:{line:102,column:63}},{start:{line:102,column:67},end:{line:102,column:122}},{start:{line:102,column:126},end:{line:102,column:151}},{start:{line:102,column:155},end:{line:102,column:180}},{start:{line:102,column:184},end:{line:102,column:205}}],line:102},26:{loc:{start:{line:103,column:20},end:{line:103,column:81}},type:"cond-expr",locations:[{start:{line:103,column:41},end:{line:103,column:62}},{start:{line:103,column:65},end:{line:103,column:81}}],line:103},27:{loc:{start:{line:104,column:27},end:{line:104,column:82}},type:"cond-expr",locations:[{start:{line:104,column:59},end:{line:104,column:61}},{start:{line:104,column:64},end:{line:104,column:82}}],line:104},28:{loc:{start:{line:106,column:6},end:{line:110,column:7}},type:"if",locations:[{start:{line:106,column:6},end:{line:110,column:7}},{start:{line:108,column:13},end:{line:110,column:7}}],line:106},29:{loc:{start:{line:121,column:19},end:{line:121,column:58}},type:"cond-expr",locations:[{start:{line:121,column:38},end:{line:121,column:50}},{start:{line:121,column:53},end:{line:121,column:58}}],line:121},30:{loc:{start:{line:150,column:19},end:{line:150,column:58}},type:"cond-expr",locations:[{start:{line:150,column:43},end:{line:150,column:45}},{start:{line:150,column:48},end:{line:150,column:58}}],line:150},31:{loc:{start:{line:167,column:20},end:{line:167,column:81}},type:"cond-expr",locations:[{start:{line:167,column:41},end:{line:167,column:62}},{start:{line:167,column:65},end:{line:167,column:81}}],line:167},32:{loc:{start:{line:175,column:17},end:{line:175,column:46}},type:"cond-expr",locations:[{start:{line:175,column:36},end:{line:175,column:38}},{start:{line:175,column:41},end:{line:175,column:46}}],line:175}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0,0,0,0],26:[0,0],27:[0,0],28:[0,0],29:[0,0],30:[0,0],31:[0,0],32:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputNumber.tsx"],names:[],mappings:"AA8Ka,SACL,KADK;AA9Kb,OAAO,WAAmC;AAC1C,OAAO,sBAAsB;AA0B7B,qBAAqB,oBAAoB,MAAM,UAA8C;AAAA,EAC3F,OAAO,eAAe;AAAA,IACpB,WAAW;AAAA,EACb;AAAA,EACA,iBAA0B;AAAA,EAE1B,YAAY,OAAyB;AACnC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,MAAM,CAAC,iBAAiB;AAAA,MACxB,SAAS;AAAA,MACT,OAAO,MAAM;AAAA,MACb,YAAY,MAAM;AAAA,IACpB;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAAmC,OAAyB;AAC1F,QAAI,CAAC,MAAM,WAAW,MAAM,UAAU,MAAM,OAAO;AACjD,aAAO;AAAA,QACL,OAAO,MAAM;AAAA,QACb,YAAY,MAAM;AAAA,MACpB;AAAA,IACF;AACA,WAAO;AAAA,EACT;AAAA,EAEA,YAAY,UAAuC;AACjD,UAAM,QAAS,aAAa,MAAM,aAAa,SAC7C,SAAY,CAAC;AAEf,UAAM,aAAa,KAAK,MAAM,UAAU;AACxC,QAAG,KAAK,QAAQ,KAAK,KAAK,YAAY;AACpC,UAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,KAAK;AAClD,WAAK,SAAS;AAAA,QACZ;AAAA,MACF,CAAC;AAAA,IACH,WACS,CAAC,KAAK,QAAQ,KAAK,KAAK,YAAY;AAC3C,WAAK,SAAS;AAAA,QACZ,OAAO;AAAA,MACT,CAAC;AAAA,IACH;AAEA,SAAK,SAAS;AAAA,MACZ,YAAY,aAAa,KAAK,SAAY;AAAA,IAC5C,CAAC;AAAA,EACH;AAAA,EAEA,QAAQ,GAAgC;AACtC,QAAI,MAAM,QAAW;AACnB,aAAO;AAAA,IACT;AAEA,UAAM,QAAQ,CAAC;AACf,QAAG,MAAM,KAAK,GAAG;AACf,aAAO;AAAA,IACT;AAEA,QAAG,CAAC,MAAM,KAAK,MAAM,GAAI,KAAK,QAAQ,KAAK,MAAM,KAAM;AACrD,aAAO;AAAA,IACT;AAEA,QAAG,CAAC,MAAM,KAAK,MAAM,GAAI,KAAK,QAAQ,KAAK,MAAM,KAAM;AACrD,aAAO;AAAA,IACT;AAEA,WAAO;AAAA,EACT;AAAA,EAEA,aAAa,MAAM;AACjB,SAAK,SAAS,EAAC,SAAS,MAAK,CAAC;AAE9B,QAAG,CAAC,KAAK,MAAM,OAAO;AACpB;AAAA,IACF;AAGA,QAAI,CAAC,KAAK,QAAQ,KAAK,MAAM,KAAK,GAAG;AACnC,UAAG,KAAK,QAAQ,KAAK,MAAM,KAAK,GAAG;AACjC,aAAK,YAAY,KAAK,MAAM,KAAK;AACjC,aAAK,SAAS,EAAC,YAAY,KAAK,MAAM,MAAK,CAAC;AAAA,MAC9C,OAAO;AACL,aAAK,YAAY,MAAS;AAC1B,aAAK,SAAS,EAAC,YAAY,OAAS,CAAC;AAAA,MACvC;AAAA,IACF;AAAA,EACF;AAAA,EAEA,gBAAgB,CAAC,MAAqE;AACpF,QAAI,QAAQ,WAAW,EAAE,OAAO,KAAK;AACrC,UAAM,OAAO,KAAK,MAAM;AACxB,QAAI,aAAa;AAEjB,QAAG,MAAM;AAEP,YAAM,OAAO,QAAQ;AAGrB,UAAI,KAAK,gBAAgB;AAKvB,YAAI,QAAQ,CAAC,KAAK,MAAM,YAAa;AACnC,kBAAQ,KAAK,MAAM,QAAS;AAAA,QAC9B,OACK;AACH,kBAAQ,KAAK,MAAM,QAAS;AAAA,QAC9B;AACA,qBAAa;AAAA,MACf,OACK;AACH,YAAI,OAAO,OAAK,GAAG;AACjB,kBAAQ,QAAQ;AAAA,QAClB,OACK;AACH,kBAAQ,SAAS,OAAO;AAAA,QAC1B;AAAA,MACF;AAAA,IACF;AAEA,SAAK,iBAAiB;AAGtB,YAAQ,KAAK,IAAI,KAAK,MAAM,KAAM,KAAK,IAAI,KAAK,MAAM,KAAM,KAAK,CAAC;AAElE,SAAK,SAAS,EAAC,OAAO,WAAU,CAAC;AACjC,QAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,KAAK;AAAA,EACpD;AAAA,EAEA,SAAS;AACP,QACE,OAAO,UAAU,eAAe,KAAK,KAAK,OAAO,KAAK,KACtD,OAAO,UAAU,eAAe,KAAK,KAAK,OAAO,KAAK,KACtD,KAAK,MAAM,QAAQ,UAAa,KAAK,MAAM,QAAQ,UACnD,KAAK,MAAM,YACX;AACA,YAAM,QAAQ,KAAK,MAAM,UAAU,KAAK,MAAM,aAAa,KAAK,MAAM;AACtE,YAAM,eAAe,KAAK,MAAM,YAAY,SAAY,KAAK,KAAK,MAAM;AACxE,UAAI;AACJ,UAAI,KAAK,MAAM,cAAc;AAC3B,qBAAa,KAAK,MAAM;AAAA,MAC1B,OACK;AACH,qBAAa;AAAA,MACf;AAEA,aAAO,qBAAC,SAAI,WAAU,6BACpB;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,WAAU;AAAA,YAEV,MAAK;AAAA,YACL,KAAK,KAAK,MAAM;AAAA,YAChB,KAAK,KAAK,MAAM;AAAA,YAChB,MAAK;AAAA,YACL,YAAW;AAAA,YACX,OAAO,UAAU,SAAY,eAAe;AAAA,YAC5C,UAAU,KAAK;AAAA,YACf,WAAW,MAAM;AACf,mBAAK,iBAAiB;AAAA,YACxB;AAAA,YACA,eAAe,MAAM;AACnB,mBAAK,SAAS,EAAC,SAAS,MAAM,cAAc,KAAI,CAAC;AAAA,YACnD;AAAA,YACA,aAAa,MAAM;AAEjB,mBAAK,SAAS,EAAC,SAAS,OAAO,cAAc,MAAK,CAAC;AAAA,YACrD;AAAA,YACA,QAAQ,MAAM;AACZ,mBAAK,SAAS;AAAA,gBACZ,SAAS;AAAA,gBACT,cAAc;AAAA,gBACd,YAAY,KAAK,MAAM;AAAA,cACzB,CAAC;AAAA,YACH;AAAA,YACA,eAAa,KAAK,MAAM,aAAa,IAAI;AAAA;AAAA,UAzBrC;AAAA,QA0BN;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YAEC,MAAK;AAAA,YACL,YAAW;AAAA,YACX,WAAU;AAAA,YACV,aAAa,KAAK,MAAM,SAAS,SAAS;AAAA,YAC1C,OAAO,eAAe,SAAY,KAAK;AAAA,YACvC,SAAS,QAAM;AACb,mBAAK,SAAS,EAAC,SAAS,KAAI,CAAC;AAAA,YAC/B;AAAA,YACA,UAAU,OAAK;AACb,mBAAK,YAAY,EAAE,OAAO,KAAK;AAAA,YACjC;AAAA,YACA,QAAQ,QAAM;AACZ,mBAAK,SAAS,EAAC,SAAS,MAAK,CAAC;AAC9B,mBAAK,WAAW;AAAA,YAClB;AAAA,YACA,eAAa,KAAK,MAAM,aAAa,IAAI;AAAA;AAAA,UAhBrC;AAAA,QAkBN;AAAA,SACF;AAAA,IACF,OACK;AACH,YAAM,QAAQ,KAAK,MAAM,UAAU,KAAK,MAAM,aAAa,KAAK,MAAM;AAEtE,aAAO;AAAA,QAAC;AAAA;AAAA,UACN,cAAY,KAAK,MAAM,YAAY;AAAA,UACnC,YAAW;AAAA,UACX,WAAU;AAAA,UACV,aAAa,KAAK,MAAM,SAAS,SAAS;AAAA,UAC1C,OAAO,UAAU,SAAY,KAAK;AAAA,UAClC,UAAU,OAAK,KAAK,YAAY,EAAE,OAAO,KAAK;AAAA,UAC9C,SAAS,MAAM;AACb,iBAAK,SAAS,EAAC,SAAS,KAAI,CAAC;AAAA,UAC/B;AAAA,UACA,QAAQ,KAAK;AAAA,UACb,UAAU,KAAK,MAAM;AAAA,UACrB,eAAa,KAAK,MAAM,aAAa;AAAA;AAAA,MACvC;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ab7734237b4c4e642d73d3a00f670557b7ee2f29"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return gn=function(){return l},l}gn();class rm extends Xn.Component{constructor(t){gn().f[0]++,gn().s[2]++;super(t);Kn(this,"_keyboardEvent",(gn().s[1]++,!1));Kn(this,"resetValue",(gn().s[26]++,()=>{if(gn().f[4]++,gn().s[27]++,this.setState({editing:!1}),gn().s[28]++,this.state.value)gn().b[16][1]++;else{gn().b[16][0]++,gn().s[29]++;return}gn().s[30]++,this.isValid(this.state.value)?gn().b[17][1]++:(gn().b[17][0]++,gn().s[31]++,this.isValid(this.props.value)?(gn().b[18][0]++,gn().s[32]++,this.changeValue(this.props.value),gn().s[33]++,this.setState({dirtyValue:this.props.value})):(gn().b[18][1]++,gn().s[34]++,this.changeValue(void 0),gn().s[35]++,this.setState({dirtyValue:void 0})))}));Kn(this,"onChangeRange",(gn().s[36]++,t=>{gn().f[5]++;let r=(gn().s[37]++,parseFloat(t.target.value));const i=(gn().s[38]++,this.props.rangeStep);let s=(gn().s[39]++,r);if(gn().s[40]++,i){gn().b[19][0]++;const l=(gn().s[41]++,r%i);gn().s[42]++,this._keyboardEvent?(gn().b[20][0]++,gn().s[43]++,r<+this.state.dirtyValue?(gn().b[21][0]++,gn().s[44]++,r=this.state.value-i):(gn().b[21][1]++,gn().s[45]++,r=this.state.value+i),gn().s[46]++,s=r):(gn().b[20][1]++,gn().s[47]++,l<i/2?(gn().b[22][0]++,gn().s[48]++,r=r-l):(gn().b[22][1]++,gn().s[49]++,r=r+(i-l)))}else gn().b[19][1]++;gn().s[50]++,this._keyboardEvent=!1,gn().s[51]++,r=Math.max(this.props.min,Math.min(this.props.max,r)),gn().s[52]++,this.setState({value:r,dirtyValue:s}),gn().s[53]++,this.props.onChange?(gn().b[23][0]++,gn().s[54]++,this.props.onChange(r)):gn().b[23][1]++}));gn().s[3]++,this.state={uuid:+Py(),editing:!1,value:t.value,dirtyValue:t.value}}static getDerivedStateFromProps(t,r){return gn().f[1]++,gn().s[4]++,gn().b[1][0]++,!r.editing&&(gn().b[1][1]++,t.value!==r.value)?(gn().b[0][0]++,gn().s[5]++,{value:t.value,dirtyValue:t.value}):(gn().b[0][1]++,gn().s[6]++,null)}changeValue(t){gn().f[2]++;const r=(gn().s[7]++,gn().b[3][0]++,t===""||(gn().b[3][1]++,t===void 0)?(gn().b[2][0]++,void 0):(gn().b[2][1]++,+t)),i=(gn().s[8]++,this.props.value!==r);gn().s[9]++,gn().b[5][0]++,this.isValid(r)&&(gn().b[5][1]++,i)?(gn().b[4][0]++,gn().s[10]++,this.props.onChange?(gn().b[6][0]++,gn().s[11]++,this.props.onChange(r)):gn().b[6][1]++,gn().s[12]++,this.setState({value:r})):(gn().b[4][1]++,gn().s[13]++,gn().b[8][0]++,!this.isValid(r)&&(gn().b[8][1]++,i)?(gn().b[7][0]++,gn().s[14]++,this.setState({value:void 0})):gn().b[7][1]++),gn().s[15]++,this.setState({dirtyValue:t===""?(gn().b[9][0]++,void 0):(gn().b[9][1]++,t)})}isValid(t){if(gn().f[3]++,gn().s[16]++,t===void 0)return gn().b[10][0]++,gn().s[17]++,!0;gn().b[10][1]++;const r=(gn().s[18]++,+t);return gn().s[19]++,isNaN(r)?(gn().b[11][0]++,gn().s[20]++,!1):(gn().b[11][1]++,gn().s[21]++,gn().b[13][0]++,!isNaN(this.props.min)&&(gn().b[13][1]++,r<this.props.min)?(gn().b[12][0]++,gn().s[22]++,!1):(gn().b[12][1]++,gn().s[23]++,gn().b[15][0]++,!isNaN(this.props.max)&&(gn().b[15][1]++,r>this.props.max)?(gn().b[14][0]++,gn().s[24]++,!1):(gn().b[14][1]++,gn().s[25]++,!0)))}render(){var t,r;if(gn().f[6]++,gn().s[55]++,gn().b[25][0]++,Object.prototype.hasOwnProperty.call(this.props,"min")&&(gn().b[25][1]++,Object.prototype.hasOwnProperty.call(this.props,"max"))&&(gn().b[25][2]++,this.props.min!==void 0)&&(gn().b[25][3]++,this.props.max!==void 0)&&(gn().b[25][4]++,this.props.allowRange)){gn().b[24][0]++;const i=(gn().s[56]++,this.state.editing?(gn().b[26][0]++,this.state.dirtyValue):(gn().b[26][1]++,this.state.value)),s=(gn().s[57]++,this.props.default===void 0?(gn().b[27][0]++,""):(gn().b[27][1]++,this.props.default));let l;return gn().s[58]++,this.state.editingRange?(gn().b[28][0]++,gn().s[59]++,l=this.state.value):(gn().b[28][1]++,gn().s[60]++,l=i),gn().s[61]++,ue.jsxs("div",{className:"maputnik-number-container",children:[ue.jsx("input",{className:"maputnik-number-range",type:"range",max:this.props.max,min:this.props.min,step:"any",spellCheck:"false",value:i===void 0?(gn().b[29][0]++,s):(gn().b[29][1]++,i),onChange:this.onChangeRange,onKeyDown:()=>{gn().f[7]++,gn().s[62]++,this._keyboardEvent=!0},onPointerDown:()=>{gn().f[8]++,gn().s[63]++,this.setState({editing:!0,editingRange:!0})},onPointerUp:()=>{gn().f[9]++,gn().s[64]++,this.setState({editing:!1,editingRange:!1})},onBlur:()=>{gn().f[10]++,gn().s[65]++,this.setState({editing:!1,editingRange:!1,dirtyValue:this.state.value})},"data-wd-key":this.props["data-wd-key"]+"-range"},"range"),ue.jsx("input",{type:"text",spellCheck:"false",className:"maputnik-number",placeholder:(t=this.props.default)==null?void 0:t.toString(),value:l===void 0?(gn().b[30][0]++,""):(gn().b[30][1]++,l),onFocus:o=>{gn().f[11]++,gn().s[66]++,this.setState({editing:!0})},onChange:o=>{gn().f[12]++,gn().s[67]++,this.changeValue(o.target.value)},onBlur:o=>{gn().f[13]++,gn().s[68]++,this.setState({editing:!1}),gn().s[69]++,this.resetValue()},"data-wd-key":this.props["data-wd-key"]+"-text"},"text")]})}else{gn().b[24][1]++;const i=(gn().s[70]++,this.state.editing?(gn().b[31][0]++,this.state.dirtyValue):(gn().b[31][1]++,this.state.value));return gn().s[71]++,ue.jsx("input",{"aria-label":this.props["aria-label"],spellCheck:"false",className:"maputnik-number",placeholder:(r=this.props.default)==null?void 0:r.toString(),value:i===void 0?(gn().b[32][0]++,""):(gn().b[32][1]++,i),onChange:s=>(gn().f[14]++,gn().s[72]++,this.changeValue(s.target.value)),onFocus:()=>{gn().f[15]++,gn().s[73]++,this.setState({editing:!0})},onBlur:this.resetValue,required:this.props.required,"data-wd-key":this.props["data-wd-key"]})}}}Kn(rm,"defaultProps",(gn().s[0]++,{rangeStep:1}));function Lp(){var n="/home/runner/work/maputnik/maputnik/src/components/InputCheckbox.tsx",e="e85f7924976070cbab7795bce9cf0e191e4a6b5e",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputCheckbox.tsx",statementMap:{0:{start:{line:4,column:24},end:{line:6,column:3}},1:{start:{line:7,column:13},end:{line:9,column:3}},2:{start:{line:8,column:4},end:{line:8,column:43}},3:{start:{line:11,column:4},end:{line:26,column:9}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:13},end:{line:7,column:14}},loc:{start:{line:7,column:19},end:{line:9,column:3}},line:7},1:{name:"(anonymous_1)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:27,column:3}},line:10}},branchMap:{0:{loc:{start:{line:24,column:17},end:{line:24,column:53}},type:"cond-expr",locations:[{start:{line:24,column:36},end:{line:24,column:44}},{start:{line:24,column:47},end:{line:24,column:53}}],line:24}},s:{0:0,1:0,2:0,3:0},f:{0:0,1:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputCheckbox.tsx"],names:[],mappings:"AAkBW,SACL,KADK;AAlBX,OAAO,WAAW;AAQlB,qBAAqB,sBAAsB,MAAM,UAA8B;AAAA,EAC7E,OAAO,eAAe;AAAA,IACpB,OAAO;AAAA,EACT;AAAA,EAEA,WAAW,MAAM;AACf,SAAK,MAAM,SAAS,CAAC,KAAK,MAAM,KAAK;AAAA,EACvC;AAAA,EAEA,SAAS;AACP,WAAO,qBAAC,SAAI,WAAU,6BACpB;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,MAAK;AAAA,UACL,OAAO,KAAK,MAAM;AAAA,UAClB,UAAU,KAAK;AAAA,UACf,SAAS,KAAK;AAAA,UACd,SAAS,KAAK,MAAM;AAAA;AAAA,MACtB;AAAA,MACA,oBAAC,SAAI,WAAU,yBACb,8BAAC,SAAI,OAAO;AAAA,QACV,SAAS,KAAK,MAAM,QAAQ,WAAW;AAAA,MACzC,GAAG,WAAU,0BAAyB,SAAQ,aAC5C,8BAAC,UAAK,GAAE,2CAA0C,GACpD,GACF;AAAA,OACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e85f7924976070cbab7795bce9cf0e191e4a6b5e"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Lp=function(){return l},l}Lp();class NO extends Xn.Component{constructor(){super(...arguments);Kn(this,"onChange",(Lp().s[1]++,()=>{Lp().f[0]++,Lp().s[2]++,this.props.onChange(!this.props.value)}))}render(){return Lp().f[1]++,Lp().s[3]++,ue.jsxs("div",{className:"maputnik-checkbox-wrapper",children:[ue.jsx("input",{className:"maputnik-checkbox",type:"checkbox",style:this.props.style,onChange:this.onChange,onClick:this.onChange,checked:this.props.value}),ue.jsx("div",{className:"maputnik-checkbox-box",children:ue.jsx("svg",{style:{display:this.props.value?(Lp().b[0][0]++,"inline"):(Lp().b[0][1]++,"none")},className:"maputnik-checkbox-icon",viewBox:"0 0 32 32",children:ue.jsx("path",{d:"M1 14 L5 10 L13 18 L27 4 L31 8 L13 26 z"})})})]})}}Kn(NO,"defaultProps",(Lp().s[0]++,{value:!1}));function Hr(){var n="/home/runner/work/maputnik/maputnik/src/components/InputArray.tsx",e="9ed81d69001830f70ea45ac1502cde5125167d89",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputArray.tsx",statementMap:{0:{start:{line:6,column:24},end:{line:9,column:3}},1:{start:{line:11,column:4},end:{line:11,column:17}},2:{start:{line:12,column:4},end:{line:16,column:6}},3:{start:{line:19,column:18},end:{line:19,column:20}},4:{start:{line:20,column:30},end:{line:20,column:62}},5:{start:{line:21,column:4},end:{line:28,column:7}},6:{start:{line:22,column:6},end:{line:27,column:7}},7:{start:{line:23,column:8},end:{line:23,column:34}},8:{start:{line:25,column:8},end:{line:25,column:34}},9:{start:{line:26,column:8},end:{line:26,column:46}},10:{start:{line:29,column:4},end:{line:32,column:6}},11:{start:{line:35,column:4},end:{line:38,column:7}},12:{start:{line:36,column:18},end:{line:36,column:26}},13:{start:{line:37,column:6},end:{line:37,column:45}},14:{start:{line:41,column:18},end:{line:41,column:43}},15:{start:{line:42,column:4},end:{line:42,column:26}},16:{start:{line:43,column:4},end:{line:51,column:7}},17:{start:{line:46,column:6},end:{line:50,column:7}},18:{start:{line:47,column:8},end:{line:47,column:35}},19:{start:{line:48,column:13},end:{line:50,column:7}},20:{start:{line:49,column:8},end:{line:49,column:36}},21:{start:{line:54,column:22},end:{line:54,column:32}},22:{start:{line:55,column:27},end:{line:57,column:6}},23:{start:{line:56,column:6},end:{line:56,column:42}},24:{start:{line:58,column:19},end:{line:84,column:6}},25:{start:{line:59,column:6},end:{line:83,column:7}},26:{start:{line:60,column:8},end:{line:70,column:10}},27:{start:{line:66,column:29},end:{line:66,column:51}},28:{start:{line:72,column:8},end:{line:82,column:10}},29:{start:{line:85,column:4},end:{line:85,column:89}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:21},end:{line:17,column:3}},line:10},1:{name:"(anonymous_1)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:48},end:{line:33,column:3}},line:18},2:{name:"(anonymous_2)",decl:{start:{line:21,column:39},end:{line:21,column:40}},loc:{start:{line:21,column:49},end:{line:28,column:5}},line:21},3:{name:"(anonymous_3)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:20},end:{line:39,column:3}},line:34},4:{name:"(anonymous_4)",decl:{start:{line:35,column:53},end:{line:35,column:54}},loc:{start:{line:35,column:63},end:{line:38,column:5}},line:35},5:{name:"(anonymous_5)",decl:{start:{line:40,column:2},end:{line:40,column:3}},loc:{start:{line:40,column:29},end:{line:52,column:3}},line:40},6:{name:"(anonymous_6)",decl:{start:{line:45,column:7},end:{line:45,column:8}},loc:{start:{line:45,column:13},end:{line:51,column:5}},line:45},7:{name:"(anonymous_7)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:11},end:{line:86,column:3}},line:53},8:{name:"(anonymous_8)",decl:{start:{line:55,column:60},end:{line:55,column:61}},loc:{start:{line:55,column:69},end:{line:57,column:5}},line:55},9:{name:"(anonymous_9)",decl:{start:{line:58,column:59},end:{line:58,column:60}},loc:{start:{line:58,column:69},end:{line:84,column:5}},line:58},10:{name:"(anonymous_10)",decl:{start:{line:66,column:22},end:{line:66,column:23}},loc:{start:{line:66,column:29},end:{line:66,column:51}},line:66}},branchMap:{0:{loc:{start:{line:22,column:6},end:{line:27,column:7}},type:"if",locations:[{start:{line:22,column:6},end:{line:27,column:7}},{start:{line:24,column:13},end:{line:27,column:7}}],line:22},1:{loc:{start:{line:37,column:15},end:{line:37,column:43}},type:"binary-expr",locations:[{start:{line:37,column:15},end:{line:37,column:29}},{start:{line:37,column:33},end:{line:37,column:43}}],line:37},2:{loc:{start:{line:46,column:6},end:{line:50,column:7}},type:"if",locations:[{start:{line:46,column:6},end:{line:50,column:7}},{start:{line:48,column:13},end:{line:50,column:7}}],line:46},3:{loc:{start:{line:46,column:10},end:{line:46,column:55}},type:"binary-expr",locations:[{start:{line:46,column:10},end:{line:46,column:32}},{start:{line:46,column:36},end:{line:46,column:55}}],line:46},4:{loc:{start:{line:48,column:13},end:{line:50,column:7}},type:"if",locations:[{start:{line:48,column:13},end:{line:50,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:48},5:{loc:{start:{line:55,column:27},end:{line:57,column:6}},type:"binary-expr",locations:[{start:{line:55,column:27},end:{line:55,column:43}},{start:{line:55,column:47},end:{line:57,column:6}}],line:55},6:{loc:{start:{line:56,column:13},end:{line:56,column:41}},type:"binary-expr",locations:[{start:{line:56,column:13},end:{line:56,column:23}},{start:{line:56,column:27},end:{line:56,column:41}}],line:56},7:{loc:{start:{line:59,column:6},end:{line:83,column:7}},type:"if",locations:[{start:{line:59,column:6},end:{line:83,column:7}},{start:{line:71,column:13},end:{line:83,column:7}}],line:59},8:{loc:{start:{line:63,column:21},end:{line:63,column:91}},type:"cond-expr",locations:[{start:{line:63,column:61},end:{line:63,column:67}},{start:{line:63,column:70},end:{line:63,column:91}}],line:63},9:{loc:{start:{line:63,column:21},end:{line:63,column:58}},type:"binary-expr",locations:[{start:{line:63,column:21},end:{line:63,column:35}},{start:{line:63,column:39},end:{line:63,column:58}}],line:63},10:{loc:{start:{line:65,column:22},end:{line:65,column:51}},type:"cond-expr",locations:[{start:{line:65,column:39},end:{line:65,column:43}},{start:{line:65,column:46},end:{line:65,column:51}}],line:65},11:{loc:{start:{line:67,column:26},end:{line:67,column:70}},type:"binary-expr",locations:[{start:{line:67,column:26},end:{line:67,column:50}},{start:{line:67,column:54},end:{line:67,column:70}}],line:67},12:{loc:{start:{line:75,column:21},end:{line:75,column:91}},type:"cond-expr",locations:[{start:{line:75,column:61},end:{line:75,column:67}},{start:{line:75,column:70},end:{line:75,column:91}}],line:75},13:{loc:{start:{line:75,column:21},end:{line:75,column:58}},type:"binary-expr",locations:[{start:{line:75,column:21},end:{line:75,column:35}},{start:{line:75,column:39},end:{line:75,column:58}}],line:75},14:{loc:{start:{line:77,column:22},end:{line:77,column:51}},type:"cond-expr",locations:[{start:{line:77,column:39},end:{line:77,column:43}},{start:{line:77,column:46},end:{line:77,column:51}}],line:77},15:{loc:{start:{line:79,column:26},end:{line:79,column:70}},type:"binary-expr",locations:[{start:{line:79,column:26},end:{line:79,column:50}},{start:{line:79,column:54},end:{line:79,column:70}}],line:79}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputArray.tsx"],names:[],mappings:"AA0Fe;AA1Ff,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AAiBxB,qBAAqB,mBAAmB,MAAM,UAA4C;AAAA,EACxF,OAAO,eAAe;AAAA,IACpB,OAAO,CAAC;AAAA,IACR,SAAS,CAAC;AAAA,EACZ;AAAA,EAEA,YAAa,OAAwB;AACnC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,OAAO,KAAK,MAAM,MAAM,MAAM,CAAC;AAAA;AAAA,MAE/B,mBAAmB,KAAK,MAAM,MAAM,MAAM,CAAC;AAAA,IAC7C;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAAkC,OAAwB;AACxF,UAAM,QAAe,CAAC;AACtB,UAAM,oBAAoB,MAAM,kBAAkB,MAAM,CAAC;AAEzD,UAAM,MAAM,MAAM,EAAE,KAAK,IAAI,EAAE,IAAI,CAAC,GAAG,MAAM;AAC3C,UAAI,MAAM,MAAM,CAAC,MAAM,MAAM,kBAAkB,CAAC,GAAG;AACjD,cAAM,CAAC,IAAI,MAAM,MAAM,CAAC;AAAA,MAC1B,OACK;AACH,cAAM,CAAC,IAAI,MAAM,MAAM,CAAC;AACxB,0BAAkB,CAAC,IAAI,MAAM,MAAM,CAAC;AAAA,MACtC;AAAA,IACF,CAAC;AAED,WAAO;AAAA,MACL;AAAA,MACA;AAAA,IACF;AAAA,EACF;AAAA,EAEA,WAAW,OAAkB;AAC3B,WAAO,MAAM,KAAK,MAAM,MAAM,EAAE,KAAK,IAAI,EAAE,MAAM,CAAC,GAAG,MAAM;AACzD,YAAM,MAAM,MAAM,CAAC;AACnB,aAAO,EAAE,QAAQ,UAAa,QAAQ;AAAA,IACxC,CAAC;AAAA,EACH;AAAA,EAEA,YAAY,KAAa,UAAuC;AAC9D,UAAM,QAAQ,KAAK,MAAM,MAAM,MAAM,CAAC;AACtC,UAAM,GAAG,IAAI;AAEb,SAAK,SAAS;AAAA,MACZ;AAAA,IACF,GAAG,MAAM;AACP,UAAI,KAAK,WAAW,KAAK,KAAK,KAAK,MAAM,UAAU;AACjD,aAAK,MAAM,SAAS,KAAK;AAAA,MAC3B,WACS,KAAK,MAAM,UAAS;AAE3B,aAAK,MAAM,SAAS,MAAS;AAAA,MAC/B;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,MAAK,IAAI,KAAK;AAErB,UAAM,iBACJ,MAAM,SAAS,KACf,CAAC,MAAM,MAAM,SAAO;AAClB,aAAQ,QAAQ,MAAM,QAAQ;AAAA,IAChC,CAAC;AAGH,UAAM,SAAS,MAAM,KAAK,MAAM,MAAM,EAAE,KAAK,IAAI,EAAE,IAAI,CAAC,GAAG,MAAM;AAC/D,UAAG,KAAK,MAAM,SAAS,UAAU;AAC/B,eAAO;AAAA,UAAC;AAAA;AAAA,YAEN,SAAS,kBAAkB,CAAC,KAAK,MAAM,UAAU,SAAY,KAAK,MAAM,QAAQ,CAAC;AAAA,YACjF,OAAO,MAAM,CAAC;AAAA,YACd,UAAU,iBAAiB,OAAO;AAAA,YAClC,UAAU,CAAC,MAAM,KAAK,YAAY,GAAG,CAAC;AAAA,YACtC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,UAL9C;AAAA,QAMP;AAAA,MACF,OAAO;AACL,eAAO;AAAA,UAAC;AAAA;AAAA,YAEN,SAAS,kBAAkB,CAAC,KAAK,MAAM,UAAU,SAAY,KAAK,MAAM,QAAQ,CAAC;AAAA,YACjF,OAAO,MAAM,CAAC;AAAA,YACd,UAAU,iBAAiB,OAAO;AAAA,YAClC,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,UAL9C;AAAA,QAMP;AAAA,MACF;AAAA,IACF,CAAC;AAED,WACE,oBAAC,SAAI,WAAU,kBACZ,kBACH;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"9ed81d69001830f70ea45ac1502cde5125167d89"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Hr=function(){return l},l}Hr();var CE;let _j=(CE=class extends Xn.Component{constructor(e){Hr().f[0]++,Hr().s[1]++,super(e),Hr().s[2]++,this.state={value:this.props.value.slice(0),initialPropsValue:this.props.value.slice(0)}}static getDerivedStateFromProps(e,t){Hr().f[1]++;const r=(Hr().s[3]++,[]),i=(Hr().s[4]++,t.initialPropsValue.slice(0));return Hr().s[5]++,Array(e.length).fill(null).map((s,l)=>{Hr().f[2]++,Hr().s[6]++,e.value[l]===t.initialPropsValue[l]?(Hr().b[0][0]++,Hr().s[7]++,r[l]=t.value[l]):(Hr().b[0][1]++,Hr().s[8]++,r[l]=t.value[l],Hr().s[9]++,i[l]=t.value[l])}),Hr().s[10]++,{value:r,initialPropsValue:i}}isComplete(e){return Hr().f[3]++,Hr().s[11]++,Array(this.props.length).fill(null).every((t,r)=>{Hr().f[4]++;const i=(Hr().s[12]++,e[r]);return Hr().s[13]++,Hr().b[1][0]++,!(i===void 0||(Hr().b[1][1]++,i===""))})}changeValue(e,t){Hr().f[5]++;const r=(Hr().s[14]++,this.state.value.slice(0));Hr().s[15]++,r[e]=t,Hr().s[16]++,this.setState({value:r},()=>{Hr().f[6]++,Hr().s[17]++,Hr().b[3][0]++,this.isComplete(r)&&(Hr().b[3][1]++,this.props.onChange)?(Hr().b[2][0]++,Hr().s[18]++,this.props.onChange(r)):(Hr().b[2][1]++,Hr().s[19]++,this.props.onChange?(Hr().b[4][0]++,Hr().s[20]++,this.props.onChange(void 0)):Hr().b[4][1]++)})}render(){Hr().f[7]++;const{value:e}=(Hr().s[21]++,this.state),t=(Hr().s[22]++,Hr().b[5][0]++,e.length>0&&(Hr().b[5][1]++,!e.every(i=>(Hr().f[8]++,Hr().s[23]++,Hr().b[6][0]++,i===""||(Hr().b[6][1]++,i===void 0))))),r=(Hr().s[24]++,Array(this.props.length).fill(null).map((i,s)=>(Hr().f[9]++,Hr().s[25]++,this.props.type==="number"?(Hr().b[7][0]++,Hr().s[26]++,ue.jsx(rm,{default:(Hr().b[9][0]++,t||(Hr().b[9][1]++,!this.props.default)?(Hr().b[8][0]++,void 0):(Hr().b[8][1]++,this.props.default[s])),value:e[s],required:t?(Hr().b[10][0]++,!0):(Hr().b[10][1]++,!1),onChange:l=>(Hr().f[10]++,Hr().s[27]++,this.changeValue(s,l)),"aria-label":(Hr().b[11][0]++,this.props["aria-label"]||(Hr().b[11][1]++,this.props.label))},s)):(Hr().b[7][1]++,Hr().s[28]++,ue.jsx(Rf,{default:(Hr().b[13][0]++,t||(Hr().b[13][1]++,!this.props.default)?(Hr().b[12][0]++,void 0):(Hr().b[12][1]++,this.props.default[s])),value:e[s],required:t?(Hr().b[14][0]++,!0):(Hr().b[14][1]++,!1),onChange:this.changeValue.bind(this,s),"aria-label":(Hr().b[15][0]++,this.props["aria-label"]||(Hr().b[15][1]++,this.props.label))},s)))));return Hr().s[29]++,ue.jsx("div",{className:"maputnik-array",children:r})}},Kn(CE,"defaultProps",(Hr().s[0]++,{value:[],default:[]})),CE);function oA(){var n="/home/runner/work/maputnik/maputnik/src/components/InputMultiInput.tsx",e="c4660c9ecb80d9f1ce71e70441154e1e765b77ab",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputMultiInput.tsx",statementMap:{0:{start:{line:6,column:18},end:{line:6,column:36}},1:{start:{line:7,column:4},end:{line:9,column:5}},2:{start:{line:8,column:6},end:{line:8,column:43}},3:{start:{line:8,column:35},end:{line:8,column:41}},4:{start:{line:10,column:26},end:{line:10,column:59}},5:{start:{line:11,column:19},end:{line:32,column:6}},6:{start:{line:12,column:6},end:{line:31,column:8}},7:{start:{line:22,column:34},end:{line:22,column:58}},8:{start:{line:33,column:4},end:{line:33,column:140}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:34,column:3}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:8,column:28},end:{line:8,column:29}},loc:{start:{line:8,column:35},end:{line:8,column:41}},line:8},2:{name:"(anonymous_2)",decl:{start:{line:11,column:31},end:{line:11,column:32}},loc:{start:{line:11,column:49},end:{line:32,column:5}},line:11},3:{name:"(anonymous_3)",decl:{start:{line:22,column:26},end:{line:22,column:27}},loc:{start:{line:22,column:34},end:{line:22,column:58}},line:22}},branchMap:{0:{loc:{start:{line:7,column:4},end:{line:9,column:5}},type:"if",locations:[{start:{line:7,column:4},end:{line:9,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:7},1:{loc:{start:{line:7,column:8},end:{line:7,column:56}},type:"binary-expr",locations:[{start:{line:7,column:8},end:{line:7,column:26}},{start:{line:7,column:30},end:{line:7,column:56}}],line:7},2:{loc:{start:{line:10,column:26},end:{line:10,column:59}},type:"binary-expr",locations:[{start:{line:10,column:26},end:{line:10,column:42}},{start:{line:10,column:46},end:{line:10,column:59}}],line:10}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},f:{0:0,1:0,2:0,3:0},b:{0:[0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputMultiInput.tsx"],names:[],mappings:"AAoBa,SAIL,KAJK;AApBb,OAAO,WAAW;AAClB,OAAO,gBAAgB;AAUvB,qBAAqB,wBAAwB,MAAM,UAAgC;AAAA,EACjF,SAAS;AACP,QAAI,UAAU,KAAK,MAAM;AACzB,QAAG,QAAQ,SAAS,KAAK,CAAC,MAAM,QAAQ,QAAQ,CAAC,CAAC,GAAG;AACnD,gBAAU,QAAQ,IAAI,OAAK,CAAC,GAAG,CAAC,CAAC;AAAA,IACnC;AAEA,UAAM,gBAAgB,KAAK,MAAM,SAAS,QAAQ,CAAC,EAAE,CAAC;AACtD,UAAM,SAAS,QAAQ,IAAI,CAAC,CAAC,KAAK,KAAK,MAAK;AAC1C,aAAO;AAAA,QAAC;AAAA;AAAA,UAEN,WAAW,WAAW,4BAA4B,EAAC,4BAA4B,QAAQ,cAAa,CAAC;AAAA,UAErG;AAAA;AAAA,cAAC;AAAA;AAAA,gBAAM,MAAK;AAAA,gBACV,MAAM,KAAK,MAAM;AAAA,gBACjB,UAAU,QAAM,KAAK,MAAM,SAAS,GAAG;AAAA,gBACvC,OAAO;AAAA,gBACP,SAAS,QAAQ;AAAA;AAAA,YACnB;AAAA,YACC;AAAA;AAAA;AAAA,QATI;AAAA,MAUP;AAAA,IACF,CAAC;AAED,WAAO,oBAAC,cAAS,WAAU,wBAAuB,cAAY,KAAK,MAAM,YAAY,GAClF,kBACH;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"c4660c9ecb80d9f1ce71e70441154e1e765b77ab"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return oA=function(){return l},l}oA();class ale extends Xn.Component{render(){oA().f[0]++;let e=(oA().s[0]++,this.props.options);oA().s[1]++,oA().b[1][0]++,e.length>0&&(oA().b[1][1]++,!Array.isArray(e[0]))?(oA().b[0][0]++,oA().s[2]++,e=e.map(i=>(oA().f[1]++,oA().s[3]++,[i,i]))):oA().b[0][1]++;const t=(oA().s[4]++,oA().b[2][0]++,this.props.value||(oA().b[2][1]++,e[0][0])),r=(oA().s[5]++,e.map(([i,s])=>(oA().f[2]++,oA().s[6]++,ue.jsxs("label",{className:tm("maputnik-radio-as-button",{"maputnik-button-selected":i===t}),children:[ue.jsx("input",{type:"radio",name:this.props.name,onChange:l=>(oA().f[3]++,oA().s[7]++,this.props.onChange(i)),value:i,checked:i===t}),s]},i))));return oA().s[8]++,ue.jsx("fieldset",{className:"maputnik-multibutton","aria-label":this.props["aria-label"],children:r})}}function Pl(){var n="/home/runner/work/maputnik/maputnik/src/components/InputEnum.tsx",e="d905b5da4422f2b84d44f87b04fda3de421542f5",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputEnum.tsx",statementMap:{0:{start:{line:6,column:12},end:{line:6,column:13}},1:{start:{line:7,column:2},end:{line:9,column:5}},2:{start:{line:8,column:4},end:{line:8,column:24}},3:{start:{line:10,column:2},end:{line:10,column:13}},4:{start:{line:14,column:54},end:{line:14,column:64}},5:{start:{line:15,column:4},end:{line:36,column:5}},6:{start:{line:16,column:6},end:{line:25,column:8}},7:{start:{line:27,column:6},end:{line:35,column:8}}},fnMap:{0:{name:"optionsLabelLength",decl:{start:{line:5,column:9},end:{line:5,column:27}},loc:{start:{line:5,column:37},end:{line:11,column:1}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:7,column:18},end:{line:7,column:19}},loc:{start:{line:7,column:34},end:{line:9,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:13,column:2},end:{line:13,column:3}},loc:{start:{line:13,column:11},end:{line:37,column:3}},line:13}},branchMap:{0:{loc:{start:{line:15,column:4},end:{line:36,column:5}},type:"if",locations:[{start:{line:15,column:4},end:{line:36,column:5}},{start:{line:26,column:11},end:{line:36,column:5}}],line:15},1:{loc:{start:{line:15,column:8},end:{line:15,column:64}},type:"binary-expr",locations:[{start:{line:15,column:8},end:{line:15,column:27}},{start:{line:15,column:31},end:{line:15,column:64}}],line:15},2:{loc:{start:{line:21,column:17},end:{line:21,column:44}},type:"binary-expr",locations:[{start:{line:21,column:17},end:{line:21,column:22}},{start:{line:21,column:26},end:{line:21,column:44}}],line:21},3:{loc:{start:{line:23,column:24},end:{line:23,column:57}},type:"binary-expr",locations:[{start:{line:23,column:24},end:{line:23,column:48}},{start:{line:23,column:52},end:{line:23,column:57}}],line:23},4:{loc:{start:{line:31,column:17},end:{line:31,column:44}},type:"binary-expr",locations:[{start:{line:31,column:17},end:{line:31,column:22}},{start:{line:31,column:26},end:{line:31,column:44}}],line:31},5:{loc:{start:{line:33,column:24},end:{line:33,column:57}},type:"binary-expr",locations:[{start:{line:33,column:24},end:{line:33,column:48}},{start:{line:33,column:52},end:{line:33,column:57}}],line:33}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},f:{0:0,1:0,2:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputEnum.tsx"],names:[],mappings:"AAgCa;AAhCb,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,qBAAqB;AAG5B,SAAS,mBAAmB,SAAgB;AAC1C,MAAI,MAAM;AACV,UAAQ,QAAQ,CAAC,CAAC,GAAG,KAAK,MAAM;AAC9B,WAAO,MAAM;AAAA,EACf,CAAC;AACD,SAAO;AACT;AAgBA,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,SAAS;AACP,UAAM,EAAC,SAAS,OAAO,UAAU,MAAM,MAAK,IAAI,KAAK;AAErD,QAAG,QAAQ,UAAU,KAAK,mBAAmB,OAAO,KAAK,IAAI;AAC3D,aAAO;AAAA,QAAC;AAAA;AAAA,UACN;AAAA,UACA;AAAA,UACA,OAAQ,SAAS,KAAK,MAAM;AAAA,UAC5B;AAAA,UACA,cAAY,KAAK,MAAM,YAAY,KAAK;AAAA;AAAA,MAC1C;AAAA,IACF,OAAO;AACL,aAAO;AAAA,QAAC;AAAA;AAAA,UACN;AAAA,UACA,OAAQ,SAAS,KAAK,MAAM;AAAA,UAC5B;AAAA,UACA,cAAY,KAAK,MAAM,YAAY,KAAK;AAAA;AAAA,MAC1C;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d905b5da4422f2b84d44f87b04fda3de421542f5"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Pl=function(){return l},l}Pl();function lle(n){Pl().f[0]++;let e=(Pl().s[0]++,0);return Pl().s[1]++,n.forEach(([t,r])=>{Pl().f[1]++,Pl().s[2]++,e+=r.length}),Pl().s[3]++,e}class WO extends Xn.Component{render(){Pl().f[2]++;const{options:e,value:t,onChange:r,name:i,label:s}=(Pl().s[4]++,this.props);return Pl().s[5]++,Pl().b[1][0]++,e.length<=3&&(Pl().b[1][1]++,lle(e)<=20)?(Pl().b[0][0]++,Pl().s[6]++,ue.jsx(ale,{name:i,options:e,value:(Pl().b[2][0]++,t||(Pl().b[2][1]++,this.props.default)),onChange:r,"aria-label":(Pl().b[3][0]++,this.props["aria-label"]||(Pl().b[3][1]++,s))})):(Pl().b[0][1]++,Pl().s[7]++,ue.jsx(Hg,{options:e,value:(Pl().b[4][0]++,t||(Pl().b[4][1]++,this.props.default)),onChange:r,"aria-label":(Pl().b[5][0]++,this.props["aria-label"]||(Pl().b[5][1]++,s))}))}}function my(){var n="/home/runner/work/maputnik/maputnik/src/components/SmallError.tsx",e="d603f5ded455e8f3bb5709d22f215a115aa4ac65",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/SmallError.tsx",statementMap:{0:{start:{line:7,column:14},end:{line:7,column:26}},1:{start:{line:8,column:4},end:{line:12,column:9}},2:{start:{line:15,column:19},end:{line:15,column:56}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:13,column:3}},line:6}},branchMap:{},s:{0:0,1:0,2:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/SmallError.tsx"],names:[],mappings:"AAaM;AAbN,OAAO,WAAW;AAClB,SAA0B,uBAAuB;AACjD,OAAO;AAOP,MAAM,2BAA2B,MAAM,UAAmC;AAAA,EACxE,SAAU;AACR,UAAM,IAAI,KAAK,MAAM;AACrB,WACE,qBAAC,SAAI,WAAU,cACZ;AAAA,QAAE,QAAQ;AAAA,MAAE;AAAA,MAAE,KAAK,MAAM;AAAA,OAC5B;AAAA,EAEJ;AACF;AAEA,MAAM,aAAa,gBAAgB,EAAE,kBAAkB;AACvD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d603f5ded455e8f3bb5709d22f215a115aa4ac65"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return my=function(){return l},l}my();class ule extends Xn.Component{render(){my().f[0]++;const e=(my().s[0]++,this.props.t);return my().s[1]++,ue.jsxs("div",{className:"SmallError",children:[e("Error:")," ",this.props.children]})}}const xS=(my().s[2]++,zs()(ule));function oo(){var n="/home/runner/work/maputnik/maputnik/src/components/InputUrl.tsx",e="b8761d76778c2aebcb896575c951cf64cf76ecb7",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputUrl.tsx",statementMap:{0:{start:{line:7,column:2},end:{line:9,column:3}},1:{start:{line:8,column:4},end:{line:8,column:11}},2:{start:{line:11,column:22},end:{line:18,column:3}},3:{start:{line:12,column:4},end:{line:17,column:5}},4:{start:{line:13,column:21},end:{line:13,column:34}},5:{start:{line:14,column:6},end:{line:14,column:29}},6:{start:{line:16,column:6},end:{line:16,column:20}},7:{start:{line:19,column:19},end:{line:19,column:35}},8:{start:{line:20,column:16},end:{line:20,column:53}},9:{start:{line:21,column:2},end:{line:41,column:3}},10:{start:{line:22,column:4},end:{line:34,column:5}},11:{start:{line:23,column:6},end:{line:26,column:14}},12:{start:{line:28,column:6},end:{line:33,column:14}},13:{start:{line:35,column:9},end:{line:41,column:3}},14:{start:{line:36,column:4},end:{line:40,column:12}},15:{start:{line:42,column:2},end:{line:42,column:15}},16:{start:{line:45,column:24},end:{line:48,column:3}},17:{start:{line:50,column:4},end:{line:50,column:17}},18:{start:{line:51,column:4},end:{line:53,column:6}},19:{start:{line:55,column:12},end:{line:60,column:3}},20:{start:{line:56,column:4},end:{line:58,column:7}},21:{start:{line:59,column:4},end:{line:59,column:52}},22:{start:{line:59,column:28},end:{line:59,column:52}},23:{start:{line:61,column:13},end:{line:66,column:3}},24:{start:{line:62,column:4},end:{line:64,column:7}},25:{start:{line:65,column:4},end:{line:65,column:29}},26:{start:{line:68,column:4},end:{line:79,column:9}},27:{start:{line:82,column:17},end:{line:82,column:52}}},fnMap:{0:{name:"validate",decl:{start:{line:6,column:9},end:{line:6,column:17}},loc:{start:{line:6,column:26},end:{line:43,column:1}},line:6},1:{name:"(anonymous_1)",decl:{start:{line:11,column:22},end:{line:11,column:23}},loc:{start:{line:11,column:32},end:{line:18,column:3}},line:11},2:{name:"(anonymous_2)",decl:{start:{line:46,column:13},end:{line:46,column:14}},loc:{start:{line:46,column:19},end:{line:47,column:5}},line:46},3:{name:"(anonymous_3)",decl:{start:{line:49,column:2},end:{line:49,column:3}},loc:{start:{line:49,column:21},end:{line:54,column:3}},line:49},4:{name:"(anonymous_4)",decl:{start:{line:55,column:12},end:{line:55,column:13}},loc:{start:{line:55,column:21},end:{line:60,column:3}},line:55},5:{name:"(anonymous_5)",decl:{start:{line:61,column:13},end:{line:61,column:14}},loc:{start:{line:61,column:22},end:{line:66,column:3}},line:61},6:{name:"(anonymous_6)",decl:{start:{line:67,column:2},end:{line:67,column:3}},loc:{start:{line:67,column:11},end:{line:80,column:3}},line:67}},branchMap:{0:{loc:{start:{line:7,column:2},end:{line:9,column:3}},type:"if",locations:[{start:{line:7,column:2},end:{line:9,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:7},1:{loc:{start:{line:21,column:2},end:{line:41,column:3}},type:"if",locations:[{start:{line:21,column:2},end:{line:41,column:3}},{start:{line:35,column:9},end:{line:41,column:3}}],line:21},2:{loc:{start:{line:22,column:4},end:{line:34,column:5}},type:"if",locations:[{start:{line:22,column:4},end:{line:34,column:5}},{start:{line:27,column:11},end:{line:34,column:5}}],line:22},3:{loc:{start:{line:35,column:9},end:{line:41,column:3}},type:"if",locations:[{start:{line:35,column:9},end:{line:41,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:35},4:{loc:{start:{line:35,column:13},end:{line:35,column:86}},type:"binary-expr",locations:[{start:{line:35,column:13},end:{line:35,column:21}},{start:{line:35,column:25},end:{line:35,column:45}},{start:{line:35,column:49},end:{line:35,column:86}}],line:35},5:{loc:{start:{line:59,column:4},end:{line:59,column:52}},type:"if",locations:[{start:{line:59,column:4},end:{line:59,column:52}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:59}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0,0],5:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputUrl.tsx"],names:["url"],mappings:"AA4BU,SAAoC,KAApC;AA5BV,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,gBAAgB;AACvB,SAAS,OAAwB,uBAAuB;AAGxD,SAAS,SAAS,KAAa,GAAuC;AACpE,MAAI,QAAQ,IAAI;AACd;AAAA,EACF;AAEA,MAAI;AACJ,QAAM,cAAc,CAACA,SAAgB;AACnC,QAAI;AACF,YAAM,SAAS,IAAI,IAAIA,IAAG;AAC1B,aAAO,OAAO;AAAA,IAChB,SACO,MAAM;AACX,aAAO;AAAA,IACT;AAAA,EACF;AACA,QAAM,WAAW,YAAY,GAAG;AAChC,QAAM,QAAQ,OAAO,SAAS,aAAa;AAE3C,MAAI,CAAC,UAAU;AACb,QAAI,OAAO;AACT,cACE,oBAAC,cACC,+BAAC,SAAM,GAAM;AAAA;AAAA,QAAuB,oBAAC,UAAK,sBAAQ;AAAA,SAAO,GAC3D;AAAA,IAEJ,OAAO;AACL,cACE,oBAAC,cACC,+BAAC,SAAM,GAAM;AAAA;AAAA,QAAuB,oBAAC,UAAK,qBAAO;AAAA,QAAO;AAAA,QAAI,oBAAC,UAAK,sBAAQ;AAAA,SAAO,GACnF;AAAA,IAEJ;AAAA,EACF,WAEE,YACA,aAAa,WACb,OAAO,SAAS,aAAa,UAC7B;AACA,YACE,oBAAC,cACC,+BAAC,SAAM,GAAM;AAAA;AAAA,MACwE,oBAAC,UAAK,sBAAQ;AAAA,MAAO;AAAA,OAC1G,GACF;AAAA,EAEJ;AAEA,SAAO;AACT;AAsBA,MAAM,yBAAyB,MAAM,UAAgD;AAAA,EACnF,OAAO,eAAe;AAAA,IACpB,SAAS,MAAM;AAAA,IAAC;AAAA,EAClB;AAAA,EAEA,YAAa,OAA8B;AACzC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,OAAO,SAAS,MAAM,OAAO,MAAM,CAAC;AAAA,IACtC;AAAA,EACF;AAAA,EAEA,UAAU,CAAC,QAAgB;AACzB,SAAK,SAAS;AAAA,MACZ,OAAO,SAAS,KAAK,KAAK,MAAM,CAAC;AAAA,IACnC,CAAC;AACD,QAAI,KAAK,MAAM,QAAS,MAAK,MAAM,QAAQ,GAAG;AAAA,EAChD;AAAA,EAEA,WAAW,CAAC,QAAgB;AAC1B,SAAK,SAAS;AAAA,MACZ,OAAO,SAAS,KAAK,KAAK,MAAM,CAAC;AAAA,IACnC,CAAC;AACD,SAAK,MAAM,SAAS,GAAG;AAAA,EACzB;AAAA,EAEA,SAAU;AACR,WACE,qBAAC,SACC;AAAA;AAAA,QAAC;AAAA;AAAA,UACE,GAAG,KAAK;AAAA,UACT,SAAS,KAAK;AAAA,UACd,UAAU,KAAK;AAAA,UACf,cAAY,KAAK,MAAM,YAAY;AAAA;AAAA,MACrC;AAAA,MACC,KAAK,MAAM;AAAA,OACd;AAAA,EAEJ;AACF;AAEA,MAAM,WAAW,gBAAgB,EAAE,gBAAgB;AACnD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"b8761d76778c2aebcb896575c951cf64cf76ecb7"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return oo=function(){return l},l}oo();function MS(n,e){if(oo().f[0]++,oo().s[0]++,n===""){oo().b[0][0]++,oo().s[1]++;return}else oo().b[0][1]++;let t;oo().s[2]++;const r=l=>{oo().f[1]++,oo().s[3]++;try{const o=(oo().s[4]++,new URL(l));return oo().s[5]++,o.protocol}catch{oo().s[6]++;return}},i=(oo().s[7]++,r(n)),s=(oo().s[8]++,window.location.protocol==="https:");return oo().s[9]++,i?(oo().b[1][1]++,oo().s[13]++,oo().b[4][0]++,i&&(oo().b[4][1]++,i==="http:")&&(oo().b[4][2]++,window.location.protocol==="https:")?(oo().b[3][0]++,oo().s[14]++,t=ue.jsx(xS,{children:ue.jsxs(R0,{t:e,children:["CORS policy won't allow fetching resources served over http from https, use a ",ue.jsx("code",{children:"https://"})," domain"]})})):oo().b[3][1]++):(oo().b[1][0]++,oo().s[10]++,s?(oo().b[2][0]++,oo().s[11]++,t=ue.jsx(xS,{children:ue.jsxs(R0,{t:e,children:["Must provide protocol: ",ue.jsx("code",{children:"https://"})]})})):(oo().b[2][1]++,oo().s[12]++,t=ue.jsx(xS,{children:ue.jsxs(R0,{t:e,children:["Must provide protocol: ",ue.jsx("code",{children:"http://"})," or ",ue.jsx("code",{children:"https://"})]})}))),oo().s[15]++,t}class bj extends Xn.Component{constructor(t){oo().f[3]++,oo().s[17]++;super(t);Kn(this,"onInput",(oo().s[19]++,t=>{oo().f[4]++,oo().s[20]++,this.setState({error:MS(t,this.props.t)}),oo().s[21]++,this.props.onInput?(oo().b[5][0]++,oo().s[22]++,this.props.onInput(t)):oo().b[5][1]++}));Kn(this,"onChange",(oo().s[23]++,t=>{oo().f[5]++,oo().s[24]++,this.setState({error:MS(t,this.props.t)}),oo().s[25]++,this.props.onChange(t)}));oo().s[18]++,this.state={error:MS(t.value,t.t)}}render(){return oo().f[6]++,oo().s[26]++,ue.jsxs("div",{children:[ue.jsx(Rf,{...this.props,onInput:this.onInput,onChange:this.onChange,"aria-label":this.props["aria-label"]}),this.state.error]})}}Kn(bj,"defaultProps",(oo().s[16]++,{onInput:()=>{oo().f[2]++}}));const GO=(oo().s[27]++,zs()(bj));function Fr(){var n="/home/runner/work/maputnik/maputnik/src/components/InputDynamicArray.tsx",e="b43f9efa2bc6409a39f030c91aca2fefba2121b9",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputDynamicArray.tsx",statementMap:{0:{start:{line:14,column:19},end:{line:14,column:39}},1:{start:{line:15,column:4},end:{line:15,column:27}},2:{start:{line:16,column:4},end:{line:16,column:57}},3:{start:{line:16,column:29},end:{line:16,column:57}},4:{start:{line:19,column:4},end:{line:19,column:56}},5:{start:{line:21,column:13},end:{line:35,column:3}},6:{start:{line:22,column:19},end:{line:22,column:39}},7:{start:{line:23,column:4},end:{line:33,column:5}},8:{start:{line:24,column:6},end:{line:24,column:21}},9:{start:{line:25,column:11},end:{line:33,column:5}},10:{start:{line:26,column:6},end:{line:26,column:22}},11:{start:{line:27,column:11},end:{line:33,column:5}},12:{start:{line:28,column:28},end:{line:28,column:38}},13:{start:{line:29,column:27},end:{line:29,column:59}},14:{start:{line:30,column:6},end:{line:30,column:32}},15:{start:{line:32,column:6},end:{line:32,column:22}},16:{start:{line:34,column:4},end:{line:34,column:57}},17:{start:{line:34,column:29},end:{line:34,column:57}},18:{start:{line:37,column:19},end:{line:37,column:39}},19:{start:{line:38,column:4},end:{line:38,column:31}},20:{start:{line:39,column:4},end:{line:39,column:86}},21:{start:{line:39,column:29},end:{line:39,column:86}},22:{start:{line:42,column:14},end:{line:42,column:26}},23:{start:{line:43,column:22},end:{line:43,column:77}},24:{start:{line:44,column:19},end:{line:104,column:6}},25:{start:{line:45,column:45},end:{line:51,column:7}},26:{start:{line:53,column:6},end:{line:91,column:7}},27:{start:{line:54,column:8},end:{line:61,column:10}},28:{start:{line:62,column:13},end:{line:91,column:7}},29:{start:{line:63,column:8},end:{line:70,column:10}},30:{start:{line:71,column:13},end:{line:91,column:7}},31:{start:{line:72,column:24},end:{line:72,column:99}},32:{start:{line:72,column:78},end:{line:72,column:98}},33:{start:{line:73,column:8},end:{line:81,column:10}},34:{start:{line:83,column:8},end:{line:90,column:10}},35:{start:{line:92,column:6},end:{line:103,column:8}},36:{start:{line:105,column:4},end:{line:115,column:9}},37:{start:{line:118,column:26},end:{line:118,column:70}},38:{start:{line:122,column:14},end:{line:122,column:26}},39:{start:{line:123,column:4},end:{line:136,column:6}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:13,column:2},end:{line:13,column:3}},loc:{start:{line:13,column:29},end:{line:17,column:3}},line:13},1:{name:"(anonymous_1)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:15},end:{line:20,column:3}},line:18},2:{name:"(anonymous_2)",decl:{start:{line:21,column:13},end:{line:21,column:14}},loc:{start:{line:21,column:19},end:{line:35,column:3}},line:21},3:{name:"(anonymous_3)",decl:{start:{line:36,column:2},end:{line:36,column:3}},loc:{start:{line:36,column:24},end:{line:40,column:3}},line:36},4:{name:"(anonymous_4)",decl:{start:{line:41,column:2},end:{line:41,column:3}},loc:{start:{line:41,column:11},end:{line:116,column:3}},line:41},5:{name:"(anonymous_5)",decl:{start:{line:44,column:35},end:{line:44,column:36}},loc:{start:{line:44,column:45},end:{line:104,column:5}},line:44},6:{name:"(anonymous_6)",decl:{start:{line:72,column:70},end:{line:72,column:71}},loc:{start:{line:72,column:78},end:{line:72,column:98}},line:72},7:{name:"(anonymous_7)",decl:{start:{line:121,column:2},end:{line:121,column:3}},loc:{start:{line:121,column:11},end:{line:137,column:3}},line:121}},branchMap:{0:{loc:{start:{line:16,column:4},end:{line:16,column:57}},type:"if",locations:[{start:{line:16,column:4},end:{line:16,column:57}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:16},1:{loc:{start:{line:19,column:11},end:{line:19,column:55}},type:"binary-expr",locations:[{start:{line:19,column:11},end:{line:19,column:27}},{start:{line:19,column:31},end:{line:19,column:49}},{start:{line:19,column:53},end:{line:19,column:55}}],line:19},2:{loc:{start:{line:23,column:4},end:{line:33,column:5}},type:"if",locations:[{start:{line:23,column:4},end:{line:33,column:5}},{start:{line:25,column:11},end:{line:33,column:5}}],line:23},3:{loc:{start:{line:25,column:11},end:{line:33,column:5}},type:"if",locations:[{start:{line:25,column:11},end:{line:33,column:5}},{start:{line:27,column:11},end:{line:33,column:5}}],line:25},4:{loc:{start:{line:27,column:11},end:{line:33,column:5}},type:"if",locations:[{start:{line:27,column:11},end:{line:33,column:5}},{start:{line:31,column:11},end:{line:33,column:5}}],line:27},5:{loc:{start:{line:34,column:4},end:{line:34,column:57}},type:"if",locations:[{start:{line:34,column:4},end:{line:34,column:57}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:34},6:{loc:{start:{line:39,column:4},end:{line:39,column:86}},type:"if",locations:[{start:{line:39,column:4},end:{line:39,column:86}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:39},7:{loc:{start:{line:39,column:49},end:{line:39,column:84}},type:"cond-expr",locations:[{start:{line:39,column:69},end:{line:39,column:75}},{start:{line:39,column:78},end:{line:39,column:84}}],line:39},8:{loc:{start:{line:53,column:6},end:{line:91,column:7}},type:"if",locations:[{start:{line:53,column:6},end:{line:91,column:7}},{start:{line:62,column:13},end:{line:91,column:7}}],line:53},9:{loc:{start:{line:59,column:26},end:{line:59,column:70}},type:"binary-expr",locations:[{start:{line:59,column:26},end:{line:59,column:50}},{start:{line:59,column:54},end:{line:59,column:70}}],line:59},10:{loc:{start:{line:62,column:13},end:{line:91,column:7}},type:"if",locations:[{start:{line:62,column:13},end:{line:91,column:7}},{start:{line:71,column:13},end:{line:91,column:7}}],line:62},11:{loc:{start:{line:68,column:26},end:{line:68,column:70}},type:"binary-expr",locations:[{start:{line:68,column:26},end:{line:68,column:50}},{start:{line:68,column:54},end:{line:68,column:70}}],line:68},12:{loc:{start:{line:71,column:13},end:{line:91,column:7}},type:"if",locations:[{start:{line:71,column:13},end:{line:91,column:7}},{start:{line:82,column:13},end:{line:91,column:7}}],line:71},13:{loc:{start:{line:79,column:26},end:{line:79,column:70}},type:"binary-expr",locations:[{start:{line:79,column:26},end:{line:79,column:50}},{start:{line:79,column:54},end:{line:79,column:70}}],line:79},14:{loc:{start:{line:88,column:26},end:{line:88,column:70}},type:"binary-expr",locations:[{start:{line:88,column:26},end:{line:88,column:50}},{start:{line:88,column:54},end:{line:88,column:70}}],line:88}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputDynamicArray.tsx"],names:["v"],mappings:"AAqE4B,cAoCf,YApCe;AArE5B,OAAO,WAAW;AAClB,OAAO,gBAAgB;AACvB,SAAQ,gBAAe;AACvB,SAA0B,uBAAuB;AAEjD,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,mBAAmB;AAC1B,OAAO,eAAe;AACtB,OAAO,cAAc;AAkBrB,MAAM,kCAAkC,MAAM,UAA0C;AAAA,EACtF,YAAY,KAAa,UAAuC;AAC9D,UAAM,SAAS,KAAK,OAAO,MAAM,CAAC;AAClC,WAAO,GAAG,IAAI;AACd,QAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,MAAM;AAAA,EACrD;AAAA,EAEA,IAAI,SAAS;AACX,WAAO,KAAK,MAAM,SAAS,KAAK,MAAM,WAAW,CAAC;AAAA,EACpD;AAAA,EAEA,WAAW,MAAM;AACf,UAAM,SAAS,KAAK,OAAO,MAAM,CAAC;AAClC,QAAI,KAAK,MAAM,SAAS,UAAU;AAChC,aAAO,KAAK,CAAC;AAAA,IACf,WACS,KAAK,MAAM,SAAS,OAAO;AAClC,aAAO,KAAK,EAAE;AAAA,IAChB,WACS,KAAK,MAAM,SAAS,QAAQ;AACnC,YAAM,EAAC,UAAS,IAAI,KAAK;AACzB,YAAM,eAAe,OAAO,KAAK,UAAW,MAAM,EAAE,CAAC;AACrD,aAAO,KAAK,YAAY;AAAA,IAC1B,OAAO;AACL,aAAO,KAAK,EAAE;AAAA,IAChB;AAEA,QAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,MAAM;AAAA,EACrD;AAAA,EAEA,YAAY,UAAkB;AAC5B,UAAM,SAAS,KAAK,OAAO,MAAM,CAAC;AAClC,WAAO,OAAO,UAAU,CAAC;AAEzB,QAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,OAAO,SAAS,IAAI,SAAS,MAAS;AAAA,EACrF;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,YAAY,EAAE,GAAG,MAAM,KAAK,MAAM,MAAM,QAAQ,KAAK,MAAM,OAAO;AACxE,UAAM,SAAS,KAAK,OAAO,IAAI,CAAC,GAAG,MAAM;AACvC,YAAM,iBAAgB;AAAA,QAAC;AAAA;AAAA,UACrB,SAAS,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,UACrC,GAAG;AAAA;AAAA,MACN;AACA,UAAI;AACJ,UAAG,KAAK,MAAM,SAAS,OAAO;AAC5B,gBAAQ;AAAA,UAAC;AAAA;AAAA,YACP,OAAO;AAAA,YACP,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,QACrD;AAAA,MACF,WACS,KAAK,MAAM,SAAS,UAAU;AACrC,gBAAQ;AAAA,UAAC;AAAA;AAAA,YACP,OAAO;AAAA,YACP,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,QACrD;AAAA,MACF,WACS,KAAK,MAAM,SAAS,QAAQ;AACnC,cAAM,UAAU,OAAO,KAAK,KAAK,MAAM,WAAW,MAAM,EAAE,IAAI,CAAAA,OAAK,CAACA,IAAG,WAAWA,EAAC,CAAC,CAAC;AACrF,gBAAQ;AAAA,UAAC;AAAA;AAAA,YACP;AAAA,YACA,OAAO;AAAA,YACP,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,QACrD;AAAA,MACF,OACK;AACH,gBAAQ;AAAA,UAAC;AAAA;AAAA,YACP,OAAO;AAAA,YACP,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,QACrD;AAAA,MACF;AAEA,aAAO;AAAA,QAAC;AAAA;AAAA,UACN,OAAO,KAAK,MAAM;AAAA,UAElB,WAAU;AAAA,UAEV;AAAA,gCAAC,SAAI,WAAU,+BACZ,0BACH;AAAA,YACA,oBAAC,SAAI,WAAU,gCACZ,iBACH;AAAA;AAAA;AAAA,QARK;AAAA,MASP;AAAA,IACF,CAAC;AAED,WACE,qBAAC,SAAI,WAAU,kBACZ;AAAA;AAAA,MACD;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,SAAS,KAAK;AAAA,UAEb,YAAE,WAAW;AAAA;AAAA,MAChB;AAAA,OACF;AAAA,EAEJ;AACF;AAEA,MAAM,oBAAoB,gBAAgB,EAAE,yBAAyB;AACrE,eAAe;AAMf,MAAM,+BAA+B,MAAM,UAAuC;AAAA,EAChF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,SAAS,KAAK,MAAM;AAAA,QACpB,OAAO,EAAE,mBAAmB;AAAA,QAE5B;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,oBAAC,YAAS;AAAA;AAAA,QACnB;AAAA;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"b43f9efa2bc6409a39f030c91aca2fefba2121b9"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Fr=function(){return l},l}Fr();class Ale extends Xn.Component{constructor(){super(...arguments);Kn(this,"addValue",(Fr().s[5]++,()=>{Fr().f[2]++;const t=(Fr().s[6]++,this.values.slice(0));if(Fr().s[7]++,this.props.type==="number")Fr().b[2][0]++,Fr().s[8]++,t.push(0);else if(Fr().b[2][1]++,Fr().s[9]++,this.props.type==="url")Fr().b[3][0]++,Fr().s[10]++,t.push("");else if(Fr().b[3][1]++,Fr().s[11]++,this.props.type==="enum"){Fr().b[4][0]++;const{fieldSpec:r}=(Fr().s[12]++,this.props),i=(Fr().s[13]++,Object.keys(r.values)[0]);Fr().s[14]++,t.push(i)}else Fr().b[4][1]++,Fr().s[15]++,t.push("");Fr().s[16]++,this.props.onChange?(Fr().b[5][0]++,Fr().s[17]++,this.props.onChange(t)):Fr().b[5][1]++}))}changeValue(t,r){Fr().f[0]++;const i=(Fr().s[0]++,this.values.slice(0));Fr().s[1]++,i[t]=r,Fr().s[2]++,this.props.onChange?(Fr().b[0][0]++,Fr().s[3]++,this.props.onChange(i)):Fr().b[0][1]++}get values(){return Fr().f[1]++,Fr().s[4]++,Fr().b[1][0]++,this.props.value||(Fr().b[1][1]++,this.props.default)||(Fr().b[1][2]++,[])}deleteValue(t){Fr().f[3]++;const r=(Fr().s[18]++,this.values.slice(0));Fr().s[19]++,r.splice(t,1),Fr().s[20]++,this.props.onChange?(Fr().b[6][0]++,Fr().s[21]++,this.props.onChange(r.length>0?(Fr().b[7][0]++,r):(Fr().b[7][1]++,void 0))):Fr().b[6][1]++}render(){Fr().f[4]++;const t=(Fr().s[22]++,this.props.t),r=(Fr().s[23]++,{t,i18n:this.props.i18n,tReady:this.props.tReady}),i=(Fr().s[24]++,this.values.map((s,l)=>{var y;Fr().f[5]++;const o=(Fr().s[25]++,ue.jsx(cle,{onClick:this.deleteValue.bind(this,l),...r}));let f;if(Fr().s[26]++,this.props.type==="url")Fr().b[8][0]++,Fr().s[27]++,f=ue.jsx(GO,{value:s,onChange:this.changeValue.bind(this,l),"aria-label":(Fr().b[9][0]++,this.props["aria-label"]||(Fr().b[9][1]++,this.props.label))});else if(Fr().b[8][1]++,Fr().s[28]++,this.props.type==="number")Fr().b[10][0]++,Fr().s[29]++,f=ue.jsx(rm,{value:s,onChange:this.changeValue.bind(this,l),"aria-label":(Fr().b[11][0]++,this.props["aria-label"]||(Fr().b[11][1]++,this.props.label))});else if(Fr().b[10][1]++,Fr().s[30]++,this.props.type==="enum"){Fr().b[12][0]++;const x=(Fr().s[31]++,Object.keys((y=this.props.fieldSpec)==null?void 0:y.values).map(B=>(Fr().f[6]++,Fr().s[32]++,[B,MO(B)])));Fr().s[33]++,f=ue.jsx(WO,{options:x,value:s,onChange:this.changeValue.bind(this,l),"aria-label":(Fr().b[13][0]++,this.props["aria-label"]||(Fr().b[13][1]++,this.props.label))})}else Fr().b[12][1]++,Fr().s[34]++,f=ue.jsx(Rf,{value:s,onChange:this.changeValue.bind(this,l),"aria-label":(Fr().b[14][0]++,this.props["aria-label"]||(Fr().b[14][1]++,this.props.label))});return Fr().s[35]++,ue.jsxs("div",{style:this.props.style,className:"maputnik-array-block",children:[ue.jsx("div",{className:"maputnik-array-block-action",children:o}),ue.jsx("div",{className:"maputnik-array-block-content",children:f})]},l)}));return Fr().s[36]++,ue.jsxs("div",{className:"maputnik-array",children:[i,ue.jsx(Ha,{className:"maputnik-array-add-value",onClick:this.addValue,children:t("Add value")})]})}}const xj=(Fr().s[37]++,zs()(Ale));class cle extends Xn.Component{render(){Fr().f[7]++;const e=(Fr().s[38]++,this.props.t);return Fr().s[39]++,ue.jsx(Ha,{className:"maputnik-delete-stop",onClick:this.props.onClick,title:e("Remove array item"),children:ue.jsx(gO,{label:ue.jsx(Uy,{})})})}}function aa(){var n="/home/runner/work/maputnik/maputnik/src/components/InputFont.tsx",e="cd16dc68fc42c219caf080518fd74984d4f8d81e",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputFont.tsx",statementMap:{0:{start:{line:5,column:24},end:{line:7,column:3}},1:{start:{line:9,column:16},end:{line:9,column:60}},2:{start:{line:10,column:4},end:{line:14,column:5}},3:{start:{line:11,column:6},end:{line:11,column:28}},4:{start:{line:13,column:6},end:{line:13,column:17}},5:{start:{line:17,column:26},end:{line:17,column:46}},6:{start:{line:18,column:4},end:{line:18,column:34}},7:{start:{line:19,column:27},end:{line:19,column:92}},8:{start:{line:19,column:55},end:{line:19,column:67}},9:{start:{line:19,column:83},end:{line:19,column:91}},10:{start:{line:20,column:4},end:{line:20,column:40}},11:{start:{line:23,column:19},end:{line:39,column:6}},12:{start:{line:24,column:6},end:{line:38,column:8}},13:{start:{line:32,column:52},end:{line:32,column:58}},14:{start:{line:40,column:4},end:{line:40,column:87}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:15},end:{line:15,column:3}},line:8},1:{name:"(anonymous_1)",decl:{start:{line:16,column:2},end:{line:16,column:3}},loc:{start:{line:16,column:28},end:{line:21,column:3}},line:16},2:{name:"(anonymous_2)",decl:{start:{line:19,column:48},end:{line:19,column:49}},loc:{start:{line:19,column:55},end:{line:19,column:67}},line:19},3:{name:"(anonymous_3)",decl:{start:{line:19,column:76},end:{line:19,column:77}},loc:{start:{line:19,column:83},end:{line:19,column:91}},line:19},4:{name:"(anonymous_4)",decl:{start:{line:22,column:2},end:{line:22,column:3}},loc:{start:{line:22,column:11},end:{line:41,column:3}},line:22},5:{name:"(anonymous_5)",decl:{start:{line:23,column:35},end:{line:23,column:36}},loc:{start:{line:23,column:49},end:{line:39,column:5}},line:23},6:{name:"(anonymous_6)",decl:{start:{line:32,column:45},end:{line:32,column:46}},loc:{start:{line:32,column:52},end:{line:32,column:58}},line:32}},branchMap:{0:{loc:{start:{line:9,column:16},end:{line:9,column:60}},type:"binary-expr",locations:[{start:{line:9,column:16},end:{line:9,column:32}},{start:{line:9,column:36},end:{line:9,column:54}},{start:{line:9,column:58},end:{line:9,column:60}}],line:9},1:{loc:{start:{line:10,column:4},end:{line:14,column:5}},type:"if",locations:[{start:{line:10,column:4},end:{line:14,column:5}},{start:{line:12,column:11},end:{line:14,column:5}}],line:10},2:{loc:{start:{line:30,column:28},end:{line:30,column:71}},type:"binary-expr",locations:[{start:{line:30,column:28},end:{line:30,column:52}},{start:{line:30,column:56},end:{line:30,column:71}}],line:30}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},b:{0:[0,0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputFont.tsx"],names:[],mappings:"AA6CQ;AA7CR,OAAO,WAAW;AAClB,OAAO,uBAAuB;AAY9B,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,OAAO,eAAe;AAAA,IACpB,OAAO,CAAC;AAAA,EACV;AAAA,EAEA,IAAI,SAAS;AACX,UAAM,MAAM,KAAK,MAAM,SAAS,KAAK,MAAM,WAAW,CAAC;AAGvD,QAAI,IAAI,IAAI,SAAO,CAAC,MAAM,IAAG;AAC3B,aAAO,IAAI,OAAO,EAAE;AAAA,IACtB,OACK;AACH,aAAO;AAAA,IACT;AAAA,EACF;AAAA,EAEA,WAAW,KAAa,UAAkB;AACxC,UAAM,gBAAgB,KAAK,OAAO,MAAM,CAAC;AACzC,kBAAc,GAAG,IAAI;AACrB,UAAM,iBAAiB,cACpB,OAAO,OAAK,MAAM,MAAS,EAC3B,OAAO,OAAK,MAAM,EAAE;AAEvB,SAAK,MAAM,SAAS,cAAc;AAAA,EACpC;AAAA,EAEA,SAAS;AACP,UAAM,SAAS,KAAK,OAAO,IAAI,CAAC,OAAO,MAAM;AAC3C,aAAO;AAAA,QAAC;AAAA;AAAA,UAGN;AAAA,YAAC;AAAA;AAAA,cACC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA,cACnD;AAAA,cACA,SAAS,KAAK,MAAM,OAAO,IAAI,OAAK,CAAC,GAAG,CAAC,CAAC;AAAA,cAC1C,UAAU,KAAK,WAAW,KAAK,MAAM,CAAC;AAAA;AAAA,UACxC;AAAA;AAAA,QAPK;AAAA,MAQP;AAAA,IACF,CAAC;AAED,WACE,oBAAC,QAAG,WAAU,iBACX,kBACH;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"cd16dc68fc42c219caf080518fd74984d4f8d81e"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return aa=function(){return l},l}aa();class Mj extends Xn.Component{get values(){aa().f[0]++;const e=(aa().s[1]++,aa().b[0][0]++,this.props.value||(aa().b[0][1]++,this.props.default)||(aa().b[0][2]++,[]));return aa().s[2]++,e[e.length-1]!==""?(aa().b[1][0]++,aa().s[3]++,e.concat("")):(aa().b[1][1]++,aa().s[4]++,e)}changeFont(e,t){aa().f[1]++;const r=(aa().s[5]++,this.values.slice(0));aa().s[6]++,r[e]=t;const i=(aa().s[7]++,r.filter(s=>(aa().f[2]++,aa().s[8]++,s!==void 0)).filter(s=>(aa().f[3]++,aa().s[9]++,s!=="")));aa().s[10]++,this.props.onChange(i)}render(){aa().f[4]++;const e=(aa().s[11]++,this.values.map((t,r)=>{var i;return aa().f[5]++,aa().s[12]++,ue.jsx("li",{children:ue.jsx(Qy,{"aria-label":(aa().b[2][0]++,this.props["aria-label"]||(aa().b[2][1]++,this.props.name)),value:t,options:(i=this.props.fonts)==null?void 0:i.map(s=>(aa().f[6]++,aa().s[13]++,[s,s])),onChange:this.changeFont.bind(this,r)})},r)}));return aa().s[14]++,ue.jsx("ul",{className:"maputnik-font",children:e})}}Kn(Mj,"defaultProps",(aa().s[0]++,{fonts:[]}));function co(){var n="/home/runner/work/maputnik/maputnik/src/components/InputSpec.tsx",e="8a7e9c26497bbcdc9141a7bf10d3ed50f729d679",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputSpec.tsx",statementMap:{0:{start:{line:13,column:23},end:{line:13,column:117}},1:{start:{line:16,column:24},end:{line:28,column:5}},2:{start:{line:26,column:30},end:{line:26,column:81}},3:{start:{line:29,column:4},end:{line:115,column:5}},4:{start:{line:31,column:8},end:{line:38,column:10}},5:{start:{line:40,column:24},end:{line:40,column:101}},6:{start:{line:40,column:82},end:{line:40,column:100}},7:{start:{line:41,column:8},end:{line:47,column:10}},8:{start:{line:52,column:8},end:{line:68,column:9}},9:{start:{line:53,column:26},end:{line:53,column:59}},10:{start:{line:54,column:10},end:{line:60,column:12}},11:{start:{line:58,column:42},end:{line:58,column:48}},12:{start:{line:62,column:10},end:{line:67,column:12}},13:{start:{line:70,column:8},end:{line:75,column:10}},14:{start:{line:77,column:8},end:{line:82,column:10}},15:{start:{line:84,column:8},end:{line:112,column:9}},16:{start:{line:85,column:10},end:{line:91,column:12}},17:{start:{line:93,column:10},end:{line:111,column:11}},18:{start:{line:94,column:12},end:{line:101,column:14}},19:{start:{line:103,column:12},end:{line:110,column:14}},20:{start:{line:114,column:8},end:{line:114,column:20}},21:{start:{line:118,column:4},end:{line:118,column:124}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:15},end:{line:116,column:3}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:26,column:16},end:{line:26,column:17}},loc:{start:{line:26,column:30},end:{line:26,column:81}},line:26},2:{name:"(anonymous_2)",decl:{start:{line:40,column:75},end:{line:40,column:76}},loc:{start:{line:40,column:82},end:{line:40,column:100}},line:40},3:{name:"(anonymous_3)",decl:{start:{line:58,column:35},end:{line:58,column:36}},loc:{start:{line:58,column:42},end:{line:58,column:48}},line:58},4:{name:"(anonymous_4)",decl:{start:{line:117,column:2},end:{line:117,column:3}},loc:{start:{line:117,column:11},end:{line:119,column:3}},line:117}},branchMap:{0:{loc:{start:{line:29,column:4},end:{line:115,column:5}},type:"switch",locations:[{start:{line:30,column:6},end:{line:38,column:10}},{start:{line:39,column:6},end:{line:48,column:7}},{start:{line:49,column:6},end:{line:49,column:27}},{start:{line:50,column:6},end:{line:50,column:23}},{start:{line:51,column:6},end:{line:68,column:9}},{start:{line:69,column:6},end:{line:75,column:10}},{start:{line:76,column:6},end:{line:82,column:10}},{start:{line:83,column:6},end:{line:112,column:9}},{start:{line:113,column:6},end:{line:114,column:20}}],line:29},1:{loc:{start:{line:40,column:36},end:{line:40,column:69}},type:"binary-expr",locations:[{start:{line:40,column:36},end:{line:40,column:63}},{start:{line:40,column:67},end:{line:40,column:69}}],line:40},2:{loc:{start:{line:52,column:8},end:{line:68,column:9}},type:"if",locations:[{start:{line:52,column:8},end:{line:68,column:9}},{start:{line:61,column:15},end:{line:68,column:9}}],line:52},3:{loc:{start:{line:53,column:26},end:{line:53,column:59}},type:"binary-expr",locations:[{start:{line:53,column:26},end:{line:53,column:53}},{start:{line:53,column:57},end:{line:53,column:59}}],line:53},4:{loc:{start:{line:84,column:8},end:{line:112,column:9}},type:"if",locations:[{start:{line:84,column:8},end:{line:112,column:9}},{start:{line:92,column:15},end:{line:112,column:9}}],line:84},5:{loc:{start:{line:93,column:10},end:{line:111,column:11}},type:"if",locations:[{start:{line:93,column:10},end:{line:111,column:11}},{start:{line:102,column:17},end:{line:111,column:11}}],line:93}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0,0,0,0,0,0,0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputSpec.tsx"],names:[],mappings:"AAyDM;AAzDN,OAAO,WAA6B;AAEpC,OAAO,gBAAqC;AAC5C,OAAO,iBAAuC;AAC9C,OAAO,mBAA2C;AAClD,OAAO,iBAAuC;AAC9C,OAAO,gBAAqC;AAC5C,OAAO,uBAAmD;AAC1D,OAAO,eAAmC;AAC1C,OAAO,uBAAmD;AAC1D,OAAO,eAAmC;AAC1C,OAAO,gBAAgB;AAEvB,MAAM,iBAAiB,CAAC,sBAAsB,gBAAgB,gBAAgB,0BAA0B,YAAY;AA0BpH,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EAErE,aAAa;AACX,UAAM,cAAc;AAAA,MAClB,OAAO,KAAK,MAAM;AAAA,MAClB,WAAW,KAAK,MAAM;AAAA,MACtB,OAAO,KAAK,MAAM;AAAA,MAClB,QAAQ,KAAK,MAAM;AAAA,MACnB,OAAO,KAAK,MAAM;AAAA,MAClB,OAAO,KAAK,MAAM;AAAA,MAClB,SAAS,KAAK,MAAM,WAAW;AAAA,MAC/B,MAAM,KAAK,MAAM;AAAA,MACjB,eAAe,sBAAsB,KAAK,MAAM;AAAA,MAChD,UAAU,CAAC,aAAmE,KAAK,MAAM,SAAU,KAAK,MAAM,WAAW,QAAQ;AAAA,MACjI,cAAc,KAAK,MAAM,YAAY;AAAA,IACvC;AACA,YAAO,KAAK,MAAM,WAAW,MAAM;AAAA,MACnC,KAAK;AAAU,eACb;AAAA,UAAC;AAAA;AAAA,YACE,GAAG;AAAA,YACJ,KAAK,KAAK,MAAM,UAAU;AAAA,YAC1B,KAAK,KAAK,MAAM,UAAU;AAAA;AAAA,QAC5B;AAAA,MAEF,KAAK,QAAQ;AACX,cAAM,UAAU,OAAO,KAAK,KAAK,MAAM,UAAU,UAAU,CAAC,CAAC,EAAE,IAAI,OAAK,CAAC,GAAG,WAAW,CAAC,CAAC,CAAC;AAE1F,eAAO;AAAA,UAAC;AAAA;AAAA,YACL,GAAG;AAAA,YACJ;AAAA;AAAA,QACF;AAAA,MACF;AAAA,MACA,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AACH,YAAI,eAAe,QAAQ,KAAK,MAAM,SAAU,KAAK,GAAG;AACtD,gBAAM,UAAU,KAAK,MAAM,UAAU,UAAU,CAAC;AAChD,iBAAO;AAAA,YAAC;AAAA;AAAA,cACL,GAAG;AAAA,cACJ,SAAS,QAAQ,IAAI,OAAK,CAAC,GAAG,CAAC,CAAC;AAAA;AAAA,UAClC;AAAA,QACF,OAAO;AACL,iBAAO;AAAA,YAAC;AAAA;AAAA,cACL,GAAG;AAAA;AAAA,UACN;AAAA,QACF;AAAA,MACF,KAAK;AAAS,eACZ;AAAA,UAAC;AAAA;AAAA,YACE,GAAG;AAAA;AAAA,QACN;AAAA,MAEF,KAAK;AAAW,eACd;AAAA,UAAC;AAAA;AAAA,YACE,GAAG;AAAA;AAAA,QACN;AAAA,MAEF,KAAK;AACH,YAAG,KAAK,MAAM,cAAc,aAAa;AACvC,iBAAO;AAAA,YAAC;AAAA;AAAA,cACL,GAAG;AAAA,cACJ,OAAO,KAAK,MAAM,UAAU;AAAA;AAAA,UAC9B;AAAA,QACF,OAAO;AACL,cAAI,KAAK,MAAM,UAAU,QAAQ;AAC/B,mBAAO;AAAA,cAAC;AAAA;AAAA,gBACL,GAAG;AAAA,gBACJ,MAAM,KAAK,MAAM,UAAU;AAAA,gBAC3B,QAAQ,KAAK,MAAM,UAAU;AAAA;AAAA,YAC/B;AAAA,UACF,OAAO;AACL,mBAAO;AAAA,cAAC;AAAA;AAAA,gBACL,GAAG;AAAA,gBACJ,WAAW,KAAK,MAAM;AAAA,gBACtB,MAAM,KAAK,MAAM,UAAU;AAAA;AAAA,YAC7B;AAAA,UACF;AAAA,QACF;AAAA,MACF;AAAS,eAAO;AAAA,IAChB;AAAA,EACF;AAAA,EAEA,SAAS;AACP,WACE,oBAAC,SAAI,eAAa,gBAAc,KAAK,MAAM,WACxC,eAAK,WAAW,GACnB;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8a7e9c26497bbcdc9141a7bf10d3ed50f729d679"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return co=function(){return l},l}co();const dle=(co().s[0]++,["background-pattern","fill-pattern","line-pattern","fill-extrusion-pattern","icon-image"]);let gy=class extends Xn.Component{childNodes(){var t,r;co().f[0]++;const e=(co().s[1]++,{error:this.props.error,fieldSpec:this.props.fieldSpec,label:this.props.label,action:this.props.action,style:this.props.style,value:this.props.value,default:(t=this.props.fieldSpec)==null?void 0:t.default,name:this.props.fieldName,"data-wd-key":"spec-field-input:"+this.props.fieldName,onChange:i=>(co().f[1]++,co().s[2]++,this.props.onChange(this.props.fieldName,i)),"aria-label":this.props["aria-label"]});switch(co().s[3]++,(r=this.props.fieldSpec)==null?void 0:r.type){case"number":return co().b[0][0]++,co().s[4]++,ue.jsx(rm,{...e,min:this.props.fieldSpec.minimum,max:this.props.fieldSpec.maximum});case"enum":co().b[0][1]++;{const i=(co().s[5]++,Object.keys((co().b[1][0]++,this.props.fieldSpec.values||(co().b[1][1]++,[]))).map(s=>(co().f[2]++,co().s[6]++,[s,MO(s)])));return co().s[7]++,ue.jsx(WO,{...e,options:i})}case"resolvedImage":co().b[0][2]++;case"formatted":co().b[0][3]++;case"string":if(co().b[0][4]++,co().s[8]++,dle.indexOf(this.props.fieldName)>=0){co().b[2][0]++;const i=(co().s[9]++,co().b[3][0]++,this.props.fieldSpec.values||(co().b[3][1]++,[]));return co().s[10]++,ue.jsx(Qy,{...e,options:i.map(s=>(co().f[3]++,co().s[11]++,[s,s]))})}else return co().b[2][1]++,co().s[12]++,ue.jsx(Rf,{...e});case"color":return co().b[0][5]++,co().s[13]++,ue.jsx(Cj,{...e});case"boolean":return co().b[0][6]++,co().s[14]++,ue.jsx(NO,{...e});case"array":return co().b[0][7]++,co().s[15]++,this.props.fieldName==="text-font"?(co().b[4][0]++,co().s[16]++,ue.jsx(Mj,{...e,fonts:this.props.fieldSpec.values})):(co().b[4][1]++,co().s[17]++,this.props.fieldSpec.length?(co().b[5][0]++,co().s[18]++,ue.jsx(_j,{...e,type:this.props.fieldSpec.value,length:this.props.fieldSpec.length})):(co().b[5][1]++,co().s[19]++,ue.jsx(xj,{...e,fieldSpec:this.props.fieldSpec,type:this.props.fieldSpec.value})));default:return co().b[0][8]++,co().s[20]++,null}}render(){return co().f[4]++,co().s[21]++,ue.jsx("div",{"data-wd-key":"spec-field:"+this.props.fieldName,children:this.childNodes()})}};function YA(){var n="/home/runner/work/maputnik/maputnik/src/components/Fieldset.tsx",e="81a841bc0059d656029a86501c08aa823d58e2d6",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/Fieldset.tsx",statementMap:{0:{start:{line:9,column:4},end:{line:9,column:17}},1:{start:{line:10,column:4},end:{line:10,column:56}},2:{start:{line:11,column:4},end:{line:13,column:6}},3:{start:{line:15,column:16},end:{line:19,column:3}},4:{start:{line:16,column:4},end:{line:18,column:7}},5:{start:{line:21,column:4},end:{line:41,column:9}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:21},end:{line:14,column:3}},line:8},1:{name:"(anonymous_1)",decl:{start:{line:15,column:16},end:{line:15,column:17}},loc:{start:{line:15,column:25},end:{line:19,column:3}},line:15},2:{name:"(anonymous_2)",decl:{start:{line:20,column:2},end:{line:20,column:3}},loc:{start:{line:20,column:11},end:{line:42,column:3}},line:20}},branchMap:{0:{loc:{start:{line:22,column:6},end:{line:29,column:10}},type:"binary-expr",locations:[{start:{line:22,column:6},end:{line:22,column:26}},{start:{line:22,column:46},end:{line:29,column:10}}],line:22},1:{loc:{start:{line:30,column:6},end:{line:30,column:130}},type:"binary-expr",locations:[{start:{line:30,column:6},end:{line:30,column:27}},{start:{line:30,column:47},end:{line:30,column:130}}],line:30},2:{loc:{start:{line:33,column:6},end:{line:40,column:7}},type:"binary-expr",locations:[{start:{line:33,column:6},end:{line:33,column:26}},{start:{line:33,column:46},end:{line:40,column:7}}],line:33},3:{loc:{start:{line:37,column:28},end:{line:37,column:60}},type:"cond-expr",locations:[{start:{line:37,column:49},end:{line:37,column:51}},{start:{line:37,column:54},end:{line:37,column:60}}],line:37}},s:{0:0,1:0,2:0,3:0,4:0,5:0},f:{0:0,1:0,2:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/Fieldset.tsx"],names:[],mappings:"AAiCW,SAGD,KAHC;AAjCX,OAAO,WAAgD;AACvD,OAAO,mBAAmB;AAC1B,OAAO,SAAS;AAChB,OAAO,sBAAsB;AAY7B,qBAAqB,iBAAiB,MAAM,UAAwC;AAAA,EAClF;AAAA,EAEA,YAAa,OAAsB;AACjC,UAAM,KAAK;AACX,SAAK,WAAW,iBAAiB,iBAAiB;AAClD,SAAK,QAAQ;AAAA,MACX,SAAS;AAAA,IACX;AAAA,EACF;AAAA,EAEA,cAAc,CAAC,QAAiB;AAC9B,SAAK,SAAS;AAAA,MACZ,SAAS;AAAA,IACX,CAAC;AAAA,EACH;AAAA,EAEA,SAAU;AACR,WAAO,qBAAC,SAAI,WAAU,wBAAuB,MAAK,SAAQ,mBAAiB,KAAK,UAC7E;AAAA,WAAK,MAAM,aACV,oBAAC,SAAI,WAAU,8BACb;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,KAAK,MAAM;AAAA,UAClB,aAAa,KAAK;AAAA,UAClB,WAAW,KAAK,MAAM;AAAA;AAAA,MACxB,GACF;AAAA,MAED,CAAC,KAAK,MAAM,aACX,oBAAC,SAAI,WAAU,8BACZ,eAAK,MAAM,OACd;AAAA,MAEF,oBAAC,SAAI,WAAU,+BACZ,eAAK,MAAM,QACd;AAAA,MACA,oBAAC,SAAI,WAAU,gCACZ,eAAK,MAAM,UACd;AAAA,MACC,KAAK,MAAM,aACV;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,OAAO,EAAC,SAAS,KAAK,MAAM,UAAU,KAAK,OAAM;AAAA,UAEjD,8BAAC,OAAI,WAAW,KAAK,MAAM,WAAW;AAAA;AAAA,MACxC;AAAA,OAEJ;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"81a841bc0059d656029a86501c08aa823d58e2d6"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return YA=function(){return l},l}YA();class EC extends Xn.Component{constructor(t){YA().f[0]++,YA().s[0]++;super(t);Kn(this,"_labelId");Kn(this,"onToggleDoc",(YA().s[3]++,t=>{YA().f[1]++,YA().s[4]++,this.setState({showDoc:t})}));YA().s[1]++,this._labelId=Py("fieldset_label_"),YA().s[2]++,this.state={showDoc:!1}}render(){return YA().f[2]++,YA().s[5]++,ue.jsxs("div",{className:"maputnik-input-block",role:"group","aria-labelledby":this._labelId,children:[(YA().b[0][0]++,this.props.fieldSpec&&(YA().b[0][1]++,ue.jsx("div",{className:"maputnik-input-block-label",children:ue.jsx(gO,{label:this.props.label,onToggleDoc:this.onToggleDoc,fieldSpec:this.props.fieldSpec})}))),(YA().b[1][0]++,!this.props.fieldSpec&&(YA().b[1][1]++,ue.jsx("div",{className:"maputnik-input-block-label",children:this.props.label}))),ue.jsx("div",{className:"maputnik-input-block-action",children:this.props.action}),ue.jsx("div",{className:"maputnik-input-block-content",children:this.props.children}),(YA().b[2][0]++,this.props.fieldSpec&&(YA().b[2][1]++,ue.jsx("div",{className:"maputnik-doc-inline",style:{display:this.state.showDoc?(YA().b[3][0]++,""):(YA().b[3][1]++,"none")},children:ue.jsx(yO,{fieldSpec:this.props.fieldSpec})})))]})}}function Vs(){var n="/home/runner/work/maputnik/maputnik/src/components/SpecField.tsx",e="adadf49dc291f98804cd53f74e320ed51f276886",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/SpecField.tsx",statementMap:{0:{start:{line:6,column:16},end:{line:16,column:1}},1:{start:{line:7,column:15},end:{line:7,column:20}},2:{start:{line:8,column:27},end:{line:8,column:87}},3:{start:{line:9,column:17},end:{line:9,column:22}},4:{start:{line:10,column:15},end:{line:10,column:23}},5:{start:{line:11,column:23},end:{line:11,column:28}},6:{start:{line:12,column:16},end:{line:12,column:21}},7:{start:{line:13,column:16},end:{line:13,column:21}},8:{start:{line:14,column:19},end:{line:14,column:24}},9:{start:{line:15,column:17},end:{line:15,column:22}},10:{start:{line:19,column:22},end:{line:19,column:48}},11:{start:{line:20,column:24},end:{line:20,column:42}},12:{start:{line:22,column:4},end:{line:27,column:5}},13:{start:{line:23,column:6},end:{line:23,column:42}},14:{start:{line:25,column:6},end:{line:25,column:55}},15:{start:{line:26,column:6},end:{line:26,column:24}},16:{start:{line:28,column:4},end:{line:36,column:6}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:9},end:{line:7,column:10}},loc:{start:{line:7,column:15},end:{line:7,column:20}},line:7},1:{name:"(anonymous_1)",decl:{start:{line:8,column:8},end:{line:8,column:9}},loc:{start:{line:8,column:27},end:{line:8,column:87}},line:8},2:{name:"(anonymous_2)",decl:{start:{line:9,column:11},end:{line:9,column:12}},loc:{start:{line:9,column:17},end:{line:9,column:22}},line:9},3:{name:"(anonymous_3)",decl:{start:{line:10,column:9},end:{line:10,column:10}},loc:{start:{line:10,column:15},end:{line:10,column:23}},line:10},4:{name:"(anonymous_4)",decl:{start:{line:11,column:17},end:{line:11,column:18}},loc:{start:{line:11,column:23},end:{line:11,column:28}},line:11},5:{name:"(anonymous_5)",decl:{start:{line:12,column:10},end:{line:12,column:11}},loc:{start:{line:12,column:16},end:{line:12,column:21}},line:12},6:{name:"(anonymous_6)",decl:{start:{line:13,column:10},end:{line:13,column:11}},loc:{start:{line:13,column:16},end:{line:13,column:21}},line:13},7:{name:"(anonymous_7)",decl:{start:{line:14,column:13},end:{line:14,column:14}},loc:{start:{line:14,column:19},end:{line:14,column:24}},line:14},8:{name:"(anonymous_8)",decl:{start:{line:15,column:11},end:{line:15,column:12}},loc:{start:{line:15,column:17},end:{line:15,column:22}},line:15},9:{name:"(anonymous_9)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:11},end:{line:37,column:3}},line:18}},branchMap:{0:{loc:{start:{line:8,column:27},end:{line:8,column:87}},type:"cond-expr",locations:[{start:{line:8,column:71},end:{line:8,column:79}},{start:{line:8,column:82},end:{line:8,column:87}}],line:8},1:{loc:{start:{line:22,column:4},end:{line:27,column:5}},type:"if",locations:[{start:{line:22,column:4},end:{line:27,column:5}},{start:{line:24,column:11},end:{line:27,column:5}}],line:22}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/SpecField.tsx"],names:[],mappings:"AA0CM;AA1CN,OAAO,WAAW;AAClB,OAAO,WAAW;AAClB,OAAO,eAA0D;AACjE,OAAO,cAAc;AAGrB,MAAM,UAAU;AAAA,EACd,OAAO,MAAM;AAAA,EACb,MAAM,CAAC,EAAC,UAAS,MAAY,OAAO,KAAK,UAAU,MAAM,EAAE,UAAU,IAAI,WAAW;AAAA,EACpF,SAAS,MAAM;AAAA,EACf,OAAO,MAAM;AAAA,EACb,eAAe,MAAM;AAAA,EACrB,QAAQ,MAAM;AAAA,EACd,QAAQ,MAAM;AAAA,EACd,WAAW,MAAM;AAAA,EACjB,SAAS,MAAM;AACjB;AAMA,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,SAAS;AACP,UAAM,YAAY,KAAK,MAAM,WAAW;AAExC,UAAM,cAAc,QAAQ,SAAU;AAEtC,QAAI;AACJ,QAAI,aAAa;AACf,kBAAY,YAAY,KAAK,KAAK;AAAA,IACpC,OACK;AACH,cAAQ,KAAK,yBAAyB,SAAS;AAC/C,kBAAY;AAAA,IACd;AAEA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,OAAO,KAAK,MAAM;AAAA,QAClB,QAAQ,KAAK,MAAM;AAAA,QACnB,WAAW,KAAK,MAAM;AAAA,QAEtB,8BAAC,aAAW,GAAG,KAAK,OAAO;AAAA;AAAA,IAC7B;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"adadf49dc291f98804cd53f74e320ed51f276886"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Vs=function(){return l},l}Vs();const hle=(Vs().s[0]++,{color:()=>(Vs().f[0]++,Vs().s[1]++,la),enum:({fieldSpec:n})=>(Vs().f[1]++,Vs().s[2]++,Object.keys(n.values).length<=3?(Vs().b[0][0]++,EC):(Vs().b[0][1]++,la)),boolean:()=>(Vs().f[2]++,Vs().s[3]++,la),array:()=>(Vs().f[3]++,Vs().s[4]++,EC),resolvedImage:()=>(Vs().f[4]++,Vs().s[5]++,la),number:()=>(Vs().f[5]++,Vs().s[6]++,la),string:()=>(Vs().f[6]++,Vs().s[7]++,la),formatted:()=>(Vs().f[7]++,Vs().s[8]++,la),padding:()=>(Vs().f[8]++,Vs().s[9]++,la)});class fle extends Xn.Component{render(){var i;Vs().f[9]++;const e=(Vs().s[10]++,(i=this.props.fieldSpec)==null?void 0:i.type),t=(Vs().s[11]++,hle[e]);let r;return Vs().s[12]++,t?(Vs().b[1][0]++,Vs().s[13]++,r=t(this.props)):(Vs().b[1][1]++,Vs().s[14]++,console.warn("No such type for '%s'",e),Vs().s[15]++,r=la),Vs().s[16]++,ue.jsx(r,{label:this.props.label,action:this.props.action,fieldSpec:this.props.fieldSpec,children:ue.jsx(gy,{...this.props})})}}function ad(){var n="/home/runner/work/maputnik/maputnik/src/components/_FunctionButtons.tsx",e="e12cc9e5c91261e7ee42544334f5ab56bdde4e3a",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/_FunctionButtons.tsx",statementMap:{0:{start:{line:9,column:14},end:{line:9,column:26}},1:{start:{line:11,column:4},end:{line:48,column:5}},2:{start:{line:12,column:6},end:{line:20,column:8}},3:{start:{line:21,column:6},end:{line:29,column:8}},4:{start:{line:30,column:6},end:{line:40,column:7}},5:{start:{line:31,column:8},end:{line:39,column:10}},6:{start:{line:41,column:6},end:{line:45,column:11}},7:{start:{line:47,column:6},end:{line:47,column:77}},8:{start:{line:51,column:29},end:{line:51,column:76}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:11},end:{line:49,column:3}},line:8}},branchMap:{0:{loc:{start:{line:11,column:4},end:{line:48,column:5}},type:"if",locations:[{start:{line:11,column:4},end:{line:48,column:5}},{start:{line:46,column:11},end:{line:48,column:5}}],line:11},1:{loc:{start:{line:30,column:6},end:{line:40,column:7}},type:"if",locations:[{start:{line:30,column:6},end:{line:40,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:30}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},f:{0:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_FunctionButtons.tsx"],names:[],mappings:"AA2BY,cAsBC,YAtBD;AA3BZ,OAAO,WAAW;AAElB,OAAO,iBAAiB;AACxB,SAAQ,aAAa,qBAAoB;AACzC,SAAQ,0BAAyB;AACjC,SAA0B,uBAAuB;AASjD,MAAM,qCAAqC,MAAM,UAA6C;AAAA,EAC5F,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,QAAI,qBAAqB,qBAAqB;AAE9C,QAAI,KAAK,MAAM,UAAU,WAAW,WAAW,SAAS,MAAM,GAAG;AAC/D,8BACE;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,SAAS,KAAK,MAAM;AAAA,UACpB,OAAO,EAAE,uBAAuB;AAAA,UAEhC,8BAAC,SAAI,OAAO,EAAC,OAAM,QAAQ,QAAO,QAAQ,eAAe,SAAQ,GAAG,SAAQ,aAC1E,8BAAC,UAAK,MAAK,gBAAe,GAAG,oBAAoB,GACnD;AAAA;AAAA,MACF;AAGF,4BAAsB;AAAA,QAAC;AAAA;AAAA,UACrB,WAAU;AAAA,UACV,SAAS,KAAK,MAAM;AAAA,UACpB,OAAO,EAAE,uCAAuC;AAAA,UAEhD,8BAAC,eAAY;AAAA;AAAA,MACf;AAEA,UAAI,KAAK,MAAM,UAAU,eAAe,MAAM,eAAe;AAC3D,8BAAsB;AAAA,UAAC;AAAA;AAAA,YACrB,WAAU;AAAA,YACV,SAAS,KAAK,MAAM;AAAA,YACpB,OAAO,EAAE,mCAAmC;AAAA,YAE5C,8BAAC,iBAAc;AAAA;AAAA,QACjB;AAAA,MACF;AACA,aAAO,qBAAC,SACL;AAAA;AAAA,QACA;AAAA,QACA;AAAA,SACH;AAAA,IACF,OACK;AACH,aAAO,oBAAC,SAAK,iCAAsB;AAAA,IACrC;AAAA,EACF;AACF;AAEA,MAAM,uBAAuB,gBAAgB,EAAE,4BAA4B;AAC3E,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e12cc9e5c91261e7ee42544334f5ab56bdde4e3a"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return ad=function(){return l},l}ad();class ple extends Xn.Component{render(){ad().f[0]++;const e=(ad().s[0]++,this.props.t);let t,r,i;return ad().s[1]++,this.props.fieldSpec.expression.parameters.includes("zoom")?(ad().b[0][0]++,ad().s[2]++,i=ue.jsx(Ha,{className:"maputnik-make-zoom-function",onClick:this.props.onExpressionClick,title:e("Convert to expression"),children:ue.jsx("svg",{style:{width:"14px",height:"14px",verticalAlign:"middle"},viewBox:"0 0 24 24",children:ue.jsx("path",{fill:"currentColor",d:SC})})}),ad().s[3]++,t=ue.jsx(Ha,{className:"maputnik-make-zoom-function",onClick:this.props.onZoomClick,title:e("Convert property into a zoom function"),children:ue.jsx(QV,{})}),ad().s[4]++,this.props.fieldSpec["property-type"]==="data-driven"?(ad().b[1][0]++,ad().s[5]++,r=ue.jsx(Ha,{className:"maputnik-make-data-function",onClick:this.props.onDataClick,title:e("Convert property to data function"),children:ue.jsx(YV,{})})):ad().b[1][1]++,ad().s[6]++,ue.jsxs("div",{children:[i,r,t]})):(ad().b[0][1]++,ad().s[7]++,ue.jsx("div",{children:i}))}}const mle=(ad().s[8]++,zs()(ple));function Up(){var n="/home/runner/work/maputnik/maputnik/src/components/_SpecProperty.tsx",e="60f6f0f35f3e44d7e7f08e2966cfff09ee69557d",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/_SpecProperty.tsx",statementMap:{0:{start:{line:7,column:24},end:{line:9,column:3}},1:{start:{line:11,column:45},end:{line:11,column:55}},2:{start:{line:12,column:40},end:{line:20,column:5}},3:{start:{line:21,column:18},end:{line:21,column:53}},4:{start:{line:22,column:4},end:{line:31,column:6}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:32,column:3}},line:10}},branchMap:{0:{loc:{start:{line:28,column:34},end:{line:28,column:60}},type:"binary-expr",locations:[{start:{line:28,column:34},end:{line:28,column:54}},{start:{line:28,column:58},end:{line:28,column:60}}],line:28}},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_SpecProperty.tsx"],names:[],mappings:"AA4BwB;AA5BxB,OAAO,WAAW;AAElB,OAAO,eAAiC;AACxC,OAAO,qBAAqB;AAE5B,OAAO,wBAAwB;AAe/B,qBAAqB,qBAAqB,MAAM,UAA6B;AAAA,EAC3E,OAAO,eAAe;AAAA,IACpB,QAAQ,CAAC;AAAA,EACX;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,QAAQ,WAAW,UAAS,IAAI,KAAK;AAE5C,UAAM,cAAc;AAAA,MAAC;AAAA;AAAA,QACnB,WAAW,KAAK,MAAM;AAAA,QACtB,aAAa,KAAK,MAAM;AAAA,QACxB,aAAa,KAAK,MAAM;AAAA,QACxB,mBAAmB,KAAK,MAAM;AAAA;AAAA,IAChC;AAEA,UAAM,QAAQ,OAAQ,YAAU,MAAI,SAAgB;AAEpD,WAAO;AAAA,MAAC;AAAA;AAAA,QACL,GAAG,KAAK;AAAA,QACT;AAAA,QACA,WAAW,KAAK,MAAM;AAAA,QACtB,OAAO,mBAAmB,KAAK,MAAM,aAAa,EAAE;AAAA,QACpD,QAAQ;AAAA;AAAA,IACV;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"60f6f0f35f3e44d7e7f08e2966cfff09ee69557d"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Up=function(){return l},l}Up();class wj extends Xn.Component{render(){Up().f[0]++;const{errors:e,fieldName:t,fieldType:r}=(Up().s[1]++,this.props),i=(Up().s[2]++,ue.jsx(mle,{fieldSpec:this.props.fieldSpec,onZoomClick:this.props.onZoomClick,onDataClick:this.props.onDataClick,onExpressionClick:this.props.onExpressionClick})),s=(Up().s[3]++,e[r+"."+t]);return Up().s[4]++,ue.jsx(fle,{...this.props,error:s,fieldSpec:this.props.fieldSpec,label:Nx((Up().b[0][0]++,this.props.fieldName||(Up().b[0][1]++,""))),action:i})}}Kn(wj,"defaultProps",(Up().s[0]++,{errors:{}}));function ch(){var n="/home/runner/work/maputnik/maputnik/src/libs/sort-numerically.ts",e="e8906f642b33ab7d7a780fc0db870f7e4872d29c",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/sort-numerically.ts",statementMap:{0:{start:{line:2,column:12},end:{line:2,column:17}},1:{start:{line:3,column:12},end:{line:3,column:17}},2:{start:{line:4,column:2},end:{line:10,column:3}},3:{start:{line:5,column:4},end:{line:5,column:14}},4:{start:{line:6,column:9},end:{line:10,column:3}},5:{start:{line:7,column:4},end:{line:7,column:13}},6:{start:{line:9,column:4},end:{line:9,column:13}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:1,column:15},end:{line:1,column:16}},loc:{start:{line:1,column:36},end:{line:11,column:1}},line:1}},branchMap:{0:{loc:{start:{line:4,column:2},end:{line:10,column:3}},type:"if",locations:[{start:{line:4,column:2},end:{line:10,column:3}},{start:{line:6,column:9},end:{line:10,column:3}}],line:4},1:{loc:{start:{line:6,column:9},end:{line:10,column:3}},type:"if",locations:[{start:{line:6,column:9},end:{line:10,column:3}},{start:{line:8,column:9},end:{line:10,column:3}}],line:6}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},f:{0:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/sort-numerically.ts"],names:[],mappings:"AAAA,wBAAwB,MAAuB,MAAsB;AACnE,QAAM,IAAI,CAAC;AACX,QAAM,IAAI,CAAC;AAEX,MAAG,IAAI,GAAG;AACR,WAAO;AAAA,EACT,WACQ,IAAI,GAAG;AACb,WAAO;AAAA,EACT,OACK;AACH,WAAO;AAAA,EACT;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e8906f642b33ab7d7a780fc0db870f7e4872d29c"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return ch=function(){return l},l}ch();function Sj(n,e){ch().f[0]++;const t=(ch().s[0]++,+n),r=(ch().s[1]++,+e);return ch().s[2]++,t<r?(ch().b[0][0]++,ch().s[3]++,-1):(ch().b[0][1]++,ch().s[4]++,t>r?(ch().b[1][0]++,ch().s[5]++,1):(ch().b[1][1]++,ch().s[6]++,0))}function rp(){var n="/home/runner/work/maputnik/maputnik/src/libs/spec-helper.ts",e="2f98128f0f990b67a049c58486c1fab4310fbcfa",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/spec-helper.ts",statementMap:{0:{start:{line:2,column:2},end:{line:4,column:3}},1:{start:{line:3,column:4},end:{line:3,column:24}},2:{start:{line:5,column:19},end:{line:11,column:3}},3:{start:{line:12,column:2},end:{line:12,column:35}}},fnMap:{0:{name:"findDefaultFromSpec",decl:{start:{line:1,column:16},end:{line:1,column:35}},loc:{start:{line:1,column:42},end:{line:13,column:1}},line:1}},branchMap:{0:{loc:{start:{line:2,column:2},end:{line:4,column:3}},type:"if",locations:[{start:{line:2,column:2},end:{line:4,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:2},1:{loc:{start:{line:12,column:9},end:{line:12,column:34}},type:"binary-expr",locations:[{start:{line:12,column:9},end:{line:12,column:28}},{start:{line:12,column:32},end:{line:12,column:34}}],line:12}},s:{0:0,1:0,2:0,3:0},f:{0:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/spec-helper.ts"],names:[],mappings:"AAGO,gBAAS,oBAAoB,MAAyE;AAC3G,MAAI,OAAO,UAAU,eAAe,KAAK,MAAM,SAAS,GAAG;AACzD,WAAO,KAAK;AAAA,EACd;AAEA,QAAM,WAAW;AAAA,IACf,SAAS;AAAA,IACT,UAAU;AAAA,IACV,WAAW;AAAA,IACX,UAAU;AAAA,IACV,SAAS,CAAC;AAAA,EACZ;AAEA,SAAO,SAAS,KAAK,IAAI,KAAK;AAChC;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2f98128f0f990b67a049c58486c1fab4310fbcfa"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return rp=function(){return l},l}rp();function xf(n){if(rp().f[0]++,rp().s[0]++,Object.prototype.hasOwnProperty.call(n,"default"))return rp().b[0][0]++,rp().s[1]++,n.default;rp().b[0][1]++;const e=(rp().s[2]++,{color:"#000000",string:"",boolean:!1,number:0,array:[]});return rp().s[3]++,rp().b[1][0]++,e[n.type]||(rp().b[1][1]++,"")}function yy(){var n="/home/runner/work/maputnik/maputnik/src/components/_DeleteStopButton.tsx",e="04a32613b456a577be3ef20dcd48d43233f27837",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/_DeleteStopButton.tsx",statementMap:{0:{start:{line:8,column:14},end:{line:8,column:26}},1:{start:{line:9,column:4},end:{line:17,column:6}},2:{start:{line:20,column:25},end:{line:20,column:68}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:11},end:{line:18,column:3}},line:7}},branchMap:{},s:{0:0,1:0,2:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_DeleteStopButton.tsx"],names:[],mappings:"AAoBM;AApBN,OAAO,WAAW;AAElB,OAAO,iBAAiB;AACxB,SAAQ,gBAAe;AACvB,SAA0B,uBAAuB;AAQjD,MAAM,iCAAiC,MAAM,UAAyC;AAAA,EACpF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,SAAS,KAAK,MAAM;AAAA,QACpB,OAAO,EAAE,6BAA6B;AAAA,QAEtC,8BAAC,YAAS;AAAA;AAAA,IACZ;AAAA,EACF;AACF;AAEA,MAAM,mBAAmB,gBAAgB,EAAE,wBAAwB;AACnE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"04a32613b456a577be3ef20dcd48d43233f27837"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return yy=function(){return l},l}yy();class gle extends Xn.Component{render(){yy().f[0]++;const e=(yy().s[0]++,this.props.t);return yy().s[1]++,ue.jsx(Ha,{className:"maputnik-delete-stop",onClick:this.props.onClick,title:e("Remove zoom level from stop"),children:ue.jsx(Uy,{})})}}const Ej=(yy().s[2]++,zs()(gle));function mn(){var n="/home/runner/work/maputnik/maputnik/src/components/_DataProperty.tsx",e="97b6de35ac4a8f739cf06eabc39facf249622fab",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/_DataProperty.tsx",statementMap:{0:{start:{line:19,column:2},end:{line:28,column:3}},1:{start:{line:20,column:4},end:{line:27,column:7}},2:{start:{line:21,column:6},end:{line:26,column:7}},3:{start:{line:22,column:8},end:{line:24,column:9}},4:{start:{line:23,column:10},end:{line:23,column:33}},5:{start:{line:25,column:8},end:{line:25,column:39}},6:{start:{line:29,column:2},end:{line:29,column:17}},7:{start:{line:32,column:10},end:{line:34,column:3}},8:{start:{line:36,column:20},end:{line:36,column:55}},9:{start:{line:37,column:4},end:{line:41,column:5}},10:{start:{line:38,column:6},end:{line:40,column:9}},11:{start:{line:44,column:20},end:{line:44,column:45}},12:{start:{line:45,column:4},end:{line:49,column:5}},13:{start:{line:46,column:6},end:{line:48,column:8}},14:{start:{line:50,column:4},end:{line:50,column:16}},15:{start:{line:53,column:4},end:{line:55,column:5}},16:{start:{line:54,column:6},end:{line:54,column:27}},17:{start:{line:56,column:4},end:{line:58,column:5}},18:{start:{line:57,column:6},end:{line:57,column:24}},19:{start:{line:59,column:4},end:{line:59,column:25}},20:{start:{line:62,column:4},end:{line:66,column:5}},21:{start:{line:63,column:6},end:{line:63,column:83}},22:{start:{line:65,column:6},end:{line:65,column:53}},23:{start:{line:70,column:26},end:{line:75,column:70}},24:{start:{line:71,column:6},end:{line:74,column:8}},25:{start:{line:75,column:22},end:{line:75,column:69}},26:{start:{line:76,column:20},end:{line:76,column:22}},27:{start:{line:77,column:4},end:{line:79,column:7}},28:{start:{line:78,column:6},end:{line:78,column:30}},29:{start:{line:80,column:4},end:{line:82,column:7}},30:{start:{line:83,column:4},end:{line:83,column:50}},31:{start:{line:83,column:39},end:{line:83,column:48}},32:{start:{line:85,column:13},end:{line:105,column:3}},33:{start:{line:86,column:4},end:{line:103,column:5}},34:{start:{line:87,column:6},end:{line:90,column:8}},35:{start:{line:92,column:24},end:{line:92,column:61}},36:{start:{line:93,column:6},end:{line:102,column:8}},37:{start:{line:104,column:4},end:{line:104,column:42}},38:{start:{line:107,column:18},end:{line:107,column:56}},39:{start:{line:108,column:4},end:{line:114,column:6}},40:{start:{line:115,column:25},end:{line:115,column:53}},41:{start:{line:116,column:25},end:{line:119,column:5}},42:{start:{line:120,column:4},end:{line:120,column:54}},43:{start:{line:123,column:25},end:{line:126,column:5}},44:{start:{line:127,column:4},end:{line:129,column:5}},45:{start:{line:128,column:6},end:{line:128,column:34}},46:{start:{line:130,column:4},end:{line:130,column:60}},47:{start:{line:133,column:4},end:{line:140,column:5}},48:{start:{line:134,column:6},end:{line:134,column:42}},49:{start:{line:136,column:6},end:{line:139,column:9}},50:{start:{line:143,column:4},end:{line:147,column:5}},51:{start:{line:144,column:6},end:{line:144,column:43}},52:{start:{line:146,column:6},end:{line:146,column:40}},53:{start:{line:148,column:4},end:{line:148,column:58}},54:{start:{line:151,column:14},end:{line:151,column:26}},55:{start:{line:152,column:4},end:{line:154,column:5}},56:{start:{line:153,column:6},end:{line:153,column:78}},57:{start:{line:156,column:4},end:{line:204,column:5}},58:{start:{line:157,column:6},end:{line:203,column:9}},59:{start:{line:158,column:26},end:{line:158,column:77}},60:{start:{line:159,column:20},end:{line:159,column:40}},61:{start:{line:160,column:26},end:{line:160,column:79}},62:{start:{line:161,column:22},end:{line:161,column:29}},63:{start:{line:162,column:46},end:{line:162,column:122}},64:{start:{line:163,column:26},end:{line:168,column:9}},65:{start:{line:167,column:33},end:{line:167,column:97}},66:{start:{line:170,column:8},end:{line:174,column:9}},67:{start:{line:171,column:10},end:{line:171,column:73}},68:{start:{line:173,column:10},end:{line:173,column:73}},69:{start:{line:175,column:24},end:{line:175,column:28}},70:{start:{line:176,column:8},end:{line:187,column:9}},71:{start:{line:177,column:10},end:{line:186,column:15}},72:{start:{line:182,column:37},end:{line:182,column:101}},73:{start:{line:188,column:8},end:{line:202,column:18}},74:{start:{line:198,column:41},end:{line:198,column:110}},75:{start:{line:205,column:4},end:{line:307,column:12}},76:{start:{line:216,column:39},end:{line:216,column:67}},77:{start:{line:234,column:43},end:{line:234,column:68}},78:{start:{line:249,column:39},end:{line:249,column:83}},79:{start:{line:265,column:42},end:{line:265,column:85}},80:{start:{line:310,column:21},end:{line:310,column:60}}},fnMap:{0:{name:"setStopRefs",decl:{start:{line:17,column:9},end:{line:17,column:20}},loc:{start:{line:17,column:35},end:{line:30,column:1}},line:17},1:{name:"(anonymous_1)",decl:{start:{line:20,column:30},end:{line:20,column:31}},loc:{start:{line:20,column:45},end:{line:27,column:5}},line:20},2:{name:"(anonymous_2)",decl:{start:{line:35,column:2},end:{line:35,column:3}},loc:{start:{line:35,column:22},end:{line:42,column:3}},line:35},3:{name:"(anonymous_3)",decl:{start:{line:43,column:2},end:{line:43,column:3}},loc:{start:{line:43,column:48},end:{line:51,column:3}},line:43},4:{name:"(anonymous_4)",decl:{start:{line:52,column:2},end:{line:52,column:3}},loc:{start:{line:52,column:34},end:{line:60,column:3}},line:52},5:{name:"(anonymous_5)",decl:{start:{line:61,column:2},end:{line:61,column:3}},loc:{start:{line:61,column:34},end:{line:67,column:3}},line:61},6:{name:"(anonymous_6)",decl:{start:{line:69,column:2},end:{line:69,column:3}},loc:{start:{line:69,column:26},end:{line:84,column:3}},line:69},7:{name:"(anonymous_7)",decl:{start:{line:70,column:36},end:{line:70,column:37}},loc:{start:{line:70,column:51},end:{line:75,column:5}},line:70},8:{name:"(anonymous_8)",decl:{start:{line:75,column:12},end:{line:75,column:13}},loc:{start:{line:75,column:22},end:{line:75,column:69}},line:75},9:{name:"(anonymous_9)",decl:{start:{line:77,column:26},end:{line:77,column:27}},loc:{start:{line:77,column:41},end:{line:79,column:5}},line:77},10:{name:"(anonymous_10)",decl:{start:{line:83,column:29},end:{line:83,column:30}},loc:{start:{line:83,column:39},end:{line:83,column:48}},line:83},11:{name:"(anonymous_11)",decl:{start:{line:85,column:13},end:{line:85,column:14}},loc:{start:{line:85,column:35},end:{line:105,column:3}},line:85},12:{name:"(anonymous_12)",decl:{start:{line:106,column:2},end:{line:106,column:3}},loc:{start:{line:106,column:41},end:{line:121,column:3}},line:106},13:{name:"(anonymous_13)",decl:{start:{line:122,column:2},end:{line:122,column:3}},loc:{start:{line:122,column:23},end:{line:131,column:3}},line:122},14:{name:"(anonymous_14)",decl:{start:{line:132,column:2},end:{line:132,column:3}},loc:{start:{line:132,column:26},end:{line:141,column:3}},line:132},15:{name:"(anonymous_15)",decl:{start:{line:142,column:2},end:{line:142,column:3}},loc:{start:{line:142,column:40},end:{line:149,column:3}},line:142},16:{name:"(anonymous_16)",decl:{start:{line:150,column:2},end:{line:150,column:3}},loc:{start:{line:150,column:11},end:{line:308,column:3}},line:150},17:{name:"(anonymous_17)",decl:{start:{line:157,column:46},end:{line:157,column:47}},loc:{start:{line:157,column:61},end:{line:203,column:7}},line:157},18:{name:"(anonymous_18)",decl:{start:{line:167,column:20},end:{line:167,column:21}},loc:{start:{line:167,column:33},end:{line:167,column:97}},line:167},19:{name:"(anonymous_19)",decl:{start:{line:182,column:24},end:{line:182,column:25}},loc:{start:{line:182,column:37},end:{line:182,column:101}},line:182},20:{name:"(anonymous_20)",decl:{start:{line:198,column:24},end:{line:198,column:25}},loc:{start:{line:198,column:41},end:{line:198,column:110}},line:198},21:{name:"(anonymous_21)",decl:{start:{line:216,column:26},end:{line:216,column:27}},loc:{start:{line:216,column:39},end:{line:216,column:67}},line:216},22:{name:"(anonymous_22)",decl:{start:{line:234,column:26},end:{line:234,column:27}},loc:{start:{line:234,column:43},end:{line:234,column:68}},line:234},23:{name:"(anonymous_23)",decl:{start:{line:249,column:26},end:{line:249,column:27}},loc:{start:{line:249,column:39},end:{line:249,column:83}},line:249},24:{name:"(anonymous_24)",decl:{start:{line:265,column:26},end:{line:265,column:27}},loc:{start:{line:265,column:42},end:{line:265,column:85}},line:265}},branchMap:{0:{loc:{start:{line:19,column:2},end:{line:28,column:3}},type:"if",locations:[{start:{line:19,column:2},end:{line:28,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:19},1:{loc:{start:{line:19,column:6},end:{line:19,column:38}},type:"binary-expr",locations:[{start:{line:19,column:6},end:{line:19,column:17}},{start:{line:19,column:21},end:{line:19,column:38}}],line:19},2:{loc:{start:{line:21,column:6},end:{line:26,column:7}},type:"if",locations:[{start:{line:21,column:6},end:{line:26,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:21},3:{loc:{start:{line:22,column:8},end:{line:24,column:9}},type:"if",locations:[{start:{line:22,column:8},end:{line:24,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:22},4:{loc:{start:{line:37,column:4},end:{line:41,column:5}},type:"if",locations:[{start:{line:37,column:4},end:{line:41,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},5:{loc:{start:{line:45,column:4},end:{line:49,column:5}},type:"if",locations:[{start:{line:45,column:4},end:{line:49,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:45},6:{loc:{start:{line:53,column:4},end:{line:55,column:5}},type:"if",locations:[{start:{line:53,column:4},end:{line:55,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:53},7:{loc:{start:{line:56,column:4},end:{line:58,column:5}},type:"if",locations:[{start:{line:56,column:4},end:{line:58,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:56},8:{loc:{start:{line:62,column:4},end:{line:66,column:5}},type:"if",locations:[{start:{line:62,column:4},end:{line:66,column:5}},{start:{line:64,column:11},end:{line:66,column:5}}],line:62},9:{loc:{start:{line:86,column:4},end:{line:103,column:5}},type:"if",locations:[{start:{line:86,column:4},end:{line:103,column:5}},{start:{line:91,column:11},end:{line:103,column:5}}],line:86},10:{loc:{start:{line:92,column:24},end:{line:92,column:61}},type:"cond-expr",locations:[{start:{line:92,column:55},end:{line:92,column:57}},{start:{line:92,column:60},end:{line:92,column:61}}],line:92},11:{loc:{start:{line:107,column:18},end:{line:107,column:56}},type:"binary-expr",locations:[{start:{line:107,column:18},end:{line:107,column:50}},{start:{line:107,column:54},end:{line:107,column:56}}],line:107},12:{loc:{start:{line:111,column:14},end:{line:111,column:58}},type:"cond-expr",locations:[{start:{line:111,column:41},end:{line:111,column:42}},{start:{line:111,column:45},end:{line:111,column:58}}],line:111},13:{loc:{start:{line:127,column:4},end:{line:129,column:5}},type:"if",locations:[{start:{line:127,column:4},end:{line:129,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:127},14:{loc:{start:{line:133,column:4},end:{line:140,column:5}},type:"if",locations:[{start:{line:133,column:4},end:{line:140,column:5}},{start:{line:135,column:11},end:{line:140,column:5}}],line:133},15:{loc:{start:{line:133,column:8},end:{line:133,column:70}},type:"binary-expr",locations:[{start:{line:133,column:8},end:{line:133,column:33}},{start:{line:133,column:37},end:{line:133,column:70}}],line:133},16:{loc:{start:{line:143,column:4},end:{line:147,column:5}},type:"if",locations:[{start:{line:143,column:4},end:{line:147,column:5}},{start:{line:145,column:11},end:{line:147,column:5}}],line:143},17:{loc:{start:{line:152,column:4},end:{line:154,column:5}},type:"if",locations:[{start:{line:152,column:4},end:{line:154,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:152},18:{loc:{start:{line:156,column:4},end:{line:204,column:5}},type:"if",locations:[{start:{line:156,column:4},end:{line:204,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:156},19:{loc:{start:{line:158,column:26},end:{line:158,column:77}},type:"cond-expr",locations:[{start:{line:158,column:56},end:{line:158,column:68}},{start:{line:158,column:71},end:{line:158,column:77}}],line:158},20:{loc:{start:{line:160,column:26},end:{line:160,column:79}},type:"cond-expr",locations:[{start:{line:160,column:56},end:{line:160,column:69}},{start:{line:160,column:72},end:{line:160,column:79}}],line:160},21:{loc:{start:{line:170,column:8},end:{line:174,column:9}},type:"if",locations:[{start:{line:170,column:8},end:{line:174,column:9}},{start:{line:172,column:15},end:{line:174,column:9}}],line:170},22:{loc:{start:{line:176,column:8},end:{line:187,column:9}},type:"if",locations:[{start:{line:176,column:8},end:{line:187,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:176},23:{loc:{start:{line:224,column:8},end:{line:239,column:9}},type:"binary-expr",locations:[{start:{line:224,column:8},end:{line:224,column:45}},{start:{line:224,column:65},end:{line:239,column:9}}],line:224},24:{loc:{start:{line:255,column:8},end:{line:270,column:9}},type:"binary-expr",locations:[{start:{line:255,column:8},end:{line:255,column:18}},{start:{line:255,column:38},end:{line:270,column:9}}],line:255},25:{loc:{start:{line:271,column:8},end:{line:279,column:15}},type:"binary-expr",locations:[{start:{line:271,column:8},end:{line:271,column:18}},{start:{line:271,column:38},end:{line:279,column:15}}],line:271},26:{loc:{start:{line:281,column:10},end:{line:292,column:11}},type:"binary-expr",locations:[{start:{line:281,column:10},end:{line:281,column:20}},{start:{line:281,column:40},end:{line:292,column:11}}],line:281}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0],26:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_DataProperty.tsx"],names:[],mappings:"AAqO8B,cA8Bf,YA9Be;AArO9B,OAAO,WAAW;AAClB,SAAQ,oBAAoB,4BAA2B;AACvD,OAAO,YAAY;AAEnB,OAAO,iBAAiB;AACxB,OAAO,eAAe;AACtB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAClB,OAAO,YAAY;AACnB,OAAO,qBAAqB;AAC5B,SAAQ,2BAA0B;AAClC,SAA0B,uBAAuB;AAEjD,OAAO,wBAAwB;AAC/B,OAAO,sBAAsB;AAI7B,SAAS,YAAY,OAAkC,OAA0B;AAE/E,MAAI;AAEJ,MAAG,MAAM,SAAS,MAAM,MAAM,OAAO;AACnC,UAAM,MAAM,MAAM,QAAQ,CAAC,MAAM,QAAQ;AACvC,UAAG,CAAC,OAAO,UAAU,eAAe,KAAK,MAAM,MAAM,GAAG,GAAG;AACzD,YAAG,CAAC,SAAS;AACX,oBAAU,EAAC,GAAG,MAAK;AAAA,QACrB;AACA,gBAAQ,GAAG,IAAI,OAAO,OAAO;AAAA,MAC/B;AAAA,IACF,CAAC;AAAA,EACH;AAEA,SAAO;AACT;AAgCA,MAAM,6BAA6B,MAAM,UAAwD;AAAA,EAC/F,QAAQ;AAAA,IACN,MAAM,CAAC;AAAA,EACT;AAAA,EAEA,oBAAoB;AAClB,UAAM,UAAU,YAAY,KAAK,OAAO,KAAK,KAAK;AAElD,QAAG,SAAS;AACV,WAAK,SAAS;AAAA,QACZ,MAAM;AAAA,MACR,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAA4C,OAA0B;AACpG,UAAM,UAAU,YAAY,OAAO,KAAK;AACxC,QAAG,SAAS;AACV,aAAO;AAAA,QACL,MAAM;AAAA,MACR;AAAA,IACF;AACA,WAAO;AAAA,EACT;AAAA,EAEA,qBAAqB,WAAgB;AACnC,QAAI,UAAU,WAAW,cAAc;AACrC,aAAO;AAAA,IACT;AACA,QAAI,UAAU,SAAS,UAAU;AAC/B,aAAO;AAAA,IACT;AACA,WAAO;AAAA,EACT;AAAA,EAEA,qBAAqB,WAAgB;AACnC,QAAI,UAAU,WAAW,cAAc;AACrC,aAAO,CAAC,eAAe,eAAe,YAAY,eAAe,UAAU;AAAA,IAC7E,OACK;AACH,aAAO,CAAC,eAAe,YAAY,UAAU;AAAA,IAC/C;AAAA,EACF;AAAA;AAAA,EAGA,iBAAiB,OAAe;AAC9B,UAAM,gBAAgB,MACnB,IAAI,CAAC,MAAM,QAAQ;AAClB,aAAO;AAAA,QACL,KAAK,KAAK,MAAM,KAAK,GAAG;AAAA,QACxB,MAAM;AAAA,MACR;AAAA,IACF,CAAC,EAEA,KAAK,CAAC,GAAG,MAAM,gBAAgB,EAAE,KAAK,CAAC,EAAE,MAAM,EAAE,KAAK,CAAC,EAAE,IAAI,CAAC;AAGjE,UAAM,UAAU,CAAC;AACjB,kBACG,QAAQ,CAAC,MAAM,QAAO;AACrB,cAAQ,GAAG,IAAI,KAAK;AAAA,IACtB,CAAC;AAEH,SAAK,SAAS;AAAA,MACZ,MAAM;AAAA,IACR,CAAC;AAED,WAAO,cAAc,IAAI,CAAC,SAAS,KAAK,IAAI;AAAA,EAC9C;AAAA,EAEA,WAAW,CAAC,WAAmB,UAAe;AAC5C,QAAI,MAAM,SAAS,YAAY;AAC7B,cAAQ;AAAA,QACN,MAAM,MAAM;AAAA,QACZ,UAAU,MAAM;AAAA,MAClB;AAAA,IACF,OACK;AACH,YAAM,YAAY,MAAM,SAAS,gBAAgB,KAAK;AACtD,cAAQ;AAAA,QACN,UAAU;AAAA,QACV,MAAM,MAAM;AAAA;AAAA,QAEZ,OAAO;AAAA,UACL,CAAC,EAAC,MAAM,GAAG,OAAO,UAAS,GAAG,oBAAoB,KAAK,MAAM,SAAgB,CAAC;AAAA,UAC9E,CAAC,EAAC,MAAM,IAAI,OAAO,UAAS,GAAG,oBAAoB,KAAK,MAAM,SAAgB,CAAC;AAAA,QACjF;AAAA,QACA,GAAG;AAAA,MACL;AAAA,IACF;AACA,SAAK,MAAM,SAAU,WAAW,KAAK;AAAA,EACvC;AAAA,EAEA,WAAW,WAAmB,UAAuD,OAAe;AAClG,UAAM,QAAQ,KAAK,MAAM,OAAO,MAAM,MAAM,CAAC,KAAK,CAAC;AAEnD,UAAM,SAAS,IAAI;AAAA,MACjB;AAAA,QACE,OAAO,SAAS;AAAA,QAChB,MAAO,SAAS,SAAS,SAAa,IAAI,SAAS;AAAA,MACrD;AAAA,MACA;AAAA,IACF;AAEA,UAAM,eAAe,KAAK,iBAAiB,KAAK;AAEhD,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,OAAO;AAAA,IACT;AACA,SAAK,SAAS,KAAK,MAAM,WAAW,YAAY;AAAA,EAClD;AAAA,EAEA,WAAW,UAA8B;AACvC,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,MAAM;AAAA,IACR;AAEA,QAAI,aAAa,SAAS,QAAW;AACnC,aAAO,aAAa,MAAM;AAAA,IAC5B;AACA,SAAK,MAAM,SAAU,KAAK,MAAM,WAAW,YAAY;AAAA,EACzD;AAAA,EAEA,eAAe,SAAiB;AAC9B,QAAI,YAAY,iBAAiB,KAAK,MAAM,wBAAwB;AAClE,WAAK,MAAM,uBAAuB;AAAA,IACpC,OACK;AACH,WAAK,SAAS,KAAK,MAAM,WAAW;AAAA,QAClC,GAAG,KAAK,MAAM;AAAA,QACd,MAAM;AAAA,MACR,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,mBAAmB,UAAkC,SAAc;AACjE,QAAI,SAAS;AACX,WAAK,MAAM,MAAO,QAAQ,IAAI;AAAA,IAChC,OACK;AACH,aAAO,KAAK,MAAM,MAAO,QAAQ;AAAA,IACnC;AACA,SAAK,SAAS,KAAK,MAAM,WAAW,KAAK,MAAM,KAAK;AAAA,EACtD;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AAErB,QAAI,OAAO,KAAK,MAAM,OAAO,SAAS,aAAa;AACjD,WAAK,MAAM,MAAO,OAAO,KAAK,qBAAqB,KAAK,MAAM,SAAS;AAAA,IACzE;AAEA,QAAI;AACJ,QAAI,KAAK,MAAM,OAAO,OAAO;AAC3B,mBAAa,KAAK,MAAM,MAAM,MAAM,IAAI,CAAC,MAAM,QAAQ;AACrD,cAAM,YAAY,OAAO,KAAK,CAAC,MAAM,WAAW,KAAK,CAAC,EAAE,OAAO;AAC/D,cAAM,MAAO,KAAK,MAAM,KAAK,GAAG;AAChC,cAAM,YAAY,OAAO,KAAK,CAAC,MAAM,WAAW,KAAK,CAAC,EAAE,QAAQ,KAAK,CAAC;AACtE,cAAM,QAAQ,KAAK,CAAC;AACpB,cAAM,gBAAgB,oBAAC,oBAAiB,SAAS,KAAK,MAAM,cAAc,KAAK,MAAM,GAAG,GAAG;AAE3F,cAAM,YAAY;AAAA,UAChB,cAAc,EAAE,aAAa;AAAA,UAC7B,OAAO,EAAE,YAAY;AAAA,UACrB,OAAO;AAAA,UACP,UAAU,CAAC,YAAyC,KAAK,WAAW,KAAK,EAAE,MAAM,WAAW,OAAO,QAAkB,GAAG,KAAK;AAAA,QAC/H;AAEA,YAAI;AACJ,YAAG,KAAK,MAAM,OAAO,SAAS,eAAe;AAC3C,sBAAY,oBAAC,eAAa,GAAG,WAAW;AAAA,QAC1C,OACK;AACH,sBAAY,oBAAC,eAAa,GAAG,WAAW;AAAA,QAC1C;AAEA,YAAI,YAAY;AAChB,YAAG,cAAc,QAAW;AAC1B,sBAAY,oBAAC,SACX;AAAA,YAAC;AAAA;AAAA,cACC,cAAW;AAAA,cACX,OAAO;AAAA,cACP,UAAU,aAAW,KAAK,WAAW,KAAK,EAAC,MAAM,SAAS,OAAO,UAAS,GAAG,KAAK;AAAA,cAClF,KAAK;AAAA,cACL,KAAK;AAAA;AAAA,UACP,GACF;AAAA,QACF;AAEA,eAAO,qBAAC,QACN;AAAA,8BAAC,QACE,qBACH;AAAA,UACA,oBAAC,QACE,qBACH;AAAA,UACA,oBAAC,QACC;AAAA,YAAC;AAAA;AAAA,cACC,cAAY,EAAE,cAAc;AAAA,cAC5B,WAAW,KAAK,MAAM;AAAA,cACtB,WAAW,KAAK,MAAM;AAAA,cACtB;AAAA,cACA,UAAU,CAAC,GAAG,aAAa,KAAK,WAAW,KAAK,EAAC,MAAM,WAAW,OAAO,UAAS,GAAG,QAAkB;AAAA;AAAA,UACzG,GACF;AAAA,UACA,oBAAC,QACE,yBACH;AAAA,aAlBc,GAmBhB;AAAA,MACF,CAAC;AAAA,IACH;AAEA,WAAO,oBAAC,SAAI,WAAU,4BACpB,+BAAC,cAAS,WAAU,+BAClB;AAAA,0BAAC,YAAQ,6BAAmB,KAAK,MAAM,SAAS,GAAE;AAAA,MAClD,qBAAC,SAAI,WAAU,gCACb;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,UAAU;AAAA,YAGnB,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,KAAK,MAAM,MAAO;AAAA,gBACzB,UAAU,CAAC,YAAoB,KAAK,eAAe,OAAO;AAAA,gBAC1D,OAAO,EAAE,yDAAyD;AAAA,gBAClE,SAAS,KAAK,qBAAqB,KAAK,MAAM,SAAS;AAAA;AAAA,YACzD,GACF;AAAA;AAAA,UATI;AAAA,QAUN;AAAA,QACC,KAAK,MAAM,OAAO,SAAS,cAC1B;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,MAAM;AAAA,YAGf,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,WAAW;AAAA,gBACX,WAAW,OAAO,SAAS;AAAA,gBAC3B,OAAO,KAAK,MAAM,OAAO;AAAA,gBACzB,UAAU,CAAC,GAAG,aAAa,KAAK,WAAW,QAAkB;AAAA;AAAA,YAC/D,GACF;AAAA;AAAA,UATI;AAAA,QAUN;AAAA,QAEF;AAAA,UAAC;AAAA;AAAA,YACC,OAAO;AAAA,YAGP,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,KAAK,MAAM,OAAO;AAAA,gBACzB,OAAO,EAAE,8CAA8C;AAAA,gBACvD,UAAU,aAAW,KAAK,mBAAmB,YAAY,OAAO;AAAA;AAAA,YAClE,GACF;AAAA;AAAA,UARI;AAAA,QASN;AAAA,QACC,cACC;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,SAAS;AAAA,YAGlB;AAAA,cAAC;AAAA;AAAA,gBACC,WAAW,KAAK,MAAM;AAAA,gBACtB,WAAW,KAAK,MAAM;AAAA,gBACtB,OAAO,KAAK,MAAM,OAAO;AAAA,gBACzB,UAAU,CAAC,GAAG,YAAY,KAAK,mBAAmB,WAAW,OAAO;AAAA;AAAA,YACtE;AAAA;AAAA,UAPI;AAAA,QAQN;AAAA,QAED,cACC,oBAAC,SAAI,WAAU,0BACb,+BAAC,WAAM,WAAU,gCACf;AAAA,8BAAC,aAAS,YAAE,OAAO,GAAE;AAAA,UACrB,oBAAC,WACC,+BAAC,QACC;AAAA,gCAAC,QAAI,YAAE,MAAM,GAAE;AAAA,YACf,oBAAC,QAAI,YAAE,aAAa,GAAE;AAAA,YACtB,oBAAC,QAAG,SAAS,GAAI,YAAE,cAAc,GAAE;AAAA,aACrC,GACF;AAAA,UACA,oBAAC,WACE,sBACH;AAAA,WACF,GACF;AAAA,QAEF,qBAAC,SAAI,WAAU,oBACZ;AAAA,wBACC;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK,MAAM,WAAW,KAAK,IAAI;AAAA,cAExC;AAAA,oCAAC,SAAI,OAAO,EAAC,OAAM,QAAQ,QAAO,QAAQ,eAAe,cAAa,GAAG,SAAQ,aAC/E,8BAAC,UAAK,MAAK,gBAAe,GAAG,sBAAsB,GACrD;AAAA,gBAAM;AAAA,gBAAE,EAAE,UAAU;AAAA;AAAA;AAAA,UACtB;AAAA,UAEF;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK,MAAM,mBAAmB,KAAK,IAAI;AAAA,cAEhD;AAAA,oCAAC,SAAI,OAAO,EAAC,OAAM,QAAQ,QAAO,QAAQ,eAAe,cAAa,GAAG,SAAQ,aAC/E,8BAAC,UAAK,MAAK,gBAAe,GAAG,oBAAoB,GACnD;AAAA,gBAAM;AAAA,gBAAE,EAAE,uBAAuB;AAAA;AAAA;AAAA,UACnC;AAAA,WACF;AAAA,SACF;AAAA,OACF,GACF;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"97b6de35ac4a8f739cf06eabc39facf249622fab"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return mn=function(){return l},l}mn();function VK(n,e){mn().f[0]++;let t;return mn().s[0]++,mn().b[1][0]++,n.value&&(mn().b[1][1]++,n.value.stops)?(mn().b[0][0]++,mn().s[1]++,n.value.stops.forEach((r,i)=>{mn().f[1]++,mn().s[2]++,Object.prototype.hasOwnProperty.call(e.refs,i)?mn().b[2][1]++:(mn().b[2][0]++,mn().s[3]++,t?mn().b[3][1]++:(mn().b[3][0]++,mn().s[4]++,t={...e}),mn().s[5]++,t[i]=Py("stop-"))})):mn().b[0][1]++,mn().s[6]++,t}class yle extends Xn.Component{constructor(){super(...arguments);Kn(this,"state",(mn().s[7]++,{refs:{}}));Kn(this,"onChange",(mn().s[32]++,(t,r)=>{if(mn().f[11]++,mn().s[33]++,r.type==="identity")mn().b[9][0]++,mn().s[34]++,r={type:r.type,property:r.property};else{mn().b[9][1]++;const i=(mn().s[35]++,r.type==="categorical"?(mn().b[10][0]++,""):(mn().b[10][1]++,0));mn().s[36]++,r={property:"",type:r.type,stops:[[{zoom:6,value:i},xf(this.props.fieldSpec)],[{zoom:10,value:i},xf(this.props.fieldSpec)]],...r}}mn().s[37]++,this.props.onChange(t,r)}))}componentDidMount(){mn().f[2]++;const t=(mn().s[8]++,VK(this.props,this.state));mn().s[9]++,t?(mn().b[4][0]++,mn().s[10]++,this.setState({refs:t})):mn().b[4][1]++}static getDerivedStateFromProps(t,r){mn().f[3]++;const i=(mn().s[11]++,VK(t,r));return mn().s[12]++,i?(mn().b[5][0]++,mn().s[13]++,{refs:i}):(mn().b[5][1]++,mn().s[14]++,null)}getFieldFunctionType(t){return mn().f[4]++,mn().s[15]++,t.expression.interpolated?(mn().b[6][0]++,mn().s[16]++,"exponential"):(mn().b[6][1]++,mn().s[17]++,t.type==="number"?(mn().b[7][0]++,mn().s[18]++,"interval"):(mn().b[7][1]++,mn().s[19]++,"categorical"))}getDataFunctionTypes(t){return mn().f[5]++,mn().s[20]++,t.expression.interpolated?(mn().b[8][0]++,mn().s[21]++,["interpolate","categorical","interval","exponential","identity"]):(mn().b[8][1]++,mn().s[22]++,["categorical","interval","identity"])}orderStopsByZoom(t){mn().f[6]++;const r=(mn().s[23]++,t.map((s,l)=>(mn().f[7]++,mn().s[24]++,{ref:this.state.refs[l],data:s})).sort((s,l)=>(mn().f[8]++,mn().s[25]++,Sj(s.data[0].zoom,l.data[0].zoom)))),i=(mn().s[26]++,{});return mn().s[27]++,r.forEach((s,l)=>{mn().f[9]++,mn().s[28]++,i[l]=s.ref}),mn().s[29]++,this.setState({refs:i}),mn().s[30]++,r.map(s=>(mn().f[10]++,mn().s[31]++,s.data))}changeStop(t,r,i){var f;mn().f[12]++;const s=(mn().s[38]++,mn().b[11][0]++,((f=this.props.value)==null?void 0:f.stops.slice(0))||(mn().b[11][1]++,[]));mn().s[39]++,s[t]=[{value:r.value,zoom:r.zoom===void 0?(mn().b[12][0]++,0):(mn().b[12][1]++,r.zoom)},i];const l=(mn().s[40]++,this.orderStopsByZoom(s)),o=(mn().s[41]++,{...this.props.value,stops:l});mn().s[42]++,this.onChange(this.props.fieldName,o)}changeBase(t){mn().f[13]++;const r=(mn().s[43]++,{...this.props.value,base:t});mn().s[44]++,r.base===void 0?(mn().b[13][0]++,mn().s[45]++,delete r.base):mn().b[13][1]++,mn().s[46]++,this.props.onChange(this.props.fieldName,r)}changeDataType(t){mn().f[14]++,mn().s[47]++,mn().b[15][0]++,t==="interpolate"&&(mn().b[15][1]++,this.props.onChangeToZoomFunction)?(mn().b[14][0]++,mn().s[48]++,this.props.onChangeToZoomFunction()):(mn().b[14][1]++,mn().s[49]++,this.onChange(this.props.fieldName,{...this.props.value,type:t}))}changeDataProperty(t,r){mn().f[15]++,mn().s[50]++,r?(mn().b[16][0]++,mn().s[51]++,this.props.value[t]=r):(mn().b[16][1]++,mn().s[52]++,delete this.props.value[t]),mn().s[53]++,this.onChange(this.props.fieldName,this.props.value)}render(){var i,s,l,o,f,y,x,B;mn().f[16]++;const t=(mn().s[54]++,this.props.t);mn().s[55]++,typeof((i=this.props.value)==null?void 0:i.type)>"u"?(mn().b[17][0]++,mn().s[56]++,this.props.value.type=this.getFieldFunctionType(this.props.fieldSpec)):mn().b[17][1]++;let r;return mn().s[57]++,(s=this.props.value)!=null&&s.stops?(mn().b[18][0]++,mn().s[58]++,r=this.props.value.stops.map((O,P)=>{var ne,G;mn().f[17]++;const U=(mn().s[59]++,typeof O[0]=="object"?(mn().b[19][0]++,O[0].zoom):(mn().b[19][1]++,void 0)),j=(mn().s[60]++,this.state.refs[P]),N=(mn().s[61]++,typeof O[0]=="object"?(mn().b[20][0]++,O[0].value):(mn().b[20][1]++,O[0])),Y=(mn().s[62]++,O[1]),H=(mn().s[63]++,ue.jsx(Ej,{onClick:(ne=this.props.onDeleteStop)==null?void 0:ne.bind(this,P)})),se=(mn().s[64]++,{"aria-label":t("Input value"),label:t("Data value"),value:N,onChange:oe=>(mn().f[18]++,mn().s[65]++,this.changeStop(P,{zoom:U,value:oe},Y))});let re;mn().s[66]++,((G=this.props.value)==null?void 0:G.type)==="categorical"?(mn().b[21][0]++,mn().s[67]++,re=ue.jsx(Rf,{...se})):(mn().b[21][1]++,mn().s[68]++,re=ue.jsx(rm,{...se}));let V=(mn().s[69]++,null);return mn().s[70]++,U!==void 0?(mn().b[22][0]++,mn().s[71]++,V=ue.jsx("div",{children:ue.jsx(rm,{"aria-label":"Zoom",value:U,onChange:oe=>(mn().f[19]++,mn().s[72]++,this.changeStop(P,{zoom:oe,value:N},Y)),min:0,max:22})})):mn().b[22][1]++,mn().s[73]++,ue.jsxs("tr",{children:[ue.jsx("td",{children:V}),ue.jsx("td",{children:re}),ue.jsx("td",{children:ue.jsx(gy,{"aria-label":t("Output value"),fieldName:this.props.fieldName,fieldSpec:this.props.fieldSpec,value:Y,onChange:(oe,he)=>(mn().f[20]++,mn().s[74]++,this.changeStop(P,{zoom:U,value:N},he))})}),ue.jsx("td",{children:H})]},j)})):mn().b[18][1]++,mn().s[75]++,ue.jsx("div",{className:"maputnik-data-spec-block",children:ue.jsxs("fieldset",{className:"maputnik-data-spec-property",children:[ue.jsx("legend",{children:Nx(this.props.fieldName)}),ue.jsxs("div",{className:"maputnik-data-fieldset-inner",children:[ue.jsx(la,{label:t("Function"),children:ue.jsx("div",{className:"maputnik-data-spec-property-input",children:ue.jsx(Hg,{value:this.props.value.type,onChange:O=>(mn().f[21]++,mn().s[76]++,this.changeDataType(O)),title:t("Select a type of data scale (default is 'categorical')."),options:this.getDataFunctionTypes(this.props.fieldSpec)})})},"function"),(mn().b[23][0]++,((l=this.props.value)==null?void 0:l.type)!=="identity"&&(mn().b[23][1]++,ue.jsx(la,{label:t("Base"),children:ue.jsx("div",{className:"maputnik-data-spec-property-input",children:ue.jsx(gy,{fieldName:"base",fieldSpec:Xo.function.base,value:(o=this.props.value)==null?void 0:o.base,onChange:(O,P)=>(mn().f[22]++,mn().s[77]++,this.changeBase(P))})})},"base"))),ue.jsx(la,{label:"Property",children:ue.jsx("div",{className:"maputnik-data-spec-property-input",children:ue.jsx(Rf,{value:(f=this.props.value)==null?void 0:f.property,title:t("Input a data property to base styles off of."),onChange:O=>(mn().f[23]++,mn().s[78]++,this.changeDataProperty("property",O))})})},"property"),(mn().b[24][0]++,r&&(mn().b[24][1]++,ue.jsx(la,{label:t("Default"),children:ue.jsx(gy,{fieldName:this.props.fieldName,fieldSpec:this.props.fieldSpec,value:(y=this.props.value)==null?void 0:y.default,onChange:(O,P)=>(mn().f[24]++,mn().s[79]++,this.changeDataProperty("default",P))})},"default"))),(mn().b[25][0]++,r&&(mn().b[25][1]++,ue.jsx("div",{className:"maputnik-function-stop",children:ue.jsxs("table",{className:"maputnik-function-stop-table",children:[ue.jsx("caption",{children:t("Stops")}),ue.jsx("thead",{children:ue.jsxs("tr",{children:[ue.jsx("th",{children:t("Zoom")}),ue.jsx("th",{children:t("Input value")}),ue.jsx("th",{rowSpan:2,children:t("Output value")})]})}),ue.jsx("tbody",{children:r})]})}))),ue.jsxs("div",{className:"maputnik-toolbox",children:[(mn().b[26][0]++,r&&(mn().b[26][1]++,ue.jsxs(Ha,{className:"maputnik-add-stop",onClick:(x=this.props.onAddStop)==null?void 0:x.bind(this),children:[ue.jsx("svg",{style:{width:"14px",height:"14px",verticalAlign:"text-bottom"},viewBox:"0 0 24 24",children:ue.jsx("path",{fill:"currentColor",d:bO})})," ",t("Add stop")]}))),ue.jsxs(Ha,{className:"maputnik-add-stop",onClick:(B=this.props.onExpressionClick)==null?void 0:B.bind(this),children:[ue.jsx("svg",{style:{width:"14px",height:"14px",verticalAlign:"text-bottom"},viewBox:"0 0 24 24",children:ue.jsx("path",{fill:"currentColor",d:SC})})," ",t("Convert to expression")]})]})]})]})})}}const vle=(mn().s[80]++,zs()(yle));function br(){var n="/home/runner/work/maputnik/maputnik/src/components/_ZoomProperty.tsx",e="6a4c93b52ca21ec4b555a0d2906ee27fc49f34f8",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/_ZoomProperty.tsx",statementMap:{0:{start:{line:16,column:16},end:{line:16,column:18}},1:{start:{line:17,column:2},end:{line:28,column:3}},2:{start:{line:18,column:4},end:{line:27,column:7}},3:{start:{line:19,column:6},end:{line:26,column:7}},4:{start:{line:20,column:8},end:{line:22,column:9}},5:{start:{line:21,column:10},end:{line:21,column:33}},6:{start:{line:23,column:8},end:{line:23,column:39}},7:{start:{line:25,column:8},end:{line:25,column:39}},8:{start:{line:29,column:2},end:{line:29,column:17}},9:{start:{line:32,column:24},end:{line:34,column:3}},10:{start:{line:35,column:10},end:{line:37,column:3}},11:{start:{line:39,column:20},end:{line:39,column:55}},12:{start:{line:40,column:4},end:{line:44,column:5}},13:{start:{line:41,column:6},end:{line:43,column:9}},14:{start:{line:47,column:20},end:{line:47,column:45}},15:{start:{line:48,column:4},end:{line:52,column:5}},16:{start:{line:49,column:6},end:{line:51,column:8}},17:{start:{line:53,column:4},end:{line:53,column:16}},18:{start:{line:57,column:26},end:{line:62,column:60}},19:{start:{line:58,column:6},end:{line:61,column:8}},20:{start:{line:62,column:22},end:{line:62,column:59}},21:{start:{line:63,column:20},end:{line:63,column:22}},22:{start:{line:64,column:4},end:{line:66,column:7}},23:{start:{line:65,column:6},end:{line:65,column:30}},24:{start:{line:67,column:4},end:{line:69,column:7}},25:{start:{line:70,column:4},end:{line:70,column:50}},26:{start:{line:70,column:39},end:{line:70,column:48}},27:{start:{line:73,column:18},end:{line:73,column:49}},28:{start:{line:74,column:4},end:{line:74,column:41}},29:{start:{line:75,column:25},end:{line:75,column:53}},30:{start:{line:76,column:25},end:{line:79,column:5}},31:{start:{line:80,column:4},end:{line:80,column:60}},32:{start:{line:83,column:25},end:{line:86,column:5}},33:{start:{line:87,column:4},end:{line:89,column:5}},34:{start:{line:88,column:6},end:{line:88,column:34}},35:{start:{line:90,column:4},end:{line:90,column:60}},36:{start:{line:92,column:19},end:{line:96,column:3}},37:{start:{line:93,column:4},end:{line:95,column:5}},38:{start:{line:94,column:6},end:{line:94,column:46}},39:{start:{line:98,column:14},end:{line:98,column:26}},40:{start:{line:99,column:23},end:{line:132,column:6}},41:{start:{line:100,column:24},end:{line:100,column:31}},42:{start:{line:101,column:20},end:{line:101,column:27}},43:{start:{line:102,column:44},end:{line:102,column:120}},44:{start:{line:103,column:6},end:{line:131,column:8}},45:{start:{line:112,column:43},end:{line:112,column:87}},46:{start:{line:124,column:43},end:{line:124,column:88}},47:{start:{line:133,column:4},end:{line:201,column:12}},48:{start:{line:144,column:39},end:{line:144,column:67}},49:{start:{line:161,column:43},end:{line:161,column:68}},50:{start:{line:204,column:4},end:{line:208,column:5}},51:{start:{line:205,column:6},end:{line:205,column:83}},52:{start:{line:207,column:6},end:{line:207,column:29}},53:{start:{line:211,column:21},end:{line:211,column:60}}},fnMap:{0:{name:"setStopRefs",decl:{start:{line:15,column:9},end:{line:15,column:20}},loc:{start:{line:15,column:35},end:{line:30,column:1}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:18,column:30},end:{line:18,column:31}},loc:{start:{line:18,column:45},end:{line:27,column:5}},line:18},2:{name:"(anonymous_2)",decl:{start:{line:38,column:2},end:{line:38,column:3}},loc:{start:{line:38,column:22},end:{line:45,column:3}},line:38},3:{name:"(anonymous_3)",decl:{start:{line:46,column:2},end:{line:46,column:3}},loc:{start:{line:46,column:48},end:{line:54,column:3}},line:46},4:{name:"(anonymous_4)",decl:{start:{line:56,column:2},end:{line:56,column:3}},loc:{start:{line:56,column:26},end:{line:71,column:3}},line:56},5:{name:"(anonymous_5)",decl:{start:{line:57,column:36},end:{line:57,column:37}},loc:{start:{line:57,column:51},end:{line:62,column:5}},line:57},6:{name:"(anonymous_6)",decl:{start:{line:62,column:12},end:{line:62,column:13}},loc:{start:{line:62,column:22},end:{line:62,column:59}},line:62},7:{name:"(anonymous_7)",decl:{start:{line:64,column:26},end:{line:64,column:27}},loc:{start:{line:64,column:41},end:{line:66,column:5}},line:64},8:{name:"(anonymous_8)",decl:{start:{line:70,column:29},end:{line:70,column:30}},loc:{start:{line:70,column:39},end:{line:70,column:48}},line:70},9:{name:"(anonymous_9)",decl:{start:{line:72,column:2},end:{line:72,column:3}},loc:{start:{line:72,column:45},end:{line:81,column:3}},line:72},10:{name:"(anonymous_10)",decl:{start:{line:82,column:2},end:{line:82,column:3}},loc:{start:{line:82,column:23},end:{line:91,column:3}},line:82},11:{name:"(anonymous_11)",decl:{start:{line:92,column:19},end:{line:92,column:20}},loc:{start:{line:92,column:29},end:{line:96,column:3}},line:92},12:{name:"(anonymous_12)",decl:{start:{line:97,column:2},end:{line:97,column:3}},loc:{start:{line:97,column:11},end:{line:202,column:3}},line:97},13:{name:"(anonymous_13)",decl:{start:{line:99,column:51},end:{line:99,column:52}},loc:{start:{line:99,column:66},end:{line:132,column:5}},line:99},14:{name:"(anonymous_14)",decl:{start:{line:112,column:26},end:{line:112,column:27}},loc:{start:{line:112,column:43},end:{line:112,column:87}},line:112},15:{name:"(anonymous_15)",decl:{start:{line:124,column:26},end:{line:124,column:27}},loc:{start:{line:124,column:43},end:{line:124,column:88}},line:124},16:{name:"(anonymous_16)",decl:{start:{line:144,column:26},end:{line:144,column:27}},loc:{start:{line:144,column:39},end:{line:144,column:67}},line:144},17:{name:"(anonymous_17)",decl:{start:{line:161,column:26},end:{line:161,column:27}},loc:{start:{line:161,column:43},end:{line:161,column:68}},line:161},18:{name:"(anonymous_18)",decl:{start:{line:203,column:2},end:{line:203,column:3}},loc:{start:{line:203,column:34},end:{line:209,column:3}},line:203}},branchMap:{0:{loc:{start:{line:17,column:2},end:{line:28,column:3}},type:"if",locations:[{start:{line:17,column:2},end:{line:28,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:17},1:{loc:{start:{line:17,column:6},end:{line:17,column:38}},type:"binary-expr",locations:[{start:{line:17,column:6},end:{line:17,column:17}},{start:{line:17,column:21},end:{line:17,column:38}}],line:17},2:{loc:{start:{line:19,column:6},end:{line:26,column:7}},type:"if",locations:[{start:{line:19,column:6},end:{line:26,column:7}},{start:{line:24,column:13},end:{line:26,column:7}}],line:19},3:{loc:{start:{line:20,column:8},end:{line:22,column:9}},type:"if",locations:[{start:{line:20,column:8},end:{line:22,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:20},4:{loc:{start:{line:40,column:4},end:{line:44,column:5}},type:"if",locations:[{start:{line:40,column:4},end:{line:44,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:40},5:{loc:{start:{line:48,column:4},end:{line:52,column:5}},type:"if",locations:[{start:{line:48,column:4},end:{line:52,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:48},6:{loc:{start:{line:87,column:4},end:{line:89,column:5}},type:"if",locations:[{start:{line:87,column:4},end:{line:89,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:87},7:{loc:{start:{line:93,column:4},end:{line:95,column:5}},type:"if",locations:[{start:{line:93,column:4},end:{line:95,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:93},8:{loc:{start:{line:93,column:8},end:{line:93,column:67}},type:"binary-expr",locations:[{start:{line:93,column:8},end:{line:93,column:30}},{start:{line:93,column:34},end:{line:93,column:67}}],line:93},9:{loc:{start:{line:204,column:4},end:{line:208,column:5}},type:"if",locations:[{start:{line:204,column:4},end:{line:208,column:5}},{start:{line:206,column:11},end:{line:208,column:5}}],line:204}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_ZoomProperty.tsx"],names:[],mappings:"AA+J4B,cACf,YADe;AA/J5B,OAAO,WAAW;AAClB,SAAQ,oBAAoB,4BAA2B;AACvD,OAAO,YAAY;AACnB,SAA0B,uBAAuB;AAEjD,OAAO,iBAAiB;AACxB,OAAO,eAAe;AACtB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAElB,OAAO,sBAAsB;AAC7B,OAAO,wBAAwB;AAE/B,OAAO,YAAY;AACnB,OAAO,qBAAqB;AAQ5B,SAAS,YAAY,OAAkC,OAA0B;AAE/E,MAAI,UAAmC,CAAC;AAExC,MAAG,MAAM,SAAU,MAAM,MAAwB,OAAO;AACtD,IAAC,MAAM,MAAwB,MAAM,QAAQ,CAAC,MAAM,QAAgB;AAClE,UAAG,OAAO,UAAU,eAAe,KAAK,CAAC,MAAM,MAAM,GAAG,GAAG;AACzD,YAAG,CAAC,SAAS;AACX,oBAAU,EAAC,GAAG,MAAK;AAAA,QACrB;AACA,gBAAQ,GAAG,IAAI,OAAO,OAAO;AAAA,MAC/B,OAAO;AACL,gBAAQ,GAAG,IAAI,MAAM,KAAK,GAAG;AAAA,MAC/B;AAAA,IACF,CAAC;AAAA,EACH;AACA,SAAO;AACT;AA4BA,MAAM,6BAA6B,MAAM,UAAwD;AAAA,EAC/F,OAAO,eAAe;AAAA,IACpB,QAAQ,CAAC;AAAA,EACX;AAAA,EAEA,QAAQ;AAAA,IACN,MAAM,CAAC;AAAA,EACT;AAAA,EAEA,oBAAoB;AAClB,UAAM,UAAU,YAAY,KAAK,OAAO,KAAK,KAAK;AAElD,QAAG,SAAS;AACV,WAAK,SAAS;AAAA,QACZ,MAAM;AAAA,MACR,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAA4C,OAA0B;AACpG,UAAM,UAAU,YAAY,OAAO,KAAK;AACxC,QAAG,SAAS;AACV,aAAO;AAAA,QACL,MAAM;AAAA,MACR;AAAA,IACF;AACA,WAAO;AAAA,EACT;AAAA;AAAA,EAGA,iBAAiB,OAA+B;AAC9C,UAAM,gBAAgB,MACnB,IAAI,CAAC,MAAM,QAAQ;AAClB,aAAO;AAAA,QACL,KAAK,KAAK,MAAM,KAAK,GAAG;AAAA,QACxB,MAAM;AAAA,MACR;AAAA,IACF,CAAC,EAEA,KAAK,CAAC,GAAG,MAAM,gBAAgB,EAAE,KAAK,CAAC,GAAI,EAAE,KAAK,CAAC,CAAE,CAAC;AAGzD,UAAM,UAAkC,CAAC;AACzC,kBACG,QAAQ,CAAC,MAAM,QAAO;AACrB,cAAQ,GAAG,IAAI,KAAK;AAAA,IACtB,CAAC;AAEH,SAAK,SAAS;AAAA,MACZ,MAAM;AAAA,IACR,CAAC;AAED,WAAO,cAAc,IAAI,CAAC,SAAS,KAAK,IAAI;AAAA,EAC9C;AAAA,EAEA,eAAe,WAAmB,UAA8B,OAAe;AAC7E,UAAM,QAAS,KAAK,MAAM,MAAwB,MAAM,MAAM,CAAC;AAC/D,UAAM,SAAS,IAAI,CAAC,UAAU,KAAK;AAEnC,UAAM,eAAe,KAAK,iBAAiB,KAAK;AAEhD,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,OAAO;AAAA,IACT;AACA,SAAK,MAAM,SAAU,KAAK,MAAM,WAAW,YAAY;AAAA,EACzD;AAAA,EAEA,WAAW,UAA8B;AACvC,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,MAAM;AAAA,IACR;AAEA,QAAI,aAAa,SAAS,QAAW;AACnC,aAAO,aAAa,MAAM;AAAA,IAC5B;AACA,SAAK,MAAM,SAAU,KAAK,MAAM,WAAW,YAAY;AAAA,EACzD;AAAA,EAEA,iBAAiB,CAAC,SAAiB;AACjC,QAAI,SAAS,iBAAiB,KAAK,MAAM,wBAAwB;AAC/D,WAAK,MAAM,uBAAuB,IAAI;AAAA,IACxC;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,aAAa,KAAK,MAAM,OAAO,MAAM,IAAI,CAAC,MAAM,QAAQ;AAC5D,YAAM,YAAY,KAAK,CAAC;AACxB,YAAM,QAAQ,KAAK,CAAC;AACpB,YAAM,gBAAgB,oBAAC,oBAAiB,SAAS,KAAK,MAAM,cAAc,KAAK,MAAM,GAAG,GAAG;AAC3F,aAAO;AAAA,QAAC;AAAA;AAAA,UAGN;AAAA,gCAAC,QACC;AAAA,cAAC;AAAA;AAAA,gBACC,cAAY,EAAE,MAAM;AAAA,gBACpB,OAAO;AAAA,gBACP,UAAU,iBAAe,KAAK,eAAe,KAAK,aAAa,KAAK;AAAA,gBACpE,KAAK;AAAA,gBACL,KAAK;AAAA;AAAA,YACP,GACF;AAAA,YACA,oBAAC,QACC;AAAA,cAAC;AAAA;AAAA,gBACC,cAAY,EAAE,cAAc;AAAA,gBAC5B,WAAW,KAAK,MAAM;AAAA,gBACtB,WAAW,KAAK,MAAM;AAAA,gBACtB;AAAA,gBACA,UAAU,CAAC,GAAG,aAAa,KAAK,eAAe,KAAK,WAAW,QAAkB;AAAA;AAAA,YACnF,GACF;AAAA,YACA,oBAAC,QACE,yBACH;AAAA;AAAA;AAAA,QAtBK,GAAG,KAAK,CAAC,CAAC,IAAI,KAAK,CAAC,CAAC;AAAA,MAuB5B;AAAA,IACF,CAAC;AAGD,WAAO,oBAAC,SAAI,WAAU,4BACpB,+BAAC,cAAS,WAAU,+BAClB;AAAA,0BAAC,YAAQ,6BAAmB,KAAK,MAAM,SAAS,GAAE;AAAA,MAClD,qBAAC,SAAI,WAAU,gCACb;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,UAAU;AAAA,YAEnB,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO;AAAA,gBACP,UAAU,CAAC,YAAoB,KAAK,eAAe,OAAO;AAAA,gBAC1D,OAAO,EAAE,yDAAyD;AAAA,gBAClE,SAAS,KAAK,qBAAqB,KAAK,MAAM,SAAU;AAAA;AAAA,YAC1D,GACF;AAAA;AAAA,QACF;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,MAAM;AAAA,YAEf,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,WAAW;AAAA,gBACX,WAAW,OAAO,SAAS;AAAA,gBAC3B,OAAO,KAAK,MAAM,OAAO;AAAA,gBACzB,UAAU,CAAC,GAAG,aAAa,KAAK,WAAW,QAA8B;AAAA;AAAA,YAC3E,GACF;AAAA;AAAA,QACF;AAAA,QACA,oBAAC,SAAI,WAAU,0BACb,+BAAC,WAAM,WAAU,mEACf;AAAA,8BAAC,aAAS,YAAE,OAAO,GAAE;AAAA,UACrB,oBAAC,WACC,+BAAC,QACC;AAAA,gCAAC,QAAI,YAAE,MAAM,GAAE;AAAA,YACf,oBAAC,QAAG,SAAS,GAAI,YAAE,cAAc,GAAE;AAAA,aACrC,GACF;AAAA,UACA,oBAAC,WACE,sBACH;AAAA,WACF,GACF;AAAA,QACA,qBAAC,SAAI,WAAU,oBACb;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK,MAAM,WAAW,KAAK,IAAI;AAAA,cAExC;AAAA,oCAAC,SAAI,OAAO,EAAC,OAAM,QAAQ,QAAO,QAAQ,eAAe,cAAa,GAAG,SAAQ,aAC/E,8BAAC,UAAK,MAAK,gBAAe,GAAG,sBAAsB,GACrD;AAAA,gBAAM;AAAA,gBAAE,EAAE,UAAU;AAAA;AAAA;AAAA,UACtB;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK,MAAM,mBAAmB,KAAK,IAAI;AAAA,cAEhD;AAAA,oCAAC,SAAI,OAAO,EAAC,OAAM,QAAQ,QAAO,QAAQ,eAAe,cAAa,GAAG,SAAQ,aAC/E,8BAAC,UAAK,MAAK,gBAAe,GAAG,oBAAoB,GACnD;AAAA,gBAAM;AAAA,gBAAE,EAAE,uBAAuB;AAAA;AAAA;AAAA,UACnC;AAAA,WACF;AAAA,SACF;AAAA,OACF,GACF;AAAA,EACF;AAAA,EAEA,qBAAqB,WAGlB;AACD,QAAI,UAAU,eAAe,MAAM,eAAe;AAChD,aAAO,CAAC,eAAe,eAAe,YAAY,eAAe,UAAU;AAAA,IAC7E,OACK;AACH,aAAO,CAAC,aAAa;AAAA,IACvB;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"6a4c93b52ca21ec4b555a0d2906ee27fc49f34f8"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return br=function(){return l},l}br();function $K(n,e){br().f[0]++;let t=(br().s[0]++,{});return br().s[1]++,br().b[1][0]++,n.value&&(br().b[1][1]++,n.value.stops)?(br().b[0][0]++,br().s[2]++,n.value.stops.forEach((r,i)=>{br().f[1]++,br().s[3]++,Object.prototype.hasOwnProperty.call(!e.refs,i)?(br().b[2][0]++,br().s[4]++,t?br().b[3][1]++:(br().b[3][0]++,br().s[5]++,t={...e}),br().s[6]++,t[i]=Py("stop-")):(br().b[2][1]++,br().s[7]++,t[i]=e.refs[i])})):br().b[0][1]++,br().s[8]++,t}class Bj extends Xn.Component{constructor(){super(...arguments);Kn(this,"state",(br().s[10]++,{refs:{}}));Kn(this,"changeDataType",(br().s[36]++,t=>{br().f[11]++,br().s[37]++,br().b[8][0]++,t!=="interpolate"&&(br().b[8][1]++,this.props.onChangeToDataFunction)?(br().b[7][0]++,br().s[38]++,this.props.onChangeToDataFunction(t)):br().b[7][1]++}))}componentDidMount(){br().f[2]++;const t=(br().s[11]++,$K(this.props,this.state));br().s[12]++,t?(br().b[4][0]++,br().s[13]++,this.setState({refs:t})):br().b[4][1]++}static getDerivedStateFromProps(t,r){br().f[3]++;const i=(br().s[14]++,$K(t,r));return br().s[15]++,i?(br().b[5][0]++,br().s[16]++,{refs:i}):(br().b[5][1]++,br().s[17]++,null)}orderStopsByZoom(t){br().f[4]++;const r=(br().s[18]++,t.map((s,l)=>(br().f[5]++,br().s[19]++,{ref:this.state.refs[l],data:s})).sort((s,l)=>(br().f[6]++,br().s[20]++,Sj(s.data[0],l.data[0])))),i=(br().s[21]++,{});return br().s[22]++,r.forEach((s,l)=>{br().f[7]++,br().s[23]++,i[l]=s.ref}),br().s[24]++,this.setState({refs:i}),br().s[25]++,r.map(s=>(br().f[8]++,br().s[26]++,s.data))}changeZoomStop(t,r,i){br().f[9]++;const s=(br().s[27]++,this.props.value.stops.slice(0));br().s[28]++,s[t]=[r,i];const l=(br().s[29]++,this.orderStopsByZoom(s)),o=(br().s[30]++,{...this.props.value,stops:l});br().s[31]++,this.props.onChange(this.props.fieldName,o)}changeBase(t){br().f[10]++;const r=(br().s[32]++,{...this.props.value,base:t});br().s[33]++,r.base===void 0?(br().b[6][0]++,br().s[34]++,delete r.base):br().b[6][1]++,br().s[35]++,this.props.onChange(this.props.fieldName,r)}render(){var i,s,l,o;br().f[12]++;const t=(br().s[39]++,this.props.t),r=(br().s[40]++,(i=this.props.value)==null?void 0:i.stops.map((f,y)=>{var P;br().f[13]++;const x=(br().s[41]++,f[0]),B=(br().s[42]++,f[1]),O=(br().s[43]++,ue.jsx(Ej,{onClick:(P=this.props.onDeleteStop)==null?void 0:P.bind(this,y)}));return br().s[44]++,ue.jsxs("tr",{children:[ue.jsx("td",{children:ue.jsx(rm,{"aria-label":t("Zoom"),value:x,onChange:U=>(br().f[14]++,br().s[45]++,this.changeZoomStop(y,U,B)),min:0,max:22})}),ue.jsx("td",{children:ue.jsx(gy,{"aria-label":t("Output value"),fieldName:this.props.fieldName,fieldSpec:this.props.fieldSpec,value:B,onChange:(U,j)=>(br().f[15]++,br().s[46]++,this.changeZoomStop(y,x,j))})}),ue.jsx("td",{children:O})]},`${f[0]}-${f[1]}`)}));return br().s[47]++,ue.jsx("div",{className:"maputnik-data-spec-block",children:ue.jsxs("fieldset",{className:"maputnik-data-spec-property",children:[ue.jsx("legend",{children:Nx(this.props.fieldName)}),ue.jsxs("div",{className:"maputnik-data-fieldset-inner",children:[ue.jsx(la,{label:t("Function"),children:ue.jsx("div",{className:"maputnik-data-spec-property-input",children:ue.jsx(Hg,{value:"interpolate",onChange:f=>(br().f[16]++,br().s[48]++,this.changeDataType(f)),title:t("Select a type of data scale (default is 'categorical')."),options:this.getDataFunctionTypes(this.props.fieldSpec)})})}),ue.jsx(la,{label:t("Base"),children:ue.jsx("div",{className:"maputnik-data-spec-property-input",children:ue.jsx(gy,{fieldName:"base",fieldSpec:Xo.function.base,value:(s=this.props.value)==null?void 0:s.base,onChange:(f,y)=>(br().f[17]++,br().s[49]++,this.changeBase(y))})})}),ue.jsx("div",{className:"maputnik-function-stop",children:ue.jsxs("table",{className:"maputnik-function-stop-table maputnik-function-stop-table--zoom",children:[ue.jsx("caption",{children:t("Stops")}),ue.jsx("thead",{children:ue.jsxs("tr",{children:[ue.jsx("th",{children:t("Zoom")}),ue.jsx("th",{rowSpan:2,children:t("Output value")})]})}),ue.jsx("tbody",{children:r})]})}),ue.jsxs("div",{className:"maputnik-toolbox",children:[ue.jsxs(Ha,{className:"maputnik-add-stop",onClick:(l=this.props.onAddStop)==null?void 0:l.bind(this),children:[ue.jsx("svg",{style:{width:"14px",height:"14px",verticalAlign:"text-bottom"},viewBox:"0 0 24 24",children:ue.jsx("path",{fill:"currentColor",d:bO})})," ",t("Add stop")]}),ue.jsxs(Ha,{className:"maputnik-add-stop",onClick:(o=this.props.onExpressionClick)==null?void 0:o.bind(this),children:[ue.jsx("svg",{style:{width:"14px",height:"14px",verticalAlign:"text-bottom"},viewBox:"0 0 24 24",children:ue.jsx("path",{fill:"currentColor",d:SC})})," ",t("Convert to expression")]})]})]})]})})}getDataFunctionTypes(t){return br().f[18]++,br().s[50]++,t["property-type"]==="data-driven"?(br().b[9][0]++,br().s[51]++,["interpolate","categorical","interval","exponential","identity"]):(br().b[9][1]++,br().s[52]++,["interpolate"])}}Kn(Bj,"defaultProps",(br().s[9]++,{errors:{}}));const Cle=(br().s[53]++,zs()(Bj));function Dt(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldFunction.tsx",e="36be9049018d9eb4ab6b3a8eeeb8db87a4e7a5ee",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldFunction.tsx",statementMap:{0:{start:{line:10,column:2},end:{line:10,column:78}},1:{start:{line:13,column:2},end:{line:13,column:74}},2:{start:{line:16,column:2},end:{line:18,column:5}},3:{start:{line:17,column:4},end:{line:17,column:52}},4:{start:{line:21,column:2},end:{line:21,column:123}},5:{start:{line:24,column:2},end:{line:26,column:5}},6:{start:{line:25,column:4},end:{line:25,column:83}},7:{start:{line:29,column:2},end:{line:29,column:64}},8:{start:{line:32,column:16},end:{line:32,column:47}},9:{start:{line:33,column:2},end:{line:33,column:38}},10:{start:{line:36,column:2},end:{line:38,column:3}},11:{start:{line:37,column:4},end:{line:37,column:37}},12:{start:{line:39,column:2},end:{line:39,column:15}},13:{start:{line:42,column:2},end:{line:54,column:3}},14:{start:{line:43,column:4},end:{line:43,column:19}},15:{start:{line:44,column:9},end:{line:54,column:3}},16:{start:{line:45,column:4},end:{line:45,column:19}},17:{start:{line:46,column:9},end:{line:54,column:3}},18:{start:{line:47,column:4},end:{line:47,column:19}},19:{start:{line:48,column:9},end:{line:54,column:3}},20:{start:{line:49,column:4},end:{line:49,column:27}},21:{start:{line:50,column:9},end:{line:54,column:3}},22:{start:{line:51,column:4},end:{line:51,column:27}},23:{start:{line:53,column:4},end:{line:53,column:24}},24:{start:{line:58,column:4},end:{line:58,column:17}},25:{start:{line:59,column:4},end:{line:62,column:6}},26:{start:{line:65,column:4},end:{line:72,column:5}},27:{start:{line:66,column:6},end:{line:66,column:16}},28:{start:{line:68,column:6},end:{line:71,column:8}},29:{start:{line:75,column:4},end:{line:77,column:5}},30:{start:{line:76,column:6},end:{line:76,column:27}},31:{start:{line:78,column:4},end:{line:80,column:5}},32:{start:{line:79,column:6},end:{line:79,column:24}},33:{start:{line:81,column:4},end:{line:81,column:25}},34:{start:{line:83,column:12},end:{line:99,column:3}},35:{start:{line:84,column:18},end:{line:84,column:49}},36:{start:{line:85,column:21},end:{line:85,column:44}},37:{start:{line:86,column:4},end:{line:93,column:5}},38:{start:{line:87,column:6},end:{line:90,column:9}},39:{start:{line:92,column:6},end:{line:92,column:49}},40:{start:{line:94,column:25},end:{line:97,column:5}},41:{start:{line:98,column:4},end:{line:98,column:60}},42:{start:{line:100,column:21},end:{line:106,column:3}},43:{start:{line:101,column:37},end:{line:101,column:47}},44:{start:{line:102,column:4},end:{line:102,column:54}},45:{start:{line:103,column:4},end:{line:105,column:7}},46:{start:{line:107,column:15},end:{line:118,column:3}},47:{start:{line:108,column:18},end:{line:108,column:49}},48:{start:{line:109,column:4},end:{line:109,column:29}},49:{start:{line:110,column:23},end:{line:113,column:5}},50:{start:{line:114,column:4},end:{line:116,column:5}},51:{start:{line:115,column:6},end:{line:115,column:33}},52:{start:{line:117,column:4},end:{line:117,column:60}},53:{start:{line:119,column:21},end:{line:148,column:3}},54:{start:{line:120,column:22},end:{line:120,column:32}},55:{start:{line:122,column:4},end:{line:146,column:5}},56:{start:{line:123,column:6},end:{line:138,column:7}},57:{start:{line:124,column:8},end:{line:129,column:10}},58:{start:{line:127,column:12},end:{line:127,column:88}},59:{start:{line:131,column:8},end:{line:137,column:10}},60:{start:{line:140,column:6},end:{line:145,column:8}},61:{start:{line:147,column:4},end:{line:147,column:56}},62:{start:{line:149,column:19},end:{line:165,column:3}},63:{start:{line:150,column:33},end:{line:150,column:43}},64:{start:{line:151,column:4},end:{line:164,column:5}},65:{start:{line:152,column:6},end:{line:155,column:9}},66:{start:{line:156,column:6},end:{line:158,column:9}},67:{start:{line:159,column:11},end:{line:164,column:5}},68:{start:{line:160,column:6},end:{line:160,column:47}},69:{start:{line:161,column:6},end:{line:163,column:9}},70:{start:{line:166,column:12},end:{line:169,column:3}},71:{start:{line:167,column:33},end:{line:167,column:43}},72:{start:{line:168,column:4},end:{line:168,column:140}},73:{start:{line:170,column:19},end:{line:181,column:3}},74:{start:{line:171,column:33},end:{line:171,column:43}},75:{start:{line:173,column:4},end:{line:179,column:5}},76:{start:{line:174,column:6},end:{line:174,column:67}},77:{start:{line:175,column:11},end:{line:179,column:5}},78:{start:{line:176,column:6},end:{line:176,column:43}},79:{start:{line:178,column:6},end:{line:178,column:70}},80:{start:{line:180,column:4},end:{line:180,column:58}},81:{start:{line:182,column:21},end:{line:220,column:3}},82:{start:{line:183,column:25},end:{line:183,column:72}},83:{start:{line:184,column:22},end:{line:184,column:61}},84:{start:{line:185,column:22},end:{line:185,column:32}},85:{start:{line:187,column:4},end:{line:218,column:5}},86:{start:{line:188,column:6},end:{line:207,column:7}},87:{start:{line:189,column:8},end:{line:196,column:10}},88:{start:{line:194,column:12},end:{line:194,column:111}},89:{start:{line:198,column:8},end:{line:206,column:10}},90:{start:{line:209,column:6},end:{line:217,column:8}},91:{start:{line:219,column:4},end:{line:219,column:56}},92:{start:{line:221,column:18},end:{line:223,column:3}},93:{start:{line:222,column:4},end:{line:222,column:39}},94:{start:{line:224,column:20},end:{line:226,column:3}},95:{start:{line:225,column:4},end:{line:225,column:40}},96:{start:{line:228,column:25},end:{line:228,column:35}},97:{start:{line:229,column:22},end:{line:229,column:132}},98:{start:{line:231,column:4},end:{line:295,column:5}},99:{start:{line:232,column:6},end:{line:247,column:8}},100:{start:{line:248,column:11},end:{line:295,column:5}},101:{start:{line:249,column:6},end:{line:263,column:8}},102:{start:{line:264,column:11},end:{line:295,column:5}},103:{start:{line:265,column:6},end:{line:279,column:8}},104:{start:{line:281,column:6},end:{line:294,column:8}},105:{start:{line:296,column:4},end:{line:296,column:148}}},fnMap:{0:{name:"isLiteralExpression",decl:{start:{line:9,column:9},end:{line:9,column:28}},loc:{start:{line:9,column:36},end:{line:11,column:1}},line:9},1:{name:"isGetExpression",decl:{start:{line:12,column:9},end:{line:12,column:24}},loc:{start:{line:12,column:32},end:{line:14,column:1}},line:12},2:{name:"isZoomField",decl:{start:{line:15,column:9},end:{line:15,column:20}},loc:{start:{line:15,column:28},end:{line:19,column:1}},line:15},3:{name:"(anonymous_3)",decl:{start:{line:16,column:168},end:{line:16,column:169}},loc:{start:{line:16,column:178},end:{line:18,column:3}},line:16},4:{name:"isIdentityProperty",decl:{start:{line:20,column:9},end:{line:20,column:27}},loc:{start:{line:20,column:35},end:{line:22,column:1}},line:20},5:{name:"isDataStopProperty",decl:{start:{line:23,column:9},end:{line:23,column:27}},loc:{start:{line:23,column:35},end:{line:27,column:1}},line:23},6:{name:"(anonymous_6)",decl:{start:{line:24,column:168},end:{line:24,column:169}},loc:{start:{line:24,column:178},end:{line:26,column:3}},line:24},7:{name:"isDataField",decl:{start:{line:28,column:9},end:{line:28,column:20}},loc:{start:{line:28,column:28},end:{line:30,column:1}},line:28},8:{name:"isPrimative",decl:{start:{line:31,column:9},end:{line:31,column:20}},loc:{start:{line:31,column:28},end:{line:34,column:1}},line:31},9:{name:"isArrayOfPrimatives",decl:{start:{line:35,column:9},end:{line:35,column:28}},loc:{start:{line:35,column:37},end:{line:40,column:1}},line:35},10:{name:"getDataType",decl:{start:{line:41,column:9},end:{line:41,column:20}},loc:{start:{line:41,column:44},end:{line:55,column:1}},line:41},11:{name:"(anonymous_11)",decl:{start:{line:57,column:2},end:{line:57,column:3}},loc:{start:{line:57,column:21},end:{line:63,column:3}},line:57},12:{name:"(anonymous_12)",decl:{start:{line:64,column:2},end:{line:64,column:3}},loc:{start:{line:64,column:48},end:{line:73,column:3}},line:64},13:{name:"(anonymous_13)",decl:{start:{line:74,column:2},end:{line:74,column:3}},loc:{start:{line:74,column:34},end:{line:82,column:3}},line:74},14:{name:"(anonymous_14)",decl:{start:{line:83,column:12},end:{line:83,column:13}},loc:{start:{line:83,column:18},end:{line:99,column:3}},line:83},15:{name:"(anonymous_15)",decl:{start:{line:100,column:21},end:{line:100,column:22}},loc:{start:{line:100,column:27},end:{line:106,column:3}},line:100},16:{name:"(anonymous_16)",decl:{start:{line:107,column:15},end:{line:107,column:16}},loc:{start:{line:107,column:28},end:{line:118,column:3}},line:107},17:{name:"(anonymous_17)",decl:{start:{line:119,column:21},end:{line:119,column:22}},loc:{start:{line:119,column:27},end:{line:148,column:3}},line:119},18:{name:"(anonymous_18)",decl:{start:{line:126,column:33},end:{line:126,column:34}},loc:{start:{line:126,column:43},end:{line:128,column:11}},line:126},19:{name:"(anonymous_19)",decl:{start:{line:149,column:19},end:{line:149,column:20}},loc:{start:{line:149,column:25},end:{line:165,column:3}},line:149},20:{name:"(anonymous_20)",decl:{start:{line:166,column:12},end:{line:166,column:13}},loc:{start:{line:166,column:18},end:{line:169,column:3}},line:166},21:{name:"(anonymous_21)",decl:{start:{line:170,column:19},end:{line:170,column:20}},loc:{start:{line:170,column:25},end:{line:181,column:3}},line:170},22:{name:"(anonymous_22)",decl:{start:{line:182,column:21},end:{line:182,column:22}},loc:{start:{line:182,column:27},end:{line:220,column:3}},line:182},23:{name:"(anonymous_23)",decl:{start:{line:193,column:33},end:{line:193,column:34}},loc:{start:{line:193,column:43},end:{line:195,column:11}},line:193},24:{name:"(anonymous_24)",decl:{start:{line:221,column:18},end:{line:221,column:19}},loc:{start:{line:221,column:24},end:{line:223,column:3}},line:221},25:{name:"(anonymous_25)",decl:{start:{line:224,column:20},end:{line:224,column:21}},loc:{start:{line:224,column:26},end:{line:226,column:3}},line:224},26:{name:"(anonymous_26)",decl:{start:{line:227,column:2},end:{line:227,column:3}},loc:{start:{line:227,column:11},end:{line:297,column:3}},line:227}},branchMap:{0:{loc:{start:{line:10,column:9},end:{line:10,column:77}},type:"binary-expr",locations:[{start:{line:10,column:9},end:{line:10,column:29}},{start:{line:10,column:33},end:{line:10,column:51}},{start:{line:10,column:55},end:{line:10,column:77}}],line:10},1:{loc:{start:{line:13,column:9},end:{line:13,column:73}},type:"binary-expr",locations:[{start:{line:13,column:9},end:{line:13,column:29}},{start:{line:13,column:33},end:{line:13,column:51}},{start:{line:13,column:55},end:{line:13,column:73}}],line:13},2:{loc:{start:{line:16,column:9},end:{line:18,column:4}},type:"binary-expr",locations:[{start:{line:16,column:9},end:{line:16,column:34}},{start:{line:16,column:38},end:{line:16,column:49}},{start:{line:16,column:53},end:{line:16,column:90}},{start:{line:16,column:94},end:{line:16,column:120}},{start:{line:16,column:124},end:{line:16,column:146}},{start:{line:16,column:150},end:{line:18,column:4}}],line:16},3:{loc:{start:{line:17,column:11},end:{line:17,column:51}},type:"binary-expr",locations:[{start:{line:17,column:11},end:{line:17,column:30}},{start:{line:17,column:34},end:{line:17,column:51}}],line:17},4:{loc:{start:{line:21,column:9},end:{line:21,column:122}},type:"binary-expr",locations:[{start:{line:21,column:9},end:{line:21,column:34}},{start:{line:21,column:38},end:{line:21,column:63}},{start:{line:21,column:67},end:{line:21,column:122}}],line:21},5:{loc:{start:{line:24,column:9},end:{line:26,column:4}},type:"binary-expr",locations:[{start:{line:24,column:9},end:{line:24,column:34}},{start:{line:24,column:38},end:{line:24,column:49}},{start:{line:24,column:53},end:{line:24,column:90}},{start:{line:24,column:94},end:{line:24,column:116}},{start:{line:24,column:120},end:{line:24,column:146}},{start:{line:24,column:150},end:{line:26,column:4}}],line:24},6:{loc:{start:{line:25,column:11},end:{line:25,column:82}},type:"binary-expr",locations:[{start:{line:25,column:11},end:{line:25,column:30}},{start:{line:25,column:34},end:{line:25,column:51}},{start:{line:25,column:55},end:{line:25,column:82}}],line:25},7:{loc:{start:{line:29,column:9},end:{line:29,column:63}},type:"binary-expr",locations:[{start:{line:29,column:9},end:{line:29,column:34}},{start:{line:29,column:38},end:{line:29,column:63}}],line:29},8:{loc:{start:{line:36,column:2},end:{line:38,column:3}},type:"if",locations:[{start:{line:36,column:2},end:{line:38,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:36},9:{loc:{start:{line:41,column:28},end:{line:41,column:42}},type:"default-arg",locations:[{start:{line:41,column:40},end:{line:41,column:42}}],line:41},10:{loc:{start:{line:42,column:2},end:{line:54,column:3}},type:"if",locations:[{start:{line:42,column:2},end:{line:54,column:3}},{start:{line:44,column:9},end:{line:54,column:3}}],line:42},11:{loc:{start:{line:44,column:9},end:{line:54,column:3}},type:"if",locations:[{start:{line:44,column:9},end:{line:54,column:3}},{start:{line:46,column:9},end:{line:54,column:3}}],line:44},12:{loc:{start:{line:46,column:9},end:{line:54,column:3}},type:"if",locations:[{start:{line:46,column:9},end:{line:54,column:3}},{start:{line:48,column:9},end:{line:54,column:3}}],line:46},13:{loc:{start:{line:46,column:13},end:{line:46,column:69}},type:"binary-expr",locations:[{start:{line:46,column:13},end:{line:46,column:39}},{start:{line:46,column:43},end:{line:46,column:69}}],line:46},14:{loc:{start:{line:48,column:9},end:{line:54,column:3}},type:"if",locations:[{start:{line:48,column:9},end:{line:54,column:3}},{start:{line:50,column:9},end:{line:54,column:3}}],line:48},15:{loc:{start:{line:50,column:9},end:{line:54,column:3}},type:"if",locations:[{start:{line:50,column:9},end:{line:54,column:3}},{start:{line:52,column:9},end:{line:54,column:3}}],line:50},16:{loc:{start:{line:65,column:4},end:{line:72,column:5}},type:"if",locations:[{start:{line:65,column:4},end:{line:72,column:5}},{start:{line:67,column:11},end:{line:72,column:5}}],line:65},17:{loc:{start:{line:75,column:4},end:{line:77,column:5}},type:"if",locations:[{start:{line:75,column:4},end:{line:77,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:75},18:{loc:{start:{line:78,column:4},end:{line:80,column:5}},type:"if",locations:[{start:{line:78,column:4},end:{line:80,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:78},19:{loc:{start:{line:86,column:4},end:{line:93,column:5}},type:"if",locations:[{start:{line:86,column:4},end:{line:93,column:5}},{start:{line:91,column:11},end:{line:93,column:5}}],line:86},20:{loc:{start:{line:114,column:4},end:{line:116,column:5}},type:"if",locations:[{start:{line:114,column:4},end:{line:116,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:114},21:{loc:{start:{line:122,column:4},end:{line:146,column:5}},type:"if",locations:[{start:{line:122,column:4},end:{line:146,column:5}},{start:{line:139,column:11},end:{line:146,column:5}}],line:122},22:{loc:{start:{line:123,column:6},end:{line:138,column:7}},type:"if",locations:[{start:{line:123,column:6},end:{line:138,column:7}},{start:{line:130,column:13},end:{line:138,column:7}}],line:123},23:{loc:{start:{line:127,column:34},end:{line:127,column:86}},type:"binary-expr",locations:[{start:{line:127,column:34},end:{line:127,column:41}},{start:{line:127,column:45},end:{line:127,column:86}}],line:127},24:{loc:{start:{line:142,column:14},end:{line:142,column:64}},type:"binary-expr",locations:[{start:{line:142,column:14},end:{line:142,column:19}},{start:{line:142,column:23},end:{line:142,column:64}}],line:142},25:{loc:{start:{line:143,column:15},end:{line:143,column:65}},type:"binary-expr",locations:[{start:{line:143,column:15},end:{line:143,column:20}},{start:{line:143,column:24},end:{line:143,column:65}}],line:143},26:{loc:{start:{line:151,column:4},end:{line:164,column:5}},type:"if",locations:[{start:{line:151,column:4},end:{line:164,column:5}},{start:{line:159,column:11},end:{line:164,column:5}}],line:151},27:{loc:{start:{line:159,column:11},end:{line:164,column:5}},type:"if",locations:[{start:{line:159,column:11},end:{line:164,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:159},28:{loc:{start:{line:168,column:11},end:{line:168,column:139}},type:"binary-expr",locations:[{start:{line:168,column:11},end:{line:168,column:33}},{start:{line:168,column:37},end:{line:168,column:63}},{start:{line:168,column:67},end:{line:168,column:85}},{start:{line:168,column:89},end:{line:168,column:109}},{start:{line:168,column:113},end:{line:168,column:139}}],line:168},29:{loc:{start:{line:173,column:4},end:{line:179,column:5}},type:"if",locations:[{start:{line:173,column:4},end:{line:179,column:5}},{start:{line:175,column:11},end:{line:179,column:5}}],line:173},30:{loc:{start:{line:173,column:8},end:{line:173,column:53}},type:"binary-expr",locations:[{start:{line:173,column:8},end:{line:173,column:33}},{start:{line:173,column:37},end:{line:173,column:53}}],line:173},31:{loc:{start:{line:175,column:11},end:{line:179,column:5}},type:"if",locations:[{start:{line:175,column:11},end:{line:179,column:5}},{start:{line:177,column:11},end:{line:179,column:5}}],line:175},32:{loc:{start:{line:178,column:31},end:{line:178,column:68}},type:"binary-expr",locations:[{start:{line:178,column:31},end:{line:178,column:36}},{start:{line:178,column:40},end:{line:178,column:68}}],line:178},33:{loc:{start:{line:184,column:22},end:{line:184,column:61}},type:"cond-expr",locations:[{start:{line:184,column:55},end:{line:184,column:57}},{start:{line:184,column:60},end:{line:184,column:61}}],line:184},34:{loc:{start:{line:187,column:4},end:{line:218,column:5}},type:"if",locations:[{start:{line:187,column:4},end:{line:218,column:5}},{start:{line:208,column:11},end:{line:218,column:5}}],line:187},35:{loc:{start:{line:188,column:6},end:{line:207,column:7}},type:"if",locations:[{start:{line:188,column:6},end:{line:207,column:7}},{start:{line:197,column:13},end:{line:207,column:7}}],line:188},36:{loc:{start:{line:194,column:57},end:{line:194,column:109}},type:"binary-expr",locations:[{start:{line:194,column:57},end:{line:194,column:64}},{start:{line:194,column:68},end:{line:194,column:109}}],line:194},37:{loc:{start:{line:214,column:42},end:{line:214,column:103}},type:"binary-expr",locations:[{start:{line:214,column:42},end:{line:214,column:58}},{start:{line:214,column:62},end:{line:214,column:103}}],line:214},38:{loc:{start:{line:215,column:43},end:{line:215,column:104}},type:"binary-expr",locations:[{start:{line:215,column:43},end:{line:215,column:59}},{start:{line:215,column:63},end:{line:215,column:104}}],line:215},39:{loc:{start:{line:229,column:22},end:{line:229,column:132}},type:"cond-expr",locations:[{start:{line:229,column:74},end:{line:229,column:101}},{start:{line:229,column:104},end:{line:229,column:132}}],line:229},40:{loc:{start:{line:231,column:4},end:{line:295,column:5}},type:"if",locations:[{start:{line:231,column:4},end:{line:295,column:5}},{start:{line:248,column:11},end:{line:295,column:5}}],line:231},41:{loc:{start:{line:248,column:11},end:{line:295,column:5}},type:"if",locations:[{start:{line:248,column:11},end:{line:295,column:5}},{start:{line:264,column:11},end:{line:295,column:5}}],line:248},42:{loc:{start:{line:264,column:11},end:{line:295,column:5}},type:"if",locations:[{start:{line:264,column:11},end:{line:295,column:5}},{start:{line:280,column:11},end:{line:295,column:5}}],line:264}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0,87:0,88:0,89:0,90:0,91:0,92:0,93:0,94:0,95:0,96:0,97:0,98:0,99:0,100:0,101:0,102:0,103:0,104:0,105:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0},b:{0:[0,0,0],1:[0,0,0],2:[0,0,0,0,0,0],3:[0,0],4:[0,0,0],5:[0,0,0,0,0,0],6:[0,0,0],7:[0,0],8:[0,0],9:[0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0],26:[0,0],27:[0,0],28:[0,0,0,0,0],29:[0,0],30:[0,0],31:[0,0],32:[0,0],33:[0,0],34:[0,0],35:[0,0],36:[0,0],37:[0,0],38:[0,0],39:[0,0],40:[0,0],41:[0,0],42:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldFunction.tsx"],names:[],mappings:"AAkVQ;AAlVR,OAAO,WAAW;AAElB,OAAO,kBAAkB;AACzB,OAAO,kBAA4B;AACnC,OAAO,kBAAkB;AACzB,OAAO,wBAAwB;AAC/B,SAAQ,YAAY,qBAAoB;AACxC,SAAQ,2BAA0B;AAGlC,SAAS,oBAAoB,OAAY;AACvC,SAAQ,MAAM,QAAQ,KAAK,KAAK,MAAM,WAAW,KAAK,MAAM,CAAC,MAAM;AACrE;AAEA,SAAS,gBAAgB,OAAY;AACnC,SACE,MAAM,QAAQ,KAAK,KACnB,MAAM,WAAW,KACjB,MAAM,CAAC,MAAM;AAEjB;AAEA,SAAS,YAAY,OAAY;AAC/B,SACE,OAAO,UAAW,YAClB,MAAM,SACN,OAAO,MAAM,aAAc,eAC3B,MAAM,QAAQ,MAAM,KAAK,KACzB,MAAM,MAAM,SAAS,KACrB,MAAM,MAAM,MAAM,CAAC,SAAe;AAChC,WACE,MAAM,QAAQ,IAAI,KAClB,KAAK,WAAW;AAAA,EAEpB,CAAC;AAEL;AAEA,SAAS,mBAAmB,OAAY;AACtC,SACE,OAAO,UAAW,YAClB,MAAM,SAAS,cACf,OAAO,UAAU,eAAe,KAAK,OAAO,UAAU;AAE1D;AAEA,SAAS,mBAAmB,OAAY;AACtC,SACE,OAAO,UAAW,YAClB,MAAM,SACN,OAAO,MAAM,aAAc,eAC3B,MAAM,MAAM,SAAS,KACrB,MAAM,QAAQ,MAAM,KAAK,KACzB,MAAM,MAAM,MAAM,CAAC,SAAe;AAChC,WACE,MAAM,QAAQ,IAAI,KAClB,KAAK,WAAW,KAChB,OAAO,KAAK,CAAC,MAAO;AAAA,EAExB,CAAC;AAEL;AAEA,SAAS,YAAY,OAAY;AAC/B,SACE,mBAAmB,KAAK,KACxB,mBAAmB,KAAK;AAE5B;AAEA,SAAS,YAAY,OAAgD;AACnE,QAAM,QAAQ,CAAC,UAAU,WAAW,QAAQ;AAC5C,SAAO,MAAM,SAAS,OAAO,KAAM;AACrC;AAEA,SAAS,oBAAoB,QAAyD;AACpF,MAAI,MAAM,QAAQ,MAAM,GAAG;AACzB,WAAO,OAAO,MAAM,WAAW;AAAA,EACjC;AACA,SAAO;AACT;AAEA,SAAS,YAAY,OAAY,YAAU,CAAC,GAAU;AACpD,MAAI,UAAU,QAAW;AACvB,WAAO;AAAA,EACT,WACS,YAAY,KAAK,GAAG;AAC3B,WAAO;AAAA,EACT,WACS,UAAU,SAAS,WAAW,oBAAoB,KAAK,GAAG;AACjE,WAAO;AAAA,EACT,WACS,YAAY,KAAK,GAAG;AAC3B,WAAO;AAAA,EACT,WACS,YAAY,KAAK,GAAG;AAC3B,WAAO;AAAA,EACT,OACK;AACH,WAAO;AAAA,EACT;AACF;AAoBA,qBAAqB,sBAAsB,MAAM,UAAkD;AAAA,EACjG,YAAa,OAA2B;AACtC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,UAAU,YAAY,MAAM,OAAO,MAAM,SAAS;AAAA,MAClD,WAAW;AAAA,IACb;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAAqC,OAA2B;AAE9F,QAAI,MAAM,WAAW;AACnB,aAAO,CAAC;AAAA,IACV,OACK;AACH,aAAO;AAAA,QACL,WAAW;AAAA,QACX,UAAU,YAAY,MAAM,OAAO,MAAM,SAAS;AAAA,MACpD;AAAA,IACF;AAAA,EACF;AAAA,EAEA,qBAAqB,WAAgB;AACnC,QAAI,UAAU,WAAW,cAAc;AACrC,aAAO;AAAA,IACT;AACA,QAAI,UAAU,SAAS,UAAU;AAC/B,aAAO;AAAA,IACT;AACA,WAAO;AAAA,EACT;AAAA,EAEA,UAAU,MAAM;AACd,UAAM,QAAQ,KAAK,MAAM,MAAM,MAAM,MAAM,CAAC;AAC5C,UAAM,WAAW,MAAM,MAAM,SAAS,CAAC;AACvC,QAAI,OAAO,SAAS,CAAC,MAAM,UAAU;AACnC,YAAM,KAAK;AAAA,QACT,EAAC,MAAM,SAAS,CAAC,EAAE,OAAO,GAAG,OAAO,SAAS,CAAC,EAAE,MAAK;AAAA,QACrD,SAAS,CAAC;AAAA,MACZ,CAAC;AAAA,IACH,OACK;AACH,YAAM,KAAK,CAAC,SAAS,CAAC,IAAI,GAAG,SAAS,CAAC,CAAC,CAAC;AAAA,IAC3C;AAEA,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF;AAEA,SAAK,MAAM,SAAS,KAAK,MAAM,WAAW,YAAY;AAAA,EACxD;AAAA,EAEA,mBAAmB,MAAM;AACvB,UAAM,EAAC,WAAW,UAAS,IAAI,KAAK;AACpC,SAAK,MAAM,SAAS,WAAW,UAAU,OAAO;AAChD,SAAK,SAAS;AAAA,MACZ,UAAU;AAAA,IACZ,CAAC;AAAA,EACH;AAAA,EAEA,aAAa,CAAC,YAAoB;AAChC,UAAM,QAAQ,KAAK,MAAM,MAAM,MAAM,MAAM,CAAC;AAC5C,UAAM,OAAO,SAAS,CAAC;AAEvB,QAAI,eAAe;AAAA,MACjB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF;AAEA,QAAG,MAAM,WAAW,GAAG;AACrB,qBAAe,MAAM,CAAC,EAAE,CAAC;AAAA,IAC3B;AAEA,SAAK,MAAM,SAAS,KAAK,MAAM,WAAW,YAAY;AAAA,EACxD;AAAA,EAEA,mBAAmB,MAAM;AACvB,UAAM,EAAC,MAAK,IAAI,KAAK;AAErB,QAAI;AACJ,QAAI,OAAO,UAAW,UAAU;AAC9B,UAAI,MAAM,OAAO;AACf,mBAAW;AAAA,UACT,MAAM,MAAM;AAAA,UACZ,OAAO,MAAM,MAAM,IAAI,CAAC,SAAe;AACrC,mBAAO,CAAC,KAAK,CAAC,EAAE,MAAM,KAAK,CAAC,KAAK,oBAAoB,KAAK,MAAM,SAAS,CAAC;AAAA,UAC5E,CAAC;AAAA,QACH;AAAA,MACF,OACK;AACH,mBAAW;AAAA,UACT,MAAM,MAAM;AAAA,UACZ,OAAO;AAAA,YACL,CAAC,GAAG,oBAAoB,KAAK,MAAM,SAAS,CAAC;AAAA,YAC7C,CAAC,IAAI,oBAAoB,KAAK,MAAM,SAAS,CAAC;AAAA,UAChD;AAAA,QACF;AAAA,MACF;AAAA,IACF,OACK;AACH,iBAAW;AAAA,QACT,OAAO;AAAA,UACL,CAAC,GAAG,SAAS,oBAAoB,KAAK,MAAM,SAAS,CAAC;AAAA,UACtD,CAAC,IAAI,SAAS,oBAAoB,KAAK,MAAM,SAAS,CAAC;AAAA,QACzD;AAAA,MACF;AAAA,IACF;AAEA,SAAK,MAAM,SAAS,KAAK,MAAM,WAAW,QAAQ;AAAA,EACpD;AAAA,EAEA,iBAAiB,MAAM;AACrB,UAAM,EAAC,OAAO,UAAS,IAAI,KAAK;AAEhC,QAAI,gBAAgB,KAAK,GAAG;AAC1B,WAAK,MAAM,SAAS,WAAW;AAAA,QAC7B,QAAQ;AAAA,QACR,YAAY,MAAM,CAAC;AAAA,MACrB,CAAC;AACD,WAAK,SAAS;AAAA,QACZ,UAAU;AAAA,MACZ,CAAC;AAAA,IACH,WACS,oBAAoB,KAAK,GAAG;AACnC,WAAK,MAAM,SAAS,WAAW,MAAM,CAAC,CAAC;AACvC,WAAK,SAAS;AAAA,QACZ,UAAU;AAAA,MACZ,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,UAAU,MAAM;AACd,UAAM,EAAC,OAAO,UAAS,IAAI,KAAK;AAChC,WACE,gBAAgB,KAAK,KACrB,oBAAoB,KAAK,KACzB,YAAY,KAAK,KAChB,MAAM,QAAQ,KAAK,KAAK,UAAU,SAAS;AAAA,EAEhD;AAAA,EAEA,iBAAiB,MAAM;AACrB,UAAM,EAAC,OAAO,UAAS,IAAI,KAAK;AAChC,QAAI;AAEJ,QAAI,OAAO,UAAW,YAAY,WAAW,OAAO;AAClD,mBAAa,cAAc,gBAAgB,OAAO,SAAS;AAAA,IAC7D,WACS,mBAAmB,KAAK,GAAG;AAClC,mBAAa,CAAC,OAAO,MAAM,QAAQ;AAAA,IACrC,OACK;AACH,mBAAa,CAAC,WAAW,SAAS,KAAK,MAAM,UAAU,OAAO;AAAA,IAChE;AACA,SAAK,MAAM,SAAS,KAAK,MAAM,WAAW,UAAU;AAAA,EACtD;AAAA,EAEA,mBAAmB,MAAM;AACvB,UAAM,eAAe,KAAK,qBAAqB,KAAK,MAAM,SAAS;AACnE,UAAM,YAAY,iBAAiB,gBAAgB,KAAK;AACxD,UAAM,EAAC,MAAK,IAAI,KAAK;AACrB,QAAI;AAEJ,QAAI,OAAO,UAAW,UAAU;AAC9B,UAAI,MAAM,OAAO;AACf,mBAAW;AAAA,UACT,UAAU;AAAA,UACV,MAAM;AAAA,UACN,MAAM,MAAM;AAAA,UACZ,OAAO,MAAM,MAAM,IAAI,CAAC,SAAe;AACrC,mBAAO,CAAC,EAAC,MAAM,KAAK,CAAC,GAAG,OAAO,UAAS,GAAG,KAAK,CAAC,KAAK,oBAAoB,KAAK,MAAM,SAAS,CAAC;AAAA,UACjG,CAAC;AAAA,QACH;AAAA,MACF,OACK;AACH,mBAAW;AAAA,UACT,UAAU;AAAA,UACV,MAAM;AAAA,UACN,MAAM,MAAM;AAAA,UACZ,OAAO;AAAA,YACL,CAAC,EAAC,MAAM,GAAG,OAAO,UAAS,GAAG,oBAAoB,KAAK,MAAM,SAAS,CAAC;AAAA,YACvE,CAAC,EAAC,MAAM,IAAI,OAAO,UAAS,GAAG,oBAAoB,KAAK,MAAM,SAAS,CAAC;AAAA,UAC1E;AAAA,QACF;AAAA,MACF;AAAA,IACF,OACK;AACH,iBAAW;AAAA,QACT,UAAU;AAAA,QACV,MAAM;AAAA,QACN,MAAM,MAAM;AAAA,QACZ,OAAO;AAAA,UACL,CAAC,EAAC,MAAM,GAAG,OAAO,UAAS,GAAG,KAAK,MAAM,SAAS,oBAAoB,KAAK,MAAM,SAAS,CAAC;AAAA,UAC3F,CAAC,EAAC,MAAM,IAAI,OAAO,UAAS,GAAG,KAAK,MAAM,SAAS,oBAAoB,KAAK,MAAM,SAAS,CAAC;AAAA,QAC9F;AAAA,MACF;AAAA,IACF;AAEA,SAAK,MAAM,SAAS,KAAK,MAAM,WAAW,QAAQ;AAAA,EACpD;AAAA,EAEA,gBAAgB,MAAM;AACpB,SAAK,SAAS,EAAC,WAAW,KAAI,CAAC;AAAA,EACjC;AAAA,EAEA,kBAAkB,MAAM;AACtB,SAAK,SAAS,EAAC,WAAW,MAAK,CAAC;AAAA,EAClC;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,SAAQ,IAAI,KAAK;AACxB,UAAM,YAAY,KAAK,MAAM,UAAU,YAAY,KAAK,MAAM,QAAQ,8BAA8B;AACpG,QAAI;AAEJ,QAAI,aAAa,cAAc;AAC7B,kBACE;AAAA,QAAC;AAAA;AAAA,UACC,QAAQ,KAAK,MAAM;AAAA,UACnB,UAAU,KAAK,MAAM,SAAS,KAAK,MAAM,KAAK,MAAM,SAAS;AAAA,UAC7D,SAAS,KAAK;AAAA,UACd,QAAQ,KAAK;AAAA,UACb,UAAU,KAAK;AAAA,UACf,WAAW,KAAK,MAAM;AAAA,UACtB,WAAW,KAAK,MAAM;AAAA,UACtB,WAAW,KAAK,MAAM;AAAA,UACtB,OAAO,KAAK,MAAM;AAAA,UAClB,SAAS,KAAK;AAAA,UACd,QAAQ,KAAK;AAAA;AAAA,MACf;AAAA,IAEJ,WACS,aAAa,iBAAiB;AACrC,kBACE;AAAA,QAAC;AAAA;AAAA,UACC,QAAQ,KAAK,MAAM;AAAA,UACnB,UAAU,KAAK,MAAM,SAAS,KAAK,IAAI;AAAA,UACvC,WAAW,KAAK,MAAM;AAAA,UACtB,WAAW,KAAK,MAAM;AAAA,UACtB,WAAW,KAAK,MAAM;AAAA,UACtB,OAAO,KAAK,MAAM;AAAA,UAClB,cAAc,KAAK;AAAA,UACnB,WAAW,KAAK;AAAA,UAChB,wBAAwB,KAAK;AAAA,UAC7B,mBAAmB,KAAK;AAAA;AAAA,MAC1B;AAAA,IAEJ,WACS,aAAa,iBAAiB;AAErC,kBACE;AAAA,QAAC;AAAA;AAAA,UACC,QAAQ,KAAK,MAAM;AAAA,UACnB,UAAU,KAAK,MAAM,SAAS,KAAK,IAAI;AAAA,UACvC,WAAW,KAAK,MAAM;AAAA,UACtB,WAAW,KAAK,MAAM;AAAA,UACtB,WAAW,KAAK,MAAM;AAAA,UACtB,OAAO,KAAK,MAAM;AAAA,UAClB,cAAc,KAAK;AAAA,UACnB,WAAW,KAAK;AAAA,UAChB,wBAAwB,KAAK;AAAA,UAC7B,mBAAmB,KAAK;AAAA;AAAA,MAC1B;AAAA,IAEJ,OACK;AACH,kBACE;AAAA,QAAC;AAAA;AAAA,UACC,QAAQ,KAAK,MAAM;AAAA,UACnB,UAAU,KAAK,MAAM,SAAS,KAAK,IAAI;AAAA,UACvC,WAAW,KAAK,MAAM;AAAA,UACtB,WAAW,KAAK,MAAM;AAAA,UACtB,WAAW,KAAK,MAAM;AAAA,UACtB,OAAO,KAAK,MAAM;AAAA,UAClB,aAAa,KAAK;AAAA,UAClB,aAAa,KAAK;AAAA,UAClB,mBAAmB,KAAK;AAAA;AAAA,MAC1B;AAAA,IAEJ;AACA,WAAO,oBAAC,SAAI,WAAW,WAAW,eAAa,0BAAwB,KAAK,MAAM,WAC/E,qBACH;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"36be9049018d9eb4ab6b3a8eeeb8db87a4e7a5ee"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Dt=function(){return l},l}Dt();function HK(n){return Dt().f[0]++,Dt().s[0]++,Dt().b[0][0]++,Array.isArray(n)&&(Dt().b[0][1]++,n.length===2)&&(Dt().b[0][2]++,n[0]==="literal")}function ZK(n){return Dt().f[1]++,Dt().s[1]++,Dt().b[1][0]++,Array.isArray(n)&&(Dt().b[1][1]++,n.length===2)&&(Dt().b[1][2]++,n[0]==="get")}function _le(n){return Dt().f[2]++,Dt().s[2]++,Dt().b[2][0]++,typeof n=="object"&&(Dt().b[2][1]++,n.stops)&&(Dt().b[2][2]++,typeof n.property>"u")&&(Dt().b[2][3]++,Array.isArray(n.stops))&&(Dt().b[2][4]++,n.stops.length>1)&&(Dt().b[2][5]++,n.stops.every(e=>(Dt().f[3]++,Dt().s[3]++,Dt().b[3][0]++,Array.isArray(e)&&(Dt().b[3][1]++,e.length===2))))}function Oj(n){return Dt().f[4]++,Dt().s[4]++,Dt().b[4][0]++,typeof n=="object"&&(Dt().b[4][1]++,n.type==="identity")&&(Dt().b[4][2]++,Object.prototype.hasOwnProperty.call(n,"property"))}function ble(n){return Dt().f[5]++,Dt().s[5]++,Dt().b[5][0]++,typeof n=="object"&&(Dt().b[5][1]++,n.stops)&&(Dt().b[5][2]++,typeof n.property<"u")&&(Dt().b[5][3]++,n.stops.length>1)&&(Dt().b[5][4]++,Array.isArray(n.stops))&&(Dt().b[5][5]++,n.stops.every(e=>(Dt().f[6]++,Dt().s[6]++,Dt().b[6][0]++,Array.isArray(e)&&(Dt().b[6][1]++,e.length===2)&&(Dt().b[6][2]++,typeof e[0]=="object"))))}function xle(n){return Dt().f[7]++,Dt().s[7]++,Dt().b[7][0]++,Oj(n)||(Dt().b[7][1]++,ble(n))}function QO(n){Dt().f[8]++;const e=(Dt().s[8]++,["string","boolean","number"]);return Dt().s[9]++,e.includes(typeof n)}function Mle(n){return Dt().f[9]++,Dt().s[10]++,Array.isArray(n)?(Dt().b[8][0]++,Dt().s[11]++,n.every(QO)):(Dt().b[8][1]++,Dt().s[12]++,!1)}function XK(n,e=(Dt().b[9][0]++,{})){return Dt().f[10]++,Dt().s[13]++,n===void 0?(Dt().b[10][0]++,Dt().s[14]++,"value"):(Dt().b[10][1]++,Dt().s[15]++,QO(n)?(Dt().b[11][0]++,Dt().s[16]++,"value"):(Dt().b[11][1]++,Dt().s[17]++,Dt().b[13][0]++,e.type==="array"&&(Dt().b[13][1]++,Mle(n))?(Dt().b[12][0]++,Dt().s[18]++,"value"):(Dt().b[12][1]++,Dt().s[19]++,_le(n)?(Dt().b[14][0]++,Dt().s[20]++,"zoom_function"):(Dt().b[14][1]++,Dt().s[21]++,xle(n)?(Dt().b[15][0]++,Dt().s[22]++,"data_function"):(Dt().b[15][1]++,Dt().s[23]++,"expression")))))}class wle extends Xn.Component{constructor(t){Dt().f[11]++,Dt().s[24]++;super(t);Kn(this,"addStop",(Dt().s[34]++,()=>{Dt().f[14]++;const t=(Dt().s[35]++,this.props.value.stops.slice(0)),r=(Dt().s[36]++,t[t.length-1]);Dt().s[37]++,typeof r[0]=="object"?(Dt().b[19][0]++,Dt().s[38]++,t.push([{zoom:r[0].zoom+1,value:r[0].value},r[1]])):(Dt().b[19][1]++,Dt().s[39]++,t.push([r[0]+1,r[1]]));const i=(Dt().s[40]++,{...this.props.value,stops:t});Dt().s[41]++,this.props.onChange(this.props.fieldName,i)}));Kn(this,"deleteExpression",(Dt().s[42]++,()=>{Dt().f[15]++;const{fieldSpec:t,fieldName:r}=(Dt().s[43]++,this.props);Dt().s[44]++,this.props.onChange(r,t.default),Dt().s[45]++,this.setState({dataType:"value"})}));Kn(this,"deleteStop",(Dt().s[46]++,t=>{Dt().f[16]++;const r=(Dt().s[47]++,this.props.value.stops.slice(0));Dt().s[48]++,r.splice(t,1);let i=(Dt().s[49]++,{...this.props.value,stops:r});Dt().s[50]++,r.length===1?(Dt().b[20][0]++,Dt().s[51]++,i=r[0][1]):Dt().b[20][1]++,Dt().s[52]++,this.props.onChange(this.props.fieldName,i)}));Kn(this,"makeZoomFunction",(Dt().s[53]++,()=>{Dt().f[17]++;const{value:t}=(Dt().s[54]++,this.props);let r;Dt().s[55]++,typeof t=="object"?(Dt().b[21][0]++,Dt().s[56]++,t.stops?(Dt().b[22][0]++,Dt().s[57]++,r={base:t.base,stops:t.stops.map(i=>(Dt().f[18]++,Dt().s[58]++,[i[0].zoom,(Dt().b[23][0]++,i[1]||(Dt().b[23][1]++,xf(this.props.fieldSpec)))]))}):(Dt().b[22][1]++,Dt().s[59]++,r={base:t.base,stops:[[6,xf(this.props.fieldSpec)],[10,xf(this.props.fieldSpec)]]})):(Dt().b[21][1]++,Dt().s[60]++,r={stops:[[6,(Dt().b[24][0]++,t||(Dt().b[24][1]++,xf(this.props.fieldSpec)))],[10,(Dt().b[25][0]++,t||(Dt().b[25][1]++,xf(this.props.fieldSpec)))]]}),Dt().s[61]++,this.props.onChange(this.props.fieldName,r)}));Kn(this,"undoExpression",(Dt().s[62]++,()=>{Dt().f[19]++;const{value:t,fieldName:r}=(Dt().s[63]++,this.props);Dt().s[64]++,ZK(t)?(Dt().b[26][0]++,Dt().s[65]++,this.props.onChange(r,{type:"identity",property:t[1]}),Dt().s[66]++,this.setState({dataType:"value"})):(Dt().b[26][1]++,Dt().s[67]++,HK(t)?(Dt().b[27][0]++,Dt().s[68]++,this.props.onChange(r,t[1]),Dt().s[69]++,this.setState({dataType:"value"})):Dt().b[27][1]++)}));Kn(this,"canUndo",(Dt().s[70]++,()=>{Dt().f[20]++;const{value:t,fieldSpec:r}=(Dt().s[71]++,this.props);return Dt().s[72]++,Dt().b[28][0]++,ZK(t)||(Dt().b[28][1]++,HK(t))||(Dt().b[28][2]++,QO(t))||(Dt().b[28][3]++,Array.isArray(t)&&(Dt().b[28][4]++,r.type==="array"))}));Kn(this,"makeExpression",(Dt().s[73]++,()=>{Dt().f[21]++;const{value:t,fieldSpec:r}=(Dt().s[74]++,this.props);let i;Dt().s[75]++,Dt().b[30][0]++,typeof t=="object"&&(Dt().b[30][1]++,"stops"in t)?(Dt().b[29][0]++,Dt().s[76]++,i=Xq.convertFunction(t,r)):(Dt().b[29][1]++,Dt().s[77]++,Oj(t)?(Dt().b[31][0]++,Dt().s[78]++,i=["get",t.property]):(Dt().b[31][1]++,Dt().s[79]++,i=["literal",(Dt().b[32][0]++,t||(Dt().b[32][1]++,this.props.fieldSpec.default))])),Dt().s[80]++,this.props.onChange(this.props.fieldName,i)}));Kn(this,"makeDataFunction",(Dt().s[81]++,()=>{Dt().f[22]++;const t=(Dt().s[82]++,this.getFieldFunctionType(this.props.fieldSpec)),r=(Dt().s[83]++,t==="categorical"?(Dt().b[33][0]++,""):(Dt().b[33][1]++,0)),{value:i}=(Dt().s[84]++,this.props);let s;Dt().s[85]++,typeof i=="object"?(Dt().b[34][0]++,Dt().s[86]++,i.stops?(Dt().b[35][0]++,Dt().s[87]++,s={property:"",type:t,base:i.base,stops:i.stops.map(l=>(Dt().f[23]++,Dt().s[88]++,[{zoom:l[0],value:r},(Dt().b[36][0]++,l[1]||(Dt().b[36][1]++,xf(this.props.fieldSpec)))]))}):(Dt().b[35][1]++,Dt().s[89]++,s={property:"",type:t,base:i.base,stops:[[{zoom:6,value:r},xf(this.props.fieldSpec)],[{zoom:10,value:r},xf(this.props.fieldSpec)]]})):(Dt().b[34][1]++,Dt().s[90]++,s={property:"",type:t,base:i.base,stops:[[{zoom:6,value:r},(Dt().b[37][0]++,this.props.value||(Dt().b[37][1]++,xf(this.props.fieldSpec)))],[{zoom:10,value:r},(Dt().b[38][0]++,this.props.value||(Dt().b[38][1]++,xf(this.props.fieldSpec)))]]}),Dt().s[91]++,this.props.onChange(this.props.fieldName,s)}));Kn(this,"onMarkEditing",(Dt().s[92]++,()=>{Dt().f[24]++,Dt().s[93]++,this.setState({isEditing:!0})}));Kn(this,"onUnmarkEditing",(Dt().s[94]++,()=>{Dt().f[25]++,Dt().s[95]++,this.setState({isEditing:!1})}));Dt().s[25]++,this.state={dataType:XK(t.value,t.fieldSpec),isEditing:!1}}static getDerivedStateFromProps(t,r){return Dt().f[12]++,Dt().s[26]++,r.isEditing?(Dt().b[16][0]++,Dt().s[27]++,{}):(Dt().b[16][1]++,Dt().s[28]++,{isEditing:!1,dataType:XK(t.value,t.fieldSpec)})}getFieldFunctionType(t){return Dt().f[13]++,Dt().s[29]++,t.expression.interpolated?(Dt().b[17][0]++,Dt().s[30]++,"exponential"):(Dt().b[17][1]++,Dt().s[31]++,t.type==="number"?(Dt().b[18][0]++,Dt().s[32]++,"interval"):(Dt().b[18][1]++,Dt().s[33]++,"categorical"))}render(){Dt().f[26]++;const{dataType:t}=(Dt().s[96]++,this.state),r=(Dt().s[97]++,this.props.fieldSpec.default===this.props.value?(Dt().b[39][0]++,"maputnik-default-property"):(Dt().b[39][1]++,"maputnik-modified-property"));let i;return Dt().s[98]++,t==="expression"?(Dt().b[40][0]++,Dt().s[99]++,i=ue.jsx(Fz,{errors:this.props.errors,onChange:this.props.onChange.bind(this,this.props.fieldName),canUndo:this.canUndo,onUndo:this.undoExpression,onDelete:this.deleteExpression,fieldType:this.props.fieldType,fieldName:this.props.fieldName,fieldSpec:this.props.fieldSpec,value:this.props.value,onFocus:this.onMarkEditing,onBlur:this.onUnmarkEditing})):(Dt().b[40][1]++,Dt().s[100]++,t==="zoom_function"?(Dt().b[41][0]++,Dt().s[101]++,i=ue.jsx(Cle,{errors:this.props.errors,onChange:this.props.onChange.bind(this),fieldType:this.props.fieldType,fieldName:this.props.fieldName,fieldSpec:this.props.fieldSpec,value:this.props.value,onDeleteStop:this.deleteStop,onAddStop:this.addStop,onChangeToDataFunction:this.makeDataFunction,onExpressionClick:this.makeExpression})):(Dt().b[41][1]++,Dt().s[102]++,t==="data_function"?(Dt().b[42][0]++,Dt().s[103]++,i=ue.jsx(vle,{errors:this.props.errors,onChange:this.props.onChange.bind(this),fieldType:this.props.fieldType,fieldName:this.props.fieldName,fieldSpec:this.props.fieldSpec,value:this.props.value,onDeleteStop:this.deleteStop,onAddStop:this.addStop,onChangeToZoomFunction:this.makeZoomFunction,onExpressionClick:this.makeExpression})):(Dt().b[42][1]++,Dt().s[104]++,i=ue.jsx(wj,{errors:this.props.errors,onChange:this.props.onChange.bind(this),fieldType:this.props.fieldType,fieldName:this.props.fieldName,fieldSpec:this.props.fieldSpec,value:this.props.value,onZoomClick:this.makeZoomFunction,onDataClick:this.makeDataFunction,onExpressionClick:this.makeExpression})))),Dt().s[105]++,ue.jsx("div",{className:r,"data-wd-key":"spec-field-container:"+this.props.fieldName,children:i})}}function ho(){var n="/home/runner/work/maputnik/maputnik/src/components/PropertyGroup.tsx",e="411d3be261f729b266d6cb26884b34616b925c83",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/PropertyGroup.tsx",statementMap:{0:{start:{line:4,column:23},end:{line:4,column:117}},1:{start:{line:6,column:20},end:{line:6,column:60}},2:{start:{line:7,column:16},end:{line:7,column:49}},3:{start:{line:8,column:20},end:{line:8,column:36}},4:{start:{line:9,column:2},end:{line:14,column:3}},5:{start:{line:10,column:4},end:{line:13,column:6}},6:{start:{line:15,column:2},end:{line:20,column:3}},7:{start:{line:16,column:4},end:{line:19,column:6}},8:{start:{line:21,column:2},end:{line:21,column:19}},9:{start:{line:24,column:16},end:{line:24,column:48}},10:{start:{line:25,column:2},end:{line:29,column:3}},11:{start:{line:26,column:4},end:{line:26,column:19}},12:{start:{line:28,column:4},end:{line:28,column:20}},13:{start:{line:32,column:21},end:{line:35,column:3}},14:{start:{line:33,column:18},end:{line:33,column:80}},15:{start:{line:34,column:4},end:{line:34,column:51}},16:{start:{line:37,column:23},end:{line:37,column:33}},17:{start:{line:38,column:19},end:{line:56,column:6}},18:{start:{line:39,column:24},end:{line:39,column:87}},19:{start:{line:40,column:20},end:{line:40,column:48}},20:{start:{line:41,column:21},end:{line:41,column:50}},21:{start:{line:42,column:25},end:{line:42,column:82}},22:{start:{line:43,column:24},end:{line:43,column:63}},23:{start:{line:44,column:6},end:{line:55,column:8}},24:{start:{line:57,column:4},end:{line:57,column:98}}},fnMap:{0:{name:"getFieldSpec",decl:{start:{line:5,column:9},end:{line:5,column:21}},loc:{start:{line:5,column:50},end:{line:22,column:1}},line:5},1:{name:"getGroupName",decl:{start:{line:23,column:9},end:{line:23,column:21}},loc:{start:{line:23,column:50},end:{line:30,column:1}},line:23},2:{name:"(anonymous_2)",decl:{start:{line:32,column:21},end:{line:32,column:22}},loc:{start:{line:32,column:45},end:{line:35,column:3}},line:32},3:{name:"(anonymous_3)",decl:{start:{line:36,column:2},end:{line:36,column:3}},loc:{start:{line:36,column:11},end:{line:58,column:3}},line:36},4:{name:"(anonymous_4)",decl:{start:{line:38,column:46},end:{line:38,column:47}},loc:{start:{line:38,column:61},end:{line:56,column:5}},line:38}},branchMap:{0:{loc:{start:{line:9,column:2},end:{line:14,column:3}},type:"if",locations:[{start:{line:9,column:2},end:{line:14,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:9},1:{loc:{start:{line:15,column:2},end:{line:20,column:3}},type:"if",locations:[{start:{line:15,column:2},end:{line:20,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:15},2:{loc:{start:{line:24,column:16},end:{line:24,column:48}},type:"binary-expr",locations:[{start:{line:24,column:16},end:{line:24,column:42}},{start:{line:24,column:46},end:{line:24,column:48}}],line:24},3:{loc:{start:{line:25,column:2},end:{line:29,column:3}},type:"if",locations:[{start:{line:25,column:2},end:{line:29,column:3}},{start:{line:27,column:9},end:{line:29,column:3}}],line:25},4:{loc:{start:{line:40,column:20},end:{line:40,column:48}},type:"binary-expr",locations:[{start:{line:40,column:20},end:{line:40,column:42}},{start:{line:40,column:46},end:{line:40,column:48}}],line:40},5:{loc:{start:{line:41,column:21},end:{line:41,column:50}},type:"binary-expr",locations:[{start:{line:41,column:21},end:{line:41,column:44}},{start:{line:41,column:48},end:{line:41,column:50}}],line:41},6:{loc:{start:{line:42,column:25},end:{line:42,column:82}},type:"cond-expr",locations:[{start:{line:42,column:46},end:{line:42,column:62}},{start:{line:42,column:65},end:{line:42,column:82}}],line:42},7:{loc:{start:{line:43,column:24},end:{line:43,column:63}},type:"cond-expr",locations:[{start:{line:43,column:45},end:{line:43,column:52}},{start:{line:43,column:55},end:{line:43,column:63}}],line:43}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/PropertyGroup.tsx"],names:[],mappings:"AA+Da;AA/Db,OAAO,WAAW;AAElB,OAAO,mBAAmB;AAG1B,MAAM,iBAAiB,CAAC,sBAAsB,gBAAgB,gBAAgB,0BAA0B,YAAY;AAIpH,SAAS,aAAa,MAAW,WAAuC,WAAmB;AACzF,QAAM,YAAY,aAAa,MAAM,WAAW,SAAS;AACzD,QAAM,QAAQ,KAAK,YAAY,MAAM,SAAS;AAC9C,QAAM,YAAY,MAAM,SAAS;AACjC,MAAG,eAAe,QAAQ,SAAS,KAAK,GAAG;AACzC,WAAO;AAAA,MACL,GAAG;AAAA,MACH,QAAQ,KAAK,MAAM,OAAO;AAAA,IAC5B;AAAA,EACF;AACA,MAAG,cAAc,aAAa;AAC5B,WAAO;AAAA,MACL,GAAG;AAAA,MACH,QAAQ,KAAK,MAAM,OAAO;AAAA,IAC5B;AAAA,EACF;AACA,SAAO;AACT;AAEA,SAAS,aAAa,MAAW,WAAuC,WAAmB;AACzF,QAAM,QAAS,KAAK,WAAW,SAAS,KAAK,CAAC;AAC9C,MAAI,aAAa,OAAO;AACtB,WAAO;AAAA,EACT,OAAO;AACL,WAAO;AAAA,EACT;AACF;AAUA,qBAAqB,sBAAsB,MAAM,UAA8B;AAAA,EAC7E,mBAAmB,CAAC,UAAkB,aAAkB;AACtD,UAAM,QAAQ,aAAa,KAAK,MAAM,MAAM,KAAK,MAAM,MAAM,MAAM,QAAQ;AAC3E,SAAK,MAAM,SAAS,OAAO,UAAU,QAAQ;AAAA,EAC/C;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,OAAM,IAAI,KAAK;AACtB,UAAM,SAAS,KAAK,MAAM,YAAY,IAAI,eAAa;AACrD,YAAM,YAAY,aAAa,KAAK,MAAM,MAAM,KAAK,MAAM,MAAM,MAAM,SAAS;AAEhF,YAAM,QAAQ,KAAK,MAAM,MAAM,SAAS,CAAC;AACzC,YAAM,SAAS,KAAK,MAAM,MAAM,UAAU,CAAC;AAC3C,YAAM,aAAa,aAAa,QAC5B,MAAM,SAA+B,IACrC,OAAO,SAAgC;AAC3C,YAAM,YAAY,aAAa,QAAQ,UAAU;AAEjD,aAAO;AAAA,QAAC;AAAA;AAAA,UACN;AAAA,UACA,UAAU,KAAK;AAAA,UAEf;AAAA,UACA,OAAO;AAAA,UACP;AAAA,UACA;AAAA;AAAA,QAJK;AAAA,MAKP;AAAA,IACF,CAAC;AAED,WAAO,oBAAC,SAAI,WAAU,2BACnB,kBACH;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"411d3be261f729b266d6cb26884b34616b925c83"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return ho=function(){return l},l}ho();const Sle=(ho().s[0]++,["background-pattern","fill-pattern","line-pattern","fill-extrusion-pattern","icon-image"]);function Ele(n,e,t){ho().f[0]++;const r=(ho().s[1]++,Ij(n,e,t)),i=(ho().s[2]++,n[r+"_"+e]),s=(ho().s[3]++,i[t]);return ho().s[4]++,Sle.indexOf(t)>=0?(ho().b[0][0]++,ho().s[5]++,{...s,values:n.$root.sprite.values}):(ho().b[0][1]++,ho().s[6]++,t==="text-font"?(ho().b[1][0]++,ho().s[7]++,{...s,values:n.$root.glyphs.values}):(ho().b[1][1]++,ho().s[8]++,s))}function Ij(n,e,t){ho().f[1]++;const r=(ho().s[9]++,ho().b[2][0]++,n["paint_"+e]||(ho().b[2][1]++,{}));return ho().s[10]++,t in r?(ho().b[3][0]++,ho().s[11]++,"paint"):(ho().b[3][1]++,ho().s[12]++,"layout")}class Ble extends Xn.Component{constructor(){super(...arguments);Kn(this,"onPropertyChange",(ho().s[13]++,(t,r)=>{ho().f[2]++;const i=(ho().s[14]++,Ij(this.props.spec,this.props.layer.type,t));ho().s[15]++,this.props.onChange(i,t,r)}))}render(){ho().f[3]++;const{errors:t}=(ho().s[16]++,this.props),r=(ho().s[17]++,this.props.groupFields.map(i=>{ho().f[4]++;const s=(ho().s[18]++,Ele(this.props.spec,this.props.layer.type,i)),l=(ho().s[19]++,ho().b[4][0]++,this.props.layer.paint||(ho().b[4][1]++,{})),o=(ho().s[20]++,ho().b[5][0]++,this.props.layer.layout||(ho().b[5][1]++,{})),f=(ho().s[21]++,i in l?(ho().b[6][0]++,l[i]):(ho().b[6][1]++,o[i])),y=(ho().s[22]++,i in l?(ho().b[7][0]++,"paint"):(ho().b[7][1]++,"layout"));return ho().s[23]++,ue.jsx(wle,{errors:t,onChange:this.onPropertyChange,fieldName:i,value:f,fieldType:y,fieldSpec:s},i)}));return ho().s[24]++,ue.jsx("div",{className:"maputnik-property-group",children:r})}}var wS,JK;function Ole(){return JK||(JK=1,wS=function(n){var e={};function t(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return n[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}return t.m=n,t.c=e,t.d=function(r,i,s){t.o(r,i)||Object.defineProperty(r,i,{enumerable:!0,get:s})},t.r=function(r){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},t.t=function(r,i){if(1&i&&(r=t(r)),8&i||4&i&&typeof r=="object"&&r&&r.__esModule)return r;var s=Object.create(null);if(t.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:r}),2&i&&typeof r!="string")for(var l in r)t.d(s,l,(function(o){return r[o]}).bind(null,l));return s},t.n=function(r){var i=r&&r.__esModule?function(){return r.default}:function(){return r};return t.d(i,"a",i),i},t.o=function(r,i){return Object.prototype.hasOwnProperty.call(r,i)},t.p="",t(t.s=2)}([function(n,e){n.exports=mp()},function(n,e){n.exports=Ia()},function(n,e,t){t.r(e);var r=t(1),i=t(0),s=function(){return(s=Object.assign||function(U){for(var j,N=1,Y=arguments.length;N<Y;N++)for(var H in j=arguments[N])Object.prototype.hasOwnProperty.call(j,H)&&(U[H]=j[H]);return U}).apply(this,arguments)},l=function(U,j){var N={};for(var Y in U)Object.prototype.hasOwnProperty.call(U,Y)&&j.indexOf(Y)<0&&(N[Y]=U[Y]);if(U!=null&&typeof Object.getOwnPropertySymbols=="function"){var H=0;for(Y=Object.getOwnPropertySymbols(U);H<Y.length;H++)j.indexOf(Y[H])<0&&Object.prototype.propertyIsEnumerable.call(U,Y[H])&&(N[Y[H]]=U[Y[H]])}return N},o=0,f=r.forwardRef(function(U,j){var N=U.title,Y=N===void 0?null:N,H=U.description,se=H===void 0?null:H,re=U.size,V=re===void 0?null:re,ne=U.color,G=ne===void 0?"currentColor":ne,oe=U.horizontal,he=oe===void 0?null:oe,fe=U.vertical,Ee=fe===void 0?null:fe,me=U.rotate,Se=me===void 0?null:me,Ke=U.spin,xe=Ke===void 0?null:Ke,at=U.style,Ze=at===void 0?{}:at,Je=U.children,Ne=l(U,["title","description","size","color","horizontal","vertical","rotate","spin","style","children"]);o++;var we,De=xe!==null&&xe,He=r.Children.map(Je,function(Ft){var Pt=Ft;De!==!0&&(De=(xe===null?Pt.props.spin:xe)===!0);var Ue=Pt.props.size;typeof V=="number"&&typeof Pt.props.size=="number"&&(Ue=Pt.props.size/V);var Pe={size:Ue,color:G===null?Pt.props.color:G,horizontal:he===null?Pt.props.horizontal:he,vertical:Ee===null?Pt.props.vertical:Ee,rotate:Se===null?Pt.props.rotate:Se,spin:xe===null?Pt.props.spin:xe,inStack:!0};return r.cloneElement(Pt,Pe)});V!==null&&(Ze.width=typeof V=="string"?V:1.5*V+"rem");var bt,Yt="stack_labelledby_"+o,yt="stack_describedby_"+o;if(Y)we=se?Yt+" "+yt:Yt;else if(bt="presentation",se)throw new Error("title attribute required when description is set");return r.createElement("svg",s({ref:j,viewBox:"0 0 24 24",style:Ze,role:bt,"aria-labelledby":we},Ne),Y&&r.createElement("title",{id:Yt},Y),se&&r.createElement("desc",{id:yt},se),De&&r.createElement("style",null,"@keyframes spin { from { transform: rotate(0deg) } to { transform: rotate(360deg) } }","@keyframes spin-inverse { from { transform: rotate(0deg) } to { transform: rotate(-360deg) } }"),He)});f.displayName="Stack",f.propTypes={size:i.oneOfType([i.number,i.string]),color:i.string,horizontal:i.bool,vertical:i.bool,rotate:i.number,spin:i.oneOfType([i.bool,i.number]),children:i.oneOfType([i.arrayOf(i.node),i.node]).isRequired,className:i.string,style:i.object},f.defaultProps={size:null,color:null,horizontal:null,vertical:null,rotate:null,spin:null};var y=f;t.d(e,"Icon",function(){return P}),t.d(e,"Stack",function(){return y});var x=function(){return(x=Object.assign||function(U){for(var j,N=1,Y=arguments.length;N<Y;N++)for(var H in j=arguments[N])Object.prototype.hasOwnProperty.call(j,H)&&(U[H]=j[H]);return U}).apply(this,arguments)},B=function(U,j){var N={};for(var Y in U)Object.prototype.hasOwnProperty.call(U,Y)&&j.indexOf(Y)<0&&(N[Y]=U[Y]);if(U!=null&&typeof Object.getOwnPropertySymbols=="function"){var H=0;for(Y=Object.getOwnPropertySymbols(U);H<Y.length;H++)j.indexOf(Y[H])<0&&Object.prototype.propertyIsEnumerable.call(U,Y[H])&&(N[Y[H]]=U[Y[H]])}return N},O=0,P=r.forwardRef(function(U,j){var N=U.path,Y=U.id,H=Y===void 0?++O:Y,se=U.title,re=se===void 0?null:se,V=U.description,ne=V===void 0?null:V,G=U.size,oe=G===void 0?null:G,he=U.color,fe=he===void 0?"currentColor":he,Ee=U.horizontal,me=Ee!==void 0&&Ee,Se=U.vertical,Ke=Se!==void 0&&Se,xe=U.rotate,at=xe===void 0?0:xe,Ze=U.spin,Je=Ze!==void 0&&Ze,Ne=U.style,we=Ne===void 0?{}:Ne,De=U.inStack,He=De!==void 0&&De,bt=B(U,["path","id","title","description","size","color","horizontal","vertical","rotate","spin","style","inStack"]),Yt={},yt=[];oe!==null&&(He?yt.push("scale("+oe+")"):(we.width=typeof oe=="string"?oe:1.5*oe+"rem",we.height=we.width)),me&&yt.push("scaleX(-1)"),Ke&&yt.push("scaleY(-1)"),at!==0&&yt.push("rotate("+at+"deg)"),fe!==null&&(Yt.fill=fe);var Ft=r.createElement("path",x({d:N,style:Yt},He?bt:{})),Pt=Ft;yt.length>0&&(we.transform=yt.join(" "),we.transformOrigin="center",He&&(Pt=r.createElement("g",{style:we},Ft,r.createElement("rect",{width:"24",height:"24",fill:"transparent"}))));var Ue,Pe=Pt,Be=Je===!0||typeof Je!="number"?2:Je,it=!He&&(me||Ke);if(Be<0&&(it=!it),Je&&(Pe=r.createElement("g",{style:{animation:"spin"+(it?"-inverse":"")+" linear "+Math.abs(Be)+"s infinite",transformOrigin:"center"}},Pt,!(me||Ke||at!==0)&&r.createElement("rect",{width:"24",height:"24",fill:"transparent"}))),He)return Pe;var _t,pt="icon_labelledby_"+H,Lt="icon_describedby_"+H;if(re)Ue=ne?pt+" "+Lt:pt;else if(_t="presentation",ne)throw new Error("title attribute required when description is set");return r.createElement("svg",x({ref:j,viewBox:"0 0 24 24",style:we,role:_t,"aria-labelledby":Ue},bt),re&&r.createElement("title",{id:pt},re),ne&&r.createElement("desc",{id:Lt},ne),!He&&Je&&(it?r.createElement("style",null,"@keyframes spin-inverse { from { transform: rotate(0deg) } to { transform: rotate(-360deg) } }"):r.createElement("style",null,"@keyframes spin { from { transform: rotate(0deg) } to { transform: rotate(360deg) } }")),Pe)});P.displayName="Icon",P.propTypes={path:i.string.isRequired,size:i.oneOfType([i.number,i.string]),color:i.string,horizontal:i.bool,vertical:i.bool,rotate:i.number,spin:i.oneOfType([i.bool,i.number]),style:i.object,inStack:i.bool,className:i.string},P.defaultProps={size:null,color:"currentColor",horizontal:!1,vertical:!1,rotate:0,spin:!1},e.default=P}])),wS}var Ile=Ole();const eR=fl(Ile);function ay(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerEditorGroup.tsx",e="2f1dde9b3c8e927b8e8868bcb310eb3d6a65eb08",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/LayerEditorGroup.tsx",statementMap:{0:{start:{line:16,column:4},end:{line:45,column:9}},1:{start:{line:22,column:27},end:{line:22,column:74}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:11},end:{line:46,column:3}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:22,column:19},end:{line:22,column:20}},loc:{start:{line:22,column:27},end:{line:22,column:74}},line:22}},branchMap:{},s:{0:0,1:0},f:{0:0,1:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerEditorGroup.tsx"],names:[],mappings:"AA+BQ,SACE,KADF;AA/BR,OAAO,WAAW;AAClB,OAAO,UAAU;AACjB;AAAA,EACE;AAAA,EACA;AAAA,OACK;AACP;AAAA,EACE;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,OACK;AAaP,qBAAqB,yBAAyB,MAAM,UAAiC;AAAA,EACnF,SAAS;AACP,WAAO,qBAAC,iBAAc,MAAM,KAAK,MAAM,IACrC;AAAA;AAAA,QAAC;AAAA;AAAA,UAAqB,WAAU;AAAA,UAC9B,eAAa,wBAAsB,KAAK,MAAM,aAAa;AAAA,UAC3D,SAAS,QAAM,KAAK,MAAM,eAAe,CAAC,KAAK,MAAM,QAAQ;AAAA,UAE7D,+BAAC,uBAAoB,WAAU,uCAC7B;AAAA,gCAAC,UAAK,OAAO,EAAC,UAAU,EAAC,GAAI,eAAK,MAAM,OAAM;AAAA,YAC9C;AAAA,cAAC;AAAA;AAAA,gBACC,MAAM;AAAA,gBACN,MAAM;AAAA,gBACN,WAAU;AAAA;AAAA,YACZ;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,MAAM;AAAA,gBACN,MAAM;AAAA,gBACN,WAAU;AAAA;AAAA,YACZ;AAAA,aACF;AAAA;AAAA,MACF;AAAA,MACA,oBAAC,sBACE,eAAK,MAAM,UACd;AAAA,OACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2f1dde9b3c8e927b8e8868bcb310eb3d6a65eb08"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return ay=function(){return l},l}ay();class kle extends Xn.Component{render(){return ay().f[0]++,ay().s[0]++,ue.jsxs(Bz,{uuid:this.props.id,children:[ue.jsx(kz,{className:"maputnik-layer-editor-group","data-wd-key":"layer-editor-group:"+this.props["data-wd-key"],onClick:e=>(ay().f[1]++,ay().s[1]++,this.props.onActiveToggle(!this.props.isActive)),children:ue.jsxs(Hie,{className:"maputnik-layer-editor-group__button",children:[ue.jsx("span",{style:{flexGrow:1},children:this.props.title}),ue.jsx(eR,{path:moe,size:1,className:"maputnik-layer-editor-group__button__icon maputnik-layer-editor-group__button__icon--up"}),ue.jsx(eR,{path:poe,size:1,className:"maputnik-layer-editor-group__button__icon maputnik-layer-editor-group__button__icon--down"})]})}),ue.jsx(eoe,{children:this.props.children})]})}}function vy(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldMinZoom.tsx",e="32f7af2e1a9dc4f673c1fba818006229f9fd6490",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldMinZoom.tsx",statementMap:{0:{start:{line:9,column:14},end:{line:9,column:26}},1:{start:{line:10,column:4},end:{line:30,column:6}},2:{start:{line:33,column:21},end:{line:33,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:11},end:{line:31,column:3}},line:8}},branchMap:{},s:{0:0,1:0,2:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldMinZoom.tsx"],names:[],mappings:"AAoBM;AApBN,OAAO,WAAW;AAElB,OAAO,YAAY;AACnB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,SAA0B,uBAAuB;AAQjD,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QAAM,OAAO,EAAE,UAAU;AAAA,QAAG,WAAW,OAAO,MAAM;AAAA,QAC1D,OAAO,KAAK,MAAM;AAAA,QAClB,eAAY;AAAA,QAEZ;AAAA,UAAC;AAAA;AAAA,YACC,YAAY;AAAA,YACZ,OAAO,KAAK,MAAM;AAAA,YAClB,UAAU,KAAK,MAAM;AAAA,YACrB,KAAK,OAAO,MAAM,QAAQ;AAAA,YAC1B,KAAK,OAAO,MAAM,QAAQ;AAAA,YAC1B,SAAS,OAAO,MAAM,QAAQ;AAAA,YAC9B,eAAY;AAAA;AAAA,QACd;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"32f7af2e1a9dc4f673c1fba818006229f9fd6490"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return vy=function(){return l},l}vy();class Tle extends Xn.Component{render(){vy().f[0]++;const e=(vy().s[0]++,this.props.t);return vy().s[1]++,ue.jsx(la,{label:e("Min Zoom"),fieldSpec:Xo.layer.minzoom,error:this.props.error,"data-wd-key":"min-zoom",children:ue.jsx(rm,{allowRange:!0,value:this.props.value,onChange:this.props.onChange,min:Xo.layer.minzoom.minimum,max:Xo.layer.minzoom.maximum,default:Xo.layer.minzoom.minimum,"data-wd-key":"min-zoom.input"})})}}const Ple=(vy().s[2]++,zs()(Tle));function Cy(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldMaxZoom.tsx",e="f706dc673f9397f2919007f4b702470461bf0f7c",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldMaxZoom.tsx",statementMap:{0:{start:{line:9,column:14},end:{line:9,column:26}},1:{start:{line:10,column:4},end:{line:30,column:6}},2:{start:{line:33,column:21},end:{line:33,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:11},end:{line:31,column:3}},line:8}},branchMap:{},s:{0:0,1:0,2:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldMaxZoom.tsx"],names:[],mappings:"AAoBM;AApBN,OAAO,WAAW;AAElB,OAAO,YAAY;AACnB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,SAA0B,uBAAuB;AAQjD,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QAAM,OAAO,EAAE,UAAU;AAAA,QAAG,WAAW,OAAO,MAAM;AAAA,QAC1D,OAAO,KAAK,MAAM;AAAA,QAClB,eAAY;AAAA,QAEZ;AAAA,UAAC;AAAA;AAAA,YACC,YAAY;AAAA,YACZ,OAAO,KAAK,MAAM;AAAA,YAClB,UAAU,KAAK,MAAM;AAAA,YACrB,KAAK,OAAO,MAAM,QAAQ;AAAA,YAC1B,KAAK,OAAO,MAAM,QAAQ;AAAA,YAC1B,SAAS,OAAO,MAAM,QAAQ;AAAA,YAC9B,eAAY;AAAA;AAAA,QACd;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f706dc673f9397f2919007f4b702470461bf0f7c"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Cy=function(){return l},l}Cy();class Kle extends Xn.Component{render(){Cy().f[0]++;const e=(Cy().s[0]++,this.props.t);return Cy().s[1]++,ue.jsx(la,{label:e("Max Zoom"),fieldSpec:Xo.layer.maxzoom,error:this.props.error,"data-wd-key":"max-zoom",children:ue.jsx(rm,{allowRange:!0,value:this.props.value,onChange:this.props.onChange,min:Xo.layer.maxzoom.minimum,max:Xo.layer.maxzoom.maximum,default:Xo.layer.maxzoom.maximum,"data-wd-key":"max-zoom.input"})})}}const Rle=(Cy().s[2]++,zs()(Kle));function Og(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldComment.tsx",e="875d9bef6002e38aa0b5bf03af99ab4fc2308047",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldComment.tsx",statementMap:{0:{start:{line:8,column:14},end:{line:8,column:26}},1:{start:{line:9,column:22},end:{line:11,column:5}},2:{start:{line:12,column:4},end:{line:30,column:6}},3:{start:{line:33,column:21},end:{line:33,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:11},end:{line:31,column:3}},line:7}},branchMap:{},s:{0:0,1:0,2:0,3:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldComment.tsx"],names:[],mappings:"AAyBM;AAzBN,OAAO,WAAW;AAElB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,SAA0B,uBAAuB;AAQjD,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,YAAY;AAAA,MAChB,KAAK,EAAE,2EAA2E;AAAA,IACpF;AAEA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,OAAO,EAAE,UAAU;AAAA,QACnB;AAAA,QACA,eAAY;AAAA,QACZ,OAAO,KAAK,MAAM;AAAA,QAElB;AAAA,UAAC;AAAA;AAAA,YACC,OAAO;AAAA,YACP,OAAO,KAAK,MAAM;AAAA,YAClB,UAAU,KAAK,MAAM;AAAA,YACrB,SAAS,EAAE,YAAY;AAAA,YACvB,eAAY;AAAA;AAAA,QACd;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"875d9bef6002e38aa0b5bf03af99ab4fc2308047"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Og=function(){return l},l}Og();class Dle extends Xn.Component{render(){Og().f[0]++;const e=(Og().s[0]++,this.props.t),t=(Og().s[1]++,{doc:e("Comments for the current layer. This is non-standard and not in the spec.")});return Og().s[2]++,ue.jsx(la,{label:e("Comments"),fieldSpec:t,"data-wd-key":"layer-comment",error:this.props.error,children:ue.jsx(Rf,{multi:!0,value:this.props.value,onChange:this.props.onChange,default:e("Comment..."),"data-wd-key":"layer-comment.input"})})}}const Fle=(Og().s[3]++,zs()(Dle)),Lle={groups:[{title:"Paint properties",type:"properties",fields:["line-opacity","line-color","line-width","line-offset","line-blur","line-dasharray","line-pattern","line-translate","line-translate-anchor","line-gap-width"]},{title:"Layout properties",type:"properties",fields:["line-cap","line-join","line-miter-limit","line-round-limit"]}]},Ule={groups:[{title:"Paint properties",type:"properties",fields:["background-color","background-pattern","background-opacity"]}]},zle={groups:[{title:"Paint properties",type:"properties",fields:["fill-opacity","fill-color","fill-antialias","fill-outline-color","fill-pattern","fill-translate","fill-translate-anchor"]}]},jle={groups:[{title:"Paint properties",type:"properties",fields:["circle-color","circle-opacity","circle-stroke-color","circle-stroke-opacity","circle-blur","circle-radius","circle-stroke-width","circle-pitch-scale","circle-translate","circle-translate-anchor","circle-pitch-alignment"]}]},Nle={groups:[{title:"General layout properties",type:"properties",fields:["symbol-placement","symbol-spacing","symbol-avoid-edges","symbol-z-order"]},{title:"Text layout properties",type:"properties",fields:["text-field","text-font","text-size","text-line-height","text-padding","text-allow-overlap","text-ignore-placement","text-pitch-alignment","text-rotation-alignment","text-max-width","text-letter-spacing","text-justify","text-anchor","text-max-angle","text-writing-mode","text-rotate","text-keep-upright","text-transform","text-offset","text-optional","text-variable-anchor","text-radial-offset"]},{title:"Icon layout properties",type:"properties",fields:["icon-image","icon-allow-overlap","icon-ignore-placement","icon-optional","icon-rotation-alignment","icon-size","icon-text-fit","icon-text-fit-padding","icon-rotate","icon-padding","icon-keep-upright","icon-offset","icon-anchor","icon-pitch-alignment"]},{title:"Text paint properties",type:"properties",fields:["text-color","text-opacity","text-halo-color","text-halo-width","text-halo-blur","text-translate","text-translate-anchor"]},{title:"Icon paint properties",type:"properties",fields:["icon-color","icon-opacity","icon-halo-color","icon-halo-width","icon-halo-blur","icon-translate","icon-translate-anchor"]}]},Wle={groups:[{title:"Paint properties",type:"properties",fields:["raster-opacity","raster-hue-rotate","raster-brightness-min","raster-brightness-max","raster-saturation","raster-contrast","raster-fade-duration","raster-resampling"]}]},Gle={groups:[{title:"Paint properties",type:"properties",fields:["hillshade-illumination-direction","hillshade-illumination-anchor","hillshade-exaggeration","hillshade-shadow-color","hillshade-highlight-color","hillshade-accent-color"]}]},Qle={groups:[{title:"Paint properties",type:"properties",fields:["heatmap-radius","heatmap-weight","heatmap-intensity","heatmap-opacity"]}]},Yle={groups:[]},mb={line:Lle,background:Ule,fill:zle,"fill-extrusion":{groups:[{title:"Paint properties",type:"properties",fields:["fill-extrusion-opacity","fill-extrusion-color","fill-extrusion-translate","fill-extrusion-translate-anchor","fill-extrusion-pattern","fill-extrusion-height","fill-extrusion-base","fill-extrusion-vertical-gradient"]}]},circle:jle,symbol:Nle,raster:Wle,hillshade:Gle,heatmap:Qle,invalid:Yle};function ly(){var n="/home/runner/work/maputnik/maputnik/src/libs/format.ts",e="c45fbfac66e994b59070a295e5a7f219cd5d66ac",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/format.ts",statementMap:{0:{start:{line:2,column:2},end:{line:2,column:50}}},fnMap:{0:{name:"formatLayerId",decl:{start:{line:1,column:16},end:{line:1,column:29}},loc:{start:{line:1,column:34},end:{line:3,column:1}},line:1}},branchMap:{0:{loc:{start:{line:2,column:9},end:{line:2,column:49}},type:"cond-expr",locations:[{start:{line:2,column:21},end:{line:2,column:37}},{start:{line:2,column:40},end:{line:2,column:49}}],line:2}},s:{0:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/format.ts"],names:[],mappings:"AAAO,gBAAS,cAAe,IAAwB;AACrD,SAAO,OAAO,KAAK,mBAAmB,IAAI,EAAE;AAC9C;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"c45fbfac66e994b59070a295e5a7f219cd5d66ac"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return ly=function(){return l},l}ly();function kj(n){return ly().f[0]++,ly().s[0]++,n===""?(ly().b[0][0]++,"[empty_string]"):(ly().b[0][1]++,`'${n}'`)}function Rn(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerEditor.tsx",e="555ef41c8141fe537bdb43523a4ef7ec4c287394",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/LayerEditor.tsx",statementMap:{0:{start:{line:23,column:2},end:{line:32,column:21}},1:{start:{line:26,column:6},end:{line:30,column:8}},2:{start:{line:35,column:21},end:{line:39,column:3}},3:{start:{line:40,column:22},end:{line:44,column:3}},4:{start:{line:45,column:22},end:{line:49,column:3}},5:{start:{line:50,column:2},end:{line:50,column:103}},6:{start:{line:53,column:24},end:{line:60,column:3}},7:{start:{line:61,column:29},end:{line:63,column:3}},8:{start:{line:65,column:4},end:{line:65,column:17}},9:{start:{line:66,column:25},end:{line:66,column:27}},10:{start:{line:67,column:4},end:{line:69,column:7}},11:{start:{line:68,column:6},end:{line:68,column:39}},12:{start:{line:70,column:4},end:{line:70,column:34}},13:{start:{line:73,column:29},end:{line:73,column:54}},14:{start:{line:74,column:4},end:{line:78,column:7}},15:{start:{line:75,column:6},end:{line:77,column:7}},16:{start:{line:76,column:8},end:{line:76,column:45}},17:{start:{line:79,column:4},end:{line:81,column:6}},18:{start:{line:84,column:4},end:{line:89,column:6}},19:{start:{line:92,column:4},end:{line:95,column:6}},20:{start:{line:98,column:32},end:{line:101,column:5}},21:{start:{line:102,column:4},end:{line:104,column:7}},22:{start:{line:107,column:18},end:{line:107,column:20}},23:{start:{line:108,column:4},end:{line:110,column:5}},24:{start:{line:109,column:6},end:{line:109,column:62}},25:{start:{line:111,column:35},end:{line:111,column:45}},26:{start:{line:112,column:22},end:{line:112,column:24}},27:{start:{line:113,column:4},end:{line:119,column:7}},28:{start:{line:114,column:6},end:{line:118,column:7}},29:{start:{line:115,column:8},end:{line:117,column:10}},30:{start:{line:121,column:18},end:{line:121,column:34}},31:{start:{line:122,column:4},end:{line:124,column:5}},32:{start:{line:123,column:6},end:{line:123,column:63}},33:{start:{line:125,column:4},end:{line:228,column:5}},34:{start:{line:127,column:8},end:{line:191,column:13}},35:{start:{line:134,column:35},end:{line:134,column:112}},36:{start:{line:143,column:37},end:{line:146,column:15}},37:{start:{line:155,column:31},end:{line:155,column:69}},38:{start:{line:164,column:31},end:{line:164,column:75}},39:{start:{line:172,column:31},end:{line:172,column:70}},40:{start:{line:180,column:31},end:{line:180,column:70}},41:{start:{line:188,column:31},end:{line:188,column:104}},42:{start:{line:193,column:8},end:{line:201,column:16}},43:{start:{line:199,column:29},end:{line:199,column:67}},44:{start:{line:203,column:8},end:{line:212,column:10}},45:{start:{line:214,column:8},end:{line:225,column:10}},46:{start:{line:219,column:14},end:{line:222,column:16}},47:{start:{line:227,column:8},end:{line:227,column:49}},48:{start:{line:231,column:4},end:{line:234,column:7}},49:{start:{line:237,column:14},end:{line:237,column:26}},50:{start:{line:238,column:21},end:{line:238,column:23}},51:{start:{line:239,column:22},end:{line:239,column:43}},52:{start:{line:240,column:19},end:{line:257,column:6}},53:{start:{line:241,column:6},end:{line:241,column:70}},54:{start:{line:243,column:22},end:{line:243,column:30}},55:{start:{line:244,column:6},end:{line:244,column:29}},56:{start:{line:245,column:6},end:{line:256,column:8}},57:{start:{line:258,column:20},end:{line:258,column:49}},58:{start:{line:259,column:18},end:{line:284,column:5}},59:{start:{line:262,column:23},end:{line:262,column:71}},60:{start:{line:266,column:23},end:{line:266,column:68}},61:{start:{line:270,column:23},end:{line:270,column:80}},62:{start:{line:276,column:23},end:{line:276,column:41}},63:{start:{line:282,column:23},end:{line:282,column:40}},64:{start:{line:286,column:6},end:{line:286,column:30}},65:{start:{line:287,column:6},end:{line:287,column:26}},66:{start:{line:289,column:4},end:{line:334,column:6}},67:{start:{line:316,column:33},end:{line:316,column:42}},68:{start:{line:317,column:20},end:{line:317,column:174}},69:{start:{line:337,column:20},end:{line:337,column:58}}},fnMap:{0:{name:"getLayoutForType",decl:{start:{line:22,column:9},end:{line:22,column:25}},loc:{start:{line:22,column:35},end:{line:33,column:1}},line:22},1:{name:"(anonymous_1)",decl:{start:{line:25,column:36},end:{line:25,column:37}},loc:{start:{line:25,column:47},end:{line:31,column:5}},line:25},2:{name:"layoutGroups",decl:{start:{line:34,column:9},end:{line:34,column:21}},loc:{start:{line:34,column:36},end:{line:51,column:1}},line:34},3:{name:"(anonymous_3)",decl:{start:{line:54,column:20},end:{line:54,column:21}},loc:{start:{line:54,column:26},end:{line:55,column:5}},line:54},4:{name:"(anonymous_4)",decl:{start:{line:56,column:21},end:{line:56,column:22}},loc:{start:{line:56,column:27},end:{line:57,column:5}},line:56},5:{name:"(anonymous_5)",decl:{start:{line:58,column:22},end:{line:58,column:23}},loc:{start:{line:58,column:28},end:{line:59,column:5}},line:58},6:{name:"(anonymous_6)",decl:{start:{line:64,column:2},end:{line:64,column:3}},loc:{start:{line:64,column:21},end:{line:71,column:3}},line:64},7:{name:"(anonymous_7)",decl:{start:{line:67,column:57},end:{line:67,column:58}},loc:{start:{line:67,column:68},end:{line:69,column:5}},line:67},8:{name:"(anonymous_8)",decl:{start:{line:72,column:2},end:{line:72,column:3}},loc:{start:{line:72,column:48},end:{line:82,column:3}},line:72},9:{name:"(anonymous_9)",decl:{start:{line:74,column:63},end:{line:74,column:64}},loc:{start:{line:74,column:74},end:{line:78,column:5}},line:74},10:{name:"(anonymous_10)",decl:{start:{line:83,column:2},end:{line:83,column:3}},loc:{start:{line:83,column:20},end:{line:90,column:3}},line:83},11:{name:"(anonymous_11)",decl:{start:{line:91,column:2},end:{line:91,column:3}},loc:{start:{line:91,column:44},end:{line:96,column:3}},line:91},12:{name:"(anonymous_12)",decl:{start:{line:97,column:2},end:{line:97,column:3}},loc:{start:{line:97,column:36},end:{line:105,column:3}},line:97},13:{name:"(anonymous_13)",decl:{start:{line:106,column:2},end:{line:106,column:3}},loc:{start:{line:106,column:32},end:{line:229,column:3}},line:106},14:{name:"(anonymous_14)",decl:{start:{line:113,column:19},end:{line:113,column:20}},loc:{start:{line:113,column:30},end:{line:119,column:5}},line:113},15:{name:"(anonymous_15)",decl:{start:{line:134,column:24},end:{line:134,column:25}},loc:{start:{line:134,column:35},end:{line:134,column:112}},line:134},16:{name:"(anonymous_16)",decl:{start:{line:143,column:24},end:{line:143,column:25}},loc:{start:{line:143,column:37},end:{line:146,column:15}},line:143},17:{name:"(anonymous_17)",decl:{start:{line:155,column:24},end:{line:155,column:25}},loc:{start:{line:155,column:31},end:{line:155,column:69}},line:155},18:{name:"(anonymous_18)",decl:{start:{line:164,column:24},end:{line:164,column:25}},loc:{start:{line:164,column:31},end:{line:164,column:75}},line:164},19:{name:"(anonymous_19)",decl:{start:{line:172,column:24},end:{line:172,column:25}},loc:{start:{line:172,column:31},end:{line:172,column:70}},line:172},20:{name:"(anonymous_20)",decl:{start:{line:180,column:24},end:{line:180,column:25}},loc:{start:{line:180,column:31},end:{line:180,column:70}},line:180},21:{name:"(anonymous_21)",decl:{start:{line:188,column:24},end:{line:188,column:25}},loc:{start:{line:188,column:31},end:{line:188,column:104}},line:188},22:{name:"(anonymous_22)",decl:{start:{line:199,column:22},end:{line:199,column:23}},loc:{start:{line:199,column:29},end:{line:199,column:67}},line:199},23:{name:"(anonymous_23)",decl:{start:{line:218,column:22},end:{line:218,column:23}},loc:{start:{line:218,column:34},end:{line:223,column:13}},line:218},24:{name:"(anonymous_24)",decl:{start:{line:230,column:2},end:{line:230,column:3}},loc:{start:{line:230,column:20},end:{line:235,column:3}},line:230},25:{name:"(anonymous_25)",decl:{start:{line:236,column:2},end:{line:236,column:3}},loc:{start:{line:236,column:11},end:{line:335,column:3}},line:236},26:{name:"(anonymous_26)",decl:{start:{line:240,column:53},end:{line:240,column:54}},loc:{start:{line:240,column:64},end:{line:242,column:5}},line:240},27:{name:"(anonymous_27)",decl:{start:{line:242,column:11},end:{line:242,column:12}},loc:{start:{line:242,column:22},end:{line:257,column:5}},line:242},28:{name:"(anonymous_28)",decl:{start:{line:262,column:17},end:{line:262,column:18}},loc:{start:{line:262,column:23},end:{line:262,column:71}},line:262},29:{name:"(anonymous_29)",decl:{start:{line:266,column:17},end:{line:266,column:18}},loc:{start:{line:266,column:23},end:{line:266,column:68}},line:266},30:{name:"(anonymous_30)",decl:{start:{line:270,column:17},end:{line:270,column:18}},loc:{start:{line:270,column:23},end:{line:270,column:80}},line:270},31:{name:"(anonymous_31)",decl:{start:{line:276,column:17},end:{line:276,column:18}},loc:{start:{line:276,column:23},end:{line:276,column:41}},line:276},32:{name:"(anonymous_32)",decl:{start:{line:282,column:17},end:{line:282,column:18}},loc:{start:{line:282,column:23},end:{line:282,column:40}},line:282},33:{name:"handleSelection",decl:{start:{line:285,column:13},end:{line:285,column:28}},loc:{start:{line:285,column:40},end:{line:288,column:5}},line:285},34:{name:"(anonymous_34)",decl:{start:{line:315,column:147},end:{line:315,column:148}},loc:{start:{line:315,column:155},end:{line:318,column:19}},line:315}},branchMap:{0:{loc:{start:{line:23,column:9},end:{line:32,column:20}},type:"cond-expr",locations:[{start:{line:23,column:24},end:{line:32,column:3}},{start:{line:32,column:6},end:{line:32,column:20}}],line:23},1:{loc:{start:{line:75,column:6},end:{line:77,column:7}},type:"if",locations:[{start:{line:75,column:6},end:{line:77,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:75},2:{loc:{start:{line:108,column:4},end:{line:110,column:5}},type:"if",locations:[{start:{line:108,column:4},end:{line:110,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:108},3:{loc:{start:{line:114,column:6},end:{line:118,column:7}},type:"if",locations:[{start:{line:114,column:6},end:{line:118,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:114},4:{loc:{start:{line:114,column:10},end:{line:114,column:96}},type:"binary-expr",locations:[{start:{line:114,column:10},end:{line:114,column:22}},{start:{line:114,column:26},end:{line:114,column:55}},{start:{line:114,column:59},end:{line:114,column:96}}],line:114},5:{loc:{start:{line:122,column:4},end:{line:124,column:5}},type:"if",locations:[{start:{line:122,column:4},end:{line:124,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:122},6:{loc:{start:{line:125,column:4},end:{line:228,column:5}},type:"switch",locations:[{start:{line:126,column:6},end:{line:191,column:13}},{start:{line:192,column:6},end:{line:201,column:16}},{start:{line:202,column:6},end:{line:212,column:10}},{start:{line:213,column:6},end:{line:225,column:10}},{start:{line:226,column:6},end:{line:227,column:49}}],line:125},7:{loc:{start:{line:149,column:10},end:{line:157,column:11}},type:"binary-expr",locations:[{start:{line:149,column:10},end:{line:149,column:48}},{start:{line:149,column:68},end:{line:157,column:11}}],line:149},8:{loc:{start:{line:158,column:10},end:{line:166,column:11}},type:"binary-expr",locations:[{start:{line:158,column:10},end:{line:158,column:93}},{start:{line:158,column:113},end:{line:166,column:11}}],line:158},9:{loc:{start:{line:188,column:83},end:{line:188,column:103}},type:"cond-expr",locations:[{start:{line:188,column:93},end:{line:188,column:99}},{start:{line:188,column:102},end:{line:188,column:103}}],line:188},10:{loc:{start:{line:241,column:15},end:{line:241,column:68}},type:"binary-expr",locations:[{start:{line:241,column:15},end:{line:241,column:41}},{start:{line:241,column:45},end:{line:241,column:68}}],line:241},11:{loc:{start:{line:258,column:20},end:{line:258,column:49}},type:"binary-expr",locations:[{start:{line:258,column:20},end:{line:258,column:43}},{start:{line:258,column:47},end:{line:258,column:49}}],line:258},12:{loc:{start:{line:269,column:14},end:{line:269,column:67}},type:"cond-expr",locations:[{start:{line:269,column:46},end:{line:269,column:55}},{start:{line:269,column:58},end:{line:269,column:67}}],line:269}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0,0],5:[0,0],6:[0,0,0,0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerEditor.tsx"],names:["layer","layout"],mappings:"AA2KyB,SA2EL,UA1Ed,KADmB;AA3KzB,OAAO,WAAuB;AAC9B,OAAO,eAAe;AACtB,SAAS,SAAS,QAAQ,MAAM,gBAAgB;AAChD,SAAQ,iBAAgB;AACxB,SAAQ,kBAAiB;AAGzB,OAAO,eAAe;AACtB,OAAO,kBAAkB;AACzB,OAAO,mBAAmB;AAC1B,OAAO,sBAAsB;AAC7B,OAAO,eAAe;AACtB,OAAO,aAAa;AACpB,OAAO,kBAAkB;AACzB,OAAO,kBAAkB;AACzB,OAAO,kBAAkB;AACzB,OAAO,iBAAiB;AACxB,OAAO,sBAAsB;AAC7B,SAAS,YAAY,sBAAsB;AAC3C,OAAO,YAAY;AACnB,SAAQ,qBAAoB;AAC5B,SAA0B,uBAAuB;AAIjD,SAAS,iBAAiB,MAAkC,GAAc;AACxE,SAAO,OAAO,IAAI,IAAI;AAAA,IACpB,GAAG,OAAO,IAAI;AAAA,IACd,QAAQ,OAAO,IAAI,EAAE,OAAO,IAAI,WAAS;AACvC,aAAO;AAAA,QACL,GAAG;AAAA,QACH,IAAI,MAAM,MAAM,QAAQ,MAAM,GAAG;AAAA,QACjC,OAAO,EAAE,MAAM,KAAK;AAAA,MACtB;AAAA,IACF,CAAC;AAAA,EACH,IAAI,OAAO;AACb;AAEA,SAAS,aAAa,WAAuC,GAA8E;AACzI,QAAM,aAAa;AAAA,IACjB,IAAI;AAAA,IACJ,OAAO,EAAE,OAAO;AAAA,IAChB,MAAM;AAAA,EACR;AACA,QAAM,cAAc;AAAA,IAClB,IAAI;AAAA,IACJ,OAAO,EAAE,QAAQ;AAAA,IACjB,MAAM;AAAA,EACR;AACA,QAAM,cAAc;AAAA,IAClB,IAAI;AAAA,IACJ,OAAO,EAAE,aAAa;AAAA,IACtB,MAAM;AAAA,EACR;AACA,SAAO,CAAC,YAAY,WAAW,EAC5B,OAAO,iBAAiB,WAAW,CAAC,EAAE,MAAM,EAC5C,OAAO,CAAC,WAAW,CAAC;AACzB;AAwBA,MAAM,4BAA4B,MAAM,UAAsD;AAAA,EAC5F,OAAO,eAAe;AAAA,IACpB,gBAAgB,MAAM;AAAA,IAAC;AAAA,IACvB,iBAAiB,MAAM;AAAA,IAAC;AAAA,IACxB,kBAAkB,MAAM;AAAA,IAAC;AAAA,EAC3B;AAAA,EAEA,OAAO,oBAAoB;AAAA,IACzB,eAAe,UAAU;AAAA,EAC3B;AAAA,EAEA,YAAY,OAAiC;AAC3C,UAAM,KAAK;AAGX,UAAM,eAAyC,CAAC;AAChD,iBAAa,KAAK,MAAM,MAAM,MAAM,MAAM,CAAC,EAAE,QAAQ,WAAS;AAC5D,mBAAa,MAAM,KAAK,IAAI;AAAA,IAC9B,CAAC;AAED,SAAK,QAAQ,EAAE,aAAa;AAAA,EAC9B;AAAA,EAEA,OAAO,yBAAyB,OAA2C,OAAyB;AAClG,UAAM,mBAAmB,EAAE,GAAG,MAAM,aAAa;AAEjD,qBAAiB,MAAM,MAAM,MAAM,MAAM,CAAC,EAAE,OAAO,QAAQ,WAAS;AAClE,UAAG,EAAE,MAAM,SAAS,mBAAmB;AACrC,yBAAiB,MAAM,KAAK,IAAI;AAAA,MAClC;AAAA,IACF,CAAC;AAED,WAAO;AAAA,MACL,cAAc;AAAA,IAChB;AAAA,EACF;AAAA,EAEA,kBAAmB;AACjB,WAAO;AAAA,MACL,eAAe;AAAA,QACb,MAAM;AAAA,QACN,OAAO;AAAA,MACT;AAAA,IACF;AAAA,EACF;AAAA,EAEA,eAAe,OAAwC,UAAkB,UAAe;AACtF,SAAK,MAAM;AAAA,MACT,KAAK,MAAM;AAAA,MACX,eAAe,KAAK,MAAM,OAAO,OAAO,UAAU,QAAQ;AAAA,IAC5D;AAAA,EACF;AAAA,EAEA,cAAc,YAAoB,QAAiB;AACjD,UAAM,sBAAsB;AAAA,MAC1B,GAAG,KAAK,MAAM;AAAA,MACd,CAAC,UAAU,GAAG;AAAA,IAChB;AACA,SAAK,SAAS;AAAA,MACZ,cAAc;AAAA,IAChB,CAAC;AAAA,EACH;AAAA,EAEA,gBAAgB,MAAc,QAAgC;AAC5D,QAAI,UAAU;AACd,QAAG,KAAK,MAAM,MAAM,UAAU;AAC5B,gBAAW,KAAK,MAAM,MAAM,SAAiB,kBAAkB;AAAA,IACjE;AACA,UAAM,EAAC,QAAQ,WAAU,IAAI,KAAK;AAElC,UAAM,YAAwE,CAAC;AAC/E,WAAQ,QAAQ,WAAS;AACvB,UACE,MAAM,UACN,MAAM,OAAO,SAAS,WACtB,MAAM,OAAO,KAAK,SAAS,YAC3B;AACA,kBAAU,MAAM,OAAO,KAAK,GAAG,IAAI;AAAA,UACjC,SAAS,MAAM,OAAO,KAAK;AAAA,QAC7B;AAAA,MACF;AAAA,IACF,CAAC;AAED,QAAI;AACJ,UAAM,QAAQ,KAAK,MAAM;AACzB,QAAG,OAAO,UAAU,eAAe,KAAK,KAAK,MAAM,SAAS,MAAM,MAAM,GAAG;AACzE,uBAAkB,KAAK,MAAM,QAAQ,MAAM,MAAM,EAAU;AAAA,IAC7D;AAEA,YAAO,MAAM;AAAA,MACb,KAAK;AAAS,eAAO,qBAAC,SACpB;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,OAAM;AAAA,cACN,OAAO,UAAU;AAAA,cACjB,UAAU,WAAS,KAAK,MAAM,gBAAgB,KAAK,MAAM,YAAY,KAAK,MAAM,MAAM,IAAI,KAAK;AAAA;AAAA,UACjG;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,UAAU;AAAA,cACV,OAAO,UAAU;AAAA,cACjB,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,UAAU,aAAW,KAAK,MAAM;AAAA,gBAC9B,KAAK,MAAM;AAAA,gBACX,WAAW,KAAK,MAAM,OAAO,OAAO;AAAA,cACtC;AAAA;AAAA,UACF;AAAA,UACC,KAAK,MAAM,MAAM,SAAS,gBAAgB;AAAA,YAAC;AAAA;AAAA,cAC1C,OAAO,UAAU;AAAA,cACjB,WAAW,OAAO,KAAK,KAAK,MAAM,OAAQ;AAAA,cAC1C,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,UAAU,OAAK,KAAK,eAAe,MAAM,UAAU,CAAC;AAAA;AAAA,UACtD;AAAA,UAEC,CAAC,cAAc,UAAU,aAAa,SAAS,EAAE,QAAQ,KAAK,MAAM,MAAM,IAAI,IAAI,KACjF;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,UAAU,cAAc;AAAA,cAC/B;AAAA,cACA,OAAQ,KAAK,MAAM,MAAc,cAAc;AAAA,cAC/C,UAAU,OAAK,KAAK,eAAe,MAAM,gBAAgB,CAAC;AAAA;AAAA,UAC5D;AAAA,UAEF;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,UAAU;AAAA,cACjB,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,UAAU,OAAK,KAAK,eAAe,MAAM,WAAW,CAAC;AAAA;AAAA,UACvD;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,UAAU;AAAA,cACjB,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,UAAU,OAAK,KAAK,eAAe,MAAM,WAAW,CAAC;AAAA;AAAA,UACvD;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,UAAU;AAAA,cACjB,OAAO;AAAA,cACP,UAAU,OAAK,KAAK,eAAe,YAAY,oBAAoB,KAAK,KAAM,SAAY,CAAC;AAAA;AAAA,UAC7F;AAAA,WACF;AAAA,MACA,KAAK;AAAU,eAAO,oBAAC,SACrB,8BAAC,SAAI,WAAU,kCACb;AAAA,UAAC;AAAA;AAAA,YACC,QAAQ;AAAA,YACR,QAAS,KAAK,MAAM,MAAc;AAAA,YAClC,YAAY,KAAK,MAAM,aAAc,KAAK,MAAM,MAAc,cAAc,CAAC;AAAA,YAC7E,UAAU,OAAK,KAAK,eAAe,MAAM,UAAU,CAAC;AAAA;AAAA,QACtD,GACF,GACF;AAAA,MACA,KAAK;AACH,eAAO;AAAA,UAAC;AAAA;AAAA,YACN,QAAQ;AAAA,YACR,OAAO,KAAK,MAAM;AAAA,YAClB,aAAa;AAAA,YACb,MAAM,KAAK,MAAM;AAAA,YACjB,UAAU,KAAK,eAAe,KAAK,IAAI;AAAA;AAAA,QACzC;AAAA,MACF,KAAK;AACH,eAAO;AAAA,UAAC;AAAA;AAAA,YACN,OAAO,KAAK,MAAM;AAAA,YAClB,UAAU,CAACA,WAAU;AACnB,mBAAK,MAAM;AAAA,gBACT,KAAK,MAAM;AAAA,gBACXA;AAAA,cACF;AAAA,YACF;AAAA;AAAA,QACF;AAAA,MACF;AAAS,eAAO,gCAAE;AAAA,IAClB;AAAA,EACF;AAAA,EAEA,UAAU,QAAgB;AACxB,SAAK,MAAM,YAAY;AAAA,MACrB,UAAU,KAAK,MAAM;AAAA,MACrB,UAAU,KAAK,MAAM,aAAW;AAAA,IAClC,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AAErB,UAAM,WAAqB,CAAC;AAC5B,UAAM,YAAY,KAAK,MAAM,MAAM;AACnC,UAAM,SAAS,aAAa,WAAW,CAAC,EAAE,OAAO,WAAS;AACxD,aAAO,EAAE,cAAc,gBAAgB,MAAM,SAAS;AAAA,IACxD,CAAC,EAAE,IAAI,WAAS;AACd,YAAM,UAAU,MAAM;AACtB,eAAS,KAAK,OAAO;AACrB,aAAO;AAAA,QAAC;AAAA;AAAA,UACN,eAAa,MAAM;AAAA,UACnB,IAAI;AAAA,UAEJ,OAAO,MAAM;AAAA,UACb,UAAU,KAAK,MAAM,aAAa,MAAM,KAAK;AAAA,UAC7C,gBAAgB,KAAK,cAAc,KAAK,MAAM,MAAM,KAAK;AAAA,UAExD,eAAK,gBAAgB,MAAM,MAAM,MAAM,MAAM;AAAA;AAAA,QALzC;AAAA,MAMP;AAAA,IACF,CAAC;AAED,UAAMC,UAAS,KAAK,MAAM,MAAM,UAAU,CAAC;AAE3C,UAAM,QAAkF;AAAA,MACtF,QAAQ;AAAA,QACN,MAAM,EAAE,QAAQ;AAAA,QAChB,SAAS,MAAM,KAAK,MAAM,eAAe,KAAK,MAAM,UAAU;AAAA,MAChE;AAAA,MACA,WAAW;AAAA,QACT,MAAM,EAAE,WAAW;AAAA,QACnB,SAAS,MAAM,KAAK,MAAM,YAAY,KAAK,MAAM,UAAU;AAAA,MAC7D;AAAA,MACA,MAAM;AAAA,QACJ,MAAOA,QAAO,eAAe,SAAU,EAAE,MAAM,IAAI,EAAE,MAAM;AAAA,QAC3D,SAAS,MAAM,KAAK,MAAM,wBAAwB,KAAK,MAAM,UAAU;AAAA,MACzE;AAAA,MACA,aAAa;AAAA,QACX,MAAM,EAAE,eAAe;AAAA;AAAA,QAEvB,UAAU,KAAK,MAAM;AAAA,QACrB,SAAS,MAAM,KAAK,UAAU,EAAE;AAAA,MAClC;AAAA,MACA,eAAe;AAAA,QACb,MAAM,EAAE,iBAAiB;AAAA;AAAA,QAEzB,UAAU,KAAK,MAAM;AAAA,QACrB,SAAS,MAAM,KAAK,UAAU,CAAE;AAAA,MAClC;AAAA,IACF;AAEA,aAAS,gBAAgB,IAAY,OAA6B;AAChE,YAAM,gBAAgB;AACtB,YAAM,EAAE,EAAE,QAAQ;AAAA,IACpB;AAEA,WAAO;AAAA,MAAC;AAAA;AAAA,QAAQ,WAAU;AAAA,QACxB,MAAK;AAAA,QACL,cAAY,EAAE,cAAc;AAAA,QAE5B;AAAA,8BAAC,YACC,+BAAC,SAAI,WAAU,gBACb;AAAA,gCAAC,QAAG,WAAU,uBACX,YAAE,sBAAsB,EAAE,SAAS,cAAc,KAAK,MAAM,MAAM,EAAE,EAAE,CAAC,GAC1E;AAAA,YACA,oBAAC,SAAI,WAAU,sBACb;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,aAAa;AAAA,gBACb,kBAAkB;AAAA,gBAElB;AAAA;AAAA,oBAAC;AAAA;AAAA,sBACC,IAAG;AAAA,sBACH,eAAY;AAAA,sBACZ,WAAU;AAAA,sBACV,OAAO;AAAA,sBACP,8BAAC,cAAW,WAAU,0BAAyB;AAAA;AAAA,kBACjD;AAAA,kBACA,oBAAC,QACC,8BAAC,QAAG,WAAU,mBACX,iBAAO,KAAK,KAAK,EAAE,IAAI,CAAC,OAAO;AAC9B,0BAAM,OAAO,MAAM,EAAE;AACrB,2BAAO,oBAAC,QACN,8BAAC,YAAS,OAAO,IAAI,WAAU,yBAC5B,eAAK,MACR,KAHc,EAIhB;AAAA,kBACF,CAAC,GACH,GACF;AAAA;AAAA;AAAA,YACF,GACF;AAAA,aACF,GAEF;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,uBAAuB;AAAA,cACvB,mBAAmB;AAAA,cACnB,aAAa;AAAA,cAEZ;AAAA;AAAA,UACH;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,cAAc,gBAAgB,EAAE,mBAAmB;AACzD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"555ef41c8141fe537bdb43523a4ef7ec4c287394"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Rn=function(){return l},l}Rn();function Tj(n,e){return Rn().f[0]++,Rn().s[0]++,mb[n]?(Rn().b[0][0]++,{...mb[n],groups:mb[n].groups.map(t=>(Rn().f[1]++,Rn().s[1]++,{...t,id:t.title.replace(/ /g,"_"),title:e(t.title)}))}):(Rn().b[0][1]++,mb.invalid)}function tR(n,e){Rn().f[2]++;const t=(Rn().s[2]++,{id:"layer",title:e("Layer"),type:"layer"}),r=(Rn().s[3]++,{id:"filter",title:e("Filter"),type:"filter"}),i=(Rn().s[4]++,{id:"jsoneditor",title:e("JSON Editor"),type:"jsoneditor"});return Rn().s[5]++,[t,r].concat(Tj(n,e).groups).concat([i])}class T6 extends Xn.Component{constructor(e){Rn().f[6]++,Rn().s[8]++,super(e);const t=(Rn().s[9]++,{});Rn().s[10]++,tR(this.props.layer.type,e.t).forEach(r=>{Rn().f[7]++,Rn().s[11]++,t[r.title]=!0}),Rn().s[12]++,this.state={editorGroups:t}}static getDerivedStateFromProps(e,t){Rn().f[8]++;const r=(Rn().s[13]++,{...t.editorGroups});return Rn().s[14]++,Tj(e.layer.type,e.t).groups.forEach(i=>{Rn().f[9]++,Rn().s[15]++,i.title in r?Rn().b[1][1]++:(Rn().b[1][0]++,Rn().s[16]++,r[i.title]=!0)}),Rn().s[17]++,{editorGroups:r}}getChildContext(){return Rn().f[10]++,Rn().s[18]++,{reactIconBase:{size:14,color:"#8e8e8e"}}}changeProperty(e,t,r){Rn().f[11]++,Rn().s[19]++,this.props.onLayerChanged(this.props.layerIndex,cie(this.props.layer,e,t,r))}onGroupToggle(e,t){Rn().f[12]++;const r=(Rn().s[20]++,{...this.state.editorGroups,[e]:t});Rn().s[21]++,this.setState({editorGroups:r})}renderGroupType(e,t){Rn().f[13]++;let r=(Rn().s[22]++,"");Rn().s[23]++,this.props.layer.metadata?(Rn().b[2][0]++,Rn().s[24]++,r=this.props.layer.metadata["maputnik:comment"]):Rn().b[2][1]++;const{errors:i,layerIndex:s}=(Rn().s[25]++,this.props),l=(Rn().s[26]++,{});Rn().s[27]++,i.forEach(y=>{Rn().f[14]++,Rn().s[28]++,Rn().b[4][0]++,y.parsed&&(Rn().b[4][1]++,y.parsed.type==="layer")&&(Rn().b[4][2]++,y.parsed.data.index==s)?(Rn().b[3][0]++,Rn().s[29]++,l[y.parsed.data.key]={message:y.parsed.data.message}):Rn().b[3][1]++});let o;const f=(Rn().s[30]++,this.props.layer);switch(Rn().s[31]++,Object.prototype.hasOwnProperty.call(this.props.sources,f.source)?(Rn().b[5][0]++,Rn().s[32]++,o=this.props.sources[f.source].layers):Rn().b[5][1]++,Rn().s[33]++,e){case"layer":return Rn().b[6][0]++,Rn().s[34]++,ue.jsxs("div",{children:[ue.jsx(pz,{value:this.props.layer.id,wdKey:"layer-editor.layer-id",error:l.id,onChange:y=>(Rn().f[15]++,Rn().s[35]++,this.props.onLayerIdChange(this.props.layerIndex,this.props.layer.id,y))}),ue.jsx(fz,{disabled:!0,error:l.type,value:this.props.layer.type,onChange:y=>(Rn().f[16]++,Rn().s[36]++,this.props.onLayerChanged(this.props.layerIndex,Aie(this.props.layer,y)))}),(Rn().b[7][0]++,this.props.layer.type!=="background"&&(Rn().b[7][1]++,ue.jsx(gz,{error:l.source,sourceIds:Object.keys(this.props.sources),value:this.props.layer.source,onChange:y=>(Rn().f[17]++,Rn().s[37]++,this.changeProperty(null,"source",y))}))),(Rn().b[8][0]++,["background","raster","hillshade","heatmap"].indexOf(this.props.layer.type)<0&&(Rn().b[8][1]++,ue.jsx(vz,{error:l["source-layer"],sourceLayerIds:o,value:this.props.layer["source-layer"],onChange:y=>(Rn().f[18]++,Rn().s[38]++,this.changeProperty(null,"source-layer",y))}))),ue.jsx(Ple,{error:l.minzoom,value:this.props.layer.minzoom,onChange:y=>(Rn().f[19]++,Rn().s[39]++,this.changeProperty(null,"minzoom",y))}),ue.jsx(Rle,{error:l.maxzoom,value:this.props.layer.maxzoom,onChange:y=>(Rn().f[20]++,Rn().s[40]++,this.changeProperty(null,"maxzoom",y))}),ue.jsx(Fle,{error:l.comment,value:r,onChange:y=>(Rn().f[21]++,Rn().s[41]++,this.changeProperty("metadata","maputnik:comment",y==""?(Rn().b[9][0]++,void 0):(Rn().b[9][1]++,y)))})]});case"filter":return Rn().b[6][1]++,Rn().s[42]++,ue.jsx("div",{children:ue.jsx("div",{className:"maputnik-filter-editor-wrapper",children:ue.jsx(Ooe,{errors:l,filter:this.props.layer.filter,properties:this.props.vectorLayers[this.props.layer["source-layer"]],onChange:y=>(Rn().f[22]++,Rn().s[43]++,this.changeProperty(null,"filter",y))})})});case"properties":return Rn().b[6][2]++,Rn().s[44]++,ue.jsx(Ble,{errors:l,layer:this.props.layer,groupFields:t,spec:this.props.spec,onChange:this.changeProperty.bind(this)});case"jsoneditor":return Rn().b[6][3]++,Rn().s[45]++,ue.jsx(_O,{layer:this.props.layer,onChange:y=>{Rn().f[23]++,Rn().s[46]++,this.props.onLayerChanged(this.props.layerIndex,y)}});default:return Rn().b[6][4]++,Rn().s[47]++,ue.jsx(ue.Fragment,{})}}moveLayer(e){Rn().f[24]++,Rn().s[48]++,this.props.onMoveLayer({oldIndex:this.props.layerIndex,newIndex:this.props.layerIndex+e})}render(){Rn().f[25]++;const e=(Rn().s[49]++,this.props.t),t=(Rn().s[50]++,[]),r=(Rn().s[51]++,this.props.layer.type),i=(Rn().s[52]++,tR(r,e).filter(f=>(Rn().f[26]++,Rn().s[53]++,Rn().b[10][0]++,!(r==="background"&&(Rn().b[10][1]++,f.type==="source")))).map(f=>{Rn().f[27]++;const y=(Rn().s[54]++,f.id);return Rn().s[55]++,t.push(y),Rn().s[56]++,ue.jsx(kle,{"data-wd-key":f.title,id:y,title:f.title,isActive:this.state.editorGroups[f.title],onActiveToggle:this.onGroupToggle.bind(this,f.title),children:this.renderGroupType(f.type,f.fields)},y)})),s=(Rn().s[57]++,Rn().b[11][0]++,this.props.layer.layout||(Rn().b[11][1]++,{})),l=(Rn().s[58]++,{delete:{text:e("Delete"),handler:()=>(Rn().f[28]++,Rn().s[59]++,this.props.onLayerDestroy(this.props.layerIndex))},duplicate:{text:e("Duplicate"),handler:()=>(Rn().f[29]++,Rn().s[60]++,this.props.onLayerCopy(this.props.layerIndex))},hide:{text:s.visibility==="none"?(Rn().b[12][0]++,e("Show")):(Rn().b[12][1]++,e("Hide")),handler:()=>(Rn().f[30]++,Rn().s[61]++,this.props.onLayerVisibilityToggle(this.props.layerIndex))},moveLayerUp:{text:e("Move layer up"),disabled:this.props.isFirstLayer,handler:()=>(Rn().f[31]++,Rn().s[62]++,this.moveLayer(-1))},moveLayerDown:{text:e("Move layer down"),disabled:this.props.isLastLayer,handler:()=>(Rn().f[32]++,Rn().s[63]++,this.moveLayer(1))}});function o(f,y){Rn().f[33]++,Rn().s[64]++,y.stopPropagation(),Rn().s[65]++,l[f].handler()}return Rn().s[66]++,ue.jsxs("section",{className:"maputnik-layer-editor",role:"main","aria-label":e("Layer editor"),children:[ue.jsx("header",{children:ue.jsxs("div",{className:"layer-header",children:[ue.jsx("h2",{className:"layer-header__title",children:e("Layer: {{layerId}}",{layerId:kj(this.props.layer.id)})}),ue.jsx("div",{className:"layer-header__info",children:ue.jsxs(Ab.Wrapper,{className:"more-menu",onSelection:o,closeOnSelection:!1,children:[ue.jsx(Ab.Button,{id:"skip-target-layer-editor","data-wd-key":"skip-target-layer-editor",className:"more-menu__button",title:"Layer options",children:ue.jsx(XV,{className:"more-menu__button__svg"})}),ue.jsx(Ab.Menu,{children:ue.jsx("ul",{className:"more-menu__menu",children:Object.keys(l).map(f=>{Rn().f[34]++;const y=(Rn().s[67]++,l[f]);return Rn().s[68]++,ue.jsx("li",{children:ue.jsx(Ab.MenuItem,{value:f,className:"more-menu__menu__item",children:y.text})},f)})})})]})})]})}),ue.jsx(Fie,{allowMultipleExpanded:!0,allowZeroExpanded:!0,preExpanded:t,children:i})]})}}Kn(T6,"defaultProps",(Rn().s[6]++,{onLayerChanged:()=>{Rn().f[3]++},onLayerIdChange:()=>{Rn().f[4]++},onLayerDestroyed:()=>{Rn().f[5]++}})),Kn(T6,"childContextTypes",(Rn().s[7]++,{reactIconBase:yi.object}));const qle=(Rn().s[69]++,zs()(T6));var nR=function(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return n.concat(s||Array.prototype.slice.call(e))},Vle=function(){function n(e,t,r){this.name=e,this.version=t,this.os=r,this.type="browser"}return n}(),$le=function(){function n(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return n}(),Hle=function(){function n(e,t,r,i){this.name=e,this.version=t,this.os=r,this.bot=i,this.type="bot-device"}return n}(),Zle=function(){function n(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return n}(),Xle=function(){function n(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return n}(),Jle=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,eue=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,rR=3,tue=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",Jle]],iR=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function nue(n){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new Xle:typeof navigator<"u"?iue(navigator.userAgent):sue()}function rue(n){return n!==""&&tue.reduce(function(e,t){var r=t[0],i=t[1];if(e)return e;var s=i.exec(n);return!!s&&[r,s]},!1)}function iue(n){var e=rue(n);if(!e)return null;var t=e[0],r=e[1];if(t==="searchbot")return new Zle;var i=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);i?i.length<rR&&(i=nR(nR([],i,!0),aue(rR-i.length),!0)):i=[];var s=i.join("."),l=oue(n),o=eue.exec(n);return o&&o[1]?new Hle(t,s,l,o[1]):new Vle(t,s,l)}function oue(n){for(var e=0,t=iR.length;e<t;e++){var r=iR[e],i=r[0],s=r[1],l=s.exec(n);if(l)return i}return null}function sue(){var n=typeof process<"u"&&process.version;return n?new $le(process.version.slice(1)):null}function aue(n){for(var e=[],t=0;t<n;t++)e.push("0");return e}const lue="maputnik",uue="2.1.1",Aue="A MapLibre GL visual style editor",cue="module",due="''",hue={start:"vite",build:"tsc && vite build --base=/maputnik/","build-desktop":"tsc && vite build --base=/ && cd desktop && make","i18n:refresh":"i18next 'src/**/*.{ts,tsx,js,jsx}'",lint:"eslint",test:"cypress run","cy:open":"cypress open","lint-css":'stylelint "src/styles/*.scss"',"sort-styles":"jq 'sort_by(.id)' src/config/styles.json > tmp.json && mv tmp.json src/config/styles.json"},fue={type:"git",url:"https://github.com/maplibre/maputnik"},pue="Lukas Martinelli",mue="MIT",gue="https://github.com/maplibre/maputnik#readme",yue={"@mapbox/mapbox-gl-rtl-text":"^0.3.0","@maplibre/maplibre-gl-geocoder":"^1.8.0","@maplibre/maplibre-gl-inspect":"^1.7.1","@maplibre/maplibre-gl-style-spec":"^23.1.0","@mdi/js":"^7.4.47","@mdi/react":"^1.6.1","@prantlf/jsonlint":"^16.0.0","array-move":"^4.0.0",buffer:"^6.0.3",classnames:"^2.5.1",codemirror:"^5.65.18",color:"^5.0.0","detect-browser":"^5.3.0",events:"^3.3.0","file-saver":"^2.0.5",i18next:"^24.2.3","i18next-browser-languagedetector":"^8.0.4","i18next-resources-to-backend":"^1.2.1","json-stringify-pretty-compact":"^4.0.0","json-to-ast":"^2.1.0",lodash:"^4.17.21","lodash.capitalize":"^4.2.1","lodash.clamp":"^4.0.3","lodash.clonedeep":"^4.5.0","lodash.get":"^4.4.2","lodash.isequal":"^4.5.0","lodash.throttle":"^4.1.1","maplibre-gl":"^5.2.0","maputnik-design":"github:maputnik/design#172b06c",ol:"^10.4.0","ol-mapbox-style":"^12.5.0",pmtiles:"^4.3.0","prop-types":"^15.8.1",react:"^18.2.0","react-accessible-accordion":"^5.0.0","react-aria-menubutton":"^7.0.3","react-aria-modal":"^5.0.2","react-autobind":"^1.0.6","react-autocomplete":"^1.8.1","react-collapse":"^5.1.1","react-color":"^2.19.3","react-dom":"^18.2.0","react-file-reader-input":"^2.0.0","react-i18next":"^15.4.1","react-icon-base":"^2.1.2","react-icons":"^5.5.0","react-sortable-hoc":"^2.0.0","reconnecting-websocket":"^4.4.0",slugify:"^1.6.6","string-hash":"^1.1.3",url:"^0.11.4"},vue={esversion:6},Cue={extends:"stylelint-config-recommended-scss",rules:{"no-descending-specificity":null,"media-feature-name-no-unknown":[!0,{ignoreMediaFeatureNames:["prefers-reduced-motion"]}]}},_ue={"@cypress/code-coverage":"^3.13.12","@eslint/js":"^9.22.0","@istanbuljs/nyc-config-typescript":"^1.0.2","@rollup/plugin-replace":"^6.0.2","@shellygo/cypress-test-utils":"^4.1.13","@types/codemirror":"^5.60.15","@types/color":"^4.2.0","@types/cors":"^2.8.17","@types/file-saver":"^2.0.7","@types/geojson":"^7946.0.16","@types/json-to-ast":"^2.1.4","@types/lodash.capitalize":"^4.2.9","@types/lodash.clamp":"^4.0.9","@types/lodash.clonedeep":"^4.5.9","@types/lodash.get":"^4.4.9","@types/lodash.isequal":"^4.5.8","@types/lodash.throttle":"^4.1.9","@types/randomcolor":"^0.5.9","@types/react":"^18.2.67","@types/react-aria-menubutton":"^6.2.14","@types/react-aria-modal":"^5.0.0","@types/react-autocomplete":"^1.8.11","@types/react-collapse":"^5.0.4","@types/react-color":"^3.0.13","@types/react-dom":"^18.2.22","@types/react-file-reader-input":"^2.0.4","@types/react-icon-base":"^2.1.6","@types/string-hash":"^1.1.3","@types/uuid":"^10.0.0","@types/wicg-file-system-access":"^2023.10.5","@vitejs/plugin-react":"^4.3.4",cors:"^2.8.5",cypress:"^14.2.0","cypress-plugin-tab":"^1.0.5",eslint:"^9.22.0","eslint-plugin-react":"^7.37.4","eslint-plugin-react-hooks":"^5.2.0","eslint-plugin-react-refresh":"^0.4.19","i18next-parser":"^9.3.0",istanbul:"^0.4.5","istanbul-lib-coverage":"^3.2.2",postcss:"^8.5.1","react-hot-loader":"^4.13.1",sass:"^1.85.1",stylelint:"^16.15.0","stylelint-config-recommended-scss":"^14.1.0","stylelint-scss":"^6.11.1",typescript:"^5.8.2","typescript-eslint":"^8.26.1",uuid:"^11.1.0",vite:"^6.2.2","vite-plugin-istanbul":"^7.0.0"},oR={name:lue,version:uue,description:Aue,type:cue,main:due,scripts:hue,repository:fue,author:pue,license:mue,homepage:gue,dependencies:yue,jshintConfig:vue,stylelint:Cue,devDependencies:_ue},bue="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='1200'%20height='1200'%20viewBox='0%200%20100%20100'%3e%3cg%20class='map'%20stroke='%23000'%3e%3cuse%20xlink:href='%23ref-1--map__main'%20fill='%234eba6f'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--map__line1'%20fill='none'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--map__line2'%20fill='none'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--map__line3'%20fill='none'%3e%3c/use%3e%3c/g%3e%3cg%20class='palette'%3e%3cuse%20xlink:href='%23ref-1--palette__main'%20fill='%23fff'%20stroke='%23000'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__inner'%20fill='none'%20stroke='%23000'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle5'%20fill='%23f7c44c'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle4'%20fill='%234eba6f'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle3'%20fill='%23f7c44c'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle2'%20fill='%234eba6f'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle1'%20fill='%23f7c44c'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle0'%20fill='%234eba6f'%3e%3c/use%3e%3c/g%3e%3cg%20class='brush'%20stroke='%23000'%3e%3cuse%20xlink:href='%23ref-1--brush__bottom'%20fill='%23f7c44c'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--brush__top'%20fill='%23fff'%3e%3c/use%3e%3c/g%3e%3cdefs%3e%3cpath%20id='ref-1--map__main'%20stroke-width='2.366'%20stroke-linejoin='round'%20d='M18.84%207.717l15.44%207.542%2015.75-7.762%2015.7%207.857L81.005%207.67%2096.31%2054.052%2073.598%2062.12%2050.93%2053.872l-25.1%208.066-22.668-8.066z'%3e%3c/path%3e%3cpath%20id='ref-1--map__line1'%20d='M65.556%2015.07l7.647%2046.838'%20stroke-width='1.104'%3e%3c/path%3e%3cpath%20id='ref-1--map__line2'%20d='M50.261%207.422l.717%2046.6'%20stroke-width='1.104'%3e%3c/path%3e%3cpath%20id='ref-1--map__line3'%20d='M34.011%2015.07l-8.603%2046.6'%20stroke-width='1.104'%3e%3c/path%3e%3cpath%20id='ref-1--palette__main'%20stroke-width='2.3'%20d='M47.352%2030.887c7.993.226%2016.934%209.725%2017.954%2015.25%201.02%205.527-.743%2011.125-4.298%2013.875-3.554%202.75-8.6%202.905-8.723%208.302-.097%204.237%208.457%208.5%208.088%2015.653-.406%207.857-15.508%2013.15-30.943%206.102-8.556-3.906-14.249-13.653-13.385-26.238C16.833%2052.334%2022.32%2043.658%2027.382%2039c5.977-5.503%2011.977-8.337%2019.97-8.112z'%3e%3c/path%3e%3ccircle%20id='ref-1--palette__inner'%20stroke-width='2.3'%20cx='41.873'%20cy='61.901'%20r='6.389'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle5'%20cy='44.56'%20cx='54.347'%20r='4.336'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle4'%20cx='40.443'%20cy='41.555'%20r='4.336'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle3'%20r='4.336'%20cy='51.102'%20cx='29.651'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle2'%20cx='25.293'%20cy='65.836'%20r='4.336'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle1'%20r='4.336'%20cy='79.326'%20cx='32.764'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle0'%20cx='46.669'%20cy='80.571'%20r='4.336'%3e%3c/circle%3e%3cpath%20id='ref-1--brush__bottom'%20d='M76.333%2089.333c-1.645-9.794-4.375-35.26-4.32-37.887.056-2.627%202.52-4.34%205.36-4.317%202.842.022%205.098%201.87%205.314%204.27.107%201.2-1.576%2028.06-2.318%2037.844-.332%204.374-3.31%204.413-4.036.09z'%20stroke-width='2.3'%20stroke-linejoin='round'%3e%3c/path%3e%3cpath%20id='ref-1--brush__top'%20stroke-linejoin='round'%20stroke-width='2.3'%20d='M77.184%2026.428s-5.621%207.02-5.621%2011.978c0%204.957%202.206%206.878%205.81%206.878%203.606%200%205.148-1.708%205.29-6.736.142-5.028-5.479-12.12-5.479-12.12z'%3e%3c/path%3e%3c/defs%3e%3c/svg%3e";function Gi(){var n="/home/runner/work/maputnik/maputnik/src/components/AppToolbar.tsx",e="7ffd82d4f3aa9239b1c505abaafac5bdb522b791",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/AppToolbar.tsx",statementMap:{0:{start:{line:18,column:16},end:{line:18,column:24}},1:{start:{line:19,column:41},end:{line:19,column:89}},2:{start:{line:22,column:4},end:{line:22,column:107}},3:{start:{line:27,column:4},end:{line:37,column:6}},4:{start:{line:42,column:4},end:{line:49,column:6}},5:{start:{line:54,column:4},end:{line:62,column:6}},6:{start:{line:66,column:10},end:{line:74,column:3}},7:{start:{line:76,column:4},end:{line:76,column:34}},8:{start:{line:79,column:4},end:{line:79,column:40}},9:{start:{line:81,column:11},end:{line:88,column:3}},10:{start:{line:82,column:4},end:{line:87,column:5}},11:{start:{line:83,column:6},end:{line:83,column:59}},12:{start:{line:85,column:17},end:{line:85,column:65}},13:{start:{line:86,column:6},end:{line:86,column:17}},14:{start:{line:90,column:14},end:{line:90,column:26}},15:{start:{line:91,column:18},end:{line:127,column:5}},16:{start:{line:128,column:24},end:{line:130,column:6}},17:{start:{line:129,column:6},end:{line:129,column:45}},18:{start:{line:131,column:4},end:{line:249,column:12}},19:{start:{line:142,column:33},end:{line:142,column:58}},20:{start:{line:151,column:33},end:{line:151,column:60}},21:{start:{line:160,column:33},end:{line:160,column:51}},22:{start:{line:212,column:33},end:{line:212,column:69}},23:{start:{line:215,column:38},end:{line:215,column:59}},24:{start:{line:216,column:20},end:{line:216,column:157}},25:{start:{line:218,column:115},end:{line:218,column:148}},26:{start:{line:219,column:20},end:{line:219,column:133}},27:{start:{line:235,column:33},end:{line:235,column:74}},28:{start:{line:238,column:18},end:{line:238,column:94}},29:{start:{line:252,column:19},end:{line:252,column:56}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:21,column:2},end:{line:21,column:3}},loc:{start:{line:21,column:11},end:{line:23,column:3}},line:21},1:{name:"(anonymous_1)",decl:{start:{line:26,column:2},end:{line:26,column:3}},loc:{start:{line:26,column:11},end:{line:38,column:3}},line:26},2:{name:"(anonymous_2)",decl:{start:{line:41,column:2},end:{line:41,column:3}},loc:{start:{line:41,column:11},end:{line:50,column:3}},line:41},3:{name:"(anonymous_3)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:11},end:{line:63,column:3}},line:53},4:{name:"(anonymous_4)",decl:{start:{line:75,column:2},end:{line:75,column:3}},loc:{start:{line:75,column:23},end:{line:77,column:3}},line:75},5:{name:"(anonymous_5)",decl:{start:{line:78,column:2},end:{line:78,column:3}},loc:{start:{line:78,column:28},end:{line:80,column:3}},line:78},6:{name:"(anonymous_6)",decl:{start:{line:81,column:11},end:{line:81,column:12}},loc:{start:{line:81,column:23},end:{line:88,column:3}},line:81},7:{name:"(anonymous_7)",decl:{start:{line:89,column:2},end:{line:89,column:3}},loc:{start:{line:89,column:11},end:{line:250,column:3}},line:89},8:{name:"(anonymous_8)",decl:{start:{line:128,column:35},end:{line:128,column:36}},loc:{start:{line:128,column:45},end:{line:130,column:5}},line:128},9:{name:"(anonymous_9)",decl:{start:{line:142,column:25},end:{line:142,column:26}},loc:{start:{line:142,column:33},end:{line:142,column:58}},line:142},10:{name:"(anonymous_10)",decl:{start:{line:151,column:25},end:{line:151,column:26}},loc:{start:{line:151,column:33},end:{line:151,column:60}},line:151},11:{name:"(anonymous_11)",decl:{start:{line:160,column:25},end:{line:160,column:26}},loc:{start:{line:160,column:33},end:{line:160,column:51}},line:160},12:{name:"(anonymous_12)",decl:{start:{line:212,column:26},end:{line:212,column:27}},loc:{start:{line:212,column:33},end:{line:212,column:69}},line:212},13:{name:"(anonymous_13)",decl:{start:{line:215,column:31},end:{line:215,column:32}},loc:{start:{line:215,column:38},end:{line:215,column:59}},line:215},14:{name:"(anonymous_14)",decl:{start:{line:215,column:65},end:{line:215,column:66}},loc:{start:{line:215,column:75},end:{line:217,column:19}},line:215},15:{name:"(anonymous_15)",decl:{start:{line:218,column:108},end:{line:218,column:109}},loc:{start:{line:218,column:115},end:{line:218,column:148}},line:218},16:{name:"(anonymous_16)",decl:{start:{line:218,column:154},end:{line:218,column:155}},loc:{start:{line:218,column:164},end:{line:220,column:19}},line:218},17:{name:"(anonymous_17)",decl:{start:{line:235,column:26},end:{line:235,column:27}},loc:{start:{line:235,column:33},end:{line:235,column:74}},line:235},18:{name:"(anonymous_18)",decl:{start:{line:237,column:65},end:{line:237,column:66}},loc:{start:{line:237,column:83},end:{line:239,column:17}},line:237}},branchMap:{0:{loc:{start:{line:82,column:4},end:{line:87,column:5}},type:"if",locations:[{start:{line:82,column:4},end:{line:87,column:5}},{start:{line:84,column:11},end:{line:87,column:5}}],line:82}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/AppToolbar.tsx"],names:[],mappings:"AA+BW,cAyLG,YAzLH;AA/BX,OAAO,WAAW;AAClB,OAAO,gBAAgB;AACvB,SAAQ,cAAa;AAErB;AAAA,EACE;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,OACK;AACP,OAAO,aAAa;AAEpB,OAAO,kBAAkB;AACzB,SAAS,uBAAwC;AACjD,SAAS,0BAA0B;AAGnC,MAAM,UAAU,OAAO;AACvB,MAAM,mCAAmC,CAAC,UAAU,SAAS,EAAE,QAAQ,QAAS,IAAI,IAAI;AAQxF,MAAM,iBAAiB,MAAM,UAAyB;AAAA,EACpD,SAAS;AACP,WAAO,oBAAC,UAAK,WAAU,sBAAsB,eAAK,MAAM,UAAS;AAAA,EACnE;AACF;AASA,MAAM,oBAAoB,MAAM,UAA4B;AAAA,EAC1D,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAW,WAAW,yBAAyB,KAAK,MAAM,SAAS;AAAA,QACnE,MAAM,KAAK,MAAM;AAAA,QACjB,KAAI;AAAA,QACJ,QAAO;AAAA,QACP,eAAY;AAAA,QAEX,eAAK,MAAM;AAAA;AAAA,IACd;AAAA,EACF;AACF;AAOA,MAAM,sBAAsB,MAAM,UAA8B;AAAA,EAC9D,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,eAAa,KAAK,MAAM;AAAA,QAEvB,eAAK,MAAM;AAAA;AAAA,IACd;AAAA,EACF;AACF;AAQA,MAAM,sBAAsB,MAAM,UAA8B;AAAA,EAC9D,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,eAAa,KAAK,MAAM;AAAA,QACxB,SAAS,KAAK,MAAM;AAAA,QAEnB,eAAK,MAAM;AAAA;AAAA,IACd;AAAA,EACF;AACF;AAmBA,MAAM,2BAA2B,MAAM,UAAmC;AAAA,EACxE,QAAQ;AAAA,IACN,QAAQ;AAAA,MACN,UAAU;AAAA,MACV,SAAS;AAAA,MACT,MAAM;AAAA,MACN,KAAK;AAAA,MACL,QAAQ;AAAA,IACV;AAAA,EACF;AAAA,EAEA,gBAAgB,KAAe;AAC7B,SAAK,MAAM,cAAc,GAAG;AAAA,EAC9B;AAAA,EAEA,qBAAqB,KAAa;AAChC,SAAK,MAAM,KAAK,eAAe,GAAG;AAAA,EACpC;AAAA,EAEA,SAAS,CAAC,WAAmB;AAC3B,QAAI,WAAW,OAAO;AACpB,MAAC,SAAS,cAAc,oBAAoB,EAAwB,MAAM;AAAA,IAC5E,OACK;AACH,YAAM,KAAK,SAAS,cAAc,kBAAgB,MAAM;AACxD,SAAG,MAAM;AAAA,IACX;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,QAAQ;AAAA,MACZ;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,KAAK;AAAA,MAChB;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,SAAS;AAAA,QAClB,UAAU,KAAK,MAAM,aAAa;AAAA,MACpC;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,qBAAqB;AAAA,QAC9B,UAAU,CAAC;AAAA,MACb;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,mBAAmB;AAAA,QAC5B,UAAU,CAAC;AAAA,MACb;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,mBAAmB;AAAA,QAC5B,UAAU,CAAC;AAAA,MACb;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,sBAAsB;AAAA,QAC/B,UAAU,CAAC;AAAA,MACb;AAAA,IACF;AAEA,UAAM,cAAc,MAAM,KAAK,CAAC,SAAS;AACvC,aAAO,KAAK,OAAO,KAAK,MAAM;AAAA,IAChC,CAAC;AAED,WAAO,oBAAC,SAAI,WAAU,oBACpB,+BAAC,SAAI,WAAU,2BACb;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UAGV;AAAA;AAAA,cAAC;AAAA;AAAA,gBACC,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACV,SAAS,QAAM,KAAK,OAAO,YAAY;AAAA,gBAEtC,YAAE,aAAa;AAAA;AAAA,YAClB;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACV,SAAS,QAAM,KAAK,OAAO,cAAc;AAAA,gBAExC,YAAE,cAAc;AAAA;AAAA,YACnB;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACV,SAAS,QAAM,KAAK,OAAO,KAAK;AAAA,gBAE/B,YAAE,UAAU;AAAA;AAAA,YACf;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,QAAO;AAAA,gBACP,KAAI;AAAA,gBACJ,MAAK;AAAA,gBAEL;AAAA,sCAAC,SAAI,KAAK,cAAc,KAAK,EAAE,oBAAoB,GAAG;AAAA,kBACtD,qBAAC,QACC;AAAA,wCAAC,UAAK,WAAU,yBAAyB,kBAAQ,MAAK;AAAA,oBACtD,qBAAC,UAAK,WAAU,4BAA2B;AAAA;AAAA,sBAAE,QAAQ;AAAA,uBAAQ;AAAA,qBAC/D;AAAA;AAAA;AAAA,YACF;AAAA;AAAA;AAAA,MACF;AAAA,MACA,qBAAC,SAAI,WAAU,6BAA4B,MAAK,cAAa,cAAW,WACtE;AAAA,6BAAC,iBAAc,OAAM,YAAW,SAAS,KAAK,MAAM,cAAc,KAAK,MAAM,MAAM,GACjF;AAAA,8BAAC,mBAAgB;AAAA,UACjB,oBAAC,YAAU,YAAE,MAAM,GAAE;AAAA,WACvB;AAAA,QACA,qBAAC,iBAAc,OAAM,cAAa,SAAS,KAAK,MAAM,cAAc,KAAK,MAAM,QAAQ,GACrF;AAAA,8BAAC,UAAO;AAAA,UACR,oBAAC,YAAU,YAAE,MAAM,GAAE;AAAA,WACvB;AAAA,QACA,qBAAC,iBAAc,OAAM,eAAc,SAAS,KAAK,MAAM,cAAc,KAAK,MAAM,SAAS,GACvF;AAAA,8BAAC,YAAS;AAAA,UACV,oBAAC,YAAU,YAAE,cAAc,GAAE;AAAA,WAC/B;AAAA,QACA,qBAAC,iBAAc,OAAM,gBAAe,SAAS,KAAK,MAAM,cAAc,KAAK,MAAM,UAAU,GACzF;AAAA,8BAAC,cAAW;AAAA,UACZ,oBAAC,YAAU,YAAE,gBAAgB,GAAE;AAAA,WACjC;AAAA,QAEA,qBAAC,iBAAc,OAAM,eACnB;AAAA,8BAAC,gBAAa;AAAA,UACd,qBAAC,YAAU;AAAA,cAAE,MAAM;AAAA,YACjB;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,eAAY;AAAA,gBACZ,UAAU,CAAC,MAAM,KAAK,gBAAgB,EAAE,OAAO,KAAiB;AAAA,gBAChE,OAAO,aAAa;AAAA,gBAEnB;AAAA,wBAAM,OAAO,OAAK,EAAE,UAAU,SAAS,EAAE,IAAI,CAAC,SAAS;AACtD,2BACE,oBAAC,YAAqB,OAAO,KAAK,IAAI,UAAU,KAAK,UAAU,eAAa,KAAK,IAC9E,eAAK,SADK,KAAK,EAElB;AAAA,kBAEJ,CAAC;AAAA,kBACD,oBAAC,cAAS,OAAO,EAAE,qBAAqB,GACrC,gBAAM,OAAO,OAAK,EAAE,UAAU,qBAAqB,EAAE,IAAI,CAAC,SAAS;AAClE,2BACE,oBAAC,YAAqB,OAAO,KAAK,IAAI,UAAU,KAAK,UAClD,eAAK,SADK,KAAK,EAElB;AAAA,kBAEJ,CAAC,GACH;AAAA;AAAA;AAAA,YACF;AAAA,aACF;AAAA,WACF;AAAA,QAEA,qBAAC,iBAAc,OAAM,gBACnB;AAAA,8BAAC,cAAW;AAAA,UACZ,qBAAC,YAAS;AAAA;AAAA,YACR;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,eAAY;AAAA,gBACZ,UAAU,CAAC,MAAM,KAAK,qBAAqB,EAAE,OAAO,KAAK;AAAA,gBACzD,OAAO,KAAK,MAAM,KAAK;AAAA,gBAEtB,iBAAO,QAAQ,kBAAkB,EAAE,IAAI,CAAC,CAAC,MAAM,IAAI,MAAM;AACxD,yBACE,oBAAC,YAAkB,OAAO,MACvB,kBADU,IAEb;AAAA,gBAEJ,CAAC;AAAA;AAAA,YACH;AAAA,aACF;AAAA,WACF;AAAA,QAEA,qBAAC,eAAY,MAAM,6CACjB;AAAA,8BAAC,iBAAc;AAAA,UACf,oBAAC,YAAU,YAAE,MAAM,GAAE;AAAA,WACvB;AAAA,SACF;AAAA,OACF,GACF;AAAA,EACF;AACF;AAEA,MAAM,aAAa,gBAAgB,EAAE,kBAAkB;AACvD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"7ffd82d4f3aa9239b1c505abaafac5bdb522b791"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Gi=function(){return l},l}Gi();const xue=(Gi().s[0]++,nue()),gb=(Gi().s[1]++,["chrome","firefox"].indexOf(xue.name)>-1);class fg extends Xn.Component{render(){return Gi().f[0]++,Gi().s[2]++,ue.jsx("span",{className:"maputnik-icon-text",children:this.props.children})}}class Mue extends Xn.Component{render(){return Gi().f[1]++,Gi().s[3]++,ue.jsx("a",{className:tm("maputnik-toolbar-link",this.props.className),href:this.props.href,rel:"noopener noreferrer",target:"_blank","data-wd-key":"toolbar:link",children:this.props.children})}}class sR extends Xn.Component{render(){return Gi().f[2]++,Gi().s[4]++,ue.jsx("div",{className:"maputnik-toolbar-select","data-wd-key":this.props.wdKey,children:this.props.children})}}class yb extends Xn.Component{render(){return Gi().f[3]++,Gi().s[5]++,ue.jsx("button",{className:"maputnik-toolbar-action","data-wd-key":this.props.wdKey,onClick:this.props.onClick,children:this.props.children})}}class wue extends Xn.Component{constructor(){super(...arguments);Kn(this,"state",(Gi().s[6]++,{isOpen:{settings:!1,sources:!1,open:!1,add:!1,export:!1}}));Kn(this,"onSkip",(Gi().s[9]++,t=>{if(Gi().f[6]++,Gi().s[10]++,t==="map")Gi().b[0][0]++,Gi().s[11]++,document.querySelector(".maplibregl-canvas").focus();else{Gi().b[0][1]++;const r=(Gi().s[12]++,document.querySelector("#skip-target-"+t));Gi().s[13]++,r.focus()}}))}handleSelection(t){Gi().f[4]++,Gi().s[7]++,this.props.onSetMapState(t)}handleLanguageChange(t){Gi().f[5]++,Gi().s[8]++,this.props.i18n.changeLanguage(t)}render(){Gi().f[7]++;const t=(Gi().s[14]++,this.props.t),r=(Gi().s[15]++,[{id:"map",group:"general",title:t("Map")},{id:"inspect",group:"general",title:t("Inspect"),disabled:this.props.renderer==="ol"},{id:"filter-deuteranopia",group:"color-accessibility",title:t("Deuteranopia filter"),disabled:!gb},{id:"filter-protanopia",group:"color-accessibility",title:t("Protanopia filter"),disabled:!gb},{id:"filter-tritanopia",group:"color-accessibility",title:t("Tritanopia filter"),disabled:!gb},{id:"filter-achromatopsia",group:"color-accessibility",title:t("Achromatopsia filter"),disabled:!gb}]),i=(Gi().s[16]++,r.find(s=>(Gi().f[8]++,Gi().s[17]++,s.id===this.props.mapState)));return Gi().s[18]++,ue.jsx("nav",{className:"maputnik-toolbar",children:ue.jsxs("div",{className:"maputnik-toolbar__inner",children:[ue.jsxs("div",{className:"maputnik-toolbar-logo-container",children:[ue.jsx("button",{"data-wd-key":"root:skip:layer-list",className:"maputnik-toolbar-skip",onClick:s=>(Gi().f[9]++,Gi().s[19]++,this.onSkip("layer-list")),children:t("Layers list")}),ue.jsx("button",{"data-wd-key":"root:skip:layer-editor",className:"maputnik-toolbar-skip",onClick:s=>(Gi().f[10]++,Gi().s[20]++,this.onSkip("layer-editor")),children:t("Layer editor")}),ue.jsx("button",{"data-wd-key":"root:skip:map-view",className:"maputnik-toolbar-skip",onClick:s=>(Gi().f[11]++,Gi().s[21]++,this.onSkip("map")),children:t("Map view")}),ue.jsxs("a",{className:"maputnik-toolbar-logo",target:"blank",rel:"noreferrer noopener",href:"https://github.com/maplibre/maputnik",children:[ue.jsx("img",{src:bue,alt:t("Maputnik on GitHub")}),ue.jsxs("h1",{children:[ue.jsx("span",{className:"maputnik-toolbar-name",children:oR.name}),ue.jsxs("span",{className:"maputnik-toolbar-version",children:["v",oR.version]})]})]})]}),ue.jsxs("div",{className:"maputnik-toolbar__actions",role:"navigation","aria-label":"Toolbar",children:[ue.jsxs(yb,{wdKey:"nav:open",onClick:this.props.onToggleModal.bind(this,"open"),children:[ue.jsx(UV,{}),ue.jsx(fg,{children:t("Open")})]}),ue.jsxs(yb,{wdKey:"nav:export",onClick:this.props.onToggleModal.bind(this,"export"),children:[ue.jsx(WE,{}),ue.jsx(fg,{children:t("Save")})]}),ue.jsxs(yb,{wdKey:"nav:sources",onClick:this.props.onToggleModal.bind(this,"sources"),children:[ue.jsx(qV,{}),ue.jsx(fg,{children:t("Data Sources")})]}),ue.jsxs(yb,{wdKey:"nav:settings",onClick:this.props.onToggleModal.bind(this,"settings"),children:[ue.jsx(zV,{}),ue.jsx(fg,{children:t("Style Settings")})]}),ue.jsxs(sR,{wdKey:"nav:inspect",children:[ue.jsx(KV,{}),ue.jsxs(fg,{children:[t("View"),ue.jsxs("select",{className:"maputnik-select","data-wd-key":"maputnik-select",onChange:s=>(Gi().f[12]++,Gi().s[22]++,this.handleSelection(s.target.value)),value:i==null?void 0:i.id,children:[r.filter(s=>(Gi().f[13]++,Gi().s[23]++,s.group==="general")).map(s=>(Gi().f[14]++,Gi().s[24]++,ue.jsx("option",{value:s.id,disabled:s.disabled,"data-wd-key":s.id,children:s.title},s.id))),ue.jsx("optgroup",{label:t("Color accessibility"),children:r.filter(s=>(Gi().f[15]++,Gi().s[25]++,s.group==="color-accessibility")).map(s=>(Gi().f[16]++,Gi().s[26]++,ue.jsx("option",{value:s.id,disabled:s.disabled,children:s.title},s.id)))})]})]})]}),ue.jsxs(sR,{wdKey:"nav:language",children:[ue.jsx(LV,{}),ue.jsxs(fg,{children:["Language",ue.jsx("select",{className:"maputnik-select","data-wd-key":"maputnik-lang-select",onChange:s=>(Gi().f[17]++,Gi().s[27]++,this.handleLanguageChange(s.target.value)),value:this.props.i18n.language,children:Object.entries(TD).map(([s,l])=>(Gi().f[18]++,Gi().s[28]++,ue.jsx("option",{value:s,children:l},s)))})]})]}),ue.jsxs(Mue,{href:"https://github.com/maplibre/maputnik/wiki",children:[ue.jsx(RV,{}),ue.jsx(fg,{children:t("Help")})]})]})]})})}}const Sue=(Gi().s[29]++,zs()(wue));function O2(){var n="/home/runner/work/maputnik/maputnik/src/components/ScrollContainer.tsx",e="d17a642b15310eb6111b086bd920c67ec86a8271",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ScrollContainer.tsx",statementMap:{0:{start:{line:5,column:4},end:{line:5,column:113}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:2},end:{line:4,column:3}},loc:{start:{line:4,column:11},end:{line:6,column:3}},line:4}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ScrollContainer.tsx"],names:[],mappings:"AAQW;AARX,OAAO,WAAW;AAMlB,qBAAqB,wBAAwB,MAAM,UAAgC;AAAA,EACjF,SAAS;AACP,WAAO,oBAAC,SAAI,WAAU,6BACnB,eAAK,MAAM,UACd;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d17a642b15310eb6111b086bd920c67ec86a8271"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return O2=function(){return l},l}O2();class Eue extends Xn.Component{render(){return O2().f[0]++,O2().s[0]++,ue.jsx("div",{className:"maputnik-scroll-container",children:this.props.children})}}function op(){var n="/home/runner/work/maputnik/maputnik/src/components/AppLayout.tsx",e="1ee946cae22aef585acbff88e7256312e8bd0812",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/AppLayout.tsx",statementMap:{0:{start:{line:7,column:29},end:{line:9,column:3}},1:{start:{line:11,column:4},end:{line:13,column:6}},2:{start:{line:16,column:4},end:{line:16,column:46}},3:{start:{line:17,column:4},end:{line:26,column:9}},4:{start:{line:29,column:18},end:{line:29,column:54}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:20},end:{line:14,column:3}},line:10},1:{name:"(anonymous_1)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:11},end:{line:27,column:3}},line:15}},branchMap:{0:{loc:{start:{line:24,column:6},end:{line:24,column:123}},type:"binary-expr",locations:[{start:{line:24,column:6},end:{line:24,column:23}},{start:{line:24,column:43},end:{line:24,column:123}}],line:24}},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0,1:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/AppLayout.tsx"],names:[],mappings:"AA8BM,SACE,KADF;AA9BN,OAAO,WAAW;AAClB,OAAO,eAAe;AACtB,OAAO,qBAAqB;AAC5B,SAA0B,uBAAuB;AAWjD,MAAM,0BAA0B,MAAM,UAAkC;AAAA,EACtE,OAAO,oBAAoB;AAAA,IACzB,eAAe,UAAU;AAAA,EAC3B;AAAA,EAEA,kBAAkB;AAChB,WAAO;AAAA,MACL,eAAe,EAAE,MAAM,GAAG;AAAA,IAC5B;AAAA,EACF;AAAA,EAEA,SAAS;AACP,aAAS,KAAK,MAAM,KAAK,MAAM,KAAK,IAAI;AAExC,WAAO,qBAAC,SAAI,WAAU,mBACnB;AAAA,WAAK,MAAM;AAAA,MACZ,qBAAC,SAAI,WAAU,wBACb;AAAA,4BAAC,SAAI,WAAU,wBACZ,eAAK,MAAM,WACd;AAAA,QACA,oBAAC,SAAI,WAAU,0BACb,8BAAC,mBACE,eAAK,MAAM,aACd,GACF;AAAA,QACC,KAAK,MAAM;AAAA,SACd;AAAA,MACC,KAAK,MAAM,UAAU,oBAAC,SAAI,WAAU,0BAClC,eAAK,MAAM,QACd;AAAA,MAEC,KAAK,MAAM;AAAA,OACd;AAAA,EACF;AACF;AAEA,MAAM,YAAY,gBAAgB,EAAE,iBAAiB;AACrD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"1ee946cae22aef585acbff88e7256312e8bd0812"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return op=function(){return l},l}op();class Pj extends Xn.Component{getChildContext(){return op().f[0]++,op().s[1]++,{reactIconBase:{size:14}}}render(){return op().f[1]++,op().s[2]++,document.body.dir=this.props.i18n.dir(),op().s[3]++,ue.jsxs("div",{className:"maputnik-layout",children:[this.props.toolbar,ue.jsxs("div",{className:"maputnik-layout-main",children:[ue.jsx("div",{className:"maputnik-layout-list",children:this.props.layerList}),ue.jsx("div",{className:"maputnik-layout-drawer",children:ue.jsx(Eue,{children:this.props.layerEditor})}),this.props.map]}),(op().b[0][0]++,this.props.bottom&&(op().b[0][1]++,ue.jsx("div",{className:"maputnik-layout-bottom",children:this.props.bottom}))),this.props.modals]})}}Kn(Pj,"childContextTypes",(op().s[0]++,{reactIconBase:yi.object}));const Bue=(op().s[4]++,zs()(Pj));function dl(){var n="/home/runner/work/maputnik/maputnik/src/components/AppMessagePanel.tsx",e="79207020c1a6a62db4f3db3338a49c0819045455",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/AppMessagePanel.tsx",statementMap:{0:{start:{line:6,column:24},end:{line:9,column:3}},1:{start:{line:11,column:38},end:{line:11,column:48}},2:{start:{line:12,column:19},end:{line:40,column:6}},3:{start:{line:14,column:6},end:{line:38,column:7}},4:{start:{line:15,column:27},end:{line:15,column:32}},5:{start:{line:16,column:24},end:{line:16,column:73}},6:{start:{line:17,column:8},end:{line:35,column:13}},7:{start:{line:30,column:31},end:{line:30,column:74}},8:{start:{line:37,column:8},end:{line:37,column:32}},9:{start:{line:39,column:6},end:{line:39,column:120}},10:{start:{line:41,column:18},end:{line:43,column:6}},11:{start:{line:42,column:6},end:{line:42,column:68}},12:{start:{line:44,column:4},end:{line:47,column:9}},13:{start:{line:50,column:24},end:{line:50,column:66}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:19},end:{line:7,column:20}},loc:{start:{line:7,column:25},end:{line:8,column:5}},line:7},1:{name:"(anonymous_1)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:48,column:3}},line:10},2:{name:"(anonymous_2)",decl:{start:{line:12,column:42},end:{line:12,column:43}},loc:{start:{line:12,column:58},end:{line:40,column:5}},line:12},3:{name:"(anonymous_3)",decl:{start:{line:30,column:25},end:{line:30,column:26}},loc:{start:{line:30,column:31},end:{line:30,column:74}},line:30},4:{name:"(anonymous_4)",decl:{start:{line:41,column:40},end:{line:41,column:41}},loc:{start:{line:41,column:50},end:{line:43,column:5}},line:41}},branchMap:{0:{loc:{start:{line:14,column:6},end:{line:38,column:7}},type:"if",locations:[{start:{line:14,column:6},end:{line:38,column:7}},{start:{line:36,column:13},end:{line:38,column:7}}],line:14},1:{loc:{start:{line:14,column:10},end:{line:14,column:55}},type:"binary-expr",locations:[{start:{line:14,column:10},end:{line:14,column:22}},{start:{line:14,column:26},end:{line:14,column:55}}],line:14},2:{loc:{start:{line:24,column:10},end:{line:34,column:14}},type:"binary-expr",locations:[{start:{line:24,column:10},end:{line:24,column:50}},{start:{line:24,column:70},end:{line:34,column:14}}],line:24}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/AppMessagePanel.tsx"],names:[],mappings:"AA4BY,SAIE,UAHM,KADR;AA5BZ,OAAO,WAAW;AAClB,SAAQ,qBAAoB;AAE5B,SAAS,OAAwB,uBAAuB;AAWxD,MAAM,gCAAgC,MAAM,UAAwC;AAAA,EAClF,OAAO,eAAe;AAAA,IACpB,eAAe,MAAM;AAAA,IAAC;AAAA,EACxB;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,GAAG,mBAAkB,IAAI,KAAK;AACrC,UAAM,SAAS,KAAK,MAAM,QAAQ,IAAI,CAAC,OAAY,QAAQ;AACzD,UAAI;AACJ,UAAI,MAAM,UAAU,MAAM,OAAO,SAAS,SAAS;AACjD,cAAM,EAAC,OAAM,IAAI;AACjB,cAAM,UAAU,KAAK,MAAM,UAAU,OAAO,OAAO,KAAK,KAAK,EAAE;AAC/D,kBACE,iCACE;AAAA,+BAAC,SAAM,GAAM;AAAA;AAAA,YACL,oBAAC,UAAM,wBAAc,OAAO,GAAE;AAAA,YAAO;AAAA,YAAG,OAAO,KAAK;AAAA,aAC5D;AAAA,UACC,uBAAuB,OAAO,KAAK,SAClC,iCAAE;AAAA;AAAA,YAEA;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,SAAS,MAAM,KAAK,MAAM,cAAe,OAAO,KAAK,KAAK;AAAA,gBAEzD,YAAE,iBAAiB;AAAA;AAAA,YACtB;AAAA,aACF;AAAA,WAEJ;AAAA,MAEJ,OACK;AACH,kBAAU,MAAM;AAAA,MAClB;AACA,aAAO,oBAAC,OAAqB,WAAU,gCACpC,qBADY,WAAS,GAExB;AAAA,IACF,CAAC;AAED,UAAM,QAAQ,KAAK,MAAM,OAAO,IAAI,CAAC,GAAG,MAAM;AAC5C,aAAO,oBAAC,OAAmB,eAAZ,UAAQ,CAAM;AAAA,IAC/B,CAAC;AAED,WAAO,qBAAC,SAAI,WAAU,0BACnB;AAAA;AAAA,MACA;AAAA,OACH;AAAA,EACF;AACF;AAEA,MAAM,kBAAkB,gBAAgB,EAAE,uBAAuB;AACjE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"79207020c1a6a62db4f3db3338a49c0819045455"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return dl=function(){return l},l}dl();class Kj extends Xn.Component{render(){var s,l;dl().f[1]++;const{t:e,selectedLayerIndex:t}=(dl().s[1]++,this.props),r=(dl().s[2]++,(s=this.props.errors)==null?void 0:s.map((o,f)=>{var x;dl().f[2]++;let y;if(dl().s[3]++,dl().b[1][0]++,o.parsed&&(dl().b[1][1]++,o.parsed.type==="layer")){dl().b[0][0]++;const{parsed:B}=(dl().s[4]++,o),O=(dl().s[5]++,(x=this.props.mapStyle)==null?void 0:x.layers[B.data.index].id);dl().s[6]++,y=ue.jsxs(ue.Fragment,{children:[ue.jsxs(R0,{t:e,children:["Layer ",ue.jsx("span",{children:kj(O)}),": ",B.data.message]}),(dl().b[2][0]++,t!==B.data.index&&(dl().b[2][1]++,ue.jsxs(ue.Fragment,{children:["",ue.jsx("button",{className:"maputnik-message-panel__switch-button",onClick:()=>(dl().f[3]++,dl().s[7]++,this.props.onLayerSelect(B.data.index)),children:e("switch to layer")})]})))]})}else dl().b[0][1]++,dl().s[8]++,y=o.message;return dl().s[9]++,ue.jsx("p",{className:"maputnik-message-panel-error",children:y},"error-"+f)})),i=(dl().s[10]++,(l=this.props.infos)==null?void 0:l.map((o,f)=>(dl().f[4]++,dl().s[11]++,ue.jsx("p",{children:o},"info-"+f))));return dl().s[12]++,ue.jsxs("div",{className:"maputnik-message-panel",children:[r,i]})}}Kn(Kj,"defaultProps",(dl().s[0]++,{onLayerSelect:()=>{dl().f[0]++}}));const Oue=(dl().s[13]++,zs()(Kj));function I2(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldArray.tsx",e="a416dfabb7eaa48bd0505cf98cb9c66326bca3ec",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldArray.tsx",statementMap:{0:{start:{line:7,column:4},end:{line:7,column:165}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:8,column:3}},line:6}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldArray.tsx"],names:[],mappings:"AAcM;AAdN,OAAO,WAAW;AAClB,OAAO,gBAAwD;AAC/D,OAAO,cAAc;AASrB,qBAAqB,mBAAmB,MAAM,UAA2B;AAAA,EACvE,SAAS;AACP,WAAO,oBAAC,YAAS,OAAO,KAAK,MAAM,OAAO,WAAW,KAAK,MAAM,WAC9D,8BAAC,cAAY,GAAG,KAAK,OAAO,GAC9B;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a416dfabb7eaa48bd0505cf98cb9c66326bca3ec"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return I2=function(){return l},l}I2();class k2 extends Xn.Component{render(){return I2().f[0]++,I2().s[0]++,ue.jsx(EC,{label:this.props.label,fieldSpec:this.props.fieldSpec,children:ue.jsx(_j,{...this.props})})}}function T2(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldNumber.tsx",e="4931f85d3ebf1a60a85ac9883e78e028b7a388d8",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldNumber.tsx",statementMap:{0:{start:{line:7,column:4},end:{line:7,column:163}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:8,column:3}},line:6}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldNumber.tsx"],names:[],mappings:"AAgBM;AAhBN,OAAO,WAAW;AAClB,OAAO,iBAAqC;AAC5C,OAAO,WAAW;AAWlB,qBAAqB,oBAAoB,MAAM,UAA4B;AAAA,EACzE,SAAS;AACP,WAAO,oBAAC,SAAM,OAAO,KAAK,MAAM,OAAO,WAAW,KAAK,MAAM,WAC3D,8BAAC,eAAa,GAAG,KAAK,OAAO,GAC/B;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"4931f85d3ebf1a60a85ac9883e78e028b7a388d8"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return T2=function(){return l},l}T2();class ap extends Xn.Component{render(){return T2().f[0]++,T2().s[0]++,ue.jsx(la,{label:this.props.label,fieldSpec:this.props.fieldSpec,children:ue.jsx(rm,{...this.props})})}}function P2(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldString.tsx",e="37d7b9547efb8875177dbe7a186e7965cd9eb1c0",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldString.tsx",statementMap:{0:{start:{line:7,column:4},end:{line:7,column:163}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:8,column:3}},line:6}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldString.tsx"],names:[],mappings:"AAeM;AAfN,OAAO,WAAW;AAClB,OAAO,WAAW;AAClB,OAAO,iBAAqC;AAU5C,qBAAqB,oBAAoB,MAAM,UAA4B;AAAA,EACzE,SAAS;AACP,WAAO,oBAAC,SAAM,OAAO,KAAK,MAAM,OAAO,WAAW,KAAK,MAAM,WAC3D,8BAAC,eAAa,GAAG,KAAK,OAAO,GAC/B;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"37d7b9547efb8875177dbe7a186e7965cd9eb1c0"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return P2=function(){return l},l}P2();class Np extends Xn.Component{render(){return P2().f[0]++,P2().s[0]++,ue.jsx(la,{label:this.props.label,fieldSpec:this.props.fieldSpec,children:ue.jsx(Rf,{...this.props})})}}function K2(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldUrl.tsx",e="a176a83ddcea7ca7f45b0bf957355a9e0c40a3af",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldUrl.tsx",statementMap:{0:{start:{line:7,column:4},end:{line:7,column:160}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:8,column:3}},line:6}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldUrl.tsx"],names:[],mappings:"AAiBQ;AAjBR,OAAO,WAAW;AAClB,OAAO,cAAgD;AACvD,OAAO,WAAW;AAWlB,qBAAqB,iBAAiB,MAAM,UAAyB;AAAA,EACnE,SAAU;AACR,WACE,oBAAC,SAAM,OAAO,KAAK,MAAM,OAAO,WAAW,KAAK,MAAM,WACpD,8BAAC,YAAU,GAAG,KAAK,OAAO,GAC5B;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a176a83ddcea7ca7f45b0bf957355a9e0c40a3af"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return K2=function(){return l},l}K2();class Ky extends Xn.Component{render(){return K2().f[0]++,K2().s[0]++,ue.jsx(la,{label:this.props.label,fieldSpec:this.props.fieldSpec,children:ue.jsx(GO,{...this.props})})}}function R2(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldSelect.tsx",e="ed4136288b91381a6bd6755cdb2ea1dcf45e2f6b",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldSelect.tsx",statementMap:{0:{start:{line:7,column:4},end:{line:7,column:163}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:8,column:3}},line:6}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldSelect.tsx"],names:[],mappings:"AAgBM;AAhBN,OAAO,WAAW;AAClB,OAAO,WAAW;AAClB,OAAO,iBAAqC;AAW5C,qBAAqB,oBAAoB,MAAM,UAA4B;AAAA,EACzE,SAAS;AACP,WAAO,oBAAC,SAAM,OAAO,KAAK,MAAM,OAAO,WAAW,KAAK,MAAM,WAC3D,8BAAC,eAAa,GAAG,KAAK,OAAM,GAC9B;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ed4136288b91381a6bd6755cdb2ea1dcf45e2f6b"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return R2=function(){return l},l}R2();class Jx extends Xn.Component{render(){return R2().f[0]++,R2().s[0]++,ue.jsx(la,{label:this.props.label,fieldSpec:this.props.fieldSpec,children:ue.jsx(Hg,{...this.props})})}}function D2(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldEnum.tsx",e="5745e67ee75c0f352c022256ef8bf31e8fa7367f",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldEnum.tsx",statementMap:{0:{start:{line:7,column:4},end:{line:7,column:164}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:8,column:3}},line:6}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldEnum.tsx"],names:[],mappings:"AAgBM;AAhBN,OAAO,WAAW;AAClB,OAAO,eAAiC;AACxC,OAAO,cAAc;AAWrB,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,SAAS;AACP,WAAO,oBAAC,YAAS,OAAO,KAAK,MAAM,OAAO,WAAW,KAAK,MAAM,WAC9D,8BAAC,aAAW,GAAG,KAAK,OAAO,GAC7B;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"5745e67ee75c0f352c022256ef8bf31e8fa7367f"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return D2=function(){return l},l}D2();class Iue extends Xn.Component{render(){return D2().f[0]++,D2().s[0]++,ue.jsx(EC,{label:this.props.label,fieldSpec:this.props.fieldSpec,children:ue.jsx(WO,{...this.props})})}}function F2(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldColor.tsx",e="4d9e98bd5e7819496a7ef6b66981b81e318fe1bf",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldColor.tsx",statementMap:{0:{start:{line:7,column:4},end:{line:7,column:162}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:8,column:3}},line:6}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldColor.tsx"],names:[],mappings:"AAgBM;AAhBN,OAAO,WAAW;AAClB,OAAO,WAAW;AAClB,OAAO,gBAAmC;AAW1C,qBAAqB,mBAAmB,MAAM,UAA2B;AAAA,EACvE,SAAS;AACP,WAAO,oBAAC,SAAM,OAAO,KAAK,MAAM,OAAO,WAAW,KAAK,MAAM,WAC3D,8BAAC,cAAY,GAAG,KAAK,OAAO,GAC9B;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"4d9e98bd5e7819496a7ef6b66981b81e318fe1bf"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return F2=function(){return l},l}F2();class kue extends Xn.Component{render(){return F2().f[0]++,F2().s[0]++,ue.jsx(la,{label:this.props.label,fieldSpec:this.props.fieldSpec,children:ue.jsx(Cj,{...this.props})})}}function BC(){var n="/home/runner/work/maputnik/maputnik/src/libs/field-spec-additional.ts",e="3f2b222219042b3cb4a75b927d846ca17e6201aa",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/field-spec-additional.ts",statementMap:{0:{start:{line:1,column:13},end:{line:26,column:2}},1:{start:{line:1,column:21},end:{line:26,column:1}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:1,column:13},end:{line:1,column:14}},loc:{start:{line:1,column:21},end:{line:26,column:1}},line:1}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/field-spec-additional.ts"],names:[],mappings:"AAEA,MAAM,OAAO,CAAC,OAAkB;AAAA,EAC9B,UAAU;AAAA,IACR,uBAAuB;AAAA,MACrB,OAAO,EAAE,uBAAuB;AAAA,MAChC,KAAK,EAAE,yCAAyC;AAAA,MAChD,QAAQ;AAAA,MACR,gBAAgB,EAAE,YAAY;AAAA,IAChC;AAAA,IACA,4BAA4B;AAAA,MAC1B,OAAO,EAAE,4BAA4B;AAAA,MACrC,KAAK,EAAE,iDAAiD;AAAA,MACxD,QAAQ;AAAA,MACR,gBAAgB,EAAE,YAAY;AAAA,IAChC;AAAA,IACA,qBAAqB;AAAA,MACnB,OAAO,EAAE,qBAAqB;AAAA,MAC9B,KAAK,EAAE,0BAA0B;AAAA,MACjC,QAAQ;AAAA,MACR,gBAAgB,EAAE,YAAY;AAAA,IAChC;AAAA,IACA,gBAAgB;AAAA,MACd,OAAO,EAAE,gBAAgB;AAAA,MACzB,KAAK,EAAE,sDAAsD;AAAA,IAC/D;AAAA,EACF;AACF;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"3f2b222219042b3cb4a75b927d846ca17e6201aa"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return BC=function(){return l},l}BC();BC().s[0]++;const Rj=n=>(BC().f[0]++,BC().s[1]++,{maputnik:{maptiler_access_token:{label:n("MapTiler Access Token"),doc:n("Public access token for MapTiler Cloud."),docUrl:"https://docs.maptiler.com/cloud/api/authentication-key/",docUrlLinkText:n("Learn More")},thunderforest_access_token:{label:n("Thunderforest Access Token"),doc:n("Public access token for Thunderforest services."),docUrl:"https://www.thunderforest.com/docs/apikeys/",docUrlLinkText:n("Learn More")},stadia_access_token:{label:n("Stadia Maps API Key"),doc:n("API key for Stadia Maps."),docUrl:"https://docs.stadiamaps.com/authentication/",docUrlLinkText:n("Learn More")},style_renderer:{label:n("Style Renderer"),doc:n("Choose the default Maputnik renderer for this style.")}}});function Ui(){var n="/home/runner/work/maputnik/maputnik/src/components/ModalSettings.tsx",e="2bfcb2bc337b915a29f70f26bbf03f5047260e49",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ModalSettings.tsx",statementMap:{0:{start:{line:16,column:23},end:{line:18,column:5}},1:{start:{line:19,column:4},end:{line:23,column:5}},2:{start:{line:20,column:6},end:{line:20,column:34}},3:{start:{line:22,column:6},end:{line:22,column:35}},4:{start:{line:24,column:4},end:{line:27,column:7}},5:{start:{line:30,column:18},end:{line:32,column:5}},6:{start:{line:33,column:4},end:{line:37,column:5}},7:{start:{line:34,column:6},end:{line:34,column:29}},8:{start:{line:36,column:6},end:{line:36,column:30}},9:{start:{line:38,column:4},end:{line:41,column:7}},10:{start:{line:44,column:20},end:{line:46,column:5}},11:{start:{line:47,column:4},end:{line:51,column:5}},12:{start:{line:48,column:6},end:{line:48,column:31}},13:{start:{line:50,column:6},end:{line:50,column:32}},14:{start:{line:52,column:4},end:{line:55,column:7}},15:{start:{line:58,column:25},end:{line:60,column:5}},16:{start:{line:61,column:4},end:{line:65,column:5}},17:{start:{line:62,column:6},end:{line:62,column:36}},18:{start:{line:64,column:6},end:{line:64,column:37}},19:{start:{line:66,column:4},end:{line:66,column:44}},20:{start:{line:69,column:21},end:{line:69,column:55}},21:{start:{line:70,column:54},end:{line:70,column:64}},22:{start:{line:71,column:16},end:{line:71,column:38}},23:{start:{line:72,column:18},end:{line:72,column:49}},24:{start:{line:73,column:23},end:{line:73,column:59}},25:{start:{line:74,column:20},end:{line:74,column:53}},26:{start:{line:75,column:4},end:{line:295,column:6}},27:{start:{line:298,column:22},end:{line:298,column:62}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:44},end:{line:28,column:3}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:29,column:2},end:{line:29,column:3}},loc:{start:{line:29,column:39},end:{line:42,column:3}},line:29},2:{name:"(anonymous_2)",decl:{start:{line:43,column:2},end:{line:43,column:3}},loc:{start:{line:43,column:41},end:{line:56,column:3}},line:43},3:{name:"(anonymous_3)",decl:{start:{line:57,column:2},end:{line:57,column:3}},loc:{start:{line:57,column:39},end:{line:67,column:3}},line:57},4:{name:"(anonymous_4)",decl:{start:{line:68,column:2},end:{line:68,column:3}},loc:{start:{line:68,column:11},end:{line:296,column:3}},line:68}},branchMap:{0:{loc:{start:{line:19,column:4},end:{line:23,column:5}},type:"if",locations:[{start:{line:19,column:4},end:{line:23,column:5}},{start:{line:21,column:11},end:{line:23,column:5}}],line:19},1:{loc:{start:{line:33,column:4},end:{line:37,column:5}},type:"if",locations:[{start:{line:33,column:4},end:{line:37,column:5}},{start:{line:35,column:11},end:{line:37,column:5}}],line:33},2:{loc:{start:{line:47,column:4},end:{line:51,column:5}},type:"if",locations:[{start:{line:47,column:4},end:{line:51,column:5}},{start:{line:49,column:11},end:{line:51,column:5}}],line:47},3:{loc:{start:{line:61,column:4},end:{line:65,column:5}},type:"if",locations:[{start:{line:61,column:4},end:{line:65,column:5}},{start:{line:63,column:11},end:{line:65,column:5}}],line:61},4:{loc:{start:{line:69,column:21},end:{line:69,column:55}},type:"binary-expr",locations:[{start:{line:69,column:21},end:{line:69,column:49}},{start:{line:69,column:53},end:{line:69,column:55}}],line:69},5:{loc:{start:{line:72,column:18},end:{line:72,column:49}},type:"binary-expr",locations:[{start:{line:72,column:18},end:{line:72,column:43}},{start:{line:72,column:47},end:{line:72,column:49}}],line:72},6:{loc:{start:{line:73,column:23},end:{line:73,column:59}},type:"binary-expr",locations:[{start:{line:73,column:23},end:{line:73,column:53}},{start:{line:73,column:57},end:{line:73,column:59}}],line:73},7:{loc:{start:{line:74,column:20},end:{line:74,column:53}},type:"binary-expr",locations:[{start:{line:74,column:20},end:{line:74,column:47}},{start:{line:74,column:51},end:{line:74,column:53}}],line:74},8:{loc:{start:{line:160,column:21},end:{line:160,column:42}},type:"binary-expr",locations:[{start:{line:160,column:21},end:{line:160,column:36}},{start:{line:160,column:40},end:{line:160,column:42}}],line:160},9:{loc:{start:{line:289,column:21},end:{line:289,column:62}},type:"binary-expr",locations:[{start:{line:289,column:21},end:{line:289,column:50}},{start:{line:289,column:54},end:{line:289,column:62}}],line:289}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ModalSettings.tsx"],names:[],mappings:"AA+GM,SACE,KADF;AA/GN,OAAO,WAAW;AAClB,OAAO,YAAY;AAEnB,SAA0B,uBAAuB;AAEjD,OAAO,gBAAgB;AACvB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,cAAc;AACrB,OAAO,iBAAiB;AACxB,OAAO,eAAe;AACtB,OAAO,gBAAgB;AACvB,OAAO,WAAW;AAClB,OAAO,yBAAyB;AAUhC,MAAM,8BAA8B,MAAM,UAAsC;AAAA,EAC9E,yBAAyB,UAAyC,OAA2B;AAC3F,UAAM,aAAa;AAAA,MACjB,GAAG,KAAK,MAAM,SAAS;AAAA,IACzB;AAEA,QAAI,UAAU,QAAW;AACvB,aAAO,WAAW,QAAQ;AAAA,IAC5B,OACK;AACH,iBAAW,QAAQ,IAAI;AAAA,IACzB;AAEA,SAAK,MAAM,eAAe;AAAA,MACxB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,oBAAoB,UAAoC,OAAY;AAClE,UAAM,QAAQ;AAAA,MACZ,GAAG,KAAK,MAAM,SAAS;AAAA,IACzB;AAEA,QAAI,UAAU,QAAW;AACvB,aAAO,MAAM,QAAQ;AAAA,IACvB,OACK;AAEH,YAAM,QAAQ,IAAI;AAAA,IACpB;AAEA,SAAK,MAAM,eAAe;AAAA,MACxB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,sBAAsB,UAAsC,OAAY;AACtE,UAAM,UAAU;AAAA,MACd,GAAG,KAAK,MAAM,SAAS;AAAA,IACzB;AAEA,QAAI,UAAU,QAAW;AACvB,aAAO,QAAQ,QAAQ;AAAA,IACzB,OACK;AAEH,cAAQ,QAAQ,IAAI;AAAA,IACtB;AAEA,SAAK,MAAM,eAAe;AAAA,MACxB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,oBAAoB,UAA8C,OAAY;AAC5E,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,IAChB;AAEA,QAAI,UAAU,QAAW;AAEvB,aAAO,aAAa,QAAQ;AAAA,IAC9B,OACK;AAEH,mBAAa,QAAQ,IAAI;AAAA,IAC3B;AACA,SAAK,MAAM,eAAe,YAAY;AAAA,EACxC;AAAA,EAEA,SAAS;AACP,UAAM,WAAW,KAAK,MAAM,SAAS,YAAY,CAAC;AAClD,UAAM,EAAC,GAAG,0BAA0B,SAAQ,IAAI,KAAK;AACrD,UAAM,MAAM,oBAAoB,CAAC;AAEjC,UAAM,QAAQ,KAAK,MAAM,SAAS,SAAS,CAAC;AAC5C,UAAM,aAAa,KAAK,MAAM,SAAS,cAAc,CAAC;AACtD,UAAM,UAAU,KAAK,MAAM,SAAS,WAAW,CAAC;AAEhD,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,gBAAgB;AAAA,QAEzB,+BAAC,SAAI,WAAU,kBACb;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,MAAM;AAAA,cACf,WAAW,OAAO,MAAM;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,KAAK,MAAM,SAAS;AAAA,cAC3B,UAAU,KAAK,oBAAoB,KAAK,MAAM,MAAM;AAAA;AAAA,UACtD;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,OAAO;AAAA,cAChB,WAAW,EAAC,KAAK,EAAE,6DAA6D,EAAC;AAAA,cACjF,eAAY;AAAA,cACZ,OAAQ,KAAK,MAAM,SAAiB;AAAA,cACpC,UAAU,KAAK,oBAAoB,KAAK,MAAM,OAAO;AAAA;AAAA,UACvD;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,EAAE,YAAY;AAAA,cACrB,eAAY;AAAA,cACZ,OAAO,KAAK,MAAM,SAAS;AAAA,cAC3B,UAAU,KAAK,oBAAoB,KAAK,MAAM,QAAQ;AAAA;AAAA,UACxD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,YAAY;AAAA,cACrB,WAAW,OAAO,MAAM;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,KAAK,MAAM,SAAS;AAAA,cAC3B,UAAU,KAAK,oBAAoB,KAAK,MAAM,QAAQ;AAAA;AAAA,UACxD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,IAAI,SAAS,sBAAsB;AAAA,cAC1C,WAAW,IAAI,SAAS;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,SAAS,oCAAoC;AAAA,cACpD,UAAU,yBAAyB,KAAK,MAAM,oCAAoC;AAAA;AAAA,UACpF;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,IAAI,SAAS,2BAA2B;AAAA,cAC/C,WAAW,IAAI,SAAS;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,SAAS,qCAAqC;AAAA,cACrD,UAAU,yBAAyB,KAAK,MAAM,qCAAqC;AAAA;AAAA,UACrF;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,IAAI,SAAS,oBAAoB;AAAA,cACxC,WAAW,IAAI,SAAS;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,SAAS,8BAA8B;AAAA,cAC9C,UAAU,yBAAyB,KAAK,MAAM,8BAA8B;AAAA;AAAA,UAC9E;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,QAAQ;AAAA,cACjB,WAAW,OAAO,MAAM;AAAA,cACxB,QAAQ;AAAA,cACR,MAAK;AAAA,cACL,OAAO,SAAS,UAAU,CAAC;AAAA,cAC3B,SAAS,CAAC,GAAG,CAAC;AAAA,cACd,UAAU,KAAK,oBAAoB,KAAK,MAAM,QAAQ;AAAA;AAAA,UACxD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,MAAM;AAAA,cACf,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,SAAS;AAAA,cAChB,SAAS;AAAA,cACT,UAAU,KAAK,oBAAoB,KAAK,MAAM,MAAM;AAAA;AAAA,UACtD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,SAAS;AAAA,cAClB,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,SAAS;AAAA,cAChB,SAAS,OAAO,MAAM,QAAQ;AAAA,cAC9B,UAAU,KAAK,oBAAoB,KAAK,MAAM,SAAS;AAAA;AAAA,UACzD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,OAAO;AAAA,cAChB,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,SAAS;AAAA,cAChB,SAAS,OAAO,MAAM,MAAM;AAAA,cAC5B,UAAU,KAAK,oBAAoB,KAAK,MAAM,OAAO;AAAA;AAAA,UACvD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,cAAc;AAAA,cACvB,WAAW,OAAO,MAAM;AAAA,cACxB,MAAK;AAAA,cACL,OAAO,MAAM;AAAA,cACb,SAAS,OAAO,KAAK,OAAO,MAAM,OAAO,MAAM;AAAA,cAC/C,SAAS,OAAO,MAAM,OAAO;AAAA,cAC7B,UAAU,KAAK,oBAAoB,KAAK,MAAM,QAAQ;AAAA;AAAA,UACxD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,aAAa;AAAA,cACtB,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,MAAM;AAAA,cACb,SAAS,OAAO,MAAM,MAAM;AAAA,cAC5B,UAAU,KAAK,oBAAoB,KAAK,MAAM,OAAO;AAAA;AAAA,UACvD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,iBAAiB;AAAA,cAC1B,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,MAAM;AAAA,cACb,SAAS,OAAO,MAAM,UAAU;AAAA,cAChC,UAAU,KAAK,oBAAoB,KAAK,MAAM,WAAW;AAAA;AAAA,UAC3D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,gBAAgB;AAAA,cACzB,WAAW,OAAO,MAAM;AAAA,cACxB,MAAK;AAAA,cACL,QAAQ,OAAO,MAAM,SAAS;AAAA,cAC9B,OAAO,MAAM;AAAA,cACb,SAAS,OAAO,MAAM,SAAS;AAAA,cAC/B,UAAU,KAAK,oBAAoB,KAAK,MAAM,UAAU;AAAA;AAAA,UAC1D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,gBAAgB;AAAA,cACzB,WAAW,OAAO,QAAQ;AAAA,cAC1B,eAAY;AAAA,cACZ,OAAO,QAAQ;AAAA,cACf,UAAU,KAAK,sBAAsB,KAAK,MAAM,QAAQ;AAAA;AAAA,UAC1D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,sBAAsB;AAAA,cAC/B,WAAW,OAAO,QAAQ;AAAA,cAC1B,OAAO,QAAQ;AAAA,cACf,SAAS,OAAO,QAAQ,aAAa;AAAA,cACrC,UAAU,KAAK,sBAAsB,KAAK,MAAM,cAAc;AAAA;AAAA,UAChE;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,kBAAkB;AAAA,cAC3B,WAAW,OAAO,WAAW;AAAA,cAC7B,OAAO,WAAW;AAAA,cAClB,SAAS,OAAO,WAAW,MAAM;AAAA,cACjC,UAAU,KAAK,yBAAyB,KAAK,MAAM,OAAO;AAAA;AAAA,UAC5D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,qBAAqB;AAAA,cAC9B,WAAW,OAAO,WAAW;AAAA,cAC7B,OAAO,WAAW;AAAA,cAClB,SAAS,OAAO,WAAW,SAAS;AAAA,cACpC,UAAU,KAAK,yBAAyB,KAAK,MAAM,UAAU;AAAA;AAAA,UAC/D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,IAAI,SAAS,eAAe;AAAA,cACnC,WAAW,IAAI,SAAS;AAAA,cACxB,eAAY;AAAA,cACZ,SAAS;AAAA,gBACP,CAAC,UAAU,eAAe;AAAA,gBAC1B,CAAC,MAAM,EAAE,4BAA4B,CAAC;AAAA,cACxC;AAAA,cACA,OAAO,SAAS,mBAAmB,KAAK;AAAA,cACxC,UAAU,yBAAyB,KAAK,MAAM,mBAAmB;AAAA;AAAA,UACnE;AAAA,WACF;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,gBAAgB,gBAAgB,EAAE,qBAAqB;AAC7D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2bfcb2bc337b915a29f70f26bbf03f5047260e49"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Ui=function(){return l},l}Ui();class Tue extends Xn.Component{changeTransitionProperty(e,t){Ui().f[0]++;const r=(Ui().s[0]++,{...this.props.mapStyle.transition});Ui().s[1]++,t===void 0?(Ui().b[0][0]++,Ui().s[2]++,delete r[e]):(Ui().b[0][1]++,Ui().s[3]++,r[e]=t),Ui().s[4]++,this.props.onStyleChanged({...this.props.mapStyle,transition:r})}changeLightProperty(e,t){Ui().f[1]++;const r=(Ui().s[5]++,{...this.props.mapStyle.light});Ui().s[6]++,t===void 0?(Ui().b[1][0]++,Ui().s[7]++,delete r[e]):(Ui().b[1][1]++,Ui().s[8]++,r[e]=t),Ui().s[9]++,this.props.onStyleChanged({...this.props.mapStyle,light:r})}changeTerrainProperty(e,t){Ui().f[2]++;const r=(Ui().s[10]++,{...this.props.mapStyle.terrain});Ui().s[11]++,t===void 0?(Ui().b[2][0]++,Ui().s[12]++,delete r[e]):(Ui().b[2][1]++,Ui().s[13]++,r[e]=t),Ui().s[14]++,this.props.onStyleChanged({...this.props.mapStyle,terrain:r})}changeStyleProperty(e,t){Ui().f[3]++;const r=(Ui().s[15]++,{...this.props.mapStyle});Ui().s[16]++,t===void 0?(Ui().b[3][0]++,Ui().s[17]++,delete r[e]):(Ui().b[3][1]++,Ui().s[18]++,r[e]=t),Ui().s[19]++,this.props.onStyleChanged(r)}render(){Ui().f[4]++;const e=(Ui().s[20]++,Ui().b[4][0]++,this.props.mapStyle.metadata||(Ui().b[4][1]++,{})),{t,onChangeMetadataProperty:r,mapStyle:i}=(Ui().s[21]++,this.props),s=(Ui().s[22]++,Rj(t)),l=(Ui().s[23]++,Ui().b[5][0]++,this.props.mapStyle.light||(Ui().b[5][1]++,{})),o=(Ui().s[24]++,Ui().b[6][0]++,this.props.mapStyle.transition||(Ui().b[6][1]++,{})),f=(Ui().s[25]++,Ui().b[7][0]++,this.props.mapStyle.terrain||(Ui().b[7][1]++,{}));return Ui().s[26]++,ue.jsx(Y0,{"data-wd-key":"modal:settings",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:t("Style Settings"),children:ue.jsxs("div",{className:"modal:settings",children:[ue.jsx(Np,{label:t("Name"),fieldSpec:Xo.$root.name,"data-wd-key":"modal:settings.name",value:this.props.mapStyle.name,onChange:this.changeStyleProperty.bind(this,"name")}),ue.jsx(Np,{label:t("Owner"),fieldSpec:{doc:t("Owner ID of the style. Used by Mapbox or future style APIs.")},"data-wd-key":"modal:settings.owner",value:this.props.mapStyle.owner,onChange:this.changeStyleProperty.bind(this,"owner")}),ue.jsx(Ky,{fieldSpec:Xo.$root.sprite,label:t("Sprite URL"),"data-wd-key":"modal:settings.sprite",value:this.props.mapStyle.sprite,onChange:this.changeStyleProperty.bind(this,"sprite")}),ue.jsx(Ky,{label:t("Glyphs URL"),fieldSpec:Xo.$root.glyphs,"data-wd-key":"modal:settings.glyphs",value:this.props.mapStyle.glyphs,onChange:this.changeStyleProperty.bind(this,"glyphs")}),ue.jsx(Np,{label:s.maputnik.maptiler_access_token.label,fieldSpec:s.maputnik.maptiler_access_token,"data-wd-key":"modal:settings.maputnik:openmaptiles_access_token",value:e["maputnik:openmaptiles_access_token"],onChange:r.bind(this,"maputnik:openmaptiles_access_token")}),ue.jsx(Np,{label:s.maputnik.thunderforest_access_token.label,fieldSpec:s.maputnik.thunderforest_access_token,"data-wd-key":"modal:settings.maputnik:thunderforest_access_token",value:e["maputnik:thunderforest_access_token"],onChange:r.bind(this,"maputnik:thunderforest_access_token")}),ue.jsx(Np,{label:s.maputnik.stadia_access_token.label,fieldSpec:s.maputnik.stadia_access_token,"data-wd-key":"modal:settings.maputnik:stadia_access_token",value:e["maputnik:stadia_access_token"],onChange:r.bind(this,"maputnik:stadia_access_token")}),ue.jsx(k2,{label:t("Center"),fieldSpec:Xo.$root.center,length:2,type:"number",value:(Ui().b[8][0]++,i.center||(Ui().b[8][1]++,[])),default:[0,0],onChange:this.changeStyleProperty.bind(this,"center")}),ue.jsx(ap,{label:t("Zoom"),fieldSpec:Xo.$root.zoom,value:i.zoom,default:0,onChange:this.changeStyleProperty.bind(this,"zoom")}),ue.jsx(ap,{label:t("Bearing"),fieldSpec:Xo.$root.bearing,value:i.bearing,default:Xo.$root.bearing.default,onChange:this.changeStyleProperty.bind(this,"bearing")}),ue.jsx(ap,{label:t("Pitch"),fieldSpec:Xo.$root.pitch,value:i.pitch,default:Xo.$root.pitch.default,onChange:this.changeStyleProperty.bind(this,"pitch")}),ue.jsx(Iue,{label:t("Light anchor"),fieldSpec:Xo.light.anchor,name:"light-anchor",value:l.anchor,options:Object.keys(Xo.light.anchor.values),default:Xo.light.anchor.default,onChange:this.changeLightProperty.bind(this,"anchor")}),ue.jsx(kue,{label:t("Light color"),fieldSpec:Xo.light.color,value:l.color,default:Xo.light.color.default,onChange:this.changeLightProperty.bind(this,"color")}),ue.jsx(ap,{label:t("Light intensity"),fieldSpec:Xo.light.intensity,value:l.intensity,default:Xo.light.intensity.default,onChange:this.changeLightProperty.bind(this,"intensity")}),ue.jsx(k2,{label:t("Light position"),fieldSpec:Xo.light.position,type:"number",length:Xo.light.position.length,value:l.position,default:Xo.light.position.default,onChange:this.changeLightProperty.bind(this,"position")}),ue.jsx(Np,{label:t("Terrain source"),fieldSpec:Xo.terrain.source,"data-wd-key":"modal:settings.maputnik:terrain_source",value:f.source,onChange:this.changeTerrainProperty.bind(this,"source")}),ue.jsx(ap,{label:t("Terrain exaggeration"),fieldSpec:Xo.terrain.exaggeration,value:f.exaggeration,default:Xo.terrain.exaggeration.default,onChange:this.changeTerrainProperty.bind(this,"exaggeration")}),ue.jsx(ap,{label:t("Transition delay"),fieldSpec:Xo.transition.delay,value:o.delay,default:Xo.transition.delay.default,onChange:this.changeTransitionProperty.bind(this,"delay")}),ue.jsx(ap,{label:t("Transition duration"),fieldSpec:Xo.transition.duration,value:o.duration,default:Xo.transition.duration.default,onChange:this.changeTransitionProperty.bind(this,"duration")}),ue.jsx(Jx,{label:s.maputnik.style_renderer.label,fieldSpec:s.maputnik.style_renderer,"data-wd-key":"modal:settings.maputnik:renderer",options:[["mlgljs","MapLibreGL JS"],["ol",t("Open Layers (experimental)")]],value:(Ui().b[9][0]++,e["maputnik:renderer"]||(Ui().b[9][1]++,"mlgljs")),onChange:r.bind(this,"maputnik:renderer")})]})})}}const Pue=(Ui().s[27]++,zs()(Tue));var Tb={exports:{}},Kue=Tb.exports,aR;function Rue(){return aR||(aR=1,function(n,e){(function(t,r,i){n.exports=i(),n.exports.default=i()})("slugify",Kue,function(){var t=JSON.parse(`{"$":"dollar","%":"percent","&":"and","<":"less",">":"greater","|":"or","":"cent","":"pound","":"currency","":"yen","":"(c)","":"a","":"(r)","":"o","":"A","":"A","":"A","":"A","":"A","":"A","":"AE","":"C","":"E","":"E","":"E","":"E","":"I","":"I","":"I","":"I","":"D","":"N","":"O","":"O","":"O","":"O","":"O","":"O","":"U","":"U","":"U","":"U","":"Y","":"TH","":"ss","":"a","":"a","":"a","":"a","":"a","":"a","":"ae","":"c","":"e","":"e","":"e","":"e","":"i","":"i","":"i","":"i","":"d","":"n","":"o","":"o","":"o","":"o","":"o","":"o","":"u","":"u","":"u","":"u","":"y","":"th","":"y","":"A","":"a","":"A","":"a","":"A","":"a","":"C","":"c","":"C","":"c","":"D","":"d","":"DJ","":"dj","":"E","":"e","":"E","":"e","":"e","":"e","":"E","":"e","":"G","":"g","":"G","":"g","":"I","":"i","":"i","":"i","":"I","":"i","":"I","":"i","":"k","":"k","":"L","":"l","":"L","":"l","":"L","":"l","":"N","":"n","":"N","":"n","":"N","":"n","":"O","":"o","":"O","":"o","":"OE","":"oe","":"R","":"r","":"R","":"r","":"S","":"s","":"S","":"s","":"S","":"s","":"T","":"t","":"T","":"t","":"U","":"u","":"u","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"z","":"Z","":"z","":"Z","":"z","":"E","":"f","":"O","":"o","":"U","":"u","":"LJ","":"lj","":"NJ","":"nj","":"S","":"s","":"T","":"t","":"e","":"o","":"A","":"E","":"H","":"I","":"O","":"Y","":"W","":"i","":"A","":"B","":"G","":"D","":"E","":"Z","":"H","":"8","":"I","":"K","":"L","":"M","":"N","":"3","":"O","":"P","":"R","":"S","":"T","":"Y","":"F","":"X","":"PS","":"W","":"I","":"Y","":"a","":"e","":"h","":"i","":"y","":"a","":"b","":"g","":"d","":"e","":"z","":"h","":"8","":"i","":"k","":"l","":"m","":"n","":"3","":"o","":"p","":"r","":"s","":"s","":"t","":"y","":"f","":"x","":"ps","":"w","":"i","":"y","":"o","":"y","":"w","":"Yo","":"DJ","":"Ye","":"I","":"Yi","":"J","":"LJ","":"NJ","":"C","":"DZ","":"A","":"B","":"V","":"G","":"D","":"E","":"Zh","":"Z","":"I","":"J","":"K","":"L","":"M","":"N","":"O","":"P","":"R","":"S","":"T","":"U","":"F","":"H","":"C","":"Ch","":"Sh","":"Sh","":"U","":"Y","":"","":"E","":"Yu","":"Ya","":"a","":"b","":"v","":"g","":"d","":"e","":"zh","":"z","":"i","":"j","":"k","":"l","":"m","":"n","":"o","":"p","":"r","":"s","":"t","":"u","":"f","":"h","":"c","":"ch","":"sh","":"sh","":"u","":"y","":"","":"e","":"yu","":"ya","":"yo","":"dj","":"ye","":"i","":"yi","":"j","":"lj","":"nj","":"c","":"u","":"dz","":"G","":"g","":"GH","":"gh","":"KH","":"kh","":"NG","":"ng","":"UE","":"ue","":"U","":"u","":"H","":"h","":"AE","":"ae","":"OE","":"oe","":"A","":"B","":"G","":"D","":"E","":"Z","":"E'","":"Y'","":"T'","":"JH","":"I","":"L","":"X","":"C'","":"K","":"H","":"D'","":"GH","":"TW","":"M","":"Y","":"N","":"SH","":"CH","":"P","":"J","":"R'","":"S","":"V","":"T","":"R","":"C","":"P'","":"Q'","":"O''","":"F","":"EV","":"a","":"aa","":"a","":"u","":"i","":"e","":"a","":"b","":"h","":"t","":"th","":"j","":"h","":"kh","":"d","":"th","":"r","":"z","":"s","":"sh","":"s","":"dh","":"t","":"z","":"a","":"gh","":"f","":"q","":"k","":"l","":"m","":"n","":"h","":"w","":"a","":"y","":"an","":"on","":"en","":"a","":"u","":"e","":"","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"p","":"ch","":"zh","":"k","":"g","":"y","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"baht","":"a","":"b","":"g","":"d","":"e","":"v","":"z","":"t","":"i","":"k","":"l","":"m","":"n","":"o","":"p","":"zh","":"r","":"s","":"t","":"u","":"f","":"k","":"gh","":"q","":"sh","":"ch","":"ts","":"dz","":"ts","":"ch","":"kh","":"j","":"h","":"S","":"s","":"W","":"w","":"W","":"w","":"W","":"w","":"SS","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"I","":"i","":"I","":"i","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"Y","":"y","":"Y","":"y","":"Y","":"y","":"Y","":"y","":"-","":"'","":"'","":"\\"","":"\\"","":"\\"","":"+","":"*","":"...","":"ecu","":"cruzeiro","":"french franc","":"lira","":"mill","":"naira","":"peseta","":"rupee","":"won","":"new shequel","":"dong","":"euro","":"kip","":"tugrik","":"drachma","":"penny","":"peso","":"guarani","":"austral","":"hryvnia","":"cedi","":"kazakhstani tenge","":"indian rupee","":"turkish lira","":"russian ruble","":"bitcoin","":"sm","":"tm","":"d","":"delta","":"sum","":"infinity","":"love","":"yuan","":"yen","":"rial","":"laa","":"laa","":"lai","":"la"}`),r=JSON.parse('{"bg":{"":"Y","":"Ts","":"Sht","":"A","":"Y","":"y","":"ts","":"sht","":"a","":"y"},"de":{"":"AE","":"ae","":"OE","":"oe","":"UE","":"ue","":"ss","%":"prozent","&":"und","|":"oder","":"summe","":"unendlich","":"liebe"},"es":{"%":"por ciento","&":"y","<":"menor que",">":"mayor que","|":"o","":"centavos","":"libras","":"moneda","":"francos","":"suma","":"infinito","":"amor"},"fr":{"%":"pourcent","&":"et","<":"plus petit",">":"plus grand","|":"ou","":"centime","":"livre","":"devise","":"franc","":"somme","":"infini","":"amour"},"pt":{"%":"porcento","&":"e","<":"menor",">":"maior","|":"ou","":"centavo","":"soma","":"libra","":"infinito","":"amor"},"uk":{"":"Y","":"y","":"Y","":"y","":"Ts","":"ts","":"Kh","":"kh","":"Shch","":"shch","":"H","":"h"},"vi":{"":"D","":"d"},"da":{"":"OE","":"oe","":"AA","":"aa","%":"procent","&":"og","|":"eller","$":"dollar","<":"mindre end",">":"strre end"},"nb":{"&":"og","":"AA","":"AE","":"OE","":"aa","":"ae","":"oe"},"it":{"&":"e"},"nl":{"&":"en"},"sv":{"&":"och","":"AA","":"AE","":"OE","":"aa","":"ae","":"oe"}}');function i(s,l){if(typeof s!="string")throw new Error("slugify: string argument expected");l=typeof l=="string"?{replacement:l}:l||{};var o=r[l.locale]||{},f=l.replacement===void 0?"-":l.replacement,y=l.trim===void 0?!0:l.trim,x=s.normalize().split("").reduce(function(B,O){var P=o[O];return P===void 0&&(P=t[O]),P===void 0&&(P=O),P===f&&(P=" "),B+P.replace(l.remove||/[^\w\s$*_+~.()'"!\-:@]+/g,"")},"");return l.strict&&(x=x.replace(/[^A-Za-z0-9\s]/g,"")),y&&(x=x.trim()),x=x.replace(/\s+/g,f),l.lower&&(x=x.toLowerCase()),x}return i.extend=function(s){Object.assign(t,s)},i})}(Tb)),Tb.exports}var Due=Rue();const Fue=fl(Due);var Pb={exports:{}},Lue=Pb.exports,lR;function Uue(){return lR||(lR=1,function(n,e){(function(t,r){r()})(Lue,function(){function t(y,x){return typeof x>"u"?x={autoBom:!1}:typeof x!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),x={autoBom:!x}),x.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(y.type)?new Blob(["\uFEFF",y],{type:y.type}):y}function r(y,x,B){var O=new XMLHttpRequest;O.open("GET",y),O.responseType="blob",O.onload=function(){f(O.response,x,B)},O.onerror=function(){console.error("could not download file")},O.send()}function i(y){var x=new XMLHttpRequest;x.open("HEAD",y,!1);try{x.send()}catch{}return 200<=x.status&&299>=x.status}function s(y){try{y.dispatchEvent(new MouseEvent("click"))}catch{var x=document.createEvent("MouseEvents");x.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),y.dispatchEvent(x)}}var l=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof window=="object"&&window.global===window?window:void 0,o=l.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),f=l.saveAs||(typeof window!="object"||window!==l?function(){}:"download"in HTMLAnchorElement.prototype&&!o?function(y,x,B){var O=l.URL||l.webkitURL,P=document.createElement("a");x=x||y.name||"download",P.download=x,P.rel="noopener",typeof y=="string"?(P.href=y,P.origin===location.origin?s(P):i(P.href)?r(y,x,B):s(P,P.target="_blank")):(P.href=O.createObjectURL(y),setTimeout(function(){O.revokeObjectURL(P.href)},4e4),setTimeout(function(){s(P)},0))}:"msSaveOrOpenBlob"in navigator?function(y,x,B){if(x=x||y.name||"download",typeof y!="string")navigator.msSaveOrOpenBlob(t(y,B),x);else if(i(y))r(y,x,B);else{var O=document.createElement("a");O.href=y,O.target="_blank",setTimeout(function(){s(O)})}}:function(y,x,B,O){if(O=O||open("","_blank"),O&&(O.document.title=O.document.body.innerText="downloading..."),typeof y=="string")return r(y,x,B);var P=y.type==="application/octet-stream",U=/constructor/i.test(l.HTMLElement)||l.safari,j=/CriOS\/[\d]+/.test(navigator.userAgent);if((j||P&&U||o)&&typeof FileReader<"u"){var N=new FileReader;N.onloadend=function(){var se=N.result;se=j?se:se.replace(/^data:[^;]*;/,"data:attachment/file;"),O?O.location.href=se:location=se,O=null},N.readAsDataURL(y)}else{var Y=l.URL||l.webkitURL,H=Y.createObjectURL(y);O?O.location=H:location.href=H,O=null,setTimeout(function(){Y.revokeObjectURL(H)},4e4)}});l.saveAs=f.saveAs=f,n.exports=f})}(Pb)),Pb.exports}var uR=Uue();const zue="5.2.0",jue="get_your_own_OpIi9ZULNHzrESv6T2vL",Nue="b71f7f0ba4064f5eb9e903859a9cf5c6",Dj={openmaptiles:jue,thunderforest:Nue};function ar(){var n="/home/runner/work/maputnik/maputnik/src/libs/style.ts",e="c162664fcb147ac7caff0efb860cd8a0c7d435d1",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/style.ts",statementMap:{0:{start:{line:3,column:19},end:{line:7,column:2}},1:{start:{line:9,column:2},end:{line:9,column:52}},2:{start:{line:12,column:2},end:{line:15,column:3}},3:{start:{line:13,column:4},end:{line:13,column:28}},4:{start:{line:14,column:4},end:{line:14,column:17}},5:{start:{line:16,column:2},end:{line:16,column:15}},6:{start:{line:19,column:24},end:{line:23,column:4}},7:{start:{line:20,column:25},end:{line:20,column:37}},8:{start:{line:21,column:4},end:{line:21,column:36}},9:{start:{line:22,column:4},end:{line:22,column:24}},10:{start:{line:24,column:2},end:{line:27,column:4}},11:{start:{line:30,column:2},end:{line:33,column:4}},12:{start:{line:36,column:2},end:{line:36,column:69}},13:{start:{line:39,column:2},end:{line:43,column:3}},14:{start:{line:39,column:15},end:{line:39,column:16}},15:{start:{line:40,column:4},end:{line:42,column:5}},16:{start:{line:41,column:6},end:{line:41,column:15}},17:{start:{line:44,column:2},end:{line:44,column:14}},18:{start:{line:47,column:19},end:{line:47,column:42}},19:{start:{line:48,column:20},end:{line:48,column:67}},20:{start:{line:49,column:2},end:{line:51,column:3}},21:{start:{line:50,column:4},end:{line:50,column:37}},22:{start:{line:52,column:2},end:{line:52,column:21}},23:{start:{line:55,column:17},end:{line:55,column:45}},24:{start:{line:56,column:2},end:{line:56,column:31}},25:{start:{line:56,column:15},end:{line:56,column:31}},26:{start:{line:57,column:2},end:{line:57,column:57}},27:{start:{line:57,column:41},end:{line:57,column:57}},28:{start:{line:58,column:23},end:{line:58,column:33}},29:{start:{line:59,column:2},end:{line:63,column:3}},30:{start:{line:60,column:4},end:{line:60,column:37}},31:{start:{line:61,column:9},end:{line:63,column:3}},32:{start:{line:62,column:4},end:{line:62,column:30}},33:{start:{line:64,column:22},end:{line:64,column:68}},34:{start:{line:65,column:2},end:{line:67,column:3}},35:{start:{line:66,column:4},end:{line:66,column:20}},36:{start:{line:69,column:2},end:{line:73,column:3}},37:{start:{line:70,column:4},end:{line:70,column:55}},38:{start:{line:72,column:4},end:{line:72,column:57}},39:{start:{line:74,column:25},end:{line:80,column:3}},40:{start:{line:81,column:23},end:{line:84,column:3}},41:{start:{line:85,column:2},end:{line:85,column:22}},42:{start:{line:88,column:21},end:{line:88,column:29}},43:{start:{line:89,column:2},end:{line:91,column:5}},44:{start:{line:90,column:4},end:{line:90,column:76}},45:{start:{line:92,column:2},end:{line:100,column:3}},46:{start:{line:93,column:27},end:{line:93,column:73}},47:{start:{line:94,column:4},end:{line:99,column:5}},48:{start:{line:95,column:6},end:{line:98,column:8}},49:{start:{line:101,column:2},end:{line:101,column:22}},50:{start:{line:104,column:26},end:{line:106,column:3}},51:{start:{line:107,column:2},end:{line:107,column:63}},52:{start:{line:108,column:2},end:{line:108,column:64}},53:{start:{line:109,column:2},end:{line:109,column:57}},54:{start:{line:110,column:2},end:{line:113,column:4}}},fnMap:{0:{name:"generateId",decl:{start:{line:8,column:9},end:{line:8,column:19}},loc:{start:{line:8,column:22},end:{line:10,column:1}},line:8},1:{name:"ensureHasId",decl:{start:{line:11,column:9},end:{line:11,column:20}},loc:{start:{line:11,column:28},end:{line:17,column:1}},line:11},2:{name:"ensureHasNoInteractive",decl:{start:{line:18,column:9},end:{line:18,column:31}},loc:{start:{line:18,column:39},end:{line:28,column:1}},line:18},3:{name:"(anonymous_3)",decl:{start:{line:19,column:41},end:{line:19,column:42}},loc:{start:{line:19,column:52},end:{line:23,column:3}},line:19},4:{name:"ensureHasNoRefs",decl:{start:{line:29,column:9},end:{line:29,column:24}},loc:{start:{line:29,column:32},end:{line:34,column:1}},line:29},5:{name:"ensureStyleValidity",decl:{start:{line:35,column:9},end:{line:35,column:28}},loc:{start:{line:35,column:36},end:{line:37,column:1}},line:35},6:{name:"indexOfLayer",decl:{start:{line:38,column:9},end:{line:38,column:21}},loc:{start:{line:38,column:39},end:{line:45,column:1}},line:38},7:{name:"getAccessToken",decl:{start:{line:46,column:9},end:{line:46,column:23}},loc:{start:{line:46,column:52},end:{line:53,column:1}},line:46},8:{name:"replaceSourceAccessToken",decl:{start:{line:54,column:9},end:{line:54,column:33}},loc:{start:{line:54,column:67},end:{line:86,column:1}},line:54},9:{name:"replaceAccessTokens",decl:{start:{line:87,column:9},end:{line:87,column:28}},loc:{start:{line:87,column:50},end:{line:102,column:1}},line:87},10:{name:"(anonymous_10)",decl:{start:{line:89,column:40},end:{line:89,column:41}},loc:{start:{line:89,column:56},end:{line:91,column:3}},line:89},11:{name:"stripAccessTokens",decl:{start:{line:103,column:9},end:{line:103,column:26}},loc:{start:{line:103,column:37},end:{line:114,column:1}},line:103}},branchMap:{0:{loc:{start:{line:12,column:2},end:{line:15,column:3}},type:"if",locations:[{start:{line:12,column:2},end:{line:15,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:12},1:{loc:{start:{line:12,column:6},end:{line:12,column:35}},type:"binary-expr",locations:[{start:{line:12,column:6},end:{line:12,column:22}},{start:{line:12,column:26},end:{line:12,column:35}}],line:12},2:{loc:{start:{line:40,column:4},end:{line:42,column:5}},type:"if",locations:[{start:{line:40,column:4},end:{line:42,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:40},3:{loc:{start:{line:47,column:19},end:{line:47,column:42}},type:"binary-expr",locations:[{start:{line:47,column:19},end:{line:47,column:36}},{start:{line:47,column:40},end:{line:47,column:42}}],line:47},4:{loc:{start:{line:49,column:2},end:{line:51,column:3}},type:"if",locations:[{start:{line:49,column:2},end:{line:51,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:49},5:{loc:{start:{line:49,column:6},end:{line:49,column:40}},type:"binary-expr",locations:[{start:{line:49,column:6},end:{line:49,column:24}},{start:{line:49,column:28},end:{line:49,column:40}}],line:49},6:{loc:{start:{line:54,column:56},end:{line:54,column:65}},type:"default-arg",locations:[{start:{line:54,column:63},end:{line:54,column:65}}],line:54},7:{loc:{start:{line:56,column:2},end:{line:56,column:31}},type:"if",locations:[{start:{line:56,column:2},end:{line:56,column:31}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:56},8:{loc:{start:{line:57,column:2},end:{line:57,column:57}},type:"if",locations:[{start:{line:57,column:2},end:{line:57,column:57}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:57},9:{loc:{start:{line:57,column:6},end:{line:57,column:39}},type:"binary-expr",locations:[{start:{line:57,column:6},end:{line:57,column:24}},{start:{line:57,column:28},end:{line:57,column:39}}],line:57},10:{loc:{start:{line:59,column:2},end:{line:63,column:3}},type:"if",locations:[{start:{line:59,column:2},end:{line:63,column:3}},{start:{line:61,column:9},end:{line:63,column:3}}],line:59},11:{loc:{start:{line:59,column:6},end:{line:59,column:89}},type:"binary-expr",locations:[{start:{line:59,column:6},end:{line:59,column:46}},{start:{line:59,column:50},end:{line:59,column:89}}],line:59},12:{loc:{start:{line:61,column:9},end:{line:63,column:3}},type:"if",locations:[{start:{line:61,column:9},end:{line:63,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:61},13:{loc:{start:{line:61,column:13},end:{line:61,column:70}},type:"binary-expr",locations:[{start:{line:61,column:13},end:{line:61,column:28}},{start:{line:61,column:32},end:{line:61,column:70}}],line:61},14:{loc:{start:{line:65,column:2},end:{line:67,column:3}},type:"if",locations:[{start:{line:65,column:2},end:{line:67,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:65},15:{loc:{start:{line:69,column:2},end:{line:73,column:3}},type:"if",locations:[{start:{line:69,column:2},end:{line:73,column:3}},{start:{line:71,column:9},end:{line:73,column:3}}],line:69},16:{loc:{start:{line:87,column:39},end:{line:87,column:48}},type:"default-arg",locations:[{start:{line:87,column:46},end:{line:87,column:48}}],line:87},17:{loc:{start:{line:92,column:2},end:{line:100,column:3}},type:"if",locations:[{start:{line:92,column:2},end:{line:100,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:92},18:{loc:{start:{line:92,column:6},end:{line:92,column:114}},type:"binary-expr",locations:[{start:{line:92,column:6},end:{line:92,column:21}},{start:{line:92,column:26},end:{line:92,column:69}},{start:{line:92,column:73},end:{line:92,column:113}}],line:92},19:{loc:{start:{line:94,column:4},end:{line:99,column:5}},type:"if",locations:[{start:{line:94,column:4},end:{line:99,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:94}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0],17:[0,0],18:[0,0,0],19:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/style.ts"],names:[],mappings:"AAAA,SAAQ,mBAAkB;AAE1B,OAAO,YAAY;AAGnB,MAAM,aAAa,oBAAoB;AAAA,EACrC,SAAS;AAAA,EACT,SAAS,CAAC;AAAA,EACV,QAAQ,CAAC;AACX,CAAC;AAED,SAAS,aAAa;AACpB,SAAO,KAAK,OAAO,EAAE,SAAS,EAAE,EAAE,UAAU,GAAG,CAAC;AAClD;AAEA,SAAS,YAAY,OAAkF;AACrG,MAAG,EAAE,QAAQ,UAAU,CAAC,MAAM,IAAI;AAChC,UAAM,KAAK,WAAW;AACtB,WAAO;AAAA,EACT;AACA,SAAO;AACT;AAEA,SAAS,uBAAuB,OAA0C;AACxE,QAAM,gBAAgB,MAAM,OAAO,IAAI,WAAS;AAC9C,UAAM,eAA2D,EAAE,GAAG,MAAM;AAC5E,WAAO,aAAa;AACpB,WAAO;AAAA,EACT,CAAC;AAED,SAAO;AAAA,IACL,GAAG;AAAA,IACH,QAAQ;AAAA,EACV;AACF;AAEA,SAAS,gBAAgB,OAA0C;AACjE,SAAO;AAAA,IACL,GAAG;AAAA,IACH,QAAQ,YAAY,MAAM,MAAM;AAAA,EAClC;AACF;AAEA,SAAS,oBAAoB,OAAgE;AAC3F,SAAO,uBAAuB,gBAAgB,YAAY,KAAK,CAAC,CAAC;AACnE;AAEA,SAAS,aAAa,QAA8B,SAAiB;AACnE,WAAS,IAAI,GAAG,IAAI,OAAO,QAAQ,KAAK;AACtC,QAAG,OAAO,CAAC,EAAE,OAAO,SAAS;AAC3B,aAAO;AAAA,IACT;AAAA,EACF;AACA,SAAO;AACT;AAEA,SAAS,eAAe,YAAoB,UAA8B,MAAiC;AACzG,QAAM,WAAW,SAAS,YAAY,CAAC;AACvC,MAAI,cAAc,SAAS,YAAY,UAAU,eAAe;AAEhE,MAAG,KAAK,iBAAiB,CAAC,aAAa;AACrC,kBAAc,OAAO,UAAiC;AAAA,EACxD;AAEA,SAAO;AACT;AAEA,SAAS,yBAAyB,UAA8B,YAAoB,OAAK,CAAC,GAAG;AAC3F,QAAM,SAAS,SAAS,QAAQ,UAAU;AAC1C,MAAG,CAAC,OAAQ,QAAO;AACnB,MAAG,EAAE,SAAS,WAAW,CAAC,OAAO,IAAK,QAAO;AAE7C,MAAI,iBAAiB;AACrB,MAAG,eAAe,6BAA6B,eAAe,0BAA0B;AACtF,qBAAiB;AAAA,EACnB,WACU,SAAS,UAAW,OAAO,KAAK,MAAM,mBAAmB,GAAG;AAGpE,qBAAiB;AAAA,EACnB;AAEA,QAAM,cAAc,eAAe,gBAAgB,UAAU,IAAI;AAEjE,MAAG,CAAC,aAAa;AAEf,WAAO;AAAA,EACT;AAEA,MAAI;AACJ,MAAI,kBAAkB,UAAU;AAI9B,gBAAY,GAAG,OAAO,GAAG,YAAY,WAAW;AAAA,EAClD,OAAO;AACL,gBAAY,OAAO,IAAI,QAAQ,SAAS,WAAW;AAAA,EACrD;AAEA,QAAM,iBAAiB;AAAA,IACrB,GAAG,SAAS;AAAA,IACZ,CAAC,UAAU,GAAG;AAAA,MACZ,GAAG;AAAA,MACH,KAAK;AAAA,IACP;AAAA,EACF;AACA,QAAM,eAAe;AAAA,IACnB,GAAG;AAAA,IACH,SAAS;AAAA,EACX;AACA,SAAO;AACT;AAEA,SAAS,oBAAoB,UAA8B,OAAK,CAAC,GAAG;AAClE,MAAI,eAAe;AAEnB,SAAO,KAAK,SAAS,OAAO,EAAE,QAAQ,CAAC,eAAe;AACpD,mBAAe,yBAAyB,cAAc,YAAY,IAAI;AAAA,EACxE,CAAC;AAED,MAAI,SAAS,WAAW,SAAS,OAAO,MAAM,oBAAoB,KAAK,SAAS,OAAO,MAAM,iBAAiB,IAAI;AAChH,UAAM,iBAAiB,eAAe,gBAAgB,UAAU,IAAI;AACpE,QAAI,gBAAgB;AAClB,qBAAe;AAAA,QACb,GAAG;AAAA,QACH,QAAQ,SAAS,OAAO,QAAQ,SAAS,cAAc;AAAA,MACzD;AAAA,IACF;AAAA,EACF;AAEA,SAAO;AACT;AAEA,SAAS,kBAAkB,UAA8B;AACvD,QAAM,kBAAkB;AAAA,IACtB,GAAG,SAAS;AAAA,EACd;AACA,SAAO,gBAAgB,oCAAoC;AAC3D,SAAO,gBAAgB,qCAAqC;AAC5D,SAAO,gBAAgB,8BAA8B;AACrD,SAAO;AAAA,IACL,GAAG;AAAA,IACH,UAAU;AAAA,EACZ;AACF;AAEA,eAAe;AAAA,EACb;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"c162664fcb147ac7caff0efb860cd8a0c7d435d1"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return ar=function(){return l},l}ar();const Wue=(ar().s[0]++,Lj({version:8,sources:{},layers:[]}));function Fj(){return ar().f[0]++,ar().s[1]++,Math.random().toString(36).substring(2,9)}function Gue(n){return ar().f[1]++,ar().s[2]++,ar().b[1][0]++,!("id"in n)||(ar().b[1][1]++,!n.id)?(ar().b[0][0]++,ar().s[3]++,n.id=Fj(),ar().s[4]++,n):(ar().b[0][1]++,ar().s[5]++,n)}function Que(n){ar().f[2]++;const e=(ar().s[6]++,n.layers.map(t=>{ar().f[3]++;const r=(ar().s[7]++,{...t});return ar().s[8]++,delete r.interactive,ar().s[9]++,r}));return ar().s[10]++,{...n,layers:e}}function Yue(n){return ar().f[4]++,ar().s[11]++,{...n,layers:N6(n.layers)}}function Lj(n){return ar().f[5]++,ar().s[12]++,Que(Yue(Gue(n)))}function que(n,e){ar().f[6]++,ar().s[13]++;for(let t=(ar().s[14]++,0);t<n.length;t++){if(ar().s[15]++,n[t].id===e)return ar().b[2][0]++,ar().s[16]++,t;ar().b[2][1]++}return ar().s[17]++,null}function YO(n,e,t){ar().f[7]++;const r=(ar().s[18]++,ar().b[3][0]++,e.metadata||(ar().b[3][1]++,{}));let i=(ar().s[19]++,r[`maputnik:${n}_access_token`]);return ar().s[20]++,ar().b[5][0]++,t.allowFallback&&(ar().b[5][1]++,!i)?(ar().b[4][0]++,ar().s[21]++,i=Dj[n]):ar().b[4][1]++,ar().s[22]++,i}function Vue(n,e,t=(ar().b[6][0]++,{})){var y;ar().f[8]++;const r=(ar().s[23]++,n.sources[e]);if(ar().s[24]++,r)ar().b[7][1]++;else return ar().b[7][0]++,ar().s[25]++,n;if(ar().s[26]++,ar().b[9][0]++,!("url"in r)||(ar().b[9][1]++,!r.url))return ar().b[8][0]++,ar().s[27]++,n;ar().b[8][1]++;let i=(ar().s[28]++,e);ar().s[29]++,ar().b[11][0]++,e==="thunderforest_transport"||(ar().b[11][1]++,e==="thunderforest_outdoors")?(ar().b[10][0]++,ar().s[30]++,i="thunderforest"):(ar().b[10][1]++,ar().s[31]++,ar().b[13][0]++,"url"in r&&(ar().b[13][1]++,(y=r.url)==null?void 0:y.match(/\.stadiamaps\.com/))?(ar().b[12][0]++,ar().s[32]++,i="stadia"):ar().b[12][1]++);const s=(ar().s[33]++,YO(i,n,t));if(ar().s[34]++,s)ar().b[14][1]++;else return ar().b[14][0]++,ar().s[35]++,n;let l;ar().s[36]++,i=="stadia"?(ar().b[15][0]++,ar().s[37]++,l=`${r.url}?api_key=${s}`):(ar().b[15][1]++,ar().s[38]++,l=r.url.replace("{key}",s));const o=(ar().s[39]++,{...n.sources,[e]:{...r,url:l}}),f=(ar().s[40]++,{...n,sources:o});return ar().s[41]++,f}function $ue(n,e=(ar().b[16][0]++,{})){ar().f[9]++;let t=(ar().s[42]++,n);if(ar().s[43]++,Object.keys(n.sources).forEach(r=>{ar().f[10]++,ar().s[44]++,t=Vue(t,r,e)}),ar().s[45]++,ar().b[18][0]++,n.glyphs&&(ar().b[18][1]++,n.glyphs.match(/\.tilehosting\.com/)||(ar().b[18][2]++,n.glyphs.match(/\.maptiler\.com/)))){ar().b[17][0]++;const r=(ar().s[46]++,YO("openmaptiles",n,e));ar().s[47]++,r?(ar().b[19][0]++,ar().s[48]++,t={...t,glyphs:n.glyphs.replace("{key}",r)}):ar().b[19][1]++}else ar().b[17][1]++;return ar().s[49]++,t}function Hue(n){ar().f[11]++;const e=(ar().s[50]++,{...n.metadata});return ar().s[51]++,delete e["maputnik:openmaptiles_access_token"],ar().s[52]++,delete e["maputnik:thunderforest_access_token"],ar().s[53]++,delete e["maputnik:stadia_access_token"],ar().s[54]++,{...n,metadata:e}}const vc={ensureStyleValidity:Lj,emptyStyle:Wue,indexOfLayer:que,generateId:Fj,getAccessToken:YO,replaceAccessTokens:$ue,stripAccessTokens:Hue};function Qr(){var n="/home/runner/work/maputnik/maputnik/src/components/ModalExport.tsx",e="66cf81ab709608eec5a644a6a17a019c5afe48ce",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ModalExport.tsx",statementMap:{0:{start:{line:14,column:28},end:{line:14,column:35}},1:{start:{line:15,column:36},end:{line:15,column:83}},2:{start:{line:18,column:4},end:{line:22,column:6}},3:{start:{line:25,column:4},end:{line:33,column:5}},4:{start:{line:26,column:6},end:{line:30,column:9}},5:{start:{line:32,column:6},end:{line:32,column:36}},6:{start:{line:36,column:23},end:{line:36,column:44}},7:{start:{line:37,column:22},end:{line:37,column:69}},8:{start:{line:38,column:17},end:{line:62,column:1}},9:{start:{line:63,column:17},end:{line:63,column:70}},10:{start:{line:64,column:23},end:{line:64,column:40}},11:{start:{line:65,column:4},end:{line:65,column:39}},12:{start:{line:68,column:23},end:{line:68,column:44}},13:{start:{line:69,column:4},end:{line:74,column:5}},14:{start:{line:70,column:19},end:{line:70,column:85}},15:{start:{line:71,column:25},end:{line:71,column:42}},16:{start:{line:72,column:6},end:{line:72,column:41}},17:{start:{line:73,column:6},end:{line:73,column:13}},18:{start:{line:75,column:21},end:{line:75,column:42}},19:{start:{line:76,column:4},end:{line:80,column:5}},20:{start:{line:77,column:6},end:{line:77,column:49}},21:{start:{line:78,column:6},end:{line:78,column:45}},22:{start:{line:79,column:6},end:{line:79,column:37}},23:{start:{line:79,column:30},end:{line:79,column:37}},24:{start:{line:81,column:21},end:{line:81,column:54}},25:{start:{line:82,column:4},end:{line:82,column:37}},26:{start:{line:83,column:4},end:{line:83,column:27}},27:{start:{line:84,column:4},end:{line:84,column:30}},28:{start:{line:87,column:23},end:{line:87,column:44}},29:{start:{line:88,column:23},end:{line:88,column:52}},30:{start:{line:89,column:4},end:{line:89,column:43}},31:{start:{line:90,column:4},end:{line:90,column:35}},32:{start:{line:90,column:28},end:{line:90,column:35}},33:{start:{line:91,column:21},end:{line:91,column:54}},34:{start:{line:92,column:4},end:{line:92,column:37}},35:{start:{line:93,column:4},end:{line:93,column:27}},36:{start:{line:94,column:4},end:{line:94,column:30}},37:{start:{line:97,column:23},end:{line:105,column:5}},38:{start:{line:106,column:23},end:{line:106,column:66}},39:{start:{line:107,column:4},end:{line:107,column:43}},40:{start:{line:108,column:4},end:{line:108,column:22}},41:{start:{line:111,column:25},end:{line:117,column:5}},42:{start:{line:118,column:4},end:{line:118,column:44}},43:{start:{line:121,column:14},end:{line:121,column:26}},44:{start:{line:122,column:16},end:{line:122,column:38}},45:{start:{line:123,column:4},end:{line:179,column:6}},46:{start:{line:182,column:20},end:{line:182,column:58}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:17,column:2},end:{line:17,column:3}},loc:{start:{line:17,column:19},end:{line:23,column:3}},line:17},1:{name:"(anonymous_1)",decl:{start:{line:24,column:2},end:{line:24,column:3}},loc:{start:{line:24,column:15},end:{line:34,column:3}},line:24},2:{name:"(anonymous_2)",decl:{start:{line:35,column:2},end:{line:35,column:3}},loc:{start:{line:35,column:15},end:{line:66,column:3}},line:35},3:{name:"(anonymous_3)",decl:{start:{line:67,column:2},end:{line:67,column:3}},loc:{start:{line:67,column:20},end:{line:85,column:3}},line:67},4:{name:"(anonymous_4)",decl:{start:{line:86,column:2},end:{line:86,column:3}},loc:{start:{line:86,column:22},end:{line:95,column:3}},line:86},5:{name:"(anonymous_5)",decl:{start:{line:96,column:2},end:{line:96,column:3}},loc:{start:{line:96,column:27},end:{line:109,column:3}},line:96},6:{name:"(anonymous_6)",decl:{start:{line:110,column:2},end:{line:110,column:3}},loc:{start:{line:110,column:42},end:{line:119,column:3}},line:110},7:{name:"(anonymous_7)",decl:{start:{line:120,column:2},end:{line:120,column:3}},loc:{start:{line:120,column:11},end:{line:180,column:3}},line:120}},branchMap:{0:{loc:{start:{line:25,column:4},end:{line:33,column:5}},type:"if",locations:[{start:{line:25,column:4},end:{line:33,column:5}},{start:{line:31,column:11},end:{line:33,column:5}}],line:25},1:{loc:{start:{line:37,column:22},end:{line:37,column:69}},type:"binary-expr",locations:[{start:{line:37,column:22},end:{line:37,column:46}},{start:{line:37,column:50},end:{line:37,column:69}}],line:37},2:{loc:{start:{line:69,column:4},end:{line:74,column:5}},type:"if",locations:[{start:{line:69,column:4},end:{line:74,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:69},3:{loc:{start:{line:76,column:4},end:{line:80,column:5}},type:"if",locations:[{start:{line:76,column:4},end:{line:80,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:76},4:{loc:{start:{line:79,column:6},end:{line:79,column:37}},type:"if",locations:[{start:{line:79,column:6},end:{line:79,column:37}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:79},5:{loc:{start:{line:90,column:4},end:{line:90,column:35}},type:"if",locations:[{start:{line:90,column:4},end:{line:90,column:35}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:90},6:{loc:{start:{line:140,column:24},end:{line:140,column:58}},type:"binary-expr",locations:[{start:{line:140,column:24},end:{line:140,column:52}},{start:{line:140,column:56},end:{line:140,column:58}}],line:140},7:{loc:{start:{line:149,column:24},end:{line:149,column:58}},type:"binary-expr",locations:[{start:{line:149,column:24},end:{line:149,column:52}},{start:{line:149,column:56},end:{line:149,column:58}}],line:149},8:{loc:{start:{line:158,column:24},end:{line:158,column:58}},type:"binary-expr",locations:[{start:{line:158,column:24},end:{line:158,column:52}},{start:{line:158,column:56},end:{line:158,column:58}}],line:158},9:{loc:{start:{line:168,column:12},end:{line:171,column:16}},type:"binary-expr",locations:[{start:{line:168,column:12},end:{line:168,column:39}},{start:{line:168,column:59},end:{line:171,column:16}}],line:168}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ModalExport.tsx"],names:[],mappings:"AAoKQ,cAKA,YALA;AApKR,OAAO,WAAW;AAClB,OAAO,aAAa;AACpB,SAAQ,cAAa;AACrB,SAAQ,eAAc;AACtB,SAAQ,cAAa;AAErB,SAAQ,OAAO,cAAa;AAC5B,SAAyB,uBAAsB;AAE/C,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAClB,OAAO,WAAW;AAClB,OAAO,yBAAyB;AAGhC,MAAM,sBAAsB;AAC5B,MAAM,8BAA8B,OAAO,OAAO,uBAAuB;AAazE,MAAM,4BAA4B,MAAM,UAAoC;AAAA,EAE1E,iBAAiB;AACf,WAAO;AAAA,MACL,MAAM;AAAA,QACJ,MAAM,oBAAoB,KAAK,MAAM,QAAQ;AAAA,MAC/C;AAAA,IACF;AAAA,EACF;AAAA,EAEA,aAAa;AACX,QAAI,KAAK,MAAM,SAAS,MAAM;AAC5B,aAAO,QAAQ,KAAK,MAAM,SAAS,MAAM;AAAA,QACvC,aAAa;AAAA,QACb,QAAQ;AAAA,QACR,OAAO;AAAA,MACT,CAAC;AAAA,IACH,OAAO;AACL,aAAO,KAAK,MAAM,SAAS;AAAA,IAC7B;AAAA,EACF;AAAA,EAEA,aAAa;AACX,UAAM,aAAa,KAAK,eAAe;AACvC,UAAM,YAAY,KAAK,MAAM,SAAS,QAAQ,KAAK,MAAM,EAAE,KAAK;AAChE,UAAM,OAAO;AAAA;AAAA;AAAA;AAAA,WAIN,SAAS;AAAA;AAAA,+CAE2B,mBAAmB;AAAA,8CACpB,mBAAmB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAW/C,UAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQxB,UAAM,OAAO,IAAI,KAAK,CAAC,IAAI,GAAG,EAAC,MAAM,0BAAyB,CAAC;AAC/D,UAAM,aAAa,KAAK,WAAW;AACnC,WAAO,MAAM,aAAa,OAAO;AAAA,EACnC;AAAA,EAEA,MAAM,YAAY;AAChB,UAAM,aAAa,KAAK,eAAe;AAIvC,QAAI,CAAC,6BAA6B;AAChC,YAAM,OAAO,IAAI,KAAK,CAAC,UAAU,GAAG,EAAC,MAAM,iCAAgC,CAAC;AAC5E,YAAM,aAAa,KAAK,WAAW;AACnC,aAAO,MAAM,aAAa,OAAO;AACjC;AAAA,IACF;AAEA,QAAI,aAAa,KAAK,MAAM;AAC5B,QAAI,cAAc,MAAM;AACtB,mBAAa,MAAM,KAAK,iBAAiB;AACzC,WAAK,MAAM,gBAAgB,UAAU;AACrC,UAAI,cAAc,KAAM;AAAA,IAC1B;AAEA,UAAM,WAAW,MAAM,WAAW,eAAe;AACjD,UAAM,SAAS,MAAM,UAAU;AAC/B,UAAM,SAAS,MAAM;AACrB,SAAK,MAAM,aAAa;AAAA,EAC1B;AAAA,EAEA,MAAM,cAAc;AAClB,UAAM,aAAa,KAAK,eAAe;AAEvC,UAAM,aAAa,MAAM,KAAK,iBAAiB;AAC/C,SAAK,MAAM,gBAAgB,UAAU;AACrC,QAAI,cAAc,KAAM;AAExB,UAAM,WAAW,MAAM,WAAW,eAAe;AACjD,UAAM,SAAS,MAAM,UAAU;AAC/B,UAAM,SAAS,MAAM;AACrB,SAAK,MAAM,aAAa;AAAA,EAC1B;AAAA,EAEA,MAAM,mBAAyD;AAC7D,UAAM,aAAoC;AAAA,MACxC,OAAO;AAAA,QACL;AAAA,UACE,aAAa;AAAA,UACb,QAAQ,EAAC,oBAAoB,CAAC,OAAO,EAAC;AAAA,QACxC;AAAA,MACF;AAAA,MACA,eAAe,KAAK,WAAW;AAAA,IACjC;AAEA,UAAM,aAAa,MAAM,OAAO,mBAAmB,UAAU;AAC7D,SAAK,MAAM,gBAAgB,UAAU;AACrC,WAAO;AAAA,EACT;AAAA,EAEA,uBAAuB,UAAkB,OAAY;AACnD,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,UAAU;AAAA,QACR,GAAG,KAAK,MAAM,SAAS;AAAA,QACvB,CAAC,QAAQ,GAAG;AAAA,MACd;AAAA,IACF;AACA,SAAK,MAAM,eAAe,YAAY;AAAA,EACxC;AAAA,EAGA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,MAAM,oBAAoB,CAAC;AACjC,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,YAAY;AAAA,QACrB,WAAU;AAAA,QAGV,+BAAC,aAAQ,WAAU,0BACjB;AAAA,8BAAC,QAAI,YAAE,YAAY,GAAE;AAAA,UACrB,oBAAC,OACE,YAAE,uCAAuC,GAC5C;AAAA,UAEA,qBAAC,SACC;AAAA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,IAAI,SAAS,sBAAsB;AAAA,gBAC1C,WAAW,IAAI,SAAS;AAAA,gBACxB,QAAQ,KAAK,MAAM,SAAS,YAAY,CAAC,GAAU,oCAAoC;AAAA,gBACvF,UAAU,KAAK,uBAAuB,KAAK,MAAM,oCAAoC;AAAA;AAAA,YACvF;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,IAAI,SAAS,2BAA2B;AAAA,gBAC/C,WAAW,IAAI,SAAS;AAAA,gBACxB,QAAQ,KAAK,MAAM,SAAS,YAAY,CAAC,GAAU,qCAAqC;AAAA,gBACxF,UAAU,KAAK,uBAAuB,KAAK,MAAM,qCAAqC;AAAA;AAAA,YACxF;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,IAAI,SAAS,oBAAoB;AAAA,gBACxC,WAAW,IAAI,SAAS;AAAA,gBACxB,QAAQ,KAAK,MAAM,SAAS,YAAY,CAAC,GAAU,8BAA8B;AAAA,gBACjF,UAAU,KAAK,uBAAuB,KAAK,MAAM,8BAA8B;AAAA;AAAA,YACjF;AAAA,aACF;AAAA,UAEA,qBAAC,SAAI,WAAU,iCACb;AAAA,iCAAC,eAAY,SAAS,KAAK,UAAU,KAAK,IAAI,GAC5C;AAAA,kCAAC,UAAM;AAAA,cACN,EAAE,MAAM;AAAA,eACX;AAAA,YACC,+BACC,qBAAC,eAAY,SAAS,KAAK,YAAY,KAAK,IAAI,GAC9C;AAAA,kCAAC,UAAM;AAAA,cACN,EAAE,SAAS;AAAA,eACd;AAAA,YAGF,qBAAC,eAAY,SAAS,KAAK,WAAW,KAAK,IAAI,GAC7C;AAAA,kCAAC,SAAK;AAAA,cACL,EAAE,aAAa;AAAA,eAClB;AAAA,aACF;AAAA,WACF;AAAA;AAAA,IAEF;AAAA,EACF;AACF;AAEA,MAAM,cAAc,gBAAgB,EAAE,mBAAmB;AACzD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"66cf81ab709608eec5a644a6a17a019c5afe48ce"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Qr=function(){return l},l}Qr();const AR=(Qr().s[0]++,zue),cR=(Qr().s[1]++,typeof window.showSaveFilePicker=="function");class Zue extends Xn.Component{tokenizedStyle(){return Qr().f[0]++,Qr().s[2]++,KF(vc.stripAccessTokens(vc.replaceAccessTokens(this.props.mapStyle)))}exportName(){return Qr().f[1]++,Qr().s[3]++,this.props.mapStyle.name?(Qr().b[0][0]++,Qr().s[4]++,Fue(this.props.mapStyle.name,{replacement:"_",remove:/[*\-+~.()'"!:]/g,lower:!0})):(Qr().b[0][1]++,Qr().s[5]++,this.props.mapStyle.id)}createHtml(){Qr().f[2]++;const e=(Qr().s[6]++,this.tokenizedStyle()),t=(Qr().s[7]++,Qr().b[1][0]++,this.props.mapStyle.name||(Qr().b[1][1]++,this.props.t("Map"))),r=(Qr().s[8]++,`<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>${t}</title>
  <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />
  <script src="https://unpkg.com/maplibre-gl@${AR}/dist/maplibre-gl.js"><\/script>
  <link href="https://unpkg.com/maplibre-gl@${AR}/dist/maplibre-gl.css" rel="stylesheet" />
  <style>
    body { margin: 0; padding: 0; }
    #map { position: absolute; top: 0; bottom: 0; width: 100%; }
  </style>
</head>
<body>
  <div id="map"></div>
  <script>
      const map = new maplibregl.Map({
         container: 'map',
         style: ${e},
      });
      map.addControl(new maplibregl.NavigationControl());
  <\/script>
</body>
</html>
`),i=(Qr().s[9]++,new Blob([r],{type:"text/html;charset=utf-8"})),s=(Qr().s[10]++,this.exportName());Qr().s[11]++,uR.saveAs(i,s+".html")}async saveStyle(){Qr().f[3]++;const e=(Qr().s[12]++,this.tokenizedStyle());if(Qr().s[13]++,cR)Qr().b[2][1]++;else{Qr().b[2][0]++;const i=(Qr().s[14]++,new Blob([e],{type:"application/json;charset=utf-8"})),s=(Qr().s[15]++,this.exportName());Qr().s[16]++,uR.saveAs(i,s+".json"),Qr().s[17]++;return}let t=(Qr().s[18]++,this.props.fileHandle);if(Qr().s[19]++,t==null)if(Qr().b[3][0]++,Qr().s[20]++,t=await this.createFileHandle(),Qr().s[21]++,this.props.onSetFileHandle(t),Qr().s[22]++,t==null){Qr().b[4][0]++,Qr().s[23]++;return}else Qr().b[4][1]++;else Qr().b[3][1]++;const r=(Qr().s[24]++,await t.createWritable());Qr().s[25]++,await r.write(e),Qr().s[26]++,await r.close(),Qr().s[27]++,this.props.onOpenToggle()}async saveStyleAs(){Qr().f[4]++;const e=(Qr().s[28]++,this.tokenizedStyle()),t=(Qr().s[29]++,await this.createFileHandle());if(Qr().s[30]++,this.props.onSetFileHandle(t),Qr().s[31]++,t==null){Qr().b[5][0]++,Qr().s[32]++;return}else Qr().b[5][1]++;const r=(Qr().s[33]++,await t.createWritable());Qr().s[34]++,await r.write(e),Qr().s[35]++,await r.close(),Qr().s[36]++,this.props.onOpenToggle()}async createFileHandle(){Qr().f[5]++;const e=(Qr().s[37]++,{types:[{description:"json",accept:{"application/json":[".json"]}}],suggestedName:this.exportName()}),t=(Qr().s[38]++,await window.showSaveFilePicker(e));return Qr().s[39]++,this.props.onSetFileHandle(t),Qr().s[40]++,t}changeMetadataProperty(e,t){Qr().f[6]++;const r=(Qr().s[41]++,{...this.props.mapStyle,metadata:{...this.props.mapStyle.metadata,[e]:t}});Qr().s[42]++,this.props.onStyleChanged(r)}render(){Qr().f[7]++;const e=(Qr().s[43]++,this.props.t),t=(Qr().s[44]++,Rj(e));return Qr().s[45]++,ue.jsx(Y0,{"data-wd-key":"modal:export",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:e("Save Style"),className:"maputnik-export-modal",children:ue.jsxs("section",{className:"maputnik-modal-section",children:[ue.jsx("h1",{children:e("Save Style")}),ue.jsx("p",{children:e("Save the JSON style to your computer.")}),ue.jsxs("div",{children:[ue.jsx(Np,{label:t.maputnik.maptiler_access_token.label,fieldSpec:t.maputnik.maptiler_access_token,value:(Qr().b[6][0]++,this.props.mapStyle.metadata||(Qr().b[6][1]++,{}))["maputnik:openmaptiles_access_token"],onChange:this.changeMetadataProperty.bind(this,"maputnik:openmaptiles_access_token")}),ue.jsx(Np,{label:t.maputnik.thunderforest_access_token.label,fieldSpec:t.maputnik.thunderforest_access_token,value:(Qr().b[7][0]++,this.props.mapStyle.metadata||(Qr().b[7][1]++,{}))["maputnik:thunderforest_access_token"],onChange:this.changeMetadataProperty.bind(this,"maputnik:thunderforest_access_token")}),ue.jsx(Np,{label:t.maputnik.stadia_access_token.label,fieldSpec:t.maputnik.stadia_access_token,value:(Qr().b[8][0]++,this.props.mapStyle.metadata||(Qr().b[8][1]++,{}))["maputnik:stadia_access_token"],onChange:this.changeMetadataProperty.bind(this,"maputnik:stadia_access_token")})]}),ue.jsxs("div",{className:"maputnik-modal-export-buttons",children:[ue.jsxs(Ha,{onClick:this.saveStyle.bind(this),children:[ue.jsx(WE,{}),e("Save")]}),(Qr().b[9][0]++,cR&&(Qr().b[9][1]++,ue.jsxs(Ha,{onClick:this.saveStyleAs.bind(this),children:[ue.jsx(WE,{}),e("Save as")]}))),ue.jsxs(Ha,{onClick:this.createHtml.bind(this),children:[ue.jsx(VV,{}),e("Create HTML")]})]})]})})}}const Xue=(Qr().s[46]++,zs()(Zue));function L2(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldDynamicArray.tsx",e="950dd35e62562a3439b74678b95f406e749c6958",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldDynamicArray.tsx",statementMap:{0:{start:{line:7,column:4},end:{line:7,column:139}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:8,column:3}},line:6}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldDynamicArray.tsx"],names:[],mappings:"AAWM;AAXN,OAAO,WAAW;AAClB,OAAO,uBAA2E;AAClF,OAAO,cAAc;AAMrB,qBAAqB,0BAA0B,MAAM,UAAkC;AAAA,EACrF,SAAS;AACP,WAAO,oBAAC,YAAS,OAAO,KAAK,MAAM,OACjC,8BAAC,qBAAmB,GAAG,KAAK,OAAO,GACrC;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"950dd35e62562a3439b74678b95f406e749c6958"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return L2=function(){return l},l}L2();class Uj extends Xn.Component{render(){return L2().f[0]++,L2().s[0]++,ue.jsx(EC,{label:this.props.label,children:ue.jsx(xj,{...this.props})})}}function U2(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldCheckbox.tsx",e="a27c35e986d22656fa80c276efb67df518853ac2",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldCheckbox.tsx",statementMap:{0:{start:{line:7,column:4},end:{line:7,column:132}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:8,column:3}},line:6}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldCheckbox.tsx"],names:[],mappings:"AAaM;AAbN,OAAO,WAAW;AAClB,OAAO,WAAW;AAClB,OAAO,mBAAyC;AAQhD,qBAAqB,sBAAsB,MAAM,UAA8B;AAAA,EAC7E,SAAS;AACP,WAAO,oBAAC,SAAM,OAAO,KAAK,MAAM,OAC9B,8BAAC,iBAAe,GAAG,KAAK,OAAO,GACjC;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a27c35e986d22656fa80c276efb67df518853ac2"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return U2=function(){return l},l}U2();class Jue extends Xn.Component{render(){return U2().f[0]++,U2().s[0]++,ue.jsx(la,{label:this.props.label,children:ue.jsx(NO,{...this.props})})}}function Wn(){var n="/home/runner/work/maputnik/maputnik/src/components/ModalSourcesTypeEditor.tsx",e="dab453a2f232d0ad88af178ab26f5244dd676038",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ModalSourcesTypeEditor.tsx",statementMap:{0:{start:{line:15,column:14},end:{line:15,column:26}},1:{start:{line:16,column:4},end:{line:30,column:9}},2:{start:{line:23,column:29},end:{line:26,column:12}},3:{start:{line:35,column:4},end:{line:38,column:7}},4:{start:{line:41,column:18},end:{line:41,column:47}},5:{start:{line:42,column:4},end:{line:51,column:6}},6:{start:{line:54,column:14},end:{line:54,column:26}},7:{start:{line:55,column:4},end:{line:99,column:9}},8:{start:{line:66,column:32},end:{line:69,column:12}},9:{start:{line:80,column:33},end:{line:83,column:12}},10:{start:{line:92,column:33},end:{line:95,column:12}},11:{start:{line:102,column:27},end:{line:107,column:1}},12:{start:{line:102,column:34},end:{line:107,column:1}},13:{start:{line:110,column:14},end:{line:110,column:26}},14:{start:{line:111,column:24},end:{line:118,column:5}},15:{start:{line:112,column:26},end:{line:112,column:64}},16:{start:{line:113,column:6},end:{line:113,column:29}},17:{start:{line:114,column:6},end:{line:117,column:9}},18:{start:{line:119,column:4},end:{line:146,column:9}},19:{start:{line:126,column:29},end:{line:129,column:12}},20:{start:{line:133,column:8},end:{line:144,column:10}},21:{start:{line:141,column:31},end:{line:141,column:52}},22:{start:{line:151,column:14},end:{line:151,column:26}},23:{start:{line:152,column:24},end:{line:159,column:5}},24:{start:{line:153,column:26},end:{line:153,column:64}},25:{start:{line:154,column:6},end:{line:154,column:29}},26:{start:{line:155,column:6},end:{line:158,column:9}},27:{start:{line:160,column:23},end:{line:165,column:5}},28:{start:{line:161,column:6},end:{line:164,column:9}},29:{start:{line:166,column:4},end:{line:192,column:9}},30:{start:{line:179,column:8},end:{line:190,column:10}},31:{start:{line:187,column:31},end:{line:187,column:52}},32:{start:{line:197,column:14},end:{line:197,column:26}},33:{start:{line:198,column:4},end:{line:209,column:6}},34:{start:{line:204,column:28},end:{line:207,column:10}},35:{start:{line:214,column:14},end:{line:214,column:26}},36:{start:{line:215,column:4},end:{line:247,column:9}},37:{start:{line:227,column:12},end:{line:230,column:15}},38:{start:{line:240,column:12},end:{line:243,column:15}},39:{start:{line:252,column:14},end:{line:252,column:26}},40:{start:{line:253,column:4},end:{line:268,column:9}},41:{start:{line:261,column:29},end:{line:264,column:12}},42:{start:{line:273,column:14},end:{line:273,column:26}},43:{start:{line:274,column:24},end:{line:280,column:5}},44:{start:{line:281,column:4},end:{line:345,column:5}},45:{start:{line:283,column:8},end:{line:283,column:79}},46:{start:{line:285,column:8},end:{line:285,column:85}},47:{start:{line:287,column:8},end:{line:287,column:77}},48:{start:{line:289,column:8},end:{line:289,column:76}},49:{start:{line:291,column:8},end:{line:291,column:77}},50:{start:{line:293,column:8},end:{line:305,column:13}},51:{start:{line:298,column:36},end:{line:301,column:14}},52:{start:{line:307,column:8},end:{line:307,column:77}},53:{start:{line:309,column:8},end:{line:336,column:13}},54:{start:{line:315,column:38},end:{line:318,column:16}},55:{start:{line:329,column:38},end:{line:332,column:16}},56:{start:{line:338,column:8},end:{line:338,column:76}},57:{start:{line:340,column:8},end:{line:340,column:74}},58:{start:{line:342,column:8},end:{line:342,column:74}},59:{start:{line:344,column:8},end:{line:344,column:20}},60:{start:{line:348,column:31},end:{line:348,column:80}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:11},end:{line:31,column:3}},line:14},1:{name:"(anonymous_1)",decl:{start:{line:23,column:20},end:{line:23,column:21}},loc:{start:{line:23,column:29},end:{line:26,column:12}},line:23},2:{name:"(anonymous_2)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:24},end:{line:39,column:3}},line:34},3:{name:"(anonymous_3)",decl:{start:{line:40,column:2},end:{line:40,column:3}},loc:{start:{line:40,column:19},end:{line:52,column:3}},line:40},4:{name:"(anonymous_4)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:11},end:{line:100,column:3}},line:53},5:{name:"(anonymous_5)",decl:{start:{line:66,column:20},end:{line:66,column:21}},loc:{start:{line:66,column:32},end:{line:69,column:12}},line:66},6:{name:"(anonymous_6)",decl:{start:{line:80,column:20},end:{line:80,column:21}},loc:{start:{line:80,column:33},end:{line:83,column:12}},line:80},7:{name:"(anonymous_7)",decl:{start:{line:92,column:20},end:{line:92,column:21}},loc:{start:{line:92,column:33},end:{line:95,column:12}},line:92},8:{name:"(anonymous_8)",decl:{start:{line:102,column:27},end:{line:102,column:28}},loc:{start:{line:102,column:34},end:{line:107,column:1}},line:102},9:{name:"(anonymous_9)",decl:{start:{line:109,column:2},end:{line:109,column:3}},loc:{start:{line:109,column:11},end:{line:147,column:3}},line:109},10:{name:"(anonymous_10)",decl:{start:{line:111,column:24},end:{line:111,column:25}},loc:{start:{line:111,column:38},end:{line:118,column:5}},line:111},11:{name:"(anonymous_11)",decl:{start:{line:126,column:20},end:{line:126,column:21}},loc:{start:{line:126,column:29},end:{line:129,column:12}},line:126},12:{name:"(anonymous_12)",decl:{start:{line:132,column:32},end:{line:132,column:33}},loc:{start:{line:132,column:57},end:{line:145,column:7}},line:132},13:{name:"(anonymous_13)",decl:{start:{line:141,column:22},end:{line:141,column:23}},loc:{start:{line:141,column:31},end:{line:141,column:52}},line:141},14:{name:"(anonymous_14)",decl:{start:{line:150,column:2},end:{line:150,column:3}},loc:{start:{line:150,column:11},end:{line:193,column:3}},line:150},15:{name:"(anonymous_15)",decl:{start:{line:152,column:24},end:{line:152,column:25}},loc:{start:{line:152,column:38},end:{line:159,column:5}},line:152},16:{name:"(anonymous_16)",decl:{start:{line:160,column:23},end:{line:160,column:24}},loc:{start:{line:160,column:33},end:{line:165,column:5}},line:160},17:{name:"(anonymous_17)",decl:{start:{line:178,column:32},end:{line:178,column:33}},loc:{start:{line:178,column:57},end:{line:191,column:7}},line:178},18:{name:"(anonymous_18)",decl:{start:{line:187,column:22},end:{line:187,column:23}},loc:{start:{line:187,column:31},end:{line:187,column:52}},line:187},19:{name:"(anonymous_19)",decl:{start:{line:196,column:2},end:{line:196,column:3}},loc:{start:{line:196,column:11},end:{line:210,column:3}},line:196},20:{name:"(anonymous_20)",decl:{start:{line:204,column:18},end:{line:204,column:19}},loc:{start:{line:204,column:28},end:{line:207,column:10}},line:204},21:{name:"(anonymous_21)",decl:{start:{line:213,column:2},end:{line:213,column:3}},loc:{start:{line:213,column:11},end:{line:248,column:3}},line:213},22:{name:"(anonymous_22)",decl:{start:{line:226,column:20},end:{line:226,column:21}},loc:{start:{line:226,column:30},end:{line:231,column:11}},line:226},23:{name:"(anonymous_23)",decl:{start:{line:239,column:20},end:{line:239,column:21}},loc:{start:{line:239,column:33},end:{line:244,column:11}},line:239},24:{name:"(anonymous_24)",decl:{start:{line:251,column:2},end:{line:251,column:3}},loc:{start:{line:251,column:11},end:{line:269,column:3}},line:251},25:{name:"(anonymous_25)",decl:{start:{line:261,column:20},end:{line:261,column:21}},loc:{start:{line:261,column:29},end:{line:264,column:12}},line:261},26:{name:"(anonymous_26)",decl:{start:{line:272,column:2},end:{line:272,column:3}},loc:{start:{line:272,column:11},end:{line:346,column:3}},line:272},27:{name:"(anonymous_27)",decl:{start:{line:298,column:22},end:{line:298,column:23}},loc:{start:{line:298,column:36},end:{line:301,column:14}},line:298},28:{name:"(anonymous_28)",decl:{start:{line:315,column:24},end:{line:315,column:25}},loc:{start:{line:315,column:38},end:{line:318,column:16}},line:315},29:{name:"(anonymous_29)",decl:{start:{line:329,column:24},end:{line:329,column:25}},loc:{start:{line:329,column:38},end:{line:332,column:16}},line:329}},branchMap:{0:{loc:{start:{line:41,column:18},end:{line:41,column:47}},type:"binary-expr",locations:[{start:{line:41,column:18},end:{line:41,column:41}},{start:{line:41,column:45},end:{line:41,column:47}}],line:41},1:{loc:{start:{line:79,column:17},end:{line:79,column:47}},type:"binary-expr",locations:[{start:{line:79,column:17},end:{line:79,column:42}},{start:{line:79,column:46},end:{line:79,column:47}}],line:79},2:{loc:{start:{line:91,column:17},end:{line:91,column:48}},type:"binary-expr",locations:[{start:{line:91,column:17},end:{line:91,column:42}},{start:{line:91,column:46},end:{line:91,column:48}}],line:91},3:{loc:{start:{line:263,column:17},end:{line:263,column:72}},type:"cond-expr",locations:[{start:{line:263,column:48},end:{line:263,column:51}},{start:{line:263,column:54},end:{line:263,column:72}}],line:263},4:{loc:{start:{line:281,column:4},end:{line:345,column:5}},type:"switch",locations:[{start:{line:282,column:6},end:{line:283,column:79}},{start:{line:284,column:6},end:{line:285,column:85}},{start:{line:286,column:6},end:{line:287,column:77}},{start:{line:288,column:6},end:{line:289,column:76}},{start:{line:290,column:6},end:{line:291,column:77}},{start:{line:292,column:6},end:{line:305,column:13}},{start:{line:306,column:6},end:{line:307,column:77}},{start:{line:308,column:6},end:{line:336,column:13}},{start:{line:337,column:6},end:{line:338,column:76}},{start:{line:339,column:6},end:{line:340,column:74}},{start:{line:341,column:6},end:{line:342,column:74}},{start:{line:343,column:6},end:{line:344,column:20}}],line:281},5:{loc:{start:{line:302,column:19},end:{line:302,column:86}},type:"binary-expr",locations:[{start:{line:302,column:19},end:{line:302,column:45}},{start:{line:302,column:49},end:{line:302,column:86}}],line:302},6:{loc:{start:{line:319,column:21},end:{line:319,column:92}},type:"binary-expr",locations:[{start:{line:319,column:21},end:{line:319,column:47}},{start:{line:319,column:51},end:{line:319,column:92}}],line:319},7:{loc:{start:{line:333,column:21},end:{line:333,column:92}},type:"binary-expr",locations:[{start:{line:333,column:21},end:{line:333,column:47}},{start:{line:333,column:51},end:{line:333,column:92}}],line:333}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0,0,0,0,0,0,0,0,0,0,0],5:[0,0],6:[0,0],7:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ModalSourcesTypeEditor.tsx"],names:[],mappings:"AA2BW,SACL,KADK;AA3BX,OAAO,WAAW;AAClB,SAAQ,cAAa;AACrB,OAAO,WAAW;AAClB,OAAO,cAAc;AACrB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,uBAAuB;AAC9B,OAAO,gBAAgB;AACvB,OAAO,eAAe;AACtB,OAAO,mBAAmB;AAC1B,SAA0B,uBAAuB;AAcjD,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SACN;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,cAAc;AAAA,UACvB,WAAW,OAAO,cAAc;AAAA,UAChC,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,UAAU,SAAO,KAAK,MAAM,SAAS;AAAA,YACnC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA;AAAA,MACH;AAAA,MACC,KAAK,MAAM;AAAA,OACd;AAAA,EACF;AACF;AAaA,MAAM,4BAA4B,MAAM,UAAoC;AAAA,EAC1E,eAAe,OAAiB;AAC9B,SAAK,MAAM,SAAS;AAAA,MAClB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,iBAAiB;AACf,UAAM,QAAQ,KAAK,MAAM,OAAO,SAAS,CAAC;AAC1C,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,OAAO,KAAK,MAAM,EAAE,UAAU;AAAA,QAC9B,WAAW,OAAO,cAAc;AAAA,QAChC,MAAK;AAAA,QACL,OAAO;AAAA,QACP,UAAU,KAAK,eAAe,KAAK,IAAI;AAAA;AAAA,IACzC;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SACL;AAAA,WAAK,eAAe;AAAA,MACrB;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,aAAa;AAAA,UACtB,WAAW,OAAO,cAAc;AAAA,UAChC,SAAS;AAAA,YACP,CAAC,OAAO,mCAAmC;AAAA,YAC3C,CAAC,OAAO,yBAAyB;AAAA,UACnC;AAAA,UACA,UAAU,YAAU,KAAK,MAAM,SAAS;AAAA,YACtC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA,UACD,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,eAAY;AAAA;AAAA,MACd;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,UAAU;AAAA,UACnB,WAAW,OAAO,cAAc;AAAA,UAChC,OAAO,KAAK,MAAM,OAAO,WAAW;AAAA,UACpC,UAAU,aAAW,KAAK,MAAM,SAAS;AAAA,YACvC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA;AAAA,MACH;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,UAAU;AAAA,UACnB,WAAW,OAAO,cAAc;AAAA,UAChC,OAAO,KAAK,MAAM,OAAO,WAAW;AAAA,UACpC,UAAU,aAAW,KAAK,MAAM,SAAS;AAAA,YACvC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA;AAAA,MACH;AAAA,MACC,KAAK,MAAM;AAAA,OACd;AAAA,EAEF;AACF;AAEA,MAAM,qBAAyE,CAAC,MAAO;AAAA,EACrF,EAAE,OAAO,EAAE,gBAAgB,GAAG,KAAK,WAAW;AAAA,EAC9C,EAAE,OAAO,EAAE,iBAAiB,GAAG,KAAK,YAAY;AAAA,EAChD,EAAE,OAAO,EAAE,oBAAoB,GAAG,KAAK,eAAe;AAAA,EACtD,EAAE,OAAO,EAAE,mBAAmB,GAAG,KAAK,cAAc;AACtD;AAUA,MAAM,0BAA0B,MAAM,UAAkC;AAAA,EACtE,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,cAAc,CAAC,KAAa,QAA0B;AAC1D,YAAM,cAAc,KAAK,MAAM,OAAO,YAAY,MAAM,CAAC;AACzD,kBAAY,GAAG,IAAI;AAEnB,WAAK,MAAM,SAAS;AAAA,QAClB,GAAG,KAAK,MAAM;AAAA,QACd;AAAA,MACF,CAAC;AAAA,IACH;AAEA,WAAO,qBAAC,SACN;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,WAAW;AAAA,UACpB,WAAW,OAAO,aAAa;AAAA,UAC/B,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,UAAU,SAAO,KAAK,MAAM,SAAS;AAAA,YACnC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA;AAAA,MACH;AAAA,MACC,mBAAmB,CAAC,EAAE,IAAI,CAAC,EAAC,OAAO,IAAG,GAAG,QAAQ;AAChD,eACE;AAAA,UAAC;AAAA;AAAA,YACC;AAAA,YAEA,QAAQ;AAAA,YACR,MAAK;AAAA,YACL,OAAO,KAAK,MAAM,OAAO,YAAY,GAAG;AAAA,YACxC,SAAS,CAAC,GAAG,CAAC;AAAA,YACd,UAAU,CAAC,QAA0B,YAAY,KAAK,GAAG;AAAA;AAAA,UALpD;AAAA,QAMP;AAAA,MAEJ,CAAC;AAAA,OACH;AAAA,EACF;AACF;AAUA,MAAM,0BAA0B,MAAM,UAAkC;AAAA,EACtE,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,cAAc,CAAC,KAAa,QAA0B;AAC1D,YAAM,cAAc,KAAK,MAAM,OAAO,YAAY,MAAM,CAAC;AACzD,kBAAY,GAAG,IAAI;AAEnB,WAAK,MAAM,SAAS;AAAA,QAClB,GAAG,KAAK,MAAM;AAAA,QACd;AAAA,MACF,CAAC;AAAA,IACH;AAEA,UAAM,aAAa,CAAC,SAAmB;AACrC,WAAK,MAAM,SAAS;AAAA,QAClB,GAAG,KAAK,MAAM;AAAA,QACd;AAAA,MACF,CAAC;AAAA,IACH;AAEA,WAAO,qBAAC,SACN;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,WAAW;AAAA,UACpB,WAAW,OAAO,aAAa;AAAA,UAC/B,MAAK;AAAA,UACL,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,SAAS,CAAC;AAAA,UACV,UAAU;AAAA;AAAA,MACZ;AAAA,MACC,mBAAmB,CAAC,EAAE,IAAI,CAAC,EAAC,OAAO,IAAG,GAAG,QAAQ;AAChD,eACE;AAAA,UAAC;AAAA;AAAA,YACC;AAAA,YAEA,QAAQ;AAAA,YACR,MAAK;AAAA,YACL,OAAO,KAAK,MAAM,OAAO,YAAY,GAAG;AAAA,YACxC,SAAS,CAAC,GAAG,CAAC;AAAA,YACd,UAAU,CAAC,QAA0B,YAAY,KAAK,GAAG;AAAA;AAAA,UALpD;AAAA,QAMP;AAAA,MAEJ,CAAC;AAAA,OACH;AAAA,EACF;AACF;AASA,MAAM,+BAA+B,MAAM,UAAuC;AAAA,EAChF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,OAAO,EAAE,aAAa;AAAA,QACtB,WAAW,OAAO,eAAe;AAAA,QACjC,OAAO,KAAK,MAAM,OAAO;AAAA,QACzB,UAAU,UAAQ,KAAK,MAAM,SAAS;AAAA,UACpC,GAAG,KAAK,MAAM;AAAA,UACd;AAAA,QACF,CAAC;AAAA;AAAA,IACH;AAAA,EACF;AACF;AAUA,MAAM,qCAAqC,MAAM,UAA6C;AAAA,EAC5F,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SACN;AAAA,0BAAC,SAAM,OAAO,EAAE,SAAS,GAAG,WAAW,OAAO,eAAe,MAC3D;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,WAAW;AAAA,UACX,MAAM;AAAA,YACJ,MAAM;AAAA,YACN,MAAM;AAAA,UACR;AAAA,UACA,MAAM;AAAA,UACN,UAAU,UAAQ;AAChB,iBAAK,MAAM,SAAS;AAAA,cAClB,GAAG,KAAK,MAAM;AAAA,cACd;AAAA,YACF,CAAC;AAAA,UACH;AAAA;AAAA,MACF,GACF;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,SAAS;AAAA,UAClB,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,UAAU,aAAW;AACnB,iBAAK,MAAM,SAAS;AAAA,cAClB,GAAG,KAAK,MAAM;AAAA,cACd;AAAA,YACF,CAAC;AAAA,UACH;AAAA;AAAA,MACF;AAAA,OACF;AAAA,EACF;AACF;AAUA,MAAM,4BAA4B,MAAM,UAAoC;AAAA,EAC1E,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SACN;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,aAAa;AAAA,UACtB,WAAW,OAAO,cAAc;AAAA,UAChC,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,eAAY;AAAA,UACZ,UAAU,CAAC,QAAgB,KAAK,MAAM,SAAS;AAAA,YAC7C,GAAG,KAAK,MAAM;AAAA,YACd,KAAK,IAAI,WAAW,YAAY,IAAI,MAAM,aAAa,GAAG;AAAA,UAC5D,CAAC;AAAA;AAAA,MACH;AAAA,MACC,KAAK,MAAM;AAAA,OACd;AAAA,EACF;AACF;AAQA,MAAM,uCAAuC,MAAM,UAA+C;AAAA,EAChG,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,cAAc;AAAA,MAClB,QAAQ,KAAK,MAAM;AAAA,MACnB,UAAU,KAAK,MAAM;AAAA,MACrB,GAAG,KAAK,MAAM;AAAA,MACd,MAAM,KAAK,MAAM;AAAA,MACjB,QAAQ,KAAK,MAAM;AAAA,IACrB;AACA,YAAO,KAAK,MAAM,MAAM;AAAA,MACxB,KAAK;AAAe,eAAO,oBAAC,0BAAwB,GAAG,aAAa;AAAA,MACpE,KAAK;AAAgB,eAAO,oBAAC,gCAA8B,GAAG,aAAa;AAAA,MAC3E,KAAK;AAAmB,eAAO,oBAAC,wBAAsB,GAAG,aAAa;AAAA,MACtE,KAAK;AAAe,eAAO,oBAAC,uBAAqB,GAAG,aAAa;AAAA,MACjE,KAAK;AAAmB,eAAO,oBAAC,wBAAsB,GAAG,aAAa;AAAA,MACtE,KAAK;AAAe,eAAO,oBAAC,uBAAqB,GAAG,aAClD;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,WAAW;AAAA,YACpB,WAAW,OAAO,cAAc;AAAA,YAChC,UAAU,cAAY,KAAK,MAAM,SAAS;AAAA,cACxC,GAAG,KAAK,MAAM;AAAA,cACd;AAAA,YACF,CAAC;AAAA,YACD,OAAO,KAAK,MAAM,OAAO,YAAY,OAAO,cAAc,SAAS;AAAA,YACnE,eAAY;AAAA;AAAA,QACd,GACF;AAAA,MACA,KAAK;AAAuB,eAAO,oBAAC,wBAAsB,GAAG,aAAa;AAAA,MAC1E,KAAK;AAAsB,eAAO,qBAAC,uBAAqB,GAAG,aACzD;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,WAAW;AAAA,cACpB,WAAW,OAAO,kBAAkB;AAAA,cACpC,UAAU,cAAY,KAAK,MAAM,SAAS;AAAA,gBACxC,GAAG,KAAK,MAAM;AAAA,gBACd;AAAA,cACF,CAAC;AAAA,cACD,OAAO,KAAK,MAAM,OAAO,YAAY,OAAO,kBAAkB,SAAS;AAAA,cACvE,eAAY;AAAA;AAAA,UACd;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,UAAU;AAAA,cACnB,WAAW,OAAO,kBAAkB;AAAA,cACpC,SAAS,OAAO,KAAK,OAAO,kBAAkB,SAAS,MAAM;AAAA,cAC7D,UAAU,cAAY,KAAK,MAAM,SAAS;AAAA,gBACxC,GAAG,KAAK,MAAM;AAAA,gBACd;AAAA,cACF,CAAC;AAAA,cACD,OAAO,KAAK,MAAM,OAAO,YAAY,OAAO,kBAAkB,SAAS;AAAA;AAAA,UACzE;AAAA,WACF;AAAA,MACA,KAAK;AAAkB,eAAO,oBAAC,uBAAqB,GAAG,aAAa;AAAA,MACpE,KAAK;AAAS,eAAO,oBAAC,qBAAmB,GAAG,aAAa;AAAA,MACzD,KAAK;AAAS,eAAO,oBAAC,qBAAmB,GAAG,aAAa;AAAA,MACzD;AAAS,eAAO;AAAA,IAChB;AAAA,EACF;AACF;AAEA,MAAM,yBAAyB,gBAAgB,EAAE,8BAA8B;AAC/E,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"dab453a2f232d0ad88af178ab26f5244dd676038"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Wn=function(){return l},l}Wn();class SS extends Xn.Component{render(){Wn().f[0]++;const e=(Wn().s[0]++,this.props.t);return Wn().s[1]++,ue.jsxs("div",{children:[ue.jsx(Ky,{label:e("TileJSON URL"),fieldSpec:Ms.source_vector.url,value:this.props.source.url,onChange:t=>(Wn().f[1]++,Wn().s[2]++,this.props.onChange({...this.props.source,url:t}))}),this.props.children]})}}class ES extends Xn.Component{changeTileUrls(e){Wn().f[2]++,Wn().s[3]++,this.props.onChange({...this.props.source,tiles:e})}renderTileUrls(){Wn().f[3]++;const e=(Wn().s[4]++,Wn().b[0][0]++,this.props.source.tiles||(Wn().b[0][1]++,[]));return Wn().s[5]++,ue.jsx(Uj,{label:this.props.t("Tile URL"),fieldSpec:Ms.source_vector.tiles,type:"url",value:e,onChange:this.changeTileUrls.bind(this)})}render(){Wn().f[4]++;const e=(Wn().s[6]++,this.props.t);return Wn().s[7]++,ue.jsxs("div",{children:[this.renderTileUrls(),ue.jsx(Jx,{label:e("Scheme Type"),fieldSpec:Ms.source_vector.scheme,options:[["xyz","xyz (Slippy map tilenames scheme)"],["tms","tms (OSGeo spec scheme)"]],onChange:t=>(Wn().f[5]++,Wn().s[8]++,this.props.onChange({...this.props.source,scheme:t})),value:this.props.source.scheme,"data-wd-key":"modal:sources.add.scheme_type"}),ue.jsx(ap,{label:e("Min Zoom"),fieldSpec:Ms.source_vector.minzoom,value:(Wn().b[1][0]++,this.props.source.minzoom||(Wn().b[1][1]++,0)),onChange:t=>(Wn().f[6]++,Wn().s[9]++,this.props.onChange({...this.props.source,minzoom:t}))}),ue.jsx(ap,{label:e("Max Zoom"),fieldSpec:Ms.source_vector.maxzoom,value:(Wn().b[2][0]++,this.props.source.maxzoom||(Wn().b[2][1]++,22)),onChange:t=>(Wn().f[7]++,Wn().s[10]++,this.props.onChange({...this.props.source,maxzoom:t}))}),this.props.children]})}}Wn().s[11]++;const zj=n=>(Wn().f[8]++,Wn().s[12]++,[{label:n("Coord top left"),key:"top left"},{label:n("Coord top right"),key:"top right"},{label:n("Coord bottom right"),key:"bottom right"},{label:n("Coord bottom left"),key:"bottom left"}]);class eAe extends Xn.Component{render(){Wn().f[9]++;const e=(Wn().s[13]++,this.props.t);Wn().s[14]++;const t=(r,i)=>{Wn().f[10]++;const s=(Wn().s[15]++,this.props.source.coordinates.slice(0));Wn().s[16]++,s[r]=i,Wn().s[17]++,this.props.onChange({...this.props.source,coordinates:s})};return Wn().s[18]++,ue.jsxs("div",{children:[ue.jsx(Ky,{label:e("Image URL"),fieldSpec:Ms.source_image.url,value:this.props.source.url,onChange:r=>(Wn().f[11]++,Wn().s[19]++,this.props.onChange({...this.props.source,url:r}))}),zj(e).map(({label:r,key:i},s)=>(Wn().f[12]++,Wn().s[20]++,ue.jsx(k2,{label:r,length:2,type:"number",value:this.props.source.coordinates[s],default:[0,0],onChange:l=>(Wn().f[13]++,Wn().s[21]++,t(s,l))},i)))]})}}class tAe extends Xn.Component{render(){Wn().f[14]++;const e=(Wn().s[22]++,this.props.t);Wn().s[23]++;const t=(i,s)=>{Wn().f[15]++;const l=(Wn().s[24]++,this.props.source.coordinates.slice(0));Wn().s[25]++,l[i]=s,Wn().s[26]++,this.props.onChange({...this.props.source,coordinates:l})};Wn().s[27]++;const r=i=>{Wn().f[16]++,Wn().s[28]++,this.props.onChange({...this.props.source,urls:i})};return Wn().s[29]++,ue.jsxs("div",{children:[ue.jsx(Uj,{label:e("Video URL"),fieldSpec:Ms.source_video.urls,type:"string",value:this.props.source.urls,default:[],onChange:r}),zj(e).map(({label:i,key:s},l)=>(Wn().f[17]++,Wn().s[30]++,ue.jsx(k2,{label:i,length:2,type:"number",value:this.props.source.coordinates[l],default:[0,0],onChange:o=>(Wn().f[18]++,Wn().s[31]++,t(l,o))},s)))]})}}class nAe extends Xn.Component{render(){Wn().f[19]++;const e=(Wn().s[32]++,this.props.t);return Wn().s[33]++,ue.jsx(Ky,{label:e("GeoJSON URL"),fieldSpec:Ms.source_geojson.data,value:this.props.source.data,onChange:t=>(Wn().f[20]++,Wn().s[34]++,this.props.onChange({...this.props.source,data:t}))})}}class rAe extends Xn.Component{render(){Wn().f[21]++;const e=(Wn().s[35]++,this.props.t);return Wn().s[36]++,ue.jsxs("div",{children:[ue.jsx(la,{label:e("GeoJSON"),fieldSpec:Ms.source_geojson.data,children:ue.jsx(_O,{layer:this.props.source.data,maxHeight:200,mode:{name:"javascript",json:!0},lint:!0,onChange:t=>{Wn().f[22]++,Wn().s[37]++,this.props.onChange({...this.props.source,data:t})}})}),ue.jsx(Jue,{label:e("Cluster"),value:this.props.source.cluster,onChange:t=>{Wn().f[23]++,Wn().s[38]++,this.props.onChange({...this.props.source,cluster:t})}})]})}}class iAe extends Xn.Component{render(){Wn().f[24]++;const e=(Wn().s[39]++,this.props.t);return Wn().s[40]++,ue.jsxs("div",{children:[ue.jsx(Ky,{label:e("PMTiles URL"),fieldSpec:Ms.source_vector.url,value:this.props.source.url,"data-wd-key":"modal:sources.add.source_url",onChange:t=>(Wn().f[25]++,Wn().s[41]++,this.props.onChange({...this.props.source,url:t.startsWith("pmtiles://")?(Wn().b[3][0]++,t):(Wn().b[3][1]++,`pmtiles://${t}`)}))}),this.props.children]})}}class oAe extends Xn.Component{render(){Wn().f[26]++;const e=(Wn().s[42]++,this.props.t),t=(Wn().s[43]++,{source:this.props.source,onChange:this.props.onChange,t:this.props.t,i18n:this.props.i18n,tReady:this.props.tReady});switch(Wn().s[44]++,this.props.mode){case"geojson_url":return Wn().b[4][0]++,Wn().s[45]++,ue.jsx(nAe,{...t});case"geojson_json":return Wn().b[4][1]++,Wn().s[46]++,ue.jsx(rAe,{...t});case"tilejson_vector":return Wn().b[4][2]++,Wn().s[47]++,ue.jsx(SS,{...t});case"tile_vector":return Wn().b[4][3]++,Wn().s[48]++,ue.jsx(ES,{...t});case"tilejson_raster":return Wn().b[4][4]++,Wn().s[49]++,ue.jsx(SS,{...t});case"tile_raster":return Wn().b[4][5]++,Wn().s[50]++,ue.jsx(ES,{...t,children:ue.jsx(ap,{label:e("Tile Size"),fieldSpec:Ms.source_raster.tileSize,onChange:r=>(Wn().f[27]++,Wn().s[51]++,this.props.onChange({...this.props.source,tileSize:r})),value:(Wn().b[5][0]++,this.props.source.tileSize||(Wn().b[5][1]++,Ms.source_raster.tileSize.default)),"data-wd-key":"modal:sources.add.tile_size"})});case"tilejson_raster-dem":return Wn().b[4][6]++,Wn().s[52]++,ue.jsx(SS,{...t});case"tilexyz_raster-dem":return Wn().b[4][7]++,Wn().s[53]++,ue.jsxs(ES,{...t,children:[ue.jsx(ap,{label:e("Tile Size"),fieldSpec:Ms.source_raster_dem.tileSize,onChange:r=>(Wn().f[28]++,Wn().s[54]++,this.props.onChange({...this.props.source,tileSize:r})),value:(Wn().b[6][0]++,this.props.source.tileSize||(Wn().b[6][1]++,Ms.source_raster_dem.tileSize.default)),"data-wd-key":"modal:sources.add.tile_size"}),ue.jsx(Jx,{label:e("Encoding"),fieldSpec:Ms.source_raster_dem.encoding,options:Object.keys(Ms.source_raster_dem.encoding.values),onChange:r=>(Wn().f[29]++,Wn().s[55]++,this.props.onChange({...this.props.source,encoding:r})),value:(Wn().b[7][0]++,this.props.source.encoding||(Wn().b[7][1]++,Ms.source_raster_dem.encoding.default))})]});case"pmtiles_vector":return Wn().b[4][8]++,Wn().s[56]++,ue.jsx(iAe,{...t});case"image":return Wn().b[4][9]++,Wn().s[57]++,ue.jsx(eAe,{...t});case"video":return Wn().b[4][10]++,Wn().s[58]++,ue.jsx(tAe,{...t});default:return Wn().b[4][11]++,Wn().s[59]++,null}}}const jj=(Wn().s[60]++,zs()(oAe));function hp(){var n="/home/runner/work/maputnik/maputnik/src/libs/source.ts",e="315b9927ffd3b5bf51669bb9e53779783a451930",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/source.ts",statementMap:{0:{start:{line:2,column:27},end:{line:2,column:50}},1:{start:{line:3,column:2},end:{line:3,column:36}},2:{start:{line:4,column:2},end:{line:7,column:4}},3:{start:{line:10,column:2},end:{line:10,column:50}},4:{start:{line:13,column:25},end:{line:16,column:3}},5:{start:{line:17,column:2},end:{line:20,column:4}}},fnMap:{0:{name:"deleteSource",decl:{start:{line:1,column:16},end:{line:1,column:28}},loc:{start:{line:1,column:49},end:{line:8,column:1}},line:1},1:{name:"addSource",decl:{start:{line:9,column:16},end:{line:9,column:25}},loc:{start:{line:9,column:54},end:{line:11,column:1}},line:9},2:{name:"changeSource",decl:{start:{line:12,column:16},end:{line:12,column:28}},loc:{start:{line:12,column:57},end:{line:21,column:1}},line:12}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0},f:{0:0,1:0,2:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/source.ts"],names:[],mappings:"AAEO,gBAAS,aAAa,UAA8B,UAAkB;AAC3E,QAAM,mBAAmB,EAAE,GAAG,SAAS,QAAO;AAC9C,SAAO,iBAAiB,QAAQ;AAChC,SAAO;AAAA,IACL,GAAG;AAAA,IACH,SAAS;AAAA,EACX;AACF;AAGO,gBAAS,UAAU,UAA8B,UAAkB,QAA6B;AACrG,SAAO,aAAa,UAAU,UAAU,MAAM;AAChD;AAEO,gBAAS,aAAa,UAA8B,UAAkB,QAA6B;AACxG,QAAM,iBAAiB;AAAA,IACrB,GAAG,SAAS;AAAA,IACZ,CAAC,QAAQ,GAAG;AAAA,EACd;AACA,SAAO;AAAA,IACL,GAAG;AAAA,IACH,SAAS;AAAA,EACX;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"315b9927ffd3b5bf51669bb9e53779783a451930"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return hp=function(){return l},l}hp();function sAe(n,e){hp().f[0]++;const t=(hp().s[0]++,{...n.sources});return hp().s[1]++,delete t[e],hp().s[2]++,{...n,sources:t}}function dR(n,e,t){return hp().f[1]++,hp().s[3]++,Nj(n,e,t)}function Nj(n,e,t){hp().f[2]++;const r=(hp().s[4]++,{...n.sources,[e]:t});return hp().s[5]++,{...n,sources:r}}const aAe={type:"vector",url:"https://api.maptiler.com/tiles/v3-openmaptiles/tiles.json?key={key}",title:"OpenMapTiles v3"},lAe={type:"vector",url:"https://tile.thunderforest.com/thunderforest.transport-v2.json?apikey={key}",title:"Thunderforest Transport v2"},uAe={type:"vector",url:"https://tile.thunderforest.com/thunderforest.outdoors-v2.json?apikey={key}",title:"Thunderforest Outdoors v2"},AAe={type:"vector",url:"https://s3-eu-west-1.amazonaws.com/tiles.os.uk/v2/data/vector/open-zoomstack/config.json",title:"OS Open Zoomstack v2"},hR={openmaptiles:aAe,thunderforest_transport:lAe,thunderforest_outdoors:uAe,open_zoomstack:AAe};function cn(){var n="/home/runner/work/maputnik/maputnik/src/components/ModalSources.tsx",e="1a321f05fdc2b3edcde8eeb4fd25459ef69ddd1e",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ModalSources.tsx",statementMap:{0:{start:{line:16,column:4},end:{line:33,column:9}},1:{start:{line:20,column:23},end:{line:20,column:57}},2:{start:{line:37,column:2},end:{line:40,column:3}},3:{start:{line:38,column:4},end:{line:38,column:43}},4:{start:{line:38,column:22},end:{line:38,column:43}},5:{start:{line:39,column:4},end:{line:39,column:29}},6:{start:{line:41,column:2},end:{line:44,column:3}},7:{start:{line:42,column:4},end:{line:42,column:50}},8:{start:{line:42,column:22},end:{line:42,column:50}},9:{start:{line:43,column:4},end:{line:43,column:33}},10:{start:{line:45,column:2},end:{line:49,column:3}},11:{start:{line:46,column:4},end:{line:46,column:43}},12:{start:{line:46,column:22},end:{line:46,column:43}},13:{start:{line:47,column:4},end:{line:47,column:83}},14:{start:{line:47,column:59},end:{line:47,column:83}},15:{start:{line:48,column:4},end:{line:48,column:29}},16:{start:{line:50,column:2},end:{line:56,column:3}},17:{start:{line:51,column:4},end:{line:55,column:5}},18:{start:{line:52,column:6},end:{line:52,column:27}},19:{start:{line:54,column:6},end:{line:54,column:28}},20:{start:{line:57,column:2},end:{line:59,column:3}},21:{start:{line:58,column:4},end:{line:58,column:19}},22:{start:{line:60,column:2},end:{line:62,column:3}},23:{start:{line:61,column:4},end:{line:61,column:19}},24:{start:{line:63,column:2},end:{line:63,column:14}},25:{start:{line:67,column:14},end:{line:67,column:26}},26:{start:{line:68,column:4},end:{line:94,column:9}},27:{start:{line:80,column:27},end:{line:80,column:67}},28:{start:{line:99,column:4},end:{line:99,column:17}},29:{start:{line:100,column:4},end:{line:104,column:6}},30:{start:{line:107,column:19},end:{line:107,column:50}},31:{start:{line:108,column:25},end:{line:108,column:40}},32:{start:{line:109,column:4},end:{line:192,column:5}},33:{start:{line:111,column:8},end:{line:114,column:10}},34:{start:{line:116,column:8},end:{line:119,column:10}},35:{start:{line:121,column:8},end:{line:125,column:10}},36:{start:{line:127,column:8},end:{line:130,column:10}},37:{start:{line:132,column:8},end:{line:138,column:10}},38:{start:{line:140,column:8},end:{line:143,column:10}},39:{start:{line:145,column:8},end:{line:152,column:10}},40:{start:{line:154,column:8},end:{line:157,column:10}},41:{start:{line:159,column:8},end:{line:165,column:10}},42:{start:{line:167,column:8},end:{line:176,column:10}},43:{start:{line:178,column:8},end:{line:189,column:10}},44:{start:{line:191,column:8},end:{line:191,column:18}},45:{start:{line:194,column:10},end:{line:197,column:3}},46:{start:{line:195,column:33},end:{line:195,column:43}},47:{start:{line:196,column:4},end:{line:196,column:39}},48:{start:{line:198,column:19},end:{line:200,column:3}},49:{start:{line:199,column:4},end:{line:199,column:30}},50:{start:{line:202,column:14},end:{line:202,column:26}},51:{start:{line:203,column:32},end:{line:205,column:5}},52:{start:{line:206,column:4},end:{line:257,column:9}},53:{start:{line:213,column:27},end:{line:213,column:57}},54:{start:{line:235,column:30},end:{line:235,column:87}},55:{start:{line:262,column:27},end:{line:262,column:40}},56:{start:{line:263,column:4},end:{line:263,column:35}},57:{start:{line:264,column:4},end:{line:264,column:26}},58:{start:{line:267,column:28},end:{line:267,column:38}},59:{start:{line:268,column:22},end:{line:268,column:77}},60:{start:{line:269,column:26},end:{line:282,column:6}},61:{start:{line:270,column:21},end:{line:270,column:47}},62:{start:{line:271,column:6},end:{line:281,column:8}},63:{start:{line:276,column:29},end:{line:276,column:93}},64:{start:{line:277,column:26},end:{line:277,column:85}},65:{start:{line:283,column:27},end:{line:295,column:6}},66:{start:{line:283,column:75},end:{line:283,column:106}},67:{start:{line:284,column:21},end:{line:284,column:44}},68:{start:{line:285,column:6},end:{line:294,column:8}},69:{start:{line:291,column:26},end:{line:291,column:107}},70:{start:{line:296,column:4},end:{line:326,column:6}},71:{start:{line:319,column:45},end:{line:319,column:109}},72:{start:{line:329,column:21},end:{line:329,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:11},end:{line:34,column:3}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:20,column:17},end:{line:20,column:18}},loc:{start:{line:20,column:23},end:{line:20,column:57}},line:20},2:{name:"editorMode",decl:{start:{line:36,column:9},end:{line:36,column:19}},loc:{start:{line:36,column:28},end:{line:64,column:1}},line:36},3:{name:"(anonymous_3)",decl:{start:{line:66,column:2},end:{line:66,column:3}},loc:{start:{line:66,column:11},end:{line:95,column:3}},line:66},4:{name:"(anonymous_4)",decl:{start:{line:80,column:21},end:{line:80,column:22}},loc:{start:{line:80,column:27},end:{line:80,column:67}},line:80},5:{name:"(anonymous_5)",decl:{start:{line:98,column:2},end:{line:98,column:3}},loc:{start:{line:98,column:21},end:{line:105,column:3}},line:98},6:{name:"(anonymous_6)",decl:{start:{line:106,column:2},end:{line:106,column:3}},loc:{start:{line:106,column:22},end:{line:193,column:3}},line:106},7:{name:"(anonymous_7)",decl:{start:{line:194,column:10},end:{line:194,column:11}},loc:{start:{line:194,column:16},end:{line:197,column:3}},line:194},8:{name:"(anonymous_8)",decl:{start:{line:198,column:19},end:{line:198,column:20}},loc:{start:{line:198,column:31},end:{line:200,column:3}},line:198},9:{name:"(anonymous_9)",decl:{start:{line:201,column:2},end:{line:201,column:3}},loc:{start:{line:201,column:11},end:{line:258,column:3}},line:201},10:{name:"(anonymous_10)",decl:{start:{line:213,column:20},end:{line:213,column:21}},loc:{start:{line:213,column:27},end:{line:213,column:57}},line:213},11:{name:"(anonymous_11)",decl:{start:{line:235,column:20},end:{line:235,column:21}},loc:{start:{line:235,column:30},end:{line:235,column:87}},line:235},12:{name:"(anonymous_12)",decl:{start:{line:261,column:2},end:{line:261,column:3}},loc:{start:{line:261,column:21},end:{line:265,column:3}},line:261},13:{name:"(anonymous_13)",decl:{start:{line:266,column:2},end:{line:266,column:3}},loc:{start:{line:266,column:11},end:{line:327,column:3}},line:266},14:{name:"(anonymous_14)",decl:{start:{line:269,column:60},end:{line:269,column:61}},loc:{start:{line:269,column:74},end:{line:282,column:5}},line:269},15:{name:"(anonymous_15)",decl:{start:{line:276,column:20},end:{line:276,column:21}},loc:{start:{line:276,column:29},end:{line:276,column:93}},line:276},16:{name:"(anonymous_16)",decl:{start:{line:277,column:20},end:{line:277,column:21}},loc:{start:{line:277,column:26},end:{line:277,column:85}},line:277},17:{name:"(anonymous_17)",decl:{start:{line:283,column:61},end:{line:283,column:62}},loc:{start:{line:283,column:75},end:{line:283,column:106}},line:283},18:{name:"(anonymous_18)",decl:{start:{line:283,column:112},end:{line:283,column:113}},loc:{start:{line:283,column:126},end:{line:295,column:5}},line:283},19:{name:"(anonymous_19)",decl:{start:{line:291,column:20},end:{line:291,column:21}},loc:{start:{line:291,column:26},end:{line:291,column:107}},line:291},20:{name:"(anonymous_20)",decl:{start:{line:319,column:23},end:{line:319,column:24}},loc:{start:{line:319,column:45},end:{line:319,column:109}},line:319}},branchMap:{0:{loc:{start:{line:37,column:2},end:{line:40,column:3}},type:"if",locations:[{start:{line:37,column:2},end:{line:40,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},1:{loc:{start:{line:38,column:4},end:{line:38,column:43}},type:"if",locations:[{start:{line:38,column:4},end:{line:38,column:43}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:38},2:{loc:{start:{line:41,column:2},end:{line:44,column:3}},type:"if",locations:[{start:{line:41,column:2},end:{line:44,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:41},3:{loc:{start:{line:42,column:4},end:{line:42,column:50}},type:"if",locations:[{start:{line:42,column:4},end:{line:42,column:50}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:42},4:{loc:{start:{line:45,column:2},end:{line:49,column:3}},type:"if",locations:[{start:{line:45,column:2},end:{line:49,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:45},5:{loc:{start:{line:46,column:4},end:{line:46,column:43}},type:"if",locations:[{start:{line:46,column:4},end:{line:46,column:43}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:46},6:{loc:{start:{line:47,column:4},end:{line:47,column:83}},type:"if",locations:[{start:{line:47,column:4},end:{line:47,column:83}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:47},7:{loc:{start:{line:47,column:8},end:{line:47,column:57}},type:"binary-expr",locations:[{start:{line:47,column:8},end:{line:47,column:18}},{start:{line:47,column:22},end:{line:47,column:57}}],line:47},8:{loc:{start:{line:50,column:2},end:{line:56,column:3}},type:"if",locations:[{start:{line:50,column:2},end:{line:56,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:50},9:{loc:{start:{line:51,column:4},end:{line:55,column:5}},type:"if",locations:[{start:{line:51,column:4},end:{line:55,column:5}},{start:{line:53,column:11},end:{line:55,column:5}}],line:51},10:{loc:{start:{line:57,column:2},end:{line:59,column:3}},type:"if",locations:[{start:{line:57,column:2},end:{line:59,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:57},11:{loc:{start:{line:60,column:2},end:{line:62,column:3}},type:"if",locations:[{start:{line:60,column:2},end:{line:62,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:60},12:{loc:{start:{line:107,column:19},end:{line:107,column:50}},type:"binary-expr",locations:[{start:{line:107,column:19},end:{line:107,column:44}},{start:{line:107,column:48},end:{line:107,column:50}}],line:107},13:{loc:{start:{line:107,column:20},end:{line:107,column:36}},type:"binary-expr",locations:[{start:{line:107,column:20},end:{line:107,column:30}},{start:{line:107,column:34},end:{line:107,column:36}}],line:107},14:{loc:{start:{line:109,column:4},end:{line:192,column:5}},type:"switch",locations:[{start:{line:110,column:6},end:{line:114,column:10}},{start:{line:115,column:6},end:{line:119,column:10}},{start:{line:120,column:6},end:{line:125,column:10}},{start:{line:126,column:6},end:{line:130,column:10}},{start:{line:131,column:6},end:{line:138,column:10}},{start:{line:139,column:6},end:{line:143,column:10}},{start:{line:144,column:6},end:{line:152,column:10}},{start:{line:153,column:6},end:{line:157,column:10}},{start:{line:158,column:6},end:{line:165,column:10}},{start:{line:166,column:6},end:{line:176,column:10}},{start:{line:177,column:6},end:{line:189,column:10}},{start:{line:190,column:6},end:{line:191,column:18}}],line:109},15:{loc:{start:{line:123,column:19},end:{line:123,column:42}},type:"binary-expr",locations:[{start:{line:123,column:19},end:{line:123,column:33}},{start:{line:123,column:37},end:{line:123,column:42}}],line:123},16:{loc:{start:{line:129,column:15},end:{line:129,column:72}},type:"binary-expr",locations:[{start:{line:129,column:15},end:{line:129,column:25}},{start:{line:129,column:29},end:{line:129,column:72}}],line:129},17:{loc:{start:{line:134,column:17},end:{line:134,column:80}},type:"binary-expr",locations:[{start:{line:134,column:17},end:{line:134,column:29}},{start:{line:134,column:33},end:{line:134,column:80}}],line:134},18:{loc:{start:{line:135,column:19},end:{line:135,column:38}},type:"binary-expr",locations:[{start:{line:135,column:19},end:{line:135,column:33}},{start:{line:135,column:37},end:{line:135,column:38}}],line:135},19:{loc:{start:{line:136,column:19},end:{line:136,column:39}},type:"binary-expr",locations:[{start:{line:136,column:19},end:{line:136,column:33}},{start:{line:136,column:37},end:{line:136,column:39}}],line:136},20:{loc:{start:{line:137,column:18},end:{line:137,column:40}},type:"binary-expr",locations:[{start:{line:137,column:18},end:{line:137,column:31}},{start:{line:137,column:35},end:{line:137,column:40}}],line:137},21:{loc:{start:{line:142,column:15},end:{line:142,column:72}},type:"binary-expr",locations:[{start:{line:142,column:15},end:{line:142,column:25}},{start:{line:142,column:29},end:{line:142,column:72}}],line:142},22:{loc:{start:{line:147,column:17},end:{line:147,column:80}},type:"binary-expr",locations:[{start:{line:147,column:17},end:{line:147,column:29}},{start:{line:147,column:33},end:{line:147,column:80}}],line:147},23:{loc:{start:{line:148,column:19},end:{line:148,column:38}},type:"binary-expr",locations:[{start:{line:148,column:19},end:{line:148,column:33}},{start:{line:148,column:37},end:{line:148,column:38}}],line:148},24:{loc:{start:{line:149,column:19},end:{line:149,column:39}},type:"binary-expr",locations:[{start:{line:149,column:19},end:{line:149,column:33}},{start:{line:149,column:37},end:{line:149,column:39}}],line:149},25:{loc:{start:{line:150,column:18},end:{line:150,column:40}},type:"binary-expr",locations:[{start:{line:150,column:18},end:{line:150,column:31}},{start:{line:150,column:35},end:{line:150,column:40}}],line:150},26:{loc:{start:{line:151,column:20},end:{line:151,column:42}},type:"binary-expr",locations:[{start:{line:151,column:20},end:{line:151,column:35}},{start:{line:151,column:39},end:{line:151,column:42}}],line:151},27:{loc:{start:{line:156,column:15},end:{line:156,column:72}},type:"binary-expr",locations:[{start:{line:156,column:15},end:{line:156,column:25}},{start:{line:156,column:29},end:{line:156,column:72}}],line:156},28:{loc:{start:{line:161,column:17},end:{line:161,column:80}},type:"binary-expr",locations:[{start:{line:161,column:17},end:{line:161,column:29}},{start:{line:161,column:33},end:{line:161,column:80}}],line:161},29:{loc:{start:{line:162,column:19},end:{line:162,column:38}},type:"binary-expr",locations:[{start:{line:162,column:19},end:{line:162,column:33}},{start:{line:162,column:37},end:{line:162,column:38}}],line:162},30:{loc:{start:{line:163,column:19},end:{line:163,column:39}},type:"binary-expr",locations:[{start:{line:163,column:19},end:{line:163,column:33}},{start:{line:163,column:37},end:{line:163,column:39}}],line:163},31:{loc:{start:{line:164,column:20},end:{line:164,column:42}},type:"binary-expr",locations:[{start:{line:164,column:20},end:{line:164,column:35}},{start:{line:164,column:39},end:{line:164,column:42}}],line:164}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0,0,0,0,0,0,0,0,0,0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0],26:[0,0],27:[0,0],28:[0,0],29:[0,0],30:[0,0],31:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ModalSources.tsx"],names:[],mappings:"AAgCU,cACA,YADA;AAhCV,OAAO,WAAW;AAClB,SAAQ,oBAAoB,gBAAe;AAC3C,OAAO,YAAY;AAEnB,SAA0B,uBAAuB;AAEjD,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,4BAA4C;AAEnD,OAAO,WAAW;AAClB,SAAS,cAAc,WAAW,oBAAoB;AACtD,OAAO,mBAAmB;AAU1B,MAAM,qBAAqB,MAAM,UAA6B;AAAA,EAC5D,SAAS;AACP,WAAO,oBAAC,SAAI,WAAU,0BACpB;AAAA,MAAC;AAAA;AAAA,QACC,WAAU;AAAA,QACV,SAAS,MAAM,KAAK,MAAM,SAAS,KAAK,MAAM,EAAE;AAAA,QAEhD;AAAA,+BAAC,SAAI,WAAU,+BACb;AAAA,gCAAC,OAAE,WAAU,+BAA+B,eAAK,MAAM,OAAM;AAAA,YAC7D,qBAAC,OAAE,WAAU,6BAA4B;AAAA;AAAA,cAAE,KAAK,MAAM;AAAA,eAAG;AAAA,aAC3D;AAAA,UACA,oBAAC,UAAK,WAAU,kBAAiB;AAAA,UACjC,oBAAC,sBAAmB;AAAA;AAAA;AAAA,IACtB,GACF;AAAA,EACF;AACF;AAEA,SAAS,WAAW,QAA6B;AAC/C,MAAG,OAAO,SAAS,UAAU;AAC3B,QAAG,OAAO,MAAO,QAAO;AACxB,WAAO;AAAA,EACT;AACA,MAAG,OAAO,SAAS,cAAc;AAC/B,QAAG,OAAO,MAAO,QAAO;AACxB,WAAO;AAAA,EACT;AACA,MAAG,OAAO,SAAS,UAAU;AAC3B,QAAG,OAAO,MAAO,QAAO;AACxB,QAAG,OAAO,OAAO,OAAO,IAAI,WAAW,YAAY,EAAG,QAAO;AAC7D,WAAO;AAAA,EACT;AACA,MAAG,OAAO,SAAS,WAAW;AAC5B,QAAI,OAAO,OAAO,SAAU,UAAU;AACpC,aAAO;AAAA,IACT,OACK;AACH,aAAO;AAAA,IACT;AAAA,EACF;AACA,MAAG,OAAO,SAAS,SAAS;AAC1B,WAAO;AAAA,EACT;AACA,MAAG,OAAO,SAAS,SAAS;AAC1B,WAAO;AAAA,EACT;AACA,SAAO;AACT;AASA,MAAM,qCAAqC,MAAM,UAA6C;AAAA,EAC5F,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SAAI,WAAU,sCACpB;AAAA,2BAAC,SAAI,WAAU,6CACb;AAAA,6BAAC,UAAK,WAAU,gDAA+C;AAAA;AAAA,UAAE,KAAK,MAAM;AAAA,WAAS;AAAA,QACrF,oBAAC,UAAK,WAAU,kBAAiB;AAAA,QACjC;AAAA,UAAC;AAAA;AAAA,YACC,cAAY,EAAE,gCAAgC,EAAC,UAAU,KAAK,MAAM,SAAQ,CAAC;AAAA,YAC7E,WAAU;AAAA,YACV,SAAS,MAAK,KAAK,MAAM,SAAS,KAAK,MAAM,QAAQ;AAAA,YACrD,OAAO,EAAC,iBAAiB,cAAa;AAAA,YAEtC,8BAAC,YAAS;AAAA;AAAA,QACZ;AAAA,SACF;AAAA,MACA,oBAAC,SAAI,WAAU,8CACb;AAAA,QAAC;AAAA;AAAA,UACC,UAAU,KAAK,MAAM;AAAA,UACrB,MAAM,WAAW,KAAK,MAAM,MAAM;AAAA,UAClC,QAAQ,KAAK,MAAM;AAAA;AAAA,MACrB,GACF;AAAA,OACF;AAAA,EACF;AACF;AAYA,MAAM,kBAAkB,MAAM,UAA0C;AAAA,EACtE,YAAY,OAAuB;AACjC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,MAAM;AAAA,MACN,UAAU,MAAM,WAAW;AAAA,MAC3B,QAAQ,KAAK,cAAc,iBAAiB;AAAA,IAC9C;AAAA,EACF;AAAA,EAEA,cAAc,MAAuC;AACnD,UAAM,UAAU,KAAK,SAAS,CAAC,GAAG,UAAU,CAAC;AAC7C,UAAM,EAAC,SAAQ,IAAI,OAAO;AAE1B,YAAO,MAAM;AAAA,MACb,KAAK;AAAkB,eAAO;AAAA,UAC5B,MAAM;AAAA,UACN,KAAK,GAAG,QAAQ;AAAA,QAClB;AAAA,MACA,KAAK;AAAe,eAAO;AAAA,UACzB,MAAM;AAAA,UACN,MAAM,GAAG,QAAQ;AAAA,QACnB;AAAA,MACA,KAAK;AAAgB,eAAO;AAAA,UAC1B,MAAM;AAAA,UACN,SAAU,OAAsC,WAAW;AAAA,UAC3D,MAAM;AAAA,QACR;AAAA,MACA,KAAK;AAAmB,eAAO;AAAA,UAC7B,MAAM;AAAA,UACN,KAAM,OAAqC,OAAO,GAAG,QAAQ;AAAA,QAC/D;AAAA,MACA,KAAK;AAAe,eAAO;AAAA,UACzB,MAAM;AAAA,UACN,OAAQ,OAAqC,SAAS,CAAC,GAAG,QAAQ,kCAAkC;AAAA,UACpG,SAAU,OAAqC,WAAW;AAAA,UAC1D,SAAU,OAAqC,WAAW;AAAA,UAC1D,QAAS,OAAqC,UAAU;AAAA,QAC1D;AAAA,MACA,KAAK;AAAmB,eAAO;AAAA,UAC7B,MAAM;AAAA,UACN,KAAM,OAAqC,OAAO,GAAG,QAAQ;AAAA,QAC/D;AAAA,MACA,KAAK;AAAe,eAAO;AAAA,UACzB,MAAM;AAAA,UACN,OAAQ,OAAqC,SAAS,CAAC,GAAG,QAAQ,kCAAkC;AAAA,UACpG,SAAU,OAAqC,WAAW;AAAA,UAC1D,SAAU,OAAqC,WAAW;AAAA,UAC1D,QAAS,OAAqC,UAAU;AAAA,UACxD,UAAW,OAAqC,YAAY;AAAA,QAC9D;AAAA,MACA,KAAK;AAAuB,eAAO;AAAA,UACjC,MAAM;AAAA,UACN,KAAM,OAAwC,OAAO,GAAG,QAAQ;AAAA,QAClE;AAAA,MACA,KAAK;AAAsB,eAAO;AAAA,UAChC,MAAM;AAAA,UACN,OAAQ,OAAwC,SAAS,CAAC,GAAG,QAAQ,kCAAkC;AAAA,UACvG,SAAU,OAAwC,WAAW;AAAA,UAC7D,SAAU,OAAwC,WAAW;AAAA,UAC7D,UAAW,OAAwC,YAAY;AAAA,QACjE;AAAA,MACA,KAAK;AAAS,eAAO;AAAA,UACnB,MAAM;AAAA,UACN,KAAK,GAAG,QAAQ;AAAA,UAChB,aAAa;AAAA,YACX,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,UACN;AAAA,QACF;AAAA,MACA,KAAK;AAAS,eAAO;AAAA,UACnB,MAAM;AAAA,UACN,MAAM;AAAA,YACJ,GAAG,QAAQ;AAAA,UACb;AAAA,UACA,aAAa;AAAA,YACX,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,UACN;AAAA,QACF;AAAA,MACA;AAAS,eAAO,CAAC;AAAA,IACjB;AAAA,EACF;AAAA,EAEA,QAAQ,MAAM;AACZ,UAAM,EAAC,QAAQ,SAAQ,IAAI,KAAK;AAChC,SAAK,MAAM,MAAM,UAAU,MAAM;AAAA,EACnC;AAAA,EAEA,iBAAiB,CAAC,WAAgC;AAChD,SAAK,SAAS,EAAC,OAAM,CAAC;AAAA,EACxB;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AAQrB,UAAM,sBAAsB;AAAA,MAC1B,KAAK,OAAO,cAAc,KAAK;AAAA,IACjC;AAEA,WAAO,qBAAC,SAAI,WAAU,uBACpB;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,WAAW;AAAA,UACpB,WAAW,EAAC,KAAK,EAAE,wFAAwF,EAAC;AAAA,UAC5G,OAAO,KAAK,MAAM;AAAA,UAClB,UAAU,CAAC,MAAc,KAAK,SAAS,EAAE,UAAU,EAAC,CAAC;AAAA,UACrD,eAAY;AAAA;AAAA,MACd;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,aAAa;AAAA,UACtB,WAAW;AAAA,UACX,SAAS;AAAA,YACP,CAAC,gBAAgB,EAAE,gBAAgB,CAAC;AAAA,YACpC,CAAC,eAAe,EAAE,eAAe,CAAC;AAAA,YAClC,CAAC,mBAAmB,EAAE,uBAAuB,CAAC;AAAA,YAC9C,CAAC,eAAe,EAAE,oBAAoB,CAAC;AAAA,YACvC,CAAC,mBAAmB,EAAE,uBAAuB,CAAC;AAAA,YAC9C,CAAC,eAAe,EAAE,oBAAoB,CAAC;AAAA,YACvC,CAAC,uBAAuB,EAAE,2BAA2B,CAAC;AAAA,YACtD,CAAC,sBAAsB,EAAE,uBAAuB,CAAC;AAAA,YACjD,CAAC,kBAAkB,EAAE,kBAAkB,CAAC;AAAA,YACxC,CAAC,SAAS,EAAE,OAAO,CAAC;AAAA,YACpB,CAAC,SAAS,EAAE,OAAO,CAAC;AAAA,UACtB;AAAA,UACA,UAAU,UAAQ,KAAK,SAAS,EAAC,MAA0B,QAAQ,KAAK,cAAc,IAAkB,EAAC,CAAC;AAAA,UAC1G,OAAO,KAAK,MAAM;AAAA,UAClB,eAAY;AAAA;AAAA,MACd;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,UAAU,KAAK;AAAA,UACf,MAAM,KAAK,MAAM;AAAA,UACjB,QAAQ,KAAK,MAAM;AAAA;AAAA,MACrB;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,SAAS,KAAK;AAAA,UACd,eAAY;AAAA,UAEX,YAAE,YAAY;AAAA;AAAA,MACjB;AAAA,OACF;AAAA,EACF;AACF;AASA,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,WAAW,QAAqE;AAC9E,UAAM,iBAAiB,EAAC,GAAG,OAAM;AACjC,WAAO,eAAe,OAAO;AAC7B,WAAO;AAAA,EACT;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,GAAG,SAAQ,IAAI,KAAK;AAC3B,UAAM,YAAY,EAAC,GAAG,MAAM,KAAK,MAAM,MAAM,QAAQ,KAAK,MAAM,OAAM;AACtE,UAAM,gBAAgB,OAAO,KAAK,SAAS,OAAO,EAAE,IAAI,cAAY;AAClE,YAAM,SAAS,SAAS,QAAQ,QAAQ;AACxC,aAAO;AAAA,QAAC;AAAA;AAAA,UAEN;AAAA,UACA;AAAA,UACA,UAAU,CAAC,QAA6B,KAAK,MAAM,eAAe,aAAa,UAAU,UAAU,GAAG,CAAC;AAAA,UACvG,UAAU,MAAM,KAAK,MAAM,eAAe,aAAa,UAAU,QAAQ,CAAC;AAAA,UACzE,GAAG;AAAA;AAAA,QALC;AAAA,MAMP;AAAA,IACF,CAAC;AAED,UAAM,iBAAiB,OAAO,KAAK,aAAa,EAAE,OAAO,CAAC,aAAqB,EAAE,YAAY,SAAS,QAAQ,EAAE,IAAI,CAAC,aAAqB;AACxI,YAAM,SAAS,cAAc,QAAsC;AACnE,aAAO;AAAA,QAAC;AAAA;AAAA,UAEN,IAAI;AAAA,UACJ,MAAM,OAAO;AAAA,UACb,OAAO,OAAO;AAAA,UACd,UAAU,MAAM,KAAK,MAAM,eAAe,UAAU,UAAU,UAAU,KAAK,WAAW,MAAM,CAAC,CAAC;AAAA;AAAA,QAJ3F;AAAA,MAKP;AAAA,IACF,CAAC;AAED,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,SAAS;AAAA,QAElB;AAAA,+BAAC,aAAQ,WAAU,0BACjB;AAAA,gCAAC,QAAI,YAAE,gBAAgB,GAAE;AAAA,YACxB;AAAA,aACH;AAAA,UAEA,qBAAC,aAAQ,WAAU,0BACjB;AAAA,gCAAC,QAAI,YAAE,sBAAsB,GAAE;AAAA,YAC/B,oBAAC,OACE,YAAE,0DAA0D,GAC/D;AAAA,YACA,oBAAC,SAAI,WAAU,2BAA0B,OAAO,EAAC,UAAU,IAAG,GAC3D,0BACH;AAAA,aACF;AAAA,UAEA,qBAAC,aAAQ,WAAU,0BACjB;AAAA,gCAAC,QAAI,YAAE,gBAAgB,GAAE;AAAA,YACzB,oBAAC,OAAG,YAAE,8FAA8F,GAAE;AAAA,YACtG;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,CAAC,UAAkB,WAAgC,KAAK,MAAM,eAAe,UAAU,UAAU,UAAU,MAAM,CAAC;AAAA,gBACxH,GAAG;AAAA;AAAA,YACN;AAAA,aACF;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"1a321f05fdc2b3edcde8eeb4fd25459ef69ddd1e"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return cn=function(){return l},l}cn();class cAe extends Xn.Component{render(){return cn().f[0]++,cn().s[0]++,ue.jsx("div",{className:"maputnik-public-source",children:ue.jsxs(Ha,{className:"maputnik-public-source-select",onClick:()=>(cn().f[1]++,cn().s[1]++,this.props.onSelect(this.props.id)),children:[ue.jsxs("div",{className:"maputnik-public-source-info",children:[ue.jsx("p",{className:"maputnik-public-source-name",children:this.props.title}),ue.jsxs("p",{className:"maputnik-public-source-id",children:["#",this.props.id]})]}),ue.jsx("span",{className:"maputnik-space"}),ue.jsx(LF,{})]})})}}function dAe(n){return cn().f[2]++,cn().s[2]++,n.type==="raster"?(cn().b[0][0]++,cn().s[3]++,n.tiles?(cn().b[1][0]++,cn().s[4]++,"tile_raster"):(cn().b[1][1]++,cn().s[5]++,"tilejson_raster")):(cn().b[0][1]++,cn().s[6]++,n.type==="raster-dem"?(cn().b[2][0]++,cn().s[7]++,n.tiles?(cn().b[3][0]++,cn().s[8]++,"tilexyz_raster-dem"):(cn().b[3][1]++,cn().s[9]++,"tilejson_raster-dem")):(cn().b[2][1]++,cn().s[10]++,n.type==="vector"?(cn().b[4][0]++,cn().s[11]++,n.tiles?(cn().b[5][0]++,cn().s[12]++,"tile_vector"):(cn().b[5][1]++,cn().s[13]++,cn().b[7][0]++,n.url&&(cn().b[7][1]++,n.url.startsWith("pmtiles://"))?(cn().b[6][0]++,cn().s[14]++,"pmtiles_vector"):(cn().b[6][1]++,cn().s[15]++,"tilejson_vector"))):(cn().b[4][1]++,cn().s[16]++,n.type==="geojson"?(cn().b[8][0]++,cn().s[17]++,typeof n.data=="string"?(cn().b[9][0]++,cn().s[18]++,"geojson_url"):(cn().b[9][1]++,cn().s[19]++,"geojson_json")):(cn().b[8][1]++,cn().s[20]++,n.type==="image"?(cn().b[10][0]++,cn().s[21]++,"image"):(cn().b[10][1]++,cn().s[22]++,n.type==="video"?(cn().b[11][0]++,cn().s[23]++,"video"):(cn().b[11][1]++,cn().s[24]++,null))))))}class hAe extends Xn.Component{render(){cn().f[3]++;const e=(cn().s[25]++,this.props.t);return cn().s[26]++,ue.jsxs("div",{className:"maputnik-active-source-type-editor",children:[ue.jsxs("div",{className:"maputnik-active-source-type-editor-header",children:[ue.jsxs("span",{className:"maputnik-active-source-type-editor-header-id",children:["#",this.props.sourceId]}),ue.jsx("span",{className:"maputnik-space"}),ue.jsx(Ha,{"aria-label":e("Remove '{{sourceId}}' source",{sourceId:this.props.sourceId}),className:"maputnik-active-source-type-editor-header-delete",onClick:()=>(cn().f[4]++,cn().s[27]++,this.props.onDelete(this.props.sourceId)),style:{backgroundColor:"transparent"},children:ue.jsx(Uy,{})})]}),ue.jsx("div",{className:"maputnik-active-source-type-editor-content",children:ue.jsx(jj,{onChange:this.props.onChange,mode:dAe(this.props.source),source:this.props.source})})]})}}class fAe extends Xn.Component{constructor(t){cn().f[5]++,cn().s[28]++;super(t);Kn(this,"onAdd",(cn().s[45]++,()=>{cn().f[7]++;const{source:t,sourceId:r}=(cn().s[46]++,this.state);cn().s[47]++,this.props.onAdd(r,t)}));Kn(this,"onChangeSource",(cn().s[48]++,t=>{cn().f[8]++,cn().s[49]++,this.setState({source:t})}));cn().s[29]++,this.state={mode:"tilejson_vector",sourceId:vc.generateId(),source:this.defaultSource("tilejson_vector")}}defaultSource(t){cn().f[6]++;const r=(cn().s[30]++,cn().b[12][0]++,(cn().b[13][0]++,this.state||(cn().b[13][1]++,{})).source||(cn().b[12][1]++,{})),{protocol:i}=(cn().s[31]++,window.location);switch(cn().s[32]++,t){case"pmtiles_vector":return cn().b[14][0]++,cn().s[33]++,{type:"vector",url:`${i}//localhost:3000/file.pmtiles`};case"geojson_url":return cn().b[14][1]++,cn().s[34]++,{type:"geojson",data:`${i}//localhost:3000/geojson.json`};case"geojson_json":return cn().b[14][2]++,cn().s[35]++,{type:"geojson",cluster:(cn().b[15][0]++,r.cluster||(cn().b[15][1]++,!1)),data:""};case"tilejson_vector":return cn().b[14][3]++,cn().s[36]++,{type:"vector",url:(cn().b[16][0]++,r.url||(cn().b[16][1]++,`${i}//localhost:3000/tilejson.json`))};case"tile_vector":return cn().b[14][4]++,cn().s[37]++,{type:"vector",tiles:(cn().b[17][0]++,r.tiles||(cn().b[17][1]++,[`${i}//localhost:3000/{x}/{y}/{z}.pbf`])),minzoom:(cn().b[18][0]++,r.minzoom||(cn().b[18][1]++,0)),maxzoom:(cn().b[19][0]++,r.maxzoom||(cn().b[19][1]++,14)),scheme:(cn().b[20][0]++,r.scheme||(cn().b[20][1]++,"xyz"))};case"tilejson_raster":return cn().b[14][5]++,cn().s[38]++,{type:"raster",url:(cn().b[21][0]++,r.url||(cn().b[21][1]++,`${i}//localhost:3000/tilejson.json`))};case"tile_raster":return cn().b[14][6]++,cn().s[39]++,{type:"raster",tiles:(cn().b[22][0]++,r.tiles||(cn().b[22][1]++,[`${i}//localhost:3000/{x}/{y}/{z}.png`])),minzoom:(cn().b[23][0]++,r.minzoom||(cn().b[23][1]++,0)),maxzoom:(cn().b[24][0]++,r.maxzoom||(cn().b[24][1]++,14)),scheme:(cn().b[25][0]++,r.scheme||(cn().b[25][1]++,"xyz")),tileSize:(cn().b[26][0]++,r.tileSize||(cn().b[26][1]++,512))};case"tilejson_raster-dem":return cn().b[14][7]++,cn().s[40]++,{type:"raster-dem",url:(cn().b[27][0]++,r.url||(cn().b[27][1]++,`${i}//localhost:3000/tilejson.json`))};case"tilexyz_raster-dem":return cn().b[14][8]++,cn().s[41]++,{type:"raster-dem",tiles:(cn().b[28][0]++,r.tiles||(cn().b[28][1]++,[`${i}//localhost:3000/{x}/{y}/{z}.png`])),minzoom:(cn().b[29][0]++,r.minzoom||(cn().b[29][1]++,0)),maxzoom:(cn().b[30][0]++,r.maxzoom||(cn().b[30][1]++,14)),tileSize:(cn().b[31][0]++,r.tileSize||(cn().b[31][1]++,512))};case"image":return cn().b[14][9]++,cn().s[42]++,{type:"image",url:`${i}//localhost:3000/image.png`,coordinates:[[0,0],[0,0],[0,0],[0,0]]};case"video":return cn().b[14][10]++,cn().s[43]++,{type:"video",urls:[`${i}//localhost:3000/movie.mp4`],coordinates:[[0,0],[0,0],[0,0],[0,0]]};default:return cn().b[14][11]++,cn().s[44]++,{}}}render(){cn().f[9]++;const t=(cn().s[50]++,this.props.t),r=(cn().s[51]++,{doc:Xo.source_vector.type.doc});return cn().s[52]++,ue.jsxs("div",{className:"maputnik-add-source",children:[ue.jsx(Np,{label:t("Source ID"),fieldSpec:{doc:t("Unique ID that identifies the source and is used in the layer to reference the source.")},value:this.state.sourceId,onChange:i=>(cn().f[10]++,cn().s[53]++,this.setState({sourceId:i})),"data-wd-key":"modal:sources.add.source_id"}),ue.jsx(Jx,{label:t("Source Type"),fieldSpec:r,options:[["geojson_json",t("GeoJSON (JSON)")],["geojson_url",t("GeoJSON (URL)")],["tilejson_vector",t("Vector (TileJSON URL)")],["tile_vector",t("Vector (Tile URLs)")],["tilejson_raster",t("Raster (TileJSON URL)")],["tile_raster",t("Raster (Tile URLs)")],["tilejson_raster-dem",t("Raster DEM (TileJSON URL)")],["tilexyz_raster-dem",t("Raster DEM (XYZ URLs)")],["pmtiles_vector",t("Vector (PMTiles)")],["image",t("Image")],["video",t("Video")]],onChange:i=>(cn().f[11]++,cn().s[54]++,this.setState({mode:i,source:this.defaultSource(i)})),value:this.state.mode,"data-wd-key":"modal:sources.add.source_type"}),ue.jsx(jj,{onChange:this.onChangeSource,mode:this.state.mode,source:this.state.source}),ue.jsx(Ha,{className:"maputnik-add-source-button",onClick:this.onAdd,"data-wd-key":"modal:sources.add.add_source",children:t("Add Source")})]})}}class pAe extends Xn.Component{stripTitle(e){cn().f[12]++;const t=(cn().s[55]++,{...e});return cn().s[56]++,delete t.title,cn().s[57]++,t}render(){cn().f[13]++;const{t:e,mapStyle:t}=(cn().s[58]++,this.props),r=(cn().s[59]++,{t:e,i18n:this.props.i18n,tReady:this.props.tReady}),i=(cn().s[60]++,Object.keys(t.sources).map(l=>{cn().f[14]++;const o=(cn().s[61]++,t.sources[l]);return cn().s[62]++,ue.jsx(hAe,{sourceId:l,source:o,onChange:f=>(cn().f[15]++,cn().s[63]++,this.props.onStyleChanged(Nj(t,l,f))),onDelete:()=>(cn().f[16]++,cn().s[64]++,this.props.onStyleChanged(sAe(t,l))),...r},l)})),s=(cn().s[65]++,Object.keys(hR).filter(l=>(cn().f[17]++,cn().s[66]++,!(l in t.sources))).map(l=>{cn().f[18]++;const o=(cn().s[67]++,hR[l]);return cn().s[68]++,ue.jsx(cAe,{id:l,type:o.type,title:o.title,onSelect:()=>(cn().f[19]++,cn().s[69]++,this.props.onStyleChanged(dR(t,l,this.stripTitle(o))))},l)}));return cn().s[70]++,ue.jsxs(Y0,{"data-wd-key":"modal:sources",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:e("Sources"),children:[ue.jsxs("section",{className:"maputnik-modal-section",children:[ue.jsx("h1",{children:e("Active Sources")}),i]}),ue.jsxs("section",{className:"maputnik-modal-section",children:[ue.jsx("h1",{children:e("Choose Public Source")}),ue.jsx("p",{children:e("Add one of the publicly available sources to your style.")}),ue.jsx("div",{className:"maputnik-public-sources",style:{maxWidth:500},children:s})]}),ue.jsxs("section",{className:"maputnik-modal-section",children:[ue.jsx("h1",{children:e("Add New Source")}),ue.jsx("p",{children:e("Add a new source to your style. You can only choose the source type and id at creation time!")}),ue.jsx(fAe,{onAdd:(l,o)=>(cn().f[20]++,cn().s[71]++,this.props.onStyleChanged(dR(t,l,o))),...r})]})]})}}const mAe=(cn().s[72]++,zs()(pAe));var vb={},fR;function gAe(){if(fR)return vb;fR=1,Object.defineProperty(vb,"__esModule",{value:!0});var n=Object.assign||function(U){for(var j=1;j<arguments.length;j++){var N=arguments[j];for(var Y in N)Object.prototype.hasOwnProperty.call(N,Y)&&(U[Y]=N[Y])}return U},e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U},t=function(){function U(j,N){for(var Y=0;Y<N.length;Y++){var H=N[Y];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(j,H.key,H)}}return function(j,N,Y){return N&&U(j.prototype,N),Y&&U(j,Y),j}}(),r=Ia(),i=f(r),s=IC(),l=o(s);function o(U){return U&&U.__esModule?U:{default:U}}function f(U){if(U&&U.__esModule)return U;var j={};if(U!=null)for(var N in U)Object.prototype.hasOwnProperty.call(U,N)&&(j[N]=U[N]);return j.default=U,j}function y(U,j){var N={};for(var Y in U)j.indexOf(Y)>=0||Object.prototype.hasOwnProperty.call(U,Y)&&(N[Y]=U[Y]);return N}function x(U,j){if(!(U instanceof j))throw new TypeError("Cannot call a class as a function")}function B(U,j){if(!U)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j&&(typeof j=="object"||typeof j=="function")?j:U}function O(U,j){if(typeof j!="function"&&j!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof j);U.prototype=Object.create(j&&j.prototype,{constructor:{value:U,enumerable:!1,writable:!0,configurable:!0}}),j&&(Object.setPrototypeOf?Object.setPrototypeOf(U,j):U.__proto__=j)}var P=function(U){O(j,U);function j(N){x(this,j);var Y=B(this,(j.__proto__||Object.getPrototypeOf(j)).call(this,N));Y.handleChange=function(se){var re=Array.prototype.slice.call(se.target.files),V=(Y.props.as||"url").toLowerCase();Promise.all(re.map(function(ne){return new Promise(function(G,oe){var he=new FileReader;switch(he.onload=function(fe){G([fe,ne])},V){case"binary":{he.readAsBinaryString(ne);break}case"buffer":{he.readAsArrayBuffer(ne);break}case"text":{he.readAsText(ne);break}case"url":{he.readAsDataURL(ne);break}}})})).then(function(ne){Y.props.onChange(se,ne)})},Y.triggerInput=function(){var se=l.default.findDOMNode(Y._reactFileReaderInput);se&&se.click()};var H=(typeof window>"u"?"undefined":e(window))==="object"?window:{};return(!H.File||!H.FileReader||!H.FileList||!H.Blob)&&console.warn("[react-file-reader-input] Some file APIs detected as not supported. File reader functionality may not fully work."),Y}return t(j,[{key:"render",value:function(){var Y=this,H=this.props;H.as;var se=H.children,re=H.style,V=y(H,["as","children","style"]),ne=se?{position:"absolute",top:"-9999px"}:{};return i.createElement("div",{className:"_react-file-reader-input",onClick:this.triggerInput,style:re},i.createElement("input",n({},V,{type:"file",ref:function(oe){Y._reactFileReaderInput=oe},onChange:this.handleChange,onClick:function(){Y._reactFileReaderInput.value=null},style:ne})),se)}}]),j}(i.Component);return vb.default=P,vb}var yAe=gAe();const vAe=fl(yAe);function dh(){var n="/home/runner/work/maputnik/maputnik/src/components/ModalLoading.tsx",e="8092b056f21d597f3cd7d476fbebca118ff97879",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ModalLoading.tsx",statementMap:{0:{start:{line:8,column:4},end:{line:8,column:24}},1:{start:{line:11,column:14},end:{line:11,column:26}},2:{start:{line:12,column:4},end:{line:29,column:6}},3:{start:{line:20,column:26},end:{line:20,column:42}},4:{start:{line:23,column:28},end:{line:23,column:49}},5:{start:{line:26,column:137},end:{line:26,column:159}},6:{start:{line:32,column:21},end:{line:32,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:21},end:{line:9,column:3}},line:7},1:{name:"(anonymous_1)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:30,column:3}},line:10},2:{name:"(anonymous_2)",decl:{start:{line:20,column:19},end:{line:20,column:20}},loc:{start:{line:20,column:26},end:{line:20,column:42}},line:20},3:{name:"(anonymous_3)",decl:{start:{line:23,column:22},end:{line:23,column:23}},loc:{start:{line:23,column:28},end:{line:23,column:49}},line:23},4:{name:"(anonymous_4)",decl:{start:{line:26,column:130},end:{line:26,column:131}},loc:{start:{line:26,column:137},end:{line:26,column:159}},line:26}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},f:{0:0,1:0,2:0,3:0,4:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ModalLoading.tsx"],names:[],mappings:"AAuBW,SAWL,KAXK;AAvBX,OAAO,WAAW;AAElB,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAClB,SAA0B,uBAAuB;AAWjD,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,gBAAgB,GAAU;AAExB,MAAE,gBAAgB;AAAA,EACpB;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,oBAAoB;AAAA,QACpB,eAAe;AAAA;AAAA,UAEb,SAAS,CAAC,MAAa,cAAc,CAAC;AAAA,QACxC;AAAA,QACA,OAAO,KAAK,MAAM;AAAA,QAClB,cAAc,MAAM,KAAK,MAAM,SAAS;AAAA,QAExC;AAAA,8BAAC,OACE,eAAK,MAAM,SACd;AAAA,UACA,oBAAC,OAAE,WAAU,4BACX,8BAAC,eAAY,SAAS,CAAC,MAAM,KAAK,MAAM,SAAS,CAAC,GAC/C,YAAE,QAAQ,GACb,GACF;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8092b056f21d597f3cd7d476fbebca118ff97879"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return dh=function(){return l},l}dh();class CAe extends Xn.Component{underlayOnClick(e){dh().f[0]++,dh().s[0]++,e.stopPropagation()}render(){dh().f[1]++;const e=(dh().s[1]++,this.props.t);return dh().s[2]++,ue.jsxs(Y0,{"data-wd-key":"modal:loading",isOpen:this.props.isOpen,underlayClickExits:!1,underlayProps:{onClick:t=>(dh().f[2]++,dh().s[3]++,underlayProps(t))},title:this.props.title,onOpenToggle:()=>(dh().f[3]++,dh().s[4]++,this.props.onCancel()),children:[ue.jsx("p",{children:this.props.message}),ue.jsx("p",{className:"maputnik-dialog__buttons",children:ue.jsx(Ha,{onClick:t=>(dh().f[4]++,dh().s[5]++,this.props.onCancel(t)),children:e("Cancel")})})]})}}const _Ae=(dh().s[6]++,zs()(CAe)),Wj=[{id:"0-empty-style",title:"Empty Style",url:"https://cdn.jsdelivr.net/gh/maputnik/editor@9cf74ca405d2be0608b57db8109cf3a6af5b9f49/src/config/empty-style.json",thumbnail:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAECAQAAAAHDYbIAAAAEUlEQVR42mP8/58BDhiJ4wAA974H/U5Xe1oAAAAASUVORK5CYII="},{id:"americana",title:"Americana",url:"https://americanamap.org/style.json",thumbnail:"https://github.com/maplibre/maputnik/assets/649392/23fa75ad-63e6-43f5-8837-03cdb0428bac"},{id:"dark-matter",title:"Dark Matter",url:"https://cdn.jsdelivr.net/gh/openmaptiles/dark-matter-gl-style@v1.9/style.json",thumbnail:"https://maputnik.github.io/thumbnails/dark-matter.png"},{id:"maptiler-basic-gl-style",title:"MapTiler Basic",url:"https://cdn.jsdelivr.net/gh/openmaptiles/klokantech-basic-gl-style@v1.10/style.json",thumbnail:"https://maputnik.github.io/thumbnails/klokantech-basic.png"},{id:"maptiler-toner-gl-style",title:"Toner",url:"https://cdn.jsdelivr.net/gh/openmaptiles/toner-gl-style@v1.0/style.json",thumbnail:"https://maputnik.github.io/thumbnails/toner.png"},{id:"os-zoomstack-light",title:"Zoomstack Light",url:"https://s3-eu-west-1.amazonaws.com/tiles.os.uk/v2/styles/open-zoomstack-light/style.json",thumbnail:"https://maputnik.github.io/thumbnails/os-zoomstack-light.png"},{id:"os-zoomstack-night",title:"Zoomstack Night",url:"https://s3-eu-west-1.amazonaws.com/tiles.os.uk/v2/styles/open-zoomstack-night/style.json",thumbnail:"https://maputnik.github.io/thumbnails/os-zoomstack-night.png"},{id:"os-zoomstack-outdoor",title:"Zoomstack Outdoor",url:"https://s3-eu-west-1.amazonaws.com/tiles.os.uk/v2/styles/open-zoomstack-outdoor/style.json",thumbnail:"https://maputnik.github.io/thumbnails/os-zoomstack-outdoor.png"},{id:"os-zoomstack-road",title:"Zoomstack Road",url:"https://s3-eu-west-1.amazonaws.com/tiles.os.uk/v2/styles/open-zoomstack-road/style.json",thumbnail:"https://maputnik.github.io/thumbnails/os-zoomstack-road.png"},{id:"osm-bright",title:"OSM Bright",url:"https://cdn.jsdelivr.net/gh/openmaptiles/osm-bright-gl-style@v1.11/style.json",thumbnail:"https://maputnik.github.io/thumbnails/osm-bright.png"},{id:"osm-liberty",title:"OSM Liberty",url:"https://maputnik.github.io/osm-liberty/style.json",thumbnail:"https://maputnik.github.io/thumbnails/osm-liberty.png"},{id:"osm-openmaptiles",title:"OSM OpenMapTiles",url:"https://api.maptiler.com/maps/openstreetmap/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL",thumbnail:"https://openmaptiles.org/img/styles/openmaptiles.png"},{id:"positron",title:"Positron",url:"https://cdn.jsdelivr.net/gh/openmaptiles/positron-gl-style@v1.9/style.json",thumbnail:"https://maputnik.github.io/thumbnails/positron.png"},{id:"protomaps-light",title:"Protomaps Light",url:"https://api.protomaps.com/styles/v4/light/en.json?key=d828297496b11844",thumbnail:"https://github.com/user-attachments/assets/911f9765-4a7d-4736-9ec0-f2d4c90ae587"},{id:"stadia-outdoors",title:"Stadia Outdoors",url:"https://tiles.stadiamaps.com/styles/outdoors.json",thumbnail:"https://tiles.stadiamaps.com/static/outdoors.png?size=480x320&center=47.350259,8.49035&zoom=16"},{id:"versatiles-colorful",title:"Versatiles Colorful",url:"https://tiles.versatiles.org/assets/styles/colorful/style.json",thumbnail:"https://github.com/maplibre/maputnik/assets/649392/6cd69818-c541-46e4-a920-65fb4f654931"}];function sr(){var n="/home/runner/work/maputnik/maputnik/src/components/ModalOpen.tsx",e="29ff9eb08a4518c25ccd9ea0089ac05d05f682b1",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ModalOpen.tsx",statementMap:{0:{start:{line:15,column:4},end:{line:38,column:9}},1:{start:{line:20,column:23},end:{line:20,column:58}},2:{start:{line:43,column:4},end:{line:43,column:17}},3:{start:{line:44,column:4},end:{line:46,column:6}},4:{start:{line:49,column:4},end:{line:51,column:7}},5:{start:{line:54,column:4},end:{line:54,column:31}},6:{start:{line:54,column:11},end:{line:54,column:31}},7:{start:{line:55,column:4},end:{line:61,column:5}},8:{start:{line:56,column:6},end:{line:56,column:39}},9:{start:{line:57,column:6},end:{line:60,column:9}},10:{start:{line:63,column:18},end:{line:100,column:3}},11:{start:{line:64,column:4},end:{line:64,column:22}},12:{start:{line:65,column:19},end:{line:65,column:24}},13:{start:{line:66,column:4},end:{line:91,column:7}},14:{start:{line:70,column:6},end:{line:70,column:29}},15:{start:{line:72,column:6},end:{line:74,column:7}},16:{start:{line:73,column:8},end:{line:73,column:15}},17:{start:{line:75,column:6},end:{line:78,column:9}},18:{start:{line:79,column:23},end:{line:79,column:54}},19:{start:{line:80,column:6},end:{line:80,column:48}},20:{start:{line:81,column:6},end:{line:81,column:39}},21:{start:{line:82,column:6},end:{line:82,column:26}},22:{start:{line:84,column:6},end:{line:88,column:9}},23:{start:{line:89,column:6},end:{line:89,column:25}},24:{start:{line:90,column:6},end:{line:90,column:61}},25:{start:{line:92,column:4},end:{line:99,column:7}},26:{start:{line:95,column:10},end:{line:95,column:26}},27:{start:{line:101,column:16},end:{line:104,column:3}},28:{start:{line:102,column:4},end:{line:102,column:23}},29:{start:{line:103,column:4},end:{line:103,column:44}},30:{start:{line:105,column:15},end:{line:132,column:3}},31:{start:{line:106,column:4},end:{line:106,column:22}},32:{start:{line:107,column:23},end:{line:115,column:5}},33:{start:{line:116,column:25},end:{line:116,column:68}},34:{start:{line:117,column:17},end:{line:117,column:43}},35:{start:{line:118,column:20},end:{line:118,column:37}},36:{start:{line:120,column:4},end:{line:127,column:5}},37:{start:{line:121,column:6},end:{line:121,column:37}},38:{start:{line:123,column:6},end:{line:125,column:9}},39:{start:{line:126,column:6},end:{line:126,column:13}},40:{start:{line:128,column:4},end:{line:128,column:51}},41:{start:{line:129,column:4},end:{line:129,column:49}},42:{start:{line:130,column:4},end:{line:130,column:24}},43:{start:{line:131,column:4},end:{line:131,column:16}},44:{start:{line:135,column:18},end:{line:155,column:3}},45:{start:{line:136,column:21},end:{line:136,column:29}},46:{start:{line:137,column:19},end:{line:137,column:35}},47:{start:{line:138,column:4},end:{line:138,column:22}},48:{start:{line:139,column:4},end:{line:139,column:37}},49:{start:{line:140,column:4},end:{line:153,column:6}},50:{start:{line:142,column:6},end:{line:149,column:7}},51:{start:{line:143,column:8},end:{line:143,column:48}},52:{start:{line:145,column:8},end:{line:147,column:11}},53:{start:{line:148,column:8},end:{line:148,column:15}},54:{start:{line:150,column:6},end:{line:150,column:53}},55:{start:{line:151,column:6},end:{line:151,column:39}},56:{start:{line:152,column:6},end:{line:152,column:26}},57:{start:{line:154,column:4},end:{line:154,column:50}},58:{start:{line:154,column:28},end:{line:154,column:49}},59:{start:{line:157,column:4},end:{line:159,column:7}},60:{start:{line:160,column:4},end:{line:160,column:22}},61:{start:{line:161,column:4},end:{line:161,column:30}},62:{start:{line:163,column:16},end:{line:167,column:3}},63:{start:{line:164,column:4},end:{line:166,column:7}},64:{start:{line:169,column:14},end:{line:169,column:26}},65:{start:{line:170,column:25},end:{line:181,column:6}},66:{start:{line:171,column:6},end:{line:180,column:8}},67:{start:{line:183,column:4},end:{line:188,column:5}},68:{start:{line:184,column:6},end:{line:187,column:11}},69:{start:{line:186,column:61},end:{line:186,column:78}},70:{start:{line:189,column:4},end:{line:267,column:9}},71:{start:{line:195,column:30},end:{line:195,column:49}},72:{start:{line:263,column:27},end:{line:263,column:56}},73:{start:{line:270,column:18},end:{line:270,column:54}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:11},end:{line:39,column:3}},line:14},1:{name:"(anonymous_1)",decl:{start:{line:20,column:17},end:{line:20,column:18}},loc:{start:{line:20,column:23},end:{line:20,column:58}},line:20},2:{name:"(anonymous_2)",decl:{start:{line:42,column:2},end:{line:42,column:3}},loc:{start:{line:42,column:21},end:{line:47,column:3}},line:42},3:{name:"(anonymous_3)",decl:{start:{line:48,column:2},end:{line:48,column:3}},loc:{start:{line:48,column:15},end:{line:52,column:3}},line:48},4:{name:"(anonymous_4)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:27},end:{line:62,column:3}},line:53},5:{name:"(anonymous_5)",decl:{start:{line:63,column:18},end:{line:63,column:19}},loc:{start:{line:63,column:32},end:{line:100,column:3}},line:63},6:{name:"(anonymous_6)",decl:{start:{line:69,column:12},end:{line:69,column:13}},loc:{start:{line:69,column:31},end:{line:71,column:5}},line:69},7:{name:"(anonymous_7)",decl:{start:{line:71,column:12},end:{line:71,column:13}},loc:{start:{line:71,column:22},end:{line:83,column:5}},line:71},8:{name:"(anonymous_8)",decl:{start:{line:83,column:13},end:{line:83,column:14}},loc:{start:{line:83,column:22},end:{line:91,column:5}},line:83},9:{name:"(anonymous_9)",decl:{start:{line:94,column:15},end:{line:94,column:16}},loc:{start:{line:94,column:26},end:{line:96,column:9}},line:94},10:{name:"(anonymous_10)",decl:{start:{line:101,column:16},end:{line:101,column:17}},loc:{start:{line:101,column:23},end:{line:104,column:3}},line:101},11:{name:"(anonymous_11)",decl:{start:{line:105,column:15},end:{line:105,column:16}},loc:{start:{line:105,column:27},end:{line:132,column:3}},line:105},12:{name:"(anonymous_12)",decl:{start:{line:135,column:18},end:{line:135,column:19}},loc:{start:{line:135,column:38},end:{line:155,column:3}},line:135},13:{name:"(anonymous_13)",decl:{start:{line:140,column:20},end:{line:140,column:21}},loc:{start:{line:140,column:27},end:{line:153,column:5}},line:140},14:{name:"(anonymous_14)",decl:{start:{line:154,column:21},end:{line:154,column:22}},loc:{start:{line:154,column:28},end:{line:154,column:49}},line:154},15:{name:"(anonymous_15)",decl:{start:{line:156,column:2},end:{line:156,column:3}},loc:{start:{line:156,column:17},end:{line:162,column:3}},line:156},16:{name:"(anonymous_16)",decl:{start:{line:163,column:16},end:{line:163,column:17}},loc:{start:{line:163,column:25},end:{line:167,column:3}},line:163},17:{name:"(anonymous_17)",decl:{start:{line:168,column:2},end:{line:168,column:3}},loc:{start:{line:168,column:11},end:{line:268,column:3}},line:168},18:{name:"(anonymous_18)",decl:{start:{line:170,column:42},end:{line:170,column:43}},loc:{start:{line:170,column:54},end:{line:181,column:5}},line:170},19:{name:"(anonymous_19)",decl:{start:{line:186,column:55},end:{line:186,column:56}},loc:{start:{line:186,column:61},end:{line:186,column:78}},line:186},20:{name:"(anonymous_20)",decl:{start:{line:195,column:24},end:{line:195,column:25}},loc:{start:{line:195,column:30},end:{line:195,column:49}},line:195},21:{name:"(anonymous_21)",decl:{start:{line:263,column:20},end:{line:263,column:21}},loc:{start:{line:263,column:27},end:{line:263,column:56}},line:263}},branchMap:{0:{loc:{start:{line:54,column:4},end:{line:54,column:31}},type:"if",locations:[{start:{line:54,column:4},end:{line:54,column:31}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:54},1:{loc:{start:{line:55,column:4},end:{line:61,column:5}},type:"if",locations:[{start:{line:55,column:4},end:{line:61,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:55},2:{loc:{start:{line:72,column:6},end:{line:74,column:7}},type:"if",locations:[{start:{line:72,column:6},end:{line:74,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:72},3:{loc:{start:{line:183,column:4},end:{line:188,column:5}},type:"if",locations:[{start:{line:183,column:4},end:{line:188,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:183},4:{loc:{start:{line:202,column:53},end:{line:217,column:21}},type:"cond-expr",locations:[{start:{line:202,column:119},end:{line:213,column:15}},{start:{line:213,column:34},end:{line:217,column:21}}],line:202}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ModalOpen.tsx"],names:["style"],mappings:"AA6BQ,SACE,KADF;AA7BR,OAAO,WAA0B;AACjC,SAAQ,oBAAmB;AAC3B,SAAQ,0BAAyB;AACjC,OAAO,qBAAiC;AACxC,SAAS,OAAwB,uBAAuB;AAExD,OAAO,kBAAkB;AACzB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,cAAc;AAErB,OAAO,WAAW;AAClB,OAAO,kBAAkB;AASzB,MAAM,oBAAoB,MAAM,UAA4B;AAAA,EAC1D,SAAS;AACP,WAAO,oBAAC,SAAI,WAAU,yBACpB;AAAA,MAAC;AAAA;AAAA,QACC,WAAU;AAAA,QACV,cAAY,KAAK,MAAM;AAAA,QACvB,SAAS,MAAM,KAAK,MAAM,SAAS,KAAK,MAAM,GAAG;AAAA,QAEjD;AAAA,+BAAC,SAAI,WAAU,gCACb;AAAA,gCAAC,SAAK,eAAK,MAAM,OAAM;AAAA,YACvB,oBAAC,UAAK,WAAU,kBAAiB;AAAA,YACjC,oBAAC,sBAAmB;AAAA,aACtB;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,OAAO;AAAA,gBACL,iBAAiB,OAAO,KAAK,MAAM,YAAY;AAAA,cACjD;AAAA;AAAA,UACD;AAAA;AAAA;AAAA,IACH,GACF;AAAA,EACF;AACF;AAgBA,MAAM,0BAA0B,MAAM,UAAkD;AAAA,EACtF,YAAY,OAA+B;AACzC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,UAAU;AAAA,IACZ;AAAA,EACF;AAAA,EAEA,aAAa;AACX,SAAK,SAAS;AAAA,MACZ,OAAO;AAAA,IACT,CAAC;AAAA,EACH;AAAA,EAEA,sBAAsB,GAAU;AAE9B,QAAG,EAAG,GAAE,gBAAgB;AAExB,QAAG,KAAK,MAAM,eAAe;AAC3B,WAAK,MAAM,cAAc,MAAM;AAC/B,WAAK,SAAS;AAAA,QACZ,eAAe;AAAA,QACf,kBAAkB;AAAA,MACpB,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,gBAAgB,CAAC,aAAqB;AACpC,SAAK,WAAW;AAEhB,QAAI,WAAoB;AAExB,UAAM,UAAU;AAAA,MACd,MAAM;AAAA,MACN,aAAa;AAAA,IACf,CAAC,EACE,KAAK,SAAS,UAAU;AACvB,aAAO,SAAS,KAAK;AAAA,IACvB,CAAC,EACA,KAAK,CAAC,SAAS;AACd,UAAG,UAAU;AACX;AAAA,MACF;AAEA,WAAK,SAAS;AAAA,QACZ,eAAe;AAAA,QACf,kBAAkB;AAAA,MACpB,CAAC;AAED,YAAM,WAAW,MAAM,oBAAoB,IAAI;AAC/C,cAAQ,IAAI,iBAAiB,SAAS,EAAE;AACxC,WAAK,MAAM,YAAY,QAAQ;AAC/B,WAAK,aAAa;AAAA,IACpB,CAAC,EACA,MAAM,CAAC,QAAQ;AACd,WAAK,SAAS;AAAA,QACZ,OAAO,oBAAoB,QAAQ;AAAA,QACnC,eAAe;AAAA,QACf,kBAAkB;AAAA,MACpB,CAAC;AACD,cAAQ,MAAM,GAAG;AACjB,cAAQ,KAAK,gCAAgC,QAAQ;AAAA,IACvD,CAAC;AAEH,SAAK,SAAS;AAAA,MACZ,eAAe;AAAA,QACb,OAAO,WAAW;AAChB,qBAAW;AAAA,QACb;AAAA,MACF;AAAA,MACA,kBAAkB;AAAA,IACpB,CAAC;AAAA,EACH;AAAA,EAEA,cAAc,CAAC,MAAkC;AAC/C,MAAE,eAAe;AACjB,SAAK,cAAc,KAAK,MAAM,QAAQ;AAAA,EACxC;AAAA,EAEA,aAAa,YAAY;AACvB,SAAK,WAAW;AAEhB,UAAM,aAAoC;AAAA,MACxC,OAAO;AAAA,QACL;AAAA,UACE,aAAa;AAAA,UACb,QAAQ,EAAE,oBAAoB,CAAC,OAAO,EAAE;AAAA,QAC1C;AAAA,MACF;AAAA,MACA,UAAU;AAAA,IACZ;AAEA,UAAM,CAAC,UAAU,IAAI,MAAM,OAAO,mBAAmB,UAAU;AAC/D,UAAM,OAAO,MAAM,WAAW,QAAQ;AACtC,UAAM,UAAU,MAAM,KAAK,KAAK;AAEhC,QAAI;AACJ,QAAI;AACF,iBAAW,KAAK,MAAM,OAAO;AAAA,IAC/B,SAAS,KAAK;AACZ,WAAK,SAAS;AAAA,QACZ,OAAQ,IAAc,SAAS;AAAA,MACjC,CAAC;AACD;AAAA,IACF;AACA,eAAW,MAAM,oBAAoB,QAAQ;AAE7C,SAAK,MAAM,YAAY,UAAU,UAAU;AAC3C,SAAK,aAAa;AAClB,WAAO;AAAA,EACT;AAAA;AAAA;AAAA,EAIA,gBAAgB,OAAO,GAAQ,UAAoB;AACjD,UAAM,CAAC,EAAE,IAAI,IAAI,MAAM,CAAC;AACxB,UAAM,SAAS,IAAI,WAAW;AAC9B,SAAK,WAAW;AAEhB,WAAO,WAAW,MAAM,OAAO;AAC/B,WAAO,SAAS,OAAK;AACnB,UAAI;AACJ,UAAI;AACF,mBAAW,KAAK,MAAM,EAAE,QAAQ,MAAgB;AAAA,MAClD,SACM,KAAK;AACT,aAAK,SAAS;AAAA,UACZ,OAAQ,IAAc,SAAS;AAAA,QACjC,CAAC;AACD;AAAA,MACF;AACA,iBAAW,MAAM,oBAAoB,QAAQ;AAC7C,WAAK,MAAM,YAAY,QAAQ;AAC/B,WAAK,aAAa;AAAA,IACpB;AACA,WAAO,UAAU,OAAK,QAAQ,IAAI,EAAE,MAAM;AAAA,EAC5C;AAAA,EAEA,eAAe;AACb,SAAK,SAAS;AAAA,MACZ,UAAU;AAAA,IACZ,CAAC;AACD,SAAK,WAAW;AAChB,SAAK,MAAM,aAAa;AAAA,EAC1B;AAAA,EAEA,cAAc,CAAC,QAAgB;AAC7B,SAAK,SAAS;AAAA,MACZ,UAAU;AAAA,IACZ,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,eAAe,aAAa,IAAI,CAAAA,WAAS;AAC7C,aAAO;AAAA,QAAC;AAAA;AAAA,UAEN,KAAKA,OAAM;AAAA,UACX,OAAOA,OAAM;AAAA,UACb,cAAcA,OAAM;AAAA,UACpB,UAAU,KAAK;AAAA;AAAA,QAJVA,OAAM;AAAA,MAKb;AAAA,IACF,CAAC;AAED,QAAI;AACJ,QAAG,KAAK,MAAM,OAAO;AACnB,qBACE,qBAAC,SAAI,WAAU,wBACZ;AAAA,aAAK,MAAM;AAAA,QACZ,oBAAC,OAAE,MAAK,KAAI,SAAS,MAAM,KAAK,WAAW,GAAG,WAAU,8BAA6B,eAAC;AAAA,SACxF;AAAA,IAEJ;AAEA,WACE,qBAAC,SACC;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,eAAY;AAAA,UACZ,QAAQ,KAAK,MAAM;AAAA,UACnB,cAAc,MAAM,KAAK,aAAa;AAAA,UACtC,OAAO,EAAE,YAAY;AAAA,UAEpB;AAAA;AAAA,YACD,qBAAC,aAAQ,WAAU,0BACjB;AAAA,kCAAC,QAAI,YAAE,kBAAkB,GAAE;AAAA,cAC3B,oBAAC,OAAG,YAAE,6CAA6C,GAAE;AAAA,cACrD,oBAAC,SACE,iBAAO,OAAO,uBAAuB,aACpC;AAAA,gBAAC;AAAA;AAAA,kBACC,WAAU;AAAA,kBACV,SAAS,KAAK;AAAA,kBAAY;AAAA,wCAAC,gBAAY;AAAA,oBAAE;AAAA,oBAAE,EAAE,YAAY;AAAA;AAAA;AAAA,cAC3D,IAEA,oBAAC,mBAAgB,UAAU,KAAK,eAAe,UAAU,IAAI,cAAY,EAAE,YAAY,GACrF,+BAAC,eAAY,WAAU,0BAAyB;AAAA,oCAAC,gBAAa;AAAA,gBAAE;AAAA,gBAAE,EAAE,YAAY;AAAA,iBAAE,GACpF,GAEJ;AAAA,eACF;AAAA,YAEA,oBAAC,aAAQ,WAAU,0BACjB,+BAAC,UAAK,UAAU,KAAK,aACnB;AAAA,kCAAC,QAAI,YAAE,eAAe,GAAE;AAAA,cACxB,oBAAC,OACC,+BAAC,SAAM,GAAM;AAAA;AAAA,gBACkC,oBAAC,OAAE,MAAK,2BAA0B,QAAO,UAAS,KAAI,uBAAsB,0BAAY;AAAA,gBAAI;AAAA,iBAC3I,GACF;AAAA,cACA;AAAA,gBAAC;AAAA;AAAA,kBACC,cAAY,EAAE,WAAW;AAAA,kBACzB,eAAY;AAAA,kBACZ,MAAK;AAAA,kBACL,WAAU;AAAA,kBACV,SAAS,EAAE,cAAc;AAAA,kBACzB,OAAO,KAAK,MAAM;AAAA,kBAClB,SAAS,KAAK;AAAA,kBACd,UAAU,KAAK;AAAA;AAAA,cACjB;AAAA,cACA,oBAAC,SACC;AAAA,gBAAC;AAAA;AAAA,kBACC,eAAY;AAAA,kBACZ,MAAK;AAAA,kBACL,WAAU;AAAA,kBACV,UAAU,KAAK,MAAM,SAAS,SAAS;AAAA,kBACxC;AAAA;AAAA,cAAa,GAChB;AAAA,eACF,GACF;AAAA,YAEA,qBAAC,aAAQ,WAAU,yDACjB;AAAA,kCAAC,QAAI,YAAE,gBAAgB,GAAE;AAAA,cACzB,oBAAC,OACE,YAAE,0DAA0D,GAC/D;AAAA,cACA,oBAAC,SAAI,WAAU,oCACZ,wBACH;AAAA,eACF;AAAA;AAAA;AAAA,MACF;AAAA,MAEA;AAAA,QAAC;AAAA;AAAA,UACC,QAAQ,CAAC,CAAC,KAAK,MAAM;AAAA,UACrB,OAAO,EAAE,eAAe;AAAA,UACxB,UAAU,CAAC,MAAa,KAAK,sBAAsB,CAAC;AAAA,UACpD,SAAS,EAAE,2BAA2B,EAAE,YAAY,KAAK,MAAM,iBAAiB,CAAC;AAAA;AAAA,MACnF;AAAA,OACF;AAAA,EAEJ;AACF;AAEA,MAAM,YAAY,gBAAgB,EAAE,iBAAiB;AACrD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"29ff9eb08a4518c25ccd9ea0089ac05d05f682b1"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return sr=function(){return l},l}sr();class bAe extends Xn.Component{render(){return sr().f[0]++,sr().s[0]++,ue.jsx("div",{className:"maputnik-public-style",children:ue.jsxs(Ha,{className:"maputnik-public-style-button","aria-label":this.props.title,onClick:()=>(sr().f[1]++,sr().s[1]++,this.props.onSelect(this.props.url)),children:[ue.jsxs("div",{className:"maputnik-public-style-header",children:[ue.jsx("div",{children:this.props.title}),ue.jsx("span",{className:"maputnik-space"}),ue.jsx(LF,{})]}),ue.jsx("div",{className:"maputnik-public-style-thumbnail",style:{backgroundImage:`url(${this.props.thumbnailUrl})`}})]})})}}class xAe extends Xn.Component{constructor(t){sr().f[2]++,sr().s[2]++;super(t);Kn(this,"onStyleSelect",(sr().s[10]++,t=>{sr().f[5]++,sr().s[11]++,this.clearError();let r=(sr().s[12]++,!1);sr().s[13]++,fetch(t,{mode:"cors",credentials:"same-origin"}).then(function(i){return sr().f[6]++,sr().s[14]++,i.json()}).then(i=>{if(sr().f[7]++,sr().s[15]++,r){sr().b[2][0]++,sr().s[16]++;return}else sr().b[2][1]++;sr().s[17]++,this.setState({activeRequest:null,activeRequestUrl:null});const s=(sr().s[18]++,vc.ensureStyleValidity(i));sr().s[19]++,console.log("Loaded style ",s.id),sr().s[20]++,this.props.onStyleOpen(s),sr().s[21]++,this.onOpenToggle()}).catch(i=>{sr().f[8]++,sr().s[22]++,this.setState({error:`Failed to load: '${t}'`,activeRequest:null,activeRequestUrl:null}),sr().s[23]++,console.error(i),sr().s[24]++,console.warn("Could not open the style URL",t)}),sr().s[25]++,this.setState({activeRequest:{abort:function(){sr().f[9]++,sr().s[26]++,r=!0}},activeRequestUrl:t})}));Kn(this,"onSubmitUrl",(sr().s[27]++,t=>{sr().f[10]++,sr().s[28]++,t.preventDefault(),sr().s[29]++,this.onStyleSelect(this.state.styleUrl)}));Kn(this,"onOpenFile",(sr().s[30]++,async()=>{sr().f[11]++,sr().s[31]++,this.clearError();const t=(sr().s[32]++,{types:[{description:"json",accept:{"application/json":[".json"]}}],multiple:!1}),[r]=(sr().s[33]++,await window.showOpenFilePicker(t)),i=(sr().s[34]++,await r.getFile()),s=(sr().s[35]++,await i.text());let l;sr().s[36]++;try{sr().s[37]++,l=JSON.parse(s)}catch(o){sr().s[38]++,this.setState({error:o.toString()}),sr().s[39]++;return}return sr().s[40]++,l=vc.ensureStyleValidity(l),sr().s[41]++,this.props.onStyleOpen(l,r),sr().s[42]++,this.onOpenToggle(),sr().s[43]++,i}));Kn(this,"onFileChanged",(sr().s[44]++,async(t,r)=>{sr().f[12]++;const[,i]=(sr().s[45]++,r[0]),s=(sr().s[46]++,new FileReader);sr().s[47]++,this.clearError(),sr().s[48]++,s.readAsText(i,"UTF-8"),sr().s[49]++,s.onload=l=>{var f;sr().f[13]++;let o;sr().s[50]++;try{sr().s[51]++,o=JSON.parse((f=l.target)==null?void 0:f.result)}catch(y){sr().s[52]++,this.setState({error:y.toString()}),sr().s[53]++;return}sr().s[54]++,o=vc.ensureStyleValidity(o),sr().s[55]++,this.props.onStyleOpen(o),sr().s[56]++,this.onOpenToggle()},sr().s[57]++,s.onerror=l=>(sr().f[14]++,sr().s[58]++,console.log(l.target))}));Kn(this,"onChangeUrl",(sr().s[62]++,t=>{sr().f[16]++,sr().s[63]++,this.setState({styleUrl:t})}));sr().s[3]++,this.state={styleUrl:""}}clearError(){sr().f[3]++,sr().s[4]++,this.setState({error:null})}onCancelActiveRequest(t){sr().f[4]++,sr().s[5]++,t?(sr().b[0][0]++,sr().s[6]++,t.stopPropagation()):sr().b[0][1]++,sr().s[7]++,this.state.activeRequest?(sr().b[1][0]++,sr().s[8]++,this.state.activeRequest.abort(),sr().s[9]++,this.setState({activeRequest:null,activeRequestUrl:null})):sr().b[1][1]++}onOpenToggle(){sr().f[15]++,sr().s[59]++,this.setState({styleUrl:""}),sr().s[60]++,this.clearError(),sr().s[61]++,this.props.onOpenToggle()}render(){sr().f[17]++;const t=(sr().s[64]++,this.props.t),r=(sr().s[65]++,Wj.map(s=>(sr().f[18]++,sr().s[66]++,ue.jsx(bAe,{url:s.url,title:s.title,thumbnailUrl:s.thumbnail,onSelect:this.onStyleSelect},s.id))));let i;return sr().s[67]++,this.state.error?(sr().b[3][0]++,sr().s[68]++,i=ue.jsxs("div",{className:"maputnik-modal-error",children:[this.state.error,ue.jsx("a",{href:"#",onClick:()=>(sr().f[19]++,sr().s[69]++,this.clearError()),className:"maputnik-modal-error-close",children:""})]})):sr().b[3][1]++,sr().s[70]++,ue.jsxs("div",{children:[ue.jsxs(Y0,{"data-wd-key":"modal:open",isOpen:this.props.isOpen,onOpenToggle:()=>(sr().f[20]++,sr().s[71]++,this.onOpenToggle()),title:t("Open Style"),children:[i,ue.jsxs("section",{className:"maputnik-modal-section",children:[ue.jsx("h1",{children:t("Open local Style")}),ue.jsx("p",{children:t("Open a local JSON style from your computer.")}),ue.jsx("div",{children:typeof window.showOpenFilePicker=="function"?(sr().b[4][0]++,ue.jsxs(Ha,{className:"maputnik-big-button",onClick:this.onOpenFile,children:[ue.jsx(B7,{})," ",t("Open Style")]})):(sr().b[4][1]++,ue.jsx(vAe,{onChange:this.onFileChanged,tabIndex:-1,"aria-label":t("Open Style"),children:ue.jsxs(Ha,{className:"maputnik-upload-button",children:[ue.jsx(B7,{})," ",t("Open Style")]})}))})]}),ue.jsx("section",{className:"maputnik-modal-section",children:ue.jsxs("form",{onSubmit:this.onSubmitUrl,children:[ue.jsx("h1",{children:t("Load from URL")}),ue.jsx("p",{children:ue.jsxs(R0,{t,children:["Load from a URL. Note that the URL must have ",ue.jsx("a",{href:"https://enable-cors.org",target:"_blank",rel:"noopener noreferrer",children:"CORS enabled"}),"."]})}),ue.jsx(GO,{"aria-label":t("Style URL"),"data-wd-key":"modal:open.url.input",type:"text",className:"maputnik-input",default:t("Enter URL..."),value:this.state.styleUrl,onInput:this.onChangeUrl,onChange:this.onChangeUrl}),ue.jsx("div",{children:ue.jsx(Ha,{"data-wd-key":"modal:open.url.button",type:"submit",className:"maputnik-big-button",disabled:this.state.styleUrl.length<1,children:"Load from URL"})})]})}),ue.jsxs("section",{className:"maputnik-modal-section maputnik-modal-section--shrink",children:[ue.jsx("h1",{children:t("Gallery Styles")}),ue.jsx("p",{children:t("Open one of the publicly available styles to start from.")}),ue.jsx("div",{className:"maputnik-style-gallery-container",children:r})]})]}),ue.jsx(_Ae,{isOpen:!!this.state.activeRequest,title:t("Loading style"),onCancel:s=>(sr().f[21]++,sr().s[72]++,this.onCancelActiveRequest(s)),message:t("Loading: {{requestUrl}}",{requestUrl:this.state.activeRequestUrl})})]})}}const MAe=(sr().s[73]++,zs()(xAe));function wf(){var n="/home/runner/work/maputnik/maputnik/src/components/ModalShortcuts.tsx",e="2fa0c1760625a188da3b2788fa0924b96bb7f3e1",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ModalShortcuts.tsx",statementMap:{0:{start:{line:7,column:14},end:{line:7,column:26}},1:{start:{line:8,column:17},end:{line:41,column:5}},2:{start:{line:42,column:25},end:{line:115,column:5}},3:{start:{line:116,column:4},end:{line:145,column:6}},4:{start:{line:130,column:12},end:{line:133,column:22}},5:{start:{line:137,column:12},end:{line:141,column:22}},6:{start:{line:148,column:23},end:{line:148,column:64}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:146,column:3}},line:6},1:{name:"(anonymous_1)",decl:{start:{line:129,column:57},end:{line:129,column:58}},loc:{start:{line:129,column:72},end:{line:134,column:11}},line:129},2:{name:"(anonymous_2)",decl:{start:{line:136,column:65},end:{line:136,column:66}},loc:{start:{line:136,column:80},end:{line:142,column:11}},line:136}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},f:{0:0,1:0,2:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ModalShortcuts.tsx"],names:[],mappings:"AAiBa,SAwCA,UAxCA,KAwCA,YAxCA;AAjBb,OAAO,WAAW;AAClB,SAAS,OAAwB,uBAAuB;AAExD,OAAO,WAAW;AASlB,MAAM,+BAA+B,MAAM,UAAuC;AAAA,EAChF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,OAAO;AAAA,MACX;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,gBAAgB;AAAA,MAC1B;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,YAAY;AAAA,MACtB;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,cAAc;AAAA,MACxB;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,oBAAoB;AAAA,MAC9B;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,sBAAsB;AAAA,MAChC;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,gBAAgB;AAAA,MAC1B;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,WAAW;AAAA,MACrB;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,aAAa;AAAA,MACvB;AAAA,IACF;AAGA,UAAM,eAAe;AAAA,MACnB;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,+BAAgC;AAAA,MAC1C;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,eAAC;AAAA,WAAM;AAAA,QACtC,MAAM,EAAE,+BAAgC;AAAA,MAC1C;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,+BAAgC;AAAA,MAC1C;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,eAAC;AAAA,WAAM;AAAA,QACtC,MAAM,EAAE,+BAAgC;AAAA,MAC1C;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,gBAAE;AAAA,QACZ,MAAM,EAAE,uBAAwB;AAAA,MAClC;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,kBAAI;AAAA,QACd,MAAM,EAAE,yBAA0B;AAAA,MACpC;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,kBAAI;AAAA,QACd,MAAM,EAAE,yBAA0B;AAAA,MACpC;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,mBAAK;AAAA,QACf,MAAM,EAAE,0BAA2B;AAAA,MACrC;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,mBAAK;AAAA,WAAM;AAAA,QAC1C,MAAM,EAAE,sCAAuC;AAAA,MACjD;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,kBAAI;AAAA,WAAM;AAAA,QACzC,MAAM,EAAE,sCAAsC;AAAA,MAChD;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,gBAAE;AAAA,WAAM;AAAA,QACvC,MAAM,EAAE,mCAAmC;AAAA,MAC7C;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,kBAAI;AAAA,WAAM;AAAA,QACzC,MAAM,EAAE,mCAAmC;AAAA,MAC7C;AAAA,IACF;AAGA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,WAAW;AAAA,QAEpB,+BAAC,aAAQ,WAAU,mDACjB;AAAA,8BAAC,OACC,+BAAC,SAAM,GAAM;AAAA;AAAA,YACL,oBAAC,UAAK,iBAAG;AAAA,YAAO;AAAA,aACxB,GACF;AAAA,UACA,oBAAC,QACE,eAAK,IAAI,CAAC,MAAM,QAAQ;AACvB,mBAAO,qBAAC,SAAc,WAAU,sCAC9B;AAAA,kCAAC,QAAmB,eAAK,OAAhB,OAAK,GAAe;AAAA,cAC7B,oBAAC,QAAmB,eAAK,QAAhB,OAAK,GAAgB;AAAA,iBAFf,GAGjB;AAAA,UACF,CAAC,GACH;AAAA,UACA,oBAAC,OAAG,YAAE,8DAA8D,GAAE;AAAA,UACtE,oBAAC,QACE,uBAAa,IAAI,CAAC,MAAM,QAAQ;AAC/B,mBAAO,qBAAC,QACN;AAAA,kCAAC,UAAM,eAAK,KAAI;AAAA,cAAO;AAAA,cAAE,KAAK;AAAA,iBADhB,GAEhB;AAAA,UACF,CAAC,GACH;AAAA,WACF;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,iBAAiB,gBAAgB,EAAE,sBAAsB;AAC/D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2fa0c1760625a188da3b2788fa0924b96bb7f3e1"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return wf=function(){return l},l}wf();class wAe extends Xn.Component{render(){wf().f[0]++;const e=(wf().s[0]++,this.props.t),t=(wf().s[1]++,[{key:ue.jsx("kbd",{children:"?"}),text:e("Shortcuts menu")},{key:ue.jsx("kbd",{children:"o"}),text:e("Open modal")},{key:ue.jsx("kbd",{children:"e"}),text:e("Export modal")},{key:ue.jsx("kbd",{children:"d"}),text:e("Data Sources modal")},{key:ue.jsx("kbd",{children:"s"}),text:e("Style Settings modal")},{key:ue.jsx("kbd",{children:"i"}),text:e("Toggle inspect")},{key:ue.jsx("kbd",{children:"m"}),text:e("Focus map")},{key:ue.jsx("kbd",{children:"!"}),text:e("Debug modal")}]),r=(wf().s[2]++,[{key:ue.jsx("kbd",{children:"+"}),text:e("Increase the zoom level by 1.")},{key:ue.jsxs(ue.Fragment,{children:[ue.jsx("kbd",{children:"Shift"})," + ",ue.jsx("kbd",{children:"+"})]}),text:e("Increase the zoom level by 2.")},{key:ue.jsx("kbd",{children:"-"}),text:e("Decrease the zoom level by 1.")},{key:ue.jsxs(ue.Fragment,{children:[ue.jsx("kbd",{children:"Shift"})," + ",ue.jsx("kbd",{children:"-"})]}),text:e("Decrease the zoom level by 2.")},{key:ue.jsx("kbd",{children:"Up"}),text:e("Pan up by 100 pixels.")},{key:ue.jsx("kbd",{children:"Down"}),text:e("Pan down by 100 pixels.")},{key:ue.jsx("kbd",{children:"Left"}),text:e("Pan left by 100 pixels.")},{key:ue.jsx("kbd",{children:"Right"}),text:e("Pan right by 100 pixels.")},{key:ue.jsxs(ue.Fragment,{children:[ue.jsx("kbd",{children:"Shift"})," + ",ue.jsx("kbd",{children:"Right"})]}),text:e("Increase the rotation by 15 degrees.")},{key:ue.jsxs(ue.Fragment,{children:[ue.jsx("kbd",{children:"Shift"})," + ",ue.jsx("kbd",{children:"Left"})]}),text:e("Decrease the rotation by 15 degrees.")},{key:ue.jsxs(ue.Fragment,{children:[ue.jsx("kbd",{children:"Shift"})," + ",ue.jsx("kbd",{children:"Up"})]}),text:e("Increase the pitch by 10 degrees.")},{key:ue.jsxs(ue.Fragment,{children:[ue.jsx("kbd",{children:"Shift"})," + ",ue.jsx("kbd",{children:"Down"})]}),text:e("Decrease the pitch by 10 degrees.")}]);return wf().s[3]++,ue.jsx(Y0,{"data-wd-key":"modal:shortcuts",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:e("Shortcuts"),children:ue.jsxs("section",{className:"maputnik-modal-section maputnik-modal-shortcuts",children:[ue.jsx("p",{children:ue.jsxs(R0,{t:e,children:["Press ",ue.jsx("code",{children:"ESC"})," to lose focus of any active elements, then press one of:"]})}),ue.jsx("dl",{children:t.map((i,s)=>(wf().f[1]++,wf().s[4]++,ue.jsxs("div",{className:"maputnik-modal-shortcuts__shortcut",children:[ue.jsx("dt",{children:i.key},"dt"+s),ue.jsx("dd",{children:i.text},"dd"+s)]},s)))}),ue.jsx("p",{children:e("If the Map is in focused you can use the following shortcuts")}),ue.jsx("ul",{children:r.map((i,s)=>(wf().f[2]++,wf().s[5]++,ue.jsxs("li",{children:[ue.jsx("span",{children:i.key})," ",i.text]},s)))})]})})}}const SAe=(wf().s[6]++,zs()(wAe));function sA(){var n="/home/runner/work/maputnik/maputnik/src/components/ModalDebug.tsx",e="a1d210f2dd55b03f0e8aae655258e8184b2d45b3",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ModalDebug.tsx",statementMap:{0:{start:{line:7,column:27},end:{line:7,column:37}},1:{start:{line:8,column:20},end:{line:8,column:48}},2:{start:{line:9,column:19},end:{line:9,column:49}},3:{start:{line:10,column:19},end:{line:10,column:49}},4:{start:{line:11,column:4},end:{line:53,column:6}},5:{start:{line:22,column:14},end:{line:26,column:27}},6:{start:{line:23,column:96},end:{line:23,column:153}},7:{start:{line:29,column:14},end:{line:33,column:27}},8:{start:{line:30,column:96},end:{line:30,column:153}},9:{start:{line:56,column:19},end:{line:56,column:56}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:54,column:3}},line:6},1:{name:"(anonymous_1)",decl:{start:{line:21,column:140},end:{line:21,column:141}},loc:{start:{line:21,column:156},end:{line:27,column:13}},line:21},2:{name:"(anonymous_2)",decl:{start:{line:23,column:89},end:{line:23,column:90}},loc:{start:{line:23,column:96},end:{line:23,column:153}},line:23},3:{name:"(anonymous_3)",decl:{start:{line:28,column:136},end:{line:28,column:137}},loc:{start:{line:28,column:152},end:{line:34,column:13}},line:28},4:{name:"(anonymous_4)",decl:{start:{line:30,column:89},end:{line:30,column:90}},loc:{start:{line:30,column:96},end:{line:30,column:153}},line:30}},branchMap:{0:{loc:{start:{line:21,column:12},end:{line:27,column:17}},type:"binary-expr",locations:[{start:{line:21,column:12},end:{line:21,column:44}},{start:{line:21,column:64},end:{line:27,column:17}}],line:21},1:{loc:{start:{line:28,column:12},end:{line:34,column:17}},type:"binary-expr",locations:[{start:{line:28,column:12},end:{line:28,column:40}},{start:{line:28,column:60},end:{line:34,column:17}}],line:28}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ModalDebug.tsx"],names:[],mappings:"AAuCQ,cAKQ,YALR;AAvCR,OAAO,WAAW;AAElB,SAAS,OAAwB,uBAAuB;AACxD,OAAO,WAAW;AAqBlB,MAAM,2BAA2B,MAAM,UAAmC;AAAA,EACxE,SAAS;AACP,UAAM,EAAC,GAAG,QAAO,IAAI,KAAK;AAE1B,UAAM,UAAU,KAAK,MAAM,QAAQ,IAAI,IAAE;AACzC,UAAM,SAAS,CAAE,QAAQ,OAAO,IAAK,QAAQ,CAAC;AAC9C,UAAM,SAAS,CAAE,QAAQ,OAAO,IAAK,QAAQ,CAAC;AAE9C,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,OAAO;AAAA,QAEhB;AAAA,+BAAC,aAAQ,WAAU,mDACjB;AAAA,gCAAC,QAAI,YAAE,SAAS,GAAE;AAAA,YACjB,KAAK,MAAM,aAAa,YACvB,oBAAC,QACE,iBAAO,QAAQ,KAAK,MAAM,sBAAuB,EAAE,IAAI,CAAC,CAAC,KAAK,GAAG,MAAM;AACtE,qBAAO,oBAAC,QACN,+BAAC,WACC;AAAA,oCAAC,WAAM,MAAK,YAAW,SAAS,KAAK,UAAU,CAAC,MAAM,KAAK,MAAM,wBAAwB,KAAK,EAAE,OAAO,OAAO,GAAG;AAAA,gBAAE;AAAA,gBAAE;AAAA,iBACvH,KAHc,GAIhB;AAAA,YACF,CAAC,GACH;AAAA,YAED,KAAK,MAAM,aAAa,QACvB,oBAAC,QACE,iBAAO,QAAQ,KAAK,MAAM,sBAAuB,EAAE,IAAI,CAAC,CAAC,KAAK,GAAG,MAAM;AACtE,qBAAO,oBAAC,QACN,+BAAC,WACC;AAAA,oCAAC,WAAM,MAAK,YAAW,SAAS,KAAK,UAAU,CAAC,MAAM,KAAK,MAAM,wBAAwB,KAAK,EAAE,OAAO,OAAO,GAAG;AAAA,gBAAE;AAAA,gBAAE;AAAA,iBACvH,KAHc,GAIhB;AAAA,YACF,CAAC,GACH;AAAA,aAEJ;AAAA,UACA,qBAAC,aAAQ,WAAU,0BACjB;AAAA,gCAAC,QAAG,mBAAK;AAAA,YACT,oBAAC,OACC,+BAAC,SAAM,GACL;AAAA;AAAA,gBAAC;AAAA;AAAA,kBACC,QAAO;AAAA,kBACP,KAAI;AAAA,kBACJ,MAAM,sCAAsC,OAAO,IAAI,MAAM,IAAI,MAAM;AAAA,kBACxE;AAAA;AAAA,cAED;AAAA,cAAI;AAAA,eACN,GACF;AAAA,aACF;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,aAAa,gBAAgB,EAAE,kBAAkB;AACvD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a1d210f2dd55b03f0e8aae655258e8184b2d45b3"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return sA=function(){return l},l}sA();class EAe extends Xn.Component{render(){sA().f[0]++;const{t:e,mapView:t}=(sA().s[0]++,this.props),r=(sA().s[1]++,Math.round(t.zoom)+1),i=(sA().s[2]++,+t.center.lng.toFixed(5)),s=(sA().s[3]++,+t.center.lat.toFixed(5));return sA().s[4]++,ue.jsxs(Y0,{"data-wd-key":"modal:debug",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:e("Debug"),children:[ue.jsxs("section",{className:"maputnik-modal-section maputnik-modal-shortcuts",children:[ue.jsx("h1",{children:e("Options")}),(sA().b[0][0]++,this.props.renderer==="mlgljs"&&(sA().b[0][1]++,ue.jsx("ul",{children:Object.entries(this.props.maplibreGlDebugOptions).map(([l,o])=>(sA().f[1]++,sA().s[5]++,ue.jsx("li",{children:ue.jsxs("label",{children:[ue.jsx("input",{type:"checkbox",checked:o,onChange:f=>(sA().f[2]++,sA().s[6]++,this.props.onChangeMaplibreGlDebug(l,f.target.checked))})," ",l]})},l)))}))),(sA().b[1][0]++,this.props.renderer==="ol"&&(sA().b[1][1]++,ue.jsx("ul",{children:Object.entries(this.props.openlayersDebugOptions).map(([l,o])=>(sA().f[3]++,sA().s[7]++,ue.jsx("li",{children:ue.jsxs("label",{children:[ue.jsx("input",{type:"checkbox",checked:o,onChange:f=>(sA().f[4]++,sA().s[8]++,this.props.onChangeOpenlayersDebug(l,f.target.checked))})," ",l]})},l)))})))]}),ue.jsxs("section",{className:"maputnik-modal-section",children:[ue.jsx("h1",{children:"Links"}),ue.jsx("p",{children:ue.jsxs(R0,{t:e,children:[ue.jsx("a",{target:"_blank",rel:"noopener noreferrer",href:`https://www.openstreetmap.org/#map=${r}/${s}/${i}`,children:"Open in OSM"}),"  Opens the current view on openstreetmap.org"]})})]})]})}}const BAe=(sA().s[9]++,zs()(EAe));var pg={},Fv={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */var OAe=Fv.exports,pR;function IAe(){return pR||(pR=1,function(n,e){(function(t){var r=e&&!e.nodeType&&e,i=!n.nodeType&&n,s=typeof window=="object"&&window;(s.global===s||s.window===s||s.self===s)&&(t=s);var l,o=2147483647,f=36,y=1,x=26,B=38,O=700,P=72,U=128,j="-",N=/^xn--/,Y=/[^\x20-\x7E]/,H=/[\x2E\u3002\uFF0E\uFF61]/g,se={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},re=f-y,V=Math.floor,ne=String.fromCharCode,G;function oe(we){throw new RangeError(se[we])}function he(we,De){for(var He=we.length,bt=[];He--;)bt[He]=De(we[He]);return bt}function fe(we,De){var He=we.split("@"),bt="";He.length>1&&(bt=He[0]+"@",we=He[1]),we=we.replace(H,".");var Yt=we.split("."),yt=he(Yt,De).join(".");return bt+yt}function Ee(we){for(var De=[],He=0,bt=we.length,Yt,yt;He<bt;)Yt=we.charCodeAt(He++),Yt>=55296&&Yt<=56319&&He<bt?(yt=we.charCodeAt(He++),(yt&64512)==56320?De.push(((Yt&1023)<<10)+(yt&1023)+65536):(De.push(Yt),He--)):De.push(Yt);return De}function me(we){return he(we,function(De){var He="";return De>65535&&(De-=65536,He+=ne(De>>>10&1023|55296),De=56320|De&1023),He+=ne(De),He}).join("")}function Se(we){return we-48<10?we-22:we-65<26?we-65:we-97<26?we-97:f}function Ke(we,De){return we+22+75*(we<26)-((De!=0)<<5)}function xe(we,De,He){var bt=0;for(we=He?V(we/O):we>>1,we+=V(we/De);we>re*x>>1;bt+=f)we=V(we/re);return V(bt+(re+1)*we/(we+B))}function at(we){var De=[],He=we.length,bt,Yt=0,yt=U,Ft=P,Pt,Ue,Pe,Be,it,_t,pt,Lt,nn;for(Pt=we.lastIndexOf(j),Pt<0&&(Pt=0),Ue=0;Ue<Pt;++Ue)we.charCodeAt(Ue)>=128&&oe("not-basic"),De.push(we.charCodeAt(Ue));for(Pe=Pt>0?Pt+1:0;Pe<He;){for(Be=Yt,it=1,_t=f;Pe>=He&&oe("invalid-input"),pt=Se(we.charCodeAt(Pe++)),(pt>=f||pt>V((o-Yt)/it))&&oe("overflow"),Yt+=pt*it,Lt=_t<=Ft?y:_t>=Ft+x?x:_t-Ft,!(pt<Lt);_t+=f)nn=f-Lt,it>V(o/nn)&&oe("overflow"),it*=nn;bt=De.length+1,Ft=xe(Yt-Be,bt,Be==0),V(Yt/bt)>o-yt&&oe("overflow"),yt+=V(Yt/bt),Yt%=bt,De.splice(Yt++,0,yt)}return me(De)}function Ze(we){var De,He,bt,Yt,yt,Ft,Pt,Ue,Pe,Be,it,_t=[],pt,Lt,nn,Kt;for(we=Ee(we),pt=we.length,De=U,He=0,yt=P,Ft=0;Ft<pt;++Ft)it=we[Ft],it<128&&_t.push(ne(it));for(bt=Yt=_t.length,Yt&&_t.push(j);bt<pt;){for(Pt=o,Ft=0;Ft<pt;++Ft)it=we[Ft],it>=De&&it<Pt&&(Pt=it);for(Lt=bt+1,Pt-De>V((o-He)/Lt)&&oe("overflow"),He+=(Pt-De)*Lt,De=Pt,Ft=0;Ft<pt;++Ft)if(it=we[Ft],it<De&&++He>o&&oe("overflow"),it==De){for(Ue=He,Pe=f;Be=Pe<=yt?y:Pe>=yt+x?x:Pe-yt,!(Ue<Be);Pe+=f)Kt=Ue-Be,nn=f-Be,_t.push(ne(Ke(Be+Kt%nn,0))),Ue=V(Kt/nn);_t.push(ne(Ke(Ue,0))),yt=xe(He,Lt,bt==Yt),He=0,++bt}++He,++De}return _t.join("")}function Je(we){return fe(we,function(De){return N.test(De)?at(De.slice(4).toLowerCase()):De})}function Ne(we){return fe(we,function(De){return Y.test(De)?"xn--"+Ze(De):De})}if(l={version:"1.4.1",ucs2:{decode:Ee,encode:me},decode:at,encode:Ze,toASCII:Ne,toUnicode:Je},r&&i)if(n.exports==r)i.exports=l;else for(G in l)l.hasOwnProperty(G)&&(r[G]=l[G]);else t.punycode=l})(OAe)}(Fv,Fv.exports)),Fv.exports}var BS,mR;function qy(){return mR||(mR=1,BS=TypeError),BS}const kAe={},TAe=Object.freeze(Object.defineProperty({__proto__:null,default:kAe},Symbol.toStringTag,{value:"Module"})),PAe=R6(TAe);var OS,gR;function e3(){if(gR)return OS;gR=1;var n=typeof Map=="function"&&Map.prototype,e=Object.getOwnPropertyDescriptor&&n?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,t=n&&e&&typeof e.get=="function"?e.get:null,r=n&&Map.prototype.forEach,i=typeof Set=="function"&&Set.prototype,s=Object.getOwnPropertyDescriptor&&i?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,l=i&&s&&typeof s.get=="function"?s.get:null,o=i&&Set.prototype.forEach,f=typeof WeakMap=="function"&&WeakMap.prototype,y=f?WeakMap.prototype.has:null,x=typeof WeakSet=="function"&&WeakSet.prototype,B=x?WeakSet.prototype.has:null,O=typeof WeakRef=="function"&&WeakRef.prototype,P=O?WeakRef.prototype.deref:null,U=Boolean.prototype.valueOf,j=Object.prototype.toString,N=Function.prototype.toString,Y=String.prototype.match,H=String.prototype.slice,se=String.prototype.replace,re=String.prototype.toUpperCase,V=String.prototype.toLowerCase,ne=RegExp.prototype.test,G=Array.prototype.concat,oe=Array.prototype.join,he=Array.prototype.slice,fe=Math.floor,Ee=typeof BigInt=="function"?BigInt.prototype.valueOf:null,me=Object.getOwnPropertySymbols,Se=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Ke=typeof Symbol=="function"&&typeof Symbol.iterator=="object",xe=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Ke||!0)?Symbol.toStringTag:null,at=Object.prototype.propertyIsEnumerable,Ze=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(Ve){return Ve.__proto__}:null);function Je(Ve,J){if(Ve===1/0||Ve===-1/0||Ve!==Ve||Ve&&Ve>-1e3&&Ve<1e3||ne.call(/e/,J))return J;var ve=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof Ve=="number"){var p=Ve<0?-fe(-Ve):fe(Ve);if(p!==Ve){var Fe=String(p),Qe=H.call(J,Fe.length+1);return se.call(Fe,ve,"$&_")+"."+se.call(se.call(Qe,/([0-9]{3})/g,"$&_"),/_$/,"")}}return se.call(J,ve,"$&_")}var Ne=PAe,we=Ne.custom,De=pt(we)?we:null,He={__proto__:null,double:'"',single:"'"},bt={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};OS=function Ve(J,ve,p,Fe){var Qe=ve||{};if(Kt(Qe,"quoteStyle")&&!Kt(He,Qe.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Kt(Qe,"maxStringLength")&&(typeof Qe.maxStringLength=="number"?Qe.maxStringLength<0&&Qe.maxStringLength!==1/0:Qe.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var rt=Kt(Qe,"customInspect")?Qe.customInspect:!0;if(typeof rt!="boolean"&&rt!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Kt(Qe,"indent")&&Qe.indent!==null&&Qe.indent!=="	"&&!(parseInt(Qe.indent,10)===Qe.indent&&Qe.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Kt(Qe,"numericSeparator")&&typeof Qe.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var ct=Qe.numericSeparator;if(typeof J>"u")return"undefined";if(J===null)return"null";if(typeof J=="boolean")return J?"true":"false";if(typeof J=="string")return Zn(J,Qe);if(typeof J=="number"){if(J===0)return 1/0/J>0?"0":"-0";var dt=String(J);return ct?Je(J,dt):dt}if(typeof J=="bigint"){var qt=String(J)+"n";return ct?Je(J,qt):qt}var Gt=typeof Qe.depth>"u"?5:Qe.depth;if(typeof p>"u"&&(p=0),p>=Gt&&Gt>0&&typeof J=="object")return Ft(J)?"[Array]":"[Object]";var zt=Ht(Qe,p);if(typeof Fe>"u")Fe=[];else if(tn(Fe,J)>=0)return"[Circular]";function on(ws,ko,Hi){if(ko&&(Fe=he.call(Fe),Fe.push(ko)),Hi){var Sl={depth:Qe.depth};return Kt(Qe,"quoteStyle")&&(Sl.quoteStyle=Qe.quoteStyle),Ve(ws,Sl,p+1,Fe)}return Ve(ws,Qe,p+1,Fe)}if(typeof J=="function"&&!Ue(J)){var jt=Gn(J),Dn=Hn(J,on);return"[Function"+(jt?": "+jt:" (anonymous)")+"]"+(Dn.length>0?" { "+oe.call(Dn,", ")+" }":"")}if(pt(J)){var rr=Ke?se.call(String(J),/^(Symbol\(.*\))_[^)]*$/,"$1"):Se.call(J);return typeof J=="object"&&!Ke?ce(rr):rr}if(vr(J)){for(var Br="<"+V.call(String(J.nodeName)),Jn=J.attributes||[],un=0;un<Jn.length;un++)Br+=" "+Jn[un].name+"="+Yt(yt(Jn[un].value),"double",Qe);return Br+=">",J.childNodes&&J.childNodes.length&&(Br+="..."),Br+="</"+V.call(String(J.nodeName))+">",Br}if(Ft(J)){if(J.length===0)return"[]";var er=Hn(J,on);return zt&&!wt(er)?"["+sn(er,zt)+"]":"[ "+oe.call(er,", ")+" ]"}if(Pe(J)){var fr=Hn(J,on);return!("cause"in Error.prototype)&&"cause"in J&&!at.call(J,"cause")?"{ ["+String(J)+"] "+oe.call(G.call("[cause]: "+on(J.cause),fr),", ")+" }":fr.length===0?"["+String(J)+"]":"{ ["+String(J)+"] "+oe.call(fr,", ")+" }"}if(typeof J=="object"&&rt){if(De&&typeof J[De]=="function"&&Ne)return Ne(J,{depth:Gt-p});if(rt!=="symbol"&&typeof J.inspect=="function")return J.inspect()}if(dr(J)){var Sr=[];return r&&r.call(J,function(ws,ko){Sr.push(on(ko,J,!0)+" => "+on(ws,J))}),nt("Map",t.call(J),Sr,zt)}if($n(J)){var Ur=[];return o&&o.call(J,function(ws){Ur.push(on(ws,J))}),nt("Set",l.call(J),Ur,zt)}if(Pn(J))return pe("WeakMap");if(lr(J))return pe("WeakSet");if(pn(J))return pe("WeakRef");if(it(J))return ce(on(Number(J)));if(Lt(J))return ce(on(Ee.call(J)));if(_t(J))return ce(U.call(J));if(Be(J))return ce(on(String(J)));if(typeof window<"u"&&J===window)return"{ [object Window] }";if(typeof globalThis<"u"&&J===globalThis||typeof window<"u"&&J===window)return"{ [object globalThis] }";if(!Pt(J)&&!Ue(J)){var ri=Hn(J,on),Or=Ze?Ze(J)===Object.prototype:J instanceof Object||J.constructor===Object,ka=J instanceof Object?"":"null prototype",Wi=!Or&&xe&&Object(J)===J&&xe in J?H.call(vn(J),8,-1):ka?"Object":"",Bi=Or||typeof J.constructor!="function"?"":J.constructor.name?J.constructor.name+" ":"",eo=Bi+(Wi||ka?"["+oe.call(G.call([],Wi||[],ka||[]),": ")+"] ":"");return ri.length===0?eo+"{}":zt?eo+"{"+sn(ri,zt)+"}":eo+"{ "+oe.call(ri,", ")+" }"}return String(J)};function Yt(Ve,J,ve){var p=ve.quoteStyle||J,Fe=He[p];return Fe+Ve+Fe}function yt(Ve){return se.call(String(Ve),/"/g,"&quot;")}function Ft(Ve){return vn(Ve)==="[object Array]"&&(!xe||!(typeof Ve=="object"&&xe in Ve))}function Pt(Ve){return vn(Ve)==="[object Date]"&&(!xe||!(typeof Ve=="object"&&xe in Ve))}function Ue(Ve){return vn(Ve)==="[object RegExp]"&&(!xe||!(typeof Ve=="object"&&xe in Ve))}function Pe(Ve){return vn(Ve)==="[object Error]"&&(!xe||!(typeof Ve=="object"&&xe in Ve))}function Be(Ve){return vn(Ve)==="[object String]"&&(!xe||!(typeof Ve=="object"&&xe in Ve))}function it(Ve){return vn(Ve)==="[object Number]"&&(!xe||!(typeof Ve=="object"&&xe in Ve))}function _t(Ve){return vn(Ve)==="[object Boolean]"&&(!xe||!(typeof Ve=="object"&&xe in Ve))}function pt(Ve){if(Ke)return Ve&&typeof Ve=="object"&&Ve instanceof Symbol;if(typeof Ve=="symbol")return!0;if(!Ve||typeof Ve!="object"||!Se)return!1;try{return Se.call(Ve),!0}catch{}return!1}function Lt(Ve){if(!Ve||typeof Ve!="object"||!Ee)return!1;try{return Ee.call(Ve),!0}catch{}return!1}var nn=Object.prototype.hasOwnProperty||function(Ve){return Ve in this};function Kt(Ve,J){return nn.call(Ve,J)}function vn(Ve){return j.call(Ve)}function Gn(Ve){if(Ve.name)return Ve.name;var J=Y.call(N.call(Ve),/^function\s*([\w$]+)/);return J?J[1]:null}function tn(Ve,J){if(Ve.indexOf)return Ve.indexOf(J);for(var ve=0,p=Ve.length;ve<p;ve++)if(Ve[ve]===J)return ve;return-1}function dr(Ve){if(!t||!Ve||typeof Ve!="object")return!1;try{t.call(Ve);try{l.call(Ve)}catch{return!0}return Ve instanceof Map}catch{}return!1}function Pn(Ve){if(!y||!Ve||typeof Ve!="object")return!1;try{y.call(Ve,y);try{B.call(Ve,B)}catch{return!0}return Ve instanceof WeakMap}catch{}return!1}function pn(Ve){if(!P||!Ve||typeof Ve!="object")return!1;try{return P.call(Ve),!0}catch{}return!1}function $n(Ve){if(!l||!Ve||typeof Ve!="object")return!1;try{l.call(Ve);try{t.call(Ve)}catch{return!0}return Ve instanceof Set}catch{}return!1}function lr(Ve){if(!B||!Ve||typeof Ve!="object")return!1;try{B.call(Ve,B);try{y.call(Ve,y)}catch{return!0}return Ve instanceof WeakSet}catch{}return!1}function vr(Ve){return!Ve||typeof Ve!="object"?!1:typeof HTMLElement<"u"&&Ve instanceof HTMLElement?!0:typeof Ve.nodeName=="string"&&typeof Ve.getAttribute=="function"}function Zn(Ve,J){if(Ve.length>J.maxStringLength){var ve=Ve.length-J.maxStringLength,p="... "+ve+" more character"+(ve>1?"s":"");return Zn(H.call(Ve,0,J.maxStringLength),J)+p}var Fe=bt[J.quoteStyle||"single"];Fe.lastIndex=0;var Qe=se.call(se.call(Ve,Fe,"\\$1"),/[\x00-\x1f]/g,Ge);return Yt(Qe,"single",J)}function Ge(Ve){var J=Ve.charCodeAt(0),ve={8:"b",9:"t",10:"n",12:"f",13:"r"}[J];return ve?"\\"+ve:"\\x"+(J<16?"0":"")+re.call(J.toString(16))}function ce(Ve){return"Object("+Ve+")"}function pe(Ve){return Ve+" { ? }"}function nt(Ve,J,ve,p){var Fe=p?sn(ve,p):oe.call(ve,", ");return Ve+" ("+J+") {"+Fe+"}"}function wt(Ve){for(var J=0;J<Ve.length;J++)if(tn(Ve[J],`
`)>=0)return!1;return!0}function Ht(Ve,J){var ve;if(Ve.indent==="	")ve="	";else if(typeof Ve.indent=="number"&&Ve.indent>0)ve=oe.call(Array(Ve.indent+1)," ");else return null;return{base:ve,prev:oe.call(Array(J+1),ve)}}function sn(Ve,J){if(Ve.length===0)return"";var ve=`
`+J.prev+J.base;return ve+oe.call(Ve,","+ve)+`
`+J.prev}function Hn(Ve,J){var ve=Ft(Ve),p=[];if(ve){p.length=Ve.length;for(var Fe=0;Fe<Ve.length;Fe++)p[Fe]=Kt(Ve,Fe)?J(Ve[Fe],Ve):""}var Qe=typeof me=="function"?me(Ve):[],rt;if(Ke){rt={};for(var ct=0;ct<Qe.length;ct++)rt["$"+Qe[ct]]=Qe[ct]}for(var dt in Ve)Kt(Ve,dt)&&(ve&&String(Number(dt))===dt&&dt<Ve.length||Ke&&rt["$"+dt]instanceof Symbol||(ne.call(/[^\w$]/,dt)?p.push(J(dt,Ve)+": "+J(Ve[dt],Ve)):p.push(dt+": "+J(Ve[dt],Ve))));if(typeof me=="function")for(var qt=0;qt<Qe.length;qt++)at.call(Ve,Qe[qt])&&p.push("["+J(Qe[qt])+"]: "+J(Ve[Qe[qt]],Ve));return p}return OS}var IS,yR;function KAe(){if(yR)return IS;yR=1;var n=e3(),e=qy(),t=function(o,f,y){for(var x=o,B;(B=x.next)!=null;x=B)if(B.key===f)return x.next=B.next,y||(B.next=o.next,o.next=B),B},r=function(o,f){if(o){var y=t(o,f);return y&&y.value}},i=function(o,f,y){var x=t(o,f);x?x.value=y:o.next={key:f,next:o.next,value:y}},s=function(o,f){return o?!!t(o,f):!1},l=function(o,f){if(o)return t(o,f,!0)};return IS=function(){var f,y={assert:function(x){if(!y.has(x))throw new e("Side channel does not contain "+n(x))},delete:function(x){var B=f&&f.next,O=l(f,x);return O&&B&&B===O&&(f=void 0),!!O},get:function(x){return r(f,x)},has:function(x){return s(f,x)},set:function(x,B){f||(f={next:void 0}),i(f,x,B)}};return y},IS}var kS,vR;function Gj(){return vR||(vR=1,kS=Object),kS}var TS,CR;function RAe(){return CR||(CR=1,TS=Error),TS}var PS,_R;function DAe(){return _R||(_R=1,PS=EvalError),PS}var KS,bR;function FAe(){return bR||(bR=1,KS=RangeError),KS}var RS,xR;function LAe(){return xR||(xR=1,RS=ReferenceError),RS}var DS,MR;function UAe(){return MR||(MR=1,DS=SyntaxError),DS}var FS,wR;function zAe(){return wR||(wR=1,FS=URIError),FS}var LS,SR;function jAe(){return SR||(SR=1,LS=Math.abs),LS}var US,ER;function NAe(){return ER||(ER=1,US=Math.floor),US}var zS,BR;function WAe(){return BR||(BR=1,zS=Math.max),zS}var jS,OR;function GAe(){return OR||(OR=1,jS=Math.min),jS}var NS,IR;function QAe(){return IR||(IR=1,NS=Math.pow),NS}var WS,kR;function YAe(){return kR||(kR=1,WS=Math.round),WS}var GS,TR;function qAe(){return TR||(TR=1,GS=Number.isNaN||function(e){return e!==e}),GS}var QS,PR;function VAe(){if(PR)return QS;PR=1;var n=qAe();return QS=function(t){return n(t)||t===0?t:t<0?-1:1},QS}var YS,KR;function $Ae(){return KR||(KR=1,YS=Object.getOwnPropertyDescriptor),YS}var qS,RR;function Qj(){if(RR)return qS;RR=1;var n=$Ae();if(n)try{n([],"length")}catch{n=null}return qS=n,qS}var VS,DR;function HAe(){if(DR)return VS;DR=1;var n=Object.defineProperty||!1;if(n)try{n({},"a",{value:1})}catch{n=!1}return VS=n,VS}var $S,FR;function ZAe(){return FR||(FR=1,$S=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),r=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(r)!=="[object Symbol]")return!1;var i=42;e[t]=i;for(var s in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var l=Object.getOwnPropertySymbols(e);if(l.length!==1||l[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(e,t);if(o.value!==i||o.enumerable!==!0)return!1}return!0}),$S}var HS,LR;function XAe(){if(LR)return HS;LR=1;var n=typeof Symbol<"u"&&Symbol,e=ZAe();return HS=function(){return typeof n!="function"||typeof Symbol!="function"||typeof n("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},HS}var ZS,UR;function Yj(){return UR||(UR=1,ZS=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),ZS}var XS,zR;function qj(){if(zR)return XS;zR=1;var n=Gj();return XS=n.getPrototypeOf||null,XS}var JS,jR;function JAe(){if(jR)return JS;jR=1;var n="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,t=Math.max,r="[object Function]",i=function(f,y){for(var x=[],B=0;B<f.length;B+=1)x[B]=f[B];for(var O=0;O<y.length;O+=1)x[O+f.length]=y[O];return x},s=function(f,y){for(var x=[],B=y,O=0;B<f.length;B+=1,O+=1)x[O]=f[B];return x},l=function(o,f){for(var y="",x=0;x<o.length;x+=1)y+=o[x],x+1<o.length&&(y+=f);return y};return JS=function(f){var y=this;if(typeof y!="function"||e.apply(y)!==r)throw new TypeError(n+y);for(var x=s(arguments,1),B,O=function(){if(this instanceof B){var Y=y.apply(this,i(x,arguments));return Object(Y)===Y?Y:this}return y.apply(f,i(x,arguments))},P=t(0,y.length-x.length),U=[],j=0;j<P;j++)U[j]="$"+j;if(B=Function("binder","return function ("+l(U,",")+"){ return binder.apply(this,arguments); }")(O),y.prototype){var N=function(){};N.prototype=y.prototype,B.prototype=new N,N.prototype=null}return B},JS}var eE,NR;function t3(){if(NR)return eE;NR=1;var n=JAe();return eE=Function.prototype.bind||n,eE}var tE,WR;function qO(){return WR||(WR=1,tE=Function.prototype.call),tE}var nE,GR;function Vj(){return GR||(GR=1,nE=Function.prototype.apply),nE}var rE,QR;function ece(){return QR||(QR=1,rE=typeof Reflect<"u"&&Reflect&&Reflect.apply),rE}var iE,YR;function tce(){if(YR)return iE;YR=1;var n=t3(),e=Vj(),t=qO(),r=ece();return iE=r||n.call(t,e),iE}var oE,qR;function $j(){if(qR)return oE;qR=1;var n=t3(),e=qy(),t=qO(),r=tce();return oE=function(s){if(s.length<1||typeof s[0]!="function")throw new e("a function is required");return r(n,t,s)},oE}var sE,VR;function nce(){if(VR)return sE;VR=1;var n=$j(),e=Qj(),t;try{t=[].__proto__===Array.prototype}catch(l){if(!l||typeof l!="object"||!("code"in l)||l.code!=="ERR_PROTO_ACCESS")throw l}var r=!!t&&e&&e(Object.prototype,"__proto__"),i=Object,s=i.getPrototypeOf;return sE=r&&typeof r.get=="function"?n([r.get]):typeof s=="function"?function(o){return s(o==null?o:i(o))}:!1,sE}var aE,$R;function rce(){if($R)return aE;$R=1;var n=Yj(),e=qj(),t=nce();return aE=n?function(i){return n(i)}:e?function(i){if(!i||typeof i!="object"&&typeof i!="function")throw new TypeError("getProto: not an object");return e(i)}:t?function(i){return t(i)}:null,aE}var lE,HR;function ice(){if(HR)return lE;HR=1;var n=Function.prototype.call,e=Object.prototype.hasOwnProperty,t=t3();return lE=t.call(n,e),lE}var uE,ZR;function VO(){if(ZR)return uE;ZR=1;var n,e=Gj(),t=RAe(),r=DAe(),i=FAe(),s=LAe(),l=UAe(),o=qy(),f=zAe(),y=jAe(),x=NAe(),B=WAe(),O=GAe(),P=QAe(),U=YAe(),j=VAe(),N=Function,Y=function(Pe){try{return N('"use strict"; return ('+Pe+").constructor;")()}catch{}},H=Qj(),se=HAe(),re=function(){throw new o},V=H?function(){try{return arguments.callee,re}catch{try{return H(arguments,"callee").get}catch{return re}}}():re,ne=XAe()(),G=rce(),oe=qj(),he=Yj(),fe=Vj(),Ee=qO(),me={},Se=typeof Uint8Array>"u"||!G?n:G(Uint8Array),Ke={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?n:ArrayBuffer,"%ArrayIteratorPrototype%":ne&&G?G([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":me,"%AsyncGenerator%":me,"%AsyncGeneratorFunction%":me,"%AsyncIteratorPrototype%":me,"%Atomics%":typeof Atomics>"u"?n:Atomics,"%BigInt%":typeof BigInt>"u"?n:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?n:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?n:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":t,"%eval%":eval,"%EvalError%":r,"%Float32Array%":typeof Float32Array>"u"?n:Float32Array,"%Float64Array%":typeof Float64Array>"u"?n:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?n:FinalizationRegistry,"%Function%":N,"%GeneratorFunction%":me,"%Int8Array%":typeof Int8Array>"u"?n:Int8Array,"%Int16Array%":typeof Int16Array>"u"?n:Int16Array,"%Int32Array%":typeof Int32Array>"u"?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":ne&&G?G(G([][Symbol.iterator]())):n,"%JSON%":typeof JSON=="object"?JSON:n,"%Map%":typeof Map>"u"?n:Map,"%MapIteratorPrototype%":typeof Map>"u"||!ne||!G?n:G(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":e,"%Object.getOwnPropertyDescriptor%":H,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?n:Promise,"%Proxy%":typeof Proxy>"u"?n:Proxy,"%RangeError%":i,"%ReferenceError%":s,"%Reflect%":typeof Reflect>"u"?n:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?n:Set,"%SetIteratorPrototype%":typeof Set>"u"||!ne||!G?n:G(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":ne&&G?G(""[Symbol.iterator]()):n,"%Symbol%":ne?Symbol:n,"%SyntaxError%":l,"%ThrowTypeError%":V,"%TypedArray%":Se,"%TypeError%":o,"%Uint8Array%":typeof Uint8Array>"u"?n:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?n:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?n:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?n:Uint32Array,"%URIError%":f,"%WeakMap%":typeof WeakMap>"u"?n:WeakMap,"%WeakRef%":typeof WeakRef>"u"?n:WeakRef,"%WeakSet%":typeof WeakSet>"u"?n:WeakSet,"%Function.prototype.call%":Ee,"%Function.prototype.apply%":fe,"%Object.defineProperty%":se,"%Object.getPrototypeOf%":oe,"%Math.abs%":y,"%Math.floor%":x,"%Math.max%":B,"%Math.min%":O,"%Math.pow%":P,"%Math.round%":U,"%Math.sign%":j,"%Reflect.getPrototypeOf%":he};if(G)try{null.error}catch(Pe){var xe=G(G(Pe));Ke["%Error.prototype%"]=xe}var at=function Pe(Be){var it;if(Be==="%AsyncFunction%")it=Y("async function () {}");else if(Be==="%GeneratorFunction%")it=Y("function* () {}");else if(Be==="%AsyncGeneratorFunction%")it=Y("async function* () {}");else if(Be==="%AsyncGenerator%"){var _t=Pe("%AsyncGeneratorFunction%");_t&&(it=_t.prototype)}else if(Be==="%AsyncIteratorPrototype%"){var pt=Pe("%AsyncGenerator%");pt&&G&&(it=G(pt.prototype))}return Ke[Be]=it,it},Ze={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Je=t3(),Ne=ice(),we=Je.call(Ee,Array.prototype.concat),De=Je.call(fe,Array.prototype.splice),He=Je.call(Ee,String.prototype.replace),bt=Je.call(Ee,String.prototype.slice),Yt=Je.call(Ee,RegExp.prototype.exec),yt=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Ft=/\\(\\)?/g,Pt=function(Be){var it=bt(Be,0,1),_t=bt(Be,-1);if(it==="%"&&_t!=="%")throw new l("invalid intrinsic syntax, expected closing `%`");if(_t==="%"&&it!=="%")throw new l("invalid intrinsic syntax, expected opening `%`");var pt=[];return He(Be,yt,function(Lt,nn,Kt,vn){pt[pt.length]=Kt?He(vn,Ft,"$1"):nn||Lt}),pt},Ue=function(Be,it){var _t=Be,pt;if(Ne(Ze,_t)&&(pt=Ze[_t],_t="%"+pt[0]+"%"),Ne(Ke,_t)){var Lt=Ke[_t];if(Lt===me&&(Lt=at(_t)),typeof Lt>"u"&&!it)throw new o("intrinsic "+Be+" exists, but is not available. Please file an issue!");return{alias:pt,name:_t,value:Lt}}throw new l("intrinsic "+Be+" does not exist!")};return uE=function(Be,it){if(typeof Be!="string"||Be.length===0)throw new o("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof it!="boolean")throw new o('"allowMissing" argument must be a boolean');if(Yt(/^%?[^%]*%?$/,Be)===null)throw new l("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var _t=Pt(Be),pt=_t.length>0?_t[0]:"",Lt=Ue("%"+pt+"%",it),nn=Lt.name,Kt=Lt.value,vn=!1,Gn=Lt.alias;Gn&&(pt=Gn[0],De(_t,we([0,1],Gn)));for(var tn=1,dr=!0;tn<_t.length;tn+=1){var Pn=_t[tn],pn=bt(Pn,0,1),$n=bt(Pn,-1);if((pn==='"'||pn==="'"||pn==="`"||$n==='"'||$n==="'"||$n==="`")&&pn!==$n)throw new l("property names with quotes must have matching quotes");if((Pn==="constructor"||!dr)&&(vn=!0),pt+="."+Pn,nn="%"+pt+"%",Ne(Ke,nn))Kt=Ke[nn];else if(Kt!=null){if(!(Pn in Kt)){if(!it)throw new o("base intrinsic for "+Be+" exists, but the property is not available.");return}if(H&&tn+1>=_t.length){var lr=H(Kt,Pn);dr=!!lr,dr&&"get"in lr&&!("originalValue"in lr.get)?Kt=lr.get:Kt=Kt[Pn]}else dr=Ne(Kt,Pn),Kt=Kt[Pn];dr&&!vn&&(Ke[nn]=Kt)}}return Kt},uE}var AE,XR;function Hj(){if(XR)return AE;XR=1;var n=VO(),e=$j(),t=e([n("%String.prototype.indexOf%")]);return AE=function(i,s){var l=n(i,!!s);return typeof l=="function"&&t(i,".prototype.")>-1?e([l]):l},AE}var cE,JR;function Zj(){if(JR)return cE;JR=1;var n=VO(),e=Hj(),t=e3(),r=qy(),i=n("%Map%",!0),s=e("Map.prototype.get",!0),l=e("Map.prototype.set",!0),o=e("Map.prototype.has",!0),f=e("Map.prototype.delete",!0),y=e("Map.prototype.size",!0);return cE=!!i&&function(){var B,O={assert:function(P){if(!O.has(P))throw new r("Side channel does not contain "+t(P))},delete:function(P){if(B){var U=f(B,P);return y(B)===0&&(B=void 0),U}return!1},get:function(P){if(B)return s(B,P)},has:function(P){return B?o(B,P):!1},set:function(P,U){B||(B=new i),l(B,P,U)}};return O},cE}var dE,eD;function oce(){if(eD)return dE;eD=1;var n=VO(),e=Hj(),t=e3(),r=Zj(),i=qy(),s=n("%WeakMap%",!0),l=e("WeakMap.prototype.get",!0),o=e("WeakMap.prototype.set",!0),f=e("WeakMap.prototype.has",!0),y=e("WeakMap.prototype.delete",!0);return dE=s?function(){var B,O,P={assert:function(U){if(!P.has(U))throw new i("Side channel does not contain "+t(U))},delete:function(U){if(s&&U&&(typeof U=="object"||typeof U=="function")){if(B)return y(B,U)}else if(r&&O)return O.delete(U);return!1},get:function(U){return s&&U&&(typeof U=="object"||typeof U=="function")&&B?l(B,U):O&&O.get(U)},has:function(U){return s&&U&&(typeof U=="object"||typeof U=="function")&&B?f(B,U):!!O&&O.has(U)},set:function(U,j){s&&U&&(typeof U=="object"||typeof U=="function")?(B||(B=new s),o(B,U,j)):r&&(O||(O=r()),O.set(U,j))}};return P}:r,dE}var hE,tD;function sce(){if(tD)return hE;tD=1;var n=qy(),e=e3(),t=KAe(),r=Zj(),i=oce(),s=i||r||t;return hE=function(){var o,f={assert:function(y){if(!f.has(y))throw new n("Side channel does not contain "+e(y))},delete:function(y){return!!o&&o.delete(y)},get:function(y){return o&&o.get(y)},has:function(y){return!!o&&o.has(y)},set:function(y,x){o||(o=s()),o.set(y,x)}};return f},hE}var fE,nD;function $O(){if(nD)return fE;nD=1;var n=String.prototype.replace,e=/%20/g,t={RFC1738:"RFC1738",RFC3986:"RFC3986"};return fE={default:t.RFC3986,formatters:{RFC1738:function(r){return n.call(r,e,"+")},RFC3986:function(r){return String(r)}},RFC1738:t.RFC1738,RFC3986:t.RFC3986},fE}var pE,rD;function Xj(){if(rD)return pE;rD=1;var n=$O(),e=Object.prototype.hasOwnProperty,t=Array.isArray,r=function(){for(var N=[],Y=0;Y<256;++Y)N.push("%"+((Y<16?"0":"")+Y.toString(16)).toUpperCase());return N}(),i=function(Y){for(;Y.length>1;){var H=Y.pop(),se=H.obj[H.prop];if(t(se)){for(var re=[],V=0;V<se.length;++V)typeof se[V]<"u"&&re.push(se[V]);H.obj[H.prop]=re}}},s=function(Y,H){for(var se=H&&H.plainObjects?{__proto__:null}:{},re=0;re<Y.length;++re)typeof Y[re]<"u"&&(se[re]=Y[re]);return se},l=function N(Y,H,se){if(!H)return Y;if(typeof H!="object"&&typeof H!="function"){if(t(Y))Y.push(H);else if(Y&&typeof Y=="object")(se&&(se.plainObjects||se.allowPrototypes)||!e.call(Object.prototype,H))&&(Y[H]=!0);else return[Y,H];return Y}if(!Y||typeof Y!="object")return[Y].concat(H);var re=Y;return t(Y)&&!t(H)&&(re=s(Y,se)),t(Y)&&t(H)?(H.forEach(function(V,ne){if(e.call(Y,ne)){var G=Y[ne];G&&typeof G=="object"&&V&&typeof V=="object"?Y[ne]=N(G,V,se):Y.push(V)}else Y[ne]=V}),Y):Object.keys(H).reduce(function(V,ne){var G=H[ne];return e.call(V,ne)?V[ne]=N(V[ne],G,se):V[ne]=G,V},re)},o=function(Y,H){return Object.keys(H).reduce(function(se,re){return se[re]=H[re],se},Y)},f=function(N,Y,H){var se=N.replace(/\+/g," ");if(H==="iso-8859-1")return se.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(se)}catch{return se}},y=1024,x=function(Y,H,se,re,V){if(Y.length===0)return Y;var ne=Y;if(typeof Y=="symbol"?ne=Symbol.prototype.toString.call(Y):typeof Y!="string"&&(ne=String(Y)),se==="iso-8859-1")return escape(ne).replace(/%u[0-9a-f]{4}/gi,function(Se){return"%26%23"+parseInt(Se.slice(2),16)+"%3B"});for(var G="",oe=0;oe<ne.length;oe+=y){for(var he=ne.length>=y?ne.slice(oe,oe+y):ne,fe=[],Ee=0;Ee<he.length;++Ee){var me=he.charCodeAt(Ee);if(me===45||me===46||me===95||me===126||me>=48&&me<=57||me>=65&&me<=90||me>=97&&me<=122||V===n.RFC1738&&(me===40||me===41)){fe[fe.length]=he.charAt(Ee);continue}if(me<128){fe[fe.length]=r[me];continue}if(me<2048){fe[fe.length]=r[192|me>>6]+r[128|me&63];continue}if(me<55296||me>=57344){fe[fe.length]=r[224|me>>12]+r[128|me>>6&63]+r[128|me&63];continue}Ee+=1,me=65536+((me&1023)<<10|he.charCodeAt(Ee)&1023),fe[fe.length]=r[240|me>>18]+r[128|me>>12&63]+r[128|me>>6&63]+r[128|me&63]}G+=fe.join("")}return G},B=function(Y){for(var H=[{obj:{o:Y},prop:"o"}],se=[],re=0;re<H.length;++re)for(var V=H[re],ne=V.obj[V.prop],G=Object.keys(ne),oe=0;oe<G.length;++oe){var he=G[oe],fe=ne[he];typeof fe=="object"&&fe!==null&&se.indexOf(fe)===-1&&(H.push({obj:ne,prop:he}),se.push(fe))}return i(H),Y},O=function(Y){return Object.prototype.toString.call(Y)==="[object RegExp]"},P=function(Y){return!Y||typeof Y!="object"?!1:!!(Y.constructor&&Y.constructor.isBuffer&&Y.constructor.isBuffer(Y))},U=function(Y,H){return[].concat(Y,H)},j=function(Y,H){if(t(Y)){for(var se=[],re=0;re<Y.length;re+=1)se.push(H(Y[re]));return se}return H(Y)};return pE={arrayToObject:s,assign:o,combine:U,compact:B,decode:f,encode:x,isBuffer:P,isRegExp:O,maybeMap:j,merge:l},pE}var mE,iD;function ace(){if(iD)return mE;iD=1;var n=sce(),e=Xj(),t=$O(),r=Object.prototype.hasOwnProperty,i={brackets:function(N){return N+"[]"},comma:"comma",indices:function(N,Y){return N+"["+Y+"]"},repeat:function(N){return N}},s=Array.isArray,l=Array.prototype.push,o=function(j,N){l.apply(j,s(N)?N:[N])},f=Date.prototype.toISOString,y=t.default,x={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:e.encode,encodeValuesOnly:!1,filter:void 0,format:y,formatter:t.formatters[y],indices:!1,serializeDate:function(N){return f.call(N)},skipNulls:!1,strictNullHandling:!1},B=function(N){return typeof N=="string"||typeof N=="number"||typeof N=="boolean"||typeof N=="symbol"||typeof N=="bigint"},O={},P=function j(N,Y,H,se,re,V,ne,G,oe,he,fe,Ee,me,Se,Ke,xe,at,Ze){for(var Je=N,Ne=Ze,we=0,De=!1;(Ne=Ne.get(O))!==void 0&&!De;){var He=Ne.get(N);if(we+=1,typeof He<"u"){if(He===we)throw new RangeError("Cyclic object value");De=!0}typeof Ne.get(O)>"u"&&(we=0)}if(typeof he=="function"?Je=he(Y,Je):Je instanceof Date?Je=me(Je):H==="comma"&&s(Je)&&(Je=e.maybeMap(Je,function(nn){return nn instanceof Date?me(nn):nn})),Je===null){if(V)return oe&&!xe?oe(Y,x.encoder,at,"key",Se):Y;Je=""}if(B(Je)||e.isBuffer(Je)){if(oe){var bt=xe?Y:oe(Y,x.encoder,at,"key",Se);return[Ke(bt)+"="+Ke(oe(Je,x.encoder,at,"value",Se))]}return[Ke(Y)+"="+Ke(String(Je))]}var Yt=[];if(typeof Je>"u")return Yt;var yt;if(H==="comma"&&s(Je))xe&&oe&&(Je=e.maybeMap(Je,oe)),yt=[{value:Je.length>0?Je.join(",")||null:void 0}];else if(s(he))yt=he;else{var Ft=Object.keys(Je);yt=fe?Ft.sort(fe):Ft}var Pt=G?String(Y).replace(/\./g,"%2E"):String(Y),Ue=se&&s(Je)&&Je.length===1?Pt+"[]":Pt;if(re&&s(Je)&&Je.length===0)return Ue+"[]";for(var Pe=0;Pe<yt.length;++Pe){var Be=yt[Pe],it=typeof Be=="object"&&Be&&typeof Be.value<"u"?Be.value:Je[Be];if(!(ne&&it===null)){var _t=Ee&&G?String(Be).replace(/\./g,"%2E"):String(Be),pt=s(Je)?typeof H=="function"?H(Ue,_t):Ue:Ue+(Ee?"."+_t:"["+_t+"]");Ze.set(N,we);var Lt=n();Lt.set(O,Ze),o(Yt,j(it,pt,H,se,re,V,ne,G,H==="comma"&&xe&&s(Je)?null:oe,he,fe,Ee,me,Se,Ke,xe,at,Lt))}}return Yt},U=function(N){if(!N)return x;if(typeof N.allowEmptyArrays<"u"&&typeof N.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof N.encodeDotInKeys<"u"&&typeof N.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(N.encoder!==null&&typeof N.encoder<"u"&&typeof N.encoder!="function")throw new TypeError("Encoder has to be a function.");var Y=N.charset||x.charset;if(typeof N.charset<"u"&&N.charset!=="utf-8"&&N.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var H=t.default;if(typeof N.format<"u"){if(!r.call(t.formatters,N.format))throw new TypeError("Unknown format option provided.");H=N.format}var se=t.formatters[H],re=x.filter;(typeof N.filter=="function"||s(N.filter))&&(re=N.filter);var V;if(N.arrayFormat in i?V=N.arrayFormat:"indices"in N?V=N.indices?"indices":"repeat":V=x.arrayFormat,"commaRoundTrip"in N&&typeof N.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var ne=typeof N.allowDots>"u"?N.encodeDotInKeys===!0?!0:x.allowDots:!!N.allowDots;return{addQueryPrefix:typeof N.addQueryPrefix=="boolean"?N.addQueryPrefix:x.addQueryPrefix,allowDots:ne,allowEmptyArrays:typeof N.allowEmptyArrays=="boolean"?!!N.allowEmptyArrays:x.allowEmptyArrays,arrayFormat:V,charset:Y,charsetSentinel:typeof N.charsetSentinel=="boolean"?N.charsetSentinel:x.charsetSentinel,commaRoundTrip:!!N.commaRoundTrip,delimiter:typeof N.delimiter>"u"?x.delimiter:N.delimiter,encode:typeof N.encode=="boolean"?N.encode:x.encode,encodeDotInKeys:typeof N.encodeDotInKeys=="boolean"?N.encodeDotInKeys:x.encodeDotInKeys,encoder:typeof N.encoder=="function"?N.encoder:x.encoder,encodeValuesOnly:typeof N.encodeValuesOnly=="boolean"?N.encodeValuesOnly:x.encodeValuesOnly,filter:re,format:H,formatter:se,serializeDate:typeof N.serializeDate=="function"?N.serializeDate:x.serializeDate,skipNulls:typeof N.skipNulls=="boolean"?N.skipNulls:x.skipNulls,sort:typeof N.sort=="function"?N.sort:null,strictNullHandling:typeof N.strictNullHandling=="boolean"?N.strictNullHandling:x.strictNullHandling}};return mE=function(j,N){var Y=j,H=U(N),se,re;typeof H.filter=="function"?(re=H.filter,Y=re("",Y)):s(H.filter)&&(re=H.filter,se=re);var V=[];if(typeof Y!="object"||Y===null)return"";var ne=i[H.arrayFormat],G=ne==="comma"&&H.commaRoundTrip;se||(se=Object.keys(Y)),H.sort&&se.sort(H.sort);for(var oe=n(),he=0;he<se.length;++he){var fe=se[he],Ee=Y[fe];H.skipNulls&&Ee===null||o(V,P(Ee,fe,ne,G,H.allowEmptyArrays,H.strictNullHandling,H.skipNulls,H.encodeDotInKeys,H.encode?H.encoder:null,H.filter,H.sort,H.allowDots,H.serializeDate,H.format,H.formatter,H.encodeValuesOnly,H.charset,oe))}var me=V.join(H.delimiter),Se=H.addQueryPrefix===!0?"?":"";return H.charsetSentinel&&(H.charset==="iso-8859-1"?Se+="utf8=%26%2310003%3B&":Se+="utf8=%E2%9C%93&"),me.length>0?Se+me:""},mE}var gE,oD;function lce(){if(oD)return gE;oD=1;var n=Xj(),e=Object.prototype.hasOwnProperty,t=Array.isArray,r={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:n.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1},i=function(O){return O.replace(/&#(\d+);/g,function(P,U){return String.fromCharCode(parseInt(U,10))})},s=function(O,P){return O&&typeof O=="string"&&P.comma&&O.indexOf(",")>-1?O.split(","):O},l="utf8=%26%2310003%3B",o="utf8=%E2%9C%93",f=function(P,U){var j={__proto__:null},N=U.ignoreQueryPrefix?P.replace(/^\?/,""):P;N=N.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var Y=U.parameterLimit===1/0?void 0:U.parameterLimit,H=N.split(U.delimiter,Y),se=-1,re,V=U.charset;if(U.charsetSentinel)for(re=0;re<H.length;++re)H[re].indexOf("utf8=")===0&&(H[re]===o?V="utf-8":H[re]===l&&(V="iso-8859-1"),se=re,re=H.length);for(re=0;re<H.length;++re)if(re!==se){var ne=H[re],G=ne.indexOf("]="),oe=G===-1?ne.indexOf("="):G+1,he,fe;oe===-1?(he=U.decoder(ne,r.decoder,V,"key"),fe=U.strictNullHandling?null:""):(he=U.decoder(ne.slice(0,oe),r.decoder,V,"key"),fe=n.maybeMap(s(ne.slice(oe+1),U),function(me){return U.decoder(me,r.decoder,V,"value")})),fe&&U.interpretNumericEntities&&V==="iso-8859-1"&&(fe=i(String(fe))),ne.indexOf("[]=")>-1&&(fe=t(fe)?[fe]:fe);var Ee=e.call(j,he);Ee&&U.duplicates==="combine"?j[he]=n.combine(j[he],fe):(!Ee||U.duplicates==="last")&&(j[he]=fe)}return j},y=function(O,P,U,j){for(var N=j?P:s(P,U),Y=O.length-1;Y>=0;--Y){var H,se=O[Y];if(se==="[]"&&U.parseArrays)H=U.allowEmptyArrays&&(N===""||U.strictNullHandling&&N===null)?[]:[].concat(N);else{H=U.plainObjects?{__proto__:null}:{};var re=se.charAt(0)==="["&&se.charAt(se.length-1)==="]"?se.slice(1,-1):se,V=U.decodeDotInKeys?re.replace(/%2E/g,"."):re,ne=parseInt(V,10);!U.parseArrays&&V===""?H={0:N}:!isNaN(ne)&&se!==V&&String(ne)===V&&ne>=0&&U.parseArrays&&ne<=U.arrayLimit?(H=[],H[ne]=N):V!=="__proto__"&&(H[V]=N)}N=H}return N},x=function(P,U,j,N){if(P){var Y=j.allowDots?P.replace(/\.([^.[]+)/g,"[$1]"):P,H=/(\[[^[\]]*])/,se=/(\[[^[\]]*])/g,re=j.depth>0&&H.exec(Y),V=re?Y.slice(0,re.index):Y,ne=[];if(V){if(!j.plainObjects&&e.call(Object.prototype,V)&&!j.allowPrototypes)return;ne.push(V)}for(var G=0;j.depth>0&&(re=se.exec(Y))!==null&&G<j.depth;){if(G+=1,!j.plainObjects&&e.call(Object.prototype,re[1].slice(1,-1))&&!j.allowPrototypes)return;ne.push(re[1])}if(re){if(j.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+j.depth+" and strictDepth is true");ne.push("["+Y.slice(re.index)+"]")}return y(ne,U,j,N)}},B=function(P){if(!P)return r;if(typeof P.allowEmptyArrays<"u"&&typeof P.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof P.decodeDotInKeys<"u"&&typeof P.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(P.decoder!==null&&typeof P.decoder<"u"&&typeof P.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof P.charset<"u"&&P.charset!=="utf-8"&&P.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var U=typeof P.charset>"u"?r.charset:P.charset,j=typeof P.duplicates>"u"?r.duplicates:P.duplicates;if(j!=="combine"&&j!=="first"&&j!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var N=typeof P.allowDots>"u"?P.decodeDotInKeys===!0?!0:r.allowDots:!!P.allowDots;return{allowDots:N,allowEmptyArrays:typeof P.allowEmptyArrays=="boolean"?!!P.allowEmptyArrays:r.allowEmptyArrays,allowPrototypes:typeof P.allowPrototypes=="boolean"?P.allowPrototypes:r.allowPrototypes,allowSparse:typeof P.allowSparse=="boolean"?P.allowSparse:r.allowSparse,arrayLimit:typeof P.arrayLimit=="number"?P.arrayLimit:r.arrayLimit,charset:U,charsetSentinel:typeof P.charsetSentinel=="boolean"?P.charsetSentinel:r.charsetSentinel,comma:typeof P.comma=="boolean"?P.comma:r.comma,decodeDotInKeys:typeof P.decodeDotInKeys=="boolean"?P.decodeDotInKeys:r.decodeDotInKeys,decoder:typeof P.decoder=="function"?P.decoder:r.decoder,delimiter:typeof P.delimiter=="string"||n.isRegExp(P.delimiter)?P.delimiter:r.delimiter,depth:typeof P.depth=="number"||P.depth===!1?+P.depth:r.depth,duplicates:j,ignoreQueryPrefix:P.ignoreQueryPrefix===!0,interpretNumericEntities:typeof P.interpretNumericEntities=="boolean"?P.interpretNumericEntities:r.interpretNumericEntities,parameterLimit:typeof P.parameterLimit=="number"?P.parameterLimit:r.parameterLimit,parseArrays:P.parseArrays!==!1,plainObjects:typeof P.plainObjects=="boolean"?P.plainObjects:r.plainObjects,strictDepth:typeof P.strictDepth=="boolean"?!!P.strictDepth:r.strictDepth,strictNullHandling:typeof P.strictNullHandling=="boolean"?P.strictNullHandling:r.strictNullHandling}};return gE=function(O,P){var U=B(P);if(O===""||O===null||typeof O>"u")return U.plainObjects?{__proto__:null}:{};for(var j=typeof O=="string"?f(O,U):O,N=U.plainObjects?{__proto__:null}:{},Y=Object.keys(j),H=0;H<Y.length;++H){var se=Y[H],re=x(se,j[se],U,typeof O=="string");N=n.merge(N,re,U)}return U.allowSparse===!0?N:n.compact(N)},gE}var yE,sD;function uce(){if(sD)return yE;sD=1;var n=ace(),e=lce(),t=$O();return yE={formats:t,parse:e,stringify:n},yE}var aD;function Ace(){if(aD)return pg;aD=1;var n=IAe();function e(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var t=/^([a-z0-9.+-]+:)/i,r=/:[0-9]*$/,i=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,s=["<",">",'"',"`"," ","\r",`
`,"	"],l=["{","}","|","\\","^","`"].concat(s),o=["'"].concat(l),f=["%","/","?",";","#"].concat(o),y=["/","?","#"],x=255,B=/^[+a-z0-9A-Z_-]{0,63}$/,O=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,P={javascript:!0,"javascript:":!0},U={javascript:!0,"javascript:":!0},j={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},N=uce();function Y(V,ne,G){if(V&&typeof V=="object"&&V instanceof e)return V;var oe=new e;return oe.parse(V,ne,G),oe}e.prototype.parse=function(V,ne,G){if(typeof V!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof V);var oe=V.indexOf("?"),he=oe!==-1&&oe<V.indexOf("#")?"?":"#",fe=V.split(he),Ee=/\\/g;fe[0]=fe[0].replace(Ee,"/"),V=fe.join(he);var me=V;if(me=me.trim(),!G&&V.split("#").length===1){var Se=i.exec(me);if(Se)return this.path=me,this.href=me,this.pathname=Se[1],Se[2]?(this.search=Se[2],ne?this.query=N.parse(this.search.substr(1)):this.query=this.search.substr(1)):ne&&(this.search="",this.query={}),this}var Ke=t.exec(me);if(Ke){Ke=Ke[0];var xe=Ke.toLowerCase();this.protocol=xe,me=me.substr(Ke.length)}if(G||Ke||me.match(/^\/\/[^@/]+@[^@/]+/)){var at=me.substr(0,2)==="//";at&&!(Ke&&U[Ke])&&(me=me.substr(2),this.slashes=!0)}if(!U[Ke]&&(at||Ke&&!j[Ke])){for(var Ze=-1,Je=0;Je<y.length;Je++){var Ne=me.indexOf(y[Je]);Ne!==-1&&(Ze===-1||Ne<Ze)&&(Ze=Ne)}var we,De;Ze===-1?De=me.lastIndexOf("@"):De=me.lastIndexOf("@",Ze),De!==-1&&(we=me.slice(0,De),me=me.slice(De+1),this.auth=decodeURIComponent(we)),Ze=-1;for(var Je=0;Je<f.length;Je++){var Ne=me.indexOf(f[Je]);Ne!==-1&&(Ze===-1||Ne<Ze)&&(Ze=Ne)}Ze===-1&&(Ze=me.length),this.host=me.slice(0,Ze),me=me.slice(Ze),this.parseHost(),this.hostname=this.hostname||"";var He=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!He)for(var bt=this.hostname.split(/\./),Je=0,Yt=bt.length;Je<Yt;Je++){var yt=bt[Je];if(yt&&!yt.match(B)){for(var Ft="",Pt=0,Ue=yt.length;Pt<Ue;Pt++)yt.charCodeAt(Pt)>127?Ft+="x":Ft+=yt[Pt];if(!Ft.match(B)){var Pe=bt.slice(0,Je),Be=bt.slice(Je+1),it=yt.match(O);it&&(Pe.push(it[1]),Be.unshift(it[2])),Be.length&&(me="/"+Be.join(".")+me),this.hostname=Pe.join(".");break}}}this.hostname.length>x?this.hostname="":this.hostname=this.hostname.toLowerCase(),He||(this.hostname=n.toASCII(this.hostname));var _t=this.port?":"+this.port:"",pt=this.hostname||"";this.host=pt+_t,this.href+=this.host,He&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),me[0]!=="/"&&(me="/"+me))}if(!P[xe])for(var Je=0,Yt=o.length;Je<Yt;Je++){var Lt=o[Je];if(me.indexOf(Lt)!==-1){var nn=encodeURIComponent(Lt);nn===Lt&&(nn=escape(Lt)),me=me.split(Lt).join(nn)}}var Kt=me.indexOf("#");Kt!==-1&&(this.hash=me.substr(Kt),me=me.slice(0,Kt));var vn=me.indexOf("?");if(vn!==-1?(this.search=me.substr(vn),this.query=me.substr(vn+1),ne&&(this.query=N.parse(this.query)),me=me.slice(0,vn)):ne&&(this.search="",this.query={}),me&&(this.pathname=me),j[xe]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var _t=this.pathname||"",Gn=this.search||"";this.path=_t+Gn}return this.href=this.format(),this};function H(V){return typeof V=="string"&&(V=Y(V)),V instanceof e?V.format():e.prototype.format.call(V)}e.prototype.format=function(){var V=this.auth||"";V&&(V=encodeURIComponent(V),V=V.replace(/%3A/i,":"),V+="@");var ne=this.protocol||"",G=this.pathname||"",oe=this.hash||"",he=!1,fe="";this.host?he=V+this.host:this.hostname&&(he=V+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(he+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(fe=N.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var Ee=this.search||fe&&"?"+fe||"";return ne&&ne.substr(-1)!==":"&&(ne+=":"),this.slashes||(!ne||j[ne])&&he!==!1?(he="//"+(he||""),G&&G.charAt(0)!=="/"&&(G="/"+G)):he||(he=""),oe&&oe.charAt(0)!=="#"&&(oe="#"+oe),Ee&&Ee.charAt(0)!=="?"&&(Ee="?"+Ee),G=G.replace(/[?#]/g,function(me){return encodeURIComponent(me)}),Ee=Ee.replace("#","%23"),ne+he+G+Ee+oe};function se(V,ne){return Y(V,!1,!0).resolve(ne)}e.prototype.resolve=function(V){return this.resolveObject(Y(V,!1,!0)).format()};function re(V,ne){return V?Y(V,!1,!0).resolveObject(ne):ne}return e.prototype.resolveObject=function(V){if(typeof V=="string"){var ne=new e;ne.parse(V,!1,!0),V=ne}for(var G=new e,oe=Object.keys(this),he=0;he<oe.length;he++){var fe=oe[he];G[fe]=this[fe]}if(G.hash=V.hash,V.href==="")return G.href=G.format(),G;if(V.slashes&&!V.protocol){for(var Ee=Object.keys(V),me=0;me<Ee.length;me++){var Se=Ee[me];Se!=="protocol"&&(G[Se]=V[Se])}return j[G.protocol]&&G.hostname&&!G.pathname&&(G.pathname="/",G.path=G.pathname),G.href=G.format(),G}if(V.protocol&&V.protocol!==G.protocol){if(!j[V.protocol]){for(var Ke=Object.keys(V),xe=0;xe<Ke.length;xe++){var at=Ke[xe];G[at]=V[at]}return G.href=G.format(),G}if(G.protocol=V.protocol,!V.host&&!U[V.protocol]){for(var Yt=(V.pathname||"").split("/");Yt.length&&!(V.host=Yt.shift()););V.host||(V.host=""),V.hostname||(V.hostname=""),Yt[0]!==""&&Yt.unshift(""),Yt.length<2&&Yt.unshift(""),G.pathname=Yt.join("/")}else G.pathname=V.pathname;if(G.search=V.search,G.query=V.query,G.host=V.host||"",G.auth=V.auth,G.hostname=V.hostname||V.host,G.port=V.port,G.pathname||G.search){var Ze=G.pathname||"",Je=G.search||"";G.path=Ze+Je}return G.slashes=G.slashes||V.slashes,G.href=G.format(),G}var Ne=G.pathname&&G.pathname.charAt(0)==="/",we=V.host||V.pathname&&V.pathname.charAt(0)==="/",De=we||Ne||G.host&&V.pathname,He=De,bt=G.pathname&&G.pathname.split("/")||[],Yt=V.pathname&&V.pathname.split("/")||[],yt=G.protocol&&!j[G.protocol];if(yt&&(G.hostname="",G.port=null,G.host&&(bt[0]===""?bt[0]=G.host:bt.unshift(G.host)),G.host="",V.protocol&&(V.hostname=null,V.port=null,V.host&&(Yt[0]===""?Yt[0]=V.host:Yt.unshift(V.host)),V.host=null),De=De&&(Yt[0]===""||bt[0]==="")),we)G.host=V.host||V.host===""?V.host:G.host,G.hostname=V.hostname||V.hostname===""?V.hostname:G.hostname,G.search=V.search,G.query=V.query,bt=Yt;else if(Yt.length)bt||(bt=[]),bt.pop(),bt=bt.concat(Yt),G.search=V.search,G.query=V.query;else if(V.search!=null){if(yt){G.host=bt.shift(),G.hostname=G.host;var Ft=G.host&&G.host.indexOf("@")>0?G.host.split("@"):!1;Ft&&(G.auth=Ft.shift(),G.hostname=Ft.shift(),G.host=G.hostname)}return G.search=V.search,G.query=V.query,(G.pathname!==null||G.search!==null)&&(G.path=(G.pathname?G.pathname:"")+(G.search?G.search:"")),G.href=G.format(),G}if(!bt.length)return G.pathname=null,G.search?G.path="/"+G.search:G.path=null,G.href=G.format(),G;for(var Pt=bt.slice(-1)[0],Ue=(G.host||V.host||bt.length>1)&&(Pt==="."||Pt==="..")||Pt==="",Pe=0,Be=bt.length;Be>=0;Be--)Pt=bt[Be],Pt==="."?bt.splice(Be,1):Pt===".."?(bt.splice(Be,1),Pe++):Pe&&(bt.splice(Be,1),Pe--);if(!De&&!He)for(;Pe--;Pe)bt.unshift("..");De&&bt[0]!==""&&(!bt[0]||bt[0].charAt(0)!=="/")&&bt.unshift(""),Ue&&bt.join("/").substr(-1)!=="/"&&bt.push("");var it=bt[0]===""||bt[0]&&bt[0].charAt(0)==="/";if(yt){G.hostname=it?"":bt.length?bt.shift():"",G.host=G.hostname;var Ft=G.host&&G.host.indexOf("@")>0?G.host.split("@"):!1;Ft&&(G.auth=Ft.shift(),G.hostname=Ft.shift(),G.host=G.hostname)}return De=De||G.host&&bt.length,De&&!it&&bt.unshift(""),bt.length>0?G.pathname=bt.join("/"):(G.pathname=null,G.path=null),(G.pathname!==null||G.search!==null)&&(G.path=(G.pathname?G.pathname:"")+(G.search?G.search:"")),G.auth=V.auth||G.auth,G.slashes=G.slashes||V.slashes,G.href=G.format(),G},e.prototype.parseHost=function(){var V=this.host,ne=r.exec(V);ne&&(ne=ne[0],ne!==":"&&(this.port=ne.substr(1)),V=V.substr(0,V.length-ne.length)),V&&(this.hostname=V)},pg.parse=Y,pg.resolve=se,pg.resolveObject=re,pg.format=H,pg.Url=e,pg}var cce=Ace();const lD=fl(cce);function ps(){var n="/home/runner/work/maputnik/maputnik/src/libs/metadata.ts",e="370277aff056c0894d7ae34686219318414cc635",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/metadata.ts",statementMap:{0:{start:{line:3,column:2},end:{line:16,column:5}},1:{start:{line:7,column:4},end:{line:9,column:5}},2:{start:{line:8,column:6},end:{line:8,column:60}},3:{start:{line:10,column:4},end:{line:10,column:27}},4:{start:{line:12,column:4},end:{line:12,column:13}},5:{start:{line:14,column:4},end:{line:14,column:95}},6:{start:{line:15,column:4},end:{line:15,column:21}},7:{start:{line:19,column:2},end:{line:19,column:34}},8:{start:{line:19,column:20},end:{line:19,column:34}},9:{start:{line:20,column:17},end:{line:20,column:42}},10:{start:{line:21,column:23},end:{line:21,column:57}},11:{start:{line:22,column:2},end:{line:26,column:3}},12:{start:{line:23,column:4},end:{line:23,column:41}},13:{start:{line:25,column:4},end:{line:25,column:69}},14:{start:{line:27,column:14},end:{line:27,column:35}},15:{start:{line:28,column:2},end:{line:28,column:24}},16:{start:{line:31,column:2},end:{line:31,column:30}},17:{start:{line:31,column:16},end:{line:31,column:30}},18:{start:{line:32,column:14},end:{line:32,column:31}},19:{start:{line:33,column:2},end:{line:33,column:57}},20:{start:{line:33,column:32},end:{line:33,column:55}}},fnMap:{0:{name:"loadJSON",decl:{start:{line:2,column:9},end:{line:2,column:17}},loc:{start:{line:2,column:41},end:{line:17,column:1}},line:2},1:{name:"(anonymous_1)",decl:{start:{line:6,column:10},end:{line:6,column:11}},loc:{start:{line:6,column:24},end:{line:11,column:3}},line:6},2:{name:"(anonymous_2)",decl:{start:{line:11,column:10},end:{line:11,column:11}},loc:{start:{line:11,column:20},end:{line:13,column:3}},line:11},3:{name:"(anonymous_3)",decl:{start:{line:13,column:11},end:{line:13,column:12}},loc:{start:{line:13,column:17},end:{line:16,column:3}},line:13},4:{name:"downloadGlyphsMetadata",decl:{start:{line:18,column:16},end:{line:18,column:38}},loc:{start:{line:18,column:56},end:{line:29,column:1}},line:18},5:{name:"downloadSpriteMetadata",decl:{start:{line:30,column:16},end:{line:30,column:38}},loc:{start:{line:30,column:52},end:{line:34,column:1}},line:30},6:{name:"(anonymous_6)",decl:{start:{line:33,column:20},end:{line:33,column:21}},loc:{start:{line:33,column:32},end:{line:33,column:55}},line:33}},branchMap:{0:{loc:{start:{line:7,column:4},end:{line:9,column:5}},type:"if",locations:[{start:{line:7,column:4},end:{line:9,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:7},1:{loc:{start:{line:19,column:2},end:{line:19,column:34}},type:"if",locations:[{start:{line:19,column:2},end:{line:19,column:34}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:19},2:{loc:{start:{line:22,column:2},end:{line:26,column:3}},type:"if",locations:[{start:{line:22,column:2},end:{line:26,column:3}},{start:{line:24,column:9},end:{line:26,column:3}}],line:22},3:{loc:{start:{line:31,column:2},end:{line:31,column:30}},type:"if",locations:[{start:{line:31,column:2},end:{line:31,column:30}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:31}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/metadata.ts"],names:[],mappings:"AAAA,OAAO,YAAY;AAEnB,SAAS,SAAS,KAAa,cAAmB,IAA8B;AAC9E,QAAM,KAAK;AAAA,IACT,MAAM;AAAA,IACN,aAAa;AAAA,EACf,CAAC,EACE,KAAK,CAAC,aAAa;AAClB,QAAI,CAAC,SAAS,IAAI;AAChB,YAAM,IAAI,MAAM,iCAAiC,GAAG;AAAA,IACtD;AACA,WAAO,SAAS,KAAK;AAAA,EACvB,CAAC,EACA,KAAK,CAAC,SAAS;AACd,OAAG,IAAI;AAAA,EACT,CAAC,EACA,MAAM,MAAM;AACX,YAAQ,KAAK,+BAA+B,MAAM,2BAA2B,YAAY;AACzF,OAAG,YAAY;AAAA,EACjB,CAAC;AACL;AAEO,gBAAS,uBAAuB,aAAqB,IAA8B;AACxF,MAAG,CAAC,YAAa,QAAO,GAAG,CAAC,CAAC;AAI7B,QAAM,SAAS,OAAO,MAAM,WAAW;AACvC,QAAM,eAAe;AACrB,MAAG,OAAO,aAAa,cAAc;AACnC,WAAO,WAAW;AAAA,EACpB,OAAO;AACL,WAAO,WAAW,OAAO,SAAU,QAAQ,cAAc,OAAO;AAAA,EAClE;AACA,QAAM,MAAM,OAAO,OAAO,MAAM;AAEhC,WAAS,KAAK,CAAC,GAAG,EAAE;AACtB;AAEO,gBAAS,uBAAuB,SAAiB,IAA8B;AACpF,MAAG,CAAC,QAAS,QAAO,GAAG,CAAC,CAAC;AACzB,QAAM,MAAM,UAAU;AACtB,WAAS,KAAK,CAAC,GAAG,YAAU,GAAG,OAAO,KAAK,MAAM,CAAC,CAAC;AACrD;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"370277aff056c0894d7ae34686219318414cc635"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return ps=function(){return l},l}ps();function Jj(n,e,t){ps().f[0]++,ps().s[0]++,fetch(n,{mode:"cors",credentials:"same-origin"}).then(r=>{if(ps().f[1]++,ps().s[1]++,r.ok)ps().b[0][1]++;else throw ps().b[0][0]++,ps().s[2]++,new Error("Failed to load metadata for "+n);return ps().s[3]++,r.json()}).then(r=>{ps().f[2]++,ps().s[4]++,t(r)}).catch(()=>{ps().f[3]++,ps().s[5]++,console.warn("Can not load metadata for "+n+", using default value "+e),ps().s[6]++,t(e)})}function dce(n,e){if(ps().f[4]++,ps().s[7]++,n)ps().b[1][1]++;else return ps().b[1][0]++,ps().s[8]++,e([]);const t=(ps().s[9]++,lD.parse(n)),r=(ps().s[10]++,"/%7Bfontstack%7D/%7Brange%7D.pbf");ps().s[11]++,t.pathname===r?(ps().b[2][0]++,ps().s[12]++,t.pathname="/fontstacks.json"):(ps().b[2][1]++,ps().s[13]++,t.pathname=t.pathname.replace(r,".json"));const i=(ps().s[14]++,lD.format(t));ps().s[15]++,Jj(i,[],e)}function hce(n,e){if(ps().f[5]++,ps().s[16]++,n)ps().b[3][1]++;else return ps().b[3][0]++,ps().s[17]++,e([]);const t=(ps().s[18]++,n+".json");ps().s[19]++,Jj(t,{},r=>(ps().f[6]++,ps().s[20]++,e(Object.keys(r))))}function VA(){var n="/home/runner/work/maputnik/maputnik/src/libs/urlopen.ts",e="16cd8175e865a1f27680600ab24a4fbadf5fb4b2",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/urlopen.ts",statementMap:{0:{start:{line:3,column:21},end:{line:3,column:50}},1:{start:{line:4,column:2},end:{line:4,column:46}},2:{start:{line:7,column:2},end:{line:7,column:41}},3:{start:{line:8,column:2},end:{line:18,column:5}},4:{start:{line:12,column:4},end:{line:12,column:27}},5:{start:{line:14,column:4},end:{line:14,column:40}},6:{start:{line:16,column:4},end:{line:16,column:60}},7:{start:{line:17,column:4},end:{line:17,column:25}},8:{start:{line:21,column:21},end:{line:21,column:50}},9:{start:{line:22,column:2},end:{line:22,column:42}},10:{start:{line:23,column:2},end:{line:23,column:73}}},fnMap:{0:{name:"initialStyleUrl",decl:{start:{line:2,column:16},end:{line:2,column:31}},loc:{start:{line:2,column:34},end:{line:5,column:1}},line:2},1:{name:"loadStyleUrl",decl:{start:{line:6,column:16},end:{line:6,column:28}},loc:{start:{line:6,column:43},end:{line:19,column:1}},line:6},2:{name:"(anonymous_2)",decl:{start:{line:11,column:10},end:{line:11,column:11}},loc:{start:{line:11,column:29},end:{line:13,column:3}},line:11},3:{name:"(anonymous_3)",decl:{start:{line:13,column:10},end:{line:13,column:11}},loc:{start:{line:13,column:25},end:{line:15,column:3}},line:13},4:{name:"(anonymous_4)",decl:{start:{line:15,column:11},end:{line:15,column:12}},loc:{start:{line:15,column:22},end:{line:18,column:3}},line:15},5:{name:"removeStyleQuerystring",decl:{start:{line:20,column:16},end:{line:20,column:38}},loc:{start:{line:20,column:41},end:{line:24,column:1}},line:20}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/urlopen.ts"],names:[],mappings:"AAAA,OAAO,WAAW;AAEX,gBAAS,kBAAkB;AAChC,QAAM,aAAa,IAAI,IAAI,OAAO,SAAS,IAAI;AAC/C,SAAO,WAAW,aAAa,IAAI,OAAO;AAC5C;AAEO,gBAAS,aAAa,UAAkB,IAA8B;AAC3E,UAAQ,IAAI,iBAAiB,QAAQ;AACrC,QAAM,UAAU;AAAA,IACd,MAAM;AAAA,IACN,aAAa;AAAA,EACf,CAAC,EACE,KAAK,SAAS,UAAU;AACvB,WAAO,SAAS,KAAK;AAAA,EACvB,CAAC,EACA,KAAK,SAAS,MAAM;AACnB,OAAG,MAAM,oBAAoB,IAAI,CAAC;AAAA,EACpC,CAAC,EACA,MAAM,WAAW;AAChB,YAAQ,KAAK,iCAAiC,QAAQ;AACtD,OAAG,MAAM,UAAU;AAAA,EACrB,CAAC;AACL;AAEO,gBAAS,yBAAyB;AACvC,QAAM,aAAa,IAAI,IAAI,OAAO,SAAS,IAAI;AAC/C,aAAW,aAAa,OAAO,OAAO;AACtC,SAAO,QAAQ,aAAa,CAAC,GAAG,SAAS,OAAO,WAAW,SAAS,CAAC;AACvE;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"16cd8175e865a1f27680600ab24a4fbadf5fb4b2"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return VA=function(){return l},l}VA();function fce(){VA().f[0]++;const n=(VA().s[0]++,new URL(window.location.href));return VA().s[1]++,n.searchParams.get("style")}function eN(n,e){VA().f[1]++,VA().s[2]++,console.log("Loading style",n),VA().s[3]++,fetch(n,{mode:"cors",credentials:"same-origin"}).then(function(t){return VA().f[2]++,VA().s[4]++,t.json()}).then(function(t){VA().f[3]++,VA().s[5]++,e(vc.ensureStyleValidity(t))}).catch(function(){VA().f[4]++,VA().s[6]++,console.warn("Could not fetch default style",n),VA().s[7]++,e(vc.emptyStyle)})}function uD(){VA().f[5]++;const n=(VA().s[8]++,new URL(window.location.href));VA().s[9]++,n.searchParams.delete("style"),VA().s[10]++,window.history.replaceState({},document.title,n.toString())}function Ld(){var n="/home/runner/work/maputnik/maputnik/src/libs/diffmessage.ts",e="f92fa2abb31199d99fd3ae02d967dc6702faf862",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/diffmessage.ts",statementMap:{0:{start:{line:3,column:18},end:{line:3,column:47}},1:{start:{line:4,column:2},end:{line:4,column:70}},2:{start:{line:4,column:30},end:{line:4,column:68}},3:{start:{line:7,column:2},end:{line:7,column:71}},4:{start:{line:7,column:58},end:{line:7,column:69}},5:{start:{line:10,column:2},end:{line:10,column:71}},6:{start:{line:10,column:58},end:{line:10,column:69}}},fnMap:{0:{name:"diffMessages",decl:{start:{line:2,column:9},end:{line:2,column:21}},loc:{start:{line:2,column:47},end:{line:5,column:1}},line:2},1:{name:"(anonymous_1)",decl:{start:{line:4,column:21},end:{line:4,column:22}},loc:{start:{line:4,column:30},end:{line:4,column:68}},line:4},2:{name:"undoMessages",decl:{start:{line:6,column:16},end:{line:6,column:28}},loc:{start:{line:6,column:54},end:{line:8,column:1}},line:6},3:{name:"(anonymous_3)",decl:{start:{line:7,column:51},end:{line:7,column:52}},loc:{start:{line:7,column:58},end:{line:7,column:69}},line:7},4:{name:"redoMessages",decl:{start:{line:9,column:16},end:{line:9,column:28}},loc:{start:{line:9,column:54},end:{line:11,column:1}},line:9},5:{name:"(anonymous_5)",decl:{start:{line:10,column:51},end:{line:10,column:52}},loc:{start:{line:10,column:58},end:{line:10,column:69}},line:10}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/diffmessage.ts"],names:[],mappings:"AAAA,SAAQ,YAAW;AAGnB,SAAS,aAAa,aAAiC,YAAgC;AACrF,QAAM,UAAU,KAAK,aAAa,UAAU;AAC5C,SAAO,QAAQ,IAAI,SAAO,IAAI,UAAU,MAAM,IAAI,KAAK,KAAK,GAAG,CAAC;AAClE;AAEO,gBAAS,aAAa,aAAiC,YAAgC;AAC5F,SAAO,aAAa,aAAa,UAAU,EAAE,IAAI,OAAK,UAAU,CAAC;AACnE;AACO,gBAAS,aAAa,aAAiC,YAAgC;AAC5F,SAAO,aAAa,aAAa,UAAU,EAAE,IAAI,OAAK,UAAU,CAAC;AACnE;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f92fa2abb31199d99fd3ae02d967dc6702faf862"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Ld=function(){return l},l}Ld();function tN(n,e){Ld().f[0]++;const t=(Ld().s[0]++,JQ(n,e));return Ld().s[1]++,t.map(r=>(Ld().f[1]++,Ld().s[2]++,r.command+" "+r.args.join(" ")))}function pce(n,e){return Ld().f[2]++,Ld().s[3]++,tN(n,e).map(t=>(Ld().f[3]++,Ld().s[4]++,"Undo "+t))}function mce(n,e){return Ld().f[4]++,Ld().s[5]++,tN(n,e).map(t=>(Ld().f[5]++,Ld().s[6]++,"Redo "+t))}function vi(){var n="/home/runner/work/maputnik/maputnik/src/libs/stylestore.ts",e="d0461aebf8a7391762efd074af8c5c2674087e64",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/stylestore.ts",statementMap:{0:{start:{line:4,column:22},end:{line:4,column:32}},1:{start:{line:5,column:20},end:{line:5,column:27}},2:{start:{line:6,column:20},end:{line:9,column:1}},3:{start:{line:10,column:24},end:{line:10,column:44}},4:{start:{line:12,column:2},end:{line:12,column:36}},5:{start:{line:15,column:17},end:{line:15,column:19}},6:{start:{line:16,column:2},end:{line:21,column:3}},7:{start:{line:16,column:15},end:{line:16,column:16}},8:{start:{line:17,column:16},end:{line:17,column:42}},9:{start:{line:18,column:4},end:{line:20,column:5}},10:{start:{line:19,column:6},end:{line:19,column:32}},11:{start:{line:22,column:2},end:{line:22,column:16}},12:{start:{line:25,column:16},end:{line:25,column:30}},13:{start:{line:26,column:2},end:{line:26,column:86}},14:{start:{line:29,column:2},end:{line:31,column:3}},15:{start:{line:30,column:4},end:{line:30,column:41}},16:{start:{line:32,column:16},end:{line:32,column:30}},17:{start:{line:33,column:18},end:{line:33,column:26}},18:{start:{line:34,column:2},end:{line:34,column:17}},19:{start:{line:37,column:2},end:{line:37,column:57}},20:{start:{line:47,column:4},end:{line:47,column:40}},21:{start:{line:50,column:4},end:{line:50,column:13}},22:{start:{line:54,column:4},end:{line:59,column:5}},23:{start:{line:54,column:17},end:{line:54,column:18}},24:{start:{line:55,column:18},end:{line:55,column:44}},25:{start:{line:56,column:6},end:{line:58,column:7}},26:{start:{line:57,column:8},end:{line:57,column:44}},27:{start:{line:63,column:4},end:{line:63,column:65}},28:{start:{line:63,column:37},end:{line:63,column:65}},29:{start:{line:64,column:20},end:{line:64,column:67}},30:{start:{line:65,column:22},end:{line:65,column:68}},31:{start:{line:66,column:4},end:{line:66,column:52}},32:{start:{line:66,column:19},end:{line:66,column:52}},33:{start:{line:67,column:4},end:{line:67,column:25}},34:{start:{line:71,column:4},end:{line:71,column:51}},35:{start:{line:72,column:16},end:{line:72,column:37}},36:{start:{line:73,column:4},end:{line:73,column:63}},37:{start:{line:74,column:4},end:{line:74,column:65}},38:{start:{line:75,column:4},end:{line:75,column:20}}},fnMap:{0:{name:"loadDefaultStyle",decl:{start:{line:11,column:16},end:{line:11,column:32}},loc:{start:{line:11,column:37},end:{line:13,column:1}},line:11},1:{name:"loadStoredStyles",decl:{start:{line:14,column:9},end:{line:14,column:25}},loc:{start:{line:14,column:28},end:{line:23,column:1}},line:14},2:{name:"isStyleKey",decl:{start:{line:24,column:9},end:{line:24,column:19}},loc:{start:{line:24,column:25},end:{line:27,column:1}},line:24},3:{name:"fromKey",decl:{start:{line:28,column:9},end:{line:28,column:16}},loc:{start:{line:28,column:22},end:{line:35,column:1}},line:28},4:{name:"styleKey",decl:{start:{line:36,column:9},end:{line:36,column:17}},loc:{start:{line:36,column:27},end:{line:38,column:1}},line:36},5:{name:"(anonymous_5)",decl:{start:{line:46,column:2},end:{line:46,column:3}},loc:{start:{line:46,column:16},end:{line:48,column:3}},line:46},6:{name:"(anonymous_6)",decl:{start:{line:49,column:2},end:{line:49,column:3}},loc:{start:{line:49,column:11},end:{line:51,column:3}},line:49},7:{name:"(anonymous_7)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:10},end:{line:60,column:3}},line:53},8:{name:"(anonymous_8)",decl:{start:{line:62,column:2},end:{line:62,column:3}},loc:{start:{line:62,column:18},end:{line:68,column:3}},line:62},9:{name:"(anonymous_9)",decl:{start:{line:70,column:2},end:{line:70,column:3}},loc:{start:{line:70,column:17},end:{line:76,column:3}},line:70}},branchMap:{0:{loc:{start:{line:18,column:4},end:{line:20,column:5}},type:"if",locations:[{start:{line:18,column:4},end:{line:20,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:18},1:{loc:{start:{line:26,column:9},end:{line:26,column:85}},type:"binary-expr",locations:[{start:{line:26,column:9},end:{line:26,column:27}},{start:{line:26,column:31},end:{line:26,column:57}},{start:{line:26,column:61},end:{line:26,column:85}}],line:26},2:{loc:{start:{line:29,column:2},end:{line:31,column:3}},type:"if",locations:[{start:{line:29,column:2},end:{line:31,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:29},3:{loc:{start:{line:56,column:6},end:{line:58,column:7}},type:"if",locations:[{start:{line:56,column:6},end:{line:58,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:56},4:{loc:{start:{line:63,column:4},end:{line:63,column:65}},type:"if",locations:[{start:{line:63,column:4},end:{line:63,column:65}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:63},5:{loc:{start:{line:66,column:4},end:{line:66,column:52}},type:"if",locations:[{start:{line:66,column:4},end:{line:66,column:52}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:66}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0},b:{0:[0,0],1:[0,0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/stylestore.ts"],names:[],mappings:"AAAA,OAAO,WAAW;AAClB,SAAQ,oBAAmB;AAC3B,OAAO,mBAAmB;AAG1B,MAAM,gBAAgB;AACtB,MAAM,cAAc;AACpB,MAAM,cAAc;AAAA,EAClB,QAAQ,CAAC,eAAe,cAAc,EAAE,KAAK,GAAG;AAAA,EAChD,aAAa,CAAC,eAAe,cAAc,EAAE,KAAK,GAAG;AACvD;AAEA,MAAM,kBAAkB,cAAc,CAAC,EAAE;AAGlC,gBAAS,iBAAiB,IAA8B;AAC7D,eAAa,iBAAiB,EAAE;AAClC;AAGA,SAAS,mBAAmB;AAC1B,QAAM,SAAS,CAAC;AAChB,WAAS,IAAI,GAAG,IAAI,OAAO,aAAa,QAAQ,KAAK;AACnD,UAAM,MAAM,OAAO,aAAa,IAAI,CAAC;AACrC,QAAG,WAAW,GAAI,GAAG;AACnB,aAAO,KAAK,QAAQ,GAAI,CAAC;AAAA,IAC3B;AAAA,EACF;AACA,SAAO;AACT;AAEA,SAAS,WAAW,KAAa;AAC/B,QAAM,QAAQ,IAAI,MAAM,GAAG;AAC3B,SAAO,MAAM,WAAW,KAAK,MAAM,CAAC,MAAM,iBAAiB,MAAM,CAAC,MAAM;AAC1E;AAGA,SAAS,QAAQ,KAAa;AAC5B,MAAG,CAAC,WAAW,GAAG,GAAG;AACnB,UAAM;AAAA,EACR;AAEA,QAAM,QAAQ,IAAI,MAAM,GAAG;AAC3B,QAAM,UAAU,MAAM,CAAC;AACvB,SAAO;AACT;AAGA,SAAS,SAAS,SAAiB;AACjC,SAAO,CAAC,eAAe,aAAa,OAAO,EAAE,KAAK,GAAG;AACvD;AAGO,aAAM,WAAW;AAAA;AAAA;AAAA;AAAA,EAItB;AAAA;AAAA;AAAA,EAIA,cAAc;AACZ,SAAK,YAAY,iBAAiB;AAAA,EACpC;AAAA,EAEA,KAAK,IAA8B;AACjC,OAAG,IAAI;AAAA,EACT;AAAA;AAAA,EAGA,QAAQ;AACN,aAAS,IAAI,GAAG,IAAI,OAAO,aAAa,QAAQ,KAAK;AACnD,YAAM,MAAM,OAAO,aAAa,IAAI,CAAC;AACrC,UAAG,IAAI,WAAW,aAAa,GAAG;AAChC,eAAO,aAAa,WAAW,GAAG;AAAA,MACpC;AAAA,IACF;AAAA,EACF;AAAA;AAAA,EAGA,YAAY,IAA8B;AACxC,QAAG,KAAK,UAAU,WAAW,EAAG,QAAO,iBAAiB,EAAE;AAC1D,UAAM,UAAU,OAAO,aAAa,QAAQ,YAAY,MAAM;AAC9D,UAAM,YAAY,OAAO,aAAa,QAAQ,SAAS,OAAO,CAAC;AAE/D,QAAG,UAAW,QAAO,GAAG,KAAK,MAAM,SAAS,CAAC;AAC7C,qBAAiB,EAAE;AAAA,EACrB;AAAA;AAAA,EAGA,KAAK,UAA+C;AAClD,eAAW,MAAM,oBAAoB,QAAQ;AAC7C,UAAM,MAAM,SAAS,SAAS,EAAE;AAChC,WAAO,aAAa,QAAQ,KAAK,KAAK,UAAU,QAAQ,CAAC;AACzD,WAAO,aAAa,QAAQ,YAAY,QAAQ,SAAS,EAAE;AAC3D,WAAO;AAAA,EACT;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d0461aebf8a7391762efd074af8c5c2674087e64"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return vi=function(){return l},l}vi();const OC=(vi().s[0]++,"maputnik"),nN=(vi().s[1]++,"style"),AD=(vi().s[2]++,{latest:[OC,"latest_style"].join(":"),accessToken:[OC,"access_token"].join(":")}),gce=(vi().s[3]++,Wj[0].url);function cD(n){vi().f[0]++,vi().s[4]++,eN(gce,n)}function yce(){vi().f[1]++;const n=(vi().s[5]++,[]);vi().s[6]++;for(let e=(vi().s[7]++,0);e<window.localStorage.length;e++){const t=(vi().s[8]++,window.localStorage.key(e));vi().s[9]++,rN(t)?(vi().b[0][0]++,vi().s[10]++,n.push(vce(t))):vi().b[0][1]++}return vi().s[11]++,n}function rN(n){vi().f[2]++;const e=(vi().s[12]++,n.split(":"));return vi().s[13]++,vi().b[1][0]++,e.length===3&&(vi().b[1][1]++,e[0]===OC)&&(vi().b[1][2]++,e[1]===nN)}function vce(n){if(vi().f[3]++,vi().s[14]++,rN(n))vi().b[2][1]++;else throw vi().b[2][0]++,vi().s[15]++,"Key is not a valid style key";const e=(vi().s[16]++,n.split(":")),t=(vi().s[17]++,e[2]);return vi().s[18]++,t}function dD(n){return vi().f[4]++,vi().s[19]++,[OC,nN,n].join(":")}class hD{constructor(){Kn(this,"mapStyles");vi().f[5]++,vi().s[20]++,this.mapStyles=yce()}init(e){vi().f[6]++,vi().s[21]++,e(null)}purge(){vi().f[7]++,vi().s[22]++;for(let e=(vi().s[23]++,0);e<window.localStorage.length;e++){const t=(vi().s[24]++,window.localStorage.key(e));vi().s[25]++,t.startsWith(OC)?(vi().b[3][0]++,vi().s[26]++,window.localStorage.removeItem(t)):vi().b[3][1]++}}latestStyle(e){if(vi().f[8]++,vi().s[27]++,this.mapStyles.length===0)return vi().b[4][0]++,vi().s[28]++,cD(e);vi().b[4][1]++;const t=(vi().s[29]++,window.localStorage.getItem(AD.latest)),r=(vi().s[30]++,window.localStorage.getItem(dD(t)));if(vi().s[31]++,r)return vi().b[5][0]++,vi().s[32]++,e(JSON.parse(r));vi().b[5][1]++,vi().s[33]++,cD(e)}save(e){vi().f[9]++,vi().s[34]++,e=vc.ensureStyleValidity(e);const t=(vi().s[35]++,dD(e.id));return vi().s[36]++,window.localStorage.setItem(t,JSON.stringify(e)),vi().s[37]++,window.localStorage.setItem(AD.latest,e.id),vi().s[38]++,e}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var P6=function(n,e){return P6=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])},P6(n,e)};function iN(n,e){P6(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function Cce(n){var e=typeof Symbol=="function"&&n[Symbol.iterator],t=0;return e?e.call(n):{next:function(){return n&&t>=n.length&&(n=void 0),{value:n&&n[t++],done:!n}}}}function _ce(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,s=[],l;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(o){l={error:o}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(l)throw l.error}}return s}function bce(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(_ce(arguments[e]));return n}var oN=function(){function n(e,t){this.target=t,this.type=e}return n}(),xce=function(n){iN(e,n);function e(t,r){var i=n.call(this,"error",r)||this;return i.message=t.message,i.error=t,i}return e}(oN),Mce=function(n){iN(e,n);function e(t,r,i){t===void 0&&(t=1e3),r===void 0&&(r="");var s=n.call(this,"close",i)||this;return s.wasClean=!0,s.code=t,s.reason=r,s}return e}(oN);/*!
 * Reconnecting WebSocket
 * by Pedro Ladaria <pedro.ladaria@gmail.com>
 * https://github.com/pladaria/reconnecting-websocket
 * License MIT
 */var wce=function(){if(typeof WebSocket<"u")return WebSocket},Sce=function(n){return typeof n<"u"&&!!n&&n.CLOSING===2},mg={maxReconnectionDelay:1e4,minReconnectionDelay:1e3+Math.random()*4e3,minUptime:5e3,reconnectionDelayGrowFactor:1.3,connectionTimeout:4e3,maxRetries:1/0,maxEnqueuedMessages:1/0,startClosed:!1,debug:!1},Ece=function(){function n(e,t,r){var i=this;r===void 0&&(r={}),this._listeners={error:[],message:[],open:[],close:[]},this._retryCount=-1,this._shouldReconnect=!0,this._connectLock=!1,this._binaryType="blob",this._closeCalled=!1,this._messageQueue=[],this.onclose=null,this.onerror=null,this.onmessage=null,this.onopen=null,this._handleOpen=function(s){i._debug("open event");var l=i._options.minUptime,o=l===void 0?mg.minUptime:l;clearTimeout(i._connectTimeout),i._uptimeTimeout=setTimeout(function(){return i._acceptOpen()},o),i._ws.binaryType=i._binaryType,i._messageQueue.forEach(function(f){return i._ws.send(f)}),i._messageQueue=[],i.onopen&&i.onopen(s),i._listeners.open.forEach(function(f){return i._callEventListener(s,f)})},this._handleMessage=function(s){i._debug("message event"),i.onmessage&&i.onmessage(s),i._listeners.message.forEach(function(l){return i._callEventListener(s,l)})},this._handleError=function(s){i._debug("error event",s.message),i._disconnect(void 0,s.message==="TIMEOUT"?"timeout":void 0),i.onerror&&i.onerror(s),i._debug("exec error listeners"),i._listeners.error.forEach(function(l){return i._callEventListener(s,l)}),i._connect()},this._handleClose=function(s){i._debug("close event"),i._clearTimeouts(),i._shouldReconnect&&i._connect(),i.onclose&&i.onclose(s),i._listeners.close.forEach(function(l){return i._callEventListener(s,l)})},this._url=e,this._protocols=t,this._options=r,this._options.startClosed&&(this._shouldReconnect=!1),this._connect()}return Object.defineProperty(n,"CONNECTING",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(n,"OPEN",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(n,"CLOSING",{get:function(){return 2},enumerable:!0,configurable:!0}),Object.defineProperty(n,"CLOSED",{get:function(){return 3},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"CONNECTING",{get:function(){return n.CONNECTING},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"OPEN",{get:function(){return n.OPEN},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"CLOSING",{get:function(){return n.CLOSING},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"CLOSED",{get:function(){return n.CLOSED},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"binaryType",{get:function(){return this._ws?this._ws.binaryType:this._binaryType},set:function(e){this._binaryType=e,this._ws&&(this._ws.binaryType=e)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"retryCount",{get:function(){return Math.max(this._retryCount,0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"bufferedAmount",{get:function(){var e=this._messageQueue.reduce(function(t,r){return typeof r=="string"?t+=r.length:r instanceof Blob?t+=r.size:t+=r.byteLength,t},0);return e+(this._ws?this._ws.bufferedAmount:0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"extensions",{get:function(){return this._ws?this._ws.extensions:""},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"protocol",{get:function(){return this._ws?this._ws.protocol:""},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"readyState",{get:function(){return this._ws?this._ws.readyState:this._options.startClosed?n.CLOSED:n.CONNECTING},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"url",{get:function(){return this._ws?this._ws.url:""},enumerable:!0,configurable:!0}),n.prototype.close=function(e,t){if(e===void 0&&(e=1e3),this._closeCalled=!0,this._shouldReconnect=!1,this._clearTimeouts(),!this._ws){this._debug("close enqueued: no ws instance");return}if(this._ws.readyState===this.CLOSED){this._debug("close: already closed");return}this._ws.close(e,t)},n.prototype.reconnect=function(e,t){this._shouldReconnect=!0,this._closeCalled=!1,this._retryCount=-1,!this._ws||this._ws.readyState===this.CLOSED?this._connect():(this._disconnect(e,t),this._connect())},n.prototype.send=function(e){if(this._ws&&this._ws.readyState===this.OPEN)this._debug("send",e),this._ws.send(e);else{var t=this._options.maxEnqueuedMessages,r=t===void 0?mg.maxEnqueuedMessages:t;this._messageQueue.length<r&&(this._debug("enqueue",e),this._messageQueue.push(e))}},n.prototype.addEventListener=function(e,t){this._listeners[e]&&this._listeners[e].push(t)},n.prototype.dispatchEvent=function(e){var t,r,i=this._listeners[e.type];if(i)try{for(var s=Cce(i),l=s.next();!l.done;l=s.next()){var o=l.value;this._callEventListener(e,o)}}catch(f){t={error:f}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return!0},n.prototype.removeEventListener=function(e,t){this._listeners[e]&&(this._listeners[e]=this._listeners[e].filter(function(r){return r!==t}))},n.prototype._debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._options.debug&&console.log.apply(console,bce(["RWS>"],e))},n.prototype._getNextDelay=function(){var e=this._options,t=e.reconnectionDelayGrowFactor,r=t===void 0?mg.reconnectionDelayGrowFactor:t,i=e.minReconnectionDelay,s=i===void 0?mg.minReconnectionDelay:i,l=e.maxReconnectionDelay,o=l===void 0?mg.maxReconnectionDelay:l,f=0;return this._retryCount>0&&(f=s*Math.pow(r,this._retryCount-1),f>o&&(f=o)),this._debug("next delay",f),f},n.prototype._wait=function(){var e=this;return new Promise(function(t){setTimeout(t,e._getNextDelay())})},n.prototype._getNextUrl=function(e){if(typeof e=="string")return Promise.resolve(e);if(typeof e=="function"){var t=e();if(typeof t=="string")return Promise.resolve(t);if(t.then)return t}throw Error("Invalid URL")},n.prototype._connect=function(){var e=this;if(!(this._connectLock||!this._shouldReconnect)){this._connectLock=!0;var t=this._options,r=t.maxRetries,i=r===void 0?mg.maxRetries:r,s=t.connectionTimeout,l=s===void 0?mg.connectionTimeout:s,o=t.WebSocket,f=o===void 0?wce():o;if(this._retryCount>=i){this._debug("max retries reached",this._retryCount,">=",i);return}if(this._retryCount++,this._debug("connect",this._retryCount),this._removeListeners(),!Sce(f))throw Error("No valid WebSocket class provided");this._wait().then(function(){return e._getNextUrl(e._url)}).then(function(y){e._closeCalled||(e._debug("connect",{url:y,protocols:e._protocols}),e._ws=e._protocols?new f(y,e._protocols):new f(y),e._ws.binaryType=e._binaryType,e._connectLock=!1,e._addListeners(),e._connectTimeout=setTimeout(function(){return e._handleTimeout()},l))})}},n.prototype._handleTimeout=function(){this._debug("timeout event"),this._handleError(new xce(Error("TIMEOUT"),this))},n.prototype._disconnect=function(e,t){if(e===void 0&&(e=1e3),this._clearTimeouts(),!!this._ws){this._removeListeners();try{this._ws.close(e,t),this._handleClose(new Mce(e,t,this))}catch{}}},n.prototype._acceptOpen=function(){this._debug("accept open"),this._retryCount=0},n.prototype._callEventListener=function(e,t){"handleEvent"in t?t.handleEvent(e):t(e)},n.prototype._removeListeners=function(){this._ws&&(this._debug("removeListeners"),this._ws.removeEventListener("open",this._handleOpen),this._ws.removeEventListener("close",this._handleClose),this._ws.removeEventListener("message",this._handleMessage),this._ws.removeEventListener("error",this._handleError))},n.prototype._addListeners=function(){this._ws&&(this._debug("addListeners"),this._ws.addEventListener("open",this._handleOpen),this._ws.addEventListener("close",this._handleClose),this._ws.addEventListener("message",this._handleMessage),this._ws.addEventListener("error",this._handleError))},n.prototype._clearTimeouts=function(){clearTimeout(this._connectTimeout),clearTimeout(this._uptimeTimeout)},n}();function bi(){var n="/home/runner/work/maputnik/maputnik/src/libs/apistore.ts",e="fa2411bec13fe7a0c74835456fb0c60c3fdde9e5",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/apistore.ts",statementMap:{0:{start:{line:7,column:18},end:{line:7,column:24}},1:{start:{line:10,column:4},end:{line:11,column:7}},2:{start:{line:12,column:17},end:{line:12,column:36}},3:{start:{line:13,column:17},end:{line:13,column:41}},4:{start:{line:14,column:4},end:{line:14,column:45}},5:{start:{line:15,column:4},end:{line:15,column:50}},6:{start:{line:16,column:4},end:{line:16,column:37}},7:{start:{line:19,column:4},end:{line:30,column:7}},8:{start:{line:22,column:6},end:{line:22,column:29}},9:{start:{line:24,column:23},end:{line:24,column:27}},10:{start:{line:25,column:6},end:{line:25,column:39}},11:{start:{line:26,column:6},end:{line:26,column:32}},12:{start:{line:27,column:6},end:{line:27,column:15}},13:{start:{line:29,column:6},end:{line:29,column:52}},14:{start:{line:33,column:23},end:{line:33,column:67}},15:{start:{line:34,column:4},end:{line:45,column:6}},16:{start:{line:35,column:6},end:{line:35,column:26}},17:{start:{line:35,column:19},end:{line:35,column:26}},18:{start:{line:36,column:6},end:{line:36,column:52}},19:{start:{line:37,column:24},end:{line:37,column:40}},20:{start:{line:38,column:6},end:{line:42,column:7}},21:{start:{line:39,column:8},end:{line:39,column:41}},22:{start:{line:41,column:8},end:{line:41,column:27}},23:{start:{line:43,column:27},end:{line:43,column:65}},24:{start:{line:44,column:6},end:{line:44,column:44}},25:{start:{line:48,column:4},end:{line:58,column:5}},26:{start:{line:49,column:6},end:{line:55,column:9}},27:{start:{line:52,column:8},end:{line:52,column:31}},28:{start:{line:54,column:8},end:{line:54,column:44}},29:{start:{line:57,column:6},end:{line:57,column:92}},30:{start:{line:62,column:22},end:{line:66,column:5}},31:{start:{line:67,column:15},end:{line:67,column:26}},32:{start:{line:68,column:4},end:{line:77,column:7}},33:{start:{line:76,column:6},end:{line:76,column:38}},34:{start:{line:76,column:17},end:{line:76,column:38}},35:{start:{line:78,column:4},end:{line:78,column:20}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:2},end:{line:9,column:3}},loc:{start:{line:9,column:20},end:{line:17,column:3}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:10,column:58},end:{line:10,column:59}},loc:{start:{line:10,column:64},end:{line:11,column:5}},line:10},2:{name:"(anonymous_2)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:11},end:{line:31,column:3}},line:18},3:{name:"(anonymous_3)",decl:{start:{line:21,column:12},end:{line:21,column:13}},loc:{start:{line:21,column:26},end:{line:23,column:5}},line:21},4:{name:"(anonymous_4)",decl:{start:{line:23,column:12},end:{line:23,column:13}},loc:{start:{line:23,column:22},end:{line:28,column:5}},line:23},5:{name:"(anonymous_5)",decl:{start:{line:28,column:13},end:{line:28,column:14}},loc:{start:{line:28,column:19},end:{line:30,column:5}},line:28},6:{name:"(anonymous_6)",decl:{start:{line:32,column:2},end:{line:32,column:3}},loc:{start:{line:32,column:23},end:{line:46,column:3}},line:32},7:{name:"(anonymous_7)",decl:{start:{line:34,column:27},end:{line:34,column:28}},loc:{start:{line:34,column:34},end:{line:45,column:5}},line:34},8:{name:"(anonymous_8)",decl:{start:{line:47,column:2},end:{line:47,column:3}},loc:{start:{line:47,column:18},end:{line:59,column:3}},line:47},9:{name:"(anonymous_9)",decl:{start:{line:51,column:14},end:{line:51,column:15}},loc:{start:{line:51,column:33},end:{line:53,column:7}},line:51},10:{name:"(anonymous_10)",decl:{start:{line:53,column:14},end:{line:53,column:15}},loc:{start:{line:53,column:29},end:{line:55,column:7}},line:53},11:{name:"(anonymous_11)",decl:{start:{line:61,column:2},end:{line:61,column:3}},loc:{start:{line:61,column:17},end:{line:79,column:3}},line:61},12:{name:"(anonymous_12)",decl:{start:{line:75,column:13},end:{line:75,column:14}},loc:{start:{line:75,column:29},end:{line:77,column:5}},line:75}},branchMap:{0:{loc:{start:{line:10,column:30},end:{line:11,column:6}},type:"binary-expr",locations:[{start:{line:10,column:30},end:{line:10,column:53}},{start:{line:10,column:58},end:{line:11,column:5}}],line:10},1:{loc:{start:{line:12,column:17},end:{line:12,column:36}},type:"binary-expr",locations:[{start:{line:12,column:17},end:{line:12,column:26}},{start:{line:12,column:30},end:{line:12,column:36}}],line:12},2:{loc:{start:{line:13,column:17},end:{line:13,column:41}},type:"binary-expr",locations:[{start:{line:13,column:17},end:{line:13,column:26}},{start:{line:13,column:30},end:{line:13,column:41}}],line:13},3:{loc:{start:{line:35,column:6},end:{line:35,column:26}},type:"if",locations:[{start:{line:35,column:6},end:{line:35,column:26}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:35},4:{loc:{start:{line:48,column:4},end:{line:58,column:5}},type:"if",locations:[{start:{line:48,column:4},end:{line:58,column:5}},{start:{line:56,column:11},end:{line:58,column:5}}],line:48},5:{loc:{start:{line:76,column:6},end:{line:76,column:38}},type:"if",locations:[{start:{line:76,column:6},end:{line:76,column:38}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:76}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/apistore.ts"],names:[],mappings:"AAAA,OAAO,WAAW;AAClB,SAAQ,cAAa;AAErB,OAAO,2BAA2B;AAQ3B,aAAM,cAAc;AAAA,EAEzB;AAAA,EACA;AAAA,EACA,gBAAoC;AAAA,EACpC;AAAA,EAEA,YAAY,MAA4B;AACtC,SAAK,qBAAqB,KAAK,uBAAuB,MAAM;AAAA,IAAC;AAC7D,UAAM,OAAO,KAAK,QAAQ;AAC1B,UAAM,OAAO,KAAK,QAAQ;AAC1B,SAAK,WAAW,UAAU,IAAI,IAAI,IAAI;AACtC,SAAK,eAAe,QAAQ,IAAI,IAAI,IAAI;AACxC,SAAK,OAAO,KAAK,KAAK,KAAK,IAAI;AAAA,EACjC;AAAA,EAEA,KAAK,IAA8B;AACjC,UAAM,KAAK,WAAW,WAAW;AAAA,MAC/B,MAAM;AAAA,IACR,CAAC,EACE,KAAK,CAAC,aAAc;AACnB,aAAO,SAAS,KAAK;AAAA,IACvB,CAAC,EACA,KAAK,CAAC,SAAS;AACd,YAAM,WAAW;AACjB,WAAK,gBAAgB,SAAS,CAAC;AAC/B,WAAK,mBAAmB;AACxB,SAAG,IAAI;AAAA,IACT,CAAC,EACA,MAAM,MAAM;AACX,SAAG,IAAI,MAAM,8BAA8B,CAAC;AAAA,IAC9C,CAAC;AAAA,EACL;AAAA,EAEA,qBAAqB;AACnB,UAAM,aAAa,IAAI,sBAAsB,KAAK,YAAY;AAC9D,eAAW,YAAY,OAAK;AAC1B,UAAG,CAAC,EAAE,KAAM;AACZ,cAAQ,IAAI,gCAAgC;AAC5C,UAAI,cAAc,MAAM;AACxB,UAAI;AACF,sBAAc,KAAK,MAAM,EAAE,IAAI;AAAA,MACjC,SAAQ,KAAK;AACX,gBAAQ,MAAM,GAAG;AAAA,MACnB;AACA,YAAM,eAAe,MAAM,oBAAoB,WAAW;AAC1D,WAAK,mBAAmB,YAAY;AAAA,IACtC;AAAA,EACF;AAAA,EAEA,YAAY,IAA8B;AACxC,QAAG,KAAK,eAAe;AACrB,YAAM,KAAK,WAAW,aAAa,KAAK,eAAe;AAAA,QACrD,MAAM;AAAA,MACR,CAAC,EACE,KAAK,SAAS,UAAU;AACvB,eAAO,SAAS,KAAK;AAAA,MACvB,CAAC,EACA,KAAK,SAAS,MAAM;AACnB,WAAG,MAAM,oBAAoB,IAAI,CAAC;AAAA,MACpC,CAAC;AAAA,IACL,OAAO;AACL,YAAM,IAAI,MAAM,oEAAoE;AAAA,IACtF;AAAA,EACF;AAAA;AAAA,EAGA,KAAK,UAA+C;AAClD,UAAM,YAAY;AAAA,MAChB,MAAM;AAAA,QACJ,MAAM,oBAAoB,QAAQ;AAAA,MACpC;AAAA,IACF;AAEA,UAAM,KAAK,SAAS;AACpB,UAAM,KAAK,WAAW,aAAa,IAAI;AAAA,MACrC,QAAQ;AAAA,MACR,MAAM;AAAA,MACN,SAAS;AAAA,QACP,gBAAgB;AAAA,MAClB;AAAA,MACA,MAAM;AAAA,IACR,CAAC,EACE,MAAM,SAAS,OAAO;AACrB,UAAG,MAAO,SAAQ,MAAM,KAAK;AAAA,IAC/B,CAAC;AACH,WAAO;AAAA,EACT;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"fa2411bec13fe7a0c74835456fb0c60c3fdde9e5"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return bi=function(){return l},l}bi();class Bce{constructor(e){Kn(this,"localUrl");Kn(this,"websocketUrl");Kn(this,"latestStyleId",(bi().s[0]++,void 0));Kn(this,"onLocalStyleChange");bi().f[0]++,bi().s[1]++,this.onLocalStyleChange=(bi().b[0][0]++,e.onLocalStyleChange||(bi().b[0][1]++,()=>{bi().f[1]++}));const t=(bi().s[2]++,bi().b[1][0]++,e.port||(bi().b[1][1]++,"8000")),r=(bi().s[3]++,bi().b[2][0]++,e.host||(bi().b[2][1]++,"localhost"));bi().s[4]++,this.localUrl=`http://${r}:${t}`,bi().s[5]++,this.websocketUrl=`ws://${r}:${t}/ws`,bi().s[6]++,this.init=this.init.bind(this)}init(e){bi().f[2]++,bi().s[7]++,fetch(this.localUrl+"/styles",{mode:"cors"}).then(t=>(bi().f[3]++,bi().s[8]++,t.json())).then(t=>{bi().f[4]++;const r=(bi().s[9]++,t);bi().s[10]++,this.latestStyleId=r[0],bi().s[11]++,this.notifyLocalChanges(),bi().s[12]++,e(null)}).catch(()=>{bi().f[5]++,bi().s[13]++,e(new Error("Can not connect to style API"))})}notifyLocalChanges(){bi().f[6]++;const e=(bi().s[14]++,new Ece(this.websocketUrl));bi().s[15]++,e.onmessage=t=>{if(bi().f[7]++,bi().s[16]++,t.data)bi().b[3][1]++;else{bi().b[3][0]++,bi().s[17]++;return}bi().s[18]++,console.log("Received style update from API");let r=(bi().s[19]++,vc.emptyStyle);bi().s[20]++;try{bi().s[21]++,r=JSON.parse(t.data)}catch(s){bi().s[22]++,console.error(s)}const i=(bi().s[23]++,vc.ensureStyleValidity(r));bi().s[24]++,this.onLocalStyleChange(i)}}latestStyle(e){if(bi().f[8]++,bi().s[25]++,this.latestStyleId)bi().b[4][0]++,bi().s[26]++,fetch(this.localUrl+"/styles/"+this.latestStyleId,{mode:"cors"}).then(function(t){return bi().f[9]++,bi().s[27]++,t.json()}).then(function(t){bi().f[10]++,bi().s[28]++,e(vc.ensureStyleValidity(t))});else throw bi().b[4][1]++,bi().s[29]++,new Error("No latest style available. You need to init the api backend first.")}save(e){bi().f[11]++;const t=(bi().s[30]++,KF(vc.stripAccessTokens(vc.replaceAccessTokens(e)))),r=(bi().s[31]++,e.id);return bi().s[32]++,fetch(this.localUrl+"/styles/"+r,{method:"PUT",mode:"cors",headers:{"Content-Type":"application/json; charset=utf-8"},body:t}).catch(function(i){bi().f[12]++,bi().s[33]++,i?(bi().b[5][0]++,bi().s[34]++,console.error(i)):bi().b[5][1]++}),bi().s[35]++,e}}function Ml(){var n="/home/runner/work/maputnik/maputnik/src/libs/revisions.ts",e="9277d165d3b1fd7c235a1faab33cf41596d9966e",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/revisions.ts",statementMap:{0:{start:{line:5,column:4},end:{line:5,column:38}},1:{start:{line:6,column:4},end:{line:6,column:50}},2:{start:{line:9,column:4},end:{line:9,column:53}},3:{start:{line:12,column:4},end:{line:12,column:43}},4:{start:{line:15,column:4},end:{line:15,column:66}},5:{start:{line:16,column:4},end:{line:16,column:34}},6:{start:{line:17,column:4},end:{line:17,column:22}},7:{start:{line:20,column:4},end:{line:22,column:5}},8:{start:{line:21,column:6},end:{line:21,column:24}},9:{start:{line:23,column:4},end:{line:23,column:24}},10:{start:{line:26,column:4},end:{line:28,column:5}},11:{start:{line:27,column:6},end:{line:27,column:24}},12:{start:{line:29,column:4},end:{line:29,column:24}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:2},end:{line:4,column:3}},loc:{start:{line:4,column:37},end:{line:7,column:3}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:15},end:{line:10,column:3}},line:8},2:{name:"(anonymous_2)",decl:{start:{line:11,column:2},end:{line:11,column:3}},loc:{start:{line:11,column:16},end:{line:13,column:3}},line:11},3:{name:"(anonymous_3)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:24},end:{line:18,column:3}},line:14},4:{name:"(anonymous_4)",decl:{start:{line:19,column:2},end:{line:19,column:3}},loc:{start:{line:19,column:9},end:{line:24,column:3}},line:19},5:{name:"(anonymous_5)",decl:{start:{line:25,column:2},end:{line:25,column:3}},loc:{start:{line:25,column:9},end:{line:30,column:3}},line:25}},branchMap:{0:{loc:{start:{line:4,column:14},end:{line:4,column:35}},type:"default-arg",locations:[{start:{line:4,column:33},end:{line:4,column:35}}],line:4},1:{loc:{start:{line:20,column:4},end:{line:22,column:5}},type:"if",locations:[{start:{line:20,column:4},end:{line:22,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:20},2:{loc:{start:{line:26,column:4},end:{line:28,column:5}},type:"if",locations:[{start:{line:26,column:4},end:{line:28,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:26}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{0:[0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/revisions.ts"],names:[],mappings:"AAEO,aAAM,cAAc;AAAA,EACzB;AAAA,EACA;AAAA,EAGA,YAAY,mBAAiB,CAAC,GAAG;AAC/B,SAAK,YAAY;AACjB,SAAK,aAAa,iBAAiB,SAAS;AAAA,EAC9C;AAAA,EAEA,IAAI,SAAS;AACX,WAAO,KAAK,UAAU,KAAK,UAAU,SAAS,CAAC;AAAA,EACjD;AAAA,EAEA,IAAI,UAAU;AACZ,WAAO,KAAK,UAAU,KAAK,UAAU;AAAA,EACvC;AAAA,EAEA,YAAY,UAA6C;AAGvD,SAAK,YAAY,KAAK,UAAU,MAAM,GAAG,KAAK,aAAa,CAAC;AAE5D,SAAK,UAAU,KAAK,QAAQ;AAC5B,SAAK;AAAA,EAEP;AAAA,EAEA,OAAO;AACL,QAAG,KAAK,aAAa,GAAG;AACtB,WAAK;AAAA,IACP;AACA,WAAO,KAAK;AAAA,EACd;AAAA,EAEA,OAAO;AACL,QAAG,KAAK,aAAa,KAAK,UAAU,SAAS,GAAG;AAC9C,WAAK;AAAA,IACP;AACA,WAAO,KAAK;AAAA,EACd;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"9277d165d3b1fd7c235a1faab33cf41596d9966e"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Ml=function(){return l},l}Ml();class Oce{constructor(e=(Ml().b[0][0]++,[])){Kn(this,"revisions");Kn(this,"currentIdx");Ml().f[0]++,Ml().s[0]++,this.revisions=e,Ml().s[1]++,this.currentIdx=e.length-1}get latest(){return Ml().f[1]++,Ml().s[2]++,this.revisions[this.revisions.length-1]}get current(){return Ml().f[2]++,Ml().s[3]++,this.revisions[this.currentIdx]}addRevision(e){Ml().f[3]++,Ml().s[4]++,this.revisions=this.revisions.slice(0,this.currentIdx+1),Ml().s[5]++,this.revisions.push(e),Ml().s[6]++,this.currentIdx++}undo(){return Ml().f[4]++,Ml().s[7]++,this.currentIdx>0?(Ml().b[1][0]++,Ml().s[8]++,this.currentIdx--):Ml().b[1][1]++,Ml().s[9]++,this.current}redo(){return Ml().f[5]++,Ml().s[10]++,this.currentIdx<this.revisions.length-1?(Ml().b[2][0]++,Ml().s[11]++,this.currentIdx++):Ml().b[2][1]++,Ml().s[12]++,this.current}}var vE,fD;function Ice(){if(fD)return vE;fD=1;var n="Expected a function",e=NaN,t="[object Symbol]",r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,l=/^0o[0-7]+$/i,o=parseInt,f=typeof window=="object"&&window&&window.Object===Object&&window,y=typeof self=="object"&&self&&self.Object===Object&&self,x=f||y||Function("return this")(),B=Object.prototype,O=B.toString,P=Math.max,U=Math.min,j=function(){return x.Date.now()};function N(ne,G,oe){var he,fe,Ee,me,Se,Ke,xe=0,at=!1,Ze=!1,Je=!0;if(typeof ne!="function")throw new TypeError(n);G=V(G)||0,H(oe)&&(at=!!oe.leading,Ze="maxWait"in oe,Ee=Ze?P(V(oe.maxWait)||0,G):Ee,Je="trailing"in oe?!!oe.trailing:Je);function Ne(Ue){var Pe=he,Be=fe;return he=fe=void 0,xe=Ue,me=ne.apply(Be,Pe),me}function we(Ue){return xe=Ue,Se=setTimeout(bt,G),at?Ne(Ue):me}function De(Ue){var Pe=Ue-Ke,Be=Ue-xe,it=G-Pe;return Ze?U(it,Ee-Be):it}function He(Ue){var Pe=Ue-Ke,Be=Ue-xe;return Ke===void 0||Pe>=G||Pe<0||Ze&&Be>=Ee}function bt(){var Ue=j();if(He(Ue))return Yt(Ue);Se=setTimeout(bt,De(Ue))}function Yt(Ue){return Se=void 0,Je&&he?Ne(Ue):(he=fe=void 0,me)}function yt(){Se!==void 0&&clearTimeout(Se),xe=0,he=Ke=fe=Se=void 0}function Ft(){return Se===void 0?me:Yt(j())}function Pt(){var Ue=j(),Pe=He(Ue);if(he=arguments,fe=this,Ke=Ue,Pe){if(Se===void 0)return we(Ke);if(Ze)return Se=setTimeout(bt,G),Ne(Ke)}return Se===void 0&&(Se=setTimeout(bt,G)),me}return Pt.cancel=yt,Pt.flush=Ft,Pt}function Y(ne,G,oe){var he=!0,fe=!0;if(typeof ne!="function")throw new TypeError(n);return H(oe)&&(he="leading"in oe?!!oe.leading:he,fe="trailing"in oe?!!oe.trailing:fe),N(ne,G,{leading:he,maxWait:G,trailing:fe})}function H(ne){var G=typeof ne;return!!ne&&(G=="object"||G=="function")}function se(ne){return!!ne&&typeof ne=="object"}function re(ne){return typeof ne=="symbol"||se(ne)&&O.call(ne)==t}function V(ne){if(typeof ne=="number")return ne;if(re(ne))return e;if(H(ne)){var G=typeof ne.valueOf=="function"?ne.valueOf():ne;ne=H(G)?G+"":G}if(typeof ne!="string")return ne===0?ne:+ne;ne=ne.replace(r,"");var oe=s.test(ne);return oe||l.test(ne)?o(ne.slice(2),oe?2:8):i.test(ne)?e:+ne}return vE=Y,vE}var kce=Ice();const Tce=fl(kce);var Lv={exports:{}};Lv.exports;var pD;function Pce(){return pD||(pD=1,function(n,e){var t=200,r="__lodash_hash_undefined__",i=1,s=2,l=9007199254740991,o="[object Arguments]",f="[object Array]",y="[object AsyncFunction]",x="[object Boolean]",B="[object Date]",O="[object Error]",P="[object Function]",U="[object GeneratorFunction]",j="[object Map]",N="[object Number]",Y="[object Null]",H="[object Object]",se="[object Promise]",re="[object Proxy]",V="[object RegExp]",ne="[object Set]",G="[object String]",oe="[object Symbol]",he="[object Undefined]",fe="[object WeakMap]",Ee="[object ArrayBuffer]",me="[object DataView]",Se="[object Float32Array]",Ke="[object Float64Array]",xe="[object Int8Array]",at="[object Int16Array]",Ze="[object Int32Array]",Je="[object Uint8Array]",Ne="[object Uint8ClampedArray]",we="[object Uint16Array]",De="[object Uint32Array]",He=/[\\^$.*+?()[\]{}|]/g,bt=/^\[object .+?Constructor\]$/,Yt=/^(?:0|[1-9]\d*)$/,yt={};yt[Se]=yt[Ke]=yt[xe]=yt[at]=yt[Ze]=yt[Je]=yt[Ne]=yt[we]=yt[De]=!0,yt[o]=yt[f]=yt[Ee]=yt[x]=yt[me]=yt[B]=yt[O]=yt[P]=yt[j]=yt[N]=yt[H]=yt[V]=yt[ne]=yt[G]=yt[fe]=!1;var Ft=typeof window=="object"&&window&&window.Object===Object&&window,Pt=typeof self=="object"&&self&&self.Object===Object&&self,Ue=Ft||Pt||Function("return this")(),Pe=e&&!e.nodeType&&e,Be=Pe&&!0&&n&&!n.nodeType&&n,it=Be&&Be.exports===Pe,_t=it&&Ft.process,pt=function(){try{return _t&&_t.binding&&_t.binding("util")}catch{}}(),Lt=pt&&pt.isTypedArray;function nn(ee,Oe){for(var st=-1,Vt=ee==null?0:ee.length,Er=0,qn=[];++st<Vt;){var si=ee[st];Oe(si,st,ee)&&(qn[Er++]=si)}return qn}function Kt(ee,Oe){for(var st=-1,Vt=Oe.length,Er=ee.length;++st<Vt;)ee[Er+st]=Oe[st];return ee}function vn(ee,Oe){for(var st=-1,Vt=ee==null?0:ee.length;++st<Vt;)if(Oe(ee[st],st,ee))return!0;return!1}function Gn(ee,Oe){for(var st=-1,Vt=Array(ee);++st<ee;)Vt[st]=Oe(st);return Vt}function tn(ee){return function(Oe){return ee(Oe)}}function dr(ee,Oe){return ee.has(Oe)}function Pn(ee,Oe){return ee==null?void 0:ee[Oe]}function pn(ee){var Oe=-1,st=Array(ee.size);return ee.forEach(function(Vt,Er){st[++Oe]=[Er,Vt]}),st}function $n(ee,Oe){return function(st){return ee(Oe(st))}}function lr(ee){var Oe=-1,st=Array(ee.size);return ee.forEach(function(Vt){st[++Oe]=Vt}),st}var vr=Array.prototype,Zn=Function.prototype,Ge=Object.prototype,ce=Ue["__core-js_shared__"],pe=Zn.toString,nt=Ge.hasOwnProperty,wt=function(){var ee=/[^.]+$/.exec(ce&&ce.keys&&ce.keys.IE_PROTO||"");return ee?"Symbol(src)_1."+ee:""}(),Ht=Ge.toString,sn=RegExp("^"+pe.call(nt).replace(He,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Hn=it?Ue.Buffer:void 0,Ve=Ue.Symbol,J=Ue.Uint8Array,ve=Ge.propertyIsEnumerable,p=vr.splice,Fe=Ve?Ve.toStringTag:void 0,Qe=Object.getOwnPropertySymbols,rt=Hn?Hn.isBuffer:void 0,ct=$n(Object.keys,Object),dt=to(Ue,"DataView"),qt=to(Ue,"Map"),Gt=to(Ue,"Promise"),zt=to(Ue,"Set"),on=to(Ue,"WeakMap"),jt=to(Object,"create"),Dn=Oi(dt),rr=Oi(qt),Br=Oi(Gt),Jn=Oi(zt),un=Oi(on),er=Ve?Ve.prototype:void 0,fr=er?er.valueOf:void 0;function Sr(ee){var Oe=-1,st=ee==null?0:ee.length;for(this.clear();++Oe<st;){var Vt=ee[Oe];this.set(Vt[0],Vt[1])}}function Ur(){this.__data__=jt?jt(null):{},this.size=0}function ri(ee){var Oe=this.has(ee)&&delete this.__data__[ee];return this.size-=Oe?1:0,Oe}function Or(ee){var Oe=this.__data__;if(jt){var st=Oe[ee];return st===r?void 0:st}return nt.call(Oe,ee)?Oe[ee]:void 0}function ka(ee){var Oe=this.__data__;return jt?Oe[ee]!==void 0:nt.call(Oe,ee)}function Wi(ee,Oe){var st=this.__data__;return this.size+=this.has(ee)?0:1,st[ee]=jt&&Oe===void 0?r:Oe,this}Sr.prototype.clear=Ur,Sr.prototype.delete=ri,Sr.prototype.get=Or,Sr.prototype.has=ka,Sr.prototype.set=Wi;function Bi(ee){var Oe=-1,st=ee==null?0:ee.length;for(this.clear();++Oe<st;){var Vt=ee[Oe];this.set(Vt[0],Vt[1])}}function eo(){this.__data__=[],this.size=0}function ws(ee){var Oe=this.__data__,st=ur(Oe,ee);if(st<0)return!1;var Vt=Oe.length-1;return st==Vt?Oe.pop():p.call(Oe,st,1),--this.size,!0}function ko(ee){var Oe=this.__data__,st=ur(Oe,ee);return st<0?void 0:Oe[st][1]}function Hi(ee){return ur(this.__data__,ee)>-1}function Sl(ee,Oe){var st=this.__data__,Vt=ur(st,ee);return Vt<0?(++this.size,st.push([ee,Oe])):st[Vt][1]=Oe,this}Bi.prototype.clear=eo,Bi.prototype.delete=ws,Bi.prototype.get=ko,Bi.prototype.has=Hi,Bi.prototype.set=Sl;function Go(ee){var Oe=-1,st=ee==null?0:ee.length;for(this.clear();++Oe<st;){var Vt=ee[Oe];this.set(Vt[0],Vt[1])}}function Za(){this.size=0,this.__data__={hash:new Sr,map:new(qt||Bi),string:new Sr}}function Xa(ee){var Oe=oi(this,ee).delete(ee);return this.size-=Oe?1:0,Oe}function Yi(ee){return oi(this,ee).get(ee)}function Lu(ee){return oi(this,ee).has(ee)}function Jl(ee,Oe){var st=oi(this,ee),Vt=st.size;return st.set(ee,Oe),this.size+=st.size==Vt?0:1,this}Go.prototype.clear=Za,Go.prototype.delete=Xa,Go.prototype.get=Yi,Go.prototype.has=Lu,Go.prototype.set=Jl;function wo(ee){var Oe=-1,st=ee==null?0:ee.length;for(this.__data__=new Go;++Oe<st;)this.add(ee[Oe])}function wr(ee){return this.__data__.set(ee,r),this}function Ta(ee){return this.__data__.has(ee)}wo.prototype.add=wo.prototype.push=wr,wo.prototype.has=Ta;function Ss(ee){var Oe=this.__data__=new Bi(ee);this.size=Oe.size}function Zs(){this.__data__=new Bi,this.size=0}function Ye(ee){var Oe=this.__data__,st=Oe.delete(ee);return this.size=Oe.size,st}function xt(ee){return this.__data__.get(ee)}function Cn(ee){return this.__data__.has(ee)}function Qn(ee,Oe){var st=this.__data__;if(st instanceof Bi){var Vt=st.__data__;if(!qt||Vt.length<t-1)return Vt.push([ee,Oe]),this.size=++st.size,this;st=this.__data__=new Go(Vt)}return st.set(ee,Oe),this.size=st.size,this}Ss.prototype.clear=Zs,Ss.prototype.delete=Ye,Ss.prototype.get=xt,Ss.prototype.has=Cn,Ss.prototype.set=Qn;function fn(ee,Oe){var st=va(ee),Vt=!st&&ea(ee),Er=!st&&!Vt&&pl(ee),qn=!st&&!Vt&&!Er&&Dl(ee),si=st||Vt||Er||qn,di=si?Gn(ee.length,String):[],Ir=di.length;for(var Pr in ee)nt.call(ee,Pr)&&!(si&&(Pr=="length"||Er&&(Pr=="offset"||Pr=="parent")||qn&&(Pr=="buffer"||Pr=="byteLength"||Pr=="byteOffset")||Es(Pr,Ir)))&&di.push(Pr);return di}function ur(ee,Oe){for(var st=ee.length;st--;)if(is(ee[st][0],Oe))return st;return-1}function Di(ee,Oe,st){var Vt=Oe(ee);return va(ee)?Vt:Kt(Vt,st(ee))}function vo(ee){return ee==null?ee===void 0?he:Y:Fe&&Fe in Object(ee)?$o(ee):Ns(ee)}function rs(ee){return qr(ee)&&vo(ee)==o}function ua(ee,Oe,st,Vt,Er){return ee===Oe?!0:ee==null||Oe==null||!qr(ee)&&!qr(Oe)?ee!==ee&&Oe!==Oe:eu(ee,Oe,st,Vt,ua,Er)}function eu(ee,Oe,st,Vt,Er,qn){var si=va(ee),di=va(Oe),Ir=si?f:js(ee),Pr=di?f:js(Oe);Ir=Ir==o?H:Ir,Pr=Pr==o?H:Pr;var pi=Ir==H,Do=Pr==H,mi=Ir==Pr;if(mi&&pl(ee)){if(!pl(Oe))return!1;si=!0,pi=!1}if(mi&&!pi)return qn||(qn=new Ss),si||Dl(ee)?Cs(ee,Oe,st,Vt,Er,qn):xi(ee,Oe,Ir,st,Vt,Er,qn);if(!(st&i)){var zr=pi&&nt.call(ee,"__wrapped__"),Co=Do&&nt.call(Oe,"__wrapped__");if(zr||Co){var Zi=zr?ee.value():ee,To=Co?Oe.value():Oe;return qn||(qn=new Ss),Er(Zi,To,st,Vt,qn)}}return mi?(qn||(qn=new Ss),uA(ee,Oe,st,Vt,Er,qn)):!1}function ii(ee){if(!zi(ee)||Js(ee))return!1;var Oe=fo(ee)?sn:bt;return Oe.test(Oi(ee))}function qi(ee){return qr(ee)&&Uu(ee.length)&&!!yt[vo(ee)]}function Aa(ee){if(!Au(ee))return ct(ee);var Oe=[];for(var st in Object(ee))nt.call(ee,st)&&st!="constructor"&&Oe.push(st);return Oe}function Cs(ee,Oe,st,Vt,Er,qn){var si=st&i,di=ee.length,Ir=Oe.length;if(di!=Ir&&!(si&&Ir>di))return!1;var Pr=qn.get(ee);if(Pr&&qn.get(Oe))return Pr==Oe;var pi=-1,Do=!0,mi=st&s?new wo:void 0;for(qn.set(ee,Oe),qn.set(Oe,ee);++pi<di;){var zr=ee[pi],Co=Oe[pi];if(Vt)var Zi=si?Vt(Co,zr,pi,Oe,ee,qn):Vt(zr,Co,pi,ee,Oe,qn);if(Zi!==void 0){if(Zi)continue;Do=!1;break}if(mi){if(!vn(Oe,function(To,ca){if(!dr(mi,ca)&&(zr===To||Er(zr,To,st,Vt,qn)))return mi.push(ca)})){Do=!1;break}}else if(!(zr===Co||Er(zr,Co,st,Vt,qn))){Do=!1;break}}return qn.delete(ee),qn.delete(Oe),Do}function xi(ee,Oe,st,Vt,Er,qn,si){switch(st){case me:if(ee.byteLength!=Oe.byteLength||ee.byteOffset!=Oe.byteOffset)return!1;ee=ee.buffer,Oe=Oe.buffer;case Ee:return!(ee.byteLength!=Oe.byteLength||!qn(new J(ee),new J(Oe)));case x:case B:case N:return is(+ee,+Oe);case O:return ee.name==Oe.name&&ee.message==Oe.message;case V:case G:return ee==Oe+"";case j:var di=pn;case ne:var Ir=Vt&i;if(di||(di=lr),ee.size!=Oe.size&&!Ir)return!1;var Pr=si.get(ee);if(Pr)return Pr==Oe;Vt|=s,si.set(ee,Oe);var pi=Cs(di(ee),di(Oe),Vt,Er,qn,si);return si.delete(ee),pi;case oe:if(fr)return fr.call(ee)==fr.call(Oe)}return!1}function uA(ee,Oe,st,Vt,Er,qn){var si=st&i,di=Ja(ee),Ir=di.length,Pr=Ja(Oe),pi=Pr.length;if(Ir!=pi&&!si)return!1;for(var Do=Ir;Do--;){var mi=di[Do];if(!(si?mi in Oe:nt.call(Oe,mi)))return!1}var zr=qn.get(ee);if(zr&&qn.get(Oe))return zr==Oe;var Co=!0;qn.set(ee,Oe),qn.set(Oe,ee);for(var Zi=si;++Do<Ir;){mi=di[Do];var To=ee[mi],ca=Oe[mi];if(Vt)var Pa=si?Vt(ca,To,mi,Oe,ee,qn):Vt(To,ca,mi,ee,Oe,qn);if(!(Pa===void 0?To===ca||Er(To,ca,st,Vt,qn):Pa)){Co=!1;break}Zi||(Zi=mi=="constructor")}if(Co&&!Zi){var cu=ee.constructor,Ws=Oe.constructor;cu!=Ws&&"constructor"in ee&&"constructor"in Oe&&!(typeof cu=="function"&&cu instanceof cu&&typeof Ws=="function"&&Ws instanceof Ws)&&(Co=!1)}return qn.delete(ee),qn.delete(Oe),Co}function Ja(ee){return Di(ee,Vi,Qo)}function oi(ee,Oe){var st=ee.__data__;return Xs(Oe)?st[typeof Oe=="string"?"string":"hash"]:st.map}function to(ee,Oe){var st=Pn(ee,Oe);return ii(st)?st:void 0}function $o(ee){var Oe=nt.call(ee,Fe),st=ee[Fe];try{ee[Fe]=void 0;var Vt=!0}catch{}var Er=Ht.call(ee);return Vt&&(Oe?ee[Fe]=st:delete ee[Fe]),Er}var Qo=Qe?function(ee){return ee==null?[]:(ee=Object(ee),nn(Qe(ee),function(Oe){return ve.call(ee,Oe)}))}:uo,js=vo;(dt&&js(new dt(new ArrayBuffer(1)))!=me||qt&&js(new qt)!=j||Gt&&js(Gt.resolve())!=se||zt&&js(new zt)!=ne||on&&js(new on)!=fe)&&(js=function(ee){var Oe=vo(ee),st=Oe==H?ee.constructor:void 0,Vt=st?Oi(st):"";if(Vt)switch(Vt){case Dn:return me;case rr:return j;case Br:return se;case Jn:return ne;case un:return fe}return Oe});function Es(ee,Oe){return Oe=Oe??l,!!Oe&&(typeof ee=="number"||Yt.test(ee))&&ee>-1&&ee%1==0&&ee<Oe}function Xs(ee){var Oe=typeof ee;return Oe=="string"||Oe=="number"||Oe=="symbol"||Oe=="boolean"?ee!=="__proto__":ee===null}function Js(ee){return!!wt&&wt in ee}function Au(ee){var Oe=ee&&ee.constructor,st=typeof Oe=="function"&&Oe.prototype||Ge;return ee===st}function Ns(ee){return Ht.call(ee)}function Oi(ee){if(ee!=null){try{return pe.call(ee)}catch{}try{return ee+""}catch{}}return""}function is(ee,Oe){return ee===Oe||ee!==ee&&Oe!==Oe}var ea=rs(function(){return arguments}())?rs:function(ee){return qr(ee)&&nt.call(ee,"callee")&&!ve.call(ee,"callee")},va=Array.isArray;function As(ee){return ee!=null&&Uu(ee.length)&&!fo(ee)}var pl=rt||Ki;function ml(ee,Oe){return ua(ee,Oe)}function fo(ee){if(!zi(ee))return!1;var Oe=vo(ee);return Oe==P||Oe==U||Oe==y||Oe==re}function Uu(ee){return typeof ee=="number"&&ee>-1&&ee%1==0&&ee<=l}function zi(ee){var Oe=typeof ee;return ee!=null&&(Oe=="object"||Oe=="function")}function qr(ee){return ee!=null&&typeof ee=="object"}var Dl=Lt?tn(Lt):qi;function Vi(ee){return As(ee)?fn(ee):Aa(ee)}function uo(){return[]}function Ki(){return!1}n.exports=ml}(Lv,Lv.exports)),Lv.exports}var Kce=Pce();const K6=fl(Kce);function Li(){var n="/home/runner/work/maputnik/maputnik/src/libs/layerwatcher.ts",e="77d2098743f5a64765174c6e14fc4dc25f900f6c",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/layerwatcher.ts",statementMap:{0:{start:{line:10,column:4},end:{line:11,column:7}},1:{start:{line:12,column:4},end:{line:13,column:7}},2:{start:{line:14,column:4},end:{line:14,column:23}},3:{start:{line:15,column:4},end:{line:15,column:28}},4:{start:{line:16,column:4},end:{line:16,column:90}},5:{start:{line:19,column:28},end:{line:19,column:48}},6:{start:{line:20,column:4},end:{line:22,column:7}},7:{start:{line:21,column:6},end:{line:21,column:88}},8:{start:{line:23,column:4},end:{line:25,column:5}},9:{start:{line:24,column:6},end:{line:24,column:42}},10:{start:{line:26,column:4},end:{line:26,column:48}},11:{start:{line:29,column:33},end:{line:29,column:58}},12:{start:{line:30,column:4},end:{line:43,column:7}},13:{start:{line:31,column:6},end:{line:42,column:9}},14:{start:{line:32,column:32},end:{line:32,column:71}},15:{start:{line:33,column:23},end:{line:33,column:53}},16:{start:{line:34,column:8},end:{line:40,column:11}},17:{start:{line:35,column:10},end:{line:39,column:13}},18:{start:{line:36,column:40},end:{line:36,column:75}},19:{start:{line:37,column:12},end:{line:37,column:71}},20:{start:{line:38,column:12},end:{line:38,column:64}},21:{start:{line:41,column:8},end:{line:41,column:60}},22:{start:{line:44,column:4},end:{line:46,column:5}},23:{start:{line:45,column:6},end:{line:45,column:52}},24:{start:{line:50,column:4},end:{line:50,column:25}},25:{start:{line:53,column:4},end:{line:53,column:30}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:2},end:{line:9,column:3}},loc:{start:{line:9,column:25},end:{line:17,column:3}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:10,column:52},end:{line:10,column:53}},loc:{start:{line:10,column:58},end:{line:11,column:5}},line:10},2:{name:"(anonymous_2)",decl:{start:{line:12,column:62},end:{line:12,column:63}},loc:{start:{line:12,column:68},end:{line:13,column:5}},line:12},3:{name:"(anonymous_3)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:18},end:{line:27,column:3}},line:18},4:{name:"(anonymous_4)",decl:{start:{line:20,column:48},end:{line:20,column:49}},loc:{start:{line:20,column:62},end:{line:22,column:5}},line:20},5:{name:"(anonymous_5)",decl:{start:{line:28,column:2},end:{line:28,column:3}},loc:{start:{line:28,column:32},end:{line:47,column:3}},line:28},6:{name:"(anonymous_6)",decl:{start:{line:30,column:39},end:{line:30,column:40}},loc:{start:{line:30,column:53},end:{line:43,column:5}},line:30},7:{name:"(anonymous_7)",decl:{start:{line:31,column:46},end:{line:31,column:47}},loc:{start:{line:31,column:65},end:{line:42,column:7}},line:31},8:{name:"(anonymous_8)",decl:{start:{line:34,column:58},end:{line:34,column:59}},loc:{start:{line:34,column:71},end:{line:40,column:9}},line:34},9:{name:"(anonymous_9)",decl:{start:{line:35,column:50},end:{line:35,column:51}},loc:{start:{line:35,column:68},end:{line:39,column:11}},line:35},10:{name:"(anonymous_10)",decl:{start:{line:49,column:2},end:{line:49,column:3}},loc:{start:{line:49,column:16},end:{line:51,column:3}},line:49},11:{name:"(anonymous_11)",decl:{start:{line:52,column:2},end:{line:52,column:3}},loc:{start:{line:52,column:21},end:{line:54,column:3}},line:52}},branchMap:{0:{loc:{start:{line:9,column:14},end:{line:9,column:23}},type:"default-arg",locations:[{start:{line:9,column:21},end:{line:9,column:23}}],line:9},1:{loc:{start:{line:10,column:27},end:{line:11,column:6}},type:"binary-expr",locations:[{start:{line:10,column:27},end:{line:10,column:47}},{start:{line:10,column:52},end:{line:11,column:5}}],line:10},2:{loc:{start:{line:12,column:32},end:{line:13,column:6}},type:"binary-expr",locations:[{start:{line:12,column:32},end:{line:12,column:57}},{start:{line:12,column:62},end:{line:13,column:5}}],line:12},3:{loc:{start:{line:23,column:4},end:{line:25,column:5}},type:"if",locations:[{start:{line:23,column:4},end:{line:25,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:23},4:{loc:{start:{line:31,column:7},end:{line:31,column:36}},type:"binary-expr",locations:[{start:{line:31,column:7},end:{line:31,column:30}},{start:{line:31,column:34},end:{line:31,column:36}}],line:31},5:{loc:{start:{line:32,column:32},end:{line:32,column:71}},type:"binary-expr",locations:[{start:{line:32,column:32},end:{line:32,column:65}},{start:{line:32,column:69},end:{line:32,column:71}}],line:32},6:{loc:{start:{line:36,column:40},end:{line:36,column:75}},type:"binary-expr",locations:[{start:{line:36,column:40},end:{line:36,column:69}},{start:{line:36,column:73},end:{line:36,column:75}}],line:36},7:{loc:{start:{line:44,column:4},end:{line:46,column:5}},type:"if",locations:[{start:{line:44,column:4},end:{line:46,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:44}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},b:{0:[0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/layerwatcher.ts"],names:[],mappings:"AAAA,OAAO,cAAc;AACrB,OAAO,aAAa;AAUpB,qBAAqB,aAAa;AAAA,EAChC;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EAEA,YAAY,OAA4B,CAAC,GAAG;AAC1C,SAAK,kBAAkB,KAAK,oBAAoB,MAAM;AAAA,IAAC;AACvD,SAAK,uBAAuB,KAAK,yBAAyB,MAAM;AAAA,IAAC;AAEjE,SAAK,WAAW,CAAC;AACjB,SAAK,gBAAgB,CAAC;AAKtB,SAAK,oCAAoC,SAAS,KAAK,0BAA0B,GAAI;AAAA,EACvF;AAAA,EAEA,WAAW,KAAU;AACnB,UAAM,kBAAkB,EAAE,GAAG,KAAK,SAAS;AAE3C,WAAO,KAAK,IAAI,MAAM,YAAY,EAAE,QAAQ,cAAY;AAGtD,WAAK,SAAS,QAAQ,IAAI,IAAI,MAAM,aAAa,QAAQ,EAAE,QAAQ;AAAA,IACrE,CAAC;AAED,QAAG,CAAC,QAAQ,iBAAiB,KAAK,QAAQ,GAAG;AAC3C,WAAK,gBAAgB,KAAK,QAAQ;AAAA,IACpC;AAEA,SAAK,kCAAkC,GAAG;AAAA,EAC5C;AAAA,EAEA,yBAAyB,KAAU;AACjC,UAAM,uBAAuB,EAAE,GAAG,KAAK,cAAc;AAErD,WAAO,KAAK,KAAK,QAAQ,EAAE,QAAQ,cAAY;AAC7C,OAAC,KAAK,SAAS,QAAQ,KAAK,CAAC,GAAG,QAAQ,mBAAiB;AACvD,cAAM,kBAAkB,KAAK,cAAc,aAAa,KAAK,CAAC;AAC9D,cAAM,SAAS,EAAE,aAAa,cAAc;AAC5C,YAAI,oBAAoB,UAAU,MAAa,EAAE,QAAQ,aAAW;AAClE,iBAAO,KAAK,QAAQ,UAAU,EAAE,QAAQ,kBAAgB;AACtD,kBAAM,sBAAsB,gBAAgB,YAAY,KAAK,CAAC;AAC9D,gCAAoB,QAAQ,WAAW,YAAY,CAAC,IAAI,CAAC;AACzD,4BAAgB,YAAY,IAAI;AAAA,UAClC,CAAC;AAAA,QACH,CAAC;AAED,aAAK,cAAc,aAAa,IAAI;AAAA,MACtC,CAAC;AAAA,IACH,CAAC;AAED,QAAG,CAAC,QAAQ,sBAAsB,KAAK,aAAa,GAAG;AACrD,WAAK,qBAAqB,KAAK,aAAa;AAAA,IAC9C;AAAA,EAEF;AAAA;AAAA,EAGA,IAAI,UAAU;AACZ,WAAO,KAAK;AAAA,EACd;AAAA,EAEA,IAAI,eAAe;AACjB,WAAO,KAAK;AAAA,EACd;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"77d2098743f5a64765174c6e14fc4dc25f900f6c"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Li=function(){return l},l}Li();class Rce{constructor(e=(Li().b[0][0]++,{})){Kn(this,"onSourcesChange");Kn(this,"onVectorLayersChange");Kn(this,"throttledAnalyzeVectorLayerFields");Kn(this,"_sources");Kn(this,"_vectorLayers");Li().f[0]++,Li().s[0]++,this.onSourcesChange=(Li().b[1][0]++,e.onSourcesChange||(Li().b[1][1]++,()=>{Li().f[1]++})),Li().s[1]++,this.onVectorLayersChange=(Li().b[2][0]++,e.onVectorLayersChange||(Li().b[2][1]++,()=>{Li().f[2]++})),Li().s[2]++,this._sources={},Li().s[3]++,this._vectorLayers={},Li().s[4]++,this.throttledAnalyzeVectorLayerFields=Tce(this.analyzeVectorLayerFields,5e3)}analyzeMap(e){Li().f[3]++;const t=(Li().s[5]++,{...this._sources});Li().s[6]++,Object.keys(e.style.sourceCaches).forEach(r=>{Li().f[4]++,Li().s[7]++,this._sources[r]=e.style.sourceCaches[r]._source.vectorLayerIds}),Li().s[8]++,K6(t,this._sources)?Li().b[3][1]++:(Li().b[3][0]++,Li().s[9]++,this.onSourcesChange(this._sources)),Li().s[10]++,this.throttledAnalyzeVectorLayerFields(e)}analyzeVectorLayerFields(e){Li().f[5]++;const t=(Li().s[11]++,{...this._vectorLayers});Li().s[12]++,Object.keys(this._sources).forEach(r=>{Li().f[6]++,Li().s[13]++,(Li().b[4][0]++,this._sources[r]||(Li().b[4][1]++,[])).forEach(i=>{Li().f[7]++;const s=(Li().s[14]++,Li().b[5][0]++,this._vectorLayers[i]||(Li().b[5][1]++,{})),l=(Li().s[15]++,{sourceLayer:i});Li().s[16]++,e.querySourceFeatures(r,l).forEach(o=>{Li().f[8]++,Li().s[17]++,Object.keys(o.properties).forEach(f=>{Li().f[9]++;const y=(Li().s[18]++,Li().b[6][0]++,s[f]||(Li().b[6][1]++,{}));Li().s[19]++,y[o.properties[f]]={},Li().s[20]++,s[f]=y})}),Li().s[21]++,this._vectorLayers[i]=s})}),Li().s[22]++,K6(t,this._vectorLayers)?Li().b[7][1]++:(Li().b[7][0]++,Li().s[23]++,this.onVectorLayersChange(this._vectorLayers))}get sources(){return Li().f[10]++,Li().s[24]++,this._sources}get vectorLayers(){return Li().f[11]++,Li().s[25]++,this._vectorLayers}}function $s(){var n="/home/runner/work/maputnik/maputnik/src/libs/debug.ts",e="f3fc52390a8e0125df8ac2b3d3c29ba103bd1c39",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/debug.ts",statementMap:{0:{start:{line:1,column:19},end:{line:1,column:21}},1:{start:{line:3,column:13},end:{line:3,column:55}},2:{start:{line:4,column:18},end:{line:4,column:33}},3:{start:{line:5,column:2},end:{line:9,column:3}},4:{start:{line:6,column:4},end:{line:6,column:42}},5:{start:{line:8,column:4},end:{line:8,column:17}},6:{start:{line:12,column:2},end:{line:12,column:91}},7:{start:{line:15,column:2},end:{line:17,column:3}},8:{start:{line:16,column:4},end:{line:16,column:19}},9:{start:{line:18,column:2},end:{line:18,column:54}},10:{start:{line:19,column:2},end:{line:19,column:37}},11:{start:{line:22,column:2},end:{line:24,column:3}},12:{start:{line:23,column:4},end:{line:23,column:19}},13:{start:{line:25,column:2},end:{line:27,column:3}},14:{start:{line:26,column:4},end:{line:26,column:38}},15:{start:{line:29,column:12},end:{line:33,column:1}},16:{start:{line:34,column:0},end:{line:34,column:19}}},fnMap:{0:{name:"enabled",decl:{start:{line:2,column:9},end:{line:2,column:16}},loc:{start:{line:2,column:19},end:{line:10,column:1}},line:2},1:{name:"genErr",decl:{start:{line:11,column:9},end:{line:11,column:15}},loc:{start:{line:11,column:18},end:{line:13,column:1}},line:11},2:{name:"set",decl:{start:{line:14,column:9},end:{line:14,column:12}},loc:{start:{line:14,column:36},end:{line:20,column:1}},line:14},3:{name:"get",decl:{start:{line:21,column:9},end:{line:21,column:12}},loc:{start:{line:21,column:29},end:{line:28,column:1}},line:21}},branchMap:{0:{loc:{start:{line:5,column:2},end:{line:9,column:3}},type:"if",locations:[{start:{line:5,column:2},end:{line:9,column:3}},{start:{line:7,column:9},end:{line:9,column:3}}],line:5},1:{loc:{start:{line:15,column:2},end:{line:17,column:3}},type:"if",locations:[{start:{line:15,column:2},end:{line:17,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:15},2:{loc:{start:{line:18,column:26},end:{line:18,column:53}},type:"binary-expr",locations:[{start:{line:18,column:26},end:{line:18,column:47}},{start:{line:18,column:51},end:{line:18,column:53}}],line:18},3:{loc:{start:{line:22,column:2},end:{line:24,column:3}},type:"if",locations:[{start:{line:22,column:2},end:{line:24,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:22},4:{loc:{start:{line:25,column:2},end:{line:27,column:3}},type:"if",locations:[{start:{line:25,column:2},end:{line:27,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:25}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0},f:{0:0,1:0,2:0,3:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/debug.ts"],names:[],mappings:"AAMA,MAAM,aAAyB,CAAC;AAEhC,SAAS,UAAU;AACjB,QAAM,KAAK,IAAI,IAAI,OAAO,SAAS,IAAI,EAAE;AACzC,QAAM,UAAU,GAAG,IAAI,OAAO;AAC9B,MAAG,SAAS;AACV,WAAO,CAAC,CAAC,QAAQ,MAAM,aAAa;AAAA,EACtC,OACK;AACH,WAAO;AAAA,EACT;AACF;AAEA,SAAS,SAAS;AAChB,SAAO,IAAI,MAAM,sEAAsE;AACzF;AAEA,SAAS,IAAI,WAA6B,KAAa,OAAY;AACjE,MAAG,CAAC,QAAQ,GAAG;AACb,UAAM,OAAO;AAAA,EACf;AACA,aAAW,SAAS,IAAI,WAAW,SAAS,KAAK,CAAC;AAClD,aAAW,SAAS,EAAE,GAAG,IAAI;AAC/B;AAEA,SAAS,IAAI,WAA6B,KAAa;AACrD,MAAG,CAAC,QAAQ,GAAG;AACb,UAAM,OAAO;AAAA,EACf;AACA,MAAG,OAAO,UAAU,eAAe,KAAK,YAAY,SAAS,GAAG;AAC9D,WAAO,WAAW,SAAS,EAAE,GAAG;AAAA,EAClC;AACF;AAEA,MAAM,MAAM;AAAA,EACV;AAAA,EACA;AAAA,EACA;AACF;AAEC,OAAe,QAAQ;AACxB,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f3fc52390a8e0125df8ac2b3d3c29ba103bd1c39"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return $s=function(){return l},l}$s();const Zv=($s().s[0]++,{});function HO(){$s().f[0]++;const n=($s().s[1]++,new URL(window.location.href).searchParams),e=($s().s[2]++,n.get("debug"));return $s().s[3]++,e?($s().b[0][0]++,$s().s[4]++,!!e.match(/^(|1|true)$/)):($s().b[0][1]++,$s().s[5]++,!1)}function sN(){return $s().f[1]++,$s().s[6]++,new Error("Debug not enabled, enable by appending '?debug' to your query string")}function Dce(n,e,t){if($s().f[2]++,$s().s[7]++,HO())$s().b[1][1]++;else throw $s().b[1][0]++,$s().s[8]++,sN();$s().s[9]++,Zv[n]=($s().b[2][0]++,Zv[n]||($s().b[2][1]++,{})),$s().s[10]++,Zv[n][e]=t}function Fce(n,e){if($s().f[3]++,$s().s[11]++,HO())$s().b[3][1]++;else throw $s().b[3][0]++,$s().s[12]++,sN();if($s().s[13]++,Object.prototype.hasOwnProperty.call(Zv,n))return $s().b[4][0]++,$s().s[14]++,Zv[n][e];$s().b[4][1]++}const vg=($s().s[15]++,{enabled:HO,get:Fce,set:Dce});$s().s[16]++;window.debug=vg;function Me(){var n="/home/runner/work/maputnik/maputnik/src/components/App.tsx",e="bafcb93873c2a71cab2bdafeb2ce6a3195766cd8",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/App.tsx",statementMap:{0:{start:{line:37,column:0},end:{line:37,column:30}},1:{start:{line:39,column:29},end:{line:39,column:60}},2:{start:{line:40,column:26},end:{line:40,column:54}},3:{start:{line:41,column:31},end:{line:41,column:64}},4:{start:{line:42,column:2},end:{line:54,column:3}},5:{start:{line:43,column:24},end:{line:43,column:95}},6:{start:{line:44,column:4},end:{line:46,column:5}},7:{start:{line:45,column:6},end:{line:45,column:47}},8:{start:{line:47,column:9},end:{line:54,column:3}},9:{start:{line:48,column:24},end:{line:48,column:96}},10:{start:{line:49,column:4},end:{line:51,column:5}},11:{start:{line:50,column:6},end:{line:50,column:47}},12:{start:{line:53,column:4},end:{line:53,column:15}},13:{start:{line:57,column:2},end:{line:66,column:4}},14:{start:{line:73,column:4},end:{line:73,column:17}},15:{start:{line:74,column:4},end:{line:74,column:19}},16:{start:{line:75,column:4},end:{line:75,column:45}},17:{start:{line:76,column:19},end:{line:76,column:75}},18:{start:{line:77,column:15},end:{line:77,column:38}},19:{start:{line:78,column:4},end:{line:80,column:5}},20:{start:{line:79,column:6},end:{line:79,column:34}},21:{start:{line:81,column:4},end:{line:85,column:7}},22:{start:{line:82,column:40},end:{line:82,column:86}},23:{start:{line:86,column:22},end:{line:137,column:5}},24:{start:{line:90,column:10},end:{line:90,column:40}},25:{start:{line:96,column:10},end:{line:96,column:35}},26:{start:{line:102,column:10},end:{line:102,column:37}},27:{start:{line:108,column:10},end:{line:108,column:38}},28:{start:{line:114,column:10},end:{line:114,column:39}},29:{start:{line:120,column:10},end:{line:122,column:12}},30:{start:{line:128,column:10},end:{line:128,column:63}},31:{start:{line:134,column:10},end:{line:134,column:36}},32:{start:{line:138,column:4},end:{line:151,column:7}},33:{start:{line:139,column:6},end:{line:150,column:7}},34:{start:{line:140,column:8},end:{line:140,column:24}},35:{start:{line:141,column:8},end:{line:141,column:30}},36:{start:{line:142,column:13},end:{line:150,column:7}},37:{start:{line:143,column:25},end:{line:145,column:10}},38:{start:{line:144,column:10},end:{line:144,column:41}},39:{start:{line:146,column:8},end:{line:149,column:9}},40:{start:{line:147,column:10},end:{line:147,column:44}},41:{start:{line:148,column:10},end:{line:148,column:29}},42:{start:{line:152,column:21},end:{line:152,column:38}},43:{start:{line:153,column:4},end:{line:172,column:5}},44:{start:{line:154,column:6},end:{line:154,column:41}},45:{start:{line:155,column:6},end:{line:155,column:74}},46:{start:{line:155,column:43},end:{line:155,column:72}},47:{start:{line:156,column:6},end:{line:156,column:31}},48:{start:{line:158,column:6},end:{line:160,column:7}},49:{start:{line:159,column:8},end:{line:159,column:33}},50:{start:{line:161,column:6},end:{line:171,column:9}},51:{start:{line:162,column:8},end:{line:165,column:9}},52:{start:{line:163,column:10},end:{line:163,column:74}},53:{start:{line:164,column:10},end:{line:164,column:45}},54:{start:{line:166,column:8},end:{line:166,column:104}},55:{start:{line:166,column:50},end:{line:166,column:102}},56:{start:{line:167,column:8},end:{line:170,column:9}},57:{start:{line:168,column:10},end:{line:168,column:63}},58:{start:{line:169,column:10},end:{line:169,column:69}},59:{start:{line:173,column:4},end:{line:176,column:5}},60:{start:{line:174,column:6},end:{line:174,column:65}},61:{start:{line:175,column:6},end:{line:175,column:59}},62:{start:{line:177,column:4},end:{line:211,column:6}},63:{start:{line:212,column:4},end:{line:214,column:7}},64:{start:{line:213,column:35},end:{line:213,column:69}},65:{start:{line:216,column:19},end:{line:234,column:3}},66:{start:{line:217,column:4},end:{line:233,column:5}},67:{start:{line:218,column:6},end:{line:224,column:7}},68:{start:{line:219,column:8},end:{line:219,column:27}},69:{start:{line:220,column:8},end:{line:220,column:22}},70:{start:{line:221,column:13},end:{line:224,column:7}},71:{start:{line:222,column:8},end:{line:222,column:27}},72:{start:{line:223,column:8},end:{line:223,column:22}},73:{start:{line:226,column:6},end:{line:232,column:7}},74:{start:{line:227,column:8},end:{line:227,column:27}},75:{start:{line:228,column:8},end:{line:228,column:22}},76:{start:{line:229,column:13},end:{line:232,column:7}},77:{start:{line:230,column:8},end:{line:230,column:27}},78:{start:{line:231,column:8},end:{line:231,column:22}},79:{start:{line:236,column:4},end:{line:236,column:60}},80:{start:{line:239,column:4},end:{line:239,column:63}},81:{start:{line:242,column:4},end:{line:242,column:40}},82:{start:{line:245,column:21},end:{line:245,column:55}},83:{start:{line:246,column:24},end:{line:246,column:93}},84:{start:{line:247,column:21},end:{line:247,column:110}},85:{start:{line:248,column:4},end:{line:250,column:7}},86:{start:{line:249,column:6},end:{line:249,column:80}},87:{start:{line:253,column:4},end:{line:255,column:7}},88:{start:{line:254,column:6},end:{line:254,column:80}},89:{start:{line:257,column:29},end:{line:271,column:3}},90:{start:{line:258,column:4},end:{line:262,column:5}},91:{start:{line:259,column:6},end:{line:261,column:9}},92:{start:{line:263,column:25},end:{line:269,column:5}},93:{start:{line:270,column:4},end:{line:270,column:38}},94:{start:{line:272,column:19},end:{line:395,column:3}},95:{start:{line:273,column:4},end:{line:278,column:6}},96:{start:{line:279,column:4},end:{line:281,column:5}},97:{start:{line:280,column:6},end:{line:280,column:71}},98:{start:{line:282,column:4},end:{line:284,column:5}},99:{start:{line:283,column:6},end:{line:283,column:71}},100:{start:{line:285,column:4},end:{line:289,column:5}},101:{start:{line:286,column:6},end:{line:288,column:7}},102:{start:{line:287,column:8},end:{line:287,column:63}},103:{start:{line:290,column:4},end:{line:292,column:5}},104:{start:{line:291,column:6},end:{line:291,column:44}},105:{start:{line:293,column:19},end:{line:293,column:51}},106:{start:{line:294,column:24},end:{line:294,column:26}},107:{start:{line:295,column:4},end:{line:306,column:5}},108:{start:{line:296,column:26},end:{line:296,column:42}},109:{start:{line:297,column:6},end:{line:305,column:9}},110:{start:{line:298,column:8},end:{line:303,column:9}},111:{start:{line:299,column:24},end:{line:301,column:11}},112:{start:{line:302,column:10},end:{line:302,column:34}},113:{start:{line:304,column:8},end:{line:304,column:40}},114:{start:{line:307,column:25},end:{line:358,column:6}},115:{start:{line:308,column:23},end:{line:308,column:109}},116:{start:{line:309,column:6},end:{line:322,column:7}},117:{start:{line:310,column:35},end:{line:310,column:43}},118:{start:{line:311,column:8},end:{line:321,column:10}},119:{start:{line:323,column:33},end:{line:323,column:100}},120:{start:{line:324,column:6},end:{line:337,column:7}},121:{start:{line:325,column:35},end:{line:325,column:53}},122:{start:{line:326,column:8},end:{line:336,column:10}},123:{start:{line:338,column:25},end:{line:338,column:88}},124:{start:{line:339,column:6},end:{line:357,column:7}},125:{start:{line:340,column:52},end:{line:340,column:62}},126:{start:{line:341,column:20},end:{line:341,column:78}},127:{start:{line:342,column:8},end:{line:352,column:10}},128:{start:{line:354,column:8},end:{line:356,column:10}},129:{start:{line:359,column:24},end:{line:359,column:30}},130:{start:{line:360,column:4},end:{line:374,column:5}},131:{start:{line:361,column:6},end:{line:361,column:42}},132:{start:{line:362,column:6},end:{line:373,column:9}},133:{start:{line:363,column:28},end:{line:363,column:33}},134:{start:{line:364,column:8},end:{line:372,column:9}},135:{start:{line:365,column:10},end:{line:371,column:11}},136:{start:{line:366,column:28},end:{line:366,column:49}},137:{start:{line:367,column:30},end:{line:367,column:69}},138:{start:{line:368,column:12},end:{line:368,column:44}},139:{start:{line:370,column:12},end:{line:370,column:30}},140:{start:{line:375,column:4},end:{line:377,column:5}},141:{start:{line:376,column:6},end:{line:376,column:40}},142:{start:{line:378,column:4},end:{line:380,column:5}},143:{start:{line:379,column:6},end:{line:379,column:40}},144:{start:{line:381,column:4},end:{line:383,column:5}},145:{start:{line:382,column:6},end:{line:382,column:47}},146:{start:{line:384,column:4},end:{line:386,column:5}},147:{start:{line:385,column:6},end:{line:385,column:31}},148:{start:{line:387,column:4},end:{line:394,column:7}},149:{start:{line:392,column:6},end:{line:392,column:26}},150:{start:{line:393,column:6},end:{line:393,column:27}},151:{start:{line:396,column:11},end:{line:403,column:3}},152:{start:{line:397,column:24},end:{line:397,column:49}},153:{start:{line:398,column:21},end:{line:398,column:67}},154:{start:{line:399,column:4},end:{line:399,column:61}},155:{start:{line:400,column:4},end:{line:402,column:7}},156:{start:{line:404,column:11},end:{line:411,column:3}},157:{start:{line:405,column:24},end:{line:405,column:49}},158:{start:{line:406,column:21},end:{line:406,column:67}},159:{start:{line:407,column:4},end:{line:407,column:61}},160:{start:{line:408,column:4},end:{line:410,column:7}},161:{start:{line:412,column:16},end:{line:426,column:3}},162:{start:{line:413,column:33},end:{line:413,column:37}},163:{start:{line:414,column:17},end:{line:414,column:43}},164:{start:{line:415,column:4},end:{line:415,column:53}},165:{start:{line:416,column:4},end:{line:416,column:53}},166:{start:{line:417,column:4},end:{line:417,column:38}},167:{start:{line:417,column:31},end:{line:417,column:38}},168:{start:{line:418,column:4},end:{line:422,column:5}},169:{start:{line:419,column:6},end:{line:421,column:9}},170:{start:{line:423,column:4},end:{line:423,column:29}},171:{start:{line:424,column:4},end:{line:424,column:49}},172:{start:{line:425,column:4},end:{line:425,column:32}},173:{start:{line:427,column:19},end:{line:433,column:3}},174:{start:{line:428,column:25},end:{line:431,column:5}},175:{start:{line:432,column:4},end:{line:432,column:38}},176:{start:{line:434,column:19},end:{line:439,column:3}},177:{start:{line:435,column:19},end:{line:435,column:45}},178:{start:{line:436,column:28},end:{line:436,column:43}},179:{start:{line:437,column:4},end:{line:437,column:37}},180:{start:{line:438,column:4},end:{line:438,column:41}},181:{start:{line:440,column:16},end:{line:447,column:3}},182:{start:{line:441,column:19},end:{line:441,column:45}},183:{start:{line:442,column:26},end:{line:442,column:41}},184:{start:{line:443,column:24},end:{line:443,column:55}},185:{start:{line:444,column:4},end:{line:444,column:46}},186:{start:{line:445,column:4},end:{line:445,column:48}},187:{start:{line:446,column:4},end:{line:446,column:39}},188:{start:{line:448,column:28},end:{line:457,column:3}},189:{start:{line:449,column:19},end:{line:449,column:45}},190:{start:{line:450,column:26},end:{line:450,column:41}},191:{start:{line:451,column:18},end:{line:451,column:45}},192:{start:{line:452,column:26},end:{line:452,column:70}},193:{start:{line:453,column:4},end:{line:453,column:88}},194:{start:{line:454,column:4},end:{line:454,column:33}},195:{start:{line:455,column:4},end:{line:455,column:33}},196:{start:{line:456,column:4},end:{line:456,column:39}},197:{start:{line:458,column:20},end:{line:465,column:3}},198:{start:{line:459,column:26},end:{line:459,column:61}},199:{start:{line:460,column:4},end:{line:463,column:6}},200:{start:{line:464,column:4},end:{line:464,column:39}},201:{start:{line:466,column:19},end:{line:470,column:3}},202:{start:{line:467,column:26},end:{line:467,column:61}},203:{start:{line:468,column:4},end:{line:468,column:33}},204:{start:{line:469,column:4},end:{line:469,column:39}},205:{start:{line:471,column:16},end:{line:475,column:3}},206:{start:{line:472,column:4},end:{line:474,column:27}},207:{start:{line:476,column:21},end:{line:490,column:3}},208:{start:{line:477,column:21},end:{line:477,column:44}},209:{start:{line:478,column:4},end:{line:489,column:5}},210:{start:{line:479,column:27},end:{line:485,column:7}},211:{start:{line:486,column:6},end:{line:486,column:26}},212:{start:{line:488,column:6},end:{line:488,column:22}},213:{start:{line:491,column:14},end:{line:495,column:3}},214:{start:{line:492,column:4},end:{line:492,column:34}},215:{start:{line:493,column:4},end:{line:493,column:47}},216:{start:{line:494,column:4},end:{line:494,column:34}},217:{start:{line:497,column:23},end:{line:497,column:25}},218:{start:{line:498,column:4},end:{line:538,column:5}},219:{start:{line:499,column:6},end:{line:537,column:7}},220:{start:{line:500,column:8},end:{line:503,column:10}},221:{start:{line:504,column:18},end:{line:504,column:25}},222:{start:{line:505,column:8},end:{line:509,column:9}},223:{start:{line:506,column:10},end:{line:506,column:62}},224:{start:{line:508,column:10},end:{line:508,column:63}},225:{start:{line:510,column:32},end:{line:523,column:9}},226:{start:{line:511,column:10},end:{line:513,column:11}},227:{start:{line:512,column:12},end:{line:512,column:19}},228:{start:{line:514,column:26},end:{line:516,column:12}},229:{start:{line:517,column:10},end:{line:519,column:11}},230:{start:{line:518,column:12},end:{line:518,column:47}},231:{start:{line:520,column:10},end:{line:522,column:13}},232:{start:{line:524,column:8},end:{line:534,column:9}},233:{start:{line:525,column:10},end:{line:527,column:13}},234:{start:{line:525,column:69},end:{line:525,column:90}},235:{start:{line:526,column:12},end:{line:526,column:74}},236:{start:{line:529,column:10},end:{line:533,column:13}},237:{start:{line:531,column:32},end:{line:531,column:47}},238:{start:{line:531,column:64},end:{line:531,column:85}},239:{start:{line:532,column:12},end:{line:532,column:74}},240:{start:{line:536,column:8},end:{line:536,column:86}},241:{start:{line:539,column:4},end:{line:544,column:5}},242:{start:{line:540,column:6},end:{line:540,column:39}},243:{start:{line:541,column:6},end:{line:543,column:9}},244:{start:{line:547,column:21},end:{line:547,column:55}},245:{start:{line:548,column:4},end:{line:548,column:53}},246:{start:{line:550,column:16},end:{line:554,column:3}},247:{start:{line:551,column:4},end:{line:553,column:7}},248:{start:{line:556,column:40},end:{line:556,column:50}},249:{start:{line:557,column:21},end:{line:568,column:5}},250:{start:{line:560,column:8},end:{line:562,column:11}},251:{start:{line:565,column:8},end:{line:565,column:44}},252:{start:{line:566,column:8},end:{line:566,column:28}},253:{start:{line:569,column:21},end:{line:569,column:40}},254:{start:{line:571,column:4},end:{line:593,column:5}},255:{start:{line:572,column:6},end:{line:580,column:8}},256:{start:{line:582,column:6},end:{line:592,column:8}},257:{start:{line:595,column:4},end:{line:597,column:5}},258:{start:{line:596,column:6},end:{line:596,column:63}},259:{start:{line:598,column:25},end:{line:598,column:27}},260:{start:{line:599,column:4},end:{line:601,column:5}},261:{start:{line:600,column:6},end:{line:600,column:52}},262:{start:{line:602,column:4},end:{line:602,column:160}},263:{start:{line:604,column:18},end:{line:622,column:3}},264:{start:{line:605,column:43},end:{line:605,column:53}},265:{start:{line:606,column:35},end:{line:606,column:45}},266:{start:{line:607,column:16},end:{line:607,column:38}},267:{start:{line:608,column:20},end:{line:608,column:50}},268:{start:{line:609,column:4},end:{line:609,column:70}},269:{start:{line:610,column:23},end:{line:610,column:122}},270:{start:{line:610,column:66},end:{line:610,column:91}},271:{start:{line:610,column:109},end:{line:610,column:121}},272:{start:{line:611,column:4},end:{line:615,column:5}},273:{start:{line:612,column:6},end:{line:612,column:58}},274:{start:{line:614,column:6},end:{line:614,column:39}},275:{start:{line:616,column:4},end:{line:620,column:5}},276:{start:{line:617,column:6},end:{line:617,column:38}},277:{start:{line:618,column:11},end:{line:620,column:5}},278:{start:{line:619,column:6},end:{line:619,column:46}},279:{start:{line:621,column:4},end:{line:621,column:71}},280:{start:{line:623,column:27},end:{line:668,column:3}},281:{start:{line:624,column:16},end:{line:624,column:38}},282:{start:{line:625,column:23},end:{line:625,column:52}},283:{start:{line:626,column:4},end:{line:638,column:5}},284:{start:{line:627,column:21},end:{line:627,column:42}},285:{start:{line:628,column:23},end:{line:628,column:25}},286:{start:{line:629,column:6},end:{line:631,column:9}},287:{start:{line:630,column:8},end:{line:630,column:35}},288:{start:{line:632,column:6},end:{line:637,column:9}},289:{start:{line:639,column:17},end:{line:639,column:45}},290:{start:{line:640,column:4},end:{line:642,column:5}},291:{start:{line:641,column:6},end:{line:641,column:29}},292:{start:{line:643,column:17},end:{line:643,column:46}},293:{start:{line:644,column:4},end:{line:667,column:5}},294:{start:{line:645,column:6},end:{line:666,column:7}},295:{start:{line:646,column:22},end:{line:646,column:37}},296:{start:{line:647,column:46},end:{line:650,column:9}},297:{start:{line:651,column:20},end:{line:651,column:24}},298:{start:{line:652,column:8},end:{line:657,column:9}},299:{start:{line:653,column:33},end:{line:653,column:63}},300:{start:{line:654,column:10},end:{line:656,column:11}},301:{start:{line:655,column:12},end:{line:655,column:26}},302:{start:{line:658,column:8},end:{line:663,column:9}},303:{start:{line:659,column:10},end:{line:662,column:13}},304:{start:{line:665,column:8},end:{line:665,column:26}},305:{start:{line:669,column:18},end:{line:674,column:3}},306:{start:{line:670,column:4},end:{line:673,column:27}},307:{start:{line:676,column:4},end:{line:681,column:27}},308:{start:{line:684,column:4},end:{line:684,column:60}},309:{start:{line:687,column:4},end:{line:687,column:34}},310:{start:{line:689,column:28},end:{line:696,column:3}},311:{start:{line:690,column:4},end:{line:695,column:7}},312:{start:{line:697,column:28},end:{line:704,column:3}},313:{start:{line:698,column:4},end:{line:703,column:7}},314:{start:{line:706,column:19},end:{line:706,column:51}},315:{start:{line:707,column:26},end:{line:707,column:92}},316:{start:{line:708,column:36},end:{line:721,column:5}},317:{start:{line:722,column:38},end:{line:736,column:5}},318:{start:{line:737,column:24},end:{line:756,column:14}},319:{start:{line:757,column:24},end:{line:767,column:14}},320:{start:{line:768,column:35},end:{line:828,column:8}},321:{start:{line:829,column:4},end:{line:839,column:6}}},fnMap:{0:{name:"setFetchAccessToken",decl:{start:{line:38,column:9},end:{line:38,column:28}},loc:{start:{line:38,column:44},end:{line:55,column:1}},line:38},1:{name:"updateRootSpec",decl:{start:{line:56,column:9},end:{line:56,column:23}},loc:{start:{line:56,column:52},end:{line:67,column:1}},line:56},2:{name:"(anonymous_2)",decl:{start:{line:72,column:2},end:{line:72,column:3}},loc:{start:{line:72,column:21},end:{line:215,column:3}},line:72},3:{name:"(anonymous_3)",decl:{start:{line:82,column:26},end:{line:82,column:27}},loc:{start:{line:82,column:40},end:{line:82,column:86}},line:82},4:{name:"(anonymous_4)",decl:{start:{line:89,column:17},end:{line:89,column:18}},loc:{start:{line:89,column:23},end:{line:91,column:9}},line:89},5:{name:"(anonymous_5)",decl:{start:{line:95,column:17},end:{line:95,column:18}},loc:{start:{line:95,column:23},end:{line:97,column:9}},line:95},6:{name:"(anonymous_6)",decl:{start:{line:101,column:17},end:{line:101,column:18}},loc:{start:{line:101,column:23},end:{line:103,column:9}},line:101},7:{name:"(anonymous_7)",decl:{start:{line:107,column:17},end:{line:107,column:18}},loc:{start:{line:107,column:23},end:{line:109,column:9}},line:107},8:{name:"(anonymous_8)",decl:{start:{line:113,column:17},end:{line:113,column:18}},loc:{start:{line:113,column:23},end:{line:115,column:9}},line:113},9:{name:"(anonymous_9)",decl:{start:{line:119,column:17},end:{line:119,column:18}},loc:{start:{line:119,column:23},end:{line:123,column:9}},line:119},10:{name:"(anonymous_10)",decl:{start:{line:127,column:17},end:{line:127,column:18}},loc:{start:{line:127,column:23},end:{line:129,column:9}},line:127},11:{name:"(anonymous_11)",decl:{start:{line:133,column:17},end:{line:133,column:18}},loc:{start:{line:133,column:23},end:{line:135,column:9}},line:133},12:{name:"(anonymous_12)",decl:{start:{line:138,column:44},end:{line:138,column:45}},loc:{start:{line:138,column:51},end:{line:151,column:5}},line:138},13:{name:"(anonymous_13)",decl:{start:{line:143,column:40},end:{line:143,column:41}},loc:{start:{line:143,column:55},end:{line:145,column:9}},line:143},14:{name:"(anonymous_14)",decl:{start:{line:155,column:29},end:{line:155,column:30}},loc:{start:{line:155,column:43},end:{line:155,column:72}},line:155},15:{name:"(anonymous_15)",decl:{start:{line:161,column:27},end:{line:161,column:28}},loc:{start:{line:161,column:36},end:{line:171,column:7}},line:161},16:{name:"(anonymous_16)",decl:{start:{line:166,column:36},end:{line:166,column:37}},loc:{start:{line:166,column:50},end:{line:166,column:102}},line:166},17:{name:"(anonymous_17)",decl:{start:{line:213,column:28},end:{line:213,column:29}},loc:{start:{line:213,column:35},end:{line:213,column:69}},line:213},18:{name:"(anonymous_18)",decl:{start:{line:216,column:19},end:{line:216,column:20}},loc:{start:{line:216,column:26},end:{line:234,column:3}},line:216},19:{name:"(anonymous_19)",decl:{start:{line:235,column:2},end:{line:235,column:3}},loc:{start:{line:235,column:22},end:{line:237,column:3}},line:235},20:{name:"(anonymous_20)",decl:{start:{line:238,column:2},end:{line:238,column:3}},loc:{start:{line:238,column:25},end:{line:240,column:3}},line:238},21:{name:"(anonymous_21)",decl:{start:{line:241,column:2},end:{line:241,column:3}},loc:{start:{line:241,column:27},end:{line:243,column:3}},line:241},22:{name:"(anonymous_22)",decl:{start:{line:244,column:2},end:{line:244,column:3}},loc:{start:{line:244,column:27},end:{line:251,column:3}},line:244},23:{name:"(anonymous_23)",decl:{start:{line:248,column:37},end:{line:248,column:38}},loc:{start:{line:248,column:48},end:{line:250,column:5}},line:248},24:{name:"(anonymous_24)",decl:{start:{line:252,column:2},end:{line:252,column:3}},loc:{start:{line:252,column:23},end:{line:256,column:3}},line:252},25:{name:"(anonymous_25)",decl:{start:{line:253,column:36},end:{line:253,column:37}},loc:{start:{line:253,column:47},end:{line:255,column:5}},line:253},26:{name:"(anonymous_26)",decl:{start:{line:257,column:29},end:{line:257,column:30}},loc:{start:{line:257,column:50},end:{line:271,column:3}},line:257},27:{name:"(anonymous_27)",decl:{start:{line:272,column:19},end:{line:272,column:20}},loc:{start:{line:272,column:44},end:{line:395,column:3}},line:272},28:{name:"(anonymous_28)",decl:{start:{line:297,column:30},end:{line:297,column:31}},loc:{start:{line:297,column:48},end:{line:305,column:7}},line:297},29:{name:"(anonymous_29)",decl:{start:{line:307,column:56},end:{line:307,column:57}},loc:{start:{line:307,column:67},end:{line:358,column:5}},line:307},30:{name:"(anonymous_30)",decl:{start:{line:362,column:21},end:{line:362,column:22}},loc:{start:{line:362,column:32},end:{line:373,column:7}},line:362},31:{name:"(anonymous_31)",decl:{start:{line:391,column:7},end:{line:391,column:8}},loc:{start:{line:391,column:13},end:{line:394,column:5}},line:391},32:{name:"(anonymous_32)",decl:{start:{line:396,column:11},end:{line:396,column:12}},loc:{start:{line:396,column:17},end:{line:403,column:3}},line:396},33:{name:"(anonymous_33)",decl:{start:{line:404,column:11},end:{line:404,column:12}},loc:{start:{line:404,column:17},end:{line:411,column:3}},line:404},34:{name:"(anonymous_34)",decl:{start:{line:412,column:16},end:{line:412,column:17}},loc:{start:{line:412,column:26},end:{line:426,column:3}},line:412},35:{name:"(anonymous_35)",decl:{start:{line:427,column:19},end:{line:427,column:20}},loc:{start:{line:427,column:38},end:{line:433,column:3}},line:427},36:{name:"(anonymous_36)",decl:{start:{line:434,column:19},end:{line:434,column:20}},loc:{start:{line:434,column:30},end:{line:439,column:3}},line:434},37:{name:"(anonymous_37)",decl:{start:{line:440,column:16},end:{line:440,column:17}},loc:{start:{line:440,column:27},end:{line:447,column:3}},line:440},38:{name:"(anonymous_38)",decl:{start:{line:448,column:28},end:{line:448,column:29}},loc:{start:{line:448,column:39},end:{line:457,column:3}},line:448},39:{name:"(anonymous_39)",decl:{start:{line:458,column:20},end:{line:458,column:21}},loc:{start:{line:458,column:46},end:{line:465,column:3}},line:458},40:{name:"(anonymous_40)",decl:{start:{line:466,column:19},end:{line:466,column:20}},loc:{start:{line:466,column:37},end:{line:470,column:3}},line:466},41:{name:"(anonymous_41)",decl:{start:{line:471,column:16},end:{line:471,column:17}},loc:{start:{line:471,column:30},end:{line:475,column:3}},line:471},42:{name:"(anonymous_42)",decl:{start:{line:476,column:21},end:{line:476,column:22}},loc:{start:{line:476,column:35},end:{line:490,column:3}},line:476},43:{name:"(anonymous_43)",decl:{start:{line:491,column:14},end:{line:491,column:15}},loc:{start:{line:491,column:40},end:{line:495,column:3}},line:491},44:{name:"(anonymous_44)",decl:{start:{line:496,column:2},end:{line:496,column:3}},loc:{start:{line:496,column:17},end:{line:545,column:3}},line:496},45:{name:"(anonymous_45)",decl:{start:{line:510,column:32},end:{line:510,column:33}},loc:{start:{line:510,column:42},end:{line:523,column:9}},line:510},46:{name:"(anonymous_46)",decl:{start:{line:525,column:59},end:{line:525,column:60}},loc:{start:{line:525,column:69},end:{line:525,column:90}},line:525},47:{name:"(anonymous_47)",decl:{start:{line:525,column:98},end:{line:525,column:99}},loc:{start:{line:525,column:107},end:{line:527,column:11}},line:525},48:{name:"(anonymous_48)",decl:{start:{line:531,column:18},end:{line:531,column:19}},loc:{start:{line:531,column:32},end:{line:531,column:47}},line:531},49:{name:"(anonymous_49)",decl:{start:{line:531,column:54},end:{line:531,column:55}},loc:{start:{line:531,column:64},end:{line:531,column:85}},line:531},50:{name:"(anonymous_50)",decl:{start:{line:531,column:93},end:{line:531,column:94}},loc:{start:{line:531,column:102},end:{line:533,column:11}},line:531},51:{name:"(anonymous_51)",decl:{start:{line:546,column:2},end:{line:546,column:3}},loc:{start:{line:546,column:17},end:{line:549,column:3}},line:546},52:{name:"(anonymous_52)",decl:{start:{line:550,column:16},end:{line:550,column:17}},loc:{start:{line:550,column:29},end:{line:554,column:3}},line:550},53:{name:"(anonymous_53)",decl:{start:{line:555,column:2},end:{line:555,column:3}},loc:{start:{line:555,column:16},end:{line:603,column:3}},line:555},54:{name:"(anonymous_54)",decl:{start:{line:559,column:27},end:{line:559,column:28}},loc:{start:{line:559,column:42},end:{line:563,column:7}},line:559},55:{name:"(anonymous_55)",decl:{start:{line:564,column:20},end:{line:564,column:21}},loc:{start:{line:564,column:27},end:{line:567,column:7}},line:564},56:{name:"(anonymous_56)",decl:{start:{line:604,column:18},end:{line:604,column:19}},loc:{start:{line:604,column:24},end:{line:622,column:3}},line:604},57:{name:"(anonymous_57)",decl:{start:{line:610,column:50},end:{line:610,column:51}},loc:{start:{line:610,column:66},end:{line:610,column:91}},line:610},58:{name:"(anonymous_58)",decl:{start:{line:610,column:100},end:{line:610,column:101}},loc:{start:{line:610,column:109},end:{line:610,column:121}},line:610},59:{name:"(anonymous_59)",decl:{start:{line:623,column:27},end:{line:623,column:28}},loc:{start:{line:623,column:41},end:{line:668,column:3}},line:623},60:{name:"(anonymous_60)",decl:{start:{line:629,column:21},end:{line:629,column:22}},loc:{start:{line:629,column:36},end:{line:631,column:7}},line:629},61:{name:"(anonymous_61)",decl:{start:{line:669,column:18},end:{line:669,column:19}},loc:{start:{line:669,column:29},end:{line:674,column:3}},line:669},62:{name:"(anonymous_62)",decl:{start:{line:675,column:2},end:{line:675,column:3}},loc:{start:{line:675,column:29},end:{line:682,column:3}},line:675},63:{name:"(anonymous_63)",decl:{start:{line:683,column:2},end:{line:683,column:3}},loc:{start:{line:683,column:25},end:{line:685,column:3}},line:683},64:{name:"(anonymous_64)",decl:{start:{line:686,column:2},end:{line:686,column:3}},loc:{start:{line:686,column:30},end:{line:688,column:3}},line:686},65:{name:"(anonymous_65)",decl:{start:{line:689,column:28},end:{line:689,column:29}},loc:{start:{line:689,column:44},end:{line:696,column:3}},line:689},66:{name:"(anonymous_66)",decl:{start:{line:697,column:28},end:{line:697,column:29}},loc:{start:{line:697,column:44},end:{line:704,column:3}},line:697},67:{name:"(anonymous_67)",decl:{start:{line:705,column:2},end:{line:705,column:3}},loc:{start:{line:705,column:11},end:{line:840,column:3}},line:705}},branchMap:{0:{loc:{start:{line:42,column:2},end:{line:54,column:3}},type:"if",locations:[{start:{line:42,column:2},end:{line:54,column:3}},{start:{line:47,column:9},end:{line:54,column:3}}],line:42},1:{loc:{start:{line:42,column:6},end:{line:42,column:43}},type:"binary-expr",locations:[{start:{line:42,column:6},end:{line:42,column:24}},{start:{line:42,column:28},end:{line:42,column:43}}],line:42},2:{loc:{start:{line:44,column:4},end:{line:46,column:5}},type:"if",locations:[{start:{line:44,column:4},end:{line:46,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:44},3:{loc:{start:{line:47,column:9},end:{line:54,column:3}},type:"if",locations:[{start:{line:47,column:9},end:{line:54,column:3}},{start:{line:52,column:9},end:{line:54,column:3}}],line:47},4:{loc:{start:{line:49,column:4},end:{line:51,column:5}},type:"if",locations:[{start:{line:49,column:4},end:{line:51,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:49},5:{loc:{start:{line:78,column:4},end:{line:80,column:5}},type:"if",locations:[{start:{line:78,column:4},end:{line:80,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:78},6:{loc:{start:{line:78,column:8},end:{line:78,column:89}},type:"binary-expr",locations:[{start:{line:78,column:8},end:{line:78,column:20}},{start:{line:78,column:25},end:{line:78,column:54}},{start:{line:78,column:58},end:{line:78,column:88}}],line:78},7:{loc:{start:{line:121,column:12},end:{line:121,column:61}},type:"cond-expr",locations:[{start:{line:121,column:44},end:{line:121,column:53}},{start:{line:121,column:56},end:{line:121,column:61}}],line:121},8:{loc:{start:{line:139,column:6},end:{line:150,column:7}},type:"if",locations:[{start:{line:139,column:6},end:{line:150,column:7}},{start:{line:142,column:13},end:{line:150,column:7}}],line:139},9:{loc:{start:{line:142,column:13},end:{line:150,column:7}},type:"if",locations:[{start:{line:142,column:13},end:{line:150,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:142},10:{loc:{start:{line:142,column:17},end:{line:142,column:88}},type:"binary-expr",locations:[{start:{line:142,column:17},end:{line:142,column:44}},{start:{line:142,column:48},end:{line:142,column:88}}],line:142},11:{loc:{start:{line:146,column:8},end:{line:149,column:9}},type:"if",locations:[{start:{line:146,column:8},end:{line:149,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:146},12:{loc:{start:{line:153,column:4},end:{line:172,column:5}},type:"if",locations:[{start:{line:153,column:4},end:{line:172,column:5}},{start:{line:157,column:11},end:{line:172,column:5}}],line:153},13:{loc:{start:{line:153,column:8},end:{line:153,column:104}},type:"binary-expr",locations:[{start:{line:153,column:8},end:{line:153,column:16}},{start:{line:153,column:20},end:{line:153,column:104}}],line:153},14:{loc:{start:{line:158,column:6},end:{line:160,column:7}},type:"if",locations:[{start:{line:158,column:6},end:{line:160,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:158},15:{loc:{start:{line:162,column:8},end:{line:165,column:9}},type:"if",locations:[{start:{line:162,column:8},end:{line:165,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:162},16:{loc:{start:{line:167,column:8},end:{line:170,column:9}},type:"if",locations:[{start:{line:167,column:8},end:{line:170,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:167},17:{loc:{start:{line:173,column:4},end:{line:176,column:5}},type:"if",locations:[{start:{line:173,column:4},end:{line:176,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:173},18:{loc:{start:{line:217,column:4},end:{line:233,column:5}},type:"if",locations:[{start:{line:217,column:4},end:{line:233,column:5}},{start:{line:225,column:11},end:{line:233,column:5}}],line:217},19:{loc:{start:{line:218,column:6},end:{line:224,column:7}},type:"if",locations:[{start:{line:218,column:6},end:{line:224,column:7}},{start:{line:221,column:13},end:{line:224,column:7}}],line:218},20:{loc:{start:{line:218,column:10},end:{line:218,column:53}},type:"binary-expr",locations:[{start:{line:218,column:10},end:{line:218,column:19}},{start:{line:218,column:23},end:{line:218,column:33}},{start:{line:218,column:37},end:{line:218,column:53}}],line:218},21:{loc:{start:{line:221,column:13},end:{line:224,column:7}},type:"if",locations:[{start:{line:221,column:13},end:{line:224,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:221},22:{loc:{start:{line:221,column:17},end:{line:221,column:46}},type:"binary-expr",locations:[{start:{line:221,column:17},end:{line:221,column:26}},{start:{line:221,column:30},end:{line:221,column:46}}],line:221},23:{loc:{start:{line:226,column:6},end:{line:232,column:7}},type:"if",locations:[{start:{line:226,column:6},end:{line:232,column:7}},{start:{line:229,column:13},end:{line:232,column:7}}],line:226},24:{loc:{start:{line:226,column:10},end:{line:226,column:39}},type:"binary-expr",locations:[{start:{line:226,column:10},end:{line:226,column:19}},{start:{line:226,column:23},end:{line:226,column:39}}],line:226},25:{loc:{start:{line:229,column:13},end:{line:232,column:7}},type:"if",locations:[{start:{line:229,column:13},end:{line:232,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:229},26:{loc:{start:{line:229,column:17},end:{line:229,column:46}},type:"binary-expr",locations:[{start:{line:229,column:17},end:{line:229,column:26}},{start:{line:229,column:30},end:{line:229,column:46}}],line:229},27:{loc:{start:{line:245,column:21},end:{line:245,column:55}},type:"binary-expr",locations:[{start:{line:245,column:21},end:{line:245,column:49}},{start:{line:245,column:53},end:{line:245,column:55}}],line:245},28:{loc:{start:{line:246,column:24},end:{line:246,column:93}},type:"binary-expr",locations:[{start:{line:246,column:24},end:{line:246,column:70}},{start:{line:246,column:74},end:{line:246,column:93}}],line:246},29:{loc:{start:{line:247,column:21},end:{line:247,column:110}},type:"cond-expr",locations:[{start:{line:247,column:55},end:{line:247,column:96}},{start:{line:247,column:99},end:{line:247,column:110}}],line:247},30:{loc:{start:{line:258,column:4},end:{line:262,column:5}},type:"if",locations:[{start:{line:258,column:4},end:{line:262,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:258},31:{loc:{start:{line:258,column:8},end:{line:258,column:123}},type:"binary-expr",locations:[{start:{line:258,column:8},end:{line:258,column:40}},{start:{line:258,column:44},end:{line:258,column:123}}],line:258},32:{loc:{start:{line:272,column:30},end:{line:272,column:39}},type:"default-arg",locations:[{start:{line:272,column:37},end:{line:272,column:39}}],line:272},33:{loc:{start:{line:279,column:4},end:{line:281,column:5}},type:"if",locations:[{start:{line:279,column:4},end:{line:281,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:279},34:{loc:{start:{line:279,column:8},end:{line:279,column:62}},type:"binary-expr",locations:[{start:{line:279,column:8},end:{line:279,column:23}},{start:{line:279,column:27},end:{line:279,column:62}}],line:279},35:{loc:{start:{line:282,column:4},end:{line:284,column:5}},type:"if",locations:[{start:{line:282,column:4},end:{line:284,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:282},36:{loc:{start:{line:282,column:8},end:{line:282,column:62}},type:"binary-expr",locations:[{start:{line:282,column:8},end:{line:282,column:23}},{start:{line:282,column:27},end:{line:282,column:62}}],line:282},37:{loc:{start:{line:286,column:6},end:{line:288,column:7}},type:"if",locations:[{start:{line:286,column:6},end:{line:288,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:286},38:{loc:{start:{line:286,column:10},end:{line:286,column:69}},type:"binary-expr",locations:[{start:{line:286,column:10},end:{line:286,column:16}},{start:{line:286,column:20},end:{line:286,column:35}},{start:{line:286,column:39},end:{line:286,column:69}}],line:286},39:{loc:{start:{line:290,column:4},end:{line:292,column:5}},type:"if",locations:[{start:{line:290,column:4},end:{line:292,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:290},40:{loc:{start:{line:293,column:19},end:{line:293,column:51}},type:"binary-expr",locations:[{start:{line:293,column:19},end:{line:293,column:45}},{start:{line:293,column:49},end:{line:293,column:51}}],line:293},41:{loc:{start:{line:295,column:4},end:{line:306,column:5}},type:"if",locations:[{start:{line:295,column:4},end:{line:306,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:295},42:{loc:{start:{line:295,column:8},end:{line:295,column:35}},type:"binary-expr",locations:[{start:{line:295,column:8},end:{line:295,column:16}},{start:{line:295,column:20},end:{line:295,column:35}}],line:295},43:{loc:{start:{line:298,column:8},end:{line:303,column:9}},type:"if",locations:[{start:{line:298,column:8},end:{line:303,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:298},44:{loc:{start:{line:298,column:12},end:{line:298,column:56}},type:"binary-expr",locations:[{start:{line:298,column:12},end:{line:298,column:27}},{start:{line:298,column:31},end:{line:298,column:56}}],line:298},45:{loc:{start:{line:309,column:6},end:{line:322,column:7}},type:"if",locations:[{start:{line:309,column:6},end:{line:322,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:309},46:{loc:{start:{line:324,column:6},end:{line:337,column:7}},type:"if",locations:[{start:{line:324,column:6},end:{line:337,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:324},47:{loc:{start:{line:339,column:6},end:{line:357,column:7}},type:"if",locations:[{start:{line:339,column:6},end:{line:357,column:7}},{start:{line:353,column:13},end:{line:357,column:7}}],line:339},48:{loc:{start:{line:341,column:20},end:{line:341,column:78}},type:"cond-expr",locations:[{start:{line:341,column:40},end:{line:341,column:67}},{start:{line:341,column:70},end:{line:341,column:78}}],line:341},49:{loc:{start:{line:341,column:20},end:{line:341,column:37}},type:"binary-expr",locations:[{start:{line:341,column:20},end:{line:341,column:25}},{start:{line:341,column:29},end:{line:341,column:37}}],line:341},50:{loc:{start:{line:360,column:4},end:{line:374,column:5}},type:"if",locations:[{start:{line:360,column:4},end:{line:374,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:360},51:{loc:{start:{line:364,column:8},end:{line:372,column:9}},type:"if",locations:[{start:{line:364,column:8},end:{line:372,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:364},52:{loc:{start:{line:375,column:4},end:{line:377,column:5}},type:"if",locations:[{start:{line:375,column:4},end:{line:377,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:375},53:{loc:{start:{line:378,column:4},end:{line:380,column:5}},type:"if",locations:[{start:{line:378,column:4},end:{line:380,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:378},54:{loc:{start:{line:381,column:4},end:{line:383,column:5}},type:"if",locations:[{start:{line:381,column:4},end:{line:383,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:381},55:{loc:{start:{line:384,column:4},end:{line:386,column:5}},type:"if",locations:[{start:{line:384,column:4},end:{line:386,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:384},56:{loc:{start:{line:417,column:4},end:{line:417,column:38}},type:"if",locations:[{start:{line:417,column:4},end:{line:417,column:38}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:417},57:{loc:{start:{line:418,column:4},end:{line:422,column:5}},type:"if",locations:[{start:{line:418,column:4},end:{line:422,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:418},58:{loc:{start:{line:452,column:26},end:{line:452,column:70}},type:"cond-expr",locations:[{start:{line:452,column:46},end:{line:452,column:65}},{start:{line:452,column:68},end:{line:452,column:70}}],line:452},59:{loc:{start:{line:453,column:31},end:{line:453,column:87}},type:"cond-expr",locations:[{start:{line:453,column:69},end:{line:453,column:78}},{start:{line:453,column:81},end:{line:453,column:87}}],line:453},60:{loc:{start:{line:477,column:21},end:{line:477,column:44}},type:"binary-expr",locations:[{start:{line:477,column:21},end:{line:477,column:38}},{start:{line:477,column:42},end:{line:477,column:44}}],line:477},61:{loc:{start:{line:478,column:4},end:{line:489,column:5}},type:"if",locations:[{start:{line:478,column:4},end:{line:489,column:5}},{start:{line:487,column:11},end:{line:489,column:5}}],line:478},62:{loc:{start:{line:499,column:6},end:{line:537,column:7}},type:"if",locations:[{start:{line:499,column:6},end:{line:537,column:7}},{start:{line:535,column:13},end:{line:537,column:7}}],line:499},63:{loc:{start:{line:499,column:10},end:{line:499,column:149}},type:"binary-expr",locations:[{start:{line:499,column:10},end:{line:499,column:72}},{start:{line:499,column:76},end:{line:499,column:97}},{start:{line:499,column:101},end:{line:499,column:149}}],line:499},64:{loc:{start:{line:511,column:10},end:{line:513,column:11}},type:"if",locations:[{start:{line:511,column:10},end:{line:513,column:11}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:511},65:{loc:{start:{line:524,column:8},end:{line:534,column:9}},type:"if",locations:[{start:{line:524,column:8},end:{line:534,column:9}},{start:{line:528,column:15},end:{line:534,column:9}}],line:524},66:{loc:{start:{line:536,column:26},end:{line:536,column:85}},type:"binary-expr",locations:[{start:{line:536,column:26},end:{line:536,column:49}},{start:{line:536,column:53},end:{line:536,column:85}}],line:536},67:{loc:{start:{line:539,column:4},end:{line:544,column:5}},type:"if",locations:[{start:{line:539,column:4},end:{line:544,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:539},68:{loc:{start:{line:547,column:21},end:{line:547,column:55}},type:"binary-expr",locations:[{start:{line:547,column:21},end:{line:547,column:49}},{start:{line:547,column:53},end:{line:547,column:55}}],line:547},69:{loc:{start:{line:548,column:11},end:{line:548,column:52}},type:"binary-expr",locations:[{start:{line:548,column:11},end:{line:548,column:40}},{start:{line:548,column:44},end:{line:548,column:52}}],line:548},70:{loc:{start:{line:558,column:16},end:{line:558,column:41}},type:"binary-expr",locations:[{start:{line:558,column:16},end:{line:558,column:29}},{start:{line:558,column:33},end:{line:558,column:41}}],line:558},71:{loc:{start:{line:571,column:4},end:{line:593,column:5}},type:"if",locations:[{start:{line:571,column:4},end:{line:593,column:5}},{start:{line:581,column:11},end:{line:593,column:5}}],line:571},72:{loc:{start:{line:595,column:4},end:{line:597,column:5}},type:"if",locations:[{start:{line:595,column:4},end:{line:597,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:595},73:{loc:{start:{line:599,column:4},end:{line:601,column:5}},type:"if",locations:[{start:{line:599,column:4},end:{line:601,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:599},74:{loc:{start:{line:610,column:66},end:{line:610,column:91}},type:"cond-expr",locations:[{start:{line:610,column:81},end:{line:610,column:84}},{start:{line:610,column:87},end:{line:610,column:91}}],line:610},75:{loc:{start:{line:611,column:4},end:{line:615,column:5}},type:"if",locations:[{start:{line:611,column:4},end:{line:615,column:5}},{start:{line:613,column:11},end:{line:615,column:5}}],line:611},76:{loc:{start:{line:616,column:4},end:{line:620,column:5}},type:"if",locations:[{start:{line:616,column:4},end:{line:620,column:5}},{start:{line:618,column:11},end:{line:620,column:5}}],line:616},77:{loc:{start:{line:618,column:11},end:{line:620,column:5}},type:"if",locations:[{start:{line:618,column:11},end:{line:620,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:618},78:{loc:{start:{line:626,column:4},end:{line:638,column:5}},type:"if",locations:[{start:{line:626,column:4},end:{line:638,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:626},79:{loc:{start:{line:626,column:8},end:{line:626,column:39}},type:"binary-expr",locations:[{start:{line:626,column:8},end:{line:626,column:18}},{start:{line:626,column:22},end:{line:626,column:39}}],line:626},80:{loc:{start:{line:640,column:4},end:{line:642,column:5}},type:"if",locations:[{start:{line:640,column:4},end:{line:642,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:640},81:{loc:{start:{line:640,column:8},end:{line:640,column:27}},type:"binary-expr",locations:[{start:{line:640,column:8},end:{line:640,column:12}},{start:{line:640,column:16},end:{line:640,column:27}}],line:640},82:{loc:{start:{line:644,column:4},end:{line:667,column:5}},type:"if",locations:[{start:{line:644,column:4},end:{line:667,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:644},83:{loc:{start:{line:652,column:8},end:{line:657,column:9}},type:"if",locations:[{start:{line:652,column:8},end:{line:657,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:652},84:{loc:{start:{line:654,column:10},end:{line:656,column:11}},type:"if",locations:[{start:{line:654,column:10},end:{line:656,column:11}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:654},85:{loc:{start:{line:658,column:8},end:{line:663,column:9}},type:"if",locations:[{start:{line:658,column:8},end:{line:663,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:658},86:{loc:{start:{line:706,column:19},end:{line:706,column:51}},type:"binary-expr",locations:[{start:{line:706,column:19},end:{line:706,column:45}},{start:{line:706,column:49},end:{line:706,column:51}}],line:706},87:{loc:{start:{line:707,column:26},end:{line:707,column:92}},type:"cond-expr",locations:[{start:{line:707,column:46},end:{line:707,column:83}},{start:{line:707,column:86},end:{line:707,column:92}}],line:707},88:{loc:{start:{line:737,column:24},end:{line:756,column:14}},type:"cond-expr",locations:[{start:{line:737,column:56},end:{line:756,column:5}},{start:{line:756,column:8},end:{line:756,column:14}}],line:737},89:{loc:{start:{line:757,column:24},end:{line:767,column:14}},type:"cond-expr",locations:[{start:{line:757,column:97},end:{line:767,column:5}},{start:{line:767,column:8},end:{line:767,column:14}}],line:757}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0,87:0,88:0,89:0,90:0,91:0,92:0,93:0,94:0,95:0,96:0,97:0,98:0,99:0,100:0,101:0,102:0,103:0,104:0,105:0,106:0,107:0,108:0,109:0,110:0,111:0,112:0,113:0,114:0,115:0,116:0,117:0,118:0,119:0,120:0,121:0,122:0,123:0,124:0,125:0,126:0,127:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:0,136:0,137:0,138:0,139:0,140:0,141:0,142:0,143:0,144:0,145:0,146:0,147:0,148:0,149:0,150:0,151:0,152:0,153:0,154:0,155:0,156:0,157:0,158:0,159:0,160:0,161:0,162:0,163:0,164:0,165:0,166:0,167:0,168:0,169:0,170:0,171:0,172:0,173:0,174:0,175:0,176:0,177:0,178:0,179:0,180:0,181:0,182:0,183:0,184:0,185:0,186:0,187:0,188:0,189:0,190:0,191:0,192:0,193:0,194:0,195:0,196:0,197:0,198:0,199:0,200:0,201:0,202:0,203:0,204:0,205:0,206:0,207:0,208:0,209:0,210:0,211:0,212:0,213:0,214:0,215:0,216:0,217:0,218:0,219:0,220:0,221:0,222:0,223:0,224:0,225:0,226:0,227:0,228:0,229:0,230:0,231:0,232:0,233:0,234:0,235:0,236:0,237:0,238:0,239:0,240:0,241:0,242:0,243:0,244:0,245:0,246:0,247:0,248:0,249:0,250:0,251:0,252:0,253:0,254:0,255:0,256:0,257:0,258:0,259:0,260:0,261:0,262:0,263:0,264:0,265:0,266:0,267:0,268:0,269:0,270:0,271:0,272:0,273:0,274:0,275:0,276:0,277:0,278:0,279:0,280:0,281:0,282:0,283:0,284:0,285:0,286:0,287:0,288:0,289:0,290:0,291:0,292:0,293:0,294:0,295:0,296:0,297:0,298:0,299:0,300:0,301:0,302:0,303:0,304:0,305:0,306:0,307:0,308:0,309:0,310:0,311:0,312:0,313:0,314:0,315:0,316:0,317:0,318:0,319:0,320:0,321:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0],26:[0,0],27:[0,0],28:[0,0],29:[0,0],30:[0,0],31:[0,0],32:[0],33:[0,0],34:[0,0],35:[0,0],36:[0,0],37:[0,0],38:[0,0,0],39:[0,0],40:[0,0],41:[0,0],42:[0,0],43:[0,0],44:[0,0],45:[0,0],46:[0,0],47:[0,0],48:[0,0],49:[0,0],50:[0,0],51:[0,0],52:[0,0],53:[0,0],54:[0,0],55:[0,0],56:[0,0],57:[0,0],58:[0,0],59:[0,0],60:[0,0],61:[0,0],62:[0,0],63:[0,0,0],64:[0,0],65:[0,0],66:[0,0],67:[0,0],68:[0,0],69:[0,0],70:[0,0],71:[0,0],72:[0,0],73:[0,0],74:[0,0],75:[0,0],76:[0,0],77:[0,0],78:[0,0],79:[0,0],80:[0,0],81:[0,0],82:[0,0],83:[0,0],84:[0,0],85:[0,0],86:[0,0],87:[0,0],88:[0,0],89:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/App.tsx"],names:["shortcut","mapStyle"],mappings:"AA+uBmB,SAAA,KAkNA,YAlNA;AA9uBnB,OAAO,cAAc;AACrB,OAAO,WAAW;AAClB,OAAO,eAAe;AACtB,OAAO,WAAW;AAClB,OAAO,YAAY;AACnB,OAAO,SAAS;AAChB,SAAQ,aAAY;AACpB,SAAQ,wBAAuB;AAC/B,OAAO,UAAU;AACjB,SAAS,eAAe;AAExB,SAAQ,QAAQ,wBAAuB;AAEvC,OAAO,mBAAmB;AAC1B,OAAO,mBAAmB;AAC1B,OAAO,eAAe;AACtB,OAAO,iBAAiB;AACxB,OAAO,gBAA8B;AACrC,OAAO,eAAe;AACtB,OAAO,kBAAkB;AAEzB,OAAO,mBAAmB;AAC1B,OAAO,iBAAiB;AACxB,OAAO,kBAAkB;AACzB,OAAO,eAAe;AACtB,OAAO,oBAAoB;AAC3B,OAAO,gBAAgB;AAEvB,SAAQ,wBAAwB,8BAA6B;AAC7D,OAAO,WAAW;AAClB,SAAS,iBAAiB,cAAc,8BAA8B;AACtE,SAAS,cAAc,oBAAoB;AAC3C,SAAS,kBAAkB;AAC3B,SAAS,qBAAqB;AAC9B,SAAS,qBAAqB;AAC9B,OAAO,kBAAkB;AACzB,OAAO,YAAY;AACnB,OAAO,aAAa;AACpB,OAAO,WAAW;AAKlB,OAAO,SAAS,OAAO;AAEvB,SAAS,oBAAoB,KAAa,UAA8B;AAChE,QAAA,qBAAqB,IAAI,MAAM,oBAAoB;AACnD,QAAA,kBAAkB,IAAI,MAAM,iBAAiB;AAC7C,QAAA,uBAAuB,IAAI,MAAM,sBAAsB;AAC7D,MAAI,sBAAsB,iBAAiB;AACnC,UAAA,cAAc,MAAM,eAAe,gBAAgB,UAAU,EAAC,eAAe,KAAI,CAAC;AACxF,QAAI,aAAa;AACR,aAAA,IAAI,QAAQ,SAAS,WAAW;AAAA,IACzC;AAAA,EACF,WACS,sBAAsB;AACvB,UAAA,cAAc,MAAM,eAAe,iBAAiB,UAAU,EAAC,eAAe,KAAI,CAAC;AACzF,QAAI,aAAa;AACR,aAAA,IAAI,QAAQ,SAAS,WAAW;AAAA,IACzC;AAAA,EACF,OACK;AACI,WAAA;AAAA,EACT;AACF;AAEA,SAAS,eAAe,MAAW,WAAmB,WAAgB;AAC7D,SAAA;AAAA,IACL,GAAG;AAAA,IACH,OAAO;AAAA,MACL,GAAG,KAAK;AAAA,MACR,CAAC,SAAS,GAAG;AAAA,QACX,GAAG,KAAK,MAAM,SAAS;AAAA,QACvB,QAAQ;AAAA,MACV;AAAA,IACF;AAAA,EACF;AACF;AAyDA,qBAAqB,YAAY,MAAM,UAAyB;AAAA,EAC9D;AAAA,EACA;AAAA,EACA;AAAA,EAEA,YAAY,OAAY;AACtB,UAAM,KAAK;AACX,aAAS,IAAI;AAER,SAAA,gBAAgB,IAAI,cAAc;AACjC,UAAA,SAAS,IAAI,gBAAgB,OAAO,SAAS,OAAO,UAAU,CAAC,CAAC;AAClE,QAAA,OAAO,OAAO,IAAI,WAAW;AAC7B,QAAA,QAAQ,SAAS,OAAO,SAAS,SAAS,QAAQ,OAAO,SAAS,SAAS,QAAQ;AACrF,aAAO,OAAO,SAAS;AAAA,IACzB;AACK,SAAA,aAAa,IAAI,cAAc;AAAA,MAClC,oBAAoB,cAAY,KAAK,eAAe,UAAU,EAAC,MAAM,MAAK,CAAC;AAAA,MAC3E;AAAA,MACA,MAAM,OAAO,IAAI,WAAW;AAAA,IAC9B,CAAC;AAGD,UAAM,YAAY;AAAA,MAChB;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,WAAW;AAAA,QAC9B;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,MAAM;AAAA,QACzB;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,QAAQ;AAAA,QAC3B;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,SAAS;AAAA,QAC5B;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,UAAU;AAAA,QAC7B;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACR,eAAA;AAAA,YACH,KAAK,MAAM,aAAa,QAAQ,YAAY;AAAA,UAC9C;AAAA,QACF;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACZ,mBAAS,cAAc,oBAAoB,EAAwB,MAAM;AAAA,QAC5E;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,OAAO;AAAA,QAC1B;AAAA,MACF;AAAA,IACF;AAEA,aAAS,KAAK,iBAAiB,SAAS,CAAC,MAAM;AAC1C,UAAA,EAAE,QAAQ,UAAU;AACpB,UAAE,OAAuB,KAAK;AAC/B,iBAAS,KAAK,MAAM;AAAA,MACtB,WACQ,KAAK,MAAM,OAAO,aAAa,SAAS,kBAAkB,SAAS,MAAM;AAC/E,cAAM,WAAW,UAAU,KAAK,CAACA,cAAa;AACpCA,iBAAAA,UAAS,QAAQ,EAAE;AAAA,QAC7B,CAAC;AAED,YAAG,UAAU;AACN,eAAA,SAAS,aAAa,KAAK;AAChC,mBAAS,QAAQ;AAAA,QACnB;AAAA,MACF;AAAA,IACF,CAAC;AAED,UAAM,WAAW,gBAAgB;AACjC,QAAG,YAAY,OAAO,QAAQ,0BAA0B,WAAW,+BAA+B,GAAG;AAC9F,WAAA,aAAa,IAAI,WAAW;AACjC,mBAAa,UAAU,CAAA,aAAY,KAAK,eAAe,QAAQ,CAAC;AACzC,6BAAA;AAAA,IACzB,OAAO;AACL,UAAG,UAAU;AACY,+BAAA;AAAA,MACzB;AACK,WAAA,WAAW,KAAK,CAAO,QAAA;AAC1B,YAAG,KAAK;AACN,kBAAQ,IAAI,kDAAkD;AACzD,eAAA,aAAa,IAAI,WAAW;AAAA,QACnC;AACK,aAAA,WAAW,YAAY,CAAA,aAAY,KAAK,eAAe,UAAU,EAAC,aAAa,KAAI,CAAC,CAAC;AAEvF,YAAA,MAAM,QAAQ,GAAG;AAClB,gBAAM,IAAI,YAAY,cAAc,KAAK,UAAU;AACnD,gBAAM,IAAI,YAAY,iBAAiB,KAAK,aAAa;AAAA,QAC3D;AAAA,MACF,CAAC;AAAA,IACH;AAEG,QAAA,MAAM,QAAQ,GAAG;AAClB,YAAM,IAAI,YAAY,iBAAiB,KAAK,aAAa;AACzD,YAAM,IAAI,YAAY,cAAc,KAAK,UAAU;AAAA,IACrD;AAEA,SAAK,QAAQ;AAAA,MACX,QAAQ,CAAC;AAAA,MACT,OAAO,CAAC;AAAA,MACR,UAAU,MAAM;AAAA,MAChB,oBAAoB;AAAA,MACpB,SAAS,CAAC;AAAA,MACV,cAAc,CAAC;AAAA,MACf,UAAU;AAAA,MACV,MAAM;AAAA,MACN,SAAS;AAAA,QACP,MAAM;AAAA,QACN,QAAQ;AAAA,UACN,KAAK;AAAA,UACL,KAAK;AAAA,QACP;AAAA,MACF;AAAA,MACA,QAAQ;AAAA,QACN,UAAU;AAAA,QACV,SAAS;AAAA,QACT,MAAM;AAAA,QACN,WAAW;AAAA,QACX,QAAQ;AAAA;AAAA,QAER,OAAO;AAAA,MACT;AAAA,MACA,wBAAwB;AAAA,QACtB,oBAAoB;AAAA,QACpB,oBAAoB;AAAA,QACpB,uBAAuB;AAAA,MACzB;AAAA,MACA,wBAAwB;AAAA,QACtB,cAAc;AAAA,MAChB;AAAA,MACA,YAAY;AAAA,IACd;AAEK,SAAA,eAAe,IAAI,aAAa;AAAA,MACnC,sBAAsB,CAAK,MAAA,KAAK,SAAS,EAAE,cAAc,EAAE,CAAC;AAAA,IAC9D,CAAC;AAAA,EACH;AAAA,EAEA,iBAAiB,CAAC,MAAqB;AACrC,QAAG,UAAU,SAAS,YAAY,EAAE,QAAQ,KAAK,KAAK,GAAG;AACvD,UAAG,EAAE,WAAW,EAAE,YAAY,EAAE,YAAY,IAAI;AAC9C,UAAE,eAAe;AACjB,aAAK,OAAO;AAAA,MACd,WACQ,EAAE,WAAW,EAAE,YAAY,IAAI;AACrC,UAAE,eAAe;AACjB,aAAK,OAAO;AAAA,MACd;AAAA,IACF,OACK;AACH,UAAG,EAAE,WAAW,EAAE,YAAY,IAAI;AAChC,UAAE,eAAe;AACjB,aAAK,OAAO;AAAA,MACd,WACQ,EAAE,WAAW,EAAE,YAAY,IAAI;AACrC,UAAE,eAAe;AACjB,aAAK,OAAO;AAAA,MACd;AAAA,IACF;AAAA,EACF;AAAA,EAEA,oBAAoB;AACX,WAAA,iBAAiB,WAAW,KAAK,cAAc;AAAA,EACxD;AAAA,EAEA,uBAAuB;AACd,WAAA,oBAAoB,WAAW,KAAK,cAAc;AAAA,EAC3D;AAAA,EAEA,UAAU,eAAkD;AACrD,SAAA,WAAW,KAAK,aAAa;AAAA,EACpC;AAAA,EAEA,YAAY,aAAqB;AAC/B,UAAM,WAAoC,KAAK,MAAM,SAAS,YAAY,CAAC;AAC3E,UAAM,cAAc,SAAS,oCAAoC,KAAK,OAAO;AAEvE,UAAA,WAAY,OAAO,gBAAgB,WAAW,YAAY,QAAQ,SAAS,WAAW,IAAG;AAC/F,2BAAuB,UAAU,CAAS,UAAA;AACnC,WAAA,SAAS,EAAE,MAAM,eAAe,KAAK,MAAM,MAAM,UAAU,KAAK,EAAC,CAAC;AAAA,IACzE,CAAC;AAAA,EACH;AAAA,EAEA,YAAY,SAAiB;AAC3B,2BAAuB,SAAS,CAAS,UAAA;AAClC,WAAA,SAAS,EAAE,MAAM,eAAe,KAAK,MAAM,MAAM,UAAU,KAAK,EAAC,CAAC;AAAA,IACzE,CAAC;AAAA,EACH;AAAA,EAEA,2BAA2B,CAAC,UAAkB,UAAe;AAE3D,QACE,aAAa,uBACb,UAAU,IAAI,KAAK,MAAM,UAAU,CAAC,YAAY,mBAAmB,GAAG,QAAQ,GAC9E;AACA,WAAK,SAAS;AAAA,QACZ,UAAU;AAAA,MACZ,CAAC;AAAA,IACH;AAEA,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,UAAU;AAAA,QACR,GAAI,KAAK,MAAM,SAAiB;AAAA,QAChC,CAAC,QAAQ,GAAG;AAAA,MACd;AAAA,IACF;AAEA,SAAK,eAAe,YAAY;AAAA,EAClC;AAAA,EAEA,iBAAiB,CAAC,UAA6C,OAAyB,CAAC,MAAM;AACtF,WAAA;AAAA,MACL,MAAM;AAAA,MACN,aAAa;AAAA,MACb,aAAa;AAAA,MACb,GAAG;AAAA,IACL;AAKA,QAAI,SAAS,UAAU,OAAO,SAAS,WAAW,UAAU;AAC1D,eAAS,SAAS,oBAAoB,SAAS,QAAQ,QAAQ;AAAA,IACjE;AAEA,QAAI,SAAS,UAAU,OAAO,SAAS,WAAW,UAAU;AAC1D,eAAS,SAAS,oBAAoB,SAAS,QAAQ,QAAQ;AAAA,IACjE;AAEW,eAAA,CAAC,WAAW,MAAM,KAAK,OAAO,QAAQ,SAAS,OAAO,GAAG;AAClE,UAAI,UAAU,SAAS,UAAU,OAAO,OAAO,QAAQ,UAAU;AAC/D,eAAO,MAAM,oBAAoB,OAAO,KAAK,QAAQ;AAAA,MACvD;AAAA,IACF;AAGA,QAAI,KAAK,aAAa;AACpB,WAAK,uBAAuB,QAAQ;AAAA,IACtC;AAEA,UAAM,SAA4B,iBAAiB,QAAQ,KAAK,CAAC;AAIjE,UAAM,cAA2C,CAAC;AAC9C,QAAA,YAAY,SAAS,QAAQ;AACzB,YAAA,cAAc,IAAI,OAAO,IAAI;AACnC,eAAS,OAAO,QAAQ,CAAC,OAAO,UAAU;AACxC,YAAI,MAAM,OAAO,MAAM,YAAY,IAAI,MAAM,EAAE,GAAG;AAChD,gBAAM,QAAQ,IAAI;AAAA,YAChB,UAAU,KAAK;AAAA,UACjB;AACA,sBAAY,KAAK,KAAK;AAAA,QACxB;AACY,oBAAA,IAAI,MAAM,IAAI,IAAI;AAAA,MAChC,CAAC;AAAA,IACH;AAEA,UAAM,eAAe,YAAY,OAAO,MAAM,EAAE,IAAI,CAAS,UAAA;AAE3D,YAAM,WAAW,MAAM,QAAQ,MAAM,iEAAiE;AACtG,UAAI,UAAU;AACZ,cAAM,CAAC,EAAE,OAAO,OAAO,IAAI;AACpB,eAAA;AAAA,UACL,SAAS,MAAM;AAAA,UACf,QAAQ;AAAA,YACN,MAAM;AAAA,YACN,MAAM;AAAA,cACJ,OAAO,SAAS,OAAO,EAAE;AAAA,cACzB,KAAK;AAAA,cACL;AAAA,YACF;AAAA,UACF;AAAA,QACF;AAAA,MACF;AAGA,YAAM,qBAAqB,MAAM,QAAQ,MAAM,8CAA8C;AAC7F,UAAI,oBAAoB;AACtB,cAAM,CAAC,EAAE,OAAO,OAAO,IAAI;AACpB,eAAA;AAAA,UACL,SAAS,MAAM;AAAA,UACf,QAAQ;AAAA,YACN,MAAM;AAAA,YACN,MAAM;AAAA,cACJ,OAAO,SAAS,OAAO,EAAE;AAAA,cACzB,KAAK;AAAA,cACL;AAAA,YACF;AAAA,UACF;AAAA,QACF;AAAA,MACF;AAEA,YAAM,aAAa,MAAM,QAAQ,MAAM,0CAA0C;AACjF,UAAI,YAAY;AACd,cAAM,CAAC,EAAE,OAAO,OAAO,UAAU,OAAO,IAAI;AACtC,cAAA,MAAO,SAAS,WAAY,CAAC,OAAO,QAAQ,EAAE,KAAK,GAAG,IAAI;AACzD,eAAA;AAAA,UACL,SAAS,MAAM;AAAA,UACf,QAAQ;AAAA,YACN,MAAM;AAAA,YACN,MAAM;AAAA,cACJ,OAAO,SAAS,OAAO,EAAE;AAAA,cACzB;AAAA,cACA;AAAA,YACF;AAAA,UACF;AAAA,QACF;AAAA,MACF,OACK;AACI,eAAA;AAAA,UACL,SAAS,MAAM;AAAA,QACjB;AAAA,MACF;AAAA,IACF,CAAC;AAED,QAAI,gBAAgD;AAChD,QAAA,OAAO,SAAS,GAAG;AACrB,sBAAgB,UAAU,QAAQ;AAElC,aAAO,QAAQ,CAAS,UAAA;AAChB,cAAA,EAAC,QAAO,IAAI;AAClB,YAAI,SAAS;AACP,cAAA;AACF,kBAAM,UAAU,QAAQ,MAAM,GAAG,EAAE,CAAC;AAEpC,kBAAM,YAAY,QAAQ,MAAM,qBAAqB,EAAG,CAAC;AACzD,kBAAM,eAAe,SAAS;AAAA,UAChC,SACO,KAAK;AACV,oBAAQ,KAAK,GAAG;AAAA,UAClB;AAAA,QACF;AAAA,MACF,CAAC;AAAA,IACH;AAEA,QAAG,SAAS,WAAW,KAAK,MAAM,SAAS,QAAQ;AAC5C,WAAA,YAAY,SAAS,MAAgB;AAAA,IAC5C;AACA,QAAG,SAAS,WAAW,KAAK,MAAM,SAAS,QAAQ;AAC5C,WAAA,YAAY,SAAS,MAAgB;AAAA,IAC5C;AAEA,QAAI,KAAK,aAAa;AACf,WAAA,cAAc,YAAY,QAAQ;AAAA,IACzC;AACA,QAAI,KAAK,MAAM;AACb,WAAK,UAAU,QAA6C;AAAA,IAC9D;AAEA,SAAK,SAAS;AAAA,MACZ,UAAU;AAAA,MACV;AAAA,MACA,QAAQ;AAAA,IACV,GAAG,MAAM;AACP,WAAK,aAAa;AAClB,WAAK,cAAc;AAAA,IACrB,CAAC;AAAA,EAEH;AAAA,EAEA,SAAS,MAAM;AACP,UAAA,cAAc,KAAK,cAAc,KAAK;AAE5C,UAAM,WAAW,aAAa,KAAK,MAAM,UAAU,WAAW;AAC9D,SAAK,eAAe,aAAa,EAAC,aAAa,MAAK,CAAC;AACrD,SAAK,SAAS;AAAA,MACZ,OAAO;AAAA,IACT,CAAC;AAAA,EACH;AAAA,EAEA,SAAS,MAAM;AACP,UAAA,cAAc,KAAK,cAAc,KAAK;AAC5C,UAAM,WAAW,aAAa,KAAK,MAAM,UAAU,WAAW;AAC9D,SAAK,eAAe,aAAa,EAAC,aAAa,MAAK,CAAC;AACrD,SAAK,SAAS;AAAA,MACZ,OAAO;AAAA,IACT,CAAC;AAAA,EACH;AAAA,EAEA,cAAc,CAAC,SAAkB;AAC3B,QAAA,EAAE,UAAU,SAAS,IAAI;AACzB,QAAA,SAAS,KAAK,MAAM,SAAS;AACjC,eAAW,MAAM,UAAU,GAAG,OAAO,SAAO,CAAC;AAC7C,eAAW,MAAM,UAAU,GAAG,OAAO,SAAO,CAAC;AAC7C,QAAG,aAAa,SAAU;AAEtB,QAAA,aAAa,KAAK,MAAM,oBAAoB;AAC9C,WAAK,SAAS;AAAA,QACZ,oBAAoB;AAAA,MACtB,CAAC;AAAA,IACH;AAES,aAAA,OAAO,MAAM,CAAC;AACN,qBAAA,QAAQ,UAAU,QAAQ;AAC3C,SAAK,eAAe,MAAM;AAAA,EAC5B;AAAA,EAEA,iBAAiB,CAAC,kBAAwC;AACxD,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,QAAQ;AAAA,IACV;AACA,SAAK,eAAe,YAAY;AAAA,EAClC;AAAA,EAEA,iBAAiB,CAAC,UAAkB;AAC5B,UAAA,SAAS,KAAK,MAAM,SAAS;AAC7B,UAAA,kBAAkB,OAAO,MAAM,CAAC;AACtB,oBAAA,OAAO,OAAO,CAAC;AAC/B,SAAK,eAAe,eAAe;AAAA,EACrC;AAAA,EAEA,cAAc,CAAC,UAAkB;AACzB,UAAA,SAAS,KAAK,MAAM,SAAS;AAC7B,UAAA,gBAAgB,OAAO,MAAM,CAAC;AAEpC,UAAM,cAAc,UAAU,cAAc,KAAK,CAAC;AACtC,gBAAA,KAAK,YAAY,KAAK;AACpB,kBAAA,OAAO,OAAO,GAAG,WAAW;AAC1C,SAAK,eAAe,aAAa;AAAA,EACnC;AAAA,EAEA,0BAA0B,CAAC,UAAkB;AACrC,UAAA,SAAS,KAAK,MAAM,SAAS;AAC7B,UAAA,gBAAgB,OAAO,MAAM,CAAC;AAEpC,UAAM,QAAQ,EAAE,GAAG,cAAc,KAAK,EAAE;AAClC,UAAA,gBAAgB,YAAY,QAAQ,EAAC,GAAG,MAAM,OAAM,IAAI,CAAC;AAC/D,kBAAc,aAAa,cAAc,eAAe,SAAS,YAAY;AAE7E,UAAM,SAAS;AACf,kBAAc,KAAK,IAAI;AACvB,SAAK,eAAe,aAAa;AAAA,EACnC;AAAA,EAGA,kBAAkB,CAAC,OAAe,QAAgB,UAAkB;AAClE,UAAM,gBAAgB,KAAK,MAAM,SAAS,OAAO,MAAM,CAAC;AACxD,kBAAc,KAAK,IAAI;AAAA,MACrB,GAAG,cAAc,KAAK;AAAA,MACtB,IAAI;AAAA,IACN;AAEA,SAAK,eAAe,aAAa;AAAA,EACnC;AAAA,EAEA,iBAAiB,CAAC,OAAe,UAA8B;AAC7D,UAAM,gBAAgB,KAAK,MAAM,SAAS,OAAO,MAAM,CAAC;AACxD,kBAAc,KAAK,IAAI;AAEvB,SAAK,eAAe,aAAa;AAAA,EACnC;AAAA,EAEA,cAAc,CAAC,aAAuB;AACpC,SAAK,SAAS;AAAA,MACZ,UAAU;AAAA,IACZ,GAAG,KAAK,aAAa;AAAA,EACvB;AAAA,EAEA,mBAAmB,CAAC,aAAgD;AAC5D,UAAA,WAAoC,SAAS,YAAY,CAAC;AAC7D,QAAA,SAAS,mBAAmB,MAAM,QAAW;AAC9C,YAAM,eAAe;AAAA,QACnB,GAAG;AAAA,QACH,UAAU;AAAA,UACR,GAAG,SAAS;AAAA,UACZ,qBAAqB;AAAA,QACvB;AAAA,MACF;AACO,aAAA;AAAA,IACT,OAAO;AACE,aAAA;AAAA,IACT;AAAA,EACF;AAAA,EAEA,YAAY,CAAC,UAA6C,eAA4C;AAC/F,SAAA,SAAS,EAAC,WAAsB,CAAC;AAC3B,eAAA,KAAK,iBAAiB,QAAQ;AACzC,SAAK,eAAe,QAAQ;AAAA,EAC9B;AAAA,EAEA,eAAe;AACb,UAAM,aAAmC,CAAC;AAEhC,eAAA,CAAC,KAAK,GAAG,KAAK,OAAO,QAAQ,KAAK,MAAM,SAAS,OAAO,GAAG;AACnE,UACE,CAAC,OAAO,UAAU,eAAe,KAAK,KAAK,MAAM,SAAS,GAAG,KAC7D,IAAI,SAAS,YACb,OAAO,UAAU,eAAe,KAAK,KAAK,KAAK,GAC/C;AACA,mBAAW,GAAG,IAAI;AAAA,UAChB,MAAM,IAAI;AAAA,UACV,QAAQ,CAAC;AAAA,QACX;AAEA,YAAI,MAAM,IAAI;AAEV,YAAA;AACF,gBAAM,oBAAoB,KAAM,KAAK,MAAM,QAAQ;AAAA,QACrD,SAAQ,KAAK;AACH,kBAAA,KAAK,mCAAmC,GAAG;AAAA,QACrD;AAEM,cAAA,kBAAkB,CAAC,SAAa;AACpC,cAAG,CAAC,OAAO,UAAU,eAAe,KAAK,MAAM,eAAe,GAAG;AAC/D;AAAA,UACF;AAGA,gBAAM,UAAU,OAAO,OAAO,CAAC,GAAG;AAAA,YAChC,CAAC,GAAG,GAAG,KAAK,MAAM,QAAQ,GAAG;AAAA,UAC/B,CAAC;AAES,qBAAA,SAAS,KAAK,eAAe;AACpC,oBAAQ,GAAG,EAAU,OAAO,KAAK,MAAM,EAAE;AAAA,UAC5C;AAEA,eAAK,SAAS;AAAA,YACZ;AAAA,UACF,CAAC;AAAA,QACH;AAEI,YAAA,IAAK,WAAW,YAAY,GAAG;AAChC,cAAI,QAAQ,IAAK,OAAO,EAAE,CAAC,EAAG,YAAY,EAAE,EAC1C,KAAK,CAAQ,SAAA,gBAAgB,IAAI,CAAC,EAClC,MAAM,CAAO,QAAA;AACJ,oBAAA,MAAM,sCAAsC,KAAK,GAAG;AAAA,UAC9D,CAAC;AAAA,QACL,OAAO;AACL,gBAAM,KAAM;AAAA,YACV,MAAM;AAAA,UACR,CAAC,EACE,KAAK,CAAA,aAAY,SAAS,KAAK,CAAC,EAChC,KAAK,UAAQ,gBAAgB,IAAI,CAAC,EAClC,MAAM,CAAO,QAAA;AACJ,oBAAA,MAAM,sCAAsC,KAAK,GAAG;AAAA,UAC9D,CAAC;AAAA,QACL;AAAA,MACF,OACK;AACQ,mBAAA,GAAG,IAAI,KAAK,MAAM,QAAQ,GAAG,KAAK,KAAK,MAAM,SAAS,QAAQ,GAAG;AAAA,MAC9E;AAAA,IACF;AAEA,QAAG,CAAC,QAAQ,KAAK,MAAM,SAAS,UAAU,GAAG;AAC3C,cAAQ,MAAM,iBAAiB;AAC/B,WAAK,SAAS;AAAA,QACZ,SAAS;AAAA,MACX,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,eAAgB;AACd,UAAM,WAAmC,KAAK,MAAM,SAAS,YAAY,CAAC;AACnE,WAAA,SAAS,mBAAmB,KAAK;AAAA,EAC1C;AAAA,EAEA,cAAc,CAAC,YAMT;AACJ,SAAK,SAAS;AAAA,MACZ;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,cAAc;AACZ,UAAM,EAAC,UAAU,cAAa,IAAI,KAAK;AAEvC,UAAM,WAAW;AAAA,MACf,UAAW,iBAAiB;AAAA,MAC5B,qBAAqB,CAACC,cAAiC;AAC9C,eAAA,MAAM,oBAAoBA,WAAU;AAAA,UACzC,eAAe;AAAA,QACjB,CAAC;AAAA,MACH;AAAA,MACA,cAAc,CAAC,MAAkB;AAC1B,aAAA,aAAa,WAAW,EAAE,GAAG;AAClC,aAAK,aAAa;AAAA,MACpB;AAAA,IACF;AAEM,UAAA,WAAW,KAAK,aAAa;AAE/B,QAAA;AAGJ,QAAG,aAAa,MAAM;AACP,mBAAA;AAAA,QAAC;AAAA,QAAA;AAAA,UACX,GAAG;AAAA,UACJ,UAAU,KAAK;AAAA,UACf,cAAc,KAAK,MAAM,uBAAuB;AAAA,UAChD,eAAe,KAAK;AAAA,QAAA;AAAA,MACtB;AAAA,IACF,OAAO;AAEQ,mBAAA;AAAA,QAAC;AAAA,QAAA;AAAA,UAAe,GAAG;AAAA,UAC9B,UAAU,KAAK;AAAA,UACf,SAAS,KAAK,MAAM;AAAA,UACpB,oBAAoB,KAAK,MAAM,aAAa;AAAA,UAC5C,kBAAkB,KAAK,MAAM,SAAS,OAAO,KAAK,MAAM,kBAAkB;AAAA,UAC1E,eAAe,KAAK;AAAA,QAAA;AAAA,MAAe;AAAA,IACvC;AAEI,QAAA;AACJ,QAAG,KAAK,MAAM,SAAS,MAAM,UAAU,GAAG;AACxC,mBAAa,KAAK,MAAM,SAAS,QAAQ,YAAY,EAAE;AAAA,IACzD;AACA,UAAM,eAAkC,CAAC;AACzC,QAAI,YAAY;AACD,mBAAA,SAAS,SAAS,UAAU;AAAA,IAC3C;AAEO,WAAA,oBAAC,SAAI,OAAO,cAAc,WAAU,2BAA0B,eAAY,sBAC9E,UACH,WAAA,CAAA;AAAA,EACF;AAAA,EAEA,gBAAgB,MAAM;AACpB,UAAM,EAAC,UAAU,UAAU,OAAM,IAAI,KAAK;AACpC,UAAA,EAAC,mBAAkB,IAAI,KAAK;AAClC,UAAM,MAAM,IAAI,IAAI,SAAS,IAAI;AACjC,UAAM,UAAU,KAAK,KAAK,UAAU,QAAQ,CAAC;AAC7C,QAAI,aAAa,IAAI,SAAS,GAAG,OAAO,IAAI,kBAAkB,EAAE;AAEhE,UAAM,aAAa,OAAO,QAAQ,MAAM,EACrC,IAAI,CAAC,CAAC,KAAK,GAAG,MAAO,QAAQ,OAAO,MAAM,IAAK,EAC/C,OAAO,CAAA,QAAO,QAAQ,IAAI;AAEzB,QAAA,WAAW,SAAS,GAAG;AACzB,UAAI,aAAa,IAAI,SAAS,WAAW,KAAK,GAAG,CAAC;AAAA,IACpD,OACK;AACC,UAAA,aAAa,OAAO,OAAO;AAAA,IACjC;AAEA,QAAI,aAAa,OAAO;AAClB,UAAA,aAAa,OAAO,MAAM;AAAA,IAChC,WACS,aAAa,WAAW;AAC3B,UAAA,aAAa,IAAI,QAAQ,SAAS;AAAA,IACxC;AAEA,YAAQ,aAAa,EAAC,mBAAkB,GAAG,YAAY,IAAI,IAAI;AAAA,EACjE;AAAA,EAEA,yBAAyB,CAAC,aAAiC;AACzD,UAAM,MAAM,IAAI,IAAI,SAAS,IAAI;AACjC,UAAM,aAAa,IAAI,aAAa,IAAI,OAAO;AAE3C,QAAA,cAAc,eAAe,IAAI;AAC7B,YAAA,SAAS,WAAW,MAAM,GAAG;AACnC,YAAM,WAAqC,CAAC;AAC5C,aAAO,QAAQ,CAAa,cAAA;AAC1B,iBAAS,SAAS,IAAI;AAAA,MACxB,CAAC;AAED,WAAK,SAAS;AAAA,QACZ,QAAQ;AAAA,UACN,GAAG,KAAK,MAAM;AAAA,UACd,GAAG;AAAA,QACL;AAAA,MACF,CAAC;AAAA,IACH;AAEA,UAAM,OAAO,IAAI,aAAa,IAAI,MAAM;AACpC,QAAA,QAAQ,SAAS,IAAI;AACvB,WAAK,YAAY,IAAgB;AAAA,IACnC;AAEA,UAAM,OAAO,IAAI,aAAa,IAAI,OAAO;AACzC,QAAI,MAAM;AACJ,UAAA;AACI,cAAA,QAAQ,KAAK,MAAM,GAAG;AACtB,cAAA,CAAC,SAAS,kBAAkB,IAAI;AAAA,UACpC,MAAM,CAAC;AAAA,UACP,SAAS,MAAM,CAAC,GAAG,EAAE;AAAA,QACvB;AAEA,YAAI,QAAQ;AACZ,YAAI,YAAY,KAAK;AACnB,gBAAM,iBAAiB,KAAK,KAAK,UAAU,QAAQ,CAAC;AACpD,cAAI,mBAAmB,SAAS,SAAS,EAAE,GAAG;AACpC,oBAAA;AAAA,UACV;AAAA,QACF;AACA,YAAI,OAAO;AACT,eAAK,SAAS;AAAA,YACZ;AAAA,YACA,yBAAyB,SAAS,OAAO,kBAAkB,EAAE;AAAA,UAC/D,CAAC;AAAA,QACH;AAAA,MACF,SACO,KAAK;AACV,gBAAQ,KAAK,GAAG;AAAA,MAClB;AAAA,IACF;AAAA,EACF;AAAA,EAEA,gBAAgB,CAAC,UAAkB;AACjC,SAAK,SAAS;AAAA,MACZ,oBAAoB;AAAA,MACpB,yBAAyB,KAAK,MAAM,SAAS,OAAO,KAAK,EAAE;AAAA,IAC7D,GAAG,KAAK,aAAa;AAAA,EACvB;AAAA,EAEA,SAAS,WAAqC,OAAgB;AAC5D,SAAK,SAAS;AAAA,MACZ,QAAQ;AAAA,QACN,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,SAAS,GAAG;AAAA,MACf;AAAA,IACF,GAAG,KAAK,aAAa;AAAA,EACvB;AAAA,EAEA,YAAY,WAAqC;AAC/C,SAAK,SAAS,WAAW,CAAC,KAAK,MAAM,OAAO,SAAS,CAAC;AAAA,EACxD;AAAA,EAEA,gBAAgB,YAAyC;AAClD,SAAA,SAAS,EAAC,WAAsB,CAAC;AAAA,EACxC;AAAA,EAEA,0BAA0B,CAAC,KAA+C,UAAmB;AAC3F,SAAK,SAAS;AAAA,MACZ,wBAAwB;AAAA,QACtB,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,GAAG,GAAG;AAAA,MACT;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,0BAA0B,CAAC,KAA+C,UAAe;AACvF,SAAK,SAAS;AAAA,MACZ,wBAAwB;AAAA,QACtB,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,GAAG,GAAG;AAAA,MACT;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,SAAS,KAAK,MAAM,SAAS,UAAU,CAAC;AACxC,UAAA,gBAAgB,OAAO,SAAS,IAAI,OAAO,KAAK,MAAM,kBAAkB,IAAI;AAElF,UAAM,UAAU;AAAA,MAAC;AAAA,MAAA;AAAA,QACf,UAAU,KAAK,aAAa;AAAA,QAC5B,UAAU,KAAK,MAAM;AAAA,QACrB,UAAU,KAAK,MAAM;AAAA,QACrB,oBAAoB,KAAK,MAAM,aAAa;AAAA,QAC5C,SAAS,KAAK,MAAM;AAAA,QACpB,gBAAgB,KAAK;AAAA,QACrB,aAAa,KAAK;AAAA,QAClB,eAAe,KAAK;AAAA,QACpB,eAAe,KAAK,YAAY,KAAK,IAAI;AAAA,MAAA;AAAA,IAC3C;AAEA,UAAM,YAAY;AAAA,MAAC;AAAA,MAAA;AAAA,QACjB,aAAa,KAAK;AAAA,QAClB,gBAAgB,KAAK;AAAA,QACrB,aAAa,KAAK;AAAA,QAClB,yBAAyB,KAAK;AAAA,QAC9B,gBAAgB,KAAK;AAAA,QACrB,eAAe,KAAK;AAAA,QACpB,oBAAoB,KAAK,MAAM;AAAA,QAC/B;AAAA,QACA,SAAS,KAAK,MAAM;AAAA,QACpB,QAAQ,KAAK,MAAM;AAAA,MAAA;AAAA,IACrB;AAEA,UAAM,cAAc,gBAAgB;AAAA,MAAC;AAAA,MAAA;AAAA,QAEnC,OAAO;AAAA,QACP,YAAY,KAAK,MAAM;AAAA,QACvB,cAAc,KAAK,MAAM,qBAAqB;AAAA,QAC9C,aAAa,KAAK,MAAM,uBAAuB,KAAK,MAAM,SAAS,OAAO,SAAO;AAAA,QACjF,SAAS,KAAK,MAAM;AAAA,QACpB,cAAc,KAAK,MAAM;AAAA,QACzB,MAAM,KAAK,MAAM;AAAA,QACjB,aAAa,KAAK;AAAA,QAClB,gBAAgB,KAAK;AAAA,QACrB,gBAAgB,KAAK;AAAA,QACrB,aAAa,KAAK;AAAA,QAClB,yBAAyB,KAAK;AAAA,QAC9B,iBAAiB,KAAK;AAAA,QACtB,QAAQ,KAAK,MAAM;AAAA,MAAA;AAAA,MAdd,KAAK,MAAM;AAAA,IAelB,IAAK;AAEC,UAAA,cAAe,KAAK,MAAM,OAAO,SAAS,KAAK,MAAM,MAAM,SAAU,IAAI;AAAA,MAAC;AAAA,MAAA;AAAA,QAC9E,cAAc;AAAA,QACd,oBAAoB,KAAK,MAAM;AAAA,QAC/B,eAAe,KAAK;AAAA,QACpB,UAAU,KAAK,MAAM;AAAA,QACrB,QAAQ,KAAK,MAAM;AAAA,QACnB,OAAO,KAAK,MAAM;AAAA,MAAA;AAAA,IACpB,IAAK;AAGC,UAAA,8BAAU,OACd,EAAA,UAAA;AAAA,MAAA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,UAAU,KAAK,aAAa;AAAA,UAC5B,wBAAwB,KAAK,MAAM;AAAA,UACnC,wBAAwB,KAAK,MAAM;AAAA,UACnC,yBAAyB,KAAK;AAAA,UAC9B,yBAAyB,KAAK;AAAA,UAC9B,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,KAAK,YAAY,KAAK,MAAM,OAAO;AAAA,UACjD,SAAS,KAAK,MAAM;AAAA,QAAA;AAAA,MACtB;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,KAAK,YAAY,KAAK,MAAM,WAAW;AAAA,QAAA;AAAA,MACvD;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,UAAU,KAAK,MAAM;AAAA,UACrB,gBAAgB,KAAK;AAAA,UACrB,0BAA0B,KAAK;AAAA,UAC/B,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,KAAK,YAAY,KAAK,MAAM,UAAU;AAAA,QAAA;AAAA,MACtD;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,UAAU,KAAK,MAAM;AAAA,UACrB,gBAAgB,KAAK;AAAA,UACrB,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,KAAK,YAAY,KAAK,MAAM,QAAQ;AAAA,UAClD,YAAY,KAAK,MAAM;AAAA,UACvB,iBAAiB,KAAK;AAAA,QAAA;AAAA,MACxB;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,aAAa,KAAK;AAAA,UAClB,cAAc,KAAK,YAAY,KAAK,MAAM,MAAM;AAAA,UAChD,YAAY,KAAK,MAAM;AAAA,QAAA;AAAA,MACzB;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,UAAU,KAAK,MAAM;AAAA,UACrB,gBAAgB,KAAK;AAAA,UACrB,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,KAAK,YAAY,KAAK,MAAM,SAAS;AAAA,QAAA;AAAA,MACrD;AAAA,IACF,EAAA,CAAA;AAEO,WAAA;AAAA,MAAC;AAAA,MAAA;AAAA,QACN;AAAA,QACA;AAAA,QACA;AAAA,QACA,KAAK,KAAK,YAAY;AAAA,QACtB,QAAQ;AAAA,QACR;AAAA,MAAA;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"bafcb93873c2a71cab2bdafeb2ce6a3195766cd8"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Me=function(){return l},l}Me();Me().s[0]++;window.Buffer=CG.Buffer;function Cb(n,e){Me().f[0]++;const t=(Me().s[1]++,n.match(/\.tilehosting\.com/)),r=(Me().s[2]++,n.match(/\.maptiler\.com/)),i=(Me().s[3]++,n.match(/\.thunderforest\.com/));if(Me().s[4]++,Me().b[1][0]++,t||(Me().b[1][1]++,r)){Me().b[0][0]++;const s=(Me().s[5]++,vc.getAccessToken("openmaptiles",e,{allowFallback:!0}));if(Me().s[6]++,s)return Me().b[2][0]++,Me().s[7]++,n.replace("{key}",s);Me().b[2][1]++}else if(Me().b[0][1]++,Me().s[8]++,i){Me().b[3][0]++;const s=(Me().s[9]++,vc.getAccessToken("thunderforest",e,{allowFallback:!0}));if(Me().s[10]++,s)return Me().b[4][0]++,Me().s[11]++,n.replace("{key}",s);Me().b[4][1]++}else return Me().b[3][1]++,Me().s[12]++,n}function mD(n,e,t){return Me().f[1]++,Me().s[13]++,{...n,$root:{...n.$root,[e]:{...n.$root[e],values:t}}}}class Lce extends Xn.Component{constructor(t){Me().f[2]++,Me().s[14]++;super(t);Kn(this,"revisionStore");Kn(this,"styleStore");Kn(this,"layerWatcher");Kn(this,"handleKeyPress",(Me().s[65]++,t=>{Me().f[18]++,Me().s[66]++,navigator.platform.toUpperCase().indexOf("MAC")>=0?(Me().b[18][0]++,Me().s[67]++,Me().b[20][0]++,t.metaKey&&(Me().b[20][1]++,t.shiftKey)&&(Me().b[20][2]++,t.keyCode===90)?(Me().b[19][0]++,Me().s[68]++,t.preventDefault(),Me().s[69]++,this.onRedo()):(Me().b[19][1]++,Me().s[70]++,Me().b[22][0]++,t.metaKey&&(Me().b[22][1]++,t.keyCode===90)?(Me().b[21][0]++,Me().s[71]++,t.preventDefault(),Me().s[72]++,this.onUndo()):Me().b[21][1]++)):(Me().b[18][1]++,Me().s[73]++,Me().b[24][0]++,t.ctrlKey&&(Me().b[24][1]++,t.keyCode===90)?(Me().b[23][0]++,Me().s[74]++,t.preventDefault(),Me().s[75]++,this.onUndo()):(Me().b[23][1]++,Me().s[76]++,Me().b[26][0]++,t.ctrlKey&&(Me().b[26][1]++,t.keyCode===89)?(Me().b[25][0]++,Me().s[77]++,t.preventDefault(),Me().s[78]++,this.onRedo()):Me().b[25][1]++))}));Kn(this,"onChangeMetadataProperty",(Me().s[89]++,(t,r)=>{Me().f[26]++,Me().s[90]++,Me().b[31][0]++,t==="maputnik:renderer"&&(Me().b[31][1]++,r!==xG(this.state.mapStyle,["metadata","maputnik:renderer"],"mlgljs"))?(Me().b[30][0]++,Me().s[91]++,this.setState({mapState:"map"})):Me().b[30][1]++;const i=(Me().s[92]++,{...this.state.mapStyle,metadata:{...this.state.mapStyle.metadata,[t]:r}});Me().s[93]++,this.onStyleChanged(i)}));Kn(this,"onStyleChanged",(Me().s[94]++,(t,r=(Me().b[32][0]++,{}))=>{Me().f[27]++,Me().s[95]++,r={save:!0,addRevision:!0,initialLoad:!1,...r},Me().s[96]++,Me().b[34][0]++,t.glyphs&&(Me().b[34][1]++,typeof t.glyphs=="string")?(Me().b[33][0]++,Me().s[97]++,t.glyphs=Cb(t.glyphs,t)):Me().b[33][1]++,Me().s[98]++,Me().b[36][0]++,t.sprite&&(Me().b[36][1]++,typeof t.sprite=="string")?(Me().b[35][0]++,Me().s[99]++,t.sprite=Cb(t.sprite,t)):Me().b[35][1]++,Me().s[100]++;for(const[f,y]of Object.entries(t.sources))Me().s[101]++,Me().b[38][0]++,y&&(Me().b[38][1]++,"url"in y)&&(Me().b[38][2]++,typeof y.url=="string")?(Me().b[37][0]++,Me().s[102]++,y.url=Cb(y.url,t)):Me().b[37][1]++;Me().s[103]++,r.initialLoad?(Me().b[39][0]++,Me().s[104]++,this.getInitialStateFromUrl(t)):Me().b[39][1]++;const i=(Me().s[105]++,Me().b[40][0]++,Df(t)||(Me().b[40][1]++,[])),s=(Me().s[106]++,[]);if(Me().s[107]++,Me().b[42][0]++,t&&(Me().b[42][1]++,t.layers)){Me().b[41][0]++;const f=(Me().s[108]++,new window.Map);Me().s[109]++,t.layers.forEach((y,x)=>{if(Me().f[28]++,Me().s[110]++,Me().b[44][0]++,y.id===""&&(Me().b[44][1]++,f.has(y.id))){Me().b[43][0]++;const B=(Me().s[111]++,new Error(`layers[${x}]: duplicate layer id [empty_string], previously used`));Me().s[112]++,s.push(B)}else Me().b[43][1]++;Me().s[113]++,f.set(y.id,!0)})}else Me().b[41][1]++;const l=(Me().s[114]++,s.concat(i).map(f=>{Me().f[29]++;const y=(Me().s[115]++,f.message.match(/layers\[(\d+)\]: (duplicate layer id "?(.*)"?, previously used)/));if(Me().s[116]++,y){Me().b[45][0]++;const[,O,P]=(Me().s[117]++,y);return Me().s[118]++,{message:f.message,parsed:{type:"layer",data:{index:parseInt(O,10),key:"id",message:P}}}}else Me().b[45][1]++;const x=(Me().s[119]++,f.message.match(/layers\[(\d+)\]: (source "(?:.*)" not found)/));if(Me().s[120]++,x){Me().b[46][0]++;const[,O,P]=(Me().s[121]++,x);return Me().s[122]++,{message:f.message,parsed:{type:"layer",data:{index:parseInt(O,10),key:"source",message:P}}}}else Me().b[46][1]++;const B=(Me().s[123]++,f.message.match(/layers\[(\d+)\]\.(?:(\S+)\.)?(\S+): (.*)/));if(Me().s[124]++,B){Me().b[47][0]++;const[,O,P,U,j]=(Me().s[125]++,B),N=(Me().s[126]++,Me().b[49][0]++,P&&(Me().b[49][1]++,U)?(Me().b[48][0]++,[P,U].join(".")):(Me().b[48][1]++,U));return Me().s[127]++,{message:f.message,parsed:{type:"layer",data:{index:parseInt(O,10),key:N,message:j}}}}else return Me().b[47][1]++,Me().s[128]++,{message:f.message}}));let o=(Me().s[129]++,void 0);Me().s[130]++,i.length>0?(Me().b[50][0]++,Me().s[131]++,o=K8(t),Me().s[132]++,i.forEach(f=>{Me().f[30]++;const{message:y}=(Me().s[133]++,f);if(Me().s[134]++,y){Me().b[51][0]++,Me().s[135]++;try{const x=(Me().s[136]++,y.split(":")[0]),B=(Me().s[137]++,x.match(/^\S+?\[\d+\]\.[^[]+/)[0]);Me().s[138]++,j2.unset(o,B)}catch(x){Me().s[139]++,console.warn(x)}}else Me().b[51][1]++})):Me().b[50][1]++,Me().s[140]++,t.glyphs!==this.state.mapStyle.glyphs?(Me().b[52][0]++,Me().s[141]++,this.updateFonts(t.glyphs)):Me().b[52][1]++,Me().s[142]++,t.sprite!==this.state.mapStyle.sprite?(Me().b[53][0]++,Me().s[143]++,this.updateIcons(t.sprite)):Me().b[53][1]++,Me().s[144]++,r.addRevision?(Me().b[54][0]++,Me().s[145]++,this.revisionStore.addRevision(t)):Me().b[54][1]++,Me().s[146]++,r.save?(Me().b[55][0]++,Me().s[147]++,this.saveStyle(t)):Me().b[55][1]++,Me().s[148]++,this.setState({mapStyle:t,dirtyMapStyle:o,errors:l},()=>{Me().f[31]++,Me().s[149]++,this.fetchSources(),Me().s[150]++,this.setStateInUrl()})}));Kn(this,"onUndo",(Me().s[151]++,()=>{Me().f[32]++;const t=(Me().s[152]++,this.revisionStore.undo()),r=(Me().s[153]++,pce(this.state.mapStyle,t));Me().s[154]++,this.onStyleChanged(t,{addRevision:!1}),Me().s[155]++,this.setState({infos:r})}));Kn(this,"onRedo",(Me().s[156]++,()=>{Me().f[33]++;const t=(Me().s[157]++,this.revisionStore.redo()),r=(Me().s[158]++,mce(this.state.mapStyle,t));Me().s[159]++,this.onStyleChanged(t,{addRevision:!1}),Me().s[160]++,this.setState({infos:r})}));Kn(this,"onMoveLayer",(Me().s[161]++,t=>{Me().f[34]++;let{oldIndex:r,newIndex:i}=(Me().s[162]++,t),s=(Me().s[163]++,this.state.mapStyle.layers);if(Me().s[164]++,r=D8(r,0,s.length-1),Me().s[165]++,i=D8(i,0,s.length-1),Me().s[166]++,r===i){Me().b[56][0]++,Me().s[167]++;return}else Me().b[56][1]++;Me().s[168]++,r===this.state.selectedLayerIndex?(Me().b[57][0]++,Me().s[169]++,this.setState({selectedLayerIndex:i})):Me().b[57][1]++,Me().s[170]++,s=s.slice(0),Me().s[171]++,SG(s,r,i),Me().s[172]++,this.onLayersChange(s)}));Kn(this,"onLayersChange",(Me().s[173]++,t=>{Me().f[35]++;const r=(Me().s[174]++,{...this.state.mapStyle,layers:t});Me().s[175]++,this.onStyleChanged(r)}));Kn(this,"onLayerDestroy",(Me().s[176]++,t=>{Me().f[36]++;const r=(Me().s[177]++,this.state.mapStyle.layers),i=(Me().s[178]++,r.slice(0));Me().s[179]++,i.splice(t,1),Me().s[180]++,this.onLayersChange(i)}));Kn(this,"onLayerCopy",(Me().s[181]++,t=>{Me().f[37]++;const r=(Me().s[182]++,this.state.mapStyle.layers),i=(Me().s[183]++,r.slice(0)),s=(Me().s[184]++,K8(i[t]));Me().s[185]++,s.id=s.id+"-copy",Me().s[186]++,i.splice(t,0,s),Me().s[187]++,this.onLayersChange(i)}));Kn(this,"onLayerVisibilityToggle",(Me().s[188]++,t=>{Me().f[38]++;const r=(Me().s[189]++,this.state.mapStyle.layers),i=(Me().s[190]++,r.slice(0)),s=(Me().s[191]++,{...i[t]}),l=(Me().s[192]++,"layout"in s?(Me().b[58][0]++,{...s.layout}):(Me().b[58][1]++,{}));Me().s[193]++,l.visibility=l.visibility==="none"?(Me().b[59][0]++,"visible"):(Me().b[59][1]++,"none"),Me().s[194]++,s.layout=l,Me().s[195]++,i[t]=s,Me().s[196]++,this.onLayersChange(i)}));Kn(this,"onLayerIdChange",(Me().s[197]++,(t,r,i)=>{Me().f[39]++;const s=(Me().s[198]++,this.state.mapStyle.layers.slice(0));Me().s[199]++,s[t]={...s[t],id:i},Me().s[200]++,this.onLayersChange(s)}));Kn(this,"onLayerChanged",(Me().s[201]++,(t,r)=>{Me().f[40]++;const i=(Me().s[202]++,this.state.mapStyle.layers.slice(0));Me().s[203]++,i[t]=r,Me().s[204]++,this.onLayersChange(i)}));Kn(this,"setMapState",(Me().s[205]++,t=>{Me().f[41]++,Me().s[206]++,this.setState({mapState:t},this.setStateInUrl)}));Kn(this,"setDefaultValues",(Me().s[207]++,t=>{Me().f[42]++;const r=(Me().s[208]++,Me().b[60][0]++,t.metadata||(Me().b[60][1]++,{}));if(Me().s[209]++,r["maputnik:renderer"]===void 0){Me().b[61][0]++;const i=(Me().s[210]++,{...t,metadata:{...t.metadata,"maputnik:renderer":"mlgljs"}});return Me().s[211]++,i}else return Me().b[61][1]++,Me().s[212]++,t}));Kn(this,"openStyle",(Me().s[213]++,(t,r)=>{Me().f[43]++,Me().s[214]++,this.setState({fileHandle:r}),Me().s[215]++,t=this.setDefaultValues(t),Me().s[216]++,this.onStyleChanged(t)}));Kn(this,"onMapChange",(Me().s[246]++,t=>{Me().f[52]++,Me().s[247]++,this.setState({mapView:t})}));Kn(this,"setStateInUrl",(Me().s[263]++,()=>{Me().f[56]++;const{mapState:t,mapStyle:r,isOpen:i}=(Me().s[264]++,this.state),{selectedLayerIndex:s}=(Me().s[265]++,this.state),l=(Me().s[266]++,new URL(location.href)),o=(Me().s[267]++,W8(JSON.stringify(r)));Me().s[268]++,l.searchParams.set("layer",`${o}~${s}`);const f=(Me().s[269]++,Object.entries(i).map(([y,x])=>(Me().f[57]++,Me().s[270]++,x===!0?(Me().b[74][0]++,y):(Me().b[74][1]++,null))).filter(y=>(Me().f[58]++,Me().s[271]++,y!==null)));Me().s[272]++,f.length>0?(Me().b[75][0]++,Me().s[273]++,l.searchParams.set("modal",f.join(","))):(Me().b[75][1]++,Me().s[274]++,l.searchParams.delete("modal")),Me().s[275]++,t==="map"?(Me().b[76][0]++,Me().s[276]++,l.searchParams.delete("view")):(Me().b[76][1]++,Me().s[277]++,t==="inspect"?(Me().b[77][0]++,Me().s[278]++,l.searchParams.set("view","inspect")):Me().b[77][1]++),Me().s[279]++,history.replaceState({selectedLayerIndex:s},"Maputnik",l.href)}));Kn(this,"getInitialStateFromUrl",(Me().s[280]++,t=>{Me().f[59]++;const r=(Me().s[281]++,new URL(location.href)),i=(Me().s[282]++,r.searchParams.get("modal"));if(Me().s[283]++,Me().b[79][0]++,i&&(Me().b[79][1]++,i!=="")){Me().b[78][0]++;const o=(Me().s[284]++,i.split(",")),f=(Me().s[285]++,{});Me().s[286]++,o.forEach(y=>{Me().f[60]++,Me().s[287]++,f[y]=!0}),Me().s[288]++,this.setState({isOpen:{...this.state.isOpen,...f}})}else Me().b[78][1]++;const s=(Me().s[289]++,r.searchParams.get("view"));Me().s[290]++,Me().b[81][0]++,s&&(Me().b[81][1]++,s!=="")?(Me().b[80][0]++,Me().s[291]++,this.setMapState(s)):Me().b[80][1]++;const l=(Me().s[292]++,r.searchParams.get("layer"));if(Me().s[293]++,l){Me().b[82][0]++,Me().s[294]++;try{const o=(Me().s[295]++,l.split("~")),[f,y]=(Me().s[296]++,[o[0],parseInt(o[1],10)]);let x=(Me().s[297]++,!0);if(Me().s[298]++,f!=="-"){Me().b[83][0]++;const B=(Me().s[299]++,W8(JSON.stringify(t)));Me().s[300]++,B!==parseInt(f,10)?(Me().b[84][0]++,Me().s[301]++,x=!1):Me().b[84][1]++}else Me().b[83][1]++;Me().s[302]++,x?(Me().b[85][0]++,Me().s[303]++,this.setState({selectedLayerIndex:y,selectedLayerOriginalId:t.layers[y].id})):Me().b[85][1]++}catch(o){Me().s[304]++,console.warn(o)}}else Me().b[82][1]++}));Kn(this,"onLayerSelect",(Me().s[305]++,t=>{Me().f[61]++,Me().s[306]++,this.setState({selectedLayerIndex:t,selectedLayerOriginalId:this.state.mapStyle.layers[t].id},this.setStateInUrl)}));Kn(this,"onChangeOpenlayersDebug",(Me().s[310]++,(t,r)=>{Me().f[65]++,Me().s[311]++,this.setState({openlayersDebugOptions:{...this.state.openlayersDebugOptions,[t]:r}})}));Kn(this,"onChangeMaplibreGlDebug",(Me().s[312]++,(t,r)=>{Me().f[66]++,Me().s[313]++,this.setState({maplibreGlDebugOptions:{...this.state.maplibreGlDebugOptions,[t]:r}})}));Me().s[15]++,cG(this),Me().s[16]++,this.revisionStore=new Oce;const r=(Me().s[17]++,new URLSearchParams(window.location.search.substring(1)));let i=(Me().s[18]++,r.get("localport"));Me().s[19]++,Me().b[6][0]++,i==null&&(Me().b[6][1]++,window.location.port!=="80")&&(Me().b[6][2]++,window.location.port!=="443")?(Me().b[5][0]++,Me().s[20]++,i=window.location.port):Me().b[5][1]++,Me().s[21]++,this.styleStore=new Bce({onLocalStyleChange:o=>(Me().f[3]++,Me().s[22]++,this.onStyleChanged(o,{save:!1})),port:i,host:r.get("localhost")});const s=(Me().s[23]++,[{key:"?",handler:()=>{Me().f[4]++,Me().s[24]++,this.toggleModal("shortcuts")}},{key:"o",handler:()=>{Me().f[5]++,Me().s[25]++,this.toggleModal("open")}},{key:"e",handler:()=>{Me().f[6]++,Me().s[26]++,this.toggleModal("export")}},{key:"d",handler:()=>{Me().f[7]++,Me().s[27]++,this.toggleModal("sources")}},{key:"s",handler:()=>{Me().f[8]++,Me().s[28]++,this.toggleModal("settings")}},{key:"i",handler:()=>{Me().f[9]++,Me().s[29]++,this.setMapState(this.state.mapState==="map"?(Me().b[7][0]++,"inspect"):(Me().b[7][1]++,"map"))}},{key:"m",handler:()=>{Me().f[10]++,Me().s[30]++,document.querySelector(".maplibregl-canvas").focus()}},{key:"!",handler:()=>{Me().f[11]++,Me().s[31]++,this.toggleModal("debug")}}]);Me().s[32]++,document.body.addEventListener("keyup",o=>{if(Me().f[12]++,Me().s[33]++,o.key==="Escape")Me().b[8][0]++,Me().s[34]++,o.target.blur(),Me().s[35]++,document.body.focus();else if(Me().b[8][1]++,Me().s[36]++,Me().b[10][0]++,this.state.isOpen.shortcuts||(Me().b[10][1]++,document.activeElement===document.body)){Me().b[9][0]++;const f=(Me().s[37]++,s.find(y=>(Me().f[13]++,Me().s[38]++,y.key===o.key)));Me().s[39]++,f?(Me().b[11][0]++,Me().s[40]++,this.setModal("shortcuts",!1),Me().s[41]++,f.handler()):Me().b[11][1]++}else Me().b[9][1]++});const l=(Me().s[42]++,fce());Me().s[43]++,Me().b[13][0]++,l&&(Me().b[13][1]++,window.confirm("Load style from URL: "+l+" and discard current changes?"))?(Me().b[12][0]++,Me().s[44]++,this.styleStore=new hD,Me().s[45]++,eN(l,o=>(Me().f[14]++,Me().s[46]++,this.onStyleChanged(o))),Me().s[47]++,uD()):(Me().b[12][1]++,Me().s[48]++,l?(Me().b[14][0]++,Me().s[49]++,uD()):Me().b[14][1]++,Me().s[50]++,this.styleStore.init(o=>{Me().f[15]++,Me().s[51]++,o?(Me().b[15][0]++,Me().s[52]++,console.log("Falling back to local storage for storing styles"),Me().s[53]++,this.styleStore=new hD):Me().b[15][1]++,Me().s[54]++,this.styleStore.latestStyle(f=>(Me().f[16]++,Me().s[55]++,this.onStyleChanged(f,{initialLoad:!0}))),Me().s[56]++,vg.enabled()?(Me().b[16][0]++,Me().s[57]++,vg.set("maputnik","styleStore",this.styleStore),Me().s[58]++,vg.set("maputnik","revisionStore",this.revisionStore)):Me().b[16][1]++})),Me().s[59]++,vg.enabled()?(Me().b[17][0]++,Me().s[60]++,vg.set("maputnik","revisionStore",this.revisionStore),Me().s[61]++,vg.set("maputnik","styleStore",this.styleStore)):Me().b[17][1]++,Me().s[62]++,this.state={errors:[],infos:[],mapStyle:vc.emptyStyle,selectedLayerIndex:0,sources:{},vectorLayers:{},mapState:"map",spec:Ms,mapView:{zoom:0,center:{lng:0,lat:0}},isOpen:{settings:!1,sources:!1,open:!1,shortcuts:!1,export:!1,debug:!1},maplibreGlDebugOptions:{showTileBoundaries:!1,showCollisionBoxes:!1,showOverdrawInspector:!1},openlayersDebugOptions:{debugToolbox:!1},fileHandle:null},Me().s[63]++,this.layerWatcher=new Rce({onVectorLayersChange:o=>(Me().f[17]++,Me().s[64]++,this.setState({vectorLayers:o}))})}componentDidMount(){Me().f[19]++,Me().s[79]++,window.addEventListener("keydown",this.handleKeyPress)}componentWillUnmount(){Me().f[20]++,Me().s[80]++,window.removeEventListener("keydown",this.handleKeyPress)}saveStyle(t){Me().f[21]++,Me().s[81]++,this.styleStore.save(t)}updateFonts(t){Me().f[22]++;const r=(Me().s[82]++,Me().b[27][0]++,this.state.mapStyle.metadata||(Me().b[27][1]++,{})),i=(Me().s[83]++,Me().b[28][0]++,r["maputnik:openmaptiles_access_token"]||(Me().b[28][1]++,Dj.openmaptiles)),s=(Me().s[84]++,typeof t=="string"?(Me().b[29][0]++,t.replace("{key}",i)):(Me().b[29][1]++,t));Me().s[85]++,dce(s,l=>{Me().f[23]++,Me().s[86]++,this.setState({spec:mD(this.state.spec,"glyphs",l)})})}updateIcons(t){Me().f[24]++,Me().s[87]++,hce(t,r=>{Me().f[25]++,Me().s[88]++,this.setState({spec:mD(this.state.spec,"sprite",r)})})}fetchSources(){Me().f[44]++;const t=(Me().s[217]++,{});Me().s[218]++;for(const[r,i]of Object.entries(this.state.mapStyle.sources))if(Me().s[219]++,Me().b[63][0]++,!Object.prototype.hasOwnProperty.call(this.state.sources,r)&&(Me().b[63][1]++,i.type==="vector")&&(Me().b[63][2]++,Object.prototype.hasOwnProperty.call(i,"url"))){Me().b[62][0]++,Me().s[220]++,t[r]={type:i.type,layers:[]};let s=(Me().s[221]++,i.url);Me().s[222]++;try{Me().s[223]++,s=Cb(s,this.state.mapStyle)}catch(o){Me().s[224]++,console.warn("Failed to setFetchAccessToken: ",o)}Me().s[225]++;const l=o=>{if(Me().f[45]++,Me().s[226]++,Object.prototype.hasOwnProperty.call(o,"vector_layers"))Me().b[64][1]++;else{Me().b[64][0]++,Me().s[227]++;return}const f=(Me().s[228]++,Object.assign({},{[r]:this.state.sources[r]}));Me().s[229]++;for(const y of o.vector_layers)Me().s[230]++,f[r].layers.push(y.id);Me().s[231]++,this.setState({sources:f})};Me().s[232]++,s.startsWith("pmtiles://")?(Me().b[65][0]++,Me().s[233]++,new BE(s.substr(10)).getTileJson("").then(o=>(Me().f[46]++,Me().s[234]++,l(o))).catch(o=>{Me().f[47]++,Me().s[235]++,console.error("Failed to process sources for '%s'",s,o)})):(Me().b[65][1]++,Me().s[236]++,fetch(s,{mode:"cors"}).then(o=>(Me().f[48]++,Me().s[237]++,o.json())).then(o=>(Me().f[49]++,Me().s[238]++,l(o))).catch(o=>{Me().f[50]++,Me().s[239]++,console.error("Failed to process sources for '%s'",s,o)}))}else Me().b[62][1]++,Me().s[240]++,t[r]=(Me().b[66][0]++,this.state.sources[r]||(Me().b[66][1]++,this.state.mapStyle.sources[r]));Me().s[241]++,K6(this.state.sources,t)?Me().b[67][1]++:(Me().b[67][0]++,Me().s[242]++,console.debug("Setting sources"),Me().s[243]++,this.setState({sources:t}))}_getRenderer(){Me().f[51]++;const t=(Me().s[244]++,Me().b[68][0]++,this.state.mapStyle.metadata||(Me().b[68][1]++,{}));return Me().s[245]++,Me().b[69][0]++,t["maputnik:renderer"]||(Me().b[69][1]++,"mlgljs")}mapRenderer(){Me().f[53]++;const{mapStyle:t,dirtyMapStyle:r}=(Me().s[248]++,this.state),i=(Me().s[249]++,{mapStyle:(Me().b[70][0]++,r||(Me().b[70][1]++,t)),replaceAccessTokens:y=>(Me().f[54]++,Me().s[250]++,vc.replaceAccessTokens(y,{allowFallback:!0})),onDataChange:y=>{Me().f[55]++,Me().s[251]++,this.layerWatcher.analyzeMap(y.map),Me().s[252]++,this.fetchSources()}}),s=(Me().s[253]++,this._getRenderer());let l;Me().s[254]++,s==="ol"?(Me().b[71][0]++,Me().s[255]++,l=ue.jsx(Xte,{...i,onChange:this.onMapChange,debugToolbox:this.state.openlayersDebugOptions.debugToolbox,onLayerSelect:this.onLayerSelect})):(Me().b[71][1]++,Me().s[256]++,l=ue.jsx(W$,{...i,onChange:this.onMapChange,options:this.state.maplibreGlDebugOptions,inspectModeEnabled:this.state.mapState==="inspect",highlightedLayer:this.state.mapStyle.layers[this.state.selectedLayerIndex],onLayerSelect:this.onLayerSelect}));let o;Me().s[257]++,this.state.mapState.match(/^filter-/)?(Me().b[72][0]++,Me().s[258]++,o=this.state.mapState.replace(/^filter-/,"")):Me().b[72][1]++;const f=(Me().s[259]++,{});return Me().s[260]++,o?(Me().b[73][0]++,Me().s[261]++,f.filter=`url('#${o}')`):Me().b[73][1]++,Me().s[262]++,ue.jsx("div",{style:f,className:"maputnik-map__container","data-wd-key":"maplibre:container",children:l})}setModal(t,r){Me().f[62]++,Me().s[307]++,this.setState({isOpen:{...this.state.isOpen,[t]:r}},this.setStateInUrl)}toggleModal(t){Me().f[63]++,Me().s[308]++,this.setModal(t,!this.state.isOpen[t])}onSetFileHandle(t){Me().f[64]++,Me().s[309]++,this.setState({fileHandle:t})}render(){Me().f[67]++;const t=(Me().s[314]++,Me().b[86][0]++,this.state.mapStyle.layers||(Me().b[86][1]++,[])),r=(Me().s[315]++,t.length>0?(Me().b[87][0]++,t[this.state.selectedLayerIndex]):(Me().b[87][1]++,void 0)),i=(Me().s[316]++,ue.jsx(Sue,{renderer:this._getRenderer(),mapState:this.state.mapState,mapStyle:this.state.mapStyle,inspectModeEnabled:this.state.mapState==="inspect",sources:this.state.sources,onStyleChanged:this.onStyleChanged,onStyleOpen:this.onStyleChanged,onSetMapState:this.setMapState,onToggleModal:this.toggleModal.bind(this)})),s=(Me().s[317]++,ue.jsx(pie,{onMoveLayer:this.onMoveLayer,onLayerDestroy:this.onLayerDestroy,onLayerCopy:this.onLayerCopy,onLayerVisibilityToggle:this.onLayerVisibilityToggle,onLayersChange:this.onLayersChange,onLayerSelect:this.onLayerSelect,selectedLayerIndex:this.state.selectedLayerIndex,layers:t,sources:this.state.sources,errors:this.state.errors})),l=(Me().s[318]++,r?(Me().b[88][0]++,ue.jsx(qle,{layer:r,layerIndex:this.state.selectedLayerIndex,isFirstLayer:this.state.selectedLayerIndex<1,isLastLayer:this.state.selectedLayerIndex===this.state.mapStyle.layers.length-1,sources:this.state.sources,vectorLayers:this.state.vectorLayers,spec:this.state.spec,onMoveLayer:this.onMoveLayer,onLayerChanged:this.onLayerChanged,onLayerDestroy:this.onLayerDestroy,onLayerCopy:this.onLayerCopy,onLayerVisibilityToggle:this.onLayerVisibilityToggle,onLayerIdChange:this.onLayerIdChange,errors:this.state.errors},this.state.selectedLayerOriginalId)):(Me().b[88][1]++,void 0)),o=(Me().s[319]++,this.state.errors.length+this.state.infos.length>0?(Me().b[89][0]++,ue.jsx(Oue,{currentLayer:r,selectedLayerIndex:this.state.selectedLayerIndex,onLayerSelect:this.onLayerSelect,mapStyle:this.state.mapStyle,errors:this.state.errors,infos:this.state.infos})):(Me().b[89][1]++,void 0)),f=(Me().s[320]++,ue.jsxs("div",{children:[ue.jsx(BAe,{renderer:this._getRenderer(),maplibreGlDebugOptions:this.state.maplibreGlDebugOptions,openlayersDebugOptions:this.state.openlayersDebugOptions,onChangeMaplibreGlDebug:this.onChangeMaplibreGlDebug,onChangeOpenlayersDebug:this.onChangeOpenlayersDebug,isOpen:this.state.isOpen.debug,onOpenToggle:this.toggleModal.bind(this,"debug"),mapView:this.state.mapView}),ue.jsx(SAe,{isOpen:this.state.isOpen.shortcuts,onOpenToggle:this.toggleModal.bind(this,"shortcuts")}),ue.jsx(Pue,{mapStyle:this.state.mapStyle,onStyleChanged:this.onStyleChanged,onChangeMetadataProperty:this.onChangeMetadataProperty,isOpen:this.state.isOpen.settings,onOpenToggle:this.toggleModal.bind(this,"settings")}),ue.jsx(Xue,{mapStyle:this.state.mapStyle,onStyleChanged:this.onStyleChanged,isOpen:this.state.isOpen.export,onOpenToggle:this.toggleModal.bind(this,"export"),fileHandle:this.state.fileHandle,onSetFileHandle:this.onSetFileHandle}),ue.jsx(MAe,{isOpen:this.state.isOpen.open,onStyleOpen:this.openStyle,onOpenToggle:this.toggleModal.bind(this,"open"),fileHandle:this.state.fileHandle}),ue.jsx(mAe,{mapStyle:this.state.mapStyle,onStyleChanged:this.onStyleChanged,isOpen:this.state.isOpen.sources,onOpenToggle:this.toggleModal.bind(this,"sources")})]}));return Me().s[321]++,ue.jsx(Bue,{toolbar:i,layerList:s,layerEditor:l,map:this.mapRenderer(),bottom:o,modals:f})}}const Uce=XN.createRoot(document.querySelector("#app"));Uce.render(ue.jsx(_E.Provider,{value:{className:"react-icons"},children:ue.jsx(Lce,{})}));document.querySelector(".loading").style.display="none";
//# sourceMappingURL=index-CKBjFUTc.js.map
