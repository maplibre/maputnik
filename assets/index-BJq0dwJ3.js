(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function t(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=t(r);fetch(r.href,o)}})();function Ou(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function d$(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function i(){var r=!1;try{r=this instanceof i}catch{}return r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var r=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(t,i,r.get?r:{enumerable:!0,get:function(){return n[i]}})}),t}var J6={exports:{}},s2={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zK;function joe(){if(zK)return s2;zK=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,r,o){var s=null;if(o!==void 0&&(s=""+o),r.key!==void 0&&(s=""+r.key),"key"in r){o={};for(var a in r)a!=="key"&&(o[a]=r[a])}else o=r;return r=o.ref,{$$typeof:n,type:i,key:s,ref:r!==void 0?r:null,props:o}}return s2.Fragment=e,s2.jsx=t,s2.jsxs=t,s2}var jK;function Noe(){return jK||(jK=1,J6.exports=joe()),J6.exports}var te=Noe(),eB={exports:{}},jr={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NK;function Goe(){if(NK)return jr;NK=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),s=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),x=Symbol.iterator;function E(Re){return Re===null||typeof Re!="object"?null:(Re=x&&Re[x]||Re["@@iterator"],typeof Re=="function"?Re:null)}var D={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},P=Object.assign,F={};function W(Re,Ge,De){this.props=Re,this.context=Ge,this.refs=F,this.updater=De||D}W.prototype.isReactComponent={},W.prototype.setState=function(Re,Ge){if(typeof Re!="object"&&typeof Re!="function"&&Re!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Re,Ge,"setState")},W.prototype.forceUpdate=function(Re){this.updater.enqueueForceUpdate(this,Re,"forceUpdate")};function q(){}q.prototype=W.prototype;function V(Re,Ge,De){this.props=Re,this.context=Ge,this.refs=F,this.updater=De||D}var H=V.prototype=new q;H.constructor=V,P(H,W.prototype),H.isPureReactComponent=!0;var X=Array.isArray;function Z(){}var G={H:null,A:null,T:null,S:null},oe=Object.prototype.hasOwnProperty;function ue(Re,Ge,De){var _t=De.ref;return{$$typeof:n,type:Re,key:Ge,ref:_t!==void 0?_t:null,props:De}}function xe(Re,Ge){return ue(Re.type,Ge,Re.props)}function me(Re){return typeof Re=="object"&&Re!==null&&Re.$$typeof===n}function Ie(Re){var Ge={"=":"=0",":":"=2"};return"$"+Re.replace(/[=:]/g,function(De){return Ge[De]})}var Me=/\/+/g;function Te(Re,Ge){return typeof Re=="object"&&Re!==null&&Re.key!=null?Ie(""+Re.key):Ge.toString(36)}function je(Re){switch(Re.status){case"fulfilled":return Re.value;case"rejected":throw Re.reason;default:switch(typeof Re.status=="string"?Re.then(Z,Z):(Re.status="pending",Re.then(function(Ge){Re.status==="pending"&&(Re.status="fulfilled",Re.value=Ge)},function(Ge){Re.status==="pending"&&(Re.status="rejected",Re.reason=Ge)})),Re.status){case"fulfilled":return Re.value;case"rejected":throw Re.reason}}throw Re}function Ee(Re,Ge,De,_t,at){var Tt=typeof Re;(Tt==="undefined"||Tt==="boolean")&&(Re=null);var Kt=!1;if(Re===null)Kt=!0;else switch(Tt){case"bigint":case"string":case"number":Kt=!0;break;case"object":switch(Re.$$typeof){case n:case e:Kt=!0;break;case m:return Kt=Re._init,Ee(Kt(Re._payload),Ge,De,_t,at)}}if(Kt)return at=at(Re),Kt=_t===""?"."+Te(Re,0):_t,X(at)?(De="",Kt!=null&&(De=Kt.replace(Me,"$&/")+"/"),Ee(at,Ge,De,"",function(Be){return Be})):at!=null&&(me(at)&&(at=xe(at,De+(at.key==null||Re&&Re.key===at.key?"":(""+at.key).replace(Me,"$&/")+"/")+Kt)),Ge.push(at)),1;Kt=0;var Ke=_t===""?".":_t+":";if(X(Re))for(var Oe=0;Oe<Re.length;Oe++)_t=Re[Oe],Tt=Ke+Te(_t,Oe),Kt+=Ee(_t,Ge,De,Tt,at);else if(Oe=E(Re),typeof Oe=="function")for(Re=Oe.call(Re),Oe=0;!(_t=Re.next()).done;)_t=_t.value,Tt=Ke+Te(_t,Oe++),Kt+=Ee(_t,Ge,De,Tt,at);else if(Tt==="object"){if(typeof Re.then=="function")return Ee(je(Re),Ge,De,_t,at);throw Ge=String(Re),Error("Objects are not valid as a React child (found: "+(Ge==="[object Object]"?"object with keys {"+Object.keys(Re).join(", ")+"}":Ge)+"). If you meant to render a collection of children, use an array instead.")}return Kt}function qe(Re,Ge,De){if(Re==null)return Re;var _t=[],at=0;return Ee(Re,_t,"","",function(Tt){return Ge.call(De,Tt,at++)}),_t}function At(Re){if(Re._status===-1){var Ge=Re._result;Ge=Ge(),Ge.then(function(De){(Re._status===0||Re._status===-1)&&(Re._status=1,Re._result=De)},function(De){(Re._status===0||Re._status===-1)&&(Re._status=2,Re._result=De)}),Re._status===-1&&(Re._status=0,Re._result=Ge)}if(Re._status===1)return Re._result.default;throw Re._result}var gt=typeof reportError=="function"?reportError:function(Re){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Ge=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Re=="object"&&Re!==null&&typeof Re.message=="string"?String(Re.message):String(Re),error:Re});if(!window.dispatchEvent(Ge))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Re);return}console.error(Re)},Le={map:qe,forEach:function(Re,Ge,De){qe(Re,function(){Ge.apply(this,arguments)},De)},count:function(Re){var Ge=0;return qe(Re,function(){Ge++}),Ge},toArray:function(Re){return qe(Re,function(Ge){return Ge})||[]},only:function(Re){if(!me(Re))throw Error("React.Children.only expected to receive a single React element child.");return Re}};return jr.Activity=v,jr.Children=Le,jr.Component=W,jr.Fragment=t,jr.Profiler=r,jr.PureComponent=V,jr.StrictMode=i,jr.Suspense=c,jr.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=G,jr.__COMPILER_RUNTIME={__proto__:null,c:function(Re){return G.H.useMemoCache(Re)}},jr.cache=function(Re){return function(){return Re.apply(null,arguments)}},jr.cacheSignal=function(){return null},jr.cloneElement=function(Re,Ge,De){if(Re==null)throw Error("The argument must be a React element, but you passed "+Re+".");var _t=P({},Re.props),at=Re.key;if(Ge!=null)for(Tt in Ge.key!==void 0&&(at=""+Ge.key),Ge)!oe.call(Ge,Tt)||Tt==="key"||Tt==="__self"||Tt==="__source"||Tt==="ref"&&Ge.ref===void 0||(_t[Tt]=Ge[Tt]);var Tt=arguments.length-2;if(Tt===1)_t.children=De;else if(1<Tt){for(var Kt=Array(Tt),Ke=0;Ke<Tt;Ke++)Kt[Ke]=arguments[Ke+2];_t.children=Kt}return ue(Re.type,at,_t)},jr.createContext=function(Re){return Re={$$typeof:s,_currentValue:Re,_currentValue2:Re,_threadCount:0,Provider:null,Consumer:null},Re.Provider=Re,Re.Consumer={$$typeof:o,_context:Re},Re},jr.createElement=function(Re,Ge,De){var _t,at={},Tt=null;if(Ge!=null)for(_t in Ge.key!==void 0&&(Tt=""+Ge.key),Ge)oe.call(Ge,_t)&&_t!=="key"&&_t!=="__self"&&_t!=="__source"&&(at[_t]=Ge[_t]);var Kt=arguments.length-2;if(Kt===1)at.children=De;else if(1<Kt){for(var Ke=Array(Kt),Oe=0;Oe<Kt;Oe++)Ke[Oe]=arguments[Oe+2];at.children=Ke}if(Re&&Re.defaultProps)for(_t in Kt=Re.defaultProps,Kt)at[_t]===void 0&&(at[_t]=Kt[_t]);return ue(Re,Tt,at)},jr.createRef=function(){return{current:null}},jr.forwardRef=function(Re){return{$$typeof:a,render:Re}},jr.isValidElement=me,jr.lazy=function(Re){return{$$typeof:m,_payload:{_status:-1,_result:Re},_init:At}},jr.memo=function(Re,Ge){return{$$typeof:h,type:Re,compare:Ge===void 0?null:Ge}},jr.startTransition=function(Re){var Ge=G.T,De={};G.T=De;try{var _t=Re(),at=G.S;at!==null&&at(De,_t),typeof _t=="object"&&_t!==null&&typeof _t.then=="function"&&_t.then(Z,gt)}catch(Tt){gt(Tt)}finally{Ge!==null&&De.types!==null&&(Ge.types=De.types),G.T=Ge}},jr.unstable_useCacheRefresh=function(){return G.H.useCacheRefresh()},jr.use=function(Re){return G.H.use(Re)},jr.useActionState=function(Re,Ge,De){return G.H.useActionState(Re,Ge,De)},jr.useCallback=function(Re,Ge){return G.H.useCallback(Re,Ge)},jr.useContext=function(Re){return G.H.useContext(Re)},jr.useDebugValue=function(){},jr.useDeferredValue=function(Re,Ge){return G.H.useDeferredValue(Re,Ge)},jr.useEffect=function(Re,Ge){return G.H.useEffect(Re,Ge)},jr.useEffectEvent=function(Re){return G.H.useEffectEvent(Re)},jr.useId=function(){return G.H.useId()},jr.useImperativeHandle=function(Re,Ge,De){return G.H.useImperativeHandle(Re,Ge,De)},jr.useInsertionEffect=function(Re,Ge){return G.H.useInsertionEffect(Re,Ge)},jr.useLayoutEffect=function(Re,Ge){return G.H.useLayoutEffect(Re,Ge)},jr.useMemo=function(Re,Ge){return G.H.useMemo(Re,Ge)},jr.useOptimistic=function(Re,Ge){return G.H.useOptimistic(Re,Ge)},jr.useReducer=function(Re,Ge,De){return G.H.useReducer(Re,Ge,De)},jr.useRef=function(Re){return G.H.useRef(Re)},jr.useState=function(Re){return G.H.useState(Re)},jr.useSyncExternalStore=function(Re,Ge,De){return G.H.useSyncExternalStore(Re,Ge,De)},jr.useTransition=function(){return G.H.useTransition()},jr.version="19.2.0",jr}var GK;function Oa(){return GK||(GK=1,eB.exports=Goe()),eB.exports}var Mt=Oa();const On=Ou(Mt);var f$={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},lx=On.createContext&&On.createContext(f$),Woe=["attr","size","title"];function Qoe(n,e){if(n==null)return{};var t=Yoe(n,e),i,r;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(r=0;r<o.length;r++)i=o[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}function Yoe(n,e){if(n==null)return{};var t={};for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){if(e.indexOf(i)>=0)continue;t[i]=n[i]}return t}function Dw(){return Dw=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Dw.apply(this,arguments)}function WK(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function Pw(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?WK(Object(t),!0).forEach(function(i){qoe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):WK(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function qoe(n,e,t){return e=Voe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Voe(n){var e=$oe(n,"string");return typeof e=="symbol"?e:e+""}function $oe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function p$(n){return n&&n.map((e,t)=>On.createElement(e.tag,Pw({key:t},e.attr),p$(e.child)))}function xo(n){return e=>On.createElement(Hoe,Dw({attr:Pw({},n.attr)},e),p$(n.child))}function Hoe(n){var e=t=>{var{attr:i,size:r,title:o}=n,s=Qoe(n,Woe),a=r||t.size||"1em",c;return t.className&&(c=t.className),n.className&&(c=(c?c+" ":"")+n.className),On.createElement("svg",Dw({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,i,s,{className:c,style:Pw(Pw({color:n.color||t.color},t.style),n.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),o&&On.createElement("title",null,o),n.children)};return lx!==void 0?On.createElement(lx.Consumer,null,t=>e(t)):e(f$)}var tB={exports:{}},a2={},nB={exports:{}},iB={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QK;function Zoe(){return QK||(QK=1,(function(n){function e(Ee,qe){var At=Ee.length;Ee.push(qe);e:for(;0<At;){var gt=At-1>>>1,Le=Ee[gt];if(0<r(Le,qe))Ee[gt]=qe,Ee[At]=Le,At=gt;else break e}}function t(Ee){return Ee.length===0?null:Ee[0]}function i(Ee){if(Ee.length===0)return null;var qe=Ee[0],At=Ee.pop();if(At!==qe){Ee[0]=At;e:for(var gt=0,Le=Ee.length,Re=Le>>>1;gt<Re;){var Ge=2*(gt+1)-1,De=Ee[Ge],_t=Ge+1,at=Ee[_t];if(0>r(De,At))_t<Le&&0>r(at,De)?(Ee[gt]=at,Ee[_t]=At,gt=_t):(Ee[gt]=De,Ee[Ge]=At,gt=Ge);else if(_t<Le&&0>r(at,At))Ee[gt]=at,Ee[_t]=At,gt=_t;else break e}}return qe}function r(Ee,qe){var At=Ee.sortIndex-qe.sortIndex;return At!==0?At:Ee.id-qe.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();n.unstable_now=function(){return s.now()-a}}var c=[],h=[],m=1,v=null,x=3,E=!1,D=!1,P=!1,F=!1,W=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,V=typeof setImmediate<"u"?setImmediate:null;function H(Ee){for(var qe=t(h);qe!==null;){if(qe.callback===null)i(h);else if(qe.startTime<=Ee)i(h),qe.sortIndex=qe.expirationTime,e(c,qe);else break;qe=t(h)}}function X(Ee){if(P=!1,H(Ee),!D)if(t(c)!==null)D=!0,Z||(Z=!0,Ie());else{var qe=t(h);qe!==null&&je(X,qe.startTime-Ee)}}var Z=!1,G=-1,oe=5,ue=-1;function xe(){return F?!0:!(n.unstable_now()-ue<oe)}function me(){if(F=!1,Z){var Ee=n.unstable_now();ue=Ee;var qe=!0;try{e:{D=!1,P&&(P=!1,q(G),G=-1),E=!0;var At=x;try{t:{for(H(Ee),v=t(c);v!==null&&!(v.expirationTime>Ee&&xe());){var gt=v.callback;if(typeof gt=="function"){v.callback=null,x=v.priorityLevel;var Le=gt(v.expirationTime<=Ee);if(Ee=n.unstable_now(),typeof Le=="function"){v.callback=Le,H(Ee),qe=!0;break t}v===t(c)&&i(c),H(Ee)}else i(c);v=t(c)}if(v!==null)qe=!0;else{var Re=t(h);Re!==null&&je(X,Re.startTime-Ee),qe=!1}}break e}finally{v=null,x=At,E=!1}qe=void 0}}finally{qe?Ie():Z=!1}}}var Ie;if(typeof V=="function")Ie=function(){V(me)};else if(typeof MessageChannel<"u"){var Me=new MessageChannel,Te=Me.port2;Me.port1.onmessage=me,Ie=function(){Te.postMessage(null)}}else Ie=function(){W(me,0)};function je(Ee,qe){G=W(function(){Ee(n.unstable_now())},qe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Ee){Ee.callback=null},n.unstable_forceFrameRate=function(Ee){0>Ee||125<Ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):oe=0<Ee?Math.floor(1e3/Ee):5},n.unstable_getCurrentPriorityLevel=function(){return x},n.unstable_next=function(Ee){switch(x){case 1:case 2:case 3:var qe=3;break;default:qe=x}var At=x;x=qe;try{return Ee()}finally{x=At}},n.unstable_requestPaint=function(){F=!0},n.unstable_runWithPriority=function(Ee,qe){switch(Ee){case 1:case 2:case 3:case 4:case 5:break;default:Ee=3}var At=x;x=Ee;try{return qe()}finally{x=At}},n.unstable_scheduleCallback=function(Ee,qe,At){var gt=n.unstable_now();switch(typeof At=="object"&&At!==null?(At=At.delay,At=typeof At=="number"&&0<At?gt+At:gt):At=gt,Ee){case 1:var Le=-1;break;case 2:Le=250;break;case 5:Le=1073741823;break;case 4:Le=1e4;break;default:Le=5e3}return Le=At+Le,Ee={id:m++,callback:qe,priorityLevel:Ee,startTime:At,expirationTime:Le,sortIndex:-1},At>gt?(Ee.sortIndex=At,e(h,Ee),t(c)===null&&Ee===t(h)&&(P?(q(G),G=-1):P=!0,je(X,At-gt))):(Ee.sortIndex=Le,e(c,Ee),D||E||(D=!0,Z||(Z=!0,Ie()))),Ee},n.unstable_shouldYield=xe,n.unstable_wrapCallback=function(Ee){var qe=x;return function(){var At=x;x=qe;try{return Ee.apply(this,arguments)}finally{x=At}}}})(iB)),iB}var YK;function Xoe(){return YK||(YK=1,nB.exports=Zoe()),nB.exports}var rB={exports:{}},$A={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qK;function Joe(){if(qK)return $A;qK=1;var n=Oa();function e(c){var h="https://react.dev/errors/"+c;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)h+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+c+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function o(c,h,m){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:v==null?null:""+v,children:c,containerInfo:h,implementation:m}}var s=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function a(c,h){if(c==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return $A.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,$A.createPortal=function(c,h){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return o(c,h,null,m)},$A.flushSync=function(c){var h=s.T,m=i.p;try{if(s.T=null,i.p=2,c)return c()}finally{s.T=h,i.p=m,i.d.f()}},$A.preconnect=function(c,h){typeof c=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,i.d.C(c,h))},$A.prefetchDNS=function(c){typeof c=="string"&&i.d.D(c)},$A.preinit=function(c,h){if(typeof c=="string"&&h&&typeof h.as=="string"){var m=h.as,v=a(m,h.crossOrigin),x=typeof h.integrity=="string"?h.integrity:void 0,E=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;m==="style"?i.d.S(c,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:v,integrity:x,fetchPriority:E}):m==="script"&&i.d.X(c,{crossOrigin:v,integrity:x,fetchPriority:E,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},$A.preinitModule=function(c,h){if(typeof c=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var m=a(h.as,h.crossOrigin);i.d.M(c,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&i.d.M(c)},$A.preload=function(c,h){if(typeof c=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var m=h.as,v=a(m,h.crossOrigin);i.d.L(c,m,{crossOrigin:v,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},$A.preloadModule=function(c,h){if(typeof c=="string")if(h){var m=a(h.as,h.crossOrigin);i.d.m(c,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else i.d.m(c)},$A.requestFormReset=function(c){i.d.r(c)},$A.unstable_batchedUpdates=function(c,h){return c(h)},$A.useFormState=function(c,h,m){return s.H.useFormState(c,h,m)},$A.useFormStatus=function(){return s.H.useHostTransitionStatus()},$A.version="19.2.0",$A}var VK;function XR(){if(VK)return rB.exports;VK=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),rB.exports=Joe(),rB.exports}var $K;function ese(){if($K)return a2;$K=1;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=Xoe(),e=Oa(),t=XR();function i(A){var g="https://react.dev/errors/"+A;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)g+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+A+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(A){return!(!A||A.nodeType!==1&&A.nodeType!==9&&A.nodeType!==11)}function o(A){var g=A,_=A;if(A.alternate)for(;g.return;)g=g.return;else{A=g;do g=A,(g.flags&4098)!==0&&(_=g.return),A=g.return;while(A)}return g.tag===3?_:null}function s(A){if(A.tag===13){var g=A.memoizedState;if(g===null&&(A=A.alternate,A!==null&&(g=A.memoizedState)),g!==null)return g.dehydrated}return null}function a(A){if(A.tag===31){var g=A.memoizedState;if(g===null&&(A=A.alternate,A!==null&&(g=A.memoizedState)),g!==null)return g.dehydrated}return null}function c(A){if(o(A)!==A)throw Error(i(188))}function h(A){var g=A.alternate;if(!g){if(g=o(A),g===null)throw Error(i(188));return g!==A?null:A}for(var _=A,I=g;;){var j=_.return;if(j===null)break;var $=j.alternate;if($===null){if(I=j.return,I!==null){_=I;continue}break}if(j.child===$.child){for($=j.child;$;){if($===_)return c(j),A;if($===I)return c(j),g;$=$.sibling}throw Error(i(188))}if(_.return!==I.return)_=j,I=$;else{for(var Ce=!1,Ye=j.child;Ye;){if(Ye===_){Ce=!0,_=j,I=$;break}if(Ye===I){Ce=!0,I=j,_=$;break}Ye=Ye.sibling}if(!Ce){for(Ye=$.child;Ye;){if(Ye===_){Ce=!0,_=$,I=j;break}if(Ye===I){Ce=!0,I=$,_=j;break}Ye=Ye.sibling}if(!Ce)throw Error(i(189))}}if(_.alternate!==I)throw Error(i(190))}if(_.tag!==3)throw Error(i(188));return _.stateNode.current===_?A:g}function m(A){var g=A.tag;if(g===5||g===26||g===27||g===6)return A;for(A=A.child;A!==null;){if(g=m(A),g!==null)return g;A=A.sibling}return null}var v=Object.assign,x=Symbol.for("react.element"),E=Symbol.for("react.transitional.element"),D=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),F=Symbol.for("react.strict_mode"),W=Symbol.for("react.profiler"),q=Symbol.for("react.consumer"),V=Symbol.for("react.context"),H=Symbol.for("react.forward_ref"),X=Symbol.for("react.suspense"),Z=Symbol.for("react.suspense_list"),G=Symbol.for("react.memo"),oe=Symbol.for("react.lazy"),ue=Symbol.for("react.activity"),xe=Symbol.for("react.memo_cache_sentinel"),me=Symbol.iterator;function Ie(A){return A===null||typeof A!="object"?null:(A=me&&A[me]||A["@@iterator"],typeof A=="function"?A:null)}var Me=Symbol.for("react.client.reference");function Te(A){if(A==null)return null;if(typeof A=="function")return A.$$typeof===Me?null:A.displayName||A.name||null;if(typeof A=="string")return A;switch(A){case P:return"Fragment";case W:return"Profiler";case F:return"StrictMode";case X:return"Suspense";case Z:return"SuspenseList";case ue:return"Activity"}if(typeof A=="object")switch(A.$$typeof){case D:return"Portal";case V:return A.displayName||"Context";case q:return(A._context.displayName||"Context")+".Consumer";case H:var g=A.render;return A=A.displayName,A||(A=g.displayName||g.name||"",A=A!==""?"ForwardRef("+A+")":"ForwardRef"),A;case G:return g=A.displayName||null,g!==null?g:Te(A.type)||"Memo";case oe:g=A._payload,A=A._init;try{return Te(A(g))}catch{}}return null}var je=Array.isArray,Ee=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,qe=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,At={pending:!1,data:null,method:null,action:null},gt=[],Le=-1;function Re(A){return{current:A}}function Ge(A){0>Le||(A.current=gt[Le],gt[Le]=null,Le--)}function De(A,g){Le++,gt[Le]=A.current,A.current=g}var _t=Re(null),at=Re(null),Tt=Re(null),Kt=Re(null);function Ke(A,g){switch(De(Tt,g),De(at,A),De(_t,null),g.nodeType){case 9:case 11:A=(A=g.documentElement)&&(A=A.namespaceURI)?Mg(A):0;break;default:if(A=g.tagName,g=g.namespaceURI)g=Mg(g),A=Yc(g,A);else switch(A){case"svg":A=1;break;case"math":A=2;break;default:A=0}}Ge(_t),De(_t,A)}function Oe(){Ge(_t),Ge(at),Ge(Tt)}function Be(A){A.memoizedState!==null&&De(Kt,A);var g=_t.current,_=Yc(g,A.type);g!==_&&(De(at,A),De(_t,_))}function Ve(A){at.current===A&&(Ge(_t),Ge(at)),Kt.current===A&&(Ge(Kt),pt._currentValue=At)}var yt,ft;function Ct(A){if(yt===void 0)try{throw Error()}catch(_){var g=_.stack.trim().match(/\n( *(at )?)/);yt=g&&g[1]||"",ft=-1<_.stack.indexOf(`
    at`)?" (<anonymous>)":-1<_.stack.indexOf("@")?"@unknown:0:0":""}return`
`+yt+A+ft}var Lt=!1;function kt(A,g){if(!A||Lt)return"";Lt=!0;var _=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var I={DetermineComponentFrameRoot:function(){try{if(g){var yn=function(){throw Error()};if(Object.defineProperty(yn.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(yn,[])}catch(on){var Xt=on}Reflect.construct(A,[],yn)}else{try{yn.call()}catch(on){Xt=on}A.call(yn.prototype)}}else{try{throw Error()}catch(on){Xt=on}(yn=A())&&typeof yn.catch=="function"&&yn.catch(function(){})}}catch(on){if(on&&Xt&&typeof on.stack=="string")return[on.stack,Xt.stack]}return[null,null]}};I.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var j=Object.getOwnPropertyDescriptor(I.DetermineComponentFrameRoot,"name");j&&j.configurable&&Object.defineProperty(I.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var $=I.DetermineComponentFrameRoot(),Ce=$[0],Ye=$[1];if(Ce&&Ye){var vt=Ce.split(`
`),Vt=Ye.split(`
`);for(j=I=0;I<vt.length&&!vt[I].includes("DetermineComponentFrameRoot");)I++;for(;j<Vt.length&&!Vt[j].includes("DetermineComponentFrameRoot");)j++;if(I===vt.length||j===Vt.length)for(I=vt.length-1,j=Vt.length-1;1<=I&&0<=j&&vt[I]!==Vt[j];)j--;for(;1<=I&&0<=j;I--,j--)if(vt[I]!==Vt[j]){if(I!==1||j!==1)do if(I--,j--,0>j||vt[I]!==Vt[j]){var cn=`
`+vt[I].replace(" at new "," at ");return A.displayName&&cn.includes("<anonymous>")&&(cn=cn.replace("<anonymous>",A.displayName)),cn}while(1<=I&&0<=j);break}}}finally{Lt=!1,Error.prepareStackTrace=_}return(_=A?A.displayName||A.name:"")?Ct(_):""}function an(A,g){switch(A.tag){case 26:case 27:case 5:return Ct(A.type);case 16:return Ct("Lazy");case 13:return A.child!==g&&g!==null?Ct("Suspense Fallback"):Ct("Suspense");case 19:return Ct("SuspenseList");case 0:case 15:return kt(A.type,!1);case 11:return kt(A.type.render,!1);case 1:return kt(A.type,!0);case 31:return Ct("Activity");default:return""}}function Hn(A){try{var g="",_=null;do g+=an(A,_),_=A,A=A.return;while(A);return g}catch(I){return`
Error generating stack: `+I.message+`
`+I.stack}}var Wn=Object.prototype.hasOwnProperty,_i=n.unstable_scheduleCallback,Ln=n.unstable_cancelCallback,Un=n.unstable_shouldYield,xn=n.unstable_requestPaint,Zn=n.unstable_now,Rn=n.unstable_getCurrentPriorityLevel,Ot=n.unstable_ImmediatePriority,be=n.unstable_UserBlockingPriority,ie=n.unstable_NormalPriority,le=n.unstable_LowPriority,de=n.unstable_IdlePriority,se=n.log,Ae=n.unstable_setDisableYieldValue,ve=null,We=null;function tt(A){if(typeof se=="function"&&Ae(A),We&&typeof We.setStrictMode=="function")try{We.setStrictMode(ve,A)}catch{}}var Pe=Math.clz32?Math.clz32:ot,Xe=Math.log,y=Math.LN2;function ot(A){return A>>>=0,A===0?32:31-(Xe(A)/y|0)|0}var Dt=256,xt=262144,tn=4194304;function dt(A){var g=A&42;if(g!==0)return g;switch(A&-A){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return A&261888;case 262144:case 524288:case 1048576:case 2097152:return A&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return A&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return A}}function Xn(A,g,_){var I=A.pendingLanes;if(I===0)return 0;var j=0,$=A.suspendedLanes,Ce=A.pingedLanes;A=A.warmLanes;var Ye=I&134217727;return Ye!==0?(I=Ye&~$,I!==0?j=dt(I):(Ce&=Ye,Ce!==0?j=dt(Ce):_||(_=Ye&~A,_!==0&&(j=dt(_))))):(Ye=I&~$,Ye!==0?j=dt(Ye):Ce!==0?j=dt(Ce):_||(_=I&~A,_!==0&&(j=dt(_)))),j===0?0:g!==0&&g!==j&&(g&$)===0&&($=j&-j,_=g&-g,$>=_||$===32&&(_&4194048)!==0)?g:j}function yi(A,g){return(A.pendingLanes&~(A.suspendedLanes&~A.pingedLanes)&g)===0}function Dn(A,g){switch(A){case 1:case 2:case 4:case 8:case 64:return g+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Fn(){var A=tn;return tn<<=1,(tn&62914560)===0&&(tn=4194304),A}function vi(A){for(var g=[],_=0;31>_;_++)g.push(A);return g}function Zi(A,g){A.pendingLanes|=g,g!==268435456&&(A.suspendedLanes=0,A.pingedLanes=0,A.warmLanes=0)}function Ki(A,g,_,I,j,$){var Ce=A.pendingLanes;A.pendingLanes=_,A.suspendedLanes=0,A.pingedLanes=0,A.warmLanes=0,A.expiredLanes&=_,A.entangledLanes&=_,A.errorRecoveryDisabledLanes&=_,A.shellSuspendCounter=0;var Ye=A.entanglements,vt=A.expirationTimes,Vt=A.hiddenUpdates;for(_=Ce&~_;0<_;){var cn=31-Pe(_),yn=1<<cn;Ye[cn]=0,vt[cn]=-1;var Xt=Vt[cn];if(Xt!==null)for(Vt[cn]=null,cn=0;cn<Xt.length;cn++){var on=Xt[cn];on!==null&&(on.lane&=-536870913)}_&=~yn}I!==0&&Ji(A,I,0),$!==0&&j===0&&A.tag!==0&&(A.suspendedLanes|=$&~(Ce&~g))}function Ji(A,g,_){A.pendingLanes|=g,A.suspendedLanes&=~g;var I=31-Pe(g);A.entangledLanes|=g,A.entanglements[I]=A.entanglements[I]|1073741824|_&261930}function ki(A,g){var _=A.entangledLanes|=g;for(A=A.entanglements;_;){var I=31-Pe(_),j=1<<I;j&g|A[I]&g&&(A[I]|=g),_&=~j}}function Ri(A,g){var _=g&-g;return _=(_&42)!==0?1:pr(_),(_&(A.suspendedLanes|g))!==0?0:_}function pr(A){switch(A){case 2:A=1;break;case 8:A=4;break;case 32:A=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:A=128;break;case 268435456:A=134217728;break;default:A=0}return A}function rn(A){return A&=-A,2<A?8<A?(A&134217727)!==0?32:268435456:8:2}function Li(){var A=qe.p;return A!==0?A:(A=window.event,A===void 0?32:Fs(A.type))}function $o(A,g){var _=qe.p;try{return qe.p=A,g()}finally{qe.p=_}}var Ws=Math.random().toString(36).slice(2),Ur="__reactFiber$"+Ws,pn="__reactProps$"+Ws,zi="__reactContainer$"+Ws,oi="__reactEvents$"+Ws,wl="__reactListeners$"+Ws,nA="__reactHandles$"+Ws,nu="__reactResources$"+Ws,qi="__reactMarker$"+Ws;function tc(A){delete A[Ur],delete A[pn],delete A[oi],delete A[wl],delete A[nA]}function no(A){var g=A[Ur];if(g)return g;for(var _=A.parentNode;_;){if(g=_[zi]||_[Ur]){if(_=g.alternate,g.child!==null||_!==null&&_.child!==null)for(A=Vv(A);A!==null;){if(_=A[Ur])return _;A=Vv(A)}return g}A=_,_=A.parentNode}return null}function Ls(A){if(A=A[Ur]||A[zi]){var g=A.tag;if(g===5||g===6||g===13||g===31||g===26||g===27||g===3)return A}return null}function rl(A){var g=A.tag;if(g===5||g===26||g===27||g===6)return A.stateNode;throw Error(i(33))}function Ya(A){var g=A[nu];return g||(g=A[nu]={hoistableStyles:new Map,hoistableScripts:new Map}),g}function Io(A){A[qi]=!0}var iA=new Set,Uo={};function Lr(A,g){fa(A,g),fa(A+"Capture",g)}function fa(A,g){for(Uo[A]=g,A=0;A<g.length;A++)iA.add(g[A])}var Ho=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ko={},Iu={};function iu(A){return Wn.call(Iu,A)?!0:Wn.call(Ko,A)?!1:Ho.test(A)?Iu[A]=!0:(Ko[A]=!0,!1)}function ru(A,g,_){if(iu(g))if(_===null)A.removeAttribute(g);else{switch(typeof _){case"undefined":case"function":case"symbol":A.removeAttribute(g);return;case"boolean":var I=g.toLowerCase().slice(0,5);if(I!=="data-"&&I!=="aria-"){A.removeAttribute(g);return}}A.setAttribute(g,""+_)}}function nc(A,g,_){if(_===null)A.removeAttribute(g);else{switch(typeof _){case"undefined":case"function":case"symbol":case"boolean":A.removeAttribute(g);return}A.setAttribute(g,""+_)}}function Sl(A,g,_,I){if(I===null)A.removeAttribute(_);else{switch(typeof I){case"undefined":case"function":case"symbol":case"boolean":A.removeAttribute(_);return}A.setAttributeNS(g,_,""+I)}}function ko(A){switch(typeof A){case"bigint":case"boolean":case"number":case"string":case"undefined":return A;case"object":return A;default:return""}}function ku(A){var g=A.type;return(A=A.nodeName)&&A.toLowerCase()==="input"&&(g==="checkbox"||g==="radio")}function ou(A,g,_){var I=Object.getOwnPropertyDescriptor(A.constructor.prototype,g);if(!A.hasOwnProperty(g)&&typeof I<"u"&&typeof I.get=="function"&&typeof I.set=="function"){var j=I.get,$=I.set;return Object.defineProperty(A,g,{configurable:!0,get:function(){return j.call(this)},set:function(Ce){_=""+Ce,$.call(this,Ce)}}),Object.defineProperty(A,g,{enumerable:I.enumerable}),{getValue:function(){return _},setValue:function(Ce){_=""+Ce},stopTracking:function(){A._valueTracker=null,delete A[g]}}}}function ic(A){if(!A._valueTracker){var g=ku(A)?"checked":"value";A._valueTracker=ou(A,g,""+A[g])}}function rc(A){if(!A)return!1;var g=A._valueTracker;if(!g)return!0;var _=g.getValue(),I="";return A&&(I=ku(A)?A.checked?"true":"false":A.value),A=I,A!==_?(g.setValue(A),!0):!1}function kc(A){if(A=A||(typeof document<"u"?document:void 0),typeof A>"u")return null;try{return A.activeElement||A.body}catch{return A.body}}var Lh=/[\n"\\]/g;function pa(A){return A.replace(Lh,function(g){return"\\"+g.charCodeAt(0).toString(16)+" "})}function Tc(A,g,_,I,j,$,Ce,Ye){A.name="",Ce!=null&&typeof Ce!="function"&&typeof Ce!="symbol"&&typeof Ce!="boolean"?A.type=Ce:A.removeAttribute("type"),g!=null?Ce==="number"?(g===0&&A.value===""||A.value!=g)&&(A.value=""+ko(g)):A.value!==""+ko(g)&&(A.value=""+ko(g)):Ce!=="submit"&&Ce!=="reset"||A.removeAttribute("value"),g!=null?rA(A,Ce,ko(g)):_!=null?rA(A,Ce,ko(_)):I!=null&&A.removeAttribute("value"),j==null&&$!=null&&(A.defaultChecked=!!$),j!=null&&(A.checked=j&&typeof j!="function"&&typeof j!="symbol"),Ye!=null&&typeof Ye!="function"&&typeof Ye!="symbol"&&typeof Ye!="boolean"?A.name=""+ko(Ye):A.removeAttribute("name")}function Tu(A,g,_,I,j,$,Ce,Ye){if($!=null&&typeof $!="function"&&typeof $!="symbol"&&typeof $!="boolean"&&(A.type=$),g!=null||_!=null){if(!($!=="submit"&&$!=="reset"||g!=null)){ic(A);return}_=_!=null?""+ko(_):"",g=g!=null?""+ko(g):_,Ye||g===A.value||(A.value=g),A.defaultValue=g}I=I??j,I=typeof I!="function"&&typeof I!="symbol"&&!!I,A.checked=Ye?A.checked:!!I,A.defaultChecked=!!I,Ce!=null&&typeof Ce!="function"&&typeof Ce!="symbol"&&typeof Ce!="boolean"&&(A.name=Ce),ic(A)}function rA(A,g,_){g==="number"&&kc(A.ownerDocument)===A||A.defaultValue===""+_||(A.defaultValue=""+_)}function Ll(A,g,_,I){if(A=A.options,g){g={};for(var j=0;j<_.length;j++)g["$"+_[j]]=!0;for(_=0;_<A.length;_++)j=g.hasOwnProperty("$"+A[_].value),A[_].selected!==j&&(A[_].selected=j),j&&I&&(A[_].defaultSelected=!0)}else{for(_=""+ko(_),g=null,j=0;j<A.length;j++){if(A[j].value===_){A[j].selected=!0,I&&(A[j].defaultSelected=!0);return}g!==null||A[j].disabled||(g=A[j])}g!==null&&(g.selected=!0)}}function qa(A,g,_){if(g!=null&&(g=""+ko(g),g!==A.value&&(A.value=g),_==null)){A.defaultValue!==g&&(A.defaultValue=g);return}A.defaultValue=_!=null?""+ko(_):""}function Ss(A,g,_,I){if(g==null){if(I!=null){if(_!=null)throw Error(i(92));if(je(I)){if(1<I.length)throw Error(i(93));I=I[0]}_=I}_==null&&(_=""),g=_}_=ko(g),A.defaultValue=_,I=A.textContent,I===_&&I!==""&&I!==null&&(A.value=I),ic(A)}function Mo(A,g){if(g){var _=A.firstChild;if(_&&_===A.lastChild&&_.nodeType===3){_.nodeValue=g;return}}A.textContent=g}var Va=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ru(A,g,_){var I=g.indexOf("--")===0;_==null||typeof _=="boolean"||_===""?I?A.setProperty(g,""):g==="float"?A.cssFloat="":A[g]="":I?A.setProperty(g,_):typeof _!="number"||_===0||Va.has(g)?g==="float"?A.cssFloat=_:A[g]=(""+_).trim():A[g]=_+"px"}function Qs(A,g,_){if(g!=null&&typeof g!="object")throw Error(i(62));if(A=A.style,_!=null){for(var I in _)!_.hasOwnProperty(I)||g!=null&&g.hasOwnProperty(I)||(I.indexOf("--")===0?A.setProperty(I,""):I==="float"?A.cssFloat="":A[I]="");for(var j in g)I=g[j],g.hasOwnProperty(j)&&_[j]!==I&&Ru(A,j,I)}else for(var $ in g)g.hasOwnProperty($)&&Ru(A,$,g[$])}function _A(A){if(A.indexOf("-")===-1)return!1;switch(A){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fl=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Du=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Fi(A){return Du.test(""+A)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":A}function Vi(){}var Co=null;function Ia(A){return A=A.target||A.srcElement||window,A.correspondingUseElement&&(A=A.correspondingUseElement),A.nodeType===3?A.parentNode:A}var is=null,go=null;function ms(A){var g=Ls(A);if(g&&(A=g.stateNode)){var _=A[pn]||null;e:switch(A=g.stateNode,g.type){case"input":if(Tc(A,_.value,_.defaultValue,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name),g=_.name,_.type==="radio"&&g!=null){for(_=A;_.parentNode;)_=_.parentNode;for(_=_.querySelectorAll('input[name="'+pa(""+g)+'"][type="radio"]'),g=0;g<_.length;g++){var I=_[g];if(I!==A&&I.form===A.form){var j=I[pn]||null;if(!j)throw Error(i(90));Tc(I,j.value,j.defaultValue,j.defaultValue,j.checked,j.defaultChecked,j.type,j.name)}}for(g=0;g<_.length;g++)I=_[g],I.form===A.form&&rc(I)}break e;case"textarea":qa(A,_.value,_.defaultValue);break e;case"select":g=_.value,g!=null&&Ll(A,!!_.multiple,g,!1)}}}var uo=!1;function yo(A,g,_){if(uo)return A(g,_);uo=!0;try{var I=A(g);return I}finally{if(uo=!1,(is!==null||go!==null)&&(X1(),is&&(g=is,A=go,go=is=null,ms(g),A)))for(g=0;g<A.length;g++)ms(A[g])}}function zl(A,g){var _=A.stateNode;if(_===null)return null;var I=_[pn]||null;if(I===null)return null;_=I[g];e:switch(g){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(I=!I.disabled)||(A=A.type,I=!(A==="button"||A==="input"||A==="select"||A==="textarea")),A=!I;break e;default:A=!1}if(A)return null;if(_&&typeof _!="function")throw Error(i(231,g,typeof _));return _}var vo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Es=!1;if(vo)try{var co={};Object.defineProperty(co,"passive",{get:function(){Es=!0}}),window.addEventListener("test",co,co),window.removeEventListener("test",co,co)}catch{Es=!1}var ka=null,Ta=null,Ni=null;function Fr(){if(Ni)return Ni;var A,g=Ta,_=g.length,I,j="value"in ka?ka.value:ka.textContent,$=j.length;for(A=0;A<_&&g[A]===j[A];A++);var Ce=_-A;for(I=1;I<=Ce&&g[_-I]===j[$-I];I++);return Ni=j.slice(A,1<I?1-I:void 0)}function J(A){var g=A.keyCode;return"charCode"in A?(A=A.charCode,A===0&&g===13&&(A=13)):A=g,A===10&&(A=13),32<=A||A===13?A:0}function ye(){return!0}function Ne(){return!1}function St(A){function g(_,I,j,$,Ce){this._reactName=_,this._targetInst=j,this.type=I,this.nativeEvent=$,this.target=Ce,this.currentTarget=null;for(var Ye in A)A.hasOwnProperty(Ye)&&(_=A[Ye],this[Ye]=_?_($):$[Ye]);return this.isDefaultPrevented=($.defaultPrevented!=null?$.defaultPrevented:$.returnValue===!1)?ye:Ne,this.isPropagationStopped=Ne,this}return v(g.prototype,{preventDefault:function(){this.defaultPrevented=!0;var _=this.nativeEvent;_&&(_.preventDefault?_.preventDefault():typeof _.returnValue!="unknown"&&(_.returnValue=!1),this.isDefaultPrevented=ye)},stopPropagation:function(){var _=this.nativeEvent;_&&(_.stopPropagation?_.stopPropagation():typeof _.cancelBubble!="unknown"&&(_.cancelBubble=!0),this.isPropagationStopped=ye)},persist:function(){},isPersistent:ye}),g}var fn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(A){return A.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nn=St(fn),xi=v({},fn,{view:0,detail:0}),Gn=St(xi),Ei,li,Ar,Gr=v({},xi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cf,button:0,buttons:0,relatedTarget:function(A){return A.relatedTarget===void 0?A.fromElement===A.srcElement?A.toElement:A.fromElement:A.relatedTarget},movementX:function(A){return"movementX"in A?A.movementX:(A!==Ar&&(Ar&&A.type==="mousemove"?(Ei=A.screenX-Ar.screenX,li=A.screenY-Ar.screenY):li=Ei=0,Ar=A),Ei)},movementY:function(A){return"movementY"in A?A.movementY:li}}),mr=St(Gr),hr=v({},Gr,{dataTransfer:0}),Hr=St(hr),Ys=v({},xi,{relatedTarget:0}),Zo=St(Ys),qs=v({},fn,{animationName:0,elapsedTime:0,pseudoElement:0}),su=St(qs),Lo=v({},fn,{clipboardData:function(A){return"clipboardData"in A?A.clipboardData:window.clipboardData}}),rs=St(Lo),S1=v({},fn,{data:0}),jl=St(S1),wo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ap={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$a={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Fh(A){var g=this.nativeEvent;return g.getModifierState?g.getModifierState(A):(A=$a[A])?!!g[A]:!1}function Cf(){return Fh}var To=v({},xi,{key:function(A){if(A.key){var g=wo[A.key]||A.key;if(g!=="Unidentified")return g}return A.type==="keypress"?(A=J(A),A===13?"Enter":String.fromCharCode(A)):A.type==="keydown"||A.type==="keyup"?Ap[A.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cf,charCode:function(A){return A.type==="keypress"?J(A):0},keyCode:function(A){return A.type==="keydown"||A.type==="keyup"?A.keyCode:0},which:function(A){return A.type==="keypress"?J(A):A.type==="keydown"||A.type==="keyup"?A.keyCode:0}}),Nl=St(To),hp=v({},Gr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),E1=St(hp),Dm=v({},xi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cf}),Pm=St(Dm),Um=v({},fn,{propertyName:0,elapsedTime:0,pseudoElement:0}),oA=St(Um),_f=v({},Gr,{deltaX:function(A){return"deltaX"in A?A.deltaX:"wheelDeltaX"in A?-A.wheelDeltaX:0},deltaY:function(A){return"deltaY"in A?A.deltaY:"wheelDeltaY"in A?-A.wheelDeltaY:"wheelDelta"in A?-A.wheelDelta:0},deltaZ:0,deltaMode:0}),sh=St(_f),ah=v({},fn,{newState:0,oldState:0}),dp=St(ah),Km=[9,13,27,32],oc=vo&&"CompositionEvent"in window,Bd=null;vo&&"documentMode"in document&&(Bd=document.documentMode);var fp=vo&&"TextEvent"in window&&!Bd,xA=vo&&(!oc||Bd&&8<Bd&&11>=Bd),xf=" ",pp=!1;function zh(A,g){switch(A){case"keyup":return Km.indexOf(g.keyCode)!==-1;case"keydown":return g.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function B1(A){return A=A.detail,typeof A=="object"&&"data"in A?A.data:null}var sc=!1;function ac(A,g){switch(A){case"compositionend":return B1(g);case"keypress":return g.which!==32?null:(pp=!0,xf);case"textInput":return A=g.data,A===xf&&pp?null:A;default:return null}}function Lm(A,g){if(sc)return A==="compositionend"||!oc&&zh(A,g)?(A=Fr(),Ni=Ta=ka=null,sc=!1,A):null;switch(A){case"paste":return null;case"keypress":if(!(g.ctrlKey||g.altKey||g.metaKey)||g.ctrlKey&&g.altKey){if(g.char&&1<g.char.length)return g.char;if(g.which)return String.fromCharCode(g.which)}return null;case"compositionend":return xA&&g.locale!=="ko"?null:g.data;default:return null}}var mp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fm(A){var g=A&&A.nodeName&&A.nodeName.toLowerCase();return g==="input"?!!mp[A.type]:g==="textarea"}function gp(A,g,_,I){is?go?go.push(I):go=[I]:is=I,g=vg(g,"onChange"),0<g.length&&(_=new nn("onChange","change",null,_,I),A.push({event:_,listeners:g}))}var Od=null,Id=null;function m0(A){IC(A,0)}function yp(A){var g=rl(A);if(rc(g))return A}function jh(A,g){if(A==="change")return g}var Nh=!1;if(vo){var zm;if(vo){var MA="oninput"in document;if(!MA){var jm=document.createElement("div");jm.setAttribute("oninput","return;"),MA=typeof jm.oninput=="function"}zm=MA}else zm=!1;Nh=zm&&(!document.documentMode||9<document.documentMode)}function Mf(){Od&&(Od.detachEvent("onpropertychange",lh),Id=Od=null)}function lh(A){if(A.propertyName==="value"&&yp(Id)){var g=[];gp(g,Id,A,Ia(A)),yo(m0,g)}}function Nm(A,g,_){A==="focusin"?(Mf(),Od=g,Id=_,Od.attachEvent("onpropertychange",lh)):A==="focusout"&&Mf()}function Gm(A){if(A==="selectionchange"||A==="keyup"||A==="keydown")return yp(Id)}function g0(A,g){if(A==="click")return yp(g)}function O1(A,g){if(A==="input"||A==="change")return yp(g)}function Gh(A,g){return A===g&&(A!==0||1/A===1/g)||A!==A&&g!==g}var Bs=typeof Object.is=="function"?Object.is:Gh;function wA(A,g){if(Bs(A,g))return!0;if(typeof A!="object"||A===null||typeof g!="object"||g===null)return!1;var _=Object.keys(A),I=Object.keys(g);if(_.length!==I.length)return!1;for(I=0;I<_.length;I++){var j=_[I];if(!Wn.call(g,j)||!Bs(A[j],g[j]))return!1}return!0}function SA(A){for(;A&&A.firstChild;)A=A.firstChild;return A}function Wm(A,g){var _=SA(A);A=0;for(var I;_;){if(_.nodeType===3){if(I=A+_.textContent.length,A<=g&&I>=g)return{node:_,offset:g-A};A=I}e:{for(;_;){if(_.nextSibling){_=_.nextSibling;break e}_=_.parentNode}_=void 0}_=SA(_)}}function Qm(A,g){return A&&g?A===g?!0:A&&A.nodeType===3?!1:g&&g.nodeType===3?Qm(A,g.parentNode):"contains"in A?A.contains(g):A.compareDocumentPosition?!!(A.compareDocumentPosition(g)&16):!1:!1}function vp(A){A=A!=null&&A.ownerDocument!=null&&A.ownerDocument.defaultView!=null?A.ownerDocument.defaultView:window;for(var g=kc(A.document);g instanceof A.HTMLIFrameElement;){try{var _=typeof g.contentWindow.location.href=="string"}catch{_=!1}if(_)A=g.contentWindow;else break;g=kc(A.document)}return g}function Ym(A){var g=A&&A.nodeName&&A.nodeName.toLowerCase();return g&&(g==="input"&&(A.type==="text"||A.type==="search"||A.type==="tel"||A.type==="url"||A.type==="password")||g==="textarea"||A.contentEditable==="true")}var Wh=vo&&"documentMode"in document&&11>=document.documentMode,Rt=null,ln=null,Pt=null,Ai=!1;function gr(A,g,_){var I=_.window===_?_.document:_.nodeType===9?_:_.ownerDocument;Ai||Rt==null||Rt!==kc(I)||(I=Rt,"selectionStart"in I&&Ym(I)?I={start:I.selectionStart,end:I.selectionEnd}:(I=(I.ownerDocument&&I.ownerDocument.defaultView||window).getSelection(),I={anchorNode:I.anchorNode,anchorOffset:I.anchorOffset,focusNode:I.focusNode,focusOffset:I.focusOffset}),Pt&&wA(Pt,I)||(Pt=I,I=vg(ln,"onSelect"),0<I.length&&(g=new nn("onSelect","select",null,g,_),A.push({event:g,listeners:I}),g.target=Rt)))}function Wr(A,g){var _={};return _[A.toLowerCase()]=g.toLowerCase(),_["Webkit"+A]="webkit"+g,_["Moz"+A]="moz"+g,_}var Os={animationend:Wr("Animation","AnimationEnd"),animationiteration:Wr("Animation","AnimationIteration"),animationstart:Wr("Animation","AnimationStart"),transitionrun:Wr("Transition","TransitionRun"),transitionstart:Wr("Transition","TransitionStart"),transitioncancel:Wr("Transition","TransitionCancel"),transitionend:Wr("Transition","TransitionEnd")},Fo={},bp={};vo&&(bp=document.createElement("div").style,"AnimationEvent"in window||(delete Os.animationend.animation,delete Os.animationiteration.animation,delete Os.animationstart.animation),"TransitionEvent"in window||delete Os.transitionend.transition);function EA(A){if(Fo[A])return Fo[A];if(!Os[A])return A;var g=Os[A],_;for(_ in g)if(g.hasOwnProperty(_)&&_ in bp)return Fo[A]=g[_];return A}var Gl=EA("animationend"),Qh=EA("animationiteration"),qm=EA("animationstart"),Rc=EA("transitionrun"),Yh=EA("transitionstart"),uh=EA("transitioncancel"),Br=EA("transitionend"),y0=new Map,Cp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Cp.push("scrollEnd");function Wl(A,g){y0.set(A,g),Lr(g,[A])}var BA=typeof reportError=="function"?reportError:function(A){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var g=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof A=="object"&&A!==null&&typeof A.message=="string"?String(A.message):String(A),error:A});if(!window.dispatchEvent(g))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",A);return}console.error(A)},au=[],ch=0,OA=0;function Pu(){for(var A=ch,g=OA=ch=0;g<A;){var _=au[g];au[g++]=null;var I=au[g];au[g++]=null;var j=au[g];au[g++]=null;var $=au[g];if(au[g++]=null,I!==null&&j!==null){var Ce=I.pending;Ce===null?j.next=j:(j.next=Ce.next,Ce.next=j),I.pending=j}$!==0&&Vm(_,j,$)}}function qh(A,g,_,I){au[ch++]=A,au[ch++]=g,au[ch++]=_,au[ch++]=I,OA|=I,A.lanes|=I,A=A.alternate,A!==null&&(A.lanes|=I)}function Ah(A,g,_,I){return qh(A,g,_,I),kd(A)}function lu(A,g){return qh(A,null,null,g),kd(A)}function Vm(A,g,_){A.lanes|=_;var I=A.alternate;I!==null&&(I.lanes|=_);for(var j=!1,$=A.return;$!==null;)$.childLanes|=_,I=$.alternate,I!==null&&(I.childLanes|=_),$.tag===22&&(A=$.stateNode,A===null||A._visibility&1||(j=!0)),A=$,$=$.return;return A.tag===3?($=A.stateNode,j&&g!==null&&(j=31-Pe(_),A=$.hiddenUpdates,I=A[j],I===null?A[j]=[g]:I.push(g),g.lane=_|536870912),$):null}function kd(A){if(50<qd)throw qd=0,Ua=null,Error(i(185));for(var g=A.return;g!==null;)A=g,g=A.return;return A.tag===3?A.stateNode:null}var sr={};function _p(A,g,_,I){this.tag=A,this.key=_,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=g,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=I,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function El(A,g,_,I){return new _p(A,g,_,I)}function IA(A){return A=A.prototype,!(!A||!A.isReactComponent)}function ol(A,g){var _=A.alternate;return _===null?(_=El(A.tag,g,A.key,A.mode),_.elementType=A.elementType,_.type=A.type,_.stateNode=A.stateNode,_.alternate=A,A.alternate=_):(_.pendingProps=g,_.type=A.type,_.flags=0,_.subtreeFlags=0,_.deletions=null),_.flags=A.flags&65011712,_.childLanes=A.childLanes,_.lanes=A.lanes,_.child=A.child,_.memoizedProps=A.memoizedProps,_.memoizedState=A.memoizedState,_.updateQueue=A.updateQueue,g=A.dependencies,_.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext},_.sibling=A.sibling,_.index=A.index,_.ref=A.ref,_.refCleanup=A.refCleanup,_}function I1(A,g){A.flags&=65011714;var _=A.alternate;return _===null?(A.childLanes=0,A.lanes=g,A.child=null,A.subtreeFlags=0,A.memoizedProps=null,A.memoizedState=null,A.updateQueue=null,A.dependencies=null,A.stateNode=null):(A.childLanes=_.childLanes,A.lanes=_.lanes,A.child=_.child,A.subtreeFlags=0,A.deletions=null,A.memoizedProps=_.memoizedProps,A.memoizedState=_.memoizedState,A.updateQueue=_.updateQueue,A.type=_.type,g=_.dependencies,A.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext}),A}function $m(A,g,_,I,j,$){var Ce=0;if(I=A,typeof A=="function")IA(A)&&(Ce=1);else if(typeof A=="string")Ce=ce(A,_,_t.current)?26:A==="html"||A==="head"||A==="body"?27:5;else e:switch(A){case ue:return A=El(31,_,g,j),A.elementType=ue,A.lanes=$,A;case P:return Vh(_.children,j,$,g);case F:Ce=8,j|=24;break;case W:return A=El(12,_,g,j|2),A.elementType=W,A.lanes=$,A;case X:return A=El(13,_,g,j),A.elementType=X,A.lanes=$,A;case Z:return A=El(19,_,g,j),A.elementType=Z,A.lanes=$,A;default:if(typeof A=="object"&&A!==null)switch(A.$$typeof){case V:Ce=10;break e;case q:Ce=9;break e;case H:Ce=11;break e;case G:Ce=14;break e;case oe:Ce=16,I=null;break e}Ce=29,_=Error(i(130,A===null?"null":typeof A,"")),I=null}return g=El(Ce,_,g,j),g.elementType=A,g.type=I,g.lanes=$,g}function Vh(A,g,_,I){return A=El(7,A,I,g),A.lanes=_,A}function Td(A,g,_){return A=El(6,A,null,g),A.lanes=_,A}function Rd(A){var g=El(18,null,null,0);return g.stateNode=A,g}function $h(A,g,_){return g=El(4,A.children!==null?A.children:[],A.key,g),g.lanes=_,g.stateNode={containerInfo:A.containerInfo,pendingChildren:null,implementation:A.implementation},g}var Hh=new WeakMap;function Bl(A,g){if(typeof A=="object"&&A!==null){var _=Hh.get(A);return _!==void 0?_:(g={value:A,source:g,stack:Hn(g)},Hh.set(A,g),g)}return{value:A,source:g,stack:Hn(g)}}var Zh=[],Dd=0,Is=null,Vs=0,uu=[],sl=0,Dc=null,kA=1,Ql="";function Uu(A,g){Zh[Dd++]=Vs,Zh[Dd++]=Is,Is=A,Vs=g}function wf(A,g,_){uu[sl++]=kA,uu[sl++]=Ql,uu[sl++]=Dc,Dc=A;var I=kA;A=Ql;var j=32-Pe(I)-1;I&=~(1<<j),_+=1;var $=32-Pe(g)+j;if(30<$){var Ce=j-j%5;$=(I&(1<<Ce)-1).toString(32),I>>=Ce,j-=Ce,kA=1<<32-Pe(g)+j|_<<j|I,Ql=$+A}else kA=1<<$|_<<j|I,Ql=A}function Pc(A){A.return!==null&&(Uu(A,1),wf(A,1,0))}function hh(A){for(;A===Is;)Is=Zh[--Dd],Zh[Dd]=null,Vs=Zh[--Dd],Zh[Dd]=null;for(;A===Dc;)Dc=uu[--sl],uu[sl]=null,Ql=uu[--sl],uu[sl]=null,kA=uu[--sl],uu[sl]=null}function Pd(A,g){uu[sl++]=kA,uu[sl++]=Ql,uu[sl++]=Dc,kA=g.id,Ql=g.overflow,Dc=A}var ma=null,bo=null,zr=!1,dh=null,cu=!1,gs=Error(i(519));function Yl(A){var g=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw RA(Bl(g,A)),gs}function al(A){var g=A.stateNode,_=A.type,I=A.memoizedProps;switch(g[Ur]=A,g[pn]=I,_){case"dialog":so("cancel",g),so("close",g);break;case"iframe":case"object":case"embed":so("load",g);break;case"video":case"audio":for(_=0;_<j0.length;_++)so(j0[_],g);break;case"source":so("error",g);break;case"img":case"image":case"link":so("error",g),so("load",g);break;case"details":so("toggle",g);break;case"input":so("invalid",g),Tu(g,I.value,I.defaultValue,I.checked,I.defaultChecked,I.type,I.name,!0);break;case"select":so("invalid",g);break;case"textarea":so("invalid",g),Ss(g,I.value,I.defaultValue,I.children)}_=I.children,typeof _!="string"&&typeof _!="number"&&typeof _!="bigint"||g.textContent===""+_||I.suppressHydrationWarning===!0||Qv(g.textContent,_)?(I.popover!=null&&(so("beforetoggle",g),so("toggle",g)),I.onScroll!=null&&so("scroll",g),I.onScrollEnd!=null&&so("scrollend",g),I.onClick!=null&&(g.onclick=Vi),g=!0):g=!1,g||Yl(A,!0)}function sA(A){for(ma=A.return;ma;)switch(ma.tag){case 5:case 31:case 13:cu=!1;return;case 27:case 3:cu=!0;return;default:ma=ma.return}}function TA(A){if(A!==ma)return!1;if(!zr)return sA(A),zr=!0,!1;var g=A.tag,_;if((_=g!==3&&g!==27)&&((_=g===5)&&(_=A.type,_=!(_!=="form"&&_!=="button")||$d(A.type,A.memoizedProps)),_=!_),_&&bo&&Yl(A),sA(A),g===13){if(A=A.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(i(317));bo=dy(A)}else if(g===31){if(A=A.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(i(317));bo=dy(A)}else g===27?(g=bo,ur(A.type)?(A=ml,ml=null,bo=A):bo=g):bo=ma?_u(A.stateNode.nextSibling):null;return!0}function Qe(){bo=ma=null,zr=!1}function lc(){var A=dh;return A!==null&&(Nu===null?Nu=A:Nu.push.apply(Nu,A),dh=null),A}function RA(A){dh===null?dh=[A]:dh.push(A)}var ll=Re(null),br=null,aA=null;function DA(A,g,_){De(ll,g._currentValue),g._currentValue=_}function uc(A){A._currentValue=ll.current,Ge(ll)}function PA(A,g,_){for(;A!==null;){var I=A.alternate;if((A.childLanes&g)!==g?(A.childLanes|=g,I!==null&&(I.childLanes|=g)):I!==null&&(I.childLanes&g)!==g&&(I.childLanes|=g),A===_)break;A=A.return}}function xp(A,g,_,I){var j=A.child;for(j!==null&&(j.return=A);j!==null;){var $=j.dependencies;if($!==null){var Ce=j.child;$=$.firstContext;e:for(;$!==null;){var Ye=$;$=j;for(var vt=0;vt<g.length;vt++)if(Ye.context===g[vt]){$.lanes|=_,Ye=$.alternate,Ye!==null&&(Ye.lanes|=_),PA($.return,_,A),I||(Ce=null);break e}$=Ye.next}}else if(j.tag===18){if(Ce=j.return,Ce===null)throw Error(i(341));Ce.lanes|=_,$=Ce.alternate,$!==null&&($.lanes|=_),PA(Ce,_,A),Ce=null}else Ce=j.child;if(Ce!==null)Ce.return=j;else for(Ce=j;Ce!==null;){if(Ce===A){Ce=null;break}if(j=Ce.sibling,j!==null){j.return=Ce.return,Ce=j;break}Ce=Ce.return}j=Ce}}function cc(A,g,_,I){A=null;for(var j=g,$=!1;j!==null;){if(!$){if((j.flags&524288)!==0)$=!0;else if((j.flags&262144)!==0)break}if(j.tag===10){var Ce=j.alternate;if(Ce===null)throw Error(i(387));if(Ce=Ce.memoizedProps,Ce!==null){var Ye=j.type;Bs(j.pendingProps.value,Ce.value)||(A!==null?A.push(Ye):A=[Ye])}}else if(j===Kt.current){if(Ce=j.alternate,Ce===null)throw Error(i(387));Ce.memoizedState.memoizedState!==j.memoizedState.memoizedState&&(A!==null?A.push(pt):A=[pt])}j=j.return}A!==null&&xp(g,A,_,I),g.flags|=262144}function Mp(A){for(A=A.firstContext;A!==null;){if(!Bs(A.context._currentValue,A.memoizedValue))return!0;A=A.next}return!1}function fh(A){br=A,aA=null,A=A.dependencies,A!==null&&(A.firstContext=null)}function Ha(A){return v0(br,A)}function Ol(A,g){return br===null&&fh(A),v0(A,g)}function v0(A,g){var _=g._currentValue;if(g={context:g,memoizedValue:_,next:null},aA===null){if(A===null)throw Error(i(308));aA=g,A.dependencies={lanes:0,firstContext:g},A.flags|=524288}else aA=aA.next=g;return _}var k1=typeof AbortController<"u"?AbortController:function(){var A=[],g=this.signal={aborted:!1,addEventListener:function(_,I){A.push(I)}};this.abort=function(){g.aborted=!0,A.forEach(function(_){return _()})}},T1=n.unstable_scheduleCallback,R1=n.unstable_NormalPriority,$s={$$typeof:V,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Uc(){return{controller:new k1,data:new Map,refCount:0}}function Ra(A){A.refCount--,A.refCount===0&&T1(R1,function(){A.controller.abort()})}var Za=null,ql=0,Da=0,Ud=null;function Kc(A,g){if(Za===null){var _=Za=[];ql=0,Da=Cc(),Ud={status:"pending",value:void 0,then:function(I){_.push(I)}}}return ql++,g.then(D1,D1),g}function D1(){if(--ql===0&&Za!==null){Ud!==null&&(Ud.status="fulfilled");var A=Za;Za=null,Da=0,Ud=null;for(var g=0;g<A.length;g++)(0,A[g])()}}function wp(A,g){var _=[],I={status:"pending",value:null,reason:null,then:function(j){_.push(j)}};return A.then(function(){I.status="fulfilled",I.value=g;for(var j=0;j<_.length;j++)(0,_[j])(g)},function(j){for(I.status="rejected",I.reason=j,j=0;j<_.length;j++)(0,_[j])(void 0)}),I}var Ac=Ee.S;Ee.S=function(A,g){Ov=Zn(),typeof g=="object"&&g!==null&&typeof g.then=="function"&&Kc(A,g),Ac!==null&&Ac(A,g)};var ph=Re(null);function Hm(){var A=ph.current;return A!==null?A:Go.pooledCache}function UA(A,g){g===null?De(ph,ph.current):De(ph,g.pool)}function KA(){var A=Hm();return A===null?null:{parent:$s._currentValue,pool:A}}var Qn=Error(i(460)),Sp=Error(i(474)),Kd=Error(i(542)),Ep={then:function(){}};function LA(A){return A=A.status,A==="fulfilled"||A==="rejected"}function Xh(A,g,_){switch(_=A[_],_===void 0?A.push(g):_!==g&&(g.then(Vi,Vi),g=_),g.status){case"fulfilled":return g.value;case"rejected":throw A=g.reason,Bp(A),A;default:if(typeof g.status=="string")g.then(Vi,Vi);else{if(A=Go,A!==null&&100<A.shellSuspendCounter)throw Error(i(482));A=g,A.status="pending",A.then(function(I){if(g.status==="pending"){var j=g;j.status="fulfilled",j.value=I}},function(I){if(g.status==="pending"){var j=g;j.status="rejected",j.reason=I}})}switch(g.status){case"fulfilled":return g.value;case"rejected":throw A=g.reason,Bp(A),A}throw er=g,Qn}}function hc(A){try{var g=A._init;return g(A._payload)}catch(_){throw _!==null&&typeof _=="object"&&typeof _.then=="function"?(er=_,Qn):_}}var er=null;function Zm(){if(er===null)throw Error(i(459));var A=er;return er=null,A}function Bp(A){if(A===Qn||A===Kd)throw Error(i(483))}var lA=null,Ku=0;function Ld(A){var g=Ku;return Ku+=1,lA===null&&(lA=[]),Xh(lA,A,g)}function dc(A,g){g=g.props.ref,A.ref=g!==void 0?g:null}function ul(A,g){throw g.$$typeof===x?Error(i(525)):(A=Object.prototype.toString.call(g),Error(i(31,A==="[object Object]"?"object with keys {"+Object.keys(g).join(", ")+"}":A)))}function Op(A){function g(Ut,It){if(A){var Wt=Ut.deletions;Wt===null?(Ut.deletions=[It],Ut.flags|=16):Wt.push(It)}}function _(Ut,It){if(!A)return null;for(;It!==null;)g(Ut,It),It=It.sibling;return null}function I(Ut){for(var It=new Map;Ut!==null;)Ut.key!==null?It.set(Ut.key,Ut):It.set(Ut.index,Ut),Ut=Ut.sibling;return It}function j(Ut,It){return Ut=ol(Ut,It),Ut.index=0,Ut.sibling=null,Ut}function $(Ut,It,Wt){return Ut.index=Wt,A?(Wt=Ut.alternate,Wt!==null?(Wt=Wt.index,Wt<It?(Ut.flags|=67108866,It):Wt):(Ut.flags|=67108866,It)):(Ut.flags|=1048576,It)}function Ce(Ut){return A&&Ut.alternate===null&&(Ut.flags|=67108866),Ut}function Ye(Ut,It,Wt,hn){return It===null||It.tag!==6?(It=Td(Wt,Ut.mode,hn),It.return=Ut,It):(It=j(It,Wt),It.return=Ut,It)}function vt(Ut,It,Wt,hn){var $i=Wt.type;return $i===P?cn(Ut,It,Wt.props.children,hn,Wt.key):It!==null&&(It.elementType===$i||typeof $i=="object"&&$i!==null&&$i.$$typeof===oe&&hc($i)===It.type)?(It=j(It,Wt.props),dc(It,Wt),It.return=Ut,It):(It=$m(Wt.type,Wt.key,Wt.props,null,Ut.mode,hn),dc(It,Wt),It.return=Ut,It)}function Vt(Ut,It,Wt,hn){return It===null||It.tag!==4||It.stateNode.containerInfo!==Wt.containerInfo||It.stateNode.implementation!==Wt.implementation?(It=$h(Wt,Ut.mode,hn),It.return=Ut,It):(It=j(It,Wt.children||[]),It.return=Ut,It)}function cn(Ut,It,Wt,hn,$i){return It===null||It.tag!==7?(It=Vh(Wt,Ut.mode,hn,$i),It.return=Ut,It):(It=j(It,Wt),It.return=Ut,It)}function yn(Ut,It,Wt){if(typeof It=="string"&&It!==""||typeof It=="number"||typeof It=="bigint")return It=Td(""+It,Ut.mode,Wt),It.return=Ut,It;if(typeof It=="object"&&It!==null){switch(It.$$typeof){case E:return Wt=$m(It.type,It.key,It.props,null,Ut.mode,Wt),dc(Wt,It),Wt.return=Ut,Wt;case D:return It=$h(It,Ut.mode,Wt),It.return=Ut,It;case oe:return It=hc(It),yn(Ut,It,Wt)}if(je(It)||Ie(It))return It=Vh(It,Ut.mode,Wt,null),It.return=Ut,It;if(typeof It.then=="function")return yn(Ut,Ld(It),Wt);if(It.$$typeof===V)return yn(Ut,Ol(Ut,It),Wt);ul(Ut,It)}return null}function Xt(Ut,It,Wt,hn){var $i=It!==null?It.key:null;if(typeof Wt=="string"&&Wt!==""||typeof Wt=="number"||typeof Wt=="bigint")return $i!==null?null:Ye(Ut,It,""+Wt,hn);if(typeof Wt=="object"&&Wt!==null){switch(Wt.$$typeof){case E:return Wt.key===$i?vt(Ut,It,Wt,hn):null;case D:return Wt.key===$i?Vt(Ut,It,Wt,hn):null;case oe:return Wt=hc(Wt),Xt(Ut,It,Wt,hn)}if(je(Wt)||Ie(Wt))return $i!==null?null:cn(Ut,It,Wt,hn,null);if(typeof Wt.then=="function")return Xt(Ut,It,Ld(Wt),hn);if(Wt.$$typeof===V)return Xt(Ut,It,Ol(Ut,Wt),hn);ul(Ut,Wt)}return null}function on(Ut,It,Wt,hn,$i){if(typeof hn=="string"&&hn!==""||typeof hn=="number"||typeof hn=="bigint")return Ut=Ut.get(Wt)||null,Ye(It,Ut,""+hn,$i);if(typeof hn=="object"&&hn!==null){switch(hn.$$typeof){case E:return Ut=Ut.get(hn.key===null?Wt:hn.key)||null,vt(It,Ut,hn,$i);case D:return Ut=Ut.get(hn.key===null?Wt:hn.key)||null,Vt(It,Ut,hn,$i);case oe:return hn=hc(hn),on(Ut,It,Wt,hn,$i)}if(je(hn)||Ie(hn))return Ut=Ut.get(Wt)||null,cn(It,Ut,hn,$i,null);if(typeof hn.then=="function")return on(Ut,It,Wt,Ld(hn),$i);if(hn.$$typeof===V)return on(Ut,It,Wt,Ol(It,hn),$i);ul(It,hn)}return null}function Ii(Ut,It,Wt,hn){for(var $i=null,Do=null,Di=It,Kr=It=0,ir=null;Di!==null&&Kr<Wt.length;Kr++){Di.index>Kr?(ir=Di,Di=null):ir=Di.sibling;var Sr=Xt(Ut,Di,Wt[Kr],hn);if(Sr===null){Di===null&&(Di=ir);break}A&&Di&&Sr.alternate===null&&g(Ut,Di),It=$(Sr,It,Kr),Do===null?$i=Sr:Do.sibling=Sr,Do=Sr,Di=ir}if(Kr===Wt.length)return _(Ut,Di),zr&&Uu(Ut,Kr),$i;if(Di===null){for(;Kr<Wt.length;Kr++)Di=yn(Ut,Wt[Kr],hn),Di!==null&&(It=$(Di,It,Kr),Do===null?$i=Di:Do.sibling=Di,Do=Di);return zr&&Uu(Ut,Kr),$i}for(Di=I(Di);Kr<Wt.length;Kr++)ir=on(Di,Ut,Kr,Wt[Kr],hn),ir!==null&&(A&&ir.alternate!==null&&Di.delete(ir.key===null?Kr:ir.key),It=$(ir,It,Kr),Do===null?$i=ir:Do.sibling=ir,Do=ir);return A&&Di.forEach(function(Vc){return g(Ut,Vc)}),zr&&Uu(Ut,Kr),$i}function rr(Ut,It,Wt,hn){if(Wt==null)throw Error(i(151));for(var $i=null,Do=null,Di=It,Kr=It=0,ir=null,Sr=Wt.next();Di!==null&&!Sr.done;Kr++,Sr=Wt.next()){Di.index>Kr?(ir=Di,Di=null):ir=Di.sibling;var Vc=Xt(Ut,Di,Sr.value,hn);if(Vc===null){Di===null&&(Di=ir);break}A&&Di&&Vc.alternate===null&&g(Ut,Di),It=$(Vc,It,Kr),Do===null?$i=Vc:Do.sibling=Vc,Do=Vc,Di=ir}if(Sr.done)return _(Ut,Di),zr&&Uu(Ut,Kr),$i;if(Di===null){for(;!Sr.done;Kr++,Sr=Wt.next())Sr=yn(Ut,Sr.value,hn),Sr!==null&&(It=$(Sr,It,Kr),Do===null?$i=Sr:Do.sibling=Sr,Do=Sr);return zr&&Uu(Ut,Kr),$i}for(Di=I(Di);!Sr.done;Kr++,Sr=Wt.next())Sr=on(Di,Ut,Kr,Sr.value,hn),Sr!==null&&(A&&Sr.alternate!==null&&Di.delete(Sr.key===null?Kr:Sr.key),It=$(Sr,It,Kr),Do===null?$i=Sr:Do.sibling=Sr,Do=Sr);return A&&Di.forEach(function(Eh){return g(Ut,Eh)}),zr&&Uu(Ut,Kr),$i}function xs(Ut,It,Wt,hn){if(typeof Wt=="object"&&Wt!==null&&Wt.type===P&&Wt.key===null&&(Wt=Wt.props.children),typeof Wt=="object"&&Wt!==null){switch(Wt.$$typeof){case E:e:{for(var $i=Wt.key;It!==null;){if(It.key===$i){if($i=Wt.type,$i===P){if(It.tag===7){_(Ut,It.sibling),hn=j(It,Wt.props.children),hn.return=Ut,Ut=hn;break e}}else if(It.elementType===$i||typeof $i=="object"&&$i!==null&&$i.$$typeof===oe&&hc($i)===It.type){_(Ut,It.sibling),hn=j(It,Wt.props),dc(hn,Wt),hn.return=Ut,Ut=hn;break e}_(Ut,It);break}else g(Ut,It);It=It.sibling}Wt.type===P?(hn=Vh(Wt.props.children,Ut.mode,hn,Wt.key),hn.return=Ut,Ut=hn):(hn=$m(Wt.type,Wt.key,Wt.props,null,Ut.mode,hn),dc(hn,Wt),hn.return=Ut,Ut=hn)}return Ce(Ut);case D:e:{for($i=Wt.key;It!==null;){if(It.key===$i)if(It.tag===4&&It.stateNode.containerInfo===Wt.containerInfo&&It.stateNode.implementation===Wt.implementation){_(Ut,It.sibling),hn=j(It,Wt.children||[]),hn.return=Ut,Ut=hn;break e}else{_(Ut,It);break}else g(Ut,It);It=It.sibling}hn=$h(Wt,Ut.mode,hn),hn.return=Ut,Ut=hn}return Ce(Ut);case oe:return Wt=hc(Wt),xs(Ut,It,Wt,hn)}if(je(Wt))return Ii(Ut,It,Wt,hn);if(Ie(Wt)){if($i=Ie(Wt),typeof $i!="function")throw Error(i(150));return Wt=$i.call(Wt),rr(Ut,It,Wt,hn)}if(typeof Wt.then=="function")return xs(Ut,It,Ld(Wt),hn);if(Wt.$$typeof===V)return xs(Ut,It,Ol(Ut,Wt),hn);ul(Ut,Wt)}return typeof Wt=="string"&&Wt!==""||typeof Wt=="number"||typeof Wt=="bigint"?(Wt=""+Wt,It!==null&&It.tag===6?(_(Ut,It.sibling),hn=j(It,Wt),hn.return=Ut,Ut=hn):(_(Ut,It),hn=Td(Wt,Ut.mode,hn),hn.return=Ut,Ut=hn),Ce(Ut)):_(Ut,It)}return function(Ut,It,Wt,hn){try{Ku=0;var $i=xs(Ut,It,Wt,hn);return lA=null,$i}catch(Di){if(Di===Qn||Di===Kd)throw Di;var Do=El(29,Di,null,Ut.mode);return Do.lanes=hn,Do.return=Ut,Do}finally{}}}var mh=Op(!0),Xm=Op(!1),fc=!1;function FA(A){A.updateQueue={baseState:A.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Lc(A,g){A=A.updateQueue,g.updateQueue===A&&(g.updateQueue={baseState:A.baseState,firstBaseUpdate:A.firstBaseUpdate,lastBaseUpdate:A.lastBaseUpdate,shared:A.shared,callbacks:null})}function io(A){return{lane:A,tag:0,payload:null,callback:null,next:null}}function Fc(A,g,_){var I=A.updateQueue;if(I===null)return null;if(I=I.shared,(So&2)!==0){var j=I.pending;return j===null?g.next=g:(g.next=j.next,j.next=g),I.pending=g,g=kd(A),Vm(A,null,_),g}return qh(A,I,g,_),kd(A)}function gh(A,g,_){if(g=g.updateQueue,g!==null&&(g=g.shared,(_&4194048)!==0)){var I=g.lanes;I&=A.pendingLanes,_|=I,g.lanes=_,ki(A,_)}}function Sf(A,g){var _=A.updateQueue,I=A.alternate;if(I!==null&&(I=I.updateQueue,_===I)){var j=null,$=null;if(_=_.firstBaseUpdate,_!==null){do{var Ce={lane:_.lane,tag:_.tag,payload:_.payload,callback:null,next:null};$===null?j=$=Ce:$=$.next=Ce,_=_.next}while(_!==null);$===null?j=$=g:$=$.next=g}else j=$=g;_={baseState:I.baseState,firstBaseUpdate:j,lastBaseUpdate:$,shared:I.shared,callbacks:I.callbacks},A.updateQueue=_;return}A=_.lastBaseUpdate,A===null?_.firstBaseUpdate=g:A.next=g,_.lastBaseUpdate=g}var Pa=!1;function yh(){if(Pa){var A=Ud;if(A!==null)throw A}}function Jh(A,g,_,I){Pa=!1;var j=A.updateQueue;fc=!1;var $=j.firstBaseUpdate,Ce=j.lastBaseUpdate,Ye=j.shared.pending;if(Ye!==null){j.shared.pending=null;var vt=Ye,Vt=vt.next;vt.next=null,Ce===null?$=Vt:Ce.next=Vt,Ce=vt;var cn=A.alternate;cn!==null&&(cn=cn.updateQueue,Ye=cn.lastBaseUpdate,Ye!==Ce&&(Ye===null?cn.firstBaseUpdate=Vt:Ye.next=Vt,cn.lastBaseUpdate=vt))}if($!==null){var yn=j.baseState;Ce=0,cn=Vt=vt=null,Ye=$;do{var Xt=Ye.lane&-536870913,on=Xt!==Ye.lane;if(on?(Ao&Xt)===Xt:(I&Xt)===Xt){Xt!==0&&Xt===Da&&(Pa=!0),cn!==null&&(cn=cn.next={lane:0,tag:Ye.tag,payload:Ye.payload,callback:null,next:null});e:{var Ii=A,rr=Ye;Xt=g;var xs=_;switch(rr.tag){case 1:if(Ii=rr.payload,typeof Ii=="function"){yn=Ii.call(xs,yn,Xt);break e}yn=Ii;break e;case 3:Ii.flags=Ii.flags&-65537|128;case 0:if(Ii=rr.payload,Xt=typeof Ii=="function"?Ii.call(xs,yn,Xt):Ii,Xt==null)break e;yn=v({},yn,Xt);break e;case 2:fc=!0}}Xt=Ye.callback,Xt!==null&&(A.flags|=64,on&&(A.flags|=8192),on=j.callbacks,on===null?j.callbacks=[Xt]:on.push(Xt))}else on={lane:Xt,tag:Ye.tag,payload:Ye.payload,callback:Ye.callback,next:null},cn===null?(Vt=cn=on,vt=yn):cn=cn.next=on,Ce|=Xt;if(Ye=Ye.next,Ye===null){if(Ye=j.shared.pending,Ye===null)break;on=Ye,Ye=on.next,on.next=null,j.lastBaseUpdate=on,j.shared.pending=null}}while(!0);cn===null&&(vt=yn),j.baseState=vt,j.firstBaseUpdate=Vt,j.lastBaseUpdate=cn,$===null&&(j.shared.lanes=0),Df|=Ce,A.lanes=Ce,A.memoizedState=yn}}function zc(A,g){if(typeof A!="function")throw Error(i(191,A));A.call(g)}function Lu(A,g){var _=A.callbacks;if(_!==null)for(A.callbacks=null,A=0;A<_.length;A++)zc(_[A],g)}var Au=Re(null),ni=Re(0);function Ti(A,g){A=yc,De(ni,A),De(Au,g),yc=A|g.baseLanes}function ga(){De(ni,yc),De(Au,Au.current)}function Ef(){yc=ni.current,Ge(Au),Ge(ni)}var Il=Re(null),os=null;function zA(A){var g=A.alternate;De(ya,ya.current&1),De(Il,A),os===null&&(g===null||Au.current!==null||g.memoizedState!==null)&&(os=A)}function hu(A){De(ya,ya.current),De(Il,A),os===null&&(os=A)}function b0(A){A.tag===22?(De(ya,ya.current),De(Il,A),os===null&&(os=A)):jc()}function jc(){De(ya,ya.current),De(Il,Il.current)}function Fu(A){Ge(Il),os===A&&(os=null),Ge(ya)}var ya=Re(0);function pc(A){for(var g=A;g!==null;){if(g.tag===13){var _=g.memoizedState;if(_!==null&&(_=_.dehydrated,_===null||hy(_)||wg(_)))return g}else if(g.tag===19&&(g.memoizedProps.revealOrder==="forwards"||g.memoizedProps.revealOrder==="backwards"||g.memoizedProps.revealOrder==="unstable_legacy-backwards"||g.memoizedProps.revealOrder==="together")){if((g.flags&128)!==0)return g}else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===A)break;for(;g.sibling===null;){if(g.return===null||g.return===A)return null;g=g.return}g.sibling.return=g.return,g=g.sibling}return null}var Zr=0,Bi=null,zo=null,ss=null,ed=!1,td=!1,du=!1,Fd=0,Nc=0,uA=null,Ip=0;function ys(){throw Error(i(321))}function vh(A,g){if(g===null)return!1;for(var _=0;_<g.length&&_<A.length;_++)if(!Bs(A[_],g[_]))return!1;return!0}function jA(A,g,_,I,j,$){return Zr=$,Bi=g,g.memoizedState=null,g.updateQueue=null,g.lanes=0,Ee.H=A===null||A.memoizedState===null?C0:Rp,du=!1,$=_(I,j),du=!1,td&&($=nd(g,_,I,j)),kp(A),$}function kp(A){Ee.H=Ch;var g=zo!==null&&zo.next!==null;if(Zr=0,ss=zo=Bi=null,ed=!1,Nc=0,uA=null,g)throw Error(i(300));A===null||Js||(A=A.dependencies,A!==null&&Mp(A)&&(Js=!0))}function nd(A,g,_,I){Bi=A;var j=0;do{if(td&&(uA=null),Nc=0,td=!1,25<=j)throw Error(i(301));if(j+=1,ss=zo=null,A.updateQueue!=null){var $=A.updateQueue;$.lastEffect=null,$.events=null,$.stores=null,$.memoCache!=null&&($.memoCache.index=0)}Ee.H=AA,$=g(_,I)}while(td);return $}function zd(){var A=Ee.H,g=A.useState()[0];return g=typeof g.then=="function"?p(g):g,A=A.useState()[0],(zo!==null?zo.memoizedState:null)!==A&&(Bi.flags|=1024),g}function Bf(){var A=Fd!==0;return Fd=0,A}function jd(A,g,_){g.updateQueue=A.updateQueue,g.flags&=-2053,A.lanes&=~_}function Of(A){if(ed){for(A=A.memoizedState;A!==null;){var g=A.queue;g!==null&&(g.pending=null),A=A.next}ed=!1}Zr=0,ss=zo=Bi=null,td=!1,Nc=Fd=0,uA=null}function cl(){var A={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ss===null?Bi.memoizedState=ss=A:ss=ss.next=A,ss}function B(){if(zo===null){var A=Bi.alternate;A=A!==null?A.memoizedState:null}else A=zo.next;var g=ss===null?Bi.memoizedState:ss.next;if(g!==null)ss=g,zo=A;else{if(A===null)throw Bi.alternate===null?Error(i(467)):Error(i(310));zo=A,A={memoizedState:zo.memoizedState,baseState:zo.baseState,baseQueue:zo.baseQueue,queue:zo.queue,next:null},ss===null?Bi.memoizedState=ss=A:ss=ss.next=A}return ss}function l(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function p(A){var g=Nc;return Nc+=1,uA===null&&(uA=[]),A=Xh(uA,A,g),g=Bi,(ss===null?g.memoizedState:ss.next)===null&&(g=g.alternate,Ee.H=g===null||g.memoizedState===null?C0:Rp),A}function C(A){if(A!==null&&typeof A=="object"){if(typeof A.then=="function")return p(A);if(A.$$typeof===V)return Ha(A)}throw Error(i(438,String(A)))}function S(A){var g=null,_=Bi.updateQueue;if(_!==null&&(g=_.memoCache),g==null){var I=Bi.alternate;I!==null&&(I=I.updateQueue,I!==null&&(I=I.memoCache,I!=null&&(g={data:I.data.map(function(j){return j.slice()}),index:0})))}if(g==null&&(g={data:[],index:0}),_===null&&(_=l(),Bi.updateQueue=_),_.memoCache=g,_=g.data[g.index],_===void 0)for(_=g.data[g.index]=Array(A),I=0;I<A;I++)_[I]=xe;return g.index++,_}function O(A,g){return typeof g=="function"?g(A):g}function U(A){var g=B();return N(g,zo,A)}function N(A,g,_){var I=A.queue;if(I===null)throw Error(i(311));I.lastRenderedReducer=_;var j=A.baseQueue,$=I.pending;if($!==null){if(j!==null){var Ce=j.next;j.next=$.next,$.next=Ce}g.baseQueue=j=$,I.pending=null}if($=A.baseState,j===null)A.memoizedState=$;else{g=j.next;var Ye=Ce=null,vt=null,Vt=g,cn=!1;do{var yn=Vt.lane&-536870913;if(yn!==Vt.lane?(Ao&yn)===yn:(Zr&yn)===yn){var Xt=Vt.revertLane;if(Xt===0)vt!==null&&(vt=vt.next={lane:0,revertLane:0,gesture:null,action:Vt.action,hasEagerState:Vt.hasEagerState,eagerState:Vt.eagerState,next:null}),yn===Da&&(cn=!0);else if((Zr&Xt)===Xt){Vt=Vt.next,Xt===Da&&(cn=!0);continue}else yn={lane:0,revertLane:Vt.revertLane,gesture:null,action:Vt.action,hasEagerState:Vt.hasEagerState,eagerState:Vt.eagerState,next:null},vt===null?(Ye=vt=yn,Ce=$):vt=vt.next=yn,Bi.lanes|=Xt,Df|=Xt;yn=Vt.action,du&&_($,yn),$=Vt.hasEagerState?Vt.eagerState:_($,yn)}else Xt={lane:yn,revertLane:Vt.revertLane,gesture:Vt.gesture,action:Vt.action,hasEagerState:Vt.hasEagerState,eagerState:Vt.eagerState,next:null},vt===null?(Ye=vt=Xt,Ce=$):vt=vt.next=Xt,Bi.lanes|=yn,Df|=yn;Vt=Vt.next}while(Vt!==null&&Vt!==g);if(vt===null?Ce=$:vt.next=Ye,!Bs($,A.memoizedState)&&(Js=!0,cn&&(_=Ud,_!==null)))throw _;A.memoizedState=$,A.baseState=Ce,A.baseQueue=vt,I.lastRenderedState=$}return j===null&&(I.lanes=0),[A.memoizedState,I.dispatch]}function Y(A){var g=B(),_=g.queue;if(_===null)throw Error(i(311));_.lastRenderedReducer=A;var I=_.dispatch,j=_.pending,$=g.memoizedState;if(j!==null){_.pending=null;var Ce=j=j.next;do $=A($,Ce.action),Ce=Ce.next;while(Ce!==j);Bs($,g.memoizedState)||(Js=!0),g.memoizedState=$,g.baseQueue===null&&(g.baseState=$),_.lastRenderedState=$}return[$,I]}function re(A,g,_){var I=Bi,j=B(),$=zr;if($){if(_===void 0)throw Error(i(407));_=_()}else _=g();var Ce=!Bs((zo||j).memoizedState,_);if(Ce&&(j.memoizedState=_,Js=!0),j=j.queue,ro(pe.bind(null,I,j,A),[A]),j.getSnapshot!==g||Ce||ss!==null&&ss.memoizedState.tag&1){if(I.flags|=2048,gn(9,{destroy:void 0},ge.bind(null,I,j,_,g),null),Go===null)throw Error(i(349));$||(Zr&127)!==0||ae(I,g,_)}return _}function ae(A,g,_){A.flags|=16384,A={getSnapshot:g,value:_},g=Bi.updateQueue,g===null?(g=l(),Bi.updateQueue=g,g.stores=[A]):(_=g.stores,_===null?g.stores=[A]:_.push(A))}function ge(A,g,_,I){g.value=_,g.getSnapshot=I,we(g)&&Fe(A)}function pe(A,g,_){return _(function(){we(g)&&Fe(A)})}function we(A){var g=A.getSnapshot;A=A.value;try{var _=g();return!Bs(A,_)}catch{return!0}}function Fe(A){var g=lu(A,2);g!==null&&bc(g,A,2)}function He(A){var g=cl();if(typeof A=="function"){var _=A;if(A=_(),du){tt(!0);try{_()}finally{tt(!1)}}}return g.memoizedState=g.baseState=A,g.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:O,lastRenderedState:A},g}function Ze(A,g,_,I){return A.baseState=_,N(A,zo,typeof I=="function"?I:O)}function et(A,g,_,I,j){if(Ro(A))throw Error(i(485));if(A=g.action,A!==null){var $={payload:j,action:A,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Ce){$.listeners.push(Ce)}};Ee.T!==null?_(!0):$.isTransition=!1,I($),_=g.pending,_===null?($.next=g.pending=$,rt(g,$)):($.next=_.next,g.pending=_.next=$)}}function rt(A,g){var _=g.action,I=g.payload,j=A.state;if(g.isTransition){var $=Ee.T,Ce={};Ee.T=Ce;try{var Ye=_(j,I),vt=Ee.S;vt!==null&&vt(Ce,Ye),lt(A,g,Ye)}catch(Vt){ht(A,g,Vt)}finally{$!==null&&Ce.types!==null&&($.types=Ce.types),Ee.T=$}}else try{$=_(j,I),lt(A,g,$)}catch(Vt){ht(A,g,Vt)}}function lt(A,g,_){_!==null&&typeof _=="object"&&typeof _.then=="function"?_.then(function(I){nt(A,g,I)},function(I){return ht(A,g,I)}):nt(A,g,_)}function nt(A,g,_){g.status="fulfilled",g.value=_,bt(g),A.state=_,g=A.pending,g!==null&&(_=g.next,_===g?A.pending=null:(_=_.next,g.next=_,rt(A,_)))}function ht(A,g,_){var I=A.pending;if(A.pending=null,I!==null){I=I.next;do g.status="rejected",g.reason=_,bt(g),g=g.next;while(g!==I)}A.action=null}function bt(A){A=A.listeners;for(var g=0;g<A.length;g++)(0,A[g])()}function st(A,g){return g}function wt(A,g){if(zr){var _=Go.formState;if(_!==null){e:{var I=Bi;if(zr){if(bo){t:{for(var j=bo,$=cu;j.nodeType!==8;){if(!$){j=null;break t}if(j=_u(j.nextSibling),j===null){j=null;break t}}$=j.data,j=$==="F!"||$==="F"?j:null}if(j){bo=_u(j.nextSibling),I=j.data==="F!";break e}}Yl(I)}I=!1}I&&(g=_[0])}}return _=cl(),_.memoizedState=_.baseState=g,I={pending:null,lanes:0,dispatch:null,lastRenderedReducer:st,lastRenderedState:g},_.queue=I,_=Hs.bind(null,Bi,I),I.dispatch=_,I=He(!1),$=Zs.bind(null,Bi,!1,I.queue),I=cl(),j={state:g,dispatch:null,action:A,pending:null},I.queue=j,_=et.bind(null,Bi,j,$,_),j.dispatch=_,I.memoizedState=A,[g,_,!1]}function Yt(A){var g=B();return jt(g,zo,A)}function jt(A,g,_){if(g=N(A,g,st)[0],A=U(O)[0],typeof g=="object"&&g!==null&&typeof g.then=="function")try{var I=p(g)}catch(Ce){throw Ce===Qn?Kd:Ce}else I=g;g=B();var j=g.queue,$=j.dispatch;return _!==g.memoizedState&&(Bi.flags|=2048,gn(9,{destroy:void 0},Nt.bind(null,j,_),null)),[I,$,A]}function Nt(A,g){A.action=g}function qt(A){var g=B(),_=zo;if(_!==null)return jt(g,_,A);B(),g=g.memoizedState,_=B();var I=_.queue.dispatch;return _.memoizedState=A,[g,I,!1]}function gn(A,g,_,I){return A={tag:A,create:_,deps:I,inst:g,next:null},g=Bi.updateQueue,g===null&&(g=l(),Bi.updateQueue=g),_=g.lastEffect,_===null?g.lastEffect=A.next=A:(I=_.next,_.next=A,A.next=I,g.lastEffect=A),A}function In(){return B().memoizedState}function sn(A,g,_,I){var j=cl();Bi.flags|=A,j.memoizedState=gn(1|g,{destroy:void 0},_,I===void 0?null:I)}function ti(A,g,_,I){var j=B();I=I===void 0?null:I;var $=j.memoizedState.inst;zo!==null&&I!==null&&vh(I,zo.memoizedState.deps)?j.memoizedState=gn(g,$,_,I):(Bi.flags|=A,j.memoizedState=gn(1|g,$,_,I))}function nr(A,g){sn(8390656,8,A,g)}function ro(A,g){ti(2048,8,A,g)}function yr(A){Bi.flags|=4;var g=Bi.updateQueue;if(g===null)g=l(),Bi.updateQueue=g,g.events=[A];else{var _=g.events;_===null?g.events=[A]:_.push(A)}}function jo(A){var g=B().memoizedState;return yr({ref:g,nextImpl:A}),function(){if((So&2)!==0)throw Error(i(440));return g.impl.apply(void 0,arguments)}}function ks(A,g){return ti(4,2,A,g)}function No(A,g){return ti(4,4,A,g)}function aa(A,g){if(typeof g=="function"){A=A();var _=g(A);return function(){typeof _=="function"?_():g(null)}}if(g!=null)return A=A(),g.current=A,function(){g.current=null}}function vs(A,g,_){_=_!=null?_.concat([A]):null,ti(4,4,aa.bind(null,g,A),_)}function va(){}function as(A,g){var _=B();g=g===void 0?null:g;var I=_.memoizedState;return g!==null&&vh(g,I[1])?I[0]:(_.memoizedState=[A,g],A)}function oo(A,g){var _=B();g=g===void 0?null:g;var I=_.memoizedState;if(g!==null&&vh(g,I[1]))return I[0];if(I=A(),du){tt(!0);try{A()}finally{tt(!1)}}return _.memoizedState=[I,g],I}function bs(A,g,_){return _===void 0||(Zr&1073741824)!==0&&(Ao&261930)===0?A.memoizedState=g:(A.memoizedState=_,A=kv(),Bi.lanes|=A,Df|=A,_)}function id(A,g,_,I){return Bs(_,g)?_:Au.current!==null?(A=bs(A,_,I),Bs(A,g)||(Js=!0),A):(Zr&42)===0||(Zr&1073741824)!==0&&(Ao&261930)===0?(Js=!0,A.memoizedState=_):(A=kv(),Bi.lanes|=A,Df|=A,g)}function NA(A,g,_,I,j){var $=qe.p;qe.p=$!==0&&8>$?$:8;var Ce=Ee.T,Ye={};Ee.T=Ye,Zs(A,!1,g,_);try{var vt=j(),Vt=Ee.S;if(Vt!==null&&Vt(Ye,vt),vt!==null&&typeof vt=="object"&&typeof vt.then=="function"){var cn=wp(vt,I);ls(A,g,cn,vc(A))}else ls(A,g,I,vc(A))}catch(yn){ls(A,g,{then:function(){},status:"rejected",reason:yn},vc())}finally{qe.p=$,Ce!==null&&Ye.types!==null&&(Ce.types=Ye.types),Ee.T=Ce}}function mc(){}function zu(A,g,_,I){if(A.tag!==5)throw Error(i(476));var j=rd(A).queue;NA(A,j,g,At,_===null?mc:function(){return bh(A),_(I)})}function rd(A){var g=A.memoizedState;if(g!==null)return g;g={memoizedState:At,baseState:At,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:O,lastRenderedState:At},next:null};var _={};return g.next={memoizedState:_,baseState:_,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:O,lastRenderedState:_},next:null},A.memoizedState=g,A=A.alternate,A!==null&&(A.memoizedState=g),g}function bh(A){var g=rd(A);g.next===null&&(g=A.alternate.memoizedState),ls(A,g.next.queue,{},vc())}function Vl(){return Ha(pt)}function kl(){return B().memoizedState}function fu(){return B().memoizedState}function Gc(A){for(var g=A.return;g!==null;){switch(g.tag){case 24:case 3:var _=vc();A=io(_);var I=Fc(g,A,_);I!==null&&(bc(I,g,_),gh(I,g,_)),g={cache:Uc()},A.payload=g;return}g=g.return}}function Tp(A,g,_){var I=vc();_={lane:I,revertLane:0,gesture:null,action:_,hasEagerState:!1,eagerState:null,next:null},Ro(A)?pu(g,_):(_=Ah(A,g,_,I),_!==null&&(bc(_,A,I),cA(_,g,I)))}function Hs(A,g,_){var I=vc();ls(A,g,_,I)}function ls(A,g,_,I){var j={lane:I,revertLane:0,gesture:null,action:_,hasEagerState:!1,eagerState:null,next:null};if(Ro(A))pu(g,j);else{var $=A.alternate;if(A.lanes===0&&($===null||$.lanes===0)&&($=g.lastRenderedReducer,$!==null))try{var Ce=g.lastRenderedState,Ye=$(Ce,_);if(j.hasEagerState=!0,j.eagerState=Ye,Bs(Ye,Ce))return qh(A,g,j,0),Go===null&&Pu(),!1}catch{}finally{}if(_=Ah(A,g,j,I),_!==null)return bc(_,A,I),cA(_,g,I),!0}return!1}function Zs(A,g,_,I){if(I={lane:2,revertLane:Cc(),gesture:null,action:I,hasEagerState:!1,eagerState:null,next:null},Ro(A)){if(g)throw Error(i(479))}else g=Ah(A,_,I,2),g!==null&&bc(g,A,2)}function Ro(A){var g=A.alternate;return A===Bi||g!==null&&g===Bi}function pu(A,g){td=ed=!0;var _=A.pending;_===null?g.next=g:(g.next=_.next,_.next=g),A.pending=g}function cA(A,g,_){if((_&4194048)!==0){var I=g.lanes;I&=A.pendingLanes,_|=I,g.lanes=_,ki(A,_)}}var Ch={readContext:Ha,use:C,useCallback:ys,useContext:ys,useEffect:ys,useImperativeHandle:ys,useLayoutEffect:ys,useInsertionEffect:ys,useMemo:ys,useReducer:ys,useRef:ys,useState:ys,useDebugValue:ys,useDeferredValue:ys,useTransition:ys,useSyncExternalStore:ys,useId:ys,useHostTransitionStatus:ys,useFormState:ys,useActionState:ys,useOptimistic:ys,useMemoCache:ys,useCacheRefresh:ys};Ch.useEffectEvent=ys;var C0={readContext:Ha,use:C,useCallback:function(A,g){return cl().memoizedState=[A,g===void 0?null:g],A},useContext:Ha,useEffect:nr,useImperativeHandle:function(A,g,_){_=_!=null?_.concat([A]):null,sn(4194308,4,aa.bind(null,g,A),_)},useLayoutEffect:function(A,g){return sn(4194308,4,A,g)},useInsertionEffect:function(A,g){sn(4,2,A,g)},useMemo:function(A,g){var _=cl();g=g===void 0?null:g;var I=A();if(du){tt(!0);try{A()}finally{tt(!1)}}return _.memoizedState=[I,g],I},useReducer:function(A,g,_){var I=cl();if(_!==void 0){var j=_(g);if(du){tt(!0);try{_(g)}finally{tt(!1)}}}else j=g;return I.memoizedState=I.baseState=j,A={pending:null,lanes:0,dispatch:null,lastRenderedReducer:A,lastRenderedState:j},I.queue=A,A=A.dispatch=Tp.bind(null,Bi,A),[I.memoizedState,A]},useRef:function(A){var g=cl();return A={current:A},g.memoizedState=A},useState:function(A){A=He(A);var g=A.queue,_=Hs.bind(null,Bi,g);return g.dispatch=_,[A.memoizedState,_]},useDebugValue:va,useDeferredValue:function(A,g){var _=cl();return bs(_,A,g)},useTransition:function(){var A=He(!1);return A=NA.bind(null,Bi,A.queue,!0,!1),cl().memoizedState=A,[!1,A]},useSyncExternalStore:function(A,g,_){var I=Bi,j=cl();if(zr){if(_===void 0)throw Error(i(407));_=_()}else{if(_=g(),Go===null)throw Error(i(349));(Ao&127)!==0||ae(I,g,_)}j.memoizedState=_;var $={value:_,getSnapshot:g};return j.queue=$,nr(pe.bind(null,I,$,A),[A]),I.flags|=2048,gn(9,{destroy:void 0},ge.bind(null,I,$,_,g),null),_},useId:function(){var A=cl(),g=Go.identifierPrefix;if(zr){var _=Ql,I=kA;_=(I&~(1<<32-Pe(I)-1)).toString(32)+_,g="_"+g+"R_"+_,_=Fd++,0<_&&(g+="H"+_.toString(32)),g+="_"}else _=Ip++,g="_"+g+"r_"+_.toString(32)+"_";return A.memoizedState=g},useHostTransitionStatus:Vl,useFormState:wt,useActionState:wt,useOptimistic:function(A){var g=cl();g.memoizedState=g.baseState=A;var _={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return g.queue=_,g=Zs.bind(null,Bi,!0,_),_.dispatch=g,[A,g]},useMemoCache:S,useCacheRefresh:function(){return cl().memoizedState=Gc.bind(null,Bi)},useEffectEvent:function(A){var g=cl(),_={impl:A};return g.memoizedState=_,function(){if((So&2)!==0)throw Error(i(440));return _.impl.apply(void 0,arguments)}}},Rp={readContext:Ha,use:C,useCallback:as,useContext:Ha,useEffect:ro,useImperativeHandle:vs,useInsertionEffect:ks,useLayoutEffect:No,useMemo:oo,useReducer:U,useRef:In,useState:function(){return U(O)},useDebugValue:va,useDeferredValue:function(A,g){var _=B();return id(_,zo.memoizedState,A,g)},useTransition:function(){var A=U(O)[0],g=B().memoizedState;return[typeof A=="boolean"?A:p(A),g]},useSyncExternalStore:re,useId:kl,useHostTransitionStatus:Vl,useFormState:Yt,useActionState:Yt,useOptimistic:function(A,g){var _=B();return Ze(_,zo,A,g)},useMemoCache:S,useCacheRefresh:fu};Rp.useEffectEvent=jo;var AA={readContext:Ha,use:C,useCallback:as,useContext:Ha,useEffect:ro,useImperativeHandle:vs,useInsertionEffect:ks,useLayoutEffect:No,useMemo:oo,useReducer:Y,useRef:In,useState:function(){return Y(O)},useDebugValue:va,useDeferredValue:function(A,g){var _=B();return zo===null?bs(_,A,g):id(_,zo.memoizedState,A,g)},useTransition:function(){var A=Y(O)[0],g=B().memoizedState;return[typeof A=="boolean"?A:p(A),g]},useSyncExternalStore:re,useId:kl,useHostTransitionStatus:Vl,useFormState:qt,useActionState:qt,useOptimistic:function(A,g){var _=B();return zo!==null?Ze(_,zo,A,g):(_.baseState=A,[A,_.queue.dispatch])},useMemoCache:S,useCacheRefresh:fu};AA.useEffectEvent=jo;function GA(A,g,_,I){g=A.memoizedState,_=_(I,g),_=_==null?g:v({},g,_),A.memoizedState=_,A.lanes===0&&(A.updateQueue.baseState=_)}var Nd={enqueueSetState:function(A,g,_){A=A._reactInternals;var I=vc(),j=io(I);j.payload=g,_!=null&&(j.callback=_),g=Fc(A,j,I),g!==null&&(bc(g,A,I),gh(g,A,I))},enqueueReplaceState:function(A,g,_){A=A._reactInternals;var I=vc(),j=io(I);j.tag=1,j.payload=g,_!=null&&(j.callback=_),g=Fc(A,j,I),g!==null&&(bc(g,A,I),gh(g,A,I))},enqueueForceUpdate:function(A,g){A=A._reactInternals;var _=vc(),I=io(_);I.tag=2,g!=null&&(I.callback=g),g=Fc(A,I,_),g!==null&&(bc(g,A,_),gh(g,A,_))}};function Dp(A,g,_,I,j,$,Ce){return A=A.stateNode,typeof A.shouldComponentUpdate=="function"?A.shouldComponentUpdate(I,$,Ce):g.prototype&&g.prototype.isPureReactComponent?!wA(_,I)||!wA(j,$):!0}function Pp(A,g,_,I){A=g.state,typeof g.componentWillReceiveProps=="function"&&g.componentWillReceiveProps(_,I),typeof g.UNSAFE_componentWillReceiveProps=="function"&&g.UNSAFE_componentWillReceiveProps(_,I),g.state!==A&&Nd.enqueueReplaceState(g,g.state,null)}function Xs(A,g){var _=g;if("ref"in g){_={};for(var I in g)I!=="ref"&&(_[I]=g[I])}if(A=A.defaultProps){_===g&&(_=v({},_));for(var j in A)_[j]===void 0&&(_[j]=A[j])}return _}function WA(A){BA(A)}function If(A){console.error(A)}function pC(A){BA(A)}function Up(A,g){try{var _=A.onUncaughtError;_(g.value,{componentStack:g.stack})}catch(I){setTimeout(function(){throw I})}}function fv(A,g,_){try{var I=A.onCaughtError;I(_.value,{componentStack:_.stack,errorBoundary:g.tag===1?g.stateNode:null})}catch(j){setTimeout(function(){throw j})}}function Jm(A,g,_){return _=io(_),_.tag=3,_.payload={element:null},_.callback=function(){Up(A,g)},_}function _h(A){return A=io(A),A.tag=3,A}function P1(A,g,_,I){var j=_.type.getDerivedStateFromError;if(typeof j=="function"){var $=I.value;A.payload=function(){return j($)},A.callback=function(){fv(g,_,I)}}var Ce=_.stateNode;Ce!==null&&typeof Ce.componentDidCatch=="function"&&(A.callback=function(){fv(g,_,I),typeof j!="function"&&(Pf===null?Pf=new Set([this]):Pf.add(this));var Ye=I.stack;this.componentDidCatch(I.value,{componentStack:Ye!==null?Ye:""})})}function _0(A,g,_,I,j){if(_.flags|=32768,I!==null&&typeof I=="object"&&typeof I.then=="function"){if(g=_.alternate,g!==null&&cc(g,_,j,!0),_=Il.current,_!==null){switch(_.tag){case 31:case 13:return os===null?J1():_.alternate===null&&la===0&&(la=3),_.flags&=-257,_.flags|=65536,_.lanes=j,I===Ep?_.flags|=16384:(g=_.updateQueue,g===null?_.updateQueue=new Set([I]):g.add(I),U0(A,I,j)),!1;case 22:return _.flags|=65536,I===Ep?_.flags|=16384:(g=_.updateQueue,g===null?(g={transitions:null,markerInstances:null,retryQueue:new Set([I])},_.updateQueue=g):(_=g.retryQueue,_===null?g.retryQueue=new Set([I]):_.add(I)),U0(A,I,j)),!1}throw Error(i(435,_.tag))}return U0(A,I,j),J1(),!1}if(zr)return g=Il.current,g!==null?((g.flags&65536)===0&&(g.flags|=256),g.flags|=65536,g.lanes=j,I!==gs&&(A=Error(i(422),{cause:I}),RA(Bl(A,_)))):(I!==gs&&(g=Error(i(423),{cause:I}),RA(Bl(g,_))),A=A.current.alternate,A.flags|=65536,j&=-j,A.lanes|=j,I=Bl(I,_),j=Jm(A.stateNode,I,j),Sf(A,j),la!==4&&(la=2)),!1;var $=Error(i(520),{cause:I});if($=Bl($,_),cg===null?cg=[$]:cg.push($),la!==4&&(la=2),g===null)return!0;I=Bl(I,_),_=g;do{switch(_.tag){case 3:return _.flags|=65536,A=j&-j,_.lanes|=A,A=Jm(_.stateNode,I,A),Sf(_,A),!1;case 1:if(g=_.type,$=_.stateNode,(_.flags&128)===0&&(typeof g.getDerivedStateFromError=="function"||$!==null&&typeof $.componentDidCatch=="function"&&(Pf===null||!Pf.has($))))return _.flags|=65536,j&=-j,_.lanes|=j,j=_h(j),P1(j,A,_,I),Sf(_,j),!1}_=_.return}while(_!==null);return!1}var x0=Error(i(461)),Js=!1;function ba(A,g,_,I){g.child=A===null?Xm(g,null,_,I):mh(g,A.child,_,I)}function tr(A,g,_,I,j){_=_.render;var $=g.ref;if("ref"in I){var Ce={};for(var Ye in I)Ye!=="ref"&&(Ce[Ye]=I[Ye])}else Ce=I;return fh(g),I=jA(A,g,_,Ce,$,j),Ye=Bf(),A!==null&&!Js?(jd(A,g,j),xh(A,g,j)):(zr&&Ye&&Pc(g),g.flags|=1,ba(A,g,I,j),g.child)}function od(A,g,_,I,j){if(A===null){var $=_.type;return typeof $=="function"&&!IA($)&&$.defaultProps===void 0&&_.compare===null?(g.tag=15,g.type=$,U1(A,g,$,I,j)):(A=$m(_.type,null,I,g,g.mode,j),A.ref=g.ref,A.return=g,g.child=A)}if($=A.child,!ng(A,j)){var Ce=$.memoizedProps;if(_=_.compare,_=_!==null?_:wA,_(Ce,I)&&A.ref===g.ref)return xh(A,g,j)}return g.flags|=1,A=ol($,I),A.ref=g.ref,A.return=g,g.child=A}function U1(A,g,_,I,j){if(A!==null){var $=A.memoizedProps;if(wA($,I)&&A.ref===g.ref)if(Js=!1,g.pendingProps=I=$,ng(A,j))(A.flags&131072)!==0&&(Js=!0);else return g.lanes=A.lanes,xh(A,g,j)}return w0(A,g,_,I,j)}function hA(A,g,_,I){var j=I.children,$=A!==null?A.memoizedState:null;if(A===null&&g.stateNode===null&&(g.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),I.mode==="hidden"){if((g.flags&128)!==0){if($=$!==null?$.baseLanes|_:_,A!==null){for(I=g.child=A.child,j=0;I!==null;)j=j|I.lanes|I.childLanes,I=I.sibling;I=j&~$}else I=0,g.child=null;return Kp(A,g,$,_,I)}if((_&536870912)!==0)g.memoizedState={baseLanes:0,cachePool:null},A!==null&&UA(g,$!==null?$.cachePool:null),$!==null?Ti(g,$):ga(),b0(g);else return I=g.lanes=536870912,Kp(A,g,$!==null?$.baseLanes|_:_,_,I)}else $!==null?(UA(g,$.cachePool),Ti(g,$),jc(),g.memoizedState=null):(A!==null&&UA(g,null),ga(),jc());return ba(A,g,j,_),g.child}function kf(A,g){return A!==null&&A.tag===22||g.stateNode!==null||(g.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),g.sibling}function Kp(A,g,_,I,j){var $=Hm();return $=$===null?null:{parent:$s._currentValue,pool:$},g.memoizedState={baseLanes:_,cachePool:$},A!==null&&UA(g,null),ga(),b0(g),A!==null&&cc(A,g,I,!0),g.childLanes=j,null}function M0(A,g){return g=eg({mode:g.mode,children:g.children},A.mode),g.ref=A.ref,A.child=g,g.return=A,g}function mu(A,g,_){return mh(g,A.child,null,_),A=M0(g,g.pendingProps),A.flags|=2,Fu(g),g.memoizedState=null,A}function Xx(A,g,_){var I=g.pendingProps,j=(g.flags&128)!==0;if(g.flags&=-129,A===null){if(zr){if(I.mode==="hidden")return A=M0(g,I),g.lanes=536870912,kf(null,A);if(hu(g),(A=bo)?(A=Q0(A,cu),A=A!==null&&A.data==="&"?A:null,A!==null&&(g.memoizedState={dehydrated:A,treeContext:Dc!==null?{id:kA,overflow:Ql}:null,retryLane:536870912,hydrationErrors:null},_=Rd(A),_.return=g,g.child=_,ma=g,bo=null)):A=null,A===null)throw Yl(g);return g.lanes=536870912,null}return M0(g,I)}var $=A.memoizedState;if($!==null){var Ce=$.dehydrated;if(hu(g),j)if(g.flags&256)g.flags&=-257,g=mu(A,g,_);else if(g.memoizedState!==null)g.child=A.child,g.flags|=128,g=null;else throw Error(i(558));else if(Js||cc(A,g,_,!1),j=(_&A.childLanes)!==0,Js||j){if(I=Go,I!==null&&(Ce=Ri(I,_),Ce!==0&&Ce!==$.retryLane))throw $.retryLane=Ce,lu(A,Ce),bc(I,A,Ce),x0;J1(),g=mu(A,g,_)}else A=$.treeContext,bo=_u(Ce.nextSibling),ma=g,zr=!0,dh=null,cu=!1,A!==null&&Pd(g,A),g=M0(g,I),g.flags|=4096;return g}return A=ol(A.child,{mode:I.mode,children:I.children}),A.ref=g.ref,g.child=A,A.return=g,A}function K1(A,g){var _=g.ref;if(_===null)A!==null&&A.ref!==null&&(g.flags|=4194816);else{if(typeof _!="function"&&typeof _!="object")throw Error(i(284));(A===null||A.ref!==_)&&(g.flags|=4194816)}}function w0(A,g,_,I,j){return fh(g),_=jA(A,g,_,I,void 0,j),I=Bf(),A!==null&&!Js?(jd(A,g,j),xh(A,g,j)):(zr&&I&&Pc(g),g.flags|=1,ba(A,g,_,j),g.child)}function L1(A,g,_,I,j,$){return fh(g),g.updateQueue=null,_=nd(g,I,_,j),kp(A),I=Bf(),A!==null&&!Js?(jd(A,g,$),xh(A,g,$)):(zr&&I&&Pc(g),g.flags|=1,ba(A,g,_,$),g.child)}function F1(A,g,_,I,j){if(fh(g),g.stateNode===null){var $=sr,Ce=_.contextType;typeof Ce=="object"&&Ce!==null&&($=Ha(Ce)),$=new _(I,$),g.memoizedState=$.state!==null&&$.state!==void 0?$.state:null,$.updater=Nd,g.stateNode=$,$._reactInternals=g,$=g.stateNode,$.props=I,$.state=g.memoizedState,$.refs={},FA(g),Ce=_.contextType,$.context=typeof Ce=="object"&&Ce!==null?Ha(Ce):sr,$.state=g.memoizedState,Ce=_.getDerivedStateFromProps,typeof Ce=="function"&&(GA(g,_,Ce,I),$.state=g.memoizedState),typeof _.getDerivedStateFromProps=="function"||typeof $.getSnapshotBeforeUpdate=="function"||typeof $.UNSAFE_componentWillMount!="function"&&typeof $.componentWillMount!="function"||(Ce=$.state,typeof $.componentWillMount=="function"&&$.componentWillMount(),typeof $.UNSAFE_componentWillMount=="function"&&$.UNSAFE_componentWillMount(),Ce!==$.state&&Nd.enqueueReplaceState($,$.state,null),Jh(g,I,$,j),yh(),$.state=g.memoizedState),typeof $.componentDidMount=="function"&&(g.flags|=4194308),I=!0}else if(A===null){$=g.stateNode;var Ye=g.memoizedProps,vt=Xs(_,Ye);$.props=vt;var Vt=$.context,cn=_.contextType;Ce=sr,typeof cn=="object"&&cn!==null&&(Ce=Ha(cn));var yn=_.getDerivedStateFromProps;cn=typeof yn=="function"||typeof $.getSnapshotBeforeUpdate=="function",Ye=g.pendingProps!==Ye,cn||typeof $.UNSAFE_componentWillReceiveProps!="function"&&typeof $.componentWillReceiveProps!="function"||(Ye||Vt!==Ce)&&Pp(g,$,I,Ce),fc=!1;var Xt=g.memoizedState;$.state=Xt,Jh(g,I,$,j),yh(),Vt=g.memoizedState,Ye||Xt!==Vt||fc?(typeof yn=="function"&&(GA(g,_,yn,I),Vt=g.memoizedState),(vt=fc||Dp(g,_,vt,I,Xt,Vt,Ce))?(cn||typeof $.UNSAFE_componentWillMount!="function"&&typeof $.componentWillMount!="function"||(typeof $.componentWillMount=="function"&&$.componentWillMount(),typeof $.UNSAFE_componentWillMount=="function"&&$.UNSAFE_componentWillMount()),typeof $.componentDidMount=="function"&&(g.flags|=4194308)):(typeof $.componentDidMount=="function"&&(g.flags|=4194308),g.memoizedProps=I,g.memoizedState=Vt),$.props=I,$.state=Vt,$.context=Ce,I=vt):(typeof $.componentDidMount=="function"&&(g.flags|=4194308),I=!1)}else{$=g.stateNode,Lc(A,g),Ce=g.memoizedProps,cn=Xs(_,Ce),$.props=cn,yn=g.pendingProps,Xt=$.context,Vt=_.contextType,vt=sr,typeof Vt=="object"&&Vt!==null&&(vt=Ha(Vt)),Ye=_.getDerivedStateFromProps,(Vt=typeof Ye=="function"||typeof $.getSnapshotBeforeUpdate=="function")||typeof $.UNSAFE_componentWillReceiveProps!="function"&&typeof $.componentWillReceiveProps!="function"||(Ce!==yn||Xt!==vt)&&Pp(g,$,I,vt),fc=!1,Xt=g.memoizedState,$.state=Xt,Jh(g,I,$,j),yh();var on=g.memoizedState;Ce!==yn||Xt!==on||fc||A!==null&&A.dependencies!==null&&Mp(A.dependencies)?(typeof Ye=="function"&&(GA(g,_,Ye,I),on=g.memoizedState),(cn=fc||Dp(g,_,cn,I,Xt,on,vt)||A!==null&&A.dependencies!==null&&Mp(A.dependencies))?(Vt||typeof $.UNSAFE_componentWillUpdate!="function"&&typeof $.componentWillUpdate!="function"||(typeof $.componentWillUpdate=="function"&&$.componentWillUpdate(I,on,vt),typeof $.UNSAFE_componentWillUpdate=="function"&&$.UNSAFE_componentWillUpdate(I,on,vt)),typeof $.componentDidUpdate=="function"&&(g.flags|=4),typeof $.getSnapshotBeforeUpdate=="function"&&(g.flags|=1024)):(typeof $.componentDidUpdate!="function"||Ce===A.memoizedProps&&Xt===A.memoizedState||(g.flags|=4),typeof $.getSnapshotBeforeUpdate!="function"||Ce===A.memoizedProps&&Xt===A.memoizedState||(g.flags|=1024),g.memoizedProps=I,g.memoizedState=on),$.props=I,$.state=on,$.context=vt,I=cn):(typeof $.componentDidUpdate!="function"||Ce===A.memoizedProps&&Xt===A.memoizedState||(g.flags|=4),typeof $.getSnapshotBeforeUpdate!="function"||Ce===A.memoizedProps&&Xt===A.memoizedState||(g.flags|=1024),I=!1)}return $=I,K1(A,g),I=(g.flags&128)!==0,$||I?($=g.stateNode,_=I&&typeof _.getDerivedStateFromError!="function"?null:$.render(),g.flags|=1,A!==null&&I?(g.child=mh(g,A.child,null,j),g.child=mh(g,null,_,j)):ba(A,g,_,j),g.memoizedState=$.state,A=g.child):A=xh(A,g,j),A}function pv(A,g,_,I){return Qe(),g.flags|=256,ba(A,g,_,I),g.child}var mv={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function gv(A){return{baseLanes:A,cachePool:KA()}}function QA(A,g,_){return A=A!==null?A.childLanes&~_:0,g&&(A|=fA),A}function gu(A,g,_){var I=g.pendingProps,j=!1,$=(g.flags&128)!==0,Ce;if((Ce=$)||(Ce=A!==null&&A.memoizedState===null?!1:(ya.current&2)!==0),Ce&&(j=!0,g.flags&=-129),Ce=(g.flags&32)!==0,g.flags&=-33,A===null){if(zr){if(j?zA(g):jc(),(A=bo)?(A=Q0(A,cu),A=A!==null&&A.data!=="&"?A:null,A!==null&&(g.memoizedState={dehydrated:A,treeContext:Dc!==null?{id:kA,overflow:Ql}:null,retryLane:536870912,hydrationErrors:null},_=Rd(A),_.return=g,g.child=_,ma=g,bo=null)):A=null,A===null)throw Yl(g);return wg(A)?g.lanes=32:g.lanes=536870912,null}var Ye=I.children;return I=I.fallback,j?(jc(),j=g.mode,Ye=eg({mode:"hidden",children:Ye},j),I=Vh(I,j,_,null),Ye.return=g,I.return=g,Ye.sibling=I,g.child=Ye,I=g.child,I.memoizedState=gv(_),I.childLanes=QA(A,Ce,_),g.memoizedState=mv,kf(null,I)):(zA(g),S0(g,Ye))}var vt=A.memoizedState;if(vt!==null&&(Ye=vt.dehydrated,Ye!==null)){if($)g.flags&256?(zA(g),g.flags&=-257,g=tg(A,g,_)):g.memoizedState!==null?(jc(),g.child=A.child,g.flags|=128,g=null):(jc(),Ye=I.fallback,j=g.mode,I=eg({mode:"visible",children:I.children},j),Ye=Vh(Ye,j,_,null),Ye.flags|=2,I.return=g,Ye.return=g,I.sibling=Ye,g.child=I,mh(g,A.child,null,_),I=g.child,I.memoizedState=gv(_),I.childLanes=QA(A,Ce,_),g.memoizedState=mv,g=kf(null,I));else if(zA(g),wg(Ye)){if(Ce=Ye.nextSibling&&Ye.nextSibling.dataset,Ce)var Vt=Ce.dgst;Ce=Vt,I=Error(i(419)),I.stack="",I.digest=Ce,RA({value:I,source:null,stack:null}),g=tg(A,g,_)}else if(Js||cc(A,g,_,!1),Ce=(_&A.childLanes)!==0,Js||Ce){if(Ce=Go,Ce!==null&&(I=Ri(Ce,_),I!==0&&I!==vt.retryLane))throw vt.retryLane=I,lu(A,I),bc(Ce,A,I),x0;hy(Ye)||J1(),g=tg(A,g,_)}else hy(Ye)?(g.flags|=192,g.child=A.child,g=null):(A=vt.treeContext,bo=_u(Ye.nextSibling),ma=g,zr=!0,dh=null,cu=!1,A!==null&&Pd(g,A),g=S0(g,I.children),g.flags|=4096);return g}return j?(jc(),Ye=I.fallback,j=g.mode,vt=A.child,Vt=vt.sibling,I=ol(vt,{mode:"hidden",children:I.children}),I.subtreeFlags=vt.subtreeFlags&65011712,Vt!==null?Ye=ol(Vt,Ye):(Ye=Vh(Ye,j,_,null),Ye.flags|=2),Ye.return=g,I.return=g,I.sibling=Ye,g.child=I,kf(null,I),I=g.child,Ye=A.child.memoizedState,Ye===null?Ye=gv(_):(j=Ye.cachePool,j!==null?(vt=$s._currentValue,j=j.parent!==vt?{parent:vt,pool:vt}:j):j=KA(),Ye={baseLanes:Ye.baseLanes|_,cachePool:j}),I.memoizedState=Ye,I.childLanes=QA(A,Ce,_),g.memoizedState=mv,kf(A.child,I)):(zA(g),_=A.child,A=_.sibling,_=ol(_,{mode:"visible",children:I.children}),_.return=g,_.sibling=null,A!==null&&(Ce=g.deletions,Ce===null?(g.deletions=[A],g.flags|=16):Ce.push(A)),g.child=_,g.memoizedState=null,_)}function S0(A,g){return g=eg({mode:"visible",children:g},A.mode),g.return=A,A.child=g}function eg(A,g){return A=El(22,A,null,g),A.lanes=0,A}function tg(A,g,_){return mh(g,A.child,null,_),A=S0(g,g.pendingProps.children),A.flags|=2,g.memoizedState=null,A}function z1(A,g,_){A.lanes|=g;var I=A.alternate;I!==null&&(I.lanes|=g),PA(A.return,g,_)}function Lp(A,g,_,I,j,$){var Ce=A.memoizedState;Ce===null?A.memoizedState={isBackwards:g,rendering:null,renderingStartTime:0,last:I,tail:_,tailMode:j,treeForkCount:$}:(Ce.isBackwards=g,Ce.rendering=null,Ce.renderingStartTime=0,Ce.last=I,Ce.tail=_,Ce.tailMode=j,Ce.treeForkCount=$)}function Al(A,g,_){var I=g.pendingProps,j=I.revealOrder,$=I.tail;I=I.children;var Ce=ya.current,Ye=(Ce&2)!==0;if(Ye?(Ce=Ce&1|2,g.flags|=128):Ce&=1,De(ya,Ce),ba(A,g,I,_),I=zr?Vs:0,!Ye&&A!==null&&(A.flags&128)!==0)e:for(A=g.child;A!==null;){if(A.tag===13)A.memoizedState!==null&&z1(A,_,g);else if(A.tag===19)z1(A,_,g);else if(A.child!==null){A.child.return=A,A=A.child;continue}if(A===g)break e;for(;A.sibling===null;){if(A.return===null||A.return===g)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}switch(j){case"forwards":for(_=g.child,j=null;_!==null;)A=_.alternate,A!==null&&pc(A)===null&&(j=_),_=_.sibling;_=j,_===null?(j=g.child,g.child=null):(j=_.sibling,_.sibling=null),Lp(g,!1,j,_,$,I);break;case"backwards":case"unstable_legacy-backwards":for(_=null,j=g.child,g.child=null;j!==null;){if(A=j.alternate,A!==null&&pc(A)===null){g.child=j;break}A=j.sibling,j.sibling=_,_=j,j=A}Lp(g,!0,_,null,$,I);break;case"together":Lp(g,!1,null,null,void 0,I);break;default:g.memoizedState=null}return g.child}function xh(A,g,_){if(A!==null&&(g.dependencies=A.dependencies),Df|=g.lanes,(_&g.childLanes)===0)if(A!==null){if(cc(A,g,_,!1),(_&g.childLanes)===0)return null}else return null;if(A!==null&&g.child!==A.child)throw Error(i(153));if(g.child!==null){for(A=g.child,_=ol(A,A.pendingProps),g.child=_,_.return=g;A.sibling!==null;)A=A.sibling,_=_.sibling=ol(A,A.pendingProps),_.return=g;_.sibling=null}return g.child}function ng(A,g){return(A.lanes&g)!==0?!0:(A=A.dependencies,!!(A!==null&&Mp(A)))}function Jx(A,g,_){switch(g.tag){case 3:Ke(g,g.stateNode.containerInfo),DA(g,$s,A.memoizedState.cache),Qe();break;case 27:case 5:Be(g);break;case 4:Ke(g,g.stateNode.containerInfo);break;case 10:DA(g,g.type,g.memoizedProps.value);break;case 31:if(g.memoizedState!==null)return g.flags|=128,hu(g),null;break;case 13:var I=g.memoizedState;if(I!==null)return I.dehydrated!==null?(zA(g),g.flags|=128,null):(_&g.child.childLanes)!==0?gu(A,g,_):(zA(g),A=xh(A,g,_),A!==null?A.sibling:null);zA(g);break;case 19:var j=(A.flags&128)!==0;if(I=(_&g.childLanes)!==0,I||(cc(A,g,_,!1),I=(_&g.childLanes)!==0),j){if(I)return Al(A,g,_);g.flags|=128}if(j=g.memoizedState,j!==null&&(j.rendering=null,j.tail=null,j.lastEffect=null),De(ya,ya.current),I)break;return null;case 22:return g.lanes=0,hA(A,g,_,g.pendingProps);case 24:DA(g,$s,A.memoizedState.cache)}return xh(A,g,_)}function yv(A,g,_){if(A!==null)if(A.memoizedProps!==g.pendingProps)Js=!0;else{if(!ng(A,_)&&(g.flags&128)===0)return Js=!1,Jx(A,g,_);Js=(A.flags&131072)!==0}else Js=!1,zr&&(g.flags&1048576)!==0&&wf(g,Vs,g.index);switch(g.lanes=0,g.tag){case 16:e:{var I=g.pendingProps;if(A=hc(g.elementType),g.type=A,typeof A=="function")IA(A)?(I=Xs(A,I),g.tag=1,g=F1(null,g,A,I,_)):(g.tag=0,g=w0(null,g,A,I,_));else{if(A!=null){var j=A.$$typeof;if(j===H){g.tag=11,g=tr(null,g,A,I,_);break e}else if(j===G){g.tag=14,g=od(null,g,A,I,_);break e}}throw g=Te(A)||A,Error(i(306,g,""))}}return g;case 0:return w0(A,g,g.type,g.pendingProps,_);case 1:return I=g.type,j=Xs(I,g.pendingProps),F1(A,g,I,j,_);case 3:e:{if(Ke(g,g.stateNode.containerInfo),A===null)throw Error(i(387));I=g.pendingProps;var $=g.memoizedState;j=$.element,Lc(A,g),Jh(g,I,null,_);var Ce=g.memoizedState;if(I=Ce.cache,DA(g,$s,I),I!==$.cache&&xp(g,[$s],_,!0),yh(),I=Ce.element,$.isDehydrated)if($={element:I,isDehydrated:!1,cache:Ce.cache},g.updateQueue.baseState=$,g.memoizedState=$,g.flags&256){g=pv(A,g,I,_);break e}else if(I!==j){j=Bl(Error(i(424)),g),RA(j),g=pv(A,g,I,_);break e}else{switch(A=g.stateNode.containerInfo,A.nodeType){case 9:A=A.body;break;default:A=A.nodeName==="HTML"?A.ownerDocument.body:A}for(bo=_u(A.firstChild),ma=g,zr=!0,dh=null,cu=!0,_=Xm(g,null,I,_),g.child=_;_;)_.flags=_.flags&-3|4096,_=_.sibling}else{if(Qe(),I===j){g=xh(A,g,_);break e}ba(A,g,I,_)}g=g.child}return g;case 26:return K1(A,g),A===null?(_=fy(g.type,null,g.pendingProps,null))?g.memoizedState=_:zr||(_=g.type,A=g.pendingProps,I=xg(Tt.current).createElement(_),I[Ur]=g,I[pn]=A,cs(I,_,A),Io(I),g.stateNode=I):g.memoizedState=fy(g.type,A.memoizedProps,g.pendingProps,A.memoizedState),null;case 27:return Be(g),A===null&&zr&&(I=g.stateNode=$v(g.type,g.pendingProps,Tt.current),ma=g,cu=!0,j=bo,ur(g.type)?(ml=j,bo=_u(I.firstChild)):bo=j),ba(A,g,g.pendingProps.children,_),K1(A,g),A===null&&(g.flags|=4194304),g.child;case 5:return A===null&&zr&&((j=I=bo)&&(I=Ay(I,g.type,g.pendingProps,cu),I!==null?(g.stateNode=I,ma=g,bo=_u(I.firstChild),cu=!1,j=!0):j=!1),j||Yl(g)),Be(g),j=g.type,$=g.pendingProps,Ce=A!==null?A.memoizedProps:null,I=$.children,$d(j,$)?I=null:Ce!==null&&$d(j,Ce)&&(g.flags|=32),g.memoizedState!==null&&(j=jA(A,g,zd,null,null,_),pt._currentValue=j),K1(A,g),ba(A,g,I,_),g.child;case 6:return A===null&&zr&&((A=_=bo)&&(_=Eo(_,g.pendingProps,cu),_!==null?(g.stateNode=_,ma=g,bo=null,A=!0):A=!1),A||Yl(g)),null;case 13:return gu(A,g,_);case 4:return Ke(g,g.stateNode.containerInfo),I=g.pendingProps,A===null?g.child=mh(g,null,I,_):ba(A,g,I,_),g.child;case 11:return tr(A,g,g.type,g.pendingProps,_);case 7:return ba(A,g,g.pendingProps,_),g.child;case 8:return ba(A,g,g.pendingProps.children,_),g.child;case 12:return ba(A,g,g.pendingProps.children,_),g.child;case 10:return I=g.pendingProps,DA(g,g.type,I.value),ba(A,g,I.children,_),g.child;case 9:return j=g.type._context,I=g.pendingProps.children,fh(g),j=Ha(j),I=I(j),g.flags|=1,ba(A,g,I,_),g.child;case 14:return od(A,g,g.type,g.pendingProps,_);case 15:return U1(A,g,g.type,g.pendingProps,_);case 19:return Al(A,g,_);case 31:return Xx(A,g,_);case 22:return hA(A,g,_,g.pendingProps);case 24:return fh(g),I=Ha($s),A===null?(j=Hm(),j===null&&(j=Go,$=Uc(),j.pooledCache=$,$.refCount++,$!==null&&(j.pooledCacheLanes|=_),j=$),g.memoizedState={parent:I,cache:j},FA(g),DA(g,$s,j)):((A.lanes&_)!==0&&(Lc(A,g),Jh(g,null,null,_),yh()),j=A.memoizedState,$=g.memoizedState,j.parent!==I?(j={parent:I,cache:I},g.memoizedState=j,g.lanes===0&&(g.memoizedState=g.updateQueue.baseState=j),DA(g,$s,I)):(I=$.cache,DA(g,$s,I),I!==j.cache&&xp(g,[$s],_,!0))),ba(A,g,g.pendingProps.children,_),g.child;case 29:throw g.pendingProps}throw Error(i(156,g.tag))}function Gd(A){A.flags|=4}function vv(A,g,_,I,j){if((g=(A.mode&32)!==0)&&(g=!1),g){if(A.flags|=16777216,(j&335544128)===j)if(A.stateNode.complete)A.flags|=8192;else if(D0())A.flags|=8192;else throw er=Ep,Sp}else A.flags&=-16777217}function j1(A,g){if(g.type!=="stylesheet"||(g.state.loading&4)!==0)A.flags&=-16777217;else if(A.flags|=16777216,!_e(g))if(D0())A.flags|=8192;else throw er=Ep,Sp}function E0(A,g){g!==null&&(A.flags|=4),A.flags&16384&&(g=A.tag!==22?Fn():536870912,A.lanes|=g,ug|=g)}function Fp(A,g){if(!zr)switch(A.tailMode){case"hidden":g=A.tail;for(var _=null;g!==null;)g.alternate!==null&&(_=g),g=g.sibling;_===null?A.tail=null:_.sibling=null;break;case"collapsed":_=A.tail;for(var I=null;_!==null;)_.alternate!==null&&(I=_),_=_.sibling;I===null?g||A.tail===null?A.tail=null:A.tail.sibling=null:I.sibling=null}}function Cs(A){var g=A.alternate!==null&&A.alternate.child===A.child,_=0,I=0;if(g)for(var j=A.child;j!==null;)_|=j.lanes|j.childLanes,I|=j.subtreeFlags&65011712,I|=j.flags&65011712,j.return=A,j=j.sibling;else for(j=A.child;j!==null;)_|=j.lanes|j.childLanes,I|=j.subtreeFlags,I|=j.flags,j.return=A,j=j.sibling;return A.subtreeFlags|=I,A.childLanes=_,g}function bv(A,g,_){var I=g.pendingProps;switch(hh(g),g.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Cs(g),null;case 1:return Cs(g),null;case 3:return _=g.stateNode,I=null,A!==null&&(I=A.memoizedState.cache),g.memoizedState.cache!==I&&(g.flags|=2048),uc($s),Oe(),_.pendingContext&&(_.context=_.pendingContext,_.pendingContext=null),(A===null||A.child===null)&&(TA(g)?Gd(g):A===null||A.memoizedState.isDehydrated&&(g.flags&256)===0||(g.flags|=1024,lc())),Cs(g),null;case 26:var j=g.type,$=g.memoizedState;return A===null?(Gd(g),$!==null?(Cs(g),j1(g,$)):(Cs(g),vv(g,j,null,I,_))):$?$!==A.memoizedState?(Gd(g),Cs(g),j1(g,$)):(Cs(g),g.flags&=-16777217):(A=A.memoizedProps,A!==I&&Gd(g),Cs(g),vv(g,j,A,I,_)),null;case 27:if(Ve(g),_=Tt.current,j=g.type,A!==null&&g.stateNode!=null)A.memoizedProps!==I&&Gd(g);else{if(!I){if(g.stateNode===null)throw Error(i(166));return Cs(g),null}A=_t.current,TA(g)?al(g):(A=$v(j,I,_),g.stateNode=A,Gd(g))}return Cs(g),null;case 5:if(Ve(g),j=g.type,A!==null&&g.stateNode!=null)A.memoizedProps!==I&&Gd(g);else{if(!I){if(g.stateNode===null)throw Error(i(166));return Cs(g),null}if($=_t.current,TA(g))al(g);else{var Ce=xg(Tt.current);switch($){case 1:$=Ce.createElementNS("http://www.w3.org/2000/svg",j);break;case 2:$=Ce.createElementNS("http://www.w3.org/1998/Math/MathML",j);break;default:switch(j){case"svg":$=Ce.createElementNS("http://www.w3.org/2000/svg",j);break;case"math":$=Ce.createElementNS("http://www.w3.org/1998/Math/MathML",j);break;case"script":$=Ce.createElement("div"),$.innerHTML="<script><\/script>",$=$.removeChild($.firstChild);break;case"select":$=typeof I.is=="string"?Ce.createElement("select",{is:I.is}):Ce.createElement("select"),I.multiple?$.multiple=!0:I.size&&($.size=I.size);break;default:$=typeof I.is=="string"?Ce.createElement(j,{is:I.is}):Ce.createElement(j)}}$[Ur]=g,$[pn]=I;e:for(Ce=g.child;Ce!==null;){if(Ce.tag===5||Ce.tag===6)$.appendChild(Ce.stateNode);else if(Ce.tag!==4&&Ce.tag!==27&&Ce.child!==null){Ce.child.return=Ce,Ce=Ce.child;continue}if(Ce===g)break e;for(;Ce.sibling===null;){if(Ce.return===null||Ce.return===g)break e;Ce=Ce.return}Ce.sibling.return=Ce.return,Ce=Ce.sibling}g.stateNode=$;e:switch(cs($,j,I),j){case"button":case"input":case"select":case"textarea":I=!!I.autoFocus;break e;case"img":I=!0;break e;default:I=!1}I&&Gd(g)}}return Cs(g),vv(g,g.type,A===null?null:A.memoizedProps,g.pendingProps,_),null;case 6:if(A&&g.stateNode!=null)A.memoizedProps!==I&&Gd(g);else{if(typeof I!="string"&&g.stateNode===null)throw Error(i(166));if(A=Tt.current,TA(g)){if(A=g.stateNode,_=g.memoizedProps,I=null,j=ma,j!==null)switch(j.tag){case 27:case 5:I=j.memoizedProps}A[Ur]=g,A=!!(A.nodeValue===_||I!==null&&I.suppressHydrationWarning===!0||Qv(A.nodeValue,_)),A||Yl(g,!0)}else A=xg(A).createTextNode(I),A[Ur]=g,g.stateNode=A}return Cs(g),null;case 31:if(_=g.memoizedState,A===null||A.memoizedState!==null){if(I=TA(g),_!==null){if(A===null){if(!I)throw Error(i(318));if(A=g.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(i(557));A[Ur]=g}else Qe(),(g.flags&128)===0&&(g.memoizedState=null),g.flags|=4;Cs(g),A=!1}else _=lc(),A!==null&&A.memoizedState!==null&&(A.memoizedState.hydrationErrors=_),A=!0;if(!A)return g.flags&256?(Fu(g),g):(Fu(g),null);if((g.flags&128)!==0)throw Error(i(558))}return Cs(g),null;case 13:if(I=g.memoizedState,A===null||A.memoizedState!==null&&A.memoizedState.dehydrated!==null){if(j=TA(g),I!==null&&I.dehydrated!==null){if(A===null){if(!j)throw Error(i(318));if(j=g.memoizedState,j=j!==null?j.dehydrated:null,!j)throw Error(i(317));j[Ur]=g}else Qe(),(g.flags&128)===0&&(g.memoizedState=null),g.flags|=4;Cs(g),j=!1}else j=lc(),A!==null&&A.memoizedState!==null&&(A.memoizedState.hydrationErrors=j),j=!0;if(!j)return g.flags&256?(Fu(g),g):(Fu(g),null)}return Fu(g),(g.flags&128)!==0?(g.lanes=_,g):(_=I!==null,A=A!==null&&A.memoizedState!==null,_&&(I=g.child,j=null,I.alternate!==null&&I.alternate.memoizedState!==null&&I.alternate.memoizedState.cachePool!==null&&(j=I.alternate.memoizedState.cachePool.pool),$=null,I.memoizedState!==null&&I.memoizedState.cachePool!==null&&($=I.memoizedState.cachePool.pool),$!==j&&(I.flags|=2048)),_!==A&&_&&(g.child.flags|=8192),E0(g,g.updateQueue),Cs(g),null);case 4:return Oe(),A===null&&ad(g.stateNode.containerInfo),Cs(g),null;case 10:return uc(g.type),Cs(g),null;case 19:if(Ge(ya),I=g.memoizedState,I===null)return Cs(g),null;if(j=(g.flags&128)!==0,$=I.rendering,$===null)if(j)Fp(I,!1);else{if(la!==0||A!==null&&(A.flags&128)!==0)for(A=g.child;A!==null;){if($=pc(A),$!==null){for(g.flags|=128,Fp(I,!1),A=$.updateQueue,g.updateQueue=A,E0(g,A),g.subtreeFlags=0,A=_,_=g.child;_!==null;)I1(_,A),_=_.sibling;return De(ya,ya.current&1|2),zr&&Uu(g,I.treeForkCount),g.child}A=A.sibling}I.tail!==null&&Zn()>Qp&&(g.flags|=128,j=!0,Fp(I,!1),g.lanes=4194304)}else{if(!j)if(A=pc($),A!==null){if(g.flags|=128,j=!0,A=A.updateQueue,g.updateQueue=A,E0(g,A),Fp(I,!0),I.tail===null&&I.tailMode==="hidden"&&!$.alternate&&!zr)return Cs(g),null}else 2*Zn()-I.renderingStartTime>Qp&&_!==536870912&&(g.flags|=128,j=!0,Fp(I,!1),g.lanes=4194304);I.isBackwards?($.sibling=g.child,g.child=$):(A=I.last,A!==null?A.sibling=$:g.child=$,I.last=$)}return I.tail!==null?(A=I.tail,I.rendering=A,I.tail=A.sibling,I.renderingStartTime=Zn(),A.sibling=null,_=ya.current,De(ya,j?_&1|2:_&1),zr&&Uu(g,I.treeForkCount),A):(Cs(g),null);case 22:case 23:return Fu(g),Ef(),I=g.memoizedState!==null,A!==null?A.memoizedState!==null!==I&&(g.flags|=8192):I&&(g.flags|=8192),I?(_&536870912)!==0&&(g.flags&128)===0&&(Cs(g),g.subtreeFlags&6&&(g.flags|=8192)):Cs(g),_=g.updateQueue,_!==null&&E0(g,_.retryQueue),_=null,A!==null&&A.memoizedState!==null&&A.memoizedState.cachePool!==null&&(_=A.memoizedState.cachePool.pool),I=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(I=g.memoizedState.cachePool.pool),I!==_&&(g.flags|=2048),A!==null&&Ge(ph),null;case 24:return _=null,A!==null&&(_=A.memoizedState.cache),g.memoizedState.cache!==_&&(g.flags|=2048),uc($s),Cs(g),null;case 25:return null;case 30:return null}throw Error(i(156,g.tag))}function B0(A,g){switch(hh(g),g.tag){case 1:return A=g.flags,A&65536?(g.flags=A&-65537|128,g):null;case 3:return uc($s),Oe(),A=g.flags,(A&65536)!==0&&(A&128)===0?(g.flags=A&-65537|128,g):null;case 26:case 27:case 5:return Ve(g),null;case 31:if(g.memoizedState!==null){if(Fu(g),g.alternate===null)throw Error(i(340));Qe()}return A=g.flags,A&65536?(g.flags=A&-65537|128,g):null;case 13:if(Fu(g),A=g.memoizedState,A!==null&&A.dehydrated!==null){if(g.alternate===null)throw Error(i(340));Qe()}return A=g.flags,A&65536?(g.flags=A&-65537|128,g):null;case 19:return Ge(ya),null;case 4:return Oe(),null;case 10:return uc(g.type),null;case 22:case 23:return Fu(g),Ef(),A!==null&&Ge(ph),A=g.flags,A&65536?(g.flags=A&-65537|128,g):null;case 24:return uc($s),null;case 25:return null;default:return null}}function N1(A,g){switch(hh(g),g.tag){case 3:uc($s),Oe();break;case 26:case 27:case 5:Ve(g);break;case 4:Oe();break;case 31:g.memoizedState!==null&&Fu(g);break;case 13:Fu(g);break;case 19:Ge(ya);break;case 10:uc(g.type);break;case 22:case 23:Fu(g),Ef(),A!==null&&Ge(ph);break;case 24:uc($s)}}function ig(A,g){try{var _=g.updateQueue,I=_!==null?_.lastEffect:null;if(I!==null){var j=I.next;_=j;do{if((_.tag&A)===A){I=void 0;var $=_.create,Ce=_.inst;I=$(),Ce.destroy=I}_=_.next}while(_!==j)}}catch(Ye){Xo(g,g.return,Ye)}}function YA(A,g,_){try{var I=g.updateQueue,j=I!==null?I.lastEffect:null;if(j!==null){var $=j.next;I=$;do{if((I.tag&A)===A){var Ce=I.inst,Ye=Ce.destroy;if(Ye!==void 0){Ce.destroy=void 0,j=g;var vt=_,Vt=Ye;try{Vt()}catch(cn){Xo(j,vt,cn)}}}I=I.next}while(I!==$)}}catch(cn){Xo(g,g.return,cn)}}function zp(A){var g=A.updateQueue;if(g!==null){var _=A.stateNode;try{Lu(g,_)}catch(I){Xo(A,A.return,I)}}}function G1(A,g,_){_.props=Xs(A.type,A.memoizedProps),_.state=A.memoizedState;try{_.componentWillUnmount()}catch(I){Xo(A,g,I)}}function hl(A,g){try{var _=A.ref;if(_!==null){switch(A.tag){case 26:case 27:case 5:var I=A.stateNode;break;case 30:I=A.stateNode;break;default:I=A.stateNode}typeof _=="function"?A.refCleanup=_(I):_.current=I}}catch(j){Xo(A,g,j)}}function dl(A,g){var _=A.ref,I=A.refCleanup;if(_!==null)if(typeof I=="function")try{I()}catch(j){Xo(A,g,j)}finally{A.refCleanup=null,A=A.alternate,A!=null&&(A.refCleanup=null)}else if(typeof _=="function")try{_(null)}catch(j){Xo(A,g,j)}else _.current=null}function mC(A){var g=A.type,_=A.memoizedProps,I=A.stateNode;try{e:switch(g){case"button":case"input":case"select":case"textarea":_.autoFocus&&I.focus();break e;case"img":_.src?I.src=_.src:_.srcSet&&(I.srcset=_.srcSet)}}catch(j){Xo(A,A.return,j)}}function W1(A,g,_){try{var I=A.stateNode;Cg(I,A.type,_,g),I[pn]=g}catch(j){Xo(A,A.return,j)}}function gC(A){return A.tag===5||A.tag===3||A.tag===26||A.tag===27&&ur(A.type)||A.tag===4}function Cv(A){e:for(;;){for(;A.sibling===null;){if(A.return===null||gC(A.return))return null;A=A.return}for(A.sibling.return=A.return,A=A.sibling;A.tag!==5&&A.tag!==6&&A.tag!==18;){if(A.tag===27&&ur(A.type)||A.flags&2||A.child===null||A.tag===4)continue e;A.child.return=A,A=A.child}if(!(A.flags&2))return A.stateNode}}function _v(A,g,_){var I=A.tag;if(I===5||I===6)A=A.stateNode,g?(_.nodeType===9?_.body:_.nodeName==="HTML"?_.ownerDocument.body:_).insertBefore(A,g):(g=_.nodeType===9?_.body:_.nodeName==="HTML"?_.ownerDocument.body:_,g.appendChild(A),_=_._reactRootContainer,_!=null||g.onclick!==null||(g.onclick=Vi));else if(I!==4&&(I===27&&ur(A.type)&&(_=A.stateNode,g=null),A=A.child,A!==null))for(_v(A,g,_),A=A.sibling;A!==null;)_v(A,g,_),A=A.sibling}function Q1(A,g,_){var I=A.tag;if(I===5||I===6)A=A.stateNode,g?_.insertBefore(A,g):_.appendChild(A);else if(I!==4&&(I===27&&ur(A.type)&&(_=A.stateNode),A=A.child,A!==null))for(Q1(A,g,_),A=A.sibling;A!==null;)Q1(A,g,_),A=A.sibling}function yC(A){var g=A.stateNode,_=A.memoizedProps;try{for(var I=A.type,j=g.attributes;j.length;)g.removeAttributeNode(j[0]);cs(g,I,_),g[Ur]=A,g[pn]=_}catch($){Xo(A,A.return,$)}}var Mh=!1,fl=!1,Y1=!1,rg=typeof WeakSet=="function"?WeakSet:Set,$l=null;function Ca(A,g){if(A=A.containerInfo,_g=Kn,A=vp(A),Ym(A)){if("selectionStart"in A)var _={start:A.selectionStart,end:A.selectionEnd};else e:{_=(_=A.ownerDocument)&&_.defaultView||window;var I=_.getSelection&&_.getSelection();if(I&&I.rangeCount!==0){_=I.anchorNode;var j=I.anchorOffset,$=I.focusNode;I=I.focusOffset;try{_.nodeType,$.nodeType}catch{_=null;break e}var Ce=0,Ye=-1,vt=-1,Vt=0,cn=0,yn=A,Xt=null;t:for(;;){for(var on;yn!==_||j!==0&&yn.nodeType!==3||(Ye=Ce+j),yn!==$||I!==0&&yn.nodeType!==3||(vt=Ce+I),yn.nodeType===3&&(Ce+=yn.nodeValue.length),(on=yn.firstChild)!==null;)Xt=yn,yn=on;for(;;){if(yn===A)break t;if(Xt===_&&++Vt===j&&(Ye=Ce),Xt===$&&++cn===I&&(vt=Ce),(on=yn.nextSibling)!==null)break;yn=Xt,Xt=yn.parentNode}yn=on}_=Ye===-1||vt===-1?null:{start:Ye,end:vt}}else _=null}_=_||{start:0,end:0}}else _=null;for(uy={focusedElem:A,selectionRange:_},Kn=!1,$l=g;$l!==null;)if(g=$l,A=g.child,(g.subtreeFlags&1028)!==0&&A!==null)A.return=g,$l=A;else for(;$l!==null;){switch(g=$l,$=g.alternate,A=g.flags,g.tag){case 0:if((A&4)!==0&&(A=g.updateQueue,A=A!==null?A.events:null,A!==null))for(_=0;_<A.length;_++)j=A[_],j.ref.impl=j.nextImpl;break;case 11:case 15:break;case 1:if((A&1024)!==0&&$!==null){A=void 0,_=g,j=$.memoizedProps,$=$.memoizedState,I=_.stateNode;try{var Ii=Xs(_.type,j);A=I.getSnapshotBeforeUpdate(Ii,$),I.__reactInternalSnapshotBeforeUpdate=A}catch(rr){Xo(_,_.return,rr)}}break;case 3:if((A&1024)!==0){if(A=g.stateNode.containerInfo,_=A.nodeType,_===9)W0(A);else if(_===1)switch(A.nodeName){case"HEAD":case"HTML":case"BODY":W0(A);break;default:A.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((A&1024)!==0)throw Error(i(163))}if(A=g.sibling,A!==null){A.return=g.return,$l=A;break}$l=g.return}}function Tf(A,g,_){var I=_.flags;switch(_.tag){case 0:case 11:case 15:gc(A,_),I&4&&ig(5,_);break;case 1:if(gc(A,_),I&4)if(A=_.stateNode,g===null)try{A.componentDidMount()}catch(Ce){Xo(_,_.return,Ce)}else{var j=Xs(_.type,g.memoizedProps);g=g.memoizedState;try{A.componentDidUpdate(j,g,A.__reactInternalSnapshotBeforeUpdate)}catch(Ce){Xo(_,_.return,Ce)}}I&64&&zp(_),I&512&&hl(_,_.return);break;case 3:if(gc(A,_),I&64&&(A=_.updateQueue,A!==null)){if(g=null,_.child!==null)switch(_.child.tag){case 27:case 5:g=_.child.stateNode;break;case 1:g=_.child.stateNode}try{Lu(A,g)}catch(Ce){Xo(_,_.return,Ce)}}break;case 27:g===null&&I&4&&yC(_);case 26:case 5:gc(A,_),g===null&&I&4&&mC(_),I&512&&hl(_,_.return);break;case 12:gc(A,_);break;case 31:gc(A,_),I&4&&V1(A,_);break;case 13:gc(A,_),I&4&&og(A,_),I&64&&(A=_.memoizedState,A!==null&&(A=A.dehydrated,A!==null&&(_=L0.bind(null,_),o2(A,_))));break;case 22:if(I=_.memoizedState!==null||Mh,!I){g=g!==null&&g.memoizedState!==null||fl,j=Mh;var $=fl;Mh=I,(fl=g)&&!$?wh(A,_,(_.subtreeFlags&8772)!==0):gc(A,_),Mh=j,fl=$}break;case 30:break;default:gc(A,_)}}function q1(A){var g=A.alternate;g!==null&&(A.alternate=null,q1(g)),A.child=null,A.deletions=null,A.sibling=null,A.tag===5&&(g=A.stateNode,g!==null&&tc(g)),A.stateNode=null,A.return=null,A.dependencies=null,A.memoizedProps=null,A.memoizedState=null,A.pendingProps=null,A.stateNode=null,A.updateQueue=null}var _s=null,yu=!1;function dA(A,g,_){for(_=_.child;_!==null;)xv(A,g,_),_=_.sibling}function xv(A,g,_){if(We&&typeof We.onCommitFiberUnmount=="function")try{We.onCommitFiberUnmount(ve,_)}catch{}switch(_.tag){case 26:fl||dl(_,g),dA(A,g,_),_.memoizedState?_.memoizedState.count--:_.stateNode&&(_=_.stateNode,_.parentNode.removeChild(_));break;case 27:fl||dl(_,g);var I=_s,j=yu;ur(_.type)&&(_s=_.stateNode,yu=!1),dA(A,g,_),Zp(_.stateNode),_s=I,yu=j;break;case 5:fl||dl(_,g);case 6:if(I=_s,j=yu,_s=null,dA(A,g,_),_s=I,yu=j,_s!==null)if(yu)try{(_s.nodeType===9?_s.body:_s.nodeName==="HTML"?_s.ownerDocument.body:_s).removeChild(_.stateNode)}catch($){Xo(_,g,$)}else try{_s.removeChild(_.stateNode)}catch($){Xo(_,g,$)}break;case 18:_s!==null&&(yu?(A=_s,cy(A.nodeType===9?A.body:A.nodeName==="HTML"?A.ownerDocument.body:A,_.stateNode),Qu(A)):cy(_s,_.stateNode));break;case 4:I=_s,j=yu,_s=_.stateNode.containerInfo,yu=!0,dA(A,g,_),_s=I,yu=j;break;case 0:case 11:case 14:case 15:YA(2,_,g),fl||YA(4,_,g),dA(A,g,_);break;case 1:fl||(dl(_,g),I=_.stateNode,typeof I.componentWillUnmount=="function"&&G1(_,g,I)),dA(A,g,_);break;case 21:dA(A,g,_);break;case 22:fl=(I=fl)||_.memoizedState!==null,dA(A,g,_),fl=I;break;default:dA(A,g,_)}}function V1(A,g){if(g.memoizedState===null&&(A=g.alternate,A!==null&&(A=A.memoizedState,A!==null))){A=A.dehydrated;try{Qu(A)}catch(_){Xo(g,g.return,_)}}}function og(A,g){if(g.memoizedState===null&&(A=g.alternate,A!==null&&(A=A.memoizedState,A!==null&&(A=A.dehydrated,A!==null))))try{Qu(A)}catch(_){Xo(g,g.return,_)}}function Mv(A){switch(A.tag){case 31:case 13:case 19:var g=A.stateNode;return g===null&&(g=A.stateNode=new rg),g;case 22:return A=A.stateNode,g=A._retryCache,g===null&&(g=A._retryCache=new rg),g;default:throw Error(i(435,A.tag))}}function Wd(A,g){var _=Mv(A);g.forEach(function(I){if(!_.has(I)){_.add(I);var j=i2.bind(null,A,I);I.then(j,j)}})}function vu(A,g){var _=g.deletions;if(_!==null)for(var I=0;I<_.length;I++){var j=_[I],$=A,Ce=g,Ye=Ce;e:for(;Ye!==null;){switch(Ye.tag){case 27:if(ur(Ye.type)){_s=Ye.stateNode,yu=!1;break e}break;case 5:_s=Ye.stateNode,yu=!1;break e;case 3:case 4:_s=Ye.stateNode.containerInfo,yu=!0;break e}Ye=Ye.return}if(_s===null)throw Error(i(160));xv($,Ce,j),_s=null,yu=!1,$=j.alternate,$!==null&&($.return=null),j.return=null}if(g.subtreeFlags&13886)for(g=g.child;g!==null;)sg(g,A),g=g.sibling}var ju=null;function sg(A,g){var _=A.alternate,I=A.flags;switch(A.tag){case 0:case 11:case 14:case 15:vu(g,A),ea(A),I&4&&(YA(3,A,A.return),ig(3,A),YA(5,A,A.return));break;case 1:vu(g,A),ea(A),I&512&&(fl||_===null||dl(_,_.return)),I&64&&Mh&&(A=A.updateQueue,A!==null&&(I=A.callbacks,I!==null&&(_=A.shared.hiddenCallbacks,A.shared.hiddenCallbacks=_===null?I:_.concat(I))));break;case 26:var j=ju;if(vu(g,A),ea(A),I&512&&(fl||_===null||dl(_,_.return)),I&4){var $=_!==null?_.memoizedState:null;if(I=A.memoizedState,_===null)if(I===null)if(A.stateNode===null){e:{I=A.type,_=A.memoizedProps,j=j.ownerDocument||j;t:switch(I){case"title":$=j.getElementsByTagName("title")[0],(!$||$[qi]||$[Ur]||$.namespaceURI==="http://www.w3.org/2000/svg"||$.hasAttribute("itemprop"))&&($=j.createElement(I),j.head.insertBefore($,j.querySelector("head > title"))),cs($,I,_),$[Ur]=A,Io($),I=$;break e;case"link":var Ce=ee("link","href",j).get(I+(_.href||""));if(Ce){for(var Ye=0;Ye<Ce.length;Ye++)if($=Ce[Ye],$.getAttribute("href")===(_.href==null||_.href===""?null:_.href)&&$.getAttribute("rel")===(_.rel==null?null:_.rel)&&$.getAttribute("title")===(_.title==null?null:_.title)&&$.getAttribute("crossorigin")===(_.crossOrigin==null?null:_.crossOrigin)){Ce.splice(Ye,1);break t}}$=j.createElement(I),cs($,I,_),j.head.appendChild($);break;case"meta":if(Ce=ee("meta","content",j).get(I+(_.content||""))){for(Ye=0;Ye<Ce.length;Ye++)if($=Ce[Ye],$.getAttribute("content")===(_.content==null?null:""+_.content)&&$.getAttribute("name")===(_.name==null?null:_.name)&&$.getAttribute("property")===(_.property==null?null:_.property)&&$.getAttribute("http-equiv")===(_.httpEquiv==null?null:_.httpEquiv)&&$.getAttribute("charset")===(_.charSet==null?null:_.charSet)){Ce.splice(Ye,1);break t}}$=j.createElement(I),cs($,I,_),j.head.appendChild($);break;default:throw Error(i(468,I))}$[Ur]=A,Io($),I=$}A.stateNode=I}else ne(j,A.type,A.stateNode);else A.stateNode=M(j,I,A.memoizedProps);else $!==I?($===null?_.stateNode!==null&&(_=_.stateNode,_.parentNode.removeChild(_)):$.count--,I===null?ne(j,A.type,A.stateNode):M(j,I,A.memoizedProps)):I===null&&A.stateNode!==null&&W1(A,A.memoizedProps,_.memoizedProps)}break;case 27:vu(g,A),ea(A),I&512&&(fl||_===null||dl(_,_.return)),_!==null&&I&4&&W1(A,A.memoizedProps,_.memoizedProps);break;case 5:if(vu(g,A),ea(A),I&512&&(fl||_===null||dl(_,_.return)),A.flags&32){j=A.stateNode;try{Mo(j,"")}catch(Ii){Xo(A,A.return,Ii)}}I&4&&A.stateNode!=null&&(j=A.memoizedProps,W1(A,j,_!==null?_.memoizedProps:j)),I&1024&&(Y1=!0);break;case 6:if(vu(g,A),ea(A),I&4){if(A.stateNode===null)throw Error(i(162));I=A.memoizedProps,_=A.stateNode;try{_.nodeValue=I}catch(Ii){Xo(A,A.return,Ii)}}break;case 3:if(z=null,j=ju,ju=Y0(g.containerInfo),vu(g,A),ju=j,ea(A),I&4&&_!==null&&_.memoizedState.isDehydrated)try{Qu(g.containerInfo)}catch(Ii){Xo(A,A.return,Ii)}Y1&&(Y1=!1,wv(A));break;case 4:I=ju,ju=Y0(A.stateNode.containerInfo),vu(g,A),ea(A),ju=I;break;case 12:vu(g,A),ea(A);break;case 31:vu(g,A),ea(A),I&4&&(I=A.updateQueue,I!==null&&(A.updateQueue=null,Wd(A,I)));break;case 13:vu(g,A),ea(A),A.child.flags&8192&&A.memoizedState!==null!=(_!==null&&_.memoizedState!==null)&&(Ag=Zn()),I&4&&(I=A.updateQueue,I!==null&&(A.updateQueue=null,Wd(A,I)));break;case 22:j=A.memoizedState!==null;var vt=_!==null&&_.memoizedState!==null,Vt=Mh,cn=fl;if(Mh=Vt||j,fl=cn||vt,vu(g,A),fl=cn,Mh=Vt,ea(A),I&8192)e:for(g=A.stateNode,g._visibility=j?g._visibility&-2:g._visibility|1,j&&(_===null||vt||Mh||fl||jp(A)),_=null,g=A;;){if(g.tag===5||g.tag===26){if(_===null){vt=_=g;try{if($=vt.stateNode,j)Ce=$.style,typeof Ce.setProperty=="function"?Ce.setProperty("display","none","important"):Ce.display="none";else{Ye=vt.stateNode;var yn=vt.memoizedProps.style,Xt=yn!=null&&yn.hasOwnProperty("display")?yn.display:null;Ye.style.display=Xt==null||typeof Xt=="boolean"?"":(""+Xt).trim()}}catch(Ii){Xo(vt,vt.return,Ii)}}}else if(g.tag===6){if(_===null){vt=g;try{vt.stateNode.nodeValue=j?"":vt.memoizedProps}catch(Ii){Xo(vt,vt.return,Ii)}}}else if(g.tag===18){if(_===null){vt=g;try{var on=vt.stateNode;j?Wu(on,!0):Wu(vt.stateNode,!1)}catch(Ii){Xo(vt,vt.return,Ii)}}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===A)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===A)break e;for(;g.sibling===null;){if(g.return===null||g.return===A)break e;_===g&&(_=null),g=g.return}_===g&&(_=null),g.sibling.return=g.return,g=g.sibling}I&4&&(I=A.updateQueue,I!==null&&(_=I.retryQueue,_!==null&&(I.retryQueue=null,Wd(A,_))));break;case 19:vu(g,A),ea(A),I&4&&(I=A.updateQueue,I!==null&&(A.updateQueue=null,Wd(A,I)));break;case 30:break;case 21:break;default:vu(g,A),ea(A)}}function ea(A){var g=A.flags;if(g&2){try{for(var _,I=A.return;I!==null;){if(gC(I)){_=I;break}I=I.return}if(_==null)throw Error(i(160));switch(_.tag){case 27:var j=_.stateNode,$=Cv(A);Q1(A,$,j);break;case 5:var Ce=_.stateNode;_.flags&32&&(Mo(Ce,""),_.flags&=-33);var Ye=Cv(A);Q1(A,Ye,Ce);break;case 3:case 4:var vt=_.stateNode.containerInfo,Vt=Cv(A);_v(A,Vt,vt);break;default:throw Error(i(161))}}catch(cn){Xo(A,A.return,cn)}A.flags&=-3}g&4096&&(A.flags&=-4097)}function wv(A){if(A.subtreeFlags&1024)for(A=A.child;A!==null;){var g=A;wv(g),g.tag===5&&g.flags&1024&&g.stateNode.reset(),A=A.sibling}}function gc(A,g){if(g.subtreeFlags&8772)for(g=g.child;g!==null;)Tf(A,g.alternate,g),g=g.sibling}function jp(A){for(A=A.child;A!==null;){var g=A;switch(g.tag){case 0:case 11:case 14:case 15:YA(4,g,g.return),jp(g);break;case 1:dl(g,g.return);var _=g.stateNode;typeof _.componentWillUnmount=="function"&&G1(g,g.return,_),jp(g);break;case 27:Zp(g.stateNode);case 26:case 5:dl(g,g.return),jp(g);break;case 22:g.memoizedState===null&&jp(g);break;case 30:jp(g);break;default:jp(g)}A=A.sibling}}function wh(A,g,_){for(_=_&&(g.subtreeFlags&8772)!==0,g=g.child;g!==null;){var I=g.alternate,j=A,$=g,Ce=$.flags;switch($.tag){case 0:case 11:case 15:wh(j,$,_),ig(4,$);break;case 1:if(wh(j,$,_),I=$,j=I.stateNode,typeof j.componentDidMount=="function")try{j.componentDidMount()}catch(Vt){Xo(I,I.return,Vt)}if(I=$,j=I.updateQueue,j!==null){var Ye=I.stateNode;try{var vt=j.shared.hiddenCallbacks;if(vt!==null)for(j.shared.hiddenCallbacks=null,j=0;j<vt.length;j++)zc(vt[j],Ye)}catch(Vt){Xo(I,I.return,Vt)}}_&&Ce&64&&zp($),hl($,$.return);break;case 27:yC($);case 26:case 5:wh(j,$,_),_&&I===null&&Ce&4&&mC($),hl($,$.return);break;case 12:wh(j,$,_);break;case 31:wh(j,$,_),_&&Ce&4&&V1(j,$);break;case 13:wh(j,$,_),_&&Ce&4&&og(j,$);break;case 22:$.memoizedState===null&&wh(j,$,_),hl($,$.return);break;case 30:break;default:wh(j,$,_)}g=g.sibling}}function Np(A,g){var _=null;A!==null&&A.memoizedState!==null&&A.memoizedState.cachePool!==null&&(_=A.memoizedState.cachePool.pool),A=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(A=g.memoizedState.cachePool.pool),A!==_&&(A!=null&&A.refCount++,_!=null&&Ra(_))}function O0(A,g){A=null,g.alternate!==null&&(A=g.alternate.memoizedState.cache),g=g.memoizedState.cache,g!==A&&(g.refCount++,A!=null&&Ra(A))}function qA(A,g,_,I){if(g.subtreeFlags&10256)for(g=g.child;g!==null;)Sv(A,g,_,I),g=g.sibling}function Sv(A,g,_,I){var j=g.flags;switch(g.tag){case 0:case 11:case 15:qA(A,g,_,I),j&2048&&ig(9,g);break;case 1:qA(A,g,_,I);break;case 3:qA(A,g,_,I),j&2048&&(A=null,g.alternate!==null&&(A=g.alternate.memoizedState.cache),g=g.memoizedState.cache,g!==A&&(g.refCount++,A!=null&&Ra(A)));break;case 12:if(j&2048){qA(A,g,_,I),A=g.stateNode;try{var $=g.memoizedProps,Ce=$.id,Ye=$.onPostCommit;typeof Ye=="function"&&Ye(Ce,g.alternate===null?"mount":"update",A.passiveEffectDuration,-0)}catch(vt){Xo(g,g.return,vt)}}else qA(A,g,_,I);break;case 31:qA(A,g,_,I);break;case 13:qA(A,g,_,I);break;case 23:break;case 22:$=g.stateNode,Ce=g.alternate,g.memoizedState!==null?$._visibility&2?qA(A,g,_,I):I0(A,g):$._visibility&2?qA(A,g,_,I):($._visibility|=2,Rf(A,g,_,I,(g.subtreeFlags&10256)!==0||!1)),j&2048&&Np(Ce,g);break;case 24:qA(A,g,_,I),j&2048&&O0(g.alternate,g);break;default:qA(A,g,_,I)}}function Rf(A,g,_,I,j){for(j=j&&((g.subtreeFlags&10256)!==0||!1),g=g.child;g!==null;){var $=A,Ce=g,Ye=_,vt=I,Vt=Ce.flags;switch(Ce.tag){case 0:case 11:case 15:Rf($,Ce,Ye,vt,j),ig(8,Ce);break;case 23:break;case 22:var cn=Ce.stateNode;Ce.memoizedState!==null?cn._visibility&2?Rf($,Ce,Ye,vt,j):I0($,Ce):(cn._visibility|=2,Rf($,Ce,Ye,vt,j)),j&&Vt&2048&&Np(Ce.alternate,Ce);break;case 24:Rf($,Ce,Ye,vt,j),j&&Vt&2048&&O0(Ce.alternate,Ce);break;default:Rf($,Ce,Ye,vt,j)}g=g.sibling}}function I0(A,g){if(g.subtreeFlags&10256)for(g=g.child;g!==null;){var _=A,I=g,j=I.flags;switch(I.tag){case 22:I0(_,I),j&2048&&Np(I.alternate,I);break;case 24:I0(_,I),j&2048&&O0(I.alternate,I);break;default:I0(_,I)}g=g.sibling}}var k0=8192;function ag(A,g,_){if(A.subtreeFlags&k0)for(A=A.child;A!==null;)vC(A,g,_),A=A.sibling}function vC(A,g,_){switch(A.tag){case 26:ag(A,g,_),A.flags&k0&&A.memoizedState!==null&&Se(_,ju,A.memoizedState,A.memoizedProps);break;case 5:ag(A,g,_);break;case 3:case 4:var I=ju;ju=Y0(A.stateNode.containerInfo),ag(A,g,_),ju=I;break;case 22:A.memoizedState===null&&(I=A.alternate,I!==null&&I.memoizedState!==null?(I=k0,k0=16777216,ag(A,g,_),k0=I):ag(A,g,_));break;default:ag(A,g,_)}}function Gp(A){var g=A.alternate;if(g!==null&&(A=g.child,A!==null)){g.child=null;do g=A.sibling,A.sibling=null,A=g;while(A!==null)}}function T0(A){var g=A.deletions;if((A.flags&16)!==0){if(g!==null)for(var _=0;_<g.length;_++){var I=g[_];$l=I,CC(I,A)}Gp(A)}if(A.subtreeFlags&10256)for(A=A.child;A!==null;)bC(A),A=A.sibling}function bC(A){switch(A.tag){case 0:case 11:case 15:T0(A),A.flags&2048&&YA(9,A,A.return);break;case 3:T0(A);break;case 12:T0(A);break;case 22:var g=A.stateNode;A.memoizedState!==null&&g._visibility&2&&(A.return===null||A.return.tag!==13)?(g._visibility&=-3,R0(A)):T0(A);break;default:T0(A)}}function R0(A){var g=A.deletions;if((A.flags&16)!==0){if(g!==null)for(var _=0;_<g.length;_++){var I=g[_];$l=I,CC(I,A)}Gp(A)}for(A=A.child;A!==null;){switch(g=A,g.tag){case 0:case 11:case 15:YA(8,g,g.return),R0(g);break;case 22:_=g.stateNode,_._visibility&2&&(_._visibility&=-3,R0(g));break;default:R0(g)}A=A.sibling}}function CC(A,g){for(;$l!==null;){var _=$l;switch(_.tag){case 0:case 11:case 15:YA(8,_,g);break;case 23:case 22:if(_.memoizedState!==null&&_.memoizedState.cachePool!==null){var I=_.memoizedState.cachePool.pool;I!=null&&I.refCount++}break;case 24:Ra(_.memoizedState.cache)}if(I=_.child,I!==null)I.return=_,$l=I;else e:for(_=A;$l!==null;){I=$l;var j=I.sibling,$=I.return;if(q1(I),I===_){$l=null;break e}if(j!==null){j.return=$,$l=j;break e}$l=$}}}var _C={getCacheForType:function(A){var g=Ha($s),_=g.data.get(A);return _===void 0&&(_=A(),g.data.set(A,_)),_},cacheSignal:function(){return Ha($s).controller.signal}},e2=typeof WeakMap=="function"?WeakMap:Map,So=0,Go=null,Qr=null,Ao=0,us=0,Wc=null,Qd=!1,lg=!1,Ev=!1,yc=0,la=0,Df=0,Wp=0,Bv=0,fA=0,ug=0,cg=null,Nu=null,$1=!1,Ag=0,Ov=0,Qp=1/0,Yp=null,Pf=null,pl=0,Uf=null,hg=null,Yd=0,H1=0,Iv=null,xC=null,qd=0,Ua=null;function vc(){return(So&2)!==0&&Ao!==0?Ao&-Ao:Ee.T!==null?Cc():Li()}function kv(){if(fA===0)if((Ao&536870912)===0||zr){var A=xt;xt<<=1,(xt&3932160)===0&&(xt=262144),fA=A}else fA=536870912;return A=Il.current,A!==null&&(A.flags|=32),fA}function bc(A,g,_){(A===Go&&(us===2||us===9)||A.cancelPendingCommit!==null)&&(dg(A,0),Vd(A,Ao,fA,!1)),Zi(A,_),((So&2)===0||A!==Go)&&(A===Go&&((So&2)===0&&(Wp|=_),la===4&&Vd(A,Ao,fA,!1)),bu(A))}function Z1(A,g,_){if((So&6)!==0)throw Error(i(327));var I=!_&&(g&127)===0&&(g&A.expiredLanes)===0||yi(A,g),j=I?n2(A,g):Dv(A,g,!0),$=I;do{if(j===0){lg&&!I&&Vd(A,g,0,!1);break}else{if(_=A.current.alternate,$&&!Tv(_)){j=Dv(A,g,!1),$=!1;continue}if(j===2){if($=g,A.errorRecoveryDisabledLanes&$)var Ce=0;else Ce=A.pendingLanes&-536870913,Ce=Ce!==0?Ce:Ce&536870912?536870912:0;if(Ce!==0){g=Ce;e:{var Ye=A;j=cg;var vt=Ye.current.memoizedState.isDehydrated;if(vt&&(dg(Ye,Ce).flags|=256),Ce=Dv(Ye,Ce,!1),Ce!==2){if(Ev&&!vt){Ye.errorRecoveryDisabledLanes|=$,Wp|=$,j=4;break e}$=Nu,Nu=j,$!==null&&(Nu===null?Nu=$:Nu.push.apply(Nu,$))}j=Ce}if($=!1,j!==2)continue}}if(j===1){dg(A,0),Vd(A,g,0,!0);break}e:{switch(I=A,$=j,$){case 0:case 1:throw Error(i(345));case 4:if((g&4194048)!==g)break;case 6:Vd(I,g,fA,!Qd);break e;case 2:Nu=null;break;case 3:case 5:break;default:throw Error(i(329))}if((g&62914560)===g&&(j=Ag+300-Zn(),10<j)){if(Vd(I,g,fA,!Qd),Xn(I,0,!0)!==0)break e;Yd=g,I.timeoutHandle=Yv(qp.bind(null,I,_,Nu,Yp,$1,g,fA,Wp,ug,Qd,$,"Throttled",-0,0),j);break e}qp(I,_,Nu,Yp,$1,g,fA,Wp,ug,Qd,$,null,-0,0)}}break}while(!0);bu(A)}function qp(A,g,_,I,j,$,Ce,Ye,vt,Vt,cn,yn,Xt,on){if(A.timeoutHandle=-1,yn=g.subtreeFlags,yn&8192||(yn&16785408)===16785408){yn={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Vi},vC(g,$,yn);var Ii=($&62914560)===$?Ag-Zn():($&4194048)===$?Ov-Zn():0;if(Ii=ze(yn,Ii),Ii!==null){Yd=$,A.cancelPendingCommit=Ii(P0.bind(null,A,g,$,_,I,j,Ce,Ye,vt,cn,yn,null,Xt,on)),Vd(A,$,Ce,!Vt);return}}P0(A,g,$,_,I,j,Ce,Ye,vt)}function Tv(A){for(var g=A;;){var _=g.tag;if((_===0||_===11||_===15)&&g.flags&16384&&(_=g.updateQueue,_!==null&&(_=_.stores,_!==null)))for(var I=0;I<_.length;I++){var j=_[I],$=j.getSnapshot;j=j.value;try{if(!Bs($(),j))return!1}catch{return!1}}if(_=g.child,g.subtreeFlags&16384&&_!==null)_.return=g,g=_;else{if(g===A)break;for(;g.sibling===null;){if(g.return===null||g.return===A)return!0;g=g.return}g.sibling.return=g.return,g=g.sibling}}return!0}function Vd(A,g,_,I){g&=~Bv,g&=~Wp,A.suspendedLanes|=g,A.pingedLanes&=~g,I&&(A.warmLanes|=g),I=A.expirationTimes;for(var j=g;0<j;){var $=31-Pe(j),Ce=1<<$;I[$]=-1,j&=~Ce}_!==0&&Ji(A,_,g)}function X1(){return(So&6)===0?(gg(0),!1):!0}function Rv(){if(Qr!==null){if(us===0)var A=Qr.return;else A=Qr,aA=br=null,Of(A),lA=null,Ku=0,A=Qr;for(;A!==null;)N1(A.alternate,A),A=A.return;Qr=null}}function dg(A,g){var _=A.timeoutHandle;_!==-1&&(A.timeoutHandle=-1,TC(_)),_=A.cancelPendingCommit,_!==null&&(A.cancelPendingCommit=null,_()),Yd=0,Rv(),Go=A,Qr=_=ol(A.current,null),Ao=g,us=0,Wc=null,Qd=!1,lg=yi(A,g),Ev=!1,ug=fA=Bv=Wp=Df=la=0,Nu=cg=null,$1=!1,(g&8)!==0&&(g|=g&32);var I=A.entangledLanes;if(I!==0)for(A=A.entanglements,I&=g;0<I;){var j=31-Pe(I),$=1<<j;g|=A[j],I&=~$}return yc=g,Pu(),_}function MC(A,g){Bi=null,Ee.H=Ch,g===Qn||g===Kd?(g=Zm(),us=3):g===Sp?(g=Zm(),us=4):us=g===x0?8:g!==null&&typeof g=="object"&&typeof g.then=="function"?6:1,Wc=g,Qr===null&&(la=1,Up(A,Bl(g,A.current)))}function D0(){var A=Il.current;return A===null?!0:(Ao&4194048)===Ao?os===null:(Ao&62914560)===Ao||(Ao&536870912)!==0?A===os:!1}function wC(){var A=Ee.H;return Ee.H=Ch,A===null?Ch:A}function SC(){var A=Ee.A;return Ee.A=_C,A}function J1(){la=4,Qd||(Ao&4194048)!==Ao&&Il.current!==null||(lg=!0),(Df&134217727)===0&&(Wp&134217727)===0||Go===null||Vd(Go,Ao,fA,!1)}function Dv(A,g,_){var I=So;So|=2;var j=wC(),$=SC();(Go!==A||Ao!==g)&&(Yp=null,dg(A,g)),g=!1;var Ce=la;e:do try{if(us!==0&&Qr!==null){var Ye=Qr,vt=Wc;switch(us){case 8:Rv(),Ce=6;break e;case 3:case 2:case 9:case 6:Il.current===null&&(g=!0);var Vt=us;if(us=0,Wc=null,pA(A,Ye,vt,Vt),_&&lg){Ce=0;break e}break;default:Vt=us,us=0,Wc=null,pA(A,Ye,vt,Vt)}}t2(),Ce=la;break}catch(cn){MC(A,cn)}while(!0);return g&&A.shellSuspendCounter++,aA=br=null,So=I,Ee.H=j,Ee.A=$,Qr===null&&(Go=null,Ao=0,Pu()),Ce}function t2(){for(;Qr!==null;)ey(Qr)}function n2(A,g){var _=So;So|=2;var I=wC(),j=SC();Go!==A||Ao!==g?(Yp=null,Qp=Zn()+500,dg(A,g)):lg=yi(A,g);e:do try{if(us!==0&&Qr!==null){g=Qr;var $=Wc;t:switch(us){case 1:us=0,Wc=null,pA(A,g,$,1);break;case 2:case 9:if(LA($)){us=0,Wc=null,Pv(g);break}g=function(){us!==2&&us!==9||Go!==A||(us=7),bu(A)},$.then(g,g);break e;case 3:us=7;break e;case 4:us=5;break e;case 7:LA($)?(us=0,Wc=null,Pv(g)):(us=0,Wc=null,pA(A,g,$,7));break;case 5:var Ce=null;switch(Qr.tag){case 26:Ce=Qr.memoizedState;case 5:case 27:var Ye=Qr;if(Ce?_e(Ce):Ye.stateNode.complete){us=0,Wc=null;var vt=Ye.sibling;if(vt!==null)Qr=vt;else{var Vt=Ye.return;Vt!==null?(Qr=Vt,Kf(Vt)):Qr=null}break t}}us=0,Wc=null,pA(A,g,$,5);break;case 6:us=0,Wc=null,pA(A,g,$,6);break;case 8:Rv(),la=6;break e;default:throw Error(i(462))}}EC();break}catch(cn){MC(A,cn)}while(!0);return aA=br=null,Ee.H=I,Ee.A=j,So=_,Qr!==null?0:(Go=null,Ao=0,Pu(),la)}function EC(){for(;Qr!==null&&!Un();)ey(Qr)}function ey(A){var g=yv(A.alternate,A,yc);A.memoizedProps=A.pendingProps,g===null?Kf(A):Qr=g}function Pv(A){var g=A,_=g.alternate;switch(g.tag){case 15:case 0:g=L1(_,g,g.pendingProps,g.type,void 0,Ao);break;case 11:g=L1(_,g,g.pendingProps,g.type.render,g.ref,Ao);break;case 5:Of(g);default:N1(_,g),g=Qr=I1(g,yc),g=yv(_,g,yc)}A.memoizedProps=A.pendingProps,g===null?Kf(A):Qr=g}function pA(A,g,_,I){aA=br=null,Of(g),lA=null,Ku=0;var j=g.return;try{if(_0(A,j,g,_,Ao)){la=1,Up(A,Bl(_,A.current)),Qr=null;return}}catch($){if(j!==null)throw Qr=j,$;la=1,Up(A,Bl(_,A.current)),Qr=null;return}g.flags&32768?(zr||I===1?A=!0:lg||(Ao&536870912)!==0?A=!1:(Qd=A=!0,(I===2||I===9||I===3||I===6)&&(I=Il.current,I!==null&&I.tag===13&&(I.flags|=16384))),sd(g,A)):Kf(g)}function Kf(A){var g=A;do{if((g.flags&32768)!==0){sd(g,Qd);return}A=g.return;var _=bv(g.alternate,g,yc);if(_!==null){Qr=_;return}if(g=g.sibling,g!==null){Qr=g;return}Qr=g=A}while(g!==null);la===0&&(la=5)}function sd(A,g){do{var _=B0(A.alternate,A);if(_!==null){_.flags&=32767,Qr=_;return}if(_=A.return,_!==null&&(_.flags|=32768,_.subtreeFlags=0,_.deletions=null),!g&&(A=A.sibling,A!==null)){Qr=A;return}Qr=A=_}while(A!==null);la=6,Qr=null}function P0(A,g,_,I,j,$,Ce,Ye,vt){A.cancelPendingCommit=null;do pg();while(pl!==0);if((So&6)!==0)throw Error(i(327));if(g!==null){if(g===A.current)throw Error(i(177));if($=g.lanes|g.childLanes,$|=OA,Ki(A,_,$,Ce,Ye,vt),A===Go&&(Qr=Go=null,Ao=0),hg=g,Uf=A,Yd=_,H1=$,Iv=j,xC=I,(g.subtreeFlags&10256)!==0||(g.flags&10256)!==0?(A.callbackNode=null,A.callbackPriority=0,r2(ie,function(){return Kv(),null})):(A.callbackNode=null,A.callbackPriority=0),I=(g.flags&13878)!==0,(g.subtreeFlags&13878)!==0||I){I=Ee.T,Ee.T=null,j=qe.p,qe.p=2,Ce=So,So|=4;try{Ca(A,g,_)}finally{So=Ce,qe.p=j,Ee.T=I}}pl=1,fg(),Uv(),ty()}}function fg(){if(pl===1){pl=0;var A=Uf,g=hg,_=(g.flags&13878)!==0;if((g.subtreeFlags&13878)!==0||_){_=Ee.T,Ee.T=null;var I=qe.p;qe.p=2;var j=So;So|=4;try{sg(g,A);var $=uy,Ce=vp(A.containerInfo),Ye=$.focusedElem,vt=$.selectionRange;if(Ce!==Ye&&Ye&&Ye.ownerDocument&&Qm(Ye.ownerDocument.documentElement,Ye)){if(vt!==null&&Ym(Ye)){var Vt=vt.start,cn=vt.end;if(cn===void 0&&(cn=Vt),"selectionStart"in Ye)Ye.selectionStart=Vt,Ye.selectionEnd=Math.min(cn,Ye.value.length);else{var yn=Ye.ownerDocument||document,Xt=yn&&yn.defaultView||window;if(Xt.getSelection){var on=Xt.getSelection(),Ii=Ye.textContent.length,rr=Math.min(vt.start,Ii),xs=vt.end===void 0?rr:Math.min(vt.end,Ii);!on.extend&&rr>xs&&(Ce=xs,xs=rr,rr=Ce);var Ut=Wm(Ye,rr),It=Wm(Ye,xs);if(Ut&&It&&(on.rangeCount!==1||on.anchorNode!==Ut.node||on.anchorOffset!==Ut.offset||on.focusNode!==It.node||on.focusOffset!==It.offset)){var Wt=yn.createRange();Wt.setStart(Ut.node,Ut.offset),on.removeAllRanges(),rr>xs?(on.addRange(Wt),on.extend(It.node,It.offset)):(Wt.setEnd(It.node,It.offset),on.addRange(Wt))}}}}for(yn=[],on=Ye;on=on.parentNode;)on.nodeType===1&&yn.push({element:on,left:on.scrollLeft,top:on.scrollTop});for(typeof Ye.focus=="function"&&Ye.focus(),Ye=0;Ye<yn.length;Ye++){var hn=yn[Ye];hn.element.scrollLeft=hn.left,hn.element.scrollTop=hn.top}}Kn=!!_g,uy=_g=null}finally{So=j,qe.p=I,Ee.T=_}}A.current=g,pl=2}}function Uv(){if(pl===2){pl=0;var A=Uf,g=hg,_=(g.flags&8772)!==0;if((g.subtreeFlags&8772)!==0||_){_=Ee.T,Ee.T=null;var I=qe.p;qe.p=2;var j=So;So|=4;try{Tf(A,g.alternate,g)}finally{So=j,qe.p=I,Ee.T=_}}pl=3}}function ty(){if(pl===4||pl===3){pl=0,xn();var A=Uf,g=hg,_=Yd,I=xC;(g.subtreeFlags&10256)!==0||(g.flags&10256)!==0?pl=5:(pl=0,hg=Uf=null,ny(A,A.pendingLanes));var j=A.pendingLanes;if(j===0&&(Pf=null),rn(_),g=g.stateNode,We&&typeof We.onCommitFiberRoot=="function")try{We.onCommitFiberRoot(ve,g,void 0,(g.current.flags&128)===128)}catch{}if(I!==null){g=Ee.T,j=qe.p,qe.p=2,Ee.T=null;try{for(var $=A.onRecoverableError,Ce=0;Ce<I.length;Ce++){var Ye=I[Ce];$(Ye.value,{componentStack:Ye.stack})}}finally{Ee.T=g,qe.p=j}}(Yd&3)!==0&&pg(),bu(A),j=A.pendingLanes,(_&261930)!==0&&(j&42)!==0?A===Ua?qd++:(qd=0,Ua=A):qd=0,gg(0)}}function ny(A,g){(A.pooledCacheLanes&=g)===0&&(g=A.pooledCache,g!=null&&(A.pooledCache=null,Ra(g)))}function pg(){return fg(),Uv(),ty(),Kv()}function Kv(){if(pl!==5)return!1;var A=Uf,g=H1;H1=0;var _=rn(Yd),I=Ee.T,j=qe.p;try{qe.p=32>_?32:_,Ee.T=null,_=Iv,Iv=null;var $=Uf,Ce=Yd;if(pl=0,hg=Uf=null,Yd=0,(So&6)!==0)throw Error(i(331));var Ye=So;if(So|=4,bC($.current),Sv($,$.current,Ce,_),So=Ye,gg(0,!1),We&&typeof We.onPostCommitFiberRoot=="function")try{We.onPostCommitFiberRoot(ve,$)}catch{}return!0}finally{qe.p=j,Ee.T=I,ny(A,g)}}function iy(A,g,_){g=Bl(_,g),g=Jm(A.stateNode,g,2),A=Fc(A,g,2),A!==null&&(Zi(A,2),bu(A))}function Xo(A,g,_){if(A.tag===3)iy(A,A,_);else for(;g!==null;){if(g.tag===3){iy(g,A,_);break}else if(g.tag===1){var I=g.stateNode;if(typeof g.type.getDerivedStateFromError=="function"||typeof I.componentDidCatch=="function"&&(Pf===null||!Pf.has(I))){A=Bl(_,A),_=_h(2),I=Fc(g,_,2),I!==null&&(P1(_,I,g,A),Zi(I,2),bu(I));break}}g=g.return}}function U0(A,g,_){var I=A.pingCache;if(I===null){I=A.pingCache=new e2;var j=new Set;I.set(g,j)}else j=I.get(g),j===void 0&&(j=new Set,I.set(g,j));j.has(_)||(Ev=!0,j.add(_),A=Lv.bind(null,A,g,_),g.then(A,A))}function Lv(A,g,_){var I=A.pingCache;I!==null&&I.delete(g),A.pingedLanes|=A.suspendedLanes&_,A.warmLanes&=~_,Go===A&&(Ao&_)===_&&(la===4||la===3&&(Ao&62914560)===Ao&&300>Zn()-Ag?(So&2)===0&&dg(A,0):Bv|=_,ug===Ao&&(ug=0)),bu(A)}function K0(A,g){g===0&&(g=Fn()),A=lu(A,g),A!==null&&(Zi(A,g),bu(A))}function L0(A){var g=A.memoizedState,_=0;g!==null&&(_=g.retryLane),K0(A,_)}function i2(A,g){var _=0;switch(A.tag){case 31:case 13:var I=A.stateNode,j=A.memoizedState;j!==null&&(_=j.retryLane);break;case 19:I=A.stateNode;break;case 22:I=A.stateNode._retryCache;break;default:throw Error(i(314))}I!==null&&I.delete(g),K0(A,_)}function r2(A,g){return _i(A,g)}var mg=null,Vp=null,Fv=!1,F0=!1,ry=!1,Gu=0;function bu(A){A!==Vp&&A.next===null&&(Vp===null?mg=Vp=A:Vp=Vp.next=A),F0=!0,Fv||(Fv=!0,jv())}function gg(A,g){if(!ry&&F0){ry=!0;do for(var _=!1,I=mg;I!==null;){if(A!==0){var j=I.pendingLanes;if(j===0)var $=0;else{var Ce=I.suspendedLanes,Ye=I.pingedLanes;$=(1<<31-Pe(42|A)+1)-1,$&=j&~(Ce&~Ye),$=$&201326741?$&201326741|1:$?$|2:0}$!==0&&(_=!0,OC(I,$))}else $=Ao,$=Xn(I,I===Go?$:0,I.cancelPendingCommit!==null||I.timeoutHandle!==-1),($&3)===0||yi(I,$)||(_=!0,OC(I,$));I=I.next}while(_);ry=!1}}function zv(){BC()}function BC(){F0=Fv=!1;var A=0;Gu!==0&&kC()&&(A=Gu);for(var g=Zn(),_=null,I=mg;I!==null;){var j=I.next,$=z0(I,g);$===0?(I.next=null,_===null?mg=j:_.next=j,j===null&&(Vp=_)):(_=I,(A!==0||($&3)!==0)&&(F0=!0)),I=j}pl!==0&&pl!==5||gg(A),Gu!==0&&(Gu=0)}function z0(A,g){for(var _=A.suspendedLanes,I=A.pingedLanes,j=A.expirationTimes,$=A.pendingLanes&-62914561;0<$;){var Ce=31-Pe($),Ye=1<<Ce,vt=j[Ce];vt===-1?((Ye&_)===0||(Ye&I)!==0)&&(j[Ce]=Dn(Ye,g)):vt<=g&&(A.expiredLanes|=Ye),$&=~Ye}if(g=Go,_=Ao,_=Xn(A,A===g?_:0,A.cancelPendingCommit!==null||A.timeoutHandle!==-1),I=A.callbackNode,_===0||A===g&&(us===2||us===9)||A.cancelPendingCommit!==null)return I!==null&&I!==null&&Ln(I),A.callbackNode=null,A.callbackPriority=0;if((_&3)===0||yi(A,_)){if(g=_&-_,g===A.callbackPriority)return g;switch(I!==null&&Ln(I),rn(_)){case 2:case 8:_=be;break;case 32:_=ie;break;case 268435456:_=de;break;default:_=ie}return I=oy.bind(null,A),_=_i(_,I),A.callbackPriority=g,A.callbackNode=_,g}return I!==null&&I!==null&&Ln(I),A.callbackPriority=2,A.callbackNode=null,2}function oy(A,g){if(pl!==0&&pl!==5)return A.callbackNode=null,A.callbackPriority=0,null;var _=A.callbackNode;if(pg()&&A.callbackNode!==_)return null;var I=Ao;return I=Xn(A,A===Go?I:0,A.cancelPendingCommit!==null||A.timeoutHandle!==-1),I===0?null:(Z1(A,I,g),z0(A,Zn()),A.callbackNode!=null&&A.callbackNode===_?oy.bind(null,A):null)}function OC(A,g){if(pg())return null;Z1(A,g,!0)}function jv(){RC(function(){(So&6)!==0?_i(Ot,zv):BC()})}function Cc(){if(Gu===0){var A=Da;A===0&&(A=Dt,Dt<<=1,(Dt&261888)===0&&(Dt=256)),Gu=A}return Gu}function $p(A){return A==null||typeof A=="symbol"||typeof A=="boolean"?null:typeof A=="function"?A:Fi(""+A)}function Nv(A,g){var _=g.ownerDocument.createElement("input");return _.name=g.name,_.value=g.value,A.id&&_.setAttribute("form",A.id),g.parentNode.insertBefore(_,g),A=new FormData(A),_.parentNode.removeChild(_),A}function Lf(A,g,_,I,j){if(g==="submit"&&_&&_.stateNode===j){var $=$p((j[pn]||null).action),Ce=I.submitter;Ce&&(g=(g=Ce[pn]||null)?$p(g.formAction):Ce.getAttribute("formAction"),g!==null&&($=g,Ce=null));var Ye=new nn("action","action",null,I,j);A.push({event:Ye,listeners:[{instance:null,listener:function(){if(I.defaultPrevented){if(Gu!==0){var vt=Ce?Nv(j,Ce):new FormData(j);zu(_,{pending:!0,data:vt,method:j.method,action:$},null,vt)}}else typeof $=="function"&&(Ye.preventDefault(),vt=Ce?Nv(j,Ce):new FormData(j),zu(_,{pending:!0,data:vt,method:j.method,action:$},$,vt))},currentTarget:j}]})}}for(var vr=0;vr<Cp.length;vr++){var sy=Cp[vr],Cu=sy.toLowerCase(),Ka=sy[0].toUpperCase()+sy.slice(1);Wl(Cu,"on"+Ka)}Wl(Gl,"onAnimationEnd"),Wl(Qh,"onAnimationIteration"),Wl(qm,"onAnimationStart"),Wl("dblclick","onDoubleClick"),Wl("focusin","onFocus"),Wl("focusout","onBlur"),Wl(Rc,"onTransitionRun"),Wl(Yh,"onTransitionStart"),Wl(uh,"onTransitionCancel"),Wl(Br,"onTransitionEnd"),fa("onMouseEnter",["mouseout","mouseover"]),fa("onMouseLeave",["mouseout","mouseover"]),fa("onPointerEnter",["pointerout","pointerover"]),fa("onPointerLeave",["pointerout","pointerover"]),Lr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Lr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Lr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Lr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Lr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Lr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var j0="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ff=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(j0));function IC(A,g){g=(g&4)!==0;for(var _=0;_<A.length;_++){var I=A[_],j=I.event;I=I.listeners;e:{var $=void 0;if(g)for(var Ce=I.length-1;0<=Ce;Ce--){var Ye=I[Ce],vt=Ye.instance,Vt=Ye.currentTarget;if(Ye=Ye.listener,vt!==$&&j.isPropagationStopped())break e;$=Ye,j.currentTarget=Vt;try{$(j)}catch(cn){BA(cn)}j.currentTarget=null,$=vt}else for(Ce=0;Ce<I.length;Ce++){if(Ye=I[Ce],vt=Ye.instance,Vt=Ye.currentTarget,Ye=Ye.listener,vt!==$&&j.isPropagationStopped())break e;$=Ye,j.currentTarget=Vt;try{$(j)}catch(cn){BA(cn)}j.currentTarget=null,$=vt}}}}function so(A,g){var _=g[oi];_===void 0&&(_=g[oi]=new Set);var I=A+"__bubble";_.has(I)||(N0(g,A,2,!1),_.add(I))}function Gv(A,g,_){var I=0;g&&(I|=4),N0(_,A,I,g)}var yg="_reactListening"+Math.random().toString(36).slice(2);function ad(A){if(!A[yg]){A[yg]=!0,iA.forEach(function(_){_!=="selectionchange"&&(Ff.has(_)||Gv(_,!1,A),Gv(_,!0,A))});var g=A.nodeType===9?A:A.ownerDocument;g===null||g[yg]||(g[yg]=!0,Gv("selectionchange",!1,g))}}function N0(A,g,_,I){switch(Fs(g)){case 2:var j=un;break;case 8:j=Gi;break;default:j=Xi}_=j.bind(null,g,_,A),j=void 0,!Es||g!=="touchstart"&&g!=="touchmove"&&g!=="wheel"||(j=!0),I?j!==void 0?A.addEventListener(g,_,{capture:!0,passive:j}):A.addEventListener(g,_,!0):j!==void 0?A.addEventListener(g,_,{passive:j}):A.addEventListener(g,_,!1)}function ay(A,g,_,I,j){var $=I;if((g&1)===0&&(g&2)===0&&I!==null)e:for(;;){if(I===null)return;var Ce=I.tag;if(Ce===3||Ce===4){var Ye=I.stateNode.containerInfo;if(Ye===j)break;if(Ce===4)for(Ce=I.return;Ce!==null;){var vt=Ce.tag;if((vt===3||vt===4)&&Ce.stateNode.containerInfo===j)return;Ce=Ce.return}for(;Ye!==null;){if(Ce=no(Ye),Ce===null)return;if(vt=Ce.tag,vt===5||vt===6||vt===26||vt===27){I=$=Ce;continue e}Ye=Ye.parentNode}}I=I.return}yo(function(){var Vt=$,cn=Ia(_),yn=[];e:{var Xt=y0.get(A);if(Xt!==void 0){var on=nn,Ii=A;switch(A){case"keypress":if(J(_)===0)break e;case"keydown":case"keyup":on=Nl;break;case"focusin":Ii="focus",on=Zo;break;case"focusout":Ii="blur",on=Zo;break;case"beforeblur":case"afterblur":on=Zo;break;case"click":if(_.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":on=mr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":on=Hr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":on=Pm;break;case Gl:case Qh:case qm:on=su;break;case Br:on=oA;break;case"scroll":case"scrollend":on=Gn;break;case"wheel":on=sh;break;case"copy":case"cut":case"paste":on=rs;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":on=E1;break;case"toggle":case"beforetoggle":on=dp}var rr=(g&4)!==0,xs=!rr&&(A==="scroll"||A==="scrollend"),Ut=rr?Xt!==null?Xt+"Capture":null:Xt;rr=[];for(var It=Vt,Wt;It!==null;){var hn=It;if(Wt=hn.stateNode,hn=hn.tag,hn!==5&&hn!==26&&hn!==27||Wt===null||Ut===null||(hn=zl(It,Ut),hn!=null&&rr.push(Qc(It,hn,Wt))),xs)break;It=It.return}0<rr.length&&(Xt=new on(Xt,Ii,null,_,cn),yn.push({event:Xt,listeners:rr}))}}if((g&7)===0){e:{if(Xt=A==="mouseover"||A==="pointerover",on=A==="mouseout"||A==="pointerout",Xt&&_!==Co&&(Ii=_.relatedTarget||_.fromElement)&&(no(Ii)||Ii[zi]))break e;if((on||Xt)&&(Xt=cn.window===cn?cn:(Xt=cn.ownerDocument)?Xt.defaultView||Xt.parentWindow:window,on?(Ii=_.relatedTarget||_.toElement,on=Vt,Ii=Ii?no(Ii):null,Ii!==null&&(xs=o(Ii),rr=Ii.tag,Ii!==xs||rr!==5&&rr!==27&&rr!==6)&&(Ii=null)):(on=null,Ii=Vt),on!==Ii)){if(rr=mr,hn="onMouseLeave",Ut="onMouseEnter",It="mouse",(A==="pointerout"||A==="pointerover")&&(rr=E1,hn="onPointerLeave",Ut="onPointerEnter",It="pointer"),xs=on==null?Xt:rl(on),Wt=Ii==null?Xt:rl(Ii),Xt=new rr(hn,It+"leave",on,_,cn),Xt.target=xs,Xt.relatedTarget=Wt,hn=null,no(cn)===Vt&&(rr=new rr(Ut,It+"enter",Ii,_,cn),rr.target=Wt,rr.relatedTarget=xs,hn=rr),xs=hn,on&&Ii)t:{for(rr=G0,Ut=on,It=Ii,Wt=0,hn=Ut;hn;hn=rr(hn))Wt++;hn=0;for(var $i=It;$i;$i=rr($i))hn++;for(;0<Wt-hn;)Ut=rr(Ut),Wt--;for(;0<hn-Wt;)It=rr(It),hn--;for(;Wt--;){if(Ut===It||It!==null&&Ut===It.alternate){rr=Ut;break t}Ut=rr(Ut),It=rr(It)}rr=null}else rr=null;on!==null&&ta(yn,Xt,on,rr,!1),Ii!==null&&xs!==null&&ta(yn,xs,Ii,rr,!0)}}e:{if(Xt=Vt?rl(Vt):window,on=Xt.nodeName&&Xt.nodeName.toLowerCase(),on==="select"||on==="input"&&Xt.type==="file")var Do=jh;else if(Fm(Xt))if(Nh)Do=O1;else{Do=Gm;var Di=Nm}else on=Xt.nodeName,!on||on.toLowerCase()!=="input"||Xt.type!=="checkbox"&&Xt.type!=="radio"?Vt&&_A(Vt.elementType)&&(Do=jh):Do=g0;if(Do&&(Do=Do(A,Vt))){gp(yn,Do,_,cn);break e}Di&&Di(A,Xt,Vt),A==="focusout"&&Vt&&Xt.type==="number"&&Vt.memoizedProps.value!=null&&rA(Xt,"number",Xt.value)}switch(Di=Vt?rl(Vt):window,A){case"focusin":(Fm(Di)||Di.contentEditable==="true")&&(Rt=Di,ln=Vt,Pt=null);break;case"focusout":Pt=ln=Rt=null;break;case"mousedown":Ai=!0;break;case"contextmenu":case"mouseup":case"dragend":Ai=!1,gr(yn,_,cn);break;case"selectionchange":if(Wh)break;case"keydown":case"keyup":gr(yn,_,cn)}var Kr;if(oc)e:{switch(A){case"compositionstart":var ir="onCompositionStart";break e;case"compositionend":ir="onCompositionEnd";break e;case"compositionupdate":ir="onCompositionUpdate";break e}ir=void 0}else sc?zh(A,_)&&(ir="onCompositionEnd"):A==="keydown"&&_.keyCode===229&&(ir="onCompositionStart");ir&&(xA&&_.locale!=="ko"&&(sc||ir!=="onCompositionStart"?ir==="onCompositionEnd"&&sc&&(Kr=Fr()):(ka=cn,Ta="value"in ka?ka.value:ka.textContent,sc=!0)),Di=vg(Vt,ir),0<Di.length&&(ir=new jl(ir,A,null,_,cn),yn.push({event:ir,listeners:Di}),Kr?ir.data=Kr:(Kr=B1(_),Kr!==null&&(ir.data=Kr)))),(Kr=fp?ac(A,_):Lm(A,_))&&(ir=vg(Vt,"onBeforeInput"),0<ir.length&&(Di=new jl("onBeforeInput","beforeinput",null,_,cn),yn.push({event:Di,listeners:ir}),Di.data=Kr)),Lf(yn,A,Vt,_,cn)}IC(yn,g)})}function Qc(A,g,_){return{instance:A,listener:g,currentTarget:_}}function vg(A,g){for(var _=g+"Capture",I=[];A!==null;){var j=A,$=j.stateNode;if(j=j.tag,j!==5&&j!==26&&j!==27||$===null||(j=zl(A,_),j!=null&&I.unshift(Qc(A,j,$)),j=zl(A,g),j!=null&&I.push(Qc(A,j,$))),A.tag===3)return I;A=A.return}return[]}function G0(A){if(A===null)return null;do A=A.return;while(A&&A.tag!==5&&A.tag!==27);return A||null}function ta(A,g,_,I,j){for(var $=g._reactName,Ce=[];_!==null&&_!==I;){var Ye=_,vt=Ye.alternate,Vt=Ye.stateNode;if(Ye=Ye.tag,vt!==null&&vt===I)break;Ye!==5&&Ye!==26&&Ye!==27||Vt===null||(vt=Vt,j?(Vt=zl(_,$),Vt!=null&&Ce.unshift(Qc(_,Vt,vt))):j||(Vt=zl(_,$),Vt!=null&&Ce.push(Qc(_,Vt,vt)))),_=_.return}Ce.length!==0&&A.push({event:g,listeners:Ce})}var na=/\r\n?/g,Wv=/\u0000|\uFFFD/g;function bg(A){return(typeof A=="string"?A:""+A).replace(na,`
`).replace(Wv,"")}function Qv(A,g){return g=bg(g),bg(A)===g}function Jo(A,g,_,I,j,$){switch(_){case"children":typeof I=="string"?g==="body"||g==="textarea"&&I===""||Mo(A,I):(typeof I=="number"||typeof I=="bigint")&&g!=="body"&&Mo(A,""+I);break;case"className":nc(A,"class",I);break;case"tabIndex":nc(A,"tabindex",I);break;case"dir":case"role":case"viewBox":case"width":case"height":nc(A,_,I);break;case"style":Qs(A,I,$);break;case"data":if(g!=="object"){nc(A,"data",I);break}case"src":case"href":if(I===""&&(g!=="a"||_!=="href")){A.removeAttribute(_);break}if(I==null||typeof I=="function"||typeof I=="symbol"||typeof I=="boolean"){A.removeAttribute(_);break}I=Fi(""+I),A.setAttribute(_,I);break;case"action":case"formAction":if(typeof I=="function"){A.setAttribute(_,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof $=="function"&&(_==="formAction"?(g!=="input"&&Jo(A,g,"name",j.name,j,null),Jo(A,g,"formEncType",j.formEncType,j,null),Jo(A,g,"formMethod",j.formMethod,j,null),Jo(A,g,"formTarget",j.formTarget,j,null)):(Jo(A,g,"encType",j.encType,j,null),Jo(A,g,"method",j.method,j,null),Jo(A,g,"target",j.target,j,null)));if(I==null||typeof I=="symbol"||typeof I=="boolean"){A.removeAttribute(_);break}I=Fi(""+I),A.setAttribute(_,I);break;case"onClick":I!=null&&(A.onclick=Vi);break;case"onScroll":I!=null&&so("scroll",A);break;case"onScrollEnd":I!=null&&so("scrollend",A);break;case"dangerouslySetInnerHTML":if(I!=null){if(typeof I!="object"||!("__html"in I))throw Error(i(61));if(_=I.__html,_!=null){if(j.children!=null)throw Error(i(60));A.innerHTML=_}}break;case"multiple":A.multiple=I&&typeof I!="function"&&typeof I!="symbol";break;case"muted":A.muted=I&&typeof I!="function"&&typeof I!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(I==null||typeof I=="function"||typeof I=="boolean"||typeof I=="symbol"){A.removeAttribute("xlink:href");break}_=Fi(""+I),A.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",_);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":I!=null&&typeof I!="function"&&typeof I!="symbol"?A.setAttribute(_,""+I):A.removeAttribute(_);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":I&&typeof I!="function"&&typeof I!="symbol"?A.setAttribute(_,""):A.removeAttribute(_);break;case"capture":case"download":I===!0?A.setAttribute(_,""):I!==!1&&I!=null&&typeof I!="function"&&typeof I!="symbol"?A.setAttribute(_,I):A.removeAttribute(_);break;case"cols":case"rows":case"size":case"span":I!=null&&typeof I!="function"&&typeof I!="symbol"&&!isNaN(I)&&1<=I?A.setAttribute(_,I):A.removeAttribute(_);break;case"rowSpan":case"start":I==null||typeof I=="function"||typeof I=="symbol"||isNaN(I)?A.removeAttribute(_):A.setAttribute(_,I);break;case"popover":so("beforetoggle",A),so("toggle",A),ru(A,"popover",I);break;case"xlinkActuate":Sl(A,"http://www.w3.org/1999/xlink","xlink:actuate",I);break;case"xlinkArcrole":Sl(A,"http://www.w3.org/1999/xlink","xlink:arcrole",I);break;case"xlinkRole":Sl(A,"http://www.w3.org/1999/xlink","xlink:role",I);break;case"xlinkShow":Sl(A,"http://www.w3.org/1999/xlink","xlink:show",I);break;case"xlinkTitle":Sl(A,"http://www.w3.org/1999/xlink","xlink:title",I);break;case"xlinkType":Sl(A,"http://www.w3.org/1999/xlink","xlink:type",I);break;case"xmlBase":Sl(A,"http://www.w3.org/XML/1998/namespace","xml:base",I);break;case"xmlLang":Sl(A,"http://www.w3.org/XML/1998/namespace","xml:lang",I);break;case"xmlSpace":Sl(A,"http://www.w3.org/XML/1998/namespace","xml:space",I);break;case"is":ru(A,"is",I);break;case"innerText":case"textContent":break;default:(!(2<_.length)||_[0]!=="o"&&_[0]!=="O"||_[1]!=="n"&&_[1]!=="N")&&(_=Fl.get(_)||_,ru(A,_,I))}}function ly(A,g,_,I,j,$){switch(_){case"style":Qs(A,I,$);break;case"dangerouslySetInnerHTML":if(I!=null){if(typeof I!="object"||!("__html"in I))throw Error(i(61));if(_=I.__html,_!=null){if(j.children!=null)throw Error(i(60));A.innerHTML=_}}break;case"children":typeof I=="string"?Mo(A,I):(typeof I=="number"||typeof I=="bigint")&&Mo(A,""+I);break;case"onScroll":I!=null&&so("scroll",A);break;case"onScrollEnd":I!=null&&so("scrollend",A);break;case"onClick":I!=null&&(A.onclick=Vi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Uo.hasOwnProperty(_))e:{if(_[0]==="o"&&_[1]==="n"&&(j=_.endsWith("Capture"),g=_.slice(2,j?_.length-7:void 0),$=A[pn]||null,$=$!=null?$[_]:null,typeof $=="function"&&A.removeEventListener(g,$,j),typeof I=="function")){typeof $!="function"&&$!==null&&(_ in A?A[_]=null:A.hasAttribute(_)&&A.removeAttribute(_)),A.addEventListener(g,I,j);break e}_ in A?A[_]=I:I===!0?A.setAttribute(_,""):ru(A,_,I)}}}function cs(A,g,_){switch(g){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":so("error",A),so("load",A);var I=!1,j=!1,$;for($ in _)if(_.hasOwnProperty($)){var Ce=_[$];if(Ce!=null)switch($){case"src":I=!0;break;case"srcSet":j=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,g));default:Jo(A,g,$,Ce,_,null)}}j&&Jo(A,g,"srcSet",_.srcSet,_,null),I&&Jo(A,g,"src",_.src,_,null);return;case"input":so("invalid",A);var Ye=$=Ce=j=null,vt=null,Vt=null;for(I in _)if(_.hasOwnProperty(I)){var cn=_[I];if(cn!=null)switch(I){case"name":j=cn;break;case"type":Ce=cn;break;case"checked":vt=cn;break;case"defaultChecked":Vt=cn;break;case"value":$=cn;break;case"defaultValue":Ye=cn;break;case"children":case"dangerouslySetInnerHTML":if(cn!=null)throw Error(i(137,g));break;default:Jo(A,g,I,cn,_,null)}}Tu(A,$,Ye,vt,Vt,Ce,j,!1);return;case"select":so("invalid",A),I=Ce=$=null;for(j in _)if(_.hasOwnProperty(j)&&(Ye=_[j],Ye!=null))switch(j){case"value":$=Ye;break;case"defaultValue":Ce=Ye;break;case"multiple":I=Ye;default:Jo(A,g,j,Ye,_,null)}g=$,_=Ce,A.multiple=!!I,g!=null?Ll(A,!!I,g,!1):_!=null&&Ll(A,!!I,_,!0);return;case"textarea":so("invalid",A),$=j=I=null;for(Ce in _)if(_.hasOwnProperty(Ce)&&(Ye=_[Ce],Ye!=null))switch(Ce){case"value":I=Ye;break;case"defaultValue":j=Ye;break;case"children":$=Ye;break;case"dangerouslySetInnerHTML":if(Ye!=null)throw Error(i(91));break;default:Jo(A,g,Ce,Ye,_,null)}Ss(A,I,j,$);return;case"option":for(vt in _)if(_.hasOwnProperty(vt)&&(I=_[vt],I!=null))switch(vt){case"selected":A.selected=I&&typeof I!="function"&&typeof I!="symbol";break;default:Jo(A,g,vt,I,_,null)}return;case"dialog":so("beforetoggle",A),so("toggle",A),so("cancel",A),so("close",A);break;case"iframe":case"object":so("load",A);break;case"video":case"audio":for(I=0;I<j0.length;I++)so(j0[I],A);break;case"image":so("error",A),so("load",A);break;case"details":so("toggle",A);break;case"embed":case"source":case"link":so("error",A),so("load",A);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Vt in _)if(_.hasOwnProperty(Vt)&&(I=_[Vt],I!=null))switch(Vt){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,g));default:Jo(A,g,Vt,I,_,null)}return;default:if(_A(g)){for(cn in _)_.hasOwnProperty(cn)&&(I=_[cn],I!==void 0&&ly(A,g,cn,I,_,void 0));return}}for(Ye in _)_.hasOwnProperty(Ye)&&(I=_[Ye],I!=null&&Jo(A,g,Ye,I,_,null))}function Cg(A,g,_,I){switch(g){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var j=null,$=null,Ce=null,Ye=null,vt=null,Vt=null,cn=null;for(on in _){var yn=_[on];if(_.hasOwnProperty(on)&&yn!=null)switch(on){case"checked":break;case"value":break;case"defaultValue":vt=yn;default:I.hasOwnProperty(on)||Jo(A,g,on,null,I,yn)}}for(var Xt in I){var on=I[Xt];if(yn=_[Xt],I.hasOwnProperty(Xt)&&(on!=null||yn!=null))switch(Xt){case"type":$=on;break;case"name":j=on;break;case"checked":Vt=on;break;case"defaultChecked":cn=on;break;case"value":Ce=on;break;case"defaultValue":Ye=on;break;case"children":case"dangerouslySetInnerHTML":if(on!=null)throw Error(i(137,g));break;default:on!==yn&&Jo(A,g,Xt,on,I,yn)}}Tc(A,Ce,Ye,vt,Vt,cn,$,j);return;case"select":on=Ce=Ye=Xt=null;for($ in _)if(vt=_[$],_.hasOwnProperty($)&&vt!=null)switch($){case"value":break;case"multiple":on=vt;default:I.hasOwnProperty($)||Jo(A,g,$,null,I,vt)}for(j in I)if($=I[j],vt=_[j],I.hasOwnProperty(j)&&($!=null||vt!=null))switch(j){case"value":Xt=$;break;case"defaultValue":Ye=$;break;case"multiple":Ce=$;default:$!==vt&&Jo(A,g,j,$,I,vt)}g=Ye,_=Ce,I=on,Xt!=null?Ll(A,!!_,Xt,!1):!!I!=!!_&&(g!=null?Ll(A,!!_,g,!0):Ll(A,!!_,_?[]:"",!1));return;case"textarea":on=Xt=null;for(Ye in _)if(j=_[Ye],_.hasOwnProperty(Ye)&&j!=null&&!I.hasOwnProperty(Ye))switch(Ye){case"value":break;case"children":break;default:Jo(A,g,Ye,null,I,j)}for(Ce in I)if(j=I[Ce],$=_[Ce],I.hasOwnProperty(Ce)&&(j!=null||$!=null))switch(Ce){case"value":Xt=j;break;case"defaultValue":on=j;break;case"children":break;case"dangerouslySetInnerHTML":if(j!=null)throw Error(i(91));break;default:j!==$&&Jo(A,g,Ce,j,I,$)}qa(A,Xt,on);return;case"option":for(var Ii in _)if(Xt=_[Ii],_.hasOwnProperty(Ii)&&Xt!=null&&!I.hasOwnProperty(Ii))switch(Ii){case"selected":A.selected=!1;break;default:Jo(A,g,Ii,null,I,Xt)}for(vt in I)if(Xt=I[vt],on=_[vt],I.hasOwnProperty(vt)&&Xt!==on&&(Xt!=null||on!=null))switch(vt){case"selected":A.selected=Xt&&typeof Xt!="function"&&typeof Xt!="symbol";break;default:Jo(A,g,vt,Xt,I,on)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var rr in _)Xt=_[rr],_.hasOwnProperty(rr)&&Xt!=null&&!I.hasOwnProperty(rr)&&Jo(A,g,rr,null,I,Xt);for(Vt in I)if(Xt=I[Vt],on=_[Vt],I.hasOwnProperty(Vt)&&Xt!==on&&(Xt!=null||on!=null))switch(Vt){case"children":case"dangerouslySetInnerHTML":if(Xt!=null)throw Error(i(137,g));break;default:Jo(A,g,Vt,Xt,I,on)}return;default:if(_A(g)){for(var xs in _)Xt=_[xs],_.hasOwnProperty(xs)&&Xt!==void 0&&!I.hasOwnProperty(xs)&&ly(A,g,xs,void 0,I,Xt);for(cn in I)Xt=I[cn],on=_[cn],!I.hasOwnProperty(cn)||Xt===on||Xt===void 0&&on===void 0||ly(A,g,cn,Xt,I,on);return}}for(var Ut in _)Xt=_[Ut],_.hasOwnProperty(Ut)&&Xt!=null&&!I.hasOwnProperty(Ut)&&Jo(A,g,Ut,null,I,Xt);for(yn in I)Xt=I[yn],on=_[yn],!I.hasOwnProperty(yn)||Xt===on||Xt==null&&on==null||Jo(A,g,yn,Xt,I,on)}function Hp(A){switch(A){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Sh(){if(typeof performance.getEntriesByType=="function"){for(var A=0,g=0,_=performance.getEntriesByType("resource"),I=0;I<_.length;I++){var j=_[I],$=j.transferSize,Ce=j.initiatorType,Ye=j.duration;if($&&Ye&&Hp(Ce)){for(Ce=0,Ye=j.responseEnd,I+=1;I<_.length;I++){var vt=_[I],Vt=vt.startTime;if(Vt>Ye)break;var cn=vt.transferSize,yn=vt.initiatorType;cn&&Hp(yn)&&(vt=vt.responseEnd,Ce+=cn*(vt<Ye?1:(Ye-Vt)/(vt-Vt)))}if(--I,g+=8*($+Ce)/(j.duration/1e3),A++,10<A)break}}if(0<A)return g/A/1e6}return navigator.connection&&(A=navigator.connection.downlink,typeof A=="number")?A:5}var _g=null,uy=null;function xg(A){return A.nodeType===9?A:A.ownerDocument}function Mg(A){switch(A){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Yc(A,g){if(A===0)switch(g){case"svg":return 1;case"math":return 2;default:return 0}return A===1&&g==="foreignObject"?0:A}function $d(A,g){return A==="textarea"||A==="noscript"||typeof g.children=="string"||typeof g.children=="number"||typeof g.children=="bigint"||typeof g.dangerouslySetInnerHTML=="object"&&g.dangerouslySetInnerHTML!==null&&g.dangerouslySetInnerHTML.__html!=null}var ld=null;function kC(){var A=window.event;return A&&A.type==="popstate"?A===ld?!1:(ld=A,!0):(ld=null,!1)}var Yv=typeof setTimeout=="function"?setTimeout:void 0,TC=typeof clearTimeout=="function"?clearTimeout:void 0,qv=typeof Promise=="function"?Promise:void 0,RC=typeof queueMicrotask=="function"?queueMicrotask:typeof qv<"u"?function(A){return qv.resolve(null).then(A).catch(Hd)}:Yv;function Hd(A){setTimeout(function(){throw A})}function ur(A){return A==="head"}function cy(A,g){var _=g,I=0;do{var j=_.nextSibling;if(A.removeChild(_),j&&j.nodeType===8)if(_=j.data,_==="/$"||_==="/&"){if(I===0){A.removeChild(j),Qu(g);return}I--}else if(_==="$"||_==="$?"||_==="$~"||_==="$!"||_==="&")I++;else if(_==="html")Zp(A.ownerDocument.documentElement);else if(_==="head"){_=A.ownerDocument.head,Zp(_);for(var $=_.firstChild;$;){var Ce=$.nextSibling,Ye=$.nodeName;$[qi]||Ye==="SCRIPT"||Ye==="STYLE"||Ye==="LINK"&&$.rel.toLowerCase()==="stylesheet"||_.removeChild($),$=Ce}}else _==="body"&&Zp(A.ownerDocument.body);_=j}while(_);Qu(g)}function Wu(A,g){var _=A;A=0;do{var I=_.nextSibling;if(_.nodeType===1?g?(_._stashedDisplay=_.style.display,_.style.display="none"):(_.style.display=_._stashedDisplay||"",_.getAttribute("style")===""&&_.removeAttribute("style")):_.nodeType===3&&(g?(_._stashedText=_.nodeValue,_.nodeValue=""):_.nodeValue=_._stashedText||""),I&&I.nodeType===8)if(_=I.data,_==="/$"){if(A===0)break;A--}else _!=="$"&&_!=="$?"&&_!=="$~"&&_!=="$!"||A++;_=I}while(_)}function W0(A){var g=A.firstChild;for(g&&g.nodeType===10&&(g=g.nextSibling);g;){var _=g;switch(g=g.nextSibling,_.nodeName){case"HTML":case"HEAD":case"BODY":W0(_),tc(_);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(_.rel.toLowerCase()==="stylesheet")continue}A.removeChild(_)}}function Ay(A,g,_,I){for(;A.nodeType===1;){var j=_;if(A.nodeName.toLowerCase()!==g.toLowerCase()){if(!I&&(A.nodeName!=="INPUT"||A.type!=="hidden"))break}else if(I){if(!A[qi])switch(g){case"meta":if(!A.hasAttribute("itemprop"))break;return A;case"link":if($=A.getAttribute("rel"),$==="stylesheet"&&A.hasAttribute("data-precedence"))break;if($!==j.rel||A.getAttribute("href")!==(j.href==null||j.href===""?null:j.href)||A.getAttribute("crossorigin")!==(j.crossOrigin==null?null:j.crossOrigin)||A.getAttribute("title")!==(j.title==null?null:j.title))break;return A;case"style":if(A.hasAttribute("data-precedence"))break;return A;case"script":if($=A.getAttribute("src"),($!==(j.src==null?null:j.src)||A.getAttribute("type")!==(j.type==null?null:j.type)||A.getAttribute("crossorigin")!==(j.crossOrigin==null?null:j.crossOrigin))&&$&&A.hasAttribute("async")&&!A.hasAttribute("itemprop"))break;return A;default:return A}}else if(g==="input"&&A.type==="hidden"){var $=j.name==null?null:""+j.name;if(j.type==="hidden"&&A.getAttribute("name")===$)return A}else return A;if(A=_u(A.nextSibling),A===null)break}return null}function Eo(A,g,_){if(g==="")return null;for(;A.nodeType!==3;)if((A.nodeType!==1||A.nodeName!=="INPUT"||A.type!=="hidden")&&!_||(A=_u(A.nextSibling),A===null))return null;return A}function Q0(A,g){for(;A.nodeType!==8;)if((A.nodeType!==1||A.nodeName!=="INPUT"||A.type!=="hidden")&&!g||(A=_u(A.nextSibling),A===null))return null;return A}function hy(A){return A.data==="$?"||A.data==="$~"}function wg(A){return A.data==="$!"||A.data==="$?"&&A.ownerDocument.readyState!=="loading"}function o2(A,g){var _=A.ownerDocument;if(A.data==="$~")A._reactRetry=g;else if(A.data!=="$?"||_.readyState!=="loading")g();else{var I=function(){g(),_.removeEventListener("DOMContentLoaded",I)};_.addEventListener("DOMContentLoaded",I),A._reactRetry=I}}function _u(A){for(;A!=null;A=A.nextSibling){var g=A.nodeType;if(g===1||g===3)break;if(g===8){if(g=A.data,g==="$"||g==="$!"||g==="$?"||g==="$~"||g==="&"||g==="F!"||g==="F")break;if(g==="/$"||g==="/&")return null}}return A}var ml=null;function dy(A){A=A.nextSibling;for(var g=0;A;){if(A.nodeType===8){var _=A.data;if(_==="/$"||_==="/&"){if(g===0)return _u(A.nextSibling);g--}else _!=="$"&&_!=="$!"&&_!=="$?"&&_!=="$~"&&_!=="&"||g++}A=A.nextSibling}return null}function Vv(A){A=A.previousSibling;for(var g=0;A;){if(A.nodeType===8){var _=A.data;if(_==="$"||_==="$!"||_==="$?"||_==="$~"||_==="&"){if(g===0)return A;g--}else _!=="/$"&&_!=="/&"||g++}A=A.previousSibling}return null}function $v(A,g,_){switch(g=xg(_),A){case"html":if(A=g.documentElement,!A)throw Error(i(452));return A;case"head":if(A=g.head,!A)throw Error(i(453));return A;case"body":if(A=g.body,!A)throw Error(i(454));return A;default:throw Error(i(451))}}function Zp(A){for(var g=A.attributes;g.length;)A.removeAttributeNode(g[0]);tc(A)}var VA=new Map,Hv=new Set;function Y0(A){return typeof A.getRootNode=="function"?A.getRootNode():A.nodeType===9?A:A.ownerDocument}var Zd=qe.d;qe.d={f:DC,r:Zv,D:Xp,C:Jv,L:PC,m:eb,X:Hl,S:Xa,M:tb};function DC(){var A=Zd.f(),g=X1();return A||g}function Zv(A){var g=Ls(A);g!==null&&g.tag===5&&g.type==="form"?bh(g):Zd.r(A)}var ud=typeof document>"u"?null:document;function Xv(A,g,_){var I=ud;if(I&&typeof g=="string"&&g){var j=pa(g);j='link[rel="'+A+'"][href="'+j+'"]',typeof _=="string"&&(j+='[crossorigin="'+_+'"]'),Hv.has(j)||(Hv.add(j),A={rel:A,crossOrigin:_,href:g},I.querySelector(j)===null&&(g=I.createElement("link"),cs(g,"link",A),Io(g),I.head.appendChild(g)))}}function Xp(A){Zd.D(A),Xv("dns-prefetch",A,null)}function Jv(A,g){Zd.C(A,g),Xv("preconnect",A,g)}function PC(A,g,_){Zd.L(A,g,_);var I=ud;if(I&&A&&g){var j='link[rel="preload"][as="'+pa(g)+'"]';g==="image"&&_&&_.imageSrcSet?(j+='[imagesrcset="'+pa(_.imageSrcSet)+'"]',typeof _.imageSizes=="string"&&(j+='[imagesizes="'+pa(_.imageSizes)+'"]')):j+='[href="'+pa(A)+'"]';var $=j;switch(g){case"style":$=zf(A);break;case"script":$=d(A)}VA.has($)||(A=v({rel:"preload",href:g==="image"&&_&&_.imageSrcSet?void 0:A,as:g},_),VA.set($,A),I.querySelector(j)!==null||g==="style"&&I.querySelector(Sg($))||g==="script"&&I.querySelector(b($))||(g=I.createElement("link"),cs(g,"link",A),Io(g),I.head.appendChild(g)))}}function eb(A,g){Zd.m(A,g);var _=ud;if(_&&A){var I=g&&typeof g.as=="string"?g.as:"script",j='link[rel="modulepreload"][as="'+pa(I)+'"][href="'+pa(A)+'"]',$=j;switch(I){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":$=d(A)}if(!VA.has($)&&(A=v({rel:"modulepreload",href:A},g),VA.set($,A),_.querySelector(j)===null)){switch(I){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(_.querySelector(b($)))return}I=_.createElement("link"),cs(I,"link",A),Io(I),_.head.appendChild(I)}}}function Xa(A,g,_){Zd.S(A,g,_);var I=ud;if(I&&A){var j=Ya(I).hoistableStyles,$=zf(A);g=g||"default";var Ce=j.get($);if(!Ce){var Ye={loading:0,preload:null};if(Ce=I.querySelector(Sg($)))Ye.loading=5;else{A=v({rel:"stylesheet",href:A,"data-precedence":g},_),(_=VA.get($))&&R(A,_);var vt=Ce=I.createElement("link");Io(vt),cs(vt,"link",A),vt._p=new Promise(function(Vt,cn){vt.onload=Vt,vt.onerror=cn}),vt.addEventListener("load",function(){Ye.loading|=1}),vt.addEventListener("error",function(){Ye.loading|=2}),Ye.loading|=4,k(Ce,g,I)}Ce={type:"stylesheet",instance:Ce,count:1,state:Ye},j.set($,Ce)}}}function Hl(A,g){Zd.X(A,g);var _=ud;if(_&&A){var I=Ya(_).hoistableScripts,j=d(A),$=I.get(j);$||($=_.querySelector(b(j)),$||(A=v({src:A,async:!0},g),(g=VA.get(j))&&K(A,g),$=_.createElement("script"),Io($),cs($,"link",A),_.head.appendChild($)),$={type:"script",instance:$,count:1,state:null},I.set(j,$))}}function tb(A,g){Zd.M(A,g);var _=ud;if(_&&A){var I=Ya(_).hoistableScripts,j=d(A),$=I.get(j);$||($=_.querySelector(b(j)),$||(A=v({src:A,async:!0,type:"module"},g),(g=VA.get(j))&&K(A,g),$=_.createElement("script"),Io($),cs($,"link",A),_.head.appendChild($)),$={type:"script",instance:$,count:1,state:null},I.set(j,$))}}function fy(A,g,_,I){var j=(j=Tt.current)?Y0(j):null;if(!j)throw Error(i(446));switch(A){case"meta":case"title":return null;case"style":return typeof _.precedence=="string"&&typeof _.href=="string"?(g=zf(_.href),_=Ya(j).hoistableStyles,I=_.get(g),I||(I={type:"style",instance:null,count:0,state:null},_.set(g,I)),I):{type:"void",instance:null,count:0,state:null};case"link":if(_.rel==="stylesheet"&&typeof _.href=="string"&&typeof _.precedence=="string"){A=zf(_.href);var $=Ya(j).hoistableStyles,Ce=$.get(A);if(Ce||(j=j.ownerDocument||j,Ce={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},$.set(A,Ce),($=j.querySelector(Sg(A)))&&!$._p&&(Ce.instance=$,Ce.state.loading=5),VA.has(A)||(_={rel:"preload",as:"style",href:_.href,crossOrigin:_.crossOrigin,integrity:_.integrity,media:_.media,hrefLang:_.hrefLang,referrerPolicy:_.referrerPolicy},VA.set(A,_),$||u(j,A,_,Ce.state))),g&&I===null)throw Error(i(528,""));return Ce}if(g&&I!==null)throw Error(i(529,""));return null;case"script":return g=_.async,_=_.src,typeof _=="string"&&g&&typeof g!="function"&&typeof g!="symbol"?(g=d(_),_=Ya(j).hoistableScripts,I=_.get(g),I||(I={type:"script",instance:null,count:0,state:null},_.set(g,I)),I):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,A))}}function zf(A){return'href="'+pa(A)+'"'}function Sg(A){return'link[rel="stylesheet"]['+A+"]"}function f(A){return v({},A,{"data-precedence":A.precedence,precedence:null})}function u(A,g,_,I){A.querySelector('link[rel="preload"][as="style"]['+g+"]")?I.loading=1:(g=A.createElement("link"),I.preload=g,g.addEventListener("load",function(){return I.loading|=1}),g.addEventListener("error",function(){return I.loading|=2}),cs(g,"link",_),Io(g),A.head.appendChild(g))}function d(A){return'[src="'+pa(A)+'"]'}function b(A){return"script[async]"+A}function M(A,g,_){if(g.count++,g.instance===null)switch(g.type){case"style":var I=A.querySelector('style[data-href~="'+pa(_.href)+'"]');if(I)return g.instance=I,Io(I),I;var j=v({},_,{"data-href":_.href,"data-precedence":_.precedence,href:null,precedence:null});return I=(A.ownerDocument||A).createElement("style"),Io(I),cs(I,"style",j),k(I,_.precedence,A),g.instance=I;case"stylesheet":j=zf(_.href);var $=A.querySelector(Sg(j));if($)return g.state.loading|=4,g.instance=$,Io($),$;I=f(_),(j=VA.get(j))&&R(I,j),$=(A.ownerDocument||A).createElement("link"),Io($);var Ce=$;return Ce._p=new Promise(function(Ye,vt){Ce.onload=Ye,Ce.onerror=vt}),cs($,"link",I),g.state.loading|=4,k($,_.precedence,A),g.instance=$;case"script":return $=d(_.src),(j=A.querySelector(b($)))?(g.instance=j,Io(j),j):(I=_,(j=VA.get($))&&(I=v({},_),K(I,j)),A=A.ownerDocument||A,j=A.createElement("script"),Io(j),cs(j,"link",I),A.head.appendChild(j),g.instance=j);case"void":return null;default:throw Error(i(443,g.type))}else g.type==="stylesheet"&&(g.state.loading&4)===0&&(I=g.instance,g.state.loading|=4,k(I,_.precedence,A));return g.instance}function k(A,g,_){for(var I=_.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),j=I.length?I[I.length-1]:null,$=j,Ce=0;Ce<I.length;Ce++){var Ye=I[Ce];if(Ye.dataset.precedence===g)$=Ye;else if($!==j)break}$?$.parentNode.insertBefore(A,$.nextSibling):(g=_.nodeType===9?_.head:_,g.insertBefore(A,g.firstChild))}function R(A,g){A.crossOrigin==null&&(A.crossOrigin=g.crossOrigin),A.referrerPolicy==null&&(A.referrerPolicy=g.referrerPolicy),A.title==null&&(A.title=g.title)}function K(A,g){A.crossOrigin==null&&(A.crossOrigin=g.crossOrigin),A.referrerPolicy==null&&(A.referrerPolicy=g.referrerPolicy),A.integrity==null&&(A.integrity=g.integrity)}var z=null;function ee(A,g,_){if(z===null){var I=new Map,j=z=new Map;j.set(_,I)}else j=z,I=j.get(_),I||(I=new Map,j.set(_,I));if(I.has(A))return I;for(I.set(A,null),_=_.getElementsByTagName(A),j=0;j<_.length;j++){var $=_[j];if(!($[qi]||$[Ur]||A==="link"&&$.getAttribute("rel")==="stylesheet")&&$.namespaceURI!=="http://www.w3.org/2000/svg"){var Ce=$.getAttribute(g)||"";Ce=A+Ce;var Ye=I.get(Ce);Ye?Ye.push($):I.set(Ce,[$])}}return I}function ne(A,g,_){A=A.ownerDocument||A,A.head.insertBefore(_,g==="title"?A.querySelector("head > title"):null)}function ce(A,g,_){if(_===1||g.itemProp!=null)return!1;switch(A){case"meta":case"title":return!0;case"style":if(typeof g.precedence!="string"||typeof g.href!="string"||g.href==="")break;return!0;case"link":if(typeof g.rel!="string"||typeof g.href!="string"||g.href===""||g.onLoad||g.onError)break;switch(g.rel){case"stylesheet":return A=g.disabled,typeof g.precedence=="string"&&A==null;default:return!0}case"script":if(g.async&&typeof g.async!="function"&&typeof g.async!="symbol"&&!g.onLoad&&!g.onError&&g.src&&typeof g.src=="string")return!0}return!1}function _e(A){return!(A.type==="stylesheet"&&(A.state.loading&3)===0)}function Se(A,g,_,I){if(_.type==="stylesheet"&&(typeof I.media!="string"||matchMedia(I.media).matches!==!1)&&(_.state.loading&4)===0){if(_.instance===null){var j=zf(I.href),$=g.querySelector(Sg(j));if($){g=$._p,g!==null&&typeof g=="object"&&typeof g.then=="function"&&(A.count++,A=$e.bind(A),g.then(A,A)),_.state.loading|=4,_.instance=$,Io($);return}$=g.ownerDocument||g,I=f(I),(j=VA.get(j))&&R(I,j),$=$.createElement("link"),Io($);var Ce=$;Ce._p=new Promise(function(Ye,vt){Ce.onload=Ye,Ce.onerror=vt}),cs($,"link",I),_.instance=$}A.stylesheets===null&&(A.stylesheets=new Map),A.stylesheets.set(_,g),(g=_.state.preload)&&(_.state.loading&3)===0&&(A.count++,_=$e.bind(A),g.addEventListener("load",_),g.addEventListener("error",_))}}var ke=0;function ze(A,g){return A.stylesheets&&A.count===0&&Et(A,A.stylesheets),0<A.count||0<A.imgCount?function(_){var I=setTimeout(function(){if(A.stylesheets&&Et(A,A.stylesheets),A.unsuspend){var $=A.unsuspend;A.unsuspend=null,$()}},6e4+g);0<A.imgBytes&&ke===0&&(ke=62500*Sh());var j=setTimeout(function(){if(A.waitingForImages=!1,A.count===0&&(A.stylesheets&&Et(A,A.stylesheets),A.unsuspend)){var $=A.unsuspend;A.unsuspend=null,$()}},(A.imgBytes>ke?50:800)+g);return A.unsuspend=_,function(){A.unsuspend=null,clearTimeout(I),clearTimeout(j)}}:null}function $e(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Et(this,this.stylesheets);else if(this.unsuspend){var A=this.unsuspend;this.unsuspend=null,A()}}}var it=null;function Et(A,g){A.stylesheets=null,A.unsuspend!==null&&(A.count++,it=new Map,g.forEach(ut,A),it=null,$e.call(A))}function ut(A,g){if(!(g.state.loading&4)){var _=it.get(A);if(_)var I=_.get(null);else{_=new Map,it.set(A,_);for(var j=A.querySelectorAll("link[data-precedence],style[data-precedence]"),$=0;$<j.length;$++){var Ce=j[$];(Ce.nodeName==="LINK"||Ce.getAttribute("media")!=="not all")&&(_.set(Ce.dataset.precedence,Ce),I=Ce)}I&&_.set(null,I)}j=g.instance,Ce=j.getAttribute("data-precedence"),$=_.get(Ce)||I,$===I&&_.set(null,j),_.set(Ce,j),this.count++,I=$e.bind(this),j.addEventListener("load",I),j.addEventListener("error",I),$?$.parentNode.insertBefore(j,$.nextSibling):(A=A.nodeType===9?A.head:A,A.insertBefore(j,A.firstChild)),g.state.loading|=4}}var pt={$$typeof:V,Provider:null,Consumer:null,_currentValue:At,_currentValue2:At,_threadCount:0};function Gt(A,g,_,I,j,$,Ce,Ye,vt){this.tag=1,this.containerInfo=A,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=vi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vi(0),this.hiddenUpdates=vi(null),this.identifierPrefix=I,this.onUncaughtError=j,this.onCaughtError=$,this.onRecoverableError=Ce,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=vt,this.incompleteTransitions=new Map}function Jt(A,g,_,I,j,$,Ce,Ye,vt,Vt,cn,yn){return A=new Gt(A,g,_,Ce,vt,Vt,cn,yn,Ye),g=1,$===!0&&(g|=24),$=El(3,null,null,g),A.current=$,$.stateNode=A,g=Uc(),g.refCount++,A.pooledCache=g,g.refCount++,$.memoizedState={element:I,isDehydrated:_,cache:g},FA($),A}function mn(A){return A?(A=sr,A):sr}function Nn(A,g,_,I,j,$){j=mn(j),I.context===null?I.context=j:I.pendingContext=j,I=io(g),I.payload={element:_},$=$===void 0?null:$,$!==null&&(I.callback=$),_=Fc(A,I,g),_!==null&&(bc(_,A,g),gh(_,A,g))}function Tn(A,g){if(A=A.memoizedState,A!==null&&A.dehydrated!==null){var _=A.retryLane;A.retryLane=_!==0&&_<g?_:g}}function zn(A,g){Tn(A,g),(A=A.alternate)&&Tn(A,g)}function bi(A){if(A.tag===13||A.tag===31){var g=lu(A,67108864);g!==null&&bc(g,A,67108864),zn(A,67108864)}}function jn(A){if(A.tag===13||A.tag===31){var g=vc();g=pr(g);var _=lu(A,g);_!==null&&bc(_,A,g),zn(A,g)}}var Kn=!0;function un(A,g,_,I){var j=Ee.T;Ee.T=null;var $=qe.p;try{qe.p=2,Xi(A,g,_,I)}finally{qe.p=$,Ee.T=j}}function Gi(A,g,_,I){var j=Ee.T;Ee.T=null;var $=qe.p;try{qe.p=8,Xi(A,g,_,I)}finally{qe.p=$,Ee.T=j}}function Xi(A,g,_,I){if(Kn){var j=Oi(I);if(j===null)ay(A,g,I,si,_),yl(A,I);else if(qc(j,A,g,_,I))I.stopPropagation();else if(yl(A,I),g&4&&-1<Tl.indexOf(A)){for(;j!==null;){var $=Ls(j);if($!==null)switch($.tag){case 3:if($=$.stateNode,$.current.memoizedState.isDehydrated){var Ce=dt($.pendingLanes);if(Ce!==0){var Ye=$;for(Ye.pendingLanes|=2,Ye.entangledLanes|=2;Ce;){var vt=1<<31-Pe(Ce);Ye.entanglements[1]|=vt,Ce&=~vt}bu($),(So&6)===0&&(Qp=Zn()+500,gg(0))}}break;case 31:case 13:Ye=lu($,2),Ye!==null&&bc(Ye,$,2),X1(),zn($,2)}if($=Oi(I),$===null&&ay(A,g,I,si,_),$===j)break;j=$}j!==null&&I.stopPropagation()}else ay(A,g,I,null,_)}}function Oi(A){return A=Ia(A),Or(A)}var si=null;function Or(A){if(si=null,A=no(A),A!==null){var g=o(A);if(g===null)A=null;else{var _=g.tag;if(_===13){if(A=s(g),A!==null)return A;A=null}else if(_===31){if(A=a(g),A!==null)return A;A=null}else if(_===3){if(g.stateNode.current.memoizedState.isDehydrated)return g.tag===3?g.stateNode.containerInfo:null;A=null}else g!==A&&(A=null)}}return si=A,null}function Fs(A){switch(A){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Rn()){case Ot:return 2;case be:return 8;case ie:case le:return 32;case de:return 268435456;default:return 32}default:return 32}}var _a=!1,ia=null,gl=null,La=null,xa=new Map,es=new Map,Ts=[],Tl="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function yl(A,g){switch(A){case"focusin":case"focusout":ia=null;break;case"dragenter":case"dragleave":gl=null;break;case"mouseover":case"mouseout":La=null;break;case"pointerover":case"pointerout":xa.delete(g.pointerId);break;case"gotpointercapture":case"lostpointercapture":es.delete(g.pointerId)}}function Fa(A,g,_,I,j,$){return A===null||A.nativeEvent!==$?(A={blockedOn:g,domEventName:_,eventSystemFlags:I,nativeEvent:$,targetContainers:[j]},g!==null&&(g=Ls(g),g!==null&&bi(g)),A):(A.eventSystemFlags|=I,g=A.targetContainers,j!==null&&g.indexOf(j)===-1&&g.push(j),A)}function qc(A,g,_,I,j){switch(g){case"focusin":return ia=Fa(ia,A,g,_,I,j),!0;case"dragenter":return gl=Fa(gl,A,g,_,I,j),!0;case"mouseover":return La=Fa(La,A,g,_,I,j),!0;case"pointerover":var $=j.pointerId;return xa.set($,Fa(xa.get($)||null,A,g,_,I,j)),!0;case"gotpointercapture":return $=j.pointerId,es.set($,Fa(es.get($)||null,A,g,_,I,j)),!0}return!1}function za(A){var g=no(A.target);if(g!==null){var _=o(g);if(_!==null){if(g=_.tag,g===13){if(g=s(_),g!==null){A.blockedOn=g,$o(A.priority,function(){jn(_)});return}}else if(g===31){if(g=a(_),g!==null){A.blockedOn=g,$o(A.priority,function(){jn(_)});return}}else if(g===3&&_.stateNode.current.memoizedState.isDehydrated){A.blockedOn=_.tag===3?_.stateNode.containerInfo:null;return}}}A.blockedOn=null}function Zl(A){if(A.blockedOn!==null)return!1;for(var g=A.targetContainers;0<g.length;){var _=Oi(A.nativeEvent);if(_===null){_=A.nativeEvent;var I=new _.constructor(_.type,_);Co=I,_.target.dispatchEvent(I),Co=null}else return g=Ls(_),g!==null&&bi(g),A.blockedOn=_,!1;g.shift()}return!0}function ja(A,g,_){Zl(A)&&_.delete(g)}function vl(){_a=!1,ia!==null&&Zl(ia)&&(ia=null),gl!==null&&Zl(gl)&&(gl=null),La!==null&&Zl(La)&&(La=null),xa.forEach(ja),es.forEach(ja)}function ra(A,g){A.blockedOn===g&&(A.blockedOn=null,_a||(_a=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,vl)))}var oa=null;function As(A){oa!==A&&(oa=A,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){oa===A&&(oa=null);for(var g=0;g<A.length;g+=3){var _=A[g],I=A[g+1],j=A[g+2];if(typeof I!="function"){if(Or(I||_)===null)continue;break}var $=Ls(_);$!==null&&(A.splice(g,3),g-=3,zu($,{pending:!0,data:j,method:_.method,action:I},I,j))}}))}function Qu(A){function g(vt){return ra(vt,A)}ia!==null&&ra(ia,A),gl!==null&&ra(gl,A),La!==null&&ra(La,A),xa.forEach(g),es.forEach(g);for(var _=0;_<Ts.length;_++){var I=Ts[_];I.blockedOn===A&&(I.blockedOn=null)}for(;0<Ts.length&&(_=Ts[0],_.blockedOn===null);)za(_),_.blockedOn===null&&Ts.shift();if(_=(A.ownerDocument||A).$$reactFormReplay,_!=null)for(I=0;I<_.length;I+=3){var j=_[I],$=_[I+1],Ce=j[pn]||null;if(typeof $=="function")Ce||As(_);else if(Ce){var Ye=null;if($&&$.hasAttribute("formAction")){if(j=$,Ce=$[pn]||null)Ye=Ce.formAction;else if(Or(j)!==null)continue}else Ye=Ce.action;typeof Ye=="function"?_[I+1]=Ye:(_.splice(I,3),I-=3),As(_)}}}function bl(){function A($){$.canIntercept&&$.info==="react-transition"&&$.intercept({handler:function(){return new Promise(function(Ce){return j=Ce})},focusReset:"manual",scroll:"manual"})}function g(){j!==null&&(j(),j=null),I||setTimeout(_,20)}function _(){if(!I&&!navigation.transition){var $=navigation.currentEntry;$&&$.url!=null&&navigation.navigate($.url,{state:$.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var I=!1,j=null;return navigation.addEventListener("navigate",A),navigation.addEventListener("navigatesuccess",g),navigation.addEventListener("navigateerror",g),setTimeout(_,100),function(){I=!0,navigation.removeEventListener("navigate",A),navigation.removeEventListener("navigatesuccess",g),navigation.removeEventListener("navigateerror",g),j!==null&&(j(),j=null)}}}function _c(A){this._internalRoot=A}py.prototype.render=_c.prototype.render=function(A){var g=this._internalRoot;if(g===null)throw Error(i(409));var _=g.current,I=vc();Nn(_,I,A,g,null,null)},py.prototype.unmount=_c.prototype.unmount=function(){var A=this._internalRoot;if(A!==null){this._internalRoot=null;var g=A.containerInfo;Nn(A.current,2,null,A,null,null),X1(),g[zi]=null}};function py(A){this._internalRoot=A}py.prototype.unstable_scheduleHydration=function(A){if(A){var g=Li();A={blockedOn:null,target:A,priority:g};for(var _=0;_<Ts.length&&g!==0&&g<Ts[_].priority;_++);Ts.splice(_,0,A),_===0&&za(A)}};var Jp=e.version;if(Jp!=="19.2.0")throw Error(i(527,Jp,"19.2.0"));qe.findDOMNode=function(A){var g=A._reactInternals;if(g===void 0)throw typeof A.render=="function"?Error(i(188)):(A=Object.keys(A).join(","),Error(i(268,A)));return A=h(g),A=A!==null?m(A):null,A=A===null?null:A.stateNode,A};var em={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:Ee,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xd.isDisabled&&Xd.supportsFiber)try{ve=Xd.inject(em),We=Xd}catch{}}return a2.createRoot=function(A,g){if(!r(A))throw Error(i(299));var _=!1,I="",j=WA,$=If,Ce=pC;return g!=null&&(g.unstable_strictMode===!0&&(_=!0),g.identifierPrefix!==void 0&&(I=g.identifierPrefix),g.onUncaughtError!==void 0&&(j=g.onUncaughtError),g.onCaughtError!==void 0&&($=g.onCaughtError),g.onRecoverableError!==void 0&&(Ce=g.onRecoverableError)),g=Jt(A,1,!1,null,null,_,I,null,j,$,Ce,bl),A[zi]=g.current,ad(A),new _c(g)},a2.hydrateRoot=function(A,g,_){if(!r(A))throw Error(i(299));var I=!1,j="",$=WA,Ce=If,Ye=pC,vt=null;return _!=null&&(_.unstable_strictMode===!0&&(I=!0),_.identifierPrefix!==void 0&&(j=_.identifierPrefix),_.onUncaughtError!==void 0&&($=_.onUncaughtError),_.onCaughtError!==void 0&&(Ce=_.onCaughtError),_.onRecoverableError!==void 0&&(Ye=_.onRecoverableError),_.formState!==void 0&&(vt=_.formState)),g=Jt(A,1,!0,g,_??null,I,j,vt,$,Ce,Ye,bl),g.context=mn(null),_=g.current,I=vc(),I=pr(I),j=io(I),j.callback=null,Fc(_,j,I),_=I,g.current.lanes=_,Zi(g,_),bu(g),A[zi]=g.current,ad(A),new py(g)},a2.version="19.2.0",a2}var HK;function tse(){if(HK)return tB.exports;HK=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),tB.exports=ese(),tB.exports}var m$=tse();const nse="modulepreload",ise=function(n){return"/maputnik/"+n},ZK={},UC=function(e,t,i){let r=Promise.resolve();if(t&&t.length>0){let h=function(m){return Promise.all(m.map(v=>Promise.resolve(v).then(x=>({status:"fulfilled",value:x}),x=>({status:"rejected",reason:x}))))};var s=h;document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),c=a?.nonce||a?.getAttribute("nonce");r=h(t.map(m=>{if(m=ise(m),m in ZK)return;ZK[m]=!0;const v=m.endsWith(".css"),x=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${x}`))return;const E=document.createElement("link");if(E.rel=v?"stylesheet":nse,v||(E.as="script"),E.crossOrigin="",E.href=m,c&&E.setAttribute("nonce",c),document.head.appendChild(E),v)return new Promise((D,P)=>{E.addEventListener("load",D),E.addEventListener("error",()=>P(new Error(`Unable to preload CSS for ${m}`)))})}))}function o(a){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=a,window.dispatchEvent(c),!c.defaultPrevented)throw a}return r.then(a=>{for(const c of a||[])c.status==="rejected"&&o(c.reason);return e().catch(o)})},rse=(n,e,t)=>{const i=n[e];return i?typeof i=="function"?i():Promise.resolve(i):new Promise((r,o)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(o.bind(null,new Error("Unknown variable dynamic import: "+e+(e.split("/").length!==t?". Note that variables only represent file names one level deep.":""))))})},Pr=n=>typeof n=="string",l2=()=>{let n,e;const t=new Promise((i,r)=>{n=i,e=r});return t.resolve=n,t.reject=e,t},XK=n=>n==null?"":""+n,ose=(n,e,t)=>{n.forEach(i=>{e[i]&&(t[i]=e[i])})},sse=/###/g,JK=n=>n&&n.indexOf("###")>-1?n.replace(sse,"."):n,eL=n=>!n||Pr(n),i3=(n,e,t)=>{const i=Pr(e)?e.split("."):e;let r=0;for(;r<i.length-1;){if(eL(n))return{};const o=JK(i[r]);!n[o]&&t&&(n[o]=new t),Object.prototype.hasOwnProperty.call(n,o)?n=n[o]:n={},++r}return eL(n)?{}:{obj:n,k:JK(i[r])}},tL=(n,e,t)=>{const{obj:i,k:r}=i3(n,e,Object);if(i!==void 0||e.length===1){i[r]=t;return}let o=e[e.length-1],s=e.slice(0,e.length-1),a=i3(n,s,Object);for(;a.obj===void 0&&s.length;)o=`${s[s.length-1]}.${o}`,s=s.slice(0,s.length-1),a=i3(n,s,Object),a?.obj&&typeof a.obj[`${a.k}.${o}`]<"u"&&(a.obj=void 0);a.obj[`${a.k}.${o}`]=t},ase=(n,e,t,i)=>{const{obj:r,k:o}=i3(n,e,Object);r[o]=r[o]||[],r[o].push(t)},Uw=(n,e)=>{const{obj:t,k:i}=i3(n,e);if(t&&Object.prototype.hasOwnProperty.call(t,i))return t[i]},lse=(n,e,t)=>{const i=Uw(n,t);return i!==void 0?i:Uw(e,t)},g$=(n,e,t)=>{for(const i in e)i!=="__proto__"&&i!=="constructor"&&(i in n?Pr(n[i])||n[i]instanceof String||Pr(e[i])||e[i]instanceof String?t&&(n[i]=e[i]):g$(n[i],e[i],t):n[i]=e[i]);return n},KC=n=>n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var use={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const cse=n=>Pr(n)?n.replace(/[&<>"'\/]/g,e=>use[e]):n;class Ase{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(t!==void 0)return t;const i=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,i),this.regExpQueue.push(e),i}}const hse=[" ",",","?","!",";"],dse=new Ase(20),fse=(n,e,t)=>{e=e||"",t=t||"";const i=hse.filter(s=>e.indexOf(s)<0&&t.indexOf(s)<0);if(i.length===0)return!0;const r=dse.getRegExp(`(${i.map(s=>s==="?"?"\\?":s).join("|")})`);let o=!r.test(n);if(!o){const s=n.indexOf(t);s>0&&!r.test(n.substring(0,s))&&(o=!0)}return o},cT=(n,e,t=".")=>{if(!n)return;if(n[e])return Object.prototype.hasOwnProperty.call(n,e)?n[e]:void 0;const i=e.split(t);let r=n;for(let o=0;o<i.length;){if(!r||typeof r!="object")return;let s,a="";for(let c=o;c<i.length;++c)if(c!==o&&(a+=t),a+=i[c],s=r[a],s!==void 0){if(["string","number","boolean"].indexOf(typeof s)>-1&&c<i.length-1)continue;o+=c-o+1;break}r=s}return r},T3=n=>n?.replace("_","-"),pse={type:"logger",log(n){this.output("log",n)},warn(n){this.output("warn",n)},error(n){this.output("error",n)},output(n,e){console?.[n]?.apply?.(console,e)}};class Kw{constructor(e,t={}){this.init(e,t)}init(e,t={}){this.prefix=t.prefix||"i18next:",this.logger=e||pse,this.options=t,this.debug=t.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,i,r){return r&&!this.debug?null:(Pr(e[0])&&(e[0]=`${i}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new Kw(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new Kw(this.logger,e)}}var Ng=new Kw;class aE{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(i=>{this.observers[i]||(this.observers[i]=new Map);const r=this.observers[i].get(t)||0;this.observers[i].set(t,r+1)}),this}off(e,t){if(this.observers[e]){if(!t){delete this.observers[e];return}this.observers[e].delete(t)}}emit(e,...t){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([r,o])=>{for(let s=0;s<o;s++)r(...t)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([r,o])=>{for(let s=0;s<o;s++)r.apply(r,[e,...t])})}}class nL extends aE{constructor(e,t={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,i,r={}){const o=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator,s=r.ignoreJSONStructure!==void 0?r.ignoreJSONStructure:this.options.ignoreJSONStructure;let a;e.indexOf(".")>-1?a=e.split("."):(a=[e,t],i&&(Array.isArray(i)?a.push(...i):Pr(i)&&o?a.push(...i.split(o)):a.push(i)));const c=Uw(this.data,a);return!c&&!t&&!i&&e.indexOf(".")>-1&&(e=a[0],t=a[1],i=a.slice(2).join(".")),c||!s||!Pr(i)?c:cT(this.data?.[e]?.[t],i,o)}addResource(e,t,i,r,o={silent:!1}){const s=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator;let a=[e,t];i&&(a=a.concat(s?i.split(s):i)),e.indexOf(".")>-1&&(a=e.split("."),r=t,t=a[1]),this.addNamespaces(t),tL(this.data,a,r),o.silent||this.emit("added",e,t,i,r)}addResources(e,t,i,r={silent:!1}){for(const o in i)(Pr(i[o])||Array.isArray(i[o]))&&this.addResource(e,t,o,i[o],{silent:!0});r.silent||this.emit("added",e,t,i)}addResourceBundle(e,t,i,r,o,s={silent:!1,skipCopy:!1}){let a=[e,t];e.indexOf(".")>-1&&(a=e.split("."),r=i,i=t,t=a[1]),this.addNamespaces(t);let c=Uw(this.data,a)||{};s.skipCopy||(i=JSON.parse(JSON.stringify(i))),r?g$(c,i,o):c={...c,...i},tL(this.data,a,c),s.silent||this.emit("added",e,t,i)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return this.getResource(e,t)!==void 0}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(r=>t[r]&&Object.keys(t[r]).length>0)}toJSON(){return this.data}}var y$={processors:{},addPostProcessor(n){this.processors[n.name]=n},handle(n,e,t,i,r){return n.forEach(o=>{e=this.processors[o]?.process(e,t,i,r)??e}),e}};const v$=Symbol("i18next/PATH_KEY");function mse(){const n=[],e=Object.create(null);let t;return e.get=(i,r)=>(t?.revoke?.(),r===v$?n:(n.push(r),t=Proxy.revocable(i,e),t.proxy)),Proxy.revocable(Object.create(null),e).proxy}function Lw(n,e){const{[v$]:t}=n(mse());return t.join(e?.keySeparator??".")}const iL={},oB=n=>!Pr(n)&&typeof n!="boolean"&&typeof n!="number";class Fw extends aE{constructor(e,t={}){super(),ose(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Ng.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,t={interpolation:{}}){const i={...t};if(e==null)return!1;const r=this.resolve(e,i);if(r?.res===void 0)return!1;const o=oB(r.res);return!(i.returnObjects===!1&&o)}extractFromKey(e,t){let i=t.nsSeparator!==void 0?t.nsSeparator:this.options.nsSeparator;i===void 0&&(i=":");const r=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator;let o=t.ns||this.options.defaultNS||[];const s=i&&e.indexOf(i)>-1,a=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!fse(e,i,r);if(s&&!a){const c=e.match(this.interpolator.nestingRegexp);if(c&&c.length>0)return{key:e,namespaces:Pr(o)?[o]:o};const h=e.split(i);(i!==r||i===r&&this.options.ns.indexOf(h[0])>-1)&&(o=h.shift()),e=h.join(r)}return{key:e,namespaces:Pr(o)?[o]:o}}translate(e,t,i){let r=typeof t=="object"?{...t}:t;if(typeof r!="object"&&this.options.overloadTranslationOptionHandler&&(r=this.options.overloadTranslationOptionHandler(arguments)),typeof r=="object"&&(r={...r}),r||(r={}),e==null)return"";typeof e=="function"&&(e=Lw(e,{...this.options,...r})),Array.isArray(e)||(e=[String(e)]);const o=r.returnDetails!==void 0?r.returnDetails:this.options.returnDetails,s=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator,{key:a,namespaces:c}=this.extractFromKey(e[e.length-1],r),h=c[c.length-1];let m=r.nsSeparator!==void 0?r.nsSeparator:this.options.nsSeparator;m===void 0&&(m=":");const v=r.lng||this.language,x=r.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(v?.toLowerCase()==="cimode")return x?o?{res:`${h}${m}${a}`,usedKey:a,exactUsedKey:a,usedLng:v,usedNS:h,usedParams:this.getUsedParamsDetails(r)}:`${h}${m}${a}`:o?{res:a,usedKey:a,exactUsedKey:a,usedLng:v,usedNS:h,usedParams:this.getUsedParamsDetails(r)}:a;const E=this.resolve(e,r);let D=E?.res;const P=E?.usedKey||a,F=E?.exactUsedKey||a,W=["[object Number]","[object Function]","[object RegExp]"],q=r.joinArrays!==void 0?r.joinArrays:this.options.joinArrays,V=!this.i18nFormat||this.i18nFormat.handleAsObject,H=r.count!==void 0&&!Pr(r.count),X=Fw.hasDefaultValue(r),Z=H?this.pluralResolver.getSuffix(v,r.count,r):"",G=r.ordinal&&H?this.pluralResolver.getSuffix(v,r.count,{ordinal:!1}):"",oe=H&&!r.ordinal&&r.count===0,ue=oe&&r[`defaultValue${this.options.pluralSeparator}zero`]||r[`defaultValue${Z}`]||r[`defaultValue${G}`]||r.defaultValue;let xe=D;V&&!D&&X&&(xe=ue);const me=oB(xe),Ie=Object.prototype.toString.apply(xe);if(V&&xe&&me&&W.indexOf(Ie)<0&&!(Pr(q)&&Array.isArray(xe))){if(!r.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const Me=this.options.returnedObjectHandler?this.options.returnedObjectHandler(P,xe,{...r,ns:c}):`key '${a} (${this.language})' returned an object instead of string.`;return o?(E.res=Me,E.usedParams=this.getUsedParamsDetails(r),E):Me}if(s){const Me=Array.isArray(xe),Te=Me?[]:{},je=Me?F:P;for(const Ee in xe)if(Object.prototype.hasOwnProperty.call(xe,Ee)){const qe=`${je}${s}${Ee}`;X&&!D?Te[Ee]=this.translate(qe,{...r,defaultValue:oB(ue)?ue[Ee]:void 0,joinArrays:!1,ns:c}):Te[Ee]=this.translate(qe,{...r,joinArrays:!1,ns:c}),Te[Ee]===qe&&(Te[Ee]=xe[Ee])}D=Te}}else if(V&&Pr(q)&&Array.isArray(D))D=D.join(q),D&&(D=this.extendTranslation(D,e,r,i));else{let Me=!1,Te=!1;!this.isValidLookup(D)&&X&&(Me=!0,D=ue),this.isValidLookup(D)||(Te=!0,D=a);const Ee=(r.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&Te?void 0:D,qe=X&&ue!==D&&this.options.updateMissing;if(Te||Me||qe){if(this.logger.log(qe?"updateKey":"missingKey",v,h,a,qe?ue:D),s){const Re=this.resolve(a,{...r,keySeparator:!1});Re&&Re.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let At=[];const gt=this.languageUtils.getFallbackCodes(this.options.fallbackLng,r.lng||this.language);if(this.options.saveMissingTo==="fallback"&&gt&&gt[0])for(let Re=0;Re<gt.length;Re++)At.push(gt[Re]);else this.options.saveMissingTo==="all"?At=this.languageUtils.toResolveHierarchy(r.lng||this.language):At.push(r.lng||this.language);const Le=(Re,Ge,De)=>{const _t=X&&De!==D?De:Ee;this.options.missingKeyHandler?this.options.missingKeyHandler(Re,h,Ge,_t,qe,r):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(Re,h,Ge,_t,qe,r),this.emit("missingKey",Re,h,Ge,D)};this.options.saveMissing&&(this.options.saveMissingPlurals&&H?At.forEach(Re=>{const Ge=this.pluralResolver.getSuffixes(Re,r);oe&&r[`defaultValue${this.options.pluralSeparator}zero`]&&Ge.indexOf(`${this.options.pluralSeparator}zero`)<0&&Ge.push(`${this.options.pluralSeparator}zero`),Ge.forEach(De=>{Le([Re],a+De,r[`defaultValue${De}`]||ue)})}):Le(At,a,ue))}D=this.extendTranslation(D,e,r,E,i),Te&&D===a&&this.options.appendNamespaceToMissingKey&&(D=`${h}${m}${a}`),(Te||Me)&&this.options.parseMissingKeyHandler&&(D=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${h}${m}${a}`:a,Me?D:void 0,r))}return o?(E.res=D,E.usedParams=this.getUsedParamsDetails(r),E):D}extendTranslation(e,t,i,r,o){if(this.i18nFormat?.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...i},i.lng||this.language||r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!i.skipInterpolation){i.interpolation&&this.interpolator.init({...i,interpolation:{...this.options.interpolation,...i.interpolation}});const c=Pr(e)&&(i?.interpolation?.skipOnVariables!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let h;if(c){const v=e.match(this.interpolator.nestingRegexp);h=v&&v.length}let m=i.replace&&!Pr(i.replace)?i.replace:i;if(this.options.interpolation.defaultVariables&&(m={...this.options.interpolation.defaultVariables,...m}),e=this.interpolator.interpolate(e,m,i.lng||this.language||r.usedLng,i),c){const v=e.match(this.interpolator.nestingRegexp),x=v&&v.length;h<x&&(i.nest=!1)}!i.lng&&r&&r.res&&(i.lng=this.language||r.usedLng),i.nest!==!1&&(e=this.interpolator.nest(e,(...v)=>o?.[0]===v[0]&&!i.context?(this.logger.warn(`It seems you are nesting recursively key: ${v[0]} in key: ${t[0]}`),null):this.translate(...v,t),i)),i.interpolation&&this.interpolator.reset()}const s=i.postProcess||this.options.postProcess,a=Pr(s)?[s]:s;return e!=null&&a?.length&&i.applyPostProcessor!==!1&&(e=y$.handle(a,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...r,usedParams:this.getUsedParamsDetails(i)},...i}:i,this)),e}resolve(e,t={}){let i,r,o,s,a;return Pr(e)&&(e=[e]),e.forEach(c=>{if(this.isValidLookup(i))return;const h=this.extractFromKey(c,t),m=h.key;r=m;let v=h.namespaces;this.options.fallbackNS&&(v=v.concat(this.options.fallbackNS));const x=t.count!==void 0&&!Pr(t.count),E=x&&!t.ordinal&&t.count===0,D=t.context!==void 0&&(Pr(t.context)||typeof t.context=="number")&&t.context!=="",P=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);v.forEach(F=>{this.isValidLookup(i)||(a=F,!iL[`${P[0]}-${F}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(a)&&(iL[`${P[0]}-${F}`]=!0,this.logger.warn(`key "${r}" for languages "${P.join(", ")}" won't get resolved as namespace "${a}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),P.forEach(W=>{if(this.isValidLookup(i))return;s=W;const q=[m];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(q,m,W,F,t);else{let H;x&&(H=this.pluralResolver.getSuffix(W,t.count,t));const X=`${this.options.pluralSeparator}zero`,Z=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(x&&(t.ordinal&&H.indexOf(Z)===0&&q.push(m+H.replace(Z,this.options.pluralSeparator)),q.push(m+H),E&&q.push(m+X)),D){const G=`${m}${this.options.contextSeparator||"_"}${t.context}`;q.push(G),x&&(t.ordinal&&H.indexOf(Z)===0&&q.push(G+H.replace(Z,this.options.pluralSeparator)),q.push(G+H),E&&q.push(G+X))}}let V;for(;V=q.pop();)this.isValidLookup(i)||(o=V,i=this.getResource(W,F,V,t))}))})}),{res:i,usedKey:r,exactUsedKey:o,usedLng:s,usedNS:a}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,t,i,r={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(e,t,i,r):this.resourceStore.getResource(e,t,i,r)}getUsedParamsDetails(e={}){const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],i=e.replace&&!Pr(e.replace);let r=i?e.replace:e;if(i&&typeof e.count<"u"&&(r.count=e.count),this.options.interpolation.defaultVariables&&(r={...this.options.interpolation.defaultVariables,...r}),!i){r={...r};for(const o of t)delete r[o]}return r}static hasDefaultValue(e){const t="defaultValue";for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&t===i.substring(0,t.length)&&e[i]!==void 0)return!0;return!1}}class rL{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Ng.create("languageUtils")}getScriptPartFromCode(e){if(e=T3(e),!e||e.indexOf("-")<0)return null;const t=e.split("-");return t.length===2||(t.pop(),t[t.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(t.join("-"))}getLanguagePartFromCode(e){if(e=T3(e),!e||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(Pr(e)&&e.indexOf("-")>-1){let t;try{t=Intl.getCanonicalLocales(e)[0]}catch{}return t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(i=>{if(t)return;const r=this.formatLanguageCode(i);(!this.options.supportedLngs||this.isSupportedCode(r))&&(t=r)}),!t&&this.options.supportedLngs&&e.forEach(i=>{if(t)return;const r=this.getScriptPartFromCode(i);if(this.isSupportedCode(r))return t=r;const o=this.getLanguagePartFromCode(i);if(this.isSupportedCode(o))return t=o;t=this.options.supportedLngs.find(s=>{if(s===o)return s;if(!(s.indexOf("-")<0&&o.indexOf("-")<0)&&(s.indexOf("-")>0&&o.indexOf("-")<0&&s.substring(0,s.indexOf("-"))===o||s.indexOf(o)===0&&o.length>1))return s})}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if(typeof e=="function"&&(e=e(t)),Pr(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let i=e[t];return i||(i=e[this.getScriptPartFromCode(t)]),i||(i=e[this.formatLanguageCode(t)]),i||(i=e[this.getLanguagePartFromCode(t)]),i||(i=e.default),i||[]}toResolveHierarchy(e,t){const i=this.getFallbackCodes((t===!1?[]:t)||this.options.fallbackLng||[],e),r=[],o=s=>{s&&(this.isSupportedCode(s)?r.push(s):this.logger.warn(`rejecting language code not found in supportedLngs: ${s}`))};return Pr(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&o(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&o(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&o(this.getLanguagePartFromCode(e))):Pr(e)&&o(this.formatLanguageCode(e)),i.forEach(s=>{r.indexOf(s)<0&&o(this.formatLanguageCode(s))}),r}}const oL={zero:0,one:1,two:2,few:3,many:4,other:5},sL={select:n=>n===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class gse{constructor(e,t={}){this.languageUtils=e,this.options=t,this.logger=Ng.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e,t={}){const i=T3(e==="dev"?"en":e),r=t.ordinal?"ordinal":"cardinal",o=JSON.stringify({cleanedCode:i,type:r});if(o in this.pluralRulesCache)return this.pluralRulesCache[o];let s;try{s=new Intl.PluralRules(i,{type:r})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),sL;if(!e.match(/-|_/))return sL;const c=this.languageUtils.getLanguagePartFromCode(e);s=this.getRule(c,t)}return this.pluralRulesCache[o]=s,s}needsPlural(e,t={}){let i=this.getRule(e,t);return i||(i=this.getRule("dev",t)),i?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(e,t,i={}){return this.getSuffixes(e,i).map(r=>`${t}${r}`)}getSuffixes(e,t={}){let i=this.getRule(e,t);return i||(i=this.getRule("dev",t)),i?i.resolvedOptions().pluralCategories.sort((r,o)=>oL[r]-oL[o]).map(r=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${r}`):[]}getSuffix(e,t,i={}){const r=this.getRule(e,i);return r?`${this.options.prepend}${i.ordinal?`ordinal${this.options.prepend}`:""}${r.select(t)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",t,i))}}const aL=(n,e,t,i=".",r=!0)=>{let o=lse(n,e,t);return!o&&r&&Pr(t)&&(o=cT(n,t,i),o===void 0&&(o=cT(e,t,i))),o},sB=n=>n.replace(/\$/g,"$$$$");class yse{constructor(e={}){this.logger=Ng.create("interpolator"),this.options=e,this.format=e?.interpolation?.format||(t=>t),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:i,useRawValueToEscape:r,prefix:o,prefixEscaped:s,suffix:a,suffixEscaped:c,formatSeparator:h,unescapeSuffix:m,unescapePrefix:v,nestingPrefix:x,nestingPrefixEscaped:E,nestingSuffix:D,nestingSuffixEscaped:P,nestingOptionsSeparator:F,maxReplaces:W,alwaysFormat:q}=e.interpolation;this.escape=t!==void 0?t:cse,this.escapeValue=i!==void 0?i:!0,this.useRawValueToEscape=r!==void 0?r:!1,this.prefix=o?KC(o):s||"{{",this.suffix=a?KC(a):c||"}}",this.formatSeparator=h||",",this.unescapePrefix=m?"":v||"-",this.unescapeSuffix=this.unescapePrefix?"":m||"",this.nestingPrefix=x?KC(x):E||KC("$t("),this.nestingSuffix=D?KC(D):P||KC(")"),this.nestingOptionsSeparator=F||",",this.maxReplaces=W||1e3,this.alwaysFormat=q!==void 0?q:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(t,i)=>t?.source===i?(t.lastIndex=0,t):new RegExp(i,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(e,t,i,r){let o,s,a;const c=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},h=E=>{if(E.indexOf(this.formatSeparator)<0){const W=aL(t,c,E,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(W,void 0,i,{...r,...t,interpolationkey:E}):W}const D=E.split(this.formatSeparator),P=D.shift().trim(),F=D.join(this.formatSeparator).trim();return this.format(aL(t,c,P,this.options.keySeparator,this.options.ignoreJSONStructure),F,i,{...r,...t,interpolationkey:P})};this.resetRegExp();const m=r?.missingInterpolationHandler||this.options.missingInterpolationHandler,v=r?.interpolation?.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:E=>sB(E)},{regex:this.regexp,safeValue:E=>this.escapeValue?sB(this.escape(E)):sB(E)}].forEach(E=>{for(a=0;o=E.regex.exec(e);){const D=o[1].trim();if(s=h(D),s===void 0)if(typeof m=="function"){const F=m(e,o,r);s=Pr(F)?F:""}else if(r&&Object.prototype.hasOwnProperty.call(r,D))s="";else if(v){s=o[0];continue}else this.logger.warn(`missed to pass in variable ${D} for interpolating ${e}`),s="";else!Pr(s)&&!this.useRawValueToEscape&&(s=XK(s));const P=E.safeValue(s);if(e=e.replace(o[0],P),v?(E.regex.lastIndex+=s.length,E.regex.lastIndex-=o[0].length):E.regex.lastIndex=0,a++,a>=this.maxReplaces)break}}),e}nest(e,t,i={}){let r,o,s;const a=(c,h)=>{const m=this.nestingOptionsSeparator;if(c.indexOf(m)<0)return c;const v=c.split(new RegExp(`${m}[ ]*{`));let x=`{${v[1]}`;c=v[0],x=this.interpolate(x,s);const E=x.match(/'/g),D=x.match(/"/g);((E?.length??0)%2===0&&!D||D.length%2!==0)&&(x=x.replace(/'/g,'"'));try{s=JSON.parse(x),h&&(s={...h,...s})}catch(P){return this.logger.warn(`failed parsing options string in nesting for key ${c}`,P),`${c}${m}${x}`}return s.defaultValue&&s.defaultValue.indexOf(this.prefix)>-1&&delete s.defaultValue,c};for(;r=this.nestingRegexp.exec(e);){let c=[];s={...i},s=s.replace&&!Pr(s.replace)?s.replace:s,s.applyPostProcessor=!1,delete s.defaultValue;const h=/{.*}/.test(r[1])?r[1].lastIndexOf("}")+1:r[1].indexOf(this.formatSeparator);if(h!==-1&&(c=r[1].slice(h).split(this.formatSeparator).map(m=>m.trim()).filter(Boolean),r[1]=r[1].slice(0,h)),o=t(a.call(this,r[1].trim(),s),s),o&&r[0]===e&&!Pr(o))return o;Pr(o)||(o=XK(o)),o||(this.logger.warn(`missed to resolve ${r[1]} for nesting ${e}`),o=""),c.length&&(o=c.reduce((m,v)=>this.format(m,v,i.lng,{...i,interpolationkey:r[1].trim()}),o.trim())),e=e.replace(r[0],o),this.regexp.lastIndex=0}return e}}const vse=n=>{let e=n.toLowerCase().trim();const t={};if(n.indexOf("(")>-1){const i=n.split("(");e=i[0].toLowerCase().trim();const r=i[1].substring(0,i[1].length-1);e==="currency"&&r.indexOf(":")<0?t.currency||(t.currency=r.trim()):e==="relativetime"&&r.indexOf(":")<0?t.range||(t.range=r.trim()):r.split(";").forEach(s=>{if(s){const[a,...c]=s.split(":"),h=c.join(":").trim().replace(/^'+|'+$/g,""),m=a.trim();t[m]||(t[m]=h),h==="false"&&(t[m]=!1),h==="true"&&(t[m]=!0),isNaN(h)||(t[m]=parseInt(h,10))}})}return{formatName:e,formatOptions:t}},lL=n=>{const e={};return(t,i,r)=>{let o=r;r&&r.interpolationkey&&r.formatParams&&r.formatParams[r.interpolationkey]&&r[r.interpolationkey]&&(o={...o,[r.interpolationkey]:void 0});const s=i+JSON.stringify(o);let a=e[s];return a||(a=n(T3(i),r),e[s]=a),a(t)}},bse=n=>(e,t,i)=>n(T3(t),i)(e);class Cse{constructor(e={}){this.logger=Ng.create("formatter"),this.options=e,this.init(e)}init(e,t={interpolation:{}}){this.formatSeparator=t.interpolation.formatSeparator||",";const i=t.cacheInBuiltFormats?lL:bse;this.formats={number:i((r,o)=>{const s=new Intl.NumberFormat(r,{...o});return a=>s.format(a)}),currency:i((r,o)=>{const s=new Intl.NumberFormat(r,{...o,style:"currency"});return a=>s.format(a)}),datetime:i((r,o)=>{const s=new Intl.DateTimeFormat(r,{...o});return a=>s.format(a)}),relativetime:i((r,o)=>{const s=new Intl.RelativeTimeFormat(r,{...o});return a=>s.format(a,o.range||"day")}),list:i((r,o)=>{const s=new Intl.ListFormat(r,{...o});return a=>s.format(a)})}}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=lL(t)}format(e,t,i,r={}){const o=t.split(this.formatSeparator);if(o.length>1&&o[0].indexOf("(")>1&&o[0].indexOf(")")<0&&o.find(a=>a.indexOf(")")>-1)){const a=o.findIndex(c=>c.indexOf(")")>-1);o[0]=[o[0],...o.splice(1,a)].join(this.formatSeparator)}return o.reduce((a,c)=>{const{formatName:h,formatOptions:m}=vse(c);if(this.formats[h]){let v=a;try{const x=r?.formatParams?.[r.interpolationkey]||{},E=x.locale||x.lng||r.locale||r.lng||i;v=this.formats[h](a,E,{...m,...r,...x})}catch(x){this.logger.warn(x)}return v}else this.logger.warn(`there was no format function for ${h}`);return a},e)}}const _se=(n,e)=>{n.pending[e]!==void 0&&(delete n.pending[e],n.pendingCount--)};class xse extends aE{constructor(e,t,i,r={}){super(),this.backend=e,this.store=t,this.services=i,this.languageUtils=i.languageUtils,this.options=r,this.logger=Ng.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=r.maxParallelReads||10,this.readingCalls=0,this.maxRetries=r.maxRetries>=0?r.maxRetries:5,this.retryTimeout=r.retryTimeout>=1?r.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(i,r.backend,r)}queueLoad(e,t,i,r){const o={},s={},a={},c={};return e.forEach(h=>{let m=!0;t.forEach(v=>{const x=`${h}|${v}`;!i.reload&&this.store.hasResourceBundle(h,v)?this.state[x]=2:this.state[x]<0||(this.state[x]===1?s[x]===void 0&&(s[x]=!0):(this.state[x]=1,m=!1,s[x]===void 0&&(s[x]=!0),o[x]===void 0&&(o[x]=!0),c[v]===void 0&&(c[v]=!0)))}),m||(a[h]=!0)}),(Object.keys(o).length||Object.keys(s).length)&&this.queue.push({pending:s,pendingCount:Object.keys(s).length,loaded:{},errors:[],callback:r}),{toLoad:Object.keys(o),pending:Object.keys(s),toLoadLanguages:Object.keys(a),toLoadNamespaces:Object.keys(c)}}loaded(e,t,i){const r=e.split("|"),o=r[0],s=r[1];t&&this.emit("failedLoading",o,s,t),!t&&i&&this.store.addResourceBundle(o,s,i,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&i&&(this.state[e]=0);const a={};this.queue.forEach(c=>{ase(c.loaded,[o],s),_se(c,e),t&&c.errors.push(t),c.pendingCount===0&&!c.done&&(Object.keys(c.loaded).forEach(h=>{a[h]||(a[h]={});const m=c.loaded[h];m.length&&m.forEach(v=>{a[h][v]===void 0&&(a[h][v]=!0)})}),c.done=!0,c.errors.length?c.callback(c.errors):c.callback())}),this.emit("loaded",a),this.queue=this.queue.filter(c=>!c.done)}read(e,t,i,r=0,o=this.retryTimeout,s){if(!e.length)return s(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:t,fcName:i,tried:r,wait:o,callback:s});return}this.readingCalls++;const a=(h,m)=>{if(this.readingCalls--,this.waitingReads.length>0){const v=this.waitingReads.shift();this.read(v.lng,v.ns,v.fcName,v.tried,v.wait,v.callback)}if(h&&m&&r<this.maxRetries){setTimeout(()=>{this.read.call(this,e,t,i,r+1,o*2,s)},o);return}s(h,m)},c=this.backend[i].bind(this.backend);if(c.length===2){try{const h=c(e,t);h&&typeof h.then=="function"?h.then(m=>a(null,m)).catch(a):a(null,h)}catch(h){a(h)}return}return c(e,t,a)}prepareLoading(e,t,i={},r){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),r&&r();Pr(e)&&(e=this.languageUtils.toResolveHierarchy(e)),Pr(t)&&(t=[t]);const o=this.queueLoad(e,t,i,r);if(!o.toLoad.length)return o.pending.length||r(),null;o.toLoad.forEach(s=>{this.loadOne(s)})}load(e,t,i){this.prepareLoading(e,t,{},i)}reload(e,t,i){this.prepareLoading(e,t,{reload:!0},i)}loadOne(e,t=""){const i=e.split("|"),r=i[0],o=i[1];this.read(r,o,"read",void 0,void 0,(s,a)=>{s&&this.logger.warn(`${t}loading namespace ${o} for language ${r} failed`,s),!s&&a&&this.logger.log(`${t}loaded namespace ${o} for language ${r}`,a),this.loaded(e,s,a)})}saveMissing(e,t,i,r,o,s={},a=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(t)){this.logger.warn(`did not save key "${i}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(i==null||i==="")){if(this.backend?.create){const c={...s,isUpdate:o},h=this.backend.create.bind(this.backend);if(h.length<6)try{let m;h.length===5?m=h(e,t,i,r,c):m=h(e,t,i,r),m&&typeof m.then=="function"?m.then(v=>a(null,v)).catch(a):a(null,m)}catch(m){a(m)}else h(e,t,i,r,a,c)}!e||!e[0]||this.store.addResource(e[0],t,i,r)}}}const uL=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:n=>{let e={};if(typeof n[1]=="object"&&(e=n[1]),Pr(n[1])&&(e.defaultValue=n[1]),Pr(n[2])&&(e.tDescription=n[2]),typeof n[2]=="object"||typeof n[3]=="object"){const t=n[3]||n[2];Object.keys(t).forEach(i=>{e[i]=t[i]})}return e},interpolation:{escapeValue:!0,format:n=>n,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),cL=n=>(Pr(n.ns)&&(n.ns=[n.ns]),Pr(n.fallbackLng)&&(n.fallbackLng=[n.fallbackLng]),Pr(n.fallbackNS)&&(n.fallbackNS=[n.fallbackNS]),n.supportedLngs?.indexOf?.("cimode")<0&&(n.supportedLngs=n.supportedLngs.concat(["cimode"])),typeof n.initImmediate=="boolean"&&(n.initAsync=n.initImmediate),n),LM=()=>{},Mse=n=>{Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach(t=>{typeof n[t]=="function"&&(n[t]=n[t].bind(n))})};class R3 extends aE{constructor(e={},t){if(super(),this.options=cL(e),this.services={},this.logger=Ng,this.modules={external:[]},Mse(this),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(e={},t){this.isInitializing=!0,typeof e=="function"&&(t=e,e={}),e.defaultNS==null&&e.ns&&(Pr(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const i=uL();this.options={...i,...this.options,...cL(e)},this.options.interpolation={...i.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator);const r=h=>h?typeof h=="function"?new h:h:null;if(!this.options.isClone){this.modules.logger?Ng.init(r(this.modules.logger),this.options):Ng.init(null,this.options);let h;this.modules.formatter?h=this.modules.formatter:h=Cse;const m=new rL(this.options);this.store=new nL(this.options.resources,this.options);const v=this.services;v.logger=Ng,v.resourceStore=this.store,v.languageUtils=m,v.pluralResolver=new gse(m,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==i.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),h&&(!this.options.interpolation.format||this.options.interpolation.format===i.interpolation.format)&&(v.formatter=r(h),v.formatter.init&&v.formatter.init(v,this.options),this.options.interpolation.format=v.formatter.format.bind(v.formatter)),v.interpolator=new yse(this.options),v.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},v.backendConnector=new xse(r(this.modules.backend),v.resourceStore,v,this.options),v.backendConnector.on("*",(E,...D)=>{this.emit(E,...D)}),this.modules.languageDetector&&(v.languageDetector=r(this.modules.languageDetector),v.languageDetector.init&&v.languageDetector.init(v,this.options.detection,this.options)),this.modules.i18nFormat&&(v.i18nFormat=r(this.modules.i18nFormat),v.i18nFormat.init&&v.i18nFormat.init(this)),this.translator=new Fw(this.services,this.options),this.translator.on("*",(E,...D)=>{this.emit(E,...D)}),this.modules.external.forEach(E=>{E.init&&E.init(this)})}if(this.format=this.options.interpolation.format,t||(t=LM),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const h=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);h.length>0&&h[0]!=="dev"&&(this.options.lng=h[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(h=>{this[h]=(...m)=>this.store[h](...m)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(h=>{this[h]=(...m)=>(this.store[h](...m),this)});const a=l2(),c=()=>{const h=(m,v)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),a.resolve(v),t(m,v)};if(this.languages&&!this.isInitialized)return h(null,this.t.bind(this));this.changeLanguage(this.options.lng,h)};return this.options.resources||!this.options.initAsync?c():setTimeout(c,0),a}loadResources(e,t=LM){let i=t;const r=Pr(e)?e:this.language;if(typeof e=="function"&&(i=e),!this.options.resources||this.options.partialBundledLanguages){if(r?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return i();const o=[],s=a=>{if(!a||a==="cimode")return;this.services.languageUtils.toResolveHierarchy(a).forEach(h=>{h!=="cimode"&&o.indexOf(h)<0&&o.push(h)})};r?s(r):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(c=>s(c)),this.options.preload?.forEach?.(a=>s(a)),this.services.backendConnector.load(o,this.options.ns,a=>{!a&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),i(a)})}else i(null)}reloadResources(e,t,i){const r=l2();return typeof e=="function"&&(i=e,e=void 0),typeof t=="function"&&(i=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),i||(i=LM),this.services.backendConnector.reload(e,t,o=>{r.resolve(),i(o)}),r}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&y$.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let t=0;t<this.languages.length;t++){const i=this.languages[t];if(!(["cimode","dev"].indexOf(i)>-1)&&this.store.hasLanguageSomeTranslations(i)){this.resolvedLanguage=i;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,t){this.isLanguageChangingTo=e;const i=l2();this.emit("languageChanging",e);const r=a=>{this.language=a,this.languages=this.services.languageUtils.toResolveHierarchy(a),this.resolvedLanguage=void 0,this.setResolvedLanguage(a)},o=(a,c)=>{c?this.isLanguageChangingTo===e&&(r(c),this.translator.changeLanguage(c),this.isLanguageChangingTo=void 0,this.emit("languageChanged",c),this.logger.log("languageChanged",c)):this.isLanguageChangingTo=void 0,i.resolve((...h)=>this.t(...h)),t&&t(a,(...h)=>this.t(...h))},s=a=>{!e&&!a&&this.services.languageDetector&&(a=[]);const c=Pr(a)?a:a&&a[0],h=this.store.hasLanguageSomeTranslations(c)?c:this.services.languageUtils.getBestMatchFromCodes(Pr(a)?[a]:a);h&&(this.language||r(h),this.translator.language||this.translator.changeLanguage(h),this.services.languageDetector?.cacheUserLanguage?.(h)),this.loadResources(h,m=>{o(m,h)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?s(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(s):this.services.languageDetector.detect(s):s(e),i}getFixedT(e,t,i){const r=(o,s,...a)=>{let c;typeof s!="object"?c=this.options.overloadTranslationOptionHandler([o,s].concat(a)):c={...s},c.lng=c.lng||r.lng,c.lngs=c.lngs||r.lngs,c.ns=c.ns||r.ns,c.keyPrefix!==""&&(c.keyPrefix=c.keyPrefix||i||r.keyPrefix);const h=this.options.keySeparator||".";let m;return c.keyPrefix&&Array.isArray(o)?m=o.map(v=>(typeof v=="function"&&(v=Lw(v,{...this.options,...s})),`${c.keyPrefix}${h}${v}`)):(typeof o=="function"&&(o=Lw(o,{...this.options,...s})),m=c.keyPrefix?`${c.keyPrefix}${h}${o}`:o),this.t(m,c)};return Pr(e)?r.lng=e:r.lngs=e,r.ns=t,r.keyPrefix=i,r}t(...e){return this.translator?.translate(...e)}exists(...e){return this.translator?.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,t={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const i=t.lng||this.resolvedLanguage||this.languages[0],r=this.options?this.options.fallbackLng:!1,o=this.languages[this.languages.length-1];if(i.toLowerCase()==="cimode")return!0;const s=(a,c)=>{const h=this.services.backendConnector.state[`${a}|${c}`];return h===-1||h===0||h===2};if(t.precheck){const a=t.precheck(this,s);if(a!==void 0)return a}return!!(this.hasResourceBundle(i,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||s(i,e)&&(!r||s(o,e)))}loadNamespaces(e,t){const i=l2();return this.options.ns?(Pr(e)&&(e=[e]),e.forEach(r=>{this.options.ns.indexOf(r)<0&&this.options.ns.push(r)}),this.loadResources(r=>{i.resolve(),t&&t(r)}),i):(t&&t(),Promise.resolve())}loadLanguages(e,t){const i=l2();Pr(e)&&(e=[e]);const r=this.options.preload||[],o=e.filter(s=>r.indexOf(s)<0&&this.services.languageUtils.isSupportedCode(s));return o.length?(this.options.preload=r.concat(o),this.loadResources(s=>{i.resolve(),t&&t(s)}),i):(t&&t(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!e)return"rtl";try{const r=new Intl.Locale(e);if(r&&r.getTextInfo){const o=r.getTextInfo();if(o&&o.direction)return o.direction}}catch{}const t=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],i=this.services?.languageUtils||new rL(uL());return e.toLowerCase().indexOf("-latn")>1?"ltr":t.indexOf(i.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},t){return new R3(e,t)}cloneInstance(e={},t=LM){const i=e.forkResourceStore;i&&delete e.forkResourceStore;const r={...this.options,...e,isClone:!0},o=new R3(r);if((e.debug!==void 0||e.prefix!==void 0)&&(o.logger=o.logger.clone(e)),["store","services","language"].forEach(a=>{o[a]=this[a]}),o.services={...this.services},o.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},i){const a=Object.keys(this.store.data).reduce((c,h)=>(c[h]={...this.store.data[h]},c[h]=Object.keys(c[h]).reduce((m,v)=>(m[v]={...c[h][v]},m),c[h]),c),{});o.store=new nL(a,r),o.services.resourceStore=o.store}return o.translator=new Fw(o.services,r),o.translator.on("*",(a,...c)=>{o.emit(a,...c)}),o.init(r,t),o.translator.options=r,o.translator.backendConnector.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const CA=R3.createInstance();CA.createInstance=R3.createInstance;CA.createInstance;CA.dir;CA.init;CA.loadResources;CA.reloadResources;CA.use;CA.changeLanguage;CA.getFixedT;CA.t;CA.exists;CA.setDefaultNamespace;CA.hasLoadedNamespace;CA.loadNamespaces;CA.loadLanguages;const{slice:wse,forEach:Sse}=[];function Ese(n){return Sse.call(wse.call(arguments,1),e=>{if(e)for(const t in e)n[t]===void 0&&(n[t]=e[t])}),n}function Bse(n){return typeof n!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(t=>t.test(n))}const AL=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,Ose=function(n,e){const i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},r=encodeURIComponent(e);let o=`${n}=${r}`;if(i.maxAge>0){const s=i.maxAge-0;if(Number.isNaN(s))throw new Error("maxAge should be a Number");o+=`; Max-Age=${Math.floor(s)}`}if(i.domain){if(!AL.test(i.domain))throw new TypeError("option domain is invalid");o+=`; Domain=${i.domain}`}if(i.path){if(!AL.test(i.path))throw new TypeError("option path is invalid");o+=`; Path=${i.path}`}if(i.expires){if(typeof i.expires.toUTCString!="function")throw new TypeError("option expires is invalid");o+=`; Expires=${i.expires.toUTCString()}`}if(i.httpOnly&&(o+="; HttpOnly"),i.secure&&(o+="; Secure"),i.sameSite)switch(typeof i.sameSite=="string"?i.sameSite.toLowerCase():i.sameSite){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return i.partitioned&&(o+="; Partitioned"),o},hL={create(n,e,t,i){let r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};t&&(r.expires=new Date,r.expires.setTime(r.expires.getTime()+t*60*1e3)),i&&(r.domain=i),document.cookie=Ose(n,e,r)},read(n){const e=`${n}=`,t=document.cookie.split(";");for(let i=0;i<t.length;i++){let r=t[i];for(;r.charAt(0)===" ";)r=r.substring(1,r.length);if(r.indexOf(e)===0)return r.substring(e.length,r.length)}return null},remove(n,e){this.create(n,"",-1,e)}};var Ise={name:"cookie",lookup(n){let{lookupCookie:e}=n;if(e&&typeof document<"u")return hL.read(e)||void 0},cacheUserLanguage(n,e){let{lookupCookie:t,cookieMinutes:i,cookieDomain:r,cookieOptions:o}=e;t&&typeof document<"u"&&hL.create(t,n,i,r,o)}},kse={name:"querystring",lookup(n){let{lookupQuerystring:e}=n,t;if(typeof window<"u"){let{search:i}=window.location;!window.location.search&&window.location.hash?.indexOf("?")>-1&&(i=window.location.hash.substring(window.location.hash.indexOf("?")));const o=i.substring(1).split("&");for(let s=0;s<o.length;s++){const a=o[s].indexOf("=");a>0&&o[s].substring(0,a)===e&&(t=o[s].substring(a+1))}}return t}},Tse={name:"hash",lookup(n){let{lookupHash:e,lookupFromHashIndex:t}=n,i;if(typeof window<"u"){const{hash:r}=window.location;if(r&&r.length>2){const o=r.substring(1);if(e){const s=o.split("&");for(let a=0;a<s.length;a++){const c=s[a].indexOf("=");c>0&&s[a].substring(0,c)===e&&(i=s[a].substring(c+1))}}if(i)return i;if(!i&&t>-1){const s=r.match(/\/([a-zA-Z-]*)/g);return Array.isArray(s)?s[typeof t=="number"?t:0]?.replace("/",""):void 0}}}return i}};let LC=null;const dL=()=>{if(LC!==null)return LC;try{if(LC=typeof window<"u"&&window.localStorage!==null,!LC)return!1;const n="i18next.translate.boo";window.localStorage.setItem(n,"foo"),window.localStorage.removeItem(n)}catch{LC=!1}return LC};var Rse={name:"localStorage",lookup(n){let{lookupLocalStorage:e}=n;if(e&&dL())return window.localStorage.getItem(e)||void 0},cacheUserLanguage(n,e){let{lookupLocalStorage:t}=e;t&&dL()&&window.localStorage.setItem(t,n)}};let FC=null;const fL=()=>{if(FC!==null)return FC;try{if(FC=typeof window<"u"&&window.sessionStorage!==null,!FC)return!1;const n="i18next.translate.boo";window.sessionStorage.setItem(n,"foo"),window.sessionStorage.removeItem(n)}catch{FC=!1}return FC};var Dse={name:"sessionStorage",lookup(n){let{lookupSessionStorage:e}=n;if(e&&fL())return window.sessionStorage.getItem(e)||void 0},cacheUserLanguage(n,e){let{lookupSessionStorage:t}=e;t&&fL()&&window.sessionStorage.setItem(t,n)}},Pse={name:"navigator",lookup(n){const e=[];if(typeof navigator<"u"){const{languages:t,userLanguage:i,language:r}=navigator;if(t)for(let o=0;o<t.length;o++)e.push(t[o]);i&&e.push(i),r&&e.push(r)}return e.length>0?e:void 0}},Use={name:"htmlTag",lookup(n){let{htmlTag:e}=n,t;const i=e||(typeof document<"u"?document.documentElement:null);return i&&typeof i.getAttribute=="function"&&(t=i.getAttribute("lang")),t}},Kse={name:"path",lookup(n){let{lookupFromPathIndex:e}=n;if(typeof window>"u")return;const t=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(t)?t[typeof e=="number"?e:0]?.replace("/",""):void 0}},Lse={name:"subdomain",lookup(n){let{lookupFromSubdomainIndex:e}=n;const t=typeof e=="number"?e+1:1,i=typeof window<"u"&&window.location?.hostname?.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(i)return i[t]}};let b$=!1;try{document.cookie,b$=!0}catch{}const C$=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];b$||C$.splice(1,1);const Fse=()=>({order:C$,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:n=>n});class _${constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(e,t)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=e,this.options=Ese(t,this.options||{},Fse()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=r=>r.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=i,this.addDetector(Ise),this.addDetector(kse),this.addDetector(Rse),this.addDetector(Dse),this.addDetector(Pse),this.addDetector(Use),this.addDetector(Kse),this.addDetector(Lse),this.addDetector(Tse)}addDetector(e){return this.detectors[e.name]=e,this}detect(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,t=[];return e.forEach(i=>{if(this.detectors[i]){let r=this.detectors[i].lookup(this.options);r&&typeof r=="string"&&(r=[r]),r&&(t=t.concat(r))}}),t=t.filter(i=>i!=null&&!Bse(i)).map(i=>this.options.convertDetectedLanguage(i)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?t:t.length>0?t[0]:null}cacheUserLanguage(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;t&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||t.forEach(i=>{this.detectors[i]&&this.detectors[i].cacheUserLanguage(e,this.options)}))}}_$.type="languageDetector";var zse=function(e){return{type:"backend",init:function(i,r,o){},read:function(i,r,o){if(typeof e=="function"){if(e.length<3){try{var s=e(i,r);s&&typeof s.then=="function"?s.then(function(a){return o(null,a&&a.default||a)}).catch(o):o(null,s)}catch(a){o(a)}return}e(i,r,o);return}o(null,e&&e[i]&&e[i][r])}}},aB,pL;function jse(){return pL||(pL=1,aB={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),aB}var Nse=jse();const Gse=Ou(Nse);var Wse=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function mL(n){var e={type:"tag",name:"",voidElement:!1,attrs:{},children:[]},t=n.match(/<\/?([^\s]+?)[/\s>]/);if(t&&(e.name=t[1],(Gse[t[1]]||n.charAt(n.length-2)==="/")&&(e.voidElement=!0),e.name.startsWith("!--"))){var i=n.indexOf("-->");return{type:"comment",comment:i!==-1?n.slice(4,i):""}}for(var r=new RegExp(Wse),o=null;(o=r.exec(n))!==null;)if(o[0].trim())if(o[1]){var s=o[1].trim(),a=[s,""];s.indexOf("=")>-1&&(a=s.split("=")),e.attrs[a[0]]=a[1],r.lastIndex--}else o[2]&&(e.attrs[o[2]]=o[3].trim().substring(1,o[3].length-1));return e}var Qse=/<[a-zA-Z0-9\-\!\/](?:"[^"]*"|'[^']*'|[^'">])*>/g,Yse=/^\s*$/,qse=Object.create(null);function x$(n,e){switch(e.type){case"text":return n+e.content;case"tag":return n+="<"+e.name+(e.attrs?(function(t){var i=[];for(var r in t)i.push(r+'="'+t[r]+'"');return i.length?" "+i.join(" "):""})(e.attrs):"")+(e.voidElement?"/>":">"),e.voidElement?n:n+e.children.reduce(x$,"")+"</"+e.name+">";case"comment":return n+"<!--"+e.comment+"-->"}}var Vse={parse:function(n,e){e||(e={}),e.components||(e.components=qse);var t,i=[],r=[],o=-1,s=!1;if(n.indexOf("<")!==0){var a=n.indexOf("<");i.push({type:"text",content:a===-1?n:n.substring(0,a)})}return n.replace(Qse,function(c,h){if(s){if(c!=="</"+t.name+">")return;s=!1}var m,v=c.charAt(1)!=="/",x=c.startsWith("<!--"),E=h+c.length,D=n.charAt(E);if(x){var P=mL(c);return o<0?(i.push(P),i):((m=r[o]).children.push(P),i)}if(v&&(o++,(t=mL(c)).type==="tag"&&e.components[t.name]&&(t.type="component",s=!0),t.voidElement||s||!D||D==="<"||t.children.push({type:"text",content:n.slice(E,n.indexOf("<",E))}),o===0&&i.push(t),(m=r[o-1])&&m.children.push(t),r[o]=t),(!v||t.voidElement)&&(o>-1&&(t.voidElement||t.name===c.slice(2,-1))&&(o--,t=o===-1?i:r[o]),!s&&D!=="<"&&D)){m=o===-1?i:r[o].children;var F=n.indexOf("<",E),W=n.slice(E,F===-1?void 0:F);Yse.test(W)&&(W=" "),(F>-1&&o+m.length>=0||W!==" ")&&m.push({type:"text",content:W})}}),i},stringify:function(n){return n.reduce(function(e,t){return e+x$("",t)},"")}};const nw=(n,e,t,i)=>{const r=[t,{code:e,...i||{}}];if(n?.services?.logger?.forward)return n.services.logger.forward(r,"warn","react-i18next::",!0);yf(r[0])&&(r[0]=`react-i18next:: ${r[0]}`),n?.services?.logger?.warn?n.services.logger.warn(...r):console?.warn&&console.warn(...r)},gL={},lE=(n,e,t,i)=>{yf(t)&&gL[t]||(yf(t)&&(gL[t]=new Date),nw(n,e,t,i))},M$=(n,e)=>()=>{if(n.isInitialized)e();else{const t=()=>{setTimeout(()=>{n.off("initialized",t)},0),e()};n.on("initialized",t)}},AT=(n,e,t)=>{n.loadNamespaces(e,M$(n,t))},yL=(n,e,t,i)=>{if(yf(t)&&(t=[t]),n.options.preload&&n.options.preload.indexOf(e)>-1)return AT(n,t,i);t.forEach(r=>{n.options.ns.indexOf(r)<0&&n.options.ns.push(r)}),n.loadLanguages(e,M$(n,i))},$se=(n,e,t={})=>!e.languages||!e.languages.length?(lE(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(n,{lng:t.lng,precheck:(i,r)=>{if(t.bindI18n&&t.bindI18n.indexOf("languageChanging")>-1&&i.services.backendConnector.backend&&i.isLanguageChangingTo&&!r(i.isLanguageChangingTo,n))return!1}}),Hse=n=>n.displayName||n.name||(yf(n)&&n.length>0?n:"Unknown"),yf=n=>typeof n=="string",Py=n=>typeof n=="object"&&n!==null,Zse=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,Xse={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},Jse=n=>Xse[n],eae=n=>n.replace(Zse,Jse);let hT={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:eae};const tae=(n={})=>{hT={...hT,...n}},w$=()=>hT;let S$;const nae=n=>{S$=n},JR=()=>S$,lB=(n,e)=>{if(!n)return!1;const t=n.props?.children??n.children;return e?t.length>0:!!t},uB=n=>{if(!n)return[];const e=n.props?.children??n.children;return n.props?.i18nIsDynamicList?B_(e):e},iae=n=>Array.isArray(n)&&n.every(Mt.isValidElement),B_=n=>Array.isArray(n)?n:[n],rae=(n,e)=>{const t={...e};return t.props=Object.assign(n.props,e.props),t},E$=(n,e,t,i)=>{if(!n)return"";let r="";const o=B_(n),s=e?.transSupportBasicHtmlNodes?e.transKeepBasicHtmlNodesFor??[]:[];return o.forEach((a,c)=>{if(yf(a)){r+=`${a}`;return}if(Mt.isValidElement(a)){const{props:h,type:m}=a,v=Object.keys(h).length,x=s.indexOf(m)>-1,E=h.children;if(!E&&x&&!v){r+=`<${m}/>`;return}if(!E&&(!x||v)||h.i18nIsDynamicList){r+=`<${c}></${c}>`;return}if(x&&v===1&&yf(E)){r+=`<${m}>${E}</${m}>`;return}const D=E$(E,e,t,i);r+=`<${c}>${D}</${c}>`;return}if(a===null){nw(t,"TRANS_NULL_VALUE","Passed in a null value as child",{i18nKey:i});return}if(Py(a)){const{format:h,...m}=a,v=Object.keys(m);if(v.length===1){const x=h?`${v[0]}, ${h}`:v[0];r+=`{{${x}}}`;return}nw(t,"TRANS_INVALID_OBJ","Invalid child - Object should only have keys {{ value, format }} (format is optional).",{i18nKey:i,child:a});return}nw(t,"TRANS_INVALID_VAR","Passed in a variable like {number} - pass variables for interpolation as full objects like {{number}}.",{i18nKey:i,child:a})}),r},oae=(n,e=[],t={})=>{if(!n)return n;const i=Object.keys(t),r=[...e,...i];let o="",s=0;for(;s<n.length;)if(n[s]==="<"){let a=!1;const c=n.slice(s).match(/^<\/(\d+|[a-zA-Z][a-zA-Z0-9-]*)>/);if(c){const h=c[1];(/^\d+$/.test(h)||r.includes(h))&&(a=!0,o+=c[0],s+=c[0].length)}if(!a){const h=n.slice(s).match(/^<(\d+|[a-zA-Z][a-zA-Z0-9-]*)(\s+[\w-]+(?:=(?:"[^"]*"|'[^']*'|[^\s>]+))?)*\s*(\/)?>/);if(h){const m=h[1];(/^\d+$/.test(m)||r.includes(m))&&(a=!0,o+=h[0],s+=h[0].length)}}a||(o+="&lt;",s+=1)}else o+=n[s],s+=1;return o},sae=(n,e,t,i,r,o,s)=>{if(t==="")return[];const a=r.transKeepBasicHtmlNodesFor||[],c=t&&new RegExp(a.map(q=>`<${q}`).join("|")).test(t);if(!n&&!e&&!c&&!s)return[t];const h=e??{},m=q=>{B_(q).forEach(H=>{yf(H)||(lB(H)?m(uB(H)):Py(H)&&!Mt.isValidElement(H)&&Object.assign(h,H))})};m(n);const v=oae(t,a,h),x=Vse.parse(`<0>${v}</0>`),E={...h,...o},D=(q,V,H)=>{const X=uB(q),Z=F(X,V.children,H);return iae(X)&&Z.length===0||q.props?.i18nIsDynamicList?X:Z},P=(q,V,H,X,Z)=>{q.dummy?(q.children=V,H.push(Mt.cloneElement(q,{key:X},Z?void 0:V))):H.push(...Mt.Children.map([q],G=>{const oe={...G.props};return delete oe.i18nIsDynamicList,Mt.createElement(G.type,{...oe,key:X,ref:G.props.ref??G.ref},Z?null:V)}))},F=(q,V,H)=>{const X=B_(q);return B_(V).reduce((G,oe,ue)=>{const xe=oe.children?.[0]?.content&&i.services.interpolator.interpolate(oe.children[0].content,E,i.language);if(oe.type==="tag"){let me=X[parseInt(oe.name,10)];!me&&e&&(me=e[oe.name]),H.length===1&&!me&&(me=H[0][oe.name]),me||(me={});const Ie=Object.keys(oe.attrs).length!==0?rae({props:oe.attrs},me):me,Me=Mt.isValidElement(Ie),Te=Me&&lB(oe,!0)&&!oe.voidElement,je=c&&Py(Ie)&&Ie.dummy&&!Me,Ee=Py(e)&&Object.hasOwnProperty.call(e,oe.name);if(yf(Ie)){const qe=i.services.interpolator.interpolate(Ie,E,i.language);G.push(qe)}else if(lB(Ie)||Te){const qe=D(Ie,oe,H);P(Ie,qe,G,ue)}else if(je){const qe=F(X,oe.children,H);P(Ie,qe,G,ue)}else if(Number.isNaN(parseFloat(oe.name)))if(Ee){const qe=D(Ie,oe,H);P(Ie,qe,G,ue,oe.voidElement)}else if(r.transSupportBasicHtmlNodes&&a.indexOf(oe.name)>-1)if(oe.voidElement)G.push(Mt.createElement(oe.name,{key:`${oe.name}-${ue}`}));else{const qe=F(X,oe.children,H);G.push(Mt.createElement(oe.name,{key:`${oe.name}-${ue}`},qe))}else if(oe.voidElement)G.push(`<${oe.name} />`);else{const qe=F(X,oe.children,H);G.push(`<${oe.name}>${qe}</${oe.name}>`)}else if(Py(Ie)&&!Me){const qe=oe.children[0]?xe:null;qe&&G.push(qe)}else P(Ie,xe,G,ue,oe.children.length!==1||!xe)}else if(oe.type==="text"){const me=r.transWrapTextNodes,Ie=s?r.unescape(i.services.interpolator.interpolate(oe.content,E,i.language)):i.services.interpolator.interpolate(oe.content,E,i.language);me?G.push(Mt.createElement(me,{key:`${oe.name}-${ue}`},Ie)):G.push(Ie)}return G},[])},W=F([{dummy:!0,children:n||[]}],x,B_(n||[]));return uB(W[0])},B$=(n,e,t)=>{const i=n.key||e,r=Mt.cloneElement(n,{key:i});if(!r.props||!r.props.children||t.indexOf(`${e}/>`)<0&&t.indexOf(`${e} />`)<0)return r;function o(){return Mt.createElement(Mt.Fragment,null,r)}return Mt.createElement(o,{key:i})},aae=(n,e)=>n.map((t,i)=>B$(t,i,e)),lae=(n,e)=>{const t={};return Object.keys(n).forEach(i=>{Object.assign(t,{[i]:B$(n[i],i,e)})}),t},uae=(n,e,t,i)=>n?Array.isArray(n)?aae(n,e):Py(n)?lae(n,e):(lE(t,"TRANS_INVALID_COMPONENTS",'<Trans /> "components" prop expects an object or array',{i18nKey:i}),null):null,cae=n=>!Py(n)||Array.isArray(n)?!1:Object.keys(n).reduce((e,t)=>e&&Number.isNaN(Number.parseFloat(t)),!0);function Aae({children:n,count:e,parent:t,i18nKey:i,context:r,tOptions:o={},values:s,defaults:a,components:c,ns:h,i18n:m,t:v,shouldUnescape:x,...E}){const D=m||JR();if(!D)return lE(D,"NO_I18NEXT_INSTANCE","Trans: You need to pass in an i18next instance using i18nextReactModule",{i18nKey:i}),n;const P=v||D.t.bind(D)||(Te=>Te),F={...w$(),...D.options?.react};let W=h||P.ns||D.options?.defaultNS;W=yf(W)?[W]:W||["translation"];const q=E$(n,F,D,i),V=a||o?.defaultValue||q||F.transEmptyNodeValue||(typeof i=="function"?Lw(i):i),{hashTransKey:H}=F,X=i||(H?H(q||V):q||V);D.options?.interpolation?.defaultVariables&&(s=s&&Object.keys(s).length>0?{...s,...D.options.interpolation.defaultVariables}:{...D.options.interpolation.defaultVariables});const Z=s||e!==void 0&&!D.options?.interpolation?.alwaysFormat||!n?o.interpolation:{interpolation:{...o.interpolation,prefix:"#$?",suffix:"?$#"}},G={...o,context:r||o.context,count:e,...s,...Z,defaultValue:a||o?.defaultValue,ns:W};let oe=X?P(X,G):V;oe===X&&V&&(oe=V);const ue=uae(c,oe,D,i);let xe=ue||n,me=null;cae(ue)&&(me=ue,xe=n);const Ie=sae(xe,me,oe,D,F,G,x),Me=t??F.defaultTransParent;return Me?Mt.createElement(Me,E,Ie):Ie}const hae={type:"3rdParty",init(n){tae(n.options.react),nae(n)}},O$=Mt.createContext();class dae{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(t=>{this.usedNamespaces[t]||(this.usedNamespaces[t]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}function Eb({children:n,count:e,parent:t,i18nKey:i,context:r,tOptions:o={},values:s,defaults:a,components:c,ns:h,i18n:m,t:v,shouldUnescape:x,...E}){const{i18n:D,defaultNS:P}=Mt.useContext(O$)||{},F=m||D||JR(),W=v||F?.t.bind(F);return Aae({children:n,count:e,parent:t,i18nKey:i,context:r,tOptions:o,values:s,defaults:a,components:c,ns:h||W?.ns||P||F?.options?.defaultNS,i18n:F,t:v,shouldUnescape:x,...E})}var cB={exports:{}},AB={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vL;function fae(){if(vL)return AB;vL=1;var n=Oa();function e(v,x){return v===x&&(v!==0||1/v===1/x)||v!==v&&x!==x}var t=typeof Object.is=="function"?Object.is:e,i=n.useState,r=n.useEffect,o=n.useLayoutEffect,s=n.useDebugValue;function a(v,x){var E=x(),D=i({inst:{value:E,getSnapshot:x}}),P=D[0].inst,F=D[1];return o(function(){P.value=E,P.getSnapshot=x,c(P)&&F({inst:P})},[v,E,x]),r(function(){return c(P)&&F({inst:P}),v(function(){c(P)&&F({inst:P})})},[v]),s(E),E}function c(v){var x=v.getSnapshot;v=v.value;try{var E=x();return!t(v,E)}catch{return!0}}function h(v,x){return x()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:a;return AB.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:m,AB}var bL;function pae(){return bL||(bL=1,cB.exports=fae()),cB.exports}var mae=pae();const gae=(n,e)=>yf(e)?e:Py(e)&&yf(e.defaultValue)?e.defaultValue:Array.isArray(n)?n[n.length-1]:n,yae={t:gae,ready:!1},vae=()=>()=>{},bae=(n,e={})=>{const{i18n:t}=e,{i18n:i,defaultNS:r}=Mt.useContext(O$)||{},o=t||i||JR();o&&!o.reportNamespaces&&(o.reportNamespaces=new dae),o||lE(o,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const s=Mt.useMemo(()=>({...w$(),...o?.options?.react,...e}),[o,e]),{useSuspense:a,keyPrefix:c}=s,h=Mt.useMemo(()=>{const H=r||o?.options?.defaultNS;return yf(H)?[H]:H||["translation"]},[n,r,o]);o?.reportNamespaces?.addUsedNamespaces?.(h);const m=Mt.useRef(0),v=Mt.useCallback(H=>{if(!o)return vae;const{bindI18n:X,bindI18nStore:Z}=s,G=()=>{m.current+=1,H()};return X&&o.on(X,G),Z&&o.store.on(Z,G),()=>{X&&X.split(" ").forEach(oe=>o.off(oe,G)),Z&&Z.split(" ").forEach(oe=>o.store.off(oe,G))}},[o,s]),x=Mt.useRef(),E=Mt.useCallback(()=>{if(!o)return yae;const H=!!(o.isInitialized||o.initializedStoreOnce)&&h.every(xe=>$se(xe,o,s)),X=e.lng||o.language,Z=m.current,G=x.current;if(G&&G.ready===H&&G.lng===X&&G.keyPrefix===c&&G.revision===Z)return G;const ue={t:o.getFixedT(X,s.nsMode==="fallback"?h:h[0],c),ready:H,lng:X,keyPrefix:c,revision:Z};return x.current=ue,ue},[o,h,c,s,e.lng]),[D,P]=Mt.useState(0),{t:F,ready:W}=mae.useSyncExternalStore(v,E,E);Mt.useEffect(()=>{if(o&&!W&&!a){const H=()=>P(X=>X+1);e.lng?yL(o,e.lng,h,H):AT(o,h,H)}},[o,e.lng,h,W,a,D]);const q=o||{},V=Mt.useMemo(()=>{const H=[F,q,W];return H.t=F,H.i18n=q,H.ready=W,H},[F,q,W]);if(o&&a&&!W)throw new Promise(H=>{const X=()=>H();e.lng?yL(o,e.lng,h,X):AT(o,h,X)});return V},Po=(n,e={})=>function(i){function r({forwardedRef:s,...a}){const[c,h,m]=bae(n,{...a,keyPrefix:e.keyPrefix}),v={...a,t:c,i18n:h,tReady:m};return e.withRef&&s?v.ref=s:!e.withRef&&s&&(v.forwardedRef=s),Mt.createElement(i,v)}r.displayName=`withI18nextTranslation(${Hse(i)})`,r.WrappedComponent=i;const o=(s,a)=>Mt.createElement(r,Object.assign({},s,{forwardedRef:a}));return e.withRef?Mt.forwardRef(o):r};function ca(){var n="/home/runner/work/maputnik/maputnik/src/i18n.ts",e="529ee327821ff95d86675c5d3e41229f0d9cb0df",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/i18n.ts",statementMap:{0:{start:{line:5,column:34},end:{line:13,column:1}},1:{start:{line:14,column:0},end:{line:40,column:3}},2:{start:{line:16,column:4},end:{line:18,column:5}},3:{start:{line:17,column:6},end:{line:17,column:16}},4:{start:{line:19,column:4},end:{line:19,column:593}},5:{start:{line:19,column:119},end:{line:19,column:158}},6:{start:{line:19,column:198},end:{line:19,column:237}},7:{start:{line:19,column:277},end:{line:19,column:316}},8:{start:{line:19,column:356},end:{line:19,column:395}},9:{start:{line:19,column:435},end:{line:19,column:474}},10:{start:{line:19,column:514},end:{line:19,column:553}},11:{start:{line:35,column:4},end:{line:37,column:5}},12:{start:{line:36,column:6},end:{line:36,column:13}},13:{start:{line:38,column:4},end:{line:38,column:77}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:15,column:21},end:{line:15,column:22}},loc:{start:{line:15,column:35},end:{line:20,column:3}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:19,column:113},end:{line:19,column:114}},loc:{start:{line:19,column:119},end:{line:19,column:158}},line:19},2:{name:"(anonymous_2)",decl:{start:{line:19,column:192},end:{line:19,column:193}},loc:{start:{line:19,column:198},end:{line:19,column:237}},line:19},3:{name:"(anonymous_3)",decl:{start:{line:19,column:271},end:{line:19,column:272}},loc:{start:{line:19,column:277},end:{line:19,column:316}},line:19},4:{name:"(anonymous_4)",decl:{start:{line:19,column:350},end:{line:19,column:351}},loc:{start:{line:19,column:356},end:{line:19,column:395}},line:19},5:{name:"(anonymous_5)",decl:{start:{line:19,column:429},end:{line:19,column:430}},loc:{start:{line:19,column:435},end:{line:19,column:474}},line:19},6:{name:"(anonymous_6)",decl:{start:{line:19,column:508},end:{line:19,column:509}},loc:{start:{line:19,column:514},end:{line:19,column:553}},line:19},7:{name:"(anonymous_7)",decl:{start:{line:34,column:21},end:{line:34,column:22}},loc:{start:{line:34,column:41},end:{line:39,column:3}},line:34}},branchMap:{0:{loc:{start:{line:16,column:4},end:{line:18,column:5}},type:"if",locations:[{start:{line:16,column:4},end:{line:18,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:16},1:{loc:{start:{line:35,column:4},end:{line:37,column:5}},type:"if",locations:[{start:{line:35,column:4},end:{line:37,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:35}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/i18n.ts"],names:[],mappings:"AAAA,MAAA,CAAA,oCAAA,CAAA,IAAA,CAAA,CAAA,CAAA,IAAA,CAAA,OAAA,CAAA,MAAA,CAAA,MAAA,CAAA,EAAA,CAAA,CAAA,MAAA,CAAO,IAAA,CAAA,IAAA,CAAU,CAAA,OAAA,CAAA;AACjB,MAAA,CAAO,QAAA,CAAA,IAAA,CAAc,CAAA,OAAA,CAAA,OAAA,CAAA,gBAAA,CAAA;AACrB,MAAA,CAAO,kBAAA,CAAA,IAAA,CAAwB,CAAA,OAAA,CAAA,SAAA,CAAA,EAAA,CAAA,OAAA,CAAA;AAC/B,MAAA,CAAA,CAAA,CAAS,gBAAA,CAAA,CAAA,CAAA,IAAA,CAAwB,CAAA,KAAA,CAAA,OAAA,CAAA;AAE1B,MAAA,CAAA,KAAA,CAAM,kBAAA,CAAA,CAAA,CAAqB;AAAA,CAAA,CAChC,CAAA,EAAA,CAAA,CAAA,CAAM,CAAA,OAAA,CAAA;AAAA,CAAA,CACN,CAAA,EAAA,CAAA,CAAA,CAAM,CAAA,OAAA,CAAA;AAAA,CAAA,CACN,CAAA,EAAA,CAAA,CAAA,CAAM,CAAA,IAAA,CAAA,GAAA,CAAA;AAAA,CAAA,CACN,CAAA,EAAA,CAAA,CAAA,CAAM,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;AAAA,CAAA,CACN,CAAA,EAAA,CAAA,CAAA,CAAM,CAAA,QAAA,CAAA;AAAA,CAAA,CACN,CAAA,EAAA,CAAA,CAAA,CAAM,CAAA,CAAA,CAAA,CAAA,CAAA;AAAA,CAAA,CACN,CAAA,EAAA,CAAA,CAAA,CAAM,CAAA,CAAA,CAAA,CAAA,CAAA;AACR,CAAA;AAEA,IAAA,CACG,GAAA,CAAI,QAAQ,CAAA,CACZ,GAAA;AAAA,CAAA,CACC,kBAAA,CAAmB,CAAC,IAAA,CAAA,CAAc,EAAA,CAAA,CAAA,CAAA,CAAA,CAAe;AAC/C,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,CAAI,SAAS,CAAA,EAAA,CAAA,CAAA,CAAM;AAEjB,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,MAAA,CAAO,CAAC,CAAA;AAAA,CAAA,CAAA,CAAA,CACV;AACA,CAAA,CAAA,CAAA,CAAA,MAAA,CAAO,oCAAA,CAAA,CAAA,0fAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,OAAA,CAAA,CAAA,CAAA,IAAA,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,CAAA,IAAA,CAAA,CAAA,CAAA,CAAA,CAA8B;AAAA,CAAA,CACvC,CAAC;AACH,CAAA,CACC,GAAA,CAAI,gBAAgB,CAAA,CACpB,IAAA,CAAK;AAAA,CAAA,CACJ,aAAA,CAAA,CAAe,MAAA,CAAO,IAAA,CAAK,kBAAkB,CAAA;AAAA,CAAA,CAC7C,YAAA,CAAA,CAAc,KAAA;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,EAAA,CAAA,GAAA,CAAA,GAAA,CAAA,IAAA,CAAA,EAAA,CAAA,IAAA,CAAA,QAAA,CAAA;AAAA,CAAA,CACd,WAAA,CAAA,CAAa,KAAA;AAAA,CAAA,CACb,aAAA,CAAA,CAAe;AAAA,CAAA,CAAA,CAAA,CACb,WAAA,CAAA,CAAa;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,KAAA,CAAA,OAAA,CAAA,OAAA,CAAA,GAAA,CAAA;AAAA,CAAA,CACf,CAAA;AAAA,CAAA,CACA,WAAA,CAAA,CAAa,IAAA;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,IAAA,CAAA,KAAA,CAAA,EAAA,CAAA,EAAA,CAAA,GAAA,CAAA,GAAA,CAAA,iBAAA,CAAA,EAAA,CAAA;AAAA,CAAA,CACb,WAAA,CAAA,CAAa,KAAA;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,GAAA,CAAA,GAAA,CAAA,QAAA,CAAA,EAAA,CAAA,KAAA,CAAA,EAAA,CAAA,EAAA,CAAA,GAAA,CAAA,GAAA,CAAA,GAAA,CAAA,OAAA,CAAA,QAAA,CAAA,EAAA,CAAA,GAAA,CAAA;AAAA,CAAA,CACb,iBAAA,CAAA,CAAmB,CAAC,IAAA,CAAA,CAAM,GAAA,CAAA,CAAK,GAAA,CAAA,CAAA,CAAA,CAAA,CAAQ;AACrC,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,CAAI,IAAA,CAAK,CAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAM,CAAA,EAAA,CAAA,CAAA,CAAM;AAAE,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,MAAA;AAAA,CAAA,CAAA,CAAA,CAAQ;AAChC,CAAA,CAAA,CAAA,CAAA,OAAA,CAAQ,IAAA,CAAK,4BAA4B,GAAG,CAAA,CAAA,CAAA,EAAA,CAAA,CAAA,CAAA,CAAS,KAAK,IAAA,CAAK,CAAA,CAAA,CAAA,CAAI,CAAC,CAAA,CAAA,CAAG,CAAA;AAAA,CAAA,CACzE;AACF,CAAC,CAAA;AAEH,MAAA,CAAA,OAAA,CAAe,IAAA;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"529ee327821ff95d86675c5d3e41229f0d9cb0df"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return ca=function(){return s},s}ca();const I$=(ca().s[0]++,{de:"Deutsch",en:"English",fr:"Franais",he:"",it:"Italiano",ja:"",zh:""});ca().s[1]++;CA.use(_$).use(zse((n,e)=>(ca().f[0]++,ca().s[2]++,n==="en"?(ca().b[0][0]++,ca().s[3]++,{}):(ca().b[0][1]++,ca().s[4]++,rse(Object.assign({"./locales/de/translation.json":()=>(ca().f[1]++,ca().s[5]++,UC(()=>import("./translation-CQD4fuPu.js"),[])),"./locales/fr/translation.json":()=>(ca().f[2]++,ca().s[6]++,UC(()=>import("./translation-XoriI0W-.js"),[])),"./locales/he/translation.json":()=>(ca().f[3]++,ca().s[7]++,UC(()=>import("./translation-aD1CAGoy.js"),[])),"./locales/it/translation.json":()=>(ca().f[4]++,ca().s[8]++,UC(()=>import("./translation-CZ64AJ8H.js"),[])),"./locales/ja/translation.json":()=>(ca().f[5]++,ca().s[9]++,UC(()=>import("./translation-BhJ-ufwk.js"),[])),"./locales/zh/translation.json":()=>(ca().f[6]++,ca().s[10]++,UC(()=>import("./translation-BrzYPxJn.js"),[]))}),`./locales/${n}/${e}.json`,4))))).use(hae).init({supportedLngs:Object.keys(I$),keySeparator:!1,nsSeparator:!1,interpolation:{escapeValue:!1},saveMissing:!0,fallbackLng:!1,missingKeyHandler:(n,e,t)=>{if(ca().f[7]++,ca().s[11]++,n[0]==="en"){ca().b[1][0]++,ca().s[12]++;return}else ca().b[1][1]++;ca().s[13]++,console.warn(`Missing translation for "${t}" in "${n.join(", ")}"`)}});var T2={exports:{}};T2.exports;var CL;function Cae(){return CL||(CL=1,(function(n,e){var t=200,i="__lodash_hash_undefined__",r=9007199254740991,o="[object Arguments]",s="[object Array]",a="[object Boolean]",c="[object Date]",h="[object Error]",m="[object Function]",v="[object GeneratorFunction]",x="[object Map]",E="[object Number]",D="[object Object]",P="[object Promise]",F="[object RegExp]",W="[object Set]",q="[object String]",V="[object Symbol]",H="[object WeakMap]",X="[object ArrayBuffer]",Z="[object DataView]",G="[object Float32Array]",oe="[object Float64Array]",ue="[object Int8Array]",xe="[object Int16Array]",me="[object Int32Array]",Ie="[object Uint8Array]",Me="[object Uint8ClampedArray]",Te="[object Uint16Array]",je="[object Uint32Array]",Ee=/[\\^$.*+?()[\]{}|]/g,qe=/\w*$/,At=/^\[object .+?Constructor\]$/,gt=/^(?:0|[1-9]\d*)$/,Le={};Le[o]=Le[s]=Le[X]=Le[Z]=Le[a]=Le[c]=Le[G]=Le[oe]=Le[ue]=Le[xe]=Le[me]=Le[x]=Le[E]=Le[D]=Le[F]=Le[W]=Le[q]=Le[V]=Le[Ie]=Le[Me]=Le[Te]=Le[je]=!0,Le[h]=Le[m]=Le[H]=!1;var Re=typeof window=="object"&&window&&window.Object===Object&&window,Ge=typeof self=="object"&&self&&self.Object===Object&&self,De=Re||Ge||Function("return this")(),_t=e&&!e.nodeType&&e,at=_t&&!0&&n&&!n.nodeType&&n,Tt=at&&at.exports===_t;function Kt(J,ye){return J.set(ye[0],ye[1]),J}function Ke(J,ye){return J.add(ye),J}function Oe(J,ye){for(var Ne=-1,St=J?J.length:0;++Ne<St&&ye(J[Ne],Ne,J)!==!1;);return J}function Be(J,ye){for(var Ne=-1,St=ye.length,fn=J.length;++Ne<St;)J[fn+Ne]=ye[Ne];return J}function Ve(J,ye,Ne,St){for(var fn=-1,nn=J?J.length:0;++fn<nn;)Ne=ye(Ne,J[fn],fn,J);return Ne}function yt(J,ye){for(var Ne=-1,St=Array(J);++Ne<J;)St[Ne]=ye(Ne);return St}function ft(J,ye){return J?.[ye]}function Ct(J){var ye=!1;if(J!=null&&typeof J.toString!="function")try{ye=!!(J+"")}catch{}return ye}function Lt(J){var ye=-1,Ne=Array(J.size);return J.forEach(function(St,fn){Ne[++ye]=[fn,St]}),Ne}function kt(J,ye){return function(Ne){return J(ye(Ne))}}function an(J){var ye=-1,Ne=Array(J.size);return J.forEach(function(St){Ne[++ye]=St}),Ne}var Hn=Array.prototype,Wn=Function.prototype,_i=Object.prototype,Ln=De["__core-js_shared__"],Un=(function(){var J=/[^.]+$/.exec(Ln&&Ln.keys&&Ln.keys.IE_PROTO||"");return J?"Symbol(src)_1."+J:""})(),xn=Wn.toString,Zn=_i.hasOwnProperty,Rn=_i.toString,Ot=RegExp("^"+xn.call(Zn).replace(Ee,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),be=Tt?De.Buffer:void 0,ie=De.Symbol,le=De.Uint8Array,de=kt(Object.getPrototypeOf,Object),se=Object.create,Ae=_i.propertyIsEnumerable,ve=Hn.splice,We=Object.getOwnPropertySymbols,tt=be?be.isBuffer:void 0,Pe=kt(Object.keys,Object),Xe=Ss(De,"DataView"),y=Ss(De,"Map"),ot=Ss(De,"Promise"),Dt=Ss(De,"Set"),xt=Ss(De,"WeakMap"),tn=Ss(Object,"create"),dt=Co(Xe),Xn=Co(y),yi=Co(ot),Dn=Co(Dt),Fn=Co(xt),vi=ie?ie.prototype:void 0,Zi=vi?vi.valueOf:void 0;function Ki(J){var ye=-1,Ne=J?J.length:0;for(this.clear();++ye<Ne;){var St=J[ye];this.set(St[0],St[1])}}function Ji(){this.__data__=tn?tn(null):{}}function ki(J){return this.has(J)&&delete this.__data__[J]}function Ri(J){var ye=this.__data__;if(tn){var Ne=ye[J];return Ne===i?void 0:Ne}return Zn.call(ye,J)?ye[J]:void 0}function pr(J){var ye=this.__data__;return tn?ye[J]!==void 0:Zn.call(ye,J)}function rn(J,ye){var Ne=this.__data__;return Ne[J]=tn&&ye===void 0?i:ye,this}Ki.prototype.clear=Ji,Ki.prototype.delete=ki,Ki.prototype.get=Ri,Ki.prototype.has=pr,Ki.prototype.set=rn;function Li(J){var ye=-1,Ne=J?J.length:0;for(this.clear();++ye<Ne;){var St=J[ye];this.set(St[0],St[1])}}function $o(){this.__data__=[]}function Ws(J){var ye=this.__data__,Ne=fa(ye,J);if(Ne<0)return!1;var St=ye.length-1;return Ne==St?ye.pop():ve.call(ye,Ne,1),!0}function Ur(J){var ye=this.__data__,Ne=fa(ye,J);return Ne<0?void 0:ye[Ne][1]}function pn(J){return fa(this.__data__,J)>-1}function zi(J,ye){var Ne=this.__data__,St=fa(Ne,J);return St<0?Ne.push([J,ye]):Ne[St][1]=ye,this}Li.prototype.clear=$o,Li.prototype.delete=Ws,Li.prototype.get=Ur,Li.prototype.has=pn,Li.prototype.set=zi;function oi(J){var ye=-1,Ne=J?J.length:0;for(this.clear();++ye<Ne;){var St=J[ye];this.set(St[0],St[1])}}function wl(){this.__data__={hash:new Ki,map:new(y||Li),string:new Ki}}function nA(J){return qa(this,J).delete(J)}function nu(J){return qa(this,J).get(J)}function qi(J){return qa(this,J).has(J)}function tc(J,ye){return qa(this,J).set(J,ye),this}oi.prototype.clear=wl,oi.prototype.delete=nA,oi.prototype.get=nu,oi.prototype.has=qi,oi.prototype.set=tc;function no(J){this.__data__=new Li(J)}function Ls(){this.__data__=new Li}function rl(J){return this.__data__.delete(J)}function Ya(J){return this.__data__.get(J)}function Io(J){return this.__data__.has(J)}function iA(J,ye){var Ne=this.__data__;if(Ne instanceof Li){var St=Ne.__data__;if(!y||St.length<t-1)return St.push([J,ye]),this;Ne=this.__data__=new oi(St)}return Ne.set(J,ye),this}no.prototype.clear=Ls,no.prototype.delete=rl,no.prototype.get=Ya,no.prototype.has=Io,no.prototype.set=iA;function Uo(J,ye){var Ne=ms(J)||go(J)?yt(J.length,String):[],St=Ne.length,fn=!!St;for(var nn in J)Zn.call(J,nn)&&!(fn&&(nn=="length"||Fl(nn,St)))&&Ne.push(nn);return Ne}function Lr(J,ye,Ne){var St=J[ye];(!(Zn.call(J,ye)&&is(St,Ne))||Ne===void 0&&!(ye in J))&&(J[ye]=Ne)}function fa(J,ye){for(var Ne=J.length;Ne--;)if(is(J[Ne][0],ye))return Ne;return-1}function Ho(J,ye){return J&&Tu(ye,Ta(ye),J)}function Ko(J,ye,Ne,St,fn,nn,xi){var Gn;if(St&&(Gn=nn?St(J,fn,nn,xi):St(J)),Gn!==void 0)return Gn;if(!co(J))return J;var Ei=ms(J);if(Ei){if(Gn=Ru(J),!ye)return Tc(J,Gn)}else{var li=Va(J),Ar=li==m||li==v;if(zl(J))return ko(J,ye);if(li==D||li==o||Ar&&!nn){if(Ct(J))return nn?J:{};if(Gn=Qs(Ar?{}:J),!ye)return rA(J,Ho(Gn,J))}else{if(!Le[li])return nn?J:{};Gn=_A(J,li,Ko,ye)}}xi||(xi=new no);var Gr=xi.get(J);if(Gr)return Gr;if(xi.set(J,Gn),!Ei)var mr=Ne?Ll(J):Ta(J);return Oe(mr||J,function(hr,Hr){mr&&(Hr=hr,hr=J[Hr]),Lr(Gn,Hr,Ko(hr,ye,Ne,St,Hr,J,xi))}),Gn}function Iu(J){return co(J)?se(J):{}}function iu(J,ye,Ne){var St=ye(J);return ms(J)?St:Be(St,Ne(J))}function ru(J){return Rn.call(J)}function nc(J){if(!co(J)||Fi(J))return!1;var ye=vo(J)||Ct(J)?Ot:At;return ye.test(Co(J))}function Sl(J){if(!Vi(J))return Pe(J);var ye=[];for(var Ne in Object(J))Zn.call(J,Ne)&&Ne!="constructor"&&ye.push(Ne);return ye}function ko(J,ye){if(ye)return J.slice();var Ne=new J.constructor(J.length);return J.copy(Ne),Ne}function ku(J){var ye=new J.constructor(J.byteLength);return new le(ye).set(new le(J)),ye}function ou(J,ye){var Ne=ye?ku(J.buffer):J.buffer;return new J.constructor(Ne,J.byteOffset,J.byteLength)}function ic(J,ye,Ne){var St=ye?Ne(Lt(J),!0):Lt(J);return Ve(St,Kt,new J.constructor)}function rc(J){var ye=new J.constructor(J.source,qe.exec(J));return ye.lastIndex=J.lastIndex,ye}function kc(J,ye,Ne){var St=ye?Ne(an(J),!0):an(J);return Ve(St,Ke,new J.constructor)}function Lh(J){return Zi?Object(Zi.call(J)):{}}function pa(J,ye){var Ne=ye?ku(J.buffer):J.buffer;return new J.constructor(Ne,J.byteOffset,J.length)}function Tc(J,ye){var Ne=-1,St=J.length;for(ye||(ye=Array(St));++Ne<St;)ye[Ne]=J[Ne];return ye}function Tu(J,ye,Ne,St){Ne||(Ne={});for(var fn=-1,nn=ye.length;++fn<nn;){var xi=ye[fn],Gn=void 0;Lr(Ne,xi,Gn===void 0?J[xi]:Gn)}return Ne}function rA(J,ye){return Tu(J,Mo(J),ye)}function Ll(J){return iu(J,Ta,Mo)}function qa(J,ye){var Ne=J.__data__;return Du(ye)?Ne[typeof ye=="string"?"string":"hash"]:Ne.map}function Ss(J,ye){var Ne=ft(J,ye);return nc(Ne)?Ne:void 0}var Mo=We?kt(We,Object):Ni,Va=ru;(Xe&&Va(new Xe(new ArrayBuffer(1)))!=Z||y&&Va(new y)!=x||ot&&Va(ot.resolve())!=P||Dt&&Va(new Dt)!=W||xt&&Va(new xt)!=H)&&(Va=function(J){var ye=Rn.call(J),Ne=ye==D?J.constructor:void 0,St=Ne?Co(Ne):void 0;if(St)switch(St){case dt:return Z;case Xn:return x;case yi:return P;case Dn:return W;case Fn:return H}return ye});function Ru(J){var ye=J.length,Ne=J.constructor(ye);return ye&&typeof J[0]=="string"&&Zn.call(J,"index")&&(Ne.index=J.index,Ne.input=J.input),Ne}function Qs(J){return typeof J.constructor=="function"&&!Vi(J)?Iu(de(J)):{}}function _A(J,ye,Ne,St){var fn=J.constructor;switch(ye){case X:return ku(J);case a:case c:return new fn(+J);case Z:return ou(J,St);case G:case oe:case ue:case xe:case me:case Ie:case Me:case Te:case je:return pa(J,St);case x:return ic(J,St,Ne);case E:case q:return new fn(J);case F:return rc(J);case W:return kc(J,St,Ne);case V:return Lh(J)}}function Fl(J,ye){return ye=ye??r,!!ye&&(typeof J=="number"||gt.test(J))&&J>-1&&J%1==0&&J<ye}function Du(J){var ye=typeof J;return ye=="string"||ye=="number"||ye=="symbol"||ye=="boolean"?J!=="__proto__":J===null}function Fi(J){return!!Un&&Un in J}function Vi(J){var ye=J&&J.constructor,Ne=typeof ye=="function"&&ye.prototype||_i;return J===Ne}function Co(J){if(J!=null){try{return xn.call(J)}catch{}try{return J+""}catch{}}return""}function Ia(J){return Ko(J,!0,!0)}function is(J,ye){return J===ye||J!==J&&ye!==ye}function go(J){return yo(J)&&Zn.call(J,"callee")&&(!Ae.call(J,"callee")||Rn.call(J)==o)}var ms=Array.isArray;function uo(J){return J!=null&&Es(J.length)&&!vo(J)}function yo(J){return ka(J)&&uo(J)}var zl=tt||Fr;function vo(J){var ye=co(J)?Rn.call(J):"";return ye==m||ye==v}function Es(J){return typeof J=="number"&&J>-1&&J%1==0&&J<=r}function co(J){var ye=typeof J;return!!J&&(ye=="object"||ye=="function")}function ka(J){return!!J&&typeof J=="object"}function Ta(J){return uo(J)?Uo(J):Sl(J)}function Ni(){return[]}function Fr(){return!1}n.exports=Ia})(T2,T2.exports)),T2.exports}var _ae=Cae();const _L=Ou(_ae);var hB,xL;function xae(){if(xL)return hB;xL=1;var n=NaN,e="[object Symbol]",t=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,r=/^0b[01]+$/i,o=/^0o[0-7]+$/i,s=parseInt,a=Object.prototype,c=a.toString;function h(P,F,W){return P===P&&(W!==void 0&&(P=P<=W?P:W),F!==void 0&&(P=P>=F?P:F)),P}function m(P){var F=typeof P;return!!P&&(F=="object"||F=="function")}function v(P){return!!P&&typeof P=="object"}function x(P){return typeof P=="symbol"||v(P)&&c.call(P)==e}function E(P){if(typeof P=="number")return P;if(x(P))return n;if(m(P)){var F=typeof P.valueOf=="function"?P.valueOf():P;P=m(F)?F+"":F}if(typeof P!="string")return P===0?P:+P;P=P.replace(t,"");var W=r.test(P);return W||o.test(P)?s(P.slice(2),W?2:8):i.test(P)?n:+P}function D(P,F,W){return W===void 0&&(W=F,F=void 0),W!==void 0&&(W=E(W),W=W===W?W:0),F!==void 0&&(F=E(F),F=F===F?F:0),h(E(P),F,W)}return hB=D,hB}var Mae=xae();const ML=Ou(Mae);var dB={},u2={},wL;function wae(){if(wL)return u2;wL=1,u2.byteLength=a,u2.toByteArray=h,u2.fromByteArray=x;for(var n=[],e=[],t=typeof Uint8Array<"u"?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=0,o=i.length;r<o;++r)n[r]=i[r],e[i.charCodeAt(r)]=r;e[45]=62,e[95]=63;function s(E){var D=E.length;if(D%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var P=E.indexOf("=");P===-1&&(P=D);var F=P===D?0:4-P%4;return[P,F]}function a(E){var D=s(E),P=D[0],F=D[1];return(P+F)*3/4-F}function c(E,D,P){return(D+P)*3/4-P}function h(E){var D,P=s(E),F=P[0],W=P[1],q=new t(c(E,F,W)),V=0,H=W>0?F-4:F,X;for(X=0;X<H;X+=4)D=e[E.charCodeAt(X)]<<18|e[E.charCodeAt(X+1)]<<12|e[E.charCodeAt(X+2)]<<6|e[E.charCodeAt(X+3)],q[V++]=D>>16&255,q[V++]=D>>8&255,q[V++]=D&255;return W===2&&(D=e[E.charCodeAt(X)]<<2|e[E.charCodeAt(X+1)]>>4,q[V++]=D&255),W===1&&(D=e[E.charCodeAt(X)]<<10|e[E.charCodeAt(X+1)]<<4|e[E.charCodeAt(X+2)]>>2,q[V++]=D>>8&255,q[V++]=D&255),q}function m(E){return n[E>>18&63]+n[E>>12&63]+n[E>>6&63]+n[E&63]}function v(E,D,P){for(var F,W=[],q=D;q<P;q+=3)F=(E[q]<<16&16711680)+(E[q+1]<<8&65280)+(E[q+2]&255),W.push(m(F));return W.join("")}function x(E){for(var D,P=E.length,F=P%3,W=[],q=16383,V=0,H=P-F;V<H;V+=q)W.push(v(E,V,V+q>H?H:V+q));return F===1?(D=E[P-1],W.push(n[D>>2]+n[D<<4&63]+"==")):F===2&&(D=(E[P-2]<<8)+E[P-1],W.push(n[D>>10]+n[D>>4&63]+n[D<<2&63]+"=")),W.join("")}return u2}var FM={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var SL;function Sae(){return SL||(SL=1,FM.read=function(n,e,t,i,r){var o,s,a=r*8-i-1,c=(1<<a)-1,h=c>>1,m=-7,v=t?r-1:0,x=t?-1:1,E=n[e+v];for(v+=x,o=E&(1<<-m)-1,E>>=-m,m+=a;m>0;o=o*256+n[e+v],v+=x,m-=8);for(s=o&(1<<-m)-1,o>>=-m,m+=i;m>0;s=s*256+n[e+v],v+=x,m-=8);if(o===0)o=1-h;else{if(o===c)return s?NaN:(E?-1:1)*(1/0);s=s+Math.pow(2,i),o=o-h}return(E?-1:1)*s*Math.pow(2,o-i)},FM.write=function(n,e,t,i,r,o){var s,a,c,h=o*8-r-1,m=(1<<h)-1,v=m>>1,x=r===23?Math.pow(2,-24)-Math.pow(2,-77):0,E=i?0:o-1,D=i?1:-1,P=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=m):(s=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-s))<1&&(s--,c*=2),s+v>=1?e+=x/c:e+=x*Math.pow(2,1-v),e*c>=2&&(s++,c/=2),s+v>=m?(a=0,s=m):s+v>=1?(a=(e*c-1)*Math.pow(2,r),s=s+v):(a=e*Math.pow(2,v-1)*Math.pow(2,r),s=0));r>=8;n[t+E]=a&255,E+=D,a/=256,r-=8);for(s=s<<r|a,h+=r;h>0;n[t+E]=s&255,E+=D,s/=256,h-=8);n[t+E-D]|=P*128}),FM}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var EL;function Eae(){return EL||(EL=1,(function(n){const e=wae(),t=Sae(),i=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=a,n.SlowBuffer=q,n.INSPECT_MAX_BYTES=50;const r=2147483647;n.kMaxLength=r,a.TYPED_ARRAY_SUPPORT=o(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function o(){try{const be=new Uint8Array(1),ie={foo:function(){return 42}};return Object.setPrototypeOf(ie,Uint8Array.prototype),Object.setPrototypeOf(be,ie),be.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function s(be){if(be>r)throw new RangeError('The value "'+be+'" is invalid for option "size"');const ie=new Uint8Array(be);return Object.setPrototypeOf(ie,a.prototype),ie}function a(be,ie,le){if(typeof be=="number"){if(typeof ie=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return v(be)}return c(be,ie,le)}a.poolSize=8192;function c(be,ie,le){if(typeof be=="string")return x(be,ie);if(ArrayBuffer.isView(be))return D(be);if(be==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof be);if(Un(be,ArrayBuffer)||be&&Un(be.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Un(be,SharedArrayBuffer)||be&&Un(be.buffer,SharedArrayBuffer)))return P(be,ie,le);if(typeof be=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const de=be.valueOf&&be.valueOf();if(de!=null&&de!==be)return a.from(de,ie,le);const se=F(be);if(se)return se;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof be[Symbol.toPrimitive]=="function")return a.from(be[Symbol.toPrimitive]("string"),ie,le);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof be)}a.from=function(be,ie,le){return c(be,ie,le)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function h(be){if(typeof be!="number")throw new TypeError('"size" argument must be of type number');if(be<0)throw new RangeError('The value "'+be+'" is invalid for option "size"')}function m(be,ie,le){return h(be),be<=0?s(be):ie!==void 0?typeof le=="string"?s(be).fill(ie,le):s(be).fill(ie):s(be)}a.alloc=function(be,ie,le){return m(be,ie,le)};function v(be){return h(be),s(be<0?0:W(be)|0)}a.allocUnsafe=function(be){return v(be)},a.allocUnsafeSlow=function(be){return v(be)};function x(be,ie){if((typeof ie!="string"||ie==="")&&(ie="utf8"),!a.isEncoding(ie))throw new TypeError("Unknown encoding: "+ie);const le=V(be,ie)|0;let de=s(le);const se=de.write(be,ie);return se!==le&&(de=de.slice(0,se)),de}function E(be){const ie=be.length<0?0:W(be.length)|0,le=s(ie);for(let de=0;de<ie;de+=1)le[de]=be[de]&255;return le}function D(be){if(Un(be,Uint8Array)){const ie=new Uint8Array(be);return P(ie.buffer,ie.byteOffset,ie.byteLength)}return E(be)}function P(be,ie,le){if(ie<0||be.byteLength<ie)throw new RangeError('"offset" is outside of buffer bounds');if(be.byteLength<ie+(le||0))throw new RangeError('"length" is outside of buffer bounds');let de;return ie===void 0&&le===void 0?de=new Uint8Array(be):le===void 0?de=new Uint8Array(be,ie):de=new Uint8Array(be,ie,le),Object.setPrototypeOf(de,a.prototype),de}function F(be){if(a.isBuffer(be)){const ie=W(be.length)|0,le=s(ie);return le.length===0||be.copy(le,0,0,ie),le}if(be.length!==void 0)return typeof be.length!="number"||xn(be.length)?s(0):E(be);if(be.type==="Buffer"&&Array.isArray(be.data))return E(be.data)}function W(be){if(be>=r)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r.toString(16)+" bytes");return be|0}function q(be){return+be!=be&&(be=0),a.alloc(+be)}a.isBuffer=function(ie){return ie!=null&&ie._isBuffer===!0&&ie!==a.prototype},a.compare=function(ie,le){if(Un(ie,Uint8Array)&&(ie=a.from(ie,ie.offset,ie.byteLength)),Un(le,Uint8Array)&&(le=a.from(le,le.offset,le.byteLength)),!a.isBuffer(ie)||!a.isBuffer(le))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(ie===le)return 0;let de=ie.length,se=le.length;for(let Ae=0,ve=Math.min(de,se);Ae<ve;++Ae)if(ie[Ae]!==le[Ae]){de=ie[Ae],se=le[Ae];break}return de<se?-1:se<de?1:0},a.isEncoding=function(ie){switch(String(ie).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(ie,le){if(!Array.isArray(ie))throw new TypeError('"list" argument must be an Array of Buffers');if(ie.length===0)return a.alloc(0);let de;if(le===void 0)for(le=0,de=0;de<ie.length;++de)le+=ie[de].length;const se=a.allocUnsafe(le);let Ae=0;for(de=0;de<ie.length;++de){let ve=ie[de];if(Un(ve,Uint8Array))Ae+ve.length>se.length?(a.isBuffer(ve)||(ve=a.from(ve)),ve.copy(se,Ae)):Uint8Array.prototype.set.call(se,ve,Ae);else if(a.isBuffer(ve))ve.copy(se,Ae);else throw new TypeError('"list" argument must be an Array of Buffers');Ae+=ve.length}return se};function V(be,ie){if(a.isBuffer(be))return be.length;if(ArrayBuffer.isView(be)||Un(be,ArrayBuffer))return be.byteLength;if(typeof be!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof be);const le=be.length,de=arguments.length>2&&arguments[2]===!0;if(!de&&le===0)return 0;let se=!1;for(;;)switch(ie){case"ascii":case"latin1":case"binary":return le;case"utf8":case"utf-8":return an(be).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return le*2;case"hex":return le>>>1;case"base64":return _i(be).length;default:if(se)return de?-1:an(be).length;ie=(""+ie).toLowerCase(),se=!0}}a.byteLength=V;function H(be,ie,le){let de=!1;if((ie===void 0||ie<0)&&(ie=0),ie>this.length||((le===void 0||le>this.length)&&(le=this.length),le<=0)||(le>>>=0,ie>>>=0,le<=ie))return"";for(be||(be="utf8");;)switch(be){case"hex":return gt(this,ie,le);case"utf8":case"utf-8":return Te(this,ie,le);case"ascii":return qe(this,ie,le);case"latin1":case"binary":return At(this,ie,le);case"base64":return Me(this,ie,le);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Le(this,ie,le);default:if(de)throw new TypeError("Unknown encoding: "+be);be=(be+"").toLowerCase(),de=!0}}a.prototype._isBuffer=!0;function X(be,ie,le){const de=be[ie];be[ie]=be[le],be[le]=de}a.prototype.swap16=function(){const ie=this.length;if(ie%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let le=0;le<ie;le+=2)X(this,le,le+1);return this},a.prototype.swap32=function(){const ie=this.length;if(ie%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let le=0;le<ie;le+=4)X(this,le,le+3),X(this,le+1,le+2);return this},a.prototype.swap64=function(){const ie=this.length;if(ie%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let le=0;le<ie;le+=8)X(this,le,le+7),X(this,le+1,le+6),X(this,le+2,le+5),X(this,le+3,le+4);return this},a.prototype.toString=function(){const ie=this.length;return ie===0?"":arguments.length===0?Te(this,0,ie):H.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(ie){if(!a.isBuffer(ie))throw new TypeError("Argument must be a Buffer");return this===ie?!0:a.compare(this,ie)===0},a.prototype.inspect=function(){let ie="";const le=n.INSPECT_MAX_BYTES;return ie=this.toString("hex",0,le).replace(/(.{2})/g,"$1 ").trim(),this.length>le&&(ie+=" ... "),"<Buffer "+ie+">"},i&&(a.prototype[i]=a.prototype.inspect),a.prototype.compare=function(ie,le,de,se,Ae){if(Un(ie,Uint8Array)&&(ie=a.from(ie,ie.offset,ie.byteLength)),!a.isBuffer(ie))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof ie);if(le===void 0&&(le=0),de===void 0&&(de=ie?ie.length:0),se===void 0&&(se=0),Ae===void 0&&(Ae=this.length),le<0||de>ie.length||se<0||Ae>this.length)throw new RangeError("out of range index");if(se>=Ae&&le>=de)return 0;if(se>=Ae)return-1;if(le>=de)return 1;if(le>>>=0,de>>>=0,se>>>=0,Ae>>>=0,this===ie)return 0;let ve=Ae-se,We=de-le;const tt=Math.min(ve,We),Pe=this.slice(se,Ae),Xe=ie.slice(le,de);for(let y=0;y<tt;++y)if(Pe[y]!==Xe[y]){ve=Pe[y],We=Xe[y];break}return ve<We?-1:We<ve?1:0};function Z(be,ie,le,de,se){if(be.length===0)return-1;if(typeof le=="string"?(de=le,le=0):le>2147483647?le=2147483647:le<-2147483648&&(le=-2147483648),le=+le,xn(le)&&(le=se?0:be.length-1),le<0&&(le=be.length+le),le>=be.length){if(se)return-1;le=be.length-1}else if(le<0)if(se)le=0;else return-1;if(typeof ie=="string"&&(ie=a.from(ie,de)),a.isBuffer(ie))return ie.length===0?-1:G(be,ie,le,de,se);if(typeof ie=="number")return ie=ie&255,typeof Uint8Array.prototype.indexOf=="function"?se?Uint8Array.prototype.indexOf.call(be,ie,le):Uint8Array.prototype.lastIndexOf.call(be,ie,le):G(be,[ie],le,de,se);throw new TypeError("val must be string, number or Buffer")}function G(be,ie,le,de,se){let Ae=1,ve=be.length,We=ie.length;if(de!==void 0&&(de=String(de).toLowerCase(),de==="ucs2"||de==="ucs-2"||de==="utf16le"||de==="utf-16le")){if(be.length<2||ie.length<2)return-1;Ae=2,ve/=2,We/=2,le/=2}function tt(Xe,y){return Ae===1?Xe[y]:Xe.readUInt16BE(y*Ae)}let Pe;if(se){let Xe=-1;for(Pe=le;Pe<ve;Pe++)if(tt(be,Pe)===tt(ie,Xe===-1?0:Pe-Xe)){if(Xe===-1&&(Xe=Pe),Pe-Xe+1===We)return Xe*Ae}else Xe!==-1&&(Pe-=Pe-Xe),Xe=-1}else for(le+We>ve&&(le=ve-We),Pe=le;Pe>=0;Pe--){let Xe=!0;for(let y=0;y<We;y++)if(tt(be,Pe+y)!==tt(ie,y)){Xe=!1;break}if(Xe)return Pe}return-1}a.prototype.includes=function(ie,le,de){return this.indexOf(ie,le,de)!==-1},a.prototype.indexOf=function(ie,le,de){return Z(this,ie,le,de,!0)},a.prototype.lastIndexOf=function(ie,le,de){return Z(this,ie,le,de,!1)};function oe(be,ie,le,de){le=Number(le)||0;const se=be.length-le;de?(de=Number(de),de>se&&(de=se)):de=se;const Ae=ie.length;de>Ae/2&&(de=Ae/2);let ve;for(ve=0;ve<de;++ve){const We=parseInt(ie.substr(ve*2,2),16);if(xn(We))return ve;be[le+ve]=We}return ve}function ue(be,ie,le,de){return Ln(an(ie,be.length-le),be,le,de)}function xe(be,ie,le,de){return Ln(Hn(ie),be,le,de)}function me(be,ie,le,de){return Ln(_i(ie),be,le,de)}function Ie(be,ie,le,de){return Ln(Wn(ie,be.length-le),be,le,de)}a.prototype.write=function(ie,le,de,se){if(le===void 0)se="utf8",de=this.length,le=0;else if(de===void 0&&typeof le=="string")se=le,de=this.length,le=0;else if(isFinite(le))le=le>>>0,isFinite(de)?(de=de>>>0,se===void 0&&(se="utf8")):(se=de,de=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Ae=this.length-le;if((de===void 0||de>Ae)&&(de=Ae),ie.length>0&&(de<0||le<0)||le>this.length)throw new RangeError("Attempt to write outside buffer bounds");se||(se="utf8");let ve=!1;for(;;)switch(se){case"hex":return oe(this,ie,le,de);case"utf8":case"utf-8":return ue(this,ie,le,de);case"ascii":case"latin1":case"binary":return xe(this,ie,le,de);case"base64":return me(this,ie,le,de);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ie(this,ie,le,de);default:if(ve)throw new TypeError("Unknown encoding: "+se);se=(""+se).toLowerCase(),ve=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Me(be,ie,le){return ie===0&&le===be.length?e.fromByteArray(be):e.fromByteArray(be.slice(ie,le))}function Te(be,ie,le){le=Math.min(be.length,le);const de=[];let se=ie;for(;se<le;){const Ae=be[se];let ve=null,We=Ae>239?4:Ae>223?3:Ae>191?2:1;if(se+We<=le){let tt,Pe,Xe,y;switch(We){case 1:Ae<128&&(ve=Ae);break;case 2:tt=be[se+1],(tt&192)===128&&(y=(Ae&31)<<6|tt&63,y>127&&(ve=y));break;case 3:tt=be[se+1],Pe=be[se+2],(tt&192)===128&&(Pe&192)===128&&(y=(Ae&15)<<12|(tt&63)<<6|Pe&63,y>2047&&(y<55296||y>57343)&&(ve=y));break;case 4:tt=be[se+1],Pe=be[se+2],Xe=be[se+3],(tt&192)===128&&(Pe&192)===128&&(Xe&192)===128&&(y=(Ae&15)<<18|(tt&63)<<12|(Pe&63)<<6|Xe&63,y>65535&&y<1114112&&(ve=y))}}ve===null?(ve=65533,We=1):ve>65535&&(ve-=65536,de.push(ve>>>10&1023|55296),ve=56320|ve&1023),de.push(ve),se+=We}return Ee(de)}const je=4096;function Ee(be){const ie=be.length;if(ie<=je)return String.fromCharCode.apply(String,be);let le="",de=0;for(;de<ie;)le+=String.fromCharCode.apply(String,be.slice(de,de+=je));return le}function qe(be,ie,le){let de="";le=Math.min(be.length,le);for(let se=ie;se<le;++se)de+=String.fromCharCode(be[se]&127);return de}function At(be,ie,le){let de="";le=Math.min(be.length,le);for(let se=ie;se<le;++se)de+=String.fromCharCode(be[se]);return de}function gt(be,ie,le){const de=be.length;(!ie||ie<0)&&(ie=0),(!le||le<0||le>de)&&(le=de);let se="";for(let Ae=ie;Ae<le;++Ae)se+=Zn[be[Ae]];return se}function Le(be,ie,le){const de=be.slice(ie,le);let se="";for(let Ae=0;Ae<de.length-1;Ae+=2)se+=String.fromCharCode(de[Ae]+de[Ae+1]*256);return se}a.prototype.slice=function(ie,le){const de=this.length;ie=~~ie,le=le===void 0?de:~~le,ie<0?(ie+=de,ie<0&&(ie=0)):ie>de&&(ie=de),le<0?(le+=de,le<0&&(le=0)):le>de&&(le=de),le<ie&&(le=ie);const se=this.subarray(ie,le);return Object.setPrototypeOf(se,a.prototype),se};function Re(be,ie,le){if(be%1!==0||be<0)throw new RangeError("offset is not uint");if(be+ie>le)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(ie,le,de){ie=ie>>>0,le=le>>>0,de||Re(ie,le,this.length);let se=this[ie],Ae=1,ve=0;for(;++ve<le&&(Ae*=256);)se+=this[ie+ve]*Ae;return se},a.prototype.readUintBE=a.prototype.readUIntBE=function(ie,le,de){ie=ie>>>0,le=le>>>0,de||Re(ie,le,this.length);let se=this[ie+--le],Ae=1;for(;le>0&&(Ae*=256);)se+=this[ie+--le]*Ae;return se},a.prototype.readUint8=a.prototype.readUInt8=function(ie,le){return ie=ie>>>0,le||Re(ie,1,this.length),this[ie]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(ie,le){return ie=ie>>>0,le||Re(ie,2,this.length),this[ie]|this[ie+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(ie,le){return ie=ie>>>0,le||Re(ie,2,this.length),this[ie]<<8|this[ie+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(ie,le){return ie=ie>>>0,le||Re(ie,4,this.length),(this[ie]|this[ie+1]<<8|this[ie+2]<<16)+this[ie+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(ie,le){return ie=ie>>>0,le||Re(ie,4,this.length),this[ie]*16777216+(this[ie+1]<<16|this[ie+2]<<8|this[ie+3])},a.prototype.readBigUInt64LE=Rn(function(ie){ie=ie>>>0,ft(ie,"offset");const le=this[ie],de=this[ie+7];(le===void 0||de===void 0)&&Ct(ie,this.length-8);const se=le+this[++ie]*2**8+this[++ie]*2**16+this[++ie]*2**24,Ae=this[++ie]+this[++ie]*2**8+this[++ie]*2**16+de*2**24;return BigInt(se)+(BigInt(Ae)<<BigInt(32))}),a.prototype.readBigUInt64BE=Rn(function(ie){ie=ie>>>0,ft(ie,"offset");const le=this[ie],de=this[ie+7];(le===void 0||de===void 0)&&Ct(ie,this.length-8);const se=le*2**24+this[++ie]*2**16+this[++ie]*2**8+this[++ie],Ae=this[++ie]*2**24+this[++ie]*2**16+this[++ie]*2**8+de;return(BigInt(se)<<BigInt(32))+BigInt(Ae)}),a.prototype.readIntLE=function(ie,le,de){ie=ie>>>0,le=le>>>0,de||Re(ie,le,this.length);let se=this[ie],Ae=1,ve=0;for(;++ve<le&&(Ae*=256);)se+=this[ie+ve]*Ae;return Ae*=128,se>=Ae&&(se-=Math.pow(2,8*le)),se},a.prototype.readIntBE=function(ie,le,de){ie=ie>>>0,le=le>>>0,de||Re(ie,le,this.length);let se=le,Ae=1,ve=this[ie+--se];for(;se>0&&(Ae*=256);)ve+=this[ie+--se]*Ae;return Ae*=128,ve>=Ae&&(ve-=Math.pow(2,8*le)),ve},a.prototype.readInt8=function(ie,le){return ie=ie>>>0,le||Re(ie,1,this.length),this[ie]&128?(255-this[ie]+1)*-1:this[ie]},a.prototype.readInt16LE=function(ie,le){ie=ie>>>0,le||Re(ie,2,this.length);const de=this[ie]|this[ie+1]<<8;return de&32768?de|4294901760:de},a.prototype.readInt16BE=function(ie,le){ie=ie>>>0,le||Re(ie,2,this.length);const de=this[ie+1]|this[ie]<<8;return de&32768?de|4294901760:de},a.prototype.readInt32LE=function(ie,le){return ie=ie>>>0,le||Re(ie,4,this.length),this[ie]|this[ie+1]<<8|this[ie+2]<<16|this[ie+3]<<24},a.prototype.readInt32BE=function(ie,le){return ie=ie>>>0,le||Re(ie,4,this.length),this[ie]<<24|this[ie+1]<<16|this[ie+2]<<8|this[ie+3]},a.prototype.readBigInt64LE=Rn(function(ie){ie=ie>>>0,ft(ie,"offset");const le=this[ie],de=this[ie+7];(le===void 0||de===void 0)&&Ct(ie,this.length-8);const se=this[ie+4]+this[ie+5]*2**8+this[ie+6]*2**16+(de<<24);return(BigInt(se)<<BigInt(32))+BigInt(le+this[++ie]*2**8+this[++ie]*2**16+this[++ie]*2**24)}),a.prototype.readBigInt64BE=Rn(function(ie){ie=ie>>>0,ft(ie,"offset");const le=this[ie],de=this[ie+7];(le===void 0||de===void 0)&&Ct(ie,this.length-8);const se=(le<<24)+this[++ie]*2**16+this[++ie]*2**8+this[++ie];return(BigInt(se)<<BigInt(32))+BigInt(this[++ie]*2**24+this[++ie]*2**16+this[++ie]*2**8+de)}),a.prototype.readFloatLE=function(ie,le){return ie=ie>>>0,le||Re(ie,4,this.length),t.read(this,ie,!0,23,4)},a.prototype.readFloatBE=function(ie,le){return ie=ie>>>0,le||Re(ie,4,this.length),t.read(this,ie,!1,23,4)},a.prototype.readDoubleLE=function(ie,le){return ie=ie>>>0,le||Re(ie,8,this.length),t.read(this,ie,!0,52,8)},a.prototype.readDoubleBE=function(ie,le){return ie=ie>>>0,le||Re(ie,8,this.length),t.read(this,ie,!1,52,8)};function Ge(be,ie,le,de,se,Ae){if(!a.isBuffer(be))throw new TypeError('"buffer" argument must be a Buffer instance');if(ie>se||ie<Ae)throw new RangeError('"value" argument is out of bounds');if(le+de>be.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(ie,le,de,se){if(ie=+ie,le=le>>>0,de=de>>>0,!se){const We=Math.pow(2,8*de)-1;Ge(this,ie,le,de,We,0)}let Ae=1,ve=0;for(this[le]=ie&255;++ve<de&&(Ae*=256);)this[le+ve]=ie/Ae&255;return le+de},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(ie,le,de,se){if(ie=+ie,le=le>>>0,de=de>>>0,!se){const We=Math.pow(2,8*de)-1;Ge(this,ie,le,de,We,0)}let Ae=de-1,ve=1;for(this[le+Ae]=ie&255;--Ae>=0&&(ve*=256);)this[le+Ae]=ie/ve&255;return le+de},a.prototype.writeUint8=a.prototype.writeUInt8=function(ie,le,de){return ie=+ie,le=le>>>0,de||Ge(this,ie,le,1,255,0),this[le]=ie&255,le+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(ie,le,de){return ie=+ie,le=le>>>0,de||Ge(this,ie,le,2,65535,0),this[le]=ie&255,this[le+1]=ie>>>8,le+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(ie,le,de){return ie=+ie,le=le>>>0,de||Ge(this,ie,le,2,65535,0),this[le]=ie>>>8,this[le+1]=ie&255,le+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(ie,le,de){return ie=+ie,le=le>>>0,de||Ge(this,ie,le,4,4294967295,0),this[le+3]=ie>>>24,this[le+2]=ie>>>16,this[le+1]=ie>>>8,this[le]=ie&255,le+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(ie,le,de){return ie=+ie,le=le>>>0,de||Ge(this,ie,le,4,4294967295,0),this[le]=ie>>>24,this[le+1]=ie>>>16,this[le+2]=ie>>>8,this[le+3]=ie&255,le+4};function De(be,ie,le,de,se){yt(ie,de,se,be,le,7);let Ae=Number(ie&BigInt(4294967295));be[le++]=Ae,Ae=Ae>>8,be[le++]=Ae,Ae=Ae>>8,be[le++]=Ae,Ae=Ae>>8,be[le++]=Ae;let ve=Number(ie>>BigInt(32)&BigInt(4294967295));return be[le++]=ve,ve=ve>>8,be[le++]=ve,ve=ve>>8,be[le++]=ve,ve=ve>>8,be[le++]=ve,le}function _t(be,ie,le,de,se){yt(ie,de,se,be,le,7);let Ae=Number(ie&BigInt(4294967295));be[le+7]=Ae,Ae=Ae>>8,be[le+6]=Ae,Ae=Ae>>8,be[le+5]=Ae,Ae=Ae>>8,be[le+4]=Ae;let ve=Number(ie>>BigInt(32)&BigInt(4294967295));return be[le+3]=ve,ve=ve>>8,be[le+2]=ve,ve=ve>>8,be[le+1]=ve,ve=ve>>8,be[le]=ve,le+8}a.prototype.writeBigUInt64LE=Rn(function(ie,le=0){return De(this,ie,le,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=Rn(function(ie,le=0){return _t(this,ie,le,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(ie,le,de,se){if(ie=+ie,le=le>>>0,!se){const tt=Math.pow(2,8*de-1);Ge(this,ie,le,de,tt-1,-tt)}let Ae=0,ve=1,We=0;for(this[le]=ie&255;++Ae<de&&(ve*=256);)ie<0&&We===0&&this[le+Ae-1]!==0&&(We=1),this[le+Ae]=(ie/ve>>0)-We&255;return le+de},a.prototype.writeIntBE=function(ie,le,de,se){if(ie=+ie,le=le>>>0,!se){const tt=Math.pow(2,8*de-1);Ge(this,ie,le,de,tt-1,-tt)}let Ae=de-1,ve=1,We=0;for(this[le+Ae]=ie&255;--Ae>=0&&(ve*=256);)ie<0&&We===0&&this[le+Ae+1]!==0&&(We=1),this[le+Ae]=(ie/ve>>0)-We&255;return le+de},a.prototype.writeInt8=function(ie,le,de){return ie=+ie,le=le>>>0,de||Ge(this,ie,le,1,127,-128),ie<0&&(ie=255+ie+1),this[le]=ie&255,le+1},a.prototype.writeInt16LE=function(ie,le,de){return ie=+ie,le=le>>>0,de||Ge(this,ie,le,2,32767,-32768),this[le]=ie&255,this[le+1]=ie>>>8,le+2},a.prototype.writeInt16BE=function(ie,le,de){return ie=+ie,le=le>>>0,de||Ge(this,ie,le,2,32767,-32768),this[le]=ie>>>8,this[le+1]=ie&255,le+2},a.prototype.writeInt32LE=function(ie,le,de){return ie=+ie,le=le>>>0,de||Ge(this,ie,le,4,2147483647,-2147483648),this[le]=ie&255,this[le+1]=ie>>>8,this[le+2]=ie>>>16,this[le+3]=ie>>>24,le+4},a.prototype.writeInt32BE=function(ie,le,de){return ie=+ie,le=le>>>0,de||Ge(this,ie,le,4,2147483647,-2147483648),ie<0&&(ie=4294967295+ie+1),this[le]=ie>>>24,this[le+1]=ie>>>16,this[le+2]=ie>>>8,this[le+3]=ie&255,le+4},a.prototype.writeBigInt64LE=Rn(function(ie,le=0){return De(this,ie,le,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=Rn(function(ie,le=0){return _t(this,ie,le,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function at(be,ie,le,de,se,Ae){if(le+de>be.length)throw new RangeError("Index out of range");if(le<0)throw new RangeError("Index out of range")}function Tt(be,ie,le,de,se){return ie=+ie,le=le>>>0,se||at(be,ie,le,4),t.write(be,ie,le,de,23,4),le+4}a.prototype.writeFloatLE=function(ie,le,de){return Tt(this,ie,le,!0,de)},a.prototype.writeFloatBE=function(ie,le,de){return Tt(this,ie,le,!1,de)};function Kt(be,ie,le,de,se){return ie=+ie,le=le>>>0,se||at(be,ie,le,8),t.write(be,ie,le,de,52,8),le+8}a.prototype.writeDoubleLE=function(ie,le,de){return Kt(this,ie,le,!0,de)},a.prototype.writeDoubleBE=function(ie,le,de){return Kt(this,ie,le,!1,de)},a.prototype.copy=function(ie,le,de,se){if(!a.isBuffer(ie))throw new TypeError("argument should be a Buffer");if(de||(de=0),!se&&se!==0&&(se=this.length),le>=ie.length&&(le=ie.length),le||(le=0),se>0&&se<de&&(se=de),se===de||ie.length===0||this.length===0)return 0;if(le<0)throw new RangeError("targetStart out of bounds");if(de<0||de>=this.length)throw new RangeError("Index out of range");if(se<0)throw new RangeError("sourceEnd out of bounds");se>this.length&&(se=this.length),ie.length-le<se-de&&(se=ie.length-le+de);const Ae=se-de;return this===ie&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(le,de,se):Uint8Array.prototype.set.call(ie,this.subarray(de,se),le),Ae},a.prototype.fill=function(ie,le,de,se){if(typeof ie=="string"){if(typeof le=="string"?(se=le,le=0,de=this.length):typeof de=="string"&&(se=de,de=this.length),se!==void 0&&typeof se!="string")throw new TypeError("encoding must be a string");if(typeof se=="string"&&!a.isEncoding(se))throw new TypeError("Unknown encoding: "+se);if(ie.length===1){const ve=ie.charCodeAt(0);(se==="utf8"&&ve<128||se==="latin1")&&(ie=ve)}}else typeof ie=="number"?ie=ie&255:typeof ie=="boolean"&&(ie=Number(ie));if(le<0||this.length<le||this.length<de)throw new RangeError("Out of range index");if(de<=le)return this;le=le>>>0,de=de===void 0?this.length:de>>>0,ie||(ie=0);let Ae;if(typeof ie=="number")for(Ae=le;Ae<de;++Ae)this[Ae]=ie;else{const ve=a.isBuffer(ie)?ie:a.from(ie,se),We=ve.length;if(We===0)throw new TypeError('The value "'+ie+'" is invalid for argument "value"');for(Ae=0;Ae<de-le;++Ae)this[Ae+le]=ve[Ae%We]}return this};const Ke={};function Oe(be,ie,le){Ke[be]=class extends le{constructor(){super(),Object.defineProperty(this,"message",{value:ie.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${be}]`,this.stack,delete this.name}get code(){return be}set code(se){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:se,writable:!0})}toString(){return`${this.name} [${be}]: ${this.message}`}}}Oe("ERR_BUFFER_OUT_OF_BOUNDS",function(be){return be?`${be} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Oe("ERR_INVALID_ARG_TYPE",function(be,ie){return`The "${be}" argument must be of type number. Received type ${typeof ie}`},TypeError),Oe("ERR_OUT_OF_RANGE",function(be,ie,le){let de=`The value of "${be}" is out of range.`,se=le;return Number.isInteger(le)&&Math.abs(le)>2**32?se=Be(String(le)):typeof le=="bigint"&&(se=String(le),(le>BigInt(2)**BigInt(32)||le<-(BigInt(2)**BigInt(32)))&&(se=Be(se)),se+="n"),de+=` It must be ${ie}. Received ${se}`,de},RangeError);function Be(be){let ie="",le=be.length;const de=be[0]==="-"?1:0;for(;le>=de+4;le-=3)ie=`_${be.slice(le-3,le)}${ie}`;return`${be.slice(0,le)}${ie}`}function Ve(be,ie,le){ft(ie,"offset"),(be[ie]===void 0||be[ie+le]===void 0)&&Ct(ie,be.length-(le+1))}function yt(be,ie,le,de,se,Ae){if(be>le||be<ie){const ve=typeof ie=="bigint"?"n":"";let We;throw ie===0||ie===BigInt(0)?We=`>= 0${ve} and < 2${ve} ** ${(Ae+1)*8}${ve}`:We=`>= -(2${ve} ** ${(Ae+1)*8-1}${ve}) and < 2 ** ${(Ae+1)*8-1}${ve}`,new Ke.ERR_OUT_OF_RANGE("value",We,be)}Ve(de,se,Ae)}function ft(be,ie){if(typeof be!="number")throw new Ke.ERR_INVALID_ARG_TYPE(ie,"number",be)}function Ct(be,ie,le){throw Math.floor(be)!==be?(ft(be,le),new Ke.ERR_OUT_OF_RANGE("offset","an integer",be)):ie<0?new Ke.ERR_BUFFER_OUT_OF_BOUNDS:new Ke.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${ie}`,be)}const Lt=/[^+/0-9A-Za-z-_]/g;function kt(be){if(be=be.split("=")[0],be=be.trim().replace(Lt,""),be.length<2)return"";for(;be.length%4!==0;)be=be+"=";return be}function an(be,ie){ie=ie||1/0;let le;const de=be.length;let se=null;const Ae=[];for(let ve=0;ve<de;++ve){if(le=be.charCodeAt(ve),le>55295&&le<57344){if(!se){if(le>56319){(ie-=3)>-1&&Ae.push(239,191,189);continue}else if(ve+1===de){(ie-=3)>-1&&Ae.push(239,191,189);continue}se=le;continue}if(le<56320){(ie-=3)>-1&&Ae.push(239,191,189),se=le;continue}le=(se-55296<<10|le-56320)+65536}else se&&(ie-=3)>-1&&Ae.push(239,191,189);if(se=null,le<128){if((ie-=1)<0)break;Ae.push(le)}else if(le<2048){if((ie-=2)<0)break;Ae.push(le>>6|192,le&63|128)}else if(le<65536){if((ie-=3)<0)break;Ae.push(le>>12|224,le>>6&63|128,le&63|128)}else if(le<1114112){if((ie-=4)<0)break;Ae.push(le>>18|240,le>>12&63|128,le>>6&63|128,le&63|128)}else throw new Error("Invalid code point")}return Ae}function Hn(be){const ie=[];for(let le=0;le<be.length;++le)ie.push(be.charCodeAt(le)&255);return ie}function Wn(be,ie){let le,de,se;const Ae=[];for(let ve=0;ve<be.length&&!((ie-=2)<0);++ve)le=be.charCodeAt(ve),de=le>>8,se=le%256,Ae.push(se),Ae.push(de);return Ae}function _i(be){return e.toByteArray(kt(be))}function Ln(be,ie,le,de){let se;for(se=0;se<de&&!(se+le>=ie.length||se>=be.length);++se)ie[se+le]=be[se];return se}function Un(be,ie){return be instanceof ie||be!=null&&be.constructor!=null&&be.constructor.name!=null&&be.constructor.name===ie.name}function xn(be){return be!==be}const Zn=(function(){const be="0123456789abcdef",ie=new Array(256);for(let le=0;le<16;++le){const de=le*16;for(let se=0;se<16;++se)ie[de+se]=be[le]+be[se]}return ie})();function Rn(be){return typeof BigInt>"u"?Ot:be}function Ot(){throw new Error("BigInt not supported")}})(dB)),dB}var Bae=Eae();const Oae=Ou(Bae);var fB,BL;function Iae(){if(BL)return fB;BL=1;var n="Expected a function",e="__lodash_hash_undefined__",t="[object Function]",i="[object GeneratorFunction]",r="[object Symbol]",o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/,a=/^\./,c=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,h=/[\\^$.*+?()[\]{}|]/g,m=/\\(\\)?/g,v=/^\[object .+?Constructor\]$/,x=typeof window=="object"&&window&&window.Object===Object&&window,E=typeof self=="object"&&self&&self.Object===Object&&self,D=x||E||Function("return this")();function P(Pe,Xe){return Pe?.[Xe]}function F(Pe){var Xe=!1;if(Pe!=null&&typeof Pe.toString!="function")try{Xe=!!(Pe+"")}catch{}return Xe}var W=Array.prototype,q=Function.prototype,V=Object.prototype,H=D["__core-js_shared__"],X=(function(){var Pe=/[^.]+$/.exec(H&&H.keys&&H.keys.IE_PROTO||"");return Pe?"Symbol(src)_1."+Pe:""})(),Z=q.toString,G=V.hasOwnProperty,oe=V.toString,ue=RegExp("^"+Z.call(G).replace(h,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),xe=D.Symbol,me=W.splice,Ie=_i(D,"Map"),Me=_i(Object,"create"),Te=xe?xe.prototype:void 0,je=Te?Te.toString:void 0;function Ee(Pe){var Xe=-1,y=Pe?Pe.length:0;for(this.clear();++Xe<y;){var ot=Pe[Xe];this.set(ot[0],ot[1])}}function qe(){this.__data__=Me?Me(null):{}}function At(Pe){return this.has(Pe)&&delete this.__data__[Pe]}function gt(Pe){var Xe=this.__data__;if(Me){var y=Xe[Pe];return y===e?void 0:y}return G.call(Xe,Pe)?Xe[Pe]:void 0}function Le(Pe){var Xe=this.__data__;return Me?Xe[Pe]!==void 0:G.call(Xe,Pe)}function Re(Pe,Xe){var y=this.__data__;return y[Pe]=Me&&Xe===void 0?e:Xe,this}Ee.prototype.clear=qe,Ee.prototype.delete=At,Ee.prototype.get=gt,Ee.prototype.has=Le,Ee.prototype.set=Re;function Ge(Pe){var Xe=-1,y=Pe?Pe.length:0;for(this.clear();++Xe<y;){var ot=Pe[Xe];this.set(ot[0],ot[1])}}function De(){this.__data__=[]}function _t(Pe){var Xe=this.__data__,y=Ct(Xe,Pe);if(y<0)return!1;var ot=Xe.length-1;return y==ot?Xe.pop():me.call(Xe,y,1),!0}function at(Pe){var Xe=this.__data__,y=Ct(Xe,Pe);return y<0?void 0:Xe[y][1]}function Tt(Pe){return Ct(this.__data__,Pe)>-1}function Kt(Pe,Xe){var y=this.__data__,ot=Ct(y,Pe);return ot<0?y.push([Pe,Xe]):y[ot][1]=Xe,this}Ge.prototype.clear=De,Ge.prototype.delete=_t,Ge.prototype.get=at,Ge.prototype.has=Tt,Ge.prototype.set=Kt;function Ke(Pe){var Xe=-1,y=Pe?Pe.length:0;for(this.clear();++Xe<y;){var ot=Pe[Xe];this.set(ot[0],ot[1])}}function Oe(){this.__data__={hash:new Ee,map:new(Ie||Ge),string:new Ee}}function Be(Pe){return Wn(this,Pe).delete(Pe)}function Ve(Pe){return Wn(this,Pe).get(Pe)}function yt(Pe){return Wn(this,Pe).has(Pe)}function ft(Pe,Xe){return Wn(this,Pe).set(Pe,Xe),this}Ke.prototype.clear=Oe,Ke.prototype.delete=Be,Ke.prototype.get=Ve,Ke.prototype.has=yt,Ke.prototype.set=ft;function Ct(Pe,Xe){for(var y=Pe.length;y--;)if(ie(Pe[y][0],Xe))return y;return-1}function Lt(Pe,Xe){Xe=Ln(Xe,Pe)?[Xe]:Hn(Xe);for(var y=0,ot=Xe.length;Pe!=null&&y<ot;)Pe=Pe[Rn(Xe[y++])];return y&&y==ot?Pe:void 0}function kt(Pe){if(!se(Pe)||xn(Pe))return!1;var Xe=de(Pe)||F(Pe)?ue:v;return Xe.test(Ot(Pe))}function an(Pe){if(typeof Pe=="string")return Pe;if(ve(Pe))return je?je.call(Pe):"";var Xe=Pe+"";return Xe=="0"&&1/Pe==-1/0?"-0":Xe}function Hn(Pe){return le(Pe)?Pe:Zn(Pe)}function Wn(Pe,Xe){var y=Pe.__data__;return Un(Xe)?y[typeof Xe=="string"?"string":"hash"]:y.map}function _i(Pe,Xe){var y=P(Pe,Xe);return kt(y)?y:void 0}function Ln(Pe,Xe){if(le(Pe))return!1;var y=typeof Pe;return y=="number"||y=="symbol"||y=="boolean"||Pe==null||ve(Pe)?!0:s.test(Pe)||!o.test(Pe)||Xe!=null&&Pe in Object(Xe)}function Un(Pe){var Xe=typeof Pe;return Xe=="string"||Xe=="number"||Xe=="symbol"||Xe=="boolean"?Pe!=="__proto__":Pe===null}function xn(Pe){return!!X&&X in Pe}var Zn=be(function(Pe){Pe=We(Pe);var Xe=[];return a.test(Pe)&&Xe.push(""),Pe.replace(c,function(y,ot,Dt,xt){Xe.push(Dt?xt.replace(m,"$1"):ot||y)}),Xe});function Rn(Pe){if(typeof Pe=="string"||ve(Pe))return Pe;var Xe=Pe+"";return Xe=="0"&&1/Pe==-1/0?"-0":Xe}function Ot(Pe){if(Pe!=null){try{return Z.call(Pe)}catch{}try{return Pe+""}catch{}}return""}function be(Pe,Xe){if(typeof Pe!="function"||Xe&&typeof Xe!="function")throw new TypeError(n);var y=function(){var ot=arguments,Dt=Xe?Xe.apply(this,ot):ot[0],xt=y.cache;if(xt.has(Dt))return xt.get(Dt);var tn=Pe.apply(this,ot);return y.cache=xt.set(Dt,tn),tn};return y.cache=new(be.Cache||Ke),y}be.Cache=Ke;function ie(Pe,Xe){return Pe===Xe||Pe!==Pe&&Xe!==Xe}var le=Array.isArray;function de(Pe){var Xe=se(Pe)?oe.call(Pe):"";return Xe==t||Xe==i}function se(Pe){var Xe=typeof Pe;return!!Pe&&(Xe=="object"||Xe=="function")}function Ae(Pe){return!!Pe&&typeof Pe=="object"}function ve(Pe){return typeof Pe=="symbol"||Ae(Pe)&&oe.call(Pe)==r}function We(Pe){return Pe==null?"":an(Pe)}function tt(Pe,Xe,y){var ot=Pe==null?void 0:Lt(Pe,Xe);return ot===void 0?y:ot}return fB=tt,fB}var kae=Iae();const Tae=Ou(kae);var R2={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var Rae=R2.exports,OL;function Dae(){return OL||(OL=1,(function(n,e){(function(){var t,i="4.17.21",r=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",s="Expected a function",a="Invalid `variable` option passed into `_.template`",c="__lodash_hash_undefined__",h=500,m="__lodash_placeholder__",v=1,x=2,E=4,D=1,P=2,F=1,W=2,q=4,V=8,H=16,X=32,Z=64,G=128,oe=256,ue=512,xe=30,me="...",Ie=800,Me=16,Te=1,je=2,Ee=3,qe=1/0,At=9007199254740991,gt=17976931348623157e292,Le=NaN,Re=4294967295,Ge=Re-1,De=Re>>>1,_t=[["ary",G],["bind",F],["bindKey",W],["curry",V],["curryRight",H],["flip",ue],["partial",X],["partialRight",Z],["rearg",oe]],at="[object Arguments]",Tt="[object Array]",Kt="[object AsyncFunction]",Ke="[object Boolean]",Oe="[object Date]",Be="[object DOMException]",Ve="[object Error]",yt="[object Function]",ft="[object GeneratorFunction]",Ct="[object Map]",Lt="[object Number]",kt="[object Null]",an="[object Object]",Hn="[object Promise]",Wn="[object Proxy]",_i="[object RegExp]",Ln="[object Set]",Un="[object String]",xn="[object Symbol]",Zn="[object Undefined]",Rn="[object WeakMap]",Ot="[object WeakSet]",be="[object ArrayBuffer]",ie="[object DataView]",le="[object Float32Array]",de="[object Float64Array]",se="[object Int8Array]",Ae="[object Int16Array]",ve="[object Int32Array]",We="[object Uint8Array]",tt="[object Uint8ClampedArray]",Pe="[object Uint16Array]",Xe="[object Uint32Array]",y=/\b__p \+= '';/g,ot=/\b(__p \+=) '' \+/g,Dt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,xt=/&(?:amp|lt|gt|quot|#39);/g,tn=/[&<>"']/g,dt=RegExp(xt.source),Xn=RegExp(tn.source),yi=/<%-([\s\S]+?)%>/g,Dn=/<%([\s\S]+?)%>/g,Fn=/<%=([\s\S]+?)%>/g,vi=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Zi=/^\w*$/,Ki=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ji=/[\\^$.*+?()[\]{}|]/g,ki=RegExp(Ji.source),Ri=/^\s+/,pr=/\s/,rn=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Li=/\{\n\/\* \[wrapped with (.+)\] \*/,$o=/,? & /,Ws=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ur=/[()=,{}\[\]\/\s]/,pn=/\\(\\)?/g,zi=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,oi=/\w*$/,wl=/^[-+]0x[0-9a-f]+$/i,nA=/^0b[01]+$/i,nu=/^\[object .+?Constructor\]$/,qi=/^0o[0-7]+$/i,tc=/^(?:0|[1-9]\d*)$/,no=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ls=/($^)/,rl=/['\n\r\u2028\u2029\\]/g,Ya="\\ud800-\\udfff",Io="\\u0300-\\u036f",iA="\\ufe20-\\ufe2f",Uo="\\u20d0-\\u20ff",Lr=Io+iA+Uo,fa="\\u2700-\\u27bf",Ho="a-z\\xdf-\\xf6\\xf8-\\xff",Ko="\\xac\\xb1\\xd7\\xf7",Iu="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",iu="\\u2000-\\u206f",ru=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",nc="A-Z\\xc0-\\xd6\\xd8-\\xde",Sl="\\ufe0e\\ufe0f",ko=Ko+Iu+iu+ru,ku="[']",ou="["+Ya+"]",ic="["+ko+"]",rc="["+Lr+"]",kc="\\d+",Lh="["+fa+"]",pa="["+Ho+"]",Tc="[^"+Ya+ko+kc+fa+Ho+nc+"]",Tu="\\ud83c[\\udffb-\\udfff]",rA="(?:"+rc+"|"+Tu+")",Ll="[^"+Ya+"]",qa="(?:\\ud83c[\\udde6-\\uddff]){2}",Ss="[\\ud800-\\udbff][\\udc00-\\udfff]",Mo="["+nc+"]",Va="\\u200d",Ru="(?:"+pa+"|"+Tc+")",Qs="(?:"+Mo+"|"+Tc+")",_A="(?:"+ku+"(?:d|ll|m|re|s|t|ve))?",Fl="(?:"+ku+"(?:D|LL|M|RE|S|T|VE))?",Du=rA+"?",Fi="["+Sl+"]?",Vi="(?:"+Va+"(?:"+[Ll,qa,Ss].join("|")+")"+Fi+Du+")*",Co="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ia="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",is=Fi+Du+Vi,go="(?:"+[Lh,qa,Ss].join("|")+")"+is,ms="(?:"+[Ll+rc+"?",rc,qa,Ss,ou].join("|")+")",uo=RegExp(ku,"g"),yo=RegExp(rc,"g"),zl=RegExp(Tu+"(?="+Tu+")|"+ms+is,"g"),vo=RegExp([Mo+"?"+pa+"+"+_A+"(?="+[ic,Mo,"$"].join("|")+")",Qs+"+"+Fl+"(?="+[ic,Mo+Ru,"$"].join("|")+")",Mo+"?"+Ru+"+"+_A,Mo+"+"+Fl,Ia,Co,kc,go].join("|"),"g"),Es=RegExp("["+Va+Ya+Lr+Sl+"]"),co=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ka=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ta=-1,Ni={};Ni[le]=Ni[de]=Ni[se]=Ni[Ae]=Ni[ve]=Ni[We]=Ni[tt]=Ni[Pe]=Ni[Xe]=!0,Ni[at]=Ni[Tt]=Ni[be]=Ni[Ke]=Ni[ie]=Ni[Oe]=Ni[Ve]=Ni[yt]=Ni[Ct]=Ni[Lt]=Ni[an]=Ni[_i]=Ni[Ln]=Ni[Un]=Ni[Rn]=!1;var Fr={};Fr[at]=Fr[Tt]=Fr[be]=Fr[ie]=Fr[Ke]=Fr[Oe]=Fr[le]=Fr[de]=Fr[se]=Fr[Ae]=Fr[ve]=Fr[Ct]=Fr[Lt]=Fr[an]=Fr[_i]=Fr[Ln]=Fr[Un]=Fr[xn]=Fr[We]=Fr[tt]=Fr[Pe]=Fr[Xe]=!0,Fr[Ve]=Fr[yt]=Fr[Rn]=!1;var J={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},ye={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Ne={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},St={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},fn=parseFloat,nn=parseInt,xi=typeof window=="object"&&window&&window.Object===Object&&window,Gn=typeof self=="object"&&self&&self.Object===Object&&self,Ei=xi||Gn||Function("return this")(),li=e&&!e.nodeType&&e,Ar=li&&!0&&n&&!n.nodeType&&n,Gr=Ar&&Ar.exports===li,mr=Gr&&xi.process,hr=(function(){try{var Rt=Ar&&Ar.require&&Ar.require("util").types;return Rt||mr&&mr.binding&&mr.binding("util")}catch{}})(),Hr=hr&&hr.isArrayBuffer,Ys=hr&&hr.isDate,Zo=hr&&hr.isMap,qs=hr&&hr.isRegExp,su=hr&&hr.isSet,Lo=hr&&hr.isTypedArray;function rs(Rt,ln,Pt){switch(Pt.length){case 0:return Rt.call(ln);case 1:return Rt.call(ln,Pt[0]);case 2:return Rt.call(ln,Pt[0],Pt[1]);case 3:return Rt.call(ln,Pt[0],Pt[1],Pt[2])}return Rt.apply(ln,Pt)}function S1(Rt,ln,Pt,Ai){for(var gr=-1,Wr=Rt==null?0:Rt.length;++gr<Wr;){var Os=Rt[gr];ln(Ai,Os,Pt(Os),Rt)}return Ai}function jl(Rt,ln){for(var Pt=-1,Ai=Rt==null?0:Rt.length;++Pt<Ai&&ln(Rt[Pt],Pt,Rt)!==!1;);return Rt}function wo(Rt,ln){for(var Pt=Rt==null?0:Rt.length;Pt--&&ln(Rt[Pt],Pt,Rt)!==!1;);return Rt}function Ap(Rt,ln){for(var Pt=-1,Ai=Rt==null?0:Rt.length;++Pt<Ai;)if(!ln(Rt[Pt],Pt,Rt))return!1;return!0}function $a(Rt,ln){for(var Pt=-1,Ai=Rt==null?0:Rt.length,gr=0,Wr=[];++Pt<Ai;){var Os=Rt[Pt];ln(Os,Pt,Rt)&&(Wr[gr++]=Os)}return Wr}function Fh(Rt,ln){var Pt=Rt==null?0:Rt.length;return!!Pt&&ah(Rt,ln,0)>-1}function Cf(Rt,ln,Pt){for(var Ai=-1,gr=Rt==null?0:Rt.length;++Ai<gr;)if(Pt(ln,Rt[Ai]))return!0;return!1}function To(Rt,ln){for(var Pt=-1,Ai=Rt==null?0:Rt.length,gr=Array(Ai);++Pt<Ai;)gr[Pt]=ln(Rt[Pt],Pt,Rt);return gr}function Nl(Rt,ln){for(var Pt=-1,Ai=ln.length,gr=Rt.length;++Pt<Ai;)Rt[gr+Pt]=ln[Pt];return Rt}function hp(Rt,ln,Pt,Ai){var gr=-1,Wr=Rt==null?0:Rt.length;for(Ai&&Wr&&(Pt=Rt[++gr]);++gr<Wr;)Pt=ln(Pt,Rt[gr],gr,Rt);return Pt}function E1(Rt,ln,Pt,Ai){var gr=Rt==null?0:Rt.length;for(Ai&&gr&&(Pt=Rt[--gr]);gr--;)Pt=ln(Pt,Rt[gr],gr,Rt);return Pt}function Dm(Rt,ln){for(var Pt=-1,Ai=Rt==null?0:Rt.length;++Pt<Ai;)if(ln(Rt[Pt],Pt,Rt))return!0;return!1}var Pm=Bd("length");function Um(Rt){return Rt.split("")}function oA(Rt){return Rt.match(Ws)||[]}function _f(Rt,ln,Pt){var Ai;return Pt(Rt,function(gr,Wr,Os){if(ln(gr,Wr,Os))return Ai=Wr,!1}),Ai}function sh(Rt,ln,Pt,Ai){for(var gr=Rt.length,Wr=Pt+(Ai?1:-1);Ai?Wr--:++Wr<gr;)if(ln(Rt[Wr],Wr,Rt))return Wr;return-1}function ah(Rt,ln,Pt){return ln===ln?g0(Rt,ln,Pt):sh(Rt,Km,Pt)}function dp(Rt,ln,Pt,Ai){for(var gr=Pt-1,Wr=Rt.length;++gr<Wr;)if(Ai(Rt[gr],ln))return gr;return-1}function Km(Rt){return Rt!==Rt}function oc(Rt,ln){var Pt=Rt==null?0:Rt.length;return Pt?pp(Rt,ln)/Pt:Le}function Bd(Rt){return function(ln){return ln==null?t:ln[Rt]}}function fp(Rt){return function(ln){return Rt==null?t:Rt[ln]}}function xA(Rt,ln,Pt,Ai,gr){return gr(Rt,function(Wr,Os,Fo){Pt=Ai?(Ai=!1,Wr):ln(Pt,Wr,Os,Fo)}),Pt}function xf(Rt,ln){var Pt=Rt.length;for(Rt.sort(ln);Pt--;)Rt[Pt]=Rt[Pt].value;return Rt}function pp(Rt,ln){for(var Pt,Ai=-1,gr=Rt.length;++Ai<gr;){var Wr=ln(Rt[Ai]);Wr!==t&&(Pt=Pt===t?Wr:Pt+Wr)}return Pt}function zh(Rt,ln){for(var Pt=-1,Ai=Array(Rt);++Pt<Rt;)Ai[Pt]=ln(Pt);return Ai}function B1(Rt,ln){return To(ln,function(Pt){return[Pt,Rt[Pt]]})}function sc(Rt){return Rt&&Rt.slice(0,wA(Rt)+1).replace(Ri,"")}function ac(Rt){return function(ln){return Rt(ln)}}function Lm(Rt,ln){return To(ln,function(Pt){return Rt[Pt]})}function mp(Rt,ln){return Rt.has(ln)}function Fm(Rt,ln){for(var Pt=-1,Ai=Rt.length;++Pt<Ai&&ah(ln,Rt[Pt],0)>-1;);return Pt}function gp(Rt,ln){for(var Pt=Rt.length;Pt--&&ah(ln,Rt[Pt],0)>-1;);return Pt}function Od(Rt,ln){for(var Pt=Rt.length,Ai=0;Pt--;)Rt[Pt]===ln&&++Ai;return Ai}var Id=fp(J),m0=fp(ye);function yp(Rt){return"\\"+St[Rt]}function jh(Rt,ln){return Rt==null?t:Rt[ln]}function Nh(Rt){return Es.test(Rt)}function zm(Rt){return co.test(Rt)}function MA(Rt){for(var ln,Pt=[];!(ln=Rt.next()).done;)Pt.push(ln.value);return Pt}function jm(Rt){var ln=-1,Pt=Array(Rt.size);return Rt.forEach(function(Ai,gr){Pt[++ln]=[gr,Ai]}),Pt}function Mf(Rt,ln){return function(Pt){return Rt(ln(Pt))}}function lh(Rt,ln){for(var Pt=-1,Ai=Rt.length,gr=0,Wr=[];++Pt<Ai;){var Os=Rt[Pt];(Os===ln||Os===m)&&(Rt[Pt]=m,Wr[gr++]=Pt)}return Wr}function Nm(Rt){var ln=-1,Pt=Array(Rt.size);return Rt.forEach(function(Ai){Pt[++ln]=Ai}),Pt}function Gm(Rt){var ln=-1,Pt=Array(Rt.size);return Rt.forEach(function(Ai){Pt[++ln]=[Ai,Ai]}),Pt}function g0(Rt,ln,Pt){for(var Ai=Pt-1,gr=Rt.length;++Ai<gr;)if(Rt[Ai]===ln)return Ai;return-1}function O1(Rt,ln,Pt){for(var Ai=Pt+1;Ai--;)if(Rt[Ai]===ln)return Ai;return Ai}function Gh(Rt){return Nh(Rt)?Wm(Rt):Pm(Rt)}function Bs(Rt){return Nh(Rt)?Qm(Rt):Um(Rt)}function wA(Rt){for(var ln=Rt.length;ln--&&pr.test(Rt.charAt(ln)););return ln}var SA=fp(Ne);function Wm(Rt){for(var ln=zl.lastIndex=0;zl.test(Rt);)++ln;return ln}function Qm(Rt){return Rt.match(zl)||[]}function vp(Rt){return Rt.match(vo)||[]}var Ym=(function Rt(ln){ln=ln==null?Ei:Wh.defaults(Ei.Object(),ln,Wh.pick(Ei,ka));var Pt=ln.Array,Ai=ln.Date,gr=ln.Error,Wr=ln.Function,Os=ln.Math,Fo=ln.Object,bp=ln.RegExp,EA=ln.String,Gl=ln.TypeError,Qh=Pt.prototype,qm=Wr.prototype,Rc=Fo.prototype,Yh=ln["__core-js_shared__"],uh=qm.toString,Br=Rc.hasOwnProperty,y0=0,Cp=(function(){var w=/[^.]+$/.exec(Yh&&Yh.keys&&Yh.keys.IE_PROTO||"");return w?"Symbol(src)_1."+w:""})(),Wl=Rc.toString,BA=uh.call(Fo),au=Ei._,ch=bp("^"+uh.call(Br).replace(Ji,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),OA=Gr?ln.Buffer:t,Pu=ln.Symbol,qh=ln.Uint8Array,Ah=OA?OA.allocUnsafe:t,lu=Mf(Fo.getPrototypeOf,Fo),Vm=Fo.create,kd=Rc.propertyIsEnumerable,sr=Qh.splice,_p=Pu?Pu.isConcatSpreadable:t,El=Pu?Pu.iterator:t,IA=Pu?Pu.toStringTag:t,ol=(function(){try{var w=hA(Fo,"defineProperty");return w({},"",{}),w}catch{}})(),I1=ln.clearTimeout!==Ei.clearTimeout&&ln.clearTimeout,$m=Ai&&Ai.now!==Ei.Date.now&&Ai.now,Vh=ln.setTimeout!==Ei.setTimeout&&ln.setTimeout,Td=Os.ceil,Rd=Os.floor,$h=Fo.getOwnPropertySymbols,Hh=OA?OA.isBuffer:t,Bl=ln.isFinite,Zh=Qh.join,Dd=Mf(Fo.keys,Fo),Is=Os.max,Vs=Os.min,uu=Ai.now,sl=ln.parseInt,Dc=Os.random,kA=Qh.reverse,Ql=hA(ln,"DataView"),Uu=hA(ln,"Map"),wf=hA(ln,"Promise"),Pc=hA(ln,"Set"),hh=hA(ln,"WeakMap"),Pd=hA(Fo,"create"),ma=hh&&new hh,bo={},zr=dl(Ql),dh=dl(Uu),cu=dl(wf),gs=dl(Pc),Yl=dl(hh),al=Pu?Pu.prototype:t,sA=al?al.valueOf:t,TA=al?al.toString:t;function Qe(w){if(na(w)&&!vr(w)&&!(w instanceof br)){if(w instanceof ll)return w;if(Br.call(w,"__wrapped__"))return W1(w)}return new ll(w)}var lc=(function(){function w(){}return function(T){if(!ta(T))return{};if(Vm)return Vm(T);w.prototype=T;var Q=new w;return w.prototype=t,Q}})();function RA(){}function ll(w,T){this.__wrapped__=w,this.__actions__=[],this.__chain__=!!T,this.__index__=0,this.__values__=t}Qe.templateSettings={escape:yi,evaluate:Dn,interpolate:Fn,variable:"",imports:{_:Qe}},Qe.prototype=RA.prototype,Qe.prototype.constructor=Qe,ll.prototype=lc(RA.prototype),ll.prototype.constructor=ll;function br(w){this.__wrapped__=w,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Re,this.__views__=[]}function aA(){var w=new br(this.__wrapped__);return w.__actions__=oo(this.__actions__),w.__dir__=this.__dir__,w.__filtered__=this.__filtered__,w.__iteratees__=oo(this.__iteratees__),w.__takeCount__=this.__takeCount__,w.__views__=oo(this.__views__),w}function DA(){if(this.__filtered__){var w=new br(this);w.__dir__=-1,w.__filtered__=!0}else w=this.clone(),w.__dir__*=-1;return w}function uc(){var w=this.__wrapped__.value(),T=this.__dir__,Q=vr(w),he=T<0,Ue=Q?w.length:0,Je=Xx(0,Ue,this.__views__),mt=Je.start,Bt=Je.end,zt=Bt-mt,Mn=he?Bt:mt-1,wn=this.__iteratees__,Pn=wn.length,hi=0,Hi=Vs(zt,this.__takeCount__);if(!Q||!he&&Ue==zt&&Hi==zt)return wt(w,this.__actions__);var Cr=[];e:for(;zt--&&hi<Hi;){Mn+=T;for(var ho=-1,_r=w[Mn];++ho<Pn;){var Bo=wn[ho],Wo=Bo.iteratee,Jd=Bo.type,Bh=Wo(_r);if(Jd==je)_r=Bh;else if(!Bh){if(Jd==Te)continue e;break e}}Cr[hi++]=_r}return Cr}br.prototype=lc(RA.prototype),br.prototype.constructor=br;function PA(w){var T=-1,Q=w==null?0:w.length;for(this.clear();++T<Q;){var he=w[T];this.set(he[0],he[1])}}function xp(){this.__data__=Pd?Pd(null):{},this.size=0}function cc(w){var T=this.has(w)&&delete this.__data__[w];return this.size-=T?1:0,T}function Mp(w){var T=this.__data__;if(Pd){var Q=T[w];return Q===c?t:Q}return Br.call(T,w)?T[w]:t}function fh(w){var T=this.__data__;return Pd?T[w]!==t:Br.call(T,w)}function Ha(w,T){var Q=this.__data__;return this.size+=this.has(w)?0:1,Q[w]=Pd&&T===t?c:T,this}PA.prototype.clear=xp,PA.prototype.delete=cc,PA.prototype.get=Mp,PA.prototype.has=fh,PA.prototype.set=Ha;function Ol(w){var T=-1,Q=w==null?0:w.length;for(this.clear();++T<Q;){var he=w[T];this.set(he[0],he[1])}}function v0(){this.__data__=[],this.size=0}function k1(w){var T=this.__data__,Q=er(T,w);if(Q<0)return!1;var he=T.length-1;return Q==he?T.pop():sr.call(T,Q,1),--this.size,!0}function T1(w){var T=this.__data__,Q=er(T,w);return Q<0?t:T[Q][1]}function R1(w){return er(this.__data__,w)>-1}function $s(w,T){var Q=this.__data__,he=er(Q,w);return he<0?(++this.size,Q.push([w,T])):Q[he][1]=T,this}Ol.prototype.clear=v0,Ol.prototype.delete=k1,Ol.prototype.get=T1,Ol.prototype.has=R1,Ol.prototype.set=$s;function Uc(w){var T=-1,Q=w==null?0:w.length;for(this.clear();++T<Q;){var he=w[T];this.set(he[0],he[1])}}function Ra(){this.size=0,this.__data__={hash:new PA,map:new(Uu||Ol),string:new PA}}function Za(w){var T=od(this,w).delete(w);return this.size-=T?1:0,T}function ql(w){return od(this,w).get(w)}function Da(w){return od(this,w).has(w)}function Ud(w,T){var Q=od(this,w),he=Q.size;return Q.set(w,T),this.size+=Q.size==he?0:1,this}Uc.prototype.clear=Ra,Uc.prototype.delete=Za,Uc.prototype.get=ql,Uc.prototype.has=Da,Uc.prototype.set=Ud;function Kc(w){var T=-1,Q=w==null?0:w.length;for(this.__data__=new Uc;++T<Q;)this.add(w[T])}function D1(w){return this.__data__.set(w,c),this}function wp(w){return this.__data__.has(w)}Kc.prototype.add=Kc.prototype.push=D1,Kc.prototype.has=wp;function Ac(w){var T=this.__data__=new Ol(w);this.size=T.size}function ph(){this.__data__=new Ol,this.size=0}function Hm(w){var T=this.__data__,Q=T.delete(w);return this.size=T.size,Q}function UA(w){return this.__data__.get(w)}function KA(w){return this.__data__.has(w)}function Qn(w,T){var Q=this.__data__;if(Q instanceof Ol){var he=Q.__data__;if(!Uu||he.length<r-1)return he.push([w,T]),this.size=++Q.size,this;Q=this.__data__=new Uc(he)}return Q.set(w,T),this.size=Q.size,this}Ac.prototype.clear=ph,Ac.prototype.delete=Hm,Ac.prototype.get=UA,Ac.prototype.has=KA,Ac.prototype.set=Qn;function Sp(w,T){var Q=vr(w),he=!Q&&Lf(w),Ue=!Q&&!he&&Ff(w),Je=!Q&&!he&&!Ue&&$d(w),mt=Q||he||Ue||Je,Bt=mt?zh(w.length,EA):[],zt=Bt.length;for(var Mn in w)(T||Br.call(w,Mn))&&!(mt&&(Mn=="length"||Ue&&(Mn=="offset"||Mn=="parent")||Je&&(Mn=="buffer"||Mn=="byteLength"||Mn=="byteOffset")||QA(Mn,zt)))&&Bt.push(Mn);return Bt}function Kd(w){var T=w.length;return T?w[C(0,T-1)]:t}function Ep(w,T){return zp(oo(w),dc(T,0,w.length))}function LA(w){return zp(oo(w))}function Xh(w,T,Q){(Q!==t&&!Cc(w[T],Q)||Q===t&&!(T in w))&&Ku(w,T,Q)}function hc(w,T,Q){var he=w[T];(!(Br.call(w,T)&&Cc(he,Q))||Q===t&&!(T in w))&&Ku(w,T,Q)}function er(w,T){for(var Q=w.length;Q--;)if(Cc(w[Q][0],T))return Q;return-1}function Zm(w,T,Q,he){return FA(w,function(Ue,Je,mt){T(he,Ue,Q(Ue),mt)}),he}function Bp(w,T){return w&&bs(T,Xa(T),w)}function lA(w,T){return w&&bs(T,Hl(T),w)}function Ku(w,T,Q){T=="__proto__"&&ol?ol(w,T,{configurable:!0,enumerable:!0,value:Q,writable:!0}):w[T]=Q}function Ld(w,T){for(var Q=-1,he=T.length,Ue=Pt(he),Je=w==null;++Q<he;)Ue[Q]=Je?t:ud(w,T[Q]);return Ue}function dc(w,T,Q){return w===w&&(Q!==t&&(w=w<=Q?w:Q),T!==t&&(w=w>=T?w:T)),w}function ul(w,T,Q,he,Ue,Je){var mt,Bt=T&v,zt=T&x,Mn=T&E;if(Q&&(mt=Ue?Q(w,he,Ue,Je):Q(w)),mt!==t)return mt;if(!ta(w))return w;var wn=vr(w);if(wn){if(mt=L1(w),!Bt)return oo(w,mt)}else{var Pn=mu(w),hi=Pn==yt||Pn==ft;if(Ff(w))return nr(w,Bt);if(Pn==an||Pn==at||hi&&!Ue){if(mt=zt||hi?{}:F1(w),!Bt)return zt?NA(w,lA(mt,w)):id(w,Bp(mt,w))}else{if(!Fr[Pn])return Ue?w:{};mt=pv(w,Pn,Bt)}}Je||(Je=new Ac);var Hi=Je.get(w);if(Hi)return Hi;Je.set(w,mt),xg(w)?w.forEach(function(_r){mt.add(ul(_r,T,Q,_r,w,Je))}):Wv(w)&&w.forEach(function(_r,Bo){mt.set(Bo,ul(_r,T,Q,Bo,w,Je))});var Cr=Mn?zt?_0:P1:zt?Hl:Xa,ho=wn?t:Cr(w);return jl(ho||w,function(_r,Bo){ho&&(Bo=_r,_r=w[Bo]),hc(mt,Bo,ul(_r,T,Q,Bo,w,Je))}),mt}function Op(w){var T=Xa(w);return function(Q){return mh(Q,w,T)}}function mh(w,T,Q){var he=Q.length;if(w==null)return!he;for(w=Fo(w);he--;){var Ue=Q[he],Je=T[Ue],mt=w[Ue];if(mt===t&&!(Ue in w)||!Je(mt))return!1}return!0}function Xm(w,T,Q){if(typeof w!="function")throw new Gl(s);return B0(function(){w.apply(t,Q)},T)}function fc(w,T,Q,he){var Ue=-1,Je=Fh,mt=!0,Bt=w.length,zt=[],Mn=T.length;if(!Bt)return zt;Q&&(T=To(T,ac(Q))),he?(Je=Cf,mt=!1):T.length>=r&&(Je=mp,mt=!1,T=new Kc(T));e:for(;++Ue<Bt;){var wn=w[Ue],Pn=Q==null?wn:Q(wn);if(wn=he||wn!==0?wn:0,mt&&Pn===Pn){for(var hi=Mn;hi--;)if(T[hi]===Pn)continue e;zt.push(wn)}else Je(T,Pn,he)||zt.push(wn)}return zt}var FA=rd(zc),Lc=rd(Lu,!0);function io(w,T){var Q=!0;return FA(w,function(he,Ue,Je){return Q=!!T(he,Ue,Je),Q}),Q}function Fc(w,T,Q){for(var he=-1,Ue=w.length;++he<Ue;){var Je=w[he],mt=T(Je);if(mt!=null&&(Bt===t?mt===mt&&!Yc(mt):Q(mt,Bt)))var Bt=mt,zt=Je}return zt}function gh(w,T,Q,he){var Ue=w.length;for(Q=ur(Q),Q<0&&(Q=-Q>Ue?0:Ue+Q),he=he===t||he>Ue?Ue:ur(he),he<0&&(he+=Ue),he=Q>he?0:cy(he);Q<he;)w[Q++]=T;return w}function Sf(w,T){var Q=[];return FA(w,function(he,Ue,Je){T(he,Ue,Je)&&Q.push(he)}),Q}function Pa(w,T,Q,he,Ue){var Je=-1,mt=w.length;for(Q||(Q=gv),Ue||(Ue=[]);++Je<mt;){var Bt=w[Je];T>0&&Q(Bt)?T>1?Pa(Bt,T-1,Q,he,Ue):Nl(Ue,Bt):he||(Ue[Ue.length]=Bt)}return Ue}var yh=bh(),Jh=bh(!0);function zc(w,T){return w&&yh(w,T,Xa)}function Lu(w,T){return w&&Jh(w,T,Xa)}function Au(w,T){return $a(T,function(Q){return Qc(w[Q])})}function ni(w,T){T=gn(T,w);for(var Q=0,he=T.length;w!=null&&Q<he;)w=w[hl(T[Q++])];return Q&&Q==he?w:t}function Ti(w,T,Q){var he=T(w);return vr(w)?he:Nl(he,Q(w))}function ga(w){return w==null?w===t?Zn:kt:IA&&IA in Fo(w)?kf(w):vv(w)}function Ef(w,T){return w>T}function Il(w,T){return w!=null&&Br.call(w,T)}function os(w,T){return w!=null&&T in Fo(w)}function zA(w,T,Q){return w>=Vs(T,Q)&&w<Is(T,Q)}function hu(w,T,Q){for(var he=Q?Cf:Fh,Ue=w[0].length,Je=w.length,mt=Je,Bt=Pt(Je),zt=1/0,Mn=[];mt--;){var wn=w[mt];mt&&T&&(wn=To(wn,ac(T))),zt=Vs(wn.length,zt),Bt[mt]=!Q&&(T||Ue>=120&&wn.length>=120)?new Kc(mt&&wn):t}wn=w[0];var Pn=-1,hi=Bt[0];e:for(;++Pn<Ue&&Mn.length<zt;){var Hi=wn[Pn],Cr=T?T(Hi):Hi;if(Hi=Q||Hi!==0?Hi:0,!(hi?mp(hi,Cr):he(Mn,Cr,Q))){for(mt=Je;--mt;){var ho=Bt[mt];if(!(ho?mp(ho,Cr):he(w[mt],Cr,Q)))continue e}hi&&hi.push(Cr),Mn.push(Hi)}}return Mn}function b0(w,T,Q,he){return zc(w,function(Ue,Je,mt){T(he,Q(Ue),Je,mt)}),he}function jc(w,T,Q){T=gn(T,w),w=E0(w,T);var he=w==null?w:w[hl(ea(T))];return he==null?t:rs(he,w,Q)}function Fu(w){return na(w)&&ga(w)==at}function ya(w){return na(w)&&ga(w)==be}function pc(w){return na(w)&&ga(w)==Oe}function Zr(w,T,Q,he,Ue){return w===T?!0:w==null||T==null||!na(w)&&!na(T)?w!==w&&T!==T:Bi(w,T,Q,he,Zr,Ue)}function Bi(w,T,Q,he,Ue,Je){var mt=vr(w),Bt=vr(T),zt=mt?Tt:mu(w),Mn=Bt?Tt:mu(T);zt=zt==at?an:zt,Mn=Mn==at?an:Mn;var wn=zt==an,Pn=Mn==an,hi=zt==Mn;if(hi&&Ff(w)){if(!Ff(T))return!1;mt=!0,wn=!1}if(hi&&!wn)return Je||(Je=new Ac),mt||$d(w)?Up(w,T,Q,he,Ue,Je):fv(w,T,zt,Q,he,Ue,Je);if(!(Q&D)){var Hi=wn&&Br.call(w,"__wrapped__"),Cr=Pn&&Br.call(T,"__wrapped__");if(Hi||Cr){var ho=Hi?w.value():w,_r=Cr?T.value():T;return Je||(Je=new Ac),Ue(ho,_r,Q,he,Je)}}return hi?(Je||(Je=new Ac),Jm(w,T,Q,he,Ue,Je)):!1}function zo(w){return na(w)&&mu(w)==Ct}function ss(w,T,Q,he){var Ue=Q.length,Je=Ue,mt=!he;if(w==null)return!Je;for(w=Fo(w);Ue--;){var Bt=Q[Ue];if(mt&&Bt[2]?Bt[1]!==w[Bt[0]]:!(Bt[0]in w))return!1}for(;++Ue<Je;){Bt=Q[Ue];var zt=Bt[0],Mn=w[zt],wn=Bt[1];if(mt&&Bt[2]){if(Mn===t&&!(zt in w))return!1}else{var Pn=new Ac;if(he)var hi=he(Mn,wn,zt,w,T,Pn);if(!(hi===t?Zr(wn,Mn,D|P,he,Pn):hi))return!1}}return!0}function ed(w){if(!ta(w)||z1(w))return!1;var T=Qc(w)?ch:nu;return T.test(dl(w))}function td(w){return na(w)&&ga(w)==_i}function du(w){return na(w)&&mu(w)==Ln}function Fd(w){return na(w)&&G0(w.length)&&!!Ni[ga(w)]}function Nc(w){return typeof w=="function"?w:w==null?bl:typeof w=="object"?vr(w)?kp(w[0],w[1]):jA(w):Ye(w)}function uA(w){if(!Al(w))return Dd(w);var T=[];for(var Q in Fo(w))Br.call(w,Q)&&Q!="constructor"&&T.push(Q);return T}function Ip(w){if(!ta(w))return Gd(w);var T=Al(w),Q=[];for(var he in w)he=="constructor"&&(T||!Br.call(w,he))||Q.push(he);return Q}function ys(w,T){return w<T}function vh(w,T){var Q=-1,he=Cu(w)?Pt(w.length):[];return FA(w,function(Ue,Je,mt){he[++Q]=T(Ue,Je,mt)}),he}function jA(w){var T=U1(w);return T.length==1&&T[0][2]?ng(T[0][0],T[0][1]):function(Q){return Q===w||ss(Q,w,T)}}function kp(w,T){return S0(w)&&xh(T)?ng(hl(w),T):function(Q){var he=ud(Q,w);return he===t&&he===T?Xp(Q,w):Zr(T,he,D|P)}}function nd(w,T,Q,he,Ue){w!==T&&yh(T,function(Je,mt){if(Ue||(Ue=new Ac),ta(Je))zd(w,T,mt,Q,nd,he,Ue);else{var Bt=he?he(Cs(w,mt),Je,mt+"",w,T,Ue):t;Bt===t&&(Bt=Je),Xh(w,mt,Bt)}},Hl)}function zd(w,T,Q,he,Ue,Je,mt){var Bt=Cs(w,Q),zt=Cs(T,Q),Mn=mt.get(zt);if(Mn){Xh(w,Q,Mn);return}var wn=Je?Je(Bt,zt,Q+"",w,T,mt):t,Pn=wn===t;if(Pn){var hi=vr(zt),Hi=!hi&&Ff(zt),Cr=!hi&&!Hi&&$d(zt);wn=zt,hi||Hi||Cr?vr(Bt)?wn=Bt:Ka(Bt)?wn=oo(Bt):Hi?(Pn=!1,wn=nr(zt,!0)):Cr?(Pn=!1,wn=No(zt,!0)):wn=[]:Sh(zt)||Lf(zt)?(wn=Bt,Lf(Bt)?wn=W0(Bt):(!ta(Bt)||Qc(Bt))&&(wn=F1(zt))):Pn=!1}Pn&&(mt.set(zt,wn),Ue(wn,zt,he,Je,mt),mt.delete(zt)),Xh(w,Q,wn)}function Bf(w,T){var Q=w.length;if(Q)return T+=T<0?Q:0,QA(T,Q)?w[T]:t}function jd(w,T,Q){T.length?T=To(T,function(Je){return vr(Je)?function(mt){return ni(mt,Je.length===1?Je[0]:Je)}:Je}):T=[bl];var he=-1;T=To(T,ac(tr()));var Ue=vh(w,function(Je,mt,Bt){var zt=To(T,function(Mn){return Mn(Je)});return{criteria:zt,index:++he,value:Je}});return xf(Ue,function(Je,mt){return vs(Je,mt,Q)})}function Of(w,T){return cl(w,T,function(Q,he){return Xp(w,he)})}function cl(w,T,Q){for(var he=-1,Ue=T.length,Je={};++he<Ue;){var mt=T[he],Bt=ni(w,mt);Q(Bt,mt)&&re(Je,gn(mt,w),Bt)}return Je}function B(w){return function(T){return ni(T,w)}}function l(w,T,Q,he){var Ue=he?dp:ah,Je=-1,mt=T.length,Bt=w;for(w===T&&(T=oo(T)),Q&&(Bt=To(w,ac(Q)));++Je<mt;)for(var zt=0,Mn=T[Je],wn=Q?Q(Mn):Mn;(zt=Ue(Bt,wn,zt,he))>-1;)Bt!==w&&sr.call(Bt,zt,1),sr.call(w,zt,1);return w}function p(w,T){for(var Q=w?T.length:0,he=Q-1;Q--;){var Ue=T[Q];if(Q==he||Ue!==Je){var Je=Ue;QA(Ue)?sr.call(w,Ue,1):ht(w,Ue)}}return w}function C(w,T){return w+Rd(Dc()*(T-w+1))}function S(w,T,Q,he){for(var Ue=-1,Je=Is(Td((T-w)/(Q||1)),0),mt=Pt(Je);Je--;)mt[he?Je:++Ue]=w,w+=Q;return mt}function O(w,T){var Q="";if(!w||T<1||T>At)return Q;do T%2&&(Q+=w),T=Rd(T/2),T&&(w+=w);while(T);return Q}function U(w,T){return N1(j1(w,T,bl),w+"")}function N(w){return Kd(Se(w))}function Y(w,T){var Q=Se(w);return zp(Q,dc(T,0,Q.length))}function re(w,T,Q,he){if(!ta(w))return w;T=gn(T,w);for(var Ue=-1,Je=T.length,mt=Je-1,Bt=w;Bt!=null&&++Ue<Je;){var zt=hl(T[Ue]),Mn=Q;if(zt==="__proto__"||zt==="constructor"||zt==="prototype")return w;if(Ue!=mt){var wn=Bt[zt];Mn=he?he(wn,zt,Bt):t,Mn===t&&(Mn=ta(wn)?wn:QA(T[Ue+1])?[]:{})}hc(Bt,zt,Mn),Bt=Bt[zt]}return w}var ae=ma?function(w,T){return ma.set(w,T),w}:bl,ge=ol?function(w,T){return ol(w,"toString",{configurable:!0,enumerable:!1,value:ra(T),writable:!0})}:bl;function pe(w){return zp(Se(w))}function we(w,T,Q){var he=-1,Ue=w.length;T<0&&(T=-T>Ue?0:Ue+T),Q=Q>Ue?Ue:Q,Q<0&&(Q+=Ue),Ue=T>Q?0:Q-T>>>0,T>>>=0;for(var Je=Pt(Ue);++he<Ue;)Je[he]=w[he+T];return Je}function Fe(w,T){var Q;return FA(w,function(he,Ue,Je){return Q=T(he,Ue,Je),!Q}),!!Q}function He(w,T,Q){var he=0,Ue=w==null?he:w.length;if(typeof T=="number"&&T===T&&Ue<=De){for(;he<Ue;){var Je=he+Ue>>>1,mt=w[Je];mt!==null&&!Yc(mt)&&(Q?mt<=T:mt<T)?he=Je+1:Ue=Je}return Ue}return Ze(w,T,bl,Q)}function Ze(w,T,Q,he){var Ue=0,Je=w==null?0:w.length;if(Je===0)return 0;T=Q(T);for(var mt=T!==T,Bt=T===null,zt=Yc(T),Mn=T===t;Ue<Je;){var wn=Rd((Ue+Je)/2),Pn=Q(w[wn]),hi=Pn!==t,Hi=Pn===null,Cr=Pn===Pn,ho=Yc(Pn);if(mt)var _r=he||Cr;else Mn?_r=Cr&&(he||hi):Bt?_r=Cr&&hi&&(he||!Hi):zt?_r=Cr&&hi&&!Hi&&(he||!ho):Hi||ho?_r=!1:_r=he?Pn<=T:Pn<T;_r?Ue=wn+1:Je=wn}return Vs(Je,Ge)}function et(w,T){for(var Q=-1,he=w.length,Ue=0,Je=[];++Q<he;){var mt=w[Q],Bt=T?T(mt):mt;if(!Q||!Cc(Bt,zt)){var zt=Bt;Je[Ue++]=mt===0?0:mt}}return Je}function rt(w){return typeof w=="number"?w:Yc(w)?Le:+w}function lt(w){if(typeof w=="string")return w;if(vr(w))return To(w,lt)+"";if(Yc(w))return TA?TA.call(w):"";var T=w+"";return T=="0"&&1/w==-qe?"-0":T}function nt(w,T,Q){var he=-1,Ue=Fh,Je=w.length,mt=!0,Bt=[],zt=Bt;if(Q)mt=!1,Ue=Cf;else if(Je>=r){var Mn=T?null:Dp(w);if(Mn)return Nm(Mn);mt=!1,Ue=mp,zt=new Kc}else zt=T?[]:Bt;e:for(;++he<Je;){var wn=w[he],Pn=T?T(wn):wn;if(wn=Q||wn!==0?wn:0,mt&&Pn===Pn){for(var hi=zt.length;hi--;)if(zt[hi]===Pn)continue e;T&&zt.push(Pn),Bt.push(wn)}else Ue(zt,Pn,Q)||(zt!==Bt&&zt.push(Pn),Bt.push(wn))}return Bt}function ht(w,T){return T=gn(T,w),w=E0(w,T),w==null||delete w[hl(ea(T))]}function bt(w,T,Q,he){return re(w,T,Q(ni(w,T)),he)}function st(w,T,Q,he){for(var Ue=w.length,Je=he?Ue:-1;(he?Je--:++Je<Ue)&&T(w[Je],Je,w););return Q?we(w,he?0:Je,he?Je+1:Ue):we(w,he?Je+1:0,he?Ue:Je)}function wt(w,T){var Q=w;return Q instanceof br&&(Q=Q.value()),hp(T,function(he,Ue){return Ue.func.apply(Ue.thisArg,Nl([he],Ue.args))},Q)}function Yt(w,T,Q){var he=w.length;if(he<2)return he?nt(w[0]):[];for(var Ue=-1,Je=Pt(he);++Ue<he;)for(var mt=w[Ue],Bt=-1;++Bt<he;)Bt!=Ue&&(Je[Ue]=fc(Je[Ue]||mt,w[Bt],T,Q));return nt(Pa(Je,1),T,Q)}function jt(w,T,Q){for(var he=-1,Ue=w.length,Je=T.length,mt={};++he<Ue;){var Bt=he<Je?T[he]:t;Q(mt,w[he],Bt)}return mt}function Nt(w){return Ka(w)?w:[]}function qt(w){return typeof w=="function"?w:bl}function gn(w,T){return vr(w)?w:S0(w,T)?[w]:G1(Eo(w))}var In=U;function sn(w,T,Q){var he=w.length;return Q=Q===t?he:Q,!T&&Q>=he?w:we(w,T,Q)}var ti=I1||function(w){return Ei.clearTimeout(w)};function nr(w,T){if(T)return w.slice();var Q=w.length,he=Ah?Ah(Q):new w.constructor(Q);return w.copy(he),he}function ro(w){var T=new w.constructor(w.byteLength);return new qh(T).set(new qh(w)),T}function yr(w,T){var Q=T?ro(w.buffer):w.buffer;return new w.constructor(Q,w.byteOffset,w.byteLength)}function jo(w){var T=new w.constructor(w.source,oi.exec(w));return T.lastIndex=w.lastIndex,T}function ks(w){return sA?Fo(sA.call(w)):{}}function No(w,T){var Q=T?ro(w.buffer):w.buffer;return new w.constructor(Q,w.byteOffset,w.length)}function aa(w,T){if(w!==T){var Q=w!==t,he=w===null,Ue=w===w,Je=Yc(w),mt=T!==t,Bt=T===null,zt=T===T,Mn=Yc(T);if(!Bt&&!Mn&&!Je&&w>T||Je&&mt&&zt&&!Bt&&!Mn||he&&mt&&zt||!Q&&zt||!Ue)return 1;if(!he&&!Je&&!Mn&&w<T||Mn&&Q&&Ue&&!he&&!Je||Bt&&Q&&Ue||!mt&&Ue||!zt)return-1}return 0}function vs(w,T,Q){for(var he=-1,Ue=w.criteria,Je=T.criteria,mt=Ue.length,Bt=Q.length;++he<mt;){var zt=aa(Ue[he],Je[he]);if(zt){if(he>=Bt)return zt;var Mn=Q[he];return zt*(Mn=="desc"?-1:1)}}return w.index-T.index}function va(w,T,Q,he){for(var Ue=-1,Je=w.length,mt=Q.length,Bt=-1,zt=T.length,Mn=Is(Je-mt,0),wn=Pt(zt+Mn),Pn=!he;++Bt<zt;)wn[Bt]=T[Bt];for(;++Ue<mt;)(Pn||Ue<Je)&&(wn[Q[Ue]]=w[Ue]);for(;Mn--;)wn[Bt++]=w[Ue++];return wn}function as(w,T,Q,he){for(var Ue=-1,Je=w.length,mt=-1,Bt=Q.length,zt=-1,Mn=T.length,wn=Is(Je-Bt,0),Pn=Pt(wn+Mn),hi=!he;++Ue<wn;)Pn[Ue]=w[Ue];for(var Hi=Ue;++zt<Mn;)Pn[Hi+zt]=T[zt];for(;++mt<Bt;)(hi||Ue<Je)&&(Pn[Hi+Q[mt]]=w[Ue++]);return Pn}function oo(w,T){var Q=-1,he=w.length;for(T||(T=Pt(he));++Q<he;)T[Q]=w[Q];return T}function bs(w,T,Q,he){var Ue=!Q;Q||(Q={});for(var Je=-1,mt=T.length;++Je<mt;){var Bt=T[Je],zt=he?he(Q[Bt],w[Bt],Bt,Q,w):t;zt===t&&(zt=w[Bt]),Ue?Ku(Q,Bt,zt):hc(Q,Bt,zt)}return Q}function id(w,T){return bs(w,Kp(w),T)}function NA(w,T){return bs(w,M0(w),T)}function mc(w,T){return function(Q,he){var Ue=vr(Q)?S1:Zm,Je=T?T():{};return Ue(Q,w,tr(he,2),Je)}}function zu(w){return U(function(T,Q){var he=-1,Ue=Q.length,Je=Ue>1?Q[Ue-1]:t,mt=Ue>2?Q[2]:t;for(Je=w.length>3&&typeof Je=="function"?(Ue--,Je):t,mt&&gu(Q[0],Q[1],mt)&&(Je=Ue<3?t:Je,Ue=1),T=Fo(T);++he<Ue;){var Bt=Q[he];Bt&&w(T,Bt,he,Je)}return T})}function rd(w,T){return function(Q,he){if(Q==null)return Q;if(!Cu(Q))return w(Q,he);for(var Ue=Q.length,Je=T?Ue:-1,mt=Fo(Q);(T?Je--:++Je<Ue)&&he(mt[Je],Je,mt)!==!1;);return Q}}function bh(w){return function(T,Q,he){for(var Ue=-1,Je=Fo(T),mt=he(T),Bt=mt.length;Bt--;){var zt=mt[w?Bt:++Ue];if(Q(Je[zt],zt,Je)===!1)break}return T}}function Vl(w,T,Q){var he=T&F,Ue=Gc(w);function Je(){var mt=this&&this!==Ei&&this instanceof Je?Ue:w;return mt.apply(he?Q:this,arguments)}return Je}function kl(w){return function(T){T=Eo(T);var Q=Nh(T)?Bs(T):t,he=Q?Q[0]:T.charAt(0),Ue=Q?sn(Q,1).join(""):T.slice(1);return he[w]()+Ue}}function fu(w){return function(T){return hp(qc(pt(T).replace(uo,"")),w,"")}}function Gc(w){return function(){var T=arguments;switch(T.length){case 0:return new w;case 1:return new w(T[0]);case 2:return new w(T[0],T[1]);case 3:return new w(T[0],T[1],T[2]);case 4:return new w(T[0],T[1],T[2],T[3]);case 5:return new w(T[0],T[1],T[2],T[3],T[4]);case 6:return new w(T[0],T[1],T[2],T[3],T[4],T[5]);case 7:return new w(T[0],T[1],T[2],T[3],T[4],T[5],T[6])}var Q=lc(w.prototype),he=w.apply(Q,T);return ta(he)?he:Q}}function Tp(w,T,Q){var he=Gc(w);function Ue(){for(var Je=arguments.length,mt=Pt(Je),Bt=Je,zt=ba(Ue);Bt--;)mt[Bt]=arguments[Bt];var Mn=Je<3&&mt[0]!==zt&&mt[Je-1]!==zt?[]:lh(mt,zt);if(Je-=Mn.length,Je<Q)return GA(w,T,Zs,Ue.placeholder,t,mt,Mn,t,t,Q-Je);var wn=this&&this!==Ei&&this instanceof Ue?he:w;return rs(wn,this,mt)}return Ue}function Hs(w){return function(T,Q,he){var Ue=Fo(T);if(!Cu(T)){var Je=tr(Q,3);T=Xa(T),Q=function(Bt){return Je(Ue[Bt],Bt,Ue)}}var mt=w(T,Q,he);return mt>-1?Ue[Je?T[mt]:mt]:t}}function ls(w){return _h(function(T){var Q=T.length,he=Q,Ue=ll.prototype.thru;for(w&&T.reverse();he--;){var Je=T[he];if(typeof Je!="function")throw new Gl(s);if(Ue&&!mt&&Js(Je)=="wrapper")var mt=new ll([],!0)}for(he=mt?he:Q;++he<Q;){Je=T[he];var Bt=Js(Je),zt=Bt=="wrapper"?x0(Je):t;zt&&tg(zt[0])&&zt[1]==(G|V|X|oe)&&!zt[4].length&&zt[9]==1?mt=mt[Js(zt[0])].apply(mt,zt[3]):mt=Je.length==1&&tg(Je)?mt[Bt]():mt.thru(Je)}return function(){var Mn=arguments,wn=Mn[0];if(mt&&Mn.length==1&&vr(wn))return mt.plant(wn).value();for(var Pn=0,hi=Q?T[Pn].apply(this,Mn):wn;++Pn<Q;)hi=T[Pn].call(this,hi);return hi}})}function Zs(w,T,Q,he,Ue,Je,mt,Bt,zt,Mn){var wn=T&G,Pn=T&F,hi=T&W,Hi=T&(V|H),Cr=T&ue,ho=hi?t:Gc(w);function _r(){for(var Bo=arguments.length,Wo=Pt(Bo),Jd=Bo;Jd--;)Wo[Jd]=arguments[Jd];if(Hi)var Bh=ba(_r),ef=Od(Wo,Bh);if(he&&(Wo=va(Wo,he,Ue,Hi)),Je&&(Wo=as(Wo,Je,mt,Hi)),Bo-=ef,Hi&&Bo<Mn){var xu=lh(Wo,Bh);return GA(w,T,Zs,_r.placeholder,Q,Wo,xu,Bt,zt,Mn-Bo)}var tm=Pn?Q:this,V0=hi?tm[w]:w;return Bo=Wo.length,Bt?Wo=Fp(Wo,Bt):Cr&&Bo>1&&Wo.reverse(),wn&&zt<Bo&&(Wo.length=zt),this&&this!==Ei&&this instanceof _r&&(V0=ho||Gc(V0)),V0.apply(tm,Wo)}return _r}function Ro(w,T){return function(Q,he){return b0(Q,w,T(he),{})}}function pu(w,T){return function(Q,he){var Ue;if(Q===t&&he===t)return T;if(Q!==t&&(Ue=Q),he!==t){if(Ue===t)return he;typeof Q=="string"||typeof he=="string"?(Q=lt(Q),he=lt(he)):(Q=rt(Q),he=rt(he)),Ue=w(Q,he)}return Ue}}function cA(w){return _h(function(T){return T=To(T,ac(tr())),U(function(Q){var he=this;return w(T,function(Ue){return rs(Ue,he,Q)})})})}function Ch(w,T){T=T===t?" ":lt(T);var Q=T.length;if(Q<2)return Q?O(T,w):T;var he=O(T,Td(w/Gh(T)));return Nh(T)?sn(Bs(he),0,w).join(""):he.slice(0,w)}function C0(w,T,Q,he){var Ue=T&F,Je=Gc(w);function mt(){for(var Bt=-1,zt=arguments.length,Mn=-1,wn=he.length,Pn=Pt(wn+zt),hi=this&&this!==Ei&&this instanceof mt?Je:w;++Mn<wn;)Pn[Mn]=he[Mn];for(;zt--;)Pn[Mn++]=arguments[++Bt];return rs(hi,Ue?Q:this,Pn)}return mt}function Rp(w){return function(T,Q,he){return he&&typeof he!="number"&&gu(T,Q,he)&&(Q=he=t),T=Hd(T),Q===t?(Q=T,T=0):Q=Hd(Q),he=he===t?T<Q?1:-1:Hd(he),S(T,Q,he,w)}}function AA(w){return function(T,Q){return typeof T=="string"&&typeof Q=="string"||(T=Wu(T),Q=Wu(Q)),w(T,Q)}}function GA(w,T,Q,he,Ue,Je,mt,Bt,zt,Mn){var wn=T&V,Pn=wn?mt:t,hi=wn?t:mt,Hi=wn?Je:t,Cr=wn?t:Je;T|=wn?X:Z,T&=~(wn?Z:X),T&q||(T&=-4);var ho=[w,T,Ue,Hi,Pn,Cr,hi,Bt,zt,Mn],_r=Q.apply(t,ho);return tg(w)&&bv(_r,ho),_r.placeholder=he,ig(_r,w,T)}function Nd(w){var T=Os[w];return function(Q,he){if(Q=Wu(Q),he=he==null?0:Vs(ur(he),292),he&&Bl(Q)){var Ue=(Eo(Q)+"e").split("e"),Je=T(Ue[0]+"e"+(+Ue[1]+he));return Ue=(Eo(Je)+"e").split("e"),+(Ue[0]+"e"+(+Ue[1]-he))}return T(Q)}}var Dp=Pc&&1/Nm(new Pc([,-0]))[1]==qe?function(w){return new Pc(w)}:_;function Pp(w){return function(T){var Q=mu(T);return Q==Ct?jm(T):Q==Ln?Gm(T):B1(T,w(T))}}function Xs(w,T,Q,he,Ue,Je,mt,Bt){var zt=T&W;if(!zt&&typeof w!="function")throw new Gl(s);var Mn=he?he.length:0;if(Mn||(T&=-97,he=Ue=t),mt=mt===t?mt:Is(ur(mt),0),Bt=Bt===t?Bt:ur(Bt),Mn-=Ue?Ue.length:0,T&Z){var wn=he,Pn=Ue;he=Ue=t}var hi=zt?t:x0(w),Hi=[w,T,Q,he,Ue,wn,Pn,Je,mt,Bt];if(hi&&yv(Hi,hi),w=Hi[0],T=Hi[1],Q=Hi[2],he=Hi[3],Ue=Hi[4],Bt=Hi[9]=Hi[9]===t?zt?0:w.length:Is(Hi[9]-Mn,0),!Bt&&T&(V|H)&&(T&=-25),!T||T==F)var Cr=Vl(w,T,Q);else T==V||T==H?Cr=Tp(w,T,Bt):(T==X||T==(F|X))&&!Ue.length?Cr=C0(w,T,Q,he):Cr=Zs.apply(t,Hi);var ho=hi?ae:bv;return ig(ho(Cr,Hi),w,T)}function WA(w,T,Q,he){return w===t||Cc(w,Rc[Q])&&!Br.call(he,Q)?T:w}function If(w,T,Q,he,Ue,Je){return ta(w)&&ta(T)&&(Je.set(T,w),nd(w,T,t,If,Je),Je.delete(T)),w}function pC(w){return Sh(w)?t:w}function Up(w,T,Q,he,Ue,Je){var mt=Q&D,Bt=w.length,zt=T.length;if(Bt!=zt&&!(mt&&zt>Bt))return!1;var Mn=Je.get(w),wn=Je.get(T);if(Mn&&wn)return Mn==T&&wn==w;var Pn=-1,hi=!0,Hi=Q&P?new Kc:t;for(Je.set(w,T),Je.set(T,w);++Pn<Bt;){var Cr=w[Pn],ho=T[Pn];if(he)var _r=mt?he(ho,Cr,Pn,T,w,Je):he(Cr,ho,Pn,w,T,Je);if(_r!==t){if(_r)continue;hi=!1;break}if(Hi){if(!Dm(T,function(Bo,Wo){if(!mp(Hi,Wo)&&(Cr===Bo||Ue(Cr,Bo,Q,he,Je)))return Hi.push(Wo)})){hi=!1;break}}else if(!(Cr===ho||Ue(Cr,ho,Q,he,Je))){hi=!1;break}}return Je.delete(w),Je.delete(T),hi}function fv(w,T,Q,he,Ue,Je,mt){switch(Q){case ie:if(w.byteLength!=T.byteLength||w.byteOffset!=T.byteOffset)return!1;w=w.buffer,T=T.buffer;case be:return!(w.byteLength!=T.byteLength||!Je(new qh(w),new qh(T)));case Ke:case Oe:case Lt:return Cc(+w,+T);case Ve:return w.name==T.name&&w.message==T.message;case _i:case Un:return w==T+"";case Ct:var Bt=jm;case Ln:var zt=he&D;if(Bt||(Bt=Nm),w.size!=T.size&&!zt)return!1;var Mn=mt.get(w);if(Mn)return Mn==T;he|=P,mt.set(w,T);var wn=Up(Bt(w),Bt(T),he,Ue,Je,mt);return mt.delete(w),wn;case xn:if(sA)return sA.call(w)==sA.call(T)}return!1}function Jm(w,T,Q,he,Ue,Je){var mt=Q&D,Bt=P1(w),zt=Bt.length,Mn=P1(T),wn=Mn.length;if(zt!=wn&&!mt)return!1;for(var Pn=zt;Pn--;){var hi=Bt[Pn];if(!(mt?hi in T:Br.call(T,hi)))return!1}var Hi=Je.get(w),Cr=Je.get(T);if(Hi&&Cr)return Hi==T&&Cr==w;var ho=!0;Je.set(w,T),Je.set(T,w);for(var _r=mt;++Pn<zt;){hi=Bt[Pn];var Bo=w[hi],Wo=T[hi];if(he)var Jd=mt?he(Wo,Bo,hi,T,w,Je):he(Bo,Wo,hi,w,T,Je);if(!(Jd===t?Bo===Wo||Ue(Bo,Wo,Q,he,Je):Jd)){ho=!1;break}_r||(_r=hi=="constructor")}if(ho&&!_r){var Bh=w.constructor,ef=T.constructor;Bh!=ef&&"constructor"in w&&"constructor"in T&&!(typeof Bh=="function"&&Bh instanceof Bh&&typeof ef=="function"&&ef instanceof ef)&&(ho=!1)}return Je.delete(w),Je.delete(T),ho}function _h(w){return N1(j1(w,t,_s),w+"")}function P1(w){return Ti(w,Xa,Kp)}function _0(w){return Ti(w,Hl,M0)}var x0=ma?function(w){return ma.get(w)}:_;function Js(w){for(var T=w.name+"",Q=bo[T],he=Br.call(bo,T)?Q.length:0;he--;){var Ue=Q[he],Je=Ue.func;if(Je==null||Je==w)return Ue.name}return T}function ba(w){var T=Br.call(Qe,"placeholder")?Qe:w;return T.placeholder}function tr(){var w=Qe.iteratee||_c;return w=w===_c?Nc:w,arguments.length?w(arguments[0],arguments[1]):w}function od(w,T){var Q=w.__data__;return eg(T)?Q[typeof T=="string"?"string":"hash"]:Q.map}function U1(w){for(var T=Xa(w),Q=T.length;Q--;){var he=T[Q],Ue=w[he];T[Q]=[he,Ue,xh(Ue)]}return T}function hA(w,T){var Q=jh(w,T);return ed(Q)?Q:t}function kf(w){var T=Br.call(w,IA),Q=w[IA];try{w[IA]=t;var he=!0}catch{}var Ue=Wl.call(w);return he&&(T?w[IA]=Q:delete w[IA]),Ue}var Kp=$h?function(w){return w==null?[]:(w=Fo(w),$a($h(w),function(T){return kd.call(w,T)}))}:yn,M0=$h?function(w){for(var T=[];w;)Nl(T,Kp(w)),w=lu(w);return T}:yn,mu=ga;(Ql&&mu(new Ql(new ArrayBuffer(1)))!=ie||Uu&&mu(new Uu)!=Ct||wf&&mu(wf.resolve())!=Hn||Pc&&mu(new Pc)!=Ln||hh&&mu(new hh)!=Rn)&&(mu=function(w){var T=ga(w),Q=T==an?w.constructor:t,he=Q?dl(Q):"";if(he)switch(he){case zr:return ie;case dh:return Ct;case cu:return Hn;case gs:return Ln;case Yl:return Rn}return T});function Xx(w,T,Q){for(var he=-1,Ue=Q.length;++he<Ue;){var Je=Q[he],mt=Je.size;switch(Je.type){case"drop":w+=mt;break;case"dropRight":T-=mt;break;case"take":T=Vs(T,w+mt);break;case"takeRight":w=Is(w,T-mt);break}}return{start:w,end:T}}function K1(w){var T=w.match(Li);return T?T[1].split($o):[]}function w0(w,T,Q){T=gn(T,w);for(var he=-1,Ue=T.length,Je=!1;++he<Ue;){var mt=hl(T[he]);if(!(Je=w!=null&&Q(w,mt)))break;w=w[mt]}return Je||++he!=Ue?Je:(Ue=w==null?0:w.length,!!Ue&&G0(Ue)&&QA(mt,Ue)&&(vr(w)||Lf(w)))}function L1(w){var T=w.length,Q=new w.constructor(T);return T&&typeof w[0]=="string"&&Br.call(w,"index")&&(Q.index=w.index,Q.input=w.input),Q}function F1(w){return typeof w.constructor=="function"&&!Al(w)?lc(lu(w)):{}}function pv(w,T,Q){var he=w.constructor;switch(T){case be:return ro(w);case Ke:case Oe:return new he(+w);case ie:return yr(w,Q);case le:case de:case se:case Ae:case ve:case We:case tt:case Pe:case Xe:return No(w,Q);case Ct:return new he;case Lt:case Un:return new he(w);case _i:return jo(w);case Ln:return new he;case xn:return ks(w)}}function mv(w,T){var Q=T.length;if(!Q)return w;var he=Q-1;return T[he]=(Q>1?"& ":"")+T[he],T=T.join(Q>2?", ":" "),w.replace(rn,`{
/* [wrapped with `+T+`] */
`)}function gv(w){return vr(w)||Lf(w)||!!(_p&&w&&w[_p])}function QA(w,T){var Q=typeof w;return T=T??At,!!T&&(Q=="number"||Q!="symbol"&&tc.test(w))&&w>-1&&w%1==0&&w<T}function gu(w,T,Q){if(!ta(Q))return!1;var he=typeof T;return(he=="number"?Cu(Q)&&QA(T,Q.length):he=="string"&&T in Q)?Cc(Q[T],w):!1}function S0(w,T){if(vr(w))return!1;var Q=typeof w;return Q=="number"||Q=="symbol"||Q=="boolean"||w==null||Yc(w)?!0:Zi.test(w)||!vi.test(w)||T!=null&&w in Fo(T)}function eg(w){var T=typeof w;return T=="string"||T=="number"||T=="symbol"||T=="boolean"?w!=="__proto__":w===null}function tg(w){var T=Js(w),Q=Qe[T];if(typeof Q!="function"||!(T in br.prototype))return!1;if(w===Q)return!0;var he=x0(Q);return!!he&&w===he[0]}function z1(w){return!!Cp&&Cp in w}var Lp=Yh?Qc:Xt;function Al(w){var T=w&&w.constructor,Q=typeof T=="function"&&T.prototype||Rc;return w===Q}function xh(w){return w===w&&!ta(w)}function ng(w,T){return function(Q){return Q==null?!1:Q[w]===T&&(T!==t||w in Fo(Q))}}function Jx(w){var T=K0(w,function(he){return Q.size===h&&Q.clear(),he}),Q=T.cache;return T}function yv(w,T){var Q=w[1],he=T[1],Ue=Q|he,Je=Ue<(F|W|G),mt=he==G&&Q==V||he==G&&Q==oe&&w[7].length<=T[8]||he==(G|oe)&&T[7].length<=T[8]&&Q==V;if(!(Je||mt))return w;he&F&&(w[2]=T[2],Ue|=Q&F?0:q);var Bt=T[3];if(Bt){var zt=w[3];w[3]=zt?va(zt,Bt,T[4]):Bt,w[4]=zt?lh(w[3],m):T[4]}return Bt=T[5],Bt&&(zt=w[5],w[5]=zt?as(zt,Bt,T[6]):Bt,w[6]=zt?lh(w[5],m):T[6]),Bt=T[7],Bt&&(w[7]=Bt),he&G&&(w[8]=w[8]==null?T[8]:Vs(w[8],T[8])),w[9]==null&&(w[9]=T[9]),w[0]=T[0],w[1]=Ue,w}function Gd(w){var T=[];if(w!=null)for(var Q in Fo(w))T.push(Q);return T}function vv(w){return Wl.call(w)}function j1(w,T,Q){return T=Is(T===t?w.length-1:T,0),function(){for(var he=arguments,Ue=-1,Je=Is(he.length-T,0),mt=Pt(Je);++Ue<Je;)mt[Ue]=he[T+Ue];Ue=-1;for(var Bt=Pt(T+1);++Ue<T;)Bt[Ue]=he[Ue];return Bt[T]=Q(mt),rs(w,this,Bt)}}function E0(w,T){return T.length<2?w:ni(w,we(T,0,-1))}function Fp(w,T){for(var Q=w.length,he=Vs(T.length,Q),Ue=oo(w);he--;){var Je=T[he];w[he]=QA(Je,Q)?Ue[Je]:t}return w}function Cs(w,T){if(!(T==="constructor"&&typeof w[T]=="function")&&T!="__proto__")return w[T]}var bv=YA(ae),B0=Vh||function(w,T){return Ei.setTimeout(w,T)},N1=YA(ge);function ig(w,T,Q){var he=T+"";return N1(w,mv(he,mC(K1(he),Q)))}function YA(w){var T=0,Q=0;return function(){var he=uu(),Ue=Me-(he-Q);if(Q=he,Ue>0){if(++T>=Ie)return arguments[0]}else T=0;return w.apply(t,arguments)}}function zp(w,T){var Q=-1,he=w.length,Ue=he-1;for(T=T===t?he:T;++Q<T;){var Je=C(Q,Ue),mt=w[Je];w[Je]=w[Q],w[Q]=mt}return w.length=T,w}var G1=Jx(function(w){var T=[];return w.charCodeAt(0)===46&&T.push(""),w.replace(Ki,function(Q,he,Ue,Je){T.push(Ue?Je.replace(pn,"$1"):he||Q)}),T});function hl(w){if(typeof w=="string"||Yc(w))return w;var T=w+"";return T=="0"&&1/w==-qe?"-0":T}function dl(w){if(w!=null){try{return uh.call(w)}catch{}try{return w+""}catch{}}return""}function mC(w,T){return jl(_t,function(Q){var he="_."+Q[0];T&Q[1]&&!Fh(w,he)&&w.push(he)}),w.sort()}function W1(w){if(w instanceof br)return w.clone();var T=new ll(w.__wrapped__,w.__chain__);return T.__actions__=oo(w.__actions__),T.__index__=w.__index__,T.__values__=w.__values__,T}function gC(w,T,Q){(Q?gu(w,T,Q):T===t)?T=1:T=Is(ur(T),0);var he=w==null?0:w.length;if(!he||T<1)return[];for(var Ue=0,Je=0,mt=Pt(Td(he/T));Ue<he;)mt[Je++]=we(w,Ue,Ue+=T);return mt}function Cv(w){for(var T=-1,Q=w==null?0:w.length,he=0,Ue=[];++T<Q;){var Je=w[T];Je&&(Ue[he++]=Je)}return Ue}function _v(){var w=arguments.length;if(!w)return[];for(var T=Pt(w-1),Q=arguments[0],he=w;he--;)T[he-1]=arguments[he];return Nl(vr(Q)?oo(Q):[Q],Pa(T,1))}var Q1=U(function(w,T){return Ka(w)?fc(w,Pa(T,1,Ka,!0)):[]}),yC=U(function(w,T){var Q=ea(T);return Ka(Q)&&(Q=t),Ka(w)?fc(w,Pa(T,1,Ka,!0),tr(Q,2)):[]}),Mh=U(function(w,T){var Q=ea(T);return Ka(Q)&&(Q=t),Ka(w)?fc(w,Pa(T,1,Ka,!0),t,Q):[]});function fl(w,T,Q){var he=w==null?0:w.length;return he?(T=Q||T===t?1:ur(T),we(w,T<0?0:T,he)):[]}function Y1(w,T,Q){var he=w==null?0:w.length;return he?(T=Q||T===t?1:ur(T),T=he-T,we(w,0,T<0?0:T)):[]}function rg(w,T){return w&&w.length?st(w,tr(T,3),!0,!0):[]}function $l(w,T){return w&&w.length?st(w,tr(T,3),!0):[]}function Ca(w,T,Q,he){var Ue=w==null?0:w.length;return Ue?(Q&&typeof Q!="number"&&gu(w,T,Q)&&(Q=0,he=Ue),gh(w,T,Q,he)):[]}function Tf(w,T,Q){var he=w==null?0:w.length;if(!he)return-1;var Ue=Q==null?0:ur(Q);return Ue<0&&(Ue=Is(he+Ue,0)),sh(w,tr(T,3),Ue)}function q1(w,T,Q){var he=w==null?0:w.length;if(!he)return-1;var Ue=he-1;return Q!==t&&(Ue=ur(Q),Ue=Q<0?Is(he+Ue,0):Vs(Ue,he-1)),sh(w,tr(T,3),Ue,!0)}function _s(w){var T=w==null?0:w.length;return T?Pa(w,1):[]}function yu(w){var T=w==null?0:w.length;return T?Pa(w,qe):[]}function dA(w,T){var Q=w==null?0:w.length;return Q?(T=T===t?1:ur(T),Pa(w,T)):[]}function xv(w){for(var T=-1,Q=w==null?0:w.length,he={};++T<Q;){var Ue=w[T];he[Ue[0]]=Ue[1]}return he}function V1(w){return w&&w.length?w[0]:t}function og(w,T,Q){var he=w==null?0:w.length;if(!he)return-1;var Ue=Q==null?0:ur(Q);return Ue<0&&(Ue=Is(he+Ue,0)),ah(w,T,Ue)}function Mv(w){var T=w==null?0:w.length;return T?we(w,0,-1):[]}var Wd=U(function(w){var T=To(w,Nt);return T.length&&T[0]===w[0]?hu(T):[]}),vu=U(function(w){var T=ea(w),Q=To(w,Nt);return T===ea(Q)?T=t:Q.pop(),Q.length&&Q[0]===w[0]?hu(Q,tr(T,2)):[]}),ju=U(function(w){var T=ea(w),Q=To(w,Nt);return T=typeof T=="function"?T:t,T&&Q.pop(),Q.length&&Q[0]===w[0]?hu(Q,t,T):[]});function sg(w,T){return w==null?"":Zh.call(w,T)}function ea(w){var T=w==null?0:w.length;return T?w[T-1]:t}function wv(w,T,Q){var he=w==null?0:w.length;if(!he)return-1;var Ue=he;return Q!==t&&(Ue=ur(Q),Ue=Ue<0?Is(he+Ue,0):Vs(Ue,he-1)),T===T?O1(w,T,Ue):sh(w,Km,Ue,!0)}function gc(w,T){return w&&w.length?Bf(w,ur(T)):t}var jp=U(wh);function wh(w,T){return w&&w.length&&T&&T.length?l(w,T):w}function Np(w,T,Q){return w&&w.length&&T&&T.length?l(w,T,tr(Q,2)):w}function O0(w,T,Q){return w&&w.length&&T&&T.length?l(w,T,t,Q):w}var qA=_h(function(w,T){var Q=w==null?0:w.length,he=Ld(w,T);return p(w,To(T,function(Ue){return QA(Ue,Q)?+Ue:Ue}).sort(aa)),he});function Sv(w,T){var Q=[];if(!(w&&w.length))return Q;var he=-1,Ue=[],Je=w.length;for(T=tr(T,3);++he<Je;){var mt=w[he];T(mt,he,w)&&(Q.push(mt),Ue.push(he))}return p(w,Ue),Q}function Rf(w){return w==null?w:kA.call(w)}function I0(w,T,Q){var he=w==null?0:w.length;return he?(Q&&typeof Q!="number"&&gu(w,T,Q)?(T=0,Q=he):(T=T==null?0:ur(T),Q=Q===t?he:ur(Q)),we(w,T,Q)):[]}function k0(w,T){return He(w,T)}function ag(w,T,Q){return Ze(w,T,tr(Q,2))}function vC(w,T){var Q=w==null?0:w.length;if(Q){var he=He(w,T);if(he<Q&&Cc(w[he],T))return he}return-1}function Gp(w,T){return He(w,T,!0)}function T0(w,T,Q){return Ze(w,T,tr(Q,2),!0)}function bC(w,T){var Q=w==null?0:w.length;if(Q){var he=He(w,T,!0)-1;if(Cc(w[he],T))return he}return-1}function R0(w){return w&&w.length?et(w):[]}function CC(w,T){return w&&w.length?et(w,tr(T,2)):[]}function _C(w){var T=w==null?0:w.length;return T?we(w,1,T):[]}function e2(w,T,Q){return w&&w.length?(T=Q||T===t?1:ur(T),we(w,0,T<0?0:T)):[]}function So(w,T,Q){var he=w==null?0:w.length;return he?(T=Q||T===t?1:ur(T),T=he-T,we(w,T<0?0:T,he)):[]}function Go(w,T){return w&&w.length?st(w,tr(T,3),!1,!0):[]}function Qr(w,T){return w&&w.length?st(w,tr(T,3)):[]}var Ao=U(function(w){return nt(Pa(w,1,Ka,!0))}),us=U(function(w){var T=ea(w);return Ka(T)&&(T=t),nt(Pa(w,1,Ka,!0),tr(T,2))}),Wc=U(function(w){var T=ea(w);return T=typeof T=="function"?T:t,nt(Pa(w,1,Ka,!0),t,T)});function Qd(w){return w&&w.length?nt(w):[]}function lg(w,T){return w&&w.length?nt(w,tr(T,2)):[]}function Ev(w,T){return T=typeof T=="function"?T:t,w&&w.length?nt(w,t,T):[]}function yc(w){if(!(w&&w.length))return[];var T=0;return w=$a(w,function(Q){if(Ka(Q))return T=Is(Q.length,T),!0}),zh(T,function(Q){return To(w,Bd(Q))})}function la(w,T){if(!(w&&w.length))return[];var Q=yc(w);return T==null?Q:To(Q,function(he){return rs(T,t,he)})}var Df=U(function(w,T){return Ka(w)?fc(w,T):[]}),Wp=U(function(w){return Yt($a(w,Ka))}),Bv=U(function(w){var T=ea(w);return Ka(T)&&(T=t),Yt($a(w,Ka),tr(T,2))}),fA=U(function(w){var T=ea(w);return T=typeof T=="function"?T:t,Yt($a(w,Ka),t,T)}),ug=U(yc);function cg(w,T){return jt(w||[],T||[],hc)}function Nu(w,T){return jt(w||[],T||[],re)}var $1=U(function(w){var T=w.length,Q=T>1?w[T-1]:t;return Q=typeof Q=="function"?(w.pop(),Q):t,la(w,Q)});function Ag(w){var T=Qe(w);return T.__chain__=!0,T}function Ov(w,T){return T(w),w}function Qp(w,T){return T(w)}var Yp=_h(function(w){var T=w.length,Q=T?w[0]:0,he=this.__wrapped__,Ue=function(Je){return Ld(Je,w)};return T>1||this.__actions__.length||!(he instanceof br)||!QA(Q)?this.thru(Ue):(he=he.slice(Q,+Q+(T?1:0)),he.__actions__.push({func:Qp,args:[Ue],thisArg:t}),new ll(he,this.__chain__).thru(function(Je){return T&&!Je.length&&Je.push(t),Je}))});function Pf(){return Ag(this)}function pl(){return new ll(this.value(),this.__chain__)}function Uf(){this.__values__===t&&(this.__values__=RC(this.value()));var w=this.__index__>=this.__values__.length,T=w?t:this.__values__[this.__index__++];return{done:w,value:T}}function hg(){return this}function Yd(w){for(var T,Q=this;Q instanceof RA;){var he=W1(Q);he.__index__=0,he.__values__=t,T?Ue.__wrapped__=he:T=he;var Ue=he;Q=Q.__wrapped__}return Ue.__wrapped__=w,T}function H1(){var w=this.__wrapped__;if(w instanceof br){var T=w;return this.__actions__.length&&(T=new br(this)),T=T.reverse(),T.__actions__.push({func:Qp,args:[Rf],thisArg:t}),new ll(T,this.__chain__)}return this.thru(Rf)}function Iv(){return wt(this.__wrapped__,this.__actions__)}var xC=mc(function(w,T,Q){Br.call(w,Q)?++w[Q]:Ku(w,Q,1)});function qd(w,T,Q){var he=vr(w)?Ap:io;return Q&&gu(w,T,Q)&&(T=t),he(w,tr(T,3))}function Ua(w,T){var Q=vr(w)?$a:Sf;return Q(w,tr(T,3))}var vc=Hs(Tf),kv=Hs(q1);function bc(w,T){return Pa(D0(w,T),1)}function Z1(w,T){return Pa(D0(w,T),qe)}function qp(w,T,Q){return Q=Q===t?1:ur(Q),Pa(D0(w,T),Q)}function Tv(w,T){var Q=vr(w)?jl:FA;return Q(w,tr(T,3))}function Vd(w,T){var Q=vr(w)?wo:Lc;return Q(w,tr(T,3))}var X1=mc(function(w,T,Q){Br.call(w,Q)?w[Q].push(T):Ku(w,Q,[T])});function Rv(w,T,Q,he){w=Cu(w)?w:Se(w),Q=Q&&!he?ur(Q):0;var Ue=w.length;return Q<0&&(Q=Is(Ue+Q,0)),Mg(w)?Q<=Ue&&w.indexOf(T,Q)>-1:!!Ue&&ah(w,T,Q)>-1}var dg=U(function(w,T,Q){var he=-1,Ue=typeof T=="function",Je=Cu(w)?Pt(w.length):[];return FA(w,function(mt){Je[++he]=Ue?rs(T,mt,Q):jc(mt,T,Q)}),Je}),MC=mc(function(w,T,Q){Ku(w,Q,T)});function D0(w,T){var Q=vr(w)?To:vh;return Q(w,tr(T,3))}function wC(w,T,Q,he){return w==null?[]:(vr(T)||(T=T==null?[]:[T]),Q=he?t:Q,vr(Q)||(Q=Q==null?[]:[Q]),jd(w,T,Q))}var SC=mc(function(w,T,Q){w[Q?0:1].push(T)},function(){return[[],[]]});function J1(w,T,Q){var he=vr(w)?hp:xA,Ue=arguments.length<3;return he(w,tr(T,4),Q,Ue,FA)}function Dv(w,T,Q){var he=vr(w)?E1:xA,Ue=arguments.length<3;return he(w,tr(T,4),Q,Ue,Lc)}function t2(w,T){var Q=vr(w)?$a:Sf;return Q(w,L0(tr(T,3)))}function n2(w){var T=vr(w)?Kd:N;return T(w)}function EC(w,T,Q){(Q?gu(w,T,Q):T===t)?T=1:T=ur(T);var he=vr(w)?Ep:Y;return he(w,T)}function ey(w){var T=vr(w)?LA:pe;return T(w)}function Pv(w){if(w==null)return 0;if(Cu(w))return Mg(w)?Gh(w):w.length;var T=mu(w);return T==Ct||T==Ln?w.size:uA(w).length}function pA(w,T,Q){var he=vr(w)?Dm:Fe;return Q&&gu(w,T,Q)&&(T=t),he(w,tr(T,3))}var Kf=U(function(w,T){if(w==null)return[];var Q=T.length;return Q>1&&gu(w,T[0],T[1])?T=[]:Q>2&&gu(T[0],T[1],T[2])&&(T=[T[0]]),jd(w,Pa(T,1),[])}),sd=$m||function(){return Ei.Date.now()};function P0(w,T){if(typeof T!="function")throw new Gl(s);return w=ur(w),function(){if(--w<1)return T.apply(this,arguments)}}function fg(w,T,Q){return T=Q?t:T,T=w&&T==null?w.length:T,Xs(w,G,t,t,t,t,T)}function Uv(w,T){var Q;if(typeof T!="function")throw new Gl(s);return w=ur(w),function(){return--w>0&&(Q=T.apply(this,arguments)),w<=1&&(T=t),Q}}var ty=U(function(w,T,Q){var he=F;if(Q.length){var Ue=lh(Q,ba(ty));he|=X}return Xs(w,he,T,Q,Ue)}),ny=U(function(w,T,Q){var he=F|W;if(Q.length){var Ue=lh(Q,ba(ny));he|=X}return Xs(T,he,w,Q,Ue)});function pg(w,T,Q){T=Q?t:T;var he=Xs(w,V,t,t,t,t,t,T);return he.placeholder=pg.placeholder,he}function Kv(w,T,Q){T=Q?t:T;var he=Xs(w,H,t,t,t,t,t,T);return he.placeholder=Kv.placeholder,he}function iy(w,T,Q){var he,Ue,Je,mt,Bt,zt,Mn=0,wn=!1,Pn=!1,hi=!0;if(typeof w!="function")throw new Gl(s);T=Wu(T)||0,ta(Q)&&(wn=!!Q.leading,Pn="maxWait"in Q,Je=Pn?Is(Wu(Q.maxWait)||0,T):Je,hi="trailing"in Q?!!Q.trailing:hi);function Hi(xu){var tm=he,V0=Ue;return he=Ue=t,Mn=xu,mt=w.apply(V0,tm),mt}function Cr(xu){return Mn=xu,Bt=B0(Bo,T),wn?Hi(xu):mt}function ho(xu){var tm=xu-zt,V0=xu-Mn,FK=T-tm;return Pn?Vs(FK,Je-V0):FK}function _r(xu){var tm=xu-zt,V0=xu-Mn;return zt===t||tm>=T||tm<0||Pn&&V0>=Je}function Bo(){var xu=sd();if(_r(xu))return Wo(xu);Bt=B0(Bo,ho(xu))}function Wo(xu){return Bt=t,hi&&he?Hi(xu):(he=Ue=t,mt)}function Jd(){Bt!==t&&ti(Bt),Mn=0,he=zt=Ue=Bt=t}function Bh(){return Bt===t?mt:Wo(sd())}function ef(){var xu=sd(),tm=_r(xu);if(he=arguments,Ue=this,zt=xu,tm){if(Bt===t)return Cr(zt);if(Pn)return ti(Bt),Bt=B0(Bo,T),Hi(zt)}return Bt===t&&(Bt=B0(Bo,T)),mt}return ef.cancel=Jd,ef.flush=Bh,ef}var Xo=U(function(w,T){return Xm(w,1,T)}),U0=U(function(w,T,Q){return Xm(w,Wu(T)||0,Q)});function Lv(w){return Xs(w,ue)}function K0(w,T){if(typeof w!="function"||T!=null&&typeof T!="function")throw new Gl(s);var Q=function(){var he=arguments,Ue=T?T.apply(this,he):he[0],Je=Q.cache;if(Je.has(Ue))return Je.get(Ue);var mt=w.apply(this,he);return Q.cache=Je.set(Ue,mt)||Je,mt};return Q.cache=new(K0.Cache||Uc),Q}K0.Cache=Uc;function L0(w){if(typeof w!="function")throw new Gl(s);return function(){var T=arguments;switch(T.length){case 0:return!w.call(this);case 1:return!w.call(this,T[0]);case 2:return!w.call(this,T[0],T[1]);case 3:return!w.call(this,T[0],T[1],T[2])}return!w.apply(this,T)}}function i2(w){return Uv(2,w)}var r2=In(function(w,T){T=T.length==1&&vr(T[0])?To(T[0],ac(tr())):To(Pa(T,1),ac(tr()));var Q=T.length;return U(function(he){for(var Ue=-1,Je=Vs(he.length,Q);++Ue<Je;)he[Ue]=T[Ue].call(this,he[Ue]);return rs(w,this,he)})}),mg=U(function(w,T){var Q=lh(T,ba(mg));return Xs(w,X,t,T,Q)}),Vp=U(function(w,T){var Q=lh(T,ba(Vp));return Xs(w,Z,t,T,Q)}),Fv=_h(function(w,T){return Xs(w,oe,t,t,t,T)});function F0(w,T){if(typeof w!="function")throw new Gl(s);return T=T===t?T:ur(T),U(w,T)}function ry(w,T){if(typeof w!="function")throw new Gl(s);return T=T==null?0:Is(ur(T),0),U(function(Q){var he=Q[T],Ue=sn(Q,0,T);return he&&Nl(Ue,he),rs(w,this,Ue)})}function Gu(w,T,Q){var he=!0,Ue=!0;if(typeof w!="function")throw new Gl(s);return ta(Q)&&(he="leading"in Q?!!Q.leading:he,Ue="trailing"in Q?!!Q.trailing:Ue),iy(w,T,{leading:he,maxWait:T,trailing:Ue})}function bu(w){return fg(w,1)}function gg(w,T){return mg(qt(T),w)}function zv(){if(!arguments.length)return[];var w=arguments[0];return vr(w)?w:[w]}function BC(w){return ul(w,E)}function z0(w,T){return T=typeof T=="function"?T:t,ul(w,E,T)}function oy(w){return ul(w,v|E)}function OC(w,T){return T=typeof T=="function"?T:t,ul(w,v|E,T)}function jv(w,T){return T==null||mh(w,T,Xa(T))}function Cc(w,T){return w===T||w!==w&&T!==T}var $p=AA(Ef),Nv=AA(function(w,T){return w>=T}),Lf=Fu((function(){return arguments})())?Fu:function(w){return na(w)&&Br.call(w,"callee")&&!kd.call(w,"callee")},vr=Pt.isArray,sy=Hr?ac(Hr):ya;function Cu(w){return w!=null&&G0(w.length)&&!Qc(w)}function Ka(w){return na(w)&&Cu(w)}function j0(w){return w===!0||w===!1||na(w)&&ga(w)==Ke}var Ff=Hh||Xt,IC=Ys?ac(Ys):pc;function so(w){return na(w)&&w.nodeType===1&&!Sh(w)}function Gv(w){if(w==null)return!0;if(Cu(w)&&(vr(w)||typeof w=="string"||typeof w.splice=="function"||Ff(w)||$d(w)||Lf(w)))return!w.length;var T=mu(w);if(T==Ct||T==Ln)return!w.size;if(Al(w))return!uA(w).length;for(var Q in w)if(Br.call(w,Q))return!1;return!0}function yg(w,T){return Zr(w,T)}function ad(w,T,Q){Q=typeof Q=="function"?Q:t;var he=Q?Q(w,T):t;return he===t?Zr(w,T,t,Q):!!he}function N0(w){if(!na(w))return!1;var T=ga(w);return T==Ve||T==Be||typeof w.message=="string"&&typeof w.name=="string"&&!Sh(w)}function ay(w){return typeof w=="number"&&Bl(w)}function Qc(w){if(!ta(w))return!1;var T=ga(w);return T==yt||T==ft||T==Kt||T==Wn}function vg(w){return typeof w=="number"&&w==ur(w)}function G0(w){return typeof w=="number"&&w>-1&&w%1==0&&w<=At}function ta(w){var T=typeof w;return w!=null&&(T=="object"||T=="function")}function na(w){return w!=null&&typeof w=="object"}var Wv=Zo?ac(Zo):zo;function bg(w,T){return w===T||ss(w,T,U1(T))}function Qv(w,T,Q){return Q=typeof Q=="function"?Q:t,ss(w,T,U1(T),Q)}function Jo(w){return Hp(w)&&w!=+w}function ly(w){if(Lp(w))throw new gr(o);return ed(w)}function cs(w){return w===null}function Cg(w){return w==null}function Hp(w){return typeof w=="number"||na(w)&&ga(w)==Lt}function Sh(w){if(!na(w)||ga(w)!=an)return!1;var T=lu(w);if(T===null)return!0;var Q=Br.call(T,"constructor")&&T.constructor;return typeof Q=="function"&&Q instanceof Q&&uh.call(Q)==BA}var _g=qs?ac(qs):td;function uy(w){return vg(w)&&w>=-At&&w<=At}var xg=su?ac(su):du;function Mg(w){return typeof w=="string"||!vr(w)&&na(w)&&ga(w)==Un}function Yc(w){return typeof w=="symbol"||na(w)&&ga(w)==xn}var $d=Lo?ac(Lo):Fd;function ld(w){return w===t}function kC(w){return na(w)&&mu(w)==Rn}function Yv(w){return na(w)&&ga(w)==Ot}var TC=AA(ys),qv=AA(function(w,T){return w<=T});function RC(w){if(!w)return[];if(Cu(w))return Mg(w)?Bs(w):oo(w);if(El&&w[El])return MA(w[El]());var T=mu(w),Q=T==Ct?jm:T==Ln?Nm:Se;return Q(w)}function Hd(w){if(!w)return w===0?w:0;if(w=Wu(w),w===qe||w===-qe){var T=w<0?-1:1;return T*gt}return w===w?w:0}function ur(w){var T=Hd(w),Q=T%1;return T===T?Q?T-Q:T:0}function cy(w){return w?dc(ur(w),0,Re):0}function Wu(w){if(typeof w=="number")return w;if(Yc(w))return Le;if(ta(w)){var T=typeof w.valueOf=="function"?w.valueOf():w;w=ta(T)?T+"":T}if(typeof w!="string")return w===0?w:+w;w=sc(w);var Q=nA.test(w);return Q||qi.test(w)?nn(w.slice(2),Q?2:8):wl.test(w)?Le:+w}function W0(w){return bs(w,Hl(w))}function Ay(w){return w?dc(ur(w),-At,At):w===0?w:0}function Eo(w){return w==null?"":lt(w)}var Q0=zu(function(w,T){if(Al(T)||Cu(T)){bs(T,Xa(T),w);return}for(var Q in T)Br.call(T,Q)&&hc(w,Q,T[Q])}),hy=zu(function(w,T){bs(T,Hl(T),w)}),wg=zu(function(w,T,Q,he){bs(T,Hl(T),w,he)}),o2=zu(function(w,T,Q,he){bs(T,Xa(T),w,he)}),_u=_h(Ld);function ml(w,T){var Q=lc(w);return T==null?Q:Bp(Q,T)}var dy=U(function(w,T){w=Fo(w);var Q=-1,he=T.length,Ue=he>2?T[2]:t;for(Ue&&gu(T[0],T[1],Ue)&&(he=1);++Q<he;)for(var Je=T[Q],mt=Hl(Je),Bt=-1,zt=mt.length;++Bt<zt;){var Mn=mt[Bt],wn=w[Mn];(wn===t||Cc(wn,Rc[Mn])&&!Br.call(w,Mn))&&(w[Mn]=Je[Mn])}return w}),Vv=U(function(w){return w.push(t,If),rs(Sg,t,w)});function $v(w,T){return _f(w,tr(T,3),zc)}function Zp(w,T){return _f(w,tr(T,3),Lu)}function VA(w,T){return w==null?w:yh(w,tr(T,3),Hl)}function Hv(w,T){return w==null?w:Jh(w,tr(T,3),Hl)}function Y0(w,T){return w&&zc(w,tr(T,3))}function Zd(w,T){return w&&Lu(w,tr(T,3))}function DC(w){return w==null?[]:Au(w,Xa(w))}function Zv(w){return w==null?[]:Au(w,Hl(w))}function ud(w,T,Q){var he=w==null?t:ni(w,T);return he===t?Q:he}function Xv(w,T){return w!=null&&w0(w,T,Il)}function Xp(w,T){return w!=null&&w0(w,T,os)}var Jv=Ro(function(w,T,Q){T!=null&&typeof T.toString!="function"&&(T=Wl.call(T)),w[T]=Q},ra(bl)),PC=Ro(function(w,T,Q){T!=null&&typeof T.toString!="function"&&(T=Wl.call(T)),Br.call(w,T)?w[T].push(Q):w[T]=[Q]},tr),eb=U(jc);function Xa(w){return Cu(w)?Sp(w):uA(w)}function Hl(w){return Cu(w)?Sp(w,!0):Ip(w)}function tb(w,T){var Q={};return T=tr(T,3),zc(w,function(he,Ue,Je){Ku(Q,T(he,Ue,Je),he)}),Q}function fy(w,T){var Q={};return T=tr(T,3),zc(w,function(he,Ue,Je){Ku(Q,Ue,T(he,Ue,Je))}),Q}var zf=zu(function(w,T,Q){nd(w,T,Q)}),Sg=zu(function(w,T,Q,he){nd(w,T,Q,he)}),f=_h(function(w,T){var Q={};if(w==null)return Q;var he=!1;T=To(T,function(Je){return Je=gn(Je,w),he||(he=Je.length>1),Je}),bs(w,_0(w),Q),he&&(Q=ul(Q,v|x|E,pC));for(var Ue=T.length;Ue--;)ht(Q,T[Ue]);return Q});function u(w,T){return b(w,L0(tr(T)))}var d=_h(function(w,T){return w==null?{}:Of(w,T)});function b(w,T){if(w==null)return{};var Q=To(_0(w),function(he){return[he]});return T=tr(T),cl(w,Q,function(he,Ue){return T(he,Ue[0])})}function M(w,T,Q){T=gn(T,w);var he=-1,Ue=T.length;for(Ue||(Ue=1,w=t);++he<Ue;){var Je=w==null?t:w[hl(T[he])];Je===t&&(he=Ue,Je=Q),w=Qc(Je)?Je.call(w):Je}return w}function k(w,T,Q){return w==null?w:re(w,T,Q)}function R(w,T,Q,he){return he=typeof he=="function"?he:t,w==null?w:re(w,T,Q,he)}var K=Pp(Xa),z=Pp(Hl);function ee(w,T,Q){var he=vr(w),Ue=he||Ff(w)||$d(w);if(T=tr(T,4),Q==null){var Je=w&&w.constructor;Ue?Q=he?new Je:[]:ta(w)?Q=Qc(Je)?lc(lu(w)):{}:Q={}}return(Ue?jl:zc)(w,function(mt,Bt,zt){return T(Q,mt,Bt,zt)}),Q}function ne(w,T){return w==null?!0:ht(w,T)}function ce(w,T,Q){return w==null?w:bt(w,T,qt(Q))}function _e(w,T,Q,he){return he=typeof he=="function"?he:t,w==null?w:bt(w,T,qt(Q),he)}function Se(w){return w==null?[]:Lm(w,Xa(w))}function ke(w){return w==null?[]:Lm(w,Hl(w))}function ze(w,T,Q){return Q===t&&(Q=T,T=t),Q!==t&&(Q=Wu(Q),Q=Q===Q?Q:0),T!==t&&(T=Wu(T),T=T===T?T:0),dc(Wu(w),T,Q)}function $e(w,T,Q){return T=Hd(T),Q===t?(Q=T,T=0):Q=Hd(Q),w=Wu(w),zA(w,T,Q)}function it(w,T,Q){if(Q&&typeof Q!="boolean"&&gu(w,T,Q)&&(T=Q=t),Q===t&&(typeof T=="boolean"?(Q=T,T=t):typeof w=="boolean"&&(Q=w,w=t)),w===t&&T===t?(w=0,T=1):(w=Hd(w),T===t?(T=w,w=0):T=Hd(T)),w>T){var he=w;w=T,T=he}if(Q||w%1||T%1){var Ue=Dc();return Vs(w+Ue*(T-w+fn("1e-"+((Ue+"").length-1))),T)}return C(w,T)}var Et=fu(function(w,T,Q){return T=T.toLowerCase(),w+(Q?ut(T):T)});function ut(w){return Fa(Eo(w).toLowerCase())}function pt(w){return w=Eo(w),w&&w.replace(no,Id).replace(yo,"")}function Gt(w,T,Q){w=Eo(w),T=lt(T);var he=w.length;Q=Q===t?he:dc(ur(Q),0,he);var Ue=Q;return Q-=T.length,Q>=0&&w.slice(Q,Ue)==T}function Jt(w){return w=Eo(w),w&&Xn.test(w)?w.replace(tn,m0):w}function mn(w){return w=Eo(w),w&&ki.test(w)?w.replace(Ji,"\\$&"):w}var Nn=fu(function(w,T,Q){return w+(Q?"-":"")+T.toLowerCase()}),Tn=fu(function(w,T,Q){return w+(Q?" ":"")+T.toLowerCase()}),zn=kl("toLowerCase");function bi(w,T,Q){w=Eo(w),T=ur(T);var he=T?Gh(w):0;if(!T||he>=T)return w;var Ue=(T-he)/2;return Ch(Rd(Ue),Q)+w+Ch(Td(Ue),Q)}function jn(w,T,Q){w=Eo(w),T=ur(T);var he=T?Gh(w):0;return T&&he<T?w+Ch(T-he,Q):w}function Kn(w,T,Q){w=Eo(w),T=ur(T);var he=T?Gh(w):0;return T&&he<T?Ch(T-he,Q)+w:w}function un(w,T,Q){return Q||T==null?T=0:T&&(T=+T),sl(Eo(w).replace(Ri,""),T||0)}function Gi(w,T,Q){return(Q?gu(w,T,Q):T===t)?T=1:T=ur(T),O(Eo(w),T)}function Xi(){var w=arguments,T=Eo(w[0]);return w.length<3?T:T.replace(w[1],w[2])}var Oi=fu(function(w,T,Q){return w+(Q?"_":"")+T.toLowerCase()});function si(w,T,Q){return Q&&typeof Q!="number"&&gu(w,T,Q)&&(T=Q=t),Q=Q===t?Re:Q>>>0,Q?(w=Eo(w),w&&(typeof T=="string"||T!=null&&!_g(T))&&(T=lt(T),!T&&Nh(w))?sn(Bs(w),0,Q):w.split(T,Q)):[]}var Or=fu(function(w,T,Q){return w+(Q?" ":"")+Fa(T)});function Fs(w,T,Q){return w=Eo(w),Q=Q==null?0:dc(ur(Q),0,w.length),T=lt(T),w.slice(Q,Q+T.length)==T}function _a(w,T,Q){var he=Qe.templateSettings;Q&&gu(w,T,Q)&&(T=t),w=Eo(w),T=wg({},T,he,WA);var Ue=wg({},T.imports,he.imports,WA),Je=Xa(Ue),mt=Lm(Ue,Je),Bt,zt,Mn=0,wn=T.interpolate||Ls,Pn="__p += '",hi=bp((T.escape||Ls).source+"|"+wn.source+"|"+(wn===Fn?zi:Ls).source+"|"+(T.evaluate||Ls).source+"|$","g"),Hi="//# sourceURL="+(Br.call(T,"sourceURL")?(T.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Ta+"]")+`
`;w.replace(hi,function(_r,Bo,Wo,Jd,Bh,ef){return Wo||(Wo=Jd),Pn+=w.slice(Mn,ef).replace(rl,yp),Bo&&(Bt=!0,Pn+=`' +
__e(`+Bo+`) +
'`),Bh&&(zt=!0,Pn+=`';
`+Bh+`;
__p += '`),Wo&&(Pn+=`' +
((__t = (`+Wo+`)) == null ? '' : __t) +
'`),Mn=ef+_r.length,_r}),Pn+=`';
`;var Cr=Br.call(T,"variable")&&T.variable;if(!Cr)Pn=`with (obj) {
`+Pn+`
}
`;else if(Ur.test(Cr))throw new gr(a);Pn=(zt?Pn.replace(y,""):Pn).replace(ot,"$1").replace(Dt,"$1;"),Pn="function("+(Cr||"obj")+`) {
`+(Cr?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Bt?", __e = _.escape":"")+(zt?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Pn+`return __p
}`;var ho=za(function(){return Wr(Je,Hi+"return "+Pn).apply(t,mt)});if(ho.source=Pn,N0(ho))throw ho;return ho}function ia(w){return Eo(w).toLowerCase()}function gl(w){return Eo(w).toUpperCase()}function La(w,T,Q){if(w=Eo(w),w&&(Q||T===t))return sc(w);if(!w||!(T=lt(T)))return w;var he=Bs(w),Ue=Bs(T),Je=Fm(he,Ue),mt=gp(he,Ue)+1;return sn(he,Je,mt).join("")}function xa(w,T,Q){if(w=Eo(w),w&&(Q||T===t))return w.slice(0,wA(w)+1);if(!w||!(T=lt(T)))return w;var he=Bs(w),Ue=gp(he,Bs(T))+1;return sn(he,0,Ue).join("")}function es(w,T,Q){if(w=Eo(w),w&&(Q||T===t))return w.replace(Ri,"");if(!w||!(T=lt(T)))return w;var he=Bs(w),Ue=Fm(he,Bs(T));return sn(he,Ue).join("")}function Ts(w,T){var Q=xe,he=me;if(ta(T)){var Ue="separator"in T?T.separator:Ue;Q="length"in T?ur(T.length):Q,he="omission"in T?lt(T.omission):he}w=Eo(w);var Je=w.length;if(Nh(w)){var mt=Bs(w);Je=mt.length}if(Q>=Je)return w;var Bt=Q-Gh(he);if(Bt<1)return he;var zt=mt?sn(mt,0,Bt).join(""):w.slice(0,Bt);if(Ue===t)return zt+he;if(mt&&(Bt+=zt.length-Bt),_g(Ue)){if(w.slice(Bt).search(Ue)){var Mn,wn=zt;for(Ue.global||(Ue=bp(Ue.source,Eo(oi.exec(Ue))+"g")),Ue.lastIndex=0;Mn=Ue.exec(wn);)var Pn=Mn.index;zt=zt.slice(0,Pn===t?Bt:Pn)}}else if(w.indexOf(lt(Ue),Bt)!=Bt){var hi=zt.lastIndexOf(Ue);hi>-1&&(zt=zt.slice(0,hi))}return zt+he}function Tl(w){return w=Eo(w),w&&dt.test(w)?w.replace(xt,SA):w}var yl=fu(function(w,T,Q){return w+(Q?" ":"")+T.toUpperCase()}),Fa=kl("toUpperCase");function qc(w,T,Q){return w=Eo(w),T=Q?t:T,T===t?zm(w)?vp(w):oA(w):w.match(T)||[]}var za=U(function(w,T){try{return rs(w,t,T)}catch(Q){return N0(Q)?Q:new gr(Q)}}),Zl=_h(function(w,T){return jl(T,function(Q){Q=hl(Q),Ku(w,Q,ty(w[Q],w))}),w});function ja(w){var T=w==null?0:w.length,Q=tr();return w=T?To(w,function(he){if(typeof he[1]!="function")throw new Gl(s);return[Q(he[0]),he[1]]}):[],U(function(he){for(var Ue=-1;++Ue<T;){var Je=w[Ue];if(rs(Je[0],this,he))return rs(Je[1],this,he)}})}function vl(w){return Op(ul(w,v))}function ra(w){return function(){return w}}function oa(w,T){return w==null||w!==w?T:w}var As=ls(),Qu=ls(!0);function bl(w){return w}function _c(w){return Nc(typeof w=="function"?w:ul(w,v))}function py(w){return jA(ul(w,v))}function Jp(w,T){return kp(w,ul(T,v))}var em=U(function(w,T){return function(Q){return jc(Q,w,T)}}),Xd=U(function(w,T){return function(Q){return jc(w,Q,T)}});function A(w,T,Q){var he=Xa(T),Ue=Au(T,he);Q==null&&!(ta(T)&&(Ue.length||!he.length))&&(Q=T,T=w,w=this,Ue=Au(T,Xa(T)));var Je=!(ta(Q)&&"chain"in Q)||!!Q.chain,mt=Qc(w);return jl(Ue,function(Bt){var zt=T[Bt];w[Bt]=zt,mt&&(w.prototype[Bt]=function(){var Mn=this.__chain__;if(Je||Mn){var wn=w(this.__wrapped__),Pn=wn.__actions__=oo(this.__actions__);return Pn.push({func:zt,args:arguments,thisArg:w}),wn.__chain__=Mn,wn}return zt.apply(w,Nl([this.value()],arguments))})}),w}function g(){return Ei._===this&&(Ei._=au),this}function _(){}function I(w){return w=ur(w),U(function(T){return Bf(T,w)})}var j=cA(To),$=cA(Ap),Ce=cA(Dm);function Ye(w){return S0(w)?Bd(hl(w)):B(w)}function vt(w){return function(T){return w==null?t:ni(w,T)}}var Vt=Rp(),cn=Rp(!0);function yn(){return[]}function Xt(){return!1}function on(){return{}}function Ii(){return""}function rr(){return!0}function xs(w,T){if(w=ur(w),w<1||w>At)return[];var Q=Re,he=Vs(w,Re);T=tr(T),w-=Re;for(var Ue=zh(he,T);++Q<w;)T(Q);return Ue}function Ut(w){return vr(w)?To(w,hl):Yc(w)?[w]:oo(G1(Eo(w)))}function It(w){var T=++y0;return Eo(w)+T}var Wt=pu(function(w,T){return w+T},0),hn=Nd("ceil"),$i=pu(function(w,T){return w/T},1),Do=Nd("floor");function Di(w){return w&&w.length?Fc(w,bl,Ef):t}function Kr(w,T){return w&&w.length?Fc(w,tr(T,2),Ef):t}function ir(w){return oc(w,bl)}function Sr(w,T){return oc(w,tr(T,2))}function Vc(w){return w&&w.length?Fc(w,bl,ys):t}function Eh(w,T){return w&&w.length?Fc(w,tr(T,2),ys):t}var q0=pu(function(w,T){return w*T},1),jf=Nd("round"),Loe=pu(function(w,T){return w-T},0);function Foe(w){return w&&w.length?pp(w,bl):0}function zoe(w,T){return w&&w.length?pp(w,tr(T,2)):0}return Qe.after=P0,Qe.ary=fg,Qe.assign=Q0,Qe.assignIn=hy,Qe.assignInWith=wg,Qe.assignWith=o2,Qe.at=_u,Qe.before=Uv,Qe.bind=ty,Qe.bindAll=Zl,Qe.bindKey=ny,Qe.castArray=zv,Qe.chain=Ag,Qe.chunk=gC,Qe.compact=Cv,Qe.concat=_v,Qe.cond=ja,Qe.conforms=vl,Qe.constant=ra,Qe.countBy=xC,Qe.create=ml,Qe.curry=pg,Qe.curryRight=Kv,Qe.debounce=iy,Qe.defaults=dy,Qe.defaultsDeep=Vv,Qe.defer=Xo,Qe.delay=U0,Qe.difference=Q1,Qe.differenceBy=yC,Qe.differenceWith=Mh,Qe.drop=fl,Qe.dropRight=Y1,Qe.dropRightWhile=rg,Qe.dropWhile=$l,Qe.fill=Ca,Qe.filter=Ua,Qe.flatMap=bc,Qe.flatMapDeep=Z1,Qe.flatMapDepth=qp,Qe.flatten=_s,Qe.flattenDeep=yu,Qe.flattenDepth=dA,Qe.flip=Lv,Qe.flow=As,Qe.flowRight=Qu,Qe.fromPairs=xv,Qe.functions=DC,Qe.functionsIn=Zv,Qe.groupBy=X1,Qe.initial=Mv,Qe.intersection=Wd,Qe.intersectionBy=vu,Qe.intersectionWith=ju,Qe.invert=Jv,Qe.invertBy=PC,Qe.invokeMap=dg,Qe.iteratee=_c,Qe.keyBy=MC,Qe.keys=Xa,Qe.keysIn=Hl,Qe.map=D0,Qe.mapKeys=tb,Qe.mapValues=fy,Qe.matches=py,Qe.matchesProperty=Jp,Qe.memoize=K0,Qe.merge=zf,Qe.mergeWith=Sg,Qe.method=em,Qe.methodOf=Xd,Qe.mixin=A,Qe.negate=L0,Qe.nthArg=I,Qe.omit=f,Qe.omitBy=u,Qe.once=i2,Qe.orderBy=wC,Qe.over=j,Qe.overArgs=r2,Qe.overEvery=$,Qe.overSome=Ce,Qe.partial=mg,Qe.partialRight=Vp,Qe.partition=SC,Qe.pick=d,Qe.pickBy=b,Qe.property=Ye,Qe.propertyOf=vt,Qe.pull=jp,Qe.pullAll=wh,Qe.pullAllBy=Np,Qe.pullAllWith=O0,Qe.pullAt=qA,Qe.range=Vt,Qe.rangeRight=cn,Qe.rearg=Fv,Qe.reject=t2,Qe.remove=Sv,Qe.rest=F0,Qe.reverse=Rf,Qe.sampleSize=EC,Qe.set=k,Qe.setWith=R,Qe.shuffle=ey,Qe.slice=I0,Qe.sortBy=Kf,Qe.sortedUniq=R0,Qe.sortedUniqBy=CC,Qe.split=si,Qe.spread=ry,Qe.tail=_C,Qe.take=e2,Qe.takeRight=So,Qe.takeRightWhile=Go,Qe.takeWhile=Qr,Qe.tap=Ov,Qe.throttle=Gu,Qe.thru=Qp,Qe.toArray=RC,Qe.toPairs=K,Qe.toPairsIn=z,Qe.toPath=Ut,Qe.toPlainObject=W0,Qe.transform=ee,Qe.unary=bu,Qe.union=Ao,Qe.unionBy=us,Qe.unionWith=Wc,Qe.uniq=Qd,Qe.uniqBy=lg,Qe.uniqWith=Ev,Qe.unset=ne,Qe.unzip=yc,Qe.unzipWith=la,Qe.update=ce,Qe.updateWith=_e,Qe.values=Se,Qe.valuesIn=ke,Qe.without=Df,Qe.words=qc,Qe.wrap=gg,Qe.xor=Wp,Qe.xorBy=Bv,Qe.xorWith=fA,Qe.zip=ug,Qe.zipObject=cg,Qe.zipObjectDeep=Nu,Qe.zipWith=$1,Qe.entries=K,Qe.entriesIn=z,Qe.extend=hy,Qe.extendWith=wg,A(Qe,Qe),Qe.add=Wt,Qe.attempt=za,Qe.camelCase=Et,Qe.capitalize=ut,Qe.ceil=hn,Qe.clamp=ze,Qe.clone=BC,Qe.cloneDeep=oy,Qe.cloneDeepWith=OC,Qe.cloneWith=z0,Qe.conformsTo=jv,Qe.deburr=pt,Qe.defaultTo=oa,Qe.divide=$i,Qe.endsWith=Gt,Qe.eq=Cc,Qe.escape=Jt,Qe.escapeRegExp=mn,Qe.every=qd,Qe.find=vc,Qe.findIndex=Tf,Qe.findKey=$v,Qe.findLast=kv,Qe.findLastIndex=q1,Qe.findLastKey=Zp,Qe.floor=Do,Qe.forEach=Tv,Qe.forEachRight=Vd,Qe.forIn=VA,Qe.forInRight=Hv,Qe.forOwn=Y0,Qe.forOwnRight=Zd,Qe.get=ud,Qe.gt=$p,Qe.gte=Nv,Qe.has=Xv,Qe.hasIn=Xp,Qe.head=V1,Qe.identity=bl,Qe.includes=Rv,Qe.indexOf=og,Qe.inRange=$e,Qe.invoke=eb,Qe.isArguments=Lf,Qe.isArray=vr,Qe.isArrayBuffer=sy,Qe.isArrayLike=Cu,Qe.isArrayLikeObject=Ka,Qe.isBoolean=j0,Qe.isBuffer=Ff,Qe.isDate=IC,Qe.isElement=so,Qe.isEmpty=Gv,Qe.isEqual=yg,Qe.isEqualWith=ad,Qe.isError=N0,Qe.isFinite=ay,Qe.isFunction=Qc,Qe.isInteger=vg,Qe.isLength=G0,Qe.isMap=Wv,Qe.isMatch=bg,Qe.isMatchWith=Qv,Qe.isNaN=Jo,Qe.isNative=ly,Qe.isNil=Cg,Qe.isNull=cs,Qe.isNumber=Hp,Qe.isObject=ta,Qe.isObjectLike=na,Qe.isPlainObject=Sh,Qe.isRegExp=_g,Qe.isSafeInteger=uy,Qe.isSet=xg,Qe.isString=Mg,Qe.isSymbol=Yc,Qe.isTypedArray=$d,Qe.isUndefined=ld,Qe.isWeakMap=kC,Qe.isWeakSet=Yv,Qe.join=sg,Qe.kebabCase=Nn,Qe.last=ea,Qe.lastIndexOf=wv,Qe.lowerCase=Tn,Qe.lowerFirst=zn,Qe.lt=TC,Qe.lte=qv,Qe.max=Di,Qe.maxBy=Kr,Qe.mean=ir,Qe.meanBy=Sr,Qe.min=Vc,Qe.minBy=Eh,Qe.stubArray=yn,Qe.stubFalse=Xt,Qe.stubObject=on,Qe.stubString=Ii,Qe.stubTrue=rr,Qe.multiply=q0,Qe.nth=gc,Qe.noConflict=g,Qe.noop=_,Qe.now=sd,Qe.pad=bi,Qe.padEnd=jn,Qe.padStart=Kn,Qe.parseInt=un,Qe.random=it,Qe.reduce=J1,Qe.reduceRight=Dv,Qe.repeat=Gi,Qe.replace=Xi,Qe.result=M,Qe.round=jf,Qe.runInContext=Rt,Qe.sample=n2,Qe.size=Pv,Qe.snakeCase=Oi,Qe.some=pA,Qe.sortedIndex=k0,Qe.sortedIndexBy=ag,Qe.sortedIndexOf=vC,Qe.sortedLastIndex=Gp,Qe.sortedLastIndexBy=T0,Qe.sortedLastIndexOf=bC,Qe.startCase=Or,Qe.startsWith=Fs,Qe.subtract=Loe,Qe.sum=Foe,Qe.sumBy=zoe,Qe.template=_a,Qe.times=xs,Qe.toFinite=Hd,Qe.toInteger=ur,Qe.toLength=cy,Qe.toLower=ia,Qe.toNumber=Wu,Qe.toSafeInteger=Ay,Qe.toString=Eo,Qe.toUpper=gl,Qe.trim=La,Qe.trimEnd=xa,Qe.trimStart=es,Qe.truncate=Ts,Qe.unescape=Tl,Qe.uniqueId=It,Qe.upperCase=yl,Qe.upperFirst=Fa,Qe.each=Tv,Qe.eachRight=Vd,Qe.first=V1,A(Qe,(function(){var w={};return zc(Qe,function(T,Q){Br.call(Qe.prototype,Q)||(w[Q]=T)}),w})(),{chain:!1}),Qe.VERSION=i,jl(["bind","bindKey","curry","curryRight","partial","partialRight"],function(w){Qe[w].placeholder=Qe}),jl(["drop","take"],function(w,T){br.prototype[w]=function(Q){Q=Q===t?1:Is(ur(Q),0);var he=this.__filtered__&&!T?new br(this):this.clone();return he.__filtered__?he.__takeCount__=Vs(Q,he.__takeCount__):he.__views__.push({size:Vs(Q,Re),type:w+(he.__dir__<0?"Right":"")}),he},br.prototype[w+"Right"]=function(Q){return this.reverse()[w](Q).reverse()}}),jl(["filter","map","takeWhile"],function(w,T){var Q=T+1,he=Q==Te||Q==Ee;br.prototype[w]=function(Ue){var Je=this.clone();return Je.__iteratees__.push({iteratee:tr(Ue,3),type:Q}),Je.__filtered__=Je.__filtered__||he,Je}}),jl(["head","last"],function(w,T){var Q="take"+(T?"Right":"");br.prototype[w]=function(){return this[Q](1).value()[0]}}),jl(["initial","tail"],function(w,T){var Q="drop"+(T?"":"Right");br.prototype[w]=function(){return this.__filtered__?new br(this):this[Q](1)}}),br.prototype.compact=function(){return this.filter(bl)},br.prototype.find=function(w){return this.filter(w).head()},br.prototype.findLast=function(w){return this.reverse().find(w)},br.prototype.invokeMap=U(function(w,T){return typeof w=="function"?new br(this):this.map(function(Q){return jc(Q,w,T)})}),br.prototype.reject=function(w){return this.filter(L0(tr(w)))},br.prototype.slice=function(w,T){w=ur(w);var Q=this;return Q.__filtered__&&(w>0||T<0)?new br(Q):(w<0?Q=Q.takeRight(-w):w&&(Q=Q.drop(w)),T!==t&&(T=ur(T),Q=T<0?Q.dropRight(-T):Q.take(T-w)),Q)},br.prototype.takeRightWhile=function(w){return this.reverse().takeWhile(w).reverse()},br.prototype.toArray=function(){return this.take(Re)},zc(br.prototype,function(w,T){var Q=/^(?:filter|find|map|reject)|While$/.test(T),he=/^(?:head|last)$/.test(T),Ue=Qe[he?"take"+(T=="last"?"Right":""):T],Je=he||/^find/.test(T);Ue&&(Qe.prototype[T]=function(){var mt=this.__wrapped__,Bt=he?[1]:arguments,zt=mt instanceof br,Mn=Bt[0],wn=zt||vr(mt),Pn=function(Bo){var Wo=Ue.apply(Qe,Nl([Bo],Bt));return he&&hi?Wo[0]:Wo};wn&&Q&&typeof Mn=="function"&&Mn.length!=1&&(zt=wn=!1);var hi=this.__chain__,Hi=!!this.__actions__.length,Cr=Je&&!hi,ho=zt&&!Hi;if(!Je&&wn){mt=ho?mt:new br(this);var _r=w.apply(mt,Bt);return _r.__actions__.push({func:Qp,args:[Pn],thisArg:t}),new ll(_r,hi)}return Cr&&ho?w.apply(this,Bt):(_r=this.thru(Pn),Cr?he?_r.value()[0]:_r.value():_r)})}),jl(["pop","push","shift","sort","splice","unshift"],function(w){var T=Qh[w],Q=/^(?:push|sort|unshift)$/.test(w)?"tap":"thru",he=/^(?:pop|shift)$/.test(w);Qe.prototype[w]=function(){var Ue=arguments;if(he&&!this.__chain__){var Je=this.value();return T.apply(vr(Je)?Je:[],Ue)}return this[Q](function(mt){return T.apply(vr(mt)?mt:[],Ue)})}}),zc(br.prototype,function(w,T){var Q=Qe[T];if(Q){var he=Q.name+"";Br.call(bo,he)||(bo[he]=[]),bo[he].push({name:T,func:Q})}}),bo[Zs(t,W).name]=[{name:"wrapper",func:t}],br.prototype.clone=aA,br.prototype.reverse=DA,br.prototype.value=uc,Qe.prototype.at=Yp,Qe.prototype.chain=Pf,Qe.prototype.commit=pl,Qe.prototype.next=Uf,Qe.prototype.plant=Yd,Qe.prototype.reverse=H1,Qe.prototype.toJSON=Qe.prototype.valueOf=Qe.prototype.value=Iv,Qe.prototype.first=Qe.prototype.head,El&&(Qe.prototype[El]=hg),Qe}),Wh=Ym();Ar?((Ar.exports=Wh)._=Wh,li._=Wh):Ei._=Wh}).call(Rae)})(R2,R2.exports)),R2.exports}var Y4=Dae();const dT=Ou(Y4);function Pae(n,e,t){const i=e<0?n.length+e:e;if(i>=0&&i<n.length){const r=t<0?n.length+t:t,[o]=n.splice(e,1);n.splice(r,0,o)}}var pB,IL;function Uae(){if(IL)return pB;IL=1;function n(e){for(var t=5381,i=e.length;i;)t=t*33^e.charCodeAt(--i);return t>>>0}return pB=n,pB}var Kae=Uae();const kL=Ou(Kae);var uf=Uint8Array,O_=Uint16Array,Lae=Int32Array,k$=new uf([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),T$=new uf([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Fae=new uf([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),R$=function(n,e){for(var t=new O_(31),i=0;i<31;++i)t[i]=e+=1<<n[i-1];for(var r=new Lae(t[30]),i=1;i<30;++i)for(var o=t[i];o<t[i+1];++o)r[o]=o-t[i]<<5|i;return{b:t,r}},D$=R$(k$,2),P$=D$.b,zae=D$.r;P$[28]=258,zae[258]=28;var jae=R$(T$,0),Nae=jae.b,fT=new O_(32768);for(var nl=0;nl<32768;++nl){var my=(nl&43690)>>1|(nl&21845)<<1;my=(my&52428)>>2|(my&13107)<<2,my=(my&61680)>>4|(my&3855)<<4,fT[nl]=((my&65280)>>8|(my&255)<<8)>>1}var r3=(function(n,e,t){for(var i=n.length,r=0,o=new O_(e);r<i;++r)n[r]&&++o[n[r]-1];var s=new O_(e);for(r=1;r<e;++r)s[r]=s[r-1]+o[r-1]<<1;var a;if(t){a=new O_(1<<e);var c=15-e;for(r=0;r<i;++r)if(n[r])for(var h=r<<4|n[r],m=e-n[r],v=s[n[r]-1]++<<m,x=v|(1<<m)-1;v<=x;++v)a[fT[v]>>c]=h}else for(a=new O_(i),r=0;r<i;++r)n[r]&&(a[r]=fT[s[n[r]-1]++]>>15-n[r]);return a}),q4=new uf(288);for(var nl=0;nl<144;++nl)q4[nl]=8;for(var nl=144;nl<256;++nl)q4[nl]=9;for(var nl=256;nl<280;++nl)q4[nl]=7;for(var nl=280;nl<288;++nl)q4[nl]=8;var U$=new uf(32);for(var nl=0;nl<32;++nl)U$[nl]=5;var Gae=r3(q4,9,1),Wae=r3(U$,5,1),mB=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},nm=function(n,e,t){var i=e/8|0;return(n[i]|n[i+1]<<8)>>(e&7)&t},gB=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},Qae=function(n){return(n+7)/8|0},Yae=function(n,e,t){return(t==null||t>n.length)&&(t=n.length),new uf(n.subarray(e,t))},qae=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],of=function(n,e,t){var i=new Error(e||qae[n]);if(i.code=n,Error.captureStackTrace&&Error.captureStackTrace(i,of),!t)throw i;return i},eD=function(n,e,t,i){var r=n.length,o=0;if(!r||e.f&&!e.l)return t||new uf(0);var s=!t,a=s||e.i!=2,c=e.i;s&&(t=new uf(r*3));var h=function(Ve){var yt=t.length;if(Ve>yt){var ft=new uf(Math.max(yt*2,Ve));ft.set(t),t=ft}},m=e.f||0,v=e.p||0,x=e.b||0,E=e.l,D=e.d,P=e.m,F=e.n,W=r*8;do{if(!E){m=nm(n,v,1);var q=nm(n,v+1,3);if(v+=3,q)if(q==1)E=Gae,D=Wae,P=9,F=5;else if(q==2){var Z=nm(n,v,31)+257,G=nm(n,v+10,15)+4,oe=Z+nm(n,v+5,31)+1;v+=14;for(var ue=new uf(oe),xe=new uf(19),me=0;me<G;++me)xe[Fae[me]]=nm(n,v+me*3,7);v+=G*3;for(var Ie=mB(xe),Me=(1<<Ie)-1,Te=r3(xe,Ie,1),me=0;me<oe;){var je=Te[nm(n,v,Me)];v+=je&15;var V=je>>4;if(V<16)ue[me++]=V;else{var Ee=0,qe=0;for(V==16?(qe=3+nm(n,v,3),v+=2,Ee=ue[me-1]):V==17?(qe=3+nm(n,v,7),v+=3):V==18&&(qe=11+nm(n,v,127),v+=7);qe--;)ue[me++]=Ee}}var At=ue.subarray(0,Z),gt=ue.subarray(Z);P=mB(At),F=mB(gt),E=r3(At,P,1),D=r3(gt,F,1)}else of(1);else{var V=Qae(v)+4,H=n[V-4]|n[V-3]<<8,X=V+H;if(X>r){c&&of(0);break}a&&h(x+H),t.set(n.subarray(V,X),x),e.b=x+=H,e.p=v=X*8,e.f=m;continue}if(v>W){c&&of(0);break}}a&&h(x+131072);for(var Le=(1<<P)-1,Re=(1<<F)-1,Ge=v;;Ge=v){var Ee=E[gB(n,v)&Le],De=Ee>>4;if(v+=Ee&15,v>W){c&&of(0);break}if(Ee||of(2),De<256)t[x++]=De;else if(De==256){Ge=v,E=null;break}else{var _t=De-254;if(De>264){var me=De-257,at=k$[me];_t=nm(n,v,(1<<at)-1)+P$[me],v+=at}var Tt=D[gB(n,v)&Re],Kt=Tt>>4;Tt||of(3),v+=Tt&15;var gt=Nae[Kt];if(Kt>3){var at=T$[Kt];gt+=gB(n,v)&(1<<at)-1,v+=at}if(v>W){c&&of(0);break}a&&h(x+131072);var Ke=x+_t;if(x<gt){var Oe=o-gt,Be=Math.min(gt,Ke);for(Oe+x<0&&of(3);x<Be;++x)t[x]=i[Oe+x]}for(;x<Ke;++x)t[x]=t[x-gt]}}e.l=E,e.p=Ge,e.b=x,e.f=m,E&&(m=1,e.m=P,e.d=D,e.n=F)}while(!m);return x!=t.length&&s?Yae(t,0,x):t.subarray(0,x)},Vae=new uf(0),$ae=function(n){(n[0]!=31||n[1]!=139||n[2]!=8)&&of(6,"invalid gzip data");var e=n[3],t=10;e&4&&(t+=(n[10]|n[11]<<8)+2);for(var i=(e>>3&1)+(e>>4&1);i>0;i-=!n[t++]);return t+(e&2)},Hae=function(n){var e=n.length;return(n[e-4]|n[e-3]<<8|n[e-2]<<16|n[e-1]<<24)>>>0},Zae=function(n,e){return((n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31)&&of(6,"invalid zlib data"),(n[1]>>5&1)==1&&of(6,"invalid zlib data: "+(n[1]&32?"need":"unexpected")+" dictionary"),(n[1]>>3&4)+2};function Xae(n,e){return eD(n,{i:2},e,e)}function Jae(n,e){var t=$ae(n);return t+8>n.length&&of(6,"invalid gzip data"),eD(n.subarray(t,-8),{i:2},new uf(Hae(n)),e)}function ele(n,e){return eD(n.subarray(Zae(n),-4),{i:2},e,e)}function tle(n,e){return n[0]==31&&n[1]==139&&n[2]==8?Jae(n,e):(n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31?Xae(n,e):ele(n,e)}var nle=typeof TextDecoder<"u"&&new TextDecoder,ile=0;try{nle.decode(Vae,{stream:!0}),ile=1}catch{}var rle=Object.defineProperty,o3=Math.pow,ha=(n,e)=>rle(n,"name",{value:e,configurable:!0}),Xc=(n,e,t)=>new Promise((i,r)=>{var o=c=>{try{a(t.next(c))}catch(h){r(h)}},s=c=>{try{a(t.throw(c))}catch(h){r(h)}},a=c=>c.done?i(c.value):Promise.resolve(c.value).then(o,s);a((t=t.apply(n,e)).next())});ha((n,e)=>{let t=!1,i="",r=L.GridLayer.extend({createTile:ha((o,s)=>{let a=document.createElement("img"),c=new AbortController,h=c.signal;return a.cancel=()=>{c.abort()},t||(n.getHeader().then(m=>{m.tileType===1?console.error("Error: archive contains MVT vector tiles, but leafletRasterLayer is for displaying raster tiles. See https://github.com/protomaps/PMTiles/tree/main/js for details."):m.tileType===2?i="image/png":m.tileType===3?i="image/jpeg":m.tileType===4?i="image/webp":m.tileType===5&&(i="image/avif")}),t=!0),n.getZxy(o.z,o.x,o.y,h).then(m=>{if(m){let v=new Blob([m.data],{type:i}),x=window.URL.createObjectURL(v);a.src=x,a.cancel=void 0,s(void 0,a)}}).catch(m=>{if(m.name!=="AbortError")throw m}),a},"createTile"),_removeTile:ha(function(o){let s=this._tiles[o];s&&(s.el.cancel&&s.el.cancel(),s.el.width=0,s.el.height=0,s.el.deleted=!0,L.DomUtil.remove(s.el),delete this._tiles[o],this.fire("tileunload",{tile:s.el,coords:this._keyToTileCoords(o)}))},"_removeTile")});return new r(e)},"leafletRasterLayer");var ole=ha(n=>(e,t)=>{if(t instanceof AbortController)return n(e,t);let i=new AbortController;return n(e,i).then(r=>t(void 0,r.data,r.cacheControl||"",r.expires||""),r=>t(r)).catch(r=>t(r)),{cancel:ha(()=>i.abort(),"cancel")}},"v3compat"),K$=class{constructor(e){this.tilev4=ha((t,i)=>Xc(this,null,function*(){if(t.type==="json"){let E=t.url.substr(10),D=this.tiles.get(E);if(D||(D=new mT(E),this.tiles.set(E,D)),this.metadata)return{data:yield D.getTileJson(t.url)};let P=yield D.getHeader();return(P.minLon>=P.maxLon||P.minLat>=P.maxLat)&&console.error(`Bounds of PMTiles archive ${P.minLon},${P.minLat},${P.maxLon},${P.maxLat} are not valid.`),{data:{tiles:[`${t.url}/{z}/{x}/{y}`],minzoom:P.minZoom,maxzoom:P.maxZoom,bounds:[P.minLon,P.minLat,P.maxLon,P.maxLat]}}}let r=new RegExp(/pmtiles:\/\/(.+)\/(\d+)\/(\d+)\/(\d+)/),o=t.url.match(r);if(!o)throw new Error("Invalid PMTiles protocol URL");let s=o[1],a=this.tiles.get(s);a||(a=new mT(s),this.tiles.set(s,a));let c=o[2],h=o[3],m=o[4],v=yield a.getHeader(),x=yield a?.getZxy(+c,+h,+m,i.signal);if(x)return{data:new Uint8Array(x.data),cacheControl:x.cacheControl,expires:x.expires};if(v.tileType===1){if(this.errorOnMissingTile)throw new Error("Tile not found.");return{data:new Uint8Array}}return{data:null}}),"tilev4"),this.tile=ole(this.tilev4),this.tiles=new Map,this.metadata=e?.metadata||!1,this.errorOnMissingTile=e?.errorOnMissingTile||!1}add(e){this.tiles.set(e.source.getKey(),e)}get(e){return this.tiles.get(e)}};ha(K$,"Protocol");var sle=K$;function L$(n,e){return(e>>>0)*4294967296+(n>>>0)}ha(L$,"toNum");function F$(n,e){let t=e.buf,i=t[e.pos++],r=(i&112)>>4;if(i<128||(i=t[e.pos++],r|=(i&127)<<3,i<128)||(i=t[e.pos++],r|=(i&127)<<10,i<128)||(i=t[e.pos++],r|=(i&127)<<17,i<128)||(i=t[e.pos++],r|=(i&127)<<24,i<128)||(i=t[e.pos++],r|=(i&1)<<31,i<128))return L$(n,r);throw new Error("Expected varint not more than 10 bytes")}ha(F$,"readVarintRemainder");function p_(n){let e=n.buf,t=e[n.pos++],i=t&127;return t<128||(t=e[n.pos++],i|=(t&127)<<7,t<128)||(t=e[n.pos++],i|=(t&127)<<14,t<128)||(t=e[n.pos++],i|=(t&127)<<21,t<128)?i:(t=e[n.pos],i|=(t&15)<<28,F$(i,n))}ha(p_,"readVarint");function tD(n,e,t,i){if(i===0){t===1&&(e[0]=n-1-e[0],e[1]=n-1-e[1]);let r=e[0];e[0]=e[1],e[1]=r}}ha(tD,"rotate");function z$(n,e){let t=o3(2,n),i=e,r=e,o=e,s=[0,0],a=1;for(;a<t;)i=1&o/2,r=1&(o^i),tD(a,s,i,r),s[0]+=a*i,s[1]+=a*r,o=o/4,a*=2;return[n,s[0],s[1]]}ha(z$,"idOnLevel");var ale=[0,1,5,21,85,341,1365,5461,21845,87381,349525,1398101,5592405,22369621,89478485,357913941,1431655765,5726623061,22906492245,91625968981,366503875925,1466015503701,5864062014805,23456248059221,93824992236885,375299968947541,0x5555555555555];function j$(n,e,t){if(n>26)throw new Error("Tile zoom level exceeds max safe number limit (26)");if(e>o3(2,n)-1||t>o3(2,n)-1)throw new Error("tile x/y outside zoom level bounds");let i=ale[n],r=o3(2,n),o=0,s=0,a=0,c=[e,t],h=r/2;for(;h>0;)o=(c[0]&h)>0?1:0,s=(c[1]&h)>0?1:0,a+=h*h*(3*o^s),tD(h,c,o,s),h=h/2;return i+a}ha(j$,"zxyToTileId");function lle(n){let e=0;for(let t=0;t<27;t++){let i=(1<<t)*(1<<t);if(e+i>n)return z$(t,n-e);e+=i}throw new Error("Tile zoom level exceeds max safe number limit (26)")}ha(lle,"tileIdToZxy");var ule=(n=>(n[n.Unknown=0]="Unknown",n[n.None=1]="None",n[n.Gzip=2]="Gzip",n[n.Brotli=3]="Brotli",n[n.Zstd=4]="Zstd",n))(ule||{});function uE(n,e){return Xc(this,null,function*(){if(e===1||e===0)return n;if(e===2){if(typeof globalThis.DecompressionStream>"u")return tle(new Uint8Array(n));let t=new Response(n).body;if(!t)throw new Error("Failed to read response stream");let i=t.pipeThrough(new globalThis.DecompressionStream("gzip"));return new Response(i).arrayBuffer()}throw new Error("Compression method not supported")})}ha(uE,"defaultDecompress");var cle=(n=>(n[n.Unknown=0]="Unknown",n[n.Mvt=1]="Mvt",n[n.Png=2]="Png",n[n.Jpeg=3]="Jpeg",n[n.Webp=4]="Webp",n[n.Avif=5]="Avif",n))(cle||{});function N$(n){return n===1?".mvt":n===2?".png":n===3?".jpg":n===4?".webp":n===5?".avif":""}ha(N$,"tileTypeExt");var Ale=127;function G$(n,e){let t=0,i=n.length-1;for(;t<=i;){let r=i+t>>1,o=e-n[r].tileId;if(o>0)t=r+1;else if(o<0)i=r-1;else return n[r]}return i>=0&&(n[i].runLength===0||e-n[i].tileId<n[i].runLength)?n[i]:null}ha(G$,"findTile");var hle=class{constructor(e){this.file=e}getKey(){return this.file.name}getBytes(e,t){return Xc(this,null,function*(){return{data:yield this.file.slice(e,e+t).arrayBuffer()}})}};ha(hle,"FileSource");var W$=class{constructor(e,t=new Headers){this.url=e,this.customHeaders=t,this.mustReload=!1;let i="";"navigator"in globalThis&&(i=globalThis.navigator.userAgent||"");let r=i.indexOf("Windows")>-1,o=/Chrome|Chromium|Edg|OPR|Brave/.test(i);this.chromeWindowsNoCache=!1,r&&o&&(this.chromeWindowsNoCache=!0)}getKey(){return this.url}setHeaders(e){this.customHeaders=e}getBytes(e,t,i,r){return Xc(this,null,function*(){let o,s;i?s=i:(o=new AbortController,s=o.signal);let a=new Headers(this.customHeaders);a.set("range",`bytes=${e}-${e+t-1}`);let c;this.mustReload?c="reload":this.chromeWindowsNoCache&&(c="no-store");let h=yield fetch(this.url,{signal:s,cache:c,headers:a});if(e===0&&h.status===416){let x=h.headers.get("Content-Range");if(!x||!x.startsWith("bytes */"))throw new Error("Missing content-length on 416 response");let E=+x.substr(8);h=yield fetch(this.url,{signal:s,cache:"reload",headers:{range:`bytes=0-${E-1}`}})}let m=h.headers.get("Etag");if(m!=null&&m.startsWith("W/")&&(m=null),h.status===416||r&&m&&m!==r)throw this.mustReload=!0,new pT(`Server returned non-matching ETag ${r} after one retry. Check browser extensions and servers for issues that may affect correct ETag headers.`);if(h.status>=300)throw new Error(`Bad response code: ${h.status}`);let v=h.headers.get("Content-Length");if(h.status===200&&(!v||+v>t))throw o&&o.abort(),new Error("Server returned no content-length header or content-length exceeding request. Check that your storage backend supports HTTP Byte Serving.");return{data:yield h.arrayBuffer(),etag:m||void 0,cacheControl:h.headers.get("Cache-Control")||void 0,expires:h.headers.get("Expires")||void 0}})}};ha(W$,"FetchSource");var dle=W$;function Gf(n,e){let t=n.getUint32(e+4,!0),i=n.getUint32(e+0,!0);return t*o3(2,32)+i}ha(Gf,"getUint64");function Q$(n,e){let t=new DataView(n),i=t.getUint8(7);if(i>3)throw new Error(`Archive is spec version ${i} but this library supports up to spec version 3`);return{specVersion:i,rootDirectoryOffset:Gf(t,8),rootDirectoryLength:Gf(t,16),jsonMetadataOffset:Gf(t,24),jsonMetadataLength:Gf(t,32),leafDirectoryOffset:Gf(t,40),leafDirectoryLength:Gf(t,48),tileDataOffset:Gf(t,56),tileDataLength:Gf(t,64),numAddressedTiles:Gf(t,72),numTileEntries:Gf(t,80),numTileContents:Gf(t,88),clustered:t.getUint8(96)===1,internalCompression:t.getUint8(97),tileCompression:t.getUint8(98),tileType:t.getUint8(99),minZoom:t.getUint8(100),maxZoom:t.getUint8(101),minLon:t.getInt32(102,!0)/1e7,minLat:t.getInt32(106,!0)/1e7,maxLon:t.getInt32(110,!0)/1e7,maxLat:t.getInt32(114,!0)/1e7,centerZoom:t.getUint8(118),centerLon:t.getInt32(119,!0)/1e7,centerLat:t.getInt32(123,!0)/1e7,etag:e}}ha(Q$,"bytesToHeader");function nD(n){let e={buf:new Uint8Array(n),pos:0},t=p_(e),i=[],r=0;for(let o=0;o<t;o++){let s=p_(e);i.push({tileId:r+s,offset:0,length:0,runLength:1}),r+=s}for(let o=0;o<t;o++)i[o].runLength=p_(e);for(let o=0;o<t;o++)i[o].length=p_(e);for(let o=0;o<t;o++){let s=p_(e);s===0&&o>0?i[o].offset=i[o-1].offset+i[o-1].length:i[o].offset=s-1}return i}ha(nD,"deserializeIndex");var Y$=class extends Error{};ha(Y$,"EtagMismatch");var pT=Y$;function iD(n,e){return Xc(this,null,function*(){let t=yield n.getBytes(0,16384);if(new DataView(t.data).getUint16(0,!0)!==19792)throw new Error("Wrong magic number for PMTiles archive");let i=t.data.slice(0,Ale),r=Q$(i,t.etag),o=t.data.slice(r.rootDirectoryOffset,r.rootDirectoryOffset+r.rootDirectoryLength),s=`${n.getKey()}|${r.etag||""}|${r.rootDirectoryOffset}|${r.rootDirectoryLength}`,a=nD(yield e(o,r.internalCompression));return[r,[s,a.length,a]]})}ha(iD,"getHeaderAndRoot");function rD(n,e,t,i,r){return Xc(this,null,function*(){let o=yield n.getBytes(t,i,void 0,r.etag),s=yield e(o.data,r.internalCompression),a=nD(s);if(a.length===0)throw new Error("Empty directory is invalid");return a})}ha(rD,"getDirectory");var fle=class{constructor(e=100,t=!0,i=uE){this.cache=new Map,this.maxCacheEntries=e,this.counter=1,this.decompress=i}getHeader(e){return Xc(this,null,function*(){let t=e.getKey(),i=this.cache.get(t);if(i)return i.lastUsed=this.counter++,i.data;let r=yield iD(e,this.decompress);return r[1]&&this.cache.set(r[1][0],{lastUsed:this.counter++,data:r[1][2]}),this.cache.set(t,{lastUsed:this.counter++,data:r[0]}),this.prune(),r[0]})}getDirectory(e,t,i,r){return Xc(this,null,function*(){let o=`${e.getKey()}|${r.etag||""}|${t}|${i}`,s=this.cache.get(o);if(s)return s.lastUsed=this.counter++,s.data;let a=yield rD(e,this.decompress,t,i,r);return this.cache.set(o,{lastUsed:this.counter++,data:a}),this.prune(),a})}prune(){if(this.cache.size>this.maxCacheEntries){let e=1/0,t;this.cache.forEach((i,r)=>{i.lastUsed<e&&(e=i.lastUsed,t=r)}),t&&this.cache.delete(t)}}invalidate(e){return Xc(this,null,function*(){this.cache.delete(e.getKey())})}};ha(fle,"ResolvedValueCache");var q$=class{constructor(e=100,t=!0,i=uE){this.cache=new Map,this.invalidations=new Map,this.maxCacheEntries=e,this.counter=1,this.decompress=i}getHeader(e){return Xc(this,null,function*(){let t=e.getKey(),i=this.cache.get(t);if(i)return i.lastUsed=this.counter++,yield i.data;let r=new Promise((o,s)=>{iD(e,this.decompress).then(a=>{a[1]&&this.cache.set(a[1][0],{lastUsed:this.counter++,data:Promise.resolve(a[1][2])}),o(a[0]),this.prune()}).catch(a=>{s(a)})});return this.cache.set(t,{lastUsed:this.counter++,data:r}),r})}getDirectory(e,t,i,r){return Xc(this,null,function*(){let o=`${e.getKey()}|${r.etag||""}|${t}|${i}`,s=this.cache.get(o);if(s)return s.lastUsed=this.counter++,yield s.data;let a=new Promise((c,h)=>{rD(e,this.decompress,t,i,r).then(m=>{c(m),this.prune()}).catch(m=>{h(m)})});return this.cache.set(o,{lastUsed:this.counter++,data:a}),a})}prune(){if(this.cache.size>=this.maxCacheEntries){let e=1/0,t;this.cache.forEach((i,r)=>{i.lastUsed<e&&(e=i.lastUsed,t=r)}),t&&this.cache.delete(t)}}invalidate(e){return Xc(this,null,function*(){let t=e.getKey();if(this.invalidations.get(t))return yield this.invalidations.get(t);this.cache.delete(e.getKey());let i=new Promise((r,o)=>{this.getHeader(e).then(s=>{r(),this.invalidations.delete(t)}).catch(s=>{o(s)})});this.invalidations.set(t,i)})}};ha(q$,"SharedPromiseCache");var ple=q$,V$=class{constructor(e,t,i){typeof e=="string"?this.source=new dle(e):this.source=e,i?this.decompress=i:this.decompress=uE,t?this.cache=t:this.cache=new ple}getHeader(){return Xc(this,null,function*(){return yield this.cache.getHeader(this.source)})}getZxyAttempt(e,t,i,r){return Xc(this,null,function*(){let o=j$(e,t,i),s=yield this.cache.getHeader(this.source);if(e<s.minZoom||e>s.maxZoom)return;let a=s.rootDirectoryOffset,c=s.rootDirectoryLength;for(let h=0;h<=3;h++){let m=yield this.cache.getDirectory(this.source,a,c,s),v=G$(m,o);if(v){if(v.runLength>0){let x=yield this.source.getBytes(s.tileDataOffset+v.offset,v.length,r,s.etag);return{data:yield this.decompress(x.data,s.tileCompression),cacheControl:x.cacheControl,expires:x.expires}}a=s.leafDirectoryOffset+v.offset,c=v.length}else return}throw new Error("Maximum directory depth exceeded")})}getZxy(e,t,i,r){return Xc(this,null,function*(){try{return yield this.getZxyAttempt(e,t,i,r)}catch(o){if(o instanceof pT)return this.cache.invalidate(this.source),yield this.getZxyAttempt(e,t,i,r);throw o}})}getMetadataAttempt(){return Xc(this,null,function*(){let e=yield this.cache.getHeader(this.source),t=yield this.source.getBytes(e.jsonMetadataOffset,e.jsonMetadataLength,void 0,e.etag),i=yield this.decompress(t.data,e.internalCompression),r=new TextDecoder("utf-8");return JSON.parse(r.decode(i))})}getMetadata(){return Xc(this,null,function*(){try{return yield this.getMetadataAttempt()}catch(e){if(e instanceof pT)return this.cache.invalidate(this.source),yield this.getMetadataAttempt();throw e}})}getTileJson(e){return Xc(this,null,function*(){let t=yield this.getHeader(),i=yield this.getMetadata(),r=N$(t.tileType);return{tilejson:"3.0.0",scheme:"xyz",tiles:[`${e}/{z}/{x}/{y}${r}`],vector_layers:i.vector_layers,attribution:i.attribution,description:i.description,name:i.name,version:i.version,bounds:[t.minLon,t.minLat,t.maxLon,t.maxLat],center:[t.centerLon,t.centerLat,t.centerZoom],minzoom:t.minZoom,maxzoom:t.maxZoom}})}};ha(V$,"PMTiles");var mT=V$,mle=8,gle={version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},"font-faces":{type:"array",value:"fontFaces"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},yle={"*":{type:"source"}},vle=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],ble={type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},encoding:{type:"enum",values:{mvt:{},mlt:{}},default:"mvt"},"*":{type:"*"}},Cle={type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},_le={type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},xle={type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},Mle={type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},wle={type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},Sle={id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},Ele=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],Ble={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Ole={"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Ile={"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},kle={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Tle={"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Rle={"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Dle={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Ple={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Ule={type:"array",value:"*"},Kle={type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},Lle={type:"enum",values:{Point:{},LineString:{},Polygon:{}}},Fle={type:"array",minimum:0,maximum:24,value:["number","color"],length:2},zle={type:"array",value:"*",minimum:1},jle={anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},Nle={"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},Gle={source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},Wle={type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},Qle=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],Yle={"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},qle={"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},Vle={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},$le={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Hle={"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},Zle={"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Xle={"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},Jle={"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},eue={duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},tue={"*":{type:"string"}},ts={$version:mle,$root:gle,sources:yle,source:vle,source_vector:ble,source_raster:Cle,source_raster_dem:_le,source_geojson:xle,source_video:Mle,source_image:wle,layer:Sle,layout:Ele,layout_background:Ble,layout_fill:Ole,layout_circle:Ile,layout_heatmap:kle,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:Tle,layout_symbol:Rle,layout_raster:Dle,layout_hillshade:Ple,"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:Ule,filter_operator:Kle,geometry_type:Lle,function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:Fle,expression:zle,light:jle,sky:Nle,terrain:Gle,projection:Wle,paint:Qle,paint_fill:Yle,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:qle,paint_circle:Vle,paint_heatmap:$le,paint_symbol:Hle,paint_raster:Zle,paint_hillshade:Xle,"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:Jle,transition:eue,"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:tue};const nue=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function iue(n,e){const t={};for(const i in n)i!=="ref"&&(t[i]=n[i]);return nue.forEach(i=>{i in e&&(t[i]=e[i])}),t}function rue(n){n=n.slice();const e=Object.create(null);for(let t=0;t<n.length;t++)e[n[t].id]=n[t];for(let t=0;t<n.length;t++)"ref"in n[t]&&(n[t]=iue(n[t],e[n[t].ref]));return n}function Ps(n,e){if(Array.isArray(n)){if(!Array.isArray(e)||n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(!Ps(n[t],e[t]))return!1;return!0}if(typeof n=="object"&&n!==null&&e!==null){if(typeof e!="object"||Object.keys(n).length!==Object.keys(e).length)return!1;for(const i in n)if(!Ps(n[i],e[i]))return!1;return!0}return n===e}function Qf(n,e){n.push(e)}function $$(n,e,t){Qf(t,{command:"addSource",args:[n,e[n]]})}function H$(n,e,t){Qf(e,{command:"removeSource",args:[n]}),t[n]=!0}function oue(n,e,t,i){H$(n,t,i),$$(n,e,t)}function sue(n,e,t){let i;for(i in n[t])if(Object.prototype.hasOwnProperty.call(n[t],i)&&i!=="data"&&!Ps(n[t][i],e[t][i]))return!1;for(i in e[t])if(Object.prototype.hasOwnProperty.call(e[t],i)&&i!=="data"&&!Ps(n[t][i],e[t][i]))return!1;return!0}function aue(n,e,t,i){n=n||{},e=e||{};let r;for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(Object.prototype.hasOwnProperty.call(e,r)||H$(r,t,i));for(r in e)Object.prototype.hasOwnProperty.call(e,r)&&(Object.prototype.hasOwnProperty.call(n,r)?Ps(n[r],e[r])||(n[r].type==="geojson"&&e[r].type==="geojson"&&sue(n,e,r)?Qf(t,{command:"setGeoJSONSourceData",args:[r,e[r].data]}):oue(r,e,t,i)):$$(r,e,t))}function zM(n,e,t,i,r,o){n=n||{},e=e||{};for(const s in n)Object.prototype.hasOwnProperty.call(n,s)&&(Ps(n[s],e[s])||t.push({command:o,args:[i,s,e[s],r]}));for(const s in e)!Object.prototype.hasOwnProperty.call(e,s)||Object.prototype.hasOwnProperty.call(n,s)||Ps(n[s],e[s])||t.push({command:o,args:[i,s,e[s],r]})}function TL(n){return n.id}function RL(n,e){return n[e.id]=e,n}function lue(n,e,t){n=n||[],e=e||[];const i=n.map(TL),r=e.map(TL),o=n.reduce(RL,{}),s=e.reduce(RL,{}),a=i.slice(),c=Object.create(null);let h,m,v,x,E;for(let D=0,P=0;D<i.length;D++)h=i[D],Object.prototype.hasOwnProperty.call(s,h)?P++:(Qf(t,{command:"removeLayer",args:[h]}),a.splice(a.indexOf(h,P),1));for(let D=0,P=0;D<r.length;D++)h=r[r.length-1-D],a[a.length-1-D]!==h&&(Object.prototype.hasOwnProperty.call(o,h)?(Qf(t,{command:"removeLayer",args:[h]}),a.splice(a.lastIndexOf(h,a.length-P),1)):P++,x=a[a.length-D],Qf(t,{command:"addLayer",args:[s[h],x]}),a.splice(a.length-D,0,h),c[h]=!0);for(let D=0;D<r.length;D++)if(h=r[D],m=o[h],v=s[h],!(c[h]||Ps(m,v))){if(!Ps(m.source,v.source)||!Ps(m["source-layer"],v["source-layer"])||!Ps(m.type,v.type)){Qf(t,{command:"removeLayer",args:[h]}),x=a[a.lastIndexOf(h)+1],Qf(t,{command:"addLayer",args:[v,x]});continue}zM(m.layout,v.layout,t,h,null,"setLayoutProperty"),zM(m.paint,v.paint,t,h,null,"setPaintProperty"),Ps(m.filter,v.filter)||Qf(t,{command:"setFilter",args:[h,v.filter]}),(!Ps(m.minzoom,v.minzoom)||!Ps(m.maxzoom,v.maxzoom))&&Qf(t,{command:"setLayerZoomRange",args:[h,v.minzoom,v.maxzoom]});for(E in m)Object.prototype.hasOwnProperty.call(m,E)&&(E==="layout"||E==="paint"||E==="filter"||E==="metadata"||E==="minzoom"||E==="maxzoom"||(E.indexOf("paint.")===0?zM(m[E],v[E],t,h,E.slice(6),"setPaintProperty"):Ps(m[E],v[E])||Qf(t,{command:"setLayerProperty",args:[h,E,v[E]]})));for(E in v)!Object.prototype.hasOwnProperty.call(v,E)||Object.prototype.hasOwnProperty.call(m,E)||E==="layout"||E==="paint"||E==="filter"||E==="metadata"||E==="minzoom"||E==="maxzoom"||(E.indexOf("paint.")===0?zM(m[E],v[E],t,h,E.slice(6),"setPaintProperty"):Ps(m[E],v[E])||Qf(t,{command:"setLayerProperty",args:[h,E,v[E]]}))}}function uue(n,e){if(!n)return[{command:"setStyle",args:[e]}];let t=[];try{if(!Ps(n.version,e.version))return[{command:"setStyle",args:[e]}];Ps(n.center,e.center)||t.push({command:"setCenter",args:[e.center]}),Ps(n.state,e.state)||t.push({command:"setGlobalState",args:[e.state]}),Ps(n.centerAltitude,e.centerAltitude)||t.push({command:"setCenterAltitude",args:[e.centerAltitude]}),Ps(n.zoom,e.zoom)||t.push({command:"setZoom",args:[e.zoom]}),Ps(n.bearing,e.bearing)||t.push({command:"setBearing",args:[e.bearing]}),Ps(n.pitch,e.pitch)||t.push({command:"setPitch",args:[e.pitch]}),Ps(n.roll,e.roll)||t.push({command:"setRoll",args:[e.roll]}),Ps(n.sprite,e.sprite)||t.push({command:"setSprite",args:[e.sprite]}),Ps(n.glyphs,e.glyphs)||t.push({command:"setGlyphs",args:[e.glyphs]}),Ps(n.transition,e.transition)||t.push({command:"setTransition",args:[e.transition]}),Ps(n.light,e.light)||t.push({command:"setLight",args:[e.light]}),Ps(n.terrain,e.terrain)||t.push({command:"setTerrain",args:[e.terrain]}),Ps(n.sky,e.sky)||t.push({command:"setSky",args:[e.sky]}),Ps(n.projection,e.projection)||t.push({command:"setProjection",args:[e.projection]});const i={},r=[];aue(n.sources,e.sources,r,i);const o=[];n.layers&&n.layers.forEach(s=>{"source"in s&&i[s.source]?t.push({command:"removeLayer",args:[s.id]}):o.push(s)}),t=t.concat(r),lue(o,e.layers,t)}catch(i){console.warn("Unable to compute style diff:",i),t=[{command:"setStyle",args:[e]}]}return t}class qn{constructor(e,t,i,r){this.message=(e?`${e}: `:"")+i,r&&(this.identifier=r),t!=null&&t.__line__&&(this.line=t.__line__)}}function ux(n,...e){for(const t of e)for(const i in t)n[i]=t[i];return n}let Ug=class extends Error{constructor(e,t){super(t),this.message=t,this.key=e}},cue=class Z${constructor(e,t=[]){this.parent=e,this.bindings={};for(const[i,r]of t)this.bindings[i]=r}concat(e){return new Z$(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return this.bindings[e]?!0:this.parent?this.parent.has(e):!1}};const cE={kind:"null"},Jn={kind:"number"},fo={kind:"string"},Jr={kind:"boolean"},Hg={kind:"color"},AE={kind:"projectionDefinition"},Bb={kind:"object"},Vr={kind:"value"},Aue={kind:"error"},hE={kind:"collator"},dE={kind:"formatted"},fE={kind:"padding"},D3={kind:"colorArray"},pE={kind:"numberArray"},V4={kind:"resolvedImage"},mE={kind:"variableAnchorOffsetCollection"};function cf(n,e){return{kind:"array",itemType:n,N:e}}function _l(n){if(n.kind==="array"){const e=_l(n.itemType);return typeof n.N=="number"?`array<${e}, ${n.N}>`:n.itemType.kind==="value"?"array":`array<${e}>`}else return n.kind}const hue=[cE,Jn,fo,Jr,Hg,AE,dE,Bb,cf(Vr),fE,pE,D3,V4,mE];function P3(n,e){if(e.kind==="error")return null;if(n.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!P3(n.itemType,e.itemType))&&(typeof n.N!="number"||n.N===e.N))return null}else{if(n.kind===e.kind)return null;if(n.kind==="value"){for(const t of hue)if(!P3(t,e))return null}}return`Expected ${_l(n)} but found ${_l(e)} instead.`}function oD(n,e){return e.some(t=>t.kind===n.kind)}function Ob(n,e){return e.some(t=>t==="null"?n===null:t==="array"?Array.isArray(n):t==="object"?n&&!Array.isArray(n)&&typeof n=="object":t===typeof n)}function gy(n,e){return n.kind==="array"&&e.kind==="array"?n.itemType.kind===e.itemType.kind&&typeof n.N=="number":n.kind===e.kind}const X$=.96422,J$=1,eH=.82521,tH=4/29,z_=6/29,nH=3*z_*z_,due=z_*z_*z_,fue=Math.PI/180,pue=180/Math.PI;function iH(n){return n=n%360,n<0&&(n+=360),n}function rH([n,e,t,i]){n=yB(n),e=yB(e),t=yB(t);let r,o;const s=vB((.2225045*n+.7168786*e+.0606169*t)/J$);n===e&&e===t?r=o=s:(r=vB((.4360747*n+.3850649*e+.1430804*t)/X$),o=vB((.0139322*n+.0971045*e+.7141733*t)/eH));const a=116*s-16;return[a<0?0:a,500*(r-s),200*(s-o),i]}function yB(n){return n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function vB(n){return n>due?Math.pow(n,1/3):n/nH+tH}function oH([n,e,t,i]){let r=(n+16)/116,o=isNaN(e)?r:r+e/500,s=isNaN(t)?r:r-t/200;return r=J$*CB(r),o=X$*CB(o),s=eH*CB(s),[bB(3.1338561*o-1.6168667*r-.4906146*s),bB(-.9787684*o+1.9161415*r+.033454*s),bB(.0719453*o-.2289914*r+1.4052427*s),i]}function bB(n){return n=n<=.00304?12.92*n:1.055*Math.pow(n,1/2.4)-.055,n<0?0:n>1?1:n}function CB(n){return n>z_?n*n*n:nH*(n-tH)}function mue(n){const[e,t,i,r]=rH(n),o=Math.sqrt(t*t+i*i);return[Math.round(o*1e4)?iH(Math.atan2(i,t)*pue):NaN,o,e,r]}function gue([n,e,t,i]){return n=isNaN(n)?0:n*fue,oH([t,Math.cos(n)*e,Math.sin(n)*e,i])}function yue([n,e,t,i]){n=iH(n),e/=100,t/=100;function r(o){const s=(o+n/30)%12,a=e*Math.min(t,1-t);return t-a*Math.max(-1,Math.min(s-3,9-s,1))}return[r(0),r(8),r(4),i]}const vue=Object.hasOwn||function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};function s3(n,e){return vue(n,e)?n[e]:void 0}function bue(n){if(n=n.toLowerCase().trim(),n==="transparent")return[0,0,0,0];const e=s3(Cue,n);if(e){const[r,o,s]=e;return[r/255,o/255,s/255,1]}if(n.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(n)){const o=n.length<6?1:2;let s=1;return[jM(n.slice(s,s+=o)),jM(n.slice(s,s+=o)),jM(n.slice(s,s+=o)),jM(n.slice(s,s+o)||"ff")]}if(n.startsWith("rgb")){const r=/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,o=n.match(r);if(o){const[s,a,c,h,m,v,x,E,D,P,F,W]=o,q=[h||" ",x||" ",P].join("");if(q==="  "||q==="  /"||q===",,"||q===",,,"){const V=[c,v,D].join(""),H=V==="%%%"?100:V===""?255:0;if(H){const X=[m_(+a/H,0,1),m_(+m/H,0,1),m_(+E/H,0,1),F?DL(+F,W):1];if(PL(X))return X}}return}}const t=/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,i=n.match(t);if(i){const[r,o,s,a,c,h,m,v,x]=i,E=[s||" ",c||" ",m].join("");if(E==="  "||E==="  /"||E===",,"||E===",,,"){const D=[+o,m_(+a,0,100),m_(+h,0,100),v?DL(+v,x):1];if(PL(D))return yue(D)}}}function jM(n){return parseInt(n.padEnd(2,n),16)/255}function DL(n,e){return m_(e?n/100:n,0,1)}function m_(n,e,t){return Math.min(Math.max(e,n),t)}function PL(n){return!n.some(Number.isNaN)}const Cue={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function qy(n,e,t){return n+t*(e-n)}function cx(n,e,t){return n.map((i,r)=>qy(i,e[r],t))}function _ue(n){return n==="rgb"||n==="hcl"||n==="lab"}let da=class g_{constructor(e,t,i,r=1,o=!0){this.r=e,this.g=t,this.b=i,this.a=r,o||(this.r*=r,this.g*=r,this.b*=r,r||this.overwriteGetter("rgb",[e,t,i,r]))}static parse(e){if(e instanceof g_)return e;if(typeof e!="string")return;const t=bue(e);if(t)return new g_(...t,!1)}get rgb(){const{r:e,g:t,b:i,a:r}=this,o=r||1/0;return this.overwriteGetter("rgb",[e/o,t/o,i/o,r])}get hcl(){return this.overwriteGetter("hcl",mue(this.rgb))}get lab(){return this.overwriteGetter("lab",rH(this.rgb))}overwriteGetter(e,t){return Object.defineProperty(this,e,{value:t}),t}toString(){const[e,t,i,r]=this.rgb;return`rgba(${[e,t,i].map(o=>Math.round(o*255)).join(",")},${r})`}static interpolate(e,t,i,r="rgb"){switch(r){case"rgb":{const[o,s,a,c]=cx(e.rgb,t.rgb,i);return new g_(o,s,a,c,!1)}case"hcl":{const[o,s,a,c]=e.hcl,[h,m,v,x]=t.hcl;let E,D;if(!isNaN(o)&&!isNaN(h)){let V=h-o;h>o&&V>180?V-=360:h<o&&o-h>180&&(V+=360),E=o+i*V}else isNaN(o)?isNaN(h)?E=NaN:(E=h,(a===1||a===0)&&(D=m)):(E=o,(v===1||v===0)&&(D=s));const[P,F,W,q]=gue([E,D??qy(s,m,i),qy(a,v,i),qy(c,x,i)]);return new g_(P,F,W,q,!1)}case"lab":{const[o,s,a,c]=oH(cx(e.lab,t.lab,i));return new g_(o,s,a,c,!1)}}}};da.black=new da(0,0,0,1);da.white=new da(1,1,1,1);da.transparent=new da(0,0,0,0);da.red=new da(1,0,0,1);let sD=class{constructor(e,t,i){e?this.sensitivity=t?"variant":"case":this.sensitivity=t?"accent":"base",this.locale=i,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,t){return this.collator.compare(e,t)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}};const xue=["bottom","center","top"];let gT=class{constructor(e,t,i,r,o,s){this.text=e,this.image=t,this.scale=i,this.fontStack=r,this.textColor=o,this.verticalAlign=s}},Tx=class iw{constructor(e){this.sections=e}static fromString(e){return new iw([new gT(e,null,null,null,null,null)])}isEmpty(){return this.sections.length===0?!0:!this.sections.some(e=>e.text.length!==0||e.image&&e.image.name.length!==0)}static factory(e){return e instanceof iw?e:iw.fromString(e)}toString(){return this.sections.length===0?"":this.sections.map(e=>e.text).join("")}},h0=class D2{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof D2)return e;if(typeof e=="number")return new D2([e,e,e,e]);if(Array.isArray(e)&&!(e.length<1||e.length>4)){for(const t of e)if(typeof t!="number")return;switch(e.length){case 1:e=[e[0],e[0],e[0],e[0]];break;case 2:e=[e[0],e[1],e[0],e[1]];break;case 3:e=[e[0],e[1],e[2],e[1]];break}return new D2(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,i){return new D2(cx(e.values,t.values,i))}},d0=class P2{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof P2)return e;if(typeof e=="number")return new P2([e]);if(Array.isArray(e)){for(const t of e)if(typeof t!="number")return;return new P2(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,i){return new P2(cx(e.values,t.values,i))}},ip=class U2{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof U2)return e;if(typeof e=="string"){const i=da.parse(e);return i?new U2([i]):void 0}if(!Array.isArray(e))return;const t=[];for(const i of e){if(typeof i!="string")return;const r=da.parse(i);if(!r)return;t.push(r)}return new U2(t)}toString(){return JSON.stringify(this.values)}static interpolate(e,t,i,r="rgb"){const o=[];if(e.values.length!=t.values.length)throw new Error(`colorArray: Arrays have mismatched length (${e.values.length} vs. ${t.values.length}), cannot interpolate.`);for(let s=0;s<e.values.length;s++)o.push(da.interpolate(e.values[s],t.values[s],i,r));return new U2(o)}},Dl=class extends Error{constructor(e){super(e),this.name="RuntimeError"}toJSON(){return this.message}};const Mue=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);let lv=class rw{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof rw)return e;if(!(!Array.isArray(e)||e.length<1||e.length%2!==0)){for(let t=0;t<e.length;t+=2){const i=e[t],r=e[t+1];if(typeof i!="string"||!Mue.has(i)||!Array.isArray(r)||r.length!==2||typeof r[0]!="number"||typeof r[1]!="number")return}return new rw(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,i){const r=e.values,o=t.values;if(r.length!==o.length)throw new Dl(`Cannot interpolate values of different length. from: ${e.toString()}, to: ${t.toString()}`);const s=[];for(let a=0;a<r.length;a+=2){if(r[a]!==o[a])throw new Dl(`Cannot interpolate values containing mismatched anchors. from[${a}]: ${r[a]}, to[${a}]: ${o[a]}`);s.push(r[a]);const[c,h]=r[a+1],[m,v]=o[a+1];s.push([qy(c,m,i),qy(h,v,i)])}return new rw(s)}},tC=class sH{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new sH({name:e,available:!1}):null}},Rx=class y_{constructor(e,t,i){this.from=e,this.to=t,this.transition=i}static interpolate(e,t,i){return new y_(e,t,i)}static parse(e){if(e instanceof y_)return e;if(Array.isArray(e)&&e.length===3&&typeof e[0]=="string"&&typeof e[1]=="string"&&typeof e[2]=="number")return new y_(e[0],e[1],e[2]);if(typeof e=="object"&&typeof e.from=="string"&&typeof e.to=="string"&&typeof e.transition=="number")return new y_(e.from,e.to,e.transition);if(typeof e=="string")return new y_(e,e,1)}};function aH(n,e,t,i){return typeof n=="number"&&n>=0&&n<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof t=="number"&&t>=0&&t<=255?typeof i>"u"||typeof i=="number"&&i>=0&&i<=1?null:`Invalid rgba value [${[n,e,t,i].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof i=="number"?[n,e,t,i]:[n,e,t]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function U3(n){if(n===null||typeof n=="string"||typeof n=="boolean"||typeof n=="number"||n instanceof Rx||n instanceof da||n instanceof sD||n instanceof Tx||n instanceof h0||n instanceof d0||n instanceof ip||n instanceof lv||n instanceof tC)return!0;if(Array.isArray(n)){for(const e of n)if(!U3(e))return!1;return!0}else if(typeof n=="object"){for(const e in n)if(!U3(n[e]))return!1;return!0}else return!1}function Zu(n){if(n===null)return cE;if(typeof n=="string")return fo;if(typeof n=="boolean")return Jr;if(typeof n=="number")return Jn;if(n instanceof da)return Hg;if(n instanceof Rx)return AE;if(n instanceof sD)return hE;if(n instanceof Tx)return dE;if(n instanceof h0)return fE;if(n instanceof d0)return pE;if(n instanceof ip)return D3;if(n instanceof lv)return mE;if(n instanceof tC)return V4;if(Array.isArray(n)){const e=n.length;let t;for(const i of n){const r=Zu(i);if(!t)t=r;else{if(t===r)continue;t=Vr;break}}return cf(t||Vr,e)}else return Bb}function a3(n){const e=typeof n;return n===null?"":e==="string"||e==="number"||e==="boolean"?String(n):n instanceof da||n instanceof Rx||n instanceof Tx||n instanceof h0||n instanceof d0||n instanceof ip||n instanceof lv||n instanceof tC?n.toString():JSON.stringify(n)}let zw=class lH{constructor(e,t){this.type=e,this.value=t}static parse(e,t){if(e.length!==2)return t.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!U3(e[1]))return t.error("invalid value");const i=e[1];let r=Zu(i);const o=t.expectedType;return r.kind==="array"&&r.N===0&&o&&o.kind==="array"&&(typeof o.N!="number"||o.N===0)&&(r=o),new lH(r,i)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}};const NM={string:fo,number:Jn,boolean:Jr,object:Bb};let r1=class uH{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let i=1,r;const o=e[0];if(o==="array"){let a;if(e.length>2){const h=e[1];if(typeof h!="string"||!(h in NM)||h==="object")return t.error('The item type argument of "array" must be one of string, number, boolean',1);a=NM[h],i++}else a=Vr;let c;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);c=e[2],i++}r=cf(a,c)}else{if(!NM[o])throw new Error(`Types doesn't contain name = ${o}`);r=NM[o]}const s=[];for(;i<e.length;i++){const a=t.parse(e[i],i,Vr);if(!a)return null;s.push(a)}return new uH(r,s)}evaluate(e){for(let t=0;t<this.args.length;t++){const i=this.args[t].evaluate(e);if(P3(this.type,Zu(i))){if(t===this.args.length-1)throw new Dl(`Expected value to be of type ${_l(this.type)}, but found ${_l(Zu(i))} instead.`)}else return i}throw new Error}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}};const UL={"to-boolean":Jr,"to-color":Hg,"to-number":Jn,"to-string":fo};let I_=class cH{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const i=e[0];if(!UL[i])throw new Error(`Can't parse ${i} as it is not part of the known types`);if((i==="to-boolean"||i==="to-string")&&e.length!==2)return t.error("Expected one argument.");const r=UL[i],o=[];for(let s=1;s<e.length;s++){const a=t.parse(e[s],s,Vr);if(!a)return null;o.push(a)}return new cH(r,o)}evaluate(e){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(e);case"color":{let t,i;for(const r of this.args){if(t=r.evaluate(e),i=null,t instanceof da)return t;if(typeof t=="string"){const o=e.parseColor(t);if(o)return o}else if(Array.isArray(t)&&(t.length<3||t.length>4?i=`Invalid rgba value ${JSON.stringify(t)}: expected an array containing either three or four numeric values.`:i=aH(t[0],t[1],t[2],t[3]),!i))return new da(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new Dl(i||`Could not parse color from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"padding":{let t;for(const i of this.args){t=i.evaluate(e);const r=h0.parse(t);if(r)return r}throw new Dl(`Could not parse padding from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"numberArray":{let t;for(const i of this.args){t=i.evaluate(e);const r=d0.parse(t);if(r)return r}throw new Dl(`Could not parse numberArray from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"colorArray":{let t;for(const i of this.args){t=i.evaluate(e);const r=ip.parse(t);if(r)return r}throw new Dl(`Could not parse colorArray from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"variableAnchorOffsetCollection":{let t;for(const i of this.args){t=i.evaluate(e);const r=lv.parse(t);if(r)return r}throw new Dl(`Could not parse variableAnchorOffsetCollection from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"number":{let t=null;for(const i of this.args){if(t=i.evaluate(e),t===null)return 0;const r=Number(t);if(!isNaN(r))return r}throw new Dl(`Could not convert ${JSON.stringify(t)} to number.`)}case"formatted":return Tx.fromString(a3(this.args[0].evaluate(e)));case"resolvedImage":return tC.fromString(a3(this.args[0].evaluate(e)));case"projectionDefinition":return this.args[0].evaluate(e);default:return a3(this.args[0].evaluate(e))}}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}};const wue=["Unknown","Point","LineString","Polygon"];let AH=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?wue[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(e){let t=this._parseColorCache.get(e);return t||(t=da.parse(e),this._parseColorCache.set(e,t)),t}},hH=class dH{constructor(e,t,i=[],r,o=new cue,s=[]){this.registry=e,this.path=i,this.key=i.map(a=>`[${a}]`).join(""),this.scope=o,this.errors=s,this.expectedType=r,this._isConstant=t}parse(e,t,i,r,o={}){return t?this.concat(t,i,r)._parse(e,o):this._parse(e,o)}_parse(e,t){(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number")&&(e=["literal",e]);function i(r,o,s){return s==="assert"?new r1(o,[r]):s==="coerce"?new I_(o,[r]):r}if(Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const r=e[0];if(typeof r!="string")return this.error(`Expression name must be a string, but found ${typeof r} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const o=this.registry[r];if(o){let s=o.parse(e,this);if(!s)return null;if(this.expectedType){const a=this.expectedType,c=s.type;if((a.kind==="string"||a.kind==="number"||a.kind==="boolean"||a.kind==="object"||a.kind==="array")&&c.kind==="value")s=i(s,a,t.typeAnnotation||"assert");else if(a.kind==="projectionDefinition"&&["string","array"].includes(c.kind)||["color","formatted","resolvedImage"].includes(a.kind)&&["value","string"].includes(c.kind)||["padding","numberArray"].includes(a.kind)&&["value","number","array"].includes(c.kind)||a.kind==="colorArray"&&["value","string","array"].includes(c.kind)||a.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(c.kind))s=i(s,a,t.typeAnnotation||"coerce");else if(this.checkSubtype(a,c))return null}if(!(s instanceof zw)&&s.type.kind!=="resolvedImage"&&this._isConstant(s)){const a=new AH;try{s=new zw(s.type,s.evaluate(a))}catch(c){return this.error(c.message),null}}return s}return this.error(`Unknown expression "${r}". If you wanted a literal array, use ["literal", [...]].`,0)}else return typeof e>"u"?this.error("'undefined' value invalid. Use null instead."):typeof e=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof e} instead.`)}concat(e,t,i){const r=typeof e=="number"?this.path.concat(e):this.path,o=i?this.scope.concat(i):this.scope;return new dH(this.registry,this._isConstant,r,t||null,o,this.errors)}error(e,...t){const i=`${this.key}${t.map(r=>`[${r}]`).join("")}`;this.errors.push(new Ug(i,e))}checkSubtype(e,t){const i=P3(e,t);return i&&this.error(i),i}},fH=class pH{constructor(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const t of this.bindings)e(t[1]);e(this.result)}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const i=[];for(let o=1;o<e.length-1;o+=2){const s=e[o];if(typeof s!="string")return t.error(`Expected string, but found ${typeof s} instead.`,o);if(/[^a-zA-Z0-9_]/.test(s))return t.error("Variable names must contain only alphanumeric characters or '_'.",o);const a=t.parse(e[o+1],o+1);if(!a)return null;i.push([s,a])}const r=t.parse(e[e.length-1],e.length-1,t.expectedType,i);return r?new pH(i,r):null}outputDefined(){return this.result.outputDefined()}},mH=class gH{constructor(e,t){this.type=t.type,this.name=e,this.boundExpression=t}static parse(e,t){if(e.length!==2||typeof e[1]!="string")return t.error("'var' expression requires exactly one string literal argument.");const i=e[1];return t.scope.has(i)?new gH(i,t.scope.get(i)):t.error(`Unknown variable "${i}". Make sure "${i}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}},Sue=class yH{constructor(e,t,i){this.type=e,this.index=t,this.input=i}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,Jn),r=t.parse(e[2],2,cf(t.expectedType||Vr));if(!i||!r)return null;const o=r.type;return new yH(o.itemType,i,r)}evaluate(e){const t=this.index.evaluate(e),i=this.input.evaluate(e);if(t<0)throw new Dl(`Array index out of bounds: ${t} < 0.`);if(t>=i.length)throw new Dl(`Array index out of bounds: ${t} > ${i.length-1}.`);if(t!==Math.floor(t))throw new Dl(`Array index must be an integer, but found ${t} instead.`);return i[t]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}},Eue=class vH{constructor(e,t){this.type=Jr,this.needle=e,this.haystack=t}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,Vr),r=t.parse(e[2],2,Vr);return!i||!r?null:oD(i.type,[Jr,fo,Jn,cE,Vr])?new vH(i,r):t.error(`Expected first argument to be of type boolean, string, number or null, but found ${_l(i.type)} instead`)}evaluate(e){const t=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!i)return!1;if(!Ob(t,["boolean","string","number","null"]))throw new Dl(`Expected first argument to be of type boolean, string, number or null, but found ${_l(Zu(t))} instead.`);if(!Ob(i,["string","array"]))throw new Dl(`Expected second argument to be of type array or string, but found ${_l(Zu(i))} instead.`);return i.indexOf(t)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}},Bue=class yT{constructor(e,t,i){this.type=Jn,this.needle=e,this.haystack=t,this.fromIndex=i}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 2 or 3 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,Vr),r=t.parse(e[2],2,Vr);if(!i||!r)return null;if(!oD(i.type,[Jr,fo,Jn,cE,Vr]))return t.error(`Expected first argument to be of type boolean, string, number or null, but found ${_l(i.type)} instead`);if(e.length===4){const o=t.parse(e[3],3,Jn);return o?new yT(i,r,o):null}else return new yT(i,r)}evaluate(e){const t=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!Ob(t,["boolean","string","number","null"]))throw new Dl(`Expected first argument to be of type boolean, string, number or null, but found ${_l(Zu(t))} instead.`);let r;if(this.fromIndex&&(r=this.fromIndex.evaluate(e)),Ob(i,["string"])){const o=i.indexOf(t,r);return o===-1?-1:[...i.slice(0,o)].length}else{if(Ob(i,["array"]))return i.indexOf(t,r);throw new Dl(`Expected second argument to be of type array or string, but found ${_l(Zu(i))} instead.`)}}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}},Oue=class bH{constructor(e,t,i,r,o,s){this.inputType=e,this.type=t,this.input=i,this.cases=r,this.outputs=o,this.otherwise=s}static parse(e,t){if(e.length<5)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!==1)return t.error("Expected an even number of arguments.");let i,r;t.expectedType&&t.expectedType.kind!=="value"&&(r=t.expectedType);const o={},s=[];for(let h=2;h<e.length-1;h+=2){let m=e[h];const v=e[h+1];Array.isArray(m)||(m=[m]);const x=t.concat(h);if(m.length===0)return x.error("Expected at least one branch label.");for(const D of m){if(typeof D!="number"&&typeof D!="string")return x.error("Branch labels must be numbers or strings.");if(typeof D=="number"&&Math.abs(D)>Number.MAX_SAFE_INTEGER)return x.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof D=="number"&&Math.floor(D)!==D)return x.error("Numeric branch labels must be integer values.");if(!i)i=Zu(D);else if(x.checkSubtype(i,Zu(D)))return null;if(typeof o[String(D)]<"u")return x.error("Branch labels must be unique.");o[String(D)]=s.length}const E=t.parse(v,h,r);if(!E)return null;r=r||E.type,s.push(E)}const a=t.parse(e[1],1,Vr);if(!a)return null;const c=t.parse(e[e.length-1],e.length-1,r);return!c||a.type.kind!=="value"&&t.concat(1).checkSubtype(i,a.type)?null:new bH(i,r,a,o,s,c)}evaluate(e){const t=this.input.evaluate(e);return(Zu(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}},Iue=class CH{constructor(e,t,i){this.type=e,this.branches=t,this.otherwise=i}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!==0)return t.error("Expected an odd number of arguments.");let i;t.expectedType&&t.expectedType.kind!=="value"&&(i=t.expectedType);const r=[];for(let s=1;s<e.length-1;s+=2){const a=t.parse(e[s],s,Jr);if(!a)return null;const c=t.parse(e[s+1],s+1,i);if(!c)return null;r.push([a,c]),i=i||c.type}const o=t.parse(e[e.length-1],e.length-1,i);if(!o)return null;if(!i)throw new Error("Can't infer output type");return new CH(i,r,o)}evaluate(e){for(const[t,i]of this.branches)if(t.evaluate(e))return i.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[t,i]of this.branches)e(t),e(i);e(this.otherwise)}outputDefined(){return this.branches.every(([e,t])=>t.outputDefined())&&this.otherwise.outputDefined()}},kue=class vT{constructor(e,t,i,r){this.type=e,this.input=t,this.beginIndex=i,this.endIndex=r}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 2 or 3 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,Vr),r=t.parse(e[2],2,Jn);if(!i||!r)return null;if(!oD(i.type,[cf(Vr),fo,Vr]))return t.error(`Expected first argument to be of type array or string, but found ${_l(i.type)} instead`);if(e.length===4){const o=t.parse(e[3],3,Jn);return o?new vT(i.type,i,r,o):null}else return new vT(i.type,i,r)}evaluate(e){const t=this.input.evaluate(e),i=this.beginIndex.evaluate(e);let r;if(this.endIndex&&(r=this.endIndex.evaluate(e)),Ob(t,["string"]))return[...t].slice(i,r).join("");if(Ob(t,["array"]))return t.slice(i,r);throw new Dl(`Expected first argument to be of type array or string, but found ${_l(Zu(t))} instead.`)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}};function gE(n,e){const t=n.length-1;let i=0,r=t,o=0,s,a;for(;i<=r;)if(o=Math.floor((i+r)/2),s=n[o],a=n[o+1],s<=e){if(o===t||e<a)return o;i=o+1}else if(s>e)r=o-1;else throw new Dl("Input is not a number.");return 0}let _H=class xH{constructor(e,t,i){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(const[r,o]of i)this.labels.push(r),this.outputs.push(o)}static parse(e,t){if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");const i=t.parse(e[1],1,Jn);if(!i)return null;const r=[];let o=null;t.expectedType&&t.expectedType.kind!=="value"&&(o=t.expectedType);for(let s=1;s<e.length;s+=2){const a=s===1?-1/0:e[s],c=e[s+1],h=s,m=s+1;if(typeof a!="number")return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',h);if(r.length&&r[r.length-1][0]>=a)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',h);const v=t.parse(c,m,o);if(!v)return null;o=o||v.type,r.push([a,v])}return new xH(o,i,r)}evaluate(e){const t=this.labels,i=this.outputs;if(t.length===1)return i[0].evaluate(e);const r=this.input.evaluate(e);if(r<=t[0])return i[0].evaluate(e);const o=t.length;if(r>=t[o-1])return i[o-1].evaluate(e);const s=gE(t,r);return i[s].evaluate(e)}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}};function Tue(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var _B,KL;function Rue(){if(KL)return _B;KL=1,_B=n;function n(e,t,i,r){this.cx=3*e,this.bx=3*(i-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(r-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=t,this.p2x=i,this.p2y=r}return n.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,t){if(t===void 0&&(t=1e-6),e<0)return 0;if(e>1)return 1;for(var i=e,r=0;r<8;r++){var o=this.sampleCurveX(i)-e;if(Math.abs(o)<t)return i;var s=this.sampleCurveDerivativeX(i);if(Math.abs(s)<1e-6)break;i=i-o/s}var a=0,c=1;for(i=e,r=0;r<20&&(o=this.sampleCurveX(i),!(Math.abs(o-e)<t));r++)e>o?a=i:c=i,i=(c-a)*.5+a;return i},solve:function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))}},_B}var Due=Rue(),Pue=Tue(Due);let a1=class bT{constructor(e,t,i,r,o){this.type=e,this.operator=t,this.interpolation=i,this.input=r,this.labels=[],this.outputs=[];for(const[s,a]of o)this.labels.push(s),this.outputs.push(a)}static interpolationFactor(e,t,i,r){let o=0;if(e.name==="exponential")o=xB(t,e.base,i,r);else if(e.name==="linear")o=xB(t,1,i,r);else if(e.name==="cubic-bezier"){const s=e.controlPoints;o=new Pue(s[0],s[1],s[2],s[3]).solve(xB(t,1,i,r))}return o}static parse(e,t){let[i,r,o,...s]=e;if(!Array.isArray(r)||r.length===0)return t.error("Expected an interpolation type expression.",1);if(r[0]==="linear")r={name:"linear"};else if(r[0]==="exponential"){const h=r[1];if(typeof h!="number")return t.error("Exponential interpolation requires a numeric base.",1,1);r={name:"exponential",base:h}}else if(r[0]==="cubic-bezier"){const h=r.slice(1);if(h.length!==4||h.some(m=>typeof m!="number"||m<0||m>1))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);r={name:"cubic-bezier",controlPoints:h}}else return t.error(`Unknown interpolation type ${String(r[0])}`,1,0);if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");if(o=t.parse(o,2,Jn),!o)return null;const a=[];let c=null;(i==="interpolate-hcl"||i==="interpolate-lab")&&t.expectedType!=D3?c=Hg:t.expectedType&&t.expectedType.kind!=="value"&&(c=t.expectedType);for(let h=0;h<s.length;h+=2){const m=s[h],v=s[h+1],x=h+3,E=h+4;if(typeof m!="number")return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',x);if(a.length&&a[a.length-1][0]>=m)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',x);const D=t.parse(v,E,c);if(!D)return null;c=c||D.type,a.push([m,D])}return!gy(c,Jn)&&!gy(c,AE)&&!gy(c,Hg)&&!gy(c,fE)&&!gy(c,pE)&&!gy(c,D3)&&!gy(c,mE)&&!gy(c,cf(Jn))?t.error(`Type ${_l(c)} is not interpolatable.`):new bT(c,i,r,o,a)}evaluate(e){const t=this.labels,i=this.outputs;if(t.length===1)return i[0].evaluate(e);const r=this.input.evaluate(e);if(r<=t[0])return i[0].evaluate(e);const o=t.length;if(r>=t[o-1])return i[o-1].evaluate(e);const s=gE(t,r),a=t[s],c=t[s+1],h=bT.interpolationFactor(this.interpolation,r,a,c),m=i[s].evaluate(e),v=i[s+1].evaluate(e);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return qy(m,v,h);case"color":return da.interpolate(m,v,h);case"padding":return h0.interpolate(m,v,h);case"colorArray":return ip.interpolate(m,v,h);case"numberArray":return d0.interpolate(m,v,h);case"variableAnchorOffsetCollection":return lv.interpolate(m,v,h);case"array":return cx(m,v,h);case"projectionDefinition":return Rx.interpolate(m,v,h)}case"interpolate-hcl":switch(this.type.kind){case"color":return da.interpolate(m,v,h,"hcl");case"colorArray":return ip.interpolate(m,v,h,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return da.interpolate(m,v,h,"lab");case"colorArray":return ip.interpolate(m,v,h,"lab")}}}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}};function xB(n,e,t,i){const r=i-t,o=n-t;return r===0?0:e===1?o/r:(Math.pow(e,o)-1)/(Math.pow(e,r)-1)}const Uue={color:da.interpolate,number:qy,padding:h0.interpolate,numberArray:d0.interpolate,colorArray:ip.interpolate,variableAnchorOffsetCollection:lv.interpolate,array:cx};let MH=class CT{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let i=null;const r=t.expectedType;r&&r.kind!=="value"&&(i=r);const o=[];for(const a of e.slice(1)){const c=t.parse(a,1+o.length,i,void 0,{typeAnnotation:"omit"});if(!c)return null;i=i||c.type,o.push(c)}if(!i)throw new Error("No output type");return r&&o.some(a=>P3(r,a.type))?new CT(Vr,o):new CT(i,o)}evaluate(e){let t=null,i=0,r;for(const o of this.args)if(i++,t=o.evaluate(e),t&&t instanceof tC&&!t.available&&(r||(r=t.name),t=null,i===this.args.length&&(t=r)),t!==null)break;return t}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}};function LL(n,e){return n==="=="||n==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function Kue(n,e,t){return e===t}function Lue(n,e,t){return e!==t}function Fue(n,e,t){return e<t}function zue(n,e,t){return e>t}function jue(n,e,t){return e<=t}function Nue(n,e,t){return e>=t}function wH(n,e,t,i){return i.compare(e,t)===0}function Gue(n,e,t,i){return!wH(n,e,t,i)}function Wue(n,e,t,i){return i.compare(e,t)<0}function Que(n,e,t,i){return i.compare(e,t)>0}function Yue(n,e,t,i){return i.compare(e,t)<=0}function que(n,e,t,i){return i.compare(e,t)>=0}function Dx(n,e,t){const i=n!=="=="&&n!=="!=";return class SH{constructor(o,s,a){this.type=Jr,this.lhs=o,this.rhs=s,this.collator=a,this.hasUntypedArgument=o.type.kind==="value"||s.type.kind==="value"}static parse(o,s){if(o.length!==3&&o.length!==4)return s.error("Expected two or three arguments.");const a=o[0];let c=s.parse(o[1],1,Vr);if(!c)return null;if(!LL(a,c.type))return s.concat(1).error(`"${a}" comparisons are not supported for type '${_l(c.type)}'.`);let h=s.parse(o[2],2,Vr);if(!h)return null;if(!LL(a,h.type))return s.concat(2).error(`"${a}" comparisons are not supported for type '${_l(h.type)}'.`);if(c.type.kind!==h.type.kind&&c.type.kind!=="value"&&h.type.kind!=="value")return s.error(`Cannot compare types '${_l(c.type)}' and '${_l(h.type)}'.`);i&&(c.type.kind==="value"&&h.type.kind!=="value"?c=new r1(h.type,[c]):c.type.kind!=="value"&&h.type.kind==="value"&&(h=new r1(c.type,[h])));let m=null;if(o.length===4){if(c.type.kind!=="string"&&h.type.kind!=="string"&&c.type.kind!=="value"&&h.type.kind!=="value")return s.error("Cannot use collator to compare non-string types.");if(m=s.parse(o[3],3,hE),!m)return null}return new SH(c,h,m)}evaluate(o){const s=this.lhs.evaluate(o),a=this.rhs.evaluate(o);if(i&&this.hasUntypedArgument){const c=Zu(s),h=Zu(a);if(c.kind!==h.kind||!(c.kind==="string"||c.kind==="number"))throw new Dl(`Expected arguments for "${n}" to be (string, string) or (number, number), but found (${c.kind}, ${h.kind}) instead.`)}if(this.collator&&!i&&this.hasUntypedArgument){const c=Zu(s),h=Zu(a);if(c.kind!=="string"||h.kind!=="string")return e(o,s,a)}return this.collator?t(o,s,a,this.collator.evaluate(o)):e(o,s,a)}eachChild(o){o(this.lhs),o(this.rhs),this.collator&&o(this.collator)}outputDefined(){return!0}}}const Vue=Dx("==",Kue,wH),$ue=Dx("!=",Lue,Gue),Hue=Dx("<",Fue,Wue),Zue=Dx(">",zue,Que),Xue=Dx("<=",jue,Yue),Jue=Dx(">=",Nue,que);let EH=class BH{constructor(e,t,i){this.type=hE,this.locale=i,this.caseSensitive=e,this.diacriticSensitive=t}static parse(e,t){if(e.length!==2)return t.error("Expected one argument.");const i=e[1];if(typeof i!="object"||Array.isArray(i))return t.error("Collator options argument must be an object.");const r=t.parse(i["case-sensitive"]===void 0?!1:i["case-sensitive"],1,Jr);if(!r)return null;const o=t.parse(i["diacritic-sensitive"]===void 0?!1:i["diacritic-sensitive"],1,Jr);if(!o)return null;let s=null;return i.locale&&(s=t.parse(i.locale,1,fo),!s)?null:new BH(r,o,s)}evaluate(e){return new sD(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}},ece=class OH{constructor(e,t,i,r,o){this.type=fo,this.number=e,this.locale=t,this.currency=i,this.minFractionDigits=r,this.maxFractionDigits=o}static parse(e,t){if(e.length!==3)return t.error("Expected two arguments.");const i=t.parse(e[1],1,Jn);if(!i)return null;const r=e[2];if(typeof r!="object"||Array.isArray(r))return t.error("NumberFormat options argument must be an object.");let o=null;if(r.locale&&(o=t.parse(r.locale,1,fo),!o))return null;let s=null;if(r.currency&&(s=t.parse(r.currency,1,fo),!s))return null;let a=null;if(r["min-fraction-digits"]&&(a=t.parse(r["min-fraction-digits"],1,Jn),!a))return null;let c=null;return r["max-fraction-digits"]&&(c=t.parse(r["max-fraction-digits"],1,Jn),!c)?null:new OH(i,o,s,a,c)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}},tce=class IH{constructor(e){this.type=dE,this.sections=e}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const i=e[1];if(!Array.isArray(i)&&typeof i=="object")return t.error("First argument must be an image or text section.");const r=[];let o=!1;for(let s=1;s<=e.length-1;++s){const a=e[s];if(o&&typeof a=="object"&&!Array.isArray(a)){o=!1;let c=null;if(a["font-scale"]&&(c=t.parse(a["font-scale"],1,Jn),!c))return null;let h=null;if(a["text-font"]&&(h=t.parse(a["text-font"],1,cf(fo)),!h))return null;let m=null;if(a["text-color"]&&(m=t.parse(a["text-color"],1,Hg),!m))return null;let v=null;if(a["vertical-align"]){if(typeof a["vertical-align"]=="string"&&!xue.includes(a["vertical-align"]))return t.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${a["vertical-align"]}' instead.`);if(v=t.parse(a["vertical-align"],1,fo),!v)return null}const x=r[r.length-1];x.scale=c,x.font=h,x.textColor=m,x.verticalAlign=v}else{const c=t.parse(e[s],1,Vr);if(!c)return null;const h=c.type.kind;if(h!=="string"&&h!=="value"&&h!=="null"&&h!=="resolvedImage")return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");o=!0,r.push({content:c,scale:null,font:null,textColor:null,verticalAlign:null})}}return new IH(r)}evaluate(e){const t=i=>{const r=i.content.evaluate(e);return Zu(r)===V4?new gT("",r,null,null,null,i.verticalAlign?i.verticalAlign.evaluate(e):null):new gT(a3(r),null,i.scale?i.scale.evaluate(e):null,i.font?i.font.evaluate(e).join(","):null,i.textColor?i.textColor.evaluate(e):null,i.verticalAlign?i.verticalAlign.evaluate(e):null)};return new Tx(this.sections.map(t))}eachChild(e){for(const t of this.sections)e(t.content),t.scale&&e(t.scale),t.font&&e(t.font),t.textColor&&e(t.textColor),t.verticalAlign&&e(t.verticalAlign)}outputDefined(){return!1}},nce=class kH{constructor(e){this.type=V4,this.input=e}static parse(e,t){if(e.length!==2)return t.error("Expected two arguments.");const i=t.parse(e[1],1,fo);return i?new kH(i):t.error("No image name provided.")}evaluate(e){const t=this.input.evaluate(e),i=tC.fromString(t);return i&&e.availableImages&&(i.available=e.availableImages.indexOf(t)>-1),i}eachChild(e){e(this.input)}outputDefined(){return!1}},ice=class TH{constructor(e){this.type=Jn,this.input=e}static parse(e,t){if(e.length!==2)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const i=t.parse(e[1],1);return i?i.type.kind!=="array"&&i.type.kind!=="string"&&i.type.kind!=="value"?t.error(`Expected argument of type string or array, but found ${_l(i.type)} instead.`):new TH(i):null}evaluate(e){const t=this.input.evaluate(e);if(typeof t=="string")return[...t].length;if(Array.isArray(t))return t.length;throw new Dl(`Expected value to be of type string or array, but found ${_l(Zu(t))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}};const Zg=8192;function rce(n,e){const t=oce(n[0]),i=ace(n[1]),r=Math.pow(2,e.z);return[Math.round(t*r*Zg),Math.round(i*r*Zg)]}function aD(n,e){const t=Math.pow(2,e.z),i=(n[0]/Zg+e.x)/t,r=(n[1]/Zg+e.y)/t;return[sce(i),lce(r)]}function oce(n){return(180+n)/360}function sce(n){return n*360-180}function ace(n){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n*Math.PI/360)))/360}function lce(n){return 360/Math.PI*Math.atan(Math.exp((180-n*360)*Math.PI/180))-90}function $4(n,e){n[0]=Math.min(n[0],e[0]),n[1]=Math.min(n[1],e[1]),n[2]=Math.max(n[2],e[0]),n[3]=Math.max(n[3],e[1])}function K3(n,e){return!(n[0]<=e[0]||n[2]>=e[2]||n[1]<=e[1]||n[3]>=e[3])}function uce(n,e,t){return e[1]>n[1]!=t[1]>n[1]&&n[0]<(t[0]-e[0])*(n[1]-e[1])/(t[1]-e[1])+e[0]}function cce(n,e,t){const i=n[0]-e[0],r=n[1]-e[1],o=n[0]-t[0],s=n[1]-t[1];return i*s-o*r===0&&i*o<=0&&r*s<=0}function yE(n,e,t,i){const r=[e[0]-n[0],e[1]-n[1]],o=[i[0]-t[0],i[1]-t[1]];return fce(o,r)===0?!1:!!(FL(n,e,t,i)&&FL(t,i,n,e))}function Ace(n,e,t){for(const i of t)for(let r=0;r<i.length-1;++r)if(yE(n,e,i[r],i[r+1]))return!0;return!1}function Px(n,e,t=!1){let i=!1;for(const r of e)for(let o=0;o<r.length-1;o++){if(cce(n,r[o],r[o+1]))return t;uce(n,r[o],r[o+1])&&(i=!i)}return i}function hce(n,e){for(const t of e)if(Px(n,t))return!0;return!1}function RH(n,e){for(const t of n)if(!Px(t,e))return!1;for(let t=0;t<n.length-1;++t)if(Ace(n[t],n[t+1],e))return!1;return!0}function dce(n,e){for(const t of e)if(RH(n,t))return!0;return!1}function fce(n,e){return n[0]*e[1]-n[1]*e[0]}function FL(n,e,t,i){const r=n[0]-t[0],o=n[1]-t[1],s=e[0]-t[0],a=e[1]-t[1],c=i[0]-t[0],h=i[1]-t[1],m=r*h-c*o,v=s*h-c*a;return m>0&&v<0||m<0&&v>0}function lD(n,e,t){const i=[];for(let r=0;r<n.length;r++){const o=[];for(let s=0;s<n[r].length;s++){const a=rce(n[r][s],t);$4(e,a),o.push(a)}i.push(o)}return i}function DH(n,e,t){const i=[];for(let r=0;r<n.length;r++){const o=lD(n[r],e,t);i.push(o)}return i}function PH(n,e,t,i){if(n[0]<t[0]||n[0]>t[2]){const r=i*.5;let o=n[0]-t[0]>r?-i:t[0]-n[0]>r?i:0;o===0&&(o=n[0]-t[2]>r?-i:t[2]-n[0]>r?i:0),n[0]+=o}$4(e,n)}function pce(n){n[0]=n[1]=1/0,n[2]=n[3]=-1/0}function zL(n,e,t,i){const r=Math.pow(2,i.z)*Zg,o=[i.x*Zg,i.y*Zg],s=[];for(const a of n)for(const c of a){const h=[c.x+o[0],c.y+o[1]];PH(h,e,t,r),s.push(h)}return s}function jL(n,e,t,i){const r=Math.pow(2,i.z)*Zg,o=[i.x*Zg,i.y*Zg],s=[];for(const a of n){const c=[];for(const h of a){const m=[h.x+o[0],h.y+o[1]];$4(e,m),c.push(m)}s.push(c)}if(e[2]-e[0]<=r/2){pce(e);for(const a of s)for(const c of a)PH(c,e,t,r)}return s}function mce(n,e){const t=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],r=n.canonicalID();if(e.type==="Polygon"){const o=lD(e.coordinates,i,r),s=zL(n.geometry(),t,i,r);if(!K3(t,i))return!1;for(const a of s)if(!Px(a,o))return!1}if(e.type==="MultiPolygon"){const o=DH(e.coordinates,i,r),s=zL(n.geometry(),t,i,r);if(!K3(t,i))return!1;for(const a of s)if(!hce(a,o))return!1}return!0}function gce(n,e){const t=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],r=n.canonicalID();if(e.type==="Polygon"){const o=lD(e.coordinates,i,r),s=jL(n.geometry(),t,i,r);if(!K3(t,i))return!1;for(const a of s)if(!RH(a,o))return!1}if(e.type==="MultiPolygon"){const o=DH(e.coordinates,i,r),s=jL(n.geometry(),t,i,r);if(!K3(t,i))return!1;for(const a of s)if(!dce(a,o))return!1}return!0}let uD=class ow{constructor(e,t){this.type=Jr,this.geojson=e,this.geometries=t}static parse(e,t){if(e.length!==2)return t.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(U3(e[1])){const i=e[1];if(i.type==="FeatureCollection"){const r=[];for(const o of i.features){const{type:s,coordinates:a}=o.geometry;s==="Polygon"&&r.push(a),s==="MultiPolygon"&&r.push(...a)}if(r.length){const o={type:"MultiPolygon",coordinates:r};return new ow(i,o)}}else if(i.type==="Feature"){const r=i.geometry.type;if(r==="Polygon"||r==="MultiPolygon")return new ow(i,i.geometry)}else if(i.type==="Polygon"||i.type==="MultiPolygon")return new ow(i,i)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return mce(e,this.geometries);if(e.geometryType()==="LineString")return gce(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}},UH=class{constructor(e=[],t=(i,r)=>i<r?-1:i>r?1:0){if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let i=(this.length>>1)-1;i>=0;i--)this._down(i)}push(e){this.data.push(e),this._up(this.length++)}pop(){if(this.length===0)return;const e=this.data[0],t=this.data.pop();return--this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:i}=this,r=t[e];for(;e>0;){const o=e-1>>1,s=t[o];if(i(r,s)>=0)break;t[e]=s,e=o}t[e]=r}_down(e){const{data:t,compare:i}=this,r=this.length>>1,o=t[e];for(;e<r;){let s=(e<<1)+1;const a=s+1;if(a<this.length&&i(t[a],t[s])<0&&(s=a),i(t[s],o)>=0)break;t[e]=t[s],e=s}t[e]=o}};function yce(n,e){if(n.length<=1)return[n];const i=[];let r,o;for(const s of n){const a=vce(s);a!==0&&(s.area=Math.abs(a),o===void 0&&(o=a<0),o===a<0?(r&&i.push(r),r=[s]):r.push(s))}return r&&i.push(r),i}function vce(n){let e=0;for(let t=0,i=n.length,r=i-1,o,s;t<i;r=t++)o=n[t],s=n[r],e+=(s.x-o.x)*(o.y+s.y);return e}const bce=6378.137,NL=1/298.257223563,GL=NL*(2-NL),WL=Math.PI/180;let cD=class{constructor(e){const t=WL*bce*1e3,i=Math.cos(e*WL),r=1/(1-GL*(1-i*i)),o=Math.sqrt(r);this.kx=t*o*i,this.ky=t*o*r*(1-GL)}distance(e,t){const i=this.wrap(e[0]-t[0])*this.kx,r=(e[1]-t[1])*this.ky;return Math.sqrt(i*i+r*r)}pointOnLine(e,t){let i=1/0,r,o,s,a;for(let c=0;c<e.length-1;c++){let h=e[c][0],m=e[c][1],v=this.wrap(e[c+1][0]-h)*this.kx,x=(e[c+1][1]-m)*this.ky,E=0;(v!==0||x!==0)&&(E=(this.wrap(t[0]-h)*this.kx*v+(t[1]-m)*this.ky*x)/(v*v+x*x),E>1?(h=e[c+1][0],m=e[c+1][1]):E>0&&(h+=v/this.kx*E,m+=x/this.ky*E)),v=this.wrap(t[0]-h)*this.kx,x=(t[1]-m)*this.ky;const D=v*v+x*x;D<i&&(i=D,r=h,o=m,s=c,a=E)}return{point:[r,o],index:s,t:Math.max(0,Math.min(1,a))}}wrap(e){for(;e<-180;)e+=360;for(;e>180;)e-=360;return e}};const _T=100,xT=50;function KH(n,e){return e[0]-n[0]}function jw(n){return n[1]-n[0]+1}function d1(n,e){return n[1]>=n[0]&&n[1]<e}function MT(n,e){if(n[0]>n[1])return[null,null];const t=jw(n);if(e){if(t===2)return[n,null];const r=Math.floor(t/2);return[[n[0],n[0]+r],[n[0]+r,n[1]]]}if(t===1)return[n,null];const i=Math.floor(t/2)-1;return[[n[0],n[0]+i],[n[0]+i+1,n[1]]]}function wT(n,e){if(!d1(e,n.length))return[1/0,1/0,-1/0,-1/0];const t=[1/0,1/0,-1/0,-1/0];for(let i=e[0];i<=e[1];++i)$4(t,n[i]);return t}function ST(n){const e=[1/0,1/0,-1/0,-1/0];for(const t of n)for(const i of t)$4(e,i);return e}function QL(n){return n[0]!==-1/0&&n[1]!==-1/0&&n[2]!==1/0&&n[3]!==1/0}function AD(n,e,t){if(!QL(n)||!QL(e))return NaN;let i=0,r=0;return n[2]<e[0]&&(i=e[0]-n[2]),n[0]>e[2]&&(i=n[0]-e[2]),n[1]>e[3]&&(r=n[1]-e[3]),n[3]<e[1]&&(r=e[1]-n[3]),t.distance([0,0],[i,r])}function yb(n,e,t){const i=t.pointOnLine(e,n);return t.distance(n,i.point)}function hD(n,e,t,i,r){const o=Math.min(yb(n,[t,i],r),yb(e,[t,i],r)),s=Math.min(yb(t,[n,e],r),yb(i,[n,e],r));return Math.min(o,s)}function Cce(n,e,t,i,r){if(!(d1(e,n.length)&&d1(i,t.length)))return 1/0;let s=1/0;for(let a=e[0];a<e[1];++a){const c=n[a],h=n[a+1];for(let m=i[0];m<i[1];++m){const v=t[m],x=t[m+1];if(yE(c,h,v,x))return 0;s=Math.min(s,hD(c,h,v,x,r))}}return s}function _ce(n,e,t,i,r){if(!(d1(e,n.length)&&d1(i,t.length)))return NaN;let s=1/0;for(let a=e[0];a<=e[1];++a)for(let c=i[0];c<=i[1];++c)if(s=Math.min(s,r.distance(n[a],t[c])),s===0)return s;return s}function xce(n,e,t){if(Px(n,e,!0))return 0;let i=1/0;for(const r of e){const o=r[0],s=r[r.length-1];if(o!==s&&(i=Math.min(i,yb(n,[s,o],t)),i===0))return i;const a=t.pointOnLine(r,n);if(i=Math.min(i,t.distance(n,a.point)),i===0)return i}return i}function Mce(n,e,t,i){if(!d1(e,n.length))return NaN;for(let o=e[0];o<=e[1];++o)if(Px(n[o],t,!0))return 0;let r=1/0;for(let o=e[0];o<e[1];++o){const s=n[o],a=n[o+1];for(const c of t)for(let h=0,m=c.length,v=m-1;h<m;v=h++){const x=c[v],E=c[h];if(yE(s,a,x,E))return 0;r=Math.min(r,hD(s,a,x,E,i))}}return r}function YL(n,e){for(const t of n)for(const i of t)if(Px(i,e,!0))return!0;return!1}function wce(n,e,t,i=1/0){const r=ST(n),o=ST(e);if(i!==1/0&&AD(r,o,t)>=i)return i;if(K3(r,o)){if(YL(n,e))return 0}else if(YL(e,n))return 0;let s=1/0;for(const a of n)for(let c=0,h=a.length,m=h-1;c<h;m=c++){const v=a[m],x=a[c];for(const E of e)for(let D=0,P=E.length,F=P-1;D<P;F=D++){const W=E[F],q=E[D];if(yE(v,x,W,q))return 0;s=Math.min(s,hD(v,x,W,q,t))}}return s}function qL(n,e,t,i,r,o){if(!o)return;const s=AD(wT(i,o),r,t);s<e&&n.push([s,o,[0,0]])}function GM(n,e,t,i,r,o,s){if(!o||!s)return;const a=AD(wT(i,o),wT(r,s),t);a<e&&n.push([a,o,s])}function Nw(n,e,t,i,r=1/0){let o=Math.min(i.distance(n[0],t[0][0]),r);if(o===0)return o;const s=new UH([[0,[0,n.length-1],[0,0]]],KH),a=ST(t);for(;s.length>0;){const c=s.pop();if(c[0]>=o)continue;const h=c[1],m=e?xT:_T;if(jw(h)<=m){if(!d1(h,n.length))return NaN;if(e){const v=Mce(n,h,t,i);if(isNaN(v)||v===0)return v;o=Math.min(o,v)}else for(let v=h[0];v<=h[1];++v){const x=xce(n[v],t,i);if(o=Math.min(o,x),o===0)return 0}}else{const v=MT(h,e);qL(s,o,i,n,a,v[0]),qL(s,o,i,n,a,v[1])}}return o}function Gw(n,e,t,i,r,o=1/0){let s=Math.min(o,r.distance(n[0],t[0]));if(s===0)return s;const a=new UH([[0,[0,n.length-1],[0,t.length-1]]],KH);for(;a.length>0;){const c=a.pop();if(c[0]>=s)continue;const h=c[1],m=c[2],v=e?xT:_T,x=i?xT:_T;if(jw(h)<=v&&jw(m)<=x){if(!d1(h,n.length)&&d1(m,t.length))return NaN;let E;if(e&&i)E=Cce(n,h,t,m,r),s=Math.min(s,E);else if(e&&!i){const D=n.slice(h[0],h[1]+1);for(let P=m[0];P<=m[1];++P)if(E=yb(t[P],D,r),s=Math.min(s,E),s===0)return s}else if(!e&&i){const D=t.slice(m[0],m[1]+1);for(let P=h[0];P<=h[1];++P)if(E=yb(n[P],D,r),s=Math.min(s,E),s===0)return s}else E=_ce(n,h,t,m,r),s=Math.min(s,E)}else{const E=MT(h,e),D=MT(m,i);GM(a,s,r,n,t,E[0],D[0]),GM(a,s,r,n,t,E[0],D[1]),GM(a,s,r,n,t,E[1],D[0]),GM(a,s,r,n,t,E[1],D[1])}}return s}function Sce(n,e){const t=n.geometry(),i=t.flat().map(s=>aD([s.x,s.y],n.canonical));if(t.length===0)return NaN;const r=new cD(i[0][1]);let o=1/0;for(const s of e){switch(s.type){case"Point":o=Math.min(o,Gw(i,!1,[s.coordinates],!1,r,o));break;case"LineString":o=Math.min(o,Gw(i,!1,s.coordinates,!0,r,o));break;case"Polygon":o=Math.min(o,Nw(i,!1,s.coordinates,r,o));break}if(o===0)return o}return o}function Ece(n,e){const t=n.geometry(),i=t.flat().map(s=>aD([s.x,s.y],n.canonical));if(t.length===0)return NaN;const r=new cD(i[0][1]);let o=1/0;for(const s of e){switch(s.type){case"Point":o=Math.min(o,Gw(i,!0,[s.coordinates],!1,r,o));break;case"LineString":o=Math.min(o,Gw(i,!0,s.coordinates,!0,r,o));break;case"Polygon":o=Math.min(o,Nw(i,!0,s.coordinates,r,o));break}if(o===0)return o}return o}function Bce(n,e){const t=n.geometry();if(t.length===0||t[0].length===0)return NaN;const i=yce(t).map(s=>s.map(a=>a.map(c=>aD([c.x,c.y],n.canonical)))),r=new cD(i[0][0][0][1]);let o=1/0;for(const s of e)for(const a of i){switch(s.type){case"Point":o=Math.min(o,Nw([s.coordinates],!1,a,r,o));break;case"LineString":o=Math.min(o,Nw(s.coordinates,!0,a,r,o));break;case"Polygon":o=Math.min(o,wce(a,s.coordinates,r,o));break}if(o===0)return o}return o}function MB(n){return n.type==="MultiPolygon"?n.coordinates.map(e=>({type:"Polygon",coordinates:e})):n.type==="MultiLineString"?n.coordinates.map(e=>({type:"LineString",coordinates:e})):n.type==="MultiPoint"?n.coordinates.map(e=>({type:"Point",coordinates:e})):[n]}let dD=class sw{constructor(e,t){this.type=Jn,this.geojson=e,this.geometries=t}static parse(e,t){if(e.length!==2)return t.error(`'distance' expression requires exactly one argument, but found ${e.length-1} instead.`);if(U3(e[1])){const i=e[1];if(i.type==="FeatureCollection")return new sw(i,i.features.map(r=>MB(r.geometry)).flat());if(i.type==="Feature")return new sw(i,MB(i.geometry));if("type"in i&&"coordinates"in i)return new sw(i,MB(i))}return t.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return Sce(e,this.geometries);if(e.geometryType()==="LineString")return Ece(e,this.geometries);if(e.geometryType()==="Polygon")return Bce(e,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}},fD=class LH{constructor(e){this.type=Vr,this.key=e}static parse(e,t){if(e.length!==2)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const i=e[1];return i==null?t.error("Global state property must be defined."):typeof i!="string"?t.error(`Global state property must be string, but found ${typeof e[1]} instead.`):new LH(i)}evaluate(e){var t;const i=(t=e.globals)===null||t===void 0?void 0:t.globalState;return!i||Object.keys(i).length===0?null:s3(i,this.key)}eachChild(){}outputDefined(){return!1}};const pD={"==":Vue,"!=":$ue,">":Zue,"<":Hue,">=":Jue,"<=":Xue,array:r1,at:Sue,boolean:r1,case:Iue,coalesce:MH,collator:EH,format:tce,image:nce,in:Eue,"index-of":Bue,interpolate:a1,"interpolate-hcl":a1,"interpolate-lab":a1,length:ice,let:fH,literal:zw,match:Oue,number:r1,"number-format":ece,object:r1,slice:kue,step:_H,string:r1,"to-boolean":I_,"to-color":I_,"to-number":I_,"to-string":I_,var:mH,within:uD,distance:dD,"global-state":fD};let Ux=class K2{constructor(e,t,i,r){this.name=e,this.type=t,this._evaluate=i,this.args=r}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}static parse(e,t){const i=e[0],r=K2.definitions[i];if(!r)return t.error(`Unknown expression "${i}". If you wanted a literal array, use ["literal", [...]].`,0);const o=Array.isArray(r)?r[0]:r.type,s=Array.isArray(r)?[[r[1],r[2]]]:r.overloads,a=s.filter(([h])=>!Array.isArray(h)||h.length===e.length-1);let c=null;for(const[h,m]of a){c=new hH(t.registry,Ww,t.path,null,t.scope);const v=[];let x=!1;for(let E=1;E<e.length;E++){const D=e[E],P=Array.isArray(h)?h[E-1]:h.type,F=c.parse(D,1+v.length,P);if(!F){x=!0;break}v.push(F)}if(!x){if(Array.isArray(h)&&h.length!==v.length){c.error(`Expected ${h.length} arguments, but found ${v.length} instead.`);continue}for(let E=0;E<v.length;E++){const D=Array.isArray(h)?h[E]:h.type,P=v[E];c.concat(E+1).checkSubtype(D,P.type)}if(c.errors.length===0)return new K2(i,o,m,v)}}if(a.length===1)t.errors.push(...c.errors);else{const m=(a.length?a:s).map(([x])=>Ice(x)).join(" | "),v=[];for(let x=1;x<e.length;x++){const E=t.parse(e[x],1+v.length);if(!E)return null;v.push(_l(E.type))}t.error(`Expected arguments of type ${m}, but found (${v.join(", ")}) instead.`)}return null}static register(e,t){K2.definitions=t;for(const i in t)e[i]=K2}};function VL(n,[e,t,i,r]){e=e.evaluate(n),t=t.evaluate(n),i=i.evaluate(n);const o=r?r.evaluate(n):1,s=aH(e,t,i,o);if(s)throw new Dl(s);return new da(e/255,t/255,i/255,o,!1)}function $L(n,e){return n in e}function wB(n,e){const t=e[n];return typeof t>"u"?null:t}function Oce(n,e,t,i){for(;t<=i;){const r=t+i>>1;if(e[r]===n)return!0;e[r]>n?i=r-1:t=r+1}return!1}function nb(n){return{type:n}}Ux.register(pD,{error:[Aue,[fo],(n,[e])=>{throw new Dl(e.evaluate(n))}],typeof:[fo,[Vr],(n,[e])=>_l(Zu(e.evaluate(n)))],"to-rgba":[cf(Jn,4),[Hg],(n,[e])=>{const[t,i,r,o]=e.evaluate(n).rgb;return[t*255,i*255,r*255,o]}],rgb:[Hg,[Jn,Jn,Jn],VL],rgba:[Hg,[Jn,Jn,Jn,Jn],VL],has:{type:Jr,overloads:[[[fo],(n,[e])=>$L(e.evaluate(n),n.properties())],[[fo,Bb],(n,[e,t])=>$L(e.evaluate(n),t.evaluate(n))]]},get:{type:Vr,overloads:[[[fo],(n,[e])=>wB(e.evaluate(n),n.properties())],[[fo,Bb],(n,[e,t])=>wB(e.evaluate(n),t.evaluate(n))]]},"feature-state":[Vr,[fo],(n,[e])=>wB(e.evaluate(n),n.featureState||{})],properties:[Bb,[],n=>n.properties()],"geometry-type":[fo,[],n=>n.geometryType()],id:[Vr,[],n=>n.id()],zoom:[Jn,[],n=>n.globals.zoom],"heatmap-density":[Jn,[],n=>n.globals.heatmapDensity||0],elevation:[Jn,[],n=>n.globals.elevation||0],"line-progress":[Jn,[],n=>n.globals.lineProgress||0],accumulated:[Vr,[],n=>n.globals.accumulated===void 0?null:n.globals.accumulated],"+":[Jn,nb(Jn),(n,e)=>{let t=0;for(const i of e)t+=i.evaluate(n);return t}],"*":[Jn,nb(Jn),(n,e)=>{let t=1;for(const i of e)t*=i.evaluate(n);return t}],"-":{type:Jn,overloads:[[[Jn,Jn],(n,[e,t])=>e.evaluate(n)-t.evaluate(n)],[[Jn],(n,[e])=>-e.evaluate(n)]]},"/":[Jn,[Jn,Jn],(n,[e,t])=>e.evaluate(n)/t.evaluate(n)],"%":[Jn,[Jn,Jn],(n,[e,t])=>e.evaluate(n)%t.evaluate(n)],ln2:[Jn,[],()=>Math.LN2],pi:[Jn,[],()=>Math.PI],e:[Jn,[],()=>Math.E],"^":[Jn,[Jn,Jn],(n,[e,t])=>Math.pow(e.evaluate(n),t.evaluate(n))],sqrt:[Jn,[Jn],(n,[e])=>Math.sqrt(e.evaluate(n))],log10:[Jn,[Jn],(n,[e])=>Math.log(e.evaluate(n))/Math.LN10],ln:[Jn,[Jn],(n,[e])=>Math.log(e.evaluate(n))],log2:[Jn,[Jn],(n,[e])=>Math.log(e.evaluate(n))/Math.LN2],sin:[Jn,[Jn],(n,[e])=>Math.sin(e.evaluate(n))],cos:[Jn,[Jn],(n,[e])=>Math.cos(e.evaluate(n))],tan:[Jn,[Jn],(n,[e])=>Math.tan(e.evaluate(n))],asin:[Jn,[Jn],(n,[e])=>Math.asin(e.evaluate(n))],acos:[Jn,[Jn],(n,[e])=>Math.acos(e.evaluate(n))],atan:[Jn,[Jn],(n,[e])=>Math.atan(e.evaluate(n))],min:[Jn,nb(Jn),(n,e)=>Math.min(...e.map(t=>t.evaluate(n)))],max:[Jn,nb(Jn),(n,e)=>Math.max(...e.map(t=>t.evaluate(n)))],abs:[Jn,[Jn],(n,[e])=>Math.abs(e.evaluate(n))],round:[Jn,[Jn],(n,[e])=>{const t=e.evaluate(n);return t<0?-Math.round(-t):Math.round(t)}],floor:[Jn,[Jn],(n,[e])=>Math.floor(e.evaluate(n))],ceil:[Jn,[Jn],(n,[e])=>Math.ceil(e.evaluate(n))],"filter-==":[Jr,[fo,Vr],(n,[e,t])=>n.properties()[e.value]===t.value],"filter-id-==":[Jr,[Vr],(n,[e])=>n.id()===e.value],"filter-type-==":[Jr,[fo],(n,[e])=>n.geometryType()===e.value],"filter-<":[Jr,[fo,Vr],(n,[e,t])=>{const i=n.properties()[e.value],r=t.value;return typeof i==typeof r&&i<r}],"filter-id-<":[Jr,[Vr],(n,[e])=>{const t=n.id(),i=e.value;return typeof t==typeof i&&t<i}],"filter->":[Jr,[fo,Vr],(n,[e,t])=>{const i=n.properties()[e.value],r=t.value;return typeof i==typeof r&&i>r}],"filter-id->":[Jr,[Vr],(n,[e])=>{const t=n.id(),i=e.value;return typeof t==typeof i&&t>i}],"filter-<=":[Jr,[fo,Vr],(n,[e,t])=>{const i=n.properties()[e.value],r=t.value;return typeof i==typeof r&&i<=r}],"filter-id-<=":[Jr,[Vr],(n,[e])=>{const t=n.id(),i=e.value;return typeof t==typeof i&&t<=i}],"filter->=":[Jr,[fo,Vr],(n,[e,t])=>{const i=n.properties()[e.value],r=t.value;return typeof i==typeof r&&i>=r}],"filter-id->=":[Jr,[Vr],(n,[e])=>{const t=n.id(),i=e.value;return typeof t==typeof i&&t>=i}],"filter-has":[Jr,[Vr],(n,[e])=>e.value in n.properties()],"filter-has-id":[Jr,[],n=>n.id()!==null&&n.id()!==void 0],"filter-type-in":[Jr,[cf(fo)],(n,[e])=>e.value.indexOf(n.geometryType())>=0],"filter-id-in":[Jr,[cf(Vr)],(n,[e])=>e.value.indexOf(n.id())>=0],"filter-in-small":[Jr,[fo,cf(Vr)],(n,[e,t])=>t.value.indexOf(n.properties()[e.value])>=0],"filter-in-large":[Jr,[fo,cf(Vr)],(n,[e,t])=>Oce(n.properties()[e.value],t.value,0,t.value.length-1)],all:{type:Jr,overloads:[[[Jr,Jr],(n,[e,t])=>e.evaluate(n)&&t.evaluate(n)],[nb(Jr),(n,e)=>{for(const t of e)if(!t.evaluate(n))return!1;return!0}]]},any:{type:Jr,overloads:[[[Jr,Jr],(n,[e,t])=>e.evaluate(n)||t.evaluate(n)],[nb(Jr),(n,e)=>{for(const t of e)if(t.evaluate(n))return!0;return!1}]]},"!":[Jr,[Jr],(n,[e])=>!e.evaluate(n)],"is-supported-script":[Jr,[fo],(n,[e])=>{const t=n.globals&&n.globals.isSupportedScript;return t?t(e.evaluate(n)):!0}],upcase:[fo,[fo],(n,[e])=>e.evaluate(n).toUpperCase()],downcase:[fo,[fo],(n,[e])=>e.evaluate(n).toLowerCase()],concat:[fo,nb(Vr),(n,e)=>e.map(t=>a3(t.evaluate(n))).join("")],"resolved-locale":[fo,[hE],(n,[e])=>e.evaluate(n).resolvedLocale()]});function Ice(n){return Array.isArray(n)?`(${n.map(_l).join(", ")})`:`(${_l(n.type)}...)`}function Ww(n){if(n instanceof mH)return Ww(n.boundExpression);if(n instanceof Ux&&n.name==="error")return!1;if(n instanceof EH)return!1;if(n instanceof uD)return!1;if(n instanceof dD)return!1;if(n instanceof fD)return!1;const e=n instanceof I_||n instanceof r1;let t=!0;return n.eachChild(i=>{e?t=t&&Ww(i):t=t&&i instanceof zw}),t?vE(n)&&bE(n,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"]):!1}function vE(n){if(n instanceof Ux){if(n.name==="get"&&n.args.length===1)return!1;if(n.name==="feature-state")return!1;if(n.name==="has"&&n.args.length===1)return!1;if(n.name==="properties"||n.name==="geometry-type"||n.name==="id")return!1;if(/^filter-/.test(n.name))return!1}if(n instanceof uD||n instanceof dD)return!1;let e=!0;return n.eachChild(t=>{e&&!vE(t)&&(e=!1)}),e}function L3(n){if(n instanceof Ux&&n.name==="feature-state")return!1;let e=!0;return n.eachChild(t=>{e&&!L3(t)&&(e=!1)}),e}function bE(n,e){if(n instanceof Ux&&e.indexOf(n.name)>=0)return!1;let t=!0;return n.eachChild(i=>{t&&!bE(i,e)&&(t=!1)}),t}function ET(n){return{result:"success",value:n}}function v_(n){return{result:"error",value:n}}function Qw(n){return n["property-type"]==="data-driven"||n["property-type"]==="cross-faded-data-driven"}function FH(n){return!!n.expression&&n.expression.parameters.indexOf("zoom")>-1}function mD(n){return!!n.expression&&n.expression.interpolated}function mo(n){return n instanceof Number?"number":n instanceof String?"string":n instanceof Boolean?"boolean":Array.isArray(n)?"array":n===null?"null":typeof n}function H4(n){return typeof n=="object"&&n!==null&&!Array.isArray(n)&&Zu(n)===Bb}function kce(n){return n}function Tce(n){switch(n.type){case"color":return da.parse;case"padding":return h0.parse;case"numberArray":return d0.parse;case"colorArray":return ip.parse;default:return null}}function Rce(n){switch(n){case"exponential":return zH;case"interval":return Pce;case"categorical":return Dce;case"identity":return Uce;default:throw new Error(`Unknown function type "${n}"`)}}function gD(n,e){const t=n.stops&&typeof n.stops[0][0]=="object",i=t||n.property!==void 0,r=t||!i,o=n.type||(mD(e)?"exponential":"interval"),s=Tce(e);if(s&&(n=ux({},n),n.stops&&(n.stops=n.stops.map(m=>[m[0],s(m[1])])),n.default?n.default=s(n.default):n.default=s(e.default)),n.colorSpace&&!_ue(n.colorSpace))throw new Error(`Unknown color space: "${n.colorSpace}"`);const a=Rce(o);let c,h;if(o==="categorical"){c=Object.create(null);for(const m of n.stops)c[m[0]]=m[1];h=typeof n.stops[0][0]}if(t){const m={},v=[];for(let D=0;D<n.stops.length;D++){const P=n.stops[D],F=P[0].zoom;m[F]===void 0&&(m[F]={zoom:F,type:n.type,property:n.property,default:n.default,stops:[]},v.push(F)),m[F].stops.push([P[0].value,P[1]])}const x=[];for(const D of v)x.push([m[D].zoom,gD(m[D],e)]);const E={name:"linear"};return{kind:"composite",interpolationType:E,interpolationFactor:a1.interpolationFactor.bind(void 0,E),zoomStops:x.map(D=>D[0]),evaluate({zoom:D},P){return zH({stops:x,base:n.base},e,D).evaluate(D,P)}}}else if(r){const m=o==="exponential"?{name:"exponential",base:n.base!==void 0?n.base:1}:null;return{kind:"camera",interpolationType:m,interpolationFactor:a1.interpolationFactor.bind(void 0,m),zoomStops:n.stops.map(v=>v[0]),evaluate:({zoom:v})=>a(n,e,v,c,h)}}else return{kind:"source",evaluate(m,v){const x=v&&v.properties?v.properties[n.property]:void 0;return x===void 0?Z4(n.default,e.default):a(n,e,x,c,h)}}}function Z4(n,e,t){if(n!==void 0)return n;if(e!==void 0)return e;if(t!==void 0)return t}function Dce(n,e,t,i,r){const o=typeof t===r?i[t]:void 0;return Z4(o,n.default,e.default)}function Pce(n,e,t){if(mo(t)!=="number")return Z4(n.default,e.default);const i=n.stops.length;if(i===1||t<=n.stops[0][0])return n.stops[0][1];if(t>=n.stops[i-1][0])return n.stops[i-1][1];const r=gE(n.stops.map(o=>o[0]),t);return n.stops[r][1]}function zH(n,e,t){const i=n.base!==void 0?n.base:1;if(mo(t)!=="number")return Z4(n.default,e.default);const r=n.stops.length;if(r===1||t<=n.stops[0][0])return n.stops[0][1];if(t>=n.stops[r-1][0])return n.stops[r-1][1];const o=gE(n.stops.map(m=>m[0]),t),s=Kce(t,i,n.stops[o][0],n.stops[o+1][0]),a=n.stops[o][1],c=n.stops[o+1][1],h=Uue[e.type]||kce;return typeof a.evaluate=="function"?{evaluate(...m){const v=a.evaluate.apply(void 0,m),x=c.evaluate.apply(void 0,m);if(!(v===void 0||x===void 0))return h(v,x,s,n.colorSpace)}}:h(a,c,s,n.colorSpace)}function Uce(n,e,t){switch(e.type){case"color":t=da.parse(t);break;case"formatted":t=Tx.fromString(t.toString());break;case"resolvedImage":t=tC.fromString(t.toString());break;case"padding":t=h0.parse(t);break;case"colorArray":t=ip.parse(t);break;case"numberArray":t=d0.parse(t);break;default:mo(t)!==e.type&&(e.type!=="enum"||!e.values[t])&&(t=void 0)}return Z4(t,n.default,e.default)}function Kce(n,e,t,i){const r=i-t,o=n-t;return r===0?0:e===1?o/r:(Math.pow(e,o)-1)/(Math.pow(e,r)-1)}let jH=class{constructor(e,t,i){this.expression=e,this._warningHistory={},this._evaluator=new AH,this._defaultValue=t?jce(t):null,this._enumValues=t&&t.type==="enum"?t.values:null,this._globalState=i}evaluateWithoutErrorHandling(e,t,i,r,o,s){return this._globalState&&(e=Ax(e,this._globalState)),this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=i,this._evaluator.canonical=r,this._evaluator.availableImages=o||null,this._evaluator.formattedSection=s,this.expression.evaluate(this._evaluator)}evaluate(e,t,i,r,o,s){this._globalState&&(e=Ax(e,this._globalState)),this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=i||null,this._evaluator.canonical=r,this._evaluator.availableImages=o||null,this._evaluator.formattedSection=s||null;try{const a=this.expression.evaluate(this._evaluator);if(a==null||typeof a=="number"&&a!==a)return this._defaultValue;if(this._enumValues&&!(a in this._enumValues))throw new Dl(`Expected value to be one of ${Object.keys(this._enumValues).map(c=>JSON.stringify(c)).join(", ")}, but found ${JSON.stringify(a)} instead.`);return a}catch(a){return this._warningHistory[a.message]||(this._warningHistory[a.message]=!0,typeof console<"u"&&console.warn(a.message)),this._defaultValue}}};function X4(n){return Array.isArray(n)&&n.length>0&&typeof n[0]=="string"&&n[0]in pD}function yD(n,e,t){const i=new hH(pD,Ww,[],e?zce(e):void 0),r=i.parse(n,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return r?ET(new jH(r,e,t)):v_(i.errors)}let BT=class{constructor(e,t,i){this.kind=e,this._styleExpression=t,this.isStateDependent=e!=="constant"&&!L3(t.expression),this.globalStateRefs=bD(t.expression),this._globalState=i}evaluateWithoutErrorHandling(e,t,i,r,o,s){return this._globalState&&(e=Ax(e,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(e,t,i,r,o,s)}evaluate(e,t,i,r,o,s){return this._globalState&&(e=Ax(e,this._globalState)),this._styleExpression.evaluate(e,t,i,r,o,s)}},OT=class{constructor(e,t,i,r,o){this.kind=e,this.zoomStops=i,this._styleExpression=t,this.isStateDependent=e!=="camera"&&!L3(t.expression),this.globalStateRefs=bD(t.expression),this.interpolationType=r,this._globalState=o}evaluateWithoutErrorHandling(e,t,i,r,o,s){return this._globalState&&(e=Ax(e,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(e,t,i,r,o,s)}evaluate(e,t,i,r,o,s){return this._globalState&&(e=Ax(e,this._globalState)),this._styleExpression.evaluate(e,t,i,r,o,s)}interpolationFactor(e,t,i){return this.interpolationType?a1.interpolationFactor(this.interpolationType,e,t,i):0}};function Lce(n){return n._styleExpression!==void 0}function vD(n,e,t){const i=yD(n,e,t);if(i.result==="error")return i;const r=i.value.expression,o=vE(r);if(!o&&!Qw(e))return v_([new Ug("","data expressions not supported")]);const s=bE(r,["zoom"]);if(!s&&!FH(e))return v_([new Ug("","zoom expressions not supported")]);const a=aw(r);if(!a&&!s)return v_([new Ug("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(a instanceof Ug)return v_([a]);if(a instanceof a1&&!mD(e))return v_([new Ug("",'"interpolate" expressions cannot be used with this property')]);if(!a)return ET(o?new BT("constant",i.value,t):new BT("source",i.value,t));const c=a instanceof a1?a.interpolation:void 0;return ET(o?new OT("camera",i.value,a.labels,c,t):new OT("composite",i.value,a.labels,c,t))}class CE{constructor(e,t){this._parameters=e,this._specification=t,ux(this,gD(this._parameters,this._specification))}static deserialize(e){return new CE(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function Fce(n,e,t){if(H4(n))return new CE(n,e);if(X4(n)){const i=vD(n,e,t);if(i.result==="error")throw new Error(i.value.map(r=>`${r.key}: ${r.message}`).join(", "));return i.value}else{let i=n;return e.type==="color"&&typeof n=="string"?i=da.parse(n):e.type==="padding"&&(typeof n=="number"||Array.isArray(n))?i=h0.parse(n):e.type==="numberArray"&&(typeof n=="number"||Array.isArray(n))?i=d0.parse(n):e.type==="colorArray"&&(typeof n=="string"||Array.isArray(n))?i=ip.parse(n):e.type==="variableAnchorOffsetCollection"&&Array.isArray(n)?i=lv.parse(n):e.type==="projectionDefinition"&&typeof n=="string"&&(i=Rx.parse(n)),{globalStateRefs:new Set,_globalState:null,kind:"constant",evaluate:()=>i}}}function aw(n){let e=null;if(n instanceof fH)e=aw(n.result);else if(n instanceof MH){for(const t of n.args)if(e=aw(t),e)break}else(n instanceof _H||n instanceof a1)&&n.input instanceof Ux&&n.input.name==="zoom"&&(e=n);return e instanceof Ug||n.eachChild(t=>{const i=aw(t);i instanceof Ug?e=i:!e&&i?e=new Ug("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&i&&e!==i&&(e=new Ug("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}function bD(n,e=new Set){return n instanceof fD&&e.add(n.key),n.eachChild(t=>{bD(t,e)}),e}function zce(n){const e={color:Hg,string:fo,number:Jn,enum:fo,boolean:Jr,formatted:dE,padding:fE,numberArray:pE,colorArray:D3,projectionDefinition:AE,resolvedImage:V4,variableAnchorOffsetCollection:mE};return n.type==="array"?cf(e[n.value]||Vr,n.length):e[n.type]}function jce(n){if(n.type==="color"&&H4(n.default))return new da(0,0,0,0);switch(n.type){case"color":return da.parse(n.default)||null;case"padding":return h0.parse(n.default)||null;case"numberArray":return d0.parse(n.default)||null;case"colorArray":return ip.parse(n.default)||null;case"variableAnchorOffsetCollection":return lv.parse(n.default)||null;case"projectionDefinition":return Rx.parse(n.default)||null;default:return n.default===void 0?null:n.default}}function Ax(n,e){const{zoom:t,heatmapDensity:i,elevation:r,lineProgress:o,isSupportedScript:s,accumulated:a}=n??{};return{zoom:t,heatmapDensity:i,elevation:r,lineProgress:o,isSupportedScript:s,accumulated:a,globalState:e}}function _E(n){if(n===!0||n===!1)return!0;if(!Array.isArray(n)||n.length===0)return!1;switch(n[0]){case"has":return n.length>=2&&n[1]!=="$id"&&n[1]!=="$type";case"in":return n.length>=3&&(typeof n[1]!="string"||Array.isArray(n[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return n.length!==3||Array.isArray(n[1])||Array.isArray(n[2]);case"any":case"all":for(const e of n.slice(1))if(!_E(e)&&typeof e!="boolean")return!1;return!0;default:return!0}}function l3(n,e={}){if(_E(n))return n;if(!n)return!0;const t=n,i=t[0];if(n.length<=1)return i!=="any";switch(i){case"==":case"!=":case"<":case">":case"<=":case">=":{const[,r,o]=n;return Gce(r,o,i,e)}case"any":{const[,...r]=t;return["any",...r.map(s=>{const a={},c=l3(s,a),h=Nce(a);return h===!0?c:["case",h,c,!1]})]}case"all":{const[,...r]=t,o=r.map(s=>l3(s,e));return o.length>1?["all",...o]:o[0]}case"none":{const[,...r]=t;return["!",l3(["any",...r],{})]}case"in":{const[,r,...o]=t;return HL(r,o)}case"!in":{const[,r,...o]=t;return HL(r,o,!0)}case"has":return ZL(t[1]);case"!has":return["!",ZL(t[1])];default:return!0}}function Nce(n){const e=[];for(const t in n){const i=t==="$id"?["id"]:["get",t];e.push(["==",["typeof",i],n[t]])}return e.length===0?!0:e.length===1?e[0]:["all",...e]}function Gce(n,e,t,i){let r;if(n==="$type")return[t,["geometry-type"],e];if(n==="$id"?r=["id"]:r=["get",n],i&&e!==null){const o=typeof e;i[n]=o}return t==="=="&&n!=="$id"&&e===null?["all",["has",n],["==",r,null]]:t==="!="&&n!=="$id"&&e===null?["any",["!",["has",n]],["!=",r,null]]:[t,r,e]}function HL(n,e,t=!1){if(e.length===0)return t;let i;n==="$type"?i=["geometry-type"]:n==="$id"?i=["id"]:i=["get",n];let r=!0;const o=typeof e[0];for(const s of e)if(typeof s!==o){r=!1;break}if(r&&(o==="string"||o==="number")){const s=e.sort().filter((a,c)=>c===0||e[c-1]!==a);return["match",i,s,!t,t]}return t?["all",...e.map(s=>["!=",i,s])]:["any",...e.map(s=>["==",i,s])]}function ZL(n){return n==="$type"?!0:n==="$id"?["!=",["id"],null]:["has",n]}function F3(n){return typeof n=="object"?["literal",n]:n}function NH(n,e){let t=n.stops;if(!t)return Wce(n,e);const i=t&&typeof t[0][0]=="object",r=i||n.property!==void 0,o=i||!r;return t=t.map(s=>!r&&e.tokens&&typeof s[1]=="string"?[s[0],GH(s[1])]:[s[0],F3(s[1])]),i?Qce(n,e,t):o?qce(n,e,t):IT(n,e,t)}function Wce(n,e){const t=["get",n.property];if(n.default===void 0)return e.type==="string"?["string",t]:t;if(e.type==="enum")return["match",t,Object.keys(e.values),t,n.default];{const i=[e.type==="color"?"to-color":e.type,t,F3(n.default)];return e.type==="array"&&i.splice(1,0,e.value,e.length||null),i}}function CD(n){switch(n.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function Qce(n,e,t){const i={},r={},o=[];for(let a=0;a<t.length;a++){const c=t[a],h=c[0].zoom;i[h]===void 0&&(i[h]={zoom:h,type:n.type,property:n.property,default:n.default},r[h]=[],o.push(h)),r[h].push([c[0].value,c[1]])}if(xD({},e)==="exponential"){const a=[CD(n),["linear"],["zoom"]];for(const c of o){const h=IT(i[c],e,r[c]);j_(a,c,h,!1)}return a}else{const a=["step",["zoom"]];for(const c of o){const h=IT(i[c],e,r[c]);j_(a,c,h,!0)}return _D(a),a}}function Yce(n,e){if(n!==void 0)return n;if(e!==void 0)return e}function XL(n,e){const t=F3(Yce(n.default,e.default));return t===void 0&&e.type==="resolvedImage"?"":t}function IT(n,e,t){const i=xD(n,e),r=["get",n.property];if(i==="categorical"&&typeof t[0][0]=="boolean"){const o=["case"];for(const s of t)o.push(["==",r,s[0]],s[1]);return o.push(XL(n,e)),o}else if(i==="categorical"){const o=["match",r];for(const s of t)j_(o,s[0],s[1],!1);return o.push(XL(n,e)),o}else if(i==="interval"){const o=["step",["number",r]];for(const s of t)j_(o,s[0],s[1],!0);return _D(o),n.default===void 0?o:["case",["==",["typeof",r],"number"],o,F3(n.default)]}else if(i==="exponential"){const o=n.base!==void 0?n.base:1,s=[CD(n),o===1?["linear"]:["exponential",o],["number",r]];for(const a of t)j_(s,a[0],a[1],!1);return n.default===void 0?s:["case",["==",["typeof",r],"number"],s,F3(n.default)]}else throw new Error(`Unknown property function type ${i}`)}function qce(n,e,t,i=["zoom"]){const r=xD(n,e);let o,s=!1;if(r==="interval")o=["step",i],s=!0;else if(r==="exponential"){const a=n.base!==void 0?n.base:1;o=[CD(n),a===1?["linear"]:["exponential",a],i]}else throw new Error(`Unknown zoom function type "${r}"`);for(const a of t)j_(o,a[0],a[1],s);return _D(o),o}function _D(n){n[0]==="step"&&n.length===3&&(n.push(0),n.push(n[3]))}function j_(n,e,t,i){n.length>3&&e===n[n.length-2]||(i&&n.length===2||n.push(e),n.push(t))}function xD(n,e){return n.type?n.type:e.expression.interpolated?"exponential":"interval"}function GH(n){const e=["concat"],t=/{([^{}]+)}/g;let i=0;for(let r=t.exec(n);r!==null;r=t.exec(n)){const o=n.slice(i,t.lastIndex-r[0].length);i=t.lastIndex,o.length>0&&e.push(o),e.push(["get",r[1]])}if(e.length===1)return n;if(i<n.length)e.push(n.slice(i));else if(e.length===2)return["to-string",e[1]];return e}function Vce(n){for(let e=0;e<ts.layout.length;e++)for(const t in ts[ts.layout[e]])if(t===n)return ts[ts.layout[e]][t];for(let e=0;e<ts.paint.length;e++)for(const t in ts[ts.paint[e]])if(t===n)return ts[ts.paint[e]][t];return null}function $ce(n,e){for(const t in n.sources)e(n.sources[t])}function u3(n,e){for(const t of n.layers)e(t)}function MD(n,e,t){function i(r,o){const s=r[o];s&&Object.keys(s).forEach(a=>{t({path:[r.id,o,a],key:a,value:s[a],reference:Vce(a),set(c){s[a]=c}})})}u3(n,r=>{e.paint&&i(r,"paint"),e.layout&&i(r,"layout")})}function WH(n){const e=n.key,t=n.value;return t?[new qn(e,t,"constants have been deprecated as of v8")]:[]}function eu(n){return n instanceof Number||n instanceof String||n instanceof Boolean?n.valueOf():n}function Nb(n){if(Array.isArray(n))return n.map(Nb);if(n instanceof Object&&!(n instanceof Number||n instanceof String||n instanceof Boolean)){const e={};for(const t in n)e[t]=Nb(n[t]);return e}return eu(n)}function Xf(n){const e=n.key,t=n.value,i=n.valueSpec||{},r=n.objectElementValidators||{},o=n.style,s=n.styleSpec,a=n.validateSpec;let c=[];const h=mo(t);if(h!=="object")return[new qn(e,t,`object expected, ${h} found`)];for(const m in t){const v=m.split(".")[0],x=s3(i,v)||i["*"];let E;if(s3(r,v))E=r[v];else if(s3(i,v))E=a;else if(r["*"])E=r["*"];else if(i["*"])E=a;else{c.push(new qn(e,t[m],`unknown property "${m}"`));continue}c=c.concat(E({key:(e&&`${e}.`)+m,value:t[m],valueSpec:x,style:o,styleSpec:s,object:t,objectKey:m,validateSpec:a},t))}for(const m in i)r[m]||i[m].required&&i[m].default===void 0&&t[m]===void 0&&c.push(new qn(e,t,`missing required property "${m}"`));return c}function wD(n){const e=n.value,t=n.valueSpec,i=n.validateSpec,r=n.style,o=n.styleSpec,s=n.key,a=n.arrayElementValidator||i;if(mo(e)!=="array")return[new qn(s,e,`array expected, ${mo(e)} found`)];if(t.length&&e.length!==t.length)return[new qn(s,e,`array length ${t.length} expected, length ${e.length} found`)];if(t["min-length"]&&e.length<t["min-length"])return[new qn(s,e,`array length at least ${t["min-length"]} expected, length ${e.length} found`)];let c={type:t.value,values:t.values};o.$version<7&&(c.function=t.function),mo(t.value)==="object"&&(c=t.value);let h=[];for(let m=0;m<e.length;m++)h=h.concat(a({array:e,arrayIndex:m,value:e[m],valueSpec:c,validateSpec:n.validateSpec,style:r,styleSpec:o,key:`${s}[${m}]`}));return h}function xE(n){const e=n.key,t=n.value,i=n.valueSpec;let r=mo(t);return r==="number"&&t!==t&&(r="NaN"),r!=="number"?[new qn(e,t,`number expected, ${r} found`)]:"minimum"in i&&t<i.minimum?[new qn(e,t,`${t} is less than the minimum value ${i.minimum}`)]:"maximum"in i&&t>i.maximum?[new qn(e,t,`${t} is greater than the maximum value ${i.maximum}`)]:[]}function QH(n){const e=n.valueSpec,t=eu(n.value.type);let i,r={},o,s;const a=t!=="categorical"&&n.value.property===void 0,c=!a,h=mo(n.value.stops)==="array"&&mo(n.value.stops[0])==="array"&&mo(n.value.stops[0][0])==="object",m=Xf({key:n.key,value:n.value,valueSpec:n.styleSpec.function,validateSpec:n.validateSpec,style:n.style,styleSpec:n.styleSpec,objectElementValidators:{stops:v,default:D}});return t==="identity"&&a&&m.push(new qn(n.key,n.value,'missing required property "property"')),t!=="identity"&&!n.value.stops&&m.push(new qn(n.key,n.value,'missing required property "stops"')),t==="exponential"&&n.valueSpec.expression&&!mD(n.valueSpec)&&m.push(new qn(n.key,n.value,"exponential functions not supported")),n.styleSpec.$version>=8&&(c&&!Qw(n.valueSpec)?m.push(new qn(n.key,n.value,"property functions not supported")):a&&!FH(n.valueSpec)&&m.push(new qn(n.key,n.value,"zoom functions not supported"))),(t==="categorical"||h)&&n.value.property===void 0&&m.push(new qn(n.key,n.value,'"property" property is required')),m;function v(P){if(t==="identity")return[new qn(P.key,P.value,'identity function may not have a "stops" property')];let F=[];const W=P.value;return F=F.concat(wD({key:P.key,value:W,valueSpec:P.valueSpec,validateSpec:P.validateSpec,style:P.style,styleSpec:P.styleSpec,arrayElementValidator:x})),mo(W)==="array"&&W.length===0&&F.push(new qn(P.key,W,"array must have at least one stop")),F}function x(P){let F=[];const W=P.value,q=P.key;if(mo(W)!=="array")return[new qn(q,W,`array expected, ${mo(W)} found`)];if(W.length!==2)return[new qn(q,W,`array length 2 expected, length ${W.length} found`)];if(h){if(mo(W[0])!=="object")return[new qn(q,W,`object expected, ${mo(W[0])} found`)];if(W[0].zoom===void 0)return[new qn(q,W,"object stop key must have zoom")];if(W[0].value===void 0)return[new qn(q,W,"object stop key must have value")];if(s&&s>eu(W[0].zoom))return[new qn(q,W[0].zoom,"stop zoom values must appear in ascending order")];eu(W[0].zoom)!==s&&(s=eu(W[0].zoom),o=void 0,r={}),F=F.concat(Xf({key:`${q}[0]`,value:W[0],valueSpec:{zoom:{}},validateSpec:P.validateSpec,style:P.style,styleSpec:P.styleSpec,objectElementValidators:{zoom:xE,value:E}}))}else F=F.concat(E({key:`${q}[0]`,value:W[0],validateSpec:P.validateSpec,style:P.style,styleSpec:P.styleSpec},W));return X4(Nb(W[1]))?F.concat([new qn(`${q}[1]`,W[1],"expressions are not allowed in function stops.")]):F.concat(P.validateSpec({key:`${q}[1]`,value:W[1],valueSpec:e,validateSpec:P.validateSpec,style:P.style,styleSpec:P.styleSpec}))}function E(P,F){const W=mo(P.value),q=eu(P.value),V=P.value!==null?P.value:F;if(!i)i=W;else if(W!==i)return[new qn(P.key,V,`${W} stop domain type must match previous stop domain type ${i}`)];if(W!=="number"&&W!=="string"&&W!=="boolean")return[new qn(P.key,V,"stop domain value must be a number, string, or boolean")];if(W!=="number"&&t!=="categorical"){let H=`number expected, ${W} found`;return Qw(e)&&t===void 0&&(H+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new qn(P.key,V,H)]}return t==="categorical"&&W==="number"&&(!isFinite(q)||Math.floor(q)!==q)?[new qn(P.key,V,`integer expected, found ${q}`)]:t!=="categorical"&&W==="number"&&o!==void 0&&q<o?[new qn(P.key,V,"stop domain values must appear in ascending order")]:(o=q,t==="categorical"&&q in r?[new qn(P.key,V,"stop domain values must be unique")]:(r[q]=!0,[]))}function D(P){return P.validateSpec({key:P.key,value:P.value,valueSpec:e,validateSpec:P.validateSpec,style:P.style,styleSpec:P.styleSpec})}}function hx(n){const e=(n.expressionContext==="property"?vD:yD)(Nb(n.value),n.valueSpec);if(e.result==="error")return e.value.map(i=>new qn(`${n.key}${i.key}`,n.value,i.message));const t=e.value.expression||e.value._styleExpression.expression;if(n.expressionContext==="property"&&n.propertyKey==="text-font"&&!t.outputDefined())return[new qn(n.key,n.value,`Invalid data expression for "${n.propertyKey}". Output values must be contained as literals within the expression.`)];if(n.expressionContext==="property"&&n.propertyType==="layout"&&!L3(t))return[new qn(n.key,n.value,'"feature-state" data expressions are not supported with layout properties.')];if(n.expressionContext==="filter"&&!L3(t))return[new qn(n.key,n.value,'"feature-state" data expressions are not supported with filters.')];if(n.expressionContext&&n.expressionContext.indexOf("cluster")===0){if(!bE(t,["zoom","feature-state"]))return[new qn(n.key,n.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(n.expressionContext==="cluster-initial"&&!vE(t))return[new qn(n.key,n.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Hce(n){const e=n.value,t=n.key,i=mo(e);return i!=="boolean"?[new qn(t,e,`boolean expected, ${i} found`)]:[]}function kT(n){const e=n.key,t=n.value,i=mo(t);return i!=="string"?[new qn(e,t,`color expected, ${i} found`)]:da.parse(String(t))?[]:[new qn(e,t,`color expected, "${t}" found`)]}function z3(n){const e=n.key,t=n.value,i=n.valueSpec,r=[];return Array.isArray(i.values)?i.values.indexOf(eu(t))===-1&&r.push(new qn(e,t,`expected one of [${i.values.join(", ")}], ${JSON.stringify(t)} found`)):Object.keys(i.values).indexOf(eu(t))===-1&&r.push(new qn(e,t,`expected one of [${Object.keys(i.values).join(", ")}], ${JSON.stringify(t)} found`)),r}function SD(n){return _E(Nb(n.value))?hx(ux({},n,{expressionContext:"filter",valueSpec:{value:"boolean"}})):YH(n)}function YH(n){const e=n.value,t=n.key;if(mo(e)!=="array")return[new qn(t,e,`array expected, ${mo(e)} found`)];const i=n.styleSpec;let r,o=[];if(e.length<1)return[new qn(t,e,"filter array must have at least 1 element")];switch(o=o.concat(z3({key:`${t}[0]`,value:e[0],valueSpec:i.filter_operator,style:n.style,styleSpec:n.styleSpec})),eu(e[0])){case"<":case"<=":case">":case">=":e.length>=2&&eu(e[1])==="$type"&&o.push(new qn(t,e,`"$type" cannot be use with operator "${e[0]}"`));case"==":case"!=":e.length!==3&&o.push(new qn(t,e,`filter array for operator "${e[0]}" must have 3 elements`));case"in":case"!in":e.length>=2&&(r=mo(e[1]),r!=="string"&&o.push(new qn(`${t}[1]`,e[1],`string expected, ${r} found`)));for(let s=2;s<e.length;s++)r=mo(e[s]),eu(e[1])==="$type"?o=o.concat(z3({key:`${t}[${s}]`,value:e[s],valueSpec:i.geometry_type,style:n.style,styleSpec:n.styleSpec})):r!=="string"&&r!=="number"&&r!=="boolean"&&o.push(new qn(`${t}[${s}]`,e[s],`string, number, or boolean expected, ${r} found`));break;case"any":case"all":case"none":for(let s=1;s<e.length;s++)o=o.concat(YH({key:`${t}[${s}]`,value:e[s],style:n.style,styleSpec:n.styleSpec}));break;case"has":case"!has":r=mo(e[1]),e.length!==2?o.push(new qn(t,e,`filter array for "${e[0]}" operator must have 2 elements`)):r!=="string"&&o.push(new qn(`${t}[1]`,e[1],`string expected, ${r} found`));break}return o}function qH(n,e){const t=n.key,i=n.validateSpec,r=n.style,o=n.styleSpec,s=n.value,a=n.objectKey,c=o[`${e}_${n.layerType}`];if(!c)return[];const h=a.match(/^(.*)-transition$/);if(e==="paint"&&h&&c[h[1]]&&c[h[1]].transition)return i({key:t,value:s,valueSpec:o.transition,style:r,styleSpec:o});const m=n.valueSpec||c[a];if(!m)return[new qn(t,s,`unknown property "${a}"`)];let v;if(mo(s)==="string"&&Qw(m)&&!m.tokens&&(v=/^{([^}]+)}$/.exec(s)))return[new qn(t,s,`"${a}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(v[1])} }\`.`)];const x=[];return n.layerType==="symbol"&&a==="text-font"&&H4(Nb(s))&&eu(s.type)==="identity"&&x.push(new qn(t,s,'"text-font" does not support identity functions')),x.concat(i({key:n.key,value:s,valueSpec:m,style:r,styleSpec:o,expressionContext:"property",propertyType:e,propertyKey:a}))}function VH(n){return qH(n,"paint")}function $H(n){return qH(n,"layout")}function HH(n){let e=[];const t=n.value,i=n.key,r=n.style,o=n.styleSpec;if(mo(t)!=="object")return[new qn(i,t,`object expected, ${mo(t)} found`)];!t.type&&!t.ref&&e.push(new qn(i,t,'either "type" or "ref" is required'));let s=eu(t.type);const a=eu(t.ref);if(t.id){const c=eu(t.id);for(let h=0;h<n.arrayIndex;h++){const m=r.layers[h];eu(m.id)===c&&e.push(new qn(i,t.id,`duplicate layer id "${t.id}", previously used at line ${m.id.__line__}`))}}if("ref"in t){["type","source","source-layer","filter","layout"].forEach(h=>{h in t&&e.push(new qn(i,t[h],`"${h}" is prohibited for ref layers`))});let c;r.layers.forEach(h=>{eu(h.id)===a&&(c=h)}),c?c.ref?e.push(new qn(i,t.ref,"ref cannot reference another ref layer")):s=eu(c.type):e.push(new qn(i,t.ref,`ref layer "${a}" not found`))}else if(s!=="background")if(!t.source)e.push(new qn(i,t,'missing required property "source"'));else{const c=r.sources&&r.sources[t.source],h=c&&eu(c.type);c?h==="vector"&&s==="raster"?e.push(new qn(i,t.source,`layer "${t.id}" requires a raster source`)):h!=="raster-dem"&&s==="hillshade"?e.push(new qn(i,t.source,`layer "${t.id}" requires a raster-dem source`)):h!=="raster-dem"&&s==="color-relief"?e.push(new qn(i,t.source,`layer "${t.id}" requires a raster-dem source`)):h==="raster"&&s!=="raster"?e.push(new qn(i,t.source,`layer "${t.id}" requires a vector source`)):h==="vector"&&!t["source-layer"]?e.push(new qn(i,t,`layer "${t.id}" must specify a "source-layer"`)):h==="raster-dem"&&s!=="hillshade"&&s!=="color-relief"?e.push(new qn(i,t.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):s==="line"&&t.paint&&t.paint["line-gradient"]&&(h!=="geojson"||!c.lineMetrics)&&e.push(new qn(i,t,`layer "${t.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):e.push(new qn(i,t.source,`source "${t.source}" not found`))}return e=e.concat(Xf({key:i,value:t,valueSpec:o.layer,style:n.style,styleSpec:n.styleSpec,validateSpec:n.validateSpec,objectElementValidators:{"*"(){return[]},type(){return n.validateSpec({key:`${i}.type`,value:t.type,valueSpec:o.layer.type,style:n.style,styleSpec:n.styleSpec,validateSpec:n.validateSpec,object:t,objectKey:"type"})},filter:SD,layout(c){return Xf({layer:t,key:c.key,value:c.value,style:c.style,styleSpec:c.styleSpec,validateSpec:c.validateSpec,objectElementValidators:{"*"(h){return $H(ux({layerType:s},h))}}})},paint(c){return Xf({layer:t,key:c.key,value:c.value,style:c.style,styleSpec:c.styleSpec,validateSpec:c.validateSpec,objectElementValidators:{"*"(h){return VH(ux({layerType:s},h))}}})}}})),e}function Gb(n){const e=n.value,t=n.key,i=mo(e);return i!=="string"?[new qn(t,e,`string expected, ${i} found`)]:[]}function Zce(n){var e;const t=(e=n.sourceName)!==null&&e!==void 0?e:"",i=n.value,r=n.styleSpec,o=r.source_raster_dem,s=n.style;let a=[];const c=mo(i);if(i===void 0)return a;if(c!=="object")return a.push(new qn("source_raster_dem",i,`object expected, ${c} found`)),a;const m=eu(i.encoding)==="custom",v=["redFactor","greenFactor","blueFactor","baseShift"],x=n.value.encoding?`"${n.value.encoding}"`:"Default";for(const E in i)!m&&v.includes(E)?a.push(new qn(E,i[E],`In "${t}": "${E}" is only valid when "encoding" is set to "custom". ${x} encoding found`)):o[E]?a=a.concat(n.validateSpec({key:E,value:i[E],valueSpec:o[E],validateSpec:n.validateSpec,style:s,styleSpec:r})):a.push(new qn(E,i[E],`unknown property "${E}"`));return a}const JL={promoteId:Xce};function ZH(n){const e=n.value,t=n.key,i=n.styleSpec,r=n.style,o=n.validateSpec;if(!e.type)return[new qn(t,e,'"type" is required')];const s=eu(e.type);let a;switch(s){case"vector":case"raster":return a=Xf({key:t,value:e,valueSpec:i[`source_${s.replace("-","_")}`],style:n.style,styleSpec:i,objectElementValidators:JL,validateSpec:o}),a;case"raster-dem":return a=Zce({sourceName:t,value:e,style:n.style,styleSpec:i,validateSpec:o}),a;case"geojson":if(a=Xf({key:t,value:e,valueSpec:i.source_geojson,style:r,styleSpec:i,validateSpec:o,objectElementValidators:JL}),e.cluster)for(const c in e.clusterProperties){const[h,m]=e.clusterProperties[c],v=typeof h=="string"?[h,["accumulated"],["get",c]]:h;a.push(...hx({key:`${t}.${c}.map`,value:m,expressionContext:"cluster-map"})),a.push(...hx({key:`${t}.${c}.reduce`,value:v,expressionContext:"cluster-reduce"}))}return a;case"video":return Xf({key:t,value:e,valueSpec:i.source_video,style:r,validateSpec:o,styleSpec:i});case"image":return Xf({key:t,value:e,valueSpec:i.source_image,style:r,validateSpec:o,styleSpec:i});case"canvas":return[new qn(t,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return z3({key:`${t}.type`,value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function Xce({key:n,value:e}){if(mo(e)==="string")return Gb({key:n,value:e});{const t=[];for(const i in e)t.push(...Gb({key:`${n}.${i}`,value:e[i]}));return t}}function XH(n){const e=n.value,t=n.styleSpec,i=t.light,r=n.style;let o=[];const s=mo(e);if(e===void 0)return o;if(s!=="object")return o=o.concat([new qn("light",e,`object expected, ${s} found`)]),o;for(const a in e){const c=a.match(/^(.*)-transition$/);c&&i[c[1]]&&i[c[1]].transition?o=o.concat(n.validateSpec({key:a,value:e[a],valueSpec:t.transition,validateSpec:n.validateSpec,style:r,styleSpec:t})):i[a]?o=o.concat(n.validateSpec({key:a,value:e[a],valueSpec:i[a],validateSpec:n.validateSpec,style:r,styleSpec:t})):o=o.concat([new qn(a,e[a],`unknown property "${a}"`)])}return o}function JH(n){const e=n.value,t=n.styleSpec,i=t.sky,r=n.style,o=mo(e);if(e===void 0)return[];if(o!=="object")return[new qn("sky",e,`object expected, ${o} found`)];let s=[];for(const a in e)i[a]?s=s.concat(n.validateSpec({key:a,value:e[a],valueSpec:i[a],style:r,styleSpec:t})):s=s.concat([new qn(a,e[a],`unknown property "${a}"`)]);return s}function eZ(n){const e=n.value,t=n.styleSpec,i=t.terrain,r=n.style;let o=[];const s=mo(e);if(e===void 0)return o;if(s!=="object")return o=o.concat([new qn("terrain",e,`object expected, ${s} found`)]),o;for(const a in e)i[a]?o=o.concat(n.validateSpec({key:a,value:e[a],valueSpec:i[a],validateSpec:n.validateSpec,style:r,styleSpec:t})):o=o.concat([new qn(a,e[a],`unknown property "${a}"`)]);return o}function Jce(n){return Gb(n).length===0?[]:hx(n)}function eAe(n){return Gb(n).length===0?[]:hx(n)}function tAe(n){const e=n.key,t=n.value;if(mo(t)==="array"){if(t.length<1||t.length>4)return[new qn(e,t,`padding requires 1 to 4 values; ${t.length} values found`)];const r={type:"number"};let o=[];for(let s=0;s<t.length;s++)o=o.concat(n.validateSpec({key:`${e}[${s}]`,value:t[s],validateSpec:n.validateSpec,valueSpec:r}));return o}else return xE({key:e,value:t,valueSpec:{}})}function nAe(n){const e=n.key,t=n.value;if(mo(t)==="array"){const r={type:"number"};if(t.length<1)return[new qn(e,t,"array length at least 1 expected, length 0 found")];let o=[];for(let s=0;s<t.length;s++)o=o.concat(n.validateSpec({key:`${e}[${s}]`,value:t[s],validateSpec:n.validateSpec,valueSpec:r}));return o}else return xE({key:e,value:t,valueSpec:{}})}function iAe(n){const e=n.key,t=n.value;if(mo(t)==="array"){if(t.length<1)return[new qn(e,t,"array length at least 1 expected, length 0 found")];let r=[];for(let o=0;o<t.length;o++)r=r.concat(kT({key:`${e}[${o}]`,value:t[o]}));return r}else return kT({key:e,value:t})}function rAe(n){const e=n.key,t=n.value,i=mo(t),r=n.styleSpec;if(i!=="array"||t.length<1||t.length%2!==0)return[new qn(e,t,"variableAnchorOffsetCollection requires a non-empty array of even length")];let o=[];for(let s=0;s<t.length;s+=2)o=o.concat(z3({key:`${e}[${s}]`,value:t[s],valueSpec:r.layout_symbol["text-anchor"]})),o=o.concat(wD({key:`${e}[${s+1}]`,value:t[s+1],valueSpec:{length:2,value:"number"},validateSpec:n.validateSpec,style:n.style,styleSpec:r}));return o}function tZ(n){let e=[];const t=n.value,i=n.key;if(Array.isArray(t)){const r=[],o=[];for(const s in t){t[s].id&&r.includes(t[s].id)&&e.push(new qn(i,t,`all the sprites' ids must be unique, but ${t[s].id} is duplicated`)),r.push(t[s].id),t[s].url&&o.includes(t[s].url)&&e.push(new qn(i,t,`all the sprites' URLs must be unique, but ${t[s].url} is duplicated`)),o.push(t[s].url);const a={id:{type:"string",required:!0},url:{type:"string",required:!0}};e=e.concat(Xf({key:`${i}[${s}]`,value:t[s],valueSpec:a,validateSpec:n.validateSpec}))}return e}else return Gb({key:i,value:t})}function oAe(n){const e=n.value,t=n.styleSpec,i=t.projection,r=n.style,o=mo(e);if(e===void 0)return[];if(o!=="object")return[new qn("projection",e,`object expected, ${o} found`)];let s=[];for(const a in e)i[a]?s=s.concat(n.validateSpec({key:a,value:e[a],valueSpec:i[a],style:r,styleSpec:t})):s=s.concat([new qn(a,e[a],`unknown property "${a}"`)]);return s}function sAe(n){const e=n.key;let t=n.value;t=t instanceof String?t.valueOf():t;const i=mo(t);return i==="array"&&!lAe(t)&&!aAe(t)?[new qn(e,t,`projection expected, invalid array ${JSON.stringify(t)} found`)]:["array","string"].includes(i)?[]:[new qn(e,t,`projection expected, invalid type "${i}" found`)]}function aAe(n){return!!["interpolate","step","literal"].includes(n[0])}function lAe(n){return Array.isArray(n)&&n.length===3&&typeof n[0]=="string"&&typeof n[1]=="string"&&typeof n[2]=="number"}function uAe(n){return!!n&&n.constructor===Object}function nZ(n){return uAe(n.value)?[]:[new qn(n.key,n.value,`object expected, ${mo(n.value)} found`)]}const eF={"*"(){return[]},array:wD,boolean:Hce,number:xE,color:kT,constants:WH,enum:z3,filter:SD,function:QH,layer:HH,object:Xf,source:ZH,light:XH,sky:JH,terrain:eZ,projection:oAe,projectionDefinition:sAe,string:Gb,formatted:Jce,resolvedImage:eAe,padding:tAe,numberArray:nAe,colorArray:iAe,variableAnchorOffsetCollection:rAe,sprite:tZ,state:nZ};function Yw(n){const e=n.value,t=n.valueSpec,i=n.styleSpec;return n.validateSpec=Yw,t.expression&&H4(eu(e))?QH(n):t.expression&&X4(Nb(e))?hx(n):t.type&&eF[t.type]?eF[t.type](n):Xf(ux({},n,{valueSpec:t.type?i[t.type]:t}))}function iZ(n){const e=n.value,t=n.key,i=Gb(n);return i.length||(e.indexOf("{fontstack}")===-1&&i.push(new qn(t,e,'"glyphs" url must include a "{fontstack}" token')),e.indexOf("{range}")===-1&&i.push(new qn(t,e,'"glyphs" url must include a "{range}" token'))),i}function wd(n,e=ts){let t=[];return t=t.concat(Yw({key:"",value:n,valueSpec:e.$root,styleSpec:e,style:n,validateSpec:Yw,objectElementValidators:{glyphs:iZ,"*"(){return[]}}})),n.constants&&(t=t.concat(WH({key:"constants",value:n.constants}))),rZ(t)}wd.source=Sm(wm(ZH));wd.sprite=Sm(wm(tZ));wd.glyphs=Sm(wm(iZ));wd.light=Sm(wm(XH));wd.sky=Sm(wm(JH));wd.terrain=Sm(wm(eZ));wd.state=Sm(wm(nZ));wd.layer=Sm(wm(HH));wd.filter=Sm(wm(SD));wd.paintProperty=Sm(wm(VH));wd.layoutProperty=Sm(wm($H));function wm(n){return function(e){return n(Object.assign({},e,{validateSpec:Yw}))}}function rZ(n){return[].concat(n).sort((e,t)=>e.line-t.line)}function Sm(n){return function(...e){return rZ(n.apply(this,e))}}const cAe=/("(?:[^\\"]|\\.)*")|[:,]/g;function AAe(n,e={}){const t=JSON.stringify([1],void 0,e.indent===void 0?2:e.indent).slice(2,-3),i=t===""?1/0:e.maxLength===void 0?80:e.maxLength;let{replacer:r}=e;return(function o(s,a,c){s&&typeof s.toJSON=="function"&&(s=s.toJSON());const h=JSON.stringify(s,r);if(h===void 0)return h;const m=i-a.length-c;if(h.length<=m){const v=h.replace(cAe,(x,E)=>E||`${x} `);if(v.length<=m)return v}if(r!=null&&(s=JSON.parse(h),r=void 0),typeof s=="object"&&s!==null){const v=a+t,x=[];let E=0,D,P;if(Array.isArray(s)){D="[",P="]";const{length:F}=s;for(;E<F;E++)x.push(o(s[E],v,E===F-1?0:1)||"null")}else{D="{",P="}";const F=Object.keys(s),{length:W}=F;for(;E<W;E++){const q=F[E],V=`${JSON.stringify(q)}: `,H=o(s[q],v,V.length+(E===W-1?0:1));H!==void 0&&x.push(V+H)}}if(x.length>0)return[D,t+x.join(`,
${v}`),P].join(`
${a}`)}return h})(n,"",0)}function tF(n,e){const t={};for(const i in e)n[i]!==void 0&&(t[i]=n[i]);for(const i in n)t[i]===void 0&&(t[i]=n[i]);return t}function hAe(n,e=2){return n=tF(n,ts.$root),n.layers&&(n.layers=n.layers.map(t=>tF(t,ts.layer))),AAe(n,{indent:e})}function SB(n,e){for(const t in n)t.indexOf("layout")===0&&e(n[t],t)}function nF(n,e){for(const t in n)t.indexOf("paint")===0&&e(n[t],t)}function TT(n,e){return typeof e=="string"&&e[0]==="@"?TT(n,n.constants[e]):e}function dAe(n){return Array.isArray(n.stops)}function c2(n,e,t){n[t]=n[e],delete n[e]}function fAe(n){n.version=8,$ce(n,r=>{r.type==="video"&&r.url!==void 0&&c2(r,"url","urls"),r.type==="video"&&r.coordinates.forEach(o=>o.reverse())}),u3(n,r=>{SB(r,o=>{o["symbol-min-distance"]!==void 0&&c2(o,"symbol-min-distance","symbol-spacing")}),nF(r,o=>{o["background-image"]!==void 0&&c2(o,"background-image","background-pattern"),o["line-image"]!==void 0&&c2(o,"line-image","line-pattern"),o["fill-image"]!==void 0&&c2(o,"fill-image","fill-pattern")})}),MD(n,{paint:!0,layout:!0},r=>{const o=TT(n,r.value);dAe(o)&&o.stops.forEach(s=>{s[1]=TT(n,s[1])}),r.set(o)}),delete n.constants,u3(n,r=>{SB(r,o=>{delete o["text-max-size"],delete o["icon-max-size"]}),nF(r,o=>{o["text-size"]&&(r.layout||(r.layout={}),r.layout["text-size"]=o["text-size"],delete o["text-size"]),o["icon-size"]&&(r.layout||(r.layout={}),r.layout["icon-size"]=o["icon-size"],delete o["icon-size"])})});function e(r){function o(s){return s.split(",").map(a=>a.trim())}if(Array.isArray(r))return r;if(typeof r=="string")return o(r);if(typeof r=="object")return r.stops.forEach(s=>{s[1]=o(s[1])}),r;throw new Error("unexpected font value")}u3(n,r=>{SB(r,o=>{o["text-font"]&&(o["text-font"]=e(o["text-font"]))})});let t=0;for(let r=n.layers.length-1;r>=0;r--)if(n.layers[r].type!=="symbol"){t=r+1;break}const i=n.layers.splice(t);return i.reverse(),n.layers=n.layers.concat(i),n}function pAe(n){const e=[];return u3(n,t=>{t.filter&&(t.filter=l3(t.filter))}),MD(n,{paint:!0,layout:!0},({path:t,key:i,value:r,reference:o,set:s})=>{X4(r)||i.endsWith("-transition")||o===null||(typeof r=="object"&&!Array.isArray(r)?(s(NH(r,o)),e.push(t.join("."))):o.tokens&&typeof r=="string"&&s(GH(r)))}),n}function mAe(n){return JSON.parse(gAe(JSON.stringify(n)))}function gAe(n){return n.replace(/"hsla?\((.+?)\)"/gi,(e,t)=>{const i=t.match(/^(.+?)\s*,\s*(.+?)\s*,\s*(.+?)(?:\s*,\s*(.+))?$/i);if(i){let[r,o,s,a]=i.slice(1);return[o,s]=[o,s].map(c=>c.endsWith("%")?c:`${parseFloat(c)*100}%`),`"hsl${typeof a=="string"?"a":""}(${[r,o,s,a].filter(Boolean).join(",")})"`}return e})}function yAe(n){let e=!1;if(n.version===7&&(n=fAe(n),e=!0),n.version===8&&(e=!!pAe(n),e=!0),MD(n,{paint:!0,layout:!0},({value:t,reference:i,set:r})=>{i?.type==="color"&&r(mAe(t))}),!e)throw new Error(`Cannot migrate from ${n.version}`);return n}const Zf=ts,vAe={StyleExpression:jH,StylePropertyFunction:CE,ZoomConstantExpression:BT,ZoomDependentExpression:OT,createExpression:yD,createPropertyExpression:vD,isExpression:X4,isExpressionFilter:_E,isZoomExpression:Lce,normalizePropertyExpression:Fce},bAe={convertFunction:NH,createFunction:gD,isFunction:H4},CAe=8,_Ae=JSON.parse('{"version":{"required":true,"type":"enum","values":[8],"doc":"Style specification version number. Must be 8.","example":8},"name":{"type":"string","doc":"A human-readable name for the style.","example":"Bright"},"metadata":{"type":"*","doc":"Arbitrary properties useful to track with the stylesheet, but do not influence rendering. Properties should be prefixed to avoid collisions, like \'maplibre:\'.","example":{"styleeditor:slimmode":true,"styleeditor:comment":"Style generated 1677776383","styleeditor:version":"3.14.159265","example:object":{"String":"one","Number":2,"Boolean":false}}},"center":{"type":"array","value":"number","doc":"Default map center in longitude and latitude.  The style center will be used only if the map has not been positioned by other means (e.g. map options or user interaction).","example":[-73.9749,40.7736]},"centerAltitude":{"type":"number","doc":"Default map center altitude in meters above sea level. The style center altitude defines the altitude where the camera is looking at and will be used only if the map has not been positioned by other means (e.g. map options or user interaction).","example":123.4,"sdk-support":{"basic functionality":{"js":"5.0.0","android":"https://github.com/maplibre/maplibre-native/issues/2980","ios":"https://github.com/maplibre/maplibre-native/issues/2980"}}},"zoom":{"type":"number","doc":"Default zoom level.  The style zoom will be used only if the map has not been positioned by other means (e.g. map options or user interaction).","example":12.5},"bearing":{"type":"number","default":0,"period":360,"units":"degrees","doc":"Default bearing, in degrees. The bearing is the compass direction that is \\"up\\"; for example, a bearing of 90 orients the map so that east is up. This value will be used only if the map has not been positioned by other means (e.g. map options or user interaction).","example":29},"pitch":{"type":"number","default":0,"units":"degrees","doc":"Default pitch, in degrees. Zero is perpendicular to the surface, for a look straight down at the map, while a greater value like 60 looks ahead towards the horizon. The style pitch will be used only if the map has not been positioned by other means (e.g. map options or user interaction).","example":50,"sdk-support":{"0-60 degrees":{"js":"0.8.0","android":"1.0.0","ios":"1.0.0"},"0-85 degrees":{"js":"2.0.0","android":"https://github.com/maplibre/maplibre-native/issues/1909","ios":"https://github.com/maplibre/maplibre-native/issues/1909"},"0-180 degrees":{"js":"5.0.0","android":"https://github.com/maplibre/maplibre-native/issues/1909","ios":"https://github.com/maplibre/maplibre-native/issues/1909"}}},"roll":{"type":"number","default":0,"units":"degrees","doc":"Default roll, in degrees. The roll angle is measured counterclockwise about the camera boresight. The style roll will be used only if the map has not been positioned by other means (e.g. map options or user interaction).","example":45,"sdk-support":{"basic functionality":{"js":"5.0.0","android":"https://github.com/maplibre/maplibre-native/issues/2941","ios":"https://github.com/maplibre/maplibre-native/issues/2941"}}},"state":{"type":"state","default":{},"doc":"An object used to define default values when using the [`global-state`](https://maplibre.org/maplibre-style-spec/expressions/#global-state) expression.","example":{"chargerType":{"default":["CCS","CHAdeMO","Type2"]},"minPreferredChargingSpeed":{"default":50}},"sdk-support":{"basic functionality":{"js":"5.6.0","android":"https://github.com/maplibre/maplibre-native/issues/3302","ios":"https://github.com/maplibre/maplibre-native/issues/3302"}}},"light":{"type":"light","doc":"The global light source.","example":{"anchor":"viewport","color":"white","intensity":0.4}},"sky":{"type":"sky","doc":"The map\'s sky configuration. **Note:** this definition is still experimental and is under development in maplibre-gl-js.","example":{"sky-color":"#199EF3","sky-horizon-blend":0.5,"horizon-color":"#ffffff","horizon-fog-blend":0.5,"fog-color":"#0000ff","fog-ground-blend":0.5,"atmosphere-blend":["interpolate",["linear"],["zoom"],0,1,10,1,12,0]}},"projection":{"type":"projection","doc":"The projection configuration","example":{"type":["interpolate",["linear"],["zoom"],10,"vertical-perspective",12,"mercator"]}},"terrain":{"type":"terrain","doc":"The terrain configuration.","example":{"source":"raster-dem-source","exaggeration":0.5}},"sources":{"required":true,"type":"sources","doc":"Sources state which data the map should display. Specify the type of source with the `type` property. Adding a source isn\'t enough to make data appear on the map because sources don\'t contain styling details like color or width. Layers refer to a source and give it a visual representation. This makes it possible to style the same source in different ways, like differentiating between types of roads in a highways layer.\\n\\nTiled sources (vector and raster) must specify their details according to the [TileJSON specification](https://github.com/mapbox/tilejson-spec).","example":{"maplibre-demotiles":{"type":"vector","url":"https://demotiles.maplibre.org/tiles/tiles.json"},"maplibre-tilejson":{"type":"vector","url":"http://api.example.com/tilejson.json"},"maplibre-streets":{"type":"vector","tiles":["http://a.example.com/tiles/{z}/{x}/{y}.pbf","http://b.example.com/tiles/{z}/{x}/{y}.pbf"],"maxzoom":14},"wms-imagery":{"type":"raster","tiles":["http://a.example.com/wms?bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&srs=EPSG:3857&width=256&height=256&layers=example"],"tileSize":256}}},"sprite":{"type":"sprite","doc":"An array of `{id: \'my-sprite\', url: \'https://example.com/sprite\'}` objects. Each object should represent a unique URL to load a sprite from and and a unique ID to use as a prefix when referencing images from that sprite (i.e. \'my-sprite:image\'). All the URLs are internally extended to load both .json and .png files. If the `id` field is equal to \'default\', the prefix is omitted (just \'image\' instead of \'default:image\'). All the IDs and URLs must be unique. For backwards compatibility, instead of an array, one can also provide a single string that represent a URL to load the sprite from. The images in this case won\'t be prefixed.","example":"https://demotiles.maplibre.org/styles/osm-bright-gl-style/sprite"},"glyphs":{"type":"string","doc":"A URL template for loading signed-distance-field glyph sets in PBF format.\\n\\nIf this property is set, any text in the `text-field` layout property is displayed in the font stack named by the `text-font` layout property based on glyphs located at the URL specified by this property. Otherwise, font faces will be determined by the `text-font` property based on the local environment.\\n\\nThe URL must include:\\n\\n - `{fontstack}` - When requesting glyphs, this token is replaced with a comma separated list of fonts from a font stack specified in the `text-font` property of a symbol layer. \\n\\n - `{range}` - When requesting glyphs, this token is replaced with a range of 256 Unicode code points. For example, to load glyphs for the Unicode Basic Latin and Basic Latin-1 Supplement blocks, the range would be 0-255. The actual ranges that are loaded are determined at runtime based on what text needs to be displayed.\\n\\nThe URL must be absolute, containing the [scheme, authority and path components](https://en.wikipedia.org/wiki/URL#Syntax).","example":"https://demotiles.maplibre.org/font/{fontstack}/{range}.pbf","sdk-support":{"basic functionality":{"js":"0.0.16","android":"0.1.1","ios":"0.1.0"},"omit to use local fonts":{"js":"https://github.com/maplibre/maplibre-gl-js/issues/3302","android":"https://github.com/maplibre/maplibre-native/issues/165","ios":"https://github.com/maplibre/maplibre-native/issues/165"}}},"font-faces":{"type":"array","value":"fontFaces","doc":"The `font-faces` property can be used to specify what font files to use for rendering text. Font faces contain information needed to render complex texts such as [Devanagari](https://en.wikipedia.org/wiki/Devanagari), [Khmer](https://en.wikipedia.org/wiki/Khmer_script) among many others.<h2>Unicode range</h2>The optional `unicode-range` property can be used to only use a particular font file for characters within the specified unicode range(s). Its value should be an array of strings, each indicating a start and end of a unicode range, similar to the [CSS descriptor with the same name](https://developer.mozilla.org/en-US/docs/Web/CSS/@font-face/unicode-range). This allows specifying multiple non-consecutive unicode ranges. When not specified, the default value is `U+0-10FFFF`, meaning the font file will be used for all unicode characters.\\n\\nRefer to the [Unicode Character Code Charts](https://www.unicode.org/charts/) to see ranges for scripts supported by Unicode. To see what unicode code-points are available in a font, use a tool like [FontDrop](https://fontdrop.info/).\\n\\n<h2>Font Resolution</h2>For every name in a symbol layers [`text-font`](./layers.md/#text-font) array, characters are matched if they are covered one of the by the font files in the corresponding entry of the `font-faces` map. Any still-unmatched characters then fall back to the [`glyphs`](./glyphs.md) URL if provided.\\n\\n<h2>Supported Fonts</h2>What type of fonts are supported is implementation-defined. Unsupported fonts are ignored.","example":{"Noto Sans Regular":[{"url":"https://cdn.jsdelivr.net/gh/notofonts/notofonts.github.io/fonts/NotoSansKhmer/hinted/ttf/NotoSansKhmer-Regular.ttf","unicode-range":["U+1780-17FF"]},{"url":"https://cdn.jsdelivr.net/gh/notofonts/notofonts.github.io/fonts/NotoSansDevanagari/hinted/ttf/NotoSansDevanagari-Regular.ttf","unicode-range":["U+0900-097F"]},{"url":"https://cdn.jsdelivr.net/gh/notofonts/notofonts.github.io/fonts/NotoSansMyanmar/hinted/ttf/NotoSansMyanmar-Regular.ttf","unicode-range":["U+1000-109F"]},{"url":"https://cdn.jsdelivr.net/gh/notofonts/notofonts.github.io/fonts/NotoSansEthiopic/hinted/ttf/NotoSansEthiopic-Regular.ttf","unicode-range":["U+1200-137F"]}],"Unifont":"https://ftp.gnu.org/gnu/unifont/unifont-15.0.01/unifont-15.0.01.ttf"},"sdk-support":{"basic functionality":{"js":"https://github.com/maplibre/maplibre-gl-js/issues/50","android":"11.13.0","ios":"6.18.0"}}},"transition":{"type":"transition","doc":"A global transition definition to use as a default across properties, to be used for timing transitions between one value and the next when no property-specific transition is set. Collision-based symbol fading is controlled independently of the style\'s `transition` property.","example":{"duration":300,"delay":0}},"layers":{"required":true,"type":"array","value":"layer","doc":"A style\'s `layers` property lists all the layers available in that style. The type of layer is specified by the `type` property, and must be one of `background`, `fill`, `line`, `symbol`, `raster`, `circle`, `fill-extrusion`, `heatmap`, `hillshade`, `color-relief`.\\n\\nExcept for layers of the `background` type, each layer needs to refer to a source. Layers take the data that they get from a source, optionally filter features, and then define how those features are styled.","example":[{"id":"coastline","source":"maplibre","source-layer":"countries","type":"line","paint":{"line-color":"#198EC8"}}]}}'),xAe={"*":{type:"source",doc:"Specification of a data source. For vector and raster sources, either TileJSON or a URL to a TileJSON must be provided. For image and video sources, a URL must be provided. For GeoJSON sources, a URL or inline GeoJSON must be provided."}},MAe=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],wAe={type:{required:!0,type:"enum",values:{vector:{doc:"A vector tile source."}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:` and `https:`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by MapLibre."},scheme:{type:"enum",values:{xyz:{doc:"Slippy map tilenames scheme."},tms:{doc:"OSGeo spec scheme."}},default:"xyz",doc:"Influences the y direction of the tile coordinates. The global-mercator (aka Spherical Mercator) profile is assumed."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},promoteId:{type:"promoteId",doc:"A property to use as a feature id (for feature state). Either a property name, or an object of the form `{<sourceLayer>: <propertyName>}`. If specified as a string for a vector tile source, the same property is used across all its source layers."},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0",js:"wontfix"}}},encoding:{type:"enum",values:{mvt:{doc:"Mapbox Vector Tiles. See http://github.com/mapbox/vector-tile-spec for more info."},mlt:{doc:"MapLibre Vector Tiles. See https://github.com/maplibre/maplibre-tile-spec for more info."}},default:"mvt",doc:"The encoding used by this source. Mapbox Vector Tiles encoding is used by default.","sdk-support":{mvt:{android:"supported",ios:"supported",js:"supported"},mlt:{android:"https://github.com/maplibre/maplibre-native/issues/3721",ios:"https://github.com/maplibre/maplibre-native/issues/3721",js:"https://github.com/maplibre/maplibre-gl-js/issues/6258"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},SAe={type:{required:!0,type:"enum",values:{raster:{doc:"A raster tile source."}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:` and `https:`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by MapLibre."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},tileSize:{type:"number",default:512,units:"pixels",doc:"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},scheme:{type:"enum",values:{xyz:{doc:"Slippy map tilenames scheme."},tms:{doc:"OSGeo spec scheme."}},default:"xyz",doc:"Influences the y direction of the tile coordinates. The global-mercator (aka Spherical Mercator) profile is assumed."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0",js:"wontfix"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},EAe={type:{required:!0,type:"enum",values:{"raster-dem":{doc:"A RGB-encoded raster DEM source"}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:` and `https:`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by MapLibre."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},tileSize:{type:"number",default:512,units:"pixels",doc:"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},encoding:{type:"enum",values:{terrarium:{doc:"Terrarium format PNG tiles. See https://aws.amazon.com/es/public-datasets/terrain/ for more info."},mapbox:{doc:"Mapbox Terrain RGB tiles. See https://www.mapbox.com/help/access-elevation-data/#mapbox-terrain-rgb for more info."},custom:{doc:"Decodes tiles using the redFactor, blueFactor, greenFactor, baseShift parameters."}},default:"mapbox",doc:"The encoding used by this source. Mapbox Terrain RGB is used by default.","sdk-support":{"mapbox, terrarium":{js:"0.43.0",ios:"6.0.0",android:"6.0.0"},custom:{js:"3.4.0",ios:"https://github.com/maplibre/maplibre-native/issues/2783",android:"https://github.com/maplibre/maplibre-native/issues/2783"}}},redFactor:{type:"number",default:1,doc:"Value that will be multiplied by the red channel value when decoding. Only used on custom encodings.","sdk-support":{"basic functionality":{js:"3.4.0",ios:"https://github.com/maplibre/maplibre-native/issues/2783",android:"https://github.com/maplibre/maplibre-native/issues/2783"}}},blueFactor:{type:"number",default:1,doc:"Value that will be multiplied by the blue channel value when decoding. Only used on custom encodings.","sdk-support":{"basic functionality":{js:"3.4.0",ios:"https://github.com/maplibre/maplibre-native/issues/2783",android:"https://github.com/maplibre/maplibre-native/issues/2783"}}},greenFactor:{type:"number",default:1,doc:"Value that will be multiplied by the green channel value when decoding. Only used on custom encodings.","sdk-support":{"basic functionality":{js:"3.4.0",ios:"https://github.com/maplibre/maplibre-native/issues/2358",android:"https://github.com/maplibre/maplibre-native/issues/2783"}}},baseShift:{type:"number",default:0,doc:"Value that will be added to the encoding mix when decoding. Only used on custom encodings.","sdk-support":{"basic functionality":{js:"3.4.0",ios:"https://github.com/maplibre/maplibre-native/issues/2783",android:"https://github.com/maplibre/maplibre-native/issues/2783"}}},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0",js:"wontfix"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},BAe={type:{required:!0,type:"enum",values:{geojson:{doc:"A GeoJSON data source."}},doc:"The data type of the GeoJSON source."},data:{required:!0,type:"*",doc:"A URL to a GeoJSON file, or inline GeoJSON."},maxzoom:{type:"number",default:18,doc:"Maximum zoom level at which to create vector tiles (higher means greater detail at high zoom levels)."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},buffer:{type:"number",default:128,maximum:512,minimum:0,doc:"Size of the tile buffer on each side. A value of 0 produces no buffer. A value of 512 produces a buffer as wide as the tile itself. Larger values produce fewer rendering artifacts near tile edges and slower performance."},filter:{type:"*",doc:"An expression for filtering features prior to processing them for rendering."},tolerance:{type:"number",default:.375,doc:"Douglas-Peucker simplification tolerance (higher means simpler geometries and faster performance)."},cluster:{type:"boolean",default:!1,doc:"If the data is a collection of point features, setting this to true clusters the points by radius into groups. Cluster groups become new `Point` features in the source with additional properties:\n\n * `cluster` Is `true` if the point is a cluster \n\n * `cluster_id` A unique id for the cluster to be used in conjunction with the [cluster inspection methods](https://maplibre.org/maplibre-gl-js/docs/API/classes/GeoJSONSource/#getclusterexpansionzoom)\n\n * `point_count` Number of original points grouped into this cluster\n\n * `point_count_abbreviated` An abbreviated point count"},clusterRadius:{type:"number",default:50,minimum:0,doc:"Radius of each cluster if clustering is enabled. A value of 512 indicates a radius equal to the width of a tile."},clusterMaxZoom:{type:"number",doc:"Max zoom on which to cluster points if clustering is enabled. Defaults to one zoom less than maxzoom (so that last zoom features are not clustered). Clusters are re-evaluated at integer zoom levels so setting clusterMaxZoom to 14 means the clusters will be displayed until z15."},clusterMinPoints:{type:"number",doc:"Minimum number of points necessary to form a cluster if clustering is enabled. Defaults to `2`."},clusterProperties:{type:"*",doc:'An object defining custom properties on the generated clusters if clustering is enabled, aggregating values from clustered points. Has the form `{"property_name": [operator, map_expression]}`. `operator` is any expression function that accepts at least 2 operands (e.g. `"+"` or `"max"`)  it accumulates the property value from clusters/points the cluster contains; `map_expression` produces the value of a single point.\n\nExample: `{"sum": ["+", ["get", "scalerank"]]}`.\n\nFor more advanced use cases, in place of `operator`, you can use a custom reduce expression that references a special `["accumulated"]` value, e.g.:\n\n`{"sum": [["+", ["accumulated"], ["get", "sum"]], ["get", "scalerank"]]}`'},lineMetrics:{type:"boolean",default:!1,doc:"Whether to calculate line distance metrics. This is required for line layers that specify `line-gradient` values."},generateId:{type:"boolean",default:!1,doc:"Whether to generate ids for the geojson features. When enabled, the `feature.id` property will be auto assigned based on its index in the `features` array, over-writing any previous values."},promoteId:{type:"promoteId",doc:"A property to use as a feature id (for feature state). Either a property name, or an object of the form `{<sourceLayer>: <propertyName>}`."}},OAe={type:{required:!0,type:"enum",values:{video:{doc:"A video data source."}},doc:"The data type of the video source."},urls:{required:!0,type:"array",value:"string",doc:"URLs to video content in order of preferred format."},coordinates:{required:!0,doc:"Corners of video specified in longitude, latitude pairs.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},IAe={type:{required:!0,type:"enum",values:{image:{doc:"An image data source."}},doc:"The data type of the image source."},url:{required:!0,type:"string",doc:"URL that points to an image."},coordinates:{required:!0,doc:"Corners of image specified in longitude, latitude pairs.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},kAe={id:{type:"string",doc:"Unique layer name.",required:!0},type:{type:"enum",values:{fill:{doc:"A filled polygon with an optional stroked border.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},line:{doc:"A stroked line.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},symbol:{doc:"An icon or a text label.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},circle:{doc:"A filled circle.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},heatmap:{doc:"A heatmap.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}}},"fill-extrusion":{doc:"An extruded (3D) polygon.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}},raster:{doc:"Raster map textures such as satellite imagery.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},hillshade:{doc:"Client-side hillshading visualization based on DEM data. The implementation supports Mapbox Terrain RGB, Mapzen Terrarium tiles and custom encodings.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"},"additional methods":{js:"5.5.0",android:"https://github.com/maplibre/maplibre-native/issues/3396",ios:"https://github.com/maplibre/maplibre-native/issues/3396"}}},"color-relief":{doc:"Client-side elevation coloring based on DEM data. The implementation supports Mapbox Terrain RGB, Mapzen Terrarium tiles and custom encodings.","sdk-support":{"basic functionality":{js:"5.6.0",android:"https://github.com/maplibre/maplibre-native/issues/3408",ios:"https://github.com/maplibre/maplibre-native/issues/3408"}}},background:{doc:"The background color or pattern of the map.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}}},doc:"Rendering type of this layer.",required:!0},metadata:{type:"*",doc:"Arbitrary properties useful to track with the layer, but do not influence rendering. Properties should be prefixed to avoid collisions, like 'maplibre:'.",example:{"source:comment":"Hydrology FCCODE 460 - Narrow wash"}},source:{type:"string",doc:"Name of a source description to be used for this layer. Required for all layer types except `background`."},"source-layer":{type:"string",doc:"Layer to use from a vector tile source. Required for vector tile sources; prohibited for all other source types, including GeoJSON sources."},minzoom:{type:"number",minimum:0,maximum:24,doc:"The minimum zoom level for the layer. At zoom levels less than the minzoom, the layer will be hidden."},maxzoom:{type:"number",minimum:0,maximum:24,doc:"The maximum zoom level for the layer. At zoom levels equal to or greater than the maxzoom, the layer will be hidden."},filter:{type:"filter",doc:"A expression specifying conditions on source features. Only features that match the filter are displayed. Zoom expressions in filters are only evaluated at integer zoom levels. The `feature-state` expression is not supported in filter expressions."},layout:{type:"layout",doc:"Layout properties for the layer."},paint:{type:"paint",doc:"Default paint properties for this layer."}},TAe=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],RAe={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},"property-type":"constant"}},DAe={"fill-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.1.0",ios:"5.8.0"},"data-driven styling":{js:"1.2.0",android:"9.1.0",ios:"5.8.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},"property-type":"constant"}},PAe={"circle-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.2.0",ios:"5.9.0"},"data-driven styling":{js:"1.2.0",android:"9.2.0",ios:"5.9.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},"property-type":"constant"}},UAe={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}},"property-type":"constant"}},KAe={"line-cap":{type:"enum",values:{butt:{doc:"A cap with a squared-off end which is drawn to the exact endpoint of the line."},round:{doc:"A cap with a rounded end which is drawn beyond the endpoint of the line at a radius of one-half of the line's width and centered on the endpoint of the line."},square:{doc:"A cap with a squared-off end which is drawn beyond the endpoint of the line at a distance of one-half of the line's width."}},default:"butt",doc:"The display of line endings.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{doc:"A join with a squared-off end which is drawn beyond the endpoint of the line at a distance of one-half of the line's width."},round:{doc:"A join with a rounded end which is drawn beyond the endpoint of the line at a radius of one-half of the line's width and centered on the endpoint of the line."},miter:{doc:"A join with a sharp, angled corner which is drawn with the outer sides beyond the endpoint of the path until they meet."}},default:"miter",doc:"The display of lines when joining.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,doc:"Used to automatically convert miter joins to bevel joins for sharp angles.",requires:[{"line-join":"miter"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,doc:"Used to automatically convert round joins to miter joins for shallow angles.",requires:[{"line-join":"round"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.1.0",ios:"5.8.0"},"data-driven styling":{js:"1.2.0",android:"9.1.0",ios:"5.8.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},"property-type":"constant"}},LAe=JSON.parse('{"symbol-placement":{"type":"enum","values":{"point":{"doc":"The label is placed at the point where the geometry is located."},"line":{"doc":"The label is placed along the line of the geometry. Can only be used on `LineString` and `Polygon` geometries."},"line-center":{"doc":"The label is placed at the center of the line of the geometry. Can only be used on `LineString` and `Polygon` geometries. Note that a single feature in a vector tile may contain multiple line geometries."}},"default":"point","doc":"Label placement relative to its geometry.","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"`line-center` value":{"js":"0.47.0","android":"6.4.0","ios":"4.3.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","doc":"Distance between two symbol anchors.","requires":[{"symbol-placement":"line"}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"doc":"If true, the symbols will not cross tile edges to avoid mutual collisions. Recommended in layers that don\'t have enough padding in the vector tile to prevent collisions, or if it is a point symbol layer placed after a line symbol layer. When using a client that supports global collision detection, like MapLibre GL JS version 0.42.0 or greater, enabling this property is not needed to prevent clipped labels at tile boundaries.","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","doc":"Sorts features in ascending order based on this value. Features with lower sort keys are drawn and placed first.  When `icon-allow-overlap` or `text-allow-overlap` is `false`, features with a lower sort key will have priority during placement. When `icon-allow-overlap` or `text-allow-overlap` is set to `true`, features with a higher sort key will overlap over features with a lower sort key.","sdk-support":{"basic functionality":{"js":"0.53.0","android":"7.4.0","ios":"4.11.0"},"data-driven styling":{"js":"0.53.0","android":"7.4.0","ios":"4.11.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{"doc":"Sorts symbols by `symbol-sort-key` if set. Otherwise, sorts symbols by their y-position relative to the viewport if `icon-allow-overlap` or `text-allow-overlap` is set to `true` or `icon-ignore-placement` or `text-ignore-placement` is `false`."},"viewport-y":{"doc":"Sorts symbols by their y-position relative to the viewport if `icon-allow-overlap` or `text-allow-overlap` is set to `true` or `icon-ignore-placement` or `text-ignore-placement` is `false`."},"source":{"doc":"Sorts symbols by `symbol-sort-key` if set. Otherwise, no sorting is applied; symbols are rendered in the same order as the source data."}},"default":"auto","doc":"Determines whether overlapping symbols in the same layer are rendered in the order that they appear in the data source or by their y-position relative to the viewport. To control the order and prioritization of symbols otherwise, use `symbol-sort-key`.","sdk-support":{"basic functionality":{"js":"0.49.0","android":"6.6.0","ios":"4.5.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"doc":"If true, the icon will be visible even if it collides with other previously drawn symbols.","requires":["icon-image",{"!":"icon-overlap"}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-overlap":{"type":"enum","values":{"never":{"doc":"The icon will be hidden if it collides with any other previously drawn symbol."},"always":{"doc":"The icon will be visible even if it collides with any other previously drawn symbol."},"cooperative":{"doc":"If the icon collides with another previously drawn symbol, the overlap mode for that symbol is checked. If the previous symbol was placed using `never` overlap mode, the new icon is hidden. If the previous symbol was placed using `always` or `cooperative` overlap mode, the new icon is visible."}},"doc":"Allows for control over whether to show an icon when it overlaps other symbols on the map. If `icon-overlap` is not set, `icon-allow-overlap` is used instead.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"2.1.0","android":"https://github.com/maplibre/maplibre-native/issues/251","ios":"https://github.com/maplibre/maplibre-native/issues/251"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"doc":"If true, other symbols can be visible even if they collide with the icon.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"doc":"If true, text will display without their corresponding icons when the icon collides with other symbols and the text does not.","requires":["icon-image","text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{"doc":"When `symbol-placement` is set to `point`, aligns icons east-west. When `symbol-placement` is set to `line` or `line-center`, aligns icon x-axes with the line."},"viewport":{"doc":"Produces icons whose x-axes are aligned with the x-axis of the viewport, regardless of the value of `symbol-placement`."},"auto":{"doc":"When `symbol-placement` is set to `point`, this is equivalent to `viewport`. When `symbol-placement` is set to `line` or `line-center`, this is equivalent to `map`."}},"default":"auto","doc":"In combination with `symbol-placement`, determines the rotation behavior of icons.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"`auto` value":{"js":"0.25.0","android":"4.2.0","ios":"3.4.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","doc":"Scales the original size of the icon by the provided factor. The new pixel size of the image will be the original pixel size multiplied by `icon-size`. 1 is the original size; 3 triples the size of the image.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.35.0","android":"5.1.0","ios":"3.6.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{"doc":"The icon is displayed at its intrinsic aspect ratio."},"width":{"doc":"The icon is scaled in the x-dimension to fit the width of the text."},"height":{"doc":"The icon is scaled in the y-dimension to fit the height of the text."},"both":{"doc":"The icon is scaled in both x- and y-dimensions."}},"default":"none","doc":"Scales the icon to fit around the associated text.","requires":["icon-image","text-field"],"sdk-support":{"basic functionality":{"js":"0.21.0","android":"4.2.0","ios":"3.4.0"},"stretchable icons":{"js":"1.6.0","android":"9.2.0","ios":"5.8.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","doc":"Size of the additional area added to dimensions determined by `icon-text-fit`, in clockwise order: top, right, bottom, left.","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"sdk-support":{"basic functionality":{"js":"0.21.0","android":"4.2.0","ios":"3.4.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","doc":"Name of image in sprite to use for drawing an image background.","tokens":true,"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.35.0","android":"5.1.0","ios":"3.6.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","doc":"Rotates the icon clockwise.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.21.0","android":"5.0.0","ios":"3.5.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"padding","default":[2],"units":"pixels","doc":"Size of additional area round the icon bounding box used for detecting symbol collisions.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"2.2.0","android":"https://github.com/maplibre/maplibre-native/issues/2754","ios":"https://github.com/maplibre/maplibre-native/issues/2754"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{"type":"boolean","default":false,"doc":"If true, the icon may be flipped to prevent it from being rendered upside-down.","requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"doc":"Offset distance of icon from its anchor. Positive values indicate right and down, while negative values indicate left and up. Each component is multiplied by the value of `icon-size` to obtain the final offset in pixels. When combined with `icon-rotate` the offset will be as if the rotated direction was up.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.29.0","android":"5.0.0","ios":"3.5.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{"doc":"The center of the icon is placed closest to the anchor."},"left":{"doc":"The left side of the icon is placed closest to the anchor."},"right":{"doc":"The right side of the icon is placed closest to the anchor."},"top":{"doc":"The top of the icon is placed closest to the anchor."},"bottom":{"doc":"The bottom of the icon is placed closest to the anchor."},"top-left":{"doc":"The top left corner of the icon is placed closest to the anchor."},"top-right":{"doc":"The top right corner of the icon is placed closest to the anchor."},"bottom-left":{"doc":"The bottom left corner of the icon is placed closest to the anchor."},"bottom-right":{"doc":"The bottom right corner of the icon is placed closest to the anchor."}},"default":"center","doc":"Part of the icon placed closest to the anchor.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.40.0","android":"5.2.0","ios":"3.7.0"},"data-driven styling":{"js":"0.40.0","android":"5.2.0","ios":"3.7.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{"doc":"The icon is aligned to the plane of the map."},"viewport":{"doc":"The icon is aligned to the plane of the viewport."},"auto":{"doc":"Automatically matches the value of `icon-rotation-alignment`."}},"default":"auto","doc":"Orientation of icon when map is pitched.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.39.0","android":"5.2.0","ios":"3.7.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{"doc":"The text is aligned to the plane of the map."},"viewport":{"doc":"The text is aligned to the plane of the viewport."},"auto":{"doc":"Automatically matches the value of `text-rotation-alignment`."}},"default":"auto","doc":"Orientation of text when map is pitched.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.21.0","android":"4.2.0","ios":"3.4.0"},"`auto` value":{"js":"0.25.0","android":"4.2.0","ios":"3.4.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{"doc":"When `symbol-placement` is set to `point`, aligns text east-west. When `symbol-placement` is set to `line` or `line-center`, aligns text x-axes with the line."},"viewport":{"doc":"Produces glyphs whose x-axes are aligned with the x-axis of the viewport, regardless of the value of `symbol-placement`."},"viewport-glyph":{"doc":"When `symbol-placement` is set to `point`, aligns text to the x-axis of the viewport. When `symbol-placement` is set to `line` or `line-center`, aligns glyphs to the x-axis of the viewport and places them along the line."},"auto":{"doc":"When `symbol-placement` is set to `point`, this is equivalent to `viewport`. When `symbol-placement` is set to `line` or `line-center`, this is equivalent to `map`."}},"default":"auto","doc":"In combination with `symbol-placement`, determines the rotation behavior of the individual glyphs forming the text.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"`auto` value":{"js":"0.25.0","android":"4.2.0","ios":"3.4.0"},"`viewport-glyph` value":{"js":"2.1.8","android":"https://github.com/maplibre/maplibre-native/issues/250","ios":"https://github.com/maplibre/maplibre-native/issues/250"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"doc":"Value to use for a text label. If a plain `string` is provided, it will be treated as a `formatted` with default/inherited formatting options.","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.33.0","android":"5.0.0","ios":"3.5.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"doc":"Fonts to use for displaying text. If the `glyphs` root property is specified, this array is joined together and interpreted as a font stack name. Otherwise, it is interpreted as a cascading fallback list of local font names.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.43.0","android":"6.0.0","ios":"4.0.0"},"local fonts":{"js":"https://github.com/maplibre/maplibre-gl-js/issues/3302","android":"https://github.com/maplibre/maplibre-native/issues/165","ios":"https://github.com/maplibre/maplibre-native/issues/165"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","doc":"Font size.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.35.0","android":"5.1.0","ios":"3.6.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","doc":"The maximum line width for text wrapping.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.40.0","android":"5.2.0","ios":"3.7.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","doc":"Text leading value for multi-line text.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","doc":"Text tracking amount.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.40.0","android":"5.2.0","ios":"3.7.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{"doc":"The text is aligned towards the anchor position."},"left":{"doc":"The text is aligned to the left."},"center":{"doc":"The text is centered."},"right":{"doc":"The text is aligned to the right."}},"default":"center","doc":"Text justification options.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.39.0","android":"5.2.0","ios":"3.7.0"},"auto":{"js":"0.54.0","android":"7.4.0","ios":"4.10.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"doc":"Radial offset of text, in the direction of the symbol\'s anchor. Useful in combination with `text-variable-anchor`, which defaults to using the two-dimensional `text-offset` if present.","sdk-support":{"basic functionality":{"js":"0.54.0","android":"7.4.0","ios":"4.10.0"},"data-driven styling":{"js":"0.54.0","android":"7.4.0","ios":"4.10.0"}},"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{"doc":"The center of the text is placed closest to the anchor."},"left":{"doc":"The left side of the text is placed closest to the anchor."},"right":{"doc":"The right side of the text is placed closest to the anchor."},"top":{"doc":"The top of the text is placed closest to the anchor."},"bottom":{"doc":"The bottom of the text is placed closest to the anchor."},"top-left":{"doc":"The top left corner of the text is placed closest to the anchor."},"top-right":{"doc":"The top right corner of the text is placed closest to the anchor."},"bottom-left":{"doc":"The bottom left corner of the text is placed closest to the anchor."},"bottom-right":{"doc":"The bottom right corner of the text is placed closest to the anchor."}},"requires":["text-field",{"symbol-placement":["point"]}],"doc":"To increase the chance of placing high-priority labels on the map, you can provide an array of `text-anchor` locations: the renderer will attempt to place the label at each location, in order, before moving onto the next label. Use `text-justify: auto` to choose justification based on anchor position. To apply an offset, use the `text-radial-offset` or the two-dimensional `text-offset`.","sdk-support":{"basic functionality":{"js":"0.54.0","android":"7.4.0","ios":"4.10.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{"type":"variableAnchorOffsetCollection","requires":["text-field",{"symbol-placement":["point"]}],"doc":"To increase the chance of placing high-priority labels on the map, you can provide an array of `text-anchor` locations, each paired with an offset value. The renderer will attempt to place the label at each location, in order, before moving on to the next location+offset. Use `text-justify: auto` to choose justification based on anchor position. \\n\\n The length of the array must be even, and must alternate between enum and point entries. i.e., each anchor location must be accompanied by a point, and that point defines the offset when the corresponding anchor location is used. Positive offset values indicate right and down, while negative values indicate left and up. Anchor locations may repeat, allowing the renderer to try multiple offsets to try and place a label using the same anchor. \\n\\n When present, this property takes precedence over `text-anchor`, `text-variable-anchor`, `text-offset`, and `text-radial-offset`. \\n\\n ```json \\n\\n { \\"text-variable-anchor-offset\\": [\\"top\\", [0, 4], \\"left\\", [3,0], \\"bottom\\", [1, 1]] } \\n\\n ``` \\n\\n When the renderer chooses the `top` anchor, `[0, 4]` will be used for `text-offset`; the text will be shifted down by 4 ems. \\n\\n When the renderer chooses the `left` anchor, `[3, 0]` will be used for `text-offset`; the text will be shifted right by 3 ems.","sdk-support":{"basic functionality":{"js":"3.3.0","ios":"6.8.0","android":"11.6.0"},"data-driven styling":{"js":"3.3.0","ios":"https://github.com/maplibre/maplibre-native/issues/2358","android":"https://github.com/maplibre/maplibre-native/issues/2358"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{"type":"enum","values":{"center":{"doc":"The center of the text is placed closest to the anchor."},"left":{"doc":"The left side of the text is placed closest to the anchor."},"right":{"doc":"The right side of the text is placed closest to the anchor."},"top":{"doc":"The top of the text is placed closest to the anchor."},"bottom":{"doc":"The bottom of the text is placed closest to the anchor."},"top-left":{"doc":"The top left corner of the text is placed closest to the anchor."},"top-right":{"doc":"The top right corner of the text is placed closest to the anchor."},"bottom-left":{"doc":"The bottom left corner of the text is placed closest to the anchor."},"bottom-right":{"doc":"The bottom right corner of the text is placed closest to the anchor."}},"default":"center","doc":"Part of the text placed closest to the anchor.","requires":["text-field",{"!":"text-variable-anchor"}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.39.0","android":"5.2.0","ios":"3.7.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","doc":"Maximum angle change between adjacent characters.","requires":["text-field",{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{"doc":"If a text\'s language supports horizontal writing mode, symbols with point placement would be laid out horizontally."},"vertical":{"doc":"If a text\'s language supports vertical writing mode, symbols with point placement would be laid out vertically."}},"doc":"The property allows control over a symbol\'s orientation. Note that the property values act as a hint, so that a symbol whose language doesnt support the provided orientation will be laid out in its natural orientation. Example: English point symbol will be rendered horizontally even if array value contains single \'vertical\' enum value. The order of elements in an array define priority order for the placement of an orientation variant.","requires":["text-field",{"symbol-placement":["point"]}],"sdk-support":{"basic functionality":{"js":"1.3.0","android":"8.3.0","ios":"5.3.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","doc":"Rotates the text clockwise.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.35.0","android":"5.1.0","ios":"3.6.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","doc":"Size of the additional area around the text bounding box used for detecting symbol collisions.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"doc":"If true, the text may be flipped vertically to prevent it from being rendered upside-down.","requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{"doc":"The text is not altered."},"uppercase":{"doc":"Forces all letters to be displayed in uppercase."},"lowercase":{"doc":"Forces all letters to be displayed in lowercase."}},"default":"none","doc":"Specifies how to capitalize text, similar to the CSS `text-transform` property.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.33.0","android":"5.0.0","ios":"3.5.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","doc":"Offset distance of text from its anchor. Positive values indicate right and down, while negative values indicate left and up. If used with text-variable-anchor, input values will be taken as absolute values. Offsets along the x- and y-axis will be applied automatically based on the anchor position.","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.35.0","android":"5.1.0","ios":"3.6.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"doc":"If true, the text will be visible even if it collides with other previously drawn symbols.","requires":["text-field",{"!":"text-overlap"}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-overlap":{"type":"enum","values":{"never":{"doc":"The text will be hidden if it collides with any other previously drawn symbol."},"always":{"doc":"The text will be visible even if it collides with any other previously drawn symbol."},"cooperative":{"doc":"If the text collides with another previously drawn symbol, the overlap mode for that symbol is checked. If the previous symbol was placed using `never` overlap mode, the new text is hidden. If the previous symbol was placed using `always` or `cooperative` overlap mode, the new text is visible."}},"doc":"Allows for control over whether to show symbol text when it overlaps other symbols on the map. If `text-overlap` is not set, `text-allow-overlap` is used instead","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"2.1.0","android":"https://github.com/maplibre/maplibre-native/issues/251","ios":"https://github.com/maplibre/maplibre-native/issues/251"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"doc":"If true, other symbols can be visible even if they collide with the text.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"doc":"If true, icons will display without their corresponding text when the text collides with other symbols and the icon does not.","requires":["text-field","icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{"doc":"The layer is shown."},"none":{"doc":"The layer is not shown."}},"default":"visible","doc":"Whether this layer is displayed.","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"property-type":"constant"}}'),FAe={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},"property-type":"constant"}},zAe={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},"property-type":"constant"}},jAe={type:"array",value:"*",doc:"A filter selects specific features from a layer."},NAe={type:"enum",values:{"==":{doc:'`["==", key, value]` equality: `feature[key] = value`'},"!=":{doc:'`["!=", key, value]` inequality: `feature[key]  value`'},">":{doc:'`[">", key, value]` greater than: `feature[key] > value`'},">=":{doc:'`[">=", key, value]` greater than or equal: `feature[key]  value`'},"<":{doc:'`["<", key, value]` less than: `feature[key] < value`'},"<=":{doc:'`["<=", key, value]` less than or equal: `feature[key]  value`'},in:{doc:'`["in", key, v0, ..., vn]` set inclusion: `feature[key]  {v0, ..., vn}`'},"!in":{doc:'`["!in", key, v0, ..., vn]` set exclusion: `feature[key]  {v0, ..., vn}`'},all:{doc:'`["all", f0, ..., fn]` logical `AND`: `f0  ...  fn`'},any:{doc:'`["any", f0, ..., fn]` logical `OR`: `f0  ...  fn`'},none:{doc:'`["none", f0, ..., fn]` logical `NOR`: `f0  ...  fn`'},has:{doc:'`["has", key]` `feature[key]` exists'},"!has":{doc:'`["!has", key]` `feature[key]` does not exist'}},doc:"The filter operator."},GAe={type:"enum",values:{Point:{doc:"Filter to point geometries."},LineString:{doc:"Filter to line geometries."},Polygon:{doc:"Filter to polygon geometries."}},doc:"The geometry type for the filter to select."},WAe={type:"array",minimum:0,maximum:24,value:["number","color"],length:2,doc:"Zoom level and value pair."},QAe={type:"array",value:"*",minimum:1,doc:"An expression defines a function that can be used for data-driven style properties or feature filters."},YAe=JSON.parse('{"doc":"","type":"enum","values":{"let":{"doc":"Binds expressions to named variables, which can then be referenced in the result expression using `[\\"var\\", \\"variable_name\\"]`.\\n\\n - [Visualize population density](https://maplibre.org/maplibre-gl-js/docs/examples/visualize-population-density/)","syntax":{"overloads":[{"parameters":["var_1_name","var_1_value","...","var_n_name","var_n_value","expression"],"output-type":"any"}],"parameters":[{"name":"var_i_name","type":"string literal","description":"The name of the i-th variable."},{"name":"var_i_value","type":"any","description":"The value of the i-th variable."},{"name":"expression","type":"any","description":"The expression within which the named variables can be referenced."}]},"example":["let","someNumber",500,["interpolate",["linear"],["var","someNumber"],274,"#edf8e9",1551,"#006d2c"]],"group":"Variable binding","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"var":{"doc":"References variable bound using `let`.\\n\\n - [Visualize population density](https://maplibre.org/maplibre-gl-js/docs/examples/visualize-population-density/)","syntax":{"overloads":[{"parameters":["var_name"],"output-type":"any"}],"parameters":[{"name":"var_name","type":"string literal","description":"The name of the variable bound using `let`."}]},"example":["var","density"],"group":"Variable binding","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"literal":{"doc":"Provides a literal array or object value.\\n\\n - [Display and style rich text labels](https://maplibre.org/maplibre-gl-js/docs/examples/display-and-style-rich-text-labels/)","syntax":{"overloads":[{"parameters":["json_object"],"output-type":"object"},{"parameters":["json_array"],"output-type":"array"}],"parameters":[{"name":"json_object","type":"JSON object"},{"name":"json_array","type":"JSON array"}]},"example":["literal",["DIN Offc Pro Italic","Arial Unicode MS Regular"]],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"array":{"doc":"Asserts that the input is an array (optionally with a specific item type and length). If, when the input expression is evaluated, it is not of the asserted type or length, then this assertion will cause the whole expression to be aborted.","syntax":{"overloads":[{"parameters":["value"],"output-type":"array"},{"parameters":["type","value"],"output-type":"array<type>"},{"parameters":["type","length","value"],"output-type":"array<type, length>"}],"parameters":[{"name":"value","type":"any"},{"name":"type","type":"\\"string\\" | \\"number\\" | \\"boolean\\"","description":"The asserted type of the input array."},{"name":"length","type":"number literal","description":"The asserted length of the input array."}]},"example":["array","string",3,["literal",["a","b","c"]]],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"at":{"doc":"Retrieves an item from an array.","syntax":{"overloads":[{"parameters":["index","array"],"output-type":"T"}],"parameters":[{"name":"index","type":"number","description":"The index into `array`."},{"name":"array","type":"array<T>","description":"The array of items to retrieve the specified item from."}]},"example":["at",1,["literal",["a","b","c"]]],"group":"Lookup","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"in":{"doc":"Determines whether an item exists in an array or a substring exists in a string.\\n\\n - [Measure distances](https://maplibre.org/maplibre-gl-js/docs/examples/measure-distances/)","syntax":{"overloads":[{"parameters":["item","array"],"output-type":"boolean"},{"parameters":["substring","string"],"output-type":"boolean"}],"parameters":[{"name":"item","type":"T","description":"The needle to search for within `array`."},{"name":"array","type":"array<T>","description":"The haystack through which to search for `item`."},{"name":"substring","type":"string","description":"The needle to search for within `string`."},{"name":"string","type":"string","description":"The haystack through which to search for `substring`."}]},"example":["in","$type","Point"],"group":"Lookup","sdk-support":{"basic functionality":{"js":"1.6.0","android":"9.1.0","ios":"5.8.0"}}},"index-of":{"doc":"Returns the first position at which an item can be found in an array or a substring can be found in a string, or `-1` if the input cannot be found. Accepts an optional index from where to begin the search. In a string, a UTF-16 surrogate pair counts as a single position.","syntax":{"overloads":[{"parameters":["item","array","from_index?"],"output-type":"number"},{"parameters":["substring","string","from_index?"],"output-type":"number"}],"parameters":[{"name":"item","type":"T","description":"The needle to search for within `array`."},{"name":"array","type":"array<T>","description":"The haystack through which to search for `item`."},{"name":"substring","type":"string","description":"The needle to search for within `string`."},{"name":"string","type":"string","description":"The haystack through which to search for `substring`."},{"name":"from_index","type":"number","description":"The index from where to begin the search."}]},"example":["index-of","foo",["baz","bar","hello","foo","world"]],"group":"Lookup","sdk-support":{"basic functionality":{"js":"1.10.0","android":"10.3.0","ios":"6.0.0"}}},"slice":{"doc":"Returns a subarray from an array or a substring from a string from a specified start index, or between a start index and an end index if set. The return value is inclusive of the start index but not of the end index. In a string, a UTF-16 surrogate pair counts as a single position.","syntax":{"overloads":[{"parameters":["array","start_index","end_index?"],"output-type":"array<T>"},{"parameters":["string","start_index","end_index?"],"output-type":"string"}],"parameters":[{"name":"array","type":"array<T>","description":"The original array from which to extract the subarray."},{"name":"string","type":"string","description":"The original string from which to extract the substring."},{"name":"start_index","type":"number","description":"The inclusive index from which `slice` extracts items or characters from the subarray or substring."},{"name":"end_index","type":"number","description":"The non-inclusive index up to which `slice` extracts items or characters from the subarray or substring."}]},"example":["slice",["get","name"],0,3],"group":"Lookup","sdk-support":{"basic functionality":{"js":"1.10.0","android":"10.3.0","ios":"6.0.0"}}},"case":{"doc":"Selects the first output whose corresponding test condition evaluates to true, or the fallback value otherwise.\\n\\n - [Create a hover effect](https://maplibre.org/maplibre-gl-js/docs/examples/create-a-hover-effect/)\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/display-html-clusters-with-custom-properties/)","syntax":{"overloads":[{"parameters":["condition_1","output_1","...","condition_n","output_n","fallback"],"output-type":"any"}],"parameters":[{"name":"condition_i","type":"boolean"},{"name":"output_i","type":"any"},{"name":"fallback","type":"any","description":"The result when no condition evaluates to true."}]},"example":["case",["boolean",["feature-state","hover"],false],1,0.5],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"match":{"doc":"Selects the output whose label value matches the input value, or the fallback value if no match is found. The input can be any expression (e.g. `[\\"get\\", \\"building_type\\"]`). Each label must be either:\\n\\n - a single literal value; or\\n\\n - an array of literal values, whose values must be all strings or all numbers (e.g. `[100, 101]` or `[\\"c\\", \\"b\\"]`). The input matches if any of the values in the array matches, similar to the `\\"in\\"` operator.\\n\\nEach label must be unique. If the input type does not match the type of the labels, the result will be the fallback value.","syntax":{"overloads":[{"parameters":["input","label_1","output_1","...","label_n","output_n","fallback"],"output-type":"any"}],"parameters":[{"name":"input","type":"string | number","description":"Any expression."},{"name":"label_i","type":"string literal | number literal | array<string literal> | array<number literal>","description":"The i-th literal value or array of literal values to match the input against."},{"name":"output_i","type":"any","description":"The result when the i-th label is the first label to match the input."},{"name":"fallback","type":"any","description":"The result when no label matches the input."}]},"example":["match",["get","building_type"],"residential","#f00","commercial","#0f0","#000"],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"coalesce":{"doc":"Evaluates each expression in turn until the first non-null value is obtained, and returns that value.\\n\\n - [Use a fallback image](https://maplibre.org/maplibre-gl-js/docs/examples/use-a-fallback-image/)","syntax":{"overloads":[{"parameters":["expression_1","...","expression_n"],"output-type":"any"}],"parameters":[{"name":"expression_i","type":"any"}]},"example":["coalesce",["image",["concat",["get","icon"],"_15"]],["image","marker_15"]],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"step":{"doc":"Produces discrete, stepped results by evaluating a piecewise-constant function defined by pairs of input and output values (\\"stops\\"). The `input` may be any numeric expression (e.g., `[\\"get\\", \\"population\\"]`). Stop inputs must be numeric literals in strictly ascending order.\\n\\nReturns the output value of the stop just less than the input, or the first output if the input is less than the first stop.\\n\\n - [Create and style clusters](https://maplibre.org/maplibre-gl-js/docs/examples/create-and-style-clusters/)","syntax":{"overloads":[{"parameters":["input","output_0","stop_1_input","stop_1_output","...","stop_n_input","stop_n_output"],"output-type":"any"}],"parameters":[{"name":"input","type":"number","description":"Any numeric expression."},{"name":"output_0","type":"any","description":"The result when the `input` is less than the first stop."},{"name":"stop_i_input","type":"number literal","description":"The value of the i-th stop against which the `input` is compared."},{"name":"stop_i_output","type":"any","description":"The result when the i-th stop is the last stop less than the `input`."}]},"example":["step",["get","point_count"],20,100,30,750,40],"group":"Ramps, scales, curves","sdk-support":{"basic functionality":{"js":"0.42.0","android":"6.0.0","ios":"4.0.0"}}},"interpolate":{"doc":"Produces continuous, smooth results by interpolating between pairs of input and output values (\\"stops\\"). The `input` may be any numeric expression (e.g., `[\\"get\\", \\"population\\"]`). Stop inputs must be numeric literals in strictly ascending order. The output type must be `number`, `array<number>`, `color`, `array<color>`, or `projection`.\\n\\nInterpolation types:\\n\\n- `[\\"linear\\"]`, or an expression returning one of those types: Interpolates linearly between the pair of stops just less than and just greater than the input.\\n\\n- `[\\"exponential\\", base]`: Interpolates exponentially between the stops just less than and just greater than the input. `base` controls the rate at which the output increases: higher values make the output increase more towards the high end of the range. With values close to 1 the output increases linearly.\\n\\n- `[\\"cubic-bezier\\", x1, y1, x2, y2]`: Interpolates using the cubic bezier curve defined by the given control points.\\n\\n - [Animate map camera around a point](https://maplibre.org/maplibre-gl-js/docs/examples/animate-camera-around-point/)\\n\\n - [Change building color based on zoom level](https://maplibre.org/maplibre-gl-js/docs/examples/change-building-color-based-on-zoom-level/)\\n\\n - [Create a heatmap layer](https://maplibre.org/maplibre-gl-js/docs/examples/heatmap-layer/)\\n\\n - [Visualize population density](https://maplibre.org/maplibre-gl-js/docs/examples/visualize-population-density/)","syntax":{"overloads":[{"parameters":["interpolation_type","input","stop_1_input","stop_1_output","...","stop_n_input","stop_n_output"],"output-type":"number | array<number> | color | array<color> | projection"}],"parameters":[{"name":"interpolation_type","type":"[\\"linear\\"] | [\\"exponential\\", base] | [\\"cubic-bezier\\", x1, y1, x2, y2]","description":"The interpolation type."},{"name":"input","type":"number","description":"Any numeric expression."},{"name":"stop_i_input","type":"number literal","description":"The value of the i-th stop against which the `input` is compared."},{"name":"stop_i_output","type":"number | array<number> | color | array<color> | projection","description":"The output value corresponding to the i-th stop."}]},"example":["interpolate",["linear"],["zoom"],15,0,15.05,["get","height"]],"group":"Ramps, scales, curves","sdk-support":{"basic functionality":{"js":"0.42.0","android":"6.0.0","ios":"4.0.0"}}},"interpolate-hcl":{"doc":"Produces continuous, smooth results by interpolating between pairs of input and output values (\\"stops\\"). Works like `interpolate`, but the output type must be `color` or `array<color>`, and the interpolation is performed in the Hue-Chroma-Luminance color space.","syntax":{"overloads":[{"parameters":["interpolation_type","input","stop_1_input","stop_1_output","...","stop_n_input","stop_n_output"],"output-type":"color | array<color>"}],"parameters":[{"name":"interpolation_type","type":"[\\"linear\\"] | [\\"exponential\\", base] | [\\"cubic-bezier\\", x1, y1, x2, y2]"},{"name":"input","type":"number"},{"name":"stop_i_input","type":"number literal"},{"name":"stop_i_output","type":"color | array<color>"}]},"example":["interpolate-hcl",["linear"],["zoom"],15,"#f00",15.05,"#00f"],"group":"Ramps, scales, curves","sdk-support":{"basic functionality":{"js":"0.49.0","ios":"https://github.com/maplibre/maplibre-native/issues/2784","android":"https://github.com/maplibre/maplibre-native/issues/2784"}}},"interpolate-lab":{"doc":"Produces continuous, smooth results by interpolating between pairs of input and output values (\\"stops\\"). Works like `interpolate`, but the output type must be `color` or `array<color>`, and the interpolation is performed in the CIELAB color space.","syntax":{"overloads":[{"parameters":["interpolation_type","input","stop_1_input","stop_1_output","...","stop_n_input","stop_n_output"],"output-type":"color | array<color>"}],"parameters":[{"name":"interpolation_type","type":"[\\"linear\\"] | [\\"exponential\\", base] | [\\"cubic-bezier\\", x1, y1, x2, y2]"},{"name":"input","type":"number"},{"name":"stop_i_input","type":"number literal"},{"name":"stop_i_output","type":"color | array<color>"}]},"example":["interpolate-lab",["linear"],["zoom"],15,"#f00",15.05,"#00f"],"group":"Ramps, scales, curves","sdk-support":{"basic functionality":{"js":"0.49.0","ios":"https://github.com/maplibre/maplibre-native/issues/2784","android":"https://github.com/maplibre/maplibre-native/issues/2784"}}},"ln2":{"doc":"Returns the mathematical constant ln(2).","syntax":{"overloads":[{"parameters":[],"output-type":"number"}]},"example":["ln2"],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"pi":{"doc":"Returns the mathematical constant pi.","syntax":{"overloads":[{"parameters":[],"output-type":"number"}]},"example":["pi"],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"e":{"doc":"Returns the mathematical constant e.","syntax":{"overloads":[{"parameters":[],"output-type":"number"}]},"example":["e"],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"typeof":{"doc":"Returns a string describing the type of the given value.","syntax":{"overloads":[{"parameters":["value"],"output-type":"string"}],"parameters":[{"name":"value","type":"any"}]},"example":["typeof",["get","name"]],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"string":{"doc":"Asserts that the input value is a string. If multiple values are provided, each one is evaluated in order until a string is obtained. If none of the inputs are strings, the expression is an error.","syntax":{"overloads":[{"parameters":["value_1","...","value_n"],"output-type":"string"}],"parameters":[{"name":"value_i","type":"any"}]},"example":["string",["get","name"]],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"number":{"doc":"Asserts that the input value is a number. If multiple values are provided, each one is evaluated in order until a number is obtained. If none of the inputs are numbers, the expression is an error.","syntax":{"overloads":[{"parameters":["value_1","...","value_n"],"output-type":"number"}],"parameters":[{"name":"value_i","type":"any"}]},"example":["number",["get","population"]],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"boolean":{"doc":"Asserts that the input value is a boolean. If multiple values are provided, each one is evaluated in order until a boolean is obtained. If none of the inputs are booleans, the expression is an error.\\n\\n - [Create a hover effect](https://maplibre.org/maplibre-gl-js/docs/examples/create-a-hover-effect/)","syntax":{"overloads":[{"parameters":["value_1","...","value_n"],"output-type":"boolean"}],"parameters":[{"name":"value_i","type":"any"}]},"example":["boolean",["feature-state","hover"],false],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"object":{"doc":"Asserts that the input value is an object. If multiple values are provided, each one is evaluated in order until an object is obtained. If none of the inputs are objects, the expression is an error.","syntax":{"overloads":[{"parameters":["value_1","...","value_n"],"output-type":"object"}],"parameters":[{"name":"value_i","type":"any"}]},"example":["object",["get","some-property"]],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"collator":{"doc":"Returns a `collator` for use in locale-dependent comparison operations. The `case-sensitive` and `diacritic-sensitive` options default to `false`. The `locale` argument specifies the IETF language tag of the locale to use. If none is provided, the default locale is used. If the requested locale is not available, the `collator` will use a system-defined fallback locale. Use `resolved-locale` to test the results of locale fallback behavior.","syntax":{"overloads":[{"parameters":["options"],"output-type":"collator"}],"parameters":[{"name":"options","type":"{ \\"case-sensitive\\"?: boolean, \\"diacritic-sensitive\\"?: boolean, \\"locale\\"?: string }"}]},"example":["collator",{"case-sensitive":true,"diacritic-sensitive":true,"locale":"fr"}],"group":"Types","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},"format":{"doc":"Returns a `formatted` string for displaying mixed-format text in the `text-field` property. The input may contain a string literal or expression, including an [`\'image\'`](#image) expression. Strings may be followed by a style override object that supports the following properties:\\n\\n- `\\"text-font\\"`: Overrides the font stack specified by the root layout property.\\n\\n- `\\"text-color\\"`: Overrides the color specified by the root paint property.\\n\\n- `\\"font-scale\\"`: Applies a scaling factor on `text-size` as specified by the root layout property.\\n\\n- `\\"vertical-align\\"`: Aligns vertically text section or image in relation to the row it belongs to. Possible values are: \\n\\t- `\\"bottom\\"` *default*: align the bottom of this section with the bottom of other sections.\\n<img alt=\\"Visual representation of bottom alignment\\" src=\\"https://github.com/user-attachments/assets/0474a2fd-a4b2-417c-9187-7a13a28695bc\\"/>\\n\\t- `\\"center\\"`: align the center of this section with the center of other sections.\\n<img alt=\\"Visual representation of center alignment\\" src=\\"https://github.com/user-attachments/assets/92237455-be6d-4c5d-b8f6-8127effc1950\\"/>\\n\\t- `\\"top\\"`: align the top of this section with the top of other sections.\\n<img alt=\\"Visual representation of top alignment\\" src=\\"https://github.com/user-attachments/assets/45dccb28-d977-4abb-a006-4ea9792b7c53\\"/>\\n\\t- Refer to [the design proposal](https://github.com/maplibre/maplibre-style-spec/issues/832) for more details.\\n\\n - [Change the case of labels](https://maplibre.org/maplibre-gl-js/docs/examples/change-case-of-labels/)\\n\\n - [Display and style rich text labels](https://maplibre.org/maplibre-gl-js/docs/examples/display-and-style-rich-text-labels/)","syntax":{"overloads":[{"parameters":["input_1","style_overrides_1?","...","input_n","style_overrides_n?"],"output-type":"formatted"}],"parameters":[{"name":"input_i","type":"string | image"},{"name":"style_overrides_i","type":"{ \\"text-font\\"?: string, \\"text-color\\"?: color, \\"font-scale\\"?: number, \\"vertical-align\\"?: \\"bottom\\" | \\"center\\" | \\"top\\" }"}]},"example":["format",["upcase",["get","FacilityName"]],{"font-scale":0.8},"\\n\\n",{},["downcase",["get","Comments"]],{"font-scale":0.6,"vertical-align":"center"}],"group":"Types","sdk-support":{"basic functionality":{"js":"0.48.0","android":"6.7.0","ios":"4.6.0"},"text-font":{"js":"0.48.0","android":"6.7.0","ios":"4.6.0"},"font-scale":{"js":"0.48.0","android":"6.7.0","ios":"4.6.0"},"text-color":{"js":"1.3.0","android":"7.3.0","ios":"4.10.0"},"vertical-align":{"js":"5.1.0","android":"https://github.com/maplibre/maplibre-native/issues/3055","ios":"https://github.com/maplibre/maplibre-native/issues/3055"},"image":{"js":"1.6.0","android":"8.6.0","ios":"5.7.0"}}},"image":{"doc":"Returns an `image` type for use in `icon-image`, `*-pattern` entries and as a section in the `format` expression. If set, the `image` argument will check that the requested image exists in the style and will return either the resolved image name or `null`, depending on whether or not the image is currently in the style. This validation process is synchronous and requires the image to have been added to the style before requesting it in the `image` argument.\\n\\n - [Use a fallback image](https://maplibre.org/maplibre-gl-js/docs/examples/use-a-fallback-image/)","syntax":{"overloads":[{"parameters":["image_name"],"output-type":"image"}],"parameters":[{"name":"image_name","type":"string"}]},"example":["image","marker_15"],"group":"Types","sdk-support":{"basic functionality":{"js":"1.4.0","android":"8.6.0","ios":"5.7.0"}}},"global-state":{"doc":"Retrieves a property value from global state that can be set with platform-specific APIs. Defaults can be provided using the [`state`](https://maplibre.org/maplibre-style-spec/root/#state) root property. Returns `null` if no value nor default value is set for the retrieved property.","group":"Lookup","syntax":{"overloads":[{"parameters":["property_name"],"output-type":"any"}],"parameters":[{"name":"property_name","type":"string literal","description":"The name of the global state property to retrieve."}]},"example":["global-state","someProperty"],"sdk-support":{"basic functionality":{"js":"https://github.com/maplibre/maplibre-gl-js/issues/4964","android":"https://github.com/maplibre/maplibre-native/issues/3302","ios":"https://github.com/maplibre/maplibre-native/issues/3302"}}},"number-format":{"doc":"Converts the input number into a string representation using the providing formatting rules. If set, the `locale` argument specifies the locale to use, as a BCP 47 language tag. If set, the `currency` argument specifies an ISO 4217 code to use for currency-style formatting. If set, the `min-fraction-digits` and `max-fraction-digits` arguments specify the minimum and maximum number of fractional digits to include.\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/display-html-clusters-with-custom-properties/)","syntax":{"overloads":[{"parameters":["input","format_options"],"output-type":"string"}],"parameters":[{"name":"input","type":"number"},{"name":"format_options","type":"{ \\"locale\\"?: string, \\"currency\\"?: string, \\"min-fraction-digits\\"?: number, \\"max-fraction-digits\\"?: number }"}]},"example":["number-format",["get","mag"],{"min-fraction-digits":1,"max-fraction-digits":1}],"group":"Types","sdk-support":{"basic functionality":{"js":"0.54.0","android":"8.4.0","ios":"supported"}}},"to-string":{"doc":"Converts the input value to a string. If the input is `null`, the result is `\\"\\"`. If the input is a boolean, the result is `\\"true\\"` or `\\"false\\"`. If the input is a number, it is converted to a string as specified by the [\\"NumberToString\\" algorithm](https://tc39.github.io/ecma262/#sec-tostring-applied-to-the-number-type) of the ECMAScript Language Specification. If the input is a color, it is converted to a string of the form `\\"rgba(r,g,b,a)\\"`, where `r`, `g`, and `b` are numerals ranging from 0 to 255, and `a` ranges from 0 to 1. Otherwise, the input is converted to a string in the format specified by the [`JSON.stringify`](https://tc39.github.io/ecma262/#sec-json.stringify) function of the ECMAScript Language Specification.\\n\\n - [Create a time slider](https://maplibre.org/maplibre-gl-js/docs/examples/create-a-time-slider/)","syntax":{"overloads":[{"parameters":["value"],"output-type":"string"}],"parameters":[{"name":"value","type":"any"}]},"example":["to-string",["get","mag"]],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"to-number":{"doc":"Converts the input value to a number, if possible. If the input is `null` or `false`, the result is 0. If the input is `true`, the result is 1. If the input is a string, it is converted to a number as specified by the [\\"ToNumber Applied to the String Type\\" algorithm](https://tc39.github.io/ecma262/#sec-tonumber-applied-to-the-string-type) of the ECMAScript Language Specification. If multiple values are provided, each one is evaluated in order until the first successful conversion is obtained. If none of the inputs can be converted, the expression is an error.","syntax":{"overloads":[{"parameters":["value_1","...","value_n"],"output-type":"number"}],"parameters":[{"name":"value_i","type":"any"}]},"example":["to-number","someProperty"],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"to-boolean":{"doc":"Converts the input value to a boolean. The result is `false` when the input is an empty string, 0, `false`, `null`, or `NaN`; otherwise it is `true`.","syntax":{"overloads":[{"parameters":["value"],"output-type":"boolean"}],"parameters":[{"name":"value","type":"any"}]},"example":["to-boolean","someProperty"],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"to-rgba":{"doc":"Returns a four-element array containing the input color\'s red, green, blue, and alpha components, in that order.","syntax":{"overloads":[{"parameters":["color"],"output-type":"array"}],"parameters":[{"name":"color","type":"color"}]},"example":["to-rgba","#ff0000"],"group":"Color","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"to-color":{"doc":"Converts the input value to a color. If multiple values are provided, each one is evaluated in order until the first successful conversion is obtained. If none of the inputs can be converted, the expression is an error.\\n\\n - [Visualize population density](https://maplibre.org/maplibre-gl-js/docs/examples/visualize-population-density/)","syntax":{"overloads":[{"parameters":["value_1","...","value_n"],"output-type":"color"}],"parameters":[{"name":"value_i","type":"any"}]},"example":["to-color","#edf8e9"],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"rgb":{"doc":"Creates a color value from red, green, and blue components, which must range between 0 and 255, and an alpha component of 1. If any component is out of range, the expression is an error.","syntax":{"overloads":[{"parameters":["red","green","blue"],"output-type":"color"}],"parameters":[{"name":"red","type":"number"},{"name":"green","type":"number"},{"name":"blue","type":"number"}]},"example":["rgb",255,0,0],"group":"Color","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"rgba":{"doc":"Creates a color value from red, green, blue components, which must range between 0 and 255, and an alpha component which must range between 0 and 1. If any component is out of range, the expression is an error.","syntax":{"overloads":[{"parameters":["red","green","blue","alpha"],"output-type":"color"}],"parameters":[{"name":"red","type":"number"},{"name":"green","type":"number"},{"name":"blue","type":"number"},{"name":"alpha","type":"number"}]},"example":["rgba",255,0,0,1],"group":"Color","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"get":{"doc":"Retrieves a property value from the current feature\'s properties, or from another object if a second argument is provided. Returns null if the requested property is missing.\\n\\n - [Change the case of labels](https://maplibre.org/maplibre-gl-js/docs/examples/change-case-of-labels/)\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/display-html-clusters-with-custom-properties/)\\n\\n - [Extrude polygons for 3D indoor mapping](https://maplibre.org/maplibre-gl-js/docs/examples/extrude-polygons-for-3d-indoor-mapping/)","syntax":{"overloads":[{"parameters":["property_name","object?"],"output-type":"any"}],"parameters":[{"name":"property_name","type":"string","description":"The name of the property to retrieve the value of."},{"name":"object","type":"object","description":"The object to retrieve the value from."}]},"example":["get","someProperty"],"group":"Lookup","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"has":{"doc":"Tests for the presence of a property value in the current feature\'s properties, or from another object if a second argument is provided.\\n\\n - [Create and style clusters](https://maplibre.org/maplibre-gl-js/docs/examples/create-and-style-clusters/)","syntax":{"overloads":[{"parameters":["property_name","object?"],"output-type":"boolean"}],"parameters":[{"name":"property_name","type":"string","description":"The name of the property to test for the presence of."},{"name":"object","type":"object","description":"The object in which to test for the presence of the `property_name` property."}]},"example":["has","someProperty"],"group":"Lookup","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"length":{"doc":"Gets the length of an array or string. In a string, a UTF-16 surrogate pair counts as a single position.","syntax":{"overloads":[{"parameters":["array_or_string"],"output-type":"number"}],"parameters":[{"name":"array_or_string","type":"array | string"}]},"example":["length",["get","myArray"]],"group":"Lookup","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"properties":{"doc":"Gets the feature properties object.  Note that in some cases, it may be more efficient to use [\\"get\\", \\"property_name\\"] directly.","syntax":{"overloads":[{"parameters":[],"output-type":"object"}]},"example":["properties"],"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"feature-state":{"doc":"Retrieves a property value from the current feature\'s state. Returns null if the requested property is not present on the feature\'s state. A feature\'s state is not part of the GeoJSON or vector tile data, and must be set programmatically on each feature. When `source.promoteId` is not provided, features are identified by their `id` attribute, which must be an integer or a string that can be cast to an integer. When `source.promoteId` is provided, features are identified by their `promoteId` property, which may be a number, string, or any primitive data type. Note that [\\"feature-state\\"] can only be used with paint properties that support data-driven styling.\\n\\n - [Create a hover effect](https://maplibre.org/maplibre-gl-js/docs/examples/create-a-hover-effect/)","syntax":{"overloads":[{"parameters":["property_name"],"output-type":"any"}],"parameters":[{"name":"property_name","type":"string"}]},"example":["feature-state","hover"],"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.46.0","ios":"https://github.com/maplibre/maplibre-native/issues/1698","android":"https://github.com/maplibre/maplibre-native/issues/1698"}}},"geometry-type":{"doc":"Returns the feature\'s simple geometry type: `Point`, `LineString`, or `Polygon`. `MultiPoint`, `MultiLineString`, and `MultiPolygon` are returned as `Point`, `LineString`, and `Polygon`, respectively.","syntax":{"overloads":[{"parameters":[],"output-type":"string"}]},"example":["==",["geometry-type"],"Polygon"],"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"id":{"doc":"Gets the feature\'s id, if it has one.","syntax":{"overloads":[{"parameters":[],"output-type":"any"}]},"example":["id"],"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"zoom":{"doc":"Gets the current zoom level.  Note that in style layout and paint properties, [\\"zoom\\"] may only appear as the input to a top-level \\"step\\" or \\"interpolate\\" expression.","syntax":{"overloads":[{"parameters":[],"output-type":"number"}]},"example":["interpolate",["linear"],["zoom"],15,0,15.05,["get","height"]],"group":"Zoom","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"heatmap-density":{"doc":"Gets the kernel density estimation of a pixel in a heatmap layer, which is a relative measure of how many data points are crowded around a particular pixel. Can only be used in the `heatmap-color` property.","syntax":{"overloads":[{"parameters":[],"output-type":"number"}]},"example":["heatmap-density"],"group":"Heatmap","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"elevation":{"doc":"Gets the elevation of a pixel (in meters above the vertical datum reference of the `raster-dem` tiles) from a `raster-dem` source. Can only be used in the `color-relief-color` property of a `color-relief` layer.","syntax":{"overloads":[{"parameters":[],"output-type":"number"}]},"example":["elevation"],"group":"Color Relief","sdk-support":{"basic functionality":{"js":"5.6.0","android":"https://github.com/maplibre/maplibre-native/issues/3408","ios":"https://github.com/maplibre/maplibre-native/issues/3408"}}},"line-progress":{"doc":"Gets the progress along a gradient line. Can only be used in the `line-gradient` property.","syntax":{"overloads":[{"parameters":[],"output-type":"number"}]},"example":["line-progress"],"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.5.0","ios":"4.6.0"}}},"accumulated":{"doc":"Gets the value of a cluster property accumulated so far. Can only be used in the `clusterProperties` option of a clustered GeoJSON source.","syntax":{"overloads":[{"parameters":[],"output-type":"any"}]},"example":["accumulated"],"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.53.0","ios":"supported","android":"supported"}}},"+":{"doc":"Returns the sum of the inputs.","syntax":{"overloads":[{"parameters":["input_1","...","input_n"],"output-type":"number"}],"parameters":[{"name":"input_i","type":"number"}]},"example":["+",2,3],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"*":{"doc":"Returns the product of the inputs.","syntax":{"overloads":[{"parameters":["input_1","...","input_n"],"output-type":"number"}],"parameters":[{"name":"input_i","type":"number"}]},"example":["*",2,3],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"-":{"doc":"For two inputs, returns the result of subtracting the second input from the first. For a single input, returns the result of subtracting it from 0.","syntax":{"overloads":[{"parameters":["input_1","input_2"],"output-type":"number"},{"parameters":["single_input"],"output-type":"number"}],"parameters":[{"name":"input_1","type":"number","description":"The number from which to subtract `input_2`."},{"name":"input_2","type":"number","description":"The number to subtract from `input_1`."},{"name":"single_input","type":"number","description":"The number to subtract from 0."}]},"example":["-",10],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"/":{"doc":"Returns the result of floating point division of the first input by the second.\\n\\n - [Visualize population density](https://maplibre.org/maplibre-gl-js/docs/examples/visualize-population-density/)","syntax":{"overloads":[{"parameters":["input_1","input_2"],"output-type":"number"}],"parameters":[{"name":"input_1","type":"number","description":"The dividend."},{"name":"input_2","type":"number","description":"The divisor."}]},"example":["/",["get","population"],["get","sq-km"]],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"%":{"doc":"Returns the remainder after integer division of the first input by the second.","syntax":{"overloads":[{"parameters":["input_1","input_2"],"output-type":"number"}],"parameters":[{"name":"input_1","type":"number","description":"The dividend."},{"name":"input_2","type":"number","description":"The divisor."}]},"example":["%",10,3],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"^":{"doc":"Returns the result of raising the first input to the power specified by the second.","syntax":{"overloads":[{"parameters":["input_1","input_2"],"output-type":"number"}],"parameters":[{"name":"input_1","type":"number","description":"The base."},{"name":"input_2","type":"number","description":"The exponent."}]},"example":["^",2,3],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"sqrt":{"doc":"Returns the square root of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number","description":"The radicand."}]},"example":["sqrt",9],"group":"Math","sdk-support":{"basic functionality":{"js":"0.42.0","android":"6.0.0","ios":"4.0.0"}}},"log10":{"doc":"Returns the base-ten logarithm of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["log10",8],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"ln":{"doc":"Returns the natural logarithm of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["ln",8],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"log2":{"doc":"Returns the base-two logarithm of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["log2",8],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"sin":{"doc":"Returns the sine of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["sin",1],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"cos":{"doc":"Returns the cosine of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["cos",1],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"tan":{"doc":"Returns the tangent of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["tan",1],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"asin":{"doc":"Returns the arcsine of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["asin",1],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"acos":{"doc":"Returns the arccosine of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["acos",1],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"atan":{"doc":"Returns the arctangent of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["atan",1],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"min":{"doc":"Returns the minimum value of the inputs.","syntax":{"overloads":[{"parameters":["input_1","...","input_n"],"output-type":"number"}],"parameters":[{"name":"input_i","type":"number"}]},"example":["min",1,2],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"max":{"doc":"Returns the maximum value of the inputs.","syntax":{"overloads":[{"parameters":["input_1","...","input_n"],"output-type":"number"}],"parameters":[{"name":"input_i","type":"number"}]},"example":["max",1,2],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"round":{"doc":"Rounds the input to the nearest integer. Halfway values are rounded away from zero. For example, `[\\"round\\", -1.5]` evaluates to -2.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["round",1.5],"group":"Math","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.0.0","ios":"4.0.0"}}},"abs":{"doc":"Returns the absolute value of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["abs",-1.5],"group":"Math","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.0.0","ios":"4.0.0"}}},"ceil":{"doc":"Returns the smallest integer that is greater than or equal to the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["ceil",1.5],"group":"Math","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.0.0","ios":"4.0.0"}}},"floor":{"doc":"Returns the largest integer that is less than or equal to the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["floor",1.5],"group":"Math","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.0.0","ios":"4.0.0"}}},"distance":{"doc":"Returns the shortest distance in meters between the evaluated feature and the input geometry. The input value can be a valid GeoJSON of type `Point`, `MultiPoint`, `LineString`, `MultiLineString`, `Polygon`, `MultiPolygon`, `Feature`, or `FeatureCollection`. Distance values returned may vary in precision due to loss in precision from encoding geometries, particularly below zoom level 13.","syntax":{"overloads":[{"parameters":["geojson"],"output-type":"number"}],"parameters":[{"name":"geojson","type":"GeoJSON object"}]},"example":["distance",{"type":"Point","coordinates":[0,0]}],"group":"Math","sdk-support":{"basic functionality":{"js":"4.2.0","android":"9.2.0","ios":"5.9.0"}}},"==":{"doc":"Returns `true` if the input values are equal, `false` otherwise. The comparison is strictly typed: values of different runtime types are always considered unequal. Cases where the types are known to be different at parse time are considered invalid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.\\n\\n - [Add multiple geometries from one GeoJSON source](https://maplibre.org/maplibre-gl-js/docs/examples/multiple-geometries/)\\n\\n - [Create a time slider](https://maplibre.org/maplibre-gl-js/docs/examples/timeline-animation/)\\n\\n - [Display buildings in 3D](https://maplibre.org/maplibre-gl-js/docs/examples/display-buildings-in-3d/)\\n\\n - [Filter symbols by toggling a list](https://maplibre.org/maplibre-gl-js/docs/examples/filter-symbols-by-toggling-a-list/)","syntax":{"overloads":[{"parameters":["input_1","input_2","collator?"],"output-type":"boolean"}],"parameters":[{"name":"input_1","type":"any"},{"name":"input_2","type":"any"},{"name":"collator","type":"collator","description":"Options for locale-dependent comparison."}]},"example":["==","$type","Polygon"],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},"!=":{"doc":"Returns `true` if the input values are not equal, `false` otherwise. The comparison is strictly typed: values of different runtime types are always considered unequal. Cases where the types are known to be different at parse time are considered invalid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/display-html-clusters-with-custom-properties/)","syntax":{"overloads":[{"parameters":["input_1","input_2","collator?"],"output-type":"boolean"}],"parameters":[{"name":"input_1","type":"any"},{"name":"input_2","type":"any"},{"name":"collator","type":"collator","description":"Options for locale-dependent comparison."}]},"example":["!=","cluster",true],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},">":{"doc":"Returns `true` if the first input is strictly greater than the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.","syntax":{"overloads":[{"parameters":["string_1","string_2","collator?"],"output-type":"boolean"},{"parameters":["number_1","number_2","collator?"],"output-type":"boolean"}],"parameters":[{"name":"string_i","type":"string"},{"name":"number_i","type":"number"},{"name":"collator","type":"collator","description":"Options for locale-dependent comparison."}]},"example":[">",["get","mag"],2],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},"<":{"doc":"Returns `true` if the first input is strictly less than the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/display-html-clusters-with-custom-properties/)","syntax":{"overloads":[{"parameters":["string_1","string_2","collator?"],"output-type":"boolean"},{"parameters":["number_1","number_2","collator?"],"output-type":"boolean"}],"parameters":[{"name":"string_i","type":"string"},{"name":"number_i","type":"number"},{"name":"collator","type":"collator","description":"Options for locale-dependent comparison."}]},"example":["<",["get","mag"],2],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},">=":{"doc":"Returns `true` if the first input is greater than or equal to the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/display-html-clusters-with-custom-properties/)","syntax":{"overloads":[{"parameters":["string_1","string_2","collator?"],"output-type":"boolean"},{"parameters":["number_1","number_2","collator?"],"output-type":"boolean"}],"parameters":[{"name":"string_i","type":"string"},{"name":"number_i","type":"number"},{"name":"collator","type":"collator","description":"Options for locale-dependent comparison."}]},"example":[">=",["get","mag"],6],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},"<=":{"doc":"Returns `true` if the first input is less than or equal to the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.","syntax":{"overloads":[{"parameters":["string_1","string_2","collator?"],"output-type":"boolean"},{"parameters":["number_1","number_2","collator?"],"output-type":"boolean"}],"parameters":[{"name":"string_i","type":"string"},{"name":"number_i","type":"number"},{"name":"collator","type":"collator","description":"Options for locale-dependent comparison."}]},"example":["<=",["get","mag"],6],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},"all":{"doc":"Returns `true` if all the inputs are `true`, `false` otherwise. The inputs are evaluated in order, and evaluation is short-circuiting: once an input expression evaluates to `false`, the result is `false` and no further input expressions are evaluated.\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/display-html-clusters-with-custom-properties/)","syntax":{"overloads":[{"parameters":["input_1","...","input_n"],"output-type":"boolean"}],"parameters":[{"name":"input_i","type":"boolean"}]},"example":["all",[">=",["get","mag"],4],["<",["get","mag"],5]],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"any":{"doc":"Returns `true` if any of the inputs are `true`, `false` otherwise. The inputs are evaluated in order, and evaluation is short-circuiting: once an input expression evaluates to `true`, the result is `true` and no further input expressions are evaluated.","syntax":{"overloads":[{"parameters":["input_1","...","input_n"],"output-type":"boolean"}],"parameters":[{"name":"input_i","type":"boolean"}]},"example":["any",[">=",["get","mag"],4],["<",["get","mag"],5]],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"!":{"doc":"Logical negation. Returns `true` if the input is `false`, and `false` if the input is `true`.\\n\\n - [Create and style clusters](https://maplibre.org/maplibre-gl-js/docs/examples/create-and-style-clusters/)","syntax":{"overloads":[{"parameters":["input"],"output-type":"boolean"}],"parameters":[{"name":"input","type":"boolean"}]},"example":["!",["has","point_count"]],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"within":{"doc":"Returns `true` if the evaluated feature is fully contained inside a boundary of the input geometry, `false` otherwise. The input value can be a valid GeoJSON of type `Polygon`, `MultiPolygon`, `Feature`, or `FeatureCollection`. Supported features for evaluation:\\n\\n- `Point`: Returns `false` if a point is on the boundary or falls outside the boundary.\\n\\n- `LineString`: Returns `false` if any part of a line falls outside the boundary, the line intersects the boundary, or a line\'s endpoint is on the boundary.","syntax":{"overloads":[{"parameters":["geojson"],"output-type":"boolean"}],"parameters":[{"name":"geojson","type":"GeoJSON object"}]},"example":["within",{"type":"Polygon","coordinates":[[[0,0],[0,5],[5,5],[5,0],[0,0]]]}],"group":"Decision","sdk-support":{"basic functionality":{"js":"1.9.0","android":"9.1.0","ios":"5.8.0"}}},"is-supported-script":{"doc":"Returns `true` if the input string is expected to render legibly. Returns `false` if the input string contains sections that cannot be rendered without potential loss of meaning (e.g. Indic scripts that require complex text shaping, or right-to-left scripts if the `mapbox-gl-rtl-text` plugin is not in use in MapLibre GL JS).","syntax":{"overloads":[{"parameters":["input"],"output-type":"boolean"}],"parameters":[{"name":"input","type":"string"}]},"example":["is-supported-script",""],"group":"String","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.6.0","ios":"supported"}}},"upcase":{"doc":"Returns the input string converted to uppercase. Follows the Unicode Default Case Conversion algorithm and the locale-insensitive case mappings in the Unicode Character Database.\\n\\n - [Change the case of labels](https://maplibre.org/maplibre-gl-js/docs/examples/change-case-of-labels/)","syntax":{"overloads":[{"parameters":["input"],"output-type":"string"}],"parameters":[{"name":"input","type":"string"}]},"example":["upcase",["get","name"]],"group":"String","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"downcase":{"doc":"Returns the input string converted to lowercase. Follows the Unicode Default Case Conversion algorithm and the locale-insensitive case mappings in the Unicode Character Database.\\n\\n - [Change the case of labels](https://maplibre.org/maplibre-gl-js/docs/examples/change-case-of-labels/)","syntax":{"overloads":[{"parameters":["input"],"output-type":"string"}],"parameters":[{"name":"input","type":"string"}]},"example":["downcase",["get","name"]],"group":"String","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"concat":{"doc":"Returns a `string` consisting of the concatenation of the inputs. Each input is converted to a string as if by `to-string`.\\n\\n - [Add a generated icon to the map](https://maplibre.org/maplibre-gl-js/docs/examples/add-a-generated-icon-to-the-map/)\\n\\n - [Create a time slider](https://maplibre.org/maplibre-gl-js/docs/examples/create-a-time-slider/)\\n\\n - [Use a fallback image](https://maplibre.org/maplibre-gl-js/docs/examples/fallback-image/)\\n\\n - [Variable label placement](https://maplibre.org/maplibre-gl-js/docs/examples/variable-label-placement/)","syntax":{"overloads":[{"parameters":["input_1","...","input_n"],"output-type":"string"}],"parameters":[{"name":"input_i","type":"any"}]},"example":["concat","square-rgb-",["get","color"]],"group":"String","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"resolved-locale":{"doc":"Returns the IETF language tag of the locale being used by the provided `collator`. This can be used to determine the default system locale, or to determine if a requested locale was successfully loaded.","syntax":{"overloads":[{"parameters":["collator"],"output-type":"string"}],"parameters":[{"name":"collator","type":"collator"}]},"example":["resolved-locale",["collator",{"case-sensitive":true,"diacritic-sensitive":false,"locale":"de"}]],"group":"String","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}}}}'),qAe={anchor:{type:"enum",default:"viewport",values:{map:{doc:"The position of the light source is aligned to the rotation of the map."},viewport:{doc:"The position of the light source is aligned to the rotation of the viewport."}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]},doc:"Whether extruded geometries are lit relative to the map or viewport.",example:"map","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},doc:"Position of the light source relative to lit (extruded) geometries, in [r radial coordinate, a azimuthal angle, p polar angle] where r indicates the distance from the center of the base of an object to its light, a indicates the position of the light relative to 0 (0 when `light.anchor` is set to `viewport` corresponds to the top of the viewport, or 0 when `light.anchor` is set to `map` corresponds to due north, and degrees proceed clockwise), and p indicates the height of the light (from 0, directly above, to 180, directly below).",example:[1.5,90,80],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Color tint for lighting extruded geometries.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Intensity of lighting (on a scale from 0 to 1). Higher numbers will present as more extreme contrast.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}}},VAe={"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The base color for the sky."},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The base color at the horizon."},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The base color for the fog. Requires 3D terrain."},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"How to blend the fog over the 3D terrain. Where 0 is the map center and 1 is the horizon."},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"How to blend the fog color and the horizon color. Where 0 is using the horizon color only and 1 is using the fog color only."},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"How to blend the sky color and the horizon color. Where 1 is blending the color at the middle of the sky and 0 is not blending at all and using the sky color only."},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"How to blend the atmosphere. Where 1 is visible atmosphere and 0 is hidden. It is best to interpolate this expression when using globe projection."}},$Ae={source:{type:"string",doc:"The source for the terrain data.",required:!0,"sdk-support":{"basic functionality":{js:"2.2.0",ios:"https://github.com/maplibre/maplibre-native/issues/252",android:"https://github.com/maplibre/maplibre-native/issues/252"}}},exaggeration:{type:"number",minimum:0,doc:"The exaggeration of the terrain - how high it will look.",default:1,"sdk-support":{"basic functionality":{js:"2.2.0",ios:"https://github.com/maplibre/maplibre-native/issues/252",android:"https://github.com/maplibre/maplibre-native/issues/252"}}}},HAe={type:{type:"projectionDefinition",doc:"The projection definition type. Can be specified as a string, a transition state, or an expression.",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},ZAe=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],XAe={"fill-antialias":{type:"boolean",default:!0,doc:"Whether or not the fill should be antialiased.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire fill layer. In contrast to the `fill-color`, this value will also affect the 1px stroke around the fill, if the stroke is used.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.21.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",doc:"The color of the filled part of this layer. This color can be specified as `rgba` with an alpha component and the color's opacity will not affect the opacity of the 1px stroke, if it is used.",transition:!0,requires:[{"!":"fill-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.19.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",doc:"The outline color of the fill. Matches the value of `fill-color` if unspecified.",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.19.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{doc:"The fill is translated relative to the map."},viewport:{doc:"The fill is translated relative to the viewport."}},doc:"Controls the frame of reference for `fill-translate`.",default:"map",requires:["fill-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing image fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},JAe={"line-opacity":{type:"number",doc:"The opacity at which the line will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",doc:"The color with which the line will be drawn.",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.23.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{doc:"The line is translated relative to the map."},viewport:{doc:"The line is translated relative to the viewport."}},doc:"Controls the frame of reference for `line-translate`.",default:"map",requires:["line-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",doc:"Stroke thickness.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,doc:"Draws a line casing outside of a line's actual path. Value indicates the width of the inner gap.",transition:!0,units:"pixels","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,doc:"The line's offset. For linear features, a positive value offsets the line to the right, relative to the direction of the line, and a negative value to the left. For polygon features, a positive value results in an inset, and a negative value results in an outset.",transition:!0,units:"pixels","sdk-support":{"basic functionality":{js:"0.12.1",android:"3.0.0",ios:"3.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Blur applied to the line, in pixels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",doc:'Specifies the lengths of the alternating dashes and gaps that form the dash pattern. The lengths are later scaled by the line width. To convert a dash length to pixels, multiply the length by the current line width. GeoJSON sources with `lineMetrics: true` specified won\'t render dashed lines to the expected scale. Zoom-dependent expressions will be evaluated only at integer zoom levels. The only way to create an array value is using `["literal", [...]]`; arrays cannot be read from or derived from feature properties.',minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"5.8.0",ios:"https://github.com/maplibre/maplibre-native/issues/744",android:"https://github.com/maplibre/maplibre-native/issues/744"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing image lines. For seamless patterns, image width must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",doc:'Defines a gradient with which to color a line feature. Can only be used with GeoJSON sources that specify `"lineMetrics": true`.',transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],"sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.4.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},ehe={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",doc:"Circle radius.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.18.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",doc:"The fill color of the circle.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.18.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,doc:"Amount to blur the circle. 1 blurs the circle such that only the centerpoint is full opacity.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.20.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",doc:"The opacity at which the circle will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.20.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{doc:"The circle is translated relative to the map."},viewport:{doc:"The circle is translated relative to the viewport."}},doc:"Controls the frame of reference for `circle-translate`.",default:"map",requires:["circle-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{doc:"Circles are scaled according to their apparent distance to the camera."},viewport:{doc:"Circles are not scaled."}},default:"map",doc:"Controls the scaling behavior of the circle when the map is pitched.","sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{doc:"The circle is aligned to the plane of the map."},viewport:{doc:"The circle is aligned to the plane of the viewport."}},default:"viewport",doc:"Orientation of circle when map is pitched.","sdk-support":{"basic functionality":{js:"0.39.0",android:"5.2.0",ios:"3.7.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"The width of the circle's stroke. Strokes are placed outside of the `circle-radius`.","sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",doc:"The stroke color of the circle.",transition:!0,"sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",doc:"The opacity of the circle's stroke.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},the={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",doc:"Radius of influence of one heatmap point in pixels. Increasing the value makes the heatmap smoother, but less detailed.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"},"data-driven styling":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,doc:"A measure of how much an individual point contributes to the heatmap. A value of 10 would be equivalent to having 10 points of weight 1 in the same spot. Especially useful when combined with clustering.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"},"data-driven styling":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,doc:"Similar to `heatmap-weight` but controls the intensity of the heatmap globally. Primarily used for adjusting the heatmap based on zoom level.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],doc:'Defines the color of each pixel based on its density value in a heatmap.  Should be an expression that uses `["heatmap-density"]` as input.',transition:!1,"sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",doc:"The global opacity at which the heatmap layer will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},nhe={"icon-opacity":{doc:"The opacity at which the icon will be drawn.",type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,doc:"The color of the icon. This can only be used with SDF icons.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,doc:"The color of the icon's halo. Icon halos can only be used with SDF icons.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Distance of halo to the icon outline. \n\nThe unit is in pixels only for SDF sprites that were created with a blur radius of 8, multiplied by the display density. I.e., the radius needs to be 16 for `@2x` sprites, etc.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Fade out the halo towards the outside.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"Distance that the icon's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{doc:"Icons are translated relative to the map."},viewport:{doc:"Icons are translated relative to the viewport."}},doc:"Controls the frame of reference for `icon-translate`.",default:"map",requires:["icon-image","icon-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",doc:"The opacity at which the text will be drawn.",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",doc:"The color with which the text will be drawn.",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,doc:"The color of the text's halo, which helps it stand out from backgrounds.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Distance of halo to the font outline. Max text halo width is 1/4 of the font-size.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"The halo's fadeout distance towards the outside.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"Distance that the text's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{doc:"The text is translated relative to the map."},viewport:{doc:"The text is translated relative to the viewport."}},doc:"Controls the frame of reference for `text-translate`.",default:"map",requires:["text-field","text-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},ihe={"raster-opacity":{type:"number",doc:"The opacity at which the image will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",doc:"Rotates hues around the color wheel.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",doc:"Increase or reduce the brightness of the image. The value is the minimum brightness.",default:0,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",doc:"Increase or reduce the brightness of the image. The value is the maximum brightness.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",doc:"Increase or reduce the saturation of the image.",default:0,minimum:-1,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",doc:"Increase or reduce the contrast of the image.",default:0,minimum:-1,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",doc:"The resampling/interpolation method to use for overscaling, also known as texture magnification filter",values:{linear:{doc:"(Bi)linear filtering interpolates pixel values using the weighted average of the four closest original source pixels creating a smooth but blurry look when overscaled"},nearest:{doc:"Nearest neighbor filtering interpolates pixel values using the nearest original source pixel creating a sharp but pixelated look when overscaled"}},default:"linear","sdk-support":{"basic functionality":{js:"0.47.0",android:"6.3.0",ios:"4.2.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",doc:"Fade duration when a new tile is added, or when a video is started or its coordinates are updated.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},rhe={"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,doc:"The direction of the light source(s) used to generate the hillshading with 0 as the top of the viewport if `hillshade-illumination-anchor` is set to `viewport` and due north if `hillshade-illumination-anchor` is set to `map`. Only when `hillshade-method` is set to `multidirectional` can you specify multiple light sources.",transition:!1,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"},multidirectional:{js:"5.5.0",android:"https://github.com/maplibre/maplibre-native/issues/3396",ios:"https://github.com/maplibre/maplibre-native/issues/3396"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,doc:"The altitude of the light source(s) used to generate the hillshading with 0 as sunset and 90 as noon. Only when `hillshade-method` is set to `multidirectional` can you specify multiple light sources.",transition:!1,"sdk-support":{"basic functionality":{js:"5.5.0",android:"https://github.com/maplibre/maplibre-native/issues/3396",ios:"https://github.com/maplibre/maplibre-native/issues/3396"},multidirectional:{js:"5.5.0",android:"https://github.com/maplibre/maplibre-native/issues/3396",ios:"https://github.com/maplibre/maplibre-native/issues/3396"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{doc:"The hillshade illumination is relative to the north direction."},viewport:{doc:"The hillshade illumination is relative to the top of the viewport."}},default:"viewport",doc:"Direction of light source when map is rotated.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",doc:"Intensity of the hillshade",default:.5,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",doc:"The shading color of areas that face away from the light source(s). Only when `hillshade-method` is set to `multidirectional` can you specify multiple light sources.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"},multidirectional:{js:"5.5.0",android:"https://github.com/maplibre/maplibre-native/issues/3396",ios:"https://github.com/maplibre/maplibre-native/issues/3396"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",doc:"The shading color of areas that faces towards the light source(s). Only when `hillshade-method` is set to `multidirectional` can you specify multiple light sources.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"},multidirectional:{js:"5.5.0",android:"https://github.com/maplibre/maplibre-native/issues/3396",ios:"https://github.com/maplibre/maplibre-native/issues/3396"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",doc:"The shading color used to accentuate rugged terrain like sharp cliffs and gorges.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{doc:"The legacy hillshade method."},basic:{doc:"Basic hillshade. Uses a simple physics model where the reflected light intensity is proportional to the cosine of the angle between the incident light and the surface normal. Similar to GDAL's `gdaldem` default algorithm."},combined:{doc:"Hillshade algorithm whose intensity scales with slope. Similar to GDAL's `gdaldem` with `-combined` option."},igor:{doc:"Hillshade algorithm which tries to minimize effects on other map features beneath. Similar to GDAL's `gdaldem` with `-igor` option."},multidirectional:{doc:"Hillshade with multiple illumination directions. Uses the basic hillshade model with multiple independent light sources."}},default:"standard",doc:"The hillshade algorithm to use, one of `standard`, `basic`, `combined`, `igor`, or `multidirectional`. ![image](assets/hillshade_methods.png)","sdk-support":{"basic functionality":{js:"5.5.0",android:"https://github.com/maplibre/maplibre-native/issues/3396",ios:"https://github.com/maplibre/maplibre-native/issues/3396"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},ohe={"background-color":{type:"color",default:"#000000",doc:"The color with which the background will be drawn.",transition:!0,requires:[{"!":"background-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing an image background. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity at which the background will be drawn.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},she={duration:{type:"number",default:300,minimum:0,units:"milliseconds",doc:"Time allotted for transitions to complete."},delay:{type:"number",default:0,minimum:0,units:"milliseconds",doc:"Length of time before a transition begins."}},ahe={"*":{type:"string",doc:"A name of a feature property to use as ID for feature state."}},qr={$version:CAe,$root:_Ae,sources:xAe,source:MAe,source_vector:wAe,source_raster:SAe,source_raster_dem:EAe,source_geojson:BAe,source_video:OAe,source_image:IAe,layer:kAe,layout:TAe,layout_background:RAe,layout_fill:DAe,layout_circle:PAe,layout_heatmap:UAe,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},"property-type":"constant"}},layout_line:KAe,layout_symbol:LAe,layout_raster:FAe,layout_hillshade:zAe,"layout_color-relief":{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{}},"property-type":"constant"}},filter:jAe,filter_operator:NAe,geometry_type:GAe,function:{expression:{type:"expression",doc:"An expression."},stops:{type:"array",doc:"An array of stops.",value:"function_stop"},base:{type:"number",default:1,minimum:0,doc:"The exponential base of the interpolation curve. It controls the rate at which the result increases. Higher values make the result increase more towards the high end of the range. With `1` the stops are interpolated linearly."},property:{type:"string",doc:"The name of a feature property to use as the function input.",default:"$zoom"},type:{type:"enum",values:{identity:{doc:"Return the input value as the output value."},exponential:{doc:"Generate an output by interpolating between stops just less than and just greater than the function input."},interval:{doc:"Return the output value of the stop just less than the function input."},categorical:{doc:"Return the output value of the stop equal to the function input."}},doc:"The interpolation strategy to use in function evaluation.",default:"exponential"},colorSpace:{type:"enum",values:{rgb:{doc:"Use the RGB color space to interpolate color values"},lab:{doc:"Use the LAB color space to interpolate color values."},hcl:{doc:"Use the HCL color space to interpolate color values, interpolating the Hue, Chroma, and Luminance channels individually."}},doc:"The color space in which colors interpolated. Interpolating colors in perceptual color spaces like LAB and HCL tend to produce color ramps that look more consistent and produce colors that can be differentiated more easily than those interpolated in RGB space.",default:"rgb"},default:{type:"*",required:!1,doc:`A value to serve as a fallback function result when a value isn't otherwise available. It is used in the following circumstances:

* In categorical functions, when the feature value does not match any of the stop domain values.

* In property and zoom-and-property functions, when a feature does not contain a value for the specified property.

* In identity functions, when the feature value is not valid for the style property (for example, if the function is being used for a \`circle-color\` property but the feature property value is not a string or not a valid color).

* In interval or exponential property and zoom-and-property functions, when the feature value is not numeric.

If no default is provided, the style property's default is used in these circumstances.`}},function_stop:WAe,expression:QAe,expression_name:YAe,light:qAe,sky:VAe,terrain:$Ae,projection:HAe,paint:ZAe,paint_fill:XAe,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire fill extrusion layer. This is rendered on a per-layer, not per-feature, basis, and data-driven styling is not available.",transition:!0,"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",doc:"The base color of the extruded fill. The extrusion's surfaces will be shaded differently based on this color in combination with the root `light` settings. If this color is specified as `rgba` with an alpha component, the alpha component will be ignored; use `fill-extrusion-opacity` to set layer opacity.",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up (on the flat plane), respectively.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{doc:"The fill extrusion is translated relative to the map."},viewport:{doc:"The fill extrusion is translated relative to the viewport."}},doc:"Controls the frame of reference for `fill-extrusion-translate`.",default:"map",requires:["fill-extrusion-translate"],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing images on extruded fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",doc:"The height with which to extrude this layer.",transition:!0,"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",doc:"The height with which to extrude the base of this layer. Must be less than or equal to `fill-extrusion-height`.",transition:!0,requires:["fill-extrusion-height"],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,doc:"Whether to apply a vertical gradient to the sides of a fill-extrusion layer. If true, sides will be shaded slightly darker farther down.",transition:!1,"sdk-support":{"basic functionality":{js:"0.50.0",ios:"4.7.0",android:"7.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:JAe,paint_circle:ehe,paint_heatmap:the,paint_symbol:nhe,paint_raster:ihe,paint_hillshade:rhe,"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity at which the color-relief will be drawn.",transition:!0,"sdk-support":{"basic functionality":{js:"5.6.0",android:"https://github.com/maplibre/maplibre-native/issues/3408",ios:"https://github.com/maplibre/maplibre-native/issues/3408"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",doc:'Defines the color of each pixel based on its elevation. Should be an expression that uses `["elevation"]` as input.',example:["interpolate",["linear"],["elevation"],0,"black",8849,"white"],transition:!1,"sdk-support":{"basic functionality":{js:"5.6.0",android:"https://github.com/maplibre/maplibre-native/issues/3408",ios:"https://github.com/maplibre/maplibre-native/issues/3408"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:ohe,transition:she,"property-type":{"data-driven":{type:"property-type",doc:"Property is interpolable and can be represented using a property expression."},"cross-faded":{type:"property-type",doc:"Property is non-interpolable; rather, its values will be cross-faded to smoothly transition between integer zooms."},"cross-faded-data-driven":{type:"property-type",doc:"Property is non-interpolable; rather, its values will be cross-faded to smoothly transition between integer zooms. It can be represented using a property expression."},"color-ramp":{type:"property-type",doc:"Property should be specified using a color ramp from which the output color can be sampled based on a property calculation."},"data-constant":{type:"property-type",doc:"Property is interpolable but cannot be represented using a property expression."},constant:{type:"property-type",doc:"Property is constant across all zoom levels and property values."}},promoteId:ahe};var lw={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v5.11.0/LICENSE.txt
 */var lhe=lw.exports,iF;function uhe(){return iF||(iF=1,(function(n,e){(function(t,i){n.exports=i()})(lhe,(function(){var t={},i={};function r(s,a,c){if(i[s]=c,s==="index"){var h="var sharedModule = {}; ("+i.shared+")(sharedModule); ("+i.worker+")(sharedModule);",m={};return i.shared(m),i.index(t,m),typeof window<"u"&&t.setWorkerUrl(window.URL.createObjectURL(new Blob([h],{type:"text/javascript"}))),t}}r("shared",["exports"],(function(s){function a(f,u,d,b){return new(d||(d=Promise))((function(M,k){function R(ee){try{z(b.next(ee))}catch(ne){k(ne)}}function K(ee){try{z(b.throw(ee))}catch(ne){k(ne)}}function z(ee){var ne;ee.done?M(ee.value):(ne=ee.value,ne instanceof d?ne:new d((function(ce){ce(ne)}))).then(R,K)}z((b=b.apply(f,u||[])).next())}))}function c(f,u){this.x=f,this.y=u}function h(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f}var m,v;typeof SuppressedError=="function"&&SuppressedError,c.prototype={clone(){return new c(this.x,this.y)},add(f){return this.clone()._add(f)},sub(f){return this.clone()._sub(f)},multByPoint(f){return this.clone()._multByPoint(f)},divByPoint(f){return this.clone()._divByPoint(f)},mult(f){return this.clone()._mult(f)},div(f){return this.clone()._div(f)},rotate(f){return this.clone()._rotate(f)},rotateAround(f,u){return this.clone()._rotateAround(f,u)},matMult(f){return this.clone()._matMult(f)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(f){return this.x===f.x&&this.y===f.y},dist(f){return Math.sqrt(this.distSqr(f))},distSqr(f){const u=f.x-this.x,d=f.y-this.y;return u*u+d*d},angle(){return Math.atan2(this.y,this.x)},angleTo(f){return Math.atan2(this.y-f.y,this.x-f.x)},angleWith(f){return this.angleWithSep(f.x,f.y)},angleWithSep(f,u){return Math.atan2(this.x*u-this.y*f,this.x*f+this.y*u)},_matMult(f){const u=f[2]*this.x+f[3]*this.y;return this.x=f[0]*this.x+f[1]*this.y,this.y=u,this},_add(f){return this.x+=f.x,this.y+=f.y,this},_sub(f){return this.x-=f.x,this.y-=f.y,this},_mult(f){return this.x*=f,this.y*=f,this},_div(f){return this.x/=f,this.y/=f,this},_multByPoint(f){return this.x*=f.x,this.y*=f.y,this},_divByPoint(f){return this.x/=f.x,this.y/=f.y,this},_unit(){return this._div(this.mag()),this},_perp(){const f=this.y;return this.y=this.x,this.x=-f,this},_rotate(f){const u=Math.cos(f),d=Math.sin(f),b=d*this.x+u*this.y;return this.x=u*this.x-d*this.y,this.y=b,this},_rotateAround(f,u){const d=Math.cos(f),b=Math.sin(f),M=u.y+b*(this.x-u.x)+d*(this.y-u.y);return this.x=u.x+d*(this.x-u.x)-b*(this.y-u.y),this.y=M,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:c},c.convert=function(f){if(f instanceof c)return f;if(Array.isArray(f))return new c(+f[0],+f[1]);if(f.x!==void 0&&f.y!==void 0)return new c(+f.x,+f.y);throw new Error("Expected [x, y] or {x, y} point format")};var x=(function(){if(v)return m;function f(u,d,b,M){this.cx=3*u,this.bx=3*(b-u)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*d,this.by=3*(M-d)-this.cy,this.ay=1-this.cy-this.by,this.p1x=u,this.p1y=d,this.p2x=b,this.p2y=M}return v=1,m=f,f.prototype={sampleCurveX:function(u){return((this.ax*u+this.bx)*u+this.cx)*u},sampleCurveY:function(u){return((this.ay*u+this.by)*u+this.cy)*u},sampleCurveDerivativeX:function(u){return(3*this.ax*u+2*this.bx)*u+this.cx},solveCurveX:function(u,d){if(d===void 0&&(d=1e-6),u<0)return 0;if(u>1)return 1;for(var b=u,M=0;M<8;M++){var k=this.sampleCurveX(b)-u;if(Math.abs(k)<d)return b;var R=this.sampleCurveDerivativeX(b);if(Math.abs(R)<1e-6)break;b-=k/R}var K=0,z=1;for(b=u,M=0;M<20&&(k=this.sampleCurveX(b),!(Math.abs(k-u)<d));M++)u>k?K=b:z=b,b=.5*(z-K)+K;return b},solve:function(u,d){return this.sampleCurveY(this.solveCurveX(u,d))}},m})(),E=h(x);let D,P;function F(){return D==null&&(D=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),D}function W(){if(P==null&&(P=!1,F())){const u=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(u){for(let b=0;b<25;b++){const M=4*b;u.fillStyle=`rgb(${M},${M+1},${M+2})`,u.fillRect(b%5,Math.floor(b/5),1,1)}const d=u.getImageData(0,0,5,5).data;for(let b=0;b<100;b++)if(b%4!=3&&d[b]!==b){P=!0;break}}}return P||!1}var q=1e-6,V=typeof Float32Array<"u"?Float32Array:Array;function H(){var f=new V(9);return V!=Float32Array&&(f[1]=0,f[2]=0,f[3]=0,f[5]=0,f[6]=0,f[7]=0),f[0]=1,f[4]=1,f[8]=1,f}function X(f){return f[0]=1,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=1,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=1,f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f}function Z(){var f=new V(3);return V!=Float32Array&&(f[0]=0,f[1]=0,f[2]=0),f}function G(f){var u=f[0],d=f[1],b=f[2];return Math.sqrt(u*u+d*d+b*b)}function oe(f,u,d){var b=new V(3);return b[0]=f,b[1]=u,b[2]=d,b}function ue(f,u,d){return f[0]=u[0]+d[0],f[1]=u[1]+d[1],f[2]=u[2]+d[2],f}function xe(f,u,d){return f[0]=u[0]*d,f[1]=u[1]*d,f[2]=u[2]*d,f}function me(f,u,d){var b=u[0],M=u[1],k=u[2],R=d[0],K=d[1],z=d[2];return f[0]=M*z-k*K,f[1]=k*R-b*z,f[2]=b*K-M*R,f}var Ie,Me=G;function Te(f,u,d){var b=u[0],M=u[1],k=u[2],R=u[3];return f[0]=d[0]*b+d[4]*M+d[8]*k+d[12]*R,f[1]=d[1]*b+d[5]*M+d[9]*k+d[13]*R,f[2]=d[2]*b+d[6]*M+d[10]*k+d[14]*R,f[3]=d[3]*b+d[7]*M+d[11]*k+d[15]*R,f}function je(){var f=new V(4);return V!=Float32Array&&(f[0]=0,f[1]=0,f[2]=0),f[3]=1,f}function Ee(f,u,d,b){var M=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"zyx",k=Math.PI/360;u*=k,b*=k,d*=k;var R=Math.sin(u),K=Math.cos(u),z=Math.sin(d),ee=Math.cos(d),ne=Math.sin(b),ce=Math.cos(b);switch(M){case"xyz":f[0]=R*ee*ce+K*z*ne,f[1]=K*z*ce-R*ee*ne,f[2]=K*ee*ne+R*z*ce,f[3]=K*ee*ce-R*z*ne;break;case"xzy":f[0]=R*ee*ce-K*z*ne,f[1]=K*z*ce-R*ee*ne,f[2]=K*ee*ne+R*z*ce,f[3]=K*ee*ce+R*z*ne;break;case"yxz":f[0]=R*ee*ce+K*z*ne,f[1]=K*z*ce-R*ee*ne,f[2]=K*ee*ne-R*z*ce,f[3]=K*ee*ce+R*z*ne;break;case"yzx":f[0]=R*ee*ce+K*z*ne,f[1]=K*z*ce+R*ee*ne,f[2]=K*ee*ne-R*z*ce,f[3]=K*ee*ce-R*z*ne;break;case"zxy":f[0]=R*ee*ce-K*z*ne,f[1]=K*z*ce+R*ee*ne,f[2]=K*ee*ne+R*z*ce,f[3]=K*ee*ce-R*z*ne;break;case"zyx":f[0]=R*ee*ce-K*z*ne,f[1]=K*z*ce+R*ee*ne,f[2]=K*ee*ne-R*z*ce,f[3]=K*ee*ce+R*z*ne;break;default:throw new Error("Unknown angle order "+M)}return f}function qe(){var f=new V(2);return V!=Float32Array&&(f[0]=0,f[1]=0),f}function At(f,u){var d=new V(2);return d[0]=f,d[1]=u,d}Z(),Ie=new V(4),V!=Float32Array&&(Ie[0]=0,Ie[1]=0,Ie[2]=0,Ie[3]=0),Z(),oe(1,0,0),oe(0,1,0),je(),je(),H(),qe();const gt=8192;function Le(f,u,d){return u*(gt/(f.tileSize*Math.pow(2,d-f.tileID.overscaledZ)))}function Re(f,u){return(f%u+u)%u}function Ge(f,u,d){return f*(1-d)+u*d}function De(f){if(f<=0)return 0;if(f>=1)return 1;const u=f*f,d=u*f;return 4*(f<.5?d:3*(f-u)+d-.75)}function _t(f,u,d,b){const M=new E(f,u,d,b);return k=>M.solve(k)}const at=_t(.25,.1,.25,1);function Tt(f,u,d){return Math.min(d,Math.max(u,f))}function Kt(f,u,d){const b=d-u,M=((f-u)%b+b)%b+u;return M===u?d:M}function Ke(f,...u){for(const d of u)for(const b in d)f[b]=d[b];return f}let Oe=1;function Be(f,u,d){const b={};for(const M in f)b[M]=u.call(this,f[M],M,f);return b}function Ve(f,u,d){const b={};for(const M in f)u.call(this,f[M],M,f)&&(b[M]=f[M]);return b}function yt(f){return Array.isArray(f)?f.map(yt):typeof f=="object"&&f?Be(f,yt):f}const ft={};function Ct(f){ft[f]||(typeof console<"u"&&console.warn(f),ft[f]=!0)}function Lt(f,u,d){return(d.y-f.y)*(u.x-f.x)>(u.y-f.y)*(d.x-f.x)}function kt(f){return typeof WorkerGlobalScope<"u"&&f!==void 0&&f instanceof WorkerGlobalScope}let an=null;function Hn(f){if(an==null){const u=f.navigator?f.navigator.userAgent:null;an=!!f.safari||!(!u||!(/\b(iPad|iPhone|iPod)\b/.test(u)||u.match("Safari")&&!u.match("Chrome")))}return an}function Wn(f){return typeof ImageBitmap<"u"&&f instanceof ImageBitmap}const _i="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Ln(f,u,d,b,M){return a(this,void 0,void 0,(function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const k=new VideoFrame(f,{timestamp:0});try{const R=k?.format;if(!R||!R.startsWith("BGR")&&!R.startsWith("RGB"))throw new Error(`Unrecognized format ${R}`);const K=R.startsWith("BGR"),z=new Uint8ClampedArray(b*M*4);if(yield k.copyTo(z,(function(ee,ne,ce,_e,Se){const ke=4*Math.max(-ne,0),ze=(Math.max(0,ce)-ce)*_e*4+ke,$e=4*_e,it=Math.max(0,ne),Et=Math.max(0,ce);return{rect:{x:it,y:Et,width:Math.min(ee.width,ne+_e)-it,height:Math.min(ee.height,ce+Se)-Et},layout:[{offset:ze,stride:$e}]}})(f,u,d,b,M)),K)for(let ee=0;ee<z.length;ee+=4){const ne=z[ee];z[ee]=z[ee+2],z[ee+2]=ne}return z}finally{k.close()}}))}let Un,xn;function Zn(f,u,d,b){return f.addEventListener(u,d,b),{unsubscribe:()=>{f.removeEventListener(u,d,b)}}}function Rn(f){return f*Math.PI/180}function Ot(f){return f/Math.PI*180}const be={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},ie={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},le="AbortError";function de(){return new Error(le)}const se={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function Ae(f){return se.REGISTERED_PROTOCOLS[f.substring(0,f.indexOf("://"))]}const ve="global-dispatcher";class We extends Error{constructor(u,d,b,M){super(`AJAXError: ${d} (${u}): ${b}`),this.status=u,this.statusText=d,this.url=b,this.body=M}}const tt=()=>kt(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,Pe=function(f,u){if(/:\/\//.test(f.url)&&!/^https?:|^file:/.test(f.url)){const b=Ae(f.url);if(b)return b(f,u);if(kt(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:f,targetMapId:ve},u)}if(!(/^file:/.test(d=f.url)||/^file:/.test(tt())&&!/^\w+:/.test(d))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return(function(b,M){return a(this,void 0,void 0,(function*(){const k=new Request(b.url,{method:b.method||"GET",body:b.body,credentials:b.credentials,headers:b.headers,cache:b.cache,referrer:tt(),signal:M.signal});let R,K;b.type!=="json"||k.headers.has("Accept")||k.headers.set("Accept","application/json");try{R=yield fetch(k)}catch(ee){throw new We(0,ee.message,b.url,new Blob)}if(!R.ok){const ee=yield R.blob();throw new We(R.status,R.statusText,b.url,ee)}K=b.type==="arrayBuffer"||b.type==="image"?R.arrayBuffer():b.type==="json"?R.json():R.text();const z=yield K;if(M.signal.aborted)throw de();return{data:z,cacheControl:R.headers.get("Cache-Control"),expires:R.headers.get("Expires")}}))})(f,u);if(kt(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:f,mustQueue:!0,targetMapId:ve},u)}var d;return(function(b,M){return new Promise(((k,R)=>{var K;const z=new XMLHttpRequest;z.open(b.method||"GET",b.url,!0),b.type!=="arrayBuffer"&&b.type!=="image"||(z.responseType="arraybuffer");for(const ee in b.headers)z.setRequestHeader(ee,b.headers[ee]);b.type==="json"&&(z.responseType="text",!((K=b.headers)===null||K===void 0)&&K.Accept||z.setRequestHeader("Accept","application/json")),z.withCredentials=b.credentials==="include",z.onerror=()=>{R(new Error(z.statusText))},z.onload=()=>{if(!M.signal.aborted)if((z.status>=200&&z.status<300||z.status===0)&&z.response!==null){let ee=z.response;if(b.type==="json")try{ee=JSON.parse(z.response)}catch(ne){return void R(ne)}k({data:ee,cacheControl:z.getResponseHeader("Cache-Control"),expires:z.getResponseHeader("Expires")})}else{const ee=new Blob([z.response],{type:z.getResponseHeader("Content-Type")});R(new We(z.status,z.statusText,b.url,ee))}},M.signal.addEventListener("abort",(()=>{z.abort(),R(de())})),z.send(b.body)}))})(f,u)};function Xe(f){if(!f||f.indexOf("://")<=0||f.indexOf("data:image/")===0||f.indexOf("blob:")===0)return!0;const u=new URL(f),d=window.location;return u.protocol===d.protocol&&u.host===d.host}function y(f,u,d){d[f]&&d[f].indexOf(u)!==-1||(d[f]=d[f]||[],d[f].push(u))}function ot(f,u,d){if(d&&d[f]){const b=d[f].indexOf(u);b!==-1&&d[f].splice(b,1)}}class Dt{constructor(u,d={}){Ke(this,d),this.type=u}}class xt extends Dt{constructor(u,d={}){super("error",Ke({error:u},d))}}class tn{on(u,d){return this._listeners=this._listeners||{},y(u,d,this._listeners),{unsubscribe:()=>{this.off(u,d)}}}off(u,d){return ot(u,d,this._listeners),ot(u,d,this._oneTimeListeners),this}once(u,d){return d?(this._oneTimeListeners=this._oneTimeListeners||{},y(u,d,this._oneTimeListeners),this):new Promise((b=>this.once(u,b)))}fire(u,d){typeof u=="string"&&(u=new Dt(u,d||{}));const b=u.type;if(this.listens(b)){u.target=this;const M=this._listeners&&this._listeners[b]?this._listeners[b].slice():[];for(const K of M)K.call(this,u);const k=this._oneTimeListeners&&this._oneTimeListeners[b]?this._oneTimeListeners[b].slice():[];for(const K of k)ot(b,K,this._oneTimeListeners),K.call(this,u);const R=this._eventedParent;R&&(Ke(u,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),R.fire(u))}else u instanceof xt&&console.error(u.error);return this}listens(u){return this._listeners&&this._listeners[u]&&this._listeners[u].length>0||this._oneTimeListeners&&this._oneTimeListeners[u]&&this._oneTimeListeners[u].length>0||this._eventedParent&&this._eventedParent.listens(u)}setEventedParent(u,d){return this._eventedParent=u,this._eventedParentData=d,this}}var dt={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},"font-faces":{type:"array",value:"fontFaces"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},encoding:{type:"enum",values:{mvt:{},mlt:{}},default:"mvt"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const Xn=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function yi(f,u){const d={};for(const b in f)b!=="ref"&&(d[b]=f[b]);return Xn.forEach((b=>{b in u&&(d[b]=u[b])})),d}function Dn(f,u){if(Array.isArray(f)){if(!Array.isArray(u)||f.length!==u.length)return!1;for(let d=0;d<f.length;d++)if(!Dn(f[d],u[d]))return!1;return!0}if(typeof f=="object"&&f!==null&&u!==null){if(typeof u!="object"||Object.keys(f).length!==Object.keys(u).length)return!1;for(const d in f)if(!Dn(f[d],u[d]))return!1;return!0}return f===u}function Fn(f,u){f.push(u)}function vi(f,u,d){Fn(d,{command:"addSource",args:[f,u[f]]})}function Zi(f,u,d){Fn(u,{command:"removeSource",args:[f]}),d[f]=!0}function Ki(f,u,d,b){Zi(f,d,b),vi(f,u,d)}function Ji(f,u,d){let b;for(b in f[d])if(Object.prototype.hasOwnProperty.call(f[d],b)&&b!=="data"&&!Dn(f[d][b],u[d][b]))return!1;for(b in u[d])if(Object.prototype.hasOwnProperty.call(u[d],b)&&b!=="data"&&!Dn(f[d][b],u[d][b]))return!1;return!0}function ki(f,u,d,b,M,k){f=f||{},u=u||{};for(const R in f)Object.prototype.hasOwnProperty.call(f,R)&&(Dn(f[R],u[R])||d.push({command:k,args:[b,R,u[R],M]}));for(const R in u)Object.prototype.hasOwnProperty.call(u,R)&&!Object.prototype.hasOwnProperty.call(f,R)&&(Dn(f[R],u[R])||d.push({command:k,args:[b,R,u[R],M]}))}function Ri(f){return f.id}function pr(f,u){return f[u.id]=u,f}class rn{constructor(u,d,b,M){this.message=(u?`${u}: `:"")+b,M&&(this.identifier=M),d!=null&&d.__line__&&(this.line=d.__line__)}}function Li(f,...u){for(const d of u)for(const b in d)f[b]=d[b];return f}class $o extends Error{constructor(u,d){super(d),this.message=d,this.key=u}}class Ws{constructor(u,d=[]){this.parent=u,this.bindings={};for(const[b,M]of d)this.bindings[b]=M}concat(u){return new Ws(this,u)}get(u){if(this.bindings[u])return this.bindings[u];if(this.parent)return this.parent.get(u);throw new Error(`${u} not found in scope.`)}has(u){return!!this.bindings[u]||!!this.parent&&this.parent.has(u)}}const Ur={kind:"null"},pn={kind:"number"},zi={kind:"string"},oi={kind:"boolean"},wl={kind:"color"},nA={kind:"projectionDefinition"},nu={kind:"object"},qi={kind:"value"},tc={kind:"collator"},no={kind:"formatted"},Ls={kind:"padding"},rl={kind:"colorArray"},Ya={kind:"numberArray"},Io={kind:"resolvedImage"},iA={kind:"variableAnchorOffsetCollection"};function Uo(f,u){return{kind:"array",itemType:f,N:u}}function Lr(f){if(f.kind==="array"){const u=Lr(f.itemType);return typeof f.N=="number"?`array<${u}, ${f.N}>`:f.itemType.kind==="value"?"array":`array<${u}>`}return f.kind}const fa=[Ur,pn,zi,oi,wl,nA,no,nu,Uo(qi),Ls,Ya,rl,Io,iA];function Ho(f,u){if(u.kind==="error")return null;if(f.kind==="array"){if(u.kind==="array"&&(u.N===0&&u.itemType.kind==="value"||!Ho(f.itemType,u.itemType))&&(typeof f.N!="number"||f.N===u.N))return null}else{if(f.kind===u.kind)return null;if(f.kind==="value"){for(const d of fa)if(!Ho(d,u))return null}}return`Expected ${Lr(f)} but found ${Lr(u)} instead.`}function Ko(f,u){return u.some((d=>d.kind===f.kind))}function Iu(f,u){return u.some((d=>d==="null"?f===null:d==="array"?Array.isArray(f):d==="object"?f&&!Array.isArray(f)&&typeof f=="object":d===typeof f))}function iu(f,u){return f.kind==="array"&&u.kind==="array"?f.itemType.kind===u.itemType.kind&&typeof f.N=="number":f.kind===u.kind}const ru=.96422,nc=.82521,Sl=4/29,ko=6/29,ku=3*ko*ko,ou=ko*ko*ko,ic=Math.PI/180,rc=180/Math.PI;function kc(f){return(f%=360)<0&&(f+=360),f}function Lh([f,u,d,b]){let M,k;const R=Tc((.2225045*(f=pa(f))+.7168786*(u=pa(u))+.0606169*(d=pa(d)))/1);f===u&&u===d?M=k=R:(M=Tc((.4360747*f+.3850649*u+.1430804*d)/ru),k=Tc((.0139322*f+.0971045*u+.7141733*d)/nc));const K=116*R-16;return[K<0?0:K,500*(M-R),200*(R-k),b]}function pa(f){return f<=.04045?f/12.92:Math.pow((f+.055)/1.055,2.4)}function Tc(f){return f>ou?Math.pow(f,1/3):f/ku+Sl}function Tu([f,u,d,b]){let M=(f+16)/116,k=isNaN(u)?M:M+u/500,R=isNaN(d)?M:M-d/200;return M=1*Ll(M),k=ru*Ll(k),R=nc*Ll(R),[rA(3.1338561*k-1.6168667*M-.4906146*R),rA(-.9787684*k+1.9161415*M+.033454*R),rA(.0719453*k-.2289914*M+1.4052427*R),b]}function rA(f){return(f=f<=.00304?12.92*f:1.055*Math.pow(f,1/2.4)-.055)<0?0:f>1?1:f}function Ll(f){return f>ko?f*f*f:ku*(f-Sl)}const qa=Object.hasOwn||function(f,u){return Object.prototype.hasOwnProperty.call(f,u)};function Ss(f,u){return qa(f,u)?f[u]:void 0}function Mo(f){return parseInt(f.padEnd(2,f),16)/255}function Va(f,u){return Ru(u?f/100:f,0,1)}function Ru(f,u,d){return Math.min(Math.max(u,f),d)}function Qs(f){return!f.some(Number.isNaN)}const _A={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function Fl(f,u,d){return f+d*(u-f)}function Du(f,u,d){return f.map(((b,M)=>Fl(b,u[M],d)))}class Fi{constructor(u,d,b,M=1,k=!0){this.r=u,this.g=d,this.b=b,this.a=M,k||(this.r*=M,this.g*=M,this.b*=M,M||this.overwriteGetter("rgb",[u,d,b,M]))}static parse(u){if(u instanceof Fi)return u;if(typeof u!="string")return;const d=(function(b){if((b=b.toLowerCase().trim())==="transparent")return[0,0,0,0];const M=Ss(_A,b);if(M){const[R,K,z]=M;return[R/255,K/255,z/255,1]}if(b.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(b)){const R=b.length<6?1:2;let K=1;return[Mo(b.slice(K,K+=R)),Mo(b.slice(K,K+=R)),Mo(b.slice(K,K+=R)),Mo(b.slice(K,K+R)||"ff")]}if(b.startsWith("rgb")){const R=b.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(R){const[K,z,ee,ne,ce,_e,Se,ke,ze,$e,it,Et]=R,ut=[ne||" ",Se||" ",$e].join("");if(ut==="  "||ut==="  /"||ut===",,"||ut===",,,"){const pt=[ee,_e,ze].join(""),Gt=pt==="%%%"?100:pt===""?255:0;if(Gt){const Jt=[Ru(+z/Gt,0,1),Ru(+ce/Gt,0,1),Ru(+ke/Gt,0,1),it?Va(+it,Et):1];if(Qs(Jt))return Jt}}return}}const k=b.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(k){const[R,K,z,ee,ne,ce,_e,Se,ke]=k,ze=[z||" ",ne||" ",_e].join("");if(ze==="  "||ze==="  /"||ze===",,"||ze===",,,"){const $e=[+K,Ru(+ee,0,100),Ru(+ce,0,100),Se?Va(+Se,ke):1];if(Qs($e))return(function([it,Et,ut,pt]){function Gt(Jt){const mn=(Jt+it/30)%12,Nn=Et*Math.min(ut,1-ut);return ut-Nn*Math.max(-1,Math.min(mn-3,9-mn,1))}return it=kc(it),Et/=100,ut/=100,[Gt(0),Gt(8),Gt(4),pt]})($e)}}})(u);return d?new Fi(...d,!1):void 0}get rgb(){const{r:u,g:d,b,a:M}=this,k=M||1/0;return this.overwriteGetter("rgb",[u/k,d/k,b/k,M])}get hcl(){return this.overwriteGetter("hcl",(function(u){const[d,b,M,k]=Lh(u),R=Math.sqrt(b*b+M*M);return[Math.round(1e4*R)?kc(Math.atan2(M,b)*rc):NaN,R,d,k]})(this.rgb))}get lab(){return this.overwriteGetter("lab",Lh(this.rgb))}overwriteGetter(u,d){return Object.defineProperty(this,u,{value:d}),d}toString(){const[u,d,b,M]=this.rgb;return`rgba(${[u,d,b].map((k=>Math.round(255*k))).join(",")},${M})`}static interpolate(u,d,b,M="rgb"){switch(M){case"rgb":{const[k,R,K,z]=Du(u.rgb,d.rgb,b);return new Fi(k,R,K,z,!1)}case"hcl":{const[k,R,K,z]=u.hcl,[ee,ne,ce,_e]=d.hcl;let Se,ke;if(isNaN(k)||isNaN(ee))isNaN(k)?isNaN(ee)?Se=NaN:(Se=ee,K!==1&&K!==0||(ke=ne)):(Se=k,ce!==1&&ce!==0||(ke=R));else{let ut=ee-k;ee>k&&ut>180?ut-=360:ee<k&&k-ee>180&&(ut+=360),Se=k+b*ut}const[ze,$e,it,Et]=(function([ut,pt,Gt,Jt]){return ut=isNaN(ut)?0:ut*ic,Tu([Gt,Math.cos(ut)*pt,Math.sin(ut)*pt,Jt])})([Se,ke??Fl(R,ne,b),Fl(K,ce,b),Fl(z,_e,b)]);return new Fi(ze,$e,it,Et,!1)}case"lab":{const[k,R,K,z]=Tu(Du(u.lab,d.lab,b));return new Fi(k,R,K,z,!1)}}}}Fi.black=new Fi(0,0,0,1),Fi.white=new Fi(1,1,1,1),Fi.transparent=new Fi(0,0,0,0),Fi.red=new Fi(1,0,0,1);class Vi{constructor(u,d,b){this.sensitivity=u?d?"variant":"case":d?"accent":"base",this.locale=b,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(u,d){return this.collator.compare(u,d)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const Co=["bottom","center","top"];class Ia{constructor(u,d,b,M,k,R){this.text=u,this.image=d,this.scale=b,this.fontStack=M,this.textColor=k,this.verticalAlign=R}}class is{constructor(u){this.sections=u}static fromString(u){return new is([new Ia(u,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some((u=>u.text.length!==0||u.image&&u.image.name.length!==0))}static factory(u){return u instanceof is?u:is.fromString(u)}toString(){return this.sections.length===0?"":this.sections.map((u=>u.text)).join("")}}class go{constructor(u){this.values=u.slice()}static parse(u){if(u instanceof go)return u;if(typeof u=="number")return new go([u,u,u,u]);if(Array.isArray(u)&&!(u.length<1||u.length>4)){for(const d of u)if(typeof d!="number")return;switch(u.length){case 1:u=[u[0],u[0],u[0],u[0]];break;case 2:u=[u[0],u[1],u[0],u[1]];break;case 3:u=[u[0],u[1],u[2],u[1]]}return new go(u)}}toString(){return JSON.stringify(this.values)}static interpolate(u,d,b){return new go(Du(u.values,d.values,b))}}class ms{constructor(u){this.values=u.slice()}static parse(u){if(u instanceof ms)return u;if(typeof u=="number")return new ms([u]);if(Array.isArray(u)){for(const d of u)if(typeof d!="number")return;return new ms(u)}}toString(){return JSON.stringify(this.values)}static interpolate(u,d,b){return new ms(Du(u.values,d.values,b))}}class uo{constructor(u){this.values=u.slice()}static parse(u){if(u instanceof uo)return u;if(typeof u=="string"){const b=Fi.parse(u);return b?new uo([b]):void 0}if(!Array.isArray(u))return;const d=[];for(const b of u){if(typeof b!="string")return;const M=Fi.parse(b);if(!M)return;d.push(M)}return new uo(d)}toString(){return JSON.stringify(this.values)}static interpolate(u,d,b,M="rgb"){const k=[];if(u.values.length!=d.values.length)throw new Error(`colorArray: Arrays have mismatched length (${u.values.length} vs. ${d.values.length}), cannot interpolate.`);for(let R=0;R<u.values.length;R++)k.push(Fi.interpolate(u.values[R],d.values[R],b,M));return new uo(k)}}class yo extends Error{constructor(u){super(u),this.name="RuntimeError"}toJSON(){return this.message}}const zl=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class vo{constructor(u){this.values=u.slice()}static parse(u){if(u instanceof vo)return u;if(Array.isArray(u)&&!(u.length<1)&&u.length%2==0){for(let d=0;d<u.length;d+=2){const b=u[d],M=u[d+1];if(typeof b!="string"||!zl.has(b)||!Array.isArray(M)||M.length!==2||typeof M[0]!="number"||typeof M[1]!="number")return}return new vo(u)}}toString(){return JSON.stringify(this.values)}static interpolate(u,d,b){const M=u.values,k=d.values;if(M.length!==k.length)throw new yo(`Cannot interpolate values of different length. from: ${u.toString()}, to: ${d.toString()}`);const R=[];for(let K=0;K<M.length;K+=2){if(M[K]!==k[K])throw new yo(`Cannot interpolate values containing mismatched anchors. from[${K}]: ${M[K]}, to[${K}]: ${k[K]}`);R.push(M[K]);const[z,ee]=M[K+1],[ne,ce]=k[K+1];R.push([Fl(z,ne,b),Fl(ee,ce,b)])}return new vo(R)}}class Es{constructor(u){this.name=u.name,this.available=u.available}toString(){return this.name}static fromString(u){return u?new Es({name:u,available:!1}):null}}class co{constructor(u,d,b){this.from=u,this.to=d,this.transition=b}static interpolate(u,d,b){return new co(u,d,b)}static parse(u){return u instanceof co?u:Array.isArray(u)&&u.length===3&&typeof u[0]=="string"&&typeof u[1]=="string"&&typeof u[2]=="number"?new co(u[0],u[1],u[2]):typeof u=="object"&&typeof u.from=="string"&&typeof u.to=="string"&&typeof u.transition=="number"?new co(u.from,u.to,u.transition):typeof u=="string"?new co(u,u,1):void 0}}function ka(f,u,d,b){return typeof f=="number"&&f>=0&&f<=255&&typeof u=="number"&&u>=0&&u<=255&&typeof d=="number"&&d>=0&&d<=255?b===void 0||typeof b=="number"&&b>=0&&b<=1?null:`Invalid rgba value [${[f,u,d,b].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof b=="number"?[f,u,d,b]:[f,u,d]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Ta(f){if(f===null||typeof f=="string"||typeof f=="boolean"||typeof f=="number"||f instanceof co||f instanceof Fi||f instanceof Vi||f instanceof is||f instanceof go||f instanceof ms||f instanceof uo||f instanceof vo||f instanceof Es)return!0;if(Array.isArray(f)){for(const u of f)if(!Ta(u))return!1;return!0}if(typeof f=="object"){for(const u in f)if(!Ta(f[u]))return!1;return!0}return!1}function Ni(f){if(f===null)return Ur;if(typeof f=="string")return zi;if(typeof f=="boolean")return oi;if(typeof f=="number")return pn;if(f instanceof Fi)return wl;if(f instanceof co)return nA;if(f instanceof Vi)return tc;if(f instanceof is)return no;if(f instanceof go)return Ls;if(f instanceof ms)return Ya;if(f instanceof uo)return rl;if(f instanceof vo)return iA;if(f instanceof Es)return Io;if(Array.isArray(f)){const u=f.length;let d;for(const b of f){const M=Ni(b);if(d){if(d===M)continue;d=qi;break}d=M}return Uo(d||qi,u)}return nu}function Fr(f){const u=typeof f;return f===null?"":u==="string"||u==="number"||u==="boolean"?String(f):f instanceof Fi||f instanceof co||f instanceof is||f instanceof go||f instanceof ms||f instanceof uo||f instanceof vo||f instanceof Es?f.toString():JSON.stringify(f)}class J{constructor(u,d){this.type=u,this.value=d}static parse(u,d){if(u.length!==2)return d.error(`'literal' expression requires exactly one argument, but found ${u.length-1} instead.`);if(!Ta(u[1]))return d.error("invalid value");const b=u[1];let M=Ni(b);const k=d.expectedType;return M.kind!=="array"||M.N!==0||!k||k.kind!=="array"||typeof k.N=="number"&&k.N!==0||(M=k),new J(M,b)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const ye={string:zi,number:pn,boolean:oi,object:nu};class Ne{constructor(u,d){this.type=u,this.args=d}static parse(u,d){if(u.length<2)return d.error("Expected at least one argument.");let b,M=1;const k=u[0];if(k==="array"){let K,z;if(u.length>2){const ee=u[1];if(typeof ee!="string"||!(ee in ye)||ee==="object")return d.error('The item type argument of "array" must be one of string, number, boolean',1);K=ye[ee],M++}else K=qi;if(u.length>3){if(u[2]!==null&&(typeof u[2]!="number"||u[2]<0||u[2]!==Math.floor(u[2])))return d.error('The length argument to "array" must be a positive integer literal',2);z=u[2],M++}b=Uo(K,z)}else{if(!ye[k])throw new Error(`Types doesn't contain name = ${k}`);b=ye[k]}const R=[];for(;M<u.length;M++){const K=d.parse(u[M],M,qi);if(!K)return null;R.push(K)}return new Ne(b,R)}evaluate(u){for(let d=0;d<this.args.length;d++){const b=this.args[d].evaluate(u);if(!Ho(this.type,Ni(b)))return b;if(d===this.args.length-1)throw new yo(`Expected value to be of type ${Lr(this.type)}, but found ${Lr(Ni(b))} instead.`)}throw new Error}eachChild(u){this.args.forEach(u)}outputDefined(){return this.args.every((u=>u.outputDefined()))}}const St={"to-boolean":oi,"to-color":wl,"to-number":pn,"to-string":zi};class fn{constructor(u,d){this.type=u,this.args=d}static parse(u,d){if(u.length<2)return d.error("Expected at least one argument.");const b=u[0];if(!St[b])throw new Error(`Can't parse ${b} as it is not part of the known types`);if((b==="to-boolean"||b==="to-string")&&u.length!==2)return d.error("Expected one argument.");const M=St[b],k=[];for(let R=1;R<u.length;R++){const K=d.parse(u[R],R,qi);if(!K)return null;k.push(K)}return new fn(M,k)}evaluate(u){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(u);case"color":{let d,b;for(const M of this.args){if(d=M.evaluate(u),b=null,d instanceof Fi)return d;if(typeof d=="string"){const k=u.parseColor(d);if(k)return k}else if(Array.isArray(d)&&(b=d.length<3||d.length>4?`Invalid rgba value ${JSON.stringify(d)}: expected an array containing either three or four numeric values.`:ka(d[0],d[1],d[2],d[3]),!b))return new Fi(d[0]/255,d[1]/255,d[2]/255,d[3])}throw new yo(b||`Could not parse color from value '${typeof d=="string"?d:JSON.stringify(d)}'`)}case"padding":{let d;for(const b of this.args){d=b.evaluate(u);const M=go.parse(d);if(M)return M}throw new yo(`Could not parse padding from value '${typeof d=="string"?d:JSON.stringify(d)}'`)}case"numberArray":{let d;for(const b of this.args){d=b.evaluate(u);const M=ms.parse(d);if(M)return M}throw new yo(`Could not parse numberArray from value '${typeof d=="string"?d:JSON.stringify(d)}'`)}case"colorArray":{let d;for(const b of this.args){d=b.evaluate(u);const M=uo.parse(d);if(M)return M}throw new yo(`Could not parse colorArray from value '${typeof d=="string"?d:JSON.stringify(d)}'`)}case"variableAnchorOffsetCollection":{let d;for(const b of this.args){d=b.evaluate(u);const M=vo.parse(d);if(M)return M}throw new yo(`Could not parse variableAnchorOffsetCollection from value '${typeof d=="string"?d:JSON.stringify(d)}'`)}case"number":{let d=null;for(const b of this.args){if(d=b.evaluate(u),d===null)return 0;const M=Number(d);if(!isNaN(M))return M}throw new yo(`Could not convert ${JSON.stringify(d)} to number.`)}case"formatted":return is.fromString(Fr(this.args[0].evaluate(u)));case"resolvedImage":return Es.fromString(Fr(this.args[0].evaluate(u)));case"projectionDefinition":return this.args[0].evaluate(u);default:return Fr(this.args[0].evaluate(u))}}eachChild(u){this.args.forEach(u)}outputDefined(){return this.args.every((u=>u.outputDefined()))}}const nn=["Unknown","Point","LineString","Polygon"];class xi{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?nn[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(u){let d=this._parseColorCache.get(u);return d||(d=Fi.parse(u),this._parseColorCache.set(u,d)),d}}class Gn{constructor(u,d,b=[],M,k=new Ws,R=[]){this.registry=u,this.path=b,this.key=b.map((K=>`[${K}]`)).join(""),this.scope=k,this.errors=R,this.expectedType=M,this._isConstant=d}parse(u,d,b,M,k={}){return d?this.concat(d,b,M)._parse(u,k):this._parse(u,k)}_parse(u,d){function b(M,k,R){return R==="assert"?new Ne(k,[M]):R==="coerce"?new fn(k,[M]):M}if(u!==null&&typeof u!="string"&&typeof u!="boolean"&&typeof u!="number"||(u=["literal",u]),Array.isArray(u)){if(u.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const M=u[0];if(typeof M!="string")return this.error(`Expression name must be a string, but found ${typeof M} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const k=this.registry[M];if(k){let R=k.parse(u,this);if(!R)return null;if(this.expectedType){const K=this.expectedType,z=R.type;if(K.kind!=="string"&&K.kind!=="number"&&K.kind!=="boolean"&&K.kind!=="object"&&K.kind!=="array"||z.kind!=="value"){if(K.kind==="projectionDefinition"&&["string","array"].includes(z.kind)||["color","formatted","resolvedImage"].includes(K.kind)&&["value","string"].includes(z.kind)||["padding","numberArray"].includes(K.kind)&&["value","number","array"].includes(z.kind)||K.kind==="colorArray"&&["value","string","array"].includes(z.kind)||K.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(z.kind))R=b(R,K,d.typeAnnotation||"coerce");else if(this.checkSubtype(K,z))return null}else R=b(R,K,d.typeAnnotation||"assert")}if(!(R instanceof J)&&R.type.kind!=="resolvedImage"&&this._isConstant(R)){const K=new xi;try{R=new J(R.type,R.evaluate(K))}catch(z){return this.error(z.message),null}}return R}return this.error(`Unknown expression "${M}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(u===void 0?"'undefined' value invalid. Use null instead.":typeof u=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof u} instead.`)}concat(u,d,b){const M=typeof u=="number"?this.path.concat(u):this.path,k=b?this.scope.concat(b):this.scope;return new Gn(this.registry,this._isConstant,M,d||null,k,this.errors)}error(u,...d){const b=`${this.key}${d.map((M=>`[${M}]`)).join("")}`;this.errors.push(new $o(b,u))}checkSubtype(u,d){const b=Ho(u,d);return b&&this.error(b),b}}class Ei{constructor(u,d){this.type=d.type,this.bindings=[].concat(u),this.result=d}evaluate(u){return this.result.evaluate(u)}eachChild(u){for(const d of this.bindings)u(d[1]);u(this.result)}static parse(u,d){if(u.length<4)return d.error(`Expected at least 3 arguments, but found ${u.length-1} instead.`);const b=[];for(let k=1;k<u.length-1;k+=2){const R=u[k];if(typeof R!="string")return d.error(`Expected string, but found ${typeof R} instead.`,k);if(/[^a-zA-Z0-9_]/.test(R))return d.error("Variable names must contain only alphanumeric characters or '_'.",k);const K=d.parse(u[k+1],k+1);if(!K)return null;b.push([R,K])}const M=d.parse(u[u.length-1],u.length-1,d.expectedType,b);return M?new Ei(b,M):null}outputDefined(){return this.result.outputDefined()}}class li{constructor(u,d){this.type=d.type,this.name=u,this.boundExpression=d}static parse(u,d){if(u.length!==2||typeof u[1]!="string")return d.error("'var' expression requires exactly one string literal argument.");const b=u[1];return d.scope.has(b)?new li(b,d.scope.get(b)):d.error(`Unknown variable "${b}". Make sure "${b}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(u){return this.boundExpression.evaluate(u)}eachChild(){}outputDefined(){return!1}}class Ar{constructor(u,d,b){this.type=u,this.index=d,this.input=b}static parse(u,d){if(u.length!==3)return d.error(`Expected 2 arguments, but found ${u.length-1} instead.`);const b=d.parse(u[1],1,pn),M=d.parse(u[2],2,Uo(d.expectedType||qi));return b&&M?new Ar(M.type.itemType,b,M):null}evaluate(u){const d=this.index.evaluate(u),b=this.input.evaluate(u);if(d<0)throw new yo(`Array index out of bounds: ${d} < 0.`);if(d>=b.length)throw new yo(`Array index out of bounds: ${d} > ${b.length-1}.`);if(d!==Math.floor(d))throw new yo(`Array index must be an integer, but found ${d} instead.`);return b[d]}eachChild(u){u(this.index),u(this.input)}outputDefined(){return!1}}class Gr{constructor(u,d){this.type=oi,this.needle=u,this.haystack=d}static parse(u,d){if(u.length!==3)return d.error(`Expected 2 arguments, but found ${u.length-1} instead.`);const b=d.parse(u[1],1,qi),M=d.parse(u[2],2,qi);return b&&M?Ko(b.type,[oi,zi,pn,Ur,qi])?new Gr(b,M):d.error(`Expected first argument to be of type boolean, string, number or null, but found ${Lr(b.type)} instead`):null}evaluate(u){const d=this.needle.evaluate(u),b=this.haystack.evaluate(u);if(!b)return!1;if(!Iu(d,["boolean","string","number","null"]))throw new yo(`Expected first argument to be of type boolean, string, number or null, but found ${Lr(Ni(d))} instead.`);if(!Iu(b,["string","array"]))throw new yo(`Expected second argument to be of type array or string, but found ${Lr(Ni(b))} instead.`);return b.indexOf(d)>=0}eachChild(u){u(this.needle),u(this.haystack)}outputDefined(){return!0}}class mr{constructor(u,d,b){this.type=pn,this.needle=u,this.haystack=d,this.fromIndex=b}static parse(u,d){if(u.length<=2||u.length>=5)return d.error(`Expected 2 or 3 arguments, but found ${u.length-1} instead.`);const b=d.parse(u[1],1,qi),M=d.parse(u[2],2,qi);if(!b||!M)return null;if(!Ko(b.type,[oi,zi,pn,Ur,qi]))return d.error(`Expected first argument to be of type boolean, string, number or null, but found ${Lr(b.type)} instead`);if(u.length===4){const k=d.parse(u[3],3,pn);return k?new mr(b,M,k):null}return new mr(b,M)}evaluate(u){const d=this.needle.evaluate(u),b=this.haystack.evaluate(u);if(!Iu(d,["boolean","string","number","null"]))throw new yo(`Expected first argument to be of type boolean, string, number or null, but found ${Lr(Ni(d))} instead.`);let M;if(this.fromIndex&&(M=this.fromIndex.evaluate(u)),Iu(b,["string"])){const k=b.indexOf(d,M);return k===-1?-1:[...b.slice(0,k)].length}if(Iu(b,["array"]))return b.indexOf(d,M);throw new yo(`Expected second argument to be of type array or string, but found ${Lr(Ni(b))} instead.`)}eachChild(u){u(this.needle),u(this.haystack),this.fromIndex&&u(this.fromIndex)}outputDefined(){return!1}}class hr{constructor(u,d,b,M,k,R){this.inputType=u,this.type=d,this.input=b,this.cases=M,this.outputs=k,this.otherwise=R}static parse(u,d){if(u.length<5)return d.error(`Expected at least 4 arguments, but found only ${u.length-1}.`);if(u.length%2!=1)return d.error("Expected an even number of arguments.");let b,M;d.expectedType&&d.expectedType.kind!=="value"&&(M=d.expectedType);const k={},R=[];for(let ee=2;ee<u.length-1;ee+=2){let ne=u[ee];const ce=u[ee+1];Array.isArray(ne)||(ne=[ne]);const _e=d.concat(ee);if(ne.length===0)return _e.error("Expected at least one branch label.");for(const ke of ne){if(typeof ke!="number"&&typeof ke!="string")return _e.error("Branch labels must be numbers or strings.");if(typeof ke=="number"&&Math.abs(ke)>Number.MAX_SAFE_INTEGER)return _e.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof ke=="number"&&Math.floor(ke)!==ke)return _e.error("Numeric branch labels must be integer values.");if(b){if(_e.checkSubtype(b,Ni(ke)))return null}else b=Ni(ke);if(k[String(ke)]!==void 0)return _e.error("Branch labels must be unique.");k[String(ke)]=R.length}const Se=d.parse(ce,ee,M);if(!Se)return null;M=M||Se.type,R.push(Se)}const K=d.parse(u[1],1,qi);if(!K)return null;const z=d.parse(u[u.length-1],u.length-1,M);return z?K.type.kind!=="value"&&d.concat(1).checkSubtype(b,K.type)?null:new hr(b,M,K,k,R,z):null}evaluate(u){const d=this.input.evaluate(u);return(Ni(d)===this.inputType&&this.outputs[this.cases[d]]||this.otherwise).evaluate(u)}eachChild(u){u(this.input),this.outputs.forEach(u),u(this.otherwise)}outputDefined(){return this.outputs.every((u=>u.outputDefined()))&&this.otherwise.outputDefined()}}class Hr{constructor(u,d,b){this.type=u,this.branches=d,this.otherwise=b}static parse(u,d){if(u.length<4)return d.error(`Expected at least 3 arguments, but found only ${u.length-1}.`);if(u.length%2!=0)return d.error("Expected an odd number of arguments.");let b;d.expectedType&&d.expectedType.kind!=="value"&&(b=d.expectedType);const M=[];for(let R=1;R<u.length-1;R+=2){const K=d.parse(u[R],R,oi);if(!K)return null;const z=d.parse(u[R+1],R+1,b);if(!z)return null;M.push([K,z]),b=b||z.type}const k=d.parse(u[u.length-1],u.length-1,b);if(!k)return null;if(!b)throw new Error("Can't infer output type");return new Hr(b,M,k)}evaluate(u){for(const[d,b]of this.branches)if(d.evaluate(u))return b.evaluate(u);return this.otherwise.evaluate(u)}eachChild(u){for(const[d,b]of this.branches)u(d),u(b);u(this.otherwise)}outputDefined(){return this.branches.every((([u,d])=>d.outputDefined()))&&this.otherwise.outputDefined()}}class Ys{constructor(u,d,b,M){this.type=u,this.input=d,this.beginIndex=b,this.endIndex=M}static parse(u,d){if(u.length<=2||u.length>=5)return d.error(`Expected 2 or 3 arguments, but found ${u.length-1} instead.`);const b=d.parse(u[1],1,qi),M=d.parse(u[2],2,pn);if(!b||!M)return null;if(!Ko(b.type,[Uo(qi),zi,qi]))return d.error(`Expected first argument to be of type array or string, but found ${Lr(b.type)} instead`);if(u.length===4){const k=d.parse(u[3],3,pn);return k?new Ys(b.type,b,M,k):null}return new Ys(b.type,b,M)}evaluate(u){const d=this.input.evaluate(u),b=this.beginIndex.evaluate(u);let M;if(this.endIndex&&(M=this.endIndex.evaluate(u)),Iu(d,["string"]))return[...d].slice(b,M).join("");if(Iu(d,["array"]))return d.slice(b,M);throw new yo(`Expected first argument to be of type array or string, but found ${Lr(Ni(d))} instead.`)}eachChild(u){u(this.input),u(this.beginIndex),this.endIndex&&u(this.endIndex)}outputDefined(){return!1}}function Zo(f,u){const d=f.length-1;let b,M,k=0,R=d,K=0;for(;k<=R;)if(K=Math.floor((k+R)/2),b=f[K],M=f[K+1],b<=u){if(K===d||u<M)return K;k=K+1}else{if(!(b>u))throw new yo("Input is not a number.");R=K-1}return 0}class qs{constructor(u,d,b){this.type=u,this.input=d,this.labels=[],this.outputs=[];for(const[M,k]of b)this.labels.push(M),this.outputs.push(k)}static parse(u,d){if(u.length-1<4)return d.error(`Expected at least 4 arguments, but found only ${u.length-1}.`);if((u.length-1)%2!=0)return d.error("Expected an even number of arguments.");const b=d.parse(u[1],1,pn);if(!b)return null;const M=[];let k=null;d.expectedType&&d.expectedType.kind!=="value"&&(k=d.expectedType);for(let R=1;R<u.length;R+=2){const K=R===1?-1/0:u[R],z=u[R+1],ee=R,ne=R+1;if(typeof K!="number")return d.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ee);if(M.length&&M[M.length-1][0]>=K)return d.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',ee);const ce=d.parse(z,ne,k);if(!ce)return null;k=k||ce.type,M.push([K,ce])}return new qs(k,b,M)}evaluate(u){const d=this.labels,b=this.outputs;if(d.length===1)return b[0].evaluate(u);const M=this.input.evaluate(u);if(M<=d[0])return b[0].evaluate(u);const k=d.length;return M>=d[k-1]?b[k-1].evaluate(u):b[Zo(d,M)].evaluate(u)}eachChild(u){u(this.input);for(const d of this.outputs)u(d)}outputDefined(){return this.outputs.every((u=>u.outputDefined()))}}function su(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f}var Lo,rs,S1=(function(){if(rs)return Lo;function f(u,d,b,M){this.cx=3*u,this.bx=3*(b-u)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*d,this.by=3*(M-d)-this.cy,this.ay=1-this.cy-this.by,this.p1x=u,this.p1y=d,this.p2x=b,this.p2y=M}return rs=1,Lo=f,f.prototype={sampleCurveX:function(u){return((this.ax*u+this.bx)*u+this.cx)*u},sampleCurveY:function(u){return((this.ay*u+this.by)*u+this.cy)*u},sampleCurveDerivativeX:function(u){return(3*this.ax*u+2*this.bx)*u+this.cx},solveCurveX:function(u,d){if(d===void 0&&(d=1e-6),u<0)return 0;if(u>1)return 1;for(var b=u,M=0;M<8;M++){var k=this.sampleCurveX(b)-u;if(Math.abs(k)<d)return b;var R=this.sampleCurveDerivativeX(b);if(Math.abs(R)<1e-6)break;b-=k/R}var K=0,z=1;for(b=u,M=0;M<20&&(k=this.sampleCurveX(b),!(Math.abs(k-u)<d));M++)u>k?K=b:z=b,b=.5*(z-K)+K;return b},solve:function(u,d){return this.sampleCurveY(this.solveCurveX(u,d))}},Lo})(),jl=su(S1);class wo{constructor(u,d,b,M,k){this.type=u,this.operator=d,this.interpolation=b,this.input=M,this.labels=[],this.outputs=[];for(const[R,K]of k)this.labels.push(R),this.outputs.push(K)}static interpolationFactor(u,d,b,M){let k=0;if(u.name==="exponential")k=Ap(d,u.base,b,M);else if(u.name==="linear")k=Ap(d,1,b,M);else if(u.name==="cubic-bezier"){const R=u.controlPoints;k=new jl(R[0],R[1],R[2],R[3]).solve(Ap(d,1,b,M))}return k}static parse(u,d){let[b,M,k,...R]=u;if(!Array.isArray(M)||M.length===0)return d.error("Expected an interpolation type expression.",1);if(M[0]==="linear")M={name:"linear"};else if(M[0]==="exponential"){const ee=M[1];if(typeof ee!="number")return d.error("Exponential interpolation requires a numeric base.",1,1);M={name:"exponential",base:ee}}else{if(M[0]!=="cubic-bezier")return d.error(`Unknown interpolation type ${String(M[0])}`,1,0);{const ee=M.slice(1);if(ee.length!==4||ee.some((ne=>typeof ne!="number"||ne<0||ne>1)))return d.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);M={name:"cubic-bezier",controlPoints:ee}}}if(u.length-1<4)return d.error(`Expected at least 4 arguments, but found only ${u.length-1}.`);if((u.length-1)%2!=0)return d.error("Expected an even number of arguments.");if(k=d.parse(k,2,pn),!k)return null;const K=[];let z=null;b!=="interpolate-hcl"&&b!=="interpolate-lab"||d.expectedType==rl?d.expectedType&&d.expectedType.kind!=="value"&&(z=d.expectedType):z=wl;for(let ee=0;ee<R.length;ee+=2){const ne=R[ee],ce=R[ee+1],_e=ee+3,Se=ee+4;if(typeof ne!="number")return d.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',_e);if(K.length&&K[K.length-1][0]>=ne)return d.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',_e);const ke=d.parse(ce,Se,z);if(!ke)return null;z=z||ke.type,K.push([ne,ke])}return iu(z,pn)||iu(z,nA)||iu(z,wl)||iu(z,Ls)||iu(z,Ya)||iu(z,rl)||iu(z,iA)||iu(z,Uo(pn))?new wo(z,b,M,k,K):d.error(`Type ${Lr(z)} is not interpolatable.`)}evaluate(u){const d=this.labels,b=this.outputs;if(d.length===1)return b[0].evaluate(u);const M=this.input.evaluate(u);if(M<=d[0])return b[0].evaluate(u);const k=d.length;if(M>=d[k-1])return b[k-1].evaluate(u);const R=Zo(d,M),K=wo.interpolationFactor(this.interpolation,M,d[R],d[R+1]),z=b[R].evaluate(u),ee=b[R+1].evaluate(u);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return Fl(z,ee,K);case"color":return Fi.interpolate(z,ee,K);case"padding":return go.interpolate(z,ee,K);case"colorArray":return uo.interpolate(z,ee,K);case"numberArray":return ms.interpolate(z,ee,K);case"variableAnchorOffsetCollection":return vo.interpolate(z,ee,K);case"array":return Du(z,ee,K);case"projectionDefinition":return co.interpolate(z,ee,K)}case"interpolate-hcl":switch(this.type.kind){case"color":return Fi.interpolate(z,ee,K,"hcl");case"colorArray":return uo.interpolate(z,ee,K,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return Fi.interpolate(z,ee,K,"lab");case"colorArray":return uo.interpolate(z,ee,K,"lab")}}}eachChild(u){u(this.input);for(const d of this.outputs)u(d)}outputDefined(){return this.outputs.every((u=>u.outputDefined()))}}function Ap(f,u,d,b){const M=b-d,k=f-d;return M===0?0:u===1?k/M:(Math.pow(u,k)-1)/(Math.pow(u,M)-1)}const $a={color:Fi.interpolate,number:Fl,padding:go.interpolate,numberArray:ms.interpolate,colorArray:uo.interpolate,variableAnchorOffsetCollection:vo.interpolate,array:Du};class Fh{constructor(u,d){this.type=u,this.args=d}static parse(u,d){if(u.length<2)return d.error("Expected at least one argument.");let b=null;const M=d.expectedType;M&&M.kind!=="value"&&(b=M);const k=[];for(const K of u.slice(1)){const z=d.parse(K,1+k.length,b,void 0,{typeAnnotation:"omit"});if(!z)return null;b=b||z.type,k.push(z)}if(!b)throw new Error("No output type");const R=M&&k.some((K=>Ho(M,K.type)));return new Fh(R?qi:b,k)}evaluate(u){let d,b=null,M=0;for(const k of this.args)if(M++,b=k.evaluate(u),b&&b instanceof Es&&!b.available&&(d||(d=b.name),b=null,M===this.args.length&&(b=d)),b!==null)break;return b}eachChild(u){this.args.forEach(u)}outputDefined(){return this.args.every((u=>u.outputDefined()))}}function Cf(f,u){return f==="=="||f==="!="?u.kind==="boolean"||u.kind==="string"||u.kind==="number"||u.kind==="null"||u.kind==="value":u.kind==="string"||u.kind==="number"||u.kind==="value"}function To(f,u,d,b){return b.compare(u,d)===0}function Nl(f,u,d){const b=f!=="=="&&f!=="!=";return class oZ{constructor(k,R,K){this.type=oi,this.lhs=k,this.rhs=R,this.collator=K,this.hasUntypedArgument=k.type.kind==="value"||R.type.kind==="value"}static parse(k,R){if(k.length!==3&&k.length!==4)return R.error("Expected two or three arguments.");const K=k[0];let z=R.parse(k[1],1,qi);if(!z)return null;if(!Cf(K,z.type))return R.concat(1).error(`"${K}" comparisons are not supported for type '${Lr(z.type)}'.`);let ee=R.parse(k[2],2,qi);if(!ee)return null;if(!Cf(K,ee.type))return R.concat(2).error(`"${K}" comparisons are not supported for type '${Lr(ee.type)}'.`);if(z.type.kind!==ee.type.kind&&z.type.kind!=="value"&&ee.type.kind!=="value")return R.error(`Cannot compare types '${Lr(z.type)}' and '${Lr(ee.type)}'.`);b&&(z.type.kind==="value"&&ee.type.kind!=="value"?z=new Ne(ee.type,[z]):z.type.kind!=="value"&&ee.type.kind==="value"&&(ee=new Ne(z.type,[ee])));let ne=null;if(k.length===4){if(z.type.kind!=="string"&&ee.type.kind!=="string"&&z.type.kind!=="value"&&ee.type.kind!=="value")return R.error("Cannot use collator to compare non-string types.");if(ne=R.parse(k[3],3,tc),!ne)return null}return new oZ(z,ee,ne)}evaluate(k){const R=this.lhs.evaluate(k),K=this.rhs.evaluate(k);if(b&&this.hasUntypedArgument){const z=Ni(R),ee=Ni(K);if(z.kind!==ee.kind||z.kind!=="string"&&z.kind!=="number")throw new yo(`Expected arguments for "${f}" to be (string, string) or (number, number), but found (${z.kind}, ${ee.kind}) instead.`)}if(this.collator&&!b&&this.hasUntypedArgument){const z=Ni(R),ee=Ni(K);if(z.kind!=="string"||ee.kind!=="string")return u(k,R,K)}return this.collator?d(k,R,K,this.collator.evaluate(k)):u(k,R,K)}eachChild(k){k(this.lhs),k(this.rhs),this.collator&&k(this.collator)}outputDefined(){return!0}}}const hp=Nl("==",(function(f,u,d){return u===d}),To),E1=Nl("!=",(function(f,u,d){return u!==d}),(function(f,u,d,b){return!To(0,u,d,b)})),Dm=Nl("<",(function(f,u,d){return u<d}),(function(f,u,d,b){return b.compare(u,d)<0})),Pm=Nl(">",(function(f,u,d){return u>d}),(function(f,u,d,b){return b.compare(u,d)>0})),Um=Nl("<=",(function(f,u,d){return u<=d}),(function(f,u,d,b){return b.compare(u,d)<=0})),oA=Nl(">=",(function(f,u,d){return u>=d}),(function(f,u,d,b){return b.compare(u,d)>=0}));class _f{constructor(u,d,b){this.type=tc,this.locale=b,this.caseSensitive=u,this.diacriticSensitive=d}static parse(u,d){if(u.length!==2)return d.error("Expected one argument.");const b=u[1];if(typeof b!="object"||Array.isArray(b))return d.error("Collator options argument must be an object.");const M=d.parse(b["case-sensitive"]!==void 0&&b["case-sensitive"],1,oi);if(!M)return null;const k=d.parse(b["diacritic-sensitive"]!==void 0&&b["diacritic-sensitive"],1,oi);if(!k)return null;let R=null;return b.locale&&(R=d.parse(b.locale,1,zi),!R)?null:new _f(M,k,R)}evaluate(u){return new Vi(this.caseSensitive.evaluate(u),this.diacriticSensitive.evaluate(u),this.locale?this.locale.evaluate(u):null)}eachChild(u){u(this.caseSensitive),u(this.diacriticSensitive),this.locale&&u(this.locale)}outputDefined(){return!1}}class sh{constructor(u,d,b,M,k){this.type=zi,this.number=u,this.locale=d,this.currency=b,this.minFractionDigits=M,this.maxFractionDigits=k}static parse(u,d){if(u.length!==3)return d.error("Expected two arguments.");const b=d.parse(u[1],1,pn);if(!b)return null;const M=u[2];if(typeof M!="object"||Array.isArray(M))return d.error("NumberFormat options argument must be an object.");let k=null;if(M.locale&&(k=d.parse(M.locale,1,zi),!k))return null;let R=null;if(M.currency&&(R=d.parse(M.currency,1,zi),!R))return null;let K=null;if(M["min-fraction-digits"]&&(K=d.parse(M["min-fraction-digits"],1,pn),!K))return null;let z=null;return M["max-fraction-digits"]&&(z=d.parse(M["max-fraction-digits"],1,pn),!z)?null:new sh(b,k,R,K,z)}evaluate(u){return new Intl.NumberFormat(this.locale?this.locale.evaluate(u):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(u):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(u):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(u):void 0}).format(this.number.evaluate(u))}eachChild(u){u(this.number),this.locale&&u(this.locale),this.currency&&u(this.currency),this.minFractionDigits&&u(this.minFractionDigits),this.maxFractionDigits&&u(this.maxFractionDigits)}outputDefined(){return!1}}class ah{constructor(u){this.type=no,this.sections=u}static parse(u,d){if(u.length<2)return d.error("Expected at least one argument.");const b=u[1];if(!Array.isArray(b)&&typeof b=="object")return d.error("First argument must be an image or text section.");const M=[];let k=!1;for(let R=1;R<=u.length-1;++R){const K=u[R];if(k&&typeof K=="object"&&!Array.isArray(K)){k=!1;let z=null;if(K["font-scale"]&&(z=d.parse(K["font-scale"],1,pn),!z))return null;let ee=null;if(K["text-font"]&&(ee=d.parse(K["text-font"],1,Uo(zi)),!ee))return null;let ne=null;if(K["text-color"]&&(ne=d.parse(K["text-color"],1,wl),!ne))return null;let ce=null;if(K["vertical-align"]){if(typeof K["vertical-align"]=="string"&&!Co.includes(K["vertical-align"]))return d.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${K["vertical-align"]}' instead.`);if(ce=d.parse(K["vertical-align"],1,zi),!ce)return null}const _e=M[M.length-1];_e.scale=z,_e.font=ee,_e.textColor=ne,_e.verticalAlign=ce}else{const z=d.parse(u[R],1,qi);if(!z)return null;const ee=z.type.kind;if(ee!=="string"&&ee!=="value"&&ee!=="null"&&ee!=="resolvedImage")return d.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");k=!0,M.push({content:z,scale:null,font:null,textColor:null,verticalAlign:null})}}return new ah(M)}evaluate(u){return new is(this.sections.map((d=>{const b=d.content.evaluate(u);return Ni(b)===Io?new Ia("",b,null,null,null,d.verticalAlign?d.verticalAlign.evaluate(u):null):new Ia(Fr(b),null,d.scale?d.scale.evaluate(u):null,d.font?d.font.evaluate(u).join(","):null,d.textColor?d.textColor.evaluate(u):null,d.verticalAlign?d.verticalAlign.evaluate(u):null)})))}eachChild(u){for(const d of this.sections)u(d.content),d.scale&&u(d.scale),d.font&&u(d.font),d.textColor&&u(d.textColor),d.verticalAlign&&u(d.verticalAlign)}outputDefined(){return!1}}class dp{constructor(u){this.type=Io,this.input=u}static parse(u,d){if(u.length!==2)return d.error("Expected two arguments.");const b=d.parse(u[1],1,zi);return b?new dp(b):d.error("No image name provided.")}evaluate(u){const d=this.input.evaluate(u),b=Es.fromString(d);return b&&u.availableImages&&(b.available=u.availableImages.indexOf(d)>-1),b}eachChild(u){u(this.input)}outputDefined(){return!1}}class Km{constructor(u){this.type=pn,this.input=u}static parse(u,d){if(u.length!==2)return d.error(`Expected 1 argument, but found ${u.length-1} instead.`);const b=d.parse(u[1],1);return b?b.type.kind!=="array"&&b.type.kind!=="string"&&b.type.kind!=="value"?d.error(`Expected argument of type string or array, but found ${Lr(b.type)} instead.`):new Km(b):null}evaluate(u){const d=this.input.evaluate(u);if(typeof d=="string")return[...d].length;if(Array.isArray(d))return d.length;throw new yo(`Expected value to be of type string or array, but found ${Lr(Ni(d))} instead.`)}eachChild(u){u(this.input)}outputDefined(){return!1}}const oc=8192;function Bd(f,u){const d=(180+f[0])/360,b=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+f[1]*Math.PI/360)))/360,M=Math.pow(2,u.z);return[Math.round(d*M*oc),Math.round(b*M*oc)]}function fp(f,u){const d=Math.pow(2,u.z);return[(M=(f[0]/oc+u.x)/d,360*M-180),(b=(f[1]/oc+u.y)/d,360/Math.PI*Math.atan(Math.exp((180-360*b)*Math.PI/180))-90)];var b,M}function xA(f,u){f[0]=Math.min(f[0],u[0]),f[1]=Math.min(f[1],u[1]),f[2]=Math.max(f[2],u[0]),f[3]=Math.max(f[3],u[1])}function xf(f,u){return!(f[0]<=u[0]||f[2]>=u[2]||f[1]<=u[1]||f[3]>=u[3])}function pp(f,u,d){const b=f[0]-u[0],M=f[1]-u[1],k=f[0]-d[0],R=f[1]-d[1];return b*R-k*M==0&&b*k<=0&&M*R<=0}function zh(f,u,d,b){return(M=[b[0]-d[0],b[1]-d[1]])[0]*(k=[u[0]-f[0],u[1]-f[1]])[1]-M[1]*k[0]!=0&&!(!Fm(f,u,d,b)||!Fm(d,b,f,u));var M,k}function B1(f,u,d){for(const b of d)for(let M=0;M<b.length-1;++M)if(zh(f,u,b[M],b[M+1]))return!0;return!1}function sc(f,u,d=!1){let b=!1;for(const K of u)for(let z=0;z<K.length-1;z++){if(pp(f,K[z],K[z+1]))return d;(k=K[z])[1]>(M=f)[1]!=(R=K[z+1])[1]>M[1]&&M[0]<(R[0]-k[0])*(M[1]-k[1])/(R[1]-k[1])+k[0]&&(b=!b)}var M,k,R;return b}function ac(f,u){for(const d of u)if(sc(f,d))return!0;return!1}function Lm(f,u){for(const d of f)if(!sc(d,u))return!1;for(let d=0;d<f.length-1;++d)if(B1(f[d],f[d+1],u))return!1;return!0}function mp(f,u){for(const d of u)if(Lm(f,d))return!0;return!1}function Fm(f,u,d,b){const M=b[0]-d[0],k=b[1]-d[1],R=(f[0]-d[0])*k-M*(f[1]-d[1]),K=(u[0]-d[0])*k-M*(u[1]-d[1]);return R>0&&K<0||R<0&&K>0}function gp(f,u,d){const b=[];for(let M=0;M<f.length;M++){const k=[];for(let R=0;R<f[M].length;R++){const K=Bd(f[M][R],d);xA(u,K),k.push(K)}b.push(k)}return b}function Od(f,u,d){const b=[];for(let M=0;M<f.length;M++){const k=gp(f[M],u,d);b.push(k)}return b}function Id(f,u,d,b){if(f[0]<d[0]||f[0]>d[2]){const M=.5*b;let k=f[0]-d[0]>M?-b:d[0]-f[0]>M?b:0;k===0&&(k=f[0]-d[2]>M?-b:d[2]-f[0]>M?b:0),f[0]+=k}xA(u,f)}function m0(f,u,d,b){const M=Math.pow(2,b.z)*oc,k=[b.x*oc,b.y*oc],R=[];for(const K of f)for(const z of K){const ee=[z.x+k[0],z.y+k[1]];Id(ee,u,d,M),R.push(ee)}return R}function yp(f,u,d,b){const M=Math.pow(2,b.z)*oc,k=[b.x*oc,b.y*oc],R=[];for(const z of f){const ee=[];for(const ne of z){const ce=[ne.x+k[0],ne.y+k[1]];xA(u,ce),ee.push(ce)}R.push(ee)}if(u[2]-u[0]<=M/2){(K=u)[0]=K[1]=1/0,K[2]=K[3]=-1/0;for(const z of R)for(const ee of z)Id(ee,u,d,M)}var K;return R}class jh{constructor(u,d){this.type=oi,this.geojson=u,this.geometries=d}static parse(u,d){if(u.length!==2)return d.error(`'within' expression requires exactly one argument, but found ${u.length-1} instead.`);if(Ta(u[1])){const b=u[1];if(b.type==="FeatureCollection"){const M=[];for(const k of b.features){const{type:R,coordinates:K}=k.geometry;R==="Polygon"&&M.push(K),R==="MultiPolygon"&&M.push(...K)}if(M.length)return new jh(b,{type:"MultiPolygon",coordinates:M})}else if(b.type==="Feature"){const M=b.geometry.type;if(M==="Polygon"||M==="MultiPolygon")return new jh(b,b.geometry)}else if(b.type==="Polygon"||b.type==="MultiPolygon")return new jh(b,b)}return d.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(u){if(u.geometry()!=null&&u.canonicalID()!=null){if(u.geometryType()==="Point")return(function(d,b){const M=[1/0,1/0,-1/0,-1/0],k=[1/0,1/0,-1/0,-1/0],R=d.canonicalID();if(b.type==="Polygon"){const K=gp(b.coordinates,k,R),z=m0(d.geometry(),M,k,R);if(!xf(M,k))return!1;for(const ee of z)if(!sc(ee,K))return!1}if(b.type==="MultiPolygon"){const K=Od(b.coordinates,k,R),z=m0(d.geometry(),M,k,R);if(!xf(M,k))return!1;for(const ee of z)if(!ac(ee,K))return!1}return!0})(u,this.geometries);if(u.geometryType()==="LineString")return(function(d,b){const M=[1/0,1/0,-1/0,-1/0],k=[1/0,1/0,-1/0,-1/0],R=d.canonicalID();if(b.type==="Polygon"){const K=gp(b.coordinates,k,R),z=yp(d.geometry(),M,k,R);if(!xf(M,k))return!1;for(const ee of z)if(!Lm(ee,K))return!1}if(b.type==="MultiPolygon"){const K=Od(b.coordinates,k,R),z=yp(d.geometry(),M,k,R);if(!xf(M,k))return!1;for(const ee of z)if(!mp(ee,K))return!1}return!0})(u,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let Nh=class{constructor(f=[],u=(d,b)=>d<b?-1:d>b?1:0){if(this.data=f,this.length=this.data.length,this.compare=u,this.length>0)for(let d=(this.length>>1)-1;d>=0;d--)this._down(d)}push(f){this.data.push(f),this._up(this.length++)}pop(){if(this.length===0)return;const f=this.data[0],u=this.data.pop();return--this.length>0&&(this.data[0]=u,this._down(0)),f}peek(){return this.data[0]}_up(f){const{data:u,compare:d}=this,b=u[f];for(;f>0;){const M=f-1>>1,k=u[M];if(d(b,k)>=0)break;u[f]=k,f=M}u[f]=b}_down(f){const{data:u,compare:d}=this,b=this.length>>1,M=u[f];for(;f<b;){let k=1+(f<<1);const R=k+1;if(R<this.length&&d(u[R],u[k])<0&&(k=R),d(u[k],M)>=0)break;u[f]=u[k],f=k}u[f]=M}};function zm(f,u,d=0,b=f.length-1,M=jm){for(;b>d;){if(b-d>600){const z=b-d+1,ee=u-d+1,ne=Math.log(z),ce=.5*Math.exp(2*ne/3),_e=.5*Math.sqrt(ne*ce*(z-ce)/z)*(ee-z/2<0?-1:1);zm(f,u,Math.max(d,Math.floor(u-ee*ce/z+_e)),Math.min(b,Math.floor(u+(z-ee)*ce/z+_e)),M)}const k=f[u];let R=d,K=b;for(MA(f,d,u),M(f[b],k)>0&&MA(f,d,b);R<K;){for(MA(f,R,K),R++,K--;M(f[R],k)<0;)R++;for(;M(f[K],k)>0;)K--}M(f[d],k)===0?MA(f,d,K):(K++,MA(f,K,b)),K<=u&&(d=K+1),u<=K&&(b=K-1)}}function MA(f,u,d){const b=f[u];f[u]=f[d],f[d]=b}function jm(f,u){return f<u?-1:f>u?1:0}function Mf(f,u){if(f.length<=1)return[f];const d=[];let b,M;for(const k of f){const R=Nm(k);R!==0&&(k.area=Math.abs(R),M===void 0&&(M=R<0),M===R<0?(b&&d.push(b),b=[k]):b.push(k))}if(b&&d.push(b),u>1)for(let k=0;k<d.length;k++)d[k].length<=u||(zm(d[k],u,1,d[k].length-1,lh),d[k]=d[k].slice(0,u));return d}function lh(f,u){return u.area-f.area}function Nm(f){let u=0;for(let d,b,M=0,k=f.length,R=k-1;M<k;R=M++)d=f[M],b=f[R],u+=(b.x-d.x)*(d.y+b.y);return u}const Gm=1/298.257223563,g0=Gm*(2-Gm),O1=Math.PI/180;class Gh{constructor(u){const d=6378.137*O1*1e3,b=Math.cos(u*O1),M=1/(1-g0*(1-b*b)),k=Math.sqrt(M);this.kx=d*k*b,this.ky=d*k*M*(1-g0)}distance(u,d){const b=this.wrap(u[0]-d[0])*this.kx,M=(u[1]-d[1])*this.ky;return Math.sqrt(b*b+M*M)}pointOnLine(u,d){let b,M,k,R,K=1/0;for(let z=0;z<u.length-1;z++){let ee=u[z][0],ne=u[z][1],ce=this.wrap(u[z+1][0]-ee)*this.kx,_e=(u[z+1][1]-ne)*this.ky,Se=0;ce===0&&_e===0||(Se=(this.wrap(d[0]-ee)*this.kx*ce+(d[1]-ne)*this.ky*_e)/(ce*ce+_e*_e),Se>1?(ee=u[z+1][0],ne=u[z+1][1]):Se>0&&(ee+=ce/this.kx*Se,ne+=_e/this.ky*Se)),ce=this.wrap(d[0]-ee)*this.kx,_e=(d[1]-ne)*this.ky;const ke=ce*ce+_e*_e;ke<K&&(K=ke,b=ee,M=ne,k=z,R=Se)}return{point:[b,M],index:k,t:Math.max(0,Math.min(1,R))}}wrap(u){for(;u<-180;)u+=360;for(;u>180;)u-=360;return u}}function Bs(f,u){return u[0]-f[0]}function wA(f){return f[1]-f[0]+1}function SA(f,u){return f[1]>=f[0]&&f[1]<u}function Wm(f,u){if(f[0]>f[1])return[null,null];const d=wA(f);if(u){if(d===2)return[f,null];const M=Math.floor(d/2);return[[f[0],f[0]+M],[f[0]+M,f[1]]]}if(d===1)return[f,null];const b=Math.floor(d/2)-1;return[[f[0],f[0]+b],[f[0]+b+1,f[1]]]}function Qm(f,u){if(!SA(u,f.length))return[1/0,1/0,-1/0,-1/0];const d=[1/0,1/0,-1/0,-1/0];for(let b=u[0];b<=u[1];++b)xA(d,f[b]);return d}function vp(f){const u=[1/0,1/0,-1/0,-1/0];for(const d of f)for(const b of d)xA(u,b);return u}function Ym(f){return f[0]!==-1/0&&f[1]!==-1/0&&f[2]!==1/0&&f[3]!==1/0}function Wh(f,u,d){if(!Ym(f)||!Ym(u))return NaN;let b=0,M=0;return f[2]<u[0]&&(b=u[0]-f[2]),f[0]>u[2]&&(b=f[0]-u[2]),f[1]>u[3]&&(M=f[1]-u[3]),f[3]<u[1]&&(M=u[1]-f[3]),d.distance([0,0],[b,M])}function Rt(f,u,d){const b=d.pointOnLine(u,f);return d.distance(f,b.point)}function ln(f,u,d,b,M){const k=Math.min(Rt(f,[d,b],M),Rt(u,[d,b],M)),R=Math.min(Rt(d,[f,u],M),Rt(b,[f,u],M));return Math.min(k,R)}function Pt(f,u,d,b,M){if(!SA(u,f.length)||!SA(b,d.length))return 1/0;let k=1/0;for(let R=u[0];R<u[1];++R){const K=f[R],z=f[R+1];for(let ee=b[0];ee<b[1];++ee){const ne=d[ee],ce=d[ee+1];if(zh(K,z,ne,ce))return 0;k=Math.min(k,ln(K,z,ne,ce,M))}}return k}function Ai(f,u,d,b,M){if(!SA(u,f.length)||!SA(b,d.length))return NaN;let k=1/0;for(let R=u[0];R<=u[1];++R)for(let K=b[0];K<=b[1];++K)if(k=Math.min(k,M.distance(f[R],d[K])),k===0)return k;return k}function gr(f,u,d){if(sc(f,u,!0))return 0;let b=1/0;for(const M of u){const k=M[0],R=M[M.length-1];if(k!==R&&(b=Math.min(b,Rt(f,[R,k],d)),b===0))return b;const K=d.pointOnLine(M,f);if(b=Math.min(b,d.distance(f,K.point)),b===0)return b}return b}function Wr(f,u,d,b){if(!SA(u,f.length))return NaN;for(let k=u[0];k<=u[1];++k)if(sc(f[k],d,!0))return 0;let M=1/0;for(let k=u[0];k<u[1];++k){const R=f[k],K=f[k+1];for(const z of d)for(let ee=0,ne=z.length,ce=ne-1;ee<ne;ce=ee++){const _e=z[ce],Se=z[ee];if(zh(R,K,_e,Se))return 0;M=Math.min(M,ln(R,K,_e,Se,b))}}return M}function Os(f,u){for(const d of f)for(const b of d)if(sc(b,u,!0))return!0;return!1}function Fo(f,u,d,b=1/0){const M=vp(f),k=vp(u);if(b!==1/0&&Wh(M,k,d)>=b)return b;if(xf(M,k)){if(Os(f,u))return 0}else if(Os(u,f))return 0;let R=1/0;for(const K of f)for(let z=0,ee=K.length,ne=ee-1;z<ee;ne=z++){const ce=K[ne],_e=K[z];for(const Se of u)for(let ke=0,ze=Se.length,$e=ze-1;ke<ze;$e=ke++){const it=Se[$e],Et=Se[ke];if(zh(ce,_e,it,Et))return 0;R=Math.min(R,ln(ce,_e,it,Et,d))}}return R}function bp(f,u,d,b,M,k){if(!k)return;const R=Wh(Qm(b,k),M,d);R<u&&f.push([R,k,[0,0]])}function EA(f,u,d,b,M,k,R){if(!k||!R)return;const K=Wh(Qm(b,k),Qm(M,R),d);K<u&&f.push([K,k,R])}function Gl(f,u,d,b,M=1/0){let k=Math.min(b.distance(f[0],d[0][0]),M);if(k===0)return k;const R=new Nh([[0,[0,f.length-1],[0,0]]],Bs),K=vp(d);for(;R.length>0;){const z=R.pop();if(z[0]>=k)continue;const ee=z[1],ne=u?50:100;if(wA(ee)<=ne){if(!SA(ee,f.length))return NaN;if(u){const ce=Wr(f,ee,d,b);if(isNaN(ce)||ce===0)return ce;k=Math.min(k,ce)}else for(let ce=ee[0];ce<=ee[1];++ce){const _e=gr(f[ce],d,b);if(k=Math.min(k,_e),k===0)return 0}}else{const ce=Wm(ee,u);bp(R,k,b,f,K,ce[0]),bp(R,k,b,f,K,ce[1])}}return k}function Qh(f,u,d,b,M,k=1/0){let R=Math.min(k,M.distance(f[0],d[0]));if(R===0)return R;const K=new Nh([[0,[0,f.length-1],[0,d.length-1]]],Bs);for(;K.length>0;){const z=K.pop();if(z[0]>=R)continue;const ee=z[1],ne=z[2],ce=u?50:100,_e=b?50:100;if(wA(ee)<=ce&&wA(ne)<=_e){if(!SA(ee,f.length)&&SA(ne,d.length))return NaN;let Se;if(u&&b)Se=Pt(f,ee,d,ne,M),R=Math.min(R,Se);else if(u&&!b){const ke=f.slice(ee[0],ee[1]+1);for(let ze=ne[0];ze<=ne[1];++ze)if(Se=Rt(d[ze],ke,M),R=Math.min(R,Se),R===0)return R}else if(!u&&b){const ke=d.slice(ne[0],ne[1]+1);for(let ze=ee[0];ze<=ee[1];++ze)if(Se=Rt(f[ze],ke,M),R=Math.min(R,Se),R===0)return R}else Se=Ai(f,ee,d,ne,M),R=Math.min(R,Se)}else{const Se=Wm(ee,u),ke=Wm(ne,b);EA(K,R,M,f,d,Se[0],ke[0]),EA(K,R,M,f,d,Se[0],ke[1]),EA(K,R,M,f,d,Se[1],ke[0]),EA(K,R,M,f,d,Se[1],ke[1])}}return R}function qm(f){return f.type==="MultiPolygon"?f.coordinates.map((u=>({type:"Polygon",coordinates:u}))):f.type==="MultiLineString"?f.coordinates.map((u=>({type:"LineString",coordinates:u}))):f.type==="MultiPoint"?f.coordinates.map((u=>({type:"Point",coordinates:u}))):[f]}class Rc{constructor(u,d){this.type=pn,this.geojson=u,this.geometries=d}static parse(u,d){if(u.length!==2)return d.error(`'distance' expression requires exactly one argument, but found ${u.length-1} instead.`);if(Ta(u[1])){const b=u[1];if(b.type==="FeatureCollection")return new Rc(b,b.features.map((M=>qm(M.geometry))).flat());if(b.type==="Feature")return new Rc(b,qm(b.geometry));if("type"in b&&"coordinates"in b)return new Rc(b,qm(b))}return d.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(u){if(u.geometry()!=null&&u.canonicalID()!=null){if(u.geometryType()==="Point")return(function(d,b){const M=d.geometry(),k=M.flat().map((z=>fp([z.x,z.y],d.canonical)));if(M.length===0)return NaN;const R=new Gh(k[0][1]);let K=1/0;for(const z of b){switch(z.type){case"Point":K=Math.min(K,Qh(k,!1,[z.coordinates],!1,R,K));break;case"LineString":K=Math.min(K,Qh(k,!1,z.coordinates,!0,R,K));break;case"Polygon":K=Math.min(K,Gl(k,!1,z.coordinates,R,K))}if(K===0)return K}return K})(u,this.geometries);if(u.geometryType()==="LineString")return(function(d,b){const M=d.geometry(),k=M.flat().map((z=>fp([z.x,z.y],d.canonical)));if(M.length===0)return NaN;const R=new Gh(k[0][1]);let K=1/0;for(const z of b){switch(z.type){case"Point":K=Math.min(K,Qh(k,!0,[z.coordinates],!1,R,K));break;case"LineString":K=Math.min(K,Qh(k,!0,z.coordinates,!0,R,K));break;case"Polygon":K=Math.min(K,Gl(k,!0,z.coordinates,R,K))}if(K===0)return K}return K})(u,this.geometries);if(u.geometryType()==="Polygon")return(function(d,b){const M=d.geometry();if(M.length===0||M[0].length===0)return NaN;const k=Mf(M,0).map((z=>z.map((ee=>ee.map((ne=>fp([ne.x,ne.y],d.canonical))))))),R=new Gh(k[0][0][0][1]);let K=1/0;for(const z of b)for(const ee of k){switch(z.type){case"Point":K=Math.min(K,Gl([z.coordinates],!1,ee,R,K));break;case"LineString":K=Math.min(K,Gl(z.coordinates,!0,ee,R,K));break;case"Polygon":K=Math.min(K,Fo(ee,z.coordinates,R,K))}if(K===0)return K}return K})(u,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class Yh{constructor(u){this.type=qi,this.key=u}static parse(u,d){if(u.length!==2)return d.error(`Expected 1 argument, but found ${u.length-1} instead.`);const b=u[1];return b==null?d.error("Global state property must be defined."):typeof b!="string"?d.error(`Global state property must be string, but found ${typeof u[1]} instead.`):new Yh(b)}evaluate(u){var d;const b=(d=u.globals)===null||d===void 0?void 0:d.globalState;return b&&Object.keys(b).length!==0?Ss(b,this.key):null}eachChild(){}outputDefined(){return!1}}const uh={"==":hp,"!=":E1,">":Pm,"<":Dm,">=":oA,"<=":Um,array:Ne,at:Ar,boolean:Ne,case:Hr,coalesce:Fh,collator:_f,format:ah,image:dp,in:Gr,"index-of":mr,interpolate:wo,"interpolate-hcl":wo,"interpolate-lab":wo,length:Km,let:Ei,literal:J,match:hr,number:Ne,"number-format":sh,object:Ne,slice:Ys,step:qs,string:Ne,"to-boolean":fn,"to-color":fn,"to-number":fn,"to-string":fn,var:li,within:jh,distance:Rc,"global-state":Yh};class Br{constructor(u,d,b,M){this.name=u,this.type=d,this._evaluate=b,this.args=M}evaluate(u){return this._evaluate(u,this.args)}eachChild(u){this.args.forEach(u)}outputDefined(){return!1}static parse(u,d){const b=u[0],M=Br.definitions[b];if(!M)return d.error(`Unknown expression "${b}". If you wanted a literal array, use ["literal", [...]].`,0);const k=Array.isArray(M)?M[0]:M.type,R=Array.isArray(M)?[[M[1],M[2]]]:M.overloads,K=R.filter((([ee])=>!Array.isArray(ee)||ee.length===u.length-1));let z=null;for(const[ee,ne]of K){z=new Gn(d.registry,au,d.path,null,d.scope);const ce=[];let _e=!1;for(let Se=1;Se<u.length;Se++){const ke=u[Se],ze=Array.isArray(ee)?ee[Se-1]:ee.type,$e=z.parse(ke,1+ce.length,ze);if(!$e){_e=!0;break}ce.push($e)}if(!_e)if(Array.isArray(ee)&&ee.length!==ce.length)z.error(`Expected ${ee.length} arguments, but found ${ce.length} instead.`);else{for(let Se=0;Se<ce.length;Se++){const ke=Array.isArray(ee)?ee[Se]:ee.type,ze=ce[Se];z.concat(Se+1).checkSubtype(ke,ze.type)}if(z.errors.length===0)return new Br(b,k,ne,ce)}}if(K.length===1)d.errors.push(...z.errors);else{const ee=(K.length?K:R).map((([ce])=>{return _e=ce,Array.isArray(_e)?`(${_e.map(Lr).join(", ")})`:`(${Lr(_e.type)}...)`;var _e})).join(" | "),ne=[];for(let ce=1;ce<u.length;ce++){const _e=d.parse(u[ce],1+ne.length);if(!_e)return null;ne.push(Lr(_e.type))}d.error(`Expected arguments of type ${ee}, but found (${ne.join(", ")}) instead.`)}return null}static register(u,d){Br.definitions=d;for(const b in d)u[b]=Br}}function y0(f,[u,d,b,M]){u=u.evaluate(f),d=d.evaluate(f),b=b.evaluate(f);const k=M?M.evaluate(f):1,R=ka(u,d,b,k);if(R)throw new yo(R);return new Fi(u/255,d/255,b/255,k,!1)}function Cp(f,u){return f in u}function Wl(f,u){const d=u[f];return d===void 0?null:d}function BA(f){return{type:f}}function au(f){if(f instanceof li)return au(f.boundExpression);if(f instanceof Br&&f.name==="error"||f instanceof _f||f instanceof jh||f instanceof Rc||f instanceof Yh)return!1;const u=f instanceof fn||f instanceof Ne;let d=!0;return f.eachChild((b=>{d=u?d&&au(b):d&&b instanceof J})),!!d&&ch(f)&&Pu(f,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"])}function ch(f){if(f instanceof Br&&(f.name==="get"&&f.args.length===1||f.name==="feature-state"||f.name==="has"&&f.args.length===1||f.name==="properties"||f.name==="geometry-type"||f.name==="id"||/^filter-/.test(f.name))||f instanceof jh||f instanceof Rc)return!1;let u=!0;return f.eachChild((d=>{u&&!ch(d)&&(u=!1)})),u}function OA(f){if(f instanceof Br&&f.name==="feature-state")return!1;let u=!0;return f.eachChild((d=>{u&&!OA(d)&&(u=!1)})),u}function Pu(f,u){if(f instanceof Br&&u.indexOf(f.name)>=0)return!1;let d=!0;return f.eachChild((b=>{d&&!Pu(b,u)&&(d=!1)})),d}function qh(f){return{result:"success",value:f}}function Ah(f){return{result:"error",value:f}}function lu(f){return f["property-type"]==="data-driven"||f["property-type"]==="cross-faded-data-driven"}function Vm(f){return!!f.expression&&f.expression.parameters.indexOf("zoom")>-1}function kd(f){return!!f.expression&&f.expression.interpolated}function sr(f){return f instanceof Number?"number":f instanceof String?"string":f instanceof Boolean?"boolean":Array.isArray(f)?"array":f===null?"null":typeof f}function _p(f){return typeof f=="object"&&f!==null&&!Array.isArray(f)&&Ni(f)===nu}function El(f){return f}function IA(f,u){const d=f.stops&&typeof f.stops[0][0]=="object",b=d||!(d||f.property!==void 0),M=f.type||(kd(u)?"exponential":"interval"),k=(function(ne){switch(ne.type){case"color":return Fi.parse;case"padding":return go.parse;case"numberArray":return ms.parse;case"colorArray":return uo.parse;default:return null}})(u);if(k&&((f=Li({},f)).stops&&(f.stops=f.stops.map((ne=>[ne[0],k(ne[1])]))),f.default=k(f.default?f.default:u.default)),f.colorSpace&&(R=f.colorSpace)!=="rgb"&&R!=="hcl"&&R!=="lab")throw new Error(`Unknown color space: "${f.colorSpace}"`);var R;const K=(function(ne){switch(ne){case"exponential":return Vh;case"interval":return $m;case"categorical":return I1;case"identity":return Td;default:throw new Error(`Unknown function type "${ne}"`)}})(M);let z,ee;if(M==="categorical"){z=Object.create(null);for(const ne of f.stops)z[ne[0]]=ne[1];ee=typeof f.stops[0][0]}if(d){const ne={},ce=[];for(let ke=0;ke<f.stops.length;ke++){const ze=f.stops[ke],$e=ze[0].zoom;ne[$e]===void 0&&(ne[$e]={zoom:$e,type:f.type,property:f.property,default:f.default,stops:[]},ce.push($e)),ne[$e].stops.push([ze[0].value,ze[1]])}const _e=[];for(const ke of ce)_e.push([ne[ke].zoom,IA(ne[ke],u)]);const Se={name:"linear"};return{kind:"composite",interpolationType:Se,interpolationFactor:wo.interpolationFactor.bind(void 0,Se),zoomStops:_e.map((ke=>ke[0])),evaluate:({zoom:ke},ze)=>Vh({stops:_e,base:f.base},u,ke).evaluate(ke,ze)}}if(b){const ne=M==="exponential"?{name:"exponential",base:f.base!==void 0?f.base:1}:null;return{kind:"camera",interpolationType:ne,interpolationFactor:wo.interpolationFactor.bind(void 0,ne),zoomStops:f.stops.map((ce=>ce[0])),evaluate:({zoom:ce})=>K(f,u,ce,z,ee)}}return{kind:"source",evaluate(ne,ce){const _e=ce&&ce.properties?ce.properties[f.property]:void 0;return _e===void 0?ol(f.default,u.default):K(f,u,_e,z,ee)}}}function ol(f,u,d){return f!==void 0?f:u!==void 0?u:d!==void 0?d:void 0}function I1(f,u,d,b,M){return ol(typeof d===M?b[d]:void 0,f.default,u.default)}function $m(f,u,d){if(sr(d)!=="number")return ol(f.default,u.default);const b=f.stops.length;if(b===1||d<=f.stops[0][0])return f.stops[0][1];if(d>=f.stops[b-1][0])return f.stops[b-1][1];const M=Zo(f.stops.map((k=>k[0])),d);return f.stops[M][1]}function Vh(f,u,d){const b=f.base!==void 0?f.base:1;if(sr(d)!=="number")return ol(f.default,u.default);const M=f.stops.length;if(M===1||d<=f.stops[0][0])return f.stops[0][1];if(d>=f.stops[M-1][0])return f.stops[M-1][1];const k=Zo(f.stops.map((ne=>ne[0])),d),R=(function(ne,ce,_e,Se){const ke=Se-_e,ze=ne-_e;return ke===0?0:ce===1?ze/ke:(Math.pow(ce,ze)-1)/(Math.pow(ce,ke)-1)})(d,b,f.stops[k][0],f.stops[k+1][0]),K=f.stops[k][1],z=f.stops[k+1][1],ee=$a[u.type]||El;return typeof K.evaluate=="function"?{evaluate(...ne){const ce=K.evaluate.apply(void 0,ne),_e=z.evaluate.apply(void 0,ne);if(ce!==void 0&&_e!==void 0)return ee(ce,_e,R,f.colorSpace)}}:ee(K,z,R,f.colorSpace)}function Td(f,u,d){switch(u.type){case"color":d=Fi.parse(d);break;case"formatted":d=is.fromString(d.toString());break;case"resolvedImage":d=Es.fromString(d.toString());break;case"padding":d=go.parse(d);break;case"colorArray":d=uo.parse(d);break;case"numberArray":d=ms.parse(d);break;default:sr(d)===u.type||u.type==="enum"&&u.values[d]||(d=void 0)}return ol(d,f.default,u.default)}Br.register(uh,{error:[{kind:"error"},[zi],(f,[u])=>{throw new yo(u.evaluate(f))}],typeof:[zi,[qi],(f,[u])=>Lr(Ni(u.evaluate(f)))],"to-rgba":[Uo(pn,4),[wl],(f,[u])=>{const[d,b,M,k]=u.evaluate(f).rgb;return[255*d,255*b,255*M,k]}],rgb:[wl,[pn,pn,pn],y0],rgba:[wl,[pn,pn,pn,pn],y0],has:{type:oi,overloads:[[[zi],(f,[u])=>Cp(u.evaluate(f),f.properties())],[[zi,nu],(f,[u,d])=>Cp(u.evaluate(f),d.evaluate(f))]]},get:{type:qi,overloads:[[[zi],(f,[u])=>Wl(u.evaluate(f),f.properties())],[[zi,nu],(f,[u,d])=>Wl(u.evaluate(f),d.evaluate(f))]]},"feature-state":[qi,[zi],(f,[u])=>Wl(u.evaluate(f),f.featureState||{})],properties:[nu,[],f=>f.properties()],"geometry-type":[zi,[],f=>f.geometryType()],id:[qi,[],f=>f.id()],zoom:[pn,[],f=>f.globals.zoom],"heatmap-density":[pn,[],f=>f.globals.heatmapDensity||0],elevation:[pn,[],f=>f.globals.elevation||0],"line-progress":[pn,[],f=>f.globals.lineProgress||0],accumulated:[qi,[],f=>f.globals.accumulated===void 0?null:f.globals.accumulated],"+":[pn,BA(pn),(f,u)=>{let d=0;for(const b of u)d+=b.evaluate(f);return d}],"*":[pn,BA(pn),(f,u)=>{let d=1;for(const b of u)d*=b.evaluate(f);return d}],"-":{type:pn,overloads:[[[pn,pn],(f,[u,d])=>u.evaluate(f)-d.evaluate(f)],[[pn],(f,[u])=>-u.evaluate(f)]]},"/":[pn,[pn,pn],(f,[u,d])=>u.evaluate(f)/d.evaluate(f)],"%":[pn,[pn,pn],(f,[u,d])=>u.evaluate(f)%d.evaluate(f)],ln2:[pn,[],()=>Math.LN2],pi:[pn,[],()=>Math.PI],e:[pn,[],()=>Math.E],"^":[pn,[pn,pn],(f,[u,d])=>Math.pow(u.evaluate(f),d.evaluate(f))],sqrt:[pn,[pn],(f,[u])=>Math.sqrt(u.evaluate(f))],log10:[pn,[pn],(f,[u])=>Math.log(u.evaluate(f))/Math.LN10],ln:[pn,[pn],(f,[u])=>Math.log(u.evaluate(f))],log2:[pn,[pn],(f,[u])=>Math.log(u.evaluate(f))/Math.LN2],sin:[pn,[pn],(f,[u])=>Math.sin(u.evaluate(f))],cos:[pn,[pn],(f,[u])=>Math.cos(u.evaluate(f))],tan:[pn,[pn],(f,[u])=>Math.tan(u.evaluate(f))],asin:[pn,[pn],(f,[u])=>Math.asin(u.evaluate(f))],acos:[pn,[pn],(f,[u])=>Math.acos(u.evaluate(f))],atan:[pn,[pn],(f,[u])=>Math.atan(u.evaluate(f))],min:[pn,BA(pn),(f,u)=>Math.min(...u.map((d=>d.evaluate(f))))],max:[pn,BA(pn),(f,u)=>Math.max(...u.map((d=>d.evaluate(f))))],abs:[pn,[pn],(f,[u])=>Math.abs(u.evaluate(f))],round:[pn,[pn],(f,[u])=>{const d=u.evaluate(f);return d<0?-Math.round(-d):Math.round(d)}],floor:[pn,[pn],(f,[u])=>Math.floor(u.evaluate(f))],ceil:[pn,[pn],(f,[u])=>Math.ceil(u.evaluate(f))],"filter-==":[oi,[zi,qi],(f,[u,d])=>f.properties()[u.value]===d.value],"filter-id-==":[oi,[qi],(f,[u])=>f.id()===u.value],"filter-type-==":[oi,[zi],(f,[u])=>f.geometryType()===u.value],"filter-<":[oi,[zi,qi],(f,[u,d])=>{const b=f.properties()[u.value],M=d.value;return typeof b==typeof M&&b<M}],"filter-id-<":[oi,[qi],(f,[u])=>{const d=f.id(),b=u.value;return typeof d==typeof b&&d<b}],"filter->":[oi,[zi,qi],(f,[u,d])=>{const b=f.properties()[u.value],M=d.value;return typeof b==typeof M&&b>M}],"filter-id->":[oi,[qi],(f,[u])=>{const d=f.id(),b=u.value;return typeof d==typeof b&&d>b}],"filter-<=":[oi,[zi,qi],(f,[u,d])=>{const b=f.properties()[u.value],M=d.value;return typeof b==typeof M&&b<=M}],"filter-id-<=":[oi,[qi],(f,[u])=>{const d=f.id(),b=u.value;return typeof d==typeof b&&d<=b}],"filter->=":[oi,[zi,qi],(f,[u,d])=>{const b=f.properties()[u.value],M=d.value;return typeof b==typeof M&&b>=M}],"filter-id->=":[oi,[qi],(f,[u])=>{const d=f.id(),b=u.value;return typeof d==typeof b&&d>=b}],"filter-has":[oi,[qi],(f,[u])=>u.value in f.properties()],"filter-has-id":[oi,[],f=>f.id()!==null&&f.id()!==void 0],"filter-type-in":[oi,[Uo(zi)],(f,[u])=>u.value.indexOf(f.geometryType())>=0],"filter-id-in":[oi,[Uo(qi)],(f,[u])=>u.value.indexOf(f.id())>=0],"filter-in-small":[oi,[zi,Uo(qi)],(f,[u,d])=>d.value.indexOf(f.properties()[u.value])>=0],"filter-in-large":[oi,[zi,Uo(qi)],(f,[u,d])=>(function(b,M,k,R){for(;k<=R;){const K=k+R>>1;if(M[K]===b)return!0;M[K]>b?R=K-1:k=K+1}return!1})(f.properties()[u.value],d.value,0,d.value.length-1)],all:{type:oi,overloads:[[[oi,oi],(f,[u,d])=>u.evaluate(f)&&d.evaluate(f)],[BA(oi),(f,u)=>{for(const d of u)if(!d.evaluate(f))return!1;return!0}]]},any:{type:oi,overloads:[[[oi,oi],(f,[u,d])=>u.evaluate(f)||d.evaluate(f)],[BA(oi),(f,u)=>{for(const d of u)if(d.evaluate(f))return!0;return!1}]]},"!":[oi,[oi],(f,[u])=>!u.evaluate(f)],"is-supported-script":[oi,[zi],(f,[u])=>{const d=f.globals&&f.globals.isSupportedScript;return!d||d(u.evaluate(f))}],upcase:[zi,[zi],(f,[u])=>u.evaluate(f).toUpperCase()],downcase:[zi,[zi],(f,[u])=>u.evaluate(f).toLowerCase()],concat:[zi,BA(qi),(f,u)=>u.map((d=>Fr(d.evaluate(f)))).join("")],"resolved-locale":[zi,[tc],(f,[u])=>u.evaluate(f).resolvedLocale()]});class Rd{constructor(u,d,b){this.expression=u,this._warningHistory={},this._evaluator=new xi,this._defaultValue=d?(function(M){if(M.type==="color"&&_p(M.default))return new Fi(0,0,0,0);switch(M.type){case"color":return Fi.parse(M.default)||null;case"padding":return go.parse(M.default)||null;case"numberArray":return ms.parse(M.default)||null;case"colorArray":return uo.parse(M.default)||null;case"variableAnchorOffsetCollection":return vo.parse(M.default)||null;case"projectionDefinition":return co.parse(M.default)||null;default:return M.default===void 0?null:M.default}})(d):null,this._enumValues=d&&d.type==="enum"?d.values:null,this._globalState=b}evaluateWithoutErrorHandling(u,d,b,M,k,R){return this._globalState&&(u=sl(u,this._globalState)),this._evaluator.globals=u,this._evaluator.feature=d,this._evaluator.featureState=b,this._evaluator.canonical=M,this._evaluator.availableImages=k||null,this._evaluator.formattedSection=R,this.expression.evaluate(this._evaluator)}evaluate(u,d,b,M,k,R){this._globalState&&(u=sl(u,this._globalState)),this._evaluator.globals=u,this._evaluator.feature=d||null,this._evaluator.featureState=b||null,this._evaluator.canonical=M,this._evaluator.availableImages=k||null,this._evaluator.formattedSection=R||null;try{const K=this.expression.evaluate(this._evaluator);if(K==null||typeof K=="number"&&K!=K)return this._defaultValue;if(this._enumValues&&!(K in this._enumValues))throw new yo(`Expected value to be one of ${Object.keys(this._enumValues).map((z=>JSON.stringify(z))).join(", ")}, but found ${JSON.stringify(K)} instead.`);return K}catch(K){return this._warningHistory[K.message]||(this._warningHistory[K.message]=!0,typeof console<"u"&&console.warn(K.message)),this._defaultValue}}}function $h(f){return Array.isArray(f)&&f.length>0&&typeof f[0]=="string"&&f[0]in uh}function Hh(f,u,d){const b=new Gn(uh,au,[],u?(function(k){const R={color:wl,string:zi,number:pn,enum:zi,boolean:oi,formatted:no,padding:Ls,numberArray:Ya,colorArray:rl,projectionDefinition:nA,resolvedImage:Io,variableAnchorOffsetCollection:iA};return k.type==="array"?Uo(R[k.value]||qi,k.length):R[k.type]})(u):void 0),M=b.parse(f,void 0,void 0,void 0,u&&u.type==="string"?{typeAnnotation:"coerce"}:void 0);return M?qh(new Rd(M,u,d)):Ah(b.errors)}class Bl{constructor(u,d,b){this.kind=u,this._styleExpression=d,this.isStateDependent=u!=="constant"&&!OA(d.expression),this.globalStateRefs=uu(d.expression),this._globalState=b}evaluateWithoutErrorHandling(u,d,b,M,k,R){return this._globalState&&(u=sl(u,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(u,d,b,M,k,R)}evaluate(u,d,b,M,k,R){return this._globalState&&(u=sl(u,this._globalState)),this._styleExpression.evaluate(u,d,b,M,k,R)}}class Zh{constructor(u,d,b,M,k){this.kind=u,this.zoomStops=b,this._styleExpression=d,this.isStateDependent=u!=="camera"&&!OA(d.expression),this.globalStateRefs=uu(d.expression),this.interpolationType=M,this._globalState=k}evaluateWithoutErrorHandling(u,d,b,M,k,R){return this._globalState&&(u=sl(u,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(u,d,b,M,k,R)}evaluate(u,d,b,M,k,R){return this._globalState&&(u=sl(u,this._globalState)),this._styleExpression.evaluate(u,d,b,M,k,R)}interpolationFactor(u,d,b){return this.interpolationType?wo.interpolationFactor(this.interpolationType,u,d,b):0}}function Dd(f,u,d){const b=Hh(f,u,d);if(b.result==="error")return b;const M=b.value.expression,k=ch(M);if(!k&&!lu(u))return Ah([new $o("","data expressions not supported")]);const R=Pu(M,["zoom"]);if(!R&&!Vm(u))return Ah([new $o("","zoom expressions not supported")]);const K=Vs(M);return K||R?K instanceof $o?Ah([K]):K instanceof wo&&!kd(u)?Ah([new $o("",'"interpolate" expressions cannot be used with this property')]):qh(K?new Zh(k?"camera":"composite",b.value,K.labels,K instanceof wo?K.interpolation:void 0,d):new Bl(k?"constant":"source",b.value,d)):Ah([new $o("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Is{constructor(u,d){this._parameters=u,this._specification=d,Li(this,IA(this._parameters,this._specification))}static deserialize(u){return new Is(u._parameters,u._specification)}static serialize(u){return{_parameters:u._parameters,_specification:u._specification}}}function Vs(f){let u=null;if(f instanceof Ei)u=Vs(f.result);else if(f instanceof Fh){for(const d of f.args)if(u=Vs(d),u)break}else(f instanceof qs||f instanceof wo)&&f.input instanceof Br&&f.input.name==="zoom"&&(u=f);return u instanceof $o||f.eachChild((d=>{const b=Vs(d);b instanceof $o?u=b:!u&&b?u=new $o("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):u&&b&&u!==b&&(u=new $o("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),u}function uu(f,u=new Set){return f instanceof Yh&&u.add(f.key),f.eachChild((d=>{uu(d,u)})),u}function sl(f,u){const{zoom:d,heatmapDensity:b,elevation:M,lineProgress:k,isSupportedScript:R,accumulated:K}=f??{};return{zoom:d,heatmapDensity:b,elevation:M,lineProgress:k,isSupportedScript:R,accumulated:K,globalState:u}}function Dc(f){if(f===!0||f===!1)return!0;if(!Array.isArray(f)||f.length===0)return!1;switch(f[0]){case"has":return f.length>=2&&f[1]!=="$id"&&f[1]!=="$type";case"in":return f.length>=3&&(typeof f[1]!="string"||Array.isArray(f[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return f.length!==3||Array.isArray(f[1])||Array.isArray(f[2]);case"any":case"all":for(const u of f.slice(1))if(!Dc(u)&&typeof u!="boolean")return!1;return!0;default:return!0}}const kA={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Ql(f,u){if(f==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};Dc(f)||(f=Pc(f));const d=Hh(f,kA,u);if(d.result==="error")throw new Error(d.value.map((b=>`${b.key}: ${b.message}`)).join(", "));return{filter:(b,M,k)=>d.value.evaluate(b,M,{},k),needGeometry:wf(f),getGlobalStateRefs:()=>uu(d.value.expression)}}function Uu(f,u){return f<u?-1:f>u?1:0}function wf(f){if(!Array.isArray(f))return!1;if(f[0]==="within"||f[0]==="distance")return!0;for(let u=1;u<f.length;u++)if(wf(f[u]))return!0;return!1}function Pc(f){if(!f)return!0;const u=f[0];return f.length<=1?u!=="any":u==="=="?hh(f[1],f[2],"=="):u==="!="?bo(hh(f[1],f[2],"==")):u==="<"||u===">"||u==="<="||u===">="?hh(f[1],f[2],u):u==="any"?(d=f.slice(1),["any"].concat(d.map(Pc))):u==="all"?["all"].concat(f.slice(1).map(Pc)):u==="none"?["all"].concat(f.slice(1).map(Pc).map(bo)):u==="in"?Pd(f[1],f.slice(2)):u==="!in"?bo(Pd(f[1],f.slice(2))):u==="has"?ma(f[1]):u!=="!has"||bo(ma(f[1]));var d}function hh(f,u,d){switch(f){case"$type":return[`filter-type-${d}`,u];case"$id":return[`filter-id-${d}`,u];default:return[`filter-${d}`,f,u]}}function Pd(f,u){if(u.length===0)return!1;switch(f){case"$type":return["filter-type-in",["literal",u]];case"$id":return["filter-id-in",["literal",u]];default:return u.length>200&&!u.some((d=>typeof d!=typeof u[0]))?["filter-in-large",f,["literal",u.sort(Uu)]]:["filter-in-small",f,["literal",u]]}}function ma(f){switch(f){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",f]}}function bo(f){return["!",f]}function zr(f){const u=typeof f;if(u==="number"||u==="boolean"||u==="string"||f==null)return JSON.stringify(f);if(Array.isArray(f)){let M="[";for(const k of f)M+=`${zr(k)},`;return`${M}]`}const d=Object.keys(f).sort();let b="{";for(let M=0;M<d.length;M++)b+=`${JSON.stringify(d[M])}:${zr(f[d[M]])},`;return`${b}}`}function dh(f){let u="";for(const d of Xn)u+=`/${zr(f[d])}`;return u}function cu(f){const u=f.value;return u?[new rn(f.key,u,"constants have been deprecated as of v8")]:[]}function gs(f){return f instanceof Number||f instanceof String||f instanceof Boolean?f.valueOf():f}function Yl(f){if(Array.isArray(f))return f.map(Yl);if(f instanceof Object&&!(f instanceof Number||f instanceof String||f instanceof Boolean)){const u={};for(const d in f)u[d]=Yl(f[d]);return u}return gs(f)}function al(f){const u=f.key,d=f.value,b=f.valueSpec||{},M=f.objectElementValidators||{},k=f.style,R=f.styleSpec,K=f.validateSpec;let z=[];const ee=sr(d);if(ee!=="object")return[new rn(u,d,`object expected, ${ee} found`)];for(const ne in d){const ce=ne.split(".")[0],_e=Ss(b,ce)||b["*"];let Se;if(Ss(M,ce))Se=M[ce];else if(Ss(b,ce))Se=K;else if(M["*"])Se=M["*"];else{if(!b["*"]){z.push(new rn(u,d[ne],`unknown property "${ne}"`));continue}Se=K}z=z.concat(Se({key:(u&&`${u}.`)+ne,value:d[ne],valueSpec:_e,style:k,styleSpec:R,object:d,objectKey:ne,validateSpec:K},d))}for(const ne in b)M[ne]||b[ne].required&&b[ne].default===void 0&&d[ne]===void 0&&z.push(new rn(u,d,`missing required property "${ne}"`));return z}function sA(f){const u=f.value,d=f.valueSpec,b=f.style,M=f.styleSpec,k=f.key,R=f.arrayElementValidator||f.validateSpec;if(sr(u)!=="array")return[new rn(k,u,`array expected, ${sr(u)} found`)];if(d.length&&u.length!==d.length)return[new rn(k,u,`array length ${d.length} expected, length ${u.length} found`)];if(d["min-length"]&&u.length<d["min-length"])return[new rn(k,u,`array length at least ${d["min-length"]} expected, length ${u.length} found`)];let K={type:d.value,values:d.values};M.$version<7&&(K.function=d.function),sr(d.value)==="object"&&(K=d.value);let z=[];for(let ee=0;ee<u.length;ee++)z=z.concat(R({array:u,arrayIndex:ee,value:u[ee],valueSpec:K,validateSpec:f.validateSpec,style:b,styleSpec:M,key:`${k}[${ee}]`}));return z}function TA(f){const u=f.key,d=f.value,b=f.valueSpec;let M=sr(d);return M==="number"&&d!=d&&(M="NaN"),M!=="number"?[new rn(u,d,`number expected, ${M} found`)]:"minimum"in b&&d<b.minimum?[new rn(u,d,`${d} is less than the minimum value ${b.minimum}`)]:"maximum"in b&&d>b.maximum?[new rn(u,d,`${d} is greater than the maximum value ${b.maximum}`)]:[]}function Qe(f){const u=f.valueSpec,d=gs(f.value.type);let b,M,k,R={};const K=d!=="categorical"&&f.value.property===void 0,z=!K,ee=sr(f.value.stops)==="array"&&sr(f.value.stops[0])==="array"&&sr(f.value.stops[0][0])==="object",ne=al({key:f.key,value:f.value,valueSpec:f.styleSpec.function,validateSpec:f.validateSpec,style:f.style,styleSpec:f.styleSpec,objectElementValidators:{stops:function(Se){if(d==="identity")return[new rn(Se.key,Se.value,'identity function may not have a "stops" property')];let ke=[];const ze=Se.value;return ke=ke.concat(sA({key:Se.key,value:ze,valueSpec:Se.valueSpec,validateSpec:Se.validateSpec,style:Se.style,styleSpec:Se.styleSpec,arrayElementValidator:ce})),sr(ze)==="array"&&ze.length===0&&ke.push(new rn(Se.key,ze,"array must have at least one stop")),ke},default:function(Se){return Se.validateSpec({key:Se.key,value:Se.value,valueSpec:u,validateSpec:Se.validateSpec,style:Se.style,styleSpec:Se.styleSpec})}}});return d==="identity"&&K&&ne.push(new rn(f.key,f.value,'missing required property "property"')),d==="identity"||f.value.stops||ne.push(new rn(f.key,f.value,'missing required property "stops"')),d==="exponential"&&f.valueSpec.expression&&!kd(f.valueSpec)&&ne.push(new rn(f.key,f.value,"exponential functions not supported")),f.styleSpec.$version>=8&&(z&&!lu(f.valueSpec)?ne.push(new rn(f.key,f.value,"property functions not supported")):K&&!Vm(f.valueSpec)&&ne.push(new rn(f.key,f.value,"zoom functions not supported"))),d!=="categorical"&&!ee||f.value.property!==void 0||ne.push(new rn(f.key,f.value,'"property" property is required')),ne;function ce(Se){let ke=[];const ze=Se.value,$e=Se.key;if(sr(ze)!=="array")return[new rn($e,ze,`array expected, ${sr(ze)} found`)];if(ze.length!==2)return[new rn($e,ze,`array length 2 expected, length ${ze.length} found`)];if(ee){if(sr(ze[0])!=="object")return[new rn($e,ze,`object expected, ${sr(ze[0])} found`)];if(ze[0].zoom===void 0)return[new rn($e,ze,"object stop key must have zoom")];if(ze[0].value===void 0)return[new rn($e,ze,"object stop key must have value")];if(k&&k>gs(ze[0].zoom))return[new rn($e,ze[0].zoom,"stop zoom values must appear in ascending order")];gs(ze[0].zoom)!==k&&(k=gs(ze[0].zoom),M=void 0,R={}),ke=ke.concat(al({key:`${$e}[0]`,value:ze[0],valueSpec:{zoom:{}},validateSpec:Se.validateSpec,style:Se.style,styleSpec:Se.styleSpec,objectElementValidators:{zoom:TA,value:_e}}))}else ke=ke.concat(_e({key:`${$e}[0]`,value:ze[0],validateSpec:Se.validateSpec,style:Se.style,styleSpec:Se.styleSpec},ze));return $h(Yl(ze[1]))?ke.concat([new rn(`${$e}[1]`,ze[1],"expressions are not allowed in function stops.")]):ke.concat(Se.validateSpec({key:`${$e}[1]`,value:ze[1],valueSpec:u,validateSpec:Se.validateSpec,style:Se.style,styleSpec:Se.styleSpec}))}function _e(Se,ke){const ze=sr(Se.value),$e=gs(Se.value),it=Se.value!==null?Se.value:ke;if(b){if(ze!==b)return[new rn(Se.key,it,`${ze} stop domain type must match previous stop domain type ${b}`)]}else b=ze;if(ze!=="number"&&ze!=="string"&&ze!=="boolean")return[new rn(Se.key,it,"stop domain value must be a number, string, or boolean")];if(ze!=="number"&&d!=="categorical"){let Et=`number expected, ${ze} found`;return lu(u)&&d===void 0&&(Et+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new rn(Se.key,it,Et)]}return d!=="categorical"||ze!=="number"||isFinite($e)&&Math.floor($e)===$e?d!=="categorical"&&ze==="number"&&M!==void 0&&$e<M?[new rn(Se.key,it,"stop domain values must appear in ascending order")]:(M=$e,d==="categorical"&&$e in R?[new rn(Se.key,it,"stop domain values must be unique")]:(R[$e]=!0,[])):[new rn(Se.key,it,`integer expected, found ${$e}`)]}}function lc(f){const u=(f.expressionContext==="property"?Dd:Hh)(Yl(f.value),f.valueSpec);if(u.result==="error")return u.value.map((b=>new rn(`${f.key}${b.key}`,f.value,b.message)));const d=u.value.expression||u.value._styleExpression.expression;if(f.expressionContext==="property"&&f.propertyKey==="text-font"&&!d.outputDefined())return[new rn(f.key,f.value,`Invalid data expression for "${f.propertyKey}". Output values must be contained as literals within the expression.`)];if(f.expressionContext==="property"&&f.propertyType==="layout"&&!OA(d))return[new rn(f.key,f.value,'"feature-state" data expressions are not supported with layout properties.')];if(f.expressionContext==="filter"&&!OA(d))return[new rn(f.key,f.value,'"feature-state" data expressions are not supported with filters.')];if(f.expressionContext&&f.expressionContext.indexOf("cluster")===0){if(!Pu(d,["zoom","feature-state"]))return[new rn(f.key,f.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(f.expressionContext==="cluster-initial"&&!ch(d))return[new rn(f.key,f.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function RA(f){const u=f.key,d=f.value,b=sr(d);return b!=="string"?[new rn(u,d,`color expected, ${b} found`)]:Fi.parse(String(d))?[]:[new rn(u,d,`color expected, "${d}" found`)]}function ll(f){const u=f.key,d=f.value,b=f.valueSpec,M=[];return Array.isArray(b.values)?b.values.indexOf(gs(d))===-1&&M.push(new rn(u,d,`expected one of [${b.values.join(", ")}], ${JSON.stringify(d)} found`)):Object.keys(b.values).indexOf(gs(d))===-1&&M.push(new rn(u,d,`expected one of [${Object.keys(b.values).join(", ")}], ${JSON.stringify(d)} found`)),M}function br(f){return Dc(Yl(f.value))?lc(Li({},f,{expressionContext:"filter",valueSpec:{value:"boolean"}})):aA(f)}function aA(f){const u=f.value,d=f.key;if(sr(u)!=="array")return[new rn(d,u,`array expected, ${sr(u)} found`)];const b=f.styleSpec;let M,k=[];if(u.length<1)return[new rn(d,u,"filter array must have at least 1 element")];switch(k=k.concat(ll({key:`${d}[0]`,value:u[0],valueSpec:b.filter_operator,style:f.style,styleSpec:f.styleSpec})),gs(u[0])){case"<":case"<=":case">":case">=":u.length>=2&&gs(u[1])==="$type"&&k.push(new rn(d,u,`"$type" cannot be use with operator "${u[0]}"`));case"==":case"!=":u.length!==3&&k.push(new rn(d,u,`filter array for operator "${u[0]}" must have 3 elements`));case"in":case"!in":u.length>=2&&(M=sr(u[1]),M!=="string"&&k.push(new rn(`${d}[1]`,u[1],`string expected, ${M} found`)));for(let R=2;R<u.length;R++)M=sr(u[R]),gs(u[1])==="$type"?k=k.concat(ll({key:`${d}[${R}]`,value:u[R],valueSpec:b.geometry_type,style:f.style,styleSpec:f.styleSpec})):M!=="string"&&M!=="number"&&M!=="boolean"&&k.push(new rn(`${d}[${R}]`,u[R],`string, number, or boolean expected, ${M} found`));break;case"any":case"all":case"none":for(let R=1;R<u.length;R++)k=k.concat(aA({key:`${d}[${R}]`,value:u[R],style:f.style,styleSpec:f.styleSpec}));break;case"has":case"!has":M=sr(u[1]),u.length!==2?k.push(new rn(d,u,`filter array for "${u[0]}" operator must have 2 elements`)):M!=="string"&&k.push(new rn(`${d}[1]`,u[1],`string expected, ${M} found`))}return k}function DA(f,u){const d=f.key,b=f.validateSpec,M=f.style,k=f.styleSpec,R=f.value,K=f.objectKey,z=k[`${u}_${f.layerType}`];if(!z)return[];const ee=K.match(/^(.*)-transition$/);if(u==="paint"&&ee&&z[ee[1]]&&z[ee[1]].transition)return b({key:d,value:R,valueSpec:k.transition,style:M,styleSpec:k});const ne=f.valueSpec||z[K];if(!ne)return[new rn(d,R,`unknown property "${K}"`)];let ce;if(sr(R)==="string"&&lu(ne)&&!ne.tokens&&(ce=/^{([^}]+)}$/.exec(R)))return[new rn(d,R,`"${K}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(ce[1])} }\`.`)];const _e=[];return f.layerType==="symbol"&&K==="text-font"&&_p(Yl(R))&&gs(R.type)==="identity"&&_e.push(new rn(d,R,'"text-font" does not support identity functions')),_e.concat(b({key:f.key,value:R,valueSpec:ne,style:M,styleSpec:k,expressionContext:"property",propertyType:u,propertyKey:K}))}function uc(f){return DA(f,"paint")}function PA(f){return DA(f,"layout")}function xp(f){let u=[];const d=f.value,b=f.key,M=f.style,k=f.styleSpec;if(sr(d)!=="object")return[new rn(b,d,`object expected, ${sr(d)} found`)];d.type||d.ref||u.push(new rn(b,d,'either "type" or "ref" is required'));let R=gs(d.type);const K=gs(d.ref);if(d.id){const z=gs(d.id);for(let ee=0;ee<f.arrayIndex;ee++){const ne=M.layers[ee];gs(ne.id)===z&&u.push(new rn(b,d.id,`duplicate layer id "${d.id}", previously used at line ${ne.id.__line__}`))}}if("ref"in d){let z;["type","source","source-layer","filter","layout"].forEach((ee=>{ee in d&&u.push(new rn(b,d[ee],`"${ee}" is prohibited for ref layers`))})),M.layers.forEach((ee=>{gs(ee.id)===K&&(z=ee)})),z?z.ref?u.push(new rn(b,d.ref,"ref cannot reference another ref layer")):R=gs(z.type):u.push(new rn(b,d.ref,`ref layer "${K}" not found`))}else if(R!=="background")if(d.source){const z=M.sources&&M.sources[d.source],ee=z&&gs(z.type);z?ee==="vector"&&R==="raster"?u.push(new rn(b,d.source,`layer "${d.id}" requires a raster source`)):ee!=="raster-dem"&&R==="hillshade"||ee!=="raster-dem"&&R==="color-relief"?u.push(new rn(b,d.source,`layer "${d.id}" requires a raster-dem source`)):ee==="raster"&&R!=="raster"?u.push(new rn(b,d.source,`layer "${d.id}" requires a vector source`)):ee!=="vector"||d["source-layer"]?ee==="raster-dem"&&R!=="hillshade"&&R!=="color-relief"?u.push(new rn(b,d.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):R!=="line"||!d.paint||!d.paint["line-gradient"]||ee==="geojson"&&z.lineMetrics||u.push(new rn(b,d,`layer "${d.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):u.push(new rn(b,d,`layer "${d.id}" must specify a "source-layer"`)):u.push(new rn(b,d.source,`source "${d.source}" not found`))}else u.push(new rn(b,d,'missing required property "source"'));return u=u.concat(al({key:b,value:d,valueSpec:k.layer,style:f.style,styleSpec:f.styleSpec,validateSpec:f.validateSpec,objectElementValidators:{"*":()=>[],type:()=>f.validateSpec({key:`${b}.type`,value:d.type,valueSpec:k.layer.type,style:f.style,styleSpec:f.styleSpec,validateSpec:f.validateSpec,object:d,objectKey:"type"}),filter:br,layout:z=>al({layer:d,key:z.key,value:z.value,style:z.style,styleSpec:z.styleSpec,validateSpec:z.validateSpec,objectElementValidators:{"*":ee=>PA(Li({layerType:R},ee))}}),paint:z=>al({layer:d,key:z.key,value:z.value,style:z.style,styleSpec:z.styleSpec,validateSpec:z.validateSpec,objectElementValidators:{"*":ee=>uc(Li({layerType:R},ee))}})}})),u}function cc(f){const u=f.value,d=f.key,b=sr(u);return b!=="string"?[new rn(d,u,`string expected, ${b} found`)]:[]}const Mp={promoteId:function({key:f,value:u}){if(sr(u)==="string")return cc({key:f,value:u});{const d=[];for(const b in u)d.push(...cc({key:`${f}.${b}`,value:u[b]}));return d}}};function fh(f){const u=f.value,d=f.key,b=f.styleSpec,M=f.style,k=f.validateSpec;if(!u.type)return[new rn(d,u,'"type" is required')];const R=gs(u.type);let K;switch(R){case"vector":case"raster":return K=al({key:d,value:u,valueSpec:b[`source_${R.replace("-","_")}`],style:f.style,styleSpec:b,objectElementValidators:Mp,validateSpec:k}),K;case"raster-dem":return K=(function(z){var ee;const ne=(ee=z.sourceName)!==null&&ee!==void 0?ee:"",ce=z.value,_e=z.styleSpec,Se=_e.source_raster_dem,ke=z.style;let ze=[];const $e=sr(ce);if(ce===void 0)return ze;if($e!=="object")return ze.push(new rn("source_raster_dem",ce,`object expected, ${$e} found`)),ze;const it=gs(ce.encoding)==="custom",Et=["redFactor","greenFactor","blueFactor","baseShift"],ut=z.value.encoding?`"${z.value.encoding}"`:"Default";for(const pt in ce)!it&&Et.includes(pt)?ze.push(new rn(pt,ce[pt],`In "${ne}": "${pt}" is only valid when "encoding" is set to "custom". ${ut} encoding found`)):Se[pt]?ze=ze.concat(z.validateSpec({key:pt,value:ce[pt],valueSpec:Se[pt],validateSpec:z.validateSpec,style:ke,styleSpec:_e})):ze.push(new rn(pt,ce[pt],`unknown property "${pt}"`));return ze})({sourceName:d,value:u,style:f.style,styleSpec:b,validateSpec:k}),K;case"geojson":if(K=al({key:d,value:u,valueSpec:b.source_geojson,style:M,styleSpec:b,validateSpec:k,objectElementValidators:Mp}),u.cluster)for(const z in u.clusterProperties){const[ee,ne]=u.clusterProperties[z],ce=typeof ee=="string"?[ee,["accumulated"],["get",z]]:ee;K.push(...lc({key:`${d}.${z}.map`,value:ne,expressionContext:"cluster-map"})),K.push(...lc({key:`${d}.${z}.reduce`,value:ce,expressionContext:"cluster-reduce"}))}return K;case"video":return al({key:d,value:u,valueSpec:b.source_video,style:M,validateSpec:k,styleSpec:b});case"image":return al({key:d,value:u,valueSpec:b.source_image,style:M,validateSpec:k,styleSpec:b});case"canvas":return[new rn(d,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ll({key:`${d}.type`,value:u.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function Ha(f){const u=f.value,d=f.styleSpec,b=d.light,M=f.style;let k=[];const R=sr(u);if(u===void 0)return k;if(R!=="object")return k=k.concat([new rn("light",u,`object expected, ${R} found`)]),k;for(const K in u){const z=K.match(/^(.*)-transition$/);k=k.concat(z&&b[z[1]]&&b[z[1]].transition?f.validateSpec({key:K,value:u[K],valueSpec:d.transition,validateSpec:f.validateSpec,style:M,styleSpec:d}):b[K]?f.validateSpec({key:K,value:u[K],valueSpec:b[K],validateSpec:f.validateSpec,style:M,styleSpec:d}):[new rn(K,u[K],`unknown property "${K}"`)])}return k}function Ol(f){const u=f.value,d=f.styleSpec,b=d.sky,M=f.style,k=sr(u);if(u===void 0)return[];if(k!=="object")return[new rn("sky",u,`object expected, ${k} found`)];let R=[];for(const K in u)R=R.concat(b[K]?f.validateSpec({key:K,value:u[K],valueSpec:b[K],style:M,styleSpec:d}):[new rn(K,u[K],`unknown property "${K}"`)]);return R}function v0(f){const u=f.value,d=f.styleSpec,b=d.terrain,M=f.style;let k=[];const R=sr(u);if(u===void 0)return k;if(R!=="object")return k=k.concat([new rn("terrain",u,`object expected, ${R} found`)]),k;for(const K in u)k=k.concat(b[K]?f.validateSpec({key:K,value:u[K],valueSpec:b[K],validateSpec:f.validateSpec,style:M,styleSpec:d}):[new rn(K,u[K],`unknown property "${K}"`)]);return k}function k1(f){let u=[];const d=f.value,b=f.key;if(Array.isArray(d)){const M=[],k=[];for(const R in d)d[R].id&&M.includes(d[R].id)&&u.push(new rn(b,d,`all the sprites' ids must be unique, but ${d[R].id} is duplicated`)),M.push(d[R].id),d[R].url&&k.includes(d[R].url)&&u.push(new rn(b,d,`all the sprites' URLs must be unique, but ${d[R].url} is duplicated`)),k.push(d[R].url),u=u.concat(al({key:`${b}[${R}]`,value:d[R],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:f.validateSpec}));return u}return cc({key:b,value:d})}function T1(f){return u=f.value,u&&u.constructor===Object?[]:[new rn(f.key,f.value,`object expected, ${sr(f.value)} found`)];var u}const R1={"*":()=>[],array:sA,boolean:function(f){const u=f.value,d=f.key,b=sr(u);return b!=="boolean"?[new rn(d,u,`boolean expected, ${b} found`)]:[]},number:TA,color:RA,constants:cu,enum:ll,filter:br,function:Qe,layer:xp,object:al,source:fh,light:Ha,sky:Ol,terrain:v0,projection:function(f){const u=f.value,d=f.styleSpec,b=d.projection,M=f.style,k=sr(u);if(u===void 0)return[];if(k!=="object")return[new rn("projection",u,`object expected, ${k} found`)];let R=[];for(const K in u)R=R.concat(b[K]?f.validateSpec({key:K,value:u[K],valueSpec:b[K],style:M,styleSpec:d}):[new rn(K,u[K],`unknown property "${K}"`)]);return R},projectionDefinition:function(f){const u=f.key;let d=f.value;d=d instanceof String?d.valueOf():d;const b=sr(d);return b!=="array"||(function(M){return Array.isArray(M)&&M.length===3&&typeof M[0]=="string"&&typeof M[1]=="string"&&typeof M[2]=="number"})(d)||(function(M){return!!["interpolate","step","literal"].includes(M[0])})(d)?["array","string"].includes(b)?[]:[new rn(u,d,`projection expected, invalid type "${b}" found`)]:[new rn(u,d,`projection expected, invalid array ${JSON.stringify(d)} found`)]},string:cc,formatted:function(f){return cc(f).length===0?[]:lc(f)},resolvedImage:function(f){return cc(f).length===0?[]:lc(f)},padding:function(f){const u=f.key,d=f.value;if(sr(d)==="array"){if(d.length<1||d.length>4)return[new rn(u,d,`padding requires 1 to 4 values; ${d.length} values found`)];const b={type:"number"};let M=[];for(let k=0;k<d.length;k++)M=M.concat(f.validateSpec({key:`${u}[${k}]`,value:d[k],validateSpec:f.validateSpec,valueSpec:b}));return M}return TA({key:u,value:d,valueSpec:{}})},numberArray:function(f){const u=f.key,d=f.value;if(sr(d)==="array"){const b={type:"number"};if(d.length<1)return[new rn(u,d,"array length at least 1 expected, length 0 found")];let M=[];for(let k=0;k<d.length;k++)M=M.concat(f.validateSpec({key:`${u}[${k}]`,value:d[k],validateSpec:f.validateSpec,valueSpec:b}));return M}return TA({key:u,value:d,valueSpec:{}})},colorArray:function(f){const u=f.key,d=f.value;if(sr(d)==="array"){if(d.length<1)return[new rn(u,d,"array length at least 1 expected, length 0 found")];let b=[];for(let M=0;M<d.length;M++)b=b.concat(RA({key:`${u}[${M}]`,value:d[M]}));return b}return RA({key:u,value:d})},variableAnchorOffsetCollection:function(f){const u=f.key,d=f.value,b=sr(d),M=f.styleSpec;if(b!=="array"||d.length<1||d.length%2!=0)return[new rn(u,d,"variableAnchorOffsetCollection requires a non-empty array of even length")];let k=[];for(let R=0;R<d.length;R+=2)k=k.concat(ll({key:`${u}[${R}]`,value:d[R],valueSpec:M.layout_symbol["text-anchor"]})),k=k.concat(sA({key:`${u}[${R+1}]`,value:d[R+1],valueSpec:{length:2,value:"number"},validateSpec:f.validateSpec,style:f.style,styleSpec:M}));return k},sprite:k1,state:T1};function $s(f){const u=f.value,d=f.valueSpec,b=f.styleSpec;return f.validateSpec=$s,d.expression&&_p(gs(u))?Qe(f):d.expression&&$h(Yl(u))?lc(f):d.type&&R1[d.type]?R1[d.type](f):al(Li({},f,{valueSpec:d.type?b[d.type]:d}))}function Uc(f){const u=f.value,d=f.key,b=cc(f);return b.length||(u.indexOf("{fontstack}")===-1&&b.push(new rn(d,u,'"glyphs" url must include a "{fontstack}" token')),u.indexOf("{range}")===-1&&b.push(new rn(d,u,'"glyphs" url must include a "{range}" token'))),b}function Ra(f,u=dt){let d=[];return d=d.concat($s({key:"",value:f,valueSpec:u.$root,styleSpec:u,style:f,validateSpec:$s,objectElementValidators:{glyphs:Uc,"*":()=>[]}})),f.constants&&(d=d.concat(cu({key:"constants",value:f.constants}))),ql(d)}function Za(f){return function(u){return f(Object.assign({},u,{validateSpec:$s}))}}function ql(f){return[].concat(f).sort(((u,d)=>u.line-d.line))}function Da(f){return function(...u){return ql(f.apply(this,u))}}Ra.source=Da(Za(fh)),Ra.sprite=Da(Za(k1)),Ra.glyphs=Da(Za(Uc)),Ra.light=Da(Za(Ha)),Ra.sky=Da(Za(Ol)),Ra.terrain=Da(Za(v0)),Ra.state=Da(Za(T1)),Ra.layer=Da(Za(xp)),Ra.filter=Da(Za(br)),Ra.paintProperty=Da(Za(uc)),Ra.layoutProperty=Da(Za(PA));const Ud=dt,Kc=Ra,D1=Kc.light,wp=Kc.sky,Ac=Kc.paintProperty,ph=Kc.layoutProperty;function Hm(f,u){let d=!1;if(u&&u.length)for(const b of u)f.fire(new xt(new Error(b.message))),d=!0;return d}class UA{constructor(u,d,b){const M=this.cells=[];if(u instanceof ArrayBuffer){this.arrayBuffer=u;const R=new Int32Array(this.arrayBuffer);u=R[0],this.d=(d=R[1])+2*(b=R[2]);for(let z=0;z<this.d*this.d;z++){const ee=R[3+z],ne=R[3+z+1];M.push(ee===ne?null:R.subarray(ee,ne))}const K=R[3+M.length+1];this.keys=R.subarray(R[3+M.length],K),this.bboxes=R.subarray(K),this.insert=this._insertReadonly}else{this.d=d+2*b;for(let R=0;R<this.d*this.d;R++)M.push([]);this.keys=[],this.bboxes=[]}this.n=d,this.extent=u,this.padding=b,this.scale=d/u,this.uid=0;const k=b/d*u;this.min=-k,this.max=u+k}insert(u,d,b,M,k){this._forEachCell(d,b,M,k,this._insertCell,this.uid++,void 0,void 0),this.keys.push(u),this.bboxes.push(d),this.bboxes.push(b),this.bboxes.push(M),this.bboxes.push(k)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(u,d,b,M,k,R){this.cells[k].push(R)}query(u,d,b,M,k){const R=this.min,K=this.max;if(u<=R&&d<=R&&K<=b&&K<=M&&!k)return Array.prototype.slice.call(this.keys);{const z=[];return this._forEachCell(u,d,b,M,this._queryCell,z,{},k),z}}_queryCell(u,d,b,M,k,R,K,z){const ee=this.cells[k];if(ee!==null){const ne=this.keys,ce=this.bboxes;for(let _e=0;_e<ee.length;_e++){const Se=ee[_e];if(K[Se]===void 0){const ke=4*Se;(z?z(ce[ke+0],ce[ke+1],ce[ke+2],ce[ke+3]):u<=ce[ke+2]&&d<=ce[ke+3]&&b>=ce[ke+0]&&M>=ce[ke+1])?(K[Se]=!0,R.push(ne[Se])):K[Se]=!1}}}}_forEachCell(u,d,b,M,k,R,K,z){const ee=this._convertToCellCoord(u),ne=this._convertToCellCoord(d),ce=this._convertToCellCoord(b),_e=this._convertToCellCoord(M);for(let Se=ee;Se<=ce;Se++)for(let ke=ne;ke<=_e;ke++){const ze=this.d*ke+Se;if((!z||z(this._convertFromCellCoord(Se),this._convertFromCellCoord(ke),this._convertFromCellCoord(Se+1),this._convertFromCellCoord(ke+1)))&&k.call(this,u,d,b,M,ze,R,K,z))return}}_convertFromCellCoord(u){return(u-this.padding)/this.scale}_convertToCellCoord(u){return Math.max(0,Math.min(this.d-1,Math.floor(u*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const u=this.cells,d=3+this.cells.length+1+1;let b=0;for(let R=0;R<this.cells.length;R++)b+=this.cells[R].length;const M=new Int32Array(d+b+this.keys.length+this.bboxes.length);M[0]=this.extent,M[1]=this.n,M[2]=this.padding;let k=d;for(let R=0;R<u.length;R++){const K=u[R];M[3+R]=k,M.set(K,k),k+=K.length}return M[3+u.length]=k,M.set(this.keys,k),k+=this.keys.length,M[3+u.length+1]=k,M.set(this.bboxes,k),k+=this.bboxes.length,M.buffer}static serialize(u,d){const b=u.toArrayBuffer();return d&&d.push(b),{buffer:b}}static deserialize(u){return new UA(u.buffer)}}const KA={};function Qn(f,u,d={}){if(KA[f])throw new Error(`${f} is already registered.`);Object.defineProperty(u,"_classRegistryKey",{value:f,writeable:!1}),KA[f]={klass:u,omit:d.omit||[],shallow:d.shallow||[]}}Qn("Object",Object),Qn("Set",Set),Qn("TransferableGridIndex",UA),Qn("Color",Fi),Qn("Error",Error),Qn("AJAXError",We),Qn("ResolvedImage",Es),Qn("StylePropertyFunction",Is),Qn("StyleExpression",Rd,{omit:["_evaluator"]}),Qn("ZoomDependentExpression",Zh),Qn("ZoomConstantExpression",Bl),Qn("CompoundExpression",Br,{omit:["_evaluate"]});for(const f in uh)uh[f]._classRegistryKey||Qn(`Expression_${f}`,uh[f]);function Sp(f){return f&&typeof ArrayBuffer<"u"&&(f instanceof ArrayBuffer||f.constructor&&f.constructor.name==="ArrayBuffer")}function Kd(f){return f.$name||f.constructor._classRegistryKey}function Ep(f){return!(function(u){if(u===null||typeof u!="object")return!1;const d=Kd(u);return!(!d||d==="Object")})(f)&&(f==null||typeof f=="boolean"||typeof f=="number"||typeof f=="string"||f instanceof Boolean||f instanceof Number||f instanceof String||f instanceof Date||f instanceof RegExp||f instanceof Blob||f instanceof Error||Sp(f)||Wn(f)||ArrayBuffer.isView(f)||f instanceof ImageData)}function LA(f,u){if(Ep(f))return(Sp(f)||Wn(f))&&u&&u.push(f),ArrayBuffer.isView(f)&&u&&u.push(f.buffer),f instanceof ImageData&&u&&u.push(f.data.buffer),f;if(Array.isArray(f)){const k=[];for(const R of f)k.push(LA(R,u));return k}if(typeof f!="object")throw new Error("can't serialize object of type "+typeof f);const d=Kd(f);if(!d)throw new Error(`can't serialize object of unregistered class ${f.constructor.name}`);if(!KA[d])throw new Error(`${d} is not registered.`);const{klass:b}=KA[d],M=b.serialize?b.serialize(f,u):{};if(b.serialize){if(u&&M===u[u.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const k in f){if(!f.hasOwnProperty(k)||KA[d].omit.indexOf(k)>=0)continue;const R=f[k];M[k]=KA[d].shallow.indexOf(k)>=0?R:LA(R,u)}f instanceof Error&&(M.message=f.message)}if(M.$name)throw new Error("$name property is reserved for worker serialization logic.");return d!=="Object"&&(M.$name=d),M}function Xh(f){if(Ep(f))return f;if(Array.isArray(f))return f.map(Xh);if(typeof f!="object")throw new Error("can't deserialize object of type "+typeof f);const u=Kd(f)||"Object";if(!KA[u])throw new Error(`can't deserialize unregistered class ${u}`);const{klass:d}=KA[u];if(!d)throw new Error(`can't deserialize unregistered class ${u}`);if(d.deserialize)return d.deserialize(f);const b=Object.create(d.prototype);for(const M of Object.keys(f)){if(M==="$name")continue;const k=f[M];b[M]=KA[u].shallow.indexOf(M)>=0?k:Xh(k)}return b}class hc{constructor(){this.first=!0}update(u,d){const b=Math.floor(u);return this.first?(this.first=!1,this.lastIntegerZoom=b,this.lastIntegerZoomTime=0,this.lastZoom=u,this.lastFloorZoom=b,!0):(this.lastFloorZoom>b?(this.lastIntegerZoom=b+1,this.lastIntegerZoomTime=d):this.lastFloorZoom<b&&(this.lastIntegerZoom=b,this.lastIntegerZoomTime=d),u!==this.lastZoom&&(this.lastZoom=u,this.lastFloorZoom=b,!0))}}const er={"Latin-1 Supplement":f=>f>=128&&f<=255,"Hangul Jamo":f=>f>=4352&&f<=4607,Khmer:f=>f>=6016&&f<=6143,"General Punctuation":f=>f>=8192&&f<=8303,"Letterlike Symbols":f=>f>=8448&&f<=8527,"Number Forms":f=>f>=8528&&f<=8591,"Miscellaneous Technical":f=>f>=8960&&f<=9215,"Control Pictures":f=>f>=9216&&f<=9279,"Optical Character Recognition":f=>f>=9280&&f<=9311,"Enclosed Alphanumerics":f=>f>=9312&&f<=9471,"Geometric Shapes":f=>f>=9632&&f<=9727,"Miscellaneous Symbols":f=>f>=9728&&f<=9983,"Miscellaneous Symbols and Arrows":f=>f>=11008&&f<=11263,"Ideographic Description Characters":f=>f>=12272&&f<=12287,"CJK Symbols and Punctuation":f=>f>=12288&&f<=12351,Hiragana:f=>f>=12352&&f<=12447,Katakana:f=>f>=12448&&f<=12543,Kanbun:f=>f>=12688&&f<=12703,"CJK Strokes":f=>f>=12736&&f<=12783,"Enclosed CJK Letters and Months":f=>f>=12800&&f<=13055,"CJK Compatibility":f=>f>=13056&&f<=13311,"Yijing Hexagram Symbols":f=>f>=19904&&f<=19967,"CJK Unified Ideographs":f=>f>=19968&&f<=40959,"Hangul Syllables":f=>f>=44032&&f<=55215,"Private Use Area":f=>f>=57344&&f<=63743,"Vertical Forms":f=>f>=65040&&f<=65055,"CJK Compatibility Forms":f=>f>=65072&&f<=65103,"Small Form Variants":f=>f>=65104&&f<=65135,"Halfwidth and Fullwidth Forms":f=>f>=65280&&f<=65519};function Zm(f){for(const u of f)if(ul(u.charCodeAt(0)))return!0;return!1}function Bp(f){for(const u of f)if(!Ld(u.charCodeAt(0)))return!1;return!0}function lA(f){const u=f.map((d=>{try{return new RegExp(`\\p{sc=${d}}`,"u").source}catch{return null}})).filter((d=>d));return new RegExp(u.join("|"),"u")}const Ku=lA(["Arab","Dupl","Mong","Ougr","Syrc"]);function Ld(f){return!Ku.test(String.fromCodePoint(f))}const dc=lA(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function ul(f){return!(f!==746&&f!==747&&(f<4352||!(er["CJK Compatibility Forms"](f)&&!(f>=65097&&f<=65103)||er["CJK Compatibility"](f)||er["CJK Strokes"](f)||!(!er["CJK Symbols and Punctuation"](f)||f>=12296&&f<=12305||f>=12308&&f<=12319||f===12336)||er["Enclosed CJK Letters and Months"](f)||er["Ideographic Description Characters"](f)||er.Kanbun(f)||er.Katakana(f)&&f!==12540||!(!er["Halfwidth and Fullwidth Forms"](f)||f===65288||f===65289||f===65293||f>=65306&&f<=65310||f===65339||f===65341||f===65343||f>=65371&&f<=65503||f===65507||f>=65512&&f<=65519)||!(!er["Small Form Variants"](f)||f>=65112&&f<=65118||f>=65123&&f<=65126)||er["Vertical Forms"](f)||er["Yijing Hexagram Symbols"](f)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(f))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(f))||dc.test(String.fromCodePoint(f)))))}function Op(f){return!(ul(f)||(function(u){return!!(er["Latin-1 Supplement"](u)&&(u===167||u===169||u===174||u===177||u===188||u===189||u===190||u===215||u===247)||er["General Punctuation"](u)&&(u===8214||u===8224||u===8225||u===8240||u===8241||u===8251||u===8252||u===8258||u===8263||u===8264||u===8265||u===8273)||er["Letterlike Symbols"](u)||er["Number Forms"](u)||er["Miscellaneous Technical"](u)&&(u>=8960&&u<=8967||u>=8972&&u<=8991||u>=8996&&u<=9e3||u===9003||u>=9085&&u<=9114||u>=9150&&u<=9165||u===9167||u>=9169&&u<=9179||u>=9186&&u<=9215)||er["Control Pictures"](u)&&u!==9251||er["Optical Character Recognition"](u)||er["Enclosed Alphanumerics"](u)||er["Geometric Shapes"](u)||er["Miscellaneous Symbols"](u)&&!(u>=9754&&u<=9759)||er["Miscellaneous Symbols and Arrows"](u)&&(u>=11026&&u<=11055||u>=11088&&u<=11097||u>=11192&&u<=11243)||er["CJK Symbols and Punctuation"](u)||er.Katakana(u)||er["Private Use Area"](u)||er["CJK Compatibility Forms"](u)||er["Small Form Variants"](u)||er["Halfwidth and Fullwidth Forms"](u)||u===8734||u===8756||u===8757||u>=9984&&u<=10087||u>=10102&&u<=10131||u===65532||u===65533)})(f))}const mh=lA(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function Xm(f){return mh.test(String.fromCodePoint(f))}function fc(f,u){return!(!u&&Xm(f)||f>=2304&&f<=3583||f>=3840&&f<=4255||er.Khmer(f))}function FA(f){for(const u of f)if(Xm(u.charCodeAt(0)))return!0;return!1}const Lc=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(f){this.pluginStatus=f.pluginStatus,this.pluginURL=f.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(f){if(Lc.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=f.applyArabicShaping,this.processBidirectionalText=f.processBidirectionalText,this.processStyledBidirectionalText=f.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(f,u){return a(this,void 0,void 0,(function*(){if(this.isParsed())return this.getState();if(f.pluginStatus!=="loading")return this.setState(f),f;const d=f.pluginURL,b=new Promise((k=>{this.loadScriptResolve=k}));u(d);const M=new Promise((k=>setTimeout((()=>k()),this.TIMEOUT)));if(yield Promise.race([b,M]),this.isParsed()){const k={pluginStatus:"loaded",pluginURL:d};return this.setState(k),k}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${d}`)}))}};class io{constructor(u,d){this.isSupportedScript=Fc,this.zoom=u,d?(this.now=d.now||0,this.fadeDuration=d.fadeDuration||0,this.zoomHistory=d.zoomHistory||new hc,this.transition=d.transition||{}):(this.now=0,this.fadeDuration=0,this.zoomHistory=new hc,this.transition={})}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const u=this.zoom,d=u-Math.floor(u),b=this.crossFadingFactor();return u>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:d+(1-d)*b}:{fromScale:.5,toScale:1,t:1-(1-b)*d}}}function Fc(f){return(function(u,d){for(const b of u)if(!fc(b.charCodeAt(0),d))return!1;return!0})(f,Lc.getRTLTextPluginStatus()==="loaded")}class gh{constructor(u,d,b){this.property=u,this.value=d,this.expression=(function(M,k,R){if(_p(M))return new Is(M,k);if($h(M)){const K=Dd(M,k,R);if(K.result==="error")throw new Error(K.value.map((z=>`${z.key}: ${z.message}`)).join(", "));return K.value}{let K=M;return k.type==="color"&&typeof M=="string"?K=Fi.parse(M):k.type!=="padding"||typeof M!="number"&&!Array.isArray(M)?k.type!=="numberArray"||typeof M!="number"&&!Array.isArray(M)?k.type!=="colorArray"||typeof M!="string"&&!Array.isArray(M)?k.type==="variableAnchorOffsetCollection"&&Array.isArray(M)?K=vo.parse(M):k.type==="projectionDefinition"&&typeof M=="string"&&(K=co.parse(M)):K=uo.parse(M):K=ms.parse(M):K=go.parse(M),{globalStateRefs:new Set,_globalState:null,kind:"constant",evaluate:()=>K}}})(d===void 0?u.specification.default:d,u.specification,b)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}getGlobalStateRefs(){return this.expression.globalStateRefs||new Set}possiblyEvaluate(u,d,b){return this.property.possiblyEvaluate(this,u,d,b)}}class Sf{constructor(u,d){this.property=u,this.value=new gh(u,void 0,d)}transitioned(u,d){return new yh(this.property,this.value,d,Ke({},u.transition,this.transition),u.now)}untransitioned(){return new yh(this.property,this.value,null,{},0)}}class Pa{constructor(u,d){this._properties=u,this._values=Object.create(u.defaultTransitionablePropertyValues),this._globalState=d}getValue(u){return yt(this._values[u].value.value)}setValue(u,d){Object.prototype.hasOwnProperty.call(this._values,u)||(this._values[u]=new Sf(this._values[u].property,this._globalState)),this._values[u].value=new gh(this._values[u].property,d===null?void 0:yt(d),this._globalState)}getTransition(u){return yt(this._values[u].transition)}setTransition(u,d){Object.prototype.hasOwnProperty.call(this._values,u)||(this._values[u]=new Sf(this._values[u].property,this._globalState)),this._values[u].transition=yt(d)||void 0}serialize(){const u={};for(const d of Object.keys(this._values)){const b=this.getValue(d);b!==void 0&&(u[d]=b);const M=this.getTransition(d);M!==void 0&&(u[`${d}-transition`]=M)}return u}transitioned(u,d){const b=new Jh(this._properties);for(const M of Object.keys(this._values))b._values[M]=this._values[M].transitioned(u,d._values[M]);return b}untransitioned(){const u=new Jh(this._properties);for(const d of Object.keys(this._values))u._values[d]=this._values[d].untransitioned();return u}}class yh{constructor(u,d,b,M,k){this.property=u,this.value=d,this.begin=k+M.delay||0,this.end=this.begin+M.duration||0,u.specification.transition&&(M.delay||M.duration)&&(this.prior=b)}possiblyEvaluate(u,d,b){const M=u.now||0,k=this.value.possiblyEvaluate(u,d,b),R=this.prior;if(R){if(M>this.end)return this.prior=null,k;if(this.value.isDataDriven())return this.prior=null,k;if(M<this.begin)return R.possiblyEvaluate(u,d,b);{const K=(M-this.begin)/(this.end-this.begin);return this.property.interpolate(R.possiblyEvaluate(u,d,b),k,De(K))}}return k}}class Jh{constructor(u){this._properties=u,this._values=Object.create(u.defaultTransitioningPropertyValues)}possiblyEvaluate(u,d,b){const M=new Au(this._properties);for(const k of Object.keys(this._values))M._values[k]=this._values[k].possiblyEvaluate(u,d,b);return M}hasTransition(){for(const u of Object.keys(this._values))if(this._values[u].prior)return!0;return!1}}class zc{constructor(u,d){this._properties=u,this._values=Object.create(u.defaultPropertyValues),this._globalState=d}hasValue(u){return this._values[u].value!==void 0}getValue(u){return yt(this._values[u].value)}setValue(u,d){this._values[u]=new gh(this._values[u].property,d===null?void 0:yt(d),this._globalState)}serialize(){const u={};for(const d of Object.keys(this._values)){const b=this.getValue(d);b!==void 0&&(u[d]=b)}return u}possiblyEvaluate(u,d,b){const M=new Au(this._properties);for(const k of Object.keys(this._values))M._values[k]=this._values[k].possiblyEvaluate(u,d,b);return M}}class Lu{constructor(u,d,b){this.property=u,this.value=d,this.parameters=b}isConstant(){return this.value.kind==="constant"}constantOr(u){return this.value.kind==="constant"?this.value.value:u}evaluate(u,d,b,M){return this.property.evaluate(this.value,this.parameters,u,d,b,M)}}class Au{constructor(u){this._properties=u,this._values=Object.create(u.defaultPossiblyEvaluatedValues)}get(u){return this._values[u]}}class ni{constructor(u){this.specification=u}possiblyEvaluate(u,d){if(u.isDataDriven())throw new Error("Value should not be data driven");return u.expression.evaluate(d)}interpolate(u,d,b){const M=$a[this.specification.type];return M?M(u,d,b):u}}class Ti{constructor(u,d){this.specification=u,this.overrides=d}possiblyEvaluate(u,d,b,M){return new Lu(this,u.expression.kind==="constant"||u.expression.kind==="camera"?{kind:"constant",value:u.expression.evaluate(d,null,{},b,M)}:u.expression,d)}interpolate(u,d,b){if(u.value.kind!=="constant"||d.value.kind!=="constant")return u;if(u.value.value===void 0||d.value.value===void 0)return new Lu(this,{kind:"constant",value:void 0},u.parameters);const M=$a[this.specification.type];if(M){const k=M(u.value.value,d.value.value,b);return new Lu(this,{kind:"constant",value:k},u.parameters)}return u}evaluate(u,d,b,M,k,R){return u.kind==="constant"?u.value:u.evaluate(d,b,M,k,R)}}class ga extends Ti{possiblyEvaluate(u,d,b,M){if(u.value===void 0)return new Lu(this,{kind:"constant",value:void 0},d);if(u.expression.kind==="constant"){const k=u.expression.evaluate(d,null,{},b,M),R=u.property.specification.type==="resolvedImage"&&typeof k!="string"?k.name:k,K=this._calculate(R,R,R,d);return new Lu(this,{kind:"constant",value:K},d)}if(u.expression.kind==="camera"){const k=this._calculate(u.expression.evaluate({zoom:d.zoom-1}),u.expression.evaluate({zoom:d.zoom}),u.expression.evaluate({zoom:d.zoom+1}),d);return new Lu(this,{kind:"constant",value:k},d)}return new Lu(this,u.expression,d)}evaluate(u,d,b,M,k,R){if(u.kind==="source"){const K=u.evaluate(d,b,M,k,R);return this._calculate(K,K,K,d)}return u.kind==="composite"?this._calculate(u.evaluate({zoom:Math.floor(d.zoom)-1},b,M),u.evaluate({zoom:Math.floor(d.zoom)},b,M),u.evaluate({zoom:Math.floor(d.zoom)+1},b,M),d):u.value}_calculate(u,d,b,M){return M.zoom>M.zoomHistory.lastIntegerZoom?{from:u,to:d}:{from:b,to:d}}interpolate(u){return u}}class Ef{constructor(u){this.specification=u}possiblyEvaluate(u,d,b,M){if(u.value!==void 0){if(u.expression.kind==="constant"){const k=u.expression.evaluate(d,null,{},b,M);return this._calculate(k,k,k,d)}return this._calculate(u.expression.evaluate(new io(Math.floor(d.zoom-1),d)),u.expression.evaluate(new io(Math.floor(d.zoom),d)),u.expression.evaluate(new io(Math.floor(d.zoom+1),d)),d)}}_calculate(u,d,b,M){return M.zoom>M.zoomHistory.lastIntegerZoom?{from:u,to:d}:{from:b,to:d}}interpolate(u){return u}}class Il{constructor(u){this.specification=u}possiblyEvaluate(u,d,b,M){return!!u.expression.evaluate(d,null,{},b,M)}interpolate(){return!1}}class os{constructor(u){this.properties=u,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const d in u){const b=u[d];b.specification.overridable&&this.overridableProperties.push(d);const M=this.defaultPropertyValues[d]=new gh(b,void 0,void 0),k=this.defaultTransitionablePropertyValues[d]=new Sf(b,void 0);this.defaultTransitioningPropertyValues[d]=k.untransitioned(),this.defaultPossiblyEvaluatedValues[d]=M.possiblyEvaluate({})}}}Qn("DataDrivenProperty",Ti),Qn("DataConstantProperty",ni),Qn("CrossFadedDataDrivenProperty",ga),Qn("CrossFadedProperty",Ef),Qn("ColorRampProperty",Il);const zA="-transition";class hu extends tn{constructor(u,d,b){if(super(),this.id=u.id,this.type=u.type,this._globalState=b,this._featureFilter={filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set},u.type!=="custom"&&(this.metadata=u.metadata,this.minzoom=u.minzoom,this.maxzoom=u.maxzoom,u.type!=="background"&&(this.source=u.source,this.sourceLayer=u["source-layer"],this.filter=u.filter,this._featureFilter=Ql(u.filter,b)),d.layout&&(this._unevaluatedLayout=new zc(d.layout,b)),d.paint)){this._transitionablePaint=new Pa(d.paint,b);for(const M in u.paint)this.setPaintProperty(M,u.paint[M],{validate:!1});for(const M in u.layout)this.setLayoutProperty(M,u.layout[M],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Au(d.paint)}}setFilter(u){this.filter=u,this._featureFilter=Ql(u,this._globalState)}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(u){return u==="visibility"?this.visibility:this._unevaluatedLayout.getValue(u)}getLayoutAffectingGlobalStateRefs(){const u=new Set;if(this._unevaluatedLayout)for(const d in this._unevaluatedLayout._values){const b=this._unevaluatedLayout._values[d];for(const M of b.getGlobalStateRefs())u.add(M)}for(const d of this._featureFilter.getGlobalStateRefs())u.add(d);return u}getPaintAffectingGlobalStateRefs(){var u;const d=new globalThis.Map;if(this._transitionablePaint)for(const b in this._transitionablePaint._values){const M=this._transitionablePaint._values[b].value;for(const k of M.getGlobalStateRefs()){const R=(u=d.get(k))!==null&&u!==void 0?u:[];R.push({name:b,value:M.value}),d.set(k,R)}}return d}setLayoutProperty(u,d,b={}){d!=null&&this._validate(ph,`layers.${this.id}.layout.${u}`,u,d,b)||(u!=="visibility"?this._unevaluatedLayout.setValue(u,d):this.visibility=d)}getPaintProperty(u){return u.endsWith(zA)?this._transitionablePaint.getTransition(u.slice(0,-11)):this._transitionablePaint.getValue(u)}setPaintProperty(u,d,b={}){if(d!=null&&this._validate(Ac,`layers.${this.id}.paint.${u}`,u,d,b))return!1;if(u.endsWith(zA))return this._transitionablePaint.setTransition(u.slice(0,-11),d||void 0),!1;{const M=this._transitionablePaint._values[u],k=M.property.specification["property-type"]==="cross-faded-data-driven",R=M.value.isDataDriven(),K=M.value;this._transitionablePaint.setValue(u,d),this._handleSpecialPaintPropertyUpdate(u);const z=this._transitionablePaint._values[u].value;return z.isDataDriven()||R||k||this._handleOverridablePaintPropertyUpdate(u,K,z)}}_handleSpecialPaintPropertyUpdate(u){}_handleOverridablePaintPropertyUpdate(u,d,b){return!1}isHidden(u,d=!1){return!!(this.minzoom&&u<(d?Math.floor(this.minzoom):this.minzoom))||!!(this.maxzoom&&u>=this.maxzoom)||this.visibility==="none"}updateTransitions(u){this._transitioningPaint=this._transitionablePaint.transitioned(u,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(u,d){u.getCrossfadeParameters&&(this._crossfadeParameters=u.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(u,void 0,d)),this.paint=this._transitioningPaint.possiblyEvaluate(u,void 0,d)}serialize(){const u={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(u.layout=u.layout||{},u.layout.visibility=this.visibility),Ve(u,((d,b)=>!(d===void 0||b==="layout"&&!Object.keys(d).length||b==="paint"&&!Object.keys(d).length)))}_validate(u,d,b,M,k={}){return(!k||k.validate!==!1)&&Hm(this,u.call(Kc,{key:d,layerType:this.type,objectKey:b,value:M,styleSpec:dt,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const u in this.paint._values){const d=this.paint.get(u);if(d instanceof Lu&&lu(d.property.specification)&&(d.value.kind==="source"||d.value.kind==="composite")&&d.value.isStateDependent)return!0}return!1}}let b0;var jc={get paint(){return b0=b0||new os({"raster-opacity":new ni(dt.paint_raster["raster-opacity"]),"raster-hue-rotate":new ni(dt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new ni(dt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new ni(dt.paint_raster["raster-brightness-max"]),"raster-saturation":new ni(dt.paint_raster["raster-saturation"]),"raster-contrast":new ni(dt.paint_raster["raster-contrast"]),"raster-resampling":new ni(dt.paint_raster["raster-resampling"]),"raster-fade-duration":new ni(dt.paint_raster["raster-fade-duration"])})}};class Fu extends hu{constructor(u,d){super(u,jc,d)}}const ya={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class pc{constructor(u,d){this._structArray=u,this._pos1=d*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Zr{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(u,d){return u._trim(),d&&(u.isTransferred=!0,d.push(u.arrayBuffer)),{length:u.length,arrayBuffer:u.arrayBuffer}}static deserialize(u){const d=Object.create(this.prototype);return d.arrayBuffer=u.arrayBuffer,d.length=u.length,d.capacity=u.arrayBuffer.byteLength/d.bytesPerElement,d._refreshViews(),d}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(u){this.reserve(u),this.length=u}reserve(u){if(u>this.capacity){this.capacity=Math.max(u,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const d=this.uint8;this._refreshViews(),d&&this.uint8.set(d)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Bi(f,u=1){let d=0,b=0;return{members:f.map((M=>{const k=ya[M.type].BYTES_PER_ELEMENT,R=d=zo(d,Math.max(u,k)),K=M.components||1;return b=Math.max(b,k),d+=k*K,{name:M.name,type:M.type,components:K,offset:R}})),size:zo(d,Math.max(b,u)),alignment:u}}function zo(f,u){return Math.ceil(f/u)*u}class ss extends Zr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,d){const b=this.length;return this.resize(b+1),this.emplace(b,u,d)}emplace(u,d,b){const M=2*u;return this.int16[M+0]=d,this.int16[M+1]=b,u}}ss.prototype.bytesPerElement=4,Qn("StructArrayLayout2i4",ss);class ed extends Zr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,d,b){const M=this.length;return this.resize(M+1),this.emplace(M,u,d,b)}emplace(u,d,b,M){const k=3*u;return this.int16[k+0]=d,this.int16[k+1]=b,this.int16[k+2]=M,u}}ed.prototype.bytesPerElement=6,Qn("StructArrayLayout3i6",ed);class td extends Zr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,d,b,M){const k=this.length;return this.resize(k+1),this.emplace(k,u,d,b,M)}emplace(u,d,b,M,k){const R=4*u;return this.int16[R+0]=d,this.int16[R+1]=b,this.int16[R+2]=M,this.int16[R+3]=k,u}}td.prototype.bytesPerElement=8,Qn("StructArrayLayout4i8",td);class du extends Zr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,d,b,M,k,R){const K=this.length;return this.resize(K+1),this.emplace(K,u,d,b,M,k,R)}emplace(u,d,b,M,k,R,K){const z=6*u;return this.int16[z+0]=d,this.int16[z+1]=b,this.int16[z+2]=M,this.int16[z+3]=k,this.int16[z+4]=R,this.int16[z+5]=K,u}}du.prototype.bytesPerElement=12,Qn("StructArrayLayout2i4i12",du);class Fd extends Zr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,d,b,M,k,R){const K=this.length;return this.resize(K+1),this.emplace(K,u,d,b,M,k,R)}emplace(u,d,b,M,k,R,K){const z=4*u,ee=8*u;return this.int16[z+0]=d,this.int16[z+1]=b,this.uint8[ee+4]=M,this.uint8[ee+5]=k,this.uint8[ee+6]=R,this.uint8[ee+7]=K,u}}Fd.prototype.bytesPerElement=8,Qn("StructArrayLayout2i4ub8",Fd);class Nc extends Zr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,d){const b=this.length;return this.resize(b+1),this.emplace(b,u,d)}emplace(u,d,b){const M=2*u;return this.float32[M+0]=d,this.float32[M+1]=b,u}}Nc.prototype.bytesPerElement=8,Qn("StructArrayLayout2f8",Nc);class uA extends Zr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,d,b,M,k,R,K,z,ee,ne){const ce=this.length;return this.resize(ce+1),this.emplace(ce,u,d,b,M,k,R,K,z,ee,ne)}emplace(u,d,b,M,k,R,K,z,ee,ne,ce){const _e=10*u;return this.uint16[_e+0]=d,this.uint16[_e+1]=b,this.uint16[_e+2]=M,this.uint16[_e+3]=k,this.uint16[_e+4]=R,this.uint16[_e+5]=K,this.uint16[_e+6]=z,this.uint16[_e+7]=ee,this.uint16[_e+8]=ne,this.uint16[_e+9]=ce,u}}uA.prototype.bytesPerElement=20,Qn("StructArrayLayout10ui20",uA);class Ip extends Zr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,d,b,M,k,R,K,z){const ee=this.length;return this.resize(ee+1),this.emplace(ee,u,d,b,M,k,R,K,z)}emplace(u,d,b,M,k,R,K,z,ee){const ne=8*u;return this.uint16[ne+0]=d,this.uint16[ne+1]=b,this.uint16[ne+2]=M,this.uint16[ne+3]=k,this.uint16[ne+4]=R,this.uint16[ne+5]=K,this.uint16[ne+6]=z,this.uint16[ne+7]=ee,u}}Ip.prototype.bytesPerElement=16,Qn("StructArrayLayout8ui16",Ip);class ys extends Zr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,d,b,M,k,R,K,z,ee,ne,ce,_e){const Se=this.length;return this.resize(Se+1),this.emplace(Se,u,d,b,M,k,R,K,z,ee,ne,ce,_e)}emplace(u,d,b,M,k,R,K,z,ee,ne,ce,_e,Se){const ke=12*u;return this.int16[ke+0]=d,this.int16[ke+1]=b,this.int16[ke+2]=M,this.int16[ke+3]=k,this.uint16[ke+4]=R,this.uint16[ke+5]=K,this.uint16[ke+6]=z,this.uint16[ke+7]=ee,this.int16[ke+8]=ne,this.int16[ke+9]=ce,this.int16[ke+10]=_e,this.int16[ke+11]=Se,u}}ys.prototype.bytesPerElement=24,Qn("StructArrayLayout4i4ui4i24",ys);class vh extends Zr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,d,b){const M=this.length;return this.resize(M+1),this.emplace(M,u,d,b)}emplace(u,d,b,M){const k=3*u;return this.float32[k+0]=d,this.float32[k+1]=b,this.float32[k+2]=M,u}}vh.prototype.bytesPerElement=12,Qn("StructArrayLayout3f12",vh);class jA extends Zr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(u){const d=this.length;return this.resize(d+1),this.emplace(d,u)}emplace(u,d){return this.uint32[1*u+0]=d,u}}jA.prototype.bytesPerElement=4,Qn("StructArrayLayout1ul4",jA);class kp extends Zr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,d,b,M,k,R,K,z,ee){const ne=this.length;return this.resize(ne+1),this.emplace(ne,u,d,b,M,k,R,K,z,ee)}emplace(u,d,b,M,k,R,K,z,ee,ne){const ce=10*u,_e=5*u;return this.int16[ce+0]=d,this.int16[ce+1]=b,this.int16[ce+2]=M,this.int16[ce+3]=k,this.int16[ce+4]=R,this.int16[ce+5]=K,this.uint32[_e+3]=z,this.uint16[ce+8]=ee,this.uint16[ce+9]=ne,u}}kp.prototype.bytesPerElement=20,Qn("StructArrayLayout6i1ul2ui20",kp);class nd extends Zr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,d,b,M,k,R){const K=this.length;return this.resize(K+1),this.emplace(K,u,d,b,M,k,R)}emplace(u,d,b,M,k,R,K){const z=6*u;return this.int16[z+0]=d,this.int16[z+1]=b,this.int16[z+2]=M,this.int16[z+3]=k,this.int16[z+4]=R,this.int16[z+5]=K,u}}nd.prototype.bytesPerElement=12,Qn("StructArrayLayout2i2i2i12",nd);class zd extends Zr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,d,b,M,k){const R=this.length;return this.resize(R+1),this.emplace(R,u,d,b,M,k)}emplace(u,d,b,M,k,R){const K=4*u,z=8*u;return this.float32[K+0]=d,this.float32[K+1]=b,this.float32[K+2]=M,this.int16[z+6]=k,this.int16[z+7]=R,u}}zd.prototype.bytesPerElement=16,Qn("StructArrayLayout2f1f2i16",zd);class Bf extends Zr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,d,b,M,k,R){const K=this.length;return this.resize(K+1),this.emplace(K,u,d,b,M,k,R)}emplace(u,d,b,M,k,R,K){const z=16*u,ee=4*u,ne=8*u;return this.uint8[z+0]=d,this.uint8[z+1]=b,this.float32[ee+1]=M,this.float32[ee+2]=k,this.int16[ne+6]=R,this.int16[ne+7]=K,u}}Bf.prototype.bytesPerElement=16,Qn("StructArrayLayout2ub2f2i16",Bf);class jd extends Zr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,d,b){const M=this.length;return this.resize(M+1),this.emplace(M,u,d,b)}emplace(u,d,b,M){const k=3*u;return this.uint16[k+0]=d,this.uint16[k+1]=b,this.uint16[k+2]=M,u}}jd.prototype.bytesPerElement=6,Qn("StructArrayLayout3ui6",jd);class Of extends Zr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,d,b,M,k,R,K,z,ee,ne,ce,_e,Se,ke,ze,$e,it){const Et=this.length;return this.resize(Et+1),this.emplace(Et,u,d,b,M,k,R,K,z,ee,ne,ce,_e,Se,ke,ze,$e,it)}emplace(u,d,b,M,k,R,K,z,ee,ne,ce,_e,Se,ke,ze,$e,it,Et){const ut=24*u,pt=12*u,Gt=48*u;return this.int16[ut+0]=d,this.int16[ut+1]=b,this.uint16[ut+2]=M,this.uint16[ut+3]=k,this.uint32[pt+2]=R,this.uint32[pt+3]=K,this.uint32[pt+4]=z,this.uint16[ut+10]=ee,this.uint16[ut+11]=ne,this.uint16[ut+12]=ce,this.float32[pt+7]=_e,this.float32[pt+8]=Se,this.uint8[Gt+36]=ke,this.uint8[Gt+37]=ze,this.uint8[Gt+38]=$e,this.uint32[pt+10]=it,this.int16[ut+22]=Et,u}}Of.prototype.bytesPerElement=48,Qn("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Of);class cl extends Zr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,d,b,M,k,R,K,z,ee,ne,ce,_e,Se,ke,ze,$e,it,Et,ut,pt,Gt,Jt,mn,Nn,Tn,zn,bi,jn){const Kn=this.length;return this.resize(Kn+1),this.emplace(Kn,u,d,b,M,k,R,K,z,ee,ne,ce,_e,Se,ke,ze,$e,it,Et,ut,pt,Gt,Jt,mn,Nn,Tn,zn,bi,jn)}emplace(u,d,b,M,k,R,K,z,ee,ne,ce,_e,Se,ke,ze,$e,it,Et,ut,pt,Gt,Jt,mn,Nn,Tn,zn,bi,jn,Kn){const un=32*u,Gi=16*u;return this.int16[un+0]=d,this.int16[un+1]=b,this.int16[un+2]=M,this.int16[un+3]=k,this.int16[un+4]=R,this.int16[un+5]=K,this.int16[un+6]=z,this.int16[un+7]=ee,this.uint16[un+8]=ne,this.uint16[un+9]=ce,this.uint16[un+10]=_e,this.uint16[un+11]=Se,this.uint16[un+12]=ke,this.uint16[un+13]=ze,this.uint16[un+14]=$e,this.uint16[un+15]=it,this.uint16[un+16]=Et,this.uint16[un+17]=ut,this.uint16[un+18]=pt,this.uint16[un+19]=Gt,this.uint16[un+20]=Jt,this.uint16[un+21]=mn,this.uint16[un+22]=Nn,this.uint32[Gi+12]=Tn,this.float32[Gi+13]=zn,this.float32[Gi+14]=bi,this.uint16[un+30]=jn,this.uint16[un+31]=Kn,u}}cl.prototype.bytesPerElement=64,Qn("StructArrayLayout8i15ui1ul2f2ui64",cl);class B extends Zr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u){const d=this.length;return this.resize(d+1),this.emplace(d,u)}emplace(u,d){return this.float32[1*u+0]=d,u}}B.prototype.bytesPerElement=4,Qn("StructArrayLayout1f4",B);class l extends Zr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,d,b){const M=this.length;return this.resize(M+1),this.emplace(M,u,d,b)}emplace(u,d,b,M){const k=3*u;return this.uint16[6*u+0]=d,this.float32[k+1]=b,this.float32[k+2]=M,u}}l.prototype.bytesPerElement=12,Qn("StructArrayLayout1ui2f12",l);class p extends Zr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,d,b){const M=this.length;return this.resize(M+1),this.emplace(M,u,d,b)}emplace(u,d,b,M){const k=4*u;return this.uint32[2*u+0]=d,this.uint16[k+2]=b,this.uint16[k+3]=M,u}}p.prototype.bytesPerElement=8,Qn("StructArrayLayout1ul2ui8",p);class C extends Zr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,d){const b=this.length;return this.resize(b+1),this.emplace(b,u,d)}emplace(u,d,b){const M=2*u;return this.uint16[M+0]=d,this.uint16[M+1]=b,u}}C.prototype.bytesPerElement=4,Qn("StructArrayLayout2ui4",C);class S extends Zr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u){const d=this.length;return this.resize(d+1),this.emplace(d,u)}emplace(u,d){return this.uint16[1*u+0]=d,u}}S.prototype.bytesPerElement=2,Qn("StructArrayLayout1ui2",S);class O extends Zr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,d,b,M){const k=this.length;return this.resize(k+1),this.emplace(k,u,d,b,M)}emplace(u,d,b,M,k){const R=4*u;return this.float32[R+0]=d,this.float32[R+1]=b,this.float32[R+2]=M,this.float32[R+3]=k,u}}O.prototype.bytesPerElement=16,Qn("StructArrayLayout4f16",O);class U extends pc{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new c(this.anchorPointX,this.anchorPointY)}}U.prototype.size=20;class N extends kp{get(u){return new U(this,u)}}Qn("CollisionBoxArray",N);class Y extends pc{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(u){this._structArray.uint8[this._pos1+37]=u}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(u){this._structArray.uint8[this._pos1+38]=u}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(u){this._structArray.uint32[this._pos4+10]=u}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Y.prototype.size=48;class re extends Of{get(u){return new Y(this,u)}}Qn("PlacedSymbolArray",re);class ae extends pc{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(u){this._structArray.uint32[this._pos4+12]=u}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}ae.prototype.size=64;class ge extends cl{get(u){return new ae(this,u)}}Qn("SymbolInstanceArray",ge);class pe extends B{getoffsetX(u){return this.float32[1*u+0]}}Qn("GlyphOffsetArray",pe);class we extends ed{getx(u){return this.int16[3*u+0]}gety(u){return this.int16[3*u+1]}gettileUnitDistanceFromAnchor(u){return this.int16[3*u+2]}}Qn("SymbolLineVertexArray",we);class Fe extends pc{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Fe.prototype.size=12;class He extends l{get(u){return new Fe(this,u)}}Qn("TextAnchorOffsetArray",He);class Ze extends pc{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Ze.prototype.size=8;class et extends p{get(u){return new Ze(this,u)}}Qn("FeatureIndexArray",et);class rt extends ss{}class lt extends ss{}class nt extends ss{}class ht extends du{}class bt extends Fd{}class st extends Nc{}class wt extends uA{}class Yt extends Ip{}class jt extends ys{}class Nt extends vh{}class qt extends jA{}class gn extends nd{}class In extends Bf{}class sn extends jd{}class ti extends C{}const nr=Bi([{name:"a_pos",components:2,type:"Int16"}],4),{members:ro}=nr;class yr{constructor(u=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=u}prepareSegment(u,d,b,M){const k=this.segments[this.segments.length-1];return u>yr.MAX_VERTEX_ARRAY_LENGTH&&Ct(`Max vertices per segment is ${yr.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${u}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${yr.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!k||k.vertexLength+u>yr.MAX_VERTEX_ARRAY_LENGTH||k.sortKey!==M?this.createNewSegment(d,b,M):k}createNewSegment(u,d,b){const M={vertexOffset:u.length,primitiveOffset:d.length,vertexLength:0,primitiveLength:0,vaos:{}};return b!==void 0&&(M.sortKey=b),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(M),M}getOrCreateLatestSegment(u,d,b){return this.prepareSegment(0,u,d,b)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const u of this.segments)for(const d in u.vaos)u.vaos[d].destroy()}static simpleSegment(u,d,b,M){return new yr([{vertexOffset:u,primitiveOffset:d,vertexLength:b,primitiveLength:M,vaos:{},sortKey:0}])}}function jo(f,u){return 256*(f=Tt(Math.floor(f),0,255))+Tt(Math.floor(u),0,255)}yr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Qn("SegmentVector",yr);const ks=Bi([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),No=Bi([{name:"a_dasharray_from",components:4,type:"Uint16"},{name:"a_dasharray_to",components:4,type:"Uint16"}]);var aa,vs,va,as={exports:{}},oo={exports:{}},bs={exports:{}},id=(function(){if(va)return as.exports;va=1;var f=(aa||(aa=1,oo.exports=function(d,b){var M,k,R,K,z,ee,ne,ce;for(k=d.length-(M=3&d.length),R=b,z=3432918353,ee=461845907,ce=0;ce<k;)ne=255&d.charCodeAt(ce)|(255&d.charCodeAt(++ce))<<8|(255&d.charCodeAt(++ce))<<16|(255&d.charCodeAt(++ce))<<24,++ce,R=27492+(65535&(K=5*(65535&(R=(R^=ne=(65535&(ne=(ne=(65535&ne)*z+(((ne>>>16)*z&65535)<<16)&4294967295)<<15|ne>>>17))*ee+(((ne>>>16)*ee&65535)<<16)&4294967295)<<13|R>>>19))+((5*(R>>>16)&65535)<<16)&4294967295))+((58964+(K>>>16)&65535)<<16);switch(ne=0,M){case 3:ne^=(255&d.charCodeAt(ce+2))<<16;case 2:ne^=(255&d.charCodeAt(ce+1))<<8;case 1:R^=ne=(65535&(ne=(ne=(65535&(ne^=255&d.charCodeAt(ce)))*z+(((ne>>>16)*z&65535)<<16)&4294967295)<<15|ne>>>17))*ee+(((ne>>>16)*ee&65535)<<16)&4294967295}return R^=d.length,R=2246822507*(65535&(R^=R>>>16))+((2246822507*(R>>>16)&65535)<<16)&4294967295,R=3266489909*(65535&(R^=R>>>13))+((3266489909*(R>>>16)&65535)<<16)&4294967295,(R^=R>>>16)>>>0}),oo.exports),u=(vs||(vs=1,bs.exports=function(d,b){for(var M,k=d.length,R=b^k,K=0;k>=4;)M=1540483477*(65535&(M=255&d.charCodeAt(K)|(255&d.charCodeAt(++K))<<8|(255&d.charCodeAt(++K))<<16|(255&d.charCodeAt(++K))<<24))+((1540483477*(M>>>16)&65535)<<16),R=1540483477*(65535&R)+((1540483477*(R>>>16)&65535)<<16)^(M=1540483477*(65535&(M^=M>>>24))+((1540483477*(M>>>16)&65535)<<16)),k-=4,++K;switch(k){case 3:R^=(255&d.charCodeAt(K+2))<<16;case 2:R^=(255&d.charCodeAt(K+1))<<8;case 1:R=1540483477*(65535&(R^=255&d.charCodeAt(K)))+((1540483477*(R>>>16)&65535)<<16)}return R=1540483477*(65535&(R^=R>>>13))+((1540483477*(R>>>16)&65535)<<16),(R^=R>>>15)>>>0}),bs.exports);return as.exports=f,as.exports.murmur3=f,as.exports.murmur2=u,as.exports})(),NA=h(id);class mc{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(u,d,b,M){this.ids.push(zu(u)),this.positions.push(d,b,M)}getPositions(u){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const d=zu(u);let b=0,M=this.ids.length-1;for(;b<M;){const R=b+M>>1;this.ids[R]>=d?M=R:b=R+1}const k=[];for(;this.ids[b]===d;)k.push({index:this.positions[3*b],start:this.positions[3*b+1],end:this.positions[3*b+2]}),b++;return k}static serialize(u,d){const b=new Float64Array(u.ids),M=new Uint32Array(u.positions);return rd(b,M,0,b.length-1),d&&d.push(b.buffer,M.buffer),{ids:b,positions:M}}static deserialize(u){const d=new mc;return d.ids=u.ids,d.positions=u.positions,d.indexed=!0,d}}function zu(f){const u=+f;return!isNaN(u)&&u<=Number.MAX_SAFE_INTEGER?u:NA(String(f))}function rd(f,u,d,b){for(;d<b;){const M=f[d+b>>1];let k=d-1,R=b+1;for(;;){do k++;while(f[k]<M);do R--;while(f[R]>M);if(k>=R)break;bh(f,k,R),bh(u,3*k,3*R),bh(u,3*k+1,3*R+1),bh(u,3*k+2,3*R+2)}R-d<b-R?(rd(f,u,d,R),d=R+1):(rd(f,u,R+1,b),b=R)}}function bh(f,u,d){const b=f[u];f[u]=f[d],f[d]=b}Qn("FeaturePositionMap",mc);class Vl{constructor(u,d){this.gl=u.gl,this.location=d}}class kl extends Vl{constructor(u,d){super(u,d),this.current=0}set(u){this.current!==u&&(this.current=u,this.gl.uniform1f(this.location,u))}}class fu extends Vl{constructor(u,d){super(u,d),this.current=[0,0,0,0]}set(u){u[0]===this.current[0]&&u[1]===this.current[1]&&u[2]===this.current[2]&&u[3]===this.current[3]||(this.current=u,this.gl.uniform4f(this.location,u[0],u[1],u[2],u[3]))}}class Gc extends Vl{constructor(u,d){super(u,d),this.current=Fi.transparent}set(u){u.r===this.current.r&&u.g===this.current.g&&u.b===this.current.b&&u.a===this.current.a||(this.current=u,this.gl.uniform4f(this.location,u.r,u.g,u.b,u.a))}}const Tp=new Float32Array(16);function Hs(f){return[jo(255*f.r,255*f.g),jo(255*f.b,255*f.a)]}class ls{constructor(u,d,b){this.value=u,this.uniformNames=d.map((M=>`u_${M}`)),this.type=b}setUniform(u,d,b){u.set(b.constantOr(this.value))}getBinding(u,d,b){return this.type==="color"?new Gc(u,d):new kl(u,d)}}class Zs{constructor(u,d){this.uniformNames=d.map((b=>`u_${b}`)),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(u,d){this.pixelRatioFrom=d.pixelRatio,this.pixelRatioTo=u.pixelRatio,this.patternFrom=d.tlbr,this.patternTo=u.tlbr}setConstantDashPositions(u,d){this.dashTo=[0,u.y,u.height,u.width],this.dashFrom=[0,d.y,d.height,d.width]}setUniform(u,d,b,M){let k=null;M==="u_pattern_to"?k=this.patternTo:M==="u_pattern_from"?k=this.patternFrom:M==="u_dasharray_to"?k=this.dashTo:M==="u_dasharray_from"?k=this.dashFrom:M==="u_pixel_ratio_to"?k=this.pixelRatioTo:M==="u_pixel_ratio_from"&&(k=this.pixelRatioFrom),k!==null&&u.set(k)}getBinding(u,d,b){return b.substr(0,9)==="u_pattern"||b.substr(0,12)==="u_dasharray_"?new fu(u,d):new kl(u,d)}}class Ro{constructor(u,d,b,M){this.expression=u,this.type=b,this.maxValue=0,this.paintVertexAttributes=d.map((k=>({name:`a_${k}`,type:"Float32",components:b==="color"?2:1,offset:0}))),this.paintVertexArray=new M}populatePaintArray(u,d,b){const M=this.paintVertexArray.length,k=this.expression.evaluate(new io(0,b),d,{},b.canonical,[],b.formattedSection);this.paintVertexArray.resize(u),this._setPaintValue(M,u,k)}updatePaintArray(u,d,b,M,k){const R=this.expression.evaluate(new io(0,k),b,M);this._setPaintValue(u,d,R)}_setPaintValue(u,d,b){if(this.type==="color"){const M=Hs(b);for(let k=u;k<d;k++)this.paintVertexArray.emplace(k,M[0],M[1])}else{for(let M=u;M<d;M++)this.paintVertexArray.emplace(M,b);this.maxValue=Math.max(this.maxValue,Math.abs(b))}}upload(u){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=u.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class pu{constructor(u,d,b,M,k,R){this.expression=u,this.uniformNames=d.map((K=>`u_${K}_t`)),this.type=b,this.useIntegerZoom=M,this.zoom=k,this.maxValue=0,this.paintVertexAttributes=d.map((K=>({name:`a_${K}`,type:"Float32",components:b==="color"?4:2,offset:0}))),this.paintVertexArray=new R}populatePaintArray(u,d,b){const M=this.expression.evaluate(new io(this.zoom,b),d,{},b.canonical,[],b.formattedSection),k=this.expression.evaluate(new io(this.zoom+1,b),d,{},b.canonical,[],b.formattedSection),R=this.paintVertexArray.length;this.paintVertexArray.resize(u),this._setPaintValue(R,u,M,k)}updatePaintArray(u,d,b,M,k){const R=this.expression.evaluate(new io(this.zoom,k),b,M),K=this.expression.evaluate(new io(this.zoom+1,k),b,M);this._setPaintValue(u,d,R,K)}_setPaintValue(u,d,b,M){if(this.type==="color"){const k=Hs(b),R=Hs(M);for(let K=u;K<d;K++)this.paintVertexArray.emplace(K,k[0],k[1],R[0],R[1])}else{for(let k=u;k<d;k++)this.paintVertexArray.emplace(k,b,M);this.maxValue=Math.max(this.maxValue,Math.abs(b),Math.abs(M))}}upload(u){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=u.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(u,d){const b=this.useIntegerZoom?Math.floor(d.zoom):d.zoom,M=Tt(this.expression.interpolationFactor(b,this.zoom,this.zoom+1),0,1);u.set(M)}getBinding(u,d,b){return new kl(u,d)}}class cA{constructor(u,d,b,M,k,R){this.expression=u,this.type=d,this.useIntegerZoom=b,this.zoom=M,this.layerId=R,this.zoomInPaintVertexArray=new k,this.zoomOutPaintVertexArray=new k}populatePaintArray(u,d,b){const M=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(u),this.zoomOutPaintVertexArray.resize(u),this._setPaintValues(M,u,this.getPositionIds(d),b)}updatePaintArray(u,d,b,M,k){this._setPaintValues(u,d,this.getPositionIds(b),k)}_setPaintValues(u,d,b,M){const k=this.getPositions(M);if(!k||!b)return;const R=k[b.min],K=k[b.mid],z=k[b.max];if(R&&K&&z)for(let ee=u;ee<d;ee++)this.emplace(this.zoomInPaintVertexArray,ee,K,R),this.emplace(this.zoomOutPaintVertexArray,ee,K,z)}upload(u){if(this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer){const d=this.getVertexAttributes();this.zoomInPaintVertexBuffer=u.createVertexBuffer(this.zoomInPaintVertexArray,d,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=u.createVertexBuffer(this.zoomOutPaintVertexArray,d,this.expression.isStateDependent)}}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Ch extends cA{getPositions(u){return u.imagePositions}getPositionIds(u){return u.patterns&&u.patterns[this.layerId]}getVertexAttributes(){return ks.members}emplace(u,d,b,M){u.emplace(d,b.tlbr[0],b.tlbr[1],b.tlbr[2],b.tlbr[3],M.tlbr[0],M.tlbr[1],M.tlbr[2],M.tlbr[3],b.pixelRatio,M.pixelRatio)}}class C0 extends cA{getPositions(u){return u.dashPositions}getPositionIds(u){return u.dashes&&u.dashes[this.layerId]}getVertexAttributes(){return No.members}emplace(u,d,b,M){u.emplace(d,0,b.y,b.height,b.width,0,M.y,M.height,M.width)}}class Rp{constructor(u,d,b){this.binders={},this._buffers=[];const M=[];for(const k in u.paint._values){if(!b(k))continue;const R=u.paint.get(k);if(!(R instanceof Lu&&lu(R.property.specification)))continue;const K=GA(k,u.type),z=R.value,ee=R.property.specification.type,ne=R.property.useIntegerZoom,ce=R.property.specification["property-type"],_e=ce==="cross-faded"||ce==="cross-faded-data-driven";if(z.kind==="constant")this.binders[k]=_e?new Zs(z.value,K):new ls(z.value,K,ee),M.push(`/u_${k}`);else if(z.kind==="source"||_e){const Se=Nd(k,ee,"source");this.binders[k]=_e?k==="line-dasharray"?new C0(z,ee,ne,d,Se,u.id):new Ch(z,ee,ne,d,Se,u.id):new Ro(z,K,ee,Se),M.push(`/a_${k}`)}else{const Se=Nd(k,ee,"composite");this.binders[k]=new pu(z,K,ee,ne,d,Se),M.push(`/z_${k}`)}}this.cacheKey=M.sort().join("")}getMaxValue(u){const d=this.binders[u];return d instanceof Ro||d instanceof pu?d.maxValue:0}populatePaintArrays(u,d,b){for(const M in this.binders){const k=this.binders[M];(k instanceof Ro||k instanceof pu||k instanceof cA)&&k.populatePaintArray(u,d,b)}}setConstantPatternPositions(u,d){for(const b in this.binders){const M=this.binders[b];M instanceof Zs&&M.setConstantPatternPositions(u,d)}}setConstantDashPositions(u,d){for(const b in this.binders){const M=this.binders[b];M instanceof Zs&&M.setConstantDashPositions(u,d)}}updatePaintArrays(u,d,b,M,k){let R=!1;for(const K in u){const z=d.getPositions(K);for(const ee of z){const ne=b.feature(ee.index);for(const ce in this.binders){const _e=this.binders[ce];if((_e instanceof Ro||_e instanceof pu||_e instanceof cA)&&_e.expression.isStateDependent===!0){const Se=M.paint.get(ce);_e.expression=Se.value,_e.updatePaintArray(ee.start,ee.end,ne,u[K],k),R=!0}}}}return R}defines(){const u=[];for(const d in this.binders){const b=this.binders[d];(b instanceof ls||b instanceof Zs)&&u.push(...b.uniformNames.map((M=>`#define HAS_UNIFORM_${M}`)))}return u}getBinderAttributes(){const u=[];for(const d in this.binders){const b=this.binders[d];if(b instanceof Ro||b instanceof pu)for(let M=0;M<b.paintVertexAttributes.length;M++)u.push(b.paintVertexAttributes[M].name);else if(b instanceof cA){const M=b.getVertexAttributes();for(const k of M)u.push(k.name)}}return u}getBinderUniforms(){const u=[];for(const d in this.binders){const b=this.binders[d];if(b instanceof ls||b instanceof Zs||b instanceof pu)for(const M of b.uniformNames)u.push(M)}return u}getPaintVertexBuffers(){return this._buffers}getUniforms(u,d){const b=[];for(const M in this.binders){const k=this.binders[M];if(k instanceof ls||k instanceof Zs||k instanceof pu){for(const R of k.uniformNames)if(d[R]){const K=k.getBinding(u,d[R],R);b.push({name:R,property:M,binding:K})}}}return b}setUniforms(u,d,b,M){for(const{name:k,property:R,binding:K}of d)this.binders[R].setUniform(K,M,b.get(R),k)}updatePaintBuffers(u){this._buffers=[];for(const d in this.binders){const b=this.binders[d];if(u&&b instanceof cA){const M=u.fromScale===2?b.zoomInPaintVertexBuffer:b.zoomOutPaintVertexBuffer;M&&this._buffers.push(M)}else(b instanceof Ro||b instanceof pu)&&b.paintVertexBuffer&&this._buffers.push(b.paintVertexBuffer)}}upload(u){for(const d in this.binders){const b=this.binders[d];(b instanceof Ro||b instanceof pu||b instanceof cA)&&b.upload(u)}this.updatePaintBuffers()}destroy(){for(const u in this.binders){const d=this.binders[u];(d instanceof Ro||d instanceof pu||d instanceof cA)&&d.destroy()}}}class AA{constructor(u,d,b=()=>!0){this.programConfigurations={};for(const M of u)this.programConfigurations[M.id]=new Rp(M,d,b);this.needsUpload=!1,this._featureMap=new mc,this._bufferOffset=0}populatePaintArrays(u,d,b,M){for(const k in this.programConfigurations)this.programConfigurations[k].populatePaintArrays(u,d,M);d.id!==void 0&&this._featureMap.add(d.id,b,this._bufferOffset,u),this._bufferOffset=u,this.needsUpload=!0}updatePaintArrays(u,d,b,M){for(const k of b)this.needsUpload=this.programConfigurations[k.id].updatePaintArrays(u,this._featureMap,d,k,M)||this.needsUpload}get(u){return this.programConfigurations[u]}upload(u){if(this.needsUpload){for(const d in this.programConfigurations)this.programConfigurations[d].upload(u);this.needsUpload=!1}}destroy(){for(const u in this.programConfigurations)this.programConfigurations[u].destroy()}}function GA(f,u){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-dasharray":["dasharray_to","dasharray_from"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[f]||[f.replace(`${u}-`,"").replace(/-/g,"_")]}function Nd(f,u,d){const b={color:{source:Nc,composite:O},number:{source:B,composite:Nc}},M=(function(k){return{"line-pattern":{source:wt,composite:wt},"fill-pattern":{source:wt,composite:wt},"fill-extrusion-pattern":{source:wt,composite:wt},"line-dasharray":{source:Yt,composite:Yt}}[k]})(f);return M&&M[d]||b[u][d]}Qn("ConstantBinder",ls),Qn("CrossFadedConstantBinder",Zs),Qn("SourceExpressionBinder",Ro),Qn("CrossFadedPatternBinder",Ch),Qn("CrossFadedDasharrayBinder",C0),Qn("CompositeExpressionBinder",pu),Qn("ProgramConfiguration",Rp,{omit:["_buffers"]}),Qn("ProgramConfigurationSet",AA);const Dp=Math.pow(2,14)-1,Pp=-Dp-1;function Xs(f){const u=gt/f.extent,d=f.loadGeometry();for(let b=0;b<d.length;b++){const M=d[b];for(let k=0;k<M.length;k++){const R=M[k],K=Math.round(R.x*u),z=Math.round(R.y*u);R.x=Tt(K,Pp,Dp),R.y=Tt(z,Pp,Dp),(K<R.x||K>R.x+1||z<R.y||z>R.y+1)&&Ct("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return d}function WA(f,u){return{type:f.type,id:f.id,properties:f.properties,geometry:u?Xs(f):[]}}const If=-32768;function pC(f,u,d,b,M){f.emplaceBack(If+8*u+b,If+8*d+M)}class Up{constructor(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map((d=>d.id)),this.index=u.index,this.hasDependencies=!1,this.layoutVertexArray=new lt,this.indexArray=new sn,this.segments=new yr,this.programConfigurations=new AA(u.layers,u.zoom),this.stateDependentLayerIds=this.layers.filter((d=>d.isStateDependent())).map((d=>d.id))}populate(u,d,b){const M=this.layers[0],k=[];let R=null,K=!1,z=M.type==="heatmap";if(M.type==="circle"){const ne=M;R=ne.layout.get("circle-sort-key"),K=!R.isConstant(),z=z||ne.paint.get("circle-pitch-alignment")==="map"}const ee=z?d.subdivisionGranularity.circle:1;for(const{feature:ne,id:ce,index:_e,sourceLayerIndex:Se}of u){const ke=this.layers[0]._featureFilter.needGeometry,ze=WA(ne,ke);if(!this.layers[0]._featureFilter.filter(new io(this.zoom),ze,b))continue;const $e=K?R.evaluate(ze,{},b):void 0,it={id:ce,properties:ne.properties,type:ne.type,sourceLayerIndex:Se,index:_e,geometry:ke?ze.geometry:Xs(ne),patterns:{},sortKey:$e};k.push(it)}K&&k.sort(((ne,ce)=>ne.sortKey-ce.sortKey));for(const ne of k){const{geometry:ce,index:_e,sourceLayerIndex:Se}=ne,ke=u[_e].feature;this.addFeature(ne,ce,_e,b,ee),d.featureIndex.insert(ke,ce,_e,Se,this.index)}}update(u,d,b){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,d,this.stateDependentLayers,{imagePositions:b})}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,ro),this.indexBuffer=u.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(u),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(u,d,b,M,k=1){let R;switch(k){case 1:R=[0,7];break;case 3:R=[0,2,5,7];break;case 5:R=[0,1,3,4,6,7];break;case 7:R=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${k}; valid values are 1, 3, 5, 7.`)}const K=R.length;for(const z of d)for(const ee of z){const ne=ee.x,ce=ee.y;if(ne<0||ne>=gt||ce<0||ce>=gt)continue;const _e=this.segments.prepareSegment(K*K,this.layoutVertexArray,this.indexArray,u.sortKey),Se=_e.vertexLength;for(let ke=0;ke<K;ke++)for(let ze=0;ze<K;ze++)pC(this.layoutVertexArray,ne,ce,R[ze],R[ke]);for(let ke=0;ke<K-1;ke++)for(let ze=0;ze<K-1;ze++){const $e=Se+ke*K+ze,it=Se+(ke+1)*K+ze;this.indexArray.emplaceBack($e,it+1,$e+1),this.indexArray.emplaceBack($e,it,it+1)}_e.vertexLength+=K*K,_e.primitiveLength+=(K-1)*(K-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,b,{imagePositions:{},canonical:M})}}function fv(f,u){for(let d=0;d<f.length;d++)if(od(u,f[d]))return!0;for(let d=0;d<u.length;d++)if(od(f,u[d]))return!0;return!!_0(f,u)}function Jm(f,u,d){return!!od(f,u)||!!Js(u,f,d)}function _h(f,u){if(f.length===1)return tr(u,f[0]);for(let d=0;d<u.length;d++){const b=u[d];for(let M=0;M<b.length;M++)if(od(f,b[M]))return!0}for(let d=0;d<f.length;d++)if(tr(u,f[d]))return!0;for(let d=0;d<u.length;d++)if(_0(f,u[d]))return!0;return!1}function P1(f,u,d){if(f.length>1){if(_0(f,u))return!0;for(let b=0;b<u.length;b++)if(Js(u[b],f,d))return!0}for(let b=0;b<f.length;b++)if(Js(f[b],u,d))return!0;return!1}function _0(f,u){if(f.length===0||u.length===0)return!1;for(let d=0;d<f.length-1;d++){const b=f[d],M=f[d+1];for(let k=0;k<u.length-1;k++)if(x0(b,M,u[k],u[k+1]))return!0}return!1}function x0(f,u,d,b){return Lt(f,d,b)!==Lt(u,d,b)&&Lt(f,u,d)!==Lt(f,u,b)}function Js(f,u,d){const b=d*d;if(u.length===1)return f.distSqr(u[0])<b;for(let M=1;M<u.length;M++)if(ba(f,u[M-1],u[M])<b)return!0;return!1}function ba(f,u,d){const b=u.distSqr(d);if(b===0)return f.distSqr(u);const M=((f.x-u.x)*(d.x-u.x)+(f.y-u.y)*(d.y-u.y))/b;return f.distSqr(M<0?u:M>1?d:d.sub(u)._mult(M)._add(u))}function tr(f,u){let d,b,M,k=!1;for(let R=0;R<f.length;R++){d=f[R];for(let K=0,z=d.length-1;K<d.length;z=K++)b=d[K],M=d[z],b.y>u.y!=M.y>u.y&&u.x<(M.x-b.x)*(u.y-b.y)/(M.y-b.y)+b.x&&(k=!k)}return k}function od(f,u){let d=!1;for(let b=0,M=f.length-1;b<f.length;M=b++){const k=f[b],R=f[M];k.y>u.y!=R.y>u.y&&u.x<(R.x-k.x)*(u.y-k.y)/(R.y-k.y)+k.x&&(d=!d)}return d}function U1(f,u,d){const b=d[0],M=d[2];if(f.x<b.x&&u.x<b.x||f.x>M.x&&u.x>M.x||f.y<b.y&&u.y<b.y||f.y>M.y&&u.y>M.y)return!1;const k=Lt(f,u,d[0]);return k!==Lt(f,u,d[1])||k!==Lt(f,u,d[2])||k!==Lt(f,u,d[3])}function hA(f,u,d){const b=u.paint.get(f).value;return b.kind==="constant"?b.value:d.programConfigurations.get(u.id).getMaxValue(f)}function kf(f){return Math.sqrt(f[0]*f[0]+f[1]*f[1])}function Kp(f,u,d,b,M){if(!u[0]&&!u[1])return f;const k=c.convert(u)._mult(M);d==="viewport"&&k._rotate(-b);const R=[];for(let K=0;K<f.length;K++)R.push(f[K].sub(k));return R}function M0({queryGeometry:f,size:u},d){return Jm(f,d,u)}function mu({queryGeometry:f,size:u,transform:d,unwrappedTileID:b,getElevation:M},k){return Jm(f,k,u*(d.projectTileCoordinates(k.x,k.y,b,M).signedDistanceFromCamera/d.cameraToCenterDistance))}function Xx({queryGeometry:f,size:u,transform:d,unwrappedTileID:b,getElevation:M},k){const R=d.projectTileCoordinates(k.x,k.y,b,M).signedDistanceFromCamera,K=u*(d.cameraToCenterDistance/R);return Jm(f,L1(k,d,b,M),K)}function K1({queryGeometry:f,size:u,transform:d,unwrappedTileID:b,getElevation:M},k){return Jm(f,L1(k,d,b,M),u)}function w0({queryGeometry:f,size:u,transform:d,unwrappedTileID:b,getElevation:M,pitchAlignment:k="map",pitchScale:R="map"},K){const z=k==="map"?R==="map"?M0:mu:R==="map"?Xx:K1,ee={queryGeometry:f,size:u,transform:d,unwrappedTileID:b,getElevation:M};for(const ne of K)for(const ce of ne)if(z(ee,ce))return!0;return!1}function L1(f,u,d,b){const M=u.projectTileCoordinates(f.x,f.y,d,b).point;return new c((.5*M.x+.5)*u.width,(.5*-M.y+.5)*u.height)}let F1,pv;Qn("CircleBucket",Up,{omit:["layers"]});var mv={get paint(){return pv=pv||new os({"circle-radius":new Ti(dt.paint_circle["circle-radius"]),"circle-color":new Ti(dt.paint_circle["circle-color"]),"circle-blur":new Ti(dt.paint_circle["circle-blur"]),"circle-opacity":new Ti(dt.paint_circle["circle-opacity"]),"circle-translate":new ni(dt.paint_circle["circle-translate"]),"circle-translate-anchor":new ni(dt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new ni(dt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new ni(dt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Ti(dt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Ti(dt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Ti(dt.paint_circle["circle-stroke-opacity"])})},get layout(){return F1=F1||new os({"circle-sort-key":new Ti(dt.layout_circle["circle-sort-key"])})}};class gv extends hu{constructor(u,d){super(u,mv,d)}createBucket(u){return new Up(u)}queryRadius(u){const d=u;return hA("circle-radius",this,d)+hA("circle-stroke-width",this,d)+kf(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:u,feature:d,featureState:b,geometry:M,transform:k,pixelsToTileUnits:R,unwrappedTileID:K,getElevation:z}){const ee=Kp(u,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-k.bearingInRadians,R),ne=this.paint.get("circle-radius").evaluate(d,b)+this.paint.get("circle-stroke-width").evaluate(d,b),ce=this.paint.get("circle-pitch-scale"),_e=this.paint.get("circle-pitch-alignment");let Se,ke;return _e==="map"?(Se=ee,ke=ne*R):(Se=(function(ze,$e,it,Et){return ze.map((ut=>L1(ut,$e,it,Et)))})(ee,k,K,z),ke=ne),w0({queryGeometry:Se,size:ke,transform:k,unwrappedTileID:K,getElevation:z,pitchAlignment:_e,pitchScale:ce},M)}}class QA extends Up{}let gu;Qn("HeatmapBucket",QA,{omit:["layers"]});var S0={get paint(){return gu=gu||new os({"heatmap-radius":new Ti(dt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Ti(dt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new ni(dt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Il(dt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new ni(dt.paint_heatmap["heatmap-opacity"])})}};function eg(f,{width:u,height:d},b,M){if(M){if(M instanceof Uint8ClampedArray)M=new Uint8Array(M.buffer);else if(M.length!==u*d*b)throw new RangeError(`mismatched image size. expected: ${M.length} but got: ${u*d*b}`)}else M=new Uint8Array(u*d*b);return f.width=u,f.height=d,f.data=M,f}function tg(f,{width:u,height:d},b){if(u===f.width&&d===f.height)return;const M=eg({},{width:u,height:d},b);z1(f,M,{x:0,y:0},{x:0,y:0},{width:Math.min(f.width,u),height:Math.min(f.height,d)},b),f.width=u,f.height=d,f.data=M.data}function z1(f,u,d,b,M,k){if(M.width===0||M.height===0)return u;if(M.width>f.width||M.height>f.height||d.x>f.width-M.width||d.y>f.height-M.height)throw new RangeError("out of range source coordinates for image copy");if(M.width>u.width||M.height>u.height||b.x>u.width-M.width||b.y>u.height-M.height)throw new RangeError("out of range destination coordinates for image copy");const R=f.data,K=u.data;if(R===K)throw new Error("srcData equals dstData, so image is already copied");for(let z=0;z<M.height;z++){const ee=((d.y+z)*f.width+d.x)*k,ne=((b.y+z)*u.width+b.x)*k;for(let ce=0;ce<M.width*k;ce++)K[ne+ce]=R[ee+ce]}return u}class Lp{constructor(u,d){eg(this,u,1,d)}resize(u){tg(this,u,1)}clone(){return new Lp({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(u,d,b,M,k){z1(u,d,b,M,k,1)}}class Al{constructor(u,d){eg(this,u,4,d)}resize(u){tg(this,u,4)}replace(u,d){d?this.data.set(u):this.data=u instanceof Uint8ClampedArray?new Uint8Array(u.buffer):u}clone(){return new Al({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(u,d,b,M,k){z1(u,d,b,M,k,4)}setPixel(u,d,b){const M=4*(u*this.width+d);this.data[M+0]=Math.round(255*b.r/b.a),this.data[M+1]=Math.round(255*b.g/b.a),this.data[M+2]=Math.round(255*b.b/b.a),this.data[M+3]=Math.round(255*b.a)}}function xh(f){const u={},d=f.resolution||256,b=f.clips?f.clips.length:1,M=f.image||new Al({width:d,height:b});if(Math.log(d)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${d}`);const k=(R,K,z)=>{u[f.evaluationKey]=z;const ee=f.expression.evaluate(u);M.setPixel(R/4/d,K/4,ee)};if(f.clips)for(let R=0,K=0;R<b;++R,K+=4*d)for(let z=0,ee=0;z<d;z++,ee+=4){const ne=z/(d-1),{start:ce,end:_e}=f.clips[R];k(K,ee,ce*(1-ne)+_e*ne)}else for(let R=0,K=0;R<d;R++,K+=4)k(0,K,R/(d-1));return M}Qn("AlphaImage",Lp),Qn("RGBAImage",Al);const ng="big-fb";class Jx extends hu{createBucket(u){return new QA(u)}constructor(u,d){super(u,S0,d),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(u){u==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=xh({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(ng)&&this.heatmapFbos.delete(ng)}queryRadius(u){return hA("heatmap-radius",this,u)}queryIntersectsFeature({queryGeometry:u,feature:d,featureState:b,geometry:M,transform:k,pixelsToTileUnits:R,unwrappedTileID:K,getElevation:z}){return w0({queryGeometry:u,size:this.paint.get("heatmap-radius").evaluate(d,b)*R,transform:k,unwrappedTileID:K,getElevation:z},M)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let yv;var Gd={get paint(){return yv=yv||new os({"hillshade-illumination-direction":new ni(dt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new ni(dt.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new ni(dt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new ni(dt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new ni(dt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new ni(dt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new ni(dt.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new ni(dt.paint_hillshade["hillshade-method"])})}};class vv extends hu{constructor(u,d){super(u,Gd,d),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let u=this.paint.get("hillshade-illumination-direction").values,d=this.paint.get("hillshade-illumination-altitude").values,b=this.paint.get("hillshade-highlight-color").values,M=this.paint.get("hillshade-shadow-color").values;const k=Math.max(u.length,d.length,b.length,M.length);u=u.concat(Array(k-u.length).fill(u.at(-1))),d=d.concat(Array(k-d.length).fill(d.at(-1))),b=b.concat(Array(k-b.length).fill(b.at(-1))),M=M.concat(Array(k-M.length).fill(M.at(-1)));const R=d.map(Rn);return{directionRadians:u.map(Rn),altitudeRadians:R,shadowColor:M,highlightColor:b}}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}let j1;var E0={get paint(){return j1=j1||new os({"color-relief-opacity":new ni(dt["paint_color-relief"]["color-relief-opacity"]),"color-relief-color":new Il(dt["paint_color-relief"]["color-relief-color"])})}};class Fp{constructor(u,d,b,M){this.context=u,this.format=b,this.texture=u.gl.createTexture(),this.update(d,M)}update(u,d,b){const{width:M,height:k}=u,R=!(this.size&&this.size[0]===M&&this.size[1]===k||b),{context:K}=this,{gl:z}=K;if(this.useMipmap=!!(d&&d.useMipmap),z.bindTexture(z.TEXTURE_2D,this.texture),K.pixelStoreUnpackFlipY.set(!1),K.pixelStoreUnpack.set(1),K.pixelStoreUnpackPremultiplyAlpha.set(this.format===z.RGBA&&(!d||d.premultiply!==!1)),R)this.size=[M,k],u instanceof HTMLImageElement||u instanceof HTMLCanvasElement||u instanceof HTMLVideoElement||u instanceof ImageData||Wn(u)?z.texImage2D(z.TEXTURE_2D,0,this.format,this.format,z.UNSIGNED_BYTE,u):z.texImage2D(z.TEXTURE_2D,0,this.format,M,k,0,this.format,z.UNSIGNED_BYTE,u.data);else{const{x:ee,y:ne}=b||{x:0,y:0};u instanceof HTMLImageElement||u instanceof HTMLCanvasElement||u instanceof HTMLVideoElement||u instanceof ImageData||Wn(u)?z.texSubImage2D(z.TEXTURE_2D,0,ee,ne,z.RGBA,z.UNSIGNED_BYTE,u):z.texSubImage2D(z.TEXTURE_2D,0,ee,ne,M,k,z.RGBA,z.UNSIGNED_BYTE,u.data)}this.useMipmap&&this.isSizePowerOfTwo()&&z.generateMipmap(z.TEXTURE_2D),K.pixelStoreUnpackFlipY.setDefault(),K.pixelStoreUnpack.setDefault(),K.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(u,d,b){const{context:M}=this,{gl:k}=M;k.bindTexture(k.TEXTURE_2D,this.texture),b!==k.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(b=k.LINEAR),u!==this.filter&&(k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MAG_FILTER,u),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MIN_FILTER,b||u),this.filter=u),d!==this.wrap&&(k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_S,d),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_T,d),this.wrap=d)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:u}=this.context;u.deleteTexture(this.texture),this.texture=null}}class Cs{constructor(u,d,b,M=1,k=1,R=1,K=0){if(this.uid=u,d.height!==d.width)throw new RangeError("DEM tiles must be square");if(b&&!["mapbox","terrarium","custom"].includes(b))return void Ct(`"${b}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=d.height;const z=this.dim=d.height-2;switch(this.data=new Uint32Array(d.data.buffer),b){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=M,this.greenFactor=k,this.blueFactor=R,this.baseShift=K;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let ee=0;ee<z;ee++)this.data[this._idx(-1,ee)]=this.data[this._idx(0,ee)],this.data[this._idx(z,ee)]=this.data[this._idx(z-1,ee)],this.data[this._idx(ee,-1)]=this.data[this._idx(ee,0)],this.data[this._idx(ee,z)]=this.data[this._idx(ee,z-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(z,-1)]=this.data[this._idx(z-1,0)],this.data[this._idx(-1,z)]=this.data[this._idx(0,z-1)],this.data[this._idx(z,z)]=this.data[this._idx(z-1,z-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let ee=0;ee<z;ee++)for(let ne=0;ne<z;ne++){const ce=this.get(ee,ne);ce>this.max&&(this.max=ce),ce<this.min&&(this.min=ce)}}get(u,d){const b=new Uint8Array(this.data.buffer),M=4*this._idx(u,d);return this.unpack(b[M],b[M+1],b[M+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(u,d){if(u<-1||u>=this.dim+1||d<-1||d>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(d+1)*this.stride+(u+1)}unpack(u,d,b){return u*this.redFactor+d*this.greenFactor+b*this.blueFactor-this.baseShift}pack(u){return bv(u,this.getUnpackVector())}getPixels(){return new Al({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(u,d,b){if(this.dim!==u.dim)throw new Error("dem dimension mismatch");let M=d*this.dim,k=d*this.dim+this.dim,R=b*this.dim,K=b*this.dim+this.dim;switch(d){case-1:M=k-1;break;case 1:k=M+1}switch(b){case-1:R=K-1;break;case 1:K=R+1}const z=-d*this.dim,ee=-b*this.dim;for(let ne=R;ne<K;ne++)for(let ce=M;ce<k;ce++)this.data[this._idx(ce,ne)]=u.data[this._idx(ce+z,ne+ee)]}}function bv(f,u){const d=u[0],b=u[1],M=u[2],k=u[3],R=Math.min(d,b,M),K=Math.round((f+k)/R);return{r:Math.floor(K*R/d)%256,g:Math.floor(K*R/b)%256,b:Math.floor(K*R/M)%256}}Qn("DEMData",Cs);class B0 extends hu{constructor(u,d){super(u,E0,d)}_createColorRamp(u){const d={elevationStops:[],colorStops:[]},b=this._transitionablePaint._values["color-relief-color"].value.expression;if(b instanceof Bl&&b._styleExpression.expression instanceof wo){this.colorRampExpression=b;const R=b._styleExpression.expression;d.elevationStops=R.labels,d.colorStops=[];for(const K of d.elevationStops)d.colorStops.push(R.evaluate({globals:{elevation:K}}))}if(d.elevationStops.length<1&&(d.elevationStops=[0],d.colorStops=[Fi.transparent]),d.elevationStops.length<2&&(d.elevationStops.push(d.elevationStops[0]+1),d.colorStops.push(d.colorStops[0])),d.elevationStops.length<=u)return d;const M={elevationStops:[],colorStops:[]},k=(d.elevationStops.length-1)/(u-1);for(let R=0;R<d.elevationStops.length-.5;R+=k)M.elevationStops.push(d.elevationStops[Math.round(R)]),M.colorStops.push(d.colorStops[Math.round(R)]);return Ct(`Too many colors in specification of ${this.id} color-relief layer, may not render properly. Max possible colors: ${u}, provided: ${d.elevationStops.length}`),M}_colorRampChanged(){return this.colorRampExpression!=this._transitionablePaint._values["color-relief-color"].value.expression}getColorRampTextures(u,d,b){if(this.colorRampTextures&&!this._colorRampChanged())return this.colorRampTextures;const M=this._createColorRamp(d),k=new Al({width:M.colorStops.length,height:1}),R=new Al({width:M.colorStops.length,height:1});for(let K=0;K<M.elevationStops.length;K++){const z=bv(M.elevationStops[K],b);R.setPixel(0,K,new Fi(z.r/255,z.g/255,z.b/255,1)),k.setPixel(0,K,M.colorStops[K])}return this.colorRampTextures={elevationTexture:new Fp(u,R,u.gl.RGBA),colorTexture:new Fp(u,k,u.gl.RGBA)},this.colorRampTextures}hasOffscreenPass(){return this.visibility!=="none"&&!!this.colorRampTextures}}const N1=Bi([{name:"a_pos",components:2,type:"Int16"}],4),{members:ig}=N1;function YA(f,u,d){const b=d.patternDependencies;let M=!1;for(const k of u){const R=k.paint.get(`${f}-pattern`);R.isConstant()||(M=!0);const K=R.constantOr(null);K&&(M=!0,b[K.to]=!0,b[K.from]=!0)}return M}function zp(f,u,d,b,M){const{zoom:k}=b,R=M.patternDependencies;for(const K of u){const z=K.paint.get(`${f}-pattern`).value;if(z.kind!=="constant"){let ee=z.evaluate({zoom:k-1},d,{},M.availableImages),ne=z.evaluate({zoom:k},d,{},M.availableImages),ce=z.evaluate({zoom:k+1},d,{},M.availableImages);ee=ee&&ee.name?ee.name:ee,ne=ne&&ne.name?ne.name:ne,ce=ce&&ce.name?ce.name:ce,R[ee]=!0,R[ne]=!0,R[ce]=!0,d.patterns[K.id]={min:ee,mid:ne,max:ce}}}return d}function G1(f,u,d,b,M){let k;if(M===(function(R,K,z,ee){let ne=0;for(let ce=K,_e=z-ee;ce<z;ce+=ee)ne+=(R[_e]-R[ce])*(R[ce+1]+R[_e+1]),_e=ce;return ne})(f,u,d,b)>0)for(let R=u;R<d;R+=b)k=V1(R/b|0,f[R],f[R+1],k);else for(let R=d-b;R>=u;R-=b)k=V1(R/b|0,f[R],f[R+1],k);return k&&Tf(k,k.next)&&(og(k),k=k.next),k}function hl(f,u){if(!f)return f;u||(u=f);let d,b=f;do if(d=!1,b.steiner||!Tf(b,b.next)&&Ca(b.prev,b,b.next)!==0)b=b.next;else{if(og(b),b=u=b.prev,b===b.next)break;d=!0}while(d||b!==u);return u}function dl(f,u,d,b,M,k,R){if(!f)return;!R&&k&&(function(z,ee,ne,ce){let _e=z;do _e.z===0&&(_e.z=Mh(_e.x,_e.y,ee,ne,ce)),_e.prevZ=_e.prev,_e.nextZ=_e.next,_e=_e.next;while(_e!==z);_e.prevZ.nextZ=null,_e.prevZ=null,(function(Se){let ke,ze=1;do{let $e,it=Se;Se=null;let Et=null;for(ke=0;it;){ke++;let ut=it,pt=0;for(let Jt=0;Jt<ze&&(pt++,ut=ut.nextZ,ut);Jt++);let Gt=ze;for(;pt>0||Gt>0&&ut;)pt!==0&&(Gt===0||!ut||it.z<=ut.z)?($e=it,it=it.nextZ,pt--):($e=ut,ut=ut.nextZ,Gt--),Et?Et.nextZ=$e:Se=$e,$e.prevZ=Et,Et=$e;it=ut}Et.nextZ=null,ze*=2}while(ke>1)})(_e)})(f,b,M,k);let K=f;for(;f.prev!==f.next;){const z=f.prev,ee=f.next;if(k?W1(f,b,M,k):mC(f))u.push(z.i,f.i,ee.i),og(f),f=ee.next,K=ee.next;else if((f=ee)===K){R?R===1?dl(f=gC(hl(f),u),u,d,b,M,k,2):R===2&&Cv(f,u,d,b,M,k):dl(hl(f),u,d,b,M,k,1);break}}}function mC(f){const u=f.prev,d=f,b=f.next;if(Ca(u,d,b)>=0)return!1;const M=u.x,k=d.x,R=b.x,K=u.y,z=d.y,ee=b.y,ne=Math.min(M,k,R),ce=Math.min(K,z,ee),_e=Math.max(M,k,R),Se=Math.max(K,z,ee);let ke=b.next;for(;ke!==u;){if(ke.x>=ne&&ke.x<=_e&&ke.y>=ce&&ke.y<=Se&&rg(M,K,k,z,R,ee,ke.x,ke.y)&&Ca(ke.prev,ke,ke.next)>=0)return!1;ke=ke.next}return!0}function W1(f,u,d,b){const M=f.prev,k=f,R=f.next;if(Ca(M,k,R)>=0)return!1;const K=M.x,z=k.x,ee=R.x,ne=M.y,ce=k.y,_e=R.y,Se=Math.min(K,z,ee),ke=Math.min(ne,ce,_e),ze=Math.max(K,z,ee),$e=Math.max(ne,ce,_e),it=Mh(Se,ke,u,d,b),Et=Mh(ze,$e,u,d,b);let ut=f.prevZ,pt=f.nextZ;for(;ut&&ut.z>=it&&pt&&pt.z<=Et;){if(ut.x>=Se&&ut.x<=ze&&ut.y>=ke&&ut.y<=$e&&ut!==M&&ut!==R&&rg(K,ne,z,ce,ee,_e,ut.x,ut.y)&&Ca(ut.prev,ut,ut.next)>=0||(ut=ut.prevZ,pt.x>=Se&&pt.x<=ze&&pt.y>=ke&&pt.y<=$e&&pt!==M&&pt!==R&&rg(K,ne,z,ce,ee,_e,pt.x,pt.y)&&Ca(pt.prev,pt,pt.next)>=0))return!1;pt=pt.nextZ}for(;ut&&ut.z>=it;){if(ut.x>=Se&&ut.x<=ze&&ut.y>=ke&&ut.y<=$e&&ut!==M&&ut!==R&&rg(K,ne,z,ce,ee,_e,ut.x,ut.y)&&Ca(ut.prev,ut,ut.next)>=0)return!1;ut=ut.prevZ}for(;pt&&pt.z<=Et;){if(pt.x>=Se&&pt.x<=ze&&pt.y>=ke&&pt.y<=$e&&pt!==M&&pt!==R&&rg(K,ne,z,ce,ee,_e,pt.x,pt.y)&&Ca(pt.prev,pt,pt.next)>=0)return!1;pt=pt.nextZ}return!0}function gC(f,u){let d=f;do{const b=d.prev,M=d.next.next;!Tf(b,M)&&q1(b,d,d.next,M)&&dA(b,M)&&dA(M,b)&&(u.push(b.i,d.i,M.i),og(d),og(d.next),d=f=M),d=d.next}while(d!==f);return hl(d)}function Cv(f,u,d,b,M,k){let R=f;do{let K=R.next.next;for(;K!==R.prev;){if(R.i!==K.i&&$l(R,K)){let z=xv(R,K);return R=hl(R,R.next),z=hl(z,z.next),dl(R,u,d,b,M,k,0),void dl(z,u,d,b,M,k,0)}K=K.next}R=R.next}while(R!==f)}function _v(f,u){let d=f.x-u.x;return d===0&&(d=f.y-u.y,d===0)&&(d=(f.next.y-f.y)/(f.next.x-f.x)-(u.next.y-u.y)/(u.next.x-u.x)),d}function Q1(f,u){const d=(function(M,k){let R=k;const K=M.x,z=M.y;let ee,ne=-1/0;if(Tf(M,R))return R;do{if(Tf(M,R.next))return R.next;if(z<=R.y&&z>=R.next.y&&R.next.y!==R.y){const ze=R.x+(z-R.y)*(R.next.x-R.x)/(R.next.y-R.y);if(ze<=K&&ze>ne&&(ne=ze,ee=R.x<R.next.x?R:R.next,ze===K))return ee}R=R.next}while(R!==k);if(!ee)return null;const ce=ee,_e=ee.x,Se=ee.y;let ke=1/0;R=ee;do{if(K>=R.x&&R.x>=_e&&K!==R.x&&Y1(z<Se?K:ne,z,_e,Se,z<Se?ne:K,z,R.x,R.y)){const ze=Math.abs(z-R.y)/(K-R.x);dA(R,M)&&(ze<ke||ze===ke&&(R.x>ee.x||R.x===ee.x&&yC(ee,R)))&&(ee=R,ke=ze)}R=R.next}while(R!==ce);return ee})(f,u);if(!d)return u;const b=xv(d,f);return hl(b,b.next),hl(d,d.next)}function yC(f,u){return Ca(f.prev,f,u.prev)<0&&Ca(u.next,f,f.next)<0}function Mh(f,u,d,b,M){return(f=1431655765&((f=858993459&((f=252645135&((f=16711935&((f=(f-d)*M|0)|f<<8))|f<<4))|f<<2))|f<<1))|(u=1431655765&((u=858993459&((u=252645135&((u=16711935&((u=(u-b)*M|0)|u<<8))|u<<4))|u<<2))|u<<1))<<1}function fl(f){let u=f,d=f;do(u.x<d.x||u.x===d.x&&u.y<d.y)&&(d=u),u=u.next;while(u!==f);return d}function Y1(f,u,d,b,M,k,R,K){return(M-R)*(u-K)>=(f-R)*(k-K)&&(f-R)*(b-K)>=(d-R)*(u-K)&&(d-R)*(k-K)>=(M-R)*(b-K)}function rg(f,u,d,b,M,k,R,K){return!(f===R&&u===K)&&Y1(f,u,d,b,M,k,R,K)}function $l(f,u){return f.next.i!==u.i&&f.prev.i!==u.i&&!(function(d,b){let M=d;do{if(M.i!==d.i&&M.next.i!==d.i&&M.i!==b.i&&M.next.i!==b.i&&q1(M,M.next,d,b))return!0;M=M.next}while(M!==d);return!1})(f,u)&&(dA(f,u)&&dA(u,f)&&(function(d,b){let M=d,k=!1;const R=(d.x+b.x)/2,K=(d.y+b.y)/2;do M.y>K!=M.next.y>K&&M.next.y!==M.y&&R<(M.next.x-M.x)*(K-M.y)/(M.next.y-M.y)+M.x&&(k=!k),M=M.next;while(M!==d);return k})(f,u)&&(Ca(f.prev,f,u.prev)||Ca(f,u.prev,u))||Tf(f,u)&&Ca(f.prev,f,f.next)>0&&Ca(u.prev,u,u.next)>0)}function Ca(f,u,d){return(u.y-f.y)*(d.x-u.x)-(u.x-f.x)*(d.y-u.y)}function Tf(f,u){return f.x===u.x&&f.y===u.y}function q1(f,u,d,b){const M=yu(Ca(f,u,d)),k=yu(Ca(f,u,b)),R=yu(Ca(d,b,f)),K=yu(Ca(d,b,u));return M!==k&&R!==K||!(M!==0||!_s(f,d,u))||!(k!==0||!_s(f,b,u))||!(R!==0||!_s(d,f,b))||!(K!==0||!_s(d,u,b))}function _s(f,u,d){return u.x<=Math.max(f.x,d.x)&&u.x>=Math.min(f.x,d.x)&&u.y<=Math.max(f.y,d.y)&&u.y>=Math.min(f.y,d.y)}function yu(f){return f>0?1:f<0?-1:0}function dA(f,u){return Ca(f.prev,f,f.next)<0?Ca(f,u,f.next)>=0&&Ca(f,f.prev,u)>=0:Ca(f,u,f.prev)<0||Ca(f,f.next,u)<0}function xv(f,u){const d=Mv(f.i,f.x,f.y),b=Mv(u.i,u.x,u.y),M=f.next,k=u.prev;return f.next=u,u.prev=f,d.next=M,M.prev=d,b.next=d,d.prev=b,k.next=b,b.prev=k,b}function V1(f,u,d,b){const M=Mv(f,u,d);return b?(M.next=b.next,M.prev=b,b.next.prev=M,b.next=M):(M.prev=M,M.next=M),M}function og(f){f.next.prev=f.prev,f.prev.next=f.next,f.prevZ&&(f.prevZ.nextZ=f.nextZ),f.nextZ&&(f.nextZ.prevZ=f.prevZ)}function Mv(f,u,d){return{i:f,x:u,y:d,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class Wd{constructor(u,d){if(d>u)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=u,this._minGranularity=d}getGranularityForZoomLevel(u){return Math.max(Math.floor(this._baseZoomGranularity/(1<<u)),this._minGranularity,1)}}class vu{constructor(u){this.fill=u.fill,this.line=u.line,this.tile=u.tile,this.stencil=u.stencil,this.circle=u.circle}}vu.noSubdivision=new vu({fill:new Wd(0,0),line:new Wd(0,0),tile:new Wd(0,0),stencil:new Wd(0,0),circle:1}),Qn("SubdivisionGranularityExpression",Wd),Qn("SubdivisionGranularitySetting",vu);const ju=-32768,sg=32767;class ea{constructor(u,d){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=u,this._granularityCellSize=gt/u,this._canonical=d}_getKey(u,d){return(u+=32768)<<16|d+32768}_vertexToIndex(u,d){if(u<-32768||d<-32768||u>32767||d>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const b=0|Math.round(u),M=0|Math.round(d),k=this._getKey(b,M);if(this._vertexDictionary.has(k))return this._vertexDictionary.get(k);const R=this._vertexBuffer.length/2;return this._vertexDictionary.set(k,R),this._vertexBuffer.push(b,M),R}_subdivideTrianglesScanline(u){if(this._granularity<2)return(function(M,k){const R=[];for(let K=0;K<k.length;K+=3){const z=k[K],ee=k[K+1],ne=k[K+2],ce=M[2*z],_e=M[2*z+1];(M[2*ee]-ce)*(M[2*ne+1]-_e)-(M[2*ee+1]-_e)*(M[2*ne]-ce)>0?(R.push(z),R.push(ne),R.push(ee)):(R.push(z),R.push(ee),R.push(ne))}return R})(this._vertexBuffer,u);const d=[],b=u.length;for(let M=0;M<b;M+=3){const k=[u[M+0],u[M+1],u[M+2]],R=[this._vertexBuffer[2*u[M+0]+0],this._vertexBuffer[2*u[M+0]+1],this._vertexBuffer[2*u[M+1]+0],this._vertexBuffer[2*u[M+1]+1],this._vertexBuffer[2*u[M+2]+0],this._vertexBuffer[2*u[M+2]+1]];let K=1/0,z=1/0,ee=-1/0,ne=-1/0;for(let ze=0;ze<3;ze++){const $e=R[2*ze],it=R[2*ze+1];K=Math.min(K,$e),ee=Math.max(ee,$e),z=Math.min(z,it),ne=Math.max(ne,it)}if(K===ee||z===ne)continue;const ce=Math.floor(K/this._granularityCellSize),_e=Math.ceil(ee/this._granularityCellSize),Se=Math.floor(z/this._granularityCellSize),ke=Math.ceil(ne/this._granularityCellSize);if(ce!==_e||Se!==ke)for(let ze=Se;ze<ke;ze++){const $e=this._scanlineGenerateVertexRingForCellRow(ze,R,k);jp(this._vertexBuffer,$e,d)}else d.push(...k)}return d}_scanlineGenerateVertexRingForCellRow(u,d,b){const M=u*this._granularityCellSize,k=M+this._granularityCellSize,R=[];for(let K=0;K<3;K++){const z=d[2*K],ee=d[2*K+1],ne=d[2*(K+1)%6],ce=d[(2*(K+1)+1)%6],_e=d[2*(K+2)%6],Se=d[(2*(K+2)+1)%6],ke=ne-z,ze=ce-ee,$e=ke===0,it=ze===0,Et=(M-ee)/ze,ut=(k-ee)/ze,pt=Math.min(Et,ut),Gt=Math.max(Et,ut);if(!it&&(pt>=1||Gt<=0)||it&&(ee<M||ee>k)){ce>=M&&ce<=k&&R.push(b[(K+1)%3]);continue}!it&&pt>0&&R.push(this._vertexToIndex(z+ke*pt,ee+ze*pt));const Jt=z+ke*Math.max(pt,0),mn=z+ke*Math.min(Gt,1);$e||this._generateIntraEdgeVertices(R,z,ee,ne,ce,Jt,mn),!it&&Gt<1&&R.push(this._vertexToIndex(z+ke*Gt,ee+ze*Gt)),(it||ce>=M&&ce<=k)&&R.push(b[(K+1)%3]),!it&&(ce<=M||ce>=k)&&this._generateInterEdgeVertices(R,z,ee,ne,ce,_e,Se,mn,M,k)}return R}_generateIntraEdgeVertices(u,d,b,M,k,R,K){const z=M-d,ee=k-b,ne=ee===0,ce=ne?Math.min(d,M):Math.min(R,K),_e=ne?Math.max(d,M):Math.max(R,K),Se=Math.floor(ce/this._granularityCellSize)+1,ke=Math.ceil(_e/this._granularityCellSize)-1;if(ne?d<M:R<K)for(let ze=Se;ze<=ke;ze++){const $e=ze*this._granularityCellSize;u.push(this._vertexToIndex($e,b+ee*($e-d)/z))}else for(let ze=ke;ze>=Se;ze--){const $e=ze*this._granularityCellSize;u.push(this._vertexToIndex($e,b+ee*($e-d)/z))}}_generateInterEdgeVertices(u,d,b,M,k,R,K,z,ee,ne){const ce=k-b,_e=R-M,Se=K-k,ke=(ee-k)/Se,ze=(ne-k)/Se,$e=Math.min(ke,ze),it=Math.max(ke,ze),Et=M+_e*$e;let ut=Math.floor(Math.min(Et,z)/this._granularityCellSize)+1,pt=Math.ceil(Math.max(Et,z)/this._granularityCellSize)-1,Gt=z<Et;const Jt=Se===0;if(Jt&&(K===ee||K===ne))return;if(Jt||$e>=1||it<=0){const Nn=b-K,Tn=R+(d-R)*Math.min((ee-K)/Nn,(ne-K)/Nn);ut=Math.floor(Math.min(Tn,z)/this._granularityCellSize)+1,pt=Math.ceil(Math.max(Tn,z)/this._granularityCellSize)-1,Gt=z<Tn}const mn=ce>0?ne:ee;if(Gt)for(let Nn=ut;Nn<=pt;Nn++)u.push(this._vertexToIndex(Nn*this._granularityCellSize,mn));else for(let Nn=pt;Nn>=ut;Nn--)u.push(this._vertexToIndex(Nn*this._granularityCellSize,mn))}_generateOutline(u){const d=[];for(const b of u){const M=gc(b,this._granularity,!0),k=this._pointArrayToIndices(M),R=[];for(let K=1;K<k.length;K++)R.push(k[K-1]),R.push(k[K]);d.push(R)}return d}_handlePoles(u){let d=!1,b=!1;this._canonical&&(this._canonical.y===0&&(d=!0),this._canonical.y===(1<<this._canonical.z)-1&&(b=!0)),(d||b)&&this._fillPoles(u,d,b)}_ensureNoPoleVertices(){const u=this._vertexBuffer;for(let d=0;d<u.length;d+=2){const b=u[d+1];b===ju&&(u[d+1]=-32767),b===sg&&(u[d+1]=32766)}}_generatePoleQuad(u,d,b,M,k,R){M>k!=(R===ju)?(u.push(d),u.push(b),u.push(this._vertexToIndex(M,R)),u.push(b),u.push(this._vertexToIndex(k,R)),u.push(this._vertexToIndex(M,R))):(u.push(b),u.push(d),u.push(this._vertexToIndex(M,R)),u.push(this._vertexToIndex(k,R)),u.push(b),u.push(this._vertexToIndex(M,R)))}_fillPoles(u,d,b){const M=this._vertexBuffer,k=gt,R=u.length;for(let K=2;K<R;K+=3){const z=u[K-2],ee=u[K-1],ne=u[K],ce=M[2*z],_e=M[2*z+1],Se=M[2*ee],ke=M[2*ee+1],ze=M[2*ne],$e=M[2*ne+1];d&&(_e===0&&ke===0&&this._generatePoleQuad(u,z,ee,ce,Se,ju),ke===0&&$e===0&&this._generatePoleQuad(u,ee,ne,Se,ze,ju),$e===0&&_e===0&&this._generatePoleQuad(u,ne,z,ze,ce,ju)),b&&(_e===k&&ke===k&&this._generatePoleQuad(u,z,ee,ce,Se,sg),ke===k&&$e===k&&this._generatePoleQuad(u,ee,ne,Se,ze,sg),$e===k&&_e===k&&this._generatePoleQuad(u,ne,z,ze,ce,sg))}}_initializeVertices(u){for(let d=0;d<u.length;d+=2)this._vertexToIndex(u[d],u[d+1])}subdividePolygonInternal(u,d){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:b,holeIndices:M}=(function(K){const z=[],ee=[];for(const ne of K)if(ne.length!==0){ne!==K[0]&&z.push(ee.length/2);for(let ce=0;ce<ne.length;ce++)ee.push(ne[ce].x),ee.push(ne[ce].y)}return{flattened:ee,holeIndices:z}})(u);let k;this._initializeVertices(b);try{const K=(function(ee,ne,ce=2){const _e=ne&&ne.length,Se=_e?ne[0]*ce:ee.length;let ke=G1(ee,0,Se,ce,!0);const ze=[];if(!ke||ke.next===ke.prev)return ze;let $e,it,Et;if(_e&&(ke=(function(ut,pt,Gt,Jt){const mn=[];for(let Nn=0,Tn=pt.length;Nn<Tn;Nn++){const zn=G1(ut,pt[Nn]*Jt,Nn<Tn-1?pt[Nn+1]*Jt:ut.length,Jt,!1);zn===zn.next&&(zn.steiner=!0),mn.push(fl(zn))}mn.sort(_v);for(let Nn=0;Nn<mn.length;Nn++)Gt=Q1(mn[Nn],Gt);return Gt})(ee,ne,ke,ce)),ee.length>80*ce){$e=ee[0],it=ee[1];let ut=$e,pt=it;for(let Gt=ce;Gt<Se;Gt+=ce){const Jt=ee[Gt],mn=ee[Gt+1];Jt<$e&&($e=Jt),mn<it&&(it=mn),Jt>ut&&(ut=Jt),mn>pt&&(pt=mn)}Et=Math.max(ut-$e,pt-it),Et=Et!==0?32767/Et:0}return dl(ke,ze,ce,$e,it,Et,0),ze})(b,M),z=this._convertIndices(b,K);k=this._subdivideTrianglesScanline(z)}catch(K){console.error(K)}let R=[];return d&&(R=this._generateOutline(u)),this._ensureNoPoleVertices(),this._handlePoles(k),{verticesFlattened:this._vertexBuffer,indicesTriangles:k,indicesLineList:R}}_convertIndices(u,d){const b=[];for(let M=0;M<d.length;M++)b.push(this._vertexToIndex(u[2*d[M]],u[2*d[M]+1]));return b}_pointArrayToIndices(u){const d=[];for(let b=0;b<u.length;b++){const M=u[b];d.push(this._vertexToIndex(M.x,M.y))}return d}}function wv(f,u,d,b=!0){return new ea(d,u).subdividePolygonInternal(f,b)}function gc(f,u,d=!1){if(!f||f.length<1)return[];if(f.length<2)return[];const b=f[0],M=f[f.length-1],k=d&&(b.x!==M.x||b.y!==M.y);if(u<2)return k?[...f,f[0]]:[...f];const R=Math.floor(gt/u),K=[];K.push(new c(f[0].x,f[0].y));const z=f.length,ee=k?z:z-1;for(let ne=0;ne<ee;ne++){const ce=f[ne],_e=ne<z-1?f[ne+1]:f[0],Se=ce.x,ke=ce.y,ze=_e.x,$e=_e.y,it=Se!==ze,Et=ke!==$e;if(!it&&!Et)continue;const ut=ze-Se,pt=$e-ke,Gt=Math.abs(ut),Jt=Math.abs(pt);let mn=Se,Nn=ke;for(;;){const zn=ut>0?(Math.floor(mn/R)+1)*R:(Math.ceil(mn/R)-1)*R,bi=pt>0?(Math.floor(Nn/R)+1)*R:(Math.ceil(Nn/R)-1)*R,jn=Math.abs(mn-zn),Kn=Math.abs(Nn-bi),un=Math.abs(mn-ze),Gi=Math.abs(Nn-$e),Xi=it?jn/Gt:Number.POSITIVE_INFINITY,Oi=Et?Kn/Jt:Number.POSITIVE_INFINITY;if((un<=jn||!it)&&(Gi<=Kn||!Et))break;if(Xi<Oi&&it||!Et){mn=zn,Nn+=pt*Xi;const si=new c(mn,Math.round(Nn));K[K.length-1].x===si.x&&K[K.length-1].y===si.y||K.push(si)}else{mn+=ut*Oi,Nn=bi;const si=new c(Math.round(mn),Nn);K[K.length-1].x===si.x&&K[K.length-1].y===si.y||K.push(si)}}const Tn=new c(ze,$e);K[K.length-1].x===Tn.x&&K[K.length-1].y===Tn.y||K.push(Tn)}return K}function jp(f,u,d){if(u.length===0)throw new Error("Subdivision vertex ring is empty.");let b=0,M=f[2*u[0]];for(let z=1;z<u.length;z++){const ee=f[2*u[z]];ee<M&&(M=ee,b=z)}const k=u.length;let R=b,K=(R+1)%k;for(;;){const z=R-1>=0?R-1:k-1,ee=(K+1)%k,ne=f[2*u[z]],ce=f[2*u[ee]],_e=f[2*u[R]],Se=f[2*u[R]+1],ke=f[2*u[K]+1];let ze=!1;if(ne<ce)ze=!0;else if(ne>ce)ze=!1;else{const $e=ke-Se,it=-(f[2*u[K]]-_e),Et=Se<ke?1:-1;((ne-_e)*$e+(f[2*u[z]+1]-Se)*it)*Et>((ce-_e)*$e+(f[2*u[ee]+1]-Se)*it)*Et&&(ze=!0)}if(ze){const $e=u[z],it=u[R],Et=u[K];$e!==it&&$e!==Et&&it!==Et&&d.push(Et,it,$e),R--,R<0&&(R=k-1)}else{const $e=u[ee],it=u[R],Et=u[K];$e!==it&&$e!==Et&&it!==Et&&d.push(Et,it,$e),K++,K>=k&&(K=0)}if(z===ee)break}}function wh(f,u,d,b,M,k,R,K,z){const ee=M.length/2,ne=R&&K&&z;if(ee<yr.MAX_VERTEX_ARRAY_LENGTH){const ce=u.prepareSegment(ee,d,b),_e=ce.vertexLength;for(let ze=0;ze<k.length;ze+=3)b.emplaceBack(_e+k[ze],_e+k[ze+1],_e+k[ze+2]);let Se,ke;ce.vertexLength+=ee,ce.primitiveLength+=k.length/3,ne&&(ke=R.prepareSegment(ee,d,K),Se=ke.vertexLength,ke.vertexLength+=ee);for(let ze=0;ze<M.length;ze+=2)f(M[ze],M[ze+1]);if(ne)for(let ze=0;ze<z.length;ze++){const $e=z[ze];for(let it=1;it<$e.length;it+=2)K.emplaceBack(Se+$e[it-1],Se+$e[it]);ke.primitiveLength+=$e.length/2}}else(function(ce,_e,Se,ke,ze,$e){const it=[];for(let Jt=0;Jt<ke.length/2;Jt++)it.push(-1);const Et={count:0};let ut=0,pt=ce.getOrCreateLatestSegment(_e,Se),Gt=pt.vertexLength;for(let Jt=2;Jt<ze.length;Jt+=3){const mn=ze[Jt-2],Nn=ze[Jt-1],Tn=ze[Jt];let zn=it[mn]<ut,bi=it[Nn]<ut,jn=it[Tn]<ut;pt.vertexLength+((zn?1:0)+(bi?1:0)+(jn?1:0))>yr.MAX_VERTEX_ARRAY_LENGTH&&(pt=ce.createNewSegment(_e,Se),ut=Et.count,zn=!0,bi=!0,jn=!0,Gt=0);const Kn=Np(it,ke,$e,Et,mn,zn,pt),un=Np(it,ke,$e,Et,Nn,bi,pt),Gi=Np(it,ke,$e,Et,Tn,jn,pt);Se.emplaceBack(Gt+Kn-ut,Gt+un-ut,Gt+Gi-ut),pt.primitiveLength++}})(u,d,b,M,k,f),ne&&(function(ce,_e,Se,ke,ze,$e){const it=[];for(let Jt=0;Jt<ke.length/2;Jt++)it.push(-1);const Et={count:0};let ut=0,pt=ce.getOrCreateLatestSegment(_e,Se),Gt=pt.vertexLength;for(let Jt=0;Jt<ze.length;Jt++){const mn=ze[Jt];for(let Nn=1;Nn<ze[Jt].length;Nn+=2){const Tn=mn[Nn-1],zn=mn[Nn];let bi=it[Tn]<ut,jn=it[zn]<ut;pt.vertexLength+((bi?1:0)+(jn?1:0))>yr.MAX_VERTEX_ARRAY_LENGTH&&(pt=ce.createNewSegment(_e,Se),ut=Et.count,bi=!0,jn=!0,Gt=0);const Kn=Np(it,ke,$e,Et,Tn,bi,pt),un=Np(it,ke,$e,Et,zn,jn,pt);Se.emplaceBack(Gt+Kn-ut,Gt+un-ut),pt.primitiveLength++}}})(R,d,K,M,z,f),u.forceNewSegmentOnNextPrepare(),R?.forceNewSegmentOnNextPrepare()}function Np(f,u,d,b,M,k,R){if(k){const K=b.count;return d(u[2*M],u[2*M+1]),f[M]=b.count,b.count++,R.vertexLength++,K}return f[M]}class O0{constructor(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map((d=>d.id)),this.index=u.index,this.hasDependencies=!1,this.patternFeatures=[],this.layoutVertexArray=new nt,this.indexArray=new sn,this.indexArray2=new ti,this.programConfigurations=new AA(u.layers,u.zoom),this.segments=new yr,this.segments2=new yr,this.stateDependentLayerIds=this.layers.filter((d=>d.isStateDependent())).map((d=>d.id))}populate(u,d,b){this.hasDependencies=YA("fill",this.layers,d);const M=this.layers[0].layout.get("fill-sort-key"),k=!M.isConstant(),R=[];for(const{feature:K,id:z,index:ee,sourceLayerIndex:ne}of u){const ce=this.layers[0]._featureFilter.needGeometry,_e=WA(K,ce);if(!this.layers[0]._featureFilter.filter(new io(this.zoom),_e,b))continue;const Se=k?M.evaluate(_e,{},b,d.availableImages):void 0,ke={id:z,properties:K.properties,type:K.type,sourceLayerIndex:ne,index:ee,geometry:ce?_e.geometry:Xs(K),patterns:{},sortKey:Se};R.push(ke)}k&&R.sort(((K,z)=>K.sortKey-z.sortKey));for(const K of R){const{geometry:z,index:ee,sourceLayerIndex:ne}=K;if(this.hasDependencies){const ce=zp("fill",this.layers,K,{zoom:this.zoom},d);this.patternFeatures.push(ce)}else this.addFeature(K,z,ee,b,{},d.subdivisionGranularity);d.featureIndex.insert(u[ee].feature,z,ee,ne,this.index)}}update(u,d,b){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,d,this.stateDependentLayers,{imagePositions:b})}addFeatures(u,d,b){for(const M of this.patternFeatures)this.addFeature(M,M.geometry,M.index,d,b,u.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,ig),this.indexBuffer=u.createIndexBuffer(this.indexArray),this.indexBuffer2=u.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(u),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(u,d,b,M,k,R){for(const K of Mf(d,500)){const z=wv(K,M,R.fill.getGranularityForZoomLevel(M.z)),ee=this.layoutVertexArray;wh(((ne,ce)=>{ee.emplaceBack(ne,ce)}),this.segments,this.layoutVertexArray,this.indexArray,z.verticesFlattened,z.indicesTriangles,this.segments2,this.indexArray2,z.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,b,{imagePositions:k,canonical:M})}}let qA,Sv;Qn("FillBucket",O0,{omit:["layers","patternFeatures"]});var Rf={get paint(){return Sv=Sv||new os({"fill-antialias":new ni(dt.paint_fill["fill-antialias"]),"fill-opacity":new Ti(dt.paint_fill["fill-opacity"]),"fill-color":new Ti(dt.paint_fill["fill-color"]),"fill-outline-color":new Ti(dt.paint_fill["fill-outline-color"]),"fill-translate":new ni(dt.paint_fill["fill-translate"]),"fill-translate-anchor":new ni(dt.paint_fill["fill-translate-anchor"]),"fill-pattern":new ga(dt.paint_fill["fill-pattern"])})},get layout(){return qA=qA||new os({"fill-sort-key":new Ti(dt.layout_fill["fill-sort-key"])})}};class I0 extends hu{constructor(u,d){super(u,Rf,d)}recalculate(u,d){super.recalculate(u,d);const b=this.paint._values["fill-outline-color"];b.value.kind==="constant"&&b.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(u){return new O0(u)}queryRadius(){return kf(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:u,geometry:d,transform:b,pixelsToTileUnits:M}){return _h(Kp(u,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-b.bearingInRadians,M),d)}isTileClipped(){return!0}}const k0=Bi([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),ag=Bi([{name:"a_centroid",components:2,type:"Int16"}],4),{members:vC}=k0;class Gp{constructor(u,d,b,M,k){this.properties={},this.extent=b,this.type=0,this.id=void 0,this._pbf=u,this._geometry=-1,this._keys=M,this._values=k,u.readFields(T0,this,d)}loadGeometry(){const u=this._pbf;u.pos=this._geometry;const d=u.readVarint()+u.pos,b=[];let M,k=1,R=0,K=0,z=0;for(;u.pos<d;){if(R<=0){const ee=u.readVarint();k=7&ee,R=ee>>3}if(R--,k===1||k===2)K+=u.readSVarint(),z+=u.readSVarint(),k===1&&(M&&b.push(M),M=[]),M&&M.push(new c(K,z));else{if(k!==7)throw new Error(`unknown command ${k}`);M&&M.push(M[0].clone())}}return M&&b.push(M),b}bbox(){const u=this._pbf;u.pos=this._geometry;const d=u.readVarint()+u.pos;let b=1,M=0,k=0,R=0,K=1/0,z=-1/0,ee=1/0,ne=-1/0;for(;u.pos<d;){if(M<=0){const ce=u.readVarint();b=7&ce,M=ce>>3}if(M--,b===1||b===2)k+=u.readSVarint(),R+=u.readSVarint(),k<K&&(K=k),k>z&&(z=k),R<ee&&(ee=R),R>ne&&(ne=R);else if(b!==7)throw new Error(`unknown command ${b}`)}return[K,ee,z,ne]}toGeoJSON(u,d,b){const M=this.extent*Math.pow(2,b),k=this.extent*u,R=this.extent*d,K=this.loadGeometry();function z(_e){return[360*(_e.x+k)/M-180,360/Math.PI*Math.atan(Math.exp((1-2*(_e.y+R)/M)*Math.PI))-90]}function ee(_e){return _e.map(z)}let ne;if(this.type===1){const _e=[];for(const ke of K)_e.push(ke[0]);const Se=ee(_e);ne=_e.length===1?{type:"Point",coordinates:Se[0]}:{type:"MultiPoint",coordinates:Se}}else if(this.type===2){const _e=K.map(ee);ne=_e.length===1?{type:"LineString",coordinates:_e[0]}:{type:"MultiLineString",coordinates:_e}}else{if(this.type!==3)throw new Error("unknown feature type");{const _e=(function(ke){const ze=ke.length;if(ze<=1)return[ke];const $e=[];let it,Et;for(let ut=0;ut<ze;ut++){const pt=bC(ke[ut]);pt!==0&&(Et===void 0&&(Et=pt<0),Et===pt<0?(it&&$e.push(it),it=[ke[ut]]):it&&it.push(ke[ut]))}return it&&$e.push(it),$e})(K),Se=[];for(const ke of _e)Se.push(ke.map(ee));ne=Se.length===1?{type:"Polygon",coordinates:Se[0]}:{type:"MultiPolygon",coordinates:Se}}}const ce={type:"Feature",geometry:ne,properties:this.properties};return this.id!=null&&(ce.id=this.id),ce}}function T0(f,u,d){f===1?u.id=d.readVarint():f===2?(function(b,M){const k=b.readVarint()+b.pos;for(;b.pos<k;){const R=M._keys[b.readVarint()],K=M._values[b.readVarint()];M.properties[R]=K}})(d,u):f===3?u.type=d.readVarint():f===4&&(u._geometry=d.pos)}function bC(f){let u=0;for(let d,b,M=0,k=f.length,R=k-1;M<k;R=M++)d=f[M],b=f[R],u+=(b.x-d.x)*(d.y+b.y);return u}Gp.types=["Unknown","Point","LineString","Polygon"];class R0{constructor(u,d){this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=u,this._keys=[],this._values=[],this._features=[],u.readFields(CC,this,d),this.length=this._features.length}feature(u){if(u<0||u>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[u];const d=this._pbf.readVarint()+this._pbf.pos;return new Gp(this._pbf,d,this.extent,this._keys,this._values)}}function CC(f,u,d){f===15?u.version=d.readVarint():f===1?u.name=d.readString():f===5?u.extent=d.readVarint():f===2?u._features.push(d.pos):f===3?u._keys.push(d.readString()):f===4&&u._values.push((function(b){let M=null;const k=b.readVarint()+b.pos;for(;b.pos<k;){const R=b.readVarint()>>3;M=R===1?b.readString():R===2?b.readFloat():R===3?b.readDouble():R===4?b.readVarint64():R===5?b.readVarint():R===6?b.readSVarint():R===7?b.readBoolean():null}if(M==null)throw new Error("unknown feature value");return M})(d))}class _C{constructor(u,d){this.layers=u.readFields(e2,{},d)}}function e2(f,u,d){if(f===3){const b=new R0(d,d.readVarint()+d.pos);b.length&&(u[b.name]=b)}}const So=Math.pow(2,13);function Go(f,u,d,b,M,k,R,K){f.emplaceBack(u,d,2*Math.floor(b*So)+R,M*So*2,k*So*2,Math.round(K))}class Qr{constructor(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map((d=>d.id)),this.index=u.index,this.hasDependencies=!1,this.layoutVertexArray=new ht,this.centroidVertexArray=new rt,this.indexArray=new sn,this.programConfigurations=new AA(u.layers,u.zoom),this.segments=new yr,this.stateDependentLayerIds=this.layers.filter((d=>d.isStateDependent())).map((d=>d.id))}populate(u,d,b){this.features=[],this.hasDependencies=YA("fill-extrusion",this.layers,d);for(const{feature:M,id:k,index:R,sourceLayerIndex:K}of u){const z=this.layers[0]._featureFilter.needGeometry,ee=WA(M,z);if(!this.layers[0]._featureFilter.filter(new io(this.zoom),ee,b))continue;const ne={id:k,sourceLayerIndex:K,index:R,geometry:z?ee.geometry:Xs(M),properties:M.properties,type:M.type,patterns:{}};this.hasDependencies?this.features.push(zp("fill-extrusion",this.layers,ne,{zoom:this.zoom},d)):this.addFeature(ne,ne.geometry,R,b,{},d.subdivisionGranularity),d.featureIndex.insert(M,ne.geometry,R,K,this.index,!0)}}addFeatures(u,d,b){for(const M of this.features){const{geometry:k}=M;this.addFeature(M,k,M.index,d,b,u.subdivisionGranularity)}}update(u,d,b){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,d,this.stateDependentLayers,{imagePositions:b})}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,vC),this.centroidVertexBuffer=u.createVertexBuffer(this.centroidVertexArray,ag.members,!0),this.indexBuffer=u.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(u),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(u,d,b,M,k,R){for(const K of Mf(d,500)){const z={x:0,y:0,sampleCount:0},ee=this.layoutVertexArray.length;this.processPolygon(z,M,u,K,R);const ne=this.layoutVertexArray.length-ee,ce=Math.floor(z.x/z.sampleCount),_e=Math.floor(z.y/z.sampleCount);for(let Se=0;Se<ne;Se++)this.centroidVertexArray.emplaceBack(ce,_e)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,b,{imagePositions:k,canonical:M})}processPolygon(u,d,b,M,k){if(M.length<1||Wc(M[0]))return;for(const ce of M)ce.length!==0&&Ao(u,ce);const R={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},K=k.fill.getGranularityForZoomLevel(d.z),z=Gp.types[b.type]==="Polygon";for(const ce of M){if(ce.length===0||Wc(ce))continue;const _e=gc(ce,K,z);this._generateSideFaces(_e,R)}if(!z)return;const ee=wv(M,d,K,!1),ne=this.layoutVertexArray;wh(((ce,_e)=>{Go(ne,ce,_e,0,0,1,1,0)}),this.segments,this.layoutVertexArray,this.indexArray,ee.verticesFlattened,ee.indicesTriangles)}_generateSideFaces(u,d){let b=0;for(let M=1;M<u.length;M++){const k=u[M],R=u[M-1];if(us(k,R))continue;d.segment.vertexLength+4>yr.MAX_VERTEX_ARRAY_LENGTH&&(d.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const K=k.sub(R)._perp()._unit(),z=R.dist(k);b+z>32768&&(b=0),Go(this.layoutVertexArray,k.x,k.y,K.x,K.y,0,0,b),Go(this.layoutVertexArray,k.x,k.y,K.x,K.y,0,1,b),b+=z,Go(this.layoutVertexArray,R.x,R.y,K.x,K.y,0,0,b),Go(this.layoutVertexArray,R.x,R.y,K.x,K.y,0,1,b);const ee=d.segment.vertexLength;this.indexArray.emplaceBack(ee,ee+2,ee+1),this.indexArray.emplaceBack(ee+1,ee+2,ee+3),d.segment.vertexLength+=4,d.segment.primitiveLength+=2}}}function Ao(f,u){for(let d=0;d<u.length;d++){const b=u[d];d===u.length-1&&u[0].x===b.x&&u[0].y===b.y||(f.x+=b.x,f.y+=b.y,f.sampleCount++)}}function us(f,u){return f.x===u.x&&(f.x<0||f.x>gt)||f.y===u.y&&(f.y<0||f.y>gt)}function Wc(f){return f.every((u=>u.x<0))||f.every((u=>u.x>gt))||f.every((u=>u.y<0))||f.every((u=>u.y>gt))}let Qd;Qn("FillExtrusionBucket",Qr,{omit:["layers","features"]});var lg={get paint(){return Qd=Qd||new os({"fill-extrusion-opacity":new ni(dt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Ti(dt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new ni(dt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new ni(dt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new ga(dt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Ti(dt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Ti(dt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new ni(dt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class Ev extends hu{constructor(u,d){super(u,lg,d)}createBucket(u){return new Qr(u)}queryRadius(){return kf(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:u,feature:d,featureState:b,geometry:M,transform:k,pixelsToTileUnits:R,pixelPosMatrix:K}){const z=Kp(u,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-k.bearingInRadians,R),ee=this.paint.get("fill-extrusion-height").evaluate(d,b),ne=this.paint.get("fill-extrusion-base").evaluate(d,b),ce=(function(Se,ke){const ze=[];for(const $e of Se){const it=[$e.x,$e.y,0,1];Te(it,it,ke),ze.push(new c(it[0]/it[3],it[1]/it[3]))}return ze})(z,K),_e=(function(Se,ke,ze,$e){const it=[],Et=[],ut=$e[8]*ke,pt=$e[9]*ke,Gt=$e[10]*ke,Jt=$e[11]*ke,mn=$e[8]*ze,Nn=$e[9]*ze,Tn=$e[10]*ze,zn=$e[11]*ze;for(const bi of Se){const jn=[],Kn=[];for(const un of bi){const Gi=un.x,Xi=un.y,Oi=$e[0]*Gi+$e[4]*Xi+$e[12],si=$e[1]*Gi+$e[5]*Xi+$e[13],Or=$e[2]*Gi+$e[6]*Xi+$e[14],Fs=$e[3]*Gi+$e[7]*Xi+$e[15],_a=Or+Gt,ia=Fs+Jt,gl=Oi+mn,La=si+Nn,xa=Or+Tn,es=Fs+zn,Ts=new c((Oi+ut)/ia,(si+pt)/ia);Ts.z=_a/ia,jn.push(Ts);const Tl=new c(gl/es,La/es);Tl.z=xa/es,Kn.push(Tl)}it.push(jn),Et.push(Kn)}return[it,Et]})(M,ne,ee,K);return(function(Se,ke,ze){let $e=1/0;_h(ze,ke)&&($e=la(ze,ke[0]));for(let it=0;it<ke.length;it++){const Et=ke[it],ut=Se[it];for(let pt=0;pt<Et.length-1;pt++){const Gt=Et[pt],Jt=[Gt,Et[pt+1],ut[pt+1],ut[pt],Gt];fv(ze,Jt)&&($e=Math.min($e,la(ze,Jt)))}}return $e!==1/0&&$e})(_e[0],_e[1],ce)}}function yc(f,u){return f.x*u.x+f.y*u.y}function la(f,u){if(f.length===1){let d=0;const b=u[d++];let M;for(;!M||b.equals(M);)if(M=u[d++],!M)return 1/0;for(;d<u.length;d++){const k=u[d],R=f[0],K=M.sub(b),z=k.sub(b),ee=R.sub(b),ne=yc(K,K),ce=yc(K,z),_e=yc(z,z),Se=yc(ee,K),ke=yc(ee,z),ze=ne*_e-ce*ce,$e=(_e*Se-ce*ke)/ze,it=(ne*ke-ce*Se)/ze,Et=b.z*(1-$e-it)+M.z*$e+k.z*it;if(isFinite(Et))return Et}return 1/0}{let d=1/0;for(const b of u)d=Math.min(d,b.z);return d}}const Df=Bi([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:Wp}=Df,Bv=Bi([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:fA}=Bv,ug=Math.cos(Math.PI/180*37.5),cg=Math.pow(2,14)/.5;class Nu{constructor(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map((d=>d.id)),this.index=u.index,this.hasDependencies=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((d=>{this.gradients[d.id]={}})),this.layoutVertexArray=new bt,this.layoutVertexArray2=new st,this.indexArray=new sn,this.programConfigurations=new AA(u.layers,u.zoom),this.segments=new yr,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((d=>d.isStateDependent())).map((d=>d.id))}populate(u,d,b){this.hasDependencies=YA("line",this.layers,d)||this.hasLineDasharray(this.layers);const M=this.layers[0].layout.get("line-sort-key"),k=!M.isConstant(),R=[];for(const{feature:K,id:z,index:ee,sourceLayerIndex:ne}of u){const ce=this.layers[0]._featureFilter.needGeometry,_e=WA(K,ce);if(!this.layers[0]._featureFilter.filter(new io(this.zoom),_e,b))continue;const Se=k?M.evaluate(_e,{},b):void 0,ke={id:z,properties:K.properties,type:K.type,sourceLayerIndex:ne,index:ee,geometry:ce?_e.geometry:Xs(K),patterns:{},dashes:{},sortKey:Se};R.push(ke)}k&&R.sort(((K,z)=>K.sortKey-z.sortKey));for(const K of R){const{geometry:z,index:ee,sourceLayerIndex:ne}=K;this.hasDependencies?(YA("line",this.layers,d)?zp("line",this.layers,K,{zoom:this.zoom},d):this.hasLineDasharray(this.layers)&&this.addLineDashDependencies(this.layers,K,this.zoom,d),this.patternFeatures.push(K)):this.addFeature(K,z,ee,b,{},{},d.subdivisionGranularity),d.featureIndex.insert(u[ee].feature,z,ee,ne,this.index)}}update(u,d,b,M){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,d,this.stateDependentLayers,{imagePositions:b,dashPositions:M})}addFeatures(u,d,b,M){for(const k of this.patternFeatures)this.addFeature(k,k.geometry,k.index,d,b,M,u.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(u){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=u.createVertexBuffer(this.layoutVertexArray2,fA)),this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,Wp),this.indexBuffer=u.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(u),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(u){if(u.properties&&Object.prototype.hasOwnProperty.call(u.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(u.properties,"mapbox_clip_end"))return{start:+u.properties.mapbox_clip_start,end:+u.properties.mapbox_clip_end}}addFeature(u,d,b,M,k,R,K){const z=this.layers[0].layout,ee=z.get("line-join").evaluate(u,{}),ne=z.get("line-cap"),ce=z.get("line-miter-limit"),_e=z.get("line-round-limit");this.lineClips=this.lineFeatureClips(u);for(const Se of d)this.addLine(Se,u,ee,ne,ce,_e,M,K);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,b,{imagePositions:k,dashPositions:R,canonical:M})}addLine(u,d,b,M,k,R,K,z){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,u=gc(u,K?z.line.getGranularityForZoomLevel(K.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let ut=0;ut<u.length-1;ut++)this.totalDistance+=u[ut].dist(u[ut+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const ee=Gp.types[d.type]==="Polygon";let ne=u.length;for(;ne>=2&&u[ne-1].equals(u[ne-2]);)ne--;let ce=0;for(;ce<ne-1&&u[ce].equals(u[ce+1]);)ce++;if(ne<(ee?3:2))return;b==="bevel"&&(k=1.05);const _e=this.overscaling<=16?122880/(512*this.overscaling):0,Se=this.segments.prepareSegment(10*ne,this.layoutVertexArray,this.indexArray);let ke,ze,$e,it,Et;this.e1=this.e2=-1,ee&&(ke=u[ne-2],Et=u[ce].sub(ke)._unit()._perp());for(let ut=ce;ut<ne;ut++){if($e=ut===ne-1?ee?u[ce+1]:void 0:u[ut+1],$e&&u[ut].equals($e))continue;Et&&(it=Et),ke&&(ze=ke),ke=u[ut],Et=$e?$e.sub(ke)._unit()._perp():it,it=it||Et;let pt=it.add(Et);pt.x===0&&pt.y===0||pt._unit();const Gt=it.x*Et.x+it.y*Et.y,Jt=pt.x*Et.x+pt.y*Et.y,mn=Jt!==0?1/Jt:1/0,Nn=2*Math.sqrt(2-2*Jt),Tn=Jt<ug&&ze&&$e,zn=it.x*Et.y-it.y*Et.x>0;if(Tn&&ut>ce){const Kn=ke.dist(ze);if(Kn>2*_e){const un=ke.sub(ke.sub(ze)._mult(_e/Kn)._round());this.updateDistance(ze,un),this.addCurrentVertex(un,it,0,0,Se),ze=un}}const bi=ze&&$e;let jn=bi?b:ee?"butt":M;if(bi&&jn==="round"&&(mn<R?jn="miter":mn<=2&&(jn="fakeround")),jn==="miter"&&mn>k&&(jn="bevel"),jn==="bevel"&&(mn>2&&(jn="flipbevel"),mn<k&&(jn="miter")),ze&&this.updateDistance(ze,ke),jn==="miter")pt._mult(mn),this.addCurrentVertex(ke,pt,0,0,Se);else if(jn==="flipbevel"){if(mn>100)pt=Et.mult(-1);else{const Kn=mn*it.add(Et).mag()/it.sub(Et).mag();pt._perp()._mult(Kn*(zn?-1:1))}this.addCurrentVertex(ke,pt,0,0,Se),this.addCurrentVertex(ke,pt.mult(-1),0,0,Se)}else if(jn==="bevel"||jn==="fakeround"){const Kn=-Math.sqrt(mn*mn-1),un=zn?Kn:0,Gi=zn?0:Kn;if(ze&&this.addCurrentVertex(ke,it,un,Gi,Se),jn==="fakeround"){const Xi=Math.round(180*Nn/Math.PI/20);for(let Oi=1;Oi<Xi;Oi++){let si=Oi/Xi;if(si!==.5){const Fs=si-.5;si+=si*Fs*(si-1)*((1.0904+Gt*(Gt*(3.55645-1.43519*Gt)-3.2452))*Fs*Fs+(.848013+Gt*(.215638*Gt-1.06021)))}const Or=Et.sub(it)._mult(si)._add(it)._unit()._mult(zn?-1:1);this.addHalfVertex(ke,Or.x,Or.y,!1,zn,0,Se)}}$e&&this.addCurrentVertex(ke,Et,-un,-Gi,Se)}else if(jn==="butt")this.addCurrentVertex(ke,pt,0,0,Se);else if(jn==="square"){const Kn=ze?1:-1;this.addCurrentVertex(ke,pt,Kn,Kn,Se)}else jn==="round"&&(ze&&(this.addCurrentVertex(ke,it,0,0,Se),this.addCurrentVertex(ke,it,1,1,Se,!0)),$e&&(this.addCurrentVertex(ke,Et,-1,-1,Se,!0),this.addCurrentVertex(ke,Et,0,0,Se)));if(Tn&&ut<ne-1){const Kn=ke.dist($e);if(Kn>2*_e){const un=ke.add($e.sub(ke)._mult(_e/Kn)._round());this.updateDistance(ke,un),this.addCurrentVertex(un,Et,0,0,Se),ke=un}}}}addCurrentVertex(u,d,b,M,k,R=!1){const K=d.y*M-d.x,z=-d.y-d.x*M;this.addHalfVertex(u,d.x+d.y*b,d.y-d.x*b,R,!1,b,k),this.addHalfVertex(u,K,z,R,!0,-M,k),this.distance>cg/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(u,d,b,M,k,R))}addHalfVertex({x:u,y:d},b,M,k,R,K,z){const ee=.5*(this.lineClips?this.scaledDistance*(cg-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((u<<1)+(k?1:0),(d<<1)+(R?1:0),Math.round(63*b)+128,Math.round(63*M)+128,1+(K===0?0:K<0?-1:1)|(63&ee)<<2,ee>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const ne=z.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,ne,this.e2),z.primitiveLength++),R?this.e2=ne:this.e1=ne}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(u,d){this.distance+=u.dist(d),this.updateScaledDistance()}hasLineDasharray(u){for(const d of u){const b=d.paint.get("line-dasharray");if(b&&!b.isConstant())return!0}return!1}addLineDashDependencies(u,d,b,M){for(const k of u){const R=k.paint.get("line-dasharray");if(!R||R.value.kind==="constant")continue;const K=k.layout.get("line-cap")==="round",z={dasharray:R.value.evaluate({zoom:b-1},d,{}),round:K},ee={dasharray:R.value.evaluate({zoom:b},d,{}),round:K},ne={dasharray:R.value.evaluate({zoom:b+1},d,{}),round:K},ce=`${z.dasharray.join(",")},${z.round}`,_e=`${ee.dasharray.join(",")},${ee.round}`,Se=`${ne.dasharray.join(",")},${ne.round}`;M.dashDependencies[ce]=z,M.dashDependencies[_e]=ee,M.dashDependencies[Se]=ne,d.dashes[k.id]={min:ce,mid:_e,max:Se}}}}let $1,Ag;Qn("LineBucket",Nu,{omit:["layers","patternFeatures"]});var Ov={get paint(){return Ag=Ag||new os({"line-opacity":new Ti(dt.paint_line["line-opacity"]),"line-color":new Ti(dt.paint_line["line-color"]),"line-translate":new ni(dt.paint_line["line-translate"]),"line-translate-anchor":new ni(dt.paint_line["line-translate-anchor"]),"line-width":new Ti(dt.paint_line["line-width"]),"line-gap-width":new Ti(dt.paint_line["line-gap-width"]),"line-offset":new Ti(dt.paint_line["line-offset"]),"line-blur":new Ti(dt.paint_line["line-blur"]),"line-dasharray":new ga(dt.paint_line["line-dasharray"]),"line-pattern":new ga(dt.paint_line["line-pattern"]),"line-gradient":new Il(dt.paint_line["line-gradient"])})},get layout(){return $1=$1||new os({"line-cap":new ni(dt.layout_line["line-cap"]),"line-join":new Ti(dt.layout_line["line-join"]),"line-miter-limit":new ni(dt.layout_line["line-miter-limit"]),"line-round-limit":new ni(dt.layout_line["line-round-limit"]),"line-sort-key":new Ti(dt.layout_line["line-sort-key"])})}};class Qp extends Ti{possiblyEvaluate(u,d){return d=new io(Math.floor(d.zoom),{now:d.now,fadeDuration:d.fadeDuration,zoomHistory:d.zoomHistory,transition:d.transition}),super.possiblyEvaluate(u,d)}evaluate(u,d,b,M){return d=Ke({},d,{zoom:Math.floor(d.zoom)}),super.evaluate(u,d,b,M)}}let Yp;class Pf extends hu{constructor(u,d){super(u,Ov,d),this.gradientVersion=0,Yp||(Yp=new Qp(Ov.paint.properties["line-width"].specification),Yp.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(u){if(u==="line-gradient"){const d=this.gradientExpression();this.stepInterpolant=!!(function(b){return b._styleExpression!==void 0})(d)&&d._styleExpression.expression instanceof qs,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(u,d){super.recalculate(u,d),this.paint._values["line-floorwidth"]=Yp.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,u)}createBucket(u){return new Nu(u)}queryRadius(u){const d=u,b=pl(hA("line-width",this,d),hA("line-gap-width",this,d)),M=hA("line-offset",this,d);return b/2+Math.abs(M)+kf(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:u,feature:d,featureState:b,geometry:M,transform:k,pixelsToTileUnits:R}){const K=Kp(u,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-k.bearingInRadians,R),z=R/2*pl(this.paint.get("line-width").evaluate(d,b),this.paint.get("line-gap-width").evaluate(d,b)),ee=this.paint.get("line-offset").evaluate(d,b);return ee&&(M=(function(ne,ce){const _e=[];for(let Se=0;Se<ne.length;Se++){const ke=ne[Se],ze=[];for(let $e=0;$e<ke.length;$e++){const it=ke[$e-1],Et=ke[$e],ut=ke[$e+1],pt=$e===0?new c(0,0):Et.sub(it)._unit()._perp(),Gt=$e===ke.length-1?new c(0,0):ut.sub(Et)._unit()._perp(),Jt=pt._add(Gt)._unit(),mn=Jt.x*Gt.x+Jt.y*Gt.y;mn!==0&&Jt._mult(1/mn),ze.push(Jt._mult(ce)._add(Et))}_e.push(ze)}return _e})(M,ee*R)),(function(ne,ce,_e){for(let Se=0;Se<ce.length;Se++){const ke=ce[Se];if(ne.length>=3){for(let ze=0;ze<ke.length;ze++)if(od(ne,ke[ze]))return!0}if(P1(ne,ke,_e))return!0}return!1})(K,M,z)}isTileClipped(){return!0}}function pl(f,u){return u>0?u+2*f:f}const Uf=Bi([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),hg=Bi([{name:"a_projected_pos",components:3,type:"Float32"}],4);Bi([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Yd=Bi([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);Bi([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const H1=Bi([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Iv=Bi([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function xC(f,u,d){return f.sections.forEach((b=>{b.text=(function(M,k,R){const K=k.layout.get("text-transform").evaluate(R,{});return K==="uppercase"?M=M.toLocaleUpperCase():K==="lowercase"&&(M=M.toLocaleLowerCase()),Lc.applyArabicShaping&&(M=Lc.applyArabicShaping(M)),M})(b.text,u,d)})),f}Bi([{name:"triangle",components:3,type:"Uint16"}]),Bi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Bi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),Bi([{type:"Float32",name:"offsetX"}]),Bi([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),Bi([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const qd={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var Ua=24;const vc=4294967296,kv=1/vc,bc=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");class Z1{constructor(u=new Uint8Array(16)){this.buf=ArrayBuffer.isView(u)?u:new Uint8Array(u),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(u,d,b=this.length){for(;this.pos<b;){const M=this.readVarint(),k=M>>3,R=this.pos;this.type=7&M,u(k,d,this),this.pos===R&&this.skip(M)}return d}readMessage(u,d){return this.readFields(u,d,this.readVarint()+this.pos)}readFixed32(){const u=this.dataView.getUint32(this.pos,!0);return this.pos+=4,u}readSFixed32(){const u=this.dataView.getInt32(this.pos,!0);return this.pos+=4,u}readFixed64(){const u=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*vc;return this.pos+=8,u}readSFixed64(){const u=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*vc;return this.pos+=8,u}readFloat(){const u=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,u}readDouble(){const u=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,u}readVarint(u){const d=this.buf;let b,M;return M=d[this.pos++],b=127&M,M<128?b:(M=d[this.pos++],b|=(127&M)<<7,M<128?b:(M=d[this.pos++],b|=(127&M)<<14,M<128?b:(M=d[this.pos++],b|=(127&M)<<21,M<128?b:(M=d[this.pos],b|=(15&M)<<28,(function(k,R,K){const z=K.buf;let ee,ne;if(ne=z[K.pos++],ee=(112&ne)>>4,ne<128||(ne=z[K.pos++],ee|=(127&ne)<<3,ne<128)||(ne=z[K.pos++],ee|=(127&ne)<<10,ne<128)||(ne=z[K.pos++],ee|=(127&ne)<<17,ne<128)||(ne=z[K.pos++],ee|=(127&ne)<<24,ne<128)||(ne=z[K.pos++],ee|=(1&ne)<<31,ne<128))return qp(k,ee,R);throw new Error("Expected varint not more than 10 bytes")})(b,u,this)))))}readVarint64(){return this.readVarint(!0)}readSVarint(){const u=this.readVarint();return u%2==1?(u+1)/-2:u/2}readBoolean(){return!!this.readVarint()}readString(){const u=this.readVarint()+this.pos,d=this.pos;return this.pos=u,u-d>=12&&bc?bc.decode(this.buf.subarray(d,u)):(function(b,M,k){let R="",K=M;for(;K<k;){const z=b[K];let ee,ne,ce,_e=null,Se=z>239?4:z>223?3:z>191?2:1;if(K+Se>k)break;Se===1?z<128&&(_e=z):Se===2?(ee=b[K+1],(192&ee)==128&&(_e=(31&z)<<6|63&ee,_e<=127&&(_e=null))):Se===3?(ee=b[K+1],ne=b[K+2],(192&ee)==128&&(192&ne)==128&&(_e=(15&z)<<12|(63&ee)<<6|63&ne,(_e<=2047||_e>=55296&&_e<=57343)&&(_e=null))):Se===4&&(ee=b[K+1],ne=b[K+2],ce=b[K+3],(192&ee)==128&&(192&ne)==128&&(192&ce)==128&&(_e=(15&z)<<18|(63&ee)<<12|(63&ne)<<6|63&ce,(_e<=65535||_e>=1114112)&&(_e=null))),_e===null?(_e=65533,Se=1):_e>65535&&(_e-=65536,R+=String.fromCharCode(_e>>>10&1023|55296),_e=56320|1023&_e),R+=String.fromCharCode(_e),K+=Se}return R})(this.buf,d,u)}readBytes(){const u=this.readVarint()+this.pos,d=this.buf.subarray(this.pos,u);return this.pos=u,d}readPackedVarint(u=[],d){const b=this.readPackedEnd();for(;this.pos<b;)u.push(this.readVarint(d));return u}readPackedSVarint(u=[]){const d=this.readPackedEnd();for(;this.pos<d;)u.push(this.readSVarint());return u}readPackedBoolean(u=[]){const d=this.readPackedEnd();for(;this.pos<d;)u.push(this.readBoolean());return u}readPackedFloat(u=[]){const d=this.readPackedEnd();for(;this.pos<d;)u.push(this.readFloat());return u}readPackedDouble(u=[]){const d=this.readPackedEnd();for(;this.pos<d;)u.push(this.readDouble());return u}readPackedFixed32(u=[]){const d=this.readPackedEnd();for(;this.pos<d;)u.push(this.readFixed32());return u}readPackedSFixed32(u=[]){const d=this.readPackedEnd();for(;this.pos<d;)u.push(this.readSFixed32());return u}readPackedFixed64(u=[]){const d=this.readPackedEnd();for(;this.pos<d;)u.push(this.readFixed64());return u}readPackedSFixed64(u=[]){const d=this.readPackedEnd();for(;this.pos<d;)u.push(this.readSFixed64());return u}readPackedEnd(){return this.type===2?this.readVarint()+this.pos:this.pos+1}skip(u){const d=7&u;if(d===0)for(;this.buf[this.pos++]>127;);else if(d===2)this.pos=this.readVarint()+this.pos;else if(d===5)this.pos+=4;else{if(d!==1)throw new Error(`Unimplemented type: ${d}`);this.pos+=8}}writeTag(u,d){this.writeVarint(u<<3|d)}realloc(u){let d=this.length||16;for(;d<this.pos+u;)d*=2;if(d!==this.length){const b=new Uint8Array(d);b.set(this.buf),this.buf=b,this.dataView=new DataView(b.buffer),this.length=d}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(u){this.realloc(4),this.dataView.setInt32(this.pos,u,!0),this.pos+=4}writeSFixed32(u){this.realloc(4),this.dataView.setInt32(this.pos,u,!0),this.pos+=4}writeFixed64(u){this.realloc(8),this.dataView.setInt32(this.pos,-1&u,!0),this.dataView.setInt32(this.pos+4,Math.floor(u*kv),!0),this.pos+=8}writeSFixed64(u){this.realloc(8),this.dataView.setInt32(this.pos,-1&u,!0),this.dataView.setInt32(this.pos+4,Math.floor(u*kv),!0),this.pos+=8}writeVarint(u){(u=+u||0)>268435455||u<0?(function(d,b){let M,k;if(d>=0?(M=d%4294967296|0,k=d/4294967296|0):(M=~(-d%4294967296),k=~(-d/4294967296),4294967295^M?M=M+1|0:(M=0,k=k+1|0)),d>=18446744073709552e3||d<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");b.realloc(10),(function(R,K,z){z.buf[z.pos++]=127&R|128,R>>>=7,z.buf[z.pos++]=127&R|128,R>>>=7,z.buf[z.pos++]=127&R|128,R>>>=7,z.buf[z.pos++]=127&R|128,z.buf[z.pos]=127&(R>>>=7)})(M,0,b),(function(R,K){const z=(7&R)<<4;K.buf[K.pos++]|=z|((R>>>=3)?128:0),R&&(K.buf[K.pos++]=127&R|((R>>>=7)?128:0),R&&(K.buf[K.pos++]=127&R|((R>>>=7)?128:0),R&&(K.buf[K.pos++]=127&R|((R>>>=7)?128:0),R&&(K.buf[K.pos++]=127&R|((R>>>=7)?128:0),R&&(K.buf[K.pos++]=127&R)))))})(k,b)})(u,this):(this.realloc(4),this.buf[this.pos++]=127&u|(u>127?128:0),u<=127||(this.buf[this.pos++]=127&(u>>>=7)|(u>127?128:0),u<=127||(this.buf[this.pos++]=127&(u>>>=7)|(u>127?128:0),u<=127||(this.buf[this.pos++]=u>>>7&127))))}writeSVarint(u){this.writeVarint(u<0?2*-u-1:2*u)}writeBoolean(u){this.writeVarint(+u)}writeString(u){u=String(u),this.realloc(4*u.length),this.pos++;const d=this.pos;this.pos=(function(M,k,R){for(let K,z,ee=0;ee<k.length;ee++){if(K=k.charCodeAt(ee),K>55295&&K<57344){if(!z){K>56319||ee+1===k.length?(M[R++]=239,M[R++]=191,M[R++]=189):z=K;continue}if(K<56320){M[R++]=239,M[R++]=191,M[R++]=189,z=K;continue}K=z-55296<<10|K-56320|65536,z=null}else z&&(M[R++]=239,M[R++]=191,M[R++]=189,z=null);K<128?M[R++]=K:(K<2048?M[R++]=K>>6|192:(K<65536?M[R++]=K>>12|224:(M[R++]=K>>18|240,M[R++]=K>>12&63|128),M[R++]=K>>6&63|128),M[R++]=63&K|128)}return R})(this.buf,u,this.pos);const b=this.pos-d;b>=128&&Tv(d,b,this),this.pos=d-1,this.writeVarint(b),this.pos+=b}writeFloat(u){this.realloc(4),this.dataView.setFloat32(this.pos,u,!0),this.pos+=4}writeDouble(u){this.realloc(8),this.dataView.setFloat64(this.pos,u,!0),this.pos+=8}writeBytes(u){const d=u.length;this.writeVarint(d),this.realloc(d);for(let b=0;b<d;b++)this.buf[this.pos++]=u[b]}writeRawMessage(u,d){this.pos++;const b=this.pos;u(d,this);const M=this.pos-b;M>=128&&Tv(b,M,this),this.pos=b-1,this.writeVarint(M),this.pos+=M}writeMessage(u,d,b){this.writeTag(u,2),this.writeRawMessage(d,b)}writePackedVarint(u,d){d.length&&this.writeMessage(u,Vd,d)}writePackedSVarint(u,d){d.length&&this.writeMessage(u,X1,d)}writePackedBoolean(u,d){d.length&&this.writeMessage(u,MC,d)}writePackedFloat(u,d){d.length&&this.writeMessage(u,Rv,d)}writePackedDouble(u,d){d.length&&this.writeMessage(u,dg,d)}writePackedFixed32(u,d){d.length&&this.writeMessage(u,D0,d)}writePackedSFixed32(u,d){d.length&&this.writeMessage(u,wC,d)}writePackedFixed64(u,d){d.length&&this.writeMessage(u,SC,d)}writePackedSFixed64(u,d){d.length&&this.writeMessage(u,J1,d)}writeBytesField(u,d){this.writeTag(u,2),this.writeBytes(d)}writeFixed32Field(u,d){this.writeTag(u,5),this.writeFixed32(d)}writeSFixed32Field(u,d){this.writeTag(u,5),this.writeSFixed32(d)}writeFixed64Field(u,d){this.writeTag(u,1),this.writeFixed64(d)}writeSFixed64Field(u,d){this.writeTag(u,1),this.writeSFixed64(d)}writeVarintField(u,d){this.writeTag(u,0),this.writeVarint(d)}writeSVarintField(u,d){this.writeTag(u,0),this.writeSVarint(d)}writeStringField(u,d){this.writeTag(u,2),this.writeString(d)}writeFloatField(u,d){this.writeTag(u,5),this.writeFloat(d)}writeDoubleField(u,d){this.writeTag(u,1),this.writeDouble(d)}writeBooleanField(u,d){this.writeVarintField(u,+d)}}function qp(f,u,d){return d?4294967296*u+(f>>>0):4294967296*(u>>>0)+(f>>>0)}function Tv(f,u,d){const b=u<=16383?1:u<=2097151?2:u<=268435455?3:Math.floor(Math.log(u)/(7*Math.LN2));d.realloc(b);for(let M=d.pos-1;M>=f;M--)d.buf[M+b]=d.buf[M]}function Vd(f,u){for(let d=0;d<f.length;d++)u.writeVarint(f[d])}function X1(f,u){for(let d=0;d<f.length;d++)u.writeSVarint(f[d])}function Rv(f,u){for(let d=0;d<f.length;d++)u.writeFloat(f[d])}function dg(f,u){for(let d=0;d<f.length;d++)u.writeDouble(f[d])}function MC(f,u){for(let d=0;d<f.length;d++)u.writeBoolean(f[d])}function D0(f,u){for(let d=0;d<f.length;d++)u.writeFixed32(f[d])}function wC(f,u){for(let d=0;d<f.length;d++)u.writeSFixed32(f[d])}function SC(f,u){for(let d=0;d<f.length;d++)u.writeFixed64(f[d])}function J1(f,u){for(let d=0;d<f.length;d++)u.writeSFixed64(f[d])}function Dv(f,u,d){f===1&&d.readMessage(t2,u)}function t2(f,u,d){if(f===3){const{id:b,bitmap:M,width:k,height:R,left:K,top:z,advance:ee}=d.readMessage(n2,{});u.push({id:b,bitmap:new Lp({width:k+6,height:R+6},M),metrics:{width:k,height:R,left:K,top:z,advance:ee}})}}function n2(f,u,d){f===1?u.id=d.readVarint():f===2?u.bitmap=d.readBytes():f===3?u.width=d.readVarint():f===4?u.height=d.readVarint():f===5?u.left=d.readSVarint():f===6?u.top=d.readSVarint():f===7&&(u.advance=d.readVarint())}function EC(f){let u=0,d=0;for(const R of f)u+=R.w*R.h,d=Math.max(d,R.w);f.sort(((R,K)=>K.h-R.h));const b=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(u/.95)),d),h:1/0}];let M=0,k=0;for(const R of f)for(let K=b.length-1;K>=0;K--){const z=b[K];if(!(R.w>z.w||R.h>z.h)){if(R.x=z.x,R.y=z.y,k=Math.max(k,R.y+R.h),M=Math.max(M,R.x+R.w),R.w===z.w&&R.h===z.h){const ee=b.pop();ee&&K<b.length&&(b[K]=ee)}else R.h===z.h?(z.x+=R.w,z.w-=R.w):R.w===z.w?(z.y+=R.h,z.h-=R.h):(b.push({x:z.x+R.w,y:z.y,w:z.w-R.w,h:R.h}),z.y+=R.h,z.h-=R.h);break}}return{w:M,h:k,fill:u/(M*k)||0}}class ey{constructor(u,{pixelRatio:d,version:b,stretchX:M,stretchY:k,content:R,textFitWidth:K,textFitHeight:z}){this.paddedRect=u,this.pixelRatio=d,this.stretchX=M,this.stretchY=k,this.content=R,this.version=b,this.textFitWidth=K,this.textFitHeight=z}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class Pv{constructor(u,d){const b={},M={};this.haveRenderCallbacks=[];const k=[];this.addImages(u,b,k),this.addImages(d,M,k);const{w:R,h:K}=EC(k),z=new Al({width:R||1,height:K||1});for(const ee in u){const ne=u[ee],ce=b[ee].paddedRect;Al.copy(ne.data,z,{x:0,y:0},{x:ce.x+1,y:ce.y+1},ne.data)}for(const ee in d){const ne=d[ee],ce=M[ee].paddedRect,_e=ce.x+1,Se=ce.y+1,ke=ne.data.width,ze=ne.data.height;Al.copy(ne.data,z,{x:0,y:0},{x:_e,y:Se},ne.data),Al.copy(ne.data,z,{x:0,y:ze-1},{x:_e,y:Se-1},{width:ke,height:1}),Al.copy(ne.data,z,{x:0,y:0},{x:_e,y:Se+ze},{width:ke,height:1}),Al.copy(ne.data,z,{x:ke-1,y:0},{x:_e-1,y:Se},{width:1,height:ze}),Al.copy(ne.data,z,{x:0,y:0},{x:_e+ke,y:Se},{width:1,height:ze})}this.image=z,this.iconPositions=b,this.patternPositions=M}addImages(u,d,b){for(const M in u){const k=u[M],R={x:0,y:0,w:k.data.width+2,h:k.data.height+2};b.push(R),d[M]=new ey(R,k),k.hasRenderCallback&&this.haveRenderCallbacks.push(M)}}patchUpdatedImages(u,d){u.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const b in u.updatedImages)this.patchUpdatedImage(this.iconPositions[b],u.getImage(b),d),this.patchUpdatedImage(this.patternPositions[b],u.getImage(b),d)}patchUpdatedImage(u,d,b){if(!u||!d||u.version===d.version)return;u.version=d.version;const[M,k]=u.tl;b.update(d.data,void 0,{x:M,y:k})}}var pA;Qn("ImagePosition",ey),Qn("ImageAtlas",Pv),s.as=void 0,(pA=s.as||(s.as={}))[pA.none=0]="none",pA[pA.horizontal=1]="horizontal",pA[pA.vertical=2]="vertical",pA[pA.horizontalOnly=3]="horizontalOnly";class Kf{constructor(){this.scale=1,this.fontStack="",this.imageName=null,this.verticalAlign="bottom"}static forText(u,d,b){const M=new Kf;return M.scale=u||1,M.fontStack=d,M.verticalAlign=b||"bottom",M}static forImage(u,d){const b=new Kf;return b.imageName=u,b.verticalAlign=d||"bottom",b}}class sd{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(u,d){const b=new sd;for(let M=0;M<u.sections.length;M++){const k=u.sections[M];k.image?b.addImageSection(k):b.addTextSection(k,d)}return b}length(){return this.text.length}getSection(u){return this.sections[this.sectionIndex[u]]}getSectionIndex(u){return this.sectionIndex[u]}getCharCode(u){return this.text.charCodeAt(u)}verticalizePunctuation(){this.text=(function(u){let d="";for(let b=0;b<u.length;b++){const M=u.charCodeAt(b+1)||null,k=u.charCodeAt(b-1)||null;d+=M&&Op(M)&&!qd[u[b+1]]||k&&Op(k)&&!qd[u[b-1]]||!qd[u[b]]?u[b]:qd[u[b]]}return d})(this.text)}trim(){let u=0;for(let b=0;b<this.text.length&&fg[this.text.charCodeAt(b)];b++)u++;let d=this.text.length;for(let b=this.text.length-1;b>=0&&b>=u&&fg[this.text.charCodeAt(b)];b--)d--;this.text=this.text.substring(u,d),this.sectionIndex=this.sectionIndex.slice(u,d)}substring(u,d){const b=new sd;return b.text=this.text.substring(u,d),b.sectionIndex=this.sectionIndex.slice(u,d),b.sections=this.sections,b}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((u,d)=>Math.max(u,this.sections[d].scale)),0)}getMaxImageSize(u){let d=0,b=0;for(let M=0;M<this.length();M++){const k=this.getSection(M);if(k.imageName){const R=u[k.imageName];if(!R)continue;const K=R.displaySize;d=Math.max(d,K[0]),b=Math.max(b,K[1])}}return{maxImageWidth:d,maxImageHeight:b}}addTextSection(u,d){this.text+=u.text,this.sections.push(Kf.forText(u.scale,u.fontStack||d,u.verticalAlign));const b=this.sections.length-1;for(let M=0;M<u.text.length;++M)this.sectionIndex.push(b)}addImageSection(u){const d=u.image?u.image.name:"";if(d.length===0)return void Ct("Can't add FormattedSection with an empty image.");const b=this.getNextImageSectionCharCode();b?(this.text+=String.fromCharCode(b),this.sections.push(Kf.forImage(d,u.verticalAlign)),this.sectionIndex.push(this.sections.length-1)):Ct("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function P0(f,u,d,b,M,k,R,K,z,ee,ne,ce,_e,Se,ke){const ze=sd.fromFeature(f,M);let $e;ce===s.as.vertical&&ze.verticalizePunctuation();const{processBidirectionalText:it,processStyledBidirectionalText:Et}=Lc;if(it&&ze.sections.length===1){$e=[];const Gt=it(ze.toString(),U0(ze,ee,k,u,b,Se));for(const Jt of Gt){const mn=new sd;mn.text=Jt,mn.sections=ze.sections;for(let Nn=0;Nn<Jt.length;Nn++)mn.sectionIndex.push(0);$e.push(mn)}}else if(Et){$e=[];const Gt=Et(ze.text,ze.sectionIndex,U0(ze,ee,k,u,b,Se));for(const Jt of Gt){const mn=new sd;mn.text=Jt[0],mn.sectionIndex=Jt[1],mn.sections=ze.sections,$e.push(mn)}}else $e=(function(Gt,Jt){const mn=[],Nn=Gt.text;let Tn=0;for(const zn of Jt)mn.push(Gt.substring(Tn,zn)),Tn=zn;return Tn<Nn.length&&mn.push(Gt.substring(Tn,Nn.length)),mn})(ze,U0(ze,ee,k,u,b,Se));const ut=[],pt={positionedLines:ut,text:ze.toString(),top:ne[1],bottom:ne[1],left:ne[0],right:ne[0],writingMode:ce,iconsInText:!1,verticalizable:!1};return(function(Gt,Jt,mn,Nn,Tn,zn,bi,jn,Kn,un,Gi,Xi){let Oi=0,si=0,Or=0,Fs=0;const _a=jn==="right"?1:jn==="left"?0:.5,ia=Ua/Xi;let gl=0;for(const es of Tn){es.trim();const Ts=es.getMaxScale(),Tl={positionedGlyphs:[],lineOffset:0};Gt.positionedLines[gl]=Tl;const yl=Tl.positionedGlyphs;let Fa=0;if(!es.length()){si+=zn,++gl;continue}const qc=K0(Nn,es,ia);for(let Zl=0;Zl<es.length();Zl++){const ja=es.getSection(Zl),vl=es.getSectionIndex(Zl),ra=es.getCharCode(Zl),oa=i2(Kn,Gi,ra);let As;if(ja.imageName){if(Gt.iconsInText=!0,ja.scale=ja.scale*ia,As=mg(ja,oa,Ts,qc,Nn),!As)continue;Fa=Math.max(Fa,As.imageOffset)}else if(As=r2(ja,ra,oa,qc,Jt,mn),!As)continue;const{rect:Qu,metrics:bl,baselineOffset:_c}=As;yl.push({glyph:ra,imageName:ja.imageName,x:Oi,y:si+_c+-17,vertical:oa,scale:ja.scale,fontStack:ja.fontStack,sectionIndex:vl,metrics:bl,rect:Qu}),oa?(Gt.verticalizable=!0,Oi+=(ja.imageName?bl.advance:Ua)*ja.scale+un):Oi+=bl.advance*ja.scale+un}yl.length!==0&&(Or=Math.max(Oi-un,Or),Vp(yl,0,yl.length-1,_a)),Oi=0,Tl.lineOffset=Math.max(Fa,(Ts-1)*Ua);const za=zn*Ts+Fa;si+=za,Fs=Math.max(za,Fs),++gl}const{horizontalAlign:La,verticalAlign:xa}=Lv(bi);(function(es,Ts,Tl,yl,Fa,qc,za,Zl,ja){const vl=(Ts-Tl)*Fa;let ra=0;ra=qc!==za?-Zl*yl- -17:-yl*ja*za+.5*za;for(const oa of es)for(const As of oa.positionedGlyphs)As.x+=vl,As.y+=ra})(Gt.positionedLines,_a,La,xa,Or,Fs,zn,si,Tn.length),Gt.top+=-xa*si,Gt.bottom=Gt.top+si,Gt.left+=-La*Or,Gt.right=Gt.left+Or})(pt,u,d,b,$e,R,K,z,ce,ee,_e,ke),!(function(Gt){for(const Jt of Gt)if(Jt.positionedGlyphs.length!==0)return!1;return!0})(ut)&&pt}const fg={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Uv={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},ty={40:!0};function ny(f,u,d,b,M,k){if(u.imageName){const R=b[u.imageName];return R?R.displaySize[0]*u.scale*Ua/k+M:0}{const R=d[u.fontStack],K=R&&R[f];return K?K.metrics.advance*u.scale+M:0}}function pg(f,u,d,b){const M=Math.pow(f-u,2);return b?f<u?M/2:2*M:M+Math.abs(d)*d}function Kv(f,u,d){let b=0;return f===10&&(b-=1e4),d&&(b+=150),f!==40&&f!==65288||(b+=50),u!==41&&u!==65289||(b+=50),b}function iy(f,u,d,b,M,k){let R=null,K=pg(u,d,M,k);for(const z of b){const ee=pg(u-z.x,d,M,k)+z.badness;ee<=K&&(R=z,K=ee)}return{index:f,x:u,priorBreak:R,badness:K}}function Xo(f){return f?Xo(f.priorBreak).concat(f.index):[]}function U0(f,u,d,b,M,k){if(!f)return[];const R=[],K=(function(ce,_e,Se,ke,ze,$e){let it=0;for(let Et=0;Et<ce.length();Et++){const ut=ce.getSection(Et);it+=ny(ce.getCharCode(Et),ut,ke,ze,_e,$e)}return it/Math.max(1,Math.ceil(it/Se))})(f,u,d,b,M,k),z=f.text.indexOf("")>=0;let ee=0;for(let ce=0;ce<f.length();ce++){const _e=f.getSection(ce),Se=f.getCharCode(ce);if(fg[Se]||(ee+=ny(Se,_e,b,M,u,k)),ce<f.length()-1){const ke=!((ne=Se)<11904)&&(!!er["CJK Compatibility Forms"](ne)||!!er["CJK Compatibility"](ne)||!!er["CJK Strokes"](ne)||!!er["CJK Symbols and Punctuation"](ne)||!!er["Enclosed CJK Letters and Months"](ne)||!!er["Halfwidth and Fullwidth Forms"](ne)||!!er["Ideographic Description Characters"](ne)||!!er["Vertical Forms"](ne)||dc.test(String.fromCodePoint(ne)));(Uv[Se]||ke||_e.imageName||ce!==f.length()-2&&ty[f.getCharCode(ce+1)])&&R.push(iy(ce+1,ee,K,R,Kv(Se,f.getCharCode(ce+1),ke&&z),!1))}}var ne;return Xo(iy(f.length(),ee,K,R,0,!0))}function Lv(f){let u=.5,d=.5;switch(f){case"right":case"top-right":case"bottom-right":u=1;break;case"left":case"top-left":case"bottom-left":u=0}switch(f){case"bottom":case"bottom-right":case"bottom-left":d=1;break;case"top":case"top-right":case"top-left":d=0}return{horizontalAlign:u,verticalAlign:d}}function K0(f,u,d){const b=u.getMaxScale()*Ua,{maxImageWidth:M,maxImageHeight:k}=u.getMaxImageSize(f),R=Math.max(b,k*d);return{verticalLineContentWidth:Math.max(b,M*d),horizontalLineContentHeight:R}}function L0(f){switch(f){case"top":return 0;case"center":return .5;default:return 1}}function i2(f,u,d){return!(f===s.as.horizontal||!u&&!ul(d)||u&&(fg[d]||(b=d,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(b)))));var b}function r2(f,u,d,b,M,k){const R=k[f.fontStack],K=(function(ee,ne,ce,_e){if(ee&&ee.rect)return ee;const Se=ne[ce.fontStack],ke=Se&&Se[_e];return ke?{rect:null,metrics:ke.metrics}:null})(R&&R[u],M,f,u);if(K===null)return null;let z;if(d)z=b.verticalLineContentWidth-f.scale*Ua;else{const ee=L0(f.verticalAlign);z=(b.horizontalLineContentHeight-f.scale*Ua)*ee}return{rect:K.rect,metrics:K.metrics,baselineOffset:z}}function mg(f,u,d,b,M){const k=M[f.imageName];if(!k)return null;const R=k.paddedRect,K=k.displaySize,z={width:K[0],height:K[1],left:1,top:-3,advance:u?K[1]:K[0]};let ee;if(u)ee=b.verticalLineContentWidth-K[1]*f.scale;else{const ne=L0(f.verticalAlign);ee=(b.horizontalLineContentHeight-K[1]*f.scale)*ne}return{rect:R,metrics:z,baselineOffset:ee,imageOffset:(u?K[0]:K[1])*f.scale-Ua*d}}function Vp(f,u,d,b){if(b===0)return;const M=f[d],k=(f[d].x+M.metrics.advance*M.scale)*b;for(let R=u;R<=d;R++)f[R].x-=k}function Fv(f,u,d){const{horizontalAlign:b,verticalAlign:M}=Lv(d),k=u[0]-f.displaySize[0]*b,R=u[1]-f.displaySize[1]*M;return{image:f,top:R,bottom:R+f.displaySize[1],left:k,right:k+f.displaySize[0]}}function F0(f){var u,d;let b=f.left,M=f.top,k=f.right-b,R=f.bottom-M;const K=(u=f.image.textFitWidth)!==null&&u!==void 0?u:"stretchOrShrink",z=(d=f.image.textFitHeight)!==null&&d!==void 0?d:"stretchOrShrink",ee=(f.image.content[2]-f.image.content[0])/(f.image.content[3]-f.image.content[1]);if(z==="proportional"){if(K==="stretchOnly"&&k/R<ee||K==="proportional"){const ne=Math.ceil(R*ee);b*=ne/k,k=ne}}else if(K==="proportional"&&z==="stretchOnly"&&ee!==0&&k/R>ee){const ne=Math.ceil(k/ee);M*=ne/R,R=ne}return{x1:b,y1:M,x2:b+k,y2:M+R}}function ry(f,u,d,b,M,k){const R=f.image;let K;if(R.content){const $e=R.content,it=R.pixelRatio||1;K=[$e[0]/it,$e[1]/it,R.displaySize[0]-$e[2]/it,R.displaySize[1]-$e[3]/it]}const z=u.left*k,ee=u.right*k;let ne,ce,_e,Se;d==="width"||d==="both"?(Se=M[0]+z-b[3],ce=M[0]+ee+b[1]):(Se=M[0]+(z+ee-R.displaySize[0])/2,ce=Se+R.displaySize[0]);const ke=u.top*k,ze=u.bottom*k;return d==="height"||d==="both"?(ne=M[1]+ke-b[0],_e=M[1]+ze+b[2]):(ne=M[1]+(ke+ze-R.displaySize[1])/2,_e=ne+R.displaySize[1]),{image:R,top:ne,right:ce,bottom:_e,left:Se,collisionPadding:K}}const Gu=128,bu=32640;function gg(f,u){const{expression:d}=u;if(d.kind==="constant")return{kind:"constant",layoutSize:d.evaluate(new io(f+1))};if(d.kind==="source")return{kind:"source"};{const{zoomStops:b,interpolationType:M}=d;let k=0;for(;k<b.length&&b[k]<=f;)k++;k=Math.max(0,k-1);let R=k;for(;R<b.length&&b[R]<f+1;)R++;R=Math.min(b.length-1,R);const K=b[k],z=b[R];return d.kind==="composite"?{kind:"composite",minZoom:K,maxZoom:z,interpolationType:M}:{kind:"camera",minZoom:K,maxZoom:z,minSize:d.evaluate(new io(K)),maxSize:d.evaluate(new io(z)),interpolationType:M}}}function zv(f,u,d){let b="never";const M=f.get(u);return M?b=M:f.get(d)&&(b="always"),b}const BC=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function z0(f,u,d,b,M,k,R,K,z,ee,ne,ce,_e){const Se=K?Math.min(bu,Math.round(K[0])):0,ke=K?Math.min(bu,Math.round(K[1])):0;f.emplaceBack(u,d,Math.round(32*b),Math.round(32*M),k,R,(Se<<1)+(z?1:0),ke,16*ee,16*ne,256*ce,256*_e)}function oy(f,u,d){f.emplaceBack(u.x,u.y,d),f.emplaceBack(u.x,u.y,d),f.emplaceBack(u.x,u.y,d),f.emplaceBack(u.x,u.y,d)}function OC(f){for(const u of f.sections)if(FA(u.text))return!0;return!1}class jv{constructor(u){this.layoutVertexArray=new jt,this.indexArray=new sn,this.programConfigurations=u,this.segments=new yr,this.dynamicLayoutVertexArray=new Nt,this.opacityVertexArray=new qt,this.hasVisibleVertices=!1,this.placedSymbolArray=new re}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(u,d,b,M){this.isEmpty()||(b&&(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,Uf.members),this.indexBuffer=u.createIndexBuffer(this.indexArray,d),this.dynamicLayoutVertexBuffer=u.createVertexBuffer(this.dynamicLayoutVertexArray,hg.members,!0),this.opacityVertexBuffer=u.createVertexBuffer(this.opacityVertexArray,BC,!0),this.opacityVertexBuffer.itemSize=1),(b||M)&&this.programConfigurations.upload(u))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Qn("SymbolBuffers",jv);class Cc{constructor(u,d,b){this.layoutVertexArray=new u,this.layoutAttributes=d,this.indexArray=new b,this.segments=new yr,this.collisionVertexArray=new In}upload(u){this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=u.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=u.createVertexBuffer(this.collisionVertexArray,Yd.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Qn("CollisionBuffers",Cc);class $p{constructor(u){this.collisionBoxArray=u.collisionBoxArray,this.zoom=u.zoom,this.overscaling=Hn(globalThis)?Math.min(u.overscaling,128):u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map((R=>R.id)),this.index=u.index,this.pixelRatio=u.pixelRatio,this.sourceLayerIndex=u.sourceLayerIndex,this.hasDependencies=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const d=this.layers[0]._unevaluatedLayout._values;this.textSizeData=gg(this.zoom,d["text-size"]),this.iconSizeData=gg(this.zoom,d["icon-size"]);const b=this.layers[0].layout,M=b.get("symbol-sort-key"),k=b.get("symbol-z-order");this.canOverlap=zv(b,"text-overlap","text-allow-overlap")!=="never"||zv(b,"icon-overlap","icon-allow-overlap")!=="never"||b.get("text-ignore-placement")||b.get("icon-ignore-placement"),this.sortFeaturesByKey=k!=="viewport-y"&&!M.isConstant(),this.sortFeaturesByY=(k==="viewport-y"||k==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,b.get("symbol-placement")==="point"&&(this.writingModes=b.get("text-writing-mode").map((R=>s.as[R]))),this.stateDependentLayerIds=this.layers.filter((R=>R.isStateDependent())).map((R=>R.id)),this.sourceID=u.sourceID}createArrays(){this.text=new jv(new AA(this.layers,this.zoom,(u=>/^text/.test(u)))),this.icon=new jv(new AA(this.layers,this.zoom,(u=>/^icon/.test(u)))),this.glyphOffsetArray=new pe,this.lineVertexArray=new we,this.symbolInstances=new ge,this.textAnchorOffsets=new He}calculateGlyphDependencies(u,d,b,M,k){for(let R=0;R<u.length;R++)if(d[u.charCodeAt(R)]=!0,(b||M)&&k){const K=qd[u.charAt(R)];K&&(d[K.charCodeAt(0)]=!0)}}populate(u,d,b){const M=this.layers[0],k=M.layout,R=k.get("text-font"),K=k.get("text-field"),z=k.get("icon-image"),ee=(K.value.kind!=="constant"||K.value.value instanceof is&&!K.value.value.isEmpty()||K.value.value.toString().length>0)&&(R.value.kind!=="constant"||R.value.value.length>0),ne=z.value.kind!=="constant"||!!z.value.value||Object.keys(z.parameters).length>0,ce=k.get("symbol-sort-key");if(this.features=[],!ee&&!ne)return;const _e=d.iconDependencies,Se=d.glyphDependencies,ke=d.availableImages,ze=new io(this.zoom);for(const{feature:$e,id:it,index:Et,sourceLayerIndex:ut}of u){const pt=M._featureFilter.needGeometry,Gt=WA($e,pt);if(!M._featureFilter.filter(ze,Gt,b))continue;let Jt,mn;if(pt||(Gt.geometry=Xs($e)),ee){const Tn=M.getValueAndResolveTokens("text-field",Gt,b,ke),zn=is.factory(Tn),bi=this.hasRTLText=this.hasRTLText||OC(zn);(!bi||Lc.getRTLTextPluginStatus()==="unavailable"||bi&&Lc.isParsed())&&(Jt=xC(zn,M,Gt))}if(ne){const Tn=M.getValueAndResolveTokens("icon-image",Gt,b,ke);mn=Tn instanceof Es?Tn:Es.fromString(Tn)}if(!Jt&&!mn)continue;const Nn=this.sortFeaturesByKey?ce.evaluate(Gt,{},b):void 0;if(this.features.push({id:it,text:Jt,icon:mn,index:Et,sourceLayerIndex:ut,geometry:Gt.geometry,properties:$e.properties,type:Gp.types[$e.type],sortKey:Nn}),mn&&(_e[mn.name]=!0),Jt){const Tn=R.evaluate(Gt,{},b).join(","),zn=k.get("text-rotation-alignment")!=="viewport"&&k.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(s.as.vertical)>=0;for(const bi of Jt.sections)if(bi.image)_e[bi.image.name]=!0;else{const jn=Zm(Jt.toString()),Kn=bi.fontStack||Tn,un=Se[Kn]=Se[Kn]||{};this.calculateGlyphDependencies(bi.text,un,zn,this.allowVerticalPlacement,jn)}}}k.get("symbol-placement")==="line"&&(this.features=(function($e){const it={},Et={},ut=[];let pt=0;function Gt(Tn){ut.push($e[Tn]),pt++}function Jt(Tn,zn,bi){const jn=Et[Tn];return delete Et[Tn],Et[zn]=jn,ut[jn].geometry[0].pop(),ut[jn].geometry[0]=ut[jn].geometry[0].concat(bi[0]),jn}function mn(Tn,zn,bi){const jn=it[zn];return delete it[zn],it[Tn]=jn,ut[jn].geometry[0].shift(),ut[jn].geometry[0]=bi[0].concat(ut[jn].geometry[0]),jn}function Nn(Tn,zn,bi){const jn=bi?zn[0][zn[0].length-1]:zn[0][0];return`${Tn}:${jn.x}:${jn.y}`}for(let Tn=0;Tn<$e.length;Tn++){const zn=$e[Tn],bi=zn.geometry,jn=zn.text?zn.text.toString():null;if(!jn){Gt(Tn);continue}const Kn=Nn(jn,bi),un=Nn(jn,bi,!0);if(Kn in Et&&un in it&&Et[Kn]!==it[un]){const Gi=mn(Kn,un,bi),Xi=Jt(Kn,un,ut[Gi].geometry);delete it[Kn],delete Et[un],Et[Nn(jn,ut[Xi].geometry,!0)]=Xi,ut[Gi].geometry=null}else Kn in Et?Jt(Kn,un,bi):un in it?mn(Kn,un,bi):(Gt(Tn),it[Kn]=pt-1,Et[un]=pt-1)}return ut.filter((Tn=>Tn.geometry))})(this.features)),this.sortFeaturesByKey&&this.features.sort((($e,it)=>$e.sortKey-it.sortKey))}update(u,d,b){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(u,d,this.layers,{imagePositions:b}),this.icon.programConfigurations.updatePaintArrays(u,d,this.layers,{imagePositions:b}))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(u){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(u),this.iconCollisionBox.upload(u)),this.text.upload(u,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(u,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(u,d){const b=this.lineVertexArray.length;if(u.segment!==void 0){let M=u.dist(d[u.segment+1]),k=u.dist(d[u.segment]);const R={};for(let K=u.segment+1;K<d.length;K++)R[K]={x:d[K].x,y:d[K].y,tileUnitDistanceFromAnchor:M},K<d.length-1&&(M+=d[K+1].dist(d[K]));for(let K=u.segment||0;K>=0;K--)R[K]={x:d[K].x,y:d[K].y,tileUnitDistanceFromAnchor:k},K>0&&(k+=d[K-1].dist(d[K]));for(let K=0;K<d.length;K++){const z=R[K];this.lineVertexArray.emplaceBack(z.x,z.y,z.tileUnitDistanceFromAnchor)}}return{lineStartIndex:b,lineLength:this.lineVertexArray.length-b}}addSymbols(u,d,b,M,k,R,K,z,ee,ne,ce,_e){const Se=u.indexArray,ke=u.layoutVertexArray,ze=u.segments.prepareSegment(4*d.length,ke,Se,this.canOverlap?R.sortKey:void 0),$e=this.glyphOffsetArray.length,it=ze.vertexLength,Et=this.allowVerticalPlacement&&K===s.as.vertical?Math.PI/2:0,ut=R.text&&R.text.sections;for(let pt=0;pt<d.length;pt++){const{tl:Gt,tr:Jt,bl:mn,br:Nn,tex:Tn,pixelOffsetTL:zn,pixelOffsetBR:bi,minFontScaleX:jn,minFontScaleY:Kn,glyphOffset:un,isSDF:Gi,sectionIndex:Xi}=d[pt],Oi=ze.vertexLength,si=un[1];z0(ke,z.x,z.y,Gt.x,si+Gt.y,Tn.x,Tn.y,b,Gi,zn.x,zn.y,jn,Kn),z0(ke,z.x,z.y,Jt.x,si+Jt.y,Tn.x+Tn.w,Tn.y,b,Gi,bi.x,zn.y,jn,Kn),z0(ke,z.x,z.y,mn.x,si+mn.y,Tn.x,Tn.y+Tn.h,b,Gi,zn.x,bi.y,jn,Kn),z0(ke,z.x,z.y,Nn.x,si+Nn.y,Tn.x+Tn.w,Tn.y+Tn.h,b,Gi,bi.x,bi.y,jn,Kn),oy(u.dynamicLayoutVertexArray,z,Et),Se.emplaceBack(Oi,Oi+2,Oi+1),Se.emplaceBack(Oi+1,Oi+2,Oi+3),ze.vertexLength+=4,ze.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(un[0]),pt!==d.length-1&&Xi===d[pt+1].sectionIndex||u.programConfigurations.populatePaintArrays(ke.length,R,R.index,{imagePositions:{},canonical:_e,formattedSection:ut&&ut[Xi]})}u.placedSymbolArray.emplaceBack(z.x,z.y,$e,this.glyphOffsetArray.length-$e,it,ee,ne,z.segment,b?b[0]:0,b?b[1]:0,M[0],M[1],K,0,!1,0,ce)}_addCollisionDebugVertex(u,d,b,M,k,R){return d.emplaceBack(0,0),u.emplaceBack(b.x,b.y,M,k,Math.round(R.x),Math.round(R.y))}addCollisionDebugVertices(u,d,b,M,k,R,K){const z=k.segments.prepareSegment(4,k.layoutVertexArray,k.indexArray),ee=z.vertexLength,ne=k.layoutVertexArray,ce=k.collisionVertexArray,_e=K.anchorX,Se=K.anchorY;this._addCollisionDebugVertex(ne,ce,R,_e,Se,new c(u,d)),this._addCollisionDebugVertex(ne,ce,R,_e,Se,new c(b,d)),this._addCollisionDebugVertex(ne,ce,R,_e,Se,new c(b,M)),this._addCollisionDebugVertex(ne,ce,R,_e,Se,new c(u,M)),z.vertexLength+=4;const ke=k.indexArray;ke.emplaceBack(ee,ee+1),ke.emplaceBack(ee+1,ee+2),ke.emplaceBack(ee+2,ee+3),ke.emplaceBack(ee+3,ee),z.primitiveLength+=4}addDebugCollisionBoxes(u,d,b,M){for(let k=u;k<d;k++){const R=this.collisionBoxArray.get(k);this.addCollisionDebugVertices(R.x1,R.y1,R.x2,R.y2,M?this.textCollisionBox:this.iconCollisionBox,R.anchorPoint,b)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Cc(gn,H1.members,ti),this.iconCollisionBox=new Cc(gn,H1.members,ti);for(let u=0;u<this.symbolInstances.length;u++){const d=this.symbolInstances.get(u);this.addDebugCollisionBoxes(d.textBoxStartIndex,d.textBoxEndIndex,d,!0),this.addDebugCollisionBoxes(d.verticalTextBoxStartIndex,d.verticalTextBoxEndIndex,d,!0),this.addDebugCollisionBoxes(d.iconBoxStartIndex,d.iconBoxEndIndex,d,!1),this.addDebugCollisionBoxes(d.verticalIconBoxStartIndex,d.verticalIconBoxEndIndex,d,!1)}}_deserializeCollisionBoxesForSymbol(u,d,b,M,k,R,K,z,ee){const ne={};for(let ce=d;ce<b;ce++){const _e=u.get(ce);ne.textBox={x1:_e.x1,y1:_e.y1,x2:_e.x2,y2:_e.y2,anchorPointX:_e.anchorPointX,anchorPointY:_e.anchorPointY},ne.textFeatureIndex=_e.featureIndex;break}for(let ce=M;ce<k;ce++){const _e=u.get(ce);ne.verticalTextBox={x1:_e.x1,y1:_e.y1,x2:_e.x2,y2:_e.y2,anchorPointX:_e.anchorPointX,anchorPointY:_e.anchorPointY},ne.verticalTextFeatureIndex=_e.featureIndex;break}for(let ce=R;ce<K;ce++){const _e=u.get(ce);ne.iconBox={x1:_e.x1,y1:_e.y1,x2:_e.x2,y2:_e.y2,anchorPointX:_e.anchorPointX,anchorPointY:_e.anchorPointY},ne.iconFeatureIndex=_e.featureIndex;break}for(let ce=z;ce<ee;ce++){const _e=u.get(ce);ne.verticalIconBox={x1:_e.x1,y1:_e.y1,x2:_e.x2,y2:_e.y2,anchorPointX:_e.anchorPointX,anchorPointY:_e.anchorPointY},ne.verticalIconFeatureIndex=_e.featureIndex;break}return ne}deserializeCollisionBoxes(u){this.collisionArrays=[];for(let d=0;d<this.symbolInstances.length;d++){const b=this.symbolInstances.get(d);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(u,b.textBoxStartIndex,b.textBoxEndIndex,b.verticalTextBoxStartIndex,b.verticalTextBoxEndIndex,b.iconBoxStartIndex,b.iconBoxEndIndex,b.verticalIconBoxStartIndex,b.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(u,d){const b=u.placedSymbolArray.get(d),M=b.vertexStartIndex+4*b.numGlyphs;for(let k=b.vertexStartIndex;k<M;k+=4)u.indexArray.emplaceBack(k,k+2,k+1),u.indexArray.emplaceBack(k+1,k+2,k+3)}getSortedSymbolIndexes(u){if(this.sortedAngle===u&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const d=Math.sin(u),b=Math.cos(u),M=[],k=[],R=[];for(let K=0;K<this.symbolInstances.length;++K){R.push(K);const z=this.symbolInstances.get(K);M.push(0|Math.round(d*z.anchorX+b*z.anchorY)),k.push(z.featureIndex)}return R.sort(((K,z)=>M[K]-M[z]||k[z]-k[K])),R}addToSortKeyRanges(u,d){const b=this.sortKeyRanges[this.sortKeyRanges.length-1];b&&b.sortKey===d?b.symbolInstanceEnd=u+1:this.sortKeyRanges.push({sortKey:d,symbolInstanceStart:u,symbolInstanceEnd:u+1})}sortFeatures(u){if(this.sortFeaturesByY&&this.sortedAngle!==u&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(u),this.sortedAngle=u,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const d of this.symbolInstanceIndexes){const b=this.symbolInstances.get(d);this.featureSortOrder.push(b.featureIndex),[b.rightJustifiedTextSymbolIndex,b.centerJustifiedTextSymbolIndex,b.leftJustifiedTextSymbolIndex].forEach(((M,k,R)=>{M>=0&&R.indexOf(M)===k&&this.addIndicesForPlacedSymbol(this.text,M)})),b.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,b.verticalPlacedTextSymbolIndex),b.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,b.placedIconSymbolIndex),b.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,b.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let Nv,Lf;Qn("SymbolBucket",$p,{omit:["layers","collisionBoxArray","features","compareText"]}),$p.MAX_GLYPHS=65535,$p.addDynamicAttributes=oy;var vr={get paint(){return Lf=Lf||new os({"icon-opacity":new Ti(dt.paint_symbol["icon-opacity"]),"icon-color":new Ti(dt.paint_symbol["icon-color"]),"icon-halo-color":new Ti(dt.paint_symbol["icon-halo-color"]),"icon-halo-width":new Ti(dt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Ti(dt.paint_symbol["icon-halo-blur"]),"icon-translate":new ni(dt.paint_symbol["icon-translate"]),"icon-translate-anchor":new ni(dt.paint_symbol["icon-translate-anchor"]),"text-opacity":new Ti(dt.paint_symbol["text-opacity"]),"text-color":new Ti(dt.paint_symbol["text-color"],{runtimeType:wl,getOverride:f=>f.textColor,hasOverride:f=>!!f.textColor}),"text-halo-color":new Ti(dt.paint_symbol["text-halo-color"]),"text-halo-width":new Ti(dt.paint_symbol["text-halo-width"]),"text-halo-blur":new Ti(dt.paint_symbol["text-halo-blur"]),"text-translate":new ni(dt.paint_symbol["text-translate"]),"text-translate-anchor":new ni(dt.paint_symbol["text-translate-anchor"])})},get layout(){return Nv=Nv||new os({"symbol-placement":new ni(dt.layout_symbol["symbol-placement"]),"symbol-spacing":new ni(dt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new ni(dt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Ti(dt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new ni(dt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new ni(dt.layout_symbol["icon-allow-overlap"]),"icon-overlap":new ni(dt.layout_symbol["icon-overlap"]),"icon-ignore-placement":new ni(dt.layout_symbol["icon-ignore-placement"]),"icon-optional":new ni(dt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new ni(dt.layout_symbol["icon-rotation-alignment"]),"icon-size":new Ti(dt.layout_symbol["icon-size"]),"icon-text-fit":new ni(dt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new ni(dt.layout_symbol["icon-text-fit-padding"]),"icon-image":new Ti(dt.layout_symbol["icon-image"]),"icon-rotate":new Ti(dt.layout_symbol["icon-rotate"]),"icon-padding":new Ti(dt.layout_symbol["icon-padding"]),"icon-keep-upright":new ni(dt.layout_symbol["icon-keep-upright"]),"icon-offset":new Ti(dt.layout_symbol["icon-offset"]),"icon-anchor":new Ti(dt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new ni(dt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new ni(dt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new ni(dt.layout_symbol["text-rotation-alignment"]),"text-field":new Ti(dt.layout_symbol["text-field"]),"text-font":new Ti(dt.layout_symbol["text-font"]),"text-size":new Ti(dt.layout_symbol["text-size"]),"text-max-width":new Ti(dt.layout_symbol["text-max-width"]),"text-line-height":new ni(dt.layout_symbol["text-line-height"]),"text-letter-spacing":new Ti(dt.layout_symbol["text-letter-spacing"]),"text-justify":new Ti(dt.layout_symbol["text-justify"]),"text-radial-offset":new Ti(dt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new ni(dt.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Ti(dt.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Ti(dt.layout_symbol["text-anchor"]),"text-max-angle":new ni(dt.layout_symbol["text-max-angle"]),"text-writing-mode":new ni(dt.layout_symbol["text-writing-mode"]),"text-rotate":new Ti(dt.layout_symbol["text-rotate"]),"text-padding":new ni(dt.layout_symbol["text-padding"]),"text-keep-upright":new ni(dt.layout_symbol["text-keep-upright"]),"text-transform":new Ti(dt.layout_symbol["text-transform"]),"text-offset":new Ti(dt.layout_symbol["text-offset"]),"text-allow-overlap":new ni(dt.layout_symbol["text-allow-overlap"]),"text-overlap":new ni(dt.layout_symbol["text-overlap"]),"text-ignore-placement":new ni(dt.layout_symbol["text-ignore-placement"]),"text-optional":new ni(dt.layout_symbol["text-optional"])})}};class sy{constructor(u){if(u.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=u.property.overrides?u.property.overrides.runtimeType:Ur,this.defaultValue=u}evaluate(u){if(u.formattedSection){const d=this.defaultValue.property.overrides;if(d&&d.hasOverride(u.formattedSection))return d.getOverride(u.formattedSection)}return u.feature&&u.featureState?this.defaultValue.evaluate(u.feature,u.featureState):this.defaultValue.property.specification.default}eachChild(u){this.defaultValue.isConstant()||u(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Qn("FormatSectionOverride",sy,{omit:["defaultValue"]});class Cu extends hu{constructor(u,d){super(u,vr,d)}recalculate(u,d){if(super.recalculate(u,d),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const b=this.layout.get("text-writing-mode");if(b){const M=[];for(const k of b)M.indexOf(k)<0&&M.push(k);this.layout._values["text-writing-mode"]=M}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(u,d,b,M){const k=this.layout.get(u).evaluate(d,{},b,M),R=this._unevaluatedLayout._values[u];return R.isDataDriven()||$h(R.value)||!k?k:(function(K,z){return z.replace(/{([^{}]+)}/g,((ee,ne)=>K&&ne in K?String(K[ne]):""))})(d.properties,k)}createBucket(u){return new $p(u)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const u of vr.paint.overridableProperties){if(!Cu.hasPaintOverride(this.layout,u))continue;const d=this.paint.get(u),b=new sy(d),M=new Rd(b,d.property.specification);let k=null;k=d.value.kind==="constant"||d.value.kind==="source"?new Bl("source",M):new Zh("composite",M,d.value.zoomStops),this.paint._values[u]=new Lu(d.property,k,d.parameters)}}_handleOverridablePaintPropertyUpdate(u,d,b){return!(!this.layout||d.isDataDriven()||b.isDataDriven())&&Cu.hasPaintOverride(this.layout,u)}static hasPaintOverride(u,d){const b=u.get("text-field"),M=vr.paint.properties[d];let k=!1;const R=K=>{for(const z of K)if(M.overrides&&M.overrides.hasOverride(z))return void(k=!0)};if(b.value.kind==="constant"&&b.value.value instanceof is)R(b.value.value.sections);else if(b.value.kind==="source"||b.value.kind==="composite"){const K=ee=>{k||(ee instanceof J&&Ni(ee.value)===no?R(ee.value.sections):ee instanceof ah?R(ee.sections):ee.eachChild(K))},z=b.value;z._styleExpression&&K(z._styleExpression.expression)}return k}}let Ka;var j0={get paint(){return Ka=Ka||new os({"background-color":new ni(dt.paint_background["background-color"]),"background-pattern":new Ef(dt.paint_background["background-pattern"]),"background-opacity":new ni(dt.paint_background["background-opacity"])})}};class Ff extends hu{constructor(u,d){super(u,j0,d)}}class IC extends hu{constructor(u,d){super(u,{},d),this.onAdd=b=>{this.implementation.onAdd&&this.implementation.onAdd(b,b.painter.context.gl)},this.onRemove=b=>{this.implementation.onRemove&&this.implementation.onRemove(b,b.painter.context.gl)},this.implementation=u}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class so{constructor(u){this._methodToThrottle=u,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._methodToThrottle()}),0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const Gv={once:!0},yg=63710088e-1;class ad{constructor(u,d){if(isNaN(u)||isNaN(d))throw new Error(`Invalid LngLat object: (${u}, ${d})`);if(this.lng=+u,this.lat=+d,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new ad(Kt(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(u){const d=Math.PI/180,b=this.lat*d,M=u.lat*d,k=Math.sin(b)*Math.sin(M)+Math.cos(b)*Math.cos(M)*Math.cos((u.lng-this.lng)*d);return yg*Math.acos(Math.min(k,1))}static convert(u){if(u instanceof ad)return u;if(Array.isArray(u)&&(u.length===2||u.length===3))return new ad(Number(u[0]),Number(u[1]));if(!Array.isArray(u)&&typeof u=="object"&&u!==null)return new ad(Number("lng"in u?u.lng:u.lon),Number(u.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const N0=2*Math.PI*yg;function ay(f){return N0*Math.cos(f*Math.PI/180)}function Qc(f){return(180+f)/360}function vg(f){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+f*Math.PI/360)))/360}function G0(f,u){return f/ay(u)}function ta(f){return 360*f-180}function na(f){return 360/Math.PI*Math.atan(Math.exp((180-360*f)*Math.PI/180))-90}function Wv(f,u){return f*ay(na(u))}class bg{constructor(u,d,b=0){this.x=+u,this.y=+d,this.z=+b}static fromLngLat(u,d=0){const b=ad.convert(u);return new bg(Qc(b.lng),vg(b.lat),G0(d,b.lat))}toLngLat(){return new ad(ta(this.x),na(this.y))}toAltitude(){return Wv(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/N0*(u=na(this.y),1/Math.cos(u*Math.PI/180));var u}}function Qv(f,u,d){var b=2*Math.PI*6378137/256/Math.pow(2,d);return[f*b-2*Math.PI*6378137/2,u*b-2*Math.PI*6378137/2]}class Jo{constructor(u,d,b){if(!(function(M,k,R){return!(M<0||M>25||R<0||R>=Math.pow(2,M)||k<0||k>=Math.pow(2,M))})(u,d,b))throw new Error(`x=${d}, y=${b}, z=${u} outside of bounds. 0<=x<${Math.pow(2,u)}, 0<=y<${Math.pow(2,u)} 0<=z<=25 `);this.z=u,this.x=d,this.y=b,this.key=Cg(0,u,u,d,b)}equals(u){return this.z===u.z&&this.x===u.x&&this.y===u.y}url(u,d,b){const M=(R=this.y,K=this.z,z=Qv(256*(k=this.x),256*(R=Math.pow(2,K)-R-1),K),ee=Qv(256*(k+1),256*(R+1),K),z[0]+","+z[1]+","+ee[0]+","+ee[1]);var k,R,K,z,ee;const ne=(function(ce,_e,Se){let ke,ze="";for(let $e=ce;$e>0;$e--)ke=1<<$e-1,ze+=(_e&ke?1:0)+(Se&ke?2:0);return ze})(this.z,this.x,this.y);return u[(this.x+this.y)%u.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(b==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,d>1?"@2x":"").replace(/{quadkey}/g,ne).replace(/{bbox-epsg-3857}/g,M)}isChildOf(u){const d=this.z-u.z;return d>0&&u.x===this.x>>d&&u.y===this.y>>d}getTilePoint(u){const d=Math.pow(2,this.z);return new c((u.x*d-this.x)*gt,(u.y*d-this.y)*gt)}toString(){return`${this.z}/${this.x}/${this.y}`}}class ly{constructor(u,d){this.wrap=u,this.canonical=d,this.key=Cg(u,d.z,d.z,d.x,d.y)}}class cs{constructor(u,d,b,M,k){if(this.terrainRttPosMatrix32f=null,u<b)throw new Error(`overscaledZ should be >= z; overscaledZ = ${u}; z = ${b}`);this.overscaledZ=u,this.wrap=d,this.canonical=new Jo(b,+M,+k),this.key=Cg(d,u,b,M,k)}clone(){return new cs(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(u){return this.overscaledZ===u.overscaledZ&&this.wrap===u.wrap&&this.canonical.equals(u.canonical)}scaledTo(u){if(u>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${u}; overscaledZ = ${this.overscaledZ}`);const d=this.canonical.z-u;return u>this.canonical.z?new cs(u,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new cs(u,this.wrap,u,this.canonical.x>>d,this.canonical.y>>d)}isOverscaled(){return this.overscaledZ>this.canonical.z}calculateScaledKey(u,d){if(u>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${u}; overscaledZ = ${this.overscaledZ}`);const b=this.canonical.z-u;return u>this.canonical.z?Cg(this.wrap*+d,u,this.canonical.z,this.canonical.x,this.canonical.y):Cg(this.wrap*+d,u,u,this.canonical.x>>b,this.canonical.y>>b)}isChildOf(u){if(u.wrap!==this.wrap||this.overscaledZ-u.overscaledZ<=0)return!1;if(u.overscaledZ===0)return this.overscaledZ>0;const d=this.canonical.z-u.canonical.z;return!(d<0)&&u.canonical.x===this.canonical.x>>d&&u.canonical.y===this.canonical.y>>d}children(u){if(this.overscaledZ>=u)return[new cs(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const d=this.canonical.z+1,b=2*this.canonical.x,M=2*this.canonical.y;return[new cs(d,this.wrap,d,b,M),new cs(d,this.wrap,d,b+1,M),new cs(d,this.wrap,d,b,M+1),new cs(d,this.wrap,d,b+1,M+1)]}isLessThan(u){return this.wrap<u.wrap||!(this.wrap>u.wrap)&&(this.overscaledZ<u.overscaledZ||!(this.overscaledZ>u.overscaledZ)&&(this.canonical.x<u.canonical.x||!(this.canonical.x>u.canonical.x)&&this.canonical.y<u.canonical.y))}wrapped(){return new cs(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(u){return new cs(this.overscaledZ,u,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new ly(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(u){return this.canonical.getTilePoint(new bg(u.x-this.wrap,u.y))}}function Cg(f,u,d,b,M){(f*=2)<0&&(f=-1*f-1);const k=1<<d;return(k*k*f+k*M+b).toString(36)+d.toString(36)+u.toString(36)}function Hp(f,u){return u?f.properties[u]:f.id}Qn("CanonicalTileID",Jo),Qn("OverscaledTileID",cs,{omit:["terrainRttPosMatrix32f"]});class Sh{constructor(){this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0}extend(u){return this.minX=Math.min(this.minX,u.x),this.minY=Math.min(this.minY,u.y),this.maxX=Math.max(this.maxX,u.x),this.maxY=Math.max(this.maxY,u.y),this}expandBy(u){return this.minX-=u,this.minY-=u,this.maxX+=u,this.maxY+=u,(this.minX>this.maxX||this.minY>this.maxY)&&(this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0),this}shrinkBy(u){return this.expandBy(-u)}map(u){const d=new Sh;return d.extend(u(new c(this.minX,this.minY))),d.extend(u(new c(this.maxX,this.minY))),d.extend(u(new c(this.minX,this.maxY))),d.extend(u(new c(this.maxX,this.maxY))),d}static fromPoints(u){const d=new Sh;for(const b of u)d.extend(b);return d}contains(u){return u.x>=this.minX&&u.x<=this.maxX&&u.y>=this.minY&&u.y<=this.maxY}empty(){return this.minX>this.maxX}width(){return this.maxX-this.minX}height(){return this.maxY-this.minY}covers(u){return!this.empty()&&!u.empty()&&u.minX>=this.minX&&u.maxX<=this.maxX&&u.minY>=this.minY&&u.maxY<=this.maxY}intersects(u){return!this.empty()&&!u.empty()&&u.minX<=this.maxX&&u.maxX>=this.minX&&u.minY<=this.maxY&&u.maxY>=this.minY}}class _g{constructor(u){this._stringToNumber={},this._numberToString=[];for(let d=0;d<u.length;d++){const b=u[d];this._stringToNumber[b]=d,this._numberToString[d]=b}}encode(u){return this._stringToNumber[u]}decode(u){if(u>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${u} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[u]}}class uy{constructor(u,d,b,M,k){this.type="Feature",this._vectorTileFeature=u,u._z=d,u._x=b,u._y=M,this.properties=u.properties,this.id=k}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(u){this._geometry=u}toJSON(){const u={geometry:this.geometry};for(const d in this)d!=="_geometry"&&d!=="_vectorTileFeature"&&(u[d]=this[d]);return u}}class xg{constructor(u,d){this.tileID=u,this.x=u.canonical.x,this.y=u.canonical.y,this.z=u.canonical.z,this.grid=new UA(gt,16,0),this.grid3D=new UA(gt,16,0),this.featureIndexArray=new et,this.promoteId=d}insert(u,d,b,M,k,R){const K=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(b,M,k);const z=R?this.grid3D:this.grid;for(let ee=0;ee<d.length;ee++){const ne=d[ee],ce=[1/0,1/0,-1/0,-1/0];for(let _e=0;_e<ne.length;_e++){const Se=ne[_e];ce[0]=Math.min(ce[0],Se.x),ce[1]=Math.min(ce[1],Se.y),ce[2]=Math.max(ce[2],Se.x),ce[3]=Math.max(ce[3],Se.y)}ce[0]<gt&&ce[1]<gt&&ce[2]>=0&&ce[3]>=0&&z.insert(K,ce[0],ce[1],ce[2],ce[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new _C(new Z1(this.rawTileData)).layers,this.sourceLayerCoder=new _g(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(u,d,b,M){this.loadVTLayers();const k=u.params,R=gt/u.tileSize/u.scale,K=Ql(k.filter,k.globalState),z=u.queryGeometry,ee=u.queryPadding*R,ne=Sh.fromPoints(z),ce=this.grid.query(ne.minX-ee,ne.minY-ee,ne.maxX+ee,ne.maxY+ee),_e=Sh.fromPoints(u.cameraQueryGeometry).expandBy(ee),Se=this.grid3D.query(_e.minX,_e.minY,_e.maxX,_e.maxY,(($e,it,Et,ut)=>(function(pt,Gt,Jt,mn,Nn){for(const zn of pt)if(Gt<=zn.x&&Jt<=zn.y&&mn>=zn.x&&Nn>=zn.y)return!0;const Tn=[new c(Gt,Jt),new c(Gt,Nn),new c(mn,Nn),new c(mn,Jt)];if(pt.length>2){for(const zn of Tn)if(od(pt,zn))return!0}for(let zn=0;zn<pt.length-1;zn++)if(U1(pt[zn],pt[zn+1],Tn))return!0;return!1})(u.cameraQueryGeometry,$e-ee,it-ee,Et+ee,ut+ee)));for(const $e of Se)ce.push($e);ce.sort(Yc);const ke={};let ze;for(let $e=0;$e<ce.length;$e++){const it=ce[$e];if(it===ze)continue;ze=it;const Et=this.featureIndexArray.get(it);let ut=null;this.loadMatchingFeature(ke,Et.bucketIndex,Et.sourceLayerIndex,Et.featureIndex,K,k.layers,k.availableImages,d,b,M,((pt,Gt,Jt)=>(ut||(ut=Xs(pt)),Gt.queryIntersectsFeature({queryGeometry:z,feature:pt,featureState:Jt,geometry:ut,zoom:this.z,transform:u.transform,pixelsToTileUnits:R,pixelPosMatrix:u.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:u.getElevation}))))}return ke}loadMatchingFeature(u,d,b,M,k,R,K,z,ee,ne,ce){const _e=this.bucketLayerIDs[d];if(R&&!_e.some(($e=>R.has($e))))return;const Se=this.sourceLayerCoder.decode(b),ke=this.vtLayers[Se].feature(M);if(k.needGeometry){const $e=WA(ke,!0);if(!k.filter(new io(this.tileID.overscaledZ),$e,this.tileID.canonical))return}else if(!k.filter(new io(this.tileID.overscaledZ),ke))return;const ze=this.getId(ke,Se);for(let $e=0;$e<_e.length;$e++){const it=_e[$e];if(R&&!R.has(it))continue;const Et=z[it];if(!Et)continue;let ut={};ze&&ne&&(ut=ne.getState(Et.sourceLayer||"_geojsonTileLayer",ze));const pt=Ke({},ee[it]);pt.paint=Mg(pt.paint,Et.paint,ke,ut,K),pt.layout=Mg(pt.layout,Et.layout,ke,ut,K);const Gt=!ce||ce(ke,Et,ut);if(!Gt)continue;const Jt=new uy(ke,this.z,this.x,this.y,ze);Jt.layer=pt;let mn=u[it];mn===void 0&&(mn=u[it]=[]),mn.push({featureIndex:M,feature:Jt,intersectionZ:Gt})}}lookupSymbolFeatures(u,d,b,M,k,R,K,z){const ee={};this.loadVTLayers();const ne=Ql(k.filterSpec,k.globalState);for(const ce of u)this.loadMatchingFeature(ee,b,M,ce,ne,R,K,z,d);return ee}hasLayer(u){for(const d of this.bucketLayerIDs)for(const b of d)if(u===b)return!0;return!1}getId(u,d){var b;let M=u.id;return this.promoteId&&(M=u.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[d]],typeof M=="boolean"&&(M=Number(M)),M===void 0&&(!((b=u.properties)===null||b===void 0)&&b.cluster)&&this.promoteId&&(M=Number(u.properties.cluster_id))),M}}function Mg(f,u,d,b,M){return Be(f,((k,R)=>{const K=u instanceof Au?u.get(R):null;return K&&K.evaluate?K.evaluate(d,b,M):K}))}function Yc(f,u){return u-f}function $d(f,u,d,b,M){const k=[];for(let R=0;R<f.length;R++){const K=f[R];let z;for(let ee=0;ee<K.length-1;ee++){let ne=K[ee],ce=K[ee+1];ne.x<u&&ce.x<u||(ne.x<u?ne=new c(u,ne.y+(u-ne.x)/(ce.x-ne.x)*(ce.y-ne.y))._round():ce.x<u&&(ce=new c(u,ne.y+(u-ne.x)/(ce.x-ne.x)*(ce.y-ne.y))._round()),ne.y<d&&ce.y<d||(ne.y<d?ne=new c(ne.x+(d-ne.y)/(ce.y-ne.y)*(ce.x-ne.x),d)._round():ce.y<d&&(ce=new c(ne.x+(d-ne.y)/(ce.y-ne.y)*(ce.x-ne.x),d)._round()),ne.x>=b&&ce.x>=b||(ne.x>=b?ne=new c(b,ne.y+(b-ne.x)/(ce.x-ne.x)*(ce.y-ne.y))._round():ce.x>=b&&(ce=new c(b,ne.y+(b-ne.x)/(ce.x-ne.x)*(ce.y-ne.y))._round()),ne.y>=M&&ce.y>=M||(ne.y>=M?ne=new c(ne.x+(M-ne.y)/(ce.y-ne.y)*(ce.x-ne.x),M)._round():ce.y>=M&&(ce=new c(ne.x+(M-ne.y)/(ce.y-ne.y)*(ce.x-ne.x),M)._round()),z&&ne.equals(z[z.length-1])||(z=[ne],k.push(z)),z.push(ce)))))}}return k}Qn("FeatureIndex",xg,{omit:["rawTileData","sourceLayerCoder"]});class ld extends c{constructor(u,d,b,M){super(u,d),this.angle=b,M!==void 0&&(this.segment=M)}clone(){return new ld(this.x,this.y,this.angle,this.segment)}}function kC(f,u,d,b,M){if(u.segment===void 0||d===0)return!0;let k=u,R=u.segment+1,K=0;for(;K>-d/2;){if(R--,R<0)return!1;K-=f[R].dist(k),k=f[R]}K+=f[R].dist(f[R+1]),R++;const z=[];let ee=0;for(;K<d/2;){const ne=f[R],ce=f[R+1];if(!ce)return!1;let _e=f[R-1].angleTo(ne)-ne.angleTo(ce);for(_e=Math.abs((_e+3*Math.PI)%(2*Math.PI)-Math.PI),z.push({distance:K,angleDelta:_e}),ee+=_e;K-z[0].distance>b;)ee-=z.shift().angleDelta;if(ee>M)return!1;R++,K+=ne.dist(ce)}return!0}function Yv(f){let u=0;for(let d=0;d<f.length-1;d++)u+=f[d].dist(f[d+1]);return u}function TC(f,u,d){return f?.6*u*d:0}function qv(f,u){return Math.max(f?f.right-f.left:0,u?u.right-u.left:0)}function RC(f,u,d,b,M,k){const R=TC(d,M,k),K=qv(d,b)*k;let z=0;const ee=Yv(f)/2;for(let ne=0;ne<f.length-1;ne++){const ce=f[ne],_e=f[ne+1],Se=ce.dist(_e);if(z+Se>ee){const ke=(ee-z)/Se,ze=$a.number(ce.x,_e.x,ke),$e=$a.number(ce.y,_e.y,ke),it=new ld(ze,$e,_e.angleTo(ce),ne);return it._round(),!R||kC(f,it,K,R,u)?it:void 0}z+=Se}}function Hd(f,u,d,b,M,k,R,K,z){const ee=TC(b,k,R),ne=qv(b,M),ce=ne*R,_e=f[0].x===0||f[0].x===z||f[0].y===0||f[0].y===z;return u-ce<u/4&&(u=ce+u/4),ur(f,_e?u/2*K%u:(ne/2+2*k)*R*K%u,u,ee,d,ce,_e,!1,z)}function ur(f,u,d,b,M,k,R,K,z){const ee=k/2,ne=Yv(f);let ce=0,_e=u-d,Se=[];for(let ke=0;ke<f.length-1;ke++){const ze=f[ke],$e=f[ke+1],it=ze.dist($e),Et=$e.angleTo(ze);for(;_e+d<ce+it;){_e+=d;const ut=(_e-ce)/it,pt=$a.number(ze.x,$e.x,ut),Gt=$a.number(ze.y,$e.y,ut);if(pt>=0&&pt<z&&Gt>=0&&Gt<z&&_e-ee>=0&&_e+ee<=ne){const Jt=new ld(pt,Gt,Et,ke);Jt._round(),b&&!kC(f,Jt,k,b,M)||Se.push(Jt)}}ce+=it}return K||Se.length||R||(Se=ur(f,ce/2,d,b,M,k,R,!0,z)),Se}function cy(f,u,d,b){const M=[],k=f.image,R=k.pixelRatio,K=k.paddedRect.w-2,z=k.paddedRect.h-2;let ee={x1:f.left,y1:f.top,x2:f.right,y2:f.bottom};const ne=k.stretchX||[[0,K]],ce=k.stretchY||[[0,z]],_e=(un,Gi)=>un+Gi[1]-Gi[0],Se=ne.reduce(_e,0),ke=ce.reduce(_e,0),ze=K-Se,$e=z-ke;let it=0,Et=Se,ut=0,pt=ke,Gt=0,Jt=ze,mn=0,Nn=$e;if(k.content&&b){const un=k.content,Gi=un[2]-un[0],Xi=un[3]-un[1];(k.textFitWidth||k.textFitHeight)&&(ee=F0(f)),it=Wu(ne,0,un[0]),ut=Wu(ce,0,un[1]),Et=Wu(ne,un[0],un[2]),pt=Wu(ce,un[1],un[3]),Gt=un[0]-it,mn=un[1]-ut,Jt=Gi-Et,Nn=Xi-pt}const Tn=ee.x1,zn=ee.y1,bi=ee.x2-Tn,jn=ee.y2-zn,Kn=(un,Gi,Xi,Oi)=>{const si=Ay(un.stretch-it,Et,bi,Tn),Or=Eo(un.fixed-Gt,Jt,un.stretch,Se),Fs=Ay(Gi.stretch-ut,pt,jn,zn),_a=Eo(Gi.fixed-mn,Nn,Gi.stretch,ke),ia=Ay(Xi.stretch-it,Et,bi,Tn),gl=Eo(Xi.fixed-Gt,Jt,Xi.stretch,Se),La=Ay(Oi.stretch-ut,pt,jn,zn),xa=Eo(Oi.fixed-mn,Nn,Oi.stretch,ke),es=new c(si,Fs),Ts=new c(ia,Fs),Tl=new c(ia,La),yl=new c(si,La),Fa=new c(Or/R,_a/R),qc=new c(gl/R,xa/R),za=u*Math.PI/180;if(za){const vl=Math.sin(za),ra=Math.cos(za),oa=[ra,-vl,vl,ra];es._matMult(oa),Ts._matMult(oa),yl._matMult(oa),Tl._matMult(oa)}const Zl=un.stretch+un.fixed,ja=Gi.stretch+Gi.fixed;return{tl:es,tr:Ts,bl:yl,br:Tl,tex:{x:k.paddedRect.x+1+Zl,y:k.paddedRect.y+1+ja,w:Xi.stretch+Xi.fixed-Zl,h:Oi.stretch+Oi.fixed-ja},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Fa,pixelOffsetBR:qc,minFontScaleX:Jt/R/bi,minFontScaleY:Nn/R/jn,isSDF:d}};if(b&&(k.stretchX||k.stretchY)){const un=W0(ne,ze,Se),Gi=W0(ce,$e,ke);for(let Xi=0;Xi<un.length-1;Xi++){const Oi=un[Xi],si=un[Xi+1];for(let Or=0;Or<Gi.length-1;Or++)M.push(Kn(Oi,Gi[Or],si,Gi[Or+1]))}}else M.push(Kn({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:K+1},{fixed:0,stretch:z+1}));return M}function Wu(f,u,d){let b=0;for(const M of f)b+=Math.max(u,Math.min(d,M[1]))-Math.max(u,Math.min(d,M[0]));return b}function W0(f,u,d){const b=[{fixed:-1,stretch:0}];for(const[M,k]of f){const R=b[b.length-1];b.push({fixed:M-R.stretch,stretch:R.stretch}),b.push({fixed:M-R.stretch,stretch:R.stretch+(k-M)})}return b.push({fixed:u+1,stretch:d}),b}function Ay(f,u,d,b){return f/u*d+b}function Eo(f,u,d,b){return f-u*d/b}Qn("Anchor",ld);class Q0{constructor(u,d,b,M,k,R,K,z,ee,ne){var ce;if(this.boxStartIndex=u.length,ee){let _e=R.top,Se=R.bottom;const ke=R.collisionPadding;ke&&(_e-=ke[1],Se+=ke[3]);let ze=Se-_e;ze>0&&(ze=Math.max(10,ze),this.circleDiameter=ze)}else{const _e=!((ce=R.image)===null||ce===void 0)&&ce.content&&(R.image.textFitWidth||R.image.textFitHeight)?F0(R):{x1:R.left,y1:R.top,x2:R.right,y2:R.bottom};_e.y1=_e.y1*K-z[0],_e.y2=_e.y2*K+z[2],_e.x1=_e.x1*K-z[3],_e.x2=_e.x2*K+z[1];const Se=R.collisionPadding;if(Se&&(_e.x1-=Se[0]*K,_e.y1-=Se[1]*K,_e.x2+=Se[2]*K,_e.y2+=Se[3]*K),ne){const ke=new c(_e.x1,_e.y1),ze=new c(_e.x2,_e.y1),$e=new c(_e.x1,_e.y2),it=new c(_e.x2,_e.y2),Et=ne*Math.PI/180;ke._rotate(Et),ze._rotate(Et),$e._rotate(Et),it._rotate(Et),_e.x1=Math.min(ke.x,ze.x,$e.x,it.x),_e.x2=Math.max(ke.x,ze.x,$e.x,it.x),_e.y1=Math.min(ke.y,ze.y,$e.y,it.y),_e.y2=Math.max(ke.y,ze.y,$e.y,it.y)}u.emplaceBack(d.x,d.y,_e.x1,_e.y1,_e.x2,_e.y2,b,M,k)}this.boxEndIndex=u.length}}class hy{constructor(u=[],d=(b,M)=>b<M?-1:b>M?1:0){if(this.data=u,this.length=this.data.length,this.compare=d,this.length>0)for(let b=(this.length>>1)-1;b>=0;b--)this._down(b)}push(u){this.data.push(u),this._up(this.length++)}pop(){if(this.length===0)return;const u=this.data[0],d=this.data.pop();return--this.length>0&&(this.data[0]=d,this._down(0)),u}peek(){return this.data[0]}_up(u){const{data:d,compare:b}=this,M=d[u];for(;u>0;){const k=u-1>>1,R=d[k];if(b(M,R)>=0)break;d[u]=R,u=k}d[u]=M}_down(u){const{data:d,compare:b}=this,M=this.length>>1,k=d[u];for(;u<M;){let R=1+(u<<1);const K=R+1;if(K<this.length&&b(d[K],d[R])<0&&(R=K),b(d[R],k)>=0)break;d[u]=d[R],u=R}d[u]=k}}function wg(f,u=1,d=!1){const b=Sh.fromPoints(f[0]),M=Math.min(b.width(),b.height());let k=M/2;const R=new hy([],o2),{minX:K,minY:z,maxX:ee,maxY:ne}=b;if(M===0)return new c(K,z);for(let Se=K;Se<ee;Se+=M)for(let ke=z;ke<ne;ke+=M)R.push(new _u(Se+k,ke+k,k,f));let ce=(function(Se){let ke=0,ze=0,$e=0;const it=Se[0];for(let Et=0,ut=it.length,pt=ut-1;Et<ut;pt=Et++){const Gt=it[Et],Jt=it[pt],mn=Gt.x*Jt.y-Jt.x*Gt.y;ze+=(Gt.x+Jt.x)*mn,$e+=(Gt.y+Jt.y)*mn,ke+=3*mn}return new _u(ze/ke,$e/ke,0,Se)})(f),_e=R.length;for(;R.length;){const Se=R.pop();(Se.d>ce.d||!ce.d)&&(ce=Se,d&&console.log("found best %d after %d probes",Math.round(1e4*Se.d)/1e4,_e)),Se.max-ce.d<=u||(k=Se.h/2,R.push(new _u(Se.p.x-k,Se.p.y-k,k,f)),R.push(new _u(Se.p.x+k,Se.p.y-k,k,f)),R.push(new _u(Se.p.x-k,Se.p.y+k,k,f)),R.push(new _u(Se.p.x+k,Se.p.y+k,k,f)),_e+=4)}return d&&(console.log(`num probes: ${_e}`),console.log(`best distance: ${ce.d}`)),ce.p}function o2(f,u){return u.max-f.max}function _u(f,u,d,b){this.p=new c(f,u),this.h=d,this.d=(function(M,k){let R=!1,K=1/0;for(let z=0;z<k.length;z++){const ee=k[z];for(let ne=0,ce=ee.length,_e=ce-1;ne<ce;_e=ne++){const Se=ee[ne],ke=ee[_e];Se.y>M.y!=ke.y>M.y&&M.x<(ke.x-Se.x)*(M.y-Se.y)/(ke.y-Se.y)+Se.x&&(R=!R),K=Math.min(K,ba(M,Se,ke))}}return(R?1:-1)*Math.sqrt(K)})(this.p,b),this.max=this.d+this.h*Math.SQRT2}var ml;s.aI=void 0,(ml=s.aI||(s.aI={}))[ml.center=1]="center",ml[ml.left=2]="left",ml[ml.right=3]="right",ml[ml.top=4]="top",ml[ml.bottom=5]="bottom",ml[ml["top-left"]=6]="top-left",ml[ml["top-right"]=7]="top-right",ml[ml["bottom-left"]=8]="bottom-left",ml[ml["bottom-right"]=9]="bottom-right";const dy=Number.POSITIVE_INFINITY;function Vv(f,u){return u[1]!==dy?(function(d,b,M){let k=0,R=0;switch(b=Math.abs(b),M=Math.abs(M),d){case"top-right":case"top-left":case"top":R=M-7;break;case"bottom-right":case"bottom-left":case"bottom":R=7-M}switch(d){case"top-right":case"bottom-right":case"right":k=-b;break;case"top-left":case"bottom-left":case"left":k=b}return[k,R]})(f,u[0],u[1]):(function(d,b){let M=0,k=0;b<0&&(b=0);const R=b/Math.SQRT2;switch(d){case"top-right":case"top-left":k=R-7;break;case"bottom-right":case"bottom-left":k=7-R;break;case"bottom":k=7-b;break;case"top":k=b-7}switch(d){case"top-right":case"bottom-right":M=-R;break;case"top-left":case"bottom-left":M=R;break;case"left":M=b;break;case"right":M=-b}return[M,k]})(f,u[0])}function $v(f,u,d){var b;const M=f.layout,k=(b=M.get("text-variable-anchor-offset"))===null||b===void 0?void 0:b.evaluate(u,{},d);if(k){const K=k.values,z=[];for(let ee=0;ee<K.length;ee+=2){const ne=z[ee]=K[ee],ce=K[ee+1].map((_e=>_e*Ua));ne.startsWith("top")?ce[1]-=7:ne.startsWith("bottom")&&(ce[1]+=7),z[ee+1]=ce}return new vo(z)}const R=M.get("text-variable-anchor");if(R){let K;K=f._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[M.get("text-radial-offset").evaluate(u,{},d)*Ua,dy]:M.get("text-offset").evaluate(u,{},d).map((ee=>ee*Ua));const z=[];for(const ee of R)z.push(ee,Vv(ee,K));return new vo(z)}return null}function Zp(f){switch(f){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function VA(f,u,d,b,M,k,R,K,z,ee,ne,ce){let _e=k.textMaxSize.evaluate(u,{});_e===void 0&&(_e=R);const Se=f.layers[0].layout,ke=Se.get("icon-offset").evaluate(u,{},ne),ze=Y0(d.horizontal),$e=R/24,it=f.tilePixelRatio*$e,Et=f.tilePixelRatio*_e/24,ut=f.tilePixelRatio*K,pt=f.tilePixelRatio*Se.get("symbol-spacing"),Gt=Se.get("text-padding")*f.tilePixelRatio,Jt=(function(Xi,Oi,si,Or=1){const Fs=Xi.get("icon-padding").evaluate(Oi,{},si),_a=Fs&&Fs.values;return[_a[0]*Or,_a[1]*Or,_a[2]*Or,_a[3]*Or]})(Se,u,ne,f.tilePixelRatio),mn=Se.get("text-max-angle")/180*Math.PI,Nn=Se.get("text-rotation-alignment")!=="viewport"&&Se.get("symbol-placement")!=="point",Tn=Se.get("icon-rotation-alignment")==="map"&&Se.get("symbol-placement")!=="point",zn=Se.get("symbol-placement"),bi=pt/2,jn=Se.get("icon-text-fit");let Kn;b&&jn!=="none"&&(f.allowVerticalPlacement&&d.vertical&&(Kn=ry(b,d.vertical,jn,Se.get("icon-text-fit-padding"),ke,$e)),ze&&(b=ry(b,ze,jn,Se.get("icon-text-fit-padding"),ke,$e)));const un=ne?ce.line.getGranularityForZoomLevel(ne.z):1,Gi=(Xi,Oi)=>{Oi.x<0||Oi.x>=gt||Oi.y<0||Oi.y>=gt||(function(si,Or,Fs,_a,ia,gl,La,xa,es,Ts,Tl,yl,Fa,qc,za,Zl,ja,vl,ra,oa,As,Qu,bl,_c,py){const Jp=si.addToLineVertexArray(Or,Fs);let em,Xd,A,g,_=0,I=0,j=0,$=0,Ce=-1,Ye=-1;const vt={};let Vt=NA("");if(si.allowVerticalPlacement&&_a.vertical){const ir=xa.layout.get("text-rotate").evaluate(As,{},_c)+90;A=new Q0(es,Or,Ts,Tl,yl,_a.vertical,Fa,qc,za,ir),La&&(g=new Q0(es,Or,Ts,Tl,yl,La,ja,vl,za,ir))}if(ia){const ir=xa.layout.get("icon-rotate").evaluate(As,{}),Sr=xa.layout.get("icon-text-fit")!=="none",Vc=cy(ia,ir,bl,Sr),Eh=La?cy(La,ir,bl,Sr):void 0;Xd=new Q0(es,Or,Ts,Tl,yl,ia,ja,vl,!1,ir),_=4*Vc.length;const q0=si.iconSizeData;let jf=null;q0.kind==="source"?(jf=[Gu*xa.layout.get("icon-size").evaluate(As,{})],jf[0]>bu&&Ct(`${si.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):q0.kind==="composite"&&(jf=[Gu*Qu.compositeIconSizes[0].evaluate(As,{},_c),Gu*Qu.compositeIconSizes[1].evaluate(As,{},_c)],(jf[0]>bu||jf[1]>bu)&&Ct(`${si.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),si.addSymbols(si.icon,Vc,jf,oa,ra,As,s.as.none,Or,Jp.lineStartIndex,Jp.lineLength,-1,_c),Ce=si.icon.placedSymbolArray.length-1,Eh&&(I=4*Eh.length,si.addSymbols(si.icon,Eh,jf,oa,ra,As,s.as.vertical,Or,Jp.lineStartIndex,Jp.lineLength,-1,_c),Ye=si.icon.placedSymbolArray.length-1)}const cn=Object.keys(_a.horizontal);for(const ir of cn){const Sr=_a.horizontal[ir];if(!em){Vt=NA(Sr.text);const Eh=xa.layout.get("text-rotate").evaluate(As,{},_c);em=new Q0(es,Or,Ts,Tl,yl,Sr,Fa,qc,za,Eh)}const Vc=Sr.positionedLines.length===1;if(j+=Hv(si,Or,Sr,gl,xa,za,As,Zl,Jp,_a.vertical?s.as.horizontal:s.as.horizontalOnly,Vc?cn:[ir],vt,Ce,Qu,_c),Vc)break}_a.vertical&&($+=Hv(si,Or,_a.vertical,gl,xa,za,As,Zl,Jp,s.as.vertical,["vertical"],vt,Ye,Qu,_c));const yn=em?em.boxStartIndex:si.collisionBoxArray.length,Xt=em?em.boxEndIndex:si.collisionBoxArray.length,on=A?A.boxStartIndex:si.collisionBoxArray.length,Ii=A?A.boxEndIndex:si.collisionBoxArray.length,rr=Xd?Xd.boxStartIndex:si.collisionBoxArray.length,xs=Xd?Xd.boxEndIndex:si.collisionBoxArray.length,Ut=g?g.boxStartIndex:si.collisionBoxArray.length,It=g?g.boxEndIndex:si.collisionBoxArray.length;let Wt=-1;const hn=(ir,Sr)=>ir&&ir.circleDiameter?Math.max(ir.circleDiameter,Sr):Sr;Wt=hn(em,Wt),Wt=hn(A,Wt),Wt=hn(Xd,Wt),Wt=hn(g,Wt);const $i=Wt>-1?1:0;$i&&(Wt*=py/Ua),si.glyphOffsetArray.length>=$p.MAX_GLYPHS&&Ct("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),As.sortKey!==void 0&&si.addToSortKeyRanges(si.symbolInstances.length,As.sortKey);const Do=$v(xa,As,_c),[Di,Kr]=(function(ir,Sr){const Vc=ir.length,Eh=Sr?.values;if(Eh?.length>0)for(let q0=0;q0<Eh.length;q0+=2){const jf=Eh[q0+1];ir.emplaceBack(s.aI[Eh[q0]],jf[0],jf[1])}return[Vc,ir.length]})(si.textAnchorOffsets,Do);si.symbolInstances.emplaceBack(Or.x,Or.y,vt.right>=0?vt.right:-1,vt.center>=0?vt.center:-1,vt.left>=0?vt.left:-1,vt.vertical||-1,Ce,Ye,Vt,yn,Xt,on,Ii,rr,xs,Ut,It,Ts,j,$,_,I,$i,0,Fa,Wt,Di,Kr)})(f,Oi,Xi,d,b,M,Kn,f.layers[0],f.collisionBoxArray,u.index,u.sourceLayerIndex,f.index,it,[Gt,Gt,Gt,Gt],Nn,z,ut,Jt,Tn,ke,u,k,ee,ne,R)};if(zn==="line")for(const Xi of $d(u.geometry,0,0,gt,gt)){const Oi=gc(Xi,un),si=Hd(Oi,pt,mn,d.vertical||ze,b,24,Et,f.overscaling,gt);for(const Or of si)ze&&Zd(f,ze.text,bi,Or)||Gi(Oi,Or)}else if(zn==="line-center"){for(const Xi of u.geometry)if(Xi.length>1){const Oi=gc(Xi,un),si=RC(Oi,mn,d.vertical||ze,b,24,Et);si&&Gi(Oi,si)}}else if(u.type==="Polygon")for(const Xi of Mf(u.geometry,0)){const Oi=wg(Xi,16);Gi(gc(Xi[0],un,!0),new ld(Oi.x,Oi.y,0))}else if(u.type==="LineString")for(const Xi of u.geometry){const Oi=gc(Xi,un);Gi(Oi,new ld(Oi[0].x,Oi[0].y,0))}else if(u.type==="Point")for(const Xi of u.geometry)for(const Oi of Xi)Gi([Oi],new ld(Oi.x,Oi.y,0))}function Hv(f,u,d,b,M,k,R,K,z,ee,ne,ce,_e,Se,ke){const ze=(function(Et,ut,pt,Gt,Jt,mn,Nn,Tn){const zn=Gt.layout.get("text-rotate").evaluate(mn,{})*Math.PI/180,bi=[];for(const jn of ut.positionedLines)for(const Kn of jn.positionedGlyphs){if(!Kn.rect)continue;const un=Kn.rect||{};let Gi=4,Xi=!0,Oi=1,si=0;const Or=(Jt||Tn)&&Kn.vertical,Fs=Kn.metrics.advance*Kn.scale/2;if(Tn&&ut.verticalizable&&(si=jn.lineOffset/2-(Kn.imageName?-(Ua-Kn.metrics.width*Kn.scale)/2:(Kn.scale-1)*Ua)),Kn.imageName){const vl=Nn[Kn.imageName];Xi=vl.sdf,Oi=vl.pixelRatio,Gi=1/Oi}const _a=Jt?[Kn.x+Fs,Kn.y]:[0,0];let ia=Jt?[0,0]:[Kn.x+Fs+pt[0],Kn.y+pt[1]-si],gl=[0,0];Or&&(gl=ia,ia=[0,0]);const La=Kn.metrics.isDoubleResolution?2:1,xa=(Kn.metrics.left-Gi)*Kn.scale-Fs+ia[0],es=(-Kn.metrics.top-Gi)*Kn.scale+ia[1],Ts=xa+un.w/La*Kn.scale/Oi,Tl=es+un.h/La*Kn.scale/Oi,yl=new c(xa,es),Fa=new c(Ts,es),qc=new c(xa,Tl),za=new c(Ts,Tl);if(Or){const vl=new c(-Fs,Fs- -17),ra=-Math.PI/2,oa=12-Fs,As=new c(22-oa,-(Kn.imageName?oa:0)),Qu=new c(...gl);yl._rotateAround(ra,vl)._add(As)._add(Qu),Fa._rotateAround(ra,vl)._add(As)._add(Qu),qc._rotateAround(ra,vl)._add(As)._add(Qu),za._rotateAround(ra,vl)._add(As)._add(Qu)}if(zn){const vl=Math.sin(zn),ra=Math.cos(zn),oa=[ra,-vl,vl,ra];yl._matMult(oa),Fa._matMult(oa),qc._matMult(oa),za._matMult(oa)}const Zl=new c(0,0),ja=new c(0,0);bi.push({tl:yl,tr:Fa,bl:qc,br:za,tex:un,writingMode:ut.writingMode,glyphOffset:_a,sectionIndex:Kn.sectionIndex,isSDF:Xi,pixelOffsetTL:Zl,pixelOffsetBR:ja,minFontScaleX:0,minFontScaleY:0})}return bi})(0,d,K,M,k,R,b,f.allowVerticalPlacement),$e=f.textSizeData;let it=null;$e.kind==="source"?(it=[Gu*M.layout.get("text-size").evaluate(R,{})],it[0]>bu&&Ct(`${f.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):$e.kind==="composite"&&(it=[Gu*Se.compositeTextSizes[0].evaluate(R,{},ke),Gu*Se.compositeTextSizes[1].evaluate(R,{},ke)],(it[0]>bu||it[1]>bu)&&Ct(`${f.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),f.addSymbols(f.text,ze,it,K,k,R,ee,u,z.lineStartIndex,z.lineLength,_e,ke);for(const Et of ne)ce[Et]=f.text.placedSymbolArray.length-1;return 4*ze.length}function Y0(f){for(const u in f)return f[u];return null}function Zd(f,u,d,b){const M=f.compareText;if(u in M){const k=M[u];for(let R=k.length-1;R>=0;R--)if(b.dist(k[R])<d)return!0}else M[u]=[];return M[u].push(b),!1}const DC=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Zv{static from(u){if(!(u instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[d,b]=new Uint8Array(u,0,2);if(d!==219)throw new Error("Data does not appear to be in a KDBush format.");const M=b>>4;if(M!==1)throw new Error(`Got v${M} data when expected v1.`);const k=DC[15&b];if(!k)throw new Error("Unrecognized array type.");const[R]=new Uint16Array(u,2,1),[K]=new Uint32Array(u,4,1);return new Zv(K,R,k,u)}constructor(u,d=64,b=Float64Array,M){if(isNaN(u)||u<0)throw new Error(`Unpexpected numItems value: ${u}.`);this.numItems=+u,this.nodeSize=Math.min(Math.max(+d,2),65535),this.ArrayType=b,this.IndexArrayType=u<65536?Uint16Array:Uint32Array;const k=DC.indexOf(this.ArrayType),R=2*u*this.ArrayType.BYTES_PER_ELEMENT,K=u*this.IndexArrayType.BYTES_PER_ELEMENT,z=(8-K%8)%8;if(k<0)throw new Error(`Unexpected typed array class: ${b}.`);M&&M instanceof ArrayBuffer?(this.data=M,this.ids=new this.IndexArrayType(this.data,8,u),this.coords=new this.ArrayType(this.data,8+K+z,2*u),this._pos=2*u,this._finished=!0):(this.data=new ArrayBuffer(8+R+K+z),this.ids=new this.IndexArrayType(this.data,8,u),this.coords=new this.ArrayType(this.data,8+K+z,2*u),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+k]),new Uint16Array(this.data,2,1)[0]=d,new Uint32Array(this.data,4,1)[0]=u)}add(u,d){const b=this._pos>>1;return this.ids[b]=b,this.coords[this._pos++]=u,this.coords[this._pos++]=d,b}finish(){const u=this._pos>>1;if(u!==this.numItems)throw new Error(`Added ${u} items when expected ${this.numItems}.`);return ud(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(u,d,b,M){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:k,coords:R,nodeSize:K}=this,z=[0,k.length-1,0],ee=[];for(;z.length;){const ne=z.pop()||0,ce=z.pop()||0,_e=z.pop()||0;if(ce-_e<=K){for(let $e=_e;$e<=ce;$e++){const it=R[2*$e],Et=R[2*$e+1];it>=u&&it<=b&&Et>=d&&Et<=M&&ee.push(k[$e])}continue}const Se=_e+ce>>1,ke=R[2*Se],ze=R[2*Se+1];ke>=u&&ke<=b&&ze>=d&&ze<=M&&ee.push(k[Se]),(ne===0?u<=ke:d<=ze)&&(z.push(_e),z.push(Se-1),z.push(1-ne)),(ne===0?b>=ke:M>=ze)&&(z.push(Se+1),z.push(ce),z.push(1-ne))}return ee}within(u,d,b){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:M,coords:k,nodeSize:R}=this,K=[0,M.length-1,0],z=[],ee=b*b;for(;K.length;){const ne=K.pop()||0,ce=K.pop()||0,_e=K.pop()||0;if(ce-_e<=R){for(let $e=_e;$e<=ce;$e++)PC(k[2*$e],k[2*$e+1],u,d)<=ee&&z.push(M[$e]);continue}const Se=_e+ce>>1,ke=k[2*Se],ze=k[2*Se+1];PC(ke,ze,u,d)<=ee&&z.push(M[Se]),(ne===0?u-b<=ke:d-b<=ze)&&(K.push(_e),K.push(Se-1),K.push(1-ne)),(ne===0?u+b>=ke:d+b>=ze)&&(K.push(Se+1),K.push(ce),K.push(1-ne))}return z}}function ud(f,u,d,b,M,k){if(M-b<=d)return;const R=b+M>>1;Xv(f,u,R,b,M,k),ud(f,u,d,b,R-1,1-k),ud(f,u,d,R+1,M,1-k)}function Xv(f,u,d,b,M,k){for(;M>b;){if(M-b>600){const ee=M-b+1,ne=d-b+1,ce=Math.log(ee),_e=.5*Math.exp(2*ce/3),Se=.5*Math.sqrt(ce*_e*(ee-_e)/ee)*(ne-ee/2<0?-1:1);Xv(f,u,d,Math.max(b,Math.floor(d-ne*_e/ee+Se)),Math.min(M,Math.floor(d+(ee-ne)*_e/ee+Se)),k)}const R=u[2*d+k];let K=b,z=M;for(Xp(f,u,b,d),u[2*M+k]>R&&Xp(f,u,b,M);K<z;){for(Xp(f,u,K,z),K++,z--;u[2*K+k]<R;)K++;for(;u[2*z+k]>R;)z--}u[2*b+k]===R?Xp(f,u,b,z):(z++,Xp(f,u,z,M)),z<=d&&(b=z+1),d<=z&&(M=z-1)}}function Xp(f,u,d,b){Jv(f,d,b),Jv(u,2*d,2*b),Jv(u,2*d+1,2*b+1)}function Jv(f,u,d){const b=f[u];f[u]=f[d],f[d]=b}function PC(f,u,d,b){const M=f-d,k=u-b;return M*M+k*k}var eb;s.cA=void 0,(eb=s.cA||(s.cA={})).create="create",eb.load="load",eb.fullLoad="fullLoad";let Xa=null,Hl=[];const tb=1e3/60,fy="loadTime",zf="fullLoadTime",Sg={mark(f){performance.mark(f)},frame(f){const u=f;Xa!=null&&Hl.push(u-Xa),Xa=u},clearMetrics(){Xa=null,Hl=[],performance.clearMeasures(fy),performance.clearMeasures(zf);for(const f in s.cA)performance.clearMarks(s.cA[f])},getPerformanceMetrics(){performance.measure(fy,s.cA.create,s.cA.load),performance.measure(zf,s.cA.create,s.cA.fullLoad);const f=performance.getEntriesByName(fy)[0].duration,u=performance.getEntriesByName(zf)[0].duration,d=Hl.length,b=1/(Hl.reduce(((k,R)=>k+R),0)/d/1e3),M=Hl.filter((k=>k>tb)).reduce(((k,R)=>k+(R-tb)/tb),0);return{loadTime:f,fullLoadTime:u,fps:b,percentDroppedFrames:M/(d+M)*100,totalFrames:d}}};s.$=Ln,s.A=V,s.B=Kc,s.C=function([f,u,d]){return u+=90,u*=Math.PI/180,d*=Math.PI/180,{x:f*Math.cos(u)*Math.sin(d),y:f*Math.sin(u)*Math.sin(d),z:f*Math.cos(d)}},s.D=ni,s.E=tn,s.F=$a,s.G=io,s.H=wp,s.I=ey,s.J=Hn,s.K=class{constructor(f,u){this.target=f,this.mapId=u,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new so((()=>this.process())),this.subscription=Zn(this.target,"message",(d=>this.receive(d)),!1),this.globalScope=kt(self)?f:window}registerMessageHandler(f,u){this.messageHandlers[f]=u}sendAsync(f,u){return new Promise(((d,b)=>{const M=Math.round(1e18*Math.random()).toString(36).substring(0,10),k=u?Zn(u.signal,"abort",(()=>{k?.unsubscribe(),delete this.resolveRejects[M];const z={id:M,type:"<cancel>",origin:location.origin,targetMapId:f.targetMapId,sourceMapId:this.mapId};this.target.postMessage(z)}),Gv):null;this.resolveRejects[M]={resolve:z=>{k?.unsubscribe(),d(z)},reject:z=>{k?.unsubscribe(),b(z)}};const R=[],K=Object.assign(Object.assign({},f),{id:M,sourceMapId:this.mapId,origin:location.origin,data:LA(f.data,R)});this.target.postMessage(K,{transfer:R})}))}receive(f){const u=f.data,d=u.id;if(!(u.origin!=="file://"&&location.origin!=="file://"&&u.origin!=="resource://android"&&location.origin!=="resource://android"&&u.origin!==location.origin||u.targetMapId&&this.mapId!==u.targetMapId)){if(u.type==="<cancel>"){delete this.tasks[d];const b=this.abortControllers[d];return delete this.abortControllers[d],void(b&&b.abort())}if(kt(self)||u.mustQueue)return this.tasks[d]=u,this.taskQueue.push(d),void this.invoker.trigger();this.processTask(d,u)}}process(){if(this.taskQueue.length===0)return;const f=this.taskQueue.shift(),u=this.tasks[f];delete this.tasks[f],this.taskQueue.length>0&&this.invoker.trigger(),u&&this.processTask(f,u)}processTask(f,u){return a(this,void 0,void 0,(function*(){if(u.type==="<response>"){const M=this.resolveRejects[f];return delete this.resolveRejects[f],M?void(u.error?M.reject(Xh(u.error)):M.resolve(Xh(u.data))):void 0}if(!this.messageHandlers[u.type])return void this.completeTask(f,new Error(`Could not find a registered handler for ${u.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const d=Xh(u.data),b=new AbortController;this.abortControllers[f]=b;try{const M=yield this.messageHandlers[u.type](u.sourceMapId,d,b);this.completeTask(f,null,M)}catch(M){this.completeTask(f,M)}}))}completeTask(f,u,d){const b=[];delete this.abortControllers[f];const M={id:f,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:u?LA(u):null,data:LA(d,b)};this.target.postMessage(M,{transfer:b})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},s.L=ve,s.M=function(){var f=new V(16);return V!=Float32Array&&(f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[11]=0,f[12]=0,f[13]=0,f[14]=0),f[0]=1,f[5]=1,f[10]=1,f[15]=1,f},s.N=function(f,u,d){var b,M,k,R,K,z,ee,ne,ce,_e,Se,ke,ze=d[0],$e=d[1],it=d[2];return u===f?(f[12]=u[0]*ze+u[4]*$e+u[8]*it+u[12],f[13]=u[1]*ze+u[5]*$e+u[9]*it+u[13],f[14]=u[2]*ze+u[6]*$e+u[10]*it+u[14],f[15]=u[3]*ze+u[7]*$e+u[11]*it+u[15]):(M=u[1],k=u[2],R=u[3],K=u[4],z=u[5],ee=u[6],ne=u[7],ce=u[8],_e=u[9],Se=u[10],ke=u[11],f[0]=b=u[0],f[1]=M,f[2]=k,f[3]=R,f[4]=K,f[5]=z,f[6]=ee,f[7]=ne,f[8]=ce,f[9]=_e,f[10]=Se,f[11]=ke,f[12]=b*ze+K*$e+ce*it+u[12],f[13]=M*ze+z*$e+_e*it+u[13],f[14]=k*ze+ee*$e+Se*it+u[14],f[15]=R*ze+ne*$e+ke*it+u[15]),f},s.O=function(f,u,d){var b=d[0],M=d[1],k=d[2];return f[0]=u[0]*b,f[1]=u[1]*b,f[2]=u[2]*b,f[3]=u[3]*b,f[4]=u[4]*M,f[5]=u[5]*M,f[6]=u[6]*M,f[7]=u[7]*M,f[8]=u[8]*k,f[9]=u[9]*k,f[10]=u[10]*k,f[11]=u[11]*k,f[12]=u[12],f[13]=u[13],f[14]=u[14],f[15]=u[15],f},s.P=c,s.Q=function(f,u,d){var b=u[0],M=u[1],k=u[2],R=u[3],K=u[4],z=u[5],ee=u[6],ne=u[7],ce=u[8],_e=u[9],Se=u[10],ke=u[11],ze=u[12],$e=u[13],it=u[14],Et=u[15],ut=d[0],pt=d[1],Gt=d[2],Jt=d[3];return f[0]=ut*b+pt*K+Gt*ce+Jt*ze,f[1]=ut*M+pt*z+Gt*_e+Jt*$e,f[2]=ut*k+pt*ee+Gt*Se+Jt*it,f[3]=ut*R+pt*ne+Gt*ke+Jt*Et,f[4]=(ut=d[4])*b+(pt=d[5])*K+(Gt=d[6])*ce+(Jt=d[7])*ze,f[5]=ut*M+pt*z+Gt*_e+Jt*$e,f[6]=ut*k+pt*ee+Gt*Se+Jt*it,f[7]=ut*R+pt*ne+Gt*ke+Jt*Et,f[8]=(ut=d[8])*b+(pt=d[9])*K+(Gt=d[10])*ce+(Jt=d[11])*ze,f[9]=ut*M+pt*z+Gt*_e+Jt*$e,f[10]=ut*k+pt*ee+Gt*Se+Jt*it,f[11]=ut*R+pt*ne+Gt*ke+Jt*Et,f[12]=(ut=d[12])*b+(pt=d[13])*K+(Gt=d[14])*ce+(Jt=d[15])*ze,f[13]=ut*M+pt*z+Gt*_e+Jt*$e,f[14]=ut*k+pt*ee+Gt*Se+Jt*it,f[15]=ut*R+pt*ne+Gt*ke+Jt*Et,f},s.R=Al,s.S=function(f,u){const d={};for(let b=0;b<u.length;b++){const M=u[b];M in f&&(d[M]=f[M])}return d},s.T=Fp,s.U=ad,s.V=Kt,s.W=vg,s.X=Qc,s.Y=F,s.Z=W,s._=a,s.a=se,s.a$=function(f,u,d){return f[0]=u[0]*d[0],f[1]=u[1]*d[1],f[2]=u[2]*d[2],f[3]=u[3]*d[3],f},s.a0=cs,s.a1=ta,s.a2=na,s.a3=gt,s.a4=function(f,u){var d,b,M,k,R;if(!f)return u??{};if(!u)return f;let K=Object.assign({},f);if(u.removeAll&&(K={removeAll:!0}),u.remove){const z=new Set(u.remove);K.add&&(K.add=K.add.filter((ne=>!z.has(ne.id)))),K.update&&(K.update=K.update.filter((ne=>!z.has(ne.id))));const ee=new Set(((d=f.add)!==null&&d!==void 0?d:[]).map((ne=>ne.id)));u.remove=u.remove.filter((ne=>!ee.has(ne)))}if(u.remove){const z=new Set(K.remove?K.remove.concat(u.remove):u.remove);K.remove=Array.from(z.values())}if(u.add){const z=K.add?K.add.concat(u.add):u.add,ee=new Map(z.map((ne=>[ne.id,ne])));K.add=Array.from(ee.values())}if(u.update){const z=new Map((b=K.update)===null||b===void 0?void 0:b.map((ee=>[ee.id,ee])));for(const ee of u.update){const ne=(M=z.get(ee.id))!==null&&M!==void 0?M:{id:ee.id};ee.newGeometry&&(ne.newGeometry=ee.newGeometry),ee.addOrUpdateProperties&&(ne.addOrUpdateProperties=((k=ne.addOrUpdateProperties)!==null&&k!==void 0?k:[]).concat(ee.addOrUpdateProperties)),ee.removeProperties&&(ne.removeProperties=((R=ne.removeProperties)!==null&&R!==void 0?R:[]).concat(ee.removeProperties)),ee.removeAllProperties&&(ne.removeAllProperties=!0),z.set(ee.id,ne)}K.update=Array.from(z.values())}return K.remove&&K.add&&(K.remove=K.remove.filter((z=>K.add.findIndex((ee=>ee.id===z))===-1))),K},s.a5=bg,s.a6=Sh,s.a7=25,s.a8=Jo,s.a9=f=>{const u=window.document.createElement("video");return u.muted=!0,new Promise((d=>{u.onloadstart=()=>{d(u)};for(const b of f){const M=window.document.createElement("source");Xe(b)||(u.crossOrigin="Anonymous"),M.src=b,u.appendChild(M)}}))},s.aA=Te,s.aB=function(f,u,d,b){const M=u.y-f.y,k=u.x-f.x,R=b.y-d.y,K=b.x-d.x,z=R*k-K*M;if(z===0)return null;const ee=(K*(f.y-d.y)-R*(f.x-d.x))/z;return new c(f.x+ee*k,f.y+ee*M)},s.aC=$d,s.aD=fv,s.aE=function(f){let u=1/0,d=1/0,b=-1/0,M=-1/0;for(const k of f)u=Math.min(u,k.x),d=Math.min(d,k.y),b=Math.max(b,k.x),M=Math.max(M,k.y);return[u,d,b,M]},s.aF=Ua,s.aG=Le,s.aH=function(f,u,d,b,M=!1){if(!d[0]&&!d[1])return[0,0];const k=M?b==="map"?-f.bearingInRadians:0:b==="viewport"?f.bearingInRadians:0;if(k){const R=Math.sin(k),K=Math.cos(k);d=[d[0]*K-d[1]*R,d[0]*R+d[1]*K]}return[M?d[0]:Le(u,d[0],f.zoom),M?d[1]:Le(u,d[1],f.zoom)]},s.aJ=zv,s.aK=Zp,s.aL=Lv,s.aM=Zv,s.aN=Bi,s.aO=vu,s.aP=rt,s.aQ=yr,s.aR=sn,s.aS=Ot,s.aT=Wv,s.aU=xe,s.aV=ue,s.aW=function(f){var u=new V(3);return u[0]=f[0],u[1]=f[1],u[2]=f[2],u},s.aX=function(f,u,d){return f[0]=u[0]-d[0],f[1]=u[1]-d[1],f[2]=u[2]-d[2],f},s.aY=function(f,u){var d=u[0],b=u[1],M=u[2],k=d*d+b*b+M*M;return k>0&&(k=1/Math.sqrt(k)),f[0]=u[0]*k,f[1]=u[1]*k,f[2]=u[2]*k,f},s.aZ=me,s.a_=function(f,u){return f[0]*u[0]+f[1]*u[1]+f[2]*u[2]},s.aa=rn,s.ab=function(){return Oe++},s.ac=N,s.ad=$p,s.ae=Ql,s.af=WA,s.ag=uy,s.ah=function(f){const u={};if(f.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((d,b,M,k)=>{const R=M||k;return u[b]=!R||R.toLowerCase(),""})),u["max-age"]){const d=parseInt(u["max-age"],10);isNaN(d)?delete u["max-age"]:u["max-age"]=d}return u},s.ai=Tt,s.aj=85.051129,s.ak=Rn,s.al=function(f){return Math.pow(2,f)},s.am=X,s.an=G0,s.ao=function(f){return Math.log(f)/Math.LN2},s.ap=function(f){var u=f[0],d=f[1];return u*u+d*d},s.aq=function(f){if(!f.length)return new Set;const u=Math.max(...f.map((z=>z.canonical.z)));let d=1/0,b=-1/0,M=1/0,k=-1/0;const R=[];for(const z of f){const{x:ee,y:ne,z:ce}=z.canonical,_e=Math.pow(2,u-ce),Se=ee*_e,ke=ne*_e;R.push({id:z,x:Se,y:ke}),Se<d&&(d=Se),Se>b&&(b=Se),ke<M&&(M=ke),ke>k&&(k=ke)}const K=new Set;for(const z of R)z.x!==d&&z.x!==b&&z.y!==M&&z.y!==k||K.add(z.id);return K},s.ar=function(f,u){let d=0,b=0;if(f.kind==="constant")b=f.layoutSize;else if(f.kind!=="source"){const{interpolationType:M,minZoom:k,maxZoom:R}=f,K=M?Tt(wo.interpolationFactor(M,u,k,R),0,1):0;f.kind==="camera"?b=$a.number(f.minSize,f.maxSize,K):d=K}return{uSizeT:d,uSize:b}},s.at=function(f,{uSize:u,uSizeT:d},{lowerSize:b,upperSize:M}){return f.kind==="source"?b/Gu:f.kind==="composite"?$a.number(b/Gu,M/Gu,d):u},s.au=function(f,u){var d=u[0],b=u[1],M=u[2],k=u[3],R=u[4],K=u[5],z=u[6],ee=u[7],ne=u[8],ce=u[9],_e=u[10],Se=u[11],ke=u[12],ze=u[13],$e=u[14],it=u[15],Et=d*K-b*R,ut=d*z-M*R,pt=d*ee-k*R,Gt=b*z-M*K,Jt=b*ee-k*K,mn=M*ee-k*z,Nn=ne*ze-ce*ke,Tn=ne*$e-_e*ke,zn=ne*it-Se*ke,bi=ce*$e-_e*ze,jn=ce*it-Se*ze,Kn=_e*it-Se*$e,un=Et*Kn-ut*jn+pt*bi+Gt*zn-Jt*Tn+mn*Nn;return un?(f[0]=(K*Kn-z*jn+ee*bi)*(un=1/un),f[1]=(M*jn-b*Kn-k*bi)*un,f[2]=(ze*mn-$e*Jt+it*Gt)*un,f[3]=(_e*Jt-ce*mn-Se*Gt)*un,f[4]=(z*zn-R*Kn-ee*Tn)*un,f[5]=(d*Kn-M*zn+k*Tn)*un,f[6]=($e*pt-ke*mn-it*ut)*un,f[7]=(ne*mn-_e*pt+Se*ut)*un,f[8]=(R*jn-K*zn+ee*Nn)*un,f[9]=(b*zn-d*jn-k*Nn)*un,f[10]=(ke*Jt-ze*pt+it*Et)*un,f[11]=(ce*pt-ne*Jt-Se*Et)*un,f[12]=(K*Tn-R*bi-z*Nn)*un,f[13]=(d*bi-b*Tn+M*Nn)*un,f[14]=(ze*ut-ke*Gt-$e*Et)*un,f[15]=(ne*Gt-ce*ut+_e*Et)*un,f):null},s.av=qe,s.aw=function(f){var u=f[0],d=f[1];return Math.sqrt(u*u+d*d)},s.ax=function(f){return f[0]=0,f[1]=0,f},s.ay=function(f,u,d){return f[0]=u[0]*d,f[1]=u[1]*d,f},s.az=oy,s.b=Wn,s.b$=function(f,u,d){var b=u[0],M=u[1],k=u[2];return f[0]=b*d[0]+M*d[3]+k*d[6],f[1]=b*d[1]+M*d[4]+k*d[7],f[2]=b*d[2]+M*d[5]+k*d[8],f},s.b0=G,s.b1=function(f,u,d){const b=u[0]*d[0]+u[1]*d[1]+u[2]*d[2];return b===0?null:(-(f[0]*d[0]+f[1]*d[1]+f[2]*d[2])-d[3])/b},s.b2=Me,s.b3=function(f,u,d){return f[0]=u[0]*d,f[1]=u[1]*d,f[2]=u[2]*d,f[3]=u[3]*d,f},s.b4=function(f,u){return f[0]*u[0]+f[1]*u[1]+f[2]*u[2]+f[3]},s.b5=ly,s.b6=Cg,s.b7=function(f,u,d,b,M){var k=1/Math.tan(u/2);if(f[0]=k/d,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=k,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[11]=-1,f[12]=0,f[13]=0,f[15]=0,M!=null&&M!==1/0){var R=1/(b-M);f[10]=(M+b)*R,f[14]=2*M*b*R}else f[10]=-1,f[14]=-2*b;return f},s.b8=function(f){var u=new V(16);return u[0]=f[0],u[1]=f[1],u[2]=f[2],u[3]=f[3],u[4]=f[4],u[5]=f[5],u[6]=f[6],u[7]=f[7],u[8]=f[8],u[9]=f[9],u[10]=f[10],u[11]=f[11],u[12]=f[12],u[13]=f[13],u[14]=f[14],u[15]=f[15],u},s.b9=function(f,u,d){var b=Math.sin(d),M=Math.cos(d),k=u[0],R=u[1],K=u[2],z=u[3],ee=u[4],ne=u[5],ce=u[6],_e=u[7];return u!==f&&(f[8]=u[8],f[9]=u[9],f[10]=u[10],f[11]=u[11],f[12]=u[12],f[13]=u[13],f[14]=u[14],f[15]=u[15]),f[0]=k*M+ee*b,f[1]=R*M+ne*b,f[2]=K*M+ce*b,f[3]=z*M+_e*b,f[4]=ee*M-k*b,f[5]=ne*M-R*b,f[6]=ce*M-K*b,f[7]=_e*M-z*b,f},s.bA=function(f,u,d,b){var M=[],k=[];return M[0]=u[0]-d[0],M[1]=u[1]-d[1],M[2]=u[2]-d[2],k[0]=M[0],k[1]=M[1]*Math.cos(b)-M[2]*Math.sin(b),k[2]=M[1]*Math.sin(b)+M[2]*Math.cos(b),f[0]=k[0]+d[0],f[1]=k[1]+d[1],f[2]=k[2]+d[2],f},s.bB=function(f,u,d,b){var M=[],k=[];return M[0]=u[0]-d[0],M[1]=u[1]-d[1],M[2]=u[2]-d[2],k[0]=M[2]*Math.sin(b)+M[0]*Math.cos(b),k[1]=M[1],k[2]=M[2]*Math.cos(b)-M[0]*Math.sin(b),f[0]=k[0]+d[0],f[1]=k[1]+d[1],f[2]=k[2]+d[2],f},s.bC=function(f,u,d){var b=Math.sin(d),M=Math.cos(d),k=u[0],R=u[1],K=u[2],z=u[3],ee=u[8],ne=u[9],ce=u[10],_e=u[11];return u!==f&&(f[4]=u[4],f[5]=u[5],f[6]=u[6],f[7]=u[7],f[12]=u[12],f[13]=u[13],f[14]=u[14],f[15]=u[15]),f[0]=k*M-ee*b,f[1]=R*M-ne*b,f[2]=K*M-ce*b,f[3]=z*M-_e*b,f[8]=k*b+ee*M,f[9]=R*b+ne*M,f[10]=K*b+ce*M,f[11]=z*b+_e*M,f},s.bD=function(f,u){const d=Re(f,360),b=Re(u,360),M=b-d,k=b>d?M-360:M+360;return Math.abs(M)<Math.abs(k)?M:k},s.bE=function(f){return f[0]=0,f[1]=0,f[2]=0,f},s.bF=function(f,u,d,b){const M=Math.sqrt(f*f+u*u),k=Math.sqrt(d*d+b*b);f/=M,u/=M,d/=k,b/=k;const R=Math.acos(f*d+u*b);return-u*d+f*b>0?R:-R},s.bG=function(f,u){const d=Re(f,2*Math.PI),b=Re(u,2*Math.PI);return Math.min(Math.abs(d-b),Math.abs(d-b+2*Math.PI),Math.abs(d-b-2*Math.PI))},s.bH=function(){const f={},u=dt.$version;for(const d in dt.$root){const b=dt.$root[d];if(b.required){let M=null;M=d==="version"?u:b.type==="array"?[]:{},M!=null&&(f[d]=M)}}return f},s.bI=hc,s.bJ=tt,s.bK=function f(u,d){if(Array.isArray(u)){if(!Array.isArray(d)||u.length!==d.length)return!1;for(let b=0;b<u.length;b++)if(!f(u[b],d[b]))return!1;return!0}if(typeof u=="object"&&u!==null&&d!==null){if(typeof d!="object"||Object.keys(u).length!==Object.keys(d).length)return!1;for(const b in u)if(!f(u[b],d[b]))return!1;return!0}return u===d},s.bL=function(f){f=f.slice();const u=Object.create(null);for(let d=0;d<f.length;d++)u[f[d].id]=f[d];for(let d=0;d<f.length;d++)"ref"in f[d]&&(f[d]=yi(f[d],u[f[d].ref]));return f},s.bM=function(f,u){if(f.type==="custom")return new IC(f,u);switch(f.type){case"background":return new Ff(f,u);case"circle":return new gv(f,u);case"color-relief":return new B0(f,u);case"fill":return new I0(f,u);case"fill-extrusion":return new Ev(f,u);case"heatmap":return new Jx(f,u);case"hillshade":return new vv(f,u);case"line":return new Pf(f,u);case"raster":return new Fu(f,u);case"symbol":return new Cu(f,u)}},s.bN=f=>f.type==="raster",s.bO=yt,s.bP=function(f,u){if(!f)return[{command:"setStyle",args:[u]}];let d=[];try{if(!Dn(f.version,u.version))return[{command:"setStyle",args:[u]}];Dn(f.center,u.center)||d.push({command:"setCenter",args:[u.center]}),Dn(f.state,u.state)||d.push({command:"setGlobalState",args:[u.state]}),Dn(f.centerAltitude,u.centerAltitude)||d.push({command:"setCenterAltitude",args:[u.centerAltitude]}),Dn(f.zoom,u.zoom)||d.push({command:"setZoom",args:[u.zoom]}),Dn(f.bearing,u.bearing)||d.push({command:"setBearing",args:[u.bearing]}),Dn(f.pitch,u.pitch)||d.push({command:"setPitch",args:[u.pitch]}),Dn(f.roll,u.roll)||d.push({command:"setRoll",args:[u.roll]}),Dn(f.sprite,u.sprite)||d.push({command:"setSprite",args:[u.sprite]}),Dn(f.glyphs,u.glyphs)||d.push({command:"setGlyphs",args:[u.glyphs]}),Dn(f.transition,u.transition)||d.push({command:"setTransition",args:[u.transition]}),Dn(f.light,u.light)||d.push({command:"setLight",args:[u.light]}),Dn(f.terrain,u.terrain)||d.push({command:"setTerrain",args:[u.terrain]}),Dn(f.sky,u.sky)||d.push({command:"setSky",args:[u.sky]}),Dn(f.projection,u.projection)||d.push({command:"setProjection",args:[u.projection]});const b={},M=[];(function(R,K,z,ee){let ne;for(ne in K=K||{},R=R||{})Object.prototype.hasOwnProperty.call(R,ne)&&(Object.prototype.hasOwnProperty.call(K,ne)||Zi(ne,z,ee));for(ne in K)Object.prototype.hasOwnProperty.call(K,ne)&&(Object.prototype.hasOwnProperty.call(R,ne)?Dn(R[ne],K[ne])||(R[ne].type==="geojson"&&K[ne].type==="geojson"&&Ji(R,K,ne)?Fn(z,{command:"setGeoJSONSourceData",args:[ne,K[ne].data]}):Ki(ne,K,z,ee)):vi(ne,K,z))})(f.sources,u.sources,M,b);const k=[];f.layers&&f.layers.forEach((R=>{"source"in R&&b[R.source]?d.push({command:"removeLayer",args:[R.id]}):k.push(R)})),d=d.concat(M),(function(R,K,z){K=K||[];const ee=(R=R||[]).map(Ri),ne=K.map(Ri),ce=R.reduce(pr,{}),_e=K.reduce(pr,{}),Se=ee.slice(),ke=Object.create(null);let ze,$e,it,Et,ut;for(let pt=0,Gt=0;pt<ee.length;pt++)ze=ee[pt],Object.prototype.hasOwnProperty.call(_e,ze)?Gt++:(Fn(z,{command:"removeLayer",args:[ze]}),Se.splice(Se.indexOf(ze,Gt),1));for(let pt=0,Gt=0;pt<ne.length;pt++)ze=ne[ne.length-1-pt],Se[Se.length-1-pt]!==ze&&(Object.prototype.hasOwnProperty.call(ce,ze)?(Fn(z,{command:"removeLayer",args:[ze]}),Se.splice(Se.lastIndexOf(ze,Se.length-Gt),1)):Gt++,Et=Se[Se.length-pt],Fn(z,{command:"addLayer",args:[_e[ze],Et]}),Se.splice(Se.length-pt,0,ze),ke[ze]=!0);for(let pt=0;pt<ne.length;pt++)if(ze=ne[pt],$e=ce[ze],it=_e[ze],!ke[ze]&&!Dn($e,it))if(Dn($e.source,it.source)&&Dn($e["source-layer"],it["source-layer"])&&Dn($e.type,it.type)){for(ut in ki($e.layout,it.layout,z,ze,null,"setLayoutProperty"),ki($e.paint,it.paint,z,ze,null,"setPaintProperty"),Dn($e.filter,it.filter)||Fn(z,{command:"setFilter",args:[ze,it.filter]}),Dn($e.minzoom,it.minzoom)&&Dn($e.maxzoom,it.maxzoom)||Fn(z,{command:"setLayerZoomRange",args:[ze,it.minzoom,it.maxzoom]}),$e)Object.prototype.hasOwnProperty.call($e,ut)&&ut!=="layout"&&ut!=="paint"&&ut!=="filter"&&ut!=="metadata"&&ut!=="minzoom"&&ut!=="maxzoom"&&(ut.indexOf("paint.")===0?ki($e[ut],it[ut],z,ze,ut.slice(6),"setPaintProperty"):Dn($e[ut],it[ut])||Fn(z,{command:"setLayerProperty",args:[ze,ut,it[ut]]}));for(ut in it)Object.prototype.hasOwnProperty.call(it,ut)&&!Object.prototype.hasOwnProperty.call($e,ut)&&ut!=="layout"&&ut!=="paint"&&ut!=="filter"&&ut!=="metadata"&&ut!=="minzoom"&&ut!=="maxzoom"&&(ut.indexOf("paint.")===0?ki($e[ut],it[ut],z,ze,ut.slice(6),"setPaintProperty"):Dn($e[ut],it[ut])||Fn(z,{command:"setLayerProperty",args:[ze,ut,it[ut]]}))}else Fn(z,{command:"removeLayer",args:[ze]}),Et=Se[Se.lastIndexOf(ze)+1],Fn(z,{command:"addLayer",args:[it,Et]})})(k,u.layers,d)}catch(b){console.warn("Unable to compute style diff:",b),d=[{command:"setStyle",args:[u]}]}return d},s.bQ=function(f){const u=[],d=f.id;return d===void 0&&u.push({message:`layers.${d}: missing required property "id"`}),f.render===void 0&&u.push({message:`layers.${d}: missing required method "render"`}),f.renderingMode&&f.renderingMode!=="2d"&&f.renderingMode!=="3d"&&u.push({message:`layers.${d}: property "renderingMode" must be either "2d" or "3d"`}),u},s.bR=Be,s.bS=Ve,s.bT=class extends Vl{constructor(f,u){super(f,u),this.current=0}set(f){this.current!==f&&(this.current=f,this.gl.uniform1i(this.location,f))}},s.bU=Gc,s.bV=class extends Vl{constructor(f,u){super(f,u),this.current=Tp}set(f){if(f[12]!==this.current[12]||f[0]!==this.current[0])return this.current=f,void this.gl.uniformMatrix4fv(this.location,!1,f);for(let u=1;u<16;u++)if(f[u]!==this.current[u]){this.current=f,this.gl.uniformMatrix4fv(this.location,!1,f);break}}},s.bW=fu,s.bX=class extends Vl{constructor(f,u){super(f,u),this.current=[0,0,0]}set(f){f[0]===this.current[0]&&f[1]===this.current[1]&&f[2]===this.current[2]||(this.current=f,this.gl.uniform3f(this.location,f[0],f[1],f[2]))}},s.bY=class extends Vl{constructor(f,u){super(f,u),this.current=[0,0]}set(f){f[0]===this.current[0]&&f[1]===this.current[1]||(this.current=f,this.gl.uniform2f(this.location,f[0],f[1]))}},s.bZ=H,s.b_=function(f,u){var d=Math.sin(u),b=Math.cos(u);return f[0]=b,f[1]=d,f[2]=0,f[3]=-d,f[4]=b,f[5]=0,f[6]=0,f[7]=0,f[8]=1,f},s.ba=function(f,u,d){var b=Math.sin(d),M=Math.cos(d),k=u[4],R=u[5],K=u[6],z=u[7],ee=u[8],ne=u[9],ce=u[10],_e=u[11];return u!==f&&(f[0]=u[0],f[1]=u[1],f[2]=u[2],f[3]=u[3],f[12]=u[12],f[13]=u[13],f[14]=u[14],f[15]=u[15]),f[4]=k*M+ee*b,f[5]=R*M+ne*b,f[6]=K*M+ce*b,f[7]=z*M+_e*b,f[8]=ee*M-k*b,f[9]=ne*M-R*b,f[10]=ce*M-K*b,f[11]=_e*M-z*b,f},s.bb=function(){const f=new Float32Array(16);return X(f),f},s.bc=function(){const f=new Float64Array(16);return X(f),f},s.bd=function(){return new Float64Array(16)},s.be=function(f,u,d){const b=new Float64Array(4);return Ee(b,f,u-90,d),b},s.bf=function(f,u,d,b){var M,k,R,K,z,ee=u[0],ne=u[1],ce=u[2],_e=u[3],Se=d[0],ke=d[1],ze=d[2],$e=d[3];return(k=ee*Se+ne*ke+ce*ze+_e*$e)<0&&(k=-k,Se=-Se,ke=-ke,ze=-ze,$e=-$e),1-k>q?(M=Math.acos(k),R=Math.sin(M),K=Math.sin((1-b)*M)/R,z=Math.sin(b*M)/R):(K=1-b,z=b),f[0]=K*ee+z*Se,f[1]=K*ne+z*ke,f[2]=K*ce+z*ze,f[3]=K*_e+z*$e,f},s.bg=function(f){const u=new Float64Array(9);var d,b,M,k,R,K,z,ee,ne,ce,_e,Se,ke,ze,$e,it,Et,ut;ce=(M=(b=f)[0])*(z=M+M),_e=(k=b[1])*z,ke=(R=b[2])*z,ze=R*(ee=k+k),it=(K=b[3])*z,Et=K*ee,ut=K*(ne=R+R),(d=u)[0]=1-(Se=k*ee)-($e=R*ne),d[3]=_e-ut,d[6]=ke+Et,d[1]=_e+ut,d[4]=1-ce-$e,d[7]=ze-it,d[2]=ke-Et,d[5]=ze+it,d[8]=1-ce-Se;const pt=Ot(-Math.asin(Tt(u[2],-1,1)));let Gt,Jt;return Math.hypot(u[5],u[8])<.001?(Gt=0,Jt=-Ot(Math.atan2(u[3],u[4]))):(Gt=Ot(u[5]===0&&u[8]===0?0:Math.atan2(u[5],u[8])),Jt=Ot(u[1]===0&&u[0]===0?0:Math.atan2(u[1],u[0]))),{roll:Gt,pitch:pt+90,bearing:Jt}},s.bh=function(f,u){return f.roll==u.roll&&f.pitch==u.pitch&&f.bearing==u.bearing},s.bi=Fi,s.bj=kl,s.bk=ju,s.bl=sg,s.bm=Wd,s.bn=Ge,s.bo=De,s.bp=co,s.bq=function(f,u,d,b,M){return Ge(b,M,Tt((f-u)/(d-u),0,1))},s.br=Re,s.bs=function(){return new Float64Array(3)},s.bt=function(f,u,d,b){return f[0]=u[0]+d[0]*b,f[1]=u[1]+d[1]*b,f[2]=u[2]+d[2]*b,f},s.bu=Ee,s.bv=function(f,u,d){var b=d[0],M=d[1],k=d[2],R=d[3],K=u[0],z=u[1],ee=u[2],ne=M*ee-k*z,ce=k*K-b*ee,_e=b*z-M*K;return f[0]=K+R*(ne+=ne)+M*(_e+=_e)-k*(ce+=ce),f[1]=z+R*ce+k*ne-b*_e,f[2]=ee+R*_e+b*ce-M*ne,f},s.bw=function(f,u,d){const b=(M=[f[0],f[1],f[2],u[0],u[1],u[2],d[0],d[1],d[2]])[0]*((ne=M[8])*(R=M[4])-(K=M[5])*(ee=M[7]))+M[1]*(-ne*(k=M[3])+K*(z=M[6]))+M[2]*(ee*k-R*z);var M,k,R,K,z,ee,ne;if(b===0)return null;const ce=me([],[u[0],u[1],u[2]],[d[0],d[1],d[2]]),_e=me([],[d[0],d[1],d[2]],[f[0],f[1],f[2]]),Se=me([],[f[0],f[1],f[2]],[u[0],u[1],u[2]]),ke=xe([],ce,-f[3]);return ue(ke,ke,xe([],_e,-u[3])),ue(ke,ke,xe([],Se,-d[3])),xe(ke,ke,1/b),ke},s.bx=yg,s.by=function(){return new Float64Array(4)},s.bz=function(f,u,d,b){var M=[],k=[];return M[0]=u[0]-d[0],M[1]=u[1]-d[1],M[2]=u[2]-d[2],k[0]=M[0]*Math.cos(b)-M[1]*Math.sin(b),k[1]=M[0]*Math.sin(b)+M[1]*Math.cos(b),k[2]=M[2],f[0]=k[0]+d[0],f[1]=k[1]+d[1],f[2]=k[2]+d[2],f},s.c=de,s.c0=function(f,u,d,b,M,k,R){var K=1/(u-d),z=1/(b-M),ee=1/(k-R);return f[0]=-2*K,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=-2*z,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=2*ee,f[11]=0,f[12]=(u+d)*K,f[13]=(M+b)*z,f[14]=(R+k)*ee,f[15]=1,f},s.c1=class extends Vl{constructor(f,u){super(f,u),this.current=new Array}set(f){if(f!=this.current){this.current=f;const u=new Float32Array(4*f.length);for(let d=0;d<f.length;d++)u[4*d]=f[d].r,u[4*d+1]=f[d].g,u[4*d+2]=f[d].b,u[4*d+3]=f[d].a;this.gl.uniform4fv(this.location,u)}}},s.c2=class extends Vl{constructor(f,u){super(f,u),this.current=new Array}set(f){if(f!=this.current){this.current=f;const u=new Float32Array(f);this.gl.uniform1fv(this.location,u)}}},s.c3=class extends zd{},s.c4=Iv,s.c5=class extends jd{},s.c6=ng,s.c7=function(f){return f<=1?1:Math.pow(2,Math.ceil(Math.log(f)/Math.LN2))},s.c8=xh,s.c9=function(f,u,d){var b=u[0],M=u[1],k=u[2],R=d[3]*b+d[7]*M+d[11]*k+d[15];return f[0]=(d[0]*b+d[4]*M+d[8]*k+d[12])/(R=R||1),f[1]=(d[1]*b+d[5]*M+d[9]*k+d[13])/R,f[2]=(d[2]*b+d[6]*M+d[10]*k+d[14])/R,f},s.cB=function(f){return f.message===le},s.cC=We,s.cD=function(f,u){se.REGISTERED_PROTOCOLS[f]=u},s.cE=function(f){delete se.REGISTERED_PROTOCOLS[f]},s.cF=function(f,u){const d={};for(let M=0;M<f.length;M++){const k=u&&u[f[M].id]||dh(f[M]);u&&(u[f[M].id]=k);let R=d[k];R||(R=d[k]=[]),R.push(f[M])}const b=[];for(const M in d)b.push(d[M]);return b},s.cG=Qn,s.cH=_g,s.cI=xg,s.cJ=Pv,s.cK=function(f){f.bucket.createArrays(),f.bucket.tilePixelRatio=gt/(512*f.bucket.overscaling),f.bucket.compareText={},f.bucket.iconsNeedLinear=!1;const u=f.bucket.layers[0],d=u.layout,b=u._unevaluatedLayout._values,M={layoutIconSize:b["icon-size"].possiblyEvaluate(new io(f.bucket.zoom+1),f.canonical),layoutTextSize:b["text-size"].possiblyEvaluate(new io(f.bucket.zoom+1),f.canonical),textMaxSize:b["text-size"].possiblyEvaluate(new io(18))};if(f.bucket.textSizeData.kind==="composite"){const{minZoom:ee,maxZoom:ne}=f.bucket.textSizeData;M.compositeTextSizes=[b["text-size"].possiblyEvaluate(new io(ee),f.canonical),b["text-size"].possiblyEvaluate(new io(ne),f.canonical)]}if(f.bucket.iconSizeData.kind==="composite"){const{minZoom:ee,maxZoom:ne}=f.bucket.iconSizeData;M.compositeIconSizes=[b["icon-size"].possiblyEvaluate(new io(ee),f.canonical),b["icon-size"].possiblyEvaluate(new io(ne),f.canonical)]}const k=d.get("text-line-height")*Ua,R=d.get("text-rotation-alignment")!=="viewport"&&d.get("symbol-placement")!=="point",K=d.get("text-keep-upright"),z=d.get("text-size");for(const ee of f.bucket.features){const ne=d.get("text-font").evaluate(ee,{},f.canonical).join(","),ce=z.evaluate(ee,{},f.canonical),_e=M.layoutTextSize.evaluate(ee,{},f.canonical),Se=M.layoutIconSize.evaluate(ee,{},f.canonical),ke={horizontal:{},vertical:void 0},ze=ee.text;let $e,it=[0,0];if(ze){const pt=ze.toString(),Gt=d.get("text-letter-spacing").evaluate(ee,{},f.canonical)*Ua,Jt=Bp(pt)?Gt:0,mn=d.get("text-anchor").evaluate(ee,{},f.canonical),Nn=$v(u,ee,f.canonical);if(!Nn){const jn=d.get("text-radial-offset").evaluate(ee,{},f.canonical);it=jn?Vv(mn,[jn*Ua,dy]):d.get("text-offset").evaluate(ee,{},f.canonical).map((Kn=>Kn*Ua))}let Tn=R?"center":d.get("text-justify").evaluate(ee,{},f.canonical);const zn=d.get("symbol-placement")==="point"?d.get("text-max-width").evaluate(ee,{},f.canonical)*Ua:1/0,bi=()=>{f.bucket.allowVerticalPlacement&&Zm(pt)&&(ke.vertical=P0(ze,f.glyphMap,f.glyphPositions,f.imagePositions,ne,zn,k,mn,"left",Jt,it,s.as.vertical,!0,_e,ce))};if(!R&&Nn){const jn=new Set;if(Tn==="auto")for(let un=0;un<Nn.values.length;un+=2)jn.add(Zp(Nn.values[un]));else jn.add(Tn);let Kn=!1;for(const un of jn)if(!ke.horizontal[un])if(Kn)ke.horizontal[un]=ke.horizontal[0];else{const Gi=P0(ze,f.glyphMap,f.glyphPositions,f.imagePositions,ne,zn,k,"center",un,Jt,it,s.as.horizontal,!1,_e,ce);Gi&&(ke.horizontal[un]=Gi,Kn=Gi.positionedLines.length===1)}bi()}else{Tn==="auto"&&(Tn=Zp(mn));const jn=P0(ze,f.glyphMap,f.glyphPositions,f.imagePositions,ne,zn,k,mn,Tn,Jt,it,s.as.horizontal,!1,_e,ce);jn&&(ke.horizontal[Tn]=jn),bi(),Zm(pt)&&R&&K&&(ke.vertical=P0(ze,f.glyphMap,f.glyphPositions,f.imagePositions,ne,zn,k,mn,Tn,Jt,it,s.as.vertical,!1,_e,ce))}}let Et=!1;if(ee.icon&&ee.icon.name){const pt=f.imageMap[ee.icon.name];pt&&($e=Fv(f.imagePositions[ee.icon.name],d.get("icon-offset").evaluate(ee,{},f.canonical),d.get("icon-anchor").evaluate(ee,{},f.canonical)),Et=!!pt.sdf,f.bucket.sdfIcons===void 0?f.bucket.sdfIcons=Et:f.bucket.sdfIcons!==Et&&Ct("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(pt.pixelRatio!==f.bucket.pixelRatio||d.get("icon-rotate").constantOr(1)!==0)&&(f.bucket.iconsNeedLinear=!0))}const ut=Y0(ke.horizontal)||ke.vertical;f.bucket.iconsInText=!!ut&&ut.iconsInText,(ut||$e)&&VA(f.bucket,ee,ke,$e,f.imageMap,M,_e,Se,it,Et,f.canonical,f.subdivisionGranularity)}f.showCollisionBoxes&&f.bucket.generateCollisionDebugBuffers()},s.cL=O0,s.cM=Qr,s.cN=Nu,s.cO=_C,s.cP=Z1,s.cQ=class{constructor(f){this._marks={start:[f.url,"start"].join("#"),end:[f.url,"end"].join("#"),measure:f.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let f=performance.getEntriesByName(this._marks.measure);return f.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),f=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),f}},s.cR=function(f,u,d,b,M){return a(this,void 0,void 0,(function*(){if(W())try{return yield Ln(f,u,d,b,M)}catch{}return(function(k,R,K,z,ee){const ne=k.width,ce=k.height;Un&&xn||(Un=new OffscreenCanvas(ne,ce),xn=Un.getContext("2d",{willReadFrequently:!0})),Un.width=ne,Un.height=ce,xn.drawImage(k,0,0,ne,ce);const _e=xn.getImageData(R,K,z,ee);return xn.clearRect(0,0,ne,ce),_e.data})(f,u,d,b,M)}))},s.cS=Cs,s.cT=h,s.cU=R0,s.cV=Gp,s.cW=Hh,s.cX=function(f,u){const d=new Map;if(f!=null)if(f.type==="Feature")d.set(Hp(f,u),f);else for(const b of f.features)d.set(Hp(b,u),b);return d},s.cY=function(f,u){if(f==null)return!0;if(f.type==="Feature")return Hp(f,u)!=null;if(f.type==="FeatureCollection"){const d=new Set;for(const b of f.features){const M=Hp(b,u);if(M==null||d.has(M))return!1;d.add(M)}return!0}return!1},s.cZ=function(f,u,d){var b,M,k,R;if(u.removeAll&&f.clear(),u.remove)for(const K of u.remove)f.delete(K);if(u.add)for(const K of u.add){const z=Hp(K,d);z!=null&&f.set(z,K)}if(u.update)for(const K of u.update){let z=f.get(K.id);if(z==null)continue;const ee=!K.removeAllProperties&&(((b=K.removeProperties)===null||b===void 0?void 0:b.length)>0||((M=K.addOrUpdateProperties)===null||M===void 0?void 0:M.length)>0);if((K.newGeometry||K.removeAllProperties||ee)&&(z=Object.assign({},z),f.set(K.id,z),ee&&(z.properties=Object.assign({},z.properties))),K.newGeometry&&(z.geometry=K.newGeometry),K.removeAllProperties)z.properties={};else if(((k=K.removeProperties)===null||k===void 0?void 0:k.length)>0)for(const ne of K.removeProperties)Object.prototype.hasOwnProperty.call(z.properties,ne)&&delete z.properties[ne];if(((R=K.addOrUpdateProperties)===null||R===void 0?void 0:R.length)>0)for(const{key:ne,value:ce}of K.addOrUpdateProperties)z.properties[ne]=ce}},s.c_=Lc,s.ca=class extends td{},s.cb=class extends S{},s.cc=function(f,u){return f[0]===u[0]&&f[1]===u[1]&&f[2]===u[2]&&f[3]===u[3]&&f[4]===u[4]&&f[5]===u[5]&&f[6]===u[6]&&f[7]===u[7]&&f[8]===u[8]&&f[9]===u[9]&&f[10]===u[10]&&f[11]===u[11]&&f[12]===u[12]&&f[13]===u[13]&&f[14]===u[14]&&f[15]===u[15]},s.cd=function(f,u){var d=f[0],b=f[1],M=f[2],k=f[3],R=f[4],K=f[5],z=f[6],ee=f[7],ne=f[8],ce=f[9],_e=f[10],Se=f[11],ke=f[12],ze=f[13],$e=f[14],it=f[15],Et=u[0],ut=u[1],pt=u[2],Gt=u[3],Jt=u[4],mn=u[5],Nn=u[6],Tn=u[7],zn=u[8],bi=u[9],jn=u[10],Kn=u[11],un=u[12],Gi=u[13],Xi=u[14],Oi=u[15];return Math.abs(d-Et)<=q*Math.max(1,Math.abs(d),Math.abs(Et))&&Math.abs(b-ut)<=q*Math.max(1,Math.abs(b),Math.abs(ut))&&Math.abs(M-pt)<=q*Math.max(1,Math.abs(M),Math.abs(pt))&&Math.abs(k-Gt)<=q*Math.max(1,Math.abs(k),Math.abs(Gt))&&Math.abs(R-Jt)<=q*Math.max(1,Math.abs(R),Math.abs(Jt))&&Math.abs(K-mn)<=q*Math.max(1,Math.abs(K),Math.abs(mn))&&Math.abs(z-Nn)<=q*Math.max(1,Math.abs(z),Math.abs(Nn))&&Math.abs(ee-Tn)<=q*Math.max(1,Math.abs(ee),Math.abs(Tn))&&Math.abs(ne-zn)<=q*Math.max(1,Math.abs(ne),Math.abs(zn))&&Math.abs(ce-bi)<=q*Math.max(1,Math.abs(ce),Math.abs(bi))&&Math.abs(_e-jn)<=q*Math.max(1,Math.abs(_e),Math.abs(jn))&&Math.abs(Se-Kn)<=q*Math.max(1,Math.abs(Se),Math.abs(Kn))&&Math.abs(ke-un)<=q*Math.max(1,Math.abs(ke),Math.abs(un))&&Math.abs(ze-Gi)<=q*Math.max(1,Math.abs(ze),Math.abs(Gi))&&Math.abs($e-Xi)<=q*Math.max(1,Math.abs($e),Math.abs(Xi))&&Math.abs(it-Oi)<=q*Math.max(1,Math.abs(it),Math.abs(Oi))},s.ce=function(f,u){return f[0]=u[0],f[1]=u[1],f[2]=u[2],f[3]=u[3],f[4]=u[4],f[5]=u[5],f[6]=u[6],f[7]=u[7],f[8]=u[8],f[9]=u[9],f[10]=u[10],f[11]=u[11],f[12]=u[12],f[13]=u[13],f[14]=u[14],f[15]=u[15],f},s.cf=f=>f.type==="symbol",s.cg=f=>f.type==="circle",s.ch=f=>f.type==="heatmap",s.ci=f=>f.type==="line",s.cj=f=>f.type==="fill",s.ck=f=>f.type==="fill-extrusion",s.cl=f=>f.type==="hillshade",s.cm=f=>f.type==="color-relief",s.cn=f=>f.type==="background",s.co=f=>f.type==="custom",s.cp=_t,s.cq=function(f,u,d){const b=At(u.x-d.x,u.y-d.y),M=At(f.x-d.x,f.y-d.y);var k,R;return Ot(Math.atan2(b[0]*M[1]-b[1]*M[0],(k=b)[0]*(R=M)[0]+k[1]*R[1]))},s.cr=at,s.cs=function(f,u){return ie[u]&&(f instanceof MouseEvent||f instanceof WheelEvent)},s.ct=function(f,u){return be[u]&&"touches"in f},s.cu=function(f){return be[f]||ie[f]},s.cv=function(f,u,d){var b=u[0],M=u[1];return f[0]=d[0]*b+d[4]*M+d[12],f[1]=d[1]*b+d[5]*M+d[13],f},s.cw=function(f,u){const{x:d,y:b}=bg.fromLngLat(u);return!(f<0||f>25||b<0||b>=1||d<0||d>=1)},s.cx=function(f,u){return f[0]=u[0],f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=u[1],f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=u[2],f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f},s.cy=class extends ed{},s.cz=Sg,s.d=Xe,s.e=Ke,s.f=f=>a(void 0,void 0,void 0,(function*(){if(f.byteLength===0)return createImageBitmap(new ImageData(1,1));const u=new Blob([new Uint8Array(f)],{type:"image/png"});try{return createImageBitmap(u)}catch(d){throw new Error(`Could not load image because of ${d.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}})),s.g=Ae,s.h=f=>new Promise(((u,d)=>{const b=new Image;b.onload=()=>{u(b),URL.revokeObjectURL(b.src),b.onload=null,window.requestAnimationFrame((()=>{b.src=_i}))},b.onerror=()=>d(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const M=new Blob([new Uint8Array(f)],{type:"image/png"});b.src=f.byteLength?URL.createObjectURL(M):_i})),s.i=kt,s.j=(f,u)=>Pe(Ke(f,{type:"json"}),u),s.k=xt,s.l=Dt,s.m=Pe,s.n=(f,u)=>Pe(Ke(f,{type:"arrayBuffer"}),u),s.o=function(f){return new Z1(f).readFields(Dv,[])},s.p=EC,s.q=Lp,s.r=os,s.s=Zn,s.t=dt,s.u=er,s.v=Ud,s.w=Ct,s.x=Pa,s.y=D1,s.z=Hm})),r("worker",["./shared"],(function(s){class a{constructor(se,Ae){this.keyCache={},se&&this.replace(se,Ae)}replace(se,Ae){this._layerConfigs={},this._layers={},this.update(se,[],Ae)}update(se,Ae,ve){for(const tt of se){this._layerConfigs[tt.id]=tt;const Pe=this._layers[tt.id]=s.bM(tt,ve);Pe._featureFilter=s.ae(Pe.filter,ve),this.keyCache[tt.id]&&delete this.keyCache[tt.id]}for(const tt of Ae)delete this.keyCache[tt],delete this._layerConfigs[tt],delete this._layers[tt];this.familiesBySource={};const We=s.cF(Object.values(this._layerConfigs),this.keyCache);for(const tt of We){const Pe=tt.map((tn=>this._layers[tn.id])),Xe=Pe[0];if(Xe.visibility==="none")continue;const y=Xe.source||"";let ot=this.familiesBySource[y];ot||(ot=this.familiesBySource[y]={});const Dt=Xe.sourceLayer||"_geojsonTileLayer";let xt=ot[Dt];xt||(xt=ot[Dt]=[]),xt.push(Pe)}}}class c{constructor(se){const Ae={},ve=[];for(const Xe in se){const y=se[Xe],ot=Ae[Xe]={};for(const Dt in y){const xt=y[+Dt];if(!xt||xt.bitmap.width===0||xt.bitmap.height===0)continue;const tn={x:0,y:0,w:xt.bitmap.width+2,h:xt.bitmap.height+2};ve.push(tn),ot[Dt]={rect:tn,metrics:xt.metrics}}}const{w:We,h:tt}=s.p(ve),Pe=new s.q({width:We||1,height:tt||1});for(const Xe in se){const y=se[Xe];for(const ot in y){const Dt=y[+ot];if(!Dt||Dt.bitmap.width===0||Dt.bitmap.height===0)continue;const xt=Ae[Xe][ot].rect;s.q.copy(Dt.bitmap,Pe,{x:0,y:0},{x:xt.x+1,y:xt.y+1},Dt.bitmap)}}this.image=Pe,this.positions=Ae}}s.cG("GlyphAtlas",c);class h{constructor(se){this.tileID=new s.a0(se.tileID.overscaledZ,se.tileID.wrap,se.tileID.canonical.z,se.tileID.canonical.x,se.tileID.canonical.y),this.uid=se.uid,this.zoom=se.zoom,this.pixelRatio=se.pixelRatio,this.tileSize=se.tileSize,this.source=se.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=se.showCollisionBoxes,this.collectResourceTiming=!!se.collectResourceTiming,this.returnDependencies=!!se.returnDependencies,this.promoteId=se.promoteId,this.inFlightDependencies=[]}parse(se,Ae,ve,We,tt){return s._(this,void 0,void 0,(function*(){this.status="parsing",this.data=se,this.collisionBoxArray=new s.ac;const Pe=new s.cH(Object.keys(se.layers).sort()),Xe=new s.cI(this.tileID,this.promoteId);Xe.bucketLayerIDs=[];const y={},ot={featureIndex:Xe,iconDependencies:{},patternDependencies:{},glyphDependencies:{},dashDependencies:{},availableImages:ve,subdivisionGranularity:tt},Dt=Ae.familiesBySource[this.source];for(const rn in Dt){const Li=se.layers[rn];if(!Li)continue;Li.version===1&&s.w(`Vector tile source "${this.source}" layer "${rn}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const $o=Pe.encode(rn),Ws=[];for(let Ur=0;Ur<Li.length;Ur++){const pn=Li.feature(Ur),zi=Xe.getId(pn,rn);Ws.push({feature:pn,id:zi,index:Ur,sourceLayerIndex:$o})}for(const Ur of Dt[rn]){const pn=Ur[0];pn.source!==this.source&&s.w(`layer.source = ${pn.source} does not equal this.source = ${this.source}`),pn.isHidden(this.zoom,!0)||(m(Ur,this.zoom,ve),(y[pn.id]=pn.createBucket({index:Xe.bucketLayerIDs.length,layers:Ur,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:$o,sourceID:this.source})).populate(Ws,ot,this.tileID.canonical),Xe.bucketLayerIDs.push(Ur.map((zi=>zi.id))))}}const xt=s.bR(ot.glyphDependencies,(rn=>Object.keys(rn).map(Number)));this.inFlightDependencies.forEach((rn=>rn?.abort())),this.inFlightDependencies=[];let tn=Promise.resolve({});if(Object.keys(xt).length){const rn=new AbortController;this.inFlightDependencies.push(rn),tn=We.sendAsync({type:"GG",data:{stacks:xt,source:this.source,tileID:this.tileID,type:"glyphs"}},rn)}const dt=Object.keys(ot.iconDependencies);let Xn=Promise.resolve({});if(dt.length){const rn=new AbortController;this.inFlightDependencies.push(rn),Xn=We.sendAsync({type:"GI",data:{icons:dt,source:this.source,tileID:this.tileID,type:"icons"}},rn)}const yi=Object.keys(ot.patternDependencies);let Dn=Promise.resolve({});if(yi.length){const rn=new AbortController;this.inFlightDependencies.push(rn),Dn=We.sendAsync({type:"GI",data:{icons:yi,source:this.source,tileID:this.tileID,type:"patterns"}},rn)}const Fn=ot.dashDependencies;let vi=Promise.resolve({});if(Object.keys(Fn).length){const rn=new AbortController;this.inFlightDependencies.push(rn),vi=We.sendAsync({type:"GDA",data:{dashes:Fn}},rn)}const[Zi,Ki,Ji,ki]=yield Promise.all([tn,Xn,Dn,vi]),Ri=new c(Zi),pr=new s.cJ(Ki,Ji);for(const rn in y){const Li=y[rn];Li instanceof s.ad?(m(Li.layers,this.zoom,ve),s.cK({bucket:Li,glyphMap:Zi,glyphPositions:Ri.positions,imageMap:Ki,imagePositions:pr.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:ot.subdivisionGranularity})):Li.hasDependencies&&(Li instanceof s.cL||Li instanceof s.cM||Li instanceof s.cN)&&(m(Li.layers,this.zoom,ve),Li.addFeatures(ot,this.tileID.canonical,pr.patternPositions,ki))}return this.status="done",{buckets:Object.values(y).filter((rn=>!rn.isEmpty())),featureIndex:Xe,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Ri.image,imageAtlas:pr,dashPositions:ki,glyphMap:this.returnDependencies?Zi:null,iconMap:this.returnDependencies?Ki:null,glyphPositions:this.returnDependencies?Ri.positions:null}}))}}function m(de,se,Ae){const ve=new s.G(se);for(const We of de)We.recalculate(ve,Ae)}class v{constructor(se,Ae,ve){this.actor=se,this.layerIndex=Ae,this.availableImages=ve,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(se,Ae){return s._(this,void 0,void 0,(function*(){const ve=yield s.n(se.request,Ae);try{return{vectorTile:new s.cO(new s.cP(ve.data)),rawData:ve.data,cacheControl:ve.cacheControl,expires:ve.expires}}catch(We){const tt=new Uint8Array(ve.data);let Pe=`Unable to parse the tile at ${se.request.url}, `;throw Pe+=tt[0]===31&&tt[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${We.message}`,new Error(Pe)}}))}loadTile(se){return s._(this,void 0,void 0,(function*(){const Ae=se.uid,ve=!!(se&&se.request&&se.request.collectResourceTiming)&&new s.cQ(se.request),We=new h(se);this.loading[Ae]=We;const tt=new AbortController;We.abort=tt;try{const Pe=yield this.loadVectorTile(se,tt);if(delete this.loading[Ae],!Pe)return null;const Xe=Pe.rawData,y={};Pe.expires&&(y.expires=Pe.expires),Pe.cacheControl&&(y.cacheControl=Pe.cacheControl);const ot={};if(ve){const xt=ve.finish();xt&&(ot.resourceTiming=JSON.parse(JSON.stringify(xt)))}We.vectorTile=Pe.vectorTile;const Dt=We.parse(Pe.vectorTile,this.layerIndex,this.availableImages,this.actor,se.subdivisionGranularity);this.loaded[Ae]=We,this.fetching[Ae]={rawTileData:Xe,cacheControl:y,resourceTiming:ot};try{const xt=yield Dt;return s.e({rawTileData:Xe.slice(0)},xt,y,ot)}finally{delete this.fetching[Ae]}}catch(Pe){throw delete this.loading[Ae],We.status="done",this.loaded[Ae]=We,Pe}}))}reloadTile(se){return s._(this,void 0,void 0,(function*(){const Ae=se.uid;if(!this.loaded||!this.loaded[Ae])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const ve=this.loaded[Ae];if(ve.showCollisionBoxes=se.showCollisionBoxes,ve.status==="parsing"){const We=yield ve.parse(ve.vectorTile,this.layerIndex,this.availableImages,this.actor,se.subdivisionGranularity);let tt;if(this.fetching[Ae]){const{rawTileData:Pe,cacheControl:Xe,resourceTiming:y}=this.fetching[Ae];delete this.fetching[Ae],tt=s.e({rawTileData:Pe.slice(0)},We,Xe,y)}else tt=We;return tt}if(ve.status==="done"&&ve.vectorTile)return ve.parse(ve.vectorTile,this.layerIndex,this.availableImages,this.actor,se.subdivisionGranularity)}))}abortTile(se){return s._(this,void 0,void 0,(function*(){const Ae=this.loading,ve=se.uid;Ae&&Ae[ve]&&Ae[ve].abort&&(Ae[ve].abort.abort(),delete Ae[ve])}))}removeTile(se){return s._(this,void 0,void 0,(function*(){this.loaded&&this.loaded[se.uid]&&delete this.loaded[se.uid]}))}}class x{constructor(){this.loaded={}}loadTile(se){return s._(this,void 0,void 0,(function*(){const{uid:Ae,encoding:ve,rawImageData:We,redFactor:tt,greenFactor:Pe,blueFactor:Xe,baseShift:y}=se,ot=We.width+2,Dt=We.height+2,xt=s.b(We)?new s.R({width:ot,height:Dt},yield s.cR(We,-1,-1,ot,Dt)):We,tn=new s.cS(Ae,xt,ve,tt,Pe,Xe,y);return this.loaded=this.loaded||{},this.loaded[Ae]=tn,tn}))}removeTile(se){const Ae=this.loaded,ve=se.uid;Ae&&Ae[ve]&&delete Ae[ve]}}var E,D,P=(function(){if(D)return E;function de(Ae,ve){if(Ae.length!==0){se(Ae[0],ve);for(var We=1;We<Ae.length;We++)se(Ae[We],!ve)}}function se(Ae,ve){for(var We=0,tt=0,Pe=0,Xe=Ae.length,y=Xe-1;Pe<Xe;y=Pe++){var ot=(Ae[Pe][0]-Ae[y][0])*(Ae[y][1]+Ae[Pe][1]),Dt=We+ot;tt+=Math.abs(We)>=Math.abs(ot)?We-Dt+ot:ot-Dt+We,We=Dt}We+tt>=0!=!!ve&&Ae.reverse()}return D=1,E=function Ae(ve,We){var tt,Pe=ve&&ve.type;if(Pe==="FeatureCollection")for(tt=0;tt<ve.features.length;tt++)Ae(ve.features[tt],We);else if(Pe==="GeometryCollection")for(tt=0;tt<ve.geometries.length;tt++)Ae(ve.geometries[tt],We);else if(Pe==="Feature")Ae(ve.geometry,We);else if(Pe==="Polygon")de(ve.coordinates,We);else if(Pe==="MultiPolygon")for(tt=0;tt<ve.coordinates.length;tt++)de(ve.coordinates[tt],We);return ve}})(),F=s.cT(P);class W extends s.cV{constructor(se,Ae){super(new s.cP,0,Ae,[],[]),this.feature=se,this.type=se.type,this.properties=se.tags?se.tags:{},"id"in se&&(typeof se.id=="string"?this.id=parseInt(se.id,10):typeof se.id!="number"||isNaN(se.id)||(this.id=se.id))}loadGeometry(){const se=[],Ae=this.feature.type===1?[this.feature.geometry]:this.feature.geometry;for(const ve of Ae){const We=[];for(const tt of ve)We.push(new s.P(tt[0],tt[1]));se.push(We)}return se}}class q extends s.cU{constructor(se,Ae){super(new s.cP),this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.version=Ae?Ae.version:1,this.extent=Ae?Ae.extent:4096,this.length=se.length,this.features=se}feature(se){return new W(this.features[se],this.extent)}}function V(de,se){se.writeVarintField(15,de.version||1),se.writeStringField(1,de.name||""),se.writeVarintField(5,de.extent||4096);const Ae={keys:[],values:[],keycache:{},valuecache:{}};for(let tt=0;tt<de.length;tt++)Ae.feature=de.feature(tt),se.writeMessage(2,H,Ae);const ve=Ae.keys;for(const tt of ve)se.writeStringField(3,tt);const We=Ae.values;for(const tt of We)se.writeMessage(4,ue,tt)}function H(de,se){if(!de.feature)return;const Ae=de.feature;Ae.id!==void 0&&se.writeVarintField(1,Ae.id),se.writeMessage(2,X,de),se.writeVarintField(3,Ae.type),se.writeMessage(4,oe,Ae)}function X(de,se){for(const Ae in de.feature?.properties){let ve=de.feature.properties[Ae],We=de.keycache[Ae];if(ve===null)continue;We===void 0&&(de.keys.push(Ae),We=de.keys.length-1,de.keycache[Ae]=We),se.writeVarint(We),typeof ve!="string"&&typeof ve!="boolean"&&typeof ve!="number"&&(ve=JSON.stringify(ve));const tt=typeof ve+":"+ve;let Pe=de.valuecache[tt];Pe===void 0&&(de.values.push(ve),Pe=de.values.length-1,de.valuecache[tt]=Pe),se.writeVarint(Pe)}}function Z(de,se){return(se<<3)+(7&de)}function G(de){return de<<1^de>>31}function oe(de,se){const Ae=de.loadGeometry(),ve=de.type;let We=0,tt=0;for(const Pe of Ae){let Xe=1;ve===1&&(Xe=Pe.length),se.writeVarint(Z(1,Xe));const y=ve===3?Pe.length-1:Pe.length;for(let ot=0;ot<y;ot++){ot===1&&ve!==1&&se.writeVarint(Z(2,y-1));const Dt=Pe[ot].x-We,xt=Pe[ot].y-tt;se.writeVarint(G(Dt)),se.writeVarint(G(xt)),We+=Dt,tt+=xt}de.type===3&&se.writeVarint(Z(7,1))}}function ue(de,se){const Ae=typeof de;Ae==="string"?se.writeStringField(1,de):Ae==="boolean"?se.writeBooleanField(7,de):Ae==="number"&&(de%1!=0?se.writeDoubleField(3,de):de<0?se.writeSVarintField(6,de):se.writeVarintField(5,de))}const xe={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:de=>de},me=Math.fround||(Ie=new Float32Array(1),de=>(Ie[0]=+de,Ie[0]));var Ie;class Me{constructor(se){this.options=Object.assign(Object.create(xe),se),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(se){const{log:Ae,minZoom:ve,maxZoom:We}=this.options;Ae&&console.time("total time");const tt=`prepare ${se.length} points`;Ae&&console.time(tt),this.points=se;const Pe=[];for(let y=0;y<se.length;y++){const ot=se[y];if(!ot.geometry)continue;const[Dt,xt]=ot.geometry.coordinates,tn=me(Ee(Dt)),dt=me(qe(xt));Pe.push(tn,dt,1/0,y,-1,1),this.options.reduce&&Pe.push(0)}let Xe=this.trees[We+1]=this._createTree(Pe);Ae&&console.timeEnd(tt);for(let y=We;y>=ve;y--){const ot=+Date.now();Xe=this.trees[y]=this._createTree(this._cluster(Xe,y)),Ae&&console.log("z%d: %d clusters in %dms",y,Xe.numItems,+Date.now()-ot)}return Ae&&console.timeEnd("total time"),this}getClusters(se,Ae){let ve=((se[0]+180)%360+360)%360-180;const We=Math.max(-90,Math.min(90,se[1]));let tt=se[2]===180?180:((se[2]+180)%360+360)%360-180;const Pe=Math.max(-90,Math.min(90,se[3]));if(se[2]-se[0]>=360)ve=-180,tt=180;else if(ve>tt){const xt=this.getClusters([ve,We,180,Pe],Ae),tn=this.getClusters([-180,We,tt,Pe],Ae);return xt.concat(tn)}const Xe=this.trees[this._limitZoom(Ae)],y=Xe.range(Ee(ve),qe(Pe),Ee(tt),qe(We)),ot=Xe.data,Dt=[];for(const xt of y){const tn=this.stride*xt;Dt.push(ot[tn+5]>1?Te(ot,tn,this.clusterProps):this.points[ot[tn+3]])}return Dt}getChildren(se){const Ae=this._getOriginId(se),ve=this._getOriginZoom(se),We="No cluster with the specified id.",tt=this.trees[ve];if(!tt)throw new Error(We);const Pe=tt.data;if(Ae*this.stride>=Pe.length)throw new Error(We);const Xe=this.options.radius/(this.options.extent*Math.pow(2,ve-1)),y=tt.within(Pe[Ae*this.stride],Pe[Ae*this.stride+1],Xe),ot=[];for(const Dt of y){const xt=Dt*this.stride;Pe[xt+4]===se&&ot.push(Pe[xt+5]>1?Te(Pe,xt,this.clusterProps):this.points[Pe[xt+3]])}if(ot.length===0)throw new Error(We);return ot}getLeaves(se,Ae,ve){const We=[];return this._appendLeaves(We,se,Ae=Ae||10,ve=ve||0,0),We}getTile(se,Ae,ve){const We=this.trees[this._limitZoom(se)],tt=Math.pow(2,se),{extent:Pe,radius:Xe}=this.options,y=Xe/Pe,ot=(ve-y)/tt,Dt=(ve+1+y)/tt,xt={features:[]};return this._addTileFeatures(We.range((Ae-y)/tt,ot,(Ae+1+y)/tt,Dt),We.data,Ae,ve,tt,xt),Ae===0&&this._addTileFeatures(We.range(1-y/tt,ot,1,Dt),We.data,tt,ve,tt,xt),Ae===tt-1&&this._addTileFeatures(We.range(0,ot,y/tt,Dt),We.data,-1,ve,tt,xt),xt.features.length?xt:null}getClusterExpansionZoom(se){let Ae=this._getOriginZoom(se)-1;for(;Ae<=this.options.maxZoom;){const ve=this.getChildren(se);if(Ae++,ve.length!==1)break;se=ve[0].properties.cluster_id}return Ae}_appendLeaves(se,Ae,ve,We,tt){const Pe=this.getChildren(Ae);for(const Xe of Pe){const y=Xe.properties;if(y&&y.cluster?tt+y.point_count<=We?tt+=y.point_count:tt=this._appendLeaves(se,y.cluster_id,ve,We,tt):tt<We?tt++:se.push(Xe),se.length===ve)break}return tt}_createTree(se){const Ae=new s.aM(se.length/this.stride|0,this.options.nodeSize,Float32Array);for(let ve=0;ve<se.length;ve+=this.stride)Ae.add(se[ve],se[ve+1]);return Ae.finish(),Ae.data=se,Ae}_addTileFeatures(se,Ae,ve,We,tt,Pe){for(const Xe of se){const y=Xe*this.stride,ot=Ae[y+5]>1;let Dt,xt,tn;if(ot)Dt=je(Ae,y,this.clusterProps),xt=Ae[y],tn=Ae[y+1];else{const yi=this.points[Ae[y+3]];Dt=yi.properties;const[Dn,Fn]=yi.geometry.coordinates;xt=Ee(Dn),tn=qe(Fn)}const dt={type:1,geometry:[[Math.round(this.options.extent*(xt*tt-ve)),Math.round(this.options.extent*(tn*tt-We))]],tags:Dt};let Xn;Xn=ot||this.options.generateId?Ae[y+3]:this.points[Ae[y+3]].id,Xn!==void 0&&(dt.id=Xn),Pe.features.push(dt)}}_limitZoom(se){return Math.max(this.options.minZoom,Math.min(Math.floor(+se),this.options.maxZoom+1))}_cluster(se,Ae){const{radius:ve,extent:We,reduce:tt,minPoints:Pe}=this.options,Xe=ve/(We*Math.pow(2,Ae)),y=se.data,ot=[],Dt=this.stride;for(let xt=0;xt<y.length;xt+=Dt){if(y[xt+2]<=Ae)continue;y[xt+2]=Ae;const tn=y[xt],dt=y[xt+1],Xn=se.within(y[xt],y[xt+1],Xe),yi=y[xt+5];let Dn=yi;for(const Fn of Xn){const vi=Fn*Dt;y[vi+2]>Ae&&(Dn+=y[vi+5])}if(Dn>yi&&Dn>=Pe){let Fn,vi=tn*yi,Zi=dt*yi,Ki=-1;const Ji=(xt/Dt<<5)+(Ae+1)+this.points.length;for(const ki of Xn){const Ri=ki*Dt;if(y[Ri+2]<=Ae)continue;y[Ri+2]=Ae;const pr=y[Ri+5];vi+=y[Ri]*pr,Zi+=y[Ri+1]*pr,y[Ri+4]=Ji,tt&&(Fn||(Fn=this._map(y,xt,!0),Ki=this.clusterProps.length,this.clusterProps.push(Fn)),tt(Fn,this._map(y,Ri)))}y[xt+4]=Ji,ot.push(vi/Dn,Zi/Dn,1/0,Ji,-1,Dn),tt&&ot.push(Ki)}else{for(let Fn=0;Fn<Dt;Fn++)ot.push(y[xt+Fn]);if(Dn>1)for(const Fn of Xn){const vi=Fn*Dt;if(!(y[vi+2]<=Ae)){y[vi+2]=Ae;for(let Zi=0;Zi<Dt;Zi++)ot.push(y[vi+Zi])}}}}return ot}_getOriginId(se){return se-this.points.length>>5}_getOriginZoom(se){return(se-this.points.length)%32}_map(se,Ae,ve){if(se[Ae+5]>1){const Pe=this.clusterProps[se[Ae+6]];return ve?Object.assign({},Pe):Pe}const We=this.points[se[Ae+3]].properties,tt=this.options.map(We);return ve&&tt===We?Object.assign({},tt):tt}}function Te(de,se,Ae){return{type:"Feature",id:de[se+3],properties:je(de,se,Ae),geometry:{type:"Point",coordinates:[(ve=de[se],360*(ve-.5)),At(de[se+1])]}};var ve}function je(de,se,Ae){const ve=de[se+5],We=ve>=1e4?`${Math.round(ve/1e3)}k`:ve>=1e3?Math.round(ve/100)/10+"k":ve,tt=de[se+6],Pe=tt===-1?{}:Object.assign({},Ae[tt]);return Object.assign(Pe,{cluster:!0,cluster_id:de[se+3],point_count:ve,point_count_abbreviated:We})}function Ee(de){return de/360+.5}function qe(de){const se=Math.sin(de*Math.PI/180),Ae=.5-.25*Math.log((1+se)/(1-se))/Math.PI;return Ae<0?0:Ae>1?1:Ae}function At(de){const se=(180-360*de)*Math.PI/180;return 360*Math.atan(Math.exp(se))/Math.PI-90}function gt(de,se,Ae,ve){let We=ve;const tt=se+(Ae-se>>1);let Pe,Xe=Ae-se;const y=de[se],ot=de[se+1],Dt=de[Ae],xt=de[Ae+1];for(let tn=se+3;tn<Ae;tn+=3){const dt=Le(de[tn],de[tn+1],y,ot,Dt,xt);if(dt>We)Pe=tn,We=dt;else if(dt===We){const Xn=Math.abs(tn-tt);Xn<Xe&&(Pe=tn,Xe=Xn)}}We>ve&&(Pe-se>3&&gt(de,se,Pe,ve),de[Pe+2]=We,Ae-Pe>3&&gt(de,Pe,Ae,ve))}function Le(de,se,Ae,ve,We,tt){let Pe=We-Ae,Xe=tt-ve;if(Pe!==0||Xe!==0){const y=((de-Ae)*Pe+(se-ve)*Xe)/(Pe*Pe+Xe*Xe);y>1?(Ae=We,ve=tt):y>0&&(Ae+=Pe*y,ve+=Xe*y)}return Pe=de-Ae,Xe=se-ve,Pe*Pe+Xe*Xe}function Re(de,se,Ae,ve){const We={id:de??null,type:se,geometry:Ae,tags:ve,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(se==="Point"||se==="MultiPoint"||se==="LineString")Ge(We,Ae);else if(se==="Polygon")Ge(We,Ae[0]);else if(se==="MultiLineString")for(const tt of Ae)Ge(We,tt);else if(se==="MultiPolygon")for(const tt of Ae)Ge(We,tt[0]);return We}function Ge(de,se){for(let Ae=0;Ae<se.length;Ae+=3)de.minX=Math.min(de.minX,se[Ae]),de.minY=Math.min(de.minY,se[Ae+1]),de.maxX=Math.max(de.maxX,se[Ae]),de.maxY=Math.max(de.maxY,se[Ae+1])}function De(de,se,Ae,ve){if(!se.geometry)return;const We=se.geometry.coordinates;if(We&&We.length===0)return;const tt=se.geometry.type,Pe=Math.pow(Ae.tolerance/((1<<Ae.maxZoom)*Ae.extent),2);let Xe=[],y=se.id;if(Ae.promoteId?y=se.properties[Ae.promoteId]:Ae.generateId&&(y=ve||0),tt==="Point")_t(We,Xe);else if(tt==="MultiPoint")for(const ot of We)_t(ot,Xe);else if(tt==="LineString")at(We,Xe,Pe,!1);else if(tt==="MultiLineString"){if(Ae.lineMetrics){for(const ot of We)Xe=[],at(ot,Xe,Pe,!1),de.push(Re(y,"LineString",Xe,se.properties));return}Tt(We,Xe,Pe,!1)}else if(tt==="Polygon")Tt(We,Xe,Pe,!0);else{if(tt!=="MultiPolygon"){if(tt==="GeometryCollection"){for(const ot of se.geometry.geometries)De(de,{id:y,geometry:ot,properties:se.properties},Ae,ve);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const ot of We){const Dt=[];Tt(ot,Dt,Pe,!0),Xe.push(Dt)}}de.push(Re(y,tt,Xe,se.properties))}function _t(de,se){se.push(Kt(de[0]),Ke(de[1]),0)}function at(de,se,Ae,ve){let We,tt,Pe=0;for(let y=0;y<de.length;y++){const ot=Kt(de[y][0]),Dt=Ke(de[y][1]);se.push(ot,Dt,0),y>0&&(Pe+=ve?(We*Dt-ot*tt)/2:Math.sqrt(Math.pow(ot-We,2)+Math.pow(Dt-tt,2))),We=ot,tt=Dt}const Xe=se.length-3;se[2]=1,gt(se,0,Xe,Ae),se[Xe+2]=1,se.size=Math.abs(Pe),se.start=0,se.end=se.size}function Tt(de,se,Ae,ve){for(let We=0;We<de.length;We++){const tt=[];at(de[We],tt,Ae,ve),se.push(tt)}}function Kt(de){return de/360+.5}function Ke(de){const se=Math.sin(de*Math.PI/180),Ae=.5-.25*Math.log((1+se)/(1-se))/Math.PI;return Ae<0?0:Ae>1?1:Ae}function Oe(de,se,Ae,ve,We,tt,Pe,Xe){if(ve/=se,tt>=(Ae/=se)&&Pe<ve)return de;if(Pe<Ae||tt>=ve)return null;const y=[];for(const ot of de){const Dt=ot.geometry;let xt=ot.type;const tn=We===0?ot.minX:ot.minY,dt=We===0?ot.maxX:ot.maxY;if(tn>=Ae&&dt<ve){y.push(ot);continue}if(dt<Ae||tn>=ve)continue;let Xn=[];if(xt==="Point"||xt==="MultiPoint")Be(Dt,Xn,Ae,ve,We);else if(xt==="LineString")Ve(Dt,Xn,Ae,ve,We,!1,Xe.lineMetrics);else if(xt==="MultiLineString")ft(Dt,Xn,Ae,ve,We,!1);else if(xt==="Polygon")ft(Dt,Xn,Ae,ve,We,!0);else if(xt==="MultiPolygon")for(const yi of Dt){const Dn=[];ft(yi,Dn,Ae,ve,We,!0),Dn.length&&Xn.push(Dn)}if(Xn.length){if(Xe.lineMetrics&&xt==="LineString"){for(const yi of Xn)y.push(Re(ot.id,xt,yi,ot.tags));continue}xt!=="LineString"&&xt!=="MultiLineString"||(Xn.length===1?(xt="LineString",Xn=Xn[0]):xt="MultiLineString"),xt!=="Point"&&xt!=="MultiPoint"||(xt=Xn.length===3?"Point":"MultiPoint"),y.push(Re(ot.id,xt,Xn,ot.tags))}}return y.length?y:null}function Be(de,se,Ae,ve,We){for(let tt=0;tt<de.length;tt+=3){const Pe=de[tt+We];Pe>=Ae&&Pe<=ve&&Ct(se,de[tt],de[tt+1],de[tt+2])}}function Ve(de,se,Ae,ve,We,tt,Pe){let Xe=yt(de);const y=We===0?Lt:kt;let ot,Dt,xt=de.start;for(let Dn=0;Dn<de.length-3;Dn+=3){const Fn=de[Dn],vi=de[Dn+1],Zi=de[Dn+2],Ki=de[Dn+3],Ji=de[Dn+4],ki=We===0?Fn:vi,Ri=We===0?Ki:Ji;let pr=!1;Pe&&(ot=Math.sqrt(Math.pow(Fn-Ki,2)+Math.pow(vi-Ji,2))),ki<Ae?Ri>Ae&&(Dt=y(Xe,Fn,vi,Ki,Ji,Ae),Pe&&(Xe.start=xt+ot*Dt)):ki>ve?Ri<ve&&(Dt=y(Xe,Fn,vi,Ki,Ji,ve),Pe&&(Xe.start=xt+ot*Dt)):Ct(Xe,Fn,vi,Zi),Ri<Ae&&ki>=Ae&&(Dt=y(Xe,Fn,vi,Ki,Ji,Ae),pr=!0),Ri>ve&&ki<=ve&&(Dt=y(Xe,Fn,vi,Ki,Ji,ve),pr=!0),!tt&&pr&&(Pe&&(Xe.end=xt+ot*Dt),se.push(Xe),Xe=yt(de)),Pe&&(xt+=ot)}let tn=de.length-3;const dt=de[tn],Xn=de[tn+1],yi=We===0?dt:Xn;yi>=Ae&&yi<=ve&&Ct(Xe,dt,Xn,de[tn+2]),tn=Xe.length-3,tt&&tn>=3&&(Xe[tn]!==Xe[0]||Xe[tn+1]!==Xe[1])&&Ct(Xe,Xe[0],Xe[1],Xe[2]),Xe.length&&se.push(Xe)}function yt(de){const se=[];return se.size=de.size,se.start=de.start,se.end=de.end,se}function ft(de,se,Ae,ve,We,tt){for(const Pe of de)Ve(Pe,se,Ae,ve,We,tt,!1)}function Ct(de,se,Ae,ve){de.push(se,Ae,ve)}function Lt(de,se,Ae,ve,We,tt){const Pe=(tt-se)/(ve-se);return Ct(de,tt,Ae+(We-Ae)*Pe,1),Pe}function kt(de,se,Ae,ve,We,tt){const Pe=(tt-Ae)/(We-Ae);return Ct(de,se+(ve-se)*Pe,tt,1),Pe}function an(de,se){const Ae=[];for(let ve=0;ve<de.length;ve++){const We=de[ve],tt=We.type;let Pe;if(tt==="Point"||tt==="MultiPoint"||tt==="LineString")Pe=Hn(We.geometry,se);else if(tt==="MultiLineString"||tt==="Polygon"){Pe=[];for(const Xe of We.geometry)Pe.push(Hn(Xe,se))}else if(tt==="MultiPolygon"){Pe=[];for(const Xe of We.geometry){const y=[];for(const ot of Xe)y.push(Hn(ot,se));Pe.push(y)}}Ae.push(Re(We.id,tt,Pe,We.tags))}return Ae}function Hn(de,se){const Ae=[];Ae.size=de.size,de.start!==void 0&&(Ae.start=de.start,Ae.end=de.end);for(let ve=0;ve<de.length;ve+=3)Ae.push(de[ve]+se,de[ve+1],de[ve+2]);return Ae}function Wn(de,se){if(de.transformed)return de;const Ae=1<<de.z,ve=de.x,We=de.y;for(const tt of de.features){const Pe=tt.geometry,Xe=tt.type;if(tt.geometry=[],Xe===1)for(let y=0;y<Pe.length;y+=2)tt.geometry.push(_i(Pe[y],Pe[y+1],se,Ae,ve,We));else for(let y=0;y<Pe.length;y++){const ot=[];for(let Dt=0;Dt<Pe[y].length;Dt+=2)ot.push(_i(Pe[y][Dt],Pe[y][Dt+1],se,Ae,ve,We));tt.geometry.push(ot)}}return de.transformed=!0,de}function _i(de,se,Ae,ve,We,tt){return[Math.round(Ae*(de*ve-We)),Math.round(Ae*(se*ve-tt))]}function Ln(de,se,Ae,ve,We){const tt=se===We.maxZoom?0:We.tolerance/((1<<se)*We.extent),Pe={features:[],numPoints:0,numSimplified:0,numFeatures:de.length,source:null,x:Ae,y:ve,z:se,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const Xe of de)Un(Pe,Xe,tt,We);return Pe}function Un(de,se,Ae,ve){const We=se.geometry,tt=se.type,Pe=[];if(de.minX=Math.min(de.minX,se.minX),de.minY=Math.min(de.minY,se.minY),de.maxX=Math.max(de.maxX,se.maxX),de.maxY=Math.max(de.maxY,se.maxY),tt==="Point"||tt==="MultiPoint")for(let Xe=0;Xe<We.length;Xe+=3)Pe.push(We[Xe],We[Xe+1]),de.numPoints++,de.numSimplified++;else if(tt==="LineString")xn(Pe,We,de,Ae,!1,!1);else if(tt==="MultiLineString"||tt==="Polygon")for(let Xe=0;Xe<We.length;Xe++)xn(Pe,We[Xe],de,Ae,tt==="Polygon",Xe===0);else if(tt==="MultiPolygon")for(let Xe=0;Xe<We.length;Xe++){const y=We[Xe];for(let ot=0;ot<y.length;ot++)xn(Pe,y[ot],de,Ae,!0,ot===0)}if(Pe.length){let Xe=se.tags||null;if(tt==="LineString"&&ve.lineMetrics){Xe={};for(const ot in se.tags)Xe[ot]=se.tags[ot];Xe.mapbox_clip_start=We.start/We.size,Xe.mapbox_clip_end=We.end/We.size}const y={geometry:Pe,type:tt==="Polygon"||tt==="MultiPolygon"?3:tt==="LineString"||tt==="MultiLineString"?2:1,tags:Xe};se.id!==null&&(y.id=se.id),de.features.push(y)}}function xn(de,se,Ae,ve,We,tt){const Pe=ve*ve;if(ve>0&&se.size<(We?Pe:ve))return void(Ae.numPoints+=se.length/3);const Xe=[];for(let y=0;y<se.length;y+=3)(ve===0||se[y+2]>Pe)&&(Ae.numSimplified++,Xe.push(se[y],se[y+1])),Ae.numPoints++;We&&(function(y,ot){let Dt=0;for(let xt=0,tn=y.length,dt=tn-2;xt<tn;dt=xt,xt+=2)Dt+=(y[xt]-y[dt])*(y[xt+1]+y[dt+1]);if(Dt>0===ot)for(let xt=0,tn=y.length;xt<tn/2;xt+=2){const dt=y[xt],Xn=y[xt+1];y[xt]=y[tn-2-xt],y[xt+1]=y[tn-1-xt],y[tn-2-xt]=dt,y[tn-1-xt]=Xn}})(Xe,tt),de.push(Xe)}const Zn={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Rn{constructor(se,Ae){const ve=(Ae=this.options=(function(tt,Pe){for(const Xe in Pe)tt[Xe]=Pe[Xe];return tt})(Object.create(Zn),Ae)).debug;if(ve&&console.time("preprocess data"),Ae.maxZoom<0||Ae.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Ae.promoteId&&Ae.generateId)throw new Error("promoteId and generateId cannot be used together.");let We=(function(tt,Pe){const Xe=[];if(tt.type==="FeatureCollection")for(let y=0;y<tt.features.length;y++)De(Xe,tt.features[y],Pe,y);else De(Xe,tt.type==="Feature"?tt:{geometry:tt},Pe);return Xe})(se,Ae);this.tiles={},this.tileCoords=[],ve&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Ae.indexMaxZoom,Ae.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),We=(function(tt,Pe){const Xe=Pe.buffer/Pe.extent;let y=tt;const ot=Oe(tt,1,-1-Xe,Xe,0,-1,2,Pe),Dt=Oe(tt,1,1-Xe,2+Xe,0,-1,2,Pe);return(ot||Dt)&&(y=Oe(tt,1,-Xe,1+Xe,0,-1,2,Pe)||[],ot&&(y=an(ot,1).concat(y)),Dt&&(y=y.concat(an(Dt,-1)))),y})(We,Ae),We.length&&this.splitTile(We,0,0,0),ve&&(We.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(se,Ae,ve,We,tt,Pe,Xe){const y=[se,Ae,ve,We],ot=this.options,Dt=ot.debug;for(;y.length;){We=y.pop(),ve=y.pop(),Ae=y.pop(),se=y.pop();const xt=1<<Ae,tn=Ot(Ae,ve,We);let dt=this.tiles[tn];if(!dt&&(Dt>1&&console.time("creation"),dt=this.tiles[tn]=Ln(se,Ae,ve,We,ot),this.tileCoords.push({z:Ae,x:ve,y:We}),Dt)){Dt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Ae,ve,We,dt.numFeatures,dt.numPoints,dt.numSimplified),console.timeEnd("creation"));const pr=`z${Ae}`;this.stats[pr]=(this.stats[pr]||0)+1,this.total++}if(dt.source=se,tt==null){if(Ae===ot.indexMaxZoom||dt.numPoints<=ot.indexMaxPoints)continue}else{if(Ae===ot.maxZoom||Ae===tt)continue;if(tt!=null){const pr=tt-Ae;if(ve!==Pe>>pr||We!==Xe>>pr)continue}}if(dt.source=null,se.length===0)continue;Dt>1&&console.time("clipping");const Xn=.5*ot.buffer/ot.extent,yi=.5-Xn,Dn=.5+Xn,Fn=1+Xn;let vi=null,Zi=null,Ki=null,Ji=null,ki=Oe(se,xt,ve-Xn,ve+Dn,0,dt.minX,dt.maxX,ot),Ri=Oe(se,xt,ve+yi,ve+Fn,0,dt.minX,dt.maxX,ot);se=null,ki&&(vi=Oe(ki,xt,We-Xn,We+Dn,1,dt.minY,dt.maxY,ot),Zi=Oe(ki,xt,We+yi,We+Fn,1,dt.minY,dt.maxY,ot),ki=null),Ri&&(Ki=Oe(Ri,xt,We-Xn,We+Dn,1,dt.minY,dt.maxY,ot),Ji=Oe(Ri,xt,We+yi,We+Fn,1,dt.minY,dt.maxY,ot),Ri=null),Dt>1&&console.timeEnd("clipping"),y.push(vi||[],Ae+1,2*ve,2*We),y.push(Zi||[],Ae+1,2*ve,2*We+1),y.push(Ki||[],Ae+1,2*ve+1,2*We),y.push(Ji||[],Ae+1,2*ve+1,2*We+1)}}getTile(se,Ae,ve){se=+se,Ae=+Ae,ve=+ve;const We=this.options,{extent:tt,debug:Pe}=We;if(se<0||se>24)return null;const Xe=1<<se,y=Ot(se,Ae=Ae+Xe&Xe-1,ve);if(this.tiles[y])return Wn(this.tiles[y],tt);Pe>1&&console.log("drilling down to z%d-%d-%d",se,Ae,ve);let ot,Dt=se,xt=Ae,tn=ve;for(;!ot&&Dt>0;)Dt--,xt>>=1,tn>>=1,ot=this.tiles[Ot(Dt,xt,tn)];return ot&&ot.source?(Pe>1&&(console.log("found parent tile z%d-%d-%d",Dt,xt,tn),console.time("drilling down")),this.splitTile(ot.source,Dt,xt,tn,se,Ae,ve),Pe>1&&console.timeEnd("drilling down"),this.tiles[y]?Wn(this.tiles[y],tt):null):null}}function Ot(de,se,Ae){return 32*((1<<de)*Ae+se)+de}class be extends v{constructor(se,Ae,ve,We=ie){super(se,Ae,ve),this._dataUpdateable=new Map,this._createGeoJSONIndex=We}loadVectorTile(se,Ae){return s._(this,void 0,void 0,(function*(){const ve=se.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const We=this._geoJSONIndex.getTile(ve.z,ve.x,ve.y);if(!We)return null;const tt=new q(We.features,{version:2,extent:s.a3});let Pe=(function(Xe){const y=new s.cP;return(function(ot,Dt){for(const xt in ot.layers)Dt.writeMessage(3,V,ot.layers[xt])})(Xe,y),y.finish()})(tt);return Pe.byteOffset===0&&Pe.byteLength===Pe.buffer.byteLength||(Pe=new Uint8Array(Pe)),{vectorTile:tt,rawData:Pe.buffer}}))}loadData(se){return s._(this,void 0,void 0,(function*(){var Ae;(Ae=this._pendingRequest)===null||Ae===void 0||Ae.abort();const ve=!!(se&&se.request&&se.request.collectResourceTiming)&&new s.cQ(se.request);this._pendingRequest=new AbortController;try{(!this._pendingData||se.request||se.data||se.dataDiff)&&(this._pendingData=this.loadAndProcessGeoJSON(se,this._pendingRequest));const We=yield this._pendingData;this._geoJSONIndex=this._createGeoJSONIndex(We,se),this.loaded={};const tt={data:We};if(ve){const Pe=ve.finish();Pe&&(tt.resourceTiming={},tt.resourceTiming[se.source]=JSON.parse(JSON.stringify(Pe)))}return tt}catch(We){if(delete this._pendingRequest,s.cB(We))return{abandoned:!0};throw We}}))}getData(){return s._(this,void 0,void 0,(function*(){return this._pendingData}))}reloadTile(se){const Ae=this.loaded;return Ae&&Ae[se.uid]?super.reloadTile(se):this.loadTile(se)}loadAndProcessGeoJSON(se,Ae){return s._(this,void 0,void 0,(function*(){let ve=yield this.loadGeoJSON(se,Ae);if(delete this._pendingRequest,typeof ve!="object")throw new Error(`Input data given to '${se.source}' is not a valid GeoJSON object.`);if(F(ve,!0),se.filter){const We=s.cW(se.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(We.result==="error")throw new Error(We.value.map((Pe=>`${Pe.key}: ${Pe.message}`)).join(", "));ve={type:"FeatureCollection",features:ve.features.filter((Pe=>We.value.evaluate({zoom:0},Pe)))}}return ve}))}loadGeoJSON(se,Ae){return s._(this,void 0,void 0,(function*(){const{promoteId:ve}=se;if(se.request){const We=yield s.j(se.request,Ae);return this._dataUpdateable=s.cY(We.data,ve)?s.cX(We.data,ve):void 0,We.data}if(typeof se.data=="string")try{const We=JSON.parse(se.data);return this._dataUpdateable=s.cY(We,ve)?s.cX(We,ve):void 0,We}catch{throw new Error(`Input data given to '${se.source}' is not a valid GeoJSON object.`)}if(!se.dataDiff)throw new Error(`Input data given to '${se.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${se.source}`);return s.cZ(this._dataUpdateable,se.dataDiff,ve),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}}))}removeSource(se){return s._(this,void 0,void 0,(function*(){this._pendingRequest&&this._pendingRequest.abort()}))}getClusterExpansionZoom(se){return this._geoJSONIndex.getClusterExpansionZoom(se.clusterId)}getClusterChildren(se){return this._geoJSONIndex.getChildren(se.clusterId)}getClusterLeaves(se){return this._geoJSONIndex.getLeaves(se.clusterId,se.limit,se.offset)}}function ie(de,se){return se.cluster?new Me((function({superclusterOptions:Ae,clusterProperties:ve}){if(!ve||!Ae)return Ae;const We={},tt={},Pe={accumulated:null,zoom:0},Xe={properties:null},y=Object.keys(ve);for(const ot of y){const[Dt,xt]=ve[ot],tn=s.cW(xt),dt=s.cW(typeof Dt=="string"?[Dt,["accumulated"],["get",ot]]:Dt);We[ot]=tn.value,tt[ot]=dt.value}return Ae.map=ot=>{Xe.properties=ot;const Dt={};for(const xt of y)Dt[xt]=We[xt].evaluate(Pe,Xe);return Dt},Ae.reduce=(ot,Dt)=>{Xe.properties=Dt;for(const xt of y)Pe.accumulated=ot[xt],ot[xt]=tt[xt].evaluate(Pe,Xe)},Ae})(se)).load(de.features):(function(Ae,ve){return new Rn(Ae,ve)})(de,se.geojsonVtOptions)}class le{constructor(se){this.self=se,this.actor=new s.K(se),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.globalStates=new Map,this.self.registerWorkerSource=(Ae,ve)=>{if(this.externalWorkerSourceTypes[Ae])throw new Error(`Worker source with name "${Ae}" already registered.`);this.externalWorkerSourceTypes[Ae]=ve},this.self.addProtocol=s.cD,this.self.removeProtocol=s.cE,this.self.registerRTLTextPlugin=Ae=>{s.c_.setMethods(Ae)},this.actor.registerMessageHandler("LDT",((Ae,ve)=>this._getDEMWorkerSource(Ae,ve.source).loadTile(ve))),this.actor.registerMessageHandler("RDT",((Ae,ve)=>s._(this,void 0,void 0,(function*(){this._getDEMWorkerSource(Ae,ve.source).removeTile(ve)})))),this.actor.registerMessageHandler("GCEZ",((Ae,ve)=>s._(this,void 0,void 0,(function*(){return this._getWorkerSource(Ae,ve.type,ve.source).getClusterExpansionZoom(ve)})))),this.actor.registerMessageHandler("GCC",((Ae,ve)=>s._(this,void 0,void 0,(function*(){return this._getWorkerSource(Ae,ve.type,ve.source).getClusterChildren(ve)})))),this.actor.registerMessageHandler("GCL",((Ae,ve)=>s._(this,void 0,void 0,(function*(){return this._getWorkerSource(Ae,ve.type,ve.source).getClusterLeaves(ve)})))),this.actor.registerMessageHandler("LD",((Ae,ve)=>this._getWorkerSource(Ae,ve.type,ve.source).loadData(ve))),this.actor.registerMessageHandler("GD",((Ae,ve)=>this._getWorkerSource(Ae,ve.type,ve.source).getData())),this.actor.registerMessageHandler("LT",((Ae,ve)=>this._getWorkerSource(Ae,ve.type,ve.source).loadTile(ve))),this.actor.registerMessageHandler("RT",((Ae,ve)=>this._getWorkerSource(Ae,ve.type,ve.source).reloadTile(ve))),this.actor.registerMessageHandler("AT",((Ae,ve)=>this._getWorkerSource(Ae,ve.type,ve.source).abortTile(ve))),this.actor.registerMessageHandler("RMT",((Ae,ve)=>this._getWorkerSource(Ae,ve.type,ve.source).removeTile(ve))),this.actor.registerMessageHandler("RS",((Ae,ve)=>s._(this,void 0,void 0,(function*(){if(!this.workerSources[Ae]||!this.workerSources[Ae][ve.type]||!this.workerSources[Ae][ve.type][ve.source])return;const We=this.workerSources[Ae][ve.type][ve.source];delete this.workerSources[Ae][ve.type][ve.source],We.removeSource!==void 0&&We.removeSource(ve)})))),this.actor.registerMessageHandler("RM",(Ae=>s._(this,void 0,void 0,(function*(){delete this.layerIndexes[Ae],delete this.availableImages[Ae],delete this.workerSources[Ae],delete this.demWorkerSources[Ae],this.globalStates.delete(Ae)})))),this.actor.registerMessageHandler("SR",((Ae,ve)=>s._(this,void 0,void 0,(function*(){this.referrer=ve})))),this.actor.registerMessageHandler("SRPS",((Ae,ve)=>this._syncRTLPluginState(Ae,ve))),this.actor.registerMessageHandler("IS",((Ae,ve)=>s._(this,void 0,void 0,(function*(){this.self.importScripts(ve)})))),this.actor.registerMessageHandler("SI",((Ae,ve)=>this._setImages(Ae,ve))),this.actor.registerMessageHandler("UL",((Ae,ve)=>s._(this,void 0,void 0,(function*(){this._getLayerIndex(Ae).update(ve.layers,ve.removedIds,this._getGlobalState(Ae))})))),this.actor.registerMessageHandler("UGS",((Ae,ve)=>s._(this,void 0,void 0,(function*(){const We=this._getGlobalState(Ae);for(const tt in ve)We[tt]=ve[tt]})))),this.actor.registerMessageHandler("SL",((Ae,ve)=>s._(this,void 0,void 0,(function*(){this._getLayerIndex(Ae).replace(ve,this._getGlobalState(Ae))}))))}_getGlobalState(se){let Ae=this.globalStates.get(se);return Ae||(Ae={},this.globalStates.set(se,Ae)),Ae}_setImages(se,Ae){return s._(this,void 0,void 0,(function*(){this.availableImages[se]=Ae;for(const ve in this.workerSources[se]){const We=this.workerSources[se][ve];for(const tt in We)We[tt].availableImages=Ae}}))}_syncRTLPluginState(se,Ae){return s._(this,void 0,void 0,(function*(){return yield s.c_.syncState(Ae,this.self.importScripts)}))}_getAvailableImages(se){let Ae=this.availableImages[se];return Ae||(Ae=[]),Ae}_getLayerIndex(se){let Ae=this.layerIndexes[se];return Ae||(Ae=this.layerIndexes[se]=new a),Ae}_getWorkerSource(se,Ae,ve){if(this.workerSources[se]||(this.workerSources[se]={}),this.workerSources[se][Ae]||(this.workerSources[se][Ae]={}),!this.workerSources[se][Ae][ve]){const We={sendAsync:(tt,Pe)=>(tt.targetMapId=se,this.actor.sendAsync(tt,Pe))};switch(Ae){case"vector":this.workerSources[se][Ae][ve]=new v(We,this._getLayerIndex(se),this._getAvailableImages(se));break;case"geojson":this.workerSources[se][Ae][ve]=new be(We,this._getLayerIndex(se),this._getAvailableImages(se));break;default:this.workerSources[se][Ae][ve]=new this.externalWorkerSourceTypes[Ae](We,this._getLayerIndex(se),this._getAvailableImages(se))}}return this.workerSources[se][Ae][ve]}_getDEMWorkerSource(se,Ae){return this.demWorkerSources[se]||(this.demWorkerSources[se]={}),this.demWorkerSources[se][Ae]||(this.demWorkerSources[se][Ae]=new x),this.demWorkerSources[se][Ae]}}return s.i(self)&&(self.worker=new le(self)),le})),r("index",["exports","./shared"],(function(s,a){var c="5.11.0";function h(){var B=new a.A(4);return a.A!=Float32Array&&(B[1]=0,B[2]=0),B[0]=1,B[3]=1,B}let m,v;const x={frame(B,l,p){const C=requestAnimationFrame((O=>{S(),l(O)})),{unsubscribe:S}=a.s(B.signal,"abort",(()=>{S(),cancelAnimationFrame(C),p(a.c())}),!1)},frameAsync(B){return new Promise(((l,p)=>{this.frame(B,l,p)}))},getImageData(B,l=0){return this.getImageCanvasContext(B).getImageData(-l,-l,B.width+2*l,B.height+2*l)},getImageCanvasContext(B){const l=window.document.createElement("canvas"),p=l.getContext("2d",{willReadFrequently:!0});if(!p)throw new Error("failed to create canvas 2d context");return l.width=B.width,l.height=B.height,p.drawImage(B,0,0,B.width,B.height),p},resolveURL:B=>(m||(m=document.createElement("a")),m.href=B,m.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(v==null&&(v=matchMedia("(prefers-reduced-motion: reduce)")),v.matches)}},E=new class{constructor(){this._realTime=typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),this._frozenAt=null}getCurrentTime(){return this._frozenAt!==null?this._frozenAt:this._realTime()}setNow(B){this._frozenAt=B}restoreNow(){this._frozenAt=null}isFrozen(){return this._frozenAt!==null}};function D(){return E.getCurrentTime()}class P{static testProp(l){if(!P.docStyle)return l[0];for(let p=0;p<l.length;p++)if(l[p]in P.docStyle)return l[p];return l[0]}static create(l,p,C){const S=window.document.createElement(l);return p!==void 0&&(S.className=p),C&&C.appendChild(S),S}static createNS(l,p){return window.document.createElementNS(l,p)}static disableDrag(){P.docStyle&&P.selectProp&&(P.userSelect=P.docStyle[P.selectProp],P.docStyle[P.selectProp]="none")}static enableDrag(){P.docStyle&&P.selectProp&&(P.docStyle[P.selectProp]=P.userSelect)}static setTransform(l,p){l.style[P.transformProp]=p}static addEventListener(l,p,C,S={}){l.addEventListener(p,C,"passive"in S?S:S.capture)}static removeEventListener(l,p,C,S={}){l.removeEventListener(p,C,"passive"in S?S:S.capture)}static suppressClickInternal(l){l.preventDefault(),l.stopPropagation(),window.removeEventListener("click",P.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",P.suppressClickInternal,!0),window.setTimeout((()=>{window.removeEventListener("click",P.suppressClickInternal,!0)}),0)}static getScale(l){const p=l.getBoundingClientRect();return{x:p.width/l.offsetWidth||1,y:p.height/l.offsetHeight||1,boundingClientRect:p}}static getPoint(l,p,C){const S=p.boundingClientRect;return new a.P((C.clientX-S.left)/p.x-l.clientLeft,(C.clientY-S.top)/p.y-l.clientTop)}static mousePos(l,p){const C=P.getScale(l);return P.getPoint(l,C,p)}static touchPos(l,p){const C=[],S=P.getScale(l);for(let O=0;O<p.length;O++)C.push(P.getPoint(l,S,p[O]));return C}static mouseButton(l){return l.button}static remove(l){l.parentNode&&l.parentNode.removeChild(l)}static sanitize(l){const p=new DOMParser().parseFromString(l,"text/html").body||document.createElement("body"),C=p.querySelectorAll("script");for(const S of C)S.remove();return P.clean(p),p.innerHTML}static isPossiblyDangerous(l,p){const C=p.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(l)||!C.includes("javascript:")&&!C.includes("data:"))||!!l.startsWith("on")||void 0}static clean(l){const p=l.children;for(const C of p)P.removeAttributes(C),P.clean(C)}static removeAttributes(l){for(const{name:p,value:C}of l.attributes)P.isPossiblyDangerous(p,C)&&l.removeAttribute(p)}}P.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,P.selectProp=P.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),P.transformProp=P.testProp(["transform","WebkitTransform"]);const F={supported:!1,testSupport:function(B){!V&&q&&(H?X(B):W=B)}};let W,q,V=!1,H=!1;function X(B){const l=B.createTexture();B.bindTexture(B.TEXTURE_2D,l);try{if(B.texImage2D(B.TEXTURE_2D,0,B.RGBA,B.RGBA,B.UNSIGNED_BYTE,q),B.isContextLost())return;F.supported=!0}catch{}B.deleteTexture(l),V=!0}var Z;typeof document<"u"&&(q=document.createElement("img"),q.onload=()=>{W&&X(W),W=null,H=!0},q.onerror=()=>{V=!0,W=null},q.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),(function(B){let l,p,C,S;B.resetRequestQueue=()=>{l=[],p=0,C=0,S={}},B.addThrottleControl=Y=>{const re=C++;return S[re]=Y,re},B.removeThrottleControl=Y=>{delete S[Y],U()},B.getImage=(Y,re,ae=!0)=>new Promise(((ge,pe)=>{F.supported&&(Y.headers||(Y.headers={}),Y.headers.accept="image/webp,*/*"),a.e(Y,{type:"image"}),l.push({abortController:re,requestParameters:Y,supportImageRefresh:ae,state:"queued",onError:we=>{pe(we)},onSuccess:we=>{ge(we)}}),U()}));const O=Y=>a._(this,void 0,void 0,(function*(){Y.state="running";const{requestParameters:re,supportImageRefresh:ae,onError:ge,onSuccess:pe,abortController:we}=Y,Fe=ae===!1&&!a.i(self)&&!a.g(re.url)&&(!re.headers||Object.keys(re.headers).reduce(((et,rt)=>et&&rt==="accept"),!0));p++;const He=Fe?N(re,we):a.m(re,we);try{const et=yield He;delete Y.abortController,Y.state="completed",et.data instanceof HTMLImageElement||a.b(et.data)?pe(et):et.data&&pe({data:yield(Ze=et.data,typeof createImageBitmap=="function"?a.f(Ze):a.h(Ze)),cacheControl:et.cacheControl,expires:et.expires})}catch(et){delete Y.abortController,ge(et)}finally{p--,U()}var Ze})),U=()=>{const Y=(()=>{for(const re of Object.keys(S))if(S[re]())return!0;return!1})()?a.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:a.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let re=p;re<Y&&l.length>0;re++){const ae=l.shift();ae.abortController.signal.aborted?re--:O(ae)}},N=(Y,re)=>new Promise(((ae,ge)=>{const pe=new Image,we=Y.url,Fe=Y.credentials;Fe&&Fe==="include"?pe.crossOrigin="use-credentials":(Fe&&Fe==="same-origin"||!a.d(we))&&(pe.crossOrigin="anonymous"),re.signal.addEventListener("abort",(()=>{pe.src="",ge(a.c())})),pe.fetchPriority="high",pe.onload=()=>{pe.onerror=pe.onload=null,ae({data:pe})},pe.onerror=()=>{pe.onerror=pe.onload=null,re.signal.aborted||ge(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},pe.src=we}))})(Z||(Z={})),Z.resetRequestQueue();class G{constructor(l){this._transformRequestFn=l??null}transformRequest(l,p){return this._transformRequestFn&&this._transformRequestFn(l,p)||{url:l}}setTransformRequest(l){this._transformRequestFn=l}}function oe(B){const l=[];if(typeof B=="string")l.push({id:"default",url:B});else if(B&&B.length>0){const p=[];for(const{id:C,url:S}of B){const O=`${C}${S}`;p.indexOf(O)===-1&&(p.push(O),l.push({id:C,url:S}))}}return l}function ue(B,l,p){try{const C=new URL(B);return C.pathname+=`${l}${p}`,C.toString()}catch{throw new Error(`Invalid sprite URL "${B}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}function xe(B){const{userImage:l}=B;return!!(l&&l.render&&l.render())&&(B.data.replace(new Uint8Array(l.data.buffer)),!0)}class me extends a.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new a.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(l){if(this.loaded!==l&&(this.loaded=l,l)){for(const{ids:p,promiseResolve:C}of this.requestors)C(this._getImagesForIds(p));this.requestors=[]}}getImage(l){const p=this.images[l];if(p&&!p.data&&p.spriteData){const C=p.spriteData;p.data=new a.R({width:C.width,height:C.height},C.context.getImageData(C.x,C.y,C.width,C.height).data),p.spriteData=null}return p}addImage(l,p){if(this.images[l])throw new Error(`Image id ${l} already exist, use updateImage instead`);this._validate(l,p)&&(this.images[l]=p)}_validate(l,p){let C=!0;const S=p.data||p.spriteData;return this._validateStretch(p.stretchX,S&&S.width)||(this.fire(new a.k(new Error(`Image "${l}" has invalid "stretchX" value`))),C=!1),this._validateStretch(p.stretchY,S&&S.height)||(this.fire(new a.k(new Error(`Image "${l}" has invalid "stretchY" value`))),C=!1),this._validateContent(p.content,p)||(this.fire(new a.k(new Error(`Image "${l}" has invalid "content" value`))),C=!1),C}_validateStretch(l,p){if(!l)return!0;let C=0;for(const S of l){if(S[0]<C||S[1]<S[0]||p<S[1])return!1;C=S[1]}return!0}_validateContent(l,p){if(!l)return!0;if(l.length!==4)return!1;const C=p.spriteData,S=C&&C.width||p.data.width,O=C&&C.height||p.data.height;return!(l[0]<0||S<l[0]||l[1]<0||O<l[1]||l[2]<0||S<l[2]||l[3]<0||O<l[3]||l[2]<l[0]||l[3]<l[1])}updateImage(l,p,C=!0){const S=this.getImage(l);if(C&&(S.data.width!==p.data.width||S.data.height!==p.data.height))throw new Error(`size mismatch between old image (${S.data.width}x${S.data.height}) and new image (${p.data.width}x${p.data.height}).`);p.version=S.version+1,this.images[l]=p,this.updatedImages[l]=!0}removeImage(l){const p=this.images[l];delete this.images[l],delete this.patterns[l],p.userImage&&p.userImage.onRemove&&p.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(l){return new Promise(((p,C)=>{let S=!0;if(!this.isLoaded())for(const O of l)this.images[O]||(S=!1);this.isLoaded()||S?p(this._getImagesForIds(l)):this.requestors.push({ids:l,promiseResolve:p})}))}_getImagesForIds(l){const p={};for(const C of l){let S=this.getImage(C);S||(this.fire(new a.l("styleimagemissing",{id:C})),S=this.getImage(C)),S?p[C]={data:S.data.clone(),pixelRatio:S.pixelRatio,sdf:S.sdf,version:S.version,stretchX:S.stretchX,stretchY:S.stretchY,content:S.content,textFitWidth:S.textFitWidth,textFitHeight:S.textFitHeight,hasRenderCallback:!!(S.userImage&&S.userImage.render)}:a.w(`Image "${C}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return p}getPixelSize(){const{width:l,height:p}=this.atlasImage;return{width:l,height:p}}getPattern(l){const p=this.patterns[l],C=this.getImage(l);if(!C)return null;if(p&&p.position.version===C.version)return p.position;if(p)p.position.version=C.version;else{const S={w:C.data.width+2,h:C.data.height+2,x:0,y:0},O=new a.I(S,C);this.patterns[l]={bin:S,position:O}}return this._updatePatternAtlas(),this.patterns[l].position}bind(l){const p=l.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new a.T(l,this.atlasImage,p.RGBA),this.atlasTexture.bind(p.LINEAR,p.CLAMP_TO_EDGE)}_updatePatternAtlas(){const l=[];for(const O in this.patterns)l.push(this.patterns[O].bin);const{w:p,h:C}=a.p(l),S=this.atlasImage;S.resize({width:p||1,height:C||1});for(const O in this.patterns){const{bin:U}=this.patterns[O],N=U.x+1,Y=U.y+1,re=this.getImage(O).data,ae=re.width,ge=re.height;a.R.copy(re,S,{x:0,y:0},{x:N,y:Y},{width:ae,height:ge}),a.R.copy(re,S,{x:0,y:ge-1},{x:N,y:Y-1},{width:ae,height:1}),a.R.copy(re,S,{x:0,y:0},{x:N,y:Y+ge},{width:ae,height:1}),a.R.copy(re,S,{x:ae-1,y:0},{x:N-1,y:Y},{width:1,height:ge}),a.R.copy(re,S,{x:0,y:0},{x:N+ae,y:Y},{width:1,height:ge})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(l){for(const p of l){if(this.callbackDispatchedThisFrame[p])continue;this.callbackDispatchedThisFrame[p]=!0;const C=this.getImage(p);C||a.w(`Image with ID: "${p}" was not found`),xe(C)&&this.updateImage(p,C)}}}const Ie=1e20;function Me(B,l,p,C,S,O,U,N,Y){for(let re=l;re<l+C;re++)Te(B,p*O+re,O,S,U,N,Y);for(let re=p;re<p+S;re++)Te(B,re*O+l,1,C,U,N,Y)}function Te(B,l,p,C,S,O,U){O[0]=0,U[0]=-Ie,U[1]=Ie,S[0]=B[l];for(let N=1,Y=0,re=0;N<C;N++){S[N]=B[l+N*p];const ae=N*N;do{const ge=O[Y];re=(S[N]-S[ge]+ae-ge*ge)/(N-ge)/2}while(re<=U[Y]&&--Y>-1);Y++,O[Y]=N,U[Y]=re,U[Y+1]=Ie}for(let N=0,Y=0;N<C;N++){for(;U[Y+1]<N;)Y++;const re=O[Y],ae=N-re;B[l+N*p]=S[re]+ae*ae}}const je=a.v.layout_symbol["text-font"].default.join(",");class Ee{constructor(l,p,C){this.requestManager=l,this.localIdeographFontFamily=p,this.entries={},this.lang=C}setURL(l){this.url=l}getGlyphs(l){return a._(this,void 0,void 0,(function*(){const p=[];for(const O in l)for(const U of l[O])p.push(this._getAndCacheGlyphsPromise(O,U));const C=yield Promise.all(p),S={};for(const{stack:O,id:U,glyph:N}of C)S[O]||(S[O]={}),S[O][U]=N&&{id:N.id,bitmap:N.bitmap.clone(),metrics:N.metrics};return S}))}_getAndCacheGlyphsPromise(l,p){return a._(this,void 0,void 0,(function*(){let C=this.entries[l];C||(C=this.entries[l]={glyphs:{},requests:{},ranges:{}});let S=C.glyphs[p];return S!==void 0?{stack:l,id:p,glyph:S}:!this.url||this._charUsesLocalIdeographFontFamily(p)?(S=C.glyphs[p]=this._drawGlyph(C,l,p),{stack:l,id:p,glyph:S}):yield this._downloadAndCacheRangePromise(l,p)}))}_downloadAndCacheRangePromise(l,p){return a._(this,void 0,void 0,(function*(){const C=Math.floor(p/256);if(256*C>65535)throw new Error("glyphs > 65535 not supported");const S=this.entries[l];if(S.ranges[C])return{stack:l,id:p,glyph:null};if(!S.requests[C]){const O=Ee.loadGlyphRange(l,C,this.url,this.requestManager);S.requests[C]=O}try{const O=yield S.requests[C];for(const U in O)S.glyphs[+U]=O[+U];return S.ranges[C]=!0,{stack:l,id:p,glyph:O[p]||null}}catch(O){const U=S.glyphs[p]=this._drawGlyph(S,l,p);return this._warnOnMissingGlyphRange(U,C,p,O),{stack:l,id:p,glyph:U}}}))}_warnOnMissingGlyphRange(l,p,C,S){const O=256*p,U=O+255,N=C.toString(16).padStart(4,"0").toUpperCase();a.w(`Unable to load glyph range ${p}, ${O}-${U}. Rendering codepoint U+${N} locally instead. ${S}`)}_charUsesLocalIdeographFontFamily(l){return!!this.localIdeographFontFamily&&(new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(l))||a.u["CJK Unified Ideographs"](l)||a.u["Hangul Syllables"](l)||a.u.Hiragana(l)||a.u.Katakana(l)||a.u["CJK Symbols and Punctuation"](l)||a.u["Halfwidth and Fullwidth Forms"](l))}_drawGlyph(l,p,C){const S=p===je&&this.localIdeographFontFamily!==""&&this._charUsesLocalIdeographFontFamily(C),O=S?"ideographTinySDF":"tinySDF";l[O]||(l[O]=this._createTinySDF(S?this.localIdeographFontFamily:p));const U=l[O].draw(String.fromCharCode(C));return{id:C,bitmap:new a.q({width:U.width||60,height:U.height||60},U.data),metrics:{width:U.glyphWidth/2||24,height:U.glyphHeight/2||24,left:U.glyphLeft/2+.5||0,top:U.glyphTop/2-27.5||-8,advance:U.glyphAdvance/2||24,isDoubleResolution:!0}}}_createTinySDF(l){const p=l?l.split(","):[];p.push("sans-serif");const C=p.map((S=>/[-\w]+/.test(S)?S:`'${CSS.escape(S)}'`)).join(",");return new Ee.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:C,fontWeight:this._fontWeight(p[0]),fontStyle:this._fontStyle(p[0]),lang:this.lang})}_fontStyle(l){return/italic/i.test(l)?"italic":/oblique/i.test(l)?"oblique":"normal"}_fontWeight(l){const p={thin:100,hairline:100,"extra light":200,"ultra light":200,light:300,normal:400,regular:400,medium:500,semibold:600,demibold:600,bold:700,"extra bold":800,"ultra bold":800,black:900,heavy:900,"extra black":950,"ultra black":950};let C;for(const[S,O]of Object.entries(p))new RegExp(`\\b${S}\\b`,"i").test(l)&&(C=`${O}`);return C}}Ee.loadGlyphRange=function(B,l,p,C){return a._(this,void 0,void 0,(function*(){const S=256*l,O=S+255,U=C.transformRequest(p.replace("{fontstack}",B).replace("{range}",`${S}-${O}`),"Glyphs"),N=yield a.n(U,new AbortController);if(!N||!N.data)throw new Error(`Could not load glyph range. range: ${l}, ${S}-${O}`);const Y={};for(const re of a.o(N.data))Y[re.id]=re;return Y}))},Ee.TinySDF=class{constructor({fontSize:B=24,buffer:l=3,radius:p=8,cutoff:C=.25,fontFamily:S="sans-serif",fontWeight:O="normal",fontStyle:U="normal",lang:N=null}={}){this.buffer=l,this.cutoff=C,this.radius=p,this.lang=N;const Y=this.size=B+4*l,re=this._createCanvas(Y),ae=this.ctx=re.getContext("2d",{willReadFrequently:!0});ae.font=`${U} ${O} ${B}px ${S}`,ae.textBaseline="alphabetic",ae.textAlign="left",ae.fillStyle="black",this.gridOuter=new Float64Array(Y*Y),this.gridInner=new Float64Array(Y*Y),this.f=new Float64Array(Y),this.z=new Float64Array(Y+1),this.v=new Uint16Array(Y)}_createCanvas(B){const l=document.createElement("canvas");return l.width=l.height=B,l}draw(B){const{width:l,actualBoundingBoxAscent:p,actualBoundingBoxDescent:C,actualBoundingBoxLeft:S,actualBoundingBoxRight:O}=this.ctx.measureText(B),U=Math.ceil(p),N=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(O-S))),Y=Math.min(this.size-this.buffer,U+Math.ceil(C)),re=N+2*this.buffer,ae=Y+2*this.buffer,ge=Math.max(re*ae,0),pe=new Uint8ClampedArray(ge),we={data:pe,width:re,height:ae,glyphWidth:N,glyphHeight:Y,glyphTop:U,glyphLeft:0,glyphAdvance:l};if(N===0||Y===0)return we;const{ctx:Fe,buffer:He,gridInner:Ze,gridOuter:et}=this;this.lang&&(Fe.lang=this.lang),Fe.clearRect(He,He,N,Y),Fe.fillText(B,He,He+U);const rt=Fe.getImageData(He,He,N,Y);et.fill(Ie,0,ge),Ze.fill(0,0,ge);for(let lt=0;lt<Y;lt++)for(let nt=0;nt<N;nt++){const ht=rt.data[4*(lt*N+nt)+3]/255;if(ht===0)continue;const bt=(lt+He)*re+nt+He;if(ht===1)et[bt]=0,Ze[bt]=Ie;else{const st=.5-ht;et[bt]=st>0?st*st:0,Ze[bt]=st<0?st*st:0}}Me(et,0,0,re,ae,re,this.f,this.v,this.z),Me(Ze,He,He,N,Y,re,this.f,this.v,this.z);for(let lt=0;lt<ge;lt++){const nt=Math.sqrt(et[lt])-Math.sqrt(Ze[lt]);pe[lt]=Math.round(255-255*(nt/this.radius+this.cutoff))}return we}};class qe{constructor(){this.specification=a.t.light.position}possiblyEvaluate(l,p){return a.C(l.expression.evaluate(p))}interpolate(l,p,C){return{x:a.F.number(l.x,p.x,C),y:a.F.number(l.y,p.y,C),z:a.F.number(l.z,p.z,C)}}}let At;class gt extends a.E{constructor(l){super(),At=At||new a.r({anchor:new a.D(a.t.light.anchor),position:new qe,color:new a.D(a.t.light.color),intensity:new a.D(a.t.light.intensity)}),this._transitionable=new a.x(At,void 0),this.setLight(l),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(l,p={}){if(!this._validate(a.y,l,p))for(const C in l){const S=l[C];C.endsWith("-transition")?this._transitionable.setTransition(C.slice(0,-11),S):this._transitionable.setValue(C,S)}}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}_validate(l,p,C){return(!C||C.validate!==!1)&&a.z(this,l.call(a.B,{value:p,style:{glyphs:!0,sprite:!0},styleSpec:a.t}))}}const Le=new a.r({"sky-color":new a.D(a.t.sky["sky-color"]),"horizon-color":new a.D(a.t.sky["horizon-color"]),"fog-color":new a.D(a.t.sky["fog-color"]),"fog-ground-blend":new a.D(a.t.sky["fog-ground-blend"]),"horizon-fog-blend":new a.D(a.t.sky["horizon-fog-blend"]),"sky-horizon-blend":new a.D(a.t.sky["sky-horizon-blend"]),"atmosphere-blend":new a.D(a.t.sky["atmosphere-blend"])});class Re extends a.E{constructor(l){super(),this._transitionable=new a.x(Le,void 0),this.setSky(l),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new a.G(0))}setSky(l,p={}){if(!this._validate(a.H,l,p)){l||(l={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const C in l){const S=l[C];C.endsWith("-transition")?this._transitionable.setTransition(C.slice(0,-11),S):this._transitionable.setValue(C,S)}}}getSky(){return this._transitionable.serialize()}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}_validate(l,p,C={}){return C?.validate!==!1&&a.z(this,l.call(a.B,a.e({value:p,style:{glyphs:!0,sprite:!0},styleSpec:a.t})))}calculateFogBlendOpacity(l){return l<60?0:l<70?(l-60)/10:1}}class Ge{constructor(l,p){this.width=l,this.height=p,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(l,p){const C=l.join(",")+String(p);return this.dashEntry[C]||(this.dashEntry[C]=this.addDash(l,p)),this.dashEntry[C]}getDashRanges(l,p,C){const S=[];let O=l.length%2==1?-l[l.length-1]*C:0,U=l[0]*C,N=!0;S.push({left:O,right:U,isDash:N,zeroLength:l[0]===0});let Y=l[0];for(let re=1;re<l.length;re++){N=!N;const ae=l[re];O=Y*C,Y+=ae,U=Y*C,S.push({left:O,right:U,isDash:N,zeroLength:ae===0})}return S}addRoundDash(l,p,C){const S=p/2;for(let O=-C;O<=C;O++){const U=this.width*(this.nextRow+C+O);let N=0,Y=l[N];for(let re=0;re<this.width;re++){re/Y.right>1&&(Y=l[++N]);const ae=Math.abs(re-Y.left),ge=Math.abs(re-Y.right),pe=Math.min(ae,ge);let we;const Fe=O/C*(S+1);if(Y.isDash){const He=S-Math.abs(Fe);we=Math.sqrt(pe*pe+He*He)}else we=S-Math.sqrt(pe*pe+Fe*Fe);this.data[U+re]=Math.max(0,Math.min(255,we+128))}}}addRegularDash(l){for(let N=l.length-1;N>=0;--N){const Y=l[N],re=l[N+1];Y.zeroLength?l.splice(N,1):re&&re.isDash===Y.isDash&&(re.left=Y.left,l.splice(N,1))}const p=l[0],C=l[l.length-1];p.isDash===C.isDash&&(p.left=C.left-this.width,C.right=p.right+this.width);const S=this.width*this.nextRow;let O=0,U=l[O];for(let N=0;N<this.width;N++){N/U.right>1&&(U=l[++O]);const Y=Math.abs(N-U.left),re=Math.abs(N-U.right),ae=Math.min(Y,re);this.data[S+N]=Math.max(0,Math.min(255,(U.isDash?ae:-ae)+128))}}addDash(l,p){const C=p?7:0,S=2*C+1;if(this.nextRow+S>this.height)return a.w("LineAtlas out of space"),null;let O=0;for(let N=0;N<l.length;N++)O+=l[N];if(O!==0){const N=this.width/O,Y=this.getDashRanges(l,this.width,N);p?this.addRoundDash(Y,N,C):this.addRegularDash(Y)}const U={y:this.nextRow+C,height:2*C,width:O};return this.nextRow+=S,this.dirty=!0,U}bind(l){const p=l.gl;this.texture?(p.bindTexture(p.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,p.texSubImage2D(p.TEXTURE_2D,0,0,0,this.width,this.height,p.ALPHA,p.UNSIGNED_BYTE,this.data))):(this.texture=p.createTexture(),p.bindTexture(p.TEXTURE_2D,this.texture),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.REPEAT),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.REPEAT),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.LINEAR),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.LINEAR),p.texImage2D(p.TEXTURE_2D,0,p.ALPHA,this.width,this.height,0,p.ALPHA,p.UNSIGNED_BYTE,this.data))}}const De="maplibre_preloaded_worker_pool";class _t{constructor(){this.active={}}acquire(l){if(!this.workers)for(this.workers=[];this.workers.length<_t.workerCount;)this.workers.push(new Worker(a.a.WORKER_URL));return this.active[l]=!0,this.workers.slice()}release(l){delete this.active[l],this.numActive()===0&&(this.workers.forEach((p=>{p.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[De]}numActive(){return Object.keys(this.active).length}}const at=Math.floor(x.hardwareConcurrency/2);let Tt,Kt;function Ke(){return Tt||(Tt=new _t),Tt}_t.workerCount=a.J(globalThis)?Math.max(Math.min(at,3),1):1;class Oe{constructor(l,p){this.workerPool=l,this.actors=[],this.currentActor=0,this.id=p;const C=this.workerPool.acquire(p);for(let S=0;S<C.length;S++){const O=new a.K(C[S],p);O.name=`Worker ${S}`,this.actors.push(O)}if(!this.actors.length)throw new Error("No actors found")}broadcast(l,p){const C=[];for(const S of this.actors)C.push(S.sendAsync({type:l,data:p}));return Promise.all(C)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(l=!0){this.actors.forEach((p=>{p.remove()})),this.actors=[],l&&this.workerPool.release(this.id)}registerMessageHandler(l,p){for(const C of this.actors)C.registerMessageHandler(l,p)}}function Be(){return Kt||(Kt=new Oe(Ke(),a.L),Kt.registerMessageHandler("GR",((B,l,p)=>a.m(l,p)))),Kt}function Ve(B,l){const p=a.M();return a.N(p,p,[1,1,0]),a.O(p,p,[.5*B.width,.5*B.height,1]),B.calculatePosMatrix?a.Q(p,p,B.calculatePosMatrix(l.toUnwrapped())):p}function yt(B,l,p,C,S,O,U){var N;const Y=(function(pe,we,Fe){if(pe)for(const He of pe){const Ze=we[He];if(Ze&&Ze.source===Fe&&Ze.type==="fill-extrusion")return!0}else for(const He in we){const Ze=we[He];if(Ze.source===Fe&&Ze.type==="fill-extrusion")return!0}return!1})((N=S?.layers)!==null&&N!==void 0?N:null,l,B.id),re=O.maxPitchScaleFactor(),ae=B.tilesIn(C,re,Y);ae.sort(ft);const ge=[];for(const pe of ae)ge.push({wrappedTileID:pe.tileID.wrapped().key,queryResults:pe.tile.queryRenderedFeatures(l,p,B.getState(),pe.queryGeometry,pe.cameraQueryGeometry,pe.scale,S,O,re,Ve(O,pe.tileID),U?(we,Fe)=>U(pe.tileID,we,Fe):void 0)});return(function(pe,we){for(const Fe in pe)for(const He of pe[Fe])Ct(He,we);return pe})((function(pe){const we={},Fe={};for(const He of pe){const Ze=He.queryResults,et=He.wrappedTileID,rt=Fe[et]=Fe[et]||{};for(const lt in Ze){const nt=Ze[lt],ht=rt[lt]=rt[lt]||{},bt=we[lt]=we[lt]||[];for(const st of nt)ht[st.featureIndex]||(ht[st.featureIndex]=!0,bt.push(st))}}return we})(ge),B)}function ft(B,l){const p=B.tileID,C=l.tileID;return p.overscaledZ-C.overscaledZ||p.canonical.y-C.canonical.y||p.wrap-C.wrap||p.canonical.x-C.canonical.x}function Ct(B,l){const p=B.feature,C=l.getFeatureState(p.layer["source-layer"],p.id);p.source=p.layer.source,p.layer["source-layer"]&&(p.sourceLayer=p.layer["source-layer"]),p.state=C}function Lt(B,l,p){return a._(this,void 0,void 0,(function*(){let C=B;if(B.url?C=(yield a.j(l.transformRequest(B.url,"Source"),p)).data:yield x.frameAsync(p),!C)return null;const S=a.S(a.e(C,B),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in C&&C.vector_layers&&(S.vectorLayerIds=C.vector_layers.map((O=>O.id))),S}))}class kt{constructor(l,p){l&&(p?this.setSouthWest(l).setNorthEast(p):Array.isArray(l)&&(l.length===4?this.setSouthWest([l[0],l[1]]).setNorthEast([l[2],l[3]]):this.setSouthWest(l[0]).setNorthEast(l[1])))}setNorthEast(l){return this._ne=l instanceof a.U?new a.U(l.lng,l.lat):a.U.convert(l),this}setSouthWest(l){return this._sw=l instanceof a.U?new a.U(l.lng,l.lat):a.U.convert(l),this}extend(l){const p=this._sw,C=this._ne;let S,O;if(l instanceof a.U)S=l,O=l;else{if(!(l instanceof kt))return Array.isArray(l)?l.length===4||l.every(Array.isArray)?this.extend(kt.convert(l)):this.extend(a.U.convert(l)):l&&("lng"in l||"lon"in l)&&"lat"in l?this.extend(a.U.convert(l)):this;if(S=l._sw,O=l._ne,!S||!O)return this}return p||C?(p.lng=Math.min(S.lng,p.lng),p.lat=Math.min(S.lat,p.lat),C.lng=Math.max(O.lng,C.lng),C.lat=Math.max(O.lat,C.lat)):(this._sw=new a.U(S.lng,S.lat),this._ne=new a.U(O.lng,O.lat)),this}getCenter(){return new a.U((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new a.U(this.getWest(),this.getNorth())}getSouthEast(){return new a.U(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(l){const{lng:p,lat:C}=a.U.convert(l);let S=this._sw.lng<=p&&p<=this._ne.lng;return this._sw.lng>this._ne.lng&&(S=this._sw.lng>=p&&p>=this._ne.lng),this._sw.lat<=C&&C<=this._ne.lat&&S}intersects(l){if((l=kt.convert(l)).getNorth()<this.getSouth()||l.getSouth()>this.getNorth())return!1;const p=a.V(this.getWest(),-180,180),C=a.V(this.getEast(),-180,180),S=a.V(l.getWest(),-180,180),O=a.V(l.getEast(),-180,180),U=p>C,N=S>O;return!(!U||!N)||(U?O>=p||S<=C:N?C>=S||p<=O:!(S>C||O<p))}static convert(l){return l instanceof kt?l:l&&new kt(l)}static fromLngLat(l,p=0){const C=360*p/40075017,S=C/Math.cos(Math.PI/180*l.lat);return new kt(new a.U(l.lng-S,l.lat-C),new a.U(l.lng+S,l.lat+C))}adjustAntiMeridian(){const l=new a.U(this._sw.lng,this._sw.lat),p=new a.U(this._ne.lng,this._ne.lat);return new kt(l,l.lng>p.lng?new a.U(p.lng+360,p.lat):p)}}class an{constructor(l,p,C){this.bounds=kt.convert(this.validateBounds(l)),this.minzoom=p||0,this.maxzoom=C||24}validateBounds(l){return Array.isArray(l)&&l.length===4?[Math.max(-180,l[0]),Math.max(-90,l[1]),Math.min(180,l[2]),Math.min(90,l[3])]:[-180,-90,180,90]}contains(l){const p=Math.pow(2,l.z),C=Math.floor(a.X(this.bounds.getWest())*p),S=Math.floor(a.W(this.bounds.getNorth())*p),O=Math.ceil(a.X(this.bounds.getEast())*p),U=Math.ceil(a.W(this.bounds.getSouth())*p);return l.x>=C&&l.x<O&&l.y>=S&&l.y<U}}class Hn extends a.E{constructor(l,p,C,S){if(super(),this.id=l,this.dispatcher=C,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.e(this,a.S(p,["url","scheme","tileSize","promoteId"])),this._options=a.e({type:"vector"},p),this._collectResourceTiming=p.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(S)}load(){return a._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const l=yield Lt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.tileManagers[this.id].clearTiles(),l&&(a.e(this,l),l.bounds&&(this.tileBounds=new an(l.bounds,this.minzoom,this.maxzoom)),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.l("data",{dataType:"source",sourceDataType:"content"})))}catch(l){this._tileJSONRequest=null,this._loaded=!0,this.fire(new a.k(l))}}))}loaded(){return this._loaded}hasTile(l){return!this.tileBounds||this.tileBounds.contains(l.canonical)}onAdd(l){this.map=l,this.load()}setSourceProperty(l){this._tileJSONRequest&&this._tileJSONRequest.abort(),l(),this.load()}setTiles(l){return this.setSourceProperty((()=>{this._options.tiles=l})),this}setUrl(l){return this.setSourceProperty((()=>{this.url=l,this._options.url=l})),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return a.e({},this._options)}loadTile(l){return a._(this,void 0,void 0,(function*(){const p=l.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),C={request:this.map._requestManager.transformRequest(p,"Tile"),uid:l.uid,tileID:l.tileID,zoom:l.tileID.overscaledZ,tileSize:this.tileSize*l.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};C.request.collectResourceTiming=this._collectResourceTiming;let S="RT";if(l.actor&&l.state!=="expired"){if(l.state==="loading")return new Promise(((O,U)=>{l.reloadPromise={resolve:O,reject:U}}))}else l.actor=this.dispatcher.getActor(),S="LT";l.abortController=new AbortController;try{const O=yield l.actor.sendAsync({type:S,data:C},l.abortController);if(delete l.abortController,l.aborted)return;this._afterTileLoadWorkerResponse(l,O)}catch(O){if(delete l.abortController,l.aborted)return;if(O&&O.status!==404)throw O;this._afterTileLoadWorkerResponse(l,null)}}))}_afterTileLoadWorkerResponse(l,p){if(p&&p.resourceTiming&&(l.resourceTiming=p.resourceTiming),p&&this.map._refreshExpiredTiles&&l.setExpiryData(p),l.loadVectorData(p,this.map.painter),l.reloadPromise){const C=l.reloadPromise;l.reloadPromise=null,this.loadTile(l).then(C.resolve).catch(C.reject)}}abortTile(l){return a._(this,void 0,void 0,(function*(){l.abortController&&(l.abortController.abort(),delete l.abortController),l.actor&&(yield l.actor.sendAsync({type:"AT",data:{uid:l.uid,type:this.type,source:this.id}}))}))}unloadTile(l){return a._(this,void 0,void 0,(function*(){l.unloadVectorData(),l.actor&&(yield l.actor.sendAsync({type:"RMT",data:{uid:l.uid,type:this.type,source:this.id}}))}))}hasTransition(){return!1}}class Wn extends a.E{constructor(l,p,C,S){super(),this.id=l,this.dispatcher=C,this.setEventedParent(S),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=a.e({type:"raster"},p),a.e(this,a.S(p,["url","scheme","tileSize"]))}load(){return a._(this,arguments,void 0,(function*(l=!1){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const p=yield Lt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,p&&(a.e(this,p),p.bounds&&(this.tileBounds=new an(p.bounds,this.minzoom,this.maxzoom)),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:l})))}catch(p){this._tileJSONRequest=null,this._loaded=!0,this.fire(new a.k(p))}}))}loaded(){return this._loaded}onAdd(l){this.map=l,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(l){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),l(),this.load(!0)}setTiles(l){return this.setSourceProperty((()=>{this._options.tiles=l})),this}setUrl(l){return this.setSourceProperty((()=>{this.url=l,this._options.url=l})),this}serialize(){return a.e({},this._options)}hasTile(l){return!this.tileBounds||this.tileBounds.contains(l.canonical)}loadTile(l){return a._(this,void 0,void 0,(function*(){const p=l.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);l.abortController=new AbortController;try{const C=yield Z.getImage(this.map._requestManager.transformRequest(p,"Tile"),l.abortController,this.map._refreshExpiredTiles);if(delete l.abortController,l.aborted)return void(l.state="unloaded");if(C&&C.data){this.map._refreshExpiredTiles&&(C.cacheControl||C.expires)&&l.setExpiryData({cacheControl:C.cacheControl,expires:C.expires});const S=this.map.painter.context,O=S.gl,U=C.data;l.texture=this.map.painter.getTileTexture(U.width),l.texture?l.texture.update(U,{useMipmap:!0}):(l.texture=new a.T(S,U,O.RGBA,{useMipmap:!0}),l.texture.bind(O.LINEAR,O.CLAMP_TO_EDGE,O.LINEAR_MIPMAP_NEAREST)),l.state="loaded"}}catch(C){if(delete l.abortController,l.aborted)l.state="unloaded";else if(C)throw l.state="errored",C}}))}abortTile(l){return a._(this,void 0,void 0,(function*(){l.abortController&&(l.abortController.abort(),delete l.abortController)}))}unloadTile(l){return a._(this,void 0,void 0,(function*(){l.texture&&this.map.painter.saveTileTexture(l.texture)}))}hasTransition(){return!1}}class _i extends Wn{constructor(l,p,C,S){super(l,p,C,S),this.type="raster-dem",this.maxzoom=22,this._options=a.e({type:"raster-dem"},p),this.encoding=p.encoding||"mapbox",this.redFactor=p.redFactor,this.greenFactor=p.greenFactor,this.blueFactor=p.blueFactor,this.baseShift=p.baseShift}loadTile(l){return a._(this,void 0,void 0,(function*(){const p=l.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),C=this.map._requestManager.transformRequest(p,"Tile");l.neighboringTiles=this._getNeighboringTiles(l.tileID),l.abortController=new AbortController;try{const S=yield Z.getImage(C,l.abortController,this.map._refreshExpiredTiles);if(delete l.abortController,l.aborted)return void(l.state="unloaded");if(S&&S.data){const O=S.data;this.map._refreshExpiredTiles&&(S.cacheControl||S.expires)&&l.setExpiryData({cacheControl:S.cacheControl,expires:S.expires});const U=a.b(O)&&a.Y()?O:yield this.readImageNow(O),N={type:this.type,uid:l.uid,source:this.id,rawImageData:U,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!l.actor||l.state==="expired"){l.actor=this.dispatcher.getActor();const Y=yield l.actor.sendAsync({type:"LDT",data:N});l.dem=Y,l.needsHillshadePrepare=!0,l.needsTerrainPrepare=!0,l.state="loaded"}}}catch(S){if(delete l.abortController,l.aborted)l.state="unloaded";else if(S)throw l.state="errored",S}}))}readImageNow(l){return a._(this,void 0,void 0,(function*(){if(typeof VideoFrame<"u"&&a.Z()){const p=l.width+2,C=l.height+2;try{return new a.R({width:p,height:C},yield a.$(l,-1,-1,p,C))}catch{}}return x.getImageData(l,1)}))}_getNeighboringTiles(l){const p=l.canonical,C=Math.pow(2,p.z),S=(p.x-1+C)%C,O=p.x===0?l.wrap-1:l.wrap,U=(p.x+1+C)%C,N=p.x+1===C?l.wrap+1:l.wrap,Y={};return Y[new a.a0(l.overscaledZ,O,p.z,S,p.y).key]={backfilled:!1},Y[new a.a0(l.overscaledZ,N,p.z,U,p.y).key]={backfilled:!1},p.y>0&&(Y[new a.a0(l.overscaledZ,O,p.z,S,p.y-1).key]={backfilled:!1},Y[new a.a0(l.overscaledZ,l.wrap,p.z,p.x,p.y-1).key]={backfilled:!1},Y[new a.a0(l.overscaledZ,N,p.z,U,p.y-1).key]={backfilled:!1}),p.y+1<C&&(Y[new a.a0(l.overscaledZ,O,p.z,S,p.y+1).key]={backfilled:!1},Y[new a.a0(l.overscaledZ,l.wrap,p.z,p.x,p.y+1).key]={backfilled:!1},Y[new a.a0(l.overscaledZ,N,p.z,U,p.y+1).key]={backfilled:!1}),Y}unloadTile(l){return a._(this,void 0,void 0,(function*(){l.demTexture&&this.map.painter.saveTileTexture(l.demTexture),l.fbo&&(l.fbo.destroy(),delete l.fbo),l.dem&&delete l.dem,delete l.neighboringTiles,l.state="unloaded",l.actor&&(yield l.actor.sendAsync({type:"RDT",data:{type:this.type,uid:l.uid,source:this.id}}))}))}}function Ln(B){return B.type==="GeometryCollection"?B.geometries.map((l=>l.coordinates)).flat(1/0):B.coordinates.flat(1/0)}function Un(B){const l=new kt;let p;switch(B.type){case"FeatureCollection":p=B.features.map((C=>Ln(C.geometry))).flat(1/0);break;case"Feature":p=Ln(B.geometry);break;default:p=Ln(B)}if(p.length==0)return l;for(let C=0;C<p.length-1;C+=2)l.extend([p[C],p[C+1]]);return l}class xn extends a.E{constructor(l,p,C,S){super(),this.id=l,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._isUpdatingWorker=!1,this._pendingWorkerUpdate={data:p.data},this.actor=C.getActor(),this.setEventedParent(S),this._data=p.data,this._options=a.e({},p),this._collectResourceTiming=p.collectResourceTiming,p.maxzoom!==void 0&&(this.maxzoom=p.maxzoom),p.type&&(this.type=p.type),p.attribution&&(this.attribution=p.attribution),this.promoteId=p.promoteId,p.clusterMaxZoom!==void 0&&this.maxzoom<=p.clusterMaxZoom&&a.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${p.clusterMaxZoom}".`),this.workerOptions=a.e({source:this.id,cluster:p.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(p.buffer!==void 0?p.buffer:128),tolerance:this._pixelsToTileUnits(p.tolerance!==void 0?p.tolerance:.375),extent:a.a3,maxZoom:this.maxzoom,lineMetrics:p.lineMetrics||!1,generateId:p.generateId||!1},superclusterOptions:{maxZoom:this._getClusterMaxZoom(p.clusterMaxZoom),minPoints:Math.max(2,p.clusterMinPoints||2),extent:a.a3,radius:this._pixelsToTileUnits(p.clusterRadius||50),log:!1,generateId:p.generateId||!1},clusterProperties:p.clusterProperties,filter:p.filter},p.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_hasPendingWorkerUpdate(){return this._pendingWorkerUpdate.data!==void 0||this._pendingWorkerUpdate.diff!==void 0||this._pendingWorkerUpdate.optionsChanged}_pixelsToTileUnits(l){return l*(a.a3/this.tileSize)}_getClusterMaxZoom(l){const p=l?Math.round(l):this.maxzoom-1;return Number.isInteger(l)||l===void 0||a.w(`Integer expected for option 'clusterMaxZoom': provided value "${l}" rounded to "${p}"`),p}load(){return a._(this,void 0,void 0,(function*(){yield this._updateWorkerData()}))}onAdd(l){this.map=l,this.load()}setData(l){return this._data=l,this._pendingWorkerUpdate={data:l},this._updateWorkerData(),this}updateData(l){return this._pendingWorkerUpdate.diff=a.a4(this._pendingWorkerUpdate.diff,l),this._updateWorkerData(),this}getData(){return a._(this,void 0,void 0,(function*(){const l=a.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:l})}))}getBounds(){return a._(this,void 0,void 0,(function*(){return Un(yield this.getData())}))}setClusterOptions(l){return this.workerOptions.cluster=l.cluster,l.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(l.clusterRadius)),l.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=this._getClusterMaxZoom(l.clusterMaxZoom)),this._pendingWorkerUpdate.optionsChanged=!0,this._updateWorkerData(),this}getClusterExpansionZoom(l){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:l,source:this.id}})}getClusterChildren(l){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:l,source:this.id}})}getClusterLeaves(l,p,C){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:l,limit:p,offset:C}})}_updateWorkerData(){return a._(this,void 0,void 0,(function*(){if(this._isUpdatingWorker)return;if(!this._hasPendingWorkerUpdate())return void a.w(`No pending worker updates for GeoJSONSource ${this.id}.`);const{data:l,diff:p}=this._pendingWorkerUpdate,C=a.e({type:this.type},this.workerOptions);l?(typeof l=="string"?(C.request=this.map._requestManager.transformRequest(x.resolveURL(l),"Source"),C.request.collectResourceTiming=this._collectResourceTiming):C.data=JSON.stringify(l),this._pendingWorkerUpdate.data=void 0):p&&(C.dataDiff=p,this._pendingWorkerUpdate.diff=void 0),this._pendingWorkerUpdate.optionsChanged=void 0,this._isUpdatingWorker=!0,this.fire(new a.l("dataloading",{dataType:"source"}));try{const S=yield this.actor.sendAsync({type:"LD",data:C});if(this._isUpdatingWorker=!1,this._removed||S.abandoned)return void this.fire(new a.l("dataabort",{dataType:"source"}));this._data=S.data;let O=null;S.resourceTiming&&S.resourceTiming[this.id]&&(O=S.resourceTiming[this.id].slice(0));const U={dataType:"source"};this._collectResourceTiming&&O&&O.length>0&&a.e(U,{resourceTiming:O}),this.fire(new a.l("data",Object.assign(Object.assign({},U),{sourceDataType:"metadata"}))),this.fire(new a.l("data",Object.assign(Object.assign({},U),{sourceDataType:"content",shouldReloadTileOptions:this._getShouldReloadTileOptions(p)})))}catch(S){if(this._isUpdatingWorker=!1,this._removed)return void this.fire(new a.l("dataabort",{dataType:"source"}));this.fire(new a.k(S))}finally{this._hasPendingWorkerUpdate()&&this._updateWorkerData()}}))}_getShouldReloadTileOptions(l){if(!l||l.removeAll)return;const{add:p=[],update:C=[],remove:S=[]}=l||{},O=new Set([...C.map((U=>U.id)),...S]);return{nextBounds:[...C.map((U=>U.newGeometry)),...p.map((U=>U.geometry))].map((U=>Un(U))),prevIds:O}}shouldReloadTile(l,{nextBounds:p,prevIds:C}){const S=l.latestFeatureIndex.loadVTLayers();for(let Y=0;Y<l.latestFeatureIndex.featureIndexArray.length;Y++){const re=l.latestFeatureIndex.featureIndexArray.get(Y),ae=S._geojsonTileLayer.feature(re.featureIndex);if(C.has(ae.id))return!0}const{buffer:O,extent:U}=this.workerOptions.geojsonVtOptions,N=(function({x:Y,y:re,z:ae},ge=0){const pe=a.a1((Y-ge)/Math.pow(2,ae)),we=a.a2((re+1+ge)/Math.pow(2,ae)),Fe=a.a1((Y+1+ge)/Math.pow(2,ae)),He=a.a2((re-ge)/Math.pow(2,ae));return new kt([pe,we],[Fe,He])})(l.tileID.canonical,O/U);for(const Y of p)if(N.intersects(Y))return!0;return!1}loaded(){return!this._isUpdatingWorker&&!this._hasPendingWorkerUpdate()}loadTile(l){return a._(this,void 0,void 0,(function*(){const p=l.actor?"RT":"LT";l.actor=this.actor;const C={type:this.type,uid:l.uid,tileID:l.tileID,zoom:l.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};l.abortController=new AbortController;const S=yield this.actor.sendAsync({type:p,data:C},l.abortController);delete l.abortController,l.unloadVectorData(),l.aborted||l.loadVectorData(S,this.map.painter,p==="RT")}))}abortTile(l){return a._(this,void 0,void 0,(function*(){l.abortController&&(l.abortController.abort(),delete l.abortController),l.aborted=!0}))}unloadTile(l){return a._(this,void 0,void 0,(function*(){l.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:l.uid,type:this.type,source:this.id}})}))}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return a.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}class Zn extends a.E{constructor(l,p,C,S){super(),this.flippedWindingOrder=!1,this.id=l,this.dispatcher=C,this.coordinates=p.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(S),this.options=p}load(l){return a._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const p=yield Z.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,p&&p.data&&(this.image=p.data,l&&(this.coordinates=l),this._finishLoading())}catch(p){this._request=null,this._loaded=!0,this.fire(new a.k(p))}}))}loaded(){return this._loaded}updateImage(l){return l.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=l.url,this.load(l.coordinates).finally((()=>{this.texture=null})),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(l){this.map=l,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(l){this.coordinates=l;const p=l.map(a.a5.fromLngLat);var C;return this.tileID=(function(S){const O=a.a6.fromPoints(S),U=O.width(),N=O.height(),Y=Math.max(U,N),re=Math.max(0,Math.floor(-Math.log(Y)/Math.LN2)),ae=Math.pow(2,re);return new a.a8(re,Math.floor((O.minX+O.maxX)/2*ae),Math.floor((O.minY+O.maxY)/2*ae))})(p),this.terrainTileRanges=this._getOverlappingTileRanges(p),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=p.map((S=>this.tileID.getTilePoint(S)._round())),this.flippedWindingOrder=((C=this.tileCoords)[1].x-C[0].x)*(C[2].y-C[0].y)-(C[1].y-C[0].y)*(C[2].x-C[0].x)<0,this.fire(new a.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const l=this.map.painter.context,p=l.gl;this.texture||(this.texture=new a.T(l,this.image,p.RGBA),this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE));let C=!1;for(const S in this.tiles){const O=this.tiles[S];O.state!=="loaded"&&(O.state="loaded",O.texture=this.texture,C=!0)}C&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(l){return a._(this,void 0,void 0,(function*(){this.tileID&&this.tileID.equals(l.tileID.canonical)?(this.tiles[String(l.tileID.wrap)]=l,l.buckets={}):l.state="errored"}))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(l){const{minX:p,minY:C,maxX:S,maxY:O}=a.a6.fromPoints(l),U={};for(let N=0;N<=a.a7;N++){const Y=Math.pow(2,N),re=Math.floor(p*Y),ae=Math.floor(C*Y),ge=Math.floor(S*Y),pe=Math.floor(O*Y);U[N]={minTileX:re,minTileY:ae,maxTileX:ge,maxTileY:pe}}return U}}class Rn extends Zn{constructor(l,p,C,S){super(l,p,C,S),this.roundZoom=!0,this.type="video",this.options=p}load(){return a._(this,void 0,void 0,(function*(){this._loaded=!1;const l=this.options;this.urls=[];for(const p of l.urls)this.urls.push(this.map._requestManager.transformRequest(p,"Source").url);try{const p=yield a.a9(this.urls);if(this._loaded=!0,!p)return;this.video=p,this.video.loop=!0,this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading()}catch(p){this.fire(new a.k(p))}}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(l){if(this.video){const p=this.video.seekable;l<p.start(0)||l>p.end(0)?this.fire(new a.k(new a.aa(`sources.${this.id}`,null,`Playback for this video can be set only between the ${p.start(0)} and ${p.end(0)}-second mark.`))):this.video.currentTime=l}}getVideo(){return this.video}onAdd(l){this.map||(this.map=l,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const l=this.map.painter.context,p=l.gl;this.texture?this.video.paused||(this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE),p.texSubImage2D(p.TEXTURE_2D,0,0,0,p.RGBA,p.UNSIGNED_BYTE,this.video)):(this.texture=new a.T(l,this.video,p.RGBA),this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE));let C=!1;for(const S in this.tiles){const O=this.tiles[S];O.state!=="loaded"&&(O.state="loaded",O.texture=this.texture,C=!0)}C&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Ot extends Zn{constructor(l,p,C,S){super(l,p,C,S),p.coordinates?Array.isArray(p.coordinates)&&p.coordinates.length===4&&!p.coordinates.some((O=>!Array.isArray(O)||O.length!==2||O.some((U=>typeof U!="number"))))||this.fire(new a.k(new a.aa(`sources.${l}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.k(new a.aa(`sources.${l}`,null,'missing required property "coordinates"'))),p.animate&&typeof p.animate!="boolean"&&this.fire(new a.k(new a.aa(`sources.${l}`,null,'optional "animate" property must be a boolean value'))),p.canvas?typeof p.canvas=="string"||p.canvas instanceof HTMLCanvasElement||this.fire(new a.k(new a.aa(`sources.${l}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.k(new a.aa(`sources.${l}`,null,'missing required property "canvas"'))),this.options=p,this.animate=p.animate===void 0||p.animate}load(){return a._(this,void 0,void 0,(function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new a.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}))}getCanvas(){return this.canvas}onAdd(l){this.map=l,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let l=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,l=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,l=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const p=this.map.painter.context,C=p.gl;this.texture?(l||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new a.T(p,this.canvas,C.RGBA,{premultiply:!0});let S=!1;for(const O in this.tiles){const U=this.tiles[O];U.state!=="loaded"&&(U.state="loaded",U.texture=this.texture,S=!0)}S&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const l of[this.canvas.width,this.canvas.height])if(isNaN(l)||l<=0)return!0;return!1}}const be={},ie=B=>{switch(B){case"geojson":return xn;case"image":return Zn;case"raster":return Wn;case"raster-dem":return _i;case"vector":return Hn;case"video":return Rn;case"canvas":return Ot}return be[B]},le="RTLPluginLoaded";class de extends a.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=Be()}_syncState(l){return this.status=l,this.dispatcher.broadcast("SRPS",{pluginStatus:l,pluginURL:this.url}).catch((p=>{throw this.status="error",p}))}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(l){return a._(this,arguments,void 0,(function*(p,C=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=x.resolveURL(p),!this.url)throw new Error(`requested url ${p} is invalid`);if(this.status==="unavailable"){if(!C)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()}))}_requestImport(){return a._(this,void 0,void 0,(function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new a.l(le))}))}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let se=null;function Ae(){return se||(se=new de),se}var ve,We;(function(B){B[B.Base=0]="Base",B[B.Parent=1]="Parent"})(ve||(ve={})),(function(B){B[B.Departing=0]="Departing",B[B.Incoming=1]="Incoming"})(We||(We={}));class tt{constructor(l,p){this.timeAdded=0,this.fadeEndTime=0,this.fadeOpacity=1,this.tileID=l,this.uid=a.ab(),this.uses=0,this.tileSize=p,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}isRenderable(l){return this.hasData()&&(!this.fadeEndTime||this.fadeOpacity>0)&&(l||!this.holdingForSymbolFade())}setCrossFadeLogic({fadingRole:l,fadingDirection:p,fadingParentID:C,fadeEndTime:S}){this.resetFadeLogic(),this.fadingRole=l,this.fadingDirection=p,this.fadingParentID=C,this.fadeEndTime=S}setSelfFadeLogic(l){this.resetFadeLogic(),this.selfFading=!0,this.fadeEndTime=l}resetFadeLogic(){this.fadingRole=null,this.fadingDirection=null,this.fadingParentID=null,this.selfFading=!1,this.timeAdded=D(),this.fadeEndTime=0,this.fadeOpacity=1}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(l){this.demTexture&&l.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(l,p,C){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",l){l.featureIndex&&(this.latestFeatureIndex=l.featureIndex,l.rawTileData?(this.latestRawTileData=l.rawTileData,this.latestFeatureIndex.rawTileData=l.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=l.collisionBoxArray,this.buckets=(function(S,O){const U={};if(!O)return U;for(const N of S){const Y=N.layerIds.map((re=>O.getLayer(re))).filter(Boolean);if(Y.length!==0){N.layers=Y,N.stateDependentLayerIds&&(N.stateDependentLayers=N.stateDependentLayerIds.map((re=>Y.filter((ae=>ae.id===re))[0])));for(const re of Y)U[re.id]=N}}return U})(l.buckets,p?.style),this.hasSymbolBuckets=!1;for(const S in this.buckets){const O=this.buckets[S];if(O instanceof a.ad){if(this.hasSymbolBuckets=!0,!C)break;O.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const S in this.buckets){const O=this.buckets[S];if(O instanceof a.ad&&O.hasRTLText){this.hasRTLText=!0,Ae().lazyLoad();break}}this.queryPadding=0;for(const S in this.buckets){const O=this.buckets[S];this.queryPadding=Math.max(this.queryPadding,p.style.getLayer(S).queryRadius(O))}l.imageAtlas&&(this.imageAtlas=l.imageAtlas),l.glyphAtlasImage&&(this.glyphAtlasImage=l.glyphAtlasImage),this.dashPositions=l.dashPositions}else this.collisionBoxArray=new a.ac}unloadVectorData(){for(const l in this.buckets)this.buckets[l].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.dashPositions&&(this.dashPositions=null),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(l){return this.buckets[l.id]}upload(l){for(const C in this.buckets){const S=this.buckets[C];S.uploadPending()&&S.upload(l)}const p=l.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new a.T(l,this.imageAtlas.image,p.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new a.T(l,this.glyphAtlasImage,p.ALPHA),this.glyphAtlasImage=null)}prepare(l){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(l,this.imageAtlasTexture)}queryRenderedFeatures(l,p,C,S,O,U,N,Y,re,ae,ge){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:S,cameraQueryGeometry:O,scale:U,tileSize:this.tileSize,pixelPosMatrix:ae,transform:Y,params:N,queryPadding:this.queryPadding*re,getElevation:ge},l,p,C):{}}querySourceFeatures(l,p){const C=this.latestFeatureIndex;if(!C||!C.rawTileData)return;const S=C.loadVTLayers(),O=p&&p.sourceLayer?p.sourceLayer:"",U=S._geojsonTileLayer||S[O];if(!U)return;const N=a.ae(p?.filter,p?.globalState),{z:Y,x:re,y:ae}=this.tileID.canonical,ge={z:Y,x:re,y:ae};for(let pe=0;pe<U.length;pe++){const we=U.feature(pe);if(N.needGeometry){const Ze=a.af(we,!0);if(!N.filter(new a.G(this.tileID.overscaledZ),Ze,this.tileID.canonical))continue}else if(!N.filter(new a.G(this.tileID.overscaledZ),we))continue;const Fe=C.getId(we,O),He=new a.ag(we,Y,re,ae,Fe);He.tile=ge,l.push(He)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(l){const p=this.expirationTime;if(l.cacheControl){const C=a.ah(l.cacheControl);C["max-age"]&&(this.expirationTime=Date.now()+1e3*C["max-age"])}else l.expires&&(this.expirationTime=new Date(l.expires).getTime());if(this.expirationTime){const C=Date.now();let S=!1;if(this.expirationTime>C)S=!1;else if(p)if(this.expirationTime<p)S=!0;else{const O=this.expirationTime-p;O?this.expirationTime=C+Math.max(O,3e4):S=!0}else S=!0;S?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(l,p){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(l).length===0)return;const C=this.latestFeatureIndex.loadVTLayers();for(const S in this.buckets){if(!p.style.hasLayer(S))continue;const O=this.buckets[S],U=O.layers[0].sourceLayer||"_geojsonTileLayer",N=C[U],Y=l[U];if(!N||!Y||Object.keys(Y).length===0)continue;O.update(Y,N,this.imageAtlas&&this.imageAtlas.patternPositions||{},this.dashPositions||{});const re=p&&p.style&&p.style.getLayer(S);re&&(this.queryPadding=Math.max(this.queryPadding,re.queryRadius(O)))}}holdingForSymbolFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<D()}clearSymbolFadeHold(){this.symbolFadeHoldUntil=void 0}setSymbolHoldDuration(l){this.symbolFadeHoldUntil=D()+l}setDependencies(l,p){const C={};for(const S of p)C[S]=!0;this.dependencies[l]=C}hasDependency(l,p){for(const C of l){const S=this.dependencies[C];if(S){for(const O of p)if(S[O])return!0}}return!1}}class Pe{constructor(l,p){this.max=l,this.onRemove=p,this.reset()}reset(){for(const l in this.data)for(const p of this.data[l])p.timeout&&clearTimeout(p.timeout),this.onRemove(p.value);return this.data={},this.order=[],this}add(l,p,C){const S=l.wrapped().key;this.data[S]===void 0&&(this.data[S]=[]);const O={value:p,timeout:void 0};if(C!==void 0&&(O.timeout=setTimeout((()=>{this.remove(l,O)}),C)),this.data[S].push(O),this.order.push(S),this.order.length>this.max){const U=this._getAndRemoveByKey(this.order[0]);U&&this.onRemove(U)}return this}has(l){return l.wrapped().key in this.data}getAndRemove(l){return this.has(l)?this._getAndRemoveByKey(l.wrapped().key):null}_getAndRemoveByKey(l){const p=this.data[l].shift();return p.timeout&&clearTimeout(p.timeout),this.data[l].length===0&&delete this.data[l],this.order.splice(this.order.indexOf(l),1),p.value}getByKey(l){const p=this.data[l];return p?p[0].value:null}get(l){return this.has(l)?this.data[l.wrapped().key][0].value:null}remove(l,p){if(!this.has(l))return this;const C=l.wrapped().key,S=p===void 0?0:this.data[C].indexOf(p),O=this.data[C][S];return this.data[C].splice(S,1),O.timeout&&clearTimeout(O.timeout),this.data[C].length===0&&delete this.data[C],this.onRemove(O.value),this.order.splice(this.order.indexOf(C),1),this}setMaxSize(l){for(this.max=l;this.order.length>this.max;){const p=this._getAndRemoveByKey(this.order[0]);p&&this.onRemove(p)}return this}filter(l){const p=[];for(const C in this.data)for(const S of this.data[C])l(S.value)||p.push(S);for(const C of p)this.remove(C.value.tileID,C)}}class Xe{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(l,p,C){const S=String(p);if(this.stateChanges[l]=this.stateChanges[l]||{},this.stateChanges[l][S]=this.stateChanges[l][S]||{},a.e(this.stateChanges[l][S],C),this.deletedStates[l]===null){this.deletedStates[l]={};for(const O in this.state[l])O!==S&&(this.deletedStates[l][O]=null)}else if(this.deletedStates[l]&&this.deletedStates[l][S]===null){this.deletedStates[l][S]={};for(const O in this.state[l][S])C[O]||(this.deletedStates[l][S][O]=null)}else for(const O in C)this.deletedStates[l]&&this.deletedStates[l][S]&&this.deletedStates[l][S][O]===null&&delete this.deletedStates[l][S][O]}removeFeatureState(l,p,C){if(this.deletedStates[l]===null)return;const S=String(p);if(this.deletedStates[l]=this.deletedStates[l]||{},C&&p!==void 0)this.deletedStates[l][S]!==null&&(this.deletedStates[l][S]=this.deletedStates[l][S]||{},this.deletedStates[l][S][C]=null);else if(p!==void 0)if(this.stateChanges[l]&&this.stateChanges[l][S])for(C in this.deletedStates[l][S]={},this.stateChanges[l][S])this.deletedStates[l][S][C]=null;else this.deletedStates[l][S]=null;else this.deletedStates[l]=null}getState(l,p){const C=String(p),S=a.e({},(this.state[l]||{})[C],(this.stateChanges[l]||{})[C]);if(this.deletedStates[l]===null)return{};if(this.deletedStates[l]){const O=this.deletedStates[l][p];if(O===null)return{};for(const U in O)delete S[U]}return S}initializeTileState(l,p){l.setFeatureState(this.state,p)}coalesceChanges(l,p){const C={};for(const S in this.stateChanges){this.state[S]=this.state[S]||{};const O={};for(const U in this.stateChanges[S])this.state[S][U]||(this.state[S][U]={}),a.e(this.state[S][U],this.stateChanges[S][U]),O[U]=this.state[S][U];C[S]=O}for(const S in this.deletedStates){this.state[S]=this.state[S]||{};const O={};if(this.deletedStates[S]===null)for(const U in this.state[S])O[U]={},this.state[S][U]={};else for(const U in this.deletedStates[S]){if(this.deletedStates[S][U]===null)this.state[S][U]={};else for(const N of Object.keys(this.deletedStates[S][U]))delete this.state[S][U][N];O[U]=this.state[S][U]}C[S]=C[S]||{},a.e(C[S],O)}if(this.stateChanges={},this.deletedStates={},Object.keys(C).length!==0)for(const S in l)l[S].setFeatureState(C,p)}}const y=89.25;function ot(B,l){const p=a.ai(l.lat,-a.aj,a.aj);return new a.P(a.X(l.lng)*B,a.W(p)*B)}function Dt(B,l){return new a.a5(l.x/B,l.y/B).toLngLat()}function xt(B){return B.cameraToCenterDistance*Math.min(.85*Math.tan(a.ak(90-B.pitch)),Math.tan(a.ak(y-B.pitch)))}function tn(B,l){const p=B.canonical,C=l/a.al(p.z),S=p.x+Math.pow(2,p.z)*B.wrap,O=a.am(new Float64Array(16));return a.N(O,O,[S*C,p.y*C,0]),a.O(O,O,[C/a.a3,C/a.a3,1]),O}function dt(B,l,p,C,S){const O=a.a5.fromLngLat(B,l),U=S*a.an(1,B.lat),N=U*Math.cos(a.ak(p)),Y=Math.sqrt(U*U-N*N),re=Y*Math.sin(a.ak(-C)),ae=Y*Math.cos(a.ak(-C));return new a.a5(O.x+re,O.y+ae,O.z+N)}function Xn(B,l,p){const C=l.intersectsFrustum(B);if(!p||C===0)return C;const S=l.intersectsPlane(p);return S===0?0:C===2&&S===2?2:1}function yi(B,l,p){let C=0;const S=(p-l)/10;for(let O=0;O<10;O++)C+=S*Math.pow(Math.cos(l+(O+.5)/10*(p-l)),B);return C}function Dn(B,l){return function(p,C,S,O,U){const N=2*((B-1)/a.ao(Math.cos(a.ak(y-U))/Math.cos(a.ak(y)))-1),Y=Math.acos(S/O),re=2*yi(N-1,0,a.ak(U/2)),ae=Math.min(a.ak(y),Y+a.ak(U/2)),ge=yi(N-1,Math.min(ae,Y-a.ak(U/2)),ae),pe=Math.atan(C/S),we=Math.hypot(C,S);let Fe=p;return Fe+=a.ao(O/we/Math.max(.5,Math.cos(a.ak(U/2)))),Fe+=N*a.ao(Math.cos(pe))/2,Fe-=a.ao(Math.max(1,ge/re/l))/2,Fe}}const Fn=Dn(9.314,3);function vi(B,l){const p=(l.roundZoom?Math.round:Math.floor)(B.zoom+a.ao(B.tileSize/l.tileSize));return Math.max(0,p)}function Zi(B,l){const p=B.getCameraFrustum(),C=B.getClippingPlane(),S=B.screenPointToMercatorCoordinate(B.getCameraPoint()),O=a.a5.fromLngLat(B.center,B.elevation);S.z=O.z+Math.cos(B.pitchInRadians)*B.cameraToCenterDistance/B.worldSize;const U=B.getCoveringTilesDetailsProvider(),N=U.allowVariableZoom(B,l),Y=vi(B,l),re=l.minzoom||0,ae=l.maxzoom!==void 0?l.maxzoom:B.maxZoom,ge=Math.min(Math.max(0,Y),ae),pe=Math.pow(2,ge),we=[pe*S.x,pe*S.y,0],Fe=[pe*O.x,pe*O.y,0],He=Math.hypot(O.x-S.x,O.y-S.y),Ze=Math.abs(O.z-S.z),et=Math.hypot(He,Ze),rt=ht=>({zoom:0,x:0,y:0,wrap:ht,fullyVisible:!1}),lt=[],nt=[];if(B.renderWorldCopies&&U.allowWorldCopies())for(let ht=1;ht<=3;ht++)lt.push(rt(-ht)),lt.push(rt(ht));for(lt.push(rt(0));lt.length>0;){const ht=lt.pop(),bt=ht.x,st=ht.y;let wt=ht.fullyVisible;const Yt={x:bt,y:st,z:ht.zoom},jt=U.getTileBoundingVolume(Yt,ht.wrap,B.elevation,l);if(!wt){const In=Xn(p,jt,C);if(In===0)continue;wt=In===2}const Nt=U.distanceToTile2d(S.x,S.y,Yt,jt);let qt=Y;N&&(qt=(l.calculateTileZoom||Fn)(B.zoom+a.ao(B.tileSize/l.tileSize),Nt,Ze,et,B.fov)),qt=(l.roundZoom?Math.round:Math.floor)(qt),qt=Math.max(0,qt);const gn=Math.min(qt,ae);if(ht.wrap=U.getWrap(O,Yt,ht.wrap),ht.zoom>=gn){if(ht.zoom<re)continue;const In=ge-ht.zoom,sn=we[0]-.5-(bt<<In),ti=we[1]-.5-(st<<In),nr=l.reparseOverscaled?Math.max(ht.zoom,qt):ht.zoom;nt.push({tileID:new a.a0(ht.zoom===ae?nr:ht.zoom,ht.wrap,ht.zoom,bt,st),distanceSq:a.ap([Fe[0]-.5-bt,Fe[1]-.5-st]),tileDistanceToCamera:Math.sqrt(sn*sn+ti*ti)})}else for(let In=0;In<4;In++)lt.push({zoom:ht.zoom+1,x:(bt<<1)+In%2,y:(st<<1)+(In>>1),wrap:ht.wrap,fullyVisible:wt})}return nt.sort(((ht,bt)=>ht.distanceSq-bt.distanceSq)).map((ht=>ht.tileID))}const Ki=a.a6.fromPoints([new a.P(0,0),new a.P(a.a3,a.a3)]);class Ji extends a.E{constructor(l,p,C){super(),this.id=l,this.dispatcher=C,this.on("data",(S=>this._dataHandler(S))),this.on("dataloading",(()=>{this._sourceErrored=!1})),this.on("error",(()=>{this._sourceErrored=this._source.loaded()})),this._source=((S,O,U,N)=>{const Y=new(ie(O.type))(S,O,U,N);if(Y.id!==S)throw new Error(`Expected Source id to be ${S} instead of ${Y.id}`);return Y})(l,p,C,this),this._tiles={},this._cache=new Pe(0,(S=>this._unloadTile(S))),this._timers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._rasterFadeDuration=0,this._maxFadingAncestorLevels=5,this._state=new Xe,this._didEmitContent=!1,this._updated=!1}onAdd(l){this.map=l,this._maxTileCacheSize=l?l._maxTileCacheSize:null,this._maxTileCacheZoomLevels=l?l._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(l)}onRemove(l){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(l)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const l in this._tiles){const p=this._tiles[l];if(p.state!=="loaded"&&p.state!=="errored")return!1}return!0}getSource(){return this._source}getState(){return this._state}pause(){this._paused=!0}resume(){if(!this._paused)return;const l=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,l&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(l,p,C){return a._(this,void 0,void 0,(function*(){try{yield this._source.loadTile(l),this._tileLoaded(l,p,C)}catch(S){l.state="errored",S.status!==404?this._source.fire(new a.k(S,{tile:l})):this.update(this.transform,this.terrain)}}))}_unloadTile(l){this._source.unloadTile&&this._source.unloadTile(l)}_abortTile(l){this._source.abortTile&&this._source.abortTile(l),this._source.fire(new a.l("dataabort",{tile:l,coord:l.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(l){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const p in this._tiles){const C=this._tiles[p];C.upload(l),C.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map((l=>l.tileID)).sort(ki).map((l=>l.key))}getRenderableIds(l){const p=[];for(const C in this._tiles)this._isIdRenderable(C,l)&&p.push(this._tiles[C]);return l?p.sort(((C,S)=>{const O=C.tileID,U=S.tileID,N=new a.P(O.canonical.x,O.canonical.y)._rotate(-this.transform.bearingInRadians),Y=new a.P(U.canonical.x,U.canonical.y)._rotate(-this.transform.bearingInRadians);return O.overscaledZ-U.overscaledZ||Y.y-N.y||Y.x-N.x})).map((C=>C.tileID.key)):p.map((C=>C.tileID)).sort(ki).map((C=>C.key))}hasRenderableParent(l){const p=l.overscaledZ-1;if(p>=this._source.minzoom){const C=this.getLoadedTile(l.scaledTo(p));if(C)return this._isIdRenderable(C.tileID.key)}return!1}_isIdRenderable(l,p=!1){var C;return(C=this._tiles[l])===null||C===void 0?void 0:C.isRenderable(p)}reload(l,p=void 0){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const C in this._tiles)p&&this._source.shouldReloadTile&&!this._source.shouldReloadTile(this._tiles[C],p)||(l?this._reloadTile(C,"expired"):this._tiles[C].state!=="errored"&&this._reloadTile(C,"reloading"))}}_reloadTile(l,p){return a._(this,void 0,void 0,(function*(){const C=this._tiles[l];C&&(C.state!=="loading"&&(C.state=p),yield this._loadTile(C,l,p))}))}_tileLoaded(l,p,C){l.timeAdded=D(),l.selfFading&&(l.fadeEndTime=l.timeAdded+this._rasterFadeDuration),C==="expired"&&(l.refreshedUponExpiration=!0),this._setTileReloadTimer(p,l),this.getSource().type==="raster-dem"&&l.dem&&this._backfillDEM(l),this._state.initializeTileState(l,this.map?this.map.painter:null),l.aborted||this._source.fire(new a.l("data",{dataType:"source",tile:l,coord:l.tileID}))}_backfillDEM(l){const p=this.getRenderableIds();for(let S=0;S<p.length;S++){const O=p[S];if(l.neighboringTiles&&l.neighboringTiles[O]){const U=this.getTileByID(O);C(l,U),C(U,l)}}function C(S,O){S.needsHillshadePrepare=!0,S.needsTerrainPrepare=!0;let U=O.tileID.canonical.x-S.tileID.canonical.x;const N=O.tileID.canonical.y-S.tileID.canonical.y,Y=Math.pow(2,S.tileID.canonical.z),re=O.tileID.key;U===0&&N===0||Math.abs(N)>1||(Math.abs(U)>1&&(Math.abs(U+Y)===1?U+=Y:Math.abs(U-Y)===1&&(U-=Y)),O.dem&&S.dem&&(S.dem.backfillBorder(O.dem,U,N),S.neighboringTiles&&S.neighboringTiles[re]&&(S.neighboringTiles[re].backfilled=!0)))}}getTile(l){return this.getTileByID(l.key)}getTileByID(l){return this._tiles[l]}_retainLoadedChildren(l,p){const C=Object.values(l),S=this._getLoadedDescendents(C),O={};for(const U of C){const N=S[U.key];if(!N?.length){O[U.key]=U;continue}const Y=U.overscaledZ+Ji.maxUnderzooming,re=N.filter((pe=>pe.tileID.overscaledZ<=Y));if(!re.length){O[U.key]=U;continue}const ae=Math.min(...re.map((pe=>pe.tileID.overscaledZ))),ge=re.filter((pe=>pe.tileID.overscaledZ===ae)).map((pe=>pe.tileID));for(const pe of ge)p[pe.key]=pe;this._areDescendentsComplete(ge,ae,U.overscaledZ)||(O[U.key]=U)}return O}_getLoadedDescendents(l){var p;const C={};for(const S in this._tiles){const O=this._tiles[S];if(O.hasData())for(const U of l)O.tileID.isChildOf(U)&&(C[p=U.key]||(C[p]=[])).push(O)}return C}_areDescendentsComplete(l,p,C){return l.length===1&&l[0].isOverscaled()?l[0].overscaledZ===p:Math.pow(4,p-C)===l.length}getLoadedTile(l){const p=this._tiles[l.key];return p?.hasData()?p:null}updateCacheSize(l){const p=Math.ceil(l.width/this._source.tileSize)+1,C=Math.ceil(l.height/this._source.tileSize)+1,S=Math.floor(p*C*(this._maxTileCacheZoomLevels===null?a.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),O=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,S):S;this._cache.setMaxSize(O)}handleWrapJump(l){const p=Math.round((l-(this._prevLng===void 0?l:this._prevLng))/360);if(this._prevLng=l,p){const C={};for(const S in this._tiles){const O=this._tiles[S];O.tileID=O.tileID.unwrapTo(O.tileID.wrap+p),C[O.tileID.key]=O}this._tiles=C,this._resetTileReloadTimers()}}update(l,p){if(!this._sourceLoaded||this._paused)return;let C;this.transform=l,this.terrain=p,this.updateCacheSize(l),this.handleWrapJump(this.transform.center.lng),this.used||this.usedForTerrain?this._source.tileID?C=l.getVisibleUnwrappedCoordinates(this._source.tileID).map((Y=>new a.a0(Y.canonical.z,Y.wrap,Y.canonical.z,Y.canonical.x,Y.canonical.y))):(C=Zi(l,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:p,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(C=C.filter((Y=>this._source.hasTile(Y))))):C=[],this.usedForTerrain&&(C=this._addTerrainIdealTiles(C));const S=C.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,S&&this.fire(new a.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const O=vi(l,this._source),U=this._updateRetainedTiles(C,O),N=Ri(this._source.type);N&&this._rasterFadeDuration>0&&!p&&this._updateFadingTiles(C,U),N?this._cleanUpRasterTiles(U):this._cleanUpVectorTiles(U)}_cleanUpRasterTiles(l){for(const p in this._tiles)l[p]||this._removeTile(p)}_cleanUpVectorTiles(l){for(const p in this._tiles){const C=this._tiles[p];l[p]?C.clearSymbolFadeHold():C.hasSymbolBuckets?C.holdingForSymbolFade()?C.symbolFadeFinished()&&this._removeTile(p):C.setSymbolHoldDuration(this.map._fadeDuration):this._removeTile(p)}}_addTerrainIdealTiles(l){const p=[];for(const C of l)if(C.canonical.z>this._source.minzoom){const S=C.scaledTo(C.canonical.z-1);p.push(S);const O=C.scaledTo(Math.max(this._source.minzoom,Math.min(C.canonical.z,5)));p.push(O)}return l.concat(p)}releaseSymbolFadeTiles(){for(const l in this._tiles)this._tiles[l].holdingForSymbolFade()&&this._removeTile(l)}_updateRetainedTiles(l,p){var C;const S={},O={},U=Math.max(p-Ji.maxOverzooming,this._source.minzoom);let N={};for(const Y of l){const re=this._addTile(Y);S[Y.key]=Y,re.hasData()||(N[Y.key]=Y)}N=this._retainLoadedChildren(N,S);for(const Y in N){const re=N[Y];let ae=this._tiles[Y],ge=ae?.wasRequested();for(let pe=re.overscaledZ-1;pe>=U;--pe){const we=re.scaledTo(pe);if(O[we.key])break;if(O[we.key]=!0,ae=this.getTile(we),!ae&&ge&&(ae=this._addTile(we)),ae){const Fe=ae.hasData();if((Fe||!(!((C=this.map)===null||C===void 0)&&C.cancelPendingTileRequestsWhileZooming)||ge)&&(S[we.key]=we),ge=ae.wasRequested(),Fe)break}}}return S}_updateFadingTiles(l,p){const C=D(),S=a.aq(l);for(const O of l){const U=this._tiles[O.key];U.fadingDirection!==We.Departing&&U.fadeOpacity!==0||U.resetFadeLogic(),this._updateFadingAncestor(U,p,C)||this._updateFadingDescendents(U,p,C)||this._updateFadingEdge(U,S,C)||U.resetFadeLogic()}}_updateFadingAncestor(l,p,C){if(!l.hasData())return!1;const{tileID:S,fadingRole:O,fadingDirection:U,fadingParentID:N}=l;if(O===ve.Base&&U===We.Incoming&&N)return p[N.key]=N,!0;const Y=Math.max(S.overscaledZ-this._maxFadingAncestorLevels,this._source.minzoom);for(let re=S.overscaledZ-1;re>=Y;re--){const ae=S.scaledTo(re),ge=this.getLoadedTile(ae);if(ge)return l.setCrossFadeLogic({fadingRole:ve.Base,fadingDirection:We.Incoming,fadingParentID:ge.tileID,fadeEndTime:C+this._rasterFadeDuration}),ge.setCrossFadeLogic({fadingRole:ve.Parent,fadingDirection:We.Departing,fadeEndTime:C+this._rasterFadeDuration}),p[ae.key]=ae,!0}return!1}_updateFadingDescendents(l,p,C){if(!l.hasData())return!1;const S=l.tileID.children(this._source.maxzoom);let O=this._updateFadingChildren(l,S,p,C);if(O)return!0;for(const U of S){const N=U.children(this._source.maxzoom);this._updateFadingChildren(l,N,p,C)&&(O=!0)}return O}_updateFadingChildren(l,p,C,S){if(p[0].overscaledZ>=this._source.maxzoom)return!1;let O=!1;for(const U of p){const N=this.getLoadedTile(U);if(!N)continue;const{fadingRole:Y,fadingDirection:re,fadingParentID:ae}=N;Y===ve.Base&&re===We.Departing&&ae||(N.setCrossFadeLogic({fadingRole:ve.Base,fadingDirection:We.Departing,fadingParentID:l.tileID,fadeEndTime:S+this._rasterFadeDuration}),l.setCrossFadeLogic({fadingRole:ve.Parent,fadingDirection:We.Incoming,fadeEndTime:S+this._rasterFadeDuration})),C[U.key]=U,O=!0}return O}_updateFadingEdge(l,p,C){const S=l.tileID;return!!l.selfFading||!l.hasData()&&!!p.has(S)&&(l.setSelfFadeLogic(C+this._rasterFadeDuration),!0)}_addTile(l){let p=this._tiles[l.key];if(p)return p;p=this._cache.getAndRemove(l),p&&(p.resetFadeLogic(),this._setTileReloadTimer(l.key,p),p.tileID=l,this._state.initializeTileState(p,this.map?this.map.painter:null));const C=p;return p||(p=new tt(l,this._source.tileSize*l.overscaleFactor()),this._loadTile(p,l.key,p.state)),p.uses++,this._tiles[l.key]=p,C||this._source.fire(new a.l("dataloading",{tile:p,coord:p.tileID,dataType:"source"})),p}_setTileReloadTimer(l,p){this._clearTileReloadTimer(l);const C=p.getExpiryTimeout();C&&(this._timers[l]=setTimeout((()=>{this._reloadTile(l,"expired"),delete this._timers[l]}),C))}_clearTileReloadTimer(l){const p=this._timers[l];p&&(clearTimeout(p),delete this._timers[l])}_resetTileReloadTimers(){for(const l in this._timers)clearTimeout(this._timers[l]),delete this._timers[l];for(const l in this._tiles)this._setTileReloadTimer(l,this._tiles[l])}refreshTiles(l){for(const p in this._tiles)(this._isIdRenderable(p)||this._tiles[p].state=="errored")&&l.some((C=>C.equals(this._tiles[p].tileID.canonical)))&&this._reloadTile(p,"expired")}_removeTile(l){const p=this._tiles[l];p&&(p.uses--,delete this._tiles[l],this._clearTileReloadTimer(l),p.uses>0||(p.hasData()&&p.state!=="reloading"?this._cache.add(p.tileID,p,p.getExpiryTimeout()):(p.aborted=!0,this._abortTile(p),this._unloadTile(p))))}_dataHandler(l){l.dataType==="source"&&(l.sourceDataType!=="metadata"?l.sourceDataType==="content"&&this._sourceLoaded&&!this._paused&&(this.reload(l.sourceDataChanged,l.shouldReloadTileOptions),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0):this._sourceLoaded=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const l in this._tiles)this._removeTile(l);this._cache.reset()}tilesIn(l,p,C){const S=[],O=this.transform;if(!O)return S;const U=O.getCoveringTilesDetailsProvider().allowWorldCopies(),N=C?O.getCameraQueryGeometry(l):l,Y=we=>O.screenPointToMercatorCoordinate(we,this.terrain),re=this.transformBbox(l,Y,!U),ae=this.transformBbox(N,Y,!U),ge=this.getIds(),pe=a.a6.fromPoints(ae);for(let we=0;we<ge.length;we++){const Fe=this._tiles[ge[we]];if(Fe.holdingForSymbolFade())continue;const He=U?[Fe.tileID]:[Fe.tileID.unwrapTo(-1),Fe.tileID.unwrapTo(0)],Ze=Math.pow(2,O.zoom-Fe.tileID.overscaledZ),et=p*Fe.queryPadding*a.a3/Fe.tileSize/Ze;for(const rt of He){const lt=pe.map((nt=>rt.getTilePoint(new a.a5(nt.x,nt.y))));if(lt.expandBy(et),lt.intersects(Ki)){const nt=re.map((bt=>rt.getTilePoint(bt))),ht=ae.map((bt=>rt.getTilePoint(bt)));S.push({tile:Fe,tileID:U?rt:rt.unwrapTo(0),queryGeometry:nt,cameraQueryGeometry:ht,scale:Ze})}}}return S}transformBbox(l,p,C){let S=l.map(p);if(C){const O=a.a6.fromPoints(l);O.shrinkBy(.001*Math.min(O.width(),O.height()));const U=O.map(p);a.a6.fromPoints(S).covers(U)||(S=S.map((N=>N.x>.5?new a.a5(N.x-1,N.y,N.z):N)))}return S}getVisibleCoordinates(l){const p=this.getRenderableIds(l).map((C=>this._tiles[C].tileID));return this.transform&&this.transform.populateCache(p),p}hasTransition(){if(this._source.hasTransition())return!0;if(Ri(this._source.type)&&this._rasterFadeDuration>0){const l=D();for(const p in this._tiles)if(this._tiles[p].fadeEndTime>=l)return!0}return!1}setRasterFadeDuration(l){this._rasterFadeDuration=l}setFeatureState(l,p,C){this._state.updateState(l=l||"_geojsonTileLayer",p,C)}removeFeatureState(l,p,C){this._state.removeFeatureState(l=l||"_geojsonTileLayer",p,C)}getFeatureState(l,p){return this._state.getState(l=l||"_geojsonTileLayer",p)}setDependencies(l,p,C){const S=this._tiles[l];S&&S.setDependencies(p,C)}reloadTilesForDependencies(l,p){for(const C in this._tiles)this._tiles[C].hasDependency(l,p)&&this._reloadTile(C,"reloading");this._cache.filter((C=>!C.hasDependency(l,p)))}}function ki(B,l){const p=Math.abs(2*B.wrap)-+(B.wrap<0),C=Math.abs(2*l.wrap)-+(l.wrap<0);return B.overscaledZ-l.overscaledZ||C-p||l.canonical.y-B.canonical.y||l.canonical.x-B.canonical.x}function Ri(B){return B==="raster"||B==="image"||B==="video"}Ji.maxOverzooming=10,Ji.maxUnderzooming=3;class pr{constructor(l,p){this.reset(l,p)}reset(l,p){this.points=l||[],this._distances=[0];for(let C=1;C<this.points.length;C++)this._distances[C]=this._distances[C-1]+this.points[C].dist(this.points[C-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(p||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(l){if(this.points.length===1)return this.points[0];l=a.ai(l,0,1);let p=1,C=this._distances[p];const S=l*this.paddedLength+this.padding;for(;C<S&&p<this._distances.length;)C=this._distances[++p];const O=p-1,U=this._distances[O],N=C-U,Y=N>0?(S-U)/N:0;return this.points[O].mult(1-Y).add(this.points[p].mult(Y))}}function rn(B,l){let p=!0;return B==="always"||B!=="never"&&l!=="never"||(p=!1),p}class Li{constructor(l,p,C){const S=this.boxCells=[],O=this.circleCells=[];this.xCellCount=Math.ceil(l/C),this.yCellCount=Math.ceil(p/C);for(let U=0;U<this.xCellCount*this.yCellCount;U++)S.push([]),O.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=l,this.height=p,this.xScale=this.xCellCount/l,this.yScale=this.yCellCount/p,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(l,p,C,S,O){this._forEachCell(p,C,S,O,this._insertBoxCell,this.boxUid++),this.boxKeys.push(l),this.bboxes.push(p),this.bboxes.push(C),this.bboxes.push(S),this.bboxes.push(O)}insertCircle(l,p,C,S){this._forEachCell(p-S,C-S,p+S,C+S,this._insertCircleCell,this.circleUid++),this.circleKeys.push(l),this.circles.push(p),this.circles.push(C),this.circles.push(S)}_insertBoxCell(l,p,C,S,O,U){this.boxCells[O].push(U)}_insertCircleCell(l,p,C,S,O,U){this.circleCells[O].push(U)}_query(l,p,C,S,O,U,N){if(C<0||l>this.width||S<0||p>this.height)return[];const Y=[];if(l<=0&&p<=0&&this.width<=C&&this.height<=S){if(O)return[{key:null,x1:l,y1:p,x2:C,y2:S}];for(let re=0;re<this.boxKeys.length;re++)Y.push({key:this.boxKeys[re],x1:this.bboxes[4*re],y1:this.bboxes[4*re+1],x2:this.bboxes[4*re+2],y2:this.bboxes[4*re+3]});for(let re=0;re<this.circleKeys.length;re++){const ae=this.circles[3*re],ge=this.circles[3*re+1],pe=this.circles[3*re+2];Y.push({key:this.circleKeys[re],x1:ae-pe,y1:ge-pe,x2:ae+pe,y2:ge+pe})}}else this._forEachCell(l,p,C,S,this._queryCell,Y,{hitTest:O,overlapMode:U,seenUids:{box:{},circle:{}}},N);return Y}query(l,p,C,S){return this._query(l,p,C,S,!1,null)}hitTest(l,p,C,S,O,U){return this._query(l,p,C,S,!0,O,U).length>0}hitTestCircle(l,p,C,S,O){const U=l-C,N=l+C,Y=p-C,re=p+C;if(N<0||U>this.width||re<0||Y>this.height)return!1;const ae=[];return this._forEachCell(U,Y,N,re,this._queryCellCircle,ae,{hitTest:!0,overlapMode:S,circle:{x:l,y:p,radius:C},seenUids:{box:{},circle:{}}},O),ae.length>0}_queryCell(l,p,C,S,O,U,N,Y){const{seenUids:re,hitTest:ae,overlapMode:ge}=N,pe=this.boxCells[O];if(pe!==null){const Fe=this.bboxes;for(const He of pe)if(!re.box[He]){re.box[He]=!0;const Ze=4*He,et=this.boxKeys[He];if(l<=Fe[Ze+2]&&p<=Fe[Ze+3]&&C>=Fe[Ze+0]&&S>=Fe[Ze+1]&&(!Y||Y(et))&&(!ae||!rn(ge,et.overlapMode))&&(U.push({key:et,x1:Fe[Ze],y1:Fe[Ze+1],x2:Fe[Ze+2],y2:Fe[Ze+3]}),ae))return!0}}const we=this.circleCells[O];if(we!==null){const Fe=this.circles;for(const He of we)if(!re.circle[He]){re.circle[He]=!0;const Ze=3*He,et=this.circleKeys[He];if(this._circleAndRectCollide(Fe[Ze],Fe[Ze+1],Fe[Ze+2],l,p,C,S)&&(!Y||Y(et))&&(!ae||!rn(ge,et.overlapMode))){const rt=Fe[Ze],lt=Fe[Ze+1],nt=Fe[Ze+2];if(U.push({key:et,x1:rt-nt,y1:lt-nt,x2:rt+nt,y2:lt+nt}),ae)return!0}}}return!1}_queryCellCircle(l,p,C,S,O,U,N,Y){const{circle:re,seenUids:ae,overlapMode:ge}=N,pe=this.boxCells[O];if(pe!==null){const Fe=this.bboxes;for(const He of pe)if(!ae.box[He]){ae.box[He]=!0;const Ze=4*He,et=this.boxKeys[He];if(this._circleAndRectCollide(re.x,re.y,re.radius,Fe[Ze+0],Fe[Ze+1],Fe[Ze+2],Fe[Ze+3])&&(!Y||Y(et))&&!rn(ge,et.overlapMode))return U.push(!0),!0}}const we=this.circleCells[O];if(we!==null){const Fe=this.circles;for(const He of we)if(!ae.circle[He]){ae.circle[He]=!0;const Ze=3*He,et=this.circleKeys[He];if(this._circlesCollide(Fe[Ze],Fe[Ze+1],Fe[Ze+2],re.x,re.y,re.radius)&&(!Y||Y(et))&&!rn(ge,et.overlapMode))return U.push(!0),!0}}}_forEachCell(l,p,C,S,O,U,N,Y){const re=this._convertToXCellCoord(l),ae=this._convertToYCellCoord(p),ge=this._convertToXCellCoord(C),pe=this._convertToYCellCoord(S);for(let we=re;we<=ge;we++)for(let Fe=ae;Fe<=pe;Fe++)if(O.call(this,l,p,C,S,this.xCellCount*Fe+we,U,N,Y))return}_convertToXCellCoord(l){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(l*this.xScale)))}_convertToYCellCoord(l){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(l*this.yScale)))}_circlesCollide(l,p,C,S,O,U){const N=S-l,Y=O-p,re=C+U;return re*re>N*N+Y*Y}_circleAndRectCollide(l,p,C,S,O,U,N){const Y=(U-S)/2,re=Math.abs(l-(S+Y));if(re>Y+C)return!1;const ae=(N-O)/2,ge=Math.abs(p-(O+ae));if(ge>ae+C)return!1;if(re<=Y||ge<=ae)return!0;const pe=re-Y,we=ge-ae;return pe*pe+we*we<=C*C}}function $o(B,l,p){const C=a.M();if(!B){const{vecSouth:ge,vecEast:pe}=Ur(l),we=h();we[0]=pe[0],we[1]=pe[1],we[2]=ge[0],we[3]=ge[1],S=we,(ae=(U=(O=we)[0])*(re=O[3])-(Y=O[2])*(N=O[1]))&&(S[0]=re*(ae=1/ae),S[1]=-N*ae,S[2]=-Y*ae,S[3]=U*ae),C[0]=we[0],C[1]=we[1],C[4]=we[2],C[5]=we[3]}var S,O,U,N,Y,re,ae;return a.O(C,C,[1/p,1/p,1]),C}function Ws(B,l,p,C){if(B){const S=a.M();if(!l){const{vecSouth:O,vecEast:U}=Ur(p);S[0]=U[0],S[1]=U[1],S[4]=O[0],S[5]=O[1]}return a.O(S,S,[C,C,1]),S}return p.pixelsToClipSpaceMatrix}function Ur(B){const l=Math.cos(B.rollInRadians),p=Math.sin(B.rollInRadians),C=Math.cos(B.pitchInRadians),S=Math.cos(B.bearingInRadians),O=Math.sin(B.bearingInRadians),U=a.av();U[0]=-S*C*p-O*l,U[1]=-O*C*p+S*l;const N=a.aw(U);N<1e-9?a.ax(U):a.ay(U,U,1/N);const Y=a.av();Y[0]=S*C*l-O*p,Y[1]=O*C*l+S*p;const re=a.aw(Y);return re<1e-9?a.ax(Y):a.ay(Y,Y,1/re),{vecEast:Y,vecSouth:U}}function pn(B,l,p,C){let S;C?(S=[B,l,C(B,l),1],a.aA(S,S,p)):(S=[B,l,0,1],Ho(S,S,p));const O=S[3];return{point:new a.P(S[0]/O,S[1]/O),signedDistanceFromCamera:O,isOccluded:!1}}function zi(B,l){return .5+B/l*.5}function oi(B,l){return B.x>=-l[0]&&B.x<=l[0]&&B.y>=-l[1]&&B.y<=l[1]}function wl(B,l,p,C,S,O,U,N,Y,re,ae,ge,pe){const we=p?B.textSizeData:B.iconSizeData,Fe=a.ar(we,l.transform.zoom),He=[256/l.width*2+1,256/l.height*2+1],Ze=p?B.text.dynamicLayoutVertexArray:B.icon.dynamicLayoutVertexArray;Ze.clear();const et=B.lineVertexArray,rt=p?B.text.placedSymbolArray:B.icon.placedSymbolArray,lt=l.transform.width/l.transform.height;let nt=!1;for(let ht=0;ht<rt.length;ht++){const bt=rt.get(ht);if(bt.hidden||bt.writingMode===a.as.vertical&&!nt){fa(bt.numGlyphs,Ze);continue}nt=!1;const st=new a.P(bt.anchorX,bt.anchorY),wt={getElevation:pe,pitchedLabelPlaneMatrix:C,lineVertexArray:et,pitchWithMap:O,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:l.transform,tileAnchorPoint:st,unwrappedTileID:Y,width:re,height:ae,translation:ge},Yt=Ya(bt.anchorX,bt.anchorY,wt);if(!oi(Yt.point,He)){fa(bt.numGlyphs,Ze);continue}const jt=zi(l.transform.cameraToCenterDistance,Yt.signedDistanceFromCamera),Nt=a.at(we,Fe,bt),qt=O?Nt*l.transform.getPitchedTextCorrection(bt.anchorX,bt.anchorY,Y)/jt:Nt*jt,gn=qi({projectionContext:wt,pitchedLabelPlaneMatrixInverse:S,symbol:bt,fontSize:qt,flip:!1,keepUpright:U,glyphOffsetArray:B.glyphOffsetArray,dynamicLayoutVertexArray:Ze,aspectRatio:lt,rotateToLine:N});nt=gn.useVertical,(gn.notEnoughRoom||nt||gn.needsFlipping&&qi({projectionContext:wt,pitchedLabelPlaneMatrixInverse:S,symbol:bt,fontSize:qt,flip:!0,keepUpright:U,glyphOffsetArray:B.glyphOffsetArray,dynamicLayoutVertexArray:Ze,aspectRatio:lt,rotateToLine:N}).notEnoughRoom)&&fa(bt.numGlyphs,Ze)}p?B.text.dynamicLayoutVertexBuffer.updateData(Ze):B.icon.dynamicLayoutVertexBuffer.updateData(Ze)}function nA(B,l,p,C,S,O,U,N){const Y=O.glyphStartIndex+O.numGlyphs,re=O.lineStartIndex,ae=O.lineStartIndex+O.lineLength,ge=l.getoffsetX(O.glyphStartIndex),pe=l.getoffsetX(Y-1),we=Uo(B*ge,p,C,S,O.segment,re,ae,N,U);if(!we)return null;const Fe=Uo(B*pe,p,C,S,O.segment,re,ae,N,U);return Fe?N.projectionCache.anyProjectionOccluded?null:{first:we,last:Fe}:null}function nu(B,l,p,C){return B===a.as.horizontal&&Math.abs(p.y-l.y)>Math.abs(p.x-l.x)*C?{useVertical:!0}:(B===a.as.vertical?l.y<p.y:l.x>p.x)?{needsFlipping:!0}:null}function qi(B){const{projectionContext:l,pitchedLabelPlaneMatrixInverse:p,symbol:C,fontSize:S,flip:O,keepUpright:U,glyphOffsetArray:N,dynamicLayoutVertexArray:Y,aspectRatio:re,rotateToLine:ae}=B,ge=S/24,pe=C.lineOffsetX*ge,we=C.lineOffsetY*ge;let Fe;if(C.numGlyphs>1){const He=C.glyphStartIndex+C.numGlyphs,Ze=C.lineStartIndex,et=C.lineStartIndex+C.lineLength,rt=nA(ge,N,pe,we,O,C,ae,l);if(!rt)return{notEnoughRoom:!0};const lt=rl(rt.first.point.x,rt.first.point.y,l,p),nt=rl(rt.last.point.x,rt.last.point.y,l,p);if(U&&!O){const ht=nu(C.writingMode,lt,nt,re);if(ht)return ht}Fe=[rt.first];for(let ht=C.glyphStartIndex+1;ht<He-1;ht++){const bt=Uo(ge*N.getoffsetX(ht),pe,we,O,C.segment,Ze,et,l,ae);if(!bt)return{notEnoughRoom:!0};Fe.push(bt)}Fe.push(rt.last)}else{if(U&&!O){const Ze=Ls(l.tileAnchorPoint.x,l.tileAnchorPoint.y,l).point,et=C.lineStartIndex+C.segment+1,rt=new a.P(l.lineVertexArray.getx(et),l.lineVertexArray.gety(et)),lt=Ls(rt.x,rt.y,l),nt=lt.signedDistanceFromCamera>0?lt.point:tc(l.tileAnchorPoint,rt,Ze,1,l),ht=rl(Ze.x,Ze.y,l,p),bt=rl(nt.x,nt.y,l,p),st=nu(C.writingMode,ht,bt,re);if(st)return st}const He=Uo(ge*N.getoffsetX(C.glyphStartIndex),pe,we,O,C.segment,C.lineStartIndex,C.lineStartIndex+C.lineLength,l,ae);if(!He||l.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};Fe=[He]}for(const He of Fe)a.az(Y,He.point,He.angle);return{}}function tc(B,l,p,C,S){const O=B.add(B.sub(l)._unit()),U=Ls(O.x,O.y,S).point,N=p.sub(U);return p.add(N._mult(C/N.mag()))}function no(B,l,p){const C=l.projectionCache;if(C.projections[B])return C.projections[B];const S=new a.P(l.lineVertexArray.getx(B),l.lineVertexArray.gety(B)),O=Ls(S.x,S.y,l);if(O.signedDistanceFromCamera>0)return C.projections[B]=O.point,C.anyProjectionOccluded=C.anyProjectionOccluded||O.isOccluded,O.point;const U=B-p.direction;return tc(p.distanceFromAnchor===0?l.tileAnchorPoint:new a.P(l.lineVertexArray.getx(U),l.lineVertexArray.gety(U)),S,p.previousVertex,p.absOffsetX-p.distanceFromAnchor+1,l)}function Ls(B,l,p){const C=B+p.translation[0],S=l+p.translation[1];let O;return p.pitchWithMap?(O=pn(C,S,p.pitchedLabelPlaneMatrix,p.getElevation),O.isOccluded=!1):(O=p.transform.projectTileCoordinates(C,S,p.unwrappedTileID,p.getElevation),O.point.x=(.5*O.point.x+.5)*p.width,O.point.y=(.5*-O.point.y+.5)*p.height),O}function rl(B,l,p,C){if(p.pitchWithMap){const S=[B,l,0,1];return a.aA(S,S,C),p.transform.projectTileCoordinates(S[0]/S[3],S[1]/S[3],p.unwrappedTileID,p.getElevation).point}return{x:B/p.width*2-1,y:1-l/p.height*2}}function Ya(B,l,p){return p.transform.projectTileCoordinates(B,l,p.unwrappedTileID,p.getElevation)}function Io(B,l,p){return B._unit()._perp()._mult(l*p)}function iA(B,l,p,C,S,O,U,N,Y){if(N.projectionCache.offsets[B])return N.projectionCache.offsets[B];const re=p.add(l);if(B+Y.direction<C||B+Y.direction>=S)return N.projectionCache.offsets[B]=re,re;const ae=no(B+Y.direction,N,Y),ge=Io(ae.sub(p),U,Y.direction),pe=p.add(ge),we=ae.add(ge);return N.projectionCache.offsets[B]=a.aB(O,re,pe,we)||re,N.projectionCache.offsets[B]}function Uo(B,l,p,C,S,O,U,N,Y){const re=C?B-l:B+l;let ae=re>0?1:-1,ge=0;C&&(ae*=-1,ge=Math.PI),ae<0&&(ge+=Math.PI);let pe,we=ae>0?O+S:O+S+1;N.projectionCache.cachedAnchorPoint?pe=N.projectionCache.cachedAnchorPoint:(pe=Ls(N.tileAnchorPoint.x,N.tileAnchorPoint.y,N).point,N.projectionCache.cachedAnchorPoint=pe);let Fe,He,Ze=pe,et=pe,rt=0,lt=0;const nt=Math.abs(re),ht=[];let bt;for(;rt+lt<=nt;){if(we+=ae,we<O||we>=U)return null;rt+=lt,et=Ze,He=Fe;const Yt={absOffsetX:nt,direction:ae,distanceFromAnchor:rt,previousVertex:et};if(Ze=no(we,N,Yt),p===0)ht.push(et),bt=Ze.sub(et);else{let jt;const Nt=Ze.sub(et);jt=Nt.mag()===0?Io(no(we+ae,N,Yt).sub(Ze),p,ae):Io(Nt,p,ae),He||(He=et.add(jt)),Fe=iA(we,jt,Ze,O,U,He,p,N,Yt),ht.push(He),bt=Fe.sub(He)}lt=bt.mag()}const st=bt._mult((nt-rt)/lt)._add(He||et),wt=ge+Math.atan2(Ze.y-et.y,Ze.x-et.x);return ht.push(st),{point:st,angle:Y?wt:0,path:ht}}const Lr=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function fa(B,l){for(let p=0;p<B;p++){const C=l.length;l.resize(C+4),l.float32.set(Lr,3*C)}}function Ho(B,l,p){const C=l[0],S=l[1];return B[0]=p[0]*C+p[4]*S+p[12],B[1]=p[1]*C+p[5]*S+p[13],B[3]=p[3]*C+p[7]*S+p[15],B}const Ko=100;class Iu{constructor(l,p=new Li(l.width+200,l.height+200,25),C=new Li(l.width+200,l.height+200,25)){this.transform=l,this.grid=p,this.ignoredGrid=C,this.pitchFactor=Math.cos(l.pitch*Math.PI/180)*l.cameraToCenterDistance,this.screenRightBoundary=l.width+Ko,this.screenBottomBoundary=l.height+Ko,this.gridRightBoundary=l.width+200,this.gridBottomBoundary=l.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(l,p,C,S,O,U,N,Y,re,ae,ge,pe){const we=this.projectAndGetPerspectiveRatio(l.anchorPointX+Y[0],l.anchorPointY+Y[1],O,ae,pe),Fe=C*we.perspectiveRatio;let He;if(U||N)He=this._projectCollisionBox(l,Fe,S,O,U,N,Y,we,ae,ge,pe);else{const bt=we.x+(ge?ge.x*Fe:0),st=we.y+(ge?ge.y*Fe:0);He={allPointsOccluded:!1,box:[bt+l.x1*Fe,st+l.y1*Fe,bt+l.x2*Fe,st+l.y2*Fe]}}const[Ze,et,rt,lt]=He.box,nt=U?He.allPointsOccluded:we.isOccluded;let ht=nt;return ht||(ht=we.perspectiveRatio<this.perspectiveRatioCutoff),ht||(ht=!this.isInsideGrid(Ze,et,rt,lt)),ht||p!=="always"&&this.grid.hitTest(Ze,et,rt,lt,p,re)?{box:[Ze,et,rt,lt],placeable:!1,offscreen:!1,occluded:nt}:{box:[Ze,et,rt,lt],placeable:!0,offscreen:this.isOffscreen(Ze,et,rt,lt),occluded:nt}}placeCollisionCircles(l,p,C,S,O,U,N,Y,re,ae,ge,pe,we,Fe){const He=[],Ze=new a.P(p.anchorX,p.anchorY),et=this.getPerspectiveRatio(Ze.x,Ze.y,U,Fe),rt=(re?O*this.transform.getPitchedTextCorrection(p.anchorX,p.anchorY,U)/et:O*et)/a.aF,lt={getElevation:Fe,pitchedLabelPlaneMatrix:N,lineVertexArray:C,pitchWithMap:re,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:Ze,unwrappedTileID:U,width:this.transform.width,height:this.transform.height,translation:we},nt=nA(rt,S,p.lineOffsetX*rt,p.lineOffsetY*rt,!1,p,!1,lt);let ht=!1,bt=!1,st=!0;if(nt){const wt=.5*ge*et+pe,Yt=new a.P(-100,-100),jt=new a.P(this.screenRightBoundary,this.screenBottomBoundary),Nt=new pr,qt=nt.first,gn=nt.last;let In=[];for(let nr=qt.path.length-1;nr>=1;nr--)In.push(qt.path[nr]);for(let nr=1;nr<gn.path.length;nr++)In.push(gn.path[nr]);const sn=2.5*wt;if(re){const nr=this.projectPathToScreenSpace(In,lt);In=nr.some((ro=>ro.signedDistanceFromCamera<=0))?[]:nr.map((ro=>ro.point))}let ti=[];if(In.length>0){const nr=In[0].clone(),ro=In[0].clone();for(let yr=1;yr<In.length;yr++)nr.x=Math.min(nr.x,In[yr].x),nr.y=Math.min(nr.y,In[yr].y),ro.x=Math.max(ro.x,In[yr].x),ro.y=Math.max(ro.y,In[yr].y);ti=nr.x>=Yt.x&&ro.x<=jt.x&&nr.y>=Yt.y&&ro.y<=jt.y?[In]:ro.x<Yt.x||nr.x>jt.x||ro.y<Yt.y||nr.y>jt.y?[]:a.aC([In],Yt.x,Yt.y,jt.x,jt.y)}for(const nr of ti){Nt.reset(nr,.25*wt);let ro=0;ro=Nt.length<=.5*wt?1:Math.ceil(Nt.paddedLength/sn)+1;for(let yr=0;yr<ro;yr++){const jo=yr/Math.max(ro-1,1),ks=Nt.lerp(jo),No=ks.x+Ko,aa=ks.y+Ko;He.push(No,aa,wt,0);const vs=No-wt,va=aa-wt,as=No+wt,oo=aa+wt;if(st=st&&this.isOffscreen(vs,va,as,oo),bt=bt||this.isInsideGrid(vs,va,as,oo),l!=="always"&&this.grid.hitTestCircle(No,aa,wt,l,ae)&&(ht=!0,!Y))return{circles:[],offscreen:!1,collisionDetected:ht}}}}return{circles:!Y&&ht||!bt||et<this.perspectiveRatioCutoff?[]:He,offscreen:st,collisionDetected:ht}}projectPathToScreenSpace(l,p){const C=(function(S,O){const U=a.M();return a.au(U,O.pitchedLabelPlaneMatrix),S.map((N=>{const Y=pn(N.x,N.y,U,O.getElevation),re=O.transform.projectTileCoordinates(Y.point.x,Y.point.y,O.unwrappedTileID,O.getElevation);return re.point.x=(.5*re.point.x+.5)*O.width,re.point.y=(.5*-re.point.y+.5)*O.height,re}))})(l,p);return(function(S){let O=0,U=0,N=0,Y=0;for(let re=0;re<S.length;re++)S[re].isOccluded?(N=re+1,Y=0):(Y++,Y>U&&(U=Y,O=N));return S.slice(O,O+U)})(C)}queryRenderedSymbols(l){if(l.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const p=[],C=new a.a6;for(const ge of l){const pe=new a.P(ge.x+Ko,ge.y+Ko);C.extend(pe),p.push(pe)}const{minX:S,minY:O,maxX:U,maxY:N}=C,Y=this.grid.query(S,O,U,N).concat(this.ignoredGrid.query(S,O,U,N)),re={},ae={};for(const ge of Y){const pe=ge.key;if(re[pe.bucketInstanceId]===void 0&&(re[pe.bucketInstanceId]={}),re[pe.bucketInstanceId][pe.featureIndex])continue;const we=[new a.P(ge.x1,ge.y1),new a.P(ge.x2,ge.y1),new a.P(ge.x2,ge.y2),new a.P(ge.x1,ge.y2)];a.aD(p,we)&&(re[pe.bucketInstanceId][pe.featureIndex]=!0,ae[pe.bucketInstanceId]===void 0&&(ae[pe.bucketInstanceId]=[]),ae[pe.bucketInstanceId].push(pe.featureIndex))}return ae}insertCollisionBox(l,p,C,S,O,U){(C?this.ignoredGrid:this.grid).insert({bucketInstanceId:S,featureIndex:O,collisionGroupID:U,overlapMode:p},l[0],l[1],l[2],l[3])}insertCollisionCircles(l,p,C,S,O,U){const N=C?this.ignoredGrid:this.grid,Y={bucketInstanceId:S,featureIndex:O,collisionGroupID:U,overlapMode:p};for(let re=0;re<l.length;re+=4)N.insertCircle(Y,l[re],l[re+1],l[re+2])}projectAndGetPerspectiveRatio(l,p,C,S,O){if(O){let U;S?(U=[l,p,S(l,p),1],a.aA(U,U,O)):(U=[l,p,0,1],Ho(U,U,O));const N=U[3];return{x:(U[0]/N+1)/2*this.transform.width+Ko,y:(-U[1]/N+1)/2*this.transform.height+Ko,perspectiveRatio:.5+this.transform.cameraToCenterDistance/N*.5,isOccluded:!1,signedDistanceFromCamera:N}}{const U=this.transform.projectTileCoordinates(l,p,C,S);return{x:(U.point.x+1)/2*this.transform.width+Ko,y:(1-U.point.y)/2*this.transform.height+Ko,perspectiveRatio:.5+this.transform.cameraToCenterDistance/U.signedDistanceFromCamera*.5,isOccluded:U.isOccluded,signedDistanceFromCamera:U.signedDistanceFromCamera}}}getPerspectiveRatio(l,p,C,S){const O=this.transform.projectTileCoordinates(l,p,C,S);return .5+this.transform.cameraToCenterDistance/O.signedDistanceFromCamera*.5}isOffscreen(l,p,C,S){return C<Ko||l>=this.screenRightBoundary||S<Ko||p>this.screenBottomBoundary}isInsideGrid(l,p,C,S){return C>=0&&l<this.gridRightBoundary&&S>=0&&p<this.gridBottomBoundary}getViewportMatrix(){const l=a.am([]);return a.N(l,l,[-100,-100,0]),l}_projectCollisionBox(l,p,C,S,O,U,N,Y,re,ae,ge){let pe=1,we=0,Fe=0,He=1;const Ze=l.anchorPointX+N[0],et=l.anchorPointY+N[1];if(U&&!O){const In=this.projectAndGetPerspectiveRatio(Ze+1,et,S,re,ge),sn=In.x-Y.x,ti=Math.atan((In.y-Y.y)/sn)+(sn<0?Math.PI:0),nr=Math.sin(ti),ro=Math.cos(ti);pe=ro,we=nr,Fe=-nr,He=ro}else if(!U&&O){const In=Ur(this.transform);pe=In.vecEast[0],we=In.vecEast[1],Fe=In.vecSouth[0],He=In.vecSouth[1]}let rt=Y.x,lt=Y.y,nt=p;O&&(rt=Ze,lt=et,nt=Math.pow(2,-(this.transform.zoom-C.overscaledZ)),nt*=this.transform.getPitchedTextCorrection(Ze,et,S),ae||(nt*=a.ai(.5+Y.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),ae&&(rt+=pe*ae.x*nt+Fe*ae.y*nt,lt+=we*ae.x*nt+He*ae.y*nt);const ht=l.x1*nt,bt=l.x2*nt,st=(ht+bt)/2,wt=l.y1*nt,Yt=l.y2*nt,jt=(wt+Yt)/2,Nt=[{offsetX:ht,offsetY:wt},{offsetX:st,offsetY:wt},{offsetX:bt,offsetY:wt},{offsetX:bt,offsetY:jt},{offsetX:bt,offsetY:Yt},{offsetX:st,offsetY:Yt},{offsetX:ht,offsetY:Yt},{offsetX:ht,offsetY:jt}];let qt=[];for(const{offsetX:In,offsetY:sn}of Nt)qt.push(new a.P(rt+pe*In+Fe*sn,lt+we*In+He*sn));let gn=!1;if(O){const In=qt.map((sn=>this.projectAndGetPerspectiveRatio(sn.x,sn.y,S,re,ge)));gn=In.some((sn=>!sn.isOccluded)),qt=In.map((sn=>new a.P(sn.x,sn.y)))}else gn=!0;return{box:a.aE(qt),allPointsOccluded:!gn}}}class iu{constructor(l,p,C,S){this.opacity=l?Math.max(0,Math.min(1,l.opacity+(l.placed?p:-p))):S&&C?1:0,this.placed=C}isHidden(){return this.opacity===0&&!this.placed}}class ru{constructor(l,p,C,S,O){this.text=new iu(l?l.text:null,p,C,O),this.icon=new iu(l?l.icon:null,p,S,O)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class nc{constructor(l,p,C){this.text=l,this.icon=p,this.skipFade=C}}class Sl{constructor(l,p,C,S,O){this.bucketInstanceId=l,this.featureIndex=p,this.sourceLayerIndex=C,this.bucketIndex=S,this.tileID=O}}class ko{constructor(l){this.crossSourceCollisions=l,this.maxGroupID=0,this.collisionGroups={}}get(l){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[l]){const p=++this.maxGroupID;this.collisionGroups[l]={ID:p,predicate:C=>C.collisionGroupID===p}}return this.collisionGroups[l]}}function ku(B,l,p,C,S){const{horizontalAlign:O,verticalAlign:U}=a.aL(B);return new a.P(-(O-.5)*l+C[0]*S,-(U-.5)*p+C[1]*S)}class ou{constructor(l,p,C,S,O){this.transform=l.clone(),this.terrain=p,this.collisionIndex=new Iu(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=C,this.retainedQueryData={},this.collisionGroups=new ko(S),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=O,O&&(O.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(l){const p=this.terrain;return p?(C,S)=>p.getElevation(l,C,S):null}getBucketParts(l,p,C,S){const O=C.getBucket(p),U=C.latestFeatureIndex;if(!O||!U||p.id!==O.layerIds[0])return;const N=C.collisionBoxArray,Y=O.layers[0].layout,re=O.layers[0].paint,ae=Math.pow(2,this.transform.zoom-C.tileID.overscaledZ),ge=C.tileSize/a.a3,pe=C.tileID.toUnwrapped(),we=Y.get("text-rotation-alignment")==="map",Fe=a.aG(C,1,this.transform.zoom),He=a.aH(this.collisionIndex.transform,C,re.get("text-translate"),re.get("text-translate-anchor")),Ze=a.aH(this.collisionIndex.transform,C,re.get("icon-translate"),re.get("icon-translate-anchor")),et=$o(we,this.transform,Fe);this.retainedQueryData[O.bucketInstanceId]=new Sl(O.bucketInstanceId,U,O.sourceLayerIndex,O.index,C.tileID);const rt={bucket:O,layout:Y,translationText:He,translationIcon:Ze,unwrappedTileID:pe,pitchedLabelPlaneMatrix:et,scale:ae,textPixelRatio:ge,holdingForFade:C.holdingForSymbolFade(),collisionBoxArray:N,partiallyEvaluatedTextSize:a.ar(O.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(O.sourceID)};if(S)for(const lt of O.sortKeyRanges){const{sortKey:nt,symbolInstanceStart:ht,symbolInstanceEnd:bt}=lt;l.push({sortKey:nt,symbolInstanceStart:ht,symbolInstanceEnd:bt,parameters:rt})}else l.push({symbolInstanceStart:0,symbolInstanceEnd:O.symbolInstances.length,parameters:rt})}attemptAnchorPlacement(l,p,C,S,O,U,N,Y,re,ae,ge,pe,we,Fe,He,Ze,et,rt,lt,nt){const ht=a.aI[l.textAnchor],bt=[l.textOffset0,l.textOffset1],st=ku(ht,C,S,bt,O),wt=this.collisionIndex.placeCollisionBox(p,pe,Y,re,ae,N,U,Ze,ge.predicate,lt,st,nt);if((!rt||this.collisionIndex.placeCollisionBox(rt,pe,Y,re,ae,N,U,et,ge.predicate,lt,st,nt).placeable)&&wt.placeable){let Yt;if(this.prevPlacement&&this.prevPlacement.variableOffsets[we.crossTileID]&&this.prevPlacement.placements[we.crossTileID]&&this.prevPlacement.placements[we.crossTileID].text&&(Yt=this.prevPlacement.variableOffsets[we.crossTileID].anchor),we.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[we.crossTileID]={textOffset:bt,width:C,height:S,anchor:ht,textBoxScale:O,prevAnchor:Yt},this.markUsedJustification(Fe,ht,we,He),Fe.allowVerticalPlacement&&(this.markUsedOrientation(Fe,He,we),this.placedOrientations[we.crossTileID]=He),{shift:st,placedGlyphBoxes:wt}}}placeLayerBucketPart(l,p,C){const{bucket:S,layout:O,translationText:U,translationIcon:N,unwrappedTileID:Y,pitchedLabelPlaneMatrix:re,textPixelRatio:ae,holdingForFade:ge,collisionBoxArray:pe,partiallyEvaluatedTextSize:we,collisionGroup:Fe}=l.parameters,He=O.get("text-optional"),Ze=O.get("icon-optional"),et=a.aJ(O,"text-overlap","text-allow-overlap"),rt=et==="always",lt=a.aJ(O,"icon-overlap","icon-allow-overlap"),nt=lt==="always",ht=O.get("text-rotation-alignment")==="map",bt=O.get("text-pitch-alignment")==="map",st=O.get("icon-text-fit")!=="none",wt=O.get("symbol-z-order")==="viewport-y",Yt=rt&&(nt||!S.hasIconData()||Ze),jt=nt&&(rt||!S.hasTextData()||He);!S.collisionArrays&&pe&&S.deserializeCollisionBoxes(pe);const Nt=this.retainedQueryData[S.bucketInstanceId].tileID,qt=this._getTerrainElevationFunc(Nt),gn=this.transform.getFastPathSimpleProjectionMatrix(Nt),In=(sn,ti,nr)=>{var ro,yr;if(p[sn.crossTileID])return;if(ge)return void(this.placements[sn.crossTileID]=new nc(!1,!1,!1));let jo=!1,ks=!1,No=!0,aa=null,vs={box:null,placeable:!1,offscreen:null,occluded:!1},va={placeable:!1},as=null,oo=null,bs=null,id=0,NA=0,mc=0;ti.textFeatureIndex?id=ti.textFeatureIndex:sn.useRuntimeCollisionCircles&&(id=sn.featureIndex),ti.verticalTextFeatureIndex&&(NA=ti.verticalTextFeatureIndex);const zu=ti.textBox;if(zu){const kl=Hs=>{let ls=a.as.horizontal;if(S.allowVerticalPlacement&&!Hs&&this.prevPlacement){const Zs=this.prevPlacement.placedOrientations[sn.crossTileID];Zs&&(this.placedOrientations[sn.crossTileID]=Zs,ls=Zs,this.markUsedOrientation(S,ls,sn))}return ls},fu=(Hs,ls)=>{if(S.allowVerticalPlacement&&sn.numVerticalGlyphVertices>0&&ti.verticalTextBox){for(const Zs of S.writingModes)if(Zs===a.as.vertical?(vs=ls(),va=vs):vs=Hs(),vs&&vs.placeable)break}else vs=Hs()},Gc=sn.textAnchorOffsetStartIndex,Tp=sn.textAnchorOffsetEndIndex;if(Tp===Gc){const Hs=(ls,Zs)=>{const Ro=this.collisionIndex.placeCollisionBox(ls,et,ae,Nt,Y,bt,ht,U,Fe.predicate,qt,void 0,gn);return Ro&&Ro.placeable&&(this.markUsedOrientation(S,Zs,sn),this.placedOrientations[sn.crossTileID]=Zs),Ro};fu((()=>Hs(zu,a.as.horizontal)),(()=>{const ls=ti.verticalTextBox;return S.allowVerticalPlacement&&sn.numVerticalGlyphVertices>0&&ls?Hs(ls,a.as.vertical):{box:null,offscreen:null}})),kl(vs&&vs.placeable)}else{let Hs=a.aI[(yr=(ro=this.prevPlacement)===null||ro===void 0?void 0:ro.variableOffsets[sn.crossTileID])===null||yr===void 0?void 0:yr.anchor];const ls=(Ro,pu,cA)=>{const Ch=Ro.x2-Ro.x1,C0=Ro.y2-Ro.y1,Rp=sn.textBoxScale,AA=st&&lt==="never"?pu:null;let GA=null,Nd=et==="never"?1:2,Dp="never";Hs&&Nd++;for(let Pp=0;Pp<Nd;Pp++){for(let Xs=Gc;Xs<Tp;Xs++){const WA=S.textAnchorOffsets.get(Xs);if(Hs&&WA.textAnchor!==Hs)continue;const If=this.attemptAnchorPlacement(WA,Ro,Ch,C0,Rp,ht,bt,ae,Nt,Y,Fe,Dp,sn,S,cA,U,N,AA,qt);if(If&&(GA=If.placedGlyphBoxes,GA&&GA.placeable))return jo=!0,aa=If.shift,GA}Hs?Hs=null:Dp=et}return C&&!GA&&(GA={box:this.collisionIndex.placeCollisionBox(zu,"always",ae,Nt,Y,bt,ht,U,Fe.predicate,qt,void 0,gn).box,offscreen:!1,placeable:!1,occluded:!1}),GA};fu((()=>ls(zu,ti.iconBox,a.as.horizontal)),(()=>{const Ro=ti.verticalTextBox;return S.allowVerticalPlacement&&(!vs||!vs.placeable)&&sn.numVerticalGlyphVertices>0&&Ro?ls(Ro,ti.verticalIconBox,a.as.vertical):{box:null,occluded:!0,offscreen:null}})),vs&&(jo=vs.placeable,No=vs.offscreen);const Zs=kl(vs&&vs.placeable);if(!jo&&this.prevPlacement){const Ro=this.prevPlacement.variableOffsets[sn.crossTileID];Ro&&(this.variableOffsets[sn.crossTileID]=Ro,this.markUsedJustification(S,Ro.anchor,sn,Zs))}}}if(as=vs,jo=as&&as.placeable,No=as&&as.offscreen,sn.useRuntimeCollisionCircles&&sn.centerJustifiedTextSymbolIndex>=0){const kl=S.text.placedSymbolArray.get(sn.centerJustifiedTextSymbolIndex),fu=a.at(S.textSizeData,we,kl),Gc=O.get("text-padding");oo=this.collisionIndex.placeCollisionCircles(et,kl,S.lineVertexArray,S.glyphOffsetArray,fu,Y,re,C,bt,Fe.predicate,sn.collisionCircleDiameter,Gc,U,qt),oo.circles.length&&oo.collisionDetected&&!C&&a.w("Collisions detected, but collision boxes are not shown"),jo=rt||oo.circles.length>0&&!oo.collisionDetected,No=No&&oo.offscreen}if(ti.iconFeatureIndex&&(mc=ti.iconFeatureIndex),ti.iconBox){const kl=fu=>this.collisionIndex.placeCollisionBox(fu,lt,ae,Nt,Y,bt,ht,N,Fe.predicate,qt,st&&aa?aa:void 0,gn);va&&va.placeable&&ti.verticalIconBox?(bs=kl(ti.verticalIconBox),ks=bs.placeable):(bs=kl(ti.iconBox),ks=bs.placeable),No=No&&bs.offscreen}const rd=He||sn.numHorizontalGlyphVertices===0&&sn.numVerticalGlyphVertices===0,bh=Ze||sn.numIconVertices===0;rd||bh?bh?rd||(ks=ks&&jo):jo=ks&&jo:ks=jo=ks&&jo;const Vl=ks&&bs.placeable;if(jo&&as.placeable&&this.collisionIndex.insertCollisionBox(as.box,et,O.get("text-ignore-placement"),S.bucketInstanceId,va&&va.placeable&&NA?NA:id,Fe.ID),Vl&&this.collisionIndex.insertCollisionBox(bs.box,lt,O.get("icon-ignore-placement"),S.bucketInstanceId,mc,Fe.ID),oo&&jo&&this.collisionIndex.insertCollisionCircles(oo.circles,et,O.get("text-ignore-placement"),S.bucketInstanceId,id,Fe.ID),C&&this.storeCollisionData(S.bucketInstanceId,nr,ti,as,bs,oo),sn.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(S.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[sn.crossTileID]=new nc((jo||Yt)&&!as?.occluded,(ks||jt)&&!bs?.occluded,No||S.justReloaded),p[sn.crossTileID]=!0};if(wt){if(l.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const sn=S.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let ti=sn.length-1;ti>=0;--ti){const nr=sn[ti];In(S.symbolInstances.get(nr),S.collisionArrays[nr],nr)}}else for(let sn=l.symbolInstanceStart;sn<l.symbolInstanceEnd;sn++)In(S.symbolInstances.get(sn),S.collisionArrays[sn],sn);S.justReloaded=!1}storeCollisionData(l,p,C,S,O,U){if(C.textBox||C.iconBox){let N,Y;this.collisionBoxArrays.has(l)?N=this.collisionBoxArrays.get(l):(N=new Map,this.collisionBoxArrays.set(l,N)),N.has(p)?Y=N.get(p):(Y={text:null,icon:null},N.set(p,Y)),C.textBox&&(Y.text=S.box),C.iconBox&&(Y.icon=O.box)}if(U){let N=this.collisionCircleArrays[l];N===void 0&&(N=this.collisionCircleArrays[l]=[]);for(let Y=0;Y<U.circles.length;Y+=4)N.push(U.circles[Y+0]-Ko),N.push(U.circles[Y+1]-Ko),N.push(U.circles[Y+2]),N.push(U.collisionDetected?1:0)}}markUsedJustification(l,p,C,S){let O;O=S===a.as.vertical?C.verticalPlacedTextSymbolIndex:{left:C.leftJustifiedTextSymbolIndex,center:C.centerJustifiedTextSymbolIndex,right:C.rightJustifiedTextSymbolIndex}[a.aK(p)];const U=[C.leftJustifiedTextSymbolIndex,C.centerJustifiedTextSymbolIndex,C.rightJustifiedTextSymbolIndex,C.verticalPlacedTextSymbolIndex];for(const N of U)N>=0&&(l.text.placedSymbolArray.get(N).crossTileID=O>=0&&N!==O?0:C.crossTileID)}markUsedOrientation(l,p,C){const S=p===a.as.horizontal||p===a.as.horizontalOnly?p:0,O=p===a.as.vertical?p:0,U=[C.leftJustifiedTextSymbolIndex,C.centerJustifiedTextSymbolIndex,C.rightJustifiedTextSymbolIndex];for(const N of U)l.text.placedSymbolArray.get(N).placedOrientation=S;C.verticalPlacedTextSymbolIndex&&(l.text.placedSymbolArray.get(C.verticalPlacedTextSymbolIndex).placedOrientation=O)}commit(l){this.commitTime=l,this.zoomAtLastRecencyCheck=this.transform.zoom;const p=this.prevPlacement;let C=!1;this.prevZoomAdjustment=p?p.zoomAdjustment(this.transform.zoom):0;const S=p?p.symbolFadeChange(l):1,O=p?p.opacities:{},U=p?p.variableOffsets:{},N=p?p.placedOrientations:{};for(const Y in this.placements){const re=this.placements[Y],ae=O[Y];ae?(this.opacities[Y]=new ru(ae,S,re.text,re.icon),C=C||re.text!==ae.text.placed||re.icon!==ae.icon.placed):(this.opacities[Y]=new ru(null,S,re.text,re.icon,re.skipFade),C=C||re.text||re.icon)}for(const Y in O){const re=O[Y];if(!this.opacities[Y]){const ae=new ru(re,S,!1,!1);ae.isHidden()||(this.opacities[Y]=ae,C=C||re.text.placed||re.icon.placed)}}for(const Y in U)this.variableOffsets[Y]||!this.opacities[Y]||this.opacities[Y].isHidden()||(this.variableOffsets[Y]=U[Y]);for(const Y in N)this.placedOrientations[Y]||!this.opacities[Y]||this.opacities[Y].isHidden()||(this.placedOrientations[Y]=N[Y]);if(p&&p.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");C?this.lastPlacementChangeTime=l:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=p?p.lastPlacementChangeTime:l)}updateLayerOpacities(l,p){const C={};for(const S of p){const O=S.getBucket(l);O&&S.latestFeatureIndex&&l.id===O.layerIds[0]&&this.updateBucketOpacities(O,S.tileID,C,S.collisionBoxArray)}}updateBucketOpacities(l,p,C,S){l.hasTextData()&&(l.text.opacityVertexArray.clear(),l.text.hasVisibleVertices=!1),l.hasIconData()&&(l.icon.opacityVertexArray.clear(),l.icon.hasVisibleVertices=!1),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexArray.clear(),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexArray.clear();const O=l.layers[0],U=O.layout,N=new ru(null,0,!1,!1,!0),Y=U.get("text-allow-overlap"),re=U.get("icon-allow-overlap"),ae=O._unevaluatedLayout.hasValue("text-variable-anchor")||O._unevaluatedLayout.hasValue("text-variable-anchor-offset"),ge=U.get("text-rotation-alignment")==="map",pe=U.get("text-pitch-alignment")==="map",we=U.get("icon-text-fit")!=="none",Fe=new ru(null,0,Y&&(re||!l.hasIconData()||U.get("icon-optional")),re&&(Y||!l.hasTextData()||U.get("text-optional")),!0);!l.collisionArrays&&S&&(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData())&&l.deserializeCollisionBoxes(S);const He=(et,rt,lt)=>{for(let nt=0;nt<rt/4;nt++)et.opacityVertexArray.emplaceBack(lt);et.hasVisibleVertices=et.hasVisibleVertices||lt!==qa},Ze=this.collisionBoxArrays.get(l.bucketInstanceId);for(let et=0;et<l.symbolInstances.length;et++){const rt=l.symbolInstances.get(et),{numHorizontalGlyphVertices:lt,numVerticalGlyphVertices:nt,crossTileID:ht}=rt;let bt=this.opacities[ht];C[ht]?bt=N:bt||(bt=Fe,this.opacities[ht]=bt),C[ht]=!0;const st=rt.numIconVertices>0,wt=this.placedOrientations[rt.crossTileID],Yt=wt===a.as.vertical,jt=wt===a.as.horizontal||wt===a.as.horizontalOnly;if(lt>0||nt>0){const qt=Ll(bt.text);He(l.text,lt,Yt?qa:qt),He(l.text,nt,jt?qa:qt);const gn=bt.text.isHidden();[rt.rightJustifiedTextSymbolIndex,rt.centerJustifiedTextSymbolIndex,rt.leftJustifiedTextSymbolIndex].forEach((ti=>{ti>=0&&(l.text.placedSymbolArray.get(ti).hidden=gn||Yt?1:0)})),rt.verticalPlacedTextSymbolIndex>=0&&(l.text.placedSymbolArray.get(rt.verticalPlacedTextSymbolIndex).hidden=gn||jt?1:0);const In=this.variableOffsets[rt.crossTileID];In&&this.markUsedJustification(l,In.anchor,rt,wt);const sn=this.placedOrientations[rt.crossTileID];sn&&(this.markUsedJustification(l,"left",rt,sn),this.markUsedOrientation(l,sn,rt))}if(st){const qt=Ll(bt.icon),gn=!(we&&rt.verticalPlacedIconSymbolIndex&&Yt);rt.placedIconSymbolIndex>=0&&(He(l.icon,rt.numIconVertices,gn?qt:qa),l.icon.placedSymbolArray.get(rt.placedIconSymbolIndex).hidden=bt.icon.isHidden()),rt.verticalPlacedIconSymbolIndex>=0&&(He(l.icon,rt.numVerticalIconVertices,gn?qa:qt),l.icon.placedSymbolArray.get(rt.verticalPlacedIconSymbolIndex).hidden=bt.icon.isHidden())}const Nt=Ze&&Ze.has(et)?Ze.get(et):{text:null,icon:null};if(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData()){const qt=l.collisionArrays[et];if(qt){let gn=new a.P(0,0);if(qt.textBox||qt.verticalTextBox){let In=!0;if(ae){const sn=this.variableOffsets[ht];sn?(gn=ku(sn.anchor,sn.width,sn.height,sn.textOffset,sn.textBoxScale),ge&&gn._rotate(pe?-this.transform.bearingInRadians:this.transform.bearingInRadians)):In=!1}if(qt.textBox||qt.verticalTextBox){let sn;qt.textBox&&(sn=Yt),qt.verticalTextBox&&(sn=jt),ic(l.textCollisionBox.collisionVertexArray,bt.text.placed,!In||sn,Nt.text,gn.x,gn.y)}}if(qt.iconBox||qt.verticalIconBox){const In=!!(!jt&&qt.verticalIconBox);let sn;qt.iconBox&&(sn=In),qt.verticalIconBox&&(sn=!In),ic(l.iconCollisionBox.collisionVertexArray,bt.icon.placed,sn,Nt.icon,we?gn.x:0,we?gn.y:0)}}}}if(l.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[l.bucketInstanceId]&&(this.retainedQueryData[l.bucketInstanceId].featureSortOrder=l.featureSortOrder),l.hasTextData()&&l.text.opacityVertexBuffer&&l.text.opacityVertexBuffer.updateData(l.text.opacityVertexArray),l.hasIconData()&&l.icon.opacityVertexBuffer&&l.icon.opacityVertexBuffer.updateData(l.icon.opacityVertexArray),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexBuffer&&l.iconCollisionBox.collisionVertexBuffer.updateData(l.iconCollisionBox.collisionVertexArray),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexBuffer&&l.textCollisionBox.collisionVertexBuffer.updateData(l.textCollisionBox.collisionVertexArray),l.text.opacityVertexArray.length!==l.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${l.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${l.text.layoutVertexArray.length}) / 4`);if(l.icon.opacityVertexArray.length!==l.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${l.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${l.icon.layoutVertexArray.length}) / 4`);l.bucketInstanceId in this.collisionCircleArrays&&(l.collisionCircleArray=this.collisionCircleArrays[l.bucketInstanceId],delete this.collisionCircleArrays[l.bucketInstanceId])}symbolFadeChange(l){return this.fadeDuration===0?1:(l-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(l){return Math.max(0,(this.transform.zoom-l)/1.5)}hasTransitions(l){return this.stale||l-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(l,p){const C=this.zoomAtLastRecencyCheck===p?1-this.zoomAdjustment(p):1;return this.zoomAtLastRecencyCheck=p,this.commitTime+this.fadeDuration*C>l}setStale(){this.stale=!0}}function ic(B,l,p,C,S,O){C&&C.length!==0||(C=[0,0,0,0]);const U=C[0]-Ko,N=C[1]-Ko,Y=C[2]-Ko,re=C[3]-Ko;B.emplaceBack(l?1:0,p?1:0,S||0,O||0,U,N),B.emplaceBack(l?1:0,p?1:0,S||0,O||0,Y,N),B.emplaceBack(l?1:0,p?1:0,S||0,O||0,Y,re),B.emplaceBack(l?1:0,p?1:0,S||0,O||0,U,re)}const rc=Math.pow(2,25),kc=Math.pow(2,24),Lh=Math.pow(2,17),pa=Math.pow(2,16),Tc=Math.pow(2,9),Tu=Math.pow(2,8),rA=Math.pow(2,1);function Ll(B){if(B.opacity===0&&!B.placed)return 0;if(B.opacity===1&&B.placed)return 4294967295;const l=B.placed?1:0,p=Math.floor(127*B.opacity);return p*rc+l*kc+p*Lh+l*pa+p*Tc+l*Tu+p*rA+l}const qa=0;class Ss{constructor(l){this._sortAcrossTiles=l.layout.get("symbol-z-order")!=="viewport-y"&&!l.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(l,p,C,S,O){const U=this._bucketParts;for(;this._currentTileIndex<l.length;)if(p.getBucketParts(U,S,l[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,O())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,U.sort(((N,Y)=>N.sortKey-Y.sortKey)));this._currentPartIndex<U.length;)if(p.placeLayerBucketPart(U[this._currentPartIndex],this._seenCrossTileIDs,C),this._currentPartIndex++,O())return!0;return!1}}class Mo{constructor(l,p,C,S,O,U,N,Y){this.placement=new ou(l,p,U,N,Y),this._currentPlacementIndex=C.length-1,this._forceFullPlacement=S,this._showCollisionBoxes=O,this._done=!1}isDone(){return this._done}continuePlacement(l,p,C){const S=D(),O=()=>!this._forceFullPlacement&&D()-S>2;for(;this._currentPlacementIndex>=0;){const U=p[l[this._currentPlacementIndex]],N=this.placement.collisionIndex.transform.zoom;if(U.type==="symbol"&&(!U.minzoom||U.minzoom<=N)&&(!U.maxzoom||U.maxzoom>N)){if(this._inProgressLayer||(this._inProgressLayer=new Ss(U)),this._inProgressLayer.continuePlacement(C[U.source],this.placement,this._showCollisionBoxes,U,O))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(l){return this.placement.commit(l),this.placement}}const Va=512/a.a3/2;class Ru{constructor(l,p,C){this.tileID=l,this.bucketInstanceId=C,this._symbolsByKey={};const S=new Map;for(let O=0;O<p.length;O++){const U=p.get(O),N=U.key,Y=S.get(N);Y?Y.push(U):S.set(N,[U])}for(const[O,U]of S){const N={positions:U.map((Y=>({x:Math.floor(Y.anchorX*Va),y:Math.floor(Y.anchorY*Va)}))),crossTileIDs:U.map((Y=>Y.crossTileID))};if(N.positions.length>128){const Y=new a.aM(N.positions.length,16,Uint16Array);for(const{x:re,y:ae}of N.positions)Y.add(re,ae);Y.finish(),delete N.positions,N.index=Y}this._symbolsByKey[O]=N}}getScaledCoordinates(l,p){const{x:C,y:S,z:O}=this.tileID.canonical,{x:U,y:N,z:Y}=p.canonical,re=Va/Math.pow(2,Y-O),ae=(N*a.a3+l.anchorY)*re,ge=S*a.a3*Va;return{x:Math.floor((U*a.a3+l.anchorX)*re-C*a.a3*Va),y:Math.floor(ae-ge)}}findMatches(l,p,C){const S=this.tileID.canonical.z<p.canonical.z?1:Math.pow(2,this.tileID.canonical.z-p.canonical.z);for(let O=0;O<l.length;O++){const U=l.get(O);if(U.crossTileID)continue;const N=this._symbolsByKey[U.key];if(!N)continue;const Y=this.getScaledCoordinates(U,p);if(N.index){const re=N.index.range(Y.x-S,Y.y-S,Y.x+S,Y.y+S).sort();for(const ae of re){const ge=N.crossTileIDs[ae];if(!C[ge]){C[ge]=!0,U.crossTileID=ge;break}}}else if(N.positions)for(let re=0;re<N.positions.length;re++){const ae=N.positions[re],ge=N.crossTileIDs[re];if(Math.abs(ae.x-Y.x)<=S&&Math.abs(ae.y-Y.y)<=S&&!C[ge]){C[ge]=!0,U.crossTileID=ge;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map((({crossTileIDs:l})=>l))}}class Qs{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class _A{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(l){const p=Math.round((l-this.lng)/360);if(p!==0)for(const C in this.indexes){const S=this.indexes[C],O={};for(const U in S){const N=S[U];N.tileID=N.tileID.unwrapTo(N.tileID.wrap+p),O[N.tileID.key]=N}this.indexes[C]=O}this.lng=l}addBucket(l,p,C){if(this.indexes[l.overscaledZ]&&this.indexes[l.overscaledZ][l.key]){if(this.indexes[l.overscaledZ][l.key].bucketInstanceId===p.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(l.overscaledZ,this.indexes[l.overscaledZ][l.key])}for(let O=0;O<p.symbolInstances.length;O++)p.symbolInstances.get(O).crossTileID=0;this.usedCrossTileIDs[l.overscaledZ]||(this.usedCrossTileIDs[l.overscaledZ]={});const S=this.usedCrossTileIDs[l.overscaledZ];for(const O in this.indexes){const U=this.indexes[O];if(Number(O)>l.overscaledZ)for(const N in U){const Y=U[N];Y.tileID.isChildOf(l)&&Y.findMatches(p.symbolInstances,l,S)}else{const N=U[l.scaledTo(Number(O)).key];N&&N.findMatches(p.symbolInstances,l,S)}}for(let O=0;O<p.symbolInstances.length;O++){const U=p.symbolInstances.get(O);U.crossTileID||(U.crossTileID=C.generate(),S[U.crossTileID]=!0)}return this.indexes[l.overscaledZ]===void 0&&(this.indexes[l.overscaledZ]={}),this.indexes[l.overscaledZ][l.key]=new Ru(l,p.symbolInstances,p.bucketInstanceId),!0}removeBucketCrossTileIDs(l,p){for(const C of p.getCrossTileIDsLists())for(const S of C)delete this.usedCrossTileIDs[l][S]}removeStaleBuckets(l){let p=!1;for(const C in this.indexes){const S=this.indexes[C];for(const O in S)l[S[O].bucketInstanceId]||(this.removeBucketCrossTileIDs(C,S[O]),delete S[O],p=!0)}return p}}class Fl{constructor(){this.layerIndexes={},this.crossTileIDs=new Qs,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(l,p,C){let S=this.layerIndexes[l.id];S===void 0&&(S=this.layerIndexes[l.id]=new _A);let O=!1;const U={};S.handleWrapJump(C);for(const N of p){const Y=N.getBucket(l);Y&&l.id===Y.layerIds[0]&&(Y.bucketInstanceId||(Y.bucketInstanceId=++this.maxBucketInstanceId),S.addBucket(N.tileID,Y,this.crossTileIDs)&&(O=!0),U[Y.bucketInstanceId]=!0)}return S.removeStaleBuckets(U)&&(O=!0),O}pruneUnusedLayers(l){const p={};l.forEach((C=>{p[C]=!0}));for(const C in this.layerIndexes)p[C]||delete this.layerIndexes[C]}}var Du="void main() {fragColor=vec4(1.0);}";const Fi={prelude:Vi(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:Vi("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:Vi("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:Vi(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:Vi(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Vi(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Vi(Du,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:Vi(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:Vi(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Vi("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Vi("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),colorRelief:Vi(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;uniform vec4 u_unpack;uniform sampler2D u_elevation_stops;uniform sampler2D u_color_stops;uniform int u_color_ramp_size;uniform float u_opacity;in vec2 v_pos;float getElevation(vec2 coord) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}float getElevationStop(int stop) {float x=(float(stop)+0.5)/float(u_color_ramp_size);vec4 data=texture(u_elevation_stops,vec2(x,0))*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {float el=getElevation(v_pos);int r=(u_color_ramp_size-1);int l=0;float el_l=getElevationStop(l);float el_r=getElevationStop(r);while(r-l > 1){int m=(r+l)/2;float el_m=getElevationStop(m);if(el < el_m){r=m;el_r=el_m;}else
{l=m;el_l=el_m;}}float x=(float(l)+(el-el_l)/(el_r-el_l)+0.5)/float(u_color_ramp_size);fragColor=u_opacity*texture(u_color_stops,vec2(x,0));
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_dimension;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_pos/8192.0)*scale+epsilon;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),debug:Vi("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:Vi(Du,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:Vi(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:Vi(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:Vi(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:Vi(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Vi(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Vi(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Vi(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Vi(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];
#define PI 3.141592653589793
#define STANDARD 0
#define COMBINED 1
#define IGOR 2
#define MULTIDIRECTIONAL 3
#define BASIC 4
float get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else
{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else
{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;if (u_method==BASIC) {basic_hillshade(deriv);} else if (u_method==COMBINED) {combined_hillshade(deriv);} else if (u_method==IGOR) {igor_hillshade(deriv);} else if (u_method==MULTIDIRECTIONAL) {multidirectional_hillshade(deriv);} else if (u_method==STANDARD) {standard_hillshade(deriv);} else {standard_hillshade(deriv);}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:Vi(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Vi(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Vi(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Vi(`uniform lowp float u_device_pixel_ratio;uniform lowp float u_lineatlas_width;uniform sampler2D u_image;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0/u_device_pixel_ratio)/min(dasharray_from.w,dasharray_to.w);alpha*=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),lineGradientSDF:Vi(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform sampler2D u_image_dash;uniform float u_mix;uniform lowp float u_lineatlas_width;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);float sdfdist_a=texture(u_image_dash,v_tex_a).a;float sdfdist_b=texture(u_image_dash,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0)/min(dasharray_from.w,dasharray_to.w);float dash_alpha=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*dash_alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;out vec2 v_tex_a;out vec2 v_tex_b;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;float texel_height=1.0/u_image_height;float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),raster:Vi(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:Vi(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Vi(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Vi(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Vi("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:Vi("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:Vi("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:Vi("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:Vi(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:Vi("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function Vi(B,l){const p=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,C=l.match(/in ([\w]+) ([\w]+)/g),S=B.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),O=l.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),U=O?O.concat(S):S,N={};return{fragmentSource:B=B.replace(p,((Y,re,ae,ge,pe)=>(N[pe]=!0,re==="define"?`
#ifndef HAS_UNIFORM_u_${pe}
in ${ae} ${ge} ${pe};
#else
uniform ${ae} ${ge} u_${pe};
#endif
`:`
#ifdef HAS_UNIFORM_u_${pe}
    ${ae} ${ge} ${pe} = u_${pe};
#endif
`))),vertexSource:l=l.replace(p,((Y,re,ae,ge,pe)=>{const we=ge==="float"?"vec2":"vec4",Fe=pe.match(/color/)?"color":we;return N[pe]?re==="define"?`
#ifndef HAS_UNIFORM_u_${pe}
uniform lowp float u_${pe}_t;
in ${ae} ${we} a_${pe};
out ${ae} ${ge} ${pe};
#else
uniform ${ae} ${ge} u_${pe};
#endif
`:Fe==="vec4"?`
#ifndef HAS_UNIFORM_u_${pe}
    ${pe} = a_${pe};
#else
    ${ae} ${ge} ${pe} = u_${pe};
#endif
`:`
#ifndef HAS_UNIFORM_u_${pe}
    ${pe} = unpack_mix_${Fe}(a_${pe}, u_${pe}_t);
#else
    ${ae} ${ge} ${pe} = u_${pe};
#endif
`:re==="define"?`
#ifndef HAS_UNIFORM_u_${pe}
uniform lowp float u_${pe}_t;
in ${ae} ${we} a_${pe};
#else
uniform ${ae} ${ge} u_${pe};
#endif
`:Fe==="vec4"?`
#ifndef HAS_UNIFORM_u_${pe}
    ${ae} ${ge} ${pe} = a_${pe};
#else
    ${ae} ${ge} ${pe} = u_${pe};
#endif
`:`
#ifndef HAS_UNIFORM_u_${pe}
    ${ae} ${ge} ${pe} = unpack_mix_${Fe}(a_${pe}, u_${pe}_t);
#else
    ${ae} ${ge} ${pe} = u_${pe};
#endif
`})),staticAttributes:C,staticUniforms:U}}class Co{constructor(l,p,C){this.vertexBuffer=l,this.indexBuffer=p,this.segments=C}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var Ia=a.aN([{name:"a_pos",type:"Int16",components:2}]);const is="#define PROJECTION_MERCATOR",go="mercator";class ms{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return go}get shaderDefine(){return is}get shaderPreludeCode(){return Fi.projectionMercator}get vertexShaderPreludeCode(){return Fi.projectionMercator.vertexSource}get subdivisionGranularity(){return a.aO.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(l){}getMeshFromTileID(l,p,C,S,O){if(this._cachedMesh)return this._cachedMesh;const U=new a.aP;U.emplaceBack(0,0),U.emplaceBack(a.a3,0),U.emplaceBack(0,a.a3),U.emplaceBack(a.a3,a.a3);const N=l.createVertexBuffer(U,Ia.members),Y=a.aQ.simpleSegment(0,0,4,2),re=new a.aR;re.emplaceBack(1,0,2),re.emplaceBack(1,2,3);const ae=l.createIndexBuffer(re);return this._cachedMesh=new Co(N,ae,Y),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(l){}}class uo{constructor(l=0,p=0,C=0,S=0){if(isNaN(l)||l<0||isNaN(p)||p<0||isNaN(C)||C<0||isNaN(S)||S<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=l,this.bottom=p,this.left=C,this.right=S}interpolate(l,p,C){return p.top!=null&&l.top!=null&&(this.top=a.F.number(l.top,p.top,C)),p.bottom!=null&&l.bottom!=null&&(this.bottom=a.F.number(l.bottom,p.bottom,C)),p.left!=null&&l.left!=null&&(this.left=a.F.number(l.left,p.left,C)),p.right!=null&&l.right!=null&&(this.right=a.F.number(l.right,p.right,C)),this}getCenter(l,p){const C=a.ai((this.left+l-this.right)/2,0,l),S=a.ai((this.top+p-this.bottom)/2,0,p);return new a.P(C,S)}equals(l){return this.top===l.top&&this.bottom===l.bottom&&this.left===l.left&&this.right===l.right}clone(){return new uo(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function yo(B,l){if(!B.renderWorldCopies||B.lngRange)return;const p=l.lng-B.center.lng;l.lng+=p>180?-360:p<-180?360:0}function zl(B){return Math.max(0,Math.floor(B))}class vo{constructor(l,p){var C;this._callbacks=l,this._tileSize=512,this._renderWorldCopies=p?.renderWorldCopies===void 0||!!p?.renderWorldCopies,this._minZoom=p?.minZoom||0,this._maxZoom=p?.maxZoom||22,this._minPitch=p?.minPitch==null?0:p?.minPitch,this._maxPitch=p?.maxPitch==null?60:p?.maxPitch,this._constrain=(C=p?.constrain)!==null&&C!==void 0?C:this._callbacks.constrain,this.setMaxBounds(),this._width=0,this._height=0,this._center=new a.U(0,0),this._elevation=0,this._zoom=0,this._tileZoom=zl(this._zoom),this._scale=a.al(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new uo,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(l,p,C){this._latRange=l.latRange,this._lngRange=l.lngRange,this._width=l.width,this._height=l.height,this._center=l.center,this._elevation=l.elevation,this._minElevationForCurrentTile=l.minElevationForCurrentTile,this._zoom=l.zoom,this._tileZoom=zl(this._zoom),this._scale=a.al(this._zoom),this._bearingInRadians=l.bearingInRadians,this._fovInRadians=l.fovInRadians,this._pitchInRadians=l.pitchInRadians,this._rollInRadians=l.rollInRadians,this._unmodified=l.unmodified,this._edgeInsets=new uo(l.padding.top,l.padding.bottom,l.padding.left,l.padding.right),this._minZoom=l.minZoom,this._maxZoom=l.maxZoom,this._minPitch=l.minPitch,this._maxPitch=l.maxPitch,this._renderWorldCopies=l.renderWorldCopies,this._cameraToCenterDistance=l.cameraToCenterDistance,this._nearZ=l.nearZ,this._farZ=l.farZ,this._autoCalculateNearFarZ=!C&&l.autoCalculateNearFarZ,p&&this.constrainInternal(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(l){this._minElevationForCurrentTile=l}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(l){this._minZoom!==l&&(this._minZoom=l,this.setZoom(this.constrain(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(l){this._maxZoom!==l&&(this._maxZoom=l,this.setZoom(this.constrain(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(l){this._minPitch!==l&&(this._minPitch=l,this.setPitch(Math.max(this.pitch,l)))}get maxPitch(){return this._maxPitch}setMaxPitch(l){this._maxPitch!==l&&(this._maxPitch=l,this.setPitch(Math.min(this.pitch,l)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(l){l===void 0?l=!0:l===null&&(l=!1),this._renderWorldCopies=l}get constrain(){return this._constrain}setConstrain(l){l||(l=this._callbacks.constrain),this._constrain=l,this.constrainInternal(),this._calcMatrices()}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new a.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(l){const p=a.V(l,-180,180)*Math.PI/180;var C,S,O,U,N,Y,re,ae,ge;this._bearingInRadians!==p&&(this._unmodified=!1,this._bearingInRadians=p,this._calcMatrices(),this._rotationMatrix=h(),C=this._rotationMatrix,O=-this._bearingInRadians,U=(S=this._rotationMatrix)[0],N=S[1],Y=S[2],re=S[3],ae=Math.sin(O),ge=Math.cos(O),C[0]=U*ge+Y*ae,C[1]=N*ge+re*ae,C[2]=U*-ae+Y*ge,C[3]=N*-ae+re*ge)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(l){const p=a.ai(l,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==p&&(this._unmodified=!1,this._pitchInRadians=p,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(l){const p=l/180*Math.PI;this._rollInRadians!==p&&(this._unmodified=!1,this._rollInRadians=p,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return a.aS(this._fovInRadians)}setFov(l){l=a.ai(l,.1,150),this.fov!==l&&(this._unmodified=!1,this._fovInRadians=a.ak(l),this._calcMatrices())}get zoom(){return this._zoom}setZoom(l){const p=this.constrain(this._center,l).zoom;this._zoom!==p&&(this._unmodified=!1,this._zoom=p,this._tileZoom=Math.max(0,Math.floor(p)),this._scale=a.al(p),this.constrainInternal(),this._calcMatrices())}get center(){return this._center}setCenter(l){l.lat===this._center.lat&&l.lng===this._center.lng||(this._unmodified=!1,this._center=l,this.constrainInternal(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(l){l!==this._elevation&&(this._elevation=l,this.constrainInternal(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(l){this._edgeInsets.equals(l)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,l,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(l,p){this._autoCalculateNearFarZ=!1,this._nearZ=l,this._farZ=p,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(l){return this._edgeInsets.equals(l)}interpolatePadding(l,p,C){this._unmodified=!1,this._edgeInsets.interpolate(l,p,C),this.constrainInternal(),this._calcMatrices()}resize(l,p,C=!0){this._width=l,this._height=p,C&&this.constrainInternal(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new kt([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(l){l?(this._lngRange=[l.getWest(),l.getEast()],this._latRange=[l.getSouth(),l.getNorth()],this.constrainInternal()):(this._lngRange=null,this._latRange=[-a.aj,a.aj])}getCameraQueryGeometry(l,p){if(p.length===1)return[p[0],l];{const{minX:C,minY:S,maxX:O,maxY:U}=a.a6.fromPoints(p).extend(l);return[new a.P(C,S),new a.P(O,S),new a.P(O,U),new a.P(C,U),new a.P(C,S)]}}constrainInternal(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const l=this._unmodified,{center:p,zoom:C}=this.constrain(this.center,this.zoom);this.setCenter(p),this.setZoom(C),this._unmodified=l,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let l=a.am(new Float64Array(16));a.O(l,l,[this._width/2,-this._height/2,1]),a.N(l,l,[1,-1,0]),this._clipSpaceToPixelsMatrix=l,l=a.am(new Float64Array(16)),a.O(l,l,[1,-1,1]),a.N(l,l,[-1,-1,0]),a.O(l,l,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=l,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(l,p,C,S){const O=C!==void 0?C:this.bearing,U=S=S!==void 0?S:this.pitch,N=a.a5.fromLngLat(l,p),Y=-Math.cos(a.ak(U)),re=Math.sin(a.ak(U)),ae=re*Math.sin(a.ak(O)),ge=-re*Math.cos(a.ak(O));let pe=this.elevation;const we=p-pe;let Fe;Y*we>=0||Math.abs(Y)<.1?(Fe=1e4,pe=p+Fe*Y):Fe=-we/Y;let He,Ze,et=a.aT(1,N.y),rt=0;do{if(rt+=1,rt>10)break;Ze=Fe/et,He=new a.a5(N.x+ae*Ze,N.y+ge*Ze),et=1/He.meterInMercatorCoordinateUnits()}while(Math.abs(Fe-Ze*et)>1e-12);return{center:He.toLngLat(),elevation:pe,zoom:a.ao(this.height/2/Math.tan(this.fovInRadians/2)/Ze/this.tileSize)}}recalculateZoomAndCenter(l){if(this.elevation-l==0)return;const p=a.an(1,this.center.lat)*this.worldSize,C=this.cameraToCenterDistance/p,S=a.a5.fromLngLat(this.center,this.elevation),O=dt(this.center,this.elevation,this.pitch,this.bearing,C);this._elevation=l;const U=this.calculateCenterFromCameraLngLatAlt(O.toLngLat(),a.aT(O.z,S.y),this.bearing,this.pitch);this._elevation=U.elevation,this._center=U.center,this.setZoom(U.zoom)}getCameraPoint(){const l=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.P(l*Math.sin(this.rollInRadians),l*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const l=a.an(1,this.center.lat)*this.worldSize;return dt(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/l).toLngLat()}getMercatorTileCoordinates(l){if(!l)return[0,0,1,1];const p=l.canonical.z>=0?1<<l.canonical.z:Math.pow(2,l.canonical.z);return[l.canonical.x/p,l.canonical.y/p,1/p/a.a3,1/p/a.a3]}}class Es{constructor(l,p){this.min=l,this.max=p,this.center=a.aU([],a.aV([],this.min,this.max),.5)}quadrant(l){const p=[l%2==0,l<2],C=a.aW(this.min),S=a.aW(this.max);for(let O=0;O<p.length;O++)C[O]=p[O]?this.min[O]:this.center[O],S[O]=p[O]?this.center[O]:this.max[O];return S[2]=this.max[2],new Es(C,S)}distanceX(l){return Math.max(Math.min(this.max[0],l[0]),this.min[0])-l[0]}distanceY(l){return Math.max(Math.min(this.max[1],l[1]),this.min[1])-l[1]}intersectsFrustum(l){let p=!0;for(let C=0;C<l.planes.length;C++){const S=this.intersectsPlane(l.planes[C]);if(S===0)return 0;S===1&&(p=!1)}return p?2:l.aabb.min[0]>this.max[0]||l.aabb.min[1]>this.max[1]||l.aabb.min[2]>this.max[2]||l.aabb.max[0]<this.min[0]||l.aabb.max[1]<this.min[1]||l.aabb.max[2]<this.min[2]?0:1}intersectsPlane(l){let p=l[3],C=l[3];for(let S=0;S<3;S++)l[S]>0?(p+=l[S]*this.min[S],C+=l[S]*this.max[S]):(C+=l[S]*this.min[S],p+=l[S]*this.max[S]);return p>=0?2:C<0?0:1}}class co{distanceToTile2d(l,p,C,S){const O=S.distanceX([l,p]),U=S.distanceY([l,p]);return Math.hypot(O,U)}getWrap(l,p,C){return C}getTileBoundingVolume(l,p,C,S){var O,U;let N=0,Y=0;if(S?.terrain){const ae=new a.a0(l.z,p,l.z,l.x,l.y),ge=S.terrain.getMinMaxElevation(ae);N=(O=ge.minElevation)!==null&&O!==void 0?O:Math.min(0,C),Y=(U=ge.maxElevation)!==null&&U!==void 0?U:Math.max(0,C)}const re=1<<l.z;return new Es([p+l.x/re,l.y/re,N],[p+(l.x+1)/re,(l.y+1)/re,Y])}allowVariableZoom(l,p){const C=l.fov*(Math.abs(Math.cos(l.rollInRadians))*l.height+Math.abs(Math.sin(l.rollInRadians))*l.width)/l.height,S=a.ai(78.5-C/2,0,60);return!!p.terrain||l.pitch>S}allowWorldCopies(){return!0}prepareNextFrame(){}}class ka{constructor(l,p,C){this.points=l,this.planes=p,this.aabb=C}static fromInvProjectionMatrix(l,p=1,C=0,S,O){const U=O?[[6,5,4],[0,1,2],[0,3,7],[2,1,5],[3,2,6],[0,4,5]]:[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],N=Math.pow(2,C),Y=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((pe=>(function(we,Fe,He,Ze){const et=a.aA([],we,Fe),rt=1/et[3]/He*Ze;return a.a$(et,et,[rt,rt,1/et[3],rt])})(pe,l,p,N)));S&&(function(pe,we,Fe,He){const Ze=He?4:0,et=He?0:4;let rt=0;const lt=[],nt=[];for(let st=0;st<4;st++){const wt=a.aX([],pe[st+et],pe[st+Ze]),Yt=a.b0(wt);a.aU(wt,wt,1/Yt),lt.push(Yt),nt.push(wt)}for(let st=0;st<4;st++){const wt=a.b1(pe[st+Ze],nt[st],Fe);rt=wt!==null&&wt>=0?Math.max(rt,wt):Math.max(rt,lt[st])}const ht=(function(st,wt){const Yt=a.aX([],st[wt[0]],st[wt[1]]),jt=a.aX([],st[wt[2]],st[wt[1]]),Nt=[0,0,0,0];return a.aY(Nt,a.aZ([],Yt,jt)),Nt[3]=-a.a_(Nt,st[wt[0]]),Nt})(pe,we),bt=(function(st,wt){const Yt=a.b2(st),jt=a.b3([],st,1/Yt),Nt=a.aX([],wt,a.aU([],jt,a.a_(wt,jt))),qt=a.b2(Nt);if(qt>0){const gn=Math.sqrt(1-jt[3]*jt[3]),In=a.aU([],jt,-jt[3]),sn=a.aV([],In,a.aU([],Nt,gn/qt));return a.b4(wt,sn)}return null})(Fe,ht);if(bt!==null){const st=bt/a.a_(nt[0],ht);rt=Math.min(rt,st)}for(let st=0;st<4;st++){const wt=Math.min(rt,lt[st]);pe[st+et]=[pe[st+Ze][0]+nt[st][0]*wt,pe[st+Ze][1]+nt[st][1]*wt,pe[st+Ze][2]+nt[st][2]*wt,1]}})(Y,U[0],S,O);const re=U.map((pe=>{const we=a.aX([],Y[pe[0]],Y[pe[1]]),Fe=a.aX([],Y[pe[2]],Y[pe[1]]),He=a.aY([],a.aZ([],we,Fe)),Ze=-a.a_(He,Y[pe[1]]);return He.concat(Ze)})),ae=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],ge=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const pe of Y)for(let we=0;we<3;we++)ae[we]=Math.min(ae[we],pe[we]),ge[we]=Math.max(ge[we],pe[we]);return new ka(Y,re,new Es(ae,ge))}}class Ta{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(l){this._helper.setMinZoom(l)}setMaxZoom(l){this._helper.setMaxZoom(l)}setMinPitch(l){this._helper.setMinPitch(l)}setMaxPitch(l){this._helper.setMaxPitch(l)}setRenderWorldCopies(l){this._helper.setRenderWorldCopies(l)}setBearing(l){this._helper.setBearing(l)}setPitch(l){this._helper.setPitch(l)}setRoll(l){this._helper.setRoll(l)}setFov(l){this._helper.setFov(l)}setZoom(l){this._helper.setZoom(l)}setCenter(l){this._helper.setCenter(l)}setElevation(l){this._helper.setElevation(l)}setMinElevationForCurrentTile(l){this._helper.setMinElevationForCurrentTile(l)}setPadding(l){this._helper.setPadding(l)}interpolatePadding(l,p,C){return this._helper.interpolatePadding(l,p,C)}isPaddingEqual(l){return this._helper.isPaddingEqual(l)}resize(l,p,C=!0){this._helper.resize(l,p,C)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(l){this._helper.setMaxBounds(l)}setConstrain(l){this._helper.setConstrain(l)}overrideNearFarZ(l,p){this._helper.overrideNearFarZ(l,p)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(l){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),l)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get constrain(){return this._helper.constrain}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(l,p){}constructor(l){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this.defaultConstrain=(p,C)=>{C=a.ai(+C,this.minZoom,this.maxZoom);const S={center:new a.U(p.lng,p.lat),zoom:C};let O=this._helper._lngRange;if(!this._helper._renderWorldCopies&&O===null){const nt=179.9999999999;O=[-nt,nt]}const U=this.tileSize*a.al(S.zoom);let N=0,Y=U,re=0,ae=U,ge=0,pe=0;const{x:we,y:Fe}=this.size;if(this._helper._latRange){const nt=this._helper._latRange;N=a.W(nt[1])*U,Y=a.W(nt[0])*U,Y-N<Fe&&(ge=Fe/(Y-N))}O&&(re=a.V(a.X(O[0])*U,0,U),ae=a.V(a.X(O[1])*U,0,U),ae<re&&(ae+=U),ae-re<we&&(pe=we/(ae-re)));const{x:He,y:Ze}=ot(U,p);let et,rt;const lt=Math.max(pe||0,ge||0);if(lt){const nt=new a.P(pe?(ae+re)/2:He,ge?(Y+N)/2:Ze);return S.center=Dt(U,nt).wrap(),S.zoom+=a.ao(lt),S}if(this._helper._latRange){const nt=Fe/2;Ze-nt<N&&(rt=N+nt),Ze+nt>Y&&(rt=Y-nt)}if(O){const nt=(re+ae)/2;let ht=He;this._helper._renderWorldCopies&&(ht=a.V(He,nt-U/2,nt+U/2));const bt=we/2;ht-bt<re&&(et=re+bt),ht+bt>ae&&(et=ae-bt)}if(et!==void 0||rt!==void 0){const nt=new a.P(et??He,rt??Ze);S.center=Dt(U,nt).wrap()}return S},this._helper=new vo({calcMatrices:()=>{this._calcMatrices()},constrain:(p,C)=>this.defaultConstrain(p,C)},l),this._coveringTilesDetailsProvider=new co}clone(){const l=new Ta;return l.apply(this),l}apply(l,p,C){this._helper.apply(l,p,C)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(l){const p=[new a.b5(0,l)];if(this._helper._renderWorldCopies){const C=this.screenPointToMercatorCoordinate(new a.P(0,0)),S=this.screenPointToMercatorCoordinate(new a.P(this._helper._width,0)),O=this.screenPointToMercatorCoordinate(new a.P(this._helper._width,this._helper._height)),U=this.screenPointToMercatorCoordinate(new a.P(0,this._helper._height)),N=Math.floor(Math.min(C.x,S.x,O.x,U.x)),Y=Math.floor(Math.max(C.x,S.x,O.x,U.x)),re=1;for(let ae=N-re;ae<=Y+re;ae++)ae!==0&&p.push(new a.b5(ae,l))}return p}getCameraFrustum(){return ka.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(l){const p=this.screenPointToLocation(this.centerPoint,l),C=l?l.getElevationForLngLatZoom(p,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(C)}setLocationAtPoint(l,p){const C=a.an(this.elevation,this.center.lat),S=this.screenPointToMercatorCoordinateAtZ(p,C),O=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,C),U=a.a5.fromLngLat(l),N=new a.a5(U.x-(S.x-O.x),U.y-(S.y-O.y));this.setCenter(N?.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(l,p){return p?this.coordinatePoint(a.a5.fromLngLat(l),p.getElevationForLngLatZoom(l,this._helper._tileZoom),this._pixelMatrix3D):this.coordinatePoint(a.a5.fromLngLat(l))}screenPointToLocation(l,p){var C;return(C=this.screenPointToMercatorCoordinate(l,p))===null||C===void 0?void 0:C.toLngLat()}screenPointToMercatorCoordinate(l,p){if(p){const C=p.pointCoordinate(l);if(C!=null)return C}return this.screenPointToMercatorCoordinateAtZ(l)}screenPointToMercatorCoordinateAtZ(l,p){const C=p||0,S=[l.x,l.y,0,1],O=[l.x,l.y,1,1];a.aA(S,S,this._pixelMatrixInverse),a.aA(O,O,this._pixelMatrixInverse);const U=S[3],N=O[3],Y=S[1]/U,re=O[1]/N,ae=S[2]/U,ge=O[2]/N,pe=ae===ge?0:(C-ae)/(ge-ae);return new a.a5(a.F.number(S[0]/U,O[0]/N,pe)/this.worldSize,a.F.number(Y,re,pe)/this.worldSize,C)}coordinatePoint(l,p=0,C=this._pixelMatrix){const S=[l.x*this.worldSize,l.y*this.worldSize,p,1];return a.aA(S,S,C),new a.P(S[0]/S[3],S[1]/S[3])}getBounds(){const l=Math.max(0,this._helper._height/2-xt(this));return new kt().extend(this.screenPointToLocation(new a.P(0,l))).extend(this.screenPointToLocation(new a.P(this._helper._width,l))).extend(this.screenPointToLocation(new a.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new a.P(0,this._helper._height)))}isPointOnMapSurface(l,p){return p?p.pointCoordinate(l)!=null:l.y>this.height/2-xt(this)}calculatePosMatrix(l,p=!1,C){var S;const O=(S=l.key)!==null&&S!==void 0?S:a.b6(l.wrap,l.canonical.z,l.canonical.z,l.canonical.x,l.canonical.y),U=p?this._alignedPosMatrixCache:this._posMatrixCache;if(U.has(O)){const re=U.get(O);return C?re.f32:re.f64}const N=tn(l,this.worldSize);a.Q(N,p?this._alignedProjMatrix:this._viewProjMatrix,N);const Y={f64:N,f32:new Float32Array(N)};return U.set(O,Y),C?Y.f32:Y.f64}calculateFogMatrix(l){const p=l.key,C=this._fogMatrixCacheF32;if(C.has(p))return C.get(p);const S=tn(l,this.worldSize);return a.Q(S,this._fogMatrix,S),C.set(p,new Float32Array(S)),C.get(p)}calculateCenterFromCameraLngLatAlt(l,p,C,S){return this._helper.calculateCenterFromCameraLngLatAlt(l,p,C,S)}_calculateNearFarZIfNeeded(l,p,C){if(!this._helper.autoCalculateNearFarZ)return;const S=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),O=l-S*this._helper._pixelPerMeter/Math.cos(p),U=S<0?O:l,N=Math.PI/2+this.pitchInRadians,Y=a.ak(this.fov)*(Math.abs(Math.cos(a.ak(this.roll)))*this.height+Math.abs(Math.sin(a.ak(this.roll)))*this.width)/this.height*(.5+C.y/this.height),re=Math.sin(Y)*U/Math.sin(a.ai(Math.PI-N-Y,.01,Math.PI-.01)),ae=xt(this),ge=Math.atan(ae/this._helper.cameraToCenterDistance),pe=a.ak(.75),we=ge>pe?2*ge*(.5+C.y/(2*ae)):pe,Fe=Math.sin(we)*U/Math.sin(a.ai(Math.PI-N-we,.01,Math.PI-.01)),He=Math.min(re,Fe);this._helper._farZ=1.01*(Math.cos(Math.PI/2-p)*He+U),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const l=this.centerOffset,p=ot(this.worldSize,this.center),C=p.x,S=p.y;this._helper._pixelPerMeter=a.an(1,this.center.lat)*this.worldSize;const O=a.ak(Math.min(this.pitch,y)),U=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(O));let N;this._calculateNearFarZIfNeeded(U,O,l),N=new Float64Array(16),a.b7(N,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),a.au(this._invProjMatrix,N),N[8]=2*-l.x/this._helper._width,N[9]=2*l.y/this._helper._height,this._projectionMatrix=a.b8(N),a.O(N,N,[1,-1,1]),a.N(N,N,[0,0,-this._helper.cameraToCenterDistance]),a.b9(N,N,-this.rollInRadians),a.ba(N,N,this.pitchInRadians),a.b9(N,N,-this.bearingInRadians),a.N(N,N,[-C,-S,0]),this._mercatorMatrix=a.O([],N,[this.worldSize,this.worldSize,this.worldSize]),a.O(N,N,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=a.Q(new Float64Array(16),this.clipSpaceToPixelsMatrix,N),a.N(N,N,[0,0,-this.elevation]),this._viewProjMatrix=N,this._invViewProjMatrix=a.au([],N);const Y=[0,0,-1,1];a.aA(Y,Y,this._invViewProjMatrix),this._cameraPosition=[Y[0]/Y[3],Y[1]/Y[3],Y[2]/Y[3]],this._fogMatrix=new Float64Array(16),a.b7(this._fogMatrix,this.fovInRadians,this.width/this.height,U,this._helper._farZ),this._fogMatrix[8]=2*-l.x/this.width,this._fogMatrix[9]=2*l.y/this.height,a.O(this._fogMatrix,this._fogMatrix,[1,-1,1]),a.N(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),a.b9(this._fogMatrix,this._fogMatrix,-this.rollInRadians),a.ba(this._fogMatrix,this._fogMatrix,this.pitchInRadians),a.b9(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),a.N(this._fogMatrix,this._fogMatrix,[-C,-S,0]),a.O(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),a.N(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=a.Q(new Float64Array(16),this.clipSpaceToPixelsMatrix,N);const re=this._helper._width%2/2,ae=this._helper._height%2/2,ge=Math.cos(this.bearingInRadians),pe=Math.sin(-this.bearingInRadians),we=C-Math.round(C)+ge*re+pe*ae,Fe=S-Math.round(S)+ge*ae+pe*re,He=new Float64Array(N);if(a.N(He,He,[we>.5?we-1:we,Fe>.5?Fe-1:Fe,0]),this._alignedProjMatrix=He,N=a.au(new Float64Array(16),this._pixelMatrix),!N)throw new Error("failed to invert matrix");this._pixelMatrixInverse=N,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const l=this.screenPointToMercatorCoordinate(new a.P(0,0)),p=[l.x*this.worldSize,l.y*this.worldSize,0,1];return a.aA(p,p,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const l=a.an(1,this.center.lat)*this.worldSize;return dt(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/l).toLngLat()}lngLatToCameraDepth(l,p){const C=a.a5.fromLngLat(l),S=[C.x*this.worldSize,C.y*this.worldSize,p,1];return a.aA(S,S,this._viewProjMatrix),S[2]/S[3]}getProjectionData(l){const{overscaledTileID:p,aligned:C,applyTerrainMatrix:S}=l,O=this._helper.getMercatorTileCoordinates(p),U=p?this.calculatePosMatrix(p,C,!0):null;let N;return N=p&&p.terrainRttPosMatrix32f&&S?p.terrainRttPosMatrix32f:U||a.bb(),{mainMatrix:N,tileMercatorCoords:O,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:N}}isLocationOccluded(l){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(l,p,C){return 1}transformLightDirection(l){return a.aW(l)}getRayDirectionFromPixel(l){throw new Error("Not implemented.")}projectTileCoordinates(l,p,C,S){const O=this.calculatePosMatrix(C);let U;S?(U=[l,p,S(l,p),1],a.aA(U,U,O)):(U=[l,p,0,1],Ho(U,U,O));const N=U[3];return{point:new a.P(U[0]/N,U[1]/N),signedDistanceFromCamera:N,isOccluded:!1}}populateCache(l){for(const p of l)this.calculatePosMatrix(p)}getMatrixForModel(l,p){const C=a.a5.fromLngLat(l,p),S=C.meterInMercatorCoordinateUnits(),O=a.bc();return a.N(O,O,[C.x,C.y,C.z]),a.b9(O,O,Math.PI),a.ba(O,O,Math.PI/2),a.O(O,O,[-S,S,S]),O}getProjectionDataForCustomLayer(l=!0){const p=new a.a0(0,0,0,0,0),C=this.getProjectionData({overscaledTileID:p,applyGlobeMatrix:l}),S=tn(p,this.worldSize);a.Q(S,this._viewProjMatrix,S),C.tileMercatorCoords=[0,0,1,1];const O=[a.a3,a.a3,this.worldSize/this._helper.pixelsPerMeter],U=a.bd();return a.O(U,S,O),C.fallbackMatrix=U,C.mainMatrix=U,C}getFastPathSimpleProjectionMatrix(l){return this.calculatePosMatrix(l)}}function Ni(){a.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function Fr(B){if(B.useSlerp)if(B.k<1){const l=a.be(B.startEulerAngles.roll,B.startEulerAngles.pitch,B.startEulerAngles.bearing),p=a.be(B.endEulerAngles.roll,B.endEulerAngles.pitch,B.endEulerAngles.bearing),C=new Float64Array(4);a.bf(C,l,p,B.k);const S=a.bg(C);B.tr.setRoll(S.roll),B.tr.setPitch(S.pitch),B.tr.setBearing(S.bearing)}else B.tr.setRoll(B.endEulerAngles.roll),B.tr.setPitch(B.endEulerAngles.pitch),B.tr.setBearing(B.endEulerAngles.bearing);else B.tr.setRoll(a.F.number(B.startEulerAngles.roll,B.endEulerAngles.roll,B.k)),B.tr.setPitch(a.F.number(B.startEulerAngles.pitch,B.endEulerAngles.pitch,B.k)),B.tr.setBearing(a.F.number(B.startEulerAngles.bearing,B.endEulerAngles.bearing,B.k))}function J(B,l,p,C,S){const O=S.padding,U=ot(S.worldSize,p.getNorthWest()),N=ot(S.worldSize,p.getNorthEast()),Y=ot(S.worldSize,p.getSouthEast()),re=ot(S.worldSize,p.getSouthWest()),ae=a.ak(-C),ge=U.rotate(ae),pe=N.rotate(ae),we=Y.rotate(ae),Fe=re.rotate(ae),He=new a.P(Math.max(ge.x,pe.x,Fe.x,we.x),Math.max(ge.y,pe.y,Fe.y,we.y)),Ze=new a.P(Math.min(ge.x,pe.x,Fe.x,we.x),Math.min(ge.y,pe.y,Fe.y,we.y)),et=He.sub(Ze),rt=(S.width-(O.left+O.right+l.left+l.right))/et.x,lt=(S.height-(O.top+O.bottom+l.top+l.bottom))/et.y;if(lt<0||rt<0)return void Ni();const nt=Math.min(a.ao(S.scale*Math.min(rt,lt)),B.maxZoom),ht=a.P.convert(B.offset),bt=new a.P((l.left-l.right)/2,(l.top-l.bottom)/2).rotate(a.ak(C)),st=ht.add(bt).mult(S.scale/a.al(nt));return{center:Dt(S.worldSize,U.add(Y).div(2).sub(st)),zoom:nt,bearing:C}}class ye{get useGlobeControls(){return!1}handlePanInertia(l,p){const C=l.mag(),S=Math.abs(xt(p));return{easingOffset:l.mult(Math.min(.75*S/C,1)),easingCenter:p.center}}handleMapControlsRollPitchBearingZoom(l,p){l.bearingDelta&&p.setBearing(p.bearing+l.bearingDelta),l.pitchDelta&&p.setPitch(p.pitch+l.pitchDelta),l.rollDelta&&p.setRoll(p.roll+l.rollDelta),l.zoomDelta&&p.setZoom(p.zoom+l.zoomDelta)}handleMapControlsPan(l,p,C){l.around.distSqr(p.centerPoint)<.01||p.setLocationAtPoint(C,l.around)}cameraForBoxAndBearing(l,p,C,S,O){return J(l,p,C,S,O)}handleJumpToCenterZoom(l,p){l.zoom!==(p.zoom!==void 0?+p.zoom:l.zoom)&&l.setZoom(+p.zoom),p.center!==void 0&&l.setCenter(a.U.convert(p.center))}handleEaseTo(l,p){const C=l.zoom,S=l.padding,O={roll:l.roll,pitch:l.pitch,bearing:l.bearing},U={roll:p.roll===void 0?l.roll:p.roll,pitch:p.pitch===void 0?l.pitch:p.pitch,bearing:p.bearing===void 0?l.bearing:p.bearing},N=p.zoom!==void 0,Y=!l.isPaddingEqual(p.padding);let re=!1;const ae=N?+p.zoom:l.zoom;let ge=l.centerPoint.add(p.offsetAsPoint);const pe=l.screenPointToLocation(ge),{center:we,zoom:Fe}=l.constrain(a.U.convert(p.center||pe),ae??C);yo(l,we);const He=ot(l.worldSize,pe),Ze=ot(l.worldSize,we).sub(He),et=a.al(Fe-C);return re=Fe!==C,{easeFunc:rt=>{if(re&&l.setZoom(a.F.number(C,Fe,rt)),a.bh(O,U)||Fr({startEulerAngles:O,endEulerAngles:U,tr:l,k:rt,useSlerp:O.roll!=U.roll}),Y&&(l.interpolatePadding(S,p.padding,rt),ge=l.centerPoint.add(p.offsetAsPoint)),p.around)l.setLocationAtPoint(p.around,p.aroundPoint);else{const lt=a.al(l.zoom-C),nt=Fe>C?Math.min(2,et):Math.max(.5,et),ht=Math.pow(nt,1-rt),bt=Dt(l.worldSize,He.add(Ze.mult(rt*ht)).mult(lt));l.setLocationAtPoint(l.renderWorldCopies?bt.wrap():bt,ge)}},isZooming:re,elevationCenter:we}}handleFlyTo(l,p){const C=p.zoom!==void 0,S=l.zoom,O=l.constrain(a.U.convert(p.center||p.locationAtOffset),C?+p.zoom:S),U=O.center,N=O.zoom;yo(l,U);const Y=ot(l.worldSize,p.locationAtOffset),re=ot(l.worldSize,U).sub(Y),ae=re.mag(),ge=a.al(N-S);let pe;if(p.minZoom!==void 0){const we=Math.min(+p.minZoom,S,N),Fe=l.constrain(U,we).zoom;pe=a.al(Fe-S)}return{easeFunc:(we,Fe,He,Ze)=>{l.setZoom(we===1?N:S+a.ao(Fe));const et=we===1?U:Dt(l.worldSize,Y.add(re.mult(He)).mult(Fe));l.setLocationAtPoint(l.renderWorldCopies?et.wrap():et,Ze)},scaleOfZoom:ge,targetCenter:U,scaleOfMinZoom:pe,pixelPathLength:ae}}}class Ne{constructor(l,p,C){this.blendFunction=l,this.blendColor=p,this.mask=C}}Ne.Replace=[1,0],Ne.disabled=new Ne(Ne.Replace,a.bi.transparent,[!1,!1,!1,!1]),Ne.unblended=new Ne(Ne.Replace,a.bi.transparent,[!0,!0,!0,!0]),Ne.alphaBlended=new Ne([1,771],a.bi.transparent,[!0,!0,!0,!0]);const St=2305;class fn{constructor(l,p,C){this.enable=l,this.mode=p,this.frontFace=C}}fn.disabled=new fn(!1,1029,St),fn.backCCW=new fn(!0,1029,St),fn.frontCCW=new fn(!0,1028,St);class nn{constructor(l,p,C){this.func=l,this.mask=p,this.range=C}}nn.ReadOnly=!1,nn.ReadWrite=!0,nn.disabled=new nn(519,nn.ReadOnly,[0,1]);const xi=7680;class Gn{constructor(l,p,C,S,O,U){this.test=l,this.ref=p,this.mask=C,this.fail=S,this.depthFail=O,this.pass=U}}Gn.disabled=new Gn({func:519,mask:0},0,0,xi,xi,xi);const Ei=new WeakMap;function li(B){var l;if(Ei.has(B))return Ei.get(B);{const p=(l=B.getParameter(B.VERSION))===null||l===void 0?void 0:l.startsWith("WebGL 2.0");return Ei.set(B,p),p}}class Ar{get awaitingQuery(){return!!this._readbackQueue}constructor(l){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=l;const p=l.context,C=p.gl;this._texFormat=C.RGBA,this._texType=C.UNSIGNED_BYTE;const S=new a.aP;S.emplaceBack(-1,-1),S.emplaceBack(2,-1),S.emplaceBack(-1,2);const O=new a.aR;O.emplaceBack(0,1,2),this._fullscreenTriangle=new Co(p.createVertexBuffer(S,Ia.members),p.createIndexBuffer(O),a.aQ.simpleSegment(0,0,S.length,O.length)),this._resultBuffer=new Uint8Array(4),p.activeTexture.set(C.TEXTURE1);const U=C.createTexture();C.bindTexture(C.TEXTURE_2D,U),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_S,C.CLAMP_TO_EDGE),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_T,C.CLAMP_TO_EDGE),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MIN_FILTER,C.NEAREST),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MAG_FILTER,C.NEAREST),C.texImage2D(C.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=p.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(U),li(C)&&(this._pbo=C.createBuffer(),C.bindBuffer(C.PIXEL_PACK_BUFFER,this._pbo),C.bufferData(C.PIXEL_PACK_BUFFER,4,C.STREAM_READ),C.bindBuffer(C.PIXEL_PACK_BUFFER,null))}destroy(){const l=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),l.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(l,p){const C=this._updateCount;return this._readbackQueue?C>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():C>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(l,p),this._updateCount++,this._measuredError}_bindFramebuffer(){const l=this._cachedRenderContext.context,p=l.gl;l.activeTexture.set(p.TEXTURE1),p.bindTexture(p.TEXTURE_2D,this._fbo.colorAttachment.get()),l.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(l,p){const C=this._cachedRenderContext.context,S=C.gl;if(this._bindFramebuffer(),C.viewport.set([0,0,this._texWidth,this._texHeight]),C.clear({color:a.bi.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(C,S.TRIANGLES,nn.disabled,Gn.disabled,Ne.unblended,fn.disabled,((O,U)=>({u_input:O,u_output_expected:U}))(l,p),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&li(S)){S.bindBuffer(S.PIXEL_PACK_BUFFER,this._pbo),S.readBuffer(S.COLOR_ATTACHMENT0),S.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),S.bindBuffer(S.PIXEL_PACK_BUFFER,null);const O=S.fenceSync(S.SYNC_GPU_COMMANDS_COMPLETE,0);S.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:O}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const l=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&li(l)){const p=l.clientWaitSync(this._readbackQueue.sync,0,0);if(p===l.WAIT_FAILED)return a.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(p===l.TIMEOUT_EXPIRED)return;l.bindBuffer(l.PIXEL_PACK_BUFFER,this._pbo),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),l.bindBuffer(l.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),l.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=Ar._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(l){let p=0;return p+=l[0]/256,p+=l[1]/65536,p+=l[2]/16777216,l[3]<127&&(p=-p),p/128}}const Gr=a.a3/128;function mr(B,l){const p=B.granularity!==void 0?Math.max(B.granularity,1):1,C=p+(B.generateBorders?2:0),S=p+(B.extendToNorthPole||B.generateBorders?1:0)+(B.extendToSouthPole||B.generateBorders?1:0),O=C+1,U=S+1,N=B.generateBorders?-1:0,Y=B.generateBorders||B.extendToNorthPole?-1:0,re=p+(B.generateBorders?1:0),ae=p+(B.generateBorders||B.extendToSouthPole?1:0),ge=O*U,pe=C*S*6,we=O*U>65536;if(we&&l==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const Fe=we||l==="32bit",He=new Int16Array(2*ge);let Ze=0;for(let lt=Y;lt<=ae;lt++)for(let nt=N;nt<=re;nt++){let ht=nt/p*a.a3;nt===-1&&(ht=-Gr),nt===p+1&&(ht=a.a3+Gr);let bt=lt/p*a.a3;lt===-1&&(bt=B.extendToNorthPole?a.bk:-Gr),lt===p+1&&(bt=B.extendToSouthPole?a.bl:a.a3+Gr),He[Ze++]=ht,He[Ze++]=bt}const et=Fe?new Uint32Array(pe):new Uint16Array(pe);let rt=0;for(let lt=0;lt<S;lt++)for(let nt=0;nt<C;nt++){const ht=nt+1+lt*O,bt=nt+(lt+1)*O,st=nt+1+(lt+1)*O;et[rt++]=nt+lt*O,et[rt++]=bt,et[rt++]=ht,et[rt++]=ht,et[rt++]=bt,et[rt++]=st}return{vertices:He.buffer.slice(0),indices:et.buffer.slice(0),uses32bitIndices:Fe}}const hr=new a.aO({fill:new a.bm(128,2),line:new a.bm(512,0),tile:new a.bm(128,32),stencil:new a.bm(128,1),circle:3});class Hr{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return Fi.projectionGlobe}get vertexShaderPreludeCode(){return Fi.projectionMercator.vertexSource}get subdivisionGranularity(){return hr}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(l){this._errorMeasurement||(this._errorMeasurement=new Ar(l));const p=a.W(this._errorQueryLatitudeDegrees),C=2*Math.atan(Math.exp(Math.PI-p*Math.PI*2))-.5*Math.PI,S=this._errorMeasurement.updateErrorLoop(p,C),O=D();S!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=S,this._errorMeasurementLastChangeTime=O);const U=Math.min(Math.max((O-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=a.bn(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,a.bo(U))}_getMeshKey(l){return`${l.granularity.toString(36)}_${l.generateBorders?"b":""}${l.extendToNorthPole?"n":""}${l.extendToSouthPole?"s":""}`}getMeshFromTileID(l,p,C,S,O){const U=(O==="stencil"?hr.stencil:hr.tile).getGranularityForZoomLevel(p.z);return this._getMesh(l,{granularity:U,generateBorders:C,extendToNorthPole:p.y===0&&S,extendToSouthPole:p.y===(1<<p.z)-1&&S})}_getMesh(l,p){const C=this._getMeshKey(p);if(C in this._tileMeshCache)return this._tileMeshCache[C];const S=(function(O,U){const N=mr(U,"16bit"),Y=a.aP.deserialize({arrayBuffer:N.vertices,length:N.vertices.byteLength/2/2}),re=a.aR.deserialize({arrayBuffer:N.indices,length:N.indices.byteLength/2/3});return new Co(O.createVertexBuffer(Y,Ia.members),O.createIndexBuffer(re),a.aQ.simpleSegment(0,0,Y.length,re.length))})(l,p);return this._tileMeshCache[C]=S,S}recalculate(l){}hasTransition(){const l=D();let p=!1;return p=p||(l-this._errorMeasurementLastChangeTime)/1e3<.7,p=p||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,p}setErrorQueryLatitudeDegrees(l){this._errorQueryLatitudeDegrees=l}}const Ys=new a.r({type:new a.D(a.t.projection.type)});class Zo extends a.E{constructor(l){super(),this._transitionable=new a.x(Ys,void 0),this.setProjection(l),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new a.G(0)),this._mercatorProjection=new ms,this._verticalPerspectiveProjection=new Hr}get transitionState(){const l=this.properties.get("type");if(typeof l=="string"&&l==="mercator")return 0;if(typeof l=="string"&&l==="vertical-perspective")return 1;if(l instanceof a.bp){if(l.from==="vertical-perspective"&&l.to==="mercator")return 1-l.transition;if(l.from==="mercator"&&l.to==="vertical-perspective")return l.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(l){this._mercatorProjection.updateGPUdependent(l),this._verticalPerspectiveProjection.updateGPUdependent(l)}getMeshFromTileID(l,p,C,S,O){return this.currentProjection.getMeshFromTileID(l,p,C,S,O)}setProjection(l){this._transitionable.setValue("type",l?.type||"mercator")}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}setErrorQueryLatitudeDegrees(l){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(l),this._mercatorProjection.setErrorQueryLatitudeDegrees(l)}}function qs(B){const l=rs(B.worldSize,B.center.lat);return 2*Math.PI*l}function su(B,l,p,C,S){const O=1/(1<<S),U=l/a.a3*O+C*O,N=a.br((B/a.a3*O+p*O)*Math.PI*2+Math.PI,2*Math.PI),Y=2*Math.atan(Math.exp(Math.PI-U*Math.PI*2))-.5*Math.PI,re=Math.cos(Y),ae=new Float64Array(3);return ae[0]=Math.sin(N)*re,ae[1]=Math.sin(Y),ae[2]=Math.cos(N)*re,ae}function Lo(B){return(function(l,p){const C=Math.cos(p),S=new Float64Array(3);return S[0]=Math.sin(l)*C,S[1]=Math.sin(p),S[2]=Math.cos(l)*C,S})(B.lng*Math.PI/180,B.lat*Math.PI/180)}function rs(B,l){return B/(2*Math.PI)/Math.cos(l*Math.PI/180)}function S1(B){const l=Math.asin(B[1])/Math.PI*180,p=Math.sqrt(B[0]*B[0]+B[2]*B[2]);if(p>1e-6){const C=B[0]/p,S=Math.acos(B[2]/p),O=(C>0?S:-S)/Math.PI*180;return new a.U(a.V(O,-180,180),l)}return new a.U(0,l)}function jl(B){return Math.cos(B*Math.PI/180)}function wo(B,l){const p=jl(B),C=jl(l);return a.ao(C/p)}function Ap(B,l){const p=B.rotate(l.bearingInRadians),C=l.zoom+wo(l.center.lat,0),S=a.bn(1/jl(l.center.lat),1/jl(Math.min(Math.abs(l.center.lat),60)),a.bq(C,7,3,0,1)),O=360/qs({worldSize:l.worldSize,center:{lat:l.center.lat}});return new a.U(l.center.lng-p.x*O*S,a.ai(l.center.lat+p.y*O,-a.aj,a.aj))}function $a(B){const l=.5*B,p=Math.sin(l),C=Math.cos(l);return Math.log(p+C)-Math.log(C-p)}function Fh(B,l,p,C){const S=B.lat+p*C;if(Math.abs(p)>1){const O=(Math.sign(B.lat+p)!==Math.sign(B.lat)?-Math.abs(B.lat):Math.abs(B.lat))*Math.PI/180,U=Math.abs(B.lat+p)*Math.PI/180,N=$a(O+C*(U-O)),Y=$a(O),re=$a(U);return new a.U(B.lng+l*((N-Y)/(re-Y)),S)}return new a.U(B.lng+l*C,S)}class Cf{constructor(l){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._boundingVolumeFactory=l}swapBuffers(){if(!this._hadAnyChanges)return;const l=this._cachePrevious;this._cachePrevious=this._cache,this._cache=l,this._cache.clear(),this._hadAnyChanges=!1}getTileBoundingVolume(l,p,C,S){const O=`${l.z}_${l.x}_${l.y}_${S?.terrain?"t":""}`,U=this._cache.get(O);if(U)return U;const N=this._cachePrevious.get(O);if(N)return this._cache.set(O,N),N;const Y=this._boundingVolumeFactory(l,p,C,S);return this._cache.set(O,Y),this._hadAnyChanges=!0,Y}}class To{constructor(l,p,C,S){this.min=C,this.max=S,this.points=l,this.planes=p}static fromAabb(l,p){const C=[];for(let S=0;S<8;S++)C.push([1&~S?l[0]:p[0],(S>>1&1)==1?p[1]:l[1],(S>>2&1)==1?p[2]:l[2]]);return new To(C,[[-1,0,0,p[0]],[1,0,0,-l[0]],[0,-1,0,p[1]],[0,1,0,-l[1]],[0,0,-1,p[2]],[0,0,1,-l[2]]],l,p)}static fromCenterSizeAngles(l,p,C){const S=a.bu([],C[0],C[1],C[2]),O=a.bv([],[p[0],0,0],S),U=a.bv([],[0,p[1],0],S),N=a.bv([],[0,0,p[2]],S),Y=[...l],re=[...l];for(let ge=0;ge<8;ge++)for(let pe=0;pe<3;pe++){const we=l[pe]+O[pe]*(1&~ge?-1:1)+U[pe]*((ge>>1&1)==1?1:-1)+N[pe]*((ge>>2&1)==1?1:-1);Y[pe]=Math.min(Y[pe],we),re[pe]=Math.max(re[pe],we)}const ae=[];for(let ge=0;ge<8;ge++){const pe=[...l];a.aV(pe,pe,a.aU([],O,1&~ge?-1:1)),a.aV(pe,pe,a.aU([],U,(ge>>1&1)==1?1:-1)),a.aV(pe,pe,a.aU([],N,(ge>>2&1)==1?1:-1)),ae.push(pe)}return new To(ae,[[...O,-a.a_(O,ae[0])],[...U,-a.a_(U,ae[0])],[...N,-a.a_(N,ae[0])],[-O[0],-O[1],-O[2],-a.a_(O,ae[7])],[-U[0],-U[1],-U[2],-a.a_(U,ae[7])],[-N[0],-N[1],-N[2],-a.a_(N,ae[7])]],Y,re)}intersectsFrustum(l){let p=!0;const C=this.points.length,S=this.planes.length,O=l.planes.length,U=l.points.length;for(let N=0;N<O;N++){const Y=l.planes[N];let re=0;for(let ae=0;ae<C;ae++){const ge=this.points[ae];Y[0]*ge[0]+Y[1]*ge[1]+Y[2]*ge[2]+Y[3]>=0&&re++}if(re===0)return 0;re<C&&(p=!1)}if(p)return 2;for(let N=0;N<S;N++){const Y=this.planes[N];let re=0;for(let ae=0;ae<U;ae++){const ge=l.points[ae];Y[0]*ge[0]+Y[1]*ge[1]+Y[2]*ge[2]+Y[3]>=0&&re++}if(re===0)return 0}return 1}intersectsPlane(l){const p=this.points.length;let C=0;for(let S=0;S<p;S++){const O=this.points[S];l[0]*O[0]+l[1]*O[1]+l[2]*O[2]+l[3]>=0&&C++}return C===p?2:C===0?0:1}}function Nl(B,l,p){const C=B-l;return C<0?-C:Math.max(0,C-p)}function hp(B,l,p,C,S){const O=B-p;let U;return U=O<0?Math.min(-O,1+O-S):O>1?Math.min(Math.max(O-S,0),1-O):0,Math.max(U,Nl(l,C,S))}class E1{constructor(){this._boundingVolumeCache=new Cf(this._computeTileBoundingVolume)}prepareNextFrame(){this._boundingVolumeCache.swapBuffers()}distanceToTile2d(l,p,C,S){const O=1<<C.z,U=1/O,N=C.x/O,Y=C.y/O;let re=2;return re=Math.min(re,hp(l,p,N,Y,U)),re=Math.min(re,hp(l,p,N+.5,-Y-U,U)),re=Math.min(re,hp(l,p,N+.5,2-Y-U,U)),re}getWrap(l,p,C){const S=1<<p.z,O=1/S,U=p.x/S,N=Nl(l.x,U,O),Y=Nl(l.x,U-1,O),re=Nl(l.x,U+1,O),ae=Math.min(N,Y,re);return ae===re?1:ae===Y?-1:0}allowVariableZoom(l,p){return vi(l,p)>4}allowWorldCopies(){return!1}getTileBoundingVolume(l,p,C,S){return this._boundingVolumeCache.getTileBoundingVolume(l,p,C,S)}_computeTileBoundingVolume(l,p,C,S){var O,U;let N=0,Y=0;if(S?.terrain){const re=new a.a0(l.z,p,l.z,l.x,l.y),ae=S.terrain.getMinMaxElevation(re);N=(O=ae.minElevation)!==null&&O!==void 0?O:Math.min(0,C),Y=(U=ae.maxElevation)!==null&&U!==void 0?U:Math.max(0,C)}if(N/=a.bx,Y/=a.bx,N+=1,Y+=1,l.z<=0)return To.fromAabb([-Y,-Y,-Y],[Y,Y,Y]);if(l.z===1)return To.fromAabb([l.x===0?-Y:0,l.y===0?0:-Y,-Y],[l.x===0?0:Y,l.y===0?Y:0,Y]);{const re=[su(0,0,l.x,l.y,l.z),su(a.a3,0,l.x,l.y,l.z),su(a.a3,a.a3,l.x,l.y,l.z),su(0,a.a3,l.x,l.y,l.z)],ae=[];for(const Nt of re)ae.push(a.aU([],Nt,Y));if(Y!==N)for(const Nt of re)ae.push(a.aU([],Nt,N));l.y===0&&ae.push([0,1,0]),l.y===(1<<l.z)-1&&ae.push([0,-1,0]);const ge=[1,1,1],pe=[-1,-1,-1];for(const Nt of ae)for(let qt=0;qt<3;qt++)ge[qt]=Math.min(ge[qt],Nt[qt]),pe[qt]=Math.max(pe[qt],Nt[qt]);const we=su(a.a3/2,a.a3/2,l.x,l.y,l.z),Fe=a.aZ([],[0,1,0],we);a.aY(Fe,Fe);const He=a.aZ([],we,Fe);a.aY(He,He);const Ze=a.aZ([],re[2],re[1]);a.aY(Ze,Ze);const et=a.aZ([],re[0],re[3]);a.aY(et,et),ae.push(a.aU([],we,Y)),l.y>=(1<<l.z)/2&&ae.push(a.aU([],su(a.a3/2,0,l.x,l.y,l.z),Y)),l.y<(1<<l.z)/2&&ae.push(a.aU([],su(a.a3/2,a.a3,l.x,l.y,l.z),Y));const rt=Dm(we,ae),lt=Dm(He,ae),nt=[-we[0],-we[1],-we[2],rt.max],ht=[we[0],we[1],we[2],-rt.min],bt=[-He[0],-He[1],-He[2],lt.max],st=[He[0],He[1],He[2],-lt.min],wt=[...Ze,0],Yt=[...et,0],jt=[];return l.y===0?jt.push(a.bw(Yt,wt,nt),a.bw(Yt,wt,ht)):jt.push(a.bw(bt,wt,nt),a.bw(bt,wt,ht),a.bw(bt,Yt,nt),a.bw(bt,Yt,ht)),l.y===(1<<l.z)-1?jt.push(a.bw(Yt,wt,nt),a.bw(Yt,wt,ht)):jt.push(a.bw(st,wt,nt),a.bw(st,wt,ht),a.bw(st,Yt,nt),a.bw(st,Yt,ht)),new To(jt,[nt,ht,bt,st,wt,Yt],ge,pe)}}}function Dm(B,l){let p=1/0,C=-1/0;for(const S of l){const O=a.a_(B,S);p=Math.min(p,O),C=Math.max(C,O)}return{min:p,max:C}}class Pm{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(l){this._helper.setMinZoom(l)}setMaxZoom(l){this._helper.setMaxZoom(l)}setMinPitch(l){this._helper.setMinPitch(l)}setMaxPitch(l){this._helper.setMaxPitch(l)}setRenderWorldCopies(l){this._helper.setRenderWorldCopies(l)}setBearing(l){this._helper.setBearing(l)}setPitch(l){this._helper.setPitch(l)}setRoll(l){this._helper.setRoll(l)}setFov(l){this._helper.setFov(l)}setZoom(l){this._helper.setZoom(l)}setCenter(l){this._helper.setCenter(l)}setElevation(l){this._helper.setElevation(l)}setMinElevationForCurrentTile(l){this._helper.setMinElevationForCurrentTile(l)}setPadding(l){this._helper.setPadding(l)}interpolatePadding(l,p,C){return this._helper.interpolatePadding(l,p,C)}isPaddingEqual(l){return this._helper.isPaddingEqual(l)}resize(l,p){this._helper.resize(l,p)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(l){this._helper.setMaxBounds(l)}setConstrain(l){this._helper.setConstrain(l)}overrideNearFarZ(l,p){this._helper.overrideNearFarZ(l,p)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(l){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),l)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get constrain(){return this._helper.constrain}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(l){}constructor(l){this._cachedClippingPlane=a.by(),this._projectionMatrix=a.bc(),this._globeViewProjMatrix32f=a.bb(),this._globeViewProjMatrixNoCorrection=a.bc(),this._globeViewProjMatrixNoCorrectionInverted=a.bc(),this._globeProjMatrixInverted=a.bc(),this._cameraPosition=a.bs(),this._globeLatitudeErrorCorrectionRadians=0,this.defaultConstrain=(p,C)=>{const S=a.ai(p.lat,-a.aj,a.aj),O=a.ai(+C,this.minZoom+wo(0,S),this.maxZoom);return{center:new a.U(p.lng,S),zoom:O}},this._helper=new vo({calcMatrices:()=>{this._calcMatrices()},constrain:(p,C)=>this.defaultConstrain(p,C)},l),this._coveringTilesDetailsProvider=new E1}clone(){const l=new Pm;return l.apply(this),l}apply(l,p){this._globeLatitudeErrorCorrectionRadians=p||0,this._helper.apply(l)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const l=a.bs();return l[0]=this._cameraPosition[0],l[1]=this._cameraPosition[1],l[2]=this._cameraPosition[2],l}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(l){const{overscaledTileID:p,applyGlobeMatrix:C}=l,S=this._helper.getMercatorTileCoordinates(p);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:S,clippingPlane:this._cachedClippingPlane,projectionTransition:C?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(l){const p=this.pitchInRadians,C=this.cameraToCenterDistance/l,S=Math.sin(p)*C,O=Math.cos(p)*C+1,U=1/Math.sqrt(S*S+O*O)*1;let N=-S,Y=O;const re=Math.sqrt(N*N+Y*Y);N/=re,Y/=re;const ae=[0,N,Y];a.bz(ae,ae,[0,0,0],-this.bearingInRadians),a.bA(ae,ae,[0,0,0],-1*this.center.lat*Math.PI/180),a.bB(ae,ae,[0,0,0],this.center.lng*Math.PI/180);const ge=1/a.b0(ae);return a.aU(ae,ae,ge),[...ae,-U*ge]}isLocationOccluded(l){return!this.isSurfacePointVisible(Lo(l))}transformLightDirection(l){const p=this._helper._center.lng*Math.PI/180,C=this._helper._center.lat*Math.PI/180,S=Math.cos(C),O=[Math.sin(p)*S,Math.sin(C),Math.cos(p)*S],U=[O[2],0,-O[0]],N=[0,0,0];a.aZ(N,U,O),a.aY(U,U),a.aY(N,N);const Y=[0,0,0];return a.aY(Y,[U[0]*l[0]+N[0]*l[1]+O[0]*l[2],U[1]*l[0]+N[1]*l[1]+O[1]*l[2],U[2]*l[0]+N[2]*l[1]+O[2]*l[2]]),Y}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(l,p,C){const S=(function(N,Y,re){const ae=1/(1<<re.z);return new a.a5(N/a.a3*ae+re.x*ae,Y/a.a3*ae+re.y*ae)})(l,p,C.canonical),O=(U=S.y,[a.br(S.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-U*Math.PI*2))-.5*Math.PI]);var U;return this.getCircleRadiusCorrection()/Math.cos(O[1])}projectTileCoordinates(l,p,C,S){const O=C.canonical,U=su(l,p,O.x,O.y,O.z),N=1+(S?S(l,p):0)/a.bx,Y=[U[0]*N,U[1]*N,U[2]*N,1];a.aA(Y,Y,this._globeViewProjMatrixNoCorrection);const re=this._cachedClippingPlane,ae=re[0]*U[0]+re[1]*U[1]+re[2]*U[2]+re[3]<0;return{point:new a.P(Y[0]/Y[3],Y[1]/Y[3]),signedDistanceFromCamera:Y[3],isOccluded:ae}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const l=rs(this.worldSize,this.center.lat),p=a.bd(),C=a.bd();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*l),a.b7(p,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const S=this.centerOffset;p[8]=2*-S.x/this._helper._width,p[9]=2*S.y/this._helper._height,this._projectionMatrix=a.b8(p),this._globeProjMatrixInverted=a.bd(),a.au(this._globeProjMatrixInverted,p),a.N(p,p,[0,0,-this.cameraToCenterDistance]),a.b9(p,p,this.rollInRadians),a.ba(p,p,-this.pitchInRadians),a.b9(p,p,this.bearingInRadians),a.N(p,p,[0,0,-l]);const O=a.bs();O[0]=l,O[1]=l,O[2]=l,a.ba(C,p,this.center.lat*Math.PI/180),a.bC(C,C,-this.center.lng*Math.PI/180),a.O(C,C,O),this._globeViewProjMatrixNoCorrection=C,a.ba(p,p,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),a.bC(p,p,-this.center.lng*Math.PI/180),a.O(p,p,O),this._globeViewProjMatrix32f=new Float32Array(p),this._globeViewProjMatrixNoCorrectionInverted=a.bd(),a.au(this._globeViewProjMatrixNoCorrectionInverted,C);const U=a.bs();this._cameraPosition=a.bs(),this._cameraPosition[2]=this.cameraToCenterDistance/l,a.bz(this._cameraPosition,this._cameraPosition,U,-this.rollInRadians),a.bA(this._cameraPosition,this._cameraPosition,U,this.pitchInRadians),a.bz(this._cameraPosition,this._cameraPosition,U,-this.bearingInRadians),a.aV(this._cameraPosition,this._cameraPosition,[0,0,1]),a.bA(this._cameraPosition,this._cameraPosition,U,-this.center.lat*Math.PI/180),a.bB(this._cameraPosition,this._cameraPosition,U,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(l);const N=a.b8(this._globeViewProjMatrixNoCorrectionInverted);a.O(N,N,[1,1,-1]),this._cachedFrustum=ka.fromInvProjectionMatrix(N,1,0,this._cachedClippingPlane,!0)}calculateFogMatrix(l){a.w("calculateFogMatrix is not supported on globe projection.");const p=a.bd();return a.am(p),p}getVisibleUnwrappedCoordinates(l){return[new a.b5(0,l)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(l){l&&a.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(l,p){if(!this._globeViewProjMatrixNoCorrection)return 1;const C=Lo(l);a.aU(C,C,1+p/a.bx);const S=a.by();return a.aA(S,[C[0],C[1],C[2],1],this._globeViewProjMatrixNoCorrection),S[2]/S[3]}populateCache(l){}getBounds(){const l=.5*this.width,p=.5*this.height,C=[new a.P(0,0),new a.P(l,0),new a.P(this.width,0),new a.P(this.width,p),new a.P(this.width,this.height),new a.P(l,this.height),new a.P(0,this.height),new a.P(0,p)],S=[];for(const ge of C)S.push(this.unprojectScreenPoint(ge));let O=0,U=0,N=0,Y=0;const re=this.center;for(const ge of S){const pe=a.bD(re.lng,ge.lng),we=a.bD(re.lat,ge.lat);pe<U&&(U=pe),pe>O&&(O=pe),we<Y&&(Y=we),we>N&&(N=we)}const ae=[re.lng+U,re.lat+Y,re.lng+O,re.lat+N];return this.isSurfacePointOnScreen([0,1,0])&&(ae[3]=90,ae[0]=-180,ae[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(ae[1]=-90,ae[0]=-180,ae[2]=180),new kt(ae)}calculateCenterFromCameraLngLatAlt(l,p,C,S){return this._helper.calculateCenterFromCameraLngLatAlt(l,p,C,S)}setLocationAtPoint(l,p){const C=Lo(this.unprojectScreenPoint(p)),S=Lo(l),O=a.bs();a.bE(O);const U=a.bs();a.bB(U,C,O,-this.center.lng*Math.PI/180),a.bA(U,U,O,this.center.lat*Math.PI/180);const N=S[0]*S[0]+S[2]*S[2],Y=U[0]*U[0];if(N<Y)return;const re=Math.sqrt(N-Y),ae=-re,ge=a.bF(S[0],S[2],U[0],re),pe=a.bF(S[0],S[2],U[0],ae),we=a.bs();a.bB(we,S,O,-ge);const Fe=a.bF(we[1],we[2],U[1],U[2]),He=a.bs();a.bB(He,S,O,-pe);const Ze=a.bF(He[1],He[2],U[1],U[2]),et=.5*Math.PI,rt=Fe>=-et&&Fe<=et,lt=Ze>=-et&&Ze<=et;let nt,ht;if(rt&&lt){const Yt=this.center.lng*Math.PI/180,jt=this.center.lat*Math.PI/180;a.bG(ge,Yt)+a.bG(Fe,jt)<a.bG(pe,Yt)+a.bG(Ze,jt)?(nt=ge,ht=Fe):(nt=pe,ht=Ze)}else if(rt)nt=ge,ht=Fe;else{if(!lt)return;nt=pe,ht=Ze}const bt=nt/Math.PI*180,st=ht/Math.PI*180,wt=this.center.lat;this.setCenter(new a.U(bt,a.ai(st,-90,90))),this.setZoom(this.zoom+wo(wt,this.center.lat))}locationToScreenPoint(l,p){const C=Lo(l);if(p){const S=p.getElevationForLngLatZoom(l,this._helper._tileZoom);a.aU(C,C,1+S/a.bx)}return this._projectSurfacePointToScreen(C)}_projectSurfacePointToScreen(l){const p=a.by();return a.aA(p,[...l,1],this._globeViewProjMatrixNoCorrection),p[0]/=p[3],p[1]/=p[3],new a.P((.5*p[0]+.5)*this.width,(.5*-p[1]+.5)*this.height)}screenPointToMercatorCoordinate(l,p){if(p){const C=p.pointCoordinate(l);if(C)return C}return a.a5.fromLngLat(this.unprojectScreenPoint(l))}screenPointToLocation(l,p){var C;return(C=this.screenPointToMercatorCoordinate(l,p))===null||C===void 0?void 0:C.toLngLat()}isPointOnMapSurface(l,p){const C=this._cameraPosition,S=this.getRayDirectionFromPixel(l);return!!this.rayPlanetIntersection(C,S)}getRayDirectionFromPixel(l){const p=a.by();p[0]=l.x/this.width*2-1,p[1]=-1*(l.y/this.height*2-1),p[2]=1,p[3]=1,a.aA(p,p,this._globeViewProjMatrixNoCorrectionInverted),p[0]/=p[3],p[1]/=p[3],p[2]/=p[3];const C=a.bs();C[0]=p[0]-this._cameraPosition[0],C[1]=p[1]-this._cameraPosition[1],C[2]=p[2]-this._cameraPosition[2];const S=a.bs();return a.aY(S,C),S}isSurfacePointVisible(l){const p=this._cachedClippingPlane;return p[0]*l[0]+p[1]*l[1]+p[2]*l[2]+p[3]>=0}isSurfacePointOnScreen(l){if(!this.isSurfacePointVisible(l))return!1;const p=a.by();return a.aA(p,[...l,1],this._globeViewProjMatrixNoCorrection),p[0]/=p[3],p[1]/=p[3],p[2]/=p[3],p[0]>-1&&p[0]<1&&p[1]>-1&&p[1]<1&&p[2]>-1&&p[2]<1}rayPlanetIntersection(l,p){const C=a.a_(l,p),S=a.bs(),O=a.bs();a.aU(O,p,C),a.aX(S,l,O);const U=1-a.a_(S,S);if(U<0)return null;const N=a.a_(l,l)-1,Y=-C+(C<0?1:-1)*Math.sqrt(U),re=N/Y,ae=Y;return{tMin:Math.min(re,ae),tMax:Math.max(re,ae)}}unprojectScreenPoint(l){const p=this._cameraPosition,C=this.getRayDirectionFromPixel(l),S=this.rayPlanetIntersection(p,C);if(S){const ae=a.bs();a.aV(ae,p,[C[0]*S.tMin,C[1]*S.tMin,C[2]*S.tMin]);const ge=a.bs();return a.aY(ge,ae),S1(ge)}const O=this._cachedClippingPlane,U=O[0]*C[0]+O[1]*C[1]+O[2]*C[2],N=-a.b4(O,p)/U,Y=a.bs();if(N>0)a.aV(Y,p,[C[0]*N,C[1]*N,C[2]*N]);else{const ae=a.bs();a.aV(ae,p,[2*C[0],2*C[1],2*C[2]]);const ge=a.b4(this._cachedClippingPlane,ae);a.aX(Y,ae,[this._cachedClippingPlane[0]*ge,this._cachedClippingPlane[1]*ge,this._cachedClippingPlane[2]*ge])}const re=(function(ae){const ge=a.bs();return ge[0]=ae[0]*-ae[3],ge[1]=ae[1]*-ae[3],ge[2]=ae[2]*-ae[3],{center:ge,radius:Math.sqrt(1-ae[3]*ae[3])}})(O);return S1((function(ae,ge,pe){const we=a.bs();a.aX(we,pe,ae);const Fe=a.bs();return a.bt(Fe,ae,we,ge/a.b2(we)),Fe})(re.center,re.radius,Y))}getMatrixForModel(l,p){const C=a.U.convert(l),S=1/a.bx,O=a.bc();return a.bC(O,O,C.lng/180*Math.PI),a.ba(O,O,-C.lat/180*Math.PI),a.N(O,O,[0,0,1+p/a.bx]),a.ba(O,O,.5*Math.PI),a.O(O,O,[S,S,S]),O}getProjectionDataForCustomLayer(l=!0){const p=this.getProjectionData({overscaledTileID:new a.a0(0,0,0,0,0),applyGlobeMatrix:l});return p.tileMercatorCoords=[0,0,1,1],p}getFastPathSimpleProjectionMatrix(l){}}class Um{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(l){this._helper.setMinZoom(l)}setMaxZoom(l){this._helper.setMaxZoom(l)}setMinPitch(l){this._helper.setMinPitch(l)}setMaxPitch(l){this._helper.setMaxPitch(l)}setRenderWorldCopies(l){this._helper.setRenderWorldCopies(l)}setBearing(l){this._helper.setBearing(l)}setPitch(l){this._helper.setPitch(l)}setRoll(l){this._helper.setRoll(l)}setFov(l){this._helper.setFov(l)}setZoom(l){this._helper.setZoom(l)}setCenter(l){this._helper.setCenter(l)}setElevation(l){this._helper.setElevation(l)}setMinElevationForCurrentTile(l){this._helper.setMinElevationForCurrentTile(l)}setPadding(l){this._helper.setPadding(l)}interpolatePadding(l,p,C){return this._helper.interpolatePadding(l,p,C)}isPaddingEqual(l){return this._helper.isPaddingEqual(l)}resize(l,p,C=!0){this._helper.resize(l,p,C)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(l){this._helper.setMaxBounds(l)}setConstrain(l){this._helper.setConstrain(l)}overrideNearFarZ(l,p){this._helper.overrideNearFarZ(l,p)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(l){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),l)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get constrain(){return this._helper.constrain}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(l,p){this._globeness=l,this._globeLatitudeErrorCorrectionRadians=p,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().prepareNextFrame(),this._mercatorTransform.getCoveringTilesDetailsProvider().prepareNextFrame()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(l){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this.defaultConstrain=(p,C)=>this.currentTransform.defaultConstrain(p,C),this._helper=new vo({calcMatrices:()=>{this._calcMatrices()},constrain:(p,C)=>this.defaultConstrain(p,C)},l),this._globeness=1,this._mercatorTransform=new Ta,this._verticalPerspectiveTransform=new Pm}clone(){const l=new Um;return l._globeness=this._globeness,l._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,l.apply(this),l}apply(l){this._helper.apply(l),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(l){const p=this._mercatorTransform.getProjectionData(l),C=this._verticalPerspectiveTransform.getProjectionData(l);return{mainMatrix:this.isGlobeRendering?C.mainMatrix:p.mainMatrix,clippingPlane:C.clippingPlane,tileMercatorCoords:C.tileMercatorCoords,projectionTransition:l.applyGlobeMatrix?this._globeness:0,fallbackMatrix:p.fallbackMatrix}}isLocationOccluded(l){return this.currentTransform.isLocationOccluded(l)}transformLightDirection(l){return this.currentTransform.transformLightDirection(l)}getPixelScale(){return a.bn(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return a.bn(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(l,p,C){const S=this._mercatorTransform.getPitchedTextCorrection(l,p,C),O=this._verticalPerspectiveTransform.getPitchedTextCorrection(l,p,C);return a.bn(S,O,this._globeness)}projectTileCoordinates(l,p,C,S){return this.currentTransform.projectTileCoordinates(l,p,C,S)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(l){return this.currentTransform.calculateFogMatrix(l)}getVisibleUnwrappedCoordinates(l){return this.currentTransform.getVisibleUnwrappedCoordinates(l)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(l){this._mercatorTransform.recalculateZoomAndCenter(l),this._verticalPerspectiveTransform.recalculateZoomAndCenter(l)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(l,p){return this.currentTransform.lngLatToCameraDepth(l,p)}populateCache(l){this._mercatorTransform.populateCache(l),this._verticalPerspectiveTransform.populateCache(l)}getBounds(){return this.currentTransform.getBounds()}calculateCenterFromCameraLngLatAlt(l,p,C,S){return this._helper.calculateCenterFromCameraLngLatAlt(l,p,C,S)}setLocationAtPoint(l,p){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(l,p),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(l,p),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(l,p){return this.currentTransform.locationToScreenPoint(l,p)}screenPointToMercatorCoordinate(l,p){return this.currentTransform.screenPointToMercatorCoordinate(l,p)}screenPointToLocation(l,p){return this.currentTransform.screenPointToLocation(l,p)}isPointOnMapSurface(l,p){return this.currentTransform.isPointOnMapSurface(l,p)}getRayDirectionFromPixel(l){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(l)}getMatrixForModel(l,p){return this.currentTransform.getMatrixForModel(l,p)}getProjectionDataForCustomLayer(l=!0){const p=this._mercatorTransform.getProjectionDataForCustomLayer(l);if(!this.isGlobeRendering)return p;const C=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(l);return C.fallbackMatrix=p.mainMatrix,C}getFastPathSimpleProjectionMatrix(l){return this.currentTransform.getFastPathSimpleProjectionMatrix(l)}}class oA{get useGlobeControls(){return!0}handlePanInertia(l,p){const C=Ap(l,p);return Math.abs(C.lng-p.center.lng)>180&&(C.lng=p.center.lng+179.5*Math.sign(C.lng-p.center.lng)),{easingCenter:C,easingOffset:new a.P(0,0)}}handleMapControlsRollPitchBearingZoom(l,p){const C=l.around,S=p.screenPointToLocation(C);l.bearingDelta&&p.setBearing(p.bearing+l.bearingDelta),l.pitchDelta&&p.setPitch(p.pitch+l.pitchDelta),l.rollDelta&&p.setRoll(p.roll+l.rollDelta);const O=p.zoom;l.zoomDelta&&p.setZoom(p.zoom+l.zoomDelta);const U=p.zoom-O;if(U===0)return;const N=a.bD(p.center.lng,S.lng),Y=N/(Math.abs(N/180)+1),re=a.bD(p.center.lat,S.lat),ae=p.getRayDirectionFromPixel(C),ge=p.cameraPosition,pe=-1*a.a_(ge,ae),we=a.bs();a.aV(we,ge,[ae[0]*pe,ae[1]*pe,ae[2]*pe]);const Fe=a.b0(we)-1,He=Math.exp(.5*-Math.max(Fe-.3,0)),Ze=rs(p.worldSize,p.center.lat)/Math.min(p.width,p.height),et=a.bq(Ze,.9,.5,1,.25),rt=(1-a.al(-U))*Math.min(He,et),lt=p.center.lat,nt=p.zoom,ht=new a.U(p.center.lng+Y*rt,a.ai(p.center.lat+re*rt,-a.aj,a.aj));p.setLocationAtPoint(S,C);const bt=p.center,st=a.bq(Math.abs(N),45,85,0,1),wt=a.bq(Ze,.75,.35,0,1),Yt=Math.pow(Math.max(st,wt),.25),jt=a.bD(bt.lng,ht.lng),Nt=a.bD(bt.lat,ht.lat);p.setCenter(new a.U(bt.lng+jt*Yt,bt.lat+Nt*Yt).wrap()),p.setZoom(nt+wo(lt,p.center.lat))}handleMapControlsPan(l,p,C){if(!l.panDelta)return;const S=p.center.lat,O=p.zoom;p.setCenter(Ap(l.panDelta,p).wrap()),p.setZoom(O+wo(S,p.center.lat))}cameraForBoxAndBearing(l,p,C,S,O){const U=J(l,p,C,S,O),N=p.left/O.width*2-1,Y=(O.width-p.right)/O.width*2-1,re=p.top/O.height*-2+1,ae=(O.height-p.bottom)/O.height*-2+1,ge=a.bD(C.getWest(),C.getEast())<0,pe=ge?C.getEast():C.getWest(),we=ge?C.getWest():C.getEast(),Fe=Math.max(C.getNorth(),C.getSouth()),He=Math.min(C.getNorth(),C.getSouth()),Ze=pe+.5*a.bD(pe,we),et=Fe+.5*a.bD(Fe,He),rt=O.clone();rt.setCenter(U.center),rt.setBearing(U.bearing),rt.setPitch(0),rt.setRoll(0),rt.setZoom(U.zoom);const lt=rt.modelViewProjectionMatrix,nt=[Lo(C.getNorthWest()),Lo(C.getNorthEast()),Lo(C.getSouthWest()),Lo(C.getSouthEast()),Lo(new a.U(we,et)),Lo(new a.U(pe,et)),Lo(new a.U(Ze,Fe)),Lo(new a.U(Ze,He))],ht=Lo(U.center);let bt=Number.POSITIVE_INFINITY;for(const st of nt)N<0&&(bt=oA.getLesserNonNegativeNonNull(bt,oA.solveVectorScale(st,ht,lt,"x",N))),Y>0&&(bt=oA.getLesserNonNegativeNonNull(bt,oA.solveVectorScale(st,ht,lt,"x",Y))),re>0&&(bt=oA.getLesserNonNegativeNonNull(bt,oA.solveVectorScale(st,ht,lt,"y",re))),ae<0&&(bt=oA.getLesserNonNegativeNonNull(bt,oA.solveVectorScale(st,ht,lt,"y",ae)));if(Number.isFinite(bt)&&bt!==0)return U.zoom=rt.zoom+a.ao(bt),U;Ni()}handleJumpToCenterZoom(l,p){const C=l.center.lat,S=l.constrain(p.center?a.U.convert(p.center):l.center,l.zoom).center;l.setCenter(S.wrap());const O=p.zoom!==void 0?+p.zoom:l.zoom+wo(C,S.lat);l.zoom!==O&&l.setZoom(O)}handleEaseTo(l,p){const C=l.zoom,S=l.center,O=l.padding,U={roll:l.roll,pitch:l.pitch,bearing:l.bearing},N={roll:p.roll===void 0?l.roll:p.roll,pitch:p.pitch===void 0?l.pitch:p.pitch,bearing:p.bearing===void 0?l.bearing:p.bearing},Y=p.zoom!==void 0,re=!l.isPaddingEqual(p.padding);let ae=!1;const ge=p.center?a.U.convert(p.center):S,pe=l.constrain(ge,C).center;yo(l,pe);const we=l.clone();we.setCenter(pe),we.setZoom(Y?+p.zoom:C+wo(S.lat,ge.lat)),we.setBearing(p.bearing);const Fe=new a.P(a.ai(l.centerPoint.x+p.offsetAsPoint.x,0,l.width),a.ai(l.centerPoint.y+p.offsetAsPoint.y,0,l.height));we.setLocationAtPoint(pe,Fe);const He=(p.offset&&p.offsetAsPoint.mag())>0?we.center:pe,Ze=Y?+p.zoom:C+wo(S.lat,He.lat),et=C+wo(S.lat,0),rt=Ze+wo(He.lat,0),lt=a.bD(S.lng,He.lng),nt=a.bD(S.lat,He.lat),ht=a.al(rt-et);return ae=Ze!==C,{easeFunc:bt=>{if(a.bh(U,N)||Fr({startEulerAngles:U,endEulerAngles:N,tr:l,k:bt,useSlerp:U.roll!=N.roll}),re&&l.interpolatePadding(O,p.padding,bt),p.around)a.w("Easing around a point is not supported under globe projection."),l.setLocationAtPoint(p.around,p.aroundPoint);else{const st=rt>et?Math.min(2,ht):Math.max(.5,ht),wt=Math.pow(st,1-bt),Yt=Fh(S,lt,nt,bt*wt);l.setCenter(Yt.wrap())}if(ae){const st=a.F.number(et,rt,bt)+wo(0,l.center.lat);l.setZoom(st)}},isZooming:ae,elevationCenter:He}}handleFlyTo(l,p){const C=p.zoom!==void 0,S=l.center,O=l.zoom,U=l.padding,N=!l.isPaddingEqual(p.padding),Y=l.constrain(a.U.convert(p.center||p.locationAtOffset),O).center,re=C?+p.zoom:l.zoom+wo(l.center.lat,Y.lat),ae=l.clone();ae.setCenter(Y),ae.setZoom(re),ae.setBearing(p.bearing);const ge=new a.P(a.ai(l.centerPoint.x+p.offsetAsPoint.x,0,l.width),a.ai(l.centerPoint.y+p.offsetAsPoint.y,0,l.height));ae.setLocationAtPoint(Y,ge);const pe=ae.center;yo(l,pe);const we=(function(nt,ht,bt){const st=Lo(ht),wt=Lo(bt),Yt=a.a_(st,wt),jt=Math.acos(Yt),Nt=qs(nt);return jt/(2*Math.PI)*Nt})(l,S,pe),Fe=O+wo(S.lat,0),He=re+wo(pe.lat,0),Ze=a.al(He-Fe);let et;if(typeof p.minZoom=="number"){const nt=+p.minZoom+wo(pe.lat,0),ht=Math.min(nt,Fe,He)+wo(0,pe.lat),bt=l.constrain(pe,ht).zoom+wo(pe.lat,0);et=a.al(bt-Fe)}const rt=a.bD(S.lng,pe.lng),lt=a.bD(S.lat,pe.lat);return{easeFunc:(nt,ht,bt,st)=>{const wt=Fh(S,rt,lt,bt);N&&l.interpolatePadding(U,p.padding,nt);const Yt=nt===1?pe:wt;l.setCenter(Yt.wrap());const jt=Fe+a.ao(ht);l.setZoom(nt===1?re:jt+wo(0,Yt.lat))},scaleOfZoom:Ze,targetCenter:pe,scaleOfMinZoom:et,pixelPathLength:we}}static solveVectorScale(l,p,C,S,O){const U=S==="x"?[C[0],C[4],C[8],C[12]]:[C[1],C[5],C[9],C[13]],N=[C[3],C[7],C[11],C[15]],Y=l[0]*U[0]+l[1]*U[1]+l[2]*U[2],re=l[0]*N[0]+l[1]*N[1]+l[2]*N[2],ae=p[0]*U[0]+p[1]*U[1]+p[2]*U[2],ge=p[0]*N[0]+p[1]*N[1]+p[2]*N[2];return ae+O*re===Y+O*ge||N[3]*(Y-ae)+U[3]*(ge-re)+Y*ge==ae*re?null:(ae+U[3]-O*ge-O*N[3])/(ae-Y-O*ge+O*re)}static getLesserNonNegativeNonNull(l,p){return p!==null&&p>=0&&p<l?p:l}}class _f{constructor(l){this._globe=l,this._mercatorCameraHelper=new ye,this._verticalPerspectiveCameraHelper=new oA}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(l,p){return this.currentHelper.handlePanInertia(l,p)}handleMapControlsRollPitchBearingZoom(l,p){return this.currentHelper.handleMapControlsRollPitchBearingZoom(l,p)}handleMapControlsPan(l,p,C){this.currentHelper.handleMapControlsPan(l,p,C)}cameraForBoxAndBearing(l,p,C,S,O){return this.currentHelper.cameraForBoxAndBearing(l,p,C,S,O)}handleJumpToCenterZoom(l,p){this.currentHelper.handleJumpToCenterZoom(l,p)}handleEaseTo(l,p){return this.currentHelper.handleEaseTo(l,p)}handleFlyTo(l,p){return this.currentHelper.handleFlyTo(l,p)}}const sh=(B,l)=>a.z(B,l&&l.filter((p=>p.identifier!=="source.canvas"))),ah=a.bH();class dp extends a.E{constructor(l,p={}){var C,S;super(),this._rtlPluginLoaded=()=>{for(const U in this.tileManagers){const N=this.tileManagers[U].getSource().type;N!=="vector"&&N!=="geojson"||this.tileManagers[U].reload()}},this.map=l,this.dispatcher=new Oe(Ke(),l._getMapId()),this.dispatcher.registerMessageHandler("GG",((U,N)=>this.getGlyphs(U,N))),this.dispatcher.registerMessageHandler("GI",((U,N)=>this.getImages(U,N))),this.dispatcher.registerMessageHandler("GDA",((U,N)=>this.getDashes(U,N))),this.imageManager=new me,this.imageManager.setEventedParent(this);const O=((C=l._container)===null||C===void 0?void 0:C.lang)||typeof document<"u"&&((S=document.documentElement)===null||S===void 0?void 0:S.lang)||void 0;this.glyphManager=new Ee(l._requestManager,p.localIdeographFontFamily,O),this.lineAtlas=new Ge(256,512),this.crossTileSymbolIndex=new Fl,this._spritesImagesIds={},this._layers={},this._order=[],this.tileManagers={},this.zoomHistory=new a.bI,this._loaded=!1,this._availableImages=[],this._globalState={},this._resetUpdates(),this.dispatcher.broadcast("SR",a.bJ()),Ae().on(le,this._rtlPluginLoaded),this.on("data",(U=>{if(U.dataType!=="source"||U.sourceDataType!=="metadata")return;const N=this.tileManagers[U.sourceId];if(!N)return;const Y=N.getSource();if(Y&&Y.vectorLayerIds)for(const re in this._layers){const ae=this._layers[re];ae.source===Y.id&&this._validateLayer(ae)}}))}setGlobalStateProperty(l,p){var C,S,O;this._checkLoaded();const U=p===null?(O=(S=(C=this.stylesheet.state)===null||C===void 0?void 0:C[l])===null||S===void 0?void 0:S.default)!==null&&O!==void 0?O:null:p;if(a.bK(U,this._globalState[l]))return this;this._globalState[l]=U,this._applyGlobalStateChanges([l])}getGlobalState(){return this._globalState}setGlobalState(l){this._checkLoaded();const p=[];for(const C in l)!a.bK(this._globalState[C],l[C].default)&&(p.push(C),this._globalState[C]=l[C].default);this._applyGlobalStateChanges(p)}_applyGlobalStateChanges(l){if(l.length===0)return;const p=new Set,C={};for(const S of l){C[S]=this._globalState[S];for(const O in this._layers){const U=this._layers[O],N=U.getLayoutAffectingGlobalStateRefs(),Y=U.getPaintAffectingGlobalStateRefs();if(N.has(S)&&p.add(U.source),Y.has(S))for(const{name:re,value:ae}of Y.get(S))this._updatePaintProperty(U,re,ae)}}this.dispatcher.broadcast("UGS",C);for(const S in this.tileManagers)p.has(S)&&(this._reloadSource(S),this._changed=!0)}loadURL(l,p={},C){this.fire(new a.l("dataloading",{dataType:"style"})),p.validate=typeof p.validate!="boolean"||p.validate;const S=this.map._requestManager.transformRequest(l,"Style");this._loadStyleRequest=new AbortController;const O=this._loadStyleRequest;a.j(S,this._loadStyleRequest).then((U=>{this._loadStyleRequest=null,this._load(U.data,p,C)})).catch((U=>{this._loadStyleRequest=null,U&&!O.signal.aborted&&this.fire(new a.k(U))}))}loadJSON(l,p={},C){this.fire(new a.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,x.frameAsync(this._frameRequest).then((()=>{this._frameRequest=null,p.validate=p.validate!==!1,this._load(l,p,C)})).catch((()=>{}))}loadEmpty(){this.fire(new a.l("dataloading",{dataType:"style"})),this._load(ah,{validate:!1})}_load(l,p,C){var S,O;let U=p.transformStyle?p.transformStyle(C,l):l;if(!p.validate||!sh(this,a.B(U))){U=Object.assign({},U),this._loaded=!0,this.stylesheet=U;for(const N in U.sources)this.addSource(N,U.sources[N],{validate:!1});U.sprite?this._loadSprite(U.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(U.glyphs),this._createLayers(),this.light=new gt(this.stylesheet.light),this._setProjectionInternal(((S=this.stylesheet.projection)===null||S===void 0?void 0:S.type)||"mercator"),this.sky=new Re(this.stylesheet.sky),this.map.setTerrain((O=this.stylesheet.terrain)!==null&&O!==void 0?O:null),this.fire(new a.l("data",{dataType:"style"})),this.fire(new a.l("style.load"))}}_createLayers(){var l,p,C;const S=a.bL(this.stylesheet.layers);this.setGlobalState((l=this.stylesheet.state)!==null&&l!==void 0?l:null),this.dispatcher.broadcast("SL",S),this._order=S.map((O=>O.id)),this._layers={},this._serializedLayers=null;for(const O of S){const U=a.bM(O,this._globalState);if(U.setEventedParent(this,{layer:{id:O.id}}),this._layers[O.id]=U,a.bN(U)&&this.tileManagers[U.source]){const N=(C=(p=O.paint)===null||p===void 0?void 0:p["raster-fade-duration"])!==null&&C!==void 0?C:U.paint.get("raster-fade-duration");this.tileManagers[U.source].setRasterFadeDuration(N)}}}_loadSprite(l,p=!1,C=void 0){let S;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,(function(O,U,N,Y){return a._(this,void 0,void 0,(function*(){const re=oe(O),ae=N>1?"@2x":"",ge={},pe={};for(const{id:we,url:Fe}of re){const He=U.transformRequest(ue(Fe,ae,".json"),"SpriteJSON");ge[we]=a.j(He,Y);const Ze=U.transformRequest(ue(Fe,ae,".png"),"SpriteImage");pe[we]=Z.getImage(Ze,Y)}return yield Promise.all([...Object.values(ge),...Object.values(pe)]),(function(we,Fe){return a._(this,void 0,void 0,(function*(){const He={};for(const Ze in we){He[Ze]={};const et=x.getImageCanvasContext((yield Fe[Ze]).data),rt=(yield we[Ze]).data;for(const lt in rt){const{width:nt,height:ht,x:bt,y:st,sdf:wt,pixelRatio:Yt,stretchX:jt,stretchY:Nt,content:qt,textFitWidth:gn,textFitHeight:In}=rt[lt];He[Ze][lt]={data:null,pixelRatio:Yt,sdf:wt,stretchX:jt,stretchY:Nt,content:qt,textFitWidth:gn,textFitHeight:In,spriteData:{width:nt,height:ht,x:bt,y:st,context:et}}}}return He}))})(ge,pe)}))})(l,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then((O=>{if(this._spriteRequest=null,O)for(const U in O){this._spritesImagesIds[U]=[];const N=this._spritesImagesIds[U]?this._spritesImagesIds[U].filter((Y=>!(Y in O))):[];for(const Y of N)this.imageManager.removeImage(Y),this._changedImages[Y]=!0;for(const Y in O[U]){const re=U==="default"?Y:`${U}:${Y}`;this._spritesImagesIds[U].push(re),re in this.imageManager.images?this.imageManager.updateImage(re,O[U][Y],!1):this.imageManager.addImage(re,O[U][Y]),p&&(this._changedImages[re]=!0)}}})).catch((O=>{this._spriteRequest=null,S=O,this.fire(new a.k(S))})).finally((()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),p&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"})),C&&C(S)}))}_unloadSprite(){for(const l of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(l),this._changedImages[l]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}_validateLayer(l){const p=this.tileManagers[l.source];if(!p)return;const C=l.sourceLayer;if(!C)return;const S=p.getSource();(S.type==="geojson"||S.vectorLayerIds&&S.vectorLayerIds.indexOf(C)===-1)&&this.fire(new a.k(new Error(`Source layer "${C}" does not exist on source "${S.id}" as specified by style layer "${l.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const l in this.tileManagers)if(!this.tileManagers[l].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(l,p=!1){const C=this._serializedAllLayers();if(!l||l.length===0)return Object.values(p?a.bO(C):C);const S=[];for(const O of l)if(C[O]){const U=p?a.bO(C[O]):C[O];S.push(U)}return S}_serializedAllLayers(){let l=this._serializedLayers;if(l)return l;l=this._serializedLayers={};const p=Object.keys(this._layers);for(const C of p){const S=this._layers[C];S.type!=="custom"&&(l[C]=S.serialize())}return l}hasTransitions(){var l,p,C;if(!((l=this.light)===null||l===void 0)&&l.hasTransition()||!((p=this.sky)===null||p===void 0)&&p.hasTransition()||!((C=this.projection)===null||C===void 0)&&C.hasTransition())return!0;for(const S in this.tileManagers)if(this.tileManagers[S].hasTransition())return!0;for(const S in this._layers)if(this._layers[S].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(l){if(!this._loaded)return;const p=this._changed;if(p){const S=Object.keys(this._updatedLayers),O=Object.keys(this._removedLayers);(S.length||O.length)&&this._updateWorkerLayers(S,O);for(const U in this._updatedSources){const N=this._updatedSources[U];if(N==="reload")this._reloadSource(U);else{if(N!=="clear")throw new Error(`Invalid action ${N}`);this._clearSource(U)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const U in this._updatedPaintProps)this._layers[U].updateTransitions(l);this.light.updateTransitions(l),this.sky.updateTransitions(l),this._resetUpdates()}const C={};for(const S in this.tileManagers){const O=this.tileManagers[S];C[S]=O.used,O.used=!1}for(const S of this._order){const O=this._layers[S];O.recalculate(l,this._availableImages),!O.isHidden(l.zoom)&&O.source&&(this.tileManagers[O.source].used=!0)}for(const S in C){const O=this.tileManagers[S];!!C[S]!=!!O.used&&O.fire(new a.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:S}))}this.light.recalculate(l),this.sky.recalculate(l),this.projection.recalculate(l),this.z=l.zoom,p&&this.fire(new a.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const l=Object.keys(this._changedImages);if(l.length){for(const p in this.tileManagers)this.tileManagers[p].reloadTilesForDependencies(["icons","patterns"],l);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const l in this.tileManagers)this.tileManagers[l].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(l,p){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(l,!1),removedIds:p})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(l,p={}){var C;this._checkLoaded();const S=this.serialize();if(l=p.transformStyle?p.transformStyle(S,l):l,((C=p.validate)===null||C===void 0||C)&&sh(this,a.B(l)))return!1;(l=a.bO(l)).layers=a.bL(l.layers);const O=a.bP(S,l),U=this._getOperationsToPerform(O);if(U.unimplemented.length>0)throw new Error(`Unimplemented: ${U.unimplemented.join(", ")}.`);if(U.operations.length===0)return!1;for(const N of U.operations)N();return this.stylesheet=l,this._serializedLayers=null,!0}_getOperationsToPerform(l){const p=[],C=[];for(const S of l)switch(S.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":p.push((()=>this.addLayer.apply(this,S.args)));break;case"removeLayer":p.push((()=>this.removeLayer.apply(this,S.args)));break;case"setPaintProperty":p.push((()=>this.setPaintProperty.apply(this,S.args)));break;case"setLayoutProperty":p.push((()=>this.setLayoutProperty.apply(this,S.args)));break;case"setFilter":p.push((()=>this.setFilter.apply(this,S.args)));break;case"addSource":p.push((()=>this.addSource.apply(this,S.args)));break;case"removeSource":p.push((()=>this.removeSource.apply(this,S.args)));break;case"setLayerZoomRange":p.push((()=>this.setLayerZoomRange.apply(this,S.args)));break;case"setLight":p.push((()=>this.setLight.apply(this,S.args)));break;case"setGeoJSONSourceData":p.push((()=>this.setGeoJSONSourceData.apply(this,S.args)));break;case"setGlyphs":p.push((()=>this.setGlyphs.apply(this,S.args)));break;case"setSprite":p.push((()=>this.setSprite.apply(this,S.args)));break;case"setTerrain":p.push((()=>this.map.setTerrain.apply(this,S.args)));break;case"setSky":p.push((()=>this.setSky.apply(this,S.args)));break;case"setProjection":this.setProjection.apply(this,S.args);break;case"setGlobalState":p.push((()=>this.setGlobalState.apply(this,S.args)));break;case"setTransition":p.push((()=>{}));break;default:C.push(S.command)}return{operations:p,unimplemented:C}}addImage(l,p){if(this.getImage(l))return this.fire(new a.k(new Error(`An image named "${l}" already exists.`)));this.imageManager.addImage(l,p),this._afterImageUpdated(l)}updateImage(l,p){this.imageManager.updateImage(l,p)}getImage(l){return this.imageManager.getImage(l)}removeImage(l){if(!this.getImage(l))return this.fire(new a.k(new Error(`An image named "${l}" does not exist.`)));this.imageManager.removeImage(l),this._afterImageUpdated(l)}_afterImageUpdated(l){this._availableImages=this.imageManager.listImages(),this._changedImages[l]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(l,p,C={}){if(this._checkLoaded(),this.tileManagers[l]!==void 0)throw new Error(`Source "${l}" already exists.`);if(!p.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(p).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(p.type)>=0&&this._validate(a.B.source,`sources.${l}`,p,null,C))return;this.map&&this.map._collectResourceTiming&&(p.collectResourceTiming=!0);const S=this.tileManagers[l]=new Ji(l,p,this.dispatcher);S.style=this,S.setEventedParent(this,(()=>({isSourceLoaded:S.loaded(),source:S.serialize(),sourceId:l}))),S.onAdd(this.map),this._changed=!0}removeSource(l){if(this._checkLoaded(),this.tileManagers[l]===void 0)throw new Error("There is no source with this ID");for(const C in this._layers)if(this._layers[C].source===l)return this.fire(new a.k(new Error(`Source "${l}" cannot be removed while layer "${C}" is using it.`)));const p=this.tileManagers[l];delete this.tileManagers[l],delete this._updatedSources[l],p.fire(new a.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:l})),p.setEventedParent(null),p.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(l,p){if(this._checkLoaded(),this.tileManagers[l]===void 0)throw new Error(`There is no source with this ID=${l}`);const C=this.tileManagers[l].getSource();if(C.type!=="geojson")throw new Error(`geojsonSource.type is ${C.type}, which is !== 'geojson`);C.setData(p),this._changed=!0}getSource(l){return this.tileManagers[l]&&this.tileManagers[l].getSource()}addLayer(l,p,C={}){this._checkLoaded();const S=l.id;if(this.getLayer(S))return void this.fire(new a.k(new Error(`Layer "${S}" already exists on this map.`)));let O;if(l.type==="custom"){if(sh(this,a.bQ(l)))return;O=a.bM(l,this._globalState)}else{if("source"in l&&typeof l.source=="object"&&(this.addSource(S,l.source),l=a.bO(l),l=a.e(l,{source:S})),this._validate(a.B.layer,`layers.${S}`,l,{arrayIndex:-1},C))return;O=a.bM(l,this._globalState),this._validateLayer(O),O.setEventedParent(this,{layer:{id:S}})}const U=p?this._order.indexOf(p):this._order.length;if(p&&U===-1)this.fire(new a.k(new Error(`Cannot add layer "${S}" before non-existing layer "${p}".`)));else{if(this._order.splice(U,0,S),this._layerOrderChanged=!0,this._layers[S]=O,this._removedLayers[S]&&O.source&&O.type!=="custom"){const N=this._removedLayers[S];delete this._removedLayers[S],N.type!==O.type?this._updatedSources[O.source]="clear":(this._updatedSources[O.source]="reload",this.tileManagers[O.source].pause())}this._updateLayer(O),O.onAdd&&O.onAdd(this.map)}}moveLayer(l,p){if(this._checkLoaded(),this._changed=!0,!this._layers[l])return void this.fire(new a.k(new Error(`The layer '${l}' does not exist in the map's style and cannot be moved.`)));if(l===p)return;const C=this._order.indexOf(l);this._order.splice(C,1);const S=p?this._order.indexOf(p):this._order.length;p&&S===-1?this.fire(new a.k(new Error(`Cannot move layer "${l}" before non-existing layer "${p}".`))):(this._order.splice(S,0,l),this._layerOrderChanged=!0)}removeLayer(l){this._checkLoaded();const p=this._layers[l];if(!p)return void this.fire(new a.k(new Error(`Cannot remove non-existing layer "${l}".`)));p.setEventedParent(null);const C=this._order.indexOf(l);this._order.splice(C,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[l]=p,delete this._layers[l],this._serializedLayers&&delete this._serializedLayers[l],delete this._updatedLayers[l],delete this._updatedPaintProps[l],p.onRemove&&p.onRemove(this.map)}getLayer(l){return this._layers[l]}getLayersOrder(){return[...this._order]}hasLayer(l){return l in this._layers}setLayerZoomRange(l,p,C){this._checkLoaded();const S=this.getLayer(l);S?S.minzoom===p&&S.maxzoom===C||(p!=null&&(S.minzoom=p),C!=null&&(S.maxzoom=C),this._updateLayer(S)):this.fire(new a.k(new Error(`Cannot set the zoom range of non-existing layer "${l}".`)))}setFilter(l,p,C={}){this._checkLoaded();const S=this.getLayer(l);if(S){if(!a.bK(S.filter,p))return p==null?(S.setFilter(void 0),void this._updateLayer(S)):void(this._validate(a.B.filter,`layers.${S.id}.filter`,p,null,C)||(S.setFilter(a.bO(p)),this._updateLayer(S)))}else this.fire(new a.k(new Error(`Cannot filter non-existing layer "${l}".`)))}getFilter(l){return a.bO(this.getLayer(l).filter)}setLayoutProperty(l,p,C,S={}){this._checkLoaded();const O=this.getLayer(l);O?a.bK(O.getLayoutProperty(p),C)||(O.setLayoutProperty(p,C,S),this._updateLayer(O)):this.fire(new a.k(new Error(`Cannot style non-existing layer "${l}".`)))}getLayoutProperty(l,p){const C=this.getLayer(l);if(C)return C.getLayoutProperty(p);this.fire(new a.k(new Error(`Cannot get style of non-existing layer "${l}".`)))}setPaintProperty(l,p,C,S={}){this._checkLoaded();const O=this.getLayer(l);O?a.bK(O.getPaintProperty(p),C)||this._updatePaintProperty(O,p,C,S):this.fire(new a.k(new Error(`Cannot style non-existing layer "${l}".`)))}_updatePaintProperty(l,p,C,S={}){l.setPaintProperty(p,C,S)&&this._updateLayer(l),a.bN(l)&&p==="raster-fade-duration"&&this.tileManagers[l.source].setRasterFadeDuration(C),this._changed=!0,this._updatedPaintProps[l.id]=!0,this._serializedLayers=null}getPaintProperty(l,p){return this.getLayer(l).getPaintProperty(p)}setFeatureState(l,p){this._checkLoaded();const C=l.source,S=l.sourceLayer,O=this.tileManagers[C];if(O===void 0)return void this.fire(new a.k(new Error(`The source '${C}' does not exist in the map's style.`)));const U=O.getSource().type;U==="geojson"&&S?this.fire(new a.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):U!=="vector"||S?(l.id===void 0&&this.fire(new a.k(new Error("The feature id parameter must be provided."))),O.setFeatureState(S,l.id,p)):this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(l,p){this._checkLoaded();const C=l.source,S=this.tileManagers[C];if(S===void 0)return void this.fire(new a.k(new Error(`The source '${C}' does not exist in the map's style.`)));const O=S.getSource().type,U=O==="vector"?l.sourceLayer:void 0;O!=="vector"||U?p&&typeof l.id!="string"&&typeof l.id!="number"?this.fire(new a.k(new Error("A feature id is required to remove its specific state property."))):S.removeFeatureState(U,l.id,p):this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(l){this._checkLoaded();const p=l.source,C=l.sourceLayer,S=this.tileManagers[p];if(S!==void 0)return S.getSource().type!=="vector"||C?(l.id===void 0&&this.fire(new a.k(new Error("The feature id parameter must be provided."))),S.getFeatureState(C,l.id)):void this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new a.k(new Error(`The source '${p}' does not exist in the map's style.`)))}getTransition(){return a.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const l=a.bR(this.tileManagers,(O=>O.serialize())),p=this._serializeByIds(this._order,!0),C=this.map.getTerrain()||void 0,S=this.stylesheet;return a.bS({version:S.version,name:S.name,metadata:S.metadata,light:S.light,sky:S.sky,center:S.center,zoom:S.zoom,bearing:S.bearing,pitch:S.pitch,sprite:S.sprite,glyphs:S.glyphs,transition:S.transition,projection:S.projection,sources:l,layers:p,terrain:C},(O=>O!==void 0))}_updateLayer(l){this._updatedLayers[l.id]=!0,l.source&&!this._updatedSources[l.source]&&this.tileManagers[l.source].getSource().type!=="raster"&&(this._updatedSources[l.source]="reload",this.tileManagers[l.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(l){const p=U=>this._layers[U].type==="fill-extrusion",C={},S=[];for(let U=this._order.length-1;U>=0;U--){const N=this._order[U];if(p(N)){C[N]=U;for(const Y of l){const re=Y[N];if(re)for(const ae of re)S.push(ae)}}}S.sort(((U,N)=>N.intersectionZ-U.intersectionZ));const O=[];for(let U=this._order.length-1;U>=0;U--){const N=this._order[U];if(p(N))for(let Y=S.length-1;Y>=0;Y--){const re=S[Y].feature;if(C[re.layer.id]<U)break;O.push(re),S.pop()}else for(const Y of l){const re=Y[N];if(re)for(const ae of re)O.push(ae.feature)}}return O}queryRenderedFeatures(l,p,C){p&&p.filter&&this._validate(a.B.filter,"queryRenderedFeatures.filter",p.filter,null,p);const S={};if(p&&p.layers){if(!(Array.isArray(p.layers)||p.layers instanceof Set))return this.fire(new a.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const re of p.layers){const ae=this._layers[re];if(!ae)return this.fire(new a.k(new Error(`The layer '${re}' does not exist in the map's style and cannot be queried for features.`))),[];S[ae.source]=!0}}const O=[];p.availableImages=this._availableImages;const U=this._serializedAllLayers(),N=p.layers instanceof Set?p.layers:Array.isArray(p.layers)?new Set(p.layers):null,Y=Object.assign(Object.assign({},p),{layers:N,globalState:this._globalState});for(const re in this.tileManagers)p.layers&&!S[re]||O.push(yt(this.tileManagers[re],this._layers,U,l,Y,C,this.map.terrain?(ae,ge,pe)=>this.map.terrain.getElevation(ae,ge,pe):void 0));return this.placement&&O.push((function(re,ae,ge,pe,we,Fe,He){const Ze={},et=Fe.queryRenderedSymbols(pe),rt=[];for(const lt of Object.keys(et).map(Number))rt.push(He[lt]);rt.sort(ft);for(const lt of rt){const nt=lt.featureIndex.lookupSymbolFeatures(et[lt.bucketInstanceId],ae,lt.bucketIndex,lt.sourceLayerIndex,{filterSpec:we.filter,globalState:we.globalState},we.layers,we.availableImages,re);for(const ht in nt){const bt=Ze[ht]=Ze[ht]||[],st=nt[ht];st.sort(((wt,Yt)=>{const jt=lt.featureSortOrder;if(jt){const Nt=jt.indexOf(wt.featureIndex);return jt.indexOf(Yt.featureIndex)-Nt}return Yt.featureIndex-wt.featureIndex}));for(const wt of st)bt.push(wt)}}return(function(lt,nt,ht){for(const bt in lt)for(const st of lt[bt])Ct(st,ht[nt[bt].source]);return lt})(Ze,re,ge)})(this._layers,U,this.tileManagers,l,Y,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(O)}querySourceFeatures(l,p){p?.filter&&this._validate(a.B.filter,"querySourceFeatures.filter",p.filter,null,p);const C=this.tileManagers[l];return C?(function(S,O){const U=S.getRenderableIds().map((re=>S.getTileByID(re))),N=[],Y={};for(let re=0;re<U.length;re++){const ae=U[re],ge=ae.tileID.canonical.key;Y[ge]||(Y[ge]=!0,ae.querySourceFeatures(N,O))}return N})(C,p?Object.assign(Object.assign({},p),{globalState:this._globalState}):{globalState:this._globalState}):[]}getLight(){return this.light.getLight()}setLight(l,p={}){this._checkLoaded();const C=this.light.getLight();let S=!1;for(const U in l)if(!a.bK(l[U],C[U])){S=!0;break}if(!S)return;const O={now:D(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(l,p),this.light.updateTransitions(O)}getProjection(){var l;return(l=this.stylesheet)===null||l===void 0?void 0:l.projection}setProjection(l){if(this._checkLoaded(),this.projection){if(this.projection.name===l.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=l,this._setProjectionInternal(l.type)}getSky(){var l;return(l=this.stylesheet)===null||l===void 0?void 0:l.sky}setSky(l,p={}){this._checkLoaded();const C=this.getSky();let S=!1;if(!l&&!C)return;if(l&&!C)S=!0;else if(!l&&C)S=!0;else for(const U in l)if(!a.bK(l[U],C[U])){S=!0;break}if(!S)return;const O={now:D(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=l,this.sky.setSky(l,p),this.sky.updateTransitions(O)}_setProjectionInternal(l){const p=(function(C,S){const O={constrain:S};if(Array.isArray(C)){const U=new Zo({type:C});return{projection:U,transform:new Um(O),cameraHelper:new _f(U)}}switch(C){case"mercator":return{projection:new ms,transform:new Ta(O),cameraHelper:new ye};case"globe":{const U=new Zo({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:U,transform:new Um(O),cameraHelper:new _f(U)}}case"vertical-perspective":return{projection:new Hr,transform:new Pm(O),cameraHelper:new oA};default:return a.w(`Unknown projection name: ${C}. Falling back to mercator projection.`),{projection:new ms,transform:new Ta(O),cameraHelper:new ye}}})(l,this.map.transformConstrain);this.projection=p.projection,this.map.migrateProjection(p.transform,p.cameraHelper);for(const C in this.tileManagers)this.tileManagers[C].reload()}_validate(l,p,C,S,O={}){return(!O||O.validate!==!1)&&sh(this,l.call(a.B,a.e({key:p,style:this.serialize(),value:C,styleSpec:a.t},S)))}_remove(l=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),Ae().off(le,this._rtlPluginLoaded);for(const p in this._layers)this._layers[p].setEventedParent(null);for(const p in this.tileManagers){const C=this.tileManagers[p];C.setEventedParent(null),C.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),l&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(l)}_clearSource(l){this.tileManagers[l].clearTiles()}_reloadSource(l){this.tileManagers[l].resume(),this.tileManagers[l].reload()}_updateSources(l){for(const p in this.tileManagers)this.tileManagers[p].update(l,this.map.terrain)}_generateCollisionBoxes(){for(const l in this.tileManagers)this._reloadSource(l)}_updatePlacement(l,p,C,S,O=!1){let U=!1,N=!1;const Y={};for(const re of this._order){const ae=this._layers[re];if(ae.type!=="symbol")continue;if(!Y[ae.source]){const pe=this.tileManagers[ae.source];Y[ae.source]=pe.getRenderableIds(!0).map((we=>pe.getTileByID(we))).sort(((we,Fe)=>Fe.tileID.overscaledZ-we.tileID.overscaledZ||(we.tileID.isLessThan(Fe.tileID)?-1:1)))}const ge=this.crossTileSymbolIndex.addLayer(ae,Y[ae.source],l.center.lng);U=U||ge}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((O=O||this._layerOrderChanged||C===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(D(),l.zoom))&&(this.pauseablePlacement=new Mo(l,this.map.terrain,this._order,O,p,C,S,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,Y),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(D()),N=!0),U&&this.pauseablePlacement.placement.setStale()),N||U)for(const re of this._order){const ae=this._layers[re];ae.type==="symbol"&&this.placement.updateLayerOpacities(ae,Y[ae.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(D())}_releaseSymbolFadeTiles(){for(const l in this.tileManagers)this.tileManagers[l].releaseSymbolFadeTiles()}getImages(l,p){return a._(this,void 0,void 0,(function*(){const C=yield this.imageManager.getImages(p.icons);this._updateTilesForChangedImages();const S=this.tileManagers[p.source];return S&&S.setDependencies(p.tileID.key,p.type,p.icons),C}))}getGlyphs(l,p){return a._(this,void 0,void 0,(function*(){const C=yield this.glyphManager.getGlyphs(p.stacks),S=this.tileManagers[p.source];return S&&S.setDependencies(p.tileID.key,p.type,[""]),C}))}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(l,p={}){this._checkLoaded(),l&&this._validate(a.B.glyphs,"glyphs",l,null,p)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=l,this.glyphManager.entries={},this.glyphManager.setURL(l))}getDashes(l,p){return a._(this,void 0,void 0,(function*(){const C={};for(const[S,O]of Object.entries(p.dashes))C[S]=this.lineAtlas.getDash(O.dasharray,O.round);return C}))}addSprite(l,p,C={},S){this._checkLoaded();const O=[{id:l,url:p}],U=[...oe(this.stylesheet.sprite),...O];this._validate(a.B.sprite,"sprite",U,null,C)||(this.stylesheet.sprite=U,this._loadSprite(O,!0,S))}removeSprite(l){this._checkLoaded();const p=oe(this.stylesheet.sprite);if(p.find((C=>C.id===l))){if(this._spritesImagesIds[l])for(const C of this._spritesImagesIds[l])this.imageManager.removeImage(C),this._changedImages[C]=!0;p.splice(p.findIndex((C=>C.id===l)),1),this.stylesheet.sprite=p.length>0?p:void 0,delete this._spritesImagesIds[l],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}else this.fire(new a.k(new Error(`Sprite "${l}" doesn't exists on this map.`)))}getSprite(){return oe(this.stylesheet.sprite)}setSprite(l,p={},C){this._checkLoaded(),l&&this._validate(a.B.sprite,"sprite",l,null,p)||(this.stylesheet.sprite=l,l?this._loadSprite(l,!0,C):(this._unloadSprite(),C&&C(null)))}}var Km=a.aN([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class oc{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(l,p,C,S,O,U,N,Y,re){this.context=l;let ae=this.boundPaintVertexBuffers.length!==S.length;for(let ge=0;!ae&&ge<S.length;ge++)this.boundPaintVertexBuffers[ge]!==S[ge]&&(ae=!0);!this.vao||this.boundProgram!==p||this.boundLayoutVertexBuffer!==C||ae||this.boundIndexBuffer!==O||this.boundVertexOffset!==U||this.boundDynamicVertexBuffer!==N||this.boundDynamicVertexBuffer2!==Y||this.boundDynamicVertexBuffer3!==re?this.freshBind(p,C,S,O,U,N,Y,re):(l.bindVertexArray.set(this.vao),N&&N.bind(),O&&O.dynamicDraw&&O.bind(),Y&&Y.bind(),re&&re.bind())}freshBind(l,p,C,S,O,U,N,Y){const re=l.numAttributes,ae=this.context,ge=ae.gl;this.vao&&this.destroy(),this.vao=ae.createVertexArray(),ae.bindVertexArray.set(this.vao),this.boundProgram=l,this.boundLayoutVertexBuffer=p,this.boundPaintVertexBuffers=C,this.boundIndexBuffer=S,this.boundVertexOffset=O,this.boundDynamicVertexBuffer=U,this.boundDynamicVertexBuffer2=N,this.boundDynamicVertexBuffer3=Y,p.enableAttributes(ge,l);for(const pe of C)pe.enableAttributes(ge,l);U&&U.enableAttributes(ge,l),N&&N.enableAttributes(ge,l),Y&&Y.enableAttributes(ge,l),p.bind(),p.setVertexAttribPointers(ge,l,O);for(const pe of C)pe.bind(),pe.setVertexAttribPointers(ge,l,O);U&&(U.bind(),U.setVertexAttribPointers(ge,l,O)),S&&S.bind(),N&&(N.bind(),N.setVertexAttribPointers(ge,l,O)),Y&&(Y.bind(),Y.setVertexAttribPointers(ge,l,O)),ae.currentNumAttributes=re}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const Bd=(B,l,p,C,S)=>({u_texture:0,u_ele_delta:B,u_fog_matrix:l,u_fog_color:p?p.properties.get("fog-color"):a.bi.white,u_fog_ground_blend:p?p.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:S?0:p?p.calculateFogBlendOpacity(C):0,u_horizon_color:p?p.properties.get("horizon-color"):a.bi.white,u_horizon_fog_blend:p?p.properties.get("horizon-fog-blend"):1,u_is_globe_mode:S?1:0}),fp={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function xA(B){const l=[];for(let p=0;p<B.length;p++){if(B[p]===null)continue;const C=B[p].split(" ");l.push(C.pop())}return l}class xf{constructor(l,p,C,S,O,U,N,Y,re=[]){const ae=l.gl;this.program=ae.createProgram();const ge=xA(p.staticAttributes),pe=C?C.getBinderAttributes():[],we=ge.concat(pe),Fe=Fi.prelude.staticUniforms?xA(Fi.prelude.staticUniforms):[],He=N.staticUniforms?xA(N.staticUniforms):[],Ze=p.staticUniforms?xA(p.staticUniforms):[],et=C?C.getBinderUniforms():[],rt=Fe.concat(He).concat(Ze).concat(et),lt=[];for(const jt of rt)lt.indexOf(jt)<0&&lt.push(jt);const nt=C?C.defines():[];li(ae)&&nt.unshift("#version 300 es"),O&&nt.push("#define OVERDRAW_INSPECTOR;"),U&&nt.push("#define TERRAIN3D;"),Y&&nt.push(Y),re&&nt.push(...re);let ht=nt.concat(Fi.prelude.fragmentSource,N.fragmentSource,p.fragmentSource).join(`
`),bt=nt.concat(Fi.prelude.vertexSource,N.vertexSource,p.vertexSource).join(`
`);li(ae)||(ht=(function(jt){return jt.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")})(ht),bt=(function(jt){return jt.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")})(bt));const st=ae.createShader(ae.FRAGMENT_SHADER);if(ae.isContextLost())return void(this.failedToCreate=!0);if(ae.shaderSource(st,ht),ae.compileShader(st),!ae.getShaderParameter(st,ae.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${ae.getShaderInfoLog(st)}`);ae.attachShader(this.program,st);const wt=ae.createShader(ae.VERTEX_SHADER);if(ae.isContextLost())return void(this.failedToCreate=!0);if(ae.shaderSource(wt,bt),ae.compileShader(wt),!ae.getShaderParameter(wt,ae.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${ae.getShaderInfoLog(wt)}`);ae.attachShader(this.program,wt),this.attributes={};const Yt={};this.numAttributes=we.length;for(let jt=0;jt<this.numAttributes;jt++)we[jt]&&(ae.bindAttribLocation(this.program,jt,we[jt]),this.attributes[we[jt]]=jt);if(ae.linkProgram(this.program),!ae.getProgramParameter(this.program,ae.LINK_STATUS))throw new Error(`Program failed to link: ${ae.getProgramInfoLog(this.program)}`);ae.deleteShader(wt),ae.deleteShader(st);for(let jt=0;jt<lt.length;jt++){const Nt=lt[jt];if(Nt&&!Yt[Nt]){const qt=ae.getUniformLocation(this.program,Nt);qt&&(Yt[Nt]=qt)}}this.fixedUniforms=S(l,Yt),this.terrainUniforms=((jt,Nt)=>({u_depth:new a.bT(jt,Nt.u_depth),u_terrain:new a.bT(jt,Nt.u_terrain),u_terrain_dim:new a.bj(jt,Nt.u_terrain_dim),u_terrain_matrix:new a.bV(jt,Nt.u_terrain_matrix),u_terrain_unpack:new a.bW(jt,Nt.u_terrain_unpack),u_terrain_exaggeration:new a.bj(jt,Nt.u_terrain_exaggeration)}))(l,Yt),this.projectionUniforms=((jt,Nt)=>({u_projection_matrix:new a.bV(jt,Nt.u_projection_matrix),u_projection_tile_mercator_coords:new a.bW(jt,Nt.u_projection_tile_mercator_coords),u_projection_clipping_plane:new a.bW(jt,Nt.u_projection_clipping_plane),u_projection_transition:new a.bj(jt,Nt.u_projection_transition),u_projection_fallback_matrix:new a.bV(jt,Nt.u_projection_fallback_matrix)}))(l,Yt),this.binderUniforms=C?C.getUniforms(l,Yt):[]}draw(l,p,C,S,O,U,N,Y,re,ae,ge,pe,we,Fe,He,Ze,et,rt,lt){const nt=l.gl;if(this.failedToCreate)return;if(l.program.set(this.program),l.setDepthMode(C),l.setStencilMode(S),l.setColorMode(O),l.setCullFace(U),Y){l.activeTexture.set(nt.TEXTURE2),nt.bindTexture(nt.TEXTURE_2D,Y.depthTexture),l.activeTexture.set(nt.TEXTURE3),nt.bindTexture(nt.TEXTURE_2D,Y.texture);for(const bt in this.terrainUniforms)this.terrainUniforms[bt].set(Y[bt])}if(re)for(const bt in re)this.projectionUniforms[fp[bt]].set(re[bt]);if(N)for(const bt in this.fixedUniforms)this.fixedUniforms[bt].set(N[bt]);Ze&&Ze.setUniforms(l,this.binderUniforms,Fe,{zoom:He});let ht=0;switch(p){case nt.LINES:ht=2;break;case nt.TRIANGLES:ht=3;break;case nt.LINE_STRIP:ht=1}for(const bt of we.get()){const st=bt.vaos||(bt.vaos={});(st[ae]||(st[ae]=new oc)).bind(l,this,ge,Ze?Ze.getPaintVertexBuffers():[],pe,bt.vertexOffset,et,rt,lt),nt.drawElements(p,bt.primitiveLength*ht,nt.UNSIGNED_SHORT,bt.primitiveOffset*ht*2)}}}function pp(B,l,p){const C=1/a.aG(p,1,l.transform.tileZoom),S=Math.pow(2,p.tileID.overscaledZ),O=p.tileSize*Math.pow(2,l.transform.tileZoom)/S,U=O*(p.tileID.canonical.x+p.tileID.wrap*S),N=O*p.tileID.canonical.y;return{u_image:0,u_texsize:p.imageAtlasTexture.size,u_scale:[C,B.fromScale,B.toScale],u_fade:B.t,u_pixel_coord_upper:[U>>16,N>>16],u_pixel_coord_lower:[65535&U,65535&N]}}const zh=(B,l,p,C)=>{const S=B.style.light,O=S.properties.get("position"),U=[O.x,O.y,O.z],N=a.bZ();S.properties.get("anchor")==="viewport"&&a.b_(N,B.transform.bearingInRadians),a.b$(U,U,N);const Y=B.transform.transformLightDirection(U),re=S.properties.get("color");return{u_lightpos:U,u_lightpos_globe:Y,u_lightintensity:S.properties.get("intensity"),u_lightcolor:[re.r,re.g,re.b],u_vertical_gradient:+l,u_opacity:p,u_fill_translate:C}},B1=(B,l,p,C,S,O,U)=>a.e(zh(B,l,p,C),pp(O,B,U),{u_height_factor:-Math.pow(2,S.overscaledZ)/U.tileSize/8}),sc=(B,l,p,C)=>a.e(pp(l,B,p),{u_fill_translate:C}),ac=(B,l)=>({u_world:B,u_fill_translate:l}),Lm=(B,l,p,C,S)=>a.e(sc(B,l,p,S),{u_world:C}),mp=(B,l,p,C,S)=>{const O=B.transform;let U,N,Y=0;if(p.paint.get("circle-pitch-alignment")==="map"){const re=a.aG(l,1,O.zoom);U=!0,N=[re,re],Y=re/(a.a3*Math.pow(2,l.tileID.overscaledZ))*2*Math.PI*S}else U=!1,N=O.pixelsToGLUnits;return{u_camera_to_center_distance:O.cameraToCenterDistance,u_scale_with_map:+(p.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+U,u_device_pixel_ratio:B.pixelRatio,u_extrude_scale:N,u_globe_extrude_scale:Y,u_translate:C}},Fm=B=>({u_pixel_extrude_scale:[1/B.width,1/B.height]}),gp=B=>({u_viewport_size:[B.width,B.height]}),Od=(B,l=1)=>({u_color:B,u_overlay:0,u_overlay_scale:l}),Id=(B,l,p,C)=>{const S=a.aG(B,1,l)/(a.a3*Math.pow(2,B.tileID.overscaledZ))*2*Math.PI*C;return{u_extrude_scale:a.aG(B,1,l),u_intensity:p,u_globe_extrude_scale:S}},m0=(B,l,p,C)=>{const S=a.M();a.c0(S,0,B.width,B.height,0,0,1);const O=B.context.gl;return{u_matrix:S,u_world:[O.drawingBufferWidth,O.drawingBufferHeight],u_image:p,u_color_ramp:C,u_opacity:l.paint.get("heatmap-opacity")}},yp=(B,l,p)=>{const C=p.paint.get("hillshade-accent-color");let S;switch(p.paint.get("hillshade-method")){case"basic":S=4;break;case"combined":S=1;break;case"igor":S=2;break;case"multidirectional":S=3;break;default:S=0}const O=p.getIlluminationProperties();for(let U=0;U<O.directionRadians.length;U++)p.paint.get("hillshade-illumination-anchor")==="viewport"&&(O.directionRadians[U]+=B.transform.bearingInRadians);return{u_image:0,u_latrange:Nh(0,l.tileID),u_exaggeration:p.paint.get("hillshade-exaggeration"),u_altitudes:O.altitudeRadians,u_azimuths:O.directionRadians,u_accent:C,u_method:S,u_highlights:O.highlightColor,u_shadows:O.shadowColor}},jh=(B,l)=>{const p=l.stride,C=a.M();return a.c0(C,0,a.a3,-a.a3,0,0,1),a.N(C,C,[0,-a.a3,0]),{u_matrix:C,u_image:1,u_dimension:[p,p],u_zoom:B.overscaledZ,u_unpack:l.getUnpackVector()}};function Nh(B,l){const p=Math.pow(2,l.canonical.z),C=l.canonical.y;return[new a.a5(0,C/p).toLngLat().lat,new a.a5(0,(C+1)/p).toLngLat().lat]}const zm=(B,l,p=0)=>({u_image:0,u_unpack:l.getUnpackVector(),u_dimension:[l.stride,l.stride],u_elevation_stops:1,u_color_stops:4,u_color_ramp_size:p,u_opacity:B.paint.get("color-relief-opacity")}),MA=(B,l,p,C)=>{const S=B.transform;return{u_translation:g0(B,l,p),u_ratio:C/a.aG(l,1,S.zoom),u_device_pixel_ratio:B.pixelRatio,u_units_to_pixels:[1/S.pixelsToGLUnits[0],1/S.pixelsToGLUnits[1]]}},jm=(B,l,p,C,S)=>a.e(MA(B,l,p,C),{u_image:0,u_image_height:S}),Mf=(B,l,p,C,S)=>{const O=B.transform,U=Gm(l,O);return{u_translation:g0(B,l,p),u_texsize:l.imageAtlasTexture.size,u_ratio:C/a.aG(l,1,O.zoom),u_device_pixel_ratio:B.pixelRatio,u_image:0,u_scale:[U,S.fromScale,S.toScale],u_fade:S.t,u_units_to_pixels:[1/O.pixelsToGLUnits[0],1/O.pixelsToGLUnits[1]]}},lh=(B,l,p,C,S)=>{const O=Gm(l,B.transform);return a.e(MA(B,l,p,C),{u_tileratio:O,u_crossfade_from:S.fromScale,u_crossfade_to:S.toScale,u_image:0,u_mix:S.t,u_lineatlas_width:B.lineAtlas.width,u_lineatlas_height:B.lineAtlas.height})},Nm=(B,l,p,C,S,O)=>{const U=Gm(l,B.transform);return a.e(MA(B,l,p,C),{u_image:0,u_image_height:O,u_tileratio:U,u_crossfade_from:S.fromScale,u_crossfade_to:S.toScale,u_image_dash:1,u_mix:S.t,u_lineatlas_width:B.lineAtlas.width,u_lineatlas_height:B.lineAtlas.height})};function Gm(B,l){return 1/a.aG(B,1,l.tileZoom)}function g0(B,l,p){return a.aH(B.transform,l,p.paint.get("line-translate"),p.paint.get("line-translate-anchor"))}const O1=(B,l,p,C,S)=>{return{u_tl_parent:B,u_scale_parent:l,u_buffer_scale:1,u_fade_t:p.mix,u_opacity:p.opacity*C.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:C.paint.get("raster-brightness-min"),u_brightness_high:C.paint.get("raster-brightness-max"),u_saturation_factor:(U=C.paint.get("raster-saturation"),U>0?1-1/(1.001-U):-U),u_contrast_factor:(O=C.paint.get("raster-contrast"),O>0?1/(1-O):1+O),u_spin_weights:Gh(C.paint.get("raster-hue-rotate")),u_coords_top:[S[0].x,S[0].y,S[1].x,S[1].y],u_coords_bottom:[S[3].x,S[3].y,S[2].x,S[2].y]};var O,U};function Gh(B){B*=Math.PI/180;const l=Math.sin(B),p=Math.cos(B);return[(2*p+1)/3,(-Math.sqrt(3)*l-p+1)/3,(Math.sqrt(3)*l-p+1)/3]}const Bs=(B,l,p,C,S,O,U,N,Y,re,ae,ge,pe)=>{const we=U.transform;return{u_is_size_zoom_constant:+(B==="constant"||B==="source"),u_is_size_feature_constant:+(B==="constant"||B==="camera"),u_size_t:l?l.uSizeT:0,u_size:l?l.uSize:0,u_camera_to_center_distance:we.cameraToCenterDistance,u_pitch:we.pitch/360*2*Math.PI,u_rotate_symbol:+p,u_aspect_ratio:we.width/we.height,u_fade_change:U.options.fadeDuration?U.symbolFadeChange:1,u_label_plane_matrix:N,u_coord_matrix:Y,u_is_text:+ae,u_pitch_with_map:+C,u_is_along_line:S,u_is_variable_anchor:O,u_texsize:ge,u_texture:0,u_translation:re,u_pitched_scale:pe}},wA=(B,l,p,C,S,O,U,N,Y,re,ae,ge,pe,we)=>{const Fe=U.transform;return a.e(Bs(B,l,p,C,S,O,U,N,Y,re,ae,ge,we),{u_gamma_scale:C?Math.cos(Fe.pitch*Math.PI/180)*Fe.cameraToCenterDistance:1,u_device_pixel_ratio:U.pixelRatio,u_is_halo:1})},SA=(B,l,p,C,S,O,U,N,Y,re,ae,ge,pe)=>a.e(wA(B,l,p,C,S,O,U,N,Y,re,!0,ae,0,pe),{u_texsize_icon:ge,u_texture_icon:1}),Wm=(B,l)=>({u_opacity:B,u_color:l}),Qm=(B,l,p,C,S)=>a.e((function(O,U,N,Y){const re=N.imageManager.getPattern(O.from.toString()),ae=N.imageManager.getPattern(O.to.toString()),{width:ge,height:pe}=N.imageManager.getPixelSize(),we=Math.pow(2,Y.tileID.overscaledZ),Fe=Y.tileSize*Math.pow(2,N.transform.tileZoom)/we,He=Fe*(Y.tileID.canonical.x+Y.tileID.wrap*we),Ze=Fe*Y.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:re.tl,u_pattern_br_a:re.br,u_pattern_tl_b:ae.tl,u_pattern_br_b:ae.br,u_texsize:[ge,pe],u_mix:U.t,u_pattern_size_a:re.displaySize,u_pattern_size_b:ae.displaySize,u_scale_a:U.fromScale,u_scale_b:U.toScale,u_tile_units_to_pixels:1/a.aG(Y,1,N.transform.tileZoom),u_pixel_coord_upper:[He>>16,Ze>>16],u_pixel_coord_lower:[65535&He,65535&Ze]}})(p,S,l,C),{u_opacity:B}),vp=(B,l)=>{},Ym={fillExtrusion:(B,l)=>({u_lightpos:new a.bX(B,l.u_lightpos),u_lightpos_globe:new a.bX(B,l.u_lightpos_globe),u_lightintensity:new a.bj(B,l.u_lightintensity),u_lightcolor:new a.bX(B,l.u_lightcolor),u_vertical_gradient:new a.bj(B,l.u_vertical_gradient),u_opacity:new a.bj(B,l.u_opacity),u_fill_translate:new a.bY(B,l.u_fill_translate)}),fillExtrusionPattern:(B,l)=>({u_lightpos:new a.bX(B,l.u_lightpos),u_lightpos_globe:new a.bX(B,l.u_lightpos_globe),u_lightintensity:new a.bj(B,l.u_lightintensity),u_lightcolor:new a.bX(B,l.u_lightcolor),u_vertical_gradient:new a.bj(B,l.u_vertical_gradient),u_height_factor:new a.bj(B,l.u_height_factor),u_opacity:new a.bj(B,l.u_opacity),u_fill_translate:new a.bY(B,l.u_fill_translate),u_image:new a.bT(B,l.u_image),u_texsize:new a.bY(B,l.u_texsize),u_pixel_coord_upper:new a.bY(B,l.u_pixel_coord_upper),u_pixel_coord_lower:new a.bY(B,l.u_pixel_coord_lower),u_scale:new a.bX(B,l.u_scale),u_fade:new a.bj(B,l.u_fade)}),fill:(B,l)=>({u_fill_translate:new a.bY(B,l.u_fill_translate)}),fillPattern:(B,l)=>({u_image:new a.bT(B,l.u_image),u_texsize:new a.bY(B,l.u_texsize),u_pixel_coord_upper:new a.bY(B,l.u_pixel_coord_upper),u_pixel_coord_lower:new a.bY(B,l.u_pixel_coord_lower),u_scale:new a.bX(B,l.u_scale),u_fade:new a.bj(B,l.u_fade),u_fill_translate:new a.bY(B,l.u_fill_translate)}),fillOutline:(B,l)=>({u_world:new a.bY(B,l.u_world),u_fill_translate:new a.bY(B,l.u_fill_translate)}),fillOutlinePattern:(B,l)=>({u_world:new a.bY(B,l.u_world),u_image:new a.bT(B,l.u_image),u_texsize:new a.bY(B,l.u_texsize),u_pixel_coord_upper:new a.bY(B,l.u_pixel_coord_upper),u_pixel_coord_lower:new a.bY(B,l.u_pixel_coord_lower),u_scale:new a.bX(B,l.u_scale),u_fade:new a.bj(B,l.u_fade),u_fill_translate:new a.bY(B,l.u_fill_translate)}),circle:(B,l)=>({u_camera_to_center_distance:new a.bj(B,l.u_camera_to_center_distance),u_scale_with_map:new a.bT(B,l.u_scale_with_map),u_pitch_with_map:new a.bT(B,l.u_pitch_with_map),u_extrude_scale:new a.bY(B,l.u_extrude_scale),u_device_pixel_ratio:new a.bj(B,l.u_device_pixel_ratio),u_globe_extrude_scale:new a.bj(B,l.u_globe_extrude_scale),u_translate:new a.bY(B,l.u_translate)}),collisionBox:(B,l)=>({u_pixel_extrude_scale:new a.bY(B,l.u_pixel_extrude_scale)}),collisionCircle:(B,l)=>({u_viewport_size:new a.bY(B,l.u_viewport_size)}),debug:(B,l)=>({u_color:new a.bU(B,l.u_color),u_overlay:new a.bT(B,l.u_overlay),u_overlay_scale:new a.bj(B,l.u_overlay_scale)}),depth:vp,clippingMask:vp,heatmap:(B,l)=>({u_extrude_scale:new a.bj(B,l.u_extrude_scale),u_intensity:new a.bj(B,l.u_intensity),u_globe_extrude_scale:new a.bj(B,l.u_globe_extrude_scale)}),heatmapTexture:(B,l)=>({u_matrix:new a.bV(B,l.u_matrix),u_world:new a.bY(B,l.u_world),u_image:new a.bT(B,l.u_image),u_color_ramp:new a.bT(B,l.u_color_ramp),u_opacity:new a.bj(B,l.u_opacity)}),hillshade:(B,l)=>({u_image:new a.bT(B,l.u_image),u_latrange:new a.bY(B,l.u_latrange),u_exaggeration:new a.bj(B,l.u_exaggeration),u_altitudes:new a.c2(B,l.u_altitudes),u_azimuths:new a.c2(B,l.u_azimuths),u_accent:new a.bU(B,l.u_accent),u_method:new a.bT(B,l.u_method),u_shadows:new a.c1(B,l.u_shadows),u_highlights:new a.c1(B,l.u_highlights)}),hillshadePrepare:(B,l)=>({u_matrix:new a.bV(B,l.u_matrix),u_image:new a.bT(B,l.u_image),u_dimension:new a.bY(B,l.u_dimension),u_zoom:new a.bj(B,l.u_zoom),u_unpack:new a.bW(B,l.u_unpack)}),colorRelief:(B,l)=>({u_image:new a.bT(B,l.u_image),u_unpack:new a.bW(B,l.u_unpack),u_dimension:new a.bY(B,l.u_dimension),u_elevation_stops:new a.bT(B,l.u_elevation_stops),u_color_stops:new a.bT(B,l.u_color_stops),u_color_ramp_size:new a.bT(B,l.u_color_ramp_size),u_opacity:new a.bj(B,l.u_opacity)}),line:(B,l)=>({u_translation:new a.bY(B,l.u_translation),u_ratio:new a.bj(B,l.u_ratio),u_device_pixel_ratio:new a.bj(B,l.u_device_pixel_ratio),u_units_to_pixels:new a.bY(B,l.u_units_to_pixels)}),lineGradient:(B,l)=>({u_translation:new a.bY(B,l.u_translation),u_ratio:new a.bj(B,l.u_ratio),u_device_pixel_ratio:new a.bj(B,l.u_device_pixel_ratio),u_units_to_pixels:new a.bY(B,l.u_units_to_pixels),u_image:new a.bT(B,l.u_image),u_image_height:new a.bj(B,l.u_image_height)}),linePattern:(B,l)=>({u_translation:new a.bY(B,l.u_translation),u_texsize:new a.bY(B,l.u_texsize),u_ratio:new a.bj(B,l.u_ratio),u_device_pixel_ratio:new a.bj(B,l.u_device_pixel_ratio),u_image:new a.bT(B,l.u_image),u_units_to_pixels:new a.bY(B,l.u_units_to_pixels),u_scale:new a.bX(B,l.u_scale),u_fade:new a.bj(B,l.u_fade)}),lineSDF:(B,l)=>({u_translation:new a.bY(B,l.u_translation),u_ratio:new a.bj(B,l.u_ratio),u_device_pixel_ratio:new a.bj(B,l.u_device_pixel_ratio),u_units_to_pixels:new a.bY(B,l.u_units_to_pixels),u_image:new a.bT(B,l.u_image),u_mix:new a.bj(B,l.u_mix),u_tileratio:new a.bj(B,l.u_tileratio),u_crossfade_from:new a.bj(B,l.u_crossfade_from),u_crossfade_to:new a.bj(B,l.u_crossfade_to),u_lineatlas_width:new a.bj(B,l.u_lineatlas_width),u_lineatlas_height:new a.bj(B,l.u_lineatlas_height)}),lineGradientSDF:(B,l)=>({u_translation:new a.bY(B,l.u_translation),u_ratio:new a.bj(B,l.u_ratio),u_device_pixel_ratio:new a.bj(B,l.u_device_pixel_ratio),u_units_to_pixels:new a.bY(B,l.u_units_to_pixels),u_image:new a.bT(B,l.u_image),u_image_height:new a.bj(B,l.u_image_height),u_tileratio:new a.bj(B,l.u_tileratio),u_crossfade_from:new a.bj(B,l.u_crossfade_from),u_crossfade_to:new a.bj(B,l.u_crossfade_to),u_image_dash:new a.bT(B,l.u_image_dash),u_mix:new a.bj(B,l.u_mix),u_lineatlas_width:new a.bj(B,l.u_lineatlas_width),u_lineatlas_height:new a.bj(B,l.u_lineatlas_height)}),raster:(B,l)=>({u_tl_parent:new a.bY(B,l.u_tl_parent),u_scale_parent:new a.bj(B,l.u_scale_parent),u_buffer_scale:new a.bj(B,l.u_buffer_scale),u_fade_t:new a.bj(B,l.u_fade_t),u_opacity:new a.bj(B,l.u_opacity),u_image0:new a.bT(B,l.u_image0),u_image1:new a.bT(B,l.u_image1),u_brightness_low:new a.bj(B,l.u_brightness_low),u_brightness_high:new a.bj(B,l.u_brightness_high),u_saturation_factor:new a.bj(B,l.u_saturation_factor),u_contrast_factor:new a.bj(B,l.u_contrast_factor),u_spin_weights:new a.bX(B,l.u_spin_weights),u_coords_top:new a.bW(B,l.u_coords_top),u_coords_bottom:new a.bW(B,l.u_coords_bottom)}),symbolIcon:(B,l)=>({u_is_size_zoom_constant:new a.bT(B,l.u_is_size_zoom_constant),u_is_size_feature_constant:new a.bT(B,l.u_is_size_feature_constant),u_size_t:new a.bj(B,l.u_size_t),u_size:new a.bj(B,l.u_size),u_camera_to_center_distance:new a.bj(B,l.u_camera_to_center_distance),u_pitch:new a.bj(B,l.u_pitch),u_rotate_symbol:new a.bT(B,l.u_rotate_symbol),u_aspect_ratio:new a.bj(B,l.u_aspect_ratio),u_fade_change:new a.bj(B,l.u_fade_change),u_label_plane_matrix:new a.bV(B,l.u_label_plane_matrix),u_coord_matrix:new a.bV(B,l.u_coord_matrix),u_is_text:new a.bT(B,l.u_is_text),u_pitch_with_map:new a.bT(B,l.u_pitch_with_map),u_is_along_line:new a.bT(B,l.u_is_along_line),u_is_variable_anchor:new a.bT(B,l.u_is_variable_anchor),u_texsize:new a.bY(B,l.u_texsize),u_texture:new a.bT(B,l.u_texture),u_translation:new a.bY(B,l.u_translation),u_pitched_scale:new a.bj(B,l.u_pitched_scale)}),symbolSDF:(B,l)=>({u_is_size_zoom_constant:new a.bT(B,l.u_is_size_zoom_constant),u_is_size_feature_constant:new a.bT(B,l.u_is_size_feature_constant),u_size_t:new a.bj(B,l.u_size_t),u_size:new a.bj(B,l.u_size),u_camera_to_center_distance:new a.bj(B,l.u_camera_to_center_distance),u_pitch:new a.bj(B,l.u_pitch),u_rotate_symbol:new a.bT(B,l.u_rotate_symbol),u_aspect_ratio:new a.bj(B,l.u_aspect_ratio),u_fade_change:new a.bj(B,l.u_fade_change),u_label_plane_matrix:new a.bV(B,l.u_label_plane_matrix),u_coord_matrix:new a.bV(B,l.u_coord_matrix),u_is_text:new a.bT(B,l.u_is_text),u_pitch_with_map:new a.bT(B,l.u_pitch_with_map),u_is_along_line:new a.bT(B,l.u_is_along_line),u_is_variable_anchor:new a.bT(B,l.u_is_variable_anchor),u_texsize:new a.bY(B,l.u_texsize),u_texture:new a.bT(B,l.u_texture),u_gamma_scale:new a.bj(B,l.u_gamma_scale),u_device_pixel_ratio:new a.bj(B,l.u_device_pixel_ratio),u_is_halo:new a.bT(B,l.u_is_halo),u_translation:new a.bY(B,l.u_translation),u_pitched_scale:new a.bj(B,l.u_pitched_scale)}),symbolTextAndIcon:(B,l)=>({u_is_size_zoom_constant:new a.bT(B,l.u_is_size_zoom_constant),u_is_size_feature_constant:new a.bT(B,l.u_is_size_feature_constant),u_size_t:new a.bj(B,l.u_size_t),u_size:new a.bj(B,l.u_size),u_camera_to_center_distance:new a.bj(B,l.u_camera_to_center_distance),u_pitch:new a.bj(B,l.u_pitch),u_rotate_symbol:new a.bT(B,l.u_rotate_symbol),u_aspect_ratio:new a.bj(B,l.u_aspect_ratio),u_fade_change:new a.bj(B,l.u_fade_change),u_label_plane_matrix:new a.bV(B,l.u_label_plane_matrix),u_coord_matrix:new a.bV(B,l.u_coord_matrix),u_is_text:new a.bT(B,l.u_is_text),u_pitch_with_map:new a.bT(B,l.u_pitch_with_map),u_is_along_line:new a.bT(B,l.u_is_along_line),u_is_variable_anchor:new a.bT(B,l.u_is_variable_anchor),u_texsize:new a.bY(B,l.u_texsize),u_texsize_icon:new a.bY(B,l.u_texsize_icon),u_texture:new a.bT(B,l.u_texture),u_texture_icon:new a.bT(B,l.u_texture_icon),u_gamma_scale:new a.bj(B,l.u_gamma_scale),u_device_pixel_ratio:new a.bj(B,l.u_device_pixel_ratio),u_is_halo:new a.bT(B,l.u_is_halo),u_translation:new a.bY(B,l.u_translation),u_pitched_scale:new a.bj(B,l.u_pitched_scale)}),background:(B,l)=>({u_opacity:new a.bj(B,l.u_opacity),u_color:new a.bU(B,l.u_color)}),backgroundPattern:(B,l)=>({u_opacity:new a.bj(B,l.u_opacity),u_image:new a.bT(B,l.u_image),u_pattern_tl_a:new a.bY(B,l.u_pattern_tl_a),u_pattern_br_a:new a.bY(B,l.u_pattern_br_a),u_pattern_tl_b:new a.bY(B,l.u_pattern_tl_b),u_pattern_br_b:new a.bY(B,l.u_pattern_br_b),u_texsize:new a.bY(B,l.u_texsize),u_mix:new a.bj(B,l.u_mix),u_pattern_size_a:new a.bY(B,l.u_pattern_size_a),u_pattern_size_b:new a.bY(B,l.u_pattern_size_b),u_scale_a:new a.bj(B,l.u_scale_a),u_scale_b:new a.bj(B,l.u_scale_b),u_pixel_coord_upper:new a.bY(B,l.u_pixel_coord_upper),u_pixel_coord_lower:new a.bY(B,l.u_pixel_coord_lower),u_tile_units_to_pixels:new a.bj(B,l.u_tile_units_to_pixels)}),terrain:(B,l)=>({u_texture:new a.bT(B,l.u_texture),u_ele_delta:new a.bj(B,l.u_ele_delta),u_fog_matrix:new a.bV(B,l.u_fog_matrix),u_fog_color:new a.bU(B,l.u_fog_color),u_fog_ground_blend:new a.bj(B,l.u_fog_ground_blend),u_fog_ground_blend_opacity:new a.bj(B,l.u_fog_ground_blend_opacity),u_horizon_color:new a.bU(B,l.u_horizon_color),u_horizon_fog_blend:new a.bj(B,l.u_horizon_fog_blend),u_is_globe_mode:new a.bj(B,l.u_is_globe_mode)}),terrainDepth:(B,l)=>({u_ele_delta:new a.bj(B,l.u_ele_delta)}),terrainCoords:(B,l)=>({u_texture:new a.bT(B,l.u_texture),u_terrain_coords_id:new a.bj(B,l.u_terrain_coords_id),u_ele_delta:new a.bj(B,l.u_ele_delta)}),projectionErrorMeasurement:(B,l)=>({u_input:new a.bj(B,l.u_input),u_output_expected:new a.bj(B,l.u_output_expected)}),atmosphere:(B,l)=>({u_sun_pos:new a.bX(B,l.u_sun_pos),u_atmosphere_blend:new a.bj(B,l.u_atmosphere_blend),u_globe_position:new a.bX(B,l.u_globe_position),u_globe_radius:new a.bj(B,l.u_globe_radius),u_inv_proj_matrix:new a.bV(B,l.u_inv_proj_matrix)}),sky:(B,l)=>({u_sky_color:new a.bU(B,l.u_sky_color),u_horizon_color:new a.bU(B,l.u_horizon_color),u_horizon:new a.bY(B,l.u_horizon),u_horizon_normal:new a.bY(B,l.u_horizon_normal),u_sky_horizon_blend:new a.bj(B,l.u_sky_horizon_blend),u_sky_blend:new a.bj(B,l.u_sky_blend)})};class Wh{constructor(l,p,C){this.context=l;const S=l.gl;this.buffer=S.createBuffer(),this.dynamicDraw=!!C,this.context.unbindVAO(),l.bindElementBuffer.set(this.buffer),S.bufferData(S.ELEMENT_ARRAY_BUFFER,p.arrayBuffer,this.dynamicDraw?S.DYNAMIC_DRAW:S.STATIC_DRAW),this.dynamicDraw||delete p.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(l){const p=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),p.bufferSubData(p.ELEMENT_ARRAY_BUFFER,0,l.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Rt={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class ln{constructor(l,p,C,S){this.length=p.length,this.attributes=C,this.itemSize=p.bytesPerElement,this.dynamicDraw=S,this.context=l;const O=l.gl;this.buffer=O.createBuffer(),l.bindVertexBuffer.set(this.buffer),O.bufferData(O.ARRAY_BUFFER,p.arrayBuffer,this.dynamicDraw?O.DYNAMIC_DRAW:O.STATIC_DRAW),this.dynamicDraw||delete p.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(l){if(l.length!==this.length)throw new Error(`Length of new data is ${l.length}, which doesn't match current length of ${this.length}`);const p=this.context.gl;this.bind(),p.bufferSubData(p.ARRAY_BUFFER,0,l.arrayBuffer)}enableAttributes(l,p){for(let C=0;C<this.attributes.length;C++){const S=p.attributes[this.attributes[C].name];S!==void 0&&l.enableVertexAttribArray(S)}}setVertexAttribPointers(l,p,C){for(let S=0;S<this.attributes.length;S++){const O=this.attributes[S],U=p.attributes[O.name];U!==void 0&&l.vertexAttribPointer(U,O.components,l[Rt[O.type]],!1,this.itemSize,O.offset+this.itemSize*(C||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Pt{constructor(l){this.gl=l.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(l){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Ai extends Pt{getDefault(){return a.bi.transparent}set(l){const p=this.current;(l.r!==p.r||l.g!==p.g||l.b!==p.b||l.a!==p.a||this.dirty)&&(this.gl.clearColor(l.r,l.g,l.b,l.a),this.current=l,this.dirty=!1)}}class gr extends Pt{getDefault(){return 1}set(l){(l!==this.current||this.dirty)&&(this.gl.clearDepth(l),this.current=l,this.dirty=!1)}}class Wr extends Pt{getDefault(){return 0}set(l){(l!==this.current||this.dirty)&&(this.gl.clearStencil(l),this.current=l,this.dirty=!1)}}class Os extends Pt{getDefault(){return[!0,!0,!0,!0]}set(l){const p=this.current;(l[0]!==p[0]||l[1]!==p[1]||l[2]!==p[2]||l[3]!==p[3]||this.dirty)&&(this.gl.colorMask(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class Fo extends Pt{getDefault(){return!0}set(l){(l!==this.current||this.dirty)&&(this.gl.depthMask(l),this.current=l,this.dirty=!1)}}class bp extends Pt{getDefault(){return 255}set(l){(l!==this.current||this.dirty)&&(this.gl.stencilMask(l),this.current=l,this.dirty=!1)}}class EA extends Pt{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(l){const p=this.current;(l.func!==p.func||l.ref!==p.ref||l.mask!==p.mask||this.dirty)&&(this.gl.stencilFunc(l.func,l.ref,l.mask),this.current=l,this.dirty=!1)}}class Gl extends Pt{getDefault(){const l=this.gl;return[l.KEEP,l.KEEP,l.KEEP]}set(l){const p=this.current;(l[0]!==p[0]||l[1]!==p[1]||l[2]!==p[2]||this.dirty)&&(this.gl.stencilOp(l[0],l[1],l[2]),this.current=l,this.dirty=!1)}}class Qh extends Pt{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const p=this.gl;l?p.enable(p.STENCIL_TEST):p.disable(p.STENCIL_TEST),this.current=l,this.dirty=!1}}class qm extends Pt{getDefault(){return[0,1]}set(l){const p=this.current;(l[0]!==p[0]||l[1]!==p[1]||this.dirty)&&(this.gl.depthRange(l[0],l[1]),this.current=l,this.dirty=!1)}}class Rc extends Pt{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const p=this.gl;l?p.enable(p.DEPTH_TEST):p.disable(p.DEPTH_TEST),this.current=l,this.dirty=!1}}class Yh extends Pt{getDefault(){return this.gl.LESS}set(l){(l!==this.current||this.dirty)&&(this.gl.depthFunc(l),this.current=l,this.dirty=!1)}}class uh extends Pt{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const p=this.gl;l?p.enable(p.BLEND):p.disable(p.BLEND),this.current=l,this.dirty=!1}}class Br extends Pt{getDefault(){const l=this.gl;return[l.ONE,l.ZERO]}set(l){const p=this.current;(l[0]!==p[0]||l[1]!==p[1]||this.dirty)&&(this.gl.blendFunc(l[0],l[1]),this.current=l,this.dirty=!1)}}class y0 extends Pt{getDefault(){return a.bi.transparent}set(l){const p=this.current;(l.r!==p.r||l.g!==p.g||l.b!==p.b||l.a!==p.a||this.dirty)&&(this.gl.blendColor(l.r,l.g,l.b,l.a),this.current=l,this.dirty=!1)}}class Cp extends Pt{getDefault(){return this.gl.FUNC_ADD}set(l){(l!==this.current||this.dirty)&&(this.gl.blendEquation(l),this.current=l,this.dirty=!1)}}class Wl extends Pt{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const p=this.gl;l?p.enable(p.CULL_FACE):p.disable(p.CULL_FACE),this.current=l,this.dirty=!1}}class BA extends Pt{getDefault(){return this.gl.BACK}set(l){(l!==this.current||this.dirty)&&(this.gl.cullFace(l),this.current=l,this.dirty=!1)}}class au extends Pt{getDefault(){return this.gl.CCW}set(l){(l!==this.current||this.dirty)&&(this.gl.frontFace(l),this.current=l,this.dirty=!1)}}class ch extends Pt{getDefault(){return null}set(l){(l!==this.current||this.dirty)&&(this.gl.useProgram(l),this.current=l,this.dirty=!1)}}class OA extends Pt{getDefault(){return this.gl.TEXTURE0}set(l){(l!==this.current||this.dirty)&&(this.gl.activeTexture(l),this.current=l,this.dirty=!1)}}class Pu extends Pt{getDefault(){const l=this.gl;return[0,0,l.drawingBufferWidth,l.drawingBufferHeight]}set(l){const p=this.current;(l[0]!==p[0]||l[1]!==p[1]||l[2]!==p[2]||l[3]!==p[3]||this.dirty)&&(this.gl.viewport(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class qh extends Pt{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const p=this.gl;p.bindFramebuffer(p.FRAMEBUFFER,l),this.current=l,this.dirty=!1}}class Ah extends Pt{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const p=this.gl;p.bindRenderbuffer(p.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class lu extends Pt{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const p=this.gl;p.bindTexture(p.TEXTURE_2D,l),this.current=l,this.dirty=!1}}class Vm extends Pt{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const p=this.gl;p.bindBuffer(p.ARRAY_BUFFER,l),this.current=l,this.dirty=!1}}class kd extends Pt{getDefault(){return null}set(l){const p=this.gl;p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,l),this.current=l,this.dirty=!1}}class sr extends Pt{getDefault(){return null}set(l){var p;if(l===this.current&&!this.dirty)return;const C=this.gl;li(C)?C.bindVertexArray(l):(p=C.getExtension("OES_vertex_array_object"))===null||p===void 0||p.bindVertexArrayOES(l),this.current=l,this.dirty=!1}}class _p extends Pt{getDefault(){return 4}set(l){if(l===this.current&&!this.dirty)return;const p=this.gl;p.pixelStorei(p.UNPACK_ALIGNMENT,l),this.current=l,this.dirty=!1}}class El extends Pt{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const p=this.gl;p.pixelStorei(p.UNPACK_PREMULTIPLY_ALPHA_WEBGL,l),this.current=l,this.dirty=!1}}class IA extends Pt{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const p=this.gl;p.pixelStorei(p.UNPACK_FLIP_Y_WEBGL,l),this.current=l,this.dirty=!1}}class ol extends Pt{constructor(l,p){super(l),this.context=l,this.parent=p}getDefault(){return null}}class I1 extends ol{setDirty(){this.dirty=!0}set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const p=this.gl;p.framebufferTexture2D(p.FRAMEBUFFER,p.COLOR_ATTACHMENT0,p.TEXTURE_2D,l,0),this.current=l,this.dirty=!1}}class $m extends ol{set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const p=this.gl;p.framebufferRenderbuffer(p.FRAMEBUFFER,p.DEPTH_ATTACHMENT,p.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class Vh extends ol{set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const p=this.gl;p.framebufferRenderbuffer(p.FRAMEBUFFER,p.DEPTH_STENCIL_ATTACHMENT,p.RENDERBUFFER,l),this.current=l,this.dirty=!1}}const Td="Framebuffer is not complete";class Rd{constructor(l,p,C,S,O){this.context=l,this.width=p,this.height=C;const U=l.gl,N=this.framebuffer=U.createFramebuffer();if(this.colorAttachment=new I1(l,N),S)this.depthAttachment=O?new Vh(l,N):new $m(l,N);else if(O)throw new Error("Stencil cannot be set without depth");if(U.checkFramebufferStatus(U.FRAMEBUFFER)!==U.FRAMEBUFFER_COMPLETE)throw new Error(Td)}destroy(){const l=this.context.gl,p=this.colorAttachment.get();if(p&&l.deleteTexture(p),this.depthAttachment){const C=this.depthAttachment.get();C&&l.deleteRenderbuffer(C)}l.deleteFramebuffer(this.framebuffer)}}class $h{constructor(l){var p,C;if(this.gl=l,this.clearColor=new Ai(this),this.clearDepth=new gr(this),this.clearStencil=new Wr(this),this.colorMask=new Os(this),this.depthMask=new Fo(this),this.stencilMask=new bp(this),this.stencilFunc=new EA(this),this.stencilOp=new Gl(this),this.stencilTest=new Qh(this),this.depthRange=new qm(this),this.depthTest=new Rc(this),this.depthFunc=new Yh(this),this.blend=new uh(this),this.blendFunc=new Br(this),this.blendColor=new y0(this),this.blendEquation=new Cp(this),this.cullFace=new Wl(this),this.cullFaceSide=new BA(this),this.frontFace=new au(this),this.program=new ch(this),this.activeTexture=new OA(this),this.viewport=new Pu(this),this.bindFramebuffer=new qh(this),this.bindRenderbuffer=new Ah(this),this.bindTexture=new lu(this),this.bindVertexBuffer=new Vm(this),this.bindElementBuffer=new kd(this),this.bindVertexArray=new sr(this),this.pixelStoreUnpack=new _p(this),this.pixelStoreUnpackPremultiplyAlpha=new El(this),this.pixelStoreUnpackFlipY=new IA(this),this.extTextureFilterAnisotropic=l.getExtension("EXT_texture_filter_anisotropic")||l.getExtension("MOZ_EXT_texture_filter_anisotropic")||l.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=l.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=l.getParameter(l.MAX_TEXTURE_SIZE),li(l)){this.HALF_FLOAT=l.HALF_FLOAT;const S=l.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(p=l.RGBA16F)!==null&&p!==void 0?p:S?.RGBA16F_EXT,this.RGB16F=(C=l.RGB16F)!==null&&C!==void 0?C:S?.RGB16F_EXT,l.getExtension("EXT_color_buffer_float")}else{l.getExtension("EXT_color_buffer_half_float"),l.getExtension("OES_texture_half_float_linear");const S=l.getExtension("OES_texture_half_float");this.HALF_FLOAT=S?.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(l,p){return new Wh(this,l,p)}createVertexBuffer(l,p,C){return new ln(this,l,p,C)}createRenderbuffer(l,p,C){const S=this.gl,O=S.createRenderbuffer();return this.bindRenderbuffer.set(O),S.renderbufferStorage(S.RENDERBUFFER,l,p,C),this.bindRenderbuffer.set(null),O}createFramebuffer(l,p,C,S){return new Rd(this,l,p,C,S)}clear({color:l,depth:p,stencil:C}){const S=this.gl;let O=0;l&&(O|=S.COLOR_BUFFER_BIT,this.clearColor.set(l),this.colorMask.set([!0,!0,!0,!0])),p!==void 0&&(O|=S.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(p),this.depthMask.set(!0)),C!==void 0&&(O|=S.STENCIL_BUFFER_BIT,this.clearStencil.set(C),this.stencilMask.set(255)),S.clear(O)}setCullFace(l){l.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(l.mode),this.frontFace.set(l.frontFace))}setDepthMode(l){l.func!==this.gl.ALWAYS||l.mask?(this.depthTest.set(!0),this.depthFunc.set(l.func),this.depthMask.set(l.mask),this.depthRange.set(l.range)):this.depthTest.set(!1)}setStencilMode(l){l.test.func!==this.gl.ALWAYS||l.mask?(this.stencilTest.set(!0),this.stencilMask.set(l.mask),this.stencilOp.set([l.fail,l.depthFail,l.pass]),this.stencilFunc.set({func:l.test.func,ref:l.ref,mask:l.test.mask})):this.stencilTest.set(!1)}setColorMode(l){a.bK(l.blendFunction,Ne.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(l.blendFunction),this.blendColor.set(l.blendColor)),this.colorMask.set(l.mask)}createVertexArray(){var l;return li(this.gl)?this.gl.createVertexArray():(l=this.gl.getExtension("OES_vertex_array_object"))===null||l===void 0?void 0:l.createVertexArrayOES()}deleteVertexArray(l){var p;return li(this.gl)?this.gl.deleteVertexArray(l):(p=this.gl.getExtension("OES_vertex_array_object"))===null||p===void 0?void 0:p.deleteVertexArrayOES(l)}unbindVAO(){this.bindVertexArray.set(null)}}let Hh;function Bl(B,l,p,C,S){const O=B.context,U=B.transform,N=O.gl,Y=B.useProgram("collisionBox"),re=[];let ae=0,ge=0;for(let et=0;et<C.length;et++){const rt=C[et],lt=l.getTile(rt).getBucket(p);if(!lt)continue;const nt=S?lt.textCollisionBox:lt.iconCollisionBox,ht=lt.collisionCircleArray;ht.length>0&&(re.push({circleArray:ht,circleOffset:ge,coord:rt}),ae+=ht.length/4,ge=ae),nt&&Y.draw(O,N.LINES,nn.disabled,Gn.disabled,B.colorModeForRenderPass(),fn.disabled,Fm(B.transform),B.style.map.terrain&&B.style.map.terrain.getTerrainData(rt),U.getProjectionData({overscaledTileID:rt,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),p.id,nt.layoutVertexBuffer,nt.indexBuffer,nt.segments,null,B.transform.zoom,null,null,nt.collisionVertexBuffer)}if(!S||!re.length)return;const pe=B.useProgram("collisionCircle"),we=new a.c3;we.resize(4*ae),we._trim();let Fe=0;for(const et of re)for(let rt=0;rt<et.circleArray.length/4;rt++){const lt=4*rt,nt=et.circleArray[lt+0],ht=et.circleArray[lt+1],bt=et.circleArray[lt+2],st=et.circleArray[lt+3];we.emplace(Fe++,nt,ht,bt,st,0),we.emplace(Fe++,nt,ht,bt,st,1),we.emplace(Fe++,nt,ht,bt,st,2),we.emplace(Fe++,nt,ht,bt,st,3)}(!Hh||Hh.length<2*ae)&&(Hh=(function(et){const rt=2*et,lt=new a.c5;lt.resize(rt),lt._trim();for(let nt=0;nt<rt;nt++){const ht=6*nt;lt.uint16[ht+0]=4*nt+0,lt.uint16[ht+1]=4*nt+1,lt.uint16[ht+2]=4*nt+2,lt.uint16[ht+3]=4*nt+2,lt.uint16[ht+4]=4*nt+3,lt.uint16[ht+5]=4*nt+0}return lt})(ae));const He=O.createIndexBuffer(Hh,!0),Ze=O.createVertexBuffer(we,a.c4.members,!0);for(const et of re){const rt=gp(B.transform);pe.draw(O,N.TRIANGLES,nn.disabled,Gn.disabled,B.colorModeForRenderPass(),fn.disabled,rt,B.style.map.terrain&&B.style.map.terrain.getTerrainData(et.coord),null,p.id,Ze,He,a.aQ.simpleSegment(0,2*et.circleOffset,et.circleArray.length,et.circleArray.length/2),null,B.transform.zoom,null,null,null)}Ze.destroy(),He.destroy()}const Zh=a.am(new Float32Array(16));function Dd(B,l,p,C,S,O){const{horizontalAlign:U,verticalAlign:N}=a.aL(B);return new a.P((-(U-.5)*l/S+C[0])*O,(-(N-.5)*p/S+C[1])*O)}function Is(B,l,p,C,S,O){const U=l.tileAnchorPoint.add(new a.P(l.translation[0],l.translation[1]));if(l.pitchWithMap){let N=C.mult(O);p||(N=N.rotate(-S));const Y=U.add(N);return pn(Y.x,Y.y,l.pitchedLabelPlaneMatrix,l.getElevation).point}if(p){const N=Ls(l.tileAnchorPoint.x+1,l.tileAnchorPoint.y,l).point.sub(B),Y=Math.atan(N.y/N.x)+(N.x<0?Math.PI:0);return B.add(C.rotate(Y))}return B.add(C)}function Vs(B,l,p,C,S,O,U,N,Y,re,ae,ge){const pe=B.text.placedSymbolArray,we=B.text.dynamicLayoutVertexArray,Fe=B.icon.dynamicLayoutVertexArray,He={};we.clear();for(let Ze=0;Ze<pe.length;Ze++){const et=pe.get(Ze),rt=et.hidden||!et.crossTileID||B.allowVerticalPlacement&&!et.placedOrientation?null:C[et.crossTileID];if(rt){const lt=new a.P(et.anchorX,et.anchorY),nt={getElevation:ge,width:S.width,height:S.height,pitchedLabelPlaneMatrix:O,pitchWithMap:p,transform:S,tileAnchorPoint:lt,translation:re,unwrappedTileID:ae},ht=p?Ya(lt.x,lt.y,nt):Ls(lt.x,lt.y,nt),bt=zi(S.cameraToCenterDistance,ht.signedDistanceFromCamera);let st=a.at(B.textSizeData,N,et)*bt/a.aF;p&&(st*=B.tilePixelRatio/U);const{width:wt,height:Yt,anchor:jt,textOffset:Nt,textBoxScale:qt}=rt,gn=Dd(jt,wt,Yt,Nt,qt,st),In=S.getPitchedTextCorrection(lt.x+re[0],lt.y+re[1],ae),sn=Is(ht.point,nt,l,gn,-S.bearingInRadians,In),ti=B.allowVerticalPlacement&&et.placedOrientation===a.as.vertical?Math.PI/2:0;for(let nr=0;nr<et.numGlyphs;nr++)a.az(we,sn,ti);Y&&et.associatedIconIndex>=0&&(He[et.associatedIconIndex]={shiftedAnchor:sn,angle:ti})}else fa(et.numGlyphs,we)}if(Y){Fe.clear();const Ze=B.icon.placedSymbolArray;for(let et=0;et<Ze.length;et++){const rt=Ze.get(et);if(rt.hidden)fa(rt.numGlyphs,Fe);else{const lt=He[et];if(lt)for(let nt=0;nt<rt.numGlyphs;nt++)a.az(Fe,lt.shiftedAnchor,lt.angle);else fa(rt.numGlyphs,Fe)}}B.icon.dynamicLayoutVertexBuffer.updateData(Fe)}B.text.dynamicLayoutVertexBuffer.updateData(we)}function uu(B,l,p){return p.iconsInText&&l?"symbolTextAndIcon":B?"symbolSDF":"symbolIcon"}function sl(B,l,p,C,S,O,U,N,Y,re,ae,ge,pe){const we=B.context,Fe=we.gl,He=B.transform,Ze=N==="map",et=Y==="map",rt=N!=="viewport"&&p.layout.get("symbol-placement")!=="point",lt=Ze&&!et&&!rt,nt=!p.layout.get("symbol-sort-key").isConstant();let ht=!1;const bt=B.getDepthModeForSublayer(0,nn.ReadOnly),st=p._unevaluatedLayout.hasValue("text-variable-anchor")||p._unevaluatedLayout.hasValue("text-variable-anchor-offset"),wt=[],Yt=He.getCircleRadiusCorrection();for(const jt of C){const Nt=l.getTile(jt),qt=Nt.getBucket(p);if(!qt)continue;const gn=S?qt.text:qt.icon;if(!gn||!gn.segments.get().length||!gn.hasVisibleVertices)continue;const In=gn.programConfigurations.get(p.id),sn=S||qt.sdfIcons,ti=S?qt.textSizeData:qt.iconSizeData,nr=et||He.pitch!==0,ro=B.useProgram(uu(sn,S,qt),In),yr=a.ar(ti,He.zoom),jo=B.style.map.terrain&&B.style.map.terrain.getTerrainData(jt);let ks,No,aa,vs,va=[0,0],as=null;if(S)No=Nt.glyphAtlasTexture,aa=Fe.LINEAR,ks=Nt.glyphAtlasTexture.size,qt.iconsInText&&(va=Nt.imageAtlasTexture.size,as=Nt.imageAtlasTexture,vs=nr||B.options.rotating||B.options.zooming||ti.kind==="composite"||ti.kind==="camera"?Fe.LINEAR:Fe.NEAREST);else{const Hs=p.layout.get("icon-size").constantOr(0)!==1||qt.iconsNeedLinear;No=Nt.imageAtlasTexture,aa=sn||B.options.rotating||B.options.zooming||Hs||nr?Fe.LINEAR:Fe.NEAREST,ks=Nt.imageAtlasTexture.size}const oo=a.aG(Nt,1,B.transform.zoom),bs=$o(Ze,B.transform,oo),id=a.M();a.au(id,bs);const NA=Ws(et,Ze,B.transform,oo),mc=a.aH(He,Nt,O,U),zu=He.getProjectionData({overscaledTileID:jt,applyGlobeMatrix:!pe,applyTerrainMatrix:!0}),rd=st&&qt.hasTextData(),bh=p.layout.get("icon-text-fit")!=="none"&&rd&&qt.hasIconData();if(rt){const Hs=B.style.map.terrain?(Zs,Ro)=>B.style.map.terrain.getElevation(jt,Zs,Ro):null,ls=p.layout.get("text-rotation-alignment")==="map";wl(qt,B,S,bs,id,et,re,ls,jt.toUnwrapped(),He.width,He.height,mc,Hs)}const Vl=S&&st||bh,kl=rt||Vl?Zh:et?bs:B.transform.clipSpaceToPixelsMatrix,fu=sn&&p.paint.get(S?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Gc;Gc=sn?qt.iconsInText?SA(ti.kind,yr,lt,et,rt,Vl,B,kl,NA,mc,ks,va,Yt):wA(ti.kind,yr,lt,et,rt,Vl,B,kl,NA,mc,S,ks,0,Yt):Bs(ti.kind,yr,lt,et,rt,Vl,B,kl,NA,mc,S,ks,Yt);const Tp={program:ro,buffers:gn,uniformValues:Gc,projectionData:zu,atlasTexture:No,atlasTextureIcon:as,atlasInterpolation:aa,atlasInterpolationIcon:vs,isSDF:sn,hasHalo:fu};if(nt&&qt.canOverlap){ht=!0;const Hs=gn.segments.get();for(const ls of Hs)wt.push({segments:new a.aQ([ls]),sortKey:ls.sortKey,state:Tp,terrainData:jo})}else wt.push({segments:gn.segments,sortKey:0,state:Tp,terrainData:jo})}ht&&wt.sort(((jt,Nt)=>jt.sortKey-Nt.sortKey));for(const jt of wt){const Nt=jt.state;if(we.activeTexture.set(Fe.TEXTURE0),Nt.atlasTexture.bind(Nt.atlasInterpolation,Fe.CLAMP_TO_EDGE),Nt.atlasTextureIcon&&(we.activeTexture.set(Fe.TEXTURE1),Nt.atlasTextureIcon&&Nt.atlasTextureIcon.bind(Nt.atlasInterpolationIcon,Fe.CLAMP_TO_EDGE)),Nt.isSDF){const qt=Nt.uniformValues;Nt.hasHalo&&(qt.u_is_halo=1,Dc(Nt.buffers,jt.segments,p,B,Nt.program,bt,ae,ge,qt,Nt.projectionData,jt.terrainData)),qt.u_is_halo=0}Dc(Nt.buffers,jt.segments,p,B,Nt.program,bt,ae,ge,Nt.uniformValues,Nt.projectionData,jt.terrainData)}}function Dc(B,l,p,C,S,O,U,N,Y,re,ae){const ge=C.context;S.draw(ge,ge.gl.TRIANGLES,O,U,N,fn.backCCW,Y,ae,re,p.id,B.layoutVertexBuffer,B.indexBuffer,l,p.paint,C.transform.zoom,B.programConfigurations.get(p.id),B.dynamicLayoutVertexBuffer,B.opacityVertexBuffer)}function kA(B,l,p,C,S){const O=B.context,U=O.gl,N=Gn.disabled,Y=new Ne([U.ONE,U.ONE],a.bi.transparent,[!0,!0,!0,!0]),re=l.getBucket(p);if(!re)return;const ae=C.key;let ge=p.heatmapFbos.get(ae);ge||(ge=Uu(O,l.tileSize,l.tileSize),p.heatmapFbos.set(ae,ge)),O.bindFramebuffer.set(ge.framebuffer),O.viewport.set([0,0,l.tileSize,l.tileSize]),O.clear({color:a.bi.transparent});const pe=re.programConfigurations.get(p.id),we=B.useProgram("heatmap",pe,!S),Fe=B.transform.getProjectionData({overscaledTileID:l.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),He=B.style.map.terrain.getTerrainData(C);we.draw(O,U.TRIANGLES,nn.disabled,N,Y,fn.disabled,Id(l,B.transform.zoom,p.paint.get("heatmap-intensity"),1),He,Fe,p.id,re.layoutVertexBuffer,re.indexBuffer,re.segments,p.paint,B.transform.zoom,pe)}function Ql(B,l,p,C,S){const O=B.context,U=O.gl,N=B.transform;O.setColorMode(B.colorModeForRenderPass());const Y=wf(O,l),re=p.key,ae=l.heatmapFbos.get(re);if(!ae)return;O.activeTexture.set(U.TEXTURE0),U.bindTexture(U.TEXTURE_2D,ae.colorAttachment.get()),O.activeTexture.set(U.TEXTURE1),Y.bind(U.LINEAR,U.CLAMP_TO_EDGE);const ge=N.getProjectionData({overscaledTileID:p,applyTerrainMatrix:S,applyGlobeMatrix:!C});B.useProgram("heatmapTexture").draw(O,U.TRIANGLES,nn.disabled,Gn.disabled,B.colorModeForRenderPass(),fn.disabled,m0(B,l,0,1),null,ge,l.id,B.rasterBoundsBuffer,B.quadTriangleIndexBuffer,B.rasterBoundsSegments,l.paint,N.zoom),ae.destroy(),l.heatmapFbos.delete(re)}function Uu(B,l,p){var C,S;const O=B.gl,U=O.createTexture();O.bindTexture(O.TEXTURE_2D,U),O.texParameteri(O.TEXTURE_2D,O.TEXTURE_WRAP_S,O.CLAMP_TO_EDGE),O.texParameteri(O.TEXTURE_2D,O.TEXTURE_WRAP_T,O.CLAMP_TO_EDGE),O.texParameteri(O.TEXTURE_2D,O.TEXTURE_MIN_FILTER,O.LINEAR),O.texParameteri(O.TEXTURE_2D,O.TEXTURE_MAG_FILTER,O.LINEAR);const N=(C=B.HALF_FLOAT)!==null&&C!==void 0?C:O.UNSIGNED_BYTE,Y=(S=B.RGBA16F)!==null&&S!==void 0?S:O.RGBA;O.texImage2D(O.TEXTURE_2D,0,Y,l,p,0,O.RGBA,N,null);const re=B.createFramebuffer(l,p,!1,!1);return re.colorAttachment.set(U),re}function wf(B,l){return l.colorRampTexture||(l.colorRampTexture=new a.T(B,l.colorRamp,B.gl.RGBA)),l.colorRampTexture}function Pc(B,l,p,C,S,O,U,N){let Y=256;if(S.stepInterpolant){const re=l.getSource().maxzoom,ae=U.canonical.z===re?Math.ceil(1<<B.transform.maxZoom-U.canonical.z):1;Y=a.ai(a.c7(O.maxLineLength/a.a3*1024*ae),256,p.maxTextureSize)}return N.gradient=a.c8({expression:S.gradientExpression(),evaluationKey:"lineProgress",resolution:Y,image:N.gradient||void 0,clips:O.lineClipsArray}),N.texture?N.texture.update(N.gradient):N.texture=new a.T(p,N.gradient,C.RGBA),N.version=S.gradientVersion,N.texture}function hh(B,l,p,C,S){B.activeTexture.set(l.TEXTURE0),p.imageAtlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE),C.updatePaintBuffers(S)}function Pd(B,l,p,C,S,O){(S||B.lineAtlas.dirty)&&(l.activeTexture.set(p.TEXTURE0),B.lineAtlas.bind(l)),C.updatePaintBuffers(O)}function ma(B,l,p,C,S,O,U){const N=O.gradients[S.id];let Y=N.texture;S.gradientVersion!==N.version&&(Y=Pc(B,l,p,C,S,O,U,N)),p.activeTexture.set(C.TEXTURE0),Y.bind(S.stepInterpolant?C.NEAREST:C.LINEAR,C.CLAMP_TO_EDGE)}function bo(B,l,p,C,S,O,U,N,Y){const re=O.gradients[S.id];let ae=re.texture;S.gradientVersion!==re.version&&(ae=Pc(B,l,p,C,S,O,U,re)),p.activeTexture.set(C.TEXTURE0),ae.bind(S.stepInterpolant?C.NEAREST:C.LINEAR,C.CLAMP_TO_EDGE),p.activeTexture.set(C.TEXTURE1),B.lineAtlas.bind(p),N.updatePaintBuffers(Y)}function zr(B,l,p,C,S){if(!p||!C||!C.imageAtlas)return;const O=C.imageAtlas.patternPositions;let U=O[p.to.toString()],N=O[p.from.toString()];if(!U&&N&&(U=N),!N&&U&&(N=U),!U||!N){const Y=S.getPaintProperty(l);U=O[Y],N=O[Y]}U&&N&&B.setConstantPatternPositions(U,N)}function dh(B,l,p,C,S,O,U,N){const Y=B.context.gl,re="fill-pattern",ae=p.paint.get(re),ge=ae&&ae.constantOr(1),pe=p.getCrossfadeParameters();let we,Fe,He,Ze,et;const rt=B.transform,lt=p.paint.get("fill-translate"),nt=p.paint.get("fill-translate-anchor");U?(Fe=ge&&!p.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",we=Y.LINES):(Fe=ge?"fillPattern":"fill",we=Y.TRIANGLES);const ht=ae.constantOr(null);for(const bt of C){const st=l.getTile(bt);if(ge&&!st.patternsLoaded())continue;const wt=st.getBucket(p);if(!wt)continue;const Yt=wt.programConfigurations.get(p.id),jt=B.useProgram(Fe,Yt),Nt=B.style.map.terrain&&B.style.map.terrain.getTerrainData(bt);ge&&(B.context.activeTexture.set(Y.TEXTURE0),st.imageAtlasTexture.bind(Y.LINEAR,Y.CLAMP_TO_EDGE),Yt.updatePaintBuffers(pe)),zr(Yt,re,ht,st,p);const qt=rt.getProjectionData({overscaledTileID:bt,applyGlobeMatrix:!N,applyTerrainMatrix:!0}),gn=a.aH(rt,st,lt,nt);if(U){Ze=wt.indexBuffer2,et=wt.segments2;const sn=[Y.drawingBufferWidth,Y.drawingBufferHeight];He=Fe==="fillOutlinePattern"&&ge?Lm(B,pe,st,sn,gn):ac(sn,gn)}else Ze=wt.indexBuffer,et=wt.segments,He=ge?sc(B,pe,st,gn):{u_fill_translate:gn};const In=B.stencilModeForClipping(bt);jt.draw(B.context,we,S,In,O,fn.backCCW,He,Nt,qt,p.id,wt.layoutVertexBuffer,Ze,et,p.paint,B.transform.zoom,Yt)}}function cu(B,l,p,C,S,O,U,N){const Y=B.context,re=Y.gl,ae="fill-extrusion-pattern",ge=p.paint.get(ae),pe=ge.constantOr(1),we=p.getCrossfadeParameters(),Fe=p.paint.get("fill-extrusion-opacity"),He=ge.constantOr(null),Ze=B.transform;for(const et of C){const rt=l.getTile(et),lt=rt.getBucket(p);if(!lt)continue;const nt=B.style.map.terrain&&B.style.map.terrain.getTerrainData(et),ht=lt.programConfigurations.get(p.id),bt=B.useProgram(pe?"fillExtrusionPattern":"fillExtrusion",ht);pe&&(B.context.activeTexture.set(re.TEXTURE0),rt.imageAtlasTexture.bind(re.LINEAR,re.CLAMP_TO_EDGE),ht.updatePaintBuffers(we));const st=Ze.getProjectionData({overscaledTileID:et,applyGlobeMatrix:!N,applyTerrainMatrix:!0});zr(ht,ae,He,rt,p);const wt=a.aH(Ze,rt,p.paint.get("fill-extrusion-translate"),p.paint.get("fill-extrusion-translate-anchor")),Yt=p.paint.get("fill-extrusion-vertical-gradient"),jt=pe?B1(B,Yt,Fe,wt,et,we,rt):zh(B,Yt,Fe,wt);bt.draw(Y,Y.gl.TRIANGLES,S,O,U,fn.backCCW,jt,nt,st,p.id,lt.layoutVertexBuffer,lt.indexBuffer,lt.segments,p.paint,B.transform.zoom,ht,B.style.map.terrain&&lt.centroidVertexBuffer)}}function gs(B,l,p,C,S,O,U,N,Y){var re;const ae=B.style.projection,ge=B.context,pe=B.transform,we=ge.gl,Fe=[`#define NUM_ILLUMINATION_SOURCES ${p.paint.get("hillshade-highlight-color").values.length}`],He=B.useProgram("hillshade",null,!1,Fe),Ze=!B.options.moving;for(const et of C){const rt=l.getTile(et),lt=rt.fbo;if(!lt)continue;const nt=ae.getMeshFromTileID(ge,et.canonical,N,!0,"raster"),ht=(re=B.style.map.terrain)===null||re===void 0?void 0:re.getTerrainData(et);ge.activeTexture.set(we.TEXTURE0),we.bindTexture(we.TEXTURE_2D,lt.colorAttachment.get());const bt=pe.getProjectionData({overscaledTileID:et,aligned:Ze,applyGlobeMatrix:!Y,applyTerrainMatrix:!0});He.draw(ge,we.TRIANGLES,O,S[et.overscaledZ],U,fn.backCCW,yp(B,rt,p),ht,bt,p.id,nt.vertexBuffer,nt.indexBuffer,nt.segments)}}function Yl(B,l,p,C,S,O,U,N,Y){var re;const ae=B.style.projection,ge=B.context,pe=B.transform,we=ge.gl,Fe=B.useProgram("colorRelief"),He=!B.options.moving;let Ze=!0,et=0;for(const rt of C){const lt=l.getTile(rt),nt=lt.dem;if(Ze){const jt=we.getParameter(we.MAX_TEXTURE_SIZE),{elevationTexture:Nt,colorTexture:qt}=p.getColorRampTextures(ge,jt,nt.getUnpackVector());ge.activeTexture.set(we.TEXTURE1),Nt.bind(we.NEAREST,we.CLAMP_TO_EDGE),ge.activeTexture.set(we.TEXTURE4),qt.bind(we.LINEAR,we.CLAMP_TO_EDGE),Ze=!1,et=Nt.size[0]}if(!nt||!nt.data)continue;const ht=nt.stride,bt=nt.getPixels();if(ge.activeTexture.set(we.TEXTURE0),ge.pixelStoreUnpackPremultiplyAlpha.set(!1),lt.demTexture=lt.demTexture||B.getTileTexture(ht),lt.demTexture){const jt=lt.demTexture;jt.update(bt,{premultiply:!1}),jt.bind(we.LINEAR,we.CLAMP_TO_EDGE)}else lt.demTexture=new a.T(ge,bt,we.RGBA,{premultiply:!1}),lt.demTexture.bind(we.LINEAR,we.CLAMP_TO_EDGE);const st=ae.getMeshFromTileID(ge,rt.canonical,N,!0,"raster"),wt=(re=B.style.map.terrain)===null||re===void 0?void 0:re.getTerrainData(rt),Yt=pe.getProjectionData({overscaledTileID:rt,aligned:He,applyGlobeMatrix:!Y,applyTerrainMatrix:!0});Fe.draw(ge,we.TRIANGLES,O,S[rt.overscaledZ],U,fn.backCCW,zm(p,lt.dem,et),wt,Yt,p.id,st.vertexBuffer,st.indexBuffer,st.segments)}}const al=[new a.P(0,0),new a.P(a.a3,0),new a.P(a.a3,a.a3),new a.P(0,a.a3)];function sA(B,l,p,C,S,O,U,N,Y=!1,re=!1){const ae=C[C.length-1].overscaledZ,ge=B.context,pe=ge.gl,we=B.useProgram("raster"),Fe=B.transform,He=B.style.projection,Ze=B.colorModeForRenderPass(),et=!B.options.moving,rt=p.paint.get("raster-opacity"),lt=p.paint.get("raster-resampling"),nt=p.paint.get("raster-fade-duration"),ht=!!B.style.map.terrain;for(const bt of C){const st=B.getDepthModeForSublayer(bt.overscaledZ-ae,rt===1?nn.ReadWrite:nn.ReadOnly,pe.LESS),wt=l.getTile(bt),Yt=lt==="nearest"?pe.NEAREST:pe.LINEAR;ge.activeTexture.set(pe.TEXTURE0),wt.texture.bind(Yt,pe.CLAMP_TO_EDGE,pe.LINEAR_MIPMAP_NEAREST),ge.activeTexture.set(pe.TEXTURE1);const{parentTile:jt,parentScaleBy:Nt,parentTopLeft:qt,fadeValues:gn}=TA(wt,l,nt,ht);wt.fadeOpacity=gn.tileOpacity,jt?(jt.fadeOpacity=gn.parentTileOpacity,jt.texture.bind(Yt,pe.CLAMP_TO_EDGE,pe.LINEAR_MIPMAP_NEAREST)):wt.texture.bind(Yt,pe.CLAMP_TO_EDGE,pe.LINEAR_MIPMAP_NEAREST),wt.texture.useMipmap&&ge.extTextureFilterAnisotropic&&B.transform.pitch>20&&pe.texParameterf(pe.TEXTURE_2D,ge.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,ge.extTextureFilterAnisotropicMax);const In=B.style.map.terrain&&B.style.map.terrain.getTerrainData(bt),sn=Fe.getProjectionData({overscaledTileID:bt,aligned:et,applyGlobeMatrix:!re,applyTerrainMatrix:!0}),ti=O1(qt,Nt,gn.fadeMix,p,N),nr=He.getMeshFromTileID(ge,bt.canonical,O,U,"raster");we.draw(ge,pe.TRIANGLES,st,S?S[bt.overscaledZ]:Gn.disabled,Ze,Y?fn.frontCCW:fn.backCCW,ti,In,sn,p.id,nr.vertexBuffer,nr.indexBuffer,nr.segments)}}function TA(B,l,p,C){const S={parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:{tileOpacity:1,parentTileOpacity:1,fadeMix:{opacity:1,mix:0}}};if(p===0||C)return S;if(B.fadingParentID){const O=l.getLoadedTile(B.fadingParentID);if(!O)return S;const U=Math.pow(2,O.tileID.overscaledZ-B.tileID.overscaledZ),N=[B.tileID.canonical.x*U%1,B.tileID.canonical.y*U%1],Y=(function(re,ae,ge){const pe=D(),we=(pe-ae.timeAdded)/ge,Fe=re.fadingDirection===We.Incoming,He=a.ai((pe-re.timeAdded)/ge,0,1),Ze=a.ai(1-we,0,1),et=Fe?He:Ze;return{tileOpacity:et,parentTileOpacity:Fe?Ze:He,fadeMix:{opacity:1,mix:1-et}}})(B,O,p);return{parentTile:O,parentScaleBy:U,parentTopLeft:N,fadeValues:Y}}if(B.selfFading){const O=(function(U,N){const Y=(D()-U.timeAdded)/N,re=a.ai(Y,0,1);return{tileOpacity:re,fadeMix:{opacity:re,mix:0}}})(B,p);return{parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:O}}return S}const Qe=new a.bi(1,0,0,1),lc=new a.bi(0,1,0,1),RA=new a.bi(0,0,1,1),ll=new a.bi(1,0,1,1),br=new a.bi(0,1,1,1);function aA(B,l,p,C){uc(B,0,l+p/2,B.transform.width,p,C)}function DA(B,l,p,C){uc(B,l-p/2,0,p,B.transform.height,C)}function uc(B,l,p,C,S,O){const U=B.context,N=U.gl;N.enable(N.SCISSOR_TEST),N.scissor(l*B.pixelRatio,p*B.pixelRatio,C*B.pixelRatio,S*B.pixelRatio),U.clear({color:O}),N.disable(N.SCISSOR_TEST)}function PA(B,l,p){const C=B.context,S=C.gl,O=B.useProgram("debug"),U=nn.disabled,N=Gn.disabled,Y=B.colorModeForRenderPass(),re="$debug",ae=B.style.map.terrain&&B.style.map.terrain.getTerrainData(p);C.activeTexture.set(S.TEXTURE0);const ge=l.getTileByID(p.key).latestRawTileData,pe=Math.floor((ge&&ge.byteLength||0)/1024),we=l.getTile(p).tileSize,Fe=512/Math.min(we,512)*(p.overscaledZ/B.transform.zoom)*.5;let He=p.canonical.toString();p.overscaledZ!==p.canonical.z&&(He+=` => ${p.overscaledZ}`),(function(et,rt){et.initDebugOverlayCanvas();const lt=et.debugOverlayCanvas,nt=et.context.gl,ht=et.debugOverlayCanvas.getContext("2d");ht.clearRect(0,0,lt.width,lt.height),ht.shadowColor="white",ht.shadowBlur=2,ht.lineWidth=1.5,ht.strokeStyle="white",ht.textBaseline="top",ht.font="bold 36px Open Sans, sans-serif",ht.fillText(rt,5,5),ht.strokeText(rt,5,5),et.debugOverlayTexture.update(lt),et.debugOverlayTexture.bind(nt.LINEAR,nt.CLAMP_TO_EDGE)})(B,`${He} ${pe}kB`);const Ze=B.transform.getProjectionData({overscaledTileID:p,applyGlobeMatrix:!0,applyTerrainMatrix:!0});O.draw(C,S.TRIANGLES,U,N,Ne.alphaBlended,fn.disabled,Od(a.bi.transparent,Fe),null,Ze,re,B.debugBuffer,B.quadTriangleIndexBuffer,B.debugSegments),O.draw(C,S.LINE_STRIP,U,N,Y,fn.disabled,Od(a.bi.red),ae,Ze,re,B.debugBuffer,B.tileBorderIndexBuffer,B.debugSegments)}function xp(B,l,p,C){const{isRenderingGlobe:S}=C,O=B.context,U=O.gl,N=B.transform,Y=B.colorModeForRenderPass(),re=B.getDepthModeFor3D(),ae=B.useProgram("terrain");O.bindFramebuffer.set(null),O.viewport.set([0,0,B.width,B.height]);for(const ge of p){const pe=l.getTerrainMesh(ge.tileID),we=B.renderToTexture.getTexture(ge),Fe=l.getTerrainData(ge.tileID);O.activeTexture.set(U.TEXTURE0),U.bindTexture(U.TEXTURE_2D,we.texture);const He=l.getMeshFrameDelta(N.zoom),Ze=N.calculateFogMatrix(ge.tileID.toUnwrapped()),et=Bd(He,Ze,B.style.sky,N.pitch,S),rt=N.getProjectionData({overscaledTileID:ge.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});ae.draw(O,U.TRIANGLES,re,Gn.disabled,Y,fn.backCCW,et,Fe,rt,"terrain",pe.vertexBuffer,pe.indexBuffer,pe.segments)}}function cc(B,l){if(!l.mesh){const p=new a.aP;p.emplaceBack(-1,-1),p.emplaceBack(1,-1),p.emplaceBack(1,1),p.emplaceBack(-1,1);const C=new a.aR;C.emplaceBack(0,1,2),C.emplaceBack(0,2,3),l.mesh=new Co(B.createVertexBuffer(p,Ia.members),B.createIndexBuffer(C),a.aQ.simpleSegment(0,0,p.length,C.length))}return l.mesh}class Mp{constructor(l,p){this.context=new $h(l),this.transform=p,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:a.am(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=Ji.maxUnderzooming+Ji.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Fl}resize(l,p,C){if(this.width=Math.floor(l*C),this.height=Math.floor(p*C),this.pixelRatio=C,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const S of this.style._order)this.style._layers[S].resize()}setup(){const l=this.context,p=new a.aP;p.emplaceBack(0,0),p.emplaceBack(a.a3,0),p.emplaceBack(0,a.a3),p.emplaceBack(a.a3,a.a3),this.tileExtentBuffer=l.createVertexBuffer(p,Ia.members),this.tileExtentSegments=a.aQ.simpleSegment(0,0,4,2);const C=new a.aP;C.emplaceBack(0,0),C.emplaceBack(a.a3,0),C.emplaceBack(0,a.a3),C.emplaceBack(a.a3,a.a3),this.debugBuffer=l.createVertexBuffer(C,Ia.members),this.debugSegments=a.aQ.simpleSegment(0,0,4,5);const S=new a.ca;S.emplaceBack(0,0,0,0),S.emplaceBack(a.a3,0,a.a3,0),S.emplaceBack(0,a.a3,0,a.a3),S.emplaceBack(a.a3,a.a3,a.a3,a.a3),this.rasterBoundsBuffer=l.createVertexBuffer(S,Km.members),this.rasterBoundsSegments=a.aQ.simpleSegment(0,0,4,2);const O=new a.aP;O.emplaceBack(0,0),O.emplaceBack(a.a3,0),O.emplaceBack(0,a.a3),O.emplaceBack(a.a3,a.a3),this.rasterBoundsBufferPosOnly=l.createVertexBuffer(O,Ia.members),this.rasterBoundsSegmentsPosOnly=a.aQ.simpleSegment(0,0,4,5);const U=new a.aP;U.emplaceBack(0,0),U.emplaceBack(1,0),U.emplaceBack(0,1),U.emplaceBack(1,1),this.viewportBuffer=l.createVertexBuffer(U,Ia.members),this.viewportSegments=a.aQ.simpleSegment(0,0,4,2);const N=new a.cb;N.emplaceBack(0),N.emplaceBack(1),N.emplaceBack(3),N.emplaceBack(2),N.emplaceBack(0),this.tileBorderIndexBuffer=l.createIndexBuffer(N);const Y=new a.aR;Y.emplaceBack(1,0,2),Y.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=l.createIndexBuffer(Y);const re=this.context.gl;this.stencilClearMode=new Gn({func:re.ALWAYS,mask:0},0,255,re.ZERO,re.ZERO,re.ZERO),this.tileExtentMesh=new Co(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const l=this.context,p=l.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const C=a.M();a.c0(C,0,this.width,this.height,0,0,1),a.O(C,C,[p.drawingBufferWidth,p.drawingBufferHeight,0]);const S={mainMatrix:C,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:C};this.useProgram("clippingMask",null,!0).draw(l,p.TRIANGLES,nn.disabled,this.stencilClearMode,Ne.disabled,fn.disabled,null,null,S,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(l,p,C){if(this.currentStencilSource===l.source||!l.isTileClipped()||!p||!p.length)return;this.currentStencilSource=l.source,this.nextStencilID+p.length>256&&this.clearStencil();const S=this.context;S.setColorMode(Ne.disabled),S.setDepthMode(nn.disabled);const O={};for(const U of p)O[U.key]=this.nextStencilID++;this._renderTileMasks(O,p,C,!0),this._renderTileMasks(O,p,C,!1),this._tileClippingMaskIDs=O}_renderTileMasks(l,p,C,S){const O=this.context,U=O.gl,N=this.style.projection,Y=this.transform,re=this.useProgram("clippingMask");for(const ae of p){const ge=l[ae.key],pe=this.style.map.terrain&&this.style.map.terrain.getTerrainData(ae),we=N.getMeshFromTileID(this.context,ae.canonical,S,!0,"stencil"),Fe=Y.getProjectionData({overscaledTileID:ae,applyGlobeMatrix:!C,applyTerrainMatrix:!0});re.draw(O,U.TRIANGLES,nn.disabled,new Gn({func:U.ALWAYS,mask:0},ge,255,U.KEEP,U.KEEP,U.REPLACE),Ne.disabled,C?fn.disabled:fn.backCCW,null,pe,Fe,"$clipping",we.vertexBuffer,we.indexBuffer,we.segments)}}_renderTilesDepthBuffer(){const l=this.context,p=l.gl,C=this.style.projection,S=this.transform,O=this.useProgram("depth"),U=this.getDepthModeFor3D(),N=Zi(S,{tileSize:S.tileSize});for(const Y of N){const re=this.style.map.terrain&&this.style.map.terrain.getTerrainData(Y),ae=C.getMeshFromTileID(this.context,Y.canonical,!0,!0,"raster"),ge=S.getProjectionData({overscaledTileID:Y,applyGlobeMatrix:!0,applyTerrainMatrix:!0});O.draw(l,p.TRIANGLES,U,Gn.disabled,Ne.disabled,fn.backCCW,null,re,ge,"$clipping",ae.vertexBuffer,ae.indexBuffer,ae.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const l=this.nextStencilID++,p=this.context.gl;return new Gn({func:p.NOTEQUAL,mask:255},l,255,p.KEEP,p.KEEP,p.REPLACE)}stencilModeForClipping(l){const p=this.context.gl;return new Gn({func:p.EQUAL,mask:255},this._tileClippingMaskIDs[l.key],0,p.KEEP,p.KEEP,p.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(l){const p=this.context.gl,C=l.sort(((U,N)=>N.overscaledZ-U.overscaledZ)),S=C[C.length-1].overscaledZ,O=C[0].overscaledZ-S+1;if(O>1){this.currentStencilSource=void 0,this.nextStencilID+O>256&&this.clearStencil();const U={};for(let N=0;N<O;N++)U[N+S]=new Gn({func:p.GEQUAL,mask:255},N+this.nextStencilID,255,p.KEEP,p.KEEP,p.REPLACE);return this.nextStencilID+=O,[U,C]}return[{[S]:Gn.disabled},C]}stencilConfigForOverlapTwoPass(l){const p=this.context.gl,C=l.sort(((U,N)=>N.overscaledZ-U.overscaledZ)),S=C[C.length-1].overscaledZ,O=C[0].overscaledZ-S+1;if(this.clearStencil(),O>1){const U={},N={};for(let Y=0;Y<O;Y++)U[Y+S]=new Gn({func:p.GREATER,mask:255},O+1+Y,255,p.KEEP,p.KEEP,p.REPLACE),N[Y+S]=new Gn({func:p.GREATER,mask:255},1+Y,255,p.KEEP,p.KEEP,p.REPLACE);return this.nextStencilID=2*O+1,[U,N,C]}return this.nextStencilID=3,[{[S]:new Gn({func:p.GREATER,mask:255},2,255,p.KEEP,p.KEEP,p.REPLACE)},{[S]:new Gn({func:p.GREATER,mask:255},1,255,p.KEEP,p.KEEP,p.REPLACE)},C]}colorModeForRenderPass(){const l=this.context.gl;return this._showOverdrawInspector?new Ne([l.CONSTANT_COLOR,l.ONE],new a.bi(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Ne.unblended:Ne.alphaBlended}getDepthModeForSublayer(l,p,C){if(!this.opaquePassEnabledForLayer())return nn.disabled;const S=1-((1+this.currentLayer)*this.numSublayers+l)*this.depthEpsilon;return new nn(C||this.context.gl.LEQUAL,p,[S,S])}getDepthModeFor3D(){return new nn(this.context.gl.LEQUAL,nn.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(l,p){var C,S;this.style=l,this.options=p,this.lineAtlas=l.lineAtlas,this.imageManager=l.imageManager,this.glyphManager=l.glyphManager,this.symbolFadeChange=l.placement.symbolFadeChange(D()),this.imageManager.beginFrame();const O=this.style._order,U=this.style.tileManagers,N={},Y={},re={},ae={isRenderingToTexture:!1,isRenderingGlobe:((C=l.projection)===null||C===void 0?void 0:C.transitionState)>0};for(const pe in U){const we=U[pe];we.used&&we.prepare(this.context),N[pe]=we.getVisibleCoordinates(!1),Y[pe]=N[pe].slice().reverse(),re[pe]=we.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let pe=0;pe<O.length;pe++)if(this.style._layers[O[pe]].is3D()){this.opaquePassCutoff=pe;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const pe of O){const we=this.style._layers[pe];if(!we.hasOffscreenPass()||we.isHidden(this.transform.zoom))continue;const Fe=Y[we.source];(we.type==="custom"||Fe.length)&&this.renderLayer(this,U[we.source],we,Fe,ae)}if((S=this.style.projection)===null||S===void 0||S.updateGPUdependent({context:this.context,useProgram:pe=>this.useProgram(pe)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:p.showOverdrawInspector?a.bi.black:a.bi.transparent,depth:1}),this.clearStencil(),this.style.sky&&(function(pe,we){const Fe=pe.context,He=Fe.gl,Ze=((bt,st,wt)=>{const Yt=Math.cos(st.rollInRadians),jt=Math.sin(st.rollInRadians),Nt=xt(st),qt=st.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:bt.properties.get("sky-color"),u_horizon_color:bt.properties.get("horizon-color"),u_horizon:[(st.width/2-Nt*jt)*wt,(st.height/2+Nt*Yt)*wt],u_horizon_normal:[-jt,Yt],u_sky_horizon_blend:bt.properties.get("sky-horizon-blend")*st.height/2*wt,u_sky_blend:qt}})(we,pe.style.map.transform,pe.pixelRatio),et=new nn(He.LEQUAL,nn.ReadWrite,[0,1]),rt=Gn.disabled,lt=pe.colorModeForRenderPass(),nt=pe.useProgram("sky"),ht=cc(Fe,we);nt.draw(Fe,He.TRIANGLES,et,rt,lt,fn.disabled,Ze,null,void 0,"sky",ht.vertexBuffer,ht.indexBuffer,ht.segments)})(this,this.style.sky),this._showOverdrawInspector=p.showOverdrawInspector,this.depthRangeFor3D=[0,1-(l._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=O.length-1;this.currentLayer>=0;this.currentLayer--){const pe=this.style._layers[O[this.currentLayer]],we=U[pe.source],Fe=N[pe.source];this._renderTileClippingMasks(pe,Fe,!1),this.renderLayer(this,we,pe,Fe,ae)}this.renderPass="translucent";let ge=!1;for(this.currentLayer=0;this.currentLayer<O.length;this.currentLayer++){const pe=this.style._layers[O[this.currentLayer]],we=U[pe.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(pe,ae))continue;this.opaquePassEnabledForLayer()||ge||(ge=!0,ae.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const Fe=(pe.type==="symbol"?re:Y)[pe.source];this._renderTileClippingMasks(pe,N[pe.source],!!this.renderToTexture),this.renderLayer(this,we,pe,Fe,ae)}if(ae.isRenderingGlobe&&(function(pe,we,Fe){const He=pe.context,Ze=He.gl,et=pe.useProgram("atmosphere"),rt=new nn(Ze.LEQUAL,nn.ReadOnly,[0,1]),lt=pe.transform,nt=(function(qt,gn){const In=qt.properties.get("position"),sn=[-In.x,-In.y,-In.z],ti=a.am(new Float64Array(16));return qt.properties.get("anchor")==="map"&&(a.b9(ti,ti,gn.rollInRadians),a.ba(ti,ti,-gn.pitchInRadians),a.b9(ti,ti,gn.bearingInRadians),a.ba(ti,ti,gn.center.lat*Math.PI/180),a.bC(ti,ti,-gn.center.lng*Math.PI/180)),a.c9(sn,sn,ti),sn})(Fe,pe.transform),ht=lt.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),bt=we.properties.get("atmosphere-blend")*ht.projectionTransition;if(bt===0)return;const st=rs(lt.worldSize,lt.center.lat),wt=lt.inverseProjectionMatrix,Yt=new Float64Array(4);Yt[3]=1,a.aA(Yt,Yt,lt.modelViewProjectionMatrix),Yt[0]/=Yt[3],Yt[1]/=Yt[3],Yt[2]/=Yt[3],Yt[3]=1,a.aA(Yt,Yt,wt),Yt[0]/=Yt[3],Yt[1]/=Yt[3],Yt[2]/=Yt[3],Yt[3]=1;const jt=((qt,gn,In,sn,ti)=>({u_sun_pos:qt,u_atmosphere_blend:gn,u_globe_position:In,u_globe_radius:sn,u_inv_proj_matrix:ti}))(nt,bt,[Yt[0],Yt[1],Yt[2]],st,wt),Nt=cc(He,we);et.draw(He,Ze.TRIANGLES,rt,Gn.disabled,Ne.alphaBlended,fn.disabled,jt,null,null,"atmosphere",Nt.vertexBuffer,Nt.indexBuffer,Nt.segments)})(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const pe=(function(we,Fe){let He=null;const Ze=Object.values(we._layers).flatMap((nt=>nt.source&&!nt.isHidden(Fe)?[we.tileManagers[nt.source]]:[])),et=Ze.filter((nt=>nt.getSource().type==="vector")),rt=Ze.filter((nt=>nt.getSource().type!=="vector")),lt=nt=>{(!He||He.getSource().maxzoom<nt.getSource().maxzoom)&&(He=nt)};return et.forEach((nt=>lt(nt))),He||rt.forEach((nt=>lt(nt))),He})(this.style,this.transform.zoom);pe&&(function(we,Fe,He){for(let Ze=0;Ze<He.length;Ze++)PA(we,Fe,He[Ze])})(this,pe,pe.getVisibleCoordinates())}this.options.showPadding&&(function(pe){const we=pe.transform.padding;aA(pe,pe.transform.height-(we.top||0),3,Qe),aA(pe,we.bottom||0,3,lc),DA(pe,we.left||0,3,RA),DA(pe,pe.transform.width-(we.right||0),3,ll);const Fe=pe.transform.centerPoint;(function(He,Ze,et,rt){uc(He,Ze-1,et-10,2,20,rt),uc(He,Ze-10,et-1,20,2,rt)})(pe,Fe.x,pe.transform.height-Fe.y,br)})(this),this.context.setDefault()}maybeDrawDepthAndCoords(l){if(!this.style||!this.style.map||!this.style.map.terrain)return;const p=this.terrainFacilitator.matrix,C=this.transform.modelViewProjectionMatrix;let S=this.terrainFacilitator.dirty;S||(S=l?!a.cc(p,C):!a.cd(p,C)),S||(S=this.style.map.terrain.tileManager.anyTilesAfterTime(this.terrainFacilitator.renderTime)),S&&(a.ce(p,C),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,(function(O,U){const N=O.context,Y=N.gl,re=O.transform,ae=Ne.unblended,ge=new nn(Y.LEQUAL,nn.ReadWrite,[0,1]),pe=U.tileManager.getRenderableTiles(),we=O.useProgram("terrainDepth");N.bindFramebuffer.set(U.getFramebuffer("depth").framebuffer),N.viewport.set([0,0,O.width/devicePixelRatio,O.height/devicePixelRatio]),N.clear({color:a.bi.transparent,depth:1});for(const Fe of pe){const He=U.getTerrainMesh(Fe.tileID),Ze=U.getTerrainData(Fe.tileID),et=re.getProjectionData({overscaledTileID:Fe.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),rt={u_ele_delta:U.getMeshFrameDelta(re.zoom)};we.draw(N,Y.TRIANGLES,ge,Gn.disabled,ae,fn.backCCW,rt,Ze,et,"terrain",He.vertexBuffer,He.indexBuffer,He.segments)}N.bindFramebuffer.set(null),N.viewport.set([0,0,O.width,O.height])})(this,this.style.map.terrain),(function(O,U){const N=O.context,Y=N.gl,re=O.transform,ae=Ne.unblended,ge=new nn(Y.LEQUAL,nn.ReadWrite,[0,1]),pe=U.getCoordsTexture(),we=U.tileManager.getRenderableTiles(),Fe=O.useProgram("terrainCoords");N.bindFramebuffer.set(U.getFramebuffer("coords").framebuffer),N.viewport.set([0,0,O.width/devicePixelRatio,O.height/devicePixelRatio]),N.clear({color:a.bi.transparent,depth:1}),U.coordsIndex=[];for(const He of we){const Ze=U.getTerrainMesh(He.tileID),et=U.getTerrainData(He.tileID);N.activeTexture.set(Y.TEXTURE0),Y.bindTexture(Y.TEXTURE_2D,pe.texture);const rt={u_terrain_coords_id:(255-U.coordsIndex.length)/255,u_texture:0,u_ele_delta:U.getMeshFrameDelta(re.zoom)},lt=re.getProjectionData({overscaledTileID:He.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});Fe.draw(N,Y.TRIANGLES,ge,Gn.disabled,ae,fn.backCCW,rt,et,lt,"terrain",Ze.vertexBuffer,Ze.indexBuffer,Ze.segments),U.coordsIndex.push(He.tileID.key)}N.bindFramebuffer.set(null),N.viewport.set([0,0,O.width,O.height])})(this,this.style.map.terrain))}renderLayer(l,p,C,S,O){C.isHidden(this.transform.zoom)||(C.type==="background"||C.type==="custom"||(S||[]).length)&&(this.id=C.id,a.cf(C)?(function(U,N,Y,re,ae,ge){if(U.renderPass!=="translucent")return;const{isRenderingToTexture:pe}=ge,we=Gn.disabled,Fe=U.colorModeForRenderPass();(Y._unevaluatedLayout.hasValue("text-variable-anchor")||Y._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&(function(He,Ze,et,rt,lt,nt,ht,bt,st){const wt=Ze.transform,Yt=Ze.style.map.terrain,jt=lt==="map",Nt=nt==="map";for(const qt of He){const gn=rt.getTile(qt),In=gn.getBucket(et);if(!In||!In.text||!In.text.segments.get().length)continue;const sn=a.ar(In.textSizeData,wt.zoom),ti=a.aG(gn,1,Ze.transform.zoom),nr=$o(jt,Ze.transform,ti),ro=et.layout.get("icon-text-fit")!=="none"&&In.hasIconData();if(sn){const yr=Math.pow(2,wt.zoom-gn.tileID.overscaledZ),jo=Yt?(ks,No)=>Yt.getElevation(qt,ks,No):null;Vs(In,jt,Nt,st,wt,nr,yr,sn,ro,a.aH(wt,gn,ht,bt),qt.toUnwrapped(),jo)}}})(re,U,Y,N,Y.layout.get("text-rotation-alignment"),Y.layout.get("text-pitch-alignment"),Y.paint.get("text-translate"),Y.paint.get("text-translate-anchor"),ae),Y.paint.get("icon-opacity").constantOr(1)!==0&&sl(U,N,Y,re,!1,Y.paint.get("icon-translate"),Y.paint.get("icon-translate-anchor"),Y.layout.get("icon-rotation-alignment"),Y.layout.get("icon-pitch-alignment"),Y.layout.get("icon-keep-upright"),we,Fe,pe),Y.paint.get("text-opacity").constantOr(1)!==0&&sl(U,N,Y,re,!0,Y.paint.get("text-translate"),Y.paint.get("text-translate-anchor"),Y.layout.get("text-rotation-alignment"),Y.layout.get("text-pitch-alignment"),Y.layout.get("text-keep-upright"),we,Fe,pe),N.map.showCollisionBoxes&&(Bl(U,N,Y,re,!0),Bl(U,N,Y,re,!1))})(l,p,C,S,this.style.placement.variableOffsets,O):a.cg(C)?(function(U,N,Y,re,ae){if(U.renderPass!=="translucent")return;const{isRenderingToTexture:ge}=ae,pe=Y.paint.get("circle-opacity"),we=Y.paint.get("circle-stroke-width"),Fe=Y.paint.get("circle-stroke-opacity"),He=!Y.layout.get("circle-sort-key").isConstant();if(pe.constantOr(1)===0&&(we.constantOr(1)===0||Fe.constantOr(1)===0))return;const Ze=U.context,et=Ze.gl,rt=U.transform,lt=U.getDepthModeForSublayer(0,nn.ReadOnly),nt=Gn.disabled,ht=U.colorModeForRenderPass(),bt=[],st=rt.getCircleRadiusCorrection();for(let wt=0;wt<re.length;wt++){const Yt=re[wt],jt=N.getTile(Yt),Nt=jt.getBucket(Y);if(!Nt)continue;const qt=Y.paint.get("circle-translate"),gn=Y.paint.get("circle-translate-anchor"),In=a.aH(rt,jt,qt,gn),sn=Nt.programConfigurations.get(Y.id),ti=U.useProgram("circle",sn),nr=Nt.layoutVertexBuffer,ro=Nt.indexBuffer,yr=U.style.map.terrain&&U.style.map.terrain.getTerrainData(Yt),jo={programConfiguration:sn,program:ti,layoutVertexBuffer:nr,indexBuffer:ro,uniformValues:mp(U,jt,Y,In,st),terrainData:yr,projectionData:rt.getProjectionData({overscaledTileID:Yt,applyGlobeMatrix:!ge,applyTerrainMatrix:!0})};if(He){const ks=Nt.segments.get();for(const No of ks)bt.push({segments:new a.aQ([No]),sortKey:No.sortKey,state:jo})}else bt.push({segments:Nt.segments,sortKey:0,state:jo})}He&&bt.sort(((wt,Yt)=>wt.sortKey-Yt.sortKey));for(const wt of bt){const{programConfiguration:Yt,program:jt,layoutVertexBuffer:Nt,indexBuffer:qt,uniformValues:gn,terrainData:In,projectionData:sn}=wt.state;jt.draw(Ze,et.TRIANGLES,lt,nt,ht,fn.backCCW,gn,In,sn,Y.id,Nt,qt,wt.segments,Y.paint,U.transform.zoom,Yt)}})(l,p,C,S,O):a.ch(C)?(function(U,N,Y,re,ae){if(Y.paint.get("heatmap-opacity")===0)return;const ge=U.context,{isRenderingToTexture:pe,isRenderingGlobe:we}=ae;if(U.style.map.terrain){for(const Fe of re){const He=N.getTile(Fe);N.hasRenderableParent(Fe)||(U.renderPass==="offscreen"?kA(U,He,Y,Fe,we):U.renderPass==="translucent"&&Ql(U,Y,Fe,pe,we))}ge.viewport.set([0,0,U.width,U.height])}else U.renderPass==="offscreen"?(function(Fe,He,Ze,et){const rt=Fe.context,lt=rt.gl,nt=Fe.transform,ht=Gn.disabled,bt=new Ne([lt.ONE,lt.ONE],a.bi.transparent,[!0,!0,!0,!0]);(function(st,wt,Yt){const jt=st.gl;st.activeTexture.set(jt.TEXTURE1),st.viewport.set([0,0,wt.width/4,wt.height/4]);let Nt=Yt.heatmapFbos.get(a.c6);Nt?(jt.bindTexture(jt.TEXTURE_2D,Nt.colorAttachment.get()),st.bindFramebuffer.set(Nt.framebuffer)):(Nt=Uu(st,wt.width/4,wt.height/4),Yt.heatmapFbos.set(a.c6,Nt))})(rt,Fe,Ze),rt.clear({color:a.bi.transparent});for(let st=0;st<et.length;st++){const wt=et[st];if(He.hasRenderableParent(wt))continue;const Yt=He.getTile(wt),jt=Yt.getBucket(Ze);if(!jt)continue;const Nt=jt.programConfigurations.get(Ze.id),qt=Fe.useProgram("heatmap",Nt),gn=nt.getProjectionData({overscaledTileID:wt,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),In=nt.getCircleRadiusCorrection();qt.draw(rt,lt.TRIANGLES,nn.disabled,ht,bt,fn.backCCW,Id(Yt,nt.zoom,Ze.paint.get("heatmap-intensity"),In),null,gn,Ze.id,jt.layoutVertexBuffer,jt.indexBuffer,jt.segments,Ze.paint,nt.zoom,Nt)}rt.viewport.set([0,0,Fe.width,Fe.height])})(U,N,Y,re):U.renderPass==="translucent"&&(function(Fe,He){const Ze=Fe.context,et=Ze.gl;Ze.setColorMode(Fe.colorModeForRenderPass());const rt=He.heatmapFbos.get(a.c6);rt&&(Ze.activeTexture.set(et.TEXTURE0),et.bindTexture(et.TEXTURE_2D,rt.colorAttachment.get()),Ze.activeTexture.set(et.TEXTURE1),wf(Ze,He).bind(et.LINEAR,et.CLAMP_TO_EDGE),Fe.useProgram("heatmapTexture").draw(Ze,et.TRIANGLES,nn.disabled,Gn.disabled,Fe.colorModeForRenderPass(),fn.disabled,m0(Fe,He,0,1),null,null,He.id,Fe.viewportBuffer,Fe.quadTriangleIndexBuffer,Fe.viewportSegments,He.paint,Fe.transform.zoom))})(U,Y)})(l,p,C,S,O):a.ci(C)?(function(U,N,Y,re,ae){if(U.renderPass!=="translucent")return;const{isRenderingToTexture:ge}=ae,pe=Y.paint.get("line-opacity"),we=Y.paint.get("line-width");if(pe.constantOr(1)===0||we.constantOr(1)===0)return;const Fe=U.getDepthModeForSublayer(0,nn.ReadOnly),He=U.colorModeForRenderPass(),Ze=Y.paint.get("line-dasharray"),et=Ze.constantOr(1),rt=Y.paint.get("line-pattern"),lt=rt.constantOr(1),nt=Y.paint.get("line-gradient"),ht=Y.getCrossfadeParameters();let bt;bt=lt?"linePattern":et&&nt?"lineGradientSDF":et?"lineSDF":nt?"lineGradient":"line";const st=U.context,wt=st.gl,Yt=U.transform;let jt=!0;for(const Nt of re){const qt=N.getTile(Nt);if(lt&&!qt.patternsLoaded())continue;const gn=qt.getBucket(Y);if(!gn)continue;const In=gn.programConfigurations.get(Y.id),sn=U.context.program.get(),ti=U.useProgram(bt,In),nr=jt||ti.program!==sn,ro=U.style.map.terrain&&U.style.map.terrain.getTerrainData(Nt),yr=rt.constantOr(null),jo=Ze&&Ze.constantOr(null);if(yr&&qt.imageAtlas){const va=qt.imageAtlas,as=va.patternPositions[yr.to.toString()],oo=va.patternPositions[yr.from.toString()];as&&oo&&In.setConstantPatternPositions(as,oo)}else if(jo){const va=Y.layout.get("line-cap")==="round",as=U.lineAtlas.getDash(jo.to,va),oo=U.lineAtlas.getDash(jo.from,va);In.setConstantDashPositions(as,oo)}const ks=Yt.getProjectionData({overscaledTileID:Nt,applyGlobeMatrix:!ge,applyTerrainMatrix:!0}),No=Yt.getPixelScale();let aa;lt?(aa=Mf(U,qt,Y,No,ht),hh(st,wt,qt,In,ht)):et&&nt?(aa=Nm(U,qt,Y,No,ht,gn.lineClipsArray.length),bo(U,N,st,wt,Y,gn,Nt,In,ht)):et?(aa=lh(U,qt,Y,No,ht),Pd(U,st,wt,In,nr,ht)):nt?(aa=jm(U,qt,Y,No,gn.lineClipsArray.length),ma(U,N,st,wt,Y,gn,Nt)):aa=MA(U,qt,Y,No);const vs=U.stencilModeForClipping(Nt);ti.draw(st,wt.TRIANGLES,Fe,vs,He,fn.disabled,aa,ro,ks,Y.id,gn.layoutVertexBuffer,gn.indexBuffer,gn.segments,Y.paint,U.transform.zoom,In,gn.layoutVertexBuffer2),jt=!1}})(l,p,C,S,O):a.cj(C)?(function(U,N,Y,re,ae){const ge=Y.paint.get("fill-color"),pe=Y.paint.get("fill-opacity");if(pe.constantOr(1)===0)return;const{isRenderingToTexture:we}=ae,Fe=U.colorModeForRenderPass(),He=Y.paint.get("fill-pattern"),Ze=U.opaquePassEnabledForLayer()&&!He.constantOr(1)&&ge.constantOr(a.bi.transparent).a===1&&pe.constantOr(0)===1?"opaque":"translucent";if(U.renderPass===Ze){const et=U.getDepthModeForSublayer(1,U.renderPass==="opaque"?nn.ReadWrite:nn.ReadOnly);dh(U,N,Y,re,et,Fe,!1,we)}if(U.renderPass==="translucent"&&Y.paint.get("fill-antialias")){const et=U.getDepthModeForSublayer(Y.getPaintProperty("fill-outline-color")?2:0,nn.ReadOnly);dh(U,N,Y,re,et,Fe,!0,we)}})(l,p,C,S,O):a.ck(C)?(function(U,N,Y,re,ae){const ge=Y.paint.get("fill-extrusion-opacity");if(ge===0)return;const{isRenderingToTexture:pe}=ae;if(U.renderPass==="translucent"){const we=new nn(U.context.gl.LEQUAL,nn.ReadWrite,U.depthRangeFor3D);if(ge!==1||Y.paint.get("fill-extrusion-pattern").constantOr(1))cu(U,N,Y,re,we,Gn.disabled,Ne.disabled,pe),cu(U,N,Y,re,we,U.stencilModeFor3D(),U.colorModeForRenderPass(),pe);else{const Fe=U.colorModeForRenderPass();cu(U,N,Y,re,we,Gn.disabled,Fe,pe)}}})(l,p,C,S,O):a.cl(C)?(function(U,N,Y,re,ae){if(U.renderPass!=="offscreen"&&U.renderPass!=="translucent")return;const{isRenderingToTexture:ge}=ae,pe=U.context,we=U.style.projection.useSubdivision,Fe=U.getDepthModeForSublayer(0,nn.ReadOnly),He=U.colorModeForRenderPass();if(U.renderPass==="offscreen")(function(Ze,et,rt,lt,nt,ht,bt){const st=Ze.context,wt=st.gl;for(const Yt of rt){const jt=et.getTile(Yt),Nt=jt.dem;if(!Nt||!Nt.data||!jt.needsHillshadePrepare)continue;const qt=Nt.dim,gn=Nt.stride,In=Nt.getPixels();if(st.activeTexture.set(wt.TEXTURE1),st.pixelStoreUnpackPremultiplyAlpha.set(!1),jt.demTexture=jt.demTexture||Ze.getTileTexture(gn),jt.demTexture){const ti=jt.demTexture;ti.update(In,{premultiply:!1}),ti.bind(wt.NEAREST,wt.CLAMP_TO_EDGE)}else jt.demTexture=new a.T(st,In,wt.RGBA,{premultiply:!1}),jt.demTexture.bind(wt.NEAREST,wt.CLAMP_TO_EDGE);st.activeTexture.set(wt.TEXTURE0);let sn=jt.fbo;if(!sn){const ti=new a.T(st,{width:qt,height:qt,data:null},wt.RGBA);ti.bind(wt.LINEAR,wt.CLAMP_TO_EDGE),sn=jt.fbo=st.createFramebuffer(qt,qt,!0,!1),sn.colorAttachment.set(ti.texture)}st.bindFramebuffer.set(sn.framebuffer),st.viewport.set([0,0,qt,qt]),Ze.useProgram("hillshadePrepare").draw(st,wt.TRIANGLES,nt,ht,bt,fn.disabled,jh(jt.tileID,Nt),null,null,lt.id,Ze.rasterBoundsBuffer,Ze.quadTriangleIndexBuffer,Ze.rasterBoundsSegments),jt.needsHillshadePrepare=!1}})(U,N,re,Y,Fe,Gn.disabled,He),pe.viewport.set([0,0,U.width,U.height]);else if(U.renderPass==="translucent")if(we){const[Ze,et,rt]=U.stencilConfigForOverlapTwoPass(re);gs(U,N,Y,rt,Ze,Fe,He,!1,ge),gs(U,N,Y,rt,et,Fe,He,!0,ge)}else{const[Ze,et]=U.getStencilConfigForOverlapAndUpdateStencilID(re);gs(U,N,Y,et,Ze,Fe,He,!1,ge)}})(l,p,C,S,O):a.cm(C)?(function(U,N,Y,re,ae){if(U.renderPass!=="translucent"||!re.length)return;const{isRenderingToTexture:ge}=ae,pe=U.style.projection.useSubdivision,we=U.getDepthModeForSublayer(0,nn.ReadOnly),Fe=U.colorModeForRenderPass();if(pe){const[He,Ze,et]=U.stencilConfigForOverlapTwoPass(re);Yl(U,N,Y,et,He,we,Fe,!1,ge),Yl(U,N,Y,et,Ze,we,Fe,!0,ge)}else{const[He,Ze]=U.getStencilConfigForOverlapAndUpdateStencilID(re);Yl(U,N,Y,Ze,He,we,Fe,!1,ge)}})(l,p,C,S,O):a.bN(C)?(function(U,N,Y,re,ae){if(U.renderPass!=="translucent"||Y.paint.get("raster-opacity")===0||!re.length)return;const{isRenderingToTexture:ge}=ae,pe=N.getSource(),we=U.style.projection.useSubdivision;if(pe instanceof Zn)sA(U,N,Y,re,null,!1,!1,pe.tileCoords,pe.flippedWindingOrder,ge);else if(we){const[Fe,He,Ze]=U.stencilConfigForOverlapTwoPass(re);sA(U,N,Y,Ze,Fe,!1,!0,al,!1,ge),sA(U,N,Y,Ze,He,!0,!0,al,!1,ge)}else{const[Fe,He]=U.getStencilConfigForOverlapAndUpdateStencilID(re);sA(U,N,Y,He,Fe,!1,!0,al,!1,ge)}})(l,p,C,S,O):a.cn(C)?(function(U,N,Y,re,ae){const ge=Y.paint.get("background-color"),pe=Y.paint.get("background-opacity");if(pe===0)return;const{isRenderingToTexture:we}=ae,Fe=U.context,He=Fe.gl,Ze=U.style.projection,et=U.transform,rt=et.tileSize,lt=Y.paint.get("background-pattern");if(U.isPatternMissing(lt))return;const nt=!lt&&ge.a===1&&pe===1&&U.opaquePassEnabledForLayer()?"opaque":"translucent";if(U.renderPass!==nt)return;const ht=Gn.disabled,bt=U.getDepthModeForSublayer(0,nt==="opaque"?nn.ReadWrite:nn.ReadOnly),st=U.colorModeForRenderPass(),wt=U.useProgram(lt?"backgroundPattern":"background"),Yt=re||Zi(et,{tileSize:rt,terrain:U.style.map.terrain});lt&&(Fe.activeTexture.set(He.TEXTURE0),U.imageManager.bind(U.context));const jt=Y.getCrossfadeParameters();for(const Nt of Yt){const qt=et.getProjectionData({overscaledTileID:Nt,applyGlobeMatrix:!we,applyTerrainMatrix:!0}),gn=lt?Qm(pe,U,lt,{tileID:Nt,tileSize:rt},jt):Wm(pe,ge),In=U.style.map.terrain&&U.style.map.terrain.getTerrainData(Nt),sn=Ze.getMeshFromTileID(Fe,Nt.canonical,!1,!0,"raster");wt.draw(Fe,He.TRIANGLES,bt,ht,st,fn.backCCW,gn,In,qt,Y.id,sn.vertexBuffer,sn.indexBuffer,sn.segments)}})(l,0,C,S,O):a.co(C)&&(function(U,N,Y,re){const{isRenderingGlobe:ae}=re,ge=U.context,pe=Y.implementation,we=U.style.projection,Fe=U.transform,He=Fe.getProjectionDataForCustomLayer(ae),Ze={farZ:Fe.farZ,nearZ:Fe.nearZ,fov:Fe.fov*Math.PI/180,modelViewProjectionMatrix:Fe.modelViewProjectionMatrix,projectionMatrix:Fe.projectionMatrix,shaderData:{variantName:we.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${we.shaderPreludeCode.vertexSource}`,define:we.shaderDefine},defaultProjectionData:He},et=pe.renderingMode?pe.renderingMode:"2d";if(U.renderPass==="offscreen"){const rt=pe.prerender;rt&&(U.setCustomLayerDefaults(),ge.setColorMode(U.colorModeForRenderPass()),rt.call(pe,ge.gl,Ze),ge.setDirty(),U.setBaseState())}else if(U.renderPass==="translucent"){U.setCustomLayerDefaults(),ge.setColorMode(U.colorModeForRenderPass()),ge.setStencilMode(Gn.disabled);const rt=et==="3d"?U.getDepthModeFor3D():U.getDepthModeForSublayer(0,nn.ReadOnly);ge.setDepthMode(rt),pe.render(ge.gl,Ze),ge.setDirty(),U.setBaseState(),ge.bindFramebuffer.set(null)}})(l,0,C,O))}saveTileTexture(l){const p=this._tileTextures[l.size[0]];p?p.push(l):this._tileTextures[l.size[0]]=[l]}getTileTexture(l){const p=this._tileTextures[l];return p&&p.length>0?p.pop():null}isPatternMissing(l){if(!l)return!1;if(!l.from||!l.to)return!0;const p=this.imageManager.getPattern(l.from.toString()),C=this.imageManager.getPattern(l.to.toString());return!p||!C}useProgram(l,p,C=!1,S=[]){this.cache=this.cache||{};const O=!!this.style.map.terrain,U=this.style.projection,N=C?Fi.projectionMercator:U.shaderPreludeCode,Y=C?is:U.shaderDefine,re=l+(p?p.cacheKey:"")+`/${C?go:U.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(O?"/terrain":"")+(S?`/${S.join("/")}`:"");return this.cache[re]||(this.cache[re]=new xf(this.context,Fi[l],p,Ym[l],this._showOverdrawInspector,O,N,Y,S)),this.cache[re]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const l=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(l.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new a.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:l,drawingBufferHeight:p}=this.context.gl;return this.width!==l||this.height!==p}}function fh(B,l){let p,C=!1,S=null,O=null;const U=()=>{S=null,C&&(B.apply(O,p),S=setTimeout(U,l),C=!1)};return(...N)=>(C=!0,O=this,p=N,S||U(),S)}class Ha{constructor(l){this._getCurrentHash=()=>{const p=window.location.hash.replace("#","");if(this._hashName){let C;return p.split("&").map((S=>S.split("="))).forEach((S=>{S[0]===this._hashName&&(C=S)})),(C&&C[1]||"").split("/")}return p.split("/")},this._onHashChange=()=>{const p=this._getCurrentHash();if(!this._isValidHash(p))return!1;const C=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(p[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+p[2],+p[1]],zoom:+p[0],bearing:C,pitch:+(p[4]||0)}),!0},this._updateHashUnthrottled=()=>{const p=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,p)},this._removeHash=()=>{const p=this._getCurrentHash();if(p.length===0)return;const C=p.join("/");let S=C;S.split("&").length>0&&(S=S.split("&")[0]),this._hashName&&(S=`${this._hashName}=${C}`);let O=window.location.hash.replace(S,"");O.startsWith("#&")?O=O.slice(0,1)+O.slice(2):O==="#"&&(O="");let U=window.location.href.replace(/(#.+)?$/,O);U=U.replace("&&","&"),window.history.replaceState(window.history.state,null,U)},this._updateHash=fh(this._updateHashUnthrottled,300),this._hashName=l&&encodeURIComponent(l)}addTo(l){return this._map=l,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(l){const p=this._map.getCenter(),C=Math.round(100*this._map.getZoom())/100,S=Math.ceil((C*Math.LN2+Math.log(512/360/.5))/Math.LN10),O=Math.pow(10,S),U=Math.round(p.lng*O)/O,N=Math.round(p.lat*O)/O,Y=this._map.getBearing(),re=this._map.getPitch();let ae="";if(ae+=l?`/${U}/${N}/${C}`:`${C}/${N}/${U}`,(Y||re)&&(ae+="/"+Math.round(10*Y)/10),re&&(ae+=`/${Math.round(re)}`),this._hashName){const ge=this._hashName;let pe=!1;const we=window.location.hash.slice(1).split("&").map((Fe=>{const He=Fe.split("=")[0];return He===ge?(pe=!0,`${He}=${ae}`):Fe})).filter((Fe=>Fe));return pe||we.push(`${ge}=${ae}`),`#${we.join("&")}`}return`#${ae}`}_isValidHash(l){if(l.length<3||l.some(isNaN))return!1;try{new a.U(+l[2],+l[1])}catch{return!1}const p=+l[0],C=+(l[3]||0),S=+(l[4]||0);return p>=this._map.getMinZoom()&&p<=this._map.getMaxZoom()&&C>=-180&&C<=180&&S>=this._map.getMinPitch()&&S<=this._map.getMaxPitch()}}const Ol={linearity:.3,easing:a.cp(0,0,.3,1)},v0=a.e({deceleration:2500,maxSpeed:1400},Ol),k1=a.e({deceleration:20,maxSpeed:1400},Ol),T1=a.e({deceleration:1e3,maxSpeed:360},Ol),R1=a.e({deceleration:1e3,maxSpeed:90},Ol),$s=a.e({deceleration:1e3,maxSpeed:360},Ol);class Uc{constructor(l){this._map=l,this.clear()}clear(){this._inertiaBuffer=[]}record(l){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:D(),settings:l})}_drainInertiaBuffer(){const l=this._inertiaBuffer,p=D();for(;l.length>0&&p-l[0].time>160;)l.shift()}_onMoveEnd(l){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const p={zoom:0,bearing:0,pitch:0,roll:0,pan:new a.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:O}of this._inertiaBuffer)p.zoom+=O.zoomDelta||0,p.bearing+=O.bearingDelta||0,p.pitch+=O.pitchDelta||0,p.roll+=O.rollDelta||0,O.panDelta&&p.pan._add(O.panDelta),O.around&&(p.around=O.around),O.pinchAround&&(p.pinchAround=O.pinchAround);const C=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,S={};if(p.pan.mag()){const O=Za(p.pan.mag(),C,a.e({},v0,l||{})),U=p.pan.mult(O.amount/p.pan.mag()),N=this._map.cameraHelper.handlePanInertia(U,this._map.transform);S.center=N.easingCenter,S.offset=N.easingOffset,Ra(S,O)}if(p.zoom){const O=Za(p.zoom,C,k1);S.zoom=this._map.transform.zoom+O.amount,Ra(S,O)}if(p.bearing){const O=Za(p.bearing,C,T1);S.bearing=this._map.transform.bearing+a.ai(O.amount,-179,179),Ra(S,O)}if(p.pitch){const O=Za(p.pitch,C,R1);S.pitch=this._map.transform.pitch+O.amount,Ra(S,O)}if(p.roll){const O=Za(p.roll,C,$s);S.roll=this._map.transform.roll+a.ai(O.amount,-179,179),Ra(S,O)}if(S.zoom||S.bearing){const O=p.pinchAround===void 0?p.around:p.pinchAround;S.around=O?this._map.unproject(O):this._map.getCenter()}return this.clear(),a.e(S,{noMoveStart:!0})}}function Ra(B,l){(!B.duration||B.duration<l.duration)&&(B.duration=l.duration,B.easing=l.easing)}function Za(B,l,p){const{maxSpeed:C,linearity:S,deceleration:O}=p,U=a.ai(B*S/(l/1e3),-C,C),N=Math.abs(U)/(O*S);return{easing:p.easing,duration:1e3*N,amount:U*(N/2)}}class ql extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,p,C,S={}){C=C instanceof MouseEvent?C:new MouseEvent(l,C);const O=P.mousePos(p.getCanvas(),C),U=p.unproject(O);super(l,a.e({point:O,lngLat:U,originalEvent:C},S)),this._defaultPrevented=!1,this.target=p}}class Da extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,p,C){const S=l==="touchend"?C.changedTouches:C.touches,O=P.touchPos(p.getCanvasContainer(),S),U=O.map((Y=>p.unproject(Y))),N=O.reduce(((Y,re,ae,ge)=>Y.add(re.div(ge.length))),new a.P(0,0));super(l,{points:O,point:N,lngLats:U,lngLat:p.unproject(N),originalEvent:C}),this._defaultPrevented=!1}}class Ud extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,p,C){super(l,{originalEvent:C}),this._defaultPrevented=!1}}class Kc{constructor(l,p){this._map=l,this._clickTolerance=p.clickTolerance}reset(){delete this._mousedownPos}wheel(l){return this._firePreventable(new Ud(l.type,this._map,l))}mousedown(l,p){return this._mousedownPos=p,this._firePreventable(new ql(l.type,this._map,l))}mouseup(l){this._map.fire(new ql(l.type,this._map,l))}click(l,p){this._mousedownPos&&this._mousedownPos.dist(p)>=this._clickTolerance||this._map.fire(new ql(l.type,this._map,l))}dblclick(l){return this._firePreventable(new ql(l.type,this._map,l))}mouseover(l){this._map.fire(new ql(l.type,this._map,l))}mouseout(l){this._map.fire(new ql(l.type,this._map,l))}touchstart(l){return this._firePreventable(new Da(l.type,this._map,l))}touchmove(l){this._map.fire(new Da(l.type,this._map,l))}touchend(l){this._map.fire(new Da(l.type,this._map,l))}touchcancel(l){this._map.fire(new Da(l.type,this._map,l))}_firePreventable(l){if(this._map.fire(l),l.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class D1{constructor(l){this._map=l}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(l){this._map.fire(new ql(l.type,this._map,l))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ql("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(l){this._delayContextMenu?this._contextMenuEvent=l:this._ignoreContextMenu||this._map.fire(new ql(l.type,this._map,l)),this._map.listens("contextmenu")&&l.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class wp{constructor(l){this._map=l}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(l){return this.transform.screenPointToLocation(a.P.convert(l),this._map.terrain)}}class Ac{constructor(l,p){this._map=l,this._tr=new wp(l),this._el=l.getCanvasContainer(),this._container=l.getContainer(),this._clickTolerance=p.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(l,p){this.isEnabled()&&l.shiftKey&&l.button===0&&(P.disableDrag(),this._startPos=this._lastPos=p,this._active=!0)}mousemoveWindow(l,p){if(!this._active)return;const C=p;if(this._lastPos.equals(C)||!this._box&&C.dist(this._startPos)<this._clickTolerance)return;const S=this._startPos;this._lastPos=C,this._box||(this._box=P.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",l));const O=Math.min(S.x,C.x),U=Math.max(S.x,C.x),N=Math.min(S.y,C.y),Y=Math.max(S.y,C.y);P.setTransform(this._box,`translate(${O}px,${N}px)`),this._box.style.width=U-O+"px",this._box.style.height=Y-N+"px"}mouseupWindow(l,p){if(!this._active||l.button!==0)return;const C=this._startPos,S=p;if(this.reset(),P.suppressClick(),C.x!==S.x||C.y!==S.y)return this._map.fire(new a.l("boxzoomend",{originalEvent:l})),{cameraAnimation:O=>O.fitScreenCoordinates(C,S,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",l)}keydown(l){this._active&&l.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",l))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(P.remove(this._box),this._box=null),P.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(l,p){return this._map.fire(new a.l(l,{originalEvent:p}))}}function ph(B,l){if(B.length!==l.length)throw new Error(`The number of touches and points are not equal - touches ${B.length}, points ${l.length}`);const p={};for(let C=0;C<B.length;C++)p[B[C].identifier]=l[C];return p}class Hm{constructor(l){this.reset(),this.numTouches=l.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(l,p,C){(this.centroid||C.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=l.timeStamp),C.length===this.numTouches&&(this.centroid=(function(S){const O=new a.P(0,0);for(const U of S)O._add(U);return O.div(S.length)})(p),this.touches=ph(C,p)))}touchmove(l,p,C){if(this.aborted||!this.centroid)return;const S=ph(C,p);for(const O in this.touches){const U=S[O];(!U||U.dist(this.touches[O])>30)&&(this.aborted=!0)}}touchend(l,p,C){if((!this.centroid||l.timeStamp-this.startTime>500)&&(this.aborted=!0),C.length===0){const S=!this.aborted&&this.centroid;if(this.reset(),S)return S}}}class UA{constructor(l){this.singleTap=new Hm(l),this.numTaps=l.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(l,p,C){this.singleTap.touchstart(l,p,C)}touchmove(l,p,C){this.singleTap.touchmove(l,p,C)}touchend(l,p,C){const S=this.singleTap.touchend(l,p,C);if(S){const O=l.timeStamp-this.lastTime<500,U=!this.lastTap||this.lastTap.dist(S)<30;if(O&&U||this.reset(),this.count++,this.lastTime=l.timeStamp,this.lastTap=S,this.count===this.numTaps)return this.reset(),S}}}class KA{constructor(l){this._tr=new wp(l),this._zoomIn=new UA({numTouches:1,numTaps:2}),this._zoomOut=new UA({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(l,p,C){this._zoomIn.touchstart(l,p,C),this._zoomOut.touchstart(l,p,C)}touchmove(l,p,C){this._zoomIn.touchmove(l,p,C),this._zoomOut.touchmove(l,p,C)}touchend(l,p,C){const S=this._zoomIn.touchend(l,p,C),O=this._zoomOut.touchend(l,p,C),U=this._tr;return S?(this._active=!0,l.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:N=>N.easeTo({duration:300,zoom:U.zoom+1,around:U.unproject(S)},{originalEvent:l})}):O?(this._active=!0,l.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:N=>N.easeTo({duration:300,zoom:U.zoom-1,around:U.unproject(O)},{originalEvent:l})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Qn{constructor(l){this._enabled=!!l.enable,this._moveStateManager=l.moveStateManager,this._clickTolerance=l.clickTolerance||1,this._moveFunction=l.move,this._activateOnStart=!!l.activateOnStart,l.assignEvents(this),this.reset()}reset(l){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(l)}_move(...l){const p=this._moveFunction(...l);if(p.bearingDelta||p.pitchDelta||p.rollDelta||p.around||p.panDelta)return this._active=!0,p}dragStart(l,p){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(l)&&(this._moveStateManager.startMove(l),this._lastPoint=Array.isArray(p)?p[0]:p,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(l,p){if(!this.isEnabled())return;const C=this._lastPoint;if(!C)return;if(l.preventDefault(),!this._moveStateManager.isValidMoveEvent(l))return void this.reset(l);const S=Array.isArray(p)?p[0]:p;return!this._moved&&S.dist(C)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=S,this._move(C,S))}dragEnd(l){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(l)&&(this._moved&&P.suppressClick(),this.reset(l))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Sp=0,Kd=2,Ep={[Sp]:1,[Kd]:2};class LA{constructor(l){this._correctEvent=l.checkCorrectEvent}startMove(l){const p=P.mouseButton(l);this._eventButton=p}endMove(l){delete this._eventButton}isValidStartEvent(l){return this._correctEvent(l)}isValidMoveEvent(l){return!(function(p,C){const S=Ep[C];return p.buttons===void 0||(p.buttons&S)!==S})(l,this._eventButton)}isValidEndEvent(l){return P.mouseButton(l)===this._eventButton}}class Xh{constructor(){this._firstTouch=void 0}_isOneFingerTouch(l){return l.targetTouches.length===1}_isSameTouchEvent(l){return l.targetTouches[0].identifier===this._firstTouch}startMove(l){this._firstTouch=l.targetTouches[0].identifier}endMove(l){delete this._firstTouch}isValidStartEvent(l){return this._isOneFingerTouch(l)}isValidMoveEvent(l){return this._isOneFingerTouch(l)&&this._isSameTouchEvent(l)}isValidEndEvent(l){return this._isOneFingerTouch(l)&&this._isSameTouchEvent(l)}}class hc{constructor(l=new LA({checkCorrectEvent:()=>!0}),p=new Xh){this.mouseMoveStateManager=l,this.oneFingerTouchMoveStateManager=p}_executeRelevantHandler(l,p,C){return l instanceof MouseEvent?p(l):typeof TouchEvent<"u"&&l instanceof TouchEvent?C(l):void 0}startMove(l){this._executeRelevantHandler(l,(p=>this.mouseMoveStateManager.startMove(p)),(p=>this.oneFingerTouchMoveStateManager.startMove(p)))}endMove(l){this._executeRelevantHandler(l,(p=>this.mouseMoveStateManager.endMove(p)),(p=>this.oneFingerTouchMoveStateManager.endMove(p)))}isValidStartEvent(l){return this._executeRelevantHandler(l,(p=>this.mouseMoveStateManager.isValidStartEvent(p)),(p=>this.oneFingerTouchMoveStateManager.isValidStartEvent(p)))}isValidMoveEvent(l){return this._executeRelevantHandler(l,(p=>this.mouseMoveStateManager.isValidMoveEvent(p)),(p=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(p)))}isValidEndEvent(l){return this._executeRelevantHandler(l,(p=>this.mouseMoveStateManager.isValidEndEvent(p)),(p=>this.oneFingerTouchMoveStateManager.isValidEndEvent(p)))}}const er=B=>{B.mousedown=B.dragStart,B.mousemoveWindow=B.dragMove,B.mouseup=B.dragEnd,B.contextmenu=l=>{l.preventDefault()}};class Zm{constructor(l,p){this._clickTolerance=l.clickTolerance||1,this._map=p,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new a.P(0,0)}_shouldBePrevented(l){return l<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(l,p,C){return this._calculateTransform(l,p,C)}touchmove(l,p,C){if(this._active){if(!this._shouldBePrevented(C.length))return l.preventDefault(),this._calculateTransform(l,p,C);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",l)}}touchend(l,p,C){this._calculateTransform(l,p,C),this._active&&this._shouldBePrevented(C.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(l,p,C){C.length>0&&(this._active=!0);const S=ph(C,p),O=new a.P(0,0),U=new a.P(0,0);let N=0;for(const re in S){const ae=S[re],ge=this._touches[re];ge&&(O._add(ae),U._add(ae.sub(ge)),N++,S[re]=ae)}if(this._touches=S,this._shouldBePrevented(N)||!U.mag())return;const Y=U.div(N);return this._sum._add(Y),this._sum.mag()<this._clickTolerance?void 0:{around:O.div(N),panDelta:Y}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Bp{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(l,p,C){this._firstTwoTouches||C.length<2||(this._firstTwoTouches=[C[0].identifier,C[1].identifier],this._start([p[0],p[1]]))}touchmove(l,p,C){if(!this._firstTwoTouches)return;l.preventDefault();const[S,O]=this._firstTwoTouches,U=lA(C,p,S),N=lA(C,p,O);if(!U||!N)return;const Y=this._aroundCenter?null:U.add(N).div(2);return this._move([U,N],Y,l)}touchend(l,p,C){if(!this._firstTwoTouches)return;const[S,O]=this._firstTwoTouches,U=lA(C,p,S),N=lA(C,p,O);U&&N||(this._active&&P.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(l){this._enabled=!0,this._aroundCenter=!!l&&l.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function lA(B,l,p){for(let C=0;C<B.length;C++)if(B[C].identifier===p)return l[C]}function Ku(B,l){return Math.log(B/l)/Math.LN2}class Ld extends Bp{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(l){this._startDistance=this._distance=l[0].dist(l[1])}_move(l,p){const C=this._distance;if(this._distance=l[0].dist(l[1]),this._active||!(Math.abs(Ku(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Ku(this._distance,C),pinchAround:p}}}function dc(B,l){return 180*B.angleWith(l)/Math.PI}class ul extends Bp{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(l){this._startVector=this._vector=l[0].sub(l[1]),this._minDiameter=l[0].dist(l[1])}_move(l,p,C){const S=this._vector;if(this._vector=l[0].sub(l[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:dc(this._vector,S),pinchAround:p}}_isBelowThreshold(l){this._minDiameter=Math.min(this._minDiameter,l.mag());const p=25/(Math.PI*this._minDiameter)*360,C=dc(l,this._startVector);return Math.abs(C)<p}}function Op(B){return Math.abs(B.y)>Math.abs(B.x)}class mh extends Bp{constructor(l){super(),this._currentTouchCount=0,this._map=l}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(l,p,C){super.touchstart(l,p,C),this._currentTouchCount=C.length}_start(l){this._lastPoints=l,Op(l[0].sub(l[1]))&&(this._valid=!1)}_move(l,p,C){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const S=l[0].sub(this._lastPoints[0]),O=l[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(S,O,C.timeStamp),this._valid?(this._lastPoints=l,this._active=!0,{pitchDelta:(S.y+O.y)/2*-.5}):void 0}gestureBeginsVertically(l,p,C){if(this._valid!==void 0)return this._valid;const S=l.mag()>=2,O=p.mag()>=2;if(!S&&!O)return;if(!S||!O)return this._firstMove===void 0&&(this._firstMove=C),C-this._firstMove<100&&void 0;const U=l.y>0==p.y>0;return Op(l)&&Op(p)&&U}}const Xm={panStep:100,bearingStep:15,pitchStep:10};class fc{constructor(l){this._tr=new wp(l);const p=Xm;this._panStep=p.panStep,this._bearingStep=p.bearingStep,this._pitchStep=p.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(l){if(l.altKey||l.ctrlKey||l.metaKey)return;let p=0,C=0,S=0,O=0,U=0;switch(l.keyCode){case 61:case 107:case 171:case 187:p=1;break;case 189:case 109:case 173:p=-1;break;case 37:l.shiftKey?C=-1:(l.preventDefault(),O=-1);break;case 39:l.shiftKey?C=1:(l.preventDefault(),O=1);break;case 38:l.shiftKey?S=1:(l.preventDefault(),U=-1);break;case 40:l.shiftKey?S=-1:(l.preventDefault(),U=1);break;default:return}return this._rotationDisabled&&(C=0,S=0),{cameraAnimation:N=>{const Y=this._tr;N.easeTo({duration:300,easeId:"keyboardHandler",easing:FA,zoom:p?Math.round(Y.zoom)+p*(l.shiftKey?2:1):Y.zoom,bearing:Y.bearing+C*this._bearingStep,pitch:Y.pitch+S*this._pitchStep,offset:[-O*this._panStep,-U*this._panStep],center:Y.center},{originalEvent:l})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function FA(B){return B*(2-B)}const Lc=4.000244140625,io=1/450;class Fc{constructor(l,p){this._onTimeout=C=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(C)},this._map=l,this._tr=new wp(l),this._triggerRenderFrame=p,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=io}setZoomRate(l){this._defaultZoomRate=l}setWheelZoomRate(l){this._wheelZoomRate=l}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(l){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!l&&l.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(l){return!!this._map.cooperativeGestures.isEnabled()&&!(l.ctrlKey||this._map.cooperativeGestures.isBypassed(l))}wheel(l){if(!this.isEnabled())return;if(this._shouldBePrevented(l))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",l);let p=l.deltaMode===WheelEvent.DOM_DELTA_LINE?40*l.deltaY:l.deltaY;const C=D(),S=C-(this._lastWheelEventTime||0);this._lastWheelEventTime=C,p!==0&&p%Lc==0?this._type="wheel":p!==0&&Math.abs(p)<4?this._type="trackpad":S>400?(this._type=null,this._lastValue=p,this._timeout=setTimeout(this._onTimeout,40,l)):this._type||(this._type=Math.abs(S*p)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,p+=this._lastValue)),l.shiftKey&&p&&(p/=4),this._type&&(this._lastWheelEvent=l,this._delta-=p,this._active||this._start(l)),l.preventDefault()}_start(l){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const p=P.mousePos(this._map.getCanvas(),l),C=this._tr;this._aroundPoint=this._aroundCenter?C.transform.locationToScreenPoint(a.U.convert(C.center)):p,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const l=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const N=l.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=N),typeof this._targetZoom=="number"&&(this._targetZoom+=N)}if(this._delta!==0){const N=this._type==="wheel"&&Math.abs(this._delta)>Lc?this._wheelZoomRate:this._defaultZoomRate;let Y=2/(1+Math.exp(-Math.abs(this._delta*N)));this._delta<0&&Y!==0&&(Y=1/Y);const re=typeof this._targetZoom!="number"?l.scale:a.al(this._targetZoom);this._targetZoom=l.constrain(l.getCameraLngLat(),a.ao(re*Y)).zoom,this._type==="wheel"&&(this._startZoom=l.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const p=typeof this._targetZoom!="number"?l.zoom:this._targetZoom,C=this._startZoom,S=this._easing;let O,U=!1;if(this._type==="wheel"&&C&&S){const N=D()-this._lastWheelEventTime,Y=Math.min((N+5)/200,1),re=S(Y);O=a.F.number(C,p,re),Y<1?this._frameId||(this._frameId=!0):U=!0}else O=p,U=!0;return this._active=!0,U&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout}),200)),this._lastExpectedZoom=O,{noInertia:!0,needsRenderFrame:!U,zoomDelta:O-l.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(l){let p=a.cr;if(this._prevEase){const C=this._prevEase,S=(D()-C.start)/C.duration,O=C.easing(S+.01)-C.easing(S),U=.27/Math.sqrt(O*O+1e-4)*.01,N=Math.sqrt(.0729-U*U);p=a.cp(U,N,.25,1)}return this._prevEase={start:D(),duration:l,easing:p},p}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class gh{constructor(l,p){this._clickZoom=l,this._tapZoom=p}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Sf{constructor(l){this._tr=new wp(l),this.reset()}reset(){this._active=!1}dblclick(l,p){return l.preventDefault(),{cameraAnimation:C=>{C.easeTo({duration:300,zoom:this._tr.zoom+(l.shiftKey?-1:1),around:this._tr.unproject(p)},{originalEvent:l})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Pa{constructor(){this._tap=new UA({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(l,p,C){if(!this._swipePoint)if(this._tapTime){const S=p[0],O=l.timeStamp-this._tapTime<500,U=this._tapPoint.dist(S)<30;O&&U?C.length>0&&(this._swipePoint=S,this._swipeTouch=C[0].identifier):this.reset()}else this._tap.touchstart(l,p,C)}touchmove(l,p,C){if(this._tapTime){if(this._swipePoint){if(C[0].identifier!==this._swipeTouch)return;const S=p[0],O=S.y-this._swipePoint.y;return this._swipePoint=S,l.preventDefault(),this._active=!0,{zoomDelta:O/128}}}else this._tap.touchmove(l,p,C)}touchend(l,p,C){if(this._tapTime)this._swipePoint&&C.length===0&&this.reset();else{const S=this._tap.touchend(l,p,C);S&&(this._tapTime=l.timeStamp,this._tapPoint=S)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class yh{constructor(l,p,C){this._el=l,this._mousePan=p,this._touchPan=C}enable(l){this._inertiaOptions=l||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Jh{constructor(l,p,C,S){this._pitchWithRotate=l.pitchWithRotate,this._rollEnabled=l.rollEnabled,this._mouseRotate=p,this._mousePitch=C,this._mouseRoll=S}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class zc{constructor(l,p,C,S){this._el=l,this._touchZoom=p,this._touchRotate=C,this._tapDragZoom=S,this._rotationDisabled=!1,this._enabled=!0}enable(l){this._touchZoom.enable(l),this._rotationDisabled||this._touchRotate.enable(l),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class Lu{constructor(l,p){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=l,this._options=p,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const l=this._map.getCanvasContainer();l.classList.add("maplibregl-cooperative-gestures"),this._container=P.create("div","maplibregl-cooperative-gesture-screen",l);let p=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(p=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const C=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),S=document.createElement("div");S.className="maplibregl-desktop-message",S.textContent=p,this._container.appendChild(S);const O=document.createElement("div");O.className="maplibregl-mobile-message",O.textContent=C,this._container.appendChild(O),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(P.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(l){return l[this._bypassKey]}notifyGestureBlocked(l,p){this._enabled&&(this._map.fire(new a.l("cooperativegestureprevented",{gestureType:l,originalEvent:p})),this._container.classList.add("maplibregl-show"),setTimeout((()=>{this._container.classList.remove("maplibregl-show")}),100))}}const Au=B=>B.zoom||B.drag||B.roll||B.pitch||B.rotate;class ni extends a.l{}function Ti(B){return B.panDelta&&B.panDelta.mag()||B.zoomDelta||B.bearingDelta||B.pitchDelta||B.rollDelta}class ga{constructor(l,p){this.handleWindowEvent=S=>{this.handleEvent(S,`${S.type}Window`)},this.handleEvent=(S,O)=>{if(S.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const U=S.type==="renderFrame"?void 0:S,N={needsRenderFrame:!1},Y={},re={};for(const{handlerName:pe,handler:we,allowed:Fe}of this._handlers){if(!we.isEnabled())continue;let He;if(this._blockedByActive(re,Fe,pe))we.reset();else if(we[O||S.type]){if(a.cs(S,O||S.type)){const Ze=P.mousePos(this._map.getCanvas(),S);He=we[O||S.type](S,Ze)}else if(a.ct(S,O||S.type)){const Ze=this._getMapTouches(S.touches),et=P.touchPos(this._map.getCanvas(),Ze);He=we[O||S.type](S,et,Ze)}else a.cu(O||S.type)||(He=we[O||S.type](S));this.mergeHandlerResult(N,Y,He,pe,U),He&&He.needsRenderFrame&&this._triggerRenderFrame()}(He||we.isActive())&&(re[pe]=we)}const ae={};for(const pe in this._previousActiveHandlers)re[pe]||(ae[pe]=U);this._previousActiveHandlers=re,(Object.keys(ae).length||Ti(N))&&(this._changes.push([N,Y,ae]),this._triggerRenderFrame()),(Object.keys(re).length||Ti(N))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:ge}=N;ge&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ge(this._map))},this._map=l,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Uc(l),this._bearingSnap=p.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(p);const C=this._el;this._listeners=[[C,"touchstart",{passive:!0}],[C,"touchmove",{passive:!1}],[C,"touchend",void 0],[C,"touchcancel",void 0],[C,"mousedown",void 0],[C,"mousemove",void 0],[C,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[C,"mouseover",void 0],[C,"mouseout",void 0],[C,"dblclick",void 0],[C,"click",void 0],[C,"keydown",{capture:!1}],[C,"keyup",void 0],[C,"wheel",{passive:!1}],[C,"contextmenu",void 0],[window,"blur",void 0]];for(const[S,O,U]of this._listeners)P.addEventListener(S,O,S===document?this.handleWindowEvent:this.handleEvent,U)}destroy(){for(const[l,p,C]of this._listeners)P.removeEventListener(l,p,l===document?this.handleWindowEvent:this.handleEvent,C)}_addDefaultHandlers(l){const p=this._map,C=p.getCanvasContainer();this._add("mapEvent",new Kc(p,l));const S=p.boxZoom=new Ac(p,l);this._add("boxZoom",S),l.interactive&&l.boxZoom&&S.enable();const O=p.cooperativeGestures=new Lu(p,l.cooperativeGestures);this._add("cooperativeGestures",O),l.cooperativeGestures&&O.enable();const U=new KA(p),N=new Sf(p);p.doubleClickZoom=new gh(N,U),this._add("tapZoom",U),this._add("clickZoom",N),l.interactive&&l.doubleClickZoom&&p.doubleClickZoom.enable();const Y=new Pa;this._add("tapDragZoom",Y);const re=p.touchPitch=new mh(p);this._add("touchPitch",re),l.interactive&&l.touchPitch&&p.touchPitch.enable(l.touchPitch);const ae=()=>p.project(p.getCenter()),ge=(function({enable:nt,clickTolerance:ht,aroundCenter:bt=!0,minPixelCenterThreshold:st=100,rotateDegreesPerPixelMoved:wt=.8},Yt){const jt=new LA({checkCorrectEvent:Nt=>P.mouseButton(Nt)===0&&Nt.ctrlKey||P.mouseButton(Nt)===2&&!Nt.ctrlKey});return new Qn({clickTolerance:ht,move:(Nt,qt)=>{const gn=Yt();if(bt&&Math.abs(gn.y-Nt.y)>st)return{bearingDelta:a.cq(new a.P(Nt.x,qt.y),qt,gn)};let In=(qt.x-Nt.x)*wt;return bt&&qt.y<gn.y&&(In=-In),{bearingDelta:In}},moveStateManager:jt,enable:nt,assignEvents:er})})(l,ae),pe=(function({enable:nt,clickTolerance:ht,pitchDegreesPerPixelMoved:bt=-.5}){const st=new LA({checkCorrectEvent:wt=>P.mouseButton(wt)===0&&wt.ctrlKey||P.mouseButton(wt)===2});return new Qn({clickTolerance:ht,move:(wt,Yt)=>({pitchDelta:(Yt.y-wt.y)*bt}),moveStateManager:st,enable:nt,assignEvents:er})})(l),we=(function({enable:nt,clickTolerance:ht,rollDegreesPerPixelMoved:bt=.3},st){const wt=new LA({checkCorrectEvent:Yt=>P.mouseButton(Yt)===2&&Yt.ctrlKey});return new Qn({clickTolerance:ht,move:(Yt,jt)=>{const Nt=st();let qt=(jt.x-Yt.x)*bt;return jt.y<Nt.y&&(qt=-qt),{rollDelta:qt}},moveStateManager:wt,enable:nt,assignEvents:er})})(l,ae);p.dragRotate=new Jh(l,ge,pe,we),this._add("mouseRotate",ge,["mousePitch"]),this._add("mousePitch",pe,["mouseRotate","mouseRoll"]),this._add("mouseRoll",we,["mousePitch"]),l.interactive&&l.dragRotate&&p.dragRotate.enable();const Fe=(function({enable:nt,clickTolerance:ht}){const bt=new LA({checkCorrectEvent:st=>P.mouseButton(st)===0&&!st.ctrlKey});return new Qn({clickTolerance:ht,move:(st,wt)=>({around:wt,panDelta:wt.sub(st)}),activateOnStart:!0,moveStateManager:bt,enable:nt,assignEvents:er})})(l),He=new Zm(l,p);p.dragPan=new yh(C,Fe,He),this._add("mousePan",Fe),this._add("touchPan",He,["touchZoom","touchRotate"]),l.interactive&&l.dragPan&&p.dragPan.enable(l.dragPan);const Ze=new ul,et=new Ld;p.touchZoomRotate=new zc(C,et,Ze,Y),this._add("touchRotate",Ze,["touchPan","touchZoom"]),this._add("touchZoom",et,["touchPan","touchRotate"]),l.interactive&&l.touchZoomRotate&&p.touchZoomRotate.enable(l.touchZoomRotate),this._add("blockableMapEvent",new D1(p));const rt=p.scrollZoom=new Fc(p,(()=>this._triggerRenderFrame()));this._add("scrollZoom",rt,["mousePan"]),l.interactive&&l.scrollZoom&&p.scrollZoom.enable(l.scrollZoom);const lt=p.keyboard=new fc(p);this._add("keyboard",lt),l.interactive&&l.keyboard&&p.keyboard.enable()}_add(l,p,C){this._handlers.push({handlerName:l,handler:p,allowed:C}),this._handlersById[l]=p}stop(l){if(!this._updatingCamera){for(const{handler:p}of this._handlers)p.reset();this._inertia.clear(),this._fireEvents({},{},l),this._changes=[]}}isActive(){for(const{handler:l}of this._handlers)if(l.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Au(this._eventsInProgress)||this.isZooming()}_blockedByActive(l,p,C){for(const S in l)if(S!==C&&(!p||p.indexOf(S)<0))return!0;return!1}_getMapTouches(l){const p=[];for(const C of l)this._el.contains(C.target)&&p.push(C);return p}mergeHandlerResult(l,p,C,S,O){if(!C)return;a.e(l,C);const U={handlerName:S,originalEvent:C.originalEvent||O};C.zoomDelta!==void 0&&(p.zoom=U),C.panDelta!==void 0&&(p.drag=U),C.rollDelta!==void 0&&(p.roll=U),C.pitchDelta!==void 0&&(p.pitch=U),C.bearingDelta!==void 0&&(p.rotate=U)}_applyChanges(){const l={},p={},C={};for(const[S,O,U]of this._changes)S.panDelta&&(l.panDelta=(l.panDelta||new a.P(0,0))._add(S.panDelta)),S.zoomDelta&&(l.zoomDelta=(l.zoomDelta||0)+S.zoomDelta),S.bearingDelta&&(l.bearingDelta=(l.bearingDelta||0)+S.bearingDelta),S.pitchDelta&&(l.pitchDelta=(l.pitchDelta||0)+S.pitchDelta),S.rollDelta&&(l.rollDelta=(l.rollDelta||0)+S.rollDelta),S.around!==void 0&&(l.around=S.around),S.pinchAround!==void 0&&(l.pinchAround=S.pinchAround),S.noInertia&&(l.noInertia=S.noInertia),a.e(p,O),a.e(C,U);this._updateMapTransform(l,p,C),this._changes=[]}_updateMapTransform(l,p,C){const S=this._map,O=S._getTransformForUpdate(),U=S.terrain;if(!(Ti(l)||U&&this._terrainMovement))return this._fireEvents(p,C,!0);S._stop(!0);let{panDelta:N,zoomDelta:Y,bearingDelta:re,pitchDelta:ae,rollDelta:ge,around:pe,pinchAround:we}=l;we!==void 0&&(pe=we),pe=pe||S.transform.centerPoint,U&&!O.isPointOnMapSurface(pe)&&(pe=O.centerPoint);const Fe={panDelta:N,zoomDelta:Y,rollDelta:ge,pitchDelta:ae,bearingDelta:re,around:pe};this._map.cameraHelper.useGlobeControls&&!O.isPointOnMapSurface(pe)&&(pe=O.centerPoint);const He=pe.distSqr(O.centerPoint)<.01?O.center:O.screenPointToLocation(N?pe.sub(N):pe);this._handleMapControls({terrain:U,tr:O,deltasForHelper:Fe,preZoomAroundLoc:He,combinedEventsInProgress:p,panDelta:N}),S._applyUpdatedTransform(O),this._map._update(),l.noInertia||this._inertia.record(l),this._fireEvents(p,C,!0)}_handleMapControls({terrain:l,tr:p,deltasForHelper:C,preZoomAroundLoc:S,combinedEventsInProgress:O,panDelta:U}){const N=this._map.cameraHelper;if(N.handleMapControlsRollPitchBearingZoom(C,p),l)return N.useGlobeControls?(this._terrainMovement||!O.drag&&!O.zoom||(this._terrainMovement=!0,this._map._elevationFreeze=!0),void N.handleMapControlsPan(C,p,S)):this._terrainMovement||!O.drag&&!O.zoom?void(O.drag&&this._terrainMovement&&U?p.setCenter(p.screenPointToLocation(p.centerPoint.sub(U))):N.handleMapControlsPan(C,p,S)):(this._terrainMovement=!0,this._map._elevationFreeze=!0,void N.handleMapControlsPan(C,p,S));N.handleMapControlsPan(C,p,S)}_fireEvents(l,p,C){const S=Au(this._eventsInProgress),O=Au(l),U={};for(const ge in l){const{originalEvent:pe}=l[ge];this._eventsInProgress[ge]||(U[`${ge}start`]=pe),this._eventsInProgress[ge]=l[ge]}!S&&O&&this._fireEvent("movestart",O.originalEvent);for(const ge in U)this._fireEvent(ge,U[ge]);O&&this._fireEvent("move",O.originalEvent);for(const ge in l){const{originalEvent:pe}=l[ge];this._fireEvent(ge,pe)}const N={};let Y;for(const ge in this._eventsInProgress){const{handlerName:pe,originalEvent:we}=this._eventsInProgress[ge];this._handlersById[pe].isActive()||(delete this._eventsInProgress[ge],Y=p[pe]||we,N[`${ge}end`]=Y)}for(const ge in N)this._fireEvent(ge,N[ge]);const re=Au(this._eventsInProgress),ae=(S||O)&&!re;if(ae&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const ge=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&ge.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(ge)}if(C&&ae){this._updatingCamera=!0;const ge=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),pe=we=>we!==0&&-this._bearingSnap<we&&we<this._bearingSnap;!ge||!ge.essential&&x.prefersReducedMotion?(this._map.fire(new a.l("moveend",{originalEvent:Y})),pe(this._map.getBearing())&&this._map.resetNorth()):(pe(ge.bearing||this._map.getBearing())&&(ge.bearing=0),ge.freezeElevation=!0,this._map.easeTo(ge,{originalEvent:Y})),this._updatingCamera=!1}}_fireEvent(l,p){this._map.fire(new a.l(l,p?{originalEvent:p}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((l=>{delete this._frameId,this.handleEvent(new ni("renderFrame",{timeStamp:l})),this._applyChanges()}))}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Ef extends a.E{constructor(l,p,C){super(),this._renderFrameCallback=()=>{const S=Math.min((D()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(S)),S<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=l,this._bearingSnap=C.bearingSnap,this.cameraHelper=p,this.on("moveend",(()=>{delete this._requestedCameraState}))}migrateProjection(l,p){l.apply(this.transform),this.transform=l,this.cameraHelper=p}getCenter(){return new a.U(this.transform.center.lng,this.transform.center.lat)}setCenter(l,p){return this.jumpTo({center:l},p)}getCenterElevation(){return this.transform.elevation}setCenterElevation(l,p){return this.jumpTo({elevation:l},p),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(l){this._centerClampedToGround=l}panBy(l,p,C){return l=a.P.convert(l).mult(-1),this.panTo(this.transform.center,a.e({offset:l},p),C)}panTo(l,p,C){return this.easeTo(a.e({center:l},p),C)}getZoom(){return this.transform.zoom}setZoom(l,p){return this.jumpTo({zoom:l},p),this}zoomTo(l,p,C){return this.easeTo(a.e({zoom:l},p),C)}zoomIn(l,p){return this.zoomTo(this.getZoom()+1,l,p),this}zoomOut(l,p){return this.zoomTo(this.getZoom()-1,l,p),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(l,p){return l!=this.transform.fov&&(this.transform.setFov(l),this.fire(new a.l("movestart",p)).fire(new a.l("move",p)).fire(new a.l("moveend",p))),this}getBearing(){return this.transform.bearing}setBearing(l,p){return this.jumpTo({bearing:l},p),this}getPadding(){return this.transform.padding}setPadding(l,p){return this.jumpTo({padding:l},p),this}rotateTo(l,p,C){return this.easeTo(a.e({bearing:l},p),C)}resetNorth(l,p){return this.rotateTo(0,a.e({duration:1e3},l),p),this}resetNorthPitch(l,p){return this.easeTo(a.e({bearing:0,pitch:0,roll:0,duration:1e3},l),p),this}snapToNorth(l,p){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(l,p):this}getPitch(){return this.transform.pitch}setPitch(l,p){return this.jumpTo({pitch:l},p),this}getRoll(){return this.transform.roll}setRoll(l,p){return this.jumpTo({roll:l},p),this}cameraForBounds(l,p){l=kt.convert(l).adjustAntiMeridian();const C=p&&p.bearing||0;return this._cameraForBoxAndBearing(l.getNorthWest(),l.getSouthEast(),C,p)}_cameraForBoxAndBearing(l,p,C,S){const O={top:0,bottom:0,right:0,left:0};if(typeof(S=a.e({padding:O,offset:[0,0],maxZoom:this.transform.maxZoom},S)).padding=="number"){const re=S.padding;S.padding={top:re,bottom:re,right:re,left:re}}const U=a.e(O,S.padding);S.padding=U;const N=this.transform,Y=new kt(l,p);return this.cameraHelper.cameraForBoxAndBearing(S,U,Y,C,N)}fitBounds(l,p,C){return this._fitInternal(this.cameraForBounds(l,p),p,C)}fitScreenCoordinates(l,p,C,S,O){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(a.P.convert(l)),this.transform.screenPointToLocation(a.P.convert(p)),C,S),S,O)}_fitInternal(l,p,C){return l?(delete(p=a.e(l,p)).padding,p.linear?this.easeTo(p,C):this.flyTo(p,C)):this}jumpTo(l,p){this.stop();const C=this._getTransformForUpdate();let S=!1,O=!1,U=!1;const N=C.zoom;this.cameraHelper.handleJumpToCenterZoom(C,l);const Y=C.zoom!==N;return"elevation"in l&&C.elevation!==+l.elevation&&C.setElevation(+l.elevation),"bearing"in l&&C.bearing!==+l.bearing&&(S=!0,C.setBearing(+l.bearing)),"pitch"in l&&C.pitch!==+l.pitch&&(O=!0,C.setPitch(+l.pitch)),"roll"in l&&C.roll!==+l.roll&&(U=!0,C.setRoll(+l.roll)),l.padding==null||C.isPaddingEqual(l.padding)||C.setPadding(l.padding),this._applyUpdatedTransform(C),this.fire(new a.l("movestart",p)).fire(new a.l("move",p)),Y&&this.fire(new a.l("zoomstart",p)).fire(new a.l("zoom",p)).fire(new a.l("zoomend",p)),S&&this.fire(new a.l("rotatestart",p)).fire(new a.l("rotate",p)).fire(new a.l("rotateend",p)),O&&this.fire(new a.l("pitchstart",p)).fire(new a.l("pitch",p)).fire(new a.l("pitchend",p)),U&&this.fire(new a.l("rollstart",p)).fire(new a.l("roll",p)).fire(new a.l("rollend",p)),this.fire(new a.l("moveend",p))}calculateCameraOptionsFromTo(l,p,C,S=0){const O=a.a5.fromLngLat(l,p),U=a.a5.fromLngLat(C,S),N=U.x-O.x,Y=U.y-O.y,re=U.z-O.z,ae=Math.hypot(N,Y,re);if(ae===0)throw new Error("Can't calculate camera options with same From and To");const ge=Math.hypot(N,Y),pe=a.ao(this.transform.cameraToCenterDistance/ae/this.transform.tileSize),we=180*Math.atan2(N,-Y)/Math.PI;let Fe=180*Math.acos(ge/ae)/Math.PI;return Fe=re<0?90-Fe:90+Fe,{center:U.toLngLat(),elevation:S,zoom:pe,pitch:Fe,bearing:we}}calculateCameraOptionsFromCameraLngLatAltRotation(l,p,C,S,O){const U=this.transform.calculateCenterFromCameraLngLatAlt(l,p,C,S);return{center:U.center,elevation:U.elevation,zoom:U.zoom,bearing:C,pitch:S,roll:O}}easeTo(l,p){this._stop(!1,l.easeId),((l=a.e({offset:[0,0],duration:500,easing:a.cr},l)).animate===!1||!l.essential&&x.prefersReducedMotion)&&(l.duration=0);const C=this._getTransformForUpdate(),S=this.getBearing(),O=C.pitch,U=C.roll,N="bearing"in l?this._normalizeBearing(l.bearing,S):S,Y="pitch"in l?+l.pitch:O,re="roll"in l?this._normalizeBearing(l.roll,U):U,ae="padding"in l?l.padding:C.padding,ge=a.P.convert(l.offset);let pe,we;l.around&&(pe=a.U.convert(l.around),we=C.locationToScreenPoint(pe));const Fe={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},He=this.cameraHelper.handleEaseTo(C,{bearing:N,pitch:Y,roll:re,padding:ae,around:pe,aroundPoint:we,offsetAsPoint:ge,offset:l.offset,zoom:l.zoom,center:l.center});return this._rotating=this._rotating||S!==N,this._pitching=this._pitching||Y!==O,this._rolling=this._rolling||re!==U,this._padding=!C.isPaddingEqual(ae),this._zooming=this._zooming||He.isZooming,this._easeId=l.easeId,this._prepareEase(p,l.noMoveStart,Fe),this.terrain&&this._prepareElevation(He.elevationCenter),this._ease((Ze=>{He.easeFunc(Ze),this.terrain&&!l.freezeElevation&&this._updateElevation(Ze),this._applyUpdatedTransform(C),this._fireMoveEvents(p)}),(Ze=>{this.terrain&&l.freezeElevation&&this._finalizeElevation(),this._afterEase(p,Ze)}),l),this}_prepareEase(l,p,C={}){this._moving=!0,p||C.moving||this.fire(new a.l("movestart",l)),this._zooming&&!C.zooming&&this.fire(new a.l("zoomstart",l)),this._rotating&&!C.rotating&&this.fire(new a.l("rotatestart",l)),this._pitching&&!C.pitching&&this.fire(new a.l("pitchstart",l)),this._rolling&&!C.rolling&&this.fire(new a.l("rollstart",l))}_prepareElevation(l){this._elevationCenter=l,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(l,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(l){this._elevationStart!==void 0&&this._elevationCenter!==void 0||this._prepareElevation(this.transform.center),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const p=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(l<1&&p!==this._elevationTarget){const C=this._elevationTarget-this._elevationStart;this._elevationStart+=l*(C-(p-(C*l+this._elevationStart))/(1-l)),this._elevationTarget=p}this.transform.setElevation(a.F.number(this._elevationStart,this._elevationTarget,l))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(l){if(!this.terrain&&l.elevation>=0&&l.pitch<=90)return{};const p=l.getCameraLngLat(),C=l.getCameraAltitude(),S=this.terrain?this.terrain.getElevationForLngLatZoom(p,l.zoom):0;if(C<S){const O=this.calculateCameraOptionsFromTo(p,S,l.center,l.elevation);return{pitch:O.pitch,zoom:O.zoom}}return{}}_applyUpdatedTransform(l){const p=[];if(p.push((S=>this._elevateCameraIfInsideTerrain(S))),this.transformCameraUpdate&&p.push((S=>this.transformCameraUpdate(S))),!p.length)return;const C=l.clone();for(const S of p){const O=C.clone(),{center:U,zoom:N,roll:Y,pitch:re,bearing:ae,elevation:ge}=S(O);U&&O.setCenter(U),ge!==void 0&&O.setElevation(ge),N!==void 0&&O.setZoom(N),Y!==void 0&&O.setRoll(Y),re!==void 0&&O.setPitch(re),ae!==void 0&&O.setBearing(ae),C.apply(O)}this.transform.apply(C)}_fireMoveEvents(l){this.fire(new a.l("move",l)),this._zooming&&this.fire(new a.l("zoom",l)),this._rotating&&this.fire(new a.l("rotate",l)),this._pitching&&this.fire(new a.l("pitch",l)),this._rolling&&this.fire(new a.l("roll",l))}_afterEase(l,p){if(this._easeId&&p&&this._easeId===p)return;delete this._easeId;const C=this._zooming,S=this._rotating,O=this._pitching,U=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,C&&this.fire(new a.l("zoomend",l)),S&&this.fire(new a.l("rotateend",l)),O&&this.fire(new a.l("pitchend",l)),U&&this.fire(new a.l("rollend",l)),this.fire(new a.l("moveend",l))}flyTo(l,p){if(!l.essential&&x.prefersReducedMotion){const qt=a.S(l,["center","zoom","bearing","pitch","roll","elevation","padding"]);return this.jumpTo(qt,p)}this.stop(),l=a.e({offset:[0,0],speed:1.2,curve:1.42,easing:a.cr},l);const C=this._getTransformForUpdate(),S=C.bearing,O=C.pitch,U=C.roll,N=C.padding,Y="bearing"in l?this._normalizeBearing(l.bearing,S):S,re="pitch"in l?+l.pitch:O,ae="roll"in l?this._normalizeBearing(l.roll,U):U,ge="padding"in l?l.padding:C.padding,pe=a.P.convert(l.offset);let we=C.centerPoint.add(pe);const Fe=C.screenPointToLocation(we),He=this.cameraHelper.handleFlyTo(C,{bearing:Y,pitch:re,roll:ae,padding:ge,locationAtOffset:Fe,offsetAsPoint:pe,center:l.center,minZoom:l.minZoom,zoom:l.zoom});let Ze=l.curve;const et=Math.max(C.width,C.height),rt=et/He.scaleOfZoom,lt=He.pixelPathLength;typeof He.scaleOfMinZoom=="number"&&(Ze=Math.sqrt(et/He.scaleOfMinZoom/lt*2));const nt=Ze*Ze;function ht(qt){const gn=(rt*rt-et*et+(qt?-1:1)*nt*nt*lt*lt)/(2*(qt?rt:et)*nt*lt);return Math.log(Math.sqrt(gn*gn+1)-gn)}function bt(qt){return(Math.exp(qt)-Math.exp(-qt))/2}function st(qt){return(Math.exp(qt)+Math.exp(-qt))/2}const wt=ht(!1);let Yt=function(qt){return st(wt)/st(wt+Ze*qt)},jt=function(qt){return et*((st(wt)*(bt(gn=wt+Ze*qt)/st(gn))-bt(wt))/nt)/lt;var gn},Nt=(ht(!0)-wt)/Ze;if(Math.abs(lt)<2e-6||!isFinite(Nt)){if(Math.abs(et-rt)<1e-6)return this.easeTo(l,p);const qt=rt<et?-1:1;Nt=Math.abs(Math.log(rt/et))/Ze,jt=()=>0,Yt=gn=>Math.exp(qt*Ze*gn)}return l.duration="duration"in l?+l.duration:1e3*Nt/("screenSpeed"in l?+l.screenSpeed/Ze:+l.speed),l.maxDuration&&l.duration>l.maxDuration&&(l.duration=0),this._zooming=!0,this._rotating=S!==Y,this._pitching=re!==O,this._rolling=ae!==U,this._padding=!C.isPaddingEqual(ge),this._prepareEase(p,!1),this.terrain&&this._prepareElevation(He.targetCenter),this._ease((qt=>{const gn=qt*Nt,In=1/Yt(gn),sn=jt(gn);this._rotating&&C.setBearing(a.F.number(S,Y,qt)),this._pitching&&C.setPitch(a.F.number(O,re,qt)),this._rolling&&C.setRoll(a.F.number(U,ae,qt)),this._padding&&(C.interpolatePadding(N,ge,qt),we=C.centerPoint.add(pe)),He.easeFunc(qt,In,sn,we),this.terrain&&!l.freezeElevation&&this._updateElevation(qt),this._applyUpdatedTransform(C),this._fireMoveEvents(p)}),(()=>{this.terrain&&l.freezeElevation&&this._finalizeElevation(),this._afterEase(p)}),l),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(l,p){var C;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const S=this._onEaseEnd;delete this._onEaseEnd,S.call(this,p)}return l||(C=this.handlers)===null||C===void 0||C.stop(!1),this}_ease(l,p,C){C.animate===!1||C.duration===0?(l(1),p()):(this._easeStart=D(),this._easeOptions=C,this._onEaseFrame=l,this._onEaseEnd=p,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(l,p){l=a.V(l,-180,180);const C=Math.abs(l-p);return Math.abs(l-360-p)<C&&(l-=360),Math.abs(l+360-p)<C&&(l+=360),l}queryTerrainElevation(l){return this.terrain?this.terrain.getElevationForLngLatZoom(a.U.convert(l),this.transform.tileZoom):null}}const Il={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class os{constructor(l=Il){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=p=>{!p||p.sourceDataType!=="metadata"&&p.sourceDataType!=="visibility"&&p.dataType!=="style"&&p.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=l}getDefaultPosition(){return"bottom-right"}onAdd(l){return this._map=l,this._compact=this.options.compact,this._container=P.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=P.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=P.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){P.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(l,p){const C=this._map._getUIString(`AttributionControl.${p}`);l.title=C,l.setAttribute("aria-label",C)}_updateAttributions(){if(!this._map.style)return;let l=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?l=l.concat(this.options.customAttribution.map((S=>typeof S!="string"?"":S))):typeof this.options.customAttribution=="string"&&l.push(this.options.customAttribution)),this._map.style.stylesheet){const S=this._map.style.stylesheet;this.styleOwner=S.owner,this.styleId=S.id}const p=this._map.style.tileManagers;for(const S in p){const O=p[S];if(O.used||O.usedForTerrain){const U=O.getSource();U.attribution&&l.indexOf(U.attribution)<0&&l.push(U.attribution)}}l=l.filter((S=>String(S).trim())),l.sort(((S,O)=>S.length-O.length)),l=l.filter(((S,O)=>{for(let U=O+1;U<l.length;U++)if(l[U].indexOf(S)>=0)return!1;return!0}));const C=l.join(" | ");C!==this._attribHTML&&(this._attribHTML=C,l.length?(this._innerContainer.innerHTML=P.sanitize(C),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class zA{constructor(l={}){this._updateCompact=()=>{const p=this._container.children;if(p.length){const C=p[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&C.classList.add("maplibregl-compact"):C.classList.remove("maplibregl-compact")}},this.options=l}getDefaultPosition(){return"bottom-left"}onAdd(l){this._map=l,this._compact=this.options&&this.options.compact,this._container=P.create("div","maplibregl-ctrl");const p=P.create("a","maplibregl-ctrl-logo");return p.target="_blank",p.rel="noopener nofollow",p.href="https://maplibre.org/",p.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),p.setAttribute("rel","noopener nofollow"),this._container.appendChild(p),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){P.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class hu{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(l){const p=++this._id;return this._queue.push({callback:l,id:p,cancelled:!1}),p}remove(l){const p=this._currentlyRunning,C=p?this._queue.concat(p):this._queue;for(const S of C)if(S.id===l)return void(S.cancelled=!0)}run(l=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const p=this._currentlyRunning=this._queue;this._queue=[];for(const C of p)if(!C.cancelled&&(C.callback(l),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var b0=a.aN([{name:"a_pos3d",type:"Int16",components:3}]);class jc extends a.E{constructor(l){super(),this._lastTilesetChange=D(),this.tileManager=l,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=l._source.tileSize*2**this.deltaZoom,l.usedForTerrain=!0,l.tileSize=this.tileSize}destruct(){this.tileManager.usedForTerrain=!1,this.tileManager.tileSize=null}getSource(){return this.tileManager._source}update(l,p){this.tileManager.update(l,p),this._renderableTilesKeys=[];const C={};for(const S of Zi(l,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:p,calculateTileZoom:this.tileManager._source.calculateTileZoom}))C[S.key]=!0,this._renderableTilesKeys.push(S.key),this._tiles[S.key]||(S.terrainRttPosMatrix32f=new Float64Array(16),a.c0(S.terrainRttPosMatrix32f,0,a.a3,a.a3,0,0,1),this._tiles[S.key]=new tt(S,this.tileSize),this._lastTilesetChange=D());for(const S in this._tiles)C[S]||delete this._tiles[S]}freeRtt(l){for(const p in this._tiles){const C=this._tiles[p];(!l||C.tileID.equals(l)||C.tileID.isChildOf(l)||l.isChildOf(C.tileID))&&(C.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map((l=>this.getTileByID(l)))}getTileByID(l){return this._tiles[l]}getTerrainCoords(l,p){return p?this._getTerrainCoordsForTileRanges(l,p):this._getTerrainCoordsForRegularTile(l)}_getTerrainCoordsForRegularTile(l){const p={};for(const C of this._renderableTilesKeys){const S=this._tiles[C].tileID,O=l.clone(),U=a.bd();if(S.canonical.equals(l.canonical))a.c0(U,0,a.a3,a.a3,0,0,1);else if(S.canonical.isChildOf(l.canonical)){const N=S.canonical.z-l.canonical.z,Y=S.canonical.x-(S.canonical.x>>N<<N),re=S.canonical.y-(S.canonical.y>>N<<N),ae=a.a3>>N;a.c0(U,0,ae,ae,0,0,1),a.N(U,U,[-Y*ae,-re*ae,0])}else{if(!l.canonical.isChildOf(S.canonical))continue;{const N=l.canonical.z-S.canonical.z,Y=l.canonical.x-(l.canonical.x>>N<<N),re=l.canonical.y-(l.canonical.y>>N<<N),ae=a.a3>>N;a.c0(U,0,a.a3,a.a3,0,0,1),a.N(U,U,[Y*ae,re*ae,0]),a.O(U,U,[1/2**N,1/2**N,0])}}O.terrainRttPosMatrix32f=new Float32Array(U),p[C]=O}return p}_getTerrainCoordsForTileRanges(l,p){const C={};for(const S of this._renderableTilesKeys){const O=this._tiles[S].tileID;if(!this._isWithinTileRanges(O,p))continue;const U=l.clone(),N=a.bd();if(O.canonical.z===l.canonical.z){const Y=l.canonical.x-O.canonical.x,re=l.canonical.y-O.canonical.y;a.c0(N,0,a.a3,a.a3,0,0,1),a.N(N,N,[Y*a.a3,re*a.a3,0])}else if(O.canonical.z>l.canonical.z){const Y=O.canonical.z-l.canonical.z,re=O.canonical.x-(O.canonical.x>>Y<<Y),ae=O.canonical.y-(O.canonical.y>>Y<<Y),ge=l.canonical.x-(O.canonical.x>>Y),pe=l.canonical.y-(O.canonical.y>>Y),we=a.a3>>Y;a.c0(N,0,we,we,0,0,1),a.N(N,N,[-re*we+ge*a.a3,-ae*we+pe*a.a3,0])}else{const Y=l.canonical.z-O.canonical.z,re=l.canonical.x-(l.canonical.x>>Y<<Y),ae=l.canonical.y-(l.canonical.y>>Y<<Y),ge=(l.canonical.x>>Y)-O.canonical.x,pe=(l.canonical.y>>Y)-O.canonical.y,we=a.a3<<Y;a.c0(N,0,we,we,0,0,1),a.N(N,N,[re*a.a3+ge*we,ae*a.a3+pe*we,0])}U.terrainRttPosMatrix32f=new Float32Array(N),C[S]=U}return C}getSourceTile(l,p){const C=this.tileManager._source;let S=l.overscaledZ-this.deltaZoom;if(S>C.maxzoom&&(S=C.maxzoom),S<C.minzoom)return null;this._sourceTileCache[l.key]||(this._sourceTileCache[l.key]=l.scaledTo(S).key);let O=this.tileManager.getTileByID(this._sourceTileCache[l.key]);if((!O||!O.dem)&&p)for(;S>=C.minzoom&&(!O||!O.dem);)O=this.tileManager.getTileByID(l.scaledTo(S--).key);return O}anyTilesAfterTime(l=Date.now()){return this._lastTilesetChange>=l}_isWithinTileRanges(l,p){return p[l.canonical.z]&&l.canonical.x>=p[l.canonical.z].minTileX&&l.canonical.x<=p[l.canonical.z].maxTileX&&l.canonical.y>=p[l.canonical.z].minTileY&&l.canonical.y<=p[l.canonical.z].maxTileY}}class Fu{constructor(l,p,C){this._meshCache={},this.painter=l,this.tileManager=new jc(p),this.options=C,this.exaggeration=typeof C.exaggeration=="number"?C.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(l,p,C,S=a.a3){var O;if(!(p>=0&&p<S&&C>=0&&C<S))return 0;const U=this.getTerrainData(l),N=(O=U.tile)===null||O===void 0?void 0:O.dem;if(!N)return 0;const Y=a.cv([],[p/S*a.a3,C/S*a.a3],U.u_terrain_matrix),re=[Y[0]*N.dim,Y[1]*N.dim],ae=Math.floor(re[0]),ge=Math.floor(re[1]),pe=re[0]-ae,we=re[1]-ge;return N.get(ae,ge)*(1-pe)*(1-we)+N.get(ae+1,ge)*pe*(1-we)+N.get(ae,ge+1)*(1-pe)*we+N.get(ae+1,ge+1)*pe*we}getElevationForLngLatZoom(l,p){if(!a.cw(p,l.wrap()))return 0;const{tileID:C,mercatorX:S,mercatorY:O}=this._getOverscaledTileIDFromLngLatZoom(l,p);return this.getElevation(C,S%a.a3,O%a.a3,a.a3)}getElevation(l,p,C,S=a.a3){return this.getDEMElevation(l,p,C,S)*this.exaggeration}getTerrainData(l){if(!this._emptyDemTexture){const S=this.painter.context,O=new a.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new a.T(S,O,S.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new a.T(S,new a.R({width:1,height:1}),S.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(S.gl.NEAREST,S.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=a.am([])}const p=this.tileManager.getSourceTile(l,!0);if(p&&p.dem&&(!p.demTexture||p.needsTerrainPrepare)){const S=this.painter.context;p.demTexture=this.painter.getTileTexture(p.dem.stride),p.demTexture?p.demTexture.update(p.dem.getPixels(),{premultiply:!1}):p.demTexture=new a.T(S,p.dem.getPixels(),S.gl.RGBA,{premultiply:!1}),p.demTexture.bind(S.gl.NEAREST,S.gl.CLAMP_TO_EDGE),p.needsTerrainPrepare=!1}const C=p&&p+p.tileID.key+l.key;if(C&&!this._demMatrixCache[C]){const S=this.tileManager.getSource().maxzoom;let O=l.canonical.z-p.tileID.canonical.z;l.overscaledZ>l.canonical.z&&(l.canonical.z>=S?O=l.canonical.z-S:a.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const U=l.canonical.x-(l.canonical.x>>O<<O),N=l.canonical.y-(l.canonical.y>>O<<O),Y=a.cx(new Float64Array(16),[1/(a.a3<<O),1/(a.a3<<O),0]);a.N(Y,Y,[U*a.a3,N*a.a3,0]),this._demMatrixCache[l.key]={matrix:Y,coord:l}}return{u_depth:2,u_terrain:3,u_terrain_dim:p&&p.dem&&p.dem.dim||1,u_terrain_matrix:C?this._demMatrixCache[l.key].matrix:this._emptyDemMatrix,u_terrain_unpack:p&&p.dem&&p.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(p&&p.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:p}}getFramebuffer(l){const p=this.painter,C=p.width/devicePixelRatio,S=p.height/devicePixelRatio;return!this._fbo||this._fbo.width===C&&this._fbo.height===S||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new a.T(p.context,{width:C,height:S,data:null},p.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(p.context.gl.NEAREST,p.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new a.T(p.context,{width:C,height:S,data:null},p.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(p.context.gl.NEAREST,p.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=p.context.createFramebuffer(C,S,!0,!1),this._fbo.depthAttachment.set(p.context.createRenderbuffer(p.context.gl.DEPTH_COMPONENT16,C,S))),this._fbo.colorAttachment.set(l==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const l=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const p=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let O=0,U=0;O<this._coordsTextureSize;O++)for(let N=0;N<this._coordsTextureSize;N++,U+=4)p[U+0]=255&N,p[U+1]=255&O,p[U+2]=N>>8<<4|O>>8,p[U+3]=0;const C=new a.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(p.buffer)),S=new a.T(l,C,l.gl.RGBA,{premultiply:!1});return S.bind(l.gl.NEAREST,l.gl.CLAMP_TO_EDGE),this._coordsTexture=S,S}pointCoordinate(l){this.painter.maybeDrawDepthAndCoords(!0);const p=new Uint8Array(4),C=this.painter.context,S=C.gl,O=Math.round(l.x*this.painter.pixelRatio/devicePixelRatio),U=Math.round(l.y*this.painter.pixelRatio/devicePixelRatio),N=Math.round(this.painter.height/devicePixelRatio);C.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),S.readPixels(O,N-U-1,1,1,S.RGBA,S.UNSIGNED_BYTE,p),C.bindFramebuffer.set(null);const Y=p[0]+(p[2]>>4<<8),re=p[1]+((15&p[2])<<8),ae=this.coordsIndex[255-p[3]],ge=ae&&this.tileManager.getTileByID(ae);if(!ge)return null;const pe=this._coordsTextureSize,we=(1<<ge.tileID.canonical.z)*pe;return new a.a5((ge.tileID.canonical.x*pe+Y)/we+ge.tileID.wrap,(ge.tileID.canonical.y*pe+re)/we,this.getElevation(ge.tileID,Y,re,pe))}depthAtPoint(l){const p=new Uint8Array(4),C=this.painter.context,S=C.gl;return C.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),S.readPixels(l.x,this.painter.height/devicePixelRatio-l.y-1,1,1,S.RGBA,S.UNSIGNED_BYTE,p),C.bindFramebuffer.set(null),(p[0]/16777216+p[1]/65536+p[2]/256+p[3])/256}getTerrainMesh(l){var p;const C=((p=this.painter.style.projection)===null||p===void 0?void 0:p.transitionState)>0,S=C&&l.canonical.y===0,O=C&&l.canonical.y===(1<<l.canonical.z)-1,U=`m_${S?"n":""}_${O?"s":""}`;if(this._meshCache[U])return this._meshCache[U];const N=this.painter.context,Y=new a.cy,re=new a.aR,ae=this.meshSize,ge=a.a3/ae,pe=ae*ae;for(let st=0;st<=ae;st++)for(let wt=0;wt<=ae;wt++)Y.emplaceBack(wt*ge,st*ge,0);for(let st=0;st<pe;st+=ae+1)for(let wt=0;wt<ae;wt++)re.emplaceBack(wt+st,ae+wt+st+1,ae+wt+st+2),re.emplaceBack(wt+st,ae+wt+st+2,wt+st+1);const we=Y.length,Fe=we+(ae+1),He=(ae+1)*ae,Ze=S?a.bk:0,et=S?0:1,rt=O?a.bl:a.a3,lt=O?0:1;for(let st=0;st<=ae;st++)Y.emplaceBack(st*ge,Ze,et);for(let st=0;st<=ae;st++)Y.emplaceBack(st*ge,rt,lt);for(let st=0;st<ae;st++)re.emplaceBack(He+st,Fe+st,Fe+st+1),re.emplaceBack(He+st,Fe+st+1,He+st+1),re.emplaceBack(0+st,we+st+1,we+st),re.emplaceBack(0+st,0+st+1,we+st+1);const nt=Y.length,ht=nt+2*(ae+1);for(const st of[0,1])for(let wt=0;wt<=ae;wt++)for(const Yt of[0,1])Y.emplaceBack(st*a.a3,wt*ge,Yt);for(let st=0;st<2*ae;st+=2)re.emplaceBack(nt+st,nt+st+1,nt+st+3),re.emplaceBack(nt+st,nt+st+3,nt+st+2),re.emplaceBack(ht+st,ht+st+3,ht+st+1),re.emplaceBack(ht+st,ht+st+2,ht+st+3);const bt=new Co(N.createVertexBuffer(Y,b0.members),N.createIndexBuffer(re),a.aQ.simpleSegment(0,0,Y.length,re.length));return this._meshCache[U]=bt,bt}getMeshFrameDelta(l){return 2*Math.PI*a.bx/Math.pow(2,Math.max(l,0))/5}getMinTileElevationForLngLatZoom(l,p){var C;const{tileID:S}=this._getOverscaledTileIDFromLngLatZoom(l,p);return(C=this.getMinMaxElevation(S).minElevation)!==null&&C!==void 0?C:0}getMinMaxElevation(l){const p=this.getTerrainData(l).tile,C={minElevation:null,maxElevation:null};return p&&p.dem&&(C.minElevation=p.dem.min*this.exaggeration,C.maxElevation=p.dem.max*this.exaggeration),C}_getOverscaledTileIDFromLngLatZoom(l,p){const C=a.a5.fromLngLat(l.wrap()),S=(1<<p)*a.a3,O=C.x*S,U=C.y*S,N=Math.floor(O/a.a3),Y=Math.floor(U/a.a3);return{tileID:new a.a0(p,0,p,N,Y),mercatorX:O,mercatorY:U}}}class ya{constructor(l,p,C){this._context=l,this._size=p,this._tileSize=C,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const l of this._objects)l.texture.destroy(),l.fbo.destroy()}_createObject(l){const p=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),C=new a.T(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return C.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),p.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),p.colorAttachment.set(C.texture),{id:l,fbo:p,texture:C,stamp:-1,inUse:!1}}getObjectForId(l){return this._objects[l]}useObject(l){l.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter((p=>l.id!==p)),this._recentlyUsed.push(l.id)}stampObject(l){l.stamp=++this._stamp}getOrCreateFreeObject(){for(const p of this._recentlyUsed)if(!this._objects[p].inUse)return this._objects[p];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const l=this._createObject(this._objects.length);return this._objects.push(l),l}freeObject(l){l.inUse=!1}freeAllObjects(){for(const l of this._objects)this.freeObject(l)}isFull(){return!(this._objects.length<this._size)&&this._objects.some((l=>!l.inUse))===!1}}const pc={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0,"color-relief":!0};class Zr{constructor(l,p){this.painter=l,this.terrain=p,this.pool=new ya(l.context,30,p.tileManager.tileSize*p.qualityFactor)}destruct(){this.pool.destruct()}getTexture(l){return this.pool.getObjectForId(l.rtt[this._stacks.length-1].id).texture}prepareForRender(l,p){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.tileManager.getRenderableTiles(),this._renderableLayerIds=l._order.filter((C=>!l._layers[C].isHidden(p))),this._coordsAscending={};for(const C in l.tileManagers){this._coordsAscending[C]={};const S=l.tileManagers[C].getVisibleCoordinates(),O=l.tileManagers[C].getSource(),U=O instanceof Zn?O.terrainTileRanges:null;for(const N of S){const Y=this.terrain.tileManager.getTerrainCoords(N,U);for(const re in Y)this._coordsAscending[C][re]||(this._coordsAscending[C][re]=[]),this._coordsAscending[C][re].push(Y[re])}}this._coordsAscendingStr={};for(const C of l._order){const S=l._layers[C],O=S.source;if(pc[S.type]&&!this._coordsAscendingStr[O]){this._coordsAscendingStr[O]={};for(const U in this._coordsAscending[O])this._coordsAscendingStr[O][U]=this._coordsAscending[O][U].map((N=>N.key)).sort().join()}}for(const C of this._renderableTiles)for(const S in this._coordsAscendingStr){const O=this._coordsAscendingStr[S][C.tileID.key];O&&O!==C.rttCoords[S]&&(C.rtt=[])}}renderLayer(l,p){if(l.isHidden(this.painter.transform.zoom))return!1;const C=Object.assign(Object.assign({},p),{isRenderingToTexture:!0}),S=l.type,O=this.painter,U=this._renderableLayerIds[this._renderableLayerIds.length-1]===l.id;if(pc[S]&&(this._prevType&&pc[this._prevType]||this._stacks.push([]),this._prevType=S,this._stacks[this._stacks.length-1].push(l.id),!U))return!0;if(pc[this._prevType]||pc[S]&&U){this._prevType=S;const N=this._stacks.length-1,Y=this._stacks[N]||[];for(const re of this._renderableTiles){if(this.pool.isFull()&&(xp(this.painter,this.terrain,this._rttTiles,C),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(re),re.rtt[N]){const ge=this.pool.getObjectForId(re.rtt[N].id);if(ge.stamp===re.rtt[N].stamp){this.pool.useObject(ge);continue}}const ae=this.pool.getOrCreateFreeObject();this.pool.useObject(ae),this.pool.stampObject(ae),re.rtt[N]={id:ae.id,stamp:ae.stamp},O.context.bindFramebuffer.set(ae.fbo.framebuffer),O.context.clear({color:a.bi.transparent,stencil:0}),O.currentStencilSource=void 0;for(let ge=0;ge<Y.length;ge++){const pe=O.style._layers[Y[ge]],we=pe.source?this._coordsAscending[pe.source][re.tileID.key]:[re.tileID];O.context.viewport.set([0,0,ae.fbo.width,ae.fbo.height]),O._renderTileClippingMasks(pe,we,!0),O.renderLayer(O,O.style.tileManagers[pe.source],pe,we,C),pe.source&&(re.rttCoords[pe.source]=this._coordsAscendingStr[pe.source][re.tileID.key])}}return xp(this.painter,this.terrain,this._rttTiles,C),this._rttTiles=[],this.pool.freeAllObjects(),pc[S]}return!1}}const Bi={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},zo=c,ss={hash:!1,interactive:!0,bearingSnap:7,attributionControl:Il,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:a.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,transformConstrain:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0},ed={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class td{constructor(l,p,C=!1){this.mousedown=O=>{this.startMove(O,P.mousePos(this.element,O)),P.addEventListener(window,"mousemove",this.mousemove),P.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=O=>{this.move(O,P.mousePos(this.element,O))},this.mouseup=O=>{this._rotatePitchHandler.dragEnd(O),this.offTemp()},this.touchstart=O=>{O.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=P.touchPos(this.element,O.targetTouches)[0],this.startMove(O,this._startPos),P.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),P.addEventListener(window,"touchend",this.touchend))},this.touchmove=O=>{O.targetTouches.length!==1?this.reset():(this._lastPos=P.touchPos(this.element,O.targetTouches)[0],this.move(O,this._lastPos))},this.touchend=O=>{O.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHandler.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=p;const S=new hc;this._rotatePitchHandler=new Qn({clickTolerance:3,move:(O,U)=>{const N=p.getBoundingClientRect(),Y=new a.P((N.bottom-N.top)/2,(N.right-N.left)/2);return{bearingDelta:a.cq(new a.P(O.x,U.y),U,Y),pitchDelta:C?-.5*(U.y-O.y):void 0}},moveStateManager:S,enable:!0,assignEvents:()=>{}}),this.map=l,P.addEventListener(p,"mousedown",this.mousedown),P.addEventListener(p,"touchstart",this.touchstart,{passive:!1}),P.addEventListener(p,"touchcancel",this.reset)}startMove(l,p){this._rotatePitchHandler.dragStart(l,p),P.disableDrag()}move(l,p){const C=this.map,{bearingDelta:S,pitchDelta:O}=this._rotatePitchHandler.dragMove(l,p)||{};S&&C.setBearing(C.getBearing()+S),O&&C.setPitch(C.getPitch()+O)}off(){const l=this.element;P.removeEventListener(l,"mousedown",this.mousedown),P.removeEventListener(l,"touchstart",this.touchstart,{passive:!1}),P.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),P.removeEventListener(window,"touchend",this.touchend),P.removeEventListener(l,"touchcancel",this.reset),this.offTemp()}offTemp(){P.enableDrag(),P.removeEventListener(window,"mousemove",this.mousemove),P.removeEventListener(window,"mouseup",this.mouseup),P.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),P.removeEventListener(window,"touchend",this.touchend)}}let du;function Fd(B,l,p,C=!1){if(C||!p.getCoveringTilesDetailsProvider().allowWorldCopies())return B?.wrap();const S=new a.U(B.lng,B.lat);if(B=new a.U(B.lng,B.lat),l){const O=new a.U(B.lng-360,B.lat),U=new a.U(B.lng+360,B.lat),N=p.locationToScreenPoint(B).distSqr(l);p.locationToScreenPoint(O).distSqr(l)<N?B=O:p.locationToScreenPoint(U).distSqr(l)<N&&(B=U)}for(;Math.abs(B.lng-p.center.lng)>180;){const O=p.locationToScreenPoint(B);if(O.x>=0&&O.y>=0&&O.x<=p.width&&O.y<=p.height)break;B.lng>p.center.lng?B.lng-=360:B.lng+=360}return B.lng!==S.lng&&p.isPointOnMapSurface(p.locationToScreenPoint(B))?B:S}const Nc={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function uA(B,l,p){const C=B.classList;for(const S in Nc)C.remove(`maplibregl-${p}-anchor-${S}`);C.add(`maplibregl-${p}-anchor-${l}`)}class Ip extends a.E{constructor(l){if(super(),this._onKeyPress=p=>{const C=p.code,S=p.charCode||p.keyCode;C!=="Space"&&C!=="Enter"&&S!==32&&S!==13||this.togglePopup()},this._onMapClick=p=>{const C=p.originalEvent.target,S=this._element;this._popup&&(C===S||S.contains(C))&&this.togglePopup()},this._update=p=>{if(!this._map)return;const C=this._map.loaded()&&!this._map.isMoving();(p?.type==="terrain"||p?.type==="render"&&!C)&&this._map.once("render",this._update),this._lngLat=Fd(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let S="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?S=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(S=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let O="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?O="rotateX(0deg)":this._pitchAlignment==="map"&&(O=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||p&&p.type!=="moveend"||(this._pos=this._pos.round()),P.setTransform(this._element,`${Nc[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${O} ${S}`),x.frameAsync(new AbortController).then((()=>{this._updateOpacity(p&&p.type==="moveend")})).catch((()=>{}))},this._onMove=p=>{if(!this._isDragging){const C=this._clickTolerance||this._map._clickTolerance;this._isDragging=p.point.dist(this._pointerdownPos)>=C}this._isDragging&&(this._pos=p.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.l("dragstart"))),this.fire(new a.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new a.l("dragend")),this._state="inactive"},this._addDragHandler=p=>{this._element.contains(p.originalEvent.target)&&(p.preventDefault(),this._positionDelta=p.point.sub(this._pos).add(this._offset),this._pointerdownPos=p.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=l&&l.anchor||"center",this._color=l&&l.color||"#3FB1CE",this._scale=l&&l.scale||1,this._draggable=l&&l.draggable||!1,this._clickTolerance=l&&l.clickTolerance||0,this._subpixelPositioning=l&&l.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=l&&l.rotation||0,this._rotationAlignment=l&&l.rotationAlignment||"auto",this._pitchAlignment=l&&l.pitchAlignment&&l.pitchAlignment!=="auto"?l.pitchAlignment:this._rotationAlignment,this.setOpacity(l?.opacity,l?.opacityWhenCovered),l&&l.element)this._element=l.element,this._offset=a.P.convert(l&&l.offset||[0,0]);else{this._defaultMarker=!0,this._element=P.create("div");const p=P.createNS("http://www.w3.org/2000/svg","svg"),C=41,S=27;p.setAttributeNS(null,"display","block"),p.setAttributeNS(null,"height",`${C}px`),p.setAttributeNS(null,"width",`${S}px`),p.setAttributeNS(null,"viewBox",`0 0 ${S} ${C}`);const O=P.createNS("http://www.w3.org/2000/svg","g");O.setAttributeNS(null,"stroke","none"),O.setAttributeNS(null,"stroke-width","1"),O.setAttributeNS(null,"fill","none"),O.setAttributeNS(null,"fill-rule","evenodd");const U=P.createNS("http://www.w3.org/2000/svg","g");U.setAttributeNS(null,"fill-rule","nonzero");const N=P.createNS("http://www.w3.org/2000/svg","g");N.setAttributeNS(null,"transform","translate(3.0, 29.0)"),N.setAttributeNS(null,"fill","#000000");const Y=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const et of Y){const rt=P.createNS("http://www.w3.org/2000/svg","ellipse");rt.setAttributeNS(null,"opacity","0.04"),rt.setAttributeNS(null,"cx","10.5"),rt.setAttributeNS(null,"cy","5.80029008"),rt.setAttributeNS(null,"rx",et.rx),rt.setAttributeNS(null,"ry",et.ry),N.appendChild(rt)}const re=P.createNS("http://www.w3.org/2000/svg","g");re.setAttributeNS(null,"fill",this._color);const ae=P.createNS("http://www.w3.org/2000/svg","path");ae.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),re.appendChild(ae);const ge=P.createNS("http://www.w3.org/2000/svg","g");ge.setAttributeNS(null,"opacity","0.25"),ge.setAttributeNS(null,"fill","#000000");const pe=P.createNS("http://www.w3.org/2000/svg","path");pe.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),ge.appendChild(pe);const we=P.createNS("http://www.w3.org/2000/svg","g");we.setAttributeNS(null,"transform","translate(6.0, 7.0)"),we.setAttributeNS(null,"fill","#FFFFFF");const Fe=P.createNS("http://www.w3.org/2000/svg","g");Fe.setAttributeNS(null,"transform","translate(8.0, 8.0)");const He=P.createNS("http://www.w3.org/2000/svg","circle");He.setAttributeNS(null,"fill","#000000"),He.setAttributeNS(null,"opacity","0.25"),He.setAttributeNS(null,"cx","5.5"),He.setAttributeNS(null,"cy","5.5"),He.setAttributeNS(null,"r","5.4999962");const Ze=P.createNS("http://www.w3.org/2000/svg","circle");Ze.setAttributeNS(null,"fill","#FFFFFF"),Ze.setAttributeNS(null,"cx","5.5"),Ze.setAttributeNS(null,"cy","5.5"),Ze.setAttributeNS(null,"r","5.4999962"),Fe.appendChild(He),Fe.appendChild(Ze),U.appendChild(N),U.appendChild(re),U.appendChild(ge),U.appendChild(we),U.appendChild(Fe),p.appendChild(U),p.setAttributeNS(null,"height",C*this._scale+"px"),p.setAttributeNS(null,"width",S*this._scale+"px"),this._element.appendChild(p),this._offset=a.P.convert(l&&l.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",(p=>{p.preventDefault()})),this._element.addEventListener("mousedown",(p=>{p.preventDefault()})),uA(this._element,this._anchor,"marker"),l&&l.className)for(const p of l.className.split(" "))this._element.classList.add(p);this._popup=null}addTo(l){return this.remove(),this._map=l,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",l._getUIString("Marker.Title")),this._element.hasAttribute("role")||this._element.setAttribute("role","button"),l.getCanvasContainer().appendChild(this._element),l.on("move",this._update),l.on("moveend",this._update),l.on("terrain",this._update),l.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),P.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(l){return this._lngLat=a.U.convert(l),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(l){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),l){if(!("offset"in l.options)){const S=Math.abs(13.5)/Math.SQRT2;l.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[S,-1*(38.1-13.5+S)],"bottom-right":[-S,-1*(38.1-13.5+S)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=l,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(l){return this._subpixelPositioning=l,this}getPopup(){return this._popup}togglePopup(){const l=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:l?(l.isOpen()?l.remove():(l.setLngLat(this._lngLat),l.addTo(this._map)),this):this}_updateOpacity(l=!1){var p,C;const S=(p=this._map)===null||p===void 0?void 0:p.terrain,O=this._map.transform.isLocationOccluded(this._lngLat);if(!S||O){const we=O?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==we&&(this._element.style.opacity=we))}if(l)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout((()=>{this._opacityTimeout=null}),100)}const U=this._map,N=U.terrain.depthAtPoint(this._pos),Y=U.terrain.getElevationForLngLatZoom(this._lngLat,U.transform.tileZoom);if(U.transform.lngLatToCameraDepth(this._lngLat,Y)-N<.006)return void(this._element.style.opacity=this._opacity);const re=-this._offset.y/U.transform.pixelsPerMeter,ae=Math.sin(U.getPitch()*Math.PI/180)*re,ge=U.terrain.depthAtPoint(new a.P(this._pos.x,this._pos.y-this._offset.y)),pe=U.transform.lngLatToCameraDepth(this._lngLat,Y+ae)-ge>.006;!((C=this._popup)===null||C===void 0)&&C.isOpen()&&pe&&this._popup.remove(),this._element.style.opacity=pe?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(l){return this._offset=a.P.convert(l),this._update(),this}addClassName(l){this._element.classList.add(l)}removeClassName(l){this._element.classList.remove(l)}toggleClassName(l){return this._element.classList.toggle(l)}setDraggable(l){return this._draggable=!!l,this._map&&(l?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(l){return this._rotation=l||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(l){return this._rotationAlignment=l||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(l){return this._pitchAlignment=l&&l!=="auto"?l:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(l,p){return(this._opacity===void 0||l===void 0&&p===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),l!==void 0&&(this._opacity=l),p!==void 0&&(this._opacityWhenCovered=p),this._map&&this._updateOpacity(!0),this}}const ys={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let vh=0,jA=!1;const kp={maxWidth:100,unit:"metric"};function nd(B,l,p){const C=p&&p.maxWidth||100,S=B._container.clientHeight/2,O=B._container.clientWidth/2,U=B.unproject([O-C/2,S]),N=B.unproject([O+C/2,S]),Y=Math.round(B.project(N).x-B.project(U).x),re=Math.min(C,Y,B._container.clientWidth),ae=U.distanceTo(N);if(p&&p.unit==="imperial"){const ge=3.2808*ae;ge>5280?zd(l,re,ge/5280,B._getUIString("ScaleControl.Miles")):zd(l,re,ge,B._getUIString("ScaleControl.Feet"))}else p&&p.unit==="nautical"?zd(l,re,ae/1852,B._getUIString("ScaleControl.NauticalMiles")):ae>=1e3?zd(l,re,ae/1e3,B._getUIString("ScaleControl.Kilometers")):zd(l,re,ae,B._getUIString("ScaleControl.Meters"))}function zd(B,l,p,C){const S=(function(O){const U=Math.pow(10,`${Math.floor(O)}`.length-1);let N=O/U;return N=N>=10?10:N>=5?5:N>=3?3:N>=2?2:N>=1?1:(function(Y){const re=Math.pow(10,Math.ceil(-Math.log(Y)/Math.LN10));return Math.round(Y*re)/re})(N),U*N})(p);B.style.width=l*(S/p)+"px",B.innerHTML=`${S}&nbsp;${C}`}const Bf={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},jd=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Of(B){if(B){if(typeof B=="number"){const l=Math.round(Math.abs(B)/Math.SQRT2);return{center:new a.P(0,0),top:new a.P(0,B),"top-left":new a.P(l,l),"top-right":new a.P(-l,l),bottom:new a.P(0,-B),"bottom-left":new a.P(l,-l),"bottom-right":new a.P(-l,-l),left:new a.P(B,0),right:new a.P(-B,0)}}if(B instanceof a.P||Array.isArray(B)){const l=a.P.convert(B);return{center:l,top:l,"top-left":l,"top-right":l,bottom:l,"bottom-left":l,"bottom-right":l,left:l,right:l}}return{center:a.P.convert(B.center||[0,0]),top:a.P.convert(B.top||[0,0]),"top-left":a.P.convert(B["top-left"]||[0,0]),"top-right":a.P.convert(B["top-right"]||[0,0]),bottom:a.P.convert(B.bottom||[0,0]),"bottom-left":a.P.convert(B["bottom-left"]||[0,0]),"bottom-right":a.P.convert(B["bottom-right"]||[0,0]),left:a.P.convert(B.left||[0,0]),right:a.P.convert(B.right||[0,0])}}return Of(new a.P(0,0))}const cl=c;s.AJAXError=a.cC,s.Event=a.l,s.Evented=a.E,s.LngLat=a.U,s.MercatorCoordinate=a.a5,s.Point=a.P,s.addProtocol=a.cD,s.config=a.a,s.removeProtocol=a.cE,s.AttributionControl=os,s.BoxZoomHandler=Ac,s.CanvasSource=Ot,s.CooperativeGesturesHandler=Lu,s.DoubleClickZoomHandler=gh,s.DragPanHandler=yh,s.DragRotateHandler=Jh,s.EdgeInsets=uo,s.FullscreenControl=class extends a.E{constructor(B={}){super(),this._onFullscreenChange=()=>{var l;let p=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((l=p?.shadowRoot)===null||l===void 0)&&l.fullscreenElement;)p=p.shadowRoot.fullscreenElement;p===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,B&&B.container&&(B.container instanceof HTMLElement?this._container=B.container:a.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(B){return this._map=B,this._container||(this._container=this._map.getContainer()),this._controlContainer=P.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){P.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const B=this._fullscreenButton=P.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);P.create("span","maplibregl-ctrl-icon",B).setAttribute("aria-hidden","true"),B.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const B=this._getTitle();this._fullscreenButton.setAttribute("aria-label",B),this._fullscreenButton.title=B}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new a.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new a.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},s.GeoJSONSource=xn,s.GeolocateControl=class extends a.E{constructor(B){super(),this._onSuccess=l=>{if(this._map){if(this._isOutOfMapMaxBounds(l))return this._setErrorState(),this.fire(new a.l("outofmaxbounds",l)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=l,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(l),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(l),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new a.l("geolocate",l)),this._finish()}},this._updateCamera=l=>{const p=new a.U(l.coords.longitude,l.coords.latitude),C=l.coords.accuracy,S=this._map.getBearing(),O=a.e({bearing:S},this.options.fitBoundsOptions),U=kt.fromLngLat(p,C);this._map.fitBounds(U,O,{geolocateSource:!0})},this._updateMarker=l=>{if(l){const p=new a.U(l.coords.longitude,l.coords.latitude);this._accuracyCircleMarker.setLngLat(p).addTo(this._map),this._userLocationDotMarker.setLngLat(p).addTo(this._map),this._accuracy=l.coords.accuracy,this._updateCircleRadiusIfNeeded()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onUpdate=()=>{this._updateCircleRadiusIfNeeded()},this._onError=l=>{if(this._map){if(l.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const p=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=p,this._geolocateButton.setAttribute("aria-label",p),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(l.code===3&&jA)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new a.l("error",l)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",(l=>l.preventDefault())),this._geolocateButton=P.create("button","maplibregl-ctrl-geolocate",this._container),P.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=l=>{if(this._map){if(l===!1){a.w("Geolocation support is not available so the GeolocateControl will be disabled.");const p=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=p,this._geolocateButton.setAttribute("aria-label",p)}else{const p=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=p,this._geolocateButton.setAttribute("aria-label",p)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=P.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Ip({element:this._dotElement}),this._circleElement=P.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Ip({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onUpdate),this._map.on("move",this._onUpdate),this._map.on("rotate",this._onUpdate),this._map.on("pitch",this._onUpdate)),this._geolocateButton.addEventListener("click",(()=>this.trigger())),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(p=>{const C=p?.[0]instanceof ResizeObserverEntry;p.geolocateSource||this._watchState!=="ACTIVE_LOCK"||C||this._map.isZooming()||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new a.l("trackuserlocationend")),this.fire(new a.l("userlocationlostfocus")))}))}},this.options=a.e({},ys,B)}onAdd(B){return this._map=B,this._container=P.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),(function(){return a._(this,arguments,void 0,(function*(l=!1){if(du!==void 0&&!l)return du;if(window.navigator.permissions===void 0)return du=!!window.navigator.geolocation,du;try{du=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{du=!!window.navigator.geolocation}return du}))})().then((l=>this._finishSetupUI(l))),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),P.remove(this._container),this._map.off("zoom",this._onUpdate),this._map.off("move",this._onUpdate),this._map.off("rotate",this._onUpdate),this._map.off("pitch",this._onUpdate),this._map=void 0,vh=0,jA=!1}_isOutOfMapMaxBounds(B){const l=this._map.getMaxBounds(),p=B.coords;return l&&(p.longitude<l.getWest()||p.longitude>l.getEast()||p.latitude<l.getSouth()||p.latitude>l.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":case"BACKGROUND_ERROR":case"OFF":case void 0:break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadiusIfNeeded(){const B=this._userLocationDotMarker.getLngLat();if(!(this.options.showUserLocation&&this.options.showAccuracyCircle&&this._accuracy&&B))return;const l=this._map.project(B),p=this._map.unproject([l.x+100,l.y]),C=B.distanceTo(p)/100,S=2*this._accuracy/C;this._circleElement.style.width=`${S.toFixed(2)}px`,this._circleElement.style.height=`${S.toFixed(2)}px`}trigger(){if(!this._setup)return a.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":vh--,jA=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new a.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.l("trackuserlocationstart")),this.fire(new a.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let B;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),vh++,vh>1?(B={maximumAge:6e5,timeout:0},jA=!0):(B=this.options.positionOptions,jA=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,B)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},s.GlobeControl=class{constructor(){this._toggleProjection=()=>{var B;const l=(B=this._map.getProjection())===null||B===void 0?void 0:B.type;this._map.setProjection(l!=="mercator"&&l?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var B;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((B=this._map.getProjection())===null||B===void 0?void 0:B.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(B){return this._map=B,this._container=P.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=P.create("button","maplibregl-ctrl-globe",this._container),P.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){P.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},s.Hash=Ha,s.ImageSource=Zn,s.KeyboardHandler=fc,s.LngLatBounds=kt,s.LogoControl=zA,s.Map=class extends Ef{constructor(B){var l,p;a.cz.mark(a.cA.create);const C=Object.assign(Object.assign(Object.assign({},ss),B),{canvasContextAttributes:Object.assign(Object.assign({},ss.canvasContextAttributes),B.canvasContextAttributes)});if(C.minZoom!=null&&C.maxZoom!=null&&C.minZoom>C.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(C.minPitch!=null&&C.maxPitch!=null&&C.minPitch>C.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(C.minPitch!=null&&C.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(C.maxPitch!=null&&C.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const S=new Ta,O=new ye;if(C.minZoom!==void 0&&S.setMinZoom(C.minZoom),C.maxZoom!==void 0&&S.setMaxZoom(C.maxZoom),C.minPitch!==void 0&&S.setMinPitch(C.minPitch),C.maxPitch!==void 0&&S.setMaxPitch(C.maxPitch),C.renderWorldCopies!==void 0&&S.setRenderWorldCopies(C.renderWorldCopies),C.transformConstrain!==null&&S.setConstrain(C.transformConstrain),super(S,O,{bearingSnap:C.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new hu,this._controls=[],this._mapId=a.ab(),this._contextLost=N=>{N.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new a.l("webglcontextlost",{originalEvent:N}))},this._contextRestored=N=>{this._setupPainter(),this.resize(),this._update(),this.fire(new a.l("webglcontextrestored",{originalEvent:N}))},this._onMapScroll=N=>{if(N.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=C.interactive,this._maxTileCacheSize=C.maxTileCacheSize,this._maxTileCacheZoomLevels=C.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},C.canvasContextAttributes),this._trackResize=C.trackResize===!0,this._bearingSnap=C.bearingSnap,this._centerClampedToGround=C.centerClampedToGround,this._refreshExpiredTiles=C.refreshExpiredTiles===!0,this._fadeDuration=C.fadeDuration,this._crossSourceCollisions=C.crossSourceCollisions===!0,this._collectResourceTiming=C.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},Bi),C.locale),this._clickTolerance=C.clickTolerance,this._overridePixelRatio=C.pixelRatio,this._maxCanvasSize=C.maxCanvasSize,this.transformCameraUpdate=C.transformCameraUpdate,this.transformConstrain=C.transformConstrain,this.cancelPendingTileRequestsWhileZooming=C.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=Z.addThrottleControl((()=>this.isMoving())),this._requestManager=new G(C.transformRequest),typeof C.container=="string"){if(this._container=document.getElementById(C.container),!this._container)throw new Error(`Container '${C.container}' not found.`)}else{if(!(C.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=C.container}if(C.maxBounds&&this.setMaxBounds(C.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),this.on("terrain",(()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)})),this.once("idle",(()=>{this._idleTriggered=!0})),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let N=!1;const Y=fh((re=>{this._trackResize&&!this._removed&&(this.resize(re),this.redraw())}),50);this._resizeObserver=new ResizeObserver((re=>{N?Y(re):N=!0})),this._resizeObserver.observe(this._container)}this.handlers=new ga(this,C),this._hash=C.hash&&new Ha(typeof C.hash=="string"&&C.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:C.center,elevation:C.elevation,zoom:C.zoom,bearing:C.bearing,pitch:C.pitch,roll:C.roll}),C.bounds&&(this.resize(),this.fitBounds(C.bounds,a.e({},C.fitBoundsOptions,{duration:0}))));const U=typeof C.style=="string"||((p=(l=C.style)===null||l===void 0?void 0:l.projection)===null||p===void 0?void 0:p.type)!=="globe";this.resize(null,U),this._localIdeographFontFamily=C.localIdeographFontFamily,this._validateStyle=C.validateStyle,C.style&&this.setStyle(C.style,{localIdeographFontFamily:C.localIdeographFontFamily}),C.attributionControl&&this.addControl(new os(typeof C.attributionControl=="boolean"?void 0:C.attributionControl)),C.maplibreLogo&&this.addControl(new zA,C.logoPosition),this.on("style.load",(()=>{if(U||this._resizeTransform(),this.transform.unmodified){const N=a.S(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(N)}})),this.on("data",(N=>{this._update(N.dataType==="style"),this.fire(new a.l(`${N.dataType}data`,N))})),this.on("dataloading",(N=>{this.fire(new a.l(`${N.dataType}dataloading`,N))})),this.on("dataabort",(N=>{this.fire(new a.l("sourcedataabort",N))}))}_getMapId(){return this._mapId}setGlobalStateProperty(B,l){return this.style.setGlobalStateProperty(B,l),this._update(!0)}getGlobalState(){return this.style.getGlobalState()}addControl(B,l){if(l===void 0&&(l=B.getDefaultPosition?B.getDefaultPosition():"top-right"),!B||!B.onAdd)return this.fire(new a.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const p=B.onAdd(this);this._controls.push(B);const C=this._controlPositions[l];return l.indexOf("bottom")!==-1?C.insertBefore(p,C.firstChild):C.appendChild(p),this}removeControl(B){if(!B||!B.onRemove)return this.fire(new a.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const l=this._controls.indexOf(B);return l>-1&&this._controls.splice(l,1),B.onRemove(this),this}hasControl(B){return this._controls.indexOf(B)>-1}coveringTiles(B){return Zi(this.transform,B)}calculateCameraOptionsFromTo(B,l,p,C){return C==null&&this.terrain&&(C=this.terrain.getElevationForLngLatZoom(p,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(B,l,p,C)}resize(B,l=!0){const[p,C]=this._containerDimensions(),S=this._getClampedPixelRatio(p,C);if(this._resizeCanvas(p,C,S),this.painter.resize(p,C,S),this.painter.overLimit()){const U=this.painter.context.gl;this._maxCanvasSize=[U.drawingBufferWidth,U.drawingBufferHeight];const N=this._getClampedPixelRatio(p,C);this._resizeCanvas(p,C,N),this.painter.resize(p,C,N)}this._resizeTransform(l);const O=!this._moving;return O&&(this.stop(),this.fire(new a.l("movestart",B)).fire(new a.l("move",B))),this.fire(new a.l("resize",B)),O&&this.fire(new a.l("moveend",B)),this}_resizeTransform(B=!0){var l;const[p,C]=this._containerDimensions();this.transform.resize(p,C,B),(l=this._requestedCameraState)===null||l===void 0||l.resize(p,C,B)}_getClampedPixelRatio(B,l){const{0:p,1:C}=this._maxCanvasSize,S=this.getPixelRatio(),O=B*S,U=l*S;return Math.min(O>p?p/O:1,U>C?C/U:1)*S}getPixelRatio(){var B;return(B=this._overridePixelRatio)!==null&&B!==void 0?B:devicePixelRatio}setPixelRatio(B){this._overridePixelRatio=B,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(B){return this.transform.setMaxBounds(kt.convert(B)),this._update()}setMinZoom(B){if((B=B??-2)>=-2&&B<=this.transform.maxZoom)return this.transform.setMinZoom(B),this._update(),this.getZoom()<B&&this.setZoom(B),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(B){if((B=B??22)>=this.transform.minZoom)return this.transform.setMaxZoom(B),this._update(),this.getZoom()>B&&this.setZoom(B),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(B){if((B=B??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(B>=0&&B<=this.transform.maxPitch)return this.transform.setMinPitch(B),this._update(),this.getPitch()<B&&this.setPitch(B),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(B){if((B=B??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(B>=this.transform.minPitch)return this.transform.setMaxPitch(B),this._update(),this.getPitch()>B&&this.setPitch(B),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(B){return this.transform.setRenderWorldCopies(B),this._update()}setTransformConstrain(B){return this.transform.setConstrain(B),this._update()}project(B){return this.transform.locationToScreenPoint(a.U.convert(B),this.style&&this.terrain)}unproject(B){return this.transform.screenPointToLocation(a.P.convert(B),this.terrain)}isMoving(){var B;return this._moving||((B=this.handlers)===null||B===void 0?void 0:B.isMoving())}isZooming(){var B;return this._zooming||((B=this.handlers)===null||B===void 0?void 0:B.isZooming())}isRotating(){var B;return this._rotating||((B=this.handlers)===null||B===void 0?void 0:B.isRotating())}_createDelegatedListener(B,l,p){if(B==="mouseenter"||B==="mouseover"){let C=!1;return{layers:l,listener:p,delegates:{mousemove:O=>{const U=l.filter((Y=>this.getLayer(Y))),N=U.length!==0?this.queryRenderedFeatures(O.point,{layers:U}):[];N.length?C||(C=!0,p.call(this,new ql(B,this,O.originalEvent,{features:N}))):C=!1},mouseout:()=>{C=!1}}}}if(B==="mouseleave"||B==="mouseout"){let C=!1;return{layers:l,listener:p,delegates:{mousemove:U=>{const N=l.filter((Y=>this.getLayer(Y)));(N.length!==0?this.queryRenderedFeatures(U.point,{layers:N}):[]).length?C=!0:C&&(C=!1,p.call(this,new ql(B,this,U.originalEvent)))},mouseout:U=>{C&&(C=!1,p.call(this,new ql(B,this,U.originalEvent)))}}}}{const C=S=>{const O=l.filter((N=>this.getLayer(N))),U=O.length!==0?this.queryRenderedFeatures(S.point,{layers:O}):[];U.length&&(S.features=U,p.call(this,S),delete S.features)};return{layers:l,listener:p,delegates:{[B]:C}}}}_saveDelegatedListener(B,l){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[B]=this._delegatedListeners[B]||[],this._delegatedListeners[B].push(l)}_removeDelegatedListener(B,l,p){if(!this._delegatedListeners||!this._delegatedListeners[B])return;const C=this._delegatedListeners[B];for(let S=0;S<C.length;S++){const O=C[S];if(O.listener===p&&O.layers.length===l.length&&O.layers.every((U=>l.includes(U)))){for(const U in O.delegates)this.off(U,O.delegates[U]);return void C.splice(S,1)}}}on(B,l,p){if(p===void 0)return super.on(B,l);const C=typeof l=="string"?[l]:l,S=this._createDelegatedListener(B,C,p);this._saveDelegatedListener(B,S);for(const O in S.delegates)this.on(O,S.delegates[O]);return{unsubscribe:()=>{this._removeDelegatedListener(B,C,p)}}}once(B,l,p){if(p===void 0)return super.once(B,l);const C=typeof l=="string"?[l]:l,S=this._createDelegatedListener(B,C,p);for(const O in S.delegates){const U=S.delegates[O];S.delegates[O]=(...N)=>{this._removeDelegatedListener(B,C,p),U(...N)}}this._saveDelegatedListener(B,S);for(const O in S.delegates)this.once(O,S.delegates[O]);return this}off(B,l,p){return p===void 0?super.off(B,l):(this._removeDelegatedListener(B,typeof l=="string"?[l]:l,p),this)}queryRenderedFeatures(B,l){if(!this.style)return[];let p;const C=B instanceof a.P||Array.isArray(B),S=C?B:[[0,0],[this.transform.width,this.transform.height]];if(l=l||(C?{}:B)||{},S instanceof a.P||typeof S[0]=="number")p=[a.P.convert(S)];else{const O=a.P.convert(S[0]),U=a.P.convert(S[1]);p=[O,new a.P(U.x,O.y),U,new a.P(O.x,U.y),O]}return this.style.queryRenderedFeatures(p,l,this.transform)}querySourceFeatures(B,l){return this.style.querySourceFeatures(B,l)}setStyle(B,l){return(l=a.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},l)).diff!==!1&&l.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&B?(this._diffStyle(B,l),this):(this._localIdeographFontFamily=l.localIdeographFontFamily,this._updateStyle(B,l))}setTransformRequest(B){return this._requestManager.setTransformRequest(B),this}_getUIString(B){const l=this._locale[B];if(l==null)throw new Error(`Missing UI string '${B}'`);return l}_updateStyle(B,l){var p,C;if(l.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",(()=>this._updateStyle(B,l)));const S=this.style&&l.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!B)),B?(this.style=new dp(this,l||{}),this.style.setEventedParent(this,{style:this.style}),typeof B=="string"?this.style.loadURL(B,l,S):this.style.loadJSON(B,l,S),this):((C=(p=this.style)===null||p===void 0?void 0:p.projection)===null||C===void 0||C.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new dp(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(B,l){if(typeof B=="string"){const p=this._requestManager.transformRequest(B,"Style");a.j(p,new AbortController).then((C=>{this._updateDiff(C.data,l)})).catch((C=>{C&&this.fire(new a.k(C))}))}else typeof B=="object"&&this._updateDiff(B,l)}_updateDiff(B,l){try{this.style.setState(B,l)&&this._update(!0)}catch(p){a.w(`Unable to perform style diff: ${p.message||p.error||p}.  Rebuilding the style from scratch.`),this._updateStyle(B,l)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():a.w("There is no style added to the map.")}addSource(B,l){return this._lazyInitEmptyStyle(),this.style.addSource(B,l),this._update(!0)}isSourceLoaded(B){const l=this.style&&this.style.tileManagers[B];if(l!==void 0)return l.loaded();this.fire(new a.k(new Error(`There is no tile manager with ID '${B}'`)))}setTerrain(B){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),B){const l=this.style.tileManagers[B.source];if(!l)throw new Error(`cannot load terrain, because there exists no source with ID: ${B.source}`);this.terrain===null&&l.reload();for(const p in this.style._layers){const C=this.style._layers[p];C.type==="hillshade"&&C.source===B.source&&a.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality."),C.type==="color-relief"&&C.source===B.source&&a.w("You are using the same source for a color-relief layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Fu(this.painter,l,B),this.painter.renderToTexture=new Zr(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=p=>{var C;p.dataType==="style"?this.terrain.tileManager.freeRtt():p.dataType==="source"&&p.tile&&(p.sourceId!==B.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((C=p.source)===null||C===void 0?void 0:C.type)==="image"?this.terrain.tileManager.freeRtt():this.terrain.tileManager.freeRtt(p.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.tileManager.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new a.l("terrain",{terrain:B})),this}getTerrain(){var B,l;return(l=(B=this.terrain)===null||B===void 0?void 0:B.options)!==null&&l!==void 0?l:null}areTilesLoaded(){const B=this.style&&this.style.tileManagers;for(const l in B){const p=B[l]._tiles;for(const C in p){const S=p[C];if(S.state!=="loaded"&&S.state!=="errored")return!1}}return!0}removeSource(B){return this.style.removeSource(B),this._update(!0)}getSource(B){return this.style.getSource(B)}setSourceTileLodParams(B,l,p){if(p){const C=this.getSource(p);if(!C)throw new Error(`There is no source with ID "${p}", cannot set LOD parameters`);C.calculateTileZoom=Dn(Math.max(1,B),Math.max(1,l))}else for(const C in this.style.tileManagers)this.style.tileManagers[C].getSource().calculateTileZoom=Dn(Math.max(1,B),Math.max(1,l));return this._update(!0),this}refreshTiles(B,l){const p=this.style.tileManagers[B];if(!p)throw new Error(`There is no tile manager with ID "${B}", cannot refresh tile`);l===void 0?p.reload(!0):p.refreshTiles(l.map((C=>new a.a8(C.z,C.x,C.y))))}addImage(B,l,p={}){const{pixelRatio:C=1,sdf:S=!1,stretchX:O,stretchY:U,content:N,textFitWidth:Y,textFitHeight:re}=p;if(this._lazyInitEmptyStyle(),!(l instanceof HTMLImageElement||a.b(l))){if(l.width===void 0||l.height===void 0)return this.fire(new a.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:ae,height:ge,data:pe}=l,we=l;return this.style.addImage(B,{data:new a.R({width:ae,height:ge},new Uint8Array(pe)),pixelRatio:C,stretchX:O,stretchY:U,content:N,textFitWidth:Y,textFitHeight:re,sdf:S,version:0,userImage:we}),we.onAdd&&we.onAdd(this,B),this}}{const{width:ae,height:ge,data:pe}=x.getImageData(l);this.style.addImage(B,{data:new a.R({width:ae,height:ge},pe),pixelRatio:C,stretchX:O,stretchY:U,content:N,textFitWidth:Y,textFitHeight:re,sdf:S,version:0})}}updateImage(B,l){const p=this.style.getImage(B);if(!p)return this.fire(new a.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const C=l instanceof HTMLImageElement||a.b(l)?x.getImageData(l):l,{width:S,height:O,data:U}=C;if(S===void 0||O===void 0)return this.fire(new a.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(S!==p.data.width||O!==p.data.height)return this.fire(new a.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const N=!(l instanceof HTMLImageElement||a.b(l));return p.data.replace(U,N),this.style.updateImage(B,p),this}getImage(B){return this.style.getImage(B)}hasImage(B){return B?!!this.style.getImage(B):(this.fire(new a.k(new Error("Missing required image id"))),!1)}removeImage(B){this.style.removeImage(B)}loadImage(B){return Z.getImage(this._requestManager.transformRequest(B,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(B,l){return this._lazyInitEmptyStyle(),this.style.addLayer(B,l),this._update(!0)}moveLayer(B,l){return this.style.moveLayer(B,l),this._update(!0)}removeLayer(B){return this.style.removeLayer(B),this._update(!0)}getLayer(B){return this.style.getLayer(B)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(B,l,p){return this.style.setLayerZoomRange(B,l,p),this._update(!0)}setFilter(B,l,p={}){return this.style.setFilter(B,l,p),this._update(!0)}getFilter(B){return this.style.getFilter(B)}setPaintProperty(B,l,p,C={}){return this.style.setPaintProperty(B,l,p,C),this._update(!0)}getPaintProperty(B,l){return this.style.getPaintProperty(B,l)}setLayoutProperty(B,l,p,C={}){return this.style.setLayoutProperty(B,l,p,C),this._update(!0)}getLayoutProperty(B,l){return this.style.getLayoutProperty(B,l)}setGlyphs(B,l={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(B,l),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(B,l,p={}){return this._lazyInitEmptyStyle(),this.style.addSprite(B,l,p,(C=>{C||this._update(!0)})),this}removeSprite(B){return this._lazyInitEmptyStyle(),this.style.removeSprite(B),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(B,l={}){return this._lazyInitEmptyStyle(),this.style.setSprite(B,l,(p=>{p||this._update(!0)})),this}setLight(B,l={}){return this._lazyInitEmptyStyle(),this.style.setLight(B,l),this._update(!0)}getLight(){return this.style.getLight()}setSky(B,l={}){return this._lazyInitEmptyStyle(),this.style.setSky(B,l),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(B,l){return this.style.setFeatureState(B,l),this._update()}removeFeatureState(B,l){return this.style.removeFeatureState(B,l),this._update()}getFeatureState(B){return this.style.getFeatureState(B)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let B=0,l=0;return this._container&&(B=this._container.clientWidth||400,l=this._container.clientHeight||300),[B,l]}_setupContainer(){const B=this._container;B.classList.add("maplibregl-map");const l=this._canvasContainer=P.create("div","maplibregl-canvas-container",B);this._interactive&&l.classList.add("maplibregl-interactive"),this._canvas=P.create("canvas","maplibregl-canvas",l),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const p=this._containerDimensions(),C=this._getClampedPixelRatio(p[0],p[1]);this._resizeCanvas(p[0],p[1],C);const S=this._controlContainer=P.create("div","maplibregl-control-container",B),O=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((U=>{O[U]=P.create("div",`maplibregl-ctrl-${U} `,S)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(B,l,p){this._canvas.width=Math.floor(p*B),this._canvas.height=Math.floor(p*l),this._canvas.style.width=`${B}px`,this._canvas.style.height=`${l}px`}_setupPainter(){const B=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let l=null;this._canvas.addEventListener("webglcontextcreationerror",(C=>{l={requestedAttributes:B},C&&(l.statusMessage=C.statusMessage,l.type=C.type)}),{once:!0});let p=null;if(p=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,B):this._canvas.getContext("webgl2",B)||this._canvas.getContext("webgl",B),!p){const C="Failed to initialize WebGL";throw l?(l.message=C,new Error(JSON.stringify(l))):new Error(C)}this.painter=new Mp(p,this.transform),F.testSupport(p)}migrateProjection(B,l){super.migrateProjection(B,l),this.painter.transform=B,this.fire(new a.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(B){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||B,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(B){return this._update(),this._renderTaskQueue.add(B)}_cancelRenderFrame(B){this._renderTaskQueue.remove(B)}_render(B){var l,p,C,S,O;const U=this._idleTriggered?this._fadeDuration:0,N=((l=this.style.projection)===null||l===void 0?void 0:l.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(B),this._removed)return;let Y=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const ge=this.transform.zoom,pe=D();this.style.zoomHistory.update(ge,pe);const we=new a.G(ge,{now:pe,fadeDuration:U,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Fe=we.crossFadingFactor();Fe===1&&Fe===this._crossFadingFactor||(Y=!0,this._crossFadingFactor=Fe),this.style.update(we)}const re=((p=this.style.projection)===null||p===void 0?void 0:p.transitionState)>0!==N;(C=this.style.projection)===null||C===void 0||C.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((S=this.style.projection)===null||S===void 0?void 0:S.transitionState,(O=this.style.projection)===null||O===void 0?void 0:O.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||re)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.tileManager.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,U,this._crossSourceCollisions,re),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:U,showPadding:this.showPadding}),this.fire(new a.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,a.cz.mark(a.cA.load),this.fire(new a.l("load"))),this.style&&(this.style.hasTransitions()||Y)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const ae=this._sourcesDirty||this._styleDirty||this._placementDirty;return ae||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new a.l("idle")),!this._loaded||this._fullyLoaded||ae||(this._fullyLoaded=!0,a.cz.mark(a.cA.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var B;this._hash&&this._hash.remove();for(const p of this._controls)p.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),Z.removeThrottleControl(this._imageQueueHandle),(B=this._resizeObserver)===null||B===void 0||B.disconnect();const l=this.painter.context.gl.getExtension("WEBGL_lose_context");l?.loseContext&&l.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),P.remove(this._canvasContainer),P.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),a.cz.clearMetrics(),this._removed=!0,this.fire(new a.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,x.frame(this._frameRequest,(B=>{a.cz.frame(B),this._frameRequest=null;try{this._render(B)}catch(l){if(!a.cB(l)&&!(function(p){return p.message===Td})(l))throw l}}),(()=>{})))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(B){this._showTileBoundaries!==B&&(this._showTileBoundaries=B,this._update())}get showPadding(){return!!this._showPadding}set showPadding(B){this._showPadding!==B&&(this._showPadding=B,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(B){this._showCollisionBoxes!==B&&(this._showCollisionBoxes=B,B?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(B){this._showOverdrawInspector!==B&&(this._showOverdrawInspector=B,this._update())}get repaint(){return!!this._repaint}set repaint(B){this._repaint!==B&&(this._repaint=B,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(B){this._vertices=B,this._update()}get version(){return zo}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(B){return this._lazyInitEmptyStyle(),this.style.setProjection(B),this._update(!0)}},s.MapMouseEvent=ql,s.MapTouchEvent=Da,s.MapWheelEvent=Ud,s.Marker=Ip,s.NavigationControl=class{constructor(B){this._updateZoomButtons=()=>{const l=this._map.getZoom(),p=l===this._map.getMaxZoom(),C=l===this._map.getMinZoom();this._zoomInButton.disabled=p,this._zoomOutButton.disabled=C,this._zoomInButton.setAttribute("aria-disabled",p.toString()),this._zoomOutButton.setAttribute("aria-disabled",C.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(l,p)=>{const C=this._map._getUIString(`NavigationControl.${p}`);l.title=C,l.setAttribute("aria-label",C)},this.options=a.e({},ed,B),this._container=P.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",(l=>l.preventDefault())),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",(l=>this._map.zoomIn({},{originalEvent:l}))),P.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",(l=>this._map.zoomOut({},{originalEvent:l}))),P.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",(l=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:l}):this._map.resetNorth({},{originalEvent:l})})),this._compassIcon=P.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(B){return this._map=B,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new td(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){P.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(B,l){const p=P.create("button",B,this._container);return p.type="button",p.addEventListener("click",l),p}},s.Popup=class extends a.E{constructor(B){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:"")},this.remove=()=>(this._content&&P.remove(this._content),this._container&&(P.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new a.l("close"))),this),this._onMouseUp=l=>{this._update(l.point)},this._onMouseMove=l=>{this._update(l.point)},this._onDrag=l=>{this._update(l.point)},this._update=l=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=P.create("div","maplibregl-popup",this._map.getContainer()),this._tip=P.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const U of this.options.className.split(" "))this._container.classList.add(U);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=Fd(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!l)return;const p=this._flatPos=this._pos=this._trackPointer&&l?l:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&l?l:this._map.transform.locationToScreenPoint(this._lngLat));let C=this.options.anchor;const S=Of(this.options.offset);if(!C){const U=this._container.offsetWidth,N=this._container.offsetHeight;let Y;Y=p.y+S.bottom.y<N?["top"]:p.y>this._map.transform.height-N?["bottom"]:[],p.x<U/2?Y.push("left"):p.x>this._map.transform.width-U/2&&Y.push("right"),C=Y.length===0?"bottom":Y.join("-")}let O=p.add(S[C]);this.options.subpixelPositioning||(O=O.round()),P.setTransform(this._container,`${Nc[C]} translate(${O.x}px,${O.y}px)`),uA(this._container,C,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=a.e(Object.create(Bf),B)}addTo(B){return this._map&&this.remove(),this._map=B,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new a.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(B){return this._lngLat=a.U.convert(B),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(B){return this.setDOMContent(document.createTextNode(B))}setHTML(B){const l=document.createDocumentFragment(),p=document.createElement("body");let C;for(p.innerHTML=B;C=p.firstChild,C;)l.appendChild(C);return this.setDOMContent(l)}getMaxWidth(){var B;return(B=this._container)===null||B===void 0?void 0:B.style.maxWidth}setMaxWidth(B){return this.options.maxWidth=B,this._update(),this}setDOMContent(B){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=P.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(B),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(B){return this._container&&this._container.classList.add(B),this}removeClassName(B){return this._container&&this._container.classList.remove(B),this}setOffset(B){return this.options.offset=B,this._update(),this}toggleClassName(B){if(this._container)return this._container.classList.toggle(B)}setSubpixelPositioning(B){this.options.subpixelPositioning=B}_createCloseButton(){this.options.closeButton&&(this._closeButton=P.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const B=this._container.querySelector(jd);B&&B.focus()}},s.RasterDEMTileSource=_i,s.RasterTileSource=Wn,s.ScaleControl=class{constructor(B){this._onMove=()=>{nd(this._map,this._container,this.options)},this.setUnit=l=>{this.options.unit=l,nd(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},kp),B)}getDefaultPosition(){return"bottom-left"}onAdd(B){return this._map=B,this._container=P.create("div","maplibregl-ctrl maplibregl-ctrl-scale",B.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){P.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},s.ScrollZoomHandler=Fc,s.Style=dp,s.TerrainControl=class{constructor(B){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=B}onAdd(B){return this._map=B,this._container=P.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=P.create("button","maplibregl-ctrl-terrain",this._container),P.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){P.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},s.TwoFingersTouchPitchHandler=mh,s.TwoFingersTouchRotateHandler=ul,s.TwoFingersTouchZoomHandler=Ld,s.TwoFingersTouchZoomRotateHandler=zc,s.VectorTileSource=Hn,s.VideoSource=Rn,s.addSourceType=(B,l)=>a._(void 0,void 0,void 0,(function*(){if(ie(B))throw new Error(`A source type called "${B}" already exists.`);((p,C)=>{be[p]=C})(B,l)})),s.clearPrewarmedResources=function(){const B=Tt;B&&(B.isPreloaded()&&B.numActive()===1?(B.release(De),Tt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},s.createTileMesh=mr,s.getMaxParallelImageRequests=function(){return a.a.MAX_PARALLEL_IMAGE_REQUESTS},s.getRTLTextPluginStatus=function(){return Ae().getRTLTextPluginStatus()},s.getVersion=function(){return cl},s.getWorkerCount=function(){return _t.workerCount},s.getWorkerUrl=function(){return a.a.WORKER_URL},s.importScriptInWorkers=function(B){return Be().broadcast("IS",B)},s.isTimeFrozen=function(){return E.isFrozen()},s.now=D,s.prewarm=function(){Ke().acquire(De)},s.restoreNow=function(){E.restoreNow()},s.setMaxParallelImageRequests=function(B){a.a.MAX_PARALLEL_IMAGE_REQUESTS=B},s.setNow=function(B){E.setNow(B)},s.setRTLTextPlugin=function(B,l){return Ae().setRTLTextPlugin(B,l)},s.setWorkerCount=function(B){_t.workerCount=B},s.setWorkerUrl=function(B){a.a.WORKER_URL=B}}));var o=t;return o}))})(lw)),lw.exports}var che=uhe();const b_=Ou(che);function rF(n,e,t,i){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(m){try{h(i.next(m))}catch(v){s(v)}}function c(m){try{h(i.throw(m))}catch(v){s(v)}}function h(m){m.done?o(m.value):r(m.value).then(a,c)}h((i=i.apply(n,[])).next())})}var WM=typeof globalThis<"u"?globalThis:typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:{};function sZ(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var L2={exports:{}};L2.exports;var oF;function Ahe(){return oF||(oF=1,(function(n,e){var t=200,i="__lodash_hash_undefined__",r=1,o=2,s=9007199254740991,a="[object Arguments]",c="[object Array]",h="[object AsyncFunction]",m="[object Boolean]",v="[object Date]",x="[object Error]",E="[object Function]",D="[object GeneratorFunction]",P="[object Map]",F="[object Number]",W="[object Null]",q="[object Object]",V="[object Promise]",H="[object Proxy]",X="[object RegExp]",Z="[object Set]",G="[object String]",oe="[object Symbol]",ue="[object Undefined]",xe="[object WeakMap]",me="[object ArrayBuffer]",Ie="[object DataView]",Me="[object Float32Array]",Te="[object Float64Array]",je="[object Int8Array]",Ee="[object Int16Array]",qe="[object Int32Array]",At="[object Uint8Array]",gt="[object Uint8ClampedArray]",Le="[object Uint16Array]",Re="[object Uint32Array]",Ge=/[\\^$.*+?()[\]{}|]/g,De=/^\[object .+?Constructor\]$/,_t=/^(?:0|[1-9]\d*)$/,at={};at[Me]=at[Te]=at[je]=at[Ee]=at[qe]=at[At]=at[gt]=at[Le]=at[Re]=!0,at[a]=at[c]=at[me]=at[m]=at[Ie]=at[v]=at[x]=at[E]=at[P]=at[F]=at[q]=at[X]=at[Z]=at[G]=at[xe]=!1;var Tt=typeof WM=="object"&&WM&&WM.Object===Object&&WM,Kt=typeof self=="object"&&self&&self.Object===Object&&self,Ke=Tt||Kt||Function("return this")(),Oe=e&&!e.nodeType&&e,Be=Oe&&!0&&n&&!n.nodeType&&n,Ve=Be&&Be.exports===Oe,yt=Ve&&Tt.process,ft=(function(){try{return yt&&yt.binding&&yt.binding("util")}catch{}})(),Ct=ft&&ft.isTypedArray;function Lt(J,ye){for(var Ne=-1,St=J==null?0:J.length,fn=0,nn=[];++Ne<St;){var xi=J[Ne];ye(xi,Ne,J)&&(nn[fn++]=xi)}return nn}function kt(J,ye){for(var Ne=-1,St=ye.length,fn=J.length;++Ne<St;)J[fn+Ne]=ye[Ne];return J}function an(J,ye){for(var Ne=-1,St=J==null?0:J.length;++Ne<St;)if(ye(J[Ne],Ne,J))return!0;return!1}function Hn(J,ye){for(var Ne=-1,St=Array(J);++Ne<J;)St[Ne]=ye(Ne);return St}function Wn(J){return function(ye){return J(ye)}}function _i(J,ye){return J.has(ye)}function Ln(J,ye){return J?.[ye]}function Un(J){var ye=-1,Ne=Array(J.size);return J.forEach(function(St,fn){Ne[++ye]=[fn,St]}),Ne}function xn(J,ye){return function(Ne){return J(ye(Ne))}}function Zn(J){var ye=-1,Ne=Array(J.size);return J.forEach(function(St){Ne[++ye]=St}),Ne}var Rn=Array.prototype,Ot=Function.prototype,be=Object.prototype,ie=Ke["__core-js_shared__"],le=Ot.toString,de=be.hasOwnProperty,se=(function(){var J=/[^.]+$/.exec(ie&&ie.keys&&ie.keys.IE_PROTO||"");return J?"Symbol(src)_1."+J:""})(),Ae=be.toString,ve=RegExp("^"+le.call(de).replace(Ge,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),We=Ve?Ke.Buffer:void 0,tt=Ke.Symbol,Pe=Ke.Uint8Array,Xe=be.propertyIsEnumerable,y=Rn.splice,ot=tt?tt.toStringTag:void 0,Dt=Object.getOwnPropertySymbols,xt=We?We.isBuffer:void 0,tn=xn(Object.keys,Object),dt=Mo(Ke,"DataView"),Xn=Mo(Ke,"Map"),yi=Mo(Ke,"Promise"),Dn=Mo(Ke,"Set"),Fn=Mo(Ke,"WeakMap"),vi=Mo(Object,"create"),Zi=Co(dt),Ki=Co(Xn),Ji=Co(yi),ki=Co(Dn),Ri=Co(Fn),pr=tt?tt.prototype:void 0,rn=pr?pr.valueOf:void 0;function Li(J){var ye=-1,Ne=J==null?0:J.length;for(this.clear();++ye<Ne;){var St=J[ye];this.set(St[0],St[1])}}function $o(){this.__data__=vi?vi(null):{},this.size=0}function Ws(J){var ye=this.has(J)&&delete this.__data__[J];return this.size-=ye?1:0,ye}function Ur(J){var ye=this.__data__;if(vi){var Ne=ye[J];return Ne===i?void 0:Ne}return de.call(ye,J)?ye[J]:void 0}function pn(J){var ye=this.__data__;return vi?ye[J]!==void 0:de.call(ye,J)}function zi(J,ye){var Ne=this.__data__;return this.size+=this.has(J)?0:1,Ne[J]=vi&&ye===void 0?i:ye,this}Li.prototype.clear=$o,Li.prototype.delete=Ws,Li.prototype.get=Ur,Li.prototype.has=pn,Li.prototype.set=zi;function oi(J){var ye=-1,Ne=J==null?0:J.length;for(this.clear();++ye<Ne;){var St=J[ye];this.set(St[0],St[1])}}function wl(){this.__data__=[],this.size=0}function nA(J){var ye=this.__data__,Ne=ko(ye,J);if(Ne<0)return!1;var St=ye.length-1;return Ne==St?ye.pop():y.call(ye,Ne,1),--this.size,!0}function nu(J){var ye=this.__data__,Ne=ko(ye,J);return Ne<0?void 0:ye[Ne][1]}function qi(J){return ko(this.__data__,J)>-1}function tc(J,ye){var Ne=this.__data__,St=ko(Ne,J);return St<0?(++this.size,Ne.push([J,ye])):Ne[St][1]=ye,this}oi.prototype.clear=wl,oi.prototype.delete=nA,oi.prototype.get=nu,oi.prototype.has=qi,oi.prototype.set=tc;function no(J){var ye=-1,Ne=J==null?0:J.length;for(this.clear();++ye<Ne;){var St=J[ye];this.set(St[0],St[1])}}function Ls(){this.size=0,this.__data__={hash:new Li,map:new(Xn||oi),string:new Li}}function rl(J){var ye=Ss(this,J).delete(J);return this.size-=ye?1:0,ye}function Ya(J){return Ss(this,J).get(J)}function Io(J){return Ss(this,J).has(J)}function iA(J,ye){var Ne=Ss(this,J),St=Ne.size;return Ne.set(J,ye),this.size+=Ne.size==St?0:1,this}no.prototype.clear=Ls,no.prototype.delete=rl,no.prototype.get=Ya,no.prototype.has=Io,no.prototype.set=iA;function Uo(J){var ye=-1,Ne=J==null?0:J.length;for(this.__data__=new no;++ye<Ne;)this.add(J[ye])}function Lr(J){return this.__data__.set(J,i),this}function fa(J){return this.__data__.has(J)}Uo.prototype.add=Uo.prototype.push=Lr,Uo.prototype.has=fa;function Ho(J){var ye=this.__data__=new oi(J);this.size=ye.size}function Ko(){this.__data__=new oi,this.size=0}function Iu(J){var ye=this.__data__,Ne=ye.delete(J);return this.size=ye.size,Ne}function iu(J){return this.__data__.get(J)}function ru(J){return this.__data__.has(J)}function nc(J,ye){var Ne=this.__data__;if(Ne instanceof oi){var St=Ne.__data__;if(!Xn||St.length<t-1)return St.push([J,ye]),this.size=++Ne.size,this;Ne=this.__data__=new no(St)}return Ne.set(J,ye),this.size=Ne.size,this}Ho.prototype.clear=Ko,Ho.prototype.delete=Iu,Ho.prototype.get=iu,Ho.prototype.has=ru,Ho.prototype.set=nc;function Sl(J,ye){var Ne=go(J),St=!Ne&&is(J),fn=!Ne&&!St&&uo(J),nn=!Ne&&!St&&!fn&&ka(J),xi=Ne||St||fn||nn,Gn=xi?Hn(J.length,String):[],Ei=Gn.length;for(var li in J)de.call(J,li)&&!(xi&&(li=="length"||fn&&(li=="offset"||li=="parent")||nn&&(li=="buffer"||li=="byteLength"||li=="byteOffset")||_A(li,Ei)))&&Gn.push(li);return Gn}function ko(J,ye){for(var Ne=J.length;Ne--;)if(Ia(J[Ne][0],ye))return Ne;return-1}function ku(J,ye,Ne){var St=ye(J);return go(J)?St:kt(St,Ne(J))}function ou(J){return J==null?J===void 0?ue:W:ot&&ot in Object(J)?Va(J):Vi(J)}function ic(J){return co(J)&&ou(J)==a}function rc(J,ye,Ne,St,fn){return J===ye?!0:J==null||ye==null||!co(J)&&!co(ye)?J!==J&&ye!==ye:kc(J,ye,Ne,St,rc,fn)}function kc(J,ye,Ne,St,fn,nn){var xi=go(J),Gn=go(ye),Ei=xi?c:Qs(J),li=Gn?c:Qs(ye);Ei=Ei==a?q:Ei,li=li==a?q:li;var Ar=Ei==q,Gr=li==q,mr=Ei==li;if(mr&&uo(J)){if(!uo(ye))return!1;xi=!0,Ar=!1}if(mr&&!Ar)return nn||(nn=new Ho),xi||ka(J)?Tu(J,ye,Ne,St,fn,nn):rA(J,ye,Ei,Ne,St,fn,nn);if(!(Ne&r)){var hr=Ar&&de.call(J,"__wrapped__"),Hr=Gr&&de.call(ye,"__wrapped__");if(hr||Hr){var Ys=hr?J.value():J,Zo=Hr?ye.value():ye;return nn||(nn=new Ho),fn(Ys,Zo,Ne,St,nn)}}return mr?(nn||(nn=new Ho),Ll(J,ye,Ne,St,fn,nn)):!1}function Lh(J){if(!Es(J)||Du(J))return!1;var ye=zl(J)?ve:De;return ye.test(Co(J))}function pa(J){return co(J)&&vo(J.length)&&!!at[ou(J)]}function Tc(J){if(!Fi(J))return tn(J);var ye=[];for(var Ne in Object(J))de.call(J,Ne)&&Ne!="constructor"&&ye.push(Ne);return ye}function Tu(J,ye,Ne,St,fn,nn){var xi=Ne&r,Gn=J.length,Ei=ye.length;if(Gn!=Ei&&!(xi&&Ei>Gn))return!1;var li=nn.get(J);if(li&&nn.get(ye))return li==ye;var Ar=-1,Gr=!0,mr=Ne&o?new Uo:void 0;for(nn.set(J,ye),nn.set(ye,J);++Ar<Gn;){var hr=J[Ar],Hr=ye[Ar];if(St)var Ys=xi?St(Hr,hr,Ar,ye,J,nn):St(hr,Hr,Ar,J,ye,nn);if(Ys!==void 0){if(Ys)continue;Gr=!1;break}if(mr){if(!an(ye,function(Zo,qs){if(!_i(mr,qs)&&(hr===Zo||fn(hr,Zo,Ne,St,nn)))return mr.push(qs)})){Gr=!1;break}}else if(!(hr===Hr||fn(hr,Hr,Ne,St,nn))){Gr=!1;break}}return nn.delete(J),nn.delete(ye),Gr}function rA(J,ye,Ne,St,fn,nn,xi){switch(Ne){case Ie:if(J.byteLength!=ye.byteLength||J.byteOffset!=ye.byteOffset)return!1;J=J.buffer,ye=ye.buffer;case me:return!(J.byteLength!=ye.byteLength||!nn(new Pe(J),new Pe(ye)));case m:case v:case F:return Ia(+J,+ye);case x:return J.name==ye.name&&J.message==ye.message;case X:case G:return J==ye+"";case P:var Gn=Un;case Z:var Ei=St&r;if(Gn||(Gn=Zn),J.size!=ye.size&&!Ei)return!1;var li=xi.get(J);if(li)return li==ye;St|=o,xi.set(J,ye);var Ar=Tu(Gn(J),Gn(ye),St,fn,nn,xi);return xi.delete(J),Ar;case oe:if(rn)return rn.call(J)==rn.call(ye)}return!1}function Ll(J,ye,Ne,St,fn,nn){var xi=Ne&r,Gn=qa(J),Ei=Gn.length,li=qa(ye),Ar=li.length;if(Ei!=Ar&&!xi)return!1;for(var Gr=Ei;Gr--;){var mr=Gn[Gr];if(!(xi?mr in ye:de.call(ye,mr)))return!1}var hr=nn.get(J);if(hr&&nn.get(ye))return hr==ye;var Hr=!0;nn.set(J,ye),nn.set(ye,J);for(var Ys=xi;++Gr<Ei;){mr=Gn[Gr];var Zo=J[mr],qs=ye[mr];if(St)var su=xi?St(qs,Zo,mr,ye,J,nn):St(Zo,qs,mr,J,ye,nn);if(!(su===void 0?Zo===qs||fn(Zo,qs,Ne,St,nn):su)){Hr=!1;break}Ys||(Ys=mr=="constructor")}if(Hr&&!Ys){var Lo=J.constructor,rs=ye.constructor;Lo!=rs&&"constructor"in J&&"constructor"in ye&&!(typeof Lo=="function"&&Lo instanceof Lo&&typeof rs=="function"&&rs instanceof rs)&&(Hr=!1)}return nn.delete(J),nn.delete(ye),Hr}function qa(J){return ku(J,Ta,Ru)}function Ss(J,ye){var Ne=J.__data__;return Fl(ye)?Ne[typeof ye=="string"?"string":"hash"]:Ne.map}function Mo(J,ye){var Ne=Ln(J,ye);return Lh(Ne)?Ne:void 0}function Va(J){var ye=de.call(J,ot),Ne=J[ot];try{J[ot]=void 0;var St=!0}catch{}var fn=Ae.call(J);return St&&(ye?J[ot]=Ne:delete J[ot]),fn}var Ru=Dt?function(J){return J==null?[]:(J=Object(J),Lt(Dt(J),function(ye){return Xe.call(J,ye)}))}:Ni,Qs=ou;(dt&&Qs(new dt(new ArrayBuffer(1)))!=Ie||Xn&&Qs(new Xn)!=P||yi&&Qs(yi.resolve())!=V||Dn&&Qs(new Dn)!=Z||Fn&&Qs(new Fn)!=xe)&&(Qs=function(J){var ye=ou(J),Ne=ye==q?J.constructor:void 0,St=Ne?Co(Ne):"";if(St)switch(St){case Zi:return Ie;case Ki:return P;case Ji:return V;case ki:return Z;case Ri:return xe}return ye});function _A(J,ye){return ye=ye??s,!!ye&&(typeof J=="number"||_t.test(J))&&J>-1&&J%1==0&&J<ye}function Fl(J){var ye=typeof J;return ye=="string"||ye=="number"||ye=="symbol"||ye=="boolean"?J!=="__proto__":J===null}function Du(J){return!!se&&se in J}function Fi(J){var ye=J&&J.constructor,Ne=typeof ye=="function"&&ye.prototype||be;return J===Ne}function Vi(J){return Ae.call(J)}function Co(J){if(J!=null){try{return le.call(J)}catch{}try{return J+""}catch{}}return""}function Ia(J,ye){return J===ye||J!==J&&ye!==ye}var is=ic((function(){return arguments})())?ic:function(J){return co(J)&&de.call(J,"callee")&&!Xe.call(J,"callee")},go=Array.isArray;function ms(J){return J!=null&&vo(J.length)&&!zl(J)}var uo=xt||Fr;function yo(J,ye){return rc(J,ye)}function zl(J){if(!Es(J))return!1;var ye=ou(J);return ye==E||ye==D||ye==h||ye==H}function vo(J){return typeof J=="number"&&J>-1&&J%1==0&&J<=s}function Es(J){var ye=typeof J;return J!=null&&(ye=="object"||ye=="function")}function co(J){return J!=null&&typeof J=="object"}var ka=Ct?Wn(Ct):pa;function Ta(J){return ms(J)?Sl(J):Tc(J)}function Ni(){return[]}function Fr(){return!1}n.exports=yo})(L2,L2.exports)),L2.exports}var hhe=Ahe(),dhe=sZ(hhe);function RT(n,e,t){const i={id:[e,t,"circle"].join("_"),source:e,type:"circle",paint:{"circle-color":n,"circle-radius":2},filter:["==","$type","Point"]};return t&&(i["source-layer"]=t),i}function DT(n,e,t,i){const r={id:[t,i,"polygon"].join("_"),source:t,type:"fill",paint:{"fill-color":n,"fill-antialias":!0,"fill-outline-color":n},filter:["==","$type","Polygon"]};return i&&(r["source-layer"]=i),r}function PT(n,e,t){const i={id:[e,t,"line"].join("_"),source:e,layout:{"line-join":"round","line-cap":"round"},type:"line",paint:{"line-color":n},filter:["==","$type","LineString"]};return t&&(i["source-layer"]=t),i}function sF(n,e){return{circle:e(n,.8),line:e(n,.6),polygon:e(n,.3),polygonOutline:e(n,.6),default:e(n,1)}}function fhe(n,e){const t=[],i=[],r=[];for(const o of Object.keys(n)){const s=n[o];if(!s||s.length===0){const a=sF(o,e);i.push(RT(a.circle,o)),r.push(PT(a.line,o)),t.push(DT(a.polygon,a.polygonOutline,o))}else for(const a of s){const c=sF(a,e);i.push(RT(c.circle,o,a)),r.push(PT(c.line,o,a)),t.push(DT(c.polygon,c.polygonOutline,o,a))}}return t.concat(r).concat(i)}function phe(n,e,t){t=Object.assign({backgroundColor:"#fff"},t);const i={id:"background",type:"background",paint:{"background-color":t.backgroundColor}},r={};for(const o of Object.keys(n.sources)){const s=n.sources[o];(s.type==="vector"||s.type==="geojson")&&(r[o]=s)}return Object.assign(n,{layers:[i].concat(e),sources:r})}var aF={polygonLayer:DT,lineLayer:PT,circleLayer:RT,generateInspectStyle:phe,generateColoredLayers:fhe};class mhe{constructor(e){e=Object.assign({show:!0,onToggle(){}},e),this._btn=this.createButton(),this._btn.onclick=e.onToggle,this.elem=this.createContainer(this._btn,e.show)}createButton(){const e=document.createElement("button");return e.className="maplibregl-ctrl-icon maplibregl-ctrl-inspect",e.type="button",e.title="Toggle Inspect",e.setAttribute("aria-label","Toggle Inspect"),e}createContainer(e,t){const i=document.createElement("div");return i.className="maplibregl-ctrl maplibregl-ctrl-group",i.appendChild(e),t||(i.style.display="none"),i}setInspectIcon(){this._btn.className="maplibregl-ctrl-icon maplibregl-ctrl-inspect"}setMapIcon(){this._btn.className="maplibregl-ctrl-icon maplibregl-ctrl-map"}}function ghe(n){return typeof n>"u"||n===null?n:n instanceof Date?n.toLocaleString():typeof n=="object"||typeof n=="number"||typeof n=="string"?n.toString():n}function EB(n,e){return`<div class="maplibregl-inspect_property"><div class="maplibregl-inspect_property-name">${n}</div><div class="maplibregl-inspect_property-value">${ghe(e)}</div></div>`}function yhe(n){return`<div class="maplibregl-inspect_layer">${n}</div>`}function vhe(n){const e=yhe(n.layer["source-layer"]||n.layer.source),t=EB("$id",n.id),i=EB("$type",n.geometry.type),r=Object.keys(n.properties).map(o=>EB(o,n.properties[o]));return[e,t,i].concat(r).join("")}function bhe(n){return n.map(e=>`<div class="maplibregl-inspect_feature">${vhe(e)}</div>`).join("")}function Che(n){return`<div class="maplibregl-inspect_popup">${bhe(n)}</div>`}var F2={exports:{}},_he=F2.exports,lF;function xhe(){return lF||(lF=1,(function(n,e){(function(t,i){{var r=i();n&&n.exports&&(e=n.exports=r),e.randomColor=r}})(_he,function(){var t=null,i={};W();var r=[],o=function(G){if(G=G||{},G.seed!==void 0&&G.seed!==null&&G.seed===parseInt(G.seed,10))t=G.seed;else if(typeof G.seed=="string")t=X(G.seed);else{if(G.seed!==void 0&&G.seed!==null)throw new TypeError("The seed value must be an integer or string");t=null}var oe,ue,xe;if(G.count!==null&&G.count!==void 0){for(var me=G.count,Ie=[],Me=0;Me<G.count;Me++)r.push(!1);for(G.count=null;me>Ie.length;){var Te=o(G);t!==null&&(G.seed=t),Ie.push(Te)}return G.count=me,Ie}return oe=s(G),ue=a(oe,G),xe=c(oe,ue,G),h([oe,ue,xe],G)};function s(G){if(r.length>0){var oe=Z(G.hue),ue=D(oe),xe=(oe[1]-oe[0])/r.length,me=parseInt((ue-oe[0])/xe);r[me]===!0?me=(me+2)%r.length:r[me]=!0;var Ie=(oe[0]+me*xe)%359,Me=(oe[0]+(me+1)*xe)%359;return oe=[Ie,Me],ue=D(oe),ue<0&&(ue=360+ue),ue}else{var oe=v(G.hue);return ue=D(oe),ue<0&&(ue=360+ue),ue}}function a(G,oe){if(oe.hue==="monochrome")return 0;if(oe.luminosity==="random")return D([0,100]);var ue=x(G),xe=ue[0],me=ue[1];switch(oe.luminosity){case"bright":xe=55;break;case"dark":xe=me-10;break;case"light":me=55;break}return D([xe,me])}function c(G,oe,ue){var xe=m(G,oe),me=100;switch(ue.luminosity){case"dark":me=xe+20;break;case"light":xe=(me+xe)/2;break;case"random":xe=0,me=100;break}return D([xe,me])}function h(G,oe){switch(oe.format){case"hsvArray":return G;case"hslArray":return H(G);case"hsl":var ue=H(G);return"hsl("+ue[0]+", "+ue[1]+"%, "+ue[2]+"%)";case"hsla":var xe=H(G),Me=oe.alpha||Math.random();return"hsla("+xe[0]+", "+xe[1]+"%, "+xe[2]+"%, "+Me+")";case"rgbArray":return q(G);case"rgb":var me=q(G);return"rgb("+me.join(", ")+")";case"rgba":var Ie=q(G),Me=oe.alpha||Math.random();return"rgba("+Ie.join(", ")+", "+Me+")";default:return P(G)}}function m(G,oe){for(var ue=E(G).lowerBounds,xe=0;xe<ue.length-1;xe++){var me=ue[xe][0],Ie=ue[xe][1],Me=ue[xe+1][0],Te=ue[xe+1][1];if(oe>=me&&oe<=Me){var je=(Te-Ie)/(Me-me),Ee=Ie-je*me;return je*oe+Ee}}return 0}function v(G){if(typeof parseInt(G)=="number"){var oe=parseInt(G);if(oe<360&&oe>0)return[oe,oe]}if(typeof G=="string"){if(i[G]){var ue=i[G];if(ue.hueRange)return ue.hueRange}else if(G.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var xe=V(G)[0];return[xe,xe]}}return[0,360]}function x(G){return E(G).saturationRange}function E(G){G>=334&&G<=360&&(G-=360);for(var oe in i){var ue=i[oe];if(ue.hueRange&&G>=ue.hueRange[0]&&G<=ue.hueRange[1])return i[oe]}return"Color not found"}function D(G){if(t===null){var oe=.618033988749895,ue=Math.random();return ue+=oe,ue%=1,Math.floor(G[0]+ue*(G[1]+1-G[0]))}else{var xe=G[1]||1,me=G[0]||0;t=(t*9301+49297)%233280;var Ie=t/233280;return Math.floor(me+Ie*(xe-me))}}function P(G){var oe=q(G);function ue(me){var Ie=me.toString(16);return Ie.length==1?"0"+Ie:Ie}var xe="#"+ue(oe[0])+ue(oe[1])+ue(oe[2]);return xe}function F(G,oe,ue){var xe=ue[0][0],me=ue[ue.length-1][0],Ie=ue[ue.length-1][1],Me=ue[0][1];i[G]={hueRange:oe,lowerBounds:ue,saturationRange:[xe,me],brightnessRange:[Ie,Me]}}function W(){F("monochrome",null,[[0,0],[100,0]]),F("red",[-26,18],[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]),F("orange",[18,46],[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]),F("yellow",[46,62],[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]),F("green",[62,178],[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]),F("blue",[178,257],[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]),F("purple",[257,282],[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]),F("pink",[282,334],[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]])}function q(G){var oe=G[0];oe===0&&(oe=1),oe===360&&(oe=359),oe=oe/360;var ue=G[1]/100,xe=G[2]/100,me=Math.floor(oe*6),Ie=oe*6-me,Me=xe*(1-ue),Te=xe*(1-Ie*ue),je=xe*(1-(1-Ie)*ue),Ee=256,qe=256,At=256;switch(me){case 0:Ee=xe,qe=je,At=Me;break;case 1:Ee=Te,qe=xe,At=Me;break;case 2:Ee=Me,qe=xe,At=je;break;case 3:Ee=Me,qe=Te,At=xe;break;case 4:Ee=je,qe=Me,At=xe;break;case 5:Ee=xe,qe=Me,At=Te;break}var gt=[Math.floor(Ee*255),Math.floor(qe*255),Math.floor(At*255)];return gt}function V(G){G=G.replace(/^#/,""),G=G.length===3?G.replace(/(.)/g,"$1$1"):G;var oe=parseInt(G.substr(0,2),16)/255,ue=parseInt(G.substr(2,2),16)/255,xe=parseInt(G.substr(4,2),16)/255,me=Math.max(oe,ue,xe),Ie=me-Math.min(oe,ue,xe),Me=me?Ie/me:0;switch(me){case oe:return[60*((ue-xe)/Ie%6)||0,Me,me];case ue:return[60*((xe-oe)/Ie+2)||0,Me,me];case xe:return[60*((oe-ue)/Ie+4)||0,Me,me]}}function H(G){var oe=G[0],ue=G[1]/100,xe=G[2]/100,me=(2-ue)*xe;return[oe,Math.round(ue*xe/(me<1?me:2-me)*1e4)/100,me/2*100]}function X(G){for(var oe=0,ue=0;ue!==G.length&&!(oe>=Number.MAX_SAFE_INTEGER);ue++)oe+=G.charCodeAt(ue);return oe}function Z(G){if(isNaN(G)){if(typeof G=="string"){if(i[G]){var ue=i[G];if(ue.hueRange)return ue.hueRange}else if(G.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var xe=V(G)[0];return E(xe).hueRange}}}else{var oe=parseInt(G);if(oe<360&&oe>0)return E(G).hueRange}return[0,360]}return o})})(F2,F2.exports)),F2.exports}var Mhe=xhe(),whe=sZ(Mhe);function She(n,e){let t="bright",i;return/water|ocean|lake|sea|river/.test(n)&&(i="blue"),/state|country|place/.test(n)&&(i="pink"),/road|highway|transport|streets/.test(n)&&(i="orange"),/contour|building|earth/.test(n)&&(i="monochrome"),/building/.test(n)&&(t="dark"),/earth/.test(n)&&(t="light"),/contour|landuse/.test(n)&&(i="yellow"),/wood|forest|park|landcover|land|natural/.test(n)&&(i="green"),`rgba(${whe({luminosity:t,hue:i,seed:n,format:"rgbArray"}).join(", ")}, ${e||"1"})`}var Ehe={brightColor:She};function Bhe(n){return n.metadata&&n.metadata["maplibregl-inspect:inspect"]}function Ohe(n){return Object.assign(n,{metadata:Object.assign({},n.metadata,{"maplibregl-inspect:inspect":!0})})}class ED{constructor(e){if(this._onSourceChange=i=>rF(this,void 0,void 0,function*(){if(i.sourceDataType==="visibility"||!i.isSourceLoaded)return;const r=Object.assign({},this.sources);yield this._setSourcesFromMap(),!dhe(r,this.sources)&&Object.keys(this.sources).length>0&&setTimeout(()=>this.render(),1e3)}),this._onStyleChange=()=>{const i=this._map.getStyle();Bhe(i)||(this._originalStyle=i)},this._onRightClick=()=>{!this.options.showMapPopupOnHover&&!this.options.showInspectMapPopupOnHover&&!this.options.blockHoverPopupOnClick&&this._popup&&this._popup.remove()},this._onMousemove=i=>{if(this._showInspectMap){if(!this.options.showInspectMapPopup||i.type==="mousemove"&&!this.options.showInspectMapPopupOnHover)return;i.type==="click"&&this.options.showInspectMapPopupOnHover&&this.options.blockHoverPopupOnClick&&(this._popupBlocked=!this._popupBlocked)}else{if(!this.options.showMapPopup||i.type==="mousemove"&&!this.options.showMapPopupOnHover)return;i.type==="click"&&this.options.showMapPopupOnHover&&this.options.blockHoverPopupOnClick&&(this._popupBlocked=!this._popupBlocked)}if(!this._popupBlocked&&this._popup){let r;this.options.selectThreshold===0?r=i.point:r=[[i.point.x-this.options.selectThreshold,i.point.y+this.options.selectThreshold],[i.point.x+this.options.selectThreshold,i.point.y-this.options.selectThreshold]];const o=this._map.queryRenderedFeatures(r,this.options.queryParameters)||[];if(this._map.getCanvas().style.cursor=o.length?"pointer":"",!o.length)this._popup.remove();else{this._popup.setLngLat(i.lngLat);const s=this.options.renderPopup(o);typeof s=="string"?this._popup.setHTML(s):this._popup.setDOMContent(s),this._popup.addTo(this._map)}}},!(this instanceof ED))throw new Error("MaplibreInspect needs to be called with the new keyword");let t=null;window.maplibregl?t=new window.maplibregl.Popup({closeButton:!1,closeOnClick:!1}):e.popup||console.error("Maplibre GL JS can not be found. Make sure to include it or pass an initialized MaplibreGL Popup to MaplibreInspect if you are using moduleis."),this.options=Object.assign({showInspectMap:!1,showInspectButton:!0,showInspectMapPopup:!0,showMapPopup:!1,showMapPopupOnHover:!0,showInspectMapPopupOnHover:!0,blockHoverPopupOnClick:!1,backgroundColor:"#fff",assignLayerColor:Ehe.brightColor,buildInspectStyle:aF.generateInspectStyle,renderPopup:Che,popup:t,selectThreshold:5,useInspectStyle:!0,queryParameters:{},sources:{},toggleCallback(){},manageStyleOutside:!1},e),this.sources=this.options.sources,this.assignLayerColor=this.options.assignLayerColor,this._popup=this.options.popup,this._popupBlocked=!1,this._showInspectMap=this.options.showInspectMap,this._toggle=new mhe({show:this.options.showInspectButton,onToggle:()=>this.toggleInspector()})}toggleInspector(){this._showInspectMap=!this._showInspectMap,this._popupBlocked=!1,this.options.toggleCallback(this._showInspectMap),this.render()}_inspectStyle(){const e=aF.generateColoredLayers(this.sources,this.assignLayerColor);return this.options.buildInspectStyle(this._map.getStyle(),e,{backgroundColor:this.options.backgroundColor})}render(){this._showInspectMap?(this.options.useInspectStyle&&this._map.setStyle(Ohe(this._inspectStyle())),this._toggle.setMapIcon()):this._originalStyle&&(this._popup&&this._popup.remove(),this.options.useInspectStyle&&this._map.setStyle(this._originalStyle),this._toggle.setInspectIcon())}_setSourcesFromMap(){return rF(this,void 0,void 0,function*(){var e;const t=this._map.getStyle(),i=Object.keys(t.sources);for(const r of i)if(t.sources[r].type==="geojson")this.sources[r]=[];else if(t.sources[r].type==="vector"&&t.sources[r].url)try{const s=yield(yield fetch(t.sources[r].url)).json(),a=(e=s?.vector_layers)===null||e===void 0?void 0:e.map(c=>c.id);if(a)this.sources[r]=a;else throw new Error("Missing vectorlayersIds in source"+r)}catch{console.warn("Unable to retrieve tileJSON from "+t.sources[r].url+" using style's layers");for(const s of t.layers)if("source-layer"in s&&s["source-layer"]){const a=s["source-layer"];this.sources[a]||(this.sources[a]=[]),this.sources[a].push(s.id)}}for(const r of Object.keys(this.sources))i.indexOf(r)===-1&&delete this.sources[r]})}setOriginalStyle(e){this._originalStyle=e,this._setSourcesFromMap()}onAdd(e){return this._map=e,Object.keys(this.sources).length===0&&(e.on("tiledata",this._onSourceChange),e.on("sourcedata",this._onSourceChange)),e.on("styledata",this._onStyleChange),e.on("load",this._onStyleChange),e.on("mousemove",this._onMousemove),e.on("click",this._onMousemove),e.on("contextmenu",this._onRightClick),this._toggle.elem}onRemove(){this._map.off("styledata",this._onStyleChange),this._map.off("load",this._onStyleChange),this._map.off("tiledata",this._onSourceChange),this._map.off("sourcedata",this._onSourceChange),this._map.off("mousemove",this._onMousemove),this._map.off("click",this._onMousemove),this._map.off("contextmenu",this._onRightClick);const e=this._toggle.elem;e.parentNode.removeChild(e),this._map=void 0}}var z2={exports:{}},Ihe=z2.exports,uF;function khe(){return uF||(uF=1,(function(n,e){(function(t,i){{var r=i();n&&n.exports&&(e=n.exports=r),e.randomColor=r}})(Ihe,function(){var t=null,i={};W();var r=[],o=function(G){if(G=G||{},G.seed!==void 0&&G.seed!==null&&G.seed===parseInt(G.seed,10))t=G.seed;else if(typeof G.seed=="string")t=X(G.seed);else{if(G.seed!==void 0&&G.seed!==null)throw new TypeError("The seed value must be an integer or string");t=null}var oe,ue,xe;if(G.count!==null&&G.count!==void 0){for(var me=G.count,Ie=[],Me=0;Me<G.count;Me++)r.push(!1);for(G.count=null;me>Ie.length;){var Te=o(G);t!==null&&(G.seed=t),Ie.push(Te)}return G.count=me,Ie}return oe=s(G),ue=a(oe,G),xe=c(oe,ue,G),h([oe,ue,xe],G)};function s(G){if(r.length>0){var oe=Z(G.hue),ue=D(oe),xe=(oe[1]-oe[0])/r.length,me=parseInt((ue-oe[0])/xe);r[me]===!0?me=(me+2)%r.length:r[me]=!0;var Ie=(oe[0]+me*xe)%359,Me=(oe[0]+(me+1)*xe)%359;return oe=[Ie,Me],ue=D(oe),ue<0&&(ue=360+ue),ue}else{var oe=v(G.hue);return ue=D(oe),ue<0&&(ue=360+ue),ue}}function a(G,oe){if(oe.hue==="monochrome")return 0;if(oe.luminosity==="random")return D([0,100]);var ue=x(G),xe=ue[0],me=ue[1];switch(oe.luminosity){case"bright":xe=55;break;case"dark":xe=me-10;break;case"light":me=55;break}return D([xe,me])}function c(G,oe,ue){var xe=m(G,oe),me=100;switch(ue.luminosity){case"dark":me=xe+20;break;case"light":xe=(me+xe)/2;break;case"random":xe=0,me=100;break}return D([xe,me])}function h(G,oe){switch(oe.format){case"hsvArray":return G;case"hslArray":return H(G);case"hsl":var ue=H(G);return"hsl("+ue[0]+", "+ue[1]+"%, "+ue[2]+"%)";case"hsla":var xe=H(G),Me=oe.alpha||Math.random();return"hsla("+xe[0]+", "+xe[1]+"%, "+xe[2]+"%, "+Me+")";case"rgbArray":return q(G);case"rgb":var me=q(G);return"rgb("+me.join(", ")+")";case"rgba":var Ie=q(G),Me=oe.alpha||Math.random();return"rgba("+Ie.join(", ")+", "+Me+")";default:return P(G)}}function m(G,oe){for(var ue=E(G).lowerBounds,xe=0;xe<ue.length-1;xe++){var me=ue[xe][0],Ie=ue[xe][1],Me=ue[xe+1][0],Te=ue[xe+1][1];if(oe>=me&&oe<=Me){var je=(Te-Ie)/(Me-me),Ee=Ie-je*me;return je*oe+Ee}}return 0}function v(G){if(typeof parseInt(G)=="number"){var oe=parseInt(G);if(oe<360&&oe>0)return[oe,oe]}if(typeof G=="string"){if(i[G]){var ue=i[G];if(ue.hueRange)return ue.hueRange}else if(G.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var xe=V(G)[0];return[xe,xe]}}return[0,360]}function x(G){return E(G).saturationRange}function E(G){G>=334&&G<=360&&(G-=360);for(var oe in i){var ue=i[oe];if(ue.hueRange&&G>=ue.hueRange[0]&&G<=ue.hueRange[1])return i[oe]}return"Color not found"}function D(G){if(t===null){var oe=.618033988749895,ue=Math.random();return ue+=oe,ue%=1,Math.floor(G[0]+ue*(G[1]+1-G[0]))}else{var xe=G[1]||1,me=G[0]||0;t=(t*9301+49297)%233280;var Ie=t/233280;return Math.floor(me+Ie*(xe-me))}}function P(G){var oe=q(G);function ue(me){var Ie=me.toString(16);return Ie.length==1?"0"+Ie:Ie}var xe="#"+ue(oe[0])+ue(oe[1])+ue(oe[2]);return xe}function F(G,oe,ue){var xe=ue[0][0],me=ue[ue.length-1][0],Ie=ue[ue.length-1][1],Me=ue[0][1];i[G]={hueRange:oe,lowerBounds:ue,saturationRange:[xe,me],brightnessRange:[Ie,Me]}}function W(){F("monochrome",null,[[0,0],[100,0]]),F("red",[-26,18],[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]),F("orange",[18,46],[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]),F("yellow",[46,62],[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]),F("green",[62,178],[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]),F("blue",[178,257],[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]),F("purple",[257,282],[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]),F("pink",[282,334],[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]])}function q(G){var oe=G[0];oe===0&&(oe=1),oe===360&&(oe=359),oe=oe/360;var ue=G[1]/100,xe=G[2]/100,me=Math.floor(oe*6),Ie=oe*6-me,Me=xe*(1-ue),Te=xe*(1-Ie*ue),je=xe*(1-(1-Ie)*ue),Ee=256,qe=256,At=256;switch(me){case 0:Ee=xe,qe=je,At=Me;break;case 1:Ee=Te,qe=xe,At=Me;break;case 2:Ee=Me,qe=xe,At=je;break;case 3:Ee=Me,qe=Te,At=xe;break;case 4:Ee=je,qe=Me,At=xe;break;case 5:Ee=xe,qe=Me,At=Te;break}var gt=[Math.floor(Ee*255),Math.floor(qe*255),Math.floor(At*255)];return gt}function V(G){G=G.replace(/^#/,""),G=G.length===3?G.replace(/(.)/g,"$1$1"):G;var oe=parseInt(G.substr(0,2),16)/255,ue=parseInt(G.substr(2,2),16)/255,xe=parseInt(G.substr(4,2),16)/255,me=Math.max(oe,ue,xe),Ie=me-Math.min(oe,ue,xe),Me=me?Ie/me:0;switch(me){case oe:return[60*((ue-xe)/Ie%6)||0,Me,me];case ue:return[60*((xe-oe)/Ie+2)||0,Me,me];case xe:return[60*((oe-ue)/Ie+4)||0,Me,me]}}function H(G){var oe=G[0],ue=G[1]/100,xe=G[2]/100,me=(2-ue)*xe;return[oe,Math.round(ue*xe/(me<1?me:2-me)*1e4)/100,me/2*100]}function X(G){for(var oe=0,ue=0;ue!==G.length&&!(oe>=Number.MAX_SAFE_INTEGER);ue++)oe+=G.charCodeAt(ue);return oe}function Z(G){if(isNaN(G)){if(typeof G=="string"){if(i[G]){var ue=i[G];if(ue.hueRange)return ue.hueRange}else if(G.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var xe=V(G)[0];return E(xe).hueRange}}}else{var oe=parseInt(G);if(oe<360&&oe>0)return E(G).hueRange}return[0,360]}return o})})(z2,z2.exports)),z2.exports}var The=khe();const Rhe=Ou(The);function Dhe(n,e){let t="bright",i;return/water|ocean|lake|sea|river/.test(n)&&(i="blue"),/state|country|place/.test(n)&&(i="pink"),/road|highway|transport|streets/.test(n)&&(i="orange"),/contour|building|earth/.test(n)&&(i="monochrome"),/building/.test(n)&&(t="dark"),/earth/.test(n)&&(t="light"),/contour|landuse/.test(n)&&(i="yellow"),/wood|forest|park|landcover|land|natural/.test(n)&&(i="green"),`rgba(${Rhe({luminosity:t,hue:i,seed:n,format:"rgbArray"}).join(", ")}, ${e||"1"})`}const aZ={brightColor:Dhe};function Phe(n){return xo({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M0 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v2h2a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2v-2H2a2 2 0 0 1-2-2zm2-1a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1z"},child:[]}]})(n)}function Uhe(n){return xo({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M6.95.435c.58-.58 1.52-.58 2.1 0l6.515 6.516c.58.58.58 1.519 0 2.098L9.05 15.565c-.58.58-1.519.58-2.098 0L.435 9.05a1.48 1.48 0 0 1 0-2.098z"},child:[]}]})(n)}function Khe(n){return xo({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8M8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0m0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13m8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5M3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8m10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0m-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0m9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707M4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708"},child:[]}]})(n)}function Lhe(n){return xo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M9.4 16.6 4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0 4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"},child:[]}]})(n)}function nC(n){return xo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"},child:[]}]})(n)}function Fhe(n){return xo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 19.59V8l-6-6H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c.45 0 .85-.15 1.19-.4l-4.43-4.43c-.8.52-1.74.83-2.76.83-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5c0 1.02-.31 1.96-.83 2.75L20 19.59zM9 13c0 1.66 1.34 3 3 3s3-1.34 3-3-1.34-3-3-3-3 1.34-3 3z"},child:[]}]})(n)}function zhe(n){return xo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11 18h2v-2h-2v2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4z"},child:[]}]})(n)}function jhe(n){return xo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M14.59 8 12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41 14.59 8zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"},child:[]}]})(n)}function Nhe(n){return xo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M11 7h2v2h-2V7zm0 4h2v6h-2v-6zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"},child:[]}]})(n)}function Ghe(n){return xo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zm6.93 6h-2.95a15.65 15.65 0 0 0-1.38-3.56A8.03 8.03 0 0 1 18.92 8zM12 4.04c.83 1.2 1.48 2.53 1.91 3.96h-3.82c.43-1.43 1.08-2.76 1.91-3.96zM4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2 0 .68.06 1.34.14 2H4.26zm.82 2h2.95c.32 1.25.78 2.45 1.38 3.56A7.987 7.987 0 0 1 5.08 16zm2.95-8H5.08a7.987 7.987 0 0 1 4.33-3.56A15.65 15.65 0 0 0 8.03 8zM12 19.96c-.83-1.2-1.48-2.53-1.91-3.96h3.82c-.43 1.43-1.08 2.76-1.91 3.96zM14.34 14H9.66c-.09-.66-.16-1.32-.16-2 0-.68.07-1.35.16-2h4.68c.09.65.16 1.32.16 2 0 .68-.07 1.34-.16 2zm.25 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95a8.03 8.03 0 0 1-4.33 3.56zM16.36 14c.08-.66.14-1.32.14-2 0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2h-3.38z"},child:[]}]})(n)}function Whe(n){return xo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 4H5a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h4v-2H5V8h14v10h-4v2h4c1.1 0 2-.9 2-2V6a2 2 0 0 0-2-2zm-7 6-4 4h3v6h2v-6h3l-4-4z"},child:[]}]})(n)}function Qhe(n){return xo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58a.49.49 0 0 0 .12-.61l-1.92-3.32a.488.488 0 0 0-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54a.484.484 0 0 0-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58a.49.49 0 0 0-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"},child:[]}]})(n)}function Yhe(n){return xo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0zm0 0h24v24H0zm0 0h24v24H0zm0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46A11.804 11.804 0 0 0 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"},child:[]}]})(n)}function qhe(n){return xo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"},child:[]}]})(n)}function lZ(n){return xo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"},child:[]}]})(n)}function Vhe(n){return xo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"},child:[]}]})(n)}function UT(n){return xo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"},child:[]}]})(n)}function $he(n){return xo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z"},child:[]}]})(n)}function Hhe(n){return xo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"circle",attr:{cx:"7.2",cy:"14.4",r:"3.2"},child:[]},{tag:"circle",attr:{cx:"14.8",cy:"18",r:"2"},child:[]},{tag:"circle",attr:{cx:"15.2",cy:"8.8",r:"4.8"},child:[]}]})(n)}function cF(n){return xo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M18 4H6v2l6.5 6L6 18v2h12v-3h-7l5-5-5-5h7z"},child:[]}]})(n)}function Zhe(n){return xo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"},child:[]}]})(n)}function AF(n){return xo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z"},child:[]}]})(n)}function Xhe(n){return xo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2z"},child:[]}]})(n)}function Jhe(n){return xo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"},child:[]}]})(n)}function ede(n){return xo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m11.99 18.54-7.37-5.73L3 14.07l9 7 9-7-1.63-1.27-7.38 5.74zM12 16l7.36-5.73L21 9l-9-7-9 7 1.63 1.27L12 16z"},child:[]}]})(n)}function tde(n){return xo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C8.13 2 5 5.13 5 9c0 1.74.5 3.37 1.41 4.84.95 1.54 2.2 2.86 3.16 4.4.47.75.81 1.45 1.17 2.26.26.55.47 1.5 1.26 1.5s1-.95 1.25-1.5c.37-.81.7-1.51 1.17-2.26.96-1.53 2.21-2.85 3.16-4.4C18.5 12.37 19 10.74 19 9c0-3.87-3.13-7-7-7zm0 9.75a2.5 2.5 0 0 1 0-5 2.5 2.5 0 0 1 0 5z"},child:[]}]})(n)}function nde(n){return xo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m20.5 3-.16.03L15 5.1 9 3 3.36 4.9c-.21.07-.36.25-.36.48V20.5c0 .28.22.5.5.5l.16-.03L9 18.9l6 2.1 5.64-1.9c.21-.07.36-.25.36-.48V3.5c0-.28-.22-.5-.5-.5zM15 19l-6-2.11V5l6 2.11V19z"},child:[]}]})(n)}function uZ(n){return xo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m7 10 5 5 5-5z"},child:[]}]})(n)}function cZ(n){return xo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m7 14 5-5 5 5z"},child:[]}]})(n)}function ide(n){return xo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"},child:[]}]})(n)}function rde(n){return xo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"},child:[]}]})(n)}function ode(n){return xo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"19",r:"2"},child:[]},{tag:"path",attr:{d:"M10 3h4v12h-4z"},child:[]}]})(n)}function sde(n){return xo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"},child:[]}]})(n)}function ade(n){return xo({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"m344 280 88-88m-200 24 64 64M80 320l104-104"},child:[]},{tag:"circle",attr:{cx:"456",cy:"168",r:"24",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"},child:[]},{tag:"circle",attr:{cx:"320",cy:"304",r:"24",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"},child:[]},{tag:"circle",attr:{cx:"208",cy:"192",r:"24",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"},child:[]},{tag:"circle",attr:{cx:"56",cy:"344",r:"24",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"},child:[]}]})(n)}function lde(n){return xo({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M467.3 168.1c-1.8 0-3.5.3-5.1 1l-177.6 92.1h-.1c-7.6 4.7-12.5 12.5-12.5 21.4v185.9c0 6.4 5.6 11.5 12.7 11.5 2.2 0 4.3-.5 6.1-1.4.2-.1.4-.2.5-.3L466 385.6l.3-.1c8.2-4.5 13.7-12.7 13.7-22.1V179.6c0-6.4-5.7-11.5-12.7-11.5zM454.3 118.5L272.6 36.8S261.9 32 256 32c-5.9 0-16.5 4.8-16.5 4.8L57.6 118.5s-8 3.3-8 9.5c0 6.6 8.3 11.5 8.3 11.5l185.5 97.8c3.8 1.7 8.1 2.6 12.6 2.6 4.6 0 8.9-1 12.7-2.7l185.4-97.9s7.5-4 7.5-11.5c.1-6.3-7.3-9.3-7.3-9.3zM227.5 261.2L49.8 169c-1.5-.6-3.3-1-5.1-1-7 0-12.7 5.1-12.7 11.5v183.8c0 9.4 5.5 17.6 13.7 22.1l.2.1 174.7 92.7c1.9 1.1 4.2 1.7 6.6 1.7 7 0 12.7-5.2 12.7-11.5V282.6c.1-8.9-4.9-16.8-12.4-21.4z"},child:[]}]})(n)}function ude(n){return xo({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M634.92 462.7l-288-448C341.03 5.54 330.89 0 320 0s-21.03 5.54-26.92 14.7l-288 448a32.001 32.001 0 0 0-1.17 32.64A32.004 32.004 0 0 0 32 512h576c11.71 0 22.48-6.39 28.09-16.67a31.983 31.983 0 0 0-1.17-32.63zM320 91.18L405.39 224H320l-64 64-38.06-38.06L320 91.18z"},child:[]}]})(n)}function ua(){var n="/home/runner/work/maputnik/maputnik/src/components/IconLayer.tsx",e="0b6460c942a48f834d2809c818afa5c72625023a",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/IconLayer.tsx",statementMap:{0:{start:{line:7,column:18},end:{line:33,column:1}},1:{start:{line:8,column:20},end:{line:8,column:42}},2:{start:{line:9,column:2},end:{line:32,column:3}},3:{start:{line:11,column:6},end:{line:11,column:61}},4:{start:{line:13,column:6},end:{line:13,column:60}},5:{start:{line:15,column:6},end:{line:15,column:62}},6:{start:{line:17,column:6},end:{line:17,column:63}},7:{start:{line:19,column:6},end:{line:19,column:66}},8:{start:{line:21,column:6},end:{line:21,column:66}},9:{start:{line:23,column:6},end:{line:23,column:59}},10:{start:{line:25,column:6},end:{line:25,column:71}},11:{start:{line:27,column:6},end:{line:27,column:66}},12:{start:{line:29,column:6},end:{line:29,column:61}},13:{start:{line:31,column:6},end:{line:31,column:67}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:18},end:{line:7,column:19}},loc:{start:{line:7,column:29},end:{line:33,column:1}},line:7}},branchMap:{0:{loc:{start:{line:9,column:2},end:{line:32,column:3}},type:"switch",locations:[{start:{line:10,column:4},end:{line:11,column:61}},{start:{line:12,column:4},end:{line:13,column:60}},{start:{line:14,column:4},end:{line:15,column:62}},{start:{line:16,column:4},end:{line:17,column:63}},{start:{line:18,column:4},end:{line:19,column:66}},{start:{line:20,column:4},end:{line:21,column:66}},{start:{line:22,column:4},end:{line:23,column:59}},{start:{line:24,column:4},end:{line:25,column:71}},{start:{line:26,column:4},end:{line:27,column:66}},{start:{line:28,column:4},end:{line:29,column:61}},{start:{line:30,column:4},end:{line:31,column:67}}],line:9}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0},f:{0:0},b:{0:[0,0,0,0,0,0,0,0,0,0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/IconLayer.tsx"],names:[],mappings:"AAkBkC;AAflC,SAAS,QAAQ,eAAe,iBAAiB;AACjD,SAAS,eAAe,UAAU,eAAe,SAAS,sBAAsB;AAChF,SAAS,0BAA0B;AACnC,SAAS,gBAAgB;AACzB,SAAS,kBAAkB;AAQ3B,MAAM,YAAsC,CAAC,UAAU;AACrD,QAAM,YAAY,EAAE,OAAO,MAAM,MAAM;AACvC,UAAO,MAAM,MAAM;AAAA,IACjB,KAAK;AAAkB,aAAO,oBAAC,YAAU,GAAG,WAAW;AAAA,IACvD,KAAK;AAAU,aAAO,oBAAC,WAAS,GAAG,WAAW;AAAA,IAC9C,KAAK;AAAa,aAAO,oBAAC,aAAW,GAAG,WAAW;AAAA,IACnD,KAAK;AAAgB,aAAO,oBAAC,cAAY,GAAG,WAAW;AAAA,IACvD,KAAK;AAAW,aAAO,oBAAC,iBAAe,GAAG,WAAW;AAAA,IACrD,KAAK;AAAQ,aAAO,oBAAC,iBAAe,GAAG,WAAW;AAAA,IAClD,KAAK;AAAc,aAAO,oBAAC,UAAQ,GAAG,WAAW;AAAA,IACjD,KAAK;AAAQ,aAAO,oBAAC,sBAAoB,GAAG,WAAW;AAAA,IACvD,KAAK;AAAU,aAAO,oBAAC,iBAAe,GAAG,WAAW;AAAA,IACpD,KAAK;AAAU,aAAO,oBAAC,YAAU,GAAG,WAAW;AAAA,IAC/C;AAAS,aAAO,oBAAC,kBAAgB,GAAG,WAAW;AAAA,EACjD;AACF;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"0b6460c942a48f834d2809c818afa5c72625023a"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return ua=function(){return s},s}ua();ua().s[0]++;const AZ=n=>{ua().f[0]++;const e=(ua().s[1]++,{style:n.style});switch(ua().s[2]++,n.type){case"fill-extrusion":return ua().b[0][0]++,ua().s[3]++,te.jsx(lde,{...e});case"raster":return ua().b[0][1]++,ua().s[4]++,te.jsx(Jhe,{...e});case"hillshade":return ua().b[0][2]++,ua().s[5]++,te.jsx(Khe,{...e});case"color-relief":return ua().b[0][3]++,ua().s[6]++,te.jsx(ude,{...e});case"heatmap":return ua().b[0][4]++,ua().s[7]++,te.jsx(Hhe,{...e});case"fill":return ua().b[0][5]++,ua().s[8]++,te.jsx(Uhe,{...e});case"background":return ua().b[0][6]++,ua().s[9]++,te.jsx(Phe,{...e});case"line":return ua().b[0][7]++,ua().s[10]++,te.jsx(ade,{...e});case"symbol":return ua().b[0][8]++,ua().s[11]++,te.jsx(tde,{...e});case"circle":return ua().b[0][9]++,ua().s[12]++,te.jsx(Xhe,{...e});default:return ua().b[0][10]++,ua().s[13]++,te.jsx(ode,{...e})}};function Ci(){var n="/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlLayerPopup.tsx",e="6d83428b3c695d7740365dc3cc3e42bdf4d49028",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlLayerPopup.tsx",statementMap:{0:{start:{line:5,column:18},end:{line:5,column:20}},1:{start:{line:6,column:27},end:{line:6,column:29}},2:{start:{line:7,column:2},end:{line:18,column:5}},3:{start:{line:8,column:22},end:{line:8,column:51}},4:{start:{line:9,column:4},end:{line:17,column:5}},5:{start:{line:10,column:6},end:{line:10,column:43}},6:{start:{line:11,column:28},end:{line:11,column:91}},7:{start:{line:11,column:59},end:{line:11,column:90}},8:{start:{line:12,column:6},end:{line:12,column:65}},9:{start:{line:14,column:6},end:{line:14,column:52}},10:{start:{line:15,column:6},end:{line:15,column:39}},11:{start:{line:16,column:6},end:{line:16,column:45}},12:{start:{line:19,column:2},end:{line:19,column:17}},13:{start:{line:23,column:4},end:{line:25,column:5}},14:{start:{line:24,column:6},end:{line:24,column:13}},15:{start:{line:26,column:4},end:{line:44,column:5}},16:{start:{line:27,column:25},end:{line:27,column:44}},17:{start:{line:28,column:6},end:{line:30,column:7}},18:{start:{line:29,column:8},end:{line:29,column:48}},19:{start:{line:31,column:6},end:{line:33,column:7}},20:{start:{line:32,column:8},end:{line:32,column:48}},21:{start:{line:34,column:6},end:{line:36,column:7}},22:{start:{line:35,column:8},end:{line:35,column:48}},23:{start:{line:37,column:6},end:{line:39,column:7}},24:{start:{line:38,column:8},end:{line:38,column:58}},25:{start:{line:40,column:6},end:{line:40,column:21}},26:{start:{line:42,column:6},end:{line:42,column:63}},27:{start:{line:43,column:6},end:{line:43,column:21}},28:{start:{line:47,column:20},end:{line:47,column:67}},29:{start:{line:48,column:18},end:{line:93,column:6}},30:{start:{line:49,column:21},end:{line:88,column:8}},31:{start:{line:50,column:29},end:{line:50,column:76}},32:{start:{line:51,column:8},end:{line:87,column:10}},33:{start:{line:68,column:20},end:{line:68,column:63}},34:{start:{line:89,column:6},end:{line:92,column:26}},35:{start:{line:94,column:4},end:{line:94,column:152}}},fnMap:{0:{name:"groupFeaturesBySourceLayer",decl:{start:{line:4,column:9},end:{line:4,column:35}},loc:{start:{line:4,column:46},end:{line:20,column:1}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:7,column:19},end:{line:7,column:20}},loc:{start:{line:7,column:32},end:{line:18,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:11,column:52},end:{line:11,column:53}},loc:{start:{line:11,column:59},end:{line:11,column:90}},line:11},3:{name:"(anonymous_3)",decl:{start:{line:22,column:2},end:{line:22,column:3}},loc:{start:{line:22,column:35},end:{line:45,column:3}},line:22},4:{name:"(anonymous_4)",decl:{start:{line:46,column:2},end:{line:46,column:3}},loc:{start:{line:46,column:11},end:{line:95,column:3}},line:46},5:{name:"(anonymous_5)",decl:{start:{line:48,column:43},end:{line:48,column:44}},loc:{start:{line:48,column:62},end:{line:93,column:5}},line:48},6:{name:"(anonymous_6)",decl:{start:{line:49,column:48},end:{line:49,column:49}},loc:{start:{line:49,column:66},end:{line:88,column:7}},line:49},7:{name:"(anonymous_7)",decl:{start:{line:67,column:27},end:{line:67,column:28}},loc:{start:{line:67,column:33},end:{line:69,column:19}},line:67}},branchMap:{0:{loc:{start:{line:9,column:4},end:{line:17,column:5}},type:"if",locations:[{start:{line:9,column:4},end:{line:17,column:5}},{start:{line:13,column:11},end:{line:17,column:5}}],line:9},1:{loc:{start:{line:14,column:27},end:{line:14,column:51}},type:"binary-expr",locations:[{start:{line:14,column:27},end:{line:14,column:45}},{start:{line:14,column:49},end:{line:14,column:51}}],line:14},2:{loc:{start:{line:23,column:4},end:{line:25,column:5}},type:"if",locations:[{start:{line:23,column:4},end:{line:25,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:23},3:{loc:{start:{line:28,column:6},end:{line:30,column:7}},type:"if",locations:[{start:{line:28,column:6},end:{line:30,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:28},4:{loc:{start:{line:28,column:10},end:{line:28,column:64}},type:"binary-expr",locations:[{start:{line:28,column:10},end:{line:28,column:36}},{start:{line:28,column:40},end:{line:28,column:64}}],line:28},5:{loc:{start:{line:31,column:6},end:{line:33,column:7}},type:"if",locations:[{start:{line:31,column:6},end:{line:33,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:31},6:{loc:{start:{line:31,column:10},end:{line:31,column:64}},type:"binary-expr",locations:[{start:{line:31,column:10},end:{line:31,column:36}},{start:{line:31,column:40},end:{line:31,column:64}}],line:31},7:{loc:{start:{line:34,column:6},end:{line:36,column:7}},type:"if",locations:[{start:{line:34,column:6},end:{line:36,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:34},8:{loc:{start:{line:34,column:10},end:{line:34,column:64}},type:"binary-expr",locations:[{start:{line:34,column:10},end:{line:34,column:36}},{start:{line:34,column:40},end:{line:34,column:64}}],line:34},9:{loc:{start:{line:37,column:6},end:{line:39,column:7}},type:"if",locations:[{start:{line:37,column:6},end:{line:39,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},10:{loc:{start:{line:37,column:10},end:{line:37,column:84}},type:"binary-expr",locations:[{start:{line:37,column:10},end:{line:37,column:46}},{start:{line:37,column:50},end:{line:37,column:84}}],line:37},11:{loc:{start:{line:71,column:20},end:{line:75,column:24}},type:"binary-expr",locations:[{start:{line:71,column:20},end:{line:71,column:38}},{start:{line:71,column:58},end:{line:75,column:24}}],line:71},12:{loc:{start:{line:77,column:20},end:{line:80,column:24}},type:"binary-expr",locations:[{start:{line:77,column:20},end:{line:77,column:35}},{start:{line:77,column:55},end:{line:80,column:24}}],line:77}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlLayerPopup.tsx"],names:[],mappings:"AA8EU,cAkBsB,YAlBtB;AA9EV,OAAO,WAAW;AAClB,OAAO,eAAe;AAGtB,SAAS,2BAA2B,UAA4B;AAC9D,QAAM,UAA6C,CAAC;AAEpD,QAAM,mBAA4C,CAAC;AAEnD,WAAS,QAAQ,aAAW;AAC1B,UAAM,YAAY,QAAQ,MAAM,cAAc;AAC9C,QAAG,OAAO,UAAU,eAAe,KAAK,kBAAkB,QAAQ,MAAM,EAAE,GAAG;AAC3E,uBAAiB,QAAQ,MAAM,EAAE;AAEjC,YAAM,gBAAgB,QAAQ,SAAS,EAAE,KAAK,CAAC,MAAsB,EAAE,MAAM,OAAO,QAAQ,MAAM,EAAE;AAEpG,oBAAe,UAAU,iBAAiB,QAAQ,MAAM,EAAE;AAAA,IAC5D,OAAO;AACL,cAAQ,SAAS,IAAI,QAAQ,SAAS,KAAK,CAAC;AAC5C,cAAQ,SAAS,EAAE,KAAK,OAAO;AAE/B,uBAAiB,QAAQ,MAAM,EAAE,IAAI;AAAA,IACvC;AAAA,EACF,CAAC;AAED,SAAO;AACT;AAQA,MAAM,0BAA0B,MAAM,UAAkC;AAAA,EACtE,iBAAiB,SAAyB,OAAgB;AAExD,QAAI,CAAC,QAAQ,MAAM,OAAO;AACxB;AAAA,IACF;AAEA,QAAI;AACF,YAAM,aAAa,QAAQ,MAAM;AAEjC,UAAG,gBAAgB,cAAc,WAAW,YAAY,GAAG;AACzD,eAAO,OAAO,WAAW,YAAY,CAAC;AAAA,MACxC;AACA,UAAI,gBAAgB,cAAc,WAAW,YAAY,GAAG;AAC1D,eAAO,OAAO,WAAW,YAAY,CAAC;AAAA,MACxC;AACA,UAAI,gBAAgB,cAAc,WAAW,YAAY,GAAG;AAC1D,eAAO,OAAO,WAAW,YAAY,CAAC;AAAA,MACxC;AACA,UAAI,0BAA0B,cAAc,WAAW,sBAAsB,GAAG;AAC9E,eAAO,OAAO,WAAW,sBAAsB,CAAC;AAAA,MAClD;AAEA,aAAO;AAAA,IACT,SAGO,KAAK;AACV,cAAQ,KAAK,uCAAuC,GAAG;AACvD,aAAO;AAAA,IACT;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,UAAU,2BAA2B,KAAK,MAAM,QAAQ;AAE9D,UAAM,QAAQ,OAAO,KAAK,OAAO,EAAE,IAAI,mBAAiB;AACtD,YAAM,SAAS,QAAQ,aAAa,EAAE,IAAI,CAAC,SAAyB,QAAgB;AAClF,cAAM,eAAe,KAAK,iBAAiB,SAAS,KAAK,MAAM,IAAI;AAEnE,eAAO;AAAA,UAAC;AAAA;AAAA,YAEN,WAAU;AAAA,YAEV;AAAA;AAAA,gBAAC;AAAA;AAAA,kBACC,WAAU;AAAA,kBACV,OAAO,EAAC,YAAY,aAAY;AAAA;AAAA,cACjC;AAAA,cACD;AAAA,gBAAC;AAAA;AAAA,kBACC,WAAU;AAAA,kBACV,SAAS,MAAM;AACb,yBAAK,MAAM,cAAc,QAAQ,MAAM,EAAE;AAAA,kBAC3C;AAAA,kBAEC;AAAA,4BAAQ,MAAM,QACb,oBAAC,aAAU,MAAM,QAAQ,MAAM,MAAM,OAAO;AAAA,sBAC1C,OAAO;AAAA,sBACP,QAAQ;AAAA,sBACR,cAAc;AAAA,oBAChB,GAAE;AAAA,oBAEH,QAAQ,MAAM;AAAA,oBACd,QAAQ,WAAW,qBAAC,UAAK;AAAA;AAAA,sBAAI,QAAQ;AAAA,uBAAQ;AAAA;AAAA;AAAA,cAChD;AAAA;AAAA;AAAA,UAtBK;AAAA,QAuBP;AAAA,MACF,CAAC;AACD,aAAO,qBAAC,SACN;AAAA,4BAAC,SAAI,WAAU,2BAA2B,yBAAc;AAAA,QACvD;AAAA,WAFc,aAGjB;AAAA,IACF,CAAC;AAED,WAAO,oBAAC,SAAI,WAAU,gCAA+B,eAAY,uBAAsB,KAAI,OACxF,iBACH;AAAA,EACF;AACF;AAGA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"6d83428b3c695d7740365dc3cc3e42bdf4d49028"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Ci=function(){return s},s}Ci();function cde(n){Ci().f[0]++;const e=(Ci().s[0]++,{}),t=(Ci().s[1]++,{});return Ci().s[2]++,n.forEach(i=>{Ci().f[1]++;const r=(Ci().s[3]++,i.layer["source-layer"]);if(Ci().s[4]++,Object.prototype.hasOwnProperty.call(t,i.layer.id)){Ci().b[0][0]++,Ci().s[5]++,t[i.layer.id]++;const o=(Ci().s[6]++,e[r].find(s=>(Ci().f[2]++,Ci().s[7]++,s.layer.id===i.layer.id)));Ci().s[8]++,o.counter=t[i.layer.id]}else Ci().b[0][1]++,Ci().s[9]++,e[r]=(Ci().b[1][0]++,e[r]||(Ci().b[1][1]++,[])),Ci().s[10]++,e[r].push(i),Ci().s[11]++,t[i.layer.id]=1}),Ci().s[12]++,e}class hZ extends On.Component{_getFeatureColor(e,t){if(Ci().f[3]++,Ci().s[13]++,e.layer.paint)Ci().b[2][1]++;else{Ci().b[2][0]++,Ci().s[14]++;return}Ci().s[15]++;try{const i=(Ci().s[16]++,e.layer.paint);return Ci().s[17]++,Ci().b[4][0]++,"text-color"in i&&(Ci().b[4][1]++,i["text-color"])?(Ci().b[3][0]++,Ci().s[18]++,String(i["text-color"])):(Ci().b[3][1]++,Ci().s[19]++,Ci().b[6][0]++,"fill-color"in i&&(Ci().b[6][1]++,i["fill-color"])?(Ci().b[5][0]++,Ci().s[20]++,String(i["fill-color"])):(Ci().b[5][1]++,Ci().s[21]++,Ci().b[8][0]++,"line-color"in i&&(Ci().b[8][1]++,i["line-color"])?(Ci().b[7][0]++,Ci().s[22]++,String(i["line-color"])):(Ci().b[7][1]++,Ci().s[23]++,Ci().b[10][0]++,"fill-extrusion-color"in i&&(Ci().b[10][1]++,i["fill-extrusion-color"])?(Ci().b[9][0]++,Ci().s[24]++,String(i["fill-extrusion-color"])):(Ci().b[9][1]++,Ci().s[25]++,"black"))))}catch(i){return Ci().s[26]++,console.warn("Unable to get feature color, error:",i),Ci().s[27]++,"black"}}render(){Ci().f[4]++;const e=(Ci().s[28]++,cde(this.props.features)),t=(Ci().s[29]++,Object.keys(e).map(i=>{Ci().f[5]++;const r=(Ci().s[30]++,e[i].map((o,s)=>{Ci().f[6]++;const a=(Ci().s[31]++,this._getFeatureColor(o,this.props.zoom));return Ci().s[32]++,te.jsxs("div",{className:"maputnik-popup-layer",children:[te.jsx("div",{className:"maputnik-popup-layer__swatch",style:{background:a}}),te.jsxs("label",{className:"maputnik-popup-layer__label",onClick:()=>{Ci().f[7]++,Ci().s[33]++,this.props.onLayerSelect(o.layer.id)},children:[(Ci().b[11][0]++,o.layer.type&&(Ci().b[11][1]++,te.jsx(AZ,{type:o.layer.type,style:{width:14,height:14,paddingRight:3}}))),o.layer.id,(Ci().b[12][0]++,o.counter&&(Ci().b[12][1]++,te.jsxs("span",{children:["  ",o.counter]})))]})]},s)}));return Ci().s[34]++,te.jsxs("div",{children:[te.jsx("div",{className:"maputnik-popup-layer-id",children:i}),r]},i)}));return Ci().s[35]++,te.jsx("div",{className:"maputnik-feature-layer-popup","data-wd-key":"feature-layer-popup",dir:"ltr",children:t})}}function fr(){var n="/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlFeaturePropertyPopup.tsx",e="1e4c480681bcaba84c2c41960b73ded2066b54bc",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlFeaturePropertyPopup.tsx",statementMap:{0:{start:{line:4,column:2},end:{line:4,column:67}},1:{start:{line:4,column:54},end:{line:4,column:67}},2:{start:{line:5,column:2},end:{line:5,column:59}},3:{start:{line:5,column:29},end:{line:5,column:59}},4:{start:{line:6,column:2},end:{line:6,column:115}},5:{start:{line:6,column:91},end:{line:6,column:115}},6:{start:{line:7,column:2},end:{line:7,column:15}},7:{start:{line:10,column:2},end:{line:13,column:12}},8:{start:{line:16,column:2},end:{line:32,column:12}},9:{start:{line:29,column:23},end:{line:29,column:55}},10:{start:{line:30,column:6},end:{line:30,column:74}},11:{start:{line:35,column:25},end:{line:35,column:27}},12:{start:{line:36,column:2},end:{line:49,column:5}},13:{start:{line:37,column:25},end:{line:39,column:6}},14:{start:{line:38,column:6},end:{line:38,column:156}},15:{start:{line:40,column:4},end:{line:48,column:5}},16:{start:{line:41,column:6},end:{line:41,column:35}},17:{start:{line:43,column:6},end:{line:47,column:7}},18:{start:{line:44,column:8},end:{line:44,column:58}},19:{start:{line:46,column:8},end:{line:46,column:60}},20:{start:{line:50,column:2},end:{line:50,column:24}},21:{start:{line:54,column:21},end:{line:54,column:66}},22:{start:{line:55,column:4},end:{line:55,column:303}}},fnMap:{0:{name:"displayValue",decl:{start:{line:3,column:9},end:{line:3,column:21}},loc:{start:{line:3,column:29},end:{line:8,column:1}},line:3},1:{name:"renderKeyValueTableRow",decl:{start:{line:9,column:9},end:{line:9,column:31}},loc:{start:{line:9,column:44},end:{line:14,column:1}},line:9},2:{name:"renderFeature",decl:{start:{line:15,column:9},end:{line:15,column:22}},loc:{start:{line:15,column:37},end:{line:33,column:1}},line:15},3:{name:"(anonymous_3)",decl:{start:{line:28,column:40},end:{line:28,column:41}},loc:{start:{line:28,column:58},end:{line:31,column:5}},line:28},4:{name:"removeDuplicatedFeatures",decl:{start:{line:34,column:9},end:{line:34,column:33}},loc:{start:{line:34,column:44},end:{line:51,column:1}},line:34},5:{name:"(anonymous_5)",decl:{start:{line:36,column:19},end:{line:36,column:20}},loc:{start:{line:36,column:32},end:{line:49,column:3}},line:36},6:{name:"(anonymous_6)",decl:{start:{line:37,column:50},end:{line:37,column:51}},loc:{start:{line:37,column:64},end:{line:39,column:5}},line:37},7:{name:"(anonymous_7)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:11},end:{line:56,column:3}},line:53}},branchMap:{0:{loc:{start:{line:4,column:2},end:{line:4,column:67}},type:"if",locations:[{start:{line:4,column:2},end:{line:4,column:67}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:4},1:{loc:{start:{line:4,column:6},end:{line:4,column:52}},type:"binary-expr",locations:[{start:{line:4,column:6},end:{line:4,column:34}},{start:{line:4,column:38},end:{line:4,column:52}}],line:4},2:{loc:{start:{line:5,column:2},end:{line:5,column:59}},type:"if",locations:[{start:{line:5,column:2},end:{line:5,column:59}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:5},3:{loc:{start:{line:6,column:2},end:{line:6,column:115}},type:"if",locations:[{start:{line:6,column:2},end:{line:6,column:115}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:6},4:{loc:{start:{line:6,column:6},end:{line:6,column:89}},type:"binary-expr",locations:[{start:{line:6,column:6},end:{line:6,column:31}},{start:{line:6,column:35},end:{line:6,column:60}},{start:{line:6,column:64},end:{line:6,column:89}}],line:6},5:{loc:{start:{line:21,column:6},end:{line:24,column:10}},type:"binary-expr",locations:[{start:{line:21,column:6},end:{line:21,column:32}},{start:{line:21,column:52},end:{line:24,column:10}}],line:21},6:{loc:{start:{line:38,column:13},end:{line:38,column:155}},type:"binary-expr",locations:[{start:{line:38,column:13},end:{line:38,column:77}},{start:{line:38,column:81},end:{line:38,column:155}}],line:38},7:{loc:{start:{line:40,column:4},end:{line:48,column:5}},type:"if",locations:[{start:{line:40,column:4},end:{line:48,column:5}},{start:{line:42,column:11},end:{line:48,column:5}}],line:40},8:{loc:{start:{line:43,column:6},end:{line:47,column:7}},type:"if",locations:[{start:{line:43,column:6},end:{line:47,column:7}},{start:{line:45,column:13},end:{line:47,column:7}}],line:43}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlFeaturePropertyPopup.tsx"],names:[],mappings:"AAkBS,SACL,KADK;AAlBT,OAAO,WAAW;AAQlB,SAAS,aAAa,OAAoD;AACxE,MAAI,OAAO,UAAU,eAAe,UAAU,KAAM,QAAO;AAC3D,MAAI,iBAAiB,KAAM,QAAO,MAAM,eAAe;AACvD,MAAI,OAAO,UAAU,YACb,OAAO,UAAU,YACjB,OAAO,UAAU,SAAU,QAAO,MAAM,SAAS;AACzD,SAAO;AACT;AAEA,SAAS,uBAAuB,KAAa,OAA2B;AACtE,SAAO,qBAAC,QACN;AAAA,wBAAC,QAAG,WAAU,6BAA6B,eAAI;AAAA,IAC/C,oBAAC,QAAG,WAAU,6BAA6B,iBAAM;AAAA,OAFnC,GAGhB;AACF;AAEA,SAAS,cAAc,SAAyB,KAAa;AAC3D,SAAO,qBAAC,MAAM,UAAN,EACN;AAAA,wBAAC,QACC,+BAAC,QAAG,SAAS,GAAG,WAAU,2BAA2B;AAAA,cAAQ,MAAM,QAAQ;AAAA,MAAE;AAAA,MAAG,QAAQ,MAAM,cAAc;AAAA,MAAG,QAAQ,sBAAsB,qBAAC,UAAK;AAAA;AAAA,QAAI,QAAQ;AAAA,SAAmB;AAAA,OAAQ,GAC5L;AAAA,IACC,uBAAuB,SAAS,QAAQ,SAAS,IAAI;AAAA,IACrD,uBAAuB,OAAO,aAAa,QAAQ,EAAE,CAAC;AAAA,IACtD,OAAO,KAAK,QAAQ,UAAU,EAAE,IAAI,kBAAgB;AACnD,YAAM,WAAW,QAAQ,WAAW,YAAY;AAChD,aAAO,uBAAuB,cAAc,aAAa,QAAQ,CAAC;AAAA,IACpE,CAAC;AAAA,OATyB,GAU5B;AACF;AAEA,SAAS,yBAAyB,UAA4B;AAC5D,QAAM,iBAAmC,CAAC;AAE1C,WAAS,QAAQ,aAAW;AAC1B,UAAM,eAAe,eAAe,UAAU,cAAY;AACxD,aAAO,QAAQ,MAAM,cAAc,MAAM,SAAS,MAAM,cAAc,KACjE,KAAK,UAAU,QAAQ,UAAU,MAAM,KAAK,UAAU,SAAS,UAAU;AAAA,IAChF,CAAC;AAED,QAAG,iBAAiB,IAAI;AACtB,qBAAe,KAAK,OAAO;AAAA,IAC7B,OAAO;AACL,UAAG,wBAAwB,eAAe,YAAY,GAAG;AACvD,uBAAe,YAAY,EAAE;AAAA,MAC/B,OAAO;AACL,uBAAe,YAAY,EAAE,qBAAqB;AAAA,MACpD;AAAA,IACF;AAAA,EACF,CAAC;AAED,SAAO;AACT;AAMA,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,SAAS;AACP,UAAM,WAAW,yBAAyB,KAAK,MAAM,QAAQ;AAC7D,WAAO,oBAAC,SAAI,WAAU,mCAAkC,KAAI,OAAM,eAAY,0BAC5E,8BAAC,WAAM,WAAU,wBACf,8BAAC,WACE,mBAAS,IAAI,aAAa,GAC7B,GACF,GACF;AAAA,EACF;AACF;AAGA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"1e4c480681bcaba84c2c41960b73ded2066b54bc"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return fr=function(){return s},s}fr();function hF(n){return fr().f[0]++,fr().s[0]++,fr().b[1][0]++,typeof n>"u"||(fr().b[1][1]++,n===null)?(fr().b[0][0]++,fr().s[1]++,n):(fr().b[0][1]++,fr().s[2]++,n instanceof Date?(fr().b[2][0]++,fr().s[3]++,n.toLocaleString()):(fr().b[2][1]++,fr().s[4]++,fr().b[4][0]++,typeof n=="object"||(fr().b[4][1]++,typeof n=="number")||(fr().b[4][2]++,typeof n=="string")?(fr().b[3][0]++,fr().s[5]++,n.toString()):(fr().b[3][1]++,fr().s[6]++,n)))}function BB(n,e){return fr().f[1]++,fr().s[7]++,te.jsxs("tr",{children:[te.jsx("td",{className:"maputnik-popup-table-cell",children:n}),te.jsx("td",{className:"maputnik-popup-table-cell",children:e})]},n)}function Ade(n,e){return fr().f[2]++,fr().s[8]++,te.jsxs(On.Fragment,{children:[te.jsx("tr",{children:te.jsxs("td",{colSpan:2,className:"maputnik-popup-layer-id",children:[n.layer.source,": ",n.layer["source-layer"],(fr().b[5][0]++,n.inspectModeCounter&&(fr().b[5][1]++,te.jsxs("span",{children:["  ",n.inspectModeCounter]})))]})}),BB("$type",n.geometry.type),BB("$id",hF(n.id)),Object.keys(n.properties).map(t=>{fr().f[3]++;const i=(fr().s[9]++,n.properties[t]);return fr().s[10]++,BB(t,hF(i))})]},e)}function hde(n){fr().f[4]++;const e=(fr().s[11]++,[]);return fr().s[12]++,n.forEach(t=>{fr().f[5]++;const i=(fr().s[13]++,e.findIndex(r=>(fr().f[6]++,fr().s[14]++,fr().b[6][0]++,t.layer["source-layer"]===r.layer["source-layer"]&&(fr().b[6][1]++,JSON.stringify(t.properties)===JSON.stringify(r.properties)))));fr().s[15]++,i===-1?(fr().b[7][0]++,fr().s[16]++,e.push(t)):(fr().b[7][1]++,fr().s[17]++,"inspectModeCounter"in e[i]?(fr().b[8][0]++,fr().s[18]++,e[i].inspectModeCounter++):(fr().b[8][1]++,fr().s[19]++,e[i].inspectModeCounter=2))}),fr().s[20]++,e}class dde extends On.Component{render(){fr().f[7]++;const e=(fr().s[21]++,hde(this.props.features));return fr().s[22]++,te.jsx("div",{className:"maputnik-feature-property-popup",dir:"ltr","data-wd-key":"feature-property-popup",children:te.jsx("table",{className:"maputnik-popup-table",children:te.jsx("tbody",{children:e.map(Ade)})})})}}const c3={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},dZ=Object.create(null);for(const n in c3)Object.hasOwn(c3,n)&&(dZ[c3[n]]=n);const Bc={to:{},get:{}};Bc.get=function(n){const e=n.slice(0,3).toLowerCase();let t,i;switch(e){case"hsl":{t=Bc.get.hsl(n),i="hsl";break}case"hwb":{t=Bc.get.hwb(n),i="hwb";break}default:{t=Bc.get.rgb(n),i="rgb";break}}return t?{model:i,value:t}:null};Bc.get.rgb=function(n){if(!n)return null;const e=/^#([a-f\d]{3,4})$/i,t=/^#([a-f\d]{6})([a-f\d]{2})?$/i,i=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[\s,|/]\s*([+-]?[\d.]+)(%?)\s*)?\)$/,r=/^rgba?\(\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*(?:[\s,|/]\s*([+-]?[\d.]+)(%?)\s*)?\)$/,o=/^(\w+)$/;let s=[0,0,0,1],a,c,h;if(a=n.match(t)){for(h=a[2],a=a[1],c=0;c<3;c++){const m=c*2;s[c]=Number.parseInt(a.slice(m,m+2),16)}h&&(s[3]=Number.parseInt(h,16)/255)}else if(a=n.match(e)){for(a=a[1],h=a[3],c=0;c<3;c++)s[c]=Number.parseInt(a[c]+a[c],16);h&&(s[3]=Number.parseInt(h+h,16)/255)}else if(a=n.match(i)){for(c=0;c<3;c++)s[c]=Number.parseInt(a[c+1],10);a[4]&&(s[3]=a[5]?Number.parseFloat(a[4])*.01:Number.parseFloat(a[4]))}else if(a=n.match(r)){for(c=0;c<3;c++)s[c]=Math.round(Number.parseFloat(a[c+1])*2.55);a[4]&&(s[3]=a[5]?Number.parseFloat(a[4])*.01:Number.parseFloat(a[4]))}else return(a=n.match(o))?a[1]==="transparent"?[0,0,0,0]:Object.hasOwn(c3,a[1])?(s=c3[a[1]],s[3]=1,s):null:null;for(c=0;c<3;c++)s[c]=Vy(s[c],0,255);return s[3]=Vy(s[3],0,1),s};Bc.get.hsl=function(n){if(!n)return null;const e=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*(?:[,|/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,t=n.match(e);if(t){const i=Number.parseFloat(t[4]),r=(Number.parseFloat(t[1])%360+360)%360,o=Vy(Number.parseFloat(t[2]),0,100),s=Vy(Number.parseFloat(t[3]),0,100),a=Vy(Number.isNaN(i)?1:i,0,1);return[r,o,s,a]}return null};Bc.get.hwb=function(n){if(!n)return null;const e=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*[\s,]\s*([+-]?[\d.]+)%\s*[\s,]\s*([+-]?[\d.]+)%\s*(?:[\s,]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,t=n.match(e);if(t){const i=Number.parseFloat(t[4]),r=(Number.parseFloat(t[1])%360+360)%360,o=Vy(Number.parseFloat(t[2]),0,100),s=Vy(Number.parseFloat(t[3]),0,100),a=Vy(Number.isNaN(i)?1:i,0,1);return[r,o,s,a]}return null};Bc.to.hex=function(...n){return"#"+QM(n[0])+QM(n[1])+QM(n[2])+(n[3]<1?QM(Math.round(n[3]*255)):"")};Bc.to.rgb=function(...n){return n.length<4||n[3]===1?"rgb("+Math.round(n[0])+", "+Math.round(n[1])+", "+Math.round(n[2])+")":"rgba("+Math.round(n[0])+", "+Math.round(n[1])+", "+Math.round(n[2])+", "+n[3]+")"};Bc.to.rgb.percent=function(...n){const e=Math.round(n[0]/255*100),t=Math.round(n[1]/255*100),i=Math.round(n[2]/255*100);return n.length<4||n[3]===1?"rgb("+e+"%, "+t+"%, "+i+"%)":"rgba("+e+"%, "+t+"%, "+i+"%, "+n[3]+")"};Bc.to.hsl=function(...n){return n.length<4||n[3]===1?"hsl("+n[0]+", "+n[1]+"%, "+n[2]+"%)":"hsla("+n[0]+", "+n[1]+"%, "+n[2]+"%, "+n[3]+")"};Bc.to.hwb=function(...n){let e="";return n.length>=4&&n[3]!==1&&(e=", "+n[3]),"hwb("+n[0]+", "+n[1]+"%, "+n[2]+"%"+e+")"};Bc.to.keyword=function(...n){return dZ[n.slice(0,3)]};function Vy(n,e,t){return Math.min(Math.max(e,n),t)}function QM(n){const e=Math.round(n).toString(16).toUpperCase();return e.length<2?"0"+e:e}const j3={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},fZ={};for(const n of Object.keys(j3))fZ[j3[n]]=n;const pi={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},oklab:{channels:3,labels:["okl","oka","okb"]},lch:{channels:3,labels:"lch"},oklch:{channels:3,labels:["okl","okc","okh"]},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}},l1=(6/29)**3;function N_(n){const e=n>.0031308?1.055*n**.4166666666666667-.055:n*12.92;return Math.min(Math.max(0,e),1)}function G_(n){return n>.04045?((n+.055)/1.055)**2.4:n/12.92}for(const n of Object.keys(pi)){if(!("channels"in pi[n]))throw new Error("missing channels property: "+n);if(!("labels"in pi[n]))throw new Error("missing channel labels property: "+n);if(pi[n].labels.length!==pi[n].channels)throw new Error("channel and label counts mismatch: "+n);const{channels:e,labels:t}=pi[n];delete pi[n].channels,delete pi[n].labels,Object.defineProperty(pi[n],"channels",{value:e}),Object.defineProperty(pi[n],"labels",{value:t})}pi.rgb.hsl=function(n){const e=n[0]/255,t=n[1]/255,i=n[2]/255,r=Math.min(e,t,i),o=Math.max(e,t,i),s=o-r;let a,c;switch(o){case r:{a=0;break}case e:{a=(t-i)/s;break}case t:{a=2+(i-e)/s;break}case i:{a=4+(e-t)/s;break}}a=Math.min(a*60,360),a<0&&(a+=360);const h=(r+o)/2;return o===r?c=0:h<=.5?c=s/(o+r):c=s/(2-o-r),[a,c*100,h*100]};pi.rgb.hsv=function(n){let e,t,i,r,o;const s=n[0]/255,a=n[1]/255,c=n[2]/255,h=Math.max(s,a,c),m=h-Math.min(s,a,c),v=function(x){return(h-x)/6/m+1/2};if(m===0)r=0,o=0;else{switch(o=m/h,e=v(s),t=v(a),i=v(c),h){case s:{r=i-t;break}case a:{r=1/3+e-i;break}case c:{r=2/3+t-e;break}}r<0?r+=1:r>1&&(r-=1)}return[r*360,o*100,h*100]};pi.rgb.hwb=function(n){const e=n[0],t=n[1];let i=n[2];const r=pi.rgb.hsl(n)[0],o=1/255*Math.min(e,Math.min(t,i));return i=1-1/255*Math.max(e,Math.max(t,i)),[r,o*100,i*100]};pi.rgb.oklab=function(n){const e=G_(n[0]/255),t=G_(n[1]/255),i=G_(n[2]/255),r=Math.cbrt(.4122214708*e+.5363325363*t+.0514459929*i),o=Math.cbrt(.2119034982*e+.6806995451*t+.1073969566*i),s=Math.cbrt(.0883024619*e+.2817188376*t+.6299787005*i),a=.2104542553*r+.793617785*o-.0040720468*s,c=1.9779984951*r-2.428592205*o+.4505937099*s,h=.0259040371*r+.7827717662*o-.808675766*s;return[a*100,c*100,h*100]};pi.rgb.cmyk=function(n){const e=n[0]/255,t=n[1]/255,i=n[2]/255,r=Math.min(1-e,1-t,1-i),o=(1-e-r)/(1-r)||0,s=(1-t-r)/(1-r)||0,a=(1-i-r)/(1-r)||0;return[o*100,s*100,a*100,r*100]};function fde(n,e){return(n[0]-e[0])**2+(n[1]-e[1])**2+(n[2]-e[2])**2}pi.rgb.keyword=function(n){const e=fZ[n];if(e)return e;let t=Number.POSITIVE_INFINITY,i;for(const r of Object.keys(j3)){const o=j3[r],s=fde(n,o);s<t&&(t=s,i=r)}return i};pi.keyword.rgb=function(n){return j3[n]};pi.rgb.xyz=function(n){const e=G_(n[0]/255),t=G_(n[1]/255),i=G_(n[2]/255),r=e*.4124564+t*.3575761+i*.1804375,o=e*.2126729+t*.7151522+i*.072175,s=e*.0193339+t*.119192+i*.9503041;return[r*100,o*100,s*100]};pi.rgb.lab=function(n){const e=pi.rgb.xyz(n);let t=e[0],i=e[1],r=e[2];t/=95.047,i/=100,r/=108.883,t=t>l1?t**(1/3):7.787*t+16/116,i=i>l1?i**(1/3):7.787*i+16/116,r=r>l1?r**(1/3):7.787*r+16/116;const o=116*i-16,s=500*(t-i),a=200*(i-r);return[o,s,a]};pi.hsl.rgb=function(n){const e=n[0]/360,t=n[1]/100,i=n[2]/100;let r,o;if(t===0)return o=i*255,[o,o,o];const s=i<.5?i*(1+t):i+t-i*t,a=2*i-s,c=[0,0,0];for(let h=0;h<3;h++)r=e+1/3*-(h-1),r<0&&r++,r>1&&r--,6*r<1?o=a+(s-a)*6*r:2*r<1?o=s:3*r<2?o=a+(s-a)*(2/3-r)*6:o=a,c[h]=o*255;return c};pi.hsl.hsv=function(n){const e=n[0];let t=n[1]/100,i=n[2]/100,r=t;const o=Math.max(i,.01);i*=2,t*=i<=1?i:2-i,r*=o<=1?o:2-o;const s=(i+t)/2,a=i===0?2*r/(o+r):2*t/(i+t);return[e,a*100,s*100]};pi.hsv.rgb=function(n){const e=n[0]/60,t=n[1]/100;let i=n[2]/100;const r=Math.floor(e)%6,o=e-Math.floor(e),s=255*i*(1-t),a=255*i*(1-t*o),c=255*i*(1-t*(1-o));switch(i*=255,r){case 0:return[i,c,s];case 1:return[a,i,s];case 2:return[s,i,c];case 3:return[s,a,i];case 4:return[c,s,i];case 5:return[i,s,a]}};pi.hsv.hsl=function(n){const e=n[0],t=n[1]/100,i=n[2]/100,r=Math.max(i,.01);let o,s;s=(2-t)*i;const a=(2-t)*r;return o=t*r,o/=a<=1?a:2-a,o=o||0,s/=2,[e,o*100,s*100]};pi.hwb.rgb=function(n){const e=n[0]/360;let t=n[1]/100,i=n[2]/100;const r=t+i;let o;r>1&&(t/=r,i/=r);const s=Math.floor(6*e),a=1-i;o=6*e-s,(s&1)!==0&&(o=1-o);const c=t+o*(a-t);let h,m,v;switch(s){default:case 6:case 0:{h=a,m=c,v=t;break}case 1:{h=c,m=a,v=t;break}case 2:{h=t,m=a,v=c;break}case 3:{h=t,m=c,v=a;break}case 4:{h=c,m=t,v=a;break}case 5:{h=a,m=t,v=c;break}}return[h*255,m*255,v*255]};pi.cmyk.rgb=function(n){const e=n[0]/100,t=n[1]/100,i=n[2]/100,r=n[3]/100,o=1-Math.min(1,e*(1-r)+r),s=1-Math.min(1,t*(1-r)+r),a=1-Math.min(1,i*(1-r)+r);return[o*255,s*255,a*255]};pi.xyz.rgb=function(n){const e=n[0]/100,t=n[1]/100,i=n[2]/100;let r,o,s;return r=e*3.2404542+t*-1.5371385+i*-.4985314,o=e*-.969266+t*1.8760108+i*.041556,s=e*.0556434+t*-.2040259+i*1.0572252,r=N_(r),o=N_(o),s=N_(s),[r*255,o*255,s*255]};pi.xyz.lab=function(n){let e=n[0],t=n[1],i=n[2];e/=95.047,t/=100,i/=108.883,e=e>l1?e**(1/3):7.787*e+16/116,t=t>l1?t**(1/3):7.787*t+16/116,i=i>l1?i**(1/3):7.787*i+16/116;const r=116*t-16,o=500*(e-t),s=200*(t-i);return[r,o,s]};pi.xyz.oklab=function(n){const e=n[0]/100,t=n[1]/100,i=n[2]/100,r=Math.cbrt(.8189330101*e+.3618667424*t-.1288597137*i),o=Math.cbrt(.0329845436*e+.9293118715*t+.0361456387*i),s=Math.cbrt(.0482003018*e+.2643662691*t+.633851707*i),a=.2104542553*r+.793617785*o-.0040720468*s,c=1.9779984951*r-2.428592205*o+.4505937099*s,h=.0259040371*r+.7827717662*o-.808675766*s;return[a*100,c*100,h*100]};pi.oklab.oklch=function(n){return pi.lab.lch(n)};pi.oklab.xyz=function(n){const e=n[0]/100,t=n[1]/100,i=n[2]/100,r=(.999999998*e+.396337792*t+.215803758*i)**3,o=(1.000000008*e-.105561342*t-.063854175*i)**3,s=(1.000000055*e-.089484182*t-1.291485538*i)**3,a=1.227013851*r-.55779998*o+.281256149*s,c=-.040580178*r+1.11225687*o-.071676679*s,h=-.076381285*r-.421481978*o+1.58616322*s;return[a*100,c*100,h*100]};pi.oklab.rgb=function(n){const e=n[0]/100,t=n[1]/100,i=n[2]/100,r=(e+.3963377774*t+.2158037573*i)**3,o=(e-.1055613458*t-.0638541728*i)**3,s=(e-.0894841775*t-1.291485548*i)**3,a=N_(4.0767416621*r-3.3077115913*o+.2309699292*s),c=N_(-1.2684380046*r+2.6097574011*o-.3413193965*s),h=N_(-.0041960863*r-.7034186147*o+1.707614701*s);return[a*255,c*255,h*255]};pi.oklch.oklab=function(n){return pi.lch.lab(n)};pi.lab.xyz=function(n){const e=n[0],t=n[1],i=n[2];let r,o,s;o=(e+16)/116,r=t/500+o,s=o-i/200;const a=o**3,c=r**3,h=s**3;return o=a>l1?a:(o-16/116)/7.787,r=c>l1?c:(r-16/116)/7.787,s=h>l1?h:(s-16/116)/7.787,r*=95.047,o*=100,s*=108.883,[r,o,s]};pi.lab.lch=function(n){const e=n[0],t=n[1],i=n[2];let r;r=Math.atan2(i,t)*360/2/Math.PI,r<0&&(r+=360);const s=Math.sqrt(t*t+i*i);return[e,s,r]};pi.lch.lab=function(n){const e=n[0],t=n[1],r=n[2]/360*2*Math.PI,o=t*Math.cos(r),s=t*Math.sin(r);return[e,o,s]};pi.rgb.ansi16=function(n,e=null){const[t,i,r]=n;let o=e===null?pi.rgb.hsv(n)[2]:e;if(o=Math.round(o/50),o===0)return 30;let s=30+(Math.round(r/255)<<2|Math.round(i/255)<<1|Math.round(t/255));return o===2&&(s+=60),s};pi.hsv.ansi16=function(n){return pi.rgb.ansi16(pi.hsv.rgb(n),n[2])};pi.rgb.ansi256=function(n){const e=n[0],t=n[1],i=n[2];return e>>4===t>>4&&t>>4===i>>4?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(t/255*5)+Math.round(i/255*5)};pi.ansi16.rgb=function(n){n=n[0];let e=n%10;if(e===0||e===7)return n>50&&(e+=3.5),e=e/10.5*255,[e,e,e];const t=(Math.trunc(n>50)+1)*.5,i=(e&1)*t*255,r=(e>>1&1)*t*255,o=(e>>2&1)*t*255;return[i,r,o]};pi.ansi256.rgb=function(n){if(n=n[0],n>=232){const o=(n-232)*10+8;return[o,o,o]}n-=16;let e;const t=Math.floor(n/36)/5*255,i=Math.floor((e=n%36)/6)/5*255,r=e%6/5*255;return[t,i,r]};pi.rgb.hex=function(n){const t=(((Math.round(n[0])&255)<<16)+((Math.round(n[1])&255)<<8)+(Math.round(n[2])&255)).toString(16).toUpperCase();return"000000".slice(t.length)+t};pi.hex.rgb=function(n){const e=n.toString(16).match(/[a-f\d]{6}|[a-f\d]{3}/i);if(!e)return[0,0,0];let t=e[0];e[0].length===3&&(t=[...t].map(a=>a+a).join(""));const i=Number.parseInt(t,16),r=i>>16&255,o=i>>8&255,s=i&255;return[r,o,s]};pi.rgb.hcg=function(n){const e=n[0]/255,t=n[1]/255,i=n[2]/255,r=Math.max(Math.max(e,t),i),o=Math.min(Math.min(e,t),i),s=r-o;let a;const c=s<1?o/(1-s):0;return s<=0?a=0:r===e?a=(t-i)/s%6:r===t?a=2+(i-e)/s:a=4+(e-t)/s,a/=6,a%=1,[a*360,s*100,c*100]};pi.hsl.hcg=function(n){const e=n[1]/100,t=n[2]/100,i=t<.5?2*e*t:2*e*(1-t);let r=0;return i<1&&(r=(t-.5*i)/(1-i)),[n[0],i*100,r*100]};pi.hsv.hcg=function(n){const e=n[1]/100,t=n[2]/100,i=e*t;let r=0;return i<1&&(r=(t-i)/(1-i)),[n[0],i*100,r*100]};pi.hcg.rgb=function(n){const e=n[0]/360,t=n[1]/100,i=n[2]/100;if(t===0)return[i*255,i*255,i*255];const r=[0,0,0],o=e%1*6,s=o%1,a=1-s;let c=0;switch(Math.floor(o)){case 0:{r[0]=1,r[1]=s,r[2]=0;break}case 1:{r[0]=a,r[1]=1,r[2]=0;break}case 2:{r[0]=0,r[1]=1,r[2]=s;break}case 3:{r[0]=0,r[1]=a,r[2]=1;break}case 4:{r[0]=s,r[1]=0,r[2]=1;break}default:r[0]=1,r[1]=0,r[2]=a}return c=(1-t)*i,[(t*r[0]+c)*255,(t*r[1]+c)*255,(t*r[2]+c)*255]};pi.hcg.hsv=function(n){const e=n[1]/100,t=n[2]/100,i=e+t*(1-e);let r=0;return i>0&&(r=e/i),[n[0],r*100,i*100]};pi.hcg.hsl=function(n){const e=n[1]/100,i=n[2]/100*(1-e)+.5*e;let r=0;return i>0&&i<.5?r=e/(2*i):i>=.5&&i<1&&(r=e/(2*(1-i))),[n[0],r*100,i*100]};pi.hcg.hwb=function(n){const e=n[1]/100,t=n[2]/100,i=e+t*(1-e);return[n[0],(i-e)*100,(1-i)*100]};pi.hwb.hcg=function(n){const e=n[1]/100,i=1-n[2]/100,r=i-e;let o=0;return r<1&&(o=(i-r)/(1-r)),[n[0],r*100,o*100]};pi.apple.rgb=function(n){return[n[0]/65535*255,n[1]/65535*255,n[2]/65535*255]};pi.rgb.apple=function(n){return[n[0]/255*65535,n[1]/255*65535,n[2]/255*65535]};pi.gray.rgb=function(n){return[n[0]/100*255,n[0]/100*255,n[0]/100*255]};pi.gray.hsl=function(n){return[0,0,n[0]]};pi.gray.hsv=pi.gray.hsl;pi.gray.hwb=function(n){return[0,100,n[0]]};pi.gray.cmyk=function(n){return[0,0,0,n[0]]};pi.gray.lab=function(n){return[n[0],0,0]};pi.gray.hex=function(n){const e=Math.round(n[0]/100*255)&255,i=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".slice(i.length)+i};pi.rgb.gray=function(n){return[(n[0]+n[1]+n[2])/3/255*100]};function pde(){const n={},e=Object.keys(pi);for(let{length:t}=e,i=0;i<t;i++)n[e[i]]={distance:-1,parent:null};return n}function mde(n){const e=pde(),t=[n];for(e[n].distance=0;t.length>0;){const i=t.pop(),r=Object.keys(pi[i]);for(let{length:o}=r,s=0;s<o;s++){const a=r[s],c=e[a];c.distance===-1&&(c.distance=e[i].distance+1,c.parent=i,t.unshift(a))}}return e}function gde(n,e){return function(t){return e(n(t))}}function yde(n,e){const t=[e[n].parent,n];let i=pi[e[n].parent][n],r=e[n].parent;for(;e[r].parent;)t.unshift(e[r].parent),i=gde(pi[e[r].parent][r],i),r=e[r].parent;return i.conversion=t,i}function vde(n){const e=mde(n),t={},i=Object.keys(e);for(let{length:r}=i,o=0;o<r;o++){const s=i[o];e[s].parent!==null&&(t[s]=yde(s,e))}return t}const eA={},bde=Object.keys(pi);function Cde(n){const e=function(...t){const i=t[0];return i==null?i:(i.length>1&&(t=i),n(t))};return"conversion"in n&&(e.conversion=n.conversion),e}function _de(n){const e=function(...t){const i=t[0];if(i==null)return i;i.length>1&&(t=i);const r=n(t);if(typeof r=="object")for(let{length:o}=r,s=0;s<o;s++)r[s]=Math.round(r[s]);return r};return"conversion"in n&&(e.conversion=n.conversion),e}for(const n of bde){eA[n]={},Object.defineProperty(eA[n],"channels",{value:pi[n].channels}),Object.defineProperty(eA[n],"labels",{value:pi[n].labels});const e=vde(n),t=Object.keys(e);for(const i of t){const r=e[i];eA[n][i]=_de(r),eA[n][i].raw=Cde(r)}}const pZ=["keyword","gray","hex"],KT={};for(const n of Object.keys(eA))KT[[...eA[n].labels].sort().join("")]=n;const LT={};function $u(n,e){if(!(this instanceof $u))return new $u(n,e);if(e&&e in pZ&&(e=null),e&&!(e in eA))throw new Error("Unknown model: "+e);let t,i;if(n==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(n instanceof $u)this.model=n.model,this.color=[...n.color],this.valpha=n.valpha;else if(typeof n=="string"){const r=Bc.get(n);if(r===null)throw new Error("Unable to parse color from string: "+n);this.model=r.model,i=eA[this.model].channels,this.color=r.value.slice(0,i),this.valpha=typeof r.value[i]=="number"?r.value[i]:1}else if(n.length>0){this.model=e||"rgb",i=eA[this.model].channels;const r=Array.prototype.slice.call(n,0,i);this.color=FT(r,i),this.valpha=typeof n[i]=="number"?n[i]:1}else if(typeof n=="number")this.model="rgb",this.color=[n>>16&255,n>>8&255,n&255],this.valpha=1;else{this.valpha=1;const r=Object.keys(n);"alpha"in n&&(r.splice(r.indexOf("alpha"),1),this.valpha=typeof n.alpha=="number"?n.alpha:0);const o=r.sort().join("");if(!(o in KT))throw new Error("Unable to parse color from object: "+JSON.stringify(n));this.model=KT[o];const{labels:s}=eA[this.model],a=[];for(t=0;t<s.length;t++)a.push(n[s[t]]);this.color=FT(a)}if(LT[this.model])for(i=eA[this.model].channels,t=0;t<i;t++){const r=LT[this.model][t];r&&(this.color[t]=r(this.color[t]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}$u.prototype={toString(){return this.string()},toJSON(){return this[this.model]()},string(n){let e=this.model in Bc.to?this:this.rgb();e=e.round(typeof n=="number"?n:1);const t=e.valpha===1?e.color:[...e.color,this.valpha];return Bc.to[e.model](...t)},percentString(n){const e=this.rgb().round(typeof n=="number"?n:1),t=e.valpha===1?e.color:[...e.color,this.valpha];return Bc.to.rgb.percent(...t)},array(){return this.valpha===1?[...this.color]:[...this.color,this.valpha]},object(){const n={},{channels:e}=eA[this.model],{labels:t}=eA[this.model];for(let i=0;i<e;i++)n[t[i]]=this.color[i];return this.valpha!==1&&(n.alpha=this.valpha),n},unitArray(){const n=this.rgb().color;return n[0]/=255,n[1]/=255,n[2]/=255,this.valpha!==1&&n.push(this.valpha),n},unitObject(){const n=this.rgb().object();return n.r/=255,n.g/=255,n.b/=255,this.valpha!==1&&(n.alpha=this.valpha),n},round(n){return n=Math.max(n||0,0),new $u([...this.color.map(Mde(n)),this.valpha],this.model)},alpha(n){return n!==void 0?new $u([...this.color,Math.max(0,Math.min(1,n))],this.model):this.valpha},red:Xl("rgb",0,xc(255)),green:Xl("rgb",1,xc(255)),blue:Xl("rgb",2,xc(255)),hue:Xl(["hsl","hsv","hsl","hwb","hcg"],0,n=>(n%360+360)%360),saturationl:Xl("hsl",1,xc(100)),lightness:Xl("hsl",2,xc(100)),saturationv:Xl("hsv",1,xc(100)),value:Xl("hsv",2,xc(100)),chroma:Xl("hcg",1,xc(100)),gray:Xl("hcg",2,xc(100)),white:Xl("hwb",1,xc(100)),wblack:Xl("hwb",2,xc(100)),cyan:Xl("cmyk",0,xc(100)),magenta:Xl("cmyk",1,xc(100)),yellow:Xl("cmyk",2,xc(100)),black:Xl("cmyk",3,xc(100)),x:Xl("xyz",0,xc(95.047)),y:Xl("xyz",1,xc(100)),z:Xl("xyz",2,xc(108.833)),l:Xl("lab",0,xc(100)),a:Xl("lab",1),b:Xl("lab",2),keyword(n){return n!==void 0?new $u(n):eA[this.model].keyword(this.color)},hex(n){return n!==void 0?new $u(n):Bc.to.hex(...this.rgb().round().color)},hexa(n){if(n!==void 0)return new $u(n);const e=this.rgb().round().color;let t=Math.round(this.valpha*255).toString(16).toUpperCase();return t.length===1&&(t="0"+t),Bc.to.hex(...e)+t},rgbNumber(){const n=this.rgb().color;return(n[0]&255)<<16|(n[1]&255)<<8|n[2]&255},luminosity(){const n=this.rgb().color,e=[];for(const[t,i]of n.entries()){const r=i/255;e[t]=r<=.04045?r/12.92:((r+.055)/1.055)**2.4}return .2126*e[0]+.7152*e[1]+.0722*e[2]},contrast(n){const e=this.luminosity(),t=n.luminosity();return e>t?(e+.05)/(t+.05):(t+.05)/(e+.05)},level(n){const e=this.contrast(n);return e>=7?"AAA":e>=4.5?"AA":""},isDark(){const n=this.rgb().color;return(n[0]*2126+n[1]*7152+n[2]*722)/1e4<128},isLight(){return!this.isDark()},negate(){const n=this.rgb();for(let e=0;e<3;e++)n.color[e]=255-n.color[e];return n},lighten(n){const e=this.hsl();return e.color[2]+=e.color[2]*n,e},darken(n){const e=this.hsl();return e.color[2]-=e.color[2]*n,e},saturate(n){const e=this.hsl();return e.color[1]+=e.color[1]*n,e},desaturate(n){const e=this.hsl();return e.color[1]-=e.color[1]*n,e},whiten(n){const e=this.hwb();return e.color[1]+=e.color[1]*n,e},blacken(n){const e=this.hwb();return e.color[2]+=e.color[2]*n,e},grayscale(){const n=this.rgb().color,e=n[0]*.3+n[1]*.59+n[2]*.11;return $u.rgb(e,e,e)},fade(n){return this.alpha(this.valpha-this.valpha*n)},opaquer(n){return this.alpha(this.valpha+this.valpha*n)},rotate(n){const e=this.hsl();let t=e.color[0];return t=(t+n)%360,t=t<0?360+t:t,e.color[0]=t,e},mix(n,e){if(!n||!n.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof n);const t=n.rgb(),i=this.rgb(),r=e===void 0?.5:e,o=2*r-1,s=t.alpha()-i.alpha(),a=((o*s===-1?o:(o+s)/(1+o*s))+1)/2,c=1-a;return $u.rgb(a*t.red()+c*i.red(),a*t.green()+c*i.green(),a*t.blue()+c*i.blue(),t.alpha()*r+i.alpha()*(1-r))}};for(const n of Object.keys(eA)){if(pZ.includes(n))continue;const{channels:e}=eA[n];$u.prototype[n]=function(...t){return this.model===n?new $u(this):t.length>0?new $u(t,n):new $u([...wde(eA[this.model][n].raw(this.color)),this.valpha],n)},$u[n]=function(...t){let i=t[0];return typeof i=="number"&&(i=FT(t,e)),new $u(i,n)}}function xde(n,e){return Number(n.toFixed(e))}function Mde(n){return function(e){return xde(e,n)}}function Xl(n,e,t){n=Array.isArray(n)?n:[n];for(const i of n)(LT[i]||=[])[e]=t;return n=n[0],function(i){let r;return i!==void 0?(t&&(i=t(i)),r=this[n](),r.color[e]=i,r):(r=this[n]().color[e],t&&(r=t(r)),r)}}function xc(n){return function(e){return Math.max(0,Math.min(n,e))}}function wde(n){return Array.isArray(n)?n:[n]}function FT(n,e){for(let t=0;t<e;t++)typeof n[t]!="number"&&(n[t]=0);return n}function hs(){var n="/home/runner/work/maputnik/maputnik/src/libs/zoomcontrol.ts",e="9dd3eea5f46b0cc48ff3173a7af02bc32aa63f10",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/zoomcontrol.ts",statementMap:{0:{start:{line:2,column:9},end:{line:2,column:15}},1:{start:{line:3,column:15},end:{line:3,column:21}},2:{start:{line:4,column:12},end:{line:4,column:16}},3:{start:{line:8,column:4},end:{line:8,column:20}},4:{start:{line:9,column:4},end:{line:9,column:52}},5:{start:{line:10,column:4},end:{line:10,column:93}},6:{start:{line:11,column:4},end:{line:11,column:70}},7:{start:{line:12,column:4},end:{line:12,column:27}},8:{start:{line:13,column:4},end:{line:13,column:29}},9:{start:{line:14,column:4},end:{line:14,column:27}},10:{start:{line:17,column:4},end:{line:17,column:60}},11:{start:{line:20,column:4},end:{line:22,column:6}},12:{start:{line:23,column:4},end:{line:23,column:57}},13:{start:{line:24,column:4},end:{line:24,column:27}},14:{start:{line:27,column:4},end:{line:27,column:57}},15:{start:{line:27,column:33},end:{line:27,column:55}},16:{start:{line:28,column:4},end:{line:28,column:57}},17:{start:{line:28,column:33},end:{line:28,column:55}},18:{start:{line:29,column:4},end:{line:29,column:58}},19:{start:{line:29,column:34},end:{line:29,column:56}},20:{start:{line:32,column:4},end:{line:32,column:60}},21:{start:{line:33,column:4},end:{line:33,column:23}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:16},end:{line:6,column:3}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:13},end:{line:15,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:16,column:2},end:{line:16,column:3}},loc:{start:{line:16,column:20},end:{line:18,column:3}},line:16},3:{name:"(anonymous_3)",decl:{start:{line:19,column:2},end:{line:19,column:3}},loc:{start:{line:19,column:18},end:{line:25,column:3}},line:19},4:{name:"(anonymous_4)",decl:{start:{line:26,column:2},end:{line:26,column:3}},loc:{start:{line:26,column:22},end:{line:30,column:3}},line:26},5:{name:"(anonymous_5)",decl:{start:{line:27,column:27},end:{line:27,column:28}},loc:{start:{line:27,column:33},end:{line:27,column:55}},line:27},6:{name:"(anonymous_6)",decl:{start:{line:28,column:27},end:{line:28,column:28}},loc:{start:{line:28,column:33},end:{line:28,column:55}},line:28},7:{name:"(anonymous_7)",decl:{start:{line:29,column:28},end:{line:29,column:29}},loc:{start:{line:29,column:34},end:{line:29,column:56}},line:29},8:{name:"(anonymous_8)",decl:{start:{line:31,column:2},end:{line:31,column:3}},loc:{start:{line:31,column:13},end:{line:34,column:3}},line:31}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/zoomcontrol.ts"],names:[],mappings:"AAEA,qBAAqB,YAAY;AAAA,EAC/B,OAAuB;AAAA,EACvB,aAAyC;AAAA,EACzC,UAAkC;AAAA,EAElC,cAAc;AAAA,EAAC;AAAA,EAEf,MAAM,KAAU;AACd,SAAK,OAAO;AACZ,SAAK,aAAa,SAAS,cAAc,KAAK;AAC9C,SAAK,WAAW,YAAY;AAC5B,SAAK,WAAW,aAAa,eAAe,oBAAoB;AAChE,SAAK,SAAS,OAAO;AACrB,SAAK,kBAAkB;AAEvB,WAAO,KAAK;AAAA,EACd;AAAA,EAEA,kBAAkB;AAChB,SAAK,QAAS,YAAY,KAAK,KAAM,QAAQ,EAAE,QAAQ,CAAC;AAAA,EAC1D;AAAA,EAEA,SAAS,OAAe;AACtB,SAAK,WAAY,YAAY;AAAA,QACzB,KAAK;AAAA;AAET,SAAK,UAAU,KAAK,WAAY,cAAc,MAAM;AACpD,SAAK,gBAAgB;AAAA,EACvB;AAAA,EAEA,oBAAoB;AAClB,SAAK,KAAM,GAAG,UAAU,MAAM,KAAK,gBAAgB,CAAC;AACpD,SAAK,KAAM,GAAG,UAAU,MAAM,KAAK,gBAAgB,CAAC;AACpD,SAAK,KAAM,GAAG,WAAW,MAAM,KAAK,gBAAgB,CAAC;AAAA,EACvD;AAAA,EAEA,WAAW;AACT,SAAK,WAAY,WAAY,YAAY,KAAK,UAAW;AACzD,SAAK,OAAO;AAAA,EACd;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"9dd3eea5f46b0cc48ff3173a7af02bc32aa63f10"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return hs=function(){return s},s}hs();class Sde{_map=(hs().s[0]++,void 0);_container=(hs().s[1]++,void 0);_textEl=(hs().s[2]++,null);constructor(){hs().f[0]++}onAdd(e){return hs().f[1]++,hs().s[3]++,this._map=e,hs().s[4]++,this._container=document.createElement("div"),hs().s[5]++,this._container.className="maplibregl-ctrl maplibregl-ctrl-group maplibregl-ctrl-zoom",hs().s[6]++,this._container.setAttribute("data-wd-key","maplibre:ctrl-zoom"),hs().s[7]++,this.setLabel("Zoom:"),hs().s[8]++,this.addEventListeners(),hs().s[9]++,this._container}updateZoomLevel(){hs().f[2]++,hs().s[10]++,this._textEl.innerHTML=this._map.getZoom().toFixed(2)}setLabel(e){hs().f[3]++,hs().s[11]++,this._container.innerHTML=`
      ${e} <span></span>
    `,hs().s[12]++,this._textEl=this._container.querySelector("span"),hs().s[13]++,this.updateZoomLevel()}addEventListeners(){hs().f[4]++,hs().s[14]++,this._map.on("render",()=>(hs().f[5]++,hs().s[15]++,this.updateZoomLevel())),hs().s[16]++,this._map.on("zoomIn",()=>(hs().f[6]++,hs().s[17]++,this.updateZoomLevel())),hs().s[18]++,this._map.on("zoomOut",()=>(hs().f[7]++,hs().s[19]++,this.updateZoomLevel()))}onRemove(){hs().f[8]++,hs().s[20]++,this._container.parentNode.removeChild(this._container),hs().s[21]++,this._map=void 0}}function zT(n,e,t){const i={id:[e,t,"circle"].join("_"),source:e,type:"circle",paint:{"circle-color":n,"circle-radius":2},filter:["==","$type","Point"]};return t&&(i["source-layer"]=t),i}function jT(n,e,t,i){const r={id:[t,i,"polygon"].join("_"),source:t,type:"fill",paint:{"fill-color":n,"fill-antialias":!0,"fill-outline-color":n},filter:["==","$type","Polygon"]};return i&&(r["source-layer"]=i),r}function NT(n,e,t){const i={id:[e,t,"line"].join("_"),source:e,layout:{"line-join":"round","line-cap":"round"},type:"line",paint:{"line-color":n},filter:["==","$type","LineString"]};return t&&(i["source-layer"]=t),i}function dF(n,e){return{circle:e(n,.8),line:e(n,.6),polygon:e(n,.3),polygonOutline:e(n,.6),default:e(n,1)}}function Ede(n,e){const t=[],i=[],r=[];for(const o of Object.keys(n)){const s=n[o];if(!s||s.length===0){const a=dF(o,e);i.push(zT(a.circle,o)),r.push(NT(a.line,o)),t.push(jT(a.polygon,a.polygonOutline,o))}else for(const a of s){const c=dF(a,e);i.push(zT(c.circle,o,a)),r.push(NT(c.line,o,a)),t.push(jT(c.polygon,c.polygonOutline,o,a))}}return t.concat(r).concat(i)}function Bde(n,e,t){t=Object.assign({backgroundColor:"#fff"},t);const i={id:"background",type:"background",paint:{"background-color":t.backgroundColor}},r={};for(const o of Object.keys(n.sources)){const s=n.sources[o];(s.type==="vector"||s.type==="geojson")&&(r[o]=s)}return Object.assign(n,{layers:[i].concat(e),sources:r})}const OB={polygonLayer:jT,lineLayer:NT,circleLayer:zT,generateInspectStyle:Bde,generateColoredLayers:Ede};function kr(){var n="/home/runner/work/maputnik/maputnik/src/libs/highlight.ts",e="aec0f701e803624fae461cc89b5fc887ff556587",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/highlight.ts",statementMap:{0:{start:{line:4,column:2},end:{line:8,column:3}},1:{start:{line:5,column:4},end:{line:5,column:33}},2:{start:{line:6,column:9},end:{line:8,column:3}},3:{start:{line:7,column:4},end:{line:7,column:30}},4:{start:{line:9,column:2},end:{line:13,column:3}},5:{start:{line:10,column:4},end:{line:10,column:28}},6:{start:{line:12,column:4},end:{line:12,column:23}},7:{start:{line:14,column:2},end:{line:14,column:29}},8:{start:{line:15,column:2},end:{line:15,column:11}},9:{start:{line:18,column:2},end:{line:18,column:84}},10:{start:{line:18,column:72},end:{line:18,column:84}},11:{start:{line:19,column:24},end:{line:19,column:51}},12:{start:{line:20,column:16},end:{line:20,column:52}},13:{start:{line:21,column:2},end:{line:23,column:3}},14:{start:{line:22,column:4},end:{line:22,column:104}},15:{start:{line:24,column:2},end:{line:26,column:3}},16:{start:{line:25,column:4},end:{line:25,column:96}},17:{start:{line:27,column:2},end:{line:29,column:3}},18:{start:{line:28,column:4},end:{line:28,column:94}},19:{start:{line:30,column:2},end:{line:30,column:14}}},fnMap:{0:{name:"changeLayer",decl:{start:{line:3,column:9},end:{line:3,column:20}},loc:{start:{line:3,column:31},end:{line:16,column:1}},line:3},1:{name:"colorHighlightedLayer",decl:{start:{line:17,column:16},end:{line:17,column:37}},loc:{start:{line:17,column:45},end:{line:31,column:1}},line:17}},branchMap:{0:{loc:{start:{line:4,column:2},end:{line:8,column:3}},type:"if",locations:[{start:{line:4,column:2},end:{line:8,column:3}},{start:{line:6,column:9},end:{line:8,column:3}}],line:4},1:{loc:{start:{line:6,column:9},end:{line:8,column:3}},type:"if",locations:[{start:{line:6,column:9},end:{line:8,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:6},2:{loc:{start:{line:9,column:2},end:{line:13,column:3}},type:"if",locations:[{start:{line:9,column:2},end:{line:13,column:3}},{start:{line:11,column:9},end:{line:13,column:3}}],line:9},3:{loc:{start:{line:18,column:2},end:{line:18,column:84}},type:"if",locations:[{start:{line:18,column:2},end:{line:18,column:84}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:18},4:{loc:{start:{line:18,column:6},end:{line:18,column:70}},type:"binary-expr",locations:[{start:{line:18,column:6},end:{line:18,column:12}},{start:{line:18,column:16},end:{line:18,column:43}},{start:{line:18,column:47},end:{line:18,column:70}}],line:18},5:{loc:{start:{line:19,column:24},end:{line:19,column:51}},type:"binary-expr",locations:[{start:{line:19,column:24},end:{line:19,column:45}},{start:{line:19,column:49},end:{line:19,column:51}}],line:19},6:{loc:{start:{line:21,column:2},end:{line:23,column:3}},type:"if",locations:[{start:{line:21,column:2},end:{line:23,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:21},7:{loc:{start:{line:21,column:6},end:{line:21,column:62}},type:"binary-expr",locations:[{start:{line:21,column:6},end:{line:21,column:27}},{start:{line:21,column:31},end:{line:21,column:62}}],line:21},8:{loc:{start:{line:24,column:2},end:{line:26,column:3}},type:"if",locations:[{start:{line:24,column:2},end:{line:26,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:24},9:{loc:{start:{line:24,column:6},end:{line:24,column:56}},type:"binary-expr",locations:[{start:{line:24,column:6},end:{line:24,column:29}},{start:{line:24,column:33},end:{line:24,column:56}}],line:24},10:{loc:{start:{line:27,column:2},end:{line:29,column:3}},type:"if",locations:[{start:{line:27,column:2},end:{line:29,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:27}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0},f:{0:0,1:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/highlight.ts"],names:[],mappings:"AAAA,OAAO,cAAc;AACrB,OAAO,YAAY;AAKnB,SAAS,YAAY,GAAqB,OAA2B;AACnE,MAAG,EAAE,SAAS,UAAU;AACtB,MAAE,MAAO,eAAe,IAAI;AAAA,EAC9B,WAAU,EAAE,SAAS,QAAQ;AAC3B,MAAE,MAAO,YAAY,IAAI;AAAA,EAC3B;AAEA,MAAG,YAAY,OAAO;AACpB,MAAE,SAAS,MAAM;AAAA,EACnB,OAAO;AACL,WAAO,EAAE,QAAQ;AAAA,EACnB;AACA,IAAE,KAAK,EAAE,KAAK;AACd,SAAO;AACT;AAEO,gBAAS,sBAAsB,OAAqD;AACzF,MAAG,CAAC,SAAS,MAAM,SAAS,gBAAgB,MAAM,SAAS,SAAU,QAAO;AAE5E,QAAM,gBAAgB,MAAM,cAAc,KAAK;AAC/C,QAAM,QAAQ,OAAO,YAAY,eAAe,CAAC;AAEjD,MAAG,MAAM,SAAS,UAAU,MAAM,SAAS,kBAAkB;AAC3D,WAAO,YAAY,SAAS,aAAa,OAAO,OAAO,MAAM,QAAQ,MAAM,cAAc,CAAC,GAAG,KAAK;AAAA,EACpG;AAEA,MAAG,MAAM,SAAS,YAAY,MAAM,SAAS,UAAU;AACrD,WAAO,YAAY,SAAS,YAAY,OAAO,MAAM,QAAQ,MAAM,cAAc,CAAC,GAAG,KAAK;AAAA,EAC5F;AAEA,MAAG,MAAM,SAAS,QAAQ;AACxB,WAAO,YAAY,SAAS,UAAU,OAAO,MAAM,QAAQ,MAAM,cAAc,CAAC,GAAG,KAAK;AAAA,EAC1F;AAEA,SAAO;AACT;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"aec0f701e803624fae461cc89b5fc887ff556587"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return kr=function(){return s},s}kr();function IB(n,e){return kr().f[0]++,kr().s[0]++,n.type==="circle"?(kr().b[0][0]++,kr().s[1]++,n.paint["circle-radius"]=3):(kr().b[0][1]++,kr().s[2]++,n.type==="line"?(kr().b[1][0]++,kr().s[3]++,n.paint["line-width"]=2):kr().b[1][1]++),kr().s[4]++,"filter"in e?(kr().b[2][0]++,kr().s[5]++,n.filter=e.filter):(kr().b[2][1]++,kr().s[6]++,delete n.filter),kr().s[7]++,n.id=n.id+"_highlight",kr().s[8]++,n}function Ode(n){if(kr().f[1]++,kr().s[9]++,kr().b[4][0]++,!n||(kr().b[4][1]++,n.type==="background")||(kr().b[4][2]++,n.type==="raster"))return kr().b[3][0]++,kr().s[10]++,null;kr().b[3][1]++;const e=(kr().s[11]++,kr().b[5][0]++,n["source-layer"]||(kr().b[5][1]++,"")),t=(kr().s[12]++,aZ.brightColor(e,1));return kr().s[13]++,kr().b[7][0]++,n.type==="fill"||(kr().b[7][1]++,n.type==="fill-extrusion")?(kr().b[6][0]++,kr().s[14]++,IB(OB.polygonLayer(t,t,n.source,n["source-layer"]),n)):(kr().b[6][1]++,kr().s[15]++,kr().b[9][0]++,n.type==="symbol"||(kr().b[9][1]++,n.type==="circle")?(kr().b[8][0]++,kr().s[16]++,IB(OB.circleLayer(t,n.source,n["source-layer"]),n)):(kr().b[8][1]++,kr().s[17]++,n.type==="line"?(kr().b[10][0]++,kr().s[18]++,IB(OB.lineLayer(t,n.source,n["source-layer"]),n)):(kr().b[10][1]++,kr().s[19]++,null)))}function BD(){var n="/home/runner/work/maputnik/maputnik/src/libs/maplibre-rtl.ts",e="a9dc98f82c73787713de0672aff7a601bfeb069d",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/maplibre-rtl.ts",statementMap:{0:{start:{line:2,column:0},end:{line:2,column:115}}},fnMap:{},branchMap:{},s:{0:0},f:{},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/maplibre-rtl.ts"],names:[],mappings:"AAAA,OAAO,gBAAgB;AAEvB,WAAW,iBAAiB,gFAAgF,KAAK;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a9dc98f82c73787713de0672aff7a601bfeb069d"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return BD=function(){return s},s}BD();BD().s[0]++;b_.setRTLTextPlugin("https://unpkg.com/@mapbox/mapbox-gl-rtl-text@0.2.3/mapbox-gl-rtl-text.min.js",!1);function kB(n,e,t,i){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(m){try{h(i.next(m))}catch(v){s(v)}}function c(m){try{h(i.throw(m))}catch(v){s(v)}}function h(m){m.done?o(m.value):r(m.value).then(a,c)}h((i=i.apply(n,e||[])).next())})}var YM=typeof globalThis<"u"?globalThis:typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:{};function ME(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var TB,fF;function mZ(){if(fF)return TB;fF=1,TB=e;var n=Object.prototype.hasOwnProperty;function e(){for(var t={},i=0;i<arguments.length;i++){var r=arguments[i];for(var o in r)n.call(r,o)&&(t[o]=r[o])}return t}return TB}var RB={exports:{}},pF;function Ide(){return pF||(pF=1,(function(n,e){(function(){var t={};n.exports=t,t.simpleFilter=function(i,r){return r.filter(function(o){return t.test(i,o)})},t.test=function(i,r){return t.match(i,r)!==null},t.match=function(i,r,o){o=o||{};var s=0,a=[],c=r.length,h=0,m=0,v=o.pre||"",x=o.post||"",E=o.caseSensitive&&r||r.toLowerCase(),D;i=o.caseSensitive&&i||i.toLowerCase();for(var P=0;P<c;P++)D=r[P],E[P]===i[s]?(D=v+D+x,s+=1,m+=1+m):m=0,h+=m,a[a.length]=D;return s===i.length?(h=E===i?1/0:h,{rendered:a.join(""),score:h}):null},t.filter=function(i,r,o){return!r||r.length===0?[]:typeof i!="string"?r:(o=o||{},r.reduce(function(s,a,c,h){var m=a;o.extract&&(m=o.extract(a));var v=t.match(i,m,o);return v!=null&&(s[s.length]={string:v.rendered,score:v.score,index:c,original:a}),s},[]).sort(function(s,a){var c=a.score-s.score;return c||s.index-a.index}))}})()})(RB)),RB.exports}var DB,mF;function kde(){if(mF)return DB;mF=1;var n=function(e){return this.component=e,this.items=[],this.active=e.options.noInitialSelection?-1:0,this.wrapper=document.createElement("div"),this.wrapper.className="suggestions-wrapper",this.element=document.createElement("ul"),this.element.className="suggestions",this.wrapper.appendChild(this.element),this.selectingListItem=!1,e.el.parentNode.insertBefore(this.wrapper,e.el.nextSibling),this};return n.prototype.show=function(){this.element.style.display="block"},n.prototype.hide=function(){this.element.style.display="none"},n.prototype.add=function(e){this.items.push(e)},n.prototype.clear=function(){this.items=[],this.active=this.component.options.noInitialSelection?-1:0},n.prototype.isEmpty=function(){return!this.items.length},n.prototype.isVisible=function(){return this.element.style.display==="block"},n.prototype.draw=function(){if(this.element.innerHTML="",this.items.length===0){this.hide();return}for(var e=0;e<this.items.length;e++)this.drawItem(this.items[e],this.active===e);this.show()},n.prototype.drawItem=function(e,t){var i=document.createElement("li"),r=document.createElement("a");t&&(i.className+=" active"),r.innerHTML=e.string,i.appendChild(r),this.element.appendChild(i),i.addEventListener("mousedown",(function(){this.selectingListItem=!0}).bind(this)),i.addEventListener("mouseup",(function(){this.handleMouseUp.call(this,e)}).bind(this))},n.prototype.handleMouseUp=function(e){this.selectingListItem=!1,this.component.value(e.original),this.clear(),this.draw()},n.prototype.move=function(e){this.active=e,this.draw()},n.prototype.previous=function(){this.move(this.active<=0?this.items.length-1:this.active-1)},n.prototype.next=function(){this.move(this.active>=this.items.length-1?0:this.active+1)},n.prototype.drawError=function(e){var t=document.createElement("li");t.innerHTML=e,this.element.appendChild(t),this.show()},DB=n,DB}var PB,gF;function Tde(){if(gF)return PB;gF=1;var n=mZ(),e=Ide(),t=kde(),i=function(r,o,s){return s=s||{},this.options=n({minLength:2,limit:5,filter:!0,hideOnBlur:!0,noInitialSelection:!0},s),this.el=r,this.data=o||[],this.list=new t(this),this.query="",this.selected=null,this.list.draw(),this.el.addEventListener("keyup",(function(a){this.handleKeyUp(a.keyCode,a)}).bind(this),!1),this.el.addEventListener("keydown",(function(a){this.handleKeyDown(a)}).bind(this)),this.el.addEventListener("focus",(function(){this.handleFocus()}).bind(this)),this.el.addEventListener("blur",(function(){this.handleBlur()}).bind(this)),this.el.addEventListener("paste",(function(a){this.handlePaste(a)}).bind(this)),this.render=this.options.render?this.options.render.bind(this):this.render.bind(this),this.getItemValue=this.options.getItemValue?this.options.getItemValue.bind(this):this.getItemValue.bind(this),this};return i.prototype.handleKeyUp=function(r,o){if(!(r===40||r===38||r===27||r===9)){if(r===13){this.list.items[this.list.active]&&(this.list.handleMouseUp(this.list.items[this.list.active]),o.stopPropagation());return}this.handleInputChange(this.el.value)}},i.prototype.handleKeyDown=function(r){switch(r.keyCode){case 13:this.list.active>=0&&(this.list.selectingListItem=!0);break;case 9:this.list.isEmpty()||(this.list.isVisible()&&r.preventDefault(),this.value(this.list.active>=0?this.list.items[this.list.active].original:null),this.list.hide());break;case 27:this.list.isEmpty()||this.list.hide();break;case 38:this.list.previous();break;case 40:this.list.next();break}},i.prototype.handleBlur=function(){!this.list.selectingListItem&&this.options.hideOnBlur&&this.list.hide()},i.prototype.handlePaste=function(r){if(r.clipboardData)this.handleInputChange(r.clipboardData.getData("Text"));else{var o=this;setTimeout(function(){o.handleInputChange(r.target.value)},100)}},i.prototype.handleInputChange=function(r){if(this.query=this.normalize(r),this.list.clear(),this.query.length<this.options.minLength){this.list.draw();return}this.getCandidates((function(o){for(var s=0;s<o.length&&(this.list.add(o[s]),s!==this.options.limit-1);s++);this.list.draw()}).bind(this))},i.prototype.handleFocus=function(){this.list.isEmpty()||this.list.show(),this.list.selectingListItem=!1},i.prototype.update=function(r){this.data=r,this.handleKeyUp()},i.prototype.clear=function(){this.data=[],this.list.clear()},i.prototype.normalize=function(r){return r=r.toLowerCase(),r},i.prototype.match=function(r,o){return r.indexOf(o)>-1},i.prototype.value=function(r){if(this.selected=r,this.el.value=this.getItemValue(r||{place_name:this.query}),document.createEvent){var o=document.createEvent("HTMLEvents");o.initEvent("change",!0,!1),this.el.dispatchEvent(o)}else this.el.fireEvent("onchange")},i.prototype.getCandidates=function(r){var o={pre:"<strong>",post:"</strong>",extract:(function(a){return this.getItemValue(a)}).bind(this)},s;this.options.filter?(s=e.filter(this.query,this.data,o),s=s.map((function(a){return{original:a.original,string:this.render(a.original,a.string)}}).bind(this))):s=this.data.map((function(a){var c=this.render(a);return{original:a,string:c}}).bind(this)),r(s)},i.prototype.getItemValue=function(r){return r},i.prototype.render=function(r,o){if(o)return o;for(var s=r.original?this.getItemValue(r.original):this.getItemValue(r),a=this.normalize(s),c=a.lastIndexOf(this.query);c>-1;){var h=c+this.query.length;s=s.slice(0,c)+"<strong>"+s.slice(c,h)+"</strong>"+s.slice(h),c=a.slice(0,c).lastIndexOf(this.query)}return s},i.prototype.renderError=function(r){this.list.drawError(r)},PB=i,PB}var UB,yF;function Rde(){if(yF)return UB;yF=1;var n=Tde();return UB=n,typeof window<"u"&&(window.Suggestions=n),UB}var Dde=Rde(),Pde=ME(Dde),uw={exports:{}},Ude=uw.exports,vF;function Kde(){return vF||(vF=1,(function(n){(function(e,t,i){n.exports?n.exports=i():e[t]=i()})(Ude,"subtag",function(){var e="",t=/^([a-zA-Z]{2,3})(?:[_-]+([a-zA-Z]{3})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{4})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{2}|[0-9]{3})(?=$|[_-]+))?/;function i(c){return c.match(t)||[]}function r(c){return i(c).filter(function(h,m){return h&&m})}function o(c){return c=i(c),{language:c[1]||e,extlang:c[2]||e,script:c[3]||e,region:c[4]||e}}function s(c,h,m){Object.defineProperty(c,h,{value:m,enumerable:!0})}function a(c,h,m){function v(x){return i(x)[c]||e}s(v,"pattern",h),s(o,m,v)}return a(1,/^[a-zA-Z]{2,3}$/,"language"),a(2,/^[a-zA-Z]{3}$/,"extlang"),a(3,/^[a-zA-Z]{4}$/,"script"),a(4,/^[a-zA-Z]{2}$|^[0-9]{3}$/,"region"),s(o,"split",r),o})})(uw)),uw.exports}var Lde=Kde(),Fde=ME(Lde),KB,bF;function zde(){if(bF)return KB;bF=1;var n="Expected a function",e=NaN,t="[object Symbol]",i=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,s=/^0o[0-7]+$/i,a=parseInt,c=typeof YM=="object"&&YM&&YM.Object===Object&&YM,h=typeof self=="object"&&self&&self.Object===Object&&self,m=c||h||Function("return this")(),v=Object.prototype,x=v.toString,E=Math.max,D=Math.min,P=function(){return m.Date.now()};function F(X,Z,G){var oe,ue,xe,me,Ie,Me,Te=0,je=!1,Ee=!1,qe=!0;if(typeof X!="function")throw new TypeError(n);Z=H(Z)||0,W(G)&&(je=!!G.leading,Ee="maxWait"in G,xe=Ee?E(H(G.maxWait)||0,Z):xe,qe="trailing"in G?!!G.trailing:qe);function At(Kt){var Ke=oe,Oe=ue;return oe=ue=void 0,Te=Kt,me=X.apply(Oe,Ke),me}function gt(Kt){return Te=Kt,Ie=setTimeout(Ge,Z),je?At(Kt):me}function Le(Kt){var Ke=Kt-Me,Oe=Kt-Te,Be=Z-Ke;return Ee?D(Be,xe-Oe):Be}function Re(Kt){var Ke=Kt-Me,Oe=Kt-Te;return Me===void 0||Ke>=Z||Ke<0||Ee&&Oe>=xe}function Ge(){var Kt=P();if(Re(Kt))return De(Kt);Ie=setTimeout(Ge,Le(Kt))}function De(Kt){return Ie=void 0,qe&&oe?At(Kt):(oe=ue=void 0,me)}function _t(){Ie!==void 0&&clearTimeout(Ie),Te=0,oe=Me=ue=Ie=void 0}function at(){return Ie===void 0?me:De(P())}function Tt(){var Kt=P(),Ke=Re(Kt);if(oe=arguments,ue=this,Me=Kt,Ke){if(Ie===void 0)return gt(Me);if(Ee)return Ie=setTimeout(Ge,Z),At(Me)}return Ie===void 0&&(Ie=setTimeout(Ge,Z)),me}return Tt.cancel=_t,Tt.flush=at,Tt}function W(X){var Z=typeof X;return!!X&&(Z=="object"||Z=="function")}function q(X){return!!X&&typeof X=="object"}function V(X){return typeof X=="symbol"||q(X)&&x.call(X)==t}function H(X){if(typeof X=="number")return X;if(V(X))return e;if(W(X)){var Z=typeof X.valueOf=="function"?X.valueOf():X;X=W(Z)?Z+"":Z}if(typeof X!="string")return X===0?X:+X;X=X.replace(i,"");var G=o.test(X);return G||s.test(X)?a(X.slice(2),G?2:8):r.test(X)?e:+X}return KB=F,KB}var jde=zde(),Nde=ME(jde),Gde=mZ(),im=ME(Gde),qM={exports:{}},CF;function Wde(){if(CF)return qM.exports;CF=1;var n=typeof Reflect=="object"?Reflect:null,e=n&&typeof n.apply=="function"?n.apply:function(X,Z,G){return Function.prototype.apply.call(X,Z,G)},t;n&&typeof n.ownKeys=="function"?t=n.ownKeys:Object.getOwnPropertySymbols?t=function(X){return Object.getOwnPropertyNames(X).concat(Object.getOwnPropertySymbols(X))}:t=function(X){return Object.getOwnPropertyNames(X)};function i(H){console&&console.warn&&console.warn(H)}var r=Number.isNaN||function(X){return X!==X};function o(){o.init.call(this)}qM.exports=o,qM.exports.once=W,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var s=10;function a(H){if(typeof H!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof H)}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(H){if(typeof H!="number"||H<0||r(H))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+H+".");s=H}}),o.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(X){if(typeof X!="number"||X<0||r(X))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+X+".");return this._maxListeners=X,this};function c(H){return H._maxListeners===void 0?o.defaultMaxListeners:H._maxListeners}o.prototype.getMaxListeners=function(){return c(this)},o.prototype.emit=function(X){for(var Z=[],G=1;G<arguments.length;G++)Z.push(arguments[G]);var oe=X==="error",ue=this._events;if(ue!==void 0)oe=oe&&ue.error===void 0;else if(!oe)return!1;if(oe){var xe;if(Z.length>0&&(xe=Z[0]),xe instanceof Error)throw xe;var me=new Error("Unhandled error."+(xe?" ("+xe.message+")":""));throw me.context=xe,me}var Ie=ue[X];if(Ie===void 0)return!1;if(typeof Ie=="function")e(Ie,this,Z);else for(var Me=Ie.length,Te=D(Ie,Me),G=0;G<Me;++G)e(Te[G],this,Z);return!0};function h(H,X,Z,G){var oe,ue,xe;if(a(Z),ue=H._events,ue===void 0?(ue=H._events=Object.create(null),H._eventsCount=0):(ue.newListener!==void 0&&(H.emit("newListener",X,Z.listener?Z.listener:Z),ue=H._events),xe=ue[X]),xe===void 0)xe=ue[X]=Z,++H._eventsCount;else if(typeof xe=="function"?xe=ue[X]=G?[Z,xe]:[xe,Z]:G?xe.unshift(Z):xe.push(Z),oe=c(H),oe>0&&xe.length>oe&&!xe.warned){xe.warned=!0;var me=new Error("Possible EventEmitter memory leak detected. "+xe.length+" "+String(X)+" listeners added. Use emitter.setMaxListeners() to increase limit");me.name="MaxListenersExceededWarning",me.emitter=H,me.type=X,me.count=xe.length,i(me)}return H}o.prototype.addListener=function(X,Z){return h(this,X,Z,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(X,Z){return h(this,X,Z,!0)};function m(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function v(H,X,Z){var G={fired:!1,wrapFn:void 0,target:H,type:X,listener:Z},oe=m.bind(G);return oe.listener=Z,G.wrapFn=oe,oe}o.prototype.once=function(X,Z){return a(Z),this.on(X,v(this,X,Z)),this},o.prototype.prependOnceListener=function(X,Z){return a(Z),this.prependListener(X,v(this,X,Z)),this},o.prototype.removeListener=function(X,Z){var G,oe,ue,xe,me;if(a(Z),oe=this._events,oe===void 0)return this;if(G=oe[X],G===void 0)return this;if(G===Z||G.listener===Z)--this._eventsCount===0?this._events=Object.create(null):(delete oe[X],oe.removeListener&&this.emit("removeListener",X,G.listener||Z));else if(typeof G!="function"){for(ue=-1,xe=G.length-1;xe>=0;xe--)if(G[xe]===Z||G[xe].listener===Z){me=G[xe].listener,ue=xe;break}if(ue<0)return this;ue===0?G.shift():P(G,ue),G.length===1&&(oe[X]=G[0]),oe.removeListener!==void 0&&this.emit("removeListener",X,me||Z)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(X){var Z,G,oe;if(G=this._events,G===void 0)return this;if(G.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):G[X]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete G[X]),this;if(arguments.length===0){var ue=Object.keys(G),xe;for(oe=0;oe<ue.length;++oe)xe=ue[oe],xe!=="removeListener"&&this.removeAllListeners(xe);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(Z=G[X],typeof Z=="function")this.removeListener(X,Z);else if(Z!==void 0)for(oe=Z.length-1;oe>=0;oe--)this.removeListener(X,Z[oe]);return this};function x(H,X,Z){var G=H._events;if(G===void 0)return[];var oe=G[X];return oe===void 0?[]:typeof oe=="function"?Z?[oe.listener||oe]:[oe]:Z?F(oe):D(oe,oe.length)}o.prototype.listeners=function(X){return x(this,X,!0)},o.prototype.rawListeners=function(X){return x(this,X,!1)},o.listenerCount=function(H,X){return typeof H.listenerCount=="function"?H.listenerCount(X):E.call(H,X)},o.prototype.listenerCount=E;function E(H){var X=this._events;if(X!==void 0){var Z=X[H];if(typeof Z=="function")return 1;if(Z!==void 0)return Z.length}return 0}o.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]};function D(H,X){for(var Z=new Array(X),G=0;G<X;++G)Z[G]=H[G];return Z}function P(H,X){for(;X+1<H.length;X++)H[X]=H[X+1];H.pop()}function F(H){for(var X=new Array(H.length),Z=0;Z<X.length;++Z)X[Z]=H[Z].listener||H[Z];return X}function W(H,X){return new Promise(function(Z,G){function oe(xe){H.removeListener(X,ue),G(xe)}function ue(){typeof H.removeListener=="function"&&H.removeListener("error",oe),Z([].slice.call(arguments))}V(H,X,ue,{once:!0}),X!=="error"&&q(H,oe,{once:!0})})}function q(H,X,Z){typeof H.on=="function"&&V(H,"error",X,Z)}function V(H,X,Z,G){if(typeof H.on=="function")G.once?H.once(X,Z):H.on(X,Z);else if(typeof H.addEventListener=="function")H.addEventListener(X,function oe(ue){G.once&&H.removeEventListener(X,oe),Z(ue)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof H)}return qM.exports}var Qde=Wde();const _F={fr:{name:"France",bbox:[[-4.59235,41.380007],[9.560016,51.148506]]},us:{name:"United States",bbox:[[-171.791111,18.91619],[-66.96466,71.357764]]},ru:{name:"Russia",bbox:[[19.66064,41.151416],[190.10042,81.2504]]},ca:{name:"Canada",bbox:[[-140.99778,41.675105],[-52.648099,83.23324]]}},Yde={de:"Suche",it:"Ricerca",en:"Search",nl:"Zoeken",fr:"Chercher",ca:"Cerca",he:"",ja:"",lv:"Meklt",pt:"Procurar",sr:"",zh:"",cs:"Vyhledvn",hu:"Keress",ka:"",nb:"Ske",sk:"Vyhadvanie",th:"",fi:"Hae",is:"Leita",ko:"",pl:"Szukaj",sl:"Iskanje",fa:"",ru:"",es:"Buscar"},qde={en:"No results found",de:"Keine Ergebnisse gefunden",es:"No hay resultados",fr:"Aucun rsultat trouv"},Vde={en:"There was an error reaching the server",de:"Verbindung fehlgeschlagen",es:"Error al conectarse al servidor",fr:"Une erreur est survenue lors de la connexion au serveur"};var A2={placeholder:Yde,errorNoResults:qde,errorConnectionFailed:Vde};const $de=/(-?\d+\.?\d*)[, ]+(-?\d+\.?\d*)[ ]*$/;class Hde{constructor(e,t){this.options={zoom:16,flyTo:!0,trackProximity:!0,showResultsWhileTyping:!1,minLength:2,reverseGeocode:!1,limit:5,enableEventLogging:!0,marker:!0,popup:!1,maplibregl:void 0,collapsed:!1,clearAndBlurOnEsc:!1,clearOnBlur:!1,proximityMinZoom:9,getItemValue:i=>i.text!==void 0?i.text:i.place_name,render:function(i){if(!i.geometry){const o=i.text,s=o.toLowerCase().indexOf(this.query.toLowerCase()),a=this.query.length,c=o.substring(0,s),h=o.substring(s,s+a),m=o.substring(s+a);return'<div class="maplibregl-ctrl-geocoder--suggestion"><svg class="maplibregl-ctrl-geocoder--suggestion-icon" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="M22.8702 20.1258H21.4248L20.9125 19.6318C22.7055 17.546 23.785 14.8382 23.785 11.8925C23.785 5.32419 18.4608 0 11.8925 0C5.32419 0 0 5.32419 0 11.8925C0 18.4608 5.32419 23.785 11.8925 23.785C14.8382 23.785 17.546 22.7055 19.6318 20.9125L20.1258 21.4248V22.8702L29.2739 32L32 29.2739L22.8702 20.1258ZM11.8925 20.1258C7.33676 20.1258 3.65923 16.4483 3.65923 11.8925C3.65923 7.33676 7.33676 3.65923 11.8925 3.65923C16.4483 3.65923 20.1258 7.33676 20.1258 11.8925C20.1258 16.4483 16.4483 20.1258 11.8925 20.1258Z" fill="#687078"/></svg><div class="maplibregl-ctrl-geocoder--suggestion-info"><div class="maplibregl-ctrl-geocoder--suggestion-title">'+c+'<span class="maplibregl-ctrl-geocoder--suggestion-match">'+h+"</span>"+m+"</div></div></div>"}const r=i.place_name.split(",");return'<div class="maplibregl-ctrl-geocoder--result"><svg class="maplibregl-ctrl-geocoder--result-icon" viewBox="0 0 24 32" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 0C5.36571 0 0 5.38676 0 12.0471C0 21.0824 12 32 12 32C12 32 24 21.0824 24 12.0471C24 5.38676 18.6343 0 12 0ZM12 16.3496C9.63428 16.3496 7.71429 14.4221 7.71429 12.0471C7.71429 9.67207 9.63428 7.74454 12 7.74454C14.3657 7.74454 16.2857 9.67207 16.2857 12.0471C16.2857 14.4221 14.3657 16.3496 12 16.3496Z" fill="#687078"/></svg><div><div class="maplibregl-ctrl-geocoder--result-title">'+r[0]+'</div><div class="maplibregl-ctrl-geocoder--result-address">'+r.splice(1,r.length).join(",")+"</div></div></div>"},popupRender:i=>{const r=i.place_name.split(",");return'<div class="maplibregl-ctrl-geocoder--suggestion popup-suggestion"><div class="maplibregl-ctrl-geocoder--suggestion-title popup-suggestion-title">'+r[0]+'</div><div class="maplibregl-ctrl-geocoder--suggestion-address popup-suggestion-address">'+r.splice(1,r.length).join(",")+"</div></div>"},showResultMarkers:!0,debounceSearch:200},this._eventEmitter=new Qde.EventEmitter,this.options=im({},this.options,t),this.fresh=!0,this.lastSelected=null,this.geocoderApi=e}addTo(e){function t(i,r){if(!document.body.contains(r))throw new Error("Element provided to #addTo() exists, but is not in the DOM");const o=i.onAdd();r.appendChild(o)}if(e instanceof HTMLElement)t(this,e);else if(typeof e=="string"){const i=document.querySelectorAll(e);if(i.length===0)throw new Error("Element "+e+"not found.");if(i.length>1)throw new Error("Geocoder can only be added to a single html element");t(this,i[0])}else if("addControl"in e)e.addControl(this);else throw new Error("Error: addTo must be a maplibre-gl-js map, an html element, or a CSS selector query for a single html element")}onAdd(e){if(e&&typeof e!="string"&&(this._map=e),this.setLanguage(),this.options.localGeocoderOnly&&!this.options.localGeocoder)throw new Error("A localGeocoder function must be specified to use localGeocoderOnly mode");this._onChange=this._onChange.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onPaste=this._onPaste.bind(this),this._onBlur=this._onBlur.bind(this),this._showButton=this._showButton.bind(this),this._hideButton=this._hideButton.bind(this),this._onQueryResult=this._onQueryResult.bind(this),this.clear=this.clear.bind(this),this._updateProximity=this._updateProximity.bind(this),this._collapse=this._collapse.bind(this),this._unCollapse=this._unCollapse.bind(this),this._clear=this._clear.bind(this),this._clearOnBlur=this._clearOnBlur.bind(this);const t=this.container=document.createElement("div");t.className="maplibregl-ctrl-geocoder maplibregl-ctrl maplibregl-ctrl-geocoder maplibregl-ctrl";const i=this.createIcon("search",'<path d="M7.4 2.5c-2.7 0-4.9 2.2-4.9 4.9s2.2 4.9 4.9 4.9c1 0 1.8-.2 2.5-.8l3.7 3.7c.2.2.4.3.8.3.7 0 1.1-.4 1.1-1.1 0-.3-.1-.5-.3-.8L11.4 10c.4-.8.8-1.6.8-2.5.1-2.8-2.1-5-4.8-5zm0 1.6c1.8 0 3.2 1.4 3.2 3.2s-1.4 3.2-3.2 3.2-3.3-1.3-3.3-3.1 1.4-3.3 3.3-3.3z"/>');this._inputEl=document.createElement("input"),this._inputEl.type="search",this._inputEl.className="maplibregl-ctrl-geocoder--input",this.setPlaceholder(),this.options.collapsed&&(this._collapse(),this.container.addEventListener("mouseenter",this._unCollapse),this.container.addEventListener("mouseleave",this._collapse),this._inputEl.addEventListener("focus",this._unCollapse)),(this.options.collapsed||this.options.clearOnBlur)&&this._inputEl.addEventListener("blur",this._onBlur),this._inputEl.addEventListener("keydown",Nde(this._onKeyDown,this.options.debounceSearch)),this._inputEl.addEventListener("paste",this._onPaste),this._inputEl.addEventListener("change",this._onChange),this.container.addEventListener("mouseenter",this._showButton),this.container.addEventListener("mouseleave",this._hideButton);const r=document.createElement("div");r.classList.add("maplibregl-ctrl-geocoder--pin-right"),this._clearEl=document.createElement("button"),this._clearEl.setAttribute("type","button"),this._clearEl.setAttribute("aria-label","Clear"),this._clearEl.addEventListener("click",this.clear),this._clearEl.className="maplibregl-ctrl-geocoder--button";const o=this.createIcon("close",'<path d="M3.8 2.5c-.6 0-1.3.7-1.3 1.3 0 .3.2.7.5.8L7.2 9 3 13.2c-.3.3-.5.7-.5 1 0 .6.7 1.3 1.3 1.3.3 0 .7-.2 1-.5L9 10.8l4.2 4.2c.2.3.7.3 1 .3.6 0 1.3-.7 1.3-1.3 0-.3-.2-.7-.3-1l-4.4-4L15 4.6c.3-.2.5-.5.5-.8 0-.7-.7-1.3-1.3-1.3-.3 0-.7.2-1 .3L9 7.1 4.8 2.8c-.3-.1-.7-.3-1-.3z"/>');return this._clearEl.appendChild(o),this._loadingEl=this.createIcon("loading",'<path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"/><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"/>'),r.appendChild(this._clearEl),r.appendChild(this._loadingEl),t.appendChild(i),t.appendChild(this._inputEl),t.appendChild(r),this._typeahead=new Pde(this._inputEl,[],{filter:!1,minLength:this.options.minLength,limit:this.options.limit,noInitialSelection:!0}),this.container.addEventListener("click",()=>{this._typeahead.update(this._typeahead.data)}),this.setRenderFunction(this.options.render),this._typeahead.getItemValue=this.options.getItemValue,this.mapMarker=null,this.resultMarkers=[],this._handleMarker=this._handleMarker.bind(this),this._handleResultMarkers=this._handleResultMarkers.bind(this),this._map&&(this.options.trackProximity&&(this._updateProximity(),this._map.on("moveend",this._updateProximity)),this._maplibregl=this.options.maplibregl,!this._maplibregl&&this.options.marker&&(console.error("No maplibregl detected in options. Map markers are disabled. Please set options.maplibregl."),this.options.marker=!1)),t}createIcon(e,t){const i=document.createElementNS("http://www.w3.org/2000/svg","svg");if(i.setAttribute("class","maplibregl-ctrl-geocoder--icon maplibregl-ctrl-geocoder--icon-"+e),i.setAttribute("viewBox","0 0 18 18"),i.setAttribute("xml:space","preserve"),i.setAttribute("width","18"),i.setAttribute("height","18"),"innerHTML"in i)i.innerHTML=t;else{const r=document.createElement("div");r.innerHTML="<svg>"+t.valueOf().toString()+"</svg>";const o=r.firstChild,s=o.firstChild;i.appendChild(s)}return i}onRemove(){return this.container.remove(),this.options.trackProximity&&this._map&&this._map.off("moveend",this._updateProximity),this._removeMarker(),this._map=null,this}_onPaste(e){const t=(e.clipboardData||window.clipboardData).getData("text");t.length>=this.options.minLength&&this.options.showResultsWhileTyping&&this._geocode(t)}_onKeyDown(e){if(e.keyCode===27&&this.options.clearAndBlurOnEsc)return this._clear(e),this._inputEl.blur();const o=this._inputEl.value;if(!o)return this.fresh=!0,e.keyCode!==9&&this.clear(e),this._clearEl.style.display="none";if(!(e.metaKey||[9,27,37,39,38,40].indexOf(e.keyCode)!==-1)){if(e.keyCode===13)if(!this.options.showResultsWhileTyping)this._typeahead.selected||this._geocode(o);else{this._typeahead.selected==null&&this.geocoderApi.getSuggestions?this._geocode(o,!0):this._typeahead.selected==null&&this.options.showResultMarkers&&this._fitBoundsForMarkers();return}o.length>=this.options.minLength&&this.options.showResultsWhileTyping&&this._geocode(o)}}_showButton(){this._inputEl.value.length>0&&(this._clearEl.style.display="block")}_hideButton(){this._typeahead.selected&&(this._clearEl.style.display="none")}_onBlur(e){this.options.clearOnBlur&&this._clearOnBlur(e),this.options.collapsed&&this._collapse()}_onChange(){const e=this._typeahead.selected;if(e&&!e.geometry)e.placeId?this._geocode(e.placeId,!0,!0):this._geocode(e.text,!0);else if(e&&JSON.stringify(e)!==this.lastSelected){if(this._clearEl.style.display="none",this.options.flyTo){let t;if(this._removeResultMarkers(),e.properties&&_F[e.properties.short_code])t=im({},this.options.flyTo),this._map&&this._map.fitBounds(_F[e.properties.short_code].bbox,t);else if(e.bbox){const i=e.bbox;t=im({},this.options.flyTo),this._map&&this._map.fitBounds([[i[0],i[1]],[i[2],i[3]]],t)}else{const i={zoom:this.options.zoom};t=im({},i,this.options.flyTo),e.center?t.center=e.center:e.geometry&&e.geometry.type&&e.geometry.type==="Point"&&e.geometry.coordinates&&(t.center=e.geometry.coordinates),this._map&&this._map.flyTo(t)}}this.options.marker&&this._maplibregl&&this._handleMarker(e),this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0),this.lastSelected=JSON.stringify(e),this._typeahead.selected=null,this._eventEmitter.emit("result",{result:e})}}_getConfigForRequest(){return["bbox","limit","proximity","countries","types","language","reverseMode"].reduce((i,r)=>(this.options[r]&&(["countries","types","language"].indexOf(r)>-1?i[r]=this.options[r].split(/[\s,]+/):i[r]=this.options[r],r==="proximity"&&this.options[r]&&typeof this.options[r].longitude=="number"&&typeof this.options[r].latitude=="number"&&(i[r]=[this.options[r].longitude,this.options[r].latitude])),i),{})}_geocode(e){return kB(this,arguments,void 0,function*(t,i=!1,r=!1){this._loadingEl.style.display="block",this._eventEmitter.emit("loading",{query:t});const o=this._getConfigForRequest(),s=this._createGeocodeRequest(o,t,i,r),a=this.options.localGeocoder?this.options.localGeocoder(t)||[]:[];try{const c=yield s;yield this._handleGeocodeResponse(c,o,t,i,a)}catch(c){this._handleGeocodeErrorResponse(c,a)}return s})}_createGeocodeRequest(e,t,i,r){return this.options.localGeocoderOnly?Promise.resolve({}):this.options.reverseGeocode&&$de.test(t)?this._createReverseGeocodeRequest(t,e):(e.query=t,this.geocoderApi.getSuggestions?i?this.geocoderApi.searchByPlaceId&&r?this.geocoderApi.searchByPlaceId(e):this.geocoderApi.forwardGeocode(e):this.geocoderApi.getSuggestions(e):this.geocoderApi.forwardGeocode(e))}_createReverseGeocodeRequest(e,t){const i=e.split(/[\s(,)?]+/).map(r=>parseFloat(r)).reverse();return t.query=i,t.limit=1,"proximity"in t&&delete t.proximity,this.geocoderApi.reverseGeocode(t)}_handleGeocodeResponse(e,t,i,r,o){return kB(this,void 0,void 0,function*(){this._loadingEl.style.display="none";let s={};e?s=e:s={type:"FeatureCollection",features:[]},s.config=t,this.fresh&&(this.fresh=!1),s.features=s.features?o.concat(s.features):o;const a=this.options.externalGeocoder?this.options.externalGeocoder(i,s.features,t)||Promise.resolve([]):Promise.resolve([]);try{const h=yield a;s.features=s.features?h.concat(s.features):h}catch{}this.options.filter&&s.features.length&&(s.features=s.features.filter(this.options.filter));let c=[];"suggestions"in s?c=s.suggestions:"place"in s?c=[s.place]:c=s.features,c.length?(this._clearEl.style.display="block",this._typeahead.update(c),(!this.options.showResultsWhileTyping||r)&&this.options.showResultMarkers&&(s.features.length>0||"place"in s)&&this._fitBoundsForMarkers(),this._eventEmitter.emit("results",s)):(this._clearEl.style.display="none",this._typeahead.selected=null,this._renderNoResults(),this._eventEmitter.emit("results",s))})}_handleGeocodeErrorResponse(e,t){this._loadingEl.style.display="none",t.length&&this.options.localGeocoder?(this._clearEl.style.display="block",this._typeahead.update(t)):(this._clearEl.style.display="none",this._typeahead.selected=null,this._renderError()),this._eventEmitter.emit("results",{features:t}),this._eventEmitter.emit("error",{error:e})}_clear(e){e&&e.preventDefault(),this._inputEl.value="",this._typeahead.selected=null,this._typeahead.clear(),this._onChange(),this._clearEl.style.display="none",this._removeMarker(),this._removeResultMarkers(),this.lastSelected=null,this._eventEmitter.emit("clear"),this.fresh=!0}clear(e){this._clear(e),this._inputEl.focus()}_clearOnBlur(e){e.relatedTarget&&this._clear(e)}_onQueryResult(e){if(!("features"in e)||!e.features.length)return;const t=e.features[0];this._typeahead.selected=t,this._inputEl.value=t.place_name,this._onChange()}_updateProximity(){if(this._map)if(this._map.getZoom()>this.options.proximityMinZoom){const e=this._map.getCenter().wrap();this.setProximity({longitude:e.lng,latitude:e.lat})}else this.setProximity(null)}_collapse(){!this._inputEl.value&&this._inputEl!==document.activeElement&&this.container.classList.add("maplibregl-ctrl-geocoder--collapsed")}_unCollapse(){this.container.classList.remove("maplibregl-ctrl-geocoder--collapsed")}query(e){return kB(this,void 0,void 0,function*(){const t=yield this._geocode(e);this._onQueryResult(t)})}_renderError(){const e=`<div class='maplibre-gl-geocoder--error'>${this._localize("errorConnectionFailed")}</div>`;this._renderMessage(e)}_renderNoResults(){const e=`<div class='maplibre-gl-geocoder--error maplibre-gl-geocoder--no-results'>
        ${this._localize("errorNoResults")}</div>`;this._renderMessage(e)}_renderMessage(e){this._typeahead.update([]),this._typeahead.selected=null,this._typeahead.clear(),this._typeahead.renderError(e)}_localize(e){const t=Fde.language(this.options.language.split(",")[0]);return this.options.language&&A2?.[e][t]?A2[e][t]:A2[e].en}_fitBoundsForMarkers(){if(this._typeahead.data.length<1)return;const e=this._typeahead.data.filter(t=>typeof t!="string").slice(0,this.options.limit);if(this._clearEl.style.display="none",this.options.flyTo&&this._maplibregl&&this._map){const i=im({},{padding:100},this.options.flyTo),r=new this._maplibregl.LngLatBounds;for(const o of e)r.extend(o.geometry.coordinates);this._map.fitBounds(r,i)}return e.length>0&&this._maplibregl&&this._handleResultMarkers(e),this}setInput(e){return this._inputEl.value=e,this._typeahead.selected=null,this._typeahead.clear(),e.length>=this.options.minLength&&this.options.showResultsWhileTyping&&this._geocode(e),this}setProximity(e){return this.options.proximity=e,this}getProximity(){return this.options.proximity}setRenderFunction(e){return e&&typeof e=="function"&&(this._typeahead.render=e),this}getRenderFunction(){return this._typeahead.render}setLanguage(e){return this.options.language=e||this.options.language||navigator.language,this}getLanguage(){return this.options.language}getZoom(){return this.options.zoom}setZoom(e){return this.options.zoom=e,this}getFlyTo(){return this.options.flyTo}setFlyTo(e){return this.options.flyTo=e,this}getPlaceholder(){return this.options.placeholder}setPlaceholder(e){return this.placeholder=e||this.options.placeholder||this._localize("placeholder"),this._inputEl.placeholder=this.placeholder,this._inputEl.setAttribute("aria-label",this.placeholder),this}getBbox(){return this.options.bbox}setBbox(e){return this.options.bbox=e,this}getCountries(){return this.options.countries}setCountries(e){return this.options.countries=e,this}getTypes(){return this.options.types}setTypes(e){return this.options.types=e,this}getMinLength(){return this.options.minLength}setMinLength(e){return this.options.minLength=e,this._typeahead&&(this._typeahead.options.minLength=e),this}getLimit(){return this.options.limit}setLimit(e){return this.options.limit=e,this._typeahead&&(this._typeahead.options.limit=e),this}getFilter(){return this.options.filter}setFilter(e){return this.options.filter=e,this}setGeocoderApi(e){return this.geocoderApi=e,this}getGeocoderApi(){return this.geocoderApi}_handleMarker(e){if(!this._map)return;this._removeMarker();const i=im({},{color:"#4668F2"},this.options.marker);this.mapMarker=new this._maplibregl.Marker(i);let r;if(this.options.popup){const s=im({},{},this.options.popup);r=new this._maplibregl.Popup(s).setHTML(this.options.popupRender(e))}return e.center?(this.mapMarker.setLngLat(e.center).addTo(this._map),this.options.popup&&this.mapMarker.setPopup(r)):e.geometry&&e.geometry.type&&e.geometry.type==="Point"&&e.geometry.coordinates&&(this.mapMarker.setLngLat(e.geometry.coordinates).addTo(this._map),this.options.popup&&this.mapMarker.setPopup(r)),this}_removeMarker(){this.mapMarker&&(this.mapMarker.remove(),this.mapMarker=null)}_handleResultMarkers(e){if(!this._map)return;this._removeResultMarkers();let i=im({},{color:"#4668F2"},this.options.showResultMarkers);for(const r of e){let o;if(this.options.showResultMarkers){this.options.showResultMarkers&&this.options.showResultMarkers.element&&(o=this.options.showResultMarkers.element.cloneNode(!0),i=im(i,{element:o}));const s=new this._maplibregl.Marker(im({},i,{element:o}));let a;if(this.options.popup){const h=im({},{},this.options.popup);a=new this._maplibregl.Popup(h).setHTML(this.options.popupRender(r))}r.center?(s.setLngLat(r.center).addTo(this._map),this.options.popup&&s.setPopup(a)):r.geometry&&r.geometry.type&&r.geometry.type==="Point"&&r.geometry.coordinates&&(s.setLngLat(r.geometry.coordinates).addTo(this._map),this.options.popup&&s.setPopup(a)),this.resultMarkers.push(s)}}return this}_removeResultMarkers(){this.resultMarkers&&this.resultMarkers.length>0&&(this.resultMarkers.forEach(function(e){e.remove()}),this.resultMarkers=[])}on(e,t){return this._eventEmitter.on(e,t),this}once(e){return new Promise(t=>{this._eventEmitter.once(e,t)})}off(e,t){return this._eventEmitter.removeListener(e,t),this}}function en(){var n="/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGl.tsx",e="1655c5d10102378b1e2627d777374c6f3c3f21a7",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGl.tsx",statementMap:{0:{start:{line:21,column:26},end:{line:27,column:3}},1:{start:{line:28,column:16},end:{line:28,column:55}},2:{start:{line:29,column:2},end:{line:31,column:3}},3:{start:{line:30,column:4},end:{line:30,column:30}},4:{start:{line:32,column:18},end:{line:32,column:20}},5:{start:{line:33,column:2},end:{line:38,column:5}},6:{start:{line:34,column:19},end:{line:34,column:53}},7:{start:{line:35,column:4},end:{line:37,column:5}},8:{start:{line:36,column:6},end:{line:36,column:33}},9:{start:{line:39,column:23},end:{line:43,column:3}},10:{start:{line:44,column:2},end:{line:44,column:22}},11:{start:{line:47,column:24},end:{line:57,column:3}},12:{start:{line:58,column:14},end:{line:58,column:18}},13:{start:{line:60,column:4},end:{line:60,column:17}},14:{start:{line:61,column:4},end:{line:66,column:6}},15:{start:{line:67,column:4},end:{line:69,column:7}},16:{start:{line:68,column:6},end:{line:68,column:25}},17:{start:{line:72,column:17},end:{line:72,column:22}},18:{start:{line:73,column:4},end:{line:76,column:5}},19:{start:{line:74,column:6},end:{line:74,column:132}},20:{start:{line:77,column:4},end:{line:77,column:18}},21:{start:{line:80,column:16},end:{line:80,column:30}},22:{start:{line:81,column:28},end:{line:81,column:79}},23:{start:{line:82,column:4},end:{line:87,column:5}},24:{start:{line:83,column:6},end:{line:83,column:52}},25:{start:{line:84,column:6},end:{line:84,column:70}},26:{start:{line:85,column:6},end:{line:85,column:70}},27:{start:{line:86,column:6},end:{line:86,column:76}},28:{start:{line:88,column:4},end:{line:90,column:5}},29:{start:{line:89,column:6},end:{line:89,column:43}},30:{start:{line:91,column:4},end:{line:96,column:5}},31:{start:{line:92,column:6},end:{line:92,column:59}},32:{start:{line:93,column:6},end:{line:95,column:14}},33:{start:{line:94,column:8},end:{line:94,column:36}},34:{start:{line:99,column:20},end:{line:108,column:5}},35:{start:{line:109,column:21},end:{line:109,column:53}},36:{start:{line:110,column:4},end:{line:110,column:53}},37:{start:{line:111,column:16},end:{line:111,column:43}},38:{start:{line:112,column:26},end:{line:116,column:5}},39:{start:{line:113,column:21},end:{line:113,column:36}},40:{start:{line:114,column:19},end:{line:114,column:32}},41:{start:{line:115,column:6},end:{line:115,column:44}},42:{start:{line:117,column:4},end:{line:117,column:20}},43:{start:{line:118,column:4},end:{line:118,column:56}},44:{start:{line:119,column:4},end:{line:119,column:56}},45:{start:{line:120,column:4},end:{line:120,column:62}},46:{start:{line:121,column:21},end:{line:121,column:43}},47:{start:{line:122,column:24},end:{line:122,column:41}},48:{start:{line:123,column:4},end:{line:123,column:45}},49:{start:{line:124,column:16},end:{line:124,column:74}},50:{start:{line:125,column:4},end:{line:125,column:37}},51:{start:{line:126,column:20},end:{line:126,column:49}},52:{start:{line:127,column:17},end:{line:127,column:36}},53:{start:{line:128,column:25},end:{line:130,column:6}},54:{start:{line:131,column:20},end:{line:162,column:6}},55:{start:{line:139,column:8},end:{line:139,column:82}},56:{start:{line:141,column:62},end:{line:141,column:141}},57:{start:{line:143,column:8},end:{line:160,column:9}},58:{start:{line:144,column:10},end:{line:146,column:13}},59:{start:{line:145,column:12},end:{line:145,column:94}},60:{start:{line:147,column:10},end:{line:147,column:25}},61:{start:{line:149,column:10},end:{line:158,column:13}},62:{start:{line:150,column:12},end:{line:157,column:15}},63:{start:{line:159,column:10},end:{line:159,column:25}},64:{start:{line:163,column:4},end:{line:163,column:28}},65:{start:{line:164,column:4},end:{line:172,column:7}},66:{start:{line:165,column:6},end:{line:171,column:9}},67:{start:{line:173,column:4},end:{line:178,column:7}},68:{start:{line:174,column:6},end:{line:174,column:40}},69:{start:{line:174,column:33},end:{line:174,column:40}},70:{start:{line:175,column:6},end:{line:177,column:9}},71:{start:{line:179,column:4},end:{line:181,column:7}},72:{start:{line:180,column:6},end:{line:180,column:30}},73:{start:{line:182,column:4},end:{line:186,column:7}},74:{start:{line:183,column:6},end:{line:185,column:9}},75:{start:{line:187,column:4},end:{line:187,column:37}},76:{start:{line:188,column:4},end:{line:188,column:37}},77:{start:{line:190,column:22},end:{line:193,column:3}},78:{start:{line:191,column:18},end:{line:191,column:82}},79:{start:{line:191,column:66},end:{line:191,column:81}},80:{start:{line:192,column:4},end:{line:192,column:36}},81:{start:{line:195,column:27},end:{line:228,column:5}},82:{start:{line:197,column:25},end:{line:197,column:27}},83:{start:{line:198,column:8},end:{line:223,column:9}},84:{start:{line:199,column:26},end:{line:199,column:138}},85:{start:{line:200,column:27},end:{line:200,column:47}},86:{start:{line:201,column:26},end:{line:201,column:47}},87:{start:{line:202,column:10},end:{line:220,column:11}},88:{start:{line:203,column:27},end:{line:206,column:13}},89:{start:{line:207,column:26},end:{line:218,column:13}},90:{start:{line:219,column:12},end:{line:219,column:33}},91:{start:{line:222,column:10},end:{line:222,column:69}},92:{start:{line:224,column:8},end:{line:226,column:10}},93:{start:{line:229,column:21},end:{line:232,column:6}},94:{start:{line:233,column:4},end:{line:233,column:41}},95:{start:{line:234,column:4},end:{line:234,column:20}},96:{start:{line:237,column:14},end:{line:237,column:26}},97:{start:{line:238,column:4},end:{line:238,column:53}},98:{start:{line:239,column:4},end:{line:239,column:49}},99:{start:{line:240,column:4},end:{line:251,column:6}},100:{start:{line:247,column:10},end:{line:247,column:29}},101:{start:{line:254,column:22},end:{line:254,column:62}}},fnMap:{0:{name:"buildInspectStyle",decl:{start:{line:20,column:9},end:{line:20,column:26}},loc:{start:{line:20,column:78},end:{line:45,column:1}},line:20},1:{name:"(anonymous_1)",decl:{start:{line:33,column:48},end:{line:33,column:49}},loc:{start:{line:33,column:62},end:{line:38,column:3}},line:33},2:{name:"(anonymous_2)",decl:{start:{line:48,column:17},end:{line:48,column:18}},loc:{start:{line:48,column:23},end:{line:49,column:5}},line:48},3:{name:"(anonymous_3)",decl:{start:{line:50,column:18},end:{line:50,column:19}},loc:{start:{line:50,column:24},end:{line:51,column:5}},line:50},4:{name:"(anonymous_4)",decl:{start:{line:52,column:19},end:{line:52,column:20}},loc:{start:{line:52,column:25},end:{line:53,column:5}},line:52},5:{name:"(anonymous_5)",decl:{start:{line:54,column:14},end:{line:54,column:15}},loc:{start:{line:54,column:20},end:{line:55,column:5}},line:54},6:{name:"(anonymous_6)",decl:{start:{line:59,column:2},end:{line:59,column:3}},loc:{start:{line:59,column:21},end:{line:70,column:3}},line:59},7:{name:"(anonymous_7)",decl:{start:{line:67,column:34},end:{line:67,column:35}},loc:{start:{line:67,column:40},end:{line:69,column:5}},line:67},8:{name:"(anonymous_8)",decl:{start:{line:71,column:2},end:{line:71,column:3}},loc:{start:{line:71,column:46},end:{line:78,column:3}},line:71},9:{name:"(anonymous_9)",decl:{start:{line:79,column:2},end:{line:79,column:3}},loc:{start:{line:79,column:23},end:{line:97,column:3}},line:79},10:{name:"(anonymous_10)",decl:{start:{line:93,column:17},end:{line:93,column:18}},loc:{start:{line:93,column:23},end:{line:95,column:7}},line:93},11:{name:"(anonymous_11)",decl:{start:{line:98,column:2},end:{line:98,column:3}},loc:{start:{line:98,column:22},end:{line:189,column:3}},line:98},12:{name:"(anonymous_12)",decl:{start:{line:112,column:26},end:{line:112,column:27}},loc:{start:{line:112,column:32},end:{line:116,column:5}},line:112},13:{name:"(anonymous_13)",decl:{start:{line:138,column:24},end:{line:138,column:25}},loc:{start:{line:138,column:44},end:{line:140,column:7}},line:138},14:{name:"(anonymous_14)",decl:{start:{line:141,column:25},end:{line:141,column:26}},loc:{start:{line:141,column:62},end:{line:141,column:141}},line:141},15:{name:"(anonymous_15)",decl:{start:{line:142,column:19},end:{line:142,column:20}},loc:{start:{line:142,column:33},end:{line:161,column:7}},line:142},16:{name:"(anonymous_16)",decl:{start:{line:144,column:36},end:{line:144,column:37}},loc:{start:{line:144,column:42},end:{line:146,column:11}},line:144},17:{name:"(anonymous_17)",decl:{start:{line:149,column:36},end:{line:149,column:37}},loc:{start:{line:149,column:42},end:{line:158,column:11}},line:149},18:{name:"(anonymous_18)",decl:{start:{line:164,column:25},end:{line:164,column:26}},loc:{start:{line:164,column:31},end:{line:172,column:5}},line:164},19:{name:"(anonymous_19)",decl:{start:{line:173,column:19},end:{line:173,column:20}},loc:{start:{line:173,column:26},end:{line:178,column:5}},line:173},20:{name:"(anonymous_20)",decl:{start:{line:179,column:20},end:{line:179,column:21}},loc:{start:{line:179,column:27},end:{line:181,column:5}},line:179},21:{name:"(anonymous_21)",decl:{start:{line:182,column:19},end:{line:182,column:20}},loc:{start:{line:182,column:27},end:{line:186,column:5}},line:182},22:{name:"(anonymous_22)",decl:{start:{line:190,column:22},end:{line:190,column:23}},loc:{start:{line:190,column:30},end:{line:193,column:3}},line:190},23:{name:"(anonymous_23)",decl:{start:{line:191,column:55},end:{line:191,column:56}},loc:{start:{line:191,column:66},end:{line:191,column:81}},line:191},24:{name:"(anonymous_24)",decl:{start:{line:194,column:2},end:{line:194,column:3}},loc:{start:{line:194,column:20},end:{line:235,column:3}},line:194},25:{name:"(anonymous_25)",decl:{start:{line:196,column:22},end:{line:196,column:23}},loc:{start:{line:196,column:40},end:{line:227,column:7}},line:196},26:{name:"(anonymous_26)",decl:{start:{line:236,column:2},end:{line:236,column:3}},loc:{start:{line:236,column:11},end:{line:252,column:3}},line:236},27:{name:"(anonymous_27)",decl:{start:{line:246,column:13},end:{line:246,column:14}},loc:{start:{line:246,column:20},end:{line:248,column:9}},line:246}},branchMap:{0:{loc:{start:{line:29,column:2},end:{line:31,column:3}},type:"if",locations:[{start:{line:29,column:2},end:{line:31,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:29},1:{loc:{start:{line:35,column:4},end:{line:37,column:5}},type:"if",locations:[{start:{line:35,column:4},end:{line:37,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:35},2:{loc:{start:{line:35,column:8},end:{line:35,column:64}},type:"binary-expr",locations:[{start:{line:35,column:8},end:{line:35,column:32}},{start:{line:35,column:36},end:{line:35,column:64}}],line:35},3:{loc:{start:{line:74,column:15},end:{line:74,column:131}},type:"binary-expr",locations:[{start:{line:74,column:15},end:{line:74,column:71}},{start:{line:74,column:75},end:{line:74,column:131}}],line:74},4:{loc:{start:{line:82,column:4},end:{line:87,column:5}},type:"if",locations:[{start:{line:82,column:4},end:{line:87,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:82},5:{loc:{start:{line:88,column:4},end:{line:90,column:5}},type:"if",locations:[{start:{line:88,column:4},end:{line:90,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:88},6:{loc:{start:{line:88,column:8},end:{line:88,column:98}},type:"binary-expr",locations:[{start:{line:88,column:8},end:{line:88,column:26}},{start:{line:88,column:30},end:{line:88,column:98}}],line:88},7:{loc:{start:{line:91,column:4},end:{line:96,column:5}},type:"if",locations:[{start:{line:91,column:4},end:{line:96,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:91},8:{loc:{start:{line:91,column:8},end:{line:91,column:59}},type:"binary-expr",locations:[{start:{line:91,column:8},end:{line:91,column:26}},{start:{line:91,column:30},end:{line:91,column:59}}],line:91},9:{loc:{start:{line:143,column:8},end:{line:160,column:9}},type:"if",locations:[{start:{line:143,column:8},end:{line:160,column:9}},{start:{line:148,column:15},end:{line:160,column:9}}],line:143},10:{loc:{start:{line:174,column:6},end:{line:174,column:40}},type:"if",locations:[{start:{line:174,column:6},end:{line:174,column:40}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:174}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0,87:0,88:0,89:0,90:0,91:0,92:0,93:0,94:0,95:0,96:0,97:0,98:0,99:0,100:0,101:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGl.tsx"],names:[],mappings:"AA8LwB;AA9LxB,OAAO,WAAW;AAClB,SAAQ,kBAAiB;AACzB,OAAO,gBAAsI;AAC7I,OAAO,qBAAqB;AAC5B,OAAO,YAAY;AACnB,OAAO,6BAA6B;AACpC,OAAO,uCAAgE;AACvE,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,SAAgC,6BAA6B;AAC7D,OAAO;AACP,OAAO;AACP,OAAO;AACP,OAAO,sBAAoF;AAC3F,OAAO;AACP,SAAS,uBAA6C;AACtD,OAAO,aAAa;AACpB,SAAS,gBAAgB;AAEzB,SAAS,kBAAkB,kBAAsC,eAAmC,kBAAqC;AACvI,QAAM,kBAAkB;AAAA,IACtB,MAAM;AAAA,IACN,QAAQ;AAAA,IACR,SAAS;AAAA,MACP,oBAAoB;AAAA,IACtB;AAAA,EACF;AAEA,QAAM,QAAQ,sBAAsB,gBAAgB;AACpD,MAAG,OAAO;AACR,kBAAc,KAAK,KAAK;AAAA,EAC1B;AAEA,QAAM,UAA+C,CAAC;AAEtD,SAAO,KAAK,iBAAiB,OAAO,EAAE,QAAQ,cAAY;AACxD,UAAM,SAAS,iBAAiB,QAAQ,QAAQ;AAChD,QAAG,OAAO,SAAS,YAAY,OAAO,SAAS,cAAc;AAC3D,cAAQ,QAAQ,IAAI;AAAA,IACtB;AAAA,EACF,CAAC;AAED,QAAM,eAAe;AAAA,IACnB,GAAG;AAAA,IACH;AAAA,IACA,QAAQ,CAAC,eAAe,EAAE,OAAO,aAAqC;AAAA,EACxE;AACA,SAAO;AACT;AAyBA,MAAM,8BAA8B,MAAM,UAA0D;AAAA,EAClG,OAAO,eAAe;AAAA,IACpB,aAAa,MAAM;AAAA,IAAC;AAAA,IACpB,cAAc,MAAM;AAAA,IAAC;AAAA,IACrB,eAAe,MAAM;AAAA,IAAC;AAAA,IACtB,UAAU,MAAM;AAAA,IAAC;AAAA,IACjB,SAAS,CAAC;AAAA,EACZ;AAAA,EACA,YAAmC;AAAA,EAEnC,YAAY,OAAmC;AAC7C,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,KAAK;AAAA,MACL,SAAS;AAAA,MACT,UAAU;AAAA,MACV,aAAa;AAAA,IACf;AACA,YAAQ,GAAG,mBAAmB,MAAM;AAClC,WAAK,YAAY;AAAA,IACnB,CAAC;AAAA,EACH;AAAA,EAGA,sBAAsB,WAAuC,WAA+B;AAC1F,QAAI,SAAS;AACb,QAAI;AACF,eAAS,KAAK,UAAU,KAAK,KAAK,MAAM,KAAK,UAAU,SAAS,KAAK,KAAK,UAAU,KAAK,KAAK,MAAM,KAAK,UAAU,SAAS;AAAA,IAC9H,SAAQ,IAAI;AAAA,IAEZ;AACA,WAAO;AAAA,EACT;AAAA,EAEA,qBAAqB;AACnB,UAAM,MAAM,KAAK,MAAM;AAEvB,UAAM,kBAAkB,KAAK,MAAM,oBAAoB,KAAK,MAAM,QAAQ;AAC1E,QAAI,KAAK;AAIP,UAAI,SAAS,iBAAiB,EAAC,MAAM,KAAI,CAAC;AAC1C,UAAI,qBAAqB,KAAK,MAAM,SAAS;AAC7C,UAAI,qBAAqB,KAAK,MAAM,SAAS;AAC7C,UAAI,wBAAwB,KAAK,MAAM,SAAS;AAAA,IAClD;AAEA,QAAG,KAAK,MAAM,WAAW,KAAK,MAAM,uBAAuB,KAAK,MAAM,QAAQ,iBAAiB;AAC7F,WAAK,MAAM,QAAQ,gBAAgB;AAAA,IACrC;AACA,QAAI,KAAK,MAAM,WAAW,KAAK,MAAM,oBAAoB;AACvD,WAAK,MAAM,QAAQ,iBAAiB,eAAe;AAEnD,iBAAW,MAAM;AACf,aAAK,MAAM,QAAS,OAAO;AAAA,MAC7B,GAAG,GAAG;AAAA,IACR;AAAA,EAEF;AAAA,EAEA,oBAAoB;AAClB,UAAM,UAAU;AAAA,MACd,GAAG,KAAK,MAAM;AAAA,MACd,WAAW,KAAK;AAAA,MAChB,OAAO,KAAK,MAAM;AAAA,MAClB,MAAM;AAAA,MACN,SAAS;AAAA;AAAA;AAAA,MAGT,0BAA0B;AAAA,IAC5B;AAEA,UAAM,WAAW,IAAI,SAAS,EAAC,UAAU,KAAI,CAAC;AAC9C,eAAW,YAAY,WAAU,SAAS,IAAI;AAC9C,UAAM,MAAM,IAAI,WAAW,IAAI,OAAO;AAEtC,UAAM,gBAAgB,MAAM;AAC1B,YAAM,SAAS,IAAI,UAAU;AAC7B,YAAM,OAAO,IAAI,QAAQ;AACzB,WAAK,MAAM,SAAS,EAAC,QAAQ,KAAI,CAAC;AAAA,IACpC;AACA,kBAAc;AAEd,QAAI,qBAAqB,QAAQ;AACjC,QAAI,qBAAqB,QAAQ;AACjC,QAAI,wBAAwB,QAAQ;AAEpC,UAAM,WAAW,KAAK,aAAa,GAAG;AAEtC,UAAM,cAAc,IAAI,YAAY;AACpC,QAAI,WAAW,aAAa,WAAW;AAEvC,UAAM,MAAM,IAAI,WAAW,kBAAkB,EAAC,gBAAe,KAAI,CAAC;AAClE,QAAI,WAAW,KAAK,WAAW;AAE/B,UAAM,UAAU,SAAS,cAAc,KAAK;AAC5C,UAAM,OAAO,WAAW,OAAO;AAE/B,UAAM,eAAe,IAAI,WAAW,MAAM;AAAA,MACxC,cAAc;AAAA,IAChB,CAAC;AAED,UAAM,UAAU,IAAI,gBAAgB;AAAA,MAClC,OAAO;AAAA,MACP,cAAc;AAAA,MACd,qBAAqB;AAAA,MACrB,4BAA4B;AAAA,MAC5B,mBAAmB;AAAA,MACnB,wBAAwB;AAAA,MACxB,kBAAkB,CAAC,SAAiB,UAAkB;AACpD,eAAO,MAAM,OAAO,YAAY,SAAS,KAAK,CAAC,EAAE,WAAW,GAAG,EAAE,OAAO;AAAA,MAC1E;AAAA,MACA,mBAAmB,CAAC,kBAAsC,kBAAsC,kBAAkB,kBAAkB,eAAe,KAAK,MAAM,gBAAgB;AAAA,MAC9K,aAAa,CAAC,aAA+B;AAC3C,YAAG,KAAK,MAAM,oBAAoB;AAChC,uBAAa,KAAK,QAAQ,MAAM;AAC9B,iBAAK,OAAO,oBAAC,qCAAkC,UAAoB,CAAE;AAAA,UACvE,CAAC;AACD,iBAAO;AAAA,QACT,OAAO;AACL,uBAAa,KAAK,QAAQ,MAAM;AAC9B,iBAAK,OAAO;AAAA,cAAC;AAAA;AAAA,gBACX;AAAA,gBACA,eAAe,KAAK;AAAA,gBACpB,MAAM,KAAK,MAAM;AAAA;AAAA,YACnB,CAAG;AAAA,UACL,CAAC;AACD,iBAAO;AAAA,QACT;AAAA,MACF;AAAA,IACF,CAAC;AACD,QAAI,WAAW,OAAO;AAEtB,QAAI,GAAG,cAAc,MAAM;AACzB,WAAK,SAAS;AAAA,QACZ;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA,MAAM,IAAI,QAAQ;AAAA,MACpB,CAAC;AAAA,IACH,CAAC;AAED,QAAI,GAAG,QAAQ,OAAK;AAClB,UAAG,EAAE,aAAa,OAAQ;AAC1B,WAAK,MAAM,aAAc;AAAA,QACvB,KAAK,KAAK,MAAM;AAAA,MAClB,CAAC;AAAA,IACH,CAAC;AAED,QAAI,GAAG,SAAS,OAAK;AACnB,cAAQ,IAAI,SAAS,CAAC;AAAA,IACxB,CAAC;AAED,QAAI,GAAG,QAAQ,QAAM;AACnB,WAAK,SAAS;AAAA,QACZ,MAAM,IAAI,QAAQ;AAAA,MACpB,CAAC;AAAA,IACH,CAAC;AAED,QAAI,GAAG,WAAW,aAAa;AAC/B,QAAI,GAAG,WAAW,aAAa;AAAA,EACjC;AAAA,EAEA,oBAAoB,CAAC,OAAe;AAClC,UAAM,QAAQ,KAAK,MAAM,SAAS,OAAO,UAAU,WAAS,MAAM,OAAO,EAAE;AAC3E,SAAK,MAAM,cAAc,KAAK;AAAA,EAChC;AAAA,EAEA,aAAa,KAAU;AACrB,UAAM,iBAAiB;AAAA,MACrB,gBAAgB,OAAO,WAAsC;AAC3D,cAAM,WAAW,CAAC;AAClB,YAAI;AACF,gBAAM,UAAU,gDAAgD,OAAO,KAAK;AAC5E,gBAAM,WAAW,MAAM,MAAM,OAAO;AACpC,gBAAM,UAAU,MAAM,SAAS,KAAK;AACpC,qBAAW,WAAW,QAAQ,UAAU;AACtC,kBAAM,SAAS;AAAA,cACb,QAAQ,KAAK,CAAC,KACT,QAAQ,KAAK,CAAC,IAAI,QAAQ,KAAK,CAAC,KAAK;AAAA,cAC1C,QAAQ,KAAK,CAAC,KACT,QAAQ,KAAK,CAAC,IAAI,QAAQ,KAAK,CAAC,KAAK;AAAA,YAC5C;AACA,kBAAM,QAAQ;AAAA,cACZ,MAAM;AAAA,cACN,UAAU;AAAA,gBACR,MAAM;AAAA,gBACN,aAAa;AAAA,cACf;AAAA,cACA,YAAY,QAAQ,WAAW;AAAA,cAC/B,YAAY,QAAQ;AAAA,cACpB,MAAM,QAAQ,WAAW;AAAA,cACzB,YAAY,CAAC,OAAO;AAAA,cACpB;AAAA,YACF;AACA,qBAAS,KAAK,KAAK;AAAA,UACrB;AAAA,QACF,SAAS,GAAG;AACV,kBAAQ,MAAM,wCAAwC,CAAC,EAAE;AAAA,QAC3D;AACA,eAAO;AAAA,UACL;AAAA,QACF;AAAA,MACF;AAAA,IACF;AACA,UAAM,WAAW,IAAI,iBAAiB,gBAAgB;AAAA,MACpD,aAAa,KAAK,MAAM,EAAE,QAAQ;AAAA,MAClC,YAAY;AAAA,IACd,CAAC;AACD,QAAI,WAAW,UAAU,UAAU;AACnC,WAAO;AAAA,EACT;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,SAAK,MAAM,UAAU,eAAe,EAAE,QAAQ,CAAC;AAC/C,SAAK,MAAM,aAAa,SAAS,EAAE,OAAO,CAAC;AAC3C,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,MAAK;AAAA,QACL,cAAY,EAAE,UAAU;AAAA,QACxB,KAAK,OAAK;AAAC,eAAK,YAAY;AAAA,QAAE;AAAA,QAC9B,eAAY;AAAA;AAAA,IACb;AAAA,EACH;AACF;AAEA,MAAM,gBAAgB,gBAAgB,EAAE,qBAAqB;AAC7D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"1655c5d10102378b1e2627d777374c6f3c3f21a7"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return en=function(){return s},s}en();function Zde(n,e,t){en().f[0]++;const i=(en().s[0]++,{id:"background",type:"background",paint:{"background-color":"#1c1f24"}}),r=(en().s[1]++,Ode(t));en().s[2]++,r?(en().b[0][0]++,en().s[3]++,e.push(r)):en().b[0][1]++;const o=(en().s[4]++,{});en().s[5]++,Object.keys(n.sources).forEach(a=>{en().f[1]++;const c=(en().s[6]++,n.sources[a]);en().s[7]++,en().b[2][0]++,c.type!=="raster"&&(en().b[2][1]++,c.type!=="raster-dem")?(en().b[1][0]++,en().s[8]++,o[a]=c):en().b[1][1]++});const s=(en().s[9]++,{...n,sources:o,layers:[i].concat(e)});return en().s[10]++,s}class Xde extends On.Component{static defaultProps=(en().s[11]++,{onMapLoaded:()=>{en().f[2]++},onDataChange:()=>{en().f[3]++},onLayerSelect:()=>{en().f[4]++},onChange:()=>{en().f[5]++},options:{}});container=(en().s[12]++,null);constructor(e){en().f[6]++,en().s[13]++,super(e),en().s[14]++,this.state={map:null,inspect:null,geocoder:null,zoomControl:null},en().s[15]++,CA.on("languageChanged",()=>{en().f[7]++,en().s[16]++,this.forceUpdate()})}shouldComponentUpdate(e,t){en().f[8]++;let i=(en().s[17]++,!1);en().s[18]++;try{en().s[19]++,i=(en().b[3][0]++,JSON.stringify(this.props)!==JSON.stringify(e)||(en().b[3][1]++,JSON.stringify(this.state)!==JSON.stringify(t)))}catch{}return en().s[20]++,i}componentDidUpdate(){en().f[9]++;const e=(en().s[21]++,this.state.map),t=(en().s[22]++,this.props.replaceAccessTokens(this.props.mapStyle));en().s[23]++,e?(en().b[4][0]++,en().s[24]++,e.setStyle(t,{diff:!0}),en().s[25]++,e.showTileBoundaries=this.props.options?.showTileBoundaries,en().s[26]++,e.showCollisionBoxes=this.props.options?.showCollisionBoxes,en().s[27]++,e.showOverdrawInspector=this.props.options?.showOverdrawInspector):en().b[4][1]++,en().s[28]++,en().b[6][0]++,this.state.inspect&&(en().b[6][1]++,this.props.inspectModeEnabled!==this.state.inspect._showInspectMap)?(en().b[5][0]++,en().s[29]++,this.state.inspect.toggleInspector()):en().b[5][1]++,en().s[30]++,en().b[8][0]++,this.state.inspect&&(en().b[8][1]++,this.props.inspectModeEnabled)?(en().b[7][0]++,en().s[31]++,this.state.inspect.setOriginalStyle(t),en().s[32]++,setTimeout(()=>{en().f[10]++,en().s[33]++,this.state.inspect.render()},500)):en().b[7][1]++}componentDidMount(){en().f[11]++;const e=(en().s[34]++,{...this.props.options,container:this.container,style:this.props.mapStyle,hash:!0,maxZoom:24,localIdeographFontFamily:!1}),t=(en().s[35]++,new sle({metadata:!0}));en().s[36]++,b_.addProtocol("pmtiles",t.tile);const i=(en().s[37]++,new b_.Map(e));en().s[38]++;const r=()=>{en().f[12]++;const x=(en().s[39]++,i.getCenter()),E=(en().s[40]++,i.getZoom());en().s[41]++,this.props.onChange({center:x,zoom:E})};en().s[42]++,r(),en().s[43]++,i.showTileBoundaries=e.showTileBoundaries,en().s[44]++,i.showCollisionBoxes=e.showCollisionBoxes,en().s[45]++,i.showOverdrawInspector=e.showOverdrawInspector;const o=(en().s[46]++,this.initGeocoder(i)),s=(en().s[47]++,new Sde);en().s[48]++,i.addControl(s,"top-right");const a=(en().s[49]++,new b_.NavigationControl({visualizePitch:!0}));en().s[50]++,i.addControl(a,"top-right");const c=(en().s[51]++,document.createElement("div")),h=(en().s[52]++,m$.createRoot(c)),m=(en().s[53]++,new b_.Popup({closeOnClick:!1})),v=(en().s[54]++,new ED({popup:m,showMapPopup:!0,showMapPopupOnHover:!1,showInspectMapPopupOnHover:!0,showInspectButton:!1,blockHoverPopupOnClick:!0,assignLayerColor:(x,E)=>(en().f[13]++,en().s[55]++,$u(aZ.brightColor(x,E)).desaturate(.5).string()),buildInspectStyle:(x,E)=>(en().f[14]++,en().s[56]++,Zde(x,E,this.props.highlightedLayer)),renderPopup:x=>(en().f[15]++,en().s[57]++,this.props.inspectModeEnabled?(en().b[9][0]++,en().s[58]++,m.once("open",()=>{en().f[16]++,en().s[59]++,h.render(te.jsx(dde,{features:x}))}),en().s[60]++,c):(en().b[9][1]++,en().s[61]++,m.once("open",()=>{en().f[17]++,en().s[62]++,h.render(te.jsx(hZ,{features:x,onLayerSelect:this.onLayerSelectById,zoom:this.state.zoom}))}),en().s[63]++,c))}));en().s[64]++,i.addControl(v),en().s[65]++,i.on("style.load",()=>{en().f[18]++,en().s[66]++,this.setState({map:i,inspect:v,geocoder:o,zoomControl:s,zoom:i.getZoom()})}),en().s[67]++,i.on("data",x=>{if(en().f[19]++,en().s[68]++,x.dataType!=="tile"){en().b[10][0]++,en().s[69]++;return}else en().b[10][1]++;en().s[70]++,this.props.onDataChange({map:this.state.map})}),en().s[71]++,i.on("error",x=>{en().f[20]++,en().s[72]++,console.log("ERROR",x)}),en().s[73]++,i.on("zoom",x=>{en().f[21]++,en().s[74]++,this.setState({zoom:i.getZoom()})}),en().s[75]++,i.on("dragend",r),en().s[76]++,i.on("zoomend",r)}onLayerSelectById=(en().s[77]++,e=>{en().f[22]++;const t=(en().s[78]++,this.props.mapStyle.layers.findIndex(i=>(en().f[23]++,en().s[79]++,i.id===e)));en().s[80]++,this.props.onLayerSelect(t)});initGeocoder(e){en().f[24]++;const t=(en().s[81]++,{forwardGeocode:async r=>{en().f[25]++;const o=(en().s[82]++,[]);en().s[83]++;try{const s=(en().s[84]++,`https://nominatim.openstreetmap.org/search?q=${r.query}&format=geojson&polygon_geojson=1&addressdetails=1`),a=(en().s[85]++,await fetch(s)),c=(en().s[86]++,await a.json());en().s[87]++;for(const h of c.features){const m=(en().s[88]++,[h.bbox[0]+(h.bbox[2]-h.bbox[0])/2,h.bbox[1]+(h.bbox[3]-h.bbox[1])/2]),v=(en().s[89]++,{type:"Feature",geometry:{type:"Point",coordinates:m},place_name:h.properties.display_name,properties:h.properties,text:h.properties.display_name,place_type:["place"],center:m});en().s[90]++,o.push(v)}}catch(s){en().s[91]++,console.error(`Failed to forwardGeocode with error: ${s}`)}return en().s[92]++,{features:o}}}),i=(en().s[93]++,new Hde(t,{placeholder:this.props.t("Search"),maplibregl:b_}));return en().s[94]++,e.addControl(i,"top-left"),en().s[95]++,i}render(){en().f[26]++;const e=(en().s[96]++,this.props.t);return en().s[97]++,this.state.geocoder?.setPlaceholder(e("Search")),en().s[98]++,this.state.zoomControl?.setLabel(e("Zoom:")),en().s[99]++,te.jsx("div",{className:"maputnik-map__map",role:"region","aria-label":e("Map view"),ref:t=>{en().f[27]++,en().s[100]++,this.container=t},"data-wd-key":"maplibre:map"})}}const Jde=(en().s[101]++,Po()(Xde));var efe=8,tfe={version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},nfe={"*":{type:"source"}},ife=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],rfe={type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},ofe={type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},sfe={type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},afe={type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},lfe={type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},ufe={type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},cfe={id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},Afe=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],hfe={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},dfe={"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},ffe={"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},pfe={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},mfe={"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},gfe={"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},yfe={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},vfe={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},bfe={type:"array",value:"*"},Cfe={type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},_fe={type:"enum",values:{Point:{},LineString:{},Polygon:{}}},xfe={type:"array",minimum:0,maximum:24,value:["number","color"],length:2},Mfe={type:"array",value:"*",minimum:1},wfe={anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},Sfe={"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},Efe={source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},Bfe={type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},Ofe=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],Ife={"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},kfe={"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},Tfe={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},Rfe={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Dfe={"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},Pfe={"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Ufe={"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},Kfe={"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Lfe={duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},Ffe={"*":{type:"string"}},zfe={$version:efe,$root:tfe,sources:nfe,source:ife,source_vector:rfe,source_raster:ofe,source_raster_dem:sfe,source_geojson:afe,source_video:lfe,source_image:ufe,layer:cfe,layout:Afe,layout_background:hfe,layout_fill:dfe,layout_circle:ffe,layout_heatmap:pfe,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:mfe,layout_symbol:gfe,layout_raster:yfe,layout_hillshade:vfe,"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:bfe,filter_operator:Cfe,geometry_type:_fe,function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:xfe,expression:Mfe,light:wfe,sky:Sfe,terrain:Efe,projection:Bfe,paint:Ofe,paint_fill:Ife,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:kfe,paint_circle:Tfe,paint_heatmap:Rfe,paint_symbol:Dfe,paint_raster:Pfe,paint_hillshade:Ufe,"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:Kfe,transition:Lfe,"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:Ffe};const jfe=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Nfe(n,e){const t={};for(const i in n)i!=="ref"&&(t[i]=n[i]);return jfe.forEach(i=>{i in e&&(t[i]=e[i])}),t}function gZ(n){n=n.slice();const e=Object.create(null);for(let t=0;t<n.length;t++)e[n[t].id]=n[t];for(let t=0;t<n.length;t++)"ref"in n[t]&&(n[t]=Nfe(n[t],e[n[t].ref]));return n}class Kg extends Error{constructor(e,t){super(t),this.message=t,this.key=e}}class OD{constructor(e,t=[]){this.parent=e,this.bindings={};for(const[i,r]of t)this.bindings[i]=r}concat(e){return new OD(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return this.bindings[e]?!0:this.parent?this.parent.has(e):!1}}const wE={kind:"null"},ei={kind:"number"},po={kind:"string"},eo={kind:"boolean"},Xg={kind:"color"},SE={kind:"projectionDefinition"},Ib={kind:"object"},$r={kind:"value"},Gfe={kind:"error"},EE={kind:"collator"},BE={kind:"formatted"},OE={kind:"padding"},N3={kind:"colorArray"},IE={kind:"numberArray"},J4={kind:"resolvedImage"},kE={kind:"variableAnchorOffsetCollection"};function Af(n,e){return{kind:"array",itemType:n,N:e}}function xl(n){if(n.kind==="array"){const e=xl(n.itemType);return typeof n.N=="number"?`array<${e}, ${n.N}>`:n.itemType.kind==="value"?"array":`array<${e}>`}else return n.kind}const Wfe=[wE,ei,po,eo,Xg,SE,BE,Ib,Af($r),OE,IE,N3,J4,kE];function G3(n,e){if(e.kind==="error")return null;if(n.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!G3(n.itemType,e.itemType))&&(typeof n.N!="number"||n.N===e.N))return null}else{if(n.kind===e.kind)return null;if(n.kind==="value"){for(const t of Wfe)if(!G3(t,e))return null}}return`Expected ${xl(n)} but found ${xl(e)} instead.`}function ID(n,e){return e.some(t=>t.kind===n.kind)}function kb(n,e){return e.some(t=>t==="null"?n===null:t==="array"?Array.isArray(n):t==="object"?n&&!Array.isArray(n)&&typeof n=="object":t===typeof n)}function yy(n,e){return n.kind==="array"&&e.kind==="array"?n.itemType.kind===e.itemType.kind&&typeof n.N=="number":n.kind===e.kind}const yZ=.96422,vZ=1,bZ=.82521,CZ=4/29,W_=6/29,_Z=3*W_*W_,Qfe=W_*W_*W_,Yfe=Math.PI/180,qfe=180/Math.PI;function xZ(n){return n=n%360,n<0&&(n+=360),n}function MZ([n,e,t,i]){n=LB(n),e=LB(e),t=LB(t);let r,o;const s=FB((.2225045*n+.7168786*e+.0606169*t)/vZ);n===e&&e===t?r=o=s:(r=FB((.4360747*n+.3850649*e+.1430804*t)/yZ),o=FB((.0139322*n+.0971045*e+.7141733*t)/bZ));const a=116*s-16;return[a<0?0:a,500*(r-s),200*(s-o),i]}function LB(n){return n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function FB(n){return n>Qfe?Math.pow(n,1/3):n/_Z+CZ}function wZ([n,e,t,i]){let r=(n+16)/116,o=isNaN(e)?r:r+e/500,s=isNaN(t)?r:r-t/200;return r=vZ*jB(r),o=yZ*jB(o),s=bZ*jB(s),[zB(3.1338561*o-1.6168667*r-.4906146*s),zB(-.9787684*o+1.9161415*r+.033454*s),zB(.0719453*o-.2289914*r+1.4052427*s),i]}function zB(n){return n=n<=.00304?12.92*n:1.055*Math.pow(n,1/2.4)-.055,n<0?0:n>1?1:n}function jB(n){return n>W_?n*n*n:_Z*(n-CZ)}function Vfe(n){const[e,t,i,r]=MZ(n),o=Math.sqrt(t*t+i*i);return[Math.round(o*1e4)?xZ(Math.atan2(i,t)*qfe):NaN,o,e,r]}function $fe([n,e,t,i]){return n=isNaN(n)?0:n*Yfe,wZ([t,Math.cos(n)*e,Math.sin(n)*e,i])}function Hfe([n,e,t,i]){n=xZ(n),e/=100,t/=100;function r(o){const s=(o+n/30)%12,a=e*Math.min(t,1-t);return t-a*Math.max(-1,Math.min(s-3,9-s,1))}return[r(0),r(8),r(4),i]}const Zfe=Object.hasOwn||function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};function SZ(n,e){return Zfe(n,e)?n[e]:void 0}function Xfe(n){if(n=n.toLowerCase().trim(),n==="transparent")return[0,0,0,0];const e=SZ(Jfe,n);if(e){const[r,o,s]=e;return[r/255,o/255,s/255,1]}if(n.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(n)){const o=n.length<6?1:2;let s=1;return[VM(n.slice(s,s+=o)),VM(n.slice(s,s+=o)),VM(n.slice(s,s+=o)),VM(n.slice(s,s+o)||"ff")]}if(n.startsWith("rgb")){const r=/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,o=n.match(r);if(o){const[s,a,c,h,m,v,x,E,D,P,F,W]=o,q=[h||" ",x||" ",P].join("");if(q==="  "||q==="  /"||q===",,"||q===",,,"){const V=[c,v,D].join(""),H=V==="%%%"?100:V===""?255:0;if(H){const X=[C_(+a/H,0,1),C_(+m/H,0,1),C_(+E/H,0,1),F?xF(+F,W):1];if(MF(X))return X}}return}}const t=/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,i=n.match(t);if(i){const[r,o,s,a,c,h,m,v,x]=i,E=[s||" ",c||" ",m].join("");if(E==="  "||E==="  /"||E===",,"||E===",,,"){const D=[+o,C_(+a,0,100),C_(+h,0,100),v?xF(+v,x):1];if(MF(D))return Hfe(D)}}}function VM(n){return parseInt(n.padEnd(2,n),16)/255}function xF(n,e){return C_(e?n/100:n,0,1)}function C_(n,e,t){return Math.min(Math.max(e,n),t)}function MF(n){return!n.some(Number.isNaN)}const Jfe={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function Tb(n,e,t){return n+t*(e-n)}function W3(n,e,t){return n.map((i,r)=>Tb(i,e[r],t))}class js{constructor(e,t,i,r=1,o=!0){this.r=e,this.g=t,this.b=i,this.a=r,o||(this.r*=r,this.g*=r,this.b*=r,r||this.overwriteGetter("rgb",[e,t,i,r]))}static parse(e){if(e instanceof js)return e;if(typeof e!="string")return;const t=Xfe(e);if(t)return new js(...t,!1)}get rgb(){const{r:e,g:t,b:i,a:r}=this,o=r||1/0;return this.overwriteGetter("rgb",[e/o,t/o,i/o,r])}get hcl(){return this.overwriteGetter("hcl",Vfe(this.rgb))}get lab(){return this.overwriteGetter("lab",MZ(this.rgb))}overwriteGetter(e,t){return Object.defineProperty(this,e,{value:t}),t}toString(){const[e,t,i,r]=this.rgb;return`rgba(${[e,t,i].map(o=>Math.round(o*255)).join(",")},${r})`}static interpolate(e,t,i,r="rgb"){switch(r){case"rgb":{const[o,s,a,c]=W3(e.rgb,t.rgb,i);return new js(o,s,a,c,!1)}case"hcl":{const[o,s,a,c]=e.hcl,[h,m,v,x]=t.hcl;let E,D;if(!isNaN(o)&&!isNaN(h)){let V=h-o;h>o&&V>180?V-=360:h<o&&o-h>180&&(V+=360),E=o+i*V}else isNaN(o)?isNaN(h)?E=NaN:(E=h,(a===1||a===0)&&(D=m)):(E=o,(v===1||v===0)&&(D=s));const[P,F,W,q]=$fe([E,D??Tb(s,m,i),Tb(a,v,i),Tb(c,x,i)]);return new js(P,F,W,q,!1)}case"lab":{const[o,s,a,c]=wZ(W3(e.lab,t.lab,i));return new js(o,s,a,c,!1)}}}}js.black=new js(0,0,0,1);js.white=new js(1,1,1,1);js.transparent=new js(0,0,0,0);js.red=new js(1,0,0,1);class kD{constructor(e,t,i){e?this.sensitivity=t?"variant":"case":this.sensitivity=t?"accent":"base",this.locale=i,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,t){return this.collator.compare(e,t)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const epe=["bottom","center","top"];class GT{constructor(e,t,i,r,o,s){this.text=e,this.image=t,this.scale=i,this.fontStack=r,this.textColor=o,this.verticalAlign=s}}class u1{constructor(e){this.sections=e}static fromString(e){return new u1([new GT(e,null,null,null,null,null)])}isEmpty(){return this.sections.length===0?!0:!this.sections.some(e=>e.text.length!==0||e.image&&e.image.name.length!==0)}static factory(e){return e instanceof u1?e:u1.fromString(e)}toString(){return this.sections.length===0?"":this.sections.map(e=>e.text).join("")}}class pm{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof pm)return e;if(typeof e=="number")return new pm([e,e,e,e]);if(Array.isArray(e)&&!(e.length<1||e.length>4)){for(const t of e)if(typeof t!="number")return;switch(e.length){case 1:e=[e[0],e[0],e[0],e[0]];break;case 2:e=[e[0],e[1],e[0],e[1]];break;case 3:e=[e[0],e[1],e[2],e[1]];break}return new pm(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,i){return new pm(W3(e.values,t.values,i))}}class mm{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof mm)return e;if(typeof e=="number")return new mm([e]);if(Array.isArray(e)){for(const t of e)if(typeof t!="number")return;return new mm(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,i){return new mm(W3(e.values,t.values,i))}}class df{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof df)return e;if(typeof e=="string"){const i=js.parse(e);return i?new df([i]):void 0}if(!Array.isArray(e))return;const t=[];for(const i of e){if(typeof i!="string")return;const r=js.parse(i);if(!r)return;t.push(r)}return new df(t)}toString(){return JSON.stringify(this.values)}static interpolate(e,t,i,r="rgb"){const o=[];if(e.values.length!=t.values.length)throw new Error(`colorArray: Arrays have mismatched length (${e.values.length} vs. ${t.values.length}), cannot interpolate.`);for(let s=0;s<e.values.length;s++)o.push(js.interpolate(e.values[s],t.values[s],i,r));return new df(o)}}class Pl extends Error{constructor(e){super(e),this.name="RuntimeError"}toJSON(){return this.message}}const tpe=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Jg{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof Jg)return e;if(!(!Array.isArray(e)||e.length<1||e.length%2!==0)){for(let t=0;t<e.length;t+=2){const i=e[t],r=e[t+1];if(typeof i!="string"||!tpe.has(i)||!Array.isArray(r)||r.length!==2||typeof r[0]!="number"||typeof r[1]!="number")return}return new Jg(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,i){const r=e.values,o=t.values;if(r.length!==o.length)throw new Pl(`Cannot interpolate values of different length. from: ${e.toString()}, to: ${t.toString()}`);const s=[];for(let a=0;a<r.length;a+=2){if(r[a]!==o[a])throw new Pl(`Cannot interpolate values containing mismatched anchors. from[${a}]: ${r[a]}, to[${a}]: ${o[a]}`);s.push(r[a]);const[c,h]=r[a+1],[m,v]=o[a+1];s.push([Tb(c,m,i),Tb(h,v,i)])}return new Jg(s)}}class uv{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new uv({name:e,available:!1}):null}}class cm{constructor(e,t,i){this.from=e,this.to=t,this.transition=i}static interpolate(e,t,i){return new cm(e,t,i)}static parse(e){if(e instanceof cm)return e;if(Array.isArray(e)&&e.length===3&&typeof e[0]=="string"&&typeof e[1]=="string"&&typeof e[2]=="number")return new cm(e[0],e[1],e[2]);if(typeof e=="object"&&typeof e.from=="string"&&typeof e.to=="string"&&typeof e.transition=="number")return new cm(e.from,e.to,e.transition);if(typeof e=="string")return new cm(e,e,1)}}function EZ(n,e,t,i){return typeof n=="number"&&n>=0&&n<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof t=="number"&&t>=0&&t<=255?typeof i>"u"||typeof i=="number"&&i>=0&&i<=1?null:`Invalid rgba value [${[n,e,t,i].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof i=="number"?[n,e,t,i]:[n,e,t]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Q3(n){if(n===null||typeof n=="string"||typeof n=="boolean"||typeof n=="number"||n instanceof cm||n instanceof js||n instanceof kD||n instanceof u1||n instanceof pm||n instanceof mm||n instanceof df||n instanceof Jg||n instanceof uv)return!0;if(Array.isArray(n)){for(const e of n)if(!Q3(e))return!1;return!0}else if(typeof n=="object"){for(const e in n)if(!Q3(n[e]))return!1;return!0}else return!1}function Xu(n){if(n===null)return wE;if(typeof n=="string")return po;if(typeof n=="boolean")return eo;if(typeof n=="number")return ei;if(n instanceof js)return Xg;if(n instanceof cm)return SE;if(n instanceof kD)return EE;if(n instanceof u1)return BE;if(n instanceof pm)return OE;if(n instanceof mm)return IE;if(n instanceof df)return N3;if(n instanceof Jg)return kE;if(n instanceof uv)return J4;if(Array.isArray(n)){const e=n.length;let t;for(const i of n){const r=Xu(i);if(!t)t=r;else{if(t===r)continue;t=$r;break}}return Af(t||$r,e)}else return Ib}function A3(n){const e=typeof n;return n===null?"":e==="string"||e==="number"||e==="boolean"?String(n):n instanceof js||n instanceof cm||n instanceof u1||n instanceof pm||n instanceof mm||n instanceof df||n instanceof Jg||n instanceof uv?n.toString():JSON.stringify(n)}class dx{constructor(e,t){this.type=e,this.value=t}static parse(e,t){if(e.length!==2)return t.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!Q3(e[1]))return t.error("invalid value");const i=e[1];let r=Xu(i);const o=t.expectedType;return r.kind==="array"&&r.N===0&&o&&o.kind==="array"&&(typeof o.N!="number"||o.N===0)&&(r=o),new dx(r,i)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const $M={string:po,number:ei,boolean:eo,object:Ib};class Am{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let i=1,r;const o=e[0];if(o==="array"){let a;if(e.length>2){const h=e[1];if(typeof h!="string"||!(h in $M)||h==="object")return t.error('The item type argument of "array" must be one of string, number, boolean',1);a=$M[h],i++}else a=$r;let c;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);c=e[2],i++}r=Af(a,c)}else{if(!$M[o])throw new Error(`Types doesn't contain name = ${o}`);r=$M[o]}const s=[];for(;i<e.length;i++){const a=t.parse(e[i],i,$r);if(!a)return null;s.push(a)}return new Am(r,s)}evaluate(e){for(let t=0;t<this.args.length;t++){const i=this.args[t].evaluate(e);if(G3(this.type,Xu(i))){if(t===this.args.length-1)throw new Pl(`Expected value to be of type ${xl(this.type)}, but found ${xl(Xu(i))} instead.`)}else return i}throw new Error}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}const wF={"to-boolean":eo,"to-color":Xg,"to-number":ei,"to-string":po};class Uy{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const i=e[0];if(!wF[i])throw new Error(`Can't parse ${i} as it is not part of the known types`);if((i==="to-boolean"||i==="to-string")&&e.length!==2)return t.error("Expected one argument.");const r=wF[i],o=[];for(let s=1;s<e.length;s++){const a=t.parse(e[s],s,$r);if(!a)return null;o.push(a)}return new Uy(r,o)}evaluate(e){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(e);case"color":{let t,i;for(const r of this.args){if(t=r.evaluate(e),i=null,t instanceof js)return t;if(typeof t=="string"){const o=e.parseColor(t);if(o)return o}else if(Array.isArray(t)&&(t.length<3||t.length>4?i=`Invalid rgba value ${JSON.stringify(t)}: expected an array containing either three or four numeric values.`:i=EZ(t[0],t[1],t[2],t[3]),!i))return new js(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new Pl(i||`Could not parse color from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"padding":{let t;for(const i of this.args){t=i.evaluate(e);const r=pm.parse(t);if(r)return r}throw new Pl(`Could not parse padding from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"numberArray":{let t;for(const i of this.args){t=i.evaluate(e);const r=mm.parse(t);if(r)return r}throw new Pl(`Could not parse numberArray from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"colorArray":{let t;for(const i of this.args){t=i.evaluate(e);const r=df.parse(t);if(r)return r}throw new Pl(`Could not parse colorArray from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"variableAnchorOffsetCollection":{let t;for(const i of this.args){t=i.evaluate(e);const r=Jg.parse(t);if(r)return r}throw new Pl(`Could not parse variableAnchorOffsetCollection from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"number":{let t=null;for(const i of this.args){if(t=i.evaluate(e),t===null)return 0;const r=Number(t);if(!isNaN(r))return r}throw new Pl(`Could not convert ${JSON.stringify(t)} to number.`)}case"formatted":return u1.fromString(A3(this.args[0].evaluate(e)));case"resolvedImage":return uv.fromString(A3(this.args[0].evaluate(e)));case"projectionDefinition":return this.args[0].evaluate(e);default:return A3(this.args[0].evaluate(e))}}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}const npe=["Unknown","Point","LineString","Polygon"];class BZ{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?npe[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(e){let t=this._parseColorCache.get(e);return t||(t=js.parse(e),this._parseColorCache.set(e,t)),t}}class TE{constructor(e,t,i=[],r,o=new OD,s=[]){this.registry=e,this.path=i,this.key=i.map(a=>`[${a}]`).join(""),this.scope=o,this.errors=s,this.expectedType=r,this._isConstant=t}parse(e,t,i,r,o={}){return t?this.concat(t,i,r)._parse(e,o):this._parse(e,o)}_parse(e,t){(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number")&&(e=["literal",e]);function i(r,o,s){return s==="assert"?new Am(o,[r]):s==="coerce"?new Uy(o,[r]):r}if(Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const r=e[0];if(typeof r!="string")return this.error(`Expression name must be a string, but found ${typeof r} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const o=this.registry[r];if(o){let s=o.parse(e,this);if(!s)return null;if(this.expectedType){const a=this.expectedType,c=s.type;if((a.kind==="string"||a.kind==="number"||a.kind==="boolean"||a.kind==="object"||a.kind==="array")&&c.kind==="value")s=i(s,a,t.typeAnnotation||"assert");else if(a.kind==="projectionDefinition"&&["string","array"].includes(c.kind)||["color","formatted","resolvedImage"].includes(a.kind)&&["value","string"].includes(c.kind)||["padding","numberArray"].includes(a.kind)&&["value","number","array"].includes(c.kind)||a.kind==="colorArray"&&["value","string","array"].includes(c.kind)||a.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(c.kind))s=i(s,a,t.typeAnnotation||"coerce");else if(this.checkSubtype(a,c))return null}if(!(s instanceof dx)&&s.type.kind!=="resolvedImage"&&this._isConstant(s)){const a=new BZ;try{s=new dx(s.type,s.evaluate(a))}catch(c){return this.error(c.message),null}}return s}return this.error(`Unknown expression "${r}". If you wanted a literal array, use ["literal", [...]].`,0)}else return typeof e>"u"?this.error("'undefined' value invalid. Use null instead."):typeof e=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof e} instead.`)}concat(e,t,i){const r=typeof e=="number"?this.path.concat(e):this.path,o=i?this.scope.concat(i):this.scope;return new TE(this.registry,this._isConstant,r,t||null,o,this.errors)}error(e,...t){const i=`${this.key}${t.map(r=>`[${r}]`).join("")}`;this.errors.push(new Kg(i,e))}checkSubtype(e,t){const i=G3(e,t);return i&&this.error(i),i}}class RE{constructor(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const t of this.bindings)e(t[1]);e(this.result)}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const i=[];for(let o=1;o<e.length-1;o+=2){const s=e[o];if(typeof s!="string")return t.error(`Expected string, but found ${typeof s} instead.`,o);if(/[^a-zA-Z0-9_]/.test(s))return t.error("Variable names must contain only alphanumeric characters or '_'.",o);const a=t.parse(e[o+1],o+1);if(!a)return null;i.push([s,a])}const r=t.parse(e[e.length-1],e.length-1,t.expectedType,i);return r?new RE(i,r):null}outputDefined(){return this.result.outputDefined()}}class DE{constructor(e,t){this.type=t.type,this.name=e,this.boundExpression=t}static parse(e,t){if(e.length!==2||typeof e[1]!="string")return t.error("'var' expression requires exactly one string literal argument.");const i=e[1];return t.scope.has(i)?new DE(i,t.scope.get(i)):t.error(`Unknown variable "${i}". Make sure "${i}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}}class TD{constructor(e,t,i){this.type=e,this.index=t,this.input=i}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,ei),r=t.parse(e[2],2,Af(t.expectedType||$r));if(!i||!r)return null;const o=r.type;return new TD(o.itemType,i,r)}evaluate(e){const t=this.index.evaluate(e),i=this.input.evaluate(e);if(t<0)throw new Pl(`Array index out of bounds: ${t} < 0.`);if(t>=i.length)throw new Pl(`Array index out of bounds: ${t} > ${i.length-1}.`);if(t!==Math.floor(t))throw new Pl(`Array index must be an integer, but found ${t} instead.`);return i[t]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}}class RD{constructor(e,t){this.type=eo,this.needle=e,this.haystack=t}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,$r),r=t.parse(e[2],2,$r);return!i||!r?null:ID(i.type,[eo,po,ei,wE,$r])?new RD(i,r):t.error(`Expected first argument to be of type boolean, string, number or null, but found ${xl(i.type)} instead`)}evaluate(e){const t=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!i)return!1;if(!kb(t,["boolean","string","number","null"]))throw new Pl(`Expected first argument to be of type boolean, string, number or null, but found ${xl(Xu(t))} instead.`);if(!kb(i,["string","array"]))throw new Pl(`Expected second argument to be of type array or string, but found ${xl(Xu(i))} instead.`);return i.indexOf(t)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}}class qw{constructor(e,t,i){this.type=ei,this.needle=e,this.haystack=t,this.fromIndex=i}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,$r),r=t.parse(e[2],2,$r);if(!i||!r)return null;if(!ID(i.type,[eo,po,ei,wE,$r]))return t.error(`Expected first argument to be of type boolean, string, number or null, but found ${xl(i.type)} instead`);if(e.length===4){const o=t.parse(e[3],3,ei);return o?new qw(i,r,o):null}else return new qw(i,r)}evaluate(e){const t=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!kb(t,["boolean","string","number","null"]))throw new Pl(`Expected first argument to be of type boolean, string, number or null, but found ${xl(Xu(t))} instead.`);let r;if(this.fromIndex&&(r=this.fromIndex.evaluate(e)),kb(i,["string"])){const o=i.indexOf(t,r);return o===-1?-1:[...i.slice(0,o)].length}else{if(kb(i,["array"]))return i.indexOf(t,r);throw new Pl(`Expected second argument to be of type array or string, but found ${xl(Xu(i))} instead.`)}}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}}class DD{constructor(e,t,i,r,o,s){this.inputType=e,this.type=t,this.input=i,this.cases=r,this.outputs=o,this.otherwise=s}static parse(e,t){if(e.length<5)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!==1)return t.error("Expected an even number of arguments.");let i,r;t.expectedType&&t.expectedType.kind!=="value"&&(r=t.expectedType);const o={},s=[];for(let h=2;h<e.length-1;h+=2){let m=e[h];const v=e[h+1];Array.isArray(m)||(m=[m]);const x=t.concat(h);if(m.length===0)return x.error("Expected at least one branch label.");for(const D of m){if(typeof D!="number"&&typeof D!="string")return x.error("Branch labels must be numbers or strings.");if(typeof D=="number"&&Math.abs(D)>Number.MAX_SAFE_INTEGER)return x.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof D=="number"&&Math.floor(D)!==D)return x.error("Numeric branch labels must be integer values.");if(!i)i=Xu(D);else if(x.checkSubtype(i,Xu(D)))return null;if(typeof o[String(D)]<"u")return x.error("Branch labels must be unique.");o[String(D)]=s.length}const E=t.parse(v,h,r);if(!E)return null;r=r||E.type,s.push(E)}const a=t.parse(e[1],1,$r);if(!a)return null;const c=t.parse(e[e.length-1],e.length-1,r);return!c||a.type.kind!=="value"&&t.concat(1).checkSubtype(i,a.type)?null:new DD(i,r,a,o,s,c)}evaluate(e){const t=this.input.evaluate(e);return(Xu(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}}class PD{constructor(e,t,i){this.type=e,this.branches=t,this.otherwise=i}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!==0)return t.error("Expected an odd number of arguments.");let i;t.expectedType&&t.expectedType.kind!=="value"&&(i=t.expectedType);const r=[];for(let s=1;s<e.length-1;s+=2){const a=t.parse(e[s],s,eo);if(!a)return null;const c=t.parse(e[s+1],s+1,i);if(!c)return null;r.push([a,c]),i=i||c.type}const o=t.parse(e[e.length-1],e.length-1,i);if(!o)return null;if(!i)throw new Error("Can't infer output type");return new PD(i,r,o)}evaluate(e){for(const[t,i]of this.branches)if(t.evaluate(e))return i.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[t,i]of this.branches)e(t),e(i);e(this.otherwise)}outputDefined(){return this.branches.every(([e,t])=>t.outputDefined())&&this.otherwise.outputDefined()}}class Vw{constructor(e,t,i,r){this.type=e,this.input=t,this.beginIndex=i,this.endIndex=r}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,$r),r=t.parse(e[2],2,ei);if(!i||!r)return null;if(!ID(i.type,[Af($r),po,$r]))return t.error(`Expected first argument to be of type array or string, but found ${xl(i.type)} instead`);if(e.length===4){const o=t.parse(e[3],3,ei);return o?new Vw(i.type,i,r,o):null}else return new Vw(i.type,i,r)}evaluate(e){const t=this.input.evaluate(e),i=this.beginIndex.evaluate(e);let r;if(this.endIndex&&(r=this.endIndex.evaluate(e)),kb(t,["string"]))return[...t].slice(i,r).join("");if(kb(t,["array"]))return t.slice(i,r);throw new Pl(`Expected first argument to be of type array or string, but found ${xl(Xu(t))} instead.`)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}}function OZ(n,e){const t=n.length-1;let i=0,r=t,o=0,s,a;for(;i<=r;)if(o=Math.floor((i+r)/2),s=n[o],a=n[o+1],s<=e){if(o===t||e<a)return o;i=o+1}else if(s>e)r=o-1;else throw new Pl("Input is not a number.");return 0}class PE{constructor(e,t,i){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(const[r,o]of i)this.labels.push(r),this.outputs.push(o)}static parse(e,t){if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");const i=t.parse(e[1],1,ei);if(!i)return null;const r=[];let o=null;t.expectedType&&t.expectedType.kind!=="value"&&(o=t.expectedType);for(let s=1;s<e.length;s+=2){const a=s===1?-1/0:e[s],c=e[s+1],h=s,m=s+1;if(typeof a!="number")return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',h);if(r.length&&r[r.length-1][0]>=a)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',h);const v=t.parse(c,m,o);if(!v)return null;o=o||v.type,r.push([a,v])}return new PE(o,i,r)}evaluate(e){const t=this.labels,i=this.outputs;if(t.length===1)return i[0].evaluate(e);const r=this.input.evaluate(e);if(r<=t[0])return i[0].evaluate(e);const o=t.length;if(r>=t[o-1])return i[o-1].evaluate(e);const s=OZ(t,r);return i[s].evaluate(e)}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}}function ipe(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var NB,SF;function rpe(){if(SF)return NB;SF=1,NB=n;function n(e,t,i,r){this.cx=3*e,this.bx=3*(i-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(r-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=t,this.p2x=i,this.p2y=r}return n.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,t){if(t===void 0&&(t=1e-6),e<0)return 0;if(e>1)return 1;for(var i=e,r=0;r<8;r++){var o=this.sampleCurveX(i)-e;if(Math.abs(o)<t)return i;var s=this.sampleCurveDerivativeX(i);if(Math.abs(s)<1e-6)break;i=i-o/s}var a=0,c=1;for(i=e,r=0;r<20&&(o=this.sampleCurveX(i),!(Math.abs(o-e)<t));r++)e>o?a=i:c=i,i=(c-a)*.5+a;return i},solve:function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))}},NB}var ope=rpe(),spe=ipe(ope);class e0{constructor(e,t,i,r,o){this.type=e,this.operator=t,this.interpolation=i,this.input=r,this.labels=[],this.outputs=[];for(const[s,a]of o)this.labels.push(s),this.outputs.push(a)}static interpolationFactor(e,t,i,r){let o=0;if(e.name==="exponential")o=GB(t,e.base,i,r);else if(e.name==="linear")o=GB(t,1,i,r);else if(e.name==="cubic-bezier"){const s=e.controlPoints;o=new spe(s[0],s[1],s[2],s[3]).solve(GB(t,1,i,r))}return o}static parse(e,t){let[i,r,o,...s]=e;if(!Array.isArray(r)||r.length===0)return t.error("Expected an interpolation type expression.",1);if(r[0]==="linear")r={name:"linear"};else if(r[0]==="exponential"){const h=r[1];if(typeof h!="number")return t.error("Exponential interpolation requires a numeric base.",1,1);r={name:"exponential",base:h}}else if(r[0]==="cubic-bezier"){const h=r.slice(1);if(h.length!==4||h.some(m=>typeof m!="number"||m<0||m>1))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);r={name:"cubic-bezier",controlPoints:h}}else return t.error(`Unknown interpolation type ${String(r[0])}`,1,0);if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");if(o=t.parse(o,2,ei),!o)return null;const a=[];let c=null;(i==="interpolate-hcl"||i==="interpolate-lab")&&t.expectedType!=N3?c=Xg:t.expectedType&&t.expectedType.kind!=="value"&&(c=t.expectedType);for(let h=0;h<s.length;h+=2){const m=s[h],v=s[h+1],x=h+3,E=h+4;if(typeof m!="number")return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',x);if(a.length&&a[a.length-1][0]>=m)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',x);const D=t.parse(v,E,c);if(!D)return null;c=c||D.type,a.push([m,D])}return!yy(c,ei)&&!yy(c,SE)&&!yy(c,Xg)&&!yy(c,OE)&&!yy(c,IE)&&!yy(c,N3)&&!yy(c,kE)&&!yy(c,Af(ei))?t.error(`Type ${xl(c)} is not interpolatable.`):new e0(c,i,r,o,a)}evaluate(e){const t=this.labels,i=this.outputs;if(t.length===1)return i[0].evaluate(e);const r=this.input.evaluate(e);if(r<=t[0])return i[0].evaluate(e);const o=t.length;if(r>=t[o-1])return i[o-1].evaluate(e);const s=OZ(t,r),a=t[s],c=t[s+1],h=e0.interpolationFactor(this.interpolation,r,a,c),m=i[s].evaluate(e),v=i[s+1].evaluate(e);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return Tb(m,v,h);case"color":return js.interpolate(m,v,h);case"padding":return pm.interpolate(m,v,h);case"colorArray":return df.interpolate(m,v,h);case"numberArray":return mm.interpolate(m,v,h);case"variableAnchorOffsetCollection":return Jg.interpolate(m,v,h);case"array":return W3(m,v,h);case"projectionDefinition":return cm.interpolate(m,v,h)}case"interpolate-hcl":switch(this.type.kind){case"color":return js.interpolate(m,v,h,"hcl");case"colorArray":return df.interpolate(m,v,h,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return js.interpolate(m,v,h,"lab");case"colorArray":return df.interpolate(m,v,h,"lab")}}}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}}function GB(n,e,t,i){const r=i-t,o=n-t;return r===0?0:e===1?o/r:(Math.pow(e,o)-1)/(Math.pow(e,r)-1)}class Y3{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let i=null;const r=t.expectedType;r&&r.kind!=="value"&&(i=r);const o=[];for(const a of e.slice(1)){const c=t.parse(a,1+o.length,i,void 0,{typeAnnotation:"omit"});if(!c)return null;i=i||c.type,o.push(c)}if(!i)throw new Error("No output type");return r&&o.some(a=>G3(r,a.type))?new Y3($r,o):new Y3(i,o)}evaluate(e){let t=null,i=0,r;for(const o of this.args)if(i++,t=o.evaluate(e),t&&t instanceof uv&&!t.available&&(r||(r=t.name),t=null,i===this.args.length&&(t=r)),t!==null)break;return t}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}function EF(n,e){return n==="=="||n==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function ape(n,e,t){return e===t}function lpe(n,e,t){return e!==t}function upe(n,e,t){return e<t}function cpe(n,e,t){return e>t}function Ape(n,e,t){return e<=t}function hpe(n,e,t){return e>=t}function IZ(n,e,t,i){return i.compare(e,t)===0}function dpe(n,e,t,i){return!IZ(n,e,t,i)}function fpe(n,e,t,i){return i.compare(e,t)<0}function ppe(n,e,t,i){return i.compare(e,t)>0}function mpe(n,e,t,i){return i.compare(e,t)<=0}function gpe(n,e,t,i){return i.compare(e,t)>=0}function Kx(n,e,t){const i=n!=="=="&&n!=="!=";return class kZ{constructor(o,s,a){this.type=eo,this.lhs=o,this.rhs=s,this.collator=a,this.hasUntypedArgument=o.type.kind==="value"||s.type.kind==="value"}static parse(o,s){if(o.length!==3&&o.length!==4)return s.error("Expected two or three arguments.");const a=o[0];let c=s.parse(o[1],1,$r);if(!c)return null;if(!EF(a,c.type))return s.concat(1).error(`"${a}" comparisons are not supported for type '${xl(c.type)}'.`);let h=s.parse(o[2],2,$r);if(!h)return null;if(!EF(a,h.type))return s.concat(2).error(`"${a}" comparisons are not supported for type '${xl(h.type)}'.`);if(c.type.kind!==h.type.kind&&c.type.kind!=="value"&&h.type.kind!=="value")return s.error(`Cannot compare types '${xl(c.type)}' and '${xl(h.type)}'.`);i&&(c.type.kind==="value"&&h.type.kind!=="value"?c=new Am(h.type,[c]):c.type.kind!=="value"&&h.type.kind==="value"&&(h=new Am(c.type,[h])));let m=null;if(o.length===4){if(c.type.kind!=="string"&&h.type.kind!=="string"&&c.type.kind!=="value"&&h.type.kind!=="value")return s.error("Cannot use collator to compare non-string types.");if(m=s.parse(o[3],3,EE),!m)return null}return new kZ(c,h,m)}evaluate(o){const s=this.lhs.evaluate(o),a=this.rhs.evaluate(o);if(i&&this.hasUntypedArgument){const c=Xu(s),h=Xu(a);if(c.kind!==h.kind||!(c.kind==="string"||c.kind==="number"))throw new Pl(`Expected arguments for "${n}" to be (string, string) or (number, number), but found (${c.kind}, ${h.kind}) instead.`)}if(this.collator&&!i&&this.hasUntypedArgument){const c=Xu(s),h=Xu(a);if(c.kind!=="string"||h.kind!=="string")return e(o,s,a)}return this.collator?t(o,s,a,this.collator.evaluate(o)):e(o,s,a)}eachChild(o){o(this.lhs),o(this.rhs),this.collator&&o(this.collator)}outputDefined(){return!0}}}const ype=Kx("==",ape,IZ),vpe=Kx("!=",lpe,dpe),bpe=Kx("<",upe,fpe),Cpe=Kx(">",cpe,ppe),_pe=Kx("<=",Ape,mpe),xpe=Kx(">=",hpe,gpe);class UE{constructor(e,t,i){this.type=EE,this.locale=i,this.caseSensitive=e,this.diacriticSensitive=t}static parse(e,t){if(e.length!==2)return t.error("Expected one argument.");const i=e[1];if(typeof i!="object"||Array.isArray(i))return t.error("Collator options argument must be an object.");const r=t.parse(i["case-sensitive"]===void 0?!1:i["case-sensitive"],1,eo);if(!r)return null;const o=t.parse(i["diacritic-sensitive"]===void 0?!1:i["diacritic-sensitive"],1,eo);if(!o)return null;let s=null;return i.locale&&(s=t.parse(i.locale,1,po),!s)?null:new UE(r,o,s)}evaluate(e){return new kD(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}}class UD{constructor(e,t,i,r,o){this.type=po,this.number=e,this.locale=t,this.currency=i,this.minFractionDigits=r,this.maxFractionDigits=o}static parse(e,t){if(e.length!==3)return t.error("Expected two arguments.");const i=t.parse(e[1],1,ei);if(!i)return null;const r=e[2];if(typeof r!="object"||Array.isArray(r))return t.error("NumberFormat options argument must be an object.");let o=null;if(r.locale&&(o=t.parse(r.locale,1,po),!o))return null;let s=null;if(r.currency&&(s=t.parse(r.currency,1,po),!s))return null;let a=null;if(r["min-fraction-digits"]&&(a=t.parse(r["min-fraction-digits"],1,ei),!a))return null;let c=null;return r["max-fraction-digits"]&&(c=t.parse(r["max-fraction-digits"],1,ei),!c)?null:new UD(i,o,s,a,c)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}}class KD{constructor(e){this.type=BE,this.sections=e}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const i=e[1];if(!Array.isArray(i)&&typeof i=="object")return t.error("First argument must be an image or text section.");const r=[];let o=!1;for(let s=1;s<=e.length-1;++s){const a=e[s];if(o&&typeof a=="object"&&!Array.isArray(a)){o=!1;let c=null;if(a["font-scale"]&&(c=t.parse(a["font-scale"],1,ei),!c))return null;let h=null;if(a["text-font"]&&(h=t.parse(a["text-font"],1,Af(po)),!h))return null;let m=null;if(a["text-color"]&&(m=t.parse(a["text-color"],1,Xg),!m))return null;let v=null;if(a["vertical-align"]){if(typeof a["vertical-align"]=="string"&&!epe.includes(a["vertical-align"]))return t.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${a["vertical-align"]}' instead.`);if(v=t.parse(a["vertical-align"],1,po),!v)return null}const x=r[r.length-1];x.scale=c,x.font=h,x.textColor=m,x.verticalAlign=v}else{const c=t.parse(e[s],1,$r);if(!c)return null;const h=c.type.kind;if(h!=="string"&&h!=="value"&&h!=="null"&&h!=="resolvedImage")return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");o=!0,r.push({content:c,scale:null,font:null,textColor:null,verticalAlign:null})}}return new KD(r)}evaluate(e){const t=i=>{const r=i.content.evaluate(e);return Xu(r)===J4?new GT("",r,null,null,null,i.verticalAlign?i.verticalAlign.evaluate(e):null):new GT(A3(r),null,i.scale?i.scale.evaluate(e):null,i.font?i.font.evaluate(e).join(","):null,i.textColor?i.textColor.evaluate(e):null,i.verticalAlign?i.verticalAlign.evaluate(e):null)};return new u1(this.sections.map(t))}eachChild(e){for(const t of this.sections)e(t.content),t.scale&&e(t.scale),t.font&&e(t.font),t.textColor&&e(t.textColor),t.verticalAlign&&e(t.verticalAlign)}outputDefined(){return!1}}class LD{constructor(e){this.type=J4,this.input=e}static parse(e,t){if(e.length!==2)return t.error("Expected two arguments.");const i=t.parse(e[1],1,po);return i?new LD(i):t.error("No image name provided.")}evaluate(e){const t=this.input.evaluate(e),i=uv.fromString(t);return i&&e.availableImages&&(i.available=e.availableImages.indexOf(t)>-1),i}eachChild(e){e(this.input)}outputDefined(){return!1}}class FD{constructor(e){this.type=ei,this.input=e}static parse(e,t){if(e.length!==2)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const i=t.parse(e[1],1);return i?i.type.kind!=="array"&&i.type.kind!=="string"&&i.type.kind!=="value"?t.error(`Expected argument of type string or array, but found ${xl(i.type)} instead.`):new FD(i):null}evaluate(e){const t=this.input.evaluate(e);if(typeof t=="string")return[...t].length;if(Array.isArray(t))return t.length;throw new Pl(`Expected value to be of type string or array, but found ${xl(Xu(t))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}}const t0=8192;function Mpe(n,e){const t=wpe(n[0]),i=Epe(n[1]),r=Math.pow(2,e.z);return[Math.round(t*r*t0),Math.round(i*r*t0)]}function zD(n,e){const t=Math.pow(2,e.z),i=(n[0]/t0+e.x)/t,r=(n[1]/t0+e.y)/t;return[Spe(i),Bpe(r)]}function wpe(n){return(180+n)/360}function Spe(n){return n*360-180}function Epe(n){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n*Math.PI/360)))/360}function Bpe(n){return 360/Math.PI*Math.atan(Math.exp((180-n*360)*Math.PI/180))-90}function eM(n,e){n[0]=Math.min(n[0],e[0]),n[1]=Math.min(n[1],e[1]),n[2]=Math.max(n[2],e[0]),n[3]=Math.max(n[3],e[1])}function q3(n,e){return!(n[0]<=e[0]||n[2]>=e[2]||n[1]<=e[1]||n[3]>=e[3])}function Ope(n,e,t){return e[1]>n[1]!=t[1]>n[1]&&n[0]<(t[0]-e[0])*(n[1]-e[1])/(t[1]-e[1])+e[0]}function Ipe(n,e,t){const i=n[0]-e[0],r=n[1]-e[1],o=n[0]-t[0],s=n[1]-t[1];return i*s-o*r===0&&i*o<=0&&r*s<=0}function KE(n,e,t,i){const r=[e[0]-n[0],e[1]-n[1]],o=[i[0]-t[0],i[1]-t[1]];return Dpe(o,r)===0?!1:!!(BF(n,e,t,i)&&BF(t,i,n,e))}function kpe(n,e,t){for(const i of t)for(let r=0;r<i.length-1;++r)if(KE(n,e,i[r],i[r+1]))return!0;return!1}function Lx(n,e,t=!1){let i=!1;for(const r of e)for(let o=0;o<r.length-1;o++){if(Ipe(n,r[o],r[o+1]))return t;Ope(n,r[o],r[o+1])&&(i=!i)}return i}function Tpe(n,e){for(const t of e)if(Lx(n,t))return!0;return!1}function TZ(n,e){for(const t of n)if(!Lx(t,e))return!1;for(let t=0;t<n.length-1;++t)if(kpe(n[t],n[t+1],e))return!1;return!0}function Rpe(n,e){for(const t of e)if(TZ(n,t))return!0;return!1}function Dpe(n,e){return n[0]*e[1]-n[1]*e[0]}function BF(n,e,t,i){const r=n[0]-t[0],o=n[1]-t[1],s=e[0]-t[0],a=e[1]-t[1],c=i[0]-t[0],h=i[1]-t[1],m=r*h-c*o,v=s*h-c*a;return m>0&&v<0||m<0&&v>0}function jD(n,e,t){const i=[];for(let r=0;r<n.length;r++){const o=[];for(let s=0;s<n[r].length;s++){const a=Mpe(n[r][s],t);eM(e,a),o.push(a)}i.push(o)}return i}function RZ(n,e,t){const i=[];for(let r=0;r<n.length;r++){const o=jD(n[r],e,t);i.push(o)}return i}function DZ(n,e,t,i){if(n[0]<t[0]||n[0]>t[2]){const r=i*.5;let o=n[0]-t[0]>r?-i:t[0]-n[0]>r?i:0;o===0&&(o=n[0]-t[2]>r?-i:t[2]-n[0]>r?i:0),n[0]+=o}eM(e,n)}function Ppe(n){n[0]=n[1]=1/0,n[2]=n[3]=-1/0}function OF(n,e,t,i){const r=Math.pow(2,i.z)*t0,o=[i.x*t0,i.y*t0],s=[];for(const a of n)for(const c of a){const h=[c.x+o[0],c.y+o[1]];DZ(h,e,t,r),s.push(h)}return s}function IF(n,e,t,i){const r=Math.pow(2,i.z)*t0,o=[i.x*t0,i.y*t0],s=[];for(const a of n){const c=[];for(const h of a){const m=[h.x+o[0],h.y+o[1]];eM(e,m),c.push(m)}s.push(c)}if(e[2]-e[0]<=r/2){Ppe(e);for(const a of s)for(const c of a)DZ(c,e,t,r)}return s}function Upe(n,e){const t=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],r=n.canonicalID();if(e.type==="Polygon"){const o=jD(e.coordinates,i,r),s=OF(n.geometry(),t,i,r);if(!q3(t,i))return!1;for(const a of s)if(!Lx(a,o))return!1}if(e.type==="MultiPolygon"){const o=RZ(e.coordinates,i,r),s=OF(n.geometry(),t,i,r);if(!q3(t,i))return!1;for(const a of s)if(!Tpe(a,o))return!1}return!0}function Kpe(n,e){const t=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],r=n.canonicalID();if(e.type==="Polygon"){const o=jD(e.coordinates,i,r),s=IF(n.geometry(),t,i,r);if(!q3(t,i))return!1;for(const a of s)if(!TZ(a,o))return!1}if(e.type==="MultiPolygon"){const o=RZ(e.coordinates,i,r),s=IF(n.geometry(),t,i,r);if(!q3(t,i))return!1;for(const a of s)if(!Rpe(a,o))return!1}return!0}class Rb{constructor(e,t){this.type=eo,this.geojson=e,this.geometries=t}static parse(e,t){if(e.length!==2)return t.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(Q3(e[1])){const i=e[1];if(i.type==="FeatureCollection"){const r=[];for(const o of i.features){const{type:s,coordinates:a}=o.geometry;s==="Polygon"&&r.push(a),s==="MultiPolygon"&&r.push(...a)}if(r.length){const o={type:"MultiPolygon",coordinates:r};return new Rb(i,o)}}else if(i.type==="Feature"){const r=i.geometry.type;if(r==="Polygon"||r==="MultiPolygon")return new Rb(i,i.geometry)}else if(i.type==="Polygon"||i.type==="MultiPolygon")return new Rb(i,i)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return Upe(e,this.geometries);if(e.geometryType()==="LineString")return Kpe(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class PZ{constructor(e=[],t=(i,r)=>i<r?-1:i>r?1:0){if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let i=(this.length>>1)-1;i>=0;i--)this._down(i)}push(e){this.data.push(e),this._up(this.length++)}pop(){if(this.length===0)return;const e=this.data[0],t=this.data.pop();return--this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:i}=this,r=t[e];for(;e>0;){const o=e-1>>1,s=t[o];if(i(r,s)>=0)break;t[e]=s,e=o}t[e]=r}_down(e){const{data:t,compare:i}=this,r=this.length>>1,o=t[e];for(;e<r;){let s=(e<<1)+1;const a=s+1;if(a<this.length&&i(t[a],t[s])<0&&(s=a),i(t[s],o)>=0)break;t[e]=t[s],e=s}t[e]=o}}function Lpe(n,e){if(n.length<=1)return[n];const i=[];let r,o;for(const s of n){const a=Fpe(s);a!==0&&(s.area=Math.abs(a),o===void 0&&(o=a<0),o===a<0?(r&&i.push(r),r=[s]):r.push(s))}return r&&i.push(r),i}function Fpe(n){let e=0;for(let t=0,i=n.length,r=i-1,o,s;t<i;r=t++)o=n[t],s=n[r],e+=(s.x-o.x)*(o.y+s.y);return e}const zpe=6378.137,kF=1/298.257223563,TF=kF*(2-kF),RF=Math.PI/180;class ND{constructor(e){const t=RF*zpe*1e3,i=Math.cos(e*RF),r=1/(1-TF*(1-i*i)),o=Math.sqrt(r);this.kx=t*o*i,this.ky=t*o*r*(1-TF)}distance(e,t){const i=this.wrap(e[0]-t[0])*this.kx,r=(e[1]-t[1])*this.ky;return Math.sqrt(i*i+r*r)}pointOnLine(e,t){let i=1/0,r,o,s,a;for(let c=0;c<e.length-1;c++){let h=e[c][0],m=e[c][1],v=this.wrap(e[c+1][0]-h)*this.kx,x=(e[c+1][1]-m)*this.ky,E=0;(v!==0||x!==0)&&(E=(this.wrap(t[0]-h)*this.kx*v+(t[1]-m)*this.ky*x)/(v*v+x*x),E>1?(h=e[c+1][0],m=e[c+1][1]):E>0&&(h+=v/this.kx*E,m+=x/this.ky*E)),v=this.wrap(t[0]-h)*this.kx,x=(t[1]-m)*this.ky;const D=v*v+x*x;D<i&&(i=D,r=h,o=m,s=c,a=E)}return{point:[r,o],index:s,t:Math.max(0,Math.min(1,a))}}wrap(e){for(;e<-180;)e+=360;for(;e>180;)e-=360;return e}}const WT=100,QT=50;function UZ(n,e){return e[0]-n[0]}function $w(n){return n[1]-n[0]+1}function f1(n,e){return n[1]>=n[0]&&n[1]<e}function YT(n,e){if(n[0]>n[1])return[null,null];const t=$w(n);if(e){if(t===2)return[n,null];const r=Math.floor(t/2);return[[n[0],n[0]+r],[n[0]+r,n[1]]]}if(t===1)return[n,null];const i=Math.floor(t/2)-1;return[[n[0],n[0]+i],[n[0]+i+1,n[1]]]}function qT(n,e){if(!f1(e,n.length))return[1/0,1/0,-1/0,-1/0];const t=[1/0,1/0,-1/0,-1/0];for(let i=e[0];i<=e[1];++i)eM(t,n[i]);return t}function VT(n){const e=[1/0,1/0,-1/0,-1/0];for(const t of n)for(const i of t)eM(e,i);return e}function DF(n){return n[0]!==-1/0&&n[1]!==-1/0&&n[2]!==1/0&&n[3]!==1/0}function GD(n,e,t){if(!DF(n)||!DF(e))return NaN;let i=0,r=0;return n[2]<e[0]&&(i=e[0]-n[2]),n[0]>e[2]&&(i=n[0]-e[2]),n[1]>e[3]&&(r=n[1]-e[3]),n[3]<e[1]&&(r=e[1]-n[3]),t.distance([0,0],[i,r])}function vb(n,e,t){const i=t.pointOnLine(e,n);return t.distance(n,i.point)}function WD(n,e,t,i,r){const o=Math.min(vb(n,[t,i],r),vb(e,[t,i],r)),s=Math.min(vb(t,[n,e],r),vb(i,[n,e],r));return Math.min(o,s)}function jpe(n,e,t,i,r){if(!(f1(e,n.length)&&f1(i,t.length)))return 1/0;let s=1/0;for(let a=e[0];a<e[1];++a){const c=n[a],h=n[a+1];for(let m=i[0];m<i[1];++m){const v=t[m],x=t[m+1];if(KE(c,h,v,x))return 0;s=Math.min(s,WD(c,h,v,x,r))}}return s}function Npe(n,e,t,i,r){if(!(f1(e,n.length)&&f1(i,t.length)))return NaN;let s=1/0;for(let a=e[0];a<=e[1];++a)for(let c=i[0];c<=i[1];++c)if(s=Math.min(s,r.distance(n[a],t[c])),s===0)return s;return s}function Gpe(n,e,t){if(Lx(n,e,!0))return 0;let i=1/0;for(const r of e){const o=r[0],s=r[r.length-1];if(o!==s&&(i=Math.min(i,vb(n,[s,o],t)),i===0))return i;const a=t.pointOnLine(r,n);if(i=Math.min(i,t.distance(n,a.point)),i===0)return i}return i}function Wpe(n,e,t,i){if(!f1(e,n.length))return NaN;for(let o=e[0];o<=e[1];++o)if(Lx(n[o],t,!0))return 0;let r=1/0;for(let o=e[0];o<e[1];++o){const s=n[o],a=n[o+1];for(const c of t)for(let h=0,m=c.length,v=m-1;h<m;v=h++){const x=c[v],E=c[h];if(KE(s,a,x,E))return 0;r=Math.min(r,WD(s,a,x,E,i))}}return r}function PF(n,e){for(const t of n)for(const i of t)if(Lx(i,e,!0))return!0;return!1}function Qpe(n,e,t,i=1/0){const r=VT(n),o=VT(e);if(i!==1/0&&GD(r,o,t)>=i)return i;if(q3(r,o)){if(PF(n,e))return 0}else if(PF(e,n))return 0;let s=1/0;for(const a of n)for(let c=0,h=a.length,m=h-1;c<h;m=c++){const v=a[m],x=a[c];for(const E of e)for(let D=0,P=E.length,F=P-1;D<P;F=D++){const W=E[F],q=E[D];if(KE(v,x,W,q))return 0;s=Math.min(s,WD(v,x,W,q,t))}}return s}function UF(n,e,t,i,r,o){if(!o)return;const s=GD(qT(i,o),r,t);s<e&&n.push([s,o,[0,0]])}function HM(n,e,t,i,r,o,s){if(!o||!s)return;const a=GD(qT(i,o),qT(r,s),t);a<e&&n.push([a,o,s])}function Hw(n,e,t,i,r=1/0){let o=Math.min(i.distance(n[0],t[0][0]),r);if(o===0)return o;const s=new PZ([[0,[0,n.length-1],[0,0]]],UZ),a=VT(t);for(;s.length>0;){const c=s.pop();if(c[0]>=o)continue;const h=c[1],m=e?QT:WT;if($w(h)<=m){if(!f1(h,n.length))return NaN;if(e){const v=Wpe(n,h,t,i);if(isNaN(v)||v===0)return v;o=Math.min(o,v)}else for(let v=h[0];v<=h[1];++v){const x=Gpe(n[v],t,i);if(o=Math.min(o,x),o===0)return 0}}else{const v=YT(h,e);UF(s,o,i,n,a,v[0]),UF(s,o,i,n,a,v[1])}}return o}function Zw(n,e,t,i,r,o=1/0){let s=Math.min(o,r.distance(n[0],t[0]));if(s===0)return s;const a=new PZ([[0,[0,n.length-1],[0,t.length-1]]],UZ);for(;a.length>0;){const c=a.pop();if(c[0]>=s)continue;const h=c[1],m=c[2],v=e?QT:WT,x=i?QT:WT;if($w(h)<=v&&$w(m)<=x){if(!f1(h,n.length)&&f1(m,t.length))return NaN;let E;if(e&&i)E=jpe(n,h,t,m,r),s=Math.min(s,E);else if(e&&!i){const D=n.slice(h[0],h[1]+1);for(let P=m[0];P<=m[1];++P)if(E=vb(t[P],D,r),s=Math.min(s,E),s===0)return s}else if(!e&&i){const D=t.slice(m[0],m[1]+1);for(let P=h[0];P<=h[1];++P)if(E=vb(n[P],D,r),s=Math.min(s,E),s===0)return s}else E=Npe(n,h,t,m,r),s=Math.min(s,E)}else{const E=YT(h,e),D=YT(m,i);HM(a,s,r,n,t,E[0],D[0]),HM(a,s,r,n,t,E[0],D[1]),HM(a,s,r,n,t,E[1],D[0]),HM(a,s,r,n,t,E[1],D[1])}}return s}function Ype(n,e){const t=n.geometry(),i=t.flat().map(s=>zD([s.x,s.y],n.canonical));if(t.length===0)return NaN;const r=new ND(i[0][1]);let o=1/0;for(const s of e){switch(s.type){case"Point":o=Math.min(o,Zw(i,!1,[s.coordinates],!1,r,o));break;case"LineString":o=Math.min(o,Zw(i,!1,s.coordinates,!0,r,o));break;case"Polygon":o=Math.min(o,Hw(i,!1,s.coordinates,r,o));break}if(o===0)return o}return o}function qpe(n,e){const t=n.geometry(),i=t.flat().map(s=>zD([s.x,s.y],n.canonical));if(t.length===0)return NaN;const r=new ND(i[0][1]);let o=1/0;for(const s of e){switch(s.type){case"Point":o=Math.min(o,Zw(i,!0,[s.coordinates],!1,r,o));break;case"LineString":o=Math.min(o,Zw(i,!0,s.coordinates,!0,r,o));break;case"Polygon":o=Math.min(o,Hw(i,!0,s.coordinates,r,o));break}if(o===0)return o}return o}function Vpe(n,e){const t=n.geometry();if(t.length===0||t[0].length===0)return NaN;const i=Lpe(t).map(s=>s.map(a=>a.map(c=>zD([c.x,c.y],n.canonical)))),r=new ND(i[0][0][0][1]);let o=1/0;for(const s of e)for(const a of i){switch(s.type){case"Point":o=Math.min(o,Hw([s.coordinates],!1,a,r,o));break;case"LineString":o=Math.min(o,Hw(s.coordinates,!0,a,r,o));break;case"Polygon":o=Math.min(o,Qpe(a,s.coordinates,r,o));break}if(o===0)return o}return o}function WB(n){return n.type==="MultiPolygon"?n.coordinates.map(e=>({type:"Polygon",coordinates:e})):n.type==="MultiLineString"?n.coordinates.map(e=>({type:"LineString",coordinates:e})):n.type==="MultiPoint"?n.coordinates.map(e=>({type:"Point",coordinates:e})):[n]}class Db{constructor(e,t){this.type=ei,this.geojson=e,this.geometries=t}static parse(e,t){if(e.length!==2)return t.error(`'distance' expression requires exactly one argument, but found ${e.length-1} instead.`);if(Q3(e[1])){const i=e[1];if(i.type==="FeatureCollection")return new Db(i,i.features.map(r=>WB(r.geometry)).flat());if(i.type==="Feature")return new Db(i,WB(i.geometry));if("type"in i&&"coordinates"in i)return new Db(i,WB(i))}return t.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return Ype(e,this.geometries);if(e.geometryType()==="LineString")return qpe(e,this.geometries);if(e.geometryType()==="Polygon")return Vpe(e,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class tM{constructor(e){this.type=$r,this.key=e}static parse(e,t){if(e.length!==2)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const i=e[1];return i==null?t.error("Global state property must be defined."):typeof i!="string"?t.error(`Global state property must be string, but found ${typeof e[1]} instead.`):new tM(i)}evaluate(e){var t;const i=(t=e.globals)===null||t===void 0?void 0:t.globalState;return!i||Object.keys(i).length===0?null:SZ(i,this.key)}eachChild(){}outputDefined(){return!1}}const LE={"==":ype,"!=":vpe,">":Cpe,"<":bpe,">=":xpe,"<=":_pe,array:Am,at:TD,boolean:Am,case:PD,coalesce:Y3,collator:UE,format:KD,image:LD,in:RD,"index-of":qw,interpolate:e0,"interpolate-hcl":e0,"interpolate-lab":e0,length:FD,let:RE,literal:dx,match:DD,number:Am,"number-format":UD,object:Am,slice:Vw,step:PE,string:Am,"to-boolean":Uy,"to-color":Uy,"to-number":Uy,"to-string":Uy,var:DE,within:Rb,distance:Db,"global-state":tM};class ff{constructor(e,t,i,r){this.name=e,this.type=t,this._evaluate=i,this.args=r}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}static parse(e,t){const i=e[0],r=ff.definitions[i];if(!r)return t.error(`Unknown expression "${i}". If you wanted a literal array, use ["literal", [...]].`,0);const o=Array.isArray(r)?r[0]:r.type,s=Array.isArray(r)?[[r[1],r[2]]]:r.overloads,a=s.filter(([h])=>!Array.isArray(h)||h.length===e.length-1);let c=null;for(const[h,m]of a){c=new TE(t.registry,Xw,t.path,null,t.scope);const v=[];let x=!1;for(let E=1;E<e.length;E++){const D=e[E],P=Array.isArray(h)?h[E-1]:h.type,F=c.parse(D,1+v.length,P);if(!F){x=!0;break}v.push(F)}if(!x){if(Array.isArray(h)&&h.length!==v.length){c.error(`Expected ${h.length} arguments, but found ${v.length} instead.`);continue}for(let E=0;E<v.length;E++){const D=Array.isArray(h)?h[E]:h.type,P=v[E];c.concat(E+1).checkSubtype(D,P.type)}if(c.errors.length===0)return new ff(i,o,m,v)}}if(a.length===1)t.errors.push(...c.errors);else{const m=(a.length?a:s).map(([x])=>Hpe(x)).join(" | "),v=[];for(let x=1;x<e.length;x++){const E=t.parse(e[x],1+v.length);if(!E)return null;v.push(xl(E.type))}t.error(`Expected arguments of type ${m}, but found (${v.join(", ")}) instead.`)}return null}static register(e,t){ff.definitions=t;for(const i in t)e[i]=ff}}function KF(n,[e,t,i,r]){e=e.evaluate(n),t=t.evaluate(n),i=i.evaluate(n);const o=r?r.evaluate(n):1,s=EZ(e,t,i,o);if(s)throw new Pl(s);return new js(e/255,t/255,i/255,o,!1)}function LF(n,e){return n in e}function QB(n,e){const t=e[n];return typeof t>"u"?null:t}function $pe(n,e,t,i){for(;t<=i;){const r=t+i>>1;if(e[r]===n)return!0;e[r]>n?i=r-1:t=r+1}return!1}function ib(n){return{type:n}}ff.register(LE,{error:[Gfe,[po],(n,[e])=>{throw new Pl(e.evaluate(n))}],typeof:[po,[$r],(n,[e])=>xl(Xu(e.evaluate(n)))],"to-rgba":[Af(ei,4),[Xg],(n,[e])=>{const[t,i,r,o]=e.evaluate(n).rgb;return[t*255,i*255,r*255,o]}],rgb:[Xg,[ei,ei,ei],KF],rgba:[Xg,[ei,ei,ei,ei],KF],has:{type:eo,overloads:[[[po],(n,[e])=>LF(e.evaluate(n),n.properties())],[[po,Ib],(n,[e,t])=>LF(e.evaluate(n),t.evaluate(n))]]},get:{type:$r,overloads:[[[po],(n,[e])=>QB(e.evaluate(n),n.properties())],[[po,Ib],(n,[e,t])=>QB(e.evaluate(n),t.evaluate(n))]]},"feature-state":[$r,[po],(n,[e])=>QB(e.evaluate(n),n.featureState||{})],properties:[Ib,[],n=>n.properties()],"geometry-type":[po,[],n=>n.geometryType()],id:[$r,[],n=>n.id()],zoom:[ei,[],n=>n.globals.zoom],"heatmap-density":[ei,[],n=>n.globals.heatmapDensity||0],elevation:[ei,[],n=>n.globals.elevation||0],"line-progress":[ei,[],n=>n.globals.lineProgress||0],accumulated:[$r,[],n=>n.globals.accumulated===void 0?null:n.globals.accumulated],"+":[ei,ib(ei),(n,e)=>{let t=0;for(const i of e)t+=i.evaluate(n);return t}],"*":[ei,ib(ei),(n,e)=>{let t=1;for(const i of e)t*=i.evaluate(n);return t}],"-":{type:ei,overloads:[[[ei,ei],(n,[e,t])=>e.evaluate(n)-t.evaluate(n)],[[ei],(n,[e])=>-e.evaluate(n)]]},"/":[ei,[ei,ei],(n,[e,t])=>e.evaluate(n)/t.evaluate(n)],"%":[ei,[ei,ei],(n,[e,t])=>e.evaluate(n)%t.evaluate(n)],ln2:[ei,[],()=>Math.LN2],pi:[ei,[],()=>Math.PI],e:[ei,[],()=>Math.E],"^":[ei,[ei,ei],(n,[e,t])=>Math.pow(e.evaluate(n),t.evaluate(n))],sqrt:[ei,[ei],(n,[e])=>Math.sqrt(e.evaluate(n))],log10:[ei,[ei],(n,[e])=>Math.log(e.evaluate(n))/Math.LN10],ln:[ei,[ei],(n,[e])=>Math.log(e.evaluate(n))],log2:[ei,[ei],(n,[e])=>Math.log(e.evaluate(n))/Math.LN2],sin:[ei,[ei],(n,[e])=>Math.sin(e.evaluate(n))],cos:[ei,[ei],(n,[e])=>Math.cos(e.evaluate(n))],tan:[ei,[ei],(n,[e])=>Math.tan(e.evaluate(n))],asin:[ei,[ei],(n,[e])=>Math.asin(e.evaluate(n))],acos:[ei,[ei],(n,[e])=>Math.acos(e.evaluate(n))],atan:[ei,[ei],(n,[e])=>Math.atan(e.evaluate(n))],min:[ei,ib(ei),(n,e)=>Math.min(...e.map(t=>t.evaluate(n)))],max:[ei,ib(ei),(n,e)=>Math.max(...e.map(t=>t.evaluate(n)))],abs:[ei,[ei],(n,[e])=>Math.abs(e.evaluate(n))],round:[ei,[ei],(n,[e])=>{const t=e.evaluate(n);return t<0?-Math.round(-t):Math.round(t)}],floor:[ei,[ei],(n,[e])=>Math.floor(e.evaluate(n))],ceil:[ei,[ei],(n,[e])=>Math.ceil(e.evaluate(n))],"filter-==":[eo,[po,$r],(n,[e,t])=>n.properties()[e.value]===t.value],"filter-id-==":[eo,[$r],(n,[e])=>n.id()===e.value],"filter-type-==":[eo,[po],(n,[e])=>n.geometryType()===e.value],"filter-<":[eo,[po,$r],(n,[e,t])=>{const i=n.properties()[e.value],r=t.value;return typeof i==typeof r&&i<r}],"filter-id-<":[eo,[$r],(n,[e])=>{const t=n.id(),i=e.value;return typeof t==typeof i&&t<i}],"filter->":[eo,[po,$r],(n,[e,t])=>{const i=n.properties()[e.value],r=t.value;return typeof i==typeof r&&i>r}],"filter-id->":[eo,[$r],(n,[e])=>{const t=n.id(),i=e.value;return typeof t==typeof i&&t>i}],"filter-<=":[eo,[po,$r],(n,[e,t])=>{const i=n.properties()[e.value],r=t.value;return typeof i==typeof r&&i<=r}],"filter-id-<=":[eo,[$r],(n,[e])=>{const t=n.id(),i=e.value;return typeof t==typeof i&&t<=i}],"filter->=":[eo,[po,$r],(n,[e,t])=>{const i=n.properties()[e.value],r=t.value;return typeof i==typeof r&&i>=r}],"filter-id->=":[eo,[$r],(n,[e])=>{const t=n.id(),i=e.value;return typeof t==typeof i&&t>=i}],"filter-has":[eo,[$r],(n,[e])=>e.value in n.properties()],"filter-has-id":[eo,[],n=>n.id()!==null&&n.id()!==void 0],"filter-type-in":[eo,[Af(po)],(n,[e])=>e.value.indexOf(n.geometryType())>=0],"filter-id-in":[eo,[Af($r)],(n,[e])=>e.value.indexOf(n.id())>=0],"filter-in-small":[eo,[po,Af($r)],(n,[e,t])=>t.value.indexOf(n.properties()[e.value])>=0],"filter-in-large":[eo,[po,Af($r)],(n,[e,t])=>$pe(n.properties()[e.value],t.value,0,t.value.length-1)],all:{type:eo,overloads:[[[eo,eo],(n,[e,t])=>e.evaluate(n)&&t.evaluate(n)],[ib(eo),(n,e)=>{for(const t of e)if(!t.evaluate(n))return!1;return!0}]]},any:{type:eo,overloads:[[[eo,eo],(n,[e,t])=>e.evaluate(n)||t.evaluate(n)],[ib(eo),(n,e)=>{for(const t of e)if(t.evaluate(n))return!0;return!1}]]},"!":[eo,[eo],(n,[e])=>!e.evaluate(n)],"is-supported-script":[eo,[po],(n,[e])=>{const t=n.globals&&n.globals.isSupportedScript;return t?t(e.evaluate(n)):!0}],upcase:[po,[po],(n,[e])=>e.evaluate(n).toUpperCase()],downcase:[po,[po],(n,[e])=>e.evaluate(n).toLowerCase()],concat:[po,ib($r),(n,e)=>e.map(t=>A3(t.evaluate(n))).join("")],"resolved-locale":[po,[EE],(n,[e])=>e.evaluate(n).resolvedLocale()]});function Hpe(n){return Array.isArray(n)?`(${n.map(xl).join(", ")})`:`(${xl(n.type)}...)`}function Xw(n){if(n instanceof DE)return Xw(n.boundExpression);if(n instanceof ff&&n.name==="error")return!1;if(n instanceof UE)return!1;if(n instanceof Rb)return!1;if(n instanceof Db)return!1;if(n instanceof tM)return!1;const e=n instanceof Uy||n instanceof Am;let t=!0;return n.eachChild(i=>{e?t=t&&Xw(i):t=t&&i instanceof dx}),t?QD(n)&&qD(n,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"]):!1}function QD(n){if(n instanceof ff){if(n.name==="get"&&n.args.length===1)return!1;if(n.name==="feature-state")return!1;if(n.name==="has"&&n.args.length===1)return!1;if(n.name==="properties"||n.name==="geometry-type"||n.name==="id")return!1;if(/^filter-/.test(n.name))return!1}if(n instanceof Rb||n instanceof Db)return!1;let e=!0;return n.eachChild(t=>{e&&!QD(t)&&(e=!1)}),e}function YD(n){if(n instanceof ff&&n.name==="feature-state")return!1;let e=!0;return n.eachChild(t=>{e&&!YD(t)&&(e=!1)}),e}function qD(n,e){if(n instanceof ff&&e.indexOf(n.name)>=0)return!1;let t=!0;return n.eachChild(i=>{t&&!qD(i,e)&&(t=!1)}),t}function $T(n){return{result:"success",value:n}}function __(n){return{result:"error",value:n}}function Zpe(n){return n["property-type"]==="data-driven"||n["property-type"]==="cross-faded-data-driven"}function Xpe(n){return!!n.expression&&n.expression.parameters.indexOf("zoom")>-1}function Jpe(n){return!!n.expression&&n.expression.interpolated}function KZ(n){return typeof n=="object"&&n!==null&&!Array.isArray(n)&&Xu(n)===Ib}class eme{constructor(e,t){this.expression=e,this._warningHistory={},this._evaluator=new BZ,this._defaultValue=t?rme(t):null,this._enumValues=t&&t.type==="enum"?t.values:null}evaluateWithoutErrorHandling(e,t,i,r,o,s){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=i,this._evaluator.canonical=r,this._evaluator.availableImages=o||null,this._evaluator.formattedSection=s,this.expression.evaluate(this._evaluator)}evaluate(e,t,i,r,o,s){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=i||null,this._evaluator.canonical=r,this._evaluator.availableImages=o||null,this._evaluator.formattedSection=s||null;try{const a=this.expression.evaluate(this._evaluator);if(a==null||typeof a=="number"&&a!==a)return this._defaultValue;if(this._enumValues&&!(a in this._enumValues))throw new Pl(`Expected value to be one of ${Object.keys(this._enumValues).map(c=>JSON.stringify(c)).join(", ")}, but found ${JSON.stringify(a)} instead.`);return a}catch(a){return this._warningHistory[a.message]||(this._warningHistory[a.message]=!0,typeof console<"u"&&console.warn(a.message)),this._defaultValue}}}function tme(n){return Array.isArray(n)&&n.length>0&&typeof n[0]=="string"&&n[0]in LE}function LZ(n,e){const t=new TE(LE,Xw,[],e?ime(e):void 0),i=t.parse(n,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return i?$T(new eme(i,e)):__(t.errors)}class FF{constructor(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent=e!=="constant"&&!YD(t.expression),this.globalStateRefs=FE(t.expression)}evaluateWithoutErrorHandling(e,t,i,r,o,s){return this._styleExpression.evaluateWithoutErrorHandling(e,t,i,r,o,s)}evaluate(e,t,i,r,o,s){return this._styleExpression.evaluate(e,t,i,r,o,s)}}class zF{constructor(e,t,i,r){this.kind=e,this.zoomStops=i,this._styleExpression=t,this.isStateDependent=e!=="camera"&&!YD(t.expression),this.globalStateRefs=FE(t.expression),this.interpolationType=r}evaluateWithoutErrorHandling(e,t,i,r,o,s){return this._styleExpression.evaluateWithoutErrorHandling(e,t,i,r,o,s)}evaluate(e,t,i,r,o,s){return this._styleExpression.evaluate(e,t,i,r,o,s)}interpolationFactor(e,t,i){return this.interpolationType?e0.interpolationFactor(this.interpolationType,e,t,i):0}}function nme(n,e){const t=LZ(n,e);if(t.result==="error")return t;const i=t.value.expression,r=QD(i);if(!r&&!Zpe(e))return __([new Kg("","data expressions not supported")]);const o=qD(i,["zoom"]);if(!o&&!Xpe(e))return __([new Kg("","zoom expressions not supported")]);const s=cw(i);if(!s&&!o)return __([new Kg("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(s instanceof Kg)return __([s]);if(s instanceof e0&&!Jpe(e))return __([new Kg("",'"interpolate" expressions cannot be used with this property')]);if(!s)return $T(r?new FF("constant",t.value):new FF("source",t.value));const a=s instanceof e0?s.interpolation:void 0;return $T(r?new zF("camera",t.value,s.labels,a):new zF("composite",t.value,s.labels,a))}function cw(n){let e=null;if(n instanceof RE)e=cw(n.result);else if(n instanceof Y3){for(const t of n.args)if(e=cw(t),e)break}else(n instanceof PE||n instanceof e0)&&n.input instanceof ff&&n.input.name==="zoom"&&(e=n);return e instanceof Kg||n.eachChild(t=>{const i=cw(t);i instanceof Kg?e=i:!e&&i?e=new Kg("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&i&&e!==i&&(e=new Kg("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}function FE(n,e=new Set){return n instanceof tM&&e.add(n.key),n.eachChild(t=>{FE(t,e)}),e}function ime(n){const e={color:Xg,string:po,number:ei,enum:po,boolean:eo,formatted:BE,padding:OE,numberArray:IE,colorArray:N3,projectionDefinition:SE,resolvedImage:J4,variableAnchorOffsetCollection:kE};return n.type==="array"?Af(e[n.value]||$r,n.length):e[n.type]}function rme(n){if(n.type==="color"&&KZ(n.default))return new js(0,0,0,0);switch(n.type){case"color":return js.parse(n.default)||null;case"padding":return pm.parse(n.default)||null;case"numberArray":return mm.parse(n.default)||null;case"colorArray":return df.parse(n.default)||null;case"variableAnchorOffsetCollection":return Jg.parse(n.default)||null;case"projectionDefinition":return cm.parse(n.default)||null;default:return n.default===void 0?null:n.default}}function FZ(n){if(n===!0||n===!1)return!0;if(!Array.isArray(n)||n.length===0)return!1;switch(n[0]){case"has":return n.length>=2&&n[1]!=="$id"&&n[1]!=="$type";case"in":return n.length>=3&&(typeof n[1]!="string"||Array.isArray(n[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return n.length!==3||Array.isArray(n[1])||Array.isArray(n[2]);case"any":case"all":for(const e of n.slice(1))if(!FZ(e)&&typeof e!="boolean")return!1;return!0;default:return!0}}const ome={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function sme(n){if(n==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};FZ(n)||(n=Jw(n));const e=LZ(n,ome);if(e.result==="error")throw new Error(e.value.map(t=>`${t.key}: ${t.message}`).join(", "));{const t=zZ(n);return{filter:(i,r,o)=>e.value.evaluate(i,r,{},o),needGeometry:t,getGlobalStateRefs:()=>FE(e.value.expression)}}}function ame(n,e){return n<e?-1:n>e?1:0}function zZ(n){if(!Array.isArray(n))return!1;if(n[0]==="within"||n[0]==="distance")return!0;for(let e=1;e<n.length;e++)if(zZ(n[e]))return!0;return!1}function Jw(n){if(!n)return!0;const e=n[0];return n.length<=1?e!=="any":e==="=="?YB(n[1],n[2],"=="):e==="!="?ZM(YB(n[1],n[2],"==")):e==="<"||e===">"||e==="<="||e===">="?YB(n[1],n[2],e):e==="any"?lme(n.slice(1)):e==="all"?["all"].concat(n.slice(1).map(Jw)):e==="none"?["all"].concat(n.slice(1).map(Jw).map(ZM)):e==="in"?jF(n[1],n.slice(2)):e==="!in"?ZM(jF(n[1],n.slice(2))):e==="has"?NF(n[1]):e==="!has"?ZM(NF(n[1])):!0}function YB(n,e,t){switch(n){case"$type":return[`filter-type-${t}`,e];case"$id":return[`filter-id-${t}`,e];default:return[`filter-${t}`,n,e]}}function lme(n){return["any"].concat(n.map(Jw))}function jF(n,e){if(e.length===0)return!1;switch(n){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(t=>typeof t!=typeof e[0])?["filter-in-large",n,["literal",e.sort(ame)]]:["filter-in-small",n,["literal",e]]}}function NF(n){switch(n){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",n]}}function ZM(n){return["!",n]}function V3(n){return typeof n=="object"?["literal",n]:n}function ume(n,e){let t=n.stops;if(!t)return cme(n,e);const i=t&&typeof t[0][0]=="object",r=i||n.property!==void 0,o=i||!r;return t=t.map(s=>!r&&e.tokens&&typeof s[1]=="string"?[s[0],fme(s[1])]:[s[0],V3(s[1])]),i?Ame(n,e,t):o?dme(n,e,t):HT(n,e,t)}function cme(n,e){const t=["get",n.property];if(n.default===void 0)return e.type==="string"?["string",t]:t;if(e.type==="enum")return["match",t,Object.keys(e.values),t,n.default];{const i=[e.type==="color"?"to-color":e.type,t,V3(n.default)];return e.type==="array"&&i.splice(1,0,e.value,e.length||null),i}}function VD(n){switch(n.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function Ame(n,e,t){const i={},r={},o=[];for(let a=0;a<t.length;a++){const c=t[a],h=c[0].zoom;i[h]===void 0&&(i[h]={zoom:h,type:n.type,property:n.property,default:n.default},r[h]=[],o.push(h)),r[h].push([c[0].value,c[1]])}if(HD({},e)==="exponential"){const a=[VD(n),["linear"],["zoom"]];for(const c of o){const h=HT(i[c],e,r[c]);Q_(a,c,h,!1)}return a}else{const a=["step",["zoom"]];for(const c of o){const h=HT(i[c],e,r[c]);Q_(a,c,h,!0)}return $D(a),a}}function hme(n,e){if(n!==void 0)return n;if(e!==void 0)return e}function GF(n,e){const t=V3(hme(n.default,e.default));return t===void 0&&e.type==="resolvedImage"?"":t}function HT(n,e,t){const i=HD(n,e),r=["get",n.property];if(i==="categorical"&&typeof t[0][0]=="boolean"){const o=["case"];for(const s of t)o.push(["==",r,s[0]],s[1]);return o.push(GF(n,e)),o}else if(i==="categorical"){const o=["match",r];for(const s of t)Q_(o,s[0],s[1],!1);return o.push(GF(n,e)),o}else if(i==="interval"){const o=["step",["number",r]];for(const s of t)Q_(o,s[0],s[1],!0);return $D(o),n.default===void 0?o:["case",["==",["typeof",r],"number"],o,V3(n.default)]}else if(i==="exponential"){const o=n.base!==void 0?n.base:1,s=[VD(n),o===1?["linear"]:["exponential",o],["number",r]];for(const a of t)Q_(s,a[0],a[1],!1);return n.default===void 0?s:["case",["==",["typeof",r],"number"],s,V3(n.default)]}else throw new Error(`Unknown property function type ${i}`)}function dme(n,e,t,i=["zoom"]){const r=HD(n,e);let o,s=!1;if(r==="interval")o=["step",i],s=!0;else if(r==="exponential"){const a=n.base!==void 0?n.base:1;o=[VD(n),a===1?["linear"]:["exponential",a],i]}else throw new Error(`Unknown zoom function type "${r}"`);for(const a of t)Q_(o,a[0],a[1],s);return $D(o),o}function $D(n){n[0]==="step"&&n.length===3&&(n.push(0),n.push(n[3]))}function Q_(n,e,t,i){n.length>3&&e===n[n.length-2]||(i&&n.length===2||n.push(e),n.push(t))}function HD(n,e){return n.type?n.type:e.expression.interpolated?"exponential":"interval"}function fme(n){const e=["concat"],t=/{([^{}]+)}/g;let i=0;for(let r=t.exec(n);r!==null;r=t.exec(n)){const o=n.slice(i,t.lastIndex-r[0].length);i=t.lastIndex,o.length>0&&e.push(o),e.push(["get",r[1]])}if(e.length===1)return n;if(i<n.length)e.push(n.slice(i));else if(e.length===2)return["to-string",e[1]];return e}const pme=zfe;var WF={thin:100,hairline:100,"ultra-light":200,"extra-light":200,light:300,book:300,regular:400,normal:400,plain:400,roman:400,standard:400,medium:500,"semi-bold":600,"demi-bold":600,bold:700,"extra-bold":800,"ultra-bold":800,heavy:900,black:900,"heavy-black":900,fat:900,poster:900,"ultra-black":950,"extra-black":950},h2=" ",QF=/(italic|oblique)$/i,YF={};function ZT(n,e,t){var i=YF[n];if(!i){Array.isArray(n)||(n=[n]);for(var r=400,o="normal",s=[],a,c,h=0,m=n.length;h<m;++h){var v=n[h],x=v.split(" "),E=x[x.length-1].toLowerCase();E=="normal"||E=="italic"||E=="oblique"?(o=c?o:E,c=!0,x.pop(),E=x[x.length-1].toLowerCase()):QF.test(E)&&(E=E.replace(QF,""),o=c?o:x[x.length-1].replace(E,""),c=!0);for(var D in WF){var P=x.length>1?x[x.length-2].toLowerCase():"";if(E==D||E==D.replace("-","")||P+"-"+E==D){r=a?r:WF[D],x.pop(),P&&D.startsWith(P)&&x.pop();break}}!a&&typeof E=="number"&&(r=E,a=!0);var F=x.join(h2).replace("Klokantech Noto Sans","Noto Sans").replace("DIN Pro","Barlow").replace("Arial Unicode MS","Arial");F.indexOf(h2)!==-1&&(F='"'+F+'"'),s.push(F)}i=YF[n]=[o,r,s]}return i[0]+h2+i[1]+h2+e+"px"+(t?"/"+t:"")+h2+i[2]}const fd={ADD:"add",REMOVE:"remove"},fx={PROPERTYCHANGE:"propertychange"},Er={CHANGE:"change",ERROR:"error",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",TOUCHMOVE:"touchmove",WHEEL:"wheel"};class nM{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function mme(n,e,t){let i,r;t=t||n0;let o=0,s=n.length,a=!1;for(;o<s;)i=o+(s-o>>1),r=+t(n[i],e),r<0?o=i+1:(s=i,a=!r);return a?o:~o}function n0(n,e){return n>e?1:n<e?-1:0}function gme(n,e){return n<e?1:n>e?-1:0}function zE(n,e,t){if(n[0]<=e)return 0;const i=n.length;if(e<=n[i-1])return i-1;if(typeof t=="function"){for(let r=1;r<i;++r){const o=n[r];if(o===e)return r;if(o<e)return t(e,n[r-1],o)>0?r-1:r}return i-1}if(t>0){for(let r=1;r<i;++r)if(n[r]<e)return r-1;return i-1}if(t<0){for(let r=1;r<i;++r)if(n[r]<=e)return r;return i-1}for(let r=1;r<i;++r){if(n[r]==e)return r;if(n[r]<e)return n[r-1]-e<e-n[r]?r-1:r}return i-1}function yme(n,e,t){for(;e<t;){const i=n[e];n[e]=n[t],n[t]=i,++e,--t}}function i0(n,e){const t=Array.isArray(e)?e:[e],i=t.length;for(let r=0;r<i;r++)n[n.length]=t[r]}function cv(n,e){const t=n.length;if(t!==e.length)return!1;for(let i=0;i<t;i++)if(n[i]!==e[i])return!1;return!0}function vme(n,e,t){const i=e||n0;return n.every(function(r,o){if(o===0)return!0;const s=i(n[o-1],r);return!(s>0||s===0)})}function $3(){return!0}function jE(){return!1}function H3(){}function jZ(n){let e,t,i;return function(){const r=Array.prototype.slice.call(arguments);return(!t||this!==i||!cv(r,t))&&(i=this,t=r,e=n.apply(this,arguments)),e}}function px(n){function e(){let t;try{t=n()}catch(i){return Promise.reject(i)}return t instanceof Promise?t:Promise.resolve(t)}return e()}function iM(n){for(const e in n)delete n[e]}function tv(n){let e;for(e in n)return!1;return!e}class Em{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}class rM extends nM{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,t){if(!e||!t)return;const i=this.listeners_||(this.listeners_={}),r=i[e]||(i[e]=[]);r.includes(t)||r.push(t)}dispatchEvent(e){const t=typeof e=="string",i=t?e:e.type,r=this.listeners_&&this.listeners_[i];if(!r)return;const o=t?new Em(e):e;o.target||(o.target=this.eventTarget_||this);const s=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});i in s||(s[i]=0,a[i]=0),++s[i];let c;for(let h=0,m=r.length;h<m;++h)if("handleEvent"in r[h]?c=r[h].handleEvent(o):c=r[h].call(this,o),c===!1||o.propagationStopped){c=!1;break}if(--s[i]===0){let h=a[i];for(delete a[i];h--;)this.removeEventListener(i,H3);delete s[i]}return c}disposeInternal(){this.listeners_&&iM(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,t){if(!this.listeners_)return;const i=this.listeners_[e];if(!i)return;const r=i.indexOf(t);r!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(i[r]=H3,++this.pendingRemovals_[e]):(i.splice(r,1),i.length===0&&delete this.listeners_[e]))}}function qo(n,e,t,i,r){if(r){const s=t;t=function(a){return n.removeEventListener(e,t),s.call(i??this,a)}}else i&&i!==n&&(t=t.bind(i));const o={target:n,type:e,listener:t};return n.addEventListener(e,t),o}function eS(n,e,t,i){return qo(n,e,t,i,!0)}function Ba(n){n&&n.target&&(n.target.removeEventListener(n.type,n.listener),iM(n))}class oM extends rM{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(Er.CHANGE)}getRevision(){return this.revision_}onInternal(e,t){if(Array.isArray(e)){const i=e.length,r=new Array(i);for(let o=0;o<i;++o)r[o]=qo(this,e[o],t);return r}return qo(this,e,t)}onceInternal(e,t){let i;if(Array.isArray(e)){const r=e.length;i=new Array(r);for(let o=0;o<r;++o)i[o]=eS(this,e[o],t)}else i=eS(this,e,t);return t.ol_key=i,i}unInternal(e,t){const i=t.ol_key;if(i)bme(i);else if(Array.isArray(e))for(let r=0,o=e.length;r<o;++r)this.removeEventListener(e[r],t);else this.removeEventListener(e,t)}}oM.prototype.on;oM.prototype.once;oM.prototype.un;function bme(n){if(Array.isArray(n))for(let e=0,t=n.length;e<t;++e)Ba(n[e]);else Ba(n)}function Tr(){throw new Error("Unimplemented abstract method.")}let Cme=0;function Nr(n){return n.ol_uid||(n.ol_uid=String(++Cme))}class qF extends Em{constructor(e,t,i){super(e),this.key=t,this.oldValue=i}}class Bm extends oM{constructor(e){super(),this.on,this.once,this.un,Nr(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,t){let i;i=`change:${e}`,this.hasListener(i)&&this.dispatchEvent(new qF(i,e,t)),i=fx.PROPERTYCHANGE,this.hasListener(i)&&this.dispatchEvent(new qF(i,e,t))}addChangeListener(e,t){this.addEventListener(`change:${e}`,t)}removeChangeListener(e,t){this.removeEventListener(`change:${e}`,t)}set(e,t,i){const r=this.values_||(this.values_={});if(i)r[e]=t;else{const o=r[e];r[e]=t,o!==t&&this.notify(e,o)}}setProperties(e,t){for(const i in e)this.set(i,e[i],t)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,t){if(this.values_&&e in this.values_){const i=this.values_[e];delete this.values_[e],tv(this.values_)&&(this.values_=null),t||this.notify(e,i)}}}const VF={LENGTH:"length"};class XM extends Em{constructor(e,t,i){super(e),this.element=t,this.index=i}}class Gg extends Bm{constructor(e,t){if(super(),this.on,this.once,this.un,t=t||{},this.unique_=!!t.unique,this.array_=e||[],this.unique_)for(let i=0,r=this.array_.length;i<r;++i)this.assertUnique_(this.array_[i],i);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let t=0,i=e.length;t<i;++t)this.push(e[t]);return this}forEach(e){const t=this.array_;for(let i=0,r=t.length;i<r;++i)e(t[i],i,t)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(VF.LENGTH)}insertAt(e,t){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new XM(fd.ADD,t,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);const t=this.getLength();return this.insertAt(t,e),this.getLength()}remove(e){const t=this.array_;for(let i=0,r=t.length;i<r;++i)if(t[i]===e)return this.removeAt(i)}removeAt(e){if(e<0||e>=this.getLength())return;const t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new XM(fd.REMOVE,t,e)),t}setAt(e,t){const i=this.getLength();if(e>=i){this.insertAt(e,t);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t,e);const r=this.array_[e];this.array_[e]=t,this.dispatchEvent(new XM(fd.REMOVE,r,e)),this.dispatchEvent(new XM(fd.ADD,t,e))}updateLength_(){this.set(VF.LENGTH,this.array_.length)}assertUnique_(e,t){for(let i=0,r=this.array_.length;i<r;++i)if(this.array_[i]===e&&i!==t)throw new Error("Duplicate item added to a unique collection")}}class x_ extends Em{constructor(e,t,i){super(e),this.map=t,this.frameState=i!==void 0?i:null}}class Sy extends x_{constructor(e,t,i,r,o,s){super(e,t,o),this.originalEvent=i,this.pixel_=null,this.coordinate_=null,this.dragging=r!==void 0?r:!1,this.activePointers=s}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const Jl={SINGLECLICK:"singleclick",CLICK:Er.CLICK,DBLCLICK:Er.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},Wb=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",_me=Wb.includes("safari")&&!Wb.includes("chrom");_me&&(Wb.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(Wb));const xme=Wb.includes("webkit")&&!Wb.includes("edge"),NZ=Wb.includes("macintosh"),Mme=typeof devicePixelRatio<"u"?devicePixelRatio:1,iC=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,GZ=typeof Image<"u"&&Image.prototype.decode,wme=typeof createImageBitmap=="function",WZ=(function(){let n=!1;try{const e=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return n})(),XT={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown"};class Sme extends rM{constructor(e,t){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=t===void 0?1:t,this.down_=null;const i=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=i,this.pointerdownListenerKey_=qo(i,XT.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=qo(i,XT.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(Er.TOUCHMOVE,this.boundHandleTouchMove_,WZ?{passive:!1}:!1)}emulateClick_(e){let t=new Sy(Jl.CLICK,this.map_,e);this.dispatchEvent(t),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new Sy(Jl.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const i=new Sy(Jl.SINGLECLICK,this.map_,e);this.dispatchEvent(i)},250)}updateActivePointers_(e){const t=e,i=t.pointerId;if(t.type==Jl.POINTERUP||t.type==Jl.POINTERCANCEL){delete this.trackedTouches_[i];for(const r in this.trackedTouches_)if(this.trackedTouches_[r].target!==t.target){delete this.trackedTouches_[r];break}}else(t.type==Jl.POINTERDOWN||t.type==Jl.POINTERMOVE)&&(this.trackedTouches_[i]=t);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const t=new Sy(Jl.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.emulateClicks_&&!t.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(Ba),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const t=new Sy(Jl.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(t),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const i=this.map_.getOwnerDocument();this.dragListenerKeys_.push(qo(i,Jl.POINTERMOVE,this.handlePointerMove_,this),qo(i,Jl.POINTERUP,this.handlePointerUp_,this),qo(this.element_,Jl.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==i&&this.dragListenerKeys_.push(qo(this.element_.getRootNode(),Jl.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const t=new Sy(Jl.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(t)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const t=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new Sy(Jl.POINTERMOVE,this.map_,e,t))}handleTouchMove_(e){const t=this.originalPointerMoveEvent_;(!t||t.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(Ba(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(Er.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(Ba(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(Ba),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const t1={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},ZA={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},ii={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function ws(n,e){if(!n)throw new Error(e)}const tS=1/0;class Eme{constructor(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,iM(this.queuedElements_)}dequeue(){const e=this.elements_,t=this.priorities_,i=e[0];e.length==1?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));const r=this.keyFunction_(i);return delete this.queuedElements_[r],i}enqueue(e){ws(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const t=this.priorityFunction_(e);return t!=tS?(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const t=this.elements_,i=this.priorities_,r=t.length,o=t[e],s=i[e],a=e;for(;e<r>>1;){const c=this.getLeftChildIndex_(e),h=this.getRightChildIndex_(e),m=h<r&&i[h]<i[c]?h:c;t[e]=t[m],i[e]=i[m],e=m}t[e]=o,i[e]=s,this.siftDown_(a,e)}siftDown_(e,t){const i=this.elements_,r=this.priorities_,o=i[t],s=r[t];for(;t>e;){const a=this.getParentIndex_(t);if(r[a]>s)i[t]=i[a],r[t]=r[a],t=a;else break}i[t]=o,r[t]=s}reprioritize(){const e=this.priorityFunction_,t=this.elements_,i=this.priorities_;let r=0;const o=t.length;let s,a,c;for(a=0;a<o;++a)s=t[a],c=e(s),c==tS?delete this.queuedElements_[this.keyFunction_(s)]:(i[r]=c,t[r++]=s);t.length=r,i.length=r,this.heapify_()}}class QZ extends Eme{constructor(e,t){super(i=>e.apply(null,i),i=>i[0].getKey()),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const t=super.enqueue(e);return t&&e[0].addEventListener(Er.CHANGE,this.boundHandleTileChange_),t}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const t=e.target,i=t.getState();if(i===ii.LOADED||i===ii.ERROR||i===ii.EMPTY){i!==ii.ERROR&&t.removeEventListener(Er.CHANGE,this.boundHandleTileChange_);const r=t.getKey();r in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[r],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,t){let i=0;for(;this.tilesLoading_<e&&i<t&&this.getCount()>0;){const r=this.dequeue()[0],o=r.getKey();r.getState()===ii.IDLE&&!(o in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[o]=!0,++this.tilesLoading_,++i,r.load())}}}function Bme(n,e,t,i,r){if(!n||!(t in n.wantedTiles)||!n.wantedTiles[t][e.getKey()])return tS;const o=n.viewState.center,s=i[0]-o[0],a=i[1]-o[1];return 65536*Math.log(r)+Math.sqrt(s*s+a*a)/r}const Cl={ANIMATING:0,INTERACTING:1},rm={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};function Ul(n,e,t){return Math.min(Math.max(n,e),t)}function Ome(n,e,t,i,r,o){const s=r-t,a=o-i;if(s!==0||a!==0){const c=((n-t)*s+(e-i)*a)/(s*s+a*a);c>1?(t=r,i=o):c>0&&(t+=s*c,i+=a*c)}return Pb(n,e,t,i)}function Pb(n,e,t,i){const r=t-n,o=i-e;return r*r+o*o}function Ime(n){const e=n.length;for(let i=0;i<e;i++){let r=i,o=Math.abs(n[i][i]);for(let a=i+1;a<e;a++){const c=Math.abs(n[a][i]);c>o&&(o=c,r=a)}if(o===0)return null;const s=n[r];n[r]=n[i],n[i]=s;for(let a=i+1;a<e;a++){const c=-n[a][i]/n[i][i];for(let h=i;h<e+1;h++)i==h?n[a][h]=0:n[a][h]+=c*n[i][h]}}const t=new Array(e);for(let i=e-1;i>=0;i--){t[i]=n[i][e]/n[i][i];for(let r=i-1;r>=0;r--)n[r][e]-=n[r][i]*t[i]}return t}function $F(n){return n*180/Math.PI}function $y(n){return n*Math.PI/180}function Ub(n,e){const t=n%e;return t*e<0?t+e:t}function af(n,e,t){return n+t*(e-n)}function NE(n,e){const t=Math.pow(10,e);return Math.round(n*t)/t}function JM(n,e){return Math.floor(NE(n,e))}function Ky(n,e){return Math.ceil(NE(n,e))}function JT(n,e,t){if(n>=e&&n<t)return n;const i=t-e;return((n-e)%i+i)%i+e}function HF(n,e,t){return(function(i,r,o,s,a){if(!i)return;if(!r&&!e)return i;const c=e?0:o[0]*r,h=e?0:o[1]*r,m=a?a[0]:0,v=a?a[1]:0;let x=n[0]+c/2+m,E=n[2]-c/2+m,D=n[1]+h/2+v,P=n[3]-h/2+v;x>E&&(x=(E+x)/2,E=x),D>P&&(D=(P+D)/2,P=D);let F=Ul(i[0],x,E),W=Ul(i[1],D,P);if(s&&t&&r){const q=30*r;F+=-q*Math.log(1+Math.max(0,x-i[0])/q)+q*Math.log(1+Math.max(0,i[0]-E)/q),W+=-q*Math.log(1+Math.max(0,D-i[1])/q)+q*Math.log(1+Math.max(0,i[1]-P)/q)}return[F,W]})}function kme(n){return n}const Hc={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function e9(n){const e=ap();for(let t=0,i=n.length;t<i;++t)h3(e,n[t]);return e}function Tme(n,e,t){const i=Math.min.apply(null,n),r=Math.min.apply(null,e),o=Math.max.apply(null,n),s=Math.max.apply(null,e);return p1(i,r,o,s,t)}function Hy(n,e,t){return t?(t[0]=n[0]-e,t[1]=n[1]-e,t[2]=n[2]+e,t[3]=n[3]+e,t):[n[0]-e,n[1]-e,n[2]+e,n[3]+e]}function YZ(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n.slice()}function rC(n,e,t){let i,r;return e<n[0]?i=n[0]-e:n[2]<e?i=e-n[2]:i=0,t<n[1]?r=n[1]-t:n[3]<t?r=t-n[3]:r=0,i*i+r*r}function Qb(n,e){return ZD(n,e[0],e[1])}function Wg(n,e){return n[0]<=e[0]&&e[2]<=n[2]&&n[1]<=e[1]&&e[3]<=n[3]}function ZD(n,e,t){return n[0]<=e&&e<=n[2]&&n[1]<=t&&t<=n[3]}function t9(n,e){const t=n[0],i=n[1],r=n[2],o=n[3],s=e[0],a=e[1];let c=Hc.UNKNOWN;return s<t?c=c|Hc.LEFT:s>r&&(c=c|Hc.RIGHT),a<i?c=c|Hc.BELOW:a>o&&(c=c|Hc.ABOVE),c===Hc.UNKNOWN&&(c=Hc.INTERSECTING),c}function ap(){return[1/0,1/0,-1/0,-1/0]}function p1(n,e,t,i,r){return r?(r[0]=n,r[1]=e,r[2]=t,r[3]=i,r):[n,e,t,i]}function Fx(n){return p1(1/0,1/0,-1/0,-1/0,n)}function qZ(n,e){const t=n[0],i=n[1];return p1(t,i,t,i,e)}function XD(n,e,t,i,r){const o=Fx(r);return $Z(o,n,e,t,i)}function m1(n,e){return n[0]==e[0]&&n[2]==e[2]&&n[1]==e[1]&&n[3]==e[3]}function VZ(n,e){return e[0]<n[0]&&(n[0]=e[0]),e[2]>n[2]&&(n[2]=e[2]),e[1]<n[1]&&(n[1]=e[1]),e[3]>n[3]&&(n[3]=e[3]),n}function h3(n,e){e[0]<n[0]&&(n[0]=e[0]),e[0]>n[2]&&(n[2]=e[0]),e[1]<n[1]&&(n[1]=e[1]),e[1]>n[3]&&(n[3]=e[1])}function $Z(n,e,t,i,r){for(;t<i;t+=r)Rme(n,e[t],e[t+1]);return n}function Rme(n,e,t){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}function HZ(n,e){let t;return t=e(GE(n)),t||(t=e(WE(n)),t)||(t=e(QE(n)),t)||(t=e(C1(n)),t)?t:!1}function n9(n){let e=0;return oC(n)||(e=ns(n)*Ju(n)),e}function GE(n){return[n[0],n[1]]}function WE(n){return[n[2],n[1]]}function vf(n){return[(n[0]+n[2])/2,(n[1]+n[3])/2]}function Dme(n,e){let t;if(e==="bottom-left")t=GE(n);else if(e==="bottom-right")t=WE(n);else if(e==="top-left")t=C1(n);else if(e==="top-right")t=QE(n);else throw new Error("Invalid corner");return t}function nS(n,e,t,i,r){const[o,s,a,c,h,m,v,x]=ZZ(n,e,t,i);return p1(Math.min(o,a,h,v),Math.min(s,c,m,x),Math.max(o,a,h,v),Math.max(s,c,m,x),r)}function ZZ(n,e,t,i){const r=e*i[0]/2,o=e*i[1]/2,s=Math.cos(t),a=Math.sin(t),c=r*s,h=r*a,m=o*s,v=o*a,x=n[0],E=n[1];return[x-c+v,E-h-m,x-c-v,E-h+m,x+c-v,E+h+m,x+c+v,E+h-m,x-c+v,E-h-m]}function Ju(n){return n[3]-n[1]}function vm(n,e,t){const i=t||ap();return tu(n,e)?(n[0]>e[0]?i[0]=n[0]:i[0]=e[0],n[1]>e[1]?i[1]=n[1]:i[1]=e[1],n[2]<e[2]?i[2]=n[2]:i[2]=e[2],n[3]<e[3]?i[3]=n[3]:i[3]=e[3]):Fx(i),i}function C1(n){return[n[0],n[3]]}function QE(n){return[n[2],n[3]]}function ns(n){return n[2]-n[0]}function tu(n,e){return n[0]<=e[2]&&n[2]>=e[0]&&n[1]<=e[3]&&n[3]>=e[1]}function oC(n){return n[2]<n[0]||n[3]<n[1]}function Pme(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n}function Ume(n,e,t){let i=!1;const r=t9(n,e),o=t9(n,t);if(r===Hc.INTERSECTING||o===Hc.INTERSECTING)i=!0;else{const s=n[0],a=n[1],c=n[2],h=n[3],m=e[0],v=e[1],x=t[0],E=t[1],D=(E-v)/(x-m);let P,F;o&Hc.ABOVE&&!(r&Hc.ABOVE)&&(P=x-(E-h)/D,i=P>=s&&P<=c),!i&&o&Hc.RIGHT&&!(r&Hc.RIGHT)&&(F=E-(x-c)*D,i=F>=a&&F<=h),!i&&o&Hc.BELOW&&!(r&Hc.BELOW)&&(P=x-(E-a)/D,i=P>=s&&P<=c),!i&&o&Hc.LEFT&&!(r&Hc.LEFT)&&(F=E-(x-s)*D,i=F>=a&&F<=h)}return i}function Kme(n,e,t,i){if(oC(n))return Fx(t);let r=[];r=[n[0],n[1],n[2],n[1],n[2],n[3],n[0],n[3]],e(r,r,2);const o=[],s=[];for(let a=0,c=r.length;a<c;a+=2)o.push(r[a]),s.push(r[a+1]);return Tme(o,s,t)}function XZ(n,e){const t=e.getExtent(),i=vf(n);if(e.canWrapX()&&(i[0]<t[0]||i[0]>=t[2])){const r=ns(t),s=Math.floor((i[0]-t[0])/r)*r;n[0]-=s,n[2]-=s}return n}function JZ(n,e,t){if(e.canWrapX()){const i=e.getExtent();if(!isFinite(n[0])||!isFinite(n[2]))return[[i[0],n[1],i[2],n[3]]];XZ(n,e);const r=ns(i);if(ns(n)>r&&!t)return[[i[0],n[1],i[2],n[3]]];if(n[0]<i[0])return[[n[0]+r,n[1],i[2],n[3]],[i[0],n[1],n[2],n[3]]];if(n[2]>i[2])return[[n[0],n[1],i[2],n[3]],[i[0],n[1],n[2]-r,n[3]]]}return[n]}function Lme(n,e){return n[0]+=+e[0],n[1]+=+e[1],n}function iS(n,e){let t=!0;for(let i=n.length-1;i>=0;--i)if(n[i]!=e[i]){t=!1;break}return t}function JD(n,e){const t=Math.cos(e),i=Math.sin(e),r=n[0]*t-n[1]*i,o=n[1]*t+n[0]*i;return n[0]=r,n[1]=o,n}function Fme(n,e){return n[0]*=e,n[1]*=e,n}function zme(n,e){const t=n[0]-e[0],i=n[1]-e[1];return t*t+i*i}function jme(n,e){return Math.sqrt(zme(n,e))}function eP(n,e){if(e.canWrapX()){const t=ns(e.getExtent()),i=Nme(n,e,t);i&&(n[0]-=i*t)}return n}function Nme(n,e,t){const i=e.getExtent();let r=0;return e.canWrapX()&&(n[0]<i[0]||n[0]>i[2])&&(t=t||ns(i),r=Math.floor((n[0]-i[0])/t)),r}function eX(n){return Math.pow(n,3)}function zx(n){return 1-eX(1-n)}function Gme(n){return 3*n*n-2*n*n*n}function Wme(n){return n}const Qme=63710088e-1;function ZF(n,e,t){t=t||Qme;const i=$y(n[1]),r=$y(e[1]),o=(r-i)/2,s=$y(e[0]-n[0])/2,a=Math.sin(o)*Math.sin(o)+Math.sin(s)*Math.sin(s)*Math.cos(i)*Math.cos(r);return 2*t*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}function tX(...n){console.warn(...n)}const nv={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class YE{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||nv[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const sM=6378137,k_=Math.PI*sM,Yme=[-k_,-k_,k_,k_],qme=[-180,-85,180,85],e5=sM*Math.log(Math.tan(Math.PI/2));class zC extends YE{constructor(e){super({code:e,units:"m",extent:Yme,global:!0,worldExtent:qme,getPointResolution:function(t,i){return t/Math.cosh(i[1]/sM)}})}}const XF=[new zC("EPSG:3857"),new zC("EPSG:102100"),new zC("EPSG:102113"),new zC("EPSG:900913"),new zC("http://www.opengis.net/def/crs/EPSG/0/3857"),new zC("http://www.opengis.net/gml/srs/epsg.xml#3857")];function Vme(n,e,t,i){const r=n.length;t=t>1?t:2,i=i??t,e===void 0&&(t>2?e=n.slice():e=new Array(r));for(let o=0;o<r;o+=i){e[o]=k_*n[o]/180;let s=sM*Math.log(Math.tan(Math.PI*(+n[o+1]+90)/360));s>e5?s=e5:s<-e5&&(s=-e5),e[o+1]=s}return e}function $me(n,e,t,i){const r=n.length;t=t>1?t:2,i=i??t,e===void 0&&(t>2?e=n.slice():e=new Array(r));for(let o=0;o<r;o+=i)e[o]=180*n[o]/k_,e[o+1]=360*Math.atan(Math.exp(n[o+1]/sM))/Math.PI-90;return e}const Hme=6378137,JF=[-180,-90,180,90],Zme=Math.PI*Hme/180;class rb extends YE{constructor(e,t){super({code:e,units:"degrees",extent:JF,axisOrientation:t,global:!0,metersPerUnit:Zme,worldExtent:JF})}}const ez=[new rb("CRS:84"),new rb("EPSG:4326","neu"),new rb("urn:ogc:def:crs:OGC:1.3:CRS84"),new rb("urn:ogc:def:crs:OGC:2:84"),new rb("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new rb("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new rb("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let i9={};function Xme(n){return i9[n]||i9[n.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function Jme(n,e){i9[n]=e}let Y_={};function Z3(n,e,t){const i=n.getCode(),r=e.getCode();i in Y_||(Y_[i]={}),Y_[i][r]=t}function qB(n,e){return n in Y_&&e in Y_[n]?Y_[n][e]:null}const rS=.9996,rp=.00669438,qE=rp*rp,VE=qE*rp,bb=rp/(1-rp),tz=Math.sqrt(1-rp),mx=(1-tz)/(1+tz),nX=mx*mx,tP=nX*mx,nP=tP*mx,iX=nP*mx,rX=1-rp/4-3*qE/64-5*VE/256,ege=3*rp/8+3*qE/32+45*VE/1024,tge=15*qE/256+45*VE/1024,nge=35*VE/3072,ige=3/2*mx-27/32*tP+269/512*iX,rge=21/16*nX-55/32*nP,oge=151/96*tP-417/128*iX,sge=1097/512*nP,oS=6378137;function age(n,e,t){const i=n-5e5,s=(t.north?e:e-1e7)/rS/(oS*rX),a=s+ige*Math.sin(2*s)+rge*Math.sin(4*s)+oge*Math.sin(6*s)+sge*Math.sin(8*s),c=Math.sin(a),h=c*c,m=Math.cos(a),v=c/m,x=v*v,E=x*x,D=1-rp*h,P=Math.sqrt(1-rp*h),F=oS/P,W=(1-rp)/D,q=bb*m**2,V=q*q,H=i/(F*rS),X=H*H,Z=X*H,G=Z*H,oe=G*H,ue=oe*H,xe=a-v/W*(X/2-G/24*(5+3*x+10*q-4*V-9*bb))+ue/720*(61+90*x+298*q+45*E-252*bb-3*V);let me=(H-Z/6*(1+2*x+q)+oe/120*(5-2*q+28*x-3*V+8*bb+24*E))/m;return me=JT(me+$y(oX(t.number)),-Math.PI,Math.PI),[$F(me),$F(xe)]}const nz=-80,iz=84,lge=-180,uge=180;function cge(n,e,t){n=JT(n,lge,uge),e<nz?e=nz:e>iz&&(e=iz);const i=$y(e),r=Math.sin(i),o=Math.cos(i),s=r/o,a=s*s,c=a*a,h=$y(n),m=oX(t.number),v=$y(m),x=oS/Math.sqrt(1-rp*r**2),E=bb*o**2,D=o*JT(h-v,-Math.PI,Math.PI),P=D*D,F=P*D,W=F*D,q=W*D,V=q*D,H=oS*(rX*i-ege*Math.sin(2*i)+tge*Math.sin(4*i)-nge*Math.sin(6*i)),X=rS*x*(D+F/6*(1-a+E)+q/120*(5-18*a+c+72*E-58*bb))+5e5;let Z=rS*(H+x*s*(P/2+W/24*(5-a+9*E+4*E**2)+V/720*(61-58*a+c+600*E-330*bb)));return t.north||(Z+=1e7),[X,Z]}function oX(n){return(n-1)*6-180+3}const Age=[/^EPSG:(\d+)$/,/^urn:ogc:def:crs:EPSG::(\d+)$/,/^http:\/\/www\.opengis\.net\/def\/crs\/EPSG\/0\/(\d+)$/];function sX(n){let e=0;for(const r of Age){const o=n.match(r);if(o){e=parseInt(o[1]);break}}if(!e)return null;let t=0,i=!1;return e>32700&&e<32761?t=e-32700:e>32600&&e<32661&&(i=!0,t=e-32600),t?{number:t,north:i}:null}function rz(n,e){return function(t,i,r,o){const s=t.length;r=r>1?r:2,o=o??r,i||(r>2?i=t.slice():i=new Array(s));for(let a=0;a<s;a+=o){const c=t[a],h=t[a+1],m=n(c,h,e);i[a]=m[0],i[a+1]=m[1]}return i}}function hge(n){return sX(n)?new YE({code:n,units:"m"}):null}function dge(n){const e=sX(n.getCode());return e?{forward:rz(cge,e),inverse:rz(age,e)}:null}const fge=[dge],pge=[hge];let r9=!0;function aX(n){r9=!1}function iP(n,e){if(e!==void 0){for(let t=0,i=n.length;t<i;++t)e[t]=n[t];e=e}else e=n.slice();return e}function o9(n){Jme(n.getCode(),n),Z3(n,n,iP)}function mge(n){n.forEach(o9)}function Ns(n){if(typeof n!="string")return n;const e=Xme(n);if(e)return e;for(const t of pge){const i=t(n);if(i)return i}return null}function s9(n,e,t,i){n=Ns(n);let r;const o=n.getPointResolutionFunc();if(o){if(r=o(e,t),i&&i!==n.getUnits()){const s=n.getMetersPerUnit();s&&(r=r*s/nv[i])}}else{const s=n.getUnits();if(s=="degrees"&&!i||i=="degrees")r=e;else{const a=aM(n,Ns("EPSG:4326"));if(!a&&s!=="degrees")r=e*n.getMetersPerUnit();else{let h=[t[0]-e/2,t[1],t[0]+e/2,t[1],t[0],t[1]-e/2,t[0],t[1]+e/2];h=a(h,h,2);const m=ZF(h.slice(0,2),h.slice(2,4)),v=ZF(h.slice(4,6),h.slice(6,8));r=(m+v)/2}const c=i?nv[i]:n.getMetersPerUnit();c!==void 0&&(r/=c)}}return r}function oz(n){mge(n),n.forEach(function(e){n.forEach(function(t){e!==t&&Z3(e,t,iP)})})}function gge(n,e,t,i){n.forEach(function(r){e.forEach(function(o){Z3(r,o,t),Z3(o,r,i)})})}function rP(n,e){return n?typeof n=="string"?Ns(n):n:Ns(e)}function yge(n){return(function(e,t,i,r){const o=e.length;i=i!==void 0?i:2,r=r??i,t=t!==void 0?t:new Array(o);for(let s=0;s<o;s+=r){const a=n(e.slice(s,s+i)),c=a.length;for(let h=0,m=r;h<m;++h)t[s+h]=h>=c?e[s+h]:a[h]}return t})}function a9(n,e){return aX(),$E(n,"EPSG:4326",e!==void 0?e:"EPSG:3857")}function VB(n,e){const t=$E(n,"EPSG:3857","EPSG:4326"),i=t[0];return(i<-180||i>180)&&(t[0]=Ub(i+180,360)-180),t}function Zy(n,e){if(n===e)return!0;const t=n.getUnits()===e.getUnits();return(n.getCode()===e.getCode()||aM(n,e)===iP)&&t}function aM(n,e){const t=n.getCode(),i=e.getCode();let r=qB(t,i);if(r)return r;let o=null,s=null;for(const c of fge)o||(o=c(n)),s||(s=c(e));if(!o&&!s)return null;const a="EPSG:4326";if(s)if(o)r=$B(o.inverse,s.forward);else{const c=qB(t,a);c&&(r=$B(c,s.forward))}else{const c=qB(a,i);c&&(r=$B(o.inverse,c))}return r&&(o9(n),o9(e),Z3(n,e,r)),r}function $B(n,e){return function(t,i,r,o){return i=n(t,i,r,o),e(i,i,r,o)}}function X3(n,e){const t=Ns(n),i=Ns(e);return aM(t,i)}function $E(n,e,t){const i=X3(e,t);if(!i){const r=Ns(e).getCode(),o=Ns(t).getCode();throw new Error(`No transform available between ${r} and ${o}`)}return i(n,void 0,n.length)}let vge=null;function bge(){return vge}function l9(n,e){return n}function e1(n,e){return r9&&!iS(n,[0,0])&&n[0]>=-180&&n[0]<=180&&n[1]>=-90&&n[1]<=90&&(r9=!1,tX("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),n}function oP(n,e){return n}function Qg(n,e){return n}function Cge(){oz(XF),oz(ez),gge(ez,XF,Vme,$me)}Cge();const lX=new Array(6);function Cd(){return[1,0,0,1,0,0]}function sz(n){return aP(n,1,0,0,1,0,0)}function sP(n,e){const t=n[0],i=n[1],r=n[2],o=n[3],s=n[4],a=n[5],c=e[0],h=e[1],m=e[2],v=e[3],x=e[4],E=e[5];return n[0]=t*c+r*h,n[1]=i*c+o*h,n[2]=t*m+r*v,n[3]=i*m+o*v,n[4]=t*x+r*E+s,n[5]=i*x+o*E+a,n}function aP(n,e,t,i,r,o,s){return n[0]=e,n[1]=t,n[2]=i,n[3]=r,n[4]=o,n[5]=s,n}function _ge(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n}function Hu(n,e){const t=e[0],i=e[1];return e[0]=n[0]*t+n[2]*i+n[4],e[1]=n[1]*t+n[3]*i+n[5],e}function HB(n,e,t){return sP(n,aP(lX,e,0,0,t,0,0))}function xge(n,e,t){return sP(n,aP(lX,1,0,0,1,e,t))}function s0(n,e,t,i,r,o,s,a){const c=Math.sin(o),h=Math.cos(o);return n[0]=i*h,n[1]=r*c,n[2]=-i*c,n[3]=r*h,n[4]=s*i*h-a*i*c+e,n[5]=s*r*c+a*r*h+t,n}function uX(n,e){const t=Mge(e);ws(t!==0,"Transformation matrix cannot be inverted");const i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],c=e[5];return n[0]=s/t,n[1]=-r/t,n[2]=-o/t,n[3]=i/t,n[4]=(o*c-s*a)/t,n[5]=-(i*c-r*a)/t,n}function Mge(n){return n[0]*n[3]-n[1]*n[2]}const wge=[1e5,1e5,1e5,1e5,2,2];function Sge(n){return"matrix("+n.join(", ")+")"}function az(n){return n.substring(7,n.length-1).split(",").map(parseFloat)}function Ege(n,e){const t=az(n),i=az(e);for(let r=0;r<6;++r)if(Math.round((t[r]-i[r])*wge[r])!==0)return!1;return!0}function Xy(n,e,t,i,r,o,s){o=o||[],s=s||2;let a=0;for(let c=e;c<t;c+=i){const h=n[c],m=n[c+1];o[a++]=r[0]*h+r[2]*m+r[4],o[a++]=r[1]*h+r[3]*m+r[5];for(let v=2;v<s;v++)o[a++]=n[c+v]}return o&&o.length!=a&&(o.length=a),o}function cX(n,e,t,i,r,o,s){s=s||[];const a=Math.cos(r),c=Math.sin(r),h=o[0],m=o[1];let v=0;for(let x=e;x<t;x+=i){const E=n[x]-h,D=n[x+1]-m;s[v++]=h+E*a-D*c,s[v++]=m+E*c+D*a;for(let P=x+2;P<x+i;++P)s[v++]=n[P]}return s&&s.length!=v&&(s.length=v),s}function Bge(n,e,t,i,r,o,s,a){a=a||[];const c=s[0],h=s[1];let m=0;for(let v=e;v<t;v+=i){const x=n[v]-c,E=n[v+1]-h;a[m++]=c+r*x,a[m++]=h+o*E;for(let D=v+2;D<v+i;++D)a[m++]=n[D]}return a&&a.length!=m&&(a.length=m),a}function Oge(n,e,t,i,r,o,s){s=s||[];let a=0;for(let c=e;c<t;c+=i){s[a++]=n[c]+r,s[a++]=n[c+1]+o;for(let h=c+2;h<c+i;++h)s[a++]=n[h]}return s&&s.length!=a&&(s.length=a),s}const lz=Cd(),Ige=[NaN,NaN];class AX extends Bm{constructor(){super(),this.extent_=ap(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=jZ((e,t,i)=>{if(!i)return this.getSimplifiedGeometry(t);const r=this.clone();return r.applyTransform(i),r.getSimplifiedGeometry(t)})}simplifyTransformed(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}clone(){return Tr()}closestPointXY(e,t,i,r){return Tr()}containsXY(e,t){return this.closestPointXY(e,t,Ige,Number.MIN_VALUE)===0}getClosestPoint(e,t){return t=t||[NaN,NaN],this.closestPointXY(e[0],e[1],t,1/0),t}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return Tr()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&Fx(t),this.extentRevision_=this.getRevision()}return Pme(this.extent_,e)}rotate(e,t){Tr()}scale(e,t,i){Tr()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return Tr()}getType(){return Tr()}applyTransform(e){Tr()}intersectsExtent(e){return Tr()}translate(e,t){Tr()}transform(e,t){const i=Ns(e),r=i.getUnits()=="tile-pixels"?function(o,s,a){const c=i.getExtent(),h=i.getWorldExtent(),m=Ju(h)/Ju(c);s0(lz,h[0],h[3],m,-m,0,0,0);const v=Xy(o,0,o.length,a,lz,s),x=X3(i,t);return x?x(v,v,a):v}:X3(i,t);return this.applyTransform(r),this}}class sC extends AX{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return XD(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return Tr()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,t){this.stride=uz(e),this.layout=e,this.flatCoordinates=t}setCoordinates(e,t){Tr()}setLayout(e,t,i){let r;if(e)r=uz(e);else{for(let o=0;o<i;++o){if(t.length===0){this.layout="XY",this.stride=2;return}t=t[0]}r=t.length,e=aC(r)}this.layout=e,this.stride=r}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(e,t){const i=this.getFlatCoordinates();if(i){const r=this.getStride();cX(i,0,i.length,r,e,t,i),this.changed()}}scale(e,t,i){t===void 0&&(t=e),i||(i=vf(this.getExtent()));const r=this.getFlatCoordinates();if(r){const o=this.getStride();Bge(r,0,r.length,o,e,t,i,r),this.changed()}}translate(e,t){const i=this.getFlatCoordinates();if(i){const r=this.getStride();Oge(i,0,i.length,r,e,t,i),this.changed()}}}function aC(n){let e;return n==2?e="XY":n==3?e="XYZ":n==4&&(e="XYZM"),e}function uz(n){let e;return n=="XY"?e=2:n=="XYZ"||n=="XYM"?e=3:n=="XYZM"&&(e=4),e}function kge(n,e,t){const i=n.getFlatCoordinates();if(!i)return null;const r=n.getStride();return Xy(i,0,i.length,r,e,t)}function hX(n,e,t,i){let r=0;const o=n[t-i],s=n[t-i+1];let a=0,c=0;for(;e<t;e+=i){const h=n[e]-o,m=n[e+1]-s;r+=c*h-a*m,a=h,c=m}return r/2}function dX(n,e,t,i){let r=0;for(let o=0,s=t.length;o<s;++o){const a=t[o];r+=hX(n,e,a,i),e=a}return r}function Tge(n,e,t,i){let r=0;for(let o=0,s=t.length;o<s;++o){const a=t[o];r+=dX(n,e,a,i),e=a[a.length-1]}return r}function cz(n,e,t,i,r,o,s){const a=n[e],c=n[e+1],h=n[t]-a,m=n[t+1]-c;let v;if(h===0&&m===0)v=e;else{const x=((r-a)*h+(o-c)*m)/(h*h+m*m);if(x>1)v=t;else if(x>0){for(let E=0;E<i;++E)s[E]=af(n[e+E],n[t+E],x);s.length=i;return}else v=e}for(let x=0;x<i;++x)s[x]=n[v+x];s.length=i}function lP(n,e,t,i,r){let o=n[e],s=n[e+1];for(e+=i;e<t;e+=i){const a=n[e],c=n[e+1],h=Pb(o,s,a,c);h>r&&(r=h),o=a,s=c}return r}function uP(n,e,t,i,r){for(let o=0,s=t.length;o<s;++o){const a=t[o];r=lP(n,e,a,i,r),e=a}return r}function Rge(n,e,t,i,r){for(let o=0,s=t.length;o<s;++o){const a=t[o];r=uP(n,e,a,i,r),e=a[a.length-1]}return r}function cP(n,e,t,i,r,o,s,a,c,h,m){if(e==t)return h;let v,x;if(r===0){if(x=Pb(s,a,n[e],n[e+1]),x<h){for(v=0;v<i;++v)c[v]=n[e+v];return c.length=i,x}return h}m=m||[NaN,NaN];let E=e+i;for(;E<t;)if(cz(n,E-i,E,i,s,a,m),x=Pb(s,a,m[0],m[1]),x<h){for(h=x,v=0;v<i;++v)c[v]=m[v];c.length=i,E+=i}else E+=i*Math.max((Math.sqrt(x)-Math.sqrt(h))/r|0,1);if(o&&(cz(n,t-i,e,i,s,a,m),x=Pb(s,a,m[0],m[1]),x<h)){for(h=x,v=0;v<i;++v)c[v]=m[v];c.length=i}return h}function AP(n,e,t,i,r,o,s,a,c,h,m){m=m||[NaN,NaN];for(let v=0,x=t.length;v<x;++v){const E=t[v];h=cP(n,e,E,i,r,o,s,a,c,h,m),e=E}return h}function Dge(n,e,t,i,r,o,s,a,c,h,m){m=m||[NaN,NaN];for(let v=0,x=t.length;v<x;++v){const E=t[v];h=AP(n,e,E,i,r,o,s,a,c,h,m),e=E[E.length-1]}return h}function Pge(n,e,t,i){for(let r=0,o=t.length;r<o;++r)n[e++]=t[r];return e}function HE(n,e,t,i){for(let r=0,o=t.length;r<o;++r){const s=t[r];for(let a=0;a<i;++a)n[e++]=s[a]}return e}function lM(n,e,t,i,r){r=r||[];let o=0;for(let s=0,a=t.length;s<a;++s){const c=HE(n,e,t[s],i);r[o++]=c,e=c}return r.length=o,r}function fX(n,e,t,i,r){r=r||[];let o=0;for(let s=0,a=t.length;s<a;++s){const c=lM(n,e,t[s],i,r[o]);c.length===0&&(c[0]=e),r[o++]=c,e=c[c.length-1]}return r.length=o,r}function Ly(n,e,t,i,r){r=r!==void 0?r:[];let o=0;for(let s=e;s<t;s+=i)r[o++]=n.slice(s,s+i);return r.length=o,r}function J3(n,e,t,i,r){r=r!==void 0?r:[];let o=0;for(let s=0,a=t.length;s<a;++s){const c=t[s];r[o++]=Ly(n,e,c,i,r[o]),e=c}return r.length=o,r}function u9(n,e,t,i,r){r=r!==void 0?r:[];let o=0;for(let s=0,a=t.length;s<a;++s){const c=t[s];r[o++]=c.length===1&&c[0]===e?[]:J3(n,e,c,i,r[o]),e=c[c.length-1]}return r.length=o,r}function ZE(n,e,t,i,r,o,s){const a=(t-e)/i;if(a<3){for(;e<t;e+=i)o[s++]=n[e],o[s++]=n[e+1];return s}const c=new Array(a);c[0]=1,c[a-1]=1;const h=[e,t-i];let m=0;for(;h.length>0;){const v=h.pop(),x=h.pop();let E=0;const D=n[x],P=n[x+1],F=n[v],W=n[v+1];for(let q=x+i;q<v;q+=i){const V=n[q],H=n[q+1],X=Ome(V,H,D,P,F,W);X>E&&(m=q,E=X)}E>r&&(c[(m-e)/i]=1,x+i<m&&h.push(x,m),m+i<v&&h.push(m,v))}for(let v=0;v<a;++v)c[v]&&(o[s++]=n[e+v*i],o[s++]=n[e+v*i+1]);return s}function pX(n,e,t,i,r,o,s,a){for(let c=0,h=t.length;c<h;++c){const m=t[c];s=ZE(n,e,m,i,r,o,s),a.push(s),e=m}return s}function cb(n,e){return e*Math.round(n/e)}function Uge(n,e,t,i,r,o,s){if(e==t)return s;let a=cb(n[e],r),c=cb(n[e+1],r);e+=i,o[s++]=a,o[s++]=c;let h,m;do if(h=cb(n[e],r),m=cb(n[e+1],r),e+=i,e==t)return o[s++]=h,o[s++]=m,s;while(h==a&&m==c);for(;e<t;){const v=cb(n[e],r),x=cb(n[e+1],r);if(e+=i,v==h&&x==m)continue;const E=h-a,D=m-c,P=v-a,F=x-c;if(E*F==D*P&&(E<0&&P<E||E==P||E>0&&P>E)&&(D<0&&F<D||D==F||D>0&&F>D)){h=v,m=x;continue}o[s++]=h,o[s++]=m,a=h,c=m,h=v,m=x}return o[s++]=h,o[s++]=m,s}function hP(n,e,t,i,r,o,s,a){for(let c=0,h=t.length;c<h;++c){const m=t[c];s=Uge(n,e,m,i,r,o,s),a.push(s),e=m}return s}function Kge(n,e,t,i,r,o,s,a){for(let c=0,h=t.length;c<h;++c){const m=t[c],v=[];s=hP(n,e,m,i,r,o,s,v),a.push(v),e=m[m.length-1]}return s}class e4 extends sC{constructor(e,t){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}clone(){return new e4(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,i,r){return r<rC(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(lP(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),cP(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,i,r))}getArea(){return hX(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return Ly(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const t=[];return t.length=ZE(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new e4(t,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=HE(this.flatCoordinates,0,e,this.stride),this.changed()}}class Yb extends sC{constructor(e,t){super(),this.setCoordinates(e,t)}clone(){const e=new Yb(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,r){const o=this.flatCoordinates,s=Pb(e,t,o[0],o[1]);if(s<r){const a=this.stride;for(let c=0;c<a;++c)i[c]=o[c];return i.length=a,s}return r}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return qZ(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return ZD(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,t){this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Pge(this.flatCoordinates,0,e,this.stride),this.changed()}}function Lge(n,e,t,i,r){return!HZ(r,function(s){return!Cb(n,e,t,i,s[0],s[1])})}function Cb(n,e,t,i,r,o){let s=0,a=n[t-i],c=n[t-i+1];for(;e<t;e+=i){const h=n[e],m=n[e+1];c<=o?m>o&&(h-a)*(o-c)-(r-a)*(m-c)>0&&s++:m<=o&&(h-a)*(o-c)-(r-a)*(m-c)<0&&s--,a=h,c=m}return s!==0}function dP(n,e,t,i,r,o){if(t.length===0||!Cb(n,e,t[0],i,r,o))return!1;for(let s=1,a=t.length;s<a;++s)if(Cb(n,t[s-1],t[s],i,r,o))return!1;return!0}function Fge(n,e,t,i,r,o){if(t.length===0)return!1;for(let s=0,a=t.length;s<a;++s){const c=t[s];if(dP(n,e,c,i,r,o))return!0;e=c[c.length-1]}return!1}function fP(n,e,t,i,r,o,s){let a,c,h,m,v,x,E;const D=r[o+1],P=[];for(let q=0,V=t.length;q<V;++q){const H=t[q];for(m=n[H-i],x=n[H-i+1],a=e;a<H;a+=i)v=n[a],E=n[a+1],(D<=x&&E<=D||x<=D&&D<=E)&&(h=(D-x)/(E-x)*(v-m)+m,P.push(h)),m=v,x=E}let F=NaN,W=-1/0;for(P.sort(n0),m=P[0],a=1,c=P.length;a<c;++a){v=P[a];const q=Math.abs(v-m);q>W&&(h=(m+v)/2,dP(n,e,t,i,h,D)&&(F=h,W=q)),m=v}return isNaN(F)&&(F=r[o]),s?(s.push(F,D,W),s):[F,D,W]}function mX(n,e,t,i,r){let o=[];for(let s=0,a=t.length;s<a;++s){const c=t[s];o=fP(n,e,c,i,r,2*s,o),e=c[c.length-1]}return o}function gX(n,e,t,i,r){let o;for(e+=i;e<t;e+=i)if(o=r(n.slice(e-i,e),n.slice(e,e+i)),o)return o;return!1}function XE(n,e,t,i,r,o){return o=o??$Z(ap(),n,e,t,i),tu(r,o)?o[0]>=r[0]&&o[2]<=r[2]||o[1]>=r[1]&&o[3]<=r[3]?!0:gX(n,e,t,i,function(s,a){return Ume(r,s,a)}):!1}function zge(n,e,t,i,r){for(let o=0,s=t.length;o<s;++o){if(XE(n,e,t[o],i,r))return!0;e=t[o]}return!1}function yX(n,e,t,i,r){return!!(XE(n,e,t,i,r)||Cb(n,e,t,i,r[0],r[1])||Cb(n,e,t,i,r[0],r[3])||Cb(n,e,t,i,r[2],r[1])||Cb(n,e,t,i,r[2],r[3]))}function vX(n,e,t,i,r){if(!yX(n,e,t[0],i,r))return!1;if(t.length===1)return!0;for(let o=1,s=t.length;o<s;++o)if(Lge(n,t[o-1],t[o],i,r)&&!XE(n,t[o-1],t[o],i,r))return!1;return!0}function jge(n,e,t,i,r){for(let o=0,s=t.length;o<s;++o){const a=t[o];if(vX(n,e,a,i,r))return!0;e=a[a.length-1]}return!1}function Nge(n,e,t,i){for(;e<t-i;){for(let r=0;r<i;++r){const o=n[e+r];n[e+r]=n[t-i+r],n[t-i+r]=o}e+=i,t-=i}}function pP(n,e,t,i){let r=0,o=n[t-i],s=n[t-i+1];for(;e<t;e+=i){const a=n[e],c=n[e+1];r+=(a-o)*(c+s),o=a,s=c}return r===0?void 0:r>0}function mP(n,e,t,i,r){r=r!==void 0?r:!1;for(let o=0,s=t.length;o<s;++o){const a=t[o],c=pP(n,e,a,i);if(o===0){if(r&&c||!r&&!c)return!1}else if(r&&!c||!r&&c)return!1;e=a}return!0}function bX(n,e,t,i,r){for(let o=0,s=t.length;o<s;++o){const a=t[o];if(!mP(n,e,a,i,r))return!1;a.length&&(e=a[a.length-1])}return!0}function sS(n,e,t,i,r){r=r!==void 0?r:!1;for(let o=0,s=t.length;o<s;++o){const a=t[o],c=pP(n,e,a,i);(o===0?r&&c||!r&&!c:r&&!c||!r&&c)&&Nge(n,e,a,i),e=a}return e}function c9(n,e,t,i,r){for(let o=0,s=t.length;o<s;++o)e=sS(n,e,t[o],i,r);return e}function CX(n,e){const t=[];let i=0,r=0,o;for(let s=0,a=e.length;s<a;++s){const c=e[s],h=pP(n,i,c,2);if(o===void 0&&(o=h),h===o)t.push(e.slice(r,s+1));else{if(t.length===0)continue;t[t.length-1].push(e[r])}r=s+1,i=c}return t}class g1 extends sC{constructor(e,t,i){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,t!==void 0&&i?(this.setFlatCoordinates(t,e),this.ends_=i):this.setCoordinates(e,t)}appendLinearRing(e){this.flatCoordinates?i0(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new g1(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,i,r){return r<rC(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(uP(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),AP(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,i,r))}containsXY(e,t){return dP(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}getArea(){return dX(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),sS(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,J3(t,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=vf(this.getExtent());this.flatInteriorPoint_=fP(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Yb(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new e4(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,t=this.flatCoordinates,i=this.ends_,r=[];let o=0;for(let s=0,a=i.length;s<a;++s){const c=i[s],h=new e4(t.slice(o,c),e);r.push(h),o=c}return r}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;mP(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=sS(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=hP(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,i),new g1(t,"XY",i)}getType(){return"Polygon"}intersectsExtent(e){return vX(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=lM(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}function Az(n){if(oC(n))throw new Error("Cannot create polygon from empty extent");const e=n[0],t=n[1],i=n[2],r=n[3],o=[e,t,e,r,i,r,i,t,e,t];return new g1(o,"XY",[o.length])}function gP(n,e,t,i){const r=ns(e)/t[0],o=Ju(e)/t[1];return i?Math.min(n,Math.max(r,o)):Math.min(n,Math.min(r,o))}function yP(n,e,t){let i=Math.min(n,e);const r=50;return i*=Math.log(1+r*Math.max(0,n/e-1))/r+1,t&&(i=Math.max(i,t),i/=Math.log(1+r*Math.max(0,t/n-1))/r+1),Ul(i,t/2,e*2)}function Gge(n,e,t,i){return e=e!==void 0?e:!0,(function(r,o,s,a){if(r!==void 0){const c=n[0],h=n[n.length-1],m=t?gP(c,t,s,i):c;if(a)return e?yP(r,m,h):Ul(r,h,m);const v=Math.min(m,r),x=Math.floor(zE(n,v,o));return n[x]>m&&x<n.length-1?n[x+1]:n[x]}})}function Wge(n,e,t,i,r,o){return i=i!==void 0?i:!0,t=t!==void 0?t:0,(function(s,a,c,h){if(s!==void 0){const m=r?gP(e,r,c,o):e;if(h)return i?yP(s,m,t):Ul(s,t,m);const v=1e-9,x=Math.ceil(Math.log(e/m)/Math.log(n)-v),E=-a*(.5-v)+.5,D=Math.min(m,s),P=Math.floor(Math.log(e/D)/Math.log(n)+E),F=Math.max(x,P),W=e/Math.pow(n,F);return Ul(W,t,m)}})}function hz(n,e,t,i,r){return t=t!==void 0?t:!0,(function(o,s,a,c){if(o!==void 0){const h=i?gP(n,i,a,r):n;return!t||!c?Ul(o,e,h):yP(o,h,e)}})}function vP(n){if(n!==void 0)return 0}function dz(n){if(n!==void 0)return n}function Qge(n){const e=2*Math.PI/n;return(function(t,i){if(i)return t;if(t!==void 0)return t=Math.floor(t/e+.5)*e,t})}function Yge(n){const e=$y(5);return(function(t,i){return i||t===void 0?t:Math.abs(t)<=e?0:t})}const _X=42,bP=256,ZB=0;class hm extends Bm{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=rP(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&aX(),e.center&&(e.center=e1(e.center,this.projection_)),e.extent&&(e.extent=Qg(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const t=Object.assign({},e);for(const a in rm)delete t[a];this.setProperties(t,!0);const i=Vge(e);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=i.minZoom;const r=qge(e),o=i.constraint,s=$ge(e);this.constraints_={center:r,resolution:o,rotation:s},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let t=this.padding_;this.padding_=e;const i=this.getCenterInternal();if(i){const r=e||[0,0,0,0];t=t||[0,0,0,0];const o=this.getResolution(),s=o/2*(r[3]-t[3]+t[1]-r[1]),a=o/2*(r[0]-t[0]+t[2]-r[2]);this.setCenterInternal([i[0]+s,i[1]-a])}}getUpdatedOptions_(e){const t=this.getProperties();return t.resolution!==void 0?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object.assign({},t,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const t=new Array(arguments.length);for(let i=0;i<t.length;++i){let r=arguments[i];r.center&&(r=Object.assign({},r),r.center=e1(r.center,this.getProjection())),r.anchor&&(r=Object.assign({},r),r.anchor=e1(r.anchor,this.getProjection())),t[i]=r}this.animateInternal.apply(this,t)}animateInternal(e){let t=arguments.length,i;t>1&&typeof arguments[t-1]=="function"&&(i=arguments[t-1],--t);let r=0;for(;r<t&&!this.isDef();++r){const m=arguments[r];m.center&&this.setCenterInternal(m.center),m.zoom!==void 0?this.setZoom(m.zoom):m.resolution&&this.setResolution(m.resolution),m.rotation!==void 0&&this.setRotation(m.rotation)}if(r===t){i&&t5(i,!0);return}let o=Date.now(),s=this.targetCenter_.slice(),a=this.targetResolution_,c=this.targetRotation_;const h=[];for(;r<t;++r){const m=arguments[r],v={start:o,complete:!1,anchor:m.anchor,duration:m.duration!==void 0?m.duration:1e3,easing:m.easing||Gme,callback:i};if(m.center&&(v.sourceCenter=s,v.targetCenter=m.center.slice(),s=v.targetCenter),m.zoom!==void 0?(v.sourceResolution=a,v.targetResolution=this.getResolutionForZoom(m.zoom),a=v.targetResolution):m.resolution&&(v.sourceResolution=a,v.targetResolution=m.resolution,a=v.targetResolution),m.rotation!==void 0){v.sourceRotation=c;const x=Ub(m.rotation-c+Math.PI,2*Math.PI)-Math.PI;v.targetRotation=c+x,c=v.targetRotation}Hge(v)?v.complete=!0:o+=v.duration,h.push(v)}this.animations_.push(h),this.setHint(Cl.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[Cl.ANIMATING]>0}getInteracting(){return this.hints_[Cl.INTERACTING]>0}cancelAnimations(){this.setHint(Cl.ANIMATING,-this.hints_[Cl.ANIMATING]);let e;for(let t=0,i=this.animations_.length;t<i;++t){const r=this.animations_[t];if(r[0].callback&&t5(r[0].callback,!1),!e)for(let o=0,s=r.length;o<s;++o){const a=r[o];if(!a.complete){e=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let t=!1;for(let i=this.animations_.length-1;i>=0;--i){const r=this.animations_[i];let o=!0;for(let s=0,a=r.length;s<a;++s){const c=r[s];if(c.complete)continue;const h=e-c.start;let m=c.duration>0?h/c.duration:1;m>=1?(c.complete=!0,m=1):o=!1;const v=c.easing(m);if(c.sourceCenter){const x=c.sourceCenter[0],E=c.sourceCenter[1],D=c.targetCenter[0],P=c.targetCenter[1];this.nextCenter_=c.targetCenter;const F=x+v*(D-x),W=E+v*(P-E);this.targetCenter_=[F,W]}if(c.sourceResolution&&c.targetResolution){const x=v===1?c.targetResolution:c.sourceResolution+v*(c.targetResolution-c.sourceResolution);if(c.anchor){const E=this.getViewportSize_(this.getRotation()),D=this.constraints_.resolution(x,0,E,!0);this.targetCenter_=this.calculateCenterZoom(D,c.anchor)}this.nextResolution_=c.targetResolution,this.targetResolution_=x,this.applyTargetState_(!0)}if(c.sourceRotation!==void 0&&c.targetRotation!==void 0){const x=v===1?Ub(c.targetRotation+Math.PI,2*Math.PI)-Math.PI:c.sourceRotation+v*(c.targetRotation-c.sourceRotation);if(c.anchor){const E=this.constraints_.rotation(x,!0);this.targetCenter_=this.calculateCenterRotate(E,c.anchor)}this.nextRotation_=c.targetRotation,this.targetRotation_=x}if(this.applyTargetState_(!0),t=!0,!c.complete)break}if(o){this.animations_[i]=null,this.setHint(Cl.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const s=r[0].callback;s&&t5(s,!0)}}this.animations_=this.animations_.filter(Boolean),t&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,t){let i;const r=this.getCenterInternal();return r!==void 0&&(i=[r[0]-t[0],r[1]-t[1]],JD(i,e-this.getRotation()),Lme(i,t)),i}calculateCenterZoom(e,t){let i;const r=this.getCenterInternal(),o=this.getResolution();if(r!==void 0&&o!==void 0){const s=t[0]-e*(t[0]-r[0])/o,a=t[1]-e*(t[1]-r[1])/o;i=[s,a]}return i}getViewportSize_(e){const t=this.viewportSize_;if(e){const i=t[0],r=t[1];return[Math.abs(i*Math.cos(e))+Math.abs(r*Math.sin(e)),Math.abs(i*Math.sin(e))+Math.abs(r*Math.cos(e))]}return t}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&l9(e,this.getProjection())}getCenterInternal(){return this.get(rm.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const t=this.calculateExtentInternal(e);return oP(t,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const t=this.getCenterInternal();ws(t,"The view center is not defined");const i=this.getResolution();ws(i!==void 0,"The view resolution is not defined");const r=this.getRotation();return ws(r!==void 0,"The view rotation is not defined"),nS(t,i,r,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(rm.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,t){return this.getResolutionForExtentInternal(Qg(e,this.getProjection()),t)}getResolutionForExtentInternal(e,t){t=t||this.getViewportSizeMinusPadding_();const i=ns(e)/t[0],r=Ju(e)/t[1];return Math.max(i,r)}getResolutionForValueFunction(e){e=e||2;const t=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,r=Math.log(t/i)/Math.log(e);return(function(o){return t/Math.pow(e,o*r)})}getRotation(){return this.get(rm.ROTATION)}getValueForResolutionFunction(e){const t=Math.log(e||2),i=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,o=Math.log(i/r)/t;return(function(s){return Math.log(i/s)/t/o})}getViewportSizeMinusPadding_(e){let t=this.getViewportSize_(e);const i=this.padding_;return i&&(t=[t[0]-i[1]-i[3],t[1]-i[0]-i[2]]),t}getState(){const e=this.getProjection(),t=this.getResolution(),i=this.getRotation();let r=this.getCenterInternal();const o=this.padding_;if(o){const s=this.getViewportSizeMinusPadding_();r=XB(r,this.getViewportSize_(),[s[0]/2+o[3],s[1]/2+o[0]],t,i)}return{center:r.slice(0),projection:e!==void 0?e:null,resolution:t,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:i,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const t=this.getResolution();return t!==void 0&&(e=this.getZoomForResolution(t)),e}getZoomForResolution(e){let t=this.minZoom_||0,i,r;if(this.resolutions_){const o=zE(this.resolutions_,e,1);t=o,i=this.resolutions_[o],o==this.resolutions_.length-1?r=2:r=i/this.resolutions_[o+1]}else i=this.maxResolution_,r=this.zoomFactor_;return t+Math.log(i/e)/Math.log(r)}getResolutionForZoom(e){if(this.resolutions_?.length){if(this.resolutions_.length===1)return this.resolutions_[0];const t=Ul(Math.floor(e),0,this.resolutions_.length-2),i=this.resolutions_[t]/this.resolutions_[t+1];return this.resolutions_[t]/Math.pow(i,Ul(e-t,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,t){let i;if(ws(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(e)){ws(!oC(e),"Cannot fit empty extent provided as `geometry`");const r=Qg(e,this.getProjection());i=Az(r)}else if(e.getType()==="Circle"){const r=Qg(e.getExtent(),this.getProjection());i=Az(r),i.rotate(this.getRotation(),vf(r))}else i=e;this.fitInternal(i,t)}rotatedExtentForGeometry(e){const t=this.getRotation(),i=Math.cos(t),r=Math.sin(-t),o=e.getFlatCoordinates(),s=e.getStride();let a=1/0,c=1/0,h=-1/0,m=-1/0;for(let v=0,x=o.length;v<x;v+=s){const E=o[v]*i-o[v+1]*r,D=o[v]*r+o[v+1]*i;a=Math.min(a,E),c=Math.min(c,D),h=Math.max(h,E),m=Math.max(m,D)}return[a,c,h,m]}fitInternal(e,t){t=t||{};let i=t.size;i||(i=this.getViewportSizeMinusPadding_());const r=t.padding!==void 0?t.padding:[0,0,0,0],o=t.nearest!==void 0?t.nearest:!1;let s;t.minResolution!==void 0?s=t.minResolution:t.maxZoom!==void 0?s=this.getResolutionForZoom(t.maxZoom):s=0;const a=this.rotatedExtentForGeometry(e);let c=this.getResolutionForExtentInternal(a,[i[0]-r[1]-r[3],i[1]-r[0]-r[2]]);c=isNaN(c)?s:Math.max(c,s),c=this.getConstrainedResolution(c,o?0:1);const h=this.getRotation(),m=Math.sin(h),v=Math.cos(h),x=vf(a);x[0]+=(r[1]-r[3])/2*c,x[1]+=(r[0]-r[2])/2*c;const E=x[0]*v-x[1]*m,D=x[1]*v+x[0]*m,P=this.getConstrainedCenter([E,D],c),F=t.callback?t.callback:H3;t.duration!==void 0?this.animateInternal({resolution:c,center:P,duration:t.duration,easing:t.easing},F):(this.targetResolution_=c,this.targetCenter_=P,this.applyTargetState_(!1,!0),t5(F,!0))}centerOn(e,t,i){this.centerOnInternal(e1(e,this.getProjection()),t,i)}centerOnInternal(e,t,i){this.setCenterInternal(XB(e,t,i,this.getResolution(),this.getRotation()))}calculateCenterShift(e,t,i,r){let o;const s=this.padding_;if(s&&e){const a=this.getViewportSizeMinusPadding_(-i),c=XB(e,r,[a[0]/2+s[3],a[1]/2+s[0]],t,i);o=[e[0]-c[0],e[1]-c[1]]}return o}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const t=l9(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}adjustCenterInternal(e){const t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}adjustResolution(e,t){t=t&&e1(t,this.getProjection()),this.adjustResolutionInternal(e,t)}adjustResolutionInternal(e,t){const i=this.getAnimating()||this.getInteracting(),r=this.getViewportSize_(this.getRotation()),o=this.constraints_.resolution(this.targetResolution_*e,0,r,i);t&&(this.targetCenter_=this.calculateCenterZoom(o,t)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,t){this.adjustResolution(Math.pow(this.zoomFactor_,-e),t)}adjustRotation(e,t){t&&(t=e1(t,this.getProjection())),this.adjustRotationInternal(e,t)}adjustRotationInternal(e,t){const i=this.getAnimating()||this.getInteracting(),r=this.constraints_.rotation(this.targetRotation_+e,i);t&&(this.targetCenter_=this.calculateCenterRotate(r,t)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&e1(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,t){const i=this.getAnimating()||this.getInteracting()||t,r=this.constraints_.rotation(this.targetRotation_,i),o=this.getViewportSize_(r),s=this.constraints_.resolution(this.targetResolution_,0,o,i),a=this.constraints_.center(this.targetCenter_,s,o,i,this.calculateCenterShift(this.targetCenter_,s,r,o));this.get(rm.ROTATION)!==r&&this.set(rm.ROTATION,r),this.get(rm.RESOLUTION)!==s&&(this.set(rm.RESOLUTION,s),this.set("zoom",this.getZoom(),!0)),(!a||!this.get(rm.CENTER)||!iS(this.get(rm.CENTER),a))&&this.set(rm.CENTER,a),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,t,i){e=e!==void 0?e:200;const r=t||0,o=this.constraints_.rotation(this.targetRotation_),s=this.getViewportSize_(o),a=this.constraints_.resolution(this.targetResolution_,r,s),c=this.constraints_.center(this.targetCenter_,a,s,!1,this.calculateCenterShift(this.targetCenter_,a,o,s));if(e===0&&!this.cancelAnchor_){this.targetResolution_=a,this.targetRotation_=o,this.targetCenter_=c,this.applyTargetState_();return}i=i||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==a||this.getRotation()!==o||!this.getCenterInternal()||!iS(this.getCenterInternal(),c))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:o,center:c,resolution:a,duration:e,easing:zx,anchor:i}))}beginInteraction(){this.resolveConstraints(0),this.setHint(Cl.INTERACTING,1)}endInteraction(e,t,i){i=i&&e1(i,this.getProjection()),this.endInteractionInternal(e,t,i)}endInteractionInternal(e,t,i){this.getInteracting()&&(this.setHint(Cl.INTERACTING,-1),this.resolveConstraints(e,t,i))}getConstrainedCenter(e,t){const i=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),i)}getConstrainedZoom(e,t){const i=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(i,t))}getConstrainedResolution(e,t){t=t||0;const i=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,t,i)}}function t5(n,e){setTimeout(function(){n(e)},0)}function qge(n){if(n.extent!==void 0){const t=n.smoothExtentConstraint!==void 0?n.smoothExtentConstraint:!0;return HF(n.extent,n.constrainOnlyCenter,t)}const e=rP(n.projection,"EPSG:3857");if(n.multiWorld!==!0&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,HF(t,!1,!1)}return kme}function Vge(n){let e,t,i,s=n.minZoom!==void 0?n.minZoom:ZB,a=n.maxZoom!==void 0?n.maxZoom:28;const c=n.zoomFactor!==void 0?n.zoomFactor:2,h=n.multiWorld!==void 0?n.multiWorld:!1,m=n.smoothResolutionConstraint!==void 0?n.smoothResolutionConstraint:!0,v=n.showFullExtent!==void 0?n.showFullExtent:!1,x=rP(n.projection,"EPSG:3857"),E=x.getExtent();let D=n.constrainOnlyCenter,P=n.extent;if(!h&&!P&&x.isGlobal()&&(D=!1,P=E),n.resolutions!==void 0){const F=n.resolutions;t=F[s],i=F[a]!==void 0?F[a]:F[F.length-1],n.constrainResolution?e=Gge(F,m,!D&&P,v):e=hz(t,i,m,!D&&P,v)}else{const W=(E?Math.max(ns(E),Ju(E)):360*nv.degrees/x.getMetersPerUnit())/bP/Math.pow(2,ZB),q=W/Math.pow(2,28-ZB);t=n.maxResolution,t!==void 0?s=0:t=W/Math.pow(c,s),i=n.minResolution,i===void 0&&(n.maxZoom!==void 0?n.maxResolution!==void 0?i=t/Math.pow(c,a):i=W/Math.pow(c,a):i=q),a=s+Math.floor(Math.log(t/i)/Math.log(c)),i=t/Math.pow(c,a-s),n.constrainResolution?e=Wge(c,t,i,m,!D&&P,v):e=hz(t,i,m,!D&&P,v)}return{constraint:e,maxResolution:t,minResolution:i,minZoom:s,zoomFactor:c}}function $ge(n){if(n.enableRotation!==void 0?n.enableRotation:!0){const t=n.constrainRotation;return t===void 0||t===!0?Yge():t===!1?dz:typeof t=="number"?Qge(t):dz}return vP}function Hge(n){return!(n.sourceCenter&&n.targetCenter&&!iS(n.sourceCenter,n.targetCenter)||n.sourceResolution!==n.targetResolution||n.sourceRotation!==n.targetRotation)}function XB(n,e,t,i,r){const o=Math.cos(-r);let s=Math.sin(-r),a=n[0]*o-n[1]*s,c=n[1]*o+n[0]*s;a+=(e[0]/2-t[0])*i,c+=(t[1]-e[1]/2)*i,s=-s;const h=a*o-c*s,m=c*o+a*s;return[h,m]}const n5="ol-hidden",Zge="ol-selectable",JE="ol-unselectable",CP="ol-control",fz="ol-collapsed",Xge=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z0-9]+?)\\s*$`].join(""),"i"),pz=["style","variant","weight","size","lineHeight","family"],A9={normal:400,bold:700},h9=function(n){const e=n.match(Xge);if(!e)return null;const t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"400",variant:"normal"};for(let i=0,r=pz.length;i<r;++i){const o=e[i+1];o!==void 0&&(t[pz[i]]=typeof o=="string"?o.trim():o)}return isNaN(Number(t.weight))&&t.weight in A9&&(t.weight=A9[t.weight]),t.families=t.family.split(/,\s?/).map(i=>i.trim().replace(/^['"]|['"]$/g,"")),t};function Kl(n,e,t,i){let r;return t&&t.length?r=t.shift():iC?r=new OffscreenCanvas(n||300,e||300):r=document.createElement("canvas"),n&&(r.width=n),e&&(r.height=e),r.getContext("2d",i)}let JB;function aS(){return JB||(JB=Kl(1,1)),JB}function uM(n){const e=n.canvas;e.width=1,e.height=1,n.clearRect(0,0,1,1)}function Jge(n){let e=n.offsetWidth;const t=getComputedStyle(n);return e+=parseInt(t.marginLeft,10)+parseInt(t.marginRight,10),e}function e0e(n){let e=n.offsetHeight;const t=getComputedStyle(n);return e+=parseInt(t.marginTop,10)+parseInt(t.marginBottom,10),e}function mz(n,e){const t=e.parentNode;t&&t.replaceChild(n,e)}function xX(n){for(;n.lastChild;)n.lastChild.remove()}function t0e(n,e){const t=n.childNodes;for(let i=0;;++i){const r=t[i],o=e[i];if(!r&&!o)break;if(r!==o){if(!r){n.appendChild(o);continue}if(!o){n.removeChild(r),--i;continue}n.insertBefore(o,r)}}}class _P extends Bm{constructor(e){super();const t=e.element;t&&!e.target&&!t.style.pointerEvents&&(t.style.pointerEvents="auto"),this.element=t||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){this.element?.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(e){this.map_&&this.element?.remove();for(let t=0,i=this.listenerKeys.length;t<i;++t)Ba(this.listenerKeys[t]);if(this.listenerKeys.length=0,this.map_=e,e){const t=this.target_??e.getOverlayContainerStopEvent();this.element&&t.appendChild(this.element),this.render!==H3&&this.listenerKeys.push(qo(e,t1.POSTRENDER,this.render,this)),e.render()}}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}class n0e extends _P{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.attributions_=e.attributions;const t=e.className!==void 0?e.className:"ol-attribution",i=e.tipLabel!==void 0?e.tipLabel:"Attributions",r=e.expandClassName!==void 0?e.expandClassName:t+"-expand",o=e.collapseLabel!==void 0?e.collapseLabel:"",s=e.collapseClassName!==void 0?e.collapseClassName:t+"-collapse";typeof o=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=o,this.collapseLabel_.className=s):this.collapseLabel_=o;const a=e.label!==void 0?e.label:"i";typeof a=="string"?(this.label_=document.createElement("span"),this.label_.textContent=a,this.label_.className=r):this.label_=a;const c=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=i,this.toggleButton_.appendChild(c),this.toggleButton_.addEventListener(Er.CLICK,this.handleClick_.bind(this),!1);const h=t+" "+JE+" "+CP+(this.collapsed_&&this.collapsible_?" "+fz:"")+(this.collapsible_?"":" ol-uncollapsible"),m=this.element;m.className=h,m.appendChild(this.toggleButton_),m.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const t=this.getMap().getAllLayers(),i=new Set(t.flatMap(r=>r.getAttributions(e)));if(this.attributions_!==void 0&&(Array.isArray(this.attributions_)?this.attributions_.forEach(r=>i.add(r)):i.add(this.attributions_)),!this.overrideCollapsible_){const r=!t.some(o=>o.getSource()?.getAttributionsCollapsible()===!1);this.setCollapsible(r)}return Array.from(i)}async updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=await Promise.all(this.collectSourceAttributions_(e).map(r=>px(()=>r))),i=t.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!cv(t,this.renderedAttributions_)){xX(this.ulElement_);for(let r=0,o=t.length;r<o;++r){const s=document.createElement("li");s.innerHTML=t[r],this.ulElement_.appendChild(s)}this.renderedAttributions_=t}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(fz),this.collapsed_?mz(this.collapseLabel_,this.label_):mz(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}class i0e extends _P{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const t=e.className!==void 0?e.className:"ol-rotate",i=e.label!==void 0?e.label:"",r=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof i=="string"?(this.label_=document.createElement("span"),this.label_.className=r,this.label_.textContent=i):(this.label_=i,this.label_.classList.add(r));const o=e.tipLabel?e.tipLabel:"Reset rotation",s=document.createElement("button");s.className=t+"-reset",s.setAttribute("type","button"),s.title=o,s.appendChild(this.label_),s.addEventListener(Er.CLICK,this.handleClick_.bind(this),!1);const a=t+" "+JE+" "+CP,c=this.element;c.className=a,c.appendChild(s),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(n5)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const i=t.getRotation();i!==void 0&&(this.duration_>0&&i%(2*Math.PI)!==0?t.animate({rotation:0,duration:this.duration_,easing:zx}):t.setRotation(0))}render(e){const t=e.frameState;if(!t)return;const i=t.viewState.rotation;if(i!=this.rotation_){const r="rotate("+i+"rad)";if(this.autoHide_){const o=this.element.classList.contains(n5);!o&&i===0?this.element.classList.add(n5):o&&i!==0&&this.element.classList.remove(n5)}this.label_.style.transform=r}this.rotation_=i}}class r0e extends _P{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const t=e.className!==void 0?e.className:"ol-zoom",i=e.delta!==void 0?e.delta:1,r=e.zoomInClassName!==void 0?e.zoomInClassName:t+"-in",o=e.zoomOutClassName!==void 0?e.zoomOutClassName:t+"-out",s=e.zoomInLabel!==void 0?e.zoomInLabel:"+",a=e.zoomOutLabel!==void 0?e.zoomOutLabel:"",c=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",h=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",m=document.createElement("button");m.className=r,m.setAttribute("type","button"),m.title=c,m.appendChild(typeof s=="string"?document.createTextNode(s):s),m.addEventListener(Er.CLICK,this.handleClick_.bind(this,i),!1);const v=document.createElement("button");v.className=o,v.setAttribute("type","button"),v.title=h,v.appendChild(typeof a=="string"?document.createTextNode(a):a),v.addEventListener(Er.CLICK,this.handleClick_.bind(this,-i),!1);const x=t+" "+JE+" "+CP,E=this.element;E.className=x,E.appendChild(m),E.appendChild(v),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,t){t.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const i=this.getMap().getView();if(!i)return;const r=i.getZoom();if(r!==void 0){const o=i.getConstrainedZoom(r+e);this.duration_>0?(i.getAnimating()&&i.cancelAnimations(),i.animate({zoom:o,duration:this.duration_,easing:zx})):i.setZoom(o)}}}function o0e(n){n=n||{};const e=new Gg;return(n.zoom!==void 0?n.zoom:!0)&&e.push(new r0e(n.zoomOptions)),(n.rotate!==void 0?n.rotate:!0)&&e.push(new i0e(n.rotateOptions)),(n.attribution!==void 0?n.attribution:!0)&&e.push(new n0e(n.attributionOptions)),e}class s0e{constructor(e,t,i){this.decay_=e,this.minVelocity_=t,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,t){this.points_.push(e,t,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;let i=t-3;for(;i>0&&this.points_[i+2]>e;)i-=3;const r=this.points_[t+2]-this.points_[i+2];if(r<1e3/60)return!1;const o=this.points_[t]-this.points_[i],s=this.points_[t+1]-this.points_[i+1];return this.angle_=Math.atan2(s,o),this.initialVelocity_=Math.sqrt(o*o+s*s)/r,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}const gz={ACTIVE:"active"};class cM extends Bm{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(gz.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(gz.ACTIVE,e)}setMap(e){this.map_=e}}function a0e(n,e,t){const i=n.getCenterInternal();if(i){const r=[i[0]+e[0],i[1]+e[1]];n.animateInternal({duration:t!==void 0?t:250,easing:Wme,center:n.getConstrainedCenter(r)})}}function xP(n,e,t,i){const r=n.getZoom();if(r===void 0)return;const o=n.getConstrainedZoom(r+e),s=n.getResolutionForZoom(o);n.getAnimating()&&n.cancelAnimations(),n.animate({resolution:s,anchor:t,duration:i!==void 0?i:250,easing:zx})}class l0e extends cM{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let t=!1;if(e.type==Jl.DBLCLICK){const i=e.originalEvent,r=e.map,o=e.coordinate,s=i.shiftKey?-this.delta_:this.delta_,a=r.getView();xP(a,s,o,this.duration_),i.preventDefault(),t=!0}return!t}}function d9(n){const e=arguments;return function(t){let i=!0;for(let r=0,o=e.length;r<o&&(i=i&&e[r](t),!!i);++r);return i}}const u0e=function(n){const e=n.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},c0e=function(n){const e=n.map.getTargetElement(),t=e.getRootNode(),i=n.map.getOwnerDocument().activeElement;return t instanceof ShadowRoot?t.host.contains(i):e.contains(i)},MX=function(n){const e=n.map.getTargetElement(),t=e.getRootNode();return(t instanceof ShadowRoot?t.host:e).hasAttribute("tabindex")?c0e(n):!0},A0e=$3,wX=function(n){const e=n.originalEvent;return"pointerId"in e&&e.button==0&&!(xme&&NZ&&e.ctrlKey)},SX=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},h0e=function(n){const e=n.originalEvent;return NZ?e.metaKey:e.ctrlKey},d0e=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},EX=function(n){const e=n.originalEvent,t=e.target.tagName;return t!=="INPUT"&&t!=="SELECT"&&t!=="TEXTAREA"&&!e.target.isContentEditable},eO=function(n){const e=n.originalEvent;return"pointerId"in e&&e.pointerType=="mouse"},f0e=function(n){const e=n.originalEvent;return"pointerId"in e&&e.isPrimary&&e.button===0};class AM extends cM{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==Jl.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==Jl.POINTERUP){const i=this.handleUpEvent(e);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(e.type==Jl.POINTERDOWN){const i=this.handleDownEvent(e);this.handlingDownUpSequence=i,t=this.stopDown(i)}else e.type==Jl.POINTERMOVE&&this.handleMoveEvent(e);return!t}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function MP(n){const e=n.length;let t=0,i=0;for(let r=0;r<e;r++)t+=n[r].clientX,i+=n[r].clientY;return{clientX:t/e,clientY:i/e}}class p0e extends AM{constructor(e){super({stopDown:jE}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const t=e.condition?e.condition:d9(SX,f0e);this.condition_=e.onFocusOnly?d9(MX,t):t,this.noKinetic_=!1}handleDragEvent(e){const t=e.map;this.panning_||(this.panning_=!0,t.getView().beginInteraction());const i=this.targetPointers,r=t.getEventPixel(MP(i));if(i.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(r[0],r[1]),this.lastCentroid){const o=[this.lastCentroid[0]-r[0],r[1]-this.lastCentroid[1]],a=e.map.getView();Fme(o,a.getResolution()),JD(o,a.getRotation()),a.adjustCenterInternal(o)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=r,this.lastPointersCount_=i.length,e.originalEvent.preventDefault()}handleUpEvent(e){const t=e.map,i=t.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const r=this.kinetic_.getDistance(),o=this.kinetic_.getAngle(),s=i.getCenterInternal(),a=t.getPixelFromCoordinateInternal(s),c=t.getCoordinateFromPixelInternal([a[0]-r*Math.cos(o),a[1]-r*Math.sin(o)]);i.animateInternal({center:i.getConstrainedCenter(c),duration:500,easing:zx})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const i=e.map.getView();return this.lastCentroid=null,i.getAnimating()&&i.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class m0e extends AM{constructor(e){e=e||{},super({stopDown:jE}),this.condition_=e.condition?e.condition:u0e,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!eO(e))return;const t=e.map,i=t.getView();if(i.getConstraints().rotation===vP)return;const r=t.getSize(),o=e.pixel,s=Math.atan2(r[1]/2-o[1],o[0]-r[0]/2);if(this.lastAngle_!==void 0){const a=s-this.lastAngle_;i.adjustRotationInternal(-a)}this.lastAngle_=s}handleUpEvent(e){return eO(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return eO(e)&&wX(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class g0e extends nM{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,t=this.endPixel_,i="px",r=this.element_.style;r.left=Math.min(e[0],t[0])+i,r.top=Math.min(e[1],t[1])+i,r.width=Math.abs(t[0]-e[0])+i,r.height=Math.abs(t[1]-e[1])+i}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const e=this.startPixel_,t=this.endPixel_,r=[e,[e[0],t[1]],t,[t[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);r[4]=r[0].slice(),this.geometry_?this.geometry_.setCoordinates([r]):this.geometry_=new g1([r])}getGeometry(){return this.geometry_}}const jC={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class d2 extends Em{constructor(e,t,i){super(e),this.coordinate=t,this.mapBrowserEvent=i}}class y0e extends AM{constructor(e){super(),this.on,this.once,this.un,e=e??{},this.box_=new g0e(e.className||"ol-dragbox"),this.minArea_=e.minArea??64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition??wX,this.boxEndCondition_=e.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(e,t,i){const r=i[0]-t[0],o=i[1]-t[1];return r*r+o*o>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.startPixel_&&(this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new d2(jC.BOXDRAG,e.coordinate,e)))}handleUpEvent(e){if(!this.startPixel_)return!1;const t=this.boxEndCondition_(e,this.startPixel_,e.pixel);return t&&this.onBoxEnd(e),this.dispatchEvent(new d2(t?jC.BOXEND:jC.BOXCANCEL,e.coordinate,e)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new d2(jC.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}setActive(e){e||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new d2(jC.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(e)}setMap(e){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new d2(jC.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setMap(e)}}class v0e extends y0e{constructor(e){e=e||{};const t=e.condition?e.condition:d0e;super({condition:t,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const i=this.getMap().getView();let r=this.getGeometry();if(this.out_){const o=i.rotatedExtentForGeometry(r),s=i.getResolutionForExtentInternal(o),a=i.getResolution()/s;r=r.clone(),r.scale(a*a)}i.fitInternal(r,{duration:this.duration_,easing:zx})}}const ob={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class b0e extends cM{constructor(e){super(),e=e||{},this.defaultCondition_=function(t){return SX(t)&&EX(t)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let t=!1;if(e.type==Er.KEYDOWN){const i=e.originalEvent,r=i.key;if(this.condition_(e)&&(r==ob.DOWN||r==ob.LEFT||r==ob.RIGHT||r==ob.UP)){const s=e.map.getView(),a=s.getResolution()*this.pixelDelta_;let c=0,h=0;r==ob.DOWN?h=-a:r==ob.LEFT?c=-a:r==ob.RIGHT?c=a:h=a;const m=[c,h];JD(m,s.getRotation()),a0e(s,m,this.duration_),i.preventDefault(),t=!0}}return!t}}class C0e extends cM{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(t){return!h0e(t)&&EX(t)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let t=!1;if(e.type==Er.KEYDOWN||e.type==Er.KEYPRESS){const i=e.originalEvent,r=i.key;if(this.condition_(e)&&(r==="+"||r==="-")){const o=e.map,s=r==="+"?this.delta_:-this.delta_,a=o.getView();xP(a,s,void 0,this.duration_),i.preventDefault(),t=!0}}return!t}}const _0e=40,x0e=300;class M0e extends cM{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const t=e.condition?e.condition:A0e;this.condition_=e.onFocusOnly?d9(MX,t):t,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(e){if(!this.condition_(e)||e.type!==Er.WHEEL)return!0;const i=e.map,r=e.originalEvent;r.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.pixel);let o=r.deltaY;switch(r.deltaMode){case WheelEvent.DOM_DELTA_LINE:o*=_0e;break;case WheelEvent.DOM_DELTA_PAGE:o*=x0e;break}if(o===0)return!1;this.lastDelta_=o;const s=Date.now();this.startTime_===void 0&&(this.startTime_=s),(!this.mode_||s-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(o)<4?"trackpad":"wheel");const a=i.getView();if(this.mode_==="trackpad"&&!(a.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(a.getAnimating()&&a.cancelAnimations(),a.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),a.adjustZoom(-o/this.deltaPerZoom_,this.lastAnchor_?i.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=s,!1;this.totalDelta_+=o;const c=Math.max(this.timeout_-(s-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,i),c),!1}handleWheelZoom_(e){const t=e.getView();t.getAnimating()&&t.cancelAnimations();let i=-Ul(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(t.getConstrainResolution()||this.constrainResolution_)&&(i=i?i>0?1:-1:0),xP(t,i,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}class w0e extends AM{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=jE),super(t),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let t=0;const i=this.targetPointers[0],r=this.targetPointers[1],o=Math.atan2(r.clientY-i.clientY,r.clientX-i.clientX);if(this.lastAngle_!==void 0){const c=o-this.lastAngle_;this.rotationDelta_+=c,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=c}this.lastAngle_=o;const s=e.map,a=s.getView();a.getConstraints().rotation!==vP&&(this.anchor_=s.getCoordinateFromPixelInternal(s.getEventPixel(MP(this.targetPointers))),this.rotating_&&(s.render(),a.adjustRotationInternal(t,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}class S0e extends AM{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=jE),super(t),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let t=1;const i=this.targetPointers[0],r=this.targetPointers[1],o=i.clientX-r.clientX,s=i.clientY-r.clientY,a=Math.sqrt(o*o+s*s);this.lastDistance_!==void 0&&(t=this.lastDistance_/a),this.lastDistance_=a;const c=e.map,h=c.getView();t!=1&&(this.lastScaleDelta_=t),this.anchor_=c.getCoordinateFromPixelInternal(c.getEventPixel(MP(this.targetPointers))),c.render(),h.adjustResolutionInternal(t,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const i=e.map.getView(),r=this.lastScaleDelta_>1?1:-1;return i.endInteraction(this.duration_,r),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}function E0e(n){n=n||{};const e=new Gg,t=new s0e(-.005,.05,100);return(n.altShiftDragRotate!==void 0?n.altShiftDragRotate:!0)&&e.push(new m0e),(n.doubleClickZoom!==void 0?n.doubleClickZoom:!0)&&e.push(new l0e({delta:n.zoomDelta,duration:n.zoomDuration})),(n.dragPan!==void 0?n.dragPan:!0)&&e.push(new p0e({onFocusOnly:n.onFocusOnly,kinetic:t})),(n.pinchRotate!==void 0?n.pinchRotate:!0)&&e.push(new w0e),(n.pinchZoom!==void 0?n.pinchZoom:!0)&&e.push(new S0e({duration:n.zoomDuration})),(n.keyboard!==void 0?n.keyboard:!0)&&(e.push(new b0e),e.push(new C0e({delta:n.zoomDelta,duration:n.zoomDuration}))),(n.mouseWheelZoom!==void 0?n.mouseWheelZoom:!0)&&e.push(new M0e({onFocusOnly:n.onFocusOnly,duration:n.zoomDuration})),(n.shiftDragZoom!==void 0?n.shiftDragZoom:!0)&&e.push(new v0e({duration:n.zoomDuration})),e}const sa={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class BX extends Bm{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const t=Object.assign({},e);typeof e.properties=="object"&&(delete t.properties,Object.assign(t,e.properties)),t[sa.OPACITY]=e.opacity!==void 0?e.opacity:1,ws(typeof t[sa.OPACITY]=="number","Layer opacity must be a number"),t[sa.VISIBLE]=e.visible!==void 0?e.visible:!0,t[sa.Z_INDEX]=e.zIndex,t[sa.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,t[sa.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,t[sa.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,t[sa.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=t.className!==void 0?t.className:"ol-layer",delete t.className,this.setProperties(t),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const t=this.state_||{layer:this,managed:e===void 0?!0:e},i=this.getZIndex();return t.opacity=Ul(Math.round(this.getOpacity()*100)/100,0,1),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=i===void 0&&!t.managed?1/0:i,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t}getLayersArray(e){return Tr()}getLayerStatesArray(e){return Tr()}getExtent(){return this.get(sa.EXTENT)}getMaxResolution(){return this.get(sa.MAX_RESOLUTION)}getMinResolution(){return this.get(sa.MIN_RESOLUTION)}getMinZoom(){return this.get(sa.MIN_ZOOM)}getMaxZoom(){return this.get(sa.MAX_ZOOM)}getOpacity(){return this.get(sa.OPACITY)}getSourceState(){return Tr()}getVisible(){return this.get(sa.VISIBLE)}getZIndex(){return this.get(sa.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(sa.EXTENT,e)}setMaxResolution(e){this.set(sa.MAX_RESOLUTION,e)}setMinResolution(e){this.set(sa.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(sa.MAX_ZOOM,e)}setMinZoom(e){this.set(sa.MIN_ZOOM,e)}setOpacity(e){ws(typeof e=="number","Layer opacity must be a number"),this.set(sa.OPACITY,e)}setVisible(e){this.set(sa.VISIBLE,e)}setZIndex(e){this.set(sa.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}class By extends Em{constructor(e,t){super(e),this.layer=t}}const tO={LAYERS:"layers"};class lC extends BX{constructor(e){e=e||{};const t=Object.assign({},e);delete t.layers;let i=e.layers;super(t),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(tO.LAYERS,this.handleLayersChanged_),i?Array.isArray(i)?i=new Gg(i.slice(),{unique:!0}):ws(typeof i.getArray=="function","Expected `layers` to be an array or a `Collection`"):i=new Gg(void 0,{unique:!0}),this.setLayers(i)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(Ba),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(qo(e,fd.ADD,this.handleLayersAdd_,this),qo(e,fd.REMOVE,this.handleLayersRemove_,this));for(const i in this.listenerKeys_)this.listenerKeys_[i].forEach(Ba);iM(this.listenerKeys_);const t=e.getArray();for(let i=0,r=t.length;i<r;i++){const o=t[i];this.registerLayerListeners_(o),this.dispatchEvent(new By("addlayer",o))}this.changed()}registerLayerListeners_(e){const t=[qo(e,fx.PROPERTYCHANGE,this.handleLayerChange_,this),qo(e,Er.CHANGE,this.handleLayerChange_,this)];e instanceof lC&&t.push(qo(e,"addlayer",this.handleLayerGroupAdd_,this),qo(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[Nr(e)]=t}handleLayerGroupAdd_(e){this.dispatchEvent(new By("addlayer",e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new By("removelayer",e.layer))}handleLayersAdd_(e){const t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new By("addlayer",t)),this.changed()}handleLayersRemove_(e){const t=e.element,i=Nr(t);this.listenerKeys_[i].forEach(Ba),delete this.listenerKeys_[i],this.dispatchEvent(new By("removelayer",t)),this.changed()}getLayers(){return this.get(tO.LAYERS)}setLayers(e){const t=this.getLayers();if(t){const i=t.getArray();for(let r=0,o=i.length;r<o;++r)this.dispatchEvent(new By("removelayer",i[r]))}this.set(tO.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(t){t.getLayersArray(e)}),e}getLayerStatesArray(e){const t=e!==void 0?e:[],i=t.length;this.getLayers().forEach(function(s){s.getLayerStatesArray(t)});const r=this.getLayerState();let o=r.zIndex;!e&&r.zIndex===void 0&&(o=0);for(let s=i,a=t.length;s<a;s++){const c=t[s];c.opacity*=r.opacity,c.visible=c.visible&&r.visible,c.maxResolution=Math.min(c.maxResolution,r.maxResolution),c.minResolution=Math.max(c.minResolution,r.minResolution),c.minZoom=Math.max(c.minZoom,r.minZoom),c.maxZoom=Math.min(c.maxZoom,r.maxZoom),r.extent!==void 0&&(c.extent!==void 0?c.extent=vm(c.extent,r.extent):c.extent=r.extent),c.zIndex===void 0&&(c.zIndex=o)}return t}getSourceState(){return"ready"}}const Jf={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"};class jx extends BX{constructor(e){const t=Object.assign({},e);delete t.source,super(t),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(sa.SOURCE,this.handleSourcePropertyChange_);const i=e.source?e.source:null;this.setSource(i)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(sa.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(Ba(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=qo(e,Er.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let t;const i=this.getMapInternal();!e&&i&&(e=i.getView()),e instanceof hm?t={viewState:e.getState(),extent:e.calculateExtent()}:t=e,!t.layerStatesArray&&i&&(t.layerStatesArray=i.getLayerGroup().getLayerStatesArray());let r;if(t.layerStatesArray){if(r=t.layerStatesArray.find(s=>s.layer===this),!r)return!1}else r=this.getLayerState();const o=this.getExtent();return wP(r,t.viewState)&&(!o||tu(o,t.extent))}getAttributions(e){if(!this.isVisible(e))return[];const t=this.getSource()?.getAttributions();if(!t)return[];const i=e instanceof hm?e.getViewStateAndExtent():e;let r=t(i);return Array.isArray(r)||(r=[r]),r}render(e,t){const i=this.getRenderer();return i.prepareFrame(e)?(this.rendered=!0,i.renderFrame(e,t)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(e,t){}renderDeferred(e){const t=this.getRenderer();t&&t.renderDeferred(e)}setMapInternal(e){e||this.unrender(),this.set(sa.MAP,e)}getMapInternal(){return this.get(sa.MAP)}setMap(e){this.mapPrecomposeKey_&&(Ba(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(Ba(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=qo(e,Jf.PRECOMPOSE,this.handlePrecompose_,this),this.mapRenderKey_=qo(this,Er.CHANGE,e.render,e),this.changed())}handlePrecompose_(e){const t=e.frameState.layerStatesArray,i=this.getLayerState(!1);ws(!t.some(r=>r.layer===i.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),t.push(i)}setSource(e){this.set(sa.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}clearRenderer(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_)}disposeInternal(){this.clearRenderer(),this.setSource(null),super.disposeInternal()}}function wP(n,e){if(!n.visible)return!1;const t=e.resolution;if(t<n.minResolution||t>=n.maxResolution)return!1;const i=e.zoom;return i>n.minZoom&&i<=n.maxZoom}function OX(n,e,t=0,i=n.length-1,r=B0e){for(;i>t;){if(i-t>600){const c=i-t+1,h=e-t+1,m=Math.log(c),v=.5*Math.exp(2*m/3),x=.5*Math.sqrt(m*v*(c-v)/c)*(h-c/2<0?-1:1),E=Math.max(t,Math.floor(e-h*v/c+x)),D=Math.min(i,Math.floor(e+(c-h)*v/c+x));OX(n,e,E,D,r)}const o=n[e];let s=t,a=i;for(f2(n,t,e),r(n[i],o)>0&&f2(n,t,i);s<a;){for(f2(n,s,a),s++,a--;r(n[s],o)<0;)s++;for(;r(n[a],o)>0;)a--}r(n[t],o)===0?f2(n,t,a):(a++,f2(n,a,i)),a<=e&&(t=a+1),e<=a&&(i=a-1)}}function f2(n,e,t){const i=n[e];n[e]=n[t],n[t]=i}function B0e(n,e){return n<e?-1:n>e?1:0}let IX=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let t=this.data;const i=[];if(!r5(e,t))return i;const r=this.toBBox,o=[];for(;t;){for(let s=0;s<t.children.length;s++){const a=t.children[s],c=t.leaf?r(a):a;r5(e,c)&&(t.leaf?i.push(a):iO(e,c)?this._all(a,i):o.push(a))}t=o.pop()}return i}collides(e){let t=this.data;if(!r5(e,t))return!1;const i=[];for(;t;){for(let r=0;r<t.children.length;r++){const o=t.children[r],s=t.leaf?this.toBBox(o):o;if(r5(e,s)){if(t.leaf||iO(e,s))return!0;i.push(o)}}t=i.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let i=0;i<e.length;i++)this.insert(e[i]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=t;else if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const i=this.data;this.data=t,t=i}this._insert(t,this.data.height-t.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=M_([]),this}remove(e,t){if(!e)return this;let i=this.data;const r=this.toBBox(e),o=[],s=[];let a,c,h;for(;i||o.length;){if(i||(i=o.pop(),c=o[o.length-1],a=s.pop(),h=!0),i.leaf){const m=O0e(e,i.children,t);if(m!==-1)return i.children.splice(m,1),o.push(i),this._condense(o),this}!h&&!i.leaf&&iO(i,r)?(o.push(i),s.push(a),a=0,c=i,i=i.children[0]):c?(a++,i=c.children[a],h=!1):i=null}return this}toBBox(e){return e}compareMinX(e,t){return e.minX-t.minX}compareMinY(e,t){return e.minY-t.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){const i=[];for(;e;)e.leaf?t.push(...e.children):i.push(...e.children),e=i.pop();return t}_build(e,t,i,r){const o=i-t+1;let s=this._maxEntries,a;if(o<=s)return a=M_(e.slice(t,i+1)),NC(a,this.toBBox),a;r||(r=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/Math.pow(s,r-1))),a=M_([]),a.leaf=!1,a.height=r;const c=Math.ceil(o/s),h=c*Math.ceil(Math.sqrt(s));yz(e,t,i,h,this.compareMinX);for(let m=t;m<=i;m+=h){const v=Math.min(m+h-1,i);yz(e,m,v,c,this.compareMinY);for(let x=m;x<=v;x+=c){const E=Math.min(x+c-1,v);a.children.push(this._build(e,x,E,r-1))}}return NC(a,this.toBBox),a}_chooseSubtree(e,t,i,r){for(;r.push(t),!(t.leaf||r.length-1===i);){let o=1/0,s=1/0,a;for(let c=0;c<t.children.length;c++){const h=t.children[c],m=nO(h),v=T0e(e,h)-m;v<s?(s=v,o=m<o?m:o,a=h):v===s&&m<o&&(o=m,a=h)}t=a||t.children[0]}return t}_insert(e,t,i){const r=i?e:this.toBBox(e),o=[],s=this._chooseSubtree(r,this.data,t,o);for(s.children.push(e),N2(s,r);t>=0&&o[t].children.length>this._maxEntries;)this._split(o,t),t--;this._adjustParentBBoxes(r,o,t)}_split(e,t){const i=e[t],r=i.children.length,o=this._minEntries;this._chooseSplitAxis(i,o,r);const s=this._chooseSplitIndex(i,o,r),a=M_(i.children.splice(s,i.children.length-s));a.height=i.height,a.leaf=i.leaf,NC(i,this.toBBox),NC(a,this.toBBox),t?e[t-1].children.push(a):this._splitRoot(i,a)}_splitRoot(e,t){this.data=M_([e,t]),this.data.height=e.height+1,this.data.leaf=!1,NC(this.data,this.toBBox)}_chooseSplitIndex(e,t,i){let r,o=1/0,s=1/0;for(let a=t;a<=i-t;a++){const c=j2(e,0,a,this.toBBox),h=j2(e,a,i,this.toBBox),m=R0e(c,h),v=nO(c)+nO(h);m<o?(o=m,r=a,s=v<s?v:s):m===o&&v<s&&(s=v,r=a)}return r||i-t}_chooseSplitAxis(e,t,i){const r=e.leaf?this.compareMinX:I0e,o=e.leaf?this.compareMinY:k0e,s=this._allDistMargin(e,t,i,r),a=this._allDistMargin(e,t,i,o);s<a&&e.children.sort(r)}_allDistMargin(e,t,i,r){e.children.sort(r);const o=this.toBBox,s=j2(e,0,t,o),a=j2(e,i-t,i,o);let c=i5(s)+i5(a);for(let h=t;h<i-t;h++){const m=e.children[h];N2(s,e.leaf?o(m):m),c+=i5(s)}for(let h=i-t-1;h>=t;h--){const m=e.children[h];N2(a,e.leaf?o(m):m),c+=i5(a)}return c}_adjustParentBBoxes(e,t,i){for(let r=i;r>=0;r--)N2(t[r],e)}_condense(e){for(let t=e.length-1,i;t>=0;t--)e[t].children.length===0?t>0?(i=e[t-1].children,i.splice(i.indexOf(e[t]),1)):this.clear():NC(e[t],this.toBBox)}};function O0e(n,e,t){if(!t)return e.indexOf(n);for(let i=0;i<e.length;i++)if(t(n,e[i]))return i;return-1}function NC(n,e){j2(n,0,n.children.length,e,n)}function j2(n,e,t,i,r){r||(r=M_(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(let o=e;o<t;o++){const s=n.children[o];N2(r,n.leaf?i(s):s)}return r}function N2(n,e){return n.minX=Math.min(n.minX,e.minX),n.minY=Math.min(n.minY,e.minY),n.maxX=Math.max(n.maxX,e.maxX),n.maxY=Math.max(n.maxY,e.maxY),n}function I0e(n,e){return n.minX-e.minX}function k0e(n,e){return n.minY-e.minY}function nO(n){return(n.maxX-n.minX)*(n.maxY-n.minY)}function i5(n){return n.maxX-n.minX+(n.maxY-n.minY)}function T0e(n,e){return(Math.max(e.maxX,n.maxX)-Math.min(e.minX,n.minX))*(Math.max(e.maxY,n.maxY)-Math.min(e.minY,n.minY))}function R0e(n,e){const t=Math.max(n.minX,e.minX),i=Math.max(n.minY,e.minY),r=Math.min(n.maxX,e.maxX),o=Math.min(n.maxY,e.maxY);return Math.max(0,r-t)*Math.max(0,o-i)}function iO(n,e){return n.minX<=e.minX&&n.minY<=e.minY&&e.maxX<=n.maxX&&e.maxY<=n.maxY}function r5(n,e){return e.minX<=n.maxX&&e.minY<=n.maxY&&e.maxX>=n.minX&&e.maxY>=n.minY}function M_(n){return{children:n,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function yz(n,e,t,i,r){const o=[e,t];for(;o.length;){if(t=o.pop(),e=o.pop(),t-e<=i)continue;const s=e+Math.ceil((t-e)/i/2)*i;OX(n,s,e,t,r),o.push(e,s,s,t)}}const SP=[NaN,NaN,NaN,0];let rO;function D0e(){return rO||(rO=Kl(1,1,void 0,{willReadFrequently:!0,desynchronized:!0})),rO}const P0e=/^rgba?\(\s*(\d+%?)\s+(\d+%?)\s+(\d+%?)(?:\s*\/\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,U0e=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,K0e=/^rgba?\(\s*(\d+%)\s*,\s*(\d+%)\s*,\s*(\d+%)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,L0e=/^#([\da-f]{3,4}|[\da-f]{6}|[\da-f]{8})$/i;function o5(n,e){return n.endsWith("%")?Number(n.substring(0,n.length-1))/e:Number(n)}function d3(n){throw new Error('failed to parse "'+n+'" as color')}function kX(n){if(n.toLowerCase().startsWith("rgb")){const o=n.match(U0e)||n.match(P0e)||n.match(K0e);if(o){const s=o[4],a=100/255;return[Ul(o5(o[1],a)+.5|0,0,255),Ul(o5(o[2],a)+.5|0,0,255),Ul(o5(o[3],a)+.5|0,0,255),s!==void 0?Ul(o5(s,100),0,1):1]}d3(n)}if(n.startsWith("#")){if(L0e.test(n)){const o=n.substring(1),s=o.length<=4?1:2,a=[0,0,0,255];for(let c=0,h=o.length;c<h;c+=s){let m=parseInt(o.substring(c,c+s),16);s===1&&(m+=m<<4),a[c/s]=m}return a[3]=a[3]/255,a}d3(n)}const e=D0e();e.fillStyle="#abcdef";let t=e.fillStyle;e.fillStyle=n,e.fillStyle===t&&(e.fillStyle="#fedcba",t=e.fillStyle,e.fillStyle=n,e.fillStyle===t&&d3(n));const i=e.fillStyle;if(i.startsWith("#")||i.startsWith("rgba"))return kX(i);e.clearRect(0,0,1,1),e.fillRect(0,0,1,1);const r=Array.from(e.getImageData(0,0,1,1).data);return r[3]=NE(r[3]/255,3),r}function F0e(n){return typeof n=="string"?n:BP(n)}const z0e=1024,p2={};let oO=0;function j0e(n){if(n.length===4)return n;const e=n.slice();return e[3]=1,e}function sO(n){return n>.0031308?Math.pow(n,1/2.4)*269.025-14.025:n*3294.6}function aO(n){return n>.2068965?Math.pow(n,3):(n-4/29)*(108/841)}function lO(n){return n>10.314724?Math.pow((n+14.025)/269.025,2.4):n/3294.6}function uO(n){return n>.0088564?Math.pow(n,1/3):n/(108/841)+4/29}function vz(n){const e=lO(n[0]),t=lO(n[1]),i=lO(n[2]),r=uO(e*.222488403+t*.716873169+i*.06060791),o=500*(uO(e*.452247074+t*.399439023+i*.148375274)-r),s=200*(r-uO(e*.016863605+t*.117638439+i*.865350722)),a=Math.atan2(s,o)*(180/Math.PI);return[116*r-16,Math.sqrt(o*o+s*s),a<0?a+360:a,n[3]]}function N0e(n){const e=(n[0]+16)/116,t=n[1],i=n[2]*Math.PI/180,r=aO(e),o=aO(e+t/500*Math.cos(i)),s=aO(e-t/200*Math.sin(i)),a=sO(o*3.021973625-r*1.617392459-s*.404875592),c=sO(o*-.943766287+r*1.916279586+s*.027607165),h=sO(o*.069407491-r*.22898585+s*1.159737864);return[Ul(a+.5|0,0,255),Ul(c+.5|0,0,255),Ul(h+.5|0,0,255),n[3]]}function EP(n){if(n==="none")return SP;if(p2.hasOwnProperty(n))return p2[n];if(oO>=z0e){let t=0;for(const i in p2)(t++&3)===0&&(delete p2[i],--oO)}const e=kX(n);e.length!==4&&d3(n);for(const t of e)isNaN(t)&&d3(n);return p2[n]=e,++oO,e}function gx(n){return Array.isArray(n)?n:EP(n)}function BP(n){let e=n[0];e!=(e|0)&&(e=e+.5|0);let t=n[1];t!=(t|0)&&(t=t+.5|0);let i=n[2];i!=(i|0)&&(i=i+.5|0);const r=n[3]===void 0?1:Math.round(n[3]*1e3)/1e3;return"rgba("+e+","+t+","+i+","+r+")"}function bz(n){return n[0]>0&&n[1]>0}function G0e(n,e,t){return t===void 0&&(t=[0,0]),t[0]=n[0]*e+.5|0,t[1]=n[1]*e+.5|0,t}function nh(n,e){return Array.isArray(n)?n:(e===void 0?e=[n,n]:(e[0]=n,e[1]=n),e)}let uC=0;const Th=1<<uC++,Qo=1<<uC++,pd=1<<uC++,dm=1<<uC++,qb=1<<uC++,G2=1<<uC++,s5=Math.pow(2,uC)-1,OP={[Th]:"boolean",[Qo]:"number",[pd]:"string",[dm]:"color",[qb]:"number[]",[G2]:"size"},W0e=Object.keys(OP).map(Number).sort(n0);function Q0e(n){return n in OP}function W2(n){const e=[];for(const t of W0e)Q2(n,t)&&e.push(OP[t]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function Q2(n,e){return(n&e)===e}function vy(n,e){return n===e}class Mc{constructor(e,t){if(!Q0e(e))throw new Error(`literal expressions must have a specific type, got ${W2(e)}`);this.type=e,this.value=t}}class Y0e{constructor(e,t,...i){this.type=e,this.operator=t,this.args=i}}function TX(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,mapState:!1}}function vA(n,e,t){switch(typeof n){case"boolean":{if(vy(e,pd))return new Mc(pd,n?"true":"false");if(!Q2(e,Th))throw new Error(`got a boolean, but expected ${W2(e)}`);return new Mc(Th,n)}case"number":{if(vy(e,G2))return new Mc(G2,nh(n));if(vy(e,Th))return new Mc(Th,!!n);if(vy(e,pd))return new Mc(pd,n.toString());if(!Q2(e,Qo))throw new Error(`got a number, but expected ${W2(e)}`);return new Mc(Qo,n)}case"string":{if(vy(e,dm))return new Mc(dm,EP(n));if(vy(e,Th))return new Mc(Th,!!n);if(!Q2(e,pd))throw new Error(`got a string, but expected ${W2(e)}`);return new Mc(pd,n)}}if(!Array.isArray(n))throw new Error("expression must be an array or a primitive value");if(n.length===0)throw new Error("empty expression");if(typeof n[0]=="string")return i1e(n,e,t);for(const i of n)if(typeof i!="number")throw new Error("expected an array of numbers");if(vy(e,G2)){if(n.length!==2)throw new Error(`expected an array of two values for a size, got ${n.length}`);return new Mc(G2,n)}if(vy(e,dm)){if(n.length===3)return new Mc(dm,[...n,1]);if(n.length===4)return new Mc(dm,n);throw new Error(`expected an array of 3 or 4 values for a color, got ${n.length}`)}if(!Q2(e,qb))throw new Error(`got an array of numbers, but expected ${W2(e)}`);return new Mc(qb,n)}const vn={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",LineMetric:"line-metric",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string",Has:"has"},q0e={[vn.Get]:Ir(ao(1,1/0),Cz),[vn.Var]:Ir(ao(1,1),V0e),[vn.Has]:Ir(ao(1,1/0),Cz),[vn.Id]:Ir($0e,GC),[vn.Concat]:Ir(ao(2,1/0),Rs(pd)),[vn.GeometryType]:Ir(H0e,GC),[vn.LineMetric]:Ir(GC),[vn.Resolution]:Ir(cO,GC),[vn.Zoom]:Ir(cO,GC),[vn.Time]:Ir(cO,GC),[vn.Any]:Ir(ao(2,1/0),Rs(Th)),[vn.All]:Ir(ao(2,1/0),Rs(Th)),[vn.Not]:Ir(ao(1,1),Rs(Th)),[vn.Equal]:Ir(ao(2,2),Rs(s5)),[vn.NotEqual]:Ir(ao(2,2),Rs(s5)),[vn.GreaterThan]:Ir(ao(2,2),Rs(Qo)),[vn.GreaterThanOrEqualTo]:Ir(ao(2,2),Rs(Qo)),[vn.LessThan]:Ir(ao(2,2),Rs(Qo)),[vn.LessThanOrEqualTo]:Ir(ao(2,2),Rs(Qo)),[vn.Multiply]:Ir(ao(2,1/0),_z),[vn.Coalesce]:Ir(ao(2,1/0),_z),[vn.Divide]:Ir(ao(2,2),Rs(Qo)),[vn.Add]:Ir(ao(2,1/0),Rs(Qo)),[vn.Subtract]:Ir(ao(2,2),Rs(Qo)),[vn.Clamp]:Ir(ao(3,3),Rs(Qo)),[vn.Mod]:Ir(ao(2,2),Rs(Qo)),[vn.Pow]:Ir(ao(2,2),Rs(Qo)),[vn.Abs]:Ir(ao(1,1),Rs(Qo)),[vn.Floor]:Ir(ao(1,1),Rs(Qo)),[vn.Ceil]:Ir(ao(1,1),Rs(Qo)),[vn.Round]:Ir(ao(1,1),Rs(Qo)),[vn.Sin]:Ir(ao(1,1),Rs(Qo)),[vn.Cos]:Ir(ao(1,1),Rs(Qo)),[vn.Atan]:Ir(ao(1,2),Rs(Qo)),[vn.Sqrt]:Ir(ao(1,1),Rs(Qo)),[vn.Match]:Ir(ao(4,1/0),xz,X0e),[vn.Between]:Ir(ao(3,3),Rs(Qo)),[vn.Interpolate]:Ir(ao(6,1/0),xz,J0e),[vn.Case]:Ir(ao(3,1/0),Z0e,e1e),[vn.In]:Ir(ao(2,2),t1e),[vn.Number]:Ir(ao(1,1/0),Rs(s5)),[vn.String]:Ir(ao(1,1/0),Rs(s5)),[vn.Array]:Ir(ao(1,1/0),Rs(Qo)),[vn.Color]:Ir(ao(1,4),Rs(Qo)),[vn.Band]:Ir(ao(1,3),Rs(Qo)),[vn.Palette]:Ir(ao(2,2),n1e),[vn.ToString]:Ir(ao(1,1),Rs(Th|Qo|pd|dm))};function Cz(n,e,t){const i=n.length-1,r=new Array(i);for(let o=0;o<i;++o){const s=n[o+1];switch(typeof s){case"number":{r[o]=new Mc(Qo,s);break}case"string":{r[o]=new Mc(pd,s);break}default:throw new Error(`expected a string key or numeric array index for a get operation, got ${s}`)}o===0&&t.properties.add(String(s))}return r}function V0e(n,e,t){const i=n[1];if(typeof i!="string")throw new Error("expected a string argument for var operation");return t.variables.add(i),[new Mc(pd,i)]}function $0e(n,e,t){t.featureId=!0}function H0e(n,e,t){t.geometryType=!0}function cO(n,e,t){t.mapState=!0}function GC(n,e,t){const i=n[0];if(n.length!==1)throw new Error(`expected no arguments for ${i} operation`);return[]}function ao(n,e){return function(t,i,r){const o=t[0],s=t.length-1;if(n===e){if(s!==n){const a=n===1?"":"s";throw new Error(`expected ${n} argument${a} for ${o}, got ${s}`)}}else if(s<n||s>e){const a=e===1/0?`${n} or more`:`${n} to ${e}`;throw new Error(`expected ${a} arguments for ${o}, got ${s}`)}}}function _z(n,e,t){const i=n.length-1,r=new Array(i);for(let o=0;o<i;++o){const s=vA(n[o+1],e,t);r[o]=s}return r}function Rs(n){return function(e,t,i){const r=e.length-1,o=new Array(r);for(let s=0;s<r;++s){const a=vA(e[s+1],n,i);o[s]=a}return o}}function Z0e(n,e,t){const i=n[0],r=n.length-1;if(r%2===0)throw new Error(`expected an odd number of arguments for ${i}, got ${r} instead`)}function xz(n,e,t){const i=n[0],r=n.length-1;if(r%2===1)throw new Error(`expected an even number of arguments for operation ${i}, got ${r} instead`)}function X0e(n,e,t){const i=n.length-1,r=pd|Qo|Th,o=vA(n[1],r,t),s=vA(n[n.length-1],e,t),a=new Array(i-2);for(let c=0;c<i-2;c+=2){try{const h=vA(n[c+2],o.type,t);a[c]=h}catch(h){throw new Error(`failed to parse argument ${c+1} of match expression: ${h.message}`)}try{const h=vA(n[c+3],s.type,t);a[c+1]=h}catch(h){throw new Error(`failed to parse argument ${c+2} of match expression: ${h.message}`)}}return[o,...a,s]}function J0e(n,e,t){const i=n[1];let r;switch(i[0]){case"linear":r=1;break;case"exponential":const c=i[1];if(typeof c!="number"||c<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(c)} instead`);r=c;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(i)}`)}const o=new Mc(Qo,r);let s;try{s=vA(n[2],Qo,t)}catch(c){throw new Error(`failed to parse argument 1 in interpolate expression: ${c.message}`)}const a=new Array(n.length-3);for(let c=0;c<a.length;c+=2){try{const h=vA(n[c+3],Qo,t);a[c]=h}catch(h){throw new Error(`failed to parse argument ${c+2} for interpolate expression: ${h.message}`)}try{const h=vA(n[c+4],e,t);a[c+1]=h}catch(h){throw new Error(`failed to parse argument ${c+3} for interpolate expression: ${h.message}`)}}return[o,s,...a]}function e1e(n,e,t){const i=vA(n[n.length-1],e,t),r=new Array(n.length-1);for(let o=0;o<r.length-1;o+=2){try{const s=vA(n[o+1],Th,t);r[o]=s}catch(s){throw new Error(`failed to parse argument ${o} of case expression: ${s.message}`)}try{const s=vA(n[o+2],i.type,t);r[o+1]=s}catch(s){throw new Error(`failed to parse argument ${o+1} of case expression: ${s.message}`)}}return r[r.length-1]=i,r}function t1e(n,e,t){let i=n[2];if(!Array.isArray(i))throw new Error('the second argument for the "in" operator must be an array');let r;if(typeof i[0]=="string"){if(i[0]!=="literal")throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(i[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');i=i[1],r=pd}else r=Qo;const o=new Array(i.length);for(let a=0;a<o.length;a++)try{const c=vA(i[a],r,t);o[a]=c}catch(c){throw new Error(`failed to parse haystack item ${a} for "in" expression: ${c.message}`)}return[vA(n[1],r,t),...o]}function n1e(n,e,t){let i;try{i=vA(n[1],Qo,t)}catch(s){throw new Error(`failed to parse first argument in palette expression: ${s.message}`)}const r=n[2];if(!Array.isArray(r))throw new Error("the second argument of palette must be an array");const o=new Array(r.length);for(let s=0;s<o.length;s++){let a;try{a=vA(r[s],dm,t)}catch(c){throw new Error(`failed to parse color at index ${s} in palette expression: ${c.message}`)}if(!(a instanceof Mc))throw new Error(`the palette color at index ${s} must be a literal value`);o[s]=a}return[i,...o]}function Ir(...n){return function(e,t,i){const r=e[0];let o;for(let s=0;s<n.length;s++){const a=n[s](e,t,i);if(s==n.length-1){if(!a)throw new Error("expected last argument validator to return the parsed args");o=a}}return new Y0e(t,r,...o)}}function i1e(n,e,t){const i=n[0],r=q0e[i];if(!r)throw new Error(`unknown operator: ${i}`);return r(n,e,t)}function RX(n){if(!n)return"";const e=n.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return RX(n.getGeometries()[0]);default:return""}}function DX(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function _1(n,e,t){const i=vA(n,e,t);return bm(i)}function bm(n,e){if(n instanceof Mc){if(n.type===dm&&typeof n.value=="string"){const i=EP(n.value);return function(){return i}}return function(){return n.value}}const t=n.operator;switch(t){case vn.Number:case vn.String:case vn.Coalesce:return r1e(n);case vn.Get:case vn.Var:case vn.Has:return o1e(n);case vn.Id:return i=>i.featureId;case vn.GeometryType:return i=>i.geometryType;case vn.Concat:{const i=n.args.map(r=>bm(r));return r=>"".concat(...i.map(o=>o(r).toString()))}case vn.Resolution:return i=>i.resolution;case vn.Any:case vn.All:case vn.Between:case vn.In:case vn.Not:return a1e(n);case vn.Equal:case vn.NotEqual:case vn.LessThan:case vn.LessThanOrEqualTo:case vn.GreaterThan:case vn.GreaterThanOrEqualTo:return s1e(n);case vn.Multiply:case vn.Divide:case vn.Add:case vn.Subtract:case vn.Clamp:case vn.Mod:case vn.Pow:case vn.Abs:case vn.Floor:case vn.Ceil:case vn.Round:case vn.Sin:case vn.Cos:case vn.Atan:case vn.Sqrt:return l1e(n);case vn.Case:return u1e(n);case vn.Match:return c1e(n);case vn.Interpolate:return A1e(n);case vn.ToString:return h1e(n);default:throw new Error(`Unsupported operator ${t}`)}}function r1e(n,e){const t=n.operator,i=n.args.length,r=new Array(i);for(let o=0;o<i;++o)r[o]=bm(n.args[o]);switch(t){case vn.Coalesce:return o=>{for(let s=0;s<i;++s){const a=r[s](o);if(typeof a<"u"&&a!==null)return a}throw new Error("Expected one of the values to be non-null")};case vn.Number:case vn.String:return o=>{for(let s=0;s<i;++s){const a=r[s](o);if(typeof a===t)return a}throw new Error(`Expected one of the values to be a ${t}`)};default:throw new Error(`Unsupported assertion operator ${t}`)}}function o1e(n,e){const i=n.args[0].value;switch(n.operator){case vn.Get:return r=>{const o=n.args;let s=r.properties[i];for(let a=1,c=o.length;a<c;++a){const m=o[a].value;s=s[m]}return s};case vn.Var:return r=>r.variables[i];case vn.Has:return r=>{const o=n.args;if(!(i in r.properties))return!1;let s=r.properties[i];for(let a=1,c=o.length;a<c;++a){const m=o[a].value;if(!s||!Object.hasOwn(s,m))return!1;s=s[m]}return!0};default:throw new Error(`Unsupported accessor operator ${n.operator}`)}}function s1e(n,e){const t=n.operator,i=bm(n.args[0]),r=bm(n.args[1]);switch(t){case vn.Equal:return o=>i(o)===r(o);case vn.NotEqual:return o=>i(o)!==r(o);case vn.LessThan:return o=>i(o)<r(o);case vn.LessThanOrEqualTo:return o=>i(o)<=r(o);case vn.GreaterThan:return o=>i(o)>r(o);case vn.GreaterThanOrEqualTo:return o=>i(o)>=r(o);default:throw new Error(`Unsupported comparison operator ${t}`)}}function a1e(n,e){const t=n.operator,i=n.args.length,r=new Array(i);for(let o=0;o<i;++o)r[o]=bm(n.args[o]);switch(t){case vn.Any:return o=>{for(let s=0;s<i;++s)if(r[s](o))return!0;return!1};case vn.All:return o=>{for(let s=0;s<i;++s)if(!r[s](o))return!1;return!0};case vn.Between:return o=>{const s=r[0](o),a=r[1](o),c=r[2](o);return s>=a&&s<=c};case vn.In:return o=>{const s=r[0](o);for(let a=1;a<i;++a)if(s===r[a](o))return!0;return!1};case vn.Not:return o=>!r[0](o);default:throw new Error(`Unsupported logical operator ${t}`)}}function l1e(n,e){const t=n.operator,i=n.args.length,r=new Array(i);for(let o=0;o<i;++o)r[o]=bm(n.args[o]);switch(t){case vn.Multiply:return o=>{let s=1;for(let a=0;a<i;++a)s*=r[a](o);return s};case vn.Divide:return o=>r[0](o)/r[1](o);case vn.Add:return o=>{let s=0;for(let a=0;a<i;++a)s+=r[a](o);return s};case vn.Subtract:return o=>r[0](o)-r[1](o);case vn.Clamp:return o=>{const s=r[0](o),a=r[1](o);if(s<a)return a;const c=r[2](o);return s>c?c:s};case vn.Mod:return o=>r[0](o)%r[1](o);case vn.Pow:return o=>Math.pow(r[0](o),r[1](o));case vn.Abs:return o=>Math.abs(r[0](o));case vn.Floor:return o=>Math.floor(r[0](o));case vn.Ceil:return o=>Math.ceil(r[0](o));case vn.Round:return o=>Math.round(r[0](o));case vn.Sin:return o=>Math.sin(r[0](o));case vn.Cos:return o=>Math.cos(r[0](o));case vn.Atan:return i===2?o=>Math.atan2(r[0](o),r[1](o)):o=>Math.atan(r[0](o));case vn.Sqrt:return o=>Math.sqrt(r[0](o));default:throw new Error(`Unsupported numeric operator ${t}`)}}function u1e(n,e){const t=n.args.length,i=new Array(t);for(let r=0;r<t;++r)i[r]=bm(n.args[r]);return r=>{for(let o=0;o<t-1;o+=2)if(i[o](r))return i[o+1](r);return i[t-1](r)}}function c1e(n,e){const t=n.args.length,i=new Array(t);for(let r=0;r<t;++r)i[r]=bm(n.args[r]);return r=>{const o=i[0](r);for(let s=1;s<t-1;s+=2)if(o===i[s](r))return i[s+1](r);return i[t-1](r)}}function A1e(n,e){const t=n.args.length,i=new Array(t);for(let r=0;r<t;++r)i[r]=bm(n.args[r]);return r=>{const o=i[0](r),s=i[1](r);let a,c;for(let h=2;h<t;h+=2){const m=i[h](r);let v=i[h+1](r);const x=Array.isArray(v);if(x&&(v=j0e(v)),m>=s)return h===2?v:x?d1e(o,s,a,c,m,v):Y2(o,s,a,c,m,v);a=m,c=v}return c}}function h1e(n,e){const t=n.operator,i=n.args.length,r=new Array(i);for(let o=0;o<i;++o)r[o]=bm(n.args[o]);switch(t){case vn.ToString:return o=>{const s=r[0](o);return n.args[0].type===dm?BP(s):s.toString()};default:throw new Error(`Unsupported convert operator ${t}`)}}function Y2(n,e,t,i,r,o){const s=r-t;if(s===0)return i;const a=e-t,c=n===1?a/s:(Math.pow(n,a)-1)/(Math.pow(n,s)-1);return i+c*(o-i)}function d1e(n,e,t,i,r,o){if(r-t===0)return i;const a=vz(i),c=vz(o);let h=c[2]-a[2];h>180?h-=360:h<-180&&(h+=360);const m=[Y2(n,e,t,a[0],r,c[0]),Y2(n,e,t,a[1],r,c[1]),a[2]+Y2(n,e,t,0,r,h),Y2(n,e,t,i[3],r,o[3])];return N0e(m)}const Ui={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class IP extends rM{constructor(e,t,i,r){super(),this.extent=e,this.pixelRatio_=i,this.resolution=t,this.state=typeof r=="function"?Ui.IDLE:r,this.image_=null,this.loader=typeof r=="function"?r:null}changed(){this.dispatchEvent(Er.CHANGE)}getExtent(){return this.extent}getImage(){return this.image_}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){if(this.state==Ui.IDLE&&this.loader){this.state=Ui.LOADING,this.changed();const e=this.getResolution(),t=Array.isArray(e)?e[0]:e;px(()=>this.loader(this.getExtent(),t,this.getPixelRatio())).then(i=>{"image"in i&&(this.image_=i.image),"extent"in i&&(this.extent=i.extent),"resolution"in i&&(this.resolution=i.resolution),"pixelRatio"in i&&(this.pixelRatio_=i.pixelRatio),(i instanceof HTMLImageElement||wme&&i instanceof ImageBitmap||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement)&&(this.image_=i),this.state=Ui.LOADED}).catch(i=>{this.state=Ui.ERROR,console.error(i)}).finally(()=>this.changed())}}setImage(e){this.image_=e}setResolution(e){this.resolution=e}}function f1e(n,e,t){const i=n;let r=!0,o=!1,s=!1;const a=[eS(i,Er.LOAD,function(){s=!0,o||e()})];return i.src&&GZ?(o=!0,i.decode().then(function(){r&&e()}).catch(function(c){r&&(s?e():t())})):a.push(eS(i,Er.ERROR,t)),function(){r=!1,a.forEach(Ba)}}function p1e(n,e){return new Promise((t,i)=>{function r(){s(),t(n)}function o(){s(),i(new Error("Image load error"))}function s(){n.removeEventListener("load",r),n.removeEventListener("error",o)}n.addEventListener("load",r),n.addEventListener("error",o)})}function m1e(n,e){return e&&(n.src=e),n.src&&GZ?new Promise((t,i)=>n.decode().then(()=>t(n)).catch(r=>n.complete&&n.width?t(n):i(r))):p1e(n)}class g1e{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const t in this.cache_){const i=this.cache_[t];(e++&3)===0&&!i.hasListener()&&(delete this.cache_[t],delete this.patternCache_[t],--this.cacheSize_)}}}get(e,t,i){const r=AO(e,t,i);return r in this.cache_?this.cache_[r]:null}getPattern(e,t,i){const r=AO(e,t,i);return r in this.patternCache_?this.patternCache_[r]:null}set(e,t,i,r,o){const s=AO(e,t,i),a=s in this.cache_;this.cache_[s]=r,o&&(r.getImageState()===Ui.IDLE&&r.load(),r.getImageState()===Ui.LOADING?r.ready().then(()=>{this.patternCache_[s]=aS().createPattern(r.getImage(1),"repeat")}):this.patternCache_[s]=aS().createPattern(r.getImage(1),"repeat")),a||++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function AO(n,e,t){const i=t?gx(t):"null";return e+":"+n+":"+i}const ep=new g1e;let m2=null;class PX extends rM{constructor(e,t,i,r,o){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=i,this.canvas_={},this.color_=o,this.imageState_=r===void 0?Ui.IDLE:r,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=t,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===Ui.LOADED){m2||(m2=Kl(1,1,void 0,{willReadFrequently:!0})),m2.drawImage(this.image_,0,0);try{m2.getImageData(0,0,1,1),this.tainted_=!1}catch{m2=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(Er.CHANGE)}handleImageError_(){this.imageState_=Ui.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=Ui.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],t=this.size_[1],i=Kl(e,t);i.fillRect(0,0,e,t),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===Ui.IDLE){this.image_||this.initializeImage_(),this.imageState_=Ui.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&m1e(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==Ui.LOADED)return;const t=this.image_,i=Kl(Math.ceil(t.width*e),Math.ceil(t.height*e)),r=i.canvas;i.scale(e,e),i.drawImage(t,0,0),i.globalCompositeOperation="multiply",i.fillStyle=F0e(this.color_),i.fillRect(0,0,r.width/e,r.height/e),i.globalCompositeOperation="destination-in",i.drawImage(t,0,0),this.canvas_[e]=r}ready(){return this.ready_||(this.ready_=new Promise(e=>{if(this.imageState_===Ui.LOADED||this.imageState_===Ui.ERROR)e();else{const t=()=>{(this.imageState_===Ui.LOADED||this.imageState_===Ui.ERROR)&&(this.removeEventListener(Er.CHANGE,t),e())};this.addEventListener(Er.CHANGE,t)}})),this.ready_}}function kP(n,e,t,i,r,o){let s=e===void 0?void 0:ep.get(e,t,r);return s||(s=new PX(n,n&&"src"in n?n.src||void 0:e,t,i,r),ep.set(e,t,r,s,o)),o&&s&&!ep.getPattern(e,t,r)&&ep.set(e,t,r,s,o),s}function Yg(n){return n?Array.isArray(n)?BP(n):typeof n=="object"&&"src"in n?y1e(n):n:null}function y1e(n){if(!n.offset||!n.size)return ep.getPattern(n.src,"anonymous",n.color);const e=n.src+":"+n.offset,t=ep.getPattern(e,void 0,n.color);if(t)return t;const i=ep.get(n.src,"anonymous",null);if(i.getImageState()!==Ui.LOADED)return null;const r=Kl(n.size[0],n.size[1]);return r.drawImage(i.getImage(1),n.offset[0],n.offset[1],n.size[0],n.size[1],0,0,n.size[0],n.size[1]),kP(r.canvas,e,void 0,Ui.LOADED,n.color,!0),ep.getPattern(e,void 0,n.color)}const UX="10px sans-serif",md="#000",yx="round",c1=[],A1=0,vx="round",t4=10,n4="#000",i4="center",lS="middle",_b=[0,0,0,0],r4=1,db=new Bm;let g2=null,Mz;const f9={},v1e=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","emoji","math","fangsong"]);function b1e(n,e,t){return`${n} ${e} 16px "${t}"`}const C1e=(function(){let e,t;async function i(o){await t.ready;const s=await t.load(o);if(s.length===0)return!1;const a=h9(o),c=a.families[0].toLowerCase(),h=a.weight;return s.some(m=>{const v=m.family.replace(/^['"]|['"]$/g,"").toLowerCase(),x=A9[m.weight]||m.weight;return v===c&&m.style===a.style&&x==h})}async function r(){await t.ready;let o=!0;const s=db.getProperties(),a=Object.keys(s).filter(c=>s[c]<100);for(let c=a.length-1;c>=0;--c){const h=a[c];let m=s[h];m<100&&(await i(h)?(iM(f9),db.set(h,100)):(m+=10,db.set(h,m,!0),m<100&&(o=!1)))}e=void 0,o||(e=setTimeout(r,100))}return async function(o){t||(t=iC?self.fonts:document.fonts);const s=h9(o);if(!s)return;const a=s.families;let c=!1;for(const h of a){if(v1e.has(h))continue;const m=b1e(s.style,s.weight,h);db.get(m)===void 0&&(db.set(m,0,!0),c=!0)}c&&(clearTimeout(e),e=setTimeout(r,100))}})(),_1e=(function(){let n;return function(e){let t=f9[e];if(t==null){if(iC){const i=h9(e),r=KX(e,"g");t=(isNaN(Number(i.lineHeight))?1.2:Number(i.lineHeight))*(r.actualBoundingBoxAscent+r.actualBoundingBoxDescent)}else n||(n=document.createElement("div"),n.innerHTML="M",n.style.minHeight="0",n.style.maxHeight="none",n.style.height="auto",n.style.padding="0",n.style.border="none",n.style.position="absolute",n.style.display="block",n.style.left="-99999px"),n.style.font=e,document.body.appendChild(n),t=n.offsetHeight,document.body.removeChild(n);f9[e]=t}return t}})();function KX(n,e){return g2||(g2=Kl(1,1)),n!=Mz&&(g2.font=n,Mz=g2.font),g2.measureText(e)}function LX(n,e){return KX(n,e).width}function wz(n,e,t){if(e in t)return t[e];const i=e.split(`
`).reduce((r,o)=>Math.max(r,LX(n,o)),0);return t[e]=i,i}function x1e(n,e){const t=[],i=[],r=[];let o=0,s=0,a=0,c=0;for(let h=0,m=e.length;h<=m;h+=2){const v=e[h];if(v===`
`||h===m){o=Math.max(o,s),r.push(s),s=0,a+=c,c=0;continue}const x=e[h+1]||n.font,E=LX(x,v);t.push(E),s+=E;const D=_1e(x);i.push(D),c=Math.max(c,D)}return{width:o,height:a,widths:t,heights:i,lineWidths:r}}function M1e(n,e,t,i,r,o,s,a,c,h,m){n.save(),t!==1&&(n.globalAlpha===void 0?n.globalAlpha=v=>v.globalAlpha*=t:n.globalAlpha*=t),e&&n.transform.apply(n,e),i.contextInstructions?(n.translate(c,h),n.scale(m[0],m[1]),w1e(i,n)):m[0]<0||m[1]<0?(n.translate(c,h),n.scale(m[0],m[1]),n.drawImage(i,r,o,s,a,0,0,s,a)):n.drawImage(i,r,o,s,a,c,h,s*m[0],a*m[1]),n.restore()}function w1e(n,e){const t=n.contextInstructions;for(let i=0,r=t.length;i<r;i+=2)Array.isArray(t[i+1])?e[t[i]].apply(e,t[i+1]):e[t[i]]=t[i+1]}class e6{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=nh(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new e6({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return Tr()}getImage(e){return Tr()}getHitDetectionImage(){return Tr()}getPixelRatio(e){return 1}getImageState(){return Tr()}getImageSize(){return Tr()}getOrigin(){return Tr()}getSize(){return Tr()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=nh(e)}listenImageChange(e){Tr()}load(){Tr()}unlistenImageChange(e){Tr()}ready(){return Promise.resolve()}}class t6 extends e6{constructor(e){super({opacity:1,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius=e.radius,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?Ui.LOADING:Ui.LOADED,this.imageState_===Ui.LOADING&&this.ready().then(()=>this.imageState_=Ui.LOADED),this.render()}clone(){const e=this.getScale(),t=new t6({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}getAnchor(){const e=this.size_,t=this.getDisplacement(),i=this.getScaleArray();return[e[0]/2-t[0]/i[0],e[1]/2+t[1]/i[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){const t=this.fill_?.getKey(),i=`${e},${this.angle_},${this.radius},${this.radius2_},${this.points_},${t}`+Object.values(this.renderOptions_).join(",");let r=ep.get(i,null,null)?.getImage(1);if(!r){const o=this.renderOptions_,s=Math.ceil(o.size*e),a=Kl(s,s);this.draw_(o,a,e),r=a.canvas,ep.set(i,null,null,new PX(r,void 0,null,Ui.LOADED,null))}return r}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,t,i){if(t===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return t;let r=this.radius,o=this.radius2_===void 0?r:this.radius2_;if(r<o){const Z=r;r=o,o=Z}const s=this.radius2_===void 0?this.points_:this.points_*2,a=2*Math.PI/s,c=o*Math.sin(a),h=Math.sqrt(o*o-c*c),m=r-h,v=Math.sqrt(c*c+m*m),x=v/c;if(e==="miter"&&x<=i)return x*t;const E=t/2/x,D=t/2*(m/v),F=Math.sqrt((r+E)*(r+E)+D*D)-r;if(this.radius2_===void 0||e==="bevel")return F*2;const W=r*Math.sin(a),q=Math.sqrt(r*r-W*W),V=o-q,X=Math.sqrt(W*W+V*V)/W;if(X<=i){const Z=X*t/2-o-r;return 2*Math.max(F,Z)}return F*2}createRenderOptions(){let e=yx,t=vx,i=0,r=null,o=0,s,a=0;this.stroke_&&(s=Yg(this.stroke_.getColor()??n4),a=this.stroke_.getWidth()??r4,r=this.stroke_.getLineDash(),o=this.stroke_.getLineDashOffset()??0,t=this.stroke_.getLineJoin()??vx,e=this.stroke_.getLineCap()??yx,i=this.stroke_.getMiterLimit()??t4);const c=this.calculateLineJoinSize_(t,a,i),h=Math.max(this.radius,this.radius2_||0),m=Math.ceil(2*h+c);return{strokeStyle:s,strokeWidth:a,size:m,lineCap:e,lineDash:r,lineDashOffset:o,lineJoin:t,miterLimit:i}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,t,i){if(t.scale(i,i),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_){let r=this.fill_.getColor();r===null&&(r=md),t.fillStyle=Yg(r),t.fill()}e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}createHitDetectionCanvas_(e){let t;if(this.fill_){let i=this.fill_.getColor(),r=0;typeof i=="string"&&(i=gx(i)),i===null?r=1:Array.isArray(i)&&(r=i.length===4?i[3]:1),r===0&&(t=Kl(e.size,e.size),this.drawHitDetectionCanvas_(e,t))}return t?t.canvas:this.getImage(1)}createPath_(e){let t=this.points_;const i=this.radius;if(t===1/0)e.arc(0,0,i,0,2*Math.PI);else{const r=this.radius2_===void 0?i:this.radius2_;this.radius2_!==void 0&&(t*=2);const o=this.angle_-Math.PI/2,s=2*Math.PI/t;for(let a=0;a<t;a++){const c=o+a*s,h=a%2===0?i:r;e.lineTo(h*Math.cos(c),h*Math.sin(c))}e.closePath()}}drawHitDetectionCanvas_(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=md,t.fill(),e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class hM extends t6{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),t=new hM({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}setRadius(e){this.radius=e,this.render()}}class s1{constructor(e){e=e||{},this.patternImage_=null,this.color_=null,e.color!==void 0&&this.setColor(e.color)}clone(){const e=this.getColor();return new s1({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){if(e!==null&&typeof e=="object"&&"src"in e){const t=kP(null,e.src,"anonymous",void 0,e.offset?null:e.color?e.color:null,!(e.offset&&e.size));t.ready().then(()=>{this.patternImage_=null}),t.getImageState()===Ui.IDLE&&t.load(),t.getImageState()===Ui.LOADING&&(this.patternImage_=t)}this.color_=e}getKey(){const e=this.getColor();return e?e instanceof CanvasPattern||e instanceof CanvasGradient?Nr(e):typeof e=="object"&&"src"in e?e.src+":"+e.offset:gx(e).toString():""}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}function Sz(n,e,t,i){return t!==void 0&&i!==void 0?[t/n,i/e]:t!==void 0?t/n:i!==void 0?i/e:1}class bx extends e6{constructor(e){e=e||{};const t=e.opacity!==void 0?e.opacity:1,i=e.rotation!==void 0?e.rotation:0,r=e.scale!==void 0?e.scale:1,o=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:t,rotation:i,scale:r,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:o,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const s=e.img!==void 0?e.img:null;let a=e.src;ws(!(a!==void 0&&s),"`image` and `src` cannot be provided at the same time"),(a===void 0||a.length===0)&&s&&(a=s.src||Nr(s)),ws(a!==void 0&&a.length>0,"A defined and non-empty `src` or `image` must be provided"),ws(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let c;if(e.src!==void 0?c=Ui.IDLE:s!==void 0&&("complete"in s?s.complete?c=s.src?Ui.LOADED:Ui.IDLE:c=Ui.LOADING:c=Ui.LOADED),this.color_=e.color!==void 0?gx(e.color):null,this.iconImage_=kP(s,a,this.crossOrigin_,c,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,this.initialOptions_,e.width!==void 0||e.height!==void 0){let h,m;if(e.size)[h,m]=e.size;else{const v=this.getImage(1);if(v.width&&v.height)h=v.width,m=v.height;else if(v instanceof HTMLImageElement){this.initialOptions_=e;const x=()=>{if(this.unlistenImageChange(x),!this.initialOptions_)return;const E=this.iconImage_.getSize();this.setScale(Sz(E[0],E[1],e.width,e.height))};this.listenImageChange(x);return}}h!==void 0&&this.setScale(Sz(h,m,e.width,e.height))}}clone(){let e,t,i;return this.initialOptions_?(t=this.initialOptions_.width,i=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new bx({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:t,height:i,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const r=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!r)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=r[0]),this.anchorYUnits_=="fraction"&&(e[1]*=r[1])}if(this.anchorOrigin_!="top-left"){if(!r)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+r[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+r[1])}this.normalizedAnchor_=e}const t=this.getDisplacement(),i=this.getScaleArray();return[e[0]-t[0]/i[0],e[1]+t[1]/i[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const t=this.getSize(),i=this.iconImage_.getSize();if(!t||!i)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=i[0]-t[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=i[1]-t[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==Ui.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){const e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==Ui.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(Er.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(Er.CHANGE,e)}ready(){return this.iconImage_.ready()}}class Fy{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new Fy({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}class lf{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=Ez,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new lf({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(t){return t.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=Ez,this.geometry_=e}setZIndex(e){this.zIndex_=e}}function S1e(n){let e;if(typeof n=="function")e=n;else{let t;Array.isArray(n)?t=n:(ws(typeof n.getZIndex=="function","Expected an `Style` or an array of `Style`"),t=[n]),e=function(){return t}}return e}let hO=null;function FX(n,e){if(!hO){const t=new s1({color:"rgba(255,255,255,0.4)"}),i=new Fy({color:"#3399CC",width:1.25});hO=[new lf({image:new hM({fill:t,stroke:i,radius:5}),fill:t,stroke:i})]}return hO}function Ez(n){return n.getGeometry()}const E1e="#333";let zX=class jX{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.keepUpright_=e.keepUpright,this.scale_=e.scale,this.scaleArray_=nh(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new s1({color:E1e}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new jX({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),keepUpright:this.getKeepUpright(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getKeepUpright(){return this.keepUpright_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setKeepUpright(e){this.keepUpright_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=nh(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}};function B1e(n){return!0}function O1e(n){const e=TX(),t=I1e(n,e),i=DX();return function(r,o){if(i.properties=r.getPropertiesInternal(),i.resolution=o,e.featureId){const s=r.getId();s!==void 0?i.featureId=s:i.featureId=null}return e.geometryType&&(i.geometryType=RX(r.getGeometry())),t(i)}}function Bz(n){const e=TX(),t=n.length,i=new Array(t);for(let s=0;s<t;++s)i[s]=p9(n[s],e);const r=DX(),o=new Array(t);return function(s,a){if(r.properties=s.getPropertiesInternal(),r.resolution=a,e.featureId){const h=s.getId();h!==void 0?r.featureId=h:r.featureId=null}let c=0;for(let h=0;h<t;++h){const m=i[h](r);m&&(o[c]=m,c+=1)}return o.length=c,o}}function I1e(n,e){const t=n.length,i=new Array(t);for(let r=0;r<t;++r){const o=n[r],s="filter"in o?_1(o.filter,Th,e):B1e;let a;if(Array.isArray(o.style)){const c=o.style.length;a=new Array(c);for(let h=0;h<c;++h)a[h]=p9(o.style[h],e)}else a=[p9(o.style,e)];i[r]={filter:s,styles:a}}return function(r){const o=[];let s=!1;for(let a=0;a<t;++a){const c=i[a].filter;if(c(r)&&!(n[a].else&&s)){s=!0;for(const h of i[a].styles){const m=h(r);m&&o.push(m)}}}return o}}function p9(n,e){const t=o4(n,"",e),i=s4(n,"",e),r=k1e(n,e),o=T1e(n,e),s=vd(n,"z-index",e);if(!t&&!i&&!r&&!o&&!tv(n))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(n));const a=new lf;return function(c){let h=!0;if(t){const m=t(c);m&&(h=!1),a.setFill(m)}if(i){const m=i(c);m&&(h=!1),a.setStroke(m)}if(r){const m=r(c);m&&(h=!1),a.setText(m)}if(o){const m=o(c);m&&(h=!1),a.setImage(m)}return s&&a.setZIndex(s(c)),h?null:a}}function o4(n,e,t){let i;if(e+"fill-pattern-src"in n)i=U1e(n,e+"fill-",t);else{if(n[e+"fill-color"]==="none")return o=>null;i=TP(n,e+"fill-color",t)}if(!i)return null;const r=new s1;return function(o){const s=i(o);return s===SP?null:(r.setColor(s),r)}}function s4(n,e,t){const i=vd(n,e+"stroke-width",t),r=TP(n,e+"stroke-color",t);if(!i&&!r)return null;const o=n1(n,e+"stroke-line-cap",t),s=n1(n,e+"stroke-line-join",t),a=NX(n,e+"stroke-line-dash",t),c=vd(n,e+"stroke-line-dash-offset",t),h=vd(n,e+"stroke-miter-limit",t),m=new Fy;return function(v){if(r){const x=r(v);if(x===SP)return null;m.setColor(x)}if(i&&m.setWidth(i(v)),o){const x=o(v);if(x!=="butt"&&x!=="round"&&x!=="square")throw new Error("Expected butt, round, or square line cap");m.setLineCap(x)}if(s){const x=s(v);if(x!=="bevel"&&x!=="round"&&x!=="miter")throw new Error("Expected bevel, round, or miter line join");m.setLineJoin(x)}return a&&m.setLineDash(a(v)),c&&m.setLineDashOffset(c(v)),h&&m.setMiterLimit(h(v)),m}}function k1e(n,e){const t="text-",i=n1(n,t+"value",e);if(!i)return null;const r=o4(n,t,e),o=o4(n,t+"background-",e),s=s4(n,t,e),a=s4(n,t+"background-",e),c=n1(n,t+"font",e),h=vd(n,t+"max-angle",e),m=vd(n,t+"offset-x",e),v=vd(n,t+"offset-y",e),x=q_(n,t+"overflow",e),E=n1(n,t+"placement",e),D=vd(n,t+"repeat",e),P=n6(n,t+"scale",e),F=q_(n,t+"rotate-with-view",e),W=vd(n,t+"rotation",e),q=n1(n,t+"align",e),V=n1(n,t+"justify",e),H=n1(n,t+"baseline",e),X=q_(n,t+"keep-upright",e),Z=NX(n,t+"padding",e),G=i6(n,t+"declutter-mode"),oe=new zX({declutterMode:G});return function(ue){if(oe.setText(i(ue)),r&&oe.setFill(r(ue)),o&&oe.setBackgroundFill(o(ue)),s&&oe.setStroke(s(ue)),a&&oe.setBackgroundStroke(a(ue)),c&&oe.setFont(c(ue)),h&&oe.setMaxAngle(h(ue)),m&&oe.setOffsetX(m(ue)),v&&oe.setOffsetY(v(ue)),x&&oe.setOverflow(x(ue)),E){const xe=E(ue);if(xe!=="point"&&xe!=="line")throw new Error("Expected point or line for text-placement");oe.setPlacement(xe)}if(D&&oe.setRepeat(D(ue)),P&&oe.setScale(P(ue)),F&&oe.setRotateWithView(F(ue)),W&&oe.setRotation(W(ue)),q){const xe=q(ue);if(xe!=="left"&&xe!=="center"&&xe!=="right"&&xe!=="end"&&xe!=="start")throw new Error("Expected left, right, center, start, or end for text-align");oe.setTextAlign(xe)}if(V){const xe=V(ue);if(xe!=="left"&&xe!=="right"&&xe!=="center")throw new Error("Expected left, right, or center for text-justify");oe.setJustify(xe)}if(H){const xe=H(ue);if(xe!=="bottom"&&xe!=="top"&&xe!=="middle"&&xe!=="alphabetic"&&xe!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");oe.setTextBaseline(xe)}return Z&&oe.setPadding(Z(ue)),X&&oe.setKeepUpright(X(ue)),oe}}function T1e(n,e){return"icon-src"in n?R1e(n,e):"shape-points"in n?D1e(n,e):"circle-radius"in n?P1e(n,e):null}function R1e(n,e){const t="icon-",i=t+"src",r=GX(n[i],i),o=uS(n,t+"anchor",e),s=n6(n,t+"scale",e),a=vd(n,t+"opacity",e),c=uS(n,t+"displacement",e),h=vd(n,t+"rotation",e),m=q_(n,t+"rotate-with-view",e),v=Iz(n,t+"anchor-origin"),x=kz(n,t+"anchor-x-units"),E=kz(n,t+"anchor-y-units"),D=z1e(n,t+"color"),P=L1e(n,t+"cross-origin"),F=F1e(n,t+"offset"),W=Iz(n,t+"offset-origin"),q=cS(n,t+"width"),V=cS(n,t+"height"),H=K1e(n,t+"size"),X=i6(n,t+"declutter-mode"),Z=new bx({src:r,anchorOrigin:v,anchorXUnits:x,anchorYUnits:E,color:D,crossOrigin:P,offset:F,offsetOrigin:W,height:V,width:q,size:H,declutterMode:X});return function(G){return a&&Z.setOpacity(a(G)),c&&Z.setDisplacement(c(G)),h&&Z.setRotation(h(G)),m&&Z.setRotateWithView(m(G)),s&&Z.setScale(s(G)),o&&Z.setAnchor(o(G)),Z}}function D1e(n,e){const t="shape-",i=t+"points",r=t+"radius",o=m9(n[i],i),s=m9(n[r],r),a=o4(n,t,e),c=s4(n,t,e),h=n6(n,t+"scale",e),m=uS(n,t+"displacement",e),v=vd(n,t+"rotation",e),x=q_(n,t+"rotate-with-view",e),E=cS(n,t+"radius2"),D=cS(n,t+"angle"),P=i6(n,t+"declutter-mode"),F=new t6({points:o,radius:s,radius2:E,angle:D,declutterMode:P});return function(W){return a&&F.setFill(a(W)),c&&F.setStroke(c(W)),m&&F.setDisplacement(m(W)),v&&F.setRotation(v(W)),x&&F.setRotateWithView(x(W)),h&&F.setScale(h(W)),F}}function P1e(n,e){const t="circle-",i=o4(n,t,e),r=s4(n,t,e),o=vd(n,t+"radius",e),s=n6(n,t+"scale",e),a=uS(n,t+"displacement",e),c=vd(n,t+"rotation",e),h=q_(n,t+"rotate-with-view",e),m=i6(n,t+"declutter-mode"),v=new hM({radius:5,declutterMode:m});return function(x){return o&&v.setRadius(o(x)),i&&v.setFill(i(x)),r&&v.setStroke(r(x)),a&&v.setDisplacement(a(x)),c&&v.setRotation(c(x)),h&&v.setRotateWithView(h(x)),s&&v.setScale(s(x)),v}}function vd(n,e,t){if(!(e in n))return;const i=_1(n[e],Qo,t);return function(r){return m9(i(r),e)}}function n1(n,e,t){if(!(e in n))return null;const i=_1(n[e],pd,t);return function(r){return GX(i(r),e)}}function U1e(n,e,t){const i=n1(n,e+"pattern-src",t),r=Oz(n,e+"pattern-offset",t),o=Oz(n,e+"pattern-size",t),s=TP(n,e+"color",t);return function(a){return{src:i(a),offset:r&&r(a),size:o&&o(a),color:s&&s(a)}}}function q_(n,e,t){if(!(e in n))return null;const i=_1(n[e],Th,t);return function(r){const o=i(r);if(typeof o!="boolean")throw new Error(`Expected a boolean for ${e}`);return o}}function TP(n,e,t){if(!(e in n))return null;const i=_1(n[e],dm,t);return function(r){return WX(i(r),e)}}function NX(n,e,t){if(!(e in n))return null;const i=_1(n[e],qb,t);return function(r){return dM(i(r),e)}}function uS(n,e,t){if(!(e in n))return null;const i=_1(n[e],qb,t);return function(r){const o=dM(i(r),e);if(o.length!==2)throw new Error(`Expected two numbers for ${e}`);return o}}function Oz(n,e,t){if(!(e in n))return null;const i=_1(n[e],qb,t);return function(r){return QX(i(r),e)}}function n6(n,e,t){if(!(e in n))return null;const i=_1(n[e],qb|Qo,t);return function(r){return j1e(i(r),e)}}function cS(n,e){const t=n[e];if(t!==void 0){if(typeof t!="number")throw new Error(`Expected a number for ${e}`);return t}}function K1e(n,e){const t=n[e];if(t!==void 0){if(typeof t=="number")return nh(t);if(!Array.isArray(t))throw new Error(`Expected a number or size array for ${e}`);if(t.length!==2||typeof t[0]!="number"||typeof t[1]!="number")throw new Error(`Expected a number or size array for ${e}`);return t}}function L1e(n,e){const t=n[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);return t}}function Iz(n,e){const t=n[e];if(t!==void 0){if(t!=="bottom-left"&&t!=="bottom-right"&&t!=="top-left"&&t!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return t}}function kz(n,e){const t=n[e];if(t!==void 0){if(t!=="pixels"&&t!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return t}}function F1e(n,e){const t=n[e];if(t!==void 0)return dM(t,e)}function i6(n,e){const t=n[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);if(t!=="declutter"&&t!=="obstacle"&&t!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return t}}function z1e(n,e){const t=n[e];if(t!==void 0)return WX(t,e)}function dM(n,e){if(!Array.isArray(n))throw new Error(`Expected an array for ${e}`);const t=n.length;for(let i=0;i<t;++i)if(typeof n[i]!="number")throw new Error(`Expected an array of numbers for ${e}`);return n}function GX(n,e){if(typeof n!="string")throw new Error(`Expected a string for ${e}`);return n}function m9(n,e){if(typeof n!="number")throw new Error(`Expected a number for ${e}`);return n}function WX(n,e){if(typeof n=="string")return n;const t=dM(n,e),i=t.length;if(i<3||i>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return t}function QX(n,e){const t=dM(n,e);if(t.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return t}function j1e(n,e){return typeof n=="number"?n:QX(n,e)}const Tz={RENDER_ORDER:"renderOrder"};class RP extends jx{constructor(e){e=e||{};const t=Object.assign({},e);delete t.style,delete t.renderBuffer,delete t.updateWhileAnimating,delete t.updateWhileInteracting,super(t),this.declutter_=e.declutter?String(e.declutter):void 0,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(Tz.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e,t){const i=this.getDeclutter();i in e.declutter||(e.declutter[i]=new IX(9)),this.getRenderer().renderDeclutter(e,t)}setRenderOrder(e){this.set(Tz.RENDER_ORDER,e)}setStyle(e){this.style_=e===void 0?FX:e;const t=N1e(e);this.styleFunction_=e===null?void 0:S1e(t),this.changed()}setDeclutter(e){this.declutter_=e?String(e):void 0,this.changed()}}function N1e(n){if(n===void 0)return FX;if(!n)return null;if(typeof n=="function"||n instanceof lf)return n;if(!Array.isArray(n))return Bz([n]);if(n.length===0)return[];const e=n.length,t=n[0];if(t instanceof lf){const r=new Array(e);for(let o=0;o<e;++o){const s=n[o];if(!(s instanceof lf))throw new Error("Expected a list of style instances");r[o]=s}return r}if("style"in t){const r=new Array(e);for(let o=0;o<e;++o){const s=n[o];if(!("style"in s))throw new Error("Expected a list of rules with a style property");r[o]=s}return O1e(r)}return Bz(n)}class YX extends Em{constructor(e,t,i,r){super(e),this.inversePixelTransform=t,this.frameState=i,this.context=r}}class G1e extends nM{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,t){Tr()}calculateMatrices2D(e){const t=e.viewState,i=e.coordinateToPixelTransform,r=e.pixelToCoordinateTransform;s0(i,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),uX(r,i)}forEachFeatureAtCoordinate(e,t,i,r,o,s,a,c){let h;const m=t.viewState;function v(H,X,Z,G){return o.call(s,X,H?Z:null,G)}const x=m.projection,E=eP(e.slice(),x),D=[[0,0]];if(x.canWrapX()&&r){const H=x.getExtent(),X=ns(H);D.push([-X,0],[X,0])}const P=t.layerStatesArray,F=P.length,W=[],q=[];for(let H=0;H<D.length;H++)for(let X=F-1;X>=0;--X){const Z=P[X],G=Z.layer;if(G.hasRenderer()&&wP(Z,m)&&a.call(c,G)){const oe=G.getRenderer(),ue=G.getSource();if(oe&&ue){const xe=ue.getWrapX()?E:e,me=v.bind(null,Z.managed);q[0]=xe[0]+D[H][0],q[1]=xe[1]+D[H][1],h=oe.forEachFeatureAtCoordinate(q,t,i,me,W)}if(h)return h}}if(W.length===0)return;const V=1/W.length;return W.forEach((H,X)=>H.distanceSq+=X*V),W.sort((H,X)=>H.distanceSq-X.distanceSq),W.some(H=>h=H.callback(H.feature,H.layer,H.geometry)),h}hasFeatureAtCoordinate(e,t,i,r,o,s){return this.forEachFeatureAtCoordinate(e,t,i,r,$3,this,o,s)!==void 0}getMap(){return this.map_}renderFrame(e){Tr()}scheduleExpireIconCache(e){ep.canExpireCache()&&e.postRenderFunctions.push(W1e)}}function W1e(n,e){ep.expire()}class Q1e extends G1e{constructor(e){super(e),this.fontChangeListenerKey_=qo(db,fx.PROPERTYCHANGE,e.redrawText,e),this.element_=document.createElement("div");const t=this.element_.style;t.position="absolute",t.width="100%",t.height="100%",t.zIndex="0",this.element_.className=JE+" ol-layers";const i=e.getViewport();i.insertBefore(this.element_,i.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,t){const i=this.getMap();if(i.hasListener(e)){const r=new YX(e,void 0,t);i.dispatchEvent(r)}}disposeInternal(){Ba(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(Jf.PRECOMPOSE,e);const t=e.layerStatesArray.sort((a,c)=>a.zIndex-c.zIndex);t.some(a=>a.layer instanceof RP&&a.layer.getDeclutter())&&(e.declutter={});const r=e.viewState;this.children_.length=0;const o=[];let s=null;for(let a=0,c=t.length;a<c;++a){const h=t[a];e.layerIndex=a;const m=h.layer,v=m.getSourceState();if(!wP(h,r)||v!="ready"&&v!="undefined"){m.unrender();continue}const x=m.render(e,s);x&&(x!==s&&(this.children_.push(x),s=x),o.push(h))}this.declutter(e,o),t0e(this.element_,this.children_),this.dispatchRenderEvent(Jf.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}declutter(e,t){if(e.declutter){for(let i=t.length-1;i>=0;--i){const r=t[i],o=r.layer;o.getDeclutter()&&o.renderDeclutter(e,r)}t.forEach(i=>i.layer.renderDeferred(e))}}}function qX(n){if(n instanceof jx){n.setMapInternal(null);return}n instanceof lC&&n.getLayers().forEach(qX)}function VX(n,e){if(n instanceof jx){n.setMapInternal(e);return}if(n instanceof lC){const t=n.getLayers().getArray();for(let i=0,r=t.length;i<r;++i)VX(t[i],e)}}let a4=class extends Bm{constructor(e){super(),e=e||{},this.on,this.once,this.un;const t=Y1e(e);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:Mme,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=Cd(),this.pixelToCoordinateTransform_=Cd(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=t.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=t.controls||o0e(),this.interactions=t.interactions||E0e({onFocusOnly:!0}),this.overlays_=t.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new QZ(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(ZA.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(ZA.VIEW,this.handleViewChanged_),this.addChangeListener(ZA.SIZE,this.handleSizeChanged_),this.addChangeListener(ZA.TARGET,this.handleTargetChanged_),this.setProperties(t.values);const i=this;e.view&&!(e.view instanceof hm)&&e.view.then(function(r){i.setView(new hm(r))}),this.controls.addEventListener(fd.ADD,r=>{r.element.setMap(this)}),this.controls.addEventListener(fd.REMOVE,r=>{r.element.setMap(null)}),this.interactions.addEventListener(fd.ADD,r=>{r.element.setMap(this)}),this.interactions.addEventListener(fd.REMOVE,r=>{r.element.setMap(null)}),this.overlays_.addEventListener(fd.ADD,r=>{this.addOverlayInternal_(r.element)}),this.overlays_.addEventListener(fd.REMOVE,r=>{const o=r.element.getId();o!==void 0&&delete this.overlayIdIndex_[o.toString()],r.element.setMap(null)}),this.controls.forEach(r=>{r.setMap(this)}),this.interactions.forEach(r=>{r.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){VX(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const t=e.getId();t!==void 0&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,t,i){if(!this.frameState_||!this.renderer_)return;const r=this.getCoordinateFromPixelInternal(e);i=i!==void 0?i:{};const o=i.hitTolerance!==void 0?i.hitTolerance:0,s=i.layerFilter!==void 0?i.layerFilter:$3,a=i.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(r,this.frameState_,o,a,t,null,s,null)}getFeaturesAtPixel(e,t){const i=[];return this.forEachFeatureAtPixel(e,function(r){i.push(r)},t),i}getAllLayers(){const e=[];function t(i){i.forEach(function(r){r instanceof lC?t(r.getLayers()):e.push(r)})}return t(this.getLayers()),e}hasFeatureAtPixel(e,t){if(!this.frameState_||!this.renderer_)return!1;const i=this.getCoordinateFromPixelInternal(e);t=t!==void 0?t:{};const r=t.layerFilter!==void 0?t.layerFilter:$3,o=t.hitTolerance!==void 0?t.hitTolerance:0,s=t.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,o,s,r,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const i=this.viewport_.getBoundingClientRect(),r=this.getSize(),o=i.width/r[0],s=i.height/r[1],a="changedTouches"in e?e.changedTouches[0]:e;return[(a.clientX-i.left)/o,(a.clientY-i.top)/s]}getTarget(){return this.get(ZA.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return l9(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const t=this.frameState_;return t?Hu(t.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const t=this.overlayIdIndex_[e.toString()];return t!==void 0?t:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(ZA.LAYERGROUP)}setLayers(e){const t=this.getLayerGroup();if(e instanceof Gg){t.setLayers(e);return}const i=t.getLayers();i.clear(),i.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,i=e.length;t<i;++t){const r=e[t];if(!r.visible)continue;const o=r.layer.getRenderer();if(o&&!o.ready)return!0;const s=r.layer.getSource();if(s&&s.loading)return!0}return!1}getPixelFromCoordinate(e){const t=e1(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}getPixelFromCoordinateInternal(e){const t=this.frameState_;return t?Hu(t.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(ZA.SIZE)}getView(){return this.get(ZA.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,t,i,r){return Bme(this.frameState_,e,t,i,r)}handleBrowserEvent(e,t){t=t||e.type;const i=new Sy(t,this,e);this.handleMapBrowserEvent(i)}handleMapBrowserEvent(e){if(!this.frameState_)return;const t=e.originalEvent,i=t.type;if(i===XT.POINTERDOWN||i===Er.WHEEL||i===Er.KEYDOWN){const r=this.getOwnerDocument(),o=this.viewport_.getRootNode?this.viewport_.getRootNode():r,s=t.target,a=o instanceof ShadowRoot?o.host===s?o.host.ownerDocument:o:o===r?r.documentElement:o;if(this.overlayContainerStopEvent_.contains(s)||!a.contains(s))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const r=this.getInteractions().getArray().slice();for(let o=r.length-1;o>=0;o--){const s=r[o];if(s.getMap()!==this||!s.getActive()||!this.getTargetElement())continue;if(!s.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){let r=this.maxTilesLoading_,o=r;if(e){const s=e.viewHints;if(s[Cl.ANIMATING]||s[Cl.INTERACTING]){const a=Date.now()-e.time>8;r=a?0:8,o=a?0:2}}t.getTilesLoading()<r&&(t.reprioritize(),t.loadMoreTiles(r,o))}e&&this.renderer_&&!e.animate&&(this.renderComplete_?(this.hasListener(Jf.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(Jf.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new x_(t1.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new x_(t1.LOADSTART,this,e))));const i=this.postRenderFunctions_;if(e)for(let r=0,o=i.length;r<o;++r)i[r](this,e);i.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let i=0,r=this.targetChangeHandlerKeys_.length;i<r;++i)Ba(this.targetChangeHandlerKeys_[i]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(Er.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(Er.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const i=this.targetElement_.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.unobserve(i.host),this.setSize(void 0)}const e=this.getTarget(),t=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=t,!t)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new Q1e(this)),this.mapBrowserEventHandler_=new Sme(this,this.moveTolerance_);for(const o in Jl)this.mapBrowserEventHandler_.addEventListener(Jl[o],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(Er.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(Er.WHEEL,this.boundHandleBrowserEvent_,WZ?{passive:!1}:!1);let i;if(this.keyboardEventTarget_)i=this.keyboardEventTarget_;else{const o=t.getRootNode();i=o instanceof ShadowRoot?o.host:t}this.targetChangeHandlerKeys_=[qo(i,Er.KEYDOWN,this.handleBrowserEvent,this),qo(i,Er.KEYPRESS,this.handleBrowserEvent,this)];const r=t.getRootNode();r instanceof ShadowRoot&&this.resizeObserver_.observe(r.host),this.resizeObserver_.observe(t)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(Ba(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Ba(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=qo(e,fx.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=qo(e,Er.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(Ba),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new By("addlayer",e)),this.layerGroupPropertyListenerKeys_=[qo(e,fx.PROPERTYCHANGE,this.render,this),qo(e,Er.CHANGE,this.render,this),qo(e,"addlayer",this.handleLayerAdd_,this),qo(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){if(!this.frameState_)return;const e=this.frameState_.layerStatesArray;for(let t=0,i=e.length;t<i;++t){const r=e[t].layer;r.hasRenderer()&&r.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){qX(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const t=this.getSize(),i=this.getView(),r=this.frameState_;let o=null;if(t!==void 0&&bz(t)&&i&&i.isDef()){const s=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=i.getState();if(o={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:nS(a.center,a.resolution,a.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:a,viewHints:s,wantedTiles:{},mapId:Nr(this),renderTargets:{}},a.nextCenter&&a.nextResolution){const c=isNaN(a.nextRotation)?a.rotation:a.nextRotation;o.nextExtent=nS(a.nextCenter,a.nextResolution,c,t)}}this.frameState_=o,this.renderer_.renderFrame(o),o&&(o.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,o.postRenderFunctions),r&&(!this.previousExtent_||!oC(this.previousExtent_)&&!m1(o.extent,this.previousExtent_))&&(this.dispatchEvent(new x_(t1.MOVESTART,this,r)),this.previousExtent_=Fx(this.previousExtent_)),this.previousExtent_&&!o.viewHints[Cl.ANIMATING]&&!o.viewHints[Cl.INTERACTING]&&!m1(o.extent,this.previousExtent_)&&(this.dispatchEvent(new x_(t1.MOVEEND,this,o)),YZ(o.extent,this.previousExtent_))),this.dispatchEvent(new x_(t1.POSTRENDER,this,o)),this.renderComplete_=(this.hasListener(t1.LOADSTART)||this.hasListener(t1.LOADEND)||this.hasListener(Jf.RENDERCOMPLETE))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const t=this.getLayerGroup();t&&this.handleLayerRemove_(new By("removelayer",t)),this.set(ZA.LAYERGROUP,e)}setSize(e){this.set(ZA.SIZE,e)}setTarget(e){this.set(ZA.TARGET,e)}setView(e){if(!e||e instanceof hm){this.set(ZA.VIEW,e);return}this.set(ZA.VIEW,new hm);const t=this;e.then(function(i){t.setView(new hm(i))})}updateSize(){const e=this.getTargetElement();let t;if(e){const r=getComputedStyle(e),o=e.offsetWidth-parseFloat(r.borderLeftWidth)-parseFloat(r.paddingLeft)-parseFloat(r.paddingRight)-parseFloat(r.borderRightWidth),s=e.offsetHeight-parseFloat(r.borderTopWidth)-parseFloat(r.paddingTop)-parseFloat(r.paddingBottom)-parseFloat(r.borderBottomWidth);!isNaN(o)&&!isNaN(s)&&(t=[Math.max(0,o),Math.max(0,s)],!bz(t)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&tX("No map visible because the map container's width or height are 0."))}const i=this.getSize();t&&(!i||!cv(t,i))&&(this.setSize(t),this.updateViewportSize_(t))}updateViewportSize_(e){const t=this.getView();t&&t.setViewportSize(e)}};function Y1e(n){let e=null;n.keyboardEventTarget!==void 0&&(e=typeof n.keyboardEventTarget=="string"?document.getElementById(n.keyboardEventTarget):n.keyboardEventTarget);const t={},i=n.layers&&typeof n.layers.getLayers=="function"?n.layers:new lC({layers:n.layers});t[ZA.LAYERGROUP]=i,t[ZA.TARGET]=n.target,t[ZA.VIEW]=n.view instanceof hm?n.view:new hm;let r;n.controls!==void 0&&(Array.isArray(n.controls)?r=new Gg(n.controls.slice()):(ws(typeof n.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),r=n.controls));let o;n.interactions!==void 0&&(Array.isArray(n.interactions)?o=new Gg(n.interactions.slice()):(ws(typeof n.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),o=n.interactions));let s;return n.overlays!==void 0?Array.isArray(n.overlays)?s=new Gg(n.overlays.slice()):(ws(typeof n.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),s=n.overlays):s=new Gg,{controls:r,interactions:o,keyboardEventTarget:e,overlays:s,values:t}}class r6 extends Bm{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const t=e;this.setGeometry(t)}else{const t=e;this.setProperties(t)}}clone(){const e=new r6(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const t=this.getGeometry();t&&e.setGeometry(t.clone());const i=this.getStyle();return i&&e.setStyle(i),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(Ba(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=qo(e,Er.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?q1e(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function q1e(n){if(typeof n=="function")return n;let e;return Array.isArray(n)?e=n:(ws(typeof n.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[n]),function(){return e}}function $X(n,e,t,i){const r=[];let o=ap();for(let s=0,a=t.length;s<a;++s){const c=t[s];o=XD(n,e,c[0],i),r.push((o[0]+o[2])/2,(o[1]+o[3])/2),e=c[c.length-1]}return r}function AS(n,e,t,i,r,o,s){let a,c;const h=(t-e)/i;if(h===1)a=e;else if(h===2)a=e,c=r;else if(h!==0){let m=n[e],v=n[e+1],x=0;const E=[0];for(let F=e+i;F<t;F+=i){const W=n[F],q=n[F+1];x+=Math.sqrt((W-m)*(W-m)+(q-v)*(q-v)),E.push(x),m=W,v=q}const D=r*x,P=mme(E,D);P<0?(c=(D-E[-P-2])/(E[-P-1]-E[-P-2]),a=e+(-P-2)*i):a=e+P*i}s=s>1?s:2,o=o||new Array(s);for(let m=0;m<s;++m)o[m]=a===void 0?NaN:c===void 0?n[a+m]:af(n[a+m],n[a+i+m],c);return o}function g9(n,e,t,i,r,o){if(t==e)return null;let s;if(r<n[e+i-1])return o?(s=n.slice(e,e+i),s[i-1]=r,s):null;if(n[t-1]<r)return o?(s=n.slice(t-i,t),s[i-1]=r,s):null;if(r==n[e+i-1])return n.slice(e,e+i);let a=e/i,c=t/i;for(;a<c;){const x=a+c>>1;r<n[(x+1)*i-1]?c=x:a=x+1}const h=n[a*i-1];if(r==h)return n.slice((a-1)*i,(a-1)*i+i);const m=n[(a+1)*i-1],v=(r-h)/(m-h);s=[];for(let x=0;x<i-1;++x)s.push(af(n[(a-1)*i+x],n[a*i+x],v));return s.push(r),s}function V1e(n,e,t,i,r,o,s){if(s)return g9(n,e,t[t.length-1],i,r,o);let a;if(r<n[i-1])return o?(a=n.slice(0,i),a[i-1]=r,a):null;if(n[n.length-1]<r)return o?(a=n.slice(n.length-i),a[i-1]=r,a):null;for(let c=0,h=t.length;c<h;++c){const m=t[c];if(e!=m){if(r<n[e+i-1])return null;if(r<=n[m-1])return g9(n,e,m,i,r,!1);e=m}}return null}class hS extends AX{constructor(e){super(),this.geometries_=e,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(Ba),this.changeEventsKeys_.length=0}listenGeometriesChange_(){const e=this.geometries_;for(let t=0,i=e.length;t<i;++t)this.changeEventsKeys_.push(qo(e[t],Er.CHANGE,this.changed,this))}clone(){const e=new hS(dO(this.geometries_));return e.applyProperties(this),e}closestPointXY(e,t,i,r){if(r<rC(this.getExtent(),e,t))return r;const o=this.geometries_;for(let s=0,a=o.length;s<a;++s)r=o[s].closestPointXY(e,t,i,r);return r}containsXY(e,t){const i=this.geometries_;for(let r=0,o=i.length;r<o;++r)if(i[r].containsXY(e,t))return!0;return!1}computeExtent(e){Fx(e);const t=this.geometries_;for(let i=0,r=t.length;i<r;++i)VZ(e,t[i].getExtent());return e}getGeometries(){return dO(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const t=this.geometries_;for(let i=0,r=t.length;i<r;++i)t[i].getType()===this.getType()?e=e.concat(t[i].getGeometriesArrayRecursive()):e.push(t[i]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=[],i=this.geometries_;let r=!1;for(let o=0,s=i.length;o<s;++o){const a=i[o],c=a.getSimplifiedGeometry(e);t.push(c),c!==a&&(r=!0)}return r?new hS(t):(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getType(){return"GeometryCollection"}intersectsExtent(e){const t=this.geometries_;for(let i=0,r=t.length;i<r;++i)if(t[i].intersectsExtent(e))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(e,t){const i=this.geometries_;for(let r=0,o=i.length;r<o;++r)i[r].rotate(e,t);this.changed()}scale(e,t,i){i||(i=vf(this.getExtent()));const r=this.geometries_;for(let o=0,s=r.length;o<s;++o)r[o].scale(e,t,i);this.changed()}setGeometries(e){this.setGeometriesArray(dO(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const t=this.geometries_;for(let i=0,r=t.length;i<r;++i)t[i].applyTransform(e);this.changed()}translate(e,t){const i=this.geometries_;for(let r=0,o=i.length;r<o;++r)i[r].translate(e,t);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function dO(n){return n.map(e=>e.clone())}function DP(n,e,t,i){let r=n[e],o=n[e+1],s=0;for(let a=e+i;a<t;a+=i){const c=n[a],h=n[a+1];s+=Math.sqrt((c-r)*(c-r)+(h-o)*(h-o)),r=c,o=h}return s}class Vb extends sC{constructor(e,t){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendCoordinate(e){i0(this.flatCoordinates,e),this.changed()}clone(){const e=new Vb(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,r){return r<rC(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(lP(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),cP(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,t,i,r))}forEachSegment(e){return gX(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,t){return this.layout!="XYM"&&this.layout!="XYZM"?null:(t=t!==void 0?t:!1,g9(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t))}getCoordinates(){return Ly(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,t){return AS(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,this.stride)}getLength(){return DP(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const t=[];return t.length=ZE(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new Vb(t,"XY")}getType(){return"LineString"}intersectsExtent(e){return XE(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,this.getExtent())}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=HE(this.flatCoordinates,0,e,this.stride),this.changed()}}class l4 extends sC{constructor(e,t,i){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,t);else if(t!==void 0&&i)this.setFlatCoordinates(t,e),this.ends_=i;else{const r=e,o=[],s=[];for(let c=0,h=r.length;c<h;++c){const m=r[c];i0(o,m.getFlatCoordinates()),s.push(o.length)}const a=r.length===0?this.getLayout():r[0].getLayout();this.setFlatCoordinates(a,o),this.ends_=s}}appendLineString(e){i0(this.flatCoordinates,e.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new l4(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,i,r){return r<rC(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(uP(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),AP(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,t,i,r))}getCoordinateAtM(e,t,i){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(t=t!==void 0?t:!1,i=i!==void 0?i:!1,V1e(this.flatCoordinates,0,this.ends_,this.stride,e,t,i))}getCoordinates(){return J3(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new Vb(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,t=this.ends_,i=this.layout,r=[];let o=0;for(let s=0,a=t.length;s<a;++s){const c=t[s],h=new Vb(e.slice(o,c),i);r.push(h),o=c}return r}getLength(){const e=this.ends_;let t=0,i=0;for(let r=0,o=e.length;r<o;++r)i+=DP(this.flatCoordinates,t,e[r],this.stride),t=e[r];return i}getFlatMidpoints(){const e=[],t=this.flatCoordinates;let i=0;const r=this.ends_,o=this.stride;for(let s=0,a=r.length;s<a;++s){const c=r[s],h=AS(t,i,c,o,.5);i0(e,h),i=c}return e}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=pX(this.flatCoordinates,0,this.ends_,this.stride,e,t,0,i),new l4(t,"XY",i)}getType(){return"MultiLineString"}intersectsExtent(e){return zge(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=lM(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}class fM extends sC{constructor(e,t){super(),t&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendPoint(e){i0(this.flatCoordinates,e.getFlatCoordinates()),this.changed()}clone(){const e=new fM(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,r){if(r<rC(this.getExtent(),e,t))return r;const o=this.flatCoordinates,s=this.stride;for(let a=0,c=o.length;a<c;a+=s){const h=Pb(e,t,o[a],o[a+1]);if(h<r){r=h;for(let m=0;m<s;++m)i[m]=o[a+m];i.length=s}}return r}getCoordinates(){return Ly(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){const t=this.flatCoordinates.length/this.stride;return e<0||t<=e?null:new Yb(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,t=this.layout,i=this.stride,r=[];for(let o=0,s=e.length;o<s;o+=i){const a=new Yb(e.slice(o,o+i),t);r.push(a)}return r}getType(){return"MultiPoint"}intersectsExtent(e){const t=this.flatCoordinates,i=this.stride;for(let r=0,o=t.length;r<o;r+=i){const s=t[r],a=t[r+1];if(ZD(e,s,a))return!0}return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=HE(this.flatCoordinates,0,e,this.stride),this.changed()}}class u4 extends sC{constructor(e,t,i){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!i&&!Array.isArray(e[0])){const r=e,o=[],s=[];for(let a=0,c=r.length;a<c;++a){const h=r[a],m=o.length,v=h.getEnds();for(let x=0,E=v.length;x<E;++x)v[x]+=m;i0(o,h.getFlatCoordinates()),s.push(v)}t=r.length===0?this.getLayout():r[0].getLayout(),e=o,i=s}t!==void 0&&i?(this.setFlatCoordinates(t,e),this.endss_=i):this.setCoordinates(e,t)}appendPolygon(e){let t;if(!this.flatCoordinates)this.flatCoordinates=e.getFlatCoordinates().slice(),t=e.getEnds().slice(),this.endss_.push();else{const i=this.flatCoordinates.length;i0(this.flatCoordinates,e.getFlatCoordinates()),t=e.getEnds().slice();for(let r=0,o=t.length;r<o;++r)t[r]+=i}this.endss_.push(t),this.changed()}clone(){const e=this.endss_.length,t=new Array(e);for(let r=0;r<e;++r)t[r]=this.endss_[r].slice();const i=new u4(this.flatCoordinates.slice(),this.layout,t);return i.applyProperties(this),i}closestPointXY(e,t,i,r){return r<rC(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Rge(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Dge(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,t,i,r))}containsXY(e,t){return Fge(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,t)}getArea(){return Tge(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),c9(t,0,this.endss_,this.stride,e)):t=this.flatCoordinates,u9(t,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=$X(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=mX(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new fM(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;bX(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=c9(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=Kge(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),t,0,i),new u4(t,"XY",i)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let t;if(e===0)t=0;else{const o=this.endss_[e-1];t=o[o.length-1]}const i=this.endss_[e].slice(),r=i[i.length-1];if(t!==0)for(let o=0,s=i.length;o<s;++o)i[o]-=t;return new g1(this.flatCoordinates.slice(t,r),this.layout,i)}getPolygons(){const e=this.layout,t=this.flatCoordinates,i=this.endss_,r=[];let o=0;for(let s=0,a=i.length;s<a;++s){const c=i[s].slice(),h=c[c.length-1];if(o!==0)for(let v=0,x=c.length;v<x;++v)c[v]-=o;const m=new g1(t.slice(o,h),e,c);r.push(m),o=h}return r}getType(){return"MultiPolygon"}intersectsExtent(e){return jge(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const i=fX(this.flatCoordinates,0,e,this.stride,this.endss_);if(i.length===0)this.flatCoordinates.length=0;else{const r=i[i.length-1];this.flatCoordinates.length=r.length===0?0:r[r.length-1]}this.changed()}}const Rz=Cd();class eh{constructor(e,t,i,r,o,s){this.styleFunction,this.extent_,this.id_=s,this.type_=e,this.flatCoordinates_=t,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=i||null,this.properties_=o,this.squaredTolerance_,this.stride_=r,this.simplifiedGeometry_}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?qZ(this.flatCoordinates_):XD(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=vf(this.getExtent());this.flatInteriorPoints_=fP(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=CX(this.flatCoordinates_,this.ends_),t=$X(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=mX(this.flatCoordinates_,0,e,2,t)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=AS(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let t=0;const i=this.ends_;for(let r=0,o=i.length;r<o;++r){const s=i[r],a=AS(e,t,s,2,.5);i0(this.flatMidpoints_,a),t=s}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,t){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){e=Ns(e);const t=e.getExtent(),i=e.getWorldExtent();if(t&&i){const r=Ju(i)/Ju(t);s0(Rz,i[0],i[3],r,-r,0,0,0),Xy(this.flatCoordinates_,0,this.flatCoordinates_.length,2,Rz,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){return new eh(this.type_,this.flatCoordinates_.slice(),this.ends_?.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=jZ((e,t)=>{if(e===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),t&&this.simplifiedGeometry_.applyTransform(t);const i=this.simplifiedGeometry_.getFlatCoordinates();let r;switch(this.type_){case"LineString":i.length=ZE(i,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,e,i,0),r=[i.length];break;case"MultiLineString":r=[],i.length=pX(i,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,e,i,0,r);break;case"Polygon":r=[],i.length=hP(i,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(e),i,0,r);break}return r&&(this.simplifiedGeometry_=new eh(this.type_,i,r,2,this.properties_,this.id_)),this.squaredTolerance_=e,this.simplifiedGeometry_}),this}}eh.prototype.getFlatCoordinates=eh.prototype.getOrientedFlatCoordinates;class HX{drawCustom(e,t,i,r,o){}drawGeometry(e){}setStyle(e){}drawCircle(e,t,i){}drawFeature(e,t,i){}drawGeometryCollection(e,t,i){}drawLineString(e,t,i){}drawMultiLineString(e,t,i){}drawMultiPoint(e,t,i){}drawMultiPolygon(e,t,i){}drawPoint(e,t,i){}drawPolygon(e,t,i){}drawText(e,t,i){}setFillStrokeStyle(e,t){}setImageStyle(e,t){}setTextStyle(e,t){}}class $1e extends HX{constructor(e,t,i,r,o,s,a){super(),this.context_=e,this.pixelRatio_=t,this.extent_=i,this.transform_=r,this.transformRotation_=r?NE(Math.atan2(r[1],r[0]),10):0,this.viewRotation_=o,this.squaredTolerance_=s,this.userTransform_=a,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=Cd()}drawImages_(e,t,i,r){if(!this.image_)return;const o=Xy(e,t,i,r,this.transform_,this.pixelCoordinates_),s=this.context_,a=this.tmpLocalTransform_,c=s.globalAlpha;this.imageOpacity_!=1&&(s.globalAlpha=c*this.imageOpacity_);let h=this.imageRotation_;this.transformRotation_===0&&(h-=this.viewRotation_),this.imageRotateWithView_&&(h+=this.viewRotation_);for(let m=0,v=o.length;m<v;m+=2){const x=o[m]-this.imageAnchorX_,E=o[m+1]-this.imageAnchorY_;if(h!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const D=x+this.imageAnchorX_,P=E+this.imageAnchorY_;s0(a,D,P,1,1,h,-D,-P),s.save(),s.transform.apply(s,a),s.translate(D,P),s.scale(this.imageScale_[0],this.imageScale_[1]),s.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),s.restore()}else s.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,x,E,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(s.globalAlpha=c)}drawText_(e,t,i,r){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const o=Xy(e,t,i,r,this.transform_,this.pixelCoordinates_),s=this.context_;let a=this.textRotation_;for(this.transformRotation_===0&&(a-=this.viewRotation_),this.textRotateWithView_&&(a+=this.viewRotation_);t<i;t+=r){const c=o[t]+this.textOffsetX_,h=o[t+1]+this.textOffsetY_;a!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(s.save(),s.translate(c-this.textOffsetX_,h-this.textOffsetY_),s.rotate(a),s.translate(this.textOffsetX_,this.textOffsetY_),s.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&s.strokeText(this.text_,0,0),this.textFillState_&&s.fillText(this.text_,0,0),s.restore()):(this.textStrokeState_&&s.strokeText(this.text_,c,h),this.textFillState_&&s.fillText(this.text_,c,h))}}moveToLineTo_(e,t,i,r,o){const s=this.context_,a=Xy(e,t,i,r,this.transform_,this.pixelCoordinates_);s.moveTo(a[0],a[1]);let c=a.length;o&&(c-=2);for(let h=2;h<c;h+=2)s.lineTo(a[h],a[h+1]);return o&&s.closePath(),i}drawRings_(e,t,i,r){for(let o=0,s=i.length;o<s;++o)t=this.moveToLineTo_(e,t,i[o],r,!0);return t}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!tu(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=kge(e,this.transform_,this.pixelCoordinates_),i=t[2]-t[0],r=t[3]-t[1],o=Math.sqrt(i*i+r*r),s=this.context_;s.beginPath(),s.arc(t[0],t[1],o,0,2*Math.PI),this.fillState_&&s.fill(),this.strokeState_&&s.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break}}drawFeature(e,t){const i=t.getGeometryFunction()(e);i&&(this.setStyle(t),this.drawGeometry(i))}drawGeometryCollection(e){const t=e.getGeometriesArray();for(let i=0,r=t.length;i<r;++i)this.drawGeometry(t[i])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),i=e.getStride();this.image_&&this.drawImages_(t,0,t.length,i),this.text_!==""&&this.drawText_(t,0,t.length,i)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),i=e.getStride();this.image_&&this.drawImages_(t,0,t.length,i),this.text_!==""&&this.drawText_(t,0,t.length,i)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!tu(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const t=this.context_,i=e.getFlatCoordinates();t.beginPath(),this.moveToLineTo_(i,0,i.length,e.getStride(),!1),t.stroke()}if(this.text_!==""){const t=e.getFlatMidpoint();this.drawText_(t,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getExtent();if(tu(this.extent_,t)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const i=this.context_,r=e.getFlatCoordinates();let o=0;const s=e.getEnds(),a=e.getStride();i.beginPath();for(let c=0,h=s.length;c<h;++c)o=this.moveToLineTo_(r,o,s[c],a,!1);i.stroke()}if(this.text_!==""){const i=e.getFlatMidpoints();this.drawText_(i,0,i.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!tu(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_;t.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoint();this.drawText_(t,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!tu(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_,i=e.getOrientedFlatCoordinates();let r=0;const o=e.getEndss(),s=e.getStride();t.beginPath();for(let a=0,c=o.length;a<c;++a){const h=o[a];r=this.drawRings_(i,r,h,s)}this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoints();this.drawText_(t,0,t.length,2)}}}setContextFillState_(e){const t=this.context_,i=this.contextFillState_;i?i.fillStyle!=e.fillStyle&&(i.fillStyle=e.fillStyle,t.fillStyle=e.fillStyle):(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const t=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=e.lineCap&&(i.lineCap=e.lineCap,t.lineCap=e.lineCap),cv(i.lineDash,e.lineDash)||t.setLineDash(i.lineDash=e.lineDash),i.lineDashOffset!=e.lineDashOffset&&(i.lineDashOffset=e.lineDashOffset,t.lineDashOffset=e.lineDashOffset),i.lineJoin!=e.lineJoin&&(i.lineJoin=e.lineJoin,t.lineJoin=e.lineJoin),i.lineWidth!=e.lineWidth&&(i.lineWidth=e.lineWidth,t.lineWidth=e.lineWidth),i.miterLimit!=e.miterLimit&&(i.miterLimit=e.miterLimit,t.miterLimit=e.miterLimit),i.strokeStyle!=e.strokeStyle&&(i.strokeStyle=e.strokeStyle,t.strokeStyle=e.strokeStyle)):(t.lineCap=e.lineCap,t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const t=this.context_,i=this.contextTextState_,r=e.textAlign?e.textAlign:i4;i?(i.font!=e.font&&(i.font=e.font,t.font=e.font),i.textAlign!=r&&(i.textAlign=r,t.textAlign=r),i.textBaseline!=e.textBaseline&&(i.textBaseline=e.textBaseline,t.textBaseline=e.textBaseline)):(t.font=e.font,t.textAlign=r,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:r,textBaseline:e.textBaseline})}setFillStrokeStyle(e,t){if(!e)this.fillState_=null;else{const i=e.getColor();this.fillState_={fillStyle:Yg(i||md)}}if(!t)this.strokeState_=null;else{const i=t.getColor(),r=t.getLineCap(),o=t.getLineDash(),s=t.getLineDashOffset(),a=t.getLineJoin(),c=t.getWidth(),h=t.getMiterLimit(),m=o||c1;this.strokeState_={lineCap:r!==void 0?r:yx,lineDash:this.pixelRatio_===1?m:m.map(v=>v*this.pixelRatio_),lineDashOffset:(s||A1)*this.pixelRatio_,lineJoin:a!==void 0?a:vx,lineWidth:(c!==void 0?c:r4)*this.pixelRatio_,miterLimit:h!==void 0?h:t4,strokeStyle:Yg(i||n4)}}}setImageStyle(e){let t;if(!e||!(t=e.getSize())){this.image_=null;return}const i=e.getPixelRatio(this.pixelRatio_),r=e.getAnchor(),o=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=r[0]*i,this.imageAnchorY_=r[1]*i,this.imageHeight_=t[1]*i,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=o[0],this.imageOriginY_=o[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const s=e.getScaleArray();this.imageScale_=[s[0]*this.pixelRatio_/i,s[1]*this.pixelRatio_/i],this.imageWidth_=t[0]*i}setTextStyle(e){if(!e)this.text_="";else{const t=e.getFill();if(!t)this.textFillState_=null;else{const E=t.getColor();this.textFillState_={fillStyle:Yg(E||md)}}const i=e.getStroke();if(!i)this.textStrokeState_=null;else{const E=i.getColor(),D=i.getLineCap(),P=i.getLineDash(),F=i.getLineDashOffset(),W=i.getLineJoin(),q=i.getWidth(),V=i.getMiterLimit();this.textStrokeState_={lineCap:D!==void 0?D:yx,lineDash:P||c1,lineDashOffset:F||A1,lineJoin:W!==void 0?W:vx,lineWidth:q!==void 0?q:r4,miterLimit:V!==void 0?V:t4,strokeStyle:Yg(E||n4)}}const r=e.getFont(),o=e.getOffsetX(),s=e.getOffsetY(),a=e.getRotateWithView(),c=e.getRotation(),h=e.getScaleArray(),m=e.getText(),v=e.getTextAlign(),x=e.getTextBaseline();this.textState_={font:r!==void 0?r:UX,textAlign:v!==void 0?v:i4,textBaseline:x!==void 0?x:lS},this.text_=m!==void 0?Array.isArray(m)?m.reduce((E,D,P)=>E+=P%2?" ":D,""):m:"",this.textOffsetX_=o!==void 0?this.pixelRatio_*o:0,this.textOffsetY_=s!==void 0?this.pixelRatio_*s:0,this.textRotateWithView_=a!==void 0?a:!1,this.textRotation_=c!==void 0?c:0,this.textScale_=[this.pixelRatio_*h[0],this.pixelRatio_*h[1]]}}}const H1e=.5,ZX={Point:rye,LineString:tye,Polygon:sye,MultiPoint:oye,MultiLineString:nye,MultiPolygon:iye,GeometryCollection:eye,Circle:X1e};function Z1e(n,e){return parseInt(Nr(n),10)-parseInt(Nr(e),10)}function y9(n,e){const t=XX(n,e);return t*t}function XX(n,e){return H1e*n/e}function X1e(n,e,t,i,r){const o=t.getFill(),s=t.getStroke();if(o||s){const c=n.getBuilder(t.getZIndex(),"Circle");c.setFillStrokeStyle(o,s),c.drawCircle(e,i,r)}const a=t.getText();if(a&&a.getText()){const c=n.getBuilder(t.getZIndex(),"Text");c.setTextStyle(a),c.drawText(e,i)}}function dS(n,e,t,i,r,o,s,a){const c=[],h=t.getImage();if(h){let x=!0;const E=h.getImageState();E==Ui.LOADED||E==Ui.ERROR?x=!1:E==Ui.IDLE&&h.load(),x&&c.push(h.ready())}const m=t.getFill();m&&m.loading()&&c.push(m.ready());const v=c.length>0;return v&&Promise.all(c).then(()=>r(null)),J1e(n,e,t,i,o,s,a),v}function J1e(n,e,t,i,r,o,s){const a=t.getGeometryFunction()(e);if(!a)return;const c=a.simplifyTransformed(i,r);if(t.getRenderer())JX(n,c,t,e,s);else{const m=ZX[c.getType()];m(n,c,t,e,s,o)}}function JX(n,e,t,i,r){if(e.getType()=="GeometryCollection"){const s=e.getGeometries();for(let a=0,c=s.length;a<c;++a)JX(n,s[a],t,i,r);return}n.getBuilder(t.getZIndex(),"Default").drawCustom(e,i,t.getRenderer(),t.getHitDetectionRenderer(),r)}function eye(n,e,t,i,r,o){const s=e.getGeometriesArray();let a,c;for(a=0,c=s.length;a<c;++a){const h=ZX[s[a].getType()];h(n,s[a],t,i,r,o)}}function tye(n,e,t,i,r){const o=t.getStroke();if(o){const a=n.getBuilder(t.getZIndex(),"LineString");a.setFillStrokeStyle(null,o),a.drawLineString(e,i,r)}const s=t.getText();if(s&&s.getText()){const a=n.getBuilder(t.getZIndex(),"Text");a.setTextStyle(s),a.drawText(e,i,r)}}function nye(n,e,t,i,r){const o=t.getStroke();if(o){const a=n.getBuilder(t.getZIndex(),"LineString");a.setFillStrokeStyle(null,o),a.drawMultiLineString(e,i,r)}const s=t.getText();if(s&&s.getText()){const a=n.getBuilder(t.getZIndex(),"Text");a.setTextStyle(s),a.drawText(e,i,r)}}function iye(n,e,t,i,r){const o=t.getFill(),s=t.getStroke();if(s||o){const c=n.getBuilder(t.getZIndex(),"Polygon");c.setFillStrokeStyle(o,s),c.drawMultiPolygon(e,i,r)}const a=t.getText();if(a&&a.getText()){const c=n.getBuilder(t.getZIndex(),"Text");c.setTextStyle(a),c.drawText(e,i,r)}}function rye(n,e,t,i,r,o){const s=t.getImage(),a=t.getText(),c=a&&a.getText(),h=o&&s&&c?{}:void 0;if(s){if(s.getImageState()!=Ui.LOADED)return;const m=n.getBuilder(t.getZIndex(),"Image");m.setImageStyle(s,h),m.drawPoint(e,i,r)}if(c){const m=n.getBuilder(t.getZIndex(),"Text");m.setTextStyle(a,h),m.drawText(e,i,r)}}function oye(n,e,t,i,r,o){const s=t.getImage(),a=s&&s.getOpacity()!==0,c=t.getText(),h=c&&c.getText(),m=o&&a&&h?{}:void 0;if(a){if(s.getImageState()!=Ui.LOADED)return;const v=n.getBuilder(t.getZIndex(),"Image");v.setImageStyle(s,m),v.drawMultiPoint(e,i,r)}if(h){const v=n.getBuilder(t.getZIndex(),"Text");v.setTextStyle(c,m),v.drawText(e,i,r)}}function sye(n,e,t,i,r){const o=t.getFill(),s=t.getStroke();if(o||s){const c=n.getBuilder(t.getZIndex(),"Polygon");c.setFillStrokeStyle(o,s),c.drawPolygon(e,i,r)}const a=t.getText();if(a&&a.getText()){const c=n.getBuilder(t.getZIndex(),"Text");c.setTextStyle(a),c.drawText(e,i,r)}}let aye=!1;function eJ(n,e,t,i,r,o,s){const a=new XMLHttpRequest;a.open("GET",typeof n=="function"?n(t,i,r):n,!0),e.getType()=="arraybuffer"&&(a.responseType="arraybuffer"),a.withCredentials=aye,a.onload=function(c){if(!a.status||a.status>=200&&a.status<300){const h=e.getType();try{let m;h=="text"||h=="json"?m=a.responseText:h=="xml"?m=a.responseXML||a.responseText:h=="arraybuffer"&&(m=a.response),m?o(e.readFeatures(m,{extent:t,featureProjection:r}),e.readProjection(m)):s()}catch{s()}}else s()},a.onerror=s,a.send()}function Dz(n,e){return function(t,i,r,o,s){eJ(n,e,t,i,r,(a,c)=>{this.addFeatures(a),o!==void 0&&o(a)},()=>{this.changed(),s!==void 0&&s()})}}function lye(n,e){return[[-1/0,-1/0,1/0,1/0]]}function uye(n,e){return[n]}class Pz{constructor(e){this.rbush_=new IX(e),this.items_={}}insert(e,t){const i={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(i),this.items_[Nr(t)]=i}load(e,t){const i=new Array(t.length);for(let r=0,o=t.length;r<o;r++){const s=e[r],a=t[r],c={minX:s[0],minY:s[1],maxX:s[2],maxY:s[3],value:a};i[r]=c,this.items_[Nr(a)]=c}this.rbush_.load(i)}remove(e){const t=Nr(e),i=this.items_[t];return delete this.items_[t],this.rbush_.remove(i)!==null}update(e,t){const i=this.items_[Nr(t)],r=[i.minX,i.minY,i.maxX,i.maxY];m1(r,e)||(this.remove(t),this.insert(e,t))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(e){const t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(t).map(function(r){return r.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,t){return this.forEach_(this.getInExtent(e),t)}forEach_(e,t){let i;for(let r=0,o=e.length;r<o;r++)if(i=t(e[r]),i)return i;return i}isEmpty(){return tv(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const t=this.rbush_.toJSON();return p1(t.minX,t.minY,t.maxX,t.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const t in e.items_)this.items_[t]=e.items_[t]}}class Nx extends Bm{constructor(e){super(),this.projection=Ns(e.projection),this.attributions_=Uz(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible??!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const t=this;this.viewPromise_=new Promise(function(i,r){t.viewResolver=i,t.viewRejector=r})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=Uz(e),this.changed()}setState(e){this.state_=e,this.changed()}}function Uz(n){return n?typeof n=="function"?n:(Array.isArray(n)||(n=[n]),e=>n):null}const Nf={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};class by extends Em{constructor(e,t,i){super(e),this.feature=t,this.features=i}}class Aw extends Nx{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=H3,this.format_=e.format||null,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(ws(this.format_,"`format` must be set when `url` is set"),this.loader_=Dz(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:lye;const t=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=t?new Pz:null,this.loadedExtentsRtree_=new Pz,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let i,r;Array.isArray(e.features)?r=e.features:e.features&&(i=e.features,r=i.getArray()),!t&&i===void 0&&(i=new Gg(r)),r!==void 0&&this.addFeaturesInternal(r),i!==void 0&&this.bindFeaturesCollection_(i)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const t=Nr(e);if(!this.addToIndex_(t,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(t,e);const i=e.getGeometry();if(i){const r=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(r,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new by(Nf.ADDFEATURE,e))}setupChangeEvents_(e,t){t instanceof eh||(this.featureChangeKeys_[e]=[qo(t,Er.CHANGE,this.handleFeatureChange_,this),qo(t,fx.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(e,t){let i=!0;if(t.getId()!==void 0){const r=String(t.getId());if(!(r in this.idIndex_))this.idIndex_[r]=t;else if(t instanceof eh){const o=this.idIndex_[r];o instanceof eh?Array.isArray(o)?o.push(t):this.idIndex_[r]=[o,t]:i=!1}else i=!1}return i&&(ws(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=t),i}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const t=[],i=[],r=[];for(let o=0,s=e.length;o<s;o++){const a=e[o],c=Nr(a);this.addToIndex_(c,a)&&i.push(a)}for(let o=0,s=i.length;o<s;o++){const a=i[o],c=Nr(a);this.setupChangeEvents_(c,a);const h=a.getGeometry();if(h){const m=h.getExtent();t.push(m),r.push(a)}else this.nullGeometryFeatures_[c]=a}if(this.featuresRtree_&&this.featuresRtree_.load(t,r),this.hasListener(Nf.ADDFEATURE))for(let o=0,s=i.length;o<s;o++)this.dispatchEvent(new by(Nf.ADDFEATURE,i[o]))}bindFeaturesCollection_(e){let t=!1;this.addEventListener(Nf.ADDFEATURE,function(i){t||(t=!0,e.push(i.feature),t=!1)}),this.addEventListener(Nf.REMOVEFEATURE,function(i){t||(t=!0,e.remove(i.feature),t=!1)}),e.addEventListener(fd.ADD,i=>{t||(t=!0,this.addFeature(i.element),t=!1)}),e.addEventListener(fd.REMOVE,i=>{t||(t=!0,this.removeFeature(i.element),t=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const i in this.featureChangeKeys_)this.featureChangeKeys_[i].forEach(Ba);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(i=>{this.removeFeatureInternal(i)});for(const i in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[i])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const t=new by(Nf.CLEAR);this.dispatchEvent(t),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,t){const i=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(i,function(r){const o=r.getGeometry();if(o instanceof eh||o.intersectsCoordinate(e))return t(r)})}forEachFeatureInExtent(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureIntersectingExtent(e,t){return this.forEachFeatureInExtent(e,function(i){const r=i.getGeometry();if(r instanceof eh||r.intersectsExtent(e)){const o=t(i);if(o)return o}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),tv(this.nullGeometryFeatures_)||i0(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const t=[];return this.forEachFeatureAtCoordinateDirect(e,function(i){t.push(i)}),t}getFeaturesInExtent(e,t){if(this.featuresRtree_){if(!(t&&t.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const r=JZ(e,t);return[].concat(...r.map(o=>this.featuresRtree_.getInExtent(o)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,t){const i=e[0],r=e[1];let o=null;const s=[NaN,NaN];let a=1/0;const c=[-1/0,-1/0,1/0,1/0];return t=t||$3,this.featuresRtree_.forEachInExtent(c,function(h){if(t(h)){const m=h.getGeometry(),v=a;if(a=m instanceof eh?0:m.closestPointXY(i,r,s,a),a<v){o=h;const x=Math.sqrt(a);c[0]=i-x,c[1]=r-x,c[2]=i+x,c[3]=r+x}}}),o}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const t=this.idIndex_[e.toString()];return t!==void 0?t:null}getFeatureByUid(e){const t=this.uidIndex_[e];return t!==void 0?t:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const t=e.target,i=Nr(t),r=t.getGeometry();if(!r)i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[i]=t);else{const s=r.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(s,t)):this.featuresRtree_&&this.featuresRtree_.update(s,t)}const o=t.getId();if(o!==void 0){const s=o.toString();this.idIndex_[s]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[s]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[i]=t;this.changed(),this.dispatchEvent(new by(Nf.CHANGEFEATURE,t))}hasFeature(e){const t=e.getId();return t!==void 0?t in this.idIndex_:Nr(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&tv(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,t,i){const r=this.loadedExtentsRtree_,o=this.strategy_(e,t,i);for(let s=0,a=o.length;s<a;++s){const c=o[s];r.forEachInExtent(c,function(m){return Wg(m.extent,c)})||(++this.loadingExtentsCount_,this.dispatchEvent(new by(Nf.FEATURESLOADSTART)),this.loader_.call(this,c,t,i,m=>{--this.loadingExtentsCount_,this.dispatchEvent(new by(Nf.FEATURESLOADEND,void 0,m))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new by(Nf.FEATURESLOADERROR))}),r.insert(c,{extent:c.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const t=this.loadedExtentsRtree_,i=t.forEachInExtent(e,function(r){if(m1(r.extent,e))return r});i&&t.remove(i)}removeFeatures(e){let t=!1;for(let i=0,r=e.length;i<r;++i)t=this.removeFeatureInternal(e[i])||t;t&&this.changed()}removeFeature(e){if(!e)return;this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const t=Nr(e);if(!(t in this.uidIndex_))return!1;t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e),this.featureChangeKeys_[t]?.forEach(Ba),delete this.featureChangeKeys_[t];const r=e.getId();if(r!==void 0){const o=r.toString(),s=this.idIndex_[o];s===e?delete this.idIndex_[o]:Array.isArray(s)&&(s.splice(s.indexOf(e),1),s.length===1&&(this.idIndex_[o]=s[0]))}return delete this.uidIndex_[t],this.hasListener(Nf.REMOVEFEATURE)&&this.dispatchEvent(new by(Nf.REMOVEFEATURE,e)),!0}removeFromIdIndex_(e){for(const t in this.idIndex_)if(this.idIndex_[t]===e){delete this.idIndex_[t];break}}setLoader(e){this.loader_=e}setUrl(e){ws(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(Dz(e,this.format_))}setOverlaps(e){this.overlaps_=e,this.changed()}}const cr={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},a5=[cr.FILL],zy=[cr.STROKE],xb=[cr.BEGIN_PATH],Kz=[cr.CLOSE_PATH];class pM extends HX{constructor(e,t,i,r){super(),this.tolerance=e,this.maxExtent=t,this.pixelRatio=r,this.maxLineWidth=0,this.resolution=i,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const t=this.pixelRatio;return t==1?e:e.map(function(i){return i*t})}appendFlatPointCoordinates(e,t){const i=this.getBufferedMaxExtent(),r=this.tmpCoordinate_,o=this.coordinates;let s=o.length;for(let a=0,c=e.length;a<c;a+=t)r[0]=e[a],r[1]=e[a+1],Qb(i,r)&&(o[s++]=r[0],o[s++]=r[1]);return s}appendFlatLineCoordinates(e,t,i,r,o,s){const a=this.coordinates;let c=a.length;const h=this.getBufferedMaxExtent();s&&(t+=r);let m=e[t],v=e[t+1];const x=this.tmpCoordinate_;let E=!0,D,P,F;for(D=t+r;D<i;D+=r)x[0]=e[D],x[1]=e[D+1],F=t9(h,x),F!==P?(E&&(a[c++]=m,a[c++]=v,E=!1),a[c++]=x[0],a[c++]=x[1]):F===Hc.INTERSECTING?(a[c++]=x[0],a[c++]=x[1],E=!1):E=!0,m=x[0],v=x[1],P=F;return(o&&E||D===t+r)&&(a[c++]=m,a[c++]=v),c}drawCustomCoordinates_(e,t,i,r,o){for(let s=0,a=i.length;s<a;++s){const c=i[s],h=this.appendFlatLineCoordinates(e,t,c,r,!1,!1);o.push(h),t=c}return t}drawCustom(e,t,i,r,o){this.beginGeometry(e,t,o);const s=e.getType(),a=e.getStride(),c=this.coordinates.length;let h,m,v,x,E;switch(s){case"MultiPolygon":h=e.getOrientedFlatCoordinates(),x=[];const D=e.getEndss();E=0;for(let P=0,F=D.length;P<F;++P){const W=[];E=this.drawCustomCoordinates_(h,E,D[P],a,W),x.push(W)}this.instructions.push([cr.CUSTOM,c,x,e,i,u9,o]),this.hitDetectionInstructions.push([cr.CUSTOM,c,x,e,r||i,u9,o]);break;case"Polygon":case"MultiLineString":v=[],h=s=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),E=this.drawCustomCoordinates_(h,0,e.getEnds(),a,v),this.instructions.push([cr.CUSTOM,c,v,e,i,J3,o]),this.hitDetectionInstructions.push([cr.CUSTOM,c,v,e,r||i,J3,o]);break;case"LineString":case"Circle":h=e.getFlatCoordinates(),m=this.appendFlatLineCoordinates(h,0,h.length,a,!1,!1),this.instructions.push([cr.CUSTOM,c,m,e,i,Ly,o]),this.hitDetectionInstructions.push([cr.CUSTOM,c,m,e,r||i,Ly,o]);break;case"MultiPoint":h=e.getFlatCoordinates(),m=this.appendFlatPointCoordinates(h,a),m>c&&(this.instructions.push([cr.CUSTOM,c,m,e,i,Ly,o]),this.hitDetectionInstructions.push([cr.CUSTOM,c,m,e,r||i,Ly,o]));break;case"Point":h=e.getFlatCoordinates(),this.coordinates.push(h[0],h[1]),m=this.coordinates.length,this.instructions.push([cr.CUSTOM,c,m,e,i,void 0,o]),this.hitDetectionInstructions.push([cr.CUSTOM,c,m,e,r||i,void 0,o]);break}this.endGeometry(t)}beginGeometry(e,t,i){this.beginGeometryInstruction1_=[cr.BEGIN_GEOMETRY,t,0,e,i],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[cr.BEGIN_GEOMETRY,t,0,e,i],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;e.reverse();let t;const i=e.length;let r,o,s=-1;for(t=0;t<i;++t)r=e[t],o=r[0],o==cr.END_GEOMETRY?s=t:o==cr.BEGIN_GEOMETRY&&(r[2]=t,yme(this.hitDetectionInstructions,s,t),s=-1)}fillStyleToState(e,t={}){if(e){const i=e.getColor();t.fillPatternScale=i&&typeof i=="object"&&"src"in i?this.pixelRatio:1,t.fillStyle=Yg(i||md)}else t.fillStyle=void 0;return t}strokeStyleToState(e,t={}){if(e){const i=e.getColor();t.strokeStyle=Yg(i||n4);const r=e.getLineCap();t.lineCap=r!==void 0?r:yx;const o=e.getLineDash();t.lineDash=o?o.slice():c1;const s=e.getLineDashOffset();t.lineDashOffset=s||A1;const a=e.getLineJoin();t.lineJoin=a!==void 0?a:vx;const c=e.getWidth();t.lineWidth=c!==void 0?c:r4;const h=e.getMiterLimit();t.miterLimit=h!==void 0?h:t4,t.lineWidth>this.maxLineWidth&&(this.maxLineWidth=t.lineWidth,this.bufferedMaxExtent_=null)}else t.strokeStyle=void 0,t.lineCap=void 0,t.lineDash=null,t.lineDashOffset=void 0,t.lineJoin=void 0,t.lineWidth=void 0,t.miterLimit=void 0;return t}setFillStrokeStyle(e,t){const i=this.state;this.fillStyleToState(e,i),this.strokeStyleToState(t,i)}createFill(e){const t=e.fillStyle,i=[cr.SET_FILL_STYLE,t];return typeof t!="string"&&i.push(e.fillPatternScale),i}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[cr.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash?this.applyPixelRatio(e.lineDash):null,e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,t){const i=e.fillStyle;(typeof i!="string"||e.currentFillStyle!=i)&&(this.instructions.push(t.call(this,e)),e.currentFillStyle=i)}updateStrokeStyle(e,t){const i=e.strokeStyle,r=e.lineCap,o=e.lineDash,s=e.lineDashOffset,a=e.lineJoin,c=e.lineWidth,h=e.miterLimit;(e.currentStrokeStyle!=i||e.currentLineCap!=r||o!=e.currentLineDash&&!cv(e.currentLineDash,o)||e.currentLineDashOffset!=s||e.currentLineJoin!=a||e.currentLineWidth!=c||e.currentMiterLimit!=h)&&(t.call(this,e),e.currentStrokeStyle=i,e.currentLineCap=r,e.currentLineDash=o,e.currentLineDashOffset=s,e.currentLineJoin=a,e.currentLineWidth=c,e.currentMiterLimit=h)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const t=[cr.END_GEOMETRY,e];this.instructions.push(t),this.hitDetectionInstructions.push(t)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=YZ(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;Hy(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class cye extends pM{constructor(e,t,i,r){super(e,t,i,r),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,t,i){if(!this.image_||this.maxExtent&&!Qb(this.maxExtent,e.getFlatCoordinates()))return;this.beginGeometry(e,t,i);const r=e.getFlatCoordinates(),o=e.getStride(),s=this.coordinates.length,a=this.appendFlatPointCoordinates(r,o);this.instructions.push([cr.DRAW_IMAGE,s,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([cr.DRAW_IMAGE,s,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}drawMultiPoint(e,t,i){if(!this.image_)return;this.beginGeometry(e,t,i);const r=e.getFlatCoordinates(),o=[];for(let c=0,h=r.length;c<h;c+=e.getStride())(!this.maxExtent||Qb(this.maxExtent,r.slice(c,c+2)))&&o.push(r[c],r[c+1]);const s=this.coordinates.length,a=this.appendFlatPointCoordinates(o,2);this.instructions.push([cr.DRAW_IMAGE,s,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([cr.DRAW_IMAGE,s,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,t){const i=e.getAnchor(),r=e.getSize(),o=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=r[1],this.opacity_=e.getOpacity(),this.originX_=o[0],this.originY_=o[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=r[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}class Aye extends pM{constructor(e,t,i,r){super(e,t,i,r)}drawFlatCoordinates_(e,t,i,r){const o=this.coordinates.length,s=this.appendFlatLineCoordinates(e,t,i,r,!1,!1),a=[cr.MOVE_TO_LINE_TO,o,s];return this.instructions.push(a),this.hitDetectionInstructions.push(a),i}drawLineString(e,t,i){const r=this.state,o=r.strokeStyle,s=r.lineWidth;if(o===void 0||s===void 0)return;this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(e,t,i),this.hitDetectionInstructions.push([cr.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,c1,A1],xb);const a=e.getFlatCoordinates(),c=e.getStride();this.drawFlatCoordinates_(a,0,a.length,c),this.hitDetectionInstructions.push(zy),this.endGeometry(t)}drawMultiLineString(e,t,i){const r=this.state,o=r.strokeStyle,s=r.lineWidth;if(o===void 0||s===void 0)return;this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(e,t,i),this.hitDetectionInstructions.push([cr.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,c1,A1],xb);const a=e.getEnds(),c=e.getFlatCoordinates(),h=e.getStride();let m=0;for(let v=0,x=a.length;v<x;++v)m=this.drawFlatCoordinates_(c,m,a[v],h);this.hitDetectionInstructions.push(zy),this.endGeometry(t)}finish(){const e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(zy),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(zy),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(xb)}}class Lz extends pM{constructor(e,t,i,r){super(e,t,i,r)}drawFlatCoordinatess_(e,t,i,r){const o=this.state,s=o.fillStyle!==void 0,a=o.strokeStyle!==void 0,c=i.length;this.instructions.push(xb),this.hitDetectionInstructions.push(xb);for(let h=0;h<c;++h){const m=i[h],v=this.coordinates.length,x=this.appendFlatLineCoordinates(e,t,m,r,!0,!a),E=[cr.MOVE_TO_LINE_TO,v,x];this.instructions.push(E),this.hitDetectionInstructions.push(E),a&&(this.instructions.push(Kz),this.hitDetectionInstructions.push(Kz)),t=m}return s&&(this.instructions.push(a5),this.hitDetectionInstructions.push(a5)),a&&(this.instructions.push(zy),this.hitDetectionInstructions.push(zy)),t}drawCircle(e,t,i){const r=this.state,o=r.fillStyle,s=r.strokeStyle;if(o===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,i),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([cr.SET_FILL_STYLE,md]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([cr.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,c1,A1]);const a=e.getFlatCoordinates(),c=e.getStride(),h=this.coordinates.length;this.appendFlatLineCoordinates(a,0,a.length,c,!1,!1);const m=[cr.CIRCLE,h];this.instructions.push(xb,m),this.hitDetectionInstructions.push(xb,m),r.fillStyle!==void 0&&(this.instructions.push(a5),this.hitDetectionInstructions.push(a5)),r.strokeStyle!==void 0&&(this.instructions.push(zy),this.hitDetectionInstructions.push(zy)),this.endGeometry(t)}drawPolygon(e,t,i){const r=this.state,o=r.fillStyle,s=r.strokeStyle;if(o===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,i),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([cr.SET_FILL_STYLE,md]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([cr.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,c1,A1]);const a=e.getEnds(),c=e.getOrientedFlatCoordinates(),h=e.getStride();this.drawFlatCoordinatess_(c,0,a,h),this.endGeometry(t)}drawMultiPolygon(e,t,i){const r=this.state,o=r.fillStyle,s=r.strokeStyle;if(o===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,i),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([cr.SET_FILL_STYLE,md]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([cr.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,c1,A1]);const a=e.getEndss(),c=e.getOrientedFlatCoordinates(),h=e.getStride();let m=0;for(let v=0,x=a.length;v<x;++v)m=this.drawFlatCoordinatess_(c,m,a[v],h);this.endGeometry(t)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const t=this.coordinates;for(let i=0,r=t.length;i<r;++i)t[i]=cb(t[i],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;this.updateFillStyle(e,this.createFill),this.updateStrokeStyle(e,this.applyStroke)}}function hye(n,e,t,i,r){const o=[];let s=t,a=0,c=e.slice(t,2);for(;a<n&&s+r<i;){const[h,m]=c.slice(-2),v=e[s+r],x=e[s+r+1],E=Math.sqrt((v-h)*(v-h)+(x-m)*(x-m));if(a+=E,a>=n){const D=(n-a+E)/E,P=af(h,v,D),F=af(m,x,D);c.push(P,F),o.push(c),c=[P,F],a==n&&(s+=r),a=0}else if(a<n)c.push(e[s+r],e[s+r+1]),s+=r;else{const D=E-a,P=af(h,v,D/E),F=af(m,x,D/E);c.push(P,F),o.push(c),c=[P,F],a=0,s+=r}}return a>0&&o.push(c),o}function dye(n,e,t,i,r){let o=t,s=t,a=0,c=0,h=t,m,v,x,E,D,P,F,W,q,V;for(v=t;v<i;v+=r){const H=e[v],X=e[v+1];D!==void 0&&(q=H-D,V=X-P,E=Math.sqrt(q*q+V*V),F!==void 0&&(c+=x,m=Math.acos((F*q+W*V)/(x*E)),m>n&&(c>a&&(a=c,o=h,s=v),c=0,h=v-r)),x=E,F=q,W=V),D=H,P=X}return c+=E,c>a?[h,v]:[o,s]}const fS={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class fye extends pM{constructor(e,t,i,r){super(e,t,i,r),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textKeepUpright_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[md]={fillStyle:md},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,t,i){const r=this.textFillState_,o=this.textStrokeState_,s=this.textState_;if(this.text_===""||!s||!r&&!o)return;const a=this.coordinates;let c=a.length;const h=e.getType();let m=null,v=e.getStride();if(s.placement==="line"&&(h=="LineString"||h=="MultiLineString"||h=="Polygon"||h=="MultiPolygon")){if(!tu(this.maxExtent,e.getExtent()))return;let x;if(m=e.getFlatCoordinates(),h=="LineString")x=[m.length];else if(h=="MultiLineString")x=e.getEnds();else if(h=="Polygon")x=e.getEnds().slice(0,1);else if(h=="MultiPolygon"){const F=e.getEndss();x=[];for(let W=0,q=F.length;W<q;++W)x.push(F[W][0])}this.beginGeometry(e,t,i);const E=s.repeat,D=E?void 0:s.textAlign;let P=0;for(let F=0,W=x.length;F<W;++F){let q;E?q=hye(E*this.resolution,m,P,x[F],v):q=[m.slice(P,x[F])];for(let V=0,H=q.length;V<H;++V){const X=q[V];let Z=0,G=X.length;if(D==null){const ue=dye(s.maxAngle,X,0,X.length,2);Z=ue[0],G=ue[1]}for(let ue=Z;ue<G;ue+=v)a.push(X[ue],X[ue+1]);const oe=a.length;P=x[F],this.drawChars_(c,oe),c=oe}}this.endGeometry(t)}else{let x=s.overflow?null:[];switch(h){case"Point":case"MultiPoint":m=e.getFlatCoordinates();break;case"LineString":m=e.getFlatMidpoint();break;case"Circle":m=e.getCenter();break;case"MultiLineString":m=e.getFlatMidpoints(),v=2;break;case"Polygon":m=e.getFlatInteriorPoint(),s.overflow||x.push(m[2]/this.resolution),v=3;break;case"MultiPolygon":const H=e.getFlatInteriorPoints();m=[];for(let X=0,Z=H.length;X<Z;X+=3)s.overflow||x.push(H[X+2]/this.resolution),m.push(H[X],H[X+1]);if(m.length===0)return;v=2;break}const E=this.appendFlatPointCoordinates(m,v);if(E===c)return;if(x&&(E-c)/2!==m.length/v){let H=c/2;x=x.filter((X,Z)=>{const G=a[(H+Z)*2]===m[Z*v]&&a[(H+Z)*2+1]===m[Z*v+1];return G||--H,G})}this.saveTextStates_();const D=s.backgroundFill?this.createFill(this.fillStyleToState(s.backgroundFill)):null,P=s.backgroundStroke?this.createStroke(this.strokeStyleToState(s.backgroundStroke)):null;this.beginGeometry(e,t,i);let F=s.padding;if(F!=_b&&(s.scale[0]<0||s.scale[1]<0)){let H=s.padding[0],X=s.padding[1],Z=s.padding[2],G=s.padding[3];s.scale[0]<0&&(X=-X,G=-G),s.scale[1]<0&&(H=-H,Z=-Z),F=[H,X,Z,G]}const W=this.pixelRatio;this.instructions.push([cr.DRAW_IMAGE,c,E,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,F==_b?_b:F.map(function(H){return H*W}),D,P,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,x]);const q=1/W,V=D?D.slice(0):null;V&&(V[1]=md),this.hitDetectionInstructions.push([cr.DRAW_IMAGE,c,E,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[q,q],NaN,this.declutterMode_,this.declutterImageWithText_,F,V,P,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?md:this.fillKey_,this.textOffsetX_,this.textOffsetY_,x]),this.endGeometry(t)}}saveTextStates_(){const e=this.textStrokeState_,t=this.textState_,i=this.textFillState_,r=this.strokeKey_;e&&(r in this.strokeStates||(this.strokeStates[r]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const o=this.textKey_;o in this.textStates||(this.textStates[o]={font:t.font,textAlign:t.textAlign||i4,justify:t.justify,textBaseline:t.textBaseline||lS,scale:t.scale});const s=this.fillKey_;i&&(s in this.fillStates||(this.fillStates[s]={fillStyle:i.fillStyle}))}drawChars_(e,t){const i=this.textStrokeState_,r=this.textState_,o=this.strokeKey_,s=this.textKey_,a=this.fillKey_;this.saveTextStates_();const c=this.pixelRatio,h=fS[r.textBaseline],m=this.textOffsetY_*c,v=this.text_,x=i?i.lineWidth*Math.abs(r.scale[0])/2:0;this.instructions.push([cr.DRAW_CHARS,e,t,h,r.overflow,a,r.maxAngle,c,m,o,x*c,v,s,1,this.declutterMode_,this.textKeepUpright_]),this.hitDetectionInstructions.push([cr.DRAW_CHARS,e,t,h,r.overflow,a&&md,r.maxAngle,c,m,o,x*c,v,s,1/c,this.declutterMode_,this.textKeepUpright_])}setTextStyle(e,t){let i,r,o;if(!e)this.text_="";else{const s=e.getFill();s?(r=this.textFillState_,r||(r={},this.textFillState_=r),r.fillStyle=Yg(s.getColor()||md)):(r=null,this.textFillState_=r);const a=e.getStroke();if(!a)o=null,this.textStrokeState_=o;else{o=this.textStrokeState_,o||(o={},this.textStrokeState_=o);const P=a.getLineDash(),F=a.getLineDashOffset(),W=a.getWidth(),q=a.getMiterLimit();o.lineCap=a.getLineCap()||yx,o.lineDash=P?P.slice():c1,o.lineDashOffset=F===void 0?A1:F,o.lineJoin=a.getLineJoin()||vx,o.lineWidth=W===void 0?r4:W,o.miterLimit=q===void 0?t4:q,o.strokeStyle=Yg(a.getColor()||n4)}i=this.textState_;const c=e.getFont()||UX;C1e(c);const h=e.getScaleArray();i.overflow=e.getOverflow(),i.font=c,i.maxAngle=e.getMaxAngle(),i.placement=e.getPlacement(),i.textAlign=e.getTextAlign(),i.repeat=e.getRepeat(),i.justify=e.getJustify(),i.textBaseline=e.getTextBaseline()||lS,i.backgroundFill=e.getBackgroundFill(),i.backgroundStroke=e.getBackgroundStroke(),i.padding=e.getPadding()||_b,i.scale=h===void 0?[1,1]:h;const m=e.getOffsetX(),v=e.getOffsetY(),x=e.getRotateWithView(),E=e.getKeepUpright(),D=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=m===void 0?0:m,this.textOffsetY_=v===void 0?0:v,this.textRotateWithView_=x===void 0?!1:x,this.textKeepUpright_=E===void 0?!0:E,this.textRotation_=D===void 0?0:D,this.strokeKey_=o?(typeof o.strokeStyle=="string"?o.strokeStyle:Nr(o.strokeStyle))+o.lineCap+o.lineDashOffset+"|"+o.lineWidth+o.lineJoin+o.miterLimit+"["+o.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.repeat||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.fillKey_=r&&r.fillStyle?typeof r.fillStyle=="string"?r.fillStyle:"|"+Nr(r.fillStyle):""}this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}const pye={Circle:Lz,Default:pM,Image:cye,LineString:Aye,Polygon:Lz,Text:fye};class tJ{constructor(e,t,i,r){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=r,this.resolution_=i,this.buildersByZIndex_={}}finish(){const e={};for(const t in this.buildersByZIndex_){e[t]=e[t]||{};const i=this.buildersByZIndex_[t];for(const r in i){const o=i[r].finish();e[t][r]=o}}return e}getBuilder(e,t){const i=e!==void 0?e.toString():"0";let r=this.buildersByZIndex_[i];r===void 0&&(r={},this.buildersByZIndex_[i]=r);let o=r[t];if(o===void 0){const s=pye[t];o=new s(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),r[t]=o}return o}}function mye(n,e,t,i,r,o,s,a,c,h,m,v,x=!0){let E=n[e],D=n[e+1],P=0,F=0,W=0,q=0;function V(){P=E,F=D,e+=i,E=n[e],D=n[e+1],q+=W,W=Math.sqrt((E-P)*(E-P)+(D-F)*(D-F))}do V();while(e<t-i&&q+W<o);let H=W===0?0:(o-q)/W;const X=af(P,E,H),Z=af(F,D,H),G=e-i,oe=q,ue=o+a*c(h,r,m);for(;e<t-i&&q+W<ue;)V();H=W===0?0:(ue-q)/W;const xe=af(P,E,H),me=af(F,D,H);let Ie=!1;if(x)if(v){const qe=[X,Z,xe,me];cX(qe,0,4,2,v,qe,qe),Ie=qe[0]>qe[2]}else Ie=X>xe;const Me=Math.PI,Te=[],je=G+i===e;e=G,W=0,q=oe,E=n[e],D=n[e+1];let Ee;if(je){V(),Ee=Math.atan2(D-F,E-P),Ie&&(Ee+=Ee>0?-Me:Me);const qe=(xe+X)/2,At=(me+Z)/2;return Te[0]=[qe,At,(ue-o)/2,Ee,r],Te}r=r.replace(/\n/g," ");for(let qe=0,At=r.length;qe<At;){V();let gt=Math.atan2(D-F,E-P);if(Ie&&(gt+=gt>0?-Me:Me),Ee!==void 0){let at=gt-Ee;if(at+=at>Me?-2*Me:at<-Me?2*Me:0,Math.abs(at)>s)return null}Ee=gt;const Le=qe;let Re=0;for(;qe<At;++qe){const at=Ie?At-qe-1:qe,Tt=a*c(h,r[at],m);if(e+i<t&&q+W<o+Re+Tt/2)break;Re+=Tt}if(qe===Le)continue;const Ge=Ie?r.substring(At-Le,At-qe):r.substring(Le,qe);H=W===0?0:(o+Re/2-q)/W;const De=af(P,E,H),_t=af(F,D,H);Te.push([De,_t,Re/2,gt,Ge]),o+=Re}return Te}class PP{constructor(){this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(aS(),{get:(e,t)=>{if(typeof aS()[t]=="function")return this.push_(t),this.pushMethodArgs_},set:(e,t,i)=>(this.push_(t,i),!0)})}push_(...e){const t=this.instructions_,i=this.zIndex+this.offset_;t[i]||(t[i]=[]),t[i].push(...e)}pushMethodArgs_=(...e)=>(this.push_(e),this);pushFunction(e){this.push_(e)}getContext(){return this.context_}draw(e){this.instructions_.forEach(t=>{for(let i=0,r=t.length;i<r;++i){const o=t[i];if(typeof o=="function"){o(e);continue}const s=t[++i];if(typeof e[o]=="function")e[o](...s);else{if(typeof s=="function"){e[o]=s(e);continue}e[o]=s}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}const WC=ap(),Cy=[],$0=[],H0=[],_y=[];function Fz(n){return n[3].declutterBox}const zz=new RegExp("[-----]");function fO(n,e){return e==="start"?e=zz.test(n)?"right":"left":e==="end"&&(e=zz.test(n)?"left":"right"),fS[e]}function gye(n,e,t){return t>0&&n.push(`
`,""),n.push(e,""),n}function yye(n,e,t){return t%2===0&&(n+=e),n}class vye{constructor(e,t,i,r,o){this.overlaps=i,this.pixelRatio=t,this.resolution=e,this.alignAndScaleFill_,this.instructions=r.instructions,this.coordinates=r.coordinates,this.coordinateCache_={},this.renderedTransform_=Cd(),this.hitDetectionInstructions=r.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=r.fillStates||{},this.strokeStates=r.strokeStates||{},this.textStates=r.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=o?new PP:null}getZIndexContext(){return this.zIndexContext_}createLabel(e,t,i,r){const o=e+t+i+r;if(this.labels_[o])return this.labels_[o];const s=r?this.strokeStates[r]:null,a=i?this.fillStates[i]:null,c=this.textStates[t],h=this.pixelRatio,m=[c.scale[0]*h,c.scale[1]*h],v=c.justify?fS[c.justify]:fO(Array.isArray(e)?e[0]:e,c.textAlign||i4),x=r&&s.lineWidth?s.lineWidth:0,E=Array.isArray(e)?e:String(e).split(`
`).reduce(gye,[]),{width:D,height:P,widths:F,heights:W,lineWidths:q}=x1e(c,E),V=D+x,H=[],X=(V+2)*m[0],Z=(P+x)*m[1],G={width:X<0?Math.floor(X):Math.ceil(X),height:Z<0?Math.floor(Z):Math.ceil(Z),contextInstructions:H};(m[0]!=1||m[1]!=1)&&H.push("scale",m),r&&(H.push("strokeStyle",s.strokeStyle),H.push("lineWidth",x),H.push("lineCap",s.lineCap),H.push("lineJoin",s.lineJoin),H.push("miterLimit",s.miterLimit),H.push("setLineDash",[s.lineDash]),H.push("lineDashOffset",s.lineDashOffset)),i&&H.push("fillStyle",a.fillStyle),H.push("textBaseline","middle"),H.push("textAlign","center");const oe=.5-v;let ue=v*V+oe*x;const xe=[],me=[];let Ie=0,Me=0,Te=0,je=0,Ee;for(let qe=0,At=E.length;qe<At;qe+=2){const gt=E[qe];if(gt===`
`){Me+=Ie,Ie=0,ue=v*V+oe*x,++je;continue}const Le=E[qe+1]||c.font;Le!==Ee&&(r&&xe.push("font",Le),i&&me.push("font",Le),Ee=Le),Ie=Math.max(Ie,W[Te]);const Re=[gt,ue+oe*F[Te]+v*(F[Te]-q[je]),.5*(x+Ie)+Me];ue+=F[Te],r&&xe.push("strokeText",Re),i&&me.push("fillText",Re),++Te}return Array.prototype.push.apply(H,xe),Array.prototype.push.apply(H,me),this.labels_[o]=G,G}replayTextBackground_(e,t,i,r,o,s,a){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,i),e.lineTo.apply(e,r),e.lineTo.apply(e,o),e.lineTo.apply(e,t),s&&(this.alignAndScaleFill_=s[2],e.fillStyle=s[1],this.fill_(e)),a&&(this.setStrokeStyle_(e,a),e.stroke())}calculateImageOrLabelDimensions_(e,t,i,r,o,s,a,c,h,m,v,x,E,D,P,F){a*=x[0],c*=x[1];let W=i-a,q=r-c;const V=o+h>e?e-h:o,H=s+m>t?t-m:s,X=D[3]+V*x[0]+D[1],Z=D[0]+H*x[1]+D[2],G=W-D[3],oe=q-D[0];(P||v!==0)&&(Cy[0]=G,_y[0]=G,Cy[1]=oe,$0[1]=oe,$0[0]=G+X,H0[0]=$0[0],H0[1]=oe+Z,_y[1]=H0[1]);let ue;return v!==0?(ue=s0(Cd(),i,r,1,1,v,-i,-r),Hu(ue,Cy),Hu(ue,$0),Hu(ue,H0),Hu(ue,_y),p1(Math.min(Cy[0],$0[0],H0[0],_y[0]),Math.min(Cy[1],$0[1],H0[1],_y[1]),Math.max(Cy[0],$0[0],H0[0],_y[0]),Math.max(Cy[1],$0[1],H0[1],_y[1]),WC)):p1(Math.min(G,G+X),Math.min(oe,oe+Z),Math.max(G,G+X),Math.max(oe,oe+Z),WC),E&&(W=Math.round(W),q=Math.round(q)),{drawImageX:W,drawImageY:q,drawImageW:V,drawImageH:H,originX:h,originY:m,declutterBox:{minX:WC[0],minY:WC[1],maxX:WC[2],maxY:WC[3],value:F},canvasTransform:ue,scale:x}}replayImageOrLabel_(e,t,i,r,o,s,a){const c=!!(s||a),h=r.declutterBox,m=a?a[2]*r.scale[0]/2:0;return h.minX-m<=t[0]&&h.maxX+m>=0&&h.minY-m<=t[1]&&h.maxY+m>=0&&(c&&this.replayTextBackground_(e,Cy,$0,H0,_y,s,a),M1e(e,r.canvasTransform,o,i,r.originX,r.originY,r.drawImageW,r.drawImageH,r.drawImageX,r.drawImageY,r.scale)),!0}fill_(e){const t=this.alignAndScaleFill_;if(t){const i=Hu(this.renderedTransform_,[0,0]),r=512*this.pixelRatio;e.save(),e.translate(i[0]%r,i[1]%r),t!==1&&e.scale(t,t),e.rotate(this.viewRotation_)}e.fill(),t&&e.restore()}setStrokeStyle_(e,t){e.strokeStyle=t[1],t[1]&&(e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.lineDashOffset=t[7],e.setLineDash(t[6]))}drawLabelWithPointPlacement_(e,t,i,r){const o=this.textStates[t],s=this.createLabel(e,t,r,i),a=this.strokeStates[i],c=this.pixelRatio,h=fO(Array.isArray(e)?e[0]:e,o.textAlign||i4),m=fS[o.textBaseline||lS],v=a&&a.lineWidth?a.lineWidth:0,x=s.width/c-2*o.scale[0],E=h*x+2*(.5-h)*v,D=m*s.height/c+2*(.5-m)*v;return{label:s,anchorX:E,anchorY:D}}execute_(e,t,i,r,o,s,a,c){const h=this.zIndexContext_;let m;this.pixelCoordinates_&&cv(i,this.renderedTransform_)?m=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),m=Xy(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),_ge(this.renderedTransform_,i));let v=0;const x=r.length;let E=0,D,P,F,W,q,V,H,X,Z,G,oe,ue,xe,me=0,Ie=0;const Me=this.coordinateCache_,Te=this.viewRotation_,je=Math.round(Math.atan2(-i[1],i[0])*1e12)/1e12,Ee={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:Te},qe=this.instructions!=r||this.overlaps?0:200;let At,gt,Le,Re;for(;v<x;){const Ge=r[v];switch(Ge[0]){case cr.BEGIN_GEOMETRY:At=Ge[1],Re=Ge[3],At.getGeometry()?a!==void 0&&!tu(a,Re.getExtent())?v=Ge[2]+1:++v:v=Ge[2],h&&(h.zIndex=Ge[4]);break;case cr.BEGIN_PATH:me>qe&&(this.fill_(e),me=0),Ie>qe&&(e.stroke(),Ie=0),!me&&!Ie&&(e.beginPath(),q=NaN,V=NaN),++v;break;case cr.CIRCLE:E=Ge[1];const _t=m[E],at=m[E+1],Tt=m[E+2],Kt=m[E+3],Ke=Tt-_t,Oe=Kt-at,Be=Math.sqrt(Ke*Ke+Oe*Oe);e.moveTo(_t+Be,at),e.arc(_t,at,Be,0,2*Math.PI,!0),++v;break;case cr.CLOSE_PATH:e.closePath(),++v;break;case cr.CUSTOM:E=Ge[1],D=Ge[2];const Ve=Ge[3],yt=Ge[4],ft=Ge[5];Ee.geometry=Ve,Ee.feature=At,v in Me||(Me[v]=[]);const Ct=Me[v];ft?ft(m,E,D,2,Ct):(Ct[0]=m[E],Ct[1]=m[E+1],Ct.length=2),h&&(h.zIndex=Ge[6]),yt(Ct,Ee),++v;break;case cr.DRAW_IMAGE:E=Ge[1],D=Ge[2],Z=Ge[3],P=Ge[4],F=Ge[5];let Lt=Ge[6];const kt=Ge[7],an=Ge[8],Hn=Ge[9],Wn=Ge[10];let _i=Ge[11];const Ln=Ge[12];let Un=Ge[13];W=Ge[14]||"declutter";const xn=Ge[15];if(!Z&&Ge.length>=20){G=Ge[19],oe=Ge[20],ue=Ge[21],xe=Ge[22];const yi=this.drawLabelWithPointPlacement_(G,oe,ue,xe);Z=yi.label,Ge[3]=Z;const Dn=Ge[23];P=(yi.anchorX-Dn)*this.pixelRatio,Ge[4]=P;const Fn=Ge[24];F=(yi.anchorY-Fn)*this.pixelRatio,Ge[5]=F,Lt=Z.height,Ge[6]=Lt,Un=Z.width,Ge[13]=Un}let Zn;Ge.length>25&&(Zn=Ge[25]);let Rn,Ot,be;Ge.length>17?(Rn=Ge[16],Ot=Ge[17],be=Ge[18]):(Rn=_b,Ot=null,be=null),Wn&&je?_i+=Te:!Wn&&!je&&(_i-=Te);let ie=0;for(;E<D;E+=2){if(Zn&&Zn[ie++]<Un/this.pixelRatio)continue;const yi=this.calculateImageOrLabelDimensions_(Z.width,Z.height,m[E],m[E+1],Un,Lt,P,F,an,Hn,_i,Ln,o,Rn,!!Ot||!!be,At),Dn=[e,t,Z,yi,kt,Ot,be];if(c){let Fn,vi,Zi;if(xn){const ki=D-E;if(!xn[ki]){xn[ki]={args:Dn,declutterMode:W};continue}const Ri=xn[ki];Fn=Ri.args,vi=Ri.declutterMode,delete xn[ki],Zi=Fz(Fn)}let Ki,Ji;if(Fn&&(vi!=="declutter"||!c.collides(Zi))&&(Ki=!0),(W!=="declutter"||!c.collides(yi.declutterBox))&&(Ji=!0),vi==="declutter"&&W==="declutter"){const ki=Ki&&Ji;Ki=ki,Ji=ki}Ki&&(vi!=="none"&&c.insert(Zi),this.replayImageOrLabel_.apply(this,Fn)),Ji&&(W!=="none"&&c.insert(yi.declutterBox),this.replayImageOrLabel_.apply(this,Dn))}else this.replayImageOrLabel_.apply(this,Dn)}++v;break;case cr.DRAW_CHARS:const le=Ge[1],de=Ge[2],se=Ge[3],Ae=Ge[4];xe=Ge[5];const ve=Ge[6],We=Ge[7],tt=Ge[8];ue=Ge[9];const Pe=Ge[10];G=Ge[11],Array.isArray(G)&&(G=G.reduce(yye,"")),oe=Ge[12];const Xe=[Ge[13],Ge[13]];W=Ge[14]||"declutter";const y=Ge[15],ot=this.textStates[oe],Dt=ot.font,xt=[ot.scale[0]*We,ot.scale[1]*We];let tn;Dt in this.widths_?tn=this.widths_[Dt]:(tn={},this.widths_[Dt]=tn);const dt=DP(m,le,de,2),Xn=Math.abs(xt[0])*wz(Dt,G,tn);if(Ae||Xn<=dt){const yi=this.textStates[oe].textAlign,Dn=(dt-Xn)*fO(G,yi),Fn=mye(m,le,de,2,G,Dn,ve,Math.abs(xt[0]),wz,Dt,tn,je?0:this.viewRotation_,y);e:if(Fn){const vi=[];let Zi,Ki,Ji,ki,Ri;if(ue)for(Zi=0,Ki=Fn.length;Zi<Ki;++Zi){Ri=Fn[Zi],Ji=Ri[4],ki=this.createLabel(Ji,oe,"",ue),P=Ri[2]+(xt[0]<0?-Pe:Pe),F=se*ki.height+(.5-se)*2*Pe*xt[1]/xt[0]-tt;const pr=this.calculateImageOrLabelDimensions_(ki.width,ki.height,Ri[0],Ri[1],ki.width,ki.height,P,F,0,0,Ri[3],Xe,!1,_b,!1,At);if(c&&W==="declutter"&&c.collides(pr.declutterBox))break e;vi.push([e,t,ki,pr,1,null,null])}if(xe)for(Zi=0,Ki=Fn.length;Zi<Ki;++Zi){Ri=Fn[Zi],Ji=Ri[4],ki=this.createLabel(Ji,oe,xe,""),P=Ri[2],F=se*ki.height-tt;const pr=this.calculateImageOrLabelDimensions_(ki.width,ki.height,Ri[0],Ri[1],ki.width,ki.height,P,F,0,0,Ri[3],Xe,!1,_b,!1,At);if(c&&W==="declutter"&&c.collides(pr.declutterBox))break e;vi.push([e,t,ki,pr,1,null,null])}c&&W!=="none"&&c.load(vi.map(Fz));for(let pr=0,rn=vi.length;pr<rn;++pr)this.replayImageOrLabel_.apply(this,vi[pr])}}++v;break;case cr.END_GEOMETRY:if(s!==void 0){At=Ge[1];const yi=s(At,Re,W);if(yi)return yi}++v;break;case cr.FILL:qe?me++:this.fill_(e),++v;break;case cr.MOVE_TO_LINE_TO:for(E=Ge[1],D=Ge[2],gt=m[E],Le=m[E+1],e.moveTo(gt,Le),q=gt+.5|0,V=Le+.5|0,E+=2;E<D;E+=2)gt=m[E],Le=m[E+1],H=gt+.5|0,X=Le+.5|0,(E==D-2||H!==q||X!==V)&&(e.lineTo(gt,Le),q=H,V=X);++v;break;case cr.SET_FILL_STYLE:this.alignAndScaleFill_=Ge[2],me&&(this.fill_(e),me=0,Ie&&(e.stroke(),Ie=0)),e.fillStyle=Ge[1],++v;break;case cr.SET_STROKE_STYLE:Ie&&(e.stroke(),Ie=0),this.setStrokeStyle_(e,Ge),++v;break;case cr.STROKE:qe?Ie++:e.stroke(),++v;break;default:++v;break}}me&&this.fill_(e),Ie&&e.stroke()}execute(e,t,i,r,o,s){this.viewRotation_=r,this.execute_(e,t,i,this.instructions,o,void 0,void 0,s)}executeHitDetection(e,t,i,r,o){return this.viewRotation_=i,this.execute_(e,[e.canvas.width,e.canvas.height],t,this.hitDetectionInstructions,!0,r,o)}}const fb=["Polygon","Circle","LineString","Image","Text","Default"],pS=["Image","Text"],bye=fb.filter(n=>!pS.includes(n));class nJ{constructor(e,t,i,r,o,s,a){this.maxExtent_=e,this.overlaps_=r,this.pixelRatio_=i,this.resolution_=t,this.renderBuffer_=s,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=Cd(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(o,a)}clip(e,t){const i=this.getClipCoords(t);e.beginPath(),e.moveTo(i[0],i[1]),e.lineTo(i[2],i[3]),e.lineTo(i[4],i[5]),e.lineTo(i[6],i[7]),e.clip()}createExecutors_(e,t){for(const i in e){let r=this.executorsByZIndex_[i];r===void 0&&(r={},this.executorsByZIndex_[i]=r);const o=e[i];for(const s in o){const a=o[s];r[s]=new vye(this.resolution_,this.pixelRatio_,this.overlaps_,a,t)}}}hasExecutors(e){for(const t in this.executorsByZIndex_){const i=this.executorsByZIndex_[t];for(let r=0,o=e.length;r<o;++r)if(e[r]in i)return!0}return!1}forEachFeatureAtCoordinate(e,t,i,r,o,s){r=Math.round(r);const a=r*2+1,c=s0(this.hitDetectionTransform_,r+.5,r+.5,1/t,-1/t,-i,-e[0],-e[1]),h=!this.hitDetectionContext_;h&&(this.hitDetectionContext_=Kl(a,a));const m=this.hitDetectionContext_;m.canvas.width!==a||m.canvas.height!==a?(m.canvas.width=a,m.canvas.height=a):h||m.clearRect(0,0,a,a);let v;this.renderBuffer_!==void 0&&(v=ap(),h3(v,e),Hy(v,t*(this.renderBuffer_+r),v));const x=Cye(r);let E;function D(X,Z,G){const oe=m.getImageData(0,0,a,a).data;for(let ue=0,xe=x.length;ue<xe;ue++)if(oe[x[ue]]>0){if(!s||G==="none"||E!=="Image"&&E!=="Text"||s.includes(X)){const me=(x[ue]-3)/4,Ie=r-me%a,Me=r-(me/a|0),Te=o(X,Z,Ie*Ie+Me*Me);if(Te)return Te}m.clearRect(0,0,a,a);break}}const P=Object.keys(this.executorsByZIndex_).map(Number);P.sort(n0);let F,W,q,V,H;for(F=P.length-1;F>=0;--F){const X=P[F].toString();for(q=this.executorsByZIndex_[X],W=fb.length-1;W>=0;--W)if(E=fb[W],V=q[E],V!==void 0&&(H=V.executeHitDetection(m,c,i,D,v),H))return H}}getClipCoords(e){const t=this.maxExtent_;if(!t)return null;const i=t[0],r=t[1],o=t[2],s=t[3],a=[i,r,i,s,o,s,o,r];return Xy(a,0,8,2,e,a),a}isEmpty(){return tv(this.executorsByZIndex_)}execute(e,t,i,r,o,s,a){const c=Object.keys(this.executorsByZIndex_).map(Number);c.sort(a?gme:n0),s=s||fb;const h=fb.length;for(let m=0,v=c.length;m<v;++m){const x=c[m].toString(),E=this.executorsByZIndex_[x];for(let D=0,P=s.length;D<P;++D){const F=s[D],W=E[F];if(W!==void 0){const q=a===null?void 0:W.getZIndexContext(),V=q?q.getContext():e,H=this.maxExtent_&&F!=="Image"&&F!=="Text";if(H&&(V.save(),this.clip(V,i)),!q||F==="Text"||F==="Image"?W.execute(V,t,i,r,o,a):q.pushFunction(X=>W.execute(X,t,i,r,o,a)),H&&V.restore(),q){q.offset();const X=c[m]*h+fb.indexOf(F);this.deferredZIndexContexts_[X]||(this.deferredZIndexContexts_[X]=[]),this.deferredZIndexContexts_[X].push(q)}}}}this.renderedContext_=e}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const e=this.deferredZIndexContexts_,t=Object.keys(e).map(Number).sort(n0);for(let i=0,r=t.length;i<r;++i)e[t[i]].forEach(o=>{o.draw(this.renderedContext_),o.clear()}),e[t[i]].length=0}}const pO={};function Cye(n){if(pO[n]!==void 0)return pO[n];const e=n*2+1,t=n*n,i=new Array(t+1);for(let o=0;o<=n;++o)for(let s=0;s<=n;++s){const a=o*o+s*s;if(a>t)break;let c=i[a];c||(c=[],i[a]=c),c.push(((n+o)*e+(n+s))*4+3),o>0&&c.push(((n-o)*e+(n+s))*4+3),s>0&&(c.push(((n+o)*e+(n-s))*4+3),o>0&&c.push(((n-o)*e+(n-s))*4+3))}const r=[];for(let o=0,s=i.length;o<s;++o)i[o]&&r.push(...i[o]);return pO[n]=r,r}const hf=.5;function iJ(n,e,t,i,r,o,s,a,c){const h=c?oP(r):r,m=n[0]*hf,v=n[1]*hf,x=Kl(m,v);x.imageSmoothingEnabled=!1;const E=x.canvas,D=new $1e(x,hf,r,null,s,a,c?aM(bge(),c):null),P=t.length,F=Math.floor((256*256*256-1)/P),W={};for(let V=1;V<=P;++V){const H=t[V-1],X=H.getStyleFunction()||i;if(!X)continue;let Z=X(H,o);if(!Z)continue;Array.isArray(Z)||(Z=[Z]);const oe=(V*F).toString(16).padStart(7,"#00000");for(let ue=0,xe=Z.length;ue<xe;++ue){const me=Z[ue],Ie=me.getGeometryFunction()(H);if(!Ie||!tu(h,Ie.getExtent()))continue;const Me=me.clone(),Te=Me.getFill();Te&&Te.setColor(oe);const je=Me.getStroke();je&&(je.setColor(oe),je.setLineDash(null)),Me.setText(void 0);const Ee=me.getImage();if(Ee){const Le=Ee.getImageSize();if(!Le)continue;const Re=Kl(Le[0],Le[1],void 0,{alpha:!1}),Ge=Re.canvas;Re.fillStyle=oe,Re.fillRect(0,0,Ge.width,Ge.height),Me.setImage(new bx({img:Ge,anchor:Ee.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:Ee.getOrigin(),opacity:1,size:Ee.getSize(),scale:Ee.getScale(),rotation:Ee.getRotation(),rotateWithView:Ee.getRotateWithView()}))}const qe=Me.getZIndex()||0;let At=W[qe];At||(At={},W[qe]=At,At.Polygon=[],At.Circle=[],At.LineString=[],At.Point=[]);const gt=Ie.getType();if(gt==="GeometryCollection"){const Le=Ie.getGeometriesArrayRecursive();for(let Re=0,Ge=Le.length;Re<Ge;++Re){const De=Le[Re];At[De.getType().replace("Multi","")].push(De,Me)}}else At[gt.replace("Multi","")].push(Ie,Me)}}const q=Object.keys(W).map(Number).sort(n0);for(let V=0,H=q.length;V<H;++V){const X=W[q[V]];for(const Z in X){const G=X[Z];for(let oe=0,ue=G.length;oe<ue;oe+=2){D.setStyle(G[oe+1]);for(let xe=0,me=e.length;xe<me;++xe)D.setTransform(e[xe]),D.drawGeometry(G[oe])}}}return x.getImageData(0,0,E.width,E.height)}function rJ(n,e,t){const i=[];if(t){const r=Math.floor(Math.round(n[0])*hf),o=Math.floor(Math.round(n[1])*hf),s=(Ul(r,0,t.width-1)+Ul(o,0,t.height-1)*t.width)*4,a=t.data[s],c=t.data[s+1],m=t.data[s+2]+256*(c+256*a),v=Math.floor((256*256*256-1)/e.length);m&&m%v===0&&i.push(e[m/v-1])}return i}const _ye=5;class xye extends oM{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.staleKeys_=new Array,this.maxStaleKeys=_ye}getStaleKeys(){return this.staleKeys_}prependStaleKey(e){this.staleKeys_.unshift(e),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(e){return Tr()}getData(e){return null}prepareFrame(e){return Tr()}renderFrame(e,t){return Tr()}forEachFeatureAtCoordinate(e,t,i,r,o){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const t=e.target;(t.getState()===Ui.LOADED||t.getState()===Ui.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let t=e.getState();return t!=Ui.LOADED&&t!=Ui.ERROR&&e.addEventListener(Er.CHANGE,this.boundHandleImageChange_),t==Ui.IDLE&&(e.load(),t=e.getState()),t==Ui.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}renderDeferred(e){}disposeInternal(){delete this.layer_,super.disposeInternal()}}const jz=[];let w_=null;function Mye(){w_=Kl(1,1,void 0,{willReadFrequently:!0})}class UP extends xye{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=Cd(),this.pixelTransform=Cd(),this.inversePixelTransform=Cd(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(e,t,i){w_||Mye(),w_.clearRect(0,0,1,1);let r;try{w_.drawImage(e,t,i,1,1,0,0,1,1),r=w_.getImageData(0,0,1,1).data}catch{return w_=null,null}return r}getBackground(e){let i=this.getLayer().getBackground();return typeof i=="function"&&(i=i(e.viewState.resolution)),i||void 0}useContainer(e,t,i){const r=this.getLayer().getClassName();let o,s;if(e&&e.className===r&&(!i||e&&e.style.backgroundColor&&cv(gx(e.style.backgroundColor),gx(i)))){const a=e.firstElementChild;a instanceof HTMLCanvasElement&&(s=a.getContext("2d"))}if(s&&Ege(s.canvas.style.transform,t)?(this.container=e,this.context=s,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){o=document.createElement("div"),o.className=r;let a=o.style;a.position="absolute",a.width="100%",a.height="100%",s=Kl();const c=s.canvas;o.appendChild(c),a=c.style,a.position="absolute",a.left="0",a.transformOrigin="top left",this.container=o,this.context=s}!this.containerReused&&i&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=i)}clipUnrotated(e,t,i){const r=C1(i),o=QE(i),s=WE(i),a=GE(i);Hu(t.coordinateToPixelTransform,r),Hu(t.coordinateToPixelTransform,o),Hu(t.coordinateToPixelTransform,s),Hu(t.coordinateToPixelTransform,a);const c=this.inversePixelTransform;Hu(c,r),Hu(c,o),Hu(c,s),Hu(c,a),e.save(),e.beginPath(),e.moveTo(Math.round(r[0]),Math.round(r[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.lineTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.clip()}prepareContainer(e,t){const i=e.extent,r=e.viewState.resolution,o=e.viewState.rotation,s=e.pixelRatio,a=Math.round(ns(i)/r*s),c=Math.round(Ju(i)/r*s);s0(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/s,1/s,o,-a/2,-c/2),uX(this.inversePixelTransform,this.pixelTransform);const h=Sge(this.pixelTransform);if(this.useContainer(t,h,this.getBackground(e)),!this.containerReused){const m=this.context.canvas;m.width!=a||m.height!=c?(m.width=a,m.height=c):this.context.clearRect(0,0,a,c),h!==m.style.transform&&(m.style.transform=h)}}dispatchRenderEvent_(e,t,i){const r=this.getLayer();if(r.hasListener(e)){const o=new YX(e,this.inversePixelTransform,i,t);r.dispatchEvent(o)}}preRender(e,t){this.frameState=t,!t.declutter&&this.dispatchRenderEvent_(Jf.PRERENDER,e,t)}postRender(e,t){t.declutter||this.dispatchRenderEvent_(Jf.POSTRENDER,e,t)}renderDeferredInternal(e){}getRenderContext(e){return e.declutter&&!this.deferredContext_&&(this.deferredContext_=new PP),e.declutter?this.deferredContext_.getContext():this.context}renderDeferred(e){e.declutter&&(this.dispatchRenderEvent_(Jf.PRERENDER,this.context,e),e.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(e),this.dispatchRenderEvent_(Jf.POSTRENDER,this.context,e))}getRenderTransform(e,t,i,r,o,s,a){const c=o/2,h=s/2,m=r/t,v=-m,x=-e[0]+a,E=-e[1];return s0(this.tempTransform,c,h,m,v,-i,x,E)}disposeInternal(){delete this.frameState,super.disposeInternal()}}class wye extends UP{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=ap(),this.wrappedRenderedExtent_=ap(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(e,t,i){const r=t.extent,o=t.viewState,s=o.center,a=o.resolution,c=o.projection,h=o.rotation,m=c.getExtent(),v=this.getLayer().getSource(),x=this.getLayer().getDeclutter(),E=t.pixelRatio,D=t.viewHints,P=!(D[Cl.ANIMATING]||D[Cl.INTERACTING]),F=this.context,W=Math.round(ns(r)/a*E),q=Math.round(Ju(r)/a*E),V=v.getWrapX()&&c.canWrapX(),H=V?ns(m):null,X=V?Math.ceil((r[2]-m[2])/H)+1:1;let Z=V?Math.floor((r[0]-m[0])/H):0;do{let G=this.getRenderTransform(s,a,0,E,W,q,Z*H);t.declutter&&(G=G.slice(0)),e.execute(F,[F.canvas.width,F.canvas.height],G,h,P,i===void 0?fb:i?pS:bye,i?x&&t.declutter[x]:void 0)}while(++Z<X)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=Kl(this.context.canvas.width,this.context.canvas.height,jz))}resetDrawContext_(){if(this.opacity_!==1&&this.targetContext_){const e=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=e,uM(this.context),jz.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(e){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,e,!0)}renderDeferredInternal(e){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(e,t){const i=e.layerStatesArray[e.layerIndex];this.opacity_=i.opacity;const r=e.viewState;this.prepareContainer(e,t);const o=this.context,s=this.replayGroup_;let a=s&&!s.isEmpty();if(!a&&!(this.getLayer().hasListener(Jf.PRERENDER)||this.getLayer().hasListener(Jf.POSTRENDER)))return this.container;if(this.setDrawContext_(),this.preRender(o,e),r.projection,this.clipped_=!1,a&&i.extent&&this.clipping){const c=Qg(i.extent);a=tu(c,e.extent),this.clipped_=a&&!Wg(c,e.extent),this.clipped_&&this.clipUnrotated(o,e,c)}return a&&this.renderWorlds(s,e,this.getLayer().getDeclutter()?!1:void 0),!e.declutter&&this.clipped_&&o.restore(),this.postRender(o,e),this.renderedRotation_!==r.rotation&&(this.renderedRotation_=r.rotation,this.hitDetectionImageData_=null),e.declutter||this.resetDrawContext_(),this.container}getFeatures(e){return new Promise(t=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const i=this.frameState.size.slice(),r=this.renderedCenter_,o=this.renderedResolution_,s=this.renderedRotation_,a=this.renderedProjection_,c=this.wrappedRenderedExtent_,h=this.getLayer(),m=[],v=i[0]*hf,x=i[1]*hf;m.push(this.getRenderTransform(r,o,s,hf,v,x,0).slice());const E=h.getSource(),D=a.getExtent();if(E.getWrapX()&&a.canWrapX()&&!Wg(D,c)){let P=c[0];const F=ns(D);let W=0,q;for(;P<D[0];)--W,q=F*W,m.push(this.getRenderTransform(r,o,s,hf,v,x,q).slice()),P+=F;for(W=0,P=c[2];P>D[2];)++W,q=F*W,m.push(this.getRenderTransform(r,o,s,hf,v,x,q).slice()),P-=F}this.hitDetectionImageData_=iJ(i,m,this.renderedFeatures_,h.getStyleFunction(),c,o,s,y9(o,this.renderedPixelRatio_),null)}t(rJ(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,t,i,r,o){if(!this.replayGroup_)return;const s=t.viewState.resolution,a=t.viewState.rotation,c=this.getLayer(),h={},m=function(x,E,D){const P=Nr(x),F=h[P];if(F){if(F!==!0&&D<F.distanceSq){if(D===0)return h[P]=!0,o.splice(o.lastIndexOf(F),1),r(x,c,E);F.geometry=E,F.distanceSq=D}}else{if(D===0)return h[P]=!0,r(x,c,E);o.push(h[P]={feature:x,layer:c,geometry:E,distanceSq:D,callback:r})}},v=this.getLayer().getDeclutter();return this.replayGroup_.forEachFeatureAtCoordinate(e,s,a,i,m,v?t.declutter?.[v]?.all().map(x=>x.value):null)}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const t=this.getLayer(),i=t.getSource();if(!i)return!1;const r=e.viewHints[Cl.ANIMATING],o=e.viewHints[Cl.INTERACTING],s=t.getUpdateWhileAnimating(),a=t.getUpdateWhileInteracting();if(this.ready&&!s&&r||!a&&o)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const c=e.extent,h=e.viewState,m=h.projection,v=h.resolution,x=e.pixelRatio,E=t.getRevision(),D=t.getRenderBuffer();let P=t.getRenderOrder();P===void 0&&(P=Z1e);const F=h.center.slice(),W=Hy(c,D*v),q=W.slice(),V=[W.slice()],H=m.getExtent();if(i.getWrapX()&&m.canWrapX()&&!Wg(H,e.extent)){const Te=ns(H),je=Math.max(ns(W)/2,Te);W[0]=H[0]-je,W[2]=H[2]+je,eP(F,m);const Ee=XZ(V[0],m);Ee[0]<H[0]&&Ee[2]<H[2]?V.push([Ee[0]+Te,Ee[1],Ee[2]+Te,Ee[3]]):Ee[0]>H[0]&&Ee[2]>H[2]&&V.push([Ee[0]-Te,Ee[1],Ee[2]-Te,Ee[3]])}if(this.ready&&this.renderedResolution_==v&&this.renderedRevision_==E&&this.renderedRenderOrder_==P&&this.renderedFrameDeclutter_===!!e.declutter&&Wg(this.wrappedRenderedExtent_,W))return cv(this.renderedExtent_,q)||(this.hitDetectionImageData_=null,this.renderedExtent_=q),this.renderedCenter_=F,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const X=new tJ(XX(v,x),W,v,x);let Z;for(let Te=0,je=V.length;Te<je;++Te)i.loadFeatures(V[Te],v,m);const G=y9(v,x);let oe=!0;const ue=((Te,je)=>{let Ee;const qe=Te.getStyleFunction()||t.getStyleFunction();if(qe&&(Ee=qe(Te,v)),Ee){const At=this.renderFeature(Te,G,Ee,X,Z,this.getLayer().getDeclutter(),je);oe=oe&&!At}}),xe=oP(W),me=i.getFeaturesInExtent(xe);P&&me.sort(P);for(let Te=0,je=me.length;Te<je;++Te)ue(me[Te],Te);this.renderedFeatures_=me,this.ready=oe;const Ie=X.finish(),Me=new nJ(W,v,x,i.getOverlaps(),Ie,t.getRenderBuffer(),!!e.declutter);return this.renderedResolution_=v,this.renderedRevision_=E,this.renderedRenderOrder_=P,this.renderedFrameDeclutter_=!!e.declutter,this.renderedExtent_=q,this.wrappedRenderedExtent_=W,this.renderedCenter_=F,this.renderedProjection_=m,this.renderedPixelRatio_=x,this.replayGroup_=Me,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,t,i,r,o,s,a){if(!i)return!1;let c=!1;if(Array.isArray(i))for(let h=0,m=i.length;h<m;++h)c=dS(r,e,i[h],t,this.boundHandleStyleImageChange_,o,s,a)||c;else c=dS(r,e,i,t,this.boundHandleStyleImageChange_,o,s,a);return c}}class KP extends RP{constructor(e){super(e)}createRenderer(){return new wye(this)}}class Sye extends IP{constructor(e,t,i,r,o){const s=o!==void 0?Ui.IDLE:Ui.LOADED;super(e,t,i,s),this.loader_=o!==void 0?o:null,this.canvas_=r,this.error_=null}getError(){return this.error_}handleLoad_(e){e?(this.error_=e,this.state=Ui.ERROR):this.state=Ui.LOADED,this.changed()}load(){this.state==Ui.IDLE&&(this.state=Ui.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))}getImage(){return this.canvas_}}class mM extends rM{constructor(e,t,i){super(),i=i||{},this.tileCoord=e,this.state=t,this.key="",this.transition_=i.transition===void 0?250:i.transition,this.transitionStarts_={},this.interpolate=!!i.interpolate}changed(){this.dispatchEvent(Er.CHANGE)}release(){this.setState(ii.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==ii.EMPTY){if(this.state!==ii.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}}load(){Tr()}getAlpha(e,t){if(!this.transition_)return 1;let i=this.transitionStarts_[e];if(!i)i=t,this.transitionStarts_[e]=i;else if(i===-1)return 1;const r=t-i+1e3/60;return r>=this.transition_?1:eX(r/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}disposeInternal(){this.release(),super.disposeInternal()}}class oJ extends mM{constructor(e,t,i,r,o,s){super(e,t,s),this.crossOrigin_=r,this.src_=i,this.key=i,this.image_=new Image,r!==null&&(this.image_.crossOrigin=r),this.unlisten_=null,this.tileLoadFunction_=o}getImage(){return this.image_}setImage(e){this.image_=e,this.state=ii.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=ii.ERROR,this.unlistenImage_(),this.image_=Eye(),this.changed()}handleImageLoad_(){const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=ii.LOADED:this.state=ii.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==ii.ERROR&&(this.state=ii.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==ii.IDLE&&(this.state=ii.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=f1e(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}disposeInternal(){this.unlistenImage_(),this.image_=null,super.disposeInternal()}}function Eye(){const n=Kl(1,1);return n.fillStyle="rgba(0,0,0,0)",n.fillRect(0,0,1,1),n.canvas}const HA={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"};class Bye extends Bm{constructor(e){super(),this.on,this.once,this.un,this.options=e,this.id=e.id,this.insertFirst=e.insertFirst!==void 0?e.insertFirst:!0,this.stopEvent=e.stopEvent!==void 0?e.stopEvent:!0,this.element=document.createElement("div"),this.element.className=e.className!==void 0?e.className:"ol-overlay-container "+Zge,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=e.autoPan===!0?{}:e.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(HA.ELEMENT,this.handleElementChanged),this.addChangeListener(HA.MAP,this.handleMapChanged),this.addChangeListener(HA.OFFSET,this.handleOffsetChanged),this.addChangeListener(HA.POSITION,this.handlePositionChanged),this.addChangeListener(HA.POSITIONING,this.handlePositioningChanged),e.element!==void 0&&this.setElement(e.element),this.setOffset(e.offset!==void 0?e.offset:[0,0]),this.setPositioning(e.positioning||"top-left"),e.position!==void 0&&this.setPosition(e.position)}getElement(){return this.get(HA.ELEMENT)}getId(){return this.id}getMap(){return this.get(HA.MAP)||null}getOffset(){return this.get(HA.OFFSET)}getPosition(){return this.get(HA.POSITION)}getPositioning(){return this.get(HA.POSITIONING)}handleElementChanged(){xX(this.element);const e=this.getElement();e&&this.element.appendChild(e)}handleMapChanged(){this.mapPostrenderListenerKey&&(this.element?.remove(),Ba(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const e=this.getMap();if(e){this.mapPostrenderListenerKey=qo(e,t1.POSTRENDER,this.render,this),this.updatePixelPosition();const t=this.stopEvent?e.getOverlayContainerStopEvent():e.getOverlayContainer();this.insertFirst?t.insertBefore(this.element,t.childNodes[0]||null):t.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(e){this.set(HA.ELEMENT,e)}setMap(e){this.set(HA.MAP,e)}setOffset(e){this.set(HA.OFFSET,e)}setPosition(e){this.set(HA.POSITION,e)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(e){const t=this.getMap();if(!t||!t.getTargetElement()||!this.get(HA.POSITION))return;const i=this.getRect(t.getTargetElement(),t.getSize()),r=this.getElement(),o=this.getRect(r,[Jge(r),e0e(r)]);e=e||{};const s=e.margin===void 0?20:e.margin;if(!Wg(i,o)){const a=o[0]-i[0],c=i[2]-o[2],h=o[1]-i[1],m=i[3]-o[3],v=[0,0];if(a<0?v[0]=a-s:c<0&&(v[0]=Math.abs(c)+s),h<0?v[1]=h-s:m<0&&(v[1]=Math.abs(m)+s),v[0]!==0||v[1]!==0){const x=t.getView().getCenterInternal(),E=t.getPixelFromCoordinateInternal(x);if(!E)return;const D=[E[0]+v[0],E[1]+v[1]],P=e.animation||{};t.getView().animateInternal({center:t.getCoordinateFromPixelInternal(D),duration:P.duration,easing:P.easing})}}}getRect(e,t){const i=e.getBoundingClientRect(),r=i.left+window.pageXOffset,o=i.top+window.pageYOffset;return[r,o,r+t[0],o+t[1]]}setPositioning(e){this.set(HA.POSITIONING,e)}setVisible(e){this.rendered.visible!==e&&(this.element.style.display=e?"":"none",this.rendered.visible=e)}updatePixelPosition(){const e=this.getMap(),t=this.getPosition();if(!e||!e.isRendered()||!t){this.setVisible(!1);return}const i=e.getPixelFromCoordinate(t),r=e.getSize();this.updateRenderedPosition(i,r)}updateRenderedPosition(e,t){const i=this.element.style,r=this.getOffset(),o=this.getPositioning();this.setVisible(!0);const s=`${e[0]+r[0]}px`,a=`${e[1]+r[1]}px`;let c="0%",h="0%";o=="bottom-right"||o=="center-right"||o=="top-right"?c="-100%":(o=="bottom-center"||o=="center-center"||o=="top-center")&&(c="-50%"),o=="bottom-left"||o=="bottom-center"||o=="bottom-right"?h="-100%":(o=="center-left"||o=="center-center"||o=="center-right")&&(h="-50%");const m=`translate(${c}, ${h}) translate(${s}, ${a})`;this.rendered.transform_!=m&&(this.rendered.transform_=m,i.transform=m)}getOptions(){return this.options}}class LP{constructor(e,t,i,r){this.minX=e,this.maxX=t,this.minY=i,this.maxY=r}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function QC(n,e,t,i,r){return r!==void 0?(r.minX=n,r.maxX=e,r.minY=t,r.maxY=i,r):new LP(n,e,t,i)}const Nz=[];class Oye extends mM{constructor(e,t,i,r,o){super(e,t,{transition:0}),this.context_=null,this.executorGroups={},this.loadingSourceTiles=0,this.hitDetectionImageData={},this.replayState_={},this.sourceTiles=[],this.errorTileKeys={},this.wantedResolution,this.getSourceTiles=r.bind(void 0,this),this.removeSourceTiles_=o,this.wrappedTileCoord=i}getContext(){return this.context_||(this.context_=Kl(1,1,Nz)),this.context_}hasContext(){return!!this.context_}getImage(){return this.hasContext()?this.getContext().canvas:null}getReplayState(e){const t=Nr(e);return t in this.replayState_||(this.replayState_[t]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[t]}load(){this.getSourceTiles()}release(){this.context_&&(uM(this.context_),Nz.push(this.context_.canvas),this.context_=null),this.removeSourceTiles_(this),this.sourceTiles.length=0,super.release()}}let sJ=class extends mM{constructor(e,t,i,r,o,s){super(e,t,s),this.extent=null,this.format_=r,this.features_=null,this.loader_,this.projection=null,this.resolution,this.tileLoadFunction_=o,this.url_=i,this.key=i}getTileUrl(){return this.url_}getFormat(){return this.format_}getFeatures(){return this.features_}load(){this.state==ii.IDLE&&(this.setState(ii.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))}onLoad(e,t){this.setFeatures(e)}onError(){this.setState(ii.ERROR)}setFeatures(e){this.features_=e,this.setState(ii.LOADED)}setLoader(e){this.loader_=e}};const aJ="https://api.mapbox.com";function FP(n){const e="mapbox://";return n.indexOf(e)!==0?"":n.slice(e.length)}function Iye(n,e,t){if(typeof n=="string")return[{id:"default",url:Gz(n,e,t)}];for(const i of n)i.url=Gz(i.url,e,t);return n}function Gz(n,e,t){const i=FP(n);if(!i)return decodeURI(new URL(n,t).href);const r="sprites/";if(i.indexOf(r)!==0)throw new Error(`unexpected sprites url: ${n}`);const o=i.slice(r.length);return`${aJ}/styles/v1/${o}/sprite?access_token=${e}`}function mS(n,e){const t=FP(n);if(!t)return decodeURI(new URL(n,location.href).href);const i="styles/";if(t.indexOf(i)!==0)throw new Error(`unexpected style url: ${n}`);const r=t.slice(i.length);return`${aJ}/styles/v1/${r}?&access_token=${e}`}const kye=["a","b","c","d"];function hw(n,e,t,i){const r=new URL(n,i||location.href),o=FP(n);if(!o)return e?(r.searchParams.has(t)||r.searchParams.set(t,e),[decodeURI(r.href)]):[decodeURI(r.href)];if(o==="mapbox.satellite"){const s=window.devicePixelRatio>=1.5?"@2x":"";return[`https://api.mapbox.com/v4/${o}/{z}/{x}/{y}${s}.webp?access_token=${e}`]}return kye.map(s=>`https://${s}.tiles.mapbox.com/v4/${o}/{z}/{x}/{y}.vector.pbf?access_token=${e}`)}const fm=Object.freeze({}),Wz={},Qz={};let Tye=0;function zP(n){return n.id||(n.id=Tye++),n.id}function Rye(n,e){return zP(n)+"."+Nr(e)}function lJ(n){let e=Wz[n.id];return e||(e={},Wz[zP(n)]=e),e}function Dye(n){let e=Qz[n.id];return e||(e={},Qz[zP(n)]=e),e}function mO(n){return n*Math.PI/180}const r0=(function(){const n=[];for(let e=78271.51696402048;n.length<=24;e/=2)n.push(e);return n})();function o6(n,e){if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof OffscreenCanvas<"u")return new OffscreenCanvas(n,e);const t=document.createElement("canvas");return t.width=n,t.height=e,t}function jP(n,e){let t=0;const i=e.length;for(;t<i;++t)if(e[t]<n&&t+1<i){const o=e[t]/e[t+1];return t+Math.log(e[t]/n)/Math.log(o)}return i-1}function q2(n,e){const t=Math.floor(n),i=Math.pow(2,n-t);return e[t]/i}const YC={};function Cx(n,e,t={},i){if(e in YC)return i&&(i.url=YC[e][0].url),YC[e][1];const r=t.transformRequest&&t.transformRequest(e,n)||e,o=function(c){return delete YC[e],Promise.reject(new Error("Error fetching source "+e))},s=function(c){return delete YC[e],c.ok?c.json():Promise.reject(new Error("Error fetching source "+e))},a=px(()=>r).then(c=>c instanceof Response?(i&&(i.url=c.url),s(c)):(c instanceof Request||(c=new Request(c)),c.headers.get("Accept")||c.headers.set("Accept","application/json"),i&&(i.url=c.url),fetch(c).then(s).catch(o))).catch(o);return YC[e]=[r,a],a}function uJ(n,e){if(typeof n=="string")if(n.trim().startsWith("{"))try{const t=JSON.parse(n);return Promise.resolve(t)}catch(t){return Promise.reject(t)}else return n=mS(n,e.accessToken),Cx("Style",n,e);else return Promise.resolve(n)}const Yz={};function cJ(n,e,t={}){const i=[e,JSON.stringify(n)].toString();let r=Yz[i];if(!r||t.transformRequest){let o;t.transformRequest&&(o=(a,c)=>{const h=t.transformRequest&&t.transformRequest(c,"Tiles")||c;if(a instanceof sJ)a.setLoader((m,v,x)=>{const E=function(D){D.arrayBuffer().then(P=>{const W=a.getFormat().readFeatures(P,{extent:m,featureProjection:x});a.setFeatures(W)})};px(()=>h).then(D=>{if(D instanceof Response)return E(D);fetch(D).then(E).catch(P=>a.setState(ii.ERROR))}).catch(D=>a.setState(ii.ERROR))});else{const m=a.getImage();px(()=>h).then(v=>{if(typeof v=="string"){m.src=v;return}const x=E=>E.blob().then(D=>{const P=URL.createObjectURL(D);m.addEventListener("load",()=>URL.revokeObjectURL(P)),m.addEventListener("error",()=>URL.revokeObjectURL(P)),m.src=P});if(v instanceof Response)return x(v);fetch(v).then(x).catch(E=>a.setState(ii.ERROR))}).catch(v=>a.setState(ii.ERROR))}});const s=n.url;if(s&&!n.tiles){const a=hw(s,t.accessToken,t.accessTokenParam||"access_token",e||location.href);if(s.startsWith("mapbox://"))r=Promise.resolve({tileJson:Object.assign({},n,{url:void 0,tiles:a}),tileLoadFunction:o});else{const c={};r=Cx("Source",a[0],t,c).then(function(h){return h.tiles=h.tiles.map(function(m){return h.scheme==="tms"&&(m=m.replace("{y}","{-y}")),hw(m,t.accessToken,t.accessTokenParam||"access_token",c.url)[0]}),Promise.resolve({tileJson:h,tileLoadFunction:o})})}}else n.tiles?(n=Object.assign({},n,{tiles:n.tiles.map(function(a){return n.scheme==="tms"&&(a=a.replace("{y}","{-y}")),hw(a,t.accessToken,t.accessTokenParam||"access_token",e||location.href)[0]})}),r=Promise.resolve({tileJson:Object.assign({},n),tileLoadFunction:o})):r=Promise.reject(new Error("source has no `tiles` nor `url`"));Yz[i]=r}return r}function qz(n,e,t,i){const r=[2*t*e.pixelRatio+e.width,2*t*e.pixelRatio+e.height],o=o6(r[0],r[1]),s=o.getContext("2d");s.drawImage(n,e.x,e.y,e.width,e.height,t*e.pixelRatio,t*e.pixelRatio,e.width,e.height);const a=s.getImageData(0,0,r[0],r[1]);s.globalCompositeOperation="destination-over",s.fillStyle=`rgba(${i.r*255},${i.g*255},${i.b*255},${i.a})`;const c=a.data;for(let h=0,m=a.width;h<m;++h)for(let v=0,x=a.height;v<x;++v){const E=(v*m+h)*4;c[E+3]>0&&s.arc(h,v,t*e.pixelRatio,0,2*Math.PI)}return s.fill(),o}function Pye(n,e,t){const i=Math.max(0,Math.min(1,(t-n)/(e-n)));return i*i*(3-2*i)}function Vz(n,e,t){const i=o6(e.width,e.height),r=i.getContext("2d");r.drawImage(n,e.x,e.y,e.width,e.height,0,0,e.width,e.height);const o=r.getImageData(0,0,e.width,e.height),s=o.data;for(let a=0,c=o.width;a<c;++a)for(let h=0,m=o.height;h<m;++h){const v=(h*c+a)*4,x=s[v+3]/255,E=.75,D=.1,P=Pye(E-D,E+D,x);P>0?(s[v+0]=Math.round(255*t.r*P),s[v+1]=Math.round(255*t.g*P),s[v+2]=Math.round(255*t.b*P),s[v+3]=Math.round(255*P)):s[v+3]=0}return r.putImageData(o,0,0),i}const Uye=Array(256).join("");function v9(n,e){if(e>=.05){let t="";const i=n.split(`
`),r=Uye.slice(0,Math.round(e/.1));for(let o=0,s=i.length;o<s;++o)o>0&&(t+=`
`),t+=i[o].split("").join(r);return t}return n}let gO;function AJ(){return gO||(gO=o6(1,1).getContext("2d")),gO}function sb(n,e){return AJ().measureText(n).width+(n.length-1)*e}const gS={};db.on("propertychange",()=>{for(const n in gS)delete gS[n]});function b9(n,e,t,i){if(n.indexOf(`
`)!==-1){const s=n.split(`
`),a=[];for(let c=0,h=s.length;c<h;++c)a.push(b9(s[c],e,t,i));return a.join(`
`)}const r=t+","+e+","+n+","+i;let o=gS[r];if(!o){const s=n.split(" ");if(s.length>1){const a=AJ();a.font=e;const h=a.measureText("M").width*t;let m="";const v=[];for(let x=0,E=s.length;x<E;++x){const D=s[x],P=m+(m?" ":"")+D;sb(P,i)<=h?m=P:(m&&v.push(m),m=D)}m&&v.push(m);for(let x=0,E=v.length;x<E&&E>1;++x){const D=v[x];if(sb(D,i)<h*.35){const P=x>0?sb(v[x-1],i):1/0,F=x<E-1?sb(v[x+1],i):1/0;v.splice(x,1),E-=1,P<F?(v[x-1]+=" "+D,x-=1):v[x]=D+" "+v[x]}}for(let x=0,E=v.length-1;x<E;++x){const D=v[x],P=v[x+1];if(sb(D,i)>h*.7&&sb(P,i)<h*.6){const F=D.split(" "),W=F.pop();sb(W,i)<h*.2&&(v[x]=F.join(" "),v[x+1]=W+" "+P),E-=1}}o=v.join(`
`)}else o=n;o=v9(o,i),gS[r]=o}return o}const Kye=["Arial","Courier New","Times New Roman","Verdana","sans-serif","serif","monospace","cursive","fantasy"],$z={};function Lye(n,e="https://cdn.jsdelivr.net/npm/@fontsource/{font-family}/{fontweight}{-fontstyle}.css"){if(iC)return n;let t;for(let i=0,r=n.length;i<r;++i){const o=n[i];if(o in $z)continue;$z[o]=!0;const a=ZT(o,16).split(" ");t||(t=[]),t.push([a.slice(3).join(" ").replace(/"/g,""),a[1],a[0]])}return t&&(async()=>{await document.fonts.ready;for(let i=0,r=t.length;i<r;++i){const o=t[i],s=o[0];if(Kye.includes(s))continue;const a=o[1],c=o[2];if(!(await document.fonts.load(`${c} ${a} 16px "${s}"`)).some(m=>m.family.replace(/^['"]|['"]$/g,"").toLowerCase()===s.toLowerCase()&&m.weight==a&&m.style===c)){const m=e.replace("{font-family}",s.replace(/ /g,"-").toLowerCase()).replace("{Font+Family}",s.replace(/ /g,"+")).replace("{fontweight}",a).replace("{-fontstyle}",c.replace("normal","").replace(/(.+)/,"-$1")).replace("{fontstyle}",c);if(!document.querySelector('link[href="'+m+'"]')){const v=document.createElement("link");v.href=m,v.rel="stylesheet",document.head.appendChild(v)}}}})(),n}const Fye={Point:1,MultiPoint:1,LineString:2,MultiLineString:2,Polygon:3,MultiPolygon:3},zye={center:[.5,.5],left:[0,.5],right:[1,.5],top:[.5,0],bottom:[.5,1],"top-left":[0,0],"top-right":[1,0],"bottom-left":[0,1],"bottom-right":[1,1]},jye=function(n,e){const t=nme(n,e);if(t.result==="error")throw new Error(t.value.map(i=>`${i.key}: ${i.message}`).join(", "));return t.value},gf={zoom:0,distanceFromCenter:0};ff.register(LE,{...ff.definitions,pitch:[{kind:"number"},[],n=>gf.pitch||90],"distance-from-center":[{kind:"number"},[],n=>gf.distanceFromCenter||0]});let l5,yO;function Qi(n,e,t,i,r,o){const s=n.id;r||(r={},console.warn("No functionCache provided to getValue()")),r[s]||(r[s]={});const a=r[s];if(!a[t]){let c=(n[e]||fm)[t];const h=pme[`${e}_${n.type}`][t];c===void 0&&(c=h.default);let m=tme(c);if(!m&&KZ(c)&&(c=ume(c,h),m=!0),m){const v=jye(c,h);a[t]=v.evaluate.bind(v)}else h.type=="color"&&(c=js.parse(c)),a[t]=function(){return c}}return a[t](gf,i,o)}function Hz(n,e,t,i){return Qi(n,"layout",`${t}-allow-overlap`,e,i)?Qi(n,"layout",`${t}-ignore-placement`,e,i)?"none":"obstacle":"declutter"}function Nye(n,e,t,i){if(i||console.warn("No filterCache provided to evaluateFilter()"),!(n in i))try{i[n]=sme(e).filter}catch(r){console.warn("Filter will evaluate to false: "+r.message),i[n]=function(){return!1}}return i[n](gf,t)}function Ey(n,e){if(n){if(n.a===0||e===0)return;const t=n.a;return e=e===void 0?1:e,t===0?"transparent":"rgba("+Math.round(n.r*255/t)+","+Math.round(n.g*255/t)+","+Math.round(n.b*255/t)+","+t*e+")"}return n}const Gye=/\{[^{}}]*\}/g;function vO(n,e){return n.replace(Gye,function(t){return e[t.slice(1,-1)]||""})}function Zz(n,e){let t=n.split(":")[0];return t===n&&(t="default"),e[t]}const Wye={};function Qye(n,e,t,i=r0,r=void 0,o=void 0,s=void 0,a=void 0){if(typeof e=="string"&&(e=JSON.parse(e)),e.version!=8)throw new Error("glStyle version 8 required.");Wye[Rye(e,n)]=Array.from(arguments);const c={};(typeof o=="string"||o instanceof Request||o instanceof Response||o instanceof Promise)&&(o={default:o});for(const X in o){const Z=o[X];px(()=>Z).then(async G=>{let oe;if(typeof Image<"u"){const ue=new Image;if(typeof G=="string")ue.crossOrigin="anonymous",ue.src=G;else{let xe;G instanceof Request?xe=await fetch(G):G instanceof Response&&(xe=G);const me=await xe.blob();oe=URL.createObjectURL(me),ue.src=oe}ue.addEventListener("load",function xe(){ue.removeEventListener("load",xe),c[X]={image:ue,size:[ue.width,ue.height]},n.changed(),oe&&URL.revokeObjectURL(oe)}),ue.addEventListener("error",function xe(){URL.revokeObjectURL(oe),ue.removeEventListener("error",xe)})}else if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope){const ue=self;ue.postMessage({action:"loadImage",src:G}),ue.addEventListener("message",function(me){me.data.action==="imageLoaded"&&me.data.src===G&&(c[X]={image:me.data.image,size:[me.data.image.width,me.data.image.height]})})}})}const h=gZ(e.layers),m={},v=[],x={},E={},D=lJ(e),P=Dye(e);let F;for(let X=0,Z=h.length;X<Z;++X){const G=h[X],oe=G.id;if(typeof t=="string"&&G.source==t||Array.isArray(t)&&t.indexOf(oe)!==-1){const ue=G["source-layer"];if(F){if(G.source!==F)throw new Error(`Layer "${oe}" does not use source "${F}`)}else{F=G.source;const me=e.sources[F];if(!me)throw new Error(`Source "${F}" is not defined`);const Ie=me.type;if(Ie!=="vector"&&Ie!=="geojson")throw new Error(`Source "${F}" is not of type "vector" or "geojson", but "${Ie}"`)}let xe=m[ue];xe||(xe=[],m[ue]=xe),xe.push({layer:G,index:X}),v.push(oe)}}const W=new Fy,q=new s1,V=[],H=function(X,Z,G){const oe=n.getSource?.()?.format_?.layerName_??"mvt:layer",ue=X.getProperties(),xe=m[ue[oe]];if(!xe)return;let me=i.indexOf(Z);me==-1&&(me=jP(Z,i)),gf.zoom=me,gf.distanceFromCenter=0;const Ie=X.getGeometry(),Me=Fye[Ie.getType()],Te=n.get("map");if(Te&&Te instanceof a4&&Me===1){const At=Te.getSize();if(At){const gt=Te.getView().getCenter(),Le=vf(Ie.getExtent());gf.distanceFromCenter=jme(gt,Le)/Z/At[1]}}const je={id:X.getId(),properties:ue,type:Me},Ee=n.get("mapbox-featurestate")[X.getId()];let qe=-1;for(let At=0,gt=xe.length;At<gt;++At){const Le=xe[At],Re=Le.layer,Ge=Re.id;if(G!==void 0&&G!==Ge)continue;const De=Re.layout||fm,_t=Re.paint||fm;if(De.visibility==="none"||"minzoom"in Re&&me<Re.minzoom||"maxzoom"in Re&&me>=Re.maxzoom)continue;const at=Re.filter;if(!at||Nye(Ge,at,je,P)){let Tt,Kt,Ke,Oe,Be,Ve;const yt=Le.index;if(Me==3&&(Re.type=="fill"||Re.type=="fill-extrusion"))if(Kt=Qi(Re,"paint",Re.type+"-opacity",je,D,Ee),Re.type+"-pattern"in _t){const Rn=Qi(Re,"paint",Re.type+"-pattern",je,D,Ee);if(Rn){const Ot=typeof Rn=="string"?vO(Rn,ue):Rn.toString(),be=Zz(Ot,c);if(r&&r[Ot]&&be){++qe,Ve=V[qe],(!Ve||!Ve.getFill()||Ve.getStroke()||Ve.getText())&&(Ve=new lf({fill:new s1}),V[qe]=Ve),Ke=Ve.getFill(),Ve.setZIndex(yt);const ie=Ot+"."+Kt;let le=E[ie];if(!le){const de=r[Ot],se=o6(de.width,de.height),Ae=se.getContext("2d");Ae.globalAlpha=Kt,Ae.drawImage(be.image,de.x,de.y,de.width,de.height,0,0,de.width,de.height),le=Ae.createPattern(se,"repeat"),E[ie]=le}Ke.setColor(le)}}}else Tt=Ey(Qi(Re,"paint",Re.type+"-color",je,D,Ee),Kt),Re.type+"-outline-color"in _t&&(Be=Ey(Qi(Re,"paint",Re.type+"-outline-color",je,D,Ee),Kt)),Be||(Be=Tt),(Tt||Be)&&(++qe,Ve=V[qe],(!Ve||Tt&&!Ve.getFill()||!Tt&&Ve.getFill()||Be&&!Ve.getStroke()||!Be&&Ve.getStroke()||Ve.getText())&&(Ve=new lf({fill:Tt?new s1:void 0,stroke:Be?new Fy:void 0}),V[qe]=Ve),Tt&&(Ke=Ve.getFill(),Ke.setColor(Tt)),Be&&(Oe=Ve.getStroke(),Oe.setColor(Be),Oe.setWidth(.5)),Ve.setZIndex(yt));if(Me!=1&&Re.type=="line"){"line-pattern"in _t?Tt=void 0:Tt=Ey(Qi(Re,"paint","line-color",je,D,Ee),Qi(Re,"paint","line-opacity",je,D,Ee));const Rn=Qi(Re,"paint","line-width",je,D,Ee);Tt&&Rn>0&&(++qe,Ve=V[qe],(!Ve||!Ve.getStroke()||Ve.getFill()||Ve.getText())&&(Ve=new lf({stroke:new Fy}),V[qe]=Ve),Oe=Ve.getStroke(),Oe.setLineCap(Qi(Re,"layout","line-cap",je,D,Ee)),Oe.setLineJoin(Qi(Re,"layout","line-join",je,D,Ee)),Oe.setMiterLimit(Qi(Re,"layout","line-miter-limit",je,D,Ee)),Oe.setColor(Tt),Oe.setWidth(Rn),Oe.setLineDash(_t["line-dasharray"]?Qi(Re,"paint","line-dasharray",je,D,Ee).map(function(Ot){return Ot*Rn}):null),Ve.setZIndex(yt))}let ft=!1,Ct=null,Lt=0,kt,an,Hn;if((Me==1||Me==2)&&"icon-image"in De){const Rn=Qi(Re,"layout","icon-image",je,D,Ee);if(Rn){kt=typeof Rn=="string"?vO(Rn,ue):Rn.toString();let Ot;const be=a?a(n,kt):void 0,ie=Zz(kt,c);if(r&&r[kt]&&ie||be){const le=Qi(Re,"layout","icon-rotation-alignment",je,D,Ee);if(Me==2){const de=X.getGeometry();if(de.getFlatMidpoint||de.getFlatMidpoints){const se=de.getExtent();if(Math.sqrt(Math.max(Math.pow((se[2]-se[0])/Z,2),Math.pow((se[3]-se[1])/Z,2)))>150){const ve=de.getType()==="MultiLineString"?de.getFlatMidpoints():de.getFlatMidpoint();if(yO||(l5=[NaN,NaN],yO=new eh("Point",l5,[],2,{},void 0)),Ot=yO,l5[0]=ve[0],l5[1]=ve[1],Qi(Re,"layout","symbol-placement",je,D,Ee)==="line"&&le==="map"){const tt=de.getStride(),Pe=de.getFlatCoordinates();for(let Xe=0,y=Pe.length-tt;Xe<y;Xe+=tt){const ot=Pe[Xe],Dt=Pe[Xe+1],xt=Pe[Xe+tt],tn=Pe[Xe+tt+1],dt=Math.min(ot,xt),Xn=Math.max(ot,xt),yi=ve[0],Dn=ve[1],Fn=(tn-Dt)*(yi-ot)-(xt-ot)*(Dn-Dt);if(Math.abs(Fn)<.001&&yi<=Xn&&yi>=dt){Lt=Math.atan2(Dt-tn,xt-ot);break}}}}}}if(Me!==2||Ot){const de=Qi(Re,"layout","icon-size",je,D,Ee),se=_t["icon-color"]!==void 0?Qi(Re,"paint","icon-color",je,D,Ee):null;if(!se||se.a!==0){const Ae=Qi(Re,"paint","icon-halo-color",je,D,Ee),ve=Qi(Re,"paint","icon-halo-width",je,D,Ee);let We=`${kt}.${de}.${ve}.${Ae}`;if(se!==null&&(We+=`.${se}`),an=x[We],!an){const tt=Hz(Re,je,"icon",D);let Pe;"icon-offset"in De&&(Pe=Qi(Re,"layout","icon-offset",je,D,Ee).slice(0),Pe[0]*=de,Pe[1]*=-de);let Xe=se?[se.r*255,se.g*255,se.b*255,se.a]:void 0;if(be){const y={color:Xe,rotateWithView:le==="map",displacement:Pe,declutterMode:tt,scale:de};typeof be=="string"?y.src=be:(y.img=be,y.imgSize=[be.width,be.height]),an=new bx(y)}else{const y=r[kt];let ot,Dt,xt;if(ve)y.sdf?(ot=qz(Vz(ie.image,y,se||[0,0,0,1]),{x:0,y:0,width:y.width,height:y.height,pixelRatio:y.pixelRatio},ve,Ae),Xe=void 0):ot=qz(ie.image,y,ve,Ae);else{if(y.sdf&&!ie.unSDFed){const tn=Vz(ie.image,{x:0,y:0,width:ie.size[0],height:ie.size[1]},{r:1,g:1,b:1});ie.image=tn,ie.unSDFed=!0}ot=ie.image,Dt=[y.width,y.height],xt=[y.x,y.y]}an=new bx({color:Xe,img:ot,imgSize:ie.size,size:Dt,offset:xt,rotateWithView:le==="map",scale:de/y.pixelRatio,displacement:Pe,declutterMode:tt})}x[We]=an}}an&&(++qe,Ve=V[qe],(!Ve||!Ve.getImage()||Ve.getFill()||Ve.getStroke())&&(Ve=new lf,V[qe]=Ve),Ve.setGeometry(Ot),an.setRotation(Lt+mO(Qi(Re,"layout","icon-rotate",je,D,Ee))),an.setOpacity(Qi(Re,"paint","icon-opacity",je,D,Ee)),an.setAnchor(zye[Qi(Re,"layout","icon-anchor",je,D,Ee)]),Ve.setImage(an),Ct=Ve.getText(),Ve.setText(void 0),Ve.setZIndex(yt),ft=!0,Hn=!1)}else Hn=!0}}}if(Me==1&&Re.type==="circle"){++qe,Ve=V[qe],(!Ve||!Ve.getImage()||Ve.getFill()||Ve.getStroke())&&(Ve=new lf,V[qe]=Ve);const Rn="circle-radius"in _t?Qi(Re,"paint","circle-radius",je,D,Ee):5,Ot=Ey(Qi(Re,"paint","circle-stroke-color",je,D,Ee),Qi(Re,"paint","circle-stroke-opacity",je,D,Ee)),be=Qi(Re,"paint","circle-translate",je,D,Ee),ie=Ey(Qi(Re,"paint","circle-color",je,D,Ee),Qi(Re,"paint","circle-opacity",je,D,Ee)),le=Qi(Re,"paint","circle-stroke-width",je,D,Ee),de=Rn+"."+Ot+"."+ie+"."+le+"."+be[0]+"."+be[1];an=x[de],an||(an=new hM({radius:Rn,displacement:[be[0],-be[1]],stroke:Ot&&le>0?new Fy({width:le,color:Ot}):void 0,fill:ie?new s1({color:ie}):void 0,declutterMode:"none"}),x[de]=an),Ve.setImage(an),Ct=Ve.getText(),Ve.setText(void 0),Ve.setGeometry(void 0),Ve.setZIndex(yt),ft=!0}let Wn,_i,Ln,Un,xn,Zn;if("text-field"in De){Un=Math.round(Qi(Re,"layout","text-size",je,D,Ee));const Rn=Qi(Re,"layout","text-font",je,D,Ee);Ln=Qi(Re,"layout","text-line-height",je,D,Ee),_i=ZT(s?s(Rn,e.metadata?e.metadata["ol:webfonts"]:void 0):Rn,Un,Ln),_i.includes("sans-serif")||(_i+=",sans-serif"),xn=Qi(Re,"layout","text-letter-spacing",je,D,Ee),Zn=Qi(Re,"layout","text-max-width",je,D,Ee);const Ot=Qi(Re,"layout","text-field",je,D,Ee);typeof Ot=="object"&&Ot.sections?Ot.sections.length===1?Wn=Ot.toString():Wn=Ot.sections.reduce((be,ie,le)=>{const de=ie.fontStack?ie.fontStack.split(","):Rn,se=ZT(s?s(de):de,Un*(ie.scale||1),Ln);let Ae=ie.text;if(Ae===`
`)return be.push(`
`,""),be;if(Me==2)return be.push(v9(Ae,xn),se),be;Ae=b9(Ae,se,Zn,xn).split(`
`);for(let ve=0,We=Ae.length;ve<We;++ve)ve>0&&be.push(`
`,""),be.push(Ae[ve],se);return be},[]):Wn=vO(Ot,ue).trim(),Kt=Qi(Re,"paint","text-opacity",je,D,Ee)}if(Wn&&Kt&&!Hn){ft||(++qe,Ve=V[qe],(!Ve||!Ve.getText()||Ve.getFill()||Ve.getStroke())&&(Ve=new lf,V[qe]=Ve),Ve.setImage(void 0),Ve.setGeometry(void 0));const Rn=Hz(Re,je,"text",D);Ve.getText()||Ve.setText(Ct),Ct=Ve.getText(),(!Ct||"getDeclutterMode"in Ct&&Ct.getDeclutterMode()!==Rn)&&(Ct=new zX({padding:[2,2,2,2],declutterMode:Rn}),Ve.setText(Ct));const Ot=Qi(Re,"layout","text-transform",je,D,Ee);Ot=="uppercase"?Wn=Array.isArray(Wn)?Wn.map((xt,tn)=>tn%2?xt:xt.toUpperCase()):Wn.toUpperCase():Ot=="lowercase"&&(Wn=Array.isArray(Wn)?Wn.map((xt,tn)=>tn%2?xt:xt.toLowerCase()):Wn.toLowerCase());const be=Array.isArray(Wn)?Wn:Me==2?v9(Wn,xn):b9(Wn,_i,Zn,xn);if(Ct.setText(be),Ct.setFont(_i),Ct.setRotation(mO(Qi(Re,"layout","text-rotate",je,D,Ee))),typeof Ct.setKeepUpright=="function"){const xt=Qi(Re,"layout","text-keep-upright",je,D,Ee);Ct.setKeepUpright(xt)}const ie=Qi(Re,"layout","text-anchor",je,D,Ee),le=ft||Me==1?"point":Qi(Re,"layout","symbol-placement",je,D,Ee);let de;if(le==="line-center"?(Ct.setPlacement("line"),de="center"):Ct.setPlacement(le),le==="line"&&typeof Ct.setRepeat=="function"){const xt=Qi(Re,"layout","symbol-spacing",je,D,Ee);Ct.setRepeat(xt*2)}Ct.setOverflow(le==="point");let se=Qi(Re,"paint","text-halo-width",je,D,Ee);const Ae=Qi(Re,"layout","text-offset",je,D,Ee),ve=Qi(Re,"paint","text-translate",je,D,Ee);let We=0,tt=0;if(le=="point"){de="center",ie.indexOf("left")!==-1?(de="left",tt=se):ie.indexOf("right")!==-1&&(de="right",tt=-se);const xt=Qi(Re,"layout","text-rotation-alignment",je,D,Ee);Ct.setRotateWithView(xt=="map")}else Ct.setMaxAngle(mO(Qi(Re,"layout","text-max-angle",je,D,Ee))*Wn.length/be.length),Ct.setRotateWithView(!1);Ct.setTextAlign(de);let Pe="middle";ie.indexOf("bottom")==0?(Pe="bottom",We=-se-.5*(Ln-1)*Un):ie.indexOf("top")==0&&(Pe="top",We=se+.5*(Ln-1)*Un),Ct.setTextBaseline(Pe);const Xe=Qi(Re,"layout","text-justify",je,D,Ee);Ct.setJustify(Xe==="auto"?void 0:Xe),Ct.setOffsetX(Ae[0]*Un+tt+ve[0]),Ct.setOffsetY(Ae[1]*Un+We+ve[1]),q.setColor(Ey(Qi(Re,"paint","text-color",je,D,Ee),Kt)),Ct.setFill(q);const y=Ey(Qi(Re,"paint","text-halo-color",je,D,Ee),Kt);if(y&&se>0){W.setColor(y),se*=2;const xt=.5*Un;W.setWidth(se<=xt?se:xt),Ct.setStroke(W)}else Ct.setStroke(void 0);const ot=Qi(Re,"layout","text-padding",je,D,Ee),Dt=Ct.getPadding();ot!==Dt[0]&&(Dt[0]=ot,Dt[1]=ot,Dt[2]=ot,Dt[3]=ot),Ve.setZIndex(yt)}}}if(qe>-1)return V.length=qe+1,V};return n.setStyle(H),n.set("mapbox-layers",v),n.set("mapbox-source",F),n.set("mapbox-featurestate",n.get("mapbox-featurestate")||{}),H}class hJ{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=r6,this.supportedMediaTypes=null}getReadOptions(e,t){if(t){let i=t.dataProjection?Ns(t.dataProjection):this.readProjection(e);t.extent&&i&&i.getUnits()==="tile-pixels"&&(i=Ns(i),i.setWorldExtent(t.extent)),t={dataProjection:i,featureProjection:t.featureProjection}}return this.adaptOptions(t)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},e)}getType(){return Tr()}readFeature(e,t){return Tr()}readFeatures(e,t){return Tr()}readGeometry(e,t){return Tr()}readProjection(e){return Tr()}writeFeature(e,t){return Tr()}writeFeatures(e,t){return Tr()}writeGeometry(e,t){return Tr()}}function s6(n,e,t){const i=t?Ns(t.featureProjection):null,r=t?Ns(t.dataProjection):null;let o=n;if(i&&r&&!Zy(i,r)){e&&(o=n.clone());const s=e?i:r,a=e?r:i;s.getUnits()==="tile-pixels"?o.transform(s,a):o.applyTransform(X3(s,a))}if(e&&t&&t.decimals!==void 0){const s=Math.pow(10,t.decimals),a=function(c){for(let h=0,m=c.length;h<m;++h)c[h]=Math.round(c[h]*s)/s;return c};o===n&&(o=n.clone()),o.applyTransform(a)}return o}const Yye={Point:Yb,LineString:Vb,Polygon:g1,MultiPoint:fM,MultiLineString:l4,MultiPolygon:u4};function qye(n,e,t){return Array.isArray(e[0])?(bX(n,0,e,t)||(n=n.slice(),c9(n,0,e,t)),n):(mP(n,0,e,t)||(n=n.slice(),sS(n,0,e,t)),n)}function dJ(n,e){const t=n.geometry;if(!t)return[];if(Array.isArray(t))return t.map(o=>dJ({...n,geometry:o})).flat();const i=t.type==="MultiPolygon"?"Polygon":t.type;if(i==="GeometryCollection"||i==="Circle")throw new Error("Unsupported geometry type: "+i);const r=t.layout.length;return s6(new eh(i,i==="Polygon"?qye(t.flatCoordinates,t.ends,r):t.flatCoordinates,t.ends?.flat(),r,n.properties||{},n.id).enableSimplifyTransformed(),!1,e)}function NP(n,e){if(!n)return null;if(Array.isArray(n)){const i=n.map(r=>NP(r,e));return new hS(i)}const t=Yye[n.type];return s6(new t(n.flatCoordinates,n.layout||"XY",n.ends),!1,e)}class Vye extends hJ{constructor(){super()}getType(){return"json"}readFeature(e,t){return this.readFeatureFromObject(u5(e),this.getReadOptions(e,t))}readFeatures(e,t){return this.readFeaturesFromObject(u5(e),this.getReadOptions(e,t))}readFeatureFromObject(e,t){return Tr()}readFeaturesFromObject(e,t){return Tr()}readGeometry(e,t){return this.readGeometryFromObject(u5(e),this.getReadOptions(e,t))}readGeometryFromObject(e,t){return Tr()}readProjection(e){return this.readProjectionFromObject(u5(e))}readProjectionFromObject(e){return Tr()}writeFeature(e,t){return JSON.stringify(this.writeFeatureObject(e,t))}writeFeatureObject(e,t){return Tr()}writeFeatures(e,t){return JSON.stringify(this.writeFeaturesObject(e,t))}writeFeaturesObject(e,t){return Tr()}writeGeometry(e,t){return JSON.stringify(this.writeGeometryObject(e,t))}writeGeometryObject(e,t){return Tr()}}function u5(n){if(typeof n=="string"){const e=JSON.parse(n);return e||null}return n!==null?n:null}class Xz extends Vye{constructor(e){e=e||{},super(),this.dataProjection=Ns(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=Ns(e.featureProjection)),e.featureClass&&(this.featureClass=e.featureClass),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,t){let i=null;e.type==="Feature"?i=e:i={type:"Feature",geometry:e,properties:null};const r=GP(i.geometry);if(this.featureClass===eh)return dJ({geometry:r,id:i.id,properties:i.properties},t);const o=new r6;return this.geometryName_?o.setGeometryName(this.geometryName_):this.extractGeometryName_&&i.geometry_name&&o.setGeometryName(i.geometry_name),o.setGeometry(NP(r,t)),"id"in i&&o.setId(i.id),i.properties&&o.setProperties(i.properties,!0),o}readFeaturesFromObject(e,t){const i=e;let r=null;if(i.type==="FeatureCollection"){const o=e;r=[];const s=o.features;for(let a=0,c=s.length;a<c;++a){const h=this.readFeatureFromObject(s[a],t);h&&r.push(h)}}else r=[this.readFeatureFromObject(e,t)];return r.flat()}readGeometryFromObject(e,t){return $ye(e,t)}readProjectionFromObject(e){const t=e.crs;let i;if(t)if(t.type=="name")i=Ns(t.properties.name);else if(t.type==="EPSG")i=Ns("EPSG:"+t.properties.code);else throw new Error("Unknown SRS type");else i=this.dataProjection;return i}writeFeatureObject(e,t){t=this.adaptOptions(t);const i={type:"Feature",geometry:null,properties:null},r=e.getId();if(r!==void 0&&(i.id=r),!e.hasProperties())return i;const o=e.getProperties(),s=e.getGeometry();return s&&(i.geometry=C9(s,t),delete o[e.getGeometryName()]),tv(o)||(i.properties=o),i}writeFeaturesObject(e,t){t=this.adaptOptions(t);const i=[];for(let r=0,o=e.length;r<o;++r)i.push(this.writeFeatureObject(e[r],t));return{type:"FeatureCollection",features:i}}writeGeometryObject(e,t){return C9(e,this.adaptOptions(t))}}function GP(n,e){if(!n)return null;let t;switch(n.type){case"Point":{t=Zye(n);break}case"LineString":{t=Xye(n);break}case"Polygon":{t=nve(n);break}case"MultiPoint":{t=eve(n);break}case"MultiLineString":{t=Jye(n);break}case"MultiPolygon":{t=tve(n);break}case"GeometryCollection":{t=Hye(n);break}default:throw new Error("Unsupported GeoJSON type: "+n.type)}return t}function $ye(n,e){const t=GP(n);return NP(t,e)}function Hye(n,e){return n.geometries.map(function(i){return GP(i)})}function Zye(n){const e=n.coordinates;return{type:"Point",flatCoordinates:e,layout:aC(e.length)}}function Xye(n){const e=n.coordinates,t=e.flat();return{type:"LineString",flatCoordinates:t,ends:[t.length],layout:aC(e[0]?.length||2)}}function Jye(n){const e=n.coordinates,t=e[0]?.[0]?.length||2,i=[],r=lM(i,0,e,t);return{type:"MultiLineString",flatCoordinates:i,ends:r,layout:aC(t)}}function eve(n){const e=n.coordinates;return{type:"MultiPoint",flatCoordinates:e.flat(),layout:aC(e[0]?.length||2)}}function tve(n){const e=n.coordinates,t=[],i=e[0]?.[0]?.[0].length||2,r=fX(t,0,e,i);return{type:"MultiPolygon",flatCoordinates:t,ends:r,layout:aC(i)}}function nve(n){const e=n.coordinates,t=[],i=e[0]?.[0]?.length,r=lM(t,0,e,i);return{type:"Polygon",flatCoordinates:t,ends:r,layout:aC(i)}}function C9(n,e){n=s6(n,!0,e);const t=n.getType();let i;switch(t){case"Point":{i=lve(n);break}case"LineString":{i=rve(n);break}case"Polygon":{i=uve(n,e);break}case"MultiPoint":{i=sve(n);break}case"MultiLineString":{i=ove(n);break}case"MultiPolygon":{i=ave(n,e);break}case"GeometryCollection":{i=ive(n,e);break}case"Circle":{i={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+t)}return i}function ive(n,e){return e=Object.assign({},e),delete e.featureProjection,{type:"GeometryCollection",geometries:n.getGeometriesArray().map(function(i){return C9(i,e)})}}function rve(n,e){return{type:"LineString",coordinates:n.getCoordinates()}}function ove(n,e){return{type:"MultiLineString",coordinates:n.getCoordinates()}}function sve(n,e){return{type:"MultiPoint",coordinates:n.getCoordinates()}}function ave(n,e){let t;return e&&(t=e.rightHanded),{type:"MultiPolygon",coordinates:n.getCoordinates(t)}}function lve(n,e){return{type:"Point",coordinates:n.getCoordinates()}}function uve(n,e){let t;return e&&(t=e.rightHanded),{type:"Polygon",coordinates:n.getCoordinates(t)}}const _9=65536*65536,Jz=1/_9,cve=12,ej=typeof TextDecoder>"u"?null:new TextDecoder("utf-8"),bO=0,c5=1,y2=2,A5=5;class Ave{constructor(e=new Uint8Array(16)){this.buf=ArrayBuffer.isView(e)?e:new Uint8Array(e),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(e,t,i=this.length){for(;this.pos<i;){const r=this.readVarint(),o=r>>3,s=this.pos;this.type=r&7,e(o,t,this),this.pos===s&&this.skip(r)}return t}readMessage(e,t){return this.readFields(e,t,this.readVarint()+this.pos)}readFixed32(){const e=this.dataView.getUint32(this.pos,!0);return this.pos+=4,e}readSFixed32(){const e=this.dataView.getInt32(this.pos,!0);return this.pos+=4,e}readFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*_9;return this.pos+=8,e}readSFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*_9;return this.pos+=8,e}readFloat(){const e=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,e}readDouble(){const e=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,e}readVarint(e){const t=this.buf;let i,r;return r=t[this.pos++],i=r&127,r<128||(r=t[this.pos++],i|=(r&127)<<7,r<128)||(r=t[this.pos++],i|=(r&127)<<14,r<128)||(r=t[this.pos++],i|=(r&127)<<21,r<128)?i:(r=t[this.pos],i|=(r&15)<<28,hve(i,e,this))}readVarint64(){return this.readVarint(!0)}readSVarint(){const e=this.readVarint();return e%2===1?(e+1)/-2:e/2}readBoolean(){return!!this.readVarint()}readString(){const e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=cve&&ej?ej.decode(this.buf.subarray(t,e)):wve(this.buf,t,e)}readBytes(){const e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t}readPackedVarint(e=[],t){const i=this.readPackedEnd();for(;this.pos<i;)e.push(this.readVarint(t));return e}readPackedSVarint(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSVarint());return e}readPackedBoolean(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readBoolean());return e}readPackedFloat(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFloat());return e}readPackedDouble(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readDouble());return e}readPackedFixed32(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFixed32());return e}readPackedSFixed32(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSFixed32());return e}readPackedFixed64(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFixed64());return e}readPackedSFixed64(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSFixed64());return e}readPackedEnd(){return this.type===y2?this.readVarint()+this.pos:this.pos+1}skip(e){const t=e&7;if(t===bO)for(;this.buf[this.pos++]>127;);else if(t===y2)this.pos=this.readVarint()+this.pos;else if(t===A5)this.pos+=4;else if(t===c5)this.pos+=8;else throw new Error(`Unimplemented type: ${t}`)}writeTag(e,t){this.writeVarint(e<<3|t)}realloc(e){let t=this.length||16;for(;t<this.pos+e;)t*=2;if(t!==this.length){const i=new Uint8Array(t);i.set(this.buf),this.buf=i,this.dataView=new DataView(i.buffer),this.length=t}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeSFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,e&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*Jz),!0),this.pos+=8}writeSFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,e&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*Jz),!0),this.pos+=8}writeVarint(e){if(e=+e||0,e>268435455||e<0){dve(e,this);return}this.realloc(4),this.buf[this.pos++]=e&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=e>>>7&127)))}writeSVarint(e){this.writeVarint(e<0?-e*2-1:e*2)}writeBoolean(e){this.writeVarint(+e)}writeString(e){e=String(e),this.realloc(e.length*4),this.pos++;const t=this.pos;this.pos=Sve(this.buf,e,this.pos);const i=this.pos-t;i>=128&&tj(t,i,this),this.pos=t-1,this.writeVarint(i),this.pos+=i}writeFloat(e){this.realloc(4),this.dataView.setFloat32(this.pos,e,!0),this.pos+=4}writeDouble(e){this.realloc(8),this.dataView.setFloat64(this.pos,e,!0),this.pos+=8}writeBytes(e){const t=e.length;this.writeVarint(t),this.realloc(t);for(let i=0;i<t;i++)this.buf[this.pos++]=e[i]}writeRawMessage(e,t){this.pos++;const i=this.pos;e(t,this);const r=this.pos-i;r>=128&&tj(i,r,this),this.pos=i-1,this.writeVarint(r),this.pos+=r}writeMessage(e,t,i){this.writeTag(e,y2),this.writeRawMessage(t,i)}writePackedVarint(e,t){t.length&&this.writeMessage(e,mve,t)}writePackedSVarint(e,t){t.length&&this.writeMessage(e,gve,t)}writePackedBoolean(e,t){t.length&&this.writeMessage(e,bve,t)}writePackedFloat(e,t){t.length&&this.writeMessage(e,yve,t)}writePackedDouble(e,t){t.length&&this.writeMessage(e,vve,t)}writePackedFixed32(e,t){t.length&&this.writeMessage(e,Cve,t)}writePackedSFixed32(e,t){t.length&&this.writeMessage(e,_ve,t)}writePackedFixed64(e,t){t.length&&this.writeMessage(e,xve,t)}writePackedSFixed64(e,t){t.length&&this.writeMessage(e,Mve,t)}writeBytesField(e,t){this.writeTag(e,y2),this.writeBytes(t)}writeFixed32Field(e,t){this.writeTag(e,A5),this.writeFixed32(t)}writeSFixed32Field(e,t){this.writeTag(e,A5),this.writeSFixed32(t)}writeFixed64Field(e,t){this.writeTag(e,c5),this.writeFixed64(t)}writeSFixed64Field(e,t){this.writeTag(e,c5),this.writeSFixed64(t)}writeVarintField(e,t){this.writeTag(e,bO),this.writeVarint(t)}writeSVarintField(e,t){this.writeTag(e,bO),this.writeSVarint(t)}writeStringField(e,t){this.writeTag(e,y2),this.writeString(t)}writeFloatField(e,t){this.writeTag(e,A5),this.writeFloat(t)}writeDoubleField(e,t){this.writeTag(e,c5),this.writeDouble(t)}writeBooleanField(e,t){this.writeVarintField(e,+t)}}function hve(n,e,t){const i=t.buf;let r,o;if(o=i[t.pos++],r=(o&112)>>4,o<128||(o=i[t.pos++],r|=(o&127)<<3,o<128)||(o=i[t.pos++],r|=(o&127)<<10,o<128)||(o=i[t.pos++],r|=(o&127)<<17,o<128)||(o=i[t.pos++],r|=(o&127)<<24,o<128)||(o=i[t.pos++],r|=(o&1)<<31,o<128))return qC(n,r,e);throw new Error("Expected varint not more than 10 bytes")}function qC(n,e,t){return t?e*4294967296+(n>>>0):(e>>>0)*4294967296+(n>>>0)}function dve(n,e){let t,i;if(n>=0?(t=n%4294967296|0,i=n/4294967296|0):(t=~(-n%4294967296),i=~(-n/4294967296),t^4294967295?t=t+1|0:(t=0,i=i+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),fve(t,i,e),pve(i,e)}function fve(n,e,t){t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos]=n&127}function pve(n,e){const t=(n&7)<<4;e.buf[e.pos++]|=t|((n>>>=3)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127)))))}function tj(n,e,t){const i=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(Math.LN2*7));t.realloc(i);for(let r=t.pos-1;r>=n;r--)t.buf[r+i]=t.buf[r]}function mve(n,e){for(let t=0;t<n.length;t++)e.writeVarint(n[t])}function gve(n,e){for(let t=0;t<n.length;t++)e.writeSVarint(n[t])}function yve(n,e){for(let t=0;t<n.length;t++)e.writeFloat(n[t])}function vve(n,e){for(let t=0;t<n.length;t++)e.writeDouble(n[t])}function bve(n,e){for(let t=0;t<n.length;t++)e.writeBoolean(n[t])}function Cve(n,e){for(let t=0;t<n.length;t++)e.writeFixed32(n[t])}function _ve(n,e){for(let t=0;t<n.length;t++)e.writeSFixed32(n[t])}function xve(n,e){for(let t=0;t<n.length;t++)e.writeFixed64(n[t])}function Mve(n,e){for(let t=0;t<n.length;t++)e.writeSFixed64(n[t])}function wve(n,e,t){let i="",r=e;for(;r<t;){const o=n[r];let s=null,a=o>239?4:o>223?3:o>191?2:1;if(r+a>t)break;let c,h,m;a===1?o<128&&(s=o):a===2?(c=n[r+1],(c&192)===128&&(s=(o&31)<<6|c&63,s<=127&&(s=null))):a===3?(c=n[r+1],h=n[r+2],(c&192)===128&&(h&192)===128&&(s=(o&15)<<12|(c&63)<<6|h&63,(s<=2047||s>=55296&&s<=57343)&&(s=null))):a===4&&(c=n[r+1],h=n[r+2],m=n[r+3],(c&192)===128&&(h&192)===128&&(m&192)===128&&(s=(o&15)<<18|(c&63)<<12|(h&63)<<6|m&63,(s<=65535||s>=1114112)&&(s=null))),s===null?(s=65533,a=1):s>65535&&(s-=65536,i+=String.fromCharCode(s>>>10&1023|55296),s=56320|s&1023),i+=String.fromCharCode(s),r+=a}return i}function Sve(n,e,t){for(let i=0,r,o;i<e.length;i++){if(r=e.charCodeAt(i),r>55295&&r<57344)if(o)if(r<56320){n[t++]=239,n[t++]=191,n[t++]=189,o=r;continue}else r=o-55296<<10|r-56320|65536,o=null;else{r>56319||i+1===e.length?(n[t++]=239,n[t++]=191,n[t++]=189):o=r;continue}else o&&(n[t++]=239,n[t++]=191,n[t++]=189,o=null);r<128?n[t++]=r:(r<2048?n[t++]=r>>6|192:(r<65536?n[t++]=r>>12|224:(n[t++]=r>>18|240,n[t++]=r>>12&63|128),n[t++]=r>>6&63|128),n[t++]=r&63|128)}return t}class fJ extends hJ{constructor(e){super(),e=e||{},this.dataProjection=new YE({code:"",units:"tile-pixels"}),this.featureClass=e.featureClass?e.featureClass:eh,this.geometryName_=e.geometryName,this.layerName_=e.layerName?e.layerName:"layer",this.layers_=e.layers?e.layers:null,this.idProperty_=e.idProperty,this.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"]}readRawGeometry_(e,t,i,r){e.pos=t.geometry;const o=e.readVarint()+e.pos;let s=1,a=0,c=0,h=0,m=0,v=0;for(;e.pos<o;){if(!a){const x=e.readVarint();s=x&7,a=x>>3}if(a--,s===1||s===2)c+=e.readSVarint(),h+=e.readSVarint(),s===1&&m>v&&(r.push(m),v=m),i.push(c,h),m+=2;else if(s===7)m>v&&(i.push(i[v],i[v+1]),m+=2);else throw new Error("Invalid command found in the PBF")}m>v&&(r.push(m),v=m)}createFeature_(e,t,i){const r=t.type;if(r===0)return null;let o;const s=t.properties;let a;this.idProperty_?(a=s[this.idProperty_],delete s[this.idProperty_]):a=t.id,s[this.layerName_]=t.layer.name;const c=[],h=[];this.readRawGeometry_(e,t,c,h);const m=kve(r,h.length);if(this.featureClass===eh)o=new this.featureClass(m,c,h,2,s,a),o.transform(i.dataProjection);else{let v;if(m=="Polygon"){const D=CX(c,h);v=D.length>1?new u4(c,"XY",D):new g1(c,"XY",h)}else v=m==="Point"?new Yb(c,"XY"):m==="LineString"?new Vb(c,"XY"):m==="MultiPoint"?new fM(c,"XY"):m==="MultiLineString"?new l4(c,"XY",h):null;const x=this.featureClass;o=new x,this.geometryName_&&o.setGeometryName(this.geometryName_);const E=s6(v,!1,i);o.setGeometry(E),a!==void 0&&o.setId(a),o.setProperties(s,!0)}return o}getType(){return"arraybuffer"}readFeatures(e,t){const i=this.layers_;t=this.adaptOptions(t);const r=Ns(t.dataProjection);r.setWorldExtent(t.extent),t.dataProjection=r;const o=new Ave(e),s=o.readFields(Eve,{}),a=[];for(const c in s){if(i&&!i.includes(c))continue;const h=s[c],m=h?[0,0,h.extent,h.extent]:null;r.setExtent(m);for(let v=0,x=h.length;v<x;++v){const E=Ive(o,h,v),D=this.createFeature_(o,E,t);D!==null&&a.push(D)}}return a}readProjection(e){return this.dataProjection}setLayers(e){this.layers_=e}}function Eve(n,e,t){if(n===3){const i={keys:[],values:[],features:[]},r=t.readVarint()+t.pos;t.readFields(Bve,i,r),i.length=i.features.length,i.length&&(e[i.name]=i)}}function Bve(n,e,t){if(n===15)e.version=t.readVarint();else if(n===1)e.name=t.readString();else if(n===5)e.extent=t.readVarint();else if(n===2)e.features.push(t.pos);else if(n===3)e.keys.push(t.readString());else if(n===4){let i=null;const r=t.readVarint()+t.pos;for(;t.pos<r;)n=t.readVarint()>>3,i=n===1?t.readString():n===2?t.readFloat():n===3?t.readDouble():n===4?t.readVarint64():n===5?t.readVarint():n===6?t.readSVarint():n===7?t.readBoolean():null;e.values.push(i)}}function Ove(n,e,t){if(n==1)e.id=t.readVarint();else if(n==2){const i=t.readVarint()+t.pos;for(;t.pos<i;){const r=e.layer.keys[t.readVarint()],o=e.layer.values[t.readVarint()];e.properties[r]=o}}else n==3?e.type=t.readVarint():n==4&&(e.geometry=t.pos)}function Ive(n,e,t){n.pos=e.features[t];const i=n.readVarint()+n.pos,r={layer:e,type:0,properties:{}};return n.readFields(Ove,r,i),r}function kve(n,e){let t;return n===1?t=e===1?"Point":"MultiPoint":n===2?t=e===1?"LineString":"MultiLineString":n===3&&(t="Polygon"),t}class Tve extends UP{constructor(e){super(e),this.image=null}getImage(){return this.image?this.image.getImage():null}prepareFrame(e){const t=e.layerStatesArray[e.layerIndex],i=e.pixelRatio,r=e.viewState,o=r.resolution,s=this.getLayer().getSource(),a=e.viewHints;let c=e.extent;if(t.extent!==void 0&&(c=vm(c,Qg(t.extent,r.projection))),!a[Cl.ANIMATING]&&!a[Cl.INTERACTING]&&!oC(c))if(s){const h=r.projection,m=s.getImage(c,o,i,h);m&&(this.loadImage(m)?this.image=m:m.getState()===Ui.EMPTY&&(this.image=null))}else this.image=null;return!!this.image}getData(e){const t=this.frameState;if(!t)return null;const i=this.getLayer(),r=Hu(t.pixelToCoordinateTransform,e.slice()),o=i.getExtent();if(o&&!Qb(o,r))return null;const s=this.image.getExtent(),a=this.image.getImage(),c=ns(s),h=Math.floor(a.width*((r[0]-s[0])/c));if(h<0||h>=a.width)return null;const m=Ju(s),v=Math.floor(a.height*((s[3]-r[1])/m));return v<0||v>=a.height?null:this.getImageData(a,h,v)}renderFrame(e,t){const i=this.image,r=i.getExtent(),o=i.getResolution(),[s,a]=Array.isArray(o)?o:[o,o],c=i.getPixelRatio(),h=e.layerStatesArray[e.layerIndex],m=e.pixelRatio,v=e.viewState,x=v.center,E=v.resolution,D=m*s/(E*c),P=m*a/(E*c);this.prepareContainer(e,t);const F=this.context.canvas.width,W=this.context.canvas.height,q=this.getRenderContext(e);let V=!1,H=!0;if(h.extent){const ue=Qg(h.extent,v.projection);H=tu(ue,e.extent),V=H&&!Wg(ue,e.extent),V&&this.clipUnrotated(q,e,ue)}const X=i.getImage(),Z=s0(this.tempTransform,F/2,W/2,D,P,0,c*(r[0]-x[0])/s,c*(x[1]-r[3])/a);this.renderedResolution=a*m/c;const G=X.width*Z[0],oe=X.height*Z[3];if(this.getLayer().getSource().getInterpolate()||(q.imageSmoothingEnabled=!1),this.preRender(q,e),H&&G>=.5&&oe>=.5){const ue=Z[4],xe=Z[5],me=h.opacity;me!==1&&(q.save(),q.globalAlpha=me),q.drawImage(X,0,0,+X.width,+X.height,ue,xe,G,oe),me!==1&&q.restore()}return this.postRender(this.context,e),V&&q.restore(),q.imageSmoothingEnabled=!0,this.container}}class Rve extends jx{constructor(e){e=e||{},super(e)}}class pJ extends Rve{constructor(e){super(e)}createRenderer(){return new Tve(this)}getData(e){return super.getData(e)}}function x9(n){return n instanceof Image||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageBitmap?n:null}const Dve=new Error("disposed"),Pve=[256,256];class nj extends mM{constructor(e){const t=ii.IDLE;super(e.tileCoord,t,{transition:e.transition,interpolate:e.interpolate}),this.loader_=e.loader,this.data_=null,this.error_=null,this.size_=e.size||null,this.controller_=e.controller||null}getSize(){if(this.size_)return this.size_;const e=x9(this.data_);return e?[e.width,e.height]:Pve}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==ii.IDLE&&this.state!==ii.ERROR)return;this.state=ii.LOADING,this.changed();const e=this;this.loader_().then(function(t){e.data_=t,e.state=ii.LOADED,e.changed()}).catch(function(t){e.error_=t,e.state=ii.ERROR,e.changed()})}disposeInternal(){this.controller_&&(this.controller_.abort(Dve),this.controller_=null),super.disposeInternal()}}let CO;const V_=[];function ij(n,e,t,i,r){n.beginPath(),n.moveTo(0,0),n.lineTo(e,t),n.lineTo(i,r),n.closePath(),n.save(),n.clip(),n.fillRect(0,0,Math.max(e,i)+1,Math.max(t,r)),n.restore()}function _O(n,e){return Math.abs(n[e*4]-210)>2||Math.abs(n[e*4+3]-.75*255)>2}function Uve(){if(CO===void 0){const n=Kl(6,6,V_);n.globalCompositeOperation="lighter",n.fillStyle="rgba(210, 0, 0, 0.75)",ij(n,4,5,4,0),ij(n,4,5,0,5);const e=n.getImageData(0,0,3,3).data;CO=_O(e,0)||_O(e,4)||_O(e,8),uM(n),V_.push(n.canvas)}return CO}function M9(n,e,t,i){const r=$E(t,e,n);let o=s9(e,i,t);const s=e.getMetersPerUnit();s!==void 0&&(o*=s);const a=n.getMetersPerUnit();a!==void 0&&(o/=a);const c=n.getExtent();if(!c||Qb(c,r)){const h=s9(n,o,r)/o;isFinite(h)&&h>0&&(o/=h)}return o}function Kve(n,e,t,i){const r=vf(t);let o=M9(n,e,r,i);return(!isFinite(o)||o<=0)&&HZ(t,function(s){return o=M9(n,e,s,i),isFinite(o)&&o>0}),o}function mJ(n,e,t,i,r,o,s,a,c,h,m,v,x,E){const D=Kl(Math.round(t*n),Math.round(t*e),V_);if(v||(D.imageSmoothingEnabled=!1),c.length===0)return D.canvas;D.scale(t,t);function P(X){return Math.round(X*t)/t}D.globalCompositeOperation="lighter";const F=ap();c.forEach(function(X,Z,G){VZ(F,X.extent)});let W;const q=t/i,V=(v?1:1+Math.pow(2,-24))/q;(!x||c.length!==1||h!==0)&&(W=Kl(Math.round(ns(F)*q),Math.round(Ju(F)*q),V_),v||(W.imageSmoothingEnabled=!1),c.forEach(function(X,Z,G){if(X.image.width>0&&X.image.height>0){if(X.clipExtent){W.save();const Ie=(X.clipExtent[0]-F[0])*q,Me=-(X.clipExtent[3]-F[3])*q,Te=ns(X.clipExtent)*q,je=Ju(X.clipExtent)*q;W.rect(v?Ie:Math.round(Ie),v?Me:Math.round(Me),v?Te:Math.round(Ie+Te)-Math.round(Ie),v?je:Math.round(Me+je)-Math.round(Me)),W.clip()}const oe=(X.extent[0]-F[0])*q,ue=-(X.extent[3]-F[3])*q,xe=ns(X.extent)*q,me=Ju(X.extent)*q;W.drawImage(X.image,h,h,X.image.width-2*h,X.image.height-2*h,v?oe:Math.round(oe),v?ue:Math.round(ue),v?xe:Math.round(oe+xe)-Math.round(oe),v?me:Math.round(ue+me)-Math.round(ue)),X.clipExtent&&W.restore()}}));const H=C1(s);return a.getTriangles().forEach(function(X,Z,G){const oe=X.source,ue=X.target;let xe=oe[0][0],me=oe[0][1],Ie=oe[1][0],Me=oe[1][1],Te=oe[2][0],je=oe[2][1];const Ee=P((ue[0][0]-H[0])/o),qe=P(-(ue[0][1]-H[1])/o),At=P((ue[1][0]-H[0])/o),gt=P(-(ue[1][1]-H[1])/o),Le=P((ue[2][0]-H[0])/o),Re=P(-(ue[2][1]-H[1])/o),Ge=xe,De=me;xe=0,me=0,Ie-=Ge,Me-=De,Te-=Ge,je-=De;const _t=[[Ie,Me,0,0,At-Ee],[Te,je,0,0,Le-Ee],[0,0,Ie,Me,gt-qe],[0,0,Te,je,Re-qe]],at=Ime(_t);if(!at)return;if(D.save(),D.beginPath(),Uve()||!v){D.moveTo(At,gt);const Kt=4,Ke=Ee-At,Oe=qe-gt;for(let Be=0;Be<Kt;Be++)D.lineTo(At+P((Be+1)*Ke/Kt),gt+P(Be*Oe/(Kt-1))),Be!=Kt-1&&D.lineTo(At+P((Be+1)*Ke/Kt),gt+P((Be+1)*Oe/(Kt-1)));D.lineTo(Le,Re)}else D.moveTo(At,gt),D.lineTo(Ee,qe),D.lineTo(Le,Re);D.clip(),D.transform(at[0],at[2],at[1],at[3],Ee,qe),D.translate(F[0]-Ge,F[3]-De);let Tt;if(W)Tt=W.canvas,D.scale(V,-V);else{const Kt=c[0],Ke=Kt.extent;Tt=Kt.image,D.scale(ns(Ke)/Tt.width,-Ju(Ke)/Tt.height)}D.drawImage(Tt,0,0),D.restore()}),W&&(uM(W),V_.push(W.canvas)),m&&(D.save(),D.globalCompositeOperation="source-over",D.strokeStyle="black",D.lineWidth=1,a.getTriangles().forEach(function(X,Z,G){const oe=X.target,ue=(oe[0][0]-H[0])/o,xe=-(oe[0][1]-H[1])/o,me=(oe[1][0]-H[0])/o,Ie=-(oe[1][1]-H[1])/o,Me=(oe[2][0]-H[0])/o,Te=-(oe[2][1]-H[1])/o;D.beginPath(),D.moveTo(me,Ie),D.lineTo(ue,xe),D.lineTo(Me,Te),D.closePath(),D.stroke()}),D.restore()),D.canvas}const Lve=10,rj=.25;class gJ{constructor(e,t,i,r,o,s,a){this.sourceProj_=e,this.targetProj_=t;let c={};const h=a?yge(V=>Hu(a,$E(V,this.targetProj_,this.sourceProj_))):X3(this.targetProj_,this.sourceProj_);this.transformInv_=function(V){const H=V[0]+"/"+V[1];return c[H]||(c[H]=h(V)),c[H]},this.maxSourceExtent_=r,this.errorThresholdSquared_=o*o,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!r&&!!this.sourceProj_.getExtent()&&ns(r)>=ns(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?ns(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?ns(this.targetProj_.getExtent()):null;const m=C1(i),v=QE(i),x=WE(i),E=GE(i),D=this.transformInv_(m),P=this.transformInv_(v),F=this.transformInv_(x),W=this.transformInv_(E),q=Lve+(s?Math.max(0,Math.ceil(Math.log2(n9(i)/(s*s*256*256)))):0);if(this.addQuad_(m,v,x,E,D,P,F,W,q),this.wrapsXInSource_){let V=1/0;this.triangles_.forEach(function(H,X,Z){V=Math.min(V,H.source[0][0],H.source[1][0],H.source[2][0])}),this.triangles_.forEach(H=>{if(Math.max(H.source[0][0],H.source[1][0],H.source[2][0])-V>this.sourceWorldWidth_/2){const X=[[H.source[0][0],H.source[0][1]],[H.source[1][0],H.source[1][1]],[H.source[2][0],H.source[2][1]]];X[0][0]-V>this.sourceWorldWidth_/2&&(X[0][0]-=this.sourceWorldWidth_),X[1][0]-V>this.sourceWorldWidth_/2&&(X[1][0]-=this.sourceWorldWidth_),X[2][0]-V>this.sourceWorldWidth_/2&&(X[2][0]-=this.sourceWorldWidth_);const Z=Math.min(X[0][0],X[1][0],X[2][0]);Math.max(X[0][0],X[1][0],X[2][0])-Z<this.sourceWorldWidth_/2&&(H.source=X)}})}c={}}addTriangle_(e,t,i,r,o,s){this.triangles_.push({source:[r,o,s],target:[e,t,i]})}addQuad_(e,t,i,r,o,s,a,c,h){const m=e9([o,s,a,c]),v=this.sourceWorldWidth_?ns(m)/this.sourceWorldWidth_:null,x=this.sourceWorldWidth_,E=this.sourceProj_.canWrapX()&&v>.5&&v<1;let D=!1;if(h>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const F=e9([e,t,i,r]);D=ns(F)/this.targetWorldWidth_>rj||D}!E&&this.sourceProj_.isGlobal()&&v&&(D=v>rj||D)}if(!D&&this.maxSourceExtent_&&isFinite(m[0])&&isFinite(m[1])&&isFinite(m[2])&&isFinite(m[3])&&!tu(m,this.maxSourceExtent_))return;let P=0;if(!D&&(!isFinite(o[0])||!isFinite(o[1])||!isFinite(s[0])||!isFinite(s[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(c[0])||!isFinite(c[1]))){if(h>0)D=!0;else if(P=(!isFinite(o[0])||!isFinite(o[1])?8:0)+(!isFinite(s[0])||!isFinite(s[1])?4:0)+(!isFinite(a[0])||!isFinite(a[1])?2:0)+(!isFinite(c[0])||!isFinite(c[1])?1:0),P!=1&&P!=2&&P!=4&&P!=8)return}if(h>0){if(!D){const F=[(e[0]+i[0])/2,(e[1]+i[1])/2],W=this.transformInv_(F);let q;E?q=(Ub(o[0],x)+Ub(a[0],x))/2-Ub(W[0],x):q=(o[0]+a[0])/2-W[0];const V=(o[1]+a[1])/2-W[1];D=q*q+V*V>this.errorThresholdSquared_}if(D){if(Math.abs(e[0]-i[0])<=Math.abs(e[1]-i[1])){const F=[(t[0]+i[0])/2,(t[1]+i[1])/2],W=this.transformInv_(F),q=[(r[0]+e[0])/2,(r[1]+e[1])/2],V=this.transformInv_(q);this.addQuad_(e,t,F,q,o,s,W,V,h-1),this.addQuad_(q,F,i,r,V,W,a,c,h-1)}else{const F=[(e[0]+t[0])/2,(e[1]+t[1])/2],W=this.transformInv_(F),q=[(i[0]+r[0])/2,(i[1]+r[1])/2],V=this.transformInv_(q);this.addQuad_(e,F,q,r,o,W,V,c,h-1),this.addQuad_(F,t,i,q,W,s,a,V,h-1)}return}}if(E){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}(P&11)==0&&this.addTriangle_(e,i,r,o,a,c),(P&14)==0&&this.addTriangle_(e,i,t,o,a,s),P&&((P&13)==0&&this.addTriangle_(t,r,e,s,c,o),(P&7)==0&&this.addTriangle_(t,r,i,s,c,a))}calculateSourceExtent(){const e=ap();return this.triangles_.forEach(function(t,i,r){const o=t.source;h3(e,o[0]),h3(e,o[1]),h3(e,o[2])}),e}getTriangles(){return this.triangles_}}const yJ=.5;class vJ extends mM{constructor(e,t,i,r,o,s,a,c,h,m,v,x){super(o,ii.IDLE,x),this.renderEdges_=v!==void 0?v:!1,this.pixelRatio_=a,this.gutter_=c,this.canvas_=null,this.sourceTileGrid_=t,this.targetTileGrid_=r,this.wrappedTileCoord_=s||o,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=e.canWrapX()?e.getExtent():void 0;const E=r.getTileCoordExtent(this.wrappedTileCoord_),D=this.targetTileGrid_.getExtent();let P=this.sourceTileGrid_.getExtent();const F=D?vm(E,D):E;if(n9(F)===0){this.state=ii.EMPTY;return}const W=e.getExtent();W&&(P?P=vm(P,W):P=W);const q=r.getResolution(this.wrappedTileCoord_[0]),V=Kve(e,i,F,q);if(!isFinite(V)||V<=0){this.state=ii.EMPTY;return}const H=m!==void 0?m:yJ;if(this.triangulation_=new gJ(e,i,F,P,V*H,q),this.triangulation_.getTriangles().length===0){this.state=ii.EMPTY;return}this.sourceZ_=t.getZForResolution(V);let X=this.triangulation_.calculateSourceExtent();if(P&&(e.canWrapX()?(X[1]=Ul(X[1],P[1],P[3]),X[3]=Ul(X[3],P[1],P[3])):X=vm(X,P)),!n9(X))this.state=ii.EMPTY;else{let Z=0,G=0;e.canWrapX()&&(Z=ns(W),G=Math.floor((X[0]-W[0])/Z)),JZ(X.slice(),e,!0).forEach(ue=>{const xe=t.getTileRangeForExtentAndZ(ue,this.sourceZ_);for(let me=xe.minX;me<=xe.maxX;me++)for(let Ie=xe.minY;Ie<=xe.maxY;Ie++){const Me=h(this.sourceZ_,me,Ie,a);if(Me){const Te=G*Z;this.sourceTiles_.push({tile:Me,offset:Te})}}++G}),this.sourceTiles_.length===0&&(this.state=ii.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(t=>{const i=t.tile;if(i&&i.getState()==ii.LOADED){const r=this.sourceTileGrid_.getTileCoordExtent(i.tileCoord);r[0]+=t.offset,r[2]+=t.offset;const o=this.clipExtent_?.slice();o&&(o[0]+=t.offset,o[2]+=t.offset),e.push({extent:r,clipExtent:o,image:i.getImage()})}}),this.sourceTiles_.length=0,e.length===0)this.state=ii.ERROR;else{const t=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(t),r=typeof i=="number"?i:i[0],o=typeof i=="number"?i:i[1],s=this.targetTileGrid_.getResolution(t),a=this.sourceTileGrid_.getResolution(this.sourceZ_),c=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=mJ(r,o,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),s,c,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=ii.LOADED}this.changed()}load(){if(this.state==ii.IDLE){this.state=ii.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:t})=>{const i=t.getState();if(i==ii.IDLE||i==ii.LOADING){e++;const r=qo(t,Er.CHANGE,o=>{const s=t.getState();(s==ii.LOADED||s==ii.ERROR||s==ii.EMPTY)&&(Ba(r),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(r)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:t},i,r){t.getState()==ii.IDLE&&t.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(Ba),this.sourcesListenerKeys_=null}release(){this.canvas_&&(uM(this.canvas_.getContext("2d")),V_.push(this.canvas_),this.canvas_=null),super.release()}}class Fve{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}deleteOldest(){const e=this.pop();e instanceof nM&&e.dispose()}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.deleteOldest()}clear(){for(;this.oldest_;)this.deleteOldest()}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let t=this.oldest_;for(;t;)e(t.value_,t.key_,this),t=t.newer}get(e,t){const i=this.entries_[e];return ws(i!==void 0,"Tried to get a value for a key that does not exist in the cache"),i===this.newest_||(i===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.newest_,this.newest_.newer=i,this.newest_=i),i.value_}remove(e){const t=this.entries_[e];return ws(t!==void 0,"Tried to get a value for a key that does not exist in the cache"),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let t=0,i;for(i=this.newest_;i;i=i.older)e[t++]=i.key_;return e}getValues(){const e=new Array(this.count_);let t=0,i;for(i=this.newest_;i;i=i.older)e[t++]=i.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){return this.entries_[e]?.value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,t){this.get(e),this.entries_[e].value_=t}set(e,t){ws(!(e in this.entries_),"Tried to set a value for a key that is used already");const i={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[e]=i,++this.count_}setSize(e){this.highWaterMark=e}}function yS(n,e,t,i){return i!==void 0?(i[0]=n,i[1]=e,i[2]=t,i):[n,e,t]}function zve(n,e,t){return n+"/"+e+"/"+t}function jve(n){return Nve(n[0],n[1],n[2])}function Nve(n,e,t){return(e<<n)+t}function Gve(n,e){const t=n[0],i=n[1],r=n[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;const o=e.getFullTileRange(t);return o?o.containsXY(i,r):!0}function xO(n,e,t,i,r){return`${Nr(n)},${e},${zve(t,i,r)}`}function MO(n,e,t){if(!(t in n))return n[t]=new Set([e]),!0;const i=n[t],r=i.has(e);return r||i.add(e),!r}function Wve(n,e,t){const i=n[t];return i?i.delete(e):!1}function oj(n,e){const t=n.layerStatesArray[n.layerIndex];t.extent&&(e=vm(e,Qg(t.extent,n.viewState.projection)));const i=t.layer.getRenderSource();if(!i.getWrapX()){const r=i.getTileGridForProjection(n.viewState.projection).getExtent();r&&(e=vm(e,r))}return e}class bJ extends UP{constructor(e,t){super(e),t=t||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedTiles=[],this.renderedSourceKey_,this.renderedSourceRevision_,this.tempExtent=ap(),this.tempTileRange_=new LP(0,0,0,0),this.tempTileCoord_=yS(0,0,0);const i=t.cacheSize!==void 0?t.cacheSize:512;this.tileCache_=new Fve(i),this.maxStaleKeys=i*.5}getTileCache(){return this.tileCache_}getOrCreateTile(e,t,i,r){const o=this.tileCache_,a=this.getLayer().getSource(),c=xO(a,a.getKey(),e,t,i);let h;if(o.containsKey(c))h=o.get(c);else{if(h=a.getTile(e,t,i,r.pixelRatio,r.viewState.projection),!h)return null;o.set(c,h)}return h}getTile(e,t,i,r){const o=this.getOrCreateTile(e,t,i,r);return o||null}getData(e){const t=this.frameState;if(!t)return null;const i=this.getLayer(),r=Hu(t.pixelToCoordinateTransform,e.slice()),o=i.getExtent();if(o&&!Qb(o,r))return null;const s=t.viewState,a=i.getRenderSource(),c=a.getTileGridForProjection(s.projection),h=a.getTilePixelRatio(t.pixelRatio);for(let m=c.getZForResolution(s.resolution);m>=c.getMinZoom();--m){const v=c.getTileCoordForCoordAndZ(r,m),x=this.getTile(m,v[1],v[2],t);if(!x||x.getState()!==ii.LOADED)continue;const E=c.getOrigin(m),D=nh(c.getTileSize(m)),P=c.getResolution(m);let F;if(x instanceof oJ||x instanceof vJ)F=x.getImage();else if(x instanceof nj){if(F=x9(x.getData()),!F)continue}else continue;const W=Math.floor(h*((r[0]-E[0])/P-v[1]*D[0])),q=Math.floor(h*((E[1]-r[1])/P-v[2]*D[1])),V=Math.round(h*a.getGutterForProjection(s.projection));return this.getImageData(F,W+V,q+V)}return null}prepareFrame(e){this.renderedProjection?e.viewState.projection!==this.renderedProjection&&(this.tileCache_.clear(),this.renderedProjection=e.viewState.projection):this.renderedProjection=e.viewState.projection;const t=this.getLayer().getSource();if(!t)return!1;const i=t.getRevision();return this.renderedSourceRevision_?this.renderedSourceRevision_!==i&&(this.renderedSourceRevision_=i,this.renderedSourceKey_===t.getKey()&&this.tileCache_.clear()):this.renderedSourceRevision_=i,!0}enqueueTiles(e,t,i,r,o){const s=e.viewState,a=this.getLayer(),c=a.getRenderSource(),h=c.getTileGridForProjection(s.projection),m=Nr(c);m in e.wantedTiles||(e.wantedTiles[m]={});const v=e.wantedTiles[m],x=a.getMapInternal(),E=Math.max(i-o,h.getMinZoom(),h.getZForResolution(Math.min(a.getMaxResolution(),x?x.getView().getResolutionForZoom(Math.max(a.getMinZoom(),0)):h.getResolution(0)),c.zDirection)),D=s.rotation,P=D?ZZ(s.center,s.resolution,D,e.size):void 0;for(let F=i;F>=E;--F){const W=h.getTileRangeForExtentAndZ(t,F,this.tempTileRange_),q=h.getResolution(F);for(let V=W.minX;V<=W.maxX;++V)for(let H=W.minY;H<=W.maxY;++H){if(D&&!h.tileCoordIntersectsViewport([F,V,H],P))continue;const X=this.getTile(F,V,H,e);if(!X||!MO(r,X,F))continue;const G=X.getKey();if(v[G]=!0,X.getState()===ii.IDLE&&!e.tileQueue.isKeyQueued(G)){const oe=yS(F,V,H,this.tempTileCoord_);e.tileQueue.enqueue([X,m,h.getTileCoordCenter(oe),q])}}}}findStaleTile_(e,t){const i=this.tileCache_,r=e[0],o=e[1],s=e[2],a=this.getStaleKeys();for(let c=0;c<a.length;++c){const h=xO(this.getLayer().getSource(),a[c],r,o,s);if(i.containsKey(h)){const m=i.peek(h);if(m.getState()===ii.LOADED)return m.endTransition(Nr(this)),MO(t,m,r),!0}}return!1}findAltTiles_(e,t,i,r){const o=e.getTileRangeForTileCoordAndZ(t,i,this.tempTileRange_);if(!o)return!1;let s=!0;const a=this.tileCache_,c=this.getLayer().getRenderSource(),h=c.getKey();for(let m=o.minX;m<=o.maxX;++m)for(let v=o.minY;v<=o.maxY;++v){const x=xO(c,h,i,m,v);let E=!1;if(a.containsKey(x)){const D=a.peek(x);D.getState()===ii.LOADED&&(MO(r,D,i),E=!0)}E||(s=!1)}return s}renderFrame(e,t){this.renderComplete=!0;const i=e.layerStatesArray[e.layerIndex],r=e.viewState,o=r.projection,s=r.resolution,a=r.center,c=e.pixelRatio,h=this.getLayer(),m=h.getSource(),v=m.getTileGridForProjection(o),x=v.getZForResolution(s,m.zDirection),E=v.getResolution(x),D=m.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==D&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=D):this.renderedSourceKey_=D;let P=e.extent;const F=m.getTilePixelRatio(c);this.prepareContainer(e,t);const W=this.context.canvas.width,q=this.context.canvas.height,V=i.extent&&Qg(i.extent);V&&(P=vm(P,Qg(i.extent)));const H=E*W/2/F,X=E*q/2/F,Z=[a[0]-H,a[1]-X,a[0]+H,a[1]+X],G={};this.renderedTiles.length=0;const oe=h.getPreload();if(e.nextExtent){const At=v.getZForResolution(r.nextResolution,m.zDirection),gt=oj(e,e.nextExtent);this.enqueueTiles(e,gt,At,G,oe)}const ue=oj(e,P);if(this.enqueueTiles(e,ue,x,G,0),oe>0&&setTimeout(()=>{this.enqueueTiles(e,ue,x-1,G,oe-1)},0),!(x in G))return this.container;const xe=Nr(this),me=e.time;for(const At of G[x]){const gt=At.getState();if(gt===ii.EMPTY)continue;const Le=At.tileCoord;if(gt===ii.LOADED&&At.getAlpha(xe,me)===1){At.endTransition(xe);continue}if(gt!==ii.ERROR&&(this.renderComplete=!1),this.findStaleTile_(Le,G)){Wve(G,At,x),e.animate=!0;continue}if(this.findAltTiles_(v,Le,x+1,G))continue;const De=v.getMinZoom();for(let _t=x-1;_t>=De&&!this.findAltTiles_(v,Le,_t,G);--_t);}const Ie=E/s*c/F,Me=this.getRenderContext(e);s0(this.tempTransform,W/2,q/2,Ie,Ie,0,-W/2,-q/2),i.extent&&this.clipUnrotated(Me,e,V),m.getInterpolate()||(Me.imageSmoothingEnabled=!1),this.preRender(Me,e);const Te=Object.keys(G).map(Number);Te.sort(n0);let je;const Ee=[],qe=[];for(let At=Te.length-1;At>=0;--At){const gt=Te[At],Le=m.getTilePixelSize(gt,c,o),Ge=v.getResolution(gt)/E,De=Le[0]*Ge*Ie,_t=Le[1]*Ge*Ie,at=v.getTileCoordForCoordAndZ(C1(Z),gt),Tt=v.getTileCoordExtent(at),Kt=Hu(this.tempTransform,[F*(Tt[0]-Z[0])/E,F*(Z[3]-Tt[3])/E]),Ke=F*m.getGutterForProjection(o);for(const Oe of G[gt]){if(Oe.getState()!==ii.LOADED)continue;const Be=Oe.tileCoord,Ve=at[1]-Be[1],yt=Math.round(Kt[0]-(Ve-1)*De),ft=at[2]-Be[2],Ct=Math.round(Kt[1]-(ft-1)*_t),Lt=Math.round(Kt[0]-Ve*De),kt=Math.round(Kt[1]-ft*_t),an=yt-Lt,Hn=Ct-kt,Wn=Te.length===1;let _i=!1;je=[Lt,kt,Lt+an,kt,Lt+an,kt+Hn,Lt,kt+Hn];for(let Ln=0,Un=Ee.length;Ln<Un;++Ln)if(!Wn&&gt<qe[Ln]){const xn=Ee[Ln];tu([Lt,kt,Lt+an,kt+Hn],[xn[0],xn[3],xn[4],xn[7]])&&(_i||(Me.save(),_i=!0),Me.beginPath(),Me.moveTo(je[0],je[1]),Me.lineTo(je[2],je[3]),Me.lineTo(je[4],je[5]),Me.lineTo(je[6],je[7]),Me.moveTo(xn[6],xn[7]),Me.lineTo(xn[4],xn[5]),Me.lineTo(xn[2],xn[3]),Me.lineTo(xn[0],xn[1]),Me.clip())}Ee.push(je),qe.push(gt),this.drawTile(Oe,e,Lt,kt,an,Hn,Ke,Wn),_i&&Me.restore(),this.renderedTiles.unshift(Oe),this.updateUsedTiles(e.usedTiles,m,Oe)}}if(this.renderedResolution=E,this.extentChanged=!this.renderedExtent_||!m1(this.renderedExtent_,Z),this.renderedExtent_=Z,this.renderedPixelRatio=c,this.postRender(this.context,e),i.extent&&Me.restore(),Me.imageSmoothingEnabled=!0,this.renderComplete){const At=(gt,Le)=>{const Re=Nr(m),Ge=Le.wantedTiles[Re],De=Ge?Object.keys(Ge).length:0;this.updateCacheSize(De),this.tileCache_.expireCache()};e.postRenderFunctions.push(At)}return this.container}updateCacheSize(e){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,e*2)}drawTile(e,t,i,r,o,s,a,c){let h;if(e instanceof nj){if(h=x9(e.getData()),!h)throw new Error("Rendering array data is not yet supported")}else h=this.getTileImage(e);if(!h)return;const m=this.getRenderContext(t),v=Nr(this),x=t.layerStatesArray[t.layerIndex],E=x.opacity*(c?e.getAlpha(v,t.time):1),D=E!==m.globalAlpha;D&&(m.save(),m.globalAlpha=E),m.drawImage(h,a,a,h.width-2*a,h.height-2*a,i,r,o,s),D&&m.restore(),E!==x.opacity?t.animate=!0:c&&e.endTransition(v)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}updateUsedTiles(e,t,i){const r=Nr(t);r in e||(e[r]={}),e[r][i.getKey()]=!0}}const jy={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class Qve extends jx{constructor(e){e=e||{};const t=Object.assign({},e),i=e.cacheSize;delete e.cacheSize,delete t.preload,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=i,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getCacheSize(){return this.cacheSize_}getPreload(){return this.get(jy.PRELOAD)}setPreload(e){this.set(jy.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(jy.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(jy.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}class CJ extends Qve{constructor(e){super(e)}createRenderer(){return new bJ(this,{cacheSize:this.getCacheSize()})}}const Yve={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},sj={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]};class qve extends bJ{constructor(e,t){super(e,t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.renderedLayerRevision_,this.renderedPixelToCoordinateTransform_=null,this.renderedRotation_,this.renderedOpacity_=1,this.tmpTransform_=Cd(),this.tileClipContexts_=null}drawTile(e,t,i,r,o,s,a,c){this.updateExecutorGroup_(e,t.pixelRatio,t.viewState.projection),this.tileImageNeedsRender_(e)&&this.renderTileImage_(e,t),super.drawTile(e,t,i,r,o,s,a,c)}getTile(e,t,i,r){const o=this.getOrCreateTile(e,t,i,r);if(!o)return null;const a=r.viewState.resolution,c=r.viewHints;return(!(c[Cl.ANIMATING]||c[Cl.INTERACTING])||!o.wantedResolution)&&(o.wantedResolution=a),o}prepareFrame(e){const t=this.getLayer().getRevision();return this.renderedLayerRevision_!==t&&(this.renderedLayerRevision_=t,this.renderedTiles.length=0),super.prepareFrame(e)}updateExecutorGroup_(e,t,i){const r=this.getLayer(),o=r.getRevision(),s=r.getRenderOrder()||null,a=e.wantedResolution,c=e.getReplayState(r);if(!c.dirty&&c.renderedResolution===a&&c.renderedRevision==o&&c.renderedRenderOrder==s)return;const h=r.getSource(),m=!!r.getDeclutter(),v=h.getTileGrid(),E=h.getTileGridForProjection(i).getTileCoordExtent(e.wrappedTileCoord),D=h.getSourceTiles(t,i,e),P=Nr(r);delete e.hitDetectionImageData[P],e.executorGroups[P]=[],c.dirty=!1;for(let F=0,W=D.length;F<W;++F){const q=D[F];if(q.getState()!=ii.LOADED)continue;const V=q.tileCoord,H=v.getTileCoordExtent(V),X=vm(E,H),Z=Hy(X,r.getRenderBuffer()*a,this.tempExtent),G=m1(H,X)?null:Z,oe=new tJ(0,X,a,t),ue=y9(a,t),xe=function(je,Ee){let qe;const At=je.getStyleFunction()||r.getStyleFunction();if(At&&(qe=At(je,a)),qe){const gt=this.renderFeature(je,ue,qe,oe,m,Ee);c.dirty=c.dirty||gt}},me=q.getFeatures();s&&s!==c.renderedRenderOrder&&me.sort(s);for(let je=0,Ee=me.length;je<Ee;++je){const qe=me[je];(!G||tu(G,qe.getGeometry().getExtent()))&&xe.call(this,qe,je)}const Ie=oe.finish(),Me=r.getRenderMode()!=="vector"&&m&&D.length===1?null:X,Te=new nJ(Me,a,t,h.getOverlaps(),Ie,r.getRenderBuffer(),!0);e.executorGroups[P].push(Te)}c.renderedRevision=o,c.renderedRenderOrder=s,c.renderedResolution=a}forEachFeatureAtCoordinate(e,t,i,r,o){const s=t.viewState.resolution,a=t.viewState.rotation;i=i??0;const c=this.getLayer(),m=c.getSource().getTileGridForProjection(t.viewState.projection),v=e9([e]);Hy(v,s*i,v);const x={},E=function(V,H,X){let Z=V.getId();Z===void 0&&(Z=Nr(V));const G=x[Z];if(G){if(G!==!0&&X<G.distanceSq){if(X===0)return x[Z]=!0,o.splice(o.lastIndexOf(G),1),r(V,c,H);G.geometry=H,G.distanceSq=X}}else{if(X===0)return x[Z]=!0,r(V,c,H);o.push(x[Z]={feature:V,layer:c,geometry:H,distanceSq:X,callback:r})}},D=this.renderedTiles,P=Nr(c),F=c.getDeclutter(),W=F?t.declutter?.[F]?.all().map(V=>V.value):null;let q;e:for(let V=0,H=D.length;V<H;++V){const X=D[V],Z=m.getTileCoordExtent(X.wrappedTileCoord);if(!tu(Z,v))continue;const G=X.executorGroups[P];for(let oe=0,ue=G.length;oe<ue;++oe)if(q=G[oe].forEachFeatureAtCoordinate(e,s,a,i,E,W),q)break e}return q}getFeatures(e){return this.renderedTiles.length===0?Promise.resolve([]):new Promise((t,i)=>{const r=this.getLayer(),o=r.getSource(),s=this.renderedProjection,a=s.getExtent(),c=this.renderedResolution,h=o.getTileGridForProjection(s),m=Hu(this.renderedPixelToCoordinateTransform_,e.slice()),v=h.getTileCoordForCoordAndResolution(m,c).toString(),x=this.renderedTiles.find(V=>V.tileCoord.toString()===v&&V.getState()===ii.LOADED);if(!x||x.loadingSourceTiles>0){t([]);return}o.getWrapX()&&s.canWrapX()&&!Wg(a,h.getTileCoordExtent(x.tileCoord))&&eP(m,s);const E=Nr(r),D=h.getTileCoordExtent(x.wrappedTileCoord),P=C1(D),F=[(m[0]-P[0])/c,(P[1]-m[1])/c],W=x.getSourceTiles().reduce((V,H)=>V.concat(H.getFeatures()),[]);let q=x.hitDetectionImageData[E];if(!q){const V=nh(h.getTileSize(h.getZForResolution(c,o.zDirection))),H=this.renderedRotation_,X=[this.getRenderTransform(h.getTileCoordCenter(x.wrappedTileCoord),c,0,hf,V[0]*hf,V[1]*hf,0)];q=iJ(V,X,W,r.getStyleFunction(),h.getTileCoordExtent(x.wrappedTileCoord),x.getReplayState(r).renderedResolution,H),x.hitDetectionImageData[E]=q}t(rJ(F,W,q))})}getFeaturesInExtent(e){const t=[],i=this.getTileCache();if(i.getCount()===0)return t;const o=this.getLayer().getSource().getTileGridForProjection(this.frameState.viewState.projection),s=o.getZForResolution(this.renderedResolution),a={};return i.forEach(c=>{if(c.tileCoord[0]!==s||c.getState()!==ii.LOADED)return;const h=c.getSourceTiles();for(let m=0,v=h.length;m<v;++m){const x=h[m],E=x.getKey();if(E in a)continue;a[E]=!0;const D=x.tileCoord;if(tu(e,o.getTileCoordExtent(D))){const P=x.getFeatures();if(P)for(let F=0,W=P.length;F<W;++F){const q=P[F],V=q.getGeometry();tu(e,V.getExtent())&&t.push(q)}}}}),t}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.renderedLayerRevision_!==void 0&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}renderDeclutter(e,t){const i=this.context,r=i.globalAlpha;i.globalAlpha=t.opacity;const o=e.viewHints,s=!(o[Cl.ANIMATING]||o[Cl.INTERACTING]),a=[this.context.canvas.width,this.context.canvas.height],c=this.getLayer().getDeclutter(),h=c?e.declutter?.[c]:void 0,m=Nr(this.getLayer()),v=this.renderedTiles;for(let x=0,E=v.length;x<E;++x){const D=v[x],P=D.executorGroups[m];if(P)for(let F=P.length-1;F>=0;--F)P[F].execute(this.context,a,this.getTileRenderTransform(D,e),e.viewState.rotation,s,pS,h)}i.globalAlpha=r}renderDeferredInternal(e){const t=this.renderedTiles,i=Nr(this.getLayer()),r=t.reduce((c,h,m)=>(h.executorGroups[i].forEach(v=>c.push({executorGroup:v,index:m})),c),[]),o=r.map(({executorGroup:c})=>c.getDeferredZIndexContexts()),s={};for(let c=0,h=r.length;c<h;++c){const m=r[c].executorGroup.getDeferredZIndexContexts();for(const v in m)s[v]=!0}Object.keys(s).map(Number).sort(n0).forEach(c=>{o.forEach((h,m)=>{h[c]&&(h[c].forEach(v=>{const{executorGroup:x,index:E}=r[m],D=x.getRenderedContext(),P=D.globalAlpha;D.globalAlpha=this.renderedOpacity_;const F=this.tileClipContexts_[E];F&&F.draw(D),v.draw(D),F&&D.restore(),D.globalAlpha=P,v.clear()}),h[c].length=0)})})}getTileRenderTransform(e,t){const i=t.pixelRatio,r=t.viewState,o=r.center,s=r.resolution,a=r.rotation,c=t.size,h=Math.round(c[0]*i),m=Math.round(c[1]*i),x=this.getLayer().getSource().getTileGridForProjection(t.viewState.projection),E=e.tileCoord,D=x.getTileCoordExtent(e.wrappedTileCoord),P=x.getTileCoordExtent(E,this.tempExtent)[0]-D[0];return sP(HB(this.inversePixelTransform.slice(),1/i,1/i),this.getRenderTransform(o,s,a,i,h,m,P))}postRender(e,t){const i=t.viewHints,r=!(i[Cl.ANIMATING]||i[Cl.INTERACTING]);this.renderedPixelToCoordinateTransform_=t.pixelToCoordinateTransform.slice(),this.renderedRotation_=t.viewState.rotation,this.renderedOpacity_=t.layerStatesArray[t.layerIndex].opacity;const o=this.getLayer(),s=o.getRenderMode(),a=e.globalAlpha;e.globalAlpha=this.renderedOpacity_;const c=o.getDeclutter(),h=c?sj[s].filter(X=>!pS.includes(X)):sj[s],m=t.viewState,v=m.rotation,x=o.getSource(),D=x.getTileGridForProjection(m.projection).getZForResolution(m.resolution,x.zDirection),P=this.renderedTiles,F=[],W=[],q=[],V=Nr(o);let H=!0;for(let X=P.length-1;X>=0;--X){const Z=P[X];H=H&&!Z.getReplayState(o).dirty;const G=Z.executorGroups[V].filter(Te=>Te.hasExecutors(h));if(G.length===0)continue;const oe=this.getTileRenderTransform(Z,t),ue=Z.tileCoord[0];let xe=!1;const me=G[0].getClipCoords(oe);let Ie=e,Me;if(me){Me=new PP,Ie=Me.getContext();for(let Te=0,je=F.length;Te<je;++Te)if(D!==ue&&ue<W[Te]){const Ee=F[Te];tu([me[0],me[3],me[4],me[7]],[Ee[0],Ee[3],Ee[4],Ee[7]])&&(xe||(Ie.save(),xe=!0),Ie.beginPath(),Ie.moveTo(me[0],me[1]),Ie.lineTo(me[2],me[3]),Ie.lineTo(me[4],me[5]),Ie.lineTo(me[6],me[7]),Ie.moveTo(Ee[6],Ee[7]),Ie.lineTo(Ee[4],Ee[5]),Ie.lineTo(Ee[2],Ee[3]),Ie.lineTo(Ee[0],Ee[1]),Ie.clip())}F.push(me),W.push(ue)}for(let Te=0,je=G.length;Te<je;++Te)G[Te].execute(e,[e.canvas.width,e.canvas.height],oe,v,r,h,t.declutter?.[c]);xe&&(Ie===e?Ie.restore():q[X]=Me)}e.globalAlpha=a,this.ready=H,this.tileClipContexts_=q,t.declutter||this.renderDeferredInternal(t),super.postRender(e,t)}renderFeature(e,t,i,r,o,s){if(!i)return!1;let a=!1;if(Array.isArray(i))for(let c=0,h=i.length;c<h;++c)a=dS(r,e,i[c],t,this.boundHandleStyleImageChange_,void 0,o,s)||a;else a=dS(r,e,i,t,this.boundHandleStyleImageChange_,void 0,o,s);return a}tileImageNeedsRender_(e){const t=this.getLayer();if(t.getRenderMode()==="vector")return!1;const i=e.getReplayState(t),r=t.getRevision(),o=e.wantedResolution;return i.renderedTileResolution!==o||i.renderedTileRevision!==r}renderTileImage_(e,t){const i=this.getLayer(),r=e.getReplayState(i),o=i.getRevision(),s=e.executorGroups[Nr(i)];r.renderedTileRevision=o;const a=e.wrappedTileCoord,c=a[0],h=i.getSource();let m=t.pixelRatio;const x=t.viewState.projection,E=h.getTileGridForProjection(x),D=E.getResolution(e.tileCoord[0]),P=t.pixelRatio/e.wantedResolution*D,F=E.getResolution(c),W=e.getContext();m=Math.round(Math.max(m,P/m));const q=h.getTilePixelSize(c,m,x);W.canvas.width=q[0],W.canvas.height=q[1];const V=m/P;if(V!==1){const G=sz(this.tmpTransform_);HB(G,V,V),W.setTransform.apply(W,G)}const H=E.getTileCoordExtent(a,this.tempExtent),X=P/F,Z=sz(this.tmpTransform_);HB(Z,X,-X),xge(Z,-H[0],-H[3]);for(let G=0,oe=s.length;G<oe;++G)s[G].execute(W,[W.canvas.width*V,W.canvas.height*V],Z,0,!0,Yve[i.getRenderMode()],null);r.renderedTileResolution=e.wantedResolution}}class f3 extends RP{constructor(e){e=e||{};const t=Object.assign({},e);delete t.preload;const i=e.cacheSize===void 0?0:e.cacheSize;delete e.cacheSize,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=i;const r=e.renderMode||"hybrid";ws(r=="hybrid"||r=="vector","`renderMode` must be `'hybrid'` or `'vector'`"),this.renderMode_=r,this.setPreload(e.preload?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0),this.getBackground,this.setBackground}createRenderer(){return new qve(this,{cacheSize:this.cacheSize_})}getFeatures(e){return super.getFeatures(e)}getFeaturesInExtent(e){return this.getRenderer().getFeaturesInExtent(e)}getRenderMode(){return this.renderMode_}getPreload(){return this.get(jy.PRELOAD)}getUseInterimTilesOnError(){return this.get(jy.USE_INTERIM_TILES_ON_ERROR)}setPreload(e){this.set(jy.PRELOAD,e)}setUseInterimTilesOnError(e){this.set(jy.USE_INTERIM_TILES_ON_ERROR,e)}}function w9(n){return Array.isArray(n)?Math.min(...n):n}class Vve extends IP{constructor(e,t,i,r,o,s,a){let c=e.getExtent();c&&e.canWrapX()&&(c=c.slice(),c[0]=-1/0,c[2]=1/0);let h=t.getExtent();h&&t.canWrapX()&&(h=h.slice(),h[0]=-1/0,h[2]=1/0);const m=h?vm(i,h):i,v=vf(m),x=M9(e,t,v,r),E=yJ,D=new gJ(e,t,m,c,x*E,r),P=D.calculateSourceExtent(),F=oC(P)?null:s(P,x,o),W=F?Ui.IDLE:Ui.EMPTY,q=F?F.getPixelRatio():1;super(i,r,q,W),this.targetProj_=t,this.maxSourceExtent_=c,this.triangulation_=D,this.targetResolution_=r,this.targetExtent_=i,this.sourceImage_=F,this.sourcePixelRatio_=q,this.interpolate_=a,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==Ui.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const e=this.sourceImage_.getState();if(e==Ui.LOADED){const t=ns(this.targetExtent_)/this.targetResolution_,i=Ju(this.targetExtent_)/this.targetResolution_;this.canvas_=mJ(t,i,this.sourcePixelRatio_,w9(this.sourceImage_.getResolution()),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_,!0)}this.state=e,this.changed()}load(){if(this.state==Ui.IDLE){this.state=Ui.LOADING,this.changed();const e=this.sourceImage_.getState();e==Ui.LOADED||e==Ui.ERROR?this.reproject_():(this.sourceListenerKey_=qo(this.sourceImage_,Er.CHANGE,t=>{const i=this.sourceImage_.getState();(i==Ui.LOADED||i==Ui.ERROR)&&(this.unlistenSource_(),this.reproject_())}),this.sourceImage_.load())}}unlistenSource_(){Ba(this.sourceListenerKey_),this.sourceListenerKey_=null}}const h5=4,wO={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"};class $ve extends Em{constructor(e,t){super(e),this.image=t}}class _J extends Nx{constructor(e){super({attributions:e.attributions,projection:e.projection,state:e.state,interpolate:e.interpolate!==void 0?e.interpolate:!0}),this.on,this.once,this.un,this.loader=e.loader||null,this.resolutions_=e.resolutions!==void 0?e.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0,this.image=null,this.wantedExtent_,this.wantedResolution_,this.static_=e.loader?e.loader.length===0:!1,this.wantedProjection_=null}getResolutions(){return this.resolutions_}setResolutions(e){this.resolutions_=e}findNearestResolution(e){const t=this.getResolutions();if(t){const i=zE(t,e,0);e=t[i]}return e}getImage(e,t,i,r){const o=this.getProjection();if(!o||!r||Zy(o,r))return o&&(r=o),this.getImageInternal(e,t,i,r);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&Zy(this.reprojectedImage_.getProjection(),r)&&this.reprojectedImage_.getResolution()==t&&m1(this.reprojectedImage_.getExtent(),e))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new Vve(o,r,e,t,i,(s,a,c)=>this.getImageInternal(s,a,c,o),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(e,t,i,r){if(this.loader){const o=Hve(e,t,i,1),s=this.findNearestResolution(t);if(this.image&&(this.static_||this.wantedProjection_===r&&(this.wantedExtent_&&Wg(this.wantedExtent_,o)||Wg(this.image.getExtent(),o))&&(this.wantedResolution_&&w9(this.wantedResolution_)===s||w9(this.image.getResolution())===s)))return this.image;this.wantedProjection_=r,this.wantedExtent_=o,this.wantedResolution_=s,this.image=new IP(o,s,i,this.loader),this.image.addEventListener(Er.CHANGE,this.handleImageChange.bind(this))}return this.image}handleImageChange(e){const t=e.target;let i;switch(t.getState()){case Ui.LOADING:this.loading=!0,i=wO.IMAGELOADSTART;break;case Ui.LOADED:this.loading=!1,i=wO.IMAGELOADEND;break;case Ui.ERROR:this.loading=!1,i=wO.IMAGELOADERROR;break;default:return}this.hasListener(i)&&this.dispatchEvent(new $ve(i,t))}}function Hve(n,e,t,i){const r=e/t,o=vf(n),s=Ky(ns(n)/r,h5),a=Ky(Ju(n)/r,h5),c=Ky((i-1)*s/2,h5),h=s+2*c,m=Ky((i-1)*a/2,h5),v=a+2*m;return nS(o,r,0,[h,v])}const VC=[0,0,0],xy=5;class a6{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,ws(vme(this.resolutions_,(r,o)=>o-r),"`resolutions` must be sorted in descending order");let t;if(!e.origins){for(let r=0,o=this.resolutions_.length-1;r<o;++r)if(!t)t=this.resolutions_[r]/this.resolutions_[r+1];else if(this.resolutions_[r]/this.resolutions_[r+1]!==t){t=void 0;break}}this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,ws(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const i=e.extent;i!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=C1(i)),ws(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,ws(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:bP,ws(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=i!==void 0?i:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((r,o)=>{const s=new LP(Math.min(0,r[0]),Math.max(r[0]-1,-1),Math.min(0,r[1]),Math.max(r[1]-1,-1));if(i){const a=this.getTileRangeForExtentAndZ(i,o);s.minX=Math.max(a.minX,s.minX),s.maxX=Math.min(a.maxX,s.maxX),s.minY=Math.max(a.minY,s.minY),s.maxY=Math.min(a.maxY,s.maxY)}return s}):i&&this.calculateTileRanges_(i)}forEachTileCoord(e,t,i){const r=this.getTileRangeForExtentAndZ(e,t);for(let o=r.minX,s=r.maxX;o<=s;++o)for(let a=r.minY,c=r.maxY;a<=c;++a)i([t,o,a])}forEachTileCoordParentTileRange(e,t,i,r){let o,s,a,c=null,h=e[0]-1;for(this.zoomFactor_===2?(s=e[1],a=e[2]):c=this.getTileCoordExtent(e,r);h>=this.minZoom;){if(s!==void 0&&a!==void 0?(s=Math.floor(s/2),a=Math.floor(a/2),o=QC(s,s,a,a,i)):o=this.getTileRangeForExtentAndZ(c,h,i),t(h,o))return!0;--h}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,t,i){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const o=e[1]*2,s=e[2]*2;return QC(o,o+1,s,s+1,t)}const r=this.getTileCoordExtent(e,i||this.tmpExtent_);return this.getTileRangeForExtentAndZ(r,e[0]+1,t)}return null}getTileRangeForTileCoordAndZ(e,t,i){if(t>this.maxZoom||t<this.minZoom)return null;const r=e[0],o=e[1],s=e[2];if(t===r)return QC(o,s,o,s,i);if(this.zoomFactor_){const c=Math.pow(this.zoomFactor_,t-r),h=Math.floor(o*c),m=Math.floor(s*c);if(t<r)return QC(h,h,m,m,i);const v=Math.floor(c*(o+1))-1,x=Math.floor(c*(s+1))-1;return QC(h,v,m,x,i)}const a=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,t,i)}getTileRangeForExtentAndZ(e,t,i){this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,VC);const r=VC[1],o=VC[2];this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,VC);const s=VC[1],a=VC[2];return QC(r,s,o,a,i)}getTileCoordCenter(e){const t=this.getOrigin(e[0]),i=this.getResolution(e[0]),r=nh(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*r[0]*i,t[1]-(e[2]+.5)*r[1]*i]}getTileCoordExtent(e,t){const i=this.getOrigin(e[0]),r=this.getResolution(e[0]),o=nh(this.getTileSize(e[0]),this.tmpSize_),s=i[0]+e[1]*o[0]*r,a=i[1]-(e[2]+1)*o[1]*r,c=s+o[0]*r,h=a+o[1]*r;return p1(s,a,c,h,t)}getTileCoordForCoordAndResolution(e,t,i){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,i)}getTileCoordForXYAndResolution_(e,t,i,r,o){const s=this.getZForResolution(i),a=i/this.getResolution(s),c=this.getOrigin(s),h=nh(this.getTileSize(s),this.tmpSize_);let m=a*(e-c[0])/i/h[0],v=a*(c[1]-t)/i/h[1];return r?(m=Ky(m,xy)-1,v=Ky(v,xy)-1):(m=JM(m,xy),v=JM(v,xy)),yS(s,m,v,o)}getTileCoordForXYAndZ_(e,t,i,r,o){const s=this.getOrigin(i),a=this.getResolution(i),c=nh(this.getTileSize(i),this.tmpSize_);let h=(e-s[0])/a/c[0],m=(s[1]-t)/a/c[1];return r?(h=Ky(h,xy)-1,m=Ky(m,xy)-1):(h=JM(h,xy),m=JM(m,xy)),yS(i,h,m,o)}getTileCoordForCoordAndZ(e,t,i){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,i)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,t){const i=zE(this.resolutions_,e,t||0);return Ul(i,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,t){return yX(t,0,t.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const t=this.resolutions_.length,i=new Array(t);for(let r=this.minZoom;r<t;++r)i[r]=this.getTileRangeForExtentAndZ(e,r);this.fullTileRanges_=i}}function xJ(n){let e=n.getDefaultTileGrid();return e||(e=Jve(n),n.setDefaultTileGrid(e)),e}function Zve(n,e,t){const i=e[0],r=n.getTileCoordCenter(e),o=l6(t);if(!Qb(o,r)){const s=ns(o),a=Math.ceil((o[0]-r[0])/s);return r[0]+=s*a,n.getTileCoordForCoordAndZ(r,i)}return e}function Xve(n,e,t,i){i=i!==void 0?i:"top-left";const r=MJ(n,e,t);return new a6({extent:n,origin:Dme(n,i),resolutions:r,tileSize:t})}function WP(n){const e=n||{},t=e.extent||Ns("EPSG:3857").getExtent(),i={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:MJ(t,e.maxZoom,e.tileSize,e.maxResolution)};return new a6(i)}function MJ(n,e,t,i){e=e!==void 0?e:_X,t=nh(t!==void 0?t:bP);const r=Ju(n),o=ns(n);i=i>0?i:Math.max(o/t[0],r/t[1]);const s=e+1,a=new Array(s);for(let c=0;c<s;++c)a[c]=i/Math.pow(2,c);return a}function Jve(n,e,t,i){const r=l6(n);return Xve(r,e,t,i)}function l6(n){n=Ns(n);let e=n.getExtent();if(!e){const t=180*nv.degrees/n.getMetersPerUnit();e=p1(-t,-t,t,t)}return e}class wJ extends Nx{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const t=[256,256];this.tileGrid&&nh(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),t),this.tmpSize=[0,0],this.key_=e.key||Nr(this),this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getResolutions(e){const t=e?this.getTileGridForProjection(e):this.tileGrid;return t?t.getResolutions():null}getTile(e,t,i,r,o){return Tr()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:xJ(e)}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,t,i){const r=this.getTileGridForProjection(i),o=this.getTilePixelRatio(t),s=nh(r.getTileSize(e),this.tmpSize);return o==1?s:G0e(s,o,this.tmpSize)}getTileCoordForTileUrlFunction(e,t){const i=t!==void 0?t:this.getProjection(),r=t!==void 0?this.getTileGridForProjection(i):this.tileGrid||this.getTileGridForProjection(i);return this.getWrapX()&&i.isGlobal()&&(e=Zve(r,e,i)),Gve(e,r)?e:null}clear(){}refresh(){this.clear(),super.refresh()}}class ebe extends Em{constructor(e,t){super(e),this.tile=t}}function SJ(n){return function(e){const t=e.buffers,i=e.meta,r=e.imageOps,o=e.width,s=e.height,a=t.length,c=t[0].byteLength;if(r){const x=new Array(a);for(let D=0;D<a;++D)x[D]=new ImageData(new Uint8ClampedArray(t[D]),o,s);return n(x,i).data.buffer}const h=new Uint8ClampedArray(c),m=new Array(a),v=new Array(a);for(let x=0;x<a;++x)m[x]=new Uint8ClampedArray(t[x]),v[x]=[0,0,0,0];for(let x=0;x<c;x+=4){for(let D=0;D<a;++D){const P=m[D];v[D][0]=P[x],v[D][1]=P[x+1],v[D][2]=P[x+2],v[D][3]=P[x+3]}const E=n(v,i);h[x]=E[0],h[x+1]=E[1],h[x+2]=E[2],h[x+3]=E[3]}return h.buffer}}function tbe(n,e){const i=Object.keys(n.lib||{}).map(function(o){return"const "+o+" = "+n.lib[o].toString()+";"}).concat(["const __minion__ = ("+SJ.toString()+")(",n.operation.toString(),");",'self.addEventListener("message", function(event) {',"  const buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),r=new Worker(typeof Blob>"u"?"data:text/javascript;base64,"+Buffer.from(i.join(`
`),"binary").toString("base64"):URL.createObjectURL(new Blob(i,{type:"text/javascript"})));return r.addEventListener("message",e),r}function nbe(n,e){const t=SJ(n.operation);let i=!1;return{postMessage:function(r){setTimeout(function(){i||e({data:{buffer:t(r),meta:r.meta}})},0)},terminate:function(){i=!0}}}let ibe=class extends nM{constructor(e){super(),this.imageOps_=!!e.imageOps;let t;e.threads===0?t=0:this.imageOps_?t=1:t=e.threads||1;const i=new Array(t);if(t)for(let r=0;r<t;++r)i[r]=tbe(e,this.onWorkerMessage_.bind(this,r));else i[0]=nbe(e,this.onWorkerMessage_.bind(this,0));this.workers_=i,this.queue_=[],this.maxQueueLength_=e.queue||1/0,this.running_=0,this.dataLookup_={},this.job_=null}process(e,t,i){this.enqueue_({inputs:e,meta:t,callback:i}),this.dispatch_()}enqueue_(e){for(this.queue_.push(e);this.queue_.length>this.maxQueueLength_;)this.queue_.shift().callback(null,null)}dispatch_(){if(this.running_||this.queue_.length===0)return;const e=this.queue_.shift();this.job_=e;const t=e.inputs[0].width,i=e.inputs[0].height,r=e.inputs.map(function(c){return c.data.buffer}),o=this.workers_.length;if(this.running_=o,o===1){this.workers_[0].postMessage({buffers:r,meta:e.meta,imageOps:this.imageOps_,width:t,height:i},r);return}const s=e.inputs[0].data.length,a=4*Math.ceil(s/4/o);for(let c=0;c<o;++c){const h=c*a,m=[];for(let v=0,x=r.length;v<x;++v)m.push(r[v].slice(h,h+a));this.workers_[c].postMessage({buffers:m,meta:e.meta,imageOps:this.imageOps_,width:t,height:i},m)}}onWorkerMessage_(e,t){this.disposed||(this.dataLookup_[e]=t.data,--this.running_,this.running_===0&&this.resolveJob_())}resolveJob_(){const e=this.job_,t=this.workers_.length;let i,r;if(t===1)i=new Uint8ClampedArray(this.dataLookup_[0].buffer),r=this.dataLookup_[0].meta;else{const o=e.inputs[0].data.length;i=new Uint8ClampedArray(o),r=new Array(t);const s=4*Math.ceil(o/4/t);for(let a=0;a<t;++a){const c=this.dataLookup_[a].buffer,h=a*s;i.set(new Uint8ClampedArray(c),h),r[a]=this.dataLookup_[a].meta}}this.job_=null,this.dataLookup_={},e.callback(null,new ImageData(i,e.inputs[0].width,e.inputs[0].height),r),this.dispatch_()}disposeInternal(){for(let e=0;e<this.workers_.length;++e)this.workers_[e].terminate();this.workers_.length=0}};const aj={BEFOREOPERATIONS:"beforeoperations",AFTEROPERATIONS:"afteroperations"};class lj extends Em{constructor(e,t,i){super(e),this.extent=t.extent,this.resolution=t.viewState.resolution/t.pixelRatio,this.data=i}}class EJ extends _J{constructor(e){super({projection:null}),this.on,this.once,this.un,this.processor_=null,this.operationType_=e.operationType!==void 0?e.operationType:"pixel",this.threads_=e.threads!==void 0?e.threads:1,this.layers_=sbe(e.sources);const t=this.changed.bind(this);for(let i=0,r=this.layers_.length;i<r;++i)this.layers_[i].addEventListener(Er.CHANGE,t);this.useResolutions_=e.resolutions!==null,this.tileQueue_=new QZ(function(){return 1},this.processSources_.bind(this)),this.requestedFrameState_,this.renderedImageCanvas_=null,this.renderedRevision_,this.frameState_={animate:!1,coordinateToPixelTransform:Cd(),declutter:null,extent:null,index:0,layerIndex:0,layerStatesArray:obe(this.layers_),pixelRatio:1,pixelToCoordinateTransform:Cd(),postRenderFunctions:[],size:[0,0],tileQueue:this.tileQueue_,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{},mapId:Nr(this),renderTargets:{}},this.setAttributions(function(i){const r=[];for(let o=0,s=e.sources.length;o<s;++o){const a=e.sources[o],c=a instanceof Nx?a:a.getSource();if(!c)continue;const h=c.getAttributions()?.(i);typeof h=="string"?r.push(h):h!==void 0&&r.push(...h)}return r}),e.operation!==void 0&&this.setOperation(e.operation,e.lib)}setOperation(e,t){this.processor_&&this.processor_.dispose(),this.processor_=new ibe({operation:e,imageOps:this.operationType_==="image",queue:1,lib:t,threads:this.threads_}),this.changed()}updateFrameState_(e,t,i){const r=Object.assign({},this.frameState_);r.viewState=Object.assign({},r.viewState);const o=vf(e);r.size[0]=Math.ceil(ns(e)/t),r.size[1]=Math.ceil(Ju(e)/t),r.extent=[o[0]-r.size[0]*t/2,o[1]-r.size[1]*t/2,o[0]+r.size[0]*t/2,o[1]+r.size[1]*t/2],r.time=Date.now();const s=r.viewState;return s.center=o,s.projection=i,s.resolution=t,r}allSourcesReady_(){let e=!0,t;for(let i=0,r=this.layers_.length;i<r;++i)if(t=this.layers_[i].getSource(),!t||t.getState()!=="ready"){e=!1;break}return e}getImage(e,t,i,r){if(!this.allSourcesReady_())return null;this.tileQueue_.loadMoreTiles(16,16),t=this.findNearestResolution(t);const o=this.updateFrameState_(e,t,r);if(this.requestedFrameState_=o,this.renderedImageCanvas_){const s=this.renderedImageCanvas_.getResolution(),a=this.renderedImageCanvas_.getExtent();(t!==s||!m1(o.extent,a))&&(this.renderedImageCanvas_=null)}return(!this.renderedImageCanvas_||this.getRevision()!==this.renderedRevision_)&&this.processSources_(),o.animate&&requestAnimationFrame(this.changed.bind(this)),this.renderedImageCanvas_}processSources_(){const e=this.requestedFrameState_,t=this.layers_.length,i=new Array(t);for(let o=0;o<t;++o){e.layerIndex=o,e.renderTargets={};const s=rbe(this.layers_[o],e);if(s)i[o]=s;else return}const r={};this.dispatchEvent(new lj(aj.BEFOREOPERATIONS,e,r)),this.processor_.process(i,r,this.onWorkerComplete_.bind(this,e))}onWorkerComplete_(e,t,i,r){if(t||!i)return;const o=e.extent,s=e.viewState.resolution;if(s!==this.requestedFrameState_.viewState.resolution||!m1(o,this.requestedFrameState_.extent))return;let a;if(this.renderedImageCanvas_)a=this.renderedImageCanvas_.getImage().getContext("2d");else{const c=Math.round(ns(o)/s),h=Math.round(Ju(o)/s);a=Kl(c,h),this.renderedImageCanvas_=new Sye(o,s,1,a.canvas)}a.putImageData(i,0,0),e.animate?requestAnimationFrame(this.changed.bind(this)):this.changed(),this.renderedRevision_=this.getRevision(),this.dispatchEvent(new lj(aj.AFTEROPERATIONS,e,r))}getResolutions(e){if(!this.useResolutions_)return null;let t=super.getResolutions();if(!t)for(let i=0,r=this.layers_.length;i<r&&(t=this.layers_[i].getSource().getResolutions(e),!t);++i);return t}disposeInternal(){this.processor_&&this.processor_.dispose(),super.disposeInternal()}}EJ.prototype.dispose;let ab=null;function rbe(n,e){const t=n.getRenderer();if(!t)throw new Error("Unsupported layer type: "+n);if(!t.prepareFrame(e))return null;const i=e.size[0],r=e.size[1];if(i===0||r===0)return null;const o=t.renderFrame(e,null);let s;if(o instanceof HTMLCanvasElement)s=o;else{if(o&&(s=o.firstElementChild),!(s instanceof HTMLCanvasElement))throw new Error("Unsupported rendered element: "+s);if(s.width===i&&s.height===r)return s.getContext("2d").getImageData(0,0,i,r)}if(!ab)ab=Kl(i,r,void 0,{willReadFrequently:!0});else{const a=ab.canvas;a.width!==i||a.height!==r?ab=Kl(i,r,void 0,{willReadFrequently:!0}):ab.clearRect(0,0,i,r)}return ab.drawImage(s,0,0,i,r),ab.getImageData(0,0,i,r)}function obe(n){return n.map(function(e){return e.getLayerState()})}function sbe(n){const e=n.length,t=new Array(e);for(let i=0;i<e;++i)t[i]=abe(n[i]);return t}function abe(n){let e;return n instanceof Nx?n instanceof wJ?e=new CJ({source:n}):n instanceof _J&&(e=new pJ({source:n})):e=n,e}function lbe(n,e,t,i){const r=document.createElement("script"),o="olc_"+Nr(e);function s(){delete window[o],r.parentNode.removeChild(r)}r.async=!0,r.src=n+(n.includes("?")?"&":"?")+"callback="+o;const a=setTimeout(function(){s(),t&&t()},1e4);window[o]=function(c){clearTimeout(a),s(),e(c)},document.head.appendChild(r)}const ube=/\{z\}/g,cbe=/\{x\}/g,Abe=/\{y\}/g,hbe=/\{-y\}/g;function dbe(n,e,t,i,r){return n.replace(ube,e.toString()).replace(cbe,t.toString()).replace(Abe,i.toString()).replace(hbe,function(){if(r===void 0)throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(r-i).toString()})}function fbe(n){const e=[];let t=/\{([a-z])-([a-z])\}/.exec(n);if(t){const i=t[1].charCodeAt(0),r=t[2].charCodeAt(0);let o;for(o=i;o<=r;++o)e.push(n.replace(t[0],String.fromCharCode(o)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(n),t){const i=parseInt(t[2],10);for(let r=parseInt(t[1],10);r<=i;r++)e.push(n.replace(t[0],r.toString()));return e}return e.push(n),e}function pbe(n,e){return(function(t,i,r){if(!t)return;let o;const s=t[0];if(e){const a=e.getFullTileRange(s);a&&(o=a.getHeight()-1)}return dbe(n,s,t[1],t[2],o)})}function BJ(n,e){const t=n.length,i=new Array(t);for(let r=0;r<t;++r)i[r]=pbe(n[r],e);return mbe(i)}function mbe(n){return n.length===1?n[0]:(function(e,t,i){if(!e)return;const r=jve(e),o=Ub(r,n.length);return n[o](e,t,i)})}const SO={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};class u6 extends wJ{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===u6.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const t=e.target,i=Nr(t),r=t.getState();let o;r==ii.LOADING?(this.tileLoadingKeys_[i]=!0,o=SO.TILELOADSTART):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],o=r==ii.ERROR?SO.TILELOADERROR:r==ii.LOADED?SO.TILELOADEND:void 0),o!=null&&this.dispatchEvent(new ebe(o,t))}setTileLoadFunction(e){this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,t){this.tileUrlFunction=e,typeof t<"u"?this.setKey(t):this.changed()}setUrl(e){const t=fbe(e);this.urls=t,this.setUrls(t)}setUrls(e){this.urls=e;const t=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(BJ(e,this.tileGrid),t):this.setKey(t)}tileUrlFunction(e,t,i){}}class gbe extends u6{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:ybe,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:oJ,this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}getGutterForProjection(e){return this.getProjection()&&e&&!Zy(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||Zy(t,e)))return this.tileGrid;const i=Nr(e);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=xJ(e)),this.tileGridForProjection[i]}createTile_(e,t,i,r,o,s){const a=[e,t,i],c=this.getTileCoordForTileUrlFunction(a,o),h=c?this.tileUrlFunction(c,r,o):void 0,m=new this.tileClass(a,h!==void 0?ii.IDLE:ii.EMPTY,h!==void 0?h:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return m.key=s,m.addEventListener(Er.CHANGE,this.handleTileChange.bind(this)),m}getTile(e,t,i,r,o){const s=this.getProjection();if(!s||!o||Zy(s,o))return this.getTileInternal(e,t,i,r,s||o);const a=[e,t,i],c=this.getKey(),h=this.getTileGridForProjection(s),m=this.getTileGridForProjection(o),v=this.getTileCoordForTileUrlFunction(a,o),x=new vJ(s,h,o,m,a,v,this.getTilePixelRatio(r),this.getGutter(),(E,D,P,F)=>this.getTileInternal(E,D,P,F,s),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return x.key=c,x}getTileInternal(e,t,i,r,o){const s=this.getKey();return this.createTile_(e,t,i,r,o,s)}setRenderReprojectionEdges(e){this.renderReprojectionEdges_!=e&&(this.renderReprojectionEdges_=e,this.changed())}setTileGridForProjection(e,t){const i=Ns(e);if(i){const r=Nr(i);r in this.tileGridForProjection||(this.tileGridForProjection[r]=t)}}}function ybe(n,e){n.getImage().src=e}class OJ extends gbe{constructor(e){if(super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:Ns("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:"loading",tileLoadFunction:e.tileLoadFunction,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.tileJSON_=null,this.tileSize_=e.tileSize,e.url)if(e.jsonp)lbe(e.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{const t=new XMLHttpRequest;t.addEventListener("load",this.onXHRLoad_.bind(this)),t.addEventListener("error",this.onXHRError_.bind(this)),t.open("GET",e.url),t.send()}else if(e.tileJSON)this.handleTileJSONResponse(e.tileJSON);else throw new Error("Either `url` or `tileJSON` options must be provided")}onXHRLoad_(e){const t=e.target;if(!t.status||t.status>=200&&t.status<300){let i;try{i=JSON.parse(t.responseText)}catch{this.handleTileJSONError();return}this.handleTileJSONResponse(i)}else this.handleTileJSONError()}onXHRError_(e){this.handleTileJSONError()}getTileJSON(){return this.tileJSON_}handleTileJSONResponse(e){const t=Ns("EPSG:4326"),i=this.getProjection();let r;if(e.bounds!==void 0){const h=aM(t,i);r=Kme(e.bounds,h)}const o=l6(i),s=e.minzoom||0,a=e.maxzoom||22,c=WP({extent:o,maxZoom:a,minZoom:s,tileSize:this.tileSize_});if(this.tileGrid=c,this.tileUrlFunction=BJ(e.tiles,c),e.attribution&&!this.getAttributions()){const h=r!==void 0?r:o;this.setAttributions(function(m){return tu(h,m.extent)?[e.attribution]:null})}this.tileJSON_=e,this.setState("ready")}handleTileJSONError(){this.setState("error")}}class QP extends u6{constructor(e){const t=e.projection||"EPSG:3857",i=e.extent||l6(t),r=e.tileGrid||WP({extent:i,maxResolution:e.maxResolution,maxZoom:e.maxZoom!==void 0?e.maxZoom:22,minZoom:e.minZoom,tileSize:e.tileSize||512});super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,interpolate:!0,projection:t,state:e.state,tileGrid:r,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:IJ,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX===void 0?!0:e.wrapX,transition:e.transition,zDirection:e.zDirection===void 0?1:e.zDirection}),this.format_=e.format?e.format:null,this.tileKeysBySourceTileUrl_={},this.sourceTiles_={},this.overlaps_=e.overlaps==null?!0:e.overlaps,this.tileClass=e.tileClass?e.tileClass:sJ,this.tileGrids_={}}getOverlaps(){return this.overlaps_}getSourceTiles(e,t,i){if(i.getState()===ii.IDLE){i.setState(ii.LOADING);const r=i.wrappedTileCoord,o=this.getTileGridForProjection(t),s=o.getTileCoordExtent(r),a=r[0],c=o.getResolution(a);Hy(s,-c,s);const h=this.tileGrid,m=h.getExtent();m&&vm(s,m,s);const v=h.getZForResolution(c,this.zDirection);h.forEachTileCoord(s,v,x=>{const E=this.tileUrlFunction(x,e,t);this.sourceTiles_[E]||(this.sourceTiles_[E]=new this.tileClass(x,E?ii.IDLE:ii.EMPTY,E,this.format_,this.tileLoadFunction));const D=this.sourceTiles_[E];i.sourceTiles.push(D),this.tileKeysBySourceTileUrl_[E]||(this.tileKeysBySourceTileUrl_[E]=[]),this.tileKeysBySourceTileUrl_[E].push(i.getKey());const P=D.getState();if(P<ii.LOADED){const F=W=>{this.handleTileChange(W);const q=D.getState();if(q===ii.LOADED||q===ii.ERROR){const V=D.getKey();V in i.errorTileKeys?D.getState()===ii.LOADED&&delete i.errorTileKeys[V]:i.loadingSourceTiles--,q===ii.ERROR?i.errorTileKeys[V]=!0:D.removeEventListener(Er.CHANGE,F),i.loadingSourceTiles===0&&i.setState(tv(i.errorTileKeys)?ii.LOADED:ii.ERROR)}};D.addEventListener(Er.CHANGE,F),i.loadingSourceTiles++}P===ii.IDLE&&(D.extent=h.getTileCoordExtent(x),D.projection=t,D.resolution=h.getResolution(x[0]),D.load())}),i.loadingSourceTiles||i.setState(i.sourceTiles.some(x=>x.getState()===ii.ERROR)?ii.ERROR:ii.LOADED)}return i.sourceTiles}removeSourceTiles(e){const t=e.getKey(),i=e.sourceTiles;for(let r=0,o=i.length;r<o;++r){const s=i[r].getTileUrl();if(!this.tileKeysBySourceTileUrl_[s])return;const a=this.tileKeysBySourceTileUrl_[s].indexOf(t);a!==-1&&(this.tileKeysBySourceTileUrl_[s].splice(a,1),this.tileKeysBySourceTileUrl_[s].length===0&&(delete this.tileKeysBySourceTileUrl_[s],delete this.sourceTiles_[s]))}}getTile(e,t,i,r,o){const s=[e,t,i];let a=this.getTileCoordForTileUrlFunction(s,o);const c=this.getTileGrid().getExtent(),h=this.getTileGridForProjection(o);if(a&&c){const x=h.getTileCoordExtent(a);Hy(x,-h.getResolution(e),x),tu(c,x)||(a=null)}let m=!0;if(a!==null){const x=this.tileGrid,E=h.getResolution(e),D=x.getZForResolution(E,1),P=h.getTileCoordExtent(a);Hy(P,-E,P),x.forEachTileCoord(P,D,F=>{m=m&&!this.tileUrlFunction(F,r,o)})}const v=new Oye(s,m?ii.EMPTY:ii.IDLE,a,this.getSourceTiles.bind(this,r,o),this.removeSourceTiles.bind(this));return v.key=this.getKey(),v}getTileGridForProjection(e){const t=e.getCode();let i=this.tileGrids_[t];if(!i){const r=this.getProjection();ws(r===null||Zy(r,e),"A VectorTile source can only be rendered if it has a projection compatible with the view projection.");const o=this.tileGrid,s=o.getResolutions().slice(),a=s.map(function(m,v){return o.getOrigin(v)}),c=s.map(function(m,v){return o.getTileSize(v)}),h=_X+1;for(let m=s.length;m<h;++m)s.push(s[m-1]/2),a.push(a[m-1]),c.push(c[m-1]);i=new a6({extent:o.getExtent(),origins:a,resolutions:s,tileSizes:c}),this.tileGrids_[t]=i}return i}getTilePixelRatio(e){return e}getTilePixelSize(e,t,i){const r=this.getTileGridForProjection(i),o=nh(r.getTileSize(e),this.tmpSize);return[Math.round(o[0]*t),Math.round(o[1]*t)]}setOverlaps(e){this.overlaps_=e,this.changed()}}function IJ(n,e){n.setLoader(function(t,i,r){eJ(e,n.getFormat(),t,i,r,n.onLoad.bind(n),n.onError.bind(n))})}function vbe(n,e){const t=n[0],i=t.width,r=t.height,o=t.data,s=new Uint8ClampedArray(o.length),a=e.resolution*2,c=i-1,h=r-1,m=[0,0,0,0],v=2*Math.PI,x=Math.PI/2,E=Math.PI*e.sunEl/180,D=Math.PI*e.sunAz/180,P=Math.cos(E),F=Math.sin(E),W=e.highlightColor,q=e.shadowColor,V=e.accentColor,H=e.encoding;let X,Z,G,oe,ue,xe,me,Ie,Me,Te,je,Ee,qe,At,gt,Le,Re,Ge,De,_t,at,Tt;function Kt(Ke,Oe="mapbox"){if(Oe==="mapbox")return(Ke[0]*256*256+Ke[1]*256+Ke[2])*.1-1e4;if(Oe==="terrarium")return Ke[0]*256+Ke[1]+Ke[2]/256-32768}for(Z=0;Z<=h;++Z)for(ue=Z===0?0:Z-1,xe=Z===h?h:Z+1,X=0;X<=c;++X)G=X===0?0:X-1,oe=X===c?c:X+1,me=(Z*i+G)*4,m[0]=o[me],m[1]=o[me+1],m[2]=o[me+2],m[3]=o[me+3],Ie=e.vert*Kt(m,H),me=(Z*i+oe)*4,m[0]=o[me],m[1]=o[me+1],m[2]=o[me+2],m[3]=o[me+3],Me=e.vert*Kt(m,H),Te=(Me-Ie)/a,me=(ue*i+X)*4,m[0]=o[me],m[1]=o[me+1],m[2]=o[me+2],m[3]=o[me+3],Ie=e.vert*Kt(m,H),me=(xe*i+X)*4,m[0]=o[me],m[1]=o[me+1],m[2]=o[me+2],m[3]=o[me+3],Me=e.vert*Kt(m,H),je=(Me-Ie)/a,qe=Math.atan2(je,-Te),qe<0?qe=x-qe:qe>x?qe=v-qe+x:qe=x-qe,Ee=Math.atan(Math.sqrt(Te*Te+je*je)),Tt=F*Math.cos(Ee)+P*Math.sin(Ee)*Math.cos(D-qe),At=Math.cos(Ee),gt=255*Tt,De=Math.min(Math.max(2*e.sunEl,0),1),_t=1.875-e.opacity*1.75,at=e.opacity!==.5?x*((Math.pow(_t,Ee)-1)/(Math.pow(_t,x)-1)):Ee,Re={r:(1-At)*V.r*De*255,g:(1-At)*V.g*De*255,b:(1-At)*V.b*De*255,a:(1-At)*V.a*De*255},Le=Math.abs(((qe+D)/Math.PI+.5)%2-1),Ge={r:(W.r*(1-Le)+q.r*Le)*gt,g:(W.g*(1-Le)+q.g*Le)*gt,b:(W.b*(1-Le)+q.b*Le)*gt,a:(W.a*(1-Le)+q.a*Le)*gt},me=(Z*i+X)*4,s[me]=Re.r*(1-Le)+Ge.r,s[me+1]=Re.g*(1-Le)+Ge.g,s[me+2]=Re.b*(1-Le)+Ge.b,s[me+3]=o[me+3]*e.opacity*De*Math.sin(at);return new ImageData(s,i,r)}function bbe(n,e=512){return n.getExtent()?WP({extent:n.getExtent(),tileSize:e,maxZoom:22}).getResolutions():r0}function kJ(n,e){return e.accessToken||(e=Object.assign({},e),new URL(n).searchParams.forEach((i,r)=>{e.accessToken=i,e.accessTokenParam=r})),e}function Cbe(n,e,t="",i={},r=void 0){let o,s,a,c,h=!0;return typeof t!="string"&&!Array.isArray(t)?(a=t,c=a.source||a.layers,i=a):c=t,typeof i=="string"?(o=i,a={}):(o=i.styleUrl,a=i),a.updateSource===!1&&(h=!1),r||(r=a.resolutions),!o&&typeof e=="string"&&!e.trim().startsWith("{")&&(o=e),o&&(o=o.startsWith("data:")?location.href:mS(o,a.accessToken),a=kJ(o,a)),new Promise(function(m,v){uJ(e,a).then(function(x){if(x.version!=8)return v(new Error("glStyle version 8 required."));if(!(n instanceof KP||n instanceof f3))return v(new Error("Can only apply to VectorLayer or VectorTileLayer"));const E=n instanceof f3?"vector":"geojson";if(c?Array.isArray(c)?s=x.layers.find(function(H){return H.id===c[0]}).source:s=c:(s=x.layers.find(function(H){return H.source&&x.sources[H.source].type===E}).source,c=s),!s)return v(new Error(`No ${E} source found in the glStyle.`));function D(){if(!h)return Promise.resolve();if(n instanceof f3)return DJ(x.sources[s],o,a).then(function(G){const oe=n.getSource();oe?G!==oe&&(oe.setTileUrlFunction(G.getTileUrlFunction()),typeof oe.setUrls=="function"&&typeof G.getUrls=="function"&&oe.setUrls(G.getUrls()),oe.format_||(oe.format_=G.format_),oe.getAttributions()||oe.setAttributions(G.getAttributions()),oe.getTileLoadFunction()===IJ&&oe.setTileLoadFunction(G.getTileLoadFunction()),Zy(oe.getProjection(),G.getProjection())&&(oe.tileGrid=G.getTileGrid())):n.setSource(G);const ue=n.getSource().getTileGrid();!isFinite(n.getMaxResolution())&&!isFinite(n.getMinZoom())&&ue.getMinZoom()>0&&n.setMaxResolution(q2(Math.max(0,ue.getMinZoom()-1e-12),ue.getResolutions()))});const H=x.sources[s];let X=n.getSource();(!X||X.get("mapbox-source")!==H)&&(X=KJ(H,o,a));const Z=n.getSource();return Z?X!==Z&&(Z.getAttributions()||Z.setAttributions(X.getAttributions()),Z.format_||(Z.format_=X.getFormat()),Z.url_=X.getUrl()):n.setSource(X),Promise.resolve()}let P,F;const W={},q={};function V(){if(!F&&(!x.sprite||W)){if(a.projection&&!r){const G=Ns(a.projection).getUnits();G!=="m"&&(r=r0.map(oe=>oe/nv[G]))}let H;const X=n.getSource();X instanceof QP&&X.format_ instanceof fJ&&(H=X.format_.layerName_),F=Qye(n,x,c,r,W,q,(Z,G=a.webfonts)=>Lye(Z,G),a.getImage,H),n.getStyle()?D().then(m).catch(v):v(new Error(`Nothing to show for source [${s}]`))}else F?(n.setStyle(F),D().then(m).catch(v)):v(new Error("Something went wrong trying to apply style."))}if(x.sprite){const H=Iye(x.sprite,a.accessToken,o||location.href);P=iC?1:window.devicePixelRatio>=1.5?.5:1;const X=P==.5?"@2x":"";Promise.all(H.map(function(Z){const G=new URL(Z.url);let oe=G.origin+G.pathname+X+".json"+G.search;return new Promise(function(ue,xe){Cx("Sprite",oe,a).then(ue).catch(function(me){oe=G.origin+G.pathname+".json"+G.search,Cx("Sprite",oe,a).then(ue).catch(xe)})}).then(function(ue){ue===void 0&&v(new Error("No sprites found."));let xe;if(xe=G.origin+G.pathname+X+".png"+G.search,a.transformRequest){const me=a.transformRequest(xe,"SpriteImage")||xe;(me instanceof Request||me instanceof Promise)&&(xe=me)}q[Z.id]=xe;for(const me in ue){const Ie=Z.id=="default"?me:`${Z.id}:${me}`;W[Ie]=ue[me]}}).catch(function(ue){v(new Error(`Sprites cannot be loaded: ${oe}: ${ue.message}`))})})).then(V).catch(v)}else V()}).catch(v)})}function TJ(n,e){let t;return n.some(function(i){if(i.id==e)return t=i.source,!0}),t}function _be(n,e){const t=n.bounds;if(t){const i=a9([t[0],t[1]],e),r=a9([t[2],t[3]],e);return[i[0],i[1],r[0],r[1]]}return Ns(e).getExtent()}function RJ(n,e,t){const i=new OJ({tileJSON:e,tileSize:n.tileSize||e.tileSize||512}),r=i.getTileJSON(),o=i.getTileGrid(),s=Ns(t.projection||"EPSG:3857"),a=_be(r,s),c=s.getExtent(),h=r.minzoom||0,m=r.maxzoom||22,v={attributions:i.getAttributions(),projection:s,tileGrid:new a6({origin:c?C1(c):o.getOrigin(0),extent:a||o.getExtent(),minZoom:h,resolutions:bbe(s,e.tileSize).slice(0,m+1),tileSize:o.getTileSize(0)})};return Array.isArray(r.tiles)?v.urls=r.tiles:v.url=r.tiles,v}function xbe(n,e,t,i){const r={id:n.id,type:n.type},o=n.layout||{},s=n.paint||{};r.paint=s,gf.zoom=jP(e,t.resolutions||r0),gf.distanceFromCenter=0;let a;const c=Qi(r,"paint","background-color",fm,i);return s["background-opacity"]!==void 0&&(a=Qi(r,"paint","background-opacity",fm,i)),o.visibility=="none"?void 0:Ey(c,a)}function Mbe(n,e,t){const i=iC?{style:{}}:document.createElement("div");return i.className="ol-mapbox-style-background",i.style.position="absolute",i.style.width="100%",i.style.height="100%",new jx({source:new Nx({}),render(r){const o=xbe(n,r.viewState.resolution,e,t);return i.style.backgroundColor=o,i}})}function DJ(n,e,t){return new Promise(function(i,r){cJ(n,e,t).then(function({tileJson:o,tileLoadFunction:s}){const a=RJ(n,o,t);a.tileLoadFunction=s,a.format=new fJ({layerName:"mvt:layer"});const c=new QP(a);c.set("mapbox-source",n),i(c)}).catch(r)})}function wbe(n,e,t){const i=new f3({declutter:!0,visible:!1});return DJ(n,e,t).then(function(r){i.setSource(r)}).catch(function(r){i.setSource(void 0)}),i}function PJ(n){return`{bbox-${(n?n.getCode():"EPSG:3857").toLowerCase().replace(/[^a-z0-9]/g,"-")}}`}function Sbe(n,e,t){return new Promise(function(i,r){cJ(n,e,t).then(function({tileJson:o,tileLoadFunction:s}){const a=new OJ({interpolate:t.interpolate===void 0?!0:t.interpolate,transition:0,crossOrigin:"anonymous",tileJSON:o});a.tileGrid=RJ(n,o,t).tileGrid,t.projection&&(a.projection=Ns(t.projection));const c=a.getTileUrlFunction();s&&a.setTileLoadFunction(s),a.setTileUrlFunction(function(h,m,v){const x=PJ(v);let E=c(h,m,v);if(E.indexOf(x)!=-1){const D=a.getTileGrid().getTileCoordExtent(h);E=E.replace(x,D.toString())}return E}),a.set("mapbox-source",n),i(a)}).catch(function(o){r(o)})})}function UJ(n,e,t){const i=new CJ;return Sbe(n,e,t).then(function(r){i.setSource(r)}).catch(function(){i.setSource(void 0)}),i}function Ebe(n,e,t){const i=UJ(n,e,t);return new pJ({source:new EJ({operationType:"image",operation:vbe,sources:[i]})})}function KJ(n,e,t){const i=t.projection?new Xz({dataProjection:t.projection}):new Xz,r=n.data,o={};if(typeof r=="string"){const[a]=hw(r,t.accessToken,t.accessTokenParam||"access_token",e||location.href);if(/\{bbox-[0-9a-z-]+\}/.test(a)){const h=(v,x,E)=>{const D=PJ(E);return a.replace(D,`${v.join(",")}`)},m=new Aw({attributions:n.attribution,format:i,loader:(v,x,E,D,P)=>{const F=typeof h=="function"?h(v,x,E):h;Cx("GeoJSON",F,t).then(W=>{const q=m.getFormat().readFeatures(W,{featureProjection:E});m.addFeatures(q),D(q)}).catch(W=>{m.removeLoadedExtent(v),P()})},strategy:uye});return m.set("mapbox-source",n),m}const c=new Aw({attributions:n.attribution,format:i,url:a,loader:(h,m,v,x,E)=>{Cx("GeoJSON",a,t).then(D=>{const P=c.getFormat().readFeatures(D,{featureProjection:v});c.addFeatures(P),x(P)}).catch(D=>{c.removeLoadedExtent(h),E()})}});return c}o.features=i.readFeatures(r,{featureProjection:"EPSG:3857"});const s=new Aw(Object.assign({attributions:n.attribution,format:i},o));return s.set("mapbox-source",n),s}function Bbe(n,e,t){return new KP({declutter:!0,source:KJ(n,e,t),visible:!1})}function Obe(n,e,t){let i=null;return function(r){n.paint&&"raster-opacity"in n.paint&&r.frameState.viewState.zoom!==i&&(i=r.frameState.viewState.zoom,delete t[n.id],Ibe(n,e,i,t))}}function Ibe(n,e,t,i){gf.zoom=t,gf.distanceFromCenter=0;const r=Qi(n,"paint","raster-opacity",fm,i);e.setOpacity(r)}function kbe(n,e){function t(){const i=e.get("mapbox-style");if(!i)return;const r=gZ(i.layers),o=n.get("mapbox-layers"),s=r.filter(function(a){return o.includes(a.id)}).some(function(a){return!a.layout||!a.layout.visibility||a.layout.visibility==="visible"});n.get("visible")!==s&&n.setVisible(s)}n.on("change",t),t()}function Tbe(n,e,t,i){const r=lJ(n),o=n.layers,s=t.type,a=t.source||TJ(o,t.ref),c=n.sources[a];let h;if(s=="background")h=Mbe(t,i,r);else if(c.type=="vector")h=wbe(c,e,i);else if(c.type=="raster")h=UJ(c,e,i),h.setVisible(t.layout?t.layout.visibility!=="none":!0),h.on("prerender",Obe(t,h,r));else if(c.type=="geojson")h=Bbe(c,e,i);else if(c.type=="raster-dem"&&t.type=="hillshade"){const v=Ebe(c,e,i);h=v,v.getSource().on("beforeoperations",function(x){const E=x.data;E.resolution=s9(i.projection||"EPSG:3857",x.resolution,vf(x.extent),"m"),gf.zoom=jP(x.resolution,i.resolutions||r0),gf.distanceFromCenter=0,E.encoding=c.encoding,E.vert=5*Qi(t,"paint","hillshade-exaggeration",fm,r),E.sunAz=Qi(t,"paint","hillshade-illumination-direction",fm,r),E.sunEl=35,E.opacity=.3,E.highlightColor=Qi(t,"paint","hillshade-highlight-color",fm,r),E.shadowColor=Qi(t,"paint","hillshade-shadow-color",fm,r),E.accentColor=Qi(t,"paint","hillshade-accent-color",fm,r)}),h.setVisible(t.layout?t.layout.visibility!=="none":!0)}const m=a;return h&&h.set("mapbox-source",m),h}function uj(n,e,t,i){const r=[];let o=null;if(e instanceof a4){if(o=e.getView(),!o.isDef()&&!o.getRotation()&&!o.getResolutions()){const v=i.projection?Ns(i.projection):o.getProjection();o=new hm(Object.assign(o.getProperties(),{maxResolution:r0[0]/nv[v.getUnits()],projection:i.projection||o.getProjection()})),e.setView(o)}"center"in n&&!o.getCenter()&&o.setCenter(a9(n.center,o.getProjection())),"zoom"in n&&o.getZoom()===void 0&&o.setResolution(r0[0]/nv[o.getProjection().getUnits()]/Math.pow(2,n.zoom)),(!o.getCenter()||o.getZoom()===void 0)&&o.fit(o.getProjection().getExtent(),{nearest:!0,size:e.getSize()})}e.set("mapbox-style",n),e.set("mapbox-metadata",{styleUrl:t,options:i});const s=n.layers;let a=[],c,h,m;for(let v=0,x=s.length;v<x;++v){const E=s[v],D=E.type;if(D=="heatmap"){console.debug(`layers[${v}].type "${D}" not supported`);continue}else m=E.source||TJ(s,E.ref),(!m||m!=h)&&(a.length&&(r.push(cj(c,a,n,t,e,i)),a=[]),c=Tbe(n,t,E,i),c instanceof KP||c instanceof f3||(a=[]),h=c.get("mapbox-source")),a.push(E.id)}return r.push(cj(c,a,n,t,e,i)),Promise.all(r)}function Rbe(n,e,t={}){let i,r;if(iC){if(!(n instanceof a4)&&!(n instanceof lC))throw new Error("ol-mapbox-style in a web worker requires a Map or a LayerGroup as first argument");r=n}else typeof n=="string"||n instanceof HTMLElement?r=new a4({target:n}):r=n;if(typeof e=="string"){const o=e.startsWith("data:")?location.href:mS(e,t.accessToken);t=kJ(o,t),i=new Promise(function(s,a){uJ(e,t).then(function(c){uj(c,r,o,t).then(function(){s(r)}).catch(a)}).catch(function(c){a(new Error(`Could not load ${e}: ${c.message}`))})})}else i=new Promise(function(o,s){uj(e,r,!t.styleUrl||t.styleUrl.startsWith("data:")?location.href:mS(t.styleUrl,t.accessToken),t).then(function(){o(r)}).catch(s)});return i}function cj(n,e,t,i,r,o={}){let s=24,a=0;const c=t.layers;for(let h=0,m=c.length;h<m;++h){const v=c[h];e.indexOf(v.id)!==-1&&(s=Math.min("minzoom"in v?v.minzoom:0,s),a=Math.max("maxzoom"in v?v.maxzoom:24,a))}return new Promise(function(h,m){const v=function(){const E=n.getSource();if(!E||E.getState()==="error"){m(new Error("Error accessing data for source "+n.get("mapbox-source")));return}if("getTileGrid"in E){const D=E.getTileGrid();if(D){const P=D.getMinZoom();(s>0||P>0)&&n.setMaxResolution(Math.min(q2(Math.max(0,s-1e-12),r0),q2(Math.max(0,P-1e-12),D.getResolutions()))),a<24&&n.setMinResolution(q2(a,r0))}}else s>0&&n.setMaxResolution(q2(Math.max(0,s-1e-12),r0));E instanceof Aw||E instanceof QP?Cbe(n,t,e,Object.assign({styleUrl:i},o)).then(function(){kbe(n,r),h()}).catch(m):h()};n.set("mapbox-layers",e);const x=r.getLayers();x.getArray().indexOf(n)===-1&&x.push(n),n.getSource()?v():n.once("change:source",v)})}function wi(){var n="/home/runner/work/maputnik/maputnik/src/components/MapOpenLayers.tsx",e="5f4719fc476214e7aff32d9043337b9c97544cf9",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/MapOpenLayers.tsx",statementMap:{0:{start:{line:11,column:2},end:{line:15,column:3}},1:{start:{line:12,column:4},end:{line:12,column:16}},2:{start:{line:14,column:4},end:{line:14,column:149}},3:{start:{line:14,column:103},end:{line:14,column:133}},4:{start:{line:18,column:24},end:{line:25,column:3}},5:{start:{line:28,column:14},end:{line:28,column:18}},6:{start:{line:30,column:19},end:{line:30,column:23}},7:{start:{line:32,column:4},end:{line:32,column:17}},8:{start:{line:33,column:4},end:{line:38,column:6}},9:{start:{line:39,column:4},end:{line:39,column:67}},10:{start:{line:42,column:4},end:{line:42,column:26}},11:{start:{line:42,column:19},end:{line:42,column:26}},12:{start:{line:43,column:4},end:{line:43,column:33}},13:{start:{line:44,column:4},end:{line:44,column:33}},14:{start:{line:47,column:4},end:{line:51,column:5}},15:{start:{line:48,column:6},end:{line:50,column:8}},16:{start:{line:54,column:4},end:{line:61,column:7}},17:{start:{line:62,column:16},end:{line:69,column:6}},18:{start:{line:70,column:4},end:{line:78,column:7}},19:{start:{line:71,column:21},end:{line:71,column:45}},20:{start:{line:72,column:6},end:{line:77,column:9}},21:{start:{line:79,column:22},end:{line:89,column:5}},22:{start:{line:80,column:19},end:{line:80,column:42}},23:{start:{line:81,column:21},end:{line:81,column:56}},24:{start:{line:82,column:6},end:{line:88,column:9}},25:{start:{line:90,column:4},end:{line:90,column:16}},26:{start:{line:91,column:4},end:{line:91,column:33}},27:{start:{line:92,column:4},end:{line:102,column:7}},28:{start:{line:93,column:21},end:{line:93,column:56}},29:{start:{line:94,column:6},end:{line:101,column:9}},30:{start:{line:103,column:4},end:{line:103,column:19}},31:{start:{line:104,column:4},end:{line:106,column:6}},32:{start:{line:108,column:17},end:{line:111,column:3}},33:{start:{line:109,column:4},end:{line:109,column:20}},34:{start:{line:110,column:4},end:{line:110,column:37}},35:{start:{line:113,column:14},end:{line:113,column:26}},36:{start:{line:114,column:4},end:{line:185,column:9}},37:{start:{line:119,column:12},end:{line:119,column:36}},38:{start:{line:176,column:12},end:{line:176,column:31}},39:{start:{line:188,column:22},end:{line:188,column:62}}},fnMap:{0:{name:"renderCoords",decl:{start:{line:10,column:9},end:{line:10,column:21}},loc:{start:{line:10,column:30},end:{line:16,column:1}},line:10},1:{name:"(anonymous_1)",decl:{start:{line:14,column:92},end:{line:14,column:93}},loc:{start:{line:14,column:103},end:{line:14,column:133}},line:14},2:{name:"(anonymous_2)",decl:{start:{line:19,column:17},end:{line:19,column:18}},loc:{start:{line:19,column:23},end:{line:20,column:5}},line:19},3:{name:"(anonymous_3)",decl:{start:{line:21,column:18},end:{line:21,column:19}},loc:{start:{line:21,column:24},end:{line:22,column:5}},line:21},4:{name:"(anonymous_4)",decl:{start:{line:23,column:19},end:{line:23,column:20}},loc:{start:{line:23,column:25},end:{line:24,column:5}},line:23},5:{name:"(anonymous_5)",decl:{start:{line:31,column:2},end:{line:31,column:3}},loc:{start:{line:31,column:21},end:{line:40,column:3}},line:31},6:{name:"(anonymous_6)",decl:{start:{line:41,column:2},end:{line:41,column:3}},loc:{start:{line:41,column:28},end:{line:45,column:3}},line:41},7:{name:"(anonymous_7)",decl:{start:{line:46,column:2},end:{line:46,column:3}},loc:{start:{line:46,column:32},end:{line:52,column:3}},line:46},8:{name:"(anonymous_8)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:22},end:{line:107,column:3}},line:53},9:{name:"(anonymous_9)",decl:{start:{line:70,column:26},end:{line:70,column:27}},loc:{start:{line:70,column:35},end:{line:78,column:5}},line:70},10:{name:"(anonymous_10)",decl:{start:{line:79,column:22},end:{line:79,column:23}},loc:{start:{line:79,column:28},end:{line:89,column:5}},line:79},11:{name:"(anonymous_11)",decl:{start:{line:92,column:25},end:{line:92,column:26}},loc:{start:{line:92,column:33},end:{line:102,column:5}},line:92},12:{name:"(anonymous_12)",decl:{start:{line:108,column:17},end:{line:108,column:18}},loc:{start:{line:108,column:24},end:{line:111,column:3}},line:108},13:{name:"(anonymous_13)",decl:{start:{line:112,column:2},end:{line:112,column:3}},loc:{start:{line:112,column:11},end:{line:186,column:3}},line:112},14:{name:"(anonymous_14)",decl:{start:{line:118,column:15},end:{line:118,column:16}},loc:{start:{line:118,column:22},end:{line:120,column:11}},line:118},15:{name:"(anonymous_15)",decl:{start:{line:175,column:15},end:{line:175,column:16}},loc:{start:{line:175,column:22},end:{line:177,column:11}},line:175}},branchMap:{0:{loc:{start:{line:11,column:2},end:{line:15,column:3}},type:"if",locations:[{start:{line:11,column:2},end:{line:15,column:3}},{start:{line:13,column:9},end:{line:15,column:3}}],line:11},1:{loc:{start:{line:11,column:6},end:{line:11,column:34}},type:"binary-expr",locations:[{start:{line:11,column:6},end:{line:11,column:13}},{start:{line:11,column:17},end:{line:11,column:34}}],line:11},2:{loc:{start:{line:42,column:4},end:{line:42,column:26}},type:"if",locations:[{start:{line:42,column:4},end:{line:42,column:26}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:42},3:{loc:{start:{line:47,column:4},end:{line:51,column:5}},type:"if",locations:[{start:{line:47,column:4},end:{line:51,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:47},4:{loc:{start:{line:136,column:26},end:{line:136,column:59}},type:"binary-expr",locations:[{start:{line:136,column:26},end:{line:136,column:53}},{start:{line:136,column:57},end:{line:136,column:59}}],line:136},5:{loc:{start:{line:148,column:6},end:{line:170,column:10}},type:"binary-expr",locations:[{start:{line:148,column:6},end:{line:148,column:29}},{start:{line:148,column:49},end:{line:170,column:10}}],line:148}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/MapOpenLayers.tsx"],names:[],mappings:"AAoBW,cAyIL,YAzIK;AApBX,OAAO,WAAW;AAClB,SAAQ,gBAAe;AACvB,SAA+B,uBAAuB;AAEtD,OAAO,6BAA6B;AAEpC,OAAO;AAEP,SAAQ,aAAY;AACpB,SAAQ,KAAK,MAAM,eAAc;AAEjC,SAAQ,gBAAe;AAIvB,SAAS,aAAc,QAAkB;AACvC,MAAI,CAAC,UAAU,OAAO,SAAS,GAAG;AAChC,WAAO;AAAA,EACT,OACK;AACH,WAAO,oBAAC,UAAK,WAAU,mBACpB,iBAAO,IAAI,CAAC,UAAU,OAAO,KAAK,EAAE,SAAS,GAAG,GAAQ,CAAC,EAAE,KAAK,IAAI,GACvE;AAAA,EACF;AACF;AAqBA,MAAM,8BAA8B,MAAM,UAA0D;AAAA,EAClG,OAAO,eAAe;AAAA,IACpB,aAAa,MAAM;AAAA,IAAC;AAAA,IACpB,cAAc,MAAM;AAAA,IAAC;AAAA,IACrB,eAAe,MAAM;AAAA,IAAC;AAAA,EACxB;AAAA,EACA;AAAA,EACA;AAAA,EACA,YAAmC;AAAA,EACnC;AAAA,EACA,iBAAqC;AAAA,EAErC,YAAY,OAAmC;AAC7C,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,MAAM;AAAA,MACN,UAAU;AAAA,MACV,QAAQ,CAAC;AAAA,MACT,QAAQ,CAAC;AAAA,IACX;AACA,SAAK,cAAc,SAAS,KAAK,aAAa,KAAK,IAAI,GAAG,GAAG;AAAA,EAC/D;AAAA,EAEA,aAAa,aAAiC;AAC5C,QAAG,CAAC,KAAK,IAAK;AAGd,SAAK,IAAI,UAAU,EAAE,MAAM;AAC3B,UAAM,KAAK,KAAK,WAAW;AAAA,EAC7B;AAAA,EAEA,mBAAmB,WAAuC;AACxD,QAAI,KAAK,MAAM,aAAa,UAAU,UAAU;AAC9C,WAAK;AAAA,QACH,KAAK,MAAM,oBAAoB,KAAK,MAAM,QAAQ;AAAA,MACpD;AAAA,IACF;AAAA,EACF;AAAA,EAEA,oBAAoB;AAClB,SAAK,UAAU,IAAI,QAAQ;AAAA,MACzB,SAAS,KAAK;AAAA,MACd,SAAS;AAAA,QACP,WAAW;AAAA,UACT,UAAU;AAAA,QACZ;AAAA,MACF;AAAA,IACF,CAAC;AAED,UAAM,MAAM,IAAI,IAAI;AAAA,MAClB,QAAQ,KAAK;AAAA,MACb,UAAU,CAAC,KAAK,OAAO;AAAA,MACvB,MAAM,IAAI,KAAK;AAAA,QACb,MAAM;AAAA,QACN,QAAQ,CAAC,KAAK,GAAG;AAAA,MACnB,CAAC;AAAA,IACH,CAAC;AAED,QAAI,GAAG,eAAe,CAAC,QAAQ;AAC7B,YAAM,SAAS,SAAS,IAAI,UAAU;AACtC,WAAK,SAAS;AAAA,QACZ,QAAQ;AAAA,UACN,OAAO,CAAC,EAAE,QAAQ,CAAC;AAAA,UACnB,OAAO,CAAC,EAAE,QAAQ,CAAC;AAAA,QACrB;AAAA,MACF,CAAC;AAAA,IACH,CAAC;AAED,UAAM,YAAY,MAAM;AACtB,YAAM,OAAO,IAAI,QAAQ,EAAE,QAAQ;AACnC,YAAM,SAAS,SAAS,IAAI,QAAQ,EAAE,UAAU,CAAE;AAElD,WAAK,MAAM,SAAS;AAAA,QAClB;AAAA,QACA,QAAQ;AAAA,UACN,KAAK,OAAO,CAAC;AAAA,UACb,KAAK,OAAO,CAAC;AAAA,QACf;AAAA,MACF,CAAC;AAAA,IACH;AAEA,cAAU;AACV,QAAI,GAAG,WAAW,SAAS;AAE3B,QAAI,GAAG,cAAc,CAAC,OAAO;AAC3B,YAAM,SAAS,SAAS,IAAI,QAAQ,EAAE,UAAU,CAAE;AAClD,WAAK,SAAS;AAAA,QACZ,QAAQ;AAAA,UACN,OAAO,CAAC,EAAE,QAAQ,CAAC;AAAA,UACnB,OAAO,CAAC,EAAE,QAAQ,CAAC;AAAA,QACrB;AAAA,QACA,UAAU,IAAI,QAAQ,EAAE,YAAY,EAAE,QAAQ,CAAC;AAAA,QAC/C,MAAM,IAAI,QAAQ,EAAE,QAAQ,EAAG,QAAQ,CAAC;AAAA,MAC1C,CAAC;AAAA,IACH,CAAC;AAID,SAAK,MAAM;AACX,SAAK;AAAA,MACH,KAAK,MAAM,oBAAoB,KAAK,MAAM,QAAQ;AAAA,IACpD;AAAA,EACF;AAAA,EAEA,eAAe,CAAC,MAAW;AACzB,MAAE,OAAO,KAAK;AACd,SAAK,QAAS,YAAY,MAAS;AAAA,EACrC;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SAAI,WAAU,yBACpB;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,KAAK,OAAK;AAAC,iBAAK,iBAAiB;AAAA,UAAE;AAAA,UACnC,OAAO,EAAC,YAAY,QAAO;AAAA,UAC3B,WAAU;AAAA,UAEV;AAAA;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,SAAS,KAAK;AAAA,gBACd,cAAY,EAAE,aAAa;AAAA,gBAC5B;AAAA;AAAA,YAED;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,UAAU,KAAK,MAAM,oBAAoB,CAAC;AAAA,gBAC1C,eAAe,KAAK,MAAM;AAAA;AAAA,YAC5B;AAAA;AAAA;AAAA,MACF;AAAA,MACA,qBAAC,SAAI,WAAU,oBACZ;AAAA,UAAE,OAAO;AAAA,QAAE;AAAA,QAAE,KAAK,MAAM;AAAA,SAC3B;AAAA,MACC,KAAK,MAAM,gBACV,qBAAC,SAAI,WAAU,qBACb;AAAA,6BAAC,SACC;AAAA,+BAAC,WAAO;AAAA,cAAE,SAAS;AAAA,YAAE;AAAA,aAAC;AAAA,UACtB,oBAAC,UAAM,uBAAa,KAAK,MAAM,MAAM,GAAE;AAAA,WACzC;AAAA,QACA,qBAAC,SACC;AAAA,+BAAC,WAAO;AAAA,cAAE,SAAS;AAAA,YAAE;AAAA,aAAC;AAAA,UACtB,oBAAC,UAAM,uBAAa,KAAK,MAAM,MAAM,GAAE;AAAA,WACzC;AAAA,QACA,qBAAC,SACC;AAAA,+BAAC,WAAO;AAAA,cAAE,WAAW;AAAA,YAAE;AAAA,aAAC;AAAA,UACxB,oBAAC,UAAM,eAAK,MAAM,UAAS;AAAA,WAC7B;AAAA,SACF;AAAA,MAEF;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,KAAK,OAAK;AAAC,iBAAK,YAAY;AAAA,UAAE;AAAA,UAC9B,MAAK;AAAA,UACL,cAAY,EAAE,UAAU;AAAA,UACxB,OAAO;AAAA,YACL,GAAG,KAAK,MAAM;AAAA,UAChB;AAAA;AAAA,MACF;AAAA,OACF;AAAA,EACF;AACF;AAEA,MAAM,gBAAgB,gBAAgB,EAAE,qBAAqB;AAC7D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"5f4719fc476214e7aff32d9043337b9c97544cf9"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return wi=function(){return s},s}wi();function Aj(n){return wi().f[0]++,wi().s[0]++,wi().b[1][0]++,!n||(wi().b[1][1]++,n.length<2)?(wi().b[0][0]++,wi().s[1]++,null):(wi().b[0][1]++,wi().s[2]++,te.jsx("span",{className:"maputnik-coords",children:n.map(e=>(wi().f[1]++,wi().s[3]++,String(e).padStart(7,""))).join(", ")}))}class Dbe extends On.Component{static defaultProps=(wi().s[4]++,{onMapLoaded:()=>{wi().f[2]++},onDataChange:()=>{wi().f[3]++},onLayerSelect:()=>{wi().f[4]++}});updateStyle;map;container=(wi().s[5]++,null);overlay;popupContainer=(wi().s[6]++,null);constructor(e){wi().f[5]++,wi().s[7]++,super(e),wi().s[8]++,this.state={zoom:"0",rotation:"0",cursor:[],center:[]},wi().s[9]++,this.updateStyle=Y4.throttle(this._updateStyle.bind(this),200)}_updateStyle(e){if(wi().f[6]++,wi().s[10]++,this.map)wi().b[2][1]++;else{wi().b[2][0]++,wi().s[11]++;return}wi().s[12]++,this.map.getLayers().clear(),wi().s[13]++,Rbe(this.map,e)}componentDidUpdate(e){wi().f[7]++,wi().s[14]++,this.props.mapStyle!==e.mapStyle?(wi().b[3][0]++,wi().s[15]++,this.updateStyle(this.props.replaceAccessTokens(this.props.mapStyle))):wi().b[3][1]++}componentDidMount(){wi().f[8]++,wi().s[16]++,this.overlay=new Bye({element:this.popupContainer,autoPan:{animation:{duration:250}}});const e=(wi().s[17]++,new a4({target:this.container,overlays:[this.overlay],view:new hm({zoom:1,center:[180,-90]})}));wi().s[18]++,e.on("pointermove",i=>{wi().f[9]++;const r=(wi().s[19]++,VB(i.coordinate));wi().s[20]++,this.setState({cursor:[r[0].toFixed(2),r[1].toFixed(2)]})}),wi().s[21]++;const t=()=>{wi().f[10]++;const i=(wi().s[22]++,e.getView().getZoom()),r=(wi().s[23]++,VB(e.getView().getCenter()));wi().s[24]++,this.props.onChange({zoom:i,center:{lng:r[0],lat:r[1]}})};wi().s[25]++,t(),wi().s[26]++,e.on("moveend",t),wi().s[27]++,e.on("postrender",i=>{wi().f[11]++;const r=(wi().s[28]++,VB(e.getView().getCenter()));wi().s[29]++,this.setState({center:[r[0].toFixed(2),r[1].toFixed(2)],rotation:e.getView().getRotation().toFixed(2),zoom:e.getView().getZoom().toFixed(2)})}),wi().s[30]++,this.map=e,wi().s[31]++,this.updateStyle(this.props.replaceAccessTokens(this.props.mapStyle))}closeOverlay=(wi().s[32]++,e=>{wi().f[12]++,wi().s[33]++,e.target.blur(),wi().s[34]++,this.overlay.setPosition(void 0)});render(){wi().f[13]++;const e=(wi().s[35]++,this.props.t);return wi().s[36]++,te.jsxs("div",{className:"maputnik-ol-container",children:[te.jsxs("div",{ref:t=>{wi().f[14]++,wi().s[37]++,this.popupContainer=t},style:{background:"black"},className:"maputnik-popup",children:[te.jsx("button",{className:"maplibregl-popup-close-button",onClick:this.closeOverlay,"aria-label":e("Close popup"),children:""}),te.jsx(hZ,{features:(wi().b[4][0]++,this.state.selectedFeatures||(wi().b[4][1]++,[])),onLayerSelect:this.props.onLayerSelect})]}),te.jsxs("div",{className:"maputnik-ol-zoom",children:[e("Zoom:")," ",this.state.zoom]}),(wi().b[5][0]++,this.props.debugToolbox&&(wi().b[5][1]++,te.jsxs("div",{className:"maputnik-ol-debug",children:[te.jsxs("div",{children:[te.jsxs("label",{children:[e("cursor:")," "]}),te.jsx("span",{children:Aj(this.state.cursor)})]}),te.jsxs("div",{children:[te.jsxs("label",{children:[e("center:")," "]}),te.jsx("span",{children:Aj(this.state.center)})]}),te.jsxs("div",{children:[te.jsxs("label",{children:[e("rotation:")," "]}),te.jsx("span",{children:this.state.rotation})]})]}))),te.jsx("div",{className:"maputnik-ol",ref:t=>{wi().f[15]++,wi().s[38]++,this.container=t},role:"region","aria-label":e("Map view"),style:{...this.props.style}})]})}}const Pbe=(wi().s[39]++,Po()(Dbe));var EO={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var hj;function Ube(){return hj||(hj=1,(function(n){(function(){var e={}.hasOwnProperty;function t(){for(var o="",s=0;s<arguments.length;s++){var a=arguments[s];a&&(o=r(o,i(a)))}return o}function i(o){if(typeof o=="string"||typeof o=="number")return o;if(typeof o!="object")return"";if(Array.isArray(o))return t.apply(null,o);if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]"))return o.toString();var s="";for(var a in o)e.call(o,a)&&o[a]&&(s=r(s,a));return s}function r(o,s){return s?o?o+" "+s:o+s:o}n.exports?(t.default=t,n.exports=t):window.classNames=t})()})(EO)),EO.exports}var Kbe=Ube();const f0=Ou(Kbe),Lbe=/("(?:[^\\"]|\\.)*")|[:,]/g;function Fbe(n,e={}){const t=JSON.stringify([1],void 0,e.indent===void 0?2:e.indent).slice(2,-3),i=t===""?1/0:e.maxLength===void 0?80:e.maxLength;let{replacer:r}=e;return(function o(s,a,c){s&&typeof s.toJSON=="function"&&(s=s.toJSON());const h=JSON.stringify(s,r);if(h===void 0)return h;const m=i-a.length-c;if(h.length<=m){const v=h.replace(Lbe,(x,E)=>E||`${x} `);if(v.length<=m)return v}if(r!=null&&(s=JSON.parse(h),r=void 0),typeof s=="object"&&s!==null){const v=a+t,x=[];let E=0,D,P;if(Array.isArray(s)){D="[",P="]";const{length:F}=s;for(;E<F;E++)x.push(o(s[E],v,E===F-1?0:1)||"null")}else{D="{",P="}";const F=Object.keys(s),{length:W}=F;for(;E<W;E++){const q=F[E],V=`${JSON.stringify(q)}: `,H=o(s[q],v,V.length+(E===W-1?0:1));H!==void 0&&x.push(V+H)}}if(x.length>0)return[D,t+x.join(`,
${v}`),P].join(`
${a}`)}return h})(n,"",0)}let S9=[],LJ=[];(()=>{let n="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,t=0;e<n.length;e++)(e%2?LJ:S9).push(t=t+n[e])})();function zbe(n){if(n<768)return!1;for(let e=0,t=S9.length;;){let i=e+t>>1;if(n<S9[i])t=i;else if(n>=LJ[i])e=i+1;else return!0;if(e==t)return!1}}function dj(n){return n>=127462&&n<=127487}const fj=8205;function jbe(n,e,t=!0,i=!0){return(t?FJ:Nbe)(n,e,i)}function FJ(n,e,t){if(e==n.length)return e;e&&zJ(n.charCodeAt(e))&&jJ(n.charCodeAt(e-1))&&e--;let i=BO(n,e);for(e+=pj(i);e<n.length;){let r=BO(n,e);if(i==fj||r==fj||t&&zbe(r))e+=pj(r),i=r;else if(dj(r)){let o=0,s=e-2;for(;s>=0&&dj(BO(n,s));)o++,s-=2;if(o%2==0)break;e+=2}else break}return e}function Nbe(n,e,t){for(;e>0;){let i=FJ(n,e-2,t);if(i<e)return i;e--}return 0}function BO(n,e){let t=n.charCodeAt(e);if(!jJ(t)||e+1==n.length)return t;let i=n.charCodeAt(e+1);return zJ(i)?(t-55296<<10)+(i-56320)+65536:t}function zJ(n){return n>=56320&&n<57344}function jJ(n){return n>=55296&&n<56320}function pj(n){return n<65536?1:2}class ps{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,i){[e,t]=_x(this,e,t);let r=[];return this.decompose(0,e,r,2),i.length&&i.decompose(0,i.length,r,3),this.decompose(t,this.length,r,1),Lg.from(r,this.length-(t-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){[e,t]=_x(this,e,t);let i=[];return this.decompose(e,t,i,0),Lg.from(i,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),r=new p3(this),o=new p3(e);for(let s=t,a=t;;){if(r.next(s),o.next(s),s=0,r.lineBreak!=o.lineBreak||r.done!=o.done||r.value!=o.value)return!1;if(a+=r.value.length,r.done||a>=i)return!0}}iter(e=1){return new p3(this,e)}iterRange(e,t=this.length){return new NJ(this,e,t)}iterLines(e,t){let i;if(e==null)i=this.iter();else{t==null&&(t=this.lines+1);let r=this.line(e).from;i=this.iterRange(r,Math.max(r,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new GJ(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?ps.empty:e.length<=32?new Eu(e):Lg.from(Eu.split(e,[]))}}class Eu extends ps{constructor(e,t=Gbe(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,i,r){for(let o=0;;o++){let s=this.text[o],a=r+s.length;if((t?i:a)>=e)return new Wbe(r,a,i,s);r=a+1,i++}}decompose(e,t,i,r){let o=e<=0&&t>=this.length?this:new Eu(mj(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(r&1){let s=i.pop(),a=dw(o.text,s.text.slice(),0,o.length);if(a.length<=32)i.push(new Eu(a,s.length+o.length));else{let c=a.length>>1;i.push(new Eu(a.slice(0,c)),new Eu(a.slice(c)))}}else i.push(o)}replace(e,t,i){if(!(i instanceof Eu))return super.replace(e,t,i);[e,t]=_x(this,e,t);let r=dw(this.text,dw(i.text,mj(this.text,0,e)),t),o=this.length+i.length-(t-e);return r.length<=32?new Eu(r,o):Lg.from(Eu.split(r,[]),o)}sliceString(e,t=this.length,i=`
`){[e,t]=_x(this,e,t);let r="";for(let o=0,s=0;o<=t&&s<this.text.length;s++){let a=this.text[s],c=o+a.length;o>e&&s&&(r+=i),e<c&&t>o&&(r+=a.slice(Math.max(0,e-o),t-o)),o=c+1}return r}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let i=[],r=-1;for(let o of e)i.push(o),r+=o.length+1,i.length==32&&(t.push(new Eu(i,r)),i=[],r=-1);return r>-1&&t.push(new Eu(i,r)),t}}class Lg extends ps{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let i of e)this.lines+=i.lines}lineInner(e,t,i,r){for(let o=0;;o++){let s=this.children[o],a=r+s.length,c=i+s.lines-1;if((t?c:a)>=e)return s.lineInner(e,t,i,r);r=a+1,i=c+1}}decompose(e,t,i,r){for(let o=0,s=0;s<=t&&o<this.children.length;o++){let a=this.children[o],c=s+a.length;if(e<=c&&t>=s){let h=r&((s<=e?1:0)|(c>=t?2:0));s>=e&&c<=t&&!h?i.push(a):a.decompose(e-s,t-s,i,h)}s=c+1}}replace(e,t,i){if([e,t]=_x(this,e,t),i.lines<this.lines)for(let r=0,o=0;r<this.children.length;r++){let s=this.children[r],a=o+s.length;if(e>=o&&t<=a){let c=s.replace(e-o,t-o,i),h=this.lines-s.lines+c.lines;if(c.lines<h>>4&&c.lines>h>>6){let m=this.children.slice();return m[r]=c,new Lg(m,this.length-(t-e)+i.length)}return super.replace(o,a,c)}o=a+1}return super.replace(e,t,i)}sliceString(e,t=this.length,i=`
`){[e,t]=_x(this,e,t);let r="";for(let o=0,s=0;o<this.children.length&&s<=t;o++){let a=this.children[o],c=s+a.length;s>e&&o&&(r+=i),e<c&&t>s&&(r+=a.sliceString(e-s,t-s,i)),s=c+1}return r}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof Lg))return 0;let i=0,[r,o,s,a]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;r+=t,o+=t){if(r==s||o==a)return i;let c=this.children[r],h=e.children[o];if(c!=h)return i+c.scanIdentical(h,t);i+=c.length+1}}static from(e,t=e.reduce((i,r)=>i+r.length+1,-1)){let i=0;for(let E of e)i+=E.lines;if(i<32){let E=[];for(let D of e)D.flatten(E);return new Eu(E,t)}let r=Math.max(32,i>>5),o=r<<1,s=r>>1,a=[],c=0,h=-1,m=[];function v(E){let D;if(E.lines>o&&E instanceof Lg)for(let P of E.children)v(P);else E.lines>s&&(c>s||!c)?(x(),a.push(E)):E instanceof Eu&&c&&(D=m[m.length-1])instanceof Eu&&E.lines+D.lines<=32?(c+=E.lines,h+=E.length+1,m[m.length-1]=new Eu(D.text.concat(E.text),D.length+1+E.length)):(c+E.lines>r&&x(),c+=E.lines,h+=E.length+1,m.push(E))}function x(){c!=0&&(a.push(m.length==1?m[0]:Lg.from(m,h)),h=-1,c=m.length=0)}for(let E of e)v(E);return x(),a.length==1?a[0]:new Lg(a,t)}}ps.empty=new Eu([""],0);function Gbe(n){let e=-1;for(let t of n)e+=t.length+1;return e}function dw(n,e,t=0,i=1e9){for(let r=0,o=0,s=!0;o<n.length&&r<=i;o++){let a=n[o],c=r+a.length;c>=t&&(c>i&&(a=a.slice(0,i-r)),r<t&&(a=a.slice(t-r)),s?(e[e.length-1]+=a,s=!1):e.push(a)),r=c+1}return e}function mj(n,e,t){return dw(n,[""],e,t)}class p3{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof Eu?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,r=this.nodes[i],o=this.offsets[i],s=o>>1,a=r instanceof Eu?r.text.length:r.children.length;if(s==(t>0?a:0)){if(i==0)return this.done=!0,this.value="",this;t>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((o&1)==(t>0?0:1)){if(this.offsets[i]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(r instanceof Eu){let c=r.text[s+(t<0?-1:0)];if(this.offsets[i]+=t,c.length>Math.max(0,e))return this.value=e==0?c:t>0?c.slice(e):c.slice(0,c.length-e),this;e-=c.length}else{let c=r.children[s+(t<0?-1:0)];e>c.length?(e-=c.length,this.offsets[i]+=t):(t<0&&this.offsets[i]--,this.nodes.push(c),this.offsets.push(t>0?1:(c instanceof Eu?c.text.length:c.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class NJ{constructor(e,t,i){this.value="",this.done=!1,this.cursor=new p3(e,t>i?-1:1),this.pos=t>i?e.length:0,this.from=Math.min(t,i),this.to=Math.max(t,i)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let i=t<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:r}=this.cursor.next(e);return this.pos+=(r.length+e)*t,this.value=r.length<=i?r:t<0?r.slice(r.length-i):r.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class GJ{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:i,value:r}=this.inner.next(e);return t&&this.afterBreak?(this.value="",this.afterBreak=!1):t?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=r,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(ps.prototype[Symbol.iterator]=function(){return this.iter()},p3.prototype[Symbol.iterator]=NJ.prototype[Symbol.iterator]=GJ.prototype[Symbol.iterator]=function(){return this});class Wbe{constructor(e,t,i,r){this.from=e,this.to=t,this.number=i,this.text=r}get length(){return this.to-this.from}}function _x(n,e,t){return e=Math.max(0,Math.min(n.length,e)),[e,Math.max(e,Math.min(n.length,t))]}function bA(n,e,t=!0,i=!0){return jbe(n,e,t,i)}function Qbe(n){return n>=56320&&n<57344}function Ybe(n){return n>=55296&&n<56320}function gd(n,e){let t=n.charCodeAt(e);if(!Ybe(t)||e+1==n.length)return t;let i=n.charCodeAt(e+1);return Qbe(i)?(t-55296<<10)+(i-56320)+65536:t}function YP(n){return n<=65535?String.fromCharCode(n):(n-=65536,String.fromCharCode((n>>10)+55296,(n&1023)+56320))}function Fg(n){return n<65536?1:2}const E9=/\r\n?|\n/;var Rh=(function(n){return n[n.Simple=0]="Simple",n[n.TrackDel=1]="TrackDel",n[n.TrackBefore=2]="TrackBefore",n[n.TrackAfter=3]="TrackAfter",n})(Rh||(Rh={}));class o0{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t+1];e+=i<0?this.sections[t]:i}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,i=0,r=0;t<this.sections.length;){let o=this.sections[t++],s=this.sections[t++];s<0?(e(i,r,o),r+=o):r+=s,i+=o}}iterChangedRanges(e,t=!1){B9(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let i=this.sections[t++],r=this.sections[t++];r<0?e.push(i,r):e.push(r,i)}return new o0(e)}composeDesc(e){return this.empty?e:e.empty?this:WJ(this,e)}mapDesc(e,t=!1){return e.empty?this:O9(this,e,t)}mapPos(e,t=-1,i=Rh.Simple){let r=0,o=0;for(let s=0;s<this.sections.length;){let a=this.sections[s++],c=this.sections[s++],h=r+a;if(c<0){if(h>e)return o+(e-r);o+=a}else{if(i!=Rh.Simple&&h>=e&&(i==Rh.TrackDel&&r<e&&h>e||i==Rh.TrackBefore&&r<e||i==Rh.TrackAfter&&h>e))return null;if(h>e||h==e&&t<0&&!a)return e==r||t<0?o:o+c;o+=c}r=h}if(e>r)throw new RangeError(`Position ${e} is out of range for changeset of length ${r}`);return o}touchesRange(e,t=e){for(let i=0,r=0;i<this.sections.length&&r<=t;){let o=this.sections[i++],s=this.sections[i++],a=r+o;if(s>=0&&r<=t&&a>=e)return r<e&&a>t?"cover":!0;r=a}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let i=this.sections[t++],r=this.sections[t++];e+=(e?" ":"")+i+(r>=0?":"+r:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new o0(e)}static create(e){return new o0(e)}}class Sc extends o0{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return B9(this,(t,i,r,o,s)=>e=e.replace(r,r+(i-t),s),!1),e}mapDesc(e,t=!1){return O9(this,e,t,!0)}invert(e){let t=this.sections.slice(),i=[];for(let r=0,o=0;r<t.length;r+=2){let s=t[r],a=t[r+1];if(a>=0){t[r]=a,t[r+1]=s;let c=r>>1;for(;i.length<c;)i.push(ps.empty);i.push(s?e.slice(o,o+s):ps.empty)}o+=s}return new Sc(t,i)}compose(e){return this.empty?e:e.empty?this:WJ(this,e,!0)}map(e,t=!1){return e.empty?this:O9(this,e,t,!0)}iterChanges(e,t=!1){B9(this,e,t)}get desc(){return o0.create(this.sections)}filter(e){let t=[],i=[],r=[],o=new c4(this);e:for(let s=0,a=0;;){let c=s==e.length?1e9:e[s++];for(;a<c||a==c&&o.len==0;){if(o.done)break e;let m=Math.min(o.len,c-a);JA(r,m,-1);let v=o.ins==-1?-1:o.off==0?o.ins:0;JA(t,m,v),v>0&&Ny(i,t,o.text),o.forward(m),a+=m}let h=e[s++];for(;a<h;){if(o.done)break e;let m=Math.min(o.len,h-a);JA(t,m,-1),JA(r,m,o.ins==-1?-1:o.off==0?o.ins:0),o.forward(m),a+=m}}return{changes:new Sc(t,i),filtered:o0.create(r)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t],r=this.sections[t+1];r<0?e.push(i):r==0?e.push([i]):e.push([i].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,i){let r=[],o=[],s=0,a=null;function c(m=!1){if(!m&&!r.length)return;s<t&&JA(r,t-s,-1);let v=new Sc(r,o);a=a?a.compose(v.map(a)):v,r=[],o=[],s=0}function h(m){if(Array.isArray(m))for(let v of m)h(v);else if(m instanceof Sc){if(m.length!=t)throw new RangeError(`Mismatched change set length (got ${m.length}, expected ${t})`);c(),a=a?a.compose(m.map(a)):m}else{let{from:v,to:x=v,insert:E}=m;if(v>x||v<0||x>t)throw new RangeError(`Invalid change range ${v} to ${x} (in doc of length ${t})`);let D=E?typeof E=="string"?ps.of(E.split(i||E9)):E:ps.empty,P=D.length;if(v==x&&P==0)return;v<s&&c(),v>s&&JA(r,v-s,-1),JA(r,x-v,P),Ny(o,r,D),s=x}}return h(e),c(!a),a}static empty(e){return new Sc(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],i=[];for(let r=0;r<e.length;r++){let o=e[r];if(typeof o=="number")t.push(o,-1);else{if(!Array.isArray(o)||typeof o[0]!="number"||o.some((s,a)=>a&&typeof s!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(o.length==1)t.push(o[0],0);else{for(;i.length<r;)i.push(ps.empty);i[r]=ps.of(o.slice(1)),t.push(o[0],i[r].length)}}}return new Sc(t,i)}static createSet(e,t){return new Sc(e,t)}}function JA(n,e,t,i=!1){if(e==0&&t<=0)return;let r=n.length-2;r>=0&&t<=0&&t==n[r+1]?n[r]+=e:r>=0&&e==0&&n[r]==0?n[r+1]+=t:i?(n[r]+=e,n[r+1]+=t):n.push(e,t)}function Ny(n,e,t){if(t.length==0)return;let i=e.length-2>>1;if(i<n.length)n[n.length-1]=n[n.length-1].append(t);else{for(;n.length<i;)n.push(ps.empty);n.push(t)}}function B9(n,e,t){let i=n.inserted;for(let r=0,o=0,s=0;s<n.sections.length;){let a=n.sections[s++],c=n.sections[s++];if(c<0)r+=a,o+=a;else{let h=r,m=o,v=ps.empty;for(;h+=a,m+=c,c&&i&&(v=v.append(i[s-2>>1])),!(t||s==n.sections.length||n.sections[s+1]<0);)a=n.sections[s++],c=n.sections[s++];e(r,h,o,m,v),r=h,o=m}}}function O9(n,e,t,i=!1){let r=[],o=i?[]:null,s=new c4(n),a=new c4(e);for(let c=-1;;){if(s.done&&a.len||a.done&&s.len)throw new Error("Mismatched change set lengths");if(s.ins==-1&&a.ins==-1){let h=Math.min(s.len,a.len);JA(r,h,-1),s.forward(h),a.forward(h)}else if(a.ins>=0&&(s.ins<0||c==s.i||s.off==0&&(a.len<s.len||a.len==s.len&&!t))){let h=a.len;for(JA(r,a.ins,-1);h;){let m=Math.min(s.len,h);s.ins>=0&&c<s.i&&s.len<=m&&(JA(r,0,s.ins),o&&Ny(o,r,s.text),c=s.i),s.forward(m),h-=m}a.next()}else if(s.ins>=0){let h=0,m=s.len;for(;m;)if(a.ins==-1){let v=Math.min(m,a.len);h+=v,m-=v,a.forward(v)}else if(a.ins==0&&a.len<m)m-=a.len,a.next();else break;JA(r,h,c<s.i?s.ins:0),o&&c<s.i&&Ny(o,r,s.text),c=s.i,s.forward(s.len-m)}else{if(s.done&&a.done)return o?Sc.createSet(r,o):o0.create(r);throw new Error("Mismatched change set lengths")}}}function WJ(n,e,t=!1){let i=[],r=t?[]:null,o=new c4(n),s=new c4(e);for(let a=!1;;){if(o.done&&s.done)return r?Sc.createSet(i,r):o0.create(i);if(o.ins==0)JA(i,o.len,0,a),o.next();else if(s.len==0&&!s.done)JA(i,0,s.ins,a),r&&Ny(r,i,s.text),s.next();else{if(o.done||s.done)throw new Error("Mismatched change set lengths");{let c=Math.min(o.len2,s.len),h=i.length;if(o.ins==-1){let m=s.ins==-1?-1:s.off?0:s.ins;JA(i,c,m,a),r&&m&&Ny(r,i,s.text)}else s.ins==-1?(JA(i,o.off?0:o.len,c,a),r&&Ny(r,i,o.textBit(c))):(JA(i,o.off?0:o.len,s.off?0:s.ins,a),r&&!s.off&&Ny(r,i,s.text));a=(o.ins>c||s.ins>=0&&s.len>c)&&(a||i.length>h),o.forward2(c),s.forward(c)}}}}class c4{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?ps.empty:e[t]}textBit(e){let{inserted:t}=this.set,i=this.i-2>>1;return i>=t.length&&!e?ps.empty:t[i].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class Mb{constructor(e,t,i){this.from=e,this.to=t,this.flags=i}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,t=-1){let i,r;return this.empty?i=r=e.mapPos(this.from,t):(i=e.mapPos(this.from,1),r=e.mapPos(this.to,-1)),i==this.from&&r==this.to?this:new Mb(i,r,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return En.range(e,t);let i=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return En.range(this.anchor,i)}eq(e,t=!1){return this.anchor==e.anchor&&this.head==e.head&&(!t||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return En.range(e.anchor,e.head)}static create(e,t,i){return new Mb(e,t,i)}}class En{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:En.create(this.ranges.map(i=>i.map(e,t)),this.mainIndex)}eq(e,t=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let i=0;i<this.ranges.length;i++)if(!this.ranges[i].eq(e.ranges[i],t))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new En([this.main],0)}addRange(e,t=!0){return En.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let i=this.ranges.slice();return i[t]=e,En.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new En(e.ranges.map(t=>Mb.fromJSON(t)),e.main)}static single(e,t=e){return new En([En.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,r=0;r<e.length;r++){let o=e[r];if(o.empty?o.from<=i:o.from<i)return En.normalized(e.slice(),t);i=o.to}return new En(e,t)}static cursor(e,t=0,i,r){return Mb.create(e,e,(t==0?0:t<0?8:16)|(i==null?7:Math.min(6,i))|(r??16777215)<<6)}static range(e,t,i,r){let o=(i??16777215)<<6|(r==null?7:Math.min(6,r));return t<e?Mb.create(t,e,48|o):Mb.create(e,t,(t>e?8:0)|o)}static normalized(e,t=0){let i=e[t];e.sort((r,o)=>r.from-o.from),t=e.indexOf(i);for(let r=1;r<e.length;r++){let o=e[r],s=e[r-1];if(o.empty?o.from<=s.to:o.from<s.to){let a=s.from,c=Math.max(o.to,s.to);r<=t&&t--,e.splice(--r,2,o.anchor>o.head?En.range(c,a):En.range(a,c))}}return new En(e,t)}}function QJ(n,e){for(let t of n.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let qP=0;class Si{constructor(e,t,i,r,o){this.combine=e,this.compareInput=t,this.compare=i,this.isStatic=r,this.id=qP++,this.default=e([]),this.extensions=typeof o=="function"?o(this):o}get reader(){return this}static define(e={}){return new Si(e.combine||(t=>t),e.compareInput||((t,i)=>t===i),e.compare||(e.combine?(t,i)=>t===i:VP),!!e.static,e.enables)}of(e){return new fw([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new fw(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new fw(e,this,2,t)}from(e,t){return t||(t=i=>i),this.compute([e],i=>t(i.field(e)))}}function VP(n,e){return n==e||n.length==e.length&&n.every((t,i)=>t===e[i])}class fw{constructor(e,t,i,r){this.dependencies=e,this.facet=t,this.type=i,this.value=r,this.id=qP++}dynamicSlot(e){var t;let i=this.value,r=this.facet.compareInput,o=this.id,s=e[o]>>1,a=this.type==2,c=!1,h=!1,m=[];for(let v of this.dependencies)v=="doc"?c=!0:v=="selection"?h=!0:(((t=e[v.id])!==null&&t!==void 0?t:1)&1)==0&&m.push(e[v.id]);return{create(v){return v.values[s]=i(v),1},update(v,x){if(c&&x.docChanged||h&&(x.docChanged||x.selection)||I9(v,m)){let E=i(v);if(a?!gj(E,v.values[s],r):!r(E,v.values[s]))return v.values[s]=E,1}return 0},reconfigure:(v,x)=>{let E,D=x.config.address[o];if(D!=null){let P=bS(x,D);if(this.dependencies.every(F=>F instanceof Si?x.facet(F)===v.facet(F):F instanceof Ic?x.field(F,!1)==v.field(F,!1):!0)||(a?gj(E=i(v),P,r):r(E=i(v),P)))return v.values[s]=P,0}else E=i(v);return v.values[s]=E,1}}}}function gj(n,e,t){if(n.length!=e.length)return!1;for(let i=0;i<n.length;i++)if(!t(n[i],e[i]))return!1;return!0}function I9(n,e){let t=!1;for(let i of e)m3(n,i)&1&&(t=!0);return t}function qbe(n,e,t){let i=t.map(c=>n[c.id]),r=t.map(c=>c.type),o=i.filter(c=>!(c&1)),s=n[e.id]>>1;function a(c){let h=[];for(let m=0;m<i.length;m++){let v=bS(c,i[m]);if(r[m]==2)for(let x of v)h.push(x);else h.push(v)}return e.combine(h)}return{create(c){for(let h of i)m3(c,h);return c.values[s]=a(c),1},update(c,h){if(!I9(c,o))return 0;let m=a(c);return e.compare(m,c.values[s])?0:(c.values[s]=m,1)},reconfigure(c,h){let m=I9(c,i),v=h.config.facets[e.id],x=h.facet(e);if(v&&!m&&VP(t,v))return c.values[s]=x,0;let E=a(c);return e.compare(E,x)?(c.values[s]=x,0):(c.values[s]=E,1)}}}const d5=Si.define({static:!0});class Ic{constructor(e,t,i,r,o){this.id=e,this.createF=t,this.updateF=i,this.compareF=r,this.spec=o,this.provides=void 0}static define(e){let t=new Ic(qP++,e.create,e.update,e.compare||((i,r)=>i===r),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(d5).find(i=>i.field==this);return(t?.create||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:i=>(i.values[t]=this.create(i),1),update:(i,r)=>{let o=i.values[t],s=this.updateF(o,r);return this.compareF(o,s)?0:(i.values[t]=s,1)},reconfigure:(i,r)=>{let o=i.facet(d5),s=r.facet(d5),a;return(a=o.find(c=>c.field==this))&&a!=s.find(c=>c.field==this)?(i.values[t]=a.create(i),1):r.config.address[this.id]!=null?(i.values[t]=r.field(this),0):(i.values[t]=this.create(i),1)}}}init(e){return[this,d5.of({field:this,create:e})]}get extension(){return this}}const pb={lowest:4,low:3,default:2,high:1,highest:0};function v2(n){return e=>new YJ(e,n)}const cC={highest:v2(pb.highest),high:v2(pb.high),default:v2(pb.default),low:v2(pb.low),lowest:v2(pb.lowest)};class YJ{constructor(e,t){this.inner=e,this.prec=t}}class gM{of(e){return new k9(this,e)}reconfigure(e){return gM.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class k9{constructor(e,t){this.compartment=e,this.inner=t}}class vS{constructor(e,t,i,r,o,s){for(this.base=e,this.compartments=t,this.dynamicSlots=i,this.address=r,this.staticValues=o,this.facets=s,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,i){let r=[],o=Object.create(null),s=new Map;for(let x of Vbe(e,t,s))x instanceof Ic?r.push(x):(o[x.facet.id]||(o[x.facet.id]=[])).push(x);let a=Object.create(null),c=[],h=[];for(let x of r)a[x.id]=h.length<<1,h.push(E=>x.slot(E));let m=i?.config.facets;for(let x in o){let E=o[x],D=E[0].facet,P=m&&m[x]||[];if(E.every(F=>F.type==0))if(a[D.id]=c.length<<1|1,VP(P,E))c.push(i.facet(D));else{let F=D.combine(E.map(W=>W.value));c.push(i&&D.compare(F,i.facet(D))?i.facet(D):F)}else{for(let F of E)F.type==0?(a[F.id]=c.length<<1|1,c.push(F.value)):(a[F.id]=h.length<<1,h.push(W=>F.dynamicSlot(W)));a[D.id]=h.length<<1,h.push(F=>qbe(F,D,E))}}let v=h.map(x=>x(a));return new vS(e,s,v,a,c,o)}}function Vbe(n,e,t){let i=[[],[],[],[],[]],r=new Map;function o(s,a){let c=r.get(s);if(c!=null){if(c<=a)return;let h=i[c].indexOf(s);h>-1&&i[c].splice(h,1),s instanceof k9&&t.delete(s.compartment)}if(r.set(s,a),Array.isArray(s))for(let h of s)o(h,a);else if(s instanceof k9){if(t.has(s.compartment))throw new RangeError("Duplicate use of compartment in extensions");let h=e.get(s.compartment)||s.inner;t.set(s.compartment,h),o(h,a)}else if(s instanceof YJ)o(s.inner,s.prec);else if(s instanceof Ic)i[a].push(s),s.provides&&o(s.provides,a);else if(s instanceof fw)i[a].push(s),s.facet.extensions&&o(s.facet.extensions,pb.default);else{let h=s.extension;if(!h)throw new Error(`Unrecognized extension value in extension set (${s}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);o(h,a)}}return o(n,pb.default),i.reduce((s,a)=>s.concat(a))}function m3(n,e){if(e&1)return 2;let t=e>>1,i=n.status[t];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;n.status[t]=4;let r=n.computeSlot(n,n.config.dynamicSlots[t]);return n.status[t]=2|r}function bS(n,e){return e&1?n.config.staticValues[e>>1]:n.values[e>>1]}const qJ=Si.define(),T9=Si.define({combine:n=>n.some(e=>e),static:!0}),VJ=Si.define({combine:n=>n.length?n[0]:void 0,static:!0}),$J=Si.define(),HJ=Si.define(),ZJ=Si.define(),XJ=Si.define({combine:n=>n.length?n[0]:!1});class x1{constructor(e,t){this.type=e,this.value=t}static define(){return new $be}}class $be{of(e){return new x1(this,e)}}class Hbe{constructor(e){this.map=e}of(e){return new to(this,e)}}class to{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new to(this.type,t)}is(e){return this.type==e}static define(e={}){return new Hbe(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let i=[];for(let r of e){let o=r.map(t);o&&i.push(o)}return i}}to.reconfigure=to.define();to.appendConfig=to.define();class Oc{constructor(e,t,i,r,o,s){this.startState=e,this.changes=t,this.selection=i,this.effects=r,this.annotations=o,this.scrollIntoView=s,this._doc=null,this._state=null,i&&QJ(i,t.newLength),o.some(a=>a.type==Oc.time)||(this.annotations=o.concat(Oc.time.of(Date.now())))}static create(e,t,i,r,o,s){return new Oc(e,t,i,r,o,s)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(Oc.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}}Oc.time=x1.define();Oc.userEvent=x1.define();Oc.addToHistory=x1.define();Oc.remote=x1.define();function Zbe(n,e){let t=[];for(let i=0,r=0;;){let o,s;if(i<n.length&&(r==e.length||e[r]>=n[i]))o=n[i++],s=n[i++];else if(r<e.length)o=e[r++],s=e[r++];else return t;!t.length||t[t.length-1]<o?t.push(o,s):t[t.length-1]<s&&(t[t.length-1]=s)}}function JJ(n,e,t){var i;let r,o,s;return t?(r=e.changes,o=Sc.empty(e.changes.length),s=n.changes.compose(e.changes)):(r=e.changes.map(n.changes),o=n.changes.mapDesc(e.changes,!0),s=n.changes.compose(r)),{changes:s,selection:e.selection?e.selection.map(o):(i=n.selection)===null||i===void 0?void 0:i.map(r),effects:to.mapEffects(n.effects,r).concat(to.mapEffects(e.effects,o)),annotations:n.annotations.length?n.annotations.concat(e.annotations):e.annotations,scrollIntoView:n.scrollIntoView||e.scrollIntoView}}function R9(n,e,t){let i=e.selection,r=$_(e.annotations);return e.userEvent&&(r=r.concat(Oc.userEvent.of(e.userEvent))),{changes:e.changes instanceof Sc?e.changes:Sc.of(e.changes||[],t,n.facet(VJ)),selection:i&&(i instanceof En?i:En.single(i.anchor,i.head)),effects:$_(e.effects),annotations:r,scrollIntoView:!!e.scrollIntoView}}function eee(n,e,t){let i=R9(n,e.length?e[0]:{},n.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let o=1;o<e.length;o++){e[o].filter===!1&&(t=!1);let s=!!e[o].sequential;i=JJ(i,R9(n,e[o],s?i.changes.newLength:n.doc.length),s)}let r=Oc.create(n,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return Jbe(t?Xbe(r):r)}function Xbe(n){let e=n.startState,t=!0;for(let r of e.facet($J)){let o=r(n);if(o===!1){t=!1;break}Array.isArray(o)&&(t=t===!0?o:Zbe(t,o))}if(t!==!0){let r,o;if(t===!1)o=n.changes.invertedDesc,r=Sc.empty(e.doc.length);else{let s=n.changes.filter(t);r=s.changes,o=s.filtered.mapDesc(s.changes).invertedDesc}n=Oc.create(e,r,n.selection&&n.selection.map(o),to.mapEffects(n.effects,o),n.annotations,n.scrollIntoView)}let i=e.facet(HJ);for(let r=i.length-1;r>=0;r--){let o=i[r](n);o instanceof Oc?n=o:Array.isArray(o)&&o.length==1&&o[0]instanceof Oc?n=o[0]:n=eee(e,$_(o),!1)}return n}function Jbe(n){let e=n.startState,t=e.facet(ZJ),i=n;for(let r=t.length-1;r>=0;r--){let o=t[r](n);o&&Object.keys(o).length&&(i=JJ(i,R9(e,o,n.changes.newLength),!0))}return i==n?n:Oc.create(e,n.changes,n.selection,i.effects,i.annotations,i.scrollIntoView)}const eCe=[];function $_(n){return n==null?eCe:Array.isArray(n)?n:[n]}var Ml=(function(n){return n[n.Word=0]="Word",n[n.Space=1]="Space",n[n.Other=2]="Other",n})(Ml||(Ml={}));const tCe=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let D9;try{D9=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function nCe(n){if(D9)return D9.test(n);for(let e=0;e<n.length;e++){let t=n[e];if(/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||tCe.test(t)))return!0}return!1}function iCe(n){return e=>{if(!/\S/.test(e))return Ml.Space;if(nCe(e))return Ml.Word;for(let t=0;t<n.length;t++)if(e.indexOf(n[t])>-1)return Ml.Word;return Ml.Other}}class fs{constructor(e,t,i,r,o,s){this.config=e,this.doc=t,this.selection=i,this.values=r,this.status=e.statusTemplate.slice(),this.computeSlot=o,s&&(s._state=this);for(let a=0;a<this.config.dynamicSlots.length;a++)m3(this,a<<1);this.computeSlot=null}field(e,t=!0){let i=this.config.address[e.id];if(i==null){if(t)throw new RangeError("Field is not present in this state");return}return m3(this,i),bS(this,i)}update(...e){return eee(this,e,!0)}applyTransaction(e){let t=this.config,{base:i,compartments:r}=t;for(let a of e.effects)a.is(gM.reconfigure)?(t&&(r=new Map,t.compartments.forEach((c,h)=>r.set(h,c)),t=null),r.set(a.value.compartment,a.value.extension)):a.is(to.reconfigure)?(t=null,i=a.value):a.is(to.appendConfig)&&(t=null,i=$_(i).concat(a.value));let o;t?o=e.startState.values.slice():(t=vS.resolve(i,r,this),o=new fs(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(c,h)=>h.reconfigure(c,this),null).values);let s=e.startState.facet(T9)?e.newSelection:e.newSelection.asSingle();new fs(t,e.newDoc,s,o,(a,c)=>c.update(a,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:En.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,i=e(t.ranges[0]),r=this.changes(i.changes),o=[i.range],s=$_(i.effects);for(let a=1;a<t.ranges.length;a++){let c=e(t.ranges[a]),h=this.changes(c.changes),m=h.map(r);for(let x=0;x<a;x++)o[x]=o[x].map(m);let v=r.mapDesc(h,!0);o.push(c.range.map(v)),r=r.compose(m),s=to.mapEffects(s,m).concat(to.mapEffects($_(c.effects),v))}return{changes:r,selection:En.create(o,t.mainIndex),effects:s}}changes(e=[]){return e instanceof Sc?e:Sc.of(e,this.doc.length,this.facet(fs.lineSeparator))}toText(e){return ps.of(e.split(this.facet(fs.lineSeparator)||E9))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(m3(this,t),bS(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let r=e[i];r instanceof Ic&&this.config.address[r.id]!=null&&(t[i]=r.spec.toJSON(this.field(e[i]),this))}return t}static fromJSON(e,t={},i){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let r=[];if(i){for(let o in i)if(Object.prototype.hasOwnProperty.call(e,o)){let s=i[o],a=e[o];r.push(s.init(c=>s.spec.fromJSON(a,c)))}}return fs.create({doc:e.doc,selection:En.fromJSON(e.selection),extensions:t.extensions?r.concat([t.extensions]):r})}static create(e={}){let t=vS.resolve(e.extensions||[],new Map),i=e.doc instanceof ps?e.doc:ps.of((e.doc||"").split(t.staticFacet(fs.lineSeparator)||E9)),r=e.selection?e.selection instanceof En?e.selection:En.single(e.selection.anchor,e.selection.head):En.single(0);return QJ(r,i.length),t.staticFacet(T9)||(r=r.asSingle()),new fs(t,i,r,t.dynamicSlots.map(()=>null),(o,s)=>s.create(o),null)}get tabSize(){return this.facet(fs.tabSize)}get lineBreak(){return this.facet(fs.lineSeparator)||`
`}get readOnly(){return this.facet(XJ)}phrase(e,...t){for(let i of this.facet(fs.phrases))if(Object.prototype.hasOwnProperty.call(i,e)){e=i[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(i,r)=>{if(r=="$")return"$";let o=+(r||1);return!o||o>t.length?i:t[o-1]})),e}languageDataAt(e,t,i=-1){let r=[];for(let o of this.facet(qJ))for(let s of o(this,t,i))Object.prototype.hasOwnProperty.call(s,e)&&r.push(s[e]);return r}charCategorizer(e){return iCe(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:i,length:r}=this.doc.lineAt(e),o=this.charCategorizer(e),s=e-i,a=e-i;for(;s>0;){let c=bA(t,s,!1);if(o(t.slice(c,s))!=Ml.Word)break;s=c}for(;a<r;){let c=bA(t,a);if(o(t.slice(a,c))!=Ml.Word)break;a=c}return s==a?null:En.range(s+i,a+i)}}fs.allowMultipleSelections=T9;fs.tabSize=Si.define({combine:n=>n.length?n[0]:4});fs.lineSeparator=VJ;fs.readOnly=XJ;fs.phrases=Si.define({compare(n,e){let t=Object.keys(n),i=Object.keys(e);return t.length==i.length&&t.every(r=>n[r]==e[r])}});fs.languageData=qJ;fs.changeFilter=$J;fs.transactionFilter=HJ;fs.transactionExtender=ZJ;gM.reconfigure=to.define();function Om(n,e,t={}){let i={};for(let r of n)for(let o of Object.keys(r)){let s=r[o],a=i[o];if(a===void 0)i[o]=s;else if(!(a===s||s===void 0))if(Object.hasOwnProperty.call(t,o))i[o]=t[o](a,s);else throw new Error("Config merge conflict for field "+o)}for(let r in e)i[r]===void 0&&(i[r]=e[r]);return i}class $b{eq(e){return this==e}range(e,t=e){return P9.create(e,t,this)}}$b.prototype.startSide=$b.prototype.endSide=0;$b.prototype.point=!1;$b.prototype.mapMode=Rh.TrackDel;let P9=class tee{constructor(e,t,i){this.from=e,this.to=t,this.value=i}static create(e,t,i){return new tee(e,t,i)}};function U9(n,e){return n.from-e.from||n.value.startSide-e.value.startSide}class $P{constructor(e,t,i,r){this.from=e,this.to=t,this.value=i,this.maxPoint=r}get length(){return this.to[this.to.length-1]}findIndex(e,t,i,r=0){let o=i?this.to:this.from;for(let s=r,a=o.length;;){if(s==a)return s;let c=s+a>>1,h=o[c]-e||(i?this.value[c].endSide:this.value[c].startSide)-t;if(c==s)return h>=0?s:a;h>=0?a=c:s=c+1}}between(e,t,i,r){for(let o=this.findIndex(t,-1e9,!0),s=this.findIndex(i,1e9,!1,o);o<s;o++)if(r(this.from[o]+e,this.to[o]+e,this.value[o])===!1)return!1}map(e,t){let i=[],r=[],o=[],s=-1,a=-1;for(let c=0;c<this.value.length;c++){let h=this.value[c],m=this.from[c]+e,v=this.to[c]+e,x,E;if(m==v){let D=t.mapPos(m,h.startSide,h.mapMode);if(D==null||(x=E=D,h.startSide!=h.endSide&&(E=t.mapPos(m,h.endSide),E<x)))continue}else if(x=t.mapPos(m,h.startSide),E=t.mapPos(v,h.endSide),x>E||x==E&&h.startSide>0&&h.endSide<=0)continue;(E-x||h.endSide-h.startSide)<0||(s<0&&(s=x),h.point&&(a=Math.max(a,E-x)),i.push(h),r.push(x-s),o.push(E-s))}return{mapped:i.length?new $P(r,o,i,a):null,pos:s}}}class Vo{constructor(e,t,i,r){this.chunkPos=e,this.chunk=t,this.nextLayer=i,this.maxPoint=r}static create(e,t,i,r){return new Vo(e,t,i,r)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:i=!1,filterFrom:r=0,filterTo:o=this.length}=e,s=e.filter;if(t.length==0&&!s)return this;if(i&&(t=t.slice().sort(U9)),this.isEmpty)return t.length?Vo.of(t):this;let a=new nee(this,null,-1).goto(0),c=0,h=[],m=new y1;for(;a.value||c<t.length;)if(c<t.length&&(a.from-t[c].from||a.startSide-t[c].value.startSide)>=0){let v=t[c++];m.addInner(v.from,v.to,v.value)||h.push(v)}else a.rangeIndex==1&&a.chunkIndex<this.chunk.length&&(c==t.length||this.chunkEnd(a.chunkIndex)<t[c].from)&&(!s||r>this.chunkEnd(a.chunkIndex)||o<this.chunkPos[a.chunkIndex])&&m.addChunk(this.chunkPos[a.chunkIndex],this.chunk[a.chunkIndex])?a.nextChunk():((!s||r>a.to||o<a.from||s(a.from,a.to,a.value))&&(m.addInner(a.from,a.to,a.value)||h.push(P9.create(a.from,a.to,a.value))),a.next());return m.finishInner(this.nextLayer.isEmpty&&!h.length?Vo.empty:this.nextLayer.update({add:h,filter:s,filterFrom:r,filterTo:o}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],i=[],r=-1;for(let s=0;s<this.chunk.length;s++){let a=this.chunkPos[s],c=this.chunk[s],h=e.touchesRange(a,a+c.length);if(h===!1)r=Math.max(r,c.maxPoint),t.push(c),i.push(e.mapPos(a));else if(h===!0){let{mapped:m,pos:v}=c.map(a,e);m&&(r=Math.max(r,m.maxPoint),t.push(m),i.push(v))}}let o=this.nextLayer.map(e);return t.length==0?o:new Vo(i,t,o||Vo.empty,r)}between(e,t,i){if(!this.isEmpty){for(let r=0;r<this.chunk.length;r++){let o=this.chunkPos[r],s=this.chunk[r];if(t>=o&&e<=o+s.length&&s.between(o,e-o,t-o,i)===!1)return}this.nextLayer.between(e,t,i)}}iter(e=0){return A4.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return A4.from(e).goto(t)}static compare(e,t,i,r,o=-1){let s=e.filter(v=>v.maxPoint>0||!v.isEmpty&&v.maxPoint>=o),a=t.filter(v=>v.maxPoint>0||!v.isEmpty&&v.maxPoint>=o),c=yj(s,a,i),h=new b2(s,c,o),m=new b2(a,c,o);i.iterGaps((v,x,E)=>vj(h,v,m,x,E,r)),i.empty&&i.length==0&&vj(h,0,m,0,0,r)}static eq(e,t,i=0,r){r==null&&(r=999999999);let o=e.filter(m=>!m.isEmpty&&t.indexOf(m)<0),s=t.filter(m=>!m.isEmpty&&e.indexOf(m)<0);if(o.length!=s.length)return!1;if(!o.length)return!0;let a=yj(o,s),c=new b2(o,a,0).goto(i),h=new b2(s,a,0).goto(i);for(;;){if(c.to!=h.to||!K9(c.active,h.active)||c.point&&(!h.point||!c.point.eq(h.point)))return!1;if(c.to>r)return!0;c.next(),h.next()}}static spans(e,t,i,r,o=-1){let s=new b2(e,null,o).goto(t),a=t,c=s.openStart;for(;;){let h=Math.min(s.to,i);if(s.point){let m=s.activeForPoint(s.to),v=s.pointFrom<t?m.length+1:s.point.startSide<0?m.length:Math.min(m.length,c);r.point(a,h,s.point,m,v,s.pointRank),c=Math.min(s.openEnd(h),m.length)}else h>a&&(r.span(a,h,s.active,c),c=s.openEnd(h));if(s.to>i)return c+(s.point&&s.to>i?1:0);a=s.to,s.next()}}static of(e,t=!1){let i=new y1;for(let r of e instanceof P9?[e]:t?rCe(e):e)i.add(r.from,r.to,r.value);return i.finish()}static join(e){if(!e.length)return Vo.empty;let t=e[e.length-1];for(let i=e.length-2;i>=0;i--)for(let r=e[i];r!=Vo.empty;r=r.nextLayer)t=new Vo(r.chunkPos,r.chunk,t,Math.max(r.maxPoint,t.maxPoint));return t}}Vo.empty=new Vo([],[],null,-1);function rCe(n){if(n.length>1)for(let e=n[0],t=1;t<n.length;t++){let i=n[t];if(U9(e,i)>0)return n.slice().sort(U9);e=i}return n}Vo.empty.nextLayer=Vo.empty;class y1{finishChunk(e){this.chunks.push(new $P(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,i){this.addInner(e,t,i)||(this.nextLayer||(this.nextLayer=new y1)).add(e,t,i)}addInner(e,t,i){let r=e-this.lastTo||i.startSide-this.last.endSide;if(r<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return r<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=t,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let i=t.value.length-1;return this.last=t.value[i],this.lastFrom=t.from[i]+e,this.lastTo=t.to[i]+e,!0}finish(){return this.finishInner(Vo.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=Vo.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function yj(n,e,t){let i=new Map;for(let o of n)for(let s=0;s<o.chunk.length;s++)o.chunk[s].maxPoint<=0&&i.set(o.chunk[s],o.chunkPos[s]);let r=new Set;for(let o of e)for(let s=0;s<o.chunk.length;s++){let a=i.get(o.chunk[s]);a!=null&&(t?t.mapPos(a):a)==o.chunkPos[s]&&!t?.touchesRange(a,a+o.chunk[s].length)&&r.add(o.chunk[s])}return r}class nee{constructor(e,t,i,r=0){this.layer=e,this.skip=t,this.minPoint=i,this.rank=r}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,i){for(;this.chunkIndex<this.layer.chunk.length;){let r=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(r)||this.layer.chunkEnd(this.chunkIndex)<e||r.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let r=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!i||this.rangeIndex<r)&&this.setRangeIndex(r)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],i=e+t.from[this.rangeIndex];if(this.from=i,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class A4{constructor(e){this.heap=e}static from(e,t=null,i=-1){let r=[];for(let o=0;o<e.length;o++)for(let s=e[o];!s.isEmpty;s=s.nextLayer)s.maxPoint>=i&&r.push(new nee(s,t,i,o));return r.length==1?r[0]:new A4(r)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let i of this.heap)i.goto(e,t);for(let i=this.heap.length>>1;i>=0;i--)OO(this.heap,i);return this.next(),this}forward(e,t){for(let i of this.heap)i.forward(e,t);for(let i=this.heap.length>>1;i>=0;i--)OO(this.heap,i);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),OO(this.heap,0)}}}function OO(n,e){for(let t=n[e];;){let i=(e<<1)+1;if(i>=n.length)break;let r=n[i];if(i+1<n.length&&r.compare(n[i+1])>=0&&(r=n[i+1],i++),t.compare(r)<0)break;n[i]=t,n[e]=r,e=i}}class b2{constructor(e,t,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=A4.from(e,t,i)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){f5(this.active,e),f5(this.activeTo,e),f5(this.activeRank,e),this.minActive=bj(this.active,this.activeTo)}addActive(e){let t=0,{value:i,to:r,rank:o}=this.cursor;for(;t<this.activeRank.length&&(o-this.activeRank[t]||r-this.activeTo[t])>0;)t++;p5(this.active,t,i),p5(this.activeTo,t,r),p5(this.activeRank,t,o),e&&p5(e,t,this.cursor.from),this.minActive=bj(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let i=this.openStart<0?[]:null;for(;;){let r=this.minActive;if(r>-1&&(this.activeTo[r]-this.cursor.from||this.active[r].endSide-this.cursor.startSide)<0){if(this.activeTo[r]>e){this.to=this.activeTo[r],this.endSide=this.active[r].endSide;break}this.removeActive(r),i&&f5(i,r)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let o=this.cursor.value;if(!o.point)this.addActive(i),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=o,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=o.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){this.openStart=0;for(let r=i.length-1;r>=0&&i[r]<e;r--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&t.push(this.active[i]);return t.reverse()}openEnd(e){let t=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)t++;return t}}function vj(n,e,t,i,r,o){n.goto(e),t.goto(i);let s=i+r,a=i,c=i-e;for(;;){let h=n.to+c-t.to,m=h||n.endSide-t.endSide,v=m<0?n.to+c:t.to,x=Math.min(v,s);if(n.point||t.point?n.point&&t.point&&(n.point==t.point||n.point.eq(t.point))&&K9(n.activeForPoint(n.to),t.activeForPoint(t.to))||o.comparePoint(a,x,n.point,t.point):x>a&&!K9(n.active,t.active)&&o.compareRange(a,x,n.active,t.active),v>s)break;(h||n.openEnd!=t.openEnd)&&o.boundChange&&o.boundChange(v),a=v,m<=0&&n.next(),m>=0&&t.next()}}function K9(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!=e[t]&&!n[t].eq(e[t]))return!1;return!0}function f5(n,e){for(let t=e,i=n.length-1;t<i;t++)n[t]=n[t+1];n.pop()}function p5(n,e,t){for(let i=n.length-1;i>=e;i--)n[i+1]=n[i];n[e]=t}function bj(n,e){let t=-1,i=1e9;for(let r=0;r<e.length;r++)(e[r]-i||n[r].endSide-n[t].endSide)<0&&(t=r,i=e[r]);return t}function Gx(n,e,t=n.length){let i=0;for(let r=0;r<t&&r<n.length;)n.charCodeAt(r)==9?(i+=e-i%e,r++):(i++,r=bA(n,r));return i}function L9(n,e,t,i){for(let r=0,o=0;;){if(o>=e)return r;if(r==n.length)break;o+=n.charCodeAt(r)==9?t-o%t:1,r=bA(n,r)}return i===!0?-1:n.length}const F9="",Cj=typeof Symbol>"u"?"__"+F9:Symbol.for(F9),z9=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),_j=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class iv{constructor(e,t){this.rules=[];let{finish:i}=t||{};function r(s){return/^@/.test(s)?[s]:s.split(/,\s*/)}function o(s,a,c,h){let m=[],v=/^@(\w+)\b/.exec(s[0]),x=v&&v[1]=="keyframes";if(v&&a==null)return c.push(s[0]+";");for(let E in a){let D=a[E];if(/&/.test(E))o(E.split(/,\s*/).map(P=>s.map(F=>P.replace(/&/,F))).reduce((P,F)=>P.concat(F)),D,c);else if(D&&typeof D=="object"){if(!v)throw new RangeError("The value of a property ("+E+") should be a primitive value.");o(r(E),D,m,x)}else D!=null&&m.push(E.replace(/_.*/,"").replace(/[A-Z]/g,P=>"-"+P.toLowerCase())+": "+D+";")}(m.length||x)&&c.push((i&&!v&&!h?s.map(i):s).join(", ")+" {"+m.join(" ")+"}")}for(let s in e)o(r(s),e[s],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=_j[Cj]||1;return _j[Cj]=e+1,F9+e.toString(36)}static mount(e,t,i){let r=e[z9],o=i&&i.nonce;r?o&&r.setNonce(o):r=new oCe(e,o),r.mount(Array.isArray(t)?t:[t],e)}}let xj=new Map;class oCe{constructor(e,t){let i=e.ownerDocument||e,r=i.defaultView;if(!e.head&&e.adoptedStyleSheets&&r.CSSStyleSheet){let o=xj.get(i);if(o)return e[z9]=o;this.sheet=new r.CSSStyleSheet,xj.set(i,this)}else this.styleTag=i.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);this.modules=[],e[z9]=this}mount(e,t){let i=this.sheet,r=0,o=0;for(let s=0;s<e.length;s++){let a=e[s],c=this.modules.indexOf(a);if(c<o&&c>-1&&(this.modules.splice(c,1),o--,c=-1),c==-1){if(this.modules.splice(o++,0,a),i)for(let h=0;h<a.rules.length;h++)i.insertRule(a.rules[h],r++)}else{for(;o<c;)r+=this.modules[o++].rules.length;r+=a.rules.length,o++}}if(i)t.adoptedStyleSheets.indexOf(this.sheet)<0&&(t.adoptedStyleSheets=[this.sheet,...t.adoptedStyleSheets]);else{let s="";for(let c=0;c<this.modules.length;c++)s+=this.modules[c].getRules()+`
`;this.styleTag.textContent=s;let a=t.head||t;this.styleTag.parentNode!=a&&a.insertBefore(this.styleTag,a.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var rv={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},h4={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},sCe=typeof navigator<"u"&&/Mac/.test(navigator.platform),aCe=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var yA=0;yA<10;yA++)rv[48+yA]=rv[96+yA]=String(yA);for(var yA=1;yA<=24;yA++)rv[yA+111]="F"+yA;for(var yA=65;yA<=90;yA++)rv[yA]=String.fromCharCode(yA+32),h4[yA]=String.fromCharCode(yA);for(var IO in rv)h4.hasOwnProperty(IO)||(h4[IO]=rv[IO]);function lCe(n){var e=sCe&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||aCe&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?h4:rv)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}function Sa(){var n=arguments[0];typeof n=="string"&&(n=document.createElement(n));var e=1,t=arguments[1];if(t&&typeof t=="object"&&t.nodeType==null&&!Array.isArray(t)){for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var r=t[i];typeof r=="string"?n.setAttribute(i,r):r!=null&&(n[i]=r)}e++}for(;e<arguments.length;e++)iee(n,arguments[e]);return n}function iee(n,e){if(typeof e=="string")n.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)n.appendChild(e);else if(Array.isArray(e))for(var t=0;t<e.length;t++)iee(n,e[t]);else throw new RangeError("Unsupported child node: "+e)}let kh=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},j9=typeof document<"u"?document:{documentElement:{style:{}}};const N9=/Edge\/(\d+)/.exec(kh.userAgent),ree=/MSIE \d/.test(kh.userAgent),G9=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(kh.userAgent),c6=!!(ree||G9||N9),Mj=!c6&&/gecko\/(\d+)/i.test(kh.userAgent),kO=!c6&&/Chrome\/(\d+)/.exec(kh.userAgent),uCe="webkitFontSmoothing"in j9.documentElement.style,W9=!c6&&/Apple Computer/.test(kh.vendor),wj=W9&&(/Mobile\/\w+/.test(kh.userAgent)||kh.maxTouchPoints>2);var gi={mac:wj||/Mac/.test(kh.platform),windows:/Win/.test(kh.platform),linux:/Linux|X11/.test(kh.platform),ie:c6,ie_version:ree?j9.documentMode||6:G9?+G9[1]:N9?+N9[1]:0,gecko:Mj,gecko_version:Mj?+(/Firefox\/(\d+)/.exec(kh.userAgent)||[0,0])[1]:0,chrome:!!kO,chrome_version:kO?+kO[1]:0,ios:wj,android:/Android\b/.test(kh.userAgent),webkit_version:uCe?+(/\bAppleWebKit\/(\d+)/.exec(kh.userAgent)||[0,0])[1]:0,safari:W9,safari_version:W9?+(/\bVersion\/(\d+(\.\d+)?)/.exec(kh.userAgent)||[0,0])[1]:0,tabSize:j9.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};function d4(n){let e;return n.nodeType==11?e=n.getSelection?n:n.ownerDocument:e=n,e.getSelection()}function Q9(n,e){return e?n==e||n.contains(e.nodeType!=1?e.parentNode:e):!1}function pw(n,e){if(!e.anchorNode)return!1;try{return Q9(n,e.anchorNode)}catch{return!1}}function f4(n){return n.nodeType==3?Zb(n,0,n.nodeValue.length).getClientRects():n.nodeType==1?n.getClientRects():[]}function g3(n,e,t,i){return t?Sj(n,e,t,i,-1)||Sj(n,e,t,i,1):!1}function Hb(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e}function CS(n){return n.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(n.nodeName)}function Sj(n,e,t,i,r){for(;;){if(n==t&&e==i)return!0;if(e==(r<0?0:a0(n))){if(n.nodeName=="DIV")return!1;let o=n.parentNode;if(!o||o.nodeType!=1)return!1;e=Hb(n)+(r<0?0:1),n=o}else if(n.nodeType==1){if(n=n.childNodes[e+(r<0?-1:0)],n.nodeType==1&&n.contentEditable=="false")return!1;e=r<0?a0(n):0}else return!1}}function a0(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function A6(n,e){let t=e?n.left:n.right;return{left:t,right:t,top:n.top,bottom:n.bottom}}function cCe(n){let e=n.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.innerWidth,top:0,bottom:n.innerHeight}}function oee(n,e){let t=e.width/n.offsetWidth,i=e.height/n.offsetHeight;return(t>.995&&t<1.005||!isFinite(t)||Math.abs(e.width-n.offsetWidth)<1)&&(t=1),(i>.995&&i<1.005||!isFinite(i)||Math.abs(e.height-n.offsetHeight)<1)&&(i=1),{scaleX:t,scaleY:i}}function ACe(n,e,t,i,r,o,s,a){let c=n.ownerDocument,h=c.defaultView||window;for(let m=n,v=!1;m&&!v;)if(m.nodeType==1){let x,E=m==c.body,D=1,P=1;if(E)x=cCe(h);else{if(/^(fixed|sticky)$/.test(getComputedStyle(m).position)&&(v=!0),m.scrollHeight<=m.clientHeight&&m.scrollWidth<=m.clientWidth){m=m.assignedSlot||m.parentNode;continue}let q=m.getBoundingClientRect();({scaleX:D,scaleY:P}=oee(m,q)),x={left:q.left,right:q.left+m.clientWidth*D,top:q.top,bottom:q.top+m.clientHeight*P}}let F=0,W=0;if(r=="nearest")e.top<x.top?(W=e.top-(x.top+s),t>0&&e.bottom>x.bottom+W&&(W=e.bottom-x.bottom+s)):e.bottom>x.bottom&&(W=e.bottom-x.bottom+s,t<0&&e.top-W<x.top&&(W=e.top-(x.top+s)));else{let q=e.bottom-e.top,V=x.bottom-x.top;W=(r=="center"&&q<=V?e.top+q/2-V/2:r=="start"||r=="center"&&t<0?e.top-s:e.bottom-V+s)-x.top}if(i=="nearest"?e.left<x.left?(F=e.left-(x.left+o),t>0&&e.right>x.right+F&&(F=e.right-x.right+o)):e.right>x.right&&(F=e.right-x.right+o,t<0&&e.left<x.left+F&&(F=e.left-(x.left+o))):F=(i=="center"?e.left+(e.right-e.left)/2-(x.right-x.left)/2:i=="start"==a?e.left-o:e.right-(x.right-x.left)+o)-x.left,F||W)if(E)h.scrollBy(F,W);else{let q=0,V=0;if(W){let H=m.scrollTop;m.scrollTop+=W/P,V=(m.scrollTop-H)*P}if(F){let H=m.scrollLeft;m.scrollLeft+=F/D,q=(m.scrollLeft-H)*D}e={left:e.left-q,top:e.top-V,right:e.right-q,bottom:e.bottom-V},q&&Math.abs(q-F)<1&&(i="nearest"),V&&Math.abs(V-W)<1&&(r="nearest")}if(E)break;(e.top<x.top||e.bottom>x.bottom||e.left<x.left||e.right>x.right)&&(e={left:Math.max(e.left,x.left),right:Math.min(e.right,x.right),top:Math.max(e.top,x.top),bottom:Math.min(e.bottom,x.bottom)}),m=m.assignedSlot||m.parentNode}else if(m.nodeType==11)m=m.host;else break}function hCe(n){let e=n.ownerDocument,t,i;for(let r=n.parentNode;r&&!(r==e.body||t&&i);)if(r.nodeType==1)!i&&r.scrollHeight>r.clientHeight&&(i=r),!t&&r.scrollWidth>r.clientWidth&&(t=r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;return{x:t,y:i}}class dCe{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:i}=e;this.set(t,Math.min(e.anchorOffset,t?a0(t):0),i,Math.min(e.focusOffset,i?a0(i):0))}set(e,t,i,r){this.anchorNode=e,this.anchorOffset=t,this.focusNode=i,this.focusOffset=r}}let Ab=null;gi.safari&&gi.safari_version>=26&&(Ab=!1);function see(n){if(n.setActive)return n.setActive();if(Ab)return n.focus(Ab);let e=[];for(let t=n;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(n.focus(Ab==null?{get preventScroll(){return Ab={preventScroll:!0},!0}}:void 0),!Ab){Ab=!1;for(let t=0;t<e.length;){let i=e[t++],r=e[t++],o=e[t++];i.scrollTop!=r&&(i.scrollTop=r),i.scrollLeft!=o&&(i.scrollLeft=o)}}}let Ej;function Zb(n,e,t=e){let i=Ej||(Ej=document.createRange());return i.setEnd(n,t),i.setStart(n,e),i}function H_(n,e,t,i){let r={key:e,code:e,keyCode:t,which:t,cancelable:!0};i&&({altKey:r.altKey,ctrlKey:r.ctrlKey,shiftKey:r.shiftKey,metaKey:r.metaKey}=i);let o=new KeyboardEvent("keydown",r);o.synthetic=!0,n.dispatchEvent(o);let s=new KeyboardEvent("keyup",r);return s.synthetic=!0,n.dispatchEvent(s),o.defaultPrevented||s.defaultPrevented}function fCe(n){for(;n;){if(n&&(n.nodeType==9||n.nodeType==11&&n.host))return n;n=n.assignedSlot||n.parentNode}return null}function aee(n){for(;n.attributes.length;)n.removeAttributeNode(n.attributes[0])}function pCe(n,e){let t=e.focusNode,i=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=i)return!1;for(i=Math.min(i,a0(t));;)if(i){if(t.nodeType!=1)return!1;let r=t.childNodes[i-1];r.contentEditable=="false"?i--:(t=r,i=a0(t))}else{if(t==n)return!0;i=Hb(t),t=t.parentNode}}function lee(n){return n.scrollTop>Math.max(1,n.scrollHeight-n.clientHeight-4)}function uee(n,e){for(let t=n,i=e;;){if(t.nodeType==3&&i>0)return{node:t,offset:i};if(t.nodeType==1&&i>0){if(t.contentEditable=="false")return null;t=t.childNodes[i-1],i=a0(t)}else if(t.parentNode&&!CS(t))i=Hb(t),t=t.parentNode;else return null}}function cee(n,e){for(let t=n,i=e;;){if(t.nodeType==3&&i<t.nodeValue.length)return{node:t,offset:i};if(t.nodeType==1&&i<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[i],i=0}else if(t.parentNode&&!CS(t))i=Hb(t)+1,t=t.parentNode;else return null}}class th{constructor(e,t,i=!0){this.node=e,this.offset=t,this.precise=i}static before(e,t){return new th(e.parentNode,Hb(e),t)}static after(e,t){return new th(e.parentNode,Hb(e)+1,t)}}const HP=[];class Aa{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let i of this.children){if(i==e)return t;t+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,t){if(this.flags&2){let i=this.dom,r=null,o;for(let s of this.children){if(s.flags&7){if(!s.dom&&(o=r?r.nextSibling:i.firstChild)){let a=Aa.get(o);(!a||!a.parent&&a.canReuseDOM(s))&&s.reuseDOM(o)}s.sync(e,t),s.flags&=-8}if(o=r?r.nextSibling:i.firstChild,t&&!t.written&&t.node==i&&o!=s.dom&&(t.written=!0),s.dom.parentNode==i)for(;o&&o!=s.dom;)o=Bj(o);else i.insertBefore(s.dom,o);r=s.dom}for(o=r?r.nextSibling:i.firstChild,o&&t&&t.node==i&&(t.written=!0);o;)o=Bj(o)}else if(this.flags&1)for(let i of this.children)i.flags&7&&(i.sync(e,t),i.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,t){let i;if(e==this.dom)i=this.dom.childNodes[t];else{let r=a0(e)==0?0:t==0?-1:1;for(;;){let o=e.parentNode;if(o==this.dom)break;r==0&&o.firstChild!=o.lastChild&&(e==o.firstChild?r=-1:r=1),e=o}r<0?i=e:i=e.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!Aa.get(i);)i=i.nextSibling;if(!i)return this.length;for(let r=0,o=0;;r++){let s=this.children[r];if(s.dom==i)return o;o+=s.length+s.breakAfter}}domBoundsAround(e,t,i=0){let r=-1,o=-1,s=-1,a=-1;for(let c=0,h=i,m=i;c<this.children.length;c++){let v=this.children[c],x=h+v.length;if(h<e&&x>t)return v.domBoundsAround(e,t,h);if(x>=e&&r==-1&&(r=c,o=h),h>t&&v.dom.parentNode==this.dom){s=c,a=m;break}m=x,h=x+v.breakAfter}return{from:o,to:a<0?i+this.length:a,startDOM:(r?this.children[r-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:s<this.children.length&&s>=0?this.children[s].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.flags|=2),t.flags&1)return;t.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,i=HP){this.markDirty();for(let r=e;r<t;r++){let o=this.children[r];o.parent==this&&i.indexOf(o)<0&&o.destroy()}i.length<250?this.children.splice(e,t-e,...i):this.children=[].concat(this.children.slice(0,e),i,this.children.slice(t));for(let r=0;r<i.length;r++)i[r].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new Aee(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,t,i,r,o,s){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}Aa.prototype.breakAfter=0;function Bj(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class Aee{constructor(e,t,i){this.children=e,this.pos=t,this.i=i,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}}function hee(n,e,t,i,r,o,s,a,c){let{children:h}=n,m=h.length?h[e]:null,v=o.length?o[o.length-1]:null,x=v?v.breakAfter:s;if(!(e==i&&m&&!s&&!x&&o.length<2&&m.merge(t,r,o.length?v:null,t==0,a,c))){if(i<h.length){let E=h[i];E&&(r<E.length||E.breakAfter&&v?.breakAfter)?(e==i&&(E=E.split(r),r=0),!x&&v&&E.merge(0,r,v,!0,0,c)?o[o.length-1]=E:((r||E.children.length&&!E.children[0].length)&&E.merge(0,r,null,!1,0,c),o.push(E))):E?.breakAfter&&(v?v.breakAfter=1:s=1),i++}for(m&&(m.breakAfter=s,t>0&&(!s&&o.length&&m.merge(t,m.length,o[0],!1,a,0)?m.breakAfter=o.shift().breakAfter:(t<m.length||m.children.length&&m.children[m.children.length-1].length==0)&&m.merge(t,m.length,null,!1,a,0),e++));e<i&&o.length;)if(h[i-1].become(o[o.length-1]))i--,o.pop(),c=o.length?0:a;else if(h[e].become(o[0]))e++,o.shift(),a=o.length?0:c;else break;!o.length&&e&&i<h.length&&!h[e-1].breakAfter&&h[i].merge(0,0,h[e-1],!1,a,c)&&e--,(e<i||o.length)&&n.replaceChildren(e,i,o)}}function dee(n,e,t,i,r,o){let s=n.childCursor(),{i:a,off:c}=s.findPos(t,1),{i:h,off:m}=s.findPos(e,-1),v=e-t;for(let x of i)v+=x.length;n.length+=v,hee(n,h,m,a,c,i,0,r,o)}const mCe=256;class Cm extends Aa{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,t,i){return this.flags&8||i&&(!(i instanceof Cm)||this.length-(t-e)+i.length>mCe||i.flags&8)?!1:(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new Cm(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t.flags|=this.flags&8,t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new th(this.dom,e)}domBoundsAround(e,t,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return gCe(this.dom,e,t)}}class v1 extends Aa{constructor(e,t=[],i=0){super(),this.mark=e,this.children=t,this.length=i;for(let r of t)r.setParent(this)}setAttrs(e){if(aee(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,t){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,i,r,o,s){return i&&(!(i instanceof v1&&i.mark.eq(this.mark))||e&&o<=0||t<this.length&&s<=0)?!1:(dee(this,e,t,i?i.children.slice():[],o-1,s-1),this.markDirty(),!0)}split(e){let t=[],i=0,r=-1,o=0;for(let a of this.children){let c=i+a.length;c>e&&t.push(i<e?a.split(e-i):a),r<0&&i>=e&&(r=o),i=c,o++}let s=this.length-e;return this.length=e,r>-1&&(this.children.length=r,this.markDirty()),new v1(this.mark,t,s)}domAtPos(e){return fee(this,e)}coordsAt(e,t){return mee(this,e,t)}}function gCe(n,e,t){let i=n.nodeValue.length;e>i&&(e=i);let r=e,o=e,s=0;e==0&&t<0||e==i&&t>=0?gi.chrome||gi.gecko||(e?(r--,s=1):o<i&&(o++,s=-1)):t<0?r--:o<i&&o++;let a=Zb(n,r,o).getClientRects();if(!a.length)return null;let c=a[(s?s<0:t>=0)?0:a.length-1];return gi.safari&&!s&&c.width==0&&(c=Array.prototype.find.call(a,h=>h.width)||c),s?A6(c,s<0):c||null}class Gy extends Aa{static create(e,t,i){return new Gy(e,t,i)}constructor(e,t,i){super(),this.widget=e,this.length=t,this.side=i,this.prevWidget=null}split(e){let t=Gy.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,t,i,r,o,s){return i&&(!(i instanceof Gy)||!this.widget.compare(i.widget)||e>0&&o<=0||t<this.length&&s<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}become(e){return e instanceof Gy&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return ps.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,i=t&&t.state.doc,r=this.posAtStart;return i?i.slice(r,r+this.length):ps.empty}domAtPos(e){return(this.length?e==0:this.side>0)?th.before(this.dom):th.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let i=this.widget.coordsAt(this.dom,e,t);if(i)return i;let r=this.dom.getClientRects(),o=null;if(!r.length)return null;let s=this.side?this.side<0:e>0;for(let a=s?r.length-1:0;o=r[a],!(e>0?a==0:a==r.length-1||o.top<o.bottom);a+=s?-1:1);return A6(o,!s)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class xx extends Aa{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof xx&&e.side==this.side}split(){return new xx(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?th.before(this.dom):th.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return ps.empty}get isHidden(){return!0}}Cm.prototype.children=Gy.prototype.children=xx.prototype.children=HP;function fee(n,e){let t=n.dom,{children:i}=n,r=0;for(let o=0;r<i.length;r++){let s=i[r],a=o+s.length;if(!(a==o&&s.getSide()<=0)){if(e>o&&e<a&&s.dom.parentNode==t)return s.domAtPos(e-o);if(e<=o)break;o=a}}for(let o=r;o>0;o--){let s=i[o-1];if(s.dom.parentNode==t)return s.domAtPos(s.length)}for(let o=r;o<i.length;o++){let s=i[o];if(s.dom.parentNode==t)return s.domAtPos(0)}return new th(t,0)}function pee(n,e,t){let i,{children:r}=n;t>0&&e instanceof v1&&r.length&&(i=r[r.length-1])instanceof v1&&i.mark.eq(e.mark)?pee(i,e.children[0],t-1):(r.push(e),e.setParent(n)),n.length+=e.length}function mee(n,e,t){let i=null,r=-1,o=null,s=-1;function a(h,m){for(let v=0,x=0;v<h.children.length&&x<=m;v++){let E=h.children[v],D=x+E.length;D>=m&&(E.children.length?a(E,m-x):(!o||o.isHidden&&(t>0||vCe(o,E)))&&(D>m||x==D&&E.getSide()>0)?(o=E,s=m-x):(x<m||x==D&&E.getSide()<0&&!E.isHidden)&&(i=E,r=m-x)),x=D}}a(n,e);let c=(t<0?i:o)||i||o;return c?c.coordsAt(Math.max(0,c==i?r:s),t):yCe(n)}function yCe(n){let e=n.dom.lastChild;if(!e)return n.dom.getBoundingClientRect();let t=f4(e);return t[t.length-1]||null}function vCe(n,e){let t=n.coordsAt(0,1),i=e.coordsAt(0,1);return t&&i&&i.top<t.bottom}function Y9(n,e){for(let t in n)t=="class"&&e.class?e.class+=" "+n.class:t=="style"&&e.style?e.style+=";"+n.style:e[t]=n[t];return e}const Oj=Object.create(null);function _S(n,e,t){if(n==e)return!0;n||(n=Oj),e||(e=Oj);let i=Object.keys(n),r=Object.keys(e);if(i.length-(t&&i.indexOf(t)>-1?1:0)!=r.length-(t&&r.indexOf(t)>-1?1:0))return!1;for(let o of i)if(o!=t&&(r.indexOf(o)==-1||n[o]!==e[o]))return!1;return!0}function q9(n,e,t){let i=!1;if(e)for(let r in e)t&&r in t||(i=!0,r=="style"?n.style.cssText="":n.removeAttribute(r));if(t)for(let r in t)e&&e[r]==t[r]||(i=!0,r=="style"?n.style.cssText=t[r]:n.setAttribute(r,t[r]));return i}function bCe(n){let e=Object.create(null);for(let t=0;t<n.attributes.length;t++){let i=n.attributes[t];e[i.name]=i.value}return e}class Av{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,i){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var Uh=(function(n){return n[n.Text=0]="Text",n[n.WidgetBefore=1]="WidgetBefore",n[n.WidgetAfter=2]="WidgetAfter",n[n.WidgetRange=3]="WidgetRange",n})(Uh||(Uh={}));class wr extends $b{constructor(e,t,i,r){super(),this.startSide=e,this.endSide=t,this.widget=i,this.spec=r}get heightRelevant(){return!1}static mark(e){return new yM(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),i=!!e.block;return t+=i&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new ov(e,t,t,i,e.widget||null,!1)}static replace(e){let t=!!e.block,i,r;if(e.isBlockGap)i=-5e8,r=4e8;else{let{start:o,end:s}=gee(e,t);i=(o?t?-3e8:-1:5e8)-1,r=(s?t?2e8:1:-6e8)+1}return new ov(e,i,r,t,e.widget||null,!0)}static line(e){return new vM(e)}static set(e,t=!1){return Vo.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}wr.none=Vo.empty;class yM extends wr{constructor(e){let{start:t,end:i}=gee(e);super(t?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var t,i;return this==e||e instanceof yM&&this.tagName==e.tagName&&(this.class||((t=this.attrs)===null||t===void 0?void 0:t.class))==(e.class||((i=e.attrs)===null||i===void 0?void 0:i.class))&&_S(this.attrs,e.attrs,"class")}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}yM.prototype.point=!1;class vM extends wr{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof vM&&this.spec.class==e.spec.class&&_S(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}vM.prototype.mapMode=Rh.TrackBefore;vM.prototype.point=!0;class ov extends wr{constructor(e,t,i,r,o,s){super(t,i,o,e),this.block=r,this.isReplace=s,this.mapMode=r?t<=0?Rh.TrackBefore:Rh.TrackAfter:Rh.TrackDel}get type(){return this.startSide!=this.endSide?Uh.WidgetRange:this.startSide<=0?Uh.WidgetBefore:Uh.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof ov&&CCe(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}ov.prototype.point=!0;function gee(n,e=!1){let{inclusiveStart:t,inclusiveEnd:i}=n;return t==null&&(t=n.inclusive),i==null&&(i=n.inclusive),{start:t??e,end:i??e}}function CCe(n,e){return n==e||!!(n&&e&&n.compare(e))}function mw(n,e,t,i=0){let r=t.length-1;r>=0&&t[r]+i>=n?t[r]=Math.max(t[r],e):t.push(n,e)}class Vu extends Aa{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,i,r,o,s){if(i){if(!(i instanceof Vu))return!1;this.dom||i.transferDOM(this)}return r&&this.setDeco(i?i.attrs:null),dee(this,e,t,i?i.children.slice():[],o,s),!0}split(e){let t=new Vu;if(t.breakAfter=this.breakAfter,this.length==0)return t;let{i,off:r}=this.childPos(e);r&&(t.append(this.children[i].split(r),0),this.children[i].merge(r,this.children[i].length,null,!1,0,0),i++);for(let o=i;o<this.children.length;o++)t.append(this.children[o],0);for(;i>0&&this.children[i-1].length==0;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){_S(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){pee(this,e,t)}addLineDeco(e){let t=e.spec.attributes,i=e.spec.class;t&&(this.attrs=Y9(t,this.attrs||{})),i&&(this.attrs=Y9({class:i},this.attrs||{}))}domAtPos(e){return fee(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,t){var i;this.dom?this.flags&4&&(aee(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(q9(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let r=this.dom.lastChild;for(;r&&Aa.get(r)instanceof v1;)r=r.lastChild;if(!r||!this.length||r.nodeName!="BR"&&((i=Aa.get(r))===null||i===void 0?void 0:i.isEditable)==!1&&(!gi.ios||!this.children.some(o=>o instanceof Cm))){let o=document.createElement("BR");o.cmIgnore=!0,this.dom.appendChild(o)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,t;for(let i of this.children){if(!(i instanceof Cm)||/[^ -~]/.test(i.text))return null;let r=f4(i.dom);if(r.length!=1)return null;e+=r[0].width,t=r[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:t}:null}coordsAt(e,t){let i=mee(this,e,t);if(!this.children.length&&i&&this.parent){let{heightOracle:r}=this.parent.view.viewState,o=i.bottom-i.top;if(Math.abs(o-r.lineHeight)<2&&r.textHeight<o){let s=(o-r.textHeight)/2;return{top:i.top+s,bottom:i.bottom-s,left:i.left,right:i.left}}}return i}become(e){return e instanceof Vu&&this.children.length==0&&e.children.length==0&&_S(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,t){for(let i=0,r=0;i<e.children.length;i++){let o=e.children[i],s=r+o.length;if(s>=t){if(o instanceof Vu)return o;if(s>t)break}r=s+o.breakAfter}return null}}class h1 extends Aa{constructor(e,t,i){super(),this.widget=e,this.length=t,this.deco=i,this.breakAfter=0,this.prevWidget=null}merge(e,t,i,r,o,s){return i&&(!(i instanceof h1)||!this.widget.compare(i.widget)||e>0&&o<=0||t<this.length&&s<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}domAtPos(e){return e==0?th.before(this.dom):th.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let i=new h1(this.widget,t,this.deco);return i.breakAfter=this.breakAfter,i}get children(){return HP}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):ps.empty}domBoundsAround(){return null}become(e){return e instanceof h1&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,t){let i=this.widget.coordsAt(this.dom,e,t);return i||(this.widget instanceof V9?null:A6(this.dom.getBoundingClientRect(),this.length?e==0:t<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:t,endSide:i}=this.deco;return t==i?!1:e<0?t<0:i>0}}class V9 extends Av{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class y3{constructor(e,t,i,r){this.doc=e,this.pos=t,this.end=i,this.disallowBlockEffectsFor=r,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof h1&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new Vu),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(m5(new xx(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof h1)&&this.getLine()}buildText(e,t,i){for(;e>0;){if(this.textOff==this.text.length){let{value:s,lineBreak:a,done:c}=this.cursor.next(this.skip);if(this.skip=0,c)throw new Error("Ran out of text content when drawing inline views");if(a){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=s,this.textOff=0}let r=Math.min(this.text.length-this.textOff,e),o=Math.min(r,512);this.flushBuffer(t.slice(t.length-i)),this.getLine().append(m5(new Cm(this.text.slice(this.textOff,this.textOff+o)),t),i),this.atCursorPos=!0,this.textOff+=o,e-=o,i=r<=o?0:t.length}}span(e,t,i,r){this.buildText(t-e,i,r),this.pos=t,this.openStart<0&&(this.openStart=r)}point(e,t,i,r,o,s){if(this.disallowBlockEffectsFor[s]&&i instanceof ov){if(i.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let a=t-e;if(i instanceof ov)if(i.block)i.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new h1(i.widget||Mx.block,a,i));else{let c=Gy.create(i.widget||Mx.inline,a,a?0:i.startSide),h=this.atCursorPos&&!c.isEditable&&o<=r.length&&(e<t||i.startSide>0),m=!c.isEditable&&(e<t||o>r.length||i.startSide<=0),v=this.getLine();this.pendingBuffer==2&&!h&&!c.isEditable&&(this.pendingBuffer=0),this.flushBuffer(r),h&&(v.append(m5(new xx(1),r),o),o=r.length+Math.max(0,o-r.length)),v.append(m5(c,r),o),this.atCursorPos=m,this.pendingBuffer=m?e<t||o>r.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=r.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);a&&(this.textOff+a<=this.text.length?this.textOff+=a:(this.skip+=a-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=o)}static build(e,t,i,r,o){let s=new y3(e,t,i,o);return s.openEnd=Vo.spans(r,t,i,s),s.openStart<0&&(s.openStart=s.openEnd),s.finish(s.openEnd),s}}function m5(n,e){for(let t of e)n=new v1(t,[n],n.length);return n}class Mx extends Av{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}Mx.inline=new Mx("span");Mx.block=new Mx("div");var il=(function(n){return n[n.LTR=0]="LTR",n[n.RTL=1]="RTL",n})(il||(il={}));const Xb=il.LTR,ZP=il.RTL;function yee(n){let e=[];for(let t=0;t<n.length;t++)e.push(1<<+n[t]);return e}const _Ce=yee("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),xCe=yee("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),$9=Object.create(null),Eg=[];for(let n of["()","[]","{}"]){let e=n.charCodeAt(0),t=n.charCodeAt(1);$9[e]=t,$9[t]=-e}function vee(n){return n<=247?_Ce[n]:1424<=n&&n<=1524?2:1536<=n&&n<=1785?xCe[n-1536]:1774<=n&&n<=2220?4:8192<=n&&n<=8204?256:64336<=n&&n<=65023?4:1}const MCe=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Wy{get dir(){return this.level%2?ZP:Xb}constructor(e,t,i){this.from=e,this.to=t,this.level=i}side(e,t){return this.dir==t==e?this.to:this.from}forward(e,t){return e==(this.dir==t)}static find(e,t,i,r){let o=-1;for(let s=0;s<e.length;s++){let a=e[s];if(a.from<=t&&a.to>=t){if(a.level==i)return s;(o<0||(r!=0?r<0?a.from<t:a.to>t:e[o].level>a.level))&&(o=s)}}if(o<0)throw new RangeError("Index out of range");return o}}function bee(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++){let i=n[t],r=e[t];if(i.from!=r.from||i.to!=r.to||i.direction!=r.direction||!bee(i.inner,r.inner))return!1}return!0}const Ea=[];function wCe(n,e,t,i,r){for(let o=0;o<=i.length;o++){let s=o?i[o-1].to:e,a=o<i.length?i[o].from:t,c=o?256:r;for(let h=s,m=c,v=c;h<a;h++){let x=vee(n.charCodeAt(h));x==512?x=m:x==8&&v==4&&(x=16),Ea[h]=x==4?2:x,x&7&&(v=x),m=x}for(let h=s,m=c,v=c;h<a;h++){let x=Ea[h];if(x==128)h<a-1&&m==Ea[h+1]&&m&24?x=Ea[h]=m:Ea[h]=256;else if(x==64){let E=h+1;for(;E<a&&Ea[E]==64;)E++;let D=h&&m==8||E<t&&Ea[E]==8?v==1?1:8:256;for(let P=h;P<E;P++)Ea[P]=D;h=E-1}else x==8&&v==1&&(Ea[h]=1);m=x,x&7&&(v=x)}}}function SCe(n,e,t,i,r){let o=r==1?2:1;for(let s=0,a=0,c=0;s<=i.length;s++){let h=s?i[s-1].to:e,m=s<i.length?i[s].from:t;for(let v=h,x,E,D;v<m;v++)if(E=$9[x=n.charCodeAt(v)])if(E<0){for(let P=a-3;P>=0;P-=3)if(Eg[P+1]==-E){let F=Eg[P+2],W=F&2?r:F&4?F&1?o:r:0;W&&(Ea[v]=Ea[Eg[P]]=W),a=P;break}}else{if(Eg.length==189)break;Eg[a++]=v,Eg[a++]=x,Eg[a++]=c}else if((D=Ea[v])==2||D==1){let P=D==r;c=P?0:1;for(let F=a-3;F>=0;F-=3){let W=Eg[F+2];if(W&2)break;if(P)Eg[F+2]|=2;else{if(W&4)break;Eg[F+2]|=4}}}}}function ECe(n,e,t,i){for(let r=0,o=i;r<=t.length;r++){let s=r?t[r-1].to:n,a=r<t.length?t[r].from:e;for(let c=s;c<a;){let h=Ea[c];if(h==256){let m=c+1;for(;;)if(m==a){if(r==t.length)break;m=t[r++].to,a=r<t.length?t[r].from:e}else if(Ea[m]==256)m++;else break;let v=o==1,x=(m<e?Ea[m]:i)==1,E=v==x?v?1:2:i;for(let D=m,P=r,F=P?t[P-1].to:n;D>c;)D==F&&(D=t[--P].from,F=P?t[P-1].to:n),Ea[--D]=E;c=m}else o=h,c++}}}function H9(n,e,t,i,r,o,s){let a=i%2?2:1;if(i%2==r%2)for(let c=e,h=0;c<t;){let m=!0,v=!1;if(h==o.length||c<o[h].from){let P=Ea[c];P!=a&&(m=!1,v=P==16)}let x=!m&&a==1?[]:null,E=m?i:i+1,D=c;e:for(;;)if(h<o.length&&D==o[h].from){if(v)break e;let P=o[h];if(!m)for(let F=P.to,W=h+1;;){if(F==t)break e;if(W<o.length&&o[W].from==F)F=o[W++].to;else{if(Ea[F]==a)break e;break}}if(h++,x)x.push(P);else{P.from>c&&s.push(new Wy(c,P.from,E));let F=P.direction==Xb!=!(E%2);Z9(n,F?i+1:i,r,P.inner,P.from,P.to,s),c=P.to}D=P.to}else{if(D==t||(m?Ea[D]!=a:Ea[D]==a))break;D++}x?H9(n,c,D,i+1,r,x,s):c<D&&s.push(new Wy(c,D,E)),c=D}else for(let c=t,h=o.length;c>e;){let m=!0,v=!1;if(!h||c>o[h-1].to){let P=Ea[c-1];P!=a&&(m=!1,v=P==16)}let x=!m&&a==1?[]:null,E=m?i:i+1,D=c;e:for(;;)if(h&&D==o[h-1].to){if(v)break e;let P=o[--h];if(!m)for(let F=P.from,W=h;;){if(F==e)break e;if(W&&o[W-1].to==F)F=o[--W].from;else{if(Ea[F-1]==a)break e;break}}if(x)x.push(P);else{P.to<c&&s.push(new Wy(P.to,c,E));let F=P.direction==Xb!=!(E%2);Z9(n,F?i+1:i,r,P.inner,P.from,P.to,s),c=P.from}D=P.from}else{if(D==e||(m?Ea[D-1]!=a:Ea[D-1]==a))break;D--}x?H9(n,D,c,i+1,r,x,s):D<c&&s.push(new Wy(D,c,E)),c=D}}function Z9(n,e,t,i,r,o,s){let a=e%2?2:1;wCe(n,r,o,i,a),SCe(n,r,o,i,a),ECe(r,o,i,a),H9(n,r,o,e,t,i,s)}function BCe(n,e,t){if(!n)return[new Wy(0,0,e==ZP?1:0)];if(e==Xb&&!t.length&&!MCe.test(n))return Cee(n.length);if(t.length)for(;n.length>Ea.length;)Ea[Ea.length]=256;let i=[],r=e==Xb?0:1;return Z9(n,r,r,t,0,n.length,i),i}function Cee(n){return[new Wy(0,n,0)]}let _ee="";function OCe(n,e,t,i,r){var o;let s=i.head-n.from,a=Wy.find(e,s,(o=i.bidiLevel)!==null&&o!==void 0?o:-1,i.assoc),c=e[a],h=c.side(r,t);if(s==h){let x=a+=r?1:-1;if(x<0||x>=e.length)return null;c=e[a=x],s=c.side(!r,t),h=c.side(r,t)}let m=bA(n.text,s,c.forward(r,t));(m<c.from||m>c.to)&&(m=h),_ee=n.text.slice(Math.min(s,m),Math.max(s,m));let v=a==(r?e.length-1:0)?null:e[a+(r?1:-1)];return v&&m==h&&v.level+(r?0:1)<c.level?En.cursor(v.side(!r,t)+n.from,v.forward(r,t)?1:-1,v.level):En.cursor(m+n.from,c.forward(r,t)?-1:1,c.level)}function ICe(n,e,t){for(let i=e;i<t;i++){let r=vee(n.charCodeAt(i));if(r==1)return Xb;if(r==2||r==4)return ZP}return Xb}const xee=Si.define(),Mee=Si.define(),wee=Si.define(),See=Si.define(),X9=Si.define(),Eee=Si.define(),Bee=Si.define(),XP=Si.define(),JP=Si.define(),Oee=Si.define({combine:n=>n.some(e=>e)}),Iee=Si.define({combine:n=>n.some(e=>e)}),kee=Si.define();class Z_{constructor(e,t="nearest",i="nearest",r=5,o=5,s=!1){this.range=e,this.y=t,this.x=i,this.yMargin=r,this.xMargin=o,this.isSnapshot=s}map(e){return e.empty?this:new Z_(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new Z_(En.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const g5=to.define({map:(n,e)=>n.map(e)}),Tee=to.define();function Ph(n,e,t){let i=n.facet(See);i.length?i[0](e):window.onerror&&window.onerror(String(e),t,void 0,void 0,e)||(t?console.error(t+":",e):console.error(e))}const o1=Si.define({combine:n=>n.length?n[0]:!0});let kCe=0;const T_=Si.define({combine(n){return n.filter((e,t)=>{for(let i=0;i<t;i++)if(n[i].plugin==e.plugin)return!1;return!0})}});class Bu{constructor(e,t,i,r,o){this.id=e,this.create=t,this.domEventHandlers=i,this.domEventObservers=r,this.baseExtensions=o(this),this.extension=this.baseExtensions.concat(T_.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(T_.of({plugin:this,arg:e}))}static define(e,t){const{eventHandlers:i,eventObservers:r,provide:o,decorations:s}=t||{};return new Bu(kCe++,e,i,r,a=>{let c=[];return s&&c.push(p4.of(h=>{let m=h.plugin(a);return m?s(m):wr.none})),o&&c.push(o(a)),c})}static fromClass(e,t){return Bu.define((i,r)=>new e(i,r),t)}}class TO{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(i){if(Ph(t.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(t){Ph(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(i){Ph(e.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const Ree=Si.define(),eU=Si.define(),p4=Si.define(),Dee=Si.define(),bM=Si.define(),Pee=Si.define();function Ij(n,e){let t=n.state.facet(Pee);if(!t.length)return t;let i=t.map(o=>o instanceof Function?o(n):o),r=[];return Vo.spans(i,e.from,e.to,{point(){},span(o,s,a,c){let h=o-e.from,m=s-e.from,v=r;for(let x=a.length-1;x>=0;x--,c--){let E=a[x].spec.bidiIsolate,D;if(E==null&&(E=ICe(e.text,h,m)),c>0&&v.length&&(D=v[v.length-1]).to==h&&D.direction==E)D.to=m,v=D.inner;else{let P={from:h,to:m,direction:E,inner:[]};v.push(P),v=P.inner}}}}),r}const Uee=Si.define();function tU(n){let e=0,t=0,i=0,r=0;for(let o of n.state.facet(Uee)){let s=o(n);s&&(s.left!=null&&(e=Math.max(e,s.left)),s.right!=null&&(t=Math.max(t,s.right)),s.top!=null&&(i=Math.max(i,s.top)),s.bottom!=null&&(r=Math.max(r,s.bottom)))}return{left:e,right:t,top:i,bottom:r}}const V2=Si.define();class op{constructor(e,t,i,r){this.fromA=e,this.toA=t,this.fromB=i,this.toB=r}join(e){return new op(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,i=this;for(;t>0;t--){let r=e[t-1];if(!(r.fromA>i.toA)){if(r.toA<i.fromA)break;i=i.join(r),e.splice(t-1,1)}}return e.splice(t,0,i),e}static extendWithRanges(e,t){if(t.length==0)return e;let i=[];for(let r=0,o=0,s=0,a=0;;r++){let c=r==e.length?null:e[r],h=s-a,m=c?c.fromB:1e9;for(;o<t.length&&t[o]<m;){let v=t[o],x=t[o+1],E=Math.max(a,v),D=Math.min(m,x);if(E<=D&&new op(E+h,D+h,E,D).addToSet(i),x>m)break;o+=2}if(!c)return i;new op(c.fromA,c.toA,c.fromB,c.toB).addToSet(i),s=c.toA,a=c.toB}}}class xS{constructor(e,t,i){this.view=e,this.state=t,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=Sc.empty(this.startState.doc.length);for(let o of i)this.changes=this.changes.compose(o.changes);let r=[];this.changes.iterChangedRanges((o,s,a,c)=>r.push(new op(o,s,a,c))),this.changedRanges=r}static create(e,t,i){return new xS(e,t,i)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class kj extends Aa{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=wr.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new Vu],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new op(0,0,0,e.state.doc.length)],0,null)}update(e){var t;let i=e.changedRanges;this.minWidth>0&&i.length&&(i.every(({fromA:h,toA:m})=>m<this.minWidthFrom||h>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let r=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((t=this.domChanged)===null||t===void 0)&&t.newSel?r=this.domChanged.newSel.head:!LCe(e.changes,this.hasComposition)&&!e.selectionSet&&(r=e.state.selection.main.head));let o=r>-1?RCe(this.view,e.changes,r):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:h,to:m}=this.hasComposition;i=new op(h,m,e.changes.mapPos(h,-1),e.changes.mapPos(m,1)).addToSet(i.slice())}this.hasComposition=o?{from:o.range.fromB,to:o.range.toB}:null,(gi.ie||gi.chrome)&&!o&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let s=this.decorations,a=this.updateDeco(),c=UCe(s,a,e.changes);return i=op.extendWithRanges(i,c),!(this.flags&7)&&i.length==0?!1:(this.updateInner(i,e.startState.doc.length,o),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t,i){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t,i);let{observer:r}=this.view;r.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let s=gi.chrome||gi.ios?{node:r.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,s),this.flags&=-8,s&&(s.written||r.selectionRange.focusNode!=s.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(s=>s.flags&=-9);let o=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let s of this.children)s instanceof h1&&s.widget instanceof V9&&o.push(s.dom);r.updateGaps(o)}updateChildren(e,t,i){let r=i?i.range.addToSet(e.slice()):e,o=this.childCursor(t);for(let s=r.length-1;;s--){let a=s>=0?r[s]:null;if(!a)break;let{fromA:c,toA:h,fromB:m,toB:v}=a,x,E,D,P;if(i&&i.range.fromB<v&&i.range.toB>m){let H=y3.build(this.view.state.doc,m,i.range.fromB,this.decorations,this.dynamicDecorationMap),X=y3.build(this.view.state.doc,i.range.toB,v,this.decorations,this.dynamicDecorationMap);E=H.breakAtStart,D=H.openStart,P=X.openEnd;let Z=this.compositionView(i);X.breakAtStart?Z.breakAfter=1:X.content.length&&Z.merge(Z.length,Z.length,X.content[0],!1,X.openStart,0)&&(Z.breakAfter=X.content[0].breakAfter,X.content.shift()),H.content.length&&Z.merge(0,0,H.content[H.content.length-1],!0,0,H.openEnd)&&H.content.pop(),x=H.content.concat(Z).concat(X.content)}else({content:x,breakAtStart:E,openStart:D,openEnd:P}=y3.build(this.view.state.doc,m,v,this.decorations,this.dynamicDecorationMap));let{i:F,off:W}=o.findPos(h,1),{i:q,off:V}=o.findPos(c,-1);hee(this,q,V,F,W,x,E,D,P)}i&&this.fixCompositionDOM(i)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let t of e.transactions)for(let i of t.effects)i.is(Tee)&&(this.editContextFormatting=i.value)}compositionView(e){let t=new Cm(e.text.nodeValue);t.flags|=8;for(let{deco:r}of e.marks)t=new v1(r,[t],t.length);let i=new Vu;return i.append(t,0),i}fixCompositionDOM(e){let t=(o,s)=>{s.flags|=8|(s.children.some(c=>c.flags&7)?1:0),this.markedForComposition.add(s);let a=Aa.get(o);a&&a!=s&&(a.dom=null),s.setDOM(o)},i=this.childPos(e.range.fromB,1),r=this.children[i.i];t(e.line,r);for(let o=e.marks.length-1;o>=-1;o--)i=r.childPos(i.off,1),r=r.children[i.i],t(o>=0?e.marks[o].node:e.text,r)}updateSelection(e=!1,t=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let i=this.view.root.activeElement,r=i==this.dom,o=!r&&!(this.view.state.facet(o1)||this.dom.tabIndex>-1)&&pw(this.dom,this.view.observer.selectionRange)&&!(i&&this.dom.contains(i));if(!(r||t||o))return;let s=this.forceSelection;this.forceSelection=!1;let a=this.view.state.selection.main,c=this.moveToLine(this.domAtPos(a.anchor)),h=a.empty?c:this.moveToLine(this.domAtPos(a.head));if(gi.gecko&&a.empty&&!this.hasComposition&&TCe(c)){let v=document.createTextNode("");this.view.observer.ignore(()=>c.node.insertBefore(v,c.node.childNodes[c.offset]||null)),c=h=new th(v,0),s=!0}let m=this.view.observer.selectionRange;(s||!m.focusNode||(!g3(c.node,c.offset,m.anchorNode,m.anchorOffset)||!g3(h.node,h.offset,m.focusNode,m.focusOffset))&&!this.suppressWidgetCursorChange(m,a))&&(this.view.observer.ignore(()=>{gi.android&&gi.chrome&&this.dom.contains(m.focusNode)&&KCe(m.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let v=d4(this.view.root);if(v)if(a.empty){if(gi.gecko){let x=DCe(c.node,c.offset);if(x&&x!=3){let E=(x==1?uee:cee)(c.node,c.offset);E&&(c=new th(E.node,E.offset))}}v.collapse(c.node,c.offset),a.bidiLevel!=null&&v.caretBidiLevel!==void 0&&(v.caretBidiLevel=a.bidiLevel)}else if(v.extend){v.collapse(c.node,c.offset);try{v.extend(h.node,h.offset)}catch{}}else{let x=document.createRange();a.anchor>a.head&&([c,h]=[h,c]),x.setEnd(h.node,h.offset),x.setStart(c.node,c.offset),v.removeAllRanges(),v.addRange(x)}o&&this.view.root.activeElement==this.dom&&(this.dom.blur(),i&&i.focus())}),this.view.observer.setSelectionRange(c,h)),this.impreciseAnchor=c.precise?null:new th(m.anchorNode,m.anchorOffset),this.impreciseHead=h.precise?null:new th(m.focusNode,m.focusOffset)}suppressWidgetCursorChange(e,t){return this.hasComposition&&t.empty&&g3(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==t.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,i=d4(e.root),{anchorNode:r,anchorOffset:o}=e.observer.selectionRange;if(!i||!t.empty||!t.assoc||!i.modify)return;let s=Vu.find(this,t.head);if(!s)return;let a=s.posAtStart;if(t.head==a||t.head==a+s.length)return;let c=this.coordsAt(t.head,-1),h=this.coordsAt(t.head,1);if(!c||!h||c.bottom>h.top)return;let m=this.domAtPos(t.head+t.assoc);i.collapse(m.node,m.offset),i.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let v=e.observer.selectionRange;e.docView.posFromDOM(v.anchorNode,v.anchorOffset)!=t.from&&i.collapse(r,o)}moveToLine(e){let t=this.dom,i;if(e.node!=t)return e;for(let r=e.offset;!i&&r<t.childNodes.length;r++){let o=Aa.get(t.childNodes[r]);o instanceof Vu&&(i=o.domAtPos(0))}for(let r=e.offset-1;!i&&r>=0;r--){let o=Aa.get(t.childNodes[r]);o instanceof Vu&&(i=o.domAtPos(o.length))}return i?new th(i.node,i.offset,!0):e}nearest(e){for(let t=e;t;){let i=Aa.get(t);if(i&&i.rootView==this)return i;t=t.parentNode}return null}posFromDOM(e,t){let i=this.nearest(e);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(e,t)+i.posAtStart}domAtPos(e){let{i:t,off:i}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let r=this.children[t];if(i<r.length||r instanceof Vu)break;t++,i=0}return this.children[t].domAtPos(i)}coordsAt(e,t){let i=null,r=0;for(let o=this.length,s=this.children.length-1;s>=0;s--){let a=this.children[s],c=o-a.breakAfter,h=c-a.length;if(c<e)break;if(h<=e&&(h<e||a.covers(-1))&&(c>e||a.covers(1))&&(!i||a instanceof Vu&&!(i instanceof Vu&&t>=0)))i=a,r=h;else if(i&&h==e&&c==e&&a instanceof h1&&Math.abs(t)<2){if(a.deco.startSide<0)break;s&&(i=null)}o=h}return i?i.coordsAt(e-r,t):null}coordsForChar(e){let{i:t,off:i}=this.childPos(e,1),r=this.children[t];if(!(r instanceof Vu))return null;for(;r.children.length;){let{i:a,off:c}=r.childPos(i,1);for(;;a++){if(a==r.children.length)return null;if((r=r.children[a]).length)break}i=c}if(!(r instanceof Cm))return null;let o=bA(r.text,i);if(o==i)return null;let s=Zb(r.dom,i,o).getClientRects();for(let a=0;a<s.length;a++){let c=s[a];if(a==s.length-1||c.top<c.bottom&&c.left<c.right)return c}return null}measureVisibleLineHeights(e){let t=[],{from:i,to:r}=e,o=this.view.contentDOM.clientWidth,s=o>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,a=-1,c=this.view.textDirection==il.LTR;for(let h=0,m=0;m<this.children.length;m++){let v=this.children[m],x=h+v.length;if(x>r)break;if(h>=i){let E=v.dom.getBoundingClientRect();if(t.push(E.height),s){let D=v.dom.lastChild,P=D?f4(D):[];if(P.length){let F=P[P.length-1],W=c?F.right-E.left:E.right-F.left;W>a&&(a=W,this.minWidth=o,this.minWidthFrom=h,this.minWidthTo=x)}}}h=x+v.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return getComputedStyle(this.children[t].dom).direction=="rtl"?il.RTL:il.LTR}measureTextSize(){for(let o of this.children)if(o instanceof Vu){let s=o.measureTextSize();if(s)return s}let e=document.createElement("div"),t,i,r;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let o=f4(e.firstChild)[0];t=e.getBoundingClientRect().height,i=o?o.width/27:7,r=o?o.height:t,e.remove()}),{lineHeight:t,charWidth:i,textHeight:r}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new Aee(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let i=0,r=0;;r++){let o=r==t.viewports.length?null:t.viewports[r],s=o?o.from-1:this.length;if(s>i){let a=(t.lineBlockAt(s).bottom-t.lineBlockAt(i).top)/this.view.scaleY;e.push(wr.replace({widget:new V9(a),block:!0,inclusive:!0,isBlockGap:!0}).range(i,s))}if(!o)break;i=o.to+1}return wr.set(e)}updateDeco(){let e=1,t=this.view.state.facet(p4).map(o=>(this.dynamicDecorationMap[e++]=typeof o=="function")?o(this.view):o),i=!1,r=this.view.state.facet(Dee).map((o,s)=>{let a=typeof o=="function";return a&&(i=!0),a?o(this.view):o});for(r.length&&(this.dynamicDecorationMap[e++]=i,t.push(Vo.join(r))),this.decorations=[this.editContextFormatting,...t,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let h=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=h.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let h of this.view.state.facet(kee))try{if(h(this.view,e.range,e))return!0}catch(m){Ph(this.view.state,m,"scroll handler")}let{range:t}=e,i=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),r;if(!i)return;!t.empty&&(r=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(i={left:Math.min(i.left,r.left),top:Math.min(i.top,r.top),right:Math.max(i.right,r.right),bottom:Math.max(i.bottom,r.bottom)});let o=tU(this.view),s={left:i.left-o.left,top:i.top-o.top,right:i.right+o.right,bottom:i.bottom+o.bottom},{offsetWidth:a,offsetHeight:c}=this.view.scrollDOM;ACe(this.view.scrollDOM,s,t.head<t.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,a),-a),Math.max(Math.min(e.yMargin,c),-c),this.view.textDirection==il.LTR)}}function TCe(n){return n.node.nodeType==1&&n.node.firstChild&&(n.offset==0||n.node.childNodes[n.offset-1].contentEditable=="false")&&(n.offset==n.node.childNodes.length||n.node.childNodes[n.offset].contentEditable=="false")}function Kee(n,e){let t=n.observer.selectionRange;if(!t.focusNode)return null;let i=uee(t.focusNode,t.focusOffset),r=cee(t.focusNode,t.focusOffset),o=i||r;if(r&&i&&r.node!=i.node){let a=Aa.get(r.node);if(!a||a instanceof Cm&&a.text!=r.node.nodeValue)o=r;else if(n.docView.lastCompositionAfterCursor){let c=Aa.get(i.node);!c||c instanceof Cm&&c.text!=i.node.nodeValue||(o=r)}}if(n.docView.lastCompositionAfterCursor=o!=i,!o)return null;let s=e-o.offset;return{from:s,to:s+o.node.nodeValue.length,node:o.node}}function RCe(n,e,t){let i=Kee(n,t);if(!i)return null;let{node:r,from:o,to:s}=i,a=r.nodeValue;if(/[\n\r]/.test(a)||n.state.doc.sliceString(i.from,i.to)!=a)return null;let c=e.invertedDesc,h=new op(c.mapPos(o),c.mapPos(s),o,s),m=[];for(let v=r.parentNode;;v=v.parentNode){let x=Aa.get(v);if(x instanceof v1)m.push({node:v,deco:x.mark});else{if(x instanceof Vu||v.nodeName=="DIV"&&v.parentNode==n.contentDOM)return{range:h,text:r,marks:m,line:v};if(v!=n.contentDOM)m.push({node:v,deco:new yM({inclusive:!0,attributes:bCe(v),tagName:v.tagName.toLowerCase()})});else return null}}}function DCe(n,e){return n.nodeType!=1?0:(e&&n.childNodes[e-1].contentEditable=="false"?1:0)|(e<n.childNodes.length&&n.childNodes[e].contentEditable=="false"?2:0)}let PCe=class{constructor(){this.changes=[]}compareRange(e,t){mw(e,t,this.changes)}comparePoint(e,t){mw(e,t,this.changes)}boundChange(e){mw(e,e,this.changes)}};function UCe(n,e,t){let i=new PCe;return Vo.compare(n,e,t,i),i.changes}function KCe(n,e){for(let t=n;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function LCe(n,e){let t=!1;return e&&n.iterChangedRanges((i,r)=>{i<e.to&&r>e.from&&(t=!0)}),t}function FCe(n,e,t=1){let i=n.charCategorizer(e),r=n.doc.lineAt(e),o=e-r.from;if(r.length==0)return En.cursor(e);o==0?t=1:o==r.length&&(t=-1);let s=o,a=o;t<0?s=bA(r.text,o,!1):a=bA(r.text,o);let c=i(r.text.slice(s,a));for(;s>0;){let h=bA(r.text,s,!1);if(i(r.text.slice(h,s))!=c)break;s=h}for(;a<r.length;){let h=bA(r.text,a);if(i(r.text.slice(a,h))!=c)break;a=h}return En.range(s+r.from,a+r.from)}function zCe(n,e){return e.left>n?e.left-n:Math.max(0,n-e.right)}function jCe(n,e){return e.top>n?e.top-n:Math.max(0,n-e.bottom)}function RO(n,e){return n.top<e.bottom-1&&n.bottom>e.top+1}function Tj(n,e){return e<n.top?{top:e,left:n.left,right:n.right,bottom:n.bottom}:n}function Rj(n,e){return e>n.bottom?{top:n.top,left:n.left,right:n.right,bottom:e}:n}function J9(n,e,t){let i,r,o,s,a=!1,c,h,m,v;for(let D=n.firstChild;D;D=D.nextSibling){let P=f4(D);for(let F=0;F<P.length;F++){let W=P[F];r&&RO(r,W)&&(W=Tj(Rj(W,r.bottom),r.top));let q=zCe(e,W),V=jCe(t,W);if(q==0&&V==0)return D.nodeType==3?Dj(D,e,t):J9(D,e,t);(!i||s>V||s==V&&o>q)&&(i=D,r=W,o=q,s=V,a=q?e<W.left?F>0:F<P.length-1:!0),q==0?t>W.bottom&&(!m||m.bottom<W.bottom)?(c=D,m=W):t<W.top&&(!v||v.top>W.top)&&(h=D,v=W):m&&RO(m,W)?m=Rj(m,W.bottom):v&&RO(v,W)&&(v=Tj(v,W.top))}}if(m&&m.bottom>=t?(i=c,r=m):v&&v.top<=t&&(i=h,r=v),!i)return{node:n,offset:0};let x=Math.max(r.left,Math.min(r.right,e));if(i.nodeType==3)return Dj(i,x,t);if(a&&i.contentEditable!="false")return J9(i,x,t);let E=Array.prototype.indexOf.call(n.childNodes,i)+(e>=(r.left+r.right)/2?1:0);return{node:n,offset:E}}function Dj(n,e,t){let i=n.nodeValue.length,r=-1,o=1e9,s=0;for(let a=0;a<i;a++){let c=Zb(n,a,a+1).getClientRects();for(let h=0;h<c.length;h++){let m=c[h];if(m.top==m.bottom)continue;s||(s=e-m.left);let v=(m.top>t?m.top-t:t-m.bottom)-1;if(m.left-1<=e&&m.right+1>=e&&v<o){let x=e>=(m.left+m.right)/2,E=x;if((gi.chrome||gi.gecko)&&Zb(n,a).getBoundingClientRect().left==m.right&&(E=!x),v<=0)return{node:n,offset:a+(E?1:0)};r=a+(E?1:0),o=v}}}return{node:n,offset:r>-1?r:s>0?n.nodeValue.length:0}}function Lee(n,e,t,i=-1){var r,o;let s=n.contentDOM.getBoundingClientRect(),a=s.top+n.viewState.paddingTop,c,{docHeight:h}=n.viewState,{x:m,y:v}=e,x=v-a;if(x<0)return 0;if(x>h)return n.state.doc.length;for(let H=n.viewState.heightOracle.textHeight/2,X=!1;c=n.elementAtHeight(x),c.type!=Uh.Text;)for(;x=i>0?c.bottom+H:c.top-H,!(x>=0&&x<=h);){if(X)return t?null:0;X=!0,i=-i}v=a+x;let E=c.from;if(E<n.viewport.from)return n.viewport.from==0?0:t?null:Pj(n,s,c,m,v);if(E>n.viewport.to)return n.viewport.to==n.state.doc.length?n.state.doc.length:t?null:Pj(n,s,c,m,v);let D=n.dom.ownerDocument,P=n.root.elementFromPoint?n.root:D,F=P.elementFromPoint(m,v);F&&!n.contentDOM.contains(F)&&(F=null),F||(m=Math.max(s.left+1,Math.min(s.right-1,m)),F=P.elementFromPoint(m,v),F&&!n.contentDOM.contains(F)&&(F=null));let W,q=-1;if(F&&((r=n.docView.nearest(F))===null||r===void 0?void 0:r.isEditable)!=!1){if(D.caretPositionFromPoint){let H=D.caretPositionFromPoint(m,v);H&&({offsetNode:W,offset:q}=H)}else if(D.caretRangeFromPoint){let H=D.caretRangeFromPoint(m,v);H&&({startContainer:W,startOffset:q}=H)}W&&(!n.contentDOM.contains(W)||gi.safari&&NCe(W,q,m)||gi.chrome&&GCe(W,q,m))&&(W=void 0),W&&(q=Math.min(a0(W),q))}if(!W||!n.docView.dom.contains(W)){let H=Vu.find(n.docView,E);if(!H)return x>c.top+c.height/2?c.to:c.from;({node:W,offset:q}=J9(H.dom,m,v))}let V=n.docView.nearest(W);if(!V)return null;if(V.isWidget&&((o=V.dom)===null||o===void 0?void 0:o.nodeType)==1){let H=V.dom.getBoundingClientRect();return e.y<H.top||e.y<=H.bottom&&e.x<=(H.left+H.right)/2?V.posAtStart:V.posAtEnd}else return V.localPosFromDOM(W,q)+V.posAtStart}function Pj(n,e,t,i,r){let o=Math.round((i-e.left)*n.defaultCharacterWidth);if(n.lineWrapping&&t.height>n.defaultLineHeight*1.5){let a=n.viewState.heightOracle.textHeight,c=Math.floor((r-t.top-(n.defaultLineHeight-a)*.5)/a);o+=c*n.viewState.heightOracle.lineLength}let s=n.state.sliceDoc(t.from,t.to);return t.from+L9(s,o,n.state.tabSize)}function Fee(n,e,t){let i,r=n;if(n.nodeType!=3||e!=(i=n.nodeValue.length))return!1;for(;;){let o=r.nextSibling;if(o){if(o.nodeName=="BR")break;return!1}else{let s=r.parentNode;if(!s||s.nodeName=="DIV")break;r=s}}return Zb(n,i-1,i).getBoundingClientRect().right>t}function NCe(n,e,t){return Fee(n,e,t)}function GCe(n,e,t){if(e!=0)return Fee(n,e,t);for(let r=n;;){let o=r.parentNode;if(!o||o.nodeType!=1||o.firstChild!=r)return!1;if(o.classList.contains("cm-line"))break;r=o}let i=n.nodeType==1?n.getBoundingClientRect():Zb(n,0,Math.max(n.nodeValue.length,1)).getBoundingClientRect();return t-i.left>5}function eR(n,e,t){let i=n.lineBlockAt(e);if(Array.isArray(i.type)){let r;for(let o of i.type){if(o.from>e)break;if(!(o.to<e)){if(o.from<e&&o.to>e)return o;(!r||o.type==Uh.Text&&(r.type!=o.type||(t<0?o.from<e:o.to>e)))&&(r=o)}}return r||i}return i}function WCe(n,e,t,i){let r=eR(n,e.head,e.assoc||-1),o=!i||r.type!=Uh.Text||!(n.lineWrapping||r.widgetLineBreaks)?null:n.coordsAtPos(e.assoc<0&&e.head>r.from?e.head-1:e.head);if(o){let s=n.dom.getBoundingClientRect(),a=n.textDirectionAt(r.from),c=n.posAtCoords({x:t==(a==il.LTR)?s.right-1:s.left+1,y:(o.top+o.bottom)/2});if(c!=null)return En.cursor(c,t?-1:1)}return En.cursor(t?r.to:r.from,t?-1:1)}function Uj(n,e,t,i){let r=n.state.doc.lineAt(e.head),o=n.bidiSpans(r),s=n.textDirectionAt(r.from);for(let a=e,c=null;;){let h=OCe(r,o,s,a,t),m=_ee;if(!h){if(r.number==(t?n.state.doc.lines:1))return a;m=`
`,r=n.state.doc.line(r.number+(t?1:-1)),o=n.bidiSpans(r),h=n.visualLineSide(r,!t)}if(c){if(!c(m))return a}else{if(!i)return h;c=i(m)}a=h}}function QCe(n,e,t){let i=n.state.charCategorizer(e),r=i(t);return o=>{let s=i(o);return r==Ml.Space&&(r=s),r==s}}function YCe(n,e,t,i){let r=e.head,o=t?1:-1;if(r==(t?n.state.doc.length:0))return En.cursor(r,e.assoc);let s=e.goalColumn,a,c=n.contentDOM.getBoundingClientRect(),h=n.coordsAtPos(r,e.assoc||-1),m=n.documentTop;if(h)s==null&&(s=h.left-c.left),a=o<0?h.top:h.bottom;else{let E=n.viewState.lineBlockAt(r);s==null&&(s=Math.min(c.right-c.left,n.defaultCharacterWidth*(r-E.from))),a=(o<0?E.top:E.bottom)+m}let v=c.left+s,x=i??n.viewState.heightOracle.textHeight>>1;for(let E=0;;E+=10){let D=a+(x+E)*o,P=Lee(n,{x:v,y:D},!1,o);if(D<c.top||D>c.bottom||(o<0?P<r:P>r)){let F=n.docView.coordsForChar(P),W=!F||D<F.top?-1:1;return En.cursor(P,W,void 0,s)}}}function v3(n,e,t){for(;;){let i=0;for(let r of n)r.between(e-1,e+1,(o,s,a)=>{if(e>o&&e<s){let c=i||t||(e-o<s-e?-1:1);e=c<0?o:s,i=c}});if(!i)return e}}function zee(n,e){let t=null;for(let i=0;i<e.ranges.length;i++){let r=e.ranges[i],o=null;if(r.empty){let s=v3(n,r.from,0);s!=r.from&&(o=En.cursor(s,-1))}else{let s=v3(n,r.from,-1),a=v3(n,r.to,1);(s!=r.from||a!=r.to)&&(o=En.range(r.from==r.anchor?s:a,r.from==r.head?s:a))}o&&(t||(t=e.ranges.slice()),t[i]=o)}return t?En.create(t,e.mainIndex):e}function DO(n,e,t){let i=v3(n.state.facet(bM).map(r=>r(n)),t.from,e.head>t.from?-1:1);return i==t.from?t:En.cursor(i,i<t.from?1:-1)}const $2="";class qCe{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(fs.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=$2}readRange(e,t){if(!e)return this;let i=e.parentNode;for(let r=e;;){this.findPointBefore(i,r);let o=this.text.length;this.readNode(r);let s=r.nextSibling;if(s==t)break;let a=Aa.get(r),c=Aa.get(s);(a&&c?a.breakAfter:(a?a.breakAfter:CS(r))||CS(s)&&(r.nodeName!="BR"||r.cmIgnore)&&this.text.length>o)&&!$Ce(s,t)&&this.lineBreak(),r=s}return this.findPointBefore(i,t),this}readTextNode(e){let t=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,t.length));for(let i=0,r=this.lineSeparator?null:/\r\n?|\n/g;;){let o=-1,s=1,a;if(this.lineSeparator?(o=t.indexOf(this.lineSeparator,i),s=this.lineSeparator.length):(a=r.exec(t))&&(o=a.index,s=a[0].length),this.append(t.slice(i,o<0?t.length:o)),o<0)break;if(this.lineBreak(),s>1)for(let c of this.points)c.node==e&&c.pos>this.text.length&&(c.pos-=s-1);i=o+s}}readNode(e){if(e.cmIgnore)return;let t=Aa.get(e),i=t&&t.overrideDOMText;if(i!=null){this.findPointInside(e,i.length);for(let r=i.iter();!r.next().done;)r.lineBreak?this.lineBreak():this.append(r.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==t&&(i.pos=this.text.length)}findPointInside(e,t){for(let i of this.points)(e.nodeType==3?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+(VCe(e,i.node,i.offset)?t:0))}}function VCe(n,e,t){for(;;){if(!e||t<a0(e))return!1;if(e==n)return!0;t=Hb(e)+1,e=e.parentNode}}function $Ce(n,e){let t;for(;!(n==e||!n);n=n.nextSibling){let i=Aa.get(n);if(!(i?.isWidget||n.cmIgnore))return!1;i&&(t||(t=[])).push(i)}if(t)for(let i of t){let r=i.overrideDOMText;if(r?.length)return!1}return!0}class Kj{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class HCe{constructor(e,t,i,r){this.typeOver=r,this.bounds=null,this.text="",this.domChanged=t>-1;let{impreciseHead:o,impreciseAnchor:s}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,i,0))){let a=o||s?[]:XCe(e),c=new qCe(a,e.state);c.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=c.text,this.newSel=JCe(a,this.bounds.from)}else{let a=e.observer.selectionRange,c=o&&o.node==a.focusNode&&o.offset==a.focusOffset||!Q9(e.contentDOM,a.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(a.focusNode,a.focusOffset),h=s&&s.node==a.anchorNode&&s.offset==a.anchorOffset||!Q9(e.contentDOM,a.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(a.anchorNode,a.anchorOffset),m=e.viewport;if((gi.ios||gi.chrome)&&e.state.selection.main.empty&&c!=h&&(m.from>0||m.to<e.state.doc.length)){let v=Math.min(c,h),x=Math.max(c,h),E=m.from-v,D=m.to-x;(E==0||E==1||v==0)&&(D==0||D==-1||x==e.state.doc.length)&&(c=0,h=e.state.doc.length)}this.newSel=En.single(h,c)}}}function jee(n,e){let t,{newSel:i}=e,r=n.state.selection.main,o=n.inputState.lastKeyTime>Date.now()-100?n.inputState.lastKeyCode:-1;if(e.bounds){let{from:s,to:a}=e.bounds,c=r.from,h=null;(o===8||gi.android&&e.text.length<a-s)&&(c=r.to,h="end");let m=Nee(n.state.doc.sliceString(s,a,$2),e.text,c-s,h);m&&(gi.chrome&&o==13&&m.toB==m.from+2&&e.text.slice(m.from,m.toB)==$2+$2&&m.toB--,t={from:s+m.from,to:s+m.toA,insert:ps.of(e.text.slice(m.from,m.toB).split($2))})}else i&&(!n.hasFocus&&n.state.facet(o1)||i.main.eq(r))&&(i=null);if(!t&&!i)return!1;if(!t&&e.typeOver&&!r.empty&&i&&i.main.empty?t={from:r.from,to:r.to,insert:n.state.doc.slice(r.from,r.to)}:(gi.mac||gi.android)&&t&&t.from==t.to&&t.from==r.head-1&&/^\. ?$/.test(t.insert.toString())&&n.contentDOM.getAttribute("autocorrect")=="off"?(i&&t.insert.length==2&&(i=En.single(i.main.anchor-1,i.main.head-1)),t={from:t.from,to:t.to,insert:ps.of([t.insert.toString().replace("."," ")])}):t&&t.from>=r.from&&t.to<=r.to&&(t.from!=r.from||t.to!=r.to)&&r.to-r.from-(t.to-t.from)<=4?t={from:r.from,to:r.to,insert:n.state.doc.slice(r.from,t.from).append(t.insert).append(n.state.doc.slice(t.to,r.to))}:gi.chrome&&t&&t.from==t.to&&t.from==r.head&&t.insert.toString()==`
 `&&n.lineWrapping&&(i&&(i=En.single(i.main.anchor-1,i.main.head-1)),t={from:r.from,to:r.to,insert:ps.of([" "])}),t)return nU(n,t,i,o);if(i&&!i.main.eq(r)){let s=!1,a="select";return n.inputState.lastSelectionTime>Date.now()-50&&(n.inputState.lastSelectionOrigin=="select"&&(s=!0),a=n.inputState.lastSelectionOrigin,a=="select.pointer"&&(i=zee(n.state.facet(bM).map(c=>c(n)),i))),n.dispatch({selection:i,scrollIntoView:s,userEvent:a}),!0}else return!1}function nU(n,e,t,i=-1){if(gi.ios&&n.inputState.flushIOSKey(e))return!0;let r=n.state.selection.main;if(gi.android&&(e.to==r.to&&(e.from==r.from||e.from==r.from-1&&n.state.sliceDoc(e.from,r.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&H_(n.contentDOM,"Enter",13)||(e.from==r.from-1&&e.to==r.to&&e.insert.length==0||i==8&&e.insert.length<e.to-e.from&&e.to>r.head)&&H_(n.contentDOM,"Backspace",8)||e.from==r.from&&e.to==r.to+1&&e.insert.length==0&&H_(n.contentDOM,"Delete",46)))return!0;let o=e.insert.toString();n.inputState.composing>=0&&n.inputState.composing++;let s,a=()=>s||(s=ZCe(n,e,t));return n.state.facet(Eee).some(c=>c(n,e.from,e.to,o,a))||n.dispatch(a()),!0}function ZCe(n,e,t){let i,r=n.state,o=r.selection.main,s=-1;if(e.from==e.to&&e.from<o.from||e.from>o.to){let c=e.from<o.from?-1:1,h=c<0?o.from:o.to,m=v3(r.facet(bM).map(v=>v(n)),h,c);e.from==m&&(s=m)}if(s>-1)i={changes:e,selection:En.cursor(e.from+e.insert.length,-1)};else if(e.from>=o.from&&e.to<=o.to&&e.to-e.from>=(o.to-o.from)/3&&(!t||t.main.empty&&t.main.from==e.from+e.insert.length)&&n.inputState.composing<0){let c=o.from<e.from?r.sliceDoc(o.from,e.from):"",h=o.to>e.to?r.sliceDoc(e.to,o.to):"";i=r.replaceSelection(n.state.toText(c+e.insert.sliceString(0,void 0,n.state.lineBreak)+h))}else{let c=r.changes(e),h=t&&t.main.to<=c.newLength?t.main:void 0;if(r.selection.ranges.length>1&&n.inputState.composing>=0&&e.to<=o.to&&e.to>=o.to-10){let m=n.state.sliceDoc(e.from,e.to),v,x=t&&Kee(n,t.main.head);if(x){let P=e.insert.length-(e.to-e.from);v={from:x.from,to:x.to-P}}else v=n.state.doc.lineAt(o.head);let E=o.to-e.to,D=o.to-o.from;i=r.changeByRange(P=>{if(P.from==o.from&&P.to==o.to)return{changes:c,range:h||P.map(c)};let F=P.to-E,W=F-m.length;if(P.to-P.from!=D||n.state.sliceDoc(W,F)!=m||P.to>=v.from&&P.from<=v.to)return{range:P};let q=r.changes({from:W,to:F,insert:e.insert}),V=P.to-o.to;return{changes:q,range:h?En.range(Math.max(0,h.anchor+V),Math.max(0,h.head+V)):P.map(q)}})}else i={changes:c,selection:h&&r.selection.replaceRange(h)}}let a="input.type";return(n.composing||n.inputState.compositionPendingChange&&n.inputState.compositionEndedAt>Date.now()-50)&&(n.inputState.compositionPendingChange=!1,a+=".compose",n.inputState.compositionFirstChange&&(a+=".start",n.inputState.compositionFirstChange=!1)),r.update(i,{userEvent:a,scrollIntoView:!0})}function Nee(n,e,t,i){let r=Math.min(n.length,e.length),o=0;for(;o<r&&n.charCodeAt(o)==e.charCodeAt(o);)o++;if(o==r&&n.length==e.length)return null;let s=n.length,a=e.length;for(;s>0&&a>0&&n.charCodeAt(s-1)==e.charCodeAt(a-1);)s--,a--;if(i=="end"){let c=Math.max(0,o-Math.min(s,a));t-=s+c-o}if(s<o&&n.length<e.length){let c=t<=o&&t>=s?o-t:0;o-=c,a=o+(a-s),s=o}else if(a<o){let c=t<=o&&t>=a?o-t:0;o-=c,s=o+(s-a),a=o}return{from:o,toA:s,toB:a}}function XCe(n){let e=[];if(n.root.activeElement!=n.contentDOM)return e;let{anchorNode:t,anchorOffset:i,focusNode:r,focusOffset:o}=n.observer.selectionRange;return t&&(e.push(new Kj(t,i)),(r!=t||o!=i)&&e.push(new Kj(r,o))),e}function JCe(n,e){if(n.length==0)return null;let t=n[0].pos,i=n.length==2?n[1].pos:t;return t>-1&&i>-1?En.single(t+e,i+e):null}class e_e{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,gi.safari&&e.contentDOM.addEventListener("input",()=>null),gi.gecko&&m_e(e.contentDOM.ownerDocument)}handleEvent(e){!l_e(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,t){let i=this.handlers[e];if(i){for(let r of i.observers)r(this.view,t);for(let r of i.handlers){if(t.defaultPrevented)break;if(r(this.view,t)){t.preventDefault();break}}}}ensureHandlers(e){let t=t_e(e),i=this.handlers,r=this.view.contentDOM;for(let o in t)if(o!="scroll"){let s=!t[o].handlers.length,a=i[o];a&&s!=!a.handlers.length&&(r.removeEventListener(o,this.handleEvent),a=null),a||r.addEventListener(o,this.handleEvent,{passive:s})}for(let o in i)o!="scroll"&&!t[o]&&r.removeEventListener(o,this.handleEvent);this.handlers=t}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&Wee.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),gi.android&&gi.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let t;return gi.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((t=Gee.find(i=>i.keyCode==e.keyCode))&&!e.ctrlKey||n_e.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=t||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let t=this.pendingIOSKey;return!t||t.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,H_(this.view.contentDOM,t.key,t.keyCode,t instanceof KeyboardEvent?t:void 0))}ignoreDuringComposition(e){return!/^key/.test(e.type)||e.synthetic?!1:this.composing>0?!0:gi.safari&&!gi.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function Lj(n,e){return(t,i)=>{try{return e.call(n,i,t)}catch(r){Ph(t.state,r)}}}function t_e(n){let e=Object.create(null);function t(i){return e[i]||(e[i]={observers:[],handlers:[]})}for(let i of n){let r=i.spec,o=r&&r.plugin.domEventHandlers,s=r&&r.plugin.domEventObservers;if(o)for(let a in o){let c=o[a];c&&t(a).handlers.push(Lj(i.value,c))}if(s)for(let a in s){let c=s[a];c&&t(a).observers.push(Lj(i.value,c))}}for(let i in _m)t(i).handlers.push(_m[i]);for(let i in lp)t(i).observers.push(lp[i]);return e}const Gee=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],n_e="dthko",Wee=[16,17,18,20,91,92,224,225],y5=6;function v5(n){return Math.max(0,n)*.7+8}function i_e(n,e){return Math.max(Math.abs(n.clientX-e.clientX),Math.abs(n.clientY-e.clientY))}class r_e{constructor(e,t,i,r){this.view=e,this.startEvent=t,this.style=i,this.mustSelect=r,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParents=hCe(e.contentDOM),this.atoms=e.state.facet(bM).map(s=>s(e));let o=e.contentDOM.ownerDocument;o.addEventListener("mousemove",this.move=this.move.bind(this)),o.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(fs.allowMultipleSelections)&&o_e(e,t),this.dragging=a_e(e,t)&&qee(t)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&i_e(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let t=0,i=0,r=0,o=0,s=this.view.win.innerWidth,a=this.view.win.innerHeight;this.scrollParents.x&&({left:r,right:s}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:o,bottom:a}=this.scrollParents.y.getBoundingClientRect());let c=tU(this.view);e.clientX-c.left<=r+y5?t=-v5(r-e.clientX):e.clientX+c.right>=s-y5&&(t=v5(e.clientX-s)),e.clientY-c.top<=o+y5?i=-v5(o-e.clientY):e.clientY+c.bottom>=a-y5&&(i=v5(e.clientY-a)),this.setScrollSpeed(t,i)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:t}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),t&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=t,t=0),(e||t)&&this.view.win.scrollBy(e,t),this.dragging===!1&&this.select(this.lastEvent)}select(e){let{view:t}=this,i=zee(this.atoms,this.style.get(e,this.extend,this.multiple));(this.mustSelect||!i.eq(t.state.selection,this.dragging===!1))&&this.view.dispatch({selection:i,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(t=>t.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function o_e(n,e){let t=n.state.facet(xee);return t.length?t[0](e):gi.mac?e.metaKey:e.ctrlKey}function s_e(n,e){let t=n.state.facet(Mee);return t.length?t[0](e):gi.mac?!e.altKey:!e.ctrlKey}function a_e(n,e){let{main:t}=n.state.selection;if(t.empty)return!1;let i=d4(n.root);if(!i||i.rangeCount==0)return!0;let r=i.getRangeAt(0).getClientRects();for(let o=0;o<r.length;o++){let s=r[o];if(s.left<=e.clientX&&s.right>=e.clientX&&s.top<=e.clientY&&s.bottom>=e.clientY)return!0}return!1}function l_e(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,i;t!=n.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(i=Aa.get(t))&&i.ignoreEvent(e))return!1;return!0}const _m=Object.create(null),lp=Object.create(null),Qee=gi.ie&&gi.ie_version<15||gi.ios&&gi.webkit_version<604;function u_e(n){let e=n.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{n.focus(),t.remove(),Yee(n,t.value)},50)}function h6(n,e,t){for(let i of n.facet(e))t=i(t,n);return t}function Yee(n,e){e=h6(n.state,XP,e);let{state:t}=n,i,r=1,o=t.toText(e),s=o.lines==t.selection.ranges.length;if(tR!=null&&t.selection.ranges.every(c=>c.empty)&&tR==o.toString()){let c=-1;i=t.changeByRange(h=>{let m=t.doc.lineAt(h.from);if(m.from==c)return{range:h};c=m.from;let v=t.toText((s?o.line(r++).text:e)+t.lineBreak);return{changes:{from:m.from,insert:v},range:En.cursor(h.from+v.length)}})}else s?i=t.changeByRange(c=>{let h=o.line(r++);return{changes:{from:c.from,to:c.to,insert:h.text},range:En.cursor(c.from+h.length)}}):i=t.replaceSelection(o);n.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}lp.scroll=n=>{n.inputState.lastScrollTop=n.scrollDOM.scrollTop,n.inputState.lastScrollLeft=n.scrollDOM.scrollLeft};_m.keydown=(n,e)=>(n.inputState.setSelectionOrigin("select"),e.keyCode==27&&n.inputState.tabFocusMode!=0&&(n.inputState.tabFocusMode=Date.now()+2e3),!1);lp.touchstart=(n,e)=>{n.inputState.lastTouchTime=Date.now(),n.inputState.setSelectionOrigin("select.pointer")};lp.touchmove=n=>{n.inputState.setSelectionOrigin("select.pointer")};_m.mousedown=(n,e)=>{if(n.observer.flush(),n.inputState.lastTouchTime>Date.now()-2e3)return!1;let t=null;for(let i of n.state.facet(wee))if(t=i(n,e),t)break;if(!t&&e.button==0&&(t=h_e(n,e)),t){let i=!n.hasFocus;n.inputState.startMouseSelection(new r_e(n,e,t,i)),i&&n.observer.ignore(()=>{see(n.contentDOM);let o=n.root.activeElement;o&&!o.contains(n.contentDOM)&&o.blur()});let r=n.inputState.mouseSelection;if(r)return r.start(e),r.dragging===!1}else n.inputState.setSelectionOrigin("select.pointer");return!1};function Fj(n,e,t,i){if(i==1)return En.cursor(e,t);if(i==2)return FCe(n.state,e,t);{let r=Vu.find(n.docView,e),o=n.state.doc.lineAt(r?r.posAtEnd:e),s=r?r.posAtStart:o.from,a=r?r.posAtEnd:o.to;return a<n.state.doc.length&&a==o.to&&a++,En.range(s,a)}}let zj=(n,e,t)=>e>=t.top&&e<=t.bottom&&n>=t.left&&n<=t.right;function c_e(n,e,t,i){let r=Vu.find(n.docView,e);if(!r)return 1;let o=e-r.posAtStart;if(o==0)return 1;if(o==r.length)return-1;let s=r.coordsAt(o,-1);if(s&&zj(t,i,s))return-1;let a=r.coordsAt(o,1);return a&&zj(t,i,a)?1:s&&s.bottom>=i?-1:1}function jj(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:c_e(n,t,e.clientX,e.clientY)}}const A_e=gi.ie&&gi.ie_version<=11;let Nj=null,Gj=0,Wj=0;function qee(n){if(!A_e)return n.detail;let e=Nj,t=Wj;return Nj=n,Wj=Date.now(),Gj=!e||t>Date.now()-400&&Math.abs(e.clientX-n.clientX)<2&&Math.abs(e.clientY-n.clientY)<2?(Gj+1)%3:1}function h_e(n,e){let t=jj(n,e),i=qee(e),r=n.state.selection;return{update(o){o.docChanged&&(t.pos=o.changes.mapPos(t.pos),r=r.map(o.changes))},get(o,s,a){let c=jj(n,o),h,m=Fj(n,c.pos,c.bias,i);if(t.pos!=c.pos&&!s){let v=Fj(n,t.pos,t.bias,i),x=Math.min(v.from,m.from),E=Math.max(v.to,m.to);m=x<m.from?En.range(x,E):En.range(E,x)}return s?r.replaceRange(r.main.extend(m.from,m.to)):a&&i==1&&r.ranges.length>1&&(h=d_e(r,c.pos))?h:a?r.addRange(m):En.create([m])}}}function d_e(n,e){for(let t=0;t<n.ranges.length;t++){let{from:i,to:r}=n.ranges[t];if(i<=e&&r>=e)return En.create(n.ranges.slice(0,t).concat(n.ranges.slice(t+1)),n.mainIndex==t?0:n.mainIndex-(n.mainIndex>t?1:0))}return null}_m.dragstart=(n,e)=>{let{selection:{main:t}}=n.state;if(e.target.draggable){let r=n.docView.nearest(e.target);if(r&&r.isWidget){let o=r.posAtStart,s=o+r.length;(o>=t.to||s<=t.from)&&(t=En.range(o,s))}}let{inputState:i}=n;return i.mouseSelection&&(i.mouseSelection.dragging=!0),i.draggedContent=t,e.dataTransfer&&(e.dataTransfer.setData("Text",h6(n.state,JP,n.state.sliceDoc(t.from,t.to))),e.dataTransfer.effectAllowed="copyMove"),!1};_m.dragend=n=>(n.inputState.draggedContent=null,!1);function Qj(n,e,t,i){if(t=h6(n.state,XP,t),!t)return;let r=n.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:o}=n.inputState,s=i&&o&&s_e(n,e)?{from:o.from,to:o.to}:null,a={from:r,insert:t},c=n.state.changes(s?[s,a]:a);n.focus(),n.dispatch({changes:c,selection:{anchor:c.mapPos(r,-1),head:c.mapPos(r,1)},userEvent:s?"move.drop":"input.drop"}),n.inputState.draggedContent=null}_m.drop=(n,e)=>{if(!e.dataTransfer)return!1;if(n.state.readOnly)return!0;let t=e.dataTransfer.files;if(t&&t.length){let i=Array(t.length),r=0,o=()=>{++r==t.length&&Qj(n,e,i.filter(s=>s!=null).join(n.state.lineBreak),!1)};for(let s=0;s<t.length;s++){let a=new FileReader;a.onerror=o,a.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(a.result)||(i[s]=a.result),o()},a.readAsText(t[s])}return!0}else{let i=e.dataTransfer.getData("Text");if(i)return Qj(n,e,i,!0),!0}return!1};_m.paste=(n,e)=>{if(n.state.readOnly)return!0;n.observer.flush();let t=Qee?null:e.clipboardData;return t?(Yee(n,t.getData("text/plain")||t.getData("text/uri-list")),!0):(u_e(n),!1)};function f_e(n,e){let t=n.dom.parentNode;if(!t)return;let i=t.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout(()=>{i.remove(),n.focus()},50)}function p_e(n){let e=[],t=[],i=!1;for(let r of n.selection.ranges)r.empty||(e.push(n.sliceDoc(r.from,r.to)),t.push(r));if(!e.length){let r=-1;for(let{from:o}of n.selection.ranges){let s=n.doc.lineAt(o);s.number>r&&(e.push(s.text),t.push({from:s.from,to:Math.min(n.doc.length,s.to+1)})),r=s.number}i=!0}return{text:h6(n,JP,e.join(n.lineBreak)),ranges:t,linewise:i}}let tR=null;_m.copy=_m.cut=(n,e)=>{let{text:t,ranges:i,linewise:r}=p_e(n.state);if(!t&&!r)return!1;tR=r?t:null,e.type=="cut"&&!n.state.readOnly&&n.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"});let o=Qee?null:e.clipboardData;return o?(o.clearData(),o.setData("text/plain",t),!0):(f_e(n,t),!1)};const Vee=x1.define();function $ee(n,e){let t=[];for(let i of n.facet(Bee)){let r=i(n,e);r&&t.push(r)}return t.length?n.update({effects:t,annotations:Vee.of(!0)}):null}function Hee(n){setTimeout(()=>{let e=n.hasFocus;if(e!=n.inputState.notifiedFocused){let t=$ee(n.state,e);t?n.dispatch(t):n.update([])}},10)}lp.focus=n=>{n.inputState.lastFocusTime=Date.now(),!n.scrollDOM.scrollTop&&(n.inputState.lastScrollTop||n.inputState.lastScrollLeft)&&(n.scrollDOM.scrollTop=n.inputState.lastScrollTop,n.scrollDOM.scrollLeft=n.inputState.lastScrollLeft),Hee(n)};lp.blur=n=>{n.observer.clearSelectionRange(),Hee(n)};lp.compositionstart=lp.compositionupdate=n=>{n.observer.editContext||(n.inputState.compositionFirstChange==null&&(n.inputState.compositionFirstChange=!0),n.inputState.composing<0&&(n.inputState.composing=0))};lp.compositionend=n=>{n.observer.editContext||(n.inputState.composing=-1,n.inputState.compositionEndedAt=Date.now(),n.inputState.compositionPendingKey=!0,n.inputState.compositionPendingChange=n.observer.pendingRecords().length>0,n.inputState.compositionFirstChange=null,gi.chrome&&gi.android?n.observer.flushSoon():n.inputState.compositionPendingChange?Promise.resolve().then(()=>n.observer.flush()):setTimeout(()=>{n.inputState.composing<0&&n.docView.hasComposition&&n.update([])},50))};lp.contextmenu=n=>{n.inputState.lastContextMenu=Date.now()};_m.beforeinput=(n,e)=>{var t,i;if(e.inputType=="insertReplacementText"&&n.observer.editContext){let o=(t=e.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain"),s=e.getTargetRanges();if(o&&s.length){let a=s[0],c=n.posAtDOM(a.startContainer,a.startOffset),h=n.posAtDOM(a.endContainer,a.endOffset);return nU(n,{from:c,to:h,insert:n.state.toText(o)},null),!0}}let r;if(gi.chrome&&gi.android&&(r=Gee.find(o=>o.inputType==e.inputType))&&(n.observer.delayAndroidKey(r.key,r.keyCode),r.key=="Backspace"||r.key=="Delete")){let o=((i=window.visualViewport)===null||i===void 0?void 0:i.height)||0;setTimeout(()=>{var s;(((s=window.visualViewport)===null||s===void 0?void 0:s.height)||0)>o+10&&n.hasFocus&&(n.contentDOM.blur(),n.focus())},100)}return gi.ios&&e.inputType=="deleteContentForward"&&n.observer.flushSoon(),gi.safari&&e.inputType=="insertText"&&n.inputState.composing>=0&&setTimeout(()=>lp.compositionend(n,e),20),!1};const Yj=new Set;function m_e(n){Yj.has(n)||(Yj.add(n),n.addEventListener("copy",()=>{}),n.addEventListener("cut",()=>{}))}const qj=["pre-wrap","normal","pre-line","break-spaces"];let wx=!1;function Vj(){wx=!1}class g_e{constructor(e){this.lineWrapping=e,this.doc=ps.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,t){let i=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.max(0,Math.ceil((t-e-i*this.lineLength*.5)/this.lineLength))),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return qj.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let i=0;i<e.length;i++){let r=e[i];r<0?i++:this.heightSamples[Math.floor(r*10)]||(t=!0,this.heightSamples[Math.floor(r*10)]=!0)}return t}refresh(e,t,i,r,o,s){let a=qj.indexOf(e)>-1,c=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=a;if(this.lineWrapping=a,this.lineHeight=t,this.charWidth=i,this.textHeight=r,this.lineLength=o,c){this.heightSamples={};for(let h=0;h<s.length;h++){let m=s[h];m<0?h++:this.heightSamples[Math.floor(m*10)]=!0}}return c}}class y_e{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class zg{constructor(e,t,i,r,o){this.from=e,this.length=t,this.top=i,this.height=r,this._content=o}get type(){return typeof this._content=="number"?Uh.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof ov?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new zg(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var tl=(function(n){return n[n.ByPos=0]="ByPos",n[n.ByHeight=1]="ByHeight",n[n.ByPosNoHeight=2]="ByPosNoHeight",n})(tl||(tl={}));const gw=.001;class Kh{constructor(e,t,i=2){this.length=e,this.height=t,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>gw&&(wx=!0),this.height=e)}replace(e,t,i){return Kh.of(i)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,i,r){let o=this,s=i.doc;for(let a=r.length-1;a>=0;a--){let{fromA:c,toA:h,fromB:m,toB:v}=r[a],x=o.lineAt(c,tl.ByPosNoHeight,i.setDoc(t),0,0),E=x.to>=h?x:o.lineAt(h,tl.ByPosNoHeight,i,0,0);for(v+=E.to-h,h=E.to;a>0&&x.from<=r[a-1].toA;)c=r[a-1].fromA,m=r[a-1].fromB,a--,c<x.from&&(x=o.lineAt(c,tl.ByPosNoHeight,i,0,0));m+=x.from-c,c=x.from;let D=iU.build(i.setDoc(s),e,m,v);o=MS(o,o.replace(c,h,D))}return o.updateHeight(i,0)}static empty(){return new sf(0,0)}static of(e){if(e.length==1)return e[0];let t=0,i=e.length,r=0,o=0;for(;;)if(t==i)if(r>o*2){let a=e[t-1];a.break?e.splice(--t,1,a.left,null,a.right):e.splice(--t,1,a.left,a.right),i+=1+a.break,r-=a.size}else if(o>r*2){let a=e[i];a.break?e.splice(i,1,a.left,null,a.right):e.splice(i,1,a.left,a.right),i+=2+a.break,o-=a.size}else break;else if(r<o){let a=e[t++];a&&(r+=a.size)}else{let a=e[--i];a&&(o+=a.size)}let s=0;return e[t-1]==null?(s=1,t--):e[t]==null&&(s=1,i++),new v_e(Kh.of(e.slice(0,t)),s,Kh.of(e.slice(i)))}}function MS(n,e){return n==e?n:(n.constructor!=e.constructor&&(wx=!0),e)}Kh.prototype.size=1;class Zee extends Kh{constructor(e,t,i){super(e,t),this.deco=i}blockAt(e,t,i,r){return new zg(r,this.length,i,this.height,this.deco||0)}lineAt(e,t,i,r,o){return this.blockAt(0,i,r,o)}forEachLine(e,t,i,r,o,s){e<=o+this.length&&t>=o&&s(this.blockAt(0,i,r,o))}updateHeight(e,t=0,i=!1,r){return r&&r.from<=t&&r.more&&this.setHeight(r.heights[r.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class sf extends Zee{constructor(e,t){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,t,i,r){return new zg(r,this.length,i,this.height,this.breaks)}replace(e,t,i){let r=i[0];return i.length==1&&(r instanceof sf||r instanceof gA&&r.flags&4)&&Math.abs(this.length-r.length)<10?(r instanceof gA?r=new sf(r.length,this.height):r.height=this.height,this.outdated||(r.outdated=!1),r):Kh.of(i)}updateHeight(e,t=0,i=!1,r){return r&&r.from<=t&&r.more?this.setHeight(r.heights[r.index++]):(i||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class gA extends Kh{constructor(e){super(e,0)}heightMetrics(e,t){let i=e.doc.lineAt(t).number,r=e.doc.lineAt(t+this.length).number,o=r-i+1,s,a=0;if(e.lineWrapping){let c=Math.min(this.height,e.lineHeight*o);s=c/o,this.length>o+1&&(a=(this.height-c)/(this.length-o-1))}else s=this.height/o;return{firstLine:i,lastLine:r,perLine:s,perChar:a}}blockAt(e,t,i,r){let{firstLine:o,lastLine:s,perLine:a,perChar:c}=this.heightMetrics(t,r);if(t.lineWrapping){let h=r+(e<t.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-i)/this.height))*this.length)),m=t.doc.lineAt(h),v=a+m.length*c,x=Math.max(i,e-v/2);return new zg(m.from,m.length,x,v,0)}else{let h=Math.max(0,Math.min(s-o,Math.floor((e-i)/a))),{from:m,length:v}=t.doc.line(o+h);return new zg(m,v,i+a*h,a,0)}}lineAt(e,t,i,r,o){if(t==tl.ByHeight)return this.blockAt(e,i,r,o);if(t==tl.ByPosNoHeight){let{from:E,to:D}=i.doc.lineAt(e);return new zg(E,D-E,0,0,0)}let{firstLine:s,perLine:a,perChar:c}=this.heightMetrics(i,o),h=i.doc.lineAt(e),m=a+h.length*c,v=h.number-s,x=r+a*v+c*(h.from-o-v);return new zg(h.from,h.length,Math.max(r,Math.min(x,r+this.height-m)),m,0)}forEachLine(e,t,i,r,o,s){e=Math.max(e,o),t=Math.min(t,o+this.length);let{firstLine:a,perLine:c,perChar:h}=this.heightMetrics(i,o);for(let m=e,v=r;m<=t;){let x=i.doc.lineAt(m);if(m==e){let D=x.number-a;v+=c*D+h*(e-o-D)}let E=c+h*x.length;s(new zg(x.from,x.length,v,E,0)),v+=E,m=x.to+1}}replace(e,t,i){let r=this.length-t;if(r>0){let o=i[i.length-1];o instanceof gA?i[i.length-1]=new gA(o.length+r):i.push(null,new gA(r-1))}if(e>0){let o=i[0];o instanceof gA?i[0]=new gA(e+o.length):i.unshift(new gA(e-1),null)}return Kh.of(i)}decomposeLeft(e,t){t.push(new gA(e-1),null)}decomposeRight(e,t){t.push(null,new gA(this.length-e-1))}updateHeight(e,t=0,i=!1,r){let o=t+this.length;if(r&&r.from<=t+this.length&&r.more){let s=[],a=Math.max(t,r.from),c=-1;for(r.from>t&&s.push(new gA(r.from-t-1).updateHeight(e,t));a<=o&&r.more;){let m=e.doc.lineAt(a).length;s.length&&s.push(null);let v=r.heights[r.index++];c==-1?c=v:Math.abs(v-c)>=gw&&(c=-2);let x=new sf(m,v);x.outdated=!1,s.push(x),a+=m+1}a<=o&&s.push(null,new gA(o-a).updateHeight(e,a));let h=Kh.of(s);return(c<0||Math.abs(h.height-this.height)>=gw||Math.abs(c-this.heightMetrics(e,t).perLine)>=gw)&&(wx=!0),MS(this,h)}else(i||this.outdated)&&(this.setHeight(e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class v_e extends Kh{constructor(e,t,i){super(e.length+t+i.length,e.height+i.height,t|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return this.flags&1}blockAt(e,t,i,r){let o=i+this.left.height;return e<o?this.left.blockAt(e,t,i,r):this.right.blockAt(e,t,o,r+this.left.length+this.break)}lineAt(e,t,i,r,o){let s=r+this.left.height,a=o+this.left.length+this.break,c=t==tl.ByHeight?e<s:e<a,h=c?this.left.lineAt(e,t,i,r,o):this.right.lineAt(e,t,i,s,a);if(this.break||(c?h.to<a:h.from>a))return h;let m=t==tl.ByPosNoHeight?tl.ByPosNoHeight:tl.ByPos;return c?h.join(this.right.lineAt(a,m,i,s,a)):this.left.lineAt(a,m,i,r,o).join(h)}forEachLine(e,t,i,r,o,s){let a=r+this.left.height,c=o+this.left.length+this.break;if(this.break)e<c&&this.left.forEachLine(e,t,i,r,o,s),t>=c&&this.right.forEachLine(e,t,i,a,c,s);else{let h=this.lineAt(c,tl.ByPos,i,r,o);e<h.from&&this.left.forEachLine(e,h.from-1,i,r,o,s),h.to>=e&&h.from<=t&&s(h),t>h.to&&this.right.forEachLine(h.to+1,t,i,a,c,s)}}replace(e,t,i){let r=this.left.length+this.break;if(t<r)return this.balanced(this.left.replace(e,t,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-r,t-r,i));let o=[];e>0&&this.decomposeLeft(e,o);let s=o.length;for(let a of i)o.push(a);if(e>0&&$j(o,s-1),t<this.length){let a=o.length;this.decomposeRight(t,o),$j(o,a)}return Kh.of(o)}decomposeLeft(e,t){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(i++,e>=i&&t.push(null)),e>i&&this.right.decomposeLeft(e-i,t)}decomposeRight(e,t){let i=this.left.length,r=i+this.break;if(e>=r)return this.right.decomposeRight(e-r,t);e<i&&this.left.decomposeRight(e,t),this.break&&e<r&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?Kh.of(this.break?[e,null,t]:[e,t]):(this.left=MS(this.left,e),this.right=MS(this.right,t),this.setHeight(e.height+t.height),this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,i=!1,r){let{left:o,right:s}=this,a=t+o.length+this.break,c=null;return r&&r.from<=t+o.length&&r.more?c=o=o.updateHeight(e,t,i,r):o.updateHeight(e,t,i),r&&r.from<=a+s.length&&r.more?c=s=s.updateHeight(e,a,i,r):s.updateHeight(e,a,i),c?this.balanced(o,s):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function $j(n,e){let t,i;n[e]==null&&(t=n[e-1])instanceof gA&&(i=n[e+1])instanceof gA&&n.splice(e-1,3,new gA(t.length+1+i.length))}const b_e=5;class iU{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let i=Math.min(t,this.lineEnd),r=this.nodes[this.nodes.length-1];r instanceof sf?r.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new sf(i-this.pos,-1)),this.writtenTo=i,t>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,i){if(e<t||i.heightRelevant){let r=i.widget?i.widget.estimatedHeight:0,o=i.widget?i.widget.lineBreaks:0;r<0&&(r=this.oracle.lineHeight);let s=t-e;i.block?this.addBlock(new Zee(s,r,i)):(s||o||r>=b_e)&&this.addLineDeco(r,o,s)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new sf(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let i=new gA(t-e);return this.oracle.doc.lineAt(e).to==t&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof sf)return e;let t=new sf(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine();let t=e.deco;t&&t.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,t&&t.endSide>0&&(this.covering=e)}addLineDeco(e,t,i){let r=this.ensureLine();r.length+=i,r.collapsed+=i,r.widgetHeight=Math.max(r.widgetHeight,e),r.breaks+=t,this.writtenTo=this.pos=this.pos+i}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof sf)&&!this.isCovered?this.nodes.push(new sf(0,-1)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=e;for(let r of this.nodes)r instanceof sf&&r.updateHeight(this.oracle,i),i+=r?r.length:1;return this.nodes}static build(e,t,i,r){let o=new iU(i,e);return Vo.spans(t,i,r,o,0),o.finish(i)}}function C_e(n,e,t){let i=new __e;return Vo.compare(n,e,t,i,0),i.changes}class __e{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,i,r){(e<t||i&&i.heightRelevant||r&&r.heightRelevant)&&mw(e,t,this.changes,5)}}function x_e(n,e){let t=n.getBoundingClientRect(),i=n.ownerDocument,r=i.defaultView||window,o=Math.max(0,t.left),s=Math.min(r.innerWidth,t.right),a=Math.max(0,t.top),c=Math.min(r.innerHeight,t.bottom);for(let h=n.parentNode;h&&h!=i.body;)if(h.nodeType==1){let m=h,v=window.getComputedStyle(m);if((m.scrollHeight>m.clientHeight||m.scrollWidth>m.clientWidth)&&v.overflow!="visible"){let x=m.getBoundingClientRect();o=Math.max(o,x.left),s=Math.min(s,x.right),a=Math.max(a,x.top),c=Math.min(h==n.parentNode?r.innerHeight:c,x.bottom)}h=v.position=="absolute"||v.position=="fixed"?m.offsetParent:m.parentNode}else if(h.nodeType==11)h=h.host;else break;return{left:o-t.left,right:Math.max(o,s)-t.left,top:a-(t.top+e),bottom:Math.max(a,c)-(t.top+e)}}function M_e(n){let e=n.getBoundingClientRect(),t=n.ownerDocument.defaultView||window;return e.left<t.innerWidth&&e.right>0&&e.top<t.innerHeight&&e.bottom>0}function w_e(n,e){let t=n.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class PO{constructor(e,t,i,r){this.from=e,this.to=t,this.size=i,this.displaySize=r}static same(e,t){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++){let r=e[i],o=t[i];if(r.from!=o.from||r.to!=o.to||r.size!=o.size)return!1}return!0}draw(e,t){return wr.replace({widget:new S_e(this.displaySize*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)}}class S_e extends Av{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class Hj{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=Zj,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=il.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(eU).some(i=>typeof i!="function"&&i.class=="cm-lineWrapping");this.heightOracle=new g_e(t),this.stateDeco=e.facet(p4).filter(i=>typeof i!="function"),this.heightMap=Kh.empty().applyChanges(this.stateDeco,ps.empty,this.heightOracle.setDoc(e.doc),[new op(0,0,0,e.doc.length)]);for(let i=0;i<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());i++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=wr.set(this.lineGaps.map(i=>i.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let i=0;i<=1;i++){let r=i?t.head:t.anchor;if(!e.some(({from:o,to:s})=>r>=o&&r<=s)){let{from:o,to:s}=this.lineBlockAt(r);e.push(new b5(o,s))}}return this.viewports=e.sort((i,r)=>i.from-r.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?Zj:new rU(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(H2(e,this.scaler))})}update(e,t=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=this.state.facet(p4).filter(m=>typeof m!="function");let r=e.changedRanges,o=op.extendWithRanges(r,C_e(i,this.stateDeco,e?e.changes:Sc.empty(this.state.doc.length))),s=this.heightMap.height,a=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);Vj(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),o),(this.heightMap.height!=s||wx)&&(e.flags|=2),a?(this.scrollAnchorPos=e.changes.mapPos(a.from,-1),this.scrollAnchorHeight=a.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=s);let c=o.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<c.from||t.range.head>c.to)||!this.viewportIsAppropriate(c))&&(c=this.getViewport(0,t));let h=c.from!=this.viewport.from||c.to!=this.viewport.to;this.viewport=c,e.flags|=this.updateForViewport(),(h||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(Iee)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,i=window.getComputedStyle(t),r=this.heightOracle,o=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?il.RTL:il.LTR;let s=this.heightOracle.mustRefreshForWrapping(o),a=t.getBoundingClientRect(),c=s||this.mustMeasureContent||this.contentDOMHeight!=a.height;this.contentDOMHeight=a.height,this.mustMeasureContent=!1;let h=0,m=0;if(a.width&&a.height){let{scaleX:H,scaleY:X}=oee(t,a);(H>.005&&Math.abs(this.scaleX-H)>.005||X>.005&&Math.abs(this.scaleY-X)>.005)&&(this.scaleX=H,this.scaleY=X,h|=16,s=c=!0)}let v=(parseInt(i.paddingTop)||0)*this.scaleY,x=(parseInt(i.paddingBottom)||0)*this.scaleY;(this.paddingTop!=v||this.paddingBottom!=x)&&(this.paddingTop=v,this.paddingBottom=x,h|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(r.lineWrapping&&(c=!0),this.editorWidth=e.scrollDOM.clientWidth,h|=16);let E=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=E&&(this.scrollAnchorHeight=-1,this.scrollTop=E),this.scrolledToBottom=lee(e.scrollDOM);let D=(this.printing?w_e:x_e)(t,this.paddingTop),P=D.top-this.pixelViewport.top,F=D.bottom-this.pixelViewport.bottom;this.pixelViewport=D;let W=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(W!=this.inView&&(this.inView=W,W&&(c=!0)),!this.inView&&!this.scrollTarget&&!M_e(e.dom))return 0;let q=a.width;if((this.contentDOMWidth!=q||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=a.width,this.editorHeight=e.scrollDOM.clientHeight,h|=16),c){let H=e.docView.measureVisibleLineHeights(this.viewport);if(r.mustRefreshForHeights(H)&&(s=!0),s||r.lineWrapping&&Math.abs(q-this.contentDOMWidth)>r.charWidth){let{lineHeight:X,charWidth:Z,textHeight:G}=e.docView.measureTextSize();s=X>0&&r.refresh(o,X,Z,G,Math.max(5,q/Z),H),s&&(e.docView.minWidth=0,h|=16)}P>0&&F>0?m=Math.max(P,F):P<0&&F<0&&(m=Math.min(P,F)),Vj();for(let X of this.viewports){let Z=X.from==this.viewport.from?H:e.docView.measureVisibleLineHeights(X);this.heightMap=(s?Kh.empty().applyChanges(this.stateDeco,ps.empty,this.heightOracle,[new op(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(r,0,s,new y_e(X.from,Z))}wx&&(h|=2)}let V=!this.viewportIsAppropriate(this.viewport,m)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return V&&(h&2&&(h|=this.updateScaler()),this.viewport=this.getViewport(m,this.scrollTarget),h|=this.updateForViewport()),(h&2||V)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(s?[]:this.lineGaps,e)),h|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),h}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),r=this.heightMap,o=this.heightOracle,{visibleTop:s,visibleBottom:a}=this,c=new b5(r.lineAt(s-i*1e3,tl.ByHeight,o,0,0).from,r.lineAt(a+(1-i)*1e3,tl.ByHeight,o,0,0).to);if(t){let{head:h}=t.range;if(h<c.from||h>c.to){let m=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),v=r.lineAt(h,tl.ByPos,o,0,0),x;t.y=="center"?x=(v.top+v.bottom)/2-m/2:t.y=="start"||t.y=="nearest"&&h<c.from?x=v.top:x=v.bottom-m,c=new b5(r.lineAt(x-1e3/2,tl.ByHeight,o,0,0).from,r.lineAt(x+m+1e3/2,tl.ByHeight,o,0,0).to)}}return c}mapViewport(e,t){let i=t.mapPos(e.from,-1),r=t.mapPos(e.to,1);return new b5(this.heightMap.lineAt(i,tl.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(r,tl.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},i=0){if(!this.inView)return!0;let{top:r}=this.heightMap.lineAt(e,tl.ByPos,this.heightOracle,0,0),{bottom:o}=this.heightMap.lineAt(t,tl.ByPos,this.heightOracle,0,0),{visibleTop:s,visibleBottom:a}=this;return(e==0||r<=s-Math.max(10,Math.min(-i,250)))&&(t==this.state.doc.length||o>=a+Math.max(10,Math.min(i,250)))&&r>s-2*1e3&&o<a+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let i=[];for(let r of e)t.touchesRange(r.from,r.to)||i.push(new PO(t.mapPos(r.from),t.mapPos(r.to),r.size,r.displaySize));return i}ensureLineGaps(e,t){let i=this.heightOracle.lineWrapping,r=i?1e4:2e3,o=r>>1,s=r<<1;if(this.defaultTextDirection!=il.LTR&&!i)return[];let a=[],c=(m,v,x,E)=>{if(v-m<o)return;let D=this.state.selection.main,P=[D.from];D.empty||P.push(D.to);for(let W of P)if(W>m&&W<v){c(m,W-10,x,E),c(W+10,v,x,E);return}let F=B_e(e,W=>W.from>=x.from&&W.to<=x.to&&Math.abs(W.from-m)<o&&Math.abs(W.to-v)<o&&!P.some(q=>W.from<q&&W.to>q));if(!F){if(v<x.to&&t&&i&&t.visibleRanges.some(V=>V.from<=v&&V.to>=v)){let V=t.moveToLineBoundary(En.cursor(v),!1,!0).head;V>m&&(v=V)}let W=this.gapSize(x,m,v,E),q=i||W<2e6?W:2e6;F=new PO(m,v,W,q)}a.push(F)},h=m=>{if(m.length<s||m.type!=Uh.Text)return;let v=E_e(m.from,m.to,this.stateDeco);if(v.total<s)return;let x=this.scrollTarget?this.scrollTarget.range.head:null,E,D;if(i){let P=r/this.heightOracle.lineLength*this.heightOracle.lineHeight,F,W;if(x!=null){let q=_5(v,x),V=((this.visibleBottom-this.visibleTop)/2+P)/m.height;F=q-V,W=q+V}else F=(this.visibleTop-m.top-P)/m.height,W=(this.visibleBottom-m.top+P)/m.height;E=C5(v,F),D=C5(v,W)}else{let P=v.total*this.heightOracle.charWidth,F=r*this.heightOracle.charWidth,W=0;if(P>2e6)for(let Z of e)Z.from>=m.from&&Z.from<m.to&&Z.size!=Z.displaySize&&Z.from*this.heightOracle.charWidth+W<this.pixelViewport.left&&(W=Z.size-Z.displaySize);let q=this.pixelViewport.left+W,V=this.pixelViewport.right+W,H,X;if(x!=null){let Z=_5(v,x),G=((V-q)/2+F)/P;H=Z-G,X=Z+G}else H=(q-F)/P,X=(V+F)/P;E=C5(v,H),D=C5(v,X)}E>m.from&&c(m.from,E,m,v),D<m.to&&c(D,m.to,m,v)};for(let m of this.viewportLines)Array.isArray(m.type)?m.type.forEach(h):h(m);return a}gapSize(e,t,i,r){let o=_5(r,i)-_5(r,t);return this.heightOracle.lineWrapping?e.height*o:r.total*this.heightOracle.charWidth*o}updateLineGaps(e){PO.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=wr.set(e.map(t=>t.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let t=this.stateDeco;this.lineGaps.length&&(t=t.concat(this.lineGapDeco));let i=[];Vo.spans(t,this.viewport.from,this.viewport.to,{span(o,s){i.push({from:o,to:s})},point(){}},20);let r=0;if(i.length!=this.visibleRanges.length)r=12;else for(let o=0;o<i.length&&!(r&8);o++){let s=this.visibleRanges[o],a=i[o];(s.from!=a.from||s.to!=a.to)&&(r|=4,e&&e.mapPos(s.from,-1)==a.from&&e.mapPos(s.to,1)==a.to||(r|=8))}return this.visibleRanges=i,r}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||H2(this.heightMap.lineAt(e,tl.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(t=>t.top<=e&&t.bottom>=e)||H2(this.heightMap.lineAt(this.scaler.fromDOM(e),tl.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return H2(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class b5{constructor(e,t){this.from=e,this.to=t}}function E_e(n,e,t){let i=[],r=n,o=0;return Vo.spans(t,n,e,{span(){},point(s,a){s>r&&(i.push({from:r,to:s}),o+=s-r),r=a}},20),r<e&&(i.push({from:r,to:e}),o+=e-r),{total:o,ranges:i}}function C5({total:n,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let i=Math.floor(n*t);for(let r=0;;r++){let{from:o,to:s}=e[r],a=s-o;if(i<=a)return o+i;i-=a}}function _5(n,e){let t=0;for(let{from:i,to:r}of n.ranges){if(e<=r){t+=e-i;break}t+=r-i}return t/n.total}function B_e(n,e){for(let t of n)if(e(t))return t}const Zj={toDOM(n){return n},fromDOM(n){return n},scale:1,eq(n){return n==this}};class rU{constructor(e,t,i){let r=0,o=0,s=0;this.viewports=i.map(({from:a,to:c})=>{let h=t.lineAt(a,tl.ByPos,e,0,0).top,m=t.lineAt(c,tl.ByPos,e,0,0).bottom;return r+=m-h,{from:a,to:c,top:h,bottom:m,domTop:0,domBottom:0}}),this.scale=(7e6-r)/(t.height-r);for(let a of this.viewports)a.domTop=s+(a.top-o)*this.scale,s=a.domBottom=a.domTop+(a.bottom-a.top),o=a.bottom}toDOM(e){for(let t=0,i=0,r=0;;t++){let o=t<this.viewports.length?this.viewports[t]:null;if(!o||e<o.top)return r+(e-i)*this.scale;if(e<=o.bottom)return o.domTop+(e-o.top);i=o.bottom,r=o.domBottom}}fromDOM(e){for(let t=0,i=0,r=0;;t++){let o=t<this.viewports.length?this.viewports[t]:null;if(!o||e<o.domTop)return i+(e-r)/this.scale;if(e<=o.domBottom)return o.top+(e-o.domTop);i=o.bottom,r=o.domBottom}}eq(e){return e instanceof rU?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((t,i)=>t.from==e.viewports[i].from&&t.to==e.viewports[i].to):!1}}function H2(n,e){if(e.scale==1)return n;let t=e.toDOM(n.top),i=e.toDOM(n.bottom);return new zg(n.from,n.length,t,i-t,Array.isArray(n._content)?n._content.map(r=>H2(r,e)):n._content)}const x5=Si.define({combine:n=>n.join(" ")}),nR=Si.define({combine:n=>n.indexOf(!0)>-1}),iR=iv.newName(),Xee=iv.newName(),Jee=iv.newName(),ete={"&light":"."+Xee,"&dark":"."+Jee};function rR(n,e,t){return new iv(e,{finish(i){return/&/.test(i)?i.replace(/&\w*/,r=>{if(r=="&")return n;if(!t||!t[r])throw new RangeError(`Unsupported selector: ${r}`);return t[r]}):n+" "+i}})}const O_e=rR("."+iR,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},ete),I_e={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},UO=gi.ie&&gi.ie_version<=11;class k_e{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new dCe,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let i of t)this.queue.push(i);(gi.ie&&gi.ie_version<=11||gi.ios&&e.composing)&&t.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&gi.android&&e.constructor.EDIT_CONTEXT!==!1&&!(gi.chrome&&gi.chrome_version<126)&&(this.editContext=new R_e(e),e.state.facet(o1)&&(e.contentDOM.editContext=this.editContext.editContext)),UO&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var t;((t=this.view.docView)===null||t===void 0?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,i)=>t!=e[i]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,r=this.selectionRange;if(i.state.facet(o1)?i.root.activeElement!=this.dom:!pw(this.dom,r))return;let o=r.anchorNode&&i.docView.nearest(r.anchorNode);if(o&&o.ignoreEvent(e)){t||(this.selectionChanged=!1);return}(gi.ie&&gi.ie_version<=11||gi.android&&gi.chrome)&&!i.state.selection.main.empty&&r.focusNode&&g3(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=d4(e.root);if(!t)return!1;let i=gi.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&T_e(this.view,t)||t;if(!i||this.selectionRange.eq(i))return!1;let r=pw(this.dom,i);return r&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&pCe(this.dom,i)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(i),r&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let i=this.dom;i;)if(i.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=t)i.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,I_e),UO&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),UO&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var i;if(!this.delayedAndroidKey){let r=()=>{let o=this.delayedAndroidKey;o&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=o.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&o.force&&H_(this.dom,o.key,o.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(r)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(!((i=this.delayedAndroidKey)===null||i===void 0)&&i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,i=-1,r=!1;for(let o of e){let s=this.readMutation(o);s&&(s.typeOver&&(r=!0),t==-1?{from:t,to:i}=s:(t=Math.min(s.from,t),i=Math.max(s.to,i)))}return{from:t,to:i,typeOver:r}}readChange(){let{from:e,to:t,typeOver:i}=this.processRecords(),r=this.selectionChanged&&pw(this.dom,this.selectionRange);if(e<0&&!r)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let o=new HCe(this.view,e,t,i);return this.view.docView.domChanged={newSel:o.newSel?o.newSel.main:null},o}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return this.view.requestMeasure(),!1;let i=this.view.state,r=jee(this.view,t);return this.view.state==i&&(t.domChanged||t.newSel&&!t.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),r}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(e.type=="attributes"),e.type=="attributes"&&(t.flags|=4),e.type=="childList"){let i=Xj(t,e.previousSibling||e.target.previousSibling,-1),r=Xj(t,e.nextSibling||e.target.nextSibling,1);return{from:i?t.posAfter(i):t.posAtStart,to:r?t.posBefore(r):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(o1)!=e.state.facet(o1)&&(e.view.contentDOM.editContext=e.state.facet(o1)?this.editContext.editContext:null))}destroy(){var e,t,i;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(i=this.resizeScroll)===null||i===void 0||i.disconnect();for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function Xj(n,e,t){for(;e;){let i=Aa.get(e);if(i&&i.parent==n)return i;let r=e.parentNode;e=r!=n.dom?r:t>0?e.nextSibling:e.previousSibling}return null}function Jj(n,e){let t=e.startContainer,i=e.startOffset,r=e.endContainer,o=e.endOffset,s=n.docView.domAtPos(n.state.selection.main.anchor);return g3(s.node,s.offset,r,o)&&([t,i,r,o]=[r,o,t,i]),{anchorNode:t,anchorOffset:i,focusNode:r,focusOffset:o}}function T_e(n,e){if(e.getComposedRanges){let r=e.getComposedRanges(n.root)[0];if(r)return Jj(n,r)}let t=null;function i(r){r.preventDefault(),r.stopImmediatePropagation(),t=r.getTargetRanges()[0]}return n.contentDOM.addEventListener("beforeinput",i,!0),n.dom.ownerDocument.execCommand("indent"),n.contentDOM.removeEventListener("beforeinput",i,!0),t?Jj(n,t):null}class R_e{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let t=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=i=>{let r=e.state.selection.main,{anchor:o,head:s}=r,a=this.toEditorPos(i.updateRangeStart),c=this.toEditorPos(i.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:i.updateRangeStart,editorBase:a,drifted:!1});let h=c-a>i.text.length;a==this.from&&o<this.from?a=o:c==this.to&&o>this.to&&(c=o);let m=Nee(e.state.sliceDoc(a,c),i.text,(h?r.from:r.to)-a,h?"end":null);if(!m){let x=En.single(this.toEditorPos(i.selectionStart),this.toEditorPos(i.selectionEnd));x.main.eq(r)||e.dispatch({selection:x,userEvent:"select"});return}let v={from:m.from+a,to:m.toA+a,insert:ps.of(i.text.slice(m.from,m.toB).split(`
`))};if((gi.mac||gi.android)&&v.from==s-1&&/^\. ?$/.test(i.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(v={from:a,to:c,insert:ps.of([i.text.replace("."," ")])}),this.pendingContextChange=v,!e.state.readOnly){let x=this.to-this.from+(v.to-v.from+v.insert.length);nU(e,v,En.single(this.toEditorPos(i.selectionStart,x),this.toEditorPos(i.selectionEnd,x)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)),v.from<v.to&&!v.insert.length&&e.inputState.composing>=0&&!/[\\p{Alphabetic}\\p{Number}_]/.test(t.text.slice(Math.max(0,i.updateRangeStart-1),Math.min(t.text.length,i.updateRangeStart+1)))&&this.handlers.compositionend(i)},this.handlers.characterboundsupdate=i=>{let r=[],o=null;for(let s=this.toEditorPos(i.rangeStart),a=this.toEditorPos(i.rangeEnd);s<a;s++){let c=e.coordsForChar(s);o=c&&new DOMRect(c.left,c.top,c.right-c.left,c.bottom-c.top)||o||new DOMRect,r.push(o)}t.updateCharacterBounds(i.rangeStart,r)},this.handlers.textformatupdate=i=>{let r=[];for(let o of i.getTextFormats()){let s=o.underlineStyle,a=o.underlineThickness;if(!/none/i.test(s)&&!/none/i.test(a)){let c=this.toEditorPos(o.rangeStart),h=this.toEditorPos(o.rangeEnd);if(c<h){let m=`text-decoration: underline ${/^[a-z]/.test(s)?s+" ":s=="Dashed"?"dashed ":s=="Squiggle"?"wavy ":""}${/thin/i.test(a)?1:2}px`;r.push(wr.mark({attributes:{style:m}}).range(c,h))}}}e.dispatch({effects:Tee.of(wr.set(r))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:i}=this.composing;this.composing=null,i&&this.reset(e.state)}};for(let i in this.handlers)t.addEventListener(i,this.handlers[i]);this.measureReq={read:i=>{this.editContext.updateControlBounds(i.contentDOM.getBoundingClientRect());let r=d4(i.root);r&&r.rangeCount&&this.editContext.updateSelectionBounds(r.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let t=0,i=!1,r=this.pendingContextChange;return e.changes.iterChanges((o,s,a,c,h)=>{if(i)return;let m=h.length-(s-o);if(r&&s>=r.to)if(r.from==o&&r.to==s&&r.insert.eq(h)){r=this.pendingContextChange=null,t+=m,this.to+=m;return}else r=null,this.revertPending(e.state);if(o+=t,s+=t,s<=this.from)this.from+=m,this.to+=m;else if(o<this.to){if(o<this.from||s>this.to||this.to-this.from+h.length>3e4){i=!0;return}this.editContext.updateText(this.toContextPos(o),this.toContextPos(s),h.toString()),this.to+=m}t+=m}),r&&!i&&this.revertPending(e.state),!i}update(e){let t=this.pendingContextChange,i=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(i.from,i.to)&&e.transactions.some(r=>!r.isUserEvent("input.type")&&r.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||t)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:t}=e.selection.main;this.from=Math.max(0,t-1e4),this.to=Math.min(e.doc.length,t+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let t=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(t.from),this.toContextPos(t.from+t.insert.length),e.doc.sliceString(t.from,t.to))}setSelection(e){let{main:t}=e.selection,i=this.toContextPos(Math.max(this.from,Math.min(this.to,t.anchor))),r=this.toContextPos(t.head);(this.editContext.selectionStart!=i||this.editContext.selectionEnd!=r)&&this.editContext.updateSelection(i,r)}rangeIsValid(e){let{head:t}=e.selection.main;return!(this.from>0&&t-this.from<500||this.to<e.doc.length&&this.to-t<500||this.to-this.from>1e4*3)}toEditorPos(e,t=this.to-this.from){e=Math.min(e,t);let i=this.composing;return i&&i.drifted?i.editorBase+(e-i.contextBase):e+this.from}toContextPos(e){let t=this.composing;return t&&t.drifted?t.contextBase+(e-t.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class Mi{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var t;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:i}=e;this.dispatchTransactions=e.dispatchTransactions||i&&(r=>r.forEach(o=>i(o,this)))||(r=>this.update(r)),this.dispatch=this.dispatch.bind(this),this._root=e.root||fCe(e.parent)||document,this.viewState=new Hj(e.state||fs.create(e)),e.scrollTo&&e.scrollTo.is(g5)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(T_).map(r=>new TO(r));for(let r of this.plugins)r.update(this);this.observer=new k_e(this),this.inputState=new e_e(this),this.inputState.ensureHandlers(this.plugins),this.docView=new kj(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((t=document.fonts)===null||t===void 0)&&t.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let t=e.length==1&&e[0]instanceof Oc?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(t,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,i=!1,r,o=this.state;for(let x of e){if(x.startState!=o)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");o=x.state}if(this.destroyed){this.viewState.state=o;return}let s=this.hasFocus,a=0,c=null;e.some(x=>x.annotation(Vee))?(this.inputState.notifiedFocused=s,a=1):s!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=s,c=$ee(o,s),c||(a=1));let h=this.observer.delayedAndroidKey,m=null;if(h?(this.observer.clearDelayedAndroidKey(),m=this.observer.readChange(),(m&&!this.state.doc.eq(o.doc)||!this.state.selection.eq(o.selection))&&(m=null)):this.observer.clear(),o.facet(fs.phrases)!=this.state.facet(fs.phrases))return this.setState(o);r=xS.create(this,o,e),r.flags|=a;let v=this.viewState.scrollTarget;try{this.updateState=2;for(let x of e){if(v&&(v=v.map(x.changes)),x.scrollIntoView){let{main:E}=x.state.selection;v=new Z_(E.empty?E:En.cursor(E.head,E.head>E.anchor?-1:1))}for(let E of x.effects)E.is(g5)&&(v=E.value.clip(this.state))}this.viewState.update(r,v),this.bidiCache=wS.update(this.bidiCache,r.changes),r.empty||(this.updatePlugins(r),this.inputState.update(r)),t=this.docView.update(r),this.state.facet(V2)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(x=>x.isUserEvent("select.pointer")))}finally{this.updateState=0}if(r.startState.facet(x5)!=r.state.facet(x5)&&(this.viewState.mustMeasureContent=!0),(t||i||v||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),t&&this.docViewUpdate(),!r.empty)for(let x of this.state.facet(X9))try{x(r)}catch(E){Ph(this.state,E,"update listener")}(c||m)&&Promise.resolve().then(()=>{c&&this.state==c.startState&&this.dispatch(c),m&&!jee(this,m)&&h.force&&H_(this.contentDOM,h.key,h.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new Hj(e),this.plugins=e.facet(T_).map(i=>new TO(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView.destroy(),this.docView=new kj(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(T_),i=e.state.facet(T_);if(t!=i){let r=[];for(let o of i){let s=t.indexOf(o);if(s<0)r.push(new TO(o));else{let a=this.plugins[s];a.mustUpdate=e,r.push(a)}}for(let o of this.plugins)o.mustUpdate!=e&&o.destroy(this);this.plugins=r,this.pluginMap.clear()}else for(let r of this.plugins)r.mustUpdate=e;for(let r=0;r<this.plugins.length;r++)this.plugins[r].update(this);t!=i&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let t=e.value;if(t&&t.docViewUpdate)try{t.docViewUpdate(this)}catch(i){Ph(this.state,i,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,i=this.scrollDOM,r=i.scrollTop*this.scaleY,{scrollAnchorPos:o,scrollAnchorHeight:s}=this.viewState;Math.abs(r-this.viewState.scrollTop)>1&&(s=-1),this.viewState.scrollAnchorHeight=-1;try{for(let a=0;;a++){if(s<0)if(lee(i))o=-1,s=this.viewState.heightMap.height;else{let E=this.viewState.scrollAnchorAt(r);o=E.from,s=E.top}this.updateState=1;let c=this.viewState.measure(this);if(!c&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(a>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let h=[];c&4||([this.measureRequests,h]=[h,this.measureRequests]);let m=h.map(E=>{try{return E.read(this)}catch(D){return Ph(this.state,D),eN}}),v=xS.create(this,this.state,[]),x=!1;v.flags|=c,t?t.flags|=c:t=v,this.updateState=2,v.empty||(this.updatePlugins(v),this.inputState.update(v),this.updateAttrs(),x=this.docView.update(v),x&&this.docViewUpdate());for(let E=0;E<h.length;E++)if(m[E]!=eN)try{let D=h[E];D.write&&D.write(m[E],this)}catch(D){Ph(this.state,D)}if(x&&this.docView.updateSelection(!0),!v.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,s=-1;continue}else{let D=(o<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(o).top)-s;if(D>1||D<-1){r=r+D,i.scrollTop=r/this.scaleY,s=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let a of this.state.facet(X9))a(t)}get themeClasses(){return iR+" "+(this.state.facet(nR)?Jee:Xee)+" "+this.state.facet(x5)}updateAttrs(){let e=tN(this,Ree,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(o1)?"true":"false",class:"cm-content",style:`${gi.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),tN(this,eU,t);let i=this.observer.ignore(()=>{let r=q9(this.contentDOM,this.contentAttrs,t),o=q9(this.dom,this.editorAttrs,e);return r||o});return this.editorAttrs=e,this.contentAttrs=t,i}showAnnouncements(e){let t=!0;for(let i of e)for(let r of i.effects)if(r.is(Mi.announce)){t&&(this.announceDOM.textContent=""),t=!1;let o=this.announceDOM.appendChild(document.createElement("div"));o.textContent=r.value}}mountStyles(){this.styleModules=this.state.facet(V2);let e=this.state.facet(Mi.cspNonce);iv.mount(this.root,this.styleModules.concat(O_e).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.plugin!=e)&&this.pluginMap.set(e,t=this.plugins.find(i=>i.plugin==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,i){return DO(this,e,Uj(this,e,t,i))}moveByGroup(e,t){return DO(this,e,Uj(this,e,t,i=>QCe(this,e.head,i)))}visualLineSide(e,t){let i=this.bidiSpans(e),r=this.textDirectionAt(e.from),o=i[t?i.length-1:0];return En.cursor(o.side(t,r)+e.from,o.forward(!t,r)?1:-1)}moveToLineBoundary(e,t,i=!0){return WCe(this,e,t,i)}moveVertically(e,t,i){return DO(this,e,YCe(this,e,t,i))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),Lee(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let i=this.docView.coordsAt(e,t);if(!i||i.left==i.right)return i;let r=this.state.doc.lineAt(e),o=this.bidiSpans(r),s=o[Wy.find(o,e-r.from,-1,t)];return A6(i,s.dir==il.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(Oee)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>D_e)return Cee(e.length);let t=this.textDirectionAt(e.from),i;for(let o of this.bidiCache)if(o.from==e.from&&o.dir==t&&(o.fresh||bee(o.isolates,i=Ij(this,e))))return o.order;i||(i=Ij(this,e));let r=BCe(e.text,t,i);return this.bidiCache.push(new wS(e.from,e.to,t,i,!0,r)),r}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||gi.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{see(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return g5.of(new Z_(typeof e=="number"?En.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:t}=this.scrollDOM,i=this.viewState.scrollAnchorAt(e);return g5.of(new Z_(En.cursor(i.from),"start","start",i.top-e,t,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return Bu.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return Bu.define(()=>({}),{eventObservers:e})}static theme(e,t){let i=iv.newName(),r=[x5.of(i),V2.of(rR(`.${i}`,e))];return t&&t.dark&&r.push(nR.of(!0)),r}static baseTheme(e){return cC.lowest(V2.of(rR("."+iR,e,ete)))}static findFromDOM(e){var t;let i=e.querySelector(".cm-content"),r=i&&Aa.get(i)||Aa.get(e);return((t=r?.rootView)===null||t===void 0?void 0:t.view)||null}}Mi.styleModule=V2;Mi.inputHandler=Eee;Mi.clipboardInputFilter=XP;Mi.clipboardOutputFilter=JP;Mi.scrollHandler=kee;Mi.focusChangeEffect=Bee;Mi.perLineTextDirection=Oee;Mi.exceptionSink=See;Mi.updateListener=X9;Mi.editable=o1;Mi.mouseSelectionStyle=wee;Mi.dragMovesSelection=Mee;Mi.clickAddsSelectionRange=xee;Mi.decorations=p4;Mi.outerDecorations=Dee;Mi.atomicRanges=bM;Mi.bidiIsolatedRanges=Pee;Mi.scrollMargins=Uee;Mi.darkTheme=nR;Mi.cspNonce=Si.define({combine:n=>n.length?n[0]:""});Mi.contentAttributes=eU;Mi.editorAttributes=Ree;Mi.lineWrapping=Mi.contentAttributes.of({class:"cm-lineWrapping"});Mi.announce=to.define();const D_e=4096,eN={};class wS{constructor(e,t,i,r,o,s){this.from=e,this.to=t,this.dir=i,this.isolates=r,this.fresh=o,this.order=s}static update(e,t){if(t.empty&&!e.some(o=>o.fresh))return e;let i=[],r=e.length?e[e.length-1].dir:il.LTR;for(let o=Math.max(0,e.length-10);o<e.length;o++){let s=e[o];s.dir==r&&!t.touchesRange(s.from,s.to)&&i.push(new wS(t.mapPos(s.from,1),t.mapPos(s.to,-1),s.dir,s.isolates,!1,s.order))}return i}}function tN(n,e,t){for(let i=n.state.facet(e),r=i.length-1;r>=0;r--){let o=i[r],s=typeof o=="function"?o(n):o;s&&Y9(s,t)}return t}const P_e=gi.mac?"mac":gi.windows?"win":gi.linux?"linux":"key";function U_e(n,e){const t=n.split(/-(?!$)/);let i=t[t.length-1];i=="Space"&&(i=" ");let r,o,s,a;for(let c=0;c<t.length-1;++c){const h=t[c];if(/^(cmd|meta|m)$/i.test(h))a=!0;else if(/^a(lt)?$/i.test(h))r=!0;else if(/^(c|ctrl|control)$/i.test(h))o=!0;else if(/^s(hift)?$/i.test(h))s=!0;else if(/^mod$/i.test(h))e=="mac"?a=!0:o=!0;else throw new Error("Unrecognized modifier name: "+h)}return r&&(i="Alt-"+i),o&&(i="Ctrl-"+i),a&&(i="Meta-"+i),s&&(i="Shift-"+i),i}function M5(n,e,t){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t!==!1&&e.shiftKey&&(n="Shift-"+n),n}const K_e=cC.default(Mi.domEventHandlers({keydown(n,e){return nte(tte(e.state),n,e,"editor")}})),oU=Si.define({enables:K_e}),nN=new WeakMap;function tte(n){let e=n.facet(oU),t=nN.get(e);return t||nN.set(e,t=z_e(e.reduce((i,r)=>i.concat(r),[]))),t}function L_e(n,e,t){return nte(tte(n.state),e,n,t)}let Ty=null;const F_e=4e3;function z_e(n,e=P_e){let t=Object.create(null),i=Object.create(null),r=(s,a)=>{let c=i[s];if(c==null)i[s]=a;else if(c!=a)throw new Error("Key binding "+s+" is used both as a regular binding and as a multi-stroke prefix")},o=(s,a,c,h,m)=>{var v,x;let E=t[s]||(t[s]=Object.create(null)),D=a.split(/ (?!$)/).map(W=>U_e(W,e));for(let W=1;W<D.length;W++){let q=D.slice(0,W).join(" ");r(q,!0),E[q]||(E[q]={preventDefault:!0,stopPropagation:!1,run:[V=>{let H=Ty={view:V,prefix:q,scope:s};return setTimeout(()=>{Ty==H&&(Ty=null)},F_e),!0}]})}let P=D.join(" ");r(P,!1);let F=E[P]||(E[P]={preventDefault:!1,stopPropagation:!1,run:((x=(v=E._any)===null||v===void 0?void 0:v.run)===null||x===void 0?void 0:x.slice())||[]});c&&F.run.push(c),h&&(F.preventDefault=!0),m&&(F.stopPropagation=!0)};for(let s of n){let a=s.scope?s.scope.split(" "):["editor"];if(s.any)for(let h of a){let m=t[h]||(t[h]=Object.create(null));m._any||(m._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:v}=s;for(let x in m)m[x].run.push(E=>v(E,oR))}let c=s[e]||s.key;if(c)for(let h of a)o(h,c,s.run,s.preventDefault,s.stopPropagation),s.shift&&o(h,"Shift-"+c,s.shift,s.preventDefault,s.stopPropagation)}return t}let oR=null;function nte(n,e,t,i){oR=e;let r=lCe(e),o=gd(r,0),s=Fg(o)==r.length&&r!=" ",a="",c=!1,h=!1,m=!1;Ty&&Ty.view==t&&Ty.scope==i&&(a=Ty.prefix+" ",Wee.indexOf(e.keyCode)<0&&(h=!0,Ty=null));let v=new Set,x=F=>{if(F){for(let W of F.run)if(!v.has(W)&&(v.add(W),W(t)))return F.stopPropagation&&(m=!0),!0;F.preventDefault&&(F.stopPropagation&&(m=!0),h=!0)}return!1},E=n[i],D,P;return E&&(x(E[a+M5(r,e,!s)])?c=!0:s&&(e.altKey||e.metaKey||e.ctrlKey)&&!(gi.windows&&e.ctrlKey&&e.altKey)&&!(gi.mac&&e.altKey&&!(e.ctrlKey||e.metaKey))&&(D=rv[e.keyCode])&&D!=r?(x(E[a+M5(D,e,!0)])||e.shiftKey&&(P=h4[e.keyCode])!=r&&P!=D&&x(E[a+M5(P,e,!1)]))&&(c=!0):s&&e.shiftKey&&x(E[a+M5(r,e,!0)])&&(c=!0),!c&&x(E._any)&&(c=!0)),h&&(c=!0),c&&m&&e.stopPropagation(),oR=null,c}class CM{constructor(e,t,i,r,o){this.className=e,this.left=t,this.top=i,this.width=r,this.height=o}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,i){if(i.empty){let r=e.coordsAtPos(i.head,i.assoc||1);if(!r)return[];let o=ite(e);return[new CM(t,r.left-o.left,r.top-o.top,null,r.bottom-r.top)]}else return j_e(e,t,i)}}function ite(n){let e=n.scrollDOM.getBoundingClientRect();return{left:(n.textDirection==il.LTR?e.left:e.right-n.scrollDOM.clientWidth*n.scaleX)-n.scrollDOM.scrollLeft*n.scaleX,top:e.top-n.scrollDOM.scrollTop*n.scaleY}}function iN(n,e,t,i){let r=n.coordsAtPos(e,t*2);if(!r)return i;let o=n.dom.getBoundingClientRect(),s=(r.top+r.bottom)/2,a=n.posAtCoords({x:o.left+1,y:s}),c=n.posAtCoords({x:o.right-1,y:s});return a==null||c==null?i:{from:Math.max(i.from,Math.min(a,c)),to:Math.min(i.to,Math.max(a,c))}}function j_e(n,e,t){if(t.to<=n.viewport.from||t.from>=n.viewport.to)return[];let i=Math.max(t.from,n.viewport.from),r=Math.min(t.to,n.viewport.to),o=n.textDirection==il.LTR,s=n.contentDOM,a=s.getBoundingClientRect(),c=ite(n),h=s.querySelector(".cm-line"),m=h&&window.getComputedStyle(h),v=a.left+(m?parseInt(m.paddingLeft)+Math.min(0,parseInt(m.textIndent)):0),x=a.right-(m?parseInt(m.paddingRight):0),E=eR(n,i,1),D=eR(n,r,-1),P=E.type==Uh.Text?E:null,F=D.type==Uh.Text?D:null;if(P&&(n.lineWrapping||E.widgetLineBreaks)&&(P=iN(n,i,1,P)),F&&(n.lineWrapping||D.widgetLineBreaks)&&(F=iN(n,r,-1,F)),P&&F&&P.from==F.from&&P.to==F.to)return q(V(t.from,t.to,P));{let X=P?V(t.from,null,P):H(E,!1),Z=F?V(null,t.to,F):H(D,!0),G=[];return(P||E).to<(F||D).from-(P&&F?1:0)||E.widgetLineBreaks>1&&X.bottom+n.defaultLineHeight/2<Z.top?G.push(W(v,X.bottom,x,Z.top)):X.bottom<Z.top&&n.elementAtHeight((X.bottom+Z.top)/2).type==Uh.Text&&(X.bottom=Z.top=(X.bottom+Z.top)/2),q(X).concat(G).concat(q(Z))}function W(X,Z,G,oe){return new CM(e,X-c.left,Z-c.top,G-X,oe-Z)}function q({top:X,bottom:Z,horizontal:G}){let oe=[];for(let ue=0;ue<G.length;ue+=2)oe.push(W(G[ue],X,G[ue+1],Z));return oe}function V(X,Z,G){let oe=1e9,ue=-1e9,xe=[];function me(Te,je,Ee,qe,At){let gt=n.coordsAtPos(Te,Te==G.to?-2:2),Le=n.coordsAtPos(Ee,Ee==G.from?2:-2);!gt||!Le||(oe=Math.min(gt.top,Le.top,oe),ue=Math.max(gt.bottom,Le.bottom,ue),At==il.LTR?xe.push(o&&je?v:gt.left,o&&qe?x:Le.right):xe.push(!o&&qe?v:Le.left,!o&&je?x:gt.right))}let Ie=X??G.from,Me=Z??G.to;for(let Te of n.visibleRanges)if(Te.to>Ie&&Te.from<Me)for(let je=Math.max(Te.from,Ie),Ee=Math.min(Te.to,Me);;){let qe=n.state.doc.lineAt(je);for(let At of n.bidiSpans(qe)){let gt=At.from+qe.from,Le=At.to+qe.from;if(gt>=Ee)break;Le>je&&me(Math.max(gt,je),X==null&&gt<=Ie,Math.min(Le,Ee),Z==null&&Le>=Me,At.dir)}if(je=qe.to+1,je>=Ee)break}return xe.length==0&&me(Ie,X==null,Me,Z==null,n.textDirection),{top:oe,bottom:ue,horizontal:xe}}function H(X,Z){let G=a.top+(Z?X.top:X.bottom);return{top:G,bottom:G,horizontal:[]}}}function N_e(n,e){return n.constructor==e.constructor&&n.eq(e)}class G_e{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(yw)!=e.state.facet(yw)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let t=0,i=e.facet(yw);for(;t<i.length&&i[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:t}=this.view;(e!=this.scaleX||t!=this.scaleY)&&(this.scaleX=e,this.scaleY=t,this.dom.style.transform=`scale(${1/e}, ${1/t})`)}draw(e){if(e.length!=this.drawn.length||e.some((t,i)=>!N_e(t,this.drawn[i]))){let t=this.dom.firstChild,i=0;for(let r of e)r.update&&t&&r.constructor&&this.drawn[i].constructor&&r.update(t,this.drawn[i])?(t=t.nextSibling,i++):this.dom.insertBefore(r.draw(),t);for(;t;){let r=t.nextSibling;t.remove(),t=r}this.drawn=e,gi.safari&&gi.safari_version>=26&&(this.dom.style.display=this.dom.firstChild?"":"none")}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const yw=Si.define();function rte(n){return[Bu.define(e=>new G_e(e,n)),yw.of(n)]}const m4=Si.define({combine(n){return Om(n,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})}});function W_e(n={}){return[m4.of(n),Q_e,Y_e,q_e,Iee.of(!0)]}function ote(n){return n.startState.facet(m4)!=n.state.facet(m4)}const Q_e=rte({above:!0,markers(n){let{state:e}=n,t=e.facet(m4),i=[];for(let r of e.selection.ranges){let o=r==e.selection.main;if(r.empty||t.drawRangeCursor){let s=o?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",a=r.empty?r:En.cursor(r.head,r.head>r.anchor?-1:1);for(let c of CM.forRange(n,s,a))i.push(c)}}return i},update(n,e){n.transactions.some(i=>i.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let t=ote(n);return t&&rN(n.state,e),n.docChanged||n.selectionSet||t},mount(n,e){rN(e.state,n)},class:"cm-cursorLayer"});function rN(n,e){e.style.animationDuration=n.facet(m4).cursorBlinkRate+"ms"}const Y_e=rte({above:!1,markers(n){return n.state.selection.ranges.map(e=>e.empty?[]:CM.forRange(n,"cm-selectionBackground",e)).reduce((e,t)=>e.concat(t))},update(n,e){return n.docChanged||n.selectionSet||n.viewportChanged||ote(n)},class:"cm-selectionLayer"}),q_e=cC.highest(Mi.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}})),ste=to.define({map(n,e){return n==null?null:e.mapPos(n)}}),Z2=Ic.define({create(){return null},update(n,e){return n!=null&&(n=e.changes.mapPos(n)),e.effects.reduce((t,i)=>i.is(ste)?i.value:t,n)}}),V_e=Bu.fromClass(class{constructor(n){this.view=n,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(n){var e;let t=n.state.field(Z2);t==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(n.startState.field(Z2)!=t||n.docChanged||n.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:n}=this,e=n.state.field(Z2),t=e!=null&&n.coordsAtPos(e);if(!t)return null;let i=n.scrollDOM.getBoundingClientRect();return{left:t.left-i.left+n.scrollDOM.scrollLeft*n.scaleX,top:t.top-i.top+n.scrollDOM.scrollTop*n.scaleY,height:t.bottom-t.top}}drawCursor(n){if(this.cursor){let{scaleX:e,scaleY:t}=this.view;n?(this.cursor.style.left=n.left/e+"px",this.cursor.style.top=n.top/t+"px",this.cursor.style.height=n.height/t+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(n){this.view.state.field(Z2)!=n&&this.view.dispatch({effects:ste.of(n)})}},{eventObservers:{dragover(n){this.setDropPos(this.view.posAtCoords({x:n.clientX,y:n.clientY}))},dragleave(n){(n.target==this.view.contentDOM||!this.view.contentDOM.contains(n.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function $_e(){return[Z2,V_e]}function oN(n,e,t,i,r){e.lastIndex=0;for(let o=n.iterRange(t,i),s=t,a;!o.next().done;s+=o.value.length)if(!o.lineBreak)for(;a=e.exec(o.value);)r(s+a.index,a)}function H_e(n,e){let t=n.visibleRanges;if(t.length==1&&t[0].from==n.viewport.from&&t[0].to==n.viewport.to)return t;let i=[];for(let{from:r,to:o}of t)r=Math.max(n.state.doc.lineAt(r).from,r-e),o=Math.min(n.state.doc.lineAt(o).to,o+e),i.length&&i[i.length-1].to>=r?i[i.length-1].to=o:i.push({from:r,to:o});return i}class Z_e{constructor(e){const{regexp:t,decoration:i,decorate:r,boundary:o,maxLength:s=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,r)this.addMatch=(a,c,h,m)=>r(m,h,h+a[0].length,a,c);else if(typeof i=="function")this.addMatch=(a,c,h,m)=>{let v=i(a,c,h);v&&m(h,h+a[0].length,v)};else if(i)this.addMatch=(a,c,h,m)=>m(h,h+a[0].length,i);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=o,this.maxLength=s}createDeco(e){let t=new y1,i=t.add.bind(t);for(let{from:r,to:o}of H_e(e,this.maxLength))oN(e.state.doc,this.regexp,r,o,(s,a)=>this.addMatch(a,e,s,i));return t.finish()}updateDeco(e,t){let i=1e9,r=-1;return e.docChanged&&e.changes.iterChanges((o,s,a,c)=>{c>=e.view.viewport.from&&a<=e.view.viewport.to&&(i=Math.min(a,i),r=Math.max(c,r))}),e.viewportMoved||r-i>1e3?this.createDeco(e.view):r>-1?this.updateRange(e.view,t.map(e.changes),i,r):t}updateRange(e,t,i,r){for(let o of e.visibleRanges){let s=Math.max(o.from,i),a=Math.min(o.to,r);if(a>=s){let c=e.state.doc.lineAt(s),h=c.to<a?e.state.doc.lineAt(a):c,m=Math.max(o.from,c.from),v=Math.min(o.to,h.to);if(this.boundary){for(;s>c.from;s--)if(this.boundary.test(c.text[s-1-c.from])){m=s;break}for(;a<h.to;a++)if(this.boundary.test(h.text[a-h.from])){v=a;break}}let x=[],E,D=(P,F,W)=>x.push(W.range(P,F));if(c==h)for(this.regexp.lastIndex=m-c.from;(E=this.regexp.exec(c.text))&&E.index<v-c.from;)this.addMatch(E,e,E.index+c.from,D);else oN(e.state.doc,this.regexp,m,v,(P,F)=>this.addMatch(F,e,P,D));t=t.update({filterFrom:m,filterTo:v,filter:(P,F)=>P<m||F>v,add:x})}}return t}}const sR=/x/.unicode!=null?"gu":"g",X_e=new RegExp(`[\0-\b
--\u2028\u2029\uFEFF-]`,sR),J_e={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let KO=null;function exe(){var n;if(KO==null&&typeof document<"u"&&document.body){let e=document.body.style;KO=((n=e.tabSize)!==null&&n!==void 0?n:e.MozTabSize)!=null}return KO||!1}const vw=Si.define({combine(n){let e=Om(n,{render:null,specialChars:X_e,addSpecialChars:null});return(e.replaceTabs=!exe())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,sR)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,sR)),e}});function txe(n={}){return[vw.of(n),nxe()]}let sN=null;function nxe(){return sN||(sN=Bu.fromClass(class{constructor(n){this.view=n,this.decorations=wr.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(n.state.facet(vw)),this.decorations=this.decorator.createDeco(n)}makeDecorator(n){return new Z_e({regexp:n.specialChars,decoration:(e,t,i)=>{let{doc:r}=t.state,o=gd(e[0],0);if(o==9){let s=r.lineAt(i),a=t.state.tabSize,c=Gx(s.text,a,i-s.from);return wr.replace({widget:new sxe((a-c%a)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[o]||(this.decorationCache[o]=wr.replace({widget:new oxe(n,o)}))},boundary:n.replaceTabs?void 0:/[^]/})}update(n){let e=n.state.facet(vw);n.startState.facet(vw)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(n.view)):this.decorations=this.decorator.updateDeco(n,this.decorations)}},{decorations:n=>n.decorations}))}const ixe="";function rxe(n){return n>=32?ixe:n==10?"":String.fromCharCode(9216+n)}class oxe extends Av{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=rxe(this.code),i=e.state.phrase("Control character")+" "+(J_e[this.code]||"0x"+this.code.toString(16)),r=this.options.render&&this.options.render(this.code,i,t);if(r)return r;let o=document.createElement("span");return o.textContent=t,o.title=i,o.setAttribute("aria-label",i),o.className="cm-specialChar",o}ignoreEvent(){return!1}}class sxe extends Av{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function axe(){return uxe}const lxe=wr.line({class:"cm-activeLine"}),uxe=Bu.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.docChanged||n.selectionSet)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=-1,t=[];for(let i of n.state.selection.ranges){let r=n.lineBlockAt(i.head);r.from>e&&(t.push(lxe.range(r.from)),e=r.from)}return wr.set(t)}},{decorations:n=>n.decorations}),aR=2e3;function cxe(n,e,t){let i=Math.min(e.line,t.line),r=Math.max(e.line,t.line),o=[];if(e.off>aR||t.off>aR||e.col<0||t.col<0){let s=Math.min(e.off,t.off),a=Math.max(e.off,t.off);for(let c=i;c<=r;c++){let h=n.doc.line(c);h.length<=a&&o.push(En.range(h.from+s,h.to+a))}}else{let s=Math.min(e.col,t.col),a=Math.max(e.col,t.col);for(let c=i;c<=r;c++){let h=n.doc.line(c),m=L9(h.text,s,n.tabSize,!0);if(m<0)o.push(En.cursor(h.to));else{let v=L9(h.text,a,n.tabSize);o.push(En.range(h.from+m,h.from+v))}}}return o}function Axe(n,e){let t=n.coordsAtPos(n.viewport.from);return t?Math.round(Math.abs((t.left-e)/n.defaultCharacterWidth)):-1}function aN(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1),i=n.state.doc.lineAt(t),r=t-i.from,o=r>aR?-1:r==i.length?Axe(n,e.clientX):Gx(i.text,n.state.tabSize,t-i.from);return{line:i.number,col:o,off:r}}function hxe(n,e){let t=aN(n,e),i=n.state.selection;return t?{update(r){if(r.docChanged){let o=r.changes.mapPos(r.startState.doc.line(t.line).from),s=r.state.doc.lineAt(o);t={line:s.number,col:t.col,off:Math.min(t.off,s.length)},i=i.map(r.changes)}},get(r,o,s){let a=aN(n,r);if(!a)return i;let c=cxe(n.state,t,a);return c.length?s?En.create(c.concat(i.ranges)):En.create(c):i}}:null}function dxe(n){let e=(t=>t.altKey&&t.button==0);return Mi.mouseSelectionStyle.of((t,i)=>e(i)?hxe(t,i):null)}const fxe={Alt:[18,n=>!!n.altKey],Control:[17,n=>!!n.ctrlKey],Shift:[16,n=>!!n.shiftKey],Meta:[91,n=>!!n.metaKey]},pxe={style:"cursor: crosshair"};function mxe(n={}){let[e,t]=fxe[n.key||"Alt"],i=Bu.fromClass(class{constructor(r){this.view=r,this.isDown=!1}set(r){this.isDown!=r&&(this.isDown=r,this.view.update([]))}},{eventObservers:{keydown(r){this.set(r.keyCode==e||t(r))},keyup(r){(r.keyCode==e||!t(r))&&this.set(!1)},mousemove(r){this.set(t(r))}}});return[i,Mi.contentAttributes.of(r=>{var o;return!((o=r.plugin(i))===null||o===void 0)&&o.isDown?pxe:null})]}const C2="-10000px";class ate{constructor(e,t,i,r){this.facet=t,this.createTooltipView=i,this.removeTooltipView=r,this.input=e.state.facet(t),this.tooltips=this.input.filter(s=>s);let o=null;this.tooltipViews=this.tooltips.map(s=>o=i(s,o))}update(e,t){var i;let r=e.state.facet(this.facet),o=r.filter(c=>c);if(r===this.input){for(let c of this.tooltipViews)c.update&&c.update(e);return!1}let s=[],a=t?[]:null;for(let c=0;c<o.length;c++){let h=o[c],m=-1;if(h){for(let v=0;v<this.tooltips.length;v++){let x=this.tooltips[v];x&&x.create==h.create&&(m=v)}if(m<0)s[c]=this.createTooltipView(h,c?s[c-1]:null),a&&(a[c]=!!h.above);else{let v=s[c]=this.tooltipViews[m];a&&(a[c]=t[m]),v.update&&v.update(e)}}}for(let c of this.tooltipViews)s.indexOf(c)<0&&(this.removeTooltipView(c),(i=c.destroy)===null||i===void 0||i.call(c));return t&&(a.forEach((c,h)=>t[h]=c),t.length=a.length),this.input=r,this.tooltips=o,this.tooltipViews=s,!0}}function gxe(n){let e=n.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:e.clientHeight,right:e.clientWidth}}const LO=Si.define({combine:n=>{var e,t,i;return{position:gi.ios?"absolute":((e=n.find(r=>r.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((t=n.find(r=>r.parent))===null||t===void 0?void 0:t.parent)||null,tooltipSpace:((i=n.find(r=>r.tooltipSpace))===null||i===void 0?void 0:i.tooltipSpace)||gxe}}}),lN=new WeakMap,sU=Bu.fromClass(class{constructor(n){this.view=n,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=n.state.facet(LO);this.position=e.position,this.parent=e.parent,this.classes=n.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new ate(n,d6,(t,i)=>this.createTooltip(t,i),t=>{this.resizeObserver&&this.resizeObserver.unobserve(t.dom),t.dom.remove()}),this.above=this.manager.tooltips.map(t=>!!t.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(t=>{Date.now()>this.lastTransaction-50&&t.length>0&&t[t.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),n.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let n of this.manager.tooltipViews)this.intersectionObserver.observe(n.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(n){n.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(n,this.above);e&&this.observeIntersection();let t=e||n.geometryChanged,i=n.state.facet(LO);if(i.position!=this.position&&!this.madeAbsolute){this.position=i.position;for(let r of this.manager.tooltipViews)r.dom.style.position=this.position;t=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let r of this.manager.tooltipViews)this.container.appendChild(r.dom);t=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);t&&this.maybeMeasure()}createTooltip(n,e){let t=n.create(this.view),i=e?e.dom:null;if(t.dom.classList.add("cm-tooltip"),n.arrow&&!t.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let r=document.createElement("div");r.className="cm-tooltip-arrow",t.dom.appendChild(r)}return t.dom.style.position=this.position,t.dom.style.top=C2,t.dom.style.left="0px",this.container.insertBefore(t.dom,i),t.mount&&t.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(t.dom),t}destroy(){var n,e,t;this.view.win.removeEventListener("resize",this.measureSoon);for(let i of this.manager.tooltipViews)i.dom.remove(),(n=i.destroy)===null||n===void 0||n.call(i);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(t=this.intersectionObserver)===null||t===void 0||t.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let n=1,e=1,t=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:o}=this.manager.tooltipViews[0];if(gi.gecko)t=o.offsetParent!=this.container.ownerDocument.body;else if(o.style.top==C2&&o.style.left=="0px"){let s=o.getBoundingClientRect();t=Math.abs(s.top+1e4)>1||Math.abs(s.left)>1}}if(t||this.position=="absolute")if(this.parent){let o=this.parent.getBoundingClientRect();o.width&&o.height&&(n=o.width/this.parent.offsetWidth,e=o.height/this.parent.offsetHeight)}else({scaleX:n,scaleY:e}=this.view.viewState);let i=this.view.scrollDOM.getBoundingClientRect(),r=tU(this.view);return{visible:{left:i.left+r.left,top:i.top+r.top,right:i.right-r.right,bottom:i.bottom-r.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((o,s)=>{let a=this.manager.tooltipViews[s];return a.getCoords?a.getCoords(o.pos):this.view.coordsAtPos(o.pos)}),size:this.manager.tooltipViews.map(({dom:o})=>o.getBoundingClientRect()),space:this.view.state.facet(LO).tooltipSpace(this.view),scaleX:n,scaleY:e,makeAbsolute:t}}writeMeasure(n){var e;if(n.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let a of this.manager.tooltipViews)a.dom.style.position="absolute"}let{visible:t,space:i,scaleX:r,scaleY:o}=n,s=[];for(let a=0;a<this.manager.tooltips.length;a++){let c=this.manager.tooltips[a],h=this.manager.tooltipViews[a],{dom:m}=h,v=n.pos[a],x=n.size[a];if(!v||c.clip!==!1&&(v.bottom<=Math.max(t.top,i.top)||v.top>=Math.min(t.bottom,i.bottom)||v.right<Math.max(t.left,i.left)-.1||v.left>Math.min(t.right,i.right)+.1)){m.style.top=C2;continue}let E=c.arrow?h.dom.querySelector(".cm-tooltip-arrow"):null,D=E?7:0,P=x.right-x.left,F=(e=lN.get(h))!==null&&e!==void 0?e:x.bottom-x.top,W=h.offset||vxe,q=this.view.textDirection==il.LTR,V=x.width>i.right-i.left?q?i.left:i.right-x.width:q?Math.max(i.left,Math.min(v.left-(E?14:0)+W.x,i.right-P)):Math.min(Math.max(i.left,v.left-P+(E?14:0)-W.x),i.right-P),H=this.above[a];!c.strictSide&&(H?v.top-F-D-W.y<i.top:v.bottom+F+D+W.y>i.bottom)&&H==i.bottom-v.bottom>v.top-i.top&&(H=this.above[a]=!H);let X=(H?v.top-i.top:i.bottom-v.bottom)-D;if(X<F&&h.resize!==!1){if(X<this.view.defaultLineHeight){m.style.top=C2;continue}lN.set(h,F),m.style.height=(F=X)/o+"px"}else m.style.height&&(m.style.height="");let Z=H?v.top-F-D-W.y:v.bottom+D+W.y,G=V+P;if(h.overlap!==!0)for(let oe of s)oe.left<G&&oe.right>V&&oe.top<Z+F&&oe.bottom>Z&&(Z=H?oe.top-F-2-D:oe.bottom+D+2);if(this.position=="absolute"?(m.style.top=(Z-n.parent.top)/o+"px",uN(m,(V-n.parent.left)/r)):(m.style.top=Z/o+"px",uN(m,V/r)),E){let oe=v.left+(q?W.x:-W.x)-(V+14-7);E.style.left=oe/r+"px"}h.overlap!==!0&&s.push({left:V,top:Z,right:G,bottom:Z+F}),m.classList.toggle("cm-tooltip-above",H),m.classList.toggle("cm-tooltip-below",!H),h.positioned&&h.positioned(n.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let n of this.manager.tooltipViews)n.dom.style.top=C2}},{eventObservers:{scroll(){this.maybeMeasure()}}});function uN(n,e){let t=parseInt(n.style.left,10);(isNaN(t)||Math.abs(e-t)>1)&&(n.style.left=e+"px")}const yxe=Mi.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),vxe={x:0,y:0},d6=Si.define({enables:[sU,yxe]}),SS=Si.define({combine:n=>n.reduce((e,t)=>e.concat(t),[])});class f6{static create(e){return new f6(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new ate(e,SS,(t,i)=>this.createHostedView(t,i),t=>t.dom.remove())}createHostedView(e,t){let i=e.create(this.view);return i.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(i.dom,t?t.dom.nextSibling:this.dom.firstChild),this.mounted&&i.mount&&i.mount(this.view),i}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(e){for(let t of this.manager.tooltipViews)t.positioned&&t.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let t of this.manager.tooltipViews)(e=t.destroy)===null||e===void 0||e.call(t)}passProp(e){let t;for(let i of this.manager.tooltipViews){let r=i[e];if(r!==void 0){if(t===void 0)t=r;else if(t!==r)return}}return t}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const bxe=d6.compute([SS],n=>{let e=n.facet(SS);return e.length===0?null:{pos:Math.min(...e.map(t=>t.pos)),end:Math.max(...e.map(t=>{var i;return(i=t.end)!==null&&i!==void 0?i:t.pos})),create:f6.create,above:e[0].above,arrow:e.some(t=>t.arrow)}});class Cxe{constructor(e,t,i,r,o){this.view=e,this.source=t,this.field=i,this.setHover=r,this.hoverTime=o,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:t}=this,i=e.docView.nearest(t.target);if(!i)return;let r,o=1;if(i instanceof Gy)r=i.posAtStart;else{if(r=e.posAtCoords(t),r==null)return;let a=e.coordsAtPos(r);if(!a||t.y<a.top||t.y>a.bottom||t.x<a.left-e.defaultCharacterWidth||t.x>a.right+e.defaultCharacterWidth)return;let c=e.bidiSpans(e.state.doc.lineAt(r)).find(m=>m.from<=r&&m.to>=r),h=c&&c.dir==il.RTL?-1:1;o=t.x<a.left?-h:h}let s=this.source(e,r,o);if(s?.then){let a=this.pending={pos:r};s.then(c=>{this.pending==a&&(this.pending=null,c&&!(Array.isArray(c)&&!c.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(c)?c:[c])}))},c=>Ph(e.state,c,"hover tooltip"))}else s&&!(Array.isArray(s)&&!s.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(s)?s:[s])})}get tooltip(){let e=this.view.plugin(sU),t=e?e.manager.tooltips.findIndex(i=>i.create==f6.create):-1;return t>-1?e.manager.tooltipViews[t]:null}mousemove(e){var t,i;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:r,tooltip:o}=this;if(r.length&&o&&!_xe(o.dom,e)||this.pending){let{pos:s}=r[0]||this.pending,a=(i=(t=r[0])===null||t===void 0?void 0:t.end)!==null&&i!==void 0?i:s;(s==a?this.view.posAtCoords(this.lastMove)!=s:!xxe(this.view,s,a,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:t}=this;if(t.length){let{tooltip:i}=this;i&&i.dom.contains(e.relatedTarget)?this.watchTooltipLeave(i.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let t=i=>{e.removeEventListener("mouseleave",t),this.active.length&&!this.view.dom.contains(i.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",t)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const w5=4;function _xe(n,e){let{left:t,right:i,top:r,bottom:o}=n.getBoundingClientRect(),s;if(s=n.querySelector(".cm-tooltip-arrow")){let a=s.getBoundingClientRect();r=Math.min(a.top,r),o=Math.max(a.bottom,o)}return e.clientX>=t-w5&&e.clientX<=i+w5&&e.clientY>=r-w5&&e.clientY<=o+w5}function xxe(n,e,t,i,r,o){let s=n.scrollDOM.getBoundingClientRect(),a=n.documentTop+n.documentPadding.top+n.contentHeight;if(s.left>i||s.right<i||s.top>r||Math.min(s.bottom,a)<r)return!1;let c=n.posAtCoords({x:i,y:r},!1);return c>=e&&c<=t}function Mxe(n,e={}){let t=to.define(),i=Ic.define({create(){return[]},update(r,o){if(r.length&&(e.hideOnChange&&(o.docChanged||o.selection)?r=[]:e.hideOn&&(r=r.filter(s=>!e.hideOn(o,s))),o.docChanged)){let s=[];for(let a of r){let c=o.changes.mapPos(a.pos,-1,Rh.TrackDel);if(c!=null){let h=Object.assign(Object.create(null),a);h.pos=c,h.end!=null&&(h.end=o.changes.mapPos(h.end)),s.push(h)}}r=s}for(let s of o.effects)s.is(t)&&(r=s.value),s.is(wxe)&&(r=[]);return r},provide:r=>SS.from(r)});return{active:i,extension:[i,Bu.define(r=>new Cxe(r,n,i,t,e.hoverTime||300)),bxe]}}function lte(n,e){let t=n.plugin(sU);if(!t)return null;let i=t.manager.tooltips.indexOf(e);return i<0?null:t.manager.tooltipViews[i]}const wxe=to.define(),cN=Si.define({combine(n){let e,t;for(let i of n)e=e||i.topContainer,t=t||i.bottomContainer;return{topContainer:e,bottomContainer:t}}});function g4(n,e){let t=n.plugin(ute),i=t?t.specs.indexOf(e):-1;return i>-1?t.panels[i]:null}const ute=Bu.fromClass(class{constructor(n){this.input=n.state.facet(y4),this.specs=this.input.filter(t=>t),this.panels=this.specs.map(t=>t(n));let e=n.state.facet(cN);this.top=new S5(n,!0,e.topContainer),this.bottom=new S5(n,!1,e.bottomContainer),this.top.sync(this.panels.filter(t=>t.top)),this.bottom.sync(this.panels.filter(t=>!t.top));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(n){let e=n.state.facet(cN);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new S5(n.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new S5(n.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let t=n.state.facet(y4);if(t!=this.input){let i=t.filter(c=>c),r=[],o=[],s=[],a=[];for(let c of i){let h=this.specs.indexOf(c),m;h<0?(m=c(n.view),a.push(m)):(m=this.panels[h],m.update&&m.update(n)),r.push(m),(m.top?o:s).push(m)}this.specs=i,this.panels=r,this.top.sync(o),this.bottom.sync(s);for(let c of a)c.dom.classList.add("cm-panel"),c.mount&&c.mount()}else for(let i of this.panels)i.update&&i.update(n)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:n=>Mi.scrollMargins.of(e=>{let t=e.plugin(n);return t&&{top:t.top.scrollMargin(),bottom:t.bottom.scrollMargin()}})});class S5{constructor(e,t,i){this.view=e,this.top=t,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=AN(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=AN(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function AN(n){let e=n.nextSibling;return n.remove(),e}const y4=Si.define({enables:ute});class l0 extends $b{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}l0.prototype.elementClass="";l0.prototype.toDOM=void 0;l0.prototype.mapMode=Rh.TrackBefore;l0.prototype.startSide=l0.prototype.endSide=-1;l0.prototype.point=!0;const bw=Si.define(),Sxe=Si.define(),Exe={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>Vo.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{},side:"before"},b3=Si.define();function cte(n){return[Ate(),b3.of({...Exe,...n})]}const hN=Si.define({combine:n=>n.some(e=>e)});function Ate(n){return[Bxe]}const Bxe=Bu.fromClass(class{constructor(n){this.view=n,this.domAfter=null,this.prevViewport=n.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=n.state.facet(b3).map(e=>new fN(n,e)),this.fixed=!n.state.facet(hN);for(let e of this.gutters)e.config.side=="after"?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),n.scrollDOM.insertBefore(this.dom,n.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(n){if(this.updateGutters(n)){let e=this.prevViewport,t=n.view.viewport,i=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(i<(t.to-t.from)*.8)}if(n.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet(hN)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=n.view.viewport}syncGutters(n){let e=this.dom.nextSibling;n&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let t=Vo.iter(this.view.state.facet(bw),this.view.viewport.from),i=[],r=this.gutters.map(o=>new Oxe(o,this.view.viewport,-this.view.documentPadding.top));for(let o of this.view.viewportLineBlocks)if(i.length&&(i=[]),Array.isArray(o.type)){let s=!0;for(let a of o.type)if(a.type==Uh.Text&&s){lR(t,i,a.from);for(let c of r)c.line(this.view,a,i);s=!1}else if(a.widget)for(let c of r)c.widget(this.view,a)}else if(o.type==Uh.Text){lR(t,i,o.from);for(let s of r)s.line(this.view,o,i)}else if(o.widget)for(let s of r)s.widget(this.view,o);for(let o of r)o.finish();n&&(this.view.scrollDOM.insertBefore(this.dom,e),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(n){let e=n.startState.facet(b3),t=n.state.facet(b3),i=n.docChanged||n.heightChanged||n.viewportChanged||!Vo.eq(n.startState.facet(bw),n.state.facet(bw),n.view.viewport.from,n.view.viewport.to);if(e==t)for(let r of this.gutters)r.update(n)&&(i=!0);else{i=!0;let r=[];for(let o of t){let s=e.indexOf(o);s<0?r.push(new fN(this.view,o)):(this.gutters[s].update(n),r.push(this.gutters[s]))}for(let o of this.gutters)o.dom.remove(),r.indexOf(o)<0&&o.destroy();for(let o of r)o.config.side=="after"?this.getDOMAfter().appendChild(o.dom):this.dom.appendChild(o.dom);this.gutters=r}return i}destroy(){for(let n of this.gutters)n.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:n=>Mi.scrollMargins.of(e=>{let t=e.plugin(n);if(!t||t.gutters.length==0||!t.fixed)return null;let i=t.dom.offsetWidth*e.scaleX,r=t.domAfter?t.domAfter.offsetWidth*e.scaleX:0;return e.textDirection==il.LTR?{left:i,right:r}:{right:i,left:r}})});function dN(n){return Array.isArray(n)?n:[n]}function lR(n,e,t){for(;n.value&&n.from<=t;)n.from==t&&e.push(n.value),n.next()}class Oxe{constructor(e,t,i){this.gutter=e,this.height=i,this.i=0,this.cursor=Vo.iter(e.markers,t.from)}addElement(e,t,i){let{gutter:r}=this,o=(t.top-this.height)/e.scaleY,s=t.height/e.scaleY;if(this.i==r.elements.length){let a=new hte(e,s,o,i);r.elements.push(a),r.dom.appendChild(a.dom)}else r.elements[this.i].update(e,s,o,i);this.height=t.bottom,this.i++}line(e,t,i){let r=[];lR(this.cursor,r,t.from),i.length&&(r=r.concat(i));let o=this.gutter.config.lineMarker(e,t,r);o&&r.unshift(o);let s=this.gutter;r.length==0&&!s.config.renderEmptyElements||this.addElement(e,t,r)}widget(e,t){let i=this.gutter.config.widgetMarker(e,t.widget,t),r=i?[i]:null;for(let o of e.state.facet(Sxe)){let s=o(e,t.widget,t);s&&(r||(r=[])).push(s)}r&&this.addElement(e,t,r)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class fN{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in t.domEventHandlers)this.dom.addEventListener(i,r=>{let o=r.target,s;if(o!=this.dom&&this.dom.contains(o)){for(;o.parentNode!=this.dom;)o=o.parentNode;let c=o.getBoundingClientRect();s=(c.top+c.bottom)/2}else s=r.clientY;let a=e.lineBlockAtHeight(s-e.documentTop);t.domEventHandlers[i](e,a,r)&&r.preventDefault()});this.markers=dN(t.markers(e)),t.initialSpacer&&(this.spacer=new hte(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=dN(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let r=this.config.updateSpacer(this.spacer.markers[0],e);r!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[r])}let i=e.view.viewport;return!Vo.eq(this.markers,t,i.from,i.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class hte{constructor(e,t,i,r){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,i,r)}update(e,t,i,r){this.height!=t&&(this.height=t,this.dom.style.height=t+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),Ixe(this.markers,r)||this.setMarkers(e,r)}setMarkers(e,t){let i="cm-gutterElement",r=this.dom.firstChild;for(let o=0,s=0;;){let a=s,c=o<t.length?t[o++]:null,h=!1;if(c){let m=c.elementClass;m&&(i+=" "+m);for(let v=s;v<this.markers.length;v++)if(this.markers[v].compare(c)){a=v,h=!0;break}}else a=this.markers.length;for(;s<a;){let m=this.markers[s++];if(m.toDOM){m.destroy(r);let v=r.nextSibling;r.remove(),r=v}}if(!c)break;c.toDOM&&(h?r=r.nextSibling:this.dom.insertBefore(c.toDOM(e),r)),h&&s++}this.dom.className=i,this.markers=t}destroy(){this.setMarkers(null,[])}}function Ixe(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].compare(e[t]))return!1;return!0}const kxe=Si.define(),Txe=Si.define(),R_=Si.define({combine(n){return Om(n,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let i=Object.assign({},e);for(let r in t){let o=i[r],s=t[r];i[r]=o?(a,c,h)=>o(a,c,h)||s(a,c,h):s}return i}})}});class FO extends l0{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function zO(n,e){return n.state.facet(R_).formatNumber(e,n.state)}const Rxe=b3.compute([R_],n=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(kxe)},lineMarker(e,t,i){return i.some(r=>r.toDOM)?null:new FO(zO(e,e.state.doc.lineAt(t.from).number))},widgetMarker:(e,t,i)=>{for(let r of e.state.facet(Txe)){let o=r(e,t,i);if(o)return o}return null},lineMarkerChange:e=>e.startState.facet(R_)!=e.state.facet(R_),initialSpacer(e){return new FO(zO(e,pN(e.state.doc.lines)))},updateSpacer(e,t){let i=zO(t.view,pN(t.view.state.doc.lines));return i==e.number?e:new FO(i)},domEventHandlers:n.facet(R_).domEventHandlers,side:"before"}));function Dxe(n={}){return[R_.of(n),Ate(),Rxe]}function pN(n){let e=9;for(;e<n;)e=e*10+9;return e}const Pxe=new class extends l0{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},Uxe=bw.compute(["selection"],n=>{let e=[],t=-1;for(let i of n.selection.ranges){let r=n.doc.lineAt(i.head).from;r>t&&(t=r,e.push(Pxe.range(r)))}return Vo.of(e)});function Kxe(){return Uxe}const dte=1024;let Lxe=0;class jO{constructor(e,t){this.from=e,this.to=t}}class _o{constructor(e={}){this.id=Lxe++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")}),this.combine=e.combine||null}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Md.match(e)),t=>{let i=e(t);return i===void 0?null:[this,i]}}}_o.closedBy=new _o({deserialize:n=>n.split(" ")});_o.openedBy=new _o({deserialize:n=>n.split(" ")});_o.group=new _o({deserialize:n=>n.split(" ")});_o.isolate=new _o({deserialize:n=>{if(n&&n!="rtl"&&n!="ltr"&&n!="auto")throw new RangeError("Invalid value for isolate: "+n);return n||"auto"}});_o.contextHash=new _o({perNode:!0});_o.lookAhead=new _o({perNode:!0});_o.mounted=new _o({perNode:!0});class ES{constructor(e,t,i){this.tree=e,this.overlay=t,this.parser=i}static get(e){return e&&e.props&&e.props[_o.mounted.id]}}const Fxe=Object.create(null);class Md{constructor(e,t,i,r=0){this.name=e,this.props=t,this.id=i,this.flags=r}static define(e){let t=e.props&&e.props.length?Object.create(null):Fxe,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),r=new Md(e.name||"",t,e.id,i);if(e.props){for(let o of e.props)if(Array.isArray(o)||(o=o(r)),o){if(o[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[o[0].id]=o[1]}}return r}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(_o.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let i in e)for(let r of i.split(" "))t[r]=e[i];return i=>{for(let r=i.prop(_o.group),o=-1;o<(r?r.length:0);o++){let s=t[o<0?i.name:r[o]];if(s)return s}}}}Md.none=new Md("",Object.create(null),0,8);class aU{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let i of this.types){let r=null;for(let o of e){let s=o(i);if(s){r||(r=Object.assign({},i.props));let a=s[1],c=s[0];c.combine&&c.id in r&&(a=c.combine(r[c.id],a)),r[c.id]=a}}t.push(r?new Md(i.name,r,i.id,i.flags):i)}return new aU(t)}}const E5=new WeakMap,mN=new WeakMap;var Jc;(function(n){n[n.ExcludeBuffers=1]="ExcludeBuffers",n[n.IncludeAnonymous=2]="IncludeAnonymous",n[n.IgnoreMounts=4]="IgnoreMounts",n[n.IgnoreOverlays=8]="IgnoreOverlays"})(Jc||(Jc={}));class ec{constructor(e,t,i,r,o){if(this.type=e,this.children=t,this.positions=i,this.length=r,this.props=null,o&&o.length){this.props=Object.create(null);for(let[s,a]of o)this.props[typeof s=="number"?s:s.id]=a}}toString(){let e=ES.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let i of this.children){let r=i.toString();r&&(t&&(t+=","),t+=r)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new cR(this.topNode,e)}cursorAt(e,t=0,i=0){let r=E5.get(this)||this.topNode,o=new cR(r);return o.moveTo(e,t),E5.set(this,o._tree),o}get topNode(){return new sp(this,0,0,null)}resolve(e,t=0){let i=v4(E5.get(this)||this.topNode,e,t,!1);return E5.set(this,i),i}resolveInner(e,t=0){let i=v4(mN.get(this)||this.topNode,e,t,!0);return mN.set(this,i),i}resolveStack(e,t=0){return Nxe(this,e,t)}iterate(e){let{enter:t,leave:i,from:r=0,to:o=this.length}=e,s=e.mode||0,a=(s&Jc.IncludeAnonymous)>0;for(let c=this.cursor(s|Jc.IncludeAnonymous);;){let h=!1;if(c.from<=o&&c.to>=r&&(!a&&c.type.isAnonymous||t(c)!==!1)){if(c.firstChild())continue;h=!0}for(;h&&i&&(a||!c.type.isAnonymous)&&i(c),!c.nextSibling();){if(!c.parent())return;h=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:cU(Md.none,this.children,this.positions,0,this.children.length,0,this.length,(t,i,r)=>new ec(this.type,t,i,r,this.propValues),e.makeTree||((t,i,r)=>new ec(Md.none,t,i,r)))}static build(e){return Gxe(e)}}ec.empty=new ec(Md.none,[],[],0);class lU{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new lU(this.buffer,this.index)}}class sv{constructor(e,t,i){this.buffer=e,this.length=t,this.set=i}get type(){return Md.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],i=this.buffer[e+3],r=this.set.types[t],o=r.name;if(/\W/.test(o)&&!r.isError&&(o=JSON.stringify(o)),e+=4,i==e)return o;let s=[];for(;e<i;)s.push(this.childString(e)),e=this.buffer[e+3];return o+"("+s.join(",")+")"}findChild(e,t,i,r,o){let{buffer:s}=this,a=-1;for(let c=e;c!=t&&!(fte(o,r,s[c+1],s[c+2])&&(a=c,i>0));c=s[c+3]);return a}slice(e,t,i){let r=this.buffer,o=new Uint16Array(t-e),s=0;for(let a=e,c=0;a<t;){o[c++]=r[a++],o[c++]=r[a++]-i;let h=o[c++]=r[a++]-i;o[c++]=r[a++]-e,s=Math.max(s,h)}return new sv(o,s,this.set)}}function fte(n,e,t,i){switch(n){case-2:return t<e;case-1:return i>=e&&t<e;case 0:return t<e&&i>e;case 1:return t<=e&&i>e;case 2:return i>e;case 4:return!0}}function v4(n,e,t,i){for(var r;n.from==n.to||(t<1?n.from>=e:n.from>e)||(t>-1?n.to<=e:n.to<e);){let s=!i&&n instanceof sp&&n.index<0?null:n.parent;if(!s)return n;n=s}let o=i?0:Jc.IgnoreOverlays;if(i)for(let s=n,a=s.parent;a;s=a,a=s.parent)s instanceof sp&&s.index<0&&((r=a.enter(e,t,o))===null||r===void 0?void 0:r.from)!=s.from&&(n=a);for(;;){let s=n.enter(e,t,o);if(!s)return n;n=s}}class pte{cursor(e=0){return new cR(this,e)}getChild(e,t=null,i=null){let r=gN(this,e,t,i);return r.length?r[0]:null}getChildren(e,t=null,i=null){return gN(this,e,t,i)}resolve(e,t=0){return v4(this,e,t,!1)}resolveInner(e,t=0){return v4(this,e,t,!0)}matchContext(e){return uR(this.parent,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),i=this;for(;t;){let r=t.lastChild;if(!r||r.to!=t.to)break;r.type.isError&&r.from==r.to?(i=t,t=r.prevSibling):t=r}return i}get node(){return this}get next(){return this.parent}}class sp extends pte{constructor(e,t,i,r){super(),this._tree=e,this.from=t,this.index=i,this._parent=r}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,i,r,o=0){for(let s=this;;){for(let{children:a,positions:c}=s._tree,h=t>0?a.length:-1;e!=h;e+=t){let m=a[e],v=c[e]+s.from;if(fte(r,i,v,v+m.length)){if(m instanceof sv){if(o&Jc.ExcludeBuffers)continue;let x=m.findChild(0,m.buffer.length,t,i-v,r);if(x>-1)return new Qy(new zxe(s,m,e,v),null,x)}else if(o&Jc.IncludeAnonymous||!m.type.isAnonymous||uU(m)){let x;if(!(o&Jc.IgnoreMounts)&&(x=ES.get(m))&&!x.overlay)return new sp(x.tree,v,e,s);let E=new sp(m,v,e,s);return o&Jc.IncludeAnonymous||!E.type.isAnonymous?E:E.nextChild(t<0?m.children.length-1:0,t,i,r)}}}if(o&Jc.IncludeAnonymous||!s.type.isAnonymous||(s.index>=0?e=s.index+t:e=t<0?-1:s._parent._tree.children.length,s=s._parent,!s))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,i=0){let r;if(!(i&Jc.IgnoreOverlays)&&(r=ES.get(this._tree))&&r.overlay){let o=e-this.from;for(let{from:s,to:a}of r.overlay)if((t>0?s<=o:s<o)&&(t<0?a>=o:a>o))return new sp(r.tree,r.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function gN(n,e,t,i){let r=n.cursor(),o=[];if(!r.firstChild())return o;if(t!=null){for(let s=!1;!s;)if(s=r.type.is(t),!r.nextSibling())return o}for(;;){if(i!=null&&r.type.is(i))return o;if(r.type.is(e)&&o.push(r.node),!r.nextSibling())return i==null?o:[]}}function uR(n,e,t=e.length-1){for(let i=n;t>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[t]&&e[t]!=i.name)return!1;t--}}return!0}class zxe{constructor(e,t,i,r){this.parent=e,this.buffer=t,this.index=i,this.start=r}}class Qy extends pte{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,i){super(),this.context=e,this._parent=t,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}child(e,t,i){let{buffer:r}=this.context,o=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.context.start,i);return o<0?null:new Qy(this.context,this,o)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,i=0){if(i&Jc.ExcludeBuffers)return null;let{buffer:r}=this.context,o=r.findChild(this.index+4,r.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return o<0?null:new Qy(this.context,this,o)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Qy(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new Qy(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:i}=this.context,r=this.index+4,o=i.buffer[this.index+3];if(o>r){let s=i.buffer[this.index+1];e.push(i.slice(r,o,s)),t.push(0)}return new ec(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function mte(n){if(!n.length)return null;let e=0,t=n[0];for(let o=1;o<n.length;o++){let s=n[o];(s.from>t.from||s.to<t.to)&&(t=s,e=o)}let i=t instanceof sp&&t.index<0?null:t.parent,r=n.slice();return i?r[e]=i:r.splice(e,1),new jxe(r,t)}class jxe{constructor(e,t){this.heads=e,this.node=t}get next(){return mte(this.heads)}}function Nxe(n,e,t){let i=n.resolveInner(e,t),r=null;for(let o=i instanceof sp?i:i.context.parent;o;o=o.parent)if(o.index<0){let s=o.parent;(r||(r=[i])).push(s.resolve(e,t)),o=s}else{let s=ES.get(o.tree);if(s&&s.overlay&&s.overlay[0].from<=e&&s.overlay[s.overlay.length-1].to>=e){let a=new sp(s.tree,s.overlay[0].from+o.from,-1,o);(r||(r=[i])).push(v4(a,e,t,!1))}}return r?mte(r):i}class cR{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof sp)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:i,buffer:r}=this.buffer;return this.type=t||r.set.types[r.buffer[e]],this.from=i+r.buffer[e+1],this.to=i+r.buffer[e+2],!0}yield(e){return e?e instanceof sp?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,i,this.mode));let{buffer:r}=this.buffer,o=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.buffer.start,i);return o<0?!1:(this.stack.push(this.index),this.yieldBuf(o))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,i=this.mode){return this.buffer?i&Jc.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Jc.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Jc.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,i=this.stack.length-1;if(e<0){let r=i<0?0:this.stack[i]+4;if(this.index!=r)return this.yieldBuf(t.findChild(r,this.index,-1,0,4))}else{let r=t.buffer[this.index+3];if(r<(i<0?t.buffer.length:t.buffer[this.stack[i]+3]))return this.yieldBuf(r)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,i,{buffer:r}=this;if(r){if(e>0){if(this.index<r.buffer.buffer.length)return!1}else for(let o=0;o<this.index;o++)if(r.buffer.buffer[o+3]<this.index)return!1;({index:t,parent:i}=r)}else({index:t,_parent:i}=this._tree);for(;i;{index:t,_parent:i}=i)if(t>-1)for(let o=t+e,s=e<0?-1:i._tree.children.length;o!=s;o+=e){let a=i._tree.children[o];if(this.mode&Jc.IncludeAnonymous||a instanceof sv||!a.type.isAnonymous||uU(a))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,i=0;if(e&&e.context==this.buffer)e:for(let r=this.index,o=this.stack.length;o>=0;){for(let s=e;s;s=s._parent)if(s.index==r){if(r==this.index)return s;t=s,i=o+1;break e}r=this.stack[--o]}for(let r=i;r<this.stack.length;r++)t=new Qy(this.buffer,t,this.stack[r]);return this.bufferNode=new Qy(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let i=0;;){let r=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(r=!0)}for(;;){if(r&&t&&t(this),r=this.type.isAnonymous,!i)return;if(this.nextSibling())break;this.parent(),i--,r=!0}}}matchContext(e){if(!this.buffer)return uR(this.node.parent,e);let{buffer:t}=this.buffer,{types:i}=t.set;for(let r=e.length-1,o=this.stack.length-1;r>=0;o--){if(o<0)return uR(this._tree,e,r);let s=i[t.buffer[this.stack[o]]];if(!s.isAnonymous){if(e[r]&&e[r]!=s.name)return!1;r--}}return!0}}function uU(n){return n.children.some(e=>e instanceof sv||!e.type.isAnonymous||uU(e))}function Gxe(n){var e;let{buffer:t,nodeSet:i,maxBufferLength:r=dte,reused:o=[],minRepeatType:s=i.types.length}=n,a=Array.isArray(t)?new lU(t,t.length):t,c=i.types,h=0,m=0;function v(X,Z,G,oe,ue,xe){let{id:me,start:Ie,end:Me,size:Te}=a,je=m,Ee=h;if(Te<0)if(a.next(),Te==-1){let Re=o[me];G.push(Re),oe.push(Ie-X);return}else if(Te==-3){h=me;return}else if(Te==-4){m=me;return}else throw new RangeError(`Unrecognized record size: ${Te}`);let qe=c[me],At,gt,Le=Ie-X;if(Me-Ie<=r&&(gt=F(a.pos-Z,ue))){let Re=new Uint16Array(gt.size-gt.skip),Ge=a.pos-gt.size,De=Re.length;for(;a.pos>Ge;)De=W(gt.start,Re,De);At=new sv(Re,Me-gt.start,i),Le=gt.start-X}else{let Re=a.pos-Te;a.next();let Ge=[],De=[],_t=me>=s?me:-1,at=0,Tt=Me;for(;a.pos>Re;)_t>=0&&a.id==_t&&a.size>=0?(a.end<=Tt-r&&(D(Ge,De,Ie,at,a.end,Tt,_t,je,Ee),at=Ge.length,Tt=a.end),a.next()):xe>2500?x(Ie,Re,Ge,De):v(Ie,Re,Ge,De,_t,xe+1);if(_t>=0&&at>0&&at<Ge.length&&D(Ge,De,Ie,at,Ie,Tt,_t,je,Ee),Ge.reverse(),De.reverse(),_t>-1&&at>0){let Kt=E(qe,Ee);At=cU(qe,Ge,De,0,Ge.length,0,Me-Ie,Kt,Kt)}else At=P(qe,Ge,De,Me-Ie,je-Me,Ee)}G.push(At),oe.push(Le)}function x(X,Z,G,oe){let ue=[],xe=0,me=-1;for(;a.pos>Z;){let{id:Ie,start:Me,end:Te,size:je}=a;if(je>4)a.next();else{if(me>-1&&Me<me)break;me<0&&(me=Te-r),ue.push(Ie,Me,Te),xe++,a.next()}}if(xe){let Ie=new Uint16Array(xe*4),Me=ue[ue.length-2];for(let Te=ue.length-3,je=0;Te>=0;Te-=3)Ie[je++]=ue[Te],Ie[je++]=ue[Te+1]-Me,Ie[je++]=ue[Te+2]-Me,Ie[je++]=je;G.push(new sv(Ie,ue[2]-Me,i)),oe.push(Me-X)}}function E(X,Z){return(G,oe,ue)=>{let xe=0,me=G.length-1,Ie,Me;if(me>=0&&(Ie=G[me])instanceof ec){if(!me&&Ie.type==X&&Ie.length==ue)return Ie;(Me=Ie.prop(_o.lookAhead))&&(xe=oe[me]+Ie.length+Me)}return P(X,G,oe,ue,xe,Z)}}function D(X,Z,G,oe,ue,xe,me,Ie,Me){let Te=[],je=[];for(;X.length>oe;)Te.push(X.pop()),je.push(Z.pop()+G-ue);X.push(P(i.types[me],Te,je,xe-ue,Ie-xe,Me)),Z.push(ue-G)}function P(X,Z,G,oe,ue,xe,me){if(xe){let Ie=[_o.contextHash,xe];me=me?[Ie].concat(me):[Ie]}if(ue>25){let Ie=[_o.lookAhead,ue];me=me?[Ie].concat(me):[Ie]}return new ec(X,Z,G,oe,me)}function F(X,Z){let G=a.fork(),oe=0,ue=0,xe=0,me=G.end-r,Ie={size:0,start:0,skip:0};e:for(let Me=G.pos-X;G.pos>Me;){let Te=G.size;if(G.id==Z&&Te>=0){Ie.size=oe,Ie.start=ue,Ie.skip=xe,xe+=4,oe+=4,G.next();continue}let je=G.pos-Te;if(Te<0||je<Me||G.start<me)break;let Ee=G.id>=s?4:0,qe=G.start;for(G.next();G.pos>je;){if(G.size<0)if(G.size==-3)Ee+=4;else break e;else G.id>=s&&(Ee+=4);G.next()}ue=qe,oe+=Te,xe+=Ee}return(Z<0||oe==X)&&(Ie.size=oe,Ie.start=ue,Ie.skip=xe),Ie.size>4?Ie:void 0}function W(X,Z,G){let{id:oe,start:ue,end:xe,size:me}=a;if(a.next(),me>=0&&oe<s){let Ie=G;if(me>4){let Me=a.pos-(me-4);for(;a.pos>Me;)G=W(X,Z,G)}Z[--G]=Ie,Z[--G]=xe-X,Z[--G]=ue-X,Z[--G]=oe}else me==-3?h=oe:me==-4&&(m=oe);return G}let q=[],V=[];for(;a.pos>0;)v(n.start||0,n.bufferStart||0,q,V,-1,0);let H=(e=n.length)!==null&&e!==void 0?e:q.length?V[0]+q[0].length:0;return new ec(c[n.topID],q.reverse(),V.reverse(),H)}const yN=new WeakMap;function Cw(n,e){if(!n.isAnonymous||e instanceof sv||e.type!=n)return 1;let t=yN.get(e);if(t==null){t=1;for(let i of e.children){if(i.type!=n||!(i instanceof ec)){t=1;break}t+=Cw(n,i)}yN.set(e,t)}return t}function cU(n,e,t,i,r,o,s,a,c){let h=0;for(let D=i;D<r;D++)h+=Cw(n,e[D]);let m=Math.ceil(h*1.5/8),v=[],x=[];function E(D,P,F,W,q){for(let V=F;V<W;){let H=V,X=P[V],Z=Cw(n,D[V]);for(V++;V<W;V++){let G=Cw(n,D[V]);if(Z+G>=m)break;Z+=G}if(V==H+1){if(Z>m){let G=D[H];E(G.children,G.positions,0,G.children.length,P[H]+q);continue}v.push(D[H])}else{let G=P[V-1]+D[V-1].length-X;v.push(cU(n,D,P,H,V,X,G,null,c))}x.push(X+q-o)}}return E(e,t,i,r,0),(a||c)(v,x,s)}class Kb{constructor(e,t,i,r,o=!1,s=!1){this.from=e,this.to=t,this.tree=i,this.offset=r,this.open=(o?1:0)|(s?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],i=!1){let r=[new Kb(0,e.length,e,0,!1,i)];for(let o of t)o.to>e.length&&r.push(o);return r}static applyChanges(e,t,i=128){if(!t.length)return e;let r=[],o=1,s=e.length?e[0]:null;for(let a=0,c=0,h=0;;a++){let m=a<t.length?t[a]:null,v=m?m.fromA:1e9;if(v-c>=i)for(;s&&s.from<v;){let x=s;if(c>=x.from||v<=x.to||h){let E=Math.max(x.from,c)-h,D=Math.min(x.to,v)-h;x=E>=D?null:new Kb(E,D,x.tree,x.offset+h,a>0,!!m)}if(x&&r.push(x),s.to>v)break;s=o<e.length?e[o++]:null}if(!m)break;c=m.toA,h=m.toA-m.toB}return r}}class gte{startParse(e,t,i){return typeof e=="string"&&(e=new Wxe(e)),i=i?i.length?i.map(r=>new jO(r.from,r.to)):[new jO(0,0)]:[new jO(0,e.length)],this.createParse(e,t||[],i)}parse(e,t,i){let r=this.startParse(e,t,i);for(;;){let o=r.advance();if(o)return o}}}class Wxe{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new _o({perNode:!0});let Qxe=0;class $f{constructor(e,t,i,r){this.name=e,this.set=t,this.base=i,this.modified=r,this.id=Qxe++}toString(){let{name:e}=this;for(let t of this.modified)t.name&&(e=`${t.name}(${e})`);return e}static define(e,t){let i=typeof e=="string"?e:"?";if(e instanceof $f&&(t=e),t?.base)throw new Error("Can not derive from a modified tag");let r=new $f(i,[],null,[]);if(r.set.push(r),t)for(let o of t.set)r.set.push(o);return r}static defineModifier(e){let t=new BS(e);return i=>i.modified.indexOf(t)>-1?i:BS.get(i.base||i,i.modified.concat(t).sort((r,o)=>r.id-o.id))}}let Yxe=0;class BS{constructor(e){this.name=e,this.instances=[],this.id=Yxe++}static get(e,t){if(!t.length)return e;let i=t[0].instances.find(a=>a.base==e&&qxe(t,a.modified));if(i)return i;let r=[],o=new $f(e.name,r,e,t);for(let a of t)a.instances.push(o);let s=Vxe(t);for(let a of e.set)if(!a.modified.length)for(let c of s)r.push(BS.get(a,c));return o}}function qxe(n,e){return n.length==e.length&&n.every((t,i)=>t==e[i])}function Vxe(n){let e=[[]];for(let t=0;t<n.length;t++)for(let i=0,r=e.length;i<r;i++)e.push(e[i].concat(n[t]));return e.sort((t,i)=>i.length-t.length)}function yte(n){let e=Object.create(null);for(let t in n){let i=n[t];Array.isArray(i)||(i=[i]);for(let r of t.split(" "))if(r){let o=[],s=2,a=r;for(let v=0;;){if(a=="..."&&v>0&&v+3==r.length){s=1;break}let x=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(a);if(!x)throw new RangeError("Invalid path: "+r);if(o.push(x[0]=="*"?"":x[0][0]=='"'?JSON.parse(x[0]):x[0]),v+=x[0].length,v==r.length)break;let E=r[v++];if(v==r.length&&E=="!"){s=0;break}if(E!="/")throw new RangeError("Invalid path: "+r);a=r.slice(v)}let c=o.length-1,h=o[c];if(!h)throw new RangeError("Invalid path: "+r);let m=new b4(i,s,c>0?o.slice(0,c):null);e[h]=m.sort(e[h])}}return vte.add(e)}const vte=new _o({combine(n,e){let t,i,r;for(;n||e;){if(!n||e&&n.depth>=e.depth?(r=e,e=e.next):(r=n,n=n.next),t&&t.mode==r.mode&&!r.context&&!t.context)continue;let o=new b4(r.tags,r.mode,r.context);t?t.next=o:i=o,t=o}return i}});class b4{constructor(e,t,i,r){this.tags=e,this.mode=t,this.context=i,this.next=r}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}b4.empty=new b4([],2,null);function bte(n,e){let t=Object.create(null);for(let o of n)if(!Array.isArray(o.tag))t[o.tag.id]=o.class;else for(let s of o.tag)t[s.id]=o.class;let{scope:i,all:r=null}=e||{};return{style:o=>{let s=r;for(let a of o)for(let c of a.set){let h=t[c.id];if(h){s=s?s+" "+h:h;break}}return s},scope:i}}function $xe(n,e){let t=null;for(let i of n){let r=i.style(e);r&&(t=t?t+" "+r:r)}return t}function Hxe(n,e,t,i=0,r=n.length){let o=new Zxe(i,Array.isArray(e)?e:[e],t);o.highlightRange(n.cursor(),i,r,"",o.highlighters),o.flush(r)}class Zxe{constructor(e,t,i){this.at=e,this.highlighters=t,this.span=i,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,i,r,o){let{type:s,from:a,to:c}=e;if(a>=i||c<=t)return;s.isTop&&(o=this.highlighters.filter(E=>!E.scope||E.scope(s)));let h=r,m=Xxe(e)||b4.empty,v=$xe(o,m.tags);if(v&&(h&&(h+=" "),h+=v,m.mode==1&&(r+=(r?" ":"")+v)),this.startSpan(Math.max(t,a),h),m.opaque)return;let x=e.tree&&e.tree.prop(_o.mounted);if(x&&x.overlay){let E=e.node.enter(x.overlay[0].from+a,1),D=this.highlighters.filter(F=>!F.scope||F.scope(x.tree.type)),P=e.firstChild();for(let F=0,W=a;;F++){let q=F<x.overlay.length?x.overlay[F]:null,V=q?q.from+a:c,H=Math.max(t,W),X=Math.min(i,V);if(H<X&&P)for(;e.from<X&&(this.highlightRange(e,H,X,r,o),this.startSpan(Math.min(X,e.to),h),!(e.to>=V||!e.nextSibling())););if(!q||V>i)break;W=q.to+a,W>t&&(this.highlightRange(E.cursor(),Math.max(t,q.from+a),Math.min(i,W),"",D),this.startSpan(Math.min(i,W),h))}P&&e.parent()}else if(e.firstChild()){x&&(r="");do if(!(e.to<=t)){if(e.from>=i)break;this.highlightRange(e,t,i,r,o),this.startSpan(Math.min(i,e.to),h)}while(e.nextSibling());e.parent()}}}function Xxe(n){let e=n.type.prop(vte);for(;e&&e.context&&!n.matchContext(e.context);)e=e.next;return e||null}const ai=$f.define,B5=ai(),Oy=ai(),vN=ai(Oy),bN=ai(Oy),Iy=ai(),O5=ai(Iy),NO=ai(Iy),Ig=ai(),lb=ai(Ig),Bg=ai(),Og=ai(),AR=ai(),_2=ai(AR),I5=ai(),An={comment:B5,lineComment:ai(B5),blockComment:ai(B5),docComment:ai(B5),name:Oy,variableName:ai(Oy),typeName:vN,tagName:ai(vN),propertyName:bN,attributeName:ai(bN),className:ai(Oy),labelName:ai(Oy),namespace:ai(Oy),macroName:ai(Oy),literal:Iy,string:O5,docString:ai(O5),character:ai(O5),attributeValue:ai(O5),number:NO,integer:ai(NO),float:ai(NO),bool:ai(Iy),regexp:ai(Iy),escape:ai(Iy),color:ai(Iy),url:ai(Iy),keyword:Bg,self:ai(Bg),null:ai(Bg),atom:ai(Bg),unit:ai(Bg),modifier:ai(Bg),operatorKeyword:ai(Bg),controlKeyword:ai(Bg),definitionKeyword:ai(Bg),moduleKeyword:ai(Bg),operator:Og,derefOperator:ai(Og),arithmeticOperator:ai(Og),logicOperator:ai(Og),bitwiseOperator:ai(Og),compareOperator:ai(Og),updateOperator:ai(Og),definitionOperator:ai(Og),typeOperator:ai(Og),controlOperator:ai(Og),punctuation:AR,separator:ai(AR),bracket:_2,angleBracket:ai(_2),squareBracket:ai(_2),paren:ai(_2),brace:ai(_2),content:Ig,heading:lb,heading1:ai(lb),heading2:ai(lb),heading3:ai(lb),heading4:ai(lb),heading5:ai(lb),heading6:ai(lb),contentSeparator:ai(Ig),list:ai(Ig),quote:ai(Ig),emphasis:ai(Ig),strong:ai(Ig),link:ai(Ig),monospace:ai(Ig),strikethrough:ai(Ig),inserted:ai(),deleted:ai(),changed:ai(),invalid:ai(),meta:I5,documentMeta:ai(I5),annotation:ai(I5),processingInstruction:ai(I5),definition:$f.defineModifier("definition"),constant:$f.defineModifier("constant"),function:$f.defineModifier("function"),standard:$f.defineModifier("standard"),local:$f.defineModifier("local"),special:$f.defineModifier("special")};for(let n in An){let e=An[n];e instanceof $f&&(e.name=n)}bte([{tag:An.link,class:"tok-link"},{tag:An.heading,class:"tok-heading"},{tag:An.emphasis,class:"tok-emphasis"},{tag:An.strong,class:"tok-strong"},{tag:An.keyword,class:"tok-keyword"},{tag:An.atom,class:"tok-atom"},{tag:An.bool,class:"tok-bool"},{tag:An.url,class:"tok-url"},{tag:An.labelName,class:"tok-labelName"},{tag:An.inserted,class:"tok-inserted"},{tag:An.deleted,class:"tok-deleted"},{tag:An.literal,class:"tok-literal"},{tag:An.string,class:"tok-string"},{tag:An.number,class:"tok-number"},{tag:[An.regexp,An.escape,An.special(An.string)],class:"tok-string2"},{tag:An.variableName,class:"tok-variableName"},{tag:An.local(An.variableName),class:"tok-variableName tok-local"},{tag:An.definition(An.variableName),class:"tok-variableName tok-definition"},{tag:An.special(An.variableName),class:"tok-variableName2"},{tag:An.definition(An.propertyName),class:"tok-propertyName tok-definition"},{tag:An.typeName,class:"tok-typeName"},{tag:An.namespace,class:"tok-namespace"},{tag:An.className,class:"tok-className"},{tag:An.macroName,class:"tok-macroName"},{tag:An.propertyName,class:"tok-propertyName"},{tag:An.operator,class:"tok-operator"},{tag:An.comment,class:"tok-comment"},{tag:An.meta,class:"tok-meta"},{tag:An.invalid,class:"tok-invalid"},{tag:An.punctuation,class:"tok-punctuation"}]);var GO;const D_=new _o;function Jxe(n){return Si.define({combine:n?e=>e.concat(n):void 0})}const e2e=new _o;class gm{constructor(e,t,i=[],r=""){this.data=e,this.name=r,fs.prototype.hasOwnProperty("tree")||Object.defineProperty(fs.prototype,"tree",{get(){return ih(this)}}),this.parser=t,this.extension=[av.of(this),fs.languageData.of((o,s,a)=>{let c=CN(o,s,a),h=c.type.prop(D_);if(!h)return[];let m=o.facet(h),v=c.type.prop(e2e);if(v){let x=c.resolve(s-c.from,a);for(let E of v)if(E.test(x,o)){let D=o.facet(E.facet);return E.type=="replace"?D:D.concat(m)}}return m})].concat(i)}isActiveAt(e,t,i=-1){return CN(e,t,i).type.prop(D_)==this.data}findRegions(e){let t=e.facet(av);if(t?.data==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let i=[],r=(o,s)=>{if(o.prop(D_)==this.data){i.push({from:s,to:s+o.length});return}let a=o.prop(_o.mounted);if(a){if(a.tree.prop(D_)==this.data){if(a.overlay)for(let c of a.overlay)i.push({from:c.from+s,to:c.to+s});else i.push({from:s,to:s+o.length});return}else if(a.overlay){let c=i.length;if(r(a.tree,a.overlay[0].from+s),i.length>c)return}}for(let c=0;c<o.children.length;c++){let h=o.children[c];h instanceof ec&&r(h,o.positions[c]+s)}};return r(ih(e),0),i}get allowsNesting(){return!0}}gm.setState=to.define();function CN(n,e,t){let i=n.facet(av),r=ih(n).topNode;if(!i||i.allowsNesting)for(let o=r;o;o=o.enter(e,t,Jc.ExcludeBuffers))o.type.isTop&&(r=o);return r}class OS extends gm{constructor(e,t,i){super(e,t,[],i),this.parser=t}static define(e){let t=Jxe(e.languageData);return new OS(t,e.parser.configure({props:[D_.add(i=>i.isTop?t:void 0)]}),e.name)}configure(e,t){return new OS(this.data,this.parser.configure(e),t||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function ih(n){let e=n.field(gm.state,!1);return e?e.tree:ec.empty}class t2e{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let i=this.cursorPos-this.string.length;return e<i||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-i,t-i)}}let x2=null;class IS{constructor(e,t,i=[],r,o,s,a,c){this.parser=e,this.state=t,this.fragments=i,this.tree=r,this.treeLen=o,this.viewport=s,this.skipped=a,this.scheduleOn=c,this.parse=null,this.tempSkipped=[]}static create(e,t,i){return new IS(e,t,[],ec.empty,0,i,[],null)}startParse(){return this.parser.startParse(new t2e(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=ec.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof e=="number"){let r=Date.now()+e;e=()=>Date.now()>r}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let r=this.parse.advance();if(r)if(this.fragments=this.withoutTempSkipped(Kb.addTree(r,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=r,this.parse=null,this.treeLen<(t??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(Kb.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=x2;x2=this;try{return e()}finally{x2=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=_N(e,t.from,t.to);return e}changes(e,t){let{fragments:i,tree:r,treeLen:o,viewport:s,skipped:a}=this;if(this.takeTree(),!e.empty){let c=[];if(e.iterChangedRanges((h,m,v,x)=>c.push({fromA:h,toA:m,fromB:v,toB:x})),i=Kb.applyChanges(i,c),r=ec.empty,o=0,s={from:e.mapPos(s.from,-1),to:e.mapPos(s.to,1)},this.skipped.length){a=[];for(let h of this.skipped){let m=e.mapPos(h.from,1),v=e.mapPos(h.to,-1);m<v&&a.push({from:m,to:v})}}}return new IS(this.parser,t,i,r,o,s,a,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:r,to:o}=this.skipped[i];r<e.to&&o>e.from&&(this.fragments=_N(this.fragments,r,o),this.skipped.splice(i--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends gte{createParse(t,i,r){let o=r[0].from,s=r[r.length-1].to;return{parsedPos:o,advance(){let c=x2;if(c){for(let h of r)c.tempSkipped.push(h);e&&(c.scheduleOn=c.scheduleOn?Promise.all([c.scheduleOn,e]):e)}return this.parsedPos=s,new ec(Md.none,[],[],s-o)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return x2}}function _N(n,e,t){return Kb.applyChanges(n,[{fromA:e,toA:t,fromB:e,toB:t}])}class Sx{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,i)||t.takeTree(),new Sx(t)}static init(e){let t=Math.min(3e3,e.doc.length),i=IS.create(e.facet(av).parser,e,{from:0,to:t});return i.work(20,t)||i.takeTree(),new Sx(i)}}gm.state=Ic.define({create:Sx.init,update(n,e){for(let t of e.effects)if(t.is(gm.setState))return t.value;return e.startState.facet(av)!=e.state.facet(av)?Sx.init(e.state):n.apply(e)}});let Cte=n=>{let e=setTimeout(()=>n(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(Cte=n=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(n,{timeout:400})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const WO=typeof navigator<"u"&&(!((GO=navigator.scheduling)===null||GO===void 0)&&GO.isInputPending)?()=>navigator.scheduling.isInputPending():null,n2e=Bu.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(gm.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(gm.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=Cte(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:r}}=this.view,o=i.field(gm.state);if(o.tree==o.context.tree&&o.context.isDone(r+1e5))return;let s=Date.now()+Math.min(this.chunkBudget,100,e&&!WO?Math.max(25,e.timeRemaining()-5):1e9),a=o.context.treeLen<r&&i.doc.length>r+1e3,c=o.context.work(()=>WO&&WO()||Date.now()>s,r+(a?0:1e5));this.chunkBudget-=Date.now()-t,(c||this.chunkBudget<=0)&&(o.context.takeTree(),this.view.dispatch({effects:gm.setState.of(new Sx(o.context))})),this.chunkBudget>0&&!(c&&!a)&&this.scheduleWork(),this.checkAsyncSchedule(o.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>Ph(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),av=Si.define({combine(n){return n.length?n[0]:null},enables:n=>[gm.state,n2e,Mi.contentAttributes.compute([n],e=>{let t=e.facet(n);return t&&t.name?{"data-language":t.name}:{}})]});class i2e{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}const r2e=Si.define(),AU=Si.define({combine:n=>{if(!n.length)return"  ";let e=n[0];if(!e||/\S/.test(e)||Array.from(e).some(t=>t!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(n[0]));return e}});function kS(n){let e=n.facet(AU);return e.charCodeAt(0)==9?n.tabSize*e.length:e.length}function C4(n,e){let t="",i=n.tabSize,r=n.facet(AU)[0];if(r=="	"){for(;e>=i;)t+="	",e-=i;r=" "}for(let o=0;o<e;o++)t+=r;return t}function hU(n,e){n instanceof fs&&(n=new p6(n));for(let i of n.state.facet(r2e)){let r=i(n,e);if(r!==void 0)return r}let t=ih(n.state);return t.length>=e?o2e(n,t,e):null}class p6{constructor(e,t={}){this.state=e,this.options=t,this.unit=kS(e)}lineAt(e,t=1){let i=this.state.doc.lineAt(e),{simulateBreak:r,simulateDoubleBreak:o}=this.options;return r!=null&&r>=i.from&&r<=i.to?o&&r==e?{text:"",from:e}:(t<0?r<e:r<=e)?{text:i.text.slice(r-i.from),from:r}:{text:i.text.slice(0,r-i.from),from:i.from}:i}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:r}=this.lineAt(e,t);return i.slice(e-r,Math.min(i.length,e+100-r))}column(e,t=1){let{text:i,from:r}=this.lineAt(e,t),o=this.countColumn(i,e-r),s=this.options.overrideIndentation?this.options.overrideIndentation(r):-1;return s>-1&&(o+=s-this.countColumn(i,i.search(/\S|$/))),o}countColumn(e,t=e.length){return Gx(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:i,from:r}=this.lineAt(e,t),o=this.options.overrideIndentation;if(o){let s=o(r);if(s>-1)return s}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const _te=new _o;function o2e(n,e,t){let i=e.resolveStack(t),r=e.resolveInner(t,-1).resolve(t,0).enterUnfinishedNodesBefore(t);if(r!=i.node){let o=[];for(let s=r;s&&!(s.from<i.node.from||s.to>i.node.to||s.from==i.node.from&&s.type==i.node.type);s=s.parent)o.push(s);for(let s=o.length-1;s>=0;s--)i={node:o[s],next:i}}return xte(i,n,t)}function xte(n,e,t){for(let i=n;i;i=i.next){let r=a2e(i.node);if(r)return r(dU.create(e,t,i))}return 0}function s2e(n){return n.pos==n.options.simulateBreak&&n.options.simulateDoubleBreak}function a2e(n){let e=n.type.prop(_te);if(e)return e;let t=n.firstChild,i;if(t&&(i=t.type.prop(_o.closedBy))){let r=n.lastChild,o=r&&i.indexOf(r.name)>-1;return s=>A2e(s,!0,1,void 0,o&&!s2e(s)?r.from:void 0)}return n.parent==null?l2e:null}function l2e(){return 0}class dU extends p6{constructor(e,t,i){super(e.state,e.options),this.base=e,this.pos=t,this.context=i}get node(){return this.context.node}static create(e,t,i){return new dU(e,t,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let i=e.resolve(t.from);for(;i.parent&&i.parent.from==i.from;)i=i.parent;if(u2e(i,e))break;t=this.state.doc.lineAt(i.from)}return this.lineIndent(t.from)}continue(){return xte(this.context.next,this.base,this.pos)}}function u2e(n,e){for(let t=e;t;t=t.parent)if(n==t)return!0;return!1}function c2e(n){let e=n.node,t=e.childAfter(e.from),i=e.lastChild;if(!t)return null;let r=n.options.simulateBreak,o=n.state.doc.lineAt(t.from),s=r==null||r<=o.from?o.to:Math.min(o.to,r);for(let a=t.to;;){let c=e.childAfter(a);if(!c||c==i)return null;if(!c.type.isSkipped){if(c.from>=s)return null;let h=/^ */.exec(o.text.slice(t.to-o.from))[0].length;return{from:t.from,to:t.to+h}}a=c.to}}function A2e(n,e,t,i,r){let o=n.textAfter,s=o.match(/^\s*/)[0].length,a=i&&o.slice(s,s+i.length)==i||r==n.pos+s,c=c2e(n);return c?a?n.column(c.from):n.column(c.to):n.baseIndent+(a?0:n.unit*t)}function xN({except:n,units:e=1}={}){return t=>{let i=n&&n.test(t.textAfter);return t.baseIndent+(i?0:e*t.unit)}}const h2e=200;function d2e(){return fs.transactionFilter.of(n=>{if(!n.docChanged||!n.isUserEvent("input.type")&&!n.isUserEvent("input.complete"))return n;let e=n.startState.languageDataAt("indentOnInput",n.startState.selection.main.head);if(!e.length)return n;let t=n.newDoc,{head:i}=n.newSelection.main,r=t.lineAt(i);if(i>r.from+h2e)return n;let o=t.sliceString(r.from,i);if(!e.some(h=>h.test(o)))return n;let{state:s}=n,a=-1,c=[];for(let{head:h}of s.selection.ranges){let m=s.doc.lineAt(h);if(m.from==a)continue;a=m.from;let v=hU(s,m.from);if(v==null)continue;let x=/^\s*/.exec(m.text)[0],E=C4(s,v);x!=E&&c.push({from:m.from,to:m.from+x.length,insert:E})}return c.length?[n,{changes:c,sequential:!0}]:n})}const f2e=Si.define(),Mte=new _o;function p2e(n){let e=n.firstChild,t=n.lastChild;return e&&e.to<t.from?{from:e.to,to:t.type.isError?n.to:t.from}:null}function m2e(n,e,t){let i=ih(n);if(i.length<t)return null;let r=i.resolveStack(t,1),o=null;for(let s=r;s;s=s.next){let a=s.node;if(a.to<=t||a.from>t)continue;if(o&&a.from<e)break;let c=a.type.prop(Mte);if(c&&(a.to<i.length-50||i.length==n.doc.length||!g2e(a))){let h=c(a,n);h&&h.from<=t&&h.from>=e&&h.to>t&&(o=h)}}return o}function g2e(n){let e=n.lastChild;return e&&e.to==n.to&&e.type.isError}function TS(n,e,t){for(let i of n.facet(f2e)){let r=i(n,e,t);if(r)return r}return m2e(n,e,t)}function wte(n,e){let t=e.mapPos(n.from,1),i=e.mapPos(n.to,-1);return t>=i?void 0:{from:t,to:i}}const m6=to.define({map:wte}),_M=to.define({map:wte});function Ste(n){let e=[];for(let{head:t}of n.state.selection.ranges)e.some(i=>i.from<=t&&i.to>=t)||e.push(n.lineBlockAt(t));return e}const Jb=Ic.define({create(){return wr.none},update(n,e){e.isUserEvent("delete")&&e.changes.iterChangedRanges((t,i)=>n=MN(n,t,i)),n=n.map(e.changes);for(let t of e.effects)if(t.is(m6)&&!y2e(n,t.value.from,t.value.to)){let{preparePlaceholder:i}=e.state.facet(Ote),r=i?wr.replace({widget:new w2e(i(e.state,t.value))}):wN;n=n.update({add:[r.range(t.value.from,t.value.to)]})}else t.is(_M)&&(n=n.update({filter:(i,r)=>t.value.from!=i||t.value.to!=r,filterFrom:t.value.from,filterTo:t.value.to}));return e.selection&&(n=MN(n,e.selection.main.head)),n},provide:n=>Mi.decorations.from(n),toJSON(n,e){let t=[];return n.between(0,e.doc.length,(i,r)=>{t.push(i,r)}),t},fromJSON(n){if(!Array.isArray(n)||n.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let t=0;t<n.length;){let i=n[t++],r=n[t++];if(typeof i!="number"||typeof r!="number")throw new RangeError("Invalid JSON for fold state");e.push(wN.range(i,r))}return wr.set(e,!0)}});function MN(n,e,t=e){let i=!1;return n.between(e,t,(r,o)=>{r<t&&o>e&&(i=!0)}),i?n.update({filterFrom:e,filterTo:t,filter:(r,o)=>r>=t||o<=e}):n}function RS(n,e,t){var i;let r=null;return(i=n.field(Jb,!1))===null||i===void 0||i.between(e,t,(o,s)=>{(!r||r.from>o)&&(r={from:o,to:s})}),r}function y2e(n,e,t){let i=!1;return n.between(e,e,(r,o)=>{r==e&&o==t&&(i=!0)}),i}function Ete(n,e){return n.field(Jb,!1)?e:e.concat(to.appendConfig.of(Ite()))}const v2e=n=>{for(let e of Ste(n)){let t=TS(n.state,e.from,e.to);if(t)return n.dispatch({effects:Ete(n.state,[m6.of(t),Bte(n,t)])}),!0}return!1},b2e=n=>{if(!n.state.field(Jb,!1))return!1;let e=[];for(let t of Ste(n)){let i=RS(n.state,t.from,t.to);i&&e.push(_M.of(i),Bte(n,i,!1))}return e.length&&n.dispatch({effects:e}),e.length>0};function Bte(n,e,t=!0){let i=n.state.doc.lineAt(e.from).number,r=n.state.doc.lineAt(e.to).number;return Mi.announce.of(`${n.state.phrase(t?"Folded lines":"Unfolded lines")} ${i} ${n.state.phrase("to")} ${r}.`)}const C2e=n=>{let{state:e}=n,t=[];for(let i=0;i<e.doc.length;){let r=n.lineBlockAt(i),o=TS(e,r.from,r.to);o&&t.push(m6.of(o)),i=(o?n.lineBlockAt(o.to):r).to+1}return t.length&&n.dispatch({effects:Ete(n.state,t)}),!!t.length},_2e=n=>{let e=n.state.field(Jb,!1);if(!e||!e.size)return!1;let t=[];return e.between(0,n.state.doc.length,(i,r)=>{t.push(_M.of({from:i,to:r}))}),n.dispatch({effects:t}),!0},x2e=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:v2e},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:b2e},{key:"Ctrl-Alt-[",run:C2e},{key:"Ctrl-Alt-]",run:_2e}],M2e={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},Ote=Si.define({combine(n){return Om(n,M2e)}});function Ite(n){return[Jb,B2e]}function kte(n,e){let{state:t}=n,i=t.facet(Ote),r=s=>{let a=n.lineBlockAt(n.posAtDOM(s.target)),c=RS(n.state,a.from,a.to);c&&n.dispatch({effects:_M.of(c)}),s.preventDefault()};if(i.placeholderDOM)return i.placeholderDOM(n,r,e);let o=document.createElement("span");return o.textContent=i.placeholderText,o.setAttribute("aria-label",t.phrase("folded code")),o.title=t.phrase("unfold"),o.className="cm-foldPlaceholder",o.onclick=r,o}const wN=wr.replace({widget:new class extends Av{toDOM(n){return kte(n,null)}}});class w2e extends Av{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return kte(e,this.value)}}const S2e={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class QO extends l0{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}function E2e(n={}){let e={...S2e,...n},t=new QO(e,!0),i=new QO(e,!1),r=Bu.fromClass(class{constructor(s){this.from=s.viewport.from,this.markers=this.buildMarkers(s)}update(s){(s.docChanged||s.viewportChanged||s.startState.facet(av)!=s.state.facet(av)||s.startState.field(Jb,!1)!=s.state.field(Jb,!1)||ih(s.startState)!=ih(s.state)||e.foldingChanged(s))&&(this.markers=this.buildMarkers(s.view))}buildMarkers(s){let a=new y1;for(let c of s.viewportLineBlocks){let h=RS(s.state,c.from,c.to)?i:TS(s.state,c.from,c.to)?t:null;h&&a.add(c.from,c.from,h)}return a.finish()}}),{domEventHandlers:o}=e;return[r,cte({class:"cm-foldGutter",markers(s){var a;return((a=s.plugin(r))===null||a===void 0?void 0:a.markers)||Vo.empty},initialSpacer(){return new QO(e,!1)},domEventHandlers:{...o,click:(s,a,c)=>{if(o.click&&o.click(s,a,c))return!0;let h=RS(s.state,a.from,a.to);if(h)return s.dispatch({effects:_M.of(h)}),!0;let m=TS(s.state,a.from,a.to);return m?(s.dispatch({effects:m6.of(m)}),!0):!1}}}),Ite()]}const B2e=Mi.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class xM{constructor(e,t){this.specs=e;let i;function r(a){let c=iv.newName();return(i||(i=Object.create(null)))["."+c]=a,c}const o=typeof t.all=="string"?t.all:t.all?r(t.all):void 0,s=t.scope;this.scope=s instanceof gm?a=>a.prop(D_)==s.data:s?a=>a==s:void 0,this.style=bte(e.map(a=>({tag:a.tag,class:a.class||r(Object.assign({},a,{tag:null}))})),{all:o}).style,this.module=i?new iv(i):null,this.themeType=t.themeType}static define(e,t){return new xM(e,t||{})}}const hR=Si.define(),Tte=Si.define({combine(n){return n.length?[n[0]]:null}});function YO(n){let e=n.facet(hR);return e.length?e:n.facet(Tte)}function Rte(n,e){let t=[I2e],i;return n instanceof xM&&(n.module&&t.push(Mi.styleModule.of(n.module)),i=n.themeType),e?.fallback?t.push(Tte.of(n)):i?t.push(hR.computeN([Mi.darkTheme],r=>r.facet(Mi.darkTheme)==(i=="dark")?[n]:[])):t.push(hR.of(n)),t}class O2e{constructor(e){this.markCache=Object.create(null),this.tree=ih(e.state),this.decorations=this.buildDeco(e,YO(e.state)),this.decoratedTo=e.viewport.to}update(e){let t=ih(e.state),i=YO(e.state),r=i!=YO(e.startState),{viewport:o}=e.view,s=e.changes.mapPos(this.decoratedTo,1);t.length<o.to&&!r&&t.type==this.tree.type&&s>=o.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=s):(t!=this.tree||e.viewportChanged||r)&&(this.tree=t,this.decorations=this.buildDeco(e.view,i),this.decoratedTo=o.to)}buildDeco(e,t){if(!t||!this.tree.length)return wr.none;let i=new y1;for(let{from:r,to:o}of e.visibleRanges)Hxe(this.tree,t,(s,a,c)=>{i.add(s,a,this.markCache[c]||(this.markCache[c]=wr.mark({class:c})))},r,o);return i.finish()}}const I2e=cC.high(Bu.fromClass(O2e,{decorations:n=>n.decorations})),k2e=xM.define([{tag:An.meta,color:"#404740"},{tag:An.link,textDecoration:"underline"},{tag:An.heading,textDecoration:"underline",fontWeight:"bold"},{tag:An.emphasis,fontStyle:"italic"},{tag:An.strong,fontWeight:"bold"},{tag:An.strikethrough,textDecoration:"line-through"},{tag:An.keyword,color:"#708"},{tag:[An.atom,An.bool,An.url,An.contentSeparator,An.labelName],color:"#219"},{tag:[An.literal,An.inserted],color:"#164"},{tag:[An.string,An.deleted],color:"#a11"},{tag:[An.regexp,An.escape,An.special(An.string)],color:"#e40"},{tag:An.definition(An.variableName),color:"#00f"},{tag:An.local(An.variableName),color:"#30a"},{tag:[An.typeName,An.namespace],color:"#085"},{tag:An.className,color:"#167"},{tag:[An.special(An.variableName),An.macroName],color:"#256"},{tag:An.definition(An.propertyName),color:"#00c"},{tag:An.comment,color:"#940"},{tag:An.invalid,color:"#f00"}]),T2e=Mi.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),Dte=1e4,Pte="()[]{}",Ute=Si.define({combine(n){return Om(n,{afterCursor:!0,brackets:Pte,maxScanDistance:Dte,renderMatch:P2e})}}),R2e=wr.mark({class:"cm-matchingBracket"}),D2e=wr.mark({class:"cm-nonmatchingBracket"});function P2e(n){let e=[],t=n.matched?R2e:D2e;return e.push(t.range(n.start.from,n.start.to)),n.end&&e.push(t.range(n.end.from,n.end.to)),e}const U2e=Ic.define({create(){return wr.none},update(n,e){if(!e.docChanged&&!e.selection)return n;let t=[],i=e.state.facet(Ute);for(let r of e.state.selection.ranges){if(!r.empty)continue;let o=qg(e.state,r.head,-1,i)||r.head>0&&qg(e.state,r.head-1,1,i)||i.afterCursor&&(qg(e.state,r.head,1,i)||r.head<e.state.doc.length&&qg(e.state,r.head+1,-1,i));o&&(t=t.concat(i.renderMatch(o,e.state)))}return wr.set(t,!0)},provide:n=>Mi.decorations.from(n)}),K2e=[U2e,T2e];function L2e(n={}){return[Ute.of(n),K2e]}const F2e=new _o;function dR(n,e,t){let i=n.prop(e<0?_o.openedBy:_o.closedBy);if(i)return i;if(n.name.length==1){let r=t.indexOf(n.name);if(r>-1&&r%2==(e<0?1:0))return[t[r+e]]}return null}function fR(n){let e=n.type.prop(F2e);return e?e(n.node):n}function qg(n,e,t,i={}){let r=i.maxScanDistance||Dte,o=i.brackets||Pte,s=ih(n),a=s.resolveInner(e,t);for(let c=a;c;c=c.parent){let h=dR(c.type,t,o);if(h&&c.from<c.to){let m=fR(c);if(m&&(t>0?e>=m.from&&e<m.to:e>m.from&&e<=m.to))return z2e(n,e,t,c,m,h,o)}}return j2e(n,e,t,s,a.type,r,o)}function z2e(n,e,t,i,r,o,s){let a=i.parent,c={from:r.from,to:r.to},h=0,m=a?.cursor();if(m&&(t<0?m.childBefore(i.from):m.childAfter(i.to)))do if(t<0?m.to<=i.from:m.from>=i.to){if(h==0&&o.indexOf(m.type.name)>-1&&m.from<m.to){let v=fR(m);return{start:c,end:v?{from:v.from,to:v.to}:void 0,matched:!0}}else if(dR(m.type,t,s))h++;else if(dR(m.type,-t,s)){if(h==0){let v=fR(m);return{start:c,end:v&&v.from<v.to?{from:v.from,to:v.to}:void 0,matched:!1}}h--}}while(t<0?m.prevSibling():m.nextSibling());return{start:c,matched:!1}}function j2e(n,e,t,i,r,o,s){let a=t<0?n.sliceDoc(e-1,e):n.sliceDoc(e,e+1),c=s.indexOf(a);if(c<0||c%2==0!=t>0)return null;let h={from:t<0?e-1:e,to:t>0?e+1:e},m=n.doc.iterRange(e,t>0?n.doc.length:0),v=0;for(let x=0;!m.next().done&&x<=o;){let E=m.value;t<0&&(x+=E.length);let D=e+x*t;for(let P=t>0?0:E.length-1,F=t>0?E.length:-1;P!=F;P+=t){let W=s.indexOf(E[P]);if(!(W<0||i.resolveInner(D+P,1).type!=r))if(W%2==0==t>0)v++;else{if(v==1)return{start:h,end:{from:D+P,to:D+P+1},matched:W>>1==c>>1};v--}}t>0&&(x+=E.length)}return m.done?{start:h,matched:!1}:null}const N2e=Object.create(null),SN=[Md.none],EN=[],BN=Object.create(null),G2e=Object.create(null);for(let[n,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])G2e[n]=W2e(N2e,e);function qO(n,e){EN.indexOf(n)>-1||(EN.push(n),console.warn(e))}function W2e(n,e){let t=[];for(let a of e.split(" ")){let c=[];for(let h of a.split(".")){let m=n[h]||An[h];m?typeof m=="function"?c.length?c=c.map(m):qO(h,`Modifier ${h} used at start of tag`):c.length?qO(h,`Tag ${h} used as modifier`):c=Array.isArray(m)?m:[m]:qO(h,`Unknown highlighting tag ${h}`)}for(let h of c)t.push(h)}if(!t.length)return 0;let i=e.replace(/ /g,"_"),r=i+" "+t.map(a=>a.id),o=BN[r];if(o)return o.id;let s=BN[r]=Md.define({id:SN.length,name:i,props:[yte({[i]:t})]});return SN.push(s),s.id}il.RTL,il.LTR;const Q2e=n=>{let{state:e}=n,t=e.doc.lineAt(e.selection.main.from),i=pU(n.state,t.from);return i.line?Y2e(n):i.block?V2e(n):!1};function fU(n,e){return({state:t,dispatch:i})=>{if(t.readOnly)return!1;let r=n(e,t);return r?(i(t.update(r)),!0):!1}}const Y2e=fU(Z2e,0),q2e=fU(Kte,0),V2e=fU((n,e)=>Kte(n,e,H2e(e)),0);function pU(n,e){let t=n.languageDataAt("commentTokens",e,1);return t.length?t[0]:{}}const M2=50;function $2e(n,{open:e,close:t},i,r){let o=n.sliceDoc(i-M2,i),s=n.sliceDoc(r,r+M2),a=/\s*$/.exec(o)[0].length,c=/^\s*/.exec(s)[0].length,h=o.length-a;if(o.slice(h-e.length,h)==e&&s.slice(c,c+t.length)==t)return{open:{pos:i-a,margin:a&&1},close:{pos:r+c,margin:c&&1}};let m,v;r-i<=2*M2?m=v=n.sliceDoc(i,r):(m=n.sliceDoc(i,i+M2),v=n.sliceDoc(r-M2,r));let x=/^\s*/.exec(m)[0].length,E=/\s*$/.exec(v)[0].length,D=v.length-E-t.length;return m.slice(x,x+e.length)==e&&v.slice(D,D+t.length)==t?{open:{pos:i+x+e.length,margin:/\s/.test(m.charAt(x+e.length))?1:0},close:{pos:r-E-t.length,margin:/\s/.test(v.charAt(D-1))?1:0}}:null}function H2e(n){let e=[];for(let t of n.selection.ranges){let i=n.doc.lineAt(t.from),r=t.to<=i.to?i:n.doc.lineAt(t.to);r.from>i.from&&r.from==t.to&&(r=t.to==i.to+1?i:n.doc.lineAt(t.to-1));let o=e.length-1;o>=0&&e[o].to>i.from?e[o].to=r.to:e.push({from:i.from+/^\s*/.exec(i.text)[0].length,to:r.to})}return e}function Kte(n,e,t=e.selection.ranges){let i=t.map(o=>pU(e,o.from).block);if(!i.every(o=>o))return null;let r=t.map((o,s)=>$2e(e,i[s],o.from,o.to));if(n!=2&&!r.every(o=>o))return{changes:e.changes(t.map((o,s)=>r[s]?[]:[{from:o.from,insert:i[s].open+" "},{from:o.to,insert:" "+i[s].close}]))};if(n!=1&&r.some(o=>o)){let o=[];for(let s=0,a;s<r.length;s++)if(a=r[s]){let c=i[s],{open:h,close:m}=a;o.push({from:h.pos-c.open.length,to:h.pos+h.margin},{from:m.pos-m.margin,to:m.pos+c.close.length})}return{changes:o}}return null}function Z2e(n,e,t=e.selection.ranges){let i=[],r=-1;for(let{from:o,to:s}of t){let a=i.length,c=1e9,h=pU(e,o).line;if(h){for(let m=o;m<=s;){let v=e.doc.lineAt(m);if(v.from>r&&(o==s||s>v.from)){r=v.from;let x=/^\s*/.exec(v.text)[0].length,E=x==v.length,D=v.text.slice(x,x+h.length)==h?x:-1;x<v.text.length&&x<c&&(c=x),i.push({line:v,comment:D,token:h,indent:x,empty:E,single:!1})}m=v.to+1}if(c<1e9)for(let m=a;m<i.length;m++)i[m].indent<i[m].line.text.length&&(i[m].indent=c);i.length==a+1&&(i[a].single=!0)}}if(n!=2&&i.some(o=>o.comment<0&&(!o.empty||o.single))){let o=[];for(let{line:a,token:c,indent:h,empty:m,single:v}of i)(v||!m)&&o.push({from:a.from+h,insert:c+" "});let s=e.changes(o);return{changes:s,selection:e.selection.map(s,1)}}else if(n!=1&&i.some(o=>o.comment>=0)){let o=[];for(let{line:s,comment:a,token:c}of i)if(a>=0){let h=s.from+a,m=h+c.length;s.text[m-s.from]==" "&&m++,o.push({from:h,to:m})}return{changes:o}}return null}const pR=x1.define(),X2e=x1.define(),J2e=Si.define(),Lte=Si.define({combine(n){return Om(n,{minDepth:100,newGroupDelay:500,joinToEvent:(e,t)=>t},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,t)=>(i,r)=>e(i,r)||t(i,r)})}}),Fte=Ic.define({create(){return Vg.empty},update(n,e){let t=e.state.facet(Lte),i=e.annotation(pR);if(i){let c=bd.fromTransaction(e,i.selection),h=i.side,m=h==0?n.undone:n.done;return c?m=DS(m,m.length,t.minDepth,c):m=Nte(m,e.startState.selection),new Vg(h==0?i.rest:m,h==0?m:i.rest)}let r=e.annotation(X2e);if((r=="full"||r=="before")&&(n=n.isolate()),e.annotation(Oc.addToHistory)===!1)return e.changes.empty?n:n.addMapping(e.changes.desc);let o=bd.fromTransaction(e),s=e.annotation(Oc.time),a=e.annotation(Oc.userEvent);return o?n=n.addChanges(o,s,a,t,e):e.selection&&(n=n.addSelection(e.startState.selection,s,a,t.newGroupDelay)),(r=="full"||r=="after")&&(n=n.isolate()),n},toJSON(n){return{done:n.done.map(e=>e.toJSON()),undone:n.undone.map(e=>e.toJSON())}},fromJSON(n){return new Vg(n.done.map(bd.fromJSON),n.undone.map(bd.fromJSON))}});function e3e(n={}){return[Fte,Lte.of(n),Mi.domEventHandlers({beforeinput(e,t){let i=e.inputType=="historyUndo"?zte:e.inputType=="historyRedo"?mR:null;return i?(e.preventDefault(),i(t)):!1}})]}function g6(n,e){return function({state:t,dispatch:i}){if(!e&&t.readOnly)return!1;let r=t.field(Fte,!1);if(!r)return!1;let o=r.pop(n,t,e);return o?(i(o),!0):!1}}const zte=g6(0,!1),mR=g6(1,!1),t3e=g6(0,!0),n3e=g6(1,!0);class bd{constructor(e,t,i,r,o){this.changes=e,this.effects=t,this.mapped=i,this.startSelection=r,this.selectionsAfter=o}setSelAfter(e){return new bd(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,i;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(t=this.mapped)===null||t===void 0?void 0:t.toJSON(),startSelection:(i=this.startSelection)===null||i===void 0?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map(r=>r.toJSON())}}static fromJSON(e){return new bd(e.changes&&Sc.fromJSON(e.changes),[],e.mapped&&o0.fromJSON(e.mapped),e.startSelection&&En.fromJSON(e.startSelection),e.selectionsAfter.map(En.fromJSON))}static fromTransaction(e,t){let i=tp;for(let r of e.startState.facet(J2e)){let o=r(e);o.length&&(i=i.concat(o))}return!i.length&&e.changes.empty?null:new bd(e.changes.invert(e.startState.doc),i,void 0,t||e.startState.selection,tp)}static selection(e){return new bd(void 0,tp,void 0,void 0,e)}}function DS(n,e,t,i){let r=e+1>t+20?e-t-1:0,o=n.slice(r,e);return o.push(i),o}function i3e(n,e){let t=[],i=!1;return n.iterChangedRanges((r,o)=>t.push(r,o)),e.iterChangedRanges((r,o,s,a)=>{for(let c=0;c<t.length;){let h=t[c++],m=t[c++];a>=h&&s<=m&&(i=!0)}}),i}function r3e(n,e){return n.ranges.length==e.ranges.length&&n.ranges.filter((t,i)=>t.empty!=e.ranges[i].empty).length===0}function jte(n,e){return n.length?e.length?n.concat(e):n:e}const tp=[],o3e=200;function Nte(n,e){if(n.length){let t=n[n.length-1],i=t.selectionsAfter.slice(Math.max(0,t.selectionsAfter.length-o3e));return i.length&&i[i.length-1].eq(e)?n:(i.push(e),DS(n,n.length-1,1e9,t.setSelAfter(i)))}else return[bd.selection([e])]}function s3e(n){let e=n[n.length-1],t=n.slice();return t[n.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),t}function VO(n,e){if(!n.length)return n;let t=n.length,i=tp;for(;t;){let r=a3e(n[t-1],e,i);if(r.changes&&!r.changes.empty||r.effects.length){let o=n.slice(0,t);return o[t-1]=r,o}else e=r.mapped,t--,i=r.selectionsAfter}return i.length?[bd.selection(i)]:tp}function a3e(n,e,t){let i=jte(n.selectionsAfter.length?n.selectionsAfter.map(a=>a.map(e)):tp,t);if(!n.changes)return bd.selection(i);let r=n.changes.map(e),o=e.mapDesc(n.changes,!0),s=n.mapped?n.mapped.composeDesc(o):o;return new bd(r,to.mapEffects(n.effects,e),s,n.startSelection.map(o),i)}const l3e=/^(input\.type|delete)($|\.)/;class Vg{constructor(e,t,i=0,r=void 0){this.done=e,this.undone=t,this.prevTime=i,this.prevUserEvent=r}isolate(){return this.prevTime?new Vg(this.done,this.undone):this}addChanges(e,t,i,r,o){let s=this.done,a=s[s.length-1];return a&&a.changes&&!a.changes.empty&&e.changes&&(!i||l3e.test(i))&&(!a.selectionsAfter.length&&t-this.prevTime<r.newGroupDelay&&r.joinToEvent(o,i3e(a.changes,e.changes))||i=="input.type.compose")?s=DS(s,s.length-1,r.minDepth,new bd(e.changes.compose(a.changes),jte(to.mapEffects(e.effects,a.changes),a.effects),a.mapped,a.startSelection,tp)):s=DS(s,s.length,r.minDepth,e),new Vg(s,tp,t,i)}addSelection(e,t,i,r){let o=this.done.length?this.done[this.done.length-1].selectionsAfter:tp;return o.length>0&&t-this.prevTime<r&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&r3e(o[o.length-1],e)?this:new Vg(Nte(this.done,e),this.undone,t,i)}addMapping(e){return new Vg(VO(this.done,e),VO(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,i){let r=e==0?this.done:this.undone;if(r.length==0)return null;let o=r[r.length-1],s=o.selectionsAfter[0]||t.selection;if(i&&o.selectionsAfter.length)return t.update({selection:o.selectionsAfter[o.selectionsAfter.length-1],annotations:pR.of({side:e,rest:s3e(r),selection:s}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(o.changes){let a=r.length==1?tp:r.slice(0,r.length-1);return o.mapped&&(a=VO(a,o.mapped)),t.update({changes:o.changes,selection:o.startSelection,effects:o.effects,annotations:pR.of({side:e,rest:a,selection:s}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}Vg.empty=new Vg(tp,tp);const u3e=[{key:"Mod-z",run:zte,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:mR,preventDefault:!0},{linux:"Ctrl-Shift-z",run:mR,preventDefault:!0},{key:"Mod-u",run:t3e,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:n3e,preventDefault:!0}];function Wx(n,e){return En.create(n.ranges.map(e),n.mainIndex)}function Im(n,e){return n.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function km({state:n,dispatch:e},t){let i=Wx(n.selection,t);return i.eq(n.selection,!0)?!1:(e(Im(n,i)),!0)}function y6(n,e){return En.cursor(e?n.to:n.from)}function Gte(n,e){return km(n,t=>t.empty?n.moveByChar(t,e):y6(t,e))}function rh(n){return n.textDirectionAt(n.state.selection.main.head)==il.LTR}const Wte=n=>Gte(n,!rh(n)),Qte=n=>Gte(n,rh(n));function Yte(n,e){return km(n,t=>t.empty?n.moveByGroup(t,e):y6(t,e))}const c3e=n=>Yte(n,!rh(n)),A3e=n=>Yte(n,rh(n));function h3e(n,e,t){if(e.type.prop(t))return!0;let i=e.to-e.from;return i&&(i>2||/[^\s,.;:]/.test(n.sliceDoc(e.from,e.to)))||e.firstChild}function v6(n,e,t){let i=ih(n).resolveInner(e.head),r=t?_o.closedBy:_o.openedBy;for(let c=e.head;;){let h=t?i.childAfter(c):i.childBefore(c);if(!h)break;h3e(n,h,r)?i=h:c=t?h.to:h.from}let o=i.type.prop(r),s,a;return o&&(s=t?qg(n,i.from,1):qg(n,i.to,-1))&&s.matched?a=t?s.end.to:s.end.from:a=t?i.to:i.from,En.cursor(a,t?-1:1)}const d3e=n=>km(n,e=>v6(n.state,e,!rh(n))),f3e=n=>km(n,e=>v6(n.state,e,rh(n)));function qte(n,e){return km(n,t=>{if(!t.empty)return y6(t,e);let i=n.moveVertically(t,e);return i.head!=t.head?i:n.moveToLineBoundary(t,e)})}const Vte=n=>qte(n,!1),$te=n=>qte(n,!0);function Hte(n){let e=n.scrollDOM.clientHeight<n.scrollDOM.scrollHeight-2,t=0,i=0,r;if(e){for(let o of n.state.facet(Mi.scrollMargins)){let s=o(n);s?.top&&(t=Math.max(s?.top,t)),s?.bottom&&(i=Math.max(s?.bottom,i))}r=n.scrollDOM.clientHeight-t-i}else r=(n.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:t,marginBottom:i,selfScroll:e,height:Math.max(n.defaultLineHeight,r-5)}}function Zte(n,e){let t=Hte(n),{state:i}=n,r=Wx(i.selection,s=>s.empty?n.moveVertically(s,e,t.height):y6(s,e));if(r.eq(i.selection))return!1;let o;if(t.selfScroll){let s=n.coordsAtPos(i.selection.main.head),a=n.scrollDOM.getBoundingClientRect(),c=a.top+t.marginTop,h=a.bottom-t.marginBottom;s&&s.top>c&&s.bottom<h&&(o=Mi.scrollIntoView(r.main.head,{y:"start",yMargin:s.top-c}))}return n.dispatch(Im(i,r),{effects:o}),!0}const ON=n=>Zte(n,!1),gR=n=>Zte(n,!0);function hv(n,e,t){let i=n.lineBlockAt(e.head),r=n.moveToLineBoundary(e,t);if(r.head==e.head&&r.head!=(t?i.to:i.from)&&(r=n.moveToLineBoundary(e,t,!1)),!t&&r.head==i.from&&i.length){let o=/^\s*/.exec(n.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;o&&e.head!=i.from+o&&(r=En.cursor(i.from+o))}return r}const p3e=n=>km(n,e=>hv(n,e,!0)),m3e=n=>km(n,e=>hv(n,e,!1)),g3e=n=>km(n,e=>hv(n,e,!rh(n))),y3e=n=>km(n,e=>hv(n,e,rh(n))),v3e=n=>km(n,e=>En.cursor(n.lineBlockAt(e.head).from,1)),b3e=n=>km(n,e=>En.cursor(n.lineBlockAt(e.head).to,-1));function C3e(n,e,t){let i=!1,r=Wx(n.selection,o=>{let s=qg(n,o.head,-1)||qg(n,o.head,1)||o.head>0&&qg(n,o.head-1,1)||o.head<n.doc.length&&qg(n,o.head+1,-1);if(!s||!s.end)return o;i=!0;let a=s.start.from==o.head?s.end.to:s.end.from;return En.cursor(a)});return i?(e(Im(n,r)),!0):!1}const _3e=({state:n,dispatch:e})=>C3e(n,e);function up(n,e){let t=Wx(n.state.selection,i=>{let r=e(i);return En.range(i.anchor,r.head,r.goalColumn,r.bidiLevel||void 0)});return t.eq(n.state.selection)?!1:(n.dispatch(Im(n.state,t)),!0)}function Xte(n,e){return up(n,t=>n.moveByChar(t,e))}const Jte=n=>Xte(n,!rh(n)),ene=n=>Xte(n,rh(n));function tne(n,e){return up(n,t=>n.moveByGroup(t,e))}const x3e=n=>tne(n,!rh(n)),M3e=n=>tne(n,rh(n)),w3e=n=>up(n,e=>v6(n.state,e,!rh(n))),S3e=n=>up(n,e=>v6(n.state,e,rh(n)));function nne(n,e){return up(n,t=>n.moveVertically(t,e))}const ine=n=>nne(n,!1),rne=n=>nne(n,!0);function one(n,e){return up(n,t=>n.moveVertically(t,e,Hte(n).height))}const IN=n=>one(n,!1),kN=n=>one(n,!0),E3e=n=>up(n,e=>hv(n,e,!0)),B3e=n=>up(n,e=>hv(n,e,!1)),O3e=n=>up(n,e=>hv(n,e,!rh(n))),I3e=n=>up(n,e=>hv(n,e,rh(n))),k3e=n=>up(n,e=>En.cursor(n.lineBlockAt(e.head).from)),T3e=n=>up(n,e=>En.cursor(n.lineBlockAt(e.head).to)),TN=({state:n,dispatch:e})=>(e(Im(n,{anchor:0})),!0),RN=({state:n,dispatch:e})=>(e(Im(n,{anchor:n.doc.length})),!0),DN=({state:n,dispatch:e})=>(e(Im(n,{anchor:n.selection.main.anchor,head:0})),!0),PN=({state:n,dispatch:e})=>(e(Im(n,{anchor:n.selection.main.anchor,head:n.doc.length})),!0),R3e=({state:n,dispatch:e})=>(e(n.update({selection:{anchor:0,head:n.doc.length},userEvent:"select"})),!0),D3e=({state:n,dispatch:e})=>{let t=b6(n).map(({from:i,to:r})=>En.range(i,Math.min(r+1,n.doc.length)));return e(n.update({selection:En.create(t),userEvent:"select"})),!0},P3e=({state:n,dispatch:e})=>{let t=Wx(n.selection,i=>{let r=ih(n),o=r.resolveStack(i.from,1);if(i.empty){let s=r.resolveStack(i.from,-1);s.node.from>=o.node.from&&s.node.to<=o.node.to&&(o=s)}for(let s=o;s;s=s.next){let{node:a}=s;if((a.from<i.from&&a.to>=i.to||a.to>i.to&&a.from<=i.from)&&s.next)return En.range(a.to,a.from)}return i});return t.eq(n.selection)?!1:(e(Im(n,t)),!0)};function sne(n,e){let{state:t}=n,i=t.selection,r=t.selection.ranges.slice();for(let o of t.selection.ranges){let s=t.doc.lineAt(o.head);if(e?s.to<n.state.doc.length:s.from>0)for(let a=o;;){let c=n.moveVertically(a,e);if(c.head<s.from||c.head>s.to){r.some(h=>h.head==c.head)||r.push(c);break}else{if(c.head==a.head)break;a=c}}}return r.length==i.ranges.length?!1:(n.dispatch(Im(t,En.create(r,r.length-1))),!0)}const U3e=n=>sne(n,!1),K3e=n=>sne(n,!0),L3e=({state:n,dispatch:e})=>{let t=n.selection,i=null;return t.ranges.length>1?i=En.create([t.main]):t.main.empty||(i=En.create([En.cursor(t.main.head)])),i?(e(Im(n,i)),!0):!1};function MM(n,e){if(n.state.readOnly)return!1;let t="delete.selection",{state:i}=n,r=i.changeByRange(o=>{let{from:s,to:a}=o;if(s==a){let c=e(o);c<s?(t="delete.backward",c=k5(n,c,!1)):c>s&&(t="delete.forward",c=k5(n,c,!0)),s=Math.min(s,c),a=Math.max(a,c)}else s=k5(n,s,!1),a=k5(n,a,!0);return s==a?{range:o}:{changes:{from:s,to:a},range:En.cursor(s,s<o.head?-1:1)}});return r.changes.empty?!1:(n.dispatch(i.update(r,{scrollIntoView:!0,userEvent:t,effects:t=="delete.selection"?Mi.announce.of(i.phrase("Selection deleted")):void 0})),!0)}function k5(n,e,t){if(n instanceof Mi)for(let i of n.state.facet(Mi.atomicRanges).map(r=>r(n)))i.between(e,e,(r,o)=>{r<e&&o>e&&(e=t?o:r)});return e}const ane=(n,e,t)=>MM(n,i=>{let r=i.from,{state:o}=n,s=o.doc.lineAt(r),a,c;if(t&&!e&&r>s.from&&r<s.from+200&&!/[^ \t]/.test(a=s.text.slice(0,r-s.from))){if(a[a.length-1]=="	")return r-1;let h=Gx(a,o.tabSize),m=h%kS(o)||kS(o);for(let v=0;v<m&&a[a.length-1-v]==" ";v++)r--;c=r}else c=bA(s.text,r-s.from,e,e)+s.from,c==r&&s.number!=(e?o.doc.lines:1)?c+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(s.text.slice(c-s.from,r-s.from))&&(c=bA(s.text,c-s.from,!1,!1)+s.from);return c}),yR=n=>ane(n,!1,!0),lne=n=>ane(n,!0,!1),une=(n,e)=>MM(n,t=>{let i=t.head,{state:r}=n,o=r.doc.lineAt(i),s=r.charCategorizer(i);for(let a=null;;){if(i==(e?o.to:o.from)){i==t.head&&o.number!=(e?r.doc.lines:1)&&(i+=e?1:-1);break}let c=bA(o.text,i-o.from,e)+o.from,h=o.text.slice(Math.min(i,c)-o.from,Math.max(i,c)-o.from),m=s(h);if(a!=null&&m!=a)break;(h!=" "||i!=t.head)&&(a=m),i=c}return i}),cne=n=>une(n,!1),F3e=n=>une(n,!0),z3e=n=>MM(n,e=>{let t=n.lineBlockAt(e.head).to;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),j3e=n=>MM(n,e=>{let t=n.moveToLineBoundary(e,!1).head;return e.head>t?t:Math.max(0,e.head-1)}),N3e=n=>MM(n,e=>{let t=n.moveToLineBoundary(e,!0).head;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),G3e=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:ps.of(["",""])},range:En.cursor(i.from)}));return e(n.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},W3e=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(i=>{if(!i.empty||i.from==0||i.from==n.doc.length)return{range:i};let r=i.from,o=n.doc.lineAt(r),s=r==o.from?r-1:bA(o.text,r-o.from,!1)+o.from,a=r==o.to?r+1:bA(o.text,r-o.from,!0)+o.from;return{changes:{from:s,to:a,insert:n.doc.slice(r,a).append(n.doc.slice(s,r))},range:En.cursor(a)}});return t.changes.empty?!1:(e(n.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function b6(n){let e=[],t=-1;for(let i of n.selection.ranges){let r=n.doc.lineAt(i.from),o=n.doc.lineAt(i.to);if(!i.empty&&i.to==o.from&&(o=n.doc.lineAt(i.to-1)),t>=r.number){let s=e[e.length-1];s.to=o.to,s.ranges.push(i)}else e.push({from:r.from,to:o.to,ranges:[i]});t=o.number+1}return e}function Ane(n,e,t){if(n.readOnly)return!1;let i=[],r=[];for(let o of b6(n)){if(t?o.to==n.doc.length:o.from==0)continue;let s=n.doc.lineAt(t?o.to+1:o.from-1),a=s.length+1;if(t){i.push({from:o.to,to:s.to},{from:o.from,insert:s.text+n.lineBreak});for(let c of o.ranges)r.push(En.range(Math.min(n.doc.length,c.anchor+a),Math.min(n.doc.length,c.head+a)))}else{i.push({from:s.from,to:o.from},{from:o.to,insert:n.lineBreak+s.text});for(let c of o.ranges)r.push(En.range(c.anchor-a,c.head-a))}}return i.length?(e(n.update({changes:i,scrollIntoView:!0,selection:En.create(r,n.selection.mainIndex),userEvent:"move.line"})),!0):!1}const Q3e=({state:n,dispatch:e})=>Ane(n,e,!1),Y3e=({state:n,dispatch:e})=>Ane(n,e,!0);function hne(n,e,t){if(n.readOnly)return!1;let i=[];for(let r of b6(n))t?i.push({from:r.from,insert:n.doc.slice(r.from,r.to)+n.lineBreak}):i.push({from:r.to,insert:n.lineBreak+n.doc.slice(r.from,r.to)});return e(n.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const q3e=({state:n,dispatch:e})=>hne(n,e,!1),V3e=({state:n,dispatch:e})=>hne(n,e,!0),$3e=n=>{if(n.state.readOnly)return!1;let{state:e}=n,t=e.changes(b6(e).map(({from:r,to:o})=>(r>0?r--:o<e.doc.length&&o++,{from:r,to:o}))),i=Wx(e.selection,r=>{let o;if(n.lineWrapping){let s=n.lineBlockAt(r.head),a=n.coordsAtPos(r.head,r.assoc||1);a&&(o=s.bottom+n.documentTop-a.bottom+n.defaultLineHeight/2)}return n.moveVertically(r,!0,o)}).map(t);return n.dispatch({changes:t,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0};function H3e(n,e){if(/\(\)|\[\]|\{\}/.test(n.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=ih(n).resolveInner(e),i=t.childBefore(e),r=t.childAfter(e),o;return i&&r&&i.to<=e&&r.from>=e&&(o=i.type.prop(_o.closedBy))&&o.indexOf(r.name)>-1&&n.doc.lineAt(i.to).from==n.doc.lineAt(r.from).from&&!/\S/.test(n.sliceDoc(i.to,r.from))?{from:i.to,to:r.from}:null}const UN=dne(!1),Z3e=dne(!0);function dne(n){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let i=e.changeByRange(r=>{let{from:o,to:s}=r,a=e.doc.lineAt(o),c=!n&&o==s&&H3e(e,o);n&&(o=s=(s<=a.to?a:e.doc.lineAt(s)).to);let h=new p6(e,{simulateBreak:o,simulateDoubleBreak:!!c}),m=hU(h,o);for(m==null&&(m=Gx(/^\s*/.exec(e.doc.lineAt(o).text)[0],e.tabSize));s<a.to&&/\s/.test(a.text[s-a.from]);)s++;c?{from:o,to:s}=c:o>a.from&&o<a.from+100&&!/\S/.test(a.text.slice(0,o))&&(o=a.from);let v=["",C4(e,m)];return c&&v.push(C4(e,h.lineIndent(a.from,-1))),{changes:{from:o,to:s,insert:ps.of(v)},range:En.cursor(o+1+v[1].length)}});return t(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function mU(n,e){let t=-1;return n.changeByRange(i=>{let r=[];for(let s=i.from;s<=i.to;){let a=n.doc.lineAt(s);a.number>t&&(i.empty||i.to>a.from)&&(e(a,r,i),t=a.number),s=a.to+1}let o=n.changes(r);return{changes:r,range:En.range(o.mapPos(i.anchor,1),o.mapPos(i.head,1))}})}const X3e=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=Object.create(null),i=new p6(n,{overrideIndentation:o=>{let s=t[o];return s??-1}}),r=mU(n,(o,s,a)=>{let c=hU(i,o.from);if(c==null)return;/\S/.test(o.text)||(c=0);let h=/^\s*/.exec(o.text)[0],m=C4(n,c);(h!=m||a.from<o.from+h.length)&&(t[o.from]=c,s.push({from:o.from,to:o.from+h.length,insert:m}))});return r.changes.empty||e(n.update(r,{userEvent:"indent"})),!0},J3e=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(mU(n,(t,i)=>{i.push({from:t.from,insert:n.facet(AU)})}),{userEvent:"input.indent"})),!0),e4e=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(mU(n,(t,i)=>{let r=/^\s*/.exec(t.text)[0];if(!r)return;let o=Gx(r,n.tabSize),s=0,a=C4(n,Math.max(0,o-kS(n)));for(;s<r.length&&s<a.length&&r.charCodeAt(s)==a.charCodeAt(s);)s++;i.push({from:t.from+s,to:t.from+r.length,insert:a.slice(s)})}),{userEvent:"delete.dedent"})),!0),t4e=n=>(n.setTabFocusMode(),!0),n4e=[{key:"Ctrl-b",run:Wte,shift:Jte,preventDefault:!0},{key:"Ctrl-f",run:Qte,shift:ene},{key:"Ctrl-p",run:Vte,shift:ine},{key:"Ctrl-n",run:$te,shift:rne},{key:"Ctrl-a",run:v3e,shift:k3e},{key:"Ctrl-e",run:b3e,shift:T3e},{key:"Ctrl-d",run:lne},{key:"Ctrl-h",run:yR},{key:"Ctrl-k",run:z3e},{key:"Ctrl-Alt-h",run:cne},{key:"Ctrl-o",run:G3e},{key:"Ctrl-t",run:W3e},{key:"Ctrl-v",run:gR}],i4e=[{key:"ArrowLeft",run:Wte,shift:Jte,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:c3e,shift:x3e,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:g3e,shift:O3e,preventDefault:!0},{key:"ArrowRight",run:Qte,shift:ene,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:A3e,shift:M3e,preventDefault:!0},{mac:"Cmd-ArrowRight",run:y3e,shift:I3e,preventDefault:!0},{key:"ArrowUp",run:Vte,shift:ine,preventDefault:!0},{mac:"Cmd-ArrowUp",run:TN,shift:DN},{mac:"Ctrl-ArrowUp",run:ON,shift:IN},{key:"ArrowDown",run:$te,shift:rne,preventDefault:!0},{mac:"Cmd-ArrowDown",run:RN,shift:PN},{mac:"Ctrl-ArrowDown",run:gR,shift:kN},{key:"PageUp",run:ON,shift:IN},{key:"PageDown",run:gR,shift:kN},{key:"Home",run:m3e,shift:B3e,preventDefault:!0},{key:"Mod-Home",run:TN,shift:DN},{key:"End",run:p3e,shift:E3e,preventDefault:!0},{key:"Mod-End",run:RN,shift:PN},{key:"Enter",run:UN,shift:UN},{key:"Mod-a",run:R3e},{key:"Backspace",run:yR,shift:yR,preventDefault:!0},{key:"Delete",run:lne,preventDefault:!0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:cne,preventDefault:!0},{key:"Mod-Delete",mac:"Alt-Delete",run:F3e,preventDefault:!0},{mac:"Mod-Backspace",run:j3e,preventDefault:!0},{mac:"Mod-Delete",run:N3e,preventDefault:!0}].concat(n4e.map(n=>({mac:n.key,run:n.run,shift:n.shift}))),r4e=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:d3e,shift:w3e},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:f3e,shift:S3e},{key:"Alt-ArrowUp",run:Q3e},{key:"Shift-Alt-ArrowUp",run:q3e},{key:"Alt-ArrowDown",run:Y3e},{key:"Shift-Alt-ArrowDown",run:V3e},{key:"Mod-Alt-ArrowUp",run:U3e},{key:"Mod-Alt-ArrowDown",run:K3e},{key:"Escape",run:L3e},{key:"Mod-Enter",run:Z3e},{key:"Alt-l",mac:"Ctrl-l",run:D3e},{key:"Mod-i",run:P3e,preventDefault:!0},{key:"Mod-[",run:e4e},{key:"Mod-]",run:J3e},{key:"Mod-Alt-\\",run:X3e},{key:"Shift-Mod-k",run:$3e},{key:"Shift-Mod-\\",run:_3e},{key:"Mod-/",run:Q2e},{key:"Alt-A",run:q2e},{key:"Ctrl-m",mac:"Shift-Alt-m",run:t4e}].concat(i4e),KN=typeof String.prototype.normalize=="function"?n=>n.normalize("NFKD"):n=>n;class Ex{constructor(e,t,i=0,r=e.length,o,s){this.test=s,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(i,r),this.bufferStart=i,this.normalize=o?a=>o(KN(a)):KN,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return gd(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=YP(e),i=this.bufferStart+this.bufferPos;this.bufferPos+=Fg(e);let r=this.normalize(t);if(r.length)for(let o=0,s=i;;o++){let a=r.charCodeAt(o),c=this.match(a,s,this.bufferPos+this.bufferStart);if(o==r.length-1){if(c)return this.value=c,this;break}s==i&&o<t.length&&t.charCodeAt(o)==a&&s++}}}match(e,t,i){let r=null;for(let o=0;o<this.matches.length;o+=2){let s=this.matches[o],a=!1;this.query.charCodeAt(s)==e&&(s==this.query.length-1?r={from:this.matches[o+1],to:i}:(this.matches[o]++,a=!0)),a||(this.matches.splice(o,2),o-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?r={from:t,to:i}:this.matches.push(1,t)),r&&this.test&&!this.test(r.from,r.to,this.buffer,this.bufferStart)&&(r=null),r}}typeof Symbol<"u"&&(Ex.prototype[Symbol.iterator]=function(){return this});const fne={from:-1,to:-1,match:/.*/.exec("")},gU="gm"+(/x/.unicode==null?"":"u");class pne{constructor(e,t,i,r=0,o=e.length){if(this.text=e,this.to=o,this.curLine="",this.done=!1,this.value=fne,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new mne(e,t,i,r,o);this.re=new RegExp(t,gU+(i?.ignoreCase?"i":"")),this.test=i?.test,this.iter=e.iter();let s=e.lineAt(r);this.curLineStart=s.from,this.matchPos=PS(e,r),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let i=this.curLineStart+t.index,r=i+t[0].length;if(this.matchPos=PS(this.text,r+(i==r?1:0)),i==this.curLineStart+this.curLine.length&&this.nextLine(),(i<r||i>this.value.to)&&(!this.test||this.test(i,r,t)))return this.value={from:i,to:r,match:t},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const $O=new WeakMap;class X_{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,i){let r=$O.get(e);if(!r||r.from>=i||r.to<=t){let a=new X_(t,e.sliceString(t,i));return $O.set(e,a),a}if(r.from==t&&r.to==i)return r;let{text:o,from:s}=r;return s>t&&(o=e.sliceString(t,s)+o,s=t),r.to<i&&(o+=e.sliceString(r.to,i)),$O.set(e,new X_(s,o)),new X_(t,o.slice(t-s,i-s))}}class mne{constructor(e,t,i,r,o){this.text=e,this.to=o,this.done=!1,this.value=fne,this.matchPos=PS(e,r),this.re=new RegExp(t,gU+(i?.ignoreCase?"i":"")),this.test=i?.test,this.flat=X_.get(e,r,this.chunkEnd(r+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){let i=this.flat.from+t.index,r=i+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(i,r,t)))return this.value={from:i,to:r,match:t},this.matchPos=PS(this.text,r+(i==r?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=X_.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(pne.prototype[Symbol.iterator]=mne.prototype[Symbol.iterator]=function(){return this});function o4e(n){try{return new RegExp(n,gU),!0}catch{return!1}}function PS(n,e){if(e>=n.length)return e;let t=n.lineAt(e),i;for(;e<t.to&&(i=t.text.charCodeAt(e-t.from))>=56320&&i<57344;)e++;return e}function vR(n){let e=String(n.state.doc.lineAt(n.state.selection.main.head).number),t=Sa("input",{class:"cm-textfield",name:"line",value:e}),i=Sa("form",{class:"cm-gotoLine",onkeydown:o=>{o.keyCode==27?(o.preventDefault(),n.dispatch({effects:C3.of(!1)}),n.focus()):o.keyCode==13&&(o.preventDefault(),r())},onsubmit:o=>{o.preventDefault(),r()}},Sa("label",n.state.phrase("Go to line"),": ",t)," ",Sa("button",{class:"cm-button",type:"submit"},n.state.phrase("go")),Sa("button",{name:"close",onclick:()=>{n.dispatch({effects:C3.of(!1)}),n.focus()},"aria-label":n.state.phrase("close"),type:"button"},[""]));function r(){let o=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(t.value);if(!o)return;let{state:s}=n,a=s.doc.lineAt(s.selection.main.head),[,c,h,m,v]=o,x=m?+m.slice(1):0,E=h?+h:a.number;if(h&&v){let F=E/100;c&&(F=F*(c=="-"?-1:1)+a.number/s.doc.lines),E=Math.round(s.doc.lines*F)}else h&&c&&(E=E*(c=="-"?-1:1)+a.number);let D=s.doc.line(Math.max(1,Math.min(s.doc.lines,E))),P=En.cursor(D.from+Math.max(0,Math.min(x,D.length)));n.dispatch({effects:[C3.of(!1),Mi.scrollIntoView(P.from,{y:"center"})],selection:P}),n.focus()}return{dom:i}}const C3=to.define(),LN=Ic.define({create(){return!0},update(n,e){for(let t of e.effects)t.is(C3)&&(n=t.value);return n},provide:n=>y4.from(n,e=>e?vR:null)}),s4e=n=>{let e=g4(n,vR);if(!e){let t=[C3.of(!0)];n.state.field(LN,!1)==null&&t.push(to.appendConfig.of([LN,a4e])),n.dispatch({effects:t}),e=g4(n,vR)}return e&&e.dom.querySelector("input").select(),!0},a4e=Mi.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),l4e={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},u4e=Si.define({combine(n){return Om(n,l4e,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})}});function c4e(n){return[p4e,f4e]}const A4e=wr.mark({class:"cm-selectionMatch"}),h4e=wr.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function FN(n,e,t,i){return(t==0||n(e.sliceDoc(t-1,t))!=Ml.Word)&&(i==e.doc.length||n(e.sliceDoc(i,i+1))!=Ml.Word)}function d4e(n,e,t,i){return n(e.sliceDoc(t,t+1))==Ml.Word&&n(e.sliceDoc(i-1,i))==Ml.Word}const f4e=Bu.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.selectionSet||n.docChanged||n.viewportChanged)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=n.state.facet(u4e),{state:t}=n,i=t.selection;if(i.ranges.length>1)return wr.none;let r=i.main,o,s=null;if(r.empty){if(!e.highlightWordAroundCursor)return wr.none;let c=t.wordAt(r.head);if(!c)return wr.none;s=t.charCategorizer(r.head),o=t.sliceDoc(c.from,c.to)}else{let c=r.to-r.from;if(c<e.minSelectionLength||c>200)return wr.none;if(e.wholeWords){if(o=t.sliceDoc(r.from,r.to),s=t.charCategorizer(r.head),!(FN(s,t,r.from,r.to)&&d4e(s,t,r.from,r.to)))return wr.none}else if(o=t.sliceDoc(r.from,r.to),!o)return wr.none}let a=[];for(let c of n.visibleRanges){let h=new Ex(t.doc,o,c.from,c.to);for(;!h.next().done;){let{from:m,to:v}=h.value;if((!s||FN(s,t,m,v))&&(r.empty&&m<=r.from&&v>=r.to?a.push(h4e.range(m,v)):(m>=r.to||v<=r.from)&&a.push(A4e.range(m,v)),a.length>e.maxMatches))return wr.none}}return wr.set(a)}},{decorations:n=>n.decorations}),p4e=Mi.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),m4e=({state:n,dispatch:e})=>{let{selection:t}=n,i=En.create(t.ranges.map(r=>n.wordAt(r.head)||En.cursor(r.head)),t.mainIndex);return i.eq(t)?!1:(e(n.update({selection:i})),!0)};function g4e(n,e){let{main:t,ranges:i}=n.selection,r=n.wordAt(t.head),o=r&&r.from==t.from&&r.to==t.to;for(let s=!1,a=new Ex(n.doc,e,i[i.length-1].to);;)if(a.next(),a.done){if(s)return null;a=new Ex(n.doc,e,0,Math.max(0,i[i.length-1].from-1)),s=!0}else{if(s&&i.some(c=>c.from==a.value.from))continue;if(o){let c=n.wordAt(a.value.from);if(!c||c.from!=a.value.from||c.to!=a.value.to)continue}return a.value}}const y4e=({state:n,dispatch:e})=>{let{ranges:t}=n.selection;if(t.some(o=>o.from===o.to))return m4e({state:n,dispatch:e});let i=n.sliceDoc(t[0].from,t[0].to);if(n.selection.ranges.some(o=>n.sliceDoc(o.from,o.to)!=i))return!1;let r=g4e(n,i);return r?(e(n.update({selection:n.selection.addRange(En.range(r.from,r.to),!1),effects:Mi.scrollIntoView(r.to)})),!0):!1},Qx=Si.define({combine(n){return Om(n,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new I4e(e),scrollToMatch:e=>Mi.scrollIntoView(e)})}});class gne{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||o4e(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(t,i)=>i=="n"?`
`:i=="r"?"\r":i=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new _4e(this):new b4e(this)}getCursor(e,t=0,i){let r=e.doc?e:fs.create({doc:e});return i==null&&(i=r.doc.length),this.regexp?E_(this,r,t,i):S_(this,r,t,i)}}class yne{constructor(e){this.spec=e}}function S_(n,e,t,i){return new Ex(e.doc,n.unquoted,t,i,n.caseSensitive?void 0:r=>r.toLowerCase(),n.wholeWord?v4e(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function v4e(n,e){return(t,i,r,o)=>((o>t||o+r.length<i)&&(o=Math.max(0,t-2),r=n.sliceString(o,Math.min(n.length,i+2))),(e(US(r,t-o))!=Ml.Word||e(KS(r,t-o))!=Ml.Word)&&(e(KS(r,i-o))!=Ml.Word||e(US(r,i-o))!=Ml.Word))}class b4e extends yne{constructor(e){super(e)}nextMatch(e,t,i){let r=S_(this.spec,e,i,e.doc.length).nextOverlapping();if(r.done){let o=Math.min(e.doc.length,t+this.spec.unquoted.length);r=S_(this.spec,e,0,o).nextOverlapping()}return r.done||r.value.from==t&&r.value.to==i?null:r.value}prevMatchInRange(e,t,i){for(let r=i;;){let o=Math.max(t,r-1e4-this.spec.unquoted.length),s=S_(this.spec,e,o,r),a=null;for(;!s.nextOverlapping().done;)a=s.value;if(a)return a;if(o==t)return null;r-=1e4}}prevMatch(e,t,i){let r=this.prevMatchInRange(e,0,t);return r||(r=this.prevMatchInRange(e,Math.max(0,i-this.spec.unquoted.length),e.doc.length)),r&&(r.from!=t||r.to!=i)?r:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,t){let i=S_(this.spec,e,0,e.doc.length),r=[];for(;!i.next().done;){if(r.length>=t)return null;r.push(i.value)}return r}highlight(e,t,i,r){let o=S_(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(i+this.spec.unquoted.length,e.doc.length));for(;!o.next().done;)r(o.value.from,o.value.to)}}function E_(n,e,t,i){return new pne(e.doc,n.search,{ignoreCase:!n.caseSensitive,test:n.wholeWord?C4e(e.charCategorizer(e.selection.main.head)):void 0},t,i)}function US(n,e){return n.slice(bA(n,e,!1),e)}function KS(n,e){return n.slice(e,bA(n,e))}function C4e(n){return(e,t,i)=>!i[0].length||(n(US(i.input,i.index))!=Ml.Word||n(KS(i.input,i.index))!=Ml.Word)&&(n(KS(i.input,i.index+i[0].length))!=Ml.Word||n(US(i.input,i.index+i[0].length))!=Ml.Word)}class _4e extends yne{nextMatch(e,t,i){let r=E_(this.spec,e,i,e.doc.length).next();return r.done&&(r=E_(this.spec,e,0,t).next()),r.done?null:r.value}prevMatchInRange(e,t,i){for(let r=1;;r++){let o=Math.max(t,i-r*1e4),s=E_(this.spec,e,o,i),a=null;for(;!s.next().done;)a=s.value;if(a&&(o==t||a.from>o+10))return a;if(o==t)return null}}prevMatch(e,t,i){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(t,i)=>{if(i=="&")return e.match[0];if(i=="$")return"$";for(let r=i.length;r>0;r--){let o=+i.slice(0,r);if(o>0&&o<e.match.length)return e.match[o]+i.slice(r)}return t})}matchAll(e,t){let i=E_(this.spec,e,0,e.doc.length),r=[];for(;!i.next().done;){if(r.length>=t)return null;r.push(i.value)}return r}highlight(e,t,i,r){let o=E_(this.spec,e,Math.max(0,t-250),Math.min(i+250,e.doc.length));for(;!o.next().done;)r(o.value.from,o.value.to)}}const _4=to.define(),yU=to.define(),Jy=Ic.define({create(n){return new HO(bR(n).create(),null)},update(n,e){for(let t of e.effects)t.is(_4)?n=new HO(t.value.create(),n.panel):t.is(yU)&&(n=new HO(n.query,t.value?vU:null));return n},provide:n=>y4.from(n,e=>e.panel)});class HO{constructor(e,t){this.query=e,this.panel=t}}const x4e=wr.mark({class:"cm-searchMatch"}),M4e=wr.mark({class:"cm-searchMatch cm-searchMatch-selected"}),w4e=Bu.fromClass(class{constructor(n){this.view=n,this.decorations=this.highlight(n.state.field(Jy))}update(n){let e=n.state.field(Jy);(e!=n.startState.field(Jy)||n.docChanged||n.selectionSet||n.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:n,panel:e}){if(!e||!n.spec.valid)return wr.none;let{view:t}=this,i=new y1;for(let r=0,o=t.visibleRanges,s=o.length;r<s;r++){let{from:a,to:c}=o[r];for(;r<s-1&&c>o[r+1].from-500;)c=o[++r].to;n.highlight(t.state,a,c,(h,m)=>{let v=t.state.selection.ranges.some(x=>x.from==h&&x.to==m);i.add(h,m,v?M4e:x4e)})}return i.finish()}},{decorations:n=>n.decorations});function wM(n){return e=>{let t=e.state.field(Jy,!1);return t&&t.query.spec.valid?n(e,t):Cne(e)}}const LS=wM((n,{query:e})=>{let{to:t}=n.state.selection.main,i=e.nextMatch(n.state,t,t);if(!i)return!1;let r=En.single(i.from,i.to),o=n.state.facet(Qx);return n.dispatch({selection:r,effects:[bU(n,i),o.scrollToMatch(r.main,n)],userEvent:"select.search"}),bne(n),!0}),FS=wM((n,{query:e})=>{let{state:t}=n,{from:i}=t.selection.main,r=e.prevMatch(t,i,i);if(!r)return!1;let o=En.single(r.from,r.to),s=n.state.facet(Qx);return n.dispatch({selection:o,effects:[bU(n,r),s.scrollToMatch(o.main,n)],userEvent:"select.search"}),bne(n),!0}),S4e=wM((n,{query:e})=>{let t=e.matchAll(n.state,1e3);return!t||!t.length?!1:(n.dispatch({selection:En.create(t.map(i=>En.range(i.from,i.to))),userEvent:"select.search.matches"}),!0)}),E4e=({state:n,dispatch:e})=>{let t=n.selection;if(t.ranges.length>1||t.main.empty)return!1;let{from:i,to:r}=t.main,o=[],s=0;for(let a=new Ex(n.doc,n.sliceDoc(i,r));!a.next().done;){if(o.length>1e3)return!1;a.value.from==i&&(s=o.length),o.push(En.range(a.value.from,a.value.to))}return e(n.update({selection:En.create(o,s),userEvent:"select.search.matches"})),!0},zN=wM((n,{query:e})=>{let{state:t}=n,{from:i,to:r}=t.selection.main;if(t.readOnly)return!1;let o=e.nextMatch(t,i,i);if(!o)return!1;let s=o,a=[],c,h,m=[];s.from==i&&s.to==r&&(h=t.toText(e.getReplacement(s)),a.push({from:s.from,to:s.to,insert:h}),s=e.nextMatch(t,s.from,s.to),m.push(Mi.announce.of(t.phrase("replaced match on line $",t.doc.lineAt(i).number)+".")));let v=n.state.changes(a);return s&&(c=En.single(s.from,s.to).map(v),m.push(bU(n,s)),m.push(t.facet(Qx).scrollToMatch(c.main,n))),n.dispatch({changes:v,selection:c,effects:m,userEvent:"input.replace"}),!0}),B4e=wM((n,{query:e})=>{if(n.state.readOnly)return!1;let t=e.matchAll(n.state,1e9).map(r=>{let{from:o,to:s}=r;return{from:o,to:s,insert:e.getReplacement(r)}});if(!t.length)return!1;let i=n.state.phrase("replaced $ matches",t.length)+".";return n.dispatch({changes:t,effects:Mi.announce.of(i),userEvent:"input.replace.all"}),!0});function vU(n){return n.state.facet(Qx).createPanel(n)}function bR(n,e){var t,i,r,o,s;let a=n.selection.main,c=a.empty||a.to>a.from+100?"":n.sliceDoc(a.from,a.to);if(e&&!c)return e;let h=n.facet(Qx);return new gne({search:((t=e?.literal)!==null&&t!==void 0?t:h.literal)?c:c.replace(/\n/g,"\\n"),caseSensitive:(i=e?.caseSensitive)!==null&&i!==void 0?i:h.caseSensitive,literal:(r=e?.literal)!==null&&r!==void 0?r:h.literal,regexp:(o=e?.regexp)!==null&&o!==void 0?o:h.regexp,wholeWord:(s=e?.wholeWord)!==null&&s!==void 0?s:h.wholeWord})}function vne(n){let e=g4(n,vU);return e&&e.dom.querySelector("[main-field]")}function bne(n){let e=vne(n);e&&e==n.root.activeElement&&e.select()}const Cne=n=>{let e=n.state.field(Jy,!1);if(e&&e.panel){let t=vne(n);if(t&&t!=n.root.activeElement){let i=bR(n.state,e.query.spec);i.valid&&n.dispatch({effects:_4.of(i)}),t.focus(),t.select()}}else n.dispatch({effects:[yU.of(!0),e?_4.of(bR(n.state,e.query.spec)):to.appendConfig.of(T4e)]});return!0},_ne=n=>{let e=n.state.field(Jy,!1);if(!e||!e.panel)return!1;let t=g4(n,vU);return t&&t.dom.contains(n.root.activeElement)&&n.focus(),n.dispatch({effects:yU.of(!1)}),!0},O4e=[{key:"Mod-f",run:Cne,scope:"editor search-panel"},{key:"F3",run:LS,shift:FS,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:LS,shift:FS,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:_ne,scope:"editor search-panel"},{key:"Mod-Shift-l",run:E4e},{key:"Mod-Alt-g",run:s4e},{key:"Mod-d",run:y4e,preventDefault:!0}];class I4e{constructor(e){this.view=e;let t=this.query=e.state.field(Jy).query.spec;this.commit=this.commit.bind(this),this.searchField=Sa("input",{value:t.search,placeholder:tf(e,"Find"),"aria-label":tf(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=Sa("input",{value:t.replace,placeholder:tf(e,"Replace"),"aria-label":tf(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=Sa("input",{type:"checkbox",name:"case",form:"",checked:t.caseSensitive,onchange:this.commit}),this.reField=Sa("input",{type:"checkbox",name:"re",form:"",checked:t.regexp,onchange:this.commit}),this.wordField=Sa("input",{type:"checkbox",name:"word",form:"",checked:t.wholeWord,onchange:this.commit});function i(r,o,s){return Sa("button",{class:"cm-button",name:r,onclick:o,type:"button"},s)}this.dom=Sa("div",{onkeydown:r=>this.keydown(r),class:"cm-search"},[this.searchField,i("next",()=>LS(e),[tf(e,"next")]),i("prev",()=>FS(e),[tf(e,"previous")]),i("select",()=>S4e(e),[tf(e,"all")]),Sa("label",null,[this.caseField,tf(e,"match case")]),Sa("label",null,[this.reField,tf(e,"regexp")]),Sa("label",null,[this.wordField,tf(e,"by word")]),...e.state.readOnly?[]:[Sa("br"),this.replaceField,i("replace",()=>zN(e),[tf(e,"replace")]),i("replaceAll",()=>B4e(e),[tf(e,"replace all")])],Sa("button",{name:"close",onclick:()=>_ne(e),"aria-label":tf(e,"close"),type:"button"},[""])])}commit(){let e=new gne({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:_4.of(e)}))}keydown(e){L_e(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?FS:LS)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),zN(this.view))}update(e){for(let t of e.transactions)for(let i of t.effects)i.is(_4)&&!i.value.eq(this.query)&&this.setQuery(i.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(Qx).top}}function tf(n,e){return n.state.phrase(e)}const T5=30,R5=/[\s\.,:;?!]/;function bU(n,{from:e,to:t}){let i=n.state.doc.lineAt(e),r=n.state.doc.lineAt(t).to,o=Math.max(i.from,e-T5),s=Math.min(r,t+T5),a=n.state.sliceDoc(o,s);if(o!=i.from){for(let c=0;c<T5;c++)if(!R5.test(a[c+1])&&R5.test(a[c])){a=a.slice(c);break}}if(s!=r){for(let c=a.length-1;c>a.length-T5;c--)if(!R5.test(a[c-1])&&R5.test(a[c])){a=a.slice(0,c);break}}return Mi.announce.of(`${n.state.phrase("current match")}. ${a} ${n.state.phrase("on line")} ${i.number}.`)}const k4e=Mi.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),T4e=[Jy,cC.low(w4e),k4e];class xne{constructor(e,t,i,r){this.state=e,this.pos=t,this.explicit=i,this.view=r,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let t=ih(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),i=Math.max(t.from,this.pos-250),r=t.text.slice(i-t.from,this.pos-t.from),o=r.search(Mne(e,!1));return o<0?null:{from:i+o,to:this.pos,text:r.slice(o)}}get aborted(){return this.abortListeners==null}addEventListener(e,t,i){e=="abort"&&this.abortListeners&&(this.abortListeners.push(t),i&&i.onDocChange&&(this.abortOnDocChange=!0))}}function jN(n){let e=Object.keys(n).join(""),t=/\w/.test(e);return t&&(e=e.replace(/\w/g,"")),`[${t?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function R4e(n){let e=Object.create(null),t=Object.create(null);for(let{label:r}of n){e[r[0]]=!0;for(let o=1;o<r.length;o++)t[r[o]]=!0}let i=jN(e)+jN(t)+"*$";return[new RegExp("^"+i),new RegExp(i)]}function D4e(n){let e=n.map(r=>typeof r=="string"?{label:r}:r),[t,i]=e.every(r=>/^\w+$/.test(r.label))?[/\w*$/,/\w+$/]:R4e(e);return r=>{let o=r.matchBefore(i);return o||r.explicit?{from:o?o.from:r.pos,options:e,validFor:t}:null}}class NN{constructor(e,t,i,r){this.completion=e,this.source=t,this.match=i,this.score=r}}function Lb(n){return n.selection.main.from}function Mne(n,e){var t;let{source:i}=n,r=e&&i[0]!="^",o=i[i.length-1]!="$";return!r&&!o?n:new RegExp(`${r?"^":""}(?:${i})${o?"$":""}`,(t=n.flags)!==null&&t!==void 0?t:n.ignoreCase?"i":"")}const wne=x1.define();function P4e(n,e,t,i){let{main:r}=n.selection,o=t-r.from,s=i-r.from;return{...n.changeByRange(a=>{if(a!=r&&t!=i&&n.sliceDoc(a.from+o,a.from+s)!=n.sliceDoc(t,i))return{range:a};let c=n.toText(e);return{changes:{from:a.from+o,to:i==r.from?a.to:a.from+s,insert:c},range:En.cursor(a.from+o+c.length)}}),scrollIntoView:!0,userEvent:"input.complete"}}const GN=new WeakMap;function U4e(n){if(!Array.isArray(n))return n;let e=GN.get(n);return e||GN.set(n,e=D4e(n)),e}const zS=to.define(),x4=to.define();class K4e{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let t=0;t<e.length;){let i=gd(e,t),r=Fg(i);this.chars.push(i);let o=e.slice(t,t+r),s=o.toUpperCase();this.folded.push(gd(s==o?o.toLowerCase():s,0)),t+=r}this.astral=e.length!=this.chars.length}ret(e,t){return this.score=e,this.matched=t,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:t,folded:i,any:r,precise:o,byWord:s}=this;if(t.length==1){let q=gd(e,0),V=Fg(q),H=V==e.length?0:-100;if(q!=t[0])if(q==i[0])H+=-200;else return null;return this.ret(H,[0,V])}let a=e.indexOf(this.pattern);if(a==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let c=t.length,h=0;if(a<0){for(let q=0,V=Math.min(e.length,200);q<V&&h<c;){let H=gd(e,q);(H==t[h]||H==i[h])&&(r[h++]=q),q+=Fg(H)}if(h<c)return null}let m=0,v=0,x=!1,E=0,D=-1,P=-1,F=/[a-z]/.test(e),W=!0;for(let q=0,V=Math.min(e.length,200),H=0;q<V&&v<c;){let X=gd(e,q);a<0&&(m<c&&X==t[m]&&(o[m++]=q),E<c&&(X==t[E]||X==i[E]?(E==0&&(D=q),P=q+1,E++):E=0));let Z,G=X<255?X>=48&&X<=57||X>=97&&X<=122?2:X>=65&&X<=90?1:0:(Z=YP(X))!=Z.toLowerCase()?1:Z!=Z.toUpperCase()?2:0;(!q||G==1&&F||H==0&&G!=0)&&(t[v]==X||i[v]==X&&(x=!0)?s[v++]=q:s.length&&(W=!1)),H=G,q+=Fg(X)}return v==c&&s[0]==0&&W?this.result(-100+(x?-200:0),s,e):E==c&&D==0?this.ret(-200-e.length+(P==e.length?0:-100),[0,P]):a>-1?this.ret(-700-e.length,[a,a+this.pattern.length]):E==c?this.ret(-900-e.length,[D,P]):v==c?this.result(-100+(x?-200:0)+-700+(W?0:-1100),s,e):t.length==2?null:this.result((r[0]?-700:0)+-200+-1100,r,e)}result(e,t,i){let r=[],o=0;for(let s of t){let a=s+(this.astral?Fg(gd(i,s)):1);o&&r[o-1]==s?r[o-1]=a:(r[o++]=s,r[o++]=a)}return this.ret(e-i.length,r)}}class L4e{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let t=e.slice(0,this.pattern.length),i=t==this.pattern?0:t.toLowerCase()==this.folded?-200:null;return i==null?null:(this.matched=[0,t.length],this.score=i+(e.length==this.pattern.length?0:-100),this)}}const tA=Si.define({combine(n){return Om(n,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:F4e,filterStrict:!1,compareCompletions:(e,t)=>e.label.localeCompare(t.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,tooltipClass:(e,t)=>i=>WN(e(i),t(i)),optionClass:(e,t)=>i=>WN(e(i),t(i)),addToOptions:(e,t)=>e.concat(t),filterStrict:(e,t)=>e||t})}});function WN(n,e){return n?e?n+" "+e:n:e}function F4e(n,e,t,i,r,o){let s=n.textDirection==il.RTL,a=s,c=!1,h="top",m,v,x=e.left-r.left,E=r.right-e.right,D=i.right-i.left,P=i.bottom-i.top;if(a&&x<Math.min(D,E)?a=!1:!a&&E<Math.min(D,x)&&(a=!0),D<=(a?x:E))m=Math.max(r.top,Math.min(t.top,r.bottom-P))-e.top,v=Math.min(400,a?x:E);else{c=!0,v=Math.min(400,(s?e.right:r.right-e.left)-30);let q=r.bottom-e.bottom;q>=P||q>e.top?m=t.bottom-e.top:(h="bottom",m=e.bottom-t.top)}let F=(e.bottom-e.top)/o.offsetHeight,W=(e.right-e.left)/o.offsetWidth;return{style:`${h}: ${m/F}px; max-width: ${v/W}px`,class:"cm-completionInfo-"+(c?s?"left-narrow":"right-narrow":a?"left":"right")}}function z4e(n){let e=n.addToOptions.slice();return n.icons&&e.push({render(t){let i=document.createElement("div");return i.classList.add("cm-completionIcon"),t.type&&i.classList.add(...t.type.split(/\s+/g).map(r=>"cm-completionIcon-"+r)),i.setAttribute("aria-hidden","true"),i},position:20}),e.push({render(t,i,r,o){let s=document.createElement("span");s.className="cm-completionLabel";let a=t.displayLabel||t.label,c=0;for(let h=0;h<o.length;){let m=o[h++],v=o[h++];m>c&&s.appendChild(document.createTextNode(a.slice(c,m)));let x=s.appendChild(document.createElement("span"));x.appendChild(document.createTextNode(a.slice(m,v))),x.className="cm-completionMatchedText",c=v}return c<a.length&&s.appendChild(document.createTextNode(a.slice(c))),s},position:50},{render(t){if(!t.detail)return null;let i=document.createElement("span");return i.className="cm-completionDetail",i.textContent=t.detail,i},position:80}),e.sort((t,i)=>t.position-i.position).map(t=>t.render)}function ZO(n,e,t){if(n<=t)return{from:0,to:n};if(e<0&&(e=0),e<=n>>1){let r=Math.floor(e/t);return{from:r*t,to:(r+1)*t}}let i=Math.floor((n-e)/t);return{from:n-(i+1)*t,to:n-i*t}}class j4e{constructor(e,t,i){this.view=e,this.stateField=t,this.applyCompletion=i,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:c=>this.placeInfo(c),key:this},this.space=null,this.currentClass="";let r=e.state.field(t),{options:o,selected:s}=r.open,a=e.state.facet(tA);this.optionContent=z4e(a),this.optionClass=a.optionClass,this.tooltipClass=a.tooltipClass,this.range=ZO(o.length,s,a.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",c=>{let{options:h}=e.state.field(t).open;for(let m=c.target,v;m&&m!=this.dom;m=m.parentNode)if(m.nodeName=="LI"&&(v=/-(\d+)$/.exec(m.id))&&+v[1]<h.length){this.applyCompletion(e,h[+v[1]]),c.preventDefault();return}}),this.dom.addEventListener("focusout",c=>{let h=e.state.field(this.stateField,!1);h&&h.tooltip&&e.state.facet(tA).closeOnBlur&&c.relatedTarget!=e.contentDOM&&e.dispatch({effects:x4.of(null)})}),this.showOptions(o,r.id)}mount(){this.updateSel()}showOptions(e,t){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,t,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var t;let i=e.state.field(this.stateField),r=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),i!=r){let{options:o,selected:s,disabled:a}=i.open;(!r.open||r.open.options!=o)&&(this.range=ZO(o.length,s,e.state.facet(tA).maxRenderedOptions),this.showOptions(o,i.id)),this.updateSel(),a!=((t=r.open)===null||t===void 0?void 0:t.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!a)}}updateTooltipClass(e){let t=this.tooltipClass(e);if(t!=this.currentClass){for(let i of this.currentClass.split(" "))i&&this.dom.classList.remove(i);for(let i of t.split(" "))i&&this.dom.classList.add(i);this.currentClass=t}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;(t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=ZO(t.options.length,t.selected,this.view.state.facet(tA).maxRenderedOptions),this.showOptions(t.options,e.id));let i=this.updateSelectedOption(t.selected);if(i){this.destroyInfo();let{completion:r}=t.options[t.selected],{info:o}=r;if(!o)return;let s=typeof o=="string"?document.createTextNode(o):o(r);if(!s)return;"then"in s?s.then(a=>{a&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(a,r)}).catch(a=>Ph(this.view.state,a,"completion info")):(this.addInfoPane(s,r),i.setAttribute("aria-describedby",this.info.id))}}addInfoPane(e,t){this.destroyInfo();let i=this.info=document.createElement("div");if(i.className="cm-tooltip cm-completionInfo",i.id="cm-completionInfo-"+Math.floor(Math.random()*65535).toString(16),e.nodeType!=null)i.appendChild(e),this.infoDestroy=null;else{let{dom:r,destroy:o}=e;i.appendChild(r),this.infoDestroy=o||null}this.dom.appendChild(i),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let t=null;for(let i=this.list.firstChild,r=this.range.from;i;i=i.nextSibling,r++)i.nodeName!="LI"||!i.id?r--:r==e?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),t=i):i.hasAttribute("aria-selected")&&(i.removeAttribute("aria-selected"),i.removeAttribute("aria-describedby"));return t&&G4e(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),r=e.getBoundingClientRect(),o=this.space;if(!o){let s=this.dom.ownerDocument.documentElement;o={left:0,top:0,right:s.clientWidth,bottom:s.clientHeight}}return r.top>Math.min(o.bottom,t.bottom)-10||r.bottom<Math.max(o.top,t.top)+10?null:this.view.state.facet(tA).positionInfo(this.view,t,r,i,o,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,t,i){const r=document.createElement("ul");r.id=t,r.setAttribute("role","listbox"),r.setAttribute("aria-expanded","true"),r.setAttribute("aria-label",this.view.state.phrase("Completions")),r.addEventListener("mousedown",s=>{s.target==r&&s.preventDefault()});let o=null;for(let s=i.from;s<i.to;s++){let{completion:a,match:c}=e[s],{section:h}=a;if(h){let x=typeof h=="string"?h:h.name;if(x!=o&&(s>i.from||i.from==0))if(o=x,typeof h!="string"&&h.header)r.appendChild(h.header(h));else{let E=r.appendChild(document.createElement("completion-section"));E.textContent=x}}const m=r.appendChild(document.createElement("li"));m.id=t+"-"+s,m.setAttribute("role","option");let v=this.optionClass(a);v&&(m.className=v);for(let x of this.optionContent){let E=x(a,this.view.state,this.view,c);E&&m.appendChild(E)}}return i.from&&r.classList.add("cm-completionListIncompleteTop"),i.to<e.length&&r.classList.add("cm-completionListIncompleteBottom"),r}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function N4e(n,e){return t=>new j4e(t,n,e)}function G4e(n,e){let t=n.getBoundingClientRect(),i=e.getBoundingClientRect(),r=t.height/n.offsetHeight;i.top<t.top?n.scrollTop-=(t.top-i.top)/r:i.bottom>t.bottom&&(n.scrollTop+=(i.bottom-t.bottom)/r)}function QN(n){return(n.boost||0)*100+(n.apply?10:0)+(n.info?5:0)+(n.type?1:0)}function W4e(n,e){let t=[],i=null,r=null,o=m=>{t.push(m);let{section:v}=m.completion;if(v){i||(i=[]);let x=typeof v=="string"?v:v.name;i.some(E=>E.name==x)||i.push(typeof v=="string"?{name:x}:v)}},s=e.facet(tA);for(let m of n)if(m.hasResult()){let v=m.result.getMatch;if(m.result.filter===!1)for(let x of m.result.options)o(new NN(x,m.source,v?v(x):[],1e9-t.length));else{let x=e.sliceDoc(m.from,m.to),E,D=s.filterStrict?new L4e(x):new K4e(x);for(let P of m.result.options)if(E=D.match(P.label)){let F=P.displayLabel?v?v(P,E.matched):[]:E.matched,W=E.score+(P.boost||0);if(o(new NN(P,m.source,F,W)),typeof P.section=="object"&&P.section.rank==="dynamic"){let{name:q}=P.section;r||(r=Object.create(null)),r[q]=Math.max(W,r[q]||-1e9)}}}}if(i){let m=Object.create(null),v=0,x=(E,D)=>(E.rank==="dynamic"&&D.rank==="dynamic"?r[D.name]-r[E.name]:0)||(typeof E.rank=="number"?E.rank:1e9)-(typeof D.rank=="number"?D.rank:1e9)||(E.name<D.name?-1:1);for(let E of i.sort(x))v-=1e5,m[E.name]=v;for(let E of t){let{section:D}=E.completion;D&&(E.score+=m[typeof D=="string"?D:D.name])}}let a=[],c=null,h=s.compareCompletions;for(let m of t.sort((v,x)=>x.score-v.score||h(v.completion,x.completion))){let v=m.completion;!c||c.label!=v.label||c.detail!=v.detail||c.type!=null&&v.type!=null&&c.type!=v.type||c.apply!=v.apply||c.boost!=v.boost?a.push(m):QN(m.completion)>QN(c)&&(a[a.length-1]=m),c=m.completion}return a}class P_{constructor(e,t,i,r,o,s){this.options=e,this.attrs=t,this.tooltip=i,this.timestamp=r,this.selected=o,this.disabled=s}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new P_(this.options,YN(t,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,t,i,r,o,s){if(r&&!s&&e.some(h=>h.isPending))return r.setDisabled();let a=W4e(e,t);if(!a.length)return r&&e.some(h=>h.isPending)?r.setDisabled():null;let c=t.facet(tA).selectOnOpen?0:-1;if(r&&r.selected!=c&&r.selected!=-1){let h=r.options[r.selected].completion;for(let m=0;m<a.length;m++)if(a[m].completion==h){c=m;break}}return new P_(a,YN(i,c),{pos:e.reduce((h,m)=>m.hasResult()?Math.min(h,m.from):h,1e8),create:H4e,above:o.aboveCursor},r?r.timestamp:Date.now(),c,!1)}map(e){return new P_(this.options,this.attrs,{...this.tooltip,pos:e.mapPos(this.tooltip.pos)},this.timestamp,this.selected,this.disabled)}setDisabled(){return new P_(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class jS{constructor(e,t,i){this.active=e,this.id=t,this.open=i}static start(){return new jS(V4e,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:t}=e,i=t.facet(tA),o=(i.override||t.languageDataAt("autocomplete",Lb(t)).map(U4e)).map(c=>(this.active.find(m=>m.source==c)||new np(c,this.active.some(m=>m.state!=0)?1:0)).update(e,i));o.length==this.active.length&&o.every((c,h)=>c==this.active[h])&&(o=this.active);let s=this.open,a=e.effects.some(c=>c.is(CU));s&&e.docChanged&&(s=s.map(e.changes)),e.selection||o.some(c=>c.hasResult()&&e.changes.touchesRange(c.from,c.to))||!Q4e(o,this.active)||a?s=P_.build(o,t,this.id,s,i,a):s&&s.disabled&&!o.some(c=>c.isPending)&&(s=null),!s&&o.every(c=>!c.isPending)&&o.some(c=>c.hasResult())&&(o=o.map(c=>c.hasResult()?new np(c.source,0):c));for(let c of e.effects)c.is(Ene)&&(s=s&&s.setSelected(c.value,this.id));return o==this.active&&s==this.open?this:new jS(o,this.id,s)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?Y4e:q4e}}function Q4e(n,e){if(n==e)return!0;for(let t=0,i=0;;){for(;t<n.length&&!n[t].hasResult();)t++;for(;i<e.length&&!e[i].hasResult();)i++;let r=t==n.length,o=i==e.length;if(r||o)return r==o;if(n[t++].result!=e[i++].result)return!1}}const Y4e={"aria-autocomplete":"list"},q4e={};function YN(n,e){let t={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":n};return e>-1&&(t["aria-activedescendant"]=n+"-"+e),t}const V4e=[];function Sne(n,e){if(n.isUserEvent("input.complete")){let i=n.annotation(wne);if(i&&e.activateOnCompletion(i))return 12}let t=n.isUserEvent("input.type");return t&&e.activateOnTyping?5:t?1:n.isUserEvent("delete.backward")?2:n.selection?8:n.docChanged?16:0}class np{constructor(e,t,i=!1){this.source=e,this.state=t,this.explicit=i}hasResult(){return!1}get isPending(){return this.state==1}update(e,t){let i=Sne(e,t),r=this;(i&8||i&16&&this.touches(e))&&(r=new np(r.source,0)),i&4&&r.state==0&&(r=new np(this.source,1)),r=r.updateFor(e,i);for(let o of e.effects)if(o.is(zS))r=new np(r.source,1,o.value);else if(o.is(x4))r=new np(r.source,0);else if(o.is(CU))for(let s of o.value)s.source==r.source&&(r=s);return r}updateFor(e,t){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(Lb(e.state))}}class J_ extends np{constructor(e,t,i,r,o,s){super(e,3,t),this.limit=i,this.result=r,this.from=o,this.to=s}hasResult(){return!0}updateFor(e,t){var i;if(!(t&3))return this.map(e.changes);let r=this.result;r.map&&!e.changes.empty&&(r=r.map(r,e.changes));let o=e.changes.mapPos(this.from),s=e.changes.mapPos(this.to,1),a=Lb(e.state);if(a>s||!r||t&2&&(Lb(e.startState)==this.from||a<this.limit))return new np(this.source,t&4?1:0);let c=e.changes.mapPos(this.limit);return $4e(r.validFor,e.state,o,s)?new J_(this.source,this.explicit,c,r,o,s):r.update&&(r=r.update(r,o,s,new xne(e.state,a,!1)))?new J_(this.source,this.explicit,c,r,r.from,(i=r.to)!==null&&i!==void 0?i:Lb(e.state)):new np(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new J_(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new np(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function $4e(n,e,t,i){if(!n)return!1;let r=e.sliceDoc(t,i);return typeof n=="function"?n(r,t,i,e):Mne(n,!0).test(r)}const CU=to.define({map(n,e){return n.map(t=>t.map(e))}}),Ene=to.define(),yd=Ic.define({create(){return jS.start()},update(n,e){return n.update(e)},provide:n=>[d6.from(n,e=>e.tooltip),Mi.contentAttributes.from(n,e=>e.attrs)]});function _U(n,e){const t=e.completion.apply||e.completion.label;let i=n.state.field(yd).active.find(r=>r.source==e.source);return i instanceof J_?(typeof t=="string"?n.dispatch({...P4e(n.state,t,i.from,i.to),annotations:wne.of(e.completion)}):t(n,e.completion,i.from,i.to),!0):!1}const H4e=N4e(yd,_U);function D5(n,e="option"){return t=>{let i=t.state.field(yd,!1);if(!i||!i.open||i.open.disabled||Date.now()-i.open.timestamp<t.state.facet(tA).interactionDelay)return!1;let r=1,o;e=="page"&&(o=lte(t,i.open.tooltip))&&(r=Math.max(2,Math.floor(o.dom.offsetHeight/o.dom.querySelector("li").offsetHeight)-1));let{length:s}=i.open.options,a=i.open.selected>-1?i.open.selected+r*(n?1:-1):n?0:s-1;return a<0?a=e=="page"?0:s-1:a>=s&&(a=e=="page"?s-1:0),t.dispatch({effects:Ene.of(a)}),!0}}const Z4e=n=>{let e=n.state.field(yd,!1);return n.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<n.state.facet(tA).interactionDelay?!1:_U(n,e.open.options[e.open.selected])},XO=n=>n.state.field(yd,!1)?(n.dispatch({effects:zS.of(!0)}),!0):!1,X4e=n=>{let e=n.state.field(yd,!1);return!e||!e.active.some(t=>t.state!=0)?!1:(n.dispatch({effects:x4.of(null)}),!0)};class J4e{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const eMe=50,tMe=1e3,nMe=Bu.fromClass(class{constructor(n){this.view=n,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of n.state.field(yd).active)e.isPending&&this.startQuery(e)}update(n){let e=n.state.field(yd),t=n.state.facet(tA);if(!n.selectionSet&&!n.docChanged&&n.startState.field(yd)==e)return;let i=n.transactions.some(o=>{let s=Sne(o,t);return s&8||(o.selection||o.docChanged)&&!(s&3)});for(let o=0;o<this.running.length;o++){let s=this.running[o];if(i||s.context.abortOnDocChange&&n.docChanged||s.updates.length+n.transactions.length>eMe&&Date.now()-s.time>tMe){for(let a of s.context.abortListeners)try{a()}catch(c){Ph(this.view.state,c)}s.context.abortListeners=null,this.running.splice(o--,1)}else s.updates.push(...n.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),n.transactions.some(o=>o.effects.some(s=>s.is(zS)))&&(this.pendingStart=!0);let r=this.pendingStart?50:t.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(o=>o.isPending&&!this.running.some(s=>s.active.source==o.source))?setTimeout(()=>this.startUpdate(),r):-1,this.composing!=0)for(let o of n.transactions)o.isUserEvent("input.type")?this.composing=2:this.composing==2&&o.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:n}=this.view,e=n.field(yd);for(let t of e.active)t.isPending&&!this.running.some(i=>i.active.source==t.source)&&this.startQuery(t);this.running.length&&e.open&&e.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(tA).updateSyncTime))}startQuery(n){let{state:e}=this.view,t=Lb(e),i=new xne(e,t,n.explicit,this.view),r=new J4e(n,i);this.running.push(r),Promise.resolve(n.source(i)).then(o=>{r.context.aborted||(r.done=o||null,this.scheduleAccept())},o=>{this.view.dispatch({effects:x4.of(null)}),Ph(this.view.state,o)})}scheduleAccept(){this.running.every(n=>n.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(tA).updateSyncTime))}accept(){var n;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],t=this.view.state.facet(tA),i=this.view.state.field(yd);for(let r=0;r<this.running.length;r++){let o=this.running[r];if(o.done===void 0)continue;if(this.running.splice(r--,1),o.done){let a=Lb(o.updates.length?o.updates[0].startState:this.view.state),c=Math.min(a,o.done.from+(o.active.explicit?0:1)),h=new J_(o.active.source,o.active.explicit,c,o.done,o.done.from,(n=o.done.to)!==null&&n!==void 0?n:a);for(let m of o.updates)h=h.update(m,t);if(h.hasResult()){e.push(h);continue}}let s=i.active.find(a=>a.source==o.active.source);if(s&&s.isPending)if(o.done==null){let a=new np(o.active.source,0);for(let c of o.updates)a=a.update(c,t);a.isPending||e.push(a)}else this.startQuery(s)}(e.length||i.open&&i.open.disabled)&&this.view.dispatch({effects:CU.of(e)})}},{eventHandlers:{blur(n){let e=this.view.state.field(yd,!1);if(e&&e.tooltip&&this.view.state.facet(tA).closeOnBlur){let t=e.open&&lte(this.view,e.open.tooltip);(!t||!t.dom.contains(n.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:x4.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:zS.of(!1)}),20),this.composing=0}}}),iMe=typeof navigator=="object"&&/Win/.test(navigator.platform),rMe=cC.highest(Mi.domEventHandlers({keydown(n,e){let t=e.state.field(yd,!1);if(!t||!t.open||t.open.disabled||t.open.selected<0||n.key.length>1||n.ctrlKey&&!(iMe&&n.altKey)||n.metaKey)return!1;let i=t.open.options[t.open.selected],r=t.active.find(s=>s.source==i.source),o=i.completion.commitCharacters||r.result.commitCharacters;return o&&o.indexOf(n.key)>-1&&_U(e,i),!1}})),oMe=Mi.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),M4={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},wb=to.define({map(n,e){let t=e.mapPos(n,-1,Rh.TrackAfter);return t??void 0}}),xU=new class extends $b{};xU.startSide=1;xU.endSide=-1;const Bne=Ic.define({create(){return Vo.empty},update(n,e){if(n=n.map(e.changes),e.selection){let t=e.state.doc.lineAt(e.selection.main.head);n=n.update({filter:i=>i>=t.from&&i<=t.to})}for(let t of e.effects)t.is(wb)&&(n=n.update({add:[xU.range(t.value,t.value+1)]}));return n}});function sMe(){return[lMe,Bne]}const JO="()[]{}<>";function One(n){for(let e=0;e<JO.length;e+=2)if(JO.charCodeAt(e)==n)return JO.charAt(e+1);return YP(n<128?n:n+1)}function Ine(n,e){return n.languageDataAt("closeBrackets",e)[0]||M4}const aMe=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),lMe=Mi.inputHandler.of((n,e,t,i)=>{if((aMe?n.composing:n.compositionStarted)||n.state.readOnly)return!1;let r=n.state.selection.main;if(i.length>2||i.length==2&&Fg(gd(i,0))==1||e!=r.from||t!=r.to)return!1;let o=AMe(n.state,i);return o?(n.dispatch(o),!0):!1}),uMe=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let i=Ine(n,n.selection.main.head).brackets||M4.brackets,r=null,o=n.changeByRange(s=>{if(s.empty){let a=hMe(n.doc,s.head);for(let c of i)if(c==a&&C6(n.doc,s.head)==One(gd(c,0)))return{changes:{from:s.head-c.length,to:s.head+c.length},range:En.cursor(s.head-c.length)}}return{range:r=s}});return r||e(n.update(o,{scrollIntoView:!0,userEvent:"delete.backward"})),!r},cMe=[{key:"Backspace",run:uMe}];function AMe(n,e){let t=Ine(n,n.selection.main.head),i=t.brackets||M4.brackets;for(let r of i){let o=One(gd(r,0));if(e==r)return o==r?pMe(n,r,i.indexOf(r+r+r)>-1,t):dMe(n,r,o,t.before||M4.before);if(e==o&&kne(n,n.selection.main.from))return fMe(n,r,o)}return null}function kne(n,e){let t=!1;return n.field(Bne).between(0,n.doc.length,i=>{i==e&&(t=!0)}),t}function C6(n,e){let t=n.sliceString(e,e+2);return t.slice(0,Fg(gd(t,0)))}function hMe(n,e){let t=n.sliceString(e-2,e);return Fg(gd(t,0))==t.length?t:t.slice(1)}function dMe(n,e,t,i){let r=null,o=n.changeByRange(s=>{if(!s.empty)return{changes:[{insert:e,from:s.from},{insert:t,from:s.to}],effects:wb.of(s.to+e.length),range:En.range(s.anchor+e.length,s.head+e.length)};let a=C6(n.doc,s.head);return!a||/\s/.test(a)||i.indexOf(a)>-1?{changes:{insert:e+t,from:s.head},effects:wb.of(s.head+e.length),range:En.cursor(s.head+e.length)}:{range:r=s}});return r?null:n.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function fMe(n,e,t){let i=null,r=n.changeByRange(o=>o.empty&&C6(n.doc,o.head)==t?{changes:{from:o.head,to:o.head+t.length,insert:t},range:En.cursor(o.head+t.length)}:i={range:o});return i?null:n.update(r,{scrollIntoView:!0,userEvent:"input.type"})}function pMe(n,e,t,i){let r=i.stringPrefixes||M4.stringPrefixes,o=null,s=n.changeByRange(a=>{if(!a.empty)return{changes:[{insert:e,from:a.from},{insert:e,from:a.to}],effects:wb.of(a.to+e.length),range:En.range(a.anchor+e.length,a.head+e.length)};let c=a.head,h=C6(n.doc,c),m;if(h==e){if(qN(n,c))return{changes:{insert:e+e,from:c},effects:wb.of(c+e.length),range:En.cursor(c+e.length)};if(kne(n,c)){let x=t&&n.sliceDoc(c,c+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:c,to:c+x.length,insert:x},range:En.cursor(c+x.length)}}}else{if(t&&n.sliceDoc(c-2*e.length,c)==e+e&&(m=VN(n,c-2*e.length,r))>-1&&qN(n,m))return{changes:{insert:e+e+e+e,from:c},effects:wb.of(c+e.length),range:En.cursor(c+e.length)};if(n.charCategorizer(c)(h)!=Ml.Word&&VN(n,c,r)>-1&&!mMe(n,c,e,r))return{changes:{insert:e+e,from:c},effects:wb.of(c+e.length),range:En.cursor(c+e.length)}}return{range:o=a}});return o?null:n.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function qN(n,e){let t=ih(n).resolveInner(e+1);return t.parent&&t.from==e}function mMe(n,e,t,i){let r=ih(n).resolveInner(e,-1),o=i.reduce((s,a)=>Math.max(s,a.length),0);for(let s=0;s<5;s++){let a=n.sliceDoc(r.from,Math.min(r.to,r.from+t.length+o)),c=a.indexOf(t);if(!c||c>-1&&i.indexOf(a.slice(0,c))>-1){let m=r.firstChild;for(;m&&m.from==r.from&&m.to-m.from>t.length+c;){if(n.sliceDoc(m.to-t.length,m.to)==t)return!1;m=m.firstChild}return!0}let h=r.to==e&&r.parent;if(!h)break;r=h}return!1}function VN(n,e,t){let i=n.charCategorizer(e);if(i(n.sliceDoc(e-1,e))!=Ml.Word)return e;for(let r of t){let o=e-r.length;if(n.sliceDoc(o,e)==r&&i(n.sliceDoc(o-1,o))!=Ml.Word)return o}return-1}function gMe(n={}){return[rMe,yd,tA.of(n),nMe,yMe,oMe]}const Tne=[{key:"Ctrl-Space",run:XO},{mac:"Alt-`",run:XO},{mac:"Alt-i",run:XO},{key:"Escape",run:X4e},{key:"ArrowDown",run:D5(!0)},{key:"ArrowUp",run:D5(!1)},{key:"PageDown",run:D5(!0,"page")},{key:"PageUp",run:D5(!1,"page")},{key:"Enter",run:Z4e}],yMe=cC.highest(oU.computeN([tA],n=>n.facet(tA).defaultKeymap?[Tne]:[]));class $N{constructor(e,t,i){this.from=e,this.to=t,this.diagnostic=i}}class mb{constructor(e,t,i){this.diagnostics=e,this.panel=t,this.selected=i}static init(e,t,i){let r=i.facet($g).markerFilter;r&&(e=r(e,i));let o=e.slice().sort((E,D)=>E.from-D.from||E.to-D.to),s=new y1,a=[],c=0,h=i.doc.iter(),m=0,v=i.doc.length;for(let E=0;;){let D=E==o.length?null:o[E];if(!D&&!a.length)break;let P,F;if(a.length)P=c,F=a.reduce((V,H)=>Math.min(V,H.to),D&&D.from>P?D.from:1e8);else{if(P=D.from,P>v)break;F=D.to,a.push(D),E++}for(;E<o.length;){let V=o[E];if(V.from==P&&(V.to>V.from||V.to==P))a.push(V),E++,F=Math.min(V.to,F);else{F=Math.min(V.from,F);break}}F=Math.min(F,v);let W=!1;if(a.some(V=>V.from==P&&(V.to==F||F==v))&&(W=P==F,!W&&F-P<10)){let V=P-(m+h.value.length);V>0&&(h.next(V),m=P);for(let H=P;;){if(H>=F){W=!0;break}if(!h.lineBreak&&m+h.value.length>H)break;H=m+h.value.length,m+=h.value.length,h.next()}}let q=Fne(a);if(W)s.add(P,P,wr.widget({widget:new BMe(q),diagnostics:a.slice()}));else{let V=a.reduce((H,X)=>X.markClass?H+" "+X.markClass:H,"");s.add(P,F,wr.mark({class:"cm-lintRange cm-lintRange-"+q+V,diagnostics:a.slice(),inclusiveEnd:a.some(H=>H.to>F)}))}if(c=F,c==v)break;for(let V=0;V<a.length;V++)a[V].to<=c&&a.splice(V--,1)}let x=s.finish();return new mb(x,t,Bx(x))}}function Bx(n,e=null,t=0){let i=null;return n.between(t,1e9,(r,o,{spec:s})=>{if(!(e&&s.diagnostics.indexOf(e)<0))if(!i)i=new $N(r,o,e||s.diagnostics[0]);else{if(s.diagnostics.indexOf(i.diagnostic)<0)return!1;i=new $N(i.from,o,i.diagnostic)}}),i}function Rne(n,e){let t=e.pos,i=e.end||t,r=n.state.facet($g).hideOn(n,t,i);if(r!=null)return r;let o=n.startState.doc.lineAt(e.pos);return!!(n.effects.some(s=>s.is(_6))||n.changes.touchesRange(o.from,Math.max(o.to,i)))}function Dne(n,e){return n.field(pf,!1)?e:e.concat(to.appendConfig.of(Nne))}function vMe(n,e){return{effects:Dne(n,[_6.of(e)])}}const _6=to.define(),MU=to.define(),Pne=to.define(),pf=Ic.define({create(){return new mb(wr.none,null,null)},update(n,e){if(e.docChanged&&n.diagnostics.size){let t=n.diagnostics.map(e.changes),i=null,r=n.panel;if(n.selected){let o=e.changes.mapPos(n.selected.from,1);i=Bx(t,n.selected.diagnostic,o)||Bx(t,null,o)}!t.size&&r&&e.state.facet($g).autoPanel&&(r=null),n=new mb(t,r,i)}for(let t of e.effects)if(t.is(_6)){let i=e.state.facet($g).autoPanel?t.value.length?w4.open:null:n.panel;n=mb.init(t.value,i,e.state)}else t.is(MU)?n=new mb(n.diagnostics,t.value?w4.open:null,n.selected):t.is(Pne)&&(n=new mb(n.diagnostics,n.panel,t.value));return n},provide:n=>[y4.from(n,e=>e.panel),Mi.decorations.from(n,e=>e.diagnostics)]}),bMe=wr.mark({class:"cm-lintRange cm-lintRange-active"});function CMe(n,e,t){let{diagnostics:i}=n.state.field(pf),r,o=-1,s=-1;i.between(e-(t<0?1:0),e+(t>0?1:0),(c,h,{spec:m})=>{if(e>=c&&e<=h&&(c==h||(e>c||t>0)&&(e<h||t<0)))return r=m.diagnostics,o=c,s=h,!1});let a=n.state.facet($g).tooltipFilter;return r&&a&&(r=a(r,n.state)),r?{pos:o,end:s,above:n.state.doc.lineAt(o).to<s,create(){return{dom:Une(n,r)}}}:null}function Une(n,e){return Sa("ul",{class:"cm-tooltip-lint"},e.map(t=>Lne(n,t,!1)))}const _Me=n=>{let e=n.state.field(pf,!1);(!e||!e.panel)&&n.dispatch({effects:Dne(n.state,[MU.of(!0)])});let t=g4(n,w4.open);return t&&t.dom.querySelector(".cm-panel-lint ul").focus(),!0},HN=n=>{let e=n.state.field(pf,!1);return!e||!e.panel?!1:(n.dispatch({effects:MU.of(!1)}),!0)},xMe=n=>{let e=n.state.field(pf,!1);if(!e)return!1;let t=n.state.selection.main,i=e.diagnostics.iter(t.to+1);return!i.value&&(i=e.diagnostics.iter(0),!i.value||i.from==t.from&&i.to==t.to)?!1:(n.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),!0)},MMe=[{key:"Mod-Shift-m",run:_Me,preventDefault:!0},{key:"F8",run:xMe}],wMe=Bu.fromClass(class{constructor(n){this.view=n,this.timeout=-1,this.set=!0;let{delay:e}=n.state.facet($g);this.lintTime=Date.now()+e,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,e)}run(){clearTimeout(this.timeout);let n=Date.now();if(n<this.lintTime-10)this.timeout=setTimeout(this.run,this.lintTime-n);else{this.set=!1;let{state:e}=this.view,{sources:t}=e.facet($g);t.length&&SMe(t.map(i=>Promise.resolve(i(this.view))),i=>{this.view.state.doc==e.doc&&this.view.dispatch(vMe(this.view.state,i.reduce((r,o)=>r.concat(o))))},i=>{Ph(this.view.state,i)})}}update(n){let e=n.state.facet($g);(n.docChanged||e!=n.startState.facet($g)||e.needsRefresh&&e.needsRefresh(n))&&(this.lintTime=Date.now()+e.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,e.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}});function SMe(n,e,t){let i=[],r=-1;for(let o of n)o.then(s=>{i.push(s),clearTimeout(r),i.length==n.length?e(i):r=setTimeout(()=>e(i),200)},t)}const $g=Si.define({combine(n){return{sources:n.map(e=>e.source).filter(e=>e!=null),...Om(n.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{delay:Math.max,markerFilter:ZN,tooltipFilter:ZN,needsRefresh:(e,t)=>e?t?i=>e(i)||t(i):e:t,hideOn:(e,t)=>e?t?(i,r,o)=>e(i,r,o)||t(i,r,o):e:t,autoPanel:(e,t)=>e||t})}}});function ZN(n,e){return n?e?(t,i)=>e(n(t,i),i):n:e}function EMe(n,e={}){return[$g.of({source:n,config:e}),wMe,Nne]}function Kne(n){let e=[];if(n)e:for(let{name:t}of n){for(let i=0;i<t.length;i++){let r=t[i];if(/[a-zA-Z]/.test(r)&&!e.some(o=>o.toLowerCase()==r.toLowerCase())){e.push(r);continue e}}e.push("")}return e}function Lne(n,e,t){var i;let r=t?Kne(e.actions):[];return Sa("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},Sa("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(n):e.message),(i=e.actions)===null||i===void 0?void 0:i.map((o,s)=>{let a=!1,c=E=>{if(E.preventDefault(),a)return;a=!0;let D=Bx(n.state.field(pf).diagnostics,e);D&&o.apply(n,D.from,D.to)},{name:h}=o,m=r[s]?h.indexOf(r[s]):-1,v=m<0?h:[h.slice(0,m),Sa("u",h.slice(m,m+1)),h.slice(m+1)],x=o.markClass?" "+o.markClass:"";return Sa("button",{type:"button",class:"cm-diagnosticAction"+x,onclick:c,onmousedown:c,"aria-label":` Action: ${h}${m<0?"":` (access key "${r[s]})"`}.`},v)}),e.source&&Sa("div",{class:"cm-diagnosticSource"},e.source))}class BMe extends Av{constructor(e){super(),this.sev=e}eq(e){return e.sev==this.sev}toDOM(){return Sa("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class XN{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=Lne(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class w4{constructor(e){this.view=e,this.items=[];let t=r=>{if(r.keyCode==27)HN(this.view),this.view.focus();else if(r.keyCode==38||r.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(r.keyCode==40||r.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(r.keyCode==36)this.moveSelection(0);else if(r.keyCode==35)this.moveSelection(this.items.length-1);else if(r.keyCode==13)this.view.focus();else if(r.keyCode>=65&&r.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:o}=this.items[this.selectedIndex],s=Kne(o.actions);for(let a=0;a<s.length;a++)if(s[a].toUpperCase().charCodeAt(0)==r.keyCode){let c=Bx(this.view.state.field(pf).diagnostics,o);c&&o.actions[a].apply(e,c.from,c.to)}}else return;r.preventDefault()},i=r=>{for(let o=0;o<this.items.length;o++)this.items[o].dom.contains(r.target)&&this.moveSelection(o)};this.list=Sa("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t,onclick:i}),this.dom=Sa("div",{class:"cm-panel-lint"},this.list,Sa("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>HN(this.view)},"")),this.update()}get selectedIndex(){let e=this.view.state.field(pf).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(pf),i=0,r=!1,o=null,s=new Set;for(e.between(0,this.view.state.doc.length,(a,c,{spec:h})=>{for(let m of h.diagnostics){if(s.has(m))continue;s.add(m);let v=-1,x;for(let E=i;E<this.items.length;E++)if(this.items[E].diagnostic==m){v=E;break}v<0?(x=new XN(this.view,m),this.items.splice(i,0,x),r=!0):(x=this.items[v],v>i&&(this.items.splice(i,v-i),r=!0)),t&&x.diagnostic==t.diagnostic?x.dom.hasAttribute("aria-selected")||(x.dom.setAttribute("aria-selected","true"),o=x):x.dom.hasAttribute("aria-selected")&&x.dom.removeAttribute("aria-selected"),i++}});i<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)r=!0,this.items.pop();this.items.length==0&&(this.items.push(new XN(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),r=!0),o?(this.list.setAttribute("aria-activedescendant",o.id),this.view.requestMeasure({key:this,read:()=>({sel:o.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:a,panel:c})=>{let h=c.height/this.list.offsetHeight;a.top<c.top?this.list.scrollTop-=(c.top-a.top)/h:a.bottom>c.bottom&&(this.list.scrollTop+=(a.bottom-c.bottom)/h)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),r&&this.sync()}sync(){let e=this.list.firstChild;function t(){let i=e;e=i.nextSibling,i.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;e!=i.dom;)t();e=i.dom.nextSibling}else this.list.insertBefore(i.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=this.view.state.field(pf),i=Bx(t.diagnostics,this.items[e].diagnostic);i&&this.view.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:Pne.of(i)})}static open(e){return new w4(e)}}function _w(n,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(n)}</svg>')`}function P5(n){return _w(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${n}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const OMe=Mi.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:P5("#d11")},".cm-lintRange-warning":{backgroundImage:P5("orange")},".cm-lintRange-info":{backgroundImage:P5("#999")},".cm-lintRange-hint":{backgroundImage:P5("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function IMe(n){return n=="error"?4:n=="warning"?3:n=="info"?2:1}function Fne(n){let e="hint",t=1;for(let i of n){let r=IMe(i.severity);r>t&&(t=r,e=i.severity)}return e}class zne extends l0{constructor(e){super(),this.diagnostics=e,this.severity=Fne(e)}toDOM(e){let t=document.createElement("div");t.className="cm-lint-marker cm-lint-marker-"+this.severity;let i=this.diagnostics,r=e.state.facet(x6).tooltipFilter;return r&&(i=r(i,e.state)),i.length&&(t.onmouseover=()=>TMe(e,t,i)),t}}function kMe(n,e){let t=i=>{let r=e.getBoundingClientRect();if(!(i.clientX>r.left-10&&i.clientX<r.right+10&&i.clientY>r.top-10&&i.clientY<r.bottom+10)){for(let o=i.target;o;o=o.parentNode)if(o.nodeType==1&&o.classList.contains("cm-tooltip-lint"))return;window.removeEventListener("mousemove",t),n.state.field(jne)&&n.dispatch({effects:wU.of(null)})}};window.addEventListener("mousemove",t)}function TMe(n,e,t){function i(){let s=n.elementAtHeight(e.getBoundingClientRect().top+5-n.documentTop);n.coordsAtPos(s.from)&&n.dispatch({effects:wU.of({pos:s.from,above:!1,clip:!1,create(){return{dom:Une(n,t),getCoords:()=>e.getBoundingClientRect()}}})}),e.onmouseout=e.onmousemove=null,kMe(n,e)}let{hoverTime:r}=n.state.facet(x6),o=setTimeout(i,r);e.onmouseout=()=>{clearTimeout(o),e.onmouseout=e.onmousemove=null},e.onmousemove=()=>{clearTimeout(o),o=setTimeout(i,r)}}function RMe(n,e){let t=Object.create(null);for(let r of e){let o=n.lineAt(r.from);(t[o.from]||(t[o.from]=[])).push(r)}let i=[];for(let r in t)i.push(new zne(t[r]).range(+r));return Vo.of(i,!0)}const DMe=cte({class:"cm-gutter-lint",markers:n=>n.state.field(CR),widgetMarker:(n,e,t)=>{let i=[];return n.state.field(CR).between(t.from,t.to,(r,o,s)=>{r>t.from&&r<t.to&&i.push(...s.diagnostics)}),i.length?new zne(i):null}}),CR=Ic.define({create(){return Vo.empty},update(n,e){n=n.map(e.changes);let t=e.state.facet(x6).markerFilter;for(let i of e.effects)if(i.is(_6)){let r=i.value;t&&(r=t(r||[],e.state)),n=RMe(e.state.doc,r.slice(0))}return n}}),wU=to.define(),jne=Ic.define({create(){return null},update(n,e){return n&&e.docChanged&&(n=Rne(e,n)?null:{...n,pos:e.changes.mapPos(n.pos)}),e.effects.reduce((t,i)=>i.is(wU)?i.value:t,n)},provide:n=>d6.from(n)}),PMe=Mi.baseTheme({".cm-gutter-lint":{width:"1.4em","& .cm-gutterElement":{padding:".2em"}},".cm-lint-marker":{width:"1em",height:"1em"},".cm-lint-marker-info":{content:_w('<path fill="#aaf" stroke="#77e" stroke-width="6" stroke-linejoin="round" d="M5 5L35 5L35 35L5 35Z"/>')},".cm-lint-marker-warning":{content:_w('<path fill="#fe8" stroke="#fd7" stroke-width="6" stroke-linejoin="round" d="M20 6L37 35L3 35Z"/>')},".cm-lint-marker-error":{content:_w('<circle cx="20" cy="20" r="15" fill="#f87" stroke="#f43" stroke-width="6"/>')}}),Nne=[pf,Mi.decorations.compute([pf],n=>{let{selected:e,panel:t}=n.field(pf);return!e||!t||e.from==e.to?wr.none:wr.set([bMe.range(e.from,e.to)])}),Mxe(CMe,{hideOn:Rne}),OMe],x6=Si.define({combine(n){return Om(n,{hoverTime:300,markerFilter:null,tooltipFilter:null})}});function UMe(n={}){return[x6.of(n),CR,DMe,PMe,jne]}const KMe=[Dxe(),Kxe(),txe(),e3e(),E2e(),W_e(),$_e(),fs.allowMultipleSelections.of(!0),d2e(),Rte(k2e,{fallback:!0}),L2e(),sMe(),gMe(),dxe(),mxe(),axe(),c4e(),oU.of([...cMe,...r4e,...O4e,...u3e,...x2e,...Tne,...MMe])];var JN={};class NS{constructor(e,t,i,r,o,s,a,c,h,m=0,v){this.p=e,this.stack=t,this.state=i,this.reducePos=r,this.pos=o,this.score=s,this.buffer=a,this.bufferBase=c,this.curContext=h,this.lookAhead=m,this.parent=v}toString(){return`[${this.stack.filter((e,t)=>t%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,i=0){let r=e.parser.context;return new NS(e,[],t,i,i,0,[],0,r?new eG(r,r.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var t;let i=e>>19,r=e&65535,{parser:o}=this.p,s=this.reducePos<this.pos-25;s&&this.setLookAhead(this.pos);let a=o.dynamicPrecedence(r);if(a&&(this.score+=a),i==0){this.pushState(o.getGoto(this.state,r,!0),this.reducePos),r<o.minRepeatTerm&&this.storeNode(r,this.reducePos,this.reducePos,s?8:4,!0),this.reduceContext(r,this.reducePos);return}let c=this.stack.length-(i-1)*3-(e&262144?6:0),h=c?this.stack[c-2]:this.p.ranges[0].from,m=this.reducePos-h;m>=2e3&&!(!((t=this.p.parser.nodeSet.types[r])===null||t===void 0)&&t.isAnonymous)&&(h==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=m):this.p.lastBigReductionSize<m&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=h,this.p.lastBigReductionSize=m));let v=c?this.stack[c-1]:0,x=this.bufferBase+this.buffer.length-v;if(r<o.minRepeatTerm||e&131072){let E=o.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(r,h,E,x+4,!0)}if(e&262144)this.state=this.stack[c];else{let E=this.stack[c-3];this.state=o.getGoto(E,r,!0)}for(;this.stack.length>c;)this.stack.pop();this.reduceContext(r,h)}storeNode(e,t,i,r=4,o=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let s=this,a=this.buffer.length;if(a==0&&s.parent&&(a=s.bufferBase-s.parent.bufferBase,s=s.parent),a>0&&s.buffer[a-4]==0&&s.buffer[a-1]>-1){if(t==i)return;if(s.buffer[a-2]>=t){s.buffer[a-2]=i;return}}}if(!o||this.pos==i)this.buffer.push(e,t,i,r);else{let s=this.buffer.length;if(s>0&&this.buffer[s-4]!=0){let a=!1;for(let c=s;c>0&&this.buffer[c-2]>i;c-=4)if(this.buffer[c-1]>=0){a=!0;break}if(a)for(;s>0&&this.buffer[s-2]>i;)this.buffer[s]=this.buffer[s-4],this.buffer[s+1]=this.buffer[s-3],this.buffer[s+2]=this.buffer[s-2],this.buffer[s+3]=this.buffer[s-1],s-=4,r>4&&(r-=4)}this.buffer[s]=e,this.buffer[s+1]=t,this.buffer[s+2]=i,this.buffer[s+3]=r}}shift(e,t,i,r){if(e&131072)this.pushState(e&65535,this.pos);else if((e&262144)==0){let o=e,{parser:s}=this.p;(r>this.pos||t<=s.maxNode)&&(this.pos=r,s.stateFlag(o,1)||(this.reducePos=r)),this.pushState(o,i),this.shiftContext(t,i),t<=s.maxNode&&this.buffer.push(t,i,r,4)}else this.pos=r,this.shiftContext(t,i),t<=this.p.parser.maxNode&&this.buffer.push(t,i,r,4)}apply(e,t,i,r){e&65536?this.reduce(e):this.shift(e,t,i,r)}useNode(e,t){let i=this.p.reused.length-1;(i<0||this.p.reused[i]!=e)&&(this.p.reused.push(e),i++);let r=this.pos;this.reducePos=this.pos=r+e.length,this.pushState(t,r),this.buffer.push(i,r,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let i=e.buffer.slice(t),r=e.bufferBase+t;for(;e&&r==e.bufferBase;)e=e.parent;return new NS(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,i,r,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let i=e<=this.p.parser.maxNode;i&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,i?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new LMe(this);;){let i=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(i==0)return!1;if((i&65536)==0)return!0;t.reduce(i)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>8||this.stack.length>=120){let r=[];for(let o=0,s;o<t.length;o+=2)(s=t[o+1])!=this.state&&this.p.parser.hasAction(s,e)&&r.push(t[o],s);if(this.stack.length<120)for(let o=0;r.length<8&&o<t.length;o+=2){let s=t[o+1];r.some((a,c)=>c&1&&a==s)||r.push(t[o],s)}t=r}let i=[];for(let r=0;r<t.length&&i.length<4;r+=2){let o=t[r+1];if(o==this.state)continue;let s=this.split();s.pushState(o,this.pos),s.storeNode(0,s.pos,s.pos,4,!0),s.shiftContext(t[r],this.pos),s.reducePos=this.pos,s.score-=200,i.push(s)}return i}forceReduce(){let{parser:e}=this.p,t=e.stateSlot(this.state,5);if((t&65536)==0)return!1;if(!e.validAction(this.state,t)){let i=t>>19,r=t&65535,o=this.stack.length-i*3;if(o<0||e.getGoto(this.stack[o],r,!1)<0){let s=this.findForcedReduction();if(s==null)return!1;t=s}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(t),!0}findForcedReduction(){let{parser:e}=this.p,t=[],i=(r,o)=>{if(!t.includes(r))return t.push(r),e.allActions(r,s=>{if(!(s&393216))if(s&65536){let a=(s>>19)-o;if(a>1){let c=s&65535,h=this.stack.length-a*3;if(h>=0&&e.getGoto(this.stack[h],c,!1)>=0)return a<<19|65536|c}}else{let a=i(s,o+1);if(a!=null)return a}})};return i(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new eG(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class eG{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}class LMe{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=e&65535,i=e>>19;i==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(i-1)*3;let r=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=r}}class GS{constructor(e,t,i){this.stack=e,this.pos=t,this.index=i,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new GS(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new GS(this.stack,this.pos,this.index)}}function U5(n,e=Uint16Array){if(typeof n!="string")return n;let t=null;for(let i=0,r=0;i<n.length;){let o=0;for(;;){let s=n.charCodeAt(i++),a=!1;if(s==126){o=65535;break}s>=92&&s--,s>=34&&s--;let c=s-32;if(c>=46&&(c-=46,a=!0),o+=c,a)break;o*=46}t?t[r++]=o:t=new e(o)}return t}class xw{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const tG=new xw;class FMe{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=tG,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let i=this.range,r=this.rangeIndex,o=this.pos+e;for(;o<i.from;){if(!r)return null;let s=this.ranges[--r];o-=i.from-s.to,i=s}for(;t<0?o>i.to:o>=i.to;){if(r==this.ranges.length-1)return null;let s=this.ranges[++r];o+=s.from-i.to,i=s}return o}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let t of this.ranges)if(t.to>e)return Math.max(e,t.from);return this.end}peek(e){let t=this.chunkOff+e,i,r;if(t>=0&&t<this.chunk.length)i=this.pos+e,r=this.chunk.charCodeAt(t);else{let o=this.resolveOffset(e,1);if(o==null)return-1;if(i=o,i>=this.chunk2Pos&&i<this.chunk2Pos+this.chunk2.length)r=this.chunk2.charCodeAt(i-this.chunk2Pos);else{let s=this.rangeIndex,a=this.range;for(;a.to<=i;)a=this.ranges[++s];this.chunk2=this.input.chunk(this.chunk2Pos=i),i+this.chunk2.length>a.to&&(this.chunk2=this.chunk2.slice(0,a.to-i)),r=this.chunk2.charCodeAt(0)}}return i>=this.token.lookAhead&&(this.token.lookAhead=i+1),r}acceptToken(e,t=0){let i=t?this.resolveOffset(t,-1):this.pos;if(i==null||i<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=i}acceptTokenTo(e,t){this.token.value=e,this.token.end=t}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=tG,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let i="";for(let r of this.ranges){if(r.from>=t)break;r.to>e&&(i+=this.input.read(Math.max(r.from,e),Math.min(r.to,t)))}return i}}class ex{constructor(e,t){this.data=e,this.id=t}token(e,t){let{parser:i}=t.p;zMe(this.data,e,t,this.id,i.data,i.tokenPrecTable)}}ex.prototype.contextual=ex.prototype.fallback=ex.prototype.extend=!1;ex.prototype.fallback=ex.prototype.extend=!1;function zMe(n,e,t,i,r,o){let s=0,a=1<<i,{dialect:c}=t.p.parser;e:for(;(a&n[s])!=0;){let h=n[s+1];for(let E=s+3;E<h;E+=2)if((n[E+1]&a)>0){let D=n[E];if(c.allows(D)&&(e.token.value==-1||e.token.value==D||jMe(D,e.token.value,r,o))){e.acceptToken(D);break}}let m=e.next,v=0,x=n[s+2];if(e.next<0&&x>v&&n[h+x*3-3]==65535){s=n[h+x*3-1];continue e}for(;v<x;){let E=v+x>>1,D=h+E+(E<<1),P=n[D],F=n[D+1]||65536;if(m<P)x=E;else if(m>=F)v=E+1;else{s=n[D+2],e.advance();continue e}}break}}function nG(n,e,t){for(let i=e,r;(r=n[i])!=65535;i++)if(r==t)return i-e;return-1}function jMe(n,e,t,i){let r=nG(t,i,e);return r<0||nG(t,i,n)<r}const nf=typeof process<"u"&&JN&&/\bparse\b/.test(JN.LOG);let e8=null;function iG(n,e,t){let i=n.cursor(Jc.IncludeAnonymous);for(i.moveTo(e);;)if(!(t<0?i.childBefore(e):i.childAfter(e)))for(;;){if((t<0?i.to<e:i.from>e)&&!i.type.isError)return t<0?Math.max(0,Math.min(i.to-1,e-25)):Math.min(n.length,Math.max(i.from+1,e+25));if(t<0?i.prevSibling():i.nextSibling())break;if(!i.parent())return t<0?0:n.length}}class NMe{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?iG(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?iG(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let i=this.trees[t],r=this.index[t];if(r==i.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let o=i.children[r],s=this.start[t]+i.positions[r];if(s>e)return this.nextStart=s,null;if(o instanceof ec){if(s==e){if(s<this.safeFrom)return null;let a=s+o.length;if(a<=this.safeTo){let c=o.prop(_o.lookAhead);if(!c||a+c<this.fragment.to)return o}}this.index[t]++,s+o.length>=Math.max(this.safeFrom,e)&&(this.trees.push(o),this.start.push(s),this.index.push(0))}else this.index[t]++,this.nextStart=s+o.length}}}class GMe{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(i=>new xw)}getActions(e){let t=0,i=null,{parser:r}=e.p,{tokenizers:o}=r,s=r.stateSlot(e.state,3),a=e.curContext?e.curContext.hash:0,c=0;for(let h=0;h<o.length;h++){if((1<<h&s)==0)continue;let m=o[h],v=this.tokens[h];if(!(i&&!m.fallback)&&((m.contextual||v.start!=e.pos||v.mask!=s||v.context!=a)&&(this.updateCachedToken(v,m,e),v.mask=s,v.context=a),v.lookAhead>v.end+25&&(c=Math.max(v.lookAhead,c)),v.value!=0)){let x=t;if(v.extended>-1&&(t=this.addActions(e,v.extended,v.end,t)),t=this.addActions(e,v.value,v.end,t),!m.extend&&(i=v,t>x))break}}for(;this.actions.length>t;)this.actions.pop();return c&&e.setLookAhead(c),!i&&e.pos==this.stream.end&&(i=new xw,i.value=e.p.parser.eofTerm,i.start=i.end=e.pos,t=this.addActions(e,i.value,i.end,t)),this.mainToken=i,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new xw,{pos:i,p:r}=e;return t.start=i,t.end=Math.min(i+1,r.stream.end),t.value=i==r.stream.end?r.parser.eofTerm:0,t}updateCachedToken(e,t,i){let r=this.stream.clipPos(i.pos);if(t.token(this.stream.reset(r,e),i),e.value>-1){let{parser:o}=i.p;for(let s=0;s<o.specialized.length;s++)if(o.specialized[s]==e.value){let a=o.specializers[s](this.stream.read(e.start,e.end),i);if(a>=0&&i.p.parser.dialect.allows(a>>1)){(a&1)==0?e.value=a>>1:e.extended=a>>1;break}}}else e.value=0,e.end=this.stream.clipPos(r+1)}putAction(e,t,i,r){for(let o=0;o<r;o+=3)if(this.actions[o]==e)return r;return this.actions[r++]=e,this.actions[r++]=t,this.actions[r++]=i,r}addActions(e,t,i,r){let{state:o}=e,{parser:s}=e.p,{data:a}=s;for(let c=0;c<2;c++)for(let h=s.stateSlot(o,c?2:1);;h+=3){if(a[h]==65535)if(a[h+1]==1)h=i1(a,h+2);else{r==0&&a[h+1]==2&&(r=this.putAction(i1(a,h+2),t,i,r));break}a[h]==t&&(r=this.putAction(i1(a,h+1),t,i,r))}return r}}class WMe{constructor(e,t,i,r){this.parser=e,this.input=t,this.ranges=r,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new FMe(t,r),this.tokens=new GMe(e,this.stream),this.topTerm=e.top[1];let{from:o}=r[0];this.stacks=[NS.start(this,e.top[0],o)],this.fragments=i.length&&this.stream.end-o>e.bufferLength*4?new NMe(i,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,t=this.minStackPos,i=this.stacks=[],r,o;if(this.bigReductionCount>300&&e.length==1){let[s]=e;for(;s.forceReduce()&&s.stack.length&&s.stack[s.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let s=0;s<e.length;s++){let a=e[s];for(;;){if(this.tokens.mainToken=null,a.pos>t)i.push(a);else{if(this.advanceStack(a,i,e))continue;{r||(r=[],o=[]),r.push(a);let c=this.tokens.getMainToken(a);o.push(c.value,c.end)}}break}}if(!i.length){let s=r&&YMe(r);if(s)return nf&&console.log("Finish with "+this.stackID(s)),this.stackToTree(s);if(this.parser.strict)throw nf&&r&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+t);this.recovering||(this.recovering=5)}if(this.recovering&&r){let s=this.stoppedAt!=null&&r[0].pos>this.stoppedAt?r[0]:this.runRecovery(r,o,i);if(s)return nf&&console.log("Force-finish "+this.stackID(s)),this.stackToTree(s.forceAll())}if(this.recovering){let s=this.recovering==1?1:this.recovering*3;if(i.length>s)for(i.sort((a,c)=>c.score-a.score);i.length>s;)i.pop();i.some(a=>a.reducePos>t)&&this.recovering--}else if(i.length>1){e:for(let s=0;s<i.length-1;s++){let a=i[s];for(let c=s+1;c<i.length;c++){let h=i[c];if(a.sameState(h)||a.buffer.length>500&&h.buffer.length>500)if((a.score-h.score||a.buffer.length-h.buffer.length)>0)i.splice(c--,1);else{i.splice(s--,1);continue e}}}i.length>12&&i.splice(12,i.length-12)}this.minStackPos=i[0].pos;for(let s=1;s<i.length;s++)i[s].pos<this.minStackPos&&(this.minStackPos=i[s].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,i){let r=e.pos,{parser:o}=this,s=nf?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&r>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let h=e.curContext&&e.curContext.tracker.strict,m=h?e.curContext.hash:0;for(let v=this.fragments.nodeAt(r);v;){let x=this.parser.nodeSet.types[v.type.id]==v.type?o.getGoto(e.state,v.type.id):-1;if(x>-1&&v.length&&(!h||(v.prop(_o.contextHash)||0)==m))return e.useNode(v,x),nf&&console.log(s+this.stackID(e)+` (via reuse of ${o.getName(v.type.id)})`),!0;if(!(v instanceof ec)||v.children.length==0||v.positions[0]>0)break;let E=v.children[0];if(E instanceof ec&&v.positions[0]==0)v=E;else break}}let a=o.stateSlot(e.state,4);if(a>0)return e.reduce(a),nf&&console.log(s+this.stackID(e)+` (via always-reduce ${o.getName(a&65535)})`),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let c=this.tokens.getActions(e);for(let h=0;h<c.length;){let m=c[h++],v=c[h++],x=c[h++],E=h==c.length||!i,D=E?e:e.split(),P=this.tokens.mainToken;if(D.apply(m,v,P?P.start:D.pos,x),nf&&console.log(s+this.stackID(D)+` (via ${(m&65536)==0?"shift":`reduce of ${o.getName(m&65535)}`} for ${o.getName(v)} @ ${r}${D==e?"":", split"})`),E)return!0;D.pos>r?t.push(D):i.push(D)}return!1}advanceFully(e,t){let i=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>i)return rG(e,t),!0}}runRecovery(e,t,i){let r=null,o=!1;for(let s=0;s<e.length;s++){let a=e[s],c=t[s<<1],h=t[(s<<1)+1],m=nf?this.stackID(a)+" -> ":"";if(a.deadEnd&&(o||(o=!0,a.restart(),nf&&console.log(m+this.stackID(a)+" (restarted)"),this.advanceFully(a,i))))continue;let v=a.split(),x=m;for(let E=0;v.forceReduce()&&E<10&&(nf&&console.log(x+this.stackID(v)+" (via force-reduce)"),!this.advanceFully(v,i));E++)nf&&(x=this.stackID(v)+" -> ");for(let E of a.recoverByInsert(c))nf&&console.log(m+this.stackID(E)+" (via recover-insert)"),this.advanceFully(E,i);this.stream.end>a.pos?(h==a.pos&&(h++,c=0),a.recoverByDelete(c,h),nf&&console.log(m+this.stackID(a)+` (via recover-delete ${this.parser.getName(c)})`),rG(a,i)):(!r||r.score<a.score)&&(r=a)}return r}stackToTree(e){return e.close(),ec.build({buffer:GS.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(e8||(e8=new WeakMap)).get(e);return t||e8.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function rG(n,e){for(let t=0;t<e.length;t++){let i=e[t];if(i.pos==n.pos&&i.sameState(n)){e[t].score<n.score&&(e[t]=n);return}}e.push(n)}class QMe{constructor(e,t,i){this.source=e,this.flags=t,this.disabled=i}allows(e){return!this.disabled||this.disabled[e]==0}}class WS extends gte{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let a=0;a<e.repeatNodeCount;a++)t.push("");let i=Object.keys(e.topRules).map(a=>e.topRules[a][1]),r=[];for(let a=0;a<t.length;a++)r.push([]);function o(a,c,h){r[a].push([c,c.deserialize(String(h))])}if(e.nodeProps)for(let a of e.nodeProps){let c=a[0];typeof c=="string"&&(c=_o[c]);for(let h=1;h<a.length;){let m=a[h++];if(m>=0)o(m,c,a[h++]);else{let v=a[h+-m];for(let x=-m;x>0;x--)o(a[h++],c,v);h++}}}this.nodeSet=new aU(t.map((a,c)=>Md.define({name:c>=this.minRepeatTerm?void 0:a,id:c,props:r[c],top:i.indexOf(c)>-1,error:c==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(c)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=dte;let s=U5(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let a=0;a<this.specializerSpecs.length;a++)this.specialized[a]=this.specializerSpecs[a].term;this.specializers=this.specializerSpecs.map(oG),this.states=U5(e.states,Uint32Array),this.data=U5(e.stateData),this.goto=U5(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(a=>typeof a=="number"?new ex(s,a):a),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,i){let r=new WMe(this,e,t,i);for(let o of this.wrappers)r=o(r,e,t,i);return r}getGoto(e,t,i=!1){let r=this.goto;if(t>=r[0])return-1;for(let o=r[t+1];;){let s=r[o++],a=s&1,c=r[o++];if(a&&i)return c;for(let h=o+(s>>1);o<h;o++)if(r[o]==e)return c;if(a)return-1}}hasAction(e,t){let i=this.data;for(let r=0;r<2;r++)for(let o=this.stateSlot(e,r?2:1),s;;o+=3){if((s=i[o])==65535)if(i[o+1]==1)s=i[o=i1(i,o+2)];else{if(i[o+1]==2)return i1(i,o+2);break}if(s==t||s==0)return i1(i,o+1)}return 0}stateSlot(e,t){return this.states[e*6+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){return!!this.allActions(e,i=>i==t?!0:null)}allActions(e,t){let i=this.stateSlot(e,4),r=i?t(i):void 0;for(let o=this.stateSlot(e,1);r==null;o+=3){if(this.data[o]==65535)if(this.data[o+1]==1)o=i1(this.data,o+2);else break;r=t(i1(this.data,o+1))}return r}nextStates(e){let t=[];for(let i=this.stateSlot(e,1);;i+=3){if(this.data[i]==65535)if(this.data[i+1]==1)i=i1(this.data,i+2);else break;if((this.data[i+2]&1)==0){let r=this.data[i+1];t.some((o,s)=>s&1&&o==r)||t.push(this.data[i],r)}}return t}configure(e){let t=Object.assign(Object.create(WS.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let i=this.topRules[e.top];if(!i)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=i}return e.tokenizers&&(t.tokenizers=this.tokenizers.map(i=>{let r=e.tokenizers.find(o=>o.from==i);return r?r.to:i})),e.specializers&&(t.specializers=this.specializers.slice(),t.specializerSpecs=this.specializerSpecs.map((i,r)=>{let o=e.specializers.find(a=>a.from==i.external);if(!o)return i;let s=Object.assign(Object.assign({},i),{external:o.to});return t.specializers[r]=oG(s),s})),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),e.bufferLength!=null&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return t==null?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),i=t.map(()=>!1);if(e)for(let o of e.split(" ")){let s=t.indexOf(o);s>=0&&(i[s]=!0)}let r=null;for(let o=0;o<t.length;o++)if(!i[o])for(let s=this.dialects[t[o]],a;(a=this.data[s++])!=65535;)(r||(r=new Uint8Array(this.maxTerm+1)))[a]=1;return new QMe(e,i,r)}static deserialize(e){return new WS(e)}}function i1(n,e){return n[e]|n[e+1]<<16}function YMe(n){let e=null;for(let t of n){let i=t.p.stoppedAt;(t.pos==t.p.stream.end||i!=null&&t.pos>i)&&t.p.parser.stateFlag(t.state,2)&&(!e||e.score<t.score)&&(e=t)}return e}function oG(n){if(n.external){let e=n.extend?1:0;return(t,i)=>n.external(t,i)<<1|e}return n.get}const qMe=yte({String:An.string,Number:An.number,"True False":An.bool,PropertyName:An.propertyName,Null:An.null,", :":An.separator,"[ ]":An.squareBracket,"{ }":An.brace}),VMe=WS.deserialize({version:14,states:"$bOVQPOOOOQO'#Cb'#CbOnQPO'#CeOvQPO'#ClOOQO'#Cr'#CrQOQPOOOOQO'#Cg'#CgO}QPO'#CfO!SQPO'#CtOOQO,59P,59PO![QPO,59PO!aQPO'#CuOOQO,59W,59WO!iQPO,59WOVQPO,59QOqQPO'#CmO!nQPO,59`OOQO1G.k1G.kOVQPO'#CnO!vQPO,59aOOQO1G.r1G.rOOQO1G.l1G.lOOQO,59X,59XOOQO-E6k-E6kOOQO,59Y,59YOOQO-E6l-E6l",stateData:"#O~OeOS~OQSORSOSSOTSOWQO_ROgPO~OVXOgUO~O^[O~PVO[^O~O]_OVhX~OVaO~O]bO^iX~O^dO~O]_OVha~O]bO^ia~O",goto:"!kjPPPPPPkPPkqwPPPPk{!RPPP!XP!e!hXSOR^bQWQRf_TVQ_Q`WRg`QcZRicQTOQZRQe^RhbRYQR]R",nodeNames:" JsonText True False Null Number String } { Object Property PropertyName : , ] [ Array",maxTerm:25,nodeProps:[["isolate",-2,6,11,""],["openedBy",7,"{",14,"["],["closedBy",8,"}",15,"]"]],propSources:[qMe],skippedNodes:[0],repeatNodeCount:2,tokenData:"(|~RaXY!WYZ!W]^!Wpq!Wrs!]|}$u}!O$z!Q!R%T!R![&c![!]&t!}#O&y#P#Q'O#Y#Z'T#b#c'r#h#i(Z#o#p(r#q#r(w~!]Oe~~!`Wpq!]qr!]rs!xs#O!]#O#P!}#P;'S!];'S;=`$o<%lO!]~!}Og~~#QXrs!]!P!Q!]#O#P!]#U#V!]#Y#Z!]#b#c!]#f#g!]#h#i!]#i#j#m~#pR!Q![#y!c!i#y#T#Z#y~#|R!Q![$V!c!i$V#T#Z$V~$YR!Q![$c!c!i$c#T#Z$c~$fR!Q![!]!c!i!]#T#Z!]~$rP;=`<%l!]~$zO]~~$}Q!Q!R%T!R![&c~%YRT~!O!P%c!g!h%w#X#Y%w~%fP!Q![%i~%nRT~!Q![%i!g!h%w#X#Y%w~%zR{|&T}!O&T!Q![&Z~&WP!Q![&Z~&`PT~!Q![&Z~&hST~!O!P%c!Q![&c!g!h%w#X#Y%w~&yO[~~'OO_~~'TO^~~'WP#T#U'Z~'^P#`#a'a~'dP#g#h'g~'jP#X#Y'm~'rOR~~'uP#i#j'x~'{P#`#a(O~(RP#`#a(U~(ZOS~~(^P#f#g(a~(dP#i#j(g~(jP#X#Y(m~(rOQ~~(wOW~~(|OV~",tokenizers:[0],topRules:{JsonText:[0,1]},tokenPrec:0}),$Me=()=>n=>{try{JSON.parse(n.state.doc.toString())}catch(e){if(!(e instanceof SyntaxError))throw e;const t=HMe(e,n.state.doc);return[{from:t,message:e.message,severity:"error",to:t}]}return[]};function HMe(n,e){let t;return(t=n.message.match(/at position (\d+)/))?Math.min(+t[1],e.length):(t=n.message.match(/at line (\d+) column (\d+)/))?Math.min(e.line(+t[1]).from+ +t[2]-1,e.length):0}const ZMe=OS.define({name:"json",parser:VMe.configure({props:[_te.add({Object:xN({except:/^\s*\}/}),Array:xN({except:/^\s*\]/})}),Mte.add({"Object Array":p2e})]}),languageData:{closeBrackets:{brackets:["[","{",'"']},indentOnInput:/^\s*[\}\]]$/}});function XMe(){return new i2e(ZMe)}const JMe="#e5c07b",sG="#e06c75",e5e="#56b6c2",t5e="#ffffff",Mw="#abb2bf",_R="#7d8799",n5e="#61afef",i5e="#98c379",aG="#d19a66",r5e="#c678dd",o5e="#21252b",lG="#2c313a",uG="#282c34",t8="#353a42",s5e="#3E4451",cG="#528bff",a5e=Mi.theme({"&":{color:Mw,backgroundColor:uG},".cm-content":{caretColor:cG},".cm-cursor, .cm-dropCursor":{borderLeftColor:cG},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:s5e},".cm-panels":{backgroundColor:o5e,color:Mw},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:uG,color:_R,border:"none"},".cm-activeLineGutter":{backgroundColor:lG},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:t8},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:t8,borderBottomColor:t8},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:lG,color:Mw}}},{dark:!0}),l5e=xM.define([{tag:An.keyword,color:r5e},{tag:[An.name,An.deleted,An.character,An.propertyName,An.macroName],color:sG},{tag:[An.function(An.variableName),An.labelName],color:n5e},{tag:[An.color,An.constant(An.name),An.standard(An.name)],color:aG},{tag:[An.definition(An.name),An.separator],color:Mw},{tag:[An.typeName,An.className,An.number,An.changed,An.annotation,An.modifier,An.self,An.namespace],color:JMe},{tag:[An.operator,An.operatorKeyword,An.url,An.escape,An.regexp,An.link,An.special(An.string)],color:e5e},{tag:[An.meta,An.comment],color:_R},{tag:An.strong,fontWeight:"bold"},{tag:An.emphasis,fontStyle:"italic"},{tag:An.strikethrough,textDecoration:"line-through"},{tag:An.link,color:_R,textDecoration:"underline"},{tag:An.heading,fontWeight:"bold",color:sG},{tag:[An.atom,An.bool,An.special(An.variableName)],color:aG},{tag:[An.processingInstruction,An.string,An.inserted],color:i5e},{tag:An.invalid,color:t5e}]),u5e=[a5e,Rte(l5e)];var ww={exports:{}},c5e=ww.exports,AG;function A5e(){return AG||(AG=1,(function(n,e){(function(t,i){n.exports=i()})(c5e,(function(){var t=typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:{};function i(Oe,Be){return Be={exports:{}},Oe(Be,Be.exports),Be.exports}var r=i(function(Oe){function Be(){var Ve=0,yt=1,ft=2,Ct=3,Lt=4,kt=5,an=6,Hn=7,Wn=8,_i=9,Ln=10,Un=11,xn=12,Zn=13,Rn=14,Ot=15,be=16,ie=17,le=0,de=1,se=2,Ae=3,ve=4;function We(y,ot){return 55296<=y.charCodeAt(ot)&&y.charCodeAt(ot)<=56319&&56320<=y.charCodeAt(ot+1)&&y.charCodeAt(ot+1)<=57343}function tt(y,ot){ot===void 0&&(ot=0);var Dt=y.charCodeAt(ot);if(55296<=Dt&&Dt<=56319&&ot<y.length-1){var xt=Dt,tn=y.charCodeAt(ot+1);return 56320<=tn&&tn<=57343?(xt-55296)*1024+(tn-56320)+65536:xt}if(56320<=Dt&&Dt<=57343&&ot>=1){var xt=y.charCodeAt(ot-1),tn=Dt;return 55296<=xt&&xt<=56319?(xt-55296)*1024+(tn-56320)+65536:tn}return Dt}function Pe(y,ot,Dt){var xt=[y].concat(ot).concat([Dt]),tn=xt[xt.length-2],dt=Dt,Xn=xt.lastIndexOf(Rn);if(Xn>1&&xt.slice(1,Xn).every(function(Fn){return Fn==Ct})&&[Ct,Zn,ie].indexOf(y)==-1)return se;var yi=xt.lastIndexOf(Lt);if(yi>0&&xt.slice(1,yi).every(function(Fn){return Fn==Lt})&&[xn,Lt].indexOf(tn)==-1)return xt.filter(function(Fn){return Fn==Lt}).length%2==1?Ae:ve;if(tn==Ve&&dt==yt)return le;if(tn==ft||tn==Ve||tn==yt)return dt==Rn&&ot.every(function(Fn){return Fn==Ct})?se:de;if(dt==ft||dt==Ve||dt==yt)return de;if(tn==an&&(dt==an||dt==Hn||dt==_i||dt==Ln))return le;if((tn==_i||tn==Hn)&&(dt==Hn||dt==Wn))return le;if((tn==Ln||tn==Wn)&&dt==Wn)return le;if(dt==Ct||dt==Ot)return le;if(dt==kt)return le;if(tn==xn)return le;var Dn=xt.indexOf(Ct)!=-1?xt.lastIndexOf(Ct)-1:xt.length-2;return[Zn,ie].indexOf(xt[Dn])!=-1&&xt.slice(Dn+1,-1).every(function(Fn){return Fn==Ct})&&dt==Rn||tn==Ot&&[be,ie].indexOf(dt)!=-1?le:ot.indexOf(Lt)!=-1?se:tn==Lt&&dt==Lt?le:de}this.nextBreak=function(y,ot){if(ot===void 0&&(ot=0),ot<0)return 0;if(ot>=y.length-1)return y.length;for(var Dt=Xe(tt(y,ot)),xt=[],tn=ot+1;tn<y.length;tn++)if(!We(y,tn-1)){var dt=Xe(tt(y,tn));if(Pe(Dt,xt,dt))return tn;xt.push(dt)}return y.length},this.splitGraphemes=function(y){for(var ot=[],Dt=0,xt;(xt=this.nextBreak(y,Dt))<y.length;)ot.push(y.slice(Dt,xt)),Dt=xt;return Dt<y.length&&ot.push(y.slice(Dt)),ot},this.iterateGraphemes=function(y){var ot=0,Dt={next:(function(){var xt,tn;return(tn=this.nextBreak(y,ot))<y.length?(xt=y.slice(ot,tn),ot=tn,{value:xt,done:!1}):ot<y.length?(xt=y.slice(ot),ot=y.length,{value:xt,done:!1}):{value:void 0,done:!0}}).bind(this)};return typeof Symbol<"u"&&Symbol.iterator&&(Dt[Symbol.iterator]=function(){return Dt}),Dt},this.countGraphemes=function(y){for(var ot=0,Dt=0,xt;(xt=this.nextBreak(y,Dt))<y.length;)Dt=xt,ot++;return Dt<y.length&&ot++,ot};function Xe(y){return 1536<=y&&y<=1541||y==1757||y==1807||y==2274||y==3406||y==69821||70082<=y&&y<=70083||y==72250||72326<=y&&y<=72329||y==73030?xn:y==13?Ve:y==10?yt:0<=y&&y<=9||11<=y&&y<=12||14<=y&&y<=31||127<=y&&y<=159||y==173||y==1564||y==6158||y==8203||8206<=y&&y<=8207||y==8232||y==8233||8234<=y&&y<=8238||8288<=y&&y<=8292||y==8293||8294<=y&&y<=8303||55296<=y&&y<=57343||y==65279||65520<=y&&y<=65528||65529<=y&&y<=65531||113824<=y&&y<=113827||119155<=y&&y<=119162||y==917504||y==917505||917506<=y&&y<=917535||917632<=y&&y<=917759||918e3<=y&&y<=921599?ft:768<=y&&y<=879||1155<=y&&y<=1159||1160<=y&&y<=1161||1425<=y&&y<=1469||y==1471||1473<=y&&y<=1474||1476<=y&&y<=1477||y==1479||1552<=y&&y<=1562||1611<=y&&y<=1631||y==1648||1750<=y&&y<=1756||1759<=y&&y<=1764||1767<=y&&y<=1768||1770<=y&&y<=1773||y==1809||1840<=y&&y<=1866||1958<=y&&y<=1968||2027<=y&&y<=2035||2070<=y&&y<=2073||2075<=y&&y<=2083||2085<=y&&y<=2087||2089<=y&&y<=2093||2137<=y&&y<=2139||2260<=y&&y<=2273||2275<=y&&y<=2306||y==2362||y==2364||2369<=y&&y<=2376||y==2381||2385<=y&&y<=2391||2402<=y&&y<=2403||y==2433||y==2492||y==2494||2497<=y&&y<=2500||y==2509||y==2519||2530<=y&&y<=2531||2561<=y&&y<=2562||y==2620||2625<=y&&y<=2626||2631<=y&&y<=2632||2635<=y&&y<=2637||y==2641||2672<=y&&y<=2673||y==2677||2689<=y&&y<=2690||y==2748||2753<=y&&y<=2757||2759<=y&&y<=2760||y==2765||2786<=y&&y<=2787||2810<=y&&y<=2815||y==2817||y==2876||y==2878||y==2879||2881<=y&&y<=2884||y==2893||y==2902||y==2903||2914<=y&&y<=2915||y==2946||y==3006||y==3008||y==3021||y==3031||y==3072||3134<=y&&y<=3136||3142<=y&&y<=3144||3146<=y&&y<=3149||3157<=y&&y<=3158||3170<=y&&y<=3171||y==3201||y==3260||y==3263||y==3266||y==3270||3276<=y&&y<=3277||3285<=y&&y<=3286||3298<=y&&y<=3299||3328<=y&&y<=3329||3387<=y&&y<=3388||y==3390||3393<=y&&y<=3396||y==3405||y==3415||3426<=y&&y<=3427||y==3530||y==3535||3538<=y&&y<=3540||y==3542||y==3551||y==3633||3636<=y&&y<=3642||3655<=y&&y<=3662||y==3761||3764<=y&&y<=3769||3771<=y&&y<=3772||3784<=y&&y<=3789||3864<=y&&y<=3865||y==3893||y==3895||y==3897||3953<=y&&y<=3966||3968<=y&&y<=3972||3974<=y&&y<=3975||3981<=y&&y<=3991||3993<=y&&y<=4028||y==4038||4141<=y&&y<=4144||4146<=y&&y<=4151||4153<=y&&y<=4154||4157<=y&&y<=4158||4184<=y&&y<=4185||4190<=y&&y<=4192||4209<=y&&y<=4212||y==4226||4229<=y&&y<=4230||y==4237||y==4253||4957<=y&&y<=4959||5906<=y&&y<=5908||5938<=y&&y<=5940||5970<=y&&y<=5971||6002<=y&&y<=6003||6068<=y&&y<=6069||6071<=y&&y<=6077||y==6086||6089<=y&&y<=6099||y==6109||6155<=y&&y<=6157||6277<=y&&y<=6278||y==6313||6432<=y&&y<=6434||6439<=y&&y<=6440||y==6450||6457<=y&&y<=6459||6679<=y&&y<=6680||y==6683||y==6742||6744<=y&&y<=6750||y==6752||y==6754||6757<=y&&y<=6764||6771<=y&&y<=6780||y==6783||6832<=y&&y<=6845||y==6846||6912<=y&&y<=6915||y==6964||6966<=y&&y<=6970||y==6972||y==6978||7019<=y&&y<=7027||7040<=y&&y<=7041||7074<=y&&y<=7077||7080<=y&&y<=7081||7083<=y&&y<=7085||y==7142||7144<=y&&y<=7145||y==7149||7151<=y&&y<=7153||7212<=y&&y<=7219||7222<=y&&y<=7223||7376<=y&&y<=7378||7380<=y&&y<=7392||7394<=y&&y<=7400||y==7405||y==7412||7416<=y&&y<=7417||7616<=y&&y<=7673||7675<=y&&y<=7679||y==8204||8400<=y&&y<=8412||8413<=y&&y<=8416||y==8417||8418<=y&&y<=8420||8421<=y&&y<=8432||11503<=y&&y<=11505||y==11647||11744<=y&&y<=11775||12330<=y&&y<=12333||12334<=y&&y<=12335||12441<=y&&y<=12442||y==42607||42608<=y&&y<=42610||42612<=y&&y<=42621||42654<=y&&y<=42655||42736<=y&&y<=42737||y==43010||y==43014||y==43019||43045<=y&&y<=43046||43204<=y&&y<=43205||43232<=y&&y<=43249||43302<=y&&y<=43309||43335<=y&&y<=43345||43392<=y&&y<=43394||y==43443||43446<=y&&y<=43449||y==43452||y==43493||43561<=y&&y<=43566||43569<=y&&y<=43570||43573<=y&&y<=43574||y==43587||y==43596||y==43644||y==43696||43698<=y&&y<=43700||43703<=y&&y<=43704||43710<=y&&y<=43711||y==43713||43756<=y&&y<=43757||y==43766||y==44005||y==44008||y==44013||y==64286||65024<=y&&y<=65039||65056<=y&&y<=65071||65438<=y&&y<=65439||y==66045||y==66272||66422<=y&&y<=66426||68097<=y&&y<=68099||68101<=y&&y<=68102||68108<=y&&y<=68111||68152<=y&&y<=68154||y==68159||68325<=y&&y<=68326||y==69633||69688<=y&&y<=69702||69759<=y&&y<=69761||69811<=y&&y<=69814||69817<=y&&y<=69818||69888<=y&&y<=69890||69927<=y&&y<=69931||69933<=y&&y<=69940||y==70003||70016<=y&&y<=70017||70070<=y&&y<=70078||70090<=y&&y<=70092||70191<=y&&y<=70193||y==70196||70198<=y&&y<=70199||y==70206||y==70367||70371<=y&&y<=70378||70400<=y&&y<=70401||y==70460||y==70462||y==70464||y==70487||70502<=y&&y<=70508||70512<=y&&y<=70516||70712<=y&&y<=70719||70722<=y&&y<=70724||y==70726||y==70832||70835<=y&&y<=70840||y==70842||y==70845||70847<=y&&y<=70848||70850<=y&&y<=70851||y==71087||71090<=y&&y<=71093||71100<=y&&y<=71101||71103<=y&&y<=71104||71132<=y&&y<=71133||71219<=y&&y<=71226||y==71229||71231<=y&&y<=71232||y==71339||y==71341||71344<=y&&y<=71349||y==71351||71453<=y&&y<=71455||71458<=y&&y<=71461||71463<=y&&y<=71467||72193<=y&&y<=72198||72201<=y&&y<=72202||72243<=y&&y<=72248||72251<=y&&y<=72254||y==72263||72273<=y&&y<=72278||72281<=y&&y<=72283||72330<=y&&y<=72342||72344<=y&&y<=72345||72752<=y&&y<=72758||72760<=y&&y<=72765||y==72767||72850<=y&&y<=72871||72874<=y&&y<=72880||72882<=y&&y<=72883||72885<=y&&y<=72886||73009<=y&&y<=73014||y==73018||73020<=y&&y<=73021||73023<=y&&y<=73029||y==73031||92912<=y&&y<=92916||92976<=y&&y<=92982||94095<=y&&y<=94098||113821<=y&&y<=113822||y==119141||119143<=y&&y<=119145||119150<=y&&y<=119154||119163<=y&&y<=119170||119173<=y&&y<=119179||119210<=y&&y<=119213||119362<=y&&y<=119364||121344<=y&&y<=121398||121403<=y&&y<=121452||y==121461||y==121476||121499<=y&&y<=121503||121505<=y&&y<=121519||122880<=y&&y<=122886||122888<=y&&y<=122904||122907<=y&&y<=122913||122915<=y&&y<=122916||122918<=y&&y<=122922||125136<=y&&y<=125142||125252<=y&&y<=125258||917536<=y&&y<=917631||917760<=y&&y<=917999?Ct:127462<=y&&y<=127487?Lt:y==2307||y==2363||2366<=y&&y<=2368||2377<=y&&y<=2380||2382<=y&&y<=2383||2434<=y&&y<=2435||2495<=y&&y<=2496||2503<=y&&y<=2504||2507<=y&&y<=2508||y==2563||2622<=y&&y<=2624||y==2691||2750<=y&&y<=2752||y==2761||2763<=y&&y<=2764||2818<=y&&y<=2819||y==2880||2887<=y&&y<=2888||2891<=y&&y<=2892||y==3007||3009<=y&&y<=3010||3014<=y&&y<=3016||3018<=y&&y<=3020||3073<=y&&y<=3075||3137<=y&&y<=3140||3202<=y&&y<=3203||y==3262||3264<=y&&y<=3265||3267<=y&&y<=3268||3271<=y&&y<=3272||3274<=y&&y<=3275||3330<=y&&y<=3331||3391<=y&&y<=3392||3398<=y&&y<=3400||3402<=y&&y<=3404||3458<=y&&y<=3459||3536<=y&&y<=3537||3544<=y&&y<=3550||3570<=y&&y<=3571||y==3635||y==3763||3902<=y&&y<=3903||y==3967||y==4145||4155<=y&&y<=4156||4182<=y&&y<=4183||y==4228||y==6070||6078<=y&&y<=6085||6087<=y&&y<=6088||6435<=y&&y<=6438||6441<=y&&y<=6443||6448<=y&&y<=6449||6451<=y&&y<=6456||6681<=y&&y<=6682||y==6741||y==6743||6765<=y&&y<=6770||y==6916||y==6965||y==6971||6973<=y&&y<=6977||6979<=y&&y<=6980||y==7042||y==7073||7078<=y&&y<=7079||y==7082||y==7143||7146<=y&&y<=7148||y==7150||7154<=y&&y<=7155||7204<=y&&y<=7211||7220<=y&&y<=7221||y==7393||7410<=y&&y<=7411||y==7415||43043<=y&&y<=43044||y==43047||43136<=y&&y<=43137||43188<=y&&y<=43203||43346<=y&&y<=43347||y==43395||43444<=y&&y<=43445||43450<=y&&y<=43451||43453<=y&&y<=43456||43567<=y&&y<=43568||43571<=y&&y<=43572||y==43597||y==43755||43758<=y&&y<=43759||y==43765||44003<=y&&y<=44004||44006<=y&&y<=44007||44009<=y&&y<=44010||y==44012||y==69632||y==69634||y==69762||69808<=y&&y<=69810||69815<=y&&y<=69816||y==69932||y==70018||70067<=y&&y<=70069||70079<=y&&y<=70080||70188<=y&&y<=70190||70194<=y&&y<=70195||y==70197||70368<=y&&y<=70370||70402<=y&&y<=70403||y==70463||70465<=y&&y<=70468||70471<=y&&y<=70472||70475<=y&&y<=70477||70498<=y&&y<=70499||70709<=y&&y<=70711||70720<=y&&y<=70721||y==70725||70833<=y&&y<=70834||y==70841||70843<=y&&y<=70844||y==70846||y==70849||71088<=y&&y<=71089||71096<=y&&y<=71099||y==71102||71216<=y&&y<=71218||71227<=y&&y<=71228||y==71230||y==71340||71342<=y&&y<=71343||y==71350||71456<=y&&y<=71457||y==71462||72199<=y&&y<=72200||y==72249||72279<=y&&y<=72280||y==72343||y==72751||y==72766||y==72873||y==72881||y==72884||94033<=y&&y<=94078||y==119142||y==119149?kt:4352<=y&&y<=4447||43360<=y&&y<=43388?an:4448<=y&&y<=4519||55216<=y&&y<=55238?Hn:4520<=y&&y<=4607||55243<=y&&y<=55291?Wn:y==44032||y==44060||y==44088||y==44116||y==44144||y==44172||y==44200||y==44228||y==44256||y==44284||y==44312||y==44340||y==44368||y==44396||y==44424||y==44452||y==44480||y==44508||y==44536||y==44564||y==44592||y==44620||y==44648||y==44676||y==44704||y==44732||y==44760||y==44788||y==44816||y==44844||y==44872||y==44900||y==44928||y==44956||y==44984||y==45012||y==45040||y==45068||y==45096||y==45124||y==45152||y==45180||y==45208||y==45236||y==45264||y==45292||y==45320||y==45348||y==45376||y==45404||y==45432||y==45460||y==45488||y==45516||y==45544||y==45572||y==45600||y==45628||y==45656||y==45684||y==45712||y==45740||y==45768||y==45796||y==45824||y==45852||y==45880||y==45908||y==45936||y==45964||y==45992||y==46020||y==46048||y==46076||y==46104||y==46132||y==46160||y==46188||y==46216||y==46244||y==46272||y==46300||y==46328||y==46356||y==46384||y==46412||y==46440||y==46468||y==46496||y==46524||y==46552||y==46580||y==46608||y==46636||y==46664||y==46692||y==46720||y==46748||y==46776||y==46804||y==46832||y==46860||y==46888||y==46916||y==46944||y==46972||y==47e3||y==47028||y==47056||y==47084||y==47112||y==47140||y==47168||y==47196||y==47224||y==47252||y==47280||y==47308||y==47336||y==47364||y==47392||y==47420||y==47448||y==47476||y==47504||y==47532||y==47560||y==47588||y==47616||y==47644||y==47672||y==47700||y==47728||y==47756||y==47784||y==47812||y==47840||y==47868||y==47896||y==47924||y==47952||y==47980||y==48008||y==48036||y==48064||y==48092||y==48120||y==48148||y==48176||y==48204||y==48232||y==48260||y==48288||y==48316||y==48344||y==48372||y==48400||y==48428||y==48456||y==48484||y==48512||y==48540||y==48568||y==48596||y==48624||y==48652||y==48680||y==48708||y==48736||y==48764||y==48792||y==48820||y==48848||y==48876||y==48904||y==48932||y==48960||y==48988||y==49016||y==49044||y==49072||y==49100||y==49128||y==49156||y==49184||y==49212||y==49240||y==49268||y==49296||y==49324||y==49352||y==49380||y==49408||y==49436||y==49464||y==49492||y==49520||y==49548||y==49576||y==49604||y==49632||y==49660||y==49688||y==49716||y==49744||y==49772||y==49800||y==49828||y==49856||y==49884||y==49912||y==49940||y==49968||y==49996||y==50024||y==50052||y==50080||y==50108||y==50136||y==50164||y==50192||y==50220||y==50248||y==50276||y==50304||y==50332||y==50360||y==50388||y==50416||y==50444||y==50472||y==50500||y==50528||y==50556||y==50584||y==50612||y==50640||y==50668||y==50696||y==50724||y==50752||y==50780||y==50808||y==50836||y==50864||y==50892||y==50920||y==50948||y==50976||y==51004||y==51032||y==51060||y==51088||y==51116||y==51144||y==51172||y==51200||y==51228||y==51256||y==51284||y==51312||y==51340||y==51368||y==51396||y==51424||y==51452||y==51480||y==51508||y==51536||y==51564||y==51592||y==51620||y==51648||y==51676||y==51704||y==51732||y==51760||y==51788||y==51816||y==51844||y==51872||y==51900||y==51928||y==51956||y==51984||y==52012||y==52040||y==52068||y==52096||y==52124||y==52152||y==52180||y==52208||y==52236||y==52264||y==52292||y==52320||y==52348||y==52376||y==52404||y==52432||y==52460||y==52488||y==52516||y==52544||y==52572||y==52600||y==52628||y==52656||y==52684||y==52712||y==52740||y==52768||y==52796||y==52824||y==52852||y==52880||y==52908||y==52936||y==52964||y==52992||y==53020||y==53048||y==53076||y==53104||y==53132||y==53160||y==53188||y==53216||y==53244||y==53272||y==53300||y==53328||y==53356||y==53384||y==53412||y==53440||y==53468||y==53496||y==53524||y==53552||y==53580||y==53608||y==53636||y==53664||y==53692||y==53720||y==53748||y==53776||y==53804||y==53832||y==53860||y==53888||y==53916||y==53944||y==53972||y==54e3||y==54028||y==54056||y==54084||y==54112||y==54140||y==54168||y==54196||y==54224||y==54252||y==54280||y==54308||y==54336||y==54364||y==54392||y==54420||y==54448||y==54476||y==54504||y==54532||y==54560||y==54588||y==54616||y==54644||y==54672||y==54700||y==54728||y==54756||y==54784||y==54812||y==54840||y==54868||y==54896||y==54924||y==54952||y==54980||y==55008||y==55036||y==55064||y==55092||y==55120||y==55148||y==55176?_i:44033<=y&&y<=44059||44061<=y&&y<=44087||44089<=y&&y<=44115||44117<=y&&y<=44143||44145<=y&&y<=44171||44173<=y&&y<=44199||44201<=y&&y<=44227||44229<=y&&y<=44255||44257<=y&&y<=44283||44285<=y&&y<=44311||44313<=y&&y<=44339||44341<=y&&y<=44367||44369<=y&&y<=44395||44397<=y&&y<=44423||44425<=y&&y<=44451||44453<=y&&y<=44479||44481<=y&&y<=44507||44509<=y&&y<=44535||44537<=y&&y<=44563||44565<=y&&y<=44591||44593<=y&&y<=44619||44621<=y&&y<=44647||44649<=y&&y<=44675||44677<=y&&y<=44703||44705<=y&&y<=44731||44733<=y&&y<=44759||44761<=y&&y<=44787||44789<=y&&y<=44815||44817<=y&&y<=44843||44845<=y&&y<=44871||44873<=y&&y<=44899||44901<=y&&y<=44927||44929<=y&&y<=44955||44957<=y&&y<=44983||44985<=y&&y<=45011||45013<=y&&y<=45039||45041<=y&&y<=45067||45069<=y&&y<=45095||45097<=y&&y<=45123||45125<=y&&y<=45151||45153<=y&&y<=45179||45181<=y&&y<=45207||45209<=y&&y<=45235||45237<=y&&y<=45263||45265<=y&&y<=45291||45293<=y&&y<=45319||45321<=y&&y<=45347||45349<=y&&y<=45375||45377<=y&&y<=45403||45405<=y&&y<=45431||45433<=y&&y<=45459||45461<=y&&y<=45487||45489<=y&&y<=45515||45517<=y&&y<=45543||45545<=y&&y<=45571||45573<=y&&y<=45599||45601<=y&&y<=45627||45629<=y&&y<=45655||45657<=y&&y<=45683||45685<=y&&y<=45711||45713<=y&&y<=45739||45741<=y&&y<=45767||45769<=y&&y<=45795||45797<=y&&y<=45823||45825<=y&&y<=45851||45853<=y&&y<=45879||45881<=y&&y<=45907||45909<=y&&y<=45935||45937<=y&&y<=45963||45965<=y&&y<=45991||45993<=y&&y<=46019||46021<=y&&y<=46047||46049<=y&&y<=46075||46077<=y&&y<=46103||46105<=y&&y<=46131||46133<=y&&y<=46159||46161<=y&&y<=46187||46189<=y&&y<=46215||46217<=y&&y<=46243||46245<=y&&y<=46271||46273<=y&&y<=46299||46301<=y&&y<=46327||46329<=y&&y<=46355||46357<=y&&y<=46383||46385<=y&&y<=46411||46413<=y&&y<=46439||46441<=y&&y<=46467||46469<=y&&y<=46495||46497<=y&&y<=46523||46525<=y&&y<=46551||46553<=y&&y<=46579||46581<=y&&y<=46607||46609<=y&&y<=46635||46637<=y&&y<=46663||46665<=y&&y<=46691||46693<=y&&y<=46719||46721<=y&&y<=46747||46749<=y&&y<=46775||46777<=y&&y<=46803||46805<=y&&y<=46831||46833<=y&&y<=46859||46861<=y&&y<=46887||46889<=y&&y<=46915||46917<=y&&y<=46943||46945<=y&&y<=46971||46973<=y&&y<=46999||47001<=y&&y<=47027||47029<=y&&y<=47055||47057<=y&&y<=47083||47085<=y&&y<=47111||47113<=y&&y<=47139||47141<=y&&y<=47167||47169<=y&&y<=47195||47197<=y&&y<=47223||47225<=y&&y<=47251||47253<=y&&y<=47279||47281<=y&&y<=47307||47309<=y&&y<=47335||47337<=y&&y<=47363||47365<=y&&y<=47391||47393<=y&&y<=47419||47421<=y&&y<=47447||47449<=y&&y<=47475||47477<=y&&y<=47503||47505<=y&&y<=47531||47533<=y&&y<=47559||47561<=y&&y<=47587||47589<=y&&y<=47615||47617<=y&&y<=47643||47645<=y&&y<=47671||47673<=y&&y<=47699||47701<=y&&y<=47727||47729<=y&&y<=47755||47757<=y&&y<=47783||47785<=y&&y<=47811||47813<=y&&y<=47839||47841<=y&&y<=47867||47869<=y&&y<=47895||47897<=y&&y<=47923||47925<=y&&y<=47951||47953<=y&&y<=47979||47981<=y&&y<=48007||48009<=y&&y<=48035||48037<=y&&y<=48063||48065<=y&&y<=48091||48093<=y&&y<=48119||48121<=y&&y<=48147||48149<=y&&y<=48175||48177<=y&&y<=48203||48205<=y&&y<=48231||48233<=y&&y<=48259||48261<=y&&y<=48287||48289<=y&&y<=48315||48317<=y&&y<=48343||48345<=y&&y<=48371||48373<=y&&y<=48399||48401<=y&&y<=48427||48429<=y&&y<=48455||48457<=y&&y<=48483||48485<=y&&y<=48511||48513<=y&&y<=48539||48541<=y&&y<=48567||48569<=y&&y<=48595||48597<=y&&y<=48623||48625<=y&&y<=48651||48653<=y&&y<=48679||48681<=y&&y<=48707||48709<=y&&y<=48735||48737<=y&&y<=48763||48765<=y&&y<=48791||48793<=y&&y<=48819||48821<=y&&y<=48847||48849<=y&&y<=48875||48877<=y&&y<=48903||48905<=y&&y<=48931||48933<=y&&y<=48959||48961<=y&&y<=48987||48989<=y&&y<=49015||49017<=y&&y<=49043||49045<=y&&y<=49071||49073<=y&&y<=49099||49101<=y&&y<=49127||49129<=y&&y<=49155||49157<=y&&y<=49183||49185<=y&&y<=49211||49213<=y&&y<=49239||49241<=y&&y<=49267||49269<=y&&y<=49295||49297<=y&&y<=49323||49325<=y&&y<=49351||49353<=y&&y<=49379||49381<=y&&y<=49407||49409<=y&&y<=49435||49437<=y&&y<=49463||49465<=y&&y<=49491||49493<=y&&y<=49519||49521<=y&&y<=49547||49549<=y&&y<=49575||49577<=y&&y<=49603||49605<=y&&y<=49631||49633<=y&&y<=49659||49661<=y&&y<=49687||49689<=y&&y<=49715||49717<=y&&y<=49743||49745<=y&&y<=49771||49773<=y&&y<=49799||49801<=y&&y<=49827||49829<=y&&y<=49855||49857<=y&&y<=49883||49885<=y&&y<=49911||49913<=y&&y<=49939||49941<=y&&y<=49967||49969<=y&&y<=49995||49997<=y&&y<=50023||50025<=y&&y<=50051||50053<=y&&y<=50079||50081<=y&&y<=50107||50109<=y&&y<=50135||50137<=y&&y<=50163||50165<=y&&y<=50191||50193<=y&&y<=50219||50221<=y&&y<=50247||50249<=y&&y<=50275||50277<=y&&y<=50303||50305<=y&&y<=50331||50333<=y&&y<=50359||50361<=y&&y<=50387||50389<=y&&y<=50415||50417<=y&&y<=50443||50445<=y&&y<=50471||50473<=y&&y<=50499||50501<=y&&y<=50527||50529<=y&&y<=50555||50557<=y&&y<=50583||50585<=y&&y<=50611||50613<=y&&y<=50639||50641<=y&&y<=50667||50669<=y&&y<=50695||50697<=y&&y<=50723||50725<=y&&y<=50751||50753<=y&&y<=50779||50781<=y&&y<=50807||50809<=y&&y<=50835||50837<=y&&y<=50863||50865<=y&&y<=50891||50893<=y&&y<=50919||50921<=y&&y<=50947||50949<=y&&y<=50975||50977<=y&&y<=51003||51005<=y&&y<=51031||51033<=y&&y<=51059||51061<=y&&y<=51087||51089<=y&&y<=51115||51117<=y&&y<=51143||51145<=y&&y<=51171||51173<=y&&y<=51199||51201<=y&&y<=51227||51229<=y&&y<=51255||51257<=y&&y<=51283||51285<=y&&y<=51311||51313<=y&&y<=51339||51341<=y&&y<=51367||51369<=y&&y<=51395||51397<=y&&y<=51423||51425<=y&&y<=51451||51453<=y&&y<=51479||51481<=y&&y<=51507||51509<=y&&y<=51535||51537<=y&&y<=51563||51565<=y&&y<=51591||51593<=y&&y<=51619||51621<=y&&y<=51647||51649<=y&&y<=51675||51677<=y&&y<=51703||51705<=y&&y<=51731||51733<=y&&y<=51759||51761<=y&&y<=51787||51789<=y&&y<=51815||51817<=y&&y<=51843||51845<=y&&y<=51871||51873<=y&&y<=51899||51901<=y&&y<=51927||51929<=y&&y<=51955||51957<=y&&y<=51983||51985<=y&&y<=52011||52013<=y&&y<=52039||52041<=y&&y<=52067||52069<=y&&y<=52095||52097<=y&&y<=52123||52125<=y&&y<=52151||52153<=y&&y<=52179||52181<=y&&y<=52207||52209<=y&&y<=52235||52237<=y&&y<=52263||52265<=y&&y<=52291||52293<=y&&y<=52319||52321<=y&&y<=52347||52349<=y&&y<=52375||52377<=y&&y<=52403||52405<=y&&y<=52431||52433<=y&&y<=52459||52461<=y&&y<=52487||52489<=y&&y<=52515||52517<=y&&y<=52543||52545<=y&&y<=52571||52573<=y&&y<=52599||52601<=y&&y<=52627||52629<=y&&y<=52655||52657<=y&&y<=52683||52685<=y&&y<=52711||52713<=y&&y<=52739||52741<=y&&y<=52767||52769<=y&&y<=52795||52797<=y&&y<=52823||52825<=y&&y<=52851||52853<=y&&y<=52879||52881<=y&&y<=52907||52909<=y&&y<=52935||52937<=y&&y<=52963||52965<=y&&y<=52991||52993<=y&&y<=53019||53021<=y&&y<=53047||53049<=y&&y<=53075||53077<=y&&y<=53103||53105<=y&&y<=53131||53133<=y&&y<=53159||53161<=y&&y<=53187||53189<=y&&y<=53215||53217<=y&&y<=53243||53245<=y&&y<=53271||53273<=y&&y<=53299||53301<=y&&y<=53327||53329<=y&&y<=53355||53357<=y&&y<=53383||53385<=y&&y<=53411||53413<=y&&y<=53439||53441<=y&&y<=53467||53469<=y&&y<=53495||53497<=y&&y<=53523||53525<=y&&y<=53551||53553<=y&&y<=53579||53581<=y&&y<=53607||53609<=y&&y<=53635||53637<=y&&y<=53663||53665<=y&&y<=53691||53693<=y&&y<=53719||53721<=y&&y<=53747||53749<=y&&y<=53775||53777<=y&&y<=53803||53805<=y&&y<=53831||53833<=y&&y<=53859||53861<=y&&y<=53887||53889<=y&&y<=53915||53917<=y&&y<=53943||53945<=y&&y<=53971||53973<=y&&y<=53999||54001<=y&&y<=54027||54029<=y&&y<=54055||54057<=y&&y<=54083||54085<=y&&y<=54111||54113<=y&&y<=54139||54141<=y&&y<=54167||54169<=y&&y<=54195||54197<=y&&y<=54223||54225<=y&&y<=54251||54253<=y&&y<=54279||54281<=y&&y<=54307||54309<=y&&y<=54335||54337<=y&&y<=54363||54365<=y&&y<=54391||54393<=y&&y<=54419||54421<=y&&y<=54447||54449<=y&&y<=54475||54477<=y&&y<=54503||54505<=y&&y<=54531||54533<=y&&y<=54559||54561<=y&&y<=54587||54589<=y&&y<=54615||54617<=y&&y<=54643||54645<=y&&y<=54671||54673<=y&&y<=54699||54701<=y&&y<=54727||54729<=y&&y<=54755||54757<=y&&y<=54783||54785<=y&&y<=54811||54813<=y&&y<=54839||54841<=y&&y<=54867||54869<=y&&y<=54895||54897<=y&&y<=54923||54925<=y&&y<=54951||54953<=y&&y<=54979||54981<=y&&y<=55007||55009<=y&&y<=55035||55037<=y&&y<=55063||55065<=y&&y<=55091||55093<=y&&y<=55119||55121<=y&&y<=55147||55149<=y&&y<=55175||55177<=y&&y<=55203?Ln:y==9757||y==9977||9994<=y&&y<=9997||y==127877||127938<=y&&y<=127940||y==127943||127946<=y&&y<=127948||128066<=y&&y<=128067||128070<=y&&y<=128080||y==128110||128112<=y&&y<=128120||y==128124||128129<=y&&y<=128131||128133<=y&&y<=128135||y==128170||128372<=y&&y<=128373||y==128378||y==128400||128405<=y&&y<=128406||128581<=y&&y<=128583||128587<=y&&y<=128591||y==128675||128692<=y&&y<=128694||y==128704||y==128716||129304<=y&&y<=129308||129310<=y&&y<=129311||y==129318||129328<=y&&y<=129337||129341<=y&&y<=129342||129489<=y&&y<=129501?Zn:127995<=y&&y<=127999?Rn:y==8205?Ot:y==9792||y==9794||9877<=y&&y<=9878||y==9992||y==10084||y==127752||y==127806||y==127859||y==127891||y==127908||y==127912||y==127979||y==127981||y==128139||128187<=y&&y<=128188||y==128295||y==128300||y==128488||y==128640||y==128658?be:128102<=y&&y<=128105?ie:Un}return this}Oe.exports&&(Oe.exports=Be)}),o=new r,s=function(Be,Ve,yt){for(var ft=o.iterateGraphemes(Be.substring(Ve)),Ct="",Lt=0;Lt<yt-Ve;Lt++){var kt=ft.next();if(Ct+=kt.value,kt.done)break}return Ct},a=(function(Oe,Be,Ve,yt,ft,Ct,Lt){return{start:{line:Oe,column:Be,offset:Ve},end:{line:yt,column:ft,offset:Ct},source:Lt||null}}),c=i(function(Oe,Be){(function(Ve,yt){Oe.exports=yt()})(t,function(){var Ve="",yt,ft=Ct;function Ct(Ln,Un){if(typeof Ln!="string")throw new TypeError("expected a string");if(Un===1)return Ln;if(Un===2)return Ln+Ln;var xn=Ln.length*Un;if(yt!==Ln||typeof yt>"u")yt=Ln,Ve="";else if(Ve.length>=xn)return Ve.substr(0,xn);for(;xn>Ve.length&&Un>1;)Un&1&&(Ve+=Ln),Un>>=1,Ln+=Ln;return Ve+=Ln,Ve=Ve.substr(0,xn),Ve}var Lt=function(Un,xn,Zn){if(Un==null||xn==null)return Un;var Rn=String(Un),Ot=typeof xn=="number"?xn:parseInt(xn,10);if(isNaN(Ot)||!isFinite(Ot))return Rn;var be=Rn.length;if(be>=Ot)return Rn;var ie=String(Zn);ie===""&&(ie=" ");for(var le=Ot-be;ie.length<le;)ie+=ie;var de=ie.length>le?ie.substr(0,le):ie;return de+Rn},kt=Object.assign||function(Ln){for(var Un=1;Un<arguments.length;Un++){var xn=arguments[Un];for(var Zn in xn)Object.prototype.hasOwnProperty.call(xn,Zn)&&(Ln[Zn]=xn[Zn])}return Ln};function an(Ln,Un,xn,Zn){var Rn=String(Un),Ot=Lt(Rn,xn," "),be=ft(" ",Zn.tabSize);return Ot+" | "+Ln.replace(/\t/g,be)}function Hn(Ln,Un,xn,Zn,Rn){return Ln.slice(Un,xn).map(function(Ot,be){return an(Ot,Un+be+1,Zn,Rn)}).join(`
`)}var Wn={extraLines:2,tabSize:4},_i=function(Un,xn,Zn,Rn){Rn=kt({},Wn,Rn);var Ot=Un.split(/\r\n?|\n|\f/),be=Math.max(1,xn-Rn.extraLines)-1,ie=Math.min(xn+Rn.extraLines,Ot.length),le=String(ie).length,de=Hn(Ot,be,xn,le,Rn),se=an(Ot[xn-1].substring(0,Zn-1),xn,le,Rn),Ae=ft(" ",se.length)+"^",ve=Hn(Ot,xn,ie,le,Rn);return[de,Ae,ve].filter(Boolean).join(`
`)};return _i})}),h=new Error().stack,m=(function(Oe){var Be=Object.create(SyntaxError.prototype);return Object.assign(Be,Oe,{name:"SyntaxError"}),Object.defineProperty(Be,"stack",{get:function(){return h?h.replace(/^(.+\n){1,3}/,String(Be)+`
`):""}}),Be}),v=(function(Oe,Be,Ve,yt,ft){throw m({message:yt?Oe+`
`+c(Be,yt,ft):Oe,rawMessage:Oe,source:Ve,line:yt,column:ft})}),x={unexpectedEnd:function(){return"Unexpected end of input"},unexpectedToken:function(Be){for(var Ve=arguments.length,yt=Array(Ve>1?Ve-1:0),ft=1;ft<Ve;ft++)yt[ft-1]=arguments[ft];return"Unexpected token <"+Be+"> at "+yt.filter(Boolean).join(":")}},E={unexpectedSymbol:function(Be){for(var Ve=arguments.length,yt=Array(Ve>1?Ve-1:0),ft=1;ft<Ve;ft++)yt[ft-1]=arguments[ft];return"Unexpected symbol <"+Be+"> at "+yt.filter(Boolean).join(":")}},D={LEFT_BRACE:0,RIGHT_BRACE:1,LEFT_BRACKET:2,RIGHT_BRACKET:3,COLON:4,COMMA:5,STRING:6,NUMBER:7,TRUE:8,FALSE:9,NULL:10},P={"{":D.LEFT_BRACE,"}":D.RIGHT_BRACE,"[":D.LEFT_BRACKET,"]":D.RIGHT_BRACKET,":":D.COLON,",":D.COMMA},F={true:D.TRUE,false:D.FALSE,null:D.NULL},W={_START_:0,START_QUOTE_OR_CHAR:1,ESCAPE:2},q={'"':0,"\\":1,"/":2,b:3,f:4,n:5,r:6,t:7,u:8},V={_START_:0,MINUS:1,ZERO:2,DIGIT:3,POINT:4,DIGIT_FRACTION:5,EXP:6,EXP_DIGIT_OR_SIGN:7};function H(Oe){return Oe>="1"&&Oe<="9"}function X(Oe){return Oe>="0"&&Oe<="9"}function Z(Oe){return X(Oe)||Oe>="a"&&Oe<="f"||Oe>="A"&&Oe<="F"}function G(Oe){return Oe==="e"||Oe==="E"}function oe(Oe,Be,Ve,yt){var ft=Oe.charAt(Be);if(ft==="\r")Be++,Ve++,yt=1,Oe.charAt(Be)===`
`&&Be++;else if(ft===`
`)Be++,Ve++,yt=1;else if(ft==="	"||ft===" ")Be++,yt++;else return null;return{index:Be,line:Ve,column:yt}}function ue(Oe,Be,Ve,yt){var ft=Oe.charAt(Be);return ft in P?{type:P[ft],line:Ve,column:yt+1,index:Be+1,value:null}:null}function xe(Oe,Be,Ve,yt){for(var ft in F)if(F.hasOwnProperty(ft)&&Oe.substr(Be,ft.length)===ft)return{type:F[ft],line:Ve,column:yt+ft.length,index:Be+ft.length,value:ft};return null}function me(Oe,Be,Ve,yt){for(var ft=Be,Ct=W._START_;Be<Oe.length;){var Lt=Oe.charAt(Be);switch(Ct){case W._START_:{if(Lt==='"')Be++,Ct=W.START_QUOTE_OR_CHAR;else return null;break}case W.START_QUOTE_OR_CHAR:{if(Lt==="\\")Be++,Ct=W.ESCAPE;else{if(Lt==='"')return Be++,{type:D.STRING,line:Ve,column:yt+Be-ft,index:Be,value:Oe.slice(ft,Be)};Be++}break}case W.ESCAPE:{if(Lt in q){if(Be++,Lt==="u")for(var kt=0;kt<4;kt++){var an=Oe.charAt(Be);if(an&&Z(an))Be++;else return null}Ct=W.START_QUOTE_OR_CHAR}else return null;break}}}}function Ie(Oe,Be,Ve,yt){var ft=Be,Ct=Be,Lt=V._START_;e:for(;Be<Oe.length;){var kt=Oe.charAt(Be);switch(Lt){case V._START_:{if(kt==="-")Lt=V.MINUS;else if(kt==="0")Ct=Be+1,Lt=V.ZERO;else if(H(kt))Ct=Be+1,Lt=V.DIGIT;else return null;break}case V.MINUS:{if(kt==="0")Ct=Be+1,Lt=V.ZERO;else if(H(kt))Ct=Be+1,Lt=V.DIGIT;else return null;break}case V.ZERO:{if(kt===".")Lt=V.POINT;else if(G(kt))Lt=V.EXP;else break e;break}case V.DIGIT:{if(X(kt))Ct=Be+1;else if(kt===".")Lt=V.POINT;else if(G(kt))Lt=V.EXP;else break e;break}case V.POINT:{if(X(kt))Ct=Be+1,Lt=V.DIGIT_FRACTION;else break e;break}case V.DIGIT_FRACTION:{if(X(kt))Ct=Be+1;else if(G(kt))Lt=V.EXP;else break e;break}case V.EXP:{if(kt==="+"||kt==="-")Lt=V.EXP_DIGIT_OR_SIGN;else if(X(kt))Ct=Be+1,Lt=V.EXP_DIGIT_OR_SIGN;else break e;break}case V.EXP_DIGIT_OR_SIGN:{if(X(kt))Ct=Be+1;else break e;break}}Be++}return Ct>0?{type:D.NUMBER,line:Ve,column:yt+Ct-ft,index:Ct,value:Oe.slice(ft,Ct)}:null}var Me=function(Be,Ve){for(var yt=1,ft=1,Ct=0,Lt=[];Ct<Be.length;){var kt=[Be,Ct,yt,ft],an=oe.apply(void 0,kt);if(an){Ct=an.index,yt=an.line,ft=an.column;continue}var Hn=ue.apply(void 0,kt)||xe.apply(void 0,kt)||me.apply(void 0,kt)||Ie.apply(void 0,kt);if(Hn){var Wn={type:Hn.type,value:Hn.value,loc:a(yt,ft,Ct,Hn.line,Hn.column,Hn.index,Ve.source)};Lt.push(Wn),Ct=Hn.index,yt=Hn.line,ft=Hn.column}else v(E.unexpectedSymbol(s(Be,Ct,Ct+1),Ve.source,yt,ft),Be,Ve.source,yt,ft)}return Lt},Te={_START_:0,OPEN_OBJECT:1,PROPERTY:2,COMMA:3},je={_START_:0,KEY:1,COLON:2},Ee={_START_:0,OPEN_ARRAY:1,VALUE:2,COMMA:3},qe={loc:!0,source:null};function At(Oe,Be,Ve){var yt=Be.length>0?Be[Be.length-1].loc.end:{line:1,column:1};v(x.unexpectedEnd(),Oe,Ve.source,yt.line,yt.column)}function gt(Oe){for(var Be=0,Ve=0;Ve<4;Ve++)Be=Be*16+parseInt(Oe[Ve],16);return String.fromCharCode(Be)}var Le={b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},Re=['"',"\\","/"];function Ge(Oe){for(var Be="",Ve=0;Ve<Oe.length;Ve++){var yt=Oe.charAt(Ve);if(yt==="\\"){Ve++;var ft=Oe.charAt(Ve);if(ft==="u")Be+=gt(Oe.substr(Ve+1,4)),Ve+=4;else if(Re.indexOf(ft)!==-1)Be+=ft;else if(ft in Le)Be+=Le[ft];else break}else Be+=yt}return Be}function De(Oe,Be,Ve,yt){for(var ft=void 0,Ct={type:"Object",children:[]},Lt=Te._START_;Ve<Be.length;){var kt=Be[Ve];switch(Lt){case Te._START_:{if(kt.type===D.LEFT_BRACE)ft=kt,Lt=Te.OPEN_OBJECT,Ve++;else return null;break}case Te.OPEN_OBJECT:{if(kt.type===D.RIGHT_BRACE)return yt.loc&&(Ct.loc=a(ft.loc.start.line,ft.loc.start.column,ft.loc.start.offset,kt.loc.end.line,kt.loc.end.column,kt.loc.end.offset,yt.source)),{value:Ct,index:Ve+1};var an=_t(Oe,Be,Ve,yt);Ct.children.push(an.value),Lt=Te.PROPERTY,Ve=an.index;break}case Te.PROPERTY:{if(kt.type===D.RIGHT_BRACE)return yt.loc&&(Ct.loc=a(ft.loc.start.line,ft.loc.start.column,ft.loc.start.offset,kt.loc.end.line,kt.loc.end.column,kt.loc.end.offset,yt.source)),{value:Ct,index:Ve+1};kt.type===D.COMMA?(Lt=Te.COMMA,Ve++):v(x.unexpectedToken(s(Oe,kt.loc.start.offset,kt.loc.end.offset),yt.source,kt.loc.start.line,kt.loc.start.column),Oe,yt.source,kt.loc.start.line,kt.loc.start.column);break}case Te.COMMA:{var Hn=_t(Oe,Be,Ve,yt);Hn?(Ve=Hn.index,Ct.children.push(Hn.value),Lt=Te.PROPERTY):v(x.unexpectedToken(s(Oe,kt.loc.start.offset,kt.loc.end.offset),yt.source,kt.loc.start.line,kt.loc.start.column),Oe,yt.source,kt.loc.start.line,kt.loc.start.column);break}}}At(Oe,Be,yt)}function _t(Oe,Be,Ve,yt){for(var ft=void 0,Ct={type:"Property",key:null,value:null},Lt=je._START_;Ve<Be.length;){var kt=Be[Ve];switch(Lt){case je._START_:{if(kt.type===D.STRING){var an={type:"Identifier",value:Ge(Oe.slice(kt.loc.start.offset+1,kt.loc.end.offset-1)),raw:kt.value};yt.loc&&(an.loc=kt.loc),ft=kt,Ct.key=an,Lt=je.KEY,Ve++}else return null;break}case je.KEY:{kt.type===D.COLON?(Lt=je.COLON,Ve++):v(x.unexpectedToken(s(Oe,kt.loc.start.offset,kt.loc.end.offset),yt.source,kt.loc.start.line,kt.loc.start.column),Oe,yt.source,kt.loc.start.line,kt.loc.start.column);break}case je.COLON:{var Hn=Kt(Oe,Be,Ve,yt);return Ct.value=Hn.value,yt.loc&&(Ct.loc=a(ft.loc.start.line,ft.loc.start.column,ft.loc.start.offset,Hn.value.loc.end.line,Hn.value.loc.end.column,Hn.value.loc.end.offset,yt.source)),{value:Ct,index:Hn.index}}}}}function at(Oe,Be,Ve,yt){for(var ft=void 0,Ct={type:"Array",children:[]},Lt=Ee._START_,kt=void 0;Ve<Be.length;)switch(kt=Be[Ve],Lt){case Ee._START_:{if(kt.type===D.LEFT_BRACKET)ft=kt,Lt=Ee.OPEN_ARRAY,Ve++;else return null;break}case Ee.OPEN_ARRAY:{if(kt.type===D.RIGHT_BRACKET)return yt.loc&&(Ct.loc=a(ft.loc.start.line,ft.loc.start.column,ft.loc.start.offset,kt.loc.end.line,kt.loc.end.column,kt.loc.end.offset,yt.source)),{value:Ct,index:Ve+1};var an=Kt(Oe,Be,Ve,yt);Ve=an.index,Ct.children.push(an.value),Lt=Ee.VALUE;break}case Ee.VALUE:{if(kt.type===D.RIGHT_BRACKET)return yt.loc&&(Ct.loc=a(ft.loc.start.line,ft.loc.start.column,ft.loc.start.offset,kt.loc.end.line,kt.loc.end.column,kt.loc.end.offset,yt.source)),{value:Ct,index:Ve+1};kt.type===D.COMMA?(Lt=Ee.COMMA,Ve++):v(x.unexpectedToken(s(Oe,kt.loc.start.offset,kt.loc.end.offset),yt.source,kt.loc.start.line,kt.loc.start.column),Oe,yt.source,kt.loc.start.line,kt.loc.start.column);break}case Ee.COMMA:{var Hn=Kt(Oe,Be,Ve,yt);Ve=Hn.index,Ct.children.push(Hn.value),Lt=Ee.VALUE;break}}At(Oe,Be,yt)}function Tt(Oe,Be,Ve,yt){var ft=Be[Ve],Ct=null;switch(ft.type){case D.STRING:{Ct=Ge(Oe.slice(ft.loc.start.offset+1,ft.loc.end.offset-1));break}case D.NUMBER:{Ct=Number(ft.value);break}case D.TRUE:{Ct=!0;break}case D.FALSE:{Ct=!1;break}case D.NULL:{Ct=null;break}default:return null}var Lt={type:"Literal",value:Ct,raw:ft.value};return yt.loc&&(Lt.loc=ft.loc),{value:Lt,index:Ve+1}}function Kt(Oe,Be,Ve,yt){var ft=Be[Ve],Ct=Tt.apply(void 0,arguments)||De.apply(void 0,arguments)||at.apply(void 0,arguments);if(Ct)return Ct;v(x.unexpectedToken(s(Oe,ft.loc.start.offset,ft.loc.end.offset),yt.source,ft.loc.start.line,ft.loc.start.column),Oe,yt.source,ft.loc.start.line,ft.loc.start.column)}var Ke=(function(Oe,Be){Be=Object.assign({},qe,Be);var Ve=Me(Oe,Be);Ve.length===0&&At(Oe,Ve,Be);var yt=Kt(Oe,Ve,0,Be);if(yt.index===Ve.length)return yt.value;var ft=Ve[yt.index];v(x.unexpectedToken(s(Oe,ft.loc.start.offset,ft.loc.end.offset),Be.source,ft.loc.start.line,ft.loc.start.column),Oe,Be.source,ft.loc.start.line,ft.loc.start.column)});return Ke}))})(ww)),ww.exports}var h5e=A5e();const SU=Ou(h5e);function Ma(){var n="/home/runner/work/maputnik/maputnik/src/libs/json-path-to-position.ts",e="68bf9a3bcb07bd54be36702e0c3494ce552968d6",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/json-path-to-position.ts",statementMap:{0:{start:{line:2,column:2},end:{line:4,column:3}},1:{start:{line:3,column:4},end:{line:3,column:18}},2:{start:{line:5,column:2},end:{line:7,column:3}},3:{start:{line:6,column:4},end:{line:6,column:16}},4:{start:{line:8,column:2},end:{line:10,column:3}},5:{start:{line:9,column:4},end:{line:9,column:18}},6:{start:{line:11,column:14},end:{line:11,column:21}},7:{start:{line:12,column:2},end:{line:14,column:3}},8:{start:{line:13,column:4},end:{line:13,column:70}},9:{start:{line:15,column:18},end:{line:17,column:4}},10:{start:{line:16,column:4},end:{line:16,column:100}},11:{start:{line:18,column:2},end:{line:18,column:59}}},fnMap:{0:{name:"jsonPathToPosition",decl:{start:{line:1,column:16},end:{line:1,column:34}},loc:{start:{line:1,column:47},end:{line:19,column:1}},line:1},1:{name:"(anonymous_1)",decl:{start:{line:15,column:37},end:{line:15,column:38}},loc:{start:{line:15,column:52},end:{line:17,column:3}},line:15}},branchMap:{0:{loc:{start:{line:2,column:2},end:{line:4,column:3}},type:"if",locations:[{start:{line:2,column:2},end:{line:4,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:2},1:{loc:{start:{line:5,column:2},end:{line:7,column:3}},type:"if",locations:[{start:{line:5,column:2},end:{line:7,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:5},2:{loc:{start:{line:8,column:2},end:{line:10,column:3}},type:"if",locations:[{start:{line:8,column:2},end:{line:10,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:8},3:{loc:{start:{line:12,column:2},end:{line:14,column:3}},type:"if",locations:[{start:{line:12,column:2},end:{line:14,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:12},4:{loc:{start:{line:16,column:11},end:{line:16,column:99}},type:"binary-expr",locations:[{start:{line:16,column:11},end:{line:16,column:29}},{start:{line:16,column:33},end:{line:16,column:68}},{start:{line:16,column:72},end:{line:16,column:99}}],line:16}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},f:{0:0,1:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/json-path-to-position.ts"],names:[],mappings:"AAEO,gBAAS,mBAAmB,MAAgB,MAA6C;AAC9F,MAAI,CAAC,MAAM;AACT,WAAO;AAAA,EACT;AACA,MAAI,KAAK,SAAS,GAAG;AACnB,WAAO;AAAA,EACT;AACA,MAAI,EAAE,cAAc,OAAO;AACzB,WAAO;AAAA,EACT;AACA,QAAM,MAAM,KAAK,CAAC;AAClB,MAAI,IAAI,MAAM,UAAU,GAAG;AACzB,WAAO,mBAAmB,KAAK,MAAM,CAAC,GAAG,KAAK,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC;AAAA,EAClE;AACA,QAAM,UAAU,KAAK,SAAS,KAAK,CAAC,cAAc;AAChD,WACE,SAAS,aACT,UAAU,IAAI,SAAS,gBACvB,UAAU,IAAI,UAAU;AAAA,EAE5B,CAAC;AACD,SAAO,mBAAmB,KAAK,MAAM,CAAC,GAAG,SAAS,KAAK;AACzD;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"68bf9a3bcb07bd54be36702e0c3494ce552968d6"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Ma=function(){return s},s}Ma();function xR(n,e){if(Ma().f[0]++,Ma().s[0]++,e)Ma().b[0][1]++;else{Ma().b[0][0]++,Ma().s[1]++;return}if(Ma().s[2]++,n.length<1)return Ma().b[1][0]++,Ma().s[3]++,e;if(Ma().b[1][1]++,Ma().s[4]++,"children"in e)Ma().b[2][1]++;else{Ma().b[2][0]++,Ma().s[5]++;return}const t=(Ma().s[6]++,n[0]);if(Ma().s[7]++,t.match(/^[0-9]+$/))return Ma().b[3][0]++,Ma().s[8]++,xR(n.slice(1),e.children[+n[0]]);Ma().b[3][1]++;const i=(Ma().s[9]++,e.children.find(r=>(Ma().f[1]++,Ma().s[10]++,Ma().b[4][0]++,"key"in r&&(Ma().b[4][1]++,r.key.type==="Identifier")&&(Ma().b[4][2]++,r.key.value===t))));return Ma().s[11]++,xR(n.slice(1),i?.value)}function kn(){var n="/home/runner/work/maputnik/maputnik/src/libs/codemirror-editor-factory.ts",e="fed5a4f9200b6a5cf90f61b2c7f89f45308868c6",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/codemirror-editor-factory.ts",statementMap:{0:{start:{line:11,column:22},end:{line:11,column:24}},1:{start:{line:12,column:2},end:{line:37,column:3}},2:{start:{line:13,column:29},end:{line:13,column:34}},3:{start:{line:14,column:4},end:{line:36,column:5}},4:{start:{line:15,column:6},end:{line:20,column:9}},5:{start:{line:22,column:19},end:{line:22,column:81}},6:{start:{line:23,column:19},end:{line:23,column:48}},7:{start:{line:24,column:6},end:{line:27,column:7}},8:{start:{line:25,column:8},end:{line:25,column:67}},9:{start:{line:26,column:8},end:{line:26,column:17}},10:{start:{line:28,column:6},end:{line:35,column:7}},11:{start:{line:29,column:8},end:{line:34,column:11}},12:{start:{line:38,column:2},end:{line:38,column:21}},13:{start:{line:41,column:2},end:{line:70,column:4}},14:{start:{line:42,column:17},end:{line:42,column:42}},15:{start:{line:43,column:4},end:{line:68,column:5}},16:{start:{line:44,column:25},end:{line:44,column:41}},17:{start:{line:45,column:18},end:{line:45,column:33}},18:{start:{line:46,column:31},end:{line:56,column:8}},19:{start:{line:57,column:27},end:{line:65,column:8}},20:{start:{line:58,column:8},end:{line:58,column:74}},21:{start:{line:60,column:32},end:{line:60,column:83}},22:{start:{line:61,column:8},end:{line:64,column:10}},23:{start:{line:66,column:6},end:{line:66,column:67}},24:{start:{line:69,column:4},end:{line:69,column:14}},25:{start:{line:73,column:2},end:{line:89,column:4}},26:{start:{line:74,column:17},end:{line:74,column:42}},27:{start:{line:75,column:4},end:{line:87,column:5}},28:{start:{line:76,column:25},end:{line:76,column:41}},29:{start:{line:77,column:18},end:{line:77,column:33}},30:{start:{line:78,column:31},end:{line:78,column:59}},31:{start:{line:79,column:27},end:{line:84,column:8}},32:{start:{line:80,column:8},end:{line:83,column:10}},33:{start:{line:85,column:6},end:{line:85,column:67}},34:{start:{line:88,column:4},end:{line:88,column:14}},35:{start:{line:92,column:2},end:{line:102,column:4}},36:{start:{line:93,column:17},end:{line:93,column:42}},37:{start:{line:94,column:23},end:{line:94,column:39}},38:{start:{line:95,column:16},end:{line:95,column:31}},39:{start:{line:96,column:16},end:{line:96,column:61}},40:{start:{line:97,column:4},end:{line:99,column:5}},41:{start:{line:98,column:6},end:{line:98,column:16}},42:{start:{line:100,column:19},end:{line:100,column:28}},43:{start:{line:101,column:4},end:{line:101,column:59}},44:{start:{line:105,column:23},end:{line:105,column:31}},45:{start:{line:105,column:29},end:{line:105,column:31}},46:{start:{line:106,column:2},end:{line:119,column:3}},47:{start:{line:108,column:6},end:{line:108,column:51}},48:{start:{line:109,column:6},end:{line:109,column:12}},49:{start:{line:111,column:6},end:{line:111,column:51}},50:{start:{line:112,column:6},end:{line:112,column:12}},51:{start:{line:114,column:6},end:{line:114,column:66}},52:{start:{line:115,column:6},end:{line:115,column:12}},53:{start:{line:117,column:6},end:{line:117,column:32}},54:{start:{line:117,column:29},end:{line:117,column:31}},55:{start:{line:118,column:6},end:{line:118,column:12}},56:{start:{line:120,column:2},end:{line:156,column:5}},57:{start:{line:133,column:8},end:{line:137,column:9}},58:{start:{line:134,column:22},end:{line:134,column:38}},59:{start:{line:135,column:24},end:{line:135,column:38}},60:{start:{line:136,column:10},end:{line:136,column:32}},61:{start:{line:138,column:8},end:{line:144,column:9}},62:{start:{line:139,column:10},end:{line:143,column:11}},63:{start:{line:140,column:12},end:{line:140,column:28}},64:{start:{line:142,column:12},end:{line:142,column:27}},65:{start:{line:148,column:27},end:{line:148,column:50}},66:{start:{line:149,column:8},end:{line:151,column:9}},67:{start:{line:150,column:10},end:{line:150,column:28}},68:{start:{line:152,column:8},end:{line:152,column:36}}},fnMap:{0:{name:"getDiagnosticsFromExpressionErrors",decl:{start:{line:10,column:9},end:{line:10,column:43}},loc:{start:{line:10,column:57},end:{line:39,column:1}},line:10},1:{name:"createMaplibreLayerLinter",decl:{start:{line:40,column:9},end:{line:40,column:34}},loc:{start:{line:40,column:37},end:{line:71,column:1}},line:40},2:{name:"(anonymous_2)",decl:{start:{line:41,column:9},end:{line:41,column:10}},loc:{start:{line:41,column:19},end:{line:70,column:3}},line:41},3:{name:"(anonymous_3)",decl:{start:{line:57,column:51},end:{line:57,column:52}},loc:{start:{line:57,column:60},end:{line:59,column:7}},line:57},4:{name:"(anonymous_4)",decl:{start:{line:59,column:13},end:{line:59,column:14}},loc:{start:{line:59,column:22},end:{line:65,column:7}},line:59},5:{name:"createMaplibreStyleLinter",decl:{start:{line:72,column:9},end:{line:72,column:34}},loc:{start:{line:72,column:37},end:{line:90,column:1}},line:72},6:{name:"(anonymous_6)",decl:{start:{line:73,column:9},end:{line:73,column:10}},loc:{start:{line:73,column:19},end:{line:89,column:3}},line:73},7:{name:"(anonymous_7)",decl:{start:{line:79,column:48},end:{line:79,column:49}},loc:{start:{line:79,column:57},end:{line:84,column:7}},line:79},8:{name:"createMaplibreExpressionLinter",decl:{start:{line:91,column:9},end:{line:91,column:39}},loc:{start:{line:91,column:46},end:{line:103,column:1}},line:91},9:{name:"(anonymous_9)",decl:{start:{line:92,column:9},end:{line:92,column:10}},loc:{start:{line:92,column:19},end:{line:102,column:3}},line:92},10:{name:"createEditor",decl:{start:{line:104,column:16},end:{line:104,column:28}},loc:{start:{line:104,column:36},end:{line:157,column:1}},line:104},11:{name:"(anonymous_11)",decl:{start:{line:105,column:23},end:{line:105,column:24}},loc:{start:{line:105,column:29},end:{line:105,column:31}},line:105},12:{name:"(anonymous_12)",decl:{start:{line:117,column:23},end:{line:117,column:24}},loc:{start:{line:117,column:29},end:{line:117,column:31}},line:117},13:{name:"(anonymous_13)",decl:{start:{line:132,column:35},end:{line:132,column:36}},loc:{start:{line:132,column:47},end:{line:145,column:7}},line:132},14:{name:"(anonymous_14)",decl:{start:{line:147,column:13},end:{line:147,column:14}},loc:{start:{line:147,column:23},end:{line:153,column:7}},line:147}},branchMap:{0:{loc:{start:{line:14,column:4},end:{line:36,column:5}},type:"if",locations:[{start:{line:14,column:4},end:{line:36,column:5}},{start:{line:21,column:11},end:{line:36,column:5}}],line:14},1:{loc:{start:{line:17,column:12},end:{line:17,column:44}},type:"cond-expr",locations:[{start:{line:17,column:22},end:{line:17,column:40}},{start:{line:17,column:43},end:{line:17,column:44}}],line:17},2:{loc:{start:{line:24,column:6},end:{line:27,column:7}},type:"if",locations:[{start:{line:24,column:6},end:{line:27,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:24},3:{loc:{start:{line:28,column:6},end:{line:35,column:7}},type:"if",locations:[{start:{line:28,column:6},end:{line:35,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:28},4:{loc:{start:{line:97,column:4},end:{line:99,column:5}},type:"if",locations:[{start:{line:97,column:4},end:{line:99,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:97},5:{loc:{start:{line:106,column:2},end:{line:119,column:3}},type:"switch",locations:[{start:{line:107,column:4},end:{line:109,column:12}},{start:{line:110,column:4},end:{line:112,column:12}},{start:{line:113,column:4},end:{line:115,column:12}},{start:{line:116,column:4},end:{line:118,column:12}}],line:106},6:{loc:{start:{line:133,column:8},end:{line:137,column:9}},type:"if",locations:[{start:{line:133,column:8},end:{line:137,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:133},7:{loc:{start:{line:138,column:8},end:{line:144,column:9}},type:"if",locations:[{start:{line:138,column:8},end:{line:144,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:138},8:{loc:{start:{line:139,column:10},end:{line:143,column:11}},type:"if",locations:[{start:{line:139,column:10},end:{line:143,column:11}},{start:{line:141,column:17},end:{line:143,column:11}}],line:139},9:{loc:{start:{line:149,column:8},end:{line:151,column:9}},type:"if",locations:[{start:{line:149,column:8},end:{line:151,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:149}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0,0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/codemirror-editor-factory.ts"],names:[],mappings:"AAAA,SAAS,kBAAkB;AAC3B,SAAS,kBAAkB;AAC3B,SAAS,aAAa,mBAAmB;AACzC,SAAS,MAAM,uBAAuB;AACtC,SAAS,QAAQ,kBAAmC;AACpD,SAAS,eAAe;AACxB,SAAS,YAA6C,wBAAwB;AAC9E,OAAO,eAAsD;AAC7D,SAAS,0BAA0B;AASnC,SAAS,mCAAmC,QAAuB,KAA+B;AAChG,QAAM,cAA4B,CAAC;AACnC,aAAW,SAAS,QAAQ;AAC1B,UAAM,EAAC,KAAK,QAAO,IAAI;AACvB,QAAI,CAAC,KAAK;AACR,kBAAY,KAAK;AAAA,QACf,MAAM;AAAA,QACN,IAAI,IAAI,MAAM,IAAI,IAAI,IAAI,SAAS;AAAA,QACnC,UAAU;AAAA,QACV;AAAA,MACF,CAAC;AAAA,IACH,OAAO;AACL,YAAM,OAAO,IAAI,QAAQ,YAAY,EAAE,EAAE,MAAM,WAAW,EAAE,OAAO,OAAO;AAC1E,YAAM,OAAO,mBAAmB,MAAM,GAAG;AACzC,UAAI,CAAC,MAAM;AACT,gBAAQ,KAAK,uCAAuC,KAAK;AACzD;AAAA,MACF;AACA,UAAI,KAAK,KAAK;AACZ,oBAAY,KAAK;AAAA,UACf,MAAM,KAAK,IAAI,MAAM;AAAA,UACrB,IAAI,KAAK,IAAI,IAAI;AAAA,UACjB,UAAU;AAAA,UACV;AAAA,QACF,CAAC;AAAA,MACH;AAAA,IACF;AAAA,EACF;AACA,SAAO;AACT;AAEA,SAAS,4BAA4B;AACnC,SAAO,CAAC,SAAqB;AAC3B,UAAM,OAAO,KAAK,MAAM,IAAI,SAAS;AAErC,QAAI;AAEF,YAAM,aAAa,KAAK,MAAM,IAAI;AAClC,YAAM,MAAM,UAAU,IAAI;AAG1B,YAAM,mBAAmB,iBAAiB;AAAA,QACxC,WAAW;AAAA,QACX,QAAQ;AAAA,QACR,YAAY,CAAC;AAAA,QACb,WAAW,CAAC;AAAA,QACZ,UAAU;AAAA,QACV,UAAU;AAAA,QACV,UAAU;AAAA,UACR;AAAA,QACF;AAAA,MACF,CAAC;AAED,YAAM,eAAe,iBAClB,OAAO,SAAO;AAEb,eAAO,CAAC,IAAI,QAAQ,MAAM,sCAAsC;AAAA,MAClE,CAAC,EACA,IAAI,SAAO;AAEV,cAAM,kBAAkB,IAAI,QAAQ,QAAQ,iBAAiB,EAAE,EAAE,MAAM,GAAG;AAC1E,eAAO;AAAA,UACL,KAAK,gBAAgB,CAAC;AAAA,UACtB,SAAS,gBAAgB,CAAC;AAAA,QAC5B;AAAA,MACF,CAAC;AACH,aAAO,mCAAmC,cAAc,GAAG;AAAA,IAC7D,QAAQ;AAAA,IAER;AACA,WAAO,CAAC;AAAA,EACV;AACF;AAEA,SAAS,4BAA4B;AACnC,SAAO,CAAC,SAAqB;AAC3B,UAAM,OAAO,KAAK,MAAM,IAAI,SAAS;AAErC,QAAI;AAEF,YAAM,aAAa,KAAK,MAAM,IAAI;AAClC,YAAM,MAAM,UAAU,IAAI;AAG1B,YAAM,mBAAmB,iBAAiB,UAAU;AACpD,YAAM,eAAe,iBAAiB,IAAI,SAAO;AAC/C,eAAO;AAAA,UACL,KAAK,IAAI,QAAQ,MAAM,GAAG,EAAE,CAAC;AAAA,UAC7B,SAAS,IAAI;AAAA,QACf;AAAA,MACF,CAAC;AACD,aAAO,mCAAmC,cAAc,GAAG;AAAA,IAC7D,QAAQ;AAAA,IAER;AACA,WAAO,CAAC;AAAA,EACV;AACF;AAEA,SAAS,+BAA+B,MAAmC;AACzE,SAAO,CAAC,SAAqB;AAC3B,UAAM,OAAO,KAAK,MAAM,IAAI,SAAS;AACrC,UAAM,aAAa,KAAK,MAAM,IAAI;AAClC,UAAM,MAAM,UAAU,IAAI;AAC1B,UAAM,MAAM,WAAW,iBAAiB,YAAY,IAAI;AACxD,QAAI,KAAK,WAAW,SAAS;AAC3B,aAAO,CAAC;AAAA,IACV;AACA,UAAM,SAAS,IAAI;AACnB,WAAO,mCAAmC,QAAQ,GAAG;AAAA,EACvD;AACF;AAEO,gBAAS,aAAa,OAQd;AACb,MAAI,iBAAqD,MAAM,CAAC;AAChE,UAAQ,MAAM,UAAU;AAAA,IACtB,KAAK;AACH,uBAAiB,0BAA0B;AAC3C;AAAA,IACF,KAAK;AACH,uBAAiB,0BAA0B;AAC3C;AAAA,IACF,KAAK;AACH,uBAAiB,+BAA+B,MAAM,IAAI;AAC1D;AAAA,IACF,KAAK;AACH,uBAAiB,MAAM,CAAC;AACxB;AAAA,EACJ;AAEA,SAAO,IAAI,WAAW;AAAA,IACpB,KAAK,MAAM;AAAA,IACX,YAAY;AAAA,MACV;AAAA,MACA,KAAK;AAAA,MACL;AAAA,MACA,IAAI,YAAY,EAAE,GAAG,YAAY,QAAQ,GAAG,CAAC,CAAC;AAAA,MAC9C,WAAW,MAAM;AAAA,QACf,KAAK;AAAA,UACH,UAAU;AAAA,QACZ;AAAA,MACF,CAAC;AAAA,MACD,WAAW,eAAe,GAAG,CAAC,WAAW;AACvC,YAAI,OAAO,YAAY;AACrB,gBAAM,MAAM,OAAO,MAAM;AACzB,gBAAM,QAAQ,IAAI,SAAS;AAC3B,gBAAM,SAAS,KAAK;AAAA,QACtB;AACA,YAAI,OAAO,cAAc;AACvB,cAAI,OAAO,KAAK,UAAU;AACxB,kBAAM,QAAQ;AAAA,UAChB,OAAO;AACL,kBAAM,OAAO;AAAA,UACf;AAAA,QACF;AAAA,MACF,CAAC;AAAA,MACD,WAAW;AAAA,MACX,OAAO,CAAC,SAAqB;AAC3B,cAAM,aAAa,gBAAgB,EAAE,IAAI;AACzC,YAAI,WAAW,SAAS,GAAG;AACzB,iBAAO;AAAA,QACT;AACA,eAAO,eAAe,IAAI;AAAA,MAC5B,CAAC;AAAA,IACH;AAAA,IACA,QAAQ,MAAM;AAAA,EAChB,CAAC;AACH;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"fed5a4f9200b6a5cf90f61b2c7f89f45308868c6"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return kn=function(){return s},s}kn();function EU(n,e){kn().f[0]++;const t=(kn().s[0]++,[]);kn().s[1]++;for(const i of n){const{key:r,message:o}=(kn().s[2]++,i);if(kn().s[3]++,!r)kn().b[0][0]++,kn().s[4]++,t.push({from:0,to:e.loc?(kn().b[1][0]++,e.loc.end.offset):(kn().b[1][1]++,0),severity:"error",message:o});else{kn().b[0][1]++;const s=(kn().s[5]++,r.replace(/^\[|\]$/g,"").split(/\.|[[\]]+/).filter(Boolean)),a=(kn().s[6]++,xR(s,e));if(kn().s[7]++,a)kn().b[2][1]++;else{kn().b[2][0]++,kn().s[8]++,console.warn("Something went wrong parsing error:",i),kn().s[9]++;continue}kn().s[10]++,a.loc?(kn().b[3][0]++,kn().s[11]++,t.push({from:a.loc.start.offset,to:a.loc.end.offset,severity:"error",message:o})):kn().b[3][1]++}}return kn().s[12]++,t}function d5e(){return kn().f[1]++,kn().s[13]++,n=>{kn().f[2]++;const e=(kn().s[14]++,n.state.doc.toString());kn().s[15]++;try{const t=(kn().s[16]++,JSON.parse(e)),i=(kn().s[17]++,SU(e)),r=(kn().s[18]++,wd({version:8,name:"Empty Style",metadata:{},sources:{},sprite:"",glyphs:"https://example.com/glyphs/{fontstack}/{range}.pbf",layers:[t]})),o=(kn().s[19]++,r.filter(s=>(kn().f[3]++,kn().s[20]++,!s.message.match(/^layers\[0\]: source ".*" not found$/))).map(s=>{kn().f[4]++;const a=(kn().s[21]++,s.message.replace(/^layers\[0\]./,"").split(":"));return kn().s[22]++,{key:a[0],message:a[1]}}));return kn().s[23]++,EU(o,i)}catch{}return kn().s[24]++,[]}}function f5e(){return kn().f[5]++,kn().s[25]++,n=>{kn().f[6]++;const e=(kn().s[26]++,n.state.doc.toString());kn().s[27]++;try{const t=(kn().s[28]++,JSON.parse(e)),i=(kn().s[29]++,SU(e)),r=(kn().s[30]++,wd(t)),o=(kn().s[31]++,r.map(s=>(kn().f[7]++,kn().s[32]++,{key:s.message.split(":")[0],message:s.message})));return kn().s[33]++,EU(o,i)}catch{}return kn().s[34]++,[]}}function p5e(n){return kn().f[8]++,kn().s[35]++,e=>{kn().f[9]++;const t=(kn().s[36]++,e.state.doc.toString()),i=(kn().s[37]++,JSON.parse(t)),r=(kn().s[38]++,SU(t)),o=(kn().s[39]++,vAe.createExpression(i,n));if(kn().s[40]++,o?.result!=="error")return kn().b[4][0]++,kn().s[41]++,[];kn().b[4][1]++;const s=(kn().s[42]++,o.value);return kn().s[43]++,EU(s,r)}}function m5e(n){kn().f[10]++,kn().s[44]++;let e=()=>(kn().f[11]++,kn().s[45]++,[]);switch(kn().s[46]++,n.lintType){case"style":kn().b[5][0]++,kn().s[47]++,e=f5e(),kn().s[48]++;break;case"layer":kn().b[5][1]++,kn().s[49]++,e=d5e(),kn().s[50]++;break;case"expression":kn().b[5][2]++,kn().s[51]++,e=p5e(n.spec),kn().s[52]++;break;case"json":kn().b[5][3]++,kn().s[53]++,e=()=>(kn().f[12]++,kn().s[54]++,[]),kn().s[55]++;break}return kn().s[56]++,new Mi({doc:n.value,extensions:[KMe,XMe(),u5e,new gM().of(fs.tabSize.of(2)),Mi.theme({"&":{fontSize:"9pt"}}),Mi.updateListener.of(t=>{if(kn().f[13]++,kn().s[57]++,t.docChanged){kn().b[6][0]++;const i=(kn().s[58]++,t.state.doc),r=(kn().s[59]++,i.toString());kn().s[60]++,n.onChange(r)}else kn().b[6][1]++;kn().s[61]++,t.focusChanged?(kn().b[7][0]++,kn().s[62]++,t.view.hasFocus?(kn().b[8][0]++,kn().s[63]++,n.onFocus()):(kn().b[8][1]++,kn().s[64]++,n.onBlur())):kn().b[7][1]++}),UMe(),EMe(t=>{kn().f[14]++;const i=(kn().s[65]++,$Me()(t));return kn().s[66]++,i.length>0?(kn().b[9][0]++,kn().s[67]++,i):(kn().b[9][1]++,kn().s[68]++,e(t))})],parent:n.parent})}function mi(){var n="/home/runner/work/maputnik/maputnik/src/components/InputJson.tsx",e="cf24112519e06488e6bd4c982a8e685ac2a0e6cd",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputJson.tsx",statementMap:{0:{start:{line:8,column:24},end:{line:13,column:3}},1:{start:{line:15,column:8},end:{line:15,column:12}},2:{start:{line:16,column:22},end:{line:16,column:27}},3:{start:{line:18,column:4},end:{line:18,column:17}},4:{start:{line:19,column:4},end:{line:22,column:6}},5:{start:{line:25,column:4},end:{line:25,column:63}},6:{start:{line:28,column:4},end:{line:36,column:7}},7:{start:{line:32,column:27},end:{line:32,column:47}},8:{start:{line:33,column:21},end:{line:33,column:35}},9:{start:{line:34,column:20},end:{line:34,column:33}},10:{start:{line:38,column:12},end:{line:43,column:3}},11:{start:{line:39,column:4},end:{line:39,column:49}},12:{start:{line:39,column:28},end:{line:39,column:49}},13:{start:{line:40,column:4},end:{line:42,column:7}},14:{start:{line:44,column:11},end:{line:49,column:3}},15:{start:{line:45,column:4},end:{line:45,column:47}},16:{start:{line:45,column:27},end:{line:45,column:47}},17:{start:{line:46,column:4},end:{line:48,column:7}},18:{start:{line:51,column:4},end:{line:63,column:5}},19:{start:{line:52,column:6},end:{line:52,column:36}},20:{start:{line:53,column:31},end:{line:53,column:57}},21:{start:{line:54,column:6},end:{line:62,column:9}},22:{start:{line:65,column:13},end:{line:89,column:3}},23:{start:{line:66,column:4},end:{line:72,column:5}},24:{start:{line:67,column:6},end:{line:67,column:37}},25:{start:{line:68,column:6},end:{line:70,column:9}},26:{start:{line:71,column:6},end:{line:71,column:13}},27:{start:{line:73,column:20},end:{line:73,column:51}},28:{start:{line:74,column:4},end:{line:85,column:5}},29:{start:{line:76,column:6},end:{line:81,column:7}},30:{start:{line:77,column:8},end:{line:77,column:42}},31:{start:{line:79,column:8},end:{line:79,column:19}},32:{start:{line:80,column:8},end:{line:80,column:27}},33:{start:{line:82,column:6},end:{line:84,column:7}},34:{start:{line:83,column:8},end:{line:83,column:66}},35:{start:{line:83,column:33},end:{line:83,column:66}},36:{start:{line:86,column:4},end:{line:88,column:7}},37:{start:{line:91,column:4},end:{line:99,column:9}},38:{start:{line:96,column:10},end:{line:96,column:24}},39:{start:{line:102,column:18},end:{line:102,column:54}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:13},end:{line:9,column:14}},loc:{start:{line:9,column:19},end:{line:10,column:5}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:11,column:12},end:{line:11,column:13}},loc:{start:{line:11,column:18},end:{line:12,column:5}},line:11},2:{name:"(anonymous_2)",decl:{start:{line:17,column:2},end:{line:17,column:3}},loc:{start:{line:17,column:21},end:{line:23,column:3}},line:17},3:{name:"(anonymous_3)",decl:{start:{line:24,column:2},end:{line:24,column:3}},loc:{start:{line:24,column:22},end:{line:26,column:3}},line:24},4:{name:"(anonymous_4)",decl:{start:{line:27,column:2},end:{line:27,column:3}},loc:{start:{line:27,column:22},end:{line:37,column:3}},line:27},5:{name:"(anonymous_5)",decl:{start:{line:32,column:16},end:{line:32,column:17}},loc:{start:{line:32,column:27},end:{line:32,column:47}},line:32},6:{name:"(anonymous_6)",decl:{start:{line:33,column:15},end:{line:33,column:16}},loc:{start:{line:33,column:21},end:{line:33,column:35}},line:33},7:{name:"(anonymous_7)",decl:{start:{line:34,column:14},end:{line:34,column:15}},loc:{start:{line:34,column:20},end:{line:34,column:33}},line:34},8:{name:"(anonymous_8)",decl:{start:{line:38,column:12},end:{line:38,column:13}},loc:{start:{line:38,column:18},end:{line:43,column:3}},line:38},9:{name:"(anonymous_9)",decl:{start:{line:44,column:11},end:{line:44,column:12}},loc:{start:{line:44,column:17},end:{line:49,column:3}},line:44},10:{name:"(anonymous_10)",decl:{start:{line:50,column:2},end:{line:50,column:3}},loc:{start:{line:50,column:32},end:{line:64,column:3}},line:50},11:{name:"(anonymous_11)",decl:{start:{line:65,column:13},end:{line:65,column:14}},loc:{start:{line:65,column:21},end:{line:89,column:3}},line:65},12:{name:"(anonymous_12)",decl:{start:{line:90,column:2},end:{line:90,column:3}},loc:{start:{line:90,column:11},end:{line:100,column:3}},line:90},13:{name:"(anonymous_13)",decl:{start:{line:95,column:13},end:{line:95,column:14}},loc:{start:{line:95,column:21},end:{line:97,column:9}},line:95}},branchMap:{0:{loc:{start:{line:31,column:16},end:{line:31,column:46}},type:"binary-expr",locations:[{start:{line:31,column:16},end:{line:31,column:35}},{start:{line:31,column:39},end:{line:31,column:46}}],line:31},1:{loc:{start:{line:39,column:4},end:{line:39,column:49}},type:"if",locations:[{start:{line:39,column:4},end:{line:39,column:49}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:39},2:{loc:{start:{line:45,column:4},end:{line:45,column:47}},type:"if",locations:[{start:{line:45,column:4},end:{line:45,column:47}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:45},3:{loc:{start:{line:51,column:4},end:{line:63,column:5}},type:"if",locations:[{start:{line:51,column:4},end:{line:63,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:51},4:{loc:{start:{line:51,column:8},end:{line:51,column:69}},type:"binary-expr",locations:[{start:{line:51,column:8},end:{line:51,column:29}},{start:{line:51,column:33},end:{line:51,column:69}}],line:51},5:{loc:{start:{line:66,column:4},end:{line:72,column:5}},type:"if",locations:[{start:{line:66,column:4},end:{line:72,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:66},6:{loc:{start:{line:74,column:4},end:{line:85,column:5}},type:"if",locations:[{start:{line:74,column:4},end:{line:85,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:74},7:{loc:{start:{line:82,column:6},end:{line:84,column:7}},type:"if",locations:[{start:{line:82,column:6},end:{line:84,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:82},8:{loc:{start:{line:83,column:8},end:{line:83,column:66}},type:"if",locations:[{start:{line:83,column:8},end:{line:83,column:66}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:83}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputJson.tsx"],names:[],mappings:"AAwHM;AAxHN,OAAO,WAAW;AAClB,OAAO,gBAAgB;AACvB,SAA+B,uBAAuB;AAGtD,OAAO,qBAAqB;AAE5B,SAAQ,oBAAmB;AAmB3B,MAAM,0BAA0B,MAAM,UAAkD;AAAA,EACtF,OAAO,eAAe;AAAA,IACpB,SAAS,MAAM;AAAA,IAAC;AAAA,IAChB,QAAQ,MAAM;AAAA,IAAC;AAAA,EACjB;AAAA,EACA;AAAA,EACA,MAA6B;AAAA,EAC7B,oBAA6B;AAAA,EAE7B,YAAY,OAA+B;AACzC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,WAAW;AAAA,MACX,WAAW,KAAK,cAAc,KAAK,MAAM,KAAK;AAAA,IAChD;AAAA,EACF;AAAA,EAEA,cAAc,MAAW;AACvB,WAAO,gBAAgB,MAAM,EAAC,QAAQ,GAAG,WAAW,GAAE,CAAC;AAAA,EACzD;AAAA,EAEA,oBAAqB;AACnB,SAAK,QAAQ,aAAa;AAAA,MACxB,QAAQ,KAAK;AAAA,MACb,OAAO,KAAK,cAAc,KAAK,MAAM,KAAK;AAAA,MAC1C,UAAU,KAAK,MAAM,YAAY;AAAA,MACjC,UAAU,CAAC,UAAiB,KAAK,SAAS,KAAK;AAAA,MAC/C,SAAS,MAAM,KAAK,QAAQ;AAAA,MAC5B,QAAQ,MAAM,KAAK,OAAO;AAAA,MAC1B,MAAM,KAAK,MAAM;AAAA,IACnB,CAAC;AAAA,EACH;AAAA,EAEA,UAAU,MAAM;AACd,QAAI,KAAK,MAAM,QAAS,MAAK,MAAM,QAAQ;AAC3C,SAAK,SAAS;AAAA,MACZ,WAAW;AAAA,IACb,CAAC;AAAA,EACH;AAAA,EAEA,SAAS,MAAM;AACb,QAAI,KAAK,MAAM,OAAQ,MAAK,MAAM,OAAO;AACzC,SAAK,SAAS;AAAA,MACZ,WAAW;AAAA,IACb,CAAC;AAAA,EACH;AAAA,EAEA,mBAAmB,WAA2B;AAC5C,QAAI,CAAC,KAAK,MAAM,aAAa,UAAU,UAAU,KAAK,MAAM,OAAO;AACjE,WAAK,oBAAoB;AACzB,YAAM,mBAAmB,KAAK,MAAO,MAAM;AAC3C,WAAK,MAAO,SAAS;AAAA,QACnB,SAAS;AAAA,UACP,MAAM;AAAA,UACN,IAAI,KAAK,MAAO,MAAM,IAAI;AAAA,UAC1B,QAAQ,KAAK,cAAc,KAAK,MAAM,KAAK;AAAA,QAC7C;AAAA,QACA,WAAW;AAAA,QACX,gBAAgB;AAAA,MAClB,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,WAAW,CAAC,OAAgB;AAC1B,QAAI,KAAK,mBAAmB;AAC1B,WAAK,oBAAoB;AACzB,WAAK,SAAS;AAAA,QACZ,WAAW,KAAK,MAAO,MAAM,IAAI,SAAS;AAAA,MAC5C,CAAC;AACD;AAAA,IACF;AACA,UAAM,UAAU,KAAK,MAAO,MAAM,IAAI,SAAS;AAE/C,QAAI,KAAK,MAAM,cAAc,SAAS;AACpC,UAAI,aAAa;AACjB,UAAI;AACF,sBAAc,KAAK,MAAM,OAAO;AAAA,MAClC,SAAQ,MAAM;AACZ,cAAM;AACN,gBAAQ,KAAK,IAAI;AAAA,MACnB;AAEA,UAAI,CAAC,KAAK;AACR,YAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,WAAW;AAAA,MAC1D;AAAA,IACF;AAEA,SAAK,SAAS;AAAA,MACZ,WAAW;AAAA,IACb,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,WAAO,oBAAC,SAAI,WAAU,eAAc,eAAY,eAAc,eAAY,QAAO,OAAO,EAAC,QAAQ,OAAM,GACrG;AAAA,MAAC;AAAA;AAAA,QACC,WAAW,WAAW,wBAAwB,KAAK,MAAM,SAAS;AAAA,QAClE,KAAK,CAAC,OAAO;AAAC,eAAK,MAAM;AAAA,QAAG;AAAA;AAAA,IAC9B,GACF;AAAA,EACF;AACF;AAEA,MAAM,YAAY,gBAAgB,EAAE,iBAAiB;AACrD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"cf24112519e06488e6bd4c982a8e685ac2a0e6cd"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return mi=function(){return s},s}mi();class g5e extends On.Component{static defaultProps=(mi().s[0]++,{onFocus:()=>{mi().f[0]++},onBlur:()=>{mi().f[1]++}});_view;_el=(mi().s[1]++,null);_cancelNextChange=(mi().s[2]++,!1);constructor(e){mi().f[2]++,mi().s[3]++,super(e),mi().s[4]++,this.state={isEditing:!1,prevValue:this.getPrettyJson(this.props.value)}}getPrettyJson(e){return mi().f[3]++,mi().s[5]++,Fbe(e,{indent:2,maxLength:40})}componentDidMount(){mi().f[4]++,mi().s[6]++,this._view=m5e({parent:this._el,value:this.getPrettyJson(this.props.value),lintType:(mi().b[0][0]++,this.props.lintType||(mi().b[0][1]++,"layer")),onChange:e=>(mi().f[5]++,mi().s[7]++,this.onChange(e)),onFocus:()=>(mi().f[6]++,mi().s[8]++,this.onFocus()),onBlur:()=>(mi().f[7]++,mi().s[9]++,this.onBlur()),spec:this.props.spec})}onFocus=(mi().s[10]++,()=>{mi().f[8]++,mi().s[11]++,this.props.onFocus?(mi().b[1][0]++,mi().s[12]++,this.props.onFocus()):mi().b[1][1]++,mi().s[13]++,this.setState({isEditing:!0})});onBlur=(mi().s[14]++,()=>{mi().f[9]++,mi().s[15]++,this.props.onBlur?(mi().b[2][0]++,mi().s[16]++,this.props.onBlur()):mi().b[2][1]++,mi().s[17]++,this.setState({isEditing:!1})});componentDidUpdate(e){if(mi().f[10]++,mi().s[18]++,mi().b[4][0]++,!this.state.isEditing&&(mi().b[4][1]++,e.value!==this.props.value)){mi().b[3][0]++,mi().s[19]++,this._cancelNextChange=!0;const t=(mi().s[20]++,this._view.state.selection);mi().s[21]++,this._view.dispatch({changes:{from:0,to:this._view.state.doc.length,insert:this.getPrettyJson(this.props.value)},selection:t,scrollIntoView:!0})}else mi().b[3][1]++}onChange=(mi().s[22]++,e=>{if(mi().f[11]++,mi().s[23]++,this._cancelNextChange){mi().b[5][0]++,mi().s[24]++,this._cancelNextChange=!1,mi().s[25]++,this.setState({prevValue:this._view.state.doc.toString()}),mi().s[26]++;return}else mi().b[5][1]++;const t=(mi().s[27]++,this._view.state.doc.toString());if(mi().s[28]++,this.state.prevValue!==t){mi().b[6][0]++;let i,r;mi().s[29]++;try{mi().s[30]++,i=JSON.parse(t)}catch(o){mi().s[31]++,r=o,mi().s[32]++,console.warn(o)}mi().s[33]++,r?mi().b[7][1]++:(mi().b[7][0]++,mi().s[34]++,this.props.onChange?(mi().b[8][0]++,mi().s[35]++,this.props.onChange(i)):mi().b[8][1]++)}else mi().b[6][1]++;mi().s[36]++,this.setState({prevValue:t})});render(){return mi().f[12]++,mi().s[37]++,te.jsx("div",{className:"json-editor","data-wd-key":"json-editor","aria-hidden":"true",style:{cursor:"text"},children:te.jsx("div",{className:f0("codemirror-container",this.props.className),ref:e=>{mi().f[13]++,mi().s[38]++,this._el=e}})})}}const Gne=(mi().s[39]++,Po()(g5e));function Ox(){var n="/home/runner/work/maputnik/maputnik/src/components/CodeEditor.tsx",e="f03c466cea7ee39fb10a8d84cec1e620e7e892a5",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/CodeEditor.tsx",statementMap:{0:{start:{line:4,column:27},end:{line:18,column:1}},1:{start:{line:5,column:2},end:{line:17,column:7}},2:{start:{line:19,column:19},end:{line:19,column:56}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:27},end:{line:4,column:28}},loc:{start:{line:4,column:38},end:{line:18,column:1}},line:4}},branchMap:{},s:{0:0,1:0,2:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/CodeEditor.tsx"],names:[],mappings:"AAcS,mBACL,KADK;AAdT,OAAO,eAAe;AAEtB,SAAS,uBAA6C;AAUtD,MAAM,qBAAgD,CAAC,UAAU;AAE/D,SAAO,iCACL;AAAA,wBAAC,YAAO,WAAU,mBAAkB,SAAS,MAAM,SAAS,cAAY,MAAM,EAAE,OAAO,GAAG,OAAO,EAAE,UAAU,UAAU,KAAK,KAAK,QAAQ,EAAE,GAAI,gBAAM,EAAE,2BAA2B,GAAE;AAAA,IACpL;AAAA,MAAC;AAAA;AAAA,QACC,UAAS;AAAA,QACT,OAAO,MAAM;AAAA,QACb,UAAU,MAAM;AAAA,QAChB,WAAW;AAAA;AAAA,IACb;AAAA,IAAE;AAAA,KACJ;AACF;AAEA,MAAM,aAAa,gBAAgB,EAAE,kBAAkB;AAEvD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f03c466cea7ee39fb10a8d84cec1e620e7e892a5"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Ox=function(){return s},s}Ox();Ox().s[0]++;const y5e=n=>(Ox().f[0]++,Ox().s[1]++,te.jsxs(te.Fragment,{children:[te.jsx("button",{className:"maputnik-button",onClick:n.onClose,"aria-label":n.t("Close"),style:{position:"sticky",top:"0",zIndex:1},children:n.t("Click to close the editor")}),te.jsx(Gne,{lintType:"style",value:n.value,onChange:n.onChange,className:"maputnik-code-editor"}),";"]})),v5e=(Ox().s[2]++,Po()(y5e));var X2=XR();function b5e(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return Mt.useMemo(()=>i=>{e.forEach(r=>r(i))},e)}const M6=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Yx(n){const e=Object.prototype.toString.call(n);return e==="[object Window]"||e==="[object global]"}function BU(n){return"nodeType"in n}function Sd(n){var e,t;return n?Yx(n)?n:BU(n)&&(e=(t=n.ownerDocument)==null?void 0:t.defaultView)!=null?e:window:window}function OU(n){const{Document:e}=Sd(n);return n instanceof e}function SM(n){return Yx(n)?!1:n instanceof Sd(n).HTMLElement}function Wne(n){return n instanceof Sd(n).SVGElement}function qx(n){return n?Yx(n)?n.document:BU(n)?OU(n)?n:SM(n)||Wne(n)?n.ownerDocument:document:document:document}const u0=M6?Mt.useLayoutEffect:Mt.useEffect;function IU(n){const e=Mt.useRef(n);return u0(()=>{e.current=n}),Mt.useCallback(function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return e.current==null?void 0:e.current(...i)},[])}function C5e(){const n=Mt.useRef(null),e=Mt.useCallback((i,r)=>{n.current=setInterval(i,r)},[]),t=Mt.useCallback(()=>{n.current!==null&&(clearInterval(n.current),n.current=null)},[]);return[e,t]}function S4(n,e){e===void 0&&(e=[n]);const t=Mt.useRef(n);return u0(()=>{t.current!==n&&(t.current=n)},e),t}function EM(n,e){const t=Mt.useRef();return Mt.useMemo(()=>{const i=n(t.current);return t.current=i,i},[...e])}function QS(n){const e=IU(n),t=Mt.useRef(null),i=Mt.useCallback(r=>{r!==t.current&&e?.(r,t.current),t.current=r},[]);return[t,i]}function MR(n){const e=Mt.useRef();return Mt.useEffect(()=>{e.current=n},[n]),e.current}let n8={};function BM(n,e){return Mt.useMemo(()=>{if(e)return e;const t=n8[n]==null?0:n8[n]+1;return n8[n]=t,n+"-"+t},[n,e])}function Qne(n){return function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];return i.reduce((o,s)=>{const a=Object.entries(s);for(const[c,h]of a){const m=o[c];m!=null&&(o[c]=m+n*h)}return o},{...e})}}const tx=Qne(1),YS=Qne(-1);function _5e(n){return"clientX"in n&&"clientY"in n}function kU(n){if(!n)return!1;const{KeyboardEvent:e}=Sd(n.target);return e&&n instanceof e}function x5e(n){if(!n)return!1;const{TouchEvent:e}=Sd(n.target);return e&&n instanceof e}function wR(n){if(x5e(n)){if(n.touches&&n.touches.length){const{clientX:e,clientY:t}=n.touches[0];return{x:e,y:t}}else if(n.changedTouches&&n.changedTouches.length){const{clientX:e,clientY:t}=n.changedTouches[0];return{x:e,y:t}}}return _5e(n)?{x:n.clientX,y:n.clientY}:null}const E4=Object.freeze({Translate:{toString(n){if(!n)return;const{x:e,y:t}=n;return"translate3d("+(e?Math.round(e):0)+"px, "+(t?Math.round(t):0)+"px, 0)"}},Scale:{toString(n){if(!n)return;const{scaleX:e,scaleY:t}=n;return"scaleX("+e+") scaleY("+t+")"}},Transform:{toString(n){if(n)return[E4.Translate.toString(n),E4.Scale.toString(n)].join(" ")}},Transition:{toString(n){let{property:e,duration:t,easing:i}=n;return e+" "+t+"ms "+i}}}),hG="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function M5e(n){return n.matches(hG)?n:n.querySelector(hG)}const w5e={display:"none"};function S5e(n){let{id:e,value:t}=n;return On.createElement("div",{id:e,style:w5e},t)}function E5e(n){let{id:e,announcement:t,ariaLiveType:i="assertive"}=n;const r={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return On.createElement("div",{id:e,style:r,role:"status","aria-live":i,"aria-atomic":!0},t)}function B5e(){const[n,e]=Mt.useState("");return{announce:Mt.useCallback(i=>{i!=null&&e(i)},[]),announcement:n}}const Yne=Mt.createContext(null);function O5e(n){const e=Mt.useContext(Yne);Mt.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(n)},[n,e])}function I5e(){const[n]=Mt.useState(()=>new Set),e=Mt.useCallback(i=>(n.add(i),()=>n.delete(i)),[n]);return[Mt.useCallback(i=>{let{type:r,event:o}=i;n.forEach(s=>{var a;return(a=s[r])==null?void 0:a.call(s,o)})},[n]),e]}const k5e={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},T5e={onDragStart(n){let{active:e}=n;return"Picked up draggable item "+e.id+"."},onDragOver(n){let{active:e,over:t}=n;return t?"Draggable item "+e.id+" was moved over droppable area "+t.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(n){let{active:e,over:t}=n;return t?"Draggable item "+e.id+" was dropped over droppable area "+t.id:"Draggable item "+e.id+" was dropped."},onDragCancel(n){let{active:e}=n;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function R5e(n){let{announcements:e=T5e,container:t,hiddenTextDescribedById:i,screenReaderInstructions:r=k5e}=n;const{announce:o,announcement:s}=B5e(),a=BM("DndLiveRegion"),[c,h]=Mt.useState(!1);if(Mt.useEffect(()=>{h(!0)},[]),O5e(Mt.useMemo(()=>({onDragStart(v){let{active:x}=v;o(e.onDragStart({active:x}))},onDragMove(v){let{active:x,over:E}=v;e.onDragMove&&o(e.onDragMove({active:x,over:E}))},onDragOver(v){let{active:x,over:E}=v;o(e.onDragOver({active:x,over:E}))},onDragEnd(v){let{active:x,over:E}=v;o(e.onDragEnd({active:x,over:E}))},onDragCancel(v){let{active:x,over:E}=v;o(e.onDragCancel({active:x,over:E}))}}),[o,e])),!c)return null;const m=On.createElement(On.Fragment,null,On.createElement(S5e,{id:i,value:r.draggable}),On.createElement(E5e,{id:a,announcement:s}));return t?X2.createPortal(m,t):m}var Ec;(function(n){n.DragStart="dragStart",n.DragMove="dragMove",n.DragEnd="dragEnd",n.DragCancel="dragCancel",n.DragOver="dragOver",n.RegisterDroppable="registerDroppable",n.SetDroppableDisabled="setDroppableDisabled",n.UnregisterDroppable="unregisterDroppable"})(Ec||(Ec={}));function qS(){}function D5e(n,e){return Mt.useMemo(()=>({sensor:n,options:e??{}}),[n,e])}function P5e(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return Mt.useMemo(()=>[...e].filter(i=>i!=null),[...e])}const xm=Object.freeze({x:0,y:0});function U5e(n,e){return Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2))}function K5e(n,e){let{data:{value:t}}=n,{data:{value:i}}=e;return t-i}function L5e(n,e){let{data:{value:t}}=n,{data:{value:i}}=e;return i-t}function F5e(n,e){if(!n||n.length===0)return null;const[t]=n;return t[e]}function dG(n,e,t){return e===void 0&&(e=n.left),t===void 0&&(t=n.top),{x:e+n.width*.5,y:t+n.height*.5}}const z5e=n=>{let{collisionRect:e,droppableRects:t,droppableContainers:i}=n;const r=dG(e,e.left,e.top),o=[];for(const s of i){const{id:a}=s,c=t.get(a);if(c){const h=U5e(dG(c),r);o.push({id:a,data:{droppableContainer:s,value:h}})}}return o.sort(K5e)};function j5e(n,e){const t=Math.max(e.top,n.top),i=Math.max(e.left,n.left),r=Math.min(e.left+e.width,n.left+n.width),o=Math.min(e.top+e.height,n.top+n.height),s=r-i,a=o-t;if(i<r&&t<o){const c=e.width*e.height,h=n.width*n.height,m=s*a,v=m/(c+h-m);return Number(v.toFixed(4))}return 0}const N5e=n=>{let{collisionRect:e,droppableRects:t,droppableContainers:i}=n;const r=[];for(const o of i){const{id:s}=o,a=t.get(s);if(a){const c=j5e(a,e);c>0&&r.push({id:s,data:{droppableContainer:o,value:c}})}}return r.sort(L5e)};function G5e(n,e,t){return{...n,scaleX:e&&t?e.width/t.width:1,scaleY:e&&t?e.height/t.height:1}}function qne(n,e){return n&&e?{x:n.left-e.left,y:n.top-e.top}:xm}function W5e(n){return function(t){for(var i=arguments.length,r=new Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];return r.reduce((s,a)=>({...s,top:s.top+n*a.y,bottom:s.bottom+n*a.y,left:s.left+n*a.x,right:s.right+n*a.x}),{...t})}}const Q5e=W5e(1);function Y5e(n){if(n.startsWith("matrix3d(")){const e=n.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(n.startsWith("matrix(")){const e=n.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function q5e(n,e,t){const i=Y5e(e);if(!i)return n;const{scaleX:r,scaleY:o,x:s,y:a}=i,c=n.left-s-(1-r)*parseFloat(t),h=n.top-a-(1-o)*parseFloat(t.slice(t.indexOf(" ")+1)),m=r?n.width/r:n.width,v=o?n.height/o:n.height;return{width:m,height:v,top:h,right:c+m,bottom:h+v,left:c}}const V5e={ignoreTransform:!1};function Vx(n,e){e===void 0&&(e=V5e);let t=n.getBoundingClientRect();if(e.ignoreTransform){const{transform:h,transformOrigin:m}=Sd(n).getComputedStyle(n);h&&(t=q5e(t,h,m))}const{top:i,left:r,width:o,height:s,bottom:a,right:c}=t;return{top:i,left:r,width:o,height:s,bottom:a,right:c}}function fG(n){return Vx(n,{ignoreTransform:!0})}function $5e(n){const e=n.innerWidth,t=n.innerHeight;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}function H5e(n,e){return e===void 0&&(e=Sd(n).getComputedStyle(n)),e.position==="fixed"}function Z5e(n,e){e===void 0&&(e=Sd(n).getComputedStyle(n));const t=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(r=>{const o=e[r];return typeof o=="string"?t.test(o):!1})}function TU(n,e){const t=[];function i(r){if(e!=null&&t.length>=e||!r)return t;if(OU(r)&&r.scrollingElement!=null&&!t.includes(r.scrollingElement))return t.push(r.scrollingElement),t;if(!SM(r)||Wne(r)||t.includes(r))return t;const o=Sd(n).getComputedStyle(r);return r!==n&&Z5e(r,o)&&t.push(r),H5e(r,o)?t:i(r.parentNode)}return n?i(n):t}function Vne(n){const[e]=TU(n,1);return e??null}function i8(n){return!M6||!n?null:Yx(n)?n:BU(n)?OU(n)||n===qx(n).scrollingElement?window:SM(n)?n:null:null}function $ne(n){return Yx(n)?n.scrollX:n.scrollLeft}function Hne(n){return Yx(n)?n.scrollY:n.scrollTop}function SR(n){return{x:$ne(n),y:Hne(n)}}var Zc;(function(n){n[n.Forward=1]="Forward",n[n.Backward=-1]="Backward"})(Zc||(Zc={}));function Zne(n){return!M6||!n?!1:n===document.scrollingElement}function Xne(n){const e={x:0,y:0},t=Zne(n)?{height:window.innerHeight,width:window.innerWidth}:{height:n.clientHeight,width:n.clientWidth},i={x:n.scrollWidth-t.width,y:n.scrollHeight-t.height},r=n.scrollTop<=e.y,o=n.scrollLeft<=e.x,s=n.scrollTop>=i.y,a=n.scrollLeft>=i.x;return{isTop:r,isLeft:o,isBottom:s,isRight:a,maxScroll:i,minScroll:e}}const X5e={x:.2,y:.2};function J5e(n,e,t,i,r){let{top:o,left:s,right:a,bottom:c}=t;i===void 0&&(i=10),r===void 0&&(r=X5e);const{isTop:h,isBottom:m,isLeft:v,isRight:x}=Xne(n),E={x:0,y:0},D={x:0,y:0},P={height:e.height*r.y,width:e.width*r.x};return!h&&o<=e.top+P.height?(E.y=Zc.Backward,D.y=i*Math.abs((e.top+P.height-o)/P.height)):!m&&c>=e.bottom-P.height&&(E.y=Zc.Forward,D.y=i*Math.abs((e.bottom-P.height-c)/P.height)),!x&&a>=e.right-P.width?(E.x=Zc.Forward,D.x=i*Math.abs((e.right-P.width-a)/P.width)):!v&&s<=e.left+P.width&&(E.x=Zc.Backward,D.x=i*Math.abs((e.left+P.width-s)/P.width)),{direction:E,speed:D}}function ewe(n){if(n===document.scrollingElement){const{innerWidth:o,innerHeight:s}=window;return{top:0,left:0,right:o,bottom:s,width:o,height:s}}const{top:e,left:t,right:i,bottom:r}=n.getBoundingClientRect();return{top:e,left:t,right:i,bottom:r,width:n.clientWidth,height:n.clientHeight}}function Jne(n){return n.reduce((e,t)=>tx(e,SR(t)),xm)}function twe(n){return n.reduce((e,t)=>e+$ne(t),0)}function nwe(n){return n.reduce((e,t)=>e+Hne(t),0)}function iwe(n,e){if(e===void 0&&(e=Vx),!n)return;const{top:t,left:i,bottom:r,right:o}=e(n);Vne(n)&&(r<=0||o<=0||t>=window.innerHeight||i>=window.innerWidth)&&n.scrollIntoView({block:"center",inline:"center"})}const rwe=[["x",["left","right"],twe],["y",["top","bottom"],nwe]];class RU{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const i=TU(t),r=Jne(i);this.rect={...e},this.width=e.width,this.height=e.height;for(const[o,s,a]of rwe)for(const c of s)Object.defineProperty(this,c,{get:()=>{const h=a(i),m=r[o]-h;return this.rect[c]+m},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class _3{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(t=>{var i;return(i=this.target)==null?void 0:i.removeEventListener(...t)})},this.target=e}add(e,t,i){var r;(r=this.target)==null||r.addEventListener(e,t,i),this.listeners.push([e,t,i])}}function owe(n){const{EventTarget:e}=Sd(n);return n instanceof e?n:qx(n)}function r8(n,e){const t=Math.abs(n.x),i=Math.abs(n.y);return typeof e=="number"?Math.sqrt(t**2+i**2)>e:"x"in e&&"y"in e?t>e.x&&i>e.y:"x"in e?t>e.x:"y"in e?i>e.y:!1}var Vf;(function(n){n.Click="click",n.DragStart="dragstart",n.Keydown="keydown",n.ContextMenu="contextmenu",n.Resize="resize",n.SelectionChange="selectionchange",n.VisibilityChange="visibilitychange"})(Vf||(Vf={}));function pG(n){n.preventDefault()}function swe(n){n.stopPropagation()}var Us;(function(n){n.Space="Space",n.Down="ArrowDown",n.Right="ArrowRight",n.Left="ArrowLeft",n.Up="ArrowUp",n.Esc="Escape",n.Enter="Enter",n.Tab="Tab"})(Us||(Us={}));const eie={start:[Us.Space,Us.Enter],cancel:[Us.Esc],end:[Us.Space,Us.Enter,Us.Tab]},awe=(n,e)=>{let{currentCoordinates:t}=e;switch(n.code){case Us.Right:return{...t,x:t.x+25};case Us.Left:return{...t,x:t.x-25};case Us.Down:return{...t,y:t.y+25};case Us.Up:return{...t,y:t.y-25}}};class tie{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new _3(qx(t)),this.windowListeners=new _3(Sd(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Vf.Resize,this.handleCancel),this.windowListeners.add(Vf.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Vf.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:t}=this.props,i=e.node.current;i&&iwe(i),t(xm)}handleKeyDown(e){if(kU(e)){const{active:t,context:i,options:r}=this.props,{keyboardCodes:o=eie,coordinateGetter:s=awe,scrollBehavior:a="smooth"}=r,{code:c}=e;if(o.end.includes(c)){this.handleEnd(e);return}if(o.cancel.includes(c)){this.handleCancel(e);return}const{collisionRect:h}=i.current,m=h?{x:h.left,y:h.top}:xm;this.referenceCoordinates||(this.referenceCoordinates=m);const v=s(e,{active:t,context:i.current,currentCoordinates:m});if(v){const x=YS(v,m),E={x:0,y:0},{scrollableAncestors:D}=i.current;for(const P of D){const F=e.code,{isTop:W,isRight:q,isLeft:V,isBottom:H,maxScroll:X,minScroll:Z}=Xne(P),G=ewe(P),oe={x:Math.min(F===Us.Right?G.right-G.width/2:G.right,Math.max(F===Us.Right?G.left:G.left+G.width/2,v.x)),y:Math.min(F===Us.Down?G.bottom-G.height/2:G.bottom,Math.max(F===Us.Down?G.top:G.top+G.height/2,v.y))},ue=F===Us.Right&&!q||F===Us.Left&&!V,xe=F===Us.Down&&!H||F===Us.Up&&!W;if(ue&&oe.x!==v.x){const me=P.scrollLeft+x.x,Ie=F===Us.Right&&me<=X.x||F===Us.Left&&me>=Z.x;if(Ie&&!x.y){P.scrollTo({left:me,behavior:a});return}Ie?E.x=P.scrollLeft-me:E.x=F===Us.Right?P.scrollLeft-X.x:P.scrollLeft-Z.x,E.x&&P.scrollBy({left:-E.x,behavior:a});break}else if(xe&&oe.y!==v.y){const me=P.scrollTop+x.y,Ie=F===Us.Down&&me<=X.y||F===Us.Up&&me>=Z.y;if(Ie&&!x.x){P.scrollTo({top:me,behavior:a});return}Ie?E.y=P.scrollTop-me:E.y=F===Us.Down?P.scrollTop-X.y:P.scrollTop-Z.y,E.y&&P.scrollBy({top:-E.y,behavior:a});break}}this.handleMove(e,tx(YS(v,this.referenceCoordinates),E))}}}handleMove(e,t){const{onMove:i}=this.props;e.preventDefault(),i(t)}handleEnd(e){const{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){const{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}tie.activators=[{eventName:"onKeyDown",handler:(n,e,t)=>{let{keyboardCodes:i=eie,onActivation:r}=e,{active:o}=t;const{code:s}=n.nativeEvent;if(i.start.includes(s)){const a=o.activatorNode.current;return a&&n.target!==a?!1:(n.preventDefault(),r?.({event:n.nativeEvent}),!0)}return!1}}];function mG(n){return!!(n&&"distance"in n)}function gG(n){return!!(n&&"delay"in n)}class DU{constructor(e,t,i){var r;i===void 0&&(i=owe(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:o}=e,{target:s}=o;this.props=e,this.events=t,this.document=qx(s),this.documentListeners=new _3(this.document),this.listeners=new _3(i),this.windowListeners=new _3(Sd(s)),this.initialCoordinates=(r=wR(o))!=null?r:xm,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:i}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Vf.Resize,this.handleCancel),this.windowListeners.add(Vf.DragStart,pG),this.windowListeners.add(Vf.VisibilityChange,this.handleCancel),this.windowListeners.add(Vf.ContextMenu,pG),this.documentListeners.add(Vf.Keydown,this.handleKeydown),t){if(i!=null&&i({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(gG(t)){this.timeoutId=setTimeout(this.handleStart,t.delay),this.handlePending(t);return}if(mG(t)){this.handlePending(t);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){const{active:i,onPending:r}=this.props;r(i,e,this.initialCoordinates,t)}handleStart(){const{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(Vf.Click,swe,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Vf.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;const{activated:i,initialCoordinates:r,props:o}=this,{onMove:s,options:{activationConstraint:a}}=o;if(!r)return;const c=(t=wR(e))!=null?t:xm,h=YS(r,c);if(!i&&a){if(mG(a)){if(a.tolerance!=null&&r8(h,a.tolerance))return this.handleCancel();if(r8(h,a.distance))return this.handleStart()}if(gG(a)&&r8(h,a.tolerance))return this.handleCancel();this.handlePending(a,h);return}e.cancelable&&e.preventDefault(),s(c)}handleEnd(){const{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){const{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===Us.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const lwe={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class PU extends DU{constructor(e){const{event:t}=e,i=qx(t.target);super(e,lwe,i)}}PU.activators=[{eventName:"onPointerDown",handler:(n,e)=>{let{nativeEvent:t}=n,{onActivation:i}=e;return!t.isPrimary||t.button!==0?!1:(i?.({event:t}),!0)}}];const uwe={move:{name:"mousemove"},end:{name:"mouseup"}};var ER;(function(n){n[n.RightClick=2]="RightClick"})(ER||(ER={}));class cwe extends DU{constructor(e){super(e,uwe,qx(e.event.target))}}cwe.activators=[{eventName:"onMouseDown",handler:(n,e)=>{let{nativeEvent:t}=n,{onActivation:i}=e;return t.button===ER.RightClick?!1:(i?.({event:t}),!0)}}];const o8={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Awe extends DU{constructor(e){super(e,o8)}static setup(){return window.addEventListener(o8.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(o8.move.name,e)};function e(){}}}Awe.activators=[{eventName:"onTouchStart",handler:(n,e)=>{let{nativeEvent:t}=n,{onActivation:i}=e;const{touches:r}=t;return r.length>1?!1:(i?.({event:t}),!0)}}];var x3;(function(n){n[n.Pointer=0]="Pointer",n[n.DraggableRect=1]="DraggableRect"})(x3||(x3={}));var VS;(function(n){n[n.TreeOrder=0]="TreeOrder",n[n.ReversedTreeOrder=1]="ReversedTreeOrder"})(VS||(VS={}));function hwe(n){let{acceleration:e,activator:t=x3.Pointer,canScroll:i,draggingRect:r,enabled:o,interval:s=5,order:a=VS.TreeOrder,pointerCoordinates:c,scrollableAncestors:h,scrollableAncestorRects:m,delta:v,threshold:x}=n;const E=fwe({delta:v,disabled:!o}),[D,P]=C5e(),F=Mt.useRef({x:0,y:0}),W=Mt.useRef({x:0,y:0}),q=Mt.useMemo(()=>{switch(t){case x3.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case x3.DraggableRect:return r}},[t,r,c]),V=Mt.useRef(null),H=Mt.useCallback(()=>{const Z=V.current;if(!Z)return;const G=F.current.x*W.current.x,oe=F.current.y*W.current.y;Z.scrollBy(G,oe)},[]),X=Mt.useMemo(()=>a===VS.TreeOrder?[...h].reverse():h,[a,h]);Mt.useEffect(()=>{if(!o||!h.length||!q){P();return}for(const Z of X){if(i?.(Z)===!1)continue;const G=h.indexOf(Z),oe=m[G];if(!oe)continue;const{direction:ue,speed:xe}=J5e(Z,oe,q,e,x);for(const me of["x","y"])E[me][ue[me]]||(xe[me]=0,ue[me]=0);if(xe.x>0||xe.y>0){P(),V.current=Z,D(H,s),F.current=xe,W.current=ue;return}}F.current={x:0,y:0},W.current={x:0,y:0},P()},[e,H,i,P,o,s,JSON.stringify(q),JSON.stringify(E),D,h,X,m,JSON.stringify(x)])}const dwe={x:{[Zc.Backward]:!1,[Zc.Forward]:!1},y:{[Zc.Backward]:!1,[Zc.Forward]:!1}};function fwe(n){let{delta:e,disabled:t}=n;const i=MR(e);return EM(r=>{if(t||!i||!r)return dwe;const o={x:Math.sign(e.x-i.x),y:Math.sign(e.y-i.y)};return{x:{[Zc.Backward]:r.x[Zc.Backward]||o.x===-1,[Zc.Forward]:r.x[Zc.Forward]||o.x===1},y:{[Zc.Backward]:r.y[Zc.Backward]||o.y===-1,[Zc.Forward]:r.y[Zc.Forward]||o.y===1}}},[t,e,i])}function pwe(n,e){const t=e!=null?n.get(e):void 0,i=t?t.node.current:null;return EM(r=>{var o;return e==null?null:(o=i??r)!=null?o:null},[i,e])}function mwe(n,e){return Mt.useMemo(()=>n.reduce((t,i)=>{const{sensor:r}=i,o=r.activators.map(s=>({eventName:s.eventName,handler:e(s.handler,i)}));return[...t,...o]},[]),[n,e])}var B4;(function(n){n[n.Always=0]="Always",n[n.BeforeDragging=1]="BeforeDragging",n[n.WhileDragging=2]="WhileDragging"})(B4||(B4={}));var BR;(function(n){n.Optimized="optimized"})(BR||(BR={}));const yG=new Map;function gwe(n,e){let{dragging:t,dependencies:i,config:r}=e;const[o,s]=Mt.useState(null),{frequency:a,measure:c,strategy:h}=r,m=Mt.useRef(n),v=F(),x=S4(v),E=Mt.useCallback(function(W){W===void 0&&(W=[]),!x.current&&s(q=>q===null?W:q.concat(W.filter(V=>!q.includes(V))))},[x]),D=Mt.useRef(null),P=EM(W=>{if(v&&!t)return yG;if(!W||W===yG||m.current!==n||o!=null){const q=new Map;for(let V of n){if(!V)continue;if(o&&o.length>0&&!o.includes(V.id)&&V.rect.current){q.set(V.id,V.rect.current);continue}const H=V.node.current,X=H?new RU(c(H),H):null;V.rect.current=X,X&&q.set(V.id,X)}return q}return W},[n,o,t,v,c]);return Mt.useEffect(()=>{m.current=n},[n]),Mt.useEffect(()=>{v||E()},[t,v]),Mt.useEffect(()=>{o&&o.length>0&&s(null)},[JSON.stringify(o)]),Mt.useEffect(()=>{v||typeof a!="number"||D.current!==null||(D.current=setTimeout(()=>{E(),D.current=null},a))},[a,v,E,...i]),{droppableRects:P,measureDroppableContainers:E,measuringScheduled:o!=null};function F(){switch(h){case B4.Always:return!1;case B4.BeforeDragging:return t;default:return!t}}}function nie(n,e){return EM(t=>n?t||(typeof e=="function"?e(n):n):null,[e,n])}function ywe(n,e){return nie(n,e)}function vwe(n){let{callback:e,disabled:t}=n;const i=IU(e),r=Mt.useMemo(()=>{if(t||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:o}=window;return new o(i)},[i,t]);return Mt.useEffect(()=>()=>r?.disconnect(),[r]),r}function w6(n){let{callback:e,disabled:t}=n;const i=IU(e),r=Mt.useMemo(()=>{if(t||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:o}=window;return new o(i)},[t]);return Mt.useEffect(()=>()=>r?.disconnect(),[r]),r}function bwe(n){return new RU(Vx(n),n)}function vG(n,e,t){e===void 0&&(e=bwe);const[i,r]=Mt.useState(null);function o(){r(c=>{if(!n)return null;if(n.isConnected===!1){var h;return(h=c??t)!=null?h:null}const m=e(n);return JSON.stringify(c)===JSON.stringify(m)?c:m})}const s=vwe({callback(c){if(n)for(const h of c){const{type:m,target:v}=h;if(m==="childList"&&v instanceof HTMLElement&&v.contains(n)){o();break}}}}),a=w6({callback:o});return u0(()=>{o(),n?(a?.observe(n),s?.observe(document.body,{childList:!0,subtree:!0})):(a?.disconnect(),s?.disconnect())},[n]),i}function Cwe(n){const e=nie(n);return qne(n,e)}const bG=[];function _we(n){const e=Mt.useRef(n),t=EM(i=>n?i&&i!==bG&&n&&e.current&&n.parentNode===e.current.parentNode?i:TU(n):bG,[n]);return Mt.useEffect(()=>{e.current=n},[n]),t}function xwe(n){const[e,t]=Mt.useState(null),i=Mt.useRef(n),r=Mt.useCallback(o=>{const s=i8(o.target);s&&t(a=>a?(a.set(s,SR(s)),new Map(a)):null)},[]);return Mt.useEffect(()=>{const o=i.current;if(n!==o){s(o);const a=n.map(c=>{const h=i8(c);return h?(h.addEventListener("scroll",r,{passive:!0}),[h,SR(h)]):null}).filter(c=>c!=null);t(a.length?new Map(a):null),i.current=n}return()=>{s(n),s(o)};function s(a){a.forEach(c=>{const h=i8(c);h?.removeEventListener("scroll",r)})}},[r,n]),Mt.useMemo(()=>n.length?e?Array.from(e.values()).reduce((o,s)=>tx(o,s),xm):Jne(n):xm,[n,e])}function CG(n,e){e===void 0&&(e=[]);const t=Mt.useRef(null);return Mt.useEffect(()=>{t.current=null},e),Mt.useEffect(()=>{const i=n!==xm;i&&!t.current&&(t.current=n),!i&&t.current&&(t.current=null)},[n]),t.current?YS(n,t.current):xm}function Mwe(n){Mt.useEffect(()=>{if(!M6)return;const e=n.map(t=>{let{sensor:i}=t;return i.setup==null?void 0:i.setup()});return()=>{for(const t of e)t?.()}},n.map(e=>{let{sensor:t}=e;return t}))}function wwe(n,e){return Mt.useMemo(()=>n.reduce((t,i)=>{let{eventName:r,handler:o}=i;return t[r]=s=>{o(s,e)},t},{}),[n,e])}function iie(n){return Mt.useMemo(()=>n?$5e(n):null,[n])}const _G=[];function Swe(n,e){e===void 0&&(e=Vx);const[t]=n,i=iie(t?Sd(t):null),[r,o]=Mt.useState(_G);function s(){o(()=>n.length?n.map(c=>Zne(c)?i:new RU(e(c),c)):_G)}const a=w6({callback:s});return u0(()=>{a?.disconnect(),s(),n.forEach(c=>a?.observe(c))},[n]),r}function Ewe(n){if(!n)return null;if(n.children.length>1)return n;const e=n.children[0];return SM(e)?e:n}function Bwe(n){let{measure:e}=n;const[t,i]=Mt.useState(null),r=Mt.useCallback(h=>{for(const{target:m}of h)if(SM(m)){i(v=>{const x=e(m);return v?{...v,width:x.width,height:x.height}:x});break}},[e]),o=w6({callback:r}),s=Mt.useCallback(h=>{const m=Ewe(h);o?.disconnect(),m&&o?.observe(m),i(m?e(m):null)},[e,o]),[a,c]=QS(s);return Mt.useMemo(()=>({nodeRef:a,rect:t,setRef:c}),[t,a,c])}const Owe=[{sensor:PU,options:{}},{sensor:tie,options:{}}],Iwe={current:{}},Sw={draggable:{measure:fG},droppable:{measure:fG,strategy:B4.WhileDragging,frequency:BR.Optimized},dragOverlay:{measure:Vx}};class M3 extends Map{get(e){var t;return e!=null&&(t=super.get(e))!=null?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:t}=e;return!t})}getNodeFor(e){var t,i;return(t=(i=this.get(e))==null?void 0:i.node.current)!=null?t:void 0}}const kwe={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new M3,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:qS},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Sw,measureDroppableContainers:qS,windowRect:null,measuringScheduled:!1},Twe={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:qS,draggableNodes:new Map,over:null,measureDroppableContainers:qS},S6=Mt.createContext(Twe),rie=Mt.createContext(kwe);function Rwe(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new M3}}}function Dwe(n,e){switch(e.type){case Ec.DragStart:return{...n,draggable:{...n.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case Ec.DragMove:return n.draggable.active==null?n:{...n,draggable:{...n.draggable,translate:{x:e.coordinates.x-n.draggable.initialCoordinates.x,y:e.coordinates.y-n.draggable.initialCoordinates.y}}};case Ec.DragEnd:case Ec.DragCancel:return{...n,draggable:{...n.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Ec.RegisterDroppable:{const{element:t}=e,{id:i}=t,r=new M3(n.droppable.containers);return r.set(i,t),{...n,droppable:{...n.droppable,containers:r}}}case Ec.SetDroppableDisabled:{const{id:t,key:i,disabled:r}=e,o=n.droppable.containers.get(t);if(!o||i!==o.key)return n;const s=new M3(n.droppable.containers);return s.set(t,{...o,disabled:r}),{...n,droppable:{...n.droppable,containers:s}}}case Ec.UnregisterDroppable:{const{id:t,key:i}=e,r=n.droppable.containers.get(t);if(!r||i!==r.key)return n;const o=new M3(n.droppable.containers);return o.delete(t),{...n,droppable:{...n.droppable,containers:o}}}default:return n}}function Pwe(n){let{disabled:e}=n;const{active:t,activatorEvent:i,draggableNodes:r}=Mt.useContext(S6),o=MR(i),s=MR(t?.id);return Mt.useEffect(()=>{if(!e&&!i&&o&&s!=null){if(!kU(o)||document.activeElement===o.target)return;const a=r.get(s);if(!a)return;const{activatorNode:c,node:h}=a;if(!c.current&&!h.current)return;requestAnimationFrame(()=>{for(const m of[c.current,h.current]){if(!m)continue;const v=M5e(m);if(v){v.focus();break}}})}},[i,e,r,s,o]),null}function Uwe(n,e){let{transform:t,...i}=e;return n!=null&&n.length?n.reduce((r,o)=>o({transform:r,...i}),t):t}function Kwe(n){return Mt.useMemo(()=>({draggable:{...Sw.draggable,...n?.draggable},droppable:{...Sw.droppable,...n?.droppable},dragOverlay:{...Sw.dragOverlay,...n?.dragOverlay}}),[n?.draggable,n?.droppable,n?.dragOverlay])}function Lwe(n){let{activeNode:e,measure:t,initialRect:i,config:r=!0}=n;const o=Mt.useRef(!1),{x:s,y:a}=typeof r=="boolean"?{x:r,y:r}:r;u0(()=>{if(!s&&!a||!e){o.current=!1;return}if(o.current||!i)return;const h=e?.node.current;if(!h||h.isConnected===!1)return;const m=t(h),v=qne(m,i);if(s||(v.x=0),a||(v.y=0),o.current=!0,Math.abs(v.x)>0||Math.abs(v.y)>0){const x=Vne(h);x&&x.scrollBy({top:v.y,left:v.x})}},[e,s,a,i,t])}const oie=Mt.createContext({...xm,scaleX:1,scaleY:1});var ky;(function(n){n[n.Uninitialized=0]="Uninitialized",n[n.Initializing=1]="Initializing",n[n.Initialized=2]="Initialized"})(ky||(ky={}));const Fwe=Mt.memo(function(e){var t,i,r,o;let{id:s,accessibility:a,autoScroll:c=!0,children:h,sensors:m=Owe,collisionDetection:v=N5e,measuring:x,modifiers:E,...D}=e;const P=Mt.useReducer(Dwe,void 0,Rwe),[F,W]=P,[q,V]=I5e(),[H,X]=Mt.useState(ky.Uninitialized),Z=H===ky.Initialized,{draggable:{active:G,nodes:oe,translate:ue},droppable:{containers:xe}}=F,me=G!=null?oe.get(G):null,Ie=Mt.useRef({initial:null,translated:null}),Me=Mt.useMemo(()=>{var tn;return G!=null?{id:G,data:(tn=me?.data)!=null?tn:Iwe,rect:Ie}:null},[G,me]),Te=Mt.useRef(null),[je,Ee]=Mt.useState(null),[qe,At]=Mt.useState(null),gt=S4(D,Object.values(D)),Le=BM("DndDescribedBy",s),Re=Mt.useMemo(()=>xe.getEnabled(),[xe]),Ge=Kwe(x),{droppableRects:De,measureDroppableContainers:_t,measuringScheduled:at}=gwe(Re,{dragging:Z,dependencies:[ue.x,ue.y],config:Ge.droppable}),Tt=pwe(oe,G),Kt=Mt.useMemo(()=>qe?wR(qe):null,[qe]),Ke=xt(),Oe=ywe(Tt,Ge.draggable.measure);Lwe({activeNode:G!=null?oe.get(G):null,config:Ke.layoutShiftCompensation,initialRect:Oe,measure:Ge.draggable.measure});const Be=vG(Tt,Ge.draggable.measure,Oe),Ve=vG(Tt?Tt.parentElement:null),yt=Mt.useRef({activatorEvent:null,active:null,activeNode:Tt,collisionRect:null,collisions:null,droppableRects:De,draggableNodes:oe,draggingNode:null,draggingNodeRect:null,droppableContainers:xe,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),ft=xe.getNodeFor((t=yt.current.over)==null?void 0:t.id),Ct=Bwe({measure:Ge.dragOverlay.measure}),Lt=(i=Ct.nodeRef.current)!=null?i:Tt,kt=Z?(r=Ct.rect)!=null?r:Be:null,an=!!(Ct.nodeRef.current&&Ct.rect),Hn=Cwe(an?null:Be),Wn=iie(Lt?Sd(Lt):null),_i=_we(Z?ft??Tt:null),Ln=Swe(_i),Un=Uwe(E,{transform:{x:ue.x-Hn.x,y:ue.y-Hn.y,scaleX:1,scaleY:1},activatorEvent:qe,active:Me,activeNodeRect:Be,containerNodeRect:Ve,draggingNodeRect:kt,over:yt.current.over,overlayNodeRect:Ct.rect,scrollableAncestors:_i,scrollableAncestorRects:Ln,windowRect:Wn}),xn=Kt?tx(Kt,ue):null,Zn=xwe(_i),Rn=CG(Zn),Ot=CG(Zn,[Be]),be=tx(Un,Rn),ie=kt?Q5e(kt,Un):null,le=Me&&ie?v({active:Me,collisionRect:ie,droppableRects:De,droppableContainers:Re,pointerCoordinates:xn}):null,de=F5e(le,"id"),[se,Ae]=Mt.useState(null),ve=an?Un:tx(Un,Ot),We=G5e(ve,(o=se?.rect)!=null?o:null,Be),tt=Mt.useRef(null),Pe=Mt.useCallback((tn,dt)=>{let{sensor:Xn,options:yi}=dt;if(Te.current==null)return;const Dn=oe.get(Te.current);if(!Dn)return;const Fn=tn.nativeEvent,vi=new Xn({active:Te.current,activeNode:Dn,event:Fn,options:yi,context:yt,onAbort(Ki){if(!oe.get(Ki))return;const{onDragAbort:ki}=gt.current,Ri={id:Ki};ki?.(Ri),q({type:"onDragAbort",event:Ri})},onPending(Ki,Ji,ki,Ri){if(!oe.get(Ki))return;const{onDragPending:rn}=gt.current,Li={id:Ki,constraint:Ji,initialCoordinates:ki,offset:Ri};rn?.(Li),q({type:"onDragPending",event:Li})},onStart(Ki){const Ji=Te.current;if(Ji==null)return;const ki=oe.get(Ji);if(!ki)return;const{onDragStart:Ri}=gt.current,pr={activatorEvent:Fn,active:{id:Ji,data:ki.data,rect:Ie}};X2.unstable_batchedUpdates(()=>{Ri?.(pr),X(ky.Initializing),W({type:Ec.DragStart,initialCoordinates:Ki,active:Ji}),q({type:"onDragStart",event:pr}),Ee(tt.current),At(Fn)})},onMove(Ki){W({type:Ec.DragMove,coordinates:Ki})},onEnd:Zi(Ec.DragEnd),onCancel:Zi(Ec.DragCancel)});tt.current=vi;function Zi(Ki){return async function(){const{active:ki,collisions:Ri,over:pr,scrollAdjustedTranslate:rn}=yt.current;let Li=null;if(ki&&rn){const{cancelDrop:$o}=gt.current;Li={activatorEvent:Fn,active:ki,collisions:Ri,delta:rn,over:pr},Ki===Ec.DragEnd&&typeof $o=="function"&&await Promise.resolve($o(Li))&&(Ki=Ec.DragCancel)}Te.current=null,X2.unstable_batchedUpdates(()=>{W({type:Ki}),X(ky.Uninitialized),Ae(null),Ee(null),At(null),tt.current=null;const $o=Ki===Ec.DragEnd?"onDragEnd":"onDragCancel";if(Li){const Ws=gt.current[$o];Ws?.(Li),q({type:$o,event:Li})}})}}},[oe]),Xe=Mt.useCallback((tn,dt)=>(Xn,yi)=>{const Dn=Xn.nativeEvent,Fn=oe.get(yi);if(Te.current!==null||!Fn||Dn.dndKit||Dn.defaultPrevented)return;const vi={active:Fn};tn(Xn,dt.options,vi)===!0&&(Dn.dndKit={capturedBy:dt.sensor},Te.current=yi,Pe(Xn,dt))},[oe,Pe]),y=mwe(m,Xe);Mwe(m),u0(()=>{Be&&H===ky.Initializing&&X(ky.Initialized)},[Be,H]),Mt.useEffect(()=>{const{onDragMove:tn}=gt.current,{active:dt,activatorEvent:Xn,collisions:yi,over:Dn}=yt.current;if(!dt||!Xn)return;const Fn={active:dt,activatorEvent:Xn,collisions:yi,delta:{x:be.x,y:be.y},over:Dn};X2.unstable_batchedUpdates(()=>{tn?.(Fn),q({type:"onDragMove",event:Fn})})},[be.x,be.y]),Mt.useEffect(()=>{const{active:tn,activatorEvent:dt,collisions:Xn,droppableContainers:yi,scrollAdjustedTranslate:Dn}=yt.current;if(!tn||Te.current==null||!dt||!Dn)return;const{onDragOver:Fn}=gt.current,vi=yi.get(de),Zi=vi&&vi.rect.current?{id:vi.id,rect:vi.rect.current,data:vi.data,disabled:vi.disabled}:null,Ki={active:tn,activatorEvent:dt,collisions:Xn,delta:{x:Dn.x,y:Dn.y},over:Zi};X2.unstable_batchedUpdates(()=>{Ae(Zi),Fn?.(Ki),q({type:"onDragOver",event:Ki})})},[de]),u0(()=>{yt.current={activatorEvent:qe,active:Me,activeNode:Tt,collisionRect:ie,collisions:le,droppableRects:De,draggableNodes:oe,draggingNode:Lt,draggingNodeRect:kt,droppableContainers:xe,over:se,scrollableAncestors:_i,scrollAdjustedTranslate:be},Ie.current={initial:kt,translated:ie}},[Me,Tt,le,ie,oe,Lt,kt,De,xe,se,_i,be]),hwe({...Ke,delta:ue,draggingRect:ie,pointerCoordinates:xn,scrollableAncestors:_i,scrollableAncestorRects:Ln});const ot=Mt.useMemo(()=>({active:Me,activeNode:Tt,activeNodeRect:Be,activatorEvent:qe,collisions:le,containerNodeRect:Ve,dragOverlay:Ct,draggableNodes:oe,droppableContainers:xe,droppableRects:De,over:se,measureDroppableContainers:_t,scrollableAncestors:_i,scrollableAncestorRects:Ln,measuringConfiguration:Ge,measuringScheduled:at,windowRect:Wn}),[Me,Tt,Be,qe,le,Ve,Ct,oe,xe,De,se,_t,_i,Ln,Ge,at,Wn]),Dt=Mt.useMemo(()=>({activatorEvent:qe,activators:y,active:Me,activeNodeRect:Be,ariaDescribedById:{draggable:Le},dispatch:W,draggableNodes:oe,over:se,measureDroppableContainers:_t}),[qe,y,Me,Be,W,Le,oe,se,_t]);return On.createElement(Yne.Provider,{value:V},On.createElement(S6.Provider,{value:Dt},On.createElement(rie.Provider,{value:ot},On.createElement(oie.Provider,{value:We},h)),On.createElement(Pwe,{disabled:a?.restoreFocus===!1})),On.createElement(R5e,{...a,hiddenTextDescribedById:Le}));function xt(){const tn=je?.autoScrollEnabled===!1,dt=typeof c=="object"?c.enabled===!1:c===!1,Xn=Z&&!tn&&!dt;return typeof c=="object"?{...c,enabled:Xn}:{enabled:Xn}}}),zwe=Mt.createContext(null),xG="button",jwe="Draggable";function Nwe(n){let{id:e,data:t,disabled:i=!1,attributes:r}=n;const o=BM(jwe),{activators:s,activatorEvent:a,active:c,activeNodeRect:h,ariaDescribedById:m,draggableNodes:v,over:x}=Mt.useContext(S6),{role:E=xG,roleDescription:D="draggable",tabIndex:P=0}=r??{},F=c?.id===e,W=Mt.useContext(F?oie:zwe),[q,V]=QS(),[H,X]=QS(),Z=wwe(s,e),G=S4(t);u0(()=>(v.set(e,{id:e,key:o,node:q,activatorNode:H,data:G}),()=>{const ue=v.get(e);ue&&ue.key===o&&v.delete(e)}),[v,e]);const oe=Mt.useMemo(()=>({role:E,tabIndex:P,"aria-disabled":i,"aria-pressed":F&&E===xG?!0:void 0,"aria-roledescription":D,"aria-describedby":m.draggable}),[i,E,P,F,D,m.draggable]);return{active:c,activatorEvent:a,activeNodeRect:h,attributes:oe,isDragging:F,listeners:i?void 0:Z,node:q,over:x,setNodeRef:V,setActivatorNodeRef:X,transform:W}}function Gwe(){return Mt.useContext(rie)}const Wwe="Droppable",Qwe={timeout:25};function Ywe(n){let{data:e,disabled:t=!1,id:i,resizeObserverConfig:r}=n;const o=BM(Wwe),{active:s,dispatch:a,over:c,measureDroppableContainers:h}=Mt.useContext(S6),m=Mt.useRef({disabled:t}),v=Mt.useRef(!1),x=Mt.useRef(null),E=Mt.useRef(null),{disabled:D,updateMeasurementsFor:P,timeout:F}={...Qwe,...r},W=S4(P??i),q=Mt.useCallback(()=>{if(!v.current){v.current=!0;return}E.current!=null&&clearTimeout(E.current),E.current=setTimeout(()=>{h(Array.isArray(W.current)?W.current:[W.current]),E.current=null},F)},[F]),V=w6({callback:q,disabled:D||!s}),H=Mt.useCallback((oe,ue)=>{V&&(ue&&(V.unobserve(ue),v.current=!1),oe&&V.observe(oe))},[V]),[X,Z]=QS(H),G=S4(e);return Mt.useEffect(()=>{!V||!X.current||(V.disconnect(),v.current=!1,V.observe(X.current))},[X,V]),Mt.useEffect(()=>(a({type:Ec.RegisterDroppable,element:{id:i,key:o,disabled:t,node:X,rect:x,data:G}}),()=>a({type:Ec.UnregisterDroppable,key:o,id:i})),[i]),Mt.useEffect(()=>{t!==m.current.disabled&&(a({type:Ec.SetDroppableDisabled,id:i,key:o,disabled:t}),m.current.disabled=t)},[i,o,t,a]),{active:s,rect:x,isOver:c?.id===i,node:X,over:c,setNodeRef:Z}}function sie(n,e,t){const i=n.slice();return i.splice(t<0?i.length+t:t,0,i.splice(e,1)[0]),i}function qwe(n,e){return n.reduce((t,i,r)=>{const o=e.get(i);return o&&(t[r]=o),t},Array(n.length))}function K5(n){return n!==null&&n>=0}function Vwe(n,e){if(n===e)return!0;if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function $we(n){return typeof n=="boolean"?{draggable:n,droppable:n}:n}const aie=n=>{let{rects:e,activeIndex:t,overIndex:i,index:r}=n;const o=sie(e,i,t),s=e[r],a=o[r];return!a||!s?null:{x:a.left-s.left,y:a.top-s.top,scaleX:a.width/s.width,scaleY:a.height/s.height}},L5={scaleX:1,scaleY:1},Hwe=n=>{var e;let{activeIndex:t,activeNodeRect:i,index:r,rects:o,overIndex:s}=n;const a=(e=o[t])!=null?e:i;if(!a)return null;if(r===t){const h=o[s];return h?{x:0,y:t<s?h.top+h.height-(a.top+a.height):h.top-a.top,...L5}:null}const c=Zwe(o,r,t);return r>t&&r<=s?{x:0,y:-a.height-c,...L5}:r<t&&r>=s?{x:0,y:a.height+c,...L5}:{x:0,y:0,...L5}};function Zwe(n,e,t){const i=n[e],r=n[e-1],o=n[e+1];return i?t<e?r?i.top-(r.top+r.height):o?o.top-(i.top+i.height):0:o?o.top-(i.top+i.height):r?i.top-(r.top+r.height):0:0}const lie="Sortable",uie=On.createContext({activeIndex:-1,containerId:lie,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:aie,disabled:{draggable:!1,droppable:!1}});function Xwe(n){let{children:e,id:t,items:i,strategy:r=aie,disabled:o=!1}=n;const{active:s,dragOverlay:a,droppableRects:c,over:h,measureDroppableContainers:m}=Gwe(),v=BM(lie,t),x=a.rect!==null,E=Mt.useMemo(()=>i.map(Z=>typeof Z=="object"&&"id"in Z?Z.id:Z),[i]),D=s!=null,P=s?E.indexOf(s.id):-1,F=h?E.indexOf(h.id):-1,W=Mt.useRef(E),q=!Vwe(E,W.current),V=F!==-1&&P===-1||q,H=$we(o);u0(()=>{q&&D&&m(E)},[q,E,D,m]),Mt.useEffect(()=>{W.current=E},[E]);const X=Mt.useMemo(()=>({activeIndex:P,containerId:v,disabled:H,disableTransforms:V,items:E,overIndex:F,useDragOverlay:x,sortedRects:qwe(E,c),strategy:r}),[P,v,H.draggable,H.droppable,V,E,F,c,x,r]);return On.createElement(uie.Provider,{value:X},e)}const Jwe=n=>{let{id:e,items:t,activeIndex:i,overIndex:r}=n;return sie(t,i,r).indexOf(e)},eSe=n=>{let{containerId:e,isSorting:t,wasDragging:i,index:r,items:o,newIndex:s,previousItems:a,previousContainerId:c,transition:h}=n;return!h||!i||a!==o&&r===s?!1:t?!0:s!==r&&e===c},tSe={duration:200,easing:"ease"},cie="transform",nSe=E4.Transition.toString({property:cie,duration:0,easing:"linear"}),iSe={roleDescription:"sortable"};function rSe(n){let{disabled:e,index:t,node:i,rect:r}=n;const[o,s]=Mt.useState(null),a=Mt.useRef(t);return u0(()=>{if(!e&&t!==a.current&&i.current){const c=r.current;if(c){const h=Vx(i.current,{ignoreTransform:!0}),m={x:c.left-h.left,y:c.top-h.top,scaleX:c.width/h.width,scaleY:c.height/h.height};(m.x||m.y)&&s(m)}}t!==a.current&&(a.current=t)},[e,t,i,r]),Mt.useEffect(()=>{o&&s(null)},[o]),o}function oSe(n){let{animateLayoutChanges:e=eSe,attributes:t,disabled:i,data:r,getNewIndex:o=Jwe,id:s,strategy:a,resizeObserverConfig:c,transition:h=tSe}=n;const{items:m,containerId:v,activeIndex:x,disabled:E,disableTransforms:D,sortedRects:P,overIndex:F,useDragOverlay:W,strategy:q}=Mt.useContext(uie),V=sSe(i,E),H=m.indexOf(s),X=Mt.useMemo(()=>({sortable:{containerId:v,index:H,items:m},...r}),[v,r,H,m]),Z=Mt.useMemo(()=>m.slice(m.indexOf(s)),[m,s]),{rect:G,node:oe,isOver:ue,setNodeRef:xe}=Ywe({id:s,data:X,disabled:V.droppable,resizeObserverConfig:{updateMeasurementsFor:Z,...c}}),{active:me,activatorEvent:Ie,activeNodeRect:Me,attributes:Te,setNodeRef:je,listeners:Ee,isDragging:qe,over:At,setActivatorNodeRef:gt,transform:Le}=Nwe({id:s,data:X,attributes:{...iSe,...t},disabled:V.draggable}),Re=b5e(xe,je),Ge=!!me,De=Ge&&!D&&K5(x)&&K5(F),_t=!W&&qe,at=_t&&De?Le:null,Kt=De?at??(a??q)({rects:P,activeNodeRect:Me,activeIndex:x,overIndex:F,index:H}):null,Ke=K5(x)&&K5(F)?o({id:s,items:m,activeIndex:x,overIndex:F}):H,Oe=me?.id,Be=Mt.useRef({activeId:Oe,items:m,newIndex:Ke,containerId:v}),Ve=m!==Be.current.items,yt=e({active:me,containerId:v,isDragging:qe,isSorting:Ge,id:s,index:H,items:m,newIndex:Be.current.newIndex,previousItems:Be.current.items,previousContainerId:Be.current.containerId,transition:h,wasDragging:Be.current.activeId!=null}),ft=rSe({disabled:!yt,index:H,node:oe,rect:G});return Mt.useEffect(()=>{Ge&&Be.current.newIndex!==Ke&&(Be.current.newIndex=Ke),v!==Be.current.containerId&&(Be.current.containerId=v),m!==Be.current.items&&(Be.current.items=m)},[Ge,Ke,v,m]),Mt.useEffect(()=>{if(Oe===Be.current.activeId)return;if(Oe!=null&&Be.current.activeId==null){Be.current.activeId=Oe;return}const Lt=setTimeout(()=>{Be.current.activeId=Oe},50);return()=>clearTimeout(Lt)},[Oe]),{active:me,activeIndex:x,attributes:Te,data:X,rect:G,index:H,newIndex:Ke,items:m,isOver:ue,isSorting:Ge,isDragging:qe,listeners:Ee,node:oe,overIndex:F,over:At,setNodeRef:Re,setActivatorNodeRef:gt,setDroppableNodeRef:xe,setDraggableNodeRef:je,transform:ft??Kt,transition:Ct()};function Ct(){if(ft||Ve&&Be.current.newIndex===H)return nSe;if(!(_t&&!kU(Ie)||!h)&&(Ge||yt))return E4.Transition.toString({...h,property:cie})}}function sSe(n,e){var t,i;return typeof n=="boolean"?{draggable:n,droppable:!1}:{draggable:(t=n?.draggable)!=null?t:e.draggable,droppable:(i=n?.droppable)!=null?i:e.droppable}}Us.Down,Us.Right,Us.Up,Us.Left;function gb(){var n="/home/runner/work/maputnik/maputnik/src/components/Collapser.tsx",e="e73e8fb606fcd7318a8222b2e50c576ed3ad8702",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/Collapser.tsx",statementMap:{0:{start:{line:6,column:22},end:{line:10,column:5}},1:{start:{line:11,column:4},end:{line:11,column:154}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:12,column:3}},line:5}},branchMap:{0:{loc:{start:{line:11,column:11},end:{line:11,column:153}},type:"cond-expr",locations:[{start:{line:11,column:52},end:{line:11,column:92}},{start:{line:11,column:111},end:{line:11,column:153}}],line:11}},s:{0:0,1:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/Collapser.tsx"],names:[],mappings:"AAeoC;AAfpC,OAAO,WAAW;AAClB,SAAQ,iBAAiB,qBAAoB;AAO7C,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,SAAS;AACP,UAAM,YAAY;AAAA,MAChB,OAAO;AAAA,MACP,QAAQ;AAAA,MACR,GAAG,KAAK,MAAM;AAAA,IAChB;AACA,WAAO,KAAK,MAAM,cAAc,oBAAC,iBAAc,OAAO,WAAU,IAAK,oBAAC,mBAAgB,OAAO,WAAW;AAAA,EAC1G;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e73e8fb606fcd7318a8222b2e50c576ed3ad8702"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return gb=function(){return s},s}gb();class aSe extends On.Component{render(){gb().f[0]++;const e=(gb().s[0]++,{width:20,height:20,...this.props.style});return gb().s[1]++,this.props.isCollapsed?(gb().b[0][0]++,te.jsx(cZ,{style:e})):(gb().b[0][1]++,te.jsx(uZ,{style:e}))}}function U_(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerListGroup.tsx",e="b04bfec534013c327fd210571832bbd2813a944a",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/LayerListGroup.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:32,column:9}},1:{start:{line:11,column:25},end:{line:11,column:72}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:33,column:3}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:11,column:17},end:{line:11,column:18}},loc:{start:{line:11,column:25},end:{line:11,column:72}},line:11}},branchMap:{},s:{0:0,1:0},f:{0:0,1:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerListGroup.tsx"],names:[],mappings:"AAcM,SAIE,KAJF;AAdN,OAAO,WAAW;AAClB,OAAO,eAAe;AAUtB,qBAAqB,uBAAuB,MAAM,UAA+B;AAAA,EAC/E,SAAS;AACP,WAAO,oBAAC,QAAG,WAAU,6BACnB;AAAA,MAAC;AAAA;AAAA,QAAI,WAAU;AAAA,QACb,eAAa,sBAAoB,KAAK,MAAM,aAAa;AAAA,QACzD,SAAS,QAAM,KAAK,MAAM,eAAe,CAAC,KAAK,MAAM,QAAQ;AAAA,QAE7D;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,iBAAe,KAAK,MAAM,eAAe;AAAA,cACzC,iBAAe,KAAK,MAAM;AAAA,cAEzB,eAAK,MAAM;AAAA;AAAA,UACd;AAAA,UACA,oBAAC,UAAK,WAAU,kBAAiB;AAAA,UACjC;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,QAAQ,IAAI,OAAO,GAAG;AAAA,cAC/B,aAAa,KAAK,MAAM;AAAA;AAAA,UAC1B;AAAA;AAAA;AAAA,IACF,GACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"b04bfec534013c327fd210571832bbd2813a944a"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return U_=function(){return s},s}U_();class lSe extends On.Component{render(){return U_().f[0]++,U_().s[0]++,te.jsx("li",{className:"maputnik-layer-list-group",children:te.jsxs("div",{className:"maputnik-layer-list-group-header","data-wd-key":"layer-list-group:"+this.props["data-wd-key"],onClick:e=>(U_().f[1]++,U_().s[1]++,this.props.onActiveToggle(!this.props.isActive)),children:[te.jsx("button",{className:"maputnik-layer-list-group-title","aria-controls":this.props["aria-controls"],"aria-expanded":this.props.isActive,children:this.props.title}),te.jsx("span",{className:"maputnik-space"}),te.jsx(aSe,{style:{height:14,width:14},isCollapsed:this.props.isActive})]})})}}function ji(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerListItem.tsx",e="65a9cb0d1a08cfab21a14c1632991e31e3063aa8",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/LayerListItem.tsx",statementMap:{0:{start:{line:9,column:23},end:{line:22,column:1}},1:{start:{line:10,column:44},end:{line:10,column:49}},2:{start:{line:11,column:2},end:{line:21,column:7}},3:{start:{line:25,column:4},end:{line:34,column:5}},4:{start:{line:27,column:8},end:{line:27,column:54}},5:{start:{line:29,column:8},end:{line:29,column:53}},6:{start:{line:31,column:8},end:{line:31,column:56}},7:{start:{line:33,column:8},end:{line:33,column:49}},8:{start:{line:37,column:51},end:{line:37,column:61}},9:{start:{line:38,column:25},end:{line:38,column:27}},10:{start:{line:39,column:4},end:{line:44,column:5}},11:{start:{line:40,column:6},end:{line:40,column:76}},12:{start:{line:41,column:6},end:{line:43,column:7}},13:{start:{line:42,column:8},end:{line:42,column:103}},14:{start:{line:45,column:4},end:{line:56,column:6}},15:{start:{line:59,column:22},end:{line:145,column:2}},16:{start:{line:69,column:6},end:{line:69,column:11}},17:{start:{line:77,column:6},end:{line:77,column:40}},18:{start:{line:78,column:16},end:{line:82,column:3}},19:{start:{line:83,column:27},end:{line:83,column:69}},20:{start:{line:84,column:20},end:{line:84,column:23}},21:{start:{line:85,column:2},end:{line:144,column:7}},22:{start:{line:89,column:8},end:{line:89,column:25}},23:{start:{line:90,column:8},end:{line:92,column:9}},24:{start:{line:91,column:10},end:{line:91,column:35}},25:{start:{line:96,column:23},end:{line:96,column:60}},26:{start:{line:120,column:29},end:{line:120,column:61}},27:{start:{line:129,column:29},end:{line:129,column:58}},28:{start:{line:139,column:29},end:{line:139,column:70}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:23},end:{line:9,column:24}},loc:{start:{line:9,column:34},end:{line:22,column:1}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:24,column:2},end:{line:24,column:3}},loc:{start:{line:24,column:15},end:{line:35,column:3}},line:24},2:{name:"(anonymous_2)",decl:{start:{line:36,column:2},end:{line:36,column:3}},loc:{start:{line:36,column:11},end:{line:57,column:3}},line:36},3:{name:"(anonymous_3)",decl:{start:{line:59,column:39},end:{line:59,column:40}},loc:{start:{line:59,column:55},end:{line:145,column:1}},line:59},4:{name:"(anonymous_4)",decl:{start:{line:63,column:18},end:{line:63,column:19}},loc:{start:{line:63,column:24},end:{line:64,column:5}},line:63},5:{name:"(anonymous_5)",decl:{start:{line:65,column:21},end:{line:65,column:22}},loc:{start:{line:65,column:27},end:{line:66,column:5}},line:65},6:{name:"(anonymous_6)",decl:{start:{line:67,column:30},end:{line:67,column:31}},loc:{start:{line:67,column:36},end:{line:68,column:5}},line:67},7:{name:"(anonymous_7)",decl:{start:{line:88,column:11},end:{line:88,column:12}},loc:{start:{line:88,column:21},end:{line:93,column:7}},line:88},8:{name:"(anonymous_8)",decl:{start:{line:96,column:15},end:{line:96,column:16}},loc:{start:{line:96,column:23},end:{line:96,column:60}},line:96},9:{name:"(anonymous_9)",decl:{start:{line:120,column:21},end:{line:120,column:22}},loc:{start:{line:120,column:29},end:{line:120,column:61}},line:120},10:{name:"(anonymous_10)",decl:{start:{line:129,column:21},end:{line:129,column:22}},loc:{start:{line:129,column:29},end:{line:129,column:58}},line:129},11:{name:"(anonymous_11)",decl:{start:{line:139,column:21},end:{line:139,column:22}},loc:{start:{line:139,column:29},end:{line:139,column:70}},line:139}},branchMap:{0:{loc:{start:{line:25,column:4},end:{line:34,column:5}},type:"switch",locations:[{start:{line:26,column:6},end:{line:27,column:54}},{start:{line:28,column:6},end:{line:29,column:53}},{start:{line:30,column:6},end:{line:31,column:56}},{start:{line:32,column:6},end:{line:33,column:49}}],line:25},1:{loc:{start:{line:39,column:4},end:{line:44,column:5}},type:"if",locations:[{start:{line:39,column:4},end:{line:44,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:39},2:{loc:{start:{line:41,column:6},end:{line:43,column:7}},type:"if",locations:[{start:{line:41,column:6},end:{line:43,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:41},3:{loc:{start:{line:61,column:4},end:{line:61,column:22}},type:"default-arg",locations:[{start:{line:61,column:17},end:{line:61,column:22}}],line:61},4:{loc:{start:{line:62,column:4},end:{line:62,column:26}},type:"default-arg",locations:[{start:{line:62,column:17},end:{line:62,column:26}}],line:62},5:{loc:{start:{line:63,column:4},end:{line:64,column:5}},type:"default-arg",locations:[{start:{line:63,column:18},end:{line:64,column:5}}],line:63},6:{loc:{start:{line:65,column:4},end:{line:66,column:5}},type:"default-arg",locations:[{start:{line:65,column:21},end:{line:66,column:5}}],line:65},7:{loc:{start:{line:67,column:4},end:{line:68,column:5}},type:"default-arg",locations:[{start:{line:67,column:30},end:{line:68,column:5}}],line:67},8:{loc:{start:{line:81,column:13},end:{line:81,column:33}},type:"cond-expr",locations:[{start:{line:81,column:26},end:{line:81,column:29}},{start:{line:81,column:32},end:{line:81,column:33}}],line:81},9:{loc:{start:{line:83,column:27},end:{line:83,column:69}},type:"cond-expr",locations:[{start:{line:83,column:54},end:{line:83,column:60}},{start:{line:83,column:63},end:{line:83,column:69}}],line:83},10:{loc:{start:{line:90,column:8},end:{line:92,column:9}},type:"if",locations:[{start:{line:90,column:8},end:{line:92,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:90}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},b:{0:[0,0,0,0],1:[0,0],2:[0,0],3:[0],4:[0],5:[0],6:[0],7:[0],8:[0,0],9:[0,0],10:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerListItem.tsx"],names:[],mappings:"AAmBS,SACL,KADK;AAnBT,OAAO,WAAW;AAClB,OAAO,gBAAgB;AACvB,SAAQ,eAAe,cAAc,iBAAiB,gBAAe;AACrE,SAAS,mBAAmB;AAC5B,SAAQ,mBAAkB;AAC1B,SAAQ,WAAU;AAElB,OAAO,eAAe;AAUtB,MAAM,iBAAgD,CAAC,UAAU;AAC/D,QAAM,EAAC,gBAAgB,cAAa,IAAI;AACxC,SAAO,qBAAC,SAAI,WAAU,mCAAmC,GAAG,gBAAiB,GAAG,eAC9E;AAAA;AAAA,MAAC;AAAA;AAAA,QACC,WAAU;AAAA,QACV,MAAM,MAAM;AAAA,QACZ,OAAO,EAAE,OAAO,OAAO,QAAQ,OAAO,eAAe,SAAS;AAAA;AAAA,IAChE;AAAA,IACA,oBAAC,YAAO,WAAU,+BACf,gBAAM,SACT;AAAA,KACF;AACF;AAUA,MAAM,mBAAmB,MAAM,UAA2B;AAAA,EACxD,aAAa;AACX,YAAO,KAAK,MAAM,QAAQ;AAAA,MACxB,KAAK;AAAa,eAAO,oBAAC,iBAAc;AAAA,MACxC,KAAK;AAAQ,eAAO,oBAAC,gBAAa;AAAA,MAClC,KAAK;AAAQ,eAAO,oBAAC,mBAAgB;AAAA,MACrC,KAAK;AAAU,eAAO,oBAAC,YAAS;AAAA,IAClC;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,gBAAgB,mBAAkB,IAAI,KAAK;AAElD,QAAI,iBAAiB;AACrB,QAAI,gBAAgB;AAClB,uBAAiB,oCAAoC,cAAc;AAEnE,UAAI,oBAAoB;AACtB,0BAAkB,qCAAqC,cAAc,KAAK,kBAAkB;AAAA,MAC9F;AAAA,IACF;AAEA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,UAAU;AAAA,QACV,OAAO,KAAK,MAAM;AAAA,QAClB,WAAW,mCAAmC,cAAc;AAAA,QAC5D,eAAa,KAAK,MAAM;AAAA,QACxB,SAAS,KAAK,MAAM;AAAA,QACpB,eAAY;AAAA,QAEX,eAAK,WAAW;AAAA;AAAA,IACnB;AAAA,EACF;AACF;AAgBA,MAAM,gBAAgB,MAAM,WAA8C,CAAC,OAAO,QAAQ;AACxF,QAAM;AAAA,IACJ,aAAa;AAAA,IACb,aAAa;AAAA,IACb,cAAc,MAAM;AAAA,IAAC;AAAA,IACrB,iBAAiB,MAAM;AAAA,IAAC;AAAA,IACxB,0BAA0B,MAAM;AAAA,IAAC;AAAA,EACnC,IAAI;AAEJ,QAAM;AAAA,IACJ;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACF,IAAI,YAAY,EAAC,IAAI,MAAM,QAAO,CAAC;AAEnC,QAAM,QAAQ;AAAA,IACZ,WAAW,IAAI,UAAU,SAAS,SAAS;AAAA,IAC3C;AAAA,IACA,SAAS,aAAa,MAAM;AAAA,EAC9B;AAEA,QAAM,mBAAmB,eAAe,YAAY,SAAS;AAG7D,QAAM,YAAY;AAElB,SAAO,oBAAC,YAAY,UAAZ,EAAqB,OAAO,EAAC,MAAM,OAAM,GAC/C;AAAA,IAAC;AAAA;AAAA,MACC,KAAK,CAAC,SAAS;AACb,mBAAW,IAAI;AACf,YAAI,WAAW;AACb,oBAAU,UAAU;AAAA,QACtB;AAAA,MACF;AAAA,MACA;AAAA,MACA,IAAI,MAAM;AAAA,MACV,SAAS,QAAM,MAAM,cAAc,MAAM,UAAU;AAAA,MACnD,eAAa,qBAAqB,MAAM;AAAA,MACxC,WAAW,WAAW;AAAA,QACpB,4BAA4B;AAAA,QAC5B,qCAAqC;AAAA,QACrC,CAAC,MAAM,SAAU,GAAG;AAAA,MACtB,CAAC;AAAA,MACD;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,SAAS,MAAM;AAAA,YACf,WAAW,MAAM;AAAA,YACjB,gBAAgB;AAAA,YAChB,eAAe;AAAA;AAAA,QACjB;AAAA,QACA,oBAAC,UAAK,OAAO,EAAC,UAAU,EAAC,GAAG;AAAA,QAC5B;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,qBAAqB,MAAM,UAAQ;AAAA,YAC1C,QAAQ;AAAA,YACR,gBAAe;AAAA,YACf,SAAS,QAAM,eAAgB,MAAM,UAAU;AAAA;AAAA,QACjD;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,qBAAqB,MAAM,UAAQ;AAAA,YAC1C,QAAQ;AAAA,YACR,gBAAe;AAAA,YACf,SAAS,QAAM,YAAa,MAAM,UAAU;AAAA;AAAA,QAC9C;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,qBAAmB,MAAM,UAAQ;AAAA,YACxC,QAAQ;AAAA,YACR,gBAAe;AAAA,YACf,oBAAoB;AAAA,YACpB,SAAS,QAAM,wBAAyB,MAAM,UAAU;AAAA;AAAA,QAC1D;AAAA;AAAA;AAAA,EACF,GACF;AACF,CAAC;AAED,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"65a9cb0d1a08cfab21a14c1632991e31e3063aa8"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return ji=function(){return s},s}ji();ji().s[0]++;const uSe=n=>{ji().f[0]++;const{dragAttributes:e,dragListeners:t}=(ji().s[1]++,n);return ji().s[2]++,te.jsxs("div",{className:"maputnik-layer-list-item-handle",...e,...t,children:[te.jsx(AZ,{className:"layer-handle__icon",type:n.layerType,style:{width:"1em",height:"1em",verticalAlign:"middle"}}),te.jsx("button",{className:"maputnik-layer-list-item-id",children:n.layerId})]})};class s8 extends On.Component{renderIcon(){switch(ji().f[1]++,ji().s[3]++,this.props.action){case"duplicate":return ji().b[0][0]++,ji().s[4]++,te.jsx(Vhe,{});case"show":return ji().b[0][1]++,ji().s[5]++,te.jsx(qhe,{});case"hide":return ji().b[0][2]++,ji().s[6]++,te.jsx(Yhe,{});case"delete":return ji().b[0][3]++,ji().s[7]++,te.jsx(nC,{})}}render(){ji().f[2]++;const{classBlockName:e,classBlockModifier:t}=(ji().s[8]++,this.props);let i=(ji().s[9]++,"");return ji().s[10]++,e?(ji().b[1][0]++,ji().s[11]++,i=`maputnik-layer-list-icon-action__${e}`,ji().s[12]++,t?(ji().b[2][0]++,ji().s[13]++,i+=` maputnik-layer-list-icon-action__${e}--${t}`):ji().b[2][1]++):ji().b[1][1]++,ji().s[14]++,te.jsx("button",{tabIndex:-1,title:this.props.action,className:`maputnik-layer-list-icon-action ${i}`,"data-wd-key":this.props.wdKey,onClick:this.props.onClick,"aria-hidden":"true",children:this.renderIcon()})}}const cSe=(ji().s[15]++,On.forwardRef((n,e)=>{ji().f[3]++;const{isSelected:t=(ji().b[3][0]++,!1),visibility:i=(ji().b[4][0]++,"visible"),onLayerCopy:r=(ji().b[5][0]++,()=>{ji().f[4]++}),onLayerDestroy:o=(ji().b[6][0]++,()=>{ji().f[5]++}),onLayerVisibilityToggle:s=(ji().b[7][0]++,()=>{ji().f[6]++})}=(ji().s[16]++,n),{attributes:a,listeners:c,setNodeRef:h,transform:m,transition:v,isDragging:x}=(ji().s[17]++,oSe({id:n.layerId})),E=(ji().s[18]++,{transform:E4.Transform.toString(m),transition:v,opacity:x?(ji().b[8][0]++,.5):(ji().b[8][1]++,1)}),D=(ji().s[19]++,i==="visible"?(ji().b[9][0]++,"show"):(ji().b[9][1]++,"hide")),P=(ji().s[20]++,e);return ji().s[21]++,te.jsx(lx.Provider,{value:{size:"14px"},children:te.jsxs("li",{ref:F=>{ji().f[7]++,ji().s[22]++,h(F),ji().s[23]++,P?(ji().b[10][0]++,ji().s[24]++,P.current=F):ji().b[10][1]++},style:E,id:n.id,onClick:F=>(ji().f[8]++,ji().s[25]++,n.onLayerSelect(n.layerIndex)),"data-wd-key":"layer-list-item:"+n.layerId,className:f0({"maputnik-layer-list-item":!0,"maputnik-layer-list-item-selected":t,[n.className]:!0}),children:[te.jsx(uSe,{layerId:n.layerId,layerType:n.layerType,dragAttributes:a,dragListeners:c}),te.jsx("span",{style:{flexGrow:1}}),te.jsx(s8,{wdKey:"layer-list-item:"+n.layerId+":delete",action:"delete",classBlockName:"delete",onClick:F=>(ji().f[9]++,ji().s[26]++,o(n.layerIndex))}),te.jsx(s8,{wdKey:"layer-list-item:"+n.layerId+":copy",action:"duplicate",classBlockName:"duplicate",onClick:F=>(ji().f[10]++,ji().s[27]++,r(n.layerIndex))}),te.jsx(s8,{wdKey:"layer-list-item:"+n.layerId+":toggle-visibility",action:D,classBlockName:"visibility",classBlockModifier:D,onClick:F=>(ji().f[11]++,ji().s[28]++,s(n.layerIndex))})]})})}));function $S(){var n="/home/runner/work/maputnik/maputnik/src/components/InputButton.tsx",e="522bfc6b8aacbfd03b55d947af2897dc69beb570",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputButton.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:20,column:6}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:21,column:3}},line:5}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputButton.tsx"],names:[],mappings:"AAkBW;AAlBX,OAAO,WAAW;AAClB,OAAO,gBAAgB;AAevB,qBAAqB,oBAAoB,MAAM,UAA4B;AAAA,EACzE,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,IAAI,KAAK,MAAM;AAAA,QACf,OAAO,KAAK,MAAM;AAAA,QAClB,MAAM,KAAK,MAAM;AAAA,QACjB,SAAS,KAAK,MAAM;AAAA,QACpB,UAAU,KAAK,MAAM;AAAA,QACrB,cAAY,KAAK,MAAM,YAAY;AAAA,QACnC,WAAW,WAAW,mBAAmB,KAAK,MAAM,SAAS;AAAA,QAC7D,eAAa,KAAK,MAAM,aAAa;AAAA,QACrC,OAAO,KAAK,MAAM;AAAA,QAEjB,eAAK,MAAM;AAAA;AAAA,IACd;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"522bfc6b8aacbfd03b55d947af2897dc69beb570"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return $S=function(){return s},s}$S();class Gs extends On.Component{render(){return $S().f[0]++,$S().s[0]++,te.jsx("button",{id:this.props.id,title:this.props.title,type:this.props.type,onClick:this.props.onClick,disabled:this.props.disabled,"aria-label":this.props["aria-label"],className:f0("maputnik-button",this.props.className),"data-wd-key":this.props["data-wd-key"],style:this.props.style,children:this.props.children})}}var a8={exports:{}},l8,MG;function ASe(){if(MG)return l8;MG=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return l8=n,l8}var u8,wG;function hSe(){if(wG)return u8;wG=1;var n=ASe();function e(){}function t(){}return t.resetWarningCache=e,u8=function(){function i(s,a,c,h,m,v){if(v!==n){var x=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw x.name="Invariant Violation",x}}i.isRequired=i;function r(){return i}var o={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:r,element:i,elementType:i,instanceOf:r,node:i,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:t,resetWarningCache:e};return o.PropTypes=o,o},u8}var SG;function M1(){return SG||(SG=1,a8.exports=hSe()()),a8.exports}/*!
* tabbable 6.3.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var Aie=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],HS=Aie.join(","),hie=typeof Element>"u",eC=hie?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,ZS=!hie&&Element.prototype.getRootNode?function(n){var e;return n==null||(e=n.getRootNode)===null||e===void 0?void 0:e.call(n)}:function(n){return n?.ownerDocument},O4=function(e,t){var i;t===void 0&&(t=!0);var r=e==null||(i=e.getAttribute)===null||i===void 0?void 0:i.call(e,"inert"),o=r===""||r==="true",s=o||t&&e&&O4(e.parentNode);return s},dSe=function(e){var t,i=e==null||(t=e.getAttribute)===null||t===void 0?void 0:t.call(e,"contenteditable");return i===""||i==="true"},die=function(e,t,i){if(O4(e))return[];var r=Array.prototype.slice.apply(e.querySelectorAll(HS));return t&&eC.call(e,HS)&&r.unshift(e),r=r.filter(i),r},XS=function(e,t,i){for(var r=[],o=Array.from(e);o.length;){var s=o.shift();if(!O4(s,!1))if(s.tagName==="SLOT"){var a=s.assignedElements(),c=a.length?a:s.children,h=XS(c,!0,i);i.flatten?r.push.apply(r,h):r.push({scopeParent:s,candidates:h})}else{var m=eC.call(s,HS);m&&i.filter(s)&&(t||!e.includes(s))&&r.push(s);var v=s.shadowRoot||typeof i.getShadowRoot=="function"&&i.getShadowRoot(s),x=!O4(v,!1)&&(!i.shadowRootFilter||i.shadowRootFilter(s));if(v&&x){var E=XS(v===!0?s.children:v.children,!0,i);i.flatten?r.push.apply(r,E):r.push({scopeParent:s,candidates:E})}else o.unshift.apply(o,s.children)}}return r},fie=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},Ry=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||dSe(e))&&!fie(e)?0:e.tabIndex},fSe=function(e,t){var i=Ry(e);return i<0&&t&&!fie(e)?0:i},pSe=function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex},pie=function(e){return e.tagName==="INPUT"},mSe=function(e){return pie(e)&&e.type==="hidden"},gSe=function(e){var t=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(i){return i.tagName==="SUMMARY"});return t},ySe=function(e,t){for(var i=0;i<e.length;i++)if(e[i].checked&&e[i].form===t)return e[i]},vSe=function(e){if(!e.name)return!0;var t=e.form||ZS(e),i=function(a){return t.querySelectorAll('input[type="radio"][name="'+a+'"]')},r;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")r=i(window.CSS.escape(e.name));else try{r=i(e.name)}catch(s){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",s.message),!1}var o=ySe(r,e.form);return!o||o===e},bSe=function(e){return pie(e)&&e.type==="radio"},CSe=function(e){return bSe(e)&&!vSe(e)},_Se=function(e){var t,i=e&&ZS(e),r=(t=i)===null||t===void 0?void 0:t.host,o=!1;if(i&&i!==e){var s,a,c;for(o=!!((s=r)!==null&&s!==void 0&&(a=s.ownerDocument)!==null&&a!==void 0&&a.contains(r)||e!=null&&(c=e.ownerDocument)!==null&&c!==void 0&&c.contains(e));!o&&r;){var h,m,v;i=ZS(r),r=(h=i)===null||h===void 0?void 0:h.host,o=!!((m=r)!==null&&m!==void 0&&(v=m.ownerDocument)!==null&&v!==void 0&&v.contains(r))}}return o},EG=function(e){var t=e.getBoundingClientRect(),i=t.width,r=t.height;return i===0&&r===0},xSe=function(e,t){var i=t.displayCheck,r=t.getShadowRoot;if(i==="full-native"&&"checkVisibility"in e){var o=e.checkVisibility({checkOpacity:!1,opacityProperty:!1,contentVisibilityAuto:!0,visibilityProperty:!0,checkVisibilityCSS:!0});return!o}if(getComputedStyle(e).visibility==="hidden")return!0;var s=eC.call(e,"details>summary:first-of-type"),a=s?e.parentElement:e;if(eC.call(a,"details:not([open]) *"))return!0;if(!i||i==="full"||i==="full-native"||i==="legacy-full"){if(typeof r=="function"){for(var c=e;e;){var h=e.parentElement,m=ZS(e);if(h&&!h.shadowRoot&&r(h)===!0)return EG(e);e.assignedSlot?e=e.assignedSlot:!h&&m!==e.ownerDocument?e=m.host:e=h}e=c}if(_Se(e))return!e.getClientRects().length;if(i!=="legacy-full")return!0}else if(i==="non-zero-area")return EG(e);return!1},MSe=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var t=e.parentElement;t;){if(t.tagName==="FIELDSET"&&t.disabled){for(var i=0;i<t.children.length;i++){var r=t.children.item(i);if(r.tagName==="LEGEND")return eC.call(t,"fieldset[disabled] *")?!0:!r.contains(e)}return!0}t=t.parentElement}return!1},JS=function(e,t){return!(t.disabled||O4(t)||mSe(t)||xSe(t,e)||gSe(t)||MSe(t))},OR=function(e,t){return!(CSe(t)||Ry(t)<0||!JS(e,t))},wSe=function(e){var t=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(t)||t>=0)},mie=function(e){var t=[],i=[];return e.forEach(function(r,o){var s=!!r.scopeParent,a=s?r.scopeParent:r,c=fSe(a,s),h=s?mie(r.candidates):a;c===0?s?t.push.apply(t,h):t.push(a):i.push({documentOrder:o,tabIndex:c,item:r,isScope:s,content:h})}),i.sort(pSe).reduce(function(r,o){return o.isScope?r.push.apply(r,o.content):r.push(o.content),r},[]).concat(t)},gie=function(e,t){t=t||{};var i;return t.getShadowRoot?i=XS([e],t.includeContainer,{filter:OR.bind(null,t),flatten:!1,getShadowRoot:t.getShadowRoot,shadowRootFilter:wSe}):i=die(e,t.includeContainer,OR.bind(null,t)),mie(i)},yie=function(e,t){t=t||{};var i;return t.getShadowRoot?i=XS([e],t.includeContainer,{filter:JS.bind(null,t),flatten:!0,getShadowRoot:t.getShadowRoot}):i=die(e,t.includeContainer,JS.bind(null,t)),i},hb=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return eC.call(e,HS)===!1?!1:OR(t,e)},SSe=Aie.concat("iframe").join(","),Ew=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return eC.call(e,SSe)===!1?!1:JS(t,e)};const ESe=Object.freeze(Object.defineProperty({__proto__:null,focusable:yie,getTabIndex:Ry,isFocusable:Ew,isTabbable:hb,tabbable:gie},Symbol.toStringTag,{value:"Module"}));/*!
* focus-trap 7.6.6
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function IR(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=Array(e);t<e;t++)i[t]=n[t];return i}function BSe(n){if(Array.isArray(n))return IR(n)}function OSe(n,e,t){return(e=DSe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function ISe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function kSe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function BG(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function OG(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?BG(Object(t),!0).forEach(function(i){OSe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):BG(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function TSe(n){return BSe(n)||ISe(n)||PSe(n)||kSe()}function RSe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function DSe(n){var e=RSe(n,"string");return typeof e=="symbol"?e:e+""}function PSe(n,e){if(n){if(typeof n=="string")return IR(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?IR(n,e):void 0}}var IG={activateTrap:function(e,t){if(e.length>0){var i=e[e.length-1];i!==t&&i._setPausedState(!0)}var r=e.indexOf(t);r===-1||e.splice(r,1),e.push(t)},deactivateTrap:function(e,t){var i=e.indexOf(t);i!==-1&&e.splice(i,1),e.length>0&&!e[e.length-1]._isManuallyPaused()&&e[e.length-1]._setPausedState(!1)}},USe=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},KSe=function(e){return e?.key==="Escape"||e?.key==="Esc"||e?.keyCode===27},w3=function(e){return e?.key==="Tab"||e?.keyCode===9},LSe=function(e){return w3(e)&&!e.shiftKey},FSe=function(e){return w3(e)&&e.shiftKey},kG=function(e){return setTimeout(e,0)},w2=function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];return typeof e=="function"?e.apply(void 0,i):e},F5=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},zSe=[],jSe=function(e,t){var i=t?.document||document,r=t?.trapStack||zSe,o=OG({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:LSe,isKeyBackward:FSe},t),s={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,manuallyPaused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},a,c=function(Me,Te,je){return Me&&Me[Te]!==void 0?Me[Te]:o[je||Te]},h=function(Me,Te){var je=typeof Te?.composedPath=="function"?Te.composedPath():void 0;return s.containerGroups.findIndex(function(Ee){var qe=Ee.container,At=Ee.tabbableNodes;return qe.contains(Me)||je?.includes(qe)||At.find(function(gt){return gt===Me})})},m=function(Me){var Te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},je=Te.hasFallback,Ee=je===void 0?!1:je,qe=Te.params,At=qe===void 0?[]:qe,gt=o[Me];if(typeof gt=="function"&&(gt=gt.apply(void 0,TSe(At))),gt===!0&&(gt=void 0),!gt){if(gt===void 0||gt===!1)return gt;throw new Error("`".concat(Me,"` was specified but was not a node, or did not return a node"))}var Le=gt;if(typeof gt=="string"){try{Le=i.querySelector(gt)}catch(Re){throw new Error("`".concat(Me,'` appears to be an invalid selector; error="').concat(Re.message,'"'))}if(!Le&&!Ee)throw new Error("`".concat(Me,"` as selector refers to no known node"))}return Le},v=function(){var Me=m("initialFocus",{hasFallback:!0});if(Me===!1)return!1;if(Me===void 0||Me&&!Ew(Me,o.tabbableOptions))if(h(i.activeElement)>=0)Me=i.activeElement;else{var Te=s.tabbableGroups[0],je=Te&&Te.firstTabbableNode;Me=je||m("fallbackFocus")}else Me===null&&(Me=m("fallbackFocus"));if(!Me)throw new Error("Your focus-trap needs to have at least one focusable element");return Me},x=function(){if(s.containerGroups=s.containers.map(function(Me){var Te=gie(Me,o.tabbableOptions),je=yie(Me,o.tabbableOptions),Ee=Te.length>0?Te[0]:void 0,qe=Te.length>0?Te[Te.length-1]:void 0,At=je.find(function(Re){return hb(Re)}),gt=je.slice().reverse().find(function(Re){return hb(Re)}),Le=!!Te.find(function(Re){return Ry(Re)>0});return{container:Me,tabbableNodes:Te,focusableNodes:je,posTabIndexesFound:Le,firstTabbableNode:Ee,lastTabbableNode:qe,firstDomTabbableNode:At,lastDomTabbableNode:gt,nextTabbableNode:function(Ge){var De=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,_t=Te.indexOf(Ge);return _t<0?De?je.slice(je.indexOf(Ge)+1).find(function(at){return hb(at)}):je.slice(0,je.indexOf(Ge)).reverse().find(function(at){return hb(at)}):Te[_t+(De?1:-1)]}}}),s.tabbableGroups=s.containerGroups.filter(function(Me){return Me.tabbableNodes.length>0}),s.tabbableGroups.length<=0&&!m("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(s.containerGroups.find(function(Me){return Me.posTabIndexesFound})&&s.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")},E=function(Me){var Te=Me.activeElement;if(Te)return Te.shadowRoot&&Te.shadowRoot.activeElement!==null?E(Te.shadowRoot):Te},D=function(Me){if(Me!==!1&&Me!==E(document)){if(!Me||!Me.focus){D(v());return}Me.focus({preventScroll:!!o.preventScroll}),s.mostRecentlyFocusedNode=Me,USe(Me)&&Me.select()}},P=function(Me){var Te=m("setReturnFocus",{params:[Me]});return Te||(Te===!1?!1:Me)},F=function(Me){var Te=Me.target,je=Me.event,Ee=Me.isBackward,qe=Ee===void 0?!1:Ee;Te=Te||F5(je),x();var At=null;if(s.tabbableGroups.length>0){var gt=h(Te,je),Le=gt>=0?s.containerGroups[gt]:void 0;if(gt<0)qe?At=s.tabbableGroups[s.tabbableGroups.length-1].lastTabbableNode:At=s.tabbableGroups[0].firstTabbableNode;else if(qe){var Re=s.tabbableGroups.findIndex(function(Kt){var Ke=Kt.firstTabbableNode;return Te===Ke});if(Re<0&&(Le.container===Te||Ew(Te,o.tabbableOptions)&&!hb(Te,o.tabbableOptions)&&!Le.nextTabbableNode(Te,!1))&&(Re=gt),Re>=0){var Ge=Re===0?s.tabbableGroups.length-1:Re-1,De=s.tabbableGroups[Ge];At=Ry(Te)>=0?De.lastTabbableNode:De.lastDomTabbableNode}else w3(je)||(At=Le.nextTabbableNode(Te,!1))}else{var _t=s.tabbableGroups.findIndex(function(Kt){var Ke=Kt.lastTabbableNode;return Te===Ke});if(_t<0&&(Le.container===Te||Ew(Te,o.tabbableOptions)&&!hb(Te,o.tabbableOptions)&&!Le.nextTabbableNode(Te))&&(_t=gt),_t>=0){var at=_t===s.tabbableGroups.length-1?0:_t+1,Tt=s.tabbableGroups[at];At=Ry(Te)>=0?Tt.firstTabbableNode:Tt.firstDomTabbableNode}else w3(je)||(At=Le.nextTabbableNode(Te))}}else At=m("fallbackFocus");return At},W=function(Me){var Te=F5(Me);if(!(h(Te,Me)>=0)){if(w2(o.clickOutsideDeactivates,Me)){a.deactivate({returnFocus:o.returnFocusOnDeactivate});return}w2(o.allowOutsideClick,Me)||Me.preventDefault()}},q=function(Me){var Te=F5(Me),je=h(Te,Me)>=0;if(je||Te instanceof Document)je&&(s.mostRecentlyFocusedNode=Te);else{Me.stopImmediatePropagation();var Ee,qe=!0;if(s.mostRecentlyFocusedNode)if(Ry(s.mostRecentlyFocusedNode)>0){var At=h(s.mostRecentlyFocusedNode),gt=s.containerGroups[At].tabbableNodes;if(gt.length>0){var Le=gt.findIndex(function(Re){return Re===s.mostRecentlyFocusedNode});Le>=0&&(o.isKeyForward(s.recentNavEvent)?Le+1<gt.length&&(Ee=gt[Le+1],qe=!1):Le-1>=0&&(Ee=gt[Le-1],qe=!1))}}else s.containerGroups.some(function(Re){return Re.tabbableNodes.some(function(Ge){return Ry(Ge)>0})})||(qe=!1);else qe=!1;qe&&(Ee=F({target:s.mostRecentlyFocusedNode,isBackward:o.isKeyBackward(s.recentNavEvent)})),D(Ee||s.mostRecentlyFocusedNode||v())}s.recentNavEvent=void 0},V=function(Me){var Te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;s.recentNavEvent=Me;var je=F({event:Me,isBackward:Te});je&&(w3(Me)&&Me.preventDefault(),D(je))},H=function(Me){(o.isKeyForward(Me)||o.isKeyBackward(Me))&&V(Me,o.isKeyBackward(Me))},X=function(Me){KSe(Me)&&w2(o.escapeDeactivates,Me)!==!1&&(Me.preventDefault(),a.deactivate())},Z=function(Me){var Te=F5(Me);h(Te,Me)>=0||w2(o.clickOutsideDeactivates,Me)||w2(o.allowOutsideClick,Me)||(Me.preventDefault(),Me.stopImmediatePropagation())},G=function(){if(s.active)return IG.activateTrap(r,a),s.delayInitialFocusTimer=o.delayInitialFocus?kG(function(){D(v())}):D(v()),i.addEventListener("focusin",q,!0),i.addEventListener("mousedown",W,{capture:!0,passive:!1}),i.addEventListener("touchstart",W,{capture:!0,passive:!1}),i.addEventListener("click",Z,{capture:!0,passive:!1}),i.addEventListener("keydown",H,{capture:!0,passive:!1}),i.addEventListener("keydown",X),a},oe=function(){if(s.active)return i.removeEventListener("focusin",q,!0),i.removeEventListener("mousedown",W,!0),i.removeEventListener("touchstart",W,!0),i.removeEventListener("click",Z,!0),i.removeEventListener("keydown",H,!0),i.removeEventListener("keydown",X),a},ue=function(Me){var Te=Me.some(function(je){var Ee=Array.from(je.removedNodes);return Ee.some(function(qe){return qe===s.mostRecentlyFocusedNode})});Te&&D(v())},xe=typeof window<"u"&&"MutationObserver"in window?new MutationObserver(ue):void 0,me=function(){xe&&(xe.disconnect(),s.active&&!s.paused&&s.containers.map(function(Me){xe.observe(Me,{subtree:!0,childList:!0})}))};return a={get active(){return s.active},get paused(){return s.paused},activate:function(Me){if(s.active)return this;var Te=c(Me,"onActivate"),je=c(Me,"onPostActivate"),Ee=c(Me,"checkCanFocusTrap");Ee||x(),s.active=!0,s.paused=!1,s.nodeFocusedBeforeActivation=E(i),Te?.();var qe=function(){Ee&&x(),G(),me(),je?.()};return Ee?(Ee(s.containers.concat()).then(qe,qe),this):(qe(),this)},deactivate:function(Me){if(!s.active)return this;var Te=OG({onDeactivate:o.onDeactivate,onPostDeactivate:o.onPostDeactivate,checkCanReturnFocus:o.checkCanReturnFocus},Me);clearTimeout(s.delayInitialFocusTimer),s.delayInitialFocusTimer=void 0,oe(),s.active=!1,s.paused=!1,me(),IG.deactivateTrap(r,a);var je=c(Te,"onDeactivate"),Ee=c(Te,"onPostDeactivate"),qe=c(Te,"checkCanReturnFocus"),At=c(Te,"returnFocus","returnFocusOnDeactivate");je?.();var gt=function(){kG(function(){At&&D(P(s.nodeFocusedBeforeActivation)),Ee?.()})};return At&&qe?(qe(P(s.nodeFocusedBeforeActivation)).then(gt,gt),this):(gt(),this)},pause:function(Me){return s.active?(s.manuallyPaused=!0,this._setPausedState(!0,Me)):this},unpause:function(Me){return s.active?(s.manuallyPaused=!1,r[r.length-1]!==this?this:this._setPausedState(!1,Me)):this},updateContainerElements:function(Me){var Te=[].concat(Me).filter(Boolean);return s.containers=Te.map(function(je){return typeof je=="string"?i.querySelector(je):je}),s.active&&x(),me(),this}},Object.defineProperties(a,{_isManuallyPaused:{value:function(){return s.manuallyPaused}},_setPausedState:{value:function(Me,Te){if(s.paused===Me)return this;if(s.paused=Me,Me){var je=c(Te,"onPause"),Ee=c(Te,"onPostPause");je?.(),oe(),me(),Ee?.()}else{var qe=c(Te,"onUnpause"),At=c(Te,"onPostUnpause");qe?.(),x(),G(),me(),At?.()}return this}}}),a.updateContainerElements(e),a};const NSe=Object.freeze(Object.defineProperty({__proto__:null,createFocusTrap:jSe},Symbol.toStringTag,{value:"Module"})),GSe=d$(NSe),WSe=d$(ESe);var c8,TG;function QSe(){if(TG)return c8;TG=1;function n(Z){"@babel/helpers - typeof";return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(G){return typeof G}:function(G){return G&&typeof Symbol=="function"&&G.constructor===Symbol&&G!==Symbol.prototype?"symbol":typeof G},n(Z)}function e(Z,G){if(!(Z instanceof G))throw new TypeError("Cannot call a class as a function")}function t(Z,G){for(var oe=0;oe<G.length;oe++){var ue=G[oe];ue.enumerable=ue.enumerable||!1,ue.configurable=!0,"value"in ue&&(ue.writable=!0),Object.defineProperty(Z,x(ue.key),ue)}}function i(Z,G,oe){return G&&t(Z.prototype,G),Object.defineProperty(Z,"prototype",{writable:!1}),Z}function r(Z,G,oe){return G=c(G),o(Z,a()?Reflect.construct(G,oe||[],c(Z).constructor):G.apply(Z,oe))}function o(Z,G){if(G&&(n(G)=="object"||typeof G=="function"))return G;if(G!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return s(Z)}function s(Z){if(Z===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Z}function a(){try{var Z=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(a=function(){return!!Z})()}function c(Z){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(G){return G.__proto__||Object.getPrototypeOf(G)},c(Z)}function h(Z,G){if(typeof G!="function"&&G!==null)throw new TypeError("Super expression must either be null or a function");Z.prototype=Object.create(G&&G.prototype,{constructor:{value:Z,writable:!0,configurable:!0}}),Object.defineProperty(Z,"prototype",{writable:!1}),G&&m(Z,G)}function m(Z,G){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(oe,ue){return oe.__proto__=ue,oe},m(Z,G)}function v(Z,G,oe){return(G=x(G))in Z?Object.defineProperty(Z,G,{value:oe,enumerable:!0,configurable:!0,writable:!0}):Z[G]=oe,Z}function x(Z){var G=E(Z,"string");return n(G)=="symbol"?G:G+""}function E(Z,G){if(n(Z)!="object"||!Z)return Z;var oe=Z[Symbol.toPrimitive];if(oe!==void 0){var ue=oe.call(Z,G);if(n(ue)!="object")return ue;throw new TypeError("@@toPrimitive must return a primitive value.")}return(G==="string"?String:Number)(Z)}var D=Oa(),P=M1(),F=GSe,W=F.createFocusTrap,q=WSe,V=q.isFocusable,H=(function(Z){function G(oe){var ue;e(this,G),ue=r(this,G,[oe]),v(ue,"getNodeForOption",function(Ie){var Me,Te=(Me=this.internalOptions[Ie])!==null&&Me!==void 0?Me:this.originalOptions[Ie];if(typeof Te=="function"){for(var je=arguments.length,Ee=new Array(je>1?je-1:0),qe=1;qe<je;qe++)Ee[qe-1]=arguments[qe];Te=Te.apply(void 0,Ee)}if(Te===!0&&(Te=void 0),!Te){if(Te===void 0||Te===!1)return Te;throw new Error("`".concat(Ie,"` was specified but was not a node, or did not return a node"))}var At=Te;if(typeof Te=="string"){var gt;if(At=(gt=this.getDocument())===null||gt===void 0?void 0:gt.querySelector(Te),!At)throw new Error("`".concat(Ie,"` as selector refers to no known node"))}return At}),ue.handleDeactivate=ue.handleDeactivate.bind(ue),ue.handlePostDeactivate=ue.handlePostDeactivate.bind(ue),ue.handleClickOutsideDeactivates=ue.handleClickOutsideDeactivates.bind(ue),ue.internalOptions={returnFocusOnDeactivate:!1,checkCanReturnFocus:null,onDeactivate:ue.handleDeactivate,onPostDeactivate:ue.handlePostDeactivate,clickOutsideDeactivates:ue.handleClickOutsideDeactivates},ue.originalOptions={returnFocusOnDeactivate:!0,onDeactivate:null,onPostDeactivate:null,checkCanReturnFocus:null,clickOutsideDeactivates:!1};var xe=oe.focusTrapOptions;for(var me in xe)if(Object.prototype.hasOwnProperty.call(xe,me)){if(me==="returnFocusOnDeactivate"||me==="onDeactivate"||me==="onPostDeactivate"||me==="checkCanReturnFocus"||me==="clickOutsideDeactivates"){ue.originalOptions[me]=xe[me];continue}ue.internalOptions[me]=xe[me]}return ue.outsideClick=null,ue.focusTrapElements=oe.containerElements||[],ue.updatePreviousElement(),ue}return h(G,Z),i(G,[{key:"getDocument",value:function(){return this.props.focusTrapOptions.document||(typeof document<"u"?document:void 0)}},{key:"getReturnFocusNode",value:function(){var ue=this.getNodeForOption("setReturnFocus",this.previouslyFocusedElement);return ue||(ue===!1?!1:this.previouslyFocusedElement)}},{key:"updatePreviousElement",value:function(){var ue=this.getDocument();ue&&(this.previouslyFocusedElement=ue.activeElement)}},{key:"deactivateTrap",value:function(){!this.focusTrap||!this.focusTrap.active||this.focusTrap.deactivate({returnFocus:!1,checkCanReturnFocus:null,onDeactivate:this.originalOptions.onDeactivate})}},{key:"handleClickOutsideDeactivates",value:function(ue){var xe=typeof this.originalOptions.clickOutsideDeactivates=="function"?this.originalOptions.clickOutsideDeactivates.call(null,ue):this.originalOptions.clickOutsideDeactivates;return xe&&(this.outsideClick={target:ue.target,allowDeactivation:xe}),xe}},{key:"handleDeactivate",value:function(){this.originalOptions.onDeactivate&&this.originalOptions.onDeactivate.call(null),this.deactivateTrap()}},{key:"handlePostDeactivate",value:function(){var ue=this,xe=function(){var Ie=ue.getReturnFocusNode(),Me=!!(ue.originalOptions.returnFocusOnDeactivate&&Ie!==null&&Ie!==void 0&&Ie.focus&&(!ue.outsideClick||ue.outsideClick.allowDeactivation&&!V(ue.outsideClick.target,ue.internalOptions.tabbableOptions))),Te=ue.internalOptions.preventScroll,je=Te===void 0?!1:Te;Me&&Ie.focus({preventScroll:je}),ue.originalOptions.onPostDeactivate&&ue.originalOptions.onPostDeactivate.call(null),ue.outsideClick=null};this.originalOptions.checkCanReturnFocus?this.originalOptions.checkCanReturnFocus.call(null,this.getReturnFocusNode()).then(xe,xe):xe()}},{key:"setupFocusTrap",value:function(){if(this.focusTrap)this.props.active&&!this.focusTrap.active&&(this.focusTrap.activate(),this.props.paused&&this.focusTrap.pause());else{var ue=this.focusTrapElements.some(Boolean);ue&&(this.focusTrap=this.props._createFocusTrap(this.focusTrapElements,this.internalOptions),this.props.active&&this.focusTrap.activate(),this.props.paused&&this.focusTrap.pause())}}},{key:"componentDidMount",value:function(){this.props.active&&this.setupFocusTrap()}},{key:"componentDidUpdate",value:function(ue){if(this.focusTrap){ue.containerElements!==this.props.containerElements&&this.focusTrap.updateContainerElements(this.props.containerElements);var xe=!ue.active&&this.props.active,me=ue.active&&!this.props.active,Ie=!ue.paused&&this.props.paused,Me=ue.paused&&!this.props.paused;if(xe&&(this.updatePreviousElement(),this.focusTrap.activate()),me){this.deactivateTrap();return}Ie&&this.focusTrap.pause(),Me&&this.focusTrap.unpause()}else ue.containerElements!==this.props.containerElements&&(this.focusTrapElements=this.props.containerElements),this.props.active&&(this.updatePreviousElement(),this.setupFocusTrap())}},{key:"componentWillUnmount",value:function(){this.deactivateTrap()}},{key:"render",value:function(){var ue=this,xe=this.props.children?D.Children.only(this.props.children):void 0;if(xe){if(xe.type&&xe.type===D.Fragment)throw new Error("A focus-trap cannot use a Fragment as its child container. Try replacing it with a <div> element.");var me=function(Te){var je=ue.props.containerElements;xe&&(typeof xe.ref=="function"?xe.ref(Te):xe.ref&&(xe.ref.current=Te)),ue.focusTrapElements=je||[Te]},Ie=D.cloneElement(xe,{ref:me});return Ie}return null}}])})(D.Component),X=typeof Element>"u"?Function:Element;return H.propTypes={active:P.bool,paused:P.bool,focusTrapOptions:P.shape({document:P.object,onActivate:P.func,onPostActivate:P.func,checkCanFocusTrap:P.func,onPause:P.func,onPostPause:P.func,onUnpause:P.func,onPostUnpause:P.func,onDeactivate:P.func,onPostDeactivate:P.func,checkCanReturnFocus:P.func,initialFocus:P.oneOfType([P.instanceOf(X),P.string,P.bool,P.func]),fallbackFocus:P.oneOfType([P.instanceOf(X),P.string,P.func]),escapeDeactivates:P.oneOfType([P.bool,P.func]),clickOutsideDeactivates:P.oneOfType([P.bool,P.func]),returnFocusOnDeactivate:P.bool,setReturnFocus:P.oneOfType([P.instanceOf(X),P.string,P.bool,P.func]),allowOutsideClick:P.oneOfType([P.bool,P.func]),preventScroll:P.bool,tabbableOptions:P.shape({displayCheck:P.oneOf(["full","legacy-full","non-zero-area","none"]),getShadowRoot:P.oneOfType([P.bool,P.func])}),trapStack:P.array,isKeyForward:P.func,isKeyBackward:P.func}),containerElements:P.arrayOf(P.instanceOf(X)),children:P.oneOfType([P.element,P.instanceOf(X)])},H.defaultProps={active:!0,paused:!1,focusTrapOptions:{},_createFocusTrap:W},c8=H,c8}var A8={exports:{}},RG;function YSe(){return RG||(RG=1,(function(n){(function(e){var t=!1,i,r;function o(){if(typeof i<"u")return i;var v=document.documentElement,x=document.createElement("div");return x.setAttribute("style","width:99px;height:99px;position:absolute;top:-9999px;overflow:scroll;"),v.appendChild(x),i=x.offsetWidth-x.clientWidth,v.removeChild(x),i}function s(){return document.documentElement.scrollHeight>window.innerHeight}function a(v){if(!(typeof document>"u"||t)){var x=document.documentElement;r=window.pageYOffset,s()?x.style.width="calc(100% - "+o()+"px)":x.style.width="100%",x.style.position="fixed",x.style.top=-r+"px",x.style.overflow="hidden",t=!0}}function c(){if(!(typeof document>"u"||!t)){var v=document.documentElement;v.style.width="",v.style.position="",v.style.top="",v.style.overflow="",window.scroll(0,r),t=!1}}function h(){if(t){c();return}a()}var m={on:a,off:c,toggle:h};n.exports=m})()})(A8)),A8.exports}var h8,DG;function qSe(){if(DG)return h8;DG=1;function n(V){"@babel/helpers - typeof";return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(H){return typeof H}:function(H){return H&&typeof Symbol=="function"&&H.constructor===Symbol&&H!==Symbol.prototype?"symbol":typeof H},n(V)}function e(V,H){if(!(V instanceof H))throw new TypeError("Cannot call a class as a function")}function t(V,H){for(var X=0;X<H.length;X++){var Z=H[X];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(V,Z.key,Z)}}function i(V,H,X){return H&&t(V.prototype,H),Object.defineProperty(V,"prototype",{writable:!1}),V}function r(V,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");V.prototype=Object.create(H&&H.prototype,{constructor:{value:V,writable:!0,configurable:!0}}),Object.defineProperty(V,"prototype",{writable:!1}),H&&o(V,H)}function o(V,H){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Z,G){return Z.__proto__=G,Z},o(V,H)}function s(V){var H=h();return function(){var Z=m(V),G;if(H){var oe=m(this).constructor;G=Reflect.construct(Z,arguments,oe)}else G=Z.apply(this,arguments);return a(this,G)}}function a(V,H){if(H&&(n(H)==="object"||typeof H=="function"))return H;if(H!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return c(V)}function c(V){if(V===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return V}function h(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function m(V){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(X){return X.__proto__||Object.getPrototypeOf(X)},m(V)}function v(V,H,X){return H in V?Object.defineProperty(V,H,{value:X,enumerable:!0,configurable:!0,writable:!0}):V[H]=X,V}var x=Oa(),E=XR(),D=QSe(),P=YSe(),F=(function(V){r(X,V);var H=s(X);function X(Z){var G;if(e(this,X),G=H.call(this,Z),v(c(G),"getApplicationNode",function(){return G.props.getApplicationNode?G.props.getApplicationNode():G.props.applicationNode}),v(c(G),"checkUnderlayClick",function(oe){G.dialogNode&&G.dialogNode.contains(oe.target)||oe.pageX>oe.target.ownerDocument.documentElement.offsetWidth||oe.pageY>oe.target.ownerDocument.documentElement.offsetHeight||G.exit(oe)}),v(c(G),"checkDocumentKeyDown",function(oe){G.props.escapeExits&&(oe.key==="Escape"||oe.key==="Esc"||oe.keyCode===27)&&G.exit(oe)}),v(c(G),"exit",function(oe){G.props.onExit&&G.props.onExit(oe)}),!Z.titleText&&!Z.titleId)throw new Error("react-aria-modal instances should have a `titleText` or `titleId`");return G}return i(X,[{key:"componentDidMount",value:function(){this.props.onEnter&&this.props.onEnter();var G=this.getApplicationNode();setTimeout(function(){G&&G.setAttribute("aria-hidden","true")},0),this.props.escapeExits&&this.addKeyDownListener(),this.props.scrollDisabled&&P.on()}},{key:"componentDidUpdate",value:function(G){G.scrollDisabled&&!this.props.scrollDisabled?P.off():!G.scrollDisabled&&this.props.scrollDisabled&&P.on(),this.props.escapeExits&&!G.escapeExits?this.addKeyDownListener():!this.props.escapeExits&&G.escapeExits&&this.removeKeyDownListener()}},{key:"componentWillUnmount",value:function(){this.props.scrollDisabled&&P.off();var G=this.getApplicationNode();G&&G.setAttribute("aria-hidden","false"),this.removeKeyDownListener()}},{key:"addKeyDownListener",value:function(){var G=this;setTimeout(function(){document.addEventListener("keydown",G.checkDocumentKeyDown)})}},{key:"removeKeyDownListener",value:function(){var G=this;setTimeout(function(){document.removeEventListener("keydown",G.checkDocumentKeyDown)})}},{key:"render",value:function(){var G=this.props,oe={};if(G.includeDefaultStyles&&(oe={position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:1050,overflowX:"hidden",overflowY:"auto",WebkitOverflowScrolling:"touch",textAlign:"center"},G.underlayColor&&(oe.background=G.underlayColor),G.underlayClickExits&&(oe.cursor="pointer")),G.underlayStyle)for(var ue in G.underlayStyle)G.underlayStyle.hasOwnProperty(ue)&&(oe[ue]=G.underlayStyle[ue]);var xe={className:G.underlayClass,style:oe};G.underlayClickExits&&(xe.onMouseDown=this.checkUnderlayClick);for(var me in this.props.underlayProps)xe[me]=this.props.underlayProps[me];var Ie={};G.includeDefaultStyles&&(Ie={display:"inline-block",height:"100%",verticalAlign:"middle"});var Me={key:"a",style:Ie},Te={};if(G.includeDefaultStyles&&(Te={display:"inline-block",textAlign:"left",top:0,maxWidth:"100%",cursor:"auto",outline:G.focusDialog?0:null},G.verticallyCenter&&(Te.verticalAlign="middle",Te.top=0)),G.dialogStyle)for(var je in G.dialogStyle)G.dialogStyle.hasOwnProperty(je)&&(Te[je]=G.dialogStyle[je]);var Ee={key:"b",ref:(function(Le){this.dialogNode=Le}).bind(this),role:G.alert?"alertdialog":"dialog",id:G.dialogId,className:G.dialogClass,style:Te};G.titleId?Ee["aria-labelledby"]=G.titleId:G.titleText&&(Ee["aria-label"]=G.titleText),G.focusDialog&&(Ee.tabIndex="-1");for(var qe in G)/^(data-|aria-)/.test(qe)&&(Ee[qe]=G[qe]);var At=[x.createElement("div",Ee,G.children)];G.verticallyCenter&&At.unshift(x.createElement("div",Me));var gt=G.focusTrapOptions||{};return(G.focusDialog||G.initialFocus)&&(gt.initialFocus=G.focusDialog?"#".concat(this.props.dialogId):G.initialFocus),gt.escapeDeactivates=G.escapeExits,x.createElement(D,{focusTrapOptions:gt,paused:G.focusTrapPaused},x.createElement("div",xe,At))}}]),X})(x.Component);v(F,"defaultProps",{underlayProps:{},dialogId:"react-aria-modal-dialog",underlayClickExits:!0,escapeExits:!0,underlayColor:"rgba(0,0,0,0.5)",includeDefaultStyles:!0,focusTrapPaused:!1,scrollDisabled:!0});function W(V,H){if(!window.document)return function(){return null};H=H||{};var X=(function(Z){r(oe,Z);var G=s(oe);function oe(){var ue;e(this,oe);for(var xe=arguments.length,me=new Array(xe),Ie=0;Ie<xe;Ie++)me[Ie]=arguments[Ie];return ue=G.call.apply(G,[this].concat(me)),v(c(ue),"container",null),ue}return i(oe,[{key:"componentDidMount",value:function(){H.renderTo?this.container=typeof H.renderTo=="string"?document.querySelector(H.renderTo):H.renderTo:(this.container=document.createElement("div"),document.body.appendChild(this.container)),this.forceUpdate()}},{key:"componentWillUnmount",value:function(){H.renderTo||this.container.parentNode.removeChild(this.container)}},{key:"render",value:function(){return this.container===null||!this.props.mounted?null:E.createPortal(x.createElement(V,this.props,this.props.children),this.container)}}]),oe})(x.Component);return v(X,"defaultProps",{mounted:!0}),X}var q=W(F);return q.renderTo=function(V){return W(F,{renderTo:V})},h8=q,h8}var VSe=qSe();const $Se=Ou(VSe);function Yu(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/Modal.tsx",e="b56a3b702e6eec99855202d1cfe05d2ba4d6a2ce",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/Modal.tsx",statementMap:{0:{start:{line:8,column:24},end:{line:10,column:3}},1:{start:{line:12,column:12},end:{line:19,column:3}},2:{start:{line:13,column:4},end:{line:15,column:5}},3:{start:{line:14,column:6},end:{line:14,column:36}},4:{start:{line:16,column:4},end:{line:18,column:10}},5:{start:{line:17,column:6},end:{line:17,column:32}},6:{start:{line:21,column:14},end:{line:21,column:26}},7:{start:{line:22,column:4},end:{line:60,column:5}},8:{start:{line:23,column:6},end:{line:57,column:8}},9:{start:{line:59,column:6},end:{line:59,column:19}},10:{start:{line:63,column:14},end:{line:63,column:46}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:12,column:12},end:{line:12,column:13}},loc:{start:{line:12,column:18},end:{line:19,column:3}},line:12},1:{name:"(anonymous_1)",decl:{start:{line:16,column:15},end:{line:16,column:16}},loc:{start:{line:16,column:21},end:{line:18,column:5}},line:16},2:{name:"(anonymous_2)",decl:{start:{line:20,column:2},end:{line:20,column:3}},loc:{start:{line:20,column:11},end:{line:61,column:3}},line:20}},branchMap:{0:{loc:{start:{line:13,column:4},end:{line:15,column:5}},type:"if",locations:[{start:{line:13,column:4},end:{line:15,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:13},1:{loc:{start:{line:22,column:4},end:{line:60,column:5}},type:"if",locations:[{start:{line:22,column:4},end:{line:60,column:5}},{start:{line:58,column:11},end:{line:60,column:5}}],line:22}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0},f:{0:0,1:0,2:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/Modal.tsx"],names:[],mappings:"AA8CU,SACE,KADF;AA9CV,OAAO,WAAuC;AAC9C,SAAQ,eAAc;AACtB,OAAO,eAAe;AACtB,OAAO,gBAAgB;AACvB,SAA+B,uBAAuB;AAYtD,MAAM,sBAAsB,MAAM,UAA8B;AAAA,EAC9D,OAAO,eAAe;AAAA,IACpB,oBAAoB;AAAA,EACtB;AAAA;AAAA,EAGA,UAAU,MAAM;AACd,QAAI,SAAS,eAAe;AAC1B,MAAC,SAAS,cAA8B,KAAK;AAAA,IAC/C;AAEA,eAAW,MAAM;AACf,WAAK,MAAM,aAAa;AAAA,IAC1B,GAAG,CAAC;AAAA,EACN;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,QAAG,KAAK,MAAM,QAAQ;AACpB,aAAO;AAAA,QAAC;AAAA;AAAA,UACN,WAAW,KAAK,MAAM;AAAA,UACtB,oBAAoB,KAAK,MAAM;AAAA,UAC/B,eAAa,KAAK,MAAM,aAAa;AAAA,UACrC,kBAAkB;AAAA,UAClB,QAAQ,KAAK;AAAA,UACb,aAAY;AAAA,UAEZ;AAAA,YAAC;AAAA;AAAA,cAAI,WAAW,WAAW,kBAAkB,KAAK,MAAM,SAAS;AAAA,cAC/D,eAAa,KAAK,MAAM,aAAa;AAAA,cAErC;AAAA,qCAAC,YAAO,WAAU,yBAChB;AAAA,sCAAC,QAAG,WAAU,+BAA+B,eAAK,MAAM,OAAM;AAAA,kBAC9D,oBAAC,UAAK,WAAU,kBAAiB;AAAA,kBACjC;AAAA,oBAAC;AAAA;AAAA,sBAAO,WAAU;AAAA,sBAChB,OAAO,EAAE,aAAa;AAAA,sBACtB,SAAS,KAAK;AAAA,sBACd,eAAa,KAAK,MAAM,aAAa,IAAE;AAAA,sBAEvC,8BAAC,WAAQ;AAAA;AAAA,kBACX;AAAA,mBACF;AAAA,gBACA,oBAAC,SAAI,WAAU,2BACb,8BAAC,SAAI,WAAU,0BAA0B,eAAK,MAAM,UAAS,GAC/D;AAAA;AAAA;AAAA,UACF;AAAA;AAAA,MACF;AAAA,IACF,OACK;AACH,aAAO;AAAA,IACT;AAAA,EACF;AACF;AAEA,MAAM,QAAQ,gBAAgB,EAAE,aAAa;AAC7C,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"b56a3b702e6eec99855202d1cfe05d2ba4d6a2ce"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Yu=function(){return s},s}Yu();class HSe extends On.Component{static defaultProps=(Yu().s[0]++,{underlayClickExits:!0});onClose=(Yu().s[1]++,()=>{Yu().f[0]++,Yu().s[2]++,document.activeElement?(Yu().b[0][0]++,Yu().s[3]++,document.activeElement.blur()):Yu().b[0][1]++,Yu().s[4]++,setTimeout(()=>{Yu().f[1]++,Yu().s[5]++,this.props.onOpenToggle()},0)});render(){Yu().f[2]++;const e=(Yu().s[6]++,this.props.t);return Yu().s[7]++,this.props.isOpen?(Yu().b[1][0]++,Yu().s[8]++,te.jsx($Se,{titleText:this.props.title,underlayClickExits:this.props.underlayClickExits,"data-wd-key":this.props["data-wd-key"],verticallyCenter:!0,onExit:this.onClose,dialogClass:"maputnik-modal-container",children:te.jsxs("div",{className:f0("maputnik-modal",this.props.className),"data-wd-key":this.props["data-wd-key"],children:[te.jsxs("header",{className:"maputnik-modal-header",children:[te.jsx("h1",{className:"maputnik-modal-header-title",children:this.props.title}),te.jsx("span",{className:"maputnik-space"}),te.jsx("button",{className:"maputnik-modal-header-toggle",title:e("Close modal"),onClick:this.onClose,"data-wd-key":this.props["data-wd-key"]+".close-modal",children:te.jsx(ide,{})})]}),te.jsx("div",{className:"maputnik-modal-scroller",children:te.jsx("div",{className:"maputnik-modal-content",children:this.props.children})})]})})):(Yu().b[1][1]++,Yu().s[9]++,!1)}}const w1=(Yu().s[10]++,Po()(HSe));function ds(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldDocLabel.tsx",e="227136badbf4464e3a73e0852e3bc3d4b9112a08",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldDocLabel.tsx",statementMap:{0:{start:{line:4,column:22},end:{line:33,column:1}},1:{start:{line:5,column:26},end:{line:5,column:47}},2:{start:{line:6,column:22},end:{line:11,column:3}},3:{start:{line:7,column:4},end:{line:7,column:19}},4:{start:{line:8,column:4},end:{line:10,column:5}},5:{start:{line:9,column:6},end:{line:9,column:31}},6:{start:{line:12,column:31},end:{line:12,column:36}},7:{start:{line:13,column:18},end:{line:13,column:33}},8:{start:{line:14,column:2},end:{line:31,column:3}},9:{start:{line:15,column:4},end:{line:28,column:12}},10:{start:{line:23,column:25},end:{line:23,column:43}},11:{start:{line:29,column:9},end:{line:31,column:3}},12:{start:{line:30,column:4},end:{line:30,column:172}},13:{start:{line:32,column:2},end:{line:32,column:40}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:22},end:{line:4,column:23}},loc:{start:{line:4,column:33},end:{line:33,column:1}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:6,column:22},end:{line:6,column:23}},loc:{start:{line:6,column:33},end:{line:11,column:3}},line:6},2:{name:"(anonymous_2)",decl:{start:{line:23,column:19},end:{line:23,column:20}},loc:{start:{line:23,column:25},end:{line:23,column:43}},line:23}},branchMap:{0:{loc:{start:{line:8,column:4},end:{line:10,column:5}},type:"if",locations:[{start:{line:8,column:4},end:{line:10,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:8},1:{loc:{start:{line:13,column:18},end:{line:13,column:33}},type:"binary-expr",locations:[{start:{line:13,column:18},end:{line:13,column:27}},{start:{line:13,column:31},end:{line:13,column:33}}],line:13},2:{loc:{start:{line:14,column:2},end:{line:31,column:3}},type:"if",locations:[{start:{line:14,column:2},end:{line:31,column:3}},{start:{line:29,column:9},end:{line:31,column:3}}],line:14},3:{loc:{start:{line:21,column:24},end:{line:21,column:93}},type:"cond-expr",locations:[{start:{line:21,column:31},end:{line:21,column:61}},{start:{line:21,column:64},end:{line:21,column:93}}],line:21},4:{loc:{start:{line:22,column:65},end:{line:22,column:89}},type:"cond-expr",locations:[{start:{line:22,column:72},end:{line:22,column:78}},{start:{line:22,column:81},end:{line:22,column:89}}],line:22},5:{loc:{start:{line:25,column:20},end:{line:25,column:107}},type:"cond-expr",locations:[{start:{line:25,column:43},end:{line:25,column:66}},{start:{line:25,column:85},end:{line:25,column:107}}],line:25},6:{loc:{start:{line:29,column:9},end:{line:31,column:3}},type:"if",locations:[{start:{line:29,column:9},end:{line:31,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:29}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0},f:{0:0,1:0,2:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldDocLabel.tsx"],names:[],mappings:"AA4BQ,SASY,KATZ;AA5BR,OAAO,WAAyB;AAChC,SAAQ,eAAe,sBAAqB;AAW5C,MAAM,gBAA8C,CAAC,UAAU;AAC7D,QAAM,CAAC,MAAM,OAAO,IAAI,MAAM,SAAS,KAAK;AAE5C,QAAM,cAAc,CAAC,UAAmB;AACtC,YAAQ,KAAK;AACb,QAAI,MAAM,aAAa;AACrB,YAAM,YAAY,KAAK;AAAA,IACzB;AAAA,EACF;AAEA,QAAM,EAAE,OAAO,UAAU,IAAI;AAC7B,QAAM,EAAE,IAAI,IAAI,aAAa,CAAC;AAE9B,MAAI,KAAK;AACP,WACE,oBAAC,WAAM,WAAU,wBACf,+BAAC,SAAI,WAAU,uBACZ;AAAA;AAAA,MACA;AAAA,MACD;AAAA,QAAC;AAAA;AAAA,UACC,cAAY,OAAO,iCAAiC;AAAA,UACpD,WAAW,4CAA4C,OAAO,SAAS,QAAQ;AAAA,UAC/E,SAAS,MAAM,YAAY,CAAC,IAAI;AAAA,UAChC,eAAa,sBAAsB;AAAA,UAElC,iBAAO,oBAAC,kBAAe,IAAK,oBAAC,iBAAc;AAAA;AAAA,MAC9C;AAAA,OACF,GACF;AAAA,EAEJ,WAAW,OAAO;AAChB,WACE,oBAAC,WAAM,WAAU,wBACf,8BAAC,SAAI,WAAU,uBAAuB,iBAAM,GAC9C;AAAA,EAEJ;AACA,SAAO,oBAAC,SAAI;AACd;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"227136badbf4464e3a73e0852e3bc3d4b9112a08"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return ds=function(){return s},s}ds();ds().s[0]++;const UU=n=>{ds().f[0]++;const[e,t]=(ds().s[1]++,On.useState(!1));ds().s[2]++;const i=a=>{ds().f[1]++,ds().s[3]++,t(a),ds().s[4]++,n.onToggleDoc?(ds().b[0][0]++,ds().s[5]++,n.onToggleDoc(a)):ds().b[0][1]++},{label:r,fieldSpec:o}=(ds().s[6]++,n),{doc:s}=(ds().s[7]++,ds().b[1][0]++,o||(ds().b[1][1]++,{}));return ds().s[8]++,s?(ds().b[2][0]++,ds().s[9]++,te.jsx("label",{className:"maputnik-doc-wrapper",children:te.jsxs("div",{className:"maputnik-doc-target",children:[r,"",te.jsx("button",{"aria-label":e?(ds().b[3][0]++,"close property documentation"):(ds().b[3][1]++,"open property documentation"),className:`maputnik-doc-button maputnik-doc-button--${e?(ds().b[4][0]++,"open"):(ds().b[4][1]++,"closed")}`,onClick:()=>(ds().f[2]++,ds().s[10]++,i(!e)),"data-wd-key":"field-doc-button-"+r,children:e?(ds().b[5][0]++,te.jsx(jhe,{})):(ds().b[5][1]++,te.jsx(Nhe,{}))})]})})):(ds().b[2][1]++,ds().s[11]++,r?(ds().b[6][0]++,ds().s[12]++,te.jsx("label",{className:"maputnik-doc-wrapper",children:te.jsx("div",{className:"maputnik-doc-target",children:r})})):(ds().b[6][1]++,ds().s[13]++,te.jsx("div",{})))};function ZSe(n,e){const t={};return(n[n.length-1]===""?[...n,""]:n).join((t.padRight?" ":"")+","+(t.padLeft===!1?"":" ")).trim()}const XSe=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,JSe=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,eEe={};function PG(n,e){return(eEe.jsx?JSe:XSe).test(n)}const tEe=/[ \t\n\f\r]/g;function nEe(n){return typeof n=="object"?n.type==="text"?UG(n.value):!1:UG(n)}function UG(n){return n.replace(tEe,"")===""}class OM{constructor(e,t,i){this.normal=t,this.property=e,i&&(this.space=i)}}OM.prototype.normal={};OM.prototype.property={};OM.prototype.space=void 0;function vie(n,e){const t={},i={};for(const r of n)Object.assign(t,r.property),Object.assign(i,r.normal);return new OM(t,i,e)}function kR(n){return n.toLowerCase()}class Ed{constructor(e,t){this.attribute=t,this.property=e}}Ed.prototype.attribute="";Ed.prototype.booleanish=!1;Ed.prototype.boolean=!1;Ed.prototype.commaOrSpaceSeparated=!1;Ed.prototype.commaSeparated=!1;Ed.prototype.defined=!1;Ed.prototype.mustUseProperty=!1;Ed.prototype.number=!1;Ed.prototype.overloadedBoolean=!1;Ed.prototype.property="";Ed.prototype.spaceSeparated=!1;Ed.prototype.space=void 0;let iEe=0;const lo=AC(),qu=AC(),TR=AC(),$n=AC(),Wa=AC(),nx=AC(),rf=AC();function AC(){return 2**++iEe}const RR=Object.freeze(Object.defineProperty({__proto__:null,boolean:lo,booleanish:qu,commaOrSpaceSeparated:rf,commaSeparated:nx,number:$n,overloadedBoolean:TR,spaceSeparated:Wa},Symbol.toStringTag,{value:"Module"})),d8=Object.keys(RR);class KU extends Ed{constructor(e,t,i,r){let o=-1;if(super(e,t),KG(this,"space",r),typeof i=="number")for(;++o<d8.length;){const s=d8[o];KG(this,d8[o],(i&RR[s])===RR[s])}}}KU.prototype.defined=!0;function KG(n,e,t){t&&(n[e]=t)}function $x(n){const e={},t={};for(const[i,r]of Object.entries(n.properties)){const o=new KU(i,n.transform(n.attributes||{},i),r,n.space);n.mustUseProperty&&n.mustUseProperty.includes(i)&&(o.mustUseProperty=!0),e[i]=o,t[kR(i)]=i,t[kR(o.attribute)]=i}return new OM(e,t,n.space)}const bie=$x({properties:{ariaActiveDescendant:null,ariaAtomic:qu,ariaAutoComplete:null,ariaBusy:qu,ariaChecked:qu,ariaColCount:$n,ariaColIndex:$n,ariaColSpan:$n,ariaControls:Wa,ariaCurrent:null,ariaDescribedBy:Wa,ariaDetails:null,ariaDisabled:qu,ariaDropEffect:Wa,ariaErrorMessage:null,ariaExpanded:qu,ariaFlowTo:Wa,ariaGrabbed:qu,ariaHasPopup:null,ariaHidden:qu,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Wa,ariaLevel:$n,ariaLive:null,ariaModal:qu,ariaMultiLine:qu,ariaMultiSelectable:qu,ariaOrientation:null,ariaOwns:Wa,ariaPlaceholder:null,ariaPosInSet:$n,ariaPressed:qu,ariaReadOnly:qu,ariaRelevant:null,ariaRequired:qu,ariaRoleDescription:Wa,ariaRowCount:$n,ariaRowIndex:$n,ariaRowSpan:$n,ariaSelected:qu,ariaSetSize:$n,ariaSort:null,ariaValueMax:$n,ariaValueMin:$n,ariaValueNow:$n,ariaValueText:null,role:null},transform(n,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function Cie(n,e){return e in n?n[e]:e}function _ie(n,e){return Cie(n,e.toLowerCase())}const rEe=$x({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:nx,acceptCharset:Wa,accessKey:Wa,action:null,allow:null,allowFullScreen:lo,allowPaymentRequest:lo,allowUserMedia:lo,alt:null,as:null,async:lo,autoCapitalize:null,autoComplete:Wa,autoFocus:lo,autoPlay:lo,blocking:Wa,capture:null,charSet:null,checked:lo,cite:null,className:Wa,cols:$n,colSpan:null,content:null,contentEditable:qu,controls:lo,controlsList:Wa,coords:$n|nx,crossOrigin:null,data:null,dateTime:null,decoding:null,default:lo,defer:lo,dir:null,dirName:null,disabled:lo,download:TR,draggable:qu,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:lo,formTarget:null,headers:Wa,height:$n,hidden:TR,high:$n,href:null,hrefLang:null,htmlFor:Wa,httpEquiv:Wa,id:null,imageSizes:null,imageSrcSet:null,inert:lo,inputMode:null,integrity:null,is:null,isMap:lo,itemId:null,itemProp:Wa,itemRef:Wa,itemScope:lo,itemType:Wa,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:lo,low:$n,manifest:null,max:null,maxLength:$n,media:null,method:null,min:null,minLength:$n,multiple:lo,muted:lo,name:null,nonce:null,noModule:lo,noValidate:lo,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:lo,optimum:$n,pattern:null,ping:Wa,placeholder:null,playsInline:lo,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:lo,referrerPolicy:null,rel:Wa,required:lo,reversed:lo,rows:$n,rowSpan:$n,sandbox:Wa,scope:null,scoped:lo,seamless:lo,selected:lo,shadowRootClonable:lo,shadowRootDelegatesFocus:lo,shadowRootMode:null,shape:null,size:$n,sizes:null,slot:null,span:$n,spellCheck:qu,src:null,srcDoc:null,srcLang:null,srcSet:null,start:$n,step:null,style:null,tabIndex:$n,target:null,title:null,translate:null,type:null,typeMustMatch:lo,useMap:null,value:qu,width:$n,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Wa,axis:null,background:null,bgColor:null,border:$n,borderColor:null,bottomMargin:$n,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:lo,declare:lo,event:null,face:null,frame:null,frameBorder:null,hSpace:$n,leftMargin:$n,link:null,longDesc:null,lowSrc:null,marginHeight:$n,marginWidth:$n,noResize:lo,noHref:lo,noShade:lo,noWrap:lo,object:null,profile:null,prompt:null,rev:null,rightMargin:$n,rules:null,scheme:null,scrolling:qu,standby:null,summary:null,text:null,topMargin:$n,valueType:null,version:null,vAlign:null,vLink:null,vSpace:$n,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:lo,disableRemotePlayback:lo,prefix:null,property:null,results:$n,security:null,unselectable:null},space:"html",transform:_ie}),oEe=$x({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:rf,accentHeight:$n,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:$n,amplitude:$n,arabicForm:null,ascent:$n,attributeName:null,attributeType:null,azimuth:$n,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:$n,by:null,calcMode:null,capHeight:$n,className:Wa,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:$n,diffuseConstant:$n,direction:null,display:null,dur:null,divisor:$n,dominantBaseline:null,download:lo,dx:null,dy:null,edgeMode:null,editable:null,elevation:$n,enableBackground:null,end:null,event:null,exponent:$n,externalResourcesRequired:null,fill:null,fillOpacity:$n,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:nx,g2:nx,glyphName:nx,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:$n,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:$n,horizOriginX:$n,horizOriginY:$n,id:null,ideographic:$n,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:$n,k:$n,k1:$n,k2:$n,k3:$n,k4:$n,kernelMatrix:rf,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:$n,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:$n,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:$n,overlineThickness:$n,paintOrder:null,panose1:null,path:null,pathLength:$n,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Wa,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:$n,pointsAtY:$n,pointsAtZ:$n,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:rf,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:rf,rev:rf,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:rf,requiredFeatures:rf,requiredFonts:rf,requiredFormats:rf,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:$n,specularExponent:$n,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:$n,strikethroughThickness:$n,string:null,stroke:null,strokeDashArray:rf,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:$n,strokeOpacity:$n,strokeWidth:null,style:null,surfaceScale:$n,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:rf,tabIndex:$n,tableValues:null,target:null,targetX:$n,targetY:$n,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:rf,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:$n,underlineThickness:$n,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:$n,values:null,vAlphabetic:$n,vMathematical:$n,vectorEffect:null,vHanging:$n,vIdeographic:$n,version:null,vertAdvY:$n,vertOriginX:$n,vertOriginY:$n,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:$n,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:Cie}),xie=$x({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(n,e){return"xlink:"+e.slice(5).toLowerCase()}}),Mie=$x({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:_ie}),wie=$x({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(n,e){return"xml:"+e.slice(3).toLowerCase()}}),sEe={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},aEe=/[A-Z]/g,LG=/-[a-z]/g,lEe=/^data[-\w.:]+$/i;function uEe(n,e){const t=kR(e);let i=e,r=Ed;if(t in n.normal)return n.property[n.normal[t]];if(t.length>4&&t.slice(0,4)==="data"&&lEe.test(e)){if(e.charAt(4)==="-"){const o=e.slice(5).replace(LG,AEe);i="data"+o.charAt(0).toUpperCase()+o.slice(1)}else{const o=e.slice(4);if(!LG.test(o)){let s=o.replace(aEe,cEe);s.charAt(0)!=="-"&&(s="-"+s),e="data"+s}}r=KU}return new r(i,e)}function cEe(n){return"-"+n.toLowerCase()}function AEe(n){return n.charAt(1).toUpperCase()}const hEe=vie([bie,rEe,xie,Mie,wie],"html"),LU=vie([bie,oEe,xie,Mie,wie],"svg");function dEe(n){return n.join(" ").trim()}var $C={},f8,FG;function fEe(){if(FG)return f8;FG=1;var n=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,t=/^\s*/,i=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,r=/^:\s*/,o=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,s=/^[;\s]*/,a=/^\s+|\s+$/g,c=`
`,h="/",m="*",v="",x="comment",E="declaration";f8=function(P,F){if(typeof P!="string")throw new TypeError("First argument must be a string");if(!P)return[];F=F||{};var W=1,q=1;function V(Me){var Te=Me.match(e);Te&&(W+=Te.length);var je=Me.lastIndexOf(c);q=~je?Me.length-je:q+Me.length}function H(){var Me={line:W,column:q};return function(Te){return Te.position=new X(Me),oe(),Te}}function X(Me){this.start=Me,this.end={line:W,column:q},this.source=F.source}X.prototype.content=P;function Z(Me){var Te=new Error(F.source+":"+W+":"+q+": "+Me);if(Te.reason=Me,Te.filename=F.source,Te.line=W,Te.column=q,Te.source=P,!F.silent)throw Te}function G(Me){var Te=Me.exec(P);if(Te){var je=Te[0];return V(je),P=P.slice(je.length),Te}}function oe(){G(t)}function ue(Me){var Te;for(Me=Me||[];Te=xe();)Te!==!1&&Me.push(Te);return Me}function xe(){var Me=H();if(!(h!=P.charAt(0)||m!=P.charAt(1))){for(var Te=2;v!=P.charAt(Te)&&(m!=P.charAt(Te)||h!=P.charAt(Te+1));)++Te;if(Te+=2,v===P.charAt(Te-1))return Z("End of comment missing");var je=P.slice(2,Te-2);return q+=2,V(je),P=P.slice(Te),q+=2,Me({type:x,comment:je})}}function me(){var Me=H(),Te=G(i);if(Te){if(xe(),!G(r))return Z("property missing ':'");var je=G(o),Ee=Me({type:E,property:D(Te[0].replace(n,v)),value:je?D(je[0].replace(n,v)):v});return G(s),Ee}}function Ie(){var Me=[];ue(Me);for(var Te;Te=me();)Te!==!1&&(Me.push(Te),ue(Me));return Me}return oe(),Ie()};function D(P){return P?P.replace(a,v):v}return f8}var zG;function pEe(){if(zG)return $C;zG=1;var n=$C&&$C.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty($C,"__esModule",{value:!0}),$C.default=t;const e=n(fEe());function t(i,r){let o=null;if(!i||typeof i!="string")return o;const s=(0,e.default)(i),a=typeof r=="function";return s.forEach(c=>{if(c.type!=="declaration")return;const{property:h,value:m}=c;a?r(h,m,c):m&&(o=o||{},o[h]=m)}),o}return $C}var S2={},jG;function mEe(){if(jG)return S2;jG=1,Object.defineProperty(S2,"__esModule",{value:!0}),S2.camelCase=void 0;var n=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,t=/^[^-]+$/,i=/^-(webkit|moz|ms|o|khtml)-/,r=/^-(ms)-/,o=function(h){return!h||t.test(h)||n.test(h)},s=function(h,m){return m.toUpperCase()},a=function(h,m){return"".concat(m,"-")},c=function(h,m){return m===void 0&&(m={}),o(h)?h:(h=h.toLowerCase(),m.reactCompat?h=h.replace(r,a):h=h.replace(i,a),h.replace(e,s))};return S2.camelCase=c,S2}var E2,NG;function gEe(){if(NG)return E2;NG=1;var n=E2&&E2.__importDefault||function(r){return r&&r.__esModule?r:{default:r}},e=n(pEe()),t=mEe();function i(r,o){var s={};return!r||typeof r!="string"||(0,e.default)(r,function(a,c){a&&c&&(s[(0,t.camelCase)(a,o)]=c)}),s}return i.default=i,E2=i,E2}var yEe=gEe();const vEe=Ou(yEe),Sie=Eie("end"),FU=Eie("start");function Eie(n){return e;function e(t){const i=t&&t.position&&t.position[n]||{};if(typeof i.line=="number"&&i.line>0&&typeof i.column=="number"&&i.column>0)return{line:i.line,column:i.column,offset:typeof i.offset=="number"&&i.offset>-1?i.offset:void 0}}}function bEe(n){const e=FU(n),t=Sie(n);if(e&&t)return{start:e,end:t}}function S3(n){return!n||typeof n!="object"?"":"position"in n||"type"in n?GG(n.position):"start"in n||"end"in n?GG(n):"line"in n||"column"in n?DR(n):""}function DR(n){return WG(n&&n.line)+":"+WG(n&&n.column)}function GG(n){return DR(n&&n.start)+"-"+DR(n&&n.end)}function WG(n){return n&&typeof n=="number"?n:1}class oh extends Error{constructor(e,t,i){super(),typeof t=="string"&&(i=t,t=void 0);let r="",o={},s=!1;if(t&&("line"in t&&"column"in t?o={place:t}:"start"in t&&"end"in t?o={place:t}:"type"in t?o={ancestors:[t],place:t.position}:o={...t}),typeof e=="string"?r=e:!o.cause&&e&&(s=!0,r=e.message,o.cause=e),!o.ruleId&&!o.source&&typeof i=="string"){const c=i.indexOf(":");c===-1?o.ruleId=i:(o.source=i.slice(0,c),o.ruleId=i.slice(c+1))}if(!o.place&&o.ancestors&&o.ancestors){const c=o.ancestors[o.ancestors.length-1];c&&(o.place=c.position)}const a=o.place&&"start"in o.place?o.place.start:o.place;this.ancestors=o.ancestors||void 0,this.cause=o.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file="",this.message=r,this.line=a?a.line:void 0,this.name=S3(o.place)||"1:1",this.place=o.place||void 0,this.reason=this.message,this.ruleId=o.ruleId||void 0,this.source=o.source||void 0,this.stack=s&&o.cause&&typeof o.cause.stack=="string"?o.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}oh.prototype.file="";oh.prototype.name="";oh.prototype.reason="";oh.prototype.message="";oh.prototype.stack="";oh.prototype.column=void 0;oh.prototype.line=void 0;oh.prototype.ancestors=void 0;oh.prototype.cause=void 0;oh.prototype.fatal=void 0;oh.prototype.place=void 0;oh.prototype.ruleId=void 0;oh.prototype.source=void 0;const zU={}.hasOwnProperty,CEe=new Map,_Ee=/[A-Z]/g,xEe=new Set(["table","tbody","thead","tfoot","tr"]),MEe=new Set(["td","th"]),Bie="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function wEe(n,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const t=e.filePath||void 0;let i;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");i=REe(t,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");i=TEe(t,e.jsx,e.jsxs)}const r={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:i,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:t,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?LU:hEe,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},o=Oie(r,n,void 0);return o&&typeof o!="string"?o:r.create(n,r.Fragment,{children:o||void 0},void 0)}function Oie(n,e,t){if(e.type==="element")return SEe(n,e,t);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return EEe(n,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return OEe(n,e,t);if(e.type==="mdxjsEsm")return BEe(n,e);if(e.type==="root")return IEe(n,e,t);if(e.type==="text")return kEe(n,e)}function SEe(n,e,t){const i=n.schema;let r=i;e.tagName.toLowerCase()==="svg"&&i.space==="html"&&(r=LU,n.schema=r),n.ancestors.push(e);const o=kie(n,e.tagName,!1),s=DEe(n,e);let a=NU(n,e);return xEe.has(e.tagName)&&(a=a.filter(function(c){return typeof c=="string"?!nEe(c):!0})),Iie(n,s,o,e),jU(s,a),n.ancestors.pop(),n.schema=i,n.create(e,o,s,t)}function EEe(n,e){if(e.data&&e.data.estree&&n.evaluater){const i=e.data.estree.body[0];return i.type,n.evaluater.evaluateExpression(i.expression)}I4(n,e.position)}function BEe(n,e){if(e.data&&e.data.estree&&n.evaluater)return n.evaluater.evaluateProgram(e.data.estree);I4(n,e.position)}function OEe(n,e,t){const i=n.schema;let r=i;e.name==="svg"&&i.space==="html"&&(r=LU,n.schema=r),n.ancestors.push(e);const o=e.name===null?n.Fragment:kie(n,e.name,!0),s=PEe(n,e),a=NU(n,e);return Iie(n,s,o,e),jU(s,a),n.ancestors.pop(),n.schema=i,n.create(e,o,s,t)}function IEe(n,e,t){const i={};return jU(i,NU(n,e)),n.create(e,n.Fragment,i,t)}function kEe(n,e){return e.value}function Iie(n,e,t,i){typeof t!="string"&&t!==n.Fragment&&n.passNode&&(e.node=i)}function jU(n,e){if(e.length>0){const t=e.length>1?e:e[0];t&&(n.children=t)}}function TEe(n,e,t){return i;function i(r,o,s,a){const h=Array.isArray(s.children)?t:e;return a?h(o,s,a):h(o,s)}}function REe(n,e){return t;function t(i,r,o,s){const a=Array.isArray(o.children),c=FU(i);return e(r,o,s,a,{columnNumber:c?c.column-1:void 0,fileName:n,lineNumber:c?c.line:void 0},void 0)}}function DEe(n,e){const t={};let i,r;for(r in e.properties)if(r!=="children"&&zU.call(e.properties,r)){const o=UEe(n,r,e.properties[r]);if(o){const[s,a]=o;n.tableCellAlignToStyle&&s==="align"&&typeof a=="string"&&MEe.has(e.tagName)?i=a:t[s]=a}}if(i){const o=t.style||(t.style={});o[n.stylePropertyNameCase==="css"?"text-align":"textAlign"]=i}return t}function PEe(n,e){const t={};for(const i of e.attributes)if(i.type==="mdxJsxExpressionAttribute")if(i.data&&i.data.estree&&n.evaluater){const o=i.data.estree.body[0];o.type;const s=o.expression;s.type;const a=s.properties[0];a.type,Object.assign(t,n.evaluater.evaluateExpression(a.argument))}else I4(n,e.position);else{const r=i.name;let o;if(i.value&&typeof i.value=="object")if(i.value.data&&i.value.data.estree&&n.evaluater){const a=i.value.data.estree.body[0];a.type,o=n.evaluater.evaluateExpression(a.expression)}else I4(n,e.position);else o=i.value===null?!0:i.value;t[r]=o}return t}function NU(n,e){const t=[];let i=-1;const r=n.passKeys?new Map:CEe;for(;++i<e.children.length;){const o=e.children[i];let s;if(n.passKeys){const c=o.type==="element"?o.tagName:o.type==="mdxJsxFlowElement"||o.type==="mdxJsxTextElement"?o.name:void 0;if(c){const h=r.get(c)||0;s=c+"-"+h,r.set(c,h+1)}}const a=Oie(n,o,s);a!==void 0&&t.push(a)}return t}function UEe(n,e,t){const i=uEe(n.schema,e);if(!(t==null||typeof t=="number"&&Number.isNaN(t))){if(Array.isArray(t)&&(t=i.commaSeparated?ZSe(t):dEe(t)),i.property==="style"){let r=typeof t=="object"?t:KEe(n,String(t));return n.stylePropertyNameCase==="css"&&(r=LEe(r)),["style",r]}return[n.elementAttributeNameCase==="react"&&i.space?sEe[i.property]||i.property:i.attribute,t]}}function KEe(n,e){try{return vEe(e,{reactCompat:!0})}catch(t){if(n.ignoreInvalidStyle)return{};const i=t,r=new oh("Cannot parse `style` attribute",{ancestors:n.ancestors,cause:i,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw r.file=n.filePath||void 0,r.url=Bie+"#cannot-parse-style-attribute",r}}function kie(n,e,t){let i;if(!t)i={type:"Literal",value:e};else if(e.includes(".")){const r=e.split(".");let o=-1,s;for(;++o<r.length;){const a=PG(r[o])?{type:"Identifier",name:r[o]}:{type:"Literal",value:r[o]};s=s?{type:"MemberExpression",object:s,property:a,computed:!!(o&&a.type==="Literal"),optional:!1}:a}i=s}else i=PG(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(i.type==="Literal"){const r=i.value;return zU.call(n.components,r)?n.components[r]:r}if(n.evaluater)return n.evaluater.evaluateExpression(i);I4(n)}function I4(n,e){const t=new oh("Cannot handle MDX estrees without `createEvaluater`",{ancestors:n.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw t.file=n.filePath||void 0,t.url=Bie+"#cannot-handle-mdx-estrees-without-createevaluater",t}function LEe(n){const e={};let t;for(t in n)zU.call(n,t)&&(e[FEe(t)]=n[t]);return e}function FEe(n){let e=n.replace(_Ee,zEe);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function zEe(n){return"-"+n.toLowerCase()}const p8={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},jEe={};function NEe(n,e){const t=jEe,i=typeof t.includeImageAlt=="boolean"?t.includeImageAlt:!0,r=typeof t.includeHtml=="boolean"?t.includeHtml:!0;return Tie(n,i,r)}function Tie(n,e,t){if(GEe(n)){if("value"in n)return n.type==="html"&&!t?"":n.value;if(e&&"alt"in n&&n.alt)return n.alt;if("children"in n)return QG(n.children,e,t)}return Array.isArray(n)?QG(n,e,t):""}function QG(n,e,t){const i=[];let r=-1;for(;++r<n.length;)i[r]=Tie(n[r],e,t);return i.join("")}function GEe(n){return!!(n&&typeof n=="object")}const YG=document.createElement("i");function GU(n){const e="&"+n+";";YG.innerHTML=e;const t=YG.textContent;return t.charCodeAt(t.length-1)===59&&n!=="semi"||t===e?!1:t}function c0(n,e,t,i){const r=n.length;let o=0,s;if(e<0?e=-e>r?0:r+e:e=e>r?r:e,t=t>0?t:0,i.length<1e4)s=Array.from(i),s.unshift(e,t),n.splice(...s);else for(t&&n.splice(e,t);o<i.length;)s=i.slice(o,o+1e4),s.unshift(e,0),n.splice(...s),o+=1e4,e+=1e4}function Hf(n,e){return n.length>0?(c0(n,n.length,0,e),n):e}const qG={}.hasOwnProperty;function WEe(n){const e={};let t=-1;for(;++t<n.length;)QEe(e,n[t]);return e}function QEe(n,e){let t;for(t in e){const r=(qG.call(n,t)?n[t]:void 0)||(n[t]={}),o=e[t];let s;if(o)for(s in o){qG.call(r,s)||(r[s]=[]);const a=o[s];YEe(r[s],Array.isArray(a)?a:a?[a]:[])}}}function YEe(n,e){let t=-1;const i=[];for(;++t<e.length;)(e[t].add==="after"?n:i).push(e[t]);c0(n,0,0,i)}function Rie(n,e){const t=Number.parseInt(n,e);return t<9||t===11||t>13&&t<32||t>126&&t<160||t>55295&&t<57344||t>64975&&t<65008||(t&65535)===65535||(t&65535)===65534||t>1114111?"":String.fromCodePoint(t)}function ix(n){return n.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const jg=dv(/[A-Za-z]/),mf=dv(/[\dA-Za-z]/),qEe=dv(/[#-'*+\--9=?A-Z^-~]/);function PR(n){return n!==null&&(n<32||n===127)}const UR=dv(/\d/),VEe=dv(/[\dA-Fa-f]/),$Ee=dv(/[!-/:-@[-`{-~]/);function Rr(n){return n!==null&&n<-2}function _d(n){return n!==null&&(n<0||n===32)}function Ks(n){return n===-2||n===-1||n===32}const HEe=dv(new RegExp("\\p{P}|\\p{S}","u")),ZEe=dv(/\s/);function dv(n){return e;function e(t){return t!==null&&t>-1&&n.test(String.fromCharCode(t))}}function Hx(n){const e=[];let t=-1,i=0,r=0;for(;++t<n.length;){const o=n.charCodeAt(t);let s="";if(o===37&&mf(n.charCodeAt(t+1))&&mf(n.charCodeAt(t+2)))r=2;else if(o<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(o))||(s=String.fromCharCode(o));else if(o>55295&&o<57344){const a=n.charCodeAt(t+1);o<56320&&a>56319&&a<57344?(s=String.fromCharCode(o,a),r=1):s=""}else s=String.fromCharCode(o);s&&(e.push(n.slice(i,t),encodeURIComponent(s)),i=t+r+1,s=""),r&&(t+=r,r=0)}return e.join("")+n.slice(i)}function Qa(n,e,t,i){const r=i?i-1:Number.POSITIVE_INFINITY;let o=0;return s;function s(c){return Ks(c)?(n.enter(t),a(c)):e(c)}function a(c){return Ks(c)&&o++<r?(n.consume(c),a):(n.exit(t),e(c))}}const XEe={tokenize:JEe};function JEe(n){const e=n.attempt(this.parser.constructs.contentInitial,i,r);let t;return e;function i(a){if(a===null){n.consume(a);return}return n.enter("lineEnding"),n.consume(a),n.exit("lineEnding"),Qa(n,e,"linePrefix")}function r(a){return n.enter("paragraph"),o(a)}function o(a){const c=n.enter("chunkText",{contentType:"text",previous:t});return t&&(t.next=c),t=c,s(a)}function s(a){if(a===null){n.exit("chunkText"),n.exit("paragraph"),n.consume(a);return}return Rr(a)?(n.consume(a),n.exit("chunkText"),o):(n.consume(a),s)}}const e6e={tokenize:t6e},VG={tokenize:n6e};function t6e(n){const e=this,t=[];let i=0,r,o,s;return a;function a(V){if(i<t.length){const H=t[i];return e.containerState=H[1],n.attempt(H[0].continuation,c,h)(V)}return h(V)}function c(V){if(i++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,r&&q();const H=e.events.length;let X=H,Z;for(;X--;)if(e.events[X][0]==="exit"&&e.events[X][1].type==="chunkFlow"){Z=e.events[X][1].end;break}W(i);let G=H;for(;G<e.events.length;)e.events[G][1].end={...Z},G++;return c0(e.events,X+1,0,e.events.slice(H)),e.events.length=G,h(V)}return a(V)}function h(V){if(i===t.length){if(!r)return x(V);if(r.currentConstruct&&r.currentConstruct.concrete)return D(V);e.interrupt=!!(r.currentConstruct&&!r._gfmTableDynamicInterruptHack)}return e.containerState={},n.check(VG,m,v)(V)}function m(V){return r&&q(),W(i),x(V)}function v(V){return e.parser.lazy[e.now().line]=i!==t.length,s=e.now().offset,D(V)}function x(V){return e.containerState={},n.attempt(VG,E,D)(V)}function E(V){return i++,t.push([e.currentConstruct,e.containerState]),x(V)}function D(V){if(V===null){r&&q(),W(0),n.consume(V);return}return r=r||e.parser.flow(e.now()),n.enter("chunkFlow",{_tokenizer:r,contentType:"flow",previous:o}),P(V)}function P(V){if(V===null){F(n.exit("chunkFlow"),!0),W(0),n.consume(V);return}return Rr(V)?(n.consume(V),F(n.exit("chunkFlow")),i=0,e.interrupt=void 0,a):(n.consume(V),P)}function F(V,H){const X=e.sliceStream(V);if(H&&X.push(null),V.previous=o,o&&(o.next=V),o=V,r.defineSkip(V.start),r.write(X),e.parser.lazy[V.start.line]){let Z=r.events.length;for(;Z--;)if(r.events[Z][1].start.offset<s&&(!r.events[Z][1].end||r.events[Z][1].end.offset>s))return;const G=e.events.length;let oe=G,ue,xe;for(;oe--;)if(e.events[oe][0]==="exit"&&e.events[oe][1].type==="chunkFlow"){if(ue){xe=e.events[oe][1].end;break}ue=!0}for(W(i),Z=G;Z<e.events.length;)e.events[Z][1].end={...xe},Z++;c0(e.events,oe+1,0,e.events.slice(G)),e.events.length=Z}}function W(V){let H=t.length;for(;H-- >V;){const X=t[H];e.containerState=X[1],X[0].exit.call(e,n)}t.length=V}function q(){r.write([null]),o=void 0,r=void 0,e.containerState._closeFlow=void 0}}function n6e(n,e,t){return Qa(n,n.attempt(this.parser.constructs.document,e,t),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function $G(n){if(n===null||_d(n)||ZEe(n))return 1;if(HEe(n))return 2}function WU(n,e,t){const i=[];let r=-1;for(;++r<n.length;){const o=n[r].resolveAll;o&&!i.includes(o)&&(e=o(e,t),i.push(o))}return e}const KR={name:"attention",resolveAll:i6e,tokenize:r6e};function i6e(n,e){let t=-1,i,r,o,s,a,c,h,m;for(;++t<n.length;)if(n[t][0]==="enter"&&n[t][1].type==="attentionSequence"&&n[t][1]._close){for(i=t;i--;)if(n[i][0]==="exit"&&n[i][1].type==="attentionSequence"&&n[i][1]._open&&e.sliceSerialize(n[i][1]).charCodeAt(0)===e.sliceSerialize(n[t][1]).charCodeAt(0)){if((n[i][1]._close||n[t][1]._open)&&(n[t][1].end.offset-n[t][1].start.offset)%3&&!((n[i][1].end.offset-n[i][1].start.offset+n[t][1].end.offset-n[t][1].start.offset)%3))continue;c=n[i][1].end.offset-n[i][1].start.offset>1&&n[t][1].end.offset-n[t][1].start.offset>1?2:1;const v={...n[i][1].end},x={...n[t][1].start};HG(v,-c),HG(x,c),s={type:c>1?"strongSequence":"emphasisSequence",start:v,end:{...n[i][1].end}},a={type:c>1?"strongSequence":"emphasisSequence",start:{...n[t][1].start},end:x},o={type:c>1?"strongText":"emphasisText",start:{...n[i][1].end},end:{...n[t][1].start}},r={type:c>1?"strong":"emphasis",start:{...s.start},end:{...a.end}},n[i][1].end={...s.start},n[t][1].start={...a.end},h=[],n[i][1].end.offset-n[i][1].start.offset&&(h=Hf(h,[["enter",n[i][1],e],["exit",n[i][1],e]])),h=Hf(h,[["enter",r,e],["enter",s,e],["exit",s,e],["enter",o,e]]),h=Hf(h,WU(e.parser.constructs.insideSpan.null,n.slice(i+1,t),e)),h=Hf(h,[["exit",o,e],["enter",a,e],["exit",a,e],["exit",r,e]]),n[t][1].end.offset-n[t][1].start.offset?(m=2,h=Hf(h,[["enter",n[t][1],e],["exit",n[t][1],e]])):m=0,c0(n,i-1,t-i+3,h),t=i+h.length-m-2;break}}for(t=-1;++t<n.length;)n[t][1].type==="attentionSequence"&&(n[t][1].type="data");return n}function r6e(n,e){const t=this.parser.constructs.attentionMarkers.null,i=this.previous,r=$G(i);let o;return s;function s(c){return o=c,n.enter("attentionSequence"),a(c)}function a(c){if(c===o)return n.consume(c),a;const h=n.exit("attentionSequence"),m=$G(c),v=!m||m===2&&r||t.includes(c),x=!r||r===2&&m||t.includes(i);return h._open=!!(o===42?v:v&&(r||!x)),h._close=!!(o===42?x:x&&(m||!v)),e(c)}}function HG(n,e){n.column+=e,n.offset+=e,n._bufferIndex+=e}const o6e={name:"autolink",tokenize:s6e};function s6e(n,e,t){let i=0;return r;function r(E){return n.enter("autolink"),n.enter("autolinkMarker"),n.consume(E),n.exit("autolinkMarker"),n.enter("autolinkProtocol"),o}function o(E){return jg(E)?(n.consume(E),s):E===64?t(E):h(E)}function s(E){return E===43||E===45||E===46||mf(E)?(i=1,a(E)):h(E)}function a(E){return E===58?(n.consume(E),i=0,c):(E===43||E===45||E===46||mf(E))&&i++<32?(n.consume(E),a):(i=0,h(E))}function c(E){return E===62?(n.exit("autolinkProtocol"),n.enter("autolinkMarker"),n.consume(E),n.exit("autolinkMarker"),n.exit("autolink"),e):E===null||E===32||E===60||PR(E)?t(E):(n.consume(E),c)}function h(E){return E===64?(n.consume(E),m):qEe(E)?(n.consume(E),h):t(E)}function m(E){return mf(E)?v(E):t(E)}function v(E){return E===46?(n.consume(E),i=0,m):E===62?(n.exit("autolinkProtocol").type="autolinkEmail",n.enter("autolinkMarker"),n.consume(E),n.exit("autolinkMarker"),n.exit("autolink"),e):x(E)}function x(E){if((E===45||mf(E))&&i++<63){const D=E===45?x:v;return n.consume(E),D}return t(E)}}const E6={partial:!0,tokenize:a6e};function a6e(n,e,t){return i;function i(o){return Ks(o)?Qa(n,r,"linePrefix")(o):r(o)}function r(o){return o===null||Rr(o)?e(o):t(o)}}const Die={continuation:{tokenize:u6e},exit:c6e,name:"blockQuote",tokenize:l6e};function l6e(n,e,t){const i=this;return r;function r(s){if(s===62){const a=i.containerState;return a.open||(n.enter("blockQuote",{_container:!0}),a.open=!0),n.enter("blockQuotePrefix"),n.enter("blockQuoteMarker"),n.consume(s),n.exit("blockQuoteMarker"),o}return t(s)}function o(s){return Ks(s)?(n.enter("blockQuotePrefixWhitespace"),n.consume(s),n.exit("blockQuotePrefixWhitespace"),n.exit("blockQuotePrefix"),e):(n.exit("blockQuotePrefix"),e(s))}}function u6e(n,e,t){const i=this;return r;function r(s){return Ks(s)?Qa(n,o,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(s):o(s)}function o(s){return n.attempt(Die,e,t)(s)}}function c6e(n){n.exit("blockQuote")}const Pie={name:"characterEscape",tokenize:A6e};function A6e(n,e,t){return i;function i(o){return n.enter("characterEscape"),n.enter("escapeMarker"),n.consume(o),n.exit("escapeMarker"),r}function r(o){return $Ee(o)?(n.enter("characterEscapeValue"),n.consume(o),n.exit("characterEscapeValue"),n.exit("characterEscape"),e):t(o)}}const Uie={name:"characterReference",tokenize:h6e};function h6e(n,e,t){const i=this;let r=0,o,s;return a;function a(v){return n.enter("characterReference"),n.enter("characterReferenceMarker"),n.consume(v),n.exit("characterReferenceMarker"),c}function c(v){return v===35?(n.enter("characterReferenceMarkerNumeric"),n.consume(v),n.exit("characterReferenceMarkerNumeric"),h):(n.enter("characterReferenceValue"),o=31,s=mf,m(v))}function h(v){return v===88||v===120?(n.enter("characterReferenceMarkerHexadecimal"),n.consume(v),n.exit("characterReferenceMarkerHexadecimal"),n.enter("characterReferenceValue"),o=6,s=VEe,m):(n.enter("characterReferenceValue"),o=7,s=UR,m(v))}function m(v){if(v===59&&r){const x=n.exit("characterReferenceValue");return s===mf&&!GU(i.sliceSerialize(x))?t(v):(n.enter("characterReferenceMarker"),n.consume(v),n.exit("characterReferenceMarker"),n.exit("characterReference"),e)}return s(v)&&r++<o?(n.consume(v),m):t(v)}}const ZG={partial:!0,tokenize:f6e},XG={concrete:!0,name:"codeFenced",tokenize:d6e};function d6e(n,e,t){const i=this,r={partial:!0,tokenize:X};let o=0,s=0,a;return c;function c(Z){return h(Z)}function h(Z){const G=i.events[i.events.length-1];return o=G&&G[1].type==="linePrefix"?G[2].sliceSerialize(G[1],!0).length:0,a=Z,n.enter("codeFenced"),n.enter("codeFencedFence"),n.enter("codeFencedFenceSequence"),m(Z)}function m(Z){return Z===a?(s++,n.consume(Z),m):s<3?t(Z):(n.exit("codeFencedFenceSequence"),Ks(Z)?Qa(n,v,"whitespace")(Z):v(Z))}function v(Z){return Z===null||Rr(Z)?(n.exit("codeFencedFence"),i.interrupt?e(Z):n.check(ZG,P,H)(Z)):(n.enter("codeFencedFenceInfo"),n.enter("chunkString",{contentType:"string"}),x(Z))}function x(Z){return Z===null||Rr(Z)?(n.exit("chunkString"),n.exit("codeFencedFenceInfo"),v(Z)):Ks(Z)?(n.exit("chunkString"),n.exit("codeFencedFenceInfo"),Qa(n,E,"whitespace")(Z)):Z===96&&Z===a?t(Z):(n.consume(Z),x)}function E(Z){return Z===null||Rr(Z)?v(Z):(n.enter("codeFencedFenceMeta"),n.enter("chunkString",{contentType:"string"}),D(Z))}function D(Z){return Z===null||Rr(Z)?(n.exit("chunkString"),n.exit("codeFencedFenceMeta"),v(Z)):Z===96&&Z===a?t(Z):(n.consume(Z),D)}function P(Z){return n.attempt(r,H,F)(Z)}function F(Z){return n.enter("lineEnding"),n.consume(Z),n.exit("lineEnding"),W}function W(Z){return o>0&&Ks(Z)?Qa(n,q,"linePrefix",o+1)(Z):q(Z)}function q(Z){return Z===null||Rr(Z)?n.check(ZG,P,H)(Z):(n.enter("codeFlowValue"),V(Z))}function V(Z){return Z===null||Rr(Z)?(n.exit("codeFlowValue"),q(Z)):(n.consume(Z),V)}function H(Z){return n.exit("codeFenced"),e(Z)}function X(Z,G,oe){let ue=0;return xe;function xe(je){return Z.enter("lineEnding"),Z.consume(je),Z.exit("lineEnding"),me}function me(je){return Z.enter("codeFencedFence"),Ks(je)?Qa(Z,Ie,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(je):Ie(je)}function Ie(je){return je===a?(Z.enter("codeFencedFenceSequence"),Me(je)):oe(je)}function Me(je){return je===a?(ue++,Z.consume(je),Me):ue>=s?(Z.exit("codeFencedFenceSequence"),Ks(je)?Qa(Z,Te,"whitespace")(je):Te(je)):oe(je)}function Te(je){return je===null||Rr(je)?(Z.exit("codeFencedFence"),G(je)):oe(je)}}}function f6e(n,e,t){const i=this;return r;function r(s){return s===null?t(s):(n.enter("lineEnding"),n.consume(s),n.exit("lineEnding"),o)}function o(s){return i.parser.lazy[i.now().line]?t(s):e(s)}}const m8={name:"codeIndented",tokenize:m6e},p6e={partial:!0,tokenize:g6e};function m6e(n,e,t){const i=this;return r;function r(h){return n.enter("codeIndented"),Qa(n,o,"linePrefix",5)(h)}function o(h){const m=i.events[i.events.length-1];return m&&m[1].type==="linePrefix"&&m[2].sliceSerialize(m[1],!0).length>=4?s(h):t(h)}function s(h){return h===null?c(h):Rr(h)?n.attempt(p6e,s,c)(h):(n.enter("codeFlowValue"),a(h))}function a(h){return h===null||Rr(h)?(n.exit("codeFlowValue"),s(h)):(n.consume(h),a)}function c(h){return n.exit("codeIndented"),e(h)}}function g6e(n,e,t){const i=this;return r;function r(s){return i.parser.lazy[i.now().line]?t(s):Rr(s)?(n.enter("lineEnding"),n.consume(s),n.exit("lineEnding"),r):Qa(n,o,"linePrefix",5)(s)}function o(s){const a=i.events[i.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(s):Rr(s)?r(s):t(s)}}const y6e={name:"codeText",previous:b6e,resolve:v6e,tokenize:C6e};function v6e(n){let e=n.length-4,t=3,i,r;if((n[t][1].type==="lineEnding"||n[t][1].type==="space")&&(n[e][1].type==="lineEnding"||n[e][1].type==="space")){for(i=t;++i<e;)if(n[i][1].type==="codeTextData"){n[t][1].type="codeTextPadding",n[e][1].type="codeTextPadding",t+=2,e-=2;break}}for(i=t-1,e++;++i<=e;)r===void 0?i!==e&&n[i][1].type!=="lineEnding"&&(r=i):(i===e||n[i][1].type==="lineEnding")&&(n[r][1].type="codeTextData",i!==r+2&&(n[r][1].end=n[i-1][1].end,n.splice(r+2,i-r-2),e-=i-r-2,i=r+2),r=void 0);return n}function b6e(n){return n!==96||this.events[this.events.length-1][1].type==="characterEscape"}function C6e(n,e,t){let i=0,r,o;return s;function s(v){return n.enter("codeText"),n.enter("codeTextSequence"),a(v)}function a(v){return v===96?(n.consume(v),i++,a):(n.exit("codeTextSequence"),c(v))}function c(v){return v===null?t(v):v===32?(n.enter("space"),n.consume(v),n.exit("space"),c):v===96?(o=n.enter("codeTextSequence"),r=0,m(v)):Rr(v)?(n.enter("lineEnding"),n.consume(v),n.exit("lineEnding"),c):(n.enter("codeTextData"),h(v))}function h(v){return v===null||v===32||v===96||Rr(v)?(n.exit("codeTextData"),c(v)):(n.consume(v),h)}function m(v){return v===96?(n.consume(v),r++,m):r===i?(n.exit("codeTextSequence"),n.exit("codeText"),e(v)):(o.type="codeTextData",h(v))}}class _6e{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,t){const i=t??Number.POSITIVE_INFINITY;return i<this.left.length?this.left.slice(e,i):e>this.left.length?this.right.slice(this.right.length-i+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-i+this.left.length).reverse())}splice(e,t,i){const r=t||0;this.setCursor(Math.trunc(e));const o=this.right.splice(this.right.length-r,Number.POSITIVE_INFINITY);return i&&B2(this.left,i),o.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),B2(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),B2(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const t=this.left.splice(e,Number.POSITIVE_INFINITY);B2(this.right,t.reverse())}else{const t=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);B2(this.left,t.reverse())}}}function B2(n,e){let t=0;if(e.length<1e4)n.push(...e);else for(;t<e.length;)n.push(...e.slice(t,t+1e4)),t+=1e4}function Kie(n){const e={};let t=-1,i,r,o,s,a,c,h;const m=new _6e(n);for(;++t<m.length;){for(;t in e;)t=e[t];if(i=m.get(t),t&&i[1].type==="chunkFlow"&&m.get(t-1)[1].type==="listItemPrefix"&&(c=i[1]._tokenizer.events,o=0,o<c.length&&c[o][1].type==="lineEndingBlank"&&(o+=2),o<c.length&&c[o][1].type==="content"))for(;++o<c.length&&c[o][1].type!=="content";)c[o][1].type==="chunkText"&&(c[o][1]._isInFirstContentOfListItem=!0,o++);if(i[0]==="enter")i[1].contentType&&(Object.assign(e,x6e(m,t)),t=e[t],h=!0);else if(i[1]._container){for(o=t,r=void 0;o--;)if(s=m.get(o),s[1].type==="lineEnding"||s[1].type==="lineEndingBlank")s[0]==="enter"&&(r&&(m.get(r)[1].type="lineEndingBlank"),s[1].type="lineEnding",r=o);else if(!(s[1].type==="linePrefix"||s[1].type==="listItemIndent"))break;r&&(i[1].end={...m.get(r)[1].start},a=m.slice(r,t),a.unshift(i),m.splice(r,t-r+1,a))}}return c0(n,0,Number.POSITIVE_INFINITY,m.slice(0)),!h}function x6e(n,e){const t=n.get(e)[1],i=n.get(e)[2];let r=e-1;const o=[];let s=t._tokenizer;s||(s=i.parser[t.contentType](t.start),t._contentTypeTextTrailing&&(s._contentTypeTextTrailing=!0));const a=s.events,c=[],h={};let m,v,x=-1,E=t,D=0,P=0;const F=[P];for(;E;){for(;n.get(++r)[1]!==E;);o.push(r),E._tokenizer||(m=i.sliceStream(E),E.next||m.push(null),v&&s.defineSkip(E.start),E._isInFirstContentOfListItem&&(s._gfmTasklistFirstContentOfListItem=!0),s.write(m),E._isInFirstContentOfListItem&&(s._gfmTasklistFirstContentOfListItem=void 0)),v=E,E=E.next}for(E=t;++x<a.length;)a[x][0]==="exit"&&a[x-1][0]==="enter"&&a[x][1].type===a[x-1][1].type&&a[x][1].start.line!==a[x][1].end.line&&(P=x+1,F.push(P),E._tokenizer=void 0,E.previous=void 0,E=E.next);for(s.events=[],E?(E._tokenizer=void 0,E.previous=void 0):F.pop(),x=F.length;x--;){const W=a.slice(F[x],F[x+1]),q=o.pop();c.push([q,q+W.length-1]),n.splice(q,2,W)}for(c.reverse(),x=-1;++x<c.length;)h[D+c[x][0]]=D+c[x][1],D+=c[x][1]-c[x][0]-1;return h}const M6e={resolve:S6e,tokenize:E6e},w6e={partial:!0,tokenize:B6e};function S6e(n){return Kie(n),n}function E6e(n,e){let t;return i;function i(a){return n.enter("content"),t=n.enter("chunkContent",{contentType:"content"}),r(a)}function r(a){return a===null?o(a):Rr(a)?n.check(w6e,s,o)(a):(n.consume(a),r)}function o(a){return n.exit("chunkContent"),n.exit("content"),e(a)}function s(a){return n.consume(a),n.exit("chunkContent"),t.next=n.enter("chunkContent",{contentType:"content",previous:t}),t=t.next,r}}function B6e(n,e,t){const i=this;return r;function r(s){return n.exit("chunkContent"),n.enter("lineEnding"),n.consume(s),n.exit("lineEnding"),Qa(n,o,"linePrefix")}function o(s){if(s===null||Rr(s))return t(s);const a=i.events[i.events.length-1];return!i.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(s):n.interrupt(i.parser.constructs.flow,t,e)(s)}}function Lie(n,e,t,i,r,o,s,a,c){const h=c||Number.POSITIVE_INFINITY;let m=0;return v;function v(W){return W===60?(n.enter(i),n.enter(r),n.enter(o),n.consume(W),n.exit(o),x):W===null||W===32||W===41||PR(W)?t(W):(n.enter(i),n.enter(s),n.enter(a),n.enter("chunkString",{contentType:"string"}),P(W))}function x(W){return W===62?(n.enter(o),n.consume(W),n.exit(o),n.exit(r),n.exit(i),e):(n.enter(a),n.enter("chunkString",{contentType:"string"}),E(W))}function E(W){return W===62?(n.exit("chunkString"),n.exit(a),x(W)):W===null||W===60||Rr(W)?t(W):(n.consume(W),W===92?D:E)}function D(W){return W===60||W===62||W===92?(n.consume(W),E):E(W)}function P(W){return!m&&(W===null||W===41||_d(W))?(n.exit("chunkString"),n.exit(a),n.exit(s),n.exit(i),e(W)):m<h&&W===40?(n.consume(W),m++,P):W===41?(n.consume(W),m--,P):W===null||W===32||W===40||PR(W)?t(W):(n.consume(W),W===92?F:P)}function F(W){return W===40||W===41||W===92?(n.consume(W),P):P(W)}}function Fie(n,e,t,i,r,o){const s=this;let a=0,c;return h;function h(E){return n.enter(i),n.enter(r),n.consume(E),n.exit(r),n.enter(o),m}function m(E){return a>999||E===null||E===91||E===93&&!c||E===94&&!a&&"_hiddenFootnoteSupport"in s.parser.constructs?t(E):E===93?(n.exit(o),n.enter(r),n.consume(E),n.exit(r),n.exit(i),e):Rr(E)?(n.enter("lineEnding"),n.consume(E),n.exit("lineEnding"),m):(n.enter("chunkString",{contentType:"string"}),v(E))}function v(E){return E===null||E===91||E===93||Rr(E)||a++>999?(n.exit("chunkString"),m(E)):(n.consume(E),c||(c=!Ks(E)),E===92?x:v)}function x(E){return E===91||E===92||E===93?(n.consume(E),a++,v):v(E)}}function zie(n,e,t,i,r,o){let s;return a;function a(x){return x===34||x===39||x===40?(n.enter(i),n.enter(r),n.consume(x),n.exit(r),s=x===40?41:x,c):t(x)}function c(x){return x===s?(n.enter(r),n.consume(x),n.exit(r),n.exit(i),e):(n.enter(o),h(x))}function h(x){return x===s?(n.exit(o),c(s)):x===null?t(x):Rr(x)?(n.enter("lineEnding"),n.consume(x),n.exit("lineEnding"),Qa(n,h,"linePrefix")):(n.enter("chunkString",{contentType:"string"}),m(x))}function m(x){return x===s||x===null||Rr(x)?(n.exit("chunkString"),h(x)):(n.consume(x),x===92?v:m)}function v(x){return x===s||x===92?(n.consume(x),m):m(x)}}function E3(n,e){let t;return i;function i(r){return Rr(r)?(n.enter("lineEnding"),n.consume(r),n.exit("lineEnding"),t=!0,i):Ks(r)?Qa(n,i,t?"linePrefix":"lineSuffix")(r):e(r)}}const O6e={name:"definition",tokenize:k6e},I6e={partial:!0,tokenize:T6e};function k6e(n,e,t){const i=this;let r;return o;function o(E){return n.enter("definition"),s(E)}function s(E){return Fie.call(i,n,a,t,"definitionLabel","definitionLabelMarker","definitionLabelString")(E)}function a(E){return r=ix(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)),E===58?(n.enter("definitionMarker"),n.consume(E),n.exit("definitionMarker"),c):t(E)}function c(E){return _d(E)?E3(n,h)(E):h(E)}function h(E){return Lie(n,m,t,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(E)}function m(E){return n.attempt(I6e,v,v)(E)}function v(E){return Ks(E)?Qa(n,x,"whitespace")(E):x(E)}function x(E){return E===null||Rr(E)?(n.exit("definition"),i.parser.defined.push(r),e(E)):t(E)}}function T6e(n,e,t){return i;function i(a){return _d(a)?E3(n,r)(a):t(a)}function r(a){return zie(n,o,t,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function o(a){return Ks(a)?Qa(n,s,"whitespace")(a):s(a)}function s(a){return a===null||Rr(a)?e(a):t(a)}}const R6e={name:"hardBreakEscape",tokenize:D6e};function D6e(n,e,t){return i;function i(o){return n.enter("hardBreakEscape"),n.consume(o),r}function r(o){return Rr(o)?(n.exit("hardBreakEscape"),e(o)):t(o)}}const P6e={name:"headingAtx",resolve:U6e,tokenize:K6e};function U6e(n,e){let t=n.length-2,i=3,r,o;return n[i][1].type==="whitespace"&&(i+=2),t-2>i&&n[t][1].type==="whitespace"&&(t-=2),n[t][1].type==="atxHeadingSequence"&&(i===t-1||t-4>i&&n[t-2][1].type==="whitespace")&&(t-=i+1===t?2:4),t>i&&(r={type:"atxHeadingText",start:n[i][1].start,end:n[t][1].end},o={type:"chunkText",start:n[i][1].start,end:n[t][1].end,contentType:"text"},c0(n,i,t-i+1,[["enter",r,e],["enter",o,e],["exit",o,e],["exit",r,e]])),n}function K6e(n,e,t){let i=0;return r;function r(m){return n.enter("atxHeading"),o(m)}function o(m){return n.enter("atxHeadingSequence"),s(m)}function s(m){return m===35&&i++<6?(n.consume(m),s):m===null||_d(m)?(n.exit("atxHeadingSequence"),a(m)):t(m)}function a(m){return m===35?(n.enter("atxHeadingSequence"),c(m)):m===null||Rr(m)?(n.exit("atxHeading"),e(m)):Ks(m)?Qa(n,a,"whitespace")(m):(n.enter("atxHeadingText"),h(m))}function c(m){return m===35?(n.consume(m),c):(n.exit("atxHeadingSequence"),a(m))}function h(m){return m===null||m===35||_d(m)?(n.exit("atxHeadingText"),a(m)):(n.consume(m),h)}}const L6e=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],JG=["pre","script","style","textarea"],F6e={concrete:!0,name:"htmlFlow",resolveTo:N6e,tokenize:G6e},z6e={partial:!0,tokenize:Q6e},j6e={partial:!0,tokenize:W6e};function N6e(n){let e=n.length;for(;e--&&!(n[e][0]==="enter"&&n[e][1].type==="htmlFlow"););return e>1&&n[e-2][1].type==="linePrefix"&&(n[e][1].start=n[e-2][1].start,n[e+1][1].start=n[e-2][1].start,n.splice(e-2,2)),n}function G6e(n,e,t){const i=this;let r,o,s,a,c;return h;function h(De){return m(De)}function m(De){return n.enter("htmlFlow"),n.enter("htmlFlowData"),n.consume(De),v}function v(De){return De===33?(n.consume(De),x):De===47?(n.consume(De),o=!0,P):De===63?(n.consume(De),r=3,i.interrupt?e:Le):jg(De)?(n.consume(De),s=String.fromCharCode(De),F):t(De)}function x(De){return De===45?(n.consume(De),r=2,E):De===91?(n.consume(De),r=5,a=0,D):jg(De)?(n.consume(De),r=4,i.interrupt?e:Le):t(De)}function E(De){return De===45?(n.consume(De),i.interrupt?e:Le):t(De)}function D(De){const _t="CDATA[";return De===_t.charCodeAt(a++)?(n.consume(De),a===_t.length?i.interrupt?e:Ie:D):t(De)}function P(De){return jg(De)?(n.consume(De),s=String.fromCharCode(De),F):t(De)}function F(De){if(De===null||De===47||De===62||_d(De)){const _t=De===47,at=s.toLowerCase();return!_t&&!o&&JG.includes(at)?(r=1,i.interrupt?e(De):Ie(De)):L6e.includes(s.toLowerCase())?(r=6,_t?(n.consume(De),W):i.interrupt?e(De):Ie(De)):(r=7,i.interrupt&&!i.parser.lazy[i.now().line]?t(De):o?q(De):V(De))}return De===45||mf(De)?(n.consume(De),s+=String.fromCharCode(De),F):t(De)}function W(De){return De===62?(n.consume(De),i.interrupt?e:Ie):t(De)}function q(De){return Ks(De)?(n.consume(De),q):xe(De)}function V(De){return De===47?(n.consume(De),xe):De===58||De===95||jg(De)?(n.consume(De),H):Ks(De)?(n.consume(De),V):xe(De)}function H(De){return De===45||De===46||De===58||De===95||mf(De)?(n.consume(De),H):X(De)}function X(De){return De===61?(n.consume(De),Z):Ks(De)?(n.consume(De),X):V(De)}function Z(De){return De===null||De===60||De===61||De===62||De===96?t(De):De===34||De===39?(n.consume(De),c=De,G):Ks(De)?(n.consume(De),Z):oe(De)}function G(De){return De===c?(n.consume(De),c=null,ue):De===null||Rr(De)?t(De):(n.consume(De),G)}function oe(De){return De===null||De===34||De===39||De===47||De===60||De===61||De===62||De===96||_d(De)?X(De):(n.consume(De),oe)}function ue(De){return De===47||De===62||Ks(De)?V(De):t(De)}function xe(De){return De===62?(n.consume(De),me):t(De)}function me(De){return De===null||Rr(De)?Ie(De):Ks(De)?(n.consume(De),me):t(De)}function Ie(De){return De===45&&r===2?(n.consume(De),Ee):De===60&&r===1?(n.consume(De),qe):De===62&&r===4?(n.consume(De),Re):De===63&&r===3?(n.consume(De),Le):De===93&&r===5?(n.consume(De),gt):Rr(De)&&(r===6||r===7)?(n.exit("htmlFlowData"),n.check(z6e,Ge,Me)(De)):De===null||Rr(De)?(n.exit("htmlFlowData"),Me(De)):(n.consume(De),Ie)}function Me(De){return n.check(j6e,Te,Ge)(De)}function Te(De){return n.enter("lineEnding"),n.consume(De),n.exit("lineEnding"),je}function je(De){return De===null||Rr(De)?Me(De):(n.enter("htmlFlowData"),Ie(De))}function Ee(De){return De===45?(n.consume(De),Le):Ie(De)}function qe(De){return De===47?(n.consume(De),s="",At):Ie(De)}function At(De){if(De===62){const _t=s.toLowerCase();return JG.includes(_t)?(n.consume(De),Re):Ie(De)}return jg(De)&&s.length<8?(n.consume(De),s+=String.fromCharCode(De),At):Ie(De)}function gt(De){return De===93?(n.consume(De),Le):Ie(De)}function Le(De){return De===62?(n.consume(De),Re):De===45&&r===2?(n.consume(De),Le):Ie(De)}function Re(De){return De===null||Rr(De)?(n.exit("htmlFlowData"),Ge(De)):(n.consume(De),Re)}function Ge(De){return n.exit("htmlFlow"),e(De)}}function W6e(n,e,t){const i=this;return r;function r(s){return Rr(s)?(n.enter("lineEnding"),n.consume(s),n.exit("lineEnding"),o):t(s)}function o(s){return i.parser.lazy[i.now().line]?t(s):e(s)}}function Q6e(n,e,t){return i;function i(r){return n.enter("lineEnding"),n.consume(r),n.exit("lineEnding"),n.attempt(E6,e,t)}}const Y6e={name:"htmlText",tokenize:q6e};function q6e(n,e,t){const i=this;let r,o,s;return a;function a(Le){return n.enter("htmlText"),n.enter("htmlTextData"),n.consume(Le),c}function c(Le){return Le===33?(n.consume(Le),h):Le===47?(n.consume(Le),X):Le===63?(n.consume(Le),V):jg(Le)?(n.consume(Le),oe):t(Le)}function h(Le){return Le===45?(n.consume(Le),m):Le===91?(n.consume(Le),o=0,D):jg(Le)?(n.consume(Le),q):t(Le)}function m(Le){return Le===45?(n.consume(Le),E):t(Le)}function v(Le){return Le===null?t(Le):Le===45?(n.consume(Le),x):Rr(Le)?(s=v,qe(Le)):(n.consume(Le),v)}function x(Le){return Le===45?(n.consume(Le),E):v(Le)}function E(Le){return Le===62?Ee(Le):Le===45?x(Le):v(Le)}function D(Le){const Re="CDATA[";return Le===Re.charCodeAt(o++)?(n.consume(Le),o===Re.length?P:D):t(Le)}function P(Le){return Le===null?t(Le):Le===93?(n.consume(Le),F):Rr(Le)?(s=P,qe(Le)):(n.consume(Le),P)}function F(Le){return Le===93?(n.consume(Le),W):P(Le)}function W(Le){return Le===62?Ee(Le):Le===93?(n.consume(Le),W):P(Le)}function q(Le){return Le===null||Le===62?Ee(Le):Rr(Le)?(s=q,qe(Le)):(n.consume(Le),q)}function V(Le){return Le===null?t(Le):Le===63?(n.consume(Le),H):Rr(Le)?(s=V,qe(Le)):(n.consume(Le),V)}function H(Le){return Le===62?Ee(Le):V(Le)}function X(Le){return jg(Le)?(n.consume(Le),Z):t(Le)}function Z(Le){return Le===45||mf(Le)?(n.consume(Le),Z):G(Le)}function G(Le){return Rr(Le)?(s=G,qe(Le)):Ks(Le)?(n.consume(Le),G):Ee(Le)}function oe(Le){return Le===45||mf(Le)?(n.consume(Le),oe):Le===47||Le===62||_d(Le)?ue(Le):t(Le)}function ue(Le){return Le===47?(n.consume(Le),Ee):Le===58||Le===95||jg(Le)?(n.consume(Le),xe):Rr(Le)?(s=ue,qe(Le)):Ks(Le)?(n.consume(Le),ue):Ee(Le)}function xe(Le){return Le===45||Le===46||Le===58||Le===95||mf(Le)?(n.consume(Le),xe):me(Le)}function me(Le){return Le===61?(n.consume(Le),Ie):Rr(Le)?(s=me,qe(Le)):Ks(Le)?(n.consume(Le),me):ue(Le)}function Ie(Le){return Le===null||Le===60||Le===61||Le===62||Le===96?t(Le):Le===34||Le===39?(n.consume(Le),r=Le,Me):Rr(Le)?(s=Ie,qe(Le)):Ks(Le)?(n.consume(Le),Ie):(n.consume(Le),Te)}function Me(Le){return Le===r?(n.consume(Le),r=void 0,je):Le===null?t(Le):Rr(Le)?(s=Me,qe(Le)):(n.consume(Le),Me)}function Te(Le){return Le===null||Le===34||Le===39||Le===60||Le===61||Le===96?t(Le):Le===47||Le===62||_d(Le)?ue(Le):(n.consume(Le),Te)}function je(Le){return Le===47||Le===62||_d(Le)?ue(Le):t(Le)}function Ee(Le){return Le===62?(n.consume(Le),n.exit("htmlTextData"),n.exit("htmlText"),e):t(Le)}function qe(Le){return n.exit("htmlTextData"),n.enter("lineEnding"),n.consume(Le),n.exit("lineEnding"),At}function At(Le){return Ks(Le)?Qa(n,gt,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(Le):gt(Le)}function gt(Le){return n.enter("htmlTextData"),s(Le)}}const QU={name:"labelEnd",resolveAll:Z6e,resolveTo:X6e,tokenize:J6e},V6e={tokenize:eBe},$6e={tokenize:tBe},H6e={tokenize:nBe};function Z6e(n){let e=-1;const t=[];for(;++e<n.length;){const i=n[e][1];if(t.push(n[e]),i.type==="labelImage"||i.type==="labelLink"||i.type==="labelEnd"){const r=i.type==="labelImage"?4:2;i.type="data",e+=r}}return n.length!==t.length&&c0(n,0,n.length,t),n}function X6e(n,e){let t=n.length,i=0,r,o,s,a;for(;t--;)if(r=n[t][1],o){if(r.type==="link"||r.type==="labelLink"&&r._inactive)break;n[t][0]==="enter"&&r.type==="labelLink"&&(r._inactive=!0)}else if(s){if(n[t][0]==="enter"&&(r.type==="labelImage"||r.type==="labelLink")&&!r._balanced&&(o=t,r.type!=="labelLink")){i=2;break}}else r.type==="labelEnd"&&(s=t);const c={type:n[o][1].type==="labelLink"?"link":"image",start:{...n[o][1].start},end:{...n[n.length-1][1].end}},h={type:"label",start:{...n[o][1].start},end:{...n[s][1].end}},m={type:"labelText",start:{...n[o+i+2][1].end},end:{...n[s-2][1].start}};return a=[["enter",c,e],["enter",h,e]],a=Hf(a,n.slice(o+1,o+i+3)),a=Hf(a,[["enter",m,e]]),a=Hf(a,WU(e.parser.constructs.insideSpan.null,n.slice(o+i+4,s-3),e)),a=Hf(a,[["exit",m,e],n[s-2],n[s-1],["exit",h,e]]),a=Hf(a,n.slice(s+1)),a=Hf(a,[["exit",c,e]]),c0(n,o,n.length,a),n}function J6e(n,e,t){const i=this;let r=i.events.length,o,s;for(;r--;)if((i.events[r][1].type==="labelImage"||i.events[r][1].type==="labelLink")&&!i.events[r][1]._balanced){o=i.events[r][1];break}return a;function a(x){return o?o._inactive?v(x):(s=i.parser.defined.includes(ix(i.sliceSerialize({start:o.end,end:i.now()}))),n.enter("labelEnd"),n.enter("labelMarker"),n.consume(x),n.exit("labelMarker"),n.exit("labelEnd"),c):t(x)}function c(x){return x===40?n.attempt(V6e,m,s?m:v)(x):x===91?n.attempt($6e,m,s?h:v)(x):s?m(x):v(x)}function h(x){return n.attempt(H6e,m,v)(x)}function m(x){return e(x)}function v(x){return o._balanced=!0,t(x)}}function eBe(n,e,t){return i;function i(v){return n.enter("resource"),n.enter("resourceMarker"),n.consume(v),n.exit("resourceMarker"),r}function r(v){return _d(v)?E3(n,o)(v):o(v)}function o(v){return v===41?m(v):Lie(n,s,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(v)}function s(v){return _d(v)?E3(n,c)(v):m(v)}function a(v){return t(v)}function c(v){return v===34||v===39||v===40?zie(n,h,t,"resourceTitle","resourceTitleMarker","resourceTitleString")(v):m(v)}function h(v){return _d(v)?E3(n,m)(v):m(v)}function m(v){return v===41?(n.enter("resourceMarker"),n.consume(v),n.exit("resourceMarker"),n.exit("resource"),e):t(v)}}function tBe(n,e,t){const i=this;return r;function r(a){return Fie.call(i,n,o,s,"reference","referenceMarker","referenceString")(a)}function o(a){return i.parser.defined.includes(ix(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)))?e(a):t(a)}function s(a){return t(a)}}function nBe(n,e,t){return i;function i(o){return n.enter("reference"),n.enter("referenceMarker"),n.consume(o),n.exit("referenceMarker"),r}function r(o){return o===93?(n.enter("referenceMarker"),n.consume(o),n.exit("referenceMarker"),n.exit("reference"),e):t(o)}}const iBe={name:"labelStartImage",resolveAll:QU.resolveAll,tokenize:rBe};function rBe(n,e,t){const i=this;return r;function r(a){return n.enter("labelImage"),n.enter("labelImageMarker"),n.consume(a),n.exit("labelImageMarker"),o}function o(a){return a===91?(n.enter("labelMarker"),n.consume(a),n.exit("labelMarker"),n.exit("labelImage"),s):t(a)}function s(a){return a===94&&"_hiddenFootnoteSupport"in i.parser.constructs?t(a):e(a)}}const oBe={name:"labelStartLink",resolveAll:QU.resolveAll,tokenize:sBe};function sBe(n,e,t){const i=this;return r;function r(s){return n.enter("labelLink"),n.enter("labelMarker"),n.consume(s),n.exit("labelMarker"),n.exit("labelLink"),o}function o(s){return s===94&&"_hiddenFootnoteSupport"in i.parser.constructs?t(s):e(s)}}const g8={name:"lineEnding",tokenize:aBe};function aBe(n,e){return t;function t(i){return n.enter("lineEnding"),n.consume(i),n.exit("lineEnding"),Qa(n,e,"linePrefix")}}const Bw={name:"thematicBreak",tokenize:lBe};function lBe(n,e,t){let i=0,r;return o;function o(h){return n.enter("thematicBreak"),s(h)}function s(h){return r=h,a(h)}function a(h){return h===r?(n.enter("thematicBreakSequence"),c(h)):i>=3&&(h===null||Rr(h))?(n.exit("thematicBreak"),e(h)):t(h)}function c(h){return h===r?(n.consume(h),i++,c):(n.exit("thematicBreakSequence"),Ks(h)?Qa(n,a,"whitespace")(h):a(h))}}const Ad={continuation:{tokenize:hBe},exit:fBe,name:"list",tokenize:ABe},uBe={partial:!0,tokenize:pBe},cBe={partial:!0,tokenize:dBe};function ABe(n,e,t){const i=this,r=i.events[i.events.length-1];let o=r&&r[1].type==="linePrefix"?r[2].sliceSerialize(r[1],!0).length:0,s=0;return a;function a(E){const D=i.containerState.type||(E===42||E===43||E===45?"listUnordered":"listOrdered");if(D==="listUnordered"?!i.containerState.marker||E===i.containerState.marker:UR(E)){if(i.containerState.type||(i.containerState.type=D,n.enter(D,{_container:!0})),D==="listUnordered")return n.enter("listItemPrefix"),E===42||E===45?n.check(Bw,t,h)(E):h(E);if(!i.interrupt||E===49)return n.enter("listItemPrefix"),n.enter("listItemValue"),c(E)}return t(E)}function c(E){return UR(E)&&++s<10?(n.consume(E),c):(!i.interrupt||s<2)&&(i.containerState.marker?E===i.containerState.marker:E===41||E===46)?(n.exit("listItemValue"),h(E)):t(E)}function h(E){return n.enter("listItemMarker"),n.consume(E),n.exit("listItemMarker"),i.containerState.marker=i.containerState.marker||E,n.check(E6,i.interrupt?t:m,n.attempt(uBe,x,v))}function m(E){return i.containerState.initialBlankLine=!0,o++,x(E)}function v(E){return Ks(E)?(n.enter("listItemPrefixWhitespace"),n.consume(E),n.exit("listItemPrefixWhitespace"),x):t(E)}function x(E){return i.containerState.size=o+i.sliceSerialize(n.exit("listItemPrefix"),!0).length,e(E)}}function hBe(n,e,t){const i=this;return i.containerState._closeFlow=void 0,n.check(E6,r,o);function r(a){return i.containerState.furtherBlankLines=i.containerState.furtherBlankLines||i.containerState.initialBlankLine,Qa(n,e,"listItemIndent",i.containerState.size+1)(a)}function o(a){return i.containerState.furtherBlankLines||!Ks(a)?(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,s(a)):(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,n.attempt(cBe,e,s)(a))}function s(a){return i.containerState._closeFlow=!0,i.interrupt=void 0,Qa(n,n.attempt(Ad,e,t),"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function dBe(n,e,t){const i=this;return Qa(n,r,"listItemIndent",i.containerState.size+1);function r(o){const s=i.events[i.events.length-1];return s&&s[1].type==="listItemIndent"&&s[2].sliceSerialize(s[1],!0).length===i.containerState.size?e(o):t(o)}}function fBe(n){n.exit(this.containerState.type)}function pBe(n,e,t){const i=this;return Qa(n,r,"listItemPrefixWhitespace",i.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function r(o){const s=i.events[i.events.length-1];return!Ks(o)&&s&&s[1].type==="listItemPrefixWhitespace"?e(o):t(o)}}const eW={name:"setextUnderline",resolveTo:mBe,tokenize:gBe};function mBe(n,e){let t=n.length,i,r,o;for(;t--;)if(n[t][0]==="enter"){if(n[t][1].type==="content"){i=t;break}n[t][1].type==="paragraph"&&(r=t)}else n[t][1].type==="content"&&n.splice(t,1),!o&&n[t][1].type==="definition"&&(o=t);const s={type:"setextHeading",start:{...n[i][1].start},end:{...n[n.length-1][1].end}};return n[r][1].type="setextHeadingText",o?(n.splice(r,0,["enter",s,e]),n.splice(o+1,0,["exit",n[i][1],e]),n[i][1].end={...n[o][1].end}):n[i][1]=s,n.push(["exit",s,e]),n}function gBe(n,e,t){const i=this;let r;return o;function o(h){let m=i.events.length,v;for(;m--;)if(i.events[m][1].type!=="lineEnding"&&i.events[m][1].type!=="linePrefix"&&i.events[m][1].type!=="content"){v=i.events[m][1].type==="paragraph";break}return!i.parser.lazy[i.now().line]&&(i.interrupt||v)?(n.enter("setextHeadingLine"),r=h,s(h)):t(h)}function s(h){return n.enter("setextHeadingLineSequence"),a(h)}function a(h){return h===r?(n.consume(h),a):(n.exit("setextHeadingLineSequence"),Ks(h)?Qa(n,c,"lineSuffix")(h):c(h))}function c(h){return h===null||Rr(h)?(n.exit("setextHeadingLine"),e(h)):t(h)}}const yBe={tokenize:vBe};function vBe(n){const e=this,t=n.attempt(E6,i,n.attempt(this.parser.constructs.flowInitial,r,Qa(n,n.attempt(this.parser.constructs.flow,r,n.attempt(M6e,r)),"linePrefix")));return t;function i(o){if(o===null){n.consume(o);return}return n.enter("lineEndingBlank"),n.consume(o),n.exit("lineEndingBlank"),e.currentConstruct=void 0,t}function r(o){if(o===null){n.consume(o);return}return n.enter("lineEnding"),n.consume(o),n.exit("lineEnding"),e.currentConstruct=void 0,t}}const bBe={resolveAll:Nie()},CBe=jie("string"),_Be=jie("text");function jie(n){return{resolveAll:Nie(n==="text"?xBe:void 0),tokenize:e};function e(t){const i=this,r=this.parser.constructs[n],o=t.attempt(r,s,a);return s;function s(m){return h(m)?o(m):a(m)}function a(m){if(m===null){t.consume(m);return}return t.enter("data"),t.consume(m),c}function c(m){return h(m)?(t.exit("data"),o(m)):(t.consume(m),c)}function h(m){if(m===null)return!0;const v=r[m];let x=-1;if(v)for(;++x<v.length;){const E=v[x];if(!E.previous||E.previous.call(i,i.previous))return!0}return!1}}}function Nie(n){return e;function e(t,i){let r=-1,o;for(;++r<=t.length;)o===void 0?t[r]&&t[r][1].type==="data"&&(o=r,r++):(!t[r]||t[r][1].type!=="data")&&(r!==o+2&&(t[o][1].end=t[r-1][1].end,t.splice(o+2,r-o-2),r=o+2),o=void 0);return n?n(t,i):t}}function xBe(n,e){let t=0;for(;++t<=n.length;)if((t===n.length||n[t][1].type==="lineEnding")&&n[t-1][1].type==="data"){const i=n[t-1][1],r=e.sliceStream(i);let o=r.length,s=-1,a=0,c;for(;o--;){const h=r[o];if(typeof h=="string"){for(s=h.length;h.charCodeAt(s-1)===32;)a++,s--;if(s)break;s=-1}else if(h===-2)c=!0,a++;else if(h!==-1){o++;break}}if(e._contentTypeTextTrailing&&t===n.length&&(a=0),a){const h={type:t===n.length||c||a<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:o?s:i.start._bufferIndex+s,_index:i.start._index+o,line:i.end.line,column:i.end.column-a,offset:i.end.offset-a},end:{...i.end}};i.end={...h.start},i.start.offset===i.end.offset?Object.assign(i,h):(n.splice(t,0,["enter",h,e],["exit",h,e]),t+=2)}t++}return n}const MBe={42:Ad,43:Ad,45:Ad,48:Ad,49:Ad,50:Ad,51:Ad,52:Ad,53:Ad,54:Ad,55:Ad,56:Ad,57:Ad,62:Die},wBe={91:O6e},SBe={[-2]:m8,[-1]:m8,32:m8},EBe={35:P6e,42:Bw,45:[eW,Bw],60:F6e,61:eW,95:Bw,96:XG,126:XG},BBe={38:Uie,92:Pie},OBe={[-5]:g8,[-4]:g8,[-3]:g8,33:iBe,38:Uie,42:KR,60:[o6e,Y6e],91:oBe,92:[R6e,Pie],93:QU,95:KR,96:y6e},IBe={null:[KR,bBe]},kBe={null:[42,95]},TBe={null:[]},RBe=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:kBe,contentInitial:wBe,disable:TBe,document:MBe,flow:EBe,flowInitial:SBe,insideSpan:IBe,string:BBe,text:OBe},Symbol.toStringTag,{value:"Module"}));function DBe(n,e,t){let i={_bufferIndex:-1,_index:0,line:t&&t.line||1,column:t&&t.column||1,offset:t&&t.offset||0};const r={},o=[];let s=[],a=[];const c={attempt:G(X),check:G(Z),consume:q,enter:V,exit:H,interrupt:G(Z,{interrupt:!0})},h={code:null,containerState:{},defineSkip:P,events:[],now:D,parser:n,previous:null,sliceSerialize:x,sliceStream:E,write:v};let m=e.tokenize.call(h,c);return e.resolveAll&&o.push(e),h;function v(me){return s=Hf(s,me),F(),s[s.length-1]!==null?[]:(oe(e,0),h.events=WU(o,h.events,h),h.events)}function x(me,Ie){return UBe(E(me),Ie)}function E(me){return PBe(s,me)}function D(){const{_bufferIndex:me,_index:Ie,line:Me,column:Te,offset:je}=i;return{_bufferIndex:me,_index:Ie,line:Me,column:Te,offset:je}}function P(me){r[me.line]=me.column,xe()}function F(){let me;for(;i._index<s.length;){const Ie=s[i._index];if(typeof Ie=="string")for(me=i._index,i._bufferIndex<0&&(i._bufferIndex=0);i._index===me&&i._bufferIndex<Ie.length;)W(Ie.charCodeAt(i._bufferIndex));else W(Ie)}}function W(me){m=m(me)}function q(me){Rr(me)?(i.line++,i.column=1,i.offset+=me===-3?2:1,xe()):me!==-1&&(i.column++,i.offset++),i._bufferIndex<0?i._index++:(i._bufferIndex++,i._bufferIndex===s[i._index].length&&(i._bufferIndex=-1,i._index++)),h.previous=me}function V(me,Ie){const Me=Ie||{};return Me.type=me,Me.start=D(),h.events.push(["enter",Me,h]),a.push(Me),Me}function H(me){const Ie=a.pop();return Ie.end=D(),h.events.push(["exit",Ie,h]),Ie}function X(me,Ie){oe(me,Ie.from)}function Z(me,Ie){Ie.restore()}function G(me,Ie){return Me;function Me(Te,je,Ee){let qe,At,gt,Le;return Array.isArray(Te)?Ge(Te):"tokenize"in Te?Ge([Te]):Re(Te);function Re(Tt){return Kt;function Kt(Ke){const Oe=Ke!==null&&Tt[Ke],Be=Ke!==null&&Tt.null,Ve=[...Array.isArray(Oe)?Oe:Oe?[Oe]:[],...Array.isArray(Be)?Be:Be?[Be]:[]];return Ge(Ve)(Ke)}}function Ge(Tt){return qe=Tt,At=0,Tt.length===0?Ee:De(Tt[At])}function De(Tt){return Kt;function Kt(Ke){return Le=ue(),gt=Tt,Tt.partial||(h.currentConstruct=Tt),Tt.name&&h.parser.constructs.disable.null.includes(Tt.name)?at():Tt.tokenize.call(Ie?Object.assign(Object.create(h),Ie):h,c,_t,at)(Ke)}}function _t(Tt){return me(gt,Le),je}function at(Tt){return Le.restore(),++At<qe.length?De(qe[At]):Ee}}}function oe(me,Ie){me.resolveAll&&!o.includes(me)&&o.push(me),me.resolve&&c0(h.events,Ie,h.events.length-Ie,me.resolve(h.events.slice(Ie),h)),me.resolveTo&&(h.events=me.resolveTo(h.events,h))}function ue(){const me=D(),Ie=h.previous,Me=h.currentConstruct,Te=h.events.length,je=Array.from(a);return{from:Te,restore:Ee};function Ee(){i=me,h.previous=Ie,h.currentConstruct=Me,h.events.length=Te,a=je,xe()}}function xe(){i.line in r&&i.column<2&&(i.column=r[i.line],i.offset+=r[i.line]-1)}}function PBe(n,e){const t=e.start._index,i=e.start._bufferIndex,r=e.end._index,o=e.end._bufferIndex;let s;if(t===r)s=[n[t].slice(i,o)];else{if(s=n.slice(t,r),i>-1){const a=s[0];typeof a=="string"?s[0]=a.slice(i):s.shift()}o>0&&s.push(n[r].slice(0,o))}return s}function UBe(n,e){let t=-1;const i=[];let r;for(;++t<n.length;){const o=n[t];let s;if(typeof o=="string")s=o;else switch(o){case-5:{s="\r";break}case-4:{s=`
`;break}case-3:{s=`\r
`;break}case-2:{s=e?" ":"	";break}case-1:{if(!e&&r)continue;s=" ";break}default:s=String.fromCharCode(o)}r=o===-2,i.push(s)}return i.join("")}function KBe(n){const i={constructs:WEe([RBe,...(n||{}).extensions||[]]),content:r(XEe),defined:[],document:r(e6e),flow:r(yBe),lazy:{},string:r(CBe),text:r(_Be)};return i;function r(o){return s;function s(a){return DBe(i,o,a)}}}function LBe(n){for(;!Kie(n););return n}const tW=/[\0\t\n\r]/g;function FBe(){let n=1,e="",t=!0,i;return r;function r(o,s,a){const c=[];let h,m,v,x,E;for(o=e+(typeof o=="string"?o.toString():new TextDecoder(s||void 0).decode(o)),v=0,e="",t&&(o.charCodeAt(0)===65279&&v++,t=void 0);v<o.length;){if(tW.lastIndex=v,h=tW.exec(o),x=h&&h.index!==void 0?h.index:o.length,E=o.charCodeAt(x),!h){e=o.slice(v);break}if(E===10&&v===x&&i)c.push(-3),i=void 0;else switch(i&&(c.push(-5),i=void 0),v<x&&(c.push(o.slice(v,x)),n+=x-v),E){case 0:{c.push(65533),n++;break}case 9:{for(m=Math.ceil(n/4)*4,c.push(-2);n++<m;)c.push(-1);break}case 10:{c.push(-4),n=1;break}default:i=!0,n=1}v=x+1}return a&&(i&&c.push(-5),e&&c.push(e),c.push(null)),c}}const zBe=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function jBe(n){return n.replace(zBe,NBe)}function NBe(n,e,t){if(e)return e;if(t.charCodeAt(0)===35){const r=t.charCodeAt(1),o=r===120||r===88;return Rie(t.slice(o?2:1),o?16:10)}return GU(t)||n}const Gie={}.hasOwnProperty;function GBe(n,e,t){return typeof e!="string"&&(t=e,e=void 0),WBe(t)(LBe(KBe(t).document().write(FBe()(n,e,!0))))}function WBe(n){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:o(Wn),autolinkProtocol:ue,autolinkEmail:ue,atxHeading:o(Lt),blockQuote:o(Be),characterEscape:ue,characterReference:ue,codeFenced:o(Ve),codeFencedFenceInfo:s,codeFencedFenceMeta:s,codeIndented:o(Ve,s),codeText:o(yt,s),codeTextData:ue,data:ue,codeFlowValue:ue,definition:o(ft),definitionDestinationString:s,definitionLabelString:s,definitionTitleString:s,emphasis:o(Ct),hardBreakEscape:o(kt),hardBreakTrailing:o(kt),htmlFlow:o(an,s),htmlFlowData:ue,htmlText:o(an,s),htmlTextData:ue,image:o(Hn),label:s,link:o(Wn),listItem:o(Ln),listItemValue:x,listOrdered:o(_i,v),listUnordered:o(_i),paragraph:o(Un),reference:De,referenceString:s,resourceDestinationString:s,resourceTitleString:s,setextHeading:o(Lt),strong:o(xn),thematicBreak:o(Rn)},exit:{atxHeading:c(),atxHeadingSequence:X,autolink:c(),autolinkEmail:Oe,autolinkProtocol:Ke,blockQuote:c(),characterEscapeValue:xe,characterReferenceMarkerHexadecimal:at,characterReferenceMarkerNumeric:at,characterReferenceValue:Tt,characterReference:Kt,codeFenced:c(F),codeFencedFence:P,codeFencedFenceInfo:E,codeFencedFenceMeta:D,codeFlowValue:xe,codeIndented:c(W),codeText:c(je),codeTextData:xe,data:xe,definition:c(),definitionDestinationString:H,definitionLabelString:q,definitionTitleString:V,emphasis:c(),hardBreakEscape:c(Ie),hardBreakTrailing:c(Ie),htmlFlow:c(Me),htmlFlowData:xe,htmlText:c(Te),htmlTextData:xe,image:c(qe),label:gt,labelText:At,lineEnding:me,link:c(Ee),listItem:c(),listOrdered:c(),listUnordered:c(),paragraph:c(),referenceString:_t,resourceDestinationString:Le,resourceTitleString:Re,resource:Ge,setextHeading:c(oe),setextHeadingLineSequence:G,setextHeadingText:Z,strong:c(),thematicBreak:c()}};Wie(e,(n||{}).mdastExtensions||[]);const t={};return i;function i(Ot){let be={type:"root",children:[]};const ie={stack:[be],tokenStack:[],config:e,enter:a,exit:h,buffer:s,resume:m,data:t},le=[];let de=-1;for(;++de<Ot.length;)if(Ot[de][1].type==="listOrdered"||Ot[de][1].type==="listUnordered")if(Ot[de][0]==="enter")le.push(de);else{const se=le.pop();de=r(Ot,se,de)}for(de=-1;++de<Ot.length;){const se=e[Ot[de][0]];Gie.call(se,Ot[de][1].type)&&se[Ot[de][1].type].call(Object.assign({sliceSerialize:Ot[de][2].sliceSerialize},ie),Ot[de][1])}if(ie.tokenStack.length>0){const se=ie.tokenStack[ie.tokenStack.length-1];(se[1]||nW).call(ie,void 0,se[0])}for(be.position={start:My(Ot.length>0?Ot[0][1].start:{line:1,column:1,offset:0}),end:My(Ot.length>0?Ot[Ot.length-2][1].end:{line:1,column:1,offset:0})},de=-1;++de<e.transforms.length;)be=e.transforms[de](be)||be;return be}function r(Ot,be,ie){let le=be-1,de=-1,se=!1,Ae,ve,We,tt;for(;++le<=ie;){const Pe=Ot[le];switch(Pe[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Pe[0]==="enter"?de++:de--,tt=void 0;break}case"lineEndingBlank":{Pe[0]==="enter"&&(Ae&&!tt&&!de&&!We&&(We=le),tt=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:tt=void 0}if(!de&&Pe[0]==="enter"&&Pe[1].type==="listItemPrefix"||de===-1&&Pe[0]==="exit"&&(Pe[1].type==="listUnordered"||Pe[1].type==="listOrdered")){if(Ae){let Xe=le;for(ve=void 0;Xe--;){const y=Ot[Xe];if(y[1].type==="lineEnding"||y[1].type==="lineEndingBlank"){if(y[0]==="exit")continue;ve&&(Ot[ve][1].type="lineEndingBlank",se=!0),y[1].type="lineEnding",ve=Xe}else if(!(y[1].type==="linePrefix"||y[1].type==="blockQuotePrefix"||y[1].type==="blockQuotePrefixWhitespace"||y[1].type==="blockQuoteMarker"||y[1].type==="listItemIndent"))break}We&&(!ve||We<ve)&&(Ae._spread=!0),Ae.end=Object.assign({},ve?Ot[ve][1].start:Pe[1].end),Ot.splice(ve||le,0,["exit",Ae,Pe[2]]),le++,ie++}if(Pe[1].type==="listItemPrefix"){const Xe={type:"listItem",_spread:!1,start:Object.assign({},Pe[1].start),end:void 0};Ae=Xe,Ot.splice(le,0,["enter",Xe,Pe[2]]),le++,ie++,We=void 0,tt=!0}}}return Ot[be][1]._spread=se,ie}function o(Ot,be){return ie;function ie(le){a.call(this,Ot(le),le),be&&be.call(this,le)}}function s(){this.stack.push({type:"fragment",children:[]})}function a(Ot,be,ie){this.stack[this.stack.length-1].children.push(Ot),this.stack.push(Ot),this.tokenStack.push([be,ie||void 0]),Ot.position={start:My(be.start),end:void 0}}function c(Ot){return be;function be(ie){Ot&&Ot.call(this,ie),h.call(this,ie)}}function h(Ot,be){const ie=this.stack.pop(),le=this.tokenStack.pop();if(le)le[0].type!==Ot.type&&(be?be.call(this,Ot,le[0]):(le[1]||nW).call(this,Ot,le[0]));else throw new Error("Cannot close `"+Ot.type+"` ("+S3({start:Ot.start,end:Ot.end})+"): its not open");ie.position.end=My(Ot.end)}function m(){return NEe(this.stack.pop())}function v(){this.data.expectingFirstListItemValue=!0}function x(Ot){if(this.data.expectingFirstListItemValue){const be=this.stack[this.stack.length-2];be.start=Number.parseInt(this.sliceSerialize(Ot),10),this.data.expectingFirstListItemValue=void 0}}function E(){const Ot=this.resume(),be=this.stack[this.stack.length-1];be.lang=Ot}function D(){const Ot=this.resume(),be=this.stack[this.stack.length-1];be.meta=Ot}function P(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function F(){const Ot=this.resume(),be=this.stack[this.stack.length-1];be.value=Ot.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function W(){const Ot=this.resume(),be=this.stack[this.stack.length-1];be.value=Ot.replace(/(\r?\n|\r)$/g,"")}function q(Ot){const be=this.resume(),ie=this.stack[this.stack.length-1];ie.label=be,ie.identifier=ix(this.sliceSerialize(Ot)).toLowerCase()}function V(){const Ot=this.resume(),be=this.stack[this.stack.length-1];be.title=Ot}function H(){const Ot=this.resume(),be=this.stack[this.stack.length-1];be.url=Ot}function X(Ot){const be=this.stack[this.stack.length-1];if(!be.depth){const ie=this.sliceSerialize(Ot).length;be.depth=ie}}function Z(){this.data.setextHeadingSlurpLineEnding=!0}function G(Ot){const be=this.stack[this.stack.length-1];be.depth=this.sliceSerialize(Ot).codePointAt(0)===61?1:2}function oe(){this.data.setextHeadingSlurpLineEnding=void 0}function ue(Ot){const ie=this.stack[this.stack.length-1].children;let le=ie[ie.length-1];(!le||le.type!=="text")&&(le=Zn(),le.position={start:My(Ot.start),end:void 0},ie.push(le)),this.stack.push(le)}function xe(Ot){const be=this.stack.pop();be.value+=this.sliceSerialize(Ot),be.position.end=My(Ot.end)}function me(Ot){const be=this.stack[this.stack.length-1];if(this.data.atHardBreak){const ie=be.children[be.children.length-1];ie.position.end=My(Ot.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(be.type)&&(ue.call(this,Ot),xe.call(this,Ot))}function Ie(){this.data.atHardBreak=!0}function Me(){const Ot=this.resume(),be=this.stack[this.stack.length-1];be.value=Ot}function Te(){const Ot=this.resume(),be=this.stack[this.stack.length-1];be.value=Ot}function je(){const Ot=this.resume(),be=this.stack[this.stack.length-1];be.value=Ot}function Ee(){const Ot=this.stack[this.stack.length-1];if(this.data.inReference){const be=this.data.referenceType||"shortcut";Ot.type+="Reference",Ot.referenceType=be,delete Ot.url,delete Ot.title}else delete Ot.identifier,delete Ot.label;this.data.referenceType=void 0}function qe(){const Ot=this.stack[this.stack.length-1];if(this.data.inReference){const be=this.data.referenceType||"shortcut";Ot.type+="Reference",Ot.referenceType=be,delete Ot.url,delete Ot.title}else delete Ot.identifier,delete Ot.label;this.data.referenceType=void 0}function At(Ot){const be=this.sliceSerialize(Ot),ie=this.stack[this.stack.length-2];ie.label=jBe(be),ie.identifier=ix(be).toLowerCase()}function gt(){const Ot=this.stack[this.stack.length-1],be=this.resume(),ie=this.stack[this.stack.length-1];if(this.data.inReference=!0,ie.type==="link"){const le=Ot.children;ie.children=le}else ie.alt=be}function Le(){const Ot=this.resume(),be=this.stack[this.stack.length-1];be.url=Ot}function Re(){const Ot=this.resume(),be=this.stack[this.stack.length-1];be.title=Ot}function Ge(){this.data.inReference=void 0}function De(){this.data.referenceType="collapsed"}function _t(Ot){const be=this.resume(),ie=this.stack[this.stack.length-1];ie.label=be,ie.identifier=ix(this.sliceSerialize(Ot)).toLowerCase(),this.data.referenceType="full"}function at(Ot){this.data.characterReferenceType=Ot.type}function Tt(Ot){const be=this.sliceSerialize(Ot),ie=this.data.characterReferenceType;let le;ie?(le=Rie(be,ie==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):le=GU(be);const de=this.stack[this.stack.length-1];de.value+=le}function Kt(Ot){const be=this.stack.pop();be.position.end=My(Ot.end)}function Ke(Ot){xe.call(this,Ot);const be=this.stack[this.stack.length-1];be.url=this.sliceSerialize(Ot)}function Oe(Ot){xe.call(this,Ot);const be=this.stack[this.stack.length-1];be.url="mailto:"+this.sliceSerialize(Ot)}function Be(){return{type:"blockquote",children:[]}}function Ve(){return{type:"code",lang:null,meta:null,value:""}}function yt(){return{type:"inlineCode",value:""}}function ft(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Ct(){return{type:"emphasis",children:[]}}function Lt(){return{type:"heading",depth:0,children:[]}}function kt(){return{type:"break"}}function an(){return{type:"html",value:""}}function Hn(){return{type:"image",title:null,url:"",alt:null}}function Wn(){return{type:"link",title:null,url:"",children:[]}}function _i(Ot){return{type:"list",ordered:Ot.type==="listOrdered",start:null,spread:Ot._spread,children:[]}}function Ln(Ot){return{type:"listItem",spread:Ot._spread,checked:null,children:[]}}function Un(){return{type:"paragraph",children:[]}}function xn(){return{type:"strong",children:[]}}function Zn(){return{type:"text",value:""}}function Rn(){return{type:"thematicBreak"}}}function My(n){return{line:n.line,column:n.column,offset:n.offset}}function Wie(n,e){let t=-1;for(;++t<e.length;){const i=e[t];Array.isArray(i)?Wie(n,i):QBe(n,i)}}function QBe(n,e){let t;for(t in e)if(Gie.call(e,t))switch(t){case"canContainEols":{const i=e[t];i&&n[t].push(...i);break}case"transforms":{const i=e[t];i&&n[t].push(...i);break}case"enter":case"exit":{const i=e[t];i&&Object.assign(n[t],i);break}}}function nW(n,e){throw n?new Error("Cannot close `"+n.type+"` ("+S3({start:n.start,end:n.end})+"): a different token (`"+e.type+"`, "+S3({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+S3({start:e.start,end:e.end})+") is still open")}function YBe(n){const e=this;e.parser=t;function t(i){return GBe(i,{...e.data("settings"),...n,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function qBe(n,e){const t={type:"element",tagName:"blockquote",properties:{},children:n.wrap(n.all(e),!0)};return n.patch(e,t),n.applyData(e,t)}function VBe(n,e){const t={type:"element",tagName:"br",properties:{},children:[]};return n.patch(e,t),[n.applyData(e,t),{type:"text",value:`
`}]}function $Be(n,e){const t=e.value?e.value+`
`:"",i={};e.lang&&(i.className=["language-"+e.lang]);let r={type:"element",tagName:"code",properties:i,children:[{type:"text",value:t}]};return e.meta&&(r.data={meta:e.meta}),n.patch(e,r),r=n.applyData(e,r),r={type:"element",tagName:"pre",properties:{},children:[r]},n.patch(e,r),r}function HBe(n,e){const t={type:"element",tagName:"del",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function ZBe(n,e){const t={type:"element",tagName:"em",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function XBe(n,e){const t=typeof n.options.clobberPrefix=="string"?n.options.clobberPrefix:"user-content-",i=String(e.identifier).toUpperCase(),r=Hx(i.toLowerCase()),o=n.footnoteOrder.indexOf(i);let s,a=n.footnoteCounts.get(i);a===void 0?(a=0,n.footnoteOrder.push(i),s=n.footnoteOrder.length):s=o+1,a+=1,n.footnoteCounts.set(i,a);const c={type:"element",tagName:"a",properties:{href:"#"+t+"fn-"+r,id:t+"fnref-"+r+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(s)}]};n.patch(e,c);const h={type:"element",tagName:"sup",properties:{},children:[c]};return n.patch(e,h),n.applyData(e,h)}function JBe(n,e){const t={type:"element",tagName:"h"+e.depth,properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function eOe(n,e){if(n.options.allowDangerousHtml){const t={type:"raw",value:e.value};return n.patch(e,t),n.applyData(e,t)}}function Qie(n,e){const t=e.referenceType;let i="]";if(t==="collapsed"?i+="[]":t==="full"&&(i+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+i}];const r=n.all(e),o=r[0];o&&o.type==="text"?o.value="["+o.value:r.unshift({type:"text",value:"["});const s=r[r.length-1];return s&&s.type==="text"?s.value+=i:r.push({type:"text",value:i}),r}function tOe(n,e){const t=String(e.identifier).toUpperCase(),i=n.definitionById.get(t);if(!i)return Qie(n,e);const r={src:Hx(i.url||""),alt:e.alt};i.title!==null&&i.title!==void 0&&(r.title=i.title);const o={type:"element",tagName:"img",properties:r,children:[]};return n.patch(e,o),n.applyData(e,o)}function nOe(n,e){const t={src:Hx(e.url)};e.alt!==null&&e.alt!==void 0&&(t.alt=e.alt),e.title!==null&&e.title!==void 0&&(t.title=e.title);const i={type:"element",tagName:"img",properties:t,children:[]};return n.patch(e,i),n.applyData(e,i)}function iOe(n,e){const t={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};n.patch(e,t);const i={type:"element",tagName:"code",properties:{},children:[t]};return n.patch(e,i),n.applyData(e,i)}function rOe(n,e){const t=String(e.identifier).toUpperCase(),i=n.definitionById.get(t);if(!i)return Qie(n,e);const r={href:Hx(i.url||"")};i.title!==null&&i.title!==void 0&&(r.title=i.title);const o={type:"element",tagName:"a",properties:r,children:n.all(e)};return n.patch(e,o),n.applyData(e,o)}function oOe(n,e){const t={href:Hx(e.url)};e.title!==null&&e.title!==void 0&&(t.title=e.title);const i={type:"element",tagName:"a",properties:t,children:n.all(e)};return n.patch(e,i),n.applyData(e,i)}function sOe(n,e,t){const i=n.all(e),r=t?aOe(t):Yie(e),o={},s=[];if(typeof e.checked=="boolean"){const m=i[0];let v;m&&m.type==="element"&&m.tagName==="p"?v=m:(v={type:"element",tagName:"p",properties:{},children:[]},i.unshift(v)),v.children.length>0&&v.children.unshift({type:"text",value:" "}),v.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),o.className=["task-list-item"]}let a=-1;for(;++a<i.length;){const m=i[a];(r||a!==0||m.type!=="element"||m.tagName!=="p")&&s.push({type:"text",value:`
`}),m.type==="element"&&m.tagName==="p"&&!r?s.push(...m.children):s.push(m)}const c=i[i.length-1];c&&(r||c.type!=="element"||c.tagName!=="p")&&s.push({type:"text",value:`
`});const h={type:"element",tagName:"li",properties:o,children:s};return n.patch(e,h),n.applyData(e,h)}function aOe(n){let e=!1;if(n.type==="list"){e=n.spread||!1;const t=n.children;let i=-1;for(;!e&&++i<t.length;)e=Yie(t[i])}return e}function Yie(n){const e=n.spread;return e??n.children.length>1}function lOe(n,e){const t={},i=n.all(e);let r=-1;for(typeof e.start=="number"&&e.start!==1&&(t.start=e.start);++r<i.length;){const s=i[r];if(s.type==="element"&&s.tagName==="li"&&s.properties&&Array.isArray(s.properties.className)&&s.properties.className.includes("task-list-item")){t.className=["contains-task-list"];break}}const o={type:"element",tagName:e.ordered?"ol":"ul",properties:t,children:n.wrap(i,!0)};return n.patch(e,o),n.applyData(e,o)}function uOe(n,e){const t={type:"element",tagName:"p",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function cOe(n,e){const t={type:"root",children:n.wrap(n.all(e))};return n.patch(e,t),n.applyData(e,t)}function AOe(n,e){const t={type:"element",tagName:"strong",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function hOe(n,e){const t=n.all(e),i=t.shift(),r=[];if(i){const s={type:"element",tagName:"thead",properties:{},children:n.wrap([i],!0)};n.patch(e.children[0],s),r.push(s)}if(t.length>0){const s={type:"element",tagName:"tbody",properties:{},children:n.wrap(t,!0)},a=FU(e.children[1]),c=Sie(e.children[e.children.length-1]);a&&c&&(s.position={start:a,end:c}),r.push(s)}const o={type:"element",tagName:"table",properties:{},children:n.wrap(r,!0)};return n.patch(e,o),n.applyData(e,o)}function dOe(n,e,t){const i=t?t.children:void 0,o=(i?i.indexOf(e):1)===0?"th":"td",s=t&&t.type==="table"?t.align:void 0,a=s?s.length:e.children.length;let c=-1;const h=[];for(;++c<a;){const v=e.children[c],x={},E=s?s[c]:void 0;E&&(x.align=E);let D={type:"element",tagName:o,properties:x,children:[]};v&&(D.children=n.all(v),n.patch(v,D),D=n.applyData(v,D)),h.push(D)}const m={type:"element",tagName:"tr",properties:{},children:n.wrap(h,!0)};return n.patch(e,m),n.applyData(e,m)}function fOe(n,e){const t={type:"element",tagName:"td",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}const iW=9,rW=32;function pOe(n){const e=String(n),t=/\r?\n|\r/g;let i=t.exec(e),r=0;const o=[];for(;i;)o.push(oW(e.slice(r,i.index),r>0,!0),i[0]),r=i.index+i[0].length,i=t.exec(e);return o.push(oW(e.slice(r),r>0,!1)),o.join("")}function oW(n,e,t){let i=0,r=n.length;if(e){let o=n.codePointAt(i);for(;o===iW||o===rW;)i++,o=n.codePointAt(i)}if(t){let o=n.codePointAt(r-1);for(;o===iW||o===rW;)r--,o=n.codePointAt(r-1)}return r>i?n.slice(i,r):""}function mOe(n,e){const t={type:"text",value:pOe(String(e.value))};return n.patch(e,t),n.applyData(e,t)}function gOe(n,e){const t={type:"element",tagName:"hr",properties:{},children:[]};return n.patch(e,t),n.applyData(e,t)}const yOe={blockquote:qBe,break:VBe,code:$Be,delete:HBe,emphasis:ZBe,footnoteReference:XBe,heading:JBe,html:eOe,imageReference:tOe,image:nOe,inlineCode:iOe,linkReference:rOe,link:oOe,listItem:sOe,list:lOe,paragraph:uOe,root:cOe,strong:AOe,table:hOe,tableCell:fOe,tableRow:dOe,text:mOe,thematicBreak:gOe,toml:z5,yaml:z5,definition:z5,footnoteDefinition:z5};function z5(){}const qie=-1,B6=0,B3=1,eE=2,YU=3,qU=4,VU=5,$U=6,Vie=7,$ie=8,sW=typeof self=="object"?self:globalThis,vOe=(n,e)=>{const t=(r,o)=>(n.set(o,r),r),i=r=>{if(n.has(r))return n.get(r);const[o,s]=e[r];switch(o){case B6:case qie:return t(s,r);case B3:{const a=t([],r);for(const c of s)a.push(i(c));return a}case eE:{const a=t({},r);for(const[c,h]of s)a[i(c)]=i(h);return a}case YU:return t(new Date(s),r);case qU:{const{source:a,flags:c}=s;return t(new RegExp(a,c),r)}case VU:{const a=t(new Map,r);for(const[c,h]of s)a.set(i(c),i(h));return a}case $U:{const a=t(new Set,r);for(const c of s)a.add(i(c));return a}case Vie:{const{name:a,message:c}=s;return t(new sW[a](c),r)}case $ie:return t(BigInt(s),r);case"BigInt":return t(Object(BigInt(s)),r);case"ArrayBuffer":return t(new Uint8Array(s).buffer,s);case"DataView":{const{buffer:a}=new Uint8Array(s);return t(new DataView(a),s)}}return t(new sW[o](s),r)};return i},aW=n=>vOe(new Map,n)(0),HC="",{toString:bOe}={},{keys:COe}=Object,O2=n=>{const e=typeof n;if(e!=="object"||!n)return[B6,e];const t=bOe.call(n).slice(8,-1);switch(t){case"Array":return[B3,HC];case"Object":return[eE,HC];case"Date":return[YU,HC];case"RegExp":return[qU,HC];case"Map":return[VU,HC];case"Set":return[$U,HC];case"DataView":return[B3,t]}return t.includes("Array")?[B3,t]:t.includes("Error")?[Vie,t]:[eE,t]},j5=([n,e])=>n===B6&&(e==="function"||e==="symbol"),_Oe=(n,e,t,i)=>{const r=(s,a)=>{const c=i.push(s)-1;return t.set(a,c),c},o=s=>{if(t.has(s))return t.get(s);let[a,c]=O2(s);switch(a){case B6:{let m=s;switch(c){case"bigint":a=$ie,m=s.toString();break;case"function":case"symbol":if(n)throw new TypeError("unable to serialize "+c);m=null;break;case"undefined":return r([qie],s)}return r([a,m],s)}case B3:{if(c){let x=s;return c==="DataView"?x=new Uint8Array(s.buffer):c==="ArrayBuffer"&&(x=new Uint8Array(s)),r([c,[...x]],s)}const m=[],v=r([a,m],s);for(const x of s)m.push(o(x));return v}case eE:{if(c)switch(c){case"BigInt":return r([c,s.toString()],s);case"Boolean":case"Number":case"String":return r([c,s.valueOf()],s)}if(e&&"toJSON"in s)return o(s.toJSON());const m=[],v=r([a,m],s);for(const x of COe(s))(n||!j5(O2(s[x])))&&m.push([o(x),o(s[x])]);return v}case YU:return r([a,s.toISOString()],s);case qU:{const{source:m,flags:v}=s;return r([a,{source:m,flags:v}],s)}case VU:{const m=[],v=r([a,m],s);for(const[x,E]of s)(n||!(j5(O2(x))||j5(O2(E))))&&m.push([o(x),o(E)]);return v}case $U:{const m=[],v=r([a,m],s);for(const x of s)(n||!j5(O2(x)))&&m.push(o(x));return v}}const{message:h}=s;return r([a,{name:c,message:h}],s)};return o},lW=(n,{json:e,lossy:t}={})=>{const i=[];return _Oe(!(e||t),!!e,new Map,i)(n),i},tE=typeof structuredClone=="function"?(n,e)=>e&&("json"in e||"lossy"in e)?aW(lW(n,e)):structuredClone(n):(n,e)=>aW(lW(n,e));function xOe(n,e){const t=[{type:"text",value:""}];return e>1&&t.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),t}function MOe(n,e){return"Back to reference "+(n+1)+(e>1?"-"+e:"")}function wOe(n){const e=typeof n.options.clobberPrefix=="string"?n.options.clobberPrefix:"user-content-",t=n.options.footnoteBackContent||xOe,i=n.options.footnoteBackLabel||MOe,r=n.options.footnoteLabel||"Footnotes",o=n.options.footnoteLabelTagName||"h2",s=n.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let c=-1;for(;++c<n.footnoteOrder.length;){const h=n.footnoteById.get(n.footnoteOrder[c]);if(!h)continue;const m=n.all(h),v=String(h.identifier).toUpperCase(),x=Hx(v.toLowerCase());let E=0;const D=[],P=n.footnoteCounts.get(v);for(;P!==void 0&&++E<=P;){D.length>0&&D.push({type:"text",value:" "});let q=typeof t=="string"?t:t(c,E);typeof q=="string"&&(q={type:"text",value:q}),D.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+x+(E>1?"-"+E:""),dataFootnoteBackref:"",ariaLabel:typeof i=="string"?i:i(c,E),className:["data-footnote-backref"]},children:Array.isArray(q)?q:[q]})}const F=m[m.length-1];if(F&&F.type==="element"&&F.tagName==="p"){const q=F.children[F.children.length-1];q&&q.type==="text"?q.value+=" ":F.children.push({type:"text",value:" "}),F.children.push(...D)}else m.push(...D);const W={type:"element",tagName:"li",properties:{id:e+"fn-"+x},children:n.wrap(m,!0)};n.patch(h,W),a.push(W)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:o,properties:{...tE(s),id:"footnote-label"},children:[{type:"text",value:r}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:n.wrap(a,!0)},{type:"text",value:`
`}]}}const Hie=(function(n){if(n==null)return OOe;if(typeof n=="function")return O6(n);if(typeof n=="object")return Array.isArray(n)?SOe(n):EOe(n);if(typeof n=="string")return BOe(n);throw new Error("Expected function, string, or object as test")});function SOe(n){const e=[];let t=-1;for(;++t<n.length;)e[t]=Hie(n[t]);return O6(i);function i(...r){let o=-1;for(;++o<e.length;)if(e[o].apply(this,r))return!0;return!1}}function EOe(n){const e=n;return O6(t);function t(i){const r=i;let o;for(o in n)if(r[o]!==e[o])return!1;return!0}}function BOe(n){return O6(e);function e(t){return t&&t.type===n}}function O6(n){return e;function e(t,i,r){return!!(IOe(t)&&n.call(this,t,typeof i=="number"?i:void 0,r||void 0))}}function OOe(){return!0}function IOe(n){return n!==null&&typeof n=="object"&&"type"in n}const Zie=[],kOe=!0,uW=!1,TOe="skip";function ROe(n,e,t,i){let r;typeof e=="function"&&typeof t!="function"?(i=t,t=e):r=e;const o=Hie(r),s=i?-1:1;a(n,void 0,[])();function a(c,h,m){const v=c&&typeof c=="object"?c:{};if(typeof v.type=="string"){const E=typeof v.tagName=="string"?v.tagName:typeof v.name=="string"?v.name:void 0;Object.defineProperty(x,"name",{value:"node ("+(c.type+(E?"<"+E+">":""))+")"})}return x;function x(){let E=Zie,D,P,F;if((!e||o(c,h,m[m.length-1]||void 0))&&(E=DOe(t(c,m)),E[0]===uW))return E;if("children"in c&&c.children){const W=c;if(W.children&&E[0]!==TOe)for(P=(i?W.children.length:-1)+s,F=m.concat(W);P>-1&&P<W.children.length;){const q=W.children[P];if(D=a(q,P,F)(),D[0]===uW)return D;P=typeof D[1]=="number"?D[1]:P+s}}return E}}}function DOe(n){return Array.isArray(n)?n:typeof n=="number"?[kOe,n]:n==null?Zie:[n]}function Xie(n,e,t,i){let r,o,s;typeof e=="function"&&typeof t!="function"?(o=void 0,s=e,r=t):(o=e,s=t,r=i),ROe(n,o,a,r);function a(c,h){const m=h[h.length-1],v=m?m.children.indexOf(c):void 0;return s(c,v,m)}}const LR={}.hasOwnProperty,POe={};function UOe(n,e){const t=e||POe,i=new Map,r=new Map,o=new Map,s={...yOe,...t.handlers},a={all:h,applyData:LOe,definitionById:i,footnoteById:r,footnoteCounts:o,footnoteOrder:[],handlers:s,one:c,options:t,patch:KOe,wrap:zOe};return Xie(n,function(m){if(m.type==="definition"||m.type==="footnoteDefinition"){const v=m.type==="definition"?i:r,x=String(m.identifier).toUpperCase();v.has(x)||v.set(x,m)}}),a;function c(m,v){const x=m.type,E=a.handlers[x];if(LR.call(a.handlers,x)&&E)return E(a,m,v);if(a.options.passThrough&&a.options.passThrough.includes(x)){if("children"in m){const{children:P,...F}=m,W=tE(F);return W.children=a.all(m),W}return tE(m)}return(a.options.unknownHandler||FOe)(a,m,v)}function h(m){const v=[];if("children"in m){const x=m.children;let E=-1;for(;++E<x.length;){const D=a.one(x[E],m);if(D){if(E&&x[E-1].type==="break"&&(!Array.isArray(D)&&D.type==="text"&&(D.value=cW(D.value)),!Array.isArray(D)&&D.type==="element")){const P=D.children[0];P&&P.type==="text"&&(P.value=cW(P.value))}Array.isArray(D)?v.push(...D):v.push(D)}}}return v}}function KOe(n,e){n.position&&(e.position=bEe(n))}function LOe(n,e){let t=e;if(n&&n.data){const i=n.data.hName,r=n.data.hChildren,o=n.data.hProperties;if(typeof i=="string")if(t.type==="element")t.tagName=i;else{const s="children"in t?t.children:[t];t={type:"element",tagName:i,properties:{},children:s}}t.type==="element"&&o&&Object.assign(t.properties,tE(o)),"children"in t&&t.children&&r!==null&&r!==void 0&&(t.children=r)}return t}function FOe(n,e){const t=e.data||{},i="value"in e&&!(LR.call(t,"hProperties")||LR.call(t,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:n.all(e)};return n.patch(e,i),n.applyData(e,i)}function zOe(n,e){const t=[];let i=-1;for(e&&t.push({type:"text",value:`
`});++i<n.length;)i&&t.push({type:"text",value:`
`}),t.push(n[i]);return e&&n.length>0&&t.push({type:"text",value:`
`}),t}function cW(n){let e=0,t=n.charCodeAt(e);for(;t===9||t===32;)e++,t=n.charCodeAt(e);return n.slice(e)}function AW(n,e){const t=UOe(n,e),i=t.one(n,void 0),r=wOe(t),o=Array.isArray(i)?{type:"root",children:i}:i||{type:"root",children:[]};return r&&o.children.push({type:"text",value:`
`},r),o}function jOe(n,e){return n&&"run"in n?async function(t,i){const r=AW(t,{file:i,...e});await n.run(r,i)}:function(t,i){return AW(t,{file:i,...n||e})}}function hW(n){if(n)throw n}var y8,dW;function NOe(){if(dW)return y8;dW=1;var n=Object.prototype.hasOwnProperty,e=Object.prototype.toString,t=Object.defineProperty,i=Object.getOwnPropertyDescriptor,r=function(h){return typeof Array.isArray=="function"?Array.isArray(h):e.call(h)==="[object Array]"},o=function(h){if(!h||e.call(h)!=="[object Object]")return!1;var m=n.call(h,"constructor"),v=h.constructor&&h.constructor.prototype&&n.call(h.constructor.prototype,"isPrototypeOf");if(h.constructor&&!m&&!v)return!1;var x;for(x in h);return typeof x>"u"||n.call(h,x)},s=function(h,m){t&&m.name==="__proto__"?t(h,m.name,{enumerable:!0,configurable:!0,value:m.newValue,writable:!0}):h[m.name]=m.newValue},a=function(h,m){if(m==="__proto__")if(n.call(h,m)){if(i)return i(h,m).value}else return;return h[m]};return y8=function c(){var h,m,v,x,E,D,P=arguments[0],F=1,W=arguments.length,q=!1;for(typeof P=="boolean"&&(q=P,P=arguments[1]||{},F=2),(P==null||typeof P!="object"&&typeof P!="function")&&(P={});F<W;++F)if(h=arguments[F],h!=null)for(m in h)v=a(P,m),x=a(h,m),P!==x&&(q&&x&&(o(x)||(E=r(x)))?(E?(E=!1,D=v&&r(v)?v:[]):D=v&&o(v)?v:{},s(P,{name:m,newValue:c(q,D,x)})):typeof x<"u"&&s(P,{name:m,newValue:x}));return P},y8}var GOe=NOe();const v8=Ou(GOe);function FR(n){if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)}function WOe(){const n=[],e={run:t,use:i};return e;function t(...r){let o=-1;const s=r.pop();if(typeof s!="function")throw new TypeError("Expected function as last argument, not "+s);a(null,...r);function a(c,...h){const m=n[++o];let v=-1;if(c){s(c);return}for(;++v<r.length;)(h[v]===null||h[v]===void 0)&&(h[v]=r[v]);r=h,m?QOe(m,a)(...h):s(null,...h)}}function i(r){if(typeof r!="function")throw new TypeError("Expected `middelware` to be a function, not "+r);return n.push(r),e}}function QOe(n,e){let t;return i;function i(...s){const a=n.length>s.length;let c;a&&s.push(r);try{c=n.apply(this,s)}catch(h){const m=h;if(a&&t)throw m;return r(m)}a||(c&&c.then&&typeof c.then=="function"?c.then(o,r):c instanceof Error?r(c):o(c))}function r(s,...a){t||(t=!0,e(s,...a))}function o(s){r(null,s)}}const kg={basename:YOe,dirname:qOe,extname:VOe,join:$Oe,sep:"/"};function YOe(n,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');IM(n);let t=0,i=-1,r=n.length,o;if(e===void 0||e.length===0||e.length>n.length){for(;r--;)if(n.codePointAt(r)===47){if(o){t=r+1;break}}else i<0&&(o=!0,i=r+1);return i<0?"":n.slice(t,i)}if(e===n)return"";let s=-1,a=e.length-1;for(;r--;)if(n.codePointAt(r)===47){if(o){t=r+1;break}}else s<0&&(o=!0,s=r+1),a>-1&&(n.codePointAt(r)===e.codePointAt(a--)?a<0&&(i=r):(a=-1,i=s));return t===i?i=s:i<0&&(i=n.length),n.slice(t,i)}function qOe(n){if(IM(n),n.length===0)return".";let e=-1,t=n.length,i;for(;--t;)if(n.codePointAt(t)===47){if(i){e=t;break}}else i||(i=!0);return e<0?n.codePointAt(0)===47?"/":".":e===1&&n.codePointAt(0)===47?"//":n.slice(0,e)}function VOe(n){IM(n);let e=n.length,t=-1,i=0,r=-1,o=0,s;for(;e--;){const a=n.codePointAt(e);if(a===47){if(s){i=e+1;break}continue}t<0&&(s=!0,t=e+1),a===46?r<0?r=e:o!==1&&(o=1):r>-1&&(o=-1)}return r<0||t<0||o===0||o===1&&r===t-1&&r===i+1?"":n.slice(r,t)}function $Oe(...n){let e=-1,t;for(;++e<n.length;)IM(n[e]),n[e]&&(t=t===void 0?n[e]:t+"/"+n[e]);return t===void 0?".":HOe(t)}function HOe(n){IM(n);const e=n.codePointAt(0)===47;let t=ZOe(n,!e);return t.length===0&&!e&&(t="."),t.length>0&&n.codePointAt(n.length-1)===47&&(t+="/"),e?"/"+t:t}function ZOe(n,e){let t="",i=0,r=-1,o=0,s=-1,a,c;for(;++s<=n.length;){if(s<n.length)a=n.codePointAt(s);else{if(a===47)break;a=47}if(a===47){if(!(r===s-1||o===1))if(r!==s-1&&o===2){if(t.length<2||i!==2||t.codePointAt(t.length-1)!==46||t.codePointAt(t.length-2)!==46){if(t.length>2){if(c=t.lastIndexOf("/"),c!==t.length-1){c<0?(t="",i=0):(t=t.slice(0,c),i=t.length-1-t.lastIndexOf("/")),r=s,o=0;continue}}else if(t.length>0){t="",i=0,r=s,o=0;continue}}e&&(t=t.length>0?t+"/..":"..",i=2)}else t.length>0?t+="/"+n.slice(r+1,s):t=n.slice(r+1,s),i=s-r-1;r=s,o=0}else a===46&&o>-1?o++:o=-1}return t}function IM(n){if(typeof n!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(n))}const XOe={cwd:JOe};function JOe(){return"/"}function zR(n){return!!(n!==null&&typeof n=="object"&&"href"in n&&n.href&&"protocol"in n&&n.protocol&&n.auth===void 0)}function e8e(n){if(typeof n=="string")n=new URL(n);else if(!zR(n)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+n+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(n.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return t8e(n)}function t8e(n){if(n.hostname!==""){const i=new TypeError('File URL host must be "localhost" or empty on darwin');throw i.code="ERR_INVALID_FILE_URL_HOST",i}const e=n.pathname;let t=-1;for(;++t<e.length;)if(e.codePointAt(t)===37&&e.codePointAt(t+1)===50){const i=e.codePointAt(t+2);if(i===70||i===102){const r=new TypeError("File URL path must not include encoded / characters");throw r.code="ERR_INVALID_FILE_URL_PATH",r}}return decodeURIComponent(e)}const b8=["history","path","basename","stem","extname","dirname"];class Jie{constructor(e){let t;e?zR(e)?t={path:e}:typeof e=="string"||n8e(e)?t={value:e}:t=e:t={},this.cwd="cwd"in t?"":XOe.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let i=-1;for(;++i<b8.length;){const o=b8[i];o in t&&t[o]!==void 0&&t[o]!==null&&(this[o]=o==="history"?[...t[o]]:t[o])}let r;for(r in t)b8.includes(r)||(this[r]=t[r])}get basename(){return typeof this.path=="string"?kg.basename(this.path):void 0}set basename(e){_8(e,"basename"),C8(e,"basename"),this.path=kg.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?kg.dirname(this.path):void 0}set dirname(e){fW(this.basename,"dirname"),this.path=kg.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?kg.extname(this.path):void 0}set extname(e){if(C8(e,"extname"),fW(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=kg.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){zR(e)&&(e=e8e(e)),_8(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?kg.basename(this.path,this.extname):void 0}set stem(e){_8(e,"stem"),C8(e,"stem"),this.path=kg.join(this.dirname||"",e+(this.extname||""))}fail(e,t,i){const r=this.message(e,t,i);throw r.fatal=!0,r}info(e,t,i){const r=this.message(e,t,i);return r.fatal=void 0,r}message(e,t,i){const r=new oh(e,t,i);return this.path&&(r.name=this.path+":"+r.name,r.file=this.path),r.fatal=!1,this.messages.push(r),r}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function C8(n,e){if(n&&n.includes(kg.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+kg.sep+"`")}function _8(n,e){if(!n)throw new Error("`"+e+"` cannot be empty")}function fW(n,e){if(!n)throw new Error("Setting `"+e+"` requires `path` to be set too")}function n8e(n){return!!(n&&typeof n=="object"&&"byteLength"in n&&"byteOffset"in n)}const i8e=(function(n){const i=this.constructor.prototype,r=i[n],o=function(){return r.apply(o,arguments)};return Object.setPrototypeOf(o,i),o}),r8e={}.hasOwnProperty;class HU extends i8e{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=WOe()}copy(){const e=new HU;let t=-1;for(;++t<this.attachers.length;){const i=this.attachers[t];e.use(...i)}return e.data(v8(!0,{},this.namespace)),e}data(e,t){return typeof e=="string"?arguments.length===2?(w8("data",this.frozen),this.namespace[e]=t,this):r8e.call(this.namespace,e)&&this.namespace[e]||void 0:e?(w8("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[t,...i]=this.attachers[this.freezeIndex];if(i[0]===!1)continue;i[0]===!0&&(i[0]=void 0);const r=t.call(e,...i);typeof r=="function"&&this.transformers.use(r)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const t=N5(e),i=this.parser||this.Parser;return x8("parse",i),i(String(t),t)}process(e,t){const i=this;return this.freeze(),x8("process",this.parser||this.Parser),M8("process",this.compiler||this.Compiler),t?r(void 0,t):new Promise(r);function r(o,s){const a=N5(e),c=i.parse(a);i.run(c,a,function(m,v,x){if(m||!v||!x)return h(m);const E=v,D=i.stringify(E,x);a8e(D)?x.value=D:x.result=D,h(m,x)});function h(m,v){m||!v?s(m):o?o(v):t(void 0,v)}}}processSync(e){let t=!1,i;return this.freeze(),x8("processSync",this.parser||this.Parser),M8("processSync",this.compiler||this.Compiler),this.process(e,r),mW("processSync","process",t),i;function r(o,s){t=!0,hW(o),i=s}}run(e,t,i){pW(e),this.freeze();const r=this.transformers;return!i&&typeof t=="function"&&(i=t,t=void 0),i?o(void 0,i):new Promise(o);function o(s,a){const c=N5(t);r.run(e,c,h);function h(m,v,x){const E=v||e;m?a(m):s?s(E):i(void 0,E,x)}}}runSync(e,t){let i=!1,r;return this.run(e,t,o),mW("runSync","run",i),r;function o(s,a){hW(s),r=a,i=!0}}stringify(e,t){this.freeze();const i=N5(t),r=this.compiler||this.Compiler;return M8("stringify",r),pW(e),r(e,i)}use(e,...t){const i=this.attachers,r=this.namespace;if(w8("use",this.frozen),e!=null)if(typeof e=="function")c(e,t);else if(typeof e=="object")Array.isArray(e)?a(e):s(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function o(h){if(typeof h=="function")c(h,[]);else if(typeof h=="object")if(Array.isArray(h)){const[m,...v]=h;c(m,v)}else s(h);else throw new TypeError("Expected usable value, not `"+h+"`")}function s(h){if(!("plugins"in h)&&!("settings"in h))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(h.plugins),h.settings&&(r.settings=v8(!0,r.settings,h.settings))}function a(h){let m=-1;if(h!=null)if(Array.isArray(h))for(;++m<h.length;){const v=h[m];o(v)}else throw new TypeError("Expected a list of plugins, not `"+h+"`")}function c(h,m){let v=-1,x=-1;for(;++v<i.length;)if(i[v][0]===h){x=v;break}if(x===-1)i.push([h,...m]);else if(m.length>0){let[E,...D]=m;const P=i[x][1];FR(P)&&FR(E)&&(E=v8(!0,P,E)),i[x]=[h,E,...D]}}}}const o8e=new HU().freeze();function x8(n,e){if(typeof e!="function")throw new TypeError("Cannot `"+n+"` without `parser`")}function M8(n,e){if(typeof e!="function")throw new TypeError("Cannot `"+n+"` without `compiler`")}function w8(n,e){if(e)throw new Error("Cannot call `"+n+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function pW(n){if(!FR(n)||typeof n.type!="string")throw new TypeError("Expected node, got `"+n+"`")}function mW(n,e,t){if(!t)throw new Error("`"+n+"` finished async. Use `"+e+"` instead")}function N5(n){return s8e(n)?n:new Jie(n)}function s8e(n){return!!(n&&typeof n=="object"&&"message"in n&&"messages"in n)}function a8e(n){return typeof n=="string"||l8e(n)}function l8e(n){return!!(n&&typeof n=="object"&&"byteLength"in n&&"byteOffset"in n)}const u8e="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",gW=[],yW={allowDangerousHtml:!0},c8e=/^(https?|ircs?|mailto|xmpp)$/i,A8e=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function h8e(n){const e=d8e(n),t=f8e(n);return p8e(e.runSync(e.parse(t),t),n)}function d8e(n){const e=n.rehypePlugins||gW,t=n.remarkPlugins||gW,i=n.remarkRehypeOptions?{...n.remarkRehypeOptions,...yW}:yW;return o8e().use(YBe).use(t).use(jOe,i).use(e)}function f8e(n){const e=n.children||"",t=new Jie;return typeof e=="string"&&(t.value=e),t}function p8e(n,e){const t=e.allowedElements,i=e.allowElement,r=e.components,o=e.disallowedElements,s=e.skipHtml,a=e.unwrapDisallowed,c=e.urlTransform||m8e;for(const m of A8e)Object.hasOwn(e,m.from)&&(""+m.from+(m.to?"use `"+m.to+"` instead":"remove it")+u8e+m.id,void 0);return Xie(n,h),wEe(n,{Fragment:te.Fragment,components:r,ignoreInvalidStyle:!0,jsx:te.jsx,jsxs:te.jsxs,passKeys:!0,passNode:!0});function h(m,v,x){if(m.type==="raw"&&x&&typeof v=="number")return s?x.children.splice(v,1):x.children[v]={type:"text",value:m.value},v;if(m.type==="element"){let E;for(E in p8)if(Object.hasOwn(p8,E)&&Object.hasOwn(m.properties,E)){const D=m.properties[E],P=p8[E];(P===null||P.includes(m.tagName))&&(m.properties[E]=c(String(D||""),E,m))}}if(m.type==="element"){let E=t?!t.includes(m.tagName):o?o.includes(m.tagName):!1;if(!E&&i&&typeof v=="number"&&(E=!i(m,v,x)),E&&x&&typeof v=="number")return a&&m.children?x.children.splice(v,1,...m.children):x.children.splice(v,1),v}}}function m8e(n){const e=n.indexOf(":"),t=n.indexOf("?"),i=n.indexOf("#"),r=n.indexOf("/");return e===-1||r!==-1&&e>r||t!==-1&&e>t||i!==-1&&e>i||c8e.test(n.slice(0,e))?n:""}function Xr(){var n="/home/runner/work/maputnik/maputnik/src/components/Doc.tsx",e="a7edc49bc306eb20f0cc16abd4c84f78b7cc6807",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/Doc.tsx",statementMap:{0:{start:{line:4,column:16},end:{line:8,column:1}},1:{start:{line:11,column:26},end:{line:11,column:36}},2:{start:{line:12,column:52},end:{line:12,column:61}},3:{start:{line:13,column:23},end:{line:13,column:47}},4:{start:{line:14,column:25},end:{line:16,column:26}},5:{start:{line:17,column:28},end:{line:23,column:5}},6:{start:{line:18,column:27},end:{line:18,column:46}},7:{start:{line:19,column:6},end:{line:21,column:7}},8:{start:{line:20,column:8},end:{line:20,column:148}},9:{start:{line:22,column:6},end:{line:22,column:19}},10:{start:{line:24,column:4},end:{line:57,column:9}},11:{start:{line:27,column:76},end:{line:27,column:132}},12:{start:{line:30,column:10},end:{line:33,column:20}},13:{start:{line:40,column:12},end:{line:40,column:75}},14:{start:{line:44,column:10},end:{line:53,column:20}},15:{start:{line:47,column:14},end:{line:51,column:15}},16:{start:{line:48,column:16},end:{line:48,column:98}},17:{start:{line:50,column:16},end:{line:50,column:72}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:58,column:3}},line:10},1:{name:"(anonymous_1)",decl:{start:{line:17,column:28},end:{line:17,column:29}},loc:{start:{line:17,column:39},end:{line:23,column:5}},line:17},2:{name:"(anonymous_2)",decl:{start:{line:27,column:13},end:{line:27,column:14}},loc:{start:{line:27,column:76},end:{line:27,column:132}},line:27},3:{name:"(anonymous_3)",decl:{start:{line:29,column:119},end:{line:29,column:120}},loc:{start:{line:29,column:137},end:{line:34,column:9}},line:29},4:{name:"(anonymous_4)",decl:{start:{line:39,column:37},end:{line:39,column:38}},loc:{start:{line:39,column:49},end:{line:41,column:11}},line:39},5:{name:"(anonymous_5)",decl:{start:{line:43,column:80},end:{line:43,column:81}},loc:{start:{line:43,column:103},end:{line:54,column:9}},line:43},6:{name:"(anonymous_6)",decl:{start:{line:46,column:37},end:{line:46,column:38}},loc:{start:{line:46,column:44},end:{line:52,column:13}},line:46}},branchMap:{0:{loc:{start:{line:14,column:25},end:{line:16,column:26}},type:"binary-expr",locations:[{start:{line:14,column:25},end:{line:14,column:33}},{start:{line:16,column:4},end:{line:16,column:26}}],line:14},1:{loc:{start:{line:19,column:6},end:{line:21,column:7}},type:"if",locations:[{start:{line:19,column:6},end:{line:21,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:19},2:{loc:{start:{line:25,column:6},end:{line:35,column:10}},type:"binary-expr",locations:[{start:{line:25,column:6},end:{line:25,column:9}},{start:{line:25,column:29},end:{line:35,column:10}}],line:25},3:{loc:{start:{line:29,column:8},end:{line:34,column:13}},type:"binary-expr",locations:[{start:{line:29,column:8},end:{line:29,column:20}},{start:{line:29,column:40},end:{line:34,column:13}}],line:29},4:{loc:{start:{line:36,column:6},end:{line:55,column:13}},type:"binary-expr",locations:[{start:{line:36,column:6},end:{line:36,column:16}},{start:{line:36,column:36},end:{line:55,column:13}}],line:36},5:{loc:{start:{line:47,column:14},end:{line:51,column:15}},type:"if",locations:[{start:{line:47,column:14},end:{line:51,column:15}},{start:{line:49,column:21},end:{line:51,column:15}}],line:47},6:{loc:{start:{line:56,column:6},end:{line:56,column:215}},type:"binary-expr",locations:[{start:{line:56,column:6},end:{line:56,column:12}},{start:{line:56,column:16},end:{line:56,column:30}},{start:{line:56,column:50},end:{line:56,column:215}}],line:56}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/Doc.tsx"],names:[],mappings:"AA0Ce,SAMT,UANS,KAkBK,YAlBL;AA1Cf,OAAO,WAAW;AAClB,OAAO,cAAc;AAErB,MAAM,UAAU;AAAA,EACd,IAAI;AAAA,EACJ,SAAS;AAAA,EACT,KAAK;AACP;AAkBA,qBAAqB,YAAY,MAAM,UAAoB;AAAA,EACzD,SAAU;AACR,UAAM,EAAC,UAAS,IAAI,KAAK;AAEzB,UAAM,EAAC,KAAK,QAAQ,QAAQ,eAAc,IAAI;AAC9C,UAAM,aAAa,UAAU,aAAa;AAE1C,UAAM,eACJ,CAAC,CAAC;AAAA;AAAA,IAGF,CAAC,MAAM,QAAQ,MAAM;AAGvB,UAAM,kBAAkB,CAAC,UAAkB;AACzC,YAAM,eAAe,MAAM,YAAY;AACvC,UAAI,aAAa,WAAW,UAAU,GAAG;AACvC,eAAO,oBAAC,OAAE,MAAM,cAAc,QAAO,UAAS,KAAI,cAAc,gBAAM,aAAa,MAAM,GAAG,EAAE,IAAI,GAAE;AAAA,MACtG;AACA,aAAO;AAAA,IACT;AAEA,WACE,iCACG;AAAA,aACC,qBAAC,SAAI,WAAU,WACb;AAAA,4BAAC,SAAI,WAAU,gBAAe,eAAY,kBACxC,8BAAC,YAAS,YAAY;AAAA,UACpB,GAAG,CAAC,EAAC,MAAM,OAAO,MAAM,UAAU,GAAG,MAAK,MAAM,oBAAC,OAAE,MAAY,QAAO,UAAU,GAAG,OAAQ,UAAS;AAAA,QACtG,GAAI,eAAI,GACV;AAAA,QACC,gBACC,oBAAC,QAAG,WAAU,mBACX,iBAAO,QAAQ,MAAM,EAAE,IAAI,CAAC,CAAC,KAAK,KAAK,MAAM;AAC5C,iBACE,qBAAC,QACC;AAAA,gCAAC,UAAM,eAAK,UAAU,GAAG,GAAE;AAAA,YAC3B,oBAAC,SAAK,gBAAM,KAAI;AAAA,eAFT,GAGT;AAAA,QAEJ,CAAC,GACH;AAAA,SAEJ;AAAA,MAED,cACC,oBAAC,SAAI,WAAU,wBACb,+BAAC,WAAM,WAAU,+BACf;AAAA,4BAAC,WACC,+BAAC,QACC;AAAA,8BAAC,QAAG;AAAA,UACH,OAAO,OAAO,OAAO,EAAE,IAAI,YAAU;AACpC,mBAAO,oBAAC,QAAiB,oBAAT,MAAgB;AAAA,UAClC,CAAC;AAAA,WACH,GACF;AAAA,QACA,oBAAC,WACE,iBAAO,QAAQ,UAAU,EAAE,IAAI,CAAC,CAAC,KAAK,UAAU,MAAM;AACrD,iBACE,qBAAC,QACC;AAAA,gCAAC,QAAI,eAAI;AAAA,YACR,OAAO,KAAK,OAAO,EAAE,IAAI,CAAC,MAAM;AAC/B,kBAAI,OAAO,UAAU,eAAe,KAAK,YAAY,CAAC,GAAG;AACvD,uBAAO,oBAAC,QAAY,0BAAgB,WAAW,CAAyB,CAAC,KAAzD,CAA2D;AAAA,cAC7E,OACK;AACH,uBAAO,oBAAC,QAAW,kBAAH,CAAK;AAAA,cACvB;AAAA,YACF,CAAC;AAAA,eATM,GAUT;AAAA,QAEJ,CAAC,GACH;AAAA,SACF,GACF;AAAA,MAED,UAAU,kBACT,oBAAC,SAAI,WAAU,uBACb,8BAAC,OAAE,MAAM,QAAS,QAAO,UAAS,KAAI,cAAc,0BAAe,GACrE;AAAA,OAEJ;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a7edc49bc306eb20f0cc16abd4c84f78b7cc6807"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Xr=function(){return s},s}Xr();const vW=(Xr().s[0]++,{js:"JS",android:"Android",ios:"iOS"});class I6 extends On.Component{render(){Xr().f[0]++;const{fieldSpec:e}=(Xr().s[1]++,this.props),{doc:t,values:i,docUrl:r,docUrlLinkText:o}=(Xr().s[2]++,e),s=(Xr().s[3]++,e["sdk-support"]),a=(Xr().s[4]++,Xr().b[0][0]++,!!i&&(Xr().b[0][1]++,!Array.isArray(i)));Xr().s[5]++;const c=h=>{Xr().f[1]++;const m=(Xr().s[6]++,h.toLowerCase());return Xr().s[7]++,m.startsWith("https://")?(Xr().b[1][0]++,Xr().s[8]++,te.jsx("a",{href:m,target:"_blank",rel:"noreferrer",children:"#"+m.split("/").pop()})):(Xr().b[1][1]++,Xr().s[9]++,h)};return Xr().s[10]++,te.jsxs(te.Fragment,{children:[(Xr().b[2][0]++,t&&(Xr().b[2][1]++,te.jsxs("div",{className:"SpecDoc",children:[te.jsx("div",{className:"SpecDoc__doc","data-wd-key":"spec-field-doc",children:te.jsx(h8e,{components:{a:({node:h,href:m,children:v,...x})=>(Xr().f[2]++,Xr().s[11]++,te.jsx("a",{href:m,target:"_blank",...x,children:v}))},children:t})}),(Xr().b[3][0]++,a&&(Xr().b[3][1]++,te.jsx("ul",{className:"SpecDoc__values",children:Object.entries(i).map(([h,m])=>(Xr().f[3]++,Xr().s[12]++,te.jsxs("li",{children:[te.jsx("code",{children:JSON.stringify(h)}),te.jsx("div",{children:m.doc})]},h)))})))]}))),(Xr().b[4][0]++,s&&(Xr().b[4][1]++,te.jsx("div",{className:"SpecDoc__sdk-support",children:te.jsxs("table",{className:"SpecDoc__sdk-support__table",children:[te.jsx("thead",{children:te.jsxs("tr",{children:[te.jsx("th",{}),Object.values(vW).map(h=>(Xr().f[4]++,Xr().s[13]++,te.jsx("th",{children:h},h)))]})}),te.jsx("tbody",{children:Object.entries(s).map(([h,m])=>(Xr().f[5]++,Xr().s[14]++,te.jsxs("tr",{children:[te.jsx("td",{children:h}),Object.keys(vW).map(v=>(Xr().f[6]++,Xr().s[15]++,Object.prototype.hasOwnProperty.call(m,v)?(Xr().b[5][0]++,Xr().s[16]++,te.jsx("td",{children:c(m[v])},v)):(Xr().b[5][1]++,Xr().s[17]++,te.jsx("td",{children:"no"},v))))]},h)))})]})}))),(Xr().b[6][0]++,r&&(Xr().b[6][1]++,o)&&(Xr().b[6][2]++,te.jsx("div",{className:"SpecDoc__learn-more",children:te.jsx("a",{href:r,target:"_blank",rel:"noreferrer",children:o})})))]})}}function Yr(){var n="/home/runner/work/maputnik/maputnik/src/components/Block.tsx",e="a026f5c10cd11169be04acaaf924d5e996792a37",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/Block.tsx",statementMap:{0:{start:{line:7,column:13},end:{line:7,column:17}},1:{start:{line:9,column:4},end:{line:9,column:17}},2:{start:{line:10,column:4},end:{line:12,column:6}},3:{start:{line:15,column:18},end:{line:15,column:32}},4:{start:{line:16,column:4},end:{line:18,column:5}},5:{start:{line:17,column:6},end:{line:17,column:64}},6:{start:{line:20,column:16},end:{line:24,column:3}},7:{start:{line:21,column:4},end:{line:23,column:7}},8:{start:{line:31,column:17},end:{line:40,column:3}},9:{start:{line:32,column:15},end:{line:32,column:39}},10:{start:{line:33,column:21},end:{line:33,column:48}},11:{start:{line:34,column:4},end:{line:36,column:5}},12:{start:{line:35,column:6},end:{line:35,column:30}},13:{start:{line:37,column:4},end:{line:39,column:5}},14:{start:{line:38,column:6},end:{line:38,column:29}},15:{start:{line:42,column:4},end:{line:78,column:6}},16:{start:{line:66,column:12},end:{line:66,column:31}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:21},end:{line:13,column:3}},line:8},1:{name:"(anonymous_1)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:14},end:{line:19,column:3}},line:14},2:{name:"(anonymous_2)",decl:{start:{line:20,column:16},end:{line:20,column:17}},loc:{start:{line:20,column:25},end:{line:24,column:3}},line:20},3:{name:"(anonymous_3)",decl:{start:{line:31,column:17},end:{line:31,column:18}},loc:{start:{line:31,column:28},end:{line:40,column:3}},line:31},4:{name:"(anonymous_4)",decl:{start:{line:41,column:2},end:{line:41,column:3}},loc:{start:{line:41,column:11},end:{line:79,column:3}},line:41},5:{name:"(anonymous_5)",decl:{start:{line:65,column:87},end:{line:65,column:88}},loc:{start:{line:65,column:95},end:{line:67,column:11}},line:65}},branchMap:{0:{loc:{start:{line:16,column:4},end:{line:18,column:5}},type:"if",locations:[{start:{line:16,column:4},end:{line:18,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:16},1:{loc:{start:{line:17,column:33},end:{line:17,column:62}},type:"cond-expr",locations:[{start:{line:17,column:48},end:{line:17,column:54}},{start:{line:17,column:57},end:{line:17,column:62}}],line:17},2:{loc:{start:{line:34,column:4},end:{line:36,column:5}},type:"if",locations:[{start:{line:34,column:4},end:{line:36,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:34},3:{loc:{start:{line:34,column:8},end:{line:34,column:66}},type:"binary-expr",locations:[{start:{line:34,column:8},end:{line:34,column:53}},{start:{line:34,column:57},end:{line:34,column:66}}],line:34},4:{loc:{start:{line:37,column:4},end:{line:39,column:5}},type:"if",locations:[{start:{line:37,column:4},end:{line:39,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},5:{loc:{start:{line:55,column:10},end:{line:62,column:14}},type:"binary-expr",locations:[{start:{line:55,column:10},end:{line:55,column:30}},{start:{line:55,column:50},end:{line:62,column:14}}],line:55},6:{loc:{start:{line:63,column:10},end:{line:63,column:134}},type:"binary-expr",locations:[{start:{line:63,column:10},end:{line:63,column:31}},{start:{line:63,column:51},end:{line:63,column:134}}],line:63},7:{loc:{start:{line:68,column:10},end:{line:75,column:11}},type:"binary-expr",locations:[{start:{line:68,column:10},end:{line:68,column:30}},{start:{line:68,column:50},end:{line:75,column:11}}],line:68},8:{loc:{start:{line:72,column:32},end:{line:72,column:64}},type:"cond-expr",locations:[{start:{line:72,column:53},end:{line:72,column:55}},{start:{line:72,column:58},end:{line:72,column:64}}],line:72}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/Block.tsx"],names:[],mappings:"AA+DW,SAYD,KAZC;AA/DX,OAAO,WAA8E;AACrF,OAAO,gBAAgB;AACvB,OAAO,mBAAmB;AAC1B,OAAO,SAAS;AAkBhB,qBAAqB,cAAc,MAAM,UAAkC;AAAA,EACzE,WAAkC;AAAA,EAElC,YAAa,OAAmB;AAC9B,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,SAAS;AAAA,IACX;AAAA,EACF;AAAA,EAEA,SAAS,GAAwE;AAC/E,UAAM,QAAQ,EAAE,OAAO;AACvB,QAAI,KAAK,MAAM,UAAU;AACvB,aAAO,KAAK,MAAM,SAAS,UAAU,KAAK,SAAY,KAAK;AAAA,IAC7D;AAAA,EACF;AAAA,EAEA,cAAc,CAAC,QAAiB;AAC9B,SAAK,SAAS;AAAA,MACZ,SAAS;AAAA,IACX,CAAC;AAAA,EACH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQA,eAAe,CAAC,UAAoC;AAClD,UAAM,KAAK,MAAM,YAAY;AAC7B,UAAM,WAAW,KAAK,UAAU,SAAS,EAAE;AAE3C,QAAI,MAAM,YAAY,OAAO,aAAa,WAAW,CAAC,UAAU;AAC9D,YAAM,gBAAgB;AAAA,IACxB;AACA,QAAI,MAAM,YAAY,OAAO,aAAa,KAAK;AAC7C,YAAM,eAAe;AAAA,IACvB;AAAA,EACF;AAAA,EAEA,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QAAM,OAAO,KAAK,MAAM;AAAA,QAC9B,eAAa,KAAK,MAAM,aAAa;AAAA,QACrC,WAAW,WAAW;AAAA,UACpB,wBAAwB;AAAA,UACxB,8BAA8B,KAAK,MAAM;AAAA,UACzC,yBAAyB,KAAK,MAAM;AAAA,UACpC,+BAA+B,KAAK,MAAM;AAAA,QAC5C,CAAC;AAAA,QACD,SAAS,KAAK;AAAA,QAEb;AAAA,eAAK,MAAM,aACV,oBAAC,SAAI,WAAU,8BACb;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,KAAK,MAAM;AAAA,cAClB,aAAa,KAAK;AAAA,cAClB,WAAW,KAAK,MAAM;AAAA;AAAA,UACxB,GACF;AAAA,UAED,CAAC,KAAK,MAAM,aACX,oBAAC,SAAI,WAAU,8BACZ,eAAK,MAAM,OACd;AAAA,UAEF,oBAAC,SAAI,WAAU,+BACZ,eAAK,MAAM,QACd;AAAA,UACA,oBAAC,SAAI,WAAU,gCAA+B,KAAK,QAAM;AAAC,iBAAK,WAAW;AAAA,UAAG,GAC1E,eAAK,MAAM,UACd;AAAA,UACC,KAAK,MAAM,aACV;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,OAAO,EAAC,SAAS,KAAK,MAAM,UAAU,KAAK,OAAM;AAAA,cAEjD,8BAAC,OAAI,WAAW,KAAK,MAAM,WAAW;AAAA;AAAA,UACxC;AAAA;AAAA;AAAA,IAEJ;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a026f5c10cd11169be04acaaf924d5e996792a37"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Yr=function(){return s},s}Yr();class Ms extends On.Component{_blockEl=(Yr().s[0]++,null);constructor(e){Yr().f[0]++,Yr().s[1]++,super(e),Yr().s[2]++,this.state={showDoc:!1}}onChange(e){Yr().f[1]++;const t=(Yr().s[3]++,e.target.value);if(Yr().s[4]++,this.props.onChange)return Yr().b[0][0]++,Yr().s[5]++,this.props.onChange(t===""?(Yr().b[1][0]++,void 0):(Yr().b[1][1]++,t));Yr().b[0][1]++}onToggleDoc=(Yr().s[6]++,e=>{Yr().f[2]++,Yr().s[7]++,this.setState({showDoc:e})});onLabelClick=(Yr().s[8]++,e=>{Yr().f[3]++;const t=(Yr().s[9]++,e.nativeEvent.target),i=(Yr().s[10]++,this._blockEl?.contains(t));Yr().s[11]++,Yr().b[3][0]++,e.nativeEvent.target.nodeName!=="INPUT"&&(Yr().b[3][1]++,!i)?(Yr().b[2][0]++,Yr().s[12]++,e.stopPropagation()):Yr().b[2][1]++,Yr().s[13]++,e.nativeEvent.target.nodeName!=="A"?(Yr().b[4][0]++,Yr().s[14]++,e.preventDefault()):Yr().b[4][1]++});render(){return Yr().f[4]++,Yr().s[15]++,te.jsxs("label",{style:this.props.style,"data-wd-key":this.props["data-wd-key"],className:f0({"maputnik-input-block":!0,"maputnik-input-block--wide":this.props.wideMode,"maputnik-action-block":this.props.action,"maputnik-input-block--error":this.props.error}),onClick:this.onLabelClick,children:[(Yr().b[5][0]++,this.props.fieldSpec&&(Yr().b[5][1]++,te.jsx("div",{className:"maputnik-input-block-label",children:te.jsx(UU,{label:this.props.label,onToggleDoc:this.onToggleDoc,fieldSpec:this.props.fieldSpec})}))),(Yr().b[6][0]++,!this.props.fieldSpec&&(Yr().b[6][1]++,te.jsx("div",{className:"maputnik-input-block-label",children:this.props.label}))),te.jsx("div",{className:"maputnik-input-block-action",children:this.props.action}),te.jsx("div",{className:"maputnik-input-block-content",ref:e=>{Yr().f[5]++,Yr().s[16]++,this._blockEl=e},children:this.props.children}),(Yr().b[7][0]++,this.props.fieldSpec&&(Yr().b[7][1]++,te.jsx("div",{className:"maputnik-doc-inline",style:{display:this.state.showDoc?(Yr().b[8][0]++,""):(Yr().b[8][1]++,"none")},children:te.jsx(I6,{fieldSpec:this.props.fieldSpec})})))]})}}function mA(){var n="/home/runner/work/maputnik/maputnik/src/components/InputSelect.tsx",e="1b99a181d4a9dd7b629113889cbb71c3a4bb4d42",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputSelect.tsx",statementMap:{0:{start:{line:5,column:18},end:{line:5,column:36}},1:{start:{line:6,column:4},end:{line:8,column:5}},2:{start:{line:7,column:6},end:{line:7,column:43}},3:{start:{line:7,column:35},end:{line:7,column:41}},4:{start:{line:9,column:4},end:{line:21,column:6}},5:{start:{line:17,column:25},end:{line:17,column:60}},6:{start:{line:19,column:64},end:{line:19,column:115}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:2},end:{line:4,column:3}},loc:{start:{line:4,column:11},end:{line:22,column:3}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:7,column:28},end:{line:7,column:29}},loc:{start:{line:7,column:35},end:{line:7,column:41}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:17,column:18},end:{line:17,column:19}},loc:{start:{line:17,column:25},end:{line:17,column:60}},line:17},3:{name:"(anonymous_3)",decl:{start:{line:19,column:30},end:{line:19,column:31}},loc:{start:{line:19,column:64},end:{line:19,column:115}},line:19}},branchMap:{0:{loc:{start:{line:6,column:4},end:{line:8,column:5}},type:"if",locations:[{start:{line:6,column:4},end:{line:8,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:6},1:{loc:{start:{line:6,column:8},end:{line:6,column:56}},type:"binary-expr",locations:[{start:{line:6,column:8},end:{line:6,column:26}},{start:{line:6,column:30},end:{line:6,column:56}}],line:6}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},f:{0:0,1:0,2:0,3:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputSelect.tsx"],names:[],mappings:"AA4BsC;AA5BtC,OAAO,WAAW;AAYlB,qBAAqB,oBAAoB,MAAM,UAA4B;AAAA,EACzE,SAAS;AACP,QAAI,UAAU,KAAK,MAAM;AACzB,QAAG,QAAQ,SAAS,KAAK,CAAC,MAAM,QAAQ,QAAQ,CAAC,CAAC,GAAG;AACnD,gBAAU,QAAQ,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;AAAA,IACrC;AAEA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,eAAa,KAAK,MAAM,aAAa;AAAA,QACrC,OAAO,KAAK,MAAM;AAAA,QAClB,OAAO,KAAK,MAAM;AAAA,QAClB,OAAO,KAAK,MAAM;AAAA,QAClB,UAAU,OAAK,KAAK,MAAM,SAAS,EAAE,OAAO,KAAK;AAAA,QACjD,cAAY,KAAK,MAAM,YAAY;AAAA,QAEjC,kBAAQ,IAAI,CAAC,CAAC,KAAK,KAAK,MAAM,oBAAC,YAAiB,OAAO,KAAM,mBAAlB,GAAwB,CAAS;AAAA;AAAA,IAChF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"1b99a181d4a9dd7b629113889cbb71c3a4bb4d42"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return mA=function(){return s},s}mA();class hC extends On.Component{render(){mA().f[0]++;let e=(mA().s[0]++,this.props.options);return mA().s[1]++,mA().b[1][0]++,e.length>0&&(mA().b[1][1]++,!Array.isArray(e[0]))?(mA().b[0][0]++,mA().s[2]++,e=e.map(t=>(mA().f[1]++,mA().s[3]++,[t,t]))):mA().b[0][1]++,mA().s[4]++,te.jsx("select",{className:"maputnik-select","data-wd-key":this.props["data-wd-key"],style:this.props.style,title:this.props.title,value:this.props.value,onChange:t=>(mA().f[2]++,mA().s[5]++,this.props.onChange(t.target.value)),"aria-label":this.props["aria-label"],children:e.map(([t,i])=>(mA().f[3]++,mA().s[6]++,te.jsx("option",{value:t,children:i},t)))})}}function or(){var n="/home/runner/work/maputnik/maputnik/src/components/InputString.tsx",e="ffe977722e3215b5f6718c464b93680839810a41",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputString.tsx",statementMap:{0:{start:{line:3,column:24},end:{line:6,column:3}},1:{start:{line:8,column:4},end:{line:8,column:17}},2:{start:{line:9,column:4},end:{line:12,column:6}},3:{start:{line:15,column:4},end:{line:19,column:5}},4:{start:{line:16,column:6},end:{line:18,column:8}},5:{start:{line:20,column:4},end:{line:20,column:14}},6:{start:{line:25,column:4},end:{line:36,column:5}},7:{start:{line:26,column:6},end:{line:26,column:23}},8:{start:{line:27,column:6},end:{line:30,column:8}},9:{start:{line:32,column:6},end:{line:32,column:20}},10:{start:{line:33,column:6},end:{line:35,column:8}},11:{start:{line:37,column:4},end:{line:39,column:5}},12:{start:{line:38,column:6},end:{line:38,column:48}},13:{start:{line:40,column:4},end:{line:70,column:7}},14:{start:{line:51,column:8},end:{line:56,column:11}},15:{start:{line:55,column:10},end:{line:55,column:71}},16:{start:{line:55,column:34},end:{line:55,column:71}},17:{start:{line:59,column:8},end:{line:62,column:9}},18:{start:{line:60,column:10},end:{line:60,column:44}},19:{start:{line:61,column:10},end:{line:61,column:73}},20:{start:{line:61,column:35},end:{line:61,column:73}},21:{start:{line:65,column:8},end:{line:67,column:9}},22:{start:{line:66,column:10},end:{line:66,column:48}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:13},end:{line:4,column:14}},loc:{start:{line:4,column:19},end:{line:5,column:5}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:21},end:{line:13,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:48},end:{line:21,column:3}},line:14},3:{name:"(anonymous_3)",decl:{start:{line:22,column:2},end:{line:22,column:3}},loc:{start:{line:22,column:11},end:{line:71,column:3}},line:22},4:{name:"(anonymous_4)",decl:{start:{line:50,column:16},end:{line:50,column:17}},loc:{start:{line:50,column:23},end:{line:57,column:7}},line:50},5:{name:"(anonymous_5)",decl:{start:{line:54,column:11},end:{line:54,column:12}},loc:{start:{line:54,column:17},end:{line:56,column:9}},line:54},6:{name:"(anonymous_6)",decl:{start:{line:58,column:14},end:{line:58,column:15}},loc:{start:{line:58,column:20},end:{line:63,column:7}},line:58},7:{name:"(anonymous_7)",decl:{start:{line:64,column:17},end:{line:64,column:18}},loc:{start:{line:64,column:24},end:{line:68,column:7}},line:64}},branchMap:{0:{loc:{start:{line:11,column:13},end:{line:11,column:30}},type:"binary-expr",locations:[{start:{line:11,column:13},end:{line:11,column:24}},{start:{line:11,column:28},end:{line:11,column:30}}],line:11},1:{loc:{start:{line:15,column:4},end:{line:19,column:5}},type:"if",locations:[{start:{line:15,column:4},end:{line:19,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:15},2:{loc:{start:{line:25,column:4},end:{line:36,column:5}},type:"if",locations:[{start:{line:25,column:4},end:{line:36,column:5}},{start:{line:31,column:11},end:{line:36,column:5}}],line:25},3:{loc:{start:{line:37,column:4},end:{line:39,column:5}},type:"if",locations:[{start:{line:37,column:4},end:{line:39,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},4:{loc:{start:{line:43,column:18},end:{line:43,column:125}},type:"cond-expr",locations:[{start:{line:43,column:83},end:{line:43,column:104}},{start:{line:43,column:107},end:{line:43,column:125}}],line:43},5:{loc:{start:{line:47,column:13},end:{line:47,column:64}},type:"cond-expr",locations:[{start:{line:47,column:43},end:{line:47,column:45}},{start:{line:47,column:48},end:{line:47,column:64}}],line:47},6:{loc:{start:{line:55,column:10},end:{line:55,column:71}},type:"if",locations:[{start:{line:55,column:10},end:{line:55,column:71}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:55},7:{loc:{start:{line:59,column:8},end:{line:62,column:9}},type:"if",locations:[{start:{line:59,column:8},end:{line:62,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:59},8:{loc:{start:{line:61,column:10},end:{line:61,column:73}},type:"if",locations:[{start:{line:61,column:10},end:{line:61,column:73}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:61},9:{loc:{start:{line:65,column:8},end:{line:67,column:9}},type:"if",locations:[{start:{line:65,column:8},end:{line:67,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:65},10:{loc:{start:{line:65,column:12},end:{line:65,column:51}},type:"binary-expr",locations:[{start:{line:65,column:12},end:{line:65,column:28}},{start:{line:65,column:32},end:{line:65,column:51}}],line:65}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputString.tsx"],names:[],mappings:"AAAA,OAAO,WAAW;AAsBlB,qBAAqB,oBAAoB,MAAM,UAA8C;AAAA,EAC3F,OAAO,eAAe;AAAA,IACpB,SAAS,MAAM;AAAA,IAAC;AAAA,EAClB;AAAA,EAEA,YAAY,OAAyB;AACnC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,SAAS;AAAA,MACT,OAAO,MAAM,SAAS;AAAA,IACxB;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAAmC,OAAyB;AAC1F,QAAI,CAAC,MAAM,SAAS;AAClB,aAAO;AAAA,QACL,OAAO,MAAM;AAAA,MACf;AAAA,IACF;AACA,WAAO,CAAC;AAAA,EACV;AAAA,EAEA,SAAS;AACP,QAAI;AACJ,QAAI;AAEJ,QAAG,KAAK,MAAM,OAAO;AACnB,YAAM;AACN,gBAAU;AAAA,QACR;AAAA,QACA;AAAA,MACF;AAAA,IACF,OACK;AACH,YAAM;AACN,gBAAU;AAAA,QACR;AAAA,MACF;AAAA,IACF;AAEA,QAAG,KAAK,MAAM,UAAU;AACtB,cAAQ,KAAK,2BAA2B;AAAA,IAC1C;AAEA,WAAO,MAAM,cAAc,KAAK;AAAA,MAC9B,cAAc,KAAK,MAAM,YAAY;AAAA,MACrC,eAAe,KAAK,MAAM,aAAa;AAAA,MACvC,YAAY,OAAO,UAAU,eAAe,KAAK,KAAK,OAAO,YAAY,IAAI,KAAK,MAAM,aAAa,EAAE,QAAQ;AAAA,MAC/G,UAAU,KAAK,MAAM;AAAA,MACrB,WAAW,QAAQ,KAAK,GAAG;AAAA,MAC3B,OAAO,KAAK,MAAM;AAAA,MAClB,OAAO,KAAK,MAAM,UAAU,SAAY,KAAK,KAAK,MAAM;AAAA,MACxD,aAAa,KAAK,MAAM;AAAA,MACxB,OAAO,KAAK,MAAM;AAAA,MAClB,UAAU,CAAC,MAA2E;AACpF,aAAK,SAAS;AAAA,UACZ,SAAS;AAAA,UACT,OAAO,EAAE,OAAO;AAAA,QAClB,GAAG,MAAM;AACP,cAAI,KAAK,MAAM,QAAS,MAAK,MAAM,QAAQ,KAAK,MAAM,KAAK;AAAA,QAC7D,CAAC;AAAA,MACH;AAAA,MACA,QAAQ,MAAM;AACZ,YAAG,KAAK,MAAM,UAAQ,KAAK,MAAM,OAAO;AACtC,eAAK,SAAS,EAAC,SAAS,MAAK,CAAC;AAC9B,cAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,KAAK,MAAM,KAAK;AAAA,QAC/D;AAAA,MACF;AAAA,MACA,WAAW,CAAC,MAAM;AAChB,YAAI,EAAE,YAAY,MAAM,KAAK,MAAM,UAAU;AAC3C,eAAK,MAAM,SAAS,KAAK,MAAM,KAAK;AAAA,QACtC;AAAA,MACF;AAAA,MACA,UAAU,KAAK,MAAM;AAAA,IACvB,CAAC;AAAA,EACH;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ffe977722e3215b5f6718c464b93680839810a41"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return or=function(){return s},s}or();class Mm extends On.Component{static defaultProps=(or().s[0]++,{onInput:()=>{or().f[0]++}});constructor(e){or().f[1]++,or().s[1]++,super(e),or().s[2]++,this.state={editing:!1,value:(or().b[0][0]++,e.value||(or().b[0][1]++,""))}}static getDerivedStateFromProps(e,t){if(or().f[2]++,or().s[3]++,t.editing)or().b[1][1]++;else return or().b[1][0]++,or().s[4]++,{value:e.value};return or().s[5]++,{}}render(){or().f[3]++;let e,t;return or().s[6]++,this.props.multi?(or().b[2][0]++,or().s[7]++,e="textarea",or().s[8]++,t=["maputnik-string","maputnik-string--multi"]):(or().b[2][1]++,or().s[9]++,e="input",or().s[10]++,t=["maputnik-string"]),or().s[11]++,this.props.disabled?(or().b[3][0]++,or().s[12]++,t.push("maputnik-string--disabled")):or().b[3][1]++,or().s[13]++,On.createElement(e,{"aria-label":this.props["aria-label"],"data-wd-key":this.props["data-wd-key"],spellCheck:Object.prototype.hasOwnProperty.call(this.props,"spellCheck")?(or().b[4][0]++,this.props.spellCheck):(or().b[4][1]++,e!=="input"),disabled:this.props.disabled,className:t.join(" "),style:this.props.style,value:this.state.value===void 0?(or().b[5][0]++,""):(or().b[5][1]++,this.state.value),placeholder:this.props.default,title:this.props.title,onChange:i=>{or().f[4]++,or().s[14]++,this.setState({editing:!0,value:i.target.value},()=>{or().f[5]++,or().s[15]++,this.props.onInput?(or().b[6][0]++,or().s[16]++,this.props.onInput(this.state.value)):or().b[6][1]++})},onBlur:()=>{or().f[6]++,or().s[17]++,this.state.value!==this.props.value?(or().b[7][0]++,or().s[18]++,this.setState({editing:!1}),or().s[19]++,this.props.onChange?(or().b[8][0]++,or().s[20]++,this.props.onChange(this.state.value)):or().b[8][1]++):or().b[7][1]++},onKeyDown:i=>{or().f[7]++,or().s[21]++,or().b[10][0]++,i.keyCode===13&&(or().b[10][1]++,this.props.onChange)?(or().b[9][0]++,or().s[22]++,this.props.onChange(this.state.value)):or().b[9][1]++},required:this.props.required})}}function XA(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldType.tsx",e="599a12b14a1057b6bb554b629d0d81238d4af16c",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldType.tsx",statementMap:{0:{start:{line:8,column:26},end:{line:38,column:1}},1:{start:{line:16,column:22},end:{line:16,column:110}},2:{start:{line:16,column:73},end:{line:16,column:109}},3:{start:{line:17,column:2},end:{line:37,column:4}},4:{start:{line:39,column:18},end:{line:39,column:54}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:26},end:{line:8,column:27}},loc:{start:{line:15,column:6},end:{line:38,column:1}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:16,column:66},end:{line:16,column:67}},loc:{start:{line:16,column:73},end:{line:16,column:109}},line:16}},branchMap:{0:{loc:{start:{line:14,column:2},end:{line:14,column:18}},type:"default-arg",locations:[{start:{line:14,column:13},end:{line:14,column:18}}],line:14},1:{loc:{start:{line:16,column:34},end:{line:16,column:60}},type:"binary-expr",locations:[{start:{line:16,column:34},end:{line:16,column:54}},{start:{line:16,column:58},end:{line:16,column:60}}],line:16},2:{loc:{start:{line:25,column:8},end:{line:25,column:79}},type:"binary-expr",locations:[{start:{line:25,column:8},end:{line:25,column:16}},{start:{line:25,column:36},end:{line:25,column:79}}],line:25},3:{loc:{start:{line:26,column:8},end:{line:34,column:9}},type:"binary-expr",locations:[{start:{line:26,column:8},end:{line:26,column:17}},{start:{line:26,column:37},end:{line:34,column:9}}],line:26}},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0,1:0},b:{0:[0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldType.tsx"],names:[],mappings:"AA0BI,SAKI,KALJ;AAzBJ,SAAQ,UAAS;AACjB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,SAA+B,uBAAuB;AACtD,SAAS,iBAAiB;AAU1B,MAAM,oBAAsD,CAAC;AAAA,EAC3D;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA,WAAW;AACb,MAAM;AACJ,QAAM,cAAkC,OAAO,KAAK,GAAG,MAAM,KAAK,UAAU,CAAC,CAAC,EAAE,IAAI,OAAK,CAAC,GAAG,UAAU,EAAE,QAAQ,MAAM,GAAG,CAAC,CAAC,CAAC;AAC7H,SACE;AAAA,IAAC;AAAA;AAAA,MAAM,OAAO,EAAE,MAAM;AAAA,MAAG,WAAW,GAAG,MAAM;AAAA,MAC3C,eAAa;AAAA,MACb;AAAA,MAEC;AAAA,oBACC,oBAAC,eAAY,OAAc,UAAU,MAAM;AAAA,QAE5C,CAAC,YACA;AAAA,UAAC;AAAA;AAAA,YACC,SAAS;AAAA,YACT;AAAA,YACA;AAAA,YACA,eAAa,QAAQ;AAAA;AAAA,QACvB;AAAA;AAAA;AAAA,EAEJ;AAEJ;AAEA,MAAM,YAAY,gBAAgB,EAAE,iBAAiB;AACrD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"599a12b14a1057b6bb554b629d0d81238d4af16c"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return XA=function(){return s},s}XA();XA().s[0]++;const g8e=({t:n,value:e,wdKey:t,onChange:i,error:r,disabled:o=(XA().b[0][0]++,!1)})=>{XA().f[0]++;const s=(XA().s[1]++,Object.keys((XA().b[1][0]++,Zf.layer.type.values||(XA().b[1][1]++,{}))).map(a=>(XA().f[1]++,XA().s[2]++,[a,Y4.startCase(a.replace(/-/g," "))])));return XA().s[3]++,te.jsxs(Ms,{label:n("Type"),fieldSpec:Zf.layer.type,"data-wd-key":t,error:r,children:[(XA().b[2][0]++,o&&(XA().b[2][1]++,te.jsx(Mm,{value:e,disabled:!0}))),(XA().b[3][0]++,!o&&(XA().b[3][1]++,te.jsx(hC,{options:s,onChange:i,value:e,"data-wd-key":t+".select"})))]})},ere=(XA().s[4]++,Po()(g8e));function k4(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldId.tsx",e="faa51332e301a2db02ecf3d9679788ae744c6d26",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldId.tsx",statementMap:{0:{start:{line:5,column:16},end:{line:23,column:1}},1:{start:{line:6,column:2},end:{line:22,column:4}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:16},end:{line:5,column:17}},loc:{start:{line:5,column:27},end:{line:23,column:1}},line:5}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldId.tsx"],names:[],mappings:"AAkBM;AAjBN,OAAO,YAAY;AACnB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AASxB,MAAM,UAAkC,CAAC,UAAU;AACjD,SACE;AAAA,IAAC;AAAA;AAAA,MAAM,OAAM;AAAA,MAAK,WAAW,OAAO,MAAM;AAAA,MACxC,eAAa,MAAM;AAAA,MACnB,OAAO,MAAM;AAAA,MAEb;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,MAAM;AAAA,UACb,SAAS,MAAM;AAAA,UACf,eAAa,MAAM,QAAQ;AAAA;AAAA,MAC7B;AAAA;AAAA,EACF;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"faa51332e301a2db02ecf3d9679788ae744c6d26"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return k4=function(){return s},s}k4();k4().s[0]++;const tre=n=>(k4().f[0]++,k4().s[1]++,te.jsx(Ms,{label:"ID",fieldSpec:qr.layer.id,"data-wd-key":n.wdKey,error:n.error,children:te.jsx(Mm,{value:n.value,onInput:n.onChange,"data-wd-key":n.wdKey+".input"})}));function G5(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}function Rl(){return Rl=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Rl.apply(null,arguments)}var y8e=M1();const dr=Ou(y8e);var S8={exports:{}},zs={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bW;function v8e(){if(bW)return zs;bW=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),s=Symbol.for("react.context"),a=Symbol.for("react.server_context"),c=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),m=Symbol.for("react.suspense_list"),v=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),E=Symbol.for("react.offscreen"),D;D=Symbol.for("react.module.reference");function P(F){if(typeof F=="object"&&F!==null){var W=F.$$typeof;switch(W){case n:switch(F=F.type,F){case t:case r:case i:case h:case m:return F;default:switch(F=F&&F.$$typeof,F){case a:case s:case c:case x:case v:case o:return F;default:return W}}case e:return W}}}return zs.ContextConsumer=s,zs.ContextProvider=o,zs.Element=n,zs.ForwardRef=c,zs.Fragment=t,zs.Lazy=x,zs.Memo=v,zs.Portal=e,zs.Profiler=r,zs.StrictMode=i,zs.Suspense=h,zs.SuspenseList=m,zs.isAsyncMode=function(){return!1},zs.isConcurrentMode=function(){return!1},zs.isContextConsumer=function(F){return P(F)===s},zs.isContextProvider=function(F){return P(F)===o},zs.isElement=function(F){return typeof F=="object"&&F!==null&&F.$$typeof===n},zs.isForwardRef=function(F){return P(F)===c},zs.isFragment=function(F){return P(F)===t},zs.isLazy=function(F){return P(F)===x},zs.isMemo=function(F){return P(F)===v},zs.isPortal=function(F){return P(F)===e},zs.isProfiler=function(F){return P(F)===r},zs.isStrictMode=function(F){return P(F)===i},zs.isSuspense=function(F){return P(F)===h},zs.isSuspenseList=function(F){return P(F)===m},zs.isValidElementType=function(F){return typeof F=="string"||typeof F=="function"||F===t||F===r||F===i||F===h||F===m||F===E||typeof F=="object"&&F!==null&&(F.$$typeof===x||F.$$typeof===v||F.$$typeof===o||F.$$typeof===s||F.$$typeof===c||F.$$typeof===D||F.getModuleId!==void 0)},zs.typeOf=P,zs}var CW;function b8e(){return CW||(CW=1,S8.exports=v8e()),S8.exports}b8e();const _W=n=>typeof n=="object"&&n!=null&&n.nodeType===1,xW=(n,e)=>(!e||n!=="hidden")&&n!=="visible"&&n!=="clip",W5=(n,e)=>{if(n.clientHeight<n.scrollHeight||n.clientWidth<n.scrollWidth){const t=getComputedStyle(n,null);return xW(t.overflowY,e)||xW(t.overflowX,e)||(i=>{const r=(o=>{if(!o.ownerDocument||!o.ownerDocument.defaultView)return null;try{return o.ownerDocument.defaultView.frameElement}catch{return null}})(i);return!!r&&(r.clientHeight<i.scrollHeight||r.clientWidth<i.scrollWidth)})(n)}return!1},Q5=(n,e,t,i,r,o,s,a)=>o<n&&s>e||o>n&&s<e?0:o<=n&&a<=t||s>=e&&a>=t?o-n-i:s>e&&a<t||o<n&&a>t?s-e+r:0,C8e=n=>{const e=n.parentElement;return e??(n.getRootNode().host||null)},_8e=(n,e)=>{var t,i,r,o;if(typeof document>"u")return[];const{inline:s,boundary:a,skipOverflowHiddenElements:c}=e,h=typeof a=="function"?a:Me=>Me!==a;if(!_W(n))throw new TypeError("Invalid target");const m=document.scrollingElement||document.documentElement,v=[];let x=n;for(;_W(x)&&h(x);){if(x=C8e(x),x===m){v.push(x);break}x!=null&&x===document.body&&W5(x)&&!W5(document.documentElement)||x!=null&&W5(x,c)&&v.push(x)}const E=(i=(t=window.visualViewport)==null?void 0:t.width)!=null?i:innerWidth,D=(o=(r=window.visualViewport)==null?void 0:r.height)!=null?o:innerHeight,{scrollX:P,scrollY:F}=window,{height:W,width:q,top:V,right:H,bottom:X,left:Z}=n.getBoundingClientRect(),{top:G,right:oe,left:ue}=(Me=>{const Te=window.getComputedStyle(Me);return{top:parseFloat(Te.scrollMarginTop)||0,right:parseFloat(Te.scrollMarginRight)||0,bottom:parseFloat(Te.scrollMarginBottom)||0,left:parseFloat(Te.scrollMarginLeft)||0}})(n);let xe=V-G,me=s==="center"?Z+q/2-ue+oe:s==="end"?H+oe:Z-ue;const Ie=[];for(let Me=0;Me<v.length;Me++){const Te=v[Me],{height:je,width:Ee,top:qe,right:At,bottom:gt,left:Le}=Te.getBoundingClientRect();if(V>=0&&Z>=0&&X<=D&&H<=E&&(Te===m&&!W5(Te)||V>=qe&&X<=gt&&Z>=Le&&H<=At))return Ie;const Re=getComputedStyle(Te),Ge=parseInt(Re.borderLeftWidth,10),De=parseInt(Re.borderTopWidth,10),_t=parseInt(Re.borderRightWidth,10),at=parseInt(Re.borderBottomWidth,10);let Tt=0,Kt=0;const Ke="offsetWidth"in Te?Te.offsetWidth-Te.clientWidth-Ge-_t:0,Oe="offsetHeight"in Te?Te.offsetHeight-Te.clientHeight-De-at:0,Be="offsetWidth"in Te?Te.offsetWidth===0?0:Ee/Te.offsetWidth:0,Ve="offsetHeight"in Te?Te.offsetHeight===0?0:je/Te.offsetHeight:0;if(m===Te)Tt=Q5(F,F+D,D,De,at,F+xe,F+xe+W,W),Kt=s==="start"?me:s==="center"?me-E/2:s==="end"?me-E:Q5(P,P+E,E,Ge,_t,P+me,P+me+q,q),Tt=Math.max(0,Tt+F),Kt=Math.max(0,Kt+P);else{Tt=Q5(qe,gt,je,De,at+Oe,xe,xe+W,W),Kt=s==="start"?me-Le-Ge:s==="center"?me-(Le+Ee/2)+Ke/2:s==="end"?me-At+_t+Ke:Q5(Le,At,Ee,Ge,_t+Ke,me,me+q,q);const{scrollLeft:yt,scrollTop:ft}=Te;Tt=Ve===0?0:Math.max(0,Math.min(ft+Tt/Ve,Te.scrollHeight-je/Ve+Oe)),Kt=Be===0?0:Math.max(0,Math.min(yt+Kt/Be,Te.scrollWidth-Ee/Be+Ke)),xe+=ft-Tt,me+=yt-Kt}Ie.push({el:Te,top:Tt,left:Kt})}return Ie};var Ix=function(){return Ix=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++){t=arguments[i];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Ix.apply(this,arguments)};var x8e=0;function nre(){}function M8e(n,e){if(n){var t=_8e(n,{boundary:e});t.forEach(function(i){var r=i.el,o=i.top,s=i.left;r.scrollTop=o,r.scrollLeft=s})}}function MW(n,e,t){var i=n===e||e instanceof t.Node&&n.contains&&n.contains(e);return i}function ire(n,e){var t;function i(){t&&clearTimeout(t)}function r(){for(var o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];i(),t=setTimeout(function(){t=null,n.apply(void 0,s)},e)}return r.cancel=i,r}function Z0(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return function(i){for(var r=arguments.length,o=new Array(r>1?r-1:0),s=1;s<r;s++)o[s-1]=arguments[s];return e.some(function(a){return a&&a.apply(void 0,[i].concat(o)),i.preventDownshiftDefault||i.hasOwnProperty("nativeEvent")&&i.nativeEvent.preventDownshiftDefault})}}function Y5(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return function(i){e.forEach(function(r){typeof r=="function"?r(i):r&&(r.current=i)})}}function w8e(){return String(x8e++)}function jR(n,e){return!n||!e?n:Object.keys(n).reduce(function(t,i){return t[i]=rre(e,i)?e[i]:n[i],t},{})}function rre(n,e){return n[e]!==void 0}function S8e(n){var e=n.key,t=n.keyCode;return t>=37&&t<=40&&e.indexOf("Arrow")!==0?"Arrow"+e:e}function q5(n,e,t,i,r){var o=t.length;if(o===0)return-1;var s=o-1;(typeof n!="number"||n<0||n>s)&&(n=e>0?-1:s+1);var a=n+e;a<0?a=s:a>s&&(a=0);var c=nE(a,e<0,t,i,r);return c===-1?n>=o?-1:n:c}function nE(n,e,t,i,r){r===void 0&&(r=!1);var o=t.length;if(e){for(var s=n;s>=0;s--)if(!i(t[s],s))return s}else for(var a=n;a<o;a++)if(!i(t[a],a))return a;return r?nE(e?o-1:0,e,t,i):-1}function wW(n,e,t,i){return i===void 0&&(i=!0),t&&e.some(function(r){return r&&(MW(r,n,t)||i&&MW(r,t.document.activeElement,t))})}var E8e=ire(function(n){ore(n).textContent=""},500);function ore(n){var e=n.getElementById("a11y-status-message");return e||(e=n.createElement("div"),e.setAttribute("id","a11y-status-message"),e.setAttribute("role","status"),e.setAttribute("aria-live","polite"),e.setAttribute("aria-relevant","additions text"),Object.assign(e.style,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px"}),n.body.appendChild(e),e)}function B8e(n,e){if(!(!n||!e)){var t=ore(e);t.textContent=n,E8e(e)}}function O8e(n){var e=n?.getElementById("a11y-status-message");e&&e.remove()}var sre={highlightedIndex:-1,isOpen:!1,selectedItem:null,inputValue:""};function I8e(n,e,t){var i=n.props,r=n.type,o={};Object.keys(e).forEach(function(s){k8e(s,n,e,t),t[s]!==e[s]&&(o[s]=t[s])}),i.onStateChange&&Object.keys(o).length&&i.onStateChange(Rl({type:r},o))}function k8e(n,e,t,i){var r=e.props,o=e.type,s="on"+ZU(n)+"Change";r[s]&&i[n]!==void 0&&i[n]!==t[n]&&r[s](Rl({type:o},i))}function T8e(n,e){return e.changes}var SW=ire(function(n,e){B8e(n,e)},200),R8e=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?Mt.useLayoutEffect:Mt.useEffect,D8e="useId"in On?function(e){var t=e.id,i=e.labelId,r=e.menuId,o=e.getItemId,s=e.toggleButtonId,a=e.inputId,c="downshift-"+On.useId();t||(t=c);var h=Mt.useRef({labelId:i||t+"-label",menuId:r||t+"-menu",getItemId:o||function(m){return t+"-item-"+m},toggleButtonId:s||t+"-toggle-button",inputId:a||t+"-input"});return h.current}:function(e){var t=e.id,i=t===void 0?"downshift-"+w8e():t,r=e.labelId,o=e.menuId,s=e.getItemId,a=e.toggleButtonId,c=e.inputId,h=Mt.useRef({labelId:r||i+"-label",menuId:o||i+"-menu",getItemId:s||function(m){return i+"-item-"+m},toggleButtonId:a||i+"-toggle-button",inputId:c||i+"-input"});return h.current};function P8e(n,e,t,i){var r,o;if(n===void 0){if(e===void 0)throw new Error(i);r=t[e],o=e}else o=e===void 0?t.indexOf(n):e,r=n;return[r,o]}function ZU(n){return""+n.slice(0,1).toUpperCase()+n.slice(1)}function are(n){var e=Mt.useRef(n);return e.current=n,e}function U8e(n,e,t,i){var r=Mt.useRef(),o=Mt.useRef(),s=Mt.useCallback(function(E,D){o.current=D,E=jR(E,D.props);var P=n(E,D),F=D.props.stateReducer(E,Rl({},D,{changes:P}));return F},[n]),a=Mt.useReducer(s,e,t),c=a[0],h=a[1],m=are(e),v=Mt.useCallback(function(E){return h(Rl({props:m.current},E))},[m]),x=o.current;return Mt.useEffect(function(){var E=jR(r.current,x?.props),D=x&&r.current&&!i(E,c);D&&I8e(x,E,c),r.current=c},[c,x,i]),[c,v]}var O3={itemToString:function(e){return e?String(e):""},itemToKey:function(e){return e},stateReducer:T8e,scrollIntoView:M8e,environment:typeof window>"u"?void 0:window};function ev(n,e,t){t===void 0&&(t=sre);var i=n["default"+ZU(e)];return i!==void 0?i:t[e]}function I3(n,e,t){t===void 0&&(t=sre);var i=n[e];if(i!==void 0)return i;var r=n["initial"+ZU(e)];return r!==void 0?r:ev(n,e,t)}function K8e(n){var e=I3(n,"selectedItem"),t=I3(n,"isOpen"),i=G8e(n),r=I3(n,"inputValue");return{highlightedIndex:i<0&&e&&t?n.items.findIndex(function(o){return n.itemToKey(o)===n.itemToKey(e)}):i,isOpen:t,selectedItem:e,inputValue:r}}function k3(n,e,t){var i=n.items,r=n.initialHighlightedIndex,o=n.defaultHighlightedIndex,s=n.isItemDisabled,a=n.itemToKey,c=e.selectedItem,h=e.highlightedIndex;return i.length===0?-1:r!==void 0&&h===r&&!s(i[r],r)?r:o!==void 0&&!s(i[o],o)?o:c?i.findIndex(function(m){return a(c)===a(m)}):t<0&&!s(i[i.length-1],i.length-1)?i.length-1:t>0&&!s(i[0],0)?0:-1}function L8e(n,e,t){var i=Mt.useRef({isMouseDown:!1,isTouchMove:!1,isTouchEnd:!1});return Mt.useEffect(function(){if(!n)return nre;var r=t.map(function(m){return m.current});function o(){i.current.isTouchEnd=!1,i.current.isMouseDown=!0}function s(m){i.current.isMouseDown=!1,wW(m.target,r,n)||e()}function a(){i.current.isTouchEnd=!1,i.current.isTouchMove=!1}function c(){i.current.isTouchMove=!0}function h(m){i.current.isTouchEnd=!0,!i.current.isTouchMove&&!wW(m.target,r,n,!1)&&e()}return n.addEventListener("mousedown",o),n.addEventListener("mouseup",s),n.addEventListener("touchstart",a),n.addEventListener("touchmove",c),n.addEventListener("touchend",h),function(){n.removeEventListener("mousedown",o),n.removeEventListener("mouseup",s),n.removeEventListener("touchstart",a),n.removeEventListener("touchmove",c),n.removeEventListener("touchend",h)}},[t,n,e]),i.current}var F8e=function(){return nre};function z8e(n,e,t,i){i===void 0&&(i={});var r=i.document,o=XU();Mt.useEffect(function(){if(!(!n||o||!r)){var s=n(e);SW(s,r)}},t),Mt.useEffect(function(){return function(){SW.cancel(),O8e(r)}},[r])}function j8e(n){var e=n.highlightedIndex,t=n.isOpen,i=n.itemRefs,r=n.getItemNodeFromIndex,o=n.menuElement,s=n.scrollIntoView,a=Mt.useRef(!0);return R8e(function(){e<0||!t||!Object.keys(i.current).length||(a.current===!1?a.current=!0:s(r(e),o))},[e]),a}function EW(n,e,t){var i;t===void 0&&(t=!0);var r=((i=n.items)==null?void 0:i.length)&&e>=0;return Rl({isOpen:!1,highlightedIndex:-1},r&&Rl({selectedItem:n.items[e],isOpen:ev(n,"isOpen"),highlightedIndex:ev(n,"highlightedIndex")},t&&{inputValue:n.itemToString(n.items[e])}))}function N8e(n,e){return n.isOpen===e.isOpen&&n.inputValue===e.inputValue&&n.highlightedIndex===e.highlightedIndex&&n.selectedItem===e.selectedItem}function XU(){var n=On.useRef(!0);return On.useEffect(function(){return n.current=!1,function(){n.current=!0}},[]),n.current}function NR(n){var e=ev(n,"highlightedIndex");return e>-1&&n.isItemDisabled(n.items[e],e)?-1:e}function G8e(n){var e=I3(n,"highlightedIndex");return e>-1&&n.isItemDisabled(n.items[e],e)?-1:e}var Ow={environment:dr.shape({addEventListener:dr.func.isRequired,removeEventListener:dr.func.isRequired,document:dr.shape({createElement:dr.func.isRequired,getElementById:dr.func.isRequired,activeElement:dr.any.isRequired,body:dr.any.isRequired}).isRequired,Node:dr.func.isRequired}),itemToString:dr.func,itemToKey:dr.func,stateReducer:dr.func},lre=Rl({},Ow,{getA11yStatusMessage:dr.func,highlightedIndex:dr.number,defaultHighlightedIndex:dr.number,initialHighlightedIndex:dr.number,isOpen:dr.bool,defaultIsOpen:dr.bool,initialIsOpen:dr.bool,selectedItem:dr.any,initialSelectedItem:dr.any,defaultSelectedItem:dr.any,id:dr.string,labelId:dr.string,menuId:dr.string,getItemId:dr.func,toggleButtonId:dr.string,onSelectedItemChange:dr.func,onHighlightedIndexChange:dr.func,onStateChange:dr.func,onIsOpenChange:dr.func,scrollIntoView:dr.func});function W8e(n,e,t){var i=e.type,r=e.props,o;switch(i){case t.ItemMouseMove:o={highlightedIndex:e.disabled?-1:e.index};break;case t.MenuMouseLeave:o={highlightedIndex:-1};break;case t.ToggleButtonClick:case t.FunctionToggleMenu:o={isOpen:!n.isOpen,highlightedIndex:n.isOpen?-1:k3(r,n,0)};break;case t.FunctionOpenMenu:o={isOpen:!0,highlightedIndex:k3(r,n,0)};break;case t.FunctionCloseMenu:o={isOpen:!1};break;case t.FunctionSetHighlightedIndex:o={highlightedIndex:r.isItemDisabled(r.items[e.highlightedIndex],e.highlightedIndex)?-1:e.highlightedIndex};break;case t.FunctionSetInputValue:o={inputValue:e.inputValue};break;case t.FunctionReset:o={highlightedIndex:NR(r),isOpen:ev(r,"isOpen"),selectedItem:ev(r,"selectedItem"),inputValue:ev(r,"inputValue")};break;default:throw new Error("Reducer called without proper action type.")}return Rl({},n,o)}Ix(Ix({},lre),{items:dr.array.isRequired,isItemDisabled:dr.func});Ix(Ix({},O3),{isItemDisabled:function(){return!1}});var JU=0,eK=1,tK=2,nK=3,iK=4,rK=5,oK=6,sK=7,aK=8,iE=9,lK=10,ure=11,cre=12,uK=13,Are=14,hre=15,dre=16,fre=17,pre=18,cK=19,mre=20,gre=21,AK=22,yre=Object.freeze({__proto__:null,ControlledPropUpdatedSelectedItem:AK,FunctionCloseMenu:fre,FunctionOpenMenu:dre,FunctionReset:gre,FunctionSelectItem:cK,FunctionSetHighlightedIndex:pre,FunctionSetInputValue:mre,FunctionToggleMenu:hre,InputBlur:iE,InputChange:aK,InputClick:lK,InputKeyDownArrowDown:JU,InputKeyDownArrowUp:eK,InputKeyDownEnd:iK,InputKeyDownEnter:sK,InputKeyDownEscape:tK,InputKeyDownHome:nK,InputKeyDownPageDown:oK,InputKeyDownPageUp:rK,ItemClick:uK,ItemMouseMove:cre,MenuMouseLeave:ure,ToggleButtonClick:Are});function Q8e(n){var e=K8e(n),t=e.selectedItem,i=e.inputValue;return i===""&&t&&n.defaultInputValue===void 0&&n.initialInputValue===void 0&&n.inputValue===void 0&&(i=n.itemToString(t)),Rl({},e,{inputValue:i})}Rl({},lre,{items:dr.array.isRequired,isItemDisabled:dr.func,inputValue:dr.string,defaultInputValue:dr.string,initialInputValue:dr.string,inputId:dr.string,onInputValueChange:dr.func});function Y8e(n,e,t,i){var r=Mt.useRef(),o=U8e(n,e,t,i),s=o[0],a=o[1],c=XU();return Mt.useEffect(function(){if(rre(e,"selectedItem")){if(!c){var h=e.itemToKey(e.selectedItem)!==e.itemToKey(r.current);h&&a({type:AK,inputValue:e.itemToString(e.selectedItem)})}r.current=s.selectedItem===r.current?e.selectedItem:s.selectedItem}},[s.selectedItem,e.selectedItem]),[jR(s,e),a]}var q8e=Rl({},O3,{isItemDisabled:function(){return!1}});function V8e(n,e){var t,i=e.type,r=e.props,o=e.altKey,s;switch(i){case uK:s={isOpen:ev(r,"isOpen"),highlightedIndex:NR(r),selectedItem:r.items[e.index],inputValue:r.itemToString(r.items[e.index])};break;case JU:n.isOpen?s={highlightedIndex:q5(n.highlightedIndex,1,r.items,r.isItemDisabled,!0)}:s={highlightedIndex:o&&n.selectedItem==null?-1:k3(r,n,1),isOpen:r.items.length>=0};break;case eK:n.isOpen?o?s=EW(r,n.highlightedIndex):s={highlightedIndex:q5(n.highlightedIndex,-1,r.items,r.isItemDisabled,!0)}:s={highlightedIndex:k3(r,n,-1),isOpen:r.items.length>=0};break;case sK:s=EW(r,n.highlightedIndex);break;case tK:s=Rl({isOpen:!1,highlightedIndex:-1},!n.isOpen&&{selectedItem:null,inputValue:""});break;case rK:s={highlightedIndex:q5(n.highlightedIndex,-10,r.items,r.isItemDisabled,!0)};break;case oK:s={highlightedIndex:q5(n.highlightedIndex,10,r.items,r.isItemDisabled,!0)};break;case nK:s={highlightedIndex:nE(0,!1,r.items,r.isItemDisabled)};break;case iK:s={highlightedIndex:nE(r.items.length-1,!0,r.items,r.isItemDisabled)};break;case iE:s=Rl({isOpen:!1,highlightedIndex:-1},n.highlightedIndex>=0&&((t=r.items)==null?void 0:t.length)&&e.selectItem&&{selectedItem:r.items[n.highlightedIndex],inputValue:r.itemToString(r.items[n.highlightedIndex])});break;case aK:s={isOpen:!0,highlightedIndex:NR(r),inputValue:e.inputValue};break;case lK:s={isOpen:!n.isOpen,highlightedIndex:n.isOpen?-1:k3(r,n,0)};break;case cK:s={selectedItem:e.selectedItem,inputValue:r.itemToString(e.selectedItem)};break;case AK:s={inputValue:e.inputValue};break;default:return W8e(n,e,yre)}return Rl({},n,s)}var $8e=["onMouseLeave","refKey","ref"],H8e=["item","index","refKey","ref","onMouseMove","onMouseDown","onClick","onPress","disabled"],Z8e=["onClick","onPress","refKey","ref"],X8e=["onKeyDown","onChange","onInput","onBlur","onChangeText","onClick","refKey","ref"];GR.stateChangeTypes=yre;function GR(n){n===void 0&&(n={});var e=Rl({},q8e,n),t=e.items,i=e.scrollIntoView,r=e.environment,o=e.getA11yStatusMessage,s=Y8e(V8e,e,Q8e,N8e),a=s[0],c=s[1],h=a.isOpen,m=a.highlightedIndex,v=a.selectedItem,x=a.inputValue,E=Mt.useRef(null),D=Mt.useRef({}),P=Mt.useRef(null),F=Mt.useRef(null),W=XU(),q=D8e(e),V=Mt.useRef(),H=are({state:a,props:e}),X=Mt.useCallback(function(Ge){return D.current[q.getItemId(Ge)]},[q]);z8e(o,a,[h,m,v,x],r);var Z=j8e({menuElement:E.current,highlightedIndex:m,isOpen:h,itemRefs:D,scrollIntoView:i,getItemNodeFromIndex:X});Mt.useEffect(function(){var Ge=I3(e,"isOpen");Ge&&P.current&&P.current.focus()},[]),Mt.useEffect(function(){W||(V.current=t.length)});var G=L8e(r,Mt.useCallback(function(){H.current.state.isOpen&&c({type:iE,selectItem:!1})},[c,H]),Mt.useMemo(function(){return[E,F,P]},[E.current,F.current,P.current])),oe=F8e();Mt.useEffect(function(){h||(D.current={})},[h]),Mt.useEffect(function(){var Ge;!h||!(r!=null&&r.document)||!(P!=null&&(Ge=P.current)!=null&&Ge.focus)||r.document.activeElement!==P.current&&P.current.focus()},[h,r]);var ue=Mt.useMemo(function(){return{ArrowDown:function(De){De.preventDefault(),c({type:JU,altKey:De.altKey})},ArrowUp:function(De){De.preventDefault(),c({type:eK,altKey:De.altKey})},Home:function(De){H.current.state.isOpen&&(De.preventDefault(),c({type:nK}))},End:function(De){H.current.state.isOpen&&(De.preventDefault(),c({type:iK}))},Escape:function(De){var _t=H.current.state;(_t.isOpen||_t.inputValue||_t.selectedItem||_t.highlightedIndex>-1)&&(De.preventDefault(),c({type:tK}))},Enter:function(De){var _t=H.current.state;!_t.isOpen||De.which===229||(De.preventDefault(),c({type:sK}))},PageUp:function(De){H.current.state.isOpen&&(De.preventDefault(),c({type:rK}))},PageDown:function(De){H.current.state.isOpen&&(De.preventDefault(),c({type:oK}))}}},[c,H]),xe=Mt.useCallback(function(Ge){return Rl({id:q.labelId,htmlFor:q.inputId},Ge)},[q]),me=Mt.useCallback(function(Ge,De){var _t,at=Ge===void 0?{}:Ge,Tt=at.onMouseLeave,Kt=at.refKey,Ke=Kt===void 0?"ref":Kt,Oe=at.ref,Be=G5(at,$8e),Ve=De===void 0?{}:De;return Ve.suppressRefError,Rl((_t={},_t[Ke]=Y5(Oe,function(yt){E.current=yt}),_t.id=q.menuId,_t.role="listbox",_t["aria-labelledby"]=Be&&Be["aria-label"]?void 0:""+q.labelId,_t.onMouseLeave=Z0(Tt,function(){c({type:ure})}),_t),Be)},[c,oe,q]),Ie=Mt.useCallback(function(Ge){var De,_t,at=Ge===void 0?{}:Ge,Tt=at.item,Kt=at.index,Ke=at.refKey,Oe=Ke===void 0?"ref":Ke,Be=at.ref,Ve=at.onMouseMove,yt=at.onMouseDown,ft=at.onClick;at.onPress;var Ct=at.disabled,Lt=G5(at,H8e);Ct!==void 0&&console.warn('Passing "disabled" as an argument to getItemProps is not supported anymore. Please use the isItemDisabled prop from useCombobox.');var kt=H.current,an=kt.props,Hn=kt.state,Wn=P8e(Tt,Kt,an.items,"Pass either item or index to getItemProps!"),_i=Wn[0],Ln=Wn[1],Un=an.isItemDisabled(_i,Ln),xn="onClick",Zn=ft,Rn=function(){G.isTouchEnd||Ln===Hn.highlightedIndex||(Z.current=!1,c({type:cre,index:Ln,disabled:Un}))},Ot=function(){c({type:uK,index:Ln})},be=function(le){return le.preventDefault()};return Rl((De={},De[Oe]=Y5(Be,function(ie){ie&&(D.current[q.getItemId(Ln)]=ie)}),De["aria-disabled"]=Un,De["aria-selected"]=Ln===Hn.highlightedIndex,De.id=q.getItemId(Ln),De.role="option",De),!Un&&(_t={},_t[xn]=Z0(Zn,Ot),_t),{onMouseMove:Z0(Ve,Rn),onMouseDown:Z0(yt,be)},Lt)},[c,q,H,G,Z]),Me=Mt.useCallback(function(Ge){var De,_t=Ge===void 0?{}:Ge,at=_t.onClick;_t.onPress;var Tt=_t.refKey,Kt=Tt===void 0?"ref":Tt,Ke=_t.ref,Oe=G5(_t,Z8e),Be=H.current.state,Ve=function(){c({type:Are})};return Rl((De={},De[Kt]=Y5(Ke,function(yt){F.current=yt}),De["aria-controls"]=q.menuId,De["aria-expanded"]=Be.isOpen,De.id=q.toggleButtonId,De.tabIndex=-1,De),!Oe.disabled&&Rl({},{onClick:Z0(at,Ve)}),Oe)},[c,H,q]),Te=Mt.useCallback(function(Ge,De){var _t,at=Ge===void 0?{}:Ge,Tt=at.onKeyDown,Kt=at.onChange,Ke=at.onInput,Oe=at.onBlur;at.onChangeText;var Be=at.onClick,Ve=at.refKey,yt=Ve===void 0?"ref":Ve,ft=at.ref,Ct=G5(at,X8e),Lt=De===void 0?{}:De;Lt.suppressRefError;var kt=H.current.state,an=function(Rn){var Ot=S8e(Rn);Ot&&ue[Ot]&&ue[Ot](Rn)},Hn=function(Rn){c({type:aK,inputValue:Rn.target.value})},Wn=function(Rn){if(r!=null&&r.document&&kt.isOpen&&!G.isMouseDown){var Ot=Rn.relatedTarget===null&&r.document.activeElement!==r.document.body;c({type:iE,selectItem:!Ot})}},_i=function(){c({type:lK})},Ln="onChange",Un={};if(!Ct.disabled){var xn;Un=(xn={},xn[Ln]=Z0(Kt,Ke,Hn),xn.onKeyDown=Z0(Tt,an),xn.onBlur=Z0(Oe,Wn),xn.onClick=Z0(Be,_i),xn)}return Rl((_t={},_t[yt]=Y5(ft,function(Zn){P.current=Zn}),_t["aria-activedescendant"]=kt.isOpen&&kt.highlightedIndex>-1?q.getItemId(kt.highlightedIndex):"",_t["aria-autocomplete"]="list",_t["aria-controls"]=q.menuId,_t["aria-expanded"]=kt.isOpen,_t["aria-labelledby"]=Ct&&Ct["aria-label"]?void 0:q.labelId,_t.autoComplete="off",_t.id=q.inputId,_t.role="combobox",_t.value=kt.inputValue,_t),Un,Ct)},[c,q,r,ue,H,G,oe]),je=Mt.useCallback(function(){c({type:hre})},[c]),Ee=Mt.useCallback(function(){c({type:fre})},[c]),qe=Mt.useCallback(function(){c({type:dre})},[c]),At=Mt.useCallback(function(Ge){c({type:pre,highlightedIndex:Ge})},[c]),gt=Mt.useCallback(function(Ge){c({type:cK,selectedItem:Ge})},[c]),Le=Mt.useCallback(function(Ge){c({type:mre,inputValue:Ge})},[c]),Re=Mt.useCallback(function(){c({type:gre})},[c]);return{getItemProps:Ie,getLabelProps:xe,getMenuProps:me,getInputProps:Te,getToggleButtonProps:Me,toggleMenu:je,openMenu:qe,closeMenu:Ee,setHighlightedIndex:At,setInputValue:Le,selectItem:gt,reset:Re,highlightedIndex:m,isOpen:h,selectedItem:v,inputValue:x}}Ow.stateReducer,Ow.itemToKey,Ow.environment,dr.array,dr.array,dr.array,dr.func,dr.number,dr.number,dr.number,dr.func,dr.func,dr.string,dr.string;O3.itemToKey,O3.stateReducer,O3.environment;function ui(){var n="/home/runner/work/maputnik/maputnik/src/components/InputAutocomplete.tsx",e="73020a5a2032027cc342d42db613082f6da43a81",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputAutocomplete.tsx",statementMap:{0:{start:{line:5,column:19},end:{line:5,column:22}},1:{start:{line:13,column:28},end:{line:13,column:55}},2:{start:{line:14,column:18},end:{line:14,column:36}},3:{start:{line:15,column:36},end:{line:15,column:62}},4:{start:{line:16,column:24},end:{line:19,column:22}},5:{start:{line:17,column:15},end:{line:17,column:34}},6:{start:{line:18,column:4},end:{line:18,column:72}},7:{start:{line:18,column:36},end:{line:18,column:70}},8:{start:{line:20,column:24},end:{line:25,column:8}},9:{start:{line:21,column:4},end:{line:24,column:5}},10:{start:{line:22,column:20},end:{line:22,column:84}},11:{start:{line:23,column:6},end:{line:23,column:48}},12:{start:{line:33,column:6},end:{line:55,column:4}},13:{start:{line:36,column:28},end:{line:36,column:47}},14:{start:{line:38,column:6},end:{line:40,column:7}},15:{start:{line:39,column:8},end:{line:39,column:51}},16:{start:{line:41,column:6},end:{line:41,column:28}},17:{start:{line:44,column:16},end:{line:44,column:51}},18:{start:{line:45,column:6},end:{line:45,column:18}},19:{start:{line:46,column:6},end:{line:46,column:56}},20:{start:{line:49,column:6},end:{line:53,column:7}},21:{start:{line:50,column:8},end:{line:50,column:20}},22:{start:{line:51,column:8},end:{line:51,column:40}},23:{start:{line:52,column:8},end:{line:52,column:19}},24:{start:{line:56,column:2},end:{line:60,column:30}},25:{start:{line:57,column:4},end:{line:59,column:5}},26:{start:{line:58,column:6},end:{line:58,column:22}},27:{start:{line:61,column:2},end:{line:64,column:22}},28:{start:{line:62,column:4},end:{line:62,column:53}},29:{start:{line:63,column:4},end:{line:63,column:69}},30:{start:{line:63,column:17},end:{line:63,column:68}},31:{start:{line:65,column:2},end:{line:67,column:14}},32:{start:{line:66,column:4},end:{line:66,column:26}},33:{start:{line:68,column:2},end:{line:103,column:7}},34:{start:{line:76,column:25},end:{line:76,column:35}},35:{start:{line:87,column:79},end:{line:100,column:9}}},fnMap:{0:{name:"InputAutocomplete",decl:{start:{line:6,column:24},end:{line:6,column:41}},loc:{start:{line:12,column:3},end:{line:104,column:1}},line:12},1:{name:"(anonymous_1)",decl:{start:{line:9,column:13},end:{line:9,column:14}},loc:{start:{line:9,column:19},end:{line:10,column:3}},line:9},2:{name:"(anonymous_2)",decl:{start:{line:16,column:38},end:{line:16,column:39}},loc:{start:{line:16,column:44},end:{line:19,column:3}},line:16},3:{name:"(anonymous_3)",decl:{start:{line:18,column:26},end:{line:18,column:27}},loc:{start:{line:18,column:36},end:{line:18,column:70}},line:18},4:{name:"(anonymous_4)",decl:{start:{line:20,column:42},end:{line:20,column:43}},loc:{start:{line:20,column:48},end:{line:25,column:3}},line:20},5:{name:"(anonymous_5)",decl:{start:{line:36,column:18},end:{line:36,column:19}},loc:{start:{line:36,column:28},end:{line:36,column:47}},line:36},6:{name:"(anonymous_6)",decl:{start:{line:37,column:18},end:{line:37,column:19}},loc:{start:{line:37,column:38},end:{line:42,column:5}},line:37},7:{name:"(anonymous_7)",decl:{start:{line:43,column:26},end:{line:43,column:27}},loc:{start:{line:43,column:48},end:{line:47,column:5}},line:43},8:{name:"(anonymous_8)",decl:{start:{line:48,column:24},end:{line:48,column:25}},loc:{start:{line:48,column:47},end:{line:54,column:5}},line:48},9:{name:"(anonymous_9)",decl:{start:{line:56,column:18},end:{line:56,column:19}},loc:{start:{line:56,column:24},end:{line:60,column:3}},line:56},10:{name:"(anonymous_10)",decl:{start:{line:61,column:18},end:{line:61,column:19}},loc:{start:{line:61,column:24},end:{line:64,column:3}},line:61},11:{name:"(anonymous_11)",decl:{start:{line:63,column:11},end:{line:63,column:12}},loc:{start:{line:63,column:17},end:{line:63,column:68}},line:63},12:{name:"(anonymous_12)",decl:{start:{line:65,column:18},end:{line:65,column:19}},loc:{start:{line:65,column:24},end:{line:67,column:3}},line:65},13:{name:"(anonymous_13)",decl:{start:{line:76,column:19},end:{line:76,column:20}},loc:{start:{line:76,column:25},end:{line:76,column:35}},line:76},14:{name:"(anonymous_14)",decl:{start:{line:87,column:46},end:{line:87,column:47}},loc:{start:{line:87,column:79},end:{line:100,column:9}},line:87}},branchMap:{0:{loc:{start:{line:8,column:2},end:{line:8,column:14}},type:"default-arg",locations:[{start:{line:8,column:12},end:{line:8,column:14}}],line:8},1:{loc:{start:{line:9,column:2},end:{line:10,column:3}},type:"default-arg",locations:[{start:{line:9,column:13},end:{line:10,column:3}}],line:9},2:{loc:{start:{line:13,column:43},end:{line:13,column:54}},type:"binary-expr",locations:[{start:{line:13,column:43},end:{line:13,column:48}},{start:{line:13,column:52},end:{line:13,column:54}}],line:13},3:{loc:{start:{line:21,column:4},end:{line:24,column:5}},type:"if",locations:[{start:{line:21,column:4},end:{line:24,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:21},4:{loc:{start:{line:36,column:28},end:{line:36,column:47}},type:"cond-expr",locations:[{start:{line:36,column:35},end:{line:36,column:42}},{start:{line:36,column:45},end:{line:36,column:47}}],line:36},5:{loc:{start:{line:38,column:6},end:{line:40,column:7}},type:"if",locations:[{start:{line:38,column:6},end:{line:40,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:38},6:{loc:{start:{line:44,column:16},end:{line:44,column:51}},type:"cond-expr",locations:[{start:{line:44,column:31},end:{line:44,column:46}},{start:{line:44,column:49},end:{line:44,column:51}}],line:44},7:{loc:{start:{line:46,column:15},end:{line:46,column:54}},type:"cond-expr",locations:[{start:{line:46,column:30},end:{line:46,column:45}},{start:{line:46,column:48},end:{line:46,column:54}}],line:46},8:{loc:{start:{line:49,column:6},end:{line:53,column:7}},type:"if",locations:[{start:{line:49,column:6},end:{line:53,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:49},9:{loc:{start:{line:51,column:17},end:{line:51,column:38}},type:"cond-expr",locations:[{start:{line:51,column:28},end:{line:51,column:34}},{start:{line:51,column:37},end:{line:51,column:38}}],line:51},10:{loc:{start:{line:57,column:4},end:{line:59,column:5}},type:"if",locations:[{start:{line:57,column:4},end:{line:59,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:57},11:{loc:{start:{line:66,column:13},end:{line:66,column:24}},type:"binary-expr",locations:[{start:{line:66,column:13},end:{line:66,column:18}},{start:{line:66,column:22},end:{line:66,column:24}}],line:66},12:{loc:{start:{line:87,column:18},end:{line:100,column:10}},type:"binary-expr",locations:[{start:{line:87,column:18},end:{line:87,column:24}},{start:{line:87,column:28},end:{line:100,column:10}}],line:87}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0},b:{0:[0],1:[0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputAutocomplete.tsx"],names:[],mappings:"AAkFI,SACE,KADF;AAlFJ,OAAO,WAAW;AAClB,OAAO,gBAAgB;AACvB,SAAQ,mBAAkB;AAE1B,MAAM,aAAa;AASnB,wBAAwB,kBAAkB;AAAA,EACxC;AAAA,EACA,UAAU,CAAC;AAAA,EACX,WAAW,MAAM;AAAA,EAAC;AAAA,EAClB,cAAc;AAChB,GAA2B;AACzB,QAAM,CAAC,OAAO,QAAQ,IAAI,MAAM,SAAS,SAAS,EAAE;AACpD,QAAM,UAAU,MAAM,OAAuB,IAAI;AACjD,QAAM,CAAC,WAAW,YAAY,IAAI,MAAM,SAAS,UAAU;AAE3D,QAAM,gBAAgB,MAAM,QAAQ,MAAM;AACxC,UAAM,KAAK,MAAM,YAAY;AAC7B,WAAO,QAAQ,OAAO,CAAC,SAAS,KAAK,CAAC,EAAE,YAAY,EAAE,SAAS,EAAE,CAAC;AAAA,EACpE,GAAG,CAAC,SAAS,KAAK,CAAC;AAEnB,QAAM,gBAAgB,MAAM,YAAY,MAAM;AAC5C,QAAI,QAAQ,SAAS;AACnB,YAAM,QAAQ,OAAO,cAAc,QAAQ,QAAQ,sBAAsB,EAAE;AAC3E,mBAAa,KAAK,IAAI,OAAO,UAAU,CAAC;AAAA,IAC1C;AAAA,EACF,GAAG,CAAC,CAAC;AAEL,QAAM;AAAA,IACJ;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACF,IAAI,YAAY;AAAA,IACd,OAAO;AAAA,IACP,YAAY;AAAA,IACZ,cAAc,CAAC,SAAU,OAAO,KAAK,CAAC,IAAI;AAAA,IAC1C,cAAc,CAAC,QAAQ,WAAW;AAChC,UAAI,OAAO,SAAS,YAAY,iBAAiB,YAAY;AAC3D,eAAO,EAAC,GAAG,OAAO,SAAS,QAAQ,KAAI;AAAA,MACzC;AACA,aAAO,OAAO;AAAA,IAChB;AAAA,IACA,sBAAsB,CAAC,EAAC,aAAY,MAAM;AACxC,YAAM,IAAI,eAAe,aAAa,CAAC,IAAI;AAC3C,eAAS,CAAC;AACV,eAAS,eAAe,aAAa,CAAC,IAAI,MAAS;AAAA,IACrD;AAAA,IACA,oBAAoB,CAAC,EAAC,YAAY,EAAC,MAAM;AACvC,UAAI,OAAO,MAAM,UAAU;AACzB,iBAAS,CAAC;AACV,iBAAS,MAAM,KAAK,SAAY,CAAC;AACjC,iBAAS;AAAA,MACX;AAAA,IACF;AAAA,EACF,CAAC;AAED,QAAM,UAAU,MAAM;AACpB,QAAI,QAAQ;AACV,oBAAc;AAAA,IAChB;AAAA,EACF,GAAG,CAAC,QAAQ,aAAa,CAAC;AAE1B,QAAM,UAAU,MAAM;AACpB,WAAO,iBAAiB,UAAU,aAAa;AAC/C,WAAO,MAAM,OAAO,oBAAoB,UAAU,aAAa;AAAA,EACjE,GAAG,CAAC,aAAa,CAAC;AAElB,QAAM,UAAU,MAAM;AACpB,aAAS,SAAS,EAAE;AAAA,EACtB,GAAG,CAAC,KAAK,CAAC;AAEV,SACE,qBAAC,SAAI,WAAU,yBACb;AAAA;AAAA,MAAC;AAAA;AAAA,QACE,GAAG,cAAc;AAAA,UAChB,cAAc;AAAA,UACd,WAAW;AAAA,UACX,YAAY;AAAA,UACZ,SAAS,MAAM,SAAS;AAAA,QAC1B,CAAC;AAAA;AAAA,IACH;AAAA,IACA;AAAA,MAAC;AAAA;AAAA,QACE,GAAG,aAAa,CAAC,GAAG,EAAC,kBAAkB,KAAI,CAAC;AAAA,QAC7C,KAAK;AAAA,QACL,OAAO,EAAC,UAAU,SAAS,UAAU,QAAQ,WAAW,QAAQ,IAAG;AAAA,QACnE,WAAU;AAAA,QAET,oBACC,cAAc,IAAI,CAAC,MAAM,UACvB;AAAA,UAAC;AAAA;AAAA,YAEE,GAAG,aAAa;AAAA,cACf;AAAA,cACA;AAAA,cACA,WAAW,WAAW,mCAAmC;AAAA,gBACvD,4CAA4C,qBAAqB;AAAA,cACnE,CAAC;AAAA,YACH,CAAC;AAAA,YAEA,eAAK,CAAC;AAAA;AAAA,UATF,KAAK,CAAC;AAAA,QAUb,CACD;AAAA;AAAA,IACL;AAAA,KACF;AAEJ;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"73020a5a2032027cc342d42db613082f6da43a81"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return ui=function(){return s},s}ui();const BW=(ui().s[0]++,140);function kM({value:n,options:e=(ui().b[0][0]++,[]),onChange:t=(ui().b[1][0]++,()=>{ui().f[1]++}),"aria-label":i}){ui().f[0]++;const[r,o]=(ui().s[1]++,On.useState((ui().b[2][0]++,n||(ui().b[2][1]++,"")))),s=(ui().s[2]++,On.useRef(null)),[a,c]=(ui().s[3]++,On.useState(BW)),h=(ui().s[4]++,On.useMemo(()=>{ui().f[2]++;const W=(ui().s[5]++,r.toLowerCase());return ui().s[6]++,e.filter(q=>(ui().f[3]++,ui().s[7]++,q[0].toLowerCase().includes(W)))},[e,r])),m=(ui().s[8]++,On.useCallback(()=>{if(ui().f[4]++,ui().s[9]++,s.current){ui().b[3][0]++;const W=(ui().s[10]++,window.innerHeight-s.current.getBoundingClientRect().top);ui().s[11]++,c(Math.min(W,BW))}else ui().b[3][1]++},[])),{isOpen:v,getMenuProps:x,getInputProps:E,getItemProps:D,highlightedIndex:P,openMenu:F}=(ui().s[12]++,GR({items:h,inputValue:r,itemToString:W=>(ui().f[5]++,ui().s[13]++,W?(ui().b[4][0]++,W[0]):(ui().b[4][1]++,"")),stateReducer:(W,q)=>(ui().f[6]++,ui().s[14]++,q.type===GR.stateChangeTypes.InputClick?(ui().b[5][0]++,ui().s[15]++,{...q.changes,isOpen:!0}):(ui().b[5][1]++,ui().s[16]++,q.changes)),onSelectedItemChange:({selectedItem:W})=>{ui().f[7]++;const q=(ui().s[17]++,W?(ui().b[6][0]++,W[0]):(ui().b[6][1]++,""));ui().s[18]++,o(q),ui().s[19]++,t(W?(ui().b[7][0]++,W[0]):(ui().b[7][1]++,void 0))},onInputValueChange:({inputValue:W})=>{ui().f[8]++,ui().s[20]++,typeof W=="string"?(ui().b[8][0]++,ui().s[21]++,o(W),ui().s[22]++,t(W===""?(ui().b[9][0]++,void 0):(ui().b[9][1]++,W)),ui().s[23]++,F()):ui().b[8][1]++}}));return ui().s[24]++,On.useEffect(()=>{ui().f[9]++,ui().s[25]++,v?(ui().b[10][0]++,ui().s[26]++,m()):ui().b[10][1]++},[v,m]),ui().s[27]++,On.useEffect(()=>(ui().f[10]++,ui().s[28]++,window.addEventListener("resize",m),ui().s[29]++,()=>(ui().f[11]++,ui().s[30]++,window.removeEventListener("resize",m))),[m]),ui().s[31]++,On.useEffect(()=>{ui().f[12]++,ui().s[32]++,o((ui().b[11][0]++,n||(ui().b[11][1]++,"")))},[n]),ui().s[33]++,te.jsxs("div",{className:"maputnik-autocomplete",children:[te.jsx("input",{...E({"aria-label":i,className:"maputnik-string",spellCheck:!1,onFocus:()=>(ui().f[13]++,ui().s[34]++,F())})}),te.jsx("div",{...x({},{suppressRefError:!0}),ref:s,style:{position:"fixed",overflow:"auto",maxHeight:a,zIndex:998},className:"maputnik-autocomplete-menu",children:(ui().b[12][0]++,v&&(ui().b[12][1]++,h.map((W,q)=>(ui().f[14]++,ui().s[35]++,te.jsx("div",{...D({item:W,index:q,className:f0("maputnik-autocomplete-menu-item",{"maputnik-autocomplete-menu-item-selected":P===q})}),children:W[1]},W[0])))))})]})}function sm(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldSource.tsx",e="787db584cc9becf4089365283e16f9ba747f4840",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldSource.tsx",statementMap:{0:{start:{line:6,column:28},end:{line:32,column:1}},1:{start:{line:15,column:2},end:{line:31,column:4}},2:{start:{line:27,column:43},end:{line:27,column:53}},3:{start:{line:33,column:20},end:{line:33,column:58}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:28},end:{line:6,column:29}},loc:{start:{line:14,column:6},end:{line:32,column:1}},line:14},1:{name:"(anonymous_1)",decl:{start:{line:7,column:13},end:{line:7,column:14}},loc:{start:{line:7,column:19},end:{line:8,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:27,column:34},end:{line:27,column:35}},loc:{start:{line:27,column:43},end:{line:27,column:53}},line:27}},branchMap:{0:{loc:{start:{line:7,column:2},end:{line:8,column:3}},type:"default-arg",locations:[{start:{line:7,column:13},end:{line:8,column:3}}],line:7},1:{loc:{start:{line:9,column:2},end:{line:9,column:16}},type:"default-arg",locations:[{start:{line:9,column:14},end:{line:9,column:16}}],line:9}},s:{0:0,1:0,2:0,3:0},f:{0:0,1:0,2:0},b:{0:[0],1:[0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldSource.tsx"],names:[],mappings:"AA8BM;AA5BN,OAAO,YAAY;AACnB,OAAO,WAAW;AAClB,OAAO,uBAAuB;AAC9B,SAA+B,uBAAuB;AAUtD,MAAM,sBAA0D,CAAC;AAAA,EAC/D,WAAW,MAAM;AAAA,EAAC;AAAA,EAClB,YAAY,CAAC;AAAA,EACb;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACF,MAAM;AACJ,SACE;AAAA,IAAC;AAAA;AAAA,MACC,OAAO,EAAE,QAAQ;AAAA,MACjB,WAAW,OAAO,MAAM;AAAA,MACxB;AAAA,MACA,eAAa;AAAA,MAEb;AAAA,QAAC;AAAA;AAAA,UACC;AAAA,UACA;AAAA,UACA,SAAS,WAAW,IAAI,CAAC,QAAQ,CAAC,KAAK,GAAG,CAAC;AAAA;AAAA,MAC7C;AAAA;AAAA,EACF;AAEJ;AAGA,MAAM,cAAc,gBAAgB,EAAE,mBAAmB;AACzD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"787db584cc9becf4089365283e16f9ba747f4840"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return sm=function(){return s},s}sm();sm().s[0]++;const J8e=({onChange:n=(sm().b[0][0]++,()=>{sm().f[1]++}),sourceIds:e=(sm().b[1][0]++,[]),wdKey:t,value:i,error:r,t:o})=>(sm().f[0]++,sm().s[1]++,te.jsx(Ms,{label:o("Source"),fieldSpec:qr.layer.source,error:r,"data-wd-key":t,children:te.jsx(kM,{value:i,onChange:n,options:e?.map(s=>(sm().f[2]++,sm().s[2]++,[s,s]))})})),vre=(sm().s[3]++,Po()(J8e));function am(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldSourceLayer.tsx",e="61cb059654b456e27f782356448ebd0362f3cb6a",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldSourceLayer.tsx",statementMap:{0:{start:{line:6,column:33},end:{line:31,column:1}},1:{start:{line:14,column:2},end:{line:30,column:4}},2:{start:{line:26,column:46},end:{line:26,column:52}},3:{start:{line:32,column:25},end:{line:32,column:68}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:33},end:{line:6,column:34}},loc:{start:{line:13,column:6},end:{line:31,column:1}},line:13},1:{name:"(anonymous_1)",decl:{start:{line:7,column:13},end:{line:7,column:14}},loc:{start:{line:7,column:19},end:{line:8,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:26,column:39},end:{line:26,column:40}},loc:{start:{line:26,column:46},end:{line:26,column:52}},line:26}},branchMap:{0:{loc:{start:{line:7,column:2},end:{line:8,column:3}},type:"default-arg",locations:[{start:{line:7,column:13},end:{line:8,column:3}}],line:7},1:{loc:{start:{line:9,column:2},end:{line:9,column:21}},type:"default-arg",locations:[{start:{line:9,column:19},end:{line:9,column:21}}],line:9}},s:{0:0,1:0,2:0,3:0},f:{0:0,1:0,2:0},b:{0:[0],1:[0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldSourceLayer.tsx"],names:[],mappings:"AA4BM;AA1BN,SAAQ,cAAa;AACrB,OAAO,WAAW;AAClB,OAAO,uBAAuB;AAC9B,SAA+B,uBAAuB;AAStD,MAAM,2BAAoE,CAAC;AAAA,EACzE,WAAW,MAAM;AAAA,EAAC;AAAA,EAClB,iBAAiB,CAAC;AAAA,EAClB;AAAA,EACA;AAAA,EACA;AACF,MAAM;AACJ,SACE;AAAA,IAAC;AAAA;AAAA,MACC,OAAO,EAAE,cAAc;AAAA,MACvB,WAAW,OAAO,MAAM,cAAc;AAAA,MACtC,eAAY;AAAA,MACZ;AAAA,MAEA;AAAA,QAAC;AAAA;AAAA,UACC;AAAA,UACA;AAAA,UACA,SAAS,gBAAgB,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;AAAA;AAAA,MAC5C;AAAA;AAAA,EACF;AAEJ;AAEA,MAAM,mBAAmB,gBAAgB,EAAE,wBAAwB;AACnE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"61cb059654b456e27f782356448ebd0362f3cb6a"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return am=function(){return s},s}am();am().s[0]++;const e7e=({onChange:n=(am().b[0][0]++,()=>{am().f[1]++}),sourceLayerIds:e=(am().b[1][0]++,[]),value:t,error:i,t:r})=>(am().f[0]++,am().s[1]++,te.jsx(Ms,{label:r("Source Layer"),fieldSpec:ts.layer["source-layer"],"data-wd-key":"layer-source-layer",error:i,children:te.jsx(kM,{value:t,onChange:n,options:e?.map(o=>(am().f[2]++,am().s[2]++,[o,o]))})})),bre=(am().s[3]++,Po()(e7e));function hK(){var n="/home/runner/work/maputnik/maputnik/src/libs/non-source-layers.ts",e="674dcf7f1706a4f312a810bdf5e5997ddaf065e0",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/non-source-layers.ts",statementMap:{0:{start:{line:1,column:33},end:{line:1,column:97}}},fnMap:{},branchMap:{},s:{0:0},f:{},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/non-source-layers.ts"],names:[],mappings:"AAAO,aAAM,oBAAoB,CAAC,cAAc,UAAU,aAAa,WAAW,cAAc;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"674dcf7f1706a4f312a810bdf5e5997ddaf065e0"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return hK=function(){return s},s}hK();const WR=(hK().s[0]++,["background","raster","hillshade","heatmap","color-relief"]);function bn(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalAdd.tsx",e="90da8e5ee6bdbe488a5f45bfae015ac94b0d70a9",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalAdd.tsx",statementMap:{0:{start:{line:12,column:13},end:{line:33,column:3}},1:{start:{line:13,column:4},end:{line:16,column:5}},2:{start:{line:13,column:38},end:{line:13,column:60}},3:{start:{line:14,column:6},end:{line:14,column:72}},4:{start:{line:15,column:6},end:{line:15,column:13}},5:{start:{line:17,column:26},end:{line:17,column:52}},6:{start:{line:18,column:18},end:{line:21,column:5}},7:{start:{line:22,column:4},end:{line:27,column:5}},8:{start:{line:23,column:6},end:{line:23,column:39}},9:{start:{line:24,column:6},end:{line:26,column:7}},10:{start:{line:25,column:8},end:{line:25,column:59}},11:{start:{line:28,column:4},end:{line:28,column:30}},12:{start:{line:29,column:4},end:{line:32,column:7}},13:{start:{line:30,column:6},end:{line:30,column:47}},14:{start:{line:31,column:6},end:{line:31,column:32}},15:{start:{line:35,column:4},end:{line:35,column:17}},16:{start:{line:36,column:18},end:{line:40,column:5}},17:{start:{line:41,column:4},end:{line:47,column:5}},18:{start:{line:42,column:6},end:{line:42,column:56}},19:{start:{line:43,column:27},end:{line:43,column:72}},20:{start:{line:44,column:6},end:{line:46,column:7}},21:{start:{line:45,column:8},end:{line:45,column:48}},22:{start:{line:48,column:4},end:{line:48,column:23}},23:{start:{line:51,column:20},end:{line:51,column:34}},24:{start:{line:52,column:20},end:{line:52,column:35}},25:{start:{line:53,column:32},end:{line:53,column:56}},26:{start:{line:54,column:32},end:{line:54,column:56}},27:{start:{line:55,column:4},end:{line:62,column:5}},28:{start:{line:59,column:6},end:{line:61,column:9}},29:{start:{line:65,column:22},end:{line:65,column:54}},30:{start:{line:66,column:4},end:{line:66,column:34}},31:{start:{line:69,column:4},end:{line:86,column:5}},32:{start:{line:71,column:8},end:{line:71,column:18}},33:{start:{line:74,column:8},end:{line:74,column:113}},34:{start:{line:74,column:69},end:{line:74,column:92}},35:{start:{line:74,column:110},end:{line:74,column:111}},36:{start:{line:76,column:8},end:{line:76,column:109}},37:{start:{line:76,column:69},end:{line:76,column:88}},38:{start:{line:76,column:106},end:{line:76,column:107}},39:{start:{line:83,column:8},end:{line:83,column:133}},40:{start:{line:83,column:69},end:{line:83,column:112}},41:{start:{line:83,column:130},end:{line:83,column:131}},42:{start:{line:85,column:8},end:{line:85,column:18}},43:{start:{line:89,column:14},end:{line:89,column:26}},44:{start:{line:90,column:20},end:{line:90,column:52}},45:{start:{line:91,column:19},end:{line:91,column:61}},46:{start:{line:93,column:4},end:{line:106,column:5}},47:{start:{line:94,column:6},end:{line:105,column:11}},48:{start:{line:100,column:27},end:{line:100,column:57}},49:{start:{line:107,column:4},end:{line:165,column:6}},50:{start:{line:124,column:18},end:{line:124,column:56}},51:{start:{line:133,column:33},end:{line:133,column:59}},52:{start:{line:142,column:33},end:{line:142,column:61}},53:{start:{line:150,column:33},end:{line:150,column:69}},54:{start:{line:168,column:17},end:{line:168,column:52}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:12,column:13},end:{line:12,column:14}},loc:{start:{line:12,column:19},end:{line:33,column:3}},line:12},1:{name:"(anonymous_1)",decl:{start:{line:13,column:31},end:{line:13,column:32}},loc:{start:{line:13,column:38},end:{line:13,column:60}},line:13},2:{name:"(anonymous_2)",decl:{start:{line:29,column:35},end:{line:29,column:36}},loc:{start:{line:29,column:41},end:{line:32,column:5}},line:29},3:{name:"(anonymous_3)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:21},end:{line:49,column:3}},line:34},4:{name:"(anonymous_4)",decl:{start:{line:50,column:2},end:{line:50,column:3}},loc:{start:{line:50,column:44},end:{line:63,column:3}},line:50},5:{name:"(anonymous_5)",decl:{start:{line:64,column:2},end:{line:64,column:3}},loc:{start:{line:64,column:29},end:{line:67,column:3}},line:64},6:{name:"(anonymous_6)",decl:{start:{line:68,column:2},end:{line:68,column:3}},loc:{start:{line:68,column:19},end:{line:87,column:3}},line:68},7:{name:"(anonymous_7)",decl:{start:{line:74,column:57},end:{line:74,column:58}},loc:{start:{line:74,column:69},end:{line:74,column:92}},line:74},8:{name:"(anonymous_8)",decl:{start:{line:74,column:98},end:{line:74,column:99}},loc:{start:{line:74,column:110},end:{line:74,column:111}},line:74},9:{name:"(anonymous_9)",decl:{start:{line:76,column:57},end:{line:76,column:58}},loc:{start:{line:76,column:69},end:{line:76,column:88}},line:76},10:{name:"(anonymous_10)",decl:{start:{line:76,column:94},end:{line:76,column:95}},loc:{start:{line:76,column:106},end:{line:76,column:107}},line:76},11:{name:"(anonymous_11)",decl:{start:{line:83,column:57},end:{line:83,column:58}},loc:{start:{line:83,column:69},end:{line:83,column:112}},line:83},12:{name:"(anonymous_12)",decl:{start:{line:83,column:118},end:{line:83,column:119}},loc:{start:{line:83,column:130},end:{line:83,column:131}},line:83},13:{name:"(anonymous_13)",decl:{start:{line:88,column:2},end:{line:88,column:3}},loc:{start:{line:88,column:11},end:{line:166,column:3}},line:88},14:{name:"(anonymous_14)",decl:{start:{line:100,column:21},end:{line:100,column:22}},loc:{start:{line:100,column:27},end:{line:100,column:57}},line:100},15:{name:"(anonymous_15)",decl:{start:{line:123,column:26},end:{line:123,column:27}},loc:{start:{line:123,column:33},end:{line:125,column:17}},line:123},16:{name:"(anonymous_16)",decl:{start:{line:133,column:26},end:{line:133,column:27}},loc:{start:{line:133,column:33},end:{line:133,column:59}},line:133},17:{name:"(anonymous_17)",decl:{start:{line:142,column:26},end:{line:142,column:27}},loc:{start:{line:142,column:33},end:{line:142,column:61}},line:142},18:{name:"(anonymous_18)",decl:{start:{line:150,column:26},end:{line:150,column:27}},loc:{start:{line:150,column:33},end:{line:150,column:69}},line:150}},branchMap:{0:{loc:{start:{line:13,column:4},end:{line:16,column:5}},type:"if",locations:[{start:{line:13,column:4},end:{line:16,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:13},1:{loc:{start:{line:22,column:4},end:{line:27,column:5}},type:"if",locations:[{start:{line:22,column:4},end:{line:27,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:22},2:{loc:{start:{line:24,column:6},end:{line:26,column:7}},type:"if",locations:[{start:{line:24,column:6},end:{line:26,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:24},3:{loc:{start:{line:24,column:10},end:{line:24,column:84}},type:"binary-expr",locations:[{start:{line:24,column:10},end:{line:24,column:54}},{start:{line:24,column:58},end:{line:24,column:84}}],line:24},4:{loc:{start:{line:41,column:4},end:{line:47,column:5}},type:"if",locations:[{start:{line:41,column:4},end:{line:47,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:41},5:{loc:{start:{line:43,column:27},end:{line:43,column:72}},type:"binary-expr",locations:[{start:{line:43,column:27},end:{line:43,column:66}},{start:{line:43,column:70},end:{line:43,column:72}}],line:43},6:{loc:{start:{line:44,column:6},end:{line:46,column:7}},type:"if",locations:[{start:{line:44,column:6},end:{line:46,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:44},7:{loc:{start:{line:55,column:4},end:{line:62,column:5}},type:"if",locations:[{start:{line:55,column:4},end:{line:62,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:55},8:{loc:{start:{line:57,column:6},end:{line:57,column:160}},type:"binary-expr",locations:[{start:{line:57,column:6},end:{line:57,column:25}},{start:{line:57,column:29},end:{line:57,column:52}},{start:{line:57,column:56},end:{line:57,column:106}},{start:{line:57,column:110},end:{line:57,column:160}}],line:57},9:{loc:{start:{line:65,column:22},end:{line:65,column:54}},type:"binary-expr",locations:[{start:{line:65,column:22},end:{line:65,column:48}},{start:{line:65,column:52},end:{line:65,column:54}}],line:65},10:{loc:{start:{line:66,column:11},end:{line:66,column:33}},type:"binary-expr",locations:[{start:{line:66,column:11},end:{line:66,column:27}},{start:{line:66,column:31},end:{line:66,column:33}}],line:66},11:{loc:{start:{line:69,column:4},end:{line:86,column:5}},type:"switch",locations:[{start:{line:70,column:6},end:{line:71,column:18}},{start:{line:72,column:6},end:{line:72,column:23}},{start:{line:73,column:6},end:{line:74,column:113}},{start:{line:75,column:6},end:{line:76,column:109}},{start:{line:77,column:6},end:{line:77,column:21}},{start:{line:78,column:6},end:{line:78,column:20}},{start:{line:79,column:6},end:{line:79,column:18}},{start:{line:80,column:6},end:{line:80,column:28}},{start:{line:81,column:6},end:{line:81,column:18}},{start:{line:82,column:6},end:{line:83,column:133}},{start:{line:84,column:6},end:{line:85,column:18}}],line:69},12:{loc:{start:{line:83,column:69},end:{line:83,column:112}},type:"binary-expr",locations:[{start:{line:83,column:69},end:{line:83,column:88}},{start:{line:83,column:92},end:{line:83,column:112}}],line:83},13:{loc:{start:{line:93,column:4},end:{line:106,column:5}},type:"if",locations:[{start:{line:93,column:4},end:{line:106,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:93},14:{loc:{start:{line:136,column:12},end:{line:144,column:13}},type:"binary-expr",locations:[{start:{line:136,column:12},end:{line:136,column:44}},{start:{line:136,column:64},end:{line:144,column:13}}],line:136},15:{loc:{start:{line:145,column:12},end:{line:152,column:13}},type:"binary-expr",locations:[{start:{line:145,column:12},end:{line:145,column:56}},{start:{line:145,column:76},end:{line:152,column:13}}],line:145}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0,0,0],9:[0,0],10:[0,0],11:[0,0,0,0,0,0,0,0,0,0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalAdd.tsx"],names:[],mappings:"AAqIQ,SAEE,KAFF;AArIR,OAAO,WAAW;AAClB,SAA+B,uBAAuB;AAGtD,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAClB,OAAO,eAAe;AACtB,OAAO,aAAa;AACpB,OAAO,iBAAiB;AACxB,OAAO,sBAAsB;AAC7B,SAAS,yBAAyB;AAmBlC,MAAM,yBAAyB,MAAM,UAAgD;AAAA,EACnF,WAAW,MAAM;AACf,QAAI,KAAK,MAAM,OAAO,KAAK,OAAK,EAAE,OAAO,KAAK,MAAM,EAAE,GAAG;AACvD,WAAK,SAAS,EAAE,OAAO,KAAK,MAAM,EAAE,yBAAyB,EAAE,CAAC;AAChE;AAAA,IACF;AAEA,UAAM,gBAAgB,KAAK,MAAM,OAAO,MAAM,CAAC;AAC/C,UAAM,QAAuB;AAAA,MAC3B,IAAI,KAAK,MAAM;AAAA,MACf,MAAM,KAAK,MAAM;AAAA,IACnB;AAEA,QAAG,KAAK,MAAM,SAAS,cAAc;AACnC,YAAM,SAAS,KAAK,MAAM;AAC1B,UAAG,CAAC,kBAAkB,SAAS,KAAK,MAAM,IAAI,KAAK,KAAK,MAAM,cAAc,GAAG;AAC7E,cAAM,cAAc,IAAI,KAAK,MAAM,cAAc;AAAA,MACnD;AAAA,IACF;AAEA,kBAAc,KAAK,KAA2B;AAC9C,SAAK,SAAS,EAAE,OAAO,KAAK,GAAG,MAAM;AACnC,WAAK,MAAM,eAAe,aAAa;AACvC,WAAK,MAAM,aAAa;AAAA,IAC1B,CAAC;AAAA,EACH;AAAA,EAEA,YAAY,OAA8B;AACxC,UAAM,KAAK;AACX,UAAM,QAAuB;AAAA,MAC3B,MAAM;AAAA,MACN,IAAI;AAAA,MACJ,OAAO;AAAA,IACT;AAEA,QAAG,OAAO,KAAK,MAAM,OAAO,EAAE,SAAS,GAAG;AACxC,YAAM,SAAS,OAAO,KAAK,KAAK,MAAM,OAAO,EAAE,CAAC;AAChD,YAAM,eAAe,KAAK,MAAM,QAAQ,MAAM,MAAM,EAAE,UAAU,CAAC;AACjE,UAAI,aAAa,SAAS,GAAG;AAC3B,cAAM,cAAc,IAAI,aAAa,CAAC;AAAA,MACxC;AAAA,IACF;AACA,SAAK,QAAQ;AAAA,EACf;AAAA,EAEA,mBAAmB,YAAmC,WAA0B;AAE9E,UAAM,UAAU,UAAU;AAC1B,UAAM,UAAU,KAAK,MAAM;AAE3B,UAAM,sBAAsB,KAAK,WAAW,OAAO;AACnD,UAAM,sBAAsB,KAAK,WAAW,OAAO;AAEnD;AAAA;AAAA,MAEE,YAAY,WACT,UAAU,WAAW,MAErB,oBAAoB,QAAQ,UAAU,MAAO,IAAI,MAEjD,oBAAoB,QAAQ,KAAK,MAAM,MAAO,IAAI;AAAA,MACrD;AAEA,WAAK,SAAS;AAAA,QACZ,QAAQ;AAAA,MACV,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,mBAAmB,QAAgB;AACjC,UAAM,YAAY,KAAK,MAAM,QAAQ,MAAM,KAAK,CAAC;AACjD,WAAO,UAAU,UAAU,CAAC;AAAA,EAC9B;AAAA,EAEA,WAAW,MAAkC;AAE3C,YAAO,MAAM;AAAA,MACX,KAAK;AACH,eAAO,CAAC;AAAA,MACV,KAAK;AAAA,MACL,KAAK;AACH,eAAO,OAAO,QAAQ,KAAK,MAAM,OAAO,EAAE,OAAO,CAAC,CAAC,GAAG,CAAC,MAAM,EAAE,SAAS,YAAY,EAAE,IAAI,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC;AAAA,MACzG,KAAK;AACH,eAAO,OAAO,QAAQ,KAAK,MAAM,OAAO,EAAE,OAAO,CAAC,CAAC,GAAG,CAAC,MAAM,EAAE,SAAS,QAAQ,EAAE,IAAI,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC;AAAA,MACrG,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AACH,eAAO,OAAO,QAAQ,KAAK,MAAM,OAAO,EAAE,OAAO,CAAC,CAAC,GAAG,CAAC,MAAM,EAAE,SAAS,YAAY,EAAE,SAAS,SAAS,EAAE,IAAI,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC;AAAA,MAC7H;AACE,eAAO,CAAC;AAAA,IACZ;AAAA,EACF;AAAA,EAGA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,UAAU,KAAK,WAAW,KAAK,MAAM,IAAI;AAC/C,UAAM,SAAS,KAAK,mBAAmB,KAAK,MAAM,MAAO;AACzD,QAAI;AACJ,QAAI,KAAK,MAAM,OAAO;AACpB,qBACE,qBAAC,SAAI,WAAU,wBACZ;AAAA,aAAK,MAAM;AAAA,QACZ;AAAA,UAAC;AAAA;AAAA,YACC,MAAK;AAAA,YACL,SAAS,MAAM,KAAK,SAAS,EAAE,OAAO,KAAK,CAAC;AAAA,YAC5C,WAAU;AAAA,YACX;AAAA;AAAA,QAED;AAAA,SACF;AAAA,IAEJ;AAEA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,WAAW;AAAA,QACpB,eAAY;AAAA,QACZ,WAAU;AAAA,QAET;AAAA;AAAA,UACD,qBAAC,SAAI,WAAU,sBACb;AAAA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,KAAK,MAAM;AAAA,gBAClB,OAAM;AAAA,gBACN,UAAU,CAAC,MAAc;AACvB,uBAAK,SAAS,EAAE,IAAI,GAAG,OAAO,KAAK,CAAC;AAAA,gBACtC;AAAA;AAAA,YACF;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,KAAK,MAAM;AAAA,gBAClB,OAAM;AAAA,gBACN,UAAU,CAAC,MAAkC,KAAK,SAAS,EAAE,MAAM,EAAE,CAAC;AAAA;AAAA,YACxE;AAAA,YACC,KAAK,MAAM,SAAS,gBACvB;AAAA,cAAC;AAAA;AAAA,gBACC,WAAW;AAAA,gBACX,OAAM;AAAA,gBACN,OAAO,KAAK,MAAM;AAAA,gBAClB,UAAU,CAAC,MAAc,KAAK,SAAS,EAAE,QAAQ,EAAE,CAAC;AAAA;AAAA,YACtD;AAAA,YAEG,CAAC,kBAAkB,SAAS,KAAK,MAAM,IAAI,KAC9C;AAAA,cAAC;AAAA;AAAA,gBACC,gBAAgB;AAAA,gBAChB,OAAO,KAAK,MAAM,cAAc;AAAA,gBAChC,UAAU,CAAC,MAAc,KAAK,SAAS,EAAE,gBAAgB,EAAE,CAAC;AAAA;AAAA,YAC9D;AAAA,YAEE;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,SAAS,KAAK;AAAA,gBACd,eAAY;AAAA,gBAEX,YAAE,WAAW;AAAA;AAAA,YAChB;AAAA,aACF;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,WAAW,gBAAgB,EAAE,gBAAgB;AACnD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"90da8e5ee6bdbe488a5f45bfae015ac94b0d70a9"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return bn=function(){return s},s}bn();class t7e extends On.Component{addLayer=(bn().s[0]++,()=>{if(bn().f[0]++,bn().s[1]++,this.props.layers.some(i=>(bn().f[1]++,bn().s[2]++,i.id===this.state.id))){bn().b[0][0]++,bn().s[3]++,this.setState({error:this.props.t("Layer ID already exists")}),bn().s[4]++;return}else bn().b[0][1]++;const e=(bn().s[5]++,this.props.layers.slice(0)),t=(bn().s[6]++,{id:this.state.id,type:this.state.type});bn().s[7]++,this.state.type!=="background"?(bn().b[1][0]++,bn().s[8]++,t.source=this.state.source,bn().s[9]++,bn().b[3][0]++,!WR.includes(this.state.type)&&(bn().b[3][1]++,this.state["source-layer"])?(bn().b[2][0]++,bn().s[10]++,t["source-layer"]=this.state["source-layer"]):bn().b[2][1]++):bn().b[1][1]++,bn().s[11]++,e.push(t),bn().s[12]++,this.setState({error:null},()=>{bn().f[2]++,bn().s[13]++,this.props.onLayersChange(e),bn().s[14]++,this.props.onOpenToggle()})});constructor(e){bn().f[3]++,bn().s[15]++,super(e);const t=(bn().s[16]++,{type:"fill",id:"",error:null});if(bn().s[17]++,Object.keys(e.sources).length>0){bn().b[4][0]++,bn().s[18]++,t.source=Object.keys(this.props.sources)[0];const i=(bn().s[19]++,bn().b[5][0]++,this.props.sources[t.source].layers||(bn().b[5][1]++,[]));bn().s[20]++,i.length>0?(bn().b[6][0]++,bn().s[21]++,t["source-layer"]=i[0]):bn().b[6][1]++}else bn().b[4][1]++;bn().s[22]++,this.state=t}componentDidUpdate(e,t){bn().f[4]++;const i=(bn().s[23]++,t.type),r=(bn().s[24]++,this.state.type),o=(bn().s[25]++,this.getSources(i)),s=(bn().s[26]++,this.getSources(r));bn().s[27]++,bn().b[8][0]++,i!==r&&(bn().b[8][1]++,t.source!=="")&&(bn().b[8][2]++,o.indexOf(t.source)>-1)&&(bn().b[8][3]++,s.indexOf(this.state.source)<0)?(bn().b[7][0]++,bn().s[28]++,this.setState({source:""})):bn().b[7][1]++}getLayersForSource(e){bn().f[5]++;const t=(bn().s[29]++,bn().b[9][0]++,this.props.sources[e]||(bn().b[9][1]++,{}));return bn().s[30]++,bn().b[10][0]++,t.layers||(bn().b[10][1]++,[])}getSources(e){switch(bn().f[6]++,bn().s[31]++,e){case"background":return bn().b[11][0]++,bn().s[32]++,[];case"hillshade":bn().b[11][1]++;case"color-relief":return bn().b[11][2]++,bn().s[33]++,Object.entries(this.props.sources).filter(([t,i])=>(bn().f[7]++,bn().s[34]++,i.type==="raster-dem")).map(([t,i])=>(bn().f[8]++,bn().s[35]++,t));case"raster":return bn().b[11][3]++,bn().s[36]++,Object.entries(this.props.sources).filter(([t,i])=>(bn().f[9]++,bn().s[37]++,i.type==="raster")).map(([t,i])=>(bn().f[10]++,bn().s[38]++,t));case"heatmap":bn().b[11][4]++;case"circle":bn().b[11][5]++;case"fill":bn().b[11][6]++;case"fill-extrusion":bn().b[11][7]++;case"line":bn().b[11][8]++;case"symbol":return bn().b[11][9]++,bn().s[39]++,Object.entries(this.props.sources).filter(([t,i])=>(bn().f[11]++,bn().s[40]++,bn().b[12][0]++,i.type==="vector"||(bn().b[12][1]++,i.type==="geojson"))).map(([t,i])=>(bn().f[12]++,bn().s[41]++,t));default:return bn().b[11][10]++,bn().s[42]++,[]}}render(){bn().f[13]++;const e=(bn().s[43]++,this.props.t),t=(bn().s[44]++,this.getSources(this.state.type)),i=(bn().s[45]++,this.getLayersForSource(this.state.source));let r;return bn().s[46]++,this.state.error?(bn().b[13][0]++,bn().s[47]++,r=te.jsxs("div",{className:"maputnik-modal-error",children:[this.state.error,te.jsx("a",{href:"#",onClick:()=>(bn().f[14]++,bn().s[48]++,this.setState({error:null})),className:"maputnik-modal-error-close",children:""})]})):bn().b[13][1]++,bn().s[49]++,te.jsxs(w1,{isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:e("Add Layer"),"data-wd-key":"modal:add-layer",className:"maputnik-add-modal",children:[r,te.jsxs("div",{className:"maputnik-add-layer",children:[te.jsx(tre,{value:this.state.id,wdKey:"add-layer.layer-id",onChange:o=>{bn().f[15]++,bn().s[50]++,this.setState({id:o,error:null})}}),te.jsx(ere,{value:this.state.type,wdKey:"add-layer.layer-type",onChange:o=>(bn().f[16]++,bn().s[51]++,this.setState({type:o}))}),(bn().b[14][0]++,this.state.type!=="background"&&(bn().b[14][1]++,te.jsx(vre,{sourceIds:t,wdKey:"add-layer.layer-source-block",value:this.state.source,onChange:o=>(bn().f[17]++,bn().s[52]++,this.setState({source:o}))}))),(bn().b[15][0]++,!WR.includes(this.state.type)&&(bn().b[15][1]++,te.jsx(bre,{sourceLayerIds:i,value:this.state["source-layer"],onChange:o=>(bn().f[18]++,bn().s[53]++,this.setState({"source-layer":o}))}))),te.jsx(Gs,{className:"maputnik-add-layer-button",onClick:this.addLayer,"data-wd-key":"add-layer",children:e("Add Layer")})]})]})}}const n7e=(bn().s[54]++,Po()(t7e));function Sb(){var n="/home/runner/work/maputnik/maputnik/src/libs/document-uid.ts",e="a991ed6da2a27b46f1adbb88a645aa2ee0df375e",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/document-uid.ts",statementMap:{0:{start:{line:1,column:10},end:{line:1,column:11}},1:{start:{line:3,column:2},end:{line:3,column:8}},2:{start:{line:4,column:2},end:{line:4,column:22}}},fnMap:{0:{name:"generateUniqueId",decl:{start:{line:2,column:24},end:{line:2,column:40}},loc:{start:{line:2,column:54},end:{line:5,column:1}},line:2}},branchMap:{0:{loc:{start:{line:2,column:41},end:{line:2,column:52}},type:"default-arg",locations:[{start:{line:2,column:50},end:{line:2,column:52}}],line:2}},s:{0:0,1:0,2:0},f:{0:0},b:{0:[0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/document-uid.ts"],names:[],mappings:"AAGA,IAAI,MAAM;AAEV,wBAAwB,iBAAiB,SAAO,IAAI;AAClD;AACA,SAAO,SAAO;AAChB;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a991ed6da2a27b46f1adbb88a645aa2ee0df375e"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Sb=function(){return s},s}Sb();let OW=(Sb().s[0]++,0);function kx(n=(Sb().b[0][0]++,"")){return Sb().f[0]++,Sb().s[1]++,OW++,Sb().s[2]++,n+OW}function lr(){var n="/home/runner/work/maputnik/maputnik/src/libs/layer.ts",e="6a81b3c8ffc06f88598225aa1f9b90e3bb6da08e",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/layer.ts",statementMap:{0:{start:{line:3,column:28},end:{line:3,column:46}},1:{start:{line:4,column:2},end:{line:8,column:5}},2:{start:{line:5,column:4},end:{line:7,column:5}},3:{start:{line:6,column:6},end:{line:6,column:45}},4:{start:{line:9,column:29},end:{line:9,column:48}},5:{start:{line:10,column:2},end:{line:14,column:5}},6:{start:{line:11,column:4},end:{line:13,column:5}},7:{start:{line:12,column:6},end:{line:12,column:46}},8:{start:{line:15,column:2},end:{line:20,column:4}},9:{start:{line:23,column:2},end:{line:59,column:3}},10:{start:{line:24,column:4},end:{line:43,column:5}},11:{start:{line:25,column:23},end:{line:31,column:7}},12:{start:{line:32,column:6},end:{line:32,column:39}},13:{start:{line:33,column:6},end:{line:35,column:7}},14:{start:{line:34,column:8},end:{line:34,column:31}},15:{start:{line:36,column:6},end:{line:36,column:22}},16:{start:{line:38,column:23},end:{line:40,column:7}},17:{start:{line:41,column:6},end:{line:41,column:32}},18:{start:{line:42,column:6},end:{line:42,column:22}},19:{start:{line:45,column:4},end:{line:58,column:5}},20:{start:{line:46,column:6},end:{line:52,column:8}},21:{start:{line:54,column:6},end:{line:57,column:8}},22:{start:{line:62,column:2},end:{line:62,column:64}},23:{start:{line:65,column:29},end:{line:65,column:56}},24:{start:{line:66,column:19},end:{line:66,column:22}},25:{start:{line:67,column:2},end:{line:74,column:3}},26:{start:{line:67,column:15},end:{line:67,column:18}},27:{start:{line:68,column:32},end:{line:68,column:61}},28:{start:{line:69,column:4},end:{line:73,column:5}},29:{start:{line:70,column:6},end:{line:70,column:25}},30:{start:{line:72,column:6},end:{line:72,column:24}},31:{start:{line:75,column:2},end:{line:75,column:20}}},fnMap:{0:{name:"changeType",decl:{start:{line:2,column:16},end:{line:2,column:26}},loc:{start:{line:2,column:43},end:{line:21,column:1}},line:2},1:{name:"(anonymous_1)",decl:{start:{line:4,column:41},end:{line:4,column:42}},loc:{start:{line:4,column:59},end:{line:8,column:3}},line:4},2:{name:"(anonymous_2)",decl:{start:{line:10,column:42},end:{line:10,column:43}},loc:{start:{line:10,column:60},end:{line:14,column:3}},line:10},3:{name:"changeProperty",decl:{start:{line:22,column:16},end:{line:22,column:30}},loc:{start:{line:22,column:65},end:{line:60,column:1}},line:22},4:{name:"layerPrefix",decl:{start:{line:61,column:16},end:{line:61,column:27}},loc:{start:{line:61,column:34},end:{line:63,column:1}},line:61},5:{name:"findClosestCommonPrefix",decl:{start:{line:64,column:16},end:{line:64,column:39}},loc:{start:{line:64,column:53},end:{line:76,column:1}},line:64}},branchMap:{0:{loc:{start:{line:5,column:4},end:{line:7,column:5}},type:"if",locations:[{start:{line:5,column:4},end:{line:7,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:5},1:{loc:{start:{line:11,column:4},end:{line:13,column:5}},type:"if",locations:[{start:{line:11,column:4},end:{line:13,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:11},2:{loc:{start:{line:23,column:2},end:{line:59,column:3}},type:"if",locations:[{start:{line:23,column:2},end:{line:59,column:3}},{start:{line:44,column:9},end:{line:59,column:3}}],line:23},3:{loc:{start:{line:24,column:4},end:{line:43,column:5}},type:"if",locations:[{start:{line:24,column:4},end:{line:43,column:5}},{start:{line:37,column:11},end:{line:43,column:5}}],line:24},4:{loc:{start:{line:33,column:6},end:{line:35,column:7}},type:"if",locations:[{start:{line:33,column:6},end:{line:35,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:33},5:{loc:{start:{line:45,column:4},end:{line:58,column:5}},type:"if",locations:[{start:{line:45,column:4},end:{line:58,column:5}},{start:{line:53,column:11},end:{line:58,column:5}}],line:45},6:{loc:{start:{line:69,column:4},end:{line:73,column:5}},type:"if",locations:[{start:{line:69,column:4},end:{line:73,column:5}},{start:{line:71,column:11},end:{line:73,column:5}}],line:69}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/layer.ts"],names:[],mappings:"AAAA,SAAQ,cAAa;AAId,gBAAS,WAAW,OAA2B,SAAqC;AACzF,QAAM,oBAAiD,EAAE,GAAG,MAAM,MAAM;AACxE,SAAO,KAAK,iBAAiB,EAAE,QAAQ,kBAAgB;AACrD,QAAG,EAAE,gBAAgB,OAAO,WAAW,OAAO,IAAI;AAChD,aAAO,kBAAkB,YAAiD;AAAA,IAC5E;AAAA,EACF,CAAC;AAED,QAAM,qBAAmD,EAAE,GAAG,MAAM,OAAO;AAC3E,SAAO,KAAK,kBAAkB,EAAE,QAAQ,kBAAgB;AACtD,QAAG,EAAE,gBAAgB,OAAO,YAAY,OAAO,IAAI;AACjD,aAAO,mBAAmB,YAAkD;AAAA,IAC9E;AAAA,EACF,CAAC;AAED,SAAO;AAAA,IACL,GAAG;AAAA,IACH,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,MAAM;AAAA,EACR;AACF;AAKO,gBAAS,eAAe,OAA2B,OAAwC,UAAkB,UAAe;AAEjI,MAAG,aAAa,QAAW;AACzB,QAAG,OAAO;AACR,YAAM,WAAgB;AAAA,QACpB,GAAG;AAAA;AAAA,QAEH,CAAC,KAAK,GAAG;AAAA,UACP,GAAG,MAAM,KAAK;AAAA,QAChB;AAAA,MACF;AACA,aAAO,SAAS,KAAK,EAAE,QAAQ;AAG/B,UAAG,OAAO,KAAK,SAAS,KAAK,CAAC,EAAE,SAAS,GAAG;AAC1C,eAAO,SAAS,KAAK;AAAA,MACvB;AACA,aAAO;AAAA,IACT,OAAO;AACL,YAAM,WAAgB;AAAA,QACpB,GAAG;AAAA,MACL;AACA,aAAO,SAAS,QAAQ;AACxB,aAAO;AAAA,IACT;AAAA,EACF,OACK;AACH,QAAG,OAAO;AACR,aAAO;AAAA,QACL,GAAG;AAAA,QACH,CAAC,KAAK,GAAG;AAAA,UACP,GAAG,MAAM,KAAK;AAAA,UACd,CAAC,QAAQ,GAAG;AAAA,QACd;AAAA,MACF;AAAA,IACF,OAAO;AACL,aAAO;AAAA,QACL,GAAG;AAAA,QACH,CAAC,QAAQ,GAAG;AAAA,MACd;AAAA,IACF;AAAA,EACF;AACF;AAEO,gBAAS,YAAY,MAAc;AACxC,SAAO,KAAK,QAAQ,KAAK,GAAG,EAAE,QAAQ,KAAK,GAAG,EAAE,MAAM,GAAG,EAAE,CAAC;AAC9D;AAEO,gBAAS,wBAAwB,QAA8B,KAAa;AACjF,QAAM,qBAAqB,YAAY,OAAO,GAAG,EAAE,EAAE;AACrD,MAAI,aAAa;AACjB,WAAS,IAAI,KAAK,IAAI,GAAG,KAAK;AAC5B,UAAM,sBAAsB,YAAY,OAAO,IAAE,CAAC,EAAE,EAAE;AACtD,QAAG,wBAAwB,oBAAoB;AAC7C,mBAAa,IAAI;AAAA,IACnB,OAAO;AACL,aAAO;AAAA,IACT;AAAA,EACF;AACA,SAAO;AACT;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"6a81b3c8ffc06f88598225aa1f9b90e3bb6da08e"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return lr=function(){return s},s}lr();function i7e(n,e){lr().f[0]++;const t=(lr().s[0]++,{...n.paint});lr().s[1]++,Object.keys(t).forEach(r=>{lr().f[1]++,lr().s[2]++,r in ts["paint_"+e]?lr().b[0][1]++:(lr().b[0][0]++,lr().s[3]++,delete t[r])});const i=(lr().s[4]++,{...n.layout});return lr().s[5]++,Object.keys(i).forEach(r=>{lr().f[2]++,lr().s[6]++,r in ts["layout_"+e]?lr().b[1][1]++:(lr().b[1][0]++,lr().s[7]++,delete i[r])}),lr().s[8]++,{...n,paint:t,layout:i,type:e}}function r7e(n,e,t,i){if(lr().f[3]++,lr().s[9]++,i===void 0)if(lr().b[2][0]++,lr().s[10]++,e){lr().b[3][0]++;const r=(lr().s[11]++,{...n,[e]:{...n[e]}});return lr().s[12]++,delete r[e][t],lr().s[13]++,Object.keys(r[e]).length<1?(lr().b[4][0]++,lr().s[14]++,delete r[e]):lr().b[4][1]++,lr().s[15]++,r}else{lr().b[3][1]++;const r=(lr().s[16]++,{...n});return lr().s[17]++,delete r[t],lr().s[18]++,r}else return lr().b[2][1]++,lr().s[19]++,e?(lr().b[5][0]++,lr().s[20]++,{...n,[e]:{...n[e],[t]:i}}):(lr().b[5][1]++,lr().s[21]++,{...n,[t]:i})}function K_(n){return lr().f[4]++,lr().s[22]++,n.replace(" ","-").replace("_","-").split("-")[0]}function o7e(n,e){lr().f[5]++;const t=(lr().s[23]++,K_(n[e].id));let i=(lr().s[24]++,e);lr().s[25]++;for(let r=(lr().s[26]++,e);r>0;r--){const o=(lr().s[27]++,K_(n[r-1].id));if(lr().s[28]++,o===t)lr().b[6][0]++,lr().s[29]++,i=r-1;else return lr().b[6][1]++,lr().s[30]++,i}return lr().s[31]++,i}function Ft(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerList.tsx",e="3031fd34f43c8d651f443f714d2dfaaa5f809423",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/LayerList.tsx",statementMap:{0:{start:{line:23,column:24},end:{line:26,column:3}},1:{start:{line:30,column:4},end:{line:30,column:17}},2:{start:{line:31,column:4},end:{line:31,column:45}},3:{start:{line:32,column:4},end:{line:32,column:48}},4:{start:{line:33,column:4},end:{line:42,column:6}},5:{start:{line:45,column:4},end:{line:54,column:7}},6:{start:{line:56,column:17},end:{line:73,column:3}},7:{start:{line:57,column:14},end:{line:57,column:15}},8:{start:{line:58,column:22},end:{line:58,column:24}},9:{start:{line:59,column:4},end:{line:68,column:7}},10:{start:{line:60,column:26},end:{line:60,column:51}},11:{start:{line:61,column:24},end:{line:61,column:52}},12:{start:{line:62,column:6},end:{line:64,column:7}},13:{start:{line:63,column:8},end:{line:63,column:63}},14:{start:{line:65,column:6},end:{line:67,column:9}},15:{start:{line:66,column:8},end:{line:66,column:17}},16:{start:{line:69,column:4},end:{line:72,column:7}},17:{start:{line:75,column:19},end:{line:75,column:21}},18:{start:{line:76,column:41},end:{line:76,column:50}},19:{start:{line:77,column:4},end:{line:94,column:5}},20:{start:{line:77,column:17},end:{line:77,column:18}},21:{start:{line:78,column:24},end:{line:78,column:44}},22:{start:{line:79,column:28},end:{line:79,column:52}},23:{start:{line:80,column:6},end:{line:83,column:8}},24:{start:{line:84,column:20},end:{line:87,column:7}},25:{start:{line:88,column:6},end:{line:93,column:7}},26:{start:{line:89,column:26},end:{line:89,column:51}},27:{start:{line:90,column:8},end:{line:90,column:30}},28:{start:{line:92,column:8},end:{line:92,column:29}},29:{start:{line:95,column:4},end:{line:95,column:18}},30:{start:{line:98,column:22},end:{line:98,column:50}},31:{start:{line:99,column:22},end:{line:99,column:55}},32:{start:{line:100,column:4},end:{line:104,column:5}},33:{start:{line:101,column:6},end:{line:101,column:68}},34:{start:{line:103,column:6},end:{line:103,column:35}},35:{start:{line:105,column:4},end:{line:107,column:7}},36:{start:{line:110,column:22},end:{line:110,column:78}},37:{start:{line:111,column:4},end:{line:111,column:51}},38:{start:{line:114,column:4},end:{line:116,column:5}},39:{start:{line:115,column:6},end:{line:115,column:18}},40:{start:{line:118,column:18},end:{line:120,column:7}},41:{start:{line:121,column:6},end:{line:125,column:7}},42:{start:{line:122,column:8},end:{line:124,column:10}},43:{start:{line:126,column:6},end:{line:126,column:17}},44:{start:{line:128,column:24},end:{line:131,column:5}},45:{start:{line:133,column:18},end:{line:135,column:7}},46:{start:{line:136,column:6},end:{line:136,column:27}},47:{start:{line:137,column:6},end:{line:137,column:17}},48:{start:{line:139,column:23},end:{line:142,column:5}},49:{start:{line:143,column:25},end:{line:143,column:53}},50:{start:{line:144,column:4},end:{line:144,column:24}},51:{start:{line:147,column:4},end:{line:163,column:5}},52:{start:{line:148,column:31},end:{line:148,column:59}},53:{start:{line:149,column:6},end:{line:162,column:7}},54:{start:{line:150,column:23},end:{line:150,column:44}},55:{start:{line:151,column:24},end:{line:154,column:9}},56:{start:{line:155,column:25},end:{line:160,column:19}},57:{start:{line:156,column:10},end:{line:156,column:37}},58:{start:{line:157,column:10},end:{line:159,column:11}},59:{start:{line:158,column:12},end:{line:158,column:36}},60:{start:{line:161,column:8},end:{line:161,column:33}},61:{start:{line:166,column:22},end:{line:166,column:24}},62:{start:{line:167,column:14},end:{line:167,column:15}},63:{start:{line:168,column:26},end:{line:168,column:46}},64:{start:{line:169,column:4},end:{line:219,column:7}},65:{start:{line:170,column:26},end:{line:170,column:51}},66:{start:{line:171,column:6},end:{line:184,column:7}},67:{start:{line:172,column:36},end:{line:182,column:9}},68:{start:{line:176,column:47},end:{line:176,column:52}},69:{start:{line:183,column:8},end:{line:183,column:28}},70:{start:{line:185,column:6},end:{line:218,column:9}},71:{start:{line:186,column:25},end:{line:186,column:72}},72:{start:{line:187,column:27},end:{line:189,column:10}},73:{start:{line:188,column:10},end:{line:188,column:97}},74:{start:{line:190,column:32},end:{line:190,column:34}},75:{start:{line:191,column:8},end:{line:193,column:9}},76:{start:{line:192,column:10},end:{line:192,column:53}},77:{start:{line:194,column:41},end:{line:215,column:9}},78:{start:{line:216,column:8},end:{line:216,column:33}},79:{start:{line:217,column:8},end:{line:217,column:17}},80:{start:{line:220,column:14},end:{line:220,column:26}},81:{start:{line:221,column:4},end:{line:274,column:6}},82:{start:{line:277,column:27},end:{line:277,column:72}},83:{start:{line:278,column:18},end:{line:291,column:1}},84:{start:{line:279,column:18},end:{line:279,column:97}},85:{start:{line:280,column:24},end:{line:288,column:3}},86:{start:{line:281,column:29},end:{line:281,column:34}},87:{start:{line:282,column:4},end:{line:282,column:22}},88:{start:{line:282,column:15},end:{line:282,column:22}},89:{start:{line:283,column:21},end:{line:283,column:78}},90:{start:{line:283,column:55},end:{line:283,column:77}},91:{start:{line:284,column:21},end:{line:284,column:76}},92:{start:{line:284,column:55},end:{line:284,column:75}},93:{start:{line:285,column:4},end:{line:287,column:5}},94:{start:{line:286,column:6},end:{line:286,column:48}},95:{start:{line:289,column:19},end:{line:289,column:56}},96:{start:{line:289,column:47},end:{line:289,column:55}},97:{start:{line:290,column:2},end:{line:290,column:288}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:24,column:19},end:{line:24,column:20}},loc:{start:{line:24,column:25},end:{line:25,column:5}},line:24},1:{name:"(anonymous_1)",decl:{start:{line:29,column:2},end:{line:29,column:3}},loc:{start:{line:29,column:21},end:{line:43,column:3}},line:29},2:{name:"(anonymous_2)",decl:{start:{line:44,column:2},end:{line:44,column:3}},loc:{start:{line:44,column:25},end:{line:55,column:3}},line:44},3:{name:"(anonymous_3)",decl:{start:{line:56,column:17},end:{line:56,column:18}},loc:{start:{line:56,column:23},end:{line:73,column:3}},line:56},4:{name:"(anonymous_4)",decl:{start:{line:59,column:33},end:{line:59,column:34}},loc:{start:{line:59,column:45},end:{line:68,column:5}},line:59},5:{name:"(anonymous_5)",decl:{start:{line:65,column:21},end:{line:65,column:22}},loc:{start:{line:65,column:33},end:{line:67,column:7}},line:65},6:{name:"(anonymous_6)",decl:{start:{line:74,column:2},end:{line:74,column:3}},loc:{start:{line:74,column:18},end:{line:96,column:3}},line:74},7:{name:"(anonymous_7)",decl:{start:{line:97,column:2},end:{line:97,column:3}},loc:{start:{line:97,column:37},end:{line:108,column:3}},line:97},8:{name:"(anonymous_8)",decl:{start:{line:109,column:2},end:{line:109,column:3}},loc:{start:{line:109,column:32},end:{line:112,column:3}},line:109},9:{name:"(anonymous_9)",decl:{start:{line:113,column:2},end:{line:113,column:3}},loc:{start:{line:113,column:46},end:{line:145,column:3}},line:113},10:{name:"getRequiredProps",decl:{start:{line:117,column:13},end:{line:117,column:29}},loc:{start:{line:117,column:37},end:{line:127,column:5}},line:117},11:{name:"withoutLayers",decl:{start:{line:132,column:13},end:{line:132,column:26}},loc:{start:{line:132,column:34},end:{line:138,column:5}},line:132},12:{name:"(anonymous_12)",decl:{start:{line:146,column:2},end:{line:146,column:3}},loc:{start:{line:146,column:32},end:{line:164,column:3}},line:146},13:{name:"(anonymous_13)",decl:{start:{line:155,column:50},end:{line:155,column:51}},loc:{start:{line:155,column:63},end:{line:160,column:9}},line:155},14:{name:"(anonymous_14)",decl:{start:{line:165,column:2},end:{line:165,column:3}},loc:{start:{line:165,column:11},end:{line:275,column:3}},line:165},15:{name:"(anonymous_15)",decl:{start:{line:169,column:26},end:{line:169,column:27}},loc:{start:{line:169,column:38},end:{line:219,column:5}},line:169},16:{name:"(anonymous_16)",decl:{start:{line:176,column:40},end:{line:176,column:41}},loc:{start:{line:176,column:47},end:{line:176,column:52}},line:176},17:{name:"(anonymous_17)",decl:{start:{line:185,column:21},end:{line:185,column:22}},loc:{start:{line:185,column:44},end:{line:218,column:7}},line:185},18:{name:"(anonymous_18)",decl:{start:{line:187,column:50},end:{line:187,column:51}},loc:{start:{line:187,column:61},end:{line:189,column:9}},line:187},19:{name:"(anonymous_19)",decl:{start:{line:278,column:18},end:{line:278,column:19}},loc:{start:{line:278,column:29},end:{line:291,column:1}},line:278},20:{name:"(anonymous_20)",decl:{start:{line:280,column:24},end:{line:280,column:25}},loc:{start:{line:280,column:35},end:{line:288,column:3}},line:280},21:{name:"(anonymous_21)",decl:{start:{line:283,column:44},end:{line:283,column:45}},loc:{start:{line:283,column:55},end:{line:283,column:77}},line:283},22:{name:"(anonymous_22)",decl:{start:{line:284,column:44},end:{line:284,column:45}},loc:{start:{line:284,column:55},end:{line:284,column:75}},line:284},23:{name:"(anonymous_23)",decl:{start:{line:289,column:36},end:{line:289,column:37}},loc:{start:{line:289,column:47},end:{line:289,column:55}},line:289}},branchMap:{0:{loc:{start:{line:62,column:6},end:{line:64,column:7}},type:"if",locations:[{start:{line:62,column:6},end:{line:64,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:62},1:{loc:{start:{line:82,column:8},end:{line:82,column:79}},type:"cond-expr",locations:[{start:{line:82,column:41},end:{line:82,column:75}},{start:{line:82,column:78},end:{line:82,column:79}}],line:82},2:{loc:{start:{line:88,column:6},end:{line:93,column:7}},type:"if",locations:[{start:{line:88,column:6},end:{line:93,column:7}},{start:{line:91,column:13},end:{line:93,column:7}}],line:88},3:{loc:{start:{line:88,column:10},end:{line:88,column:81}},type:"binary-expr",locations:[{start:{line:88,column:10},end:{line:88,column:23}},{start:{line:88,column:27},end:{line:88,column:81}}],line:88},4:{loc:{start:{line:100,column:4},end:{line:104,column:5}},type:"if",locations:[{start:{line:100,column:4},end:{line:104,column:5}},{start:{line:102,column:11},end:{line:104,column:5}}],line:100},5:{loc:{start:{line:111,column:11},end:{line:111,column:50}},type:"cond-expr",locations:[{start:{line:111,column:34},end:{line:111,column:38}},{start:{line:111,column:41},end:{line:111,column:50}}],line:111},6:{loc:{start:{line:114,column:4},end:{line:116,column:5}},type:"if",locations:[{start:{line:114,column:4},end:{line:116,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:114},7:{loc:{start:{line:121,column:6},end:{line:125,column:7}},type:"if",locations:[{start:{line:121,column:6},end:{line:125,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:121},8:{loc:{start:{line:143,column:27},end:{line:143,column:52}},type:"binary-expr",locations:[{start:{line:143,column:27},end:{line:143,column:38}},{start:{line:143,column:42},end:{line:143,column:52}}],line:143},9:{loc:{start:{line:147,column:4},end:{line:163,column:5}},type:"if",locations:[{start:{line:147,column:4},end:{line:163,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:147},10:{loc:{start:{line:149,column:6},end:{line:162,column:7}},type:"if",locations:[{start:{line:149,column:6},end:{line:162,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:149},11:{loc:{start:{line:149,column:10},end:{line:149,column:51}},type:"binary-expr",locations:[{start:{line:149,column:10},end:{line:149,column:26}},{start:{line:149,column:30},end:{line:149,column:51}}],line:149},12:{loc:{start:{line:157,column:10},end:{line:159,column:11}},type:"if",locations:[{start:{line:157,column:10},end:{line:159,column:11}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:157},13:{loc:{start:{line:157,column:14},end:{line:157,column:68}},type:"binary-expr",locations:[{start:{line:157,column:14},end:{line:157,column:32}},{start:{line:157,column:36},end:{line:157,column:68}}],line:157},14:{loc:{start:{line:171,column:6},end:{line:184,column:7}},type:"if",locations:[{start:{line:171,column:6},end:{line:184,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:171},15:{loc:{start:{line:178,column:22},end:{line:178,column:98}},type:"binary-expr",locations:[{start:{line:178,column:22},end:{line:178,column:57}},{start:{line:178,column:61},end:{line:178,column:98}}],line:178},16:{loc:{start:{line:188,column:17},end:{line:188,column:96}},type:"binary-expr",locations:[{start:{line:188,column:17},end:{line:188,column:29}},{start:{line:188,column:33},end:{line:188,column:62}},{start:{line:188,column:66},end:{line:188,column:96}}],line:188},17:{loc:{start:{line:191,column:8},end:{line:193,column:9}},type:"if",locations:[{start:{line:191,column:8},end:{line:193,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:191},18:{loc:{start:{line:198,column:52},end:{line:198,column:153}},type:"binary-expr",locations:[{start:{line:198,column:52},end:{line:198,column:69}},{start:{line:198,column:73},end:{line:198,column:112}},{start:{line:198,column:116},end:{line:198,column:153}}],line:198},19:{loc:{start:{line:199,column:53},end:{line:199,column:105}},type:"binary-expr",locations:[{start:{line:199,column:53},end:{line:199,column:84}},{start:{line:199,column:88},end:{line:199,column:105}}],line:199},20:{loc:{start:{line:206,column:25},end:{line:206,column:43}},type:"binary-expr",locations:[{start:{line:206,column:25},end:{line:206,column:37}},{start:{line:206,column:41},end:{line:206,column:43}}],line:206},21:{loc:{start:{line:251,column:26},end:{line:251,column:96}},type:"cond-expr",locations:[{start:{line:251,column:69},end:{line:251,column:82}},{start:{line:251,column:85},end:{line:251,column:96}}],line:251},22:{loc:{start:{line:282,column:4},end:{line:282,column:22}},type:"if",locations:[{start:{line:282,column:4},end:{line:282,column:22}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:282},23:{loc:{start:{line:285,column:4},end:{line:287,column:5}},type:"if",locations:[{start:{line:285,column:4},end:{line:287,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:285},24:{loc:{start:{line:285,column:8},end:{line:285,column:67}},type:"binary-expr",locations:[{start:{line:285,column:8},end:{line:285,column:23}},{start:{line:285,column:27},end:{line:285,column:42}},{start:{line:285,column:46},end:{line:285,column:67}}],line:285}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0,87:0,88:0,89:0,90:0,91:0,92:0,93:0,94:0,95:0,96:0,97:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0,0],17:[0,0],18:[0,0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerList.tsx"],names:[],mappings:"AA+NoB,cAoEd,YApEc;AA/NpB,OAAO,WAAuB;AAC9B,OAAO,gBAAgB;AACvB,OAAO,YAAY;AACnB;AAAA,EACE;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,OAEK;AACP;AAAA,EACE;AAAA,EACA;AAAA,OACK;AAEP,OAAO,oBAAoB;AAC3B,OAAO,mBAAmB;AAC1B,OAAO,cAAc;AAGrB,OAAO,sBAAsB;AAC7B,SAAS,yBAAyB,mBAAmB;AACrD,SAA+B,uBAAuB;AAwBtD,MAAM,mCAAmC,MAAM,UAAoE;AAAA,EACjH,OAAO,eAAe;AAAA,IACpB,eAAe,MAAM;AAAA,IAAC;AAAA,EACxB;AAAA,EACA;AAAA,EACA;AAAA,EAEA,YAAY,OAAwC;AAClD,UAAM,KAAK;AACX,SAAK,kBAAkB,MAAM,UAAU;AACvC,SAAK,qBAAqB,MAAM,UAAU;AAC1C,SAAK,QAAQ;AAAA,MACX,iBAAiB,CAAC;AAAA,MAClB,sBAAsB;AAAA,MACtB,MAAM;AAAA,QACJ,KAAK,CAAC,iBAAiB;AAAA,MACzB;AAAA,MACA,QAAQ;AAAA,QACN,KAAK;AAAA,MACP;AAAA,IACF;AAAA,EACF;AAAA,EAEA,YAAY,WAAmB;AAC7B,SAAK,SAAS;AAAA,MACZ,MAAM;AAAA,QACJ,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,SAAS,GAAG,CAAC,iBAAiB;AAAA,MACjC;AAAA,MACA,QAAQ;AAAA,QACN,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,SAAS,GAAG,CAAC,KAAK,MAAM,OAAO,SAAS;AAAA,MAC3C;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,eAAe,MAAM;AACnB,QAAI,MAAM;AAEV,UAAM,YAAqC,CAAC;AAE5C,SAAK,cAAc,EAAE,QAAQ,YAAU;AACrC,YAAM,cAAc,YAAY,OAAO,CAAC,EAAE,EAAE;AAC5C,YAAM,YAAY,CAAC,aAAa,GAAG,EAAE,KAAK,GAAG;AAG7C,UAAI,OAAO,SAAS,GAAG;AACrB,kBAAU,SAAS,IAAI,KAAK,MAAM;AAAA,MACpC;AAEA,aAAO,QAAQ,CAAC,WAAW;AACzB,eAAO;AAAA,MACT,CAAC;AAAA,IACH,CAAC;AAED,SAAK,SAAS;AAAA,MACZ,iBAAiB;AAAA,MACjB,sBAAsB,CAAC,KAAK,MAAM;AAAA,IACpC,CAAC;AAAA,EACH;AAAA,EAEA,gBAA0D;AACxD,UAAM,SAAS,CAAC;AAChB,UAAM,eAAe,oBAAI,IAAI;AAE7B,aAAS,IAAI,GAAG,IAAI,KAAK,MAAM,OAAO,QAAQ,KAAK;AACjD,YAAM,YAAY,KAAK,MAAM,OAAO,CAAC;AACrC,YAAM,gBAAgB,KAAK,MAAM,OAAO,IAAE,CAAC;AAC3C,mBAAa;AAAA,QAAI,UAAU;AAAA,QACzB,aAAa,IAAI,UAAU,EAAE,IAAI,aAAa,IAAI,UAAU,EAAE,IAAI,IAAI;AAAA,MACxE;AACA,YAAM,QAAQ;AAAA,QACZ,GAAG;AAAA,QACH,KAAK,eAAe,UAAU,EAAE,IAAI,aAAa,IAAI,UAAU,EAAE,CAAC;AAAA,MACpE;AACA,UAAG,iBAAiB,YAAY,cAAc,EAAE,KAAK,YAAY,MAAM,EAAE,GAAG;AAC1E,cAAM,YAAY,OAAO,OAAO,SAAS,CAAC;AAC1C,kBAAU,KAAK,KAAK;AAAA,MACtB,OAAO;AACL,eAAO,KAAK,CAAC,KAAK,CAAC;AAAA,MACrB;AAAA,IACF;AACA,WAAO;AAAA,EACT;AAAA,EAEA,iBAAiB,aAAqB,KAAa;AACjD,UAAM,YAAY,CAAC,aAAa,GAAG,EAAE,KAAK,GAAG;AAC7C,UAAM,YAAY,EAAE,GAAG,KAAK,MAAM,gBAAgB;AAClD,QAAG,aAAa,KAAK,MAAM,iBAAiB;AAC1C,gBAAU,SAAS,IAAI,CAAC,KAAK,MAAM,gBAAgB,SAAS;AAAA,IAC9D,OAAO;AACL,gBAAU,SAAS,IAAI;AAAA,IACzB;AACA,SAAK,SAAS;AAAA,MACZ,iBAAiB;AAAA,IACnB,CAAC;AAAA,EACH;AAAA,EAEA,YAAY,aAAqB,KAAa;AAC5C,UAAM,YAAY,KAAK,MAAM,gBAAgB,CAAC,aAAa,GAAG,EAAE,KAAK,GAAG,CAAC;AACzE,WAAO,cAAc,SAAY,OAAO;AAAA,EAC1C;AAAA,EAEA,sBAAuB,WAAoC,WAAoC;AAE7F,QAAI,KAAK,UAAU,WAAW;AAC5B,aAAO;AAAA,IACT;AAIA,aAAS,iBAAiB,OAA2B;AACnD,YAAM,MAAiD;AAAA,QACrD,IAAI,MAAM;AAAA,MACZ;AAEA,UAAI,MAAM,QAAQ;AAChB,YAAI,SAAS;AAAA,UACX,YAAY,MAAM,OAAO;AAAA,QAC3B;AAAA,MACF;AACA,aAAO;AAAA,IACT;AACA,UAAM,cAAc,OAAO;AAAA,MACzB,UAAU,OAAO,IAAI,gBAAgB;AAAA,MACrC,KAAK,MAAM,OAAO,IAAI,gBAAgB;AAAA,IACxC;AAEA,aAAS,cAAc,OAAgC;AACrD,YAAM,MAAM;AAAA,QACV,GAAG;AAAA,MACL;AACA,aAAO,IAAI,QAAQ;AACnB,aAAO;AAAA,IACT;AAIA,UAAM,aAAa,OAAO;AAAA,MACxB,cAAc,KAAK,KAAK;AAAA,MACxB,cAAc,SAAS;AAAA,IACzB;AAEA,UAAM,eAAe,EAAE,eAAe;AACtC,WAAO;AAAA,EACT;AAAA,EAEA,mBAAoB,WAAoC;AACtD,QAAI,UAAU,uBAAuB,KAAK,MAAM,oBAAoB;AAClE,YAAM,mBAAmB,KAAK,gBAAgB;AAC9C,UAAI,oBAAoB,iBAAiB,MAAM;AAC7C,cAAM,SAAS,iBAAiB;AAChC,cAAM,UAAU;AAAA,UACd,MAAM,KAAK,mBAAmB;AAAA,UAC9B,WAAW;AAAA,QACb;AACA,cAAM,WAAW,IAAI,qBAAqB,aAAW;AACnD,mBAAS,UAAU,MAAM;AACzB,cAAI,QAAQ,SAAS,KAAK,QAAQ,CAAC,EAAE,oBAAoB,GAAG;AAC1D,mBAAO,eAAe;AAAA,UACxB;AAAA,QACF,GAAG,OAAO;AAEV,iBAAS,QAAQ,MAAM;AAAA,MACzB;AAAA,IACF;AAAA,EACF;AAAA,EAEA,SAAS;AAEP,UAAM,YAA2B,CAAC;AAClC,QAAI,MAAM;AACV,UAAM,gBAAgB,KAAK,cAAc;AACzC,kBAAc,QAAQ,YAAU;AAC9B,YAAM,cAAc,YAAY,OAAO,CAAC,EAAE,EAAE;AAC5C,UAAG,OAAO,SAAS,GAAG;AACpB,cAAM,MAAM;AAAA,UAAC;AAAA;AAAA,YACX,eAAa,CAAC,aAAa,GAAG,EAAE,KAAK,GAAG;AAAA,YACxC,iBAAe,OAAO,IAAI,OAAK,EAAE,GAAG,EAAE,KAAK,GAAG;AAAA,YAE9C,OAAO;AAAA,YACP,UAAU,CAAC,KAAK,YAAY,aAAa,GAAG,KAAK,QAAQ,KAAK,MAAM;AAAA,YACpE,gBAAgB,KAAK,iBAAiB,KAAK,MAAM,aAAa,GAAG;AAAA;AAAA,UAH5D,SAAS,WAAW,IAAI,GAAG;AAAA,QAIlC;AACA,kBAAU,KAAK,GAAG;AAAA,MACpB;AAEA,aAAO,QAAQ,CAAC,OAAO,eAAe;AACpC,cAAM,WAAW,wBAAwB,KAAK,MAAM,QAAQ,GAAG;AAE/D,cAAM,aAAa,KAAK,MAAM,OAAO,KAAK,WAAS;AACjD,iBACE,MAAM,UACN,MAAM,OAAO,SAAS,WACtB,MAAM,OAAO,KAAK,SAAS;AAAA,QAE/B,CAAC;AAED,cAAM,kBAAgD,CAAC;AACvD,YAAI,QAAQ,KAAK,MAAM,oBAAoB;AACzC,0BAAgB,MAAM,KAAK;AAAA,QAC7B;AAEA,cAAM,WAAW;AAAA,UAAC;AAAA;AAAA,YAChB,WAAW,WAAW;AAAA,cACpB,sCAAsC,OAAO,SAAS,KAAK,KAAK,YAAY,aAAa,QAAQ,KAAK,QAAQ,KAAK,MAAM;AAAA,cACzH,uCAAuC,cAAc,OAAO,SAAS,KAAK,OAAO,SAAS;AAAA,cAC1F,mCAAmC,CAAC,CAAC;AAAA,YACvC,CAAC;AAAA,YAED,IAAI,MAAM;AAAA,YACV,SAAS,MAAM;AAAA,YACf,YAAY;AAAA,YACZ,WAAW,MAAM;AAAA,YACjB,aAAa,MAAM,UAAU,CAAC,GAAG;AAAA,YACjC,YAAY,QAAQ,KAAK,MAAM;AAAA,YAC/B,eAAe,KAAK,MAAM;AAAA,YAC1B,gBAAgB,KAAK,MAAM,gBAAgB,KAAK,IAAI;AAAA,YACpD,aAAa,KAAK,MAAM,YAAY,KAAK,IAAI;AAAA,YAC7C,yBAAyB,KAAK,MAAM,wBAAwB,KAAK,IAAI;AAAA,YACpE,GAAG;AAAA;AAAA,UAXC,MAAM;AAAA,QAYb;AACA,kBAAU,KAAK,QAAQ;AACvB,eAAO;AAAA,MACT,CAAC;AAAA,IACH,CAAC;AAED,UAAM,IAAI,KAAK,MAAM;AAErB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,eAAY;AAAA,QACZ,MAAK;AAAA,QACL,cAAY,EAAE,aAAa;AAAA,QAC3B,KAAK,KAAK;AAAA,QAEV;AAAA;AAAA,YAAC;AAAA;AAAA,cAEC,QAAQ,KAAK,MAAM;AAAA,cACnB,SAAS,KAAK,MAAM;AAAA,cACpB,QAAQ,KAAK,MAAM,OAAO;AAAA,cAC1B,cAAc,KAAK,YAAY,KAAK,MAAM,KAAK;AAAA,cAC/C,gBAAgB,KAAK,MAAM;AAAA;AAAA,YALtB,KAAK,MAAM,KAAK;AAAA,UAMvB;AAAA,UACA,qBAAC,YAAO,WAAU,8BAA6B,eAAY,qBACzD;AAAA,gCAAC,UAAK,WAAU,oCAAoC,YAAE,QAAQ,GAAE;AAAA,YAChE,oBAAC,UAAK,WAAU,kBAAiB;AAAA,YACjC,oBAAC,SAAI,WAAU,6BACb,8BAAC,SAAI,WAAU,wBACb;AAAA,cAAC;AAAA;AAAA,gBACC,IAAG;AAAA,gBACH,eAAY;AAAA,gBACZ,SAAS,KAAK;AAAA,gBACd,WAAU;AAAA,gBACT,eAAK,MAAM,yBAAyB,OACnC,EAAE,UAAU,IAEZ,EAAE,QAAQ;AAAA;AAAA,YAEd,GACF,GACF;AAAA,YACA,oBAAC,SAAI,WAAU,6BACb,8BAAC,SAAI,WAAU,wBACb;AAAA,cAAC;AAAA;AAAA,gBACC,SAAS,KAAK,YAAY,KAAK,MAAM,KAAK;AAAA,gBAC1C,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACT,YAAE,WAAW;AAAA;AAAA,YAChB,GACF,GACF;AAAA,aACF;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,MAAK;AAAA,cACL,cAAY,EAAE,aAAa;AAAA,cAE3B,8BAAC,QAAG,WAAU,iCACX,qBACH;AAAA;AAAA,UACF;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,qBAAqB,gBAAgB,EAAE,0BAA0B;AAMvE,MAAM,YAAsC,CAAC,UAAU;AACrD,QAAM,UAAU,WAAW,UAAU,eAAe,EAAE,sBAAsB,EAAE,UAAU,EAAE,EAAE,CAAC,CAAC;AAE9F,QAAM,gBAAgB,CAAC,UAAwB;AAC7C,UAAM,EAAC,QAAQ,KAAI,IAAI;AACvB,QAAI,CAAC,KAAM;AAEX,UAAM,WAAW,MAAM,OAAO,UAAU,WAAS,MAAM,OAAO,OAAO,EAAE;AACvE,UAAM,WAAW,MAAM,OAAO,UAAU,WAAS,MAAM,OAAO,KAAK,EAAE;AAErE,QAAI,aAAa,MAAM,aAAa,MAAM,aAAa,UAAU;AAC/D,YAAM,YAAY,EAAC,UAAU,SAAQ,CAAC;AAAA,IACxC;AAAA,EACF;AAEA,QAAM,WAAW,MAAM,OAAO,IAAI,WAAS,MAAM,EAAE;AAEnD,SACE,oBAAC,cAAW,SAAkB,oBAAoB,eAAe,WAAW,eAC1E,8BAAC,mBAAgB,OAAO,UAAU,UAAU,6BAC1C,8BAAC,sBAAoB,GAAG,OAAO,GACjC,GACF;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"3031fd34f43c8d651f443f714d2dfaaa5f809423"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Ft=function(){return s},s}Ft();class s7e extends On.Component{static defaultProps=(Ft().s[0]++,{onLayerSelect:()=>{Ft().f[0]++}});selectedItemRef;scrollContainerRef;constructor(e){Ft().f[1]++,Ft().s[1]++,super(e),Ft().s[2]++,this.selectedItemRef=On.createRef(),Ft().s[3]++,this.scrollContainerRef=On.createRef(),Ft().s[4]++,this.state={collapsedGroups:{},areAllGroupsExpanded:!1,keys:{add:+kx()},isOpen:{add:!1}}}toggleModal(e){Ft().f[2]++,Ft().s[5]++,this.setState({keys:{...this.state.keys,[e]:+kx()},isOpen:{...this.state.isOpen,[e]:!this.state.isOpen[e]}})}toggleLayers=(Ft().s[6]++,()=>{Ft().f[3]++;let e=(Ft().s[7]++,0);const t=(Ft().s[8]++,{});Ft().s[9]++,this.groupedLayers().forEach(i=>{Ft().f[4]++;const r=(Ft().s[10]++,K_(i[0].id)),o=(Ft().s[11]++,[r,e].join("-"));Ft().s[12]++,i.length>1?(Ft().b[0][0]++,Ft().s[13]++,t[o]=this.state.areAllGroupsExpanded):Ft().b[0][1]++,Ft().s[14]++,i.forEach(s=>{Ft().f[5]++,Ft().s[15]++,e+=1})}),Ft().s[16]++,this.setState({collapsedGroups:t,areAllGroupsExpanded:!this.state.areAllGroupsExpanded})});groupedLayers(){Ft().f[6]++;const e=(Ft().s[17]++,[]),t=(Ft().s[18]++,new Map);Ft().s[19]++;for(let i=(Ft().s[20]++,0);i<this.props.layers.length;i++){const r=(Ft().s[21]++,this.props.layers[i]),o=(Ft().s[22]++,this.props.layers[i-1]);Ft().s[23]++,t.set(r.id,t.has(r.id)?(Ft().b[1][0]++,t.get(r.id)+1):(Ft().b[1][1]++,0));const s=(Ft().s[24]++,{...r,key:`layers-list-${r.id}-${t.get(r.id)}`});if(Ft().s[25]++,Ft().b[3][0]++,o&&(Ft().b[3][1]++,K_(o.id)==K_(s.id))){Ft().b[2][0]++;const a=(Ft().s[26]++,e[e.length-1]);Ft().s[27]++,a.push(s)}else Ft().b[2][1]++,Ft().s[28]++,e.push([s])}return Ft().s[29]++,e}toggleLayerGroup(e,t){Ft().f[7]++;const i=(Ft().s[30]++,[e,t].join("-")),r=(Ft().s[31]++,{...this.state.collapsedGroups});Ft().s[32]++,i in this.state.collapsedGroups?(Ft().b[4][0]++,Ft().s[33]++,r[i]=!this.state.collapsedGroups[i]):(Ft().b[4][1]++,Ft().s[34]++,r[i]=!1),Ft().s[35]++,this.setState({collapsedGroups:r})}isCollapsed(e,t){Ft().f[8]++;const i=(Ft().s[36]++,this.state.collapsedGroups[[e,t].join("-")]);return Ft().s[37]++,i===void 0?(Ft().b[5][0]++,!0):(Ft().b[5][1]++,i)}shouldComponentUpdate(e,t){if(Ft().f[9]++,Ft().s[38]++,this.state!==t)return Ft().b[6][0]++,Ft().s[39]++,!0;Ft().b[6][1]++;function i(c){Ft().f[10]++;const h=(Ft().s[40]++,{id:c.id});return Ft().s[41]++,c.layout?(Ft().b[7][0]++,Ft().s[42]++,h.layout={visibility:c.layout.visibility}):Ft().b[7][1]++,Ft().s[43]++,h}const r=(Ft().s[44]++,dT.isEqual(e.layers.map(i),this.props.layers.map(i)));function o(c){Ft().f[11]++;const h=(Ft().s[45]++,{...c});return Ft().s[46]++,delete h.layers,Ft().s[47]++,h}const s=(Ft().s[48]++,dT.isEqual(o(this.props),o(e))),a=(Ft().s[49]++,Ft().b[8][0]++,!(r&&(Ft().b[8][1]++,s)));return Ft().s[50]++,a}componentDidUpdate(e){if(Ft().f[12]++,Ft().s[51]++,e.selectedLayerIndex!==this.props.selectedLayerIndex){Ft().b[9][0]++;const t=(Ft().s[52]++,this.selectedItemRef.current);if(Ft().s[53]++,Ft().b[11][0]++,t&&(Ft().b[11][1]++,t.node)){Ft().b[10][0]++;const i=(Ft().s[54]++,t.node),r=(Ft().s[55]++,{root:this.scrollContainerRef.current,threshold:1}),o=(Ft().s[56]++,new IntersectionObserver(s=>{Ft().f[13]++,Ft().s[57]++,o.unobserve(i),Ft().s[58]++,Ft().b[13][0]++,s.length>0&&(Ft().b[13][1]++,s[0].intersectionRatio<1)?(Ft().b[12][0]++,Ft().s[59]++,i.scrollIntoView()):Ft().b[12][1]++},r));Ft().s[60]++,o.observe(i)}else Ft().b[10][1]++}else Ft().b[9][1]++}render(){Ft().f[14]++;const e=(Ft().s[61]++,[]);let t=(Ft().s[62]++,0);const i=(Ft().s[63]++,this.groupedLayers());Ft().s[64]++,i.forEach(o=>{Ft().f[15]++;const s=(Ft().s[65]++,K_(o[0].id));if(Ft().s[66]++,o.length>1){Ft().b[14][0]++;const a=(Ft().s[67]++,te.jsx(lSe,{"data-wd-key":[s,t].join("-"),"aria-controls":o.map(c=>(Ft().f[16]++,Ft().s[68]++,c.key)).join(" "),title:s,isActive:(Ft().b[15][0]++,!this.isCollapsed(s,t)||(Ft().b[15][1]++,t===this.props.selectedLayerIndex)),onActiveToggle:this.toggleLayerGroup.bind(this,s,t)},`group-${s}-${t}`));Ft().s[69]++,e.push(a)}else Ft().b[14][1]++;Ft().s[70]++,o.forEach((a,c)=>{Ft().f[17]++;const h=(Ft().s[71]++,o7e(this.props.layers,t)),m=(Ft().s[72]++,this.props.errors.find(E=>(Ft().f[18]++,Ft().s[73]++,Ft().b[16][0]++,E.parsed&&(Ft().b[16][1]++,E.parsed.type==="layer")&&(Ft().b[16][2]++,E.parsed.data.index==t)))),v=(Ft().s[74]++,{});Ft().s[75]++,t===this.props.selectedLayerIndex?(Ft().b[17][0]++,Ft().s[76]++,v.ref=this.selectedItemRef):Ft().b[17][1]++;const x=(Ft().s[77]++,te.jsx(cSe,{className:f0({"maputnik-layer-list-item-collapsed":(Ft().b[18][0]++,o.length>1&&(Ft().b[18][1]++,this.isCollapsed(s,h))&&(Ft().b[18][2]++,t!==this.props.selectedLayerIndex)),"maputnik-layer-list-item-group-last":(Ft().b[19][0]++,c==o.length-1&&(Ft().b[19][1]++,o.length>1)),"maputnik-layer-list-item--error":!!m}),id:a.key,layerId:a.id,layerIndex:t,layerType:a.type,visibility:(Ft().b[20][0]++,a.layout||(Ft().b[20][1]++,{})).visibility,isSelected:t===this.props.selectedLayerIndex,onLayerSelect:this.props.onLayerSelect,onLayerDestroy:this.props.onLayerDestroy?.bind(this),onLayerCopy:this.props.onLayerCopy.bind(this),onLayerVisibilityToggle:this.props.onLayerVisibilityToggle.bind(this),...v},a.key));Ft().s[78]++,e.push(x),Ft().s[79]++,t+=1})});const r=(Ft().s[80]++,this.props.t);return Ft().s[81]++,te.jsxs("section",{className:"maputnik-layer-list","data-wd-key":"layer-list",role:"complementary","aria-label":r("Layers list"),ref:this.scrollContainerRef,children:[te.jsx(n7e,{layers:this.props.layers,sources:this.props.sources,isOpen:this.state.isOpen.add,onOpenToggle:this.toggleModal.bind(this,"add"),onLayersChange:this.props.onLayersChange},this.state.keys.add),te.jsxs("header",{className:"maputnik-layer-list-header","data-wd-key":"layer-list.header",children:[te.jsx("span",{className:"maputnik-layer-list-header-title",children:r("Layers")}),te.jsx("span",{className:"maputnik-space"}),te.jsx("div",{className:"maputnik-default-property",children:te.jsx("div",{className:"maputnik-multibutton",children:te.jsx("button",{id:"skip-target-layer-list","data-wd-key":"skip-target-layer-list",onClick:this.toggleLayers,className:"maputnik-button",children:this.state.areAllGroupsExpanded===!0?(Ft().b[21][0]++,r("Collapse")):(Ft().b[21][1]++,r("Expand"))})})}),te.jsx("div",{className:"maputnik-default-property",children:te.jsx("div",{className:"maputnik-multibutton",children:te.jsx("button",{onClick:this.toggleModal.bind(this,"add"),"data-wd-key":"layer-list:add-layer",className:"maputnik-button maputnik-button-selected",children:r("Add Layer")})})})]}),te.jsx("div",{role:"navigation","aria-label":r("Layers list"),children:te.jsx("ul",{className:"maputnik-layer-list-container",children:e})})]})}}const a7e=(Ft().s[82]++,Po()(s7e));Ft().s[83]++;const l7e=n=>{Ft().f[19]++;const e=(Ft().s[84]++,P5e(D5e(PU,{activationConstraint:{distance:5}})));Ft().s[85]++;const t=r=>{Ft().f[20]++;const{active:o,over:s}=(Ft().s[86]++,r);if(Ft().s[87]++,s)Ft().b[22][1]++;else{Ft().b[22][0]++,Ft().s[88]++;return}const a=(Ft().s[89]++,n.layers.findIndex(h=>(Ft().f[21]++,Ft().s[90]++,h.id===o.id))),c=(Ft().s[91]++,n.layers.findIndex(h=>(Ft().f[22]++,Ft().s[92]++,h.id===s.id)));Ft().s[93]++,Ft().b[24][0]++,a!==-1&&(Ft().b[24][1]++,c!==-1)&&(Ft().b[24][2]++,a!==c)?(Ft().b[23][0]++,Ft().s[94]++,n.onMoveLayer({oldIndex:a,newIndex:c})):Ft().b[23][1]++},i=(Ft().s[95]++,n.layers.map(r=>(Ft().f[23]++,Ft().s[96]++,r.id)));return Ft().s[97]++,te.jsx(Fwe,{sensors:e,collisionDetection:z5e,onDragEnd:t,children:te.jsx(Xwe,{items:i,strategy:Hwe,children:te.jsx(a7e,{...n})})})};var E8,IW;function Cre(){if(IW)return E8;IW=1;var n={},e="a menu outside a mounted Wrapper with an id, or a menu that does not exist";function t(s,a){n[s]=a}function i(s){delete n[s]}function r(s,a){var c=n[s];if(!c)throw new Error("Cannot open "+e);c.openMenu(a)}function o(s,a){var c=n[s];if(!c)throw new Error("Cannot close "+e);c.closeMenu(a)}return E8={registerManager:t,unregisterManager:i,openMenu:r,closeMenu:o},E8}var B8,kW;function u7e(){if(kW)return B8;kW=1;function n(r){r=r||{};var o=r.keybindings||{};this._settings={keybindings:{next:o.next||{keyCode:40},prev:o.prev||{keyCode:38},first:o.first,last:o.last},wrap:r.wrap,stringSearch:r.stringSearch,stringSearchDelay:800},this._keybindingsLookup=[];var s,a;for(s in this._settings.keybindings)a=this._settings.keybindings[s],a&&[].concat(a).forEach((function(c){c.metaKey=c.metaKey||!1,c.ctrlKey=c.ctrlKey||!1,c.altKey=c.altKey||!1,c.shiftKey=c.shiftKey||!1,this._keybindingsLookup.push({action:s,eventMatcher:c})}).bind(this));this._searchString="",this._members=[],r.members&&this.setMembers(r.members),this._boundHandleKeydownEvent=this._handleKeydownEvent.bind(this)}n.prototype.activate=function(){return document.addEventListener("keydown",this._boundHandleKeydownEvent,!0),this},n.prototype.deactivate=function(){return document.removeEventListener("keydown",this._boundHandleKeydownEvent,!0),this._clearSearchStringRefreshTimer(),this},n.prototype._handleKeydownEvent=function(r){var o=this._getActiveElementIndex();if(o!==-1){var s=!1;this._keybindingsLookup.forEach((function(a){if(e(a.eventMatcher,r))switch(s=!0,r.preventDefault(),a.action){case"next":this.moveFocusForward();break;case"prev":this.moveFocusBack();break;case"first":this.moveFocusToFirst();break;case"last":this.moveFocusToLast();break;default:return}}).bind(this)),s||this._handleUnboundKey(r)}},n.prototype.moveFocusForward=function(){var r=this._getActiveElementIndex(),o;return r<this._members.length-1?o=r+1:this._settings.wrap?o=0:o=r,this.focusNodeAtIndex(o),o},n.prototype.moveFocusBack=function(){var r=this._getActiveElementIndex(),o;return r>0?o=r-1:this._settings.wrap?o=this._members.length-1:o=r,this.focusNodeAtIndex(o),o},n.prototype.moveFocusToFirst=function(){this.focusNodeAtIndex(0)},n.prototype.moveFocusToLast=function(){this.focusNodeAtIndex(this._members.length-1)},n.prototype._handleUnboundKey=function(r){if(this._settings.stringSearch){if(this._searchString!==""&&(r.key===" "||r.keyCode===32))return r.preventDefault(),-1;if(!t(r.keyCode)||r.ctrlKey||r.metaKey||r.altKey)return-1;r.preventDefault(),this._addToSearchString(String.fromCharCode(r.keyCode)),this._runStringSearch()}},n.prototype._clearSearchString=function(){this._searchString=""},n.prototype._addToSearchString=function(r){this._searchString+=r.toLowerCase()},n.prototype._startSearchStringRefreshTimer=function(){var r=this;this._clearSearchStringRefreshTimer(),this._stringSearchTimer=setTimeout(function(){r._clearSearchString()},this._settings.stringSearchDelay)},n.prototype._clearSearchStringRefreshTimer=function(){clearTimeout(this._stringSearchTimer)},n.prototype._runStringSearch=function(){this._startSearchStringRefreshTimer(),this.moveFocusByString(this._searchString)},n.prototype.moveFocusByString=function(r){for(var o,s=0,a=this._members.length;s<a;s++)if(o=this._members[s],!!o.text&&o.text.indexOf(r)===0)return i(o.node)},n.prototype._findIndexOfNode=function(r){for(var o=0,s=this._members.length;o<s;o++)if(this._members[o].node===r)return o;return-1},n.prototype._getActiveElementIndex=function(){return this._findIndexOfNode(document.activeElement)},n.prototype.focusNodeAtIndex=function(r){var o=this._members[r];return o&&i(o.node),this},n.prototype.addMember=function(r,o){var s=r.node||r,a=r.text||s.getAttribute("data-focus-group-text")||s.textContent||"";this._checkNode(s);var c=a.replace(/[\W_]/g,"").toLowerCase(),h={node:s,text:c};return o!=null?this._members.splice(o,0,h):this._members.push(h),this},n.prototype.removeMember=function(r){var o=typeof r=="number"?r:this._findIndexOfNode(r);if(o!==-1)return this._members.splice(o,1),this},n.prototype.clearMembers=function(){return this._members=[],this},n.prototype.setMembers=function(r){this.clearMembers();for(var o=0,s=r.length;o<s;o++)this.addMember(r[o]);return this},n.prototype.getMembers=function(){return this._members},n.prototype._checkNode=function(r){if(!r.nodeType||r.nodeType!==window.Node.ELEMENT_NODE)throw new Error("focus-group: only DOM nodes allowed");return r};function e(r,o){for(var s in r)if(o[s]!==void 0&&r[s]!==o[s])return!1;return!0}function t(r){return r>=65&&r<=90}function i(r){!r||!r.focus||(r.focus(),r.tagName.toLowerCase()==="input"&&r.select())}return B8=function(o){return new n(o)},B8}var O8,TW;function c7e(){if(TW)return O8;TW=1;var n=u7e(),e=Cre(),t={wrap:!0,stringSearch:!0},i={init:function(c){this.updateOptions(c),this.handleBlur=r.bind(this),this.handleSelection=o.bind(this),this.handleMenuKey=s.bind(this),this.focusGroup=n(t),this.button=null,this.menu=null,this.isOpen=!1},updateOptions:function(c){var h=this.options;this.options=c||this.options||{},typeof this.options.closeOnSelection>"u"&&(this.options.closeOnSelection=!0),typeof this.options.closeOnBlur>"u"&&(this.options.closeOnBlur=!0),this.options.id&&e.registerManager(this.options.id,this),h&&h.id&&h.id!==this.options.id&&e.unregisterManager(this.options.id,this)},focusItem:function(c){this.focusGroup.focusNodeAtIndex(c)},addItem:function(c){this.focusGroup.addMember(c)},clearItems:function(){this.focusGroup.clearMembers()},handleButtonNonArrowKey:function(c){this.focusGroup._handleUnboundKey(c)},destroy:function(){this.button=null,this.menu=null,this.focusGroup.deactivate(),clearTimeout(this.blurTimer),clearTimeout(this.moveFocusTimer)},update:function(){this.menu.setState({isOpen:this.isOpen}),this.button.setState({menuOpen:this.isOpen}),this.options.onMenuToggle&&this.options.onMenuToggle({isOpen:this.isOpen})},openMenu:function(c){if(!this.isOpen&&(c=c||{},c.focusMenu===void 0&&(c.focusMenu=!0),this.isOpen=!0,this.update(),this.focusGroup.activate(),c.focusMenu)){var h=this;this.moveFocusTimer=setTimeout(function(){h.focusItem(0)},0)}},closeMenu:function(c){this.isOpen&&(c=c||{},this.isOpen=!1,this.update(),c.focusButton&&this.button.ref.current.focus())},toggleMenu:function(c,h){c=c||{},h=h||{},this.isOpen?this.closeMenu(c):this.openMenu(h)}};function r(){var a=this;a.blurTimer=setTimeout(function(){if(a.button){var c=a.button.ref.current;if(c){var h=c.ownerDocument.activeElement;if(!(c&&h===c)){var m=a.menu.ref.current;if(m===h){a.focusItem(0);return}m&&m.contains(h)||a.isOpen&&a.closeMenu({focusButton:!1})}}}},0)}function o(a,c){this.options.closeOnSelection&&this.closeMenu({focusButton:!0}),this.options.onSelection&&this.options.onSelection(a,c)}function s(a){if(this.isOpen)switch(a.key){case"Escape":a.preventDefault(),this.closeMenu({focusButton:!0});break;case"Home":a.preventDefault(),this.focusGroup.moveFocusToFirst();break;case"End":a.preventDefault(),this.focusGroup.moveFocusToLast();break}}return O8=function(a){var c=Object.create(i);return c.init(a),c},O8}var I8,RW;function k6(){if(RW)return I8;RW=1;var n=Oa(),e=n.createContext();return I8=e,I8}var k8,DW;function T6(){if(DW)return k8;DW=1;var n=M1();return k8={refType:n.oneOfType([n.func,n.shape({current:n.elementType})])},k8}var T8,PW;function R6(){return PW||(PW=1,T8=function(n,e,t){t=t||{};for(var i in e)e.hasOwnProperty(i)&&(t[i]||(n[i]=e[i]))}),T8}var R8,UW;function A7e(){if(UW)return R8;UW=1;function n(E,D){if(!(E instanceof D))throw new TypeError("Cannot call a class as a function")}function e(E,D){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return D&&(typeof D=="object"||typeof D=="function")?D:E}function t(E,D){if(typeof D!="function"&&D!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof D);E.prototype=Object.create(D&&D.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),D&&(Object.setPrototypeOf?Object.setPrototypeOf(E,D):E.__proto__=D)}var i=Oa(),r=M1(),o=c7e(),s=k6(),a=T6(),c=a.refType,h=R6(),m={children:r.node.isRequired,forwardedRef:c,onMenuToggle:r.func,onSelection:r.func,closeOnSelection:r.bool,closeOnBlur:r.bool,tag:r.string},v=function(D){return{onMenuToggle:D.onMenuToggle,onSelection:D.onSelection,closeOnSelection:D.closeOnSelection,closeOnBlur:D.closeOnBlur,id:D.id}},x=(function(E){t(D,E);function D(P){n(this,D);var F=e(this,E.call(this,P));return F.manager=o(v(P)),F}return D.prototype.componentDidUpdate=function(){this.manager.updateOptions(v(this.props))},D.prototype.render=function(){var F={};return h(F,this.props,m),i.createElement(s.Provider,{value:this.manager},i.createElement(this.props.tag,F,this.props.children))},D})(i.Component);return x.propTypes=m,x.defaultProps={tag:"div"},R8=i.forwardRef(function(E,D){var P={forwardedRef:D};return h(P,E,{children:m.children,forwardedRef:m.forwardedRef}),h(P,{forwardedRef:D}),i.createElement(x,P,E.children)}),R8}var D8,KW;function h7e(){if(KW)return D8;KW=1;function n(x,E){if(!(x instanceof E))throw new TypeError("Cannot call a class as a function")}function e(x,E){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:x}function t(x,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);x.prototype=Object.create(E&&E.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(x,E):x.__proto__=E)}var i=Oa(),r=M1(),o=k6(),s=T6(),a=s.refType,c=R6(),h={ambManager:r.object.isRequired,children:r.node.isRequired,disabled:r.bool,forwardedRef:a,tag:r.string},m=function(){return["button","fieldset","input","optgroup","option","select","textarea"]},v=(function(x){t(E,x);function E(){var D,P,F;n(this,E);for(var W=arguments.length,q=Array(W),V=0;V<W;V++)q[V]=arguments[V];return F=(D=(P=e(this,x.call.apply(x,[this].concat(q))),P),P.ref=i.createRef(),P.handleKeyDown=function(H){if(!P.props.disabled){var X=P.props.ambManager;switch(H.key){case"ArrowDown":H.preventDefault(),X.isOpen?X.focusItem(0):X.openMenu();break;case"Enter":case" ":H.preventDefault(),X.toggleMenu();break;case"Escape":X.handleMenuKey(H);break;default:X.handleButtonNonArrowKey(H)}}},P.handleClick=function(){P.props.disabled||P.props.ambManager.toggleMenu({},{focusMenu:!1})},P.setRef=function(H){P.ref.current=H,typeof P.props.forwardedRef=="function"?P.props.forwardedRef(H):P.props.forwardedRef&&(P.props.forwardedRef.current=H)},D),e(P,F)}return E.prototype.componentDidMount=function(){this.props.ambManager.button=this},E.prototype.componentWillUnmount=function(){this.props.ambManager.destroy()},E.prototype.render=function(){var P=this.props,F=this.props.ambManager,W={role:"button",tabIndex:P.disabled?"":"0","aria-haspopup":!0,"aria-expanded":F.isOpen,"aria-disabled":P.disabled,onKeyDown:this.handleKeyDown,onClick:this.handleClick},q={};return c(q,h),m().indexOf(P.tag)>=0&&delete q.disabled,F.options.closeOnBlur&&(W.onBlur=F.handleBlur),c(W,P,q),c(W,{ref:this.setRef}),i.createElement(P.tag,W,P.children)},E})(i.Component);return v.propTypes=h,v.defaultProps={tag:"span"},D8=i.forwardRef(function(x,E){return i.createElement(o.Consumer,null,function(D){var P={ambManager:D,forwardedRef:E};return c(P,x,{ambManager:h.ambManager,children:h.children,forwardedRef:h.forwardedRef}),i.createElement(v,P,x.children)})}),D8}var P8,LW;function d7e(){return LW||(LW=1,P8=function(e,t,i){var r=0,o=0,s=!1,a=!1,c=!1;e.addEventListener("click",h,i),e.addEventListener("touchstart",m,i);function h(F){c||t(F)}function m(F){c=!0,!s&&(s=!0,e.addEventListener("touchmove",v,i),e.addEventListener("touchend",x,i),e.addEventListener("touchcancel",E,i),a=!1,r=F.touches[0].clientX,o=F.touches[0].clientY)}function v(F){a||Math.abs(F.touches[0].clientX-r)<=10&&Math.abs(F.touches[0].clientY-o)<=10||(a=!0)}function x(F){s=!1,D(),a||t(F)}function E(){s=!1,a=!1,r=0,o=0}function D(){e.removeEventListener("touchmove",v,i),e.removeEventListener("touchend",x,i),e.removeEventListener("touchcancel",E,i)}function P(){e.removeEventListener("click",h,i),e.removeEventListener("touchstart",m,i),D()}return{remove:P}}),P8}var U8,FW;function f7e(){if(FW)return U8;FW=1;function n(x,E){if(!(x instanceof E))throw new TypeError("Cannot call a class as a function")}function e(x,E){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:x}function t(x,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);x.prototype=Object.create(E&&E.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(x,E):x.__proto__=E)}var i=Oa(),r=M1(),o=d7e(),s=k6(),a=T6(),c=a.refType,h=R6(),m={ambManager:r.object.isRequired,children:r.oneOfType([r.func,r.node]).isRequired,forwardedRef:c,tag:r.string},v=(function(x){t(E,x);function E(){var D,P,F;n(this,E);for(var W=arguments.length,q=Array(W),V=0;V<W;V++)q[V]=arguments[V];return F=(D=(P=e(this,x.call.apply(x,[this].concat(q))),P),P.ref=i.createRef(),P.addTapListener=function(){var H=P.ref.current;if(H){var X=H.ownerDocument;X&&(P.tapListener=o(X.documentElement,P.handleTap))}},P.handleTap=function(H){P.ref.current.contains(H.target)||P.props.ambManager.button.ref.current.contains(H.target)||P.props.ambManager.closeMenu()},P.setRef=function(H){P.ref.current=H,typeof P.props.forwardedRef=="function"?P.props.forwardedRef(H):P.props.forwardedRef&&(P.props.forwardedRef.current=H)},D),e(P,F)}return E.prototype.componentDidMount=function(){this.props.ambManager.menu=this},E.prototype.componentDidUpdate=function(){var P=this.props.ambManager;P.options.closeOnBlur&&(P.isOpen&&!this.tapListener?this.addTapListener():!P.isOpen&&this.tapListener&&(this.tapListener.remove(),delete this.tapListener),P.isOpen||P.clearItems())},E.prototype.componentWillUnmount=function(){this.tapListener&&this.tapListener.remove(),this.props.ambManager.destroy()},E.prototype.render=function(){var P=this.props,F=this.props.ambManager,W=(function(){return typeof P.children=="function"?P.children({isOpen:F.isOpen}):F.isOpen?P.children:!1})();if(!W)return!1;var q={onKeyDown:F.handleMenuKey,role:"menu",tabIndex:-1};return F.options.closeOnBlur&&(q.onBlur=F.handleBlur),h(q,P,m),h(q,{ref:this.setRef}),i.createElement(P.tag,q,W)},E})(i.Component);return v.propTypes=m,v.defaultProps={tag:"div"},U8=i.forwardRef(function(x,E){return i.createElement(s.Consumer,null,function(D){var P={ambManager:D,forwardedRef:E};return h(P,x,{ambManager:m.ambManager,children:m.children,forwardedRef:m.forwardedRef}),i.createElement(v,P,x.children)})}),U8}var K8,zW;function p7e(){if(zW)return K8;zW=1;function n(v,x){if(!(v instanceof x))throw new TypeError("Cannot call a class as a function")}function e(v,x){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:v}function t(v,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);v.prototype=Object.create(x&&x.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(v,x):v.__proto__=x)}var i=Oa(),r=M1(),o=k6(),s=T6(),a=s.refType,c=R6(),h={ambManager:r.object.isRequired,children:r.node.isRequired,forwardedRef:a,tag:r.string,text:r.string,value:r.any},m=(function(v){t(x,v);function x(){var E,D,P;n(this,x);for(var F=arguments.length,W=Array(F),q=0;q<F;q++)W[q]=arguments[q];return P=(E=(D=e(this,v.call.apply(v,[this].concat(W))),D),D.ref=i.createRef(),D.handleKeyDown=function(V){V.key!=="Enter"&&V.key!==" "||D.props.tag==="a"&&D.props.href||(V.preventDefault(),D.selectItem(V))},D.selectItem=function(V){var H=typeof D.props.value<"u"?D.props.value:D.props.children;D.props.ambManager.handleSelection(H,V)},D.setRef=function(V){D.ref.current=V,typeof D.props.forwardedRef=="function"?D.props.forwardedRef(V):D.props.forwardedRef&&(D.props.forwardedRef.current=V)},E),e(D,P)}return x.prototype.componentDidMount=function(){this.props.ambManager.addItem({node:this.ref.current,text:this.props.text})},x.prototype.render=function(){var D={onClick:this.selectItem,onKeyDown:this.handleKeyDown,role:"menuitem",tabIndex:"-1",ref:this.setRef};return c(D,this.props,h),i.createElement(this.props.tag,D,this.props.children)},x})(i.Component);return m.propTypes=h,m.defaultProps={tag:"div"},K8=i.forwardRef(function(v,x){return i.createElement(o.Consumer,null,function(E){var D={ambManager:E,forwardedRef:x};return c(D,v,{ambManager:h.ambManager,children:h.children,forwardedRef:h.forwardedRef}),i.createElement(m,D,v.children)})}),K8}var L8,jW;function m7e(){if(jW)return L8;jW=1;var n=Cre();return L8={Wrapper:A7e(),Button:h7e(),Menu:f7e(),MenuItem:p7e(),openMenu:n.openMenu,closeMenu:n.closeMenu},L8}var V5=m7e();function NW(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function QR(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?NW(Object(t),!0).forEach(function(i){el(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):NW(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function D6(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function GW(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function P6(n,e,t){return e&&GW(n.prototype,e),t&&GW(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function el(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function A0(){return A0=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},A0.apply(this,arguments)}function dK(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&YR(n,e)}function rE(n){return rE=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},rE(n)}function YR(n,e){return YR=Object.setPrototypeOf||function(i,r){return i.__proto__=r,i},YR(n,e)}function g7e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function y7e(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,o;for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function U6(n,e){if(n==null)return{};var t=y7e(n,e),i,r;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(r=0;r<o.length;r++)i=o[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}function lm(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function v7e(n,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return lm(n)}function fK(n){var e=g7e();return function(){var i=rE(n),r;if(e){var o=rE(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return v7e(this,r)}}function b7e(n,e){return x7e(n)||w7e(n,e)||_re(n,e)||E7e()}function C7e(n){return _7e(n)||M7e(n)||_re(n)||S7e()}function _7e(n){if(Array.isArray(n))return qR(n)}function x7e(n){if(Array.isArray(n))return n}function M7e(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function w7e(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var i=[],r=!0,o=!1,s,a;try{for(t=t.call(n);!(r=(s=t.next()).done)&&(i.push(s.value),!(e&&i.length===e));r=!0);}catch(c){o=!0,a=c}finally{try{!r&&t.return!=null&&t.return()}finally{if(o)throw a}}return i}}function _re(n,e){if(n){if(typeof n=="string")return qR(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return qR(n,e)}}function qR(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function S7e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function E7e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var B7e=P6(function n(e){var t=this,i=e.expanded,r=i===void 0?[]:i,o=e.allowMultipleExpanded,s=o===void 0?!1:o,a=e.allowZeroExpanded,c=a===void 0?!1:a;D6(this,n),el(this,"expanded",void 0),el(this,"allowMultipleExpanded",void 0),el(this,"allowZeroExpanded",void 0),el(this,"toggleExpanded",function(h){if(t.isItemDisabled(h))return t;var m=t.isItemExpanded(h);return m?t.augment({expanded:t.expanded.filter(function(v){return v!==h})}):t.augment({expanded:t.allowMultipleExpanded?[].concat(C7e(t.expanded),[h]):[h]})}),el(this,"isItemDisabled",function(h){var m=t.isItemExpanded(h),v=t.expanded.length===1;return!!(m&&!t.allowZeroExpanded&&v)}),el(this,"isItemExpanded",function(h){return t.expanded.indexOf(h)!==-1}),el(this,"getPanelAttributes",function(h,m){var v=m??t.isItemExpanded(h);return{role:t.allowMultipleExpanded?void 0:"region","aria-hidden":t.allowMultipleExpanded?!v:void 0,"aria-labelledby":t.getButtonId(h),id:t.getPanelId(h),hidden:v?void 0:!0}}),el(this,"getHeadingAttributes",function(){return{role:"heading"}}),el(this,"getButtonAttributes",function(h,m){var v=m??t.isItemExpanded(h),x=t.isItemDisabled(h);return{id:t.getButtonId(h),"aria-disabled":x,"aria-expanded":v,"aria-controls":t.getPanelId(h),role:"button",tabIndex:0}}),el(this,"getPanelId",function(h){return"accordion__panel-".concat(h)}),el(this,"getButtonId",function(h){return"accordion__heading-".concat(h)}),el(this,"augment",function(h){return new n(QR({expanded:t.expanded,allowMultipleExpanded:t.allowMultipleExpanded,allowZeroExpanded:t.allowZeroExpanded},h))}),this.expanded=r,this.allowMultipleExpanded=s,this.allowZeroExpanded=c}),xre=Mt.createContext(null),Mre=(function(n){dK(t,n);var e=fK(t);function t(){var i;D6(this,t);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return i=e.call.apply(e,[this].concat(o)),el(lm(i),"state",new B7e({expanded:i.props.preExpanded,allowMultipleExpanded:i.props.allowMultipleExpanded,allowZeroExpanded:i.props.allowZeroExpanded})),el(lm(i),"toggleExpanded",function(a){i.setState(function(c){return c.toggleExpanded(a)},function(){i.props.onChange&&i.props.onChange(i.state.expanded)})}),el(lm(i),"isItemDisabled",function(a){return i.state.isItemDisabled(a)}),el(lm(i),"isItemExpanded",function(a){return i.state.isItemExpanded(a)}),el(lm(i),"getPanelAttributes",function(a,c){return i.state.getPanelAttributes(a,c)}),el(lm(i),"getHeadingAttributes",function(){return i.state.getHeadingAttributes()}),el(lm(i),"getButtonAttributes",function(a,c){return i.state.getButtonAttributes(a,c)}),i}return P6(t,[{key:"render",value:function(){var r=this.state,o=r.allowZeroExpanded,s=r.allowMultipleExpanded;return Mt.createElement(xre.Provider,{value:{allowMultipleExpanded:s,allowZeroExpanded:o,toggleExpanded:this.toggleExpanded,isItemDisabled:this.isItemDisabled,isItemExpanded:this.isItemExpanded,getPanelAttributes:this.getPanelAttributes,getHeadingAttributes:this.getHeadingAttributes,getButtonAttributes:this.getButtonAttributes}},this.props.children||null)}}]),t})(Mt.PureComponent);el(Mre,"defaultProps",{allowMultipleExpanded:!1,allowZeroExpanded:!1});var wre=(function(n){dK(t,n);var e=fK(t);function t(){var i;D6(this,t);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return i=e.call.apply(e,[this].concat(o)),el(lm(i),"renderChildren",function(a){return a?i.props.children(a):null}),i}return P6(t,[{key:"render",value:function(){return Mt.createElement(xre.Consumer,null,this.renderChildren)}}]),t})(Mt.PureComponent),O7e=["className","allowMultipleExpanded","allowZeroExpanded","onChange","preExpanded"],I7e=function(e){var t=e.className,i=t===void 0?"accordion":t,r=e.allowMultipleExpanded,o=e.allowZeroExpanded,s=e.onChange,a=e.preExpanded,c=U6(e,O7e);return Mt.createElement(Mre,{preExpanded:a,allowMultipleExpanded:r,allowZeroExpanded:o,onChange:s},Mt.createElement("div",A0({"data-accordion-component":"Accordion",className:i},c)))},VR;(function(n){n.Accordion="Accordion",n.AccordionItem="AccordionItem",n.AccordionItemButton="AccordionItemButton",n.AccordionItemHeading="AccordionItemHeading",n.AccordionItemPanel="AccordionItemPanel"})(VR||(VR={}));var Sre=VR,F8=0;function k7e(){var n=F8;return F8=F8+1,"raa-".concat(n)}var T7e=Mt.useId||k7e,R7e=/[\u0009\u000a\u000c\u000d\u0020]/g;function T4(n){return n===""||R7e.test(n)?(console.error('uuid must be a valid HTML5 id but was given "'.concat(n,'", ASCII whitespaces are forbidden')),!1):!0}var Ere=Mt.createContext(null),D7e=function(e){var t=e.children,i=e.uuid,r=e.accordionContext,o=e.dangerouslySetExpanded,s=function(){r.toggleExpanded(i)},a=function(h){var m=o??h.isItemExpanded(i),v=h.isItemDisabled(i),x=h.getPanelAttributes(i,o),E=h.getHeadingAttributes(i),D=h.getButtonAttributes(i,o);return Mt.createElement(Ere.Provider,{value:{uuid:i,expanded:m,disabled:v,toggleExpanded:s,panelAttributes:x,headingAttributes:E,buttonAttributes:D}},t)};return Mt.createElement(wre,null,a)},P7e=function(e){return Mt.createElement(wre,null,function(t){return Mt.createElement(D7e,A0({},e,{accordionContext:t}))})},K6=function(e){var t=e.children,i=function(o){return o?t(o):null};return Mt.createElement(Ere.Consumer,null,i)},U7e=["uuid","dangerouslySetExpanded","className","activeClassName"],Bre=function(e){var t=e.uuid,i=e.dangerouslySetExpanded,r=e.className,o=r===void 0?"accordion__item":r,s=e.activeClassName,a=U6(e,U7e),c=Mt.useState(T7e()),h=b7e(c,1),m=h[0],v=t??m,x=function(D){var P=D.expanded,F=P&&s?s:o;return Mt.createElement("div",A0({"data-accordion-component":"AccordionItem",className:F},a))};return T4(v.toString()),a.id&&T4(a.id),Mt.createElement(P7e,{uuid:v,dangerouslySetExpanded:i},Mt.createElement(K6,null,x))};Bre.displayName=Sre.AccordionItem;function Ore(n){return n&&(n.matches('[data-accordion-component="Accordion"]')?n:Ore(n.parentElement))}function L6(n){var e=Ore(n);return e&&Array.from(e.querySelectorAll('[data-accordion-component="AccordionItemButton"]'))}function K7e(n){var e=L6(n)||[],t=e[0];t&&t.focus()}function L7e(n){var e=L6(n)||[],t=e[e.length-1];t&&t.focus()}function F7e(n){var e=L6(n)||[],t=e.indexOf(n);if(t!==-1){var i=e[t+1];i&&i.focus()}}function z7e(n){var e=L6(n)||[],t=e.indexOf(n);if(t!==-1){var i=e[t-1];i&&i.focus()}}var X0={END:"End",ENTER:"Enter",HOME:"Home",SPACE:" ",SPACE_DEPRECATED:"Spacebar",UP:"ArrowUp",DOWN:"ArrowDown",LEFT:"ArrowLeft",RIGHT:"ArrowRight"},j7e=["toggleExpanded","className"],N7e=function(e){var t=e.toggleExpanded,i=e.className,r=i===void 0?"accordion__button":i,o=U6(e,j7e),s=function(c){var h=c.key;if((h===X0.ENTER||h===X0.SPACE||h===X0.SPACE_DEPRECATED)&&(c.preventDefault(),t()),c.target instanceof HTMLElement)switch(h){case X0.HOME:{c.preventDefault(),K7e(c.target);break}case X0.END:{c.preventDefault(),L7e(c.target);break}case X0.LEFT:case X0.UP:{c.preventDefault(),z7e(c.target);break}case X0.RIGHT:case X0.DOWN:{c.preventDefault(),F7e(c.target);break}}};return o.id&&T4(o.id),Mt.createElement("div",A0({className:r},o,{role:"button",tabIndex:0,onClick:t,onKeyDown:s,"data-accordion-component":"AccordionItemButton"}))},G7e=function(e){return Mt.createElement(K6,null,function(t){var i=t.toggleExpanded,r=t.buttonAttributes;return Mt.createElement(N7e,A0({toggleExpanded:i},e,r))})},W7e={className:"accordion__heading","aria-level":3},Q7e=`AccordionItemButton may contain only one child element, which must be an instance of AccordionItemButton.

From the WAI-ARIA spec (https://www.w3.org/TR/wai-aria-practices-1.1/#accordion):

The button element is the only element inside the heading element. That is, if there are other visually persistent elements, they are not included inside the heading element.

`,Ire=(function(n){dK(t,n);var e=fK(t);function t(){var i;D6(this,t);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return i=e.call.apply(e,[this].concat(o)),el(lm(i),"ref",void 0),el(lm(i),"setRef",function(a){i.ref=a}),i}return P6(t,[{key:"componentDidUpdate",value:function(){t.VALIDATE(this.ref)}},{key:"componentDidMount",value:function(){t.VALIDATE(this.ref)}},{key:"render",value:function(){return Mt.createElement("div",A0({"data-accordion-component":"AccordionItemHeading"},this.props,{ref:this.setRef}))}}],[{key:"VALIDATE",value:function(r){if(r===void 0)throw new Error("ref is undefined");if(!(r.childElementCount===1&&r.firstElementChild&&r.firstElementChild.getAttribute("data-accordion-component")==="AccordionItemButton"))throw new Error(Q7e)}}]),t})(Mt.PureComponent);el(Ire,"defaultProps",W7e);var kre=function(e){return Mt.createElement(K6,null,function(t){var i=t.headingAttributes;return e.id&&T4(e.id),Mt.createElement(Ire,A0({},e,i))})};kre.displayName=Sre.AccordionItemHeading;var Y7e=["className","region","id"],q7e=function(e){var t=e.className,i=t===void 0?"accordion__panel":t,r=e.region,o=e.id,s=U6(e,Y7e),a=function(h){var m=h.panelAttributes;o&&T4(o);var v=QR(QR({},m),{},{"aria-labelledby":r?m["aria-labelledby"]:void 0});return Mt.createElement("div",A0({"data-accordion-component":"AccordionItemPanel",className:i},s,v,{role:r?"region":void 0}))};return Mt.createElement(K6,null,a)};function R4(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldJson.tsx",e="ee4be309accf3b6f15b0a988cbdadd67c7132608",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldJson.tsx",statementMap:{0:{start:{line:3,column:18},end:{line:5,column:1}},1:{start:{line:4,column:2},end:{line:4,column:54}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:3,column:18},end:{line:3,column:19}},loc:{start:{line:3,column:29},end:{line:5,column:1}},line:3}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldJson.tsx"],names:[],mappings:"AAOS;AAPT,OAAO,eAAsC;AAM7C,MAAM,YAAsC,CAAC,UAAU;AACrD,SAAO,oBAAC,aAAW,GAAG,OAAO;AAC/B;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ee4be309accf3b6f15b0a988cbdadd67c7132608"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return R4=function(){return s},s}R4();R4().s[0]++;const F6=n=>(R4().f[0]++,R4().s[1]++,te.jsx(Gne,{...n}));function D4(n){return xo({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 19a2 2 0 0 0 2 2c2 0 2 -4 3 -9s1 -9 3 -9a2 2 0 0 1 2 2"},child:[]},{tag:"path",attr:{d:"M5 12h6"},child:[]},{tag:"path",attr:{d:"M15 12l6 6"},child:[]},{tag:"path",attr:{d:"M15 18l6 -6"},child:[]}]})(n)}function z6(n){return xo({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M28,64A12,12,0,0,1,40,52H216a12,12,0,0,1,0,24H40A12,12,0,0,1,28,64Zm12,76H216a12,12,0,0,0,0-24H40a12,12,0,0,0,0,24Zm104,40H40a12,12,0,0,0,0,24H144a12,12,0,0,0,0-24Zm88,0H220V168a12,12,0,0,0-24,0v12H184a12,12,0,0,0,0,24h12v12a12,12,0,0,0,24,0V204h12a12,12,0,0,0,0-24Z"},child:[]}]})(n)}function Fb(){var n="/home/runner/work/maputnik/maputnik/src/libs/filterops.ts",e="99dad9631fbee5fc23be2dafaf7c7eea92c38eac",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/filterops.ts",statementMap:{0:{start:{line:2,column:34},end:{line:2,column:56}},1:{start:{line:3,column:28},end:{line:3,column:41}},2:{start:{line:4,column:30},end:{line:4,column:123}},3:{start:{line:4,column:88},end:{line:4,column:122}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:80},end:{line:4,column:81}},loc:{start:{line:4,column:88},end:{line:4,column:122}},line:4}},branchMap:{},s:{0:0,1:0,2:0,3:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/filterops.ts"],names:[],mappings:"AAAA,OAAO,YAAY;AAEZ,aAAM,qBAAqB,CAAC,OAAO,OAAO,MAAM;AAChD,aAAM,eAAe,CAAC,MAAM,KAAK;AACjC,aAAM,iBAAiB,OAC3B,KAAK,OAAO,gBAAgB,MAAM,EAClC,OAAO,QAAM,mBAAmB,QAAQ,EAAE,IAAI,CAAC;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"99dad9631fbee5fc23be2dafaf7c7eea92c38eac"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Fb=function(){return s},s}Fb();const pK=(Fb().s[0]++,["all","any","none"]);Fb().s[1]++;const V7e=(Fb().s[2]++,Object.keys(qr.filter_operator.values).filter(n=>(Fb().f[0]++,Fb().s[3]++,pK.indexOf(n)<0)));function Yi(){var n="/home/runner/work/maputnik/maputnik/src/components/SingleFilterEditor.tsx",e="d18e3b448d830733ac17bcacd45f7c08e364baa2",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/SingleFilterEditor.tsx",statementMap:{0:{start:{line:8,column:2},end:{line:8,column:25}},1:{start:{line:8,column:16},end:{line:8,column:25}},2:{start:{line:9,column:2},end:{line:9,column:25}},3:{start:{line:9,column:16},end:{line:9,column:25}},4:{start:{line:10,column:2},end:{line:10,column:23}},5:{start:{line:13,column:19},end:{line:13,column:40}},6:{start:{line:14,column:2},end:{line:16,column:3}},7:{start:{line:15,column:4},end:{line:15,column:13}},8:{start:{line:17,column:2},end:{line:23,column:3}},9:{start:{line:18,column:4},end:{line:18,column:16}},10:{start:{line:19,column:9},end:{line:23,column:3}},11:{start:{line:20,column:4},end:{line:20,column:17}},12:{start:{line:22,column:4},end:{line:22,column:13}},13:{start:{line:26,column:2},end:{line:26,column:21}},14:{start:{line:27,column:2},end:{line:27,column:22}},15:{start:{line:28,column:2},end:{line:28,column:11}},16:{start:{line:31,column:24},end:{line:33,column:3}},17:{start:{line:35,column:20},end:{line:35,column:76}},18:{start:{line:36,column:4},end:{line:40,column:5}},19:{start:{line:37,column:6},end:{line:37,column:43}},20:{start:{line:38,column:11},end:{line:40,column:5}},21:{start:{line:39,column:6},end:{line:39,column:47}},22:{start:{line:41,column:4},end:{line:41,column:35}},23:{start:{line:44,column:14},end:{line:44,column:31}},24:{start:{line:45,column:21},end:{line:45,column:25}},25:{start:{line:46,column:25},end:{line:46,column:29}},26:{start:{line:47,column:23},end:{line:47,column:33}},27:{start:{line:48,column:4},end:{line:75,column:9}},28:{start:{line:54,column:72},end:{line:54,column:92}},29:{start:{line:55,column:41},end:{line:55,column:104}},30:{start:{line:63,column:37},end:{line:63,column:100}},31:{start:{line:72,column:27},end:{line:72,column:89}}},fnMap:{0:{name:"tryParseInt",decl:{start:{line:7,column:9},end:{line:7,column:20}},loc:{start:{line:7,column:24},end:{line:11,column:1}},line:7},1:{name:"tryParseBool",decl:{start:{line:12,column:9},end:{line:12,column:21}},loc:{start:{line:12,column:25},end:{line:24,column:1}},line:12},2:{name:"parseFilter",decl:{start:{line:25,column:9},end:{line:25,column:20}},loc:{start:{line:25,column:24},end:{line:29,column:1}},line:25},3:{name:"(anonymous_3)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:58},end:{line:42,column:3}},line:34},4:{name:"(anonymous_4)",decl:{start:{line:43,column:2},end:{line:43,column:3}},loc:{start:{line:43,column:11},end:{line:76,column:3}},line:43},5:{name:"(anonymous_5)",decl:{start:{line:54,column:58},end:{line:54,column:59}},loc:{start:{line:54,column:72},end:{line:54,column:92}},line:54},6:{name:"(anonymous_6)",decl:{start:{line:55,column:20},end:{line:55,column:21}},loc:{start:{line:55,column:41},end:{line:55,column:104}},line:55},7:{name:"(anonymous_7)",decl:{start:{line:63,column:20},end:{line:63,column:21}},loc:{start:{line:63,column:37},end:{line:63,column:100}},line:63},8:{name:"(anonymous_8)",decl:{start:{line:72,column:20},end:{line:72,column:21}},loc:{start:{line:72,column:27},end:{line:72,column:89}},line:72}},branchMap:{0:{loc:{start:{line:8,column:2},end:{line:8,column:25}},type:"if",locations:[{start:{line:8,column:2},end:{line:8,column:25}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:8},1:{loc:{start:{line:9,column:2},end:{line:9,column:25}},type:"if",locations:[{start:{line:9,column:2},end:{line:9,column:25}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:9},2:{loc:{start:{line:14,column:2},end:{line:16,column:3}},type:"if",locations:[{start:{line:14,column:2},end:{line:16,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:14},3:{loc:{start:{line:17,column:2},end:{line:23,column:3}},type:"if",locations:[{start:{line:17,column:2},end:{line:23,column:3}},{start:{line:19,column:9},end:{line:23,column:3}}],line:17},4:{loc:{start:{line:19,column:9},end:{line:23,column:3}},type:"if",locations:[{start:{line:19,column:9},end:{line:23,column:3}},{start:{line:21,column:9},end:{line:23,column:3}}],line:19},5:{loc:{start:{line:36,column:4},end:{line:40,column:5}},type:"if",locations:[{start:{line:36,column:4},end:{line:40,column:5}},{start:{line:38,column:11},end:{line:40,column:5}}],line:36},6:{loc:{start:{line:36,column:8},end:{line:36,column:49}},type:"binary-expr",locations:[{start:{line:36,column:8},end:{line:36,column:26}},{start:{line:36,column:30},end:{line:36,column:49}}],line:36},7:{loc:{start:{line:38,column:11},end:{line:40,column:5}},type:"if",locations:[{start:{line:38,column:11},end:{line:40,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:38},8:{loc:{start:{line:67,column:6},end:{line:74,column:10}},type:"binary-expr",locations:[{start:{line:67,column:6},end:{line:67,column:27}},{start:{line:67,column:47},end:{line:74,column:10}}],line:67}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/SingleFilterEditor.tsx"],names:[],mappings:"AA+DW,SAEH,KAFG;AA/DX,OAAO,WAAW;AAElB,SAAQ,sBAAqB;AAC7B,OAAO,iBAAiB;AACxB,OAAO,uBAAuB;AAC9B,OAAO,iBAAiB;AAExB,SAAS,YAAY,GAAoB;AACvC,MAAI,MAAM,GAAI,QAAO;AACrB,MAAI,MAAM,CAAW,EAAG,QAAO;AAC/B,SAAO,WAAW,CAAW;AAC/B;AAEA,SAAS,aAAa,GAAqB;AACzC,QAAM,WAAY,OAAO,MAAO;AAChC,MAAG,CAAC,UAAU;AACZ,WAAO;AAAA,EACT;AAEA,MAAG,EAAE,MAAM,cAAc,GAAG;AAC1B,WAAO;AAAA,EACT,WACQ,EAAE,MAAM,eAAe,GAAG;AAChC,WAAO;AAAA,EACT,OACK;AACH,WAAO;AAAA,EACT;AACF;AAEA,SAAS,YAAY,GAA8B;AACjD,MAAI,YAAY,CAAQ;AACxB,MAAI,aAAa,CAAQ;AACzB,SAAO;AACT;AAQA,qBAAqB,2BAA2B,MAAM,UAAmC;AAAA,EACvF,OAAO,eAAe;AAAA,IACpB,YAAY,CAAC;AAAA,EACf;AAAA,EAEA,oBAAoB,UAAkB,cAAsB,YAAsB;AAChF,QAAI,YAAY,CAAC,UAAU,cAAc,GAAG,WAAW,IAAI,WAAW,CAAC;AACvE,QAAG,aAAa,SAAS,aAAa,QAAQ;AAC5C,kBAAY,CAAC,UAAU,YAAY;AAAA,IACrC,WAAU,WAAW,WAAW,GAAG;AACjC,kBAAY,CAAC,UAAU,cAAc,EAAE;AAAA,IACzC;AACA,SAAK,MAAM,SAAS,SAAS;AAAA,EAC/B;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,WAAW,EAAE,CAAC;AACpB,UAAM,eAAe,EAAE,CAAC;AACxB,UAAM,aAAa,EAAE,MAAM,CAAC;AAE5B,WAAO,qBAAC,SAAI,WAAU,iCACpB;AAAA,0BAAC,SAAI,WAAU,mCACb;AAAA,QAAC;AAAA;AAAA,UACC,cAAW;AAAA,UACX,OAAO;AAAA,UACP,SAAS,OAAO,KAAK,KAAK,MAAM,UAAW,EAAE,IAAI,cAAY,CAAC,UAAU,QAAQ,CAAC;AAAA,UACjF,UAAU,CAAC,oBAA4B,KAAK,oBAAoB,UAAU,iBAAiB,UAAU;AAAA;AAAA,MACvG,GACF;AAAA,MACA,oBAAC,SAAI,WAAU,mCACb;AAAA,QAAC;AAAA;AAAA,UACC,cAAW;AAAA,UACX,OAAO;AAAA,UACP,UAAU,CAAC,gBAAwB,KAAK,oBAAoB,aAAa,cAAc,UAAU;AAAA,UACjG,SAAS;AAAA;AAAA,MACX,GACF;AAAA,MACC,WAAW,SAAS,KACrB,oBAAC,SAAI,WAAU,+BACb;AAAA,QAAC;AAAA;AAAA,UACC,cAAW;AAAA,UACX,OAAO,WAAW,KAAK,GAAG;AAAA,UAC1B,UAAU,CAAC,MAAc,KAAK,oBAAoB,UAAU,cAAc,EAAE,MAAM,GAAG,CAAC;AAAA;AAAA,MACxF,GACF;AAAA,OAEF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d18e3b448d830733ac17bcacd45f7c08e364baa2"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Yi=function(){return s},s}Yi();function $7e(n){return Yi().f[0]++,Yi().s[0]++,n===""?(Yi().b[0][0]++,Yi().s[1]++,n):(Yi().b[0][1]++,Yi().s[2]++,isNaN(n)?(Yi().b[1][0]++,Yi().s[3]++,n):(Yi().b[1][1]++,Yi().s[4]++,parseFloat(n)))}function H7e(n){Yi().f[1]++;const e=(Yi().s[5]++,typeof n=="string");if(Yi().s[6]++,e)Yi().b[2][1]++;else return Yi().b[2][0]++,Yi().s[7]++,n;return Yi().s[8]++,n.match(/^\s*true\s*$/)?(Yi().b[3][0]++,Yi().s[9]++,!0):(Yi().b[3][1]++,Yi().s[10]++,n.match(/^\s*false\s*$/)?(Yi().b[4][0]++,Yi().s[11]++,!1):(Yi().b[4][1]++,Yi().s[12]++,n))}function Z7e(n){return Yi().f[2]++,Yi().s[13]++,n=$7e(n),Yi().s[14]++,n=H7e(n),Yi().s[15]++,n}class X7e extends On.Component{static defaultProps=(Yi().s[16]++,{properties:{}});onFilterPartChanged(e,t,i){Yi().f[3]++;let r=(Yi().s[17]++,[e,t,...i.map(Z7e)]);Yi().s[18]++,Yi().b[6][0]++,e==="has"||(Yi().b[6][1]++,e==="!has")?(Yi().b[5][0]++,Yi().s[19]++,r=[e,t]):(Yi().b[5][1]++,Yi().s[20]++,i.length===0?(Yi().b[7][0]++,Yi().s[21]++,r=[e,t,""]):Yi().b[7][1]++),Yi().s[22]++,this.props.onChange(r)}render(){Yi().f[4]++;const e=(Yi().s[23]++,this.props.filter),t=(Yi().s[24]++,e[0]),i=(Yi().s[25]++,e[1]),r=(Yi().s[26]++,e.slice(2));return Yi().s[27]++,te.jsxs("div",{className:"maputnik-filter-editor-single",children:[te.jsx("div",{className:"maputnik-filter-editor-property",children:te.jsx(kM,{"aria-label":"key",value:i,options:Object.keys(this.props.properties).map(o=>(Yi().f[5]++,Yi().s[28]++,[o,o])),onChange:o=>(Yi().f[6]++,Yi().s[29]++,this.onFilterPartChanged(t,o,r))})}),te.jsx("div",{className:"maputnik-filter-editor-operator",children:te.jsx(hC,{"aria-label":"function",value:t,onChange:o=>(Yi().f[7]++,Yi().s[30]++,this.onFilterPartChanged(o,i,r)),options:V7e})}),(Yi().b[8][0]++,r.length>0&&(Yi().b[8][1]++,te.jsx("div",{className:"maputnik-filter-editor-args",children:te.jsx(Mm,{"aria-label":"value",value:r.join(","),onChange:o=>(Yi().f[8]++,Yi().s[31]++,this.onFilterPartChanged(t,i,o.split(",")))})})))]})}}function rx(){var n="/home/runner/work/maputnik/maputnik/src/components/FilterEditorBlock.tsx",e="1beba484bbe354357d7ce4f43a423306cbd22032",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FilterEditorBlock.tsx",statementMap:{0:{start:{line:8,column:14},end:{line:8,column:26}},1:{start:{line:9,column:4},end:{line:20,column:9}},2:{start:{line:23,column:26},end:{line:23,column:70}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:11},end:{line:21,column:3}},line:7}},branchMap:{},s:{0:0,1:0,2:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FilterEditorBlock.tsx"],names:[],mappings:"AAYW,SACL,KADK;AAZX,OAAO,WAAuC;AAC9C,OAAO,iBAAiB;AACxB,SAAQ,gBAAe;AACvB,SAA+B,uBAAuB;AAMtD,MAAM,kCAAkC,MAAM,UAA0C;AAAA,EACtF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SAAI,WAAU,gCACpB;AAAA,0BAAC,SAAI,WAAU,wCACZ,eAAK,MAAM,UACd;AAAA,MACA,oBAAC,SAAI,WAAU,uCACb;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,SAAS,KAAK,MAAM;AAAA,UACpB,OAAO,EAAE,qBAAqB;AAAA,UAE9B,8BAAC,YAAS;AAAA;AAAA,MACZ,GACF;AAAA,OACF;AAAA,EACF;AACF;AAEA,MAAM,oBAAoB,gBAAgB,EAAE,yBAAyB;AACrE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"1beba484bbe354357d7ce4f43a423306cbd22032"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return rx=function(){return s},s}rx();class J7e extends On.Component{render(){rx().f[0]++;const e=(rx().s[0]++,this.props.t);return rx().s[1]++,te.jsxs("div",{className:"maputnik-filter-editor-block",children:[te.jsx("div",{className:"maputnik-filter-editor-block-content",children:this.props.children}),te.jsx("div",{className:"maputnik-filter-editor-block-action",children:te.jsx(Gs,{className:"maputnik-icon-button",onClick:this.props.onDelete,title:e("Delete filter block"),children:te.jsx(nC,{})})})]})}}const eIe=(rx().s[2]++,Po()(J7e));var z8,WW;function tIe(){if(WW)return z8;WW=1;var n="[object Symbol]",e="\\ud800-\\udfff",t="\\u0300-\\u036f\\ufe20-\\ufe23",i="\\u20d0-\\u20f0",r="\\ufe0e\\ufe0f",o="["+e+"]",s="["+t+i+"]",a="\\ud83c[\\udffb-\\udfff]",c="(?:"+s+"|"+a+")",h="[^"+e+"]",m="(?:\\ud83c[\\udde6-\\uddff]){2}",v="[\\ud800-\\udbff][\\udc00-\\udfff]",x="\\u200d",E=c+"?",D="["+r+"]?",P="(?:"+x+"(?:"+[h,m,v].join("|")+")"+D+E+")*",F=D+E+P,W="(?:"+[h+s+"?",s,m,v,o].join("|")+")",q=RegExp(a+"(?="+a+")|"+W+F,"g"),V=RegExp("["+x+e+t+i+r+"]"),H=typeof window=="object"&&window&&window.Object===Object&&window,X=typeof self=="object"&&self&&self.Object===Object&&self,Z=H||X||Function("return this")();function G(at){return at.split("")}function oe(at){return V.test(at)}function ue(at){return oe(at)?xe(at):G(at)}function xe(at){return at.match(q)||[]}var me=Object.prototype,Ie=me.toString,Me=Z.Symbol,Te=Me?Me.prototype:void 0,je=Te?Te.toString:void 0;function Ee(at,Tt,Kt){var Ke=-1,Oe=at.length;Tt<0&&(Tt=-Tt>Oe?0:Oe+Tt),Kt=Kt>Oe?Oe:Kt,Kt<0&&(Kt+=Oe),Oe=Tt>Kt?0:Kt-Tt>>>0,Tt>>>=0;for(var Be=Array(Oe);++Ke<Oe;)Be[Ke]=at[Ke+Tt];return Be}function qe(at){if(typeof at=="string")return at;if(Re(at))return je?je.call(at):"";var Tt=at+"";return Tt=="0"&&1/at==-1/0?"-0":Tt}function At(at,Tt,Kt){var Ke=at.length;return Kt=Kt===void 0?Ke:Kt,!Tt&&Kt>=Ke?at:Ee(at,Tt,Kt)}function gt(at){return function(Tt){Tt=Ge(Tt);var Kt=oe(Tt)?ue(Tt):void 0,Ke=Kt?Kt[0]:Tt.charAt(0),Oe=Kt?At(Kt,1).join(""):Tt.slice(1);return Ke[at]()+Oe}}function Le(at){return!!at&&typeof at=="object"}function Re(at){return typeof at=="symbol"||Le(at)&&Ie.call(at)==n}function Ge(at){return at==null?"":qe(at)}function De(at){return _t(Ge(at).toLowerCase())}var _t=gt("toUpperCase");return z8=De,z8}var nIe=tIe();const mK=Ou(nIe);function Tg(){var n="/home/runner/work/maputnik/maputnik/src/libs/label-from-field-name.ts",e="8b86d889d32efa9a6cc667b2fa3579002dfb58fc",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/label-from-field-name.ts",statementMap:{0:{start:{line:4,column:16},end:{line:4,column:36}},1:{start:{line:5,column:2},end:{line:9,column:3}},2:{start:{line:6,column:4},end:{line:6,column:52}},3:{start:{line:8,column:4},end:{line:8,column:22}},4:{start:{line:10,column:2},end:{line:10,column:27}}},fnMap:{0:{name:"labelFromFieldName",decl:{start:{line:2,column:24},end:{line:2,column:42}},loc:{start:{line:2,column:54},end:{line:11,column:1}},line:2}},branchMap:{0:{loc:{start:{line:5,column:2},end:{line:9,column:3}},type:"if",locations:[{start:{line:5,column:2},end:{line:9,column:3}},{start:{line:7,column:9},end:{line:9,column:3}}],line:5}},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/label-from-field-name.ts"],names:[],mappings:"AAAA,OAAO,gBAAgB;AAEvB,wBAAwB,mBAAmB,WAAmB;AAC5D,MAAI;AACJ,QAAM,QAAQ,UAAU,MAAM,GAAG;AACjC,MAAI,MAAM,SAAS,GAAG;AACpB,YAAQ,UAAU,MAAM,GAAG,EAAE,MAAM,CAAC,EAAE,KAAK,GAAG;AAAA,EAChD,OACK;AACH,YAAQ;AAAA,EACV;AACA,SAAO,WAAW,KAAK;AACzB;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8b86d889d32efa9a6cc667b2fa3579002dfb58fc"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Tg=function(){return s},s}Tg();function j6(n){Tg().f[0]++;let e;const t=(Tg().s[0]++,n.split("-"));return Tg().s[1]++,t.length>1?(Tg().b[0][0]++,Tg().s[2]++,e=n.split("-").slice(1).join(" ")):(Tg().b[0][1]++,Tg().s[3]++,e=n),Tg().s[4]++,mK(e)}function Ga(){var n="/home/runner/work/maputnik/maputnik/src/components/_ExpressionProperty.tsx",e="421a194a894795caa98e9aaeb6be503f0178c030",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/_ExpressionProperty.tsx",statementMap:{0:{start:{line:10,column:24},end:{line:16,column:3}},1:{start:{line:18,column:4},end:{line:18,column:17}},2:{start:{line:19,column:4},end:{line:21,column:6}},3:{start:{line:24,column:34},end:{line:24,column:44}},4:{start:{line:25,column:25},end:{line:25,column:52}},5:{start:{line:26,column:42},end:{line:48,column:8}},6:{start:{line:49,column:16},end:{line:49,column:22}},7:{start:{line:50,column:4},end:{line:53,column:5}},8:{start:{line:51,column:23},end:{line:51,column:118}},9:{start:{line:52,column:6},end:{line:52,column:42}},10:{start:{line:54,column:4},end:{line:75,column:6}},11:{start:{line:78,column:27},end:{line:78,column:72}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:12,column:13},end:{line:12,column:14}},loc:{start:{line:12,column:19},end:{line:13,column:5}},line:12},1:{name:"(anonymous_1)",decl:{start:{line:14,column:12},end:{line:14,column:13}},loc:{start:{line:14,column:18},end:{line:15,column:5}},line:14},2:{name:"(anonymous_2)",decl:{start:{line:17,column:2},end:{line:17,column:3}},loc:{start:{line:17,column:21},end:{line:22,column:3}},line:17},3:{name:"(anonymous_3)",decl:{start:{line:23,column:2},end:{line:23,column:3}},loc:{start:{line:23,column:11},end:{line:76,column:3}},line:23}},branchMap:{0:{loc:{start:{line:25,column:25},end:{line:25,column:52}},type:"cond-expr",locations:[{start:{line:25,column:35},end:{line:25,column:45}},{start:{line:25,column:48},end:{line:25,column:52}}],line:25},1:{loc:{start:{line:27,column:6},end:{line:37,column:7}},type:"binary-expr",locations:[{start:{line:27,column:6},end:{line:27,column:23}},{start:{line:27,column:43},end:{line:37,column:7}}],line:27},2:{loc:{start:{line:50,column:4},end:{line:53,column:5}},type:"if",locations:[{start:{line:50,column:4},end:{line:53,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:50},3:{loc:{start:{line:51,column:23},end:{line:51,column:118}},type:"cond-expr",locations:[{start:{line:51,column:46},end:{line:51,column:95}},{start:{line:51,column:98},end:{line:51,column:118}}],line:51}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},f:{0:0,1:0,2:0,3:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_ExpressionProperty.tsx"],names:[],mappings:"AA6CM,mBASM,KATN;AA7CN,OAAO,WAAW;AAClB,SAAQ,UAAU,cAAa;AAC/B,SAA+B,uBAAuB;AAEtD,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,wBAAwB;AAC/B,OAAO,eAAe;AAmBtB,MAAM,mCAAmC,MAAM,UAA2C;AAAA,EACxF,OAAO,eAAe;AAAA,IACpB,QAAQ,CAAC;AAAA,IACT,SAAS,MAAM;AAAA,IAAC;AAAA,IAChB,QAAQ,MAAM;AAAA,IAAC;AAAA,EACjB;AAAA,EAEA,YAAY,OAAwC;AAClD,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,WAAW;AAAA,IACb;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,GAAG,OAAO,QAAO,IAAI,KAAK;AACjC,UAAM,eAAe,UAAU,CAAC,QAAQ,IAAI;AAE5C,UAAM,gBACJ,iCACG;AAAA,WAAK,MAAM,UACV;AAAA,QAAC;AAAA;AAAA,UAEC,SAAS,KAAK,MAAM;AAAA,UACpB,UAAU;AAAA,UACV,WAAU;AAAA,UACV,OAAO,EAAE,wBAAwB;AAAA,UAEjC,8BAAC,UAAO;AAAA;AAAA,QANJ;AAAA,MAON;AAAA,MAEF;AAAA,QAAC;AAAA;AAAA,UAEC,SAAS,KAAK,MAAM;AAAA,UACpB,WAAU;AAAA,UACV,OAAO,EAAE,mBAAmB;AAAA,UAE5B,8BAAC,YAAS;AAAA;AAAA,QALN;AAAA,MAMN;AAAA,OACF;AAEF,QAAI,QAAQ;AACZ,QAAI,KAAK,MAAM,QAAQ;AACrB,YAAM,WAAW,KAAK,MAAM,YAAY,KAAK,MAAM,YAAY,MAAM,KAAK,MAAM,YAAY,KAAK,MAAM;AACvG,cAAQ,KAAK,MAAM,OAAO,QAAQ;AAAA,IACpC;AACA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAW,KAAK,MAAM;AAAA,QACtB,OAAO,EAAE,mBAAmB,KAAK,MAAM,SAAS,CAAC;AAAA,QACjD,QAAQ;AAAA,QACR,UAAU;AAAA,QACV;AAAA,QAEA;AAAA,UAAC;AAAA;AAAA,YACC,UAAS;AAAA,YACT,MAAM,KAAK,MAAM;AAAA,YACjB,WAAU;AAAA,YACV,SAAS,KAAK,MAAM;AAAA,YACpB,QAAQ,KAAK,MAAM;AAAA,YACnB;AAAA,YACA,UAAU,KAAK,MAAM;AAAA;AAAA,QACvB;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,qBAAqB,gBAAgB,EAAE,0BAA0B;AACvE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"421a194a894795caa98e9aaeb6be503f0178c030"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Ga=function(){return s},s}Ga();class iIe extends On.Component{static defaultProps=(Ga().s[0]++,{errors:{},onFocus:()=>{Ga().f[0]++},onBlur:()=>{Ga().f[1]++}});constructor(e){Ga().f[2]++,Ga().s[1]++,super(e),Ga().s[2]++,this.state={jsonError:!1}}render(){Ga().f[3]++;const{t:e,value:t,canUndo:i}=(Ga().s[3]++,this.props),r=(Ga().s[4]++,i?(Ga().b[0][0]++,!i()):(Ga().b[0][1]++,!0)),o=(Ga().s[5]++,te.jsxs(te.Fragment,{children:[(Ga().b[1][0]++,this.props.onUndo&&(Ga().b[1][1]++,te.jsx(Gs,{onClick:this.props.onUndo,disabled:r,className:"maputnik-delete-stop",title:e("Revert from expression"),children:te.jsx($he,{})},"undo_action"))),te.jsx(Gs,{onClick:this.props.onDelete,className:"maputnik-delete-stop",title:e("Delete expression"),children:te.jsx(nC,{})},"delete_action")]}));let s=(Ga().s[6]++,void 0);if(Ga().s[7]++,this.props.errors){Ga().b[2][0]++;const a=(Ga().s[8]++,this.props.fieldType?(Ga().b[3][0]++,this.props.fieldType+"."+this.props.fieldName):(Ga().b[3][1]++,this.props.fieldName));Ga().s[9]++,s=this.props.errors[a]}else Ga().b[2][1]++;return Ga().s[10]++,te.jsx(Ms,{fieldSpec:this.props.fieldSpec,label:e(j6(this.props.fieldName)),action:o,wideMode:!0,error:s,children:te.jsx(F6,{lintType:"expression",spec:this.props.fieldSpec,className:"maputnik-expression-editor",onFocus:this.props.onFocus,onBlur:this.props.onBlur,value:t,onChange:this.props.onChange})})}}const Tre=(Ga().s[11]++,Po()(iIe));function dn(){var n="/home/runner/work/maputnik/maputnik/src/components/FilterEditor.tsx",e="e47fcaaf47a881c798f8d8c8b2982ffb5ed75681",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FilterEditor.tsx",statementMap:{0:{start:{line:18,column:17},end:{line:18,column:40}},1:{start:{line:19,column:2},end:{line:21,column:3}},2:{start:{line:20,column:4},end:{line:20,column:18}},3:{start:{line:22,column:20},end:{line:22,column:29}},4:{start:{line:23,column:16},end:{line:23,column:31}},5:{start:{line:24,column:2},end:{line:27,column:3}},6:{start:{line:25,column:4},end:{line:25,column:24}},7:{start:{line:26,column:4},end:{line:26,column:32}},8:{start:{line:28,column:2},end:{line:28,column:35}},9:{start:{line:31,column:2},end:{line:31,column:65}},10:{start:{line:34,column:2},end:{line:55,column:4}},11:{start:{line:57,column:19},end:{line:61,column:1}},12:{start:{line:63,column:2},end:{line:65,column:3}},13:{start:{line:64,column:4},end:{line:64,column:16}},14:{start:{line:66,column:21},end:{line:66,column:42}},15:{start:{line:67,column:2},end:{line:67,column:38}},16:{start:{line:70,column:2},end:{line:70,column:52}},17:{start:{line:73,column:2},end:{line:75,column:3}},18:{start:{line:74,column:4},end:{line:74,column:97}},19:{start:{line:74,column:38},end:{line:74,column:59}},20:{start:{line:74,column:75},end:{line:74,column:84}},21:{start:{line:76,column:2},end:{line:76,column:15}},22:{start:{line:79,column:24},end:{line:81,column:3}},23:{start:{line:83,column:4},end:{line:83,column:17}},24:{start:{line:84,column:4},end:{line:87,column:6}},25:{start:{line:91,column:22},end:{line:91,column:58}},26:{start:{line:92,column:4},end:{line:92,column:35}},27:{start:{line:93,column:4},end:{line:93,column:35}},28:{start:{line:96,column:22},end:{line:96,column:58}},29:{start:{line:97,column:4},end:{line:97,column:39}},30:{start:{line:98,column:4},end:{line:98,column:35}},31:{start:{line:100,column:18},end:{line:104,column:3}},32:{start:{line:101,column:26},end:{line:101,column:62}},33:{start:{line:102,column:4},end:{line:102,column:43}},34:{start:{line:103,column:4},end:{line:103,column:39}},35:{start:{line:105,column:16},end:{line:109,column:3}},36:{start:{line:106,column:4},end:{line:108,column:7}},37:{start:{line:110,column:15},end:{line:114,column:3}},38:{start:{line:111,column:4},end:{line:113,column:7}},39:{start:{line:115,column:19},end:{line:121,column:3}},40:{start:{line:116,column:19},end:{line:116,column:46}},41:{start:{line:117,column:4},end:{line:117,column:47}},42:{start:{line:118,column:4},end:{line:120,column:7}},43:{start:{line:123,column:32},end:{line:123,column:75}},44:{start:{line:124,column:4},end:{line:137,column:5}},45:{start:{line:125,column:6},end:{line:128,column:8}},46:{start:{line:129,column:11},end:{line:137,column:5}},47:{start:{line:130,column:6},end:{line:132,column:8}},48:{start:{line:134,column:6},end:{line:136,column:8}},49:{start:{line:140,column:26},end:{line:140,column:36}},50:{start:{line:141,column:36},end:{line:141,column:46}},51:{start:{line:142,column:22},end:{line:144,column:5}},52:{start:{line:145,column:26},end:{line:145,column:33}},53:{start:{line:146,column:36},end:{line:146,column:112}},54:{start:{line:147,column:4},end:{line:270,column:5}},55:{start:{line:148,column:6},end:{line:161,column:11}},56:{start:{line:162,column:11},end:{line:270,column:5}},57:{start:{line:163,column:21},end:{line:163,column:48}},58:{start:{line:164,column:26},end:{line:164,column:35}},59:{start:{line:165,column:22},end:{line:165,column:37}},60:{start:{line:166,column:38},end:{line:174,column:10}},61:{start:{line:175,column:27},end:{line:188,column:8}},62:{start:{line:176,column:22},end:{line:176,column:50}},63:{start:{line:177,column:8},end:{line:187,column:29}},64:{start:{line:189,column:6},end:{line:240,column:11}},65:{start:{line:200,column:33},end:{line:200,column:63}},66:{start:{line:242,column:25},end:{line:242,column:35}},67:{start:{line:243,column:6},end:{line:269,column:11}},68:{start:{line:248,column:14},end:{line:248,column:59}},69:{start:{line:249,column:14},end:{line:249,column:49}},70:{start:{line:273,column:21},end:{line:273,column:60}}},fnMap:{0:{name:"combiningFilter",decl:{start:{line:17,column:9},end:{line:17,column:24}},loc:{start:{line:17,column:32},end:{line:29,column:1}},line:17},1:{name:"migrateFilter",decl:{start:{line:30,column:9},end:{line:30,column:22}},loc:{start:{line:30,column:31},end:{line:32,column:1}},line:30},2:{name:"createStyleFromFilter",decl:{start:{line:33,column:9},end:{line:33,column:30}},loc:{start:{line:33,column:39},end:{line:56,column:1}},line:33},3:{name:"checkIfSimpleFilter",decl:{start:{line:62,column:9},end:{line:62,column:28}},loc:{start:{line:62,column:37},end:{line:68,column:1}},line:62},4:{name:"hasCombiningFilter",decl:{start:{line:69,column:9},end:{line:69,column:27}},loc:{start:{line:69,column:36},end:{line:71,column:1}},line:69},5:{name:"hasNestedCombiningFilter",decl:{start:{line:72,column:9},end:{line:72,column:33}},loc:{start:{line:72,column:42},end:{line:77,column:1}},line:72},6:{name:"(anonymous_6)",decl:{start:{line:74,column:31},end:{line:74,column:32}},loc:{start:{line:74,column:38},end:{line:74,column:59}},line:74},7:{name:"(anonymous_7)",decl:{start:{line:74,column:68},end:{line:74,column:69}},loc:{start:{line:74,column:75},end:{line:74,column:84}},line:74},8:{name:"(anonymous_8)",decl:{start:{line:82,column:2},end:{line:82,column:3}},loc:{start:{line:82,column:21},end:{line:88,column:3}},line:82},9:{name:"(anonymous_9)",decl:{start:{line:90,column:2},end:{line:90,column:3}},loc:{start:{line:90,column:42},end:{line:94,column:3}},line:90},10:{name:"(anonymous_10)",decl:{start:{line:95,column:2},end:{line:95,column:3}},loc:{start:{line:95,column:30},end:{line:99,column:3}},line:95},11:{name:"(anonymous_11)",decl:{start:{line:100,column:18},end:{line:100,column:19}},loc:{start:{line:100,column:24},end:{line:104,column:3}},line:100},12:{name:"(anonymous_12)",decl:{start:{line:105,column:16},end:{line:105,column:17}},loc:{start:{line:105,column:25},end:{line:109,column:3}},line:105},13:{name:"(anonymous_13)",decl:{start:{line:110,column:15},end:{line:110,column:16}},loc:{start:{line:110,column:21},end:{line:114,column:3}},line:110},14:{name:"(anonymous_14)",decl:{start:{line:115,column:19},end:{line:115,column:20}},loc:{start:{line:115,column:25},end:{line:121,column:3}},line:115},15:{name:"(anonymous_15)",decl:{start:{line:122,column:2},end:{line:122,column:3}},loc:{start:{line:122,column:48},end:{line:138,column:3}},line:122},16:{name:"(anonymous_16)",decl:{start:{line:139,column:2},end:{line:139,column:3}},loc:{start:{line:139,column:11},end:{line:271,column:3}},line:139},17:{name:"(anonymous_17)",decl:{start:{line:175,column:39},end:{line:175,column:40}},loc:{start:{line:175,column:51},end:{line:188,column:7}},line:175},18:{name:"(anonymous_18)",decl:{start:{line:200,column:26},end:{line:200,column:27}},loc:{start:{line:200,column:33},end:{line:200,column:63}},line:200},19:{name:"(anonymous_19)",decl:{start:{line:247,column:22},end:{line:247,column:23}},loc:{start:{line:247,column:28},end:{line:250,column:13}},line:247}},branchMap:{0:{loc:{start:{line:18,column:17},end:{line:18,column:40}},type:"binary-expr",locations:[{start:{line:18,column:17},end:{line:18,column:29}},{start:{line:18,column:33},end:{line:18,column:40}}],line:18},1:{loc:{start:{line:19,column:2},end:{line:21,column:3}},type:"if",locations:[{start:{line:19,column:2},end:{line:21,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:19},2:{loc:{start:{line:24,column:2},end:{line:27,column:3}},type:"if",locations:[{start:{line:24,column:2},end:{line:27,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:24},3:{loc:{start:{line:63,column:2},end:{line:65,column:3}},type:"if",locations:[{start:{line:63,column:2},end:{line:65,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:63},4:{loc:{start:{line:63,column:6},end:{line:63,column:59}},type:"binary-expr",locations:[{start:{line:63,column:6},end:{line:63,column:25}},{start:{line:63,column:29},end:{line:63,column:59}}],line:63},5:{loc:{start:{line:73,column:2},end:{line:75,column:3}},type:"if",locations:[{start:{line:73,column:2},end:{line:75,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:73},6:{loc:{start:{line:124,column:4},end:{line:137,column:5}},type:"if",locations:[{start:{line:124,column:4},end:{line:137,column:5}},{start:{line:129,column:11},end:{line:137,column:5}}],line:124},7:{loc:{start:{line:124,column:8},end:{line:124,column:66}},type:"binary-expr",locations:[{start:{line:124,column:8},end:{line:124,column:28}},{start:{line:124,column:32},end:{line:124,column:66}}],line:124},8:{loc:{start:{line:129,column:11},end:{line:137,column:5}},type:"if",locations:[{start:{line:129,column:11},end:{line:137,column:5}},{start:{line:133,column:11},end:{line:137,column:5}}],line:129},9:{loc:{start:{line:129,column:15},end:{line:129,column:73}},type:"binary-expr",locations:[{start:{line:129,column:15},end:{line:129,column:34}},{start:{line:129,column:38},end:{line:129,column:73}}],line:129},10:{loc:{start:{line:146,column:36},end:{line:146,column:112}},type:"binary-expr",locations:[{start:{line:146,column:36},end:{line:146,column:55}},{start:{line:146,column:59},end:{line:146,column:112}}],line:146},11:{loc:{start:{line:147,column:4},end:{line:270,column:5}},type:"if",locations:[{start:{line:147,column:4},end:{line:270,column:5}},{start:{line:162,column:11},end:{line:270,column:5}}],line:147},12:{loc:{start:{line:162,column:11},end:{line:270,column:5}},type:"if",locations:[{start:{line:162,column:11},end:{line:270,column:5}},{start:{line:241,column:11},end:{line:270,column:5}}],line:162},13:{loc:{start:{line:186,column:10},end:{line:186,column:119}},type:"binary-expr",locations:[{start:{line:186,column:10},end:{line:186,column:15}},{start:{line:186,column:35},end:{line:186,column:119}}],line:186},14:{loc:{start:{line:235,column:30},end:{line:235,column:62}},type:"cond-expr",locations:[{start:{line:235,column:51},end:{line:235,column:53}},{start:{line:235,column:56},end:{line:235,column:62}}],line:235},15:{loc:{start:{line:257,column:8},end:{line:268,column:12}},type:"binary-expr",locations:[{start:{line:257,column:8},end:{line:257,column:38}},{start:{line:257,column:58},end:{line:268,column:12}}],line:257}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FilterEditor.tsx"],names:[],mappings:"AAkMQ,SAkDA,UAlDA,KAGA,YAHA;AAlMR,OAAO,WAAW;AAClB,SAAS,sBAAsB;AAC/B,SAAS,sBAAsB;AAC/B,SAAQ,eAAc;AAEtB,SAAQ,SAAS,qBAAoB;AACrC,OAAO,YAAY;AAEnB,SAAQ,0BAAyB;AACjC,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAClB,OAAO,wBAAwB;AAC/B,OAAO,uBAAuB;AAC9B,OAAO,iBAAiB;AACxB,OAAO,SAAS;AAChB,OAAO,wBAAwB;AAC/B,SAA+B,uBAAuB;AAItD,SAAS,gBAAgB,OAAuF;AAC9G,QAAM,SAAS,MAAM,UAAU,CAAC,KAAK;AAErC,MAAI,CAAC,MAAM,QAAQ,MAAM,GAAG;AAC1B,WAAO;AAAA,EACT;AAEA,MAAI,cAAc,OAAO,CAAC;AAC1B,MAAI,UAAU,OAAO,MAAM,CAAC;AAE5B,MAAG,mBAAmB,QAAQ,WAAW,IAAI,GAAG;AAC9C,kBAAc;AACd,cAAU,CAAC,OAAO,MAAM,CAAC,CAAC;AAAA,EAC5B;AAEA,SAAO,CAAC,aAAa,GAAG,OAAO;AACjC;AAEA,SAAS,cAAc,QAA6D;AAElF,SAAQ,QAAQ,sBAAsB,MAAM,CAAQ,EAAE,OAAO,CAAC,EAAU;AAC1E;AAEA,SAAS,sBAAsB,QAAuF;AACpH,SAAO;AAAA,IACL,MAAM;AAAA,IACN,WAAW;AAAA,IACX,QAAQ;AAAA,IACR,YAAY,EAAC,qBAAqB,SAAQ;AAAA,IAC1C,WAAW;AAAA,MACT,OAAO;AAAA,QACL,QAAQ;AAAA,QACR,QAAQ;AAAA,MACV;AAAA,IACF;AAAA,IACA,UAAU;AAAA,IACV,UAAU;AAAA,IACV,UAAU;AAAA,MACR;AAAA,QACE,IAAI;AAAA,QACJ,MAAM;AAAA,QACN,QAAQ;AAAA,QACR;AAAA,MACF;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,aAAa;AAAA,EACjB;AAAA,EACA;AAAA,EACA;AACF;AAGA,SAAS,oBAAqB,QAA6D;AACzF,MAAI,OAAO,WAAW,KAAK,WAAW,SAAS,OAAO,CAAC,CAAC,GAAG;AACzD,WAAO;AAAA,EACT;AACA,QAAM,aAAa,cAAc,MAAM;AACvC,SAAO,CAAC,QAAQ,YAAY,MAAM;AACpC;AAEA,SAAS,mBAAmB,QAA6D;AACvF,SAAO,mBAAmB,QAAQ,OAAO,CAAC,CAAC,KAAK;AAClD;AAEA,SAAS,yBAAyB,QAA6D;AAC7F,MAAG,mBAAmB,MAAM,GAAG;AAC7B,WAAO,OAAO,MAAM,CAAC,EAAE,IAAI,OAAK,mBAAmB,CAAQ,CAAC,EAAE,OAAO,OAAK,KAAK,IAAI,EAAE,SAAS;AAAA,EAChG;AACA,SAAO;AACT;AAgBA,MAAM,6BAA6B,MAAM,UAAwD;AAAA,EAC/F,OAAO,eAAe;AAAA,IACpB,QAAQ,CAAC,KAAK;AAAA,EAChB;AAAA,EAEA,YAAa,OAAkC;AAC7C,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,SAAS;AAAA,MACT,qBAAqB,oBAAoB,gBAAgB,KAAK,CAAC;AAAA,IACjE;AAAA,EACF;AAAA;AAAA,EAGA,oBAAoB,WAAmB,SAAgB;AACrD,UAAM,YAAY,gBAAgB,KAAK,KAAK,EAAE,MAAM,CAAC;AACrD,cAAU,SAAS,IAAI;AACvB,SAAK,MAAM,SAAS,SAAS;AAAA,EAC/B;AAAA,EAEA,iBAAiB,WAAmB;AAClC,UAAM,YAAY,gBAAgB,KAAK,KAAK,EAAE,MAAM,CAAC;AACrD,cAAU,OAAO,YAAY,GAAG,CAAC;AACjC,SAAK,MAAM,SAAS,SAAS;AAAA,EAC/B;AAAA,EAEA,gBAAgB,MAAM;AACpB,UAAM,gBAAgB,gBAAgB,KAAK,KAAK,EAAE,MAAM,CAAC;AACzD,IAAC,cAAwB,KAAK,CAAC,MAAM,QAAQ,EAAE,CAAC;AAChD,SAAK,MAAM,SAAS,aAAa;AAAA,EACnC;AAAA,EAEA,cAAc,CAAC,QAAiB;AAC9B,SAAK,SAAS;AAAA,MACZ,SAAS;AAAA,IACX,CAAC;AAAA,EACH;AAAA,EAEA,aAAa,MAAM;AACjB,SAAK,SAAS;AAAA,MACZ,qBAAqB;AAAA,IACvB,CAAC;AAAA,EACH;AAAA,EAEA,iBAAiB,MAAM;AACrB,UAAM,SAAS,gBAAgB,KAAK,KAAK;AACzC,SAAK,MAAM,SAAS,cAAc,MAAM,CAAC;AACzC,SAAK,SAAS;AAAA,MACZ,qBAAqB;AAAA,IACvB,CAAC;AAAA,EACH;AAAA,EAEA,OAAO,yBAAyB,OAA4C,OAA0B;AACpG,UAAM,sBAAsB,oBAAoB,gBAAgB,KAAK,CAAC;AAGtE,QAAI,CAAC,uBAAuB,MAAM,wBAAwB,MAAM;AAC9D,aAAO;AAAA,QACL,qBAAqB;AAAA,QACrB,qBAAqB;AAAA,MACvB;AAAA,IACF,WACS,uBAAuB,MAAM,wBAAwB,OAAO;AACnE,aAAO;AAAA,QACL,qBAAqB;AAAA,MACvB;AAAA,IACF,OACK;AACH,aAAO;AAAA,QACL,qBAAqB;AAAA,MACvB;AAAA,IACF;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,QAAQ,EAAC,IAAI,KAAK;AACzB,UAAM,EAAC,oBAAmB,IAAI,KAAK;AACnC,UAAM,YAAU;AAAA,MACd,KAAK,OAAO,MAAM,OAAO,MAAM;AAAA,IACjC;AACA,UAAM,gBAAgB,CAAC,KAAK;AAE5B,UAAM,0BAA0B,uBAAuB,yBAAyB,gBAAgB,KAAK,KAAK,CAAC;AAE3G,QAAI,yBAAyB;AAC3B,aAAO,qBAAC,SAAI,WAAU,sCACpB;AAAA,4BAAC,OACE,YAAE,mCAAmC,GACxC;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YACC,SAAS,KAAK;AAAA,YACd,OAAO,EAAE,uBAAuB;AAAA,YAEhC;AAAA,kCAAC,kBAAe;AAAA,cACf,EAAE,uBAAuB;AAAA;AAAA;AAAA,QAC5B;AAAA,SACF;AAAA,IACF,WACS,qBAAqB;AAC5B,YAAM,SAAS,gBAAgB,KAAK,KAAK;AACzC,YAAM,cAAc,OAAO,CAAC;AAC5B,YAAM,UAAU,OAAO,MAAM,CAAC;AAE9B,YAAM,UACJ,oBAAC,SACC;AAAA,QAAC;AAAA;AAAA,UACC,SAAS,KAAK;AAAA,UACd,OAAO,EAAE,uBAAuB;AAAA,UAChC,WAAU;AAAA,UAEV,8BAAC,kBAAe;AAAA;AAAA,MAClB,GACF;AAGF,YAAM,eAAe,QAAQ,IAAI,CAAC,GAAG,QAAQ;AAC3C,cAAM,QAAQ,OAAQ,UAAU,MAAI,CAAC,GAAG;AAExC,eACE,qBAAC,SACC;AAAA,8BAAC,qBAA4B,UAAU,KAAK,iBAAiB,KAAK,MAAM,GAAG,GACzE;AAAA,YAAC;AAAA;AAAA,cACC,YAAY,KAAK,MAAM;AAAA,cACvB,QAAQ;AAAA,cACR,UAAU,KAAK,oBAAoB,KAAK,MAAM,MAAM,CAAC;AAAA;AAAA,UACvD,KALsB,GAMxB;AAAA,UACC,SACC,oBAAC,SAAgB,WAAU,yBAAyB,gBAAM,WAAjD,OAAyD;AAAA,aAT5D,SAAS,GAAG,EAWtB;AAAA,MAEJ,CAAC;AAGD,aACE,iCACE;AAAA;AAAA,UAAC;AAAA;AAAA,YAEC;AAAA,YACA,OAAO,EAAE,QAAQ;AAAA,YACjB,QAAQ;AAAA,YAER;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO;AAAA,gBACP,UAAU,CAAC,MAAqB,KAAK,oBAAoB,GAAG,CAAC;AAAA,gBAC7D,SAAS;AAAA,kBACP,CAAC,OAAO,EAAE,sBAAsB,CAAC;AAAA,kBACjC,CAAC,QAAQ,EAAE,mBAAmB,CAAC;AAAA,kBAC/B,CAAC,OAAO,EAAE,oBAAoB,CAAC;AAAA,gBACjC;AAAA;AAAA,YACF;AAAA;AAAA,UAbI;AAAA,QAcN;AAAA,QACC;AAAA,QACD;AAAA,UAAC;AAAA;AAAA,YAEC,WAAU;AAAA,YAEV;AAAA,cAAC;AAAA;AAAA,gBACC,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACV,SAAS,KAAK;AAAA,gBAEd;AAAA,sCAAC,kBAAe,OAAO,EAAE,eAAe,cAAc,GAAG;AAAA,kBACxD,EAAE,YAAY;AAAA;AAAA;AAAA,YACjB;AAAA;AAAA,UAVI;AAAA,QAWN;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YAEC,WAAU;AAAA,YACV,OAAO,EAAC,SAAS,KAAK,MAAM,UAAU,KAAK,OAAM;AAAA,YAEjD,8BAAC,OAAI,WAAsB;AAAA;AAAA,UAJvB;AAAA,QAKN;AAAA,SACF;AAAA,IAEJ,OACK;AACH,YAAM,EAAC,OAAM,IAAI,KAAK;AAEtB,aACE,iCACE;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,UAAU,MAAM;AACd,mBAAK,SAAS,EAAC,qBAAqB,KAAI,CAAC;AACzC,mBAAK,MAAM,SAAS,aAAa;AAAA,YACnC;AAAA,YACA,WAAU;AAAA,YACV,OAAO;AAAA,YACP;AAAA,YACA,UAAU,KAAK,MAAM;AAAA;AAAA,QACvB;AAAA,QACC,KAAK,MAAM,uBACV,qBAAC,SAAI,WAAU,yBACZ;AAAA,YAAE,qCAAqC;AAAA,UACvC;AAAA,UACD;AAAA,YAAC;AAAA;AAAA,cACC,SAAS,KAAK;AAAA,cACd,WAAU;AAAA,cAET,YAAE,0BAA0B;AAAA;AAAA,UAC/B;AAAA,WACF;AAAA,SAEJ;AAAA,IAEJ;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e47fcaaf47a881c798f8d8c8b2982ffb5ed75681"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return dn=function(){return s},s}dn();function wy(n){dn().f[0]++;const e=(dn().s[0]++,dn().b[0][0]++,n.filter||(dn().b[0][1]++,["all"]));if(dn().s[1]++,Array.isArray(e))dn().b[1][1]++;else return dn().b[1][0]++,dn().s[2]++,e;let t=(dn().s[3]++,e[0]),i=(dn().s[4]++,e.slice(1));return dn().s[5]++,pK.indexOf(t)<0?(dn().b[2][0]++,dn().s[6]++,t="all",dn().s[7]++,i=[e.slice(0)]):dn().b[2][1]++,dn().s[8]++,[t,...i]}function rIe(n){return dn().f[1]++,dn().s[9]++,yAe(oIe(n)).layers[0].filter}function oIe(n){return dn().f[2]++,dn().s[10]++,{id:"tmp",version:8,name:"Empty Style",metadata:{"maputnik:renderer":"mlgljs"},sources:{tmp:{type:"geojson",data:""}},sprite:"",glyphs:"https://orangemug.github.io/font-glyphs/glyphs/{fontstack}/{range}.pbf",layers:[{id:"tmp",type:"fill",source:"tmp",filter:n}]}}const sIe=(dn().s[11]++,["all","any","none"]);function QW(n){if(dn().f[3]++,dn().s[12]++,dn().b[4][0]++,n.length===1&&(dn().b[4][1]++,sIe.includes(n[0])))return dn().b[3][0]++,dn().s[13]++,!0;dn().b[3][1]++;const e=(dn().s[14]++,l3(n));return dn().s[15]++,!Y4.isEqual(e,n)}function YW(n){return dn().f[4]++,dn().s[16]++,pK.indexOf(n[0])>=0}function aIe(n){return dn().f[5]++,dn().s[17]++,YW(n)?(dn().b[5][0]++,dn().s[18]++,n.slice(1).map(e=>(dn().f[6]++,dn().s[19]++,YW(e))).filter(e=>(dn().f[7]++,dn().s[20]++,e==!0)).length>0):(dn().b[5][1]++,dn().s[21]++,!1)}class lIe extends On.Component{static defaultProps=(dn().s[22]++,{filter:["all"]});constructor(e){dn().f[8]++,dn().s[23]++,super(e),dn().s[24]++,this.state={showDoc:!1,displaySimpleFilter:QW(wy(e))}}onFilterPartChanged(e,t){dn().f[9]++;const i=(dn().s[25]++,wy(this.props).slice(0));dn().s[26]++,i[e]=t,dn().s[27]++,this.props.onChange(i)}deleteFilterItem(e){dn().f[10]++;const t=(dn().s[28]++,wy(this.props).slice(0));dn().s[29]++,t.splice(e+1,1),dn().s[30]++,this.props.onChange(t)}addFilterItem=(dn().s[31]++,()=>{dn().f[11]++;const e=(dn().s[32]++,wy(this.props).slice(0));dn().s[33]++,e.push(["==","name",""]),dn().s[34]++,this.props.onChange(e)});onToggleDoc=(dn().s[35]++,e=>{dn().f[12]++,dn().s[36]++,this.setState({showDoc:e})});makeFilter=(dn().s[37]++,()=>{dn().f[13]++,dn().s[38]++,this.setState({displaySimpleFilter:!0})});makeExpression=(dn().s[39]++,()=>{dn().f[14]++;const e=(dn().s[40]++,wy(this.props));dn().s[41]++,this.props.onChange(rIe(e)),dn().s[42]++,this.setState({displaySimpleFilter:!1})});static getDerivedStateFromProps(e,t){dn().f[15]++;const i=(dn().s[43]++,QW(wy(e)));return dn().s[44]++,dn().b[7][0]++,!i&&(dn().b[7][1]++,t.displaySimpleFilter===!0)?(dn().b[6][0]++,dn().s[45]++,{displaySimpleFilter:!1,valueIsSimpleFilter:!1}):(dn().b[6][1]++,dn().s[46]++,dn().b[9][0]++,i&&(dn().b[9][1]++,t.displaySimpleFilter===!1)?(dn().b[8][0]++,dn().s[47]++,{valueIsSimpleFilter:!0}):(dn().b[8][1]++,dn().s[48]++,{valueIsSimpleFilter:!1}))}render(){dn().f[16]++;const{errors:e,t}=(dn().s[49]++,this.props),{displaySimpleFilter:i}=(dn().s[50]++,this.state),r=(dn().s[51]++,{doc:qr.layer.filter.doc+" Combine multiple filters together by using a compound filter."}),o=(dn().s[52]++,["all"]),s=(dn().s[53]++,dn().b[10][0]++,i&&(dn().b[10][1]++,aIe(wy(this.props))));if(dn().s[54]++,s)return dn().b[11][0]++,dn().s[55]++,te.jsxs("div",{className:"maputnik-filter-editor-unsupported",children:[te.jsx("p",{children:t("Nested filters are not supported.")}),te.jsxs(Gs,{onClick:this.makeExpression,title:t("Convert to expression"),children:[te.jsx(D4,{}),t("Upgrade to expression")]})]});if(dn().b[11][1]++,dn().s[56]++,i){dn().b[12][0]++;const a=(dn().s[57]++,wy(this.props)),c=(dn().s[58]++,a[0]),h=(dn().s[59]++,a.slice(1)),m=(dn().s[60]++,te.jsx("div",{children:te.jsx(Gs,{onClick:this.makeExpression,title:t("Convert to expression"),className:"maputnik-make-zoom-function",children:te.jsx(D4,{})})})),v=(dn().s[61]++,h.map((x,E)=>{dn().f[17]++;const D=(dn().s[62]++,e[`filter[${E+1}]`]);return dn().s[63]++,te.jsxs("div",{children:[te.jsx(eIe,{onDelete:this.deleteFilterItem.bind(this,E),children:te.jsx(X7e,{properties:this.props.properties,filter:x,onChange:this.onFilterPartChanged.bind(this,E+1)})},E),(dn().b[13][0]++,D&&(dn().b[13][1]++,te.jsx("div",{className:"maputnik-inline-error",children:D.message},"error")))]},`block-${E}`)}));return dn().s[64]++,te.jsxs(te.Fragment,{children:[te.jsx(Ms,{fieldSpec:r,label:t("Filter"),action:m,children:te.jsx(hC,{value:c,onChange:x=>(dn().f[18]++,dn().s[65]++,this.onFilterPartChanged(0,x)),options:[["all",t("every filter matches")],["none",t("no filter matches")],["any",t("any filter matches")]]})},"top"),v,te.jsx("div",{className:"maputnik-filter-editor-add-wrapper",children:te.jsxs(Gs,{"data-wd-key":"layer-filter-button",className:"maputnik-add-filter",onClick:this.addFilterItem,children:[te.jsx(z6,{style:{verticalAlign:"text-bottom"}}),t("Add filter")]})},"buttons"),te.jsx("div",{className:"maputnik-doc-inline",style:{display:this.state.showDoc?(dn().b[14][0]++,""):(dn().b[14][1]++,"none")},children:te.jsx(I6,{fieldSpec:r})},"doc")]})}else{dn().b[12][1]++;const{filter:a}=(dn().s[66]++,this.props);return dn().s[67]++,te.jsxs(te.Fragment,{children:[te.jsx(Tre,{onDelete:()=>{dn().f[19]++,dn().s[68]++,this.setState({displaySimpleFilter:!0}),dn().s[69]++,this.props.onChange(o)},fieldName:"filter",value:a,errors:e,onChange:this.props.onChange}),(dn().b[15][0]++,this.state.valueIsSimpleFilter&&(dn().b[15][1]++,te.jsxs("div",{className:"maputnik-expr-infobox",children:[t("You've entered an old style filter.")," ",te.jsx("button",{onClick:this.makeFilter,className:"maputnik-expr-infobox__button",children:t("Switch to filter editor.")})]})))]})}}}const uIe=(dn().s[70]++,Po()(lIe));var ZC={},cd={},XC={},j8,qW;function Rre(){if(qW)return j8;qW=1;var n=typeof window=="object"&&window&&window.Object===Object&&window;return j8=n,j8}var N8,VW;function Tm(){if(VW)return N8;VW=1;var n=Rre(),e=typeof self=="object"&&self&&self.Object===Object&&self,t=n||e||Function("return this")();return N8=t,N8}var G8,$W;function TM(){if($W)return G8;$W=1;var n=Tm(),e=n.Symbol;return G8=e,G8}var W8,HW;function cIe(){if(HW)return W8;HW=1;var n=TM(),e=Object.prototype,t=e.hasOwnProperty,i=e.toString,r=n?n.toStringTag:void 0;function o(s){var a=t.call(s,r),c=s[r];try{s[r]=void 0;var h=!0}catch{}var m=i.call(s);return h&&(a?s[r]=c:delete s[r]),m}return W8=o,W8}var Q8,ZW;function AIe(){if(ZW)return Q8;ZW=1;var n=Object.prototype,e=n.toString;function t(i){return e.call(i)}return Q8=t,Q8}var Y8,XW;function dC(){if(XW)return Y8;XW=1;var n=TM(),e=cIe(),t=AIe(),i="[object Null]",r="[object Undefined]",o=n?n.toStringTag:void 0;function s(a){return a==null?a===void 0?r:i:o&&o in Object(a)?e(a):t(a)}return Y8=s,Y8}var q8,JW;function bf(){if(JW)return q8;JW=1;var n=Array.isArray;return q8=n,q8}var V8,eQ;function p0(){if(eQ)return V8;eQ=1;function n(e){return e!=null&&typeof e=="object"}return V8=n,V8}var $8,tQ;function hIe(){if(tQ)return $8;tQ=1;var n=dC(),e=bf(),t=p0(),i="[object String]";function r(o){return typeof o=="string"||!e(o)&&t(o)&&n(o)==i}return $8=r,$8}var H8,nQ;function dIe(){if(nQ)return H8;nQ=1;function n(e){return function(t,i,r){for(var o=-1,s=Object(t),a=r(t),c=a.length;c--;){var h=a[e?c:++o];if(i(s[h],h,s)===!1)break}return t}}return H8=n,H8}var Z8,iQ;function Dre(){if(iQ)return Z8;iQ=1;var n=dIe(),e=n();return Z8=e,Z8}var X8,rQ;function fIe(){if(rQ)return X8;rQ=1;function n(e,t){for(var i=-1,r=Array(e);++i<e;)r[i]=t(i);return r}return X8=n,X8}var J8,oQ;function pIe(){if(oQ)return J8;oQ=1;var n=dC(),e=p0(),t="[object Arguments]";function i(r){return e(r)&&n(r)==t}return J8=i,J8}var e7,sQ;function gK(){if(sQ)return e7;sQ=1;var n=pIe(),e=p0(),t=Object.prototype,i=t.hasOwnProperty,r=t.propertyIsEnumerable,o=n((function(){return arguments})())?n:function(s){return e(s)&&i.call(s,"callee")&&!r.call(s,"callee")};return e7=o,e7}var J2={exports:{}},t7,aQ;function mIe(){if(aQ)return t7;aQ=1;function n(){return!1}return t7=n,t7}J2.exports;var lQ;function N6(){return lQ||(lQ=1,(function(n,e){var t=Tm(),i=mIe(),r=e&&!e.nodeType&&e,o=r&&!0&&n&&!n.nodeType&&n,s=o&&o.exports===r,a=s?t.Buffer:void 0,c=a?a.isBuffer:void 0,h=c||i;n.exports=h})(J2,J2.exports)),J2.exports}var n7,uQ;function yK(){if(uQ)return n7;uQ=1;var n=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function t(i,r){var o=typeof i;return r=r??n,!!r&&(o=="number"||o!="symbol"&&e.test(i))&&i>-1&&i%1==0&&i<r}return n7=t,n7}var i7,cQ;function vK(){if(cQ)return i7;cQ=1;var n=9007199254740991;function e(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=n}return i7=e,i7}var r7,AQ;function gIe(){if(AQ)return r7;AQ=1;var n=dC(),e=vK(),t=p0(),i="[object Arguments]",r="[object Array]",o="[object Boolean]",s="[object Date]",a="[object Error]",c="[object Function]",h="[object Map]",m="[object Number]",v="[object Object]",x="[object RegExp]",E="[object Set]",D="[object String]",P="[object WeakMap]",F="[object ArrayBuffer]",W="[object DataView]",q="[object Float32Array]",V="[object Float64Array]",H="[object Int8Array]",X="[object Int16Array]",Z="[object Int32Array]",G="[object Uint8Array]",oe="[object Uint8ClampedArray]",ue="[object Uint16Array]",xe="[object Uint32Array]",me={};me[q]=me[V]=me[H]=me[X]=me[Z]=me[G]=me[oe]=me[ue]=me[xe]=!0,me[i]=me[r]=me[F]=me[o]=me[W]=me[s]=me[a]=me[c]=me[h]=me[m]=me[v]=me[x]=me[E]=me[D]=me[P]=!1;function Ie(Me){return t(Me)&&e(Me.length)&&!!me[n(Me)]}return r7=Ie,r7}var o7,hQ;function bK(){if(hQ)return o7;hQ=1;function n(e){return function(t){return e(t)}}return o7=n,o7}var e3={exports:{}};e3.exports;var dQ;function CK(){return dQ||(dQ=1,(function(n,e){var t=Rre(),i=e&&!e.nodeType&&e,r=i&&!0&&n&&!n.nodeType&&n,o=r&&r.exports===i,s=o&&t.process,a=(function(){try{var c=r&&r.require&&r.require("util").types;return c||s&&s.binding&&s.binding("util")}catch{}})();n.exports=a})(e3,e3.exports)),e3.exports}var s7,fQ;function _K(){if(fQ)return s7;fQ=1;var n=gIe(),e=bK(),t=CK(),i=t&&t.isTypedArray,r=i?e(i):n;return s7=r,s7}var a7,pQ;function Pre(){if(pQ)return a7;pQ=1;var n=fIe(),e=gK(),t=bf(),i=N6(),r=yK(),o=_K(),s=Object.prototype,a=s.hasOwnProperty;function c(h,m){var v=t(h),x=!v&&e(h),E=!v&&!x&&i(h),D=!v&&!x&&!E&&o(h),P=v||x||E||D,F=P?n(h.length,String):[],W=F.length;for(var q in h)(m||a.call(h,q))&&!(P&&(q=="length"||E&&(q=="offset"||q=="parent")||D&&(q=="buffer"||q=="byteLength"||q=="byteOffset")||r(q,W)))&&F.push(q);return F}return a7=c,a7}var l7,mQ;function xK(){if(mQ)return l7;mQ=1;var n=Object.prototype;function e(t){var i=t&&t.constructor,r=typeof i=="function"&&i.prototype||n;return t===r}return l7=e,l7}var u7,gQ;function Ure(){if(gQ)return u7;gQ=1;function n(e,t){return function(i){return e(t(i))}}return u7=n,u7}var c7,yQ;function yIe(){if(yQ)return c7;yQ=1;var n=Ure(),e=n(Object.keys,Object);return c7=e,c7}var A7,vQ;function vIe(){if(vQ)return A7;vQ=1;var n=xK(),e=yIe(),t=Object.prototype,i=t.hasOwnProperty;function r(o){if(!n(o))return e(o);var s=[];for(var a in Object(o))i.call(o,a)&&a!="constructor"&&s.push(a);return s}return A7=r,A7}var h7,bQ;function cp(){if(bQ)return h7;bQ=1;function n(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}return h7=n,h7}var d7,CQ;function MK(){if(CQ)return d7;CQ=1;var n=dC(),e=cp(),t="[object AsyncFunction]",i="[object Function]",r="[object GeneratorFunction]",o="[object Proxy]";function s(a){if(!e(a))return!1;var c=n(a);return c==i||c==r||c==t||c==o}return d7=s,d7}var f7,_Q;function Zx(){if(_Q)return f7;_Q=1;var n=MK(),e=vK();function t(i){return i!=null&&e(i.length)&&!n(i)}return f7=t,f7}var p7,xQ;function RM(){if(xQ)return p7;xQ=1;var n=Pre(),e=vIe(),t=Zx();function i(r){return t(r)?n(r):e(r)}return p7=i,p7}var m7,MQ;function Kre(){if(MQ)return m7;MQ=1;var n=Dre(),e=RM();function t(i,r){return i&&n(i,r,e)}return m7=t,m7}var g7,wQ;function G6(){if(wQ)return g7;wQ=1;function n(e){return e}return g7=n,g7}var y7,SQ;function Lre(){if(SQ)return y7;SQ=1;var n=G6();function e(t){return typeof t=="function"?t:n}return y7=e,y7}var v7,EQ;function wK(){if(EQ)return v7;EQ=1;var n=Kre(),e=Lre();function t(i,r){return i&&n(i,e(r))}return v7=t,v7}var b7,BQ;function SK(){if(BQ)return b7;BQ=1;var n=Ure(),e=n(Object.getPrototypeOf,Object);return b7=e,b7}var C7,OQ;function Fre(){if(OQ)return C7;OQ=1;var n=dC(),e=SK(),t=p0(),i="[object Object]",r=Function.prototype,o=Object.prototype,s=r.toString,a=o.hasOwnProperty,c=s.call(Object);function h(m){if(!t(m)||n(m)!=i)return!1;var v=e(m);if(v===null)return!0;var x=a.call(v,"constructor")&&v.constructor;return typeof x=="function"&&x instanceof x&&s.call(x)==c}return C7=h,C7}var _7,IQ;function zre(){if(IQ)return _7;IQ=1;function n(e,t){for(var i=-1,r=e==null?0:e.length,o=Array(r);++i<r;)o[i]=t(e[i],i,e);return o}return _7=n,_7}var x7,kQ;function bIe(){if(kQ)return x7;kQ=1;function n(){this.__data__=[],this.size=0}return x7=n,x7}var M7,TQ;function DM(){if(TQ)return M7;TQ=1;function n(e,t){return e===t||e!==e&&t!==t}return M7=n,M7}var w7,RQ;function W6(){if(RQ)return w7;RQ=1;var n=DM();function e(t,i){for(var r=t.length;r--;)if(n(t[r][0],i))return r;return-1}return w7=e,w7}var S7,DQ;function CIe(){if(DQ)return S7;DQ=1;var n=W6(),e=Array.prototype,t=e.splice;function i(r){var o=this.__data__,s=n(o,r);if(s<0)return!1;var a=o.length-1;return s==a?o.pop():t.call(o,s,1),--this.size,!0}return S7=i,S7}var E7,PQ;function _Ie(){if(PQ)return E7;PQ=1;var n=W6();function e(t){var i=this.__data__,r=n(i,t);return r<0?void 0:i[r][1]}return E7=e,E7}var B7,UQ;function xIe(){if(UQ)return B7;UQ=1;var n=W6();function e(t){return n(this.__data__,t)>-1}return B7=e,B7}var O7,KQ;function MIe(){if(KQ)return O7;KQ=1;var n=W6();function e(t,i){var r=this.__data__,o=n(r,t);return o<0?(++this.size,r.push([t,i])):r[o][1]=i,this}return O7=e,O7}var I7,LQ;function Q6(){if(LQ)return I7;LQ=1;var n=bIe(),e=CIe(),t=_Ie(),i=xIe(),r=MIe();function o(s){var a=-1,c=s==null?0:s.length;for(this.clear();++a<c;){var h=s[a];this.set(h[0],h[1])}}return o.prototype.clear=n,o.prototype.delete=e,o.prototype.get=t,o.prototype.has=i,o.prototype.set=r,I7=o,I7}var k7,FQ;function wIe(){if(FQ)return k7;FQ=1;var n=Q6();function e(){this.__data__=new n,this.size=0}return k7=e,k7}var T7,zQ;function SIe(){if(zQ)return T7;zQ=1;function n(e){var t=this.__data__,i=t.delete(e);return this.size=t.size,i}return T7=n,T7}var R7,jQ;function EIe(){if(jQ)return R7;jQ=1;function n(e){return this.__data__.get(e)}return R7=n,R7}var D7,NQ;function BIe(){if(NQ)return D7;NQ=1;function n(e){return this.__data__.has(e)}return D7=n,D7}var P7,GQ;function OIe(){if(GQ)return P7;GQ=1;var n=Tm(),e=n["__core-js_shared__"];return P7=e,P7}var U7,WQ;function IIe(){if(WQ)return U7;WQ=1;var n=OIe(),e=(function(){var i=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||"");return i?"Symbol(src)_1."+i:""})();function t(i){return!!e&&e in i}return U7=t,U7}var K7,QQ;function jre(){if(QQ)return K7;QQ=1;var n=Function.prototype,e=n.toString;function t(i){if(i!=null){try{return e.call(i)}catch{}try{return i+""}catch{}}return""}return K7=t,K7}var L7,YQ;function kIe(){if(YQ)return L7;YQ=1;var n=MK(),e=IIe(),t=cp(),i=jre(),r=/[\\^$.*+?()[\]{}|]/g,o=/^\[object .+?Constructor\]$/,s=Function.prototype,a=Object.prototype,c=s.toString,h=a.hasOwnProperty,m=RegExp("^"+c.call(h).replace(r,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function v(x){if(!t(x)||e(x))return!1;var E=n(x)?m:o;return E.test(i(x))}return L7=v,L7}var F7,qQ;function TIe(){if(qQ)return F7;qQ=1;function n(e,t){return e?.[t]}return F7=n,F7}var z7,VQ;function fC(){if(VQ)return z7;VQ=1;var n=kIe(),e=TIe();function t(i,r){var o=e(i,r);return n(o)?o:void 0}return z7=t,z7}var j7,$Q;function EK(){if($Q)return j7;$Q=1;var n=fC(),e=Tm(),t=n(e,"Map");return j7=t,j7}var N7,HQ;function Y6(){if(HQ)return N7;HQ=1;var n=fC(),e=n(Object,"create");return N7=e,N7}var G7,ZQ;function RIe(){if(ZQ)return G7;ZQ=1;var n=Y6();function e(){this.__data__=n?n(null):{},this.size=0}return G7=e,G7}var W7,XQ;function DIe(){if(XQ)return W7;XQ=1;function n(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}return W7=n,W7}var Q7,JQ;function PIe(){if(JQ)return Q7;JQ=1;var n=Y6(),e="__lodash_hash_undefined__",t=Object.prototype,i=t.hasOwnProperty;function r(o){var s=this.__data__;if(n){var a=s[o];return a===e?void 0:a}return i.call(s,o)?s[o]:void 0}return Q7=r,Q7}var Y7,eY;function UIe(){if(eY)return Y7;eY=1;var n=Y6(),e=Object.prototype,t=e.hasOwnProperty;function i(r){var o=this.__data__;return n?o[r]!==void 0:t.call(o,r)}return Y7=i,Y7}var q7,tY;function KIe(){if(tY)return q7;tY=1;var n=Y6(),e="__lodash_hash_undefined__";function t(i,r){var o=this.__data__;return this.size+=this.has(i)?0:1,o[i]=n&&r===void 0?e:r,this}return q7=t,q7}var V7,nY;function LIe(){if(nY)return V7;nY=1;var n=RIe(),e=DIe(),t=PIe(),i=UIe(),r=KIe();function o(s){var a=-1,c=s==null?0:s.length;for(this.clear();++a<c;){var h=s[a];this.set(h[0],h[1])}}return o.prototype.clear=n,o.prototype.delete=e,o.prototype.get=t,o.prototype.has=i,o.prototype.set=r,V7=o,V7}var $7,iY;function FIe(){if(iY)return $7;iY=1;var n=LIe(),e=Q6(),t=EK();function i(){this.size=0,this.__data__={hash:new n,map:new(t||e),string:new n}}return $7=i,$7}var H7,rY;function zIe(){if(rY)return H7;rY=1;function n(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}return H7=n,H7}var Z7,oY;function q6(){if(oY)return Z7;oY=1;var n=zIe();function e(t,i){var r=t.__data__;return n(i)?r[typeof i=="string"?"string":"hash"]:r.map}return Z7=e,Z7}var X7,sY;function jIe(){if(sY)return X7;sY=1;var n=q6();function e(t){var i=n(this,t).delete(t);return this.size-=i?1:0,i}return X7=e,X7}var J7,aY;function NIe(){if(aY)return J7;aY=1;var n=q6();function e(t){return n(this,t).get(t)}return J7=e,J7}var eI,lY;function GIe(){if(lY)return eI;lY=1;var n=q6();function e(t){return n(this,t).has(t)}return eI=e,eI}var tI,uY;function WIe(){if(uY)return tI;uY=1;var n=q6();function e(t,i){var r=n(this,t),o=r.size;return r.set(t,i),this.size+=r.size==o?0:1,this}return tI=e,tI}var nI,cY;function BK(){if(cY)return nI;cY=1;var n=FIe(),e=jIe(),t=NIe(),i=GIe(),r=WIe();function o(s){var a=-1,c=s==null?0:s.length;for(this.clear();++a<c;){var h=s[a];this.set(h[0],h[1])}}return o.prototype.clear=n,o.prototype.delete=e,o.prototype.get=t,o.prototype.has=i,o.prototype.set=r,nI=o,nI}var iI,AY;function QIe(){if(AY)return iI;AY=1;var n=Q6(),e=EK(),t=BK(),i=200;function r(o,s){var a=this.__data__;if(a instanceof n){var c=a.__data__;if(!e||c.length<i-1)return c.push([o,s]),this.size=++a.size,this;a=this.__data__=new t(c)}return a.set(o,s),this.size=a.size,this}return iI=r,iI}var rI,hY;function V6(){if(hY)return rI;hY=1;var n=Q6(),e=wIe(),t=SIe(),i=EIe(),r=BIe(),o=QIe();function s(a){var c=this.__data__=new n(a);this.size=c.size}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=i,s.prototype.has=r,s.prototype.set=o,rI=s,rI}var oI,dY;function YIe(){if(dY)return oI;dY=1;var n="__lodash_hash_undefined__";function e(t){return this.__data__.set(t,n),this}return oI=e,oI}var sI,fY;function qIe(){if(fY)return sI;fY=1;function n(e){return this.__data__.has(e)}return sI=n,sI}var aI,pY;function VIe(){if(pY)return aI;pY=1;var n=BK(),e=YIe(),t=qIe();function i(r){var o=-1,s=r==null?0:r.length;for(this.__data__=new n;++o<s;)this.add(r[o])}return i.prototype.add=i.prototype.push=e,i.prototype.has=t,aI=i,aI}var lI,mY;function $Ie(){if(mY)return lI;mY=1;function n(e,t){for(var i=-1,r=e==null?0:e.length;++i<r;)if(t(e[i],i,e))return!0;return!1}return lI=n,lI}var uI,gY;function HIe(){if(gY)return uI;gY=1;function n(e,t){return e.has(t)}return uI=n,uI}var cI,yY;function Nre(){if(yY)return cI;yY=1;var n=VIe(),e=$Ie(),t=HIe(),i=1,r=2;function o(s,a,c,h,m,v){var x=c&i,E=s.length,D=a.length;if(E!=D&&!(x&&D>E))return!1;var P=v.get(s),F=v.get(a);if(P&&F)return P==a&&F==s;var W=-1,q=!0,V=c&r?new n:void 0;for(v.set(s,a),v.set(a,s);++W<E;){var H=s[W],X=a[W];if(h)var Z=x?h(X,H,W,a,s,v):h(H,X,W,s,a,v);if(Z!==void 0){if(Z)continue;q=!1;break}if(V){if(!e(a,function(G,oe){if(!t(V,oe)&&(H===G||m(H,G,c,h,v)))return V.push(oe)})){q=!1;break}}else if(!(H===X||m(H,X,c,h,v))){q=!1;break}}return v.delete(s),v.delete(a),q}return cI=o,cI}var AI,vY;function Gre(){if(vY)return AI;vY=1;var n=Tm(),e=n.Uint8Array;return AI=e,AI}var hI,bY;function ZIe(){if(bY)return hI;bY=1;function n(e){var t=-1,i=Array(e.size);return e.forEach(function(r,o){i[++t]=[o,r]}),i}return hI=n,hI}var dI,CY;function XIe(){if(CY)return dI;CY=1;function n(e){var t=-1,i=Array(e.size);return e.forEach(function(r){i[++t]=r}),i}return dI=n,dI}var fI,_Y;function JIe(){if(_Y)return fI;_Y=1;var n=TM(),e=Gre(),t=DM(),i=Nre(),r=ZIe(),o=XIe(),s=1,a=2,c="[object Boolean]",h="[object Date]",m="[object Error]",v="[object Map]",x="[object Number]",E="[object RegExp]",D="[object Set]",P="[object String]",F="[object Symbol]",W="[object ArrayBuffer]",q="[object DataView]",V=n?n.prototype:void 0,H=V?V.valueOf:void 0;function X(Z,G,oe,ue,xe,me,Ie){switch(oe){case q:if(Z.byteLength!=G.byteLength||Z.byteOffset!=G.byteOffset)return!1;Z=Z.buffer,G=G.buffer;case W:return!(Z.byteLength!=G.byteLength||!me(new e(Z),new e(G)));case c:case h:case x:return t(+Z,+G);case m:return Z.name==G.name&&Z.message==G.message;case E:case P:return Z==G+"";case v:var Me=r;case D:var Te=ue&s;if(Me||(Me=o),Z.size!=G.size&&!Te)return!1;var je=Ie.get(Z);if(je)return je==G;ue|=a,Ie.set(Z,G);var Ee=i(Me(Z),Me(G),ue,xe,me,Ie);return Ie.delete(Z),Ee;case F:if(H)return H.call(Z)==H.call(G)}return!1}return fI=X,fI}var pI,xY;function Wre(){if(xY)return pI;xY=1;function n(e,t){for(var i=-1,r=t.length,o=e.length;++i<r;)e[o+i]=t[i];return e}return pI=n,pI}var mI,MY;function Qre(){if(MY)return mI;MY=1;var n=Wre(),e=bf();function t(i,r,o){var s=r(i);return e(i)?s:n(s,o(i))}return mI=t,mI}var gI,wY;function eke(){if(wY)return gI;wY=1;function n(e,t){for(var i=-1,r=e==null?0:e.length,o=0,s=[];++i<r;){var a=e[i];t(a,i,e)&&(s[o++]=a)}return s}return gI=n,gI}var yI,SY;function Yre(){if(SY)return yI;SY=1;function n(){return[]}return yI=n,yI}var vI,EY;function OK(){if(EY)return vI;EY=1;var n=eke(),e=Yre(),t=Object.prototype,i=t.propertyIsEnumerable,r=Object.getOwnPropertySymbols,o=r?function(s){return s==null?[]:(s=Object(s),n(r(s),function(a){return i.call(s,a)}))}:e;return vI=o,vI}var bI,BY;function qre(){if(BY)return bI;BY=1;var n=Qre(),e=OK(),t=RM();function i(r){return n(r,t,e)}return bI=i,bI}var CI,OY;function tke(){if(OY)return CI;OY=1;var n=qre(),e=1,t=Object.prototype,i=t.hasOwnProperty;function r(o,s,a,c,h,m){var v=a&e,x=n(o),E=x.length,D=n(s),P=D.length;if(E!=P&&!v)return!1;for(var F=E;F--;){var W=x[F];if(!(v?W in s:i.call(s,W)))return!1}var q=m.get(o),V=m.get(s);if(q&&V)return q==s&&V==o;var H=!0;m.set(o,s),m.set(s,o);for(var X=v;++F<E;){W=x[F];var Z=o[W],G=s[W];if(c)var oe=v?c(G,Z,W,s,o,m):c(Z,G,W,o,s,m);if(!(oe===void 0?Z===G||h(Z,G,a,c,m):oe)){H=!1;break}X||(X=W=="constructor")}if(H&&!X){var ue=o.constructor,xe=s.constructor;ue!=xe&&"constructor"in o&&"constructor"in s&&!(typeof ue=="function"&&ue instanceof ue&&typeof xe=="function"&&xe instanceof xe)&&(H=!1)}return m.delete(o),m.delete(s),H}return CI=r,CI}var _I,IY;function nke(){if(IY)return _I;IY=1;var n=fC(),e=Tm(),t=n(e,"DataView");return _I=t,_I}var xI,kY;function ike(){if(kY)return xI;kY=1;var n=fC(),e=Tm(),t=n(e,"Promise");return xI=t,xI}var MI,TY;function rke(){if(TY)return MI;TY=1;var n=fC(),e=Tm(),t=n(e,"Set");return MI=t,MI}var wI,RY;function oke(){if(RY)return wI;RY=1;var n=fC(),e=Tm(),t=n(e,"WeakMap");return wI=t,wI}var SI,DY;function $6(){if(DY)return SI;DY=1;var n=nke(),e=EK(),t=ike(),i=rke(),r=oke(),o=dC(),s=jre(),a="[object Map]",c="[object Object]",h="[object Promise]",m="[object Set]",v="[object WeakMap]",x="[object DataView]",E=s(n),D=s(e),P=s(t),F=s(i),W=s(r),q=o;return(n&&q(new n(new ArrayBuffer(1)))!=x||e&&q(new e)!=a||t&&q(t.resolve())!=h||i&&q(new i)!=m||r&&q(new r)!=v)&&(q=function(V){var H=o(V),X=H==c?V.constructor:void 0,Z=X?s(X):"";if(Z)switch(Z){case E:return x;case D:return a;case P:return h;case F:return m;case W:return v}return H}),SI=q,SI}var EI,PY;function ske(){if(PY)return EI;PY=1;var n=V6(),e=Nre(),t=JIe(),i=tke(),r=$6(),o=bf(),s=N6(),a=_K(),c=1,h="[object Arguments]",m="[object Array]",v="[object Object]",x=Object.prototype,E=x.hasOwnProperty;function D(P,F,W,q,V,H){var X=o(P),Z=o(F),G=X?m:r(P),oe=Z?m:r(F);G=G==h?v:G,oe=oe==h?v:oe;var ue=G==v,xe=oe==v,me=G==oe;if(me&&s(P)){if(!s(F))return!1;X=!0,ue=!1}if(me&&!ue)return H||(H=new n),X||a(P)?e(P,F,W,q,V,H):t(P,F,G,W,q,V,H);if(!(W&c)){var Ie=ue&&E.call(P,"__wrapped__"),Me=xe&&E.call(F,"__wrapped__");if(Ie||Me){var Te=Ie?P.value():P,je=Me?F.value():F;return H||(H=new n),V(Te,je,W,q,H)}}return me?(H||(H=new n),i(P,F,W,q,V,H)):!1}return EI=D,EI}var BI,UY;function Vre(){if(UY)return BI;UY=1;var n=ske(),e=p0();function t(i,r,o,s,a){return i===r?!0:i==null||r==null||!e(i)&&!e(r)?i!==i&&r!==r:n(i,r,o,s,t,a)}return BI=t,BI}var OI,KY;function ake(){if(KY)return OI;KY=1;var n=V6(),e=Vre(),t=1,i=2;function r(o,s,a,c){var h=a.length,m=h,v=!c;if(o==null)return!m;for(o=Object(o);h--;){var x=a[h];if(v&&x[2]?x[1]!==o[x[0]]:!(x[0]in o))return!1}for(;++h<m;){x=a[h];var E=x[0],D=o[E],P=x[1];if(v&&x[2]){if(D===void 0&&!(E in o))return!1}else{var F=new n;if(c)var W=c(D,P,E,o,s,F);if(!(W===void 0?e(P,D,t|i,c,F):W))return!1}}return!0}return OI=r,OI}var II,LY;function $re(){if(LY)return II;LY=1;var n=cp();function e(t){return t===t&&!n(t)}return II=e,II}var kI,FY;function lke(){if(FY)return kI;FY=1;var n=$re(),e=RM();function t(i){for(var r=e(i),o=r.length;o--;){var s=r[o],a=i[s];r[o]=[s,a,n(a)]}return r}return kI=t,kI}var TI,zY;function Hre(){if(zY)return TI;zY=1;function n(e,t){return function(i){return i==null?!1:i[e]===t&&(t!==void 0||e in Object(i))}}return TI=n,TI}var RI,jY;function uke(){if(jY)return RI;jY=1;var n=ake(),e=lke(),t=Hre();function i(r){var o=e(r);return o.length==1&&o[0][2]?t(o[0][0],o[0][1]):function(s){return s===r||n(s,r,o)}}return RI=i,RI}var DI,NY;function H6(){if(NY)return DI;NY=1;var n=dC(),e=p0(),t="[object Symbol]";function i(r){return typeof r=="symbol"||e(r)&&n(r)==t}return DI=i,DI}var PI,GY;function IK(){if(GY)return PI;GY=1;var n=bf(),e=H6(),t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;function r(o,s){if(n(o))return!1;var a=typeof o;return a=="number"||a=="symbol"||a=="boolean"||o==null||e(o)?!0:i.test(o)||!t.test(o)||s!=null&&o in Object(s)}return PI=r,PI}var UI,WY;function cke(){if(WY)return UI;WY=1;var n=BK(),e="Expected a function";function t(i,r){if(typeof i!="function"||r!=null&&typeof r!="function")throw new TypeError(e);var o=function(){var s=arguments,a=r?r.apply(this,s):s[0],c=o.cache;if(c.has(a))return c.get(a);var h=i.apply(this,s);return o.cache=c.set(a,h)||c,h};return o.cache=new(t.Cache||n),o}return t.Cache=n,UI=t,UI}var KI,QY;function Ake(){if(QY)return KI;QY=1;var n=cke(),e=500;function t(i){var r=n(i,function(s){return o.size===e&&o.clear(),s}),o=r.cache;return r}return KI=t,KI}var LI,YY;function hke(){if(YY)return LI;YY=1;var n=Ake(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,t=/\\(\\)?/g,i=n(function(r){var o=[];return r.charCodeAt(0)===46&&o.push(""),r.replace(e,function(s,a,c,h){o.push(c?h.replace(t,"$1"):a||s)}),o});return LI=i,LI}var FI,qY;function dke(){if(qY)return FI;qY=1;var n=TM(),e=zre(),t=bf(),i=H6(),r=n?n.prototype:void 0,o=r?r.toString:void 0;function s(a){if(typeof a=="string")return a;if(t(a))return e(a,s)+"";if(i(a))return o?o.call(a):"";var c=a+"";return c=="0"&&1/a==-1/0?"-0":c}return FI=s,FI}var zI,VY;function fke(){if(VY)return zI;VY=1;var n=dke();function e(t){return t==null?"":n(t)}return zI=e,zI}var jI,$Y;function Zre(){if($Y)return jI;$Y=1;var n=bf(),e=IK(),t=hke(),i=fke();function r(o,s){return n(o)?o:e(o,s)?[o]:t(i(o))}return jI=r,jI}var NI,HY;function Z6(){if(HY)return NI;HY=1;var n=H6();function e(t){if(typeof t=="string"||n(t))return t;var i=t+"";return i=="0"&&1/t==-1/0?"-0":i}return NI=e,NI}var GI,ZY;function Xre(){if(ZY)return GI;ZY=1;var n=Zre(),e=Z6();function t(i,r){r=n(r,i);for(var o=0,s=r.length;i!=null&&o<s;)i=i[e(r[o++])];return o&&o==s?i:void 0}return GI=t,GI}var WI,XY;function pke(){if(XY)return WI;XY=1;var n=Xre();function e(t,i,r){var o=t==null?void 0:n(t,i);return o===void 0?r:o}return WI=e,WI}var QI,JY;function mke(){if(JY)return QI;JY=1;function n(e,t){return e!=null&&t in Object(e)}return QI=n,QI}var YI,eq;function gke(){if(eq)return YI;eq=1;var n=Zre(),e=gK(),t=bf(),i=yK(),r=vK(),o=Z6();function s(a,c,h){c=n(c,a);for(var m=-1,v=c.length,x=!1;++m<v;){var E=o(c[m]);if(!(x=a!=null&&h(a,E)))break;a=a[E]}return x||++m!=v?x:(v=a==null?0:a.length,!!v&&r(v)&&i(E,v)&&(t(a)||e(a)))}return YI=s,YI}var qI,tq;function yke(){if(tq)return qI;tq=1;var n=mke(),e=gke();function t(i,r){return i!=null&&e(i,r,n)}return qI=t,qI}var VI,nq;function vke(){if(nq)return VI;nq=1;var n=Vre(),e=pke(),t=yke(),i=IK(),r=$re(),o=Hre(),s=Z6(),a=1,c=2;function h(m,v){return i(m)&&r(v)?o(s(m),v):function(x){var E=e(x,m);return E===void 0&&E===v?t(x,m):n(v,E,a|c)}}return VI=h,VI}var $I,iq;function bke(){if(iq)return $I;iq=1;function n(e){return function(t){return t?.[e]}}return $I=n,$I}var HI,rq;function Cke(){if(rq)return HI;rq=1;var n=Xre();function e(t){return function(i){return n(i,t)}}return HI=e,HI}var ZI,oq;function _ke(){if(oq)return ZI;oq=1;var n=bke(),e=Cke(),t=IK(),i=Z6();function r(o){return t(o)?n(i(o)):e(o)}return ZI=r,ZI}var XI,sq;function xke(){if(sq)return XI;sq=1;var n=uke(),e=vke(),t=G6(),i=bf(),r=_ke();function o(s){return typeof s=="function"?s:s==null?t:typeof s=="object"?i(s)?e(s[0],s[1]):n(s):r(s)}return XI=o,XI}var JI,aq;function Mke(){if(aq)return JI;aq=1;var n=Zx();function e(t,i){return function(r,o){if(r==null)return r;if(!n(r))return t(r,o);for(var s=r.length,a=i?s:-1,c=Object(r);(i?a--:++a<s)&&o(c[a],a,c)!==!1;);return r}}return JI=e,JI}var ek,lq;function Jre(){if(lq)return ek;lq=1;var n=Kre(),e=Mke(),t=e(n);return ek=t,ek}var tk,uq;function wke(){if(uq)return tk;uq=1;var n=Jre(),e=Zx();function t(i,r){var o=-1,s=e(i)?Array(i.length):[];return n(i,function(a,c,h){s[++o]=r(a,c,h)}),s}return tk=t,tk}var nk,cq;function Ske(){if(cq)return nk;cq=1;var n=zre(),e=xke(),t=wke(),i=bf();function r(o,s){var a=i(o)?n:t;return a(o,e(s,3))}return nk=r,nk}var Aq;function Eke(){if(Aq)return XC;Aq=1,Object.defineProperty(XC,"__esModule",{value:!0}),XC.flattenNames=void 0;var n=hIe(),e=c(n),t=wK(),i=c(t),r=Fre(),o=c(r),s=Ske(),a=c(s);function c(m){return m&&m.__esModule?m:{default:m}}var h=XC.flattenNames=function m(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],x=[];return(0,a.default)(v,function(E){Array.isArray(E)?m(E).map(function(D){return x.push(D)}):(0,o.default)(E)?(0,i.default)(E,function(D,P){D===!0&&x.push(P),x.push(P+"-"+D)}):(0,e.default)(E)&&x.push(E)}),x};return XC.default=h,XC}var JC={},ik,hq;function eoe(){if(hq)return ik;hq=1;function n(e,t){for(var i=-1,r=e==null?0:e.length;++i<r&&t(e[i],i,e)!==!1;);return e}return ik=n,ik}var rk,dq;function toe(){if(dq)return rk;dq=1;var n=fC(),e=(function(){try{var t=n(Object,"defineProperty");return t({},"",{}),t}catch{}})();return rk=e,rk}var ok,fq;function kK(){if(fq)return ok;fq=1;var n=toe();function e(t,i,r){i=="__proto__"&&n?n(t,i,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[i]=r}return ok=e,ok}var sk,pq;function noe(){if(pq)return sk;pq=1;var n=kK(),e=DM(),t=Object.prototype,i=t.hasOwnProperty;function r(o,s,a){var c=o[s];(!(i.call(o,s)&&e(c,a))||a===void 0&&!(s in o))&&n(o,s,a)}return sk=r,sk}var ak,mq;function PM(){if(mq)return ak;mq=1;var n=noe(),e=kK();function t(i,r,o,s){var a=!o;o||(o={});for(var c=-1,h=r.length;++c<h;){var m=r[c],v=s?s(o[m],i[m],m,o,i):void 0;v===void 0&&(v=i[m]),a?e(o,m,v):n(o,m,v)}return o}return ak=t,ak}var lk,gq;function Bke(){if(gq)return lk;gq=1;var n=PM(),e=RM();function t(i,r){return i&&n(r,e(r),i)}return lk=t,lk}var uk,yq;function Oke(){if(yq)return uk;yq=1;function n(e){var t=[];if(e!=null)for(var i in Object(e))t.push(i);return t}return uk=n,uk}var ck,vq;function Ike(){if(vq)return ck;vq=1;var n=cp(),e=xK(),t=Oke(),i=Object.prototype,r=i.hasOwnProperty;function o(s){if(!n(s))return t(s);var a=e(s),c=[];for(var h in s)h=="constructor"&&(a||!r.call(s,h))||c.push(h);return c}return ck=o,ck}var Ak,bq;function UM(){if(bq)return Ak;bq=1;var n=Pre(),e=Ike(),t=Zx();function i(r){return t(r)?n(r,!0):e(r)}return Ak=i,Ak}var hk,Cq;function kke(){if(Cq)return hk;Cq=1;var n=PM(),e=UM();function t(i,r){return i&&n(r,e(r),i)}return hk=t,hk}var t3={exports:{}};t3.exports;var _q;function ioe(){return _q||(_q=1,(function(n,e){var t=Tm(),i=e&&!e.nodeType&&e,r=i&&!0&&n&&!n.nodeType&&n,o=r&&r.exports===i,s=o?t.Buffer:void 0,a=s?s.allocUnsafe:void 0;function c(h,m){if(m)return h.slice();var v=h.length,x=a?a(v):new h.constructor(v);return h.copy(x),x}n.exports=c})(t3,t3.exports)),t3.exports}var dk,xq;function roe(){if(xq)return dk;xq=1;function n(e,t){var i=-1,r=e.length;for(t||(t=Array(r));++i<r;)t[i]=e[i];return t}return dk=n,dk}var fk,Mq;function Tke(){if(Mq)return fk;Mq=1;var n=PM(),e=OK();function t(i,r){return n(i,e(i),r)}return fk=t,fk}var pk,wq;function ooe(){if(wq)return pk;wq=1;var n=Wre(),e=SK(),t=OK(),i=Yre(),r=Object.getOwnPropertySymbols,o=r?function(s){for(var a=[];s;)n(a,t(s)),s=e(s);return a}:i;return pk=o,pk}var mk,Sq;function Rke(){if(Sq)return mk;Sq=1;var n=PM(),e=ooe();function t(i,r){return n(i,e(i),r)}return mk=t,mk}var gk,Eq;function Dke(){if(Eq)return gk;Eq=1;var n=Qre(),e=ooe(),t=UM();function i(r){return n(r,t,e)}return gk=i,gk}var yk,Bq;function Pke(){if(Bq)return yk;Bq=1;var n=Object.prototype,e=n.hasOwnProperty;function t(i){var r=i.length,o=new i.constructor(r);return r&&typeof i[0]=="string"&&e.call(i,"index")&&(o.index=i.index,o.input=i.input),o}return yk=t,yk}var vk,Oq;function TK(){if(Oq)return vk;Oq=1;var n=Gre();function e(t){var i=new t.constructor(t.byteLength);return new n(i).set(new n(t)),i}return vk=e,vk}var bk,Iq;function Uke(){if(Iq)return bk;Iq=1;var n=TK();function e(t,i){var r=i?n(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}return bk=e,bk}var Ck,kq;function Kke(){if(kq)return Ck;kq=1;var n=/\w*$/;function e(t){var i=new t.constructor(t.source,n.exec(t));return i.lastIndex=t.lastIndex,i}return Ck=e,Ck}var _k,Tq;function Lke(){if(Tq)return _k;Tq=1;var n=TM(),e=n?n.prototype:void 0,t=e?e.valueOf:void 0;function i(r){return t?Object(t.call(r)):{}}return _k=i,_k}var xk,Rq;function soe(){if(Rq)return xk;Rq=1;var n=TK();function e(t,i){var r=i?n(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}return xk=e,xk}var Mk,Dq;function Fke(){if(Dq)return Mk;Dq=1;var n=TK(),e=Uke(),t=Kke(),i=Lke(),r=soe(),o="[object Boolean]",s="[object Date]",a="[object Map]",c="[object Number]",h="[object RegExp]",m="[object Set]",v="[object String]",x="[object Symbol]",E="[object ArrayBuffer]",D="[object DataView]",P="[object Float32Array]",F="[object Float64Array]",W="[object Int8Array]",q="[object Int16Array]",V="[object Int32Array]",H="[object Uint8Array]",X="[object Uint8ClampedArray]",Z="[object Uint16Array]",G="[object Uint32Array]";function oe(ue,xe,me){var Ie=ue.constructor;switch(xe){case E:return n(ue);case o:case s:return new Ie(+ue);case D:return e(ue,me);case P:case F:case W:case q:case V:case H:case X:case Z:case G:return r(ue,me);case a:return new Ie;case c:case v:return new Ie(ue);case h:return t(ue);case m:return new Ie;case x:return i(ue)}}return Mk=oe,Mk}var wk,Pq;function zke(){if(Pq)return wk;Pq=1;var n=cp(),e=Object.create,t=(function(){function i(){}return function(r){if(!n(r))return{};if(e)return e(r);i.prototype=r;var o=new i;return i.prototype=void 0,o}})();return wk=t,wk}var Sk,Uq;function aoe(){if(Uq)return Sk;Uq=1;var n=zke(),e=SK(),t=xK();function i(r){return typeof r.constructor=="function"&&!t(r)?n(e(r)):{}}return Sk=i,Sk}var Ek,Kq;function jke(){if(Kq)return Ek;Kq=1;var n=$6(),e=p0(),t="[object Map]";function i(r){return e(r)&&n(r)==t}return Ek=i,Ek}var Bk,Lq;function Nke(){if(Lq)return Bk;Lq=1;var n=jke(),e=bK(),t=CK(),i=t&&t.isMap,r=i?e(i):n;return Bk=r,Bk}var Ok,Fq;function Gke(){if(Fq)return Ok;Fq=1;var n=$6(),e=p0(),t="[object Set]";function i(r){return e(r)&&n(r)==t}return Ok=i,Ok}var Ik,zq;function Wke(){if(zq)return Ik;zq=1;var n=Gke(),e=bK(),t=CK(),i=t&&t.isSet,r=i?e(i):n;return Ik=r,Ik}var kk,jq;function Qke(){if(jq)return kk;jq=1;var n=V6(),e=eoe(),t=noe(),i=Bke(),r=kke(),o=ioe(),s=roe(),a=Tke(),c=Rke(),h=qre(),m=Dke(),v=$6(),x=Pke(),E=Fke(),D=aoe(),P=bf(),F=N6(),W=Nke(),q=cp(),V=Wke(),H=RM(),X=UM(),Z=1,G=2,oe=4,ue="[object Arguments]",xe="[object Array]",me="[object Boolean]",Ie="[object Date]",Me="[object Error]",Te="[object Function]",je="[object GeneratorFunction]",Ee="[object Map]",qe="[object Number]",At="[object Object]",gt="[object RegExp]",Le="[object Set]",Re="[object String]",Ge="[object Symbol]",De="[object WeakMap]",_t="[object ArrayBuffer]",at="[object DataView]",Tt="[object Float32Array]",Kt="[object Float64Array]",Ke="[object Int8Array]",Oe="[object Int16Array]",Be="[object Int32Array]",Ve="[object Uint8Array]",yt="[object Uint8ClampedArray]",ft="[object Uint16Array]",Ct="[object Uint32Array]",Lt={};Lt[ue]=Lt[xe]=Lt[_t]=Lt[at]=Lt[me]=Lt[Ie]=Lt[Tt]=Lt[Kt]=Lt[Ke]=Lt[Oe]=Lt[Be]=Lt[Ee]=Lt[qe]=Lt[At]=Lt[gt]=Lt[Le]=Lt[Re]=Lt[Ge]=Lt[Ve]=Lt[yt]=Lt[ft]=Lt[Ct]=!0,Lt[Me]=Lt[Te]=Lt[De]=!1;function kt(an,Hn,Wn,_i,Ln,Un){var xn,Zn=Hn&Z,Rn=Hn&G,Ot=Hn&oe;if(Wn&&(xn=Ln?Wn(an,_i,Ln,Un):Wn(an)),xn!==void 0)return xn;if(!q(an))return an;var be=P(an);if(be){if(xn=x(an),!Zn)return s(an,xn)}else{var ie=v(an),le=ie==Te||ie==je;if(F(an))return o(an,Zn);if(ie==At||ie==ue||le&&!Ln){if(xn=Rn||le?{}:D(an),!Zn)return Rn?c(an,r(xn,an)):a(an,i(xn,an))}else{if(!Lt[ie])return Ln?an:{};xn=E(an,ie,Zn)}}Un||(Un=new n);var de=Un.get(an);if(de)return de;Un.set(an,xn),V(an)?an.forEach(function(ve){xn.add(kt(ve,Hn,Wn,ve,an,Un))}):W(an)&&an.forEach(function(ve,We){xn.set(We,kt(ve,Hn,Wn,We,an,Un))});var se=Ot?Rn?m:h:Rn?X:H,Ae=be?void 0:se(an);return e(Ae||an,function(ve,We){Ae&&(We=ve,ve=an[We]),t(xn,We,kt(ve,Hn,Wn,We,an,Un))}),xn}return kk=kt,kk}var Tk,Nq;function Yke(){if(Nq)return Tk;Nq=1;var n=Qke(),e=1,t=4;function i(r){return n(r,e|t)}return Tk=i,Tk}var Gq;function qke(){if(Gq)return JC;Gq=1,Object.defineProperty(JC,"__esModule",{value:!0}),JC.mergeClasses=void 0;var n=wK(),e=o(n),t=Yke(),i=o(t),r=Object.assign||function(a){for(var c=1;c<arguments.length;c++){var h=arguments[c];for(var m in h)Object.prototype.hasOwnProperty.call(h,m)&&(a[m]=h[m])}return a};function o(a){return a&&a.__esModule?a:{default:a}}var s=JC.mergeClasses=function(c){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],m=c.default&&(0,i.default)(c.default)||{};return h.map(function(v){var x=c[v];return x&&(0,e.default)(x,function(E,D){m[D]||(m[D]={}),m[D]=r({},m[D],x[D])}),v}),m};return JC.default=s,JC}var e_={},Wq;function Vke(){if(Wq)return e_;Wq=1,Object.defineProperty(e_,"__esModule",{value:!0}),e_.autoprefix=void 0;var n=wK(),e=i(n),t=Object.assign||function(s){for(var a=1;a<arguments.length;a++){var c=arguments[a];for(var h in c)Object.prototype.hasOwnProperty.call(c,h)&&(s[h]=c[h])}return s};function i(s){return s&&s.__esModule?s:{default:s}}var r={borderRadius:function(a){return{msBorderRadius:a,MozBorderRadius:a,OBorderRadius:a,WebkitBorderRadius:a,borderRadius:a}},boxShadow:function(a){return{msBoxShadow:a,MozBoxShadow:a,OBoxShadow:a,WebkitBoxShadow:a,boxShadow:a}},userSelect:function(a){return{WebkitTouchCallout:a,KhtmlUserSelect:a,MozUserSelect:a,msUserSelect:a,WebkitUserSelect:a,userSelect:a}},flex:function(a){return{WebkitBoxFlex:a,MozBoxFlex:a,WebkitFlex:a,msFlex:a,flex:a}},flexBasis:function(a){return{WebkitFlexBasis:a,flexBasis:a}},justifyContent:function(a){return{WebkitJustifyContent:a,justifyContent:a}},transition:function(a){return{msTransition:a,MozTransition:a,OTransition:a,WebkitTransition:a,transition:a}},transform:function(a){return{msTransform:a,MozTransform:a,OTransform:a,WebkitTransform:a,transform:a}},absolute:function(a){var c=a&&a.split(" ");return{position:"absolute",top:c&&c[0],right:c&&c[1],bottom:c&&c[2],left:c&&c[3]}},extend:function(a,c){var h=c[a];return h||{extend:a}}},o=e_.autoprefix=function(a){var c={};return(0,e.default)(a,function(h,m){var v={};(0,e.default)(h,function(x,E){var D=r[E];D?v=t({},v,D(x)):v[E]=x}),c[m]=v}),c};return e_.default=o,e_}var t_={},Qq;function $ke(){if(Qq)return t_;Qq=1,Object.defineProperty(t_,"__esModule",{value:!0}),t_.hover=void 0;var n=Object.assign||function(c){for(var h=1;h<arguments.length;h++){var m=arguments[h];for(var v in m)Object.prototype.hasOwnProperty.call(m,v)&&(c[v]=m[v])}return c},e=Oa(),t=i(e);function i(c){return c&&c.__esModule?c:{default:c}}function r(c,h){if(!(c instanceof h))throw new TypeError("Cannot call a class as a function")}function o(c,h){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:c}function s(c,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);c.prototype=Object.create(h&&h.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(c,h):c.__proto__=h)}var a=t_.hover=function(h){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return(function(v){s(x,v);function x(){var E,D,P,F;r(this,x);for(var W=arguments.length,q=Array(W),V=0;V<W;V++)q[V]=arguments[V];return F=(D=(P=o(this,(E=x.__proto__||Object.getPrototypeOf(x)).call.apply(E,[this].concat(q))),P),P.state={hover:!1},P.handleMouseOver=function(){return P.setState({hover:!0})},P.handleMouseOut=function(){return P.setState({hover:!1})},P.render=function(){return t.default.createElement(m,{onMouseOver:P.handleMouseOver,onMouseOut:P.handleMouseOut},t.default.createElement(h,n({},P.props,P.state)))},D),o(P,F)}return x})(t.default.Component)};return t_.default=a,t_}var n_={},Yq;function Hke(){if(Yq)return n_;Yq=1,Object.defineProperty(n_,"__esModule",{value:!0}),n_.active=void 0;var n=Object.assign||function(c){for(var h=1;h<arguments.length;h++){var m=arguments[h];for(var v in m)Object.prototype.hasOwnProperty.call(m,v)&&(c[v]=m[v])}return c},e=Oa(),t=i(e);function i(c){return c&&c.__esModule?c:{default:c}}function r(c,h){if(!(c instanceof h))throw new TypeError("Cannot call a class as a function")}function o(c,h){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:c}function s(c,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);c.prototype=Object.create(h&&h.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(c,h):c.__proto__=h)}var a=n_.active=function(h){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return(function(v){s(x,v);function x(){var E,D,P,F;r(this,x);for(var W=arguments.length,q=Array(W),V=0;V<W;V++)q[V]=arguments[V];return F=(D=(P=o(this,(E=x.__proto__||Object.getPrototypeOf(x)).call.apply(E,[this].concat(q))),P),P.state={active:!1},P.handleMouseDown=function(){return P.setState({active:!0})},P.handleMouseUp=function(){return P.setState({active:!1})},P.render=function(){return t.default.createElement(m,{onMouseDown:P.handleMouseDown,onMouseUp:P.handleMouseUp},t.default.createElement(h,n({},P.props,P.state)))},D),o(P,F)}return x})(t.default.Component)};return n_.default=a,n_}var $5={},qq;function Zke(){if(qq)return $5;qq=1,Object.defineProperty($5,"__esModule",{value:!0});var n=function(t,i){var r={},o=function(a){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;r[a]=c};return t===0&&o("first-child"),t===i-1&&o("last-child"),(t===0||t%2===0)&&o("even"),Math.abs(t%2)===1&&o("odd"),o("nth-child",t),r};return $5.default=n,$5}var Vq;function Rm(){if(Vq)return cd;Vq=1,Object.defineProperty(cd,"__esModule",{value:!0}),cd.ReactCSS=cd.loop=cd.handleActive=cd.handleHover=cd.hover=void 0;var n=Eke(),e=x(n),t=qke(),i=x(t),r=Vke(),o=x(r),s=$ke(),a=x(s),c=Hke(),h=x(c),m=Zke(),v=x(m);function x(D){return D&&D.__esModule?D:{default:D}}cd.hover=a.default,cd.handleHover=a.default,cd.handleActive=h.default,cd.loop=v.default;var E=cd.ReactCSS=function(P){for(var F=arguments.length,W=Array(F>1?F-1:0),q=1;q<F;q++)W[q-1]=arguments[q];var V=(0,e.default)(W),H=(0,i.default)(P,V);return(0,o.default)(H)};return cd.default=E,cd}var Rk,$q;function loe(){if($q)return Rk;$q=1;var n=kK(),e=DM();function t(i,r,o){(o!==void 0&&!e(i[r],o)||o===void 0&&!(r in i))&&n(i,r,o)}return Rk=t,Rk}var Dk,Hq;function Xke(){if(Hq)return Dk;Hq=1;var n=Zx(),e=p0();function t(i){return e(i)&&n(i)}return Dk=t,Dk}var Pk,Zq;function uoe(){if(Zq)return Pk;Zq=1;function n(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}return Pk=n,Pk}var Uk,Xq;function Jke(){if(Xq)return Uk;Xq=1;var n=PM(),e=UM();function t(i){return n(i,e(i))}return Uk=t,Uk}var Kk,Jq;function eTe(){if(Jq)return Kk;Jq=1;var n=loe(),e=ioe(),t=soe(),i=roe(),r=aoe(),o=gK(),s=bf(),a=Xke(),c=N6(),h=MK(),m=cp(),v=Fre(),x=_K(),E=uoe(),D=Jke();function P(F,W,q,V,H,X,Z){var G=E(F,q),oe=E(W,q),ue=Z.get(oe);if(ue){n(F,q,ue);return}var xe=X?X(G,oe,q+"",F,W,Z):void 0,me=xe===void 0;if(me){var Ie=s(oe),Me=!Ie&&c(oe),Te=!Ie&&!Me&&x(oe);xe=oe,Ie||Me||Te?s(G)?xe=G:a(G)?xe=i(G):Me?(me=!1,xe=e(oe,!0)):Te?(me=!1,xe=t(oe,!0)):xe=[]:v(oe)||o(oe)?(xe=G,o(G)?xe=D(G):(!m(G)||h(G))&&(xe=r(oe))):me=!1}me&&(Z.set(oe,xe),H(xe,oe,V,X,Z),Z.delete(oe)),n(F,q,xe)}return Kk=P,Kk}var Lk,eV;function tTe(){if(eV)return Lk;eV=1;var n=V6(),e=loe(),t=Dre(),i=eTe(),r=cp(),o=UM(),s=uoe();function a(c,h,m,v,x){c!==h&&t(h,function(E,D){if(x||(x=new n),r(E))i(c,h,D,m,a,v,x);else{var P=v?v(s(c,D),E,D+"",c,h,x):void 0;P===void 0&&(P=E),e(c,D,P)}},o)}return Lk=a,Lk}var Fk,tV;function nTe(){if(tV)return Fk;tV=1;function n(e,t,i){switch(i.length){case 0:return e.call(t);case 1:return e.call(t,i[0]);case 2:return e.call(t,i[0],i[1]);case 3:return e.call(t,i[0],i[1],i[2])}return e.apply(t,i)}return Fk=n,Fk}var zk,nV;function iTe(){if(nV)return zk;nV=1;var n=nTe(),e=Math.max;function t(i,r,o){return r=e(r===void 0?i.length-1:r,0),function(){for(var s=arguments,a=-1,c=e(s.length-r,0),h=Array(c);++a<c;)h[a]=s[r+a];a=-1;for(var m=Array(r+1);++a<r;)m[a]=s[a];return m[r]=o(h),n(i,this,m)}}return zk=t,zk}var jk,iV;function rTe(){if(iV)return jk;iV=1;function n(e){return function(){return e}}return jk=n,jk}var Nk,rV;function oTe(){if(rV)return Nk;rV=1;var n=rTe(),e=toe(),t=G6(),i=e?function(r,o){return e(r,"toString",{configurable:!0,enumerable:!1,value:n(o),writable:!0})}:t;return Nk=i,Nk}var Gk,oV;function sTe(){if(oV)return Gk;oV=1;var n=800,e=16,t=Date.now;function i(r){var o=0,s=0;return function(){var a=t(),c=e-(a-s);if(s=a,c>0){if(++o>=n)return arguments[0]}else o=0;return r.apply(void 0,arguments)}}return Gk=i,Gk}var Wk,sV;function aTe(){if(sV)return Wk;sV=1;var n=oTe(),e=sTe(),t=e(n);return Wk=t,Wk}var Qk,aV;function lTe(){if(aV)return Qk;aV=1;var n=G6(),e=iTe(),t=aTe();function i(r,o){return t(e(r,o,n),r+"")}return Qk=i,Qk}var Yk,lV;function uTe(){if(lV)return Yk;lV=1;var n=DM(),e=Zx(),t=yK(),i=cp();function r(o,s,a){if(!i(a))return!1;var c=typeof s;return(c=="number"?e(a)&&t(s,a.length):c=="string"&&s in a)?n(a[s],o):!1}return Yk=r,Yk}var qk,uV;function cTe(){if(uV)return qk;uV=1;var n=lTe(),e=uTe();function t(i){return n(function(r,o){var s=-1,a=o.length,c=a>1?o[a-1]:void 0,h=a>2?o[2]:void 0;for(c=i.length>3&&typeof c=="function"?(a--,c):void 0,h&&e(o[0],o[1],h)&&(c=a<3?void 0:c,a=1),r=Object(r);++s<a;){var m=o[s];m&&i(r,m,s,c)}return r})}return qk=t,qk}var Vk,cV;function coe(){if(cV)return Vk;cV=1;var n=tTe(),e=cTe(),t=e(function(i,r,o){n(i,r,o)});return Vk=t,Vk}var $k={},i_={},H5={},AV;function ATe(){return AV||(AV=1,Object.defineProperty(H5,"__esModule",{value:!0}),H5.calculateChange=function(e,t,i,r,o){var s=o.clientWidth,a=o.clientHeight,c=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,h=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,m=c-(o.getBoundingClientRect().left+window.pageXOffset),v=h-(o.getBoundingClientRect().top+window.pageYOffset);if(i==="vertical"){var x=void 0;if(v<0?x=0:v>a?x=1:x=Math.round(v*100/a)/100,t.a!==x)return{h:t.h,s:t.s,l:t.l,a:x,source:"rgb"}}else{var E=void 0;if(m<0?E=0:m>s?E=1:E=Math.round(m*100/s)/100,r!==E)return{h:t.h,s:t.s,l:t.l,a:E,source:"rgb"}}return null}),H5}var r_={},I2={},hV;function hTe(){if(hV)return I2;hV=1,Object.defineProperty(I2,"__esModule",{value:!0});var n={},e=I2.render=function(i,r,o,s){if(typeof document>"u"&&!s)return null;var a=s?new s:document.createElement("canvas");a.width=o*2,a.height=o*2;var c=a.getContext("2d");return c?(c.fillStyle=i,c.fillRect(0,0,a.width,a.height),c.fillStyle=r,c.fillRect(0,0,o,o),c.translate(o,o),c.fillRect(0,0,o,o),a.toDataURL()):null};return I2.get=function(i,r,o,s){var a=i+"-"+r+"-"+o+(s?"-server":"");if(n[a])return n[a];var c=e(i,r,o,s);return n[a]=c,c},I2}var dV;function RK(){if(dV)return r_;dV=1,Object.defineProperty(r_,"__esModule",{value:!0}),r_.Checkboard=void 0;var n=Object.assign||function(m){for(var v=1;v<arguments.length;v++){var x=arguments[v];for(var E in x)Object.prototype.hasOwnProperty.call(x,E)&&(m[E]=x[E])}return m},e=Oa(),t=c(e),i=Rm(),r=c(i),o=hTe(),s=a(o);function a(m){if(m&&m.__esModule)return m;var v={};if(m!=null)for(var x in m)Object.prototype.hasOwnProperty.call(m,x)&&(v[x]=m[x]);return v.default=m,v}function c(m){return m&&m.__esModule?m:{default:m}}var h=r_.Checkboard=function(v){var x=v.white,E=v.grey,D=v.size,P=v.renderers,F=v.borderRadius,W=v.boxShadow,q=v.children,V=(0,r.default)({default:{grid:{borderRadius:F,boxShadow:W,absolute:"0px 0px 0px 0px",background:"url("+s.get(x,E,D,P.canvas)+") center left"}}});return(0,e.isValidElement)(q)?t.default.cloneElement(q,n({},q.props,{style:n({},q.props.style,V.grid)})):t.default.createElement("div",{style:V.grid})};return h.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}},r_.default=h,r_}var fV;function dTe(){if(fV)return i_;fV=1,Object.defineProperty(i_,"__esModule",{value:!0}),i_.Alpha=void 0;var n=Object.assign||function(F){for(var W=1;W<arguments.length;W++){var q=arguments[W];for(var V in q)Object.prototype.hasOwnProperty.call(q,V)&&(F[V]=q[V])}return F},e=(function(){function F(W,q){for(var V=0;V<q.length;V++){var H=q[V];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(W,H.key,H)}}return function(W,q,V){return q&&F(W.prototype,q),V&&F(W,V),W}})(),t=Oa(),i=v(t),r=Rm(),o=v(r),s=ATe(),a=m(s),c=RK(),h=v(c);function m(F){if(F&&F.__esModule)return F;var W={};if(F!=null)for(var q in F)Object.prototype.hasOwnProperty.call(F,q)&&(W[q]=F[q]);return W.default=F,W}function v(F){return F&&F.__esModule?F:{default:F}}function x(F,W){if(!(F instanceof W))throw new TypeError("Cannot call a class as a function")}function E(F,W){if(!F)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return W&&(typeof W=="object"||typeof W=="function")?W:F}function D(F,W){if(typeof W!="function"&&W!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof W);F.prototype=Object.create(W&&W.prototype,{constructor:{value:F,enumerable:!1,writable:!0,configurable:!0}}),W&&(Object.setPrototypeOf?Object.setPrototypeOf(F,W):F.__proto__=W)}var P=i_.Alpha=(function(F){D(W,F);function W(){var q,V,H,X;x(this,W);for(var Z=arguments.length,G=Array(Z),oe=0;oe<Z;oe++)G[oe]=arguments[oe];return X=(V=(H=E(this,(q=W.__proto__||Object.getPrototypeOf(W)).call.apply(q,[this].concat(G))),H),H.handleChange=function(ue){var xe=a.calculateChange(ue,H.props.hsl,H.props.direction,H.props.a,H.container);xe&&typeof H.props.onChange=="function"&&H.props.onChange(xe,ue)},H.handleMouseDown=function(ue){H.handleChange(ue),window.addEventListener("mousemove",H.handleChange),window.addEventListener("mouseup",H.handleMouseUp)},H.handleMouseUp=function(){H.unbindEventListeners()},H.unbindEventListeners=function(){window.removeEventListener("mousemove",H.handleChange),window.removeEventListener("mouseup",H.handleMouseUp)},V),E(H,X)}return e(W,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var V=this,H=this.props.rgb,X=(0,o.default)({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+H.r+","+H.g+","+H.b+`, 0) 0%,
           rgba(`+H.r+","+H.g+","+H.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:H.a*100+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+H.r+","+H.g+","+H.b+`, 0) 0%,
           rgba(`+H.r+","+H.g+","+H.b+", 1) 100%)"},pointer:{left:0,top:H.a*100+"%"}},overwrite:n({},this.props.style)},{vertical:this.props.direction==="vertical",overwrite:!0});return i.default.createElement("div",{style:X.alpha},i.default.createElement("div",{style:X.checkboard},i.default.createElement(h.default,{renderers:this.props.renderers})),i.default.createElement("div",{style:X.gradient}),i.default.createElement("div",{style:X.container,ref:function(G){return V.container=G},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},i.default.createElement("div",{style:X.pointer},this.props.pointer?i.default.createElement(this.props.pointer,this.props):i.default.createElement("div",{style:X.slider}))))}}]),W})(t.PureComponent||t.Component);return i_.default=P,i_}var o_={},pV;function fTe(){if(pV)return o_;pV=1,Object.defineProperty(o_,"__esModule",{value:!0}),o_.EditableInput=void 0;var n=(function(){function q(V,H){for(var X=0;X<H.length;X++){var Z=H[X];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(V,Z.key,Z)}}return function(V,H,X){return H&&q(V.prototype,H),X&&q(V,X),V}})(),e=Oa(),t=o(e),i=Rm(),r=o(i);function o(q){return q&&q.__esModule?q:{default:q}}function s(q,V,H){return V in q?Object.defineProperty(q,V,{value:H,enumerable:!0,configurable:!0,writable:!0}):q[V]=H,q}function a(q,V){if(!(q instanceof V))throw new TypeError("Cannot call a class as a function")}function c(q,V){if(!q)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return V&&(typeof V=="object"||typeof V=="function")?V:q}function h(q,V){if(typeof V!="function"&&V!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof V);q.prototype=Object.create(V&&V.prototype,{constructor:{value:q,enumerable:!1,writable:!0,configurable:!0}}),V&&(Object.setPrototypeOf?Object.setPrototypeOf(q,V):q.__proto__=V)}var m=1,v=38,x=40,E=[v,x],D=function(V){return E.indexOf(V)>-1},P=function(V){return Number(String(V).replace(/%/g,""))},F=1,W=o_.EditableInput=(function(q){h(V,q);function V(H){a(this,V);var X=c(this,(V.__proto__||Object.getPrototypeOf(V)).call(this));return X.handleBlur=function(){X.state.blurValue&&X.setState({value:X.state.blurValue,blurValue:null})},X.handleChange=function(Z){X.setUpdatedValue(Z.target.value,Z)},X.handleKeyDown=function(Z){var G=P(Z.target.value);if(!isNaN(G)&&D(Z.keyCode)){var oe=X.getArrowOffset(),ue=Z.keyCode===v?G+oe:G-oe;X.setUpdatedValue(ue,Z)}},X.handleDrag=function(Z){if(X.props.dragLabel){var G=Math.round(X.props.value+Z.movementX);G>=0&&G<=X.props.dragMax&&X.props.onChange&&X.props.onChange(X.getValueObjectWithLabel(G),Z)}},X.handleMouseDown=function(Z){X.props.dragLabel&&(Z.preventDefault(),X.handleDrag(Z),window.addEventListener("mousemove",X.handleDrag),window.addEventListener("mouseup",X.handleMouseUp))},X.handleMouseUp=function(){X.unbindEventListeners()},X.unbindEventListeners=function(){window.removeEventListener("mousemove",X.handleDrag),window.removeEventListener("mouseup",X.handleMouseUp)},X.state={value:String(H.value).toUpperCase(),blurValue:String(H.value).toUpperCase()},X.inputId="rc-editable-input-"+F++,X}return n(V,[{key:"componentDidUpdate",value:function(X,Z){this.props.value!==this.state.value&&(X.value!==this.props.value||Z.value!==this.state.value)&&(this.input===document.activeElement?this.setState({blurValue:String(this.props.value).toUpperCase()}):this.setState({value:String(this.props.value).toUpperCase(),blurValue:!this.state.blurValue&&String(this.props.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"getValueObjectWithLabel",value:function(X){return s({},this.props.label,X)}},{key:"getArrowOffset",value:function(){return this.props.arrowOffset||m}},{key:"setUpdatedValue",value:function(X,Z){var G=this.props.label?this.getValueObjectWithLabel(X):X;this.props.onChange&&this.props.onChange(G,Z),this.setState({value:X})}},{key:"render",value:function(){var X=this,Z=(0,r.default)({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return t.default.createElement("div",{style:Z.wrap},t.default.createElement("input",{id:this.inputId,style:Z.input,ref:function(oe){return X.input=oe},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?t.default.createElement("label",{htmlFor:this.inputId,style:Z.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),V})(e.PureComponent||e.Component);return o_.default=W,o_}var s_={},Z5={},mV;function pTe(){return mV||(mV=1,Object.defineProperty(Z5,"__esModule",{value:!0}),Z5.calculateChange=function(e,t,i,r){var o=r.clientWidth,s=r.clientHeight,a=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,c=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,h=a-(r.getBoundingClientRect().left+window.pageXOffset),m=c-(r.getBoundingClientRect().top+window.pageYOffset);if(t==="vertical"){var v=void 0;if(m<0)v=359;else if(m>s)v=0;else{var x=-(m*100/s)+100;v=360*x/100}if(i.h!==v)return{h:v,s:i.s,l:i.l,a:i.a,source:"hsl"}}else{var E=void 0;if(h<0)E=0;else if(h>o)E=359;else{var D=h*100/o;E=360*D/100}if(i.h!==E)return{h:E,s:i.s,l:i.l,a:i.a,source:"hsl"}}return null}),Z5}var gV;function mTe(){if(gV)return s_;gV=1,Object.defineProperty(s_,"__esModule",{value:!0}),s_.Hue=void 0;var n=(function(){function E(D,P){for(var F=0;F<P.length;F++){var W=P[F];W.enumerable=W.enumerable||!1,W.configurable=!0,"value"in W&&(W.writable=!0),Object.defineProperty(D,W.key,W)}}return function(D,P,F){return P&&E(D.prototype,P),F&&E(D,F),D}})(),e=Oa(),t=c(e),i=Rm(),r=c(i),o=pTe(),s=a(o);function a(E){if(E&&E.__esModule)return E;var D={};if(E!=null)for(var P in E)Object.prototype.hasOwnProperty.call(E,P)&&(D[P]=E[P]);return D.default=E,D}function c(E){return E&&E.__esModule?E:{default:E}}function h(E,D){if(!(E instanceof D))throw new TypeError("Cannot call a class as a function")}function m(E,D){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return D&&(typeof D=="object"||typeof D=="function")?D:E}function v(E,D){if(typeof D!="function"&&D!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof D);E.prototype=Object.create(D&&D.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),D&&(Object.setPrototypeOf?Object.setPrototypeOf(E,D):E.__proto__=D)}var x=s_.Hue=(function(E){v(D,E);function D(){var P,F,W,q;h(this,D);for(var V=arguments.length,H=Array(V),X=0;X<V;X++)H[X]=arguments[X];return q=(F=(W=m(this,(P=D.__proto__||Object.getPrototypeOf(D)).call.apply(P,[this].concat(H))),W),W.handleChange=function(Z){var G=s.calculateChange(Z,W.props.direction,W.props.hsl,W.container);G&&typeof W.props.onChange=="function"&&W.props.onChange(G,Z)},W.handleMouseDown=function(Z){W.handleChange(Z),window.addEventListener("mousemove",W.handleChange),window.addEventListener("mouseup",W.handleMouseUp)},W.handleMouseUp=function(){W.unbindEventListeners()},F),m(W,q)}return n(D,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var F=this,W=this.props.direction,q=W===void 0?"horizontal":W,V=(0,r.default)({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:this.props.hsl.h*100/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-(this.props.hsl.h*100/360)+100+"%"}}},{vertical:q==="vertical"});return t.default.createElement("div",{style:V.hue},t.default.createElement("div",{className:"hue-"+q,style:V.container,ref:function(X){return F.container=X},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},t.default.createElement("style",null,`
            .hue-horizontal {
              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0
                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to right, #f00 0%, #ff0
                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }

            .hue-vertical {
              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,
                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,
                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }
          `),t.default.createElement("div",{style:V.pointer},this.props.pointer?t.default.createElement(this.props.pointer,this.props):t.default.createElement("div",{style:V.slider}))))}}]),D})(e.PureComponent||e.Component);return s_.default=x,s_}var a_={},yV;function gTe(){if(yV)return a_;yV=1,Object.defineProperty(a_,"__esModule",{value:!0}),a_.Raised=void 0;var n=Oa(),e=c(n),t=M1(),i=c(t),r=Rm(),o=c(r),s=coe(),a=c(s);function c(m){return m&&m.__esModule?m:{default:m}}var h=a_.Raised=function(v){var x=v.zDepth,E=v.radius,D=v.background,P=v.children,F=v.styles,W=F===void 0?{}:F,q=(0,o.default)((0,a.default)({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+x+"px "+x*4+"px rgba(0,0,0,.24)",borderRadius:E,background:D}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},W),{"zDepth-1":x===1});return e.default.createElement("div",{style:q.wrap},e.default.createElement("div",{style:q.bg}),e.default.createElement("div",{style:q.content},P))};return h.propTypes={background:i.default.string,zDepth:i.default.oneOf([0,1,2,3,4,5]),radius:i.default.number,styles:i.default.object},h.defaultProps={background:"#fff",zDepth:1,radius:2,styles:{}},a_.default=h,a_}var l_={},Hk,vV;function yTe(){if(vV)return Hk;vV=1;var n=Tm(),e=function(){return n.Date.now()};return Hk=e,Hk}var Zk,bV;function vTe(){if(bV)return Zk;bV=1;var n=/\s/;function e(t){for(var i=t.length;i--&&n.test(t.charAt(i)););return i}return Zk=e,Zk}var Xk,CV;function bTe(){if(CV)return Xk;CV=1;var n=vTe(),e=/^\s+/;function t(i){return i&&i.slice(0,n(i)+1).replace(e,"")}return Xk=t,Xk}var Jk,_V;function CTe(){if(_V)return Jk;_V=1;var n=bTe(),e=cp(),t=H6(),i=NaN,r=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,s=/^0o[0-7]+$/i,a=parseInt;function c(h){if(typeof h=="number")return h;if(t(h))return i;if(e(h)){var m=typeof h.valueOf=="function"?h.valueOf():h;h=e(m)?m+"":m}if(typeof h!="string")return h===0?h:+h;h=n(h);var v=o.test(h);return v||s.test(h)?a(h.slice(2),v?2:8):r.test(h)?i:+h}return Jk=c,Jk}var eT,xV;function Aoe(){if(xV)return eT;xV=1;var n=cp(),e=yTe(),t=CTe(),i="Expected a function",r=Math.max,o=Math.min;function s(a,c,h){var m,v,x,E,D,P,F=0,W=!1,q=!1,V=!0;if(typeof a!="function")throw new TypeError(i);c=t(c)||0,n(h)&&(W=!!h.leading,q="maxWait"in h,x=q?r(t(h.maxWait)||0,c):x,V="trailing"in h?!!h.trailing:V);function H(Me){var Te=m,je=v;return m=v=void 0,F=Me,E=a.apply(je,Te),E}function X(Me){return F=Me,D=setTimeout(oe,c),W?H(Me):E}function Z(Me){var Te=Me-P,je=Me-F,Ee=c-Te;return q?o(Ee,x-je):Ee}function G(Me){var Te=Me-P,je=Me-F;return P===void 0||Te>=c||Te<0||q&&je>=x}function oe(){var Me=e();if(G(Me))return ue(Me);D=setTimeout(oe,Z(Me))}function ue(Me){return D=void 0,V&&m?H(Me):(m=v=void 0,E)}function xe(){D!==void 0&&clearTimeout(D),F=0,m=P=v=D=void 0}function me(){return D===void 0?E:ue(e())}function Ie(){var Me=e(),Te=G(Me);if(m=arguments,v=this,P=Me,Te){if(D===void 0)return X(P);if(q)return clearTimeout(D),D=setTimeout(oe,c),H(P)}return D===void 0&&(D=setTimeout(oe,c)),E}return Ie.cancel=xe,Ie.flush=me,Ie}return eT=s,eT}var tT,MV;function _Te(){if(MV)return tT;MV=1;var n=Aoe(),e=cp(),t="Expected a function";function i(r,o,s){var a=!0,c=!0;if(typeof r!="function")throw new TypeError(t);return e(s)&&(a="leading"in s?!!s.leading:a,c="trailing"in s?!!s.trailing:c),n(r,o,{leading:a,maxWait:o,trailing:c})}return tT=i,tT}var X5={},wV;function xTe(){return wV||(wV=1,Object.defineProperty(X5,"__esModule",{value:!0}),X5.calculateChange=function(e,t,i){var r=i.getBoundingClientRect(),o=r.width,s=r.height,a=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,c=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,h=a-(i.getBoundingClientRect().left+window.pageXOffset),m=c-(i.getBoundingClientRect().top+window.pageYOffset);h<0?h=0:h>o&&(h=o),m<0?m=0:m>s&&(m=s);var v=h/o,x=1-m/s;return{h:t.h,s:v,v:x,a:t.a,source:"hsv"}}),X5}var SV;function MTe(){if(SV)return l_;SV=1,Object.defineProperty(l_,"__esModule",{value:!0}),l_.Saturation=void 0;var n=(function(){function P(F,W){for(var q=0;q<W.length;q++){var V=W[q];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(F,V.key,V)}}return function(F,W,q){return W&&P(F.prototype,W),q&&P(F,q),F}})(),e=Oa(),t=m(e),i=Rm(),r=m(i),o=_Te(),s=m(o),a=xTe(),c=h(a);function h(P){if(P&&P.__esModule)return P;var F={};if(P!=null)for(var W in P)Object.prototype.hasOwnProperty.call(P,W)&&(F[W]=P[W]);return F.default=P,F}function m(P){return P&&P.__esModule?P:{default:P}}function v(P,F){if(!(P instanceof F))throw new TypeError("Cannot call a class as a function")}function x(P,F){if(!P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return F&&(typeof F=="object"||typeof F=="function")?F:P}function E(P,F){if(typeof F!="function"&&F!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof F);P.prototype=Object.create(F&&F.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}}),F&&(Object.setPrototypeOf?Object.setPrototypeOf(P,F):P.__proto__=F)}var D=l_.Saturation=(function(P){E(F,P);function F(W){v(this,F);var q=x(this,(F.__proto__||Object.getPrototypeOf(F)).call(this,W));return q.handleChange=function(V){typeof q.props.onChange=="function"&&q.throttle(q.props.onChange,c.calculateChange(V,q.props.hsl,q.container),V)},q.handleMouseDown=function(V){q.handleChange(V);var H=q.getContainerRenderWindow();H.addEventListener("mousemove",q.handleChange),H.addEventListener("mouseup",q.handleMouseUp)},q.handleMouseUp=function(){q.unbindEventListeners()},q.throttle=(0,s.default)(function(V,H,X){V(H,X)},50),q}return n(F,[{key:"componentWillUnmount",value:function(){this.throttle.cancel(),this.unbindEventListeners()}},{key:"getContainerRenderWindow",value:function(){for(var q=this.container,V=window;!V.document.contains(q)&&V.parent!==V;)V=V.parent;return V}},{key:"unbindEventListeners",value:function(){var q=this.getContainerRenderWindow();q.removeEventListener("mousemove",this.handleChange),q.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var q=this,V=this.props.style||{},H=V.color,X=V.white,Z=V.black,G=V.pointer,oe=V.circle,ue=(0,r.default)({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-(this.props.hsv.v*100)+100+"%",left:this.props.hsv.s*100+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:`0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),
            0 0 1px 2px rgba(0,0,0,.4)`,borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:H,white:X,black:Z,pointer:G,circle:oe}},{custom:!!this.props.style});return t.default.createElement("div",{style:ue.color,ref:function(me){return q.container=me},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},t.default.createElement("style",null,`
          .saturation-white {
            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));
            background: linear-gradient(to right, #fff, rgba(255,255,255,0));
          }
          .saturation-black {
            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));
            background: linear-gradient(to top, #000, rgba(0,0,0,0));
          }
        `),t.default.createElement("div",{style:ue.white,className:"saturation-white"},t.default.createElement("div",{style:ue.black,className:"saturation-black"}),t.default.createElement("div",{style:ue.pointer},this.props.pointer?t.default.createElement(this.props.pointer,this.props):t.default.createElement("div",{style:ue.circle}))))}}]),F})(e.PureComponent||e.Component);return l_.default=D,l_}var u_={},Oh={},nT,EV;function wTe(){if(EV)return nT;EV=1;var n=eoe(),e=Jre(),t=Lre(),i=bf();function r(o,s){var a=i(o)?n:e;return a(o,t(s))}return nT=r,nT}var iT,BV;function STe(){return BV||(BV=1,iT=wTe()),iT}var Iw={exports:{}},ETe=Iw.exports,OV;function BTe(){return OV||(OV=1,(function(n,e){(function(t,i){n.exports=i()})(ETe,(function(){function t(Ke){"@babel/helpers - typeof";return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Oe){return typeof Oe}:function(Oe){return Oe&&typeof Symbol=="function"&&Oe.constructor===Symbol&&Oe!==Symbol.prototype?"symbol":typeof Oe},t(Ke)}var i=/^\s+/,r=/\s+$/;function o(Ke,Oe){if(Ke=Ke||"",Oe=Oe||{},Ke instanceof o)return Ke;if(!(this instanceof o))return new o(Ke,Oe);var Be=s(Ke);this._originalInput=Ke,this._r=Be.r,this._g=Be.g,this._b=Be.b,this._a=Be.a,this._roundA=Math.round(100*this._a)/100,this._format=Oe.format||Be.format,this._gradientType=Oe.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=Be.ok}o.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var Oe=this.toRgb();return(Oe.r*299+Oe.g*587+Oe.b*114)/1e3},getLuminance:function(){var Oe=this.toRgb(),Be,Ve,yt,ft,Ct,Lt;return Be=Oe.r/255,Ve=Oe.g/255,yt=Oe.b/255,Be<=.03928?ft=Be/12.92:ft=Math.pow((Be+.055)/1.055,2.4),Ve<=.03928?Ct=Ve/12.92:Ct=Math.pow((Ve+.055)/1.055,2.4),yt<=.03928?Lt=yt/12.92:Lt=Math.pow((yt+.055)/1.055,2.4),.2126*ft+.7152*Ct+.0722*Lt},setAlpha:function(Oe){return this._a=Te(Oe),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var Oe=m(this._r,this._g,this._b);return{h:Oe.h*360,s:Oe.s,v:Oe.v,a:this._a}},toHsvString:function(){var Oe=m(this._r,this._g,this._b),Be=Math.round(Oe.h*360),Ve=Math.round(Oe.s*100),yt=Math.round(Oe.v*100);return this._a==1?"hsv("+Be+", "+Ve+"%, "+yt+"%)":"hsva("+Be+", "+Ve+"%, "+yt+"%, "+this._roundA+")"},toHsl:function(){var Oe=c(this._r,this._g,this._b);return{h:Oe.h*360,s:Oe.s,l:Oe.l,a:this._a}},toHslString:function(){var Oe=c(this._r,this._g,this._b),Be=Math.round(Oe.h*360),Ve=Math.round(Oe.s*100),yt=Math.round(Oe.l*100);return this._a==1?"hsl("+Be+", "+Ve+"%, "+yt+"%)":"hsla("+Be+", "+Ve+"%, "+yt+"%, "+this._roundA+")"},toHex:function(Oe){return x(this._r,this._g,this._b,Oe)},toHexString:function(Oe){return"#"+this.toHex(Oe)},toHex8:function(Oe){return E(this._r,this._g,this._b,this._a,Oe)},toHex8String:function(Oe){return"#"+this.toHex8(Oe)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(je(this._r,255)*100)+"%",g:Math.round(je(this._g,255)*100)+"%",b:Math.round(je(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(je(this._r,255)*100)+"%, "+Math.round(je(this._g,255)*100)+"%, "+Math.round(je(this._b,255)*100)+"%)":"rgba("+Math.round(je(this._r,255)*100)+"%, "+Math.round(je(this._g,255)*100)+"%, "+Math.round(je(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:Ie[x(this._r,this._g,this._b,!0)]||!1},toFilter:function(Oe){var Be="#"+D(this._r,this._g,this._b,this._a),Ve=Be,yt=this._gradientType?"GradientType = 1, ":"";if(Oe){var ft=o(Oe);Ve="#"+D(ft._r,ft._g,ft._b,ft._a)}return"progid:DXImageTransform.Microsoft.gradient("+yt+"startColorstr="+Be+",endColorstr="+Ve+")"},toString:function(Oe){var Be=!!Oe;Oe=Oe||this._format;var Ve=!1,yt=this._a<1&&this._a>=0,ft=!Be&&yt&&(Oe==="hex"||Oe==="hex6"||Oe==="hex3"||Oe==="hex4"||Oe==="hex8"||Oe==="name");return ft?Oe==="name"&&this._a===0?this.toName():this.toRgbString():(Oe==="rgb"&&(Ve=this.toRgbString()),Oe==="prgb"&&(Ve=this.toPercentageRgbString()),(Oe==="hex"||Oe==="hex6")&&(Ve=this.toHexString()),Oe==="hex3"&&(Ve=this.toHexString(!0)),Oe==="hex4"&&(Ve=this.toHex8String(!0)),Oe==="hex8"&&(Ve=this.toHex8String()),Oe==="name"&&(Ve=this.toName()),Oe==="hsl"&&(Ve=this.toHslString()),Oe==="hsv"&&(Ve=this.toHsvString()),Ve||this.toHexString())},clone:function(){return o(this.toString())},_applyModification:function(Oe,Be){var Ve=Oe.apply(null,[this].concat([].slice.call(Be)));return this._r=Ve._r,this._g=Ve._g,this._b=Ve._b,this.setAlpha(Ve._a),this},lighten:function(){return this._applyModification(q,arguments)},brighten:function(){return this._applyModification(V,arguments)},darken:function(){return this._applyModification(H,arguments)},desaturate:function(){return this._applyModification(P,arguments)},saturate:function(){return this._applyModification(F,arguments)},greyscale:function(){return this._applyModification(W,arguments)},spin:function(){return this._applyModification(X,arguments)},_applyCombination:function(Oe,Be){return Oe.apply(null,[this].concat([].slice.call(Be)))},analogous:function(){return this._applyCombination(ue,arguments)},complement:function(){return this._applyCombination(Z,arguments)},monochromatic:function(){return this._applyCombination(xe,arguments)},splitcomplement:function(){return this._applyCombination(oe,arguments)},triad:function(){return this._applyCombination(G,[3])},tetrad:function(){return this._applyCombination(G,[4])}},o.fromRatio=function(Ke,Oe){if(t(Ke)=="object"){var Be={};for(var Ve in Ke)Ke.hasOwnProperty(Ve)&&(Ve==="a"?Be[Ve]=Ke[Ve]:Be[Ve]=Re(Ke[Ve]));Ke=Be}return o(Ke,Oe)};function s(Ke){var Oe={r:0,g:0,b:0},Be=1,Ve=null,yt=null,ft=null,Ct=!1,Lt=!1;return typeof Ke=="string"&&(Ke=Tt(Ke)),t(Ke)=="object"&&(at(Ke.r)&&at(Ke.g)&&at(Ke.b)?(Oe=a(Ke.r,Ke.g,Ke.b),Ct=!0,Lt=String(Ke.r).substr(-1)==="%"?"prgb":"rgb"):at(Ke.h)&&at(Ke.s)&&at(Ke.v)?(Ve=Re(Ke.s),yt=Re(Ke.v),Oe=v(Ke.h,Ve,yt),Ct=!0,Lt="hsv"):at(Ke.h)&&at(Ke.s)&&at(Ke.l)&&(Ve=Re(Ke.s),ft=Re(Ke.l),Oe=h(Ke.h,Ve,ft),Ct=!0,Lt="hsl"),Ke.hasOwnProperty("a")&&(Be=Ke.a)),Be=Te(Be),{ok:Ct,format:Ke.format||Lt,r:Math.min(255,Math.max(Oe.r,0)),g:Math.min(255,Math.max(Oe.g,0)),b:Math.min(255,Math.max(Oe.b,0)),a:Be}}function a(Ke,Oe,Be){return{r:je(Ke,255)*255,g:je(Oe,255)*255,b:je(Be,255)*255}}function c(Ke,Oe,Be){Ke=je(Ke,255),Oe=je(Oe,255),Be=je(Be,255);var Ve=Math.max(Ke,Oe,Be),yt=Math.min(Ke,Oe,Be),ft,Ct,Lt=(Ve+yt)/2;if(Ve==yt)ft=Ct=0;else{var kt=Ve-yt;switch(Ct=Lt>.5?kt/(2-Ve-yt):kt/(Ve+yt),Ve){case Ke:ft=(Oe-Be)/kt+(Oe<Be?6:0);break;case Oe:ft=(Be-Ke)/kt+2;break;case Be:ft=(Ke-Oe)/kt+4;break}ft/=6}return{h:ft,s:Ct,l:Lt}}function h(Ke,Oe,Be){var Ve,yt,ft;Ke=je(Ke,360),Oe=je(Oe,100),Be=je(Be,100);function Ct(an,Hn,Wn){return Wn<0&&(Wn+=1),Wn>1&&(Wn-=1),Wn<1/6?an+(Hn-an)*6*Wn:Wn<1/2?Hn:Wn<2/3?an+(Hn-an)*(2/3-Wn)*6:an}if(Oe===0)Ve=yt=ft=Be;else{var Lt=Be<.5?Be*(1+Oe):Be+Oe-Be*Oe,kt=2*Be-Lt;Ve=Ct(kt,Lt,Ke+1/3),yt=Ct(kt,Lt,Ke),ft=Ct(kt,Lt,Ke-1/3)}return{r:Ve*255,g:yt*255,b:ft*255}}function m(Ke,Oe,Be){Ke=je(Ke,255),Oe=je(Oe,255),Be=je(Be,255);var Ve=Math.max(Ke,Oe,Be),yt=Math.min(Ke,Oe,Be),ft,Ct,Lt=Ve,kt=Ve-yt;if(Ct=Ve===0?0:kt/Ve,Ve==yt)ft=0;else{switch(Ve){case Ke:ft=(Oe-Be)/kt+(Oe<Be?6:0);break;case Oe:ft=(Be-Ke)/kt+2;break;case Be:ft=(Ke-Oe)/kt+4;break}ft/=6}return{h:ft,s:Ct,v:Lt}}function v(Ke,Oe,Be){Ke=je(Ke,360)*6,Oe=je(Oe,100),Be=je(Be,100);var Ve=Math.floor(Ke),yt=Ke-Ve,ft=Be*(1-Oe),Ct=Be*(1-yt*Oe),Lt=Be*(1-(1-yt)*Oe),kt=Ve%6,an=[Be,Ct,ft,ft,Lt,Be][kt],Hn=[Lt,Be,Be,Ct,ft,ft][kt],Wn=[ft,ft,Lt,Be,Be,Ct][kt];return{r:an*255,g:Hn*255,b:Wn*255}}function x(Ke,Oe,Be,Ve){var yt=[Le(Math.round(Ke).toString(16)),Le(Math.round(Oe).toString(16)),Le(Math.round(Be).toString(16))];return Ve&&yt[0].charAt(0)==yt[0].charAt(1)&&yt[1].charAt(0)==yt[1].charAt(1)&&yt[2].charAt(0)==yt[2].charAt(1)?yt[0].charAt(0)+yt[1].charAt(0)+yt[2].charAt(0):yt.join("")}function E(Ke,Oe,Be,Ve,yt){var ft=[Le(Math.round(Ke).toString(16)),Le(Math.round(Oe).toString(16)),Le(Math.round(Be).toString(16)),Le(Ge(Ve))];return yt&&ft[0].charAt(0)==ft[0].charAt(1)&&ft[1].charAt(0)==ft[1].charAt(1)&&ft[2].charAt(0)==ft[2].charAt(1)&&ft[3].charAt(0)==ft[3].charAt(1)?ft[0].charAt(0)+ft[1].charAt(0)+ft[2].charAt(0)+ft[3].charAt(0):ft.join("")}function D(Ke,Oe,Be,Ve){var yt=[Le(Ge(Ve)),Le(Math.round(Ke).toString(16)),Le(Math.round(Oe).toString(16)),Le(Math.round(Be).toString(16))];return yt.join("")}o.equals=function(Ke,Oe){return!Ke||!Oe?!1:o(Ke).toRgbString()==o(Oe).toRgbString()},o.random=function(){return o.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function P(Ke,Oe){Oe=Oe===0?0:Oe||10;var Be=o(Ke).toHsl();return Be.s-=Oe/100,Be.s=Ee(Be.s),o(Be)}function F(Ke,Oe){Oe=Oe===0?0:Oe||10;var Be=o(Ke).toHsl();return Be.s+=Oe/100,Be.s=Ee(Be.s),o(Be)}function W(Ke){return o(Ke).desaturate(100)}function q(Ke,Oe){Oe=Oe===0?0:Oe||10;var Be=o(Ke).toHsl();return Be.l+=Oe/100,Be.l=Ee(Be.l),o(Be)}function V(Ke,Oe){Oe=Oe===0?0:Oe||10;var Be=o(Ke).toRgb();return Be.r=Math.max(0,Math.min(255,Be.r-Math.round(255*-(Oe/100)))),Be.g=Math.max(0,Math.min(255,Be.g-Math.round(255*-(Oe/100)))),Be.b=Math.max(0,Math.min(255,Be.b-Math.round(255*-(Oe/100)))),o(Be)}function H(Ke,Oe){Oe=Oe===0?0:Oe||10;var Be=o(Ke).toHsl();return Be.l-=Oe/100,Be.l=Ee(Be.l),o(Be)}function X(Ke,Oe){var Be=o(Ke).toHsl(),Ve=(Be.h+Oe)%360;return Be.h=Ve<0?360+Ve:Ve,o(Be)}function Z(Ke){var Oe=o(Ke).toHsl();return Oe.h=(Oe.h+180)%360,o(Oe)}function G(Ke,Oe){if(isNaN(Oe)||Oe<=0)throw new Error("Argument to polyad must be a positive number");for(var Be=o(Ke).toHsl(),Ve=[o(Ke)],yt=360/Oe,ft=1;ft<Oe;ft++)Ve.push(o({h:(Be.h+ft*yt)%360,s:Be.s,l:Be.l}));return Ve}function oe(Ke){var Oe=o(Ke).toHsl(),Be=Oe.h;return[o(Ke),o({h:(Be+72)%360,s:Oe.s,l:Oe.l}),o({h:(Be+216)%360,s:Oe.s,l:Oe.l})]}function ue(Ke,Oe,Be){Oe=Oe||6,Be=Be||30;var Ve=o(Ke).toHsl(),yt=360/Be,ft=[o(Ke)];for(Ve.h=(Ve.h-(yt*Oe>>1)+720)%360;--Oe;)Ve.h=(Ve.h+yt)%360,ft.push(o(Ve));return ft}function xe(Ke,Oe){Oe=Oe||6;for(var Be=o(Ke).toHsv(),Ve=Be.h,yt=Be.s,ft=Be.v,Ct=[],Lt=1/Oe;Oe--;)Ct.push(o({h:Ve,s:yt,v:ft})),ft=(ft+Lt)%1;return Ct}o.mix=function(Ke,Oe,Be){Be=Be===0?0:Be||50;var Ve=o(Ke).toRgb(),yt=o(Oe).toRgb(),ft=Be/100,Ct={r:(yt.r-Ve.r)*ft+Ve.r,g:(yt.g-Ve.g)*ft+Ve.g,b:(yt.b-Ve.b)*ft+Ve.b,a:(yt.a-Ve.a)*ft+Ve.a};return o(Ct)},o.readability=function(Ke,Oe){var Be=o(Ke),Ve=o(Oe);return(Math.max(Be.getLuminance(),Ve.getLuminance())+.05)/(Math.min(Be.getLuminance(),Ve.getLuminance())+.05)},o.isReadable=function(Ke,Oe,Be){var Ve=o.readability(Ke,Oe),yt,ft;switch(ft=!1,yt=Kt(Be),yt.level+yt.size){case"AAsmall":case"AAAlarge":ft=Ve>=4.5;break;case"AAlarge":ft=Ve>=3;break;case"AAAsmall":ft=Ve>=7;break}return ft},o.mostReadable=function(Ke,Oe,Be){var Ve=null,yt=0,ft,Ct,Lt,kt;Be=Be||{},Ct=Be.includeFallbackColors,Lt=Be.level,kt=Be.size;for(var an=0;an<Oe.length;an++)ft=o.readability(Ke,Oe[an]),ft>yt&&(yt=ft,Ve=o(Oe[an]));return o.isReadable(Ke,Ve,{level:Lt,size:kt})||!Ct?Ve:(Be.includeFallbackColors=!1,o.mostReadable(Ke,["#fff","#000"],Be))};var me=o.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Ie=o.hexNames=Me(me);function Me(Ke){var Oe={};for(var Be in Ke)Ke.hasOwnProperty(Be)&&(Oe[Ke[Be]]=Be);return Oe}function Te(Ke){return Ke=parseFloat(Ke),(isNaN(Ke)||Ke<0||Ke>1)&&(Ke=1),Ke}function je(Ke,Oe){At(Ke)&&(Ke="100%");var Be=gt(Ke);return Ke=Math.min(Oe,Math.max(0,parseFloat(Ke))),Be&&(Ke=parseInt(Ke*Oe,10)/100),Math.abs(Ke-Oe)<1e-6?1:Ke%Oe/parseFloat(Oe)}function Ee(Ke){return Math.min(1,Math.max(0,Ke))}function qe(Ke){return parseInt(Ke,16)}function At(Ke){return typeof Ke=="string"&&Ke.indexOf(".")!=-1&&parseFloat(Ke)===1}function gt(Ke){return typeof Ke=="string"&&Ke.indexOf("%")!=-1}function Le(Ke){return Ke.length==1?"0"+Ke:""+Ke}function Re(Ke){return Ke<=1&&(Ke=Ke*100+"%"),Ke}function Ge(Ke){return Math.round(parseFloat(Ke)*255).toString(16)}function De(Ke){return qe(Ke)/255}var _t=(function(){var Ke="[-\\+]?\\d+%?",Oe="[-\\+]?\\d*\\.\\d+%?",Be="(?:"+Oe+")|(?:"+Ke+")",Ve="[\\s|\\(]+("+Be+")[,|\\s]+("+Be+")[,|\\s]+("+Be+")\\s*\\)?",yt="[\\s|\\(]+("+Be+")[,|\\s]+("+Be+")[,|\\s]+("+Be+")[,|\\s]+("+Be+")\\s*\\)?";return{CSS_UNIT:new RegExp(Be),rgb:new RegExp("rgb"+Ve),rgba:new RegExp("rgba"+yt),hsl:new RegExp("hsl"+Ve),hsla:new RegExp("hsla"+yt),hsv:new RegExp("hsv"+Ve),hsva:new RegExp("hsva"+yt),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}})();function at(Ke){return!!_t.CSS_UNIT.exec(Ke)}function Tt(Ke){Ke=Ke.replace(i,"").replace(r,"").toLowerCase();var Oe=!1;if(me[Ke])Ke=me[Ke],Oe=!0;else if(Ke=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var Be;return(Be=_t.rgb.exec(Ke))?{r:Be[1],g:Be[2],b:Be[3]}:(Be=_t.rgba.exec(Ke))?{r:Be[1],g:Be[2],b:Be[3],a:Be[4]}:(Be=_t.hsl.exec(Ke))?{h:Be[1],s:Be[2],l:Be[3]}:(Be=_t.hsla.exec(Ke))?{h:Be[1],s:Be[2],l:Be[3],a:Be[4]}:(Be=_t.hsv.exec(Ke))?{h:Be[1],s:Be[2],v:Be[3]}:(Be=_t.hsva.exec(Ke))?{h:Be[1],s:Be[2],v:Be[3],a:Be[4]}:(Be=_t.hex8.exec(Ke))?{r:qe(Be[1]),g:qe(Be[2]),b:qe(Be[3]),a:De(Be[4]),format:Oe?"name":"hex8"}:(Be=_t.hex6.exec(Ke))?{r:qe(Be[1]),g:qe(Be[2]),b:qe(Be[3]),format:Oe?"name":"hex"}:(Be=_t.hex4.exec(Ke))?{r:qe(Be[1]+""+Be[1]),g:qe(Be[2]+""+Be[2]),b:qe(Be[3]+""+Be[3]),a:De(Be[4]+""+Be[4]),format:Oe?"name":"hex8"}:(Be=_t.hex3.exec(Ke))?{r:qe(Be[1]+""+Be[1]),g:qe(Be[2]+""+Be[2]),b:qe(Be[3]+""+Be[3]),format:Oe?"name":"hex"}:!1}function Kt(Ke){var Oe,Be;return Ke=Ke||{level:"AA",size:"small"},Oe=(Ke.level||"AA").toUpperCase(),Be=(Ke.size||"small").toLowerCase(),Oe!=="AA"&&Oe!=="AAA"&&(Oe="AA"),Be!=="small"&&Be!=="large"&&(Be="small"),{level:Oe,size:Be}}return o}))})(Iw)),Iw.exports}var IV;function hoe(){if(IV)return Oh;IV=1,Object.defineProperty(Oh,"__esModule",{value:!0}),Oh.isvalidColorString=Oh.red=Oh.getContrastingColor=Oh.isValidHex=Oh.toState=Oh.simpleCheckForValidColor=void 0;var n=STe(),e=r(n),t=BTe(),i=r(t);function r(s){return s&&s.__esModule?s:{default:s}}Oh.simpleCheckForValidColor=function(a){var c=["r","g","b","a","h","s","l","v"],h=0,m=0;return(0,e.default)(c,function(v){if(a[v]&&(h+=1,isNaN(a[v])||(m+=1),v==="s"||v==="l")){var x=/^\d+%$/;x.test(a[v])&&(m+=1)}}),h===m?a:!1};var o=Oh.toState=function(a,c){var h=a.hex?(0,i.default)(a.hex):(0,i.default)(a),m=h.toHsl(),v=h.toHsv(),x=h.toRgb(),E=h.toHex();m.s===0&&(m.h=c||0,v.h=c||0);var D=E==="000000"&&x.a===0;return{hsl:m,hex:D?"transparent":"#"+E,rgb:x,hsv:v,oldHue:a.h||c||m.h,source:a.source}};return Oh.isValidHex=function(a){if(a==="transparent")return!0;var c=String(a).charAt(0)==="#"?1:0;return a.length!==4+c&&a.length<7+c&&(0,i.default)(a).isValid()},Oh.getContrastingColor=function(a){if(!a)return"#fff";var c=o(a);if(c.hex==="transparent")return"rgba(0,0,0,0.4)";var h=(c.rgb.r*299+c.rgb.g*587+c.rgb.b*114)/1e3;return h>=128?"#000":"#fff"},Oh.red={hsl:{a:1,h:0,l:.5,s:1},hex:"#ff0000",rgb:{r:255,g:0,b:0,a:1},hsv:{h:0,s:1,v:1,a:1}},Oh.isvalidColorString=function(a,c){var h=a.replace("","");return(0,i.default)(c+" ("+h+")")._ok},Oh}var kV;function OTe(){if(kV)return u_;kV=1,Object.defineProperty(u_,"__esModule",{value:!0}),u_.ColorWrap=void 0;var n=Object.assign||function(D){for(var P=1;P<arguments.length;P++){var F=arguments[P];for(var W in F)Object.prototype.hasOwnProperty.call(F,W)&&(D[W]=F[W])}return D},e=(function(){function D(P,F){for(var W=0;W<F.length;W++){var q=F[W];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(P,q.key,q)}}return function(P,F,W){return F&&D(P.prototype,F),W&&D(P,W),P}})(),t=Oa(),i=h(t),r=Aoe(),o=h(r),s=hoe(),a=c(s);function c(D){if(D&&D.__esModule)return D;var P={};if(D!=null)for(var F in D)Object.prototype.hasOwnProperty.call(D,F)&&(P[F]=D[F]);return P.default=D,P}function h(D){return D&&D.__esModule?D:{default:D}}function m(D,P){if(!(D instanceof P))throw new TypeError("Cannot call a class as a function")}function v(D,P){if(!D)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P&&(typeof P=="object"||typeof P=="function")?P:D}function x(D,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof P);D.prototype=Object.create(P&&P.prototype,{constructor:{value:D,enumerable:!1,writable:!0,configurable:!0}}),P&&(Object.setPrototypeOf?Object.setPrototypeOf(D,P):D.__proto__=P)}var E=u_.ColorWrap=function(P){var F=(function(W){x(q,W);function q(V){m(this,q);var H=v(this,(q.__proto__||Object.getPrototypeOf(q)).call(this));return H.handleChange=function(X,Z){var G=a.simpleCheckForValidColor(X);if(G){var oe=a.toState(X,X.h||H.state.oldHue);H.setState(oe),H.props.onChangeComplete&&H.debounce(H.props.onChangeComplete,oe,Z),H.props.onChange&&H.props.onChange(oe,Z)}},H.handleSwatchHover=function(X,Z){var G=a.simpleCheckForValidColor(X);if(G){var oe=a.toState(X,X.h||H.state.oldHue);H.props.onSwatchHover&&H.props.onSwatchHover(oe,Z)}},H.state=n({},a.toState(V.color,0)),H.debounce=(0,o.default)(function(X,Z,G){X(Z,G)},100),H}return e(q,[{key:"render",value:function(){var H={};return this.props.onSwatchHover&&(H.onSwatchHover=this.handleSwatchHover),i.default.createElement(P,n({},this.props,this.state,{onChange:this.handleChange},H))}}],[{key:"getDerivedStateFromProps",value:function(H,X){return n({},a.toState(H.color,X.oldHue))}}]),q})(t.PureComponent||t.Component);return F.propTypes=n({},P.propTypes),F.defaultProps=n({},P.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),F};return u_.default=E,u_}var c_={},k2={},TV;function ITe(){if(TV)return k2;TV=1,Object.defineProperty(k2,"__esModule",{value:!0}),k2.handleFocus=void 0;var n=Object.assign||function(c){for(var h=1;h<arguments.length;h++){var m=arguments[h];for(var v in m)Object.prototype.hasOwnProperty.call(m,v)&&(c[v]=m[v])}return c},e=(function(){function c(h,m){for(var v=0;v<m.length;v++){var x=m[v];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(h,x.key,x)}}return function(h,m,v){return m&&c(h.prototype,m),v&&c(h,v),h}})(),t=Oa(),i=r(t);function r(c){return c&&c.__esModule?c:{default:c}}function o(c,h){if(!(c instanceof h))throw new TypeError("Cannot call a class as a function")}function s(c,h){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:c}function a(c,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);c.prototype=Object.create(h&&h.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(c,h):c.__proto__=h)}return k2.handleFocus=function(h){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return(function(v){a(x,v);function x(){var E,D,P,F;o(this,x);for(var W=arguments.length,q=Array(W),V=0;V<W;V++)q[V]=arguments[V];return F=(D=(P=s(this,(E=x.__proto__||Object.getPrototypeOf(x)).call.apply(E,[this].concat(q))),P),P.state={focus:!1},P.handleFocus=function(){return P.setState({focus:!0})},P.handleBlur=function(){return P.setState({focus:!1})},D),s(P,F)}return e(x,[{key:"render",value:function(){return i.default.createElement(m,{onFocus:this.handleFocus,onBlur:this.handleBlur},i.default.createElement(h,n({},this.props,this.state)))}}]),x})(i.default.Component)},k2}var RV;function kTe(){if(RV)return c_;RV=1,Object.defineProperty(c_,"__esModule",{value:!0}),c_.Swatch=void 0;var n=Object.assign||function(v){for(var x=1;x<arguments.length;x++){var E=arguments[x];for(var D in E)Object.prototype.hasOwnProperty.call(E,D)&&(v[D]=E[D])}return v},e=Oa(),t=c(e),i=Rm(),r=c(i),o=ITe(),s=RK(),a=c(s);function c(v){return v&&v.__esModule?v:{default:v}}var h=13,m=c_.Swatch=function(x){var E=x.color,D=x.style,P=x.onClick,F=P===void 0?function(){}:P,W=x.onHover,q=x.title,V=q===void 0?E:q,H=x.children,X=x.focus,Z=x.focusStyle,G=Z===void 0?{}:Z,oe=E==="transparent",ue=(0,r.default)({default:{swatch:n({background:E,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},D,X?G:{})}}),xe=function(je){return F(E,je)},me=function(je){return je.keyCode===h&&F(E,je)},Ie=function(je){return W(E,je)},Me={};return W&&(Me.onMouseOver=Ie),t.default.createElement("div",n({style:ue.swatch,onClick:xe,title:V,tabIndex:0,onKeyDown:me},Me),H,oe&&t.default.createElement(a.default,{borderRadius:ue.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))};return c_.default=(0,o.handleFocus)(m),c_}var DV;function doe(){return DV||(DV=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0});var e=dTe();Object.defineProperty(n,"Alpha",{enumerable:!0,get:function(){return h(e).default}});var t=RK();Object.defineProperty(n,"Checkboard",{enumerable:!0,get:function(){return h(t).default}});var i=fTe();Object.defineProperty(n,"EditableInput",{enumerable:!0,get:function(){return h(i).default}});var r=mTe();Object.defineProperty(n,"Hue",{enumerable:!0,get:function(){return h(r).default}});var o=gTe();Object.defineProperty(n,"Raised",{enumerable:!0,get:function(){return h(o).default}});var s=MTe();Object.defineProperty(n,"Saturation",{enumerable:!0,get:function(){return h(s).default}});var a=OTe();Object.defineProperty(n,"ColorWrap",{enumerable:!0,get:function(){return h(a).default}});var c=kTe();Object.defineProperty(n,"Swatch",{enumerable:!0,get:function(){return h(c).default}});function h(m){return m&&m.__esModule?m:{default:m}}})($k)),$k}var A_={},rT,PV;function TTe(){if(PV)return rT;PV=1;function n(e){return e===void 0}return rT=n,rT}var J5={},UV;function RTe(){if(UV)return J5;UV=1,Object.defineProperty(J5,"__esModule",{value:!0});var n=Object.assign||function(s){for(var a=1;a<arguments.length;a++){var c=arguments[a];for(var h in c)Object.prototype.hasOwnProperty.call(c,h)&&(s[h]=c[h])}return s},e=Oa(),t=i(e);function i(s){return s&&s.__esModule?s:{default:s}}function r(s,a){var c={};for(var h in s)a.indexOf(h)>=0||Object.prototype.hasOwnProperty.call(s,h)&&(c[h]=s[h]);return c}var o=24;return J5.default=function(s){var a=s.fill,c=a===void 0?"currentColor":a,h=s.width,m=h===void 0?o:h,v=s.height,x=v===void 0?o:v,E=s.style,D=E===void 0?{}:E,P=r(s,["fill","width","height","style"]);return t.default.createElement("svg",n({viewBox:"0 0 "+o+" "+o,style:n({fill:c,width:m,height:x},D)},P),t.default.createElement("path",{d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}))},J5}var KV;function DTe(){if(KV)return A_;KV=1,Object.defineProperty(A_,"__esModule",{value:!0}),A_.ChromeFields=void 0;var n=(function(){function q(V,H){for(var X=0;X<H.length;X++){var Z=H[X];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(V,Z.key,Z)}}return function(V,H,X){return H&&q(V.prototype,H),X&&q(V,X),V}})(),e=Oa(),t=E(e),i=Rm(),r=E(i),o=hoe(),s=x(o),a=TTe(),c=E(a),h=doe(),m=RTe(),v=E(m);function x(q){if(q&&q.__esModule)return q;var V={};if(q!=null)for(var H in q)Object.prototype.hasOwnProperty.call(q,H)&&(V[H]=q[H]);return V.default=q,V}function E(q){return q&&q.__esModule?q:{default:q}}function D(q,V){if(!(q instanceof V))throw new TypeError("Cannot call a class as a function")}function P(q,V){if(!q)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return V&&(typeof V=="object"||typeof V=="function")?V:q}function F(q,V){if(typeof V!="function"&&V!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof V);q.prototype=Object.create(V&&V.prototype,{constructor:{value:q,enumerable:!1,writable:!0,configurable:!0}}),V&&(Object.setPrototypeOf?Object.setPrototypeOf(q,V):q.__proto__=V)}var W=A_.ChromeFields=(function(q){F(V,q);function V(H){D(this,V);var X=P(this,(V.__proto__||Object.getPrototypeOf(V)).call(this));return X.toggleViews=function(){X.state.view==="hex"?X.setState({view:"rgb"}):X.state.view==="rgb"?X.setState({view:"hsl"}):X.state.view==="hsl"&&(X.props.hsl.a===1?X.setState({view:"hex"}):X.setState({view:"rgb"}))},X.handleChange=function(Z,G){Z.hex?s.isValidHex(Z.hex)&&X.props.onChange({hex:Z.hex,source:"hex"},G):Z.r||Z.g||Z.b?X.props.onChange({r:Z.r||X.props.rgb.r,g:Z.g||X.props.rgb.g,b:Z.b||X.props.rgb.b,source:"rgb"},G):Z.a?(Z.a<0?Z.a=0:Z.a>1&&(Z.a=1),X.props.onChange({h:X.props.hsl.h,s:X.props.hsl.s,l:X.props.hsl.l,a:Math.round(Z.a*100)/100,source:"rgb"},G)):(Z.h||Z.s||Z.l)&&(typeof Z.s=="string"&&Z.s.includes("%")&&(Z.s=Z.s.replace("%","")),typeof Z.l=="string"&&Z.l.includes("%")&&(Z.l=Z.l.replace("%","")),Z.s==1?Z.s=.01:Z.l==1&&(Z.l=.01),X.props.onChange({h:Z.h||X.props.hsl.h,s:Number((0,c.default)(Z.s)?X.props.hsl.s:Z.s),l:Number((0,c.default)(Z.l)?X.props.hsl.l:Z.l),source:"hsl"},G))},X.showHighlight=function(Z){Z.currentTarget.style.background="#eee"},X.hideHighlight=function(Z){Z.currentTarget.style.background="transparent"},H.hsl.a!==1&&H.view==="hex"?X.state={view:"rgb"}:X.state={view:H.view},X}return n(V,[{key:"render",value:function(){var X=this,Z=(0,r.default)({default:{wrap:{paddingTop:"16px",display:"flex"},fields:{flex:"1",display:"flex",marginLeft:"-6px"},field:{paddingLeft:"6px",width:"100%"},alpha:{paddingLeft:"6px",width:"100%"},toggle:{width:"32px",textAlign:"right",position:"relative"},icon:{marginRight:"-4px",marginTop:"12px",cursor:"pointer",position:"relative"},iconHighlight:{position:"absolute",width:"24px",height:"28px",background:"#eee",borderRadius:"4px",top:"10px",left:"12px",display:"none"},input:{fontSize:"11px",color:"#333",width:"100%",borderRadius:"2px",border:"none",boxShadow:"inset 0 0 0 1px #dadada",height:"21px",textAlign:"center"},label:{textTransform:"uppercase",fontSize:"11px",lineHeight:"11px",color:"#969696",textAlign:"center",display:"block",marginTop:"12px"},svg:{fill:"#333",width:"24px",height:"24px",border:"1px transparent solid",borderRadius:"5px"}},disableAlpha:{alpha:{display:"none"}}},this.props,this.state),G=void 0;return this.state.view==="hex"?G=t.default.createElement("div",{style:Z.fields,className:"flexbox-fix"},t.default.createElement("div",{style:Z.field},t.default.createElement(h.EditableInput,{style:{input:Z.input,label:Z.label},label:"hex",value:this.props.hex,onChange:this.handleChange}))):this.state.view==="rgb"?G=t.default.createElement("div",{style:Z.fields,className:"flexbox-fix"},t.default.createElement("div",{style:Z.field},t.default.createElement(h.EditableInput,{style:{input:Z.input,label:Z.label},label:"r",value:this.props.rgb.r,onChange:this.handleChange})),t.default.createElement("div",{style:Z.field},t.default.createElement(h.EditableInput,{style:{input:Z.input,label:Z.label},label:"g",value:this.props.rgb.g,onChange:this.handleChange})),t.default.createElement("div",{style:Z.field},t.default.createElement(h.EditableInput,{style:{input:Z.input,label:Z.label},label:"b",value:this.props.rgb.b,onChange:this.handleChange})),t.default.createElement("div",{style:Z.alpha},t.default.createElement(h.EditableInput,{style:{input:Z.input,label:Z.label},label:"a",value:this.props.rgb.a,arrowOffset:.01,onChange:this.handleChange}))):this.state.view==="hsl"&&(G=t.default.createElement("div",{style:Z.fields,className:"flexbox-fix"},t.default.createElement("div",{style:Z.field},t.default.createElement(h.EditableInput,{style:{input:Z.input,label:Z.label},label:"h",value:Math.round(this.props.hsl.h),onChange:this.handleChange})),t.default.createElement("div",{style:Z.field},t.default.createElement(h.EditableInput,{style:{input:Z.input,label:Z.label},label:"s",value:Math.round(this.props.hsl.s*100)+"%",onChange:this.handleChange})),t.default.createElement("div",{style:Z.field},t.default.createElement(h.EditableInput,{style:{input:Z.input,label:Z.label},label:"l",value:Math.round(this.props.hsl.l*100)+"%",onChange:this.handleChange})),t.default.createElement("div",{style:Z.alpha},t.default.createElement(h.EditableInput,{style:{input:Z.input,label:Z.label},label:"a",value:this.props.hsl.a,arrowOffset:.01,onChange:this.handleChange})))),t.default.createElement("div",{style:Z.wrap,className:"flexbox-fix"},G,t.default.createElement("div",{style:Z.toggle},t.default.createElement("div",{style:Z.icon,onClick:this.toggleViews,ref:function(ue){return X.icon=ue}},t.default.createElement(v.default,{style:Z.svg,onMouseOver:this.showHighlight,onMouseEnter:this.showHighlight,onMouseOut:this.hideHighlight}))))}}],[{key:"getDerivedStateFromProps",value:function(X,Z){return X.hsl.a!==1&&Z.view==="hex"?{view:"rgb"}:null}}]),V})(t.default.Component);return W.defaultProps={view:"hex"},A_.default=W,A_}var h_={},LV;function PTe(){if(LV)return h_;LV=1,Object.defineProperty(h_,"__esModule",{value:!0}),h_.ChromePointer=void 0;var n=Oa(),e=r(n),t=Rm(),i=r(t);function r(s){return s&&s.__esModule?s:{default:s}}var o=h_.ChromePointer=function(){var a=(0,i.default)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",transform:"translate(-6px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return e.default.createElement("div",{style:a.picker})};return h_.default=o,h_}var d_={},FV;function UTe(){if(FV)return d_;FV=1,Object.defineProperty(d_,"__esModule",{value:!0}),d_.ChromePointerCircle=void 0;var n=Oa(),e=r(n),t=Rm(),i=r(t);function r(s){return s&&s.__esModule?s:{default:s}}var o=d_.ChromePointerCircle=function(){var a=(0,i.default)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}}});return e.default.createElement("div",{style:a.picker})};return d_.default=o,d_}var zV;function KTe(){if(zV)return ZC;zV=1,Object.defineProperty(ZC,"__esModule",{value:!0}),ZC.Chrome=void 0;var n=Oa(),e=P(n),t=M1(),i=P(t),r=Rm(),o=P(r),s=coe(),a=P(s),c=doe(),h=DTe(),m=P(h),v=PTe(),x=P(v),E=UTe(),D=P(E);function P(W){return W&&W.__esModule?W:{default:W}}var F=ZC.Chrome=function(q){var V=q.width,H=q.onChange,X=q.disableAlpha,Z=q.rgb,G=q.hsl,oe=q.hsv,ue=q.hex,xe=q.renderers,me=q.styles,Ie=me===void 0?{}:me,Me=q.className,Te=Me===void 0?"":Me,je=q.defaultView,Ee=(0,o.default)((0,a.default)({default:{picker:{width:V,background:"#fff",borderRadius:"2px",boxShadow:"0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3)",boxSizing:"initial",fontFamily:"Menlo"},saturation:{width:"100%",paddingBottom:"55%",position:"relative",borderRadius:"2px 2px 0 0",overflow:"hidden"},Saturation:{radius:"2px 2px 0 0"},body:{padding:"16px 16px 12px"},controls:{display:"flex"},color:{width:"32px"},swatch:{marginTop:"6px",width:"16px",height:"16px",borderRadius:"8px",position:"relative",overflow:"hidden"},active:{absolute:"0px 0px 0px 0px",borderRadius:"8px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.1)",background:"rgba("+Z.r+", "+Z.g+", "+Z.b+", "+Z.a+")",zIndex:"2"},toggles:{flex:"1"},hue:{height:"10px",position:"relative",marginBottom:"8px"},Hue:{radius:"2px"},alpha:{height:"10px",position:"relative"},Alpha:{radius:"2px"}},disableAlpha:{color:{width:"22px"},alpha:{display:"none"},hue:{marginBottom:"0px"},swatch:{width:"10px",height:"10px",marginTop:"0px"}}},Ie),{disableAlpha:X});return e.default.createElement("div",{style:Ee.picker,className:"chrome-picker "+Te},e.default.createElement("div",{style:Ee.saturation},e.default.createElement(c.Saturation,{style:Ee.Saturation,hsl:G,hsv:oe,pointer:D.default,onChange:H})),e.default.createElement("div",{style:Ee.body},e.default.createElement("div",{style:Ee.controls,className:"flexbox-fix"},e.default.createElement("div",{style:Ee.color},e.default.createElement("div",{style:Ee.swatch},e.default.createElement("div",{style:Ee.active}),e.default.createElement(c.Checkboard,{renderers:xe}))),e.default.createElement("div",{style:Ee.toggles},e.default.createElement("div",{style:Ee.hue},e.default.createElement(c.Hue,{style:Ee.Hue,hsl:G,pointer:x.default,onChange:H})),e.default.createElement("div",{style:Ee.alpha},e.default.createElement(c.Alpha,{style:Ee.Alpha,rgb:Z,hsl:G,pointer:x.default,renderers:xe,onChange:H})))),e.default.createElement(m.default,{rgb:Z,hsl:G,hex:ue,view:je,onChange:H,disableAlpha:X})))};return F.propTypes={width:i.default.oneOfType([i.default.string,i.default.number]),disableAlpha:i.default.bool,styles:i.default.object,defaultView:i.default.oneOf(["hex","rgb","hsl"])},F.defaultProps={width:225,disableAlpha:!1,styles:{}},ZC.default=(0,c.ColorWrap)(F),ZC}var LTe=KTe();const FTe=Ou(LTe);function xr(){var n="/home/runner/work/maputnik/maputnik/src/components/InputColor.tsx",e="04cff10f573f4461c1718b34a830d9c914f6fa95",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputColor.tsx",statementMap:{0:{start:{line:7,column:14},end:{line:7,column:23}},1:{start:{line:8,column:2},end:{line:8,column:56}},2:{start:{line:11,column:10},end:{line:13,column:3}},3:{start:{line:14,column:15},end:{line:14,column:19}},4:{start:{line:16,column:4},end:{line:16,column:17}},5:{start:{line:17,column:4},end:{line:17,column:75}},6:{start:{line:20,column:4},end:{line:20,column:27}},7:{start:{line:25,column:21},end:{line:39,column:3}},8:{start:{line:26,column:17},end:{line:26,column:32}},9:{start:{line:27,column:4},end:{line:38,column:5}},10:{start:{line:28,column:18},end:{line:28,column:46}},11:{start:{line:29,column:6},end:{line:32,column:8}},12:{start:{line:34,column:6},end:{line:37,column:8}},13:{start:{line:40,column:17},end:{line:42,column:3}},14:{start:{line:41,column:4},end:{line:41,column:62}},15:{start:{line:44,column:4},end:{line:49,column:5}},16:{start:{line:45,column:6},end:{line:45,column:43}},17:{start:{line:47,column:6},end:{line:47,column:49}},18:{start:{line:48,column:6},end:{line:48,column:39}},19:{start:{line:52,column:4},end:{line:52,column:47}},20:{start:{line:55,column:19},end:{line:55,column:42}},21:{start:{line:56,column:25},end:{line:56,column:44}},22:{start:{line:57,column:31},end:{line:63,column:5}},23:{start:{line:64,column:35},end:{line:99,column:5}},24:{start:{line:79,column:31},end:{line:79,column:67}},25:{start:{line:100,column:24},end:{line:102,column:5}},26:{start:{line:103,column:4},end:{line:124,column:9}},27:{start:{line:114,column:12},end:{line:114,column:36}},28:{start:{line:121,column:27},end:{line:121,column:56}}},fnMap:{0:{name:"formatColor",decl:{start:{line:6,column:9},end:{line:6,column:20}},loc:{start:{line:6,column:28},end:{line:9,column:1}},line:6},1:{name:"(anonymous_1)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:21},end:{line:18,column:3}},line:15},2:{name:"(anonymous_2)",decl:{start:{line:19,column:2},end:{line:19,column:3}},loc:{start:{line:19,column:21},end:{line:21,column:3}},line:19},3:{name:"(anonymous_3)",decl:{start:{line:25,column:21},end:{line:25,column:22}},loc:{start:{line:25,column:27},end:{line:39,column:3}},line:25},4:{name:"(anonymous_4)",decl:{start:{line:40,column:17},end:{line:40,column:18}},loc:{start:{line:40,column:23},end:{line:42,column:3}},line:40},5:{name:"(anonymous_5)",decl:{start:{line:43,column:2},end:{line:43,column:3}},loc:{start:{line:43,column:14},end:{line:50,column:3}},line:43},6:{name:"(anonymous_6)",decl:{start:{line:51,column:2},end:{line:51,column:3}},loc:{start:{line:51,column:14},end:{line:53,column:3}},line:51},7:{name:"(anonymous_7)",decl:{start:{line:54,column:2},end:{line:54,column:3}},loc:{start:{line:54,column:11},end:{line:125,column:3}},line:54},8:{name:"(anonymous_8)",decl:{start:{line:79,column:24},end:{line:79,column:25}},loc:{start:{line:79,column:31},end:{line:79,column:67}},line:79},9:{name:"(anonymous_9)",decl:{start:{line:113,column:15},end:{line:113,column:16}},loc:{start:{line:113,column:26},end:{line:115,column:11}},line:113},10:{name:"(anonymous_10)",decl:{start:{line:121,column:20},end:{line:121,column:21}},loc:{start:{line:121,column:27},end:{line:121,column:56}},line:121}},branchMap:{0:{loc:{start:{line:27,column:4},end:{line:38,column:5}},type:"if",locations:[{start:{line:27,column:4},end:{line:38,column:5}},{start:{line:33,column:11},end:{line:38,column:5}}],line:27},1:{loc:{start:{line:52,column:24},end:{line:52,column:45}},type:"cond-expr",locations:[{start:{line:52,column:35},end:{line:52,column:41}},{start:{line:52,column:44},end:{line:52,column:45}}],line:52},2:{loc:{start:{line:104,column:6},end:{line:104,column:39}},type:"binary-expr",locations:[{start:{line:104,column:6},end:{line:104,column:29}},{start:{line:104,column:33},end:{line:104,column:39}}],line:104},3:{loc:{start:{line:120,column:17},end:{line:120,column:57}},type:"cond-expr",locations:[{start:{line:120,column:36},end:{line:120,column:52}},{start:{line:120,column:55},end:{line:120,column:57}}],line:120}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputColor.tsx"],names:[],mappings:"AAsFmB,SAQb,KARa;AAtFnB,OAAO,WAAW;AAClB,OAAO,WAAW;AAClB,OAAO,kBAAkB;AAEzB,OAAO,YAAY;AAEnB,SAAS,YAAY,OAA4B;AAC/C,QAAM,MAAM,MAAM;AAClB,SAAO,QAAQ,IAAI,CAAC,KAAK,IAAI,CAAC,KAAK,IAAI,CAAC,KAAK,IAAI,CAAC;AACpD;AAaA,qBAAqB,mBAAmB,MAAM,UAA2B;AAAA,EACvE,QAAQ;AAAA,IACN,cAAc;AAAA,EAChB;AAAA,EACA,aAAsC;AAAA,EAEtC,YAAa,OAAwB;AACnC,UAAM,KAAK;AACX,SAAK,kBAAkB,OAAO,SAAS,KAAK,iBAAiB,MAAK,EAAE;AAAA,EACtE;AAAA,EAEA,gBAAgB,GAAW;AACzB,SAAK,MAAM,SAAS,CAAC;AAAA,EACvB;AAAA;AAAA;AAAA;AAAA,EAKA,mBAAmB,MAAM;AACvB,UAAM,OAAO,KAAK;AAClB,QAAG,MAAM;AACP,YAAM,MAAM,KAAK,sBAAsB;AACvC,aAAO;AAAA,QACL,KAAK,IAAI;AAAA,QACT,MAAM,IAAI,OAAO;AAAA,MACnB;AAAA,IACF,OAAO;AACL,aAAO;AAAA,QACL,KAAK;AAAA,QACL,MAAM;AAAA,MACR;AAAA,IACF;AAAA,EACF;AAAA,EAEA,eAAe,MAAM;AACnB,SAAK,SAAS,EAAE,cAAc,CAAC,KAAK,MAAM,aAAa,CAAC;AAAA,EAC1D;AAAA,EAEA,IAAI,QAAQ;AAEV,QAAI;AACF,aAAO,MAAM,KAAK,MAAM,KAAK,EAAE,IAAI;AAAA,IACrC,SACM,KAAK;AACT,cAAQ,KAAK,yBAAyB,GAAG;AACzC,aAAO,MAAM,kBAAkB;AAAA,IACjC;AAAA,EACF;AAAA,EAEA,SAAU,GAAW;AACnB,SAAK,MAAM,SAAS,MAAM,KAAK,SAAY,CAAC;AAAA,EAC9C;AAAA,EAEA,SAAS;AACP,UAAM,SAAS,KAAK,iBAAiB;AACrC,UAAM,eAAe,KAAK,MAAM,OAAO;AACvC,UAAM,qBAAqB;AAAA,MACzB,GAAG,aAAa;AAAA,MAChB,GAAG,aAAa;AAAA,MAChB,GAAG,aAAa;AAAA;AAAA,MAEhB,GAAG,aAAa;AAAA,IAClB;AAEA,UAAM,SAAS;AAAA,MAAC;AAAA;AAAA,QACd,WAAU;AAAA,QACV,OAAO;AAAA,UACL,UAAU;AAAA,UACV,QAAQ;AAAA,UACR,MAAM,OAAO;AAAA,UACb,KAAK,OAAO;AAAA,QACd;AAAA,QACA;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO;AAAA,cACP,UAAU,OAAK,KAAK,gBAAgB,YAAY,CAAC,CAAC;AAAA;AAAA,UACpD;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK;AAAA,cACd,OAAO;AAAA,gBACL,QAAQ;AAAA,gBACR,UAAU;AAAA,gBACV,KAAK;AAAA,gBACL,OAAO;AAAA,gBACP,QAAQ;AAAA,gBACR,MAAM;AAAA,cACR;AAAA;AAAA,UACF;AAAA;AAAA;AAAA,IACF;AAEA,UAAM,cAAc;AAAA,MAClB,iBAAiB,KAAK,MAAM;AAAA,IAC9B;AAEA,WAAO,qBAAC,SAAI,WAAU,0BACnB;AAAA,WAAK,MAAM,gBAAgB;AAAA,MAC5B,oBAAC,SAAI,WAAU,yBAAwB,OAAO,aAAa;AAAA,MAC3D;AAAA,QAAC;AAAA;AAAA,UACC,cAAY,KAAK,MAAM,YAAY;AAAA,UACnC,YAAW;AAAA,UACX,cAAa;AAAA,UACb,WAAU;AAAA,UACV,KAAK,CAAC,UAAU;AAAC,iBAAK,aAAa;AAAA,UAAM;AAAA,UACzC,SAAS,KAAK;AAAA,UACd,OAAO,KAAK,MAAM;AAAA,UAClB,MAAM,KAAK,MAAM;AAAA,UACjB,aAAa,KAAK,MAAM;AAAA,UACxB,OAAO,KAAK,MAAM,QAAQ,KAAK,MAAM,QAAQ;AAAA,UAC7C,UAAU,CAAC,MAAM,KAAK,SAAS,EAAE,OAAO,KAAK;AAAA;AAAA,MAC/C;AAAA,OACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"04cff10f573f4461c1718b34a830d9c914f6fa95"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return xr=function(){return s},s}xr();function zTe(n){xr().f[0]++;const e=(xr().s[0]++,n.rgb);return xr().s[1]++,`rgba(${e.r}, ${e.g}, ${e.b}, ${e.a})`}class DK extends On.Component{state=(xr().s[2]++,{pickerOpened:!1});colorInput=(xr().s[3]++,null);constructor(e){xr().f[1]++,xr().s[4]++,super(e),xr().s[5]++,this.onChangeNoCheck=dT.throttle(this.onChangeNoCheck,1e3/30)}onChangeNoCheck(e){xr().f[2]++,xr().s[6]++,this.props.onChange(e)}calcPickerOffset=(xr().s[7]++,()=>{xr().f[3]++;const e=(xr().s[8]++,this.colorInput);if(xr().s[9]++,e){xr().b[0][0]++;const t=(xr().s[10]++,e.getBoundingClientRect());return xr().s[11]++,{top:t.top,left:t.left+196}}else return xr().b[0][1]++,xr().s[12]++,{top:160,left:555}});togglePicker=(xr().s[13]++,()=>{xr().f[4]++,xr().s[14]++,this.setState({pickerOpened:!this.state.pickerOpened})});get color(){xr().f[5]++,xr().s[15]++;try{return xr().s[16]++,$u(this.props.value).rgb()}catch(e){return xr().s[17]++,console.warn("Error parsing color: ",e),xr().s[18]++,$u("rgb(255,255,255)")}}onChange(e){xr().f[6]++,xr().s[19]++,this.props.onChange(e===""?(xr().b[1][0]++,void 0):(xr().b[1][1]++,e))}render(){xr().f[7]++;const e=(xr().s[20]++,this.calcPickerOffset()),t=(xr().s[21]++,this.color.object()),i=(xr().s[22]++,{r:t.r,g:t.g,b:t.b,a:t.alpha}),r=(xr().s[23]++,te.jsxs("div",{className:"maputnik-color-picker-offset",style:{position:"fixed",zIndex:1,left:e.left,top:e.top},children:[te.jsx(FTe,{color:i,onChange:s=>(xr().f[8]++,xr().s[24]++,this.onChangeNoCheck(zTe(s)))}),te.jsx("div",{className:"maputnik-color-picker-offset",onClick:this.togglePicker,style:{zIndex:-1,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}})]})),o=(xr().s[25]++,{backgroundColor:this.props.value});return xr().s[26]++,te.jsxs("div",{className:"maputnik-color-wrapper",children:[(xr().b[2][0]++,this.state.pickerOpened&&(xr().b[2][1]++,r)),te.jsx("div",{className:"maputnik-color-swatch",style:o}),te.jsx("input",{"aria-label":this.props["aria-label"],spellCheck:"false",autoComplete:"off",className:"maputnik-color",ref:s=>{xr().f[9]++,xr().s[27]++,this.colorInput=s},onClick:this.togglePicker,style:this.props.style,name:this.props.name,placeholder:this.props.default,value:this.props.value?(xr().b[3][0]++,this.props.value):(xr().b[3][1]++,""),onChange:s=>(xr().f[10]++,xr().s[28]++,this.onChange(s.target.value))})]})}}function Zt(){var n="/home/runner/work/maputnik/maputnik/src/components/InputNumber.tsx",e="4f1ef08718bb93faa62aae09b5e3576a9aa3bb04",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputNumber.tsx",statementMap:{0:{start:{line:5,column:24},end:{line:7,column:3}},1:{start:{line:8,column:19},end:{line:8,column:24}},2:{start:{line:10,column:4},end:{line:10,column:17}},3:{start:{line:11,column:4},end:{line:16,column:6}},4:{start:{line:19,column:4},end:{line:24,column:5}},5:{start:{line:20,column:6},end:{line:23,column:8}},6:{start:{line:25,column:4},end:{line:25,column:16}},7:{start:{line:28,column:18},end:{line:28,column:77}},8:{start:{line:29,column:23},end:{line:29,column:49}},9:{start:{line:30,column:4},end:{line:39,column:5}},10:{start:{line:31,column:6},end:{line:31,column:58}},11:{start:{line:31,column:31},end:{line:31,column:58}},12:{start:{line:32,column:6},end:{line:34,column:9}},13:{start:{line:35,column:11},end:{line:39,column:5}},14:{start:{line:36,column:6},end:{line:38,column:9}},15:{start:{line:40,column:4},end:{line:42,column:7}},16:{start:{line:45,column:4},end:{line:47,column:5}},17:{start:{line:46,column:6},end:{line:46,column:18}},18:{start:{line:48,column:18},end:{line:48,column:20}},19:{start:{line:49,column:4},end:{line:51,column:5}},20:{start:{line:50,column:6},end:{line:50,column:19}},21:{start:{line:52,column:4},end:{line:54,column:5}},22:{start:{line:53,column:6},end:{line:53,column:19}},23:{start:{line:55,column:4},end:{line:57,column:5}},24:{start:{line:56,column:6},end:{line:56,column:19}},25:{start:{line:58,column:4},end:{line:58,column:16}},26:{start:{line:60,column:15},end:{line:74,column:3}},27:{start:{line:61,column:4},end:{line:61,column:38}},28:{start:{line:62,column:4},end:{line:64,column:5}},29:{start:{line:63,column:6},end:{line:63,column:13}},30:{start:{line:65,column:4},end:{line:73,column:5}},31:{start:{line:66,column:6},end:{line:72,column:7}},32:{start:{line:67,column:8},end:{line:67,column:43}},33:{start:{line:68,column:8},end:{line:68,column:56}},34:{start:{line:70,column:8},end:{line:70,column:33}},35:{start:{line:71,column:8},end:{line:71,column:46}},36:{start:{line:75,column:18},end:{line:100,column:3}},37:{start:{line:76,column:16},end:{line:76,column:42}},38:{start:{line:77,column:17},end:{line:77,column:37}},39:{start:{line:78,column:21},end:{line:78,column:26}},40:{start:{line:79,column:4},end:{line:95,column:5}},41:{start:{line:80,column:19},end:{line:80,column:31}},42:{start:{line:81,column:6},end:{line:94,column:7}},43:{start:{line:82,column:8},end:{line:86,column:9}},44:{start:{line:83,column:10},end:{line:83,column:42}},45:{start:{line:85,column:10},end:{line:85,column:42}},46:{start:{line:87,column:8},end:{line:87,column:27}},47:{start:{line:89,column:8},end:{line:93,column:9}},48:{start:{line:90,column:10},end:{line:90,column:31}},49:{start:{line:92,column:10},end:{line:92,column:40}},50:{start:{line:96,column:4},end:{line:96,column:32}},51:{start:{line:97,column:4},end:{line:97,column:70}},52:{start:{line:98,column:4},end:{line:98,column:41}},53:{start:{line:99,column:4},end:{line:99,column:56}},54:{start:{line:99,column:29},end:{line:99,column:56}},55:{start:{line:102,column:4},end:{line:185,column:5}},56:{start:{line:103,column:20},end:{line:103,column:81}},57:{start:{line:104,column:27},end:{line:104,column:82}},58:{start:{line:106,column:6},end:{line:110,column:7}},59:{start:{line:107,column:8},end:{line:107,column:38}},60:{start:{line:109,column:8},end:{line:109,column:27}},61:{start:{line:111,column:6},end:{line:165,column:11}},62:{start:{line:124,column:14},end:{line:124,column:41}},63:{start:{line:127,column:14},end:{line:127,column:67}},64:{start:{line:130,column:14},end:{line:130,column:69}},65:{start:{line:133,column:14},end:{line:137,column:17}},66:{start:{line:152,column:14},end:{line:152,column:47}},67:{start:{line:155,column:14},end:{line:155,column:47}},68:{start:{line:158,column:14},end:{line:158,column:48}},69:{start:{line:159,column:14},end:{line:159,column:32}},70:{start:{line:167,column:20},end:{line:167,column:81}},71:{start:{line:168,column:6},end:{line:184,column:8}},72:{start:{line:176,column:27},end:{line:176,column:59}},73:{start:{line:178,column:12},end:{line:178,column:45}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:2},end:{line:9,column:3}},loc:{start:{line:9,column:21},end:{line:17,column:3}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:48},end:{line:26,column:3}},line:18},2:{name:"(anonymous_2)",decl:{start:{line:27,column:2},end:{line:27,column:3}},loc:{start:{line:27,column:24},end:{line:43,column:3}},line:27},3:{name:"(anonymous_3)",decl:{start:{line:44,column:2},end:{line:44,column:3}},loc:{start:{line:44,column:13},end:{line:59,column:3}},line:44},4:{name:"(anonymous_4)",decl:{start:{line:60,column:15},end:{line:60,column:16}},loc:{start:{line:60,column:21},end:{line:74,column:3}},line:60},5:{name:"(anonymous_5)",decl:{start:{line:75,column:18},end:{line:75,column:19}},loc:{start:{line:75,column:25},end:{line:100,column:3}},line:75},6:{name:"(anonymous_6)",decl:{start:{line:101,column:2},end:{line:101,column:3}},loc:{start:{line:101,column:11},end:{line:186,column:3}},line:101},7:{name:"(anonymous_7)",decl:{start:{line:123,column:23},end:{line:123,column:24}},loc:{start:{line:123,column:29},end:{line:125,column:13}},line:123},8:{name:"(anonymous_8)",decl:{start:{line:126,column:27},end:{line:126,column:28}},loc:{start:{line:126,column:33},end:{line:128,column:13}},line:126},9:{name:"(anonymous_9)",decl:{start:{line:129,column:25},end:{line:129,column:26}},loc:{start:{line:129,column:31},end:{line:131,column:13}},line:129},10:{name:"(anonymous_10)",decl:{start:{line:132,column:20},end:{line:132,column:21}},loc:{start:{line:132,column:26},end:{line:138,column:13}},line:132},11:{name:"(anonymous_11)",decl:{start:{line:151,column:21},end:{line:151,column:22}},loc:{start:{line:151,column:29},end:{line:153,column:13}},line:151},12:{name:"(anonymous_12)",decl:{start:{line:154,column:22},end:{line:154,column:23}},loc:{start:{line:154,column:29},end:{line:156,column:13}},line:154},13:{name:"(anonymous_13)",decl:{start:{line:157,column:20},end:{line:157,column:21}},loc:{start:{line:157,column:28},end:{line:160,column:13}},line:157},14:{name:"(anonymous_14)",decl:{start:{line:176,column:20},end:{line:176,column:21}},loc:{start:{line:176,column:27},end:{line:176,column:59}},line:176},15:{name:"(anonymous_15)",decl:{start:{line:177,column:19},end:{line:177,column:20}},loc:{start:{line:177,column:25},end:{line:179,column:11}},line:177}},branchMap:{0:{loc:{start:{line:19,column:4},end:{line:24,column:5}},type:"if",locations:[{start:{line:19,column:4},end:{line:24,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:19},1:{loc:{start:{line:19,column:8},end:{line:19,column:53}},type:"binary-expr",locations:[{start:{line:19,column:8},end:{line:19,column:22}},{start:{line:19,column:26},end:{line:19,column:53}}],line:19},2:{loc:{start:{line:28,column:18},end:{line:28,column:77}},type:"cond-expr",locations:[{start:{line:28,column:59},end:{line:28,column:65}},{start:{line:28,column:68},end:{line:28,column:77}}],line:28},3:{loc:{start:{line:28,column:18},end:{line:28,column:56}},type:"binary-expr",locations:[{start:{line:28,column:18},end:{line:28,column:33}},{start:{line:28,column:37},end:{line:28,column:56}}],line:28},4:{loc:{start:{line:30,column:4},end:{line:39,column:5}},type:"if",locations:[{start:{line:30,column:4},end:{line:39,column:5}},{start:{line:35,column:11},end:{line:39,column:5}}],line:30},5:{loc:{start:{line:30,column:8},end:{line:30,column:41}},type:"binary-expr",locations:[{start:{line:30,column:8},end:{line:30,column:27}},{start:{line:30,column:31},end:{line:30,column:41}}],line:30},6:{loc:{start:{line:31,column:6},end:{line:31,column:58}},type:"if",locations:[{start:{line:31,column:6},end:{line:31,column:58}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:31},7:{loc:{start:{line:35,column:11},end:{line:39,column:5}},type:"if",locations:[{start:{line:35,column:11},end:{line:39,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:35},8:{loc:{start:{line:35,column:15},end:{line:35,column:49}},type:"binary-expr",locations:[{start:{line:35,column:15},end:{line:35,column:35}},{start:{line:35,column:39},end:{line:35,column:49}}],line:35},9:{loc:{start:{line:41,column:18},end:{line:41,column:53}},type:"cond-expr",locations:[{start:{line:41,column:36},end:{line:41,column:42}},{start:{line:41,column:45},end:{line:41,column:53}}],line:41},10:{loc:{start:{line:45,column:4},end:{line:47,column:5}},type:"if",locations:[{start:{line:45,column:4},end:{line:47,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:45},11:{loc:{start:{line:49,column:4},end:{line:51,column:5}},type:"if",locations:[{start:{line:49,column:4},end:{line:51,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:49},12:{loc:{start:{line:52,column:4},end:{line:54,column:5}},type:"if",locations:[{start:{line:52,column:4},end:{line:54,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:52},13:{loc:{start:{line:52,column:8},end:{line:52,column:56}},type:"binary-expr",locations:[{start:{line:52,column:8},end:{line:52,column:30}},{start:{line:52,column:34},end:{line:52,column:56}}],line:52},14:{loc:{start:{line:55,column:4},end:{line:57,column:5}},type:"if",locations:[{start:{line:55,column:4},end:{line:57,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:55},15:{loc:{start:{line:55,column:8},end:{line:55,column:56}},type:"binary-expr",locations:[{start:{line:55,column:8},end:{line:55,column:30}},{start:{line:55,column:34},end:{line:55,column:56}}],line:55},16:{loc:{start:{line:62,column:4},end:{line:64,column:5}},type:"if",locations:[{start:{line:62,column:4},end:{line:64,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:62},17:{loc:{start:{line:65,column:4},end:{line:73,column:5}},type:"if",locations:[{start:{line:65,column:4},end:{line:73,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:65},18:{loc:{start:{line:66,column:6},end:{line:72,column:7}},type:"if",locations:[{start:{line:66,column:6},end:{line:72,column:7}},{start:{line:69,column:13},end:{line:72,column:7}}],line:66},19:{loc:{start:{line:79,column:4},end:{line:95,column:5}},type:"if",locations:[{start:{line:79,column:4},end:{line:95,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:79},20:{loc:{start:{line:81,column:6},end:{line:94,column:7}},type:"if",locations:[{start:{line:81,column:6},end:{line:94,column:7}},{start:{line:88,column:13},end:{line:94,column:7}}],line:81},21:{loc:{start:{line:82,column:8},end:{line:86,column:9}},type:"if",locations:[{start:{line:82,column:8},end:{line:86,column:9}},{start:{line:84,column:15},end:{line:86,column:9}}],line:82},22:{loc:{start:{line:89,column:8},end:{line:93,column:9}},type:"if",locations:[{start:{line:89,column:8},end:{line:93,column:9}},{start:{line:91,column:15},end:{line:93,column:9}}],line:89},23:{loc:{start:{line:99,column:4},end:{line:99,column:56}},type:"if",locations:[{start:{line:99,column:4},end:{line:99,column:56}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:99},24:{loc:{start:{line:102,column:4},end:{line:185,column:5}},type:"if",locations:[{start:{line:102,column:4},end:{line:185,column:5}},{start:{line:166,column:11},end:{line:185,column:5}}],line:102},25:{loc:{start:{line:102,column:8},end:{line:102,column:205}},type:"binary-expr",locations:[{start:{line:102,column:8},end:{line:102,column:63}},{start:{line:102,column:67},end:{line:102,column:122}},{start:{line:102,column:126},end:{line:102,column:151}},{start:{line:102,column:155},end:{line:102,column:180}},{start:{line:102,column:184},end:{line:102,column:205}}],line:102},26:{loc:{start:{line:103,column:20},end:{line:103,column:81}},type:"cond-expr",locations:[{start:{line:103,column:41},end:{line:103,column:62}},{start:{line:103,column:65},end:{line:103,column:81}}],line:103},27:{loc:{start:{line:104,column:27},end:{line:104,column:82}},type:"cond-expr",locations:[{start:{line:104,column:59},end:{line:104,column:61}},{start:{line:104,column:64},end:{line:104,column:82}}],line:104},28:{loc:{start:{line:106,column:6},end:{line:110,column:7}},type:"if",locations:[{start:{line:106,column:6},end:{line:110,column:7}},{start:{line:108,column:13},end:{line:110,column:7}}],line:106},29:{loc:{start:{line:121,column:19},end:{line:121,column:58}},type:"cond-expr",locations:[{start:{line:121,column:38},end:{line:121,column:50}},{start:{line:121,column:53},end:{line:121,column:58}}],line:121},30:{loc:{start:{line:150,column:19},end:{line:150,column:58}},type:"cond-expr",locations:[{start:{line:150,column:43},end:{line:150,column:45}},{start:{line:150,column:48},end:{line:150,column:58}}],line:150},31:{loc:{start:{line:167,column:20},end:{line:167,column:81}},type:"cond-expr",locations:[{start:{line:167,column:41},end:{line:167,column:62}},{start:{line:167,column:65},end:{line:167,column:81}}],line:167},32:{loc:{start:{line:175,column:17},end:{line:175,column:46}},type:"cond-expr",locations:[{start:{line:175,column:36},end:{line:175,column:38}},{start:{line:175,column:41},end:{line:175,column:46}}],line:175}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0,0,0,0],26:[0,0],27:[0,0],28:[0,0],29:[0,0],30:[0,0],31:[0,0],32:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputNumber.tsx"],names:[],mappings:"AA8Ka,SACL,KADK;AA9Kb,OAAO,WAAwC;AAC/C,OAAO,sBAAsB;AA0B7B,qBAAqB,oBAAoB,MAAM,UAA8C;AAAA,EAC3F,OAAO,eAAe;AAAA,IACpB,WAAW;AAAA,EACb;AAAA,EACA,iBAA0B;AAAA,EAE1B,YAAY,OAAyB;AACnC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,MAAM,CAAC,iBAAiB;AAAA,MACxB,SAAS;AAAA,MACT,OAAO,MAAM;AAAA,MACb,YAAY,MAAM;AAAA,IACpB;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAAmC,OAAyB;AAC1F,QAAI,CAAC,MAAM,WAAW,MAAM,UAAU,MAAM,OAAO;AACjD,aAAO;AAAA,QACL,OAAO,MAAM;AAAA,QACb,YAAY,MAAM;AAAA,MACpB;AAAA,IACF;AACA,WAAO;AAAA,EACT;AAAA,EAEA,YAAY,UAAuC;AACjD,UAAM,QAAS,aAAa,MAAM,aAAa,SAC7C,SAAY,CAAC;AAEf,UAAM,aAAa,KAAK,MAAM,UAAU;AACxC,QAAG,KAAK,QAAQ,KAAK,KAAK,YAAY;AACpC,UAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,KAAK;AAClD,WAAK,SAAS;AAAA,QACZ;AAAA,MACF,CAAC;AAAA,IACH,WACS,CAAC,KAAK,QAAQ,KAAK,KAAK,YAAY;AAC3C,WAAK,SAAS;AAAA,QACZ,OAAO;AAAA,MACT,CAAC;AAAA,IACH;AAEA,SAAK,SAAS;AAAA,MACZ,YAAY,aAAa,KAAK,SAAY;AAAA,IAC5C,CAAC;AAAA,EACH;AAAA,EAEA,QAAQ,GAAgC;AACtC,QAAI,MAAM,QAAW;AACnB,aAAO;AAAA,IACT;AAEA,UAAM,QAAQ,CAAC;AACf,QAAG,MAAM,KAAK,GAAG;AACf,aAAO;AAAA,IACT;AAEA,QAAG,CAAC,MAAM,KAAK,MAAM,GAAI,KAAK,QAAQ,KAAK,MAAM,KAAM;AACrD,aAAO;AAAA,IACT;AAEA,QAAG,CAAC,MAAM,KAAK,MAAM,GAAI,KAAK,QAAQ,KAAK,MAAM,KAAM;AACrD,aAAO;AAAA,IACT;AAEA,WAAO;AAAA,EACT;AAAA,EAEA,aAAa,MAAM;AACjB,SAAK,SAAS,EAAC,SAAS,MAAK,CAAC;AAE9B,QAAG,CAAC,KAAK,MAAM,OAAO;AACpB;AAAA,IACF;AAGA,QAAI,CAAC,KAAK,QAAQ,KAAK,MAAM,KAAK,GAAG;AACnC,UAAG,KAAK,QAAQ,KAAK,MAAM,KAAK,GAAG;AACjC,aAAK,YAAY,KAAK,MAAM,KAAK;AACjC,aAAK,SAAS,EAAC,YAAY,KAAK,MAAM,MAAK,CAAC;AAAA,MAC9C,OAAO;AACL,aAAK,YAAY,MAAS;AAC1B,aAAK,SAAS,EAAC,YAAY,OAAS,CAAC;AAAA,MACvC;AAAA,IACF;AAAA,EACF;AAAA,EAEA,gBAAgB,CAAC,MAAqE;AACpF,QAAI,QAAQ,WAAW,EAAE,OAAO,KAAK;AACrC,UAAM,OAAO,KAAK,MAAM;AACxB,QAAI,aAAa;AAEjB,QAAG,MAAM;AAEP,YAAM,OAAO,QAAQ;AAGrB,UAAI,KAAK,gBAAgB;AAKvB,YAAI,QAAQ,CAAC,KAAK,MAAM,YAAa;AACnC,kBAAQ,KAAK,MAAM,QAAS;AAAA,QAC9B,OACK;AACH,kBAAQ,KAAK,MAAM,QAAS;AAAA,QAC9B;AACA,qBAAa;AAAA,MACf,OACK;AACH,YAAI,OAAO,OAAK,GAAG;AACjB,kBAAQ,QAAQ;AAAA,QAClB,OACK;AACH,kBAAQ,SAAS,OAAO;AAAA,QAC1B;AAAA,MACF;AAAA,IACF;AAEA,SAAK,iBAAiB;AAGtB,YAAQ,KAAK,IAAI,KAAK,MAAM,KAAM,KAAK,IAAI,KAAK,MAAM,KAAM,KAAK,CAAC;AAElE,SAAK,SAAS,EAAC,OAAO,WAAU,CAAC;AACjC,QAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,KAAK;AAAA,EACpD;AAAA,EAEA,SAAS;AACP,QACE,OAAO,UAAU,eAAe,KAAK,KAAK,OAAO,KAAK,KACtD,OAAO,UAAU,eAAe,KAAK,KAAK,OAAO,KAAK,KACtD,KAAK,MAAM,QAAQ,UAAa,KAAK,MAAM,QAAQ,UACnD,KAAK,MAAM,YACX;AACA,YAAM,QAAQ,KAAK,MAAM,UAAU,KAAK,MAAM,aAAa,KAAK,MAAM;AACtE,YAAM,eAAe,KAAK,MAAM,YAAY,SAAY,KAAK,KAAK,MAAM;AACxE,UAAI;AACJ,UAAI,KAAK,MAAM,cAAc;AAC3B,qBAAa,KAAK,MAAM;AAAA,MAC1B,OACK;AACH,qBAAa;AAAA,MACf;AAEA,aAAO,qBAAC,SAAI,WAAU,6BACpB;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,WAAU;AAAA,YAEV,MAAK;AAAA,YACL,KAAK,KAAK,MAAM;AAAA,YAChB,KAAK,KAAK,MAAM;AAAA,YAChB,MAAK;AAAA,YACL,YAAW;AAAA,YACX,OAAO,UAAU,SAAY,eAAe;AAAA,YAC5C,UAAU,KAAK;AAAA,YACf,WAAW,MAAM;AACf,mBAAK,iBAAiB;AAAA,YACxB;AAAA,YACA,eAAe,MAAM;AACnB,mBAAK,SAAS,EAAC,SAAS,MAAM,cAAc,KAAI,CAAC;AAAA,YACnD;AAAA,YACA,aAAa,MAAM;AAEjB,mBAAK,SAAS,EAAC,SAAS,OAAO,cAAc,MAAK,CAAC;AAAA,YACrD;AAAA,YACA,QAAQ,MAAM;AACZ,mBAAK,SAAS;AAAA,gBACZ,SAAS;AAAA,gBACT,cAAc;AAAA,gBACd,YAAY,KAAK,MAAM;AAAA,cACzB,CAAC;AAAA,YACH;AAAA,YACA,eAAa,KAAK,MAAM,aAAa,IAAI;AAAA;AAAA,UAzBrC;AAAA,QA0BN;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YAEC,MAAK;AAAA,YACL,YAAW;AAAA,YACX,WAAU;AAAA,YACV,aAAa,KAAK,MAAM,SAAS,SAAS;AAAA,YAC1C,OAAO,eAAe,SAAY,KAAK;AAAA,YACvC,SAAS,QAAM;AACb,mBAAK,SAAS,EAAC,SAAS,KAAI,CAAC;AAAA,YAC/B;AAAA,YACA,UAAU,OAAK;AACb,mBAAK,YAAY,EAAE,OAAO,KAAK;AAAA,YACjC;AAAA,YACA,QAAQ,QAAM;AACZ,mBAAK,SAAS,EAAC,SAAS,MAAK,CAAC;AAC9B,mBAAK,WAAW;AAAA,YAClB;AAAA,YACA,eAAa,KAAK,MAAM,aAAa,IAAI;AAAA;AAAA,UAhBrC;AAAA,QAkBN;AAAA,SACF;AAAA,IACF,OACK;AACH,YAAM,QAAQ,KAAK,MAAM,UAAU,KAAK,MAAM,aAAa,KAAK,MAAM;AAEtE,aAAO;AAAA,QAAC;AAAA;AAAA,UACN,cAAY,KAAK,MAAM,YAAY;AAAA,UACnC,YAAW;AAAA,UACX,WAAU;AAAA,UACV,aAAa,KAAK,MAAM,SAAS,SAAS;AAAA,UAC1C,OAAO,UAAU,SAAY,KAAK;AAAA,UAClC,UAAU,OAAK,KAAK,YAAY,EAAE,OAAO,KAAK;AAAA,UAC9C,SAAS,MAAM;AACb,iBAAK,SAAS,EAAC,SAAS,KAAI,CAAC;AAAA,UAC/B;AAAA,UACA,QAAQ,KAAK;AAAA,UACb,UAAU,KAAK,MAAM;AAAA,UACrB,eAAa,KAAK,MAAM,aAAa;AAAA;AAAA,MACvC;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"4f1ef08718bb93faa62aae09b5e3576a9aa3bb04"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Zt=function(){return s},s}Zt();class b1 extends On.Component{static defaultProps=(Zt().s[0]++,{rangeStep:1});_keyboardEvent=(Zt().s[1]++,!1);constructor(e){Zt().f[0]++,Zt().s[2]++,super(e),Zt().s[3]++,this.state={uuid:+kx(),editing:!1,value:e.value,dirtyValue:e.value}}static getDerivedStateFromProps(e,t){return Zt().f[1]++,Zt().s[4]++,Zt().b[1][0]++,!t.editing&&(Zt().b[1][1]++,e.value!==t.value)?(Zt().b[0][0]++,Zt().s[5]++,{value:e.value,dirtyValue:e.value}):(Zt().b[0][1]++,Zt().s[6]++,null)}changeValue(e){Zt().f[2]++;const t=(Zt().s[7]++,Zt().b[3][0]++,e===""||(Zt().b[3][1]++,e===void 0)?(Zt().b[2][0]++,void 0):(Zt().b[2][1]++,+e)),i=(Zt().s[8]++,this.props.value!==t);Zt().s[9]++,Zt().b[5][0]++,this.isValid(t)&&(Zt().b[5][1]++,i)?(Zt().b[4][0]++,Zt().s[10]++,this.props.onChange?(Zt().b[6][0]++,Zt().s[11]++,this.props.onChange(t)):Zt().b[6][1]++,Zt().s[12]++,this.setState({value:t})):(Zt().b[4][1]++,Zt().s[13]++,Zt().b[8][0]++,!this.isValid(t)&&(Zt().b[8][1]++,i)?(Zt().b[7][0]++,Zt().s[14]++,this.setState({value:void 0})):Zt().b[7][1]++),Zt().s[15]++,this.setState({dirtyValue:e===""?(Zt().b[9][0]++,void 0):(Zt().b[9][1]++,e)})}isValid(e){if(Zt().f[3]++,Zt().s[16]++,e===void 0)return Zt().b[10][0]++,Zt().s[17]++,!0;Zt().b[10][1]++;const t=(Zt().s[18]++,+e);return Zt().s[19]++,isNaN(t)?(Zt().b[11][0]++,Zt().s[20]++,!1):(Zt().b[11][1]++,Zt().s[21]++,Zt().b[13][0]++,!isNaN(this.props.min)&&(Zt().b[13][1]++,t<this.props.min)?(Zt().b[12][0]++,Zt().s[22]++,!1):(Zt().b[12][1]++,Zt().s[23]++,Zt().b[15][0]++,!isNaN(this.props.max)&&(Zt().b[15][1]++,t>this.props.max)?(Zt().b[14][0]++,Zt().s[24]++,!1):(Zt().b[14][1]++,Zt().s[25]++,!0)))}resetValue=(Zt().s[26]++,()=>{if(Zt().f[4]++,Zt().s[27]++,this.setState({editing:!1}),Zt().s[28]++,this.state.value)Zt().b[16][1]++;else{Zt().b[16][0]++,Zt().s[29]++;return}Zt().s[30]++,this.isValid(this.state.value)?Zt().b[17][1]++:(Zt().b[17][0]++,Zt().s[31]++,this.isValid(this.props.value)?(Zt().b[18][0]++,Zt().s[32]++,this.changeValue(this.props.value),Zt().s[33]++,this.setState({dirtyValue:this.props.value})):(Zt().b[18][1]++,Zt().s[34]++,this.changeValue(void 0),Zt().s[35]++,this.setState({dirtyValue:void 0})))});onChangeRange=(Zt().s[36]++,e=>{Zt().f[5]++;let t=(Zt().s[37]++,parseFloat(e.target.value));const i=(Zt().s[38]++,this.props.rangeStep);let r=(Zt().s[39]++,t);if(Zt().s[40]++,i){Zt().b[19][0]++;const o=(Zt().s[41]++,t%i);Zt().s[42]++,this._keyboardEvent?(Zt().b[20][0]++,Zt().s[43]++,t<+this.state.dirtyValue?(Zt().b[21][0]++,Zt().s[44]++,t=this.state.value-i):(Zt().b[21][1]++,Zt().s[45]++,t=this.state.value+i),Zt().s[46]++,r=t):(Zt().b[20][1]++,Zt().s[47]++,o<i/2?(Zt().b[22][0]++,Zt().s[48]++,t=t-o):(Zt().b[22][1]++,Zt().s[49]++,t=t+(i-o)))}else Zt().b[19][1]++;Zt().s[50]++,this._keyboardEvent=!1,Zt().s[51]++,t=Math.max(this.props.min,Math.min(this.props.max,t)),Zt().s[52]++,this.setState({value:t,dirtyValue:r}),Zt().s[53]++,this.props.onChange?(Zt().b[23][0]++,Zt().s[54]++,this.props.onChange(t)):Zt().b[23][1]++});render(){if(Zt().f[6]++,Zt().s[55]++,Zt().b[25][0]++,Object.prototype.hasOwnProperty.call(this.props,"min")&&(Zt().b[25][1]++,Object.prototype.hasOwnProperty.call(this.props,"max"))&&(Zt().b[25][2]++,this.props.min!==void 0)&&(Zt().b[25][3]++,this.props.max!==void 0)&&(Zt().b[25][4]++,this.props.allowRange)){Zt().b[24][0]++;const e=(Zt().s[56]++,this.state.editing?(Zt().b[26][0]++,this.state.dirtyValue):(Zt().b[26][1]++,this.state.value)),t=(Zt().s[57]++,this.props.default===void 0?(Zt().b[27][0]++,""):(Zt().b[27][1]++,this.props.default));let i;return Zt().s[58]++,this.state.editingRange?(Zt().b[28][0]++,Zt().s[59]++,i=this.state.value):(Zt().b[28][1]++,Zt().s[60]++,i=e),Zt().s[61]++,te.jsxs("div",{className:"maputnik-number-container",children:[te.jsx("input",{className:"maputnik-number-range",type:"range",max:this.props.max,min:this.props.min,step:"any",spellCheck:"false",value:e===void 0?(Zt().b[29][0]++,t):(Zt().b[29][1]++,e),onChange:this.onChangeRange,onKeyDown:()=>{Zt().f[7]++,Zt().s[62]++,this._keyboardEvent=!0},onPointerDown:()=>{Zt().f[8]++,Zt().s[63]++,this.setState({editing:!0,editingRange:!0})},onPointerUp:()=>{Zt().f[9]++,Zt().s[64]++,this.setState({editing:!1,editingRange:!1})},onBlur:()=>{Zt().f[10]++,Zt().s[65]++,this.setState({editing:!1,editingRange:!1,dirtyValue:this.state.value})},"data-wd-key":this.props["data-wd-key"]+"-range"},"range"),te.jsx("input",{type:"text",spellCheck:"false",className:"maputnik-number",placeholder:this.props.default?.toString(),value:i===void 0?(Zt().b[30][0]++,""):(Zt().b[30][1]++,i),onFocus:r=>{Zt().f[11]++,Zt().s[66]++,this.setState({editing:!0})},onChange:r=>{Zt().f[12]++,Zt().s[67]++,this.changeValue(r.target.value)},onBlur:r=>{Zt().f[13]++,Zt().s[68]++,this.setState({editing:!1}),Zt().s[69]++,this.resetValue()},"data-wd-key":this.props["data-wd-key"]+"-text"},"text")]})}else{Zt().b[24][1]++;const e=(Zt().s[70]++,this.state.editing?(Zt().b[31][0]++,this.state.dirtyValue):(Zt().b[31][1]++,this.state.value));return Zt().s[71]++,te.jsx("input",{"aria-label":this.props["aria-label"],spellCheck:"false",className:"maputnik-number",placeholder:this.props.default?.toString(),value:e===void 0?(Zt().b[32][0]++,""):(Zt().b[32][1]++,e),onChange:t=>(Zt().f[14]++,Zt().s[72]++,this.changeValue(t.target.value)),onFocus:()=>{Zt().f[15]++,Zt().s[73]++,this.setState({editing:!0})},onBlur:this.resetValue,required:this.props.required,"data-wd-key":this.props["data-wd-key"]})}}}function Rg(){var n="/home/runner/work/maputnik/maputnik/src/components/InputCheckbox.tsx",e="e85f7924976070cbab7795bce9cf0e191e4a6b5e",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputCheckbox.tsx",statementMap:{0:{start:{line:4,column:24},end:{line:6,column:3}},1:{start:{line:7,column:13},end:{line:9,column:3}},2:{start:{line:8,column:4},end:{line:8,column:43}},3:{start:{line:11,column:4},end:{line:26,column:9}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:13},end:{line:7,column:14}},loc:{start:{line:7,column:19},end:{line:9,column:3}},line:7},1:{name:"(anonymous_1)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:27,column:3}},line:10}},branchMap:{0:{loc:{start:{line:24,column:17},end:{line:24,column:53}},type:"cond-expr",locations:[{start:{line:24,column:36},end:{line:24,column:44}},{start:{line:24,column:47},end:{line:24,column:53}}],line:24}},s:{0:0,1:0,2:0,3:0},f:{0:0,1:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputCheckbox.tsx"],names:[],mappings:"AAkBW,SACL,KADK;AAlBX,OAAO,WAAW;AAQlB,qBAAqB,sBAAsB,MAAM,UAA8B;AAAA,EAC7E,OAAO,eAAe;AAAA,IACpB,OAAO;AAAA,EACT;AAAA,EAEA,WAAW,MAAM;AACf,SAAK,MAAM,SAAS,CAAC,KAAK,MAAM,KAAK;AAAA,EACvC;AAAA,EAEA,SAAS;AACP,WAAO,qBAAC,SAAI,WAAU,6BACpB;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,MAAK;AAAA,UACL,OAAO,KAAK,MAAM;AAAA,UAClB,UAAU,KAAK;AAAA,UACf,SAAS,KAAK;AAAA,UACd,SAAS,KAAK,MAAM;AAAA;AAAA,MACtB;AAAA,MACA,oBAAC,SAAI,WAAU,yBACb,8BAAC,SAAI,OAAO;AAAA,QACV,SAAS,KAAK,MAAM,QAAQ,WAAW;AAAA,MACzC,GAAG,WAAU,0BAAyB,SAAQ,aAC5C,8BAAC,UAAK,GAAE,2CAA0C,GACpD,GACF;AAAA,OACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e85f7924976070cbab7795bce9cf0e191e4a6b5e"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Rg=function(){return s},s}Rg();class foe extends On.Component{static defaultProps=(Rg().s[0]++,{value:!1});onChange=(Rg().s[1]++,()=>{Rg().f[0]++,Rg().s[2]++,this.props.onChange(!this.props.value)});render(){return Rg().f[1]++,Rg().s[3]++,te.jsxs("div",{className:"maputnik-checkbox-wrapper",children:[te.jsx("input",{className:"maputnik-checkbox",type:"checkbox",style:this.props.style,onChange:this.onChange,onClick:this.onChange,checked:this.props.value}),te.jsx("div",{className:"maputnik-checkbox-box",children:te.jsx("svg",{style:{display:this.props.value?(Rg().b[0][0]++,"inline"):(Rg().b[0][1]++,"none")},className:"maputnik-checkbox-icon",viewBox:"0 0 32 32",children:te.jsx("path",{d:"M1 14 L5 10 L13 18 L27 4 L31 8 L13 26 z"})})})]})}}function di(){var n="/home/runner/work/maputnik/maputnik/src/components/InputArray.tsx",e="9ed81d69001830f70ea45ac1502cde5125167d89",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputArray.tsx",statementMap:{0:{start:{line:6,column:24},end:{line:9,column:3}},1:{start:{line:11,column:4},end:{line:11,column:17}},2:{start:{line:12,column:4},end:{line:16,column:6}},3:{start:{line:19,column:18},end:{line:19,column:20}},4:{start:{line:20,column:30},end:{line:20,column:62}},5:{start:{line:21,column:4},end:{line:28,column:7}},6:{start:{line:22,column:6},end:{line:27,column:7}},7:{start:{line:23,column:8},end:{line:23,column:34}},8:{start:{line:25,column:8},end:{line:25,column:34}},9:{start:{line:26,column:8},end:{line:26,column:46}},10:{start:{line:29,column:4},end:{line:32,column:6}},11:{start:{line:35,column:4},end:{line:38,column:7}},12:{start:{line:36,column:18},end:{line:36,column:26}},13:{start:{line:37,column:6},end:{line:37,column:45}},14:{start:{line:41,column:18},end:{line:41,column:43}},15:{start:{line:42,column:4},end:{line:42,column:26}},16:{start:{line:43,column:4},end:{line:51,column:7}},17:{start:{line:46,column:6},end:{line:50,column:7}},18:{start:{line:47,column:8},end:{line:47,column:35}},19:{start:{line:48,column:13},end:{line:50,column:7}},20:{start:{line:49,column:8},end:{line:49,column:36}},21:{start:{line:54,column:22},end:{line:54,column:32}},22:{start:{line:55,column:27},end:{line:57,column:6}},23:{start:{line:56,column:6},end:{line:56,column:42}},24:{start:{line:58,column:19},end:{line:84,column:6}},25:{start:{line:59,column:6},end:{line:83,column:7}},26:{start:{line:60,column:8},end:{line:70,column:10}},27:{start:{line:66,column:29},end:{line:66,column:51}},28:{start:{line:72,column:8},end:{line:82,column:10}},29:{start:{line:85,column:4},end:{line:85,column:89}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:21},end:{line:17,column:3}},line:10},1:{name:"(anonymous_1)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:48},end:{line:33,column:3}},line:18},2:{name:"(anonymous_2)",decl:{start:{line:21,column:39},end:{line:21,column:40}},loc:{start:{line:21,column:49},end:{line:28,column:5}},line:21},3:{name:"(anonymous_3)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:20},end:{line:39,column:3}},line:34},4:{name:"(anonymous_4)",decl:{start:{line:35,column:53},end:{line:35,column:54}},loc:{start:{line:35,column:63},end:{line:38,column:5}},line:35},5:{name:"(anonymous_5)",decl:{start:{line:40,column:2},end:{line:40,column:3}},loc:{start:{line:40,column:29},end:{line:52,column:3}},line:40},6:{name:"(anonymous_6)",decl:{start:{line:45,column:7},end:{line:45,column:8}},loc:{start:{line:45,column:13},end:{line:51,column:5}},line:45},7:{name:"(anonymous_7)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:11},end:{line:86,column:3}},line:53},8:{name:"(anonymous_8)",decl:{start:{line:55,column:60},end:{line:55,column:61}},loc:{start:{line:55,column:69},end:{line:57,column:5}},line:55},9:{name:"(anonymous_9)",decl:{start:{line:58,column:59},end:{line:58,column:60}},loc:{start:{line:58,column:69},end:{line:84,column:5}},line:58},10:{name:"(anonymous_10)",decl:{start:{line:66,column:22},end:{line:66,column:23}},loc:{start:{line:66,column:29},end:{line:66,column:51}},line:66}},branchMap:{0:{loc:{start:{line:22,column:6},end:{line:27,column:7}},type:"if",locations:[{start:{line:22,column:6},end:{line:27,column:7}},{start:{line:24,column:13},end:{line:27,column:7}}],line:22},1:{loc:{start:{line:37,column:15},end:{line:37,column:43}},type:"binary-expr",locations:[{start:{line:37,column:15},end:{line:37,column:29}},{start:{line:37,column:33},end:{line:37,column:43}}],line:37},2:{loc:{start:{line:46,column:6},end:{line:50,column:7}},type:"if",locations:[{start:{line:46,column:6},end:{line:50,column:7}},{start:{line:48,column:13},end:{line:50,column:7}}],line:46},3:{loc:{start:{line:46,column:10},end:{line:46,column:55}},type:"binary-expr",locations:[{start:{line:46,column:10},end:{line:46,column:32}},{start:{line:46,column:36},end:{line:46,column:55}}],line:46},4:{loc:{start:{line:48,column:13},end:{line:50,column:7}},type:"if",locations:[{start:{line:48,column:13},end:{line:50,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:48},5:{loc:{start:{line:55,column:27},end:{line:57,column:6}},type:"binary-expr",locations:[{start:{line:55,column:27},end:{line:55,column:43}},{start:{line:55,column:47},end:{line:57,column:6}}],line:55},6:{loc:{start:{line:56,column:13},end:{line:56,column:41}},type:"binary-expr",locations:[{start:{line:56,column:13},end:{line:56,column:23}},{start:{line:56,column:27},end:{line:56,column:41}}],line:56},7:{loc:{start:{line:59,column:6},end:{line:83,column:7}},type:"if",locations:[{start:{line:59,column:6},end:{line:83,column:7}},{start:{line:71,column:13},end:{line:83,column:7}}],line:59},8:{loc:{start:{line:63,column:21},end:{line:63,column:91}},type:"cond-expr",locations:[{start:{line:63,column:61},end:{line:63,column:67}},{start:{line:63,column:70},end:{line:63,column:91}}],line:63},9:{loc:{start:{line:63,column:21},end:{line:63,column:58}},type:"binary-expr",locations:[{start:{line:63,column:21},end:{line:63,column:35}},{start:{line:63,column:39},end:{line:63,column:58}}],line:63},10:{loc:{start:{line:65,column:22},end:{line:65,column:51}},type:"cond-expr",locations:[{start:{line:65,column:39},end:{line:65,column:43}},{start:{line:65,column:46},end:{line:65,column:51}}],line:65},11:{loc:{start:{line:67,column:26},end:{line:67,column:70}},type:"binary-expr",locations:[{start:{line:67,column:26},end:{line:67,column:50}},{start:{line:67,column:54},end:{line:67,column:70}}],line:67},12:{loc:{start:{line:75,column:21},end:{line:75,column:91}},type:"cond-expr",locations:[{start:{line:75,column:61},end:{line:75,column:67}},{start:{line:75,column:70},end:{line:75,column:91}}],line:75},13:{loc:{start:{line:75,column:21},end:{line:75,column:58}},type:"binary-expr",locations:[{start:{line:75,column:21},end:{line:75,column:35}},{start:{line:75,column:39},end:{line:75,column:58}}],line:75},14:{loc:{start:{line:77,column:22},end:{line:77,column:51}},type:"cond-expr",locations:[{start:{line:77,column:39},end:{line:77,column:43}},{start:{line:77,column:46},end:{line:77,column:51}}],line:77},15:{loc:{start:{line:79,column:26},end:{line:79,column:70}},type:"binary-expr",locations:[{start:{line:79,column:26},end:{line:79,column:50}},{start:{line:79,column:54},end:{line:79,column:70}}],line:79}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputArray.tsx"],names:[],mappings:"AA0Fe;AA1Ff,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AAiBxB,qBAAqB,mBAAmB,MAAM,UAA4C;AAAA,EACxF,OAAO,eAAe;AAAA,IACpB,OAAO,CAAC;AAAA,IACR,SAAS,CAAC;AAAA,EACZ;AAAA,EAEA,YAAa,OAAwB;AACnC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,OAAO,KAAK,MAAM,MAAM,MAAM,CAAC;AAAA;AAAA,MAE/B,mBAAmB,KAAK,MAAM,MAAM,MAAM,CAAC;AAAA,IAC7C;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAAkC,OAAwB;AACxF,UAAM,QAAe,CAAC;AACtB,UAAM,oBAAoB,MAAM,kBAAkB,MAAM,CAAC;AAEzD,UAAM,MAAM,MAAM,EAAE,KAAK,IAAI,EAAE,IAAI,CAAC,GAAG,MAAM;AAC3C,UAAI,MAAM,MAAM,CAAC,MAAM,MAAM,kBAAkB,CAAC,GAAG;AACjD,cAAM,CAAC,IAAI,MAAM,MAAM,CAAC;AAAA,MAC1B,OACK;AACH,cAAM,CAAC,IAAI,MAAM,MAAM,CAAC;AACxB,0BAAkB,CAAC,IAAI,MAAM,MAAM,CAAC;AAAA,MACtC;AAAA,IACF,CAAC;AAED,WAAO;AAAA,MACL;AAAA,MACA;AAAA,IACF;AAAA,EACF;AAAA,EAEA,WAAW,OAAkB;AAC3B,WAAO,MAAM,KAAK,MAAM,MAAM,EAAE,KAAK,IAAI,EAAE,MAAM,CAAC,GAAG,MAAM;AACzD,YAAM,MAAM,MAAM,CAAC;AACnB,aAAO,EAAE,QAAQ,UAAa,QAAQ;AAAA,IACxC,CAAC;AAAA,EACH;AAAA,EAEA,YAAY,KAAa,UAAuC;AAC9D,UAAM,QAAQ,KAAK,MAAM,MAAM,MAAM,CAAC;AACtC,UAAM,GAAG,IAAI;AAEb,SAAK,SAAS;AAAA,MACZ;AAAA,IACF,GAAG,MAAM;AACP,UAAI,KAAK,WAAW,KAAK,KAAK,KAAK,MAAM,UAAU;AACjD,aAAK,MAAM,SAAS,KAAK;AAAA,MAC3B,WACS,KAAK,MAAM,UAAS;AAE3B,aAAK,MAAM,SAAS,MAAS;AAAA,MAC/B;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,MAAK,IAAI,KAAK;AAErB,UAAM,iBACJ,MAAM,SAAS,KACf,CAAC,MAAM,MAAM,SAAO;AAClB,aAAQ,QAAQ,MAAM,QAAQ;AAAA,IAChC,CAAC;AAGH,UAAM,SAAS,MAAM,KAAK,MAAM,MAAM,EAAE,KAAK,IAAI,EAAE,IAAI,CAAC,GAAG,MAAM;AAC/D,UAAG,KAAK,MAAM,SAAS,UAAU;AAC/B,eAAO;AAAA,UAAC;AAAA;AAAA,YAEN,SAAS,kBAAkB,CAAC,KAAK,MAAM,UAAU,SAAY,KAAK,MAAM,QAAQ,CAAC;AAAA,YACjF,OAAO,MAAM,CAAC;AAAA,YACd,UAAU,iBAAiB,OAAO;AAAA,YAClC,UAAU,CAAC,MAAM,KAAK,YAAY,GAAG,CAAC;AAAA,YACtC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,UAL9C;AAAA,QAMP;AAAA,MACF,OAAO;AACL,eAAO;AAAA,UAAC;AAAA;AAAA,YAEN,SAAS,kBAAkB,CAAC,KAAK,MAAM,UAAU,SAAY,KAAK,MAAM,QAAQ,CAAC;AAAA,YACjF,OAAO,MAAM,CAAC;AAAA,YACd,UAAU,iBAAiB,OAAO;AAAA,YAClC,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,UAL9C;AAAA,QAMP;AAAA,MACF;AAAA,IACF,CAAC;AAED,WACE,oBAAC,SAAI,WAAU,kBACZ,kBACH;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"9ed81d69001830f70ea45ac1502cde5125167d89"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return di=function(){return s},s}di();class $R extends On.Component{static defaultProps=(di().s[0]++,{value:[],default:[]});constructor(e){di().f[0]++,di().s[1]++,super(e),di().s[2]++,this.state={value:this.props.value.slice(0),initialPropsValue:this.props.value.slice(0)}}static getDerivedStateFromProps(e,t){di().f[1]++;const i=(di().s[3]++,[]),r=(di().s[4]++,t.initialPropsValue.slice(0));return di().s[5]++,Array(e.length).fill(null).map((o,s)=>{di().f[2]++,di().s[6]++,e.value[s]===t.initialPropsValue[s]?(di().b[0][0]++,di().s[7]++,i[s]=t.value[s]):(di().b[0][1]++,di().s[8]++,i[s]=t.value[s],di().s[9]++,r[s]=t.value[s])}),di().s[10]++,{value:i,initialPropsValue:r}}isComplete(e){return di().f[3]++,di().s[11]++,Array(this.props.length).fill(null).every((t,i)=>{di().f[4]++;const r=(di().s[12]++,e[i]);return di().s[13]++,di().b[1][0]++,!(r===void 0||(di().b[1][1]++,r===""))})}changeValue(e,t){di().f[5]++;const i=(di().s[14]++,this.state.value.slice(0));di().s[15]++,i[e]=t,di().s[16]++,this.setState({value:i},()=>{di().f[6]++,di().s[17]++,di().b[3][0]++,this.isComplete(i)&&(di().b[3][1]++,this.props.onChange)?(di().b[2][0]++,di().s[18]++,this.props.onChange(i)):(di().b[2][1]++,di().s[19]++,this.props.onChange?(di().b[4][0]++,di().s[20]++,this.props.onChange(void 0)):di().b[4][1]++)})}render(){di().f[7]++;const{value:e}=(di().s[21]++,this.state),t=(di().s[22]++,di().b[5][0]++,e.length>0&&(di().b[5][1]++,!e.every(r=>(di().f[8]++,di().s[23]++,di().b[6][0]++,r===""||(di().b[6][1]++,r===void 0))))),i=(di().s[24]++,Array(this.props.length).fill(null).map((r,o)=>(di().f[9]++,di().s[25]++,this.props.type==="number"?(di().b[7][0]++,di().s[26]++,te.jsx(b1,{default:(di().b[9][0]++,t||(di().b[9][1]++,!this.props.default)?(di().b[8][0]++,void 0):(di().b[8][1]++,this.props.default[o])),value:e[o],required:t?(di().b[10][0]++,!0):(di().b[10][1]++,!1),onChange:s=>(di().f[10]++,di().s[27]++,this.changeValue(o,s)),"aria-label":(di().b[11][0]++,this.props["aria-label"]||(di().b[11][1]++,this.props.label))},o)):(di().b[7][1]++,di().s[28]++,te.jsx(Mm,{default:(di().b[13][0]++,t||(di().b[13][1]++,!this.props.default)?(di().b[12][0]++,void 0):(di().b[12][1]++,this.props.default[o])),value:e[o],required:t?(di().b[14][0]++,!0):(di().b[14][1]++,!1),onChange:this.changeValue.bind(this,o),"aria-label":(di().b[15][0]++,this.props["aria-label"]||(di().b[15][1]++,this.props.label))},o)))));return di().s[29]++,te.jsx("div",{className:"maputnik-array",children:i})}}function Mu(){var n="/home/runner/work/maputnik/maputnik/src/components/InputMultiInput.tsx",e="bdd7d8430a2c43402b1b125b74a343e39aea6a6c",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputMultiInput.tsx",statementMap:{0:{start:{line:6,column:18},end:{line:6,column:36}},1:{start:{line:7,column:4},end:{line:9,column:5}},2:{start:{line:8,column:6},end:{line:8,column:43}},3:{start:{line:8,column:35},end:{line:8,column:41}},4:{start:{line:10,column:26},end:{line:10,column:59}},5:{start:{line:11,column:19},end:{line:32,column:6}},6:{start:{line:12,column:6},end:{line:31,column:8}},7:{start:{line:22,column:34},end:{line:22,column:58}},8:{start:{line:33,column:4},end:{line:33,column:140}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:34,column:3}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:8,column:28},end:{line:8,column:29}},loc:{start:{line:8,column:35},end:{line:8,column:41}},line:8},2:{name:"(anonymous_2)",decl:{start:{line:11,column:31},end:{line:11,column:32}},loc:{start:{line:11,column:49},end:{line:32,column:5}},line:11},3:{name:"(anonymous_3)",decl:{start:{line:22,column:26},end:{line:22,column:27}},loc:{start:{line:22,column:34},end:{line:22,column:58}},line:22}},branchMap:{0:{loc:{start:{line:7,column:4},end:{line:9,column:5}},type:"if",locations:[{start:{line:7,column:4},end:{line:9,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:7},1:{loc:{start:{line:7,column:8},end:{line:7,column:56}},type:"binary-expr",locations:[{start:{line:7,column:8},end:{line:7,column:26}},{start:{line:7,column:30},end:{line:7,column:56}}],line:7},2:{loc:{start:{line:10,column:26},end:{line:10,column:59}},type:"binary-expr",locations:[{start:{line:10,column:26},end:{line:10,column:42}},{start:{line:10,column:46},end:{line:10,column:59}}],line:10}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},f:{0:0,1:0,2:0,3:0},b:{0:[0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputMultiInput.tsx"],names:[],mappings:"AAoBa,SAIL,KAJK;AApBb,OAAO,WAAW;AAClB,OAAO,gBAAgB;AAUvB,qBAAqB,wBAAwB,MAAM,UAAgC;AAAA,EACjF,SAAS;AACP,QAAI,UAAU,KAAK,MAAM;AACzB,QAAG,QAAQ,SAAS,KAAK,CAAC,MAAM,QAAQ,QAAQ,CAAC,CAAC,GAAG;AACnD,gBAAU,QAAQ,IAAI,OAAK,CAAC,GAAG,CAAC,CAAC;AAAA,IACnC;AAEA,UAAM,gBAAgB,KAAK,MAAM,SAAS,QAAQ,CAAC,EAAE,CAAC;AACtD,UAAM,SAAS,QAAQ,IAAI,CAAC,CAAC,KAAK,KAAK,MAAK;AAC1C,aAAO;AAAA,QAAC;AAAA;AAAA,UAEN,WAAW,WAAW,mBAAmB,4BAA4B,EAAC,4BAA4B,QAAQ,cAAa,CAAC;AAAA,UAExH;AAAA;AAAA,cAAC;AAAA;AAAA,gBAAM,MAAK;AAAA,gBACV,MAAM,KAAK,MAAM;AAAA,gBACjB,UAAU,QAAM,KAAK,MAAM,SAAS,GAAG;AAAA,gBACvC,OAAO;AAAA,gBACP,SAAS,QAAQ;AAAA;AAAA,YACnB;AAAA,YACC;AAAA;AAAA;AAAA,QATI;AAAA,MAUP;AAAA,IACF,CAAC;AAED,WAAO,oBAAC,cAAS,WAAU,wBAAuB,cAAY,KAAK,MAAM,YAAY,GAClF,kBACH;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"bdd7d8430a2c43402b1b125b74a343e39aea6a6c"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Mu=function(){return s},s}Mu();class jTe extends On.Component{render(){Mu().f[0]++;let e=(Mu().s[0]++,this.props.options);Mu().s[1]++,Mu().b[1][0]++,e.length>0&&(Mu().b[1][1]++,!Array.isArray(e[0]))?(Mu().b[0][0]++,Mu().s[2]++,e=e.map(r=>(Mu().f[1]++,Mu().s[3]++,[r,r]))):Mu().b[0][1]++;const t=(Mu().s[4]++,Mu().b[2][0]++,this.props.value||(Mu().b[2][1]++,e[0][0])),i=(Mu().s[5]++,e.map(([r,o])=>(Mu().f[2]++,Mu().s[6]++,te.jsxs("label",{className:f0("maputnik-button","maputnik-radio-as-button",{"maputnik-button-selected":r===t}),children:[te.jsx("input",{type:"radio",name:this.props.name,onChange:s=>(Mu().f[3]++,Mu().s[7]++,this.props.onChange(r)),value:r,checked:r===t}),o]},r))));return Mu().s[8]++,te.jsx("fieldset",{className:"maputnik-multibutton","aria-label":this.props["aria-label"],children:i})}}function Ja(){var n="/home/runner/work/maputnik/maputnik/src/components/InputEnum.tsx",e="d905b5da4422f2b84d44f87b04fda3de421542f5",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputEnum.tsx",statementMap:{0:{start:{line:6,column:12},end:{line:6,column:13}},1:{start:{line:7,column:2},end:{line:9,column:5}},2:{start:{line:8,column:4},end:{line:8,column:24}},3:{start:{line:10,column:2},end:{line:10,column:13}},4:{start:{line:14,column:54},end:{line:14,column:64}},5:{start:{line:15,column:4},end:{line:36,column:5}},6:{start:{line:16,column:6},end:{line:25,column:8}},7:{start:{line:27,column:6},end:{line:35,column:8}}},fnMap:{0:{name:"optionsLabelLength",decl:{start:{line:5,column:9},end:{line:5,column:27}},loc:{start:{line:5,column:37},end:{line:11,column:1}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:7,column:18},end:{line:7,column:19}},loc:{start:{line:7,column:34},end:{line:9,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:13,column:2},end:{line:13,column:3}},loc:{start:{line:13,column:11},end:{line:37,column:3}},line:13}},branchMap:{0:{loc:{start:{line:15,column:4},end:{line:36,column:5}},type:"if",locations:[{start:{line:15,column:4},end:{line:36,column:5}},{start:{line:26,column:11},end:{line:36,column:5}}],line:15},1:{loc:{start:{line:15,column:8},end:{line:15,column:64}},type:"binary-expr",locations:[{start:{line:15,column:8},end:{line:15,column:27}},{start:{line:15,column:31},end:{line:15,column:64}}],line:15},2:{loc:{start:{line:21,column:17},end:{line:21,column:44}},type:"binary-expr",locations:[{start:{line:21,column:17},end:{line:21,column:22}},{start:{line:21,column:26},end:{line:21,column:44}}],line:21},3:{loc:{start:{line:23,column:24},end:{line:23,column:57}},type:"binary-expr",locations:[{start:{line:23,column:24},end:{line:23,column:48}},{start:{line:23,column:52},end:{line:23,column:57}}],line:23},4:{loc:{start:{line:31,column:17},end:{line:31,column:44}},type:"binary-expr",locations:[{start:{line:31,column:17},end:{line:31,column:22}},{start:{line:31,column:26},end:{line:31,column:44}}],line:31},5:{loc:{start:{line:33,column:24},end:{line:33,column:57}},type:"binary-expr",locations:[{start:{line:33,column:24},end:{line:33,column:48}},{start:{line:33,column:52},end:{line:33,column:57}}],line:33}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},f:{0:0,1:0,2:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputEnum.tsx"],names:[],mappings:"AAgCa;AAhCb,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,qBAAqB;AAG5B,SAAS,mBAAmB,SAAgB;AAC1C,MAAI,MAAM;AACV,UAAQ,QAAQ,CAAC,CAAC,GAAG,KAAK,MAAM;AAC9B,WAAO,MAAM;AAAA,EACf,CAAC;AACD,SAAO;AACT;AAgBA,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,SAAS;AACP,UAAM,EAAC,SAAS,OAAO,UAAU,MAAM,MAAK,IAAI,KAAK;AAErD,QAAG,QAAQ,UAAU,KAAK,mBAAmB,OAAO,KAAK,IAAI;AAC3D,aAAO;AAAA,QAAC;AAAA;AAAA,UACN;AAAA,UACA;AAAA,UACA,OAAQ,SAAS,KAAK,MAAM;AAAA,UAC5B;AAAA,UACA,cAAY,KAAK,MAAM,YAAY,KAAK;AAAA;AAAA,MAC1C;AAAA,IACF,OAAO;AACL,aAAO;AAAA,QAAC;AAAA;AAAA,UACN;AAAA,UACA,OAAQ,SAAS,KAAK,MAAM;AAAA,UAC5B;AAAA,UACA,cAAY,KAAK,MAAM,YAAY,KAAK;AAAA;AAAA,MAC1C;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d905b5da4422f2b84d44f87b04fda3de421542f5"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Ja=function(){return s},s}Ja();function NTe(n){Ja().f[0]++;let e=(Ja().s[0]++,0);return Ja().s[1]++,n.forEach(([t,i])=>{Ja().f[1]++,Ja().s[2]++,e+=i.length}),Ja().s[3]++,e}class PK extends On.Component{render(){Ja().f[2]++;const{options:e,value:t,onChange:i,name:r,label:o}=(Ja().s[4]++,this.props);return Ja().s[5]++,Ja().b[1][0]++,e.length<=3&&(Ja().b[1][1]++,NTe(e)<=20)?(Ja().b[0][0]++,Ja().s[6]++,te.jsx(jTe,{name:r,options:e,value:(Ja().b[2][0]++,t||(Ja().b[2][1]++,this.props.default)),onChange:i,"aria-label":(Ja().b[3][0]++,this.props["aria-label"]||(Ja().b[3][1]++,o))})):(Ja().b[0][1]++,Ja().s[7]++,te.jsx(hC,{options:e,value:(Ja().b[4][0]++,t||(Ja().b[4][1]++,this.props.default)),onChange:i,"aria-label":(Ja().b[5][0]++,this.props["aria-label"]||(Ja().b[5][1]++,o))}))}}function ox(){var n="/home/runner/work/maputnik/maputnik/src/components/SmallError.tsx",e="f693e5bbe9d7e0de15b6fd90f13b77a5ebfddf0e",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/SmallError.tsx",statementMap:{0:{start:{line:7,column:14},end:{line:7,column:26}},1:{start:{line:8,column:4},end:{line:12,column:9}},2:{start:{line:15,column:19},end:{line:15,column:56}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:13,column:3}},line:6}},branchMap:{},s:{0:0,1:0,2:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/SmallError.tsx"],names:[],mappings:"AAaM;AAbN,OAAO,WAAW;AAClB,SAA+B,uBAAuB;AACtD,OAAO;AAOP,MAAM,2BAA2B,MAAM,UAAmC;AAAA,EACxE,SAAU;AACR,UAAM,IAAI,KAAK,MAAM;AACrB,WACE,qBAAC,SAAI,WAAU,cACZ;AAAA,QAAE,QAAQ;AAAA,MAAE;AAAA,MAAE,KAAK,MAAM;AAAA,OAC5B;AAAA,EAEJ;AACF;AAEA,MAAM,aAAa,gBAAgB,EAAE,kBAAkB;AACvD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f693e5bbe9d7e0de15b6fd90f13b77a5ebfddf0e"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return ox=function(){return s},s}ox();class GTe extends On.Component{render(){ox().f[0]++;const e=(ox().s[0]++,this.props.t);return ox().s[1]++,te.jsxs("div",{className:"SmallError",children:[e("Error:")," ",this.props.children]})}}const oT=(ox().s[2]++,Po()(GTe));function Mr(){var n="/home/runner/work/maputnik/maputnik/src/components/InputUrl.tsx",e="447f54dcea7174dfde20df5fd4ad658ec6e8baa0",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputUrl.tsx",statementMap:{0:{start:{line:7,column:2},end:{line:9,column:3}},1:{start:{line:8,column:4},end:{line:8,column:11}},2:{start:{line:11,column:22},end:{line:18,column:3}},3:{start:{line:12,column:4},end:{line:17,column:5}},4:{start:{line:13,column:21},end:{line:13,column:34}},5:{start:{line:14,column:6},end:{line:14,column:29}},6:{start:{line:16,column:6},end:{line:16,column:20}},7:{start:{line:19,column:19},end:{line:19,column:35}},8:{start:{line:20,column:16},end:{line:20,column:53}},9:{start:{line:21,column:2},end:{line:41,column:3}},10:{start:{line:22,column:4},end:{line:34,column:5}},11:{start:{line:23,column:6},end:{line:26,column:14}},12:{start:{line:28,column:6},end:{line:33,column:14}},13:{start:{line:35,column:9},end:{line:41,column:3}},14:{start:{line:36,column:4},end:{line:40,column:12}},15:{start:{line:42,column:2},end:{line:42,column:15}},16:{start:{line:45,column:24},end:{line:48,column:3}},17:{start:{line:50,column:4},end:{line:50,column:17}},18:{start:{line:51,column:4},end:{line:53,column:6}},19:{start:{line:55,column:12},end:{line:60,column:3}},20:{start:{line:56,column:4},end:{line:58,column:7}},21:{start:{line:59,column:4},end:{line:59,column:52}},22:{start:{line:59,column:28},end:{line:59,column:52}},23:{start:{line:61,column:13},end:{line:66,column:3}},24:{start:{line:62,column:4},end:{line:64,column:7}},25:{start:{line:65,column:4},end:{line:65,column:29}},26:{start:{line:68,column:4},end:{line:79,column:9}},27:{start:{line:82,column:17},end:{line:82,column:52}}},fnMap:{0:{name:"validate",decl:{start:{line:6,column:9},end:{line:6,column:17}},loc:{start:{line:6,column:26},end:{line:43,column:1}},line:6},1:{name:"(anonymous_1)",decl:{start:{line:11,column:22},end:{line:11,column:23}},loc:{start:{line:11,column:32},end:{line:18,column:3}},line:11},2:{name:"(anonymous_2)",decl:{start:{line:46,column:13},end:{line:46,column:14}},loc:{start:{line:46,column:19},end:{line:47,column:5}},line:46},3:{name:"(anonymous_3)",decl:{start:{line:49,column:2},end:{line:49,column:3}},loc:{start:{line:49,column:21},end:{line:54,column:3}},line:49},4:{name:"(anonymous_4)",decl:{start:{line:55,column:12},end:{line:55,column:13}},loc:{start:{line:55,column:21},end:{line:60,column:3}},line:55},5:{name:"(anonymous_5)",decl:{start:{line:61,column:13},end:{line:61,column:14}},loc:{start:{line:61,column:22},end:{line:66,column:3}},line:61},6:{name:"(anonymous_6)",decl:{start:{line:67,column:2},end:{line:67,column:3}},loc:{start:{line:67,column:11},end:{line:80,column:3}},line:67}},branchMap:{0:{loc:{start:{line:7,column:2},end:{line:9,column:3}},type:"if",locations:[{start:{line:7,column:2},end:{line:9,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:7},1:{loc:{start:{line:21,column:2},end:{line:41,column:3}},type:"if",locations:[{start:{line:21,column:2},end:{line:41,column:3}},{start:{line:35,column:9},end:{line:41,column:3}}],line:21},2:{loc:{start:{line:22,column:4},end:{line:34,column:5}},type:"if",locations:[{start:{line:22,column:4},end:{line:34,column:5}},{start:{line:27,column:11},end:{line:34,column:5}}],line:22},3:{loc:{start:{line:35,column:9},end:{line:41,column:3}},type:"if",locations:[{start:{line:35,column:9},end:{line:41,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:35},4:{loc:{start:{line:35,column:13},end:{line:35,column:86}},type:"binary-expr",locations:[{start:{line:35,column:13},end:{line:35,column:21}},{start:{line:35,column:25},end:{line:35,column:45}},{start:{line:35,column:49},end:{line:35,column:86}}],line:35},5:{loc:{start:{line:59,column:4},end:{line:59,column:52}},type:"if",locations:[{start:{line:59,column:4},end:{line:59,column:52}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:59}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0,0],5:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputUrl.tsx"],names:["url"],mappings:"AA4BU,SAAoC,KAApC;AA5BV,OAAO,WAAyB;AAChC,OAAO,iBAAiB;AACxB,OAAO,gBAAgB;AACvB,SAAS,OAA6B,uBAAuB;AAG7D,SAAS,SAAS,KAAa,GAAuC;AACpE,MAAI,QAAQ,IAAI;AACd;AAAA,EACF;AAEA,MAAI;AACJ,QAAM,cAAc,CAACA,SAAgB;AACnC,QAAI;AACF,YAAM,SAAS,IAAI,IAAIA,IAAG;AAC1B,aAAO,OAAO;AAAA,IAChB,SACO,MAAM;AACX,aAAO;AAAA,IACT;AAAA,EACF;AACA,QAAM,WAAW,YAAY,GAAG;AAChC,QAAM,QAAQ,OAAO,SAAS,aAAa;AAE3C,MAAI,CAAC,UAAU;AACb,QAAI,OAAO;AACT,cACE,oBAAC,cACC,+BAAC,SAAM,GAAM;AAAA;AAAA,QAAuB,oBAAC,UAAK,sBAAQ;AAAA,SAAO,GAC3D;AAAA,IAEJ,OAAO;AACL,cACE,oBAAC,cACC,+BAAC,SAAM,GAAM;AAAA;AAAA,QAAuB,oBAAC,UAAK,qBAAO;AAAA,QAAO;AAAA,QAAI,oBAAC,UAAK,sBAAQ;AAAA,SAAO,GACnF;AAAA,IAEJ;AAAA,EACF,WAEE,YACA,aAAa,WACb,OAAO,SAAS,aAAa,UAC7B;AACA,YACE,oBAAC,cACC,+BAAC,SAAM,GAAM;AAAA;AAAA,MACwE,oBAAC,UAAK,sBAAQ;AAAA,MAAO;AAAA,OAC1G,GACF;AAAA,EAEJ;AAEA,SAAO;AACT;AAsBA,MAAM,yBAAyB,MAAM,UAAgD;AAAA,EACnF,OAAO,eAAe;AAAA,IACpB,SAAS,MAAM;AAAA,IAAC;AAAA,EAClB;AAAA,EAEA,YAAa,OAA8B;AACzC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,OAAO,SAAS,MAAM,OAAO,MAAM,CAAC;AAAA,IACtC;AAAA,EACF;AAAA,EAEA,UAAU,CAAC,QAAgB;AACzB,SAAK,SAAS;AAAA,MACZ,OAAO,SAAS,KAAK,KAAK,MAAM,CAAC;AAAA,IACnC,CAAC;AACD,QAAI,KAAK,MAAM,QAAS,MAAK,MAAM,QAAQ,GAAG;AAAA,EAChD;AAAA,EAEA,WAAW,CAAC,QAAgB;AAC1B,SAAK,SAAS;AAAA,MACZ,OAAO,SAAS,KAAK,KAAK,MAAM,CAAC;AAAA,IACnC,CAAC;AACD,SAAK,MAAM,SAAS,GAAG;AAAA,EACzB;AAAA,EAEA,SAAU;AACR,WACE,qBAAC,SACC;AAAA;AAAA,QAAC;AAAA;AAAA,UACE,GAAG,KAAK;AAAA,UACT,SAAS,KAAK;AAAA,UACd,UAAU,KAAK;AAAA,UACf,cAAY,KAAK,MAAM,YAAY;AAAA;AAAA,MACrC;AAAA,MACC,KAAK,MAAM;AAAA,OACd;AAAA,EAEJ;AACF;AAEA,MAAM,WAAW,gBAAgB,EAAE,gBAAgB;AACnD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"447f54dcea7174dfde20df5fd4ad658ec6e8baa0"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Mr=function(){return s},s}Mr();function sT(n,e){if(Mr().f[0]++,Mr().s[0]++,n===""){Mr().b[0][0]++,Mr().s[1]++;return}else Mr().b[0][1]++;let t;Mr().s[2]++;const i=s=>{Mr().f[1]++,Mr().s[3]++;try{const a=(Mr().s[4]++,new URL(s));return Mr().s[5]++,a.protocol}catch{Mr().s[6]++;return}},r=(Mr().s[7]++,i(n)),o=(Mr().s[8]++,window.location.protocol==="https:");return Mr().s[9]++,r?(Mr().b[1][1]++,Mr().s[13]++,Mr().b[4][0]++,r&&(Mr().b[4][1]++,r==="http:")&&(Mr().b[4][2]++,window.location.protocol==="https:")?(Mr().b[3][0]++,Mr().s[14]++,t=te.jsx(oT,{children:te.jsxs(Eb,{t:e,children:["CORS policy won't allow fetching resources served over http from https, use a ",te.jsx("code",{children:"https://"})," domain"]})})):Mr().b[3][1]++):(Mr().b[1][0]++,Mr().s[10]++,o?(Mr().b[2][0]++,Mr().s[11]++,t=te.jsx(oT,{children:te.jsxs(Eb,{t:e,children:["Must provide protocol: ",te.jsx("code",{children:"https://"})]})})):(Mr().b[2][1]++,Mr().s[12]++,t=te.jsx(oT,{children:te.jsxs(Eb,{t:e,children:["Must provide protocol: ",te.jsx("code",{children:"http://"})," or ",te.jsx("code",{children:"https://"})]})}))),Mr().s[15]++,t}class WTe extends On.Component{static defaultProps=(Mr().s[16]++,{onInput:()=>{Mr().f[2]++}});constructor(e){Mr().f[3]++,Mr().s[17]++,super(e),Mr().s[18]++,this.state={error:sT(e.value,e.t)}}onInput=(Mr().s[19]++,e=>{Mr().f[4]++,Mr().s[20]++,this.setState({error:sT(e,this.props.t)}),Mr().s[21]++,this.props.onInput?(Mr().b[5][0]++,Mr().s[22]++,this.props.onInput(e)):Mr().b[5][1]++});onChange=(Mr().s[23]++,e=>{Mr().f[5]++,Mr().s[24]++,this.setState({error:sT(e,this.props.t)}),Mr().s[25]++,this.props.onChange(e)});render(){return Mr().f[6]++,Mr().s[26]++,te.jsxs("div",{children:[te.jsx(Mm,{...this.props,onInput:this.onInput,onChange:this.onChange,"aria-label":this.props["aria-label"]}),this.state.error]})}}const UK=(Mr().s[27]++,Po()(WTe));function Vn(){var n="/home/runner/work/maputnik/maputnik/src/components/InputDynamicArray.tsx",e="705ac9c8c3dcb0aff320a53fac9b80bc280b1cbf",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputDynamicArray.tsx",statementMap:{0:{start:{line:15,column:19},end:{line:15,column:39}},1:{start:{line:16,column:4},end:{line:16,column:27}},2:{start:{line:17,column:4},end:{line:17,column:57}},3:{start:{line:17,column:29},end:{line:17,column:57}},4:{start:{line:20,column:4},end:{line:20,column:56}},5:{start:{line:22,column:13},end:{line:38,column:3}},6:{start:{line:23,column:19},end:{line:23,column:39}},7:{start:{line:24,column:4},end:{line:36,column:5}},8:{start:{line:25,column:6},end:{line:25,column:21}},9:{start:{line:26,column:11},end:{line:36,column:5}},10:{start:{line:27,column:6},end:{line:27,column:22}},11:{start:{line:28,column:11},end:{line:36,column:5}},12:{start:{line:29,column:28},end:{line:29,column:38}},13:{start:{line:30,column:27},end:{line:30,column:59}},14:{start:{line:31,column:6},end:{line:31,column:32}},15:{start:{line:32,column:11},end:{line:36,column:5}},16:{start:{line:33,column:6},end:{line:33,column:29}},17:{start:{line:35,column:6},end:{line:35,column:22}},18:{start:{line:37,column:4},end:{line:37,column:57}},19:{start:{line:37,column:29},end:{line:37,column:57}},20:{start:{line:40,column:19},end:{line:40,column:39}},21:{start:{line:41,column:4},end:{line:41,column:31}},22:{start:{line:42,column:4},end:{line:42,column:86}},23:{start:{line:42,column:29},end:{line:42,column:86}},24:{start:{line:45,column:14},end:{line:45,column:26}},25:{start:{line:46,column:22},end:{line:46,column:77}},26:{start:{line:47,column:19},end:{line:116,column:6}},27:{start:{line:48,column:45},end:{line:54,column:7}},28:{start:{line:56,column:6},end:{line:103,column:7}},29:{start:{line:57,column:8},end:{line:64,column:10}},30:{start:{line:65,column:13},end:{line:103,column:7}},31:{start:{line:66,column:8},end:{line:73,column:10}},32:{start:{line:74,column:13},end:{line:103,column:7}},33:{start:{line:75,column:24},end:{line:75,column:99}},34:{start:{line:75,column:78},end:{line:75,column:98}},35:{start:{line:76,column:8},end:{line:84,column:10}},36:{start:{line:85,column:13},end:{line:103,column:7}},37:{start:{line:86,column:8},end:{line:93,column:10}},38:{start:{line:95,column:8},end:{line:102,column:10}},39:{start:{line:104,column:6},end:{line:115,column:8}},40:{start:{line:117,column:4},end:{line:127,column:9}},41:{start:{line:130,column:26},end:{line:130,column:70}},42:{start:{line:134,column:14},end:{line:134,column:26}},43:{start:{line:135,column:4},end:{line:148,column:6}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:29},end:{line:18,column:3}},line:14},1:{name:"(anonymous_1)",decl:{start:{line:19,column:2},end:{line:19,column:3}},loc:{start:{line:19,column:15},end:{line:21,column:3}},line:19},2:{name:"(anonymous_2)",decl:{start:{line:22,column:13},end:{line:22,column:14}},loc:{start:{line:22,column:19},end:{line:38,column:3}},line:22},3:{name:"(anonymous_3)",decl:{start:{line:39,column:2},end:{line:39,column:3}},loc:{start:{line:39,column:24},end:{line:43,column:3}},line:39},4:{name:"(anonymous_4)",decl:{start:{line:44,column:2},end:{line:44,column:3}},loc:{start:{line:44,column:11},end:{line:128,column:3}},line:44},5:{name:"(anonymous_5)",decl:{start:{line:47,column:35},end:{line:47,column:36}},loc:{start:{line:47,column:45},end:{line:116,column:5}},line:47},6:{name:"(anonymous_6)",decl:{start:{line:75,column:70},end:{line:75,column:71}},loc:{start:{line:75,column:78},end:{line:75,column:98}},line:75},7:{name:"(anonymous_7)",decl:{start:{line:133,column:2},end:{line:133,column:3}},loc:{start:{line:133,column:11},end:{line:149,column:3}},line:133}},branchMap:{0:{loc:{start:{line:17,column:4},end:{line:17,column:57}},type:"if",locations:[{start:{line:17,column:4},end:{line:17,column:57}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:17},1:{loc:{start:{line:20,column:11},end:{line:20,column:55}},type:"binary-expr",locations:[{start:{line:20,column:11},end:{line:20,column:27}},{start:{line:20,column:31},end:{line:20,column:49}},{start:{line:20,column:53},end:{line:20,column:55}}],line:20},2:{loc:{start:{line:24,column:4},end:{line:36,column:5}},type:"if",locations:[{start:{line:24,column:4},end:{line:36,column:5}},{start:{line:26,column:11},end:{line:36,column:5}}],line:24},3:{loc:{start:{line:26,column:11},end:{line:36,column:5}},type:"if",locations:[{start:{line:26,column:11},end:{line:36,column:5}},{start:{line:28,column:11},end:{line:36,column:5}}],line:26},4:{loc:{start:{line:28,column:11},end:{line:36,column:5}},type:"if",locations:[{start:{line:28,column:11},end:{line:36,column:5}},{start:{line:32,column:11},end:{line:36,column:5}}],line:28},5:{loc:{start:{line:32,column:11},end:{line:36,column:5}},type:"if",locations:[{start:{line:32,column:11},end:{line:36,column:5}},{start:{line:34,column:11},end:{line:36,column:5}}],line:32},6:{loc:{start:{line:37,column:4},end:{line:37,column:57}},type:"if",locations:[{start:{line:37,column:4},end:{line:37,column:57}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},7:{loc:{start:{line:42,column:4},end:{line:42,column:86}},type:"if",locations:[{start:{line:42,column:4},end:{line:42,column:86}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:42},8:{loc:{start:{line:42,column:49},end:{line:42,column:84}},type:"cond-expr",locations:[{start:{line:42,column:69},end:{line:42,column:75}},{start:{line:42,column:78},end:{line:42,column:84}}],line:42},9:{loc:{start:{line:56,column:6},end:{line:103,column:7}},type:"if",locations:[{start:{line:56,column:6},end:{line:103,column:7}},{start:{line:65,column:13},end:{line:103,column:7}}],line:56},10:{loc:{start:{line:62,column:26},end:{line:62,column:70}},type:"binary-expr",locations:[{start:{line:62,column:26},end:{line:62,column:50}},{start:{line:62,column:54},end:{line:62,column:70}}],line:62},11:{loc:{start:{line:65,column:13},end:{line:103,column:7}},type:"if",locations:[{start:{line:65,column:13},end:{line:103,column:7}},{start:{line:74,column:13},end:{line:103,column:7}}],line:65},12:{loc:{start:{line:71,column:26},end:{line:71,column:70}},type:"binary-expr",locations:[{start:{line:71,column:26},end:{line:71,column:50}},{start:{line:71,column:54},end:{line:71,column:70}}],line:71},13:{loc:{start:{line:74,column:13},end:{line:103,column:7}},type:"if",locations:[{start:{line:74,column:13},end:{line:103,column:7}},{start:{line:85,column:13},end:{line:103,column:7}}],line:74},14:{loc:{start:{line:82,column:26},end:{line:82,column:70}},type:"binary-expr",locations:[{start:{line:82,column:26},end:{line:82,column:50}},{start:{line:82,column:54},end:{line:82,column:70}}],line:82},15:{loc:{start:{line:85,column:13},end:{line:103,column:7}},type:"if",locations:[{start:{line:85,column:13},end:{line:103,column:7}},{start:{line:94,column:13},end:{line:103,column:7}}],line:85},16:{loc:{start:{line:91,column:26},end:{line:91,column:70}},type:"binary-expr",locations:[{start:{line:91,column:26},end:{line:91,column:50}},{start:{line:91,column:54},end:{line:91,column:70}}],line:91},17:{loc:{start:{line:100,column:26},end:{line:100,column:70}},type:"binary-expr",locations:[{start:{line:100,column:26},end:{line:100,column:50}},{start:{line:100,column:54},end:{line:100,column:70}}],line:100}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputDynamicArray.tsx"],names:["v"],mappings:"AAwE4B,cA2Cf,YA3Ce;AAxE5B,OAAO,WAAW;AAClB,OAAO,gBAAgB;AACvB,SAAQ,gBAAe;AACvB,SAA+B,uBAAuB;AAEtD,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,mBAAmB;AAC1B,OAAO,eAAe;AACtB,OAAO,cAAc;AACrB,OAAO,gBAAgB;AAkBvB,MAAM,kCAAkC,MAAM,UAA0C;AAAA,EACtF,YAAY,KAAa,UAAuC;AAC9D,UAAM,SAAS,KAAK,OAAO,MAAM,CAAC;AAClC,WAAO,GAAG,IAAI;AACd,QAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,MAAM;AAAA,EACrD;AAAA,EAEA,IAAI,SAAS;AACX,WAAO,KAAK,MAAM,SAAS,KAAK,MAAM,WAAW,CAAC;AAAA,EACpD;AAAA,EAEA,WAAW,MAAM;AACf,UAAM,SAAS,KAAK,OAAO,MAAM,CAAC;AAClC,QAAI,KAAK,MAAM,SAAS,UAAU;AAChC,aAAO,KAAK,CAAC;AAAA,IACf,WACS,KAAK,MAAM,SAAS,OAAO;AAClC,aAAO,KAAK,EAAE;AAAA,IAChB,WACS,KAAK,MAAM,SAAS,QAAQ;AACnC,YAAM,EAAC,UAAS,IAAI,KAAK;AACzB,YAAM,eAAe,OAAO,KAAK,UAAW,MAAM,EAAE,CAAC;AACrD,aAAO,KAAK,YAAY;AAAA,IAC1B,WAAW,KAAK,MAAM,SAAS,SAAS;AACtC,aAAO,KAAK,SAAS;AAAA,IACvB,OAAO;AACL,aAAO,KAAK,EAAE;AAAA,IAChB;AAEA,QAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,MAAM;AAAA,EACrD;AAAA,EAEA,YAAY,UAAkB;AAC5B,UAAM,SAAS,KAAK,OAAO,MAAM,CAAC;AAClC,WAAO,OAAO,UAAU,CAAC;AAEzB,QAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,OAAO,SAAS,IAAI,SAAS,MAAS;AAAA,EACrF;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,YAAY,EAAE,GAAG,MAAM,KAAK,MAAM,MAAM,QAAQ,KAAK,MAAM,OAAO;AACxE,UAAM,SAAS,KAAK,OAAO,IAAI,CAAC,GAAG,MAAM;AACvC,YAAM,iBAAgB;AAAA,QAAC;AAAA;AAAA,UACrB,SAAS,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,UACrC,GAAG;AAAA;AAAA,MACN;AACA,UAAI;AACJ,UAAG,KAAK,MAAM,SAAS,OAAO;AAC5B,gBAAQ;AAAA,UAAC;AAAA;AAAA,YACP,OAAO;AAAA,YACP,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,QACrD;AAAA,MACF,WACS,KAAK,MAAM,SAAS,UAAU;AACrC,gBAAQ;AAAA,UAAC;AAAA;AAAA,YACP,OAAO;AAAA,YACP,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,QACrD;AAAA,MACF,WACS,KAAK,MAAM,SAAS,QAAQ;AACnC,cAAM,UAAU,OAAO,KAAK,KAAK,MAAM,WAAW,MAAM,EAAE,IAAI,CAAAA,OAAK,CAACA,IAAG,WAAWA,EAAC,CAAC,CAAC;AACrF,gBAAQ;AAAA,UAAC;AAAA;AAAA,YACP;AAAA,YACA,OAAO;AAAA,YACP,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,QACrD;AAAA,MACF,WACS,KAAK,MAAM,SAAS,SAAS;AACpC,gBAAQ;AAAA,UAAC;AAAA;AAAA,YACP,OAAO;AAAA,YACP,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,QACrD;AAAA,MACF,OACK;AACH,gBAAQ;AAAA,UAAC;AAAA;AAAA,YACP,OAAO;AAAA,YACP,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,QACrD;AAAA,MACF;AAEA,aAAO;AAAA,QAAC;AAAA;AAAA,UACN,OAAO,KAAK,MAAM;AAAA,UAElB,WAAU;AAAA,UAEV;AAAA,gCAAC,SAAI,WAAU,+BACZ,0BACH;AAAA,YACA,oBAAC,SAAI,WAAU,gCACZ,iBACH;AAAA;AAAA;AAAA,QARK;AAAA,MASP;AAAA,IACF,CAAC;AAED,WACE,qBAAC,SAAI,WAAU,kBACZ;AAAA;AAAA,MACD;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,SAAS,KAAK;AAAA,UAEb,YAAE,WAAW;AAAA;AAAA,MAChB;AAAA,OACF;AAAA,EAEJ;AACF;AAEA,MAAM,oBAAoB,gBAAgB,EAAE,yBAAyB;AACrE,eAAe;AAMf,MAAM,+BAA+B,MAAM,UAAuC;AAAA,EAChF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,SAAS,KAAK,MAAM;AAAA,QACpB,OAAO,EAAE,mBAAmB;AAAA,QAE5B;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,oBAAC,YAAS;AAAA;AAAA,QACnB;AAAA;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"705ac9c8c3dcb0aff320a53fac9b80bc280b1cbf"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Vn=function(){return s},s}Vn();class QTe extends On.Component{changeValue(e,t){Vn().f[0]++;const i=(Vn().s[0]++,this.values.slice(0));Vn().s[1]++,i[e]=t,Vn().s[2]++,this.props.onChange?(Vn().b[0][0]++,Vn().s[3]++,this.props.onChange(i)):Vn().b[0][1]++}get values(){return Vn().f[1]++,Vn().s[4]++,Vn().b[1][0]++,this.props.value||(Vn().b[1][1]++,this.props.default)||(Vn().b[1][2]++,[])}addValue=(Vn().s[5]++,()=>{Vn().f[2]++;const e=(Vn().s[6]++,this.values.slice(0));if(Vn().s[7]++,this.props.type==="number")Vn().b[2][0]++,Vn().s[8]++,e.push(0);else if(Vn().b[2][1]++,Vn().s[9]++,this.props.type==="url")Vn().b[3][0]++,Vn().s[10]++,e.push("");else if(Vn().b[3][1]++,Vn().s[11]++,this.props.type==="enum"){Vn().b[4][0]++;const{fieldSpec:t}=(Vn().s[12]++,this.props),i=(Vn().s[13]++,Object.keys(t.values)[0]);Vn().s[14]++,e.push(i)}else Vn().b[4][1]++,Vn().s[15]++,this.props.type==="color"?(Vn().b[5][0]++,Vn().s[16]++,e.push("#000000")):(Vn().b[5][1]++,Vn().s[17]++,e.push(""));Vn().s[18]++,this.props.onChange?(Vn().b[6][0]++,Vn().s[19]++,this.props.onChange(e)):Vn().b[6][1]++});deleteValue(e){Vn().f[3]++;const t=(Vn().s[20]++,this.values.slice(0));Vn().s[21]++,t.splice(e,1),Vn().s[22]++,this.props.onChange?(Vn().b[7][0]++,Vn().s[23]++,this.props.onChange(t.length>0?(Vn().b[8][0]++,t):(Vn().b[8][1]++,void 0))):Vn().b[7][1]++}render(){Vn().f[4]++;const e=(Vn().s[24]++,this.props.t),t=(Vn().s[25]++,{t:e,i18n:this.props.i18n,tReady:this.props.tReady}),i=(Vn().s[26]++,this.values.map((r,o)=>{Vn().f[5]++;const s=(Vn().s[27]++,te.jsx(YTe,{onClick:this.deleteValue.bind(this,o),...t}));let a;if(Vn().s[28]++,this.props.type==="url")Vn().b[9][0]++,Vn().s[29]++,a=te.jsx(UK,{value:r,onChange:this.changeValue.bind(this,o),"aria-label":(Vn().b[10][0]++,this.props["aria-label"]||(Vn().b[10][1]++,this.props.label))});else if(Vn().b[9][1]++,Vn().s[30]++,this.props.type==="number")Vn().b[11][0]++,Vn().s[31]++,a=te.jsx(b1,{value:r,onChange:this.changeValue.bind(this,o),"aria-label":(Vn().b[12][0]++,this.props["aria-label"]||(Vn().b[12][1]++,this.props.label))});else if(Vn().b[11][1]++,Vn().s[32]++,this.props.type==="enum"){Vn().b[13][0]++;const c=(Vn().s[33]++,Object.keys(this.props.fieldSpec?.values).map(h=>(Vn().f[6]++,Vn().s[34]++,[h,mK(h)])));Vn().s[35]++,a=te.jsx(PK,{options:c,value:r,onChange:this.changeValue.bind(this,o),"aria-label":(Vn().b[14][0]++,this.props["aria-label"]||(Vn().b[14][1]++,this.props.label))})}else Vn().b[13][1]++,Vn().s[36]++,this.props.type==="color"?(Vn().b[15][0]++,Vn().s[37]++,a=te.jsx(DK,{value:r,onChange:this.changeValue.bind(this,o),"aria-label":(Vn().b[16][0]++,this.props["aria-label"]||(Vn().b[16][1]++,this.props.label))})):(Vn().b[15][1]++,Vn().s[38]++,a=te.jsx(Mm,{value:r,onChange:this.changeValue.bind(this,o),"aria-label":(Vn().b[17][0]++,this.props["aria-label"]||(Vn().b[17][1]++,this.props.label))}));return Vn().s[39]++,te.jsxs("div",{style:this.props.style,className:"maputnik-array-block",children:[te.jsx("div",{className:"maputnik-array-block-action",children:s}),te.jsx("div",{className:"maputnik-array-block-content",children:a})]},o)}));return Vn().s[40]++,te.jsxs("div",{className:"maputnik-array",children:[i,te.jsx(Gs,{className:"maputnik-array-add-value",onClick:this.addValue,children:e("Add value")})]})}}const kw=(Vn().s[41]++,Po()(QTe));class YTe extends On.Component{render(){Vn().f[7]++;const e=(Vn().s[42]++,this.props.t);return Vn().s[43]++,te.jsx(Gs,{className:"maputnik-delete-stop",onClick:this.props.onClick,title:e("Remove array item"),children:te.jsx(UU,{label:te.jsx(nC,{})})})}}function Ds(){var n="/home/runner/work/maputnik/maputnik/src/components/InputFont.tsx",e="cd16dc68fc42c219caf080518fd74984d4f8d81e",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputFont.tsx",statementMap:{0:{start:{line:5,column:24},end:{line:7,column:3}},1:{start:{line:9,column:16},end:{line:9,column:60}},2:{start:{line:10,column:4},end:{line:14,column:5}},3:{start:{line:11,column:6},end:{line:11,column:28}},4:{start:{line:13,column:6},end:{line:13,column:17}},5:{start:{line:17,column:26},end:{line:17,column:46}},6:{start:{line:18,column:4},end:{line:18,column:34}},7:{start:{line:19,column:27},end:{line:19,column:92}},8:{start:{line:19,column:55},end:{line:19,column:67}},9:{start:{line:19,column:83},end:{line:19,column:91}},10:{start:{line:20,column:4},end:{line:20,column:40}},11:{start:{line:23,column:19},end:{line:39,column:6}},12:{start:{line:24,column:6},end:{line:38,column:8}},13:{start:{line:32,column:52},end:{line:32,column:58}},14:{start:{line:40,column:4},end:{line:40,column:87}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:15},end:{line:15,column:3}},line:8},1:{name:"(anonymous_1)",decl:{start:{line:16,column:2},end:{line:16,column:3}},loc:{start:{line:16,column:28},end:{line:21,column:3}},line:16},2:{name:"(anonymous_2)",decl:{start:{line:19,column:48},end:{line:19,column:49}},loc:{start:{line:19,column:55},end:{line:19,column:67}},line:19},3:{name:"(anonymous_3)",decl:{start:{line:19,column:76},end:{line:19,column:77}},loc:{start:{line:19,column:83},end:{line:19,column:91}},line:19},4:{name:"(anonymous_4)",decl:{start:{line:22,column:2},end:{line:22,column:3}},loc:{start:{line:22,column:11},end:{line:41,column:3}},line:22},5:{name:"(anonymous_5)",decl:{start:{line:23,column:35},end:{line:23,column:36}},loc:{start:{line:23,column:49},end:{line:39,column:5}},line:23},6:{name:"(anonymous_6)",decl:{start:{line:32,column:45},end:{line:32,column:46}},loc:{start:{line:32,column:52},end:{line:32,column:58}},line:32}},branchMap:{0:{loc:{start:{line:9,column:16},end:{line:9,column:60}},type:"binary-expr",locations:[{start:{line:9,column:16},end:{line:9,column:32}},{start:{line:9,column:36},end:{line:9,column:54}},{start:{line:9,column:58},end:{line:9,column:60}}],line:9},1:{loc:{start:{line:10,column:4},end:{line:14,column:5}},type:"if",locations:[{start:{line:10,column:4},end:{line:14,column:5}},{start:{line:12,column:11},end:{line:14,column:5}}],line:10},2:{loc:{start:{line:30,column:28},end:{line:30,column:71}},type:"binary-expr",locations:[{start:{line:30,column:28},end:{line:30,column:52}},{start:{line:30,column:56},end:{line:30,column:71}}],line:30}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},b:{0:[0,0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputFont.tsx"],names:[],mappings:"AA6CQ;AA7CR,OAAO,WAAW;AAClB,OAAO,uBAAuB;AAY9B,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,OAAO,eAAe;AAAA,IACpB,OAAO,CAAC;AAAA,EACV;AAAA,EAEA,IAAI,SAAS;AACX,UAAM,MAAM,KAAK,MAAM,SAAS,KAAK,MAAM,WAAW,CAAC;AAGvD,QAAI,IAAI,IAAI,SAAO,CAAC,MAAM,IAAG;AAC3B,aAAO,IAAI,OAAO,EAAE;AAAA,IACtB,OACK;AACH,aAAO;AAAA,IACT;AAAA,EACF;AAAA,EAEA,WAAW,KAAa,UAAkB;AACxC,UAAM,gBAAgB,KAAK,OAAO,MAAM,CAAC;AACzC,kBAAc,GAAG,IAAI;AACrB,UAAM,iBAAiB,cACpB,OAAO,OAAK,MAAM,MAAS,EAC3B,OAAO,OAAK,MAAM,EAAE;AAEvB,SAAK,MAAM,SAAS,cAAc;AAAA,EACpC;AAAA,EAEA,SAAS;AACP,UAAM,SAAS,KAAK,OAAO,IAAI,CAAC,OAAO,MAAM;AAC3C,aAAO;AAAA,QAAC;AAAA;AAAA,UAGN;AAAA,YAAC;AAAA;AAAA,cACC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA,cACnD;AAAA,cACA,SAAS,KAAK,MAAM,OAAO,IAAI,OAAK,CAAC,GAAG,CAAC,CAAC;AAAA,cAC1C,UAAU,KAAK,WAAW,KAAK,MAAM,CAAC;AAAA;AAAA,UACxC;AAAA;AAAA,QAPK;AAAA,MAQP;AAAA,IACF,CAAC;AAED,WACE,oBAAC,QAAG,WAAU,iBACX,kBACH;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"cd16dc68fc42c219caf080518fd74984d4f8d81e"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Ds=function(){return s},s}Ds();class qTe extends On.Component{static defaultProps=(Ds().s[0]++,{fonts:[]});get values(){Ds().f[0]++;const e=(Ds().s[1]++,Ds().b[0][0]++,this.props.value||(Ds().b[0][1]++,this.props.default)||(Ds().b[0][2]++,[]));return Ds().s[2]++,e[e.length-1]!==""?(Ds().b[1][0]++,Ds().s[3]++,e.concat("")):(Ds().b[1][1]++,Ds().s[4]++,e)}changeFont(e,t){Ds().f[1]++;const i=(Ds().s[5]++,this.values.slice(0));Ds().s[6]++,i[e]=t;const r=(Ds().s[7]++,i.filter(o=>(Ds().f[2]++,Ds().s[8]++,o!==void 0)).filter(o=>(Ds().f[3]++,Ds().s[9]++,o!=="")));Ds().s[10]++,this.props.onChange(r)}render(){Ds().f[4]++;const e=(Ds().s[11]++,this.values.map((t,i)=>(Ds().f[5]++,Ds().s[12]++,te.jsx("li",{children:te.jsx(kM,{"aria-label":(Ds().b[2][0]++,this.props["aria-label"]||(Ds().b[2][1]++,this.props.name)),value:t,options:this.props.fonts?.map(r=>(Ds().f[6]++,Ds().s[13]++,[r,r])),onChange:this.changeFont.bind(this,i)})},i))));return Ds().s[14]++,te.jsx("ul",{className:"maputnik-font",children:e})}}function Wi(){var n="/home/runner/work/maputnik/maputnik/src/components/InputSpec.tsx",e="123acbe81166b3a98d021f01f94ef258a8456edf",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputSpec.tsx",statementMap:{0:{start:{line:13,column:23},end:{line:13,column:117}},1:{start:{line:16,column:24},end:{line:27,column:5}},2:{start:{line:25,column:30},end:{line:25,column:81}},3:{start:{line:28,column:4},end:{line:145,column:5}},4:{start:{line:30,column:8},end:{line:37,column:10}},5:{start:{line:39,column:24},end:{line:39,column:101}},6:{start:{line:39,column:82},end:{line:39,column:100}},7:{start:{line:40,column:8},end:{line:46,column:10}},8:{start:{line:51,column:8},end:{line:67,column:9}},9:{start:{line:52,column:26},end:{line:52,column:59}},10:{start:{line:53,column:10},end:{line:59,column:12}},11:{start:{line:57,column:42},end:{line:57,column:48}},12:{start:{line:61,column:10},end:{line:66,column:12}},13:{start:{line:69,column:8},end:{line:74,column:10}},14:{start:{line:76,column:8},end:{line:81,column:10}},15:{start:{line:83,column:8},end:{line:111,column:9}},16:{start:{line:84,column:10},end:{line:90,column:12}},17:{start:{line:92,column:10},end:{line:110,column:11}},18:{start:{line:93,column:12},end:{line:100,column:14}},19:{start:{line:102,column:12},end:{line:109,column:14}},20:{start:{line:113,column:8},end:{line:121,column:10}},21:{start:{line:123,column:8},end:{line:131,column:10}},22:{start:{line:133,column:8},end:{line:141,column:10}},23:{start:{line:143,column:8},end:{line:143,column:110}},24:{start:{line:144,column:8},end:{line:144,column:20}},25:{start:{line:148,column:4},end:{line:148,column:124}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:15},end:{line:146,column:3}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:25,column:16},end:{line:25,column:17}},loc:{start:{line:25,column:30},end:{line:25,column:81}},line:25},2:{name:"(anonymous_2)",decl:{start:{line:39,column:75},end:{line:39,column:76}},loc:{start:{line:39,column:82},end:{line:39,column:100}},line:39},3:{name:"(anonymous_3)",decl:{start:{line:57,column:35},end:{line:57,column:36}},loc:{start:{line:57,column:42},end:{line:57,column:48}},line:57},4:{name:"(anonymous_4)",decl:{start:{line:147,column:2},end:{line:147,column:3}},loc:{start:{line:147,column:11},end:{line:149,column:3}},line:147}},branchMap:{0:{loc:{start:{line:28,column:4},end:{line:145,column:5}},type:"switch",locations:[{start:{line:29,column:6},end:{line:37,column:10}},{start:{line:38,column:6},end:{line:47,column:7}},{start:{line:48,column:6},end:{line:48,column:27}},{start:{line:49,column:6},end:{line:49,column:23}},{start:{line:50,column:6},end:{line:67,column:9}},{start:{line:68,column:6},end:{line:74,column:10}},{start:{line:75,column:6},end:{line:81,column:10}},{start:{line:82,column:6},end:{line:111,column:9}},{start:{line:112,column:6},end:{line:121,column:10}},{start:{line:122,column:6},end:{line:131,column:10}},{start:{line:132,column:6},end:{line:141,column:10}},{start:{line:142,column:6},end:{line:144,column:20}}],line:28},1:{loc:{start:{line:39,column:36},end:{line:39,column:69}},type:"binary-expr",locations:[{start:{line:39,column:36},end:{line:39,column:63}},{start:{line:39,column:67},end:{line:39,column:69}}],line:39},2:{loc:{start:{line:51,column:8},end:{line:67,column:9}},type:"if",locations:[{start:{line:51,column:8},end:{line:67,column:9}},{start:{line:60,column:15},end:{line:67,column:9}}],line:51},3:{loc:{start:{line:52,column:26},end:{line:52,column:59}},type:"binary-expr",locations:[{start:{line:52,column:26},end:{line:52,column:53}},{start:{line:52,column:57},end:{line:52,column:59}}],line:52},4:{loc:{start:{line:83,column:8},end:{line:111,column:9}},type:"if",locations:[{start:{line:83,column:8},end:{line:111,column:9}},{start:{line:91,column:15},end:{line:111,column:9}}],line:83},5:{loc:{start:{line:92,column:10},end:{line:110,column:11}},type:"if",locations:[{start:{line:92,column:10},end:{line:110,column:11}},{start:{line:101,column:17},end:{line:110,column:11}}],line:92},6:{loc:{start:{line:119,column:19},end:{line:119,column:90}},type:"cond-expr",locations:[{start:{line:119,column:53},end:{line:119,column:69}},{start:{line:119,column:72},end:{line:119,column:90}}],line:119},7:{loc:{start:{line:129,column:19},end:{line:129,column:90}},type:"cond-expr",locations:[{start:{line:129,column:53},end:{line:129,column:69}},{start:{line:129,column:72},end:{line:129,column:90}}],line:129},8:{loc:{start:{line:138,column:19},end:{line:138,column:90}},type:"cond-expr",locations:[{start:{line:138,column:53},end:{line:138,column:69}},{start:{line:138,column:72},end:{line:138,column:90}}],line:138}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0,0,0,0,0,0,0,0,0,0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputSpec.tsx"],names:[],mappings:"AAyDQ;AAzDR,OAAO,WAAkC;AAEzC,OAAO,gBAA0C;AACjD,OAAO,iBAA4C;AACnD,OAAO,mBAAgD;AACvD,OAAO,iBAA4C;AACnD,OAAO,gBAA0C;AACjD,OAAO,uBAAwD;AAC/D,OAAO,eAAwC;AAC/C,OAAO,uBAAwD;AAC/D,OAAO,eAAwC;AAC/C,OAAO,gBAAgB;AAEvB,MAAM,iBAAiB,CAAC,sBAAsB,gBAAgB,gBAAgB,0BAA0B,YAAY;AA2BpH,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EAErE,aAAa;AACX,UAAM,cAAc;AAAA,MAClB,WAAW,KAAK,MAAM;AAAA,MACtB,OAAO,KAAK,MAAM;AAAA,MAClB,QAAQ,KAAK,MAAM;AAAA,MACnB,OAAO,KAAK,MAAM;AAAA,MAClB,OAAO,KAAK,MAAM;AAAA,MAClB,SAAS,KAAK,MAAM,WAAW;AAAA,MAC/B,MAAM,KAAK,MAAM;AAAA,MACjB,eAAe,sBAAsB,KAAK,MAAM;AAAA,MAChD,UAAU,CAAC,aAAmE,KAAK,MAAM,SAAU,KAAK,MAAM,WAAW,QAAQ;AAAA,MACjI,cAAc,KAAK,MAAM,YAAY;AAAA,IACvC;AACA,YAAO,KAAK,MAAM,WAAW,MAAM;AAAA,MACjC,KAAK;AAAU,eACb;AAAA,UAAC;AAAA;AAAA,YACE,GAAG;AAAA,YACJ,KAAK,KAAK,MAAM,UAAU;AAAA,YAC1B,KAAK,KAAK,MAAM,UAAU;AAAA;AAAA,QAC5B;AAAA,MAEF,KAAK,QAAQ;AACX,cAAM,UAAU,OAAO,KAAK,KAAK,MAAM,UAAU,UAAU,CAAC,CAAC,EAAE,IAAI,OAAK,CAAC,GAAG,WAAW,CAAC,CAAC,CAAC;AAE1F,eAAO;AAAA,UAAC;AAAA;AAAA,YACL,GAAG;AAAA,YACJ;AAAA;AAAA,QACF;AAAA,MACF;AAAA,MACA,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AACH,YAAI,eAAe,QAAQ,KAAK,MAAM,SAAU,KAAK,GAAG;AACtD,gBAAM,UAAU,KAAK,MAAM,UAAU,UAAU,CAAC;AAChD,iBAAO;AAAA,YAAC;AAAA;AAAA,cACL,GAAG;AAAA,cACJ,SAAS,QAAQ,IAAI,OAAK,CAAC,GAAG,CAAC,CAAC;AAAA;AAAA,UAClC;AAAA,QACF,OAAO;AACL,iBAAO;AAAA,YAAC;AAAA;AAAA,cACL,GAAG;AAAA;AAAA,UACN;AAAA,QACF;AAAA,MACF,KAAK;AAAS,eACZ;AAAA,UAAC;AAAA;AAAA,YACE,GAAG;AAAA;AAAA,QACN;AAAA,MAEF,KAAK;AAAW,eACd;AAAA,UAAC;AAAA;AAAA,YACE,GAAG;AAAA;AAAA,QACN;AAAA,MAEF,KAAK;AACH,YAAG,KAAK,MAAM,cAAc,aAAa;AACvC,iBAAO;AAAA,YAAC;AAAA;AAAA,cACL,GAAG;AAAA,cACJ,OAAO,KAAK,MAAM,UAAU;AAAA;AAAA,UAC9B;AAAA,QACF,OAAO;AACL,cAAI,KAAK,MAAM,UAAU,QAAQ;AAC/B,mBAAO;AAAA,cAAC;AAAA;AAAA,gBACL,GAAG;AAAA,gBACJ,MAAM,KAAK,MAAM,UAAU;AAAA,gBAC3B,QAAQ,KAAK,MAAM,UAAU;AAAA;AAAA,YAC/B;AAAA,UACF,OAAO;AACL,mBAAO;AAAA,cAAC;AAAA;AAAA,gBACL,GAAG;AAAA,gBACJ,WAAW,KAAK,MAAM;AAAA,gBACtB,MAAM,KAAK,MAAM,UAAU;AAAA;AAAA,YAC7B;AAAA,UACF;AAAA,QACF;AAAA,MACF,KAAK;AAAe,eAClB;AAAA,UAAC;AAAA;AAAA,YACE,GAAG;AAAA,YACJ,WAAW,KAAK,MAAM;AAAA,YACtB,MAAK;AAAA,YACL,OAAQ,MAAM,QAAQ,KAAK,MAAM,KAAK,IAAI,KAAK,MAAM,QAAQ,CAAC,KAAK,MAAM,KAAK;AAAA;AAAA,QAChF;AAAA,MAEF,KAAK;AAAc,eACjB;AAAA,UAAC;AAAA;AAAA,YACE,GAAG;AAAA,YACJ,WAAW,KAAK,MAAM;AAAA,YACtB,MAAK;AAAA,YACL,OAAQ,MAAM,QAAQ,KAAK,MAAM,KAAK,IAAI,KAAK,MAAM,QAAQ,CAAC,KAAK,MAAM,KAAK;AAAA;AAAA,QAChF;AAAA,MAEF,KAAK;AAAW,eACd;AAAA,UAAC;AAAA;AAAA,YACE,GAAG;AAAA,YACJ,MAAK;AAAA,YACL,OAAQ,MAAM,QAAQ,KAAK,MAAM,KAAK,IAAI,KAAK,MAAM,QAAQ,CAAC,KAAK,MAAM,KAAK;AAAA,YAC9E,QAAQ;AAAA;AAAA,QACV;AAAA,MAEF;AACE,gBAAQ,KAAK,6BAA6B,KAAK,MAAM,SAAS,UAAU,KAAK,MAAM,WAAW,IAAI,EAAE;AACpG,eAAO;AAAA,IACX;AAAA,EACF;AAAA,EAEA,SAAS;AACP,WACE,oBAAC,SAAI,eAAa,gBAAc,KAAK,MAAM,WACxC,eAAK,WAAW,GACnB;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"123acbe81166b3a98d021f01f94ef258a8456edf"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Wi=function(){return s},s}Wi();const VTe=(Wi().s[0]++,["background-pattern","fill-pattern","line-pattern","fill-extrusion-pattern","icon-image"]);class sx extends On.Component{childNodes(){Wi().f[0]++;const e=(Wi().s[1]++,{fieldSpec:this.props.fieldSpec,label:this.props.label,action:this.props.action,style:this.props.style,value:this.props.value,default:this.props.fieldSpec?.default,name:this.props.fieldName,"data-wd-key":"spec-field-input:"+this.props.fieldName,onChange:t=>(Wi().f[1]++,Wi().s[2]++,this.props.onChange(this.props.fieldName,t)),"aria-label":this.props["aria-label"]});switch(Wi().s[3]++,this.props.fieldSpec?.type){case"number":return Wi().b[0][0]++,Wi().s[4]++,te.jsx(b1,{...e,min:this.props.fieldSpec.minimum,max:this.props.fieldSpec.maximum});case"enum":Wi().b[0][1]++;{const t=(Wi().s[5]++,Object.keys((Wi().b[1][0]++,this.props.fieldSpec.values||(Wi().b[1][1]++,[]))).map(i=>(Wi().f[2]++,Wi().s[6]++,[i,mK(i)])));return Wi().s[7]++,te.jsx(PK,{...e,options:t})}case"resolvedImage":Wi().b[0][2]++;case"formatted":Wi().b[0][3]++;case"string":if(Wi().b[0][4]++,Wi().s[8]++,VTe.indexOf(this.props.fieldName)>=0){Wi().b[2][0]++;const t=(Wi().s[9]++,Wi().b[3][0]++,this.props.fieldSpec.values||(Wi().b[3][1]++,[]));return Wi().s[10]++,te.jsx(kM,{...e,options:t.map(i=>(Wi().f[3]++,Wi().s[11]++,[i,i]))})}else return Wi().b[2][1]++,Wi().s[12]++,te.jsx(Mm,{...e});case"color":return Wi().b[0][5]++,Wi().s[13]++,te.jsx(DK,{...e});case"boolean":return Wi().b[0][6]++,Wi().s[14]++,te.jsx(foe,{...e});case"array":return Wi().b[0][7]++,Wi().s[15]++,this.props.fieldName==="text-font"?(Wi().b[4][0]++,Wi().s[16]++,te.jsx(qTe,{...e,fonts:this.props.fieldSpec.values})):(Wi().b[4][1]++,Wi().s[17]++,this.props.fieldSpec.length?(Wi().b[5][0]++,Wi().s[18]++,te.jsx($R,{...e,type:this.props.fieldSpec.value,length:this.props.fieldSpec.length})):(Wi().b[5][1]++,Wi().s[19]++,te.jsx(kw,{...e,fieldSpec:this.props.fieldSpec,type:this.props.fieldSpec.value})));case"numberArray":return Wi().b[0][8]++,Wi().s[20]++,te.jsx(kw,{...e,fieldSpec:this.props.fieldSpec,type:"number",value:Array.isArray(this.props.value)?(Wi().b[6][0]++,this.props.value):(Wi().b[6][1]++,[this.props.value])});case"colorArray":return Wi().b[0][9]++,Wi().s[21]++,te.jsx(kw,{...e,fieldSpec:this.props.fieldSpec,type:"color",value:Array.isArray(this.props.value)?(Wi().b[7][0]++,this.props.value):(Wi().b[7][1]++,[this.props.value])});case"padding":return Wi().b[0][10]++,Wi().s[22]++,te.jsx($R,{...e,type:"number",value:Array.isArray(this.props.value)?(Wi().b[8][0]++,this.props.value):(Wi().b[8][1]++,[this.props.value]),length:4});default:return Wi().b[0][11]++,Wi().s[23]++,console.warn(`No proper field input for ${this.props.fieldName} type: ${this.props.fieldSpec?.type}`),Wi().s[24]++,null}}render(){return Wi().f[4]++,Wi().s[25]++,te.jsx("div",{"data-wd-key":"spec-field:"+this.props.fieldName,children:this.childNodes()})}}function $c(){var n="/home/runner/work/maputnik/maputnik/src/components/Fieldset.tsx",e="92ea2bb9889070368abe40f809481200c126aae8",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/Fieldset.tsx",statementMap:{0:{start:{line:7,column:17},end:{line:30,column:1}},1:{start:{line:8,column:32},end:{line:8,column:53}},2:{start:{line:9,column:18},end:{line:9,column:67}},3:{start:{line:10,column:22},end:{line:12,column:3}},4:{start:{line:11,column:4},end:{line:11,column:20}},5:{start:{line:13,column:2},end:{line:29,column:7}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:17},end:{line:7,column:18}},loc:{start:{line:7,column:28},end:{line:30,column:1}},line:7},1:{name:"(anonymous_1)",decl:{start:{line:10,column:22},end:{line:10,column:23}},loc:{start:{line:10,column:31},end:{line:12,column:3}},line:10}},branchMap:{0:{loc:{start:{line:14,column:4},end:{line:21,column:8}},type:"binary-expr",locations:[{start:{line:14,column:4},end:{line:14,column:19}},{start:{line:14,column:39},end:{line:21,column:8}}],line:14},1:{loc:{start:{line:22,column:4},end:{line:25,column:32}},type:"binary-expr",locations:[{start:{line:22,column:4},end:{line:22,column:20}},{start:{line:22,column:40},end:{line:25,column:32}}],line:22},2:{loc:{start:{line:28,column:4},end:{line:28,column:198}},type:"binary-expr",locations:[{start:{line:28,column:4},end:{line:28,column:19}},{start:{line:28,column:39},end:{line:28,column:198}}],line:28},3:{loc:{start:{line:28,column:104},end:{line:28,column:125}},type:"cond-expr",locations:[{start:{line:28,column:114},end:{line:28,column:116}},{start:{line:28,column:119},end:{line:28,column:125}}],line:28}},s:{0:0,1:0,2:0,3:0,4:0,5:0},f:{0:0,1:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/Fieldset.tsx"],names:[],mappings:"AAuBI,SAGM,KAHN;AAvBJ,OAAO,WAA0D;AACjE,OAAO,gBAAgB;AACvB,OAAO,mBAAmB;AAC1B,OAAO,SAAS;AAChB,OAAO,sBAAsB;AAU7B,MAAM,WAAoC,CAAC,UAAU;AACnD,QAAM,CAAC,SAAS,UAAU,IAAI,MAAM,SAAS,KAAK;AAClD,QAAM,UAAU,MAAM,OAAO,iBAAiB,iBAAiB,CAAC;AAEhE,QAAM,cAAc,CAAC,QAAiB;AACpC,eAAW,GAAG;AAAA,EAChB;AAEA,SACE,qBAAC,SAAI,WAAU,wBAAuB,MAAK,SAAQ,mBAAiB,QAAQ,SACzE;AAAA,UAAM,aACL,oBAAC,SAAI,WAAU,8BACb;AAAA,MAAC;AAAA;AAAA,QACC,OAAO,MAAM;AAAA,QACb;AAAA,QACA,WAAW,MAAM;AAAA;AAAA,IACnB,GACF;AAAA,IAED,CAAC,MAAM,aACN,oBAAC,SAAI,WAAW,WAAW;AAAA,MACzB,8BAA8B;AAAA,MAC9B,+BAA+B,MAAM;AAAA,IACvC,CAAC,GACE,gBAAM,OACT;AAAA,IAEF,oBAAC,SAAI,WAAU,+BAA+B,gBAAM,QAAO;AAAA,IAC3D,oBAAC,SAAI,WAAU,gCAAgC,gBAAM,UAAS;AAAA,IAC7D,MAAM,aACL,oBAAC,SAAI,WAAU,uBAAsB,OAAO,EAAE,SAAS,UAAU,KAAK,OAAO,GAC3E,8BAAC,OAAI,WAAW,MAAM,WAAW,GACnC;AAAA,KAEJ;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"92ea2bb9889070368abe40f809481200c126aae8"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return $c=function(){return s},s}$c();$c().s[0]++;const Dy=n=>{$c().f[0]++;const[e,t]=($c().s[1]++,On.useState(!1)),i=($c().s[2]++,On.useRef(kx("fieldset_label_")));$c().s[3]++;const r=o=>{$c().f[1]++,$c().s[4]++,t(o)};return $c().s[5]++,te.jsxs("div",{className:"maputnik-input-block",role:"group","aria-labelledby":i.current,children:[($c().b[0][0]++,n.fieldSpec&&($c().b[0][1]++,te.jsx("div",{className:"maputnik-input-block-label",children:te.jsx(UU,{label:n.label,onToggleDoc:r,fieldSpec:n.fieldSpec})}))),($c().b[1][0]++,!n.fieldSpec&&($c().b[1][1]++,te.jsx("div",{className:f0({"maputnik-input-block-label":!0,"maputnik-input-block--error":n.error}),children:n.label}))),te.jsx("div",{className:"maputnik-input-block-action",children:n.action}),te.jsx("div",{className:"maputnik-input-block-content",children:n.children}),($c().b[2][0]++,n.fieldSpec&&($c().b[2][1]++,te.jsx("div",{className:"maputnik-doc-inline",style:{display:e?($c().b[3][0]++,""):($c().b[3][1]++,"none")},children:te.jsx(I6,{fieldSpec:n.fieldSpec})})))]})};function Oo(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldSpec.tsx",e="93d4690989e2b2b09b13eab9ee3382c32a103823",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldSpec.tsx",statementMap:{0:{start:{line:6,column:2},end:{line:34,column:3}},1:{start:{line:8,column:6},end:{line:8,column:19}},2:{start:{line:10,column:6},end:{line:10,column:74}},3:{start:{line:12,column:6},end:{line:12,column:19}},4:{start:{line:14,column:6},end:{line:14,column:22}},5:{start:{line:16,column:6},end:{line:16,column:19}},6:{start:{line:18,column:6},end:{line:18,column:19}},7:{start:{line:20,column:6},end:{line:20,column:19}},8:{start:{line:22,column:6},end:{line:22,column:19}},9:{start:{line:24,column:6},end:{line:24,column:19}},10:{start:{line:26,column:6},end:{line:26,column:22}},11:{start:{line:28,column:6},end:{line:28,column:22}},12:{start:{line:30,column:6},end:{line:30,column:22}},13:{start:{line:32,column:6},end:{line:32,column:58}},14:{start:{line:33,column:6},end:{line:33,column:19}},15:{start:{line:36,column:18},end:{line:39,column:1}},16:{start:{line:37,column:20},end:{line:37,column:55}},17:{start:{line:38,column:2},end:{line:38,column:190}}},fnMap:{0:{name:"getElementFromType",decl:{start:{line:5,column:9},end:{line:5,column:27}},loc:{start:{line:5,column:39},end:{line:35,column:1}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:36,column:18},end:{line:36,column:19}},loc:{start:{line:36,column:29},end:{line:39,column:1}},line:36}},branchMap:{0:{loc:{start:{line:6,column:2},end:{line:34,column:3}},type:"switch",locations:[{start:{line:7,column:4},end:{line:8,column:19}},{start:{line:9,column:4},end:{line:10,column:74}},{start:{line:11,column:4},end:{line:12,column:19}},{start:{line:13,column:4},end:{line:14,column:22}},{start:{line:15,column:4},end:{line:16,column:19}},{start:{line:17,column:4},end:{line:18,column:19}},{start:{line:19,column:4},end:{line:20,column:19}},{start:{line:21,column:4},end:{line:22,column:19}},{start:{line:23,column:4},end:{line:24,column:19}},{start:{line:25,column:4},end:{line:26,column:22}},{start:{line:27,column:4},end:{line:28,column:22}},{start:{line:29,column:4},end:{line:30,column:22}},{start:{line:31,column:4},end:{line:33,column:19}}],line:6},1:{loc:{start:{line:10,column:13},end:{line:10,column:73}},type:"cond-expr",locations:[{start:{line:10,column:57},end:{line:10,column:65}},{start:{line:10,column:68},end:{line:10,column:73}}],line:10}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0},f:{0:0,1:0},b:{0:[0,0,0,0,0,0,0,0,0,0,0,0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldSpec.tsx"],names:[],mappings:"AA2CM;AA3CN,OAAO,WAAgC;AACvC,OAAO,eAA4D;AACnE,OAAO,cAAsC;AAE7C,SAAS,mBAAmB,WAAyF;AACnH,UAAO,UAAU,MAAM;AAAA,IACrB,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAQ,OAAO,KAAK,UAAU,MAAO,EAAE,UAAU,IAAI,WAAW;AAAA,IAClE,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAO;AAAA,IACT;AACE,cAAQ,KAAK,uBAAuB,UAAU,IAAI;AAClD,aAAO;AAAA,EACX;AACF;AAIA,MAAM,YAAsC,CAAC,UAAU;AACrD,QAAM,YAAY,mBAAmB,MAAM,SAAU;AAErD,SACE,oBAAC,aAAU,OAAO,MAAM,OAAO,QAAQ,MAAM,QAAQ,WAAW,MAAM,WAAW,OAAO,MAAM,OAC5F,8BAAC,aAAW,GAAG,OAAO,GACxB;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"93d4690989e2b2b09b13eab9ee3382c32a103823"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Oo=function(){return s},s}Oo();function $Te(n){switch(Oo().f[0]++,Oo().s[0]++,n.type){case"color":return Oo().b[0][0]++,Oo().s[1]++,Ms;case"enum":return Oo().b[0][1]++,Oo().s[2]++,Object.keys(n.values).length<=3?(Oo().b[1][0]++,Dy):(Oo().b[1][1]++,Ms);case"boolean":return Oo().b[0][2]++,Oo().s[3]++,Ms;case"array":return Oo().b[0][3]++,Oo().s[4]++,Dy;case"resolvedImage":return Oo().b[0][4]++,Oo().s[5]++,Ms;case"number":return Oo().b[0][5]++,Oo().s[6]++,Ms;case"string":return Oo().b[0][6]++,Oo().s[7]++,Ms;case"formatted":return Oo().b[0][7]++,Oo().s[8]++,Ms;case"padding":return Oo().b[0][8]++,Oo().s[9]++,Ms;case"numberArray":return Oo().b[0][9]++,Oo().s[10]++,Dy;case"colorArray":return Oo().b[0][10]++,Oo().s[11]++,Dy;case"variableAnchorOffsetCollection":return Oo().b[0][11]++,Oo().s[12]++,Dy;default:return Oo().b[0][12]++,Oo().s[13]++,console.warn("No such type for: "+n.type),Oo().s[14]++,Ms}}Oo().s[15]++;const HTe=n=>{Oo().f[1]++;const e=(Oo().s[16]++,$Te(n.fieldSpec));return Oo().s[17]++,te.jsx(e,{label:n.label,action:n.action,fieldSpec:n.fieldSpec,error:n.error,children:te.jsx(sx,{...n})})};function wu(){var n="/home/runner/work/maputnik/maputnik/src/components/_FunctionButtons.tsx",e="8e77c8fbe0fbc5796ba925837fc7526418b4854b",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/_FunctionButtons.tsx",statementMap:{0:{start:{line:9,column:14},end:{line:9,column:26}},1:{start:{line:10,column:4},end:{line:60,column:5}},2:{start:{line:11,column:52},end:{line:19,column:7}},3:{start:{line:20,column:50},end:{line:28,column:7}},4:{start:{line:30,column:6},end:{line:40,column:7}},5:{start:{line:31,column:8},end:{line:39,column:10}},6:{start:{line:41,column:6},end:{line:45,column:11}},7:{start:{line:46,column:11},end:{line:60,column:5}},8:{start:{line:47,column:51},end:{line:56,column:7}},9:{start:{line:57,column:6},end:{line:57,column:76}},10:{start:{line:59,column:6},end:{line:59,column:44}},11:{start:{line:63,column:29},end:{line:63,column:76}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:11},end:{line:61,column:3}},line:8}},branchMap:{0:{loc:{start:{line:10,column:4},end:{line:60,column:5}},type:"if",locations:[{start:{line:10,column:4},end:{line:60,column:5}},{start:{line:46,column:11},end:{line:60,column:5}}],line:10},1:{loc:{start:{line:30,column:6},end:{line:40,column:7}},type:"if",locations:[{start:{line:30,column:6},end:{line:40,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:30},2:{loc:{start:{line:46,column:11},end:{line:60,column:5}},type:"if",locations:[{start:{line:46,column:11},end:{line:60,column:5}},{start:{line:58,column:11},end:{line:60,column:5}}],line:46}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},f:{0:0},b:{0:[0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_FunctionButtons.tsx"],names:[],mappings:"AA0BU,cAsBG,YAtBH;AA1BV,OAAO,WAAW;AAElB,OAAO,iBAAiB;AACxB,SAAQ,aAAa,qBAAoB;AACzC,SAAS,sBAAsB;AAC/B,SAA+B,uBAAuB;AAUtD,MAAM,qCAAqC,MAAM,UAA6C;AAAA,EAC5F,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AAErB,QAAI,KAAK,MAAM,UAAU,YAAY,WAAW,SAAS,MAAM,GAAG;AAChE,YAAM,wBACJ;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,SAAS,KAAK,MAAM;AAAA,UACpB,OAAO,EAAE,uBAAuB;AAAA,UAEhC,8BAAC,kBAAe;AAAA;AAAA,MAClB;AAGF,YAAM,sBAAsB;AAAA,QAAC;AAAA;AAAA,UAC3B,WAAU;AAAA,UACV,SAAS,KAAK,MAAM;AAAA,UACpB,OAAO,EAAE,uCAAuC;AAAA,UAEhD,8BAAC,eAAY;AAAA;AAAA,MACf;AAEA,UAAI;AACJ,UAAI,KAAK,MAAM,UAAU,eAAe,MAAM,eAAe;AAC3D,8BAAsB;AAAA,UAAC;AAAA;AAAA,YACrB,WAAU;AAAA,YACV,SAAS,KAAK,MAAM;AAAA,YACpB,OAAO,EAAE,mCAAmC;AAAA,YAE5C,8BAAC,iBAAc;AAAA;AAAA,QACjB;AAAA,MACF;AACA,aAAO,qBAAC,SACL;AAAA;AAAA,QACA;AAAA,QACA;AAAA,SACH;AAAA,IACF,WAAW,KAAK,MAAM,UAAU,YAAY,WAAW,SAAS,WAAW,GAAG;AAC5E,YAAM,uBAAuB;AAAA,QAAC;AAAA;AAAA,UAC5B,WAAU;AAAA,UACV,SAAS,KAAK,MAAM;AAAA,UACpB,OAAO,EAAE,4CAA4C;AAAA,UACrD,eAAY;AAAA,UAEZ,8BAAC,eAAY;AAAA;AAAA,MACf;AACA,aAAO,oBAAC,SAAK,gCAAqB;AAAA,IACpC,OAAO;AACL,aAAO,oBAAC,SAAI;AAAA,IACd;AAAA,EACF;AACF;AAEA,MAAM,uBAAuB,gBAAgB,EAAE,4BAA4B;AAC3E,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8e77c8fbe0fbc5796ba925837fc7526418b4854b"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return wu=function(){return s},s}wu();class ZTe extends On.Component{render(){wu().f[0]++;const e=(wu().s[0]++,this.props.t);if(wu().s[1]++,this.props.fieldSpec.expression?.parameters.includes("zoom")){wu().b[0][0]++;const t=(wu().s[2]++,te.jsx(Gs,{className:"maputnik-make-zoom-function",onClick:this.props.onExpressionClick,title:e("Convert to expression"),children:te.jsx(D4,{})})),i=(wu().s[3]++,te.jsx(Gs,{className:"maputnik-make-zoom-function",onClick:this.props.onZoomClick,title:e("Convert property into a zoom function"),children:te.jsx(cF,{})}));let r;return wu().s[4]++,this.props.fieldSpec["property-type"]==="data-driven"?(wu().b[1][0]++,wu().s[5]++,r=te.jsx(Gs,{className:"maputnik-make-data-function",onClick:this.props.onDataClick,title:e("Convert property to data function"),children:te.jsx(Zhe,{})})):wu().b[1][1]++,wu().s[6]++,te.jsxs("div",{children:[t,r,i]})}else if(wu().b[0][1]++,wu().s[7]++,this.props.fieldSpec.expression?.parameters.includes("elevation")){wu().b[2][0]++;const t=(wu().s[8]++,te.jsx(Gs,{className:"maputnik-make-elevation-function",onClick:this.props.onElevationClick,title:e("Convert property into a elevation function"),"data-wd-key":"make-elevation-function",children:te.jsx(cF,{})}));return wu().s[9]++,te.jsx("div",{children:t})}else return wu().b[2][1]++,wu().s[10]++,te.jsx("div",{})}}const XTe=(wu().s[11]++,Po()(ZTe));function Dg(){var n="/home/runner/work/maputnik/maputnik/src/components/_SpecProperty.tsx",e="3e6c7200aa37e60f3f49ecaa91bce3a63befeb7e",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/_SpecProperty.tsx",statementMap:{0:{start:{line:7,column:24},end:{line:9,column:3}},1:{start:{line:11,column:45},end:{line:11,column:55}},2:{start:{line:12,column:40},end:{line:21,column:5}},3:{start:{line:22,column:18},end:{line:22,column:53}},4:{start:{line:23,column:4},end:{line:32,column:6}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:33,column:3}},line:10}},branchMap:{0:{loc:{start:{line:29,column:34},end:{line:29,column:60}},type:"binary-expr",locations:[{start:{line:29,column:34},end:{line:29,column:54}},{start:{line:29,column:58},end:{line:29,column:60}}],line:29}},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_SpecProperty.tsx"],names:[],mappings:"AA6BwB;AA7BxB,OAAO,WAAW;AAElB,OAAO,eAAsC;AAC7C,OAAO,qBAAqB;AAE5B,OAAO,wBAAwB;AAgB/B,qBAAqB,qBAAqB,MAAM,UAA6B;AAAA,EAC3E,OAAO,eAAe;AAAA,IACpB,QAAQ,CAAC;AAAA,EACX;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,QAAQ,WAAW,UAAS,IAAI,KAAK;AAE5C,UAAM,cAAc;AAAA,MAAC;AAAA;AAAA,QACnB,WAAW,KAAK,MAAM;AAAA,QACtB,aAAa,KAAK,MAAM;AAAA,QACxB,aAAa,KAAK,MAAM;AAAA,QACxB,mBAAmB,KAAK,MAAM;AAAA,QAC9B,kBAAkB,KAAK,MAAM;AAAA;AAAA,IAC/B;AAEA,UAAM,QAAQ,OAAQ,YAAU,MAAI,SAAgB;AAEpD,WAAO;AAAA,MAAC;AAAA;AAAA,QACL,GAAG,KAAK;AAAA,QACT;AAAA,QACA,WAAW,KAAK,MAAM;AAAA,QACtB,OAAO,mBAAmB,KAAK,MAAM,aAAa,EAAE;AAAA,QACpD,QAAQ;AAAA;AAAA,IACV;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"3e6c7200aa37e60f3f49ecaa91bce3a63befeb7e"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Dg=function(){return s},s}Dg();class JTe extends On.Component{static defaultProps=(Dg().s[0]++,{errors:{}});render(){Dg().f[0]++;const{errors:e,fieldName:t,fieldType:i}=(Dg().s[1]++,this.props),r=(Dg().s[2]++,te.jsx(XTe,{fieldSpec:this.props.fieldSpec,onZoomClick:this.props.onZoomClick,onDataClick:this.props.onDataClick,onExpressionClick:this.props.onExpressionClick,onElevationClick:this.props.onElevationClick})),o=(Dg().s[3]++,e[i+"."+t]);return Dg().s[4]++,te.jsx(HTe,{...this.props,error:o,fieldSpec:this.props.fieldSpec,label:j6((Dg().b[0][0]++,this.props.fieldName||(Dg().b[0][1]++,""))),action:r})}}function hd(){var n="/home/runner/work/maputnik/maputnik/src/libs/sort-numerically.ts",e="e8906f642b33ab7d7a780fc0db870f7e4872d29c",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/sort-numerically.ts",statementMap:{0:{start:{line:2,column:12},end:{line:2,column:17}},1:{start:{line:3,column:12},end:{line:3,column:17}},2:{start:{line:4,column:2},end:{line:10,column:3}},3:{start:{line:5,column:4},end:{line:5,column:14}},4:{start:{line:6,column:9},end:{line:10,column:3}},5:{start:{line:7,column:4},end:{line:7,column:13}},6:{start:{line:9,column:4},end:{line:9,column:13}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:1,column:15},end:{line:1,column:16}},loc:{start:{line:1,column:36},end:{line:11,column:1}},line:1}},branchMap:{0:{loc:{start:{line:4,column:2},end:{line:10,column:3}},type:"if",locations:[{start:{line:4,column:2},end:{line:10,column:3}},{start:{line:6,column:9},end:{line:10,column:3}}],line:4},1:{loc:{start:{line:6,column:9},end:{line:10,column:3}},type:"if",locations:[{start:{line:6,column:9},end:{line:10,column:3}},{start:{line:8,column:9},end:{line:10,column:3}}],line:6}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},f:{0:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/sort-numerically.ts"],names:[],mappings:"AAAA,wBAAwB,MAAuB,MAAsB;AACnE,QAAM,IAAI,CAAC;AACX,QAAM,IAAI,CAAC;AAEX,MAAG,IAAI,GAAG;AACR,WAAO;AAAA,EACT,WACQ,IAAI,GAAG;AACb,WAAO;AAAA,EACT,OACK;AACH,WAAO;AAAA,EACT;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e8906f642b33ab7d7a780fc0db870f7e4872d29c"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return hd=function(){return s},s}hd();function poe(n,e){hd().f[0]++;const t=(hd().s[0]++,+n),i=(hd().s[1]++,+e);return hd().s[2]++,t<i?(hd().b[0][0]++,hd().s[3]++,-1):(hd().b[0][1]++,hd().s[4]++,t>i?(hd().b[1][0]++,hd().s[5]++,1):(hd().b[1][1]++,hd().s[6]++,0))}function om(){var n="/home/runner/work/maputnik/maputnik/src/libs/spec-helper.ts",e="2f98128f0f990b67a049c58486c1fab4310fbcfa",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/spec-helper.ts",statementMap:{0:{start:{line:2,column:2},end:{line:4,column:3}},1:{start:{line:3,column:4},end:{line:3,column:24}},2:{start:{line:5,column:19},end:{line:11,column:3}},3:{start:{line:12,column:2},end:{line:12,column:35}}},fnMap:{0:{name:"findDefaultFromSpec",decl:{start:{line:1,column:16},end:{line:1,column:35}},loc:{start:{line:1,column:42},end:{line:13,column:1}},line:1}},branchMap:{0:{loc:{start:{line:2,column:2},end:{line:4,column:3}},type:"if",locations:[{start:{line:2,column:2},end:{line:4,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:2},1:{loc:{start:{line:12,column:9},end:{line:12,column:34}},type:"binary-expr",locations:[{start:{line:12,column:9},end:{line:12,column:28}},{start:{line:12,column:32},end:{line:12,column:34}}],line:12}},s:{0:0,1:0,2:0,3:0},f:{0:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/spec-helper.ts"],names:[],mappings:"AAGO,gBAAS,oBAAoB,MAAyE;AAC3G,MAAI,OAAO,UAAU,eAAe,KAAK,MAAM,SAAS,GAAG;AACzD,WAAO,KAAK;AAAA,EACd;AAEA,QAAM,WAAW;AAAA,IACf,SAAS;AAAA,IACT,UAAU;AAAA,IACV,WAAW;AAAA,IACX,UAAU;AAAA,IACV,SAAS,CAAC;AAAA,EACZ;AAEA,SAAO,SAAS,KAAK,IAAI,KAAK;AAChC;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2f98128f0f990b67a049c58486c1fab4310fbcfa"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return om=function(){return s},s}om();function Wf(n){if(om().f[0]++,om().s[0]++,Object.prototype.hasOwnProperty.call(n,"default"))return om().b[0][0]++,om().s[1]++,n.default;om().b[0][1]++;const e=(om().s[2]++,{color:"#000000",string:"",boolean:!1,number:0,array:[]});return om().s[3]++,om().b[1][0]++,e[n.type]||(om().b[1][1]++,"")}function ax(){var n="/home/runner/work/maputnik/maputnik/src/components/_DeleteStopButton.tsx",e="03de18cded5f486201afd886787bbdda710eafe3",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/_DeleteStopButton.tsx",statementMap:{0:{start:{line:8,column:14},end:{line:8,column:26}},1:{start:{line:9,column:4},end:{line:17,column:6}},2:{start:{line:20,column:25},end:{line:20,column:68}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:11},end:{line:18,column:3}},line:7}},branchMap:{},s:{0:0,1:0,2:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_DeleteStopButton.tsx"],names:[],mappings:"AAoBM;AApBN,OAAO,WAAW;AAElB,OAAO,iBAAiB;AACxB,SAAQ,gBAAe;AACvB,SAA+B,uBAAuB;AAQtD,MAAM,iCAAiC,MAAM,UAAyC;AAAA,EACpF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,SAAS,KAAK,MAAM;AAAA,QACpB,OAAO,EAAE,6BAA6B;AAAA,QAEtC,8BAAC,YAAS;AAAA;AAAA,IACZ;AAAA,EACF;AACF;AAEA,MAAM,mBAAmB,gBAAgB,EAAE,wBAAwB;AACnE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"03de18cded5f486201afd886787bbdda710eafe3"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return ax=function(){return s},s}ax();class e9e extends On.Component{render(){ax().f[0]++;const e=(ax().s[0]++,this.props.t);return ax().s[1]++,te.jsx(Gs,{className:"maputnik-delete-stop",onClick:this.props.onClick,title:e("Remove zoom level from stop"),children:te.jsx(nC,{})})}}const moe=(ax().s[2]++,Po()(e9e));function Ht(){var n="/home/runner/work/maputnik/maputnik/src/components/_DataProperty.tsx",e="a1f2034e8330e69a4f4de946d81cea8ff55472f7",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/_DataProperty.tsx",statementMap:{0:{start:{line:20,column:2},end:{line:29,column:3}},1:{start:{line:21,column:4},end:{line:28,column:7}},2:{start:{line:22,column:6},end:{line:27,column:7}},3:{start:{line:23,column:8},end:{line:25,column:9}},4:{start:{line:24,column:10},end:{line:24,column:33}},5:{start:{line:26,column:8},end:{line:26,column:39}},6:{start:{line:30,column:2},end:{line:30,column:17}},7:{start:{line:33,column:10},end:{line:35,column:3}},8:{start:{line:37,column:20},end:{line:37,column:55}},9:{start:{line:38,column:4},end:{line:42,column:5}},10:{start:{line:39,column:6},end:{line:41,column:9}},11:{start:{line:45,column:20},end:{line:45,column:45}},12:{start:{line:46,column:4},end:{line:50,column:5}},13:{start:{line:47,column:6},end:{line:49,column:8}},14:{start:{line:51,column:4},end:{line:51,column:16}},15:{start:{line:54,column:4},end:{line:56,column:5}},16:{start:{line:55,column:6},end:{line:55,column:27}},17:{start:{line:57,column:4},end:{line:59,column:5}},18:{start:{line:58,column:6},end:{line:58,column:24}},19:{start:{line:60,column:4},end:{line:60,column:25}},20:{start:{line:63,column:4},end:{line:67,column:5}},21:{start:{line:64,column:6},end:{line:64,column:83}},22:{start:{line:66,column:6},end:{line:66,column:53}},23:{start:{line:71,column:26},end:{line:76,column:70}},24:{start:{line:72,column:6},end:{line:75,column:8}},25:{start:{line:76,column:22},end:{line:76,column:69}},26:{start:{line:77,column:20},end:{line:77,column:22}},27:{start:{line:78,column:4},end:{line:80,column:7}},28:{start:{line:79,column:6},end:{line:79,column:30}},29:{start:{line:81,column:4},end:{line:83,column:7}},30:{start:{line:84,column:4},end:{line:84,column:50}},31:{start:{line:84,column:39},end:{line:84,column:48}},32:{start:{line:86,column:13},end:{line:106,column:3}},33:{start:{line:87,column:4},end:{line:104,column:5}},34:{start:{line:88,column:6},end:{line:91,column:8}},35:{start:{line:93,column:24},end:{line:93,column:61}},36:{start:{line:94,column:6},end:{line:103,column:8}},37:{start:{line:105,column:4},end:{line:105,column:42}},38:{start:{line:108,column:18},end:{line:108,column:56}},39:{start:{line:109,column:4},end:{line:115,column:6}},40:{start:{line:116,column:25},end:{line:116,column:53}},41:{start:{line:117,column:25},end:{line:120,column:5}},42:{start:{line:121,column:4},end:{line:121,column:54}},43:{start:{line:124,column:25},end:{line:127,column:5}},44:{start:{line:128,column:4},end:{line:130,column:5}},45:{start:{line:129,column:6},end:{line:129,column:34}},46:{start:{line:131,column:4},end:{line:131,column:60}},47:{start:{line:134,column:4},end:{line:141,column:5}},48:{start:{line:135,column:6},end:{line:135,column:42}},49:{start:{line:137,column:6},end:{line:140,column:9}},50:{start:{line:144,column:4},end:{line:148,column:5}},51:{start:{line:145,column:6},end:{line:145,column:43}},52:{start:{line:147,column:6},end:{line:147,column:40}},53:{start:{line:149,column:4},end:{line:149,column:58}},54:{start:{line:152,column:14},end:{line:152,column:26}},55:{start:{line:153,column:4},end:{line:155,column:5}},56:{start:{line:154,column:6},end:{line:154,column:78}},57:{start:{line:157,column:4},end:{line:205,column:5}},58:{start:{line:158,column:6},end:{line:204,column:9}},59:{start:{line:159,column:26},end:{line:159,column:77}},60:{start:{line:160,column:20},end:{line:160,column:40}},61:{start:{line:161,column:26},end:{line:161,column:79}},62:{start:{line:162,column:22},end:{line:162,column:29}},63:{start:{line:163,column:46},end:{line:163,column:122}},64:{start:{line:164,column:26},end:{line:169,column:9}},65:{start:{line:168,column:33},end:{line:168,column:97}},66:{start:{line:171,column:8},end:{line:175,column:9}},67:{start:{line:172,column:10},end:{line:172,column:73}},68:{start:{line:174,column:10},end:{line:174,column:73}},69:{start:{line:176,column:24},end:{line:176,column:28}},70:{start:{line:177,column:8},end:{line:188,column:9}},71:{start:{line:178,column:10},end:{line:187,column:15}},72:{start:{line:183,column:37},end:{line:183,column:101}},73:{start:{line:189,column:8},end:{line:203,column:18}},74:{start:{line:199,column:41},end:{line:199,column:110}},75:{start:{line:206,column:4},end:{line:306,column:12}},76:{start:{line:217,column:39},end:{line:217,column:67}},77:{start:{line:235,column:43},end:{line:235,column:68}},78:{start:{line:250,column:39},end:{line:250,column:83}},79:{start:{line:266,column:42},end:{line:266,column:85}},80:{start:{line:309,column:21},end:{line:309,column:60}}},fnMap:{0:{name:"setStopRefs",decl:{start:{line:18,column:9},end:{line:18,column:20}},loc:{start:{line:18,column:35},end:{line:31,column:1}},line:18},1:{name:"(anonymous_1)",decl:{start:{line:21,column:30},end:{line:21,column:31}},loc:{start:{line:21,column:45},end:{line:28,column:5}},line:21},2:{name:"(anonymous_2)",decl:{start:{line:36,column:2},end:{line:36,column:3}},loc:{start:{line:36,column:22},end:{line:43,column:3}},line:36},3:{name:"(anonymous_3)",decl:{start:{line:44,column:2},end:{line:44,column:3}},loc:{start:{line:44,column:48},end:{line:52,column:3}},line:44},4:{name:"(anonymous_4)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:34},end:{line:61,column:3}},line:53},5:{name:"(anonymous_5)",decl:{start:{line:62,column:2},end:{line:62,column:3}},loc:{start:{line:62,column:34},end:{line:68,column:3}},line:62},6:{name:"(anonymous_6)",decl:{start:{line:70,column:2},end:{line:70,column:3}},loc:{start:{line:70,column:26},end:{line:85,column:3}},line:70},7:{name:"(anonymous_7)",decl:{start:{line:71,column:36},end:{line:71,column:37}},loc:{start:{line:71,column:51},end:{line:76,column:5}},line:71},8:{name:"(anonymous_8)",decl:{start:{line:76,column:12},end:{line:76,column:13}},loc:{start:{line:76,column:22},end:{line:76,column:69}},line:76},9:{name:"(anonymous_9)",decl:{start:{line:78,column:26},end:{line:78,column:27}},loc:{start:{line:78,column:41},end:{line:80,column:5}},line:78},10:{name:"(anonymous_10)",decl:{start:{line:84,column:29},end:{line:84,column:30}},loc:{start:{line:84,column:39},end:{line:84,column:48}},line:84},11:{name:"(anonymous_11)",decl:{start:{line:86,column:13},end:{line:86,column:14}},loc:{start:{line:86,column:35},end:{line:106,column:3}},line:86},12:{name:"(anonymous_12)",decl:{start:{line:107,column:2},end:{line:107,column:3}},loc:{start:{line:107,column:41},end:{line:122,column:3}},line:107},13:{name:"(anonymous_13)",decl:{start:{line:123,column:2},end:{line:123,column:3}},loc:{start:{line:123,column:23},end:{line:132,column:3}},line:123},14:{name:"(anonymous_14)",decl:{start:{line:133,column:2},end:{line:133,column:3}},loc:{start:{line:133,column:26},end:{line:142,column:3}},line:133},15:{name:"(anonymous_15)",decl:{start:{line:143,column:2},end:{line:143,column:3}},loc:{start:{line:143,column:40},end:{line:150,column:3}},line:143},16:{name:"(anonymous_16)",decl:{start:{line:151,column:2},end:{line:151,column:3}},loc:{start:{line:151,column:11},end:{line:307,column:3}},line:151},17:{name:"(anonymous_17)",decl:{start:{line:158,column:46},end:{line:158,column:47}},loc:{start:{line:158,column:61},end:{line:204,column:7}},line:158},18:{name:"(anonymous_18)",decl:{start:{line:168,column:20},end:{line:168,column:21}},loc:{start:{line:168,column:33},end:{line:168,column:97}},line:168},19:{name:"(anonymous_19)",decl:{start:{line:183,column:24},end:{line:183,column:25}},loc:{start:{line:183,column:37},end:{line:183,column:101}},line:183},20:{name:"(anonymous_20)",decl:{start:{line:199,column:24},end:{line:199,column:25}},loc:{start:{line:199,column:41},end:{line:199,column:110}},line:199},21:{name:"(anonymous_21)",decl:{start:{line:217,column:26},end:{line:217,column:27}},loc:{start:{line:217,column:39},end:{line:217,column:67}},line:217},22:{name:"(anonymous_22)",decl:{start:{line:235,column:26},end:{line:235,column:27}},loc:{start:{line:235,column:43},end:{line:235,column:68}},line:235},23:{name:"(anonymous_23)",decl:{start:{line:250,column:26},end:{line:250,column:27}},loc:{start:{line:250,column:39},end:{line:250,column:83}},line:250},24:{name:"(anonymous_24)",decl:{start:{line:266,column:26},end:{line:266,column:27}},loc:{start:{line:266,column:42},end:{line:266,column:85}},line:266}},branchMap:{0:{loc:{start:{line:20,column:2},end:{line:29,column:3}},type:"if",locations:[{start:{line:20,column:2},end:{line:29,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:20},1:{loc:{start:{line:20,column:6},end:{line:20,column:38}},type:"binary-expr",locations:[{start:{line:20,column:6},end:{line:20,column:17}},{start:{line:20,column:21},end:{line:20,column:38}}],line:20},2:{loc:{start:{line:22,column:6},end:{line:27,column:7}},type:"if",locations:[{start:{line:22,column:6},end:{line:27,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:22},3:{loc:{start:{line:23,column:8},end:{line:25,column:9}},type:"if",locations:[{start:{line:23,column:8},end:{line:25,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:23},4:{loc:{start:{line:38,column:4},end:{line:42,column:5}},type:"if",locations:[{start:{line:38,column:4},end:{line:42,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:38},5:{loc:{start:{line:46,column:4},end:{line:50,column:5}},type:"if",locations:[{start:{line:46,column:4},end:{line:50,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:46},6:{loc:{start:{line:54,column:4},end:{line:56,column:5}},type:"if",locations:[{start:{line:54,column:4},end:{line:56,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:54},7:{loc:{start:{line:57,column:4},end:{line:59,column:5}},type:"if",locations:[{start:{line:57,column:4},end:{line:59,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:57},8:{loc:{start:{line:63,column:4},end:{line:67,column:5}},type:"if",locations:[{start:{line:63,column:4},end:{line:67,column:5}},{start:{line:65,column:11},end:{line:67,column:5}}],line:63},9:{loc:{start:{line:87,column:4},end:{line:104,column:5}},type:"if",locations:[{start:{line:87,column:4},end:{line:104,column:5}},{start:{line:92,column:11},end:{line:104,column:5}}],line:87},10:{loc:{start:{line:93,column:24},end:{line:93,column:61}},type:"cond-expr",locations:[{start:{line:93,column:55},end:{line:93,column:57}},{start:{line:93,column:60},end:{line:93,column:61}}],line:93},11:{loc:{start:{line:108,column:18},end:{line:108,column:56}},type:"binary-expr",locations:[{start:{line:108,column:18},end:{line:108,column:50}},{start:{line:108,column:54},end:{line:108,column:56}}],line:108},12:{loc:{start:{line:112,column:14},end:{line:112,column:58}},type:"cond-expr",locations:[{start:{line:112,column:41},end:{line:112,column:42}},{start:{line:112,column:45},end:{line:112,column:58}}],line:112},13:{loc:{start:{line:128,column:4},end:{line:130,column:5}},type:"if",locations:[{start:{line:128,column:4},end:{line:130,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:128},14:{loc:{start:{line:134,column:4},end:{line:141,column:5}},type:"if",locations:[{start:{line:134,column:4},end:{line:141,column:5}},{start:{line:136,column:11},end:{line:141,column:5}}],line:134},15:{loc:{start:{line:134,column:8},end:{line:134,column:70}},type:"binary-expr",locations:[{start:{line:134,column:8},end:{line:134,column:33}},{start:{line:134,column:37},end:{line:134,column:70}}],line:134},16:{loc:{start:{line:144,column:4},end:{line:148,column:5}},type:"if",locations:[{start:{line:144,column:4},end:{line:148,column:5}},{start:{line:146,column:11},end:{line:148,column:5}}],line:144},17:{loc:{start:{line:153,column:4},end:{line:155,column:5}},type:"if",locations:[{start:{line:153,column:4},end:{line:155,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:153},18:{loc:{start:{line:157,column:4},end:{line:205,column:5}},type:"if",locations:[{start:{line:157,column:4},end:{line:205,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:157},19:{loc:{start:{line:159,column:26},end:{line:159,column:77}},type:"cond-expr",locations:[{start:{line:159,column:56},end:{line:159,column:68}},{start:{line:159,column:71},end:{line:159,column:77}}],line:159},20:{loc:{start:{line:161,column:26},end:{line:161,column:79}},type:"cond-expr",locations:[{start:{line:161,column:56},end:{line:161,column:69}},{start:{line:161,column:72},end:{line:161,column:79}}],line:161},21:{loc:{start:{line:171,column:8},end:{line:175,column:9}},type:"if",locations:[{start:{line:171,column:8},end:{line:175,column:9}},{start:{line:173,column:15},end:{line:175,column:9}}],line:171},22:{loc:{start:{line:177,column:8},end:{line:188,column:9}},type:"if",locations:[{start:{line:177,column:8},end:{line:188,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:177},23:{loc:{start:{line:225,column:8},end:{line:240,column:9}},type:"binary-expr",locations:[{start:{line:225,column:8},end:{line:225,column:45}},{start:{line:225,column:65},end:{line:240,column:9}}],line:225},24:{loc:{start:{line:256,column:8},end:{line:271,column:9}},type:"binary-expr",locations:[{start:{line:256,column:8},end:{line:256,column:18}},{start:{line:256,column:38},end:{line:271,column:9}}],line:256},25:{loc:{start:{line:272,column:8},end:{line:280,column:15}},type:"binary-expr",locations:[{start:{line:272,column:8},end:{line:272,column:18}},{start:{line:272,column:38},end:{line:280,column:15}}],line:272},26:{loc:{start:{line:282,column:10},end:{line:292,column:11}},type:"binary-expr",locations:[{start:{line:282,column:10},end:{line:282,column:20}},{start:{line:282,column:40},end:{line:292,column:11}}],line:282}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0],26:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_DataProperty.tsx"],names:[],mappings:"AAuO8B,cA8Bf,YA9Be;AAvO9B,OAAO,WAAW;AAClB,SAAQ,sBAAqB;AAC7B,SAAQ,sBAAqB;AAC7B,OAAO,YAAY;AAEnB,OAAO,iBAAiB;AACxB,OAAO,eAAe;AACtB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAClB,OAAO,YAAY;AACnB,OAAO,qBAAqB;AAC5B,SAAQ,2BAA0B;AAClC,SAA+B,uBAAuB;AAEtD,OAAO,wBAAwB;AAC/B,OAAO,sBAAsB;AAK7B,SAAS,YAAY,OAAkC,OAA0B;AAE/E,MAAI;AAEJ,MAAG,MAAM,SAAS,MAAM,MAAM,OAAO;AACnC,UAAM,MAAM,MAAM,QAAQ,CAAC,MAAM,QAAQ;AACvC,UAAG,CAAC,OAAO,UAAU,eAAe,KAAK,MAAM,MAAM,GAAG,GAAG;AACzD,YAAG,CAAC,SAAS;AACX,oBAAU,EAAC,GAAG,MAAK;AAAA,QACrB;AACA,gBAAQ,GAAG,IAAI,OAAO,OAAO;AAAA,MAC/B;AAAA,IACF,CAAC;AAAA,EACH;AAEA,SAAO;AACT;AAgCA,MAAM,6BAA6B,MAAM,UAAwD;AAAA,EAC/F,QAAQ;AAAA,IACN,MAAM,CAAC;AAAA,EACT;AAAA,EAEA,oBAAoB;AAClB,UAAM,UAAU,YAAY,KAAK,OAAO,KAAK,KAAK;AAElD,QAAG,SAAS;AACV,WAAK,SAAS;AAAA,QACZ,MAAM;AAAA,MACR,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAA4C,OAA0B;AACpG,UAAM,UAAU,YAAY,OAAO,KAAK;AACxC,QAAG,SAAS;AACV,aAAO;AAAA,QACL,MAAM;AAAA,MACR;AAAA,IACF;AACA,WAAO;AAAA,EACT;AAAA,EAEA,qBAAqB,WAAgB;AACnC,QAAI,UAAU,WAAW,cAAc;AACrC,aAAO;AAAA,IACT;AACA,QAAI,UAAU,SAAS,UAAU;AAC/B,aAAO;AAAA,IACT;AACA,WAAO;AAAA,EACT;AAAA,EAEA,qBAAqB,WAAgB;AACnC,QAAI,UAAU,WAAW,cAAc;AACrC,aAAO,CAAC,eAAe,eAAe,YAAY,eAAe,UAAU;AAAA,IAC7E,OACK;AACH,aAAO,CAAC,eAAe,YAAY,UAAU;AAAA,IAC/C;AAAA,EACF;AAAA;AAAA,EAGA,iBAAiB,OAAe;AAC9B,UAAM,gBAAgB,MACnB,IAAI,CAAC,MAAM,QAAQ;AAClB,aAAO;AAAA,QACL,KAAK,KAAK,MAAM,KAAK,GAAG;AAAA,QACxB,MAAM;AAAA,MACR;AAAA,IACF,CAAC,EAEA,KAAK,CAAC,GAAG,MAAM,gBAAgB,EAAE,KAAK,CAAC,EAAE,MAAM,EAAE,KAAK,CAAC,EAAE,IAAI,CAAC;AAGjE,UAAM,UAAU,CAAC;AACjB,kBACG,QAAQ,CAAC,MAAM,QAAO;AACrB,cAAQ,GAAG,IAAI,KAAK;AAAA,IACtB,CAAC;AAEH,SAAK,SAAS;AAAA,MACZ,MAAM;AAAA,IACR,CAAC;AAED,WAAO,cAAc,IAAI,CAAC,SAAS,KAAK,IAAI;AAAA,EAC9C;AAAA,EAEA,WAAW,CAAC,WAAmB,UAAe;AAC5C,QAAI,MAAM,SAAS,YAAY;AAC7B,cAAQ;AAAA,QACN,MAAM,MAAM;AAAA,QACZ,UAAU,MAAM;AAAA,MAClB;AAAA,IACF,OACK;AACH,YAAM,YAAY,MAAM,SAAS,gBAAgB,KAAK;AACtD,cAAQ;AAAA,QACN,UAAU;AAAA,QACV,MAAM,MAAM;AAAA;AAAA,QAEZ,OAAO;AAAA,UACL,CAAC,EAAC,MAAM,GAAG,OAAO,UAAS,GAAG,oBAAoB,KAAK,MAAM,SAAgB,CAAC;AAAA,UAC9E,CAAC,EAAC,MAAM,IAAI,OAAO,UAAS,GAAG,oBAAoB,KAAK,MAAM,SAAgB,CAAC;AAAA,QACjF;AAAA,QACA,GAAG;AAAA,MACL;AAAA,IACF;AACA,SAAK,MAAM,SAAU,WAAW,KAAK;AAAA,EACvC;AAAA,EAEA,WAAW,WAAmB,UAAuD,OAAe;AAClG,UAAM,QAAQ,KAAK,MAAM,OAAO,MAAM,MAAM,CAAC,KAAK,CAAC;AAEnD,UAAM,SAAS,IAAI;AAAA,MACjB;AAAA,QACE,OAAO,SAAS;AAAA,QAChB,MAAO,SAAS,SAAS,SAAa,IAAI,SAAS;AAAA,MACrD;AAAA,MACA;AAAA,IACF;AAEA,UAAM,eAAe,KAAK,iBAAiB,KAAK;AAEhD,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,OAAO;AAAA,IACT;AACA,SAAK,SAAS,KAAK,MAAM,WAAW,YAAY;AAAA,EAClD;AAAA,EAEA,WAAW,UAA8B;AACvC,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,MAAM;AAAA,IACR;AAEA,QAAI,aAAa,SAAS,QAAW;AACnC,aAAO,aAAa,MAAM;AAAA,IAC5B;AACA,SAAK,MAAM,SAAU,KAAK,MAAM,WAAW,YAAY;AAAA,EACzD;AAAA,EAEA,eAAe,SAAiB;AAC9B,QAAI,YAAY,iBAAiB,KAAK,MAAM,wBAAwB;AAClE,WAAK,MAAM,uBAAuB;AAAA,IACpC,OACK;AACH,WAAK,SAAS,KAAK,MAAM,WAAW;AAAA,QAClC,GAAG,KAAK,MAAM;AAAA,QACd,MAAM;AAAA,MACR,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,mBAAmB,UAAkC,SAAc;AACjE,QAAI,SAAS;AACX,WAAK,MAAM,MAAO,QAAQ,IAAI;AAAA,IAChC,OACK;AACH,aAAO,KAAK,MAAM,MAAO,QAAQ;AAAA,IACnC;AACA,SAAK,SAAS,KAAK,MAAM,WAAW,KAAK,MAAM,KAAK;AAAA,EACtD;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AAErB,QAAI,OAAO,KAAK,MAAM,OAAO,SAAS,aAAa;AACjD,WAAK,MAAM,MAAO,OAAO,KAAK,qBAAqB,KAAK,MAAM,SAAS;AAAA,IACzE;AAEA,QAAI;AACJ,QAAI,KAAK,MAAM,OAAO,OAAO;AAC3B,mBAAa,KAAK,MAAM,MAAM,MAAM,IAAI,CAAC,MAAM,QAAQ;AACrD,cAAM,YAAY,OAAO,KAAK,CAAC,MAAM,WAAW,KAAK,CAAC,EAAE,OAAO;AAC/D,cAAM,MAAO,KAAK,MAAM,KAAK,GAAG;AAChC,cAAM,YAAY,OAAO,KAAK,CAAC,MAAM,WAAW,KAAK,CAAC,EAAE,QAAQ,KAAK,CAAC;AACtE,cAAM,QAAQ,KAAK,CAAC;AACpB,cAAM,gBAAgB,oBAAC,oBAAiB,SAAS,KAAK,MAAM,cAAc,KAAK,MAAM,GAAG,GAAG;AAE3F,cAAM,YAAY;AAAA,UAChB,cAAc,EAAE,aAAa;AAAA,UAC7B,OAAO,EAAE,YAAY;AAAA,UACrB,OAAO;AAAA,UACP,UAAU,CAAC,YAAyC,KAAK,WAAW,KAAK,EAAE,MAAM,WAAW,OAAO,QAAkB,GAAG,KAAK;AAAA,QAC/H;AAEA,YAAI;AACJ,YAAG,KAAK,MAAM,OAAO,SAAS,eAAe;AAC3C,sBAAY,oBAAC,eAAa,GAAG,WAAW;AAAA,QAC1C,OACK;AACH,sBAAY,oBAAC,eAAa,GAAG,WAAW;AAAA,QAC1C;AAEA,YAAI,YAAY;AAChB,YAAG,cAAc,QAAW;AAC1B,sBAAY,oBAAC,SACX;AAAA,YAAC;AAAA;AAAA,cACC,cAAW;AAAA,cACX,OAAO;AAAA,cACP,UAAU,aAAW,KAAK,WAAW,KAAK,EAAC,MAAM,SAAS,OAAO,UAAS,GAAG,KAAK;AAAA,cAClF,KAAK;AAAA,cACL,KAAK;AAAA;AAAA,UACP,GACF;AAAA,QACF;AAEA,eAAO,qBAAC,QACN;AAAA,8BAAC,QACE,qBACH;AAAA,UACA,oBAAC,QACE,qBACH;AAAA,UACA,oBAAC,QACC;AAAA,YAAC;AAAA;AAAA,cACC,cAAY,EAAE,cAAc;AAAA,cAC5B,WAAW,KAAK,MAAM;AAAA,cACtB,WAAW,KAAK,MAAM;AAAA,cACtB;AAAA,cACA,UAAU,CAAC,GAAG,aAAa,KAAK,WAAW,KAAK,EAAC,MAAM,WAAW,OAAO,UAAS,GAAG,QAAkB;AAAA;AAAA,UACzG,GACF;AAAA,UACA,oBAAC,QACE,yBACH;AAAA,aAlBc,GAmBhB;AAAA,MACF,CAAC;AAAA,IACH;AAEA,WAAO,oBAAC,SAAI,WAAU,4BACpB,+BAAC,cAAS,WAAU,+BAClB;AAAA,0BAAC,YAAQ,6BAAmB,KAAK,MAAM,SAAS,GAAE;AAAA,MAClD,qBAAC,SAAI,WAAU,gCACb;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,UAAU;AAAA,YAGnB,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,KAAK,MAAM,MAAO;AAAA,gBACzB,UAAU,CAAC,YAAoB,KAAK,eAAe,OAAO;AAAA,gBAC1D,OAAO,EAAE,yDAAyD;AAAA,gBAClE,SAAS,KAAK,qBAAqB,KAAK,MAAM,SAAS;AAAA;AAAA,YACzD,GACF;AAAA;AAAA,UATI;AAAA,QAUN;AAAA,QACC,KAAK,MAAM,OAAO,SAAS,cAC1B;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,MAAM;AAAA,YAGf,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,WAAW;AAAA,gBACX,WAAW,OAAO,SAAS;AAAA,gBAC3B,OAAO,KAAK,MAAM,OAAO;AAAA,gBACzB,UAAU,CAAC,GAAG,aAAa,KAAK,WAAW,QAAkB;AAAA;AAAA,YAC/D,GACF;AAAA;AAAA,UATI;AAAA,QAUN;AAAA,QAEF;AAAA,UAAC;AAAA;AAAA,YACC,OAAO;AAAA,YAGP,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,KAAK,MAAM,OAAO;AAAA,gBACzB,OAAO,EAAE,8CAA8C;AAAA,gBACvD,UAAU,aAAW,KAAK,mBAAmB,YAAY,OAAO;AAAA;AAAA,YAClE,GACF;AAAA;AAAA,UARI;AAAA,QASN;AAAA,QACC,cACC;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,SAAS;AAAA,YAGlB;AAAA,cAAC;AAAA;AAAA,gBACC,WAAW,KAAK,MAAM;AAAA,gBACtB,WAAW,KAAK,MAAM;AAAA,gBACtB,OAAO,KAAK,MAAM,OAAO;AAAA,gBACzB,UAAU,CAAC,GAAG,YAAY,KAAK,mBAAmB,WAAW,OAAO;AAAA;AAAA,YACtE;AAAA;AAAA,UAPI;AAAA,QAQN;AAAA,QAED,cACC,oBAAC,SAAI,WAAU,0BACb,+BAAC,WAAM,WAAU,gCACf;AAAA,8BAAC,aAAS,YAAE,OAAO,GAAE;AAAA,UACrB,oBAAC,WACC,+BAAC,QACC;AAAA,gCAAC,QAAI,YAAE,MAAM,GAAE;AAAA,YACf,oBAAC,QAAI,YAAE,aAAa,GAAE;AAAA,YACtB,oBAAC,QAAG,SAAS,GAAI,YAAE,cAAc,GAAE;AAAA,aACrC,GACF;AAAA,UACA,oBAAC,WACE,sBACH;AAAA,WACF,GACF;AAAA,QAEF,qBAAC,SAAI,WAAU,oBACZ;AAAA,wBACC;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK,MAAM,WAAW,KAAK,IAAI;AAAA,cAExC;AAAA,oCAAC,kBAAe,OAAO,EAAE,eAAe,cAAc,GAAG;AAAA,gBACxD,EAAE,UAAU;AAAA;AAAA;AAAA,UACf;AAAA,UAEF;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK,MAAM,mBAAmB,KAAK,IAAI;AAAA,cAEhD;AAAA,oCAAC,kBAAe,OAAO,EAAE,eAAe,cAAc,GAAG;AAAA,gBACxD,EAAE,uBAAuB;AAAA;AAAA;AAAA,UAC5B;AAAA,WACF;AAAA,SACF;AAAA,OACF,GACF;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a1f2034e8330e69a4f4de946d81cea8ff55472f7"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Ht=function(){return s},s}Ht();function jV(n,e){Ht().f[0]++;let t;return Ht().s[0]++,Ht().b[1][0]++,n.value&&(Ht().b[1][1]++,n.value.stops)?(Ht().b[0][0]++,Ht().s[1]++,n.value.stops.forEach((i,r)=>{Ht().f[1]++,Ht().s[2]++,Object.prototype.hasOwnProperty.call(e.refs,r)?Ht().b[2][1]++:(Ht().b[2][0]++,Ht().s[3]++,t?Ht().b[3][1]++:(Ht().b[3][0]++,Ht().s[4]++,t={...e}),Ht().s[5]++,t[r]=kx("stop-"))})):Ht().b[0][1]++,Ht().s[6]++,t}class t9e extends On.Component{state=(Ht().s[7]++,{refs:{}});componentDidMount(){Ht().f[2]++;const e=(Ht().s[8]++,jV(this.props,this.state));Ht().s[9]++,e?(Ht().b[4][0]++,Ht().s[10]++,this.setState({refs:e})):Ht().b[4][1]++}static getDerivedStateFromProps(e,t){Ht().f[3]++;const i=(Ht().s[11]++,jV(e,t));return Ht().s[12]++,i?(Ht().b[5][0]++,Ht().s[13]++,{refs:i}):(Ht().b[5][1]++,Ht().s[14]++,null)}getFieldFunctionType(e){return Ht().f[4]++,Ht().s[15]++,e.expression.interpolated?(Ht().b[6][0]++,Ht().s[16]++,"exponential"):(Ht().b[6][1]++,Ht().s[17]++,e.type==="number"?(Ht().b[7][0]++,Ht().s[18]++,"interval"):(Ht().b[7][1]++,Ht().s[19]++,"categorical"))}getDataFunctionTypes(e){return Ht().f[5]++,Ht().s[20]++,e.expression.interpolated?(Ht().b[8][0]++,Ht().s[21]++,["interpolate","categorical","interval","exponential","identity"]):(Ht().b[8][1]++,Ht().s[22]++,["categorical","interval","identity"])}orderStopsByZoom(e){Ht().f[6]++;const t=(Ht().s[23]++,e.map((r,o)=>(Ht().f[7]++,Ht().s[24]++,{ref:this.state.refs[o],data:r})).sort((r,o)=>(Ht().f[8]++,Ht().s[25]++,poe(r.data[0].zoom,o.data[0].zoom)))),i=(Ht().s[26]++,{});return Ht().s[27]++,t.forEach((r,o)=>{Ht().f[9]++,Ht().s[28]++,i[o]=r.ref}),Ht().s[29]++,this.setState({refs:i}),Ht().s[30]++,t.map(r=>(Ht().f[10]++,Ht().s[31]++,r.data))}onChange=(Ht().s[32]++,(e,t)=>{if(Ht().f[11]++,Ht().s[33]++,t.type==="identity")Ht().b[9][0]++,Ht().s[34]++,t={type:t.type,property:t.property};else{Ht().b[9][1]++;const i=(Ht().s[35]++,t.type==="categorical"?(Ht().b[10][0]++,""):(Ht().b[10][1]++,0));Ht().s[36]++,t={property:"",type:t.type,stops:[[{zoom:6,value:i},Wf(this.props.fieldSpec)],[{zoom:10,value:i},Wf(this.props.fieldSpec)]],...t}}Ht().s[37]++,this.props.onChange(e,t)});changeStop(e,t,i){Ht().f[12]++;const r=(Ht().s[38]++,Ht().b[11][0]++,this.props.value?.stops.slice(0)||(Ht().b[11][1]++,[]));Ht().s[39]++,r[e]=[{value:t.value,zoom:t.zoom===void 0?(Ht().b[12][0]++,0):(Ht().b[12][1]++,t.zoom)},i];const o=(Ht().s[40]++,this.orderStopsByZoom(r)),s=(Ht().s[41]++,{...this.props.value,stops:o});Ht().s[42]++,this.onChange(this.props.fieldName,s)}changeBase(e){Ht().f[13]++;const t=(Ht().s[43]++,{...this.props.value,base:e});Ht().s[44]++,t.base===void 0?(Ht().b[13][0]++,Ht().s[45]++,delete t.base):Ht().b[13][1]++,Ht().s[46]++,this.props.onChange(this.props.fieldName,t)}changeDataType(e){Ht().f[14]++,Ht().s[47]++,Ht().b[15][0]++,e==="interpolate"&&(Ht().b[15][1]++,this.props.onChangeToZoomFunction)?(Ht().b[14][0]++,Ht().s[48]++,this.props.onChangeToZoomFunction()):(Ht().b[14][1]++,Ht().s[49]++,this.onChange(this.props.fieldName,{...this.props.value,type:e}))}changeDataProperty(e,t){Ht().f[15]++,Ht().s[50]++,t?(Ht().b[16][0]++,Ht().s[51]++,this.props.value[e]=t):(Ht().b[16][1]++,Ht().s[52]++,delete this.props.value[e]),Ht().s[53]++,this.onChange(this.props.fieldName,this.props.value)}render(){Ht().f[16]++;const e=(Ht().s[54]++,this.props.t);Ht().s[55]++,typeof this.props.value?.type>"u"?(Ht().b[17][0]++,Ht().s[56]++,this.props.value.type=this.getFieldFunctionType(this.props.fieldSpec)):Ht().b[17][1]++;let t;return Ht().s[57]++,this.props.value?.stops?(Ht().b[18][0]++,Ht().s[58]++,t=this.props.value.stops.map((i,r)=>{Ht().f[17]++;const o=(Ht().s[59]++,typeof i[0]=="object"?(Ht().b[19][0]++,i[0].zoom):(Ht().b[19][1]++,void 0)),s=(Ht().s[60]++,this.state.refs[r]),a=(Ht().s[61]++,typeof i[0]=="object"?(Ht().b[20][0]++,i[0].value):(Ht().b[20][1]++,i[0])),c=(Ht().s[62]++,i[1]),h=(Ht().s[63]++,te.jsx(moe,{onClick:this.props.onDeleteStop?.bind(this,r)})),m=(Ht().s[64]++,{"aria-label":e("Input value"),label:e("Data value"),value:a,onChange:E=>(Ht().f[18]++,Ht().s[65]++,this.changeStop(r,{zoom:o,value:E},c))});let v;Ht().s[66]++,this.props.value?.type==="categorical"?(Ht().b[21][0]++,Ht().s[67]++,v=te.jsx(Mm,{...m})):(Ht().b[21][1]++,Ht().s[68]++,v=te.jsx(b1,{...m}));let x=(Ht().s[69]++,null);return Ht().s[70]++,o!==void 0?(Ht().b[22][0]++,Ht().s[71]++,x=te.jsx("div",{children:te.jsx(b1,{"aria-label":"Zoom",value:o,onChange:E=>(Ht().f[19]++,Ht().s[72]++,this.changeStop(r,{zoom:E,value:a},c)),min:0,max:22})})):Ht().b[22][1]++,Ht().s[73]++,te.jsxs("tr",{children:[te.jsx("td",{children:x}),te.jsx("td",{children:v}),te.jsx("td",{children:te.jsx(sx,{"aria-label":e("Output value"),fieldName:this.props.fieldName,fieldSpec:this.props.fieldSpec,value:c,onChange:(E,D)=>(Ht().f[20]++,Ht().s[74]++,this.changeStop(r,{zoom:o,value:a},D))})}),te.jsx("td",{children:h})]},s)})):Ht().b[18][1]++,Ht().s[75]++,te.jsx("div",{className:"maputnik-data-spec-block",children:te.jsxs("fieldset",{className:"maputnik-data-spec-property",children:[te.jsx("legend",{children:j6(this.props.fieldName)}),te.jsxs("div",{className:"maputnik-data-fieldset-inner",children:[te.jsx(Ms,{label:e("Function"),children:te.jsx("div",{className:"maputnik-data-spec-property-input",children:te.jsx(hC,{value:this.props.value.type,onChange:i=>(Ht().f[21]++,Ht().s[76]++,this.changeDataType(i)),title:e("Select a type of data scale (default is 'categorical')."),options:this.getDataFunctionTypes(this.props.fieldSpec)})})},"function"),(Ht().b[23][0]++,this.props.value?.type!=="identity"&&(Ht().b[23][1]++,te.jsx(Ms,{label:e("Base"),children:te.jsx("div",{className:"maputnik-data-spec-property-input",children:te.jsx(sx,{fieldName:"base",fieldSpec:qr.function.base,value:this.props.value?.base,onChange:(i,r)=>(Ht().f[22]++,Ht().s[77]++,this.changeBase(r))})})},"base"))),te.jsx(Ms,{label:"Property",children:te.jsx("div",{className:"maputnik-data-spec-property-input",children:te.jsx(Mm,{value:this.props.value?.property,title:e("Input a data property to base styles off of."),onChange:i=>(Ht().f[23]++,Ht().s[78]++,this.changeDataProperty("property",i))})})},"property"),(Ht().b[24][0]++,t&&(Ht().b[24][1]++,te.jsx(Ms,{label:e("Default"),children:te.jsx(sx,{fieldName:this.props.fieldName,fieldSpec:this.props.fieldSpec,value:this.props.value?.default,onChange:(i,r)=>(Ht().f[24]++,Ht().s[79]++,this.changeDataProperty("default",r))})},"default"))),(Ht().b[25][0]++,t&&(Ht().b[25][1]++,te.jsx("div",{className:"maputnik-function-stop",children:te.jsxs("table",{className:"maputnik-function-stop-table",children:[te.jsx("caption",{children:e("Stops")}),te.jsx("thead",{children:te.jsxs("tr",{children:[te.jsx("th",{children:e("Zoom")}),te.jsx("th",{children:e("Input value")}),te.jsx("th",{rowSpan:2,children:e("Output value")})]})}),te.jsx("tbody",{children:t})]})}))),te.jsxs("div",{className:"maputnik-toolbox",children:[(Ht().b[26][0]++,t&&(Ht().b[26][1]++,te.jsxs(Gs,{className:"maputnik-add-stop",onClick:this.props.onAddStop?.bind(this),children:[te.jsx(z6,{style:{verticalAlign:"text-bottom"}}),e("Add stop")]}))),te.jsxs(Gs,{className:"maputnik-add-stop",onClick:this.props.onExpressionClick?.bind(this),children:[te.jsx(D4,{style:{verticalAlign:"text-bottom"}}),e("Convert to expression")]})]})]})]})})}}const n9e=(Ht().s[80]++,Po()(t9e));function Yn(){var n="/home/runner/work/maputnik/maputnik/src/components/_ZoomProperty.tsx",e="374899057a1493811ae396622fb1b276448ec163",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/_ZoomProperty.tsx",statementMap:{0:{start:{line:17,column:16},end:{line:17,column:18}},1:{start:{line:18,column:2},end:{line:29,column:3}},2:{start:{line:19,column:4},end:{line:28,column:7}},3:{start:{line:20,column:6},end:{line:27,column:7}},4:{start:{line:21,column:8},end:{line:23,column:9}},5:{start:{line:22,column:10},end:{line:22,column:33}},6:{start:{line:24,column:8},end:{line:24,column:39}},7:{start:{line:26,column:8},end:{line:26,column:39}},8:{start:{line:30,column:2},end:{line:30,column:17}},9:{start:{line:33,column:24},end:{line:35,column:3}},10:{start:{line:36,column:10},end:{line:38,column:3}},11:{start:{line:40,column:20},end:{line:40,column:55}},12:{start:{line:41,column:4},end:{line:45,column:5}},13:{start:{line:42,column:6},end:{line:44,column:9}},14:{start:{line:48,column:20},end:{line:48,column:45}},15:{start:{line:49,column:4},end:{line:53,column:5}},16:{start:{line:50,column:6},end:{line:52,column:8}},17:{start:{line:54,column:4},end:{line:54,column:16}},18:{start:{line:58,column:26},end:{line:63,column:60}},19:{start:{line:59,column:6},end:{line:62,column:8}},20:{start:{line:63,column:22},end:{line:63,column:59}},21:{start:{line:64,column:20},end:{line:64,column:22}},22:{start:{line:65,column:4},end:{line:67,column:7}},23:{start:{line:66,column:6},end:{line:66,column:30}},24:{start:{line:68,column:4},end:{line:70,column:7}},25:{start:{line:71,column:4},end:{line:71,column:50}},26:{start:{line:71,column:39},end:{line:71,column:48}},27:{start:{line:74,column:18},end:{line:74,column:49}},28:{start:{line:75,column:4},end:{line:75,column:41}},29:{start:{line:76,column:25},end:{line:76,column:53}},30:{start:{line:77,column:25},end:{line:80,column:5}},31:{start:{line:81,column:4},end:{line:81,column:60}},32:{start:{line:84,column:25},end:{line:87,column:5}},33:{start:{line:88,column:4},end:{line:90,column:5}},34:{start:{line:89,column:6},end:{line:89,column:34}},35:{start:{line:91,column:4},end:{line:91,column:60}},36:{start:{line:93,column:19},end:{line:97,column:3}},37:{start:{line:94,column:4},end:{line:96,column:5}},38:{start:{line:95,column:6},end:{line:95,column:46}},39:{start:{line:99,column:14},end:{line:99,column:26}},40:{start:{line:100,column:23},end:{line:133,column:6}},41:{start:{line:101,column:24},end:{line:101,column:31}},42:{start:{line:102,column:20},end:{line:102,column:27}},43:{start:{line:103,column:44},end:{line:103,column:120}},44:{start:{line:104,column:6},end:{line:132,column:8}},45:{start:{line:113,column:43},end:{line:113,column:87}},46:{start:{line:125,column:43},end:{line:125,column:88}},47:{start:{line:134,column:4},end:{line:200,column:12}},48:{start:{line:145,column:39},end:{line:145,column:67}},49:{start:{line:162,column:43},end:{line:162,column:68}},50:{start:{line:203,column:4},end:{line:207,column:5}},51:{start:{line:204,column:6},end:{line:204,column:83}},52:{start:{line:206,column:6},end:{line:206,column:29}},53:{start:{line:210,column:21},end:{line:210,column:60}}},fnMap:{0:{name:"setStopRefs",decl:{start:{line:16,column:9},end:{line:16,column:20}},loc:{start:{line:16,column:35},end:{line:31,column:1}},line:16},1:{name:"(anonymous_1)",decl:{start:{line:19,column:30},end:{line:19,column:31}},loc:{start:{line:19,column:45},end:{line:28,column:5}},line:19},2:{name:"(anonymous_2)",decl:{start:{line:39,column:2},end:{line:39,column:3}},loc:{start:{line:39,column:22},end:{line:46,column:3}},line:39},3:{name:"(anonymous_3)",decl:{start:{line:47,column:2},end:{line:47,column:3}},loc:{start:{line:47,column:48},end:{line:55,column:3}},line:47},4:{name:"(anonymous_4)",decl:{start:{line:57,column:2},end:{line:57,column:3}},loc:{start:{line:57,column:26},end:{line:72,column:3}},line:57},5:{name:"(anonymous_5)",decl:{start:{line:58,column:36},end:{line:58,column:37}},loc:{start:{line:58,column:51},end:{line:63,column:5}},line:58},6:{name:"(anonymous_6)",decl:{start:{line:63,column:12},end:{line:63,column:13}},loc:{start:{line:63,column:22},end:{line:63,column:59}},line:63},7:{name:"(anonymous_7)",decl:{start:{line:65,column:26},end:{line:65,column:27}},loc:{start:{line:65,column:41},end:{line:67,column:5}},line:65},8:{name:"(anonymous_8)",decl:{start:{line:71,column:29},end:{line:71,column:30}},loc:{start:{line:71,column:39},end:{line:71,column:48}},line:71},9:{name:"(anonymous_9)",decl:{start:{line:73,column:2},end:{line:73,column:3}},loc:{start:{line:73,column:45},end:{line:82,column:3}},line:73},10:{name:"(anonymous_10)",decl:{start:{line:83,column:2},end:{line:83,column:3}},loc:{start:{line:83,column:23},end:{line:92,column:3}},line:83},11:{name:"(anonymous_11)",decl:{start:{line:93,column:19},end:{line:93,column:20}},loc:{start:{line:93,column:29},end:{line:97,column:3}},line:93},12:{name:"(anonymous_12)",decl:{start:{line:98,column:2},end:{line:98,column:3}},loc:{start:{line:98,column:11},end:{line:201,column:3}},line:98},13:{name:"(anonymous_13)",decl:{start:{line:100,column:51},end:{line:100,column:52}},loc:{start:{line:100,column:66},end:{line:133,column:5}},line:100},14:{name:"(anonymous_14)",decl:{start:{line:113,column:26},end:{line:113,column:27}},loc:{start:{line:113,column:43},end:{line:113,column:87}},line:113},15:{name:"(anonymous_15)",decl:{start:{line:125,column:26},end:{line:125,column:27}},loc:{start:{line:125,column:43},end:{line:125,column:88}},line:125},16:{name:"(anonymous_16)",decl:{start:{line:145,column:26},end:{line:145,column:27}},loc:{start:{line:145,column:39},end:{line:145,column:67}},line:145},17:{name:"(anonymous_17)",decl:{start:{line:162,column:26},end:{line:162,column:27}},loc:{start:{line:162,column:43},end:{line:162,column:68}},line:162},18:{name:"(anonymous_18)",decl:{start:{line:202,column:2},end:{line:202,column:3}},loc:{start:{line:202,column:34},end:{line:208,column:3}},line:202}},branchMap:{0:{loc:{start:{line:18,column:2},end:{line:29,column:3}},type:"if",locations:[{start:{line:18,column:2},end:{line:29,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:18},1:{loc:{start:{line:18,column:6},end:{line:18,column:38}},type:"binary-expr",locations:[{start:{line:18,column:6},end:{line:18,column:17}},{start:{line:18,column:21},end:{line:18,column:38}}],line:18},2:{loc:{start:{line:20,column:6},end:{line:27,column:7}},type:"if",locations:[{start:{line:20,column:6},end:{line:27,column:7}},{start:{line:25,column:13},end:{line:27,column:7}}],line:20},3:{loc:{start:{line:21,column:8},end:{line:23,column:9}},type:"if",locations:[{start:{line:21,column:8},end:{line:23,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:21},4:{loc:{start:{line:41,column:4},end:{line:45,column:5}},type:"if",locations:[{start:{line:41,column:4},end:{line:45,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:41},5:{loc:{start:{line:49,column:4},end:{line:53,column:5}},type:"if",locations:[{start:{line:49,column:4},end:{line:53,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:49},6:{loc:{start:{line:88,column:4},end:{line:90,column:5}},type:"if",locations:[{start:{line:88,column:4},end:{line:90,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:88},7:{loc:{start:{line:94,column:4},end:{line:96,column:5}},type:"if",locations:[{start:{line:94,column:4},end:{line:96,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:94},8:{loc:{start:{line:94,column:8},end:{line:94,column:67}},type:"binary-expr",locations:[{start:{line:94,column:8},end:{line:94,column:30}},{start:{line:94,column:34},end:{line:94,column:67}}],line:94},9:{loc:{start:{line:203,column:4},end:{line:207,column:5}},type:"if",locations:[{start:{line:203,column:4},end:{line:207,column:5}},{start:{line:205,column:11},end:{line:207,column:5}}],line:203}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_ZoomProperty.tsx"],names:[],mappings:"AAiK4B,cACf,YADe;AAjK5B,OAAO,WAAW;AAClB,SAAS,sBAAsB;AAC/B,SAAS,sBAAsB;AAC/B,OAAO,YAAY;AACnB,SAA+B,uBAAuB;AAEtD,OAAO,iBAAiB;AACxB,OAAO,eAAe;AACtB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAElB,OAAO,sBAAsB;AAC7B,OAAO,wBAAwB;AAE/B,OAAO,YAAY;AACnB,OAAO,qBAAqB;AAS5B,SAAS,YAAY,OAAkC,OAA0B;AAE/E,MAAI,UAAmC,CAAC;AAExC,MAAG,MAAM,SAAU,MAAM,MAAwB,OAAO;AACtD,IAAC,MAAM,MAAwB,MAAM,QAAQ,CAAC,MAAM,QAAgB;AAClE,UAAG,OAAO,UAAU,eAAe,KAAK,CAAC,MAAM,MAAM,GAAG,GAAG;AACzD,YAAG,CAAC,SAAS;AACX,oBAAU,EAAC,GAAG,MAAK;AAAA,QACrB;AACA,gBAAQ,GAAG,IAAI,OAAO,OAAO;AAAA,MAC/B,OAAO;AACL,gBAAQ,GAAG,IAAI,MAAM,KAAK,GAAG;AAAA,MAC/B;AAAA,IACF,CAAC;AAAA,EACH;AACA,SAAO;AACT;AA4BA,MAAM,6BAA6B,MAAM,UAAwD;AAAA,EAC/F,OAAO,eAAe;AAAA,IACpB,QAAQ,CAAC;AAAA,EACX;AAAA,EAEA,QAAQ;AAAA,IACN,MAAM,CAAC;AAAA,EACT;AAAA,EAEA,oBAAoB;AAClB,UAAM,UAAU,YAAY,KAAK,OAAO,KAAK,KAAK;AAElD,QAAG,SAAS;AACV,WAAK,SAAS;AAAA,QACZ,MAAM;AAAA,MACR,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAA4C,OAA0B;AACpG,UAAM,UAAU,YAAY,OAAO,KAAK;AACxC,QAAG,SAAS;AACV,aAAO;AAAA,QACL,MAAM;AAAA,MACR;AAAA,IACF;AACA,WAAO;AAAA,EACT;AAAA;AAAA,EAGA,iBAAiB,OAA+B;AAC9C,UAAM,gBAAgB,MACnB,IAAI,CAAC,MAAM,QAAQ;AAClB,aAAO;AAAA,QACL,KAAK,KAAK,MAAM,KAAK,GAAG;AAAA,QACxB,MAAM;AAAA,MACR;AAAA,IACF,CAAC,EAEA,KAAK,CAAC,GAAG,MAAM,gBAAgB,EAAE,KAAK,CAAC,GAAI,EAAE,KAAK,CAAC,CAAE,CAAC;AAGzD,UAAM,UAAkC,CAAC;AACzC,kBACG,QAAQ,CAAC,MAAM,QAAO;AACrB,cAAQ,GAAG,IAAI,KAAK;AAAA,IACtB,CAAC;AAEH,SAAK,SAAS;AAAA,MACZ,MAAM;AAAA,IACR,CAAC;AAED,WAAO,cAAc,IAAI,CAAC,SAAS,KAAK,IAAI;AAAA,EAC9C;AAAA,EAEA,eAAe,WAAmB,UAA8B,OAAe;AAC7E,UAAM,QAAS,KAAK,MAAM,MAAwB,MAAM,MAAM,CAAC;AAC/D,UAAM,SAAS,IAAI,CAAC,UAAU,KAAK;AAEnC,UAAM,eAAe,KAAK,iBAAiB,KAAK;AAEhD,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,OAAO;AAAA,IACT;AACA,SAAK,MAAM,SAAU,KAAK,MAAM,WAAW,YAAY;AAAA,EACzD;AAAA,EAEA,WAAW,UAA8B;AACvC,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,MAAM;AAAA,IACR;AAEA,QAAI,aAAa,SAAS,QAAW;AACnC,aAAO,aAAa,MAAM;AAAA,IAC5B;AACA,SAAK,MAAM,SAAU,KAAK,MAAM,WAAW,YAAY;AAAA,EACzD;AAAA,EAEA,iBAAiB,CAAC,SAAiB;AACjC,QAAI,SAAS,iBAAiB,KAAK,MAAM,wBAAwB;AAC/D,WAAK,MAAM,uBAAuB,IAAI;AAAA,IACxC;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,aAAa,KAAK,MAAM,OAAO,MAAM,IAAI,CAAC,MAAM,QAAQ;AAC5D,YAAM,YAAY,KAAK,CAAC;AACxB,YAAM,QAAQ,KAAK,CAAC;AACpB,YAAM,gBAAgB,oBAAC,oBAAiB,SAAS,KAAK,MAAM,cAAc,KAAK,MAAM,GAAG,GAAG;AAC3F,aAAO;AAAA,QAAC;AAAA;AAAA,UAGN;AAAA,gCAAC,QACC;AAAA,cAAC;AAAA;AAAA,gBACC,cAAY,EAAE,MAAM;AAAA,gBACpB,OAAO;AAAA,gBACP,UAAU,iBAAe,KAAK,eAAe,KAAK,aAAa,KAAK;AAAA,gBACpE,KAAK;AAAA,gBACL,KAAK;AAAA;AAAA,YACP,GACF;AAAA,YACA,oBAAC,QACC;AAAA,cAAC;AAAA;AAAA,gBACC,cAAY,EAAE,cAAc;AAAA,gBAC5B,WAAW,KAAK,MAAM;AAAA,gBACtB,WAAW,KAAK,MAAM;AAAA,gBACtB;AAAA,gBACA,UAAU,CAAC,GAAG,aAAa,KAAK,eAAe,KAAK,WAAW,QAAkB;AAAA;AAAA,YACnF,GACF;AAAA,YACA,oBAAC,QACE,yBACH;AAAA;AAAA;AAAA,QAtBK,GAAG,KAAK,CAAC,CAAC,IAAI,KAAK,CAAC,CAAC;AAAA,MAuB5B;AAAA,IACF,CAAC;AAGD,WAAO,oBAAC,SAAI,WAAU,4BACpB,+BAAC,cAAS,WAAU,+BAClB;AAAA,0BAAC,YAAQ,6BAAmB,KAAK,MAAM,SAAS,GAAE;AAAA,MAClD,qBAAC,SAAI,WAAU,gCACb;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,UAAU;AAAA,YAEnB,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO;AAAA,gBACP,UAAU,CAAC,YAAoB,KAAK,eAAe,OAAO;AAAA,gBAC1D,OAAO,EAAE,yDAAyD;AAAA,gBAClE,SAAS,KAAK,qBAAqB,KAAK,MAAM,SAAU;AAAA;AAAA,YAC1D,GACF;AAAA;AAAA,QACF;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,MAAM;AAAA,YAEf,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,WAAW;AAAA,gBACX,WAAW,OAAO,SAAS;AAAA,gBAC3B,OAAO,KAAK,MAAM,OAAO;AAAA,gBACzB,UAAU,CAAC,GAAG,aAAa,KAAK,WAAW,QAA8B;AAAA;AAAA,YAC3E,GACF;AAAA;AAAA,QACF;AAAA,QACA,oBAAC,SAAI,WAAU,0BACb,+BAAC,WAAM,WAAU,mEACf;AAAA,8BAAC,aAAS,YAAE,OAAO,GAAE;AAAA,UACrB,oBAAC,WACC,+BAAC,QACC;AAAA,gCAAC,QAAI,YAAE,MAAM,GAAE;AAAA,YACf,oBAAC,QAAG,SAAS,GAAI,YAAE,cAAc,GAAE;AAAA,aACrC,GACF;AAAA,UACA,oBAAC,WACE,sBACH;AAAA,WACF,GACF;AAAA,QACA,qBAAC,SAAI,WAAU,oBACb;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK,MAAM,WAAW,KAAK,IAAI;AAAA,cAExC;AAAA,oCAAC,kBAAe,OAAO,EAAE,eAAe,cAAc,GAAG;AAAA,gBACxD,EAAE,UAAU;AAAA;AAAA;AAAA,UACf;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK,MAAM,mBAAmB,KAAK,IAAI;AAAA,cAEhD;AAAA,oCAAC,kBAAe,OAAO,EAAE,eAAe,cAAc,GAAG;AAAA,gBACxD,EAAE,uBAAuB;AAAA;AAAA;AAAA,UAC5B;AAAA,WACF;AAAA,SACF;AAAA,OACF,GACF;AAAA,EACF;AAAA,EAEA,qBAAqB,WAGlB;AACD,QAAI,UAAU,eAAe,MAAM,eAAe;AAChD,aAAO,CAAC,eAAe,eAAe,YAAY,eAAe,UAAU;AAAA,IAC7E,OACK;AACH,aAAO,CAAC,aAAa;AAAA,IACvB;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"374899057a1493811ae396622fb1b276448ec163"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Yn=function(){return s},s}Yn();function NV(n,e){Yn().f[0]++;let t=(Yn().s[0]++,{});return Yn().s[1]++,Yn().b[1][0]++,n.value&&(Yn().b[1][1]++,n.value.stops)?(Yn().b[0][0]++,Yn().s[2]++,n.value.stops.forEach((i,r)=>{Yn().f[1]++,Yn().s[3]++,Object.prototype.hasOwnProperty.call(!e.refs,r)?(Yn().b[2][0]++,Yn().s[4]++,t?Yn().b[3][1]++:(Yn().b[3][0]++,Yn().s[5]++,t={...e}),Yn().s[6]++,t[r]=kx("stop-")):(Yn().b[2][1]++,Yn().s[7]++,t[r]=e.refs[r])})):Yn().b[0][1]++,Yn().s[8]++,t}class i9e extends On.Component{static defaultProps=(Yn().s[9]++,{errors:{}});state=(Yn().s[10]++,{refs:{}});componentDidMount(){Yn().f[2]++;const e=(Yn().s[11]++,NV(this.props,this.state));Yn().s[12]++,e?(Yn().b[4][0]++,Yn().s[13]++,this.setState({refs:e})):Yn().b[4][1]++}static getDerivedStateFromProps(e,t){Yn().f[3]++;const i=(Yn().s[14]++,NV(e,t));return Yn().s[15]++,i?(Yn().b[5][0]++,Yn().s[16]++,{refs:i}):(Yn().b[5][1]++,Yn().s[17]++,null)}orderStopsByZoom(e){Yn().f[4]++;const t=(Yn().s[18]++,e.map((r,o)=>(Yn().f[5]++,Yn().s[19]++,{ref:this.state.refs[o],data:r})).sort((r,o)=>(Yn().f[6]++,Yn().s[20]++,poe(r.data[0],o.data[0])))),i=(Yn().s[21]++,{});return Yn().s[22]++,t.forEach((r,o)=>{Yn().f[7]++,Yn().s[23]++,i[o]=r.ref}),Yn().s[24]++,this.setState({refs:i}),Yn().s[25]++,t.map(r=>(Yn().f[8]++,Yn().s[26]++,r.data))}changeZoomStop(e,t,i){Yn().f[9]++;const r=(Yn().s[27]++,this.props.value.stops.slice(0));Yn().s[28]++,r[e]=[t,i];const o=(Yn().s[29]++,this.orderStopsByZoom(r)),s=(Yn().s[30]++,{...this.props.value,stops:o});Yn().s[31]++,this.props.onChange(this.props.fieldName,s)}changeBase(e){Yn().f[10]++;const t=(Yn().s[32]++,{...this.props.value,base:e});Yn().s[33]++,t.base===void 0?(Yn().b[6][0]++,Yn().s[34]++,delete t.base):Yn().b[6][1]++,Yn().s[35]++,this.props.onChange(this.props.fieldName,t)}changeDataType=(Yn().s[36]++,e=>{Yn().f[11]++,Yn().s[37]++,Yn().b[8][0]++,e!=="interpolate"&&(Yn().b[8][1]++,this.props.onChangeToDataFunction)?(Yn().b[7][0]++,Yn().s[38]++,this.props.onChangeToDataFunction(e)):Yn().b[7][1]++});render(){Yn().f[12]++;const e=(Yn().s[39]++,this.props.t),t=(Yn().s[40]++,this.props.value?.stops.map((i,r)=>{Yn().f[13]++;const o=(Yn().s[41]++,i[0]),s=(Yn().s[42]++,i[1]),a=(Yn().s[43]++,te.jsx(moe,{onClick:this.props.onDeleteStop?.bind(this,r)}));return Yn().s[44]++,te.jsxs("tr",{children:[te.jsx("td",{children:te.jsx(b1,{"aria-label":e("Zoom"),value:o,onChange:c=>(Yn().f[14]++,Yn().s[45]++,this.changeZoomStop(r,c,s)),min:0,max:22})}),te.jsx("td",{children:te.jsx(sx,{"aria-label":e("Output value"),fieldName:this.props.fieldName,fieldSpec:this.props.fieldSpec,value:s,onChange:(c,h)=>(Yn().f[15]++,Yn().s[46]++,this.changeZoomStop(r,o,h))})}),te.jsx("td",{children:a})]},`${i[0]}-${i[1]}`)}));return Yn().s[47]++,te.jsx("div",{className:"maputnik-data-spec-block",children:te.jsxs("fieldset",{className:"maputnik-data-spec-property",children:[te.jsx("legend",{children:j6(this.props.fieldName)}),te.jsxs("div",{className:"maputnik-data-fieldset-inner",children:[te.jsx(Ms,{label:e("Function"),children:te.jsx("div",{className:"maputnik-data-spec-property-input",children:te.jsx(hC,{value:"interpolate",onChange:i=>(Yn().f[16]++,Yn().s[48]++,this.changeDataType(i)),title:e("Select a type of data scale (default is 'categorical')."),options:this.getDataFunctionTypes(this.props.fieldSpec)})})}),te.jsx(Ms,{label:e("Base"),children:te.jsx("div",{className:"maputnik-data-spec-property-input",children:te.jsx(sx,{fieldName:"base",fieldSpec:qr.function.base,value:this.props.value?.base,onChange:(i,r)=>(Yn().f[17]++,Yn().s[49]++,this.changeBase(r))})})}),te.jsx("div",{className:"maputnik-function-stop",children:te.jsxs("table",{className:"maputnik-function-stop-table maputnik-function-stop-table--zoom",children:[te.jsx("caption",{children:e("Stops")}),te.jsx("thead",{children:te.jsxs("tr",{children:[te.jsx("th",{children:e("Zoom")}),te.jsx("th",{rowSpan:2,children:e("Output value")})]})}),te.jsx("tbody",{children:t})]})}),te.jsxs("div",{className:"maputnik-toolbox",children:[te.jsxs(Gs,{className:"maputnik-add-stop",onClick:this.props.onAddStop?.bind(this),children:[te.jsx(z6,{style:{verticalAlign:"text-bottom"}}),e("Add stop")]}),te.jsxs(Gs,{className:"maputnik-add-stop",onClick:this.props.onExpressionClick?.bind(this),children:[te.jsx(D4,{style:{verticalAlign:"text-bottom"}}),e("Convert to expression")]})]})]})]})})}getDataFunctionTypes(e){return Yn().f[18]++,Yn().s[50]++,e["property-type"]==="data-driven"?(Yn().b[9][0]++,Yn().s[51]++,["interpolate","categorical","interval","exponential","identity"]):(Yn().b[9][1]++,Yn().s[52]++,["interpolate"])}}const r9e=(Yn().s[53]++,Po()(i9e));function ct(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldFunction.tsx",e="cec93a709e0799aecc929100cb853febe363652d",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldFunction.tsx",statementMap:{0:{start:{line:10,column:2},end:{line:10,column:78}},1:{start:{line:13,column:2},end:{line:13,column:74}},2:{start:{line:16,column:2},end:{line:18,column:5}},3:{start:{line:17,column:4},end:{line:17,column:52}},4:{start:{line:21,column:2},end:{line:21,column:123}},5:{start:{line:24,column:2},end:{line:26,column:5}},6:{start:{line:25,column:4},end:{line:25,column:83}},7:{start:{line:29,column:2},end:{line:29,column:64}},8:{start:{line:32,column:16},end:{line:32,column:47}},9:{start:{line:33,column:2},end:{line:33,column:38}},10:{start:{line:36,column:2},end:{line:38,column:3}},11:{start:{line:37,column:4},end:{line:37,column:37}},12:{start:{line:39,column:2},end:{line:39,column:15}},13:{start:{line:42,column:2},end:{line:62,column:3}},14:{start:{line:43,column:4},end:{line:43,column:19}},15:{start:{line:44,column:9},end:{line:62,column:3}},16:{start:{line:45,column:4},end:{line:45,column:19}},17:{start:{line:46,column:9},end:{line:62,column:3}},18:{start:{line:47,column:4},end:{line:47,column:19}},19:{start:{line:48,column:9},end:{line:62,column:3}},20:{start:{line:49,column:4},end:{line:49,column:19}},21:{start:{line:50,column:9},end:{line:62,column:3}},22:{start:{line:51,column:4},end:{line:51,column:19}},23:{start:{line:52,column:9},end:{line:62,column:3}},24:{start:{line:53,column:4},end:{line:53,column:19}},25:{start:{line:54,column:9},end:{line:62,column:3}},26:{start:{line:55,column:4},end:{line:55,column:19}},27:{start:{line:56,column:9},end:{line:62,column:3}},28:{start:{line:57,column:4},end:{line:57,column:27}},29:{start:{line:58,column:9},end:{line:62,column:3}},30:{start:{line:59,column:4},end:{line:59,column:27}},31:{start:{line:61,column:4},end:{line:61,column:24}},32:{start:{line:64,column:22},end:{line:302,column:1}},33:{start:{line:65,column:34},end:{line:67,column:3}},34:{start:{line:68,column:36},end:{line:68,column:57}},35:{start:{line:69,column:2},end:{line:73,column:48}},36:{start:{line:70,column:4},end:{line:72,column:5}},37:{start:{line:71,column:6},end:{line:71,column:61}},38:{start:{line:74,column:31},end:{line:82,column:3}},39:{start:{line:75,column:4},end:{line:77,column:5}},40:{start:{line:76,column:6},end:{line:76,column:27}},41:{start:{line:78,column:4},end:{line:80,column:5}},42:{start:{line:79,column:6},end:{line:79,column:24}},43:{start:{line:81,column:4},end:{line:81,column:25}},44:{start:{line:83,column:18},end:{line:99,column:3}},45:{start:{line:84,column:18},end:{line:84,column:44}},46:{start:{line:85,column:21},end:{line:85,column:44}},47:{start:{line:86,column:4},end:{line:93,column:5}},48:{start:{line:87,column:6},end:{line:90,column:9}},49:{start:{line:92,column:6},end:{line:92,column:49}},50:{start:{line:94,column:25},end:{line:97,column:5}},51:{start:{line:98,column:4},end:{line:98,column:50}},52:{start:{line:100,column:27},end:{line:104,column:3}},53:{start:{line:101,column:37},end:{line:101,column:42}},54:{start:{line:102,column:4},end:{line:102,column:49}},55:{start:{line:103,column:4},end:{line:103,column:25}},56:{start:{line:105,column:21},end:{line:116,column:3}},57:{start:{line:106,column:18},end:{line:106,column:44}},58:{start:{line:107,column:4},end:{line:107,column:29}},59:{start:{line:108,column:23},end:{line:111,column:5}},60:{start:{line:112,column:4},end:{line:114,column:5}},61:{start:{line:113,column:6},end:{line:113,column:33}},62:{start:{line:115,column:4},end:{line:115,column:50}},63:{start:{line:117,column:27},end:{line:146,column:3}},64:{start:{line:118,column:22},end:{line:118,column:27}},65:{start:{line:120,column:4},end:{line:144,column:5}},66:{start:{line:121,column:6},end:{line:136,column:7}},67:{start:{line:122,column:8},end:{line:127,column:10}},68:{start:{line:125,column:12},end:{line:125,column:83}},69:{start:{line:129,column:8},end:{line:135,column:10}},70:{start:{line:138,column:6},end:{line:143,column:8}},71:{start:{line:145,column:4},end:{line:145,column:46}},72:{start:{line:147,column:25},end:{line:159,column:3}},73:{start:{line:148,column:33},end:{line:148,column:38}},74:{start:{line:149,column:4},end:{line:158,column:5}},75:{start:{line:150,column:6},end:{line:153,column:9}},76:{start:{line:154,column:6},end:{line:154,column:27}},77:{start:{line:155,column:11},end:{line:158,column:5}},78:{start:{line:156,column:6},end:{line:156,column:42}},79:{start:{line:157,column:6},end:{line:157,column:27}},80:{start:{line:160,column:18},end:{line:163,column:3}},81:{start:{line:161,column:33},end:{line:161,column:38}},82:{start:{line:162,column:4},end:{line:162,column:140}},83:{start:{line:164,column:25},end:{line:175,column:3}},84:{start:{line:165,column:33},end:{line:165,column:38}},85:{start:{line:167,column:4},end:{line:173,column:5}},86:{start:{line:168,column:6},end:{line:168,column:67}},87:{start:{line:169,column:11},end:{line:173,column:5}},88:{start:{line:170,column:6},end:{line:170,column:43}},89:{start:{line:172,column:6},end:{line:172,column:65}},90:{start:{line:174,column:4},end:{line:174,column:48}},91:{start:{line:176,column:27},end:{line:214,column:3}},92:{start:{line:177,column:25},end:{line:177,column:62}},93:{start:{line:178,column:22},end:{line:178,column:61}},94:{start:{line:179,column:22},end:{line:179,column:27}},95:{start:{line:181,column:4},end:{line:212,column:5}},96:{start:{line:182,column:6},end:{line:201,column:7}},97:{start:{line:183,column:8},end:{line:190,column:10}},98:{start:{line:188,column:12},end:{line:188,column:106}},99:{start:{line:192,column:8},end:{line:200,column:10}},100:{start:{line:203,column:6},end:{line:211,column:8}},101:{start:{line:213,column:4},end:{line:213,column:46}},102:{start:{line:215,column:32},end:{line:226,column:3}},103:{start:{line:216,column:23},end:{line:224,column:5}},104:{start:{line:225,column:4},end:{line:225,column:48}},105:{start:{line:227,column:24},end:{line:229,column:3}},106:{start:{line:228,column:4},end:{line:228,column:23}},107:{start:{line:230,column:26},end:{line:232,column:3}},108:{start:{line:231,column:4},end:{line:231,column:24}},109:{start:{line:233,column:20},end:{line:233,column:120}},110:{start:{line:235,column:2},end:{line:300,column:3}},111:{start:{line:236,column:4},end:{line:251,column:6}},112:{start:{line:252,column:9},end:{line:300,column:3}},113:{start:{line:253,column:4},end:{line:267,column:6}},114:{start:{line:268,column:9},end:{line:300,column:3}},115:{start:{line:269,column:4},end:{line:283,column:6}},116:{start:{line:285,column:4},end:{line:299,column:6}},117:{start:{line:301,column:2},end:{line:301,column:141}}},fnMap:{0:{name:"isLiteralExpression",decl:{start:{line:9,column:9},end:{line:9,column:28}},loc:{start:{line:9,column:36},end:{line:11,column:1}},line:9},1:{name:"isGetExpression",decl:{start:{line:12,column:9},end:{line:12,column:24}},loc:{start:{line:12,column:32},end:{line:14,column:1}},line:12},2:{name:"isZoomField",decl:{start:{line:15,column:9},end:{line:15,column:20}},loc:{start:{line:15,column:28},end:{line:19,column:1}},line:15},3:{name:"(anonymous_3)",decl:{start:{line:16,column:168},end:{line:16,column:169}},loc:{start:{line:16,column:178},end:{line:18,column:3}},line:16},4:{name:"isIdentityProperty",decl:{start:{line:20,column:9},end:{line:20,column:27}},loc:{start:{line:20,column:35},end:{line:22,column:1}},line:20},5:{name:"isDataStopProperty",decl:{start:{line:23,column:9},end:{line:23,column:27}},loc:{start:{line:23,column:35},end:{line:27,column:1}},line:23},6:{name:"(anonymous_6)",decl:{start:{line:24,column:168},end:{line:24,column:169}},loc:{start:{line:24,column:178},end:{line:26,column:3}},line:24},7:{name:"isDataField",decl:{start:{line:28,column:9},end:{line:28,column:20}},loc:{start:{line:28,column:28},end:{line:30,column:1}},line:28},8:{name:"isPrimative",decl:{start:{line:31,column:9},end:{line:31,column:20}},loc:{start:{line:31,column:28},end:{line:34,column:1}},line:31},9:{name:"isArrayOfPrimatives",decl:{start:{line:35,column:9},end:{line:35,column:28}},loc:{start:{line:35,column:37},end:{line:40,column:1}},line:35},10:{name:"getDataType",decl:{start:{line:41,column:9},end:{line:41,column:20}},loc:{start:{line:41,column:44},end:{line:63,column:1}},line:41},11:{name:"(anonymous_11)",decl:{start:{line:64,column:22},end:{line:64,column:23}},loc:{start:{line:64,column:33},end:{line:302,column:1}},line:64},12:{name:"(anonymous_12)",decl:{start:{line:69,column:18},end:{line:69,column:19}},loc:{start:{line:69,column:24},end:{line:73,column:3}},line:69},13:{name:"(anonymous_13)",decl:{start:{line:74,column:31},end:{line:74,column:32}},loc:{start:{line:74,column:46},end:{line:82,column:3}},line:74},14:{name:"(anonymous_14)",decl:{start:{line:83,column:18},end:{line:83,column:19}},loc:{start:{line:83,column:24},end:{line:99,column:3}},line:83},15:{name:"(anonymous_15)",decl:{start:{line:100,column:27},end:{line:100,column:28}},loc:{start:{line:100,column:33},end:{line:104,column:3}},line:100},16:{name:"(anonymous_16)",decl:{start:{line:105,column:21},end:{line:105,column:22}},loc:{start:{line:105,column:34},end:{line:116,column:3}},line:105},17:{name:"(anonymous_17)",decl:{start:{line:117,column:27},end:{line:117,column:28}},loc:{start:{line:117,column:33},end:{line:146,column:3}},line:117},18:{name:"(anonymous_18)",decl:{start:{line:124,column:33},end:{line:124,column:34}},loc:{start:{line:124,column:43},end:{line:126,column:11}},line:124},19:{name:"(anonymous_19)",decl:{start:{line:147,column:25},end:{line:147,column:26}},loc:{start:{line:147,column:31},end:{line:159,column:3}},line:147},20:{name:"(anonymous_20)",decl:{start:{line:160,column:18},end:{line:160,column:19}},loc:{start:{line:160,column:24},end:{line:163,column:3}},line:160},21:{name:"(anonymous_21)",decl:{start:{line:164,column:25},end:{line:164,column:26}},loc:{start:{line:164,column:31},end:{line:175,column:3}},line:164},22:{name:"(anonymous_22)",decl:{start:{line:176,column:27},end:{line:176,column:28}},loc:{start:{line:176,column:33},end:{line:214,column:3}},line:176},23:{name:"(anonymous_23)",decl:{start:{line:187,column:33},end:{line:187,column:34}},loc:{start:{line:187,column:43},end:{line:189,column:11}},line:187},24:{name:"(anonymous_24)",decl:{start:{line:215,column:32},end:{line:215,column:33}},loc:{start:{line:215,column:38},end:{line:226,column:3}},line:215},25:{name:"(anonymous_25)",decl:{start:{line:227,column:24},end:{line:227,column:25}},loc:{start:{line:227,column:30},end:{line:229,column:3}},line:227},26:{name:"(anonymous_26)",decl:{start:{line:230,column:26},end:{line:230,column:27}},loc:{start:{line:230,column:32},end:{line:232,column:3}},line:230}},branchMap:{0:{loc:{start:{line:10,column:9},end:{line:10,column:77}},type:"binary-expr",locations:[{start:{line:10,column:9},end:{line:10,column:29}},{start:{line:10,column:33},end:{line:10,column:51}},{start:{line:10,column:55},end:{line:10,column:77}}],line:10},1:{loc:{start:{line:13,column:9},end:{line:13,column:73}},type:"binary-expr",locations:[{start:{line:13,column:9},end:{line:13,column:29}},{start:{line:13,column:33},end:{line:13,column:51}},{start:{line:13,column:55},end:{line:13,column:73}}],line:13},2:{loc:{start:{line:16,column:9},end:{line:18,column:4}},type:"binary-expr",locations:[{start:{line:16,column:9},end:{line:16,column:34}},{start:{line:16,column:38},end:{line:16,column:49}},{start:{line:16,column:53},end:{line:16,column:90}},{start:{line:16,column:94},end:{line:16,column:120}},{start:{line:16,column:124},end:{line:16,column:146}},{start:{line:16,column:150},end:{line:18,column:4}}],line:16},3:{loc:{start:{line:17,column:11},end:{line:17,column:51}},type:"binary-expr",locations:[{start:{line:17,column:11},end:{line:17,column:30}},{start:{line:17,column:34},end:{line:17,column:51}}],line:17},4:{loc:{start:{line:21,column:9},end:{line:21,column:122}},type:"binary-expr",locations:[{start:{line:21,column:9},end:{line:21,column:34}},{start:{line:21,column:38},end:{line:21,column:63}},{start:{line:21,column:67},end:{line:21,column:122}}],line:21},5:{loc:{start:{line:24,column:9},end:{line:26,column:4}},type:"binary-expr",locations:[{start:{line:24,column:9},end:{line:24,column:34}},{start:{line:24,column:38},end:{line:24,column:49}},{start:{line:24,column:53},end:{line:24,column:90}},{start:{line:24,column:94},end:{line:24,column:116}},{start:{line:24,column:120},end:{line:24,column:146}},{start:{line:24,column:150},end:{line:26,column:4}}],line:24},6:{loc:{start:{line:25,column:11},end:{line:25,column:82}},type:"binary-expr",locations:[{start:{line:25,column:11},end:{line:25,column:30}},{start:{line:25,column:34},end:{line:25,column:51}},{start:{line:25,column:55},end:{line:25,column:82}}],line:25},7:{loc:{start:{line:29,column:9},end:{line:29,column:63}},type:"binary-expr",locations:[{start:{line:29,column:9},end:{line:29,column:34}},{start:{line:29,column:38},end:{line:29,column:63}}],line:29},8:{loc:{start:{line:36,column:2},end:{line:38,column:3}},type:"if",locations:[{start:{line:36,column:2},end:{line:38,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:36},9:{loc:{start:{line:41,column:28},end:{line:41,column:42}},type:"default-arg",locations:[{start:{line:41,column:40},end:{line:41,column:42}}],line:41},10:{loc:{start:{line:42,column:2},end:{line:62,column:3}},type:"if",locations:[{start:{line:42,column:2},end:{line:62,column:3}},{start:{line:44,column:9},end:{line:62,column:3}}],line:42},11:{loc:{start:{line:44,column:9},end:{line:62,column:3}},type:"if",locations:[{start:{line:44,column:9},end:{line:62,column:3}},{start:{line:46,column:9},end:{line:62,column:3}}],line:44},12:{loc:{start:{line:46,column:9},end:{line:62,column:3}},type:"if",locations:[{start:{line:46,column:9},end:{line:62,column:3}},{start:{line:48,column:9},end:{line:62,column:3}}],line:46},13:{loc:{start:{line:46,column:13},end:{line:46,column:69}},type:"binary-expr",locations:[{start:{line:46,column:13},end:{line:46,column:39}},{start:{line:46,column:43},end:{line:46,column:69}}],line:46},14:{loc:{start:{line:48,column:9},end:{line:62,column:3}},type:"if",locations:[{start:{line:48,column:9},end:{line:62,column:3}},{start:{line:50,column:9},end:{line:62,column:3}}],line:48},15:{loc:{start:{line:48,column:13},end:{line:48,column:75}},type:"binary-expr",locations:[{start:{line:48,column:13},end:{line:48,column:45}},{start:{line:48,column:49},end:{line:48,column:75}}],line:48},16:{loc:{start:{line:50,column:9},end:{line:62,column:3}},type:"if",locations:[{start:{line:50,column:9},end:{line:62,column:3}},{start:{line:52,column:9},end:{line:62,column:3}}],line:50},17:{loc:{start:{line:52,column:9},end:{line:62,column:3}},type:"if",locations:[{start:{line:52,column:9},end:{line:62,column:3}},{start:{line:54,column:9},end:{line:62,column:3}}],line:52},18:{loc:{start:{line:54,column:9},end:{line:62,column:3}},type:"if",locations:[{start:{line:54,column:9},end:{line:62,column:3}},{start:{line:56,column:9},end:{line:62,column:3}}],line:54},19:{loc:{start:{line:56,column:9},end:{line:62,column:3}},type:"if",locations:[{start:{line:56,column:9},end:{line:62,column:3}},{start:{line:58,column:9},end:{line:62,column:3}}],line:56},20:{loc:{start:{line:58,column:9},end:{line:62,column:3}},type:"if",locations:[{start:{line:58,column:9},end:{line:62,column:3}},{start:{line:60,column:9},end:{line:62,column:3}}],line:58},21:{loc:{start:{line:70,column:4},end:{line:72,column:5}},type:"if",locations:[{start:{line:70,column:4},end:{line:72,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:70},22:{loc:{start:{line:75,column:4},end:{line:77,column:5}},type:"if",locations:[{start:{line:75,column:4},end:{line:77,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:75},23:{loc:{start:{line:78,column:4},end:{line:80,column:5}},type:"if",locations:[{start:{line:78,column:4},end:{line:80,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:78},24:{loc:{start:{line:86,column:4},end:{line:93,column:5}},type:"if",locations:[{start:{line:86,column:4},end:{line:93,column:5}},{start:{line:91,column:11},end:{line:93,column:5}}],line:86},25:{loc:{start:{line:112,column:4},end:{line:114,column:5}},type:"if",locations:[{start:{line:112,column:4},end:{line:114,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:112},26:{loc:{start:{line:120,column:4},end:{line:144,column:5}},type:"if",locations:[{start:{line:120,column:4},end:{line:144,column:5}},{start:{line:137,column:11},end:{line:144,column:5}}],line:120},27:{loc:{start:{line:121,column:6},end:{line:136,column:7}},type:"if",locations:[{start:{line:121,column:6},end:{line:136,column:7}},{start:{line:128,column:13},end:{line:136,column:7}}],line:121},28:{loc:{start:{line:125,column:34},end:{line:125,column:81}},type:"binary-expr",locations:[{start:{line:125,column:34},end:{line:125,column:41}},{start:{line:125,column:45},end:{line:125,column:81}}],line:125},29:{loc:{start:{line:140,column:14},end:{line:140,column:59}},type:"binary-expr",locations:[{start:{line:140,column:14},end:{line:140,column:19}},{start:{line:140,column:23},end:{line:140,column:59}}],line:140},30:{loc:{start:{line:141,column:15},end:{line:141,column:60}},type:"binary-expr",locations:[{start:{line:141,column:15},end:{line:141,column:20}},{start:{line:141,column:24},end:{line:141,column:60}}],line:141},31:{loc:{start:{line:149,column:4},end:{line:158,column:5}},type:"if",locations:[{start:{line:149,column:4},end:{line:158,column:5}},{start:{line:155,column:11},end:{line:158,column:5}}],line:149},32:{loc:{start:{line:155,column:11},end:{line:158,column:5}},type:"if",locations:[{start:{line:155,column:11},end:{line:158,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:155},33:{loc:{start:{line:162,column:11},end:{line:162,column:139}},type:"binary-expr",locations:[{start:{line:162,column:11},end:{line:162,column:33}},{start:{line:162,column:37},end:{line:162,column:63}},{start:{line:162,column:67},end:{line:162,column:85}},{start:{line:162,column:89},end:{line:162,column:109}},{start:{line:162,column:113},end:{line:162,column:139}}],line:162},34:{loc:{start:{line:167,column:4},end:{line:173,column:5}},type:"if",locations:[{start:{line:167,column:4},end:{line:173,column:5}},{start:{line:169,column:11},end:{line:173,column:5}}],line:167},35:{loc:{start:{line:167,column:8},end:{line:167,column:53}},type:"binary-expr",locations:[{start:{line:167,column:8},end:{line:167,column:33}},{start:{line:167,column:37},end:{line:167,column:53}}],line:167},36:{loc:{start:{line:169,column:11},end:{line:173,column:5}},type:"if",locations:[{start:{line:169,column:11},end:{line:173,column:5}},{start:{line:171,column:11},end:{line:173,column:5}}],line:169},37:{loc:{start:{line:172,column:31},end:{line:172,column:63}},type:"binary-expr",locations:[{start:{line:172,column:31},end:{line:172,column:36}},{start:{line:172,column:40},end:{line:172,column:63}}],line:172},38:{loc:{start:{line:178,column:22},end:{line:178,column:61}},type:"cond-expr",locations:[{start:{line:178,column:55},end:{line:178,column:57}},{start:{line:178,column:60},end:{line:178,column:61}}],line:178},39:{loc:{start:{line:181,column:4},end:{line:212,column:5}},type:"if",locations:[{start:{line:181,column:4},end:{line:212,column:5}},{start:{line:202,column:11},end:{line:212,column:5}}],line:181},40:{loc:{start:{line:182,column:6},end:{line:201,column:7}},type:"if",locations:[{start:{line:182,column:6},end:{line:201,column:7}},{start:{line:191,column:13},end:{line:201,column:7}}],line:182},41:{loc:{start:{line:188,column:57},end:{line:188,column:104}},type:"binary-expr",locations:[{start:{line:188,column:57},end:{line:188,column:64}},{start:{line:188,column:68},end:{line:188,column:104}}],line:188},42:{loc:{start:{line:208,column:42},end:{line:208,column:93}},type:"binary-expr",locations:[{start:{line:208,column:42},end:{line:208,column:53}},{start:{line:208,column:57},end:{line:208,column:93}}],line:208},43:{loc:{start:{line:209,column:43},end:{line:209,column:94}},type:"binary-expr",locations:[{start:{line:209,column:43},end:{line:209,column:54}},{start:{line:209,column:58},end:{line:209,column:94}}],line:209},44:{loc:{start:{line:233,column:20},end:{line:233,column:120}},type:"cond-expr",locations:[{start:{line:233,column:62},end:{line:233,column:89}},{start:{line:233,column:92},end:{line:233,column:120}}],line:233},45:{loc:{start:{line:235,column:2},end:{line:300,column:3}},type:"if",locations:[{start:{line:235,column:2},end:{line:300,column:3}},{start:{line:252,column:9},end:{line:300,column:3}}],line:235},46:{loc:{start:{line:252,column:9},end:{line:300,column:3}},type:"if",locations:[{start:{line:252,column:9},end:{line:300,column:3}},{start:{line:268,column:9},end:{line:300,column:3}}],line:252},47:{loc:{start:{line:268,column:9},end:{line:300,column:3}},type:"if",locations:[{start:{line:268,column:9},end:{line:300,column:3}},{start:{line:284,column:9},end:{line:300,column:3}}],line:268}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0,87:0,88:0,89:0,90:0,91:0,92:0,93:0,94:0,95:0,96:0,97:0,98:0,99:0,100:0,101:0,102:0,103:0,104:0,105:0,106:0,107:0,108:0,109:0,110:0,111:0,112:0,113:0,114:0,115:0,116:0,117:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0},b:{0:[0,0,0],1:[0,0,0],2:[0,0,0,0,0,0],3:[0,0],4:[0,0,0],5:[0,0,0,0,0,0],6:[0,0,0],7:[0,0],8:[0,0],9:[0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0],26:[0,0],27:[0,0],28:[0,0],29:[0,0],30:[0,0],31:[0,0],32:[0,0],33:[0,0,0,0,0],34:[0,0],35:[0,0],36:[0,0],37:[0,0],38:[0,0],39:[0,0],40:[0,0],41:[0,0],42:[0,0],43:[0,0],44:[0,0],45:[0,0],46:[0,0],47:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldFunction.tsx"],names:[],mappings:"AAiVM;AAjVN,OAAO,WAAW;AAElB,OAAO,kBAAkB;AACzB,OAAO,kBAAiC;AACxC,OAAO,kBAAkB;AACzB,OAAO,wBAAwB;AAC/B,SAAQ,YAAY,qBAAoB;AACxC,SAAQ,2BAA0B;AAIlC,SAAS,oBAAoB,OAAY;AACvC,SAAQ,MAAM,QAAQ,KAAK,KAAK,MAAM,WAAW,KAAK,MAAM,CAAC,MAAM;AACrE;AAEA,SAAS,gBAAgB,OAAY;AACnC,SACE,MAAM,QAAQ,KAAK,KACnB,MAAM,WAAW,KACjB,MAAM,CAAC,MAAM;AAEjB;AAEA,SAAS,YAAY,OAAY;AAC/B,SACE,OAAO,UAAW,YAClB,MAAM,SACN,OAAO,MAAM,aAAc,eAC3B,MAAM,QAAQ,MAAM,KAAK,KACzB,MAAM,MAAM,SAAS,KACrB,MAAM,MAAM,MAAM,CAAC,SAAe;AAChC,WACE,MAAM,QAAQ,IAAI,KAClB,KAAK,WAAW;AAAA,EAEpB,CAAC;AAEL;AAEA,SAAS,mBAAmB,OAAY;AACtC,SACE,OAAO,UAAW,YAClB,MAAM,SAAS,cACf,OAAO,UAAU,eAAe,KAAK,OAAO,UAAU;AAE1D;AAEA,SAAS,mBAAmB,OAAY;AACtC,SACE,OAAO,UAAW,YAClB,MAAM,SACN,OAAO,MAAM,aAAc,eAC3B,MAAM,MAAM,SAAS,KACrB,MAAM,QAAQ,MAAM,KAAK,KACzB,MAAM,MAAM,MAAM,CAAC,SAAe;AAChC,WACE,MAAM,QAAQ,IAAI,KAClB,KAAK,WAAW,KAChB,OAAO,KAAK,CAAC,MAAO;AAAA,EAExB,CAAC;AAEL;AAEA,SAAS,YAAY,OAAY;AAC/B,SACE,mBAAmB,KAAK,KACxB,mBAAmB,KAAK;AAE5B;AAEA,SAAS,YAAY,OAAgD;AACnE,QAAM,QAAQ,CAAC,UAAU,WAAW,QAAQ;AAC5C,SAAO,MAAM,SAAS,OAAO,KAAM;AACrC;AAEA,SAAS,oBAAoB,QAAyD;AACpF,MAAI,MAAM,QAAQ,MAAM,GAAG;AACzB,WAAO,OAAO,MAAM,WAAW;AAAA,EACjC;AACA,SAAO;AACT;AAEA,SAAS,YAAY,OAAY,YAAU,CAAC,GAAU;AACpD,MAAI,UAAU,QAAW;AACvB,WAAO;AAAA,EACT,WACS,YAAY,KAAK,GAAG;AAC3B,WAAO;AAAA,EACT,WACS,UAAU,SAAS,WAAW,oBAAoB,KAAK,GAAG;AACjE,WAAO;AAAA,EACT,WACS,UAAU,SAAS,iBAAiB,oBAAoB,KAAK,GAAG;AACvE,WAAO;AAAA,EACT,WACS,UAAU,SAAS,cAAc;AACxC,WAAO;AAAA,EACT,WACS,UAAU,SAAS,WAAW;AACrC,WAAO;AAAA,EACT,WACS,UAAU,SAAS,kCAAkC;AAC5D,WAAO;AAAA,EACT,WACS,YAAY,KAAK,GAAG;AAC3B,WAAO;AAAA,EACT,WACS,YAAY,KAAK,GAAG;AAC3B,WAAO;AAAA,EACT,OACK;AACH,WAAO;AAAA,EACT;AACF;AAgBA,MAAM,gBAA8C,CAAC,UAAU;AAC7D,QAAM,CAAC,UAAU,WAAW,IAAI,MAAM;AAAA,IACpC,YAAY,MAAM,OAAO,MAAM,SAAS;AAAA,EAC1C;AACA,QAAM,CAAC,WAAW,YAAY,IAAI,MAAM,SAAS,KAAK;AAEtD,QAAM,UAAU,MAAM;AACpB,QAAI,CAAC,WAAW;AACd,kBAAY,YAAY,MAAM,OAAO,MAAM,SAAS,CAAC;AAAA,IACvD;AAAA,EACF,GAAG,CAAC,MAAM,OAAO,MAAM,WAAW,SAAS,CAAC;AAE5C,QAAM,uBAAuB,CAAC,cAAmB;AAC/C,QAAI,UAAU,WAAW,cAAc;AACrC,aAAO;AAAA,IACT;AACA,QAAI,UAAU,SAAS,UAAU;AAC/B,aAAO;AAAA,IACT;AACA,WAAO;AAAA,EACT;AAEA,QAAM,UAAU,MAAM;AACpB,UAAM,QAAQ,MAAM,MAAM,MAAM,MAAM,CAAC;AACvC,UAAM,WAAW,MAAM,MAAM,SAAS,CAAC;AACvC,QAAI,OAAO,SAAS,CAAC,MAAM,UAAU;AACnC,YAAM,KAAK;AAAA,QACT,EAAE,MAAM,SAAS,CAAC,EAAE,OAAO,GAAG,OAAO,SAAS,CAAC,EAAE,MAAM;AAAA,QACvD,SAAS,CAAC;AAAA,MACZ,CAAC;AAAA,IACH,OAAO;AACL,YAAM,KAAK,CAAC,SAAS,CAAC,IAAI,GAAG,SAAS,CAAC,CAAC,CAAC;AAAA,IAC3C;AAEA,UAAM,eAAe;AAAA,MACnB,GAAG,MAAM;AAAA,MACT;AAAA,IACF;AAEA,UAAM,SAAS,MAAM,WAAW,YAAY;AAAA,EAC9C;AAEA,QAAM,mBAAmB,MAAM;AAC7B,UAAM,EAAE,WAAW,UAAU,IAAI;AACjC,UAAM,SAAS,WAAW,UAAU,OAAO;AAC3C,gBAAY,OAAO;AAAA,EACrB;AAEA,QAAM,aAAa,CAAC,YAAoB;AACtC,UAAM,QAAQ,MAAM,MAAM,MAAM,MAAM,CAAC;AACvC,UAAM,OAAO,SAAS,CAAC;AAEvB,QAAI,eAAoB;AAAA,MACtB,GAAG,MAAM;AAAA,MACT;AAAA,IACF;AAEA,QAAI,MAAM,WAAW,GAAG;AACtB,qBAAe,MAAM,CAAC,EAAE,CAAC;AAAA,IAC3B;AAEA,UAAM,SAAS,MAAM,WAAW,YAAY;AAAA,EAC9C;AAEA,QAAM,mBAAmB,MAAM;AAC7B,UAAM,EAAE,MAAM,IAAI;AAElB,QAAI;AACJ,QAAI,OAAO,UAAU,UAAU;AAC7B,UAAI,MAAM,OAAO;AACf,mBAAW;AAAA,UACT,MAAM,MAAM;AAAA,UACZ,OAAO,MAAM,MAAM,IAAI,CAAC,SAAe;AACrC,mBAAO,CAAC,KAAK,CAAC,EAAE,MAAM,KAAK,CAAC,KAAK,oBAAoB,MAAM,SAAS,CAAC;AAAA,UACvE,CAAC;AAAA,QACH;AAAA,MACF,OAAO;AACL,mBAAW;AAAA,UACT,MAAM,MAAM;AAAA,UACZ,OAAO;AAAA,YACL,CAAC,GAAG,oBAAoB,MAAM,SAAS,CAAC;AAAA,YACxC,CAAC,IAAI,oBAAoB,MAAM,SAAS,CAAC;AAAA,UAC3C;AAAA,QACF;AAAA,MACF;AAAA,IACF,OAAO;AACL,iBAAW;AAAA,QACT,OAAO;AAAA,UACL,CAAC,GAAG,SAAS,oBAAoB,MAAM,SAAS,CAAC;AAAA,UACjD,CAAC,IAAI,SAAS,oBAAoB,MAAM,SAAS,CAAC;AAAA,QACpD;AAAA,MACF;AAAA,IACF;AAEA,UAAM,SAAS,MAAM,WAAW,QAAQ;AAAA,EAC1C;AAEA,QAAM,iBAAiB,MAAM;AAC3B,UAAM,EAAE,OAAO,UAAU,IAAI;AAE7B,QAAI,gBAAgB,KAAK,GAAG;AAC1B,YAAM,SAAS,WAAW;AAAA,QACxB,MAAM;AAAA,QACN,UAAU,MAAM,CAAC;AAAA,MACnB,CAAC;AACD,kBAAY,OAAO;AAAA,IACrB,WAAW,oBAAoB,KAAK,GAAG;AACrC,YAAM,SAAS,WAAW,MAAM,CAAC,CAAC;AAClC,kBAAY,OAAO;AAAA,IACrB;AAAA,EACF;AAEA,QAAM,UAAU,MAAM;AACpB,UAAM,EAAE,OAAO,UAAU,IAAI;AAC7B,WACE,gBAAgB,KAAK,KACrB,oBAAoB,KAAK,KACzB,YAAY,KAAK,KAChB,MAAM,QAAQ,KAAK,KAAK,UAAU,SAAS;AAAA,EAEhD;AAEA,QAAM,iBAAiB,MAAM;AAC3B,UAAM,EAAE,OAAO,UAAU,IAAI;AAC7B,QAAI;AAEJ,QAAI,OAAO,UAAU,YAAY,WAAW,OAAO;AACjD,mBAAa,cAAc,gBAAgB,OAAO,SAAS;AAAA,IAC7D,WAAW,mBAAmB,KAAK,GAAG;AACpC,mBAAa,CAAC,OAAO,MAAM,QAAQ;AAAA,IACrC,OAAO;AACL,mBAAa,CAAC,WAAW,SAAS,MAAM,UAAU,OAAO;AAAA,IAC3D;AACA,UAAM,SAAS,MAAM,WAAW,UAAU;AAAA,EAC5C;AAEA,QAAM,mBAAmB,MAAM;AAC7B,UAAM,eAAe,qBAAqB,MAAM,SAAS;AACzD,UAAM,YAAY,iBAAiB,gBAAgB,KAAK;AACxD,UAAM,EAAE,MAAM,IAAI;AAClB,QAAI;AAEJ,QAAI,OAAO,UAAU,UAAU;AAC7B,UAAI,MAAM,OAAO;AACf,mBAAW;AAAA,UACT,UAAU;AAAA,UACV,MAAM;AAAA,UACN,MAAM,MAAM;AAAA,UACZ,OAAO,MAAM,MAAM,IAAI,CAAC,SAAe;AACrC,mBAAO,CAAC,EAAE,MAAM,KAAK,CAAC,GAAG,OAAO,UAAU,GAAG,KAAK,CAAC,KAAK,oBAAoB,MAAM,SAAS,CAAC;AAAA,UAC9F,CAAC;AAAA,QACH;AAAA,MACF,OAAO;AACL,mBAAW;AAAA,UACT,UAAU;AAAA,UACV,MAAM;AAAA,UACN,MAAM,MAAM;AAAA,UACZ,OAAO;AAAA,YACL,CAAC,EAAE,MAAM,GAAG,OAAO,UAAU,GAAG,oBAAoB,MAAM,SAAS,CAAC;AAAA,YACpE,CAAC,EAAE,MAAM,IAAI,OAAO,UAAU,GAAG,oBAAoB,MAAM,SAAS,CAAC;AAAA,UACvE;AAAA,QACF;AAAA,MACF;AAAA,IACF,OAAO;AACL,iBAAW;AAAA,QACT,UAAU;AAAA,QACV,MAAM;AAAA,QACN,MAAM,MAAM;AAAA,QACZ,OAAO;AAAA,UACL,CAAC,EAAE,MAAM,GAAG,OAAO,UAAU,GAAG,MAAM,SAAS,oBAAoB,MAAM,SAAS,CAAC;AAAA,UACnF,CAAC,EAAE,MAAM,IAAI,OAAO,UAAU,GAAG,MAAM,SAAS,oBAAoB,MAAM,SAAS,CAAC;AAAA,QACtF;AAAA,MACF;AAAA,IACF;AAEA,UAAM,SAAS,MAAM,WAAW,QAAQ;AAAA,EAC1C;AAEA,QAAM,wBAAwB,MAAM;AAClC,UAAM,aAAa;AAAA,MACjB;AAAA,MACA,CAAC,QAAQ;AAAA,MACT,CAAC,WAAW;AAAA,MACZ;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IACF;AAEA,UAAM,SAAS,MAAM,WAAW,UAAU;AAAA,EAC5C;AAEA,QAAM,gBAAgB,MAAM;AAC1B,iBAAa,IAAI;AAAA,EACnB;AAEA,QAAM,kBAAkB,MAAM;AAC5B,iBAAa,KAAK;AAAA,EACpB;AAEA,QAAM,YACJ,MAAM,UAAU,YAAY,MAAM,QAAQ,8BAA8B;AAE1E,MAAI;AAEJ,MAAI,aAAa,cAAc;AAC7B,gBACE;AAAA,MAAC;AAAA;AAAA,QACC,QAAQ,MAAM;AAAA,QACd,UAAU,MAAM,SAAS,KAAK,MAAM,MAAM,SAAS;AAAA,QACnD;AAAA,QACA,QAAQ;AAAA,QACR,UAAU;AAAA,QACV,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,OAAO,MAAM;AAAA,QACb,SAAS;AAAA,QACT,QAAQ;AAAA;AAAA,IACV;AAAA,EAEJ,WAAW,aAAa,iBAAiB;AACvC,gBACE;AAAA,MAAC;AAAA;AAAA,QACC,QAAQ,MAAM;AAAA,QACd,UAAU,MAAM,SAAS,KAAK,IAAI;AAAA,QAClC,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,OAAO,MAAM;AAAA,QACb,cAAc;AAAA,QACd,WAAW;AAAA,QACX,wBAAwB;AAAA,QACxB,mBAAmB;AAAA;AAAA,IACrB;AAAA,EAEJ,WAAW,aAAa,iBAAiB;AACvC,gBACE;AAAA,MAAC;AAAA;AAAA,QACC,QAAQ,MAAM;AAAA,QACd,UAAU,MAAM,SAAS,KAAK,IAAI;AAAA,QAClC,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,OAAO,MAAM;AAAA,QACb,cAAc;AAAA,QACd,WAAW;AAAA,QACX,wBAAwB;AAAA,QACxB,mBAAmB;AAAA;AAAA,IACrB;AAAA,EAEJ,OAAO;AACL,gBACE;AAAA,MAAC;AAAA;AAAA,QACC,QAAQ,MAAM;AAAA,QACd,UAAU,MAAM,SAAS,KAAK,IAAI;AAAA,QAClC,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,OAAO,MAAM;AAAA,QACb,aAAa;AAAA,QACb,aAAa;AAAA,QACb,mBAAmB;AAAA,QACnB,kBAAkB;AAAA;AAAA,IACpB;AAAA,EAEJ;AAEA,SACE,oBAAC,SAAI,WAAW,WAAW,eAAa,0BAA0B,MAAM,WACrE,qBACH;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"cec93a709e0799aecc929100cb853febe363652d"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return ct=function(){return s},s}ct();function GV(n){return ct().f[0]++,ct().s[0]++,ct().b[0][0]++,Array.isArray(n)&&(ct().b[0][1]++,n.length===2)&&(ct().b[0][2]++,n[0]==="literal")}function WV(n){return ct().f[1]++,ct().s[1]++,ct().b[1][0]++,Array.isArray(n)&&(ct().b[1][1]++,n.length===2)&&(ct().b[1][2]++,n[0]==="get")}function o9e(n){return ct().f[2]++,ct().s[2]++,ct().b[2][0]++,typeof n=="object"&&(ct().b[2][1]++,n.stops)&&(ct().b[2][2]++,typeof n.property>"u")&&(ct().b[2][3]++,Array.isArray(n.stops))&&(ct().b[2][4]++,n.stops.length>1)&&(ct().b[2][5]++,n.stops.every(e=>(ct().f[3]++,ct().s[3]++,ct().b[3][0]++,Array.isArray(e)&&(ct().b[3][1]++,e.length===2))))}function goe(n){return ct().f[4]++,ct().s[4]++,ct().b[4][0]++,typeof n=="object"&&(ct().b[4][1]++,n.type==="identity")&&(ct().b[4][2]++,Object.prototype.hasOwnProperty.call(n,"property"))}function s9e(n){return ct().f[5]++,ct().s[5]++,ct().b[5][0]++,typeof n=="object"&&(ct().b[5][1]++,n.stops)&&(ct().b[5][2]++,typeof n.property<"u")&&(ct().b[5][3]++,n.stops.length>1)&&(ct().b[5][4]++,Array.isArray(n.stops))&&(ct().b[5][5]++,n.stops.every(e=>(ct().f[6]++,ct().s[6]++,ct().b[6][0]++,Array.isArray(e)&&(ct().b[6][1]++,e.length===2)&&(ct().b[6][2]++,typeof e[0]=="object"))))}function a9e(n){return ct().f[7]++,ct().s[7]++,ct().b[7][0]++,goe(n)||(ct().b[7][1]++,s9e(n))}function KK(n){ct().f[8]++;const e=(ct().s[8]++,["string","boolean","number"]);return ct().s[9]++,e.includes(typeof n)}function QV(n){return ct().f[9]++,ct().s[10]++,Array.isArray(n)?(ct().b[8][0]++,ct().s[11]++,n.every(KK)):(ct().b[8][1]++,ct().s[12]++,!1)}function YV(n,e=(ct().b[9][0]++,{})){return ct().f[10]++,ct().s[13]++,n===void 0?(ct().b[10][0]++,ct().s[14]++,"value"):(ct().b[10][1]++,ct().s[15]++,KK(n)?(ct().b[11][0]++,ct().s[16]++,"value"):(ct().b[11][1]++,ct().s[17]++,ct().b[13][0]++,e.type==="array"&&(ct().b[13][1]++,QV(n))?(ct().b[12][0]++,ct().s[18]++,"value"):(ct().b[12][1]++,ct().s[19]++,ct().b[15][0]++,e.type==="numberArray"&&(ct().b[15][1]++,QV(n))?(ct().b[14][0]++,ct().s[20]++,"value"):(ct().b[14][1]++,ct().s[21]++,e.type==="colorArray"?(ct().b[16][0]++,ct().s[22]++,"value"):(ct().b[16][1]++,ct().s[23]++,e.type==="padding"?(ct().b[17][0]++,ct().s[24]++,"value"):(ct().b[17][1]++,ct().s[25]++,e.type==="variableAnchorOffsetCollection"?(ct().b[18][0]++,ct().s[26]++,"value"):(ct().b[18][1]++,ct().s[27]++,o9e(n)?(ct().b[19][0]++,ct().s[28]++,"zoom_function"):(ct().b[19][1]++,ct().s[29]++,a9e(n)?(ct().b[20][0]++,ct().s[30]++,"data_function"):(ct().b[20][1]++,ct().s[31]++,"expression")))))))))}ct().s[32]++;const l9e=n=>{ct().f[11]++;const[e,t]=(ct().s[33]++,On.useState(YV(n.value,n.fieldSpec))),[i,r]=(ct().s[34]++,On.useState(!1));ct().s[35]++,On.useEffect(()=>{ct().f[12]++,ct().s[36]++,i?ct().b[21][1]++:(ct().b[21][0]++,ct().s[37]++,t(YV(n.value,n.fieldSpec)))},[n.value,n.fieldSpec,i]),ct().s[38]++;const o=V=>(ct().f[13]++,ct().s[39]++,V.expression.interpolated?(ct().b[22][0]++,ct().s[40]++,"exponential"):(ct().b[22][1]++,ct().s[41]++,V.type==="number"?(ct().b[23][0]++,ct().s[42]++,"interval"):(ct().b[23][1]++,ct().s[43]++,"categorical")));ct().s[44]++;const s=()=>{ct().f[14]++;const V=(ct().s[45]++,n.value.stops.slice(0)),H=(ct().s[46]++,V[V.length-1]);ct().s[47]++,typeof H[0]=="object"?(ct().b[24][0]++,ct().s[48]++,V.push([{zoom:H[0].zoom+1,value:H[0].value},H[1]])):(ct().b[24][1]++,ct().s[49]++,V.push([H[0]+1,H[1]]));const X=(ct().s[50]++,{...n.value,stops:V});ct().s[51]++,n.onChange(n.fieldName,X)};ct().s[52]++;const a=()=>{ct().f[15]++;const{fieldSpec:V,fieldName:H}=(ct().s[53]++,n);ct().s[54]++,n.onChange(H,V.default),ct().s[55]++,t("value")};ct().s[56]++;const c=V=>{ct().f[16]++;const H=(ct().s[57]++,n.value.stops.slice(0));ct().s[58]++,H.splice(V,1);let X=(ct().s[59]++,{...n.value,stops:H});ct().s[60]++,H.length===1?(ct().b[25][0]++,ct().s[61]++,X=H[0][1]):ct().b[25][1]++,ct().s[62]++,n.onChange(n.fieldName,X)};ct().s[63]++;const h=()=>{ct().f[17]++;const{value:V}=(ct().s[64]++,n);let H;ct().s[65]++,typeof V=="object"?(ct().b[26][0]++,ct().s[66]++,V.stops?(ct().b[27][0]++,ct().s[67]++,H={base:V.base,stops:V.stops.map(X=>(ct().f[18]++,ct().s[68]++,[X[0].zoom,(ct().b[28][0]++,X[1]||(ct().b[28][1]++,Wf(n.fieldSpec)))]))}):(ct().b[27][1]++,ct().s[69]++,H={base:V.base,stops:[[6,Wf(n.fieldSpec)],[10,Wf(n.fieldSpec)]]})):(ct().b[26][1]++,ct().s[70]++,H={stops:[[6,(ct().b[29][0]++,V||(ct().b[29][1]++,Wf(n.fieldSpec)))],[10,(ct().b[30][0]++,V||(ct().b[30][1]++,Wf(n.fieldSpec)))]]}),ct().s[71]++,n.onChange(n.fieldName,H)};ct().s[72]++;const m=()=>{ct().f[19]++;const{value:V,fieldName:H}=(ct().s[73]++,n);ct().s[74]++,WV(V)?(ct().b[31][0]++,ct().s[75]++,n.onChange(H,{type:"identity",property:V[1]}),ct().s[76]++,t("value")):(ct().b[31][1]++,ct().s[77]++,GV(V)?(ct().b[32][0]++,ct().s[78]++,n.onChange(H,V[1]),ct().s[79]++,t("value")):ct().b[32][1]++)};ct().s[80]++;const v=()=>{ct().f[20]++;const{value:V,fieldSpec:H}=(ct().s[81]++,n);return ct().s[82]++,ct().b[33][0]++,WV(V)||(ct().b[33][1]++,GV(V))||(ct().b[33][2]++,KK(V))||(ct().b[33][3]++,Array.isArray(V)&&(ct().b[33][4]++,H.type==="array"))};ct().s[83]++;const x=()=>{ct().f[21]++;const{value:V,fieldSpec:H}=(ct().s[84]++,n);let X;ct().s[85]++,ct().b[35][0]++,typeof V=="object"&&(ct().b[35][1]++,"stops"in V)?(ct().b[34][0]++,ct().s[86]++,X=bAe.convertFunction(V,H)):(ct().b[34][1]++,ct().s[87]++,goe(V)?(ct().b[36][0]++,ct().s[88]++,X=["get",V.property]):(ct().b[36][1]++,ct().s[89]++,X=["literal",(ct().b[37][0]++,V||(ct().b[37][1]++,n.fieldSpec.default))])),ct().s[90]++,n.onChange(n.fieldName,X)};ct().s[91]++;const E=()=>{ct().f[22]++;const V=(ct().s[92]++,o(n.fieldSpec)),H=(ct().s[93]++,V==="categorical"?(ct().b[38][0]++,""):(ct().b[38][1]++,0)),{value:X}=(ct().s[94]++,n);let Z;ct().s[95]++,typeof X=="object"?(ct().b[39][0]++,ct().s[96]++,X.stops?(ct().b[40][0]++,ct().s[97]++,Z={property:"",type:V,base:X.base,stops:X.stops.map(G=>(ct().f[23]++,ct().s[98]++,[{zoom:G[0],value:H},(ct().b[41][0]++,G[1]||(ct().b[41][1]++,Wf(n.fieldSpec)))]))}):(ct().b[40][1]++,ct().s[99]++,Z={property:"",type:V,base:X.base,stops:[[{zoom:6,value:H},Wf(n.fieldSpec)],[{zoom:10,value:H},Wf(n.fieldSpec)]]})):(ct().b[39][1]++,ct().s[100]++,Z={property:"",type:V,base:X.base,stops:[[{zoom:6,value:H},(ct().b[42][0]++,n.value||(ct().b[42][1]++,Wf(n.fieldSpec)))],[{zoom:10,value:H},(ct().b[43][0]++,n.value||(ct().b[43][1]++,Wf(n.fieldSpec)))]]}),ct().s[101]++,n.onChange(n.fieldName,Z)};ct().s[102]++;const D=()=>{ct().f[24]++;const V=(ct().s[103]++,["interpolate",["linear"],["elevation"],0,"black",2e3,"white"]);ct().s[104]++,n.onChange(n.fieldName,V)};ct().s[105]++;const P=()=>{ct().f[25]++,ct().s[106]++,r(!0)};ct().s[107]++;const F=()=>{ct().f[26]++,ct().s[108]++,r(!1)},W=(ct().s[109]++,n.fieldSpec.default===n.value?(ct().b[44][0]++,"maputnik-default-property"):(ct().b[44][1]++,"maputnik-modified-property"));let q;return ct().s[110]++,e==="expression"?(ct().b[45][0]++,ct().s[111]++,q=te.jsx(Tre,{errors:n.errors,onChange:n.onChange.bind(null,n.fieldName),canUndo:v,onUndo:m,onDelete:a,fieldType:n.fieldType,fieldName:n.fieldName,fieldSpec:n.fieldSpec,value:n.value,onFocus:P,onBlur:F})):(ct().b[45][1]++,ct().s[112]++,e==="zoom_function"?(ct().b[46][0]++,ct().s[113]++,q=te.jsx(r9e,{errors:n.errors,onChange:n.onChange.bind(null),fieldType:n.fieldType,fieldName:n.fieldName,fieldSpec:n.fieldSpec,value:n.value,onDeleteStop:c,onAddStop:s,onChangeToDataFunction:E,onExpressionClick:x})):(ct().b[46][1]++,ct().s[114]++,e==="data_function"?(ct().b[47][0]++,ct().s[115]++,q=te.jsx(n9e,{errors:n.errors,onChange:n.onChange.bind(null),fieldType:n.fieldType,fieldName:n.fieldName,fieldSpec:n.fieldSpec,value:n.value,onDeleteStop:c,onAddStop:s,onChangeToZoomFunction:h,onExpressionClick:x})):(ct().b[47][1]++,ct().s[116]++,q=te.jsx(JTe,{errors:n.errors,onChange:n.onChange.bind(null),fieldType:n.fieldType,fieldName:n.fieldName,fieldSpec:n.fieldSpec,value:n.value,onZoomClick:h,onDataClick:E,onExpressionClick:x,onElevationClick:D})))),ct().s[117]++,te.jsx("div",{className:W,"data-wd-key":"spec-field-container:"+n.fieldName,children:q})};function Dr(){var n="/home/runner/work/maputnik/maputnik/src/components/PropertyGroup.tsx",e="2b5da791871b9b38760c659b15188ae0aee85eaa",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/PropertyGroup.tsx",statementMap:{0:{start:{line:4,column:23},end:{line:4,column:117}},1:{start:{line:6,column:20},end:{line:6,column:60}},2:{start:{line:7,column:16},end:{line:7,column:49}},3:{start:{line:8,column:20},end:{line:8,column:36}},4:{start:{line:9,column:2},end:{line:14,column:3}},5:{start:{line:10,column:4},end:{line:13,column:6}},6:{start:{line:15,column:2},end:{line:20,column:3}},7:{start:{line:16,column:4},end:{line:19,column:6}},8:{start:{line:21,column:2},end:{line:21,column:19}},9:{start:{line:24,column:16},end:{line:24,column:48}},10:{start:{line:25,column:2},end:{line:25,column:49}},11:{start:{line:28,column:21},end:{line:31,column:3}},12:{start:{line:29,column:18},end:{line:29,column:80}},13:{start:{line:30,column:4},end:{line:30,column:51}},14:{start:{line:33,column:23},end:{line:33,column:33}},15:{start:{line:34,column:19},end:{line:52,column:6}},16:{start:{line:35,column:24},end:{line:35,column:87}},17:{start:{line:36,column:20},end:{line:36,column:48}},18:{start:{line:37,column:21},end:{line:37,column:50}},19:{start:{line:38,column:25},end:{line:38,column:82}},20:{start:{line:39,column:24},end:{line:39,column:63}},21:{start:{line:40,column:6},end:{line:51,column:8}},22:{start:{line:53,column:4},end:{line:53,column:98}}},fnMap:{0:{name:"getFieldSpec",decl:{start:{line:5,column:9},end:{line:5,column:21}},loc:{start:{line:5,column:50},end:{line:22,column:1}},line:5},1:{name:"getGroupName",decl:{start:{line:23,column:9},end:{line:23,column:21}},loc:{start:{line:23,column:50},end:{line:26,column:1}},line:23},2:{name:"(anonymous_2)",decl:{start:{line:28,column:21},end:{line:28,column:22}},loc:{start:{line:28,column:45},end:{line:31,column:3}},line:28},3:{name:"(anonymous_3)",decl:{start:{line:32,column:2},end:{line:32,column:3}},loc:{start:{line:32,column:11},end:{line:54,column:3}},line:32},4:{name:"(anonymous_4)",decl:{start:{line:34,column:46},end:{line:34,column:47}},loc:{start:{line:34,column:61},end:{line:52,column:5}},line:34}},branchMap:{0:{loc:{start:{line:9,column:2},end:{line:14,column:3}},type:"if",locations:[{start:{line:9,column:2},end:{line:14,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:9},1:{loc:{start:{line:15,column:2},end:{line:20,column:3}},type:"if",locations:[{start:{line:15,column:2},end:{line:20,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:15},2:{loc:{start:{line:24,column:16},end:{line:24,column:48}},type:"binary-expr",locations:[{start:{line:24,column:16},end:{line:24,column:42}},{start:{line:24,column:46},end:{line:24,column:48}}],line:24},3:{loc:{start:{line:25,column:9},end:{line:25,column:48}},type:"cond-expr",locations:[{start:{line:25,column:30},end:{line:25,column:37}},{start:{line:25,column:40},end:{line:25,column:48}}],line:25},4:{loc:{start:{line:36,column:20},end:{line:36,column:48}},type:"binary-expr",locations:[{start:{line:36,column:20},end:{line:36,column:42}},{start:{line:36,column:46},end:{line:36,column:48}}],line:36},5:{loc:{start:{line:37,column:21},end:{line:37,column:50}},type:"binary-expr",locations:[{start:{line:37,column:21},end:{line:37,column:44}},{start:{line:37,column:48},end:{line:37,column:50}}],line:37},6:{loc:{start:{line:38,column:25},end:{line:38,column:82}},type:"cond-expr",locations:[{start:{line:38,column:46},end:{line:38,column:62}},{start:{line:38,column:65},end:{line:38,column:82}}],line:38},7:{loc:{start:{line:39,column:24},end:{line:39,column:63}},type:"cond-expr",locations:[{start:{line:39,column:45},end:{line:39,column:52}},{start:{line:39,column:55},end:{line:39,column:63}}],line:39}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/PropertyGroup.tsx"],names:[],mappings:"AA4Da;AA5Db,OAAO,WAAW;AAElB,OAAO,mBAAmB;AAI1B,MAAM,iBAAiB,CAAC,sBAAsB,gBAAgB,gBAAgB,0BAA0B,YAAY;AAIpH,SAAS,aAAa,MAAW,WAAuC,WAAmB;AACzF,QAAM,YAAY,aAAa,MAAM,WAAW,SAAS;AACzD,QAAM,QAAQ,KAAK,YAAY,MAAM,SAAS;AAC9C,QAAM,YAAY,MAAM,SAAS;AACjC,MAAG,eAAe,QAAQ,SAAS,KAAK,GAAG;AACzC,WAAO;AAAA,MACL,GAAG;AAAA,MACH,QAAQ,KAAK,MAAM,OAAO;AAAA,IAC5B;AAAA,EACF;AACA,MAAG,cAAc,aAAa;AAC5B,WAAO;AAAA,MACL,GAAG;AAAA,MACH,QAAQ,KAAK,MAAM,OAAO;AAAA,IAC5B;AAAA,EACF;AACA,SAAO;AACT;AAEA,SAAS,aAAa,MAAW,WAAuC,WAAuC;AAC7G,QAAM,QAAQ,KAAK,WAAW,SAAS,KAAK,CAAC;AAC7C,SAAQ,aAAa,QAAS,UAAU;AAC1C;AAUA,qBAAqB,sBAAsB,MAAM,UAA8B;AAAA,EAC7E,mBAAmB,CAAC,UAAkB,aAAkB;AACtD,UAAM,QAAQ,aAAa,KAAK,MAAM,MAAM,KAAK,MAAM,MAAM,MAAM,QAAQ;AAC3E,SAAK,MAAM,SAAS,OAAO,UAAU,QAAQ;AAAA,EAC/C;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,OAAM,IAAI,KAAK;AACtB,UAAM,SAAS,KAAK,MAAM,YAAY,IAAI,eAAa;AACrD,YAAM,YAAY,aAAa,KAAK,MAAM,MAAM,KAAK,MAAM,MAAM,MAAM,SAAS;AAEhF,YAAM,QAAQ,KAAK,MAAM,MAAM,SAAS,CAAC;AACzC,YAAM,SAAS,KAAK,MAAM,MAAM,UAAU,CAAC;AAC3C,YAAM,aAAa,aAAa,QAC5B,MAAM,SAA+B,IACrC,OAAO,SAAgC;AAC3C,YAAM,YAAY,aAAa,QAAQ,UAAU;AAEjD,aAAO;AAAA,QAAC;AAAA;AAAA,UACN;AAAA,UACA,UAAU,KAAK;AAAA,UAEf;AAAA,UACA,OAAO;AAAA,UACP;AAAA,UACA;AAAA;AAAA,QAJK;AAAA,MAKP;AAAA,IACF,CAAC;AAED,WAAO,oBAAC,SAAI,WAAU,2BACnB,kBACH;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2b5da791871b9b38760c659b15188ae0aee85eaa"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Dr=function(){return s},s}Dr();const u9e=(Dr().s[0]++,["background-pattern","fill-pattern","line-pattern","fill-extrusion-pattern","icon-image"]);function c9e(n,e,t){Dr().f[0]++;const i=(Dr().s[1]++,yoe(n,e,t)),r=(Dr().s[2]++,n[i+"_"+e]),o=(Dr().s[3]++,r[t]);return Dr().s[4]++,u9e.indexOf(t)>=0?(Dr().b[0][0]++,Dr().s[5]++,{...o,values:n.$root.sprite.values}):(Dr().b[0][1]++,Dr().s[6]++,t==="text-font"?(Dr().b[1][0]++,Dr().s[7]++,{...o,values:n.$root.glyphs.values}):(Dr().b[1][1]++,Dr().s[8]++,o))}function yoe(n,e,t){Dr().f[1]++;const i=(Dr().s[9]++,Dr().b[2][0]++,n["paint_"+e]||(Dr().b[2][1]++,{}));return Dr().s[10]++,t in i?(Dr().b[3][0]++,"paint"):(Dr().b[3][1]++,"layout")}class A9e extends On.Component{onPropertyChange=(Dr().s[11]++,(e,t)=>{Dr().f[2]++;const i=(Dr().s[12]++,yoe(this.props.spec,this.props.layer.type,e));Dr().s[13]++,this.props.onChange(i,e,t)});render(){Dr().f[3]++;const{errors:e}=(Dr().s[14]++,this.props),t=(Dr().s[15]++,this.props.groupFields.map(i=>{Dr().f[4]++;const r=(Dr().s[16]++,c9e(this.props.spec,this.props.layer.type,i)),o=(Dr().s[17]++,Dr().b[4][0]++,this.props.layer.paint||(Dr().b[4][1]++,{})),s=(Dr().s[18]++,Dr().b[5][0]++,this.props.layer.layout||(Dr().b[5][1]++,{})),a=(Dr().s[19]++,i in o?(Dr().b[6][0]++,o[i]):(Dr().b[6][1]++,s[i])),c=(Dr().s[20]++,i in o?(Dr().b[7][0]++,"paint"):(Dr().b[7][1]++,"layout"));return Dr().s[21]++,te.jsx(l9e,{errors:e,onChange:this.onPropertyChange,fieldName:i,value:a,fieldType:c,fieldSpec:r},i)}));return Dr().s[22]++,te.jsx("div",{className:"maputnik-property-group",children:t})}}function L_(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerEditorGroup.tsx",e="6c9e07ebeb2e5c7112c0b70e483a0c61cf0ea981",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/LayerEditorGroup.tsx",statementMap:{0:{start:{line:12,column:4},end:{line:27,column:9}},1:{start:{line:18,column:27},end:{line:18,column:74}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:11,column:2},end:{line:11,column:3}},loc:{start:{line:11,column:11},end:{line:28,column:3}},line:11},1:{name:"(anonymous_1)",decl:{start:{line:18,column:19},end:{line:18,column:20}},loc:{start:{line:18,column:27},end:{line:18,column:74}},line:18}},branchMap:{},s:{0:0,1:0},f:{0:0,1:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerEditorGroup.tsx"],names:[],mappings:"AA2BQ,SACE,KADF;AA3BR,OAAO,WAAW;AAClB,SAAQ,iBAAiB,qBAAoB;AAC7C;AAAA,EACE;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,OACK;AAaP,qBAAqB,yBAAyB,MAAM,UAAiC;AAAA,EACnF,SAAS;AACP,WAAO,qBAAC,iBAAc,MAAM,KAAK,MAAM,IACrC;AAAA;AAAA,QAAC;AAAA;AAAA,UAAqB,WAAU;AAAA,UAC9B,eAAa,wBAAsB,KAAK,MAAM,aAAa;AAAA,UAC3D,SAAS,QAAM,KAAK,MAAM,eAAe,CAAC,KAAK,MAAM,QAAQ;AAAA,UAE7D,+BAAC,uBAAoB,WAAU,uCAC7B;AAAA,gCAAC,UAAK,OAAO,EAAC,UAAU,GAAG,cAAc,SAAQ,GAAI,eAAK,MAAM,OAAM;AAAA,YACtE,oBAAC,iBAAc,MAAM,OAAO,WAAU,2FAA0F;AAAA,YAChI,oBAAC,mBAAgB,MAAM,OAAO,WAAU,6FAA4F;AAAA,aACtI;AAAA;AAAA,MACF;AAAA,MACA,oBAAC,sBACE,eAAK,MAAM,UACd;AAAA,OACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"6c9e07ebeb2e5c7112c0b70e483a0c61cf0ea981"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return L_=function(){return s},s}L_();class h9e extends On.Component{render(){return L_().f[0]++,L_().s[0]++,te.jsxs(Bre,{uuid:this.props.id,children:[te.jsx(kre,{className:"maputnik-layer-editor-group","data-wd-key":"layer-editor-group:"+this.props["data-wd-key"],onClick:e=>(L_().f[1]++,L_().s[1]++,this.props.onActiveToggle(!this.props.isActive)),children:te.jsxs(G7e,{className:"maputnik-layer-editor-group__button",children:[te.jsx("span",{style:{flexGrow:1,alignContent:"center"},children:this.props.title}),te.jsx(cZ,{size:"2em",className:"maputnik-layer-editor-group__button__icon maputnik-layer-editor-group__button__icon--up"}),te.jsx(uZ,{size:"2em",className:"maputnik-layer-editor-group__button__icon maputnik-layer-editor-group__button__icon--down"})]})}),te.jsx(q7e,{children:this.props.children})]})}}function zb(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldMinZoom.tsx",e="331998a9ac6b18663bcbca1301c32952f465e1af",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldMinZoom.tsx",statementMap:{0:{start:{line:6,column:29},end:{line:29,column:1}},1:{start:{line:7,column:12},end:{line:7,column:19}},2:{start:{line:8,column:2},end:{line:28,column:4}},3:{start:{line:30,column:21},end:{line:30,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:29},end:{line:6,column:30}},loc:{start:{line:6,column:40},end:{line:29,column:1}},line:6}},branchMap:{},s:{0:0,1:0,2:0,3:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldMinZoom.tsx"],names:[],mappings:"AAoBM;AAlBN,OAAO,YAAY;AACnB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,SAA+B,uBAAuB;AAQtD,MAAM,uBAA4D,CAAC,UAAU;AAC3E,QAAM,IAAI,MAAM;AAChB,SACE;AAAA,IAAC;AAAA;AAAA,MAAM,OAAO,EAAE,UAAU;AAAA,MAAG,WAAW,OAAO,MAAM;AAAA,MACnD,OAAO,MAAM;AAAA,MACb,eAAY;AAAA,MAEZ;AAAA,QAAC;AAAA;AAAA,UACC,YAAY;AAAA,UACZ,OAAO,MAAM;AAAA,UACb,UAAU,MAAM;AAAA,UAChB,KAAK,OAAO,MAAM,QAAQ;AAAA,UAC1B,KAAK,OAAO,MAAM,QAAQ;AAAA,UAC1B,SAAS,OAAO,MAAM,QAAQ;AAAA,UAC9B,eAAY;AAAA;AAAA,MACd;AAAA;AAAA,EACF;AAEJ;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"331998a9ac6b18663bcbca1301c32952f465e1af"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return zb=function(){return s},s}zb();zb().s[0]++;const d9e=n=>{zb().f[0]++;const e=(zb().s[1]++,n.t);return zb().s[2]++,te.jsx(Ms,{label:e("Min Zoom"),fieldSpec:qr.layer.minzoom,error:n.error,"data-wd-key":"min-zoom",children:te.jsx(b1,{allowRange:!0,value:n.value,onChange:n.onChange,min:qr.layer.minzoom.minimum,max:qr.layer.minzoom.maximum,default:qr.layer.minzoom.minimum,"data-wd-key":"min-zoom.input"})})},f9e=(zb().s[3]++,Po()(d9e));function jb(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldMaxZoom.tsx",e="030101242d82e9c9c34c00cb0f1ee3a368ba29e3",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldMaxZoom.tsx",statementMap:{0:{start:{line:6,column:29},end:{line:29,column:1}},1:{start:{line:7,column:12},end:{line:7,column:19}},2:{start:{line:8,column:2},end:{line:28,column:4}},3:{start:{line:30,column:21},end:{line:30,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:29},end:{line:6,column:30}},loc:{start:{line:6,column:40},end:{line:29,column:1}},line:6}},branchMap:{},s:{0:0,1:0,2:0,3:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldMaxZoom.tsx"],names:[],mappings:"AAoBM;AAlBN,OAAO,YAAY;AACnB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,SAA+B,uBAAuB;AAQtD,MAAM,uBAA4D,CAAC,UAAU;AAC3E,QAAM,IAAI,MAAM;AAChB,SACE;AAAA,IAAC;AAAA;AAAA,MAAM,OAAO,EAAE,UAAU;AAAA,MAAG,WAAW,OAAO,MAAM;AAAA,MACnD,OAAO,MAAM;AAAA,MACb,eAAY;AAAA,MAEZ;AAAA,QAAC;AAAA;AAAA,UACC,YAAY;AAAA,UACZ,OAAO,MAAM;AAAA,UACb,UAAU,MAAM;AAAA,UAChB,KAAK,OAAO,MAAM,QAAQ;AAAA,UAC1B,KAAK,OAAO,MAAM,QAAQ;AAAA,UAC1B,SAAS,OAAO,MAAM,QAAQ;AAAA,UAC9B,eAAY;AAAA;AAAA,MACd;AAAA;AAAA,EACF;AAEJ;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"030101242d82e9c9c34c00cb0f1ee3a368ba29e3"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return jb=function(){return s},s}jb();jb().s[0]++;const p9e=n=>{jb().f[0]++;const e=(jb().s[1]++,n.t);return jb().s[2]++,te.jsx(Ms,{label:e("Max Zoom"),fieldSpec:qr.layer.maxzoom,error:n.error,"data-wd-key":"max-zoom",children:te.jsx(b1,{allowRange:!0,value:n.value,onChange:n.onChange,min:qr.layer.maxzoom.minimum,max:qr.layer.maxzoom.maximum,default:qr.layer.maxzoom.maximum,"data-wd-key":"max-zoom.input"})})},m9e=(jb().s[3]++,Po()(p9e));function Yy(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldComment.tsx",e="bbd273b6557a5df907fed987aa83b7e8030607a2",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldComment.tsx",statementMap:{0:{start:{line:5,column:29},end:{line:31,column:1}},1:{start:{line:6,column:12},end:{line:6,column:19}},2:{start:{line:7,column:20},end:{line:11,column:3}},3:{start:{line:12,column:2},end:{line:30,column:4}},4:{start:{line:32,column:21},end:{line:32,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:29},end:{line:5,column:30}},loc:{start:{line:5,column:40},end:{line:31,column:1}},line:5}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldComment.tsx"],names:[],mappings:"AA2BM;AAzBN,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,SAA+B,uBAAuB;AAQtD,MAAM,uBAA4D,CAAC,UAAU;AAC3E,QAAM,IAAI,MAAM;AAChB,QAAM,YAAY;AAAA,IAChB,KAAK;AAAA,MACH;AAAA,IACF;AAAA,EACF;AAEA,SACE;AAAA,IAAC;AAAA;AAAA,MACC,OAAO,EAAE,UAAU;AAAA,MACnB;AAAA,MACA,eAAY;AAAA,MACZ,OAAO,MAAM;AAAA,MAEb;AAAA,QAAC;AAAA;AAAA,UACC,OAAO;AAAA,UACP,OAAO,MAAM;AAAA,UACb,UAAU,MAAM;AAAA,UAChB,SAAS,EAAE,YAAY;AAAA,UACvB,eAAY;AAAA;AAAA,MACd;AAAA;AAAA,EACF;AAEJ;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"bbd273b6557a5df907fed987aa83b7e8030607a2"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Yy=function(){return s},s}Yy();Yy().s[0]++;const g9e=n=>{Yy().f[0]++;const e=(Yy().s[1]++,n.t),t=(Yy().s[2]++,{doc:e("Comments for the current layer. This is non-standard and not in the spec.")});return Yy().s[3]++,te.jsx(Ms,{label:e("Comments"),fieldSpec:t,"data-wd-key":"layer-comment",error:n.error,children:te.jsx(Mm,{multi:!0,value:n.value,onChange:n.onChange,default:e("Comment..."),"data-wd-key":"layer-comment.input"})})},y9e=(Yy().s[4]++,Po()(g9e));function F_(){var n="/home/runner/work/maputnik/maputnik/src/libs/format.ts",e="c45fbfac66e994b59070a295e5a7f219cd5d66ac",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/format.ts",statementMap:{0:{start:{line:2,column:2},end:{line:2,column:50}}},fnMap:{0:{name:"formatLayerId",decl:{start:{line:1,column:16},end:{line:1,column:29}},loc:{start:{line:1,column:34},end:{line:3,column:1}},line:1}},branchMap:{0:{loc:{start:{line:2,column:9},end:{line:2,column:49}},type:"cond-expr",locations:[{start:{line:2,column:21},end:{line:2,column:37}},{start:{line:2,column:40},end:{line:2,column:49}}],line:2}},s:{0:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/format.ts"],names:[],mappings:"AAAO,gBAAS,cAAe,IAAwB;AACrD,SAAO,OAAO,KAAK,mBAAmB,IAAI,EAAE;AAC9C;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"c45fbfac66e994b59070a295e5a7f219cd5d66ac"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return F_=function(){return s},s}F_();function voe(n){return F_().f[0]++,F_().s[0]++,n===""?(F_().b[0][0]++,"[empty_string]"):(F_().b[0][1]++,`'${n}'`)}function $t(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerEditor.tsx",e="838074c1cccc813ecacd0208f5f23e782debdabc",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/LayerEditor.tsx",statementMap:{0:{start:{line:24,column:17},end:{line:24,column:19}},1:{start:{line:25,column:2},end:{line:30,column:5}},2:{start:{line:29,column:59},end:{line:29,column:82}},3:{start:{line:31,column:2},end:{line:36,column:5}},4:{start:{line:35,column:59},end:{line:35,column:80}},5:{start:{line:37,column:2},end:{line:42,column:5}},6:{start:{line:41,column:59},end:{line:41,column:80}},7:{start:{line:43,column:2},end:{line:48,column:5}},8:{start:{line:47,column:58},end:{line:47,column:79}},9:{start:{line:49,column:2},end:{line:54,column:5}},10:{start:{line:53,column:58},end:{line:53,column:79}},11:{start:{line:55,column:2},end:{line:55,column:16}},12:{start:{line:58,column:2},end:{line:60,column:3}},13:{start:{line:59,column:4},end:{line:59,column:14}},14:{start:{line:61,column:2},end:{line:63,column:3}},15:{start:{line:62,column:4},end:{line:62,column:37}},16:{start:{line:64,column:17},end:{line:64,column:19}},17:{start:{line:65,column:2},end:{line:72,column:3}},18:{start:{line:66,column:4},end:{line:71,column:7}},19:{start:{line:73,column:2},end:{line:80,column:3}},20:{start:{line:74,column:4},end:{line:79,column:7}},21:{start:{line:81,column:2},end:{line:81,column:16}},22:{start:{line:84,column:21},end:{line:88,column:3}},23:{start:{line:89,column:22},end:{line:93,column:3}},24:{start:{line:94,column:22},end:{line:98,column:3}},25:{start:{line:99,column:2},end:{line:99,column:96}},26:{start:{line:102,column:24},end:{line:109,column:3}},27:{start:{line:111,column:4},end:{line:111,column:17}},28:{start:{line:112,column:25},end:{line:112,column:27}},29:{start:{line:113,column:4},end:{line:115,column:5}},30:{start:{line:114,column:6},end:{line:114,column:39}},31:{start:{line:116,column:4},end:{line:116,column:34}},32:{start:{line:119,column:29},end:{line:119,column:54}},33:{start:{line:120,column:4},end:{line:124,column:5}},34:{start:{line:121,column:6},end:{line:123,column:7}},35:{start:{line:122,column:8},end:{line:122,column:45}},36:{start:{line:125,column:4},end:{line:127,column:6}},37:{start:{line:130,column:4},end:{line:133,column:6}},38:{start:{line:136,column:32},end:{line:139,column:5}},39:{start:{line:140,column:4},end:{line:142,column:7}},40:{start:{line:145,column:18},end:{line:145,column:20}},41:{start:{line:146,column:4},end:{line:148,column:5}},42:{start:{line:147,column:6},end:{line:147,column:62}},43:{start:{line:149,column:35},end:{line:149,column:45}},44:{start:{line:150,column:22},end:{line:150,column:24}},45:{start:{line:151,column:4},end:{line:157,column:7}},46:{start:{line:152,column:6},end:{line:156,column:7}},47:{start:{line:153,column:8},end:{line:155,column:10}},48:{start:{line:159,column:18},end:{line:159,column:34}},49:{start:{line:160,column:4},end:{line:162,column:5}},50:{start:{line:161,column:6},end:{line:161,column:63}},51:{start:{line:163,column:4},end:{line:267,column:5}},52:{start:{line:165,column:8},end:{line:229,column:13}},53:{start:{line:172,column:35},end:{line:172,column:112}},54:{start:{line:181,column:37},end:{line:184,column:15}},55:{start:{line:193,column:31},end:{line:193,column:69}},56:{start:{line:202,column:31},end:{line:202,column:75}},57:{start:{line:210,column:31},end:{line:210,column:70}},58:{start:{line:218,column:31},end:{line:218,column:70}},59:{start:{line:226,column:31},end:{line:226,column:104}},60:{start:{line:231,column:8},end:{line:239,column:16}},61:{start:{line:237,column:29},end:{line:237,column:67}},62:{start:{line:241,column:8},end:{line:250,column:10}},63:{start:{line:252,column:8},end:{line:264,column:10}},64:{start:{line:258,column:14},end:{line:261,column:16}},65:{start:{line:266,column:8},end:{line:266,column:49}},66:{start:{line:270,column:4},end:{line:273,column:7}},67:{start:{line:276,column:14},end:{line:276,column:26}},68:{start:{line:277,column:21},end:{line:277,column:23}},69:{start:{line:278,column:22},end:{line:278,column:43}},70:{start:{line:279,column:19},end:{line:296,column:6}},71:{start:{line:280,column:6},end:{line:280,column:70}},72:{start:{line:282,column:22},end:{line:282,column:30}},73:{start:{line:283,column:6},end:{line:283,column:29}},74:{start:{line:284,column:6},end:{line:295,column:8}},75:{start:{line:297,column:19},end:{line:297,column:48}},76:{start:{line:298,column:18},end:{line:326,column:5}},77:{start:{line:301,column:23},end:{line:301,column:71}},78:{start:{line:306,column:23},end:{line:306,column:68}},79:{start:{line:311,column:23},end:{line:311,column:80}},80:{start:{line:317,column:23},end:{line:317,column:41}},81:{start:{line:323,column:23},end:{line:323,column:40}},82:{start:{line:328,column:6},end:{line:328,column:30}},83:{start:{line:329,column:6},end:{line:329,column:26}},84:{start:{line:331,column:4},end:{line:377,column:9}},85:{start:{line:359,column:33},end:{line:359,column:42}},86:{start:{line:360,column:20},end:{line:360,column:201}},87:{start:{line:380,column:20},end:{line:380,column:58}}},fnMap:{0:{name:"getLayoutForSymbolType",decl:{start:{line:23,column:9},end:{line:23,column:31}},loc:{start:{line:23,column:35},end:{line:56,column:1}},line:23},1:{name:"(anonymous_1)",decl:{start:{line:29,column:52},end:{line:29,column:53}},loc:{start:{line:29,column:59},end:{line:29,column:82}},line:29},2:{name:"(anonymous_2)",decl:{start:{line:35,column:52},end:{line:35,column:53}},loc:{start:{line:35,column:59},end:{line:35,column:80}},line:35},3:{name:"(anonymous_3)",decl:{start:{line:41,column:52},end:{line:41,column:53}},loc:{start:{line:41,column:59},end:{line:41,column:80}},line:41},4:{name:"(anonymous_4)",decl:{start:{line:47,column:51},end:{line:47,column:52}},loc:{start:{line:47,column:58},end:{line:47,column:79}},line:47},5:{name:"(anonymous_5)",decl:{start:{line:53,column:51},end:{line:53,column:52}},loc:{start:{line:53,column:58},end:{line:53,column:79}},line:53},6:{name:"getLayoutForType",decl:{start:{line:57,column:9},end:{line:57,column:25}},loc:{start:{line:57,column:35},end:{line:82,column:1}},line:57},7:{name:"layoutGroups",decl:{start:{line:83,column:9},end:{line:83,column:21}},loc:{start:{line:83,column:36},end:{line:100,column:1}},line:83},8:{name:"(anonymous_8)",decl:{start:{line:103,column:20},end:{line:103,column:21}},loc:{start:{line:103,column:26},end:{line:104,column:5}},line:103},9:{name:"(anonymous_9)",decl:{start:{line:105,column:21},end:{line:105,column:22}},loc:{start:{line:105,column:27},end:{line:106,column:5}},line:105},10:{name:"(anonymous_10)",decl:{start:{line:107,column:22},end:{line:107,column:23}},loc:{start:{line:107,column:28},end:{line:108,column:5}},line:107},11:{name:"(anonymous_11)",decl:{start:{line:110,column:2},end:{line:110,column:3}},loc:{start:{line:110,column:21},end:{line:117,column:3}},line:110},12:{name:"(anonymous_12)",decl:{start:{line:118,column:2},end:{line:118,column:3}},loc:{start:{line:118,column:48},end:{line:128,column:3}},line:118},13:{name:"(anonymous_13)",decl:{start:{line:129,column:2},end:{line:129,column:3}},loc:{start:{line:129,column:44},end:{line:134,column:3}},line:129},14:{name:"(anonymous_14)",decl:{start:{line:135,column:2},end:{line:135,column:3}},loc:{start:{line:135,column:36},end:{line:143,column:3}},line:135},15:{name:"(anonymous_15)",decl:{start:{line:144,column:2},end:{line:144,column:3}},loc:{start:{line:144,column:32},end:{line:268,column:3}},line:144},16:{name:"(anonymous_16)",decl:{start:{line:151,column:19},end:{line:151,column:20}},loc:{start:{line:151,column:30},end:{line:157,column:5}},line:151},17:{name:"(anonymous_17)",decl:{start:{line:172,column:24},end:{line:172,column:25}},loc:{start:{line:172,column:35},end:{line:172,column:112}},line:172},18:{name:"(anonymous_18)",decl:{start:{line:181,column:24},end:{line:181,column:25}},loc:{start:{line:181,column:37},end:{line:184,column:15}},line:181},19:{name:"(anonymous_19)",decl:{start:{line:193,column:24},end:{line:193,column:25}},loc:{start:{line:193,column:31},end:{line:193,column:69}},line:193},20:{name:"(anonymous_20)",decl:{start:{line:202,column:24},end:{line:202,column:25}},loc:{start:{line:202,column:31},end:{line:202,column:75}},line:202},21:{name:"(anonymous_21)",decl:{start:{line:210,column:24},end:{line:210,column:25}},loc:{start:{line:210,column:31},end:{line:210,column:70}},line:210},22:{name:"(anonymous_22)",decl:{start:{line:218,column:24},end:{line:218,column:25}},loc:{start:{line:218,column:31},end:{line:218,column:70}},line:218},23:{name:"(anonymous_23)",decl:{start:{line:226,column:24},end:{line:226,column:25}},loc:{start:{line:226,column:31},end:{line:226,column:104}},line:226},24:{name:"(anonymous_24)",decl:{start:{line:237,column:22},end:{line:237,column:23}},loc:{start:{line:237,column:29},end:{line:237,column:67}},line:237},25:{name:"(anonymous_25)",decl:{start:{line:257,column:22},end:{line:257,column:23}},loc:{start:{line:257,column:34},end:{line:262,column:13}},line:257},26:{name:"(anonymous_26)",decl:{start:{line:269,column:2},end:{line:269,column:3}},loc:{start:{line:269,column:20},end:{line:274,column:3}},line:269},27:{name:"(anonymous_27)",decl:{start:{line:275,column:2},end:{line:275,column:3}},loc:{start:{line:275,column:11},end:{line:378,column:3}},line:275},28:{name:"(anonymous_28)",decl:{start:{line:279,column:53},end:{line:279,column:54}},loc:{start:{line:279,column:64},end:{line:281,column:5}},line:279},29:{name:"(anonymous_29)",decl:{start:{line:281,column:11},end:{line:281,column:12}},loc:{start:{line:281,column:22},end:{line:296,column:5}},line:281},30:{name:"(anonymous_30)",decl:{start:{line:301,column:17},end:{line:301,column:18}},loc:{start:{line:301,column:23},end:{line:301,column:71}},line:301},31:{name:"(anonymous_31)",decl:{start:{line:306,column:17},end:{line:306,column:18}},loc:{start:{line:306,column:23},end:{line:306,column:68}},line:306},32:{name:"(anonymous_32)",decl:{start:{line:311,column:17},end:{line:311,column:18}},loc:{start:{line:311,column:23},end:{line:311,column:80}},line:311},33:{name:"(anonymous_33)",decl:{start:{line:317,column:17},end:{line:317,column:18}},loc:{start:{line:317,column:23},end:{line:317,column:41}},line:317},34:{name:"(anonymous_34)",decl:{start:{line:323,column:17},end:{line:323,column:18}},loc:{start:{line:323,column:23},end:{line:323,column:40}},line:323},35:{name:"handleSelection",decl:{start:{line:327,column:13},end:{line:327,column:28}},loc:{start:{line:327,column:40},end:{line:330,column:5}},line:327},36:{name:"(anonymous_36)",decl:{start:{line:358,column:147},end:{line:358,column:148}},loc:{start:{line:358,column:155},end:{line:361,column:19}},line:358}},branchMap:{0:{loc:{start:{line:58,column:2},end:{line:60,column:3}},type:"if",locations:[{start:{line:58,column:2},end:{line:60,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:58},1:{loc:{start:{line:61,column:2},end:{line:63,column:3}},type:"if",locations:[{start:{line:61,column:2},end:{line:63,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:61},2:{loc:{start:{line:65,column:2},end:{line:72,column:3}},type:"if",locations:[{start:{line:65,column:2},end:{line:72,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:65},3:{loc:{start:{line:73,column:2},end:{line:80,column:3}},type:"if",locations:[{start:{line:73,column:2},end:{line:80,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:73},4:{loc:{start:{line:121,column:6},end:{line:123,column:7}},type:"if",locations:[{start:{line:121,column:6},end:{line:123,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:121},5:{loc:{start:{line:146,column:4},end:{line:148,column:5}},type:"if",locations:[{start:{line:146,column:4},end:{line:148,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:146},6:{loc:{start:{line:152,column:6},end:{line:156,column:7}},type:"if",locations:[{start:{line:152,column:6},end:{line:156,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:152},7:{loc:{start:{line:152,column:10},end:{line:152,column:96}},type:"binary-expr",locations:[{start:{line:152,column:10},end:{line:152,column:22}},{start:{line:152,column:26},end:{line:152,column:55}},{start:{line:152,column:59},end:{line:152,column:96}}],line:152},8:{loc:{start:{line:160,column:4},end:{line:162,column:5}},type:"if",locations:[{start:{line:160,column:4},end:{line:162,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:160},9:{loc:{start:{line:163,column:4},end:{line:267,column:5}},type:"switch",locations:[{start:{line:164,column:6},end:{line:229,column:13}},{start:{line:230,column:6},end:{line:239,column:16}},{start:{line:240,column:6},end:{line:250,column:10}},{start:{line:251,column:6},end:{line:264,column:10}},{start:{line:265,column:6},end:{line:266,column:49}}],line:163},10:{loc:{start:{line:187,column:10},end:{line:195,column:11}},type:"binary-expr",locations:[{start:{line:187,column:10},end:{line:187,column:48}},{start:{line:187,column:68},end:{line:195,column:11}}],line:187},11:{loc:{start:{line:196,column:10},end:{line:204,column:11}},type:"binary-expr",locations:[{start:{line:196,column:10},end:{line:196,column:60}},{start:{line:196,column:80},end:{line:204,column:11}}],line:196},12:{loc:{start:{line:226,column:83},end:{line:226,column:103}},type:"cond-expr",locations:[{start:{line:226,column:93},end:{line:226,column:99}},{start:{line:226,column:102},end:{line:226,column:103}}],line:226},13:{loc:{start:{line:280,column:15},end:{line:280,column:68}},type:"binary-expr",locations:[{start:{line:280,column:15},end:{line:280,column:41}},{start:{line:280,column:45},end:{line:280,column:68}}],line:280},14:{loc:{start:{line:297,column:19},end:{line:297,column:48}},type:"binary-expr",locations:[{start:{line:297,column:19},end:{line:297,column:42}},{start:{line:297,column:46},end:{line:297,column:48}}],line:297},15:{loc:{start:{line:310,column:14},end:{line:310,column:66}},type:"cond-expr",locations:[{start:{line:310,column:45},end:{line:310,column:54}},{start:{line:310,column:57},end:{line:310,column:66}}],line:310}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0,87:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0,0],8:[0,0],9:[0,0,0,0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerEditor.tsx"],names:["layer"],mappings:"AAuN2B,SA4EL,UA3Ed,KADmB;AAvN3B,OAAO,WAAuB;AAC9B,SAAS,SAAS,QAAQ,MAAM,gBAAgB;AAChD,SAAQ,iBAAgB;AACxB,SAAQ,kBAAiB;AACzB,SAAS,mBAAmB;AAE5B,SAAQ,UAAS;AAEjB,OAAO,eAAe;AACtB,OAAO,kBAAkB;AACzB,OAAO,mBAAmB;AAC1B,OAAO,sBAAsB;AAC7B,OAAO,eAAe;AACtB,OAAO,aAAa;AACpB,OAAO,kBAAkB;AACzB,OAAO,kBAAkB;AACzB,OAAO,kBAAkB;AACzB,OAAO,iBAAiB;AACxB,OAAO,sBAAsB;AAC7B,SAAS,YAAY,sBAAsB;AAC3C,SAAQ,qBAAoB;AAC5B,SAA+B,uBAAuB;AAEtD,SAAS,yBAAyB;AAUlC,SAAS,uBAAuB,GAAqC;AACnE,QAAM,SAAgC,CAAC;AACvC,SAAO,KAAK;AAAA,IACV,OAAO,EAAE,2BAA2B;AAAA,IACpC,IAAI;AAAA,IACJ,MAAM;AAAA,IACN,QAAQ,OAAO,KAAK,GAAG,eAAe,CAAC,EAAE,OAAO,OAAK,EAAE,WAAW,SAAS,CAAC;AAAA,EAC9E,CAAC;AACD,SAAO,KAAK;AAAA,IACV,OAAO,EAAE,wBAAwB;AAAA,IACjC,IAAI;AAAA,IACJ,MAAM;AAAA,IACN,QAAQ,OAAO,KAAK,GAAG,eAAe,CAAC,EAAE,OAAO,OAAK,EAAE,WAAW,OAAO,CAAC;AAAA,EAC5E,CAAC;AACD,SAAO,KAAK;AAAA,IACV,OAAO,EAAE,wBAAwB;AAAA,IACjC,IAAI;AAAA,IACJ,MAAM;AAAA,IACN,QAAQ,OAAO,KAAK,GAAG,eAAe,CAAC,EAAE,OAAO,OAAK,EAAE,WAAW,OAAO,CAAC;AAAA,EAC5E,CAAC;AACD,SAAO,KAAK;AAAA,IACV,OAAO,EAAE,uBAAuB;AAAA,IAChC,IAAI;AAAA,IACJ,MAAM;AAAA,IACN,QAAQ,OAAO,KAAK,GAAG,cAAc,CAAC,EAAE,OAAO,OAAK,EAAE,WAAW,OAAO,CAAC;AAAA,EAC3E,CAAC;AACD,SAAO,KAAK;AAAA,IACV,OAAO,EAAE,uBAAuB;AAAA,IAChC,IAAI;AAAA,IACJ,MAAM;AAAA,IACN,QAAQ,OAAO,KAAK,GAAG,cAAc,CAAC,EAAE,OAAO,OAAK,EAAE,WAAW,OAAO,CAAC;AAAA,EAC3E,CAAC;AACD,SAAO;AACT;AAEA,SAAS,iBAAiB,MAAkC,GAAqC;AAC/F,MAAI,OAAO,KAAK,GAAG,MAAM,KAAK,MAAM,EAAE,QAAQ,IAAI,IAAI,GAAG;AACvD,WAAO,CAAC;AAAA,EACV;AACA,MAAI,SAAS,UAAU;AACrB,WAAO,uBAAuB,CAAC;AAAA,EACjC;AACA,QAAM,SAAgC,CAAC;AACvC,MAAI,OAAO,KAAK,GAAG,WAAW,IAAI,CAAC,EAAE,SAAS,GAAG;AAC/C,WAAO,KAAK;AAAA,MACV,OAAO,EAAE,kBAAkB;AAAA,MAC3B,IAAI;AAAA,MACJ,MAAM;AAAA,MACN,QAAQ,OAAO,KAAK,GAAG,WAAW,IAAI,CAAC;AAAA,IACzC,CAAC;AAAA,EACH;AACA,MAAI,OAAO,KAAK,GAAG,YAAY,IAAI,CAAC,EAAE,SAAS,GAAG;AAChD,WAAO,KAAK;AAAA,MACV,OAAO,EAAE,mBAAmB;AAAA,MAC5B,IAAI;AAAA,MACJ,MAAM;AAAA,MACN,QAAQ,OAAO,KAAK,GAAG,YAAY,IAAI,CAAC;AAAA,IAC1C,CAAC;AAAA,EACH;AACA,SAAO;AACT;AAEA,SAAS,aAAa,WAAuC,GAA8E;AACzI,QAAM,aAAa;AAAA,IACjB,IAAI;AAAA,IACJ,OAAO,EAAE,OAAO;AAAA,IAChB,MAAM;AAAA,EACR;AACA,QAAM,cAAc;AAAA,IAClB,IAAI;AAAA,IACJ,OAAO,EAAE,QAAQ;AAAA,IACjB,MAAM;AAAA,EACR;AACA,QAAM,cAAc;AAAA,IAClB,IAAI;AAAA,IACJ,OAAO,EAAE,aAAa;AAAA,IACtB,MAAM;AAAA,EACR;AACA,SAAO,CAAC,YAAY,WAAW,EAC5B,OAAO,iBAAiB,WAAW,CAAC,CAAC,EACrC,OAAO,CAAC,WAAW,CAAC;AACzB;AAwBA,MAAM,4BAA4B,MAAM,UAAsD;AAAA,EAC5F,OAAO,eAAe;AAAA,IACpB,gBAAgB,MAAM;AAAA,IAAC;AAAA,IACvB,iBAAiB,MAAM;AAAA,IAAC;AAAA,IACxB,kBAAkB,MAAM;AAAA,IAAC;AAAA,EAC3B;AAAA,EAEA,YAAY,OAAiC;AAC3C,UAAM,KAAK;AAEX,UAAM,eAAyC,CAAC;AAChD,eAAW,SAAS,aAAa,KAAK,MAAM,MAAM,MAAM,MAAM,CAAC,GAAG;AAChE,mBAAa,MAAM,KAAK,IAAI;AAAA,IAC9B;AAEA,SAAK,QAAQ,EAAE,aAAa;AAAA,EAC9B;AAAA,EAEA,OAAO,yBAAyB,OAA2C,OAAyB;AAClG,UAAM,mBAAmB,EAAE,GAAG,MAAM,aAAa;AAEjD,eAAW,SAAS,iBAAiB,MAAM,MAAM,MAAM,MAAM,CAAC,GAAG;AAC/D,UAAG,EAAE,MAAM,SAAS,mBAAmB;AACrC,yBAAiB,MAAM,KAAK,IAAI;AAAA,MAClC;AAAA,IACF;AAEA,WAAO;AAAA,MACL,cAAc;AAAA,IAChB;AAAA,EACF;AAAA,EAGA,eAAe,OAAwC,UAAkB,UAAe;AACtF,SAAK,MAAM;AAAA,MACT,KAAK,MAAM;AAAA,MACX,eAAe,KAAK,MAAM,OAAO,OAAO,UAAU,QAAQ;AAAA,IAC5D;AAAA,EACF;AAAA,EAEA,cAAc,YAAoB,QAAiB;AACjD,UAAM,sBAAsB;AAAA,MAC1B,GAAG,KAAK,MAAM;AAAA,MACd,CAAC,UAAU,GAAG;AAAA,IAChB;AACA,SAAK,SAAS;AAAA,MACZ,cAAc;AAAA,IAChB,CAAC;AAAA,EACH;AAAA,EAEA,gBAAgB,MAAc,QAAgC;AAC5D,QAAI,UAAU;AACd,QAAG,KAAK,MAAM,MAAM,UAAU;AAC5B,gBAAW,KAAK,MAAM,MAAM,SAAiB,kBAAkB;AAAA,IACjE;AACA,UAAM,EAAC,QAAQ,WAAU,IAAI,KAAK;AAElC,UAAM,YAA+B,CAAC;AACtC,WAAQ,QAAQ,WAAS;AACvB,UACE,MAAM,UACN,MAAM,OAAO,SAAS,WACtB,MAAM,OAAO,KAAK,SAAS,YAC3B;AACA,kBAAU,MAAM,OAAO,KAAK,GAAG,IAAI;AAAA,UACjC,SAAS,MAAM,OAAO,KAAK;AAAA,QAC7B;AAAA,MACF;AAAA,IACF,CAAC;AAED,QAAI;AACJ,UAAM,QAAQ,KAAK,MAAM;AACzB,QAAG,OAAO,UAAU,eAAe,KAAK,KAAK,MAAM,SAAS,MAAM,MAAM,GAAG;AACzE,uBAAiB,KAAK,MAAM,QAAQ,MAAM,MAAM,EAAE;AAAA,IACpD;AAEA,YAAO,MAAM;AAAA,MACX,KAAK;AAAS,eAAO,qBAAC,SACpB;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,OAAM;AAAA,cACN,OAAO,UAAU;AAAA,cACjB,UAAU,WAAS,KAAK,MAAM,gBAAgB,KAAK,MAAM,YAAY,KAAK,MAAM,MAAM,IAAI,KAAK;AAAA;AAAA,UACjG;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,UAAU;AAAA,cACV,OAAO,UAAU;AAAA,cACjB,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,UAAU,aAAW,KAAK,MAAM;AAAA,gBAC9B,KAAK,MAAM;AAAA,gBACX,WAAW,KAAK,MAAM,OAAO,OAAO;AAAA,cACtC;AAAA;AAAA,UACF;AAAA,UACC,KAAK,MAAM,MAAM,SAAS,gBAAgB;AAAA,YAAC;AAAA;AAAA,cAC1C,OAAO,UAAU;AAAA,cACjB,WAAW,OAAO,KAAK,KAAK,MAAM,OAAQ;AAAA,cAC1C,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,UAAU,OAAK,KAAK,eAAe,MAAM,UAAU,CAAC;AAAA;AAAA,UACtD;AAAA,UAEC,CAAC,kBAAkB,SAAS,KAAK,MAAM,MAAM,IAAI,KAClD;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,UAAU,cAAc;AAAA,cAC/B;AAAA,cACA,OAAQ,KAAK,MAAM,MAAc,cAAc;AAAA,cAC/C,UAAU,OAAK,KAAK,eAAe,MAAM,gBAAgB,CAAC;AAAA;AAAA,UAC5D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,UAAU;AAAA,cACjB,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,UAAU,OAAK,KAAK,eAAe,MAAM,WAAW,CAAC;AAAA;AAAA,UACvD;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,UAAU;AAAA,cACjB,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,UAAU,OAAK,KAAK,eAAe,MAAM,WAAW,CAAC;AAAA;AAAA,UACvD;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,UAAU;AAAA,cACjB,OAAO;AAAA,cACP,UAAU,OAAK,KAAK,eAAe,YAAY,oBAAoB,KAAK,KAAM,SAAY,CAAC;AAAA;AAAA,UAC7F;AAAA,WACF;AAAA,MACA,KAAK;AAAU,eAAO,oBAAC,SACrB,8BAAC,SAAI,WAAU,kCACb;AAAA,UAAC;AAAA;AAAA,YACC,QAAQ;AAAA,YACR,QAAS,KAAK,MAAM,MAAc;AAAA,YAClC,YAAY,KAAK,MAAM,aAAc,KAAK,MAAM,MAAc,cAAc,CAAC;AAAA,YAC7E,UAAU,OAAK,KAAK,eAAe,MAAM,UAAU,CAAC;AAAA;AAAA,QACtD,GACF,GACF;AAAA,MACA,KAAK;AACH,eAAO;AAAA,UAAC;AAAA;AAAA,YACN,QAAQ;AAAA,YACR,OAAO,KAAK,MAAM;AAAA,YAClB,aAAa;AAAA,YACb,MAAM,KAAK,MAAM;AAAA,YACjB,UAAU,KAAK,eAAe,KAAK,IAAI;AAAA;AAAA,QACzC;AAAA,MACF,KAAK;AACH,eAAO;AAAA,UAAC;AAAA;AAAA,YACN,UAAS;AAAA,YACT,OAAO,KAAK,MAAM;AAAA,YAClB,UAAU,CAACA,WAA8B;AACvC,mBAAK,MAAM;AAAA,gBACT,KAAK,MAAM;AAAA,gBACXA;AAAA,cACF;AAAA,YACF;AAAA;AAAA,QACF;AAAA,MACF;AAAS,eAAO,gCAAE;AAAA,IACpB;AAAA,EACF;AAAA,EAEA,UAAU,QAAgB;AACxB,SAAK,MAAM,YAAY;AAAA,MACrB,UAAU,KAAK,MAAM;AAAA,MACrB,UAAU,KAAK,MAAM,aAAW;AAAA,IAClC,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AAErB,UAAM,WAAqB,CAAC;AAC5B,UAAM,YAAY,KAAK,MAAM,MAAM;AACnC,UAAM,SAAS,aAAa,WAAW,CAAC,EAAE,OAAO,WAAS;AACxD,aAAO,EAAE,cAAc,gBAAgB,MAAM,SAAS;AAAA,IACxD,CAAC,EAAE,IAAI,WAAS;AACd,YAAM,UAAU,MAAM;AACtB,eAAS,KAAK,OAAO;AACrB,aAAO;AAAA,QAAC;AAAA;AAAA,UACN,eAAa,MAAM;AAAA,UACnB,IAAI;AAAA,UAEJ,OAAO,MAAM;AAAA,UACb,UAAU,KAAK,MAAM,aAAa,MAAM,KAAK;AAAA,UAC7C,gBAAgB,KAAK,cAAc,KAAK,MAAM,MAAM,KAAK;AAAA,UAExD,eAAK,gBAAgB,MAAM,MAAM,MAAM,MAAM;AAAA;AAAA,QALzC;AAAA,MAMP;AAAA,IACF,CAAC;AAED,UAAM,SAAS,KAAK,MAAM,MAAM,UAAU,CAAC;AAE3C,UAAM,QAKD;AAAA,MACH,QAAQ;AAAA,QACN,MAAM,EAAE,QAAQ;AAAA,QAChB,SAAS,MAAM,KAAK,MAAM,eAAe,KAAK,MAAM,UAAU;AAAA,QAC9D,OAAO;AAAA,MACT;AAAA,MACA,WAAW;AAAA,QACT,MAAM,EAAE,WAAW;AAAA,QACnB,SAAS,MAAM,KAAK,MAAM,YAAY,KAAK,MAAM,UAAU;AAAA,QAC3D,OAAO;AAAA,MACT;AAAA,MACA,MAAM;AAAA,QACJ,MAAO,OAAO,eAAe,SAAU,EAAE,MAAM,IAAI,EAAE,MAAM;AAAA,QAC3D,SAAS,MAAM,KAAK,MAAM,wBAAwB,KAAK,MAAM,UAAU;AAAA,QACvE,OAAO;AAAA,MACT;AAAA,MACA,aAAa;AAAA,QACX,MAAM,EAAE,eAAe;AAAA,QACvB,UAAU,KAAK,MAAM;AAAA,QACrB,SAAS,MAAM,KAAK,UAAU,EAAE;AAAA,QAChC,OAAO;AAAA,MACT;AAAA,MACA,eAAe;AAAA,QACb,MAAM,EAAE,iBAAiB;AAAA,QACzB,UAAU,KAAK,MAAM;AAAA,QACrB,SAAS,MAAM,KAAK,UAAU,CAAE;AAAA,QAChC,OAAO;AAAA,MACT;AAAA,IACF;AAEA,aAAS,gBAAgB,IAAY,OAA6B;AAChE,YAAM,gBAAgB;AACtB,YAAM,EAAE,EAAE,QAAQ;AAAA,IACpB;AAEA,WAAO,oBAAC,YAAY,UAAZ,EAAqB,OAAO,EAAC,MAAM,QAAQ,OAAO,UAAS,GACjE;AAAA,MAAC;AAAA;AAAA,QAAQ,WAAU;AAAA,QACjB,MAAK;AAAA,QACL,cAAY,EAAE,cAAc;AAAA,QAC5B,eAAY;AAAA,QAEZ;AAAA,8BAAC,YAAO,eAAY,uBAClB,+BAAC,SAAI,WAAU,gBACb;AAAA,gCAAC,QAAG,WAAU,uBACX,YAAE,sBAAsB,EAAE,SAAS,cAAc,KAAK,MAAM,MAAM,EAAE,EAAE,CAAC,GAC1E;AAAA,YACA,oBAAC,SAAI,WAAU,sBACb;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,aAAa;AAAA,gBACb,kBAAkB;AAAA,gBAElB;AAAA;AAAA,oBAAC;AAAA;AAAA,sBACC,IAAG;AAAA,sBACH,eAAY;AAAA,sBACZ,WAAU;AAAA,sBACV,OAAO;AAAA,sBACP,8BAAC,cAAW,WAAU,0BAAyB;AAAA;AAAA,kBACjD;AAAA,kBACA,oBAAC,QACC,8BAAC,QAAG,WAAU,mBACX,iBAAO,KAAK,KAAK,EAAE,IAAI,CAAC,OAAO;AAC9B,0BAAM,OAAO,MAAM,EAAE;AACrB,2BAAO,oBAAC,QACN,8BAAC,YAAS,OAAO,IAAI,WAAU,yBAAwB,eAAa,KAAK,OACtE,eAAK,MACR,KAHc,EAIhB;AAAA,kBACF,CAAC,GACH,GACF;AAAA;AAAA;AAAA,YACF,GACF;AAAA,aACF,GAEF;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,uBAAuB;AAAA,cACvB,mBAAmB;AAAA,cACnB,aAAa;AAAA,cAEZ;AAAA;AAAA,UACH;AAAA;AAAA;AAAA,IACF,GACF;AAAA,EACF;AACF;AAEA,MAAM,cAAc,gBAAgB,EAAE,mBAAmB;AACzD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"838074c1cccc813ecacd0208f5f23e782debdabc"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return $t=function(){return s},s}$t();function v9e(n){$t().f[0]++;const e=($t().s[0]++,[]);return $t().s[1]++,e.push({title:n("General layout properties"),id:"General_layout_properties",type:"properties",fields:Object.keys(Zf.layout_symbol).filter(t=>($t().f[1]++,$t().s[2]++,t.startsWith("symbol-")))}),$t().s[3]++,e.push({title:n("Text layout properties"),id:"Text_layout_properties",type:"properties",fields:Object.keys(Zf.layout_symbol).filter(t=>($t().f[2]++,$t().s[4]++,t.startsWith("text-")))}),$t().s[5]++,e.push({title:n("Icon layout properties"),id:"Icon_layout_properties",type:"properties",fields:Object.keys(Zf.layout_symbol).filter(t=>($t().f[3]++,$t().s[6]++,t.startsWith("icon-")))}),$t().s[7]++,e.push({title:n("Text paint properties"),id:"Text_paint_properties",type:"properties",fields:Object.keys(Zf.paint_symbol).filter(t=>($t().f[4]++,$t().s[8]++,t.startsWith("text-")))}),$t().s[9]++,e.push({title:n("Icon paint properties"),id:"Icon_paint_properties",type:"properties",fields:Object.keys(Zf.paint_symbol).filter(t=>($t().f[5]++,$t().s[10]++,t.startsWith("icon-")))}),$t().s[11]++,e}function boe(n,e){if($t().f[6]++,$t().s[12]++,Object.keys(Zf.layer.type.values).indexOf(n)<0)return $t().b[0][0]++,$t().s[13]++,[];if($t().b[0][1]++,$t().s[14]++,n==="symbol")return $t().b[1][0]++,$t().s[15]++,v9e(e);$t().b[1][1]++;const t=($t().s[16]++,[]);return $t().s[17]++,Object.keys(Zf["paint_"+n]).length>0?($t().b[2][0]++,$t().s[18]++,t.push({title:e("Paint properties"),id:"Paint_properties",type:"properties",fields:Object.keys(Zf["paint_"+n])})):$t().b[2][1]++,$t().s[19]++,Object.keys(Zf["layout_"+n]).length>0?($t().b[3][0]++,$t().s[20]++,t.push({title:e("Layout properties"),id:"Layout_properties",type:"properties",fields:Object.keys(Zf["layout_"+n])})):$t().b[3][1]++,$t().s[21]++,t}function qV(n,e){$t().f[7]++;const t=($t().s[22]++,{id:"layer",title:e("Layer"),type:"layer"}),i=($t().s[23]++,{id:"filter",title:e("Filter"),type:"filter"}),r=($t().s[24]++,{id:"jsoneditor",title:e("JSON Editor"),type:"jsoneditor"});return $t().s[25]++,[t,i].concat(boe(n,e)).concat([r])}class b9e extends On.Component{static defaultProps=($t().s[26]++,{onLayerChanged:()=>{$t().f[8]++},onLayerIdChange:()=>{$t().f[9]++},onLayerDestroyed:()=>{$t().f[10]++}});constructor(e){$t().f[11]++,$t().s[27]++,super(e);const t=($t().s[28]++,{});$t().s[29]++;for(const i of qV(this.props.layer.type,e.t))$t().s[30]++,t[i.title]=!0;$t().s[31]++,this.state={editorGroups:t}}static getDerivedStateFromProps(e,t){$t().f[12]++;const i=($t().s[32]++,{...t.editorGroups});$t().s[33]++;for(const r of boe(e.layer.type,e.t))$t().s[34]++,r.title in i?$t().b[4][1]++:($t().b[4][0]++,$t().s[35]++,i[r.title]=!0);return $t().s[36]++,{editorGroups:i}}changeProperty(e,t,i){$t().f[13]++,$t().s[37]++,this.props.onLayerChanged(this.props.layerIndex,r7e(this.props.layer,e,t,i))}onGroupToggle(e,t){$t().f[14]++;const i=($t().s[38]++,{...this.state.editorGroups,[e]:t});$t().s[39]++,this.setState({editorGroups:i})}renderGroupType(e,t){$t().f[15]++;let i=($t().s[40]++,"");$t().s[41]++,this.props.layer.metadata?($t().b[5][0]++,$t().s[42]++,i=this.props.layer.metadata["maputnik:comment"]):$t().b[5][1]++;const{errors:r,layerIndex:o}=($t().s[43]++,this.props),s=($t().s[44]++,{});$t().s[45]++,r.forEach(h=>{$t().f[16]++,$t().s[46]++,$t().b[7][0]++,h.parsed&&($t().b[7][1]++,h.parsed.type==="layer")&&($t().b[7][2]++,h.parsed.data.index==o)?($t().b[6][0]++,$t().s[47]++,s[h.parsed.data.key]={message:h.parsed.data.message}):$t().b[6][1]++});let a;const c=($t().s[48]++,this.props.layer);switch($t().s[49]++,Object.prototype.hasOwnProperty.call(this.props.sources,c.source)?($t().b[8][0]++,$t().s[50]++,a=this.props.sources[c.source].layers):$t().b[8][1]++,$t().s[51]++,e){case"layer":return $t().b[9][0]++,$t().s[52]++,te.jsxs("div",{children:[te.jsx(tre,{value:this.props.layer.id,wdKey:"layer-editor.layer-id",error:s.id,onChange:h=>($t().f[17]++,$t().s[53]++,this.props.onLayerIdChange(this.props.layerIndex,this.props.layer.id,h))}),te.jsx(ere,{disabled:!0,error:s.type,value:this.props.layer.type,onChange:h=>($t().f[18]++,$t().s[54]++,this.props.onLayerChanged(this.props.layerIndex,i7e(this.props.layer,h)))}),($t().b[10][0]++,this.props.layer.type!=="background"&&($t().b[10][1]++,te.jsx(vre,{error:s.source,sourceIds:Object.keys(this.props.sources),value:this.props.layer.source,onChange:h=>($t().f[19]++,$t().s[55]++,this.changeProperty(null,"source",h))}))),($t().b[11][0]++,!WR.includes(this.props.layer.type)&&($t().b[11][1]++,te.jsx(bre,{error:s["source-layer"],sourceLayerIds:a,value:this.props.layer["source-layer"],onChange:h=>($t().f[20]++,$t().s[56]++,this.changeProperty(null,"source-layer",h))}))),te.jsx(f9e,{error:s.minzoom,value:this.props.layer.minzoom,onChange:h=>($t().f[21]++,$t().s[57]++,this.changeProperty(null,"minzoom",h))}),te.jsx(m9e,{error:s.maxzoom,value:this.props.layer.maxzoom,onChange:h=>($t().f[22]++,$t().s[58]++,this.changeProperty(null,"maxzoom",h))}),te.jsx(y9e,{error:s.comment,value:i,onChange:h=>($t().f[23]++,$t().s[59]++,this.changeProperty("metadata","maputnik:comment",h==""?($t().b[12][0]++,void 0):($t().b[12][1]++,h)))})]});case"filter":return $t().b[9][1]++,$t().s[60]++,te.jsx("div",{children:te.jsx("div",{className:"maputnik-filter-editor-wrapper",children:te.jsx(uIe,{errors:s,filter:this.props.layer.filter,properties:this.props.vectorLayers[this.props.layer["source-layer"]],onChange:h=>($t().f[24]++,$t().s[61]++,this.changeProperty(null,"filter",h))})})});case"properties":return $t().b[9][2]++,$t().s[62]++,te.jsx(A9e,{errors:s,layer:this.props.layer,groupFields:t,spec:this.props.spec,onChange:this.changeProperty.bind(this)});case"jsoneditor":return $t().b[9][3]++,$t().s[63]++,te.jsx(F6,{lintType:"layer",value:this.props.layer,onChange:h=>{$t().f[25]++,$t().s[64]++,this.props.onLayerChanged(this.props.layerIndex,h)}});default:return $t().b[9][4]++,$t().s[65]++,te.jsx(te.Fragment,{})}}moveLayer(e){$t().f[26]++,$t().s[66]++,this.props.onMoveLayer({oldIndex:this.props.layerIndex,newIndex:this.props.layerIndex+e})}render(){$t().f[27]++;const e=($t().s[67]++,this.props.t),t=($t().s[68]++,[]),i=($t().s[69]++,this.props.layer.type),r=($t().s[70]++,qV(i,e).filter(c=>($t().f[28]++,$t().s[71]++,$t().b[13][0]++,!(i==="background"&&($t().b[13][1]++,c.type==="source")))).map(c=>{$t().f[29]++;const h=($t().s[72]++,c.id);return $t().s[73]++,t.push(h),$t().s[74]++,te.jsx(h9e,{"data-wd-key":c.title,id:h,title:c.title,isActive:this.state.editorGroups[c.title],onActiveToggle:this.onGroupToggle.bind(this,c.title),children:this.renderGroupType(c.type,c.fields)},h)})),o=($t().s[75]++,$t().b[14][0]++,this.props.layer.layout||($t().b[14][1]++,{})),s=($t().s[76]++,{delete:{text:e("Delete"),handler:()=>($t().f[30]++,$t().s[77]++,this.props.onLayerDestroy(this.props.layerIndex)),wdKey:"menu-delete-layer"},duplicate:{text:e("Duplicate"),handler:()=>($t().f[31]++,$t().s[78]++,this.props.onLayerCopy(this.props.layerIndex)),wdKey:"menu-duplicate-layer"},hide:{text:o.visibility==="none"?($t().b[15][0]++,e("Show")):($t().b[15][1]++,e("Hide")),handler:()=>($t().f[32]++,$t().s[79]++,this.props.onLayerVisibilityToggle(this.props.layerIndex)),wdKey:"menu-hide-layer"},moveLayerUp:{text:e("Move layer up"),disabled:this.props.isFirstLayer,handler:()=>($t().f[33]++,$t().s[80]++,this.moveLayer(-1)),wdKey:"menu-move-layer-up"},moveLayerDown:{text:e("Move layer down"),disabled:this.props.isLastLayer,handler:()=>($t().f[34]++,$t().s[81]++,this.moveLayer(1)),wdKey:"menu-move-layer-down"}});function a(c,h){$t().f[35]++,$t().s[82]++,h.stopPropagation(),$t().s[83]++,s[c].handler()}return $t().s[84]++,te.jsx(lx.Provider,{value:{size:"14px",color:"#8e8e8e"},children:te.jsxs("section",{className:"maputnik-layer-editor",role:"main","aria-label":e("Layer editor"),"data-wd-key":"layer-editor",children:[te.jsx("header",{"data-wd-key":"layer-editor.header",children:te.jsxs("div",{className:"layer-header",children:[te.jsx("h2",{className:"layer-header__title",children:e("Layer: {{layerId}}",{layerId:voe(this.props.layer.id)})}),te.jsx("div",{className:"layer-header__info",children:te.jsxs(V5.Wrapper,{className:"more-menu",onSelection:a,closeOnSelection:!1,children:[te.jsx(V5.Button,{id:"skip-target-layer-editor","data-wd-key":"skip-target-layer-editor",className:"more-menu__button",title:"Layer options",children:te.jsx(rde,{className:"more-menu__button__svg"})}),te.jsx(V5.Menu,{children:te.jsx("ul",{className:"more-menu__menu",children:Object.keys(s).map(c=>{$t().f[36]++;const h=($t().s[85]++,s[c]);return $t().s[86]++,te.jsx("li",{children:te.jsx(V5.MenuItem,{value:c,className:"more-menu__menu__item","data-wd-key":h.wdKey,children:h.text})},c)})})})]})})]})}),te.jsx(I7e,{allowMultipleExpanded:!0,allowZeroExpanded:!0,preExpanded:t,children:r})]})})}}const C9e=($t().s[87]++,Po()(b9e));var VV=function(n,e,t){if(t||arguments.length===2)for(var i=0,r=e.length,o;i<r;i++)(o||!(i in e))&&(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return n.concat(o||Array.prototype.slice.call(e))},_9e=(function(){function n(e,t,i){this.name=e,this.version=t,this.os=i,this.type="browser"}return n})(),x9e=(function(){function n(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return n})(),M9e=(function(){function n(e,t,i,r){this.name=e,this.version=t,this.os=i,this.bot=r,this.type="bot-device"}return n})(),w9e=(function(){function n(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return n})(),S9e=(function(){function n(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return n})(),E9e=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,B9e=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,$V=3,O9e=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",E9e]],HV=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function I9e(n){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new S9e:typeof navigator<"u"?T9e(navigator.userAgent):D9e()}function k9e(n){return n!==""&&O9e.reduce(function(e,t){var i=t[0],r=t[1];if(e)return e;var o=r.exec(n);return!!o&&[i,o]},!1)}function T9e(n){var e=k9e(n);if(!e)return null;var t=e[0],i=e[1];if(t==="searchbot")return new w9e;var r=i[1]&&i[1].split(".").join("_").split("_").slice(0,3);r?r.length<$V&&(r=VV(VV([],r,!0),P9e($V-r.length),!0)):r=[];var o=r.join("."),s=R9e(n),a=B9e.exec(n);return a&&a[1]?new M9e(t,o,s,a[1]):new _9e(t,o,s)}function R9e(n){for(var e=0,t=HV.length;e<t;e++){var i=HV[e],r=i[0],o=i[1],s=o.exec(n);if(s)return r}return null}function D9e(){var n=typeof process<"u"&&process.version;return n?new x9e(process.version.slice(1)):null}function P9e(n){for(var e=[],t=0;t<n;t++)e.push("0");return e}const U9e="maputnik",K9e="3.0.0",ZV={name:U9e,version:K9e},L9e="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='1200'%20height='1200'%20viewBox='0%200%20100%20100'%3e%3cg%20class='map'%20stroke='%23000'%3e%3cuse%20xlink:href='%23ref-1--map__main'%20fill='%234eba6f'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--map__line1'%20fill='none'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--map__line2'%20fill='none'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--map__line3'%20fill='none'%3e%3c/use%3e%3c/g%3e%3cg%20class='palette'%3e%3cuse%20xlink:href='%23ref-1--palette__main'%20fill='%23fff'%20stroke='%23000'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__inner'%20fill='none'%20stroke='%23000'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle5'%20fill='%23f7c44c'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle4'%20fill='%234eba6f'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle3'%20fill='%23f7c44c'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle2'%20fill='%234eba6f'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle1'%20fill='%23f7c44c'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle0'%20fill='%234eba6f'%3e%3c/use%3e%3c/g%3e%3cg%20class='brush'%20stroke='%23000'%3e%3cuse%20xlink:href='%23ref-1--brush__bottom'%20fill='%23f7c44c'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--brush__top'%20fill='%23fff'%3e%3c/use%3e%3c/g%3e%3cdefs%3e%3cpath%20id='ref-1--map__main'%20stroke-width='2.366'%20stroke-linejoin='round'%20d='M18.84%207.717l15.44%207.542%2015.75-7.762%2015.7%207.857L81.005%207.67%2096.31%2054.052%2073.598%2062.12%2050.93%2053.872l-25.1%208.066-22.668-8.066z'%3e%3c/path%3e%3cpath%20id='ref-1--map__line1'%20d='M65.556%2015.07l7.647%2046.838'%20stroke-width='1.104'%3e%3c/path%3e%3cpath%20id='ref-1--map__line2'%20d='M50.261%207.422l.717%2046.6'%20stroke-width='1.104'%3e%3c/path%3e%3cpath%20id='ref-1--map__line3'%20d='M34.011%2015.07l-8.603%2046.6'%20stroke-width='1.104'%3e%3c/path%3e%3cpath%20id='ref-1--palette__main'%20stroke-width='2.3'%20d='M47.352%2030.887c7.993.226%2016.934%209.725%2017.954%2015.25%201.02%205.527-.743%2011.125-4.298%2013.875-3.554%202.75-8.6%202.905-8.723%208.302-.097%204.237%208.457%208.5%208.088%2015.653-.406%207.857-15.508%2013.15-30.943%206.102-8.556-3.906-14.249-13.653-13.385-26.238C16.833%2052.334%2022.32%2043.658%2027.382%2039c5.977-5.503%2011.977-8.337%2019.97-8.112z'%3e%3c/path%3e%3ccircle%20id='ref-1--palette__inner'%20stroke-width='2.3'%20cx='41.873'%20cy='61.901'%20r='6.389'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle5'%20cy='44.56'%20cx='54.347'%20r='4.336'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle4'%20cx='40.443'%20cy='41.555'%20r='4.336'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle3'%20r='4.336'%20cy='51.102'%20cx='29.651'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle2'%20cx='25.293'%20cy='65.836'%20r='4.336'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle1'%20r='4.336'%20cy='79.326'%20cx='32.764'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle0'%20cx='46.669'%20cy='80.571'%20r='4.336'%3e%3c/circle%3e%3cpath%20id='ref-1--brush__bottom'%20d='M76.333%2089.333c-1.645-9.794-4.375-35.26-4.32-37.887.056-2.627%202.52-4.34%205.36-4.317%202.842.022%205.098%201.87%205.314%204.27.107%201.2-1.576%2028.06-2.318%2037.844-.332%204.374-3.31%204.413-4.036.09z'%20stroke-width='2.3'%20stroke-linejoin='round'%3e%3c/path%3e%3cpath%20id='ref-1--brush__top'%20stroke-linejoin='round'%20stroke-width='2.3'%20d='M77.184%2026.428s-5.621%207.02-5.621%2011.978c0%204.957%202.206%206.878%205.81%206.878%203.606%200%205.148-1.708%205.29-6.736.142-5.028-5.479-12.12-5.479-12.12z'%3e%3c/path%3e%3c/defs%3e%3c/svg%3e";function Pi(){var n="/home/runner/work/maputnik/maputnik/src/components/AppToolbar.tsx",e="d581519332bdff74d3cb5001df8051c24d7c7191",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/AppToolbar.tsx",statementMap:{0:{start:{line:20,column:16},end:{line:20,column:24}},1:{start:{line:21,column:41},end:{line:21,column:89}},2:{start:{line:24,column:4},end:{line:24,column:107}},3:{start:{line:29,column:4},end:{line:39,column:6}},4:{start:{line:44,column:4},end:{line:51,column:6}},5:{start:{line:56,column:4},end:{line:64,column:6}},6:{start:{line:68,column:10},end:{line:76,column:3}},7:{start:{line:78,column:4},end:{line:78,column:34}},8:{start:{line:81,column:4},end:{line:81,column:40}},9:{start:{line:83,column:11},end:{line:90,column:3}},10:{start:{line:84,column:4},end:{line:89,column:5}},11:{start:{line:85,column:6},end:{line:85,column:59}},12:{start:{line:87,column:17},end:{line:87,column:65}},13:{start:{line:88,column:6},end:{line:88,column:17}},14:{start:{line:92,column:14},end:{line:92,column:26}},15:{start:{line:93,column:18},end:{line:129,column:5}},16:{start:{line:130,column:24},end:{line:132,column:6}},17:{start:{line:131,column:6},end:{line:131,column:45}},18:{start:{line:133,column:4},end:{line:259,column:12}},19:{start:{line:144,column:33},end:{line:144,column:58}},20:{start:{line:153,column:33},end:{line:153,column:60}},21:{start:{line:162,column:33},end:{line:162,column:51}},22:{start:{line:189,column:80},end:{line:189,column:112}},23:{start:{line:193,column:82},end:{line:193,column:116}},24:{start:{line:197,column:87},end:{line:197,column:125}},25:{start:{line:201,column:83},end:{line:201,column:118}},26:{start:{line:205,column:84},end:{line:205,column:120}},27:{start:{line:209,column:88},end:{line:209,column:127}},28:{start:{line:222,column:33},end:{line:222,column:69}},29:{start:{line:225,column:38},end:{line:225,column:59}},30:{start:{line:226,column:20},end:{line:226,column:157}},31:{start:{line:228,column:115},end:{line:228,column:148}},32:{start:{line:229,column:20},end:{line:229,column:133}},33:{start:{line:245,column:33},end:{line:245,column:74}},34:{start:{line:248,column:18},end:{line:248,column:94}},35:{start:{line:262,column:19},end:{line:262,column:56}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:23,column:2},end:{line:23,column:3}},loc:{start:{line:23,column:11},end:{line:25,column:3}},line:23},1:{name:"(anonymous_1)",decl:{start:{line:28,column:2},end:{line:28,column:3}},loc:{start:{line:28,column:11},end:{line:40,column:3}},line:28},2:{name:"(anonymous_2)",decl:{start:{line:43,column:2},end:{line:43,column:3}},loc:{start:{line:43,column:11},end:{line:52,column:3}},line:43},3:{name:"(anonymous_3)",decl:{start:{line:55,column:2},end:{line:55,column:3}},loc:{start:{line:55,column:11},end:{line:65,column:3}},line:55},4:{name:"(anonymous_4)",decl:{start:{line:77,column:2},end:{line:77,column:3}},loc:{start:{line:77,column:23},end:{line:79,column:3}},line:77},5:{name:"(anonymous_5)",decl:{start:{line:80,column:2},end:{line:80,column:3}},loc:{start:{line:80,column:28},end:{line:82,column:3}},line:80},6:{name:"(anonymous_6)",decl:{start:{line:83,column:11},end:{line:83,column:12}},loc:{start:{line:83,column:23},end:{line:90,column:3}},line:83},7:{name:"(anonymous_7)",decl:{start:{line:91,column:2},end:{line:91,column:3}},loc:{start:{line:91,column:11},end:{line:260,column:3}},line:91},8:{name:"(anonymous_8)",decl:{start:{line:130,column:35},end:{line:130,column:36}},loc:{start:{line:130,column:45},end:{line:132,column:5}},line:130},9:{name:"(anonymous_9)",decl:{start:{line:144,column:25},end:{line:144,column:26}},loc:{start:{line:144,column:33},end:{line:144,column:58}},line:144},10:{name:"(anonymous_10)",decl:{start:{line:153,column:25},end:{line:153,column:26}},loc:{start:{line:153,column:33},end:{line:153,column:60}},line:153},11:{name:"(anonymous_11)",decl:{start:{line:162,column:25},end:{line:162,column:26}},loc:{start:{line:162,column:33},end:{line:162,column:51}},line:162},12:{name:"(anonymous_12)",decl:{start:{line:189,column:74},end:{line:189,column:75}},loc:{start:{line:189,column:80},end:{line:189,column:112}},line:189},13:{name:"(anonymous_13)",decl:{start:{line:193,column:76},end:{line:193,column:77}},loc:{start:{line:193,column:82},end:{line:193,column:116}},line:193},14:{name:"(anonymous_14)",decl:{start:{line:197,column:81},end:{line:197,column:82}},loc:{start:{line:197,column:87},end:{line:197,column:125}},line:197},15:{name:"(anonymous_15)",decl:{start:{line:201,column:77},end:{line:201,column:78}},loc:{start:{line:201,column:83},end:{line:201,column:118}},line:201},16:{name:"(anonymous_16)",decl:{start:{line:205,column:78},end:{line:205,column:79}},loc:{start:{line:205,column:84},end:{line:205,column:120}},line:205},17:{name:"(anonymous_17)",decl:{start:{line:209,column:82},end:{line:209,column:83}},loc:{start:{line:209,column:88},end:{line:209,column:127}},line:209},18:{name:"(anonymous_18)",decl:{start:{line:222,column:26},end:{line:222,column:27}},loc:{start:{line:222,column:33},end:{line:222,column:69}},line:222},19:{name:"(anonymous_19)",decl:{start:{line:225,column:31},end:{line:225,column:32}},loc:{start:{line:225,column:38},end:{line:225,column:59}},line:225},20:{name:"(anonymous_20)",decl:{start:{line:225,column:65},end:{line:225,column:66}},loc:{start:{line:225,column:75},end:{line:227,column:19}},line:225},21:{name:"(anonymous_21)",decl:{start:{line:228,column:108},end:{line:228,column:109}},loc:{start:{line:228,column:115},end:{line:228,column:148}},line:228},22:{name:"(anonymous_22)",decl:{start:{line:228,column:154},end:{line:228,column:155}},loc:{start:{line:228,column:164},end:{line:230,column:19}},line:228},23:{name:"(anonymous_23)",decl:{start:{line:245,column:26},end:{line:245,column:27}},loc:{start:{line:245,column:33},end:{line:245,column:74}},line:245},24:{name:"(anonymous_24)",decl:{start:{line:247,column:65},end:{line:247,column:66}},loc:{start:{line:247,column:83},end:{line:249,column:17}},line:247}},branchMap:{0:{loc:{start:{line:84,column:4},end:{line:89,column:5}},type:"if",locations:[{start:{line:84,column:4},end:{line:89,column:5}},{start:{line:86,column:11},end:{line:89,column:5}}],line:84}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/AppToolbar.tsx"],names:[],mappings:"AAmCW,SAAA,KAwLG,YAxLH;AAnCX,OAAO,WAAW;AAClB,OAAO,gBAAgB;AACvB,SAAQ,cAAa;AAErB;AAAA,EACE;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,OACK;AACP,OAAO,aAAa;AAEpB,OAAO,kBAAkB;AACzB,SAAS,uBAA6C;AACtD,SAAS,0BAA0B;AAInC,MAAM,UAAU,OAAO;AACvB,MAAM,mCAAmC,CAAC,UAAU,SAAS,EAAE,QAAQ,QAAS,IAAI,IAAI;AASxF,MAAM,iBAAiB,MAAM,UAAyB;AAAA,EACpD,SAAS;AACP,+BAAQ,QAAA,EAAK,WAAU,sBAAsB,UAAA,KAAK,MAAM,SAAA,CAAS;AAAA,EACnE;AACF;AAQA,MAAM,oBAAoB,MAAM,UAA4B;AAAA,EAC1D,SAAS;AACP,WAAO;AAAA,MAAC;AAAA,MAAA;AAAA,QACN,WAAW,WAAW,yBAAyB,KAAK,MAAM,SAAS;AAAA,QACnE,MAAM,KAAK,MAAM;AAAA,QACjB,KAAI;AAAA,QACJ,QAAO;AAAA,QACP,eAAY;AAAA,QAEX,eAAK,MAAM;AAAA,MAAA;AAAA,IACd;AAAA,EACF;AACF;AAOA,MAAM,sBAAsB,MAAM,UAA8B;AAAA,EAC9D,SAAS;AACP,WAAO;AAAA,MAAC;AAAA,MAAA;AAAA,QACN,WAAU;AAAA,QACV,eAAa,KAAK,MAAM;AAAA,QAEvB,eAAK,MAAM;AAAA,MAAA;AAAA,IACd;AAAA,EACF;AACF;AAQA,MAAM,sBAAsB,MAAM,UAA8B;AAAA,EAC9D,SAAS;AACP,WAAO;AAAA,MAAC;AAAA,MAAA;AAAA,QACN,WAAU;AAAA,QACV,eAAa,KAAK,MAAM;AAAA,QACxB,SAAS,KAAK,MAAM;AAAA,QAEnB,eAAK,MAAM;AAAA,MAAA;AAAA,IACd;AAAA,EACF;AACF;AAmBA,MAAM,2BAA2B,MAAM,UAAmC;AAAA,EACxE,QAAQ;AAAA,IACN,QAAQ;AAAA,MACN,UAAU;AAAA,MACV,SAAS;AAAA,MACT,MAAM;AAAA,MACN,KAAK;AAAA,MACL,QAAQ;AAAA,IACV;AAAA,EACF;AAAA,EAEA,gBAAgB,KAAe;AAC7B,SAAK,MAAM,cAAc,GAAG;AAAA,EAC9B;AAAA,EAEA,qBAAqB,KAAa;AAChC,SAAK,MAAM,KAAK,eAAe,GAAG;AAAA,EACpC;AAAA,EAEA,SAAS,CAAC,WAAmB;AAC3B,QAAI,WAAW,OAAO;AACnB,eAAS,cAAc,oBAAoB,EAAwB,MAAM;AAAA,IAC5E,OACK;AACH,YAAM,KAAK,SAAS,cAAc,kBAAgB,MAAM;AACxD,SAAG,MAAM;AAAA,IACX;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,QAAQ;AAAA,MACZ;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,KAAK;AAAA,MAChB;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,SAAS;AAAA,QAClB,UAAU,KAAK,MAAM,aAAa;AAAA,MACpC;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,qBAAqB;AAAA,QAC9B,UAAU,CAAC;AAAA,MACb;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,mBAAmB;AAAA,QAC5B,UAAU,CAAC;AAAA,MACb;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,mBAAmB;AAAA,QAC5B,UAAU,CAAC;AAAA,MACb;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,sBAAsB;AAAA,QAC/B,UAAU,CAAC;AAAA,MACb;AAAA,IACF;AAEA,UAAM,cAAc,MAAM,KAAK,CAAC,SAAS;AACvC,aAAO,KAAK,OAAO,KAAK,MAAM;AAAA,IAChC,CAAC;AAED,+BAAQ,OAAA,EAAI,WAAU,oBACpB,UAAA,qBAAC,OAAA,EAAI,WAAU,2BACb,UAAA;AAAA,MAAA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,WAAU;AAAA,UAGV,UAAA;AAAA,YAAA;AAAA,cAAC;AAAA,cAAA;AAAA,gBACC,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACV,SAAS,CAAA,OAAM,KAAK,OAAO,YAAY;AAAA,gBAEtC,YAAE,aAAa;AAAA,cAAA;AAAA,YAClB;AAAA,YACA;AAAA,cAAC;AAAA,cAAA;AAAA,gBACC,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACV,SAAS,CAAA,OAAM,KAAK,OAAO,cAAc;AAAA,gBAExC,YAAE,cAAc;AAAA,cAAA;AAAA,YACnB;AAAA,YACA;AAAA,cAAC;AAAA,cAAA;AAAA,gBACC,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACV,SAAS,CAAA,OAAM,KAAK,OAAO,KAAK;AAAA,gBAE/B,YAAE,UAAU;AAAA,cAAA;AAAA,YACf;AAAA,YACA;AAAA,cAAC;AAAA,cAAA;AAAA,gBACC,WAAU;AAAA,gBACV,QAAO;AAAA,gBACP,KAAI;AAAA,gBACJ,MAAK;AAAA,gBAEL,UAAA;AAAA,kBAAA,oBAAC,SAAI,KAAK,cAAc,KAAK,EAAE,oBAAoB,EAAA,CAAG;AAAA,uCACrD,MAAA,EACC,UAAA;AAAA,oBAAA,oBAAC,QAAA,EAAK,WAAU,yBAAyB,UAAA,QAAQ,KAAA,CAAK;AAAA,oBACtD,qBAAC,QAAA,EAAK,WAAU,4BAA2B,UAAA;AAAA,sBAAA;AAAA,sBAAE,QAAQ;AAAA,oBAAA,EAAA,CAAQ;AAAA,kBAAA,EAAA,CAC/D;AAAA,gBAAA;AAAA,cAAA;AAAA,YACF;AAAA,UAAA;AAAA,QAAA;AAAA,MACF;AAAA,2BACC,OAAA,EAAI,WAAU,6BAA4B,MAAK,cAAa,cAAW,WACtE,UAAA;AAAA,QAAA,qBAAC,eAAA,EAAc,OAAM,YAAW,SAAS,MAAM,KAAK,MAAM,cAAc,MAAM,GAC5E,UAAA;AAAA,UAAA,oBAAC,iBAAA,CAAA,CAAgB;AAAA,UACjB,oBAAC,UAAA,EAAU,UAAA,EAAE,MAAM,EAAA,CAAE;AAAA,QAAA,EAAA,CACvB;AAAA,QACA,qBAAC,eAAA,EAAc,OAAM,cAAa,SAAS,MAAM,KAAK,MAAM,cAAc,QAAQ,GAChF,UAAA;AAAA,UAAA,oBAAC,QAAA,CAAA,CAAO;AAAA,UACR,oBAAC,UAAA,EAAU,UAAA,EAAE,MAAM,EAAA,CAAE;AAAA,QAAA,EAAA,CACvB;AAAA,QACA,qBAAC,eAAA,EAAc,OAAM,mBAAkB,SAAS,MAAM,KAAK,MAAM,cAAc,YAAY,GACzF,UAAA;AAAA,UAAA,oBAAC,QAAA,CAAA,CAAO;AAAA,UACR,oBAAC,UAAA,EAAU,UAAA,EAAE,aAAa,EAAA,CAAE;AAAA,QAAA,EAAA,CAC9B;AAAA,QACA,qBAAC,eAAA,EAAc,OAAM,eAAc,SAAS,MAAM,KAAK,MAAM,cAAc,SAAS,GAClF,UAAA;AAAA,UAAA,oBAAC,UAAA,CAAA,CAAS;AAAA,UACV,oBAAC,UAAA,EAAU,UAAA,EAAE,cAAc,EAAA,CAAE;AAAA,QAAA,EAAA,CAC/B;AAAA,QACA,qBAAC,eAAA,EAAc,OAAM,gBAAe,SAAS,MAAM,KAAK,MAAM,cAAc,UAAU,GACpF,UAAA;AAAA,UAAA,oBAAC,YAAA,CAAA,CAAW;AAAA,UACZ,oBAAC,UAAA,EAAU,UAAA,EAAE,gBAAgB,EAAA,CAAE;AAAA,QAAA,EAAA,CACjC;AAAA,QACA,qBAAC,eAAA,EAAc,OAAM,oBAAmB,SAAS,MAAM,KAAK,MAAM,cAAc,aAAa,GAC3F,UAAA;AAAA,UAAA,oBAAC,UAAA,CAAA,CAAS;AAAA,UACV,oBAAC,UAAA,EAAU,UAAA,EAAE,cAAc,EAAA,CAAE;AAAA,QAAA,EAAA,CAC/B;AAAA,QAEA,qBAAC,eAAA,EAAc,OAAM,eACnB,UAAA;AAAA,UAAA,oBAAC,cAAA,CAAA,CAAa;AAAA,+BACb,UAAA,EAAU,UAAA;AAAA,YAAA,EAAE,MAAM;AAAA,YACjB;AAAA,cAAC;AAAA,cAAA;AAAA,gBACC,WAAU;AAAA,gBACV,eAAY;AAAA,gBACZ,UAAU,CAAC,MAAM,KAAK,gBAAgB,EAAE,OAAO,KAAiB;AAAA,gBAChE,OAAO,aAAa;AAAA,gBAEnB,UAAA;AAAA,kBAAA,MAAM,OAAO,OAAK,EAAE,UAAU,SAAS,EAAE,IAAI,CAAC,SAAS;AACtD,2BACE,oBAAC,UAAA,EAAqB,OAAO,KAAK,IAAI,UAAU,KAAK,UAAU,eAAa,KAAK,IAC9E,UAAA,KAAK,MAAA,GADK,KAAK,EAElB;AAAA,kBAEJ,CAAC;AAAA,kBACD,oBAAC,YAAA,EAAS,OAAO,EAAE,qBAAqB,GACrC,UAAA,MAAM,OAAO,CAAA,MAAK,EAAE,UAAU,qBAAqB,EAAE,IAAI,CAAC,SAAS;AAClE,2BACE,oBAAC,UAAA,EAAqB,OAAO,KAAK,IAAI,UAAU,KAAK,UAClD,UAAA,KAAK,MAAA,GADK,KAAK,EAElB;AAAA,kBAEJ,CAAC,EAAA,CACH;AAAA,gBAAA;AAAA,cAAA;AAAA,YACF;AAAA,UAAA,EAAA,CACF;AAAA,QAAA,EAAA,CACF;AAAA,QAEA,qBAAC,eAAA,EAAc,OAAM,gBACnB,UAAA;AAAA,UAAA,oBAAC,YAAA,CAAA,CAAW;AAAA,+BACX,UAAA,EAAS,UAAA;AAAA,YAAA;AAAA,YACR;AAAA,cAAC;AAAA,cAAA;AAAA,gBACC,WAAU;AAAA,gBACV,eAAY;AAAA,gBACZ,UAAU,CAAC,MAAM,KAAK,qBAAqB,EAAE,OAAO,KAAK;AAAA,gBACzD,OAAO,KAAK,MAAM,KAAK;AAAA,gBAEtB,UAAA,OAAO,QAAQ,kBAAkB,EAAE,IAAI,CAAC,CAAC,MAAM,IAAI,MAAM;AACxD,yBACE,oBAAC,UAAA,EAAkB,OAAO,MACvB,kBADU,IAEb;AAAA,gBAEJ,CAAC;AAAA,cAAA;AAAA,YACH;AAAA,UAAA,EAAA,CACF;AAAA,QAAA,EAAA,CACF;AAAA,QAEA,qBAAC,aAAA,EAAY,MAAM,6CACjB,UAAA;AAAA,UAAA,oBAAC,eAAA,CAAA,CAAc;AAAA,UACf,oBAAC,UAAA,EAAU,UAAA,EAAE,MAAM,EAAA,CAAE;AAAA,QAAA,EAAA,CACvB;AAAA,MAAA,EAAA,CACF;AAAA,IAAA,EAAA,CACF,EAAA,CACF;AAAA,EACF;AACF;AAEA,MAAM,aAAa,gBAAgB,EAAE,kBAAkB;AACvD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d581519332bdff74d3cb5001df8051c24d7c7191"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Pi=function(){return s},s}Pi();const F9e=(Pi().s[0]++,I9e()),ew=(Pi().s[1]++,["chrome","firefox"].indexOf(F9e.name)>-1);class J0 extends On.Component{render(){return Pi().f[0]++,Pi().s[2]++,te.jsx("span",{className:"maputnik-icon-text",children:this.props.children})}}class z9e extends On.Component{render(){return Pi().f[1]++,Pi().s[3]++,te.jsx("a",{className:f0("maputnik-toolbar-link",this.props.className),href:this.props.href,rel:"noopener noreferrer",target:"_blank","data-wd-key":"toolbar:link",children:this.props.children})}}class XV extends On.Component{render(){return Pi().f[2]++,Pi().s[4]++,te.jsx("div",{className:"maputnik-toolbar-select","data-wd-key":this.props.wdKey,children:this.props.children})}}class f_ extends On.Component{render(){return Pi().f[3]++,Pi().s[5]++,te.jsx("button",{className:"maputnik-toolbar-action","data-wd-key":this.props.wdKey,onClick:this.props.onClick,children:this.props.children})}}class j9e extends On.Component{state=(Pi().s[6]++,{isOpen:{settings:!1,sources:!1,open:!1,add:!1,export:!1}});handleSelection(e){Pi().f[4]++,Pi().s[7]++,this.props.onSetMapState(e)}handleLanguageChange(e){Pi().f[5]++,Pi().s[8]++,this.props.i18n.changeLanguage(e)}onSkip=(Pi().s[9]++,e=>{if(Pi().f[6]++,Pi().s[10]++,e==="map")Pi().b[0][0]++,Pi().s[11]++,document.querySelector(".maplibregl-canvas").focus();else{Pi().b[0][1]++;const t=(Pi().s[12]++,document.querySelector("#skip-target-"+e));Pi().s[13]++,t.focus()}});render(){Pi().f[7]++;const e=(Pi().s[14]++,this.props.t),t=(Pi().s[15]++,[{id:"map",group:"general",title:e("Map")},{id:"inspect",group:"general",title:e("Inspect"),disabled:this.props.renderer==="ol"},{id:"filter-deuteranopia",group:"color-accessibility",title:e("Deuteranopia filter"),disabled:!ew},{id:"filter-protanopia",group:"color-accessibility",title:e("Protanopia filter"),disabled:!ew},{id:"filter-tritanopia",group:"color-accessibility",title:e("Tritanopia filter"),disabled:!ew},{id:"filter-achromatopsia",group:"color-accessibility",title:e("Achromatopsia filter"),disabled:!ew}]),i=(Pi().s[16]++,t.find(r=>(Pi().f[8]++,Pi().s[17]++,r.id===this.props.mapState)));return Pi().s[18]++,te.jsx("nav",{className:"maputnik-toolbar",children:te.jsxs("div",{className:"maputnik-toolbar__inner",children:[te.jsxs("div",{className:"maputnik-toolbar-logo-container",children:[te.jsx("button",{"data-wd-key":"root:skip:layer-list",className:"maputnik-toolbar-skip",onClick:r=>(Pi().f[9]++,Pi().s[19]++,this.onSkip("layer-list")),children:e("Layers list")}),te.jsx("button",{"data-wd-key":"root:skip:layer-editor",className:"maputnik-toolbar-skip",onClick:r=>(Pi().f[10]++,Pi().s[20]++,this.onSkip("layer-editor")),children:e("Layer editor")}),te.jsx("button",{"data-wd-key":"root:skip:map-view",className:"maputnik-toolbar-skip",onClick:r=>(Pi().f[11]++,Pi().s[21]++,this.onSkip("map")),children:e("Map view")}),te.jsxs("a",{className:"maputnik-toolbar-logo",target:"blank",rel:"noreferrer noopener",href:"https://github.com/maplibre/maputnik",children:[te.jsx("img",{src:L9e,alt:e("Maputnik on GitHub")}),te.jsxs("h1",{children:[te.jsx("span",{className:"maputnik-toolbar-name",children:ZV.name}),te.jsxs("span",{className:"maputnik-toolbar-version",children:["v",ZV.version]})]})]})]}),te.jsxs("div",{className:"maputnik-toolbar__actions",role:"navigation","aria-label":"Toolbar",children:[te.jsxs(f_,{wdKey:"nav:open",onClick:()=>(Pi().f[12]++,Pi().s[22]++,this.props.onToggleModal("open")),children:[te.jsx(Whe,{}),te.jsx(J0,{children:e("Open")})]}),te.jsxs(f_,{wdKey:"nav:export",onClick:()=>(Pi().f[13]++,Pi().s[23]++,this.props.onToggleModal("export")),children:[te.jsx(UT,{}),te.jsx(J0,{children:e("Save")})]}),te.jsxs(f_,{wdKey:"nav:code-editor",onClick:()=>(Pi().f[14]++,Pi().s[24]++,this.props.onToggleModal("codeEditor")),children:[te.jsx(Lhe,{}),te.jsx(J0,{children:e("Code Editor")})]}),te.jsxs(f_,{wdKey:"nav:sources",onClick:()=>(Pi().f[15]++,Pi().s[25]++,this.props.onToggleModal("sources")),children:[te.jsx(ede,{}),te.jsx(J0,{children:e("Data Sources")})]}),te.jsxs(f_,{wdKey:"nav:settings",onClick:()=>(Pi().f[16]++,Pi().s[26]++,this.props.onToggleModal("settings")),children:[te.jsx(Qhe,{}),te.jsx(J0,{children:e("Style Settings")})]}),te.jsxs(f_,{wdKey:"nav:global-state",onClick:()=>(Pi().f[17]++,Pi().s[27]++,this.props.onToggleModal("globalState")),children:[te.jsx(sde,{}),te.jsx(J0,{children:e("Global State")})]}),te.jsxs(XV,{wdKey:"nav:inspect",children:[te.jsx(Fhe,{}),te.jsxs(J0,{children:[e("View"),te.jsxs("select",{className:"maputnik-select","data-wd-key":"maputnik-select",onChange:r=>(Pi().f[18]++,Pi().s[28]++,this.handleSelection(r.target.value)),value:i?.id,children:[t.filter(r=>(Pi().f[19]++,Pi().s[29]++,r.group==="general")).map(r=>(Pi().f[20]++,Pi().s[30]++,te.jsx("option",{value:r.id,disabled:r.disabled,"data-wd-key":r.id,children:r.title},r.id))),te.jsx("optgroup",{label:e("Color accessibility"),children:t.filter(r=>(Pi().f[21]++,Pi().s[31]++,r.group==="color-accessibility")).map(r=>(Pi().f[22]++,Pi().s[32]++,te.jsx("option",{value:r.id,disabled:r.disabled,children:r.title},r.id)))})]})]})]}),te.jsxs(XV,{wdKey:"nav:language",children:[te.jsx(Ghe,{}),te.jsxs(J0,{children:["Language",te.jsx("select",{className:"maputnik-select","data-wd-key":"maputnik-lang-select",onChange:r=>(Pi().f[23]++,Pi().s[33]++,this.handleLanguageChange(r.target.value)),value:this.props.i18n.language,children:Object.entries(I$).map(([r,o])=>(Pi().f[24]++,Pi().s[34]++,te.jsx("option",{value:r,children:o},r)))})]})]}),te.jsxs(z9e,{href:"https://github.com/maplibre/maputnik/wiki",children:[te.jsx(zhe,{}),te.jsx(J0,{children:e("Help")})]})]})]})})}}const N9e=(Pi().s[35]++,Po()(j9e));function oE(){var n="/home/runner/work/maputnik/maputnik/src/components/ScrollContainer.tsx",e="d17a642b15310eb6111b086bd920c67ec86a8271",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/ScrollContainer.tsx",statementMap:{0:{start:{line:5,column:4},end:{line:5,column:113}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:2},end:{line:4,column:3}},loc:{start:{line:4,column:11},end:{line:6,column:3}},line:4}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ScrollContainer.tsx"],names:[],mappings:"AAQW;AARX,OAAO,WAAW;AAMlB,qBAAqB,wBAAwB,MAAM,UAAgC;AAAA,EACjF,SAAS;AACP,WAAO,oBAAC,SAAI,WAAU,6BACnB,eAAK,MAAM,UACd;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d17a642b15310eb6111b086bd920c67ec86a8271"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return oE=function(){return s},s}oE();class JV extends On.Component{render(){return oE().f[0]++,oE().s[0]++,te.jsx("div",{className:"maputnik-scroll-container",children:this.props.children})}}function Yf(){var n="/home/runner/work/maputnik/maputnik/src/components/AppLayout.tsx",e="d10f2b4393c64530a7dc27936dc2b0d9d69d1ee7",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/AppLayout.tsx",statementMap:{0:{start:{line:8,column:4},end:{line:8,column:46}},1:{start:{line:9,column:4},end:{line:21,column:12}},2:{start:{line:24,column:18},end:{line:24,column:54}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:11},end:{line:22,column:3}},line:7}},branchMap:{0:{loc:{start:{line:12,column:8},end:{line:12,column:190}},type:"binary-expr",locations:[{start:{line:12,column:8},end:{line:12,column:29}},{start:{line:12,column:49},end:{line:12,column:190}}],line:12},1:{loc:{start:{line:13,column:8},end:{line:16,column:12}},type:"binary-expr",locations:[{start:{line:13,column:8},end:{line:13,column:30}},{start:{line:13,column:50},end:{line:16,column:12}}],line:13},2:{loc:{start:{line:19,column:6},end:{line:19,column:123}},type:"binary-expr",locations:[{start:{line:19,column:6},end:{line:19,column:23}},{start:{line:19,column:43},end:{line:19,column:123}}],line:19}},s:{0:0,1:0,2:0},f:{0:0},b:{0:[0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/AppLayout.tsx"],names:[],mappings:"AAyBY,SAKyB,UALzB,KAKyB,YALzB;AAzBZ,OAAO,WAAW;AAClB,OAAO,qBAAqB;AAC5B,SAA+B,uBAAuB;AACtD,SAAS,mBAAmB;AAY5B,MAAM,0BAA0B,MAAM,UAAkC;AAAA,EAEtE,SAAS;AACP,aAAS,KAAK,MAAM,KAAK,MAAM,KAAK,IAAI;AAExC,WAAO,oBAAC,YAAY,UAAZ,EAAqB,OAAO,EAAC,MAAM,OAAM,GAC/C,+BAAC,SAAI,WAAU,mBACZ;AAAA,WAAK,MAAM;AAAA,MACZ,qBAAC,SAAI,WAAU,wBACZ;AAAA,aAAK,MAAM,cAAc,oBAAC,SAAI,WAAU,+BACvC,8BAAC,mBACE,eAAK,MAAM,YACd,GACF;AAAA,QAEC,CAAC,KAAK,MAAM,cAAc,iCACzB;AAAA,8BAAC,SAAI,WAAU,wBACZ,eAAK,MAAM,WACd;AAAA,UACA,oBAAC,SAAI,WAAU,0BACb,8BAAC,mBACE,eAAK,MAAM,aACd,GACF;AAAA,WACF;AAAA,QACC,KAAK,MAAM;AAAA,SACd;AAAA,MACC,KAAK,MAAM,UAAU,oBAAC,SAAI,WAAU,0BAClC,eAAK,MAAM,QACd;AAAA,MAEC,KAAK,MAAM;AAAA,OACd,GACF;AAAA,EACF;AACF;AAEA,MAAM,YAAY,gBAAgB,EAAE,iBAAiB;AACrD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d10f2b4393c64530a7dc27936dc2b0d9d69d1ee7"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Yf=function(){return s},s}Yf();class G9e extends On.Component{render(){return Yf().f[0]++,Yf().s[0]++,document.body.dir=this.props.i18n.dir(),Yf().s[1]++,te.jsx(lx.Provider,{value:{size:"14px"},children:te.jsxs("div",{className:"maputnik-layout",children:[this.props.toolbar,te.jsxs("div",{className:"maputnik-layout-main",children:[(Yf().b[0][0]++,this.props.codeEditor&&(Yf().b[0][1]++,te.jsx("div",{className:"maputnik-layout-code-editor",children:te.jsx(JV,{children:this.props.codeEditor})}))),(Yf().b[1][0]++,!this.props.codeEditor&&(Yf().b[1][1]++,te.jsxs(te.Fragment,{children:[te.jsx("div",{className:"maputnik-layout-list",children:this.props.layerList}),te.jsx("div",{className:"maputnik-layout-drawer",children:te.jsx(JV,{children:this.props.layerEditor})})]}))),this.props.map]}),(Yf().b[2][0]++,this.props.bottom&&(Yf().b[2][1]++,te.jsx("div",{className:"maputnik-layout-bottom",children:this.props.bottom}))),this.props.modals]})})}}const W9e=(Yf().s[2]++,Po()(G9e));function wa(){var n="/home/runner/work/maputnik/maputnik/src/components/AppMessagePanel.tsx",e="35d9aec71cb86113da5d8ac4f197fbf609a8818e",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/AppMessagePanel.tsx",statementMap:{0:{start:{line:6,column:24},end:{line:9,column:3}},1:{start:{line:11,column:38},end:{line:11,column:48}},2:{start:{line:12,column:19},end:{line:40,column:6}},3:{start:{line:14,column:6},end:{line:38,column:7}},4:{start:{line:15,column:27},end:{line:15,column:32}},5:{start:{line:16,column:24},end:{line:16,column:73}},6:{start:{line:17,column:8},end:{line:35,column:13}},7:{start:{line:30,column:31},end:{line:30,column:74}},8:{start:{line:37,column:8},end:{line:37,column:32}},9:{start:{line:39,column:6},end:{line:39,column:120}},10:{start:{line:41,column:18},end:{line:43,column:6}},11:{start:{line:42,column:6},end:{line:42,column:68}},12:{start:{line:44,column:4},end:{line:47,column:9}},13:{start:{line:50,column:24},end:{line:50,column:66}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:19},end:{line:7,column:20}},loc:{start:{line:7,column:25},end:{line:8,column:5}},line:7},1:{name:"(anonymous_1)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:48,column:3}},line:10},2:{name:"(anonymous_2)",decl:{start:{line:12,column:42},end:{line:12,column:43}},loc:{start:{line:12,column:58},end:{line:40,column:5}},line:12},3:{name:"(anonymous_3)",decl:{start:{line:30,column:25},end:{line:30,column:26}},loc:{start:{line:30,column:31},end:{line:30,column:74}},line:30},4:{name:"(anonymous_4)",decl:{start:{line:41,column:40},end:{line:41,column:41}},loc:{start:{line:41,column:50},end:{line:43,column:5}},line:41}},branchMap:{0:{loc:{start:{line:14,column:6},end:{line:38,column:7}},type:"if",locations:[{start:{line:14,column:6},end:{line:38,column:7}},{start:{line:36,column:13},end:{line:38,column:7}}],line:14},1:{loc:{start:{line:14,column:10},end:{line:14,column:55}},type:"binary-expr",locations:[{start:{line:14,column:10},end:{line:14,column:22}},{start:{line:14,column:26},end:{line:14,column:55}}],line:14},2:{loc:{start:{line:24,column:10},end:{line:34,column:14}},type:"binary-expr",locations:[{start:{line:24,column:10},end:{line:24,column:50}},{start:{line:24,column:70},end:{line:34,column:14}}],line:24}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/AppMessagePanel.tsx"],names:[],mappings:"AA6BY,SAIE,UAHM,KADR;AA7BZ,OAAO,WAAW;AAClB,SAAQ,qBAAoB;AAE5B,SAAS,OAA6B,uBAAuB;AAY7D,MAAM,gCAAgC,MAAM,UAAwC;AAAA,EAClF,OAAO,eAAe;AAAA,IACpB,eAAe,MAAM;AAAA,IAAC;AAAA,EACxB;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,GAAG,mBAAkB,IAAI,KAAK;AACrC,UAAM,SAAS,KAAK,MAAM,QAAQ,IAAI,CAAC,OAAO,QAAQ;AACpD,UAAI;AACJ,UAAI,MAAM,UAAU,MAAM,OAAO,SAAS,SAAS;AACjD,cAAM,EAAC,OAAM,IAAI;AACjB,cAAM,UAAU,KAAK,MAAM,UAAU,OAAO,OAAO,KAAK,KAAK,EAAE;AAC/D,kBACE,iCACE;AAAA,+BAAC,SAAM,GAAM;AAAA;AAAA,YACL,oBAAC,UAAM,wBAAc,OAAO,GAAE;AAAA,YAAO;AAAA,YAAG,OAAO,KAAK;AAAA,aAC5D;AAAA,UACC,uBAAuB,OAAO,KAAK,SAClC,iCAAE;AAAA;AAAA,YAEA;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,SAAS,MAAM,KAAK,MAAM,cAAe,OAAO,KAAK,KAAK;AAAA,gBAEzD,YAAE,iBAAiB;AAAA;AAAA,YACtB;AAAA,aACF;AAAA,WAEJ;AAAA,MAEJ,OACK;AACH,kBAAU,MAAM;AAAA,MAClB;AACA,aAAO,oBAAC,OAAqB,WAAU,gCACpC,qBADY,WAAS,GAExB;AAAA,IACF,CAAC;AAED,UAAM,QAAQ,KAAK,MAAM,OAAO,IAAI,CAAC,GAAG,MAAM;AAC5C,aAAO,oBAAC,OAAmB,eAAZ,UAAQ,CAAM;AAAA,IAC/B,CAAC;AAED,WAAO,qBAAC,SAAI,WAAU,0BACnB;AAAA;AAAA,MACA;AAAA,OACH;AAAA,EACF;AACF;AAEA,MAAM,kBAAkB,gBAAgB,EAAE,uBAAuB;AACjE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"35d9aec71cb86113da5d8ac4f197fbf609a8818e"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return wa=function(){return s},s}wa();class Q9e extends On.Component{static defaultProps=(wa().s[0]++,{onLayerSelect:()=>{wa().f[0]++}});render(){wa().f[1]++;const{t:e,selectedLayerIndex:t}=(wa().s[1]++,this.props),i=(wa().s[2]++,this.props.errors?.map((o,s)=>{wa().f[2]++;let a;if(wa().s[3]++,wa().b[1][0]++,o.parsed&&(wa().b[1][1]++,o.parsed.type==="layer")){wa().b[0][0]++;const{parsed:c}=(wa().s[4]++,o),h=(wa().s[5]++,this.props.mapStyle?.layers[c.data.index].id);wa().s[6]++,a=te.jsxs(te.Fragment,{children:[te.jsxs(Eb,{t:e,children:["Layer ",te.jsx("span",{children:voe(h)}),": ",c.data.message]}),(wa().b[2][0]++,t!==c.data.index&&(wa().b[2][1]++,te.jsxs(te.Fragment,{children:["",te.jsx("button",{className:"maputnik-message-panel__switch-button",onClick:()=>(wa().f[3]++,wa().s[7]++,this.props.onLayerSelect(c.data.index)),children:e("switch to layer")})]})))]})}else wa().b[0][1]++,wa().s[8]++,a=o.message;return wa().s[9]++,te.jsx("p",{className:"maputnik-message-panel-error",children:a},"error-"+s)})),r=(wa().s[10]++,this.props.infos?.map((o,s)=>(wa().f[4]++,wa().s[11]++,te.jsx("p",{children:o},"info-"+s))));return wa().s[12]++,te.jsxs("div",{className:"maputnik-message-panel",children:[i,r]})}}const Y9e=(wa().s[13]++,Po()(Q9e));function P4(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldArray.tsx",e="6904abccc922d01222214bca1ee3bdee75077020",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldArray.tsx",statementMap:{0:{start:{line:4,column:19},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:148}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:19},end:{line:4,column:20}},loc:{start:{line:4,column:30},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldArray.tsx"],names:[],mappings:"AAaM;AAbN,OAAO,gBAA0C;AACjD,OAAO,cAAc;AASrB,MAAM,aAAwC,CAAC,UAAU;AACvD,SACE,oBAAC,YAAS,OAAO,MAAM,OAAO,WAAW,MAAM,WAC7C,8BAAC,cAAY,GAAG,OAAO,GACzB;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"6904abccc922d01222214bca1ee3bdee75077020"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return P4=function(){return s},s}P4();P4().s[0]++;const sE=n=>(P4().f[0]++,P4().s[1]++,te.jsx(Dy,{label:n.label,fieldSpec:n.fieldSpec,children:te.jsx($R,{...n})}));function U4(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldNumber.tsx",e="4d2523cd21b202fb5e80e08624becdbab30e967f",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldNumber.tsx",statementMap:{0:{start:{line:4,column:20},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:146}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:20},end:{line:4,column:21}},loc:{start:{line:4,column:31},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldNumber.tsx"],names:[],mappings:"AAeM;AAfN,OAAO,iBAA0C;AACjD,OAAO,WAAW;AAWlB,MAAM,cAA0C,CAAC,UAAU;AACzD,SACE,oBAAC,SAAM,OAAO,MAAM,OAAO,WAAW,MAAM,WAC1C,8BAAC,eAAa,GAAG,OAAO,GAC1B;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"4d2523cd21b202fb5e80e08624becdbab30e967f"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return U4=function(){return s},s}U4();U4().s[0]++;const um=n=>(U4().f[0]++,U4().s[1]++,te.jsx(Ms,{label:n.label,fieldSpec:n.fieldSpec,children:te.jsx(b1,{...n})}));function K4(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldString.tsx",e="5d41bf44c48c380a773c8c6219651c4348518afa",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldString.tsx",statementMap:{0:{start:{line:4,column:20},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:146}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:20},end:{line:4,column:21}},loc:{start:{line:4,column:31},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldString.tsx"],names:[],mappings:"AAcM;AAdN,OAAO,WAAW;AAClB,OAAO,iBAA0C;AAUjD,MAAM,cAA0C,CAAC,UAAU;AACzD,SACE,oBAAC,SAAM,OAAO,MAAM,OAAO,WAAW,MAAM,WAC1C,8BAAC,eAAa,GAAG,OAAO,GAC1B;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"5d41bf44c48c380a773c8c6219651c4348518afa"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return K4=function(){return s},s}K4();K4().s[0]++;const dd=n=>(K4().f[0]++,K4().s[1]++,te.jsx(Ms,{label:n.label,fieldSpec:n.fieldSpec,children:te.jsx(Mm,{...n})}));function L4(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldUrl.tsx",e="6e4f23f735ab05a9622545421c68df85e4603d43",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldUrl.tsx",statementMap:{0:{start:{line:4,column:17},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:143}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:17},end:{line:4,column:18}},loc:{start:{line:4,column:28},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldUrl.tsx"],names:[],mappings:"AAeM;AAfN,OAAO,cAAqD;AAC5D,OAAO,WAAW;AAWlB,MAAM,WAAoC,CAAC,UAAU;AACnD,SACE,oBAAC,SAAM,OAAO,MAAM,OAAO,WAAW,MAAM,WAC1C,8BAAC,YAAU,GAAG,OAAO,GACvB;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"6e4f23f735ab05a9622545421c68df85e4603d43"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return L4=function(){return s},s}L4();L4().s[0]++;const KM=n=>(L4().f[0]++,L4().s[1]++,te.jsx(Ms,{label:n.label,fieldSpec:n.fieldSpec,children:te.jsx(UK,{...n})}));function F4(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldSelect.tsx",e="245ef066962174fcd1012332d28af93e7b97872c",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldSelect.tsx",statementMap:{0:{start:{line:4,column:20},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:146}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:20},end:{line:4,column:21}},loc:{start:{line:4,column:31},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldSelect.tsx"],names:[],mappings:"AAeM;AAfN,OAAO,WAAW;AAClB,OAAO,iBAA0C;AAWjD,MAAM,cAA0C,CAAC,UAAU;AACzD,SACE,oBAAC,SAAM,OAAO,MAAM,OAAO,WAAW,MAAM,WAC1C,8BAAC,eAAa,GAAG,OAAO,GAC1B;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"245ef066962174fcd1012332d28af93e7b97872c"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return F4=function(){return s},s}F4();F4().s[0]++;const z4=n=>(F4().f[0]++,F4().s[1]++,te.jsx(Ms,{label:n.label,fieldSpec:n.fieldSpec,children:te.jsx(hC,{...n})}));function j4(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldEnum.tsx",e="c3637509a0af6618b52e814bed4254c2e3fa3b7a",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldEnum.tsx",statementMap:{0:{start:{line:4,column:18},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:147}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:18},end:{line:4,column:19}},loc:{start:{line:4,column:29},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldEnum.tsx"],names:[],mappings:"AAeM;AAfN,OAAO,eAAsC;AAC7C,OAAO,cAAc;AAWrB,MAAM,YAAsC,CAAC,UAAU;AACrD,SACE,oBAAC,YAAS,OAAO,MAAM,OAAO,WAAW,MAAM,WAC7C,8BAAC,aAAW,GAAG,OAAO,GACxB;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"c3637509a0af6618b52e814bed4254c2e3fa3b7a"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return j4=function(){return s},s}j4();j4().s[0]++;const q9e=n=>(j4().f[0]++,j4().s[1]++,te.jsx(Dy,{label:n.label,fieldSpec:n.fieldSpec,children:te.jsx(PK,{...n})}));function N4(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldColor.tsx",e="81b03af9ad032d255df7823d843b73e8fa5e3f61",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldColor.tsx",statementMap:{0:{start:{line:4,column:19},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:145}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:19},end:{line:4,column:20}},loc:{start:{line:4,column:30},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldColor.tsx"],names:[],mappings:"AAeM;AAfN,OAAO,WAAW;AAClB,OAAO,gBAAwC;AAW/C,MAAM,aAAwC,CAAC,UAAU;AACvD,SACE,oBAAC,SAAM,OAAO,MAAM,OAAO,WAAW,MAAM,WAC1C,8BAAC,cAAY,GAAG,OAAO,GACzB;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"81b03af9ad032d255df7823d843b73e8fa5e3f61"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return N4=function(){return s},s}N4();N4().s[0]++;const V9e=n=>(N4().f[0]++,N4().s[1]++,te.jsx(Ms,{label:n.label,fieldSpec:n.fieldSpec,children:te.jsx(DK,{...n})}));function G4(){var n="/home/runner/work/maputnik/maputnik/src/libs/field-spec-additional.ts",e="3fd72cd1ec4be346f0d6d854a97e371e1b9c2997",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/field-spec-additional.ts",statementMap:{0:{start:{line:1,column:13},end:{line:32,column:2}},1:{start:{line:1,column:21},end:{line:32,column:1}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:1,column:13},end:{line:1,column:14}},loc:{start:{line:1,column:21},end:{line:32,column:1}},line:1}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/field-spec-additional.ts"],names:[],mappings:"AAEA,MAAM,OAAO,CAAC,OAAkB;AAAA,EAC9B,UAAU;AAAA,IACR,uBAAuB;AAAA,MACrB,OAAO,EAAE,uBAAuB;AAAA,MAChC,KAAK,EAAE,yCAAyC;AAAA,MAChD,QAAQ;AAAA,MACR,gBAAgB,EAAE,YAAY;AAAA,IAChC;AAAA,IACA,4BAA4B;AAAA,MAC1B,OAAO,EAAE,4BAA4B;AAAA,MACrC,KAAK,EAAE,iDAAiD;AAAA,MACxD,QAAQ;AAAA,MACR,gBAAgB,EAAE,YAAY;AAAA,IAChC;AAAA,IACA,qBAAqB;AAAA,MACnB,OAAO,EAAE,qBAAqB;AAAA,MAC9B,KAAK,EAAE,0BAA0B;AAAA,MACjC,QAAQ;AAAA,MACR,gBAAgB,EAAE,YAAY;AAAA,IAChC;AAAA,IACA,yBAAyB;AAAA,MACvB,OAAO,EAAE,yBAAyB;AAAA,MAClC,KAAK,EAAE,8CAA8C;AAAA,MACrD,QAAQ;AAAA,MACR,gBAAgB,EAAE,YAAY;AAAA,IAChC;AAAA,IACA,gBAAgB;AAAA,MACd,OAAO,EAAE,gBAAgB;AAAA,MACzB,KAAK,EAAE,sDAAsD;AAAA,IAC/D;AAAA,EACF;AACF;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"3fd72cd1ec4be346f0d6d854a97e371e1b9c2997"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return G4=function(){return s},s}G4();G4().s[0]++;const Coe=n=>(G4().f[0]++,G4().s[1]++,{maputnik:{maptiler_access_token:{label:n("MapTiler Access Token"),doc:n("Public access token for MapTiler Cloud."),docUrl:"https://docs.maptiler.com/cloud/api/authentication-key/",docUrlLinkText:n("Learn More")},thunderforest_access_token:{label:n("Thunderforest Access Token"),doc:n("Public access token for Thunderforest services."),docUrl:"https://www.thunderforest.com/docs/apikeys/",docUrlLinkText:n("Learn More")},stadia_access_token:{label:n("Stadia Maps API Key"),doc:n("API key for Stadia Maps."),docUrl:"https://docs.stadiamaps.com/authentication/",docUrlLinkText:n("Learn More")},locationiq_access_token:{label:n("LocationIQ Access Token"),doc:n("Public access token for LocationIQ services."),docUrl:"https://docs.locationiq.com/docs/maps",docUrlLinkText:n("Learn More")},style_renderer:{label:n("Style Renderer"),doc:n("Choose the default Maputnik renderer for this style.")}}});function Bn(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalSettings.tsx",e="88fb94a6f90f9fea29b8036f99aee1df40b81df7",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalSettings.tsx",statementMap:{0:{start:{line:18,column:23},end:{line:20,column:5}},1:{start:{line:21,column:4},end:{line:25,column:5}},2:{start:{line:22,column:6},end:{line:22,column:34}},3:{start:{line:24,column:6},end:{line:24,column:35}},4:{start:{line:26,column:4},end:{line:29,column:7}},5:{start:{line:32,column:18},end:{line:34,column:5}},6:{start:{line:35,column:4},end:{line:39,column:5}},7:{start:{line:36,column:6},end:{line:36,column:29}},8:{start:{line:38,column:6},end:{line:38,column:30}},9:{start:{line:40,column:4},end:{line:43,column:7}},10:{start:{line:46,column:20},end:{line:48,column:5}},11:{start:{line:49,column:4},end:{line:53,column:5}},12:{start:{line:50,column:6},end:{line:50,column:31}},13:{start:{line:52,column:6},end:{line:52,column:32}},14:{start:{line:54,column:4},end:{line:57,column:7}},15:{start:{line:60,column:23},end:{line:62,column:5}},16:{start:{line:63,column:4},end:{line:67,column:5}},17:{start:{line:64,column:6},end:{line:64,column:29}},18:{start:{line:66,column:6},end:{line:66,column:30}},19:{start:{line:68,column:4},end:{line:71,column:7}},20:{start:{line:74,column:25},end:{line:76,column:5}},21:{start:{line:77,column:4},end:{line:81,column:5}},22:{start:{line:78,column:6},end:{line:78,column:36}},23:{start:{line:80,column:6},end:{line:80,column:37}},24:{start:{line:82,column:4},end:{line:82,column:44}},25:{start:{line:85,column:21},end:{line:85,column:55}},26:{start:{line:86,column:54},end:{line:86,column:64}},27:{start:{line:87,column:16},end:{line:87,column:38}},28:{start:{line:88,column:18},end:{line:88,column:49}},29:{start:{line:89,column:23},end:{line:89,column:59}},30:{start:{line:90,column:20},end:{line:90,column:53}},31:{start:{line:91,column:23},end:{line:91,column:59}},32:{start:{line:92,column:4},end:{line:335,column:6}},33:{start:{line:107,column:35},end:{line:107,column:74}},34:{start:{line:117,column:35},end:{line:117,column:75}},35:{start:{line:125,column:35},end:{line:125,column:76}},36:{start:{line:135,column:35},end:{line:135,column:76}},37:{start:{line:145,column:35},end:{line:145,column:104}},38:{start:{line:155,column:35},end:{line:155,column:105}},39:{start:{line:165,column:35},end:{line:165,column:98}},40:{start:{line:175,column:35},end:{line:175,column:102}},41:{start:{line:187,column:35},end:{line:187,column:76}},42:{start:{line:197,column:35},end:{line:197,column:74}},43:{start:{line:207,column:35},end:{line:207,column:77}},44:{start:{line:217,column:35},end:{line:217,column:75}},45:{start:{line:229,column:35},end:{line:229,column:76}},46:{start:{line:239,column:35},end:{line:239,column:75}},47:{start:{line:249,column:35},end:{line:249,column:79}},48:{start:{line:261,column:35},end:{line:261,column:78}},49:{start:{line:271,column:35},end:{line:271,column:78}},50:{start:{line:281,column:35},end:{line:281,column:84}},51:{start:{line:291,column:35},end:{line:291,column:80}},52:{start:{line:301,column:35},end:{line:301,column:83}},53:{start:{line:316,column:35},end:{line:316,column:67}},54:{start:{line:330,column:35},end:{line:330,column:87}},55:{start:{line:338,column:22},end:{line:338,column:62}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:17,column:2},end:{line:17,column:3}},loc:{start:{line:17,column:44},end:{line:30,column:3}},line:17},1:{name:"(anonymous_1)",decl:{start:{line:31,column:2},end:{line:31,column:3}},loc:{start:{line:31,column:39},end:{line:44,column:3}},line:31},2:{name:"(anonymous_2)",decl:{start:{line:45,column:2},end:{line:45,column:3}},loc:{start:{line:45,column:41},end:{line:58,column:3}},line:45},3:{name:"(anonymous_3)",decl:{start:{line:59,column:2},end:{line:59,column:3}},loc:{start:{line:59,column:30},end:{line:72,column:3}},line:59},4:{name:"(anonymous_4)",decl:{start:{line:73,column:2},end:{line:73,column:3}},loc:{start:{line:73,column:39},end:{line:83,column:3}},line:73},5:{name:"(anonymous_5)",decl:{start:{line:84,column:2},end:{line:84,column:3}},loc:{start:{line:84,column:11},end:{line:336,column:3}},line:84},6:{name:"(anonymous_6)",decl:{start:{line:107,column:24},end:{line:107,column:25}},loc:{start:{line:107,column:35},end:{line:107,column:74}},line:107},7:{name:"(anonymous_7)",decl:{start:{line:117,column:24},end:{line:117,column:25}},loc:{start:{line:117,column:35},end:{line:117,column:75}},line:117},8:{name:"(anonymous_8)",decl:{start:{line:125,column:24},end:{line:125,column:25}},loc:{start:{line:125,column:35},end:{line:125,column:76}},line:125},9:{name:"(anonymous_9)",decl:{start:{line:135,column:24},end:{line:135,column:25}},loc:{start:{line:135,column:35},end:{line:135,column:76}},line:135},10:{name:"(anonymous_10)",decl:{start:{line:145,column:24},end:{line:145,column:25}},loc:{start:{line:145,column:35},end:{line:145,column:104}},line:145},11:{name:"(anonymous_11)",decl:{start:{line:155,column:24},end:{line:155,column:25}},loc:{start:{line:155,column:35},end:{line:155,column:105}},line:155},12:{name:"(anonymous_12)",decl:{start:{line:165,column:24},end:{line:165,column:25}},loc:{start:{line:165,column:35},end:{line:165,column:98}},line:165},13:{name:"(anonymous_13)",decl:{start:{line:175,column:24},end:{line:175,column:25}},loc:{start:{line:175,column:35},end:{line:175,column:102}},line:175},14:{name:"(anonymous_14)",decl:{start:{line:187,column:24},end:{line:187,column:25}},loc:{start:{line:187,column:35},end:{line:187,column:76}},line:187},15:{name:"(anonymous_15)",decl:{start:{line:197,column:24},end:{line:197,column:25}},loc:{start:{line:197,column:35},end:{line:197,column:74}},line:197},16:{name:"(anonymous_16)",decl:{start:{line:207,column:24},end:{line:207,column:25}},loc:{start:{line:207,column:35},end:{line:207,column:77}},line:207},17:{name:"(anonymous_17)",decl:{start:{line:217,column:24},end:{line:217,column:25}},loc:{start:{line:217,column:35},end:{line:217,column:75}},line:217},18:{name:"(anonymous_18)",decl:{start:{line:229,column:24},end:{line:229,column:25}},loc:{start:{line:229,column:35},end:{line:229,column:76}},line:229},19:{name:"(anonymous_19)",decl:{start:{line:239,column:24},end:{line:239,column:25}},loc:{start:{line:239,column:35},end:{line:239,column:75}},line:239},20:{name:"(anonymous_20)",decl:{start:{line:249,column:24},end:{line:249,column:25}},loc:{start:{line:249,column:35},end:{line:249,column:79}},line:249},21:{name:"(anonymous_21)",decl:{start:{line:261,column:24},end:{line:261,column:25}},loc:{start:{line:261,column:35},end:{line:261,column:78}},line:261},22:{name:"(anonymous_22)",decl:{start:{line:271,column:24},end:{line:271,column:25}},loc:{start:{line:271,column:35},end:{line:271,column:78}},line:271},23:{name:"(anonymous_23)",decl:{start:{line:281,column:24},end:{line:281,column:25}},loc:{start:{line:281,column:35},end:{line:281,column:84}},line:281},24:{name:"(anonymous_24)",decl:{start:{line:291,column:24},end:{line:291,column:25}},loc:{start:{line:291,column:35},end:{line:291,column:80}},line:291},25:{name:"(anonymous_25)",decl:{start:{line:301,column:24},end:{line:301,column:25}},loc:{start:{line:301,column:35},end:{line:301,column:83}},line:301},26:{name:"(anonymous_26)",decl:{start:{line:316,column:24},end:{line:316,column:25}},loc:{start:{line:316,column:35},end:{line:316,column:67}},line:316},27:{name:"(anonymous_27)",decl:{start:{line:330,column:24},end:{line:330,column:25}},loc:{start:{line:330,column:35},end:{line:330,column:87}},line:330}},branchMap:{0:{loc:{start:{line:21,column:4},end:{line:25,column:5}},type:"if",locations:[{start:{line:21,column:4},end:{line:25,column:5}},{start:{line:23,column:11},end:{line:25,column:5}}],line:21},1:{loc:{start:{line:35,column:4},end:{line:39,column:5}},type:"if",locations:[{start:{line:35,column:4},end:{line:39,column:5}},{start:{line:37,column:11},end:{line:39,column:5}}],line:35},2:{loc:{start:{line:49,column:4},end:{line:53,column:5}},type:"if",locations:[{start:{line:49,column:4},end:{line:53,column:5}},{start:{line:51,column:11},end:{line:53,column:5}}],line:49},3:{loc:{start:{line:63,column:4},end:{line:67,column:5}},type:"if",locations:[{start:{line:63,column:4},end:{line:67,column:5}},{start:{line:65,column:11},end:{line:67,column:5}}],line:63},4:{loc:{start:{line:77,column:4},end:{line:81,column:5}},type:"if",locations:[{start:{line:77,column:4},end:{line:81,column:5}},{start:{line:79,column:11},end:{line:81,column:5}}],line:77},5:{loc:{start:{line:85,column:21},end:{line:85,column:55}},type:"binary-expr",locations:[{start:{line:85,column:21},end:{line:85,column:49}},{start:{line:85,column:53},end:{line:85,column:55}}],line:85},6:{loc:{start:{line:88,column:18},end:{line:88,column:49}},type:"binary-expr",locations:[{start:{line:88,column:18},end:{line:88,column:43}},{start:{line:88,column:47},end:{line:88,column:49}}],line:88},7:{loc:{start:{line:89,column:23},end:{line:89,column:59}},type:"binary-expr",locations:[{start:{line:89,column:23},end:{line:89,column:53}},{start:{line:89,column:57},end:{line:89,column:59}}],line:89},8:{loc:{start:{line:90,column:20},end:{line:90,column:53}},type:"binary-expr",locations:[{start:{line:90,column:20},end:{line:90,column:47}},{start:{line:90,column:51},end:{line:90,column:53}}],line:90},9:{loc:{start:{line:91,column:23},end:{line:91,column:59}},type:"binary-expr",locations:[{start:{line:91,column:23},end:{line:91,column:53}},{start:{line:91,column:57},end:{line:91,column:59}}],line:91},10:{loc:{start:{line:185,column:21},end:{line:185,column:42}},type:"binary-expr",locations:[{start:{line:185,column:21},end:{line:185,column:36}},{start:{line:185,column:40},end:{line:185,column:42}}],line:185},11:{loc:{start:{line:315,column:21},end:{line:315,column:55}},type:"binary-expr",locations:[{start:{line:315,column:21},end:{line:315,column:49}},{start:{line:315,column:53},end:{line:315,column:55}}],line:315},12:{loc:{start:{line:329,column:21},end:{line:329,column:62}},type:"binary-expr",locations:[{start:{line:329,column:21},end:{line:329,column:50}},{start:{line:329,column:54},end:{line:329,column:62}}],line:329}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalSettings.tsx"],names:[],mappings:"AAqIM,SACE,KADF;AArIN,OAAO,WAAW;AAClB,OAAO,YAAY;AAEnB,SAA+B,uBAAuB;AAEtD,OAAO,gBAAgB;AACvB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,cAAc;AACrB,OAAO,iBAAiB;AACxB,OAAO,eAAe;AACtB,OAAO,gBAAgB;AACvB,OAAO,WAAW;AAClB,OAAO,eAAe;AACtB,OAAO,WAAW;AAClB,OAAO,yBAAyB;AAWhC,MAAM,8BAA8B,MAAM,UAAsC;AAAA,EAC9E,yBAAyB,UAAyC,OAA2B;AAC3F,UAAM,aAAa;AAAA,MACjB,GAAG,KAAK,MAAM,SAAS;AAAA,IACzB;AAEA,QAAI,UAAU,QAAW;AACvB,aAAO,WAAW,QAAQ;AAAA,IAC5B,OACK;AACH,iBAAW,QAAQ,IAAI;AAAA,IACzB;AAEA,SAAK,MAAM,eAAe;AAAA,MACxB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,oBAAoB,UAAoC,OAAY;AAClE,UAAM,QAAQ;AAAA,MACZ,GAAG,KAAK,MAAM,SAAS;AAAA,IACzB;AAEA,QAAI,UAAU,QAAW;AACvB,aAAO,MAAM,QAAQ;AAAA,IACvB,OACK;AAEH,YAAM,QAAQ,IAAI;AAAA,IACpB;AAEA,SAAK,MAAM,eAAe;AAAA,MACxB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,sBAAsB,UAAsC,OAAY;AACtE,UAAM,UAAU;AAAA,MACd,GAAG,KAAK,MAAM,SAAS;AAAA,IACzB;AAEA,QAAI,UAAU,QAAW;AACvB,aAAO,QAAQ,QAAQ;AAAA,IACzB,OACK;AAEH,cAAQ,QAAQ,IAAI;AAAA,IACtB;AAEA,SAAK,MAAM,eAAe;AAAA,MACxB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,qBAAqB,OAAY;AAC/B,UAAM,aAAa;AAAA,MACjB,GAAG,KAAK,MAAM,SAAS;AAAA,IACzB;AAEA,QAAI,UAAU,QAAW;AACvB,aAAO,WAAW;AAAA,IACpB,OACK;AACH,iBAAW,OAAO;AAAA,IACpB;AAEA,SAAK,MAAM,eAAe;AAAA,MACxB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,oBAAoB,UAA8C,OAAY;AAC5E,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,IAChB;AAEA,QAAI,UAAU,QAAW;AAEvB,aAAO,aAAa,QAAQ;AAAA,IAC9B,OACK;AAEH,mBAAa,QAAQ,IAAI;AAAA,IAC3B;AACA,SAAK,MAAM,eAAe,YAAY;AAAA,EACxC;AAAA,EAEA,SAAS;AACP,UAAM,WAAW,KAAK,MAAM,SAAS,YAAY,CAAC;AAClD,UAAM,EAAC,GAAG,0BAA0B,SAAQ,IAAI,KAAK;AACrD,UAAM,MAAM,oBAAoB,CAAC;AAEjC,UAAM,QAAQ,KAAK,MAAM,SAAS,SAAS,CAAC;AAC5C,UAAM,aAAa,KAAK,MAAM,SAAS,cAAc,CAAC;AACtD,UAAM,UAAU,KAAK,MAAM,SAAS,WAAW,CAAC;AAChD,UAAM,aAAa,KAAK,MAAM,SAAS,cAAc,CAAC;AAEtD,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,gBAAgB;AAAA,QAEzB,+BAAC,SAAI,WAAU,kBACb;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,MAAM;AAAA,cACf,WAAW,OAAO,MAAM;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,KAAK,MAAM,SAAS;AAAA,cAC3B,UAAU,CAAC,UAAU,KAAK,oBAAoB,QAAQ,KAAK;AAAA;AAAA,UAC7D;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,OAAO;AAAA,cAChB,WAAW,EAAC,KAAK,EAAE,6DAA6D,EAAC;AAAA,cACjF,eAAY;AAAA,cACZ,OAAQ,KAAK,MAAM,SAAiB;AAAA,cACpC,UAAU,CAAC,UAAU,KAAK,oBAAoB,SAAS,KAAK;AAAA;AAAA,UAC9D;AAAA,UACA,oBAAC,SAAM,OAAO,EAAE,YAAY,GAAG,WAAW,OAAO,MAAM,QAAQ,eAAY,yBACzE;AAAA,YAAC;AAAA;AAAA,cACC,UAAS;AAAA,cACT,OAAO,KAAK,MAAM,SAAS;AAAA,cAC3B,UAAU,CAAC,UAAU,KAAK,oBAAoB,UAAU,KAAK;AAAA;AAAA,UAC/D,GACF;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,YAAY;AAAA,cACrB,WAAW,OAAO,MAAM;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,KAAK,MAAM,SAAS;AAAA,cAC3B,UAAU,CAAC,UAAU,KAAK,oBAAoB,UAAU,KAAK;AAAA;AAAA,UAC/D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,IAAI,SAAS,sBAAsB;AAAA,cAC1C,WAAW,IAAI,SAAS;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,SAAS,oCAAoC;AAAA,cACpD,UAAU,CAAC,UAAU,yBAAyB,sCAAsC,KAAK;AAAA;AAAA,UAC3F;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,IAAI,SAAS,2BAA2B;AAAA,cAC/C,WAAW,IAAI,SAAS;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,SAAS,qCAAqC;AAAA,cACrD,UAAU,CAAC,UAAU,yBAAyB,uCAAuC,KAAK;AAAA;AAAA,UAC5F;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,IAAI,SAAS,oBAAoB;AAAA,cACxC,WAAW,IAAI,SAAS;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,SAAS,8BAA8B;AAAA,cAC9C,UAAU,CAAC,UAAU,yBAAyB,gCAAgC,KAAK;AAAA;AAAA,UACrF;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,IAAI,SAAS,wBAAwB;AAAA,cAC5C,WAAW,IAAI,SAAS;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,SAAS,kCAAkC;AAAA,cAClD,UAAU,CAAC,UAAU,yBAAyB,oCAAoC,KAAK;AAAA;AAAA,UACzF;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,QAAQ;AAAA,cACjB,WAAW,OAAO,MAAM;AAAA,cACxB,QAAQ;AAAA,cACR,MAAK;AAAA,cACL,OAAO,SAAS,UAAU,CAAC;AAAA,cAC3B,SAAS,CAAC,GAAG,CAAC;AAAA,cACd,UAAU,CAAC,UAAU,KAAK,oBAAoB,UAAU,KAAK;AAAA;AAAA,UAC/D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,MAAM;AAAA,cACf,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,SAAS;AAAA,cAChB,SAAS;AAAA,cACT,UAAU,CAAC,UAAU,KAAK,oBAAoB,QAAQ,KAAK;AAAA;AAAA,UAC7D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,SAAS;AAAA,cAClB,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,SAAS;AAAA,cAChB,SAAS,OAAO,MAAM,QAAQ;AAAA,cAC9B,UAAU,CAAC,UAAU,KAAK,oBAAoB,WAAW,KAAK;AAAA;AAAA,UAChE;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,OAAO;AAAA,cAChB,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,SAAS;AAAA,cAChB,SAAS,OAAO,MAAM,MAAM;AAAA,cAC5B,UAAU,CAAC,UAAU,KAAK,oBAAoB,SAAS,KAAK;AAAA;AAAA,UAC9D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,cAAc;AAAA,cACvB,WAAW,OAAO,MAAM;AAAA,cACxB,MAAK;AAAA,cACL,OAAO,MAAM;AAAA,cACb,SAAS,OAAO,KAAK,OAAO,MAAM,OAAO,MAAM;AAAA,cAC/C,SAAS,OAAO,MAAM,OAAO;AAAA,cAC7B,UAAU,CAAC,UAAU,KAAK,oBAAoB,UAAU,KAAK;AAAA;AAAA,UAC/D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,aAAa;AAAA,cACtB,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,MAAM;AAAA,cACb,SAAS,OAAO,MAAM,MAAM;AAAA,cAC5B,UAAU,CAAC,UAAU,KAAK,oBAAoB,SAAS,KAAK;AAAA;AAAA,UAC9D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,iBAAiB;AAAA,cAC1B,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,MAAM;AAAA,cACb,SAAS,OAAO,MAAM,UAAU;AAAA,cAChC,UAAU,CAAC,UAAU,KAAK,oBAAoB,aAAa,KAAK;AAAA;AAAA,UAClE;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,gBAAgB;AAAA,cACzB,WAAW,OAAO,MAAM;AAAA,cACxB,MAAK;AAAA,cACL,QAAQ,OAAO,MAAM,SAAS;AAAA,cAC9B,OAAO,MAAM;AAAA,cACb,SAAS,OAAO,MAAM,SAAS;AAAA,cAC/B,UAAU,CAAC,UAAU,KAAK,oBAAoB,YAAY,KAAK;AAAA;AAAA,UACjE;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,gBAAgB;AAAA,cACzB,WAAW,OAAO,QAAQ;AAAA,cAC1B,eAAY;AAAA,cACZ,OAAO,QAAQ;AAAA,cACf,UAAU,CAAC,UAAU,KAAK,sBAAsB,UAAU,KAAK;AAAA;AAAA,UACjE;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,sBAAsB;AAAA,cAC/B,WAAW,OAAO,QAAQ;AAAA,cAC1B,OAAO,QAAQ;AAAA,cACf,SAAS,OAAO,QAAQ,aAAa;AAAA,cACrC,UAAU,CAAC,UAAU,KAAK,sBAAsB,gBAAgB,KAAK;AAAA;AAAA,UACvE;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,kBAAkB;AAAA,cAC3B,WAAW,OAAO,WAAW;AAAA,cAC7B,OAAO,WAAW;AAAA,cAClB,SAAS,OAAO,WAAW,MAAM;AAAA,cACjC,UAAU,CAAC,UAAU,KAAK,yBAAyB,SAAS,KAAK;AAAA;AAAA,UACnE;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,qBAAqB;AAAA,cAC9B,WAAW,OAAO,WAAW;AAAA,cAC7B,OAAO,WAAW;AAAA,cAClB,SAAS,OAAO,WAAW,SAAS;AAAA,cACpC,UAAU,CAAC,UAAU,KAAK,yBAAyB,YAAY,KAAK;AAAA;AAAA,UACtE;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,YAAY;AAAA,cACrB,eAAY;AAAA,cACZ,SAAS;AAAA,gBACP,CAAC,IAAI,WAAW;AAAA,gBAChB,CAAC,YAAY,UAAU;AAAA,gBACvB,CAAC,SAAS,OAAO;AAAA,gBACjB,CAAC,wBAAwB,sBAAsB;AAAA,cACjD;AAAA,cACA,OAAO,YAAY,MAAM,SAAS,KAAK;AAAA,cACvC,UAAU,CAAC,UAAU,KAAK,qBAAqB,KAAK;AAAA;AAAA,UACtD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,IAAI,SAAS,eAAe;AAAA,cACnC,WAAW,IAAI,SAAS;AAAA,cACxB,eAAY;AAAA,cACZ,SAAS;AAAA,gBACP,CAAC,UAAU,eAAe;AAAA,gBAC1B,CAAC,MAAM,EAAE,4BAA4B,CAAC;AAAA,cACxC;AAAA,cACA,OAAO,SAAS,mBAAmB,KAAK;AAAA,cACxC,UAAU,CAAC,UAAU,yBAAyB,qBAAqB,KAAK;AAAA;AAAA,UAC1E;AAAA,WACF;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,gBAAgB,gBAAgB,EAAE,qBAAqB;AAC7D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"88fb94a6f90f9fea29b8036f99aee1df40b81df7"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Bn=function(){return s},s}Bn();class $9e extends On.Component{changeTransitionProperty(e,t){Bn().f[0]++;const i=(Bn().s[0]++,{...this.props.mapStyle.transition});Bn().s[1]++,t===void 0?(Bn().b[0][0]++,Bn().s[2]++,delete i[e]):(Bn().b[0][1]++,Bn().s[3]++,i[e]=t),Bn().s[4]++,this.props.onStyleChanged({...this.props.mapStyle,transition:i})}changeLightProperty(e,t){Bn().f[1]++;const i=(Bn().s[5]++,{...this.props.mapStyle.light});Bn().s[6]++,t===void 0?(Bn().b[1][0]++,Bn().s[7]++,delete i[e]):(Bn().b[1][1]++,Bn().s[8]++,i[e]=t),Bn().s[9]++,this.props.onStyleChanged({...this.props.mapStyle,light:i})}changeTerrainProperty(e,t){Bn().f[2]++;const i=(Bn().s[10]++,{...this.props.mapStyle.terrain});Bn().s[11]++,t===void 0?(Bn().b[2][0]++,Bn().s[12]++,delete i[e]):(Bn().b[2][1]++,Bn().s[13]++,i[e]=t),Bn().s[14]++,this.props.onStyleChanged({...this.props.mapStyle,terrain:i})}changeProjectionType(e){Bn().f[3]++;const t=(Bn().s[15]++,{...this.props.mapStyle.projection});Bn().s[16]++,e===void 0?(Bn().b[3][0]++,Bn().s[17]++,delete t.type):(Bn().b[3][1]++,Bn().s[18]++,t.type=e),Bn().s[19]++,this.props.onStyleChanged({...this.props.mapStyle,projection:t})}changeStyleProperty(e,t){Bn().f[4]++;const i=(Bn().s[20]++,{...this.props.mapStyle});Bn().s[21]++,t===void 0?(Bn().b[4][0]++,Bn().s[22]++,delete i[e]):(Bn().b[4][1]++,Bn().s[23]++,i[e]=t),Bn().s[24]++,this.props.onStyleChanged(i)}render(){Bn().f[5]++;const e=(Bn().s[25]++,Bn().b[5][0]++,this.props.mapStyle.metadata||(Bn().b[5][1]++,{})),{t,onChangeMetadataProperty:i,mapStyle:r}=(Bn().s[26]++,this.props),o=(Bn().s[27]++,Coe(t)),s=(Bn().s[28]++,Bn().b[6][0]++,this.props.mapStyle.light||(Bn().b[6][1]++,{})),a=(Bn().s[29]++,Bn().b[7][0]++,this.props.mapStyle.transition||(Bn().b[7][1]++,{})),c=(Bn().s[30]++,Bn().b[8][0]++,this.props.mapStyle.terrain||(Bn().b[8][1]++,{})),h=(Bn().s[31]++,Bn().b[9][0]++,this.props.mapStyle.projection||(Bn().b[9][1]++,{}));return Bn().s[32]++,te.jsx(w1,{"data-wd-key":"modal:settings",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:t("Style Settings"),children:te.jsxs("div",{className:"modal:settings",children:[te.jsx(dd,{label:t("Name"),fieldSpec:qr.$root.name,"data-wd-key":"modal:settings.name",value:this.props.mapStyle.name,onChange:m=>(Bn().f[6]++,Bn().s[33]++,this.changeStyleProperty("name",m))}),te.jsx(dd,{label:t("Owner"),fieldSpec:{doc:t("Owner ID of the style. Used by Mapbox or future style APIs.")},"data-wd-key":"modal:settings.owner",value:this.props.mapStyle.owner,onChange:m=>(Bn().f[7]++,Bn().s[34]++,this.changeStyleProperty("owner",m))}),te.jsx(Ms,{label:t("Sprite URL"),fieldSpec:qr.$root.sprite,"data-wd-key":"modal:settings.sprite",children:te.jsx(F6,{lintType:"json",value:this.props.mapStyle.sprite,onChange:m=>(Bn().f[8]++,Bn().s[35]++,this.changeStyleProperty("sprite",m))})}),te.jsx(KM,{label:t("Glyphs URL"),fieldSpec:qr.$root.glyphs,"data-wd-key":"modal:settings.glyphs",value:this.props.mapStyle.glyphs,onChange:m=>(Bn().f[9]++,Bn().s[36]++,this.changeStyleProperty("glyphs",m))}),te.jsx(dd,{label:o.maputnik.maptiler_access_token.label,fieldSpec:o.maputnik.maptiler_access_token,"data-wd-key":"modal:settings.maputnik:openmaptiles_access_token",value:e["maputnik:openmaptiles_access_token"],onChange:m=>(Bn().f[10]++,Bn().s[37]++,i("maputnik:openmaptiles_access_token",m))}),te.jsx(dd,{label:o.maputnik.thunderforest_access_token.label,fieldSpec:o.maputnik.thunderforest_access_token,"data-wd-key":"modal:settings.maputnik:thunderforest_access_token",value:e["maputnik:thunderforest_access_token"],onChange:m=>(Bn().f[11]++,Bn().s[38]++,i("maputnik:thunderforest_access_token",m))}),te.jsx(dd,{label:o.maputnik.stadia_access_token.label,fieldSpec:o.maputnik.stadia_access_token,"data-wd-key":"modal:settings.maputnik:stadia_access_token",value:e["maputnik:stadia_access_token"],onChange:m=>(Bn().f[12]++,Bn().s[39]++,i("maputnik:stadia_access_token",m))}),te.jsx(dd,{label:o.maputnik.locationiq_access_token.label,fieldSpec:o.maputnik.locationiq_access_token,"data-wd-key":"modal:settings.maputnik:locationiq_access_token",value:e["maputnik:locationiq_access_token"],onChange:m=>(Bn().f[13]++,Bn().s[40]++,i("maputnik:locationiq_access_token",m))}),te.jsx(sE,{label:t("Center"),fieldSpec:qr.$root.center,length:2,type:"number",value:(Bn().b[10][0]++,r.center||(Bn().b[10][1]++,[])),default:[0,0],onChange:m=>(Bn().f[14]++,Bn().s[41]++,this.changeStyleProperty("center",m))}),te.jsx(um,{label:t("Zoom"),fieldSpec:qr.$root.zoom,value:r.zoom,default:0,onChange:m=>(Bn().f[15]++,Bn().s[42]++,this.changeStyleProperty("zoom",m))}),te.jsx(um,{label:t("Bearing"),fieldSpec:qr.$root.bearing,value:r.bearing,default:qr.$root.bearing.default,onChange:m=>(Bn().f[16]++,Bn().s[43]++,this.changeStyleProperty("bearing",m))}),te.jsx(um,{label:t("Pitch"),fieldSpec:qr.$root.pitch,value:r.pitch,default:qr.$root.pitch.default,onChange:m=>(Bn().f[17]++,Bn().s[44]++,this.changeStyleProperty("pitch",m))}),te.jsx(q9e,{label:t("Light anchor"),fieldSpec:qr.light.anchor,name:"light-anchor",value:s.anchor,options:Object.keys(qr.light.anchor.values),default:qr.light.anchor.default,onChange:m=>(Bn().f[18]++,Bn().s[45]++,this.changeLightProperty("anchor",m))}),te.jsx(V9e,{label:t("Light color"),fieldSpec:qr.light.color,value:s.color,default:qr.light.color.default,onChange:m=>(Bn().f[19]++,Bn().s[46]++,this.changeLightProperty("color",m))}),te.jsx(um,{label:t("Light intensity"),fieldSpec:qr.light.intensity,value:s.intensity,default:qr.light.intensity.default,onChange:m=>(Bn().f[20]++,Bn().s[47]++,this.changeLightProperty("intensity",m))}),te.jsx(sE,{label:t("Light position"),fieldSpec:qr.light.position,type:"number",length:qr.light.position.length,value:s.position,default:qr.light.position.default,onChange:m=>(Bn().f[21]++,Bn().s[48]++,this.changeLightProperty("position",m))}),te.jsx(dd,{label:t("Terrain source"),fieldSpec:qr.terrain.source,"data-wd-key":"modal:settings.maputnik:terrain_source",value:c.source,onChange:m=>(Bn().f[22]++,Bn().s[49]++,this.changeTerrainProperty("source",m))}),te.jsx(um,{label:t("Terrain exaggeration"),fieldSpec:qr.terrain.exaggeration,value:c.exaggeration,default:qr.terrain.exaggeration.default,onChange:m=>(Bn().f[23]++,Bn().s[50]++,this.changeTerrainProperty("exaggeration",m))}),te.jsx(um,{label:t("Transition delay"),fieldSpec:qr.transition.delay,value:a.delay,default:qr.transition.delay.default,onChange:m=>(Bn().f[24]++,Bn().s[51]++,this.changeTransitionProperty("delay",m))}),te.jsx(um,{label:t("Transition duration"),fieldSpec:qr.transition.duration,value:a.duration,default:qr.transition.duration.default,onChange:m=>(Bn().f[25]++,Bn().s[52]++,this.changeTransitionProperty("duration",m))}),te.jsx(z4,{label:t("Projection"),"data-wd-key":"modal:settings.projection",options:[["","Undefined"],["mercator","Mercator"],["globe","Globe"],["vertical-perspective","Vertical Perspective"]],value:(Bn().b[11][0]++,h?.type?.toString()||(Bn().b[11][1]++,"")),onChange:m=>(Bn().f[26]++,Bn().s[53]++,this.changeProjectionType(m))}),te.jsx(z4,{label:o.maputnik.style_renderer.label,fieldSpec:o.maputnik.style_renderer,"data-wd-key":"modal:settings.maputnik:renderer",options:[["mlgljs","MapLibreGL JS"],["ol",t("Open Layers (experimental)")]],value:(Bn().b[12][0]++,e["maputnik:renderer"]||(Bn().b[12][1]++,"mlgljs")),onChange:m=>(Bn().f[27]++,Bn().s[54]++,i("maputnik:renderer",m))})]})})}}const H9e=(Bn().s[55]++,Po()($9e));var Tw={exports:{}},Z9e=Tw.exports,e$;function X9e(){return e$||(e$=1,(function(n,e){(function(t,i,r){n.exports=r(),n.exports.default=r()})("slugify",Z9e,function(){var t=JSON.parse(`{"$":"dollar","%":"percent","&":"and","<":"less",">":"greater","|":"or","":"cent","":"pound","":"currency","":"yen","":"(c)","":"a","":"(r)","":"o","":"A","":"A","":"A","":"A","":"A","":"A","":"AE","":"C","":"E","":"E","":"E","":"E","":"I","":"I","":"I","":"I","":"D","":"N","":"O","":"O","":"O","":"O","":"O","":"O","":"U","":"U","":"U","":"U","":"Y","":"TH","":"ss","":"a","":"a","":"a","":"a","":"a","":"a","":"ae","":"c","":"e","":"e","":"e","":"e","":"i","":"i","":"i","":"i","":"d","":"n","":"o","":"o","":"o","":"o","":"o","":"o","":"u","":"u","":"u","":"u","":"y","":"th","":"y","":"A","":"a","":"A","":"a","":"A","":"a","":"C","":"c","":"C","":"c","":"D","":"d","":"DJ","":"dj","":"E","":"e","":"E","":"e","":"e","":"e","":"E","":"e","":"G","":"g","":"G","":"g","":"I","":"i","":"i","":"i","":"I","":"i","":"I","":"i","":"k","":"k","":"L","":"l","":"L","":"l","":"L","":"l","":"N","":"n","":"N","":"n","":"N","":"n","":"O","":"o","":"O","":"o","":"OE","":"oe","":"R","":"r","":"R","":"r","":"S","":"s","":"S","":"s","":"S","":"s","":"T","":"t","":"T","":"t","":"U","":"u","":"u","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"z","":"Z","":"z","":"Z","":"z","":"E","":"f","":"O","":"o","":"U","":"u","":"LJ","":"lj","":"NJ","":"nj","":"S","":"s","":"T","":"t","":"e","":"o","":"A","":"E","":"H","":"I","":"O","":"Y","":"W","":"i","":"A","":"B","":"G","":"D","":"E","":"Z","":"H","":"8","":"I","":"K","":"L","":"M","":"N","":"3","":"O","":"P","":"R","":"S","":"T","":"Y","":"F","":"X","":"PS","":"W","":"I","":"Y","":"a","":"e","":"h","":"i","":"y","":"a","":"b","":"g","":"d","":"e","":"z","":"h","":"8","":"i","":"k","":"l","":"m","":"n","":"3","":"o","":"p","":"r","":"s","":"s","":"t","":"y","":"f","":"x","":"ps","":"w","":"i","":"y","":"o","":"y","":"w","":"Yo","":"DJ","":"Ye","":"I","":"Yi","":"J","":"LJ","":"NJ","":"C","":"DZ","":"A","":"B","":"V","":"G","":"D","":"E","":"Zh","":"Z","":"I","":"J","":"K","":"L","":"M","":"N","":"O","":"P","":"R","":"S","":"T","":"U","":"F","":"H","":"C","":"Ch","":"Sh","":"Sh","":"U","":"Y","":"","":"E","":"Yu","":"Ya","":"a","":"b","":"v","":"g","":"d","":"e","":"zh","":"z","":"i","":"j","":"k","":"l","":"m","":"n","":"o","":"p","":"r","":"s","":"t","":"u","":"f","":"h","":"c","":"ch","":"sh","":"sh","":"u","":"y","":"","":"e","":"yu","":"ya","":"yo","":"dj","":"ye","":"i","":"yi","":"j","":"lj","":"nj","":"c","":"u","":"dz","":"G","":"g","":"GH","":"gh","":"KH","":"kh","":"NG","":"ng","":"UE","":"ue","":"U","":"u","":"H","":"h","":"AE","":"ae","":"OE","":"oe","":"A","":"B","":"G","":"D","":"E","":"Z","":"E'","":"Y'","":"T'","":"JH","":"I","":"L","":"X","":"C'","":"K","":"H","":"D'","":"GH","":"TW","":"M","":"Y","":"N","":"SH","":"CH","":"P","":"J","":"R'","":"S","":"V","":"T","":"R","":"C","":"P'","":"Q'","":"O''","":"F","":"EV","":"a","":"aa","":"a","":"u","":"i","":"e","":"a","":"b","":"h","":"t","":"th","":"j","":"h","":"kh","":"d","":"th","":"r","":"z","":"s","":"sh","":"s","":"dh","":"t","":"z","":"a","":"gh","":"f","":"q","":"k","":"l","":"m","":"n","":"h","":"w","":"a","":"y","":"an","":"on","":"en","":"a","":"u","":"e","":"","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"p","":"ch","":"zh","":"k","":"g","":"y","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"baht","":"a","":"b","":"g","":"d","":"e","":"v","":"z","":"t","":"i","":"k","":"l","":"m","":"n","":"o","":"p","":"zh","":"r","":"s","":"t","":"u","":"f","":"k","":"gh","":"q","":"sh","":"ch","":"ts","":"dz","":"ts","":"ch","":"kh","":"j","":"h","":"S","":"s","":"W","":"w","":"W","":"w","":"W","":"w","":"SS","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"I","":"i","":"I","":"i","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"Y","":"y","":"Y","":"y","":"Y","":"y","":"Y","":"y","":"-","":"'","":"'","":"\\"","":"\\"","":"\\"","":"+","":"*","":"...","":"ecu","":"cruzeiro","":"french franc","":"lira","":"mill","":"naira","":"peseta","":"rupee","":"won","":"new shequel","":"dong","":"euro","":"kip","":"tugrik","":"drachma","":"penny","":"peso","":"guarani","":"austral","":"hryvnia","":"cedi","":"kazakhstani tenge","":"indian rupee","":"turkish lira","":"russian ruble","":"bitcoin","":"sm","":"tm","":"d","":"delta","":"sum","":"infinity","":"love","":"yuan","":"yen","":"rial","":"laa","":"laa","":"lai","":"la"}`),i=JSON.parse('{"bg":{"":"Y","":"Ts","":"Sht","":"A","":"Y","":"y","":"ts","":"sht","":"a","":"y"},"de":{"":"AE","":"ae","":"OE","":"oe","":"UE","":"ue","":"ss","%":"prozent","&":"und","|":"oder","":"summe","":"unendlich","":"liebe"},"es":{"%":"por ciento","&":"y","<":"menor que",">":"mayor que","|":"o","":"centavos","":"libras","":"moneda","":"francos","":"suma","":"infinito","":"amor"},"fr":{"%":"pourcent","&":"et","<":"plus petit",">":"plus grand","|":"ou","":"centime","":"livre","":"devise","":"franc","":"somme","":"infini","":"amour"},"pt":{"%":"porcento","&":"e","<":"menor",">":"maior","|":"ou","":"centavo","":"soma","":"libra","":"infinito","":"amor"},"uk":{"":"Y","":"y","":"Y","":"y","":"Ts","":"ts","":"Kh","":"kh","":"Shch","":"shch","":"H","":"h"},"vi":{"":"D","":"d"},"da":{"":"OE","":"oe","":"AA","":"aa","%":"procent","&":"og","|":"eller","$":"dollar","<":"mindre end",">":"strre end"},"nb":{"&":"og","":"AA","":"AE","":"OE","":"aa","":"ae","":"oe"},"it":{"&":"e"},"nl":{"&":"en"},"sv":{"&":"och","":"AA","":"AE","":"OE","":"aa","":"ae","":"oe"}}');function r(o,s){if(typeof o!="string")throw new Error("slugify: string argument expected");s=typeof s=="string"?{replacement:s}:s||{};var a=i[s.locale]||{},c=s.replacement===void 0?"-":s.replacement,h=s.trim===void 0?!0:s.trim,m=o.normalize().split("").reduce(function(v,x){var E=a[x];return E===void 0&&(E=t[x]),E===void 0&&(E=x),E===c&&(E=" "),v+E.replace(s.remove||/[^\w\s$*_+~.()'"!\-:@]+/g,"")},"");return s.strict&&(m=m.replace(/[^A-Za-z0-9\s]/g,"")),h&&(m=m.trim()),m=m.replace(/\s+/g,c),s.lower&&(m=m.toLowerCase()),m}return r.extend=function(o){Object.assign(t,o)},r})})(Tw)),Tw.exports}var J9e=X9e();const eRe=Ou(J9e);var Rw={exports:{}},tRe=Rw.exports,t$;function nRe(){return t$||(t$=1,(function(n,e){(function(t,i){i()})(tRe,function(){function t(h,m){return typeof m>"u"?m={autoBom:!1}:typeof m!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),m={autoBom:!m}),m.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(h.type)?new Blob(["\uFEFF",h],{type:h.type}):h}function i(h,m,v){var x=new XMLHttpRequest;x.open("GET",h),x.responseType="blob",x.onload=function(){c(x.response,m,v)},x.onerror=function(){console.error("could not download file")},x.send()}function r(h){var m=new XMLHttpRequest;m.open("HEAD",h,!1);try{m.send()}catch{}return 200<=m.status&&299>=m.status}function o(h){try{h.dispatchEvent(new MouseEvent("click"))}catch{var m=document.createEvent("MouseEvents");m.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),h.dispatchEvent(m)}}var s=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof window=="object"&&window.global===window?window:void 0,a=s.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),c=s.saveAs||(typeof window!="object"||window!==s?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(h,m,v){var x=s.URL||s.webkitURL,E=document.createElement("a");m=m||h.name||"download",E.download=m,E.rel="noopener",typeof h=="string"?(E.href=h,E.origin===location.origin?o(E):r(E.href)?i(h,m,v):o(E,E.target="_blank")):(E.href=x.createObjectURL(h),setTimeout(function(){x.revokeObjectURL(E.href)},4e4),setTimeout(function(){o(E)},0))}:"msSaveOrOpenBlob"in navigator?function(h,m,v){if(m=m||h.name||"download",typeof h!="string")navigator.msSaveOrOpenBlob(t(h,v),m);else if(r(h))i(h,m,v);else{var x=document.createElement("a");x.href=h,x.target="_blank",setTimeout(function(){o(x)})}}:function(h,m,v,x){if(x=x||open("","_blank"),x&&(x.document.title=x.document.body.innerText="downloading..."),typeof h=="string")return i(h,m,v);var E=h.type==="application/octet-stream",D=/constructor/i.test(s.HTMLElement)||s.safari,P=/CriOS\/[\d]+/.test(navigator.userAgent);if((P||E&&D||a)&&typeof FileReader<"u"){var F=new FileReader;F.onloadend=function(){var V=F.result;V=P?V:V.replace(/^data:[^;]*;/,"data:attachment/file;"),x?x.location.href=V:location=V,x=null},F.readAsDataURL(h)}else{var W=s.URL||s.webkitURL,q=W.createObjectURL(h);x?x.location=q:location.href=q,x=null,setTimeout(function(){W.revokeObjectURL(q)},4e4)}});s.saveAs=c.saveAs=c,n.exports=c})})(Rw)),Rw.exports}var n$=nRe();const iRe="5.11.0",rRe="get_your_own_OpIi9ZULNHzrESv6T2vL",oRe="b71f7f0ba4064f5eb9e903859a9cf5c6",sRe="pk.put_your_api_key_here7bb23dffeb4",_oe={openmaptiles:rRe,thunderforest:oRe,locationiq:sRe};function Sn(){var n="/home/runner/work/maputnik/maputnik/src/libs/style.ts",e="16e079a55cdd4175ffeada8708d6c49d219f1229",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/style.ts",statementMap:{0:{start:{line:3,column:19},end:{line:7,column:2}},1:{start:{line:9,column:2},end:{line:9,column:52}},2:{start:{line:12,column:2},end:{line:14,column:3}},3:{start:{line:13,column:4},end:{line:13,column:28}},4:{start:{line:15,column:2},end:{line:15,column:15}},5:{start:{line:18,column:24},end:{line:22,column:4}},6:{start:{line:19,column:25},end:{line:19,column:37}},7:{start:{line:20,column:4},end:{line:20,column:36}},8:{start:{line:21,column:4},end:{line:21,column:24}},9:{start:{line:23,column:2},end:{line:26,column:4}},10:{start:{line:29,column:2},end:{line:32,column:4}},11:{start:{line:35,column:2},end:{line:35,column:69}},12:{start:{line:38,column:2},end:{line:42,column:3}},13:{start:{line:38,column:15},end:{line:38,column:16}},14:{start:{line:39,column:4},end:{line:41,column:5}},15:{start:{line:40,column:6},end:{line:40,column:15}},16:{start:{line:43,column:2},end:{line:43,column:14}},17:{start:{line:46,column:19},end:{line:46,column:42}},18:{start:{line:47,column:20},end:{line:47,column:67}},19:{start:{line:48,column:2},end:{line:50,column:3}},20:{start:{line:49,column:4},end:{line:49,column:37}},21:{start:{line:51,column:2},end:{line:51,column:21}},22:{start:{line:54,column:17},end:{line:54,column:45}},23:{start:{line:55,column:2},end:{line:55,column:31}},24:{start:{line:55,column:15},end:{line:55,column:31}},25:{start:{line:56,column:2},end:{line:56,column:57}},26:{start:{line:56,column:41},end:{line:56,column:57}},27:{start:{line:57,column:23},end:{line:57,column:33}},28:{start:{line:58,column:2},end:{line:64,column:3}},29:{start:{line:59,column:4},end:{line:59,column:37}},30:{start:{line:60,column:9},end:{line:64,column:3}},31:{start:{line:61,column:4},end:{line:61,column:30}},32:{start:{line:62,column:9},end:{line:64,column:3}},33:{start:{line:63,column:4},end:{line:63,column:34}},34:{start:{line:65,column:22},end:{line:65,column:68}},35:{start:{line:66,column:2},end:{line:68,column:3}},36:{start:{line:67,column:4},end:{line:67,column:20}},37:{start:{line:70,column:2},end:{line:74,column:3}},38:{start:{line:71,column:4},end:{line:71,column:55}},39:{start:{line:73,column:4},end:{line:73,column:57}},40:{start:{line:75,column:25},end:{line:81,column:3}},41:{start:{line:82,column:23},end:{line:85,column:3}},42:{start:{line:86,column:2},end:{line:86,column:22}},43:{start:{line:89,column:21},end:{line:89,column:29}},44:{start:{line:90,column:2},end:{line:92,column:5}},45:{start:{line:91,column:4},end:{line:91,column:76}},46:{start:{line:93,column:2},end:{line:101,column:3}},47:{start:{line:94,column:27},end:{line:94,column:73}},48:{start:{line:95,column:4},end:{line:100,column:5}},49:{start:{line:96,column:6},end:{line:99,column:8}},50:{start:{line:102,column:2},end:{line:102,column:22}},51:{start:{line:105,column:26},end:{line:107,column:3}},52:{start:{line:108,column:2},end:{line:108,column:63}},53:{start:{line:109,column:2},end:{line:109,column:64}},54:{start:{line:110,column:2},end:{line:110,column:57}},55:{start:{line:111,column:2},end:{line:111,column:61}},56:{start:{line:112,column:2},end:{line:115,column:4}}},fnMap:{0:{name:"generateId",decl:{start:{line:8,column:9},end:{line:8,column:19}},loc:{start:{line:8,column:22},end:{line:10,column:1}},line:8},1:{name:"ensureHasId",decl:{start:{line:11,column:9},end:{line:11,column:20}},loc:{start:{line:11,column:28},end:{line:16,column:1}},line:11},2:{name:"ensureHasNoInteractive",decl:{start:{line:17,column:9},end:{line:17,column:31}},loc:{start:{line:17,column:39},end:{line:27,column:1}},line:17},3:{name:"(anonymous_3)",decl:{start:{line:18,column:41},end:{line:18,column:42}},loc:{start:{line:18,column:52},end:{line:22,column:3}},line:18},4:{name:"ensureHasNoRefs",decl:{start:{line:28,column:9},end:{line:28,column:24}},loc:{start:{line:28,column:32},end:{line:33,column:1}},line:28},5:{name:"ensureStyleValidity",decl:{start:{line:34,column:9},end:{line:34,column:28}},loc:{start:{line:34,column:36},end:{line:36,column:1}},line:34},6:{name:"indexOfLayer",decl:{start:{line:37,column:9},end:{line:37,column:21}},loc:{start:{line:37,column:39},end:{line:44,column:1}},line:37},7:{name:"getAccessToken",decl:{start:{line:45,column:9},end:{line:45,column:23}},loc:{start:{line:45,column:52},end:{line:52,column:1}},line:45},8:{name:"replaceSourceAccessToken",decl:{start:{line:53,column:9},end:{line:53,column:33}},loc:{start:{line:53,column:67},end:{line:87,column:1}},line:53},9:{name:"replaceAccessTokens",decl:{start:{line:88,column:9},end:{line:88,column:28}},loc:{start:{line:88,column:50},end:{line:103,column:1}},line:88},10:{name:"(anonymous_10)",decl:{start:{line:90,column:40},end:{line:90,column:41}},loc:{start:{line:90,column:56},end:{line:92,column:3}},line:90},11:{name:"stripAccessTokens",decl:{start:{line:104,column:9},end:{line:104,column:26}},loc:{start:{line:104,column:37},end:{line:116,column:1}},line:104}},branchMap:{0:{loc:{start:{line:12,column:2},end:{line:14,column:3}},type:"if",locations:[{start:{line:12,column:2},end:{line:14,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:12},1:{loc:{start:{line:12,column:6},end:{line:12,column:35}},type:"binary-expr",locations:[{start:{line:12,column:6},end:{line:12,column:22}},{start:{line:12,column:26},end:{line:12,column:35}}],line:12},2:{loc:{start:{line:39,column:4},end:{line:41,column:5}},type:"if",locations:[{start:{line:39,column:4},end:{line:41,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:39},3:{loc:{start:{line:46,column:19},end:{line:46,column:42}},type:"binary-expr",locations:[{start:{line:46,column:19},end:{line:46,column:36}},{start:{line:46,column:40},end:{line:46,column:42}}],line:46},4:{loc:{start:{line:48,column:2},end:{line:50,column:3}},type:"if",locations:[{start:{line:48,column:2},end:{line:50,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:48},5:{loc:{start:{line:48,column:6},end:{line:48,column:40}},type:"binary-expr",locations:[{start:{line:48,column:6},end:{line:48,column:24}},{start:{line:48,column:28},end:{line:48,column:40}}],line:48},6:{loc:{start:{line:53,column:56},end:{line:53,column:65}},type:"default-arg",locations:[{start:{line:53,column:63},end:{line:53,column:65}}],line:53},7:{loc:{start:{line:55,column:2},end:{line:55,column:31}},type:"if",locations:[{start:{line:55,column:2},end:{line:55,column:31}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:55},8:{loc:{start:{line:56,column:2},end:{line:56,column:57}},type:"if",locations:[{start:{line:56,column:2},end:{line:56,column:57}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:56},9:{loc:{start:{line:56,column:6},end:{line:56,column:39}},type:"binary-expr",locations:[{start:{line:56,column:6},end:{line:56,column:24}},{start:{line:56,column:28},end:{line:56,column:39}}],line:56},10:{loc:{start:{line:58,column:2},end:{line:64,column:3}},type:"if",locations:[{start:{line:58,column:2},end:{line:64,column:3}},{start:{line:60,column:9},end:{line:64,column:3}}],line:58},11:{loc:{start:{line:58,column:6},end:{line:58,column:89}},type:"binary-expr",locations:[{start:{line:58,column:6},end:{line:58,column:46}},{start:{line:58,column:50},end:{line:58,column:89}}],line:58},12:{loc:{start:{line:60,column:9},end:{line:64,column:3}},type:"if",locations:[{start:{line:60,column:9},end:{line:64,column:3}},{start:{line:62,column:9},end:{line:64,column:3}}],line:60},13:{loc:{start:{line:60,column:13},end:{line:60,column:70}},type:"binary-expr",locations:[{start:{line:60,column:13},end:{line:60,column:28}},{start:{line:60,column:32},end:{line:60,column:70}}],line:60},14:{loc:{start:{line:62,column:9},end:{line:64,column:3}},type:"if",locations:[{start:{line:62,column:9},end:{line:64,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:62},15:{loc:{start:{line:62,column:13},end:{line:62,column:70}},type:"binary-expr",locations:[{start:{line:62,column:13},end:{line:62,column:28}},{start:{line:62,column:32},end:{line:62,column:70}}],line:62},16:{loc:{start:{line:66,column:2},end:{line:68,column:3}},type:"if",locations:[{start:{line:66,column:2},end:{line:68,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:66},17:{loc:{start:{line:70,column:2},end:{line:74,column:3}},type:"if",locations:[{start:{line:70,column:2},end:{line:74,column:3}},{start:{line:72,column:9},end:{line:74,column:3}}],line:70},18:{loc:{start:{line:88,column:39},end:{line:88,column:48}},type:"default-arg",locations:[{start:{line:88,column:46},end:{line:88,column:48}}],line:88},19:{loc:{start:{line:93,column:2},end:{line:101,column:3}},type:"if",locations:[{start:{line:93,column:2},end:{line:101,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:93},20:{loc:{start:{line:93,column:6},end:{line:93,column:114}},type:"binary-expr",locations:[{start:{line:93,column:6},end:{line:93,column:21}},{start:{line:93,column:26},end:{line:93,column:69}},{start:{line:93,column:73},end:{line:93,column:113}}],line:93},21:{loc:{start:{line:95,column:4},end:{line:100,column:5}},type:"if",locations:[{start:{line:95,column:4},end:{line:100,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:95}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0],18:[0],19:[0,0],20:[0,0,0],21:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/style.ts"],names:[],mappings:"AAAA,SAAQ,mBAAkB;AAE1B,OAAO,YAAY;AAInB,MAAM,aAAa,oBAAoB;AAAA,EACrC,SAAS;AAAA,EACT,SAAS,CAAC;AAAA,EACV,QAAQ,CAAC;AACX,CAAC;AAED,SAAS,aAAa;AACpB,SAAO,KAAK,OAAO,EAAE,SAAS,EAAE,EAAE,UAAU,GAAG,CAAC;AAClD;AAEA,SAAS,YAAY,OAAuE;AAC1F,MAAG,EAAE,QAAQ,UAAU,CAAC,MAAM,IAAI;AAChC,UAAM,KAAK,WAAW;AAAA,EACxB;AACA,SAAO;AACT;AAEA,SAAS,uBAAuB,OAAiC;AAC/D,QAAM,gBAAgB,MAAM,OAAO,IAAI,WAAS;AAC9C,UAAM,eAA2D,EAAE,GAAG,MAAM;AAC5E,WAAO,aAAa;AACpB,WAAO;AAAA,EACT,CAAC;AAED,SAAO;AAAA,IACL,GAAG;AAAA,IACH,QAAQ;AAAA,EACV;AACF;AAEA,SAAS,gBAAgB,OAAiC;AACxD,SAAO;AAAA,IACL,GAAG;AAAA,IACH,QAAQ,YAAY,MAAM,MAAM;AAAA,EAClC;AACF;AAEA,SAAS,oBAAoB,OAAqD;AAChF,SAAO,uBAAuB,gBAAgB,YAAY,KAAK,CAAC,CAAC;AACnE;AAEA,SAAS,aAAa,QAA8B,SAAiB;AACnE,WAAS,IAAI,GAAG,IAAI,OAAO,QAAQ,KAAK;AACtC,QAAG,OAAO,CAAC,EAAE,OAAO,SAAS;AAC3B,aAAO;AAAA,IACT;AAAA,EACF;AACA,SAAO;AACT;AAEA,SAAS,eAAe,YAAoB,UAA8B,MAAiC;AACzG,QAAM,WAAW,SAAS,YAAY,CAAC;AACvC,MAAI,cAAc,SAAS,YAAY,UAAU,eAAe;AAEhE,MAAG,KAAK,iBAAiB,CAAC,aAAa;AACrC,kBAAc,OAAO,UAAiC;AAAA,EACxD;AAEA,SAAO;AACT;AAEA,SAAS,yBAAyB,UAA8B,YAAoB,OAAK,CAAC,GAAG;AAC3F,QAAM,SAAS,SAAS,QAAQ,UAAU;AAC1C,MAAG,CAAC,OAAQ,QAAO;AACnB,MAAG,EAAE,SAAS,WAAW,CAAC,OAAO,IAAK,QAAO;AAE7C,MAAI,iBAAiB;AACrB,MAAG,eAAe,6BAA6B,eAAe,0BAA0B;AACtF,qBAAiB;AAAA,EACnB,WACU,SAAS,UAAW,OAAO,KAAK,MAAM,mBAAmB,GAAG;AAGpE,qBAAiB;AAAA,EACnB,WACU,SAAS,UAAW,OAAO,KAAK,MAAM,mBAAmB,GAAG;AACpE,qBAAiB;AAAA,EACnB;AAEA,QAAM,cAAc,eAAe,gBAAgB,UAAU,IAAI;AAEjE,MAAG,CAAC,aAAa;AAEf,WAAO;AAAA,EACT;AAEA,MAAI;AACJ,MAAI,kBAAkB,UAAU;AAI9B,gBAAY,GAAG,OAAO,GAAG,YAAY,WAAW;AAAA,EAClD,OAAO;AACL,gBAAY,OAAO,IAAI,QAAQ,SAAS,WAAW;AAAA,EACrD;AAEA,QAAM,iBAAiB;AAAA,IACrB,GAAG,SAAS;AAAA,IACZ,CAAC,UAAU,GAAG;AAAA,MACZ,GAAG;AAAA,MACH,KAAK;AAAA,IACP;AAAA,EACF;AACA,QAAM,eAAe;AAAA,IACnB,GAAG;AAAA,IACH,SAAS;AAAA,EACX;AACA,SAAO;AACT;AAEA,SAAS,oBAAoB,UAA8B,OAAK,CAAC,GAAG;AAClE,MAAI,eAAe;AAEnB,SAAO,KAAK,SAAS,OAAO,EAAE,QAAQ,CAAC,eAAe;AACpD,mBAAe,yBAAyB,cAAc,YAAY,IAAI;AAAA,EACxE,CAAC;AAED,MAAI,SAAS,WAAW,SAAS,OAAO,MAAM,oBAAoB,KAAK,SAAS,OAAO,MAAM,iBAAiB,IAAI;AAChH,UAAM,iBAAiB,eAAe,gBAAgB,UAAU,IAAI;AACpE,QAAI,gBAAgB;AAClB,qBAAe;AAAA,QACb,GAAG;AAAA,QACH,QAAQ,SAAS,OAAO,QAAQ,SAAS,cAAc;AAAA,MACzD;AAAA,IACF;AAAA,EACF;AAEA,SAAO;AACT;AAEA,SAAS,kBAAkB,UAA8B;AACvD,QAAM,kBAAkB;AAAA,IACtB,GAAG,SAAS;AAAA,EACd;AACA,SAAO,gBAAgB,oCAAoC;AAC3D,SAAO,gBAAgB,qCAAqC;AAC5D,SAAO,gBAAgB,8BAA8B;AACrD,SAAO,gBAAgB,kCAAkC;AACzD,SAAO;AAAA,IACL,GAAG;AAAA,IACH,UAAU;AAAA,EACZ;AACF;AAEA,eAAe;AAAA,EACb;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"16e079a55cdd4175ffeada8708d6c49d219f1229"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Sn=function(){return s},s}Sn();const aRe=(Sn().s[0]++,Moe({version:8,sources:{},layers:[]}));function xoe(){return Sn().f[0]++,Sn().s[1]++,Math.random().toString(36).substring(2,9)}function lRe(n){return Sn().f[1]++,Sn().s[2]++,Sn().b[1][0]++,!("id"in n)||(Sn().b[1][1]++,!n.id)?(Sn().b[0][0]++,Sn().s[3]++,n.id=xoe()):Sn().b[0][1]++,Sn().s[4]++,n}function uRe(n){Sn().f[2]++;const e=(Sn().s[5]++,n.layers.map(t=>{Sn().f[3]++;const i=(Sn().s[6]++,{...t});return Sn().s[7]++,delete i.interactive,Sn().s[8]++,i}));return Sn().s[9]++,{...n,layers:e}}function cRe(n){return Sn().f[4]++,Sn().s[10]++,{...n,layers:rue(n.layers)}}function Moe(n){return Sn().f[5]++,Sn().s[11]++,uRe(cRe(lRe(n)))}function ARe(n,e){Sn().f[6]++,Sn().s[12]++;for(let t=(Sn().s[13]++,0);t<n.length;t++){if(Sn().s[14]++,n[t].id===e)return Sn().b[2][0]++,Sn().s[15]++,t;Sn().b[2][1]++}return Sn().s[16]++,null}function LK(n,e,t){Sn().f[7]++;const i=(Sn().s[17]++,Sn().b[3][0]++,e.metadata||(Sn().b[3][1]++,{}));let r=(Sn().s[18]++,i[`maputnik:${n}_access_token`]);return Sn().s[19]++,Sn().b[5][0]++,t.allowFallback&&(Sn().b[5][1]++,!r)?(Sn().b[4][0]++,Sn().s[20]++,r=_oe[n]):Sn().b[4][1]++,Sn().s[21]++,r}function hRe(n,e,t=(Sn().b[6][0]++,{})){Sn().f[8]++;const i=(Sn().s[22]++,n.sources[e]);if(Sn().s[23]++,i)Sn().b[7][1]++;else return Sn().b[7][0]++,Sn().s[24]++,n;if(Sn().s[25]++,Sn().b[9][0]++,!("url"in i)||(Sn().b[9][1]++,!i.url))return Sn().b[8][0]++,Sn().s[26]++,n;Sn().b[8][1]++;let r=(Sn().s[27]++,e);Sn().s[28]++,Sn().b[11][0]++,e==="thunderforest_transport"||(Sn().b[11][1]++,e==="thunderforest_outdoors")?(Sn().b[10][0]++,Sn().s[29]++,r="thunderforest"):(Sn().b[10][1]++,Sn().s[30]++,Sn().b[13][0]++,"url"in i&&(Sn().b[13][1]++,i.url?.match(/\.stadiamaps\.com/))?(Sn().b[12][0]++,Sn().s[31]++,r="stadia"):(Sn().b[12][1]++,Sn().s[32]++,Sn().b[15][0]++,"url"in i&&(Sn().b[15][1]++,i.url?.match(/\.locationiq\.com/))?(Sn().b[14][0]++,Sn().s[33]++,r="locationiq"):Sn().b[14][1]++));const o=(Sn().s[34]++,LK(r,n,t));if(Sn().s[35]++,o)Sn().b[16][1]++;else return Sn().b[16][0]++,Sn().s[36]++,n;let s;Sn().s[37]++,r=="stadia"?(Sn().b[17][0]++,Sn().s[38]++,s=`${i.url}?api_key=${o}`):(Sn().b[17][1]++,Sn().s[39]++,s=i.url.replace("{key}",o));const a=(Sn().s[40]++,{...n.sources,[e]:{...i,url:s}}),c=(Sn().s[41]++,{...n,sources:a});return Sn().s[42]++,c}function dRe(n,e=(Sn().b[18][0]++,{})){Sn().f[9]++;let t=(Sn().s[43]++,n);if(Sn().s[44]++,Object.keys(n.sources).forEach(i=>{Sn().f[10]++,Sn().s[45]++,t=hRe(t,i,e)}),Sn().s[46]++,Sn().b[20][0]++,n.glyphs&&(Sn().b[20][1]++,n.glyphs.match(/\.tilehosting\.com/)||(Sn().b[20][2]++,n.glyphs.match(/\.maptiler\.com/)))){Sn().b[19][0]++;const i=(Sn().s[47]++,LK("openmaptiles",n,e));Sn().s[48]++,i?(Sn().b[21][0]++,Sn().s[49]++,t={...t,glyphs:n.glyphs.replace("{key}",i)}):Sn().b[21][1]++}else Sn().b[19][1]++;return Sn().s[50]++,t}function fRe(n){Sn().f[11]++;const e=(Sn().s[51]++,{...n.metadata});return Sn().s[52]++,delete e["maputnik:openmaptiles_access_token"],Sn().s[53]++,delete e["maputnik:thunderforest_access_token"],Sn().s[54]++,delete e["maputnik:stadia_access_token"],Sn().s[55]++,delete e["maputnik:locationiq_access_token"],Sn().s[56]++,{...n,metadata:e}}const xd={ensureStyleValidity:Moe,emptyStyle:aRe,indexOfLayer:ARe,generateId:xoe,getAccessToken:LK,replaceAccessTokens:dRe,stripAccessTokens:fRe};function ri(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalExport.tsx",e="0479ae849bf143a83f826f9fdcad7b323ec1b109",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalExport.tsx",statementMap:{0:{start:{line:14,column:28},end:{line:14,column:35}},1:{start:{line:15,column:36},end:{line:15,column:83}},2:{start:{line:18,column:4},end:{line:22,column:6}},3:{start:{line:25,column:4},end:{line:33,column:5}},4:{start:{line:26,column:6},end:{line:30,column:9}},5:{start:{line:32,column:6},end:{line:32,column:36}},6:{start:{line:36,column:23},end:{line:36,column:44}},7:{start:{line:37,column:22},end:{line:37,column:69}},8:{start:{line:38,column:17},end:{line:62,column:1}},9:{start:{line:63,column:17},end:{line:63,column:70}},10:{start:{line:64,column:23},end:{line:64,column:40}},11:{start:{line:65,column:4},end:{line:65,column:39}},12:{start:{line:68,column:23},end:{line:68,column:44}},13:{start:{line:69,column:4},end:{line:74,column:5}},14:{start:{line:70,column:19},end:{line:70,column:85}},15:{start:{line:71,column:25},end:{line:71,column:42}},16:{start:{line:72,column:6},end:{line:72,column:41}},17:{start:{line:73,column:6},end:{line:73,column:13}},18:{start:{line:75,column:21},end:{line:75,column:42}},19:{start:{line:76,column:4},end:{line:80,column:5}},20:{start:{line:77,column:6},end:{line:77,column:49}},21:{start:{line:78,column:6},end:{line:78,column:45}},22:{start:{line:79,column:6},end:{line:79,column:37}},23:{start:{line:79,column:30},end:{line:79,column:37}},24:{start:{line:81,column:21},end:{line:81,column:54}},25:{start:{line:82,column:4},end:{line:82,column:37}},26:{start:{line:83,column:4},end:{line:83,column:27}},27:{start:{line:84,column:4},end:{line:84,column:30}},28:{start:{line:87,column:23},end:{line:87,column:44}},29:{start:{line:88,column:23},end:{line:88,column:52}},30:{start:{line:89,column:4},end:{line:89,column:43}},31:{start:{line:90,column:4},end:{line:90,column:35}},32:{start:{line:90,column:28},end:{line:90,column:35}},33:{start:{line:91,column:21},end:{line:91,column:54}},34:{start:{line:92,column:4},end:{line:92,column:37}},35:{start:{line:93,column:4},end:{line:93,column:27}},36:{start:{line:94,column:4},end:{line:94,column:30}},37:{start:{line:97,column:23},end:{line:105,column:5}},38:{start:{line:106,column:23},end:{line:106,column:66}},39:{start:{line:107,column:4},end:{line:107,column:43}},40:{start:{line:108,column:4},end:{line:108,column:22}},41:{start:{line:111,column:25},end:{line:117,column:5}},42:{start:{line:118,column:4},end:{line:118,column:44}},43:{start:{line:121,column:14},end:{line:121,column:26}},44:{start:{line:122,column:16},end:{line:122,column:38}},45:{start:{line:123,column:4},end:{line:188,column:6}},46:{start:{line:191,column:20},end:{line:191,column:58}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:17,column:2},end:{line:17,column:3}},loc:{start:{line:17,column:19},end:{line:23,column:3}},line:17},1:{name:"(anonymous_1)",decl:{start:{line:24,column:2},end:{line:24,column:3}},loc:{start:{line:24,column:15},end:{line:34,column:3}},line:24},2:{name:"(anonymous_2)",decl:{start:{line:35,column:2},end:{line:35,column:3}},loc:{start:{line:35,column:15},end:{line:66,column:3}},line:35},3:{name:"(anonymous_3)",decl:{start:{line:67,column:2},end:{line:67,column:3}},loc:{start:{line:67,column:20},end:{line:85,column:3}},line:67},4:{name:"(anonymous_4)",decl:{start:{line:86,column:2},end:{line:86,column:3}},loc:{start:{line:86,column:22},end:{line:95,column:3}},line:86},5:{name:"(anonymous_5)",decl:{start:{line:96,column:2},end:{line:96,column:3}},loc:{start:{line:96,column:27},end:{line:109,column:3}},line:96},6:{name:"(anonymous_6)",decl:{start:{line:110,column:2},end:{line:110,column:3}},loc:{start:{line:110,column:42},end:{line:119,column:3}},line:110},7:{name:"(anonymous_7)",decl:{start:{line:120,column:2},end:{line:120,column:3}},loc:{start:{line:120,column:11},end:{line:189,column:3}},line:120}},branchMap:{0:{loc:{start:{line:25,column:4},end:{line:33,column:5}},type:"if",locations:[{start:{line:25,column:4},end:{line:33,column:5}},{start:{line:31,column:11},end:{line:33,column:5}}],line:25},1:{loc:{start:{line:37,column:22},end:{line:37,column:69}},type:"binary-expr",locations:[{start:{line:37,column:22},end:{line:37,column:46}},{start:{line:37,column:50},end:{line:37,column:69}}],line:37},2:{loc:{start:{line:69,column:4},end:{line:74,column:5}},type:"if",locations:[{start:{line:69,column:4},end:{line:74,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:69},3:{loc:{start:{line:76,column:4},end:{line:80,column:5}},type:"if",locations:[{start:{line:76,column:4},end:{line:80,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:76},4:{loc:{start:{line:79,column:6},end:{line:79,column:37}},type:"if",locations:[{start:{line:79,column:6},end:{line:79,column:37}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:79},5:{loc:{start:{line:90,column:4},end:{line:90,column:35}},type:"if",locations:[{start:{line:90,column:4},end:{line:90,column:35}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:90},6:{loc:{start:{line:140,column:24},end:{line:140,column:58}},type:"binary-expr",locations:[{start:{line:140,column:24},end:{line:140,column:52}},{start:{line:140,column:56},end:{line:140,column:58}}],line:140},7:{loc:{start:{line:149,column:24},end:{line:149,column:58}},type:"binary-expr",locations:[{start:{line:149,column:24},end:{line:149,column:52}},{start:{line:149,column:56},end:{line:149,column:58}}],line:149},8:{loc:{start:{line:158,column:24},end:{line:158,column:58}},type:"binary-expr",locations:[{start:{line:158,column:24},end:{line:158,column:52}},{start:{line:158,column:56},end:{line:158,column:58}}],line:158},9:{loc:{start:{line:167,column:24},end:{line:167,column:58}},type:"binary-expr",locations:[{start:{line:167,column:24},end:{line:167,column:52}},{start:{line:167,column:56},end:{line:167,column:58}}],line:167},10:{loc:{start:{line:177,column:12},end:{line:180,column:16}},type:"binary-expr",locations:[{start:{line:177,column:12},end:{line:177,column:39}},{start:{line:177,column:59},end:{line:180,column:16}}],line:177}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalExport.tsx"],names:[],mappings:"AAoKQ,cAKA,YALA;AApKR,OAAO,WAAW;AAClB,OAAO,aAAa;AACpB,SAAQ,cAAa;AACrB,SAAQ,eAAc;AACtB,SAAQ,cAAa;AACrB,SAAQ,OAAO,cAAa;AAC5B,SAA8B,uBAAsB;AAEpD,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAClB,OAAO,WAAW;AAClB,OAAO,yBAAyB;AAIhC,MAAM,sBAAsB;AAC5B,MAAM,8BAA8B,OAAO,OAAO,uBAAuB;AAazE,MAAM,4BAA4B,MAAM,UAAoC;AAAA,EAE1E,iBAAiB;AACf,WAAO;AAAA,MACL,MAAM;AAAA,QACJ,MAAM,oBAAoB,KAAK,MAAM,QAAQ;AAAA,MAC/C;AAAA,IACF;AAAA,EACF;AAAA,EAEA,aAAa;AACX,QAAI,KAAK,MAAM,SAAS,MAAM;AAC5B,aAAO,QAAQ,KAAK,MAAM,SAAS,MAAM;AAAA,QACvC,aAAa;AAAA,QACb,QAAQ;AAAA,QACR,OAAO;AAAA,MACT,CAAC;AAAA,IACH,OAAO;AACL,aAAO,KAAK,MAAM,SAAS;AAAA,IAC7B;AAAA,EACF;AAAA,EAEA,aAAa;AACX,UAAM,aAAa,KAAK,eAAe;AACvC,UAAM,YAAY,KAAK,MAAM,SAAS,QAAQ,KAAK,MAAM,EAAE,KAAK;AAChE,UAAM,OAAO;AAAA;AAAA;AAAA;AAAA,WAIN,SAAS;AAAA;AAAA,+CAE2B,mBAAmB;AAAA,8CACpB,mBAAmB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAW/C,UAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQxB,UAAM,OAAO,IAAI,KAAK,CAAC,IAAI,GAAG,EAAC,MAAM,0BAAyB,CAAC;AAC/D,UAAM,aAAa,KAAK,WAAW;AACnC,WAAO,MAAM,aAAa,OAAO;AAAA,EACnC;AAAA,EAEA,MAAM,YAAY;AAChB,UAAM,aAAa,KAAK,eAAe;AAIvC,QAAI,CAAC,6BAA6B;AAChC,YAAM,OAAO,IAAI,KAAK,CAAC,UAAU,GAAG,EAAC,MAAM,iCAAgC,CAAC;AAC5E,YAAM,aAAa,KAAK,WAAW;AACnC,aAAO,MAAM,aAAa,OAAO;AACjC;AAAA,IACF;AAEA,QAAI,aAAa,KAAK,MAAM;AAC5B,QAAI,cAAc,MAAM;AACtB,mBAAa,MAAM,KAAK,iBAAiB;AACzC,WAAK,MAAM,gBAAgB,UAAU;AACrC,UAAI,cAAc,KAAM;AAAA,IAC1B;AAEA,UAAM,WAAW,MAAM,WAAW,eAAe;AACjD,UAAM,SAAS,MAAM,UAAU;AAC/B,UAAM,SAAS,MAAM;AACrB,SAAK,MAAM,aAAa;AAAA,EAC1B;AAAA,EAEA,MAAM,cAAc;AAClB,UAAM,aAAa,KAAK,eAAe;AAEvC,UAAM,aAAa,MAAM,KAAK,iBAAiB;AAC/C,SAAK,MAAM,gBAAgB,UAAU;AACrC,QAAI,cAAc,KAAM;AAExB,UAAM,WAAW,MAAM,WAAW,eAAe;AACjD,UAAM,SAAS,MAAM,UAAU;AAC/B,UAAM,SAAS,MAAM;AACrB,SAAK,MAAM,aAAa;AAAA,EAC1B;AAAA,EAEA,MAAM,mBAAyD;AAC7D,UAAM,aAAoC;AAAA,MACxC,OAAO;AAAA,QACL;AAAA,UACE,aAAa;AAAA,UACb,QAAQ,EAAC,oBAAoB,CAAC,OAAO,EAAC;AAAA,QACxC;AAAA,MACF;AAAA,MACA,eAAe,KAAK,WAAW;AAAA,IACjC;AAEA,UAAM,aAAa,MAAM,OAAO,mBAAmB,UAAU;AAC7D,SAAK,MAAM,gBAAgB,UAAU;AACrC,WAAO;AAAA,EACT;AAAA,EAEA,uBAAuB,UAAkB,OAAY;AACnD,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,UAAU;AAAA,QACR,GAAG,KAAK,MAAM,SAAS;AAAA,QACvB,CAAC,QAAQ,GAAG;AAAA,MACd;AAAA,IACF;AACA,SAAK,MAAM,eAAe,YAAY;AAAA,EACxC;AAAA,EAGA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,MAAM,oBAAoB,CAAC;AACjC,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,YAAY;AAAA,QACrB,WAAU;AAAA,QAGV,+BAAC,aAAQ,WAAU,0BACjB;AAAA,8BAAC,QAAI,YAAE,YAAY,GAAE;AAAA,UACrB,oBAAC,OACE,YAAE,uCAAuC,GAC5C;AAAA,UAEA,qBAAC,SACC;AAAA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,IAAI,SAAS,sBAAsB;AAAA,gBAC1C,WAAW,IAAI,SAAS;AAAA,gBACxB,QAAQ,KAAK,MAAM,SAAS,YAAY,CAAC,GAAU,oCAAoC;AAAA,gBACvF,UAAU,KAAK,uBAAuB,KAAK,MAAM,oCAAoC;AAAA;AAAA,YACvF;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,IAAI,SAAS,2BAA2B;AAAA,gBAC/C,WAAW,IAAI,SAAS;AAAA,gBACxB,QAAQ,KAAK,MAAM,SAAS,YAAY,CAAC,GAAU,qCAAqC;AAAA,gBACxF,UAAU,KAAK,uBAAuB,KAAK,MAAM,qCAAqC;AAAA;AAAA,YACxF;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,IAAI,SAAS,oBAAoB;AAAA,gBACxC,WAAW,IAAI,SAAS;AAAA,gBACxB,QAAQ,KAAK,MAAM,SAAS,YAAY,CAAC,GAAU,8BAA8B;AAAA,gBACjF,UAAU,KAAK,uBAAuB,KAAK,MAAM,8BAA8B;AAAA;AAAA,YACjF;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,IAAI,SAAS,wBAAwB;AAAA,gBAC5C,WAAW,IAAI,SAAS;AAAA,gBACxB,QAAQ,KAAK,MAAM,SAAS,YAAY,CAAC,GAAU,kCAAkC;AAAA,gBACrF,UAAU,KAAK,uBAAuB,KAAK,MAAM,kCAAkC;AAAA;AAAA,YACrF;AAAA,aACF;AAAA,UAEA,qBAAC,SAAI,WAAU,iCACb;AAAA,iCAAC,eAAY,SAAS,KAAK,UAAU,KAAK,IAAI,GAC5C;AAAA,kCAAC,UAAM;AAAA,cACN,EAAE,MAAM;AAAA,eACX;AAAA,YACC,+BACC,qBAAC,eAAY,SAAS,KAAK,YAAY,KAAK,IAAI,GAC9C;AAAA,kCAAC,UAAM;AAAA,cACN,EAAE,SAAS;AAAA,eACd;AAAA,YAGF,qBAAC,eAAY,SAAS,KAAK,WAAW,KAAK,IAAI,GAC7C;AAAA,kCAAC,SAAK;AAAA,cACL,EAAE,aAAa;AAAA,eAClB;AAAA,aACF;AAAA,WACF;AAAA;AAAA,IAEF;AAAA,EACF;AACF;AAEA,MAAM,cAAc,gBAAgB,EAAE,mBAAmB;AACzD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"0479ae849bf143a83f826f9fdcad7b323ec1b109"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return ri=function(){return s},s}ri();const i$=(ri().s[0]++,iRe),r$=(ri().s[1]++,typeof window.showSaveFilePicker=="function");class pRe extends On.Component{tokenizedStyle(){return ri().f[0]++,ri().s[2]++,hAe(xd.stripAccessTokens(xd.replaceAccessTokens(this.props.mapStyle)))}exportName(){return ri().f[1]++,ri().s[3]++,this.props.mapStyle.name?(ri().b[0][0]++,ri().s[4]++,eRe(this.props.mapStyle.name,{replacement:"_",remove:/[*\-+~.()'"!:]/g,lower:!0})):(ri().b[0][1]++,ri().s[5]++,this.props.mapStyle.id)}createHtml(){ri().f[2]++;const e=(ri().s[6]++,this.tokenizedStyle()),t=(ri().s[7]++,ri().b[1][0]++,this.props.mapStyle.name||(ri().b[1][1]++,this.props.t("Map"))),i=(ri().s[8]++,`<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>${t}</title>
  <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />
  <script src="https://unpkg.com/maplibre-gl@${i$}/dist/maplibre-gl.js"><\/script>
  <link href="https://unpkg.com/maplibre-gl@${i$}/dist/maplibre-gl.css" rel="stylesheet" />
  <style>
    body { margin: 0; padding: 0; }
    #map { position: absolute; top: 0; bottom: 0; width: 100%; }
  </style>
</head>
<body>
  <div id="map"></div>
  <script>
      const map = new maplibregl.Map({
         container: 'map',
         style: ${e},
      });
      map.addControl(new maplibregl.NavigationControl());
  <\/script>
</body>
</html>
`),r=(ri().s[9]++,new Blob([i],{type:"text/html;charset=utf-8"})),o=(ri().s[10]++,this.exportName());ri().s[11]++,n$.saveAs(r,o+".html")}async saveStyle(){ri().f[3]++;const e=(ri().s[12]++,this.tokenizedStyle());if(ri().s[13]++,r$)ri().b[2][1]++;else{ri().b[2][0]++;const r=(ri().s[14]++,new Blob([e],{type:"application/json;charset=utf-8"})),o=(ri().s[15]++,this.exportName());ri().s[16]++,n$.saveAs(r,o+".json"),ri().s[17]++;return}let t=(ri().s[18]++,this.props.fileHandle);if(ri().s[19]++,t==null)if(ri().b[3][0]++,ri().s[20]++,t=await this.createFileHandle(),ri().s[21]++,this.props.onSetFileHandle(t),ri().s[22]++,t==null){ri().b[4][0]++,ri().s[23]++;return}else ri().b[4][1]++;else ri().b[3][1]++;const i=(ri().s[24]++,await t.createWritable());ri().s[25]++,await i.write(e),ri().s[26]++,await i.close(),ri().s[27]++,this.props.onOpenToggle()}async saveStyleAs(){ri().f[4]++;const e=(ri().s[28]++,this.tokenizedStyle()),t=(ri().s[29]++,await this.createFileHandle());if(ri().s[30]++,this.props.onSetFileHandle(t),ri().s[31]++,t==null){ri().b[5][0]++,ri().s[32]++;return}else ri().b[5][1]++;const i=(ri().s[33]++,await t.createWritable());ri().s[34]++,await i.write(e),ri().s[35]++,await i.close(),ri().s[36]++,this.props.onOpenToggle()}async createFileHandle(){ri().f[5]++;const e=(ri().s[37]++,{types:[{description:"json",accept:{"application/json":[".json"]}}],suggestedName:this.exportName()}),t=(ri().s[38]++,await window.showSaveFilePicker(e));return ri().s[39]++,this.props.onSetFileHandle(t),ri().s[40]++,t}changeMetadataProperty(e,t){ri().f[6]++;const i=(ri().s[41]++,{...this.props.mapStyle,metadata:{...this.props.mapStyle.metadata,[e]:t}});ri().s[42]++,this.props.onStyleChanged(i)}render(){ri().f[7]++;const e=(ri().s[43]++,this.props.t),t=(ri().s[44]++,Coe(e));return ri().s[45]++,te.jsx(w1,{"data-wd-key":"modal:export",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:e("Save Style"),className:"maputnik-export-modal",children:te.jsxs("section",{className:"maputnik-modal-section",children:[te.jsx("h1",{children:e("Save Style")}),te.jsx("p",{children:e("Save the JSON style to your computer.")}),te.jsxs("div",{children:[te.jsx(dd,{label:t.maputnik.maptiler_access_token.label,fieldSpec:t.maputnik.maptiler_access_token,value:(ri().b[6][0]++,this.props.mapStyle.metadata||(ri().b[6][1]++,{}))["maputnik:openmaptiles_access_token"],onChange:this.changeMetadataProperty.bind(this,"maputnik:openmaptiles_access_token")}),te.jsx(dd,{label:t.maputnik.thunderforest_access_token.label,fieldSpec:t.maputnik.thunderforest_access_token,value:(ri().b[7][0]++,this.props.mapStyle.metadata||(ri().b[7][1]++,{}))["maputnik:thunderforest_access_token"],onChange:this.changeMetadataProperty.bind(this,"maputnik:thunderforest_access_token")}),te.jsx(dd,{label:t.maputnik.stadia_access_token.label,fieldSpec:t.maputnik.stadia_access_token,value:(ri().b[8][0]++,this.props.mapStyle.metadata||(ri().b[8][1]++,{}))["maputnik:stadia_access_token"],onChange:this.changeMetadataProperty.bind(this,"maputnik:stadia_access_token")}),te.jsx(dd,{label:t.maputnik.locationiq_access_token.label,fieldSpec:t.maputnik.locationiq_access_token,value:(ri().b[9][0]++,this.props.mapStyle.metadata||(ri().b[9][1]++,{}))["maputnik:locationiq_access_token"],onChange:this.changeMetadataProperty.bind(this,"maputnik:locationiq_access_token")})]}),te.jsxs("div",{className:"maputnik-modal-export-buttons",children:[te.jsxs(Gs,{onClick:this.saveStyle.bind(this),children:[te.jsx(UT,{}),e("Save")]}),(ri().b[10][0]++,r$&&(ri().b[10][1]++,te.jsxs(Gs,{onClick:this.saveStyleAs.bind(this),children:[te.jsx(UT,{}),e("Save as")]}))),te.jsxs(Gs,{onClick:this.createHtml.bind(this),children:[te.jsx(nde,{}),e("Create HTML")]})]})]})})}}const mRe=(ri().s[46]++,Po()(pRe));function W4(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldDynamicArray.tsx",e="d4204cb1114c57682afd09034f9cc8268e27db52",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldDynamicArray.tsx",statementMap:{0:{start:{line:4,column:26},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:127}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:26},end:{line:4,column:27}},loc:{start:{line:4,column:37},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldDynamicArray.tsx"],names:[],mappings:"AAUM;AAVN,OAAO,uBAAsD;AAC7D,OAAO,cAAc;AAMrB,MAAM,oBAAsD,CAAC,UAAU;AACrE,SACE,oBAAC,YAAS,OAAO,MAAM,OACrB,8BAAC,qBAAmB,GAAG,OAAO,GAChC;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d4204cb1114c57682afd09034f9cc8268e27db52"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return W4=function(){return s},s}W4();W4().s[0]++;const woe=n=>(W4().f[0]++,W4().s[1]++,te.jsx(Dy,{label:n.label,children:te.jsx(kw,{...n})}));function Q4(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldCheckbox.tsx",e="10be4a5b6db1d1fa2555f9b6247244050c0b65b8",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldCheckbox.tsx",statementMap:{0:{start:{line:4,column:22},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:120}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:22},end:{line:4,column:23}},loc:{start:{line:4,column:33},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldCheckbox.tsx"],names:[],mappings:"AAYM;AAZN,OAAO,WAAW;AAClB,OAAO,mBAA8C;AAQrD,MAAM,gBAA8C,CAAC,UAAU;AAC7D,SACE,oBAAC,SAAM,OAAO,MAAM,OAClB,8BAAC,iBAAe,GAAG,OAAO,GAC5B;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"10be4a5b6db1d1fa2555f9b6247244050c0b65b8"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Q4=function(){return s},s}Q4();Q4().s[0]++;const gRe=n=>(Q4().f[0]++,Q4().s[1]++,te.jsx(Ms,{label:n.label,children:te.jsx(foe,{...n})}));function Cn(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalSourcesTypeEditor.tsx",e="18323b845fc84e69550b153f838c0967a64d83cc",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalSourcesTypeEditor.tsx",statementMap:{0:{start:{line:15,column:14},end:{line:15,column:26}},1:{start:{line:16,column:4},end:{line:30,column:9}},2:{start:{line:23,column:29},end:{line:26,column:12}},3:{start:{line:35,column:4},end:{line:38,column:7}},4:{start:{line:41,column:18},end:{line:41,column:47}},5:{start:{line:42,column:4},end:{line:51,column:6}},6:{start:{line:54,column:14},end:{line:54,column:26}},7:{start:{line:55,column:4},end:{line:99,column:9}},8:{start:{line:66,column:32},end:{line:69,column:12}},9:{start:{line:80,column:33},end:{line:83,column:12}},10:{start:{line:92,column:33},end:{line:95,column:12}},11:{start:{line:102,column:27},end:{line:107,column:1}},12:{start:{line:102,column:34},end:{line:107,column:1}},13:{start:{line:110,column:14},end:{line:110,column:26}},14:{start:{line:111,column:24},end:{line:118,column:5}},15:{start:{line:112,column:26},end:{line:112,column:64}},16:{start:{line:113,column:6},end:{line:113,column:29}},17:{start:{line:114,column:6},end:{line:117,column:9}},18:{start:{line:119,column:4},end:{line:146,column:9}},19:{start:{line:126,column:29},end:{line:129,column:12}},20:{start:{line:133,column:8},end:{line:144,column:10}},21:{start:{line:141,column:31},end:{line:141,column:52}},22:{start:{line:151,column:14},end:{line:151,column:26}},23:{start:{line:152,column:24},end:{line:159,column:5}},24:{start:{line:153,column:26},end:{line:153,column:64}},25:{start:{line:154,column:6},end:{line:154,column:29}},26:{start:{line:155,column:6},end:{line:158,column:9}},27:{start:{line:160,column:23},end:{line:165,column:5}},28:{start:{line:161,column:6},end:{line:164,column:9}},29:{start:{line:166,column:4},end:{line:192,column:9}},30:{start:{line:179,column:8},end:{line:190,column:10}},31:{start:{line:187,column:31},end:{line:187,column:52}},32:{start:{line:197,column:14},end:{line:197,column:26}},33:{start:{line:198,column:4},end:{line:209,column:6}},34:{start:{line:204,column:28},end:{line:207,column:10}},35:{start:{line:214,column:14},end:{line:214,column:26}},36:{start:{line:215,column:4},end:{line:242,column:9}},37:{start:{line:222,column:12},end:{line:225,column:15}},38:{start:{line:235,column:12},end:{line:238,column:15}},39:{start:{line:247,column:14},end:{line:247,column:26}},40:{start:{line:248,column:4},end:{line:263,column:9}},41:{start:{line:256,column:29},end:{line:259,column:12}},42:{start:{line:268,column:14},end:{line:268,column:26}},43:{start:{line:269,column:24},end:{line:275,column:5}},44:{start:{line:276,column:4},end:{line:340,column:5}},45:{start:{line:278,column:8},end:{line:278,column:79}},46:{start:{line:280,column:8},end:{line:280,column:85}},47:{start:{line:282,column:8},end:{line:282,column:77}},48:{start:{line:284,column:8},end:{line:284,column:76}},49:{start:{line:286,column:8},end:{line:286,column:77}},50:{start:{line:288,column:8},end:{line:300,column:13}},51:{start:{line:293,column:36},end:{line:296,column:14}},52:{start:{line:302,column:8},end:{line:302,column:77}},53:{start:{line:304,column:8},end:{line:331,column:13}},54:{start:{line:310,column:38},end:{line:313,column:16}},55:{start:{line:324,column:38},end:{line:327,column:16}},56:{start:{line:333,column:8},end:{line:333,column:76}},57:{start:{line:335,column:8},end:{line:335,column:74}},58:{start:{line:337,column:8},end:{line:337,column:74}},59:{start:{line:339,column:8},end:{line:339,column:20}},60:{start:{line:343,column:31},end:{line:343,column:80}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:11},end:{line:31,column:3}},line:14},1:{name:"(anonymous_1)",decl:{start:{line:23,column:20},end:{line:23,column:21}},loc:{start:{line:23,column:29},end:{line:26,column:12}},line:23},2:{name:"(anonymous_2)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:24},end:{line:39,column:3}},line:34},3:{name:"(anonymous_3)",decl:{start:{line:40,column:2},end:{line:40,column:3}},loc:{start:{line:40,column:19},end:{line:52,column:3}},line:40},4:{name:"(anonymous_4)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:11},end:{line:100,column:3}},line:53},5:{name:"(anonymous_5)",decl:{start:{line:66,column:20},end:{line:66,column:21}},loc:{start:{line:66,column:32},end:{line:69,column:12}},line:66},6:{name:"(anonymous_6)",decl:{start:{line:80,column:20},end:{line:80,column:21}},loc:{start:{line:80,column:33},end:{line:83,column:12}},line:80},7:{name:"(anonymous_7)",decl:{start:{line:92,column:20},end:{line:92,column:21}},loc:{start:{line:92,column:33},end:{line:95,column:12}},line:92},8:{name:"(anonymous_8)",decl:{start:{line:102,column:27},end:{line:102,column:28}},loc:{start:{line:102,column:34},end:{line:107,column:1}},line:102},9:{name:"(anonymous_9)",decl:{start:{line:109,column:2},end:{line:109,column:3}},loc:{start:{line:109,column:11},end:{line:147,column:3}},line:109},10:{name:"(anonymous_10)",decl:{start:{line:111,column:24},end:{line:111,column:25}},loc:{start:{line:111,column:38},end:{line:118,column:5}},line:111},11:{name:"(anonymous_11)",decl:{start:{line:126,column:20},end:{line:126,column:21}},loc:{start:{line:126,column:29},end:{line:129,column:12}},line:126},12:{name:"(anonymous_12)",decl:{start:{line:132,column:32},end:{line:132,column:33}},loc:{start:{line:132,column:57},end:{line:145,column:7}},line:132},13:{name:"(anonymous_13)",decl:{start:{line:141,column:22},end:{line:141,column:23}},loc:{start:{line:141,column:31},end:{line:141,column:52}},line:141},14:{name:"(anonymous_14)",decl:{start:{line:150,column:2},end:{line:150,column:3}},loc:{start:{line:150,column:11},end:{line:193,column:3}},line:150},15:{name:"(anonymous_15)",decl:{start:{line:152,column:24},end:{line:152,column:25}},loc:{start:{line:152,column:38},end:{line:159,column:5}},line:152},16:{name:"(anonymous_16)",decl:{start:{line:160,column:23},end:{line:160,column:24}},loc:{start:{line:160,column:33},end:{line:165,column:5}},line:160},17:{name:"(anonymous_17)",decl:{start:{line:178,column:32},end:{line:178,column:33}},loc:{start:{line:178,column:57},end:{line:191,column:7}},line:178},18:{name:"(anonymous_18)",decl:{start:{line:187,column:22},end:{line:187,column:23}},loc:{start:{line:187,column:31},end:{line:187,column:52}},line:187},19:{name:"(anonymous_19)",decl:{start:{line:196,column:2},end:{line:196,column:3}},loc:{start:{line:196,column:11},end:{line:210,column:3}},line:196},20:{name:"(anonymous_20)",decl:{start:{line:204,column:18},end:{line:204,column:19}},loc:{start:{line:204,column:28},end:{line:207,column:10}},line:204},21:{name:"(anonymous_21)",decl:{start:{line:213,column:2},end:{line:213,column:3}},loc:{start:{line:213,column:11},end:{line:243,column:3}},line:213},22:{name:"(anonymous_22)",decl:{start:{line:221,column:20},end:{line:221,column:21}},loc:{start:{line:221,column:30},end:{line:226,column:11}},line:221},23:{name:"(anonymous_23)",decl:{start:{line:234,column:20},end:{line:234,column:21}},loc:{start:{line:234,column:33},end:{line:239,column:11}},line:234},24:{name:"(anonymous_24)",decl:{start:{line:246,column:2},end:{line:246,column:3}},loc:{start:{line:246,column:11},end:{line:264,column:3}},line:246},25:{name:"(anonymous_25)",decl:{start:{line:256,column:20},end:{line:256,column:21}},loc:{start:{line:256,column:29},end:{line:259,column:12}},line:256},26:{name:"(anonymous_26)",decl:{start:{line:267,column:2},end:{line:267,column:3}},loc:{start:{line:267,column:11},end:{line:341,column:3}},line:267},27:{name:"(anonymous_27)",decl:{start:{line:293,column:22},end:{line:293,column:23}},loc:{start:{line:293,column:36},end:{line:296,column:14}},line:293},28:{name:"(anonymous_28)",decl:{start:{line:310,column:24},end:{line:310,column:25}},loc:{start:{line:310,column:38},end:{line:313,column:16}},line:310},29:{name:"(anonymous_29)",decl:{start:{line:324,column:24},end:{line:324,column:25}},loc:{start:{line:324,column:38},end:{line:327,column:16}},line:324}},branchMap:{0:{loc:{start:{line:41,column:18},end:{line:41,column:47}},type:"binary-expr",locations:[{start:{line:41,column:18},end:{line:41,column:41}},{start:{line:41,column:45},end:{line:41,column:47}}],line:41},1:{loc:{start:{line:79,column:17},end:{line:79,column:47}},type:"binary-expr",locations:[{start:{line:79,column:17},end:{line:79,column:42}},{start:{line:79,column:46},end:{line:79,column:47}}],line:79},2:{loc:{start:{line:91,column:17},end:{line:91,column:48}},type:"binary-expr",locations:[{start:{line:91,column:17},end:{line:91,column:42}},{start:{line:91,column:46},end:{line:91,column:48}}],line:91},3:{loc:{start:{line:258,column:17},end:{line:258,column:72}},type:"cond-expr",locations:[{start:{line:258,column:48},end:{line:258,column:51}},{start:{line:258,column:54},end:{line:258,column:72}}],line:258},4:{loc:{start:{line:276,column:4},end:{line:340,column:5}},type:"switch",locations:[{start:{line:277,column:6},end:{line:278,column:79}},{start:{line:279,column:6},end:{line:280,column:85}},{start:{line:281,column:6},end:{line:282,column:77}},{start:{line:283,column:6},end:{line:284,column:76}},{start:{line:285,column:6},end:{line:286,column:77}},{start:{line:287,column:6},end:{line:300,column:13}},{start:{line:301,column:6},end:{line:302,column:77}},{start:{line:303,column:6},end:{line:331,column:13}},{start:{line:332,column:6},end:{line:333,column:76}},{start:{line:334,column:6},end:{line:335,column:74}},{start:{line:336,column:6},end:{line:337,column:74}},{start:{line:338,column:6},end:{line:339,column:20}}],line:276},5:{loc:{start:{line:297,column:19},end:{line:297,column:86}},type:"binary-expr",locations:[{start:{line:297,column:19},end:{line:297,column:45}},{start:{line:297,column:49},end:{line:297,column:86}}],line:297},6:{loc:{start:{line:314,column:21},end:{line:314,column:92}},type:"binary-expr",locations:[{start:{line:314,column:21},end:{line:314,column:47}},{start:{line:314,column:51},end:{line:314,column:92}}],line:314},7:{loc:{start:{line:328,column:21},end:{line:328,column:92}},type:"binary-expr",locations:[{start:{line:328,column:21},end:{line:328,column:47}},{start:{line:328,column:51},end:{line:328,column:92}}],line:328}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0,0,0,0,0,0,0,0,0,0,0],5:[0,0],6:[0,0],7:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalSourcesTypeEditor.tsx"],names:[],mappings:"AA6BW,SACL,KADK;AA7BX,OAAO,WAAW;AAClB,SAAQ,cAAa;AACrB,SAA+B,uBAAuB;AAGtD,OAAO,WAAW;AAClB,OAAO,cAAc;AACrB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,uBAAuB;AAC9B,OAAO,gBAAgB;AACvB,OAAO,eAAe;AACtB,OAAO,mBAAmB;AAc1B,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SACN;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,cAAc;AAAA,UACvB,WAAW,OAAO,cAAc;AAAA,UAChC,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,UAAU,SAAO,KAAK,MAAM,SAAS;AAAA,YACnC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA;AAAA,MACH;AAAA,MACC,KAAK,MAAM;AAAA,OACd;AAAA,EACF;AACF;AAaA,MAAM,4BAA4B,MAAM,UAAoC;AAAA,EAC1E,eAAe,OAAiB;AAC9B,SAAK,MAAM,SAAS;AAAA,MAClB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,iBAAiB;AACf,UAAM,QAAQ,KAAK,MAAM,OAAO,SAAS,CAAC;AAC1C,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,OAAO,KAAK,MAAM,EAAE,UAAU;AAAA,QAC9B,WAAW,OAAO,cAAc;AAAA,QAChC,MAAK;AAAA,QACL,OAAO;AAAA,QACP,UAAU,KAAK,eAAe,KAAK,IAAI;AAAA;AAAA,IACzC;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SACL;AAAA,WAAK,eAAe;AAAA,MACrB;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,aAAa;AAAA,UACtB,WAAW,OAAO,cAAc;AAAA,UAChC,SAAS;AAAA,YACP,CAAC,OAAO,mCAAmC;AAAA,YAC3C,CAAC,OAAO,yBAAyB;AAAA,UACnC;AAAA,UACA,UAAU,YAAU,KAAK,MAAM,SAAS;AAAA,YACtC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA,UACD,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,eAAY;AAAA;AAAA,MACd;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,UAAU;AAAA,UACnB,WAAW,OAAO,cAAc;AAAA,UAChC,OAAO,KAAK,MAAM,OAAO,WAAW;AAAA,UACpC,UAAU,aAAW,KAAK,MAAM,SAAS;AAAA,YACvC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA;AAAA,MACH;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,UAAU;AAAA,UACnB,WAAW,OAAO,cAAc;AAAA,UAChC,OAAO,KAAK,MAAM,OAAO,WAAW;AAAA,UACpC,UAAU,aAAW,KAAK,MAAM,SAAS;AAAA,YACvC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA;AAAA,MACH;AAAA,MACC,KAAK,MAAM;AAAA,OACd;AAAA,EAEF;AACF;AAEA,MAAM,qBAAyE,CAAC,MAAO;AAAA,EACrF,EAAE,OAAO,EAAE,gBAAgB,GAAG,KAAK,WAAW;AAAA,EAC9C,EAAE,OAAO,EAAE,iBAAiB,GAAG,KAAK,YAAY;AAAA,EAChD,EAAE,OAAO,EAAE,oBAAoB,GAAG,KAAK,eAAe;AAAA,EACtD,EAAE,OAAO,EAAE,mBAAmB,GAAG,KAAK,cAAc;AACtD;AAUA,MAAM,0BAA0B,MAAM,UAAkC;AAAA,EACtE,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,cAAc,CAAC,KAAa,QAA0B;AAC1D,YAAM,cAAc,KAAK,MAAM,OAAO,YAAY,MAAM,CAAC;AACzD,kBAAY,GAAG,IAAI;AAEnB,WAAK,MAAM,SAAS;AAAA,QAClB,GAAG,KAAK,MAAM;AAAA,QACd;AAAA,MACF,CAAC;AAAA,IACH;AAEA,WAAO,qBAAC,SACN;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,WAAW;AAAA,UACpB,WAAW,OAAO,aAAa;AAAA,UAC/B,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,UAAU,SAAO,KAAK,MAAM,SAAS;AAAA,YACnC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA;AAAA,MACH;AAAA,MACC,mBAAmB,CAAC,EAAE,IAAI,CAAC,EAAC,OAAO,IAAG,GAAG,QAAQ;AAChD,eACE;AAAA,UAAC;AAAA;AAAA,YACC;AAAA,YAEA,QAAQ;AAAA,YACR,MAAK;AAAA,YACL,OAAO,KAAK,MAAM,OAAO,YAAY,GAAG;AAAA,YACxC,SAAS,CAAC,GAAG,CAAC;AAAA,YACd,UAAU,CAAC,QAA0B,YAAY,KAAK,GAAG;AAAA;AAAA,UALpD;AAAA,QAMP;AAAA,MAEJ,CAAC;AAAA,OACH;AAAA,EACF;AACF;AAUA,MAAM,0BAA0B,MAAM,UAAkC;AAAA,EACtE,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,cAAc,CAAC,KAAa,QAA0B;AAC1D,YAAM,cAAc,KAAK,MAAM,OAAO,YAAY,MAAM,CAAC;AACzD,kBAAY,GAAG,IAAI;AAEnB,WAAK,MAAM,SAAS;AAAA,QAClB,GAAG,KAAK,MAAM;AAAA,QACd;AAAA,MACF,CAAC;AAAA,IACH;AAEA,UAAM,aAAa,CAAC,SAAmB;AACrC,WAAK,MAAM,SAAS;AAAA,QAClB,GAAG,KAAK,MAAM;AAAA,QACd;AAAA,MACF,CAAC;AAAA,IACH;AAEA,WAAO,qBAAC,SACN;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,WAAW;AAAA,UACpB,WAAW,OAAO,aAAa;AAAA,UAC/B,MAAK;AAAA,UACL,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,SAAS,CAAC;AAAA,UACV,UAAU;AAAA;AAAA,MACZ;AAAA,MACC,mBAAmB,CAAC,EAAE,IAAI,CAAC,EAAC,OAAO,IAAG,GAAG,QAAQ;AAChD,eACE;AAAA,UAAC;AAAA;AAAA,YACC;AAAA,YAEA,QAAQ;AAAA,YACR,MAAK;AAAA,YACL,OAAO,KAAK,MAAM,OAAO,YAAY,GAAG;AAAA,YACxC,SAAS,CAAC,GAAG,CAAC;AAAA,YACd,UAAU,CAAC,QAA0B,YAAY,KAAK,GAAG;AAAA;AAAA,UALpD;AAAA,QAMP;AAAA,MAEJ,CAAC;AAAA,OACH;AAAA,EACF;AACF;AASA,MAAM,+BAA+B,MAAM,UAAuC;AAAA,EAChF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,OAAO,EAAE,aAAa;AAAA,QACtB,WAAW,OAAO,eAAe;AAAA,QACjC,OAAO,KAAK,MAAM,OAAO;AAAA,QACzB,UAAU,UAAQ,KAAK,MAAM,SAAS;AAAA,UACpC,GAAG,KAAK,MAAM;AAAA,UACd;AAAA,QACF,CAAC;AAAA;AAAA,IACH;AAAA,EACF;AACF;AAUA,MAAM,qCAAqC,MAAM,UAA6C;AAAA,EAC5F,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SACN;AAAA,0BAAC,SAAM,OAAO,EAAE,SAAS,GAAG,WAAW,OAAO,eAAe,MAC3D;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,UAAS;AAAA,UACT,UAAU,UAAQ;AAChB,iBAAK,MAAM,SAAS;AAAA,cAClB,GAAG,KAAK,MAAM;AAAA,cACd;AAAA,YACF,CAAC;AAAA,UACH;AAAA;AAAA,MACF,GACF;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,SAAS;AAAA,UAClB,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,UAAU,aAAW;AACnB,iBAAK,MAAM,SAAS;AAAA,cAClB,GAAG,KAAK,MAAM;AAAA,cACd;AAAA,YACF,CAAC;AAAA,UACH;AAAA;AAAA,MACF;AAAA,OACF;AAAA,EACF;AACF;AAUA,MAAM,4BAA4B,MAAM,UAAoC;AAAA,EAC1E,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SACN;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,aAAa;AAAA,UACtB,WAAW,OAAO,cAAc;AAAA,UAChC,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,eAAY;AAAA,UACZ,UAAU,CAAC,QAAgB,KAAK,MAAM,SAAS;AAAA,YAC7C,GAAG,KAAK,MAAM;AAAA,YACd,KAAK,IAAI,WAAW,YAAY,IAAI,MAAM,aAAa,GAAG;AAAA,UAC5D,CAAC;AAAA;AAAA,MACH;AAAA,MACC,KAAK,MAAM;AAAA,OACd;AAAA,EACF;AACF;AAQA,MAAM,uCAAuC,MAAM,UAA+C;AAAA,EAChG,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,cAAc;AAAA,MAClB,QAAQ,KAAK,MAAM;AAAA,MACnB,UAAU,KAAK,MAAM;AAAA,MACrB,GAAG,KAAK,MAAM;AAAA,MACd,MAAM,KAAK,MAAM;AAAA,MACjB,QAAQ,KAAK,MAAM;AAAA,IACrB;AACA,YAAO,KAAK,MAAM,MAAM;AAAA,MACtB,KAAK;AAAe,eAAO,oBAAC,0BAAwB,GAAG,aAAa;AAAA,MACpE,KAAK;AAAgB,eAAO,oBAAC,gCAA8B,GAAG,aAAa;AAAA,MAC3E,KAAK;AAAmB,eAAO,oBAAC,wBAAsB,GAAG,aAAa;AAAA,MACtE,KAAK;AAAe,eAAO,oBAAC,uBAAqB,GAAG,aAAa;AAAA,MACjE,KAAK;AAAmB,eAAO,oBAAC,wBAAsB,GAAG,aAAa;AAAA,MACtE,KAAK;AAAe,eAAO,oBAAC,uBAAqB,GAAG,aAClD;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,WAAW;AAAA,YACpB,WAAW,OAAO,cAAc;AAAA,YAChC,UAAU,cAAY,KAAK,MAAM,SAAS;AAAA,cACxC,GAAG,KAAK,MAAM;AAAA,cACd;AAAA,YACF,CAAC;AAAA,YACD,OAAO,KAAK,MAAM,OAAO,YAAY,OAAO,cAAc,SAAS;AAAA,YACnE,eAAY;AAAA;AAAA,QACd,GACF;AAAA,MACA,KAAK;AAAuB,eAAO,oBAAC,wBAAsB,GAAG,aAAa;AAAA,MAC1E,KAAK;AAAsB,eAAO,qBAAC,uBAAqB,GAAG,aACzD;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,WAAW;AAAA,cACpB,WAAW,OAAO,kBAAkB;AAAA,cACpC,UAAU,cAAY,KAAK,MAAM,SAAS;AAAA,gBACxC,GAAG,KAAK,MAAM;AAAA,gBACd;AAAA,cACF,CAAC;AAAA,cACD,OAAO,KAAK,MAAM,OAAO,YAAY,OAAO,kBAAkB,SAAS;AAAA,cACvE,eAAY;AAAA;AAAA,UACd;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,UAAU;AAAA,cACnB,WAAW,OAAO,kBAAkB;AAAA,cACpC,SAAS,OAAO,KAAK,OAAO,kBAAkB,SAAS,MAAM;AAAA,cAC7D,UAAU,cAAY,KAAK,MAAM,SAAS;AAAA,gBACxC,GAAG,KAAK,MAAM;AAAA,gBACd;AAAA,cACF,CAAC;AAAA,cACD,OAAO,KAAK,MAAM,OAAO,YAAY,OAAO,kBAAkB,SAAS;AAAA;AAAA,UACzE;AAAA,WACF;AAAA,MACA,KAAK;AAAkB,eAAO,oBAAC,uBAAqB,GAAG,aAAa;AAAA,MACpE,KAAK;AAAS,eAAO,oBAAC,qBAAmB,GAAG,aAAa;AAAA,MACzD,KAAK;AAAS,eAAO,oBAAC,qBAAmB,GAAG,aAAa;AAAA,MACzD;AAAS,eAAO;AAAA,IAClB;AAAA,EACF;AACF;AAEA,MAAM,yBAAyB,gBAAgB,EAAE,8BAA8B;AAC/E,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"18323b845fc84e69550b153f838c0967a64d83cc"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Cn=function(){return s},s}Cn();class aT extends On.Component{render(){Cn().f[0]++;const e=(Cn().s[0]++,this.props.t);return Cn().s[1]++,te.jsxs("div",{children:[te.jsx(KM,{label:e("TileJSON URL"),fieldSpec:ts.source_vector.url,value:this.props.source.url,onChange:t=>(Cn().f[1]++,Cn().s[2]++,this.props.onChange({...this.props.source,url:t}))}),this.props.children]})}}class lT extends On.Component{changeTileUrls(e){Cn().f[2]++,Cn().s[3]++,this.props.onChange({...this.props.source,tiles:e})}renderTileUrls(){Cn().f[3]++;const e=(Cn().s[4]++,Cn().b[0][0]++,this.props.source.tiles||(Cn().b[0][1]++,[]));return Cn().s[5]++,te.jsx(woe,{label:this.props.t("Tile URL"),fieldSpec:ts.source_vector.tiles,type:"url",value:e,onChange:this.changeTileUrls.bind(this)})}render(){Cn().f[4]++;const e=(Cn().s[6]++,this.props.t);return Cn().s[7]++,te.jsxs("div",{children:[this.renderTileUrls(),te.jsx(z4,{label:e("Scheme Type"),fieldSpec:ts.source_vector.scheme,options:[["xyz","xyz (Slippy map tilenames scheme)"],["tms","tms (OSGeo spec scheme)"]],onChange:t=>(Cn().f[5]++,Cn().s[8]++,this.props.onChange({...this.props.source,scheme:t})),value:this.props.source.scheme,"data-wd-key":"modal:sources.add.scheme_type"}),te.jsx(um,{label:e("Min Zoom"),fieldSpec:ts.source_vector.minzoom,value:(Cn().b[1][0]++,this.props.source.minzoom||(Cn().b[1][1]++,0)),onChange:t=>(Cn().f[6]++,Cn().s[9]++,this.props.onChange({...this.props.source,minzoom:t}))}),te.jsx(um,{label:e("Max Zoom"),fieldSpec:ts.source_vector.maxzoom,value:(Cn().b[2][0]++,this.props.source.maxzoom||(Cn().b[2][1]++,22)),onChange:t=>(Cn().f[7]++,Cn().s[10]++,this.props.onChange({...this.props.source,maxzoom:t}))}),this.props.children]})}}Cn().s[11]++;const Soe=n=>(Cn().f[8]++,Cn().s[12]++,[{label:n("Coord top left"),key:"top left"},{label:n("Coord top right"),key:"top right"},{label:n("Coord bottom right"),key:"bottom right"},{label:n("Coord bottom left"),key:"bottom left"}]);class yRe extends On.Component{render(){Cn().f[9]++;const e=(Cn().s[13]++,this.props.t);Cn().s[14]++;const t=(i,r)=>{Cn().f[10]++;const o=(Cn().s[15]++,this.props.source.coordinates.slice(0));Cn().s[16]++,o[i]=r,Cn().s[17]++,this.props.onChange({...this.props.source,coordinates:o})};return Cn().s[18]++,te.jsxs("div",{children:[te.jsx(KM,{label:e("Image URL"),fieldSpec:ts.source_image.url,value:this.props.source.url,onChange:i=>(Cn().f[11]++,Cn().s[19]++,this.props.onChange({...this.props.source,url:i}))}),Soe(e).map(({label:i,key:r},o)=>(Cn().f[12]++,Cn().s[20]++,te.jsx(sE,{label:i,length:2,type:"number",value:this.props.source.coordinates[o],default:[0,0],onChange:s=>(Cn().f[13]++,Cn().s[21]++,t(o,s))},r)))]})}}class vRe extends On.Component{render(){Cn().f[14]++;const e=(Cn().s[22]++,this.props.t);Cn().s[23]++;const t=(r,o)=>{Cn().f[15]++;const s=(Cn().s[24]++,this.props.source.coordinates.slice(0));Cn().s[25]++,s[r]=o,Cn().s[26]++,this.props.onChange({...this.props.source,coordinates:s})};Cn().s[27]++;const i=r=>{Cn().f[16]++,Cn().s[28]++,this.props.onChange({...this.props.source,urls:r})};return Cn().s[29]++,te.jsxs("div",{children:[te.jsx(woe,{label:e("Video URL"),fieldSpec:ts.source_video.urls,type:"string",value:this.props.source.urls,default:[],onChange:i}),Soe(e).map(({label:r,key:o},s)=>(Cn().f[17]++,Cn().s[30]++,te.jsx(sE,{label:r,length:2,type:"number",value:this.props.source.coordinates[s],default:[0,0],onChange:a=>(Cn().f[18]++,Cn().s[31]++,t(s,a))},o)))]})}}class bRe extends On.Component{render(){Cn().f[19]++;const e=(Cn().s[32]++,this.props.t);return Cn().s[33]++,te.jsx(KM,{label:e("GeoJSON URL"),fieldSpec:ts.source_geojson.data,value:this.props.source.data,onChange:t=>(Cn().f[20]++,Cn().s[34]++,this.props.onChange({...this.props.source,data:t}))})}}class CRe extends On.Component{render(){Cn().f[21]++;const e=(Cn().s[35]++,this.props.t);return Cn().s[36]++,te.jsxs("div",{children:[te.jsx(Ms,{label:e("GeoJSON"),fieldSpec:ts.source_geojson.data,children:te.jsx(F6,{value:this.props.source.data,lintType:"json",onChange:t=>{Cn().f[22]++,Cn().s[37]++,this.props.onChange({...this.props.source,data:t})}})}),te.jsx(gRe,{label:e("Cluster"),value:this.props.source.cluster,onChange:t=>{Cn().f[23]++,Cn().s[38]++,this.props.onChange({...this.props.source,cluster:t})}})]})}}class _Re extends On.Component{render(){Cn().f[24]++;const e=(Cn().s[39]++,this.props.t);return Cn().s[40]++,te.jsxs("div",{children:[te.jsx(KM,{label:e("PMTiles URL"),fieldSpec:ts.source_vector.url,value:this.props.source.url,"data-wd-key":"modal:sources.add.source_url",onChange:t=>(Cn().f[25]++,Cn().s[41]++,this.props.onChange({...this.props.source,url:t.startsWith("pmtiles://")?(Cn().b[3][0]++,t):(Cn().b[3][1]++,`pmtiles://${t}`)}))}),this.props.children]})}}class xRe extends On.Component{render(){Cn().f[26]++;const e=(Cn().s[42]++,this.props.t),t=(Cn().s[43]++,{source:this.props.source,onChange:this.props.onChange,t:this.props.t,i18n:this.props.i18n,tReady:this.props.tReady});switch(Cn().s[44]++,this.props.mode){case"geojson_url":return Cn().b[4][0]++,Cn().s[45]++,te.jsx(bRe,{...t});case"geojson_json":return Cn().b[4][1]++,Cn().s[46]++,te.jsx(CRe,{...t});case"tilejson_vector":return Cn().b[4][2]++,Cn().s[47]++,te.jsx(aT,{...t});case"tile_vector":return Cn().b[4][3]++,Cn().s[48]++,te.jsx(lT,{...t});case"tilejson_raster":return Cn().b[4][4]++,Cn().s[49]++,te.jsx(aT,{...t});case"tile_raster":return Cn().b[4][5]++,Cn().s[50]++,te.jsx(lT,{...t,children:te.jsx(um,{label:e("Tile Size"),fieldSpec:ts.source_raster.tileSize,onChange:i=>(Cn().f[27]++,Cn().s[51]++,this.props.onChange({...this.props.source,tileSize:i})),value:(Cn().b[5][0]++,this.props.source.tileSize||(Cn().b[5][1]++,ts.source_raster.tileSize.default)),"data-wd-key":"modal:sources.add.tile_size"})});case"tilejson_raster-dem":return Cn().b[4][6]++,Cn().s[52]++,te.jsx(aT,{...t});case"tilexyz_raster-dem":return Cn().b[4][7]++,Cn().s[53]++,te.jsxs(lT,{...t,children:[te.jsx(um,{label:e("Tile Size"),fieldSpec:ts.source_raster_dem.tileSize,onChange:i=>(Cn().f[28]++,Cn().s[54]++,this.props.onChange({...this.props.source,tileSize:i})),value:(Cn().b[6][0]++,this.props.source.tileSize||(Cn().b[6][1]++,ts.source_raster_dem.tileSize.default)),"data-wd-key":"modal:sources.add.tile_size"}),te.jsx(z4,{label:e("Encoding"),fieldSpec:ts.source_raster_dem.encoding,options:Object.keys(ts.source_raster_dem.encoding.values),onChange:i=>(Cn().f[29]++,Cn().s[55]++,this.props.onChange({...this.props.source,encoding:i})),value:(Cn().b[7][0]++,this.props.source.encoding||(Cn().b[7][1]++,ts.source_raster_dem.encoding.default))})]});case"pmtiles_vector":return Cn().b[4][8]++,Cn().s[56]++,te.jsx(_Re,{...t});case"image":return Cn().b[4][9]++,Cn().s[57]++,te.jsx(yRe,{...t});case"video":return Cn().b[4][10]++,Cn().s[58]++,te.jsx(vRe,{...t});default:return Cn().b[4][11]++,Cn().s[59]++,null}}}const Eoe=(Cn().s[60]++,Po()(xRe));function ym(){var n="/home/runner/work/maputnik/maputnik/src/libs/source.ts",e="871503159abbdc3b3ae7b24cdaefb6478172c58b",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/source.ts",statementMap:{0:{start:{line:2,column:27},end:{line:2,column:50}},1:{start:{line:3,column:2},end:{line:3,column:36}},2:{start:{line:4,column:2},end:{line:7,column:4}},3:{start:{line:10,column:2},end:{line:10,column:50}},4:{start:{line:13,column:25},end:{line:16,column:3}},5:{start:{line:17,column:2},end:{line:20,column:4}}},fnMap:{0:{name:"deleteSource",decl:{start:{line:1,column:16},end:{line:1,column:28}},loc:{start:{line:1,column:49},end:{line:8,column:1}},line:1},1:{name:"addSource",decl:{start:{line:9,column:16},end:{line:9,column:25}},loc:{start:{line:9,column:54},end:{line:11,column:1}},line:9},2:{name:"changeSource",decl:{start:{line:12,column:16},end:{line:12,column:28}},loc:{start:{line:12,column:57},end:{line:21,column:1}},line:12}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0},f:{0:0,1:0,2:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/source.ts"],names:[],mappings:"AAGO,gBAAS,aAAa,UAAoC,UAAkB;AACjF,QAAM,mBAAmB,EAAE,GAAG,SAAS,QAAO;AAC9C,SAAO,iBAAiB,QAAQ;AAChC,SAAO;AAAA,IACL,GAAG;AAAA,IACH,SAAS;AAAA,EACX;AACF;AAGO,gBAAS,UAAU,UAAoC,UAAkB,QAA6B;AAC3G,SAAO,aAAa,UAAU,UAAU,MAAM;AAChD;AAEO,gBAAS,aAAa,UAAoC,UAAkB,QAA6B;AAC9G,QAAM,iBAAiB;AAAA,IACrB,GAAG,SAAS;AAAA,IACZ,CAAC,QAAQ,GAAG;AAAA,EACd;AACA,SAAO;AAAA,IACL,GAAG;AAAA,IACH,SAAS;AAAA,EACX;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"871503159abbdc3b3ae7b24cdaefb6478172c58b"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return ym=function(){return s},s}ym();function MRe(n,e){ym().f[0]++;const t=(ym().s[0]++,{...n.sources});return ym().s[1]++,delete t[e],ym().s[2]++,{...n,sources:t}}function o$(n,e,t){return ym().f[1]++,ym().s[3]++,Boe(n,e,t)}function Boe(n,e,t){ym().f[2]++;const i=(ym().s[4]++,{...n.sources,[e]:t});return ym().s[5]++,{...n,sources:i}}const wRe={type:"vector",url:"https://api.maptiler.com/tiles/v3-openmaptiles/tiles.json?key={key}",title:"OpenMapTiles v3"},SRe={type:"vector",url:"https://tile.thunderforest.com/thunderforest.transport-v2.json?apikey={key}",title:"Thunderforest Transport v2"},ERe={type:"vector",url:"https://tile.thunderforest.com/thunderforest.outdoors-v2.json?apikey={key}",title:"Thunderforest Outdoors v2"},BRe={type:"vector",url:"https://s3-eu-west-1.amazonaws.com/tiles.os.uk/v2/data/vector/open-zoomstack/config.json",title:"OS Open Zoomstack v2"},ORe={type:"vector",url:"https://tiles.locationiq.com/v3/pbf/tiles.json?key={key}",title:"LocationIQ"},s$={openmaptiles:wRe,thunderforest_transport:SRe,thunderforest_outdoors:ERe,open_zoomstack:BRe,locationiq:ORe};function Qt(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalSources.tsx",e="30dc2f79b5d8eab063b35a7a783386d299d39465",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalSources.tsx",statementMap:{0:{start:{line:16,column:4},end:{line:33,column:9}},1:{start:{line:20,column:23},end:{line:20,column:57}},2:{start:{line:37,column:2},end:{line:40,column:3}},3:{start:{line:38,column:4},end:{line:38,column:43}},4:{start:{line:38,column:22},end:{line:38,column:43}},5:{start:{line:39,column:4},end:{line:39,column:29}},6:{start:{line:41,column:2},end:{line:44,column:3}},7:{start:{line:42,column:4},end:{line:42,column:50}},8:{start:{line:42,column:22},end:{line:42,column:50}},9:{start:{line:43,column:4},end:{line:43,column:33}},10:{start:{line:45,column:2},end:{line:49,column:3}},11:{start:{line:46,column:4},end:{line:46,column:43}},12:{start:{line:46,column:22},end:{line:46,column:43}},13:{start:{line:47,column:4},end:{line:47,column:83}},14:{start:{line:47,column:59},end:{line:47,column:83}},15:{start:{line:48,column:4},end:{line:48,column:29}},16:{start:{line:50,column:2},end:{line:56,column:3}},17:{start:{line:51,column:4},end:{line:55,column:5}},18:{start:{line:52,column:6},end:{line:52,column:27}},19:{start:{line:54,column:6},end:{line:54,column:28}},20:{start:{line:57,column:2},end:{line:59,column:3}},21:{start:{line:58,column:4},end:{line:58,column:19}},22:{start:{line:60,column:2},end:{line:62,column:3}},23:{start:{line:61,column:4},end:{line:61,column:19}},24:{start:{line:63,column:2},end:{line:63,column:14}},25:{start:{line:67,column:14},end:{line:67,column:26}},26:{start:{line:68,column:4},end:{line:94,column:9}},27:{start:{line:80,column:27},end:{line:80,column:67}},28:{start:{line:99,column:4},end:{line:99,column:17}},29:{start:{line:100,column:4},end:{line:104,column:6}},30:{start:{line:107,column:19},end:{line:107,column:50}},31:{start:{line:108,column:25},end:{line:108,column:40}},32:{start:{line:109,column:4},end:{line:192,column:5}},33:{start:{line:111,column:8},end:{line:114,column:10}},34:{start:{line:116,column:8},end:{line:119,column:10}},35:{start:{line:121,column:8},end:{line:125,column:10}},36:{start:{line:127,column:8},end:{line:130,column:10}},37:{start:{line:132,column:8},end:{line:138,column:10}},38:{start:{line:140,column:8},end:{line:143,column:10}},39:{start:{line:145,column:8},end:{line:152,column:10}},40:{start:{line:154,column:8},end:{line:157,column:10}},41:{start:{line:159,column:8},end:{line:165,column:10}},42:{start:{line:167,column:8},end:{line:176,column:10}},43:{start:{line:178,column:8},end:{line:189,column:10}},44:{start:{line:191,column:8},end:{line:191,column:18}},45:{start:{line:194,column:10},end:{line:197,column:3}},46:{start:{line:195,column:33},end:{line:195,column:43}},47:{start:{line:196,column:4},end:{line:196,column:39}},48:{start:{line:198,column:19},end:{line:200,column:3}},49:{start:{line:199,column:4},end:{line:199,column:30}},50:{start:{line:202,column:14},end:{line:202,column:26}},51:{start:{line:203,column:32},end:{line:205,column:5}},52:{start:{line:206,column:4},end:{line:257,column:9}},53:{start:{line:213,column:27},end:{line:213,column:57}},54:{start:{line:235,column:30},end:{line:235,column:87}},55:{start:{line:262,column:27},end:{line:262,column:40}},56:{start:{line:263,column:4},end:{line:263,column:35}},57:{start:{line:264,column:4},end:{line:264,column:26}},58:{start:{line:267,column:28},end:{line:267,column:38}},59:{start:{line:268,column:22},end:{line:268,column:77}},60:{start:{line:269,column:26},end:{line:282,column:6}},61:{start:{line:270,column:21},end:{line:270,column:47}},62:{start:{line:271,column:6},end:{line:281,column:8}},63:{start:{line:276,column:29},end:{line:276,column:93}},64:{start:{line:277,column:26},end:{line:277,column:85}},65:{start:{line:283,column:27},end:{line:295,column:6}},66:{start:{line:283,column:75},end:{line:283,column:106}},67:{start:{line:284,column:21},end:{line:284,column:44}},68:{start:{line:285,column:6},end:{line:294,column:8}},69:{start:{line:291,column:26},end:{line:291,column:107}},70:{start:{line:296,column:4},end:{line:326,column:6}},71:{start:{line:319,column:45},end:{line:319,column:109}},72:{start:{line:329,column:21},end:{line:329,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:11},end:{line:34,column:3}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:20,column:17},end:{line:20,column:18}},loc:{start:{line:20,column:23},end:{line:20,column:57}},line:20},2:{name:"editorMode",decl:{start:{line:36,column:9},end:{line:36,column:19}},loc:{start:{line:36,column:28},end:{line:64,column:1}},line:36},3:{name:"(anonymous_3)",decl:{start:{line:66,column:2},end:{line:66,column:3}},loc:{start:{line:66,column:11},end:{line:95,column:3}},line:66},4:{name:"(anonymous_4)",decl:{start:{line:80,column:21},end:{line:80,column:22}},loc:{start:{line:80,column:27},end:{line:80,column:67}},line:80},5:{name:"(anonymous_5)",decl:{start:{line:98,column:2},end:{line:98,column:3}},loc:{start:{line:98,column:21},end:{line:105,column:3}},line:98},6:{name:"(anonymous_6)",decl:{start:{line:106,column:2},end:{line:106,column:3}},loc:{start:{line:106,column:22},end:{line:193,column:3}},line:106},7:{name:"(anonymous_7)",decl:{start:{line:194,column:10},end:{line:194,column:11}},loc:{start:{line:194,column:16},end:{line:197,column:3}},line:194},8:{name:"(anonymous_8)",decl:{start:{line:198,column:19},end:{line:198,column:20}},loc:{start:{line:198,column:31},end:{line:200,column:3}},line:198},9:{name:"(anonymous_9)",decl:{start:{line:201,column:2},end:{line:201,column:3}},loc:{start:{line:201,column:11},end:{line:258,column:3}},line:201},10:{name:"(anonymous_10)",decl:{start:{line:213,column:20},end:{line:213,column:21}},loc:{start:{line:213,column:27},end:{line:213,column:57}},line:213},11:{name:"(anonymous_11)",decl:{start:{line:235,column:20},end:{line:235,column:21}},loc:{start:{line:235,column:30},end:{line:235,column:87}},line:235},12:{name:"(anonymous_12)",decl:{start:{line:261,column:2},end:{line:261,column:3}},loc:{start:{line:261,column:21},end:{line:265,column:3}},line:261},13:{name:"(anonymous_13)",decl:{start:{line:266,column:2},end:{line:266,column:3}},loc:{start:{line:266,column:11},end:{line:327,column:3}},line:266},14:{name:"(anonymous_14)",decl:{start:{line:269,column:60},end:{line:269,column:61}},loc:{start:{line:269,column:74},end:{line:282,column:5}},line:269},15:{name:"(anonymous_15)",decl:{start:{line:276,column:20},end:{line:276,column:21}},loc:{start:{line:276,column:29},end:{line:276,column:93}},line:276},16:{name:"(anonymous_16)",decl:{start:{line:277,column:20},end:{line:277,column:21}},loc:{start:{line:277,column:26},end:{line:277,column:85}},line:277},17:{name:"(anonymous_17)",decl:{start:{line:283,column:61},end:{line:283,column:62}},loc:{start:{line:283,column:75},end:{line:283,column:106}},line:283},18:{name:"(anonymous_18)",decl:{start:{line:283,column:112},end:{line:283,column:113}},loc:{start:{line:283,column:126},end:{line:295,column:5}},line:283},19:{name:"(anonymous_19)",decl:{start:{line:291,column:20},end:{line:291,column:21}},loc:{start:{line:291,column:26},end:{line:291,column:107}},line:291},20:{name:"(anonymous_20)",decl:{start:{line:319,column:23},end:{line:319,column:24}},loc:{start:{line:319,column:45},end:{line:319,column:109}},line:319}},branchMap:{0:{loc:{start:{line:37,column:2},end:{line:40,column:3}},type:"if",locations:[{start:{line:37,column:2},end:{line:40,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},1:{loc:{start:{line:38,column:4},end:{line:38,column:43}},type:"if",locations:[{start:{line:38,column:4},end:{line:38,column:43}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:38},2:{loc:{start:{line:41,column:2},end:{line:44,column:3}},type:"if",locations:[{start:{line:41,column:2},end:{line:44,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:41},3:{loc:{start:{line:42,column:4},end:{line:42,column:50}},type:"if",locations:[{start:{line:42,column:4},end:{line:42,column:50}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:42},4:{loc:{start:{line:45,column:2},end:{line:49,column:3}},type:"if",locations:[{start:{line:45,column:2},end:{line:49,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:45},5:{loc:{start:{line:46,column:4},end:{line:46,column:43}},type:"if",locations:[{start:{line:46,column:4},end:{line:46,column:43}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:46},6:{loc:{start:{line:47,column:4},end:{line:47,column:83}},type:"if",locations:[{start:{line:47,column:4},end:{line:47,column:83}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:47},7:{loc:{start:{line:47,column:8},end:{line:47,column:57}},type:"binary-expr",locations:[{start:{line:47,column:8},end:{line:47,column:18}},{start:{line:47,column:22},end:{line:47,column:57}}],line:47},8:{loc:{start:{line:50,column:2},end:{line:56,column:3}},type:"if",locations:[{start:{line:50,column:2},end:{line:56,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:50},9:{loc:{start:{line:51,column:4},end:{line:55,column:5}},type:"if",locations:[{start:{line:51,column:4},end:{line:55,column:5}},{start:{line:53,column:11},end:{line:55,column:5}}],line:51},10:{loc:{start:{line:57,column:2},end:{line:59,column:3}},type:"if",locations:[{start:{line:57,column:2},end:{line:59,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:57},11:{loc:{start:{line:60,column:2},end:{line:62,column:3}},type:"if",locations:[{start:{line:60,column:2},end:{line:62,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:60},12:{loc:{start:{line:107,column:19},end:{line:107,column:50}},type:"binary-expr",locations:[{start:{line:107,column:19},end:{line:107,column:44}},{start:{line:107,column:48},end:{line:107,column:50}}],line:107},13:{loc:{start:{line:107,column:20},end:{line:107,column:36}},type:"binary-expr",locations:[{start:{line:107,column:20},end:{line:107,column:30}},{start:{line:107,column:34},end:{line:107,column:36}}],line:107},14:{loc:{start:{line:109,column:4},end:{line:192,column:5}},type:"switch",locations:[{start:{line:110,column:6},end:{line:114,column:10}},{start:{line:115,column:6},end:{line:119,column:10}},{start:{line:120,column:6},end:{line:125,column:10}},{start:{line:126,column:6},end:{line:130,column:10}},{start:{line:131,column:6},end:{line:138,column:10}},{start:{line:139,column:6},end:{line:143,column:10}},{start:{line:144,column:6},end:{line:152,column:10}},{start:{line:153,column:6},end:{line:157,column:10}},{start:{line:158,column:6},end:{line:165,column:10}},{start:{line:166,column:6},end:{line:176,column:10}},{start:{line:177,column:6},end:{line:189,column:10}},{start:{line:190,column:6},end:{line:191,column:18}}],line:109},15:{loc:{start:{line:123,column:19},end:{line:123,column:42}},type:"binary-expr",locations:[{start:{line:123,column:19},end:{line:123,column:33}},{start:{line:123,column:37},end:{line:123,column:42}}],line:123},16:{loc:{start:{line:129,column:15},end:{line:129,column:72}},type:"binary-expr",locations:[{start:{line:129,column:15},end:{line:129,column:25}},{start:{line:129,column:29},end:{line:129,column:72}}],line:129},17:{loc:{start:{line:134,column:17},end:{line:134,column:80}},type:"binary-expr",locations:[{start:{line:134,column:17},end:{line:134,column:29}},{start:{line:134,column:33},end:{line:134,column:80}}],line:134},18:{loc:{start:{line:135,column:19},end:{line:135,column:38}},type:"binary-expr",locations:[{start:{line:135,column:19},end:{line:135,column:33}},{start:{line:135,column:37},end:{line:135,column:38}}],line:135},19:{loc:{start:{line:136,column:19},end:{line:136,column:39}},type:"binary-expr",locations:[{start:{line:136,column:19},end:{line:136,column:33}},{start:{line:136,column:37},end:{line:136,column:39}}],line:136},20:{loc:{start:{line:137,column:18},end:{line:137,column:40}},type:"binary-expr",locations:[{start:{line:137,column:18},end:{line:137,column:31}},{start:{line:137,column:35},end:{line:137,column:40}}],line:137},21:{loc:{start:{line:142,column:15},end:{line:142,column:72}},type:"binary-expr",locations:[{start:{line:142,column:15},end:{line:142,column:25}},{start:{line:142,column:29},end:{line:142,column:72}}],line:142},22:{loc:{start:{line:147,column:17},end:{line:147,column:80}},type:"binary-expr",locations:[{start:{line:147,column:17},end:{line:147,column:29}},{start:{line:147,column:33},end:{line:147,column:80}}],line:147},23:{loc:{start:{line:148,column:19},end:{line:148,column:38}},type:"binary-expr",locations:[{start:{line:148,column:19},end:{line:148,column:33}},{start:{line:148,column:37},end:{line:148,column:38}}],line:148},24:{loc:{start:{line:149,column:19},end:{line:149,column:39}},type:"binary-expr",locations:[{start:{line:149,column:19},end:{line:149,column:33}},{start:{line:149,column:37},end:{line:149,column:39}}],line:149},25:{loc:{start:{line:150,column:18},end:{line:150,column:40}},type:"binary-expr",locations:[{start:{line:150,column:18},end:{line:150,column:31}},{start:{line:150,column:35},end:{line:150,column:40}}],line:150},26:{loc:{start:{line:151,column:20},end:{line:151,column:42}},type:"binary-expr",locations:[{start:{line:151,column:20},end:{line:151,column:35}},{start:{line:151,column:39},end:{line:151,column:42}}],line:151},27:{loc:{start:{line:156,column:15},end:{line:156,column:72}},type:"binary-expr",locations:[{start:{line:156,column:15},end:{line:156,column:25}},{start:{line:156,column:29},end:{line:156,column:72}}],line:156},28:{loc:{start:{line:161,column:17},end:{line:161,column:80}},type:"binary-expr",locations:[{start:{line:161,column:17},end:{line:161,column:29}},{start:{line:161,column:33},end:{line:161,column:80}}],line:161},29:{loc:{start:{line:162,column:19},end:{line:162,column:38}},type:"binary-expr",locations:[{start:{line:162,column:19},end:{line:162,column:33}},{start:{line:162,column:37},end:{line:162,column:38}}],line:162},30:{loc:{start:{line:163,column:19},end:{line:163,column:39}},type:"binary-expr",locations:[{start:{line:163,column:19},end:{line:163,column:33}},{start:{line:163,column:37},end:{line:163,column:39}}],line:163},31:{loc:{start:{line:164,column:20},end:{line:164,column:42}},type:"binary-expr",locations:[{start:{line:164,column:20},end:{line:164,column:35}},{start:{line:164,column:39},end:{line:164,column:42}}],line:164}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0,0,0,0,0,0,0,0,0,0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0],26:[0,0],27:[0,0],28:[0,0],29:[0,0],30:[0,0],31:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalSources.tsx"],names:[],mappings:"AAiCU,cACA,YADA;AAjCV,OAAO,WAAW;AAClB,SAAQ,oBAAoB,gBAAe;AAC3C,OAAO,YAAY;AAEnB,SAA+B,uBAAuB;AAEtD,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,4BAAiD;AAExD,OAAO,WAAW;AAClB,SAAS,cAAc,WAAW,oBAAoB;AACtD,OAAO,mBAAmB;AAW1B,MAAM,qBAAqB,MAAM,UAA6B;AAAA,EAC5D,SAAS;AACP,WAAO,oBAAC,SAAI,WAAU,0BACpB;AAAA,MAAC;AAAA;AAAA,QACC,WAAU;AAAA,QACV,SAAS,MAAM,KAAK,MAAM,SAAS,KAAK,MAAM,EAAE;AAAA,QAEhD;AAAA,+BAAC,SAAI,WAAU,+BACb;AAAA,gCAAC,OAAE,WAAU,+BAA+B,eAAK,MAAM,OAAM;AAAA,YAC7D,qBAAC,OAAE,WAAU,6BAA4B;AAAA;AAAA,cAAE,KAAK,MAAM;AAAA,eAAG;AAAA,aAC3D;AAAA,UACA,oBAAC,UAAK,WAAU,kBAAiB;AAAA,UACjC,oBAAC,sBAAmB;AAAA;AAAA;AAAA,IACtB,GACF;AAAA,EACF;AACF;AAEA,SAAS,WAAW,QAA6B;AAC/C,MAAG,OAAO,SAAS,UAAU;AAC3B,QAAG,OAAO,MAAO,QAAO;AACxB,WAAO;AAAA,EACT;AACA,MAAG,OAAO,SAAS,cAAc;AAC/B,QAAG,OAAO,MAAO,QAAO;AACxB,WAAO;AAAA,EACT;AACA,MAAG,OAAO,SAAS,UAAU;AAC3B,QAAG,OAAO,MAAO,QAAO;AACxB,QAAG,OAAO,OAAO,OAAO,IAAI,WAAW,YAAY,EAAG,QAAO;AAC7D,WAAO;AAAA,EACT;AACA,MAAG,OAAO,SAAS,WAAW;AAC5B,QAAI,OAAO,OAAO,SAAU,UAAU;AACpC,aAAO;AAAA,IACT,OACK;AACH,aAAO;AAAA,IACT;AAAA,EACF;AACA,MAAG,OAAO,SAAS,SAAS;AAC1B,WAAO;AAAA,EACT;AACA,MAAG,OAAO,SAAS,SAAS;AAC1B,WAAO;AAAA,EACT;AACA,SAAO;AACT;AASA,MAAM,qCAAqC,MAAM,UAA6C;AAAA,EAC5F,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SAAI,WAAU,sCACpB;AAAA,2BAAC,SAAI,WAAU,6CACb;AAAA,6BAAC,UAAK,WAAU,gDAA+C;AAAA;AAAA,UAAE,KAAK,MAAM;AAAA,WAAS;AAAA,QACrF,oBAAC,UAAK,WAAU,kBAAiB;AAAA,QACjC;AAAA,UAAC;AAAA;AAAA,YACC,cAAY,EAAE,gCAAgC,EAAC,UAAU,KAAK,MAAM,SAAQ,CAAC;AAAA,YAC7E,WAAU;AAAA,YACV,SAAS,MAAK,KAAK,MAAM,SAAS,KAAK,MAAM,QAAQ;AAAA,YACrD,OAAO,EAAC,iBAAiB,cAAa;AAAA,YAEtC,8BAAC,YAAS;AAAA;AAAA,QACZ;AAAA,SACF;AAAA,MACA,oBAAC,SAAI,WAAU,8CACb;AAAA,QAAC;AAAA;AAAA,UACC,UAAU,KAAK,MAAM;AAAA,UACrB,MAAM,WAAW,KAAK,MAAM,MAAM;AAAA,UAClC,QAAQ,KAAK,MAAM;AAAA;AAAA,MACrB,GACF;AAAA,OACF;AAAA,EACF;AACF;AAYA,MAAM,kBAAkB,MAAM,UAA0C;AAAA,EACtE,YAAY,OAAuB;AACjC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,MAAM;AAAA,MACN,UAAU,MAAM,WAAW;AAAA,MAC3B,QAAQ,KAAK,cAAc,iBAAiB;AAAA,IAC9C;AAAA,EACF;AAAA,EAEA,cAAc,MAAuC;AACnD,UAAM,UAAU,KAAK,SAAS,CAAC,GAAG,UAAU,CAAC;AAC7C,UAAM,EAAC,SAAQ,IAAI,OAAO;AAE1B,YAAO,MAAM;AAAA,MACX,KAAK;AAAkB,eAAO;AAAA,UAC5B,MAAM;AAAA,UACN,KAAK,GAAG,QAAQ;AAAA,QAClB;AAAA,MACA,KAAK;AAAe,eAAO;AAAA,UACzB,MAAM;AAAA,UACN,MAAM,GAAG,QAAQ;AAAA,QACnB;AAAA,MACA,KAAK;AAAgB,eAAO;AAAA,UAC1B,MAAM;AAAA,UACN,SAAU,OAAsC,WAAW;AAAA,UAC3D,MAAM;AAAA,QACR;AAAA,MACA,KAAK;AAAmB,eAAO;AAAA,UAC7B,MAAM;AAAA,UACN,KAAM,OAAqC,OAAO,GAAG,QAAQ;AAAA,QAC/D;AAAA,MACA,KAAK;AAAe,eAAO;AAAA,UACzB,MAAM;AAAA,UACN,OAAQ,OAAqC,SAAS,CAAC,GAAG,QAAQ,kCAAkC;AAAA,UACpG,SAAU,OAAqC,WAAW;AAAA,UAC1D,SAAU,OAAqC,WAAW;AAAA,UAC1D,QAAS,OAAqC,UAAU;AAAA,QAC1D;AAAA,MACA,KAAK;AAAmB,eAAO;AAAA,UAC7B,MAAM;AAAA,UACN,KAAM,OAAqC,OAAO,GAAG,QAAQ;AAAA,QAC/D;AAAA,MACA,KAAK;AAAe,eAAO;AAAA,UACzB,MAAM;AAAA,UACN,OAAQ,OAAqC,SAAS,CAAC,GAAG,QAAQ,kCAAkC;AAAA,UACpG,SAAU,OAAqC,WAAW;AAAA,UAC1D,SAAU,OAAqC,WAAW;AAAA,UAC1D,QAAS,OAAqC,UAAU;AAAA,UACxD,UAAW,OAAqC,YAAY;AAAA,QAC9D;AAAA,MACA,KAAK;AAAuB,eAAO;AAAA,UACjC,MAAM;AAAA,UACN,KAAM,OAAwC,OAAO,GAAG,QAAQ;AAAA,QAClE;AAAA,MACA,KAAK;AAAsB,eAAO;AAAA,UAChC,MAAM;AAAA,UACN,OAAQ,OAAwC,SAAS,CAAC,GAAG,QAAQ,kCAAkC;AAAA,UACvG,SAAU,OAAwC,WAAW;AAAA,UAC7D,SAAU,OAAwC,WAAW;AAAA,UAC7D,UAAW,OAAwC,YAAY;AAAA,QACjE;AAAA,MACA,KAAK;AAAS,eAAO;AAAA,UACnB,MAAM;AAAA,UACN,KAAK,GAAG,QAAQ;AAAA,UAChB,aAAa;AAAA,YACX,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,UACN;AAAA,QACF;AAAA,MACA,KAAK;AAAS,eAAO;AAAA,UACnB,MAAM;AAAA,UACN,MAAM;AAAA,YACJ,GAAG,QAAQ;AAAA,UACb;AAAA,UACA,aAAa;AAAA,YACX,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,UACN;AAAA,QACF;AAAA,MACA;AAAS,eAAO,CAAC;AAAA,IACnB;AAAA,EACF;AAAA,EAEA,QAAQ,MAAM;AACZ,UAAM,EAAC,QAAQ,SAAQ,IAAI,KAAK;AAChC,SAAK,MAAM,MAAM,UAAU,MAAM;AAAA,EACnC;AAAA,EAEA,iBAAiB,CAAC,WAAgC;AAChD,SAAK,SAAS,EAAC,OAAM,CAAC;AAAA,EACxB;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AAQrB,UAAM,sBAAsB;AAAA,MAC1B,KAAK,OAAO,cAAc,KAAK;AAAA,IACjC;AAEA,WAAO,qBAAC,SAAI,WAAU,uBACpB;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,WAAW;AAAA,UACpB,WAAW,EAAC,KAAK,EAAE,wFAAwF,EAAC;AAAA,UAC5G,OAAO,KAAK,MAAM;AAAA,UAClB,UAAU,CAAC,MAAc,KAAK,SAAS,EAAE,UAAU,EAAC,CAAC;AAAA,UACrD,eAAY;AAAA;AAAA,MACd;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,aAAa;AAAA,UACtB,WAAW;AAAA,UACX,SAAS;AAAA,YACP,CAAC,gBAAgB,EAAE,gBAAgB,CAAC;AAAA,YACpC,CAAC,eAAe,EAAE,eAAe,CAAC;AAAA,YAClC,CAAC,mBAAmB,EAAE,uBAAuB,CAAC;AAAA,YAC9C,CAAC,eAAe,EAAE,oBAAoB,CAAC;AAAA,YACvC,CAAC,mBAAmB,EAAE,uBAAuB,CAAC;AAAA,YAC9C,CAAC,eAAe,EAAE,oBAAoB,CAAC;AAAA,YACvC,CAAC,uBAAuB,EAAE,2BAA2B,CAAC;AAAA,YACtD,CAAC,sBAAsB,EAAE,uBAAuB,CAAC;AAAA,YACjD,CAAC,kBAAkB,EAAE,kBAAkB,CAAC;AAAA,YACxC,CAAC,SAAS,EAAE,OAAO,CAAC;AAAA,YACpB,CAAC,SAAS,EAAE,OAAO,CAAC;AAAA,UACtB;AAAA,UACA,UAAU,UAAQ,KAAK,SAAS,EAAC,MAA0B,QAAQ,KAAK,cAAc,IAAkB,EAAC,CAAC;AAAA,UAC1G,OAAO,KAAK,MAAM;AAAA,UAClB,eAAY;AAAA;AAAA,MACd;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,UAAU,KAAK;AAAA,UACf,MAAM,KAAK,MAAM;AAAA,UACjB,QAAQ,KAAK,MAAM;AAAA;AAAA,MACrB;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,SAAS,KAAK;AAAA,UACd,eAAY;AAAA,UAEX,YAAE,YAAY;AAAA;AAAA,MACjB;AAAA,OACF;AAAA,EACF;AACF;AASA,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,WAAW,QAAqE;AAC9E,UAAM,iBAAiB,EAAC,GAAG,OAAM;AACjC,WAAO,eAAe,OAAO;AAC7B,WAAO;AAAA,EACT;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,GAAG,SAAQ,IAAI,KAAK;AAC3B,UAAM,YAAY,EAAC,GAAG,MAAM,KAAK,MAAM,MAAM,QAAQ,KAAK,MAAM,OAAM;AACtE,UAAM,gBAAgB,OAAO,KAAK,SAAS,OAAO,EAAE,IAAI,cAAY;AAClE,YAAM,SAAS,SAAS,QAAQ,QAAQ;AACxC,aAAO;AAAA,QAAC;AAAA;AAAA,UAEN;AAAA,UACA;AAAA,UACA,UAAU,CAAC,QAA6B,KAAK,MAAM,eAAe,aAAa,UAAU,UAAU,GAAG,CAAC;AAAA,UACvG,UAAU,MAAM,KAAK,MAAM,eAAe,aAAa,UAAU,QAAQ,CAAC;AAAA,UACzE,GAAG;AAAA;AAAA,QALC;AAAA,MAMP;AAAA,IACF,CAAC;AAED,UAAM,iBAAiB,OAAO,KAAK,aAAa,EAAE,OAAO,CAAC,aAAqB,EAAE,YAAY,SAAS,QAAQ,EAAE,IAAI,CAAC,aAAqB;AACxI,YAAM,SAAS,cAAc,QAAsC;AACnE,aAAO;AAAA,QAAC;AAAA;AAAA,UAEN,IAAI;AAAA,UACJ,MAAM,OAAO;AAAA,UACb,OAAO,OAAO;AAAA,UACd,UAAU,MAAM,KAAK,MAAM,eAAe,UAAU,UAAU,UAAU,KAAK,WAAW,MAAM,CAAC,CAAC;AAAA;AAAA,QAJ3F;AAAA,MAKP;AAAA,IACF,CAAC;AAED,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,SAAS;AAAA,QAElB;AAAA,+BAAC,aAAQ,WAAU,0BACjB;AAAA,gCAAC,QAAI,YAAE,gBAAgB,GAAE;AAAA,YACxB;AAAA,aACH;AAAA,UAEA,qBAAC,aAAQ,WAAU,0BACjB;AAAA,gCAAC,QAAI,YAAE,sBAAsB,GAAE;AAAA,YAC/B,oBAAC,OACE,YAAE,0DAA0D,GAC/D;AAAA,YACA,oBAAC,SAAI,WAAU,2BAA0B,OAAO,EAAC,UAAU,IAAG,GAC3D,0BACH;AAAA,aACF;AAAA,UAEA,qBAAC,aAAQ,WAAU,0BACjB;AAAA,gCAAC,QAAI,YAAE,gBAAgB,GAAE;AAAA,YACzB,oBAAC,OAAG,YAAE,8FAA8F,GAAE;AAAA,YACtG;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,CAAC,UAAkB,WAAgC,KAAK,MAAM,eAAe,UAAU,UAAU,UAAU,MAAM,CAAC;AAAA,gBACxH,GAAG;AAAA;AAAA,YACN;AAAA,aACF;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"30dc2f79b5d8eab063b35a7a783386d299d39465"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Qt=function(){return s},s}Qt();class IRe extends On.Component{render(){return Qt().f[0]++,Qt().s[0]++,te.jsx("div",{className:"maputnik-public-source",children:te.jsxs(Gs,{className:"maputnik-public-source-select",onClick:()=>(Qt().f[1]++,Qt().s[1]++,this.props.onSelect(this.props.id)),children:[te.jsxs("div",{className:"maputnik-public-source-info",children:[te.jsx("p",{className:"maputnik-public-source-name",children:this.props.title}),te.jsxs("p",{className:"maputnik-public-source-id",children:["#",this.props.id]})]}),te.jsx("span",{className:"maputnik-space"}),te.jsx(lZ,{})]})})}}function kRe(n){return Qt().f[2]++,Qt().s[2]++,n.type==="raster"?(Qt().b[0][0]++,Qt().s[3]++,n.tiles?(Qt().b[1][0]++,Qt().s[4]++,"tile_raster"):(Qt().b[1][1]++,Qt().s[5]++,"tilejson_raster")):(Qt().b[0][1]++,Qt().s[6]++,n.type==="raster-dem"?(Qt().b[2][0]++,Qt().s[7]++,n.tiles?(Qt().b[3][0]++,Qt().s[8]++,"tilexyz_raster-dem"):(Qt().b[3][1]++,Qt().s[9]++,"tilejson_raster-dem")):(Qt().b[2][1]++,Qt().s[10]++,n.type==="vector"?(Qt().b[4][0]++,Qt().s[11]++,n.tiles?(Qt().b[5][0]++,Qt().s[12]++,"tile_vector"):(Qt().b[5][1]++,Qt().s[13]++,Qt().b[7][0]++,n.url&&(Qt().b[7][1]++,n.url.startsWith("pmtiles://"))?(Qt().b[6][0]++,Qt().s[14]++,"pmtiles_vector"):(Qt().b[6][1]++,Qt().s[15]++,"tilejson_vector"))):(Qt().b[4][1]++,Qt().s[16]++,n.type==="geojson"?(Qt().b[8][0]++,Qt().s[17]++,typeof n.data=="string"?(Qt().b[9][0]++,Qt().s[18]++,"geojson_url"):(Qt().b[9][1]++,Qt().s[19]++,"geojson_json")):(Qt().b[8][1]++,Qt().s[20]++,n.type==="image"?(Qt().b[10][0]++,Qt().s[21]++,"image"):(Qt().b[10][1]++,Qt().s[22]++,n.type==="video"?(Qt().b[11][0]++,Qt().s[23]++,"video"):(Qt().b[11][1]++,Qt().s[24]++,null))))))}class TRe extends On.Component{render(){Qt().f[3]++;const e=(Qt().s[25]++,this.props.t);return Qt().s[26]++,te.jsxs("div",{className:"maputnik-active-source-type-editor",children:[te.jsxs("div",{className:"maputnik-active-source-type-editor-header",children:[te.jsxs("span",{className:"maputnik-active-source-type-editor-header-id",children:["#",this.props.sourceId]}),te.jsx("span",{className:"maputnik-space"}),te.jsx(Gs,{"aria-label":e("Remove '{{sourceId}}' source",{sourceId:this.props.sourceId}),className:"maputnik-active-source-type-editor-header-delete",onClick:()=>(Qt().f[4]++,Qt().s[27]++,this.props.onDelete(this.props.sourceId)),style:{backgroundColor:"transparent"},children:te.jsx(nC,{})})]}),te.jsx("div",{className:"maputnik-active-source-type-editor-content",children:te.jsx(Eoe,{onChange:this.props.onChange,mode:kRe(this.props.source),source:this.props.source})})]})}}class RRe extends On.Component{constructor(e){Qt().f[5]++,Qt().s[28]++,super(e),Qt().s[29]++,this.state={mode:"tilejson_vector",sourceId:xd.generateId(),source:this.defaultSource("tilejson_vector")}}defaultSource(e){Qt().f[6]++;const t=(Qt().s[30]++,Qt().b[12][0]++,(Qt().b[13][0]++,this.state||(Qt().b[13][1]++,{})).source||(Qt().b[12][1]++,{})),{protocol:i}=(Qt().s[31]++,window.location);switch(Qt().s[32]++,e){case"pmtiles_vector":return Qt().b[14][0]++,Qt().s[33]++,{type:"vector",url:`${i}//localhost:3000/file.pmtiles`};case"geojson_url":return Qt().b[14][1]++,Qt().s[34]++,{type:"geojson",data:`${i}//localhost:3000/geojson.json`};case"geojson_json":return Qt().b[14][2]++,Qt().s[35]++,{type:"geojson",cluster:(Qt().b[15][0]++,t.cluster||(Qt().b[15][1]++,!1)),data:""};case"tilejson_vector":return Qt().b[14][3]++,Qt().s[36]++,{type:"vector",url:(Qt().b[16][0]++,t.url||(Qt().b[16][1]++,`${i}//localhost:3000/tilejson.json`))};case"tile_vector":return Qt().b[14][4]++,Qt().s[37]++,{type:"vector",tiles:(Qt().b[17][0]++,t.tiles||(Qt().b[17][1]++,[`${i}//localhost:3000/{x}/{y}/{z}.pbf`])),minzoom:(Qt().b[18][0]++,t.minzoom||(Qt().b[18][1]++,0)),maxzoom:(Qt().b[19][0]++,t.maxzoom||(Qt().b[19][1]++,14)),scheme:(Qt().b[20][0]++,t.scheme||(Qt().b[20][1]++,"xyz"))};case"tilejson_raster":return Qt().b[14][5]++,Qt().s[38]++,{type:"raster",url:(Qt().b[21][0]++,t.url||(Qt().b[21][1]++,`${i}//localhost:3000/tilejson.json`))};case"tile_raster":return Qt().b[14][6]++,Qt().s[39]++,{type:"raster",tiles:(Qt().b[22][0]++,t.tiles||(Qt().b[22][1]++,[`${i}//localhost:3000/{x}/{y}/{z}.png`])),minzoom:(Qt().b[23][0]++,t.minzoom||(Qt().b[23][1]++,0)),maxzoom:(Qt().b[24][0]++,t.maxzoom||(Qt().b[24][1]++,14)),scheme:(Qt().b[25][0]++,t.scheme||(Qt().b[25][1]++,"xyz")),tileSize:(Qt().b[26][0]++,t.tileSize||(Qt().b[26][1]++,512))};case"tilejson_raster-dem":return Qt().b[14][7]++,Qt().s[40]++,{type:"raster-dem",url:(Qt().b[27][0]++,t.url||(Qt().b[27][1]++,`${i}//localhost:3000/tilejson.json`))};case"tilexyz_raster-dem":return Qt().b[14][8]++,Qt().s[41]++,{type:"raster-dem",tiles:(Qt().b[28][0]++,t.tiles||(Qt().b[28][1]++,[`${i}//localhost:3000/{x}/{y}/{z}.png`])),minzoom:(Qt().b[29][0]++,t.minzoom||(Qt().b[29][1]++,0)),maxzoom:(Qt().b[30][0]++,t.maxzoom||(Qt().b[30][1]++,14)),tileSize:(Qt().b[31][0]++,t.tileSize||(Qt().b[31][1]++,512))};case"image":return Qt().b[14][9]++,Qt().s[42]++,{type:"image",url:`${i}//localhost:3000/image.png`,coordinates:[[0,0],[0,0],[0,0],[0,0]]};case"video":return Qt().b[14][10]++,Qt().s[43]++,{type:"video",urls:[`${i}//localhost:3000/movie.mp4`],coordinates:[[0,0],[0,0],[0,0],[0,0]]};default:return Qt().b[14][11]++,Qt().s[44]++,{}}}onAdd=(Qt().s[45]++,()=>{Qt().f[7]++;const{source:e,sourceId:t}=(Qt().s[46]++,this.state);Qt().s[47]++,this.props.onAdd(t,e)});onChangeSource=(Qt().s[48]++,e=>{Qt().f[8]++,Qt().s[49]++,this.setState({source:e})});render(){Qt().f[9]++;const e=(Qt().s[50]++,this.props.t),t=(Qt().s[51]++,{doc:qr.source_vector.type.doc});return Qt().s[52]++,te.jsxs("div",{className:"maputnik-add-source",children:[te.jsx(dd,{label:e("Source ID"),fieldSpec:{doc:e("Unique ID that identifies the source and is used in the layer to reference the source.")},value:this.state.sourceId,onChange:i=>(Qt().f[10]++,Qt().s[53]++,this.setState({sourceId:i})),"data-wd-key":"modal:sources.add.source_id"}),te.jsx(z4,{label:e("Source Type"),fieldSpec:t,options:[["geojson_json",e("GeoJSON (JSON)")],["geojson_url",e("GeoJSON (URL)")],["tilejson_vector",e("Vector (TileJSON URL)")],["tile_vector",e("Vector (Tile URLs)")],["tilejson_raster",e("Raster (TileJSON URL)")],["tile_raster",e("Raster (Tile URLs)")],["tilejson_raster-dem",e("Raster DEM (TileJSON URL)")],["tilexyz_raster-dem",e("Raster DEM (XYZ URLs)")],["pmtiles_vector",e("Vector (PMTiles)")],["image",e("Image")],["video",e("Video")]],onChange:i=>(Qt().f[11]++,Qt().s[54]++,this.setState({mode:i,source:this.defaultSource(i)})),value:this.state.mode,"data-wd-key":"modal:sources.add.source_type"}),te.jsx(Eoe,{onChange:this.onChangeSource,mode:this.state.mode,source:this.state.source}),te.jsx(Gs,{className:"maputnik-add-source-button",onClick:this.onAdd,"data-wd-key":"modal:sources.add.add_source",children:e("Add Source")})]})}}class DRe extends On.Component{stripTitle(e){Qt().f[12]++;const t=(Qt().s[55]++,{...e});return Qt().s[56]++,delete t.title,Qt().s[57]++,t}render(){Qt().f[13]++;const{t:e,mapStyle:t}=(Qt().s[58]++,this.props),i=(Qt().s[59]++,{t:e,i18n:this.props.i18n,tReady:this.props.tReady}),r=(Qt().s[60]++,Object.keys(t.sources).map(s=>{Qt().f[14]++;const a=(Qt().s[61]++,t.sources[s]);return Qt().s[62]++,te.jsx(TRe,{sourceId:s,source:a,onChange:c=>(Qt().f[15]++,Qt().s[63]++,this.props.onStyleChanged(Boe(t,s,c))),onDelete:()=>(Qt().f[16]++,Qt().s[64]++,this.props.onStyleChanged(MRe(t,s))),...i},s)})),o=(Qt().s[65]++,Object.keys(s$).filter(s=>(Qt().f[17]++,Qt().s[66]++,!(s in t.sources))).map(s=>{Qt().f[18]++;const a=(Qt().s[67]++,s$[s]);return Qt().s[68]++,te.jsx(IRe,{id:s,type:a.type,title:a.title,onSelect:()=>(Qt().f[19]++,Qt().s[69]++,this.props.onStyleChanged(o$(t,s,this.stripTitle(a))))},s)}));return Qt().s[70]++,te.jsxs(w1,{"data-wd-key":"modal:sources",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:e("Sources"),children:[te.jsxs("section",{className:"maputnik-modal-section",children:[te.jsx("h1",{children:e("Active Sources")}),r]}),te.jsxs("section",{className:"maputnik-modal-section",children:[te.jsx("h1",{children:e("Choose Public Source")}),te.jsx("p",{children:e("Add one of the publicly available sources to your style.")}),te.jsx("div",{className:"maputnik-public-sources",style:{maxWidth:500},children:o})]}),te.jsxs("section",{className:"maputnik-modal-section",children:[te.jsx("h1",{children:e("Add New Source")}),te.jsx("p",{children:e("Add a new source to your style. You can only choose the source type and id at creation time!")}),te.jsx(RRe,{onAdd:(s,a)=>(Qt().f[20]++,Qt().s[71]++,this.props.onStyleChanged(o$(t,s,a))),...i})]})]})}}const PRe=(Qt().s[72]++,Po()(DRe));function Pg(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalLoading.tsx",e="14882741b03cd24dba8e21fe7c0f0c38039a7560",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalLoading.tsx",statementMap:{0:{start:{line:8,column:14},end:{line:8,column:26}},1:{start:{line:9,column:4},end:{line:22,column:6}},2:{start:{line:16,column:28},end:{line:16,column:49}},3:{start:{line:19,column:137},end:{line:19,column:159}},4:{start:{line:25,column:21},end:{line:25,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:11},end:{line:23,column:3}},line:7},1:{name:"(anonymous_1)",decl:{start:{line:16,column:22},end:{line:16,column:23}},loc:{start:{line:16,column:28},end:{line:16,column:49}},line:16},2:{name:"(anonymous_2)",decl:{start:{line:19,column:130},end:{line:19,column:131}},loc:{start:{line:19,column:137},end:{line:19,column:159}},line:19}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0,1:0,2:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalLoading.tsx"],names:[],mappings:"AAkBW,SAOL,KAPK;AAlBX,OAAO,WAAW;AAClB,SAA+B,uBAAuB;AAEtD,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAWlB,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,oBAAoB;AAAA,QACpB,OAAO,KAAK,MAAM;AAAA,QAClB,cAAc,MAAM,KAAK,MAAM,SAAS;AAAA,QAExC;AAAA,8BAAC,OACE,eAAK,MAAM,SACd;AAAA,UACA,oBAAC,OAAE,WAAU,4BACX,8BAAC,eAAY,SAAS,CAAC,MAAM,KAAK,MAAM,SAAS,CAAC,GAC/C,YAAE,QAAQ,GACb,GACF;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"14882741b03cd24dba8e21fe7c0f0c38039a7560"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Pg=function(){return s},s}Pg();class URe extends On.Component{render(){Pg().f[0]++;const e=(Pg().s[0]++,this.props.t);return Pg().s[1]++,te.jsxs(w1,{"data-wd-key":"modal:loading",isOpen:this.props.isOpen,underlayClickExits:!1,title:this.props.title,onOpenToggle:()=>(Pg().f[1]++,Pg().s[2]++,this.props.onCancel()),children:[te.jsx("p",{children:this.props.message}),te.jsx("p",{className:"maputnik-dialog__buttons",children:te.jsx(Gs,{onClick:t=>(Pg().f[2]++,Pg().s[3]++,this.props.onCancel(t)),children:e("Cancel")})})]})}}const KRe=(Pg().s[4]++,Po()(URe)),Ooe=[{id:"0-empty-style",title:"Empty Style",url:"https://cdn.jsdelivr.net/gh/maputnik/editor@9cf74ca405d2be0608b57db8109cf3a6af5b9f49/src/config/empty-style.json",thumbnail:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAECAQAAAAHDYbIAAAAEUlEQVR42mP8/58BDhiJ4wAA974H/U5Xe1oAAAAASUVORK5CYII="},{id:"americana",title:"Americana",url:"https://americanamap.org/style.json",thumbnail:"https://github.com/maplibre/maputnik/assets/649392/23fa75ad-63e6-43f5-8837-03cdb0428bac"},{id:"aws-hybrid",title:"AWS Hybrid",url:"https://maps.geo.eu-west-1.amazonaws.com/v2/styles/Hybrid/descriptor?key=v1.public.eyJqdGkiOiJiOTNkYjBlZi04OWUzLTQxMGUtODFhMC0zYjZjZjVmZWZmMDgifYtukap0NBaJpcrS6Vit9j03GJgK9Bn-RSu5UCe3jkdSql2kKp3IEgLPtyLssbmKUdVO11sXddjK3ZOZy8V6QG0olv0K_1tOxyMIe4DAO3IV6H4VzHWiaXlbSakGiEgFLuHBdcfLDeMotye7N6rSRxuZb0CN9ytH9VjLly6-NEBRZezO_qPQyvdTFdeZsARIpL0f9YVpxPxPVvUcAWYCk5LpaPseRCDPrY5SlCdA1ZKqUA4F9RzxSTxB73Fel_SoNDkCNaux1VposBu791-uUpDzUpr7leKckrPXrpZ2hwnFbafVxFV9vq4fLTpB5KoBksuLfGNIwAx1RLLxWuMhE4c.ZGQzZDY2OGQtMWQxMy00ZTEwLWIyZGUtOGVjYzUzMjU3OGE4&color-scheme=Light",thumbnail:"https://maputnik.s3.eu-west-1.amazonaws.com/thumbnails/aws-hybrid.jpg"},{id:"aws-standard",title:"AWS Standard",url:"https://maps.geo.eu-west-1.amazonaws.com/v2/styles/Standard/descriptor?key=v1.public.eyJqdGkiOiJiOTNkYjBlZi04OWUzLTQxMGUtODFhMC0zYjZjZjVmZWZmMDgifYtukap0NBaJpcrS6Vit9j03GJgK9Bn-RSu5UCe3jkdSql2kKp3IEgLPtyLssbmKUdVO11sXddjK3ZOZy8V6QG0olv0K_1tOxyMIe4DAO3IV6H4VzHWiaXlbSakGiEgFLuHBdcfLDeMotye7N6rSRxuZb0CN9ytH9VjLly6-NEBRZezO_qPQyvdTFdeZsARIpL0f9YVpxPxPVvUcAWYCk5LpaPseRCDPrY5SlCdA1ZKqUA4F9RzxSTxB73Fel_SoNDkCNaux1VposBu791-uUpDzUpr7leKckrPXrpZ2hwnFbafVxFV9vq4fLTpB5KoBksuLfGNIwAx1RLLxWuMhE4c.ZGQzZDY2OGQtMWQxMy00ZTEwLWIyZGUtOGVjYzUzMjU3OGE4&color-scheme=Light",thumbnail:"https://maputnik.s3.eu-west-1.amazonaws.com/thumbnails/aws-standard.jpg"},{id:"dark-matter",title:"Dark Matter",url:"https://cdn.jsdelivr.net/gh/openmaptiles/dark-matter-gl-style@v1.9/style.json",thumbnail:"https://maputnik.github.io/thumbnails/dark-matter.png"},{id:"locationiq-streets",title:"LocationIQ Streets",url:"https://tiles.locationiq.com/v3/streets/vector.json?key={key}",thumbnail:"https://static-assets.locationiq.com/maputnik/locationiq-streets.png"},{id:"maptiler-basic-gl-style",title:"MapTiler Basic",url:"https://cdn.jsdelivr.net/gh/openmaptiles/klokantech-basic-gl-style@v1.10/style.json",thumbnail:"https://maputnik.github.io/thumbnails/klokantech-basic.png"},{id:"maptiler-toner-gl-style",title:"Toner",url:"https://cdn.jsdelivr.net/gh/openmaptiles/toner-gl-style@v1.0/style.json",thumbnail:"https://maputnik.github.io/thumbnails/toner.png"},{id:"osm-bright",title:"OSM Bright",url:"https://cdn.jsdelivr.net/gh/openmaptiles/osm-bright-gl-style@v1.11/style.json",thumbnail:"https://maputnik.github.io/thumbnails/osm-bright.png"},{id:"osm-liberty",title:"OSM Liberty",url:"https://maputnik.github.io/osm-liberty/style.json",thumbnail:"https://maputnik.github.io/thumbnails/osm-liberty.png"},{id:"osm-openmaptiles",title:"OSM OpenMapTiles",url:"https://api.maptiler.com/maps/openstreetmap/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL",thumbnail:"https://openmaptiles.org/img/styles/openmaptiles.png"},{id:"positron",title:"Positron",url:"https://cdn.jsdelivr.net/gh/openmaptiles/positron-gl-style@v1.9/style.json",thumbnail:"https://maputnik.github.io/thumbnails/positron.png"},{id:"protomaps-light",title:"Protomaps Light",url:"https://api.protomaps.com/styles/v4/light/en.json?key=d828297496b11844",thumbnail:"https://github.com/user-attachments/assets/911f9765-4a7d-4736-9ec0-f2d4c90ae587"},{id:"stadia-outdoors",title:"Stadia Outdoors",url:"https://tiles.stadiamaps.com/styles/outdoors.json",thumbnail:"https://tiles.stadiamaps.com/static/outdoors.png?size=480x320&center=47.350259,8.49035&zoom=16"},{id:"versatiles-colorful",title:"Versatiles Colorful",url:"https://tiles.versatiles.org/assets/styles/colorful/style.json",thumbnail:"https://github.com/maplibre/maputnik/assets/649392/6cd69818-c541-46e4-a920-65fb4f654931"}];function _n(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalOpen.tsx",e="f3a6249e96d42fc8e59bc18fb123f3ec8de2b220",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalOpen.tsx",statementMap:{0:{start:{line:14,column:4},end:{line:37,column:9}},1:{start:{line:19,column:23},end:{line:19,column:58}},2:{start:{line:42,column:4},end:{line:42,column:17}},3:{start:{line:43,column:4},end:{line:45,column:6}},4:{start:{line:48,column:4},end:{line:50,column:7}},5:{start:{line:53,column:4},end:{line:53,column:31}},6:{start:{line:53,column:11},end:{line:53,column:31}},7:{start:{line:54,column:4},end:{line:60,column:5}},8:{start:{line:55,column:6},end:{line:55,column:39}},9:{start:{line:56,column:6},end:{line:59,column:9}},10:{start:{line:62,column:18},end:{line:99,column:3}},11:{start:{line:63,column:4},end:{line:63,column:22}},12:{start:{line:64,column:19},end:{line:64,column:24}},13:{start:{line:65,column:4},end:{line:90,column:7}},14:{start:{line:69,column:6},end:{line:69,column:29}},15:{start:{line:71,column:6},end:{line:73,column:7}},16:{start:{line:72,column:8},end:{line:72,column:15}},17:{start:{line:74,column:6},end:{line:77,column:9}},18:{start:{line:78,column:23},end:{line:78,column:54}},19:{start:{line:79,column:6},end:{line:79,column:48}},20:{start:{line:80,column:6},end:{line:80,column:39}},21:{start:{line:81,column:6},end:{line:81,column:26}},22:{start:{line:83,column:6},end:{line:87,column:9}},23:{start:{line:88,column:6},end:{line:88,column:25}},24:{start:{line:89,column:6},end:{line:89,column:61}},25:{start:{line:91,column:4},end:{line:98,column:7}},26:{start:{line:94,column:10},end:{line:94,column:26}},27:{start:{line:100,column:16},end:{line:103,column:3}},28:{start:{line:101,column:4},end:{line:101,column:23}},29:{start:{line:102,column:4},end:{line:102,column:44}},30:{start:{line:104,column:15},end:{line:131,column:3}},31:{start:{line:105,column:4},end:{line:105,column:22}},32:{start:{line:106,column:23},end:{line:114,column:5}},33:{start:{line:115,column:25},end:{line:115,column:68}},34:{start:{line:116,column:17},end:{line:116,column:43}},35:{start:{line:117,column:20},end:{line:117,column:37}},36:{start:{line:119,column:4},end:{line:126,column:5}},37:{start:{line:120,column:6},end:{line:120,column:37}},38:{start:{line:122,column:6},end:{line:124,column:9}},39:{start:{line:125,column:6},end:{line:125,column:13}},40:{start:{line:127,column:4},end:{line:127,column:51}},41:{start:{line:128,column:4},end:{line:128,column:49}},42:{start:{line:129,column:4},end:{line:129,column:24}},43:{start:{line:130,column:4},end:{line:130,column:16}},44:{start:{line:134,column:18},end:{line:156,column:3}},45:{start:{line:135,column:4},end:{line:135,column:23}},46:{start:{line:135,column:16},end:{line:135,column:23}},47:{start:{line:136,column:4},end:{line:136,column:35}},48:{start:{line:136,column:28},end:{line:136,column:35}},49:{start:{line:137,column:17},end:{line:137,column:25}},50:{start:{line:138,column:19},end:{line:138,column:35}},51:{start:{line:139,column:4},end:{line:139,column:22}},52:{start:{line:140,column:4},end:{line:140,column:37}},53:{start:{line:141,column:4},end:{line:154,column:6}},54:{start:{line:143,column:6},end:{line:150,column:7}},55:{start:{line:144,column:8},end:{line:144,column:48}},56:{start:{line:146,column:8},end:{line:148,column:11}},57:{start:{line:149,column:8},end:{line:149,column:15}},58:{start:{line:151,column:6},end:{line:151,column:53}},59:{start:{line:152,column:6},end:{line:152,column:39}},60:{start:{line:153,column:6},end:{line:153,column:26}},61:{start:{line:155,column:4},end:{line:155,column:50}},62:{start:{line:155,column:28},end:{line:155,column:49}},63:{start:{line:158,column:4},end:{line:160,column:7}},64:{start:{line:161,column:4},end:{line:161,column:22}},65:{start:{line:162,column:4},end:{line:162,column:30}},66:{start:{line:164,column:16},end:{line:168,column:3}},67:{start:{line:165,column:4},end:{line:167,column:7}},68:{start:{line:170,column:14},end:{line:170,column:26}},69:{start:{line:171,column:25},end:{line:182,column:6}},70:{start:{line:172,column:6},end:{line:181,column:8}},71:{start:{line:184,column:4},end:{line:189,column:5}},72:{start:{line:185,column:6},end:{line:188,column:11}},73:{start:{line:187,column:61},end:{line:187,column:78}},74:{start:{line:190,column:4},end:{line:272,column:9}},75:{start:{line:196,column:30},end:{line:196,column:49}},76:{start:{line:221,column:146},end:{line:221,column:180}},77:{start:{line:268,column:27},end:{line:268,column:56}},78:{start:{line:275,column:18},end:{line:275,column:54}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:13,column:2},end:{line:13,column:3}},loc:{start:{line:13,column:11},end:{line:38,column:3}},line:13},1:{name:"(anonymous_1)",decl:{start:{line:19,column:17},end:{line:19,column:18}},loc:{start:{line:19,column:23},end:{line:19,column:58}},line:19},2:{name:"(anonymous_2)",decl:{start:{line:41,column:2},end:{line:41,column:3}},loc:{start:{line:41,column:21},end:{line:46,column:3}},line:41},3:{name:"(anonymous_3)",decl:{start:{line:47,column:2},end:{line:47,column:3}},loc:{start:{line:47,column:15},end:{line:51,column:3}},line:47},4:{name:"(anonymous_4)",decl:{start:{line:52,column:2},end:{line:52,column:3}},loc:{start:{line:52,column:27},end:{line:61,column:3}},line:52},5:{name:"(anonymous_5)",decl:{start:{line:62,column:18},end:{line:62,column:19}},loc:{start:{line:62,column:32},end:{line:99,column:3}},line:62},6:{name:"(anonymous_6)",decl:{start:{line:68,column:12},end:{line:68,column:13}},loc:{start:{line:68,column:31},end:{line:70,column:5}},line:68},7:{name:"(anonymous_7)",decl:{start:{line:70,column:12},end:{line:70,column:13}},loc:{start:{line:70,column:22},end:{line:82,column:5}},line:70},8:{name:"(anonymous_8)",decl:{start:{line:82,column:13},end:{line:82,column:14}},loc:{start:{line:82,column:22},end:{line:90,column:5}},line:82},9:{name:"(anonymous_9)",decl:{start:{line:93,column:15},end:{line:93,column:16}},loc:{start:{line:93,column:26},end:{line:95,column:9}},line:93},10:{name:"(anonymous_10)",decl:{start:{line:100,column:16},end:{line:100,column:17}},loc:{start:{line:100,column:23},end:{line:103,column:3}},line:100},11:{name:"(anonymous_11)",decl:{start:{line:104,column:15},end:{line:104,column:16}},loc:{start:{line:104,column:27},end:{line:131,column:3}},line:104},12:{name:"(anonymous_12)",decl:{start:{line:134,column:18},end:{line:134,column:19}},loc:{start:{line:134,column:29},end:{line:156,column:3}},line:134},13:{name:"(anonymous_13)",decl:{start:{line:141,column:20},end:{line:141,column:21}},loc:{start:{line:141,column:27},end:{line:154,column:5}},line:141},14:{name:"(anonymous_14)",decl:{start:{line:155,column:21},end:{line:155,column:22}},loc:{start:{line:155,column:28},end:{line:155,column:49}},line:155},15:{name:"(anonymous_15)",decl:{start:{line:157,column:2},end:{line:157,column:3}},loc:{start:{line:157,column:17},end:{line:163,column:3}},line:157},16:{name:"(anonymous_16)",decl:{start:{line:164,column:16},end:{line:164,column:17}},loc:{start:{line:164,column:25},end:{line:168,column:3}},line:164},17:{name:"(anonymous_17)",decl:{start:{line:169,column:2},end:{line:169,column:3}},loc:{start:{line:169,column:11},end:{line:273,column:3}},line:169},18:{name:"(anonymous_18)",decl:{start:{line:171,column:42},end:{line:171,column:43}},loc:{start:{line:171,column:54},end:{line:182,column:5}},line:171},19:{name:"(anonymous_19)",decl:{start:{line:187,column:55},end:{line:187,column:56}},loc:{start:{line:187,column:61},end:{line:187,column:78}},line:187},20:{name:"(anonymous_20)",decl:{start:{line:196,column:24},end:{line:196,column:25}},loc:{start:{line:196,column:30},end:{line:196,column:49}},line:196},21:{name:"(anonymous_21)",decl:{start:{line:221,column:139},end:{line:221,column:140}},loc:{start:{line:221,column:146},end:{line:221,column:180}},line:221},22:{name:"(anonymous_22)",decl:{start:{line:268,column:20},end:{line:268,column:21}},loc:{start:{line:268,column:27},end:{line:268,column:56}},line:268}},branchMap:{0:{loc:{start:{line:53,column:4},end:{line:53,column:31}},type:"if",locations:[{start:{line:53,column:4},end:{line:53,column:31}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:53},1:{loc:{start:{line:54,column:4},end:{line:60,column:5}},type:"if",locations:[{start:{line:54,column:4},end:{line:60,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:54},2:{loc:{start:{line:71,column:6},end:{line:73,column:7}},type:"if",locations:[{start:{line:71,column:6},end:{line:73,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:71},3:{loc:{start:{line:135,column:4},end:{line:135,column:23}},type:"if",locations:[{start:{line:135,column:4},end:{line:135,column:23}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:135},4:{loc:{start:{line:136,column:4},end:{line:136,column:35}},type:"if",locations:[{start:{line:136,column:4},end:{line:136,column:35}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:136},5:{loc:{start:{line:184,column:4},end:{line:189,column:5}},type:"if",locations:[{start:{line:184,column:4},end:{line:189,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:184},6:{loc:{start:{line:203,column:53},end:{line:222,column:18}},type:"cond-expr",locations:[{start:{line:203,column:119},end:{line:215,column:15}},{start:{line:215,column:34},end:{line:222,column:18}}],line:203}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalOpen.tsx"],names:["style"],mappings:"AA4BQ,SACE,KADF;AA5BR,OAAO,WAA+B;AACtC,SAAQ,oBAAmB;AAC3B,SAAQ,0BAAyB;AACjC,SAAS,OAA6B,uBAAuB;AAE7D,OAAO,kBAAkB;AACzB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,cAAc;AAErB,OAAO,WAAW;AAClB,OAAO,kBAAkB;AASzB,MAAM,oBAAoB,MAAM,UAA4B;AAAA,EAC1D,SAAS;AACP,WAAO,oBAAC,SAAI,WAAU,yBACpB;AAAA,MAAC;AAAA;AAAA,QACC,WAAU;AAAA,QACV,cAAY,KAAK,MAAM;AAAA,QACvB,SAAS,MAAM,KAAK,MAAM,SAAS,KAAK,MAAM,GAAG;AAAA,QAEjD;AAAA,+BAAC,SAAI,WAAU,gCACb;AAAA,gCAAC,SAAK,eAAK,MAAM,OAAM;AAAA,YACvB,oBAAC,UAAK,WAAU,kBAAiB;AAAA,YACjC,oBAAC,sBAAmB;AAAA,aACtB;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,OAAO;AAAA,gBACL,iBAAiB,OAAO,KAAK,MAAM,YAAY;AAAA,cACjD;AAAA;AAAA,UACD;AAAA;AAAA;AAAA,IACH,GACF;AAAA,EACF;AACF;AAgBA,MAAM,0BAA0B,MAAM,UAAkD;AAAA,EACtF,YAAY,OAA+B;AACzC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,UAAU;AAAA,IACZ;AAAA,EACF;AAAA,EAEA,aAAa;AACX,SAAK,SAAS;AAAA,MACZ,OAAO;AAAA,IACT,CAAC;AAAA,EACH;AAAA,EAEA,sBAAsB,GAAU;AAE9B,QAAG,EAAG,GAAE,gBAAgB;AAExB,QAAG,KAAK,MAAM,eAAe;AAC3B,WAAK,MAAM,cAAc,MAAM;AAC/B,WAAK,SAAS;AAAA,QACZ,eAAe;AAAA,QACf,kBAAkB;AAAA,MACpB,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,gBAAgB,CAAC,aAAqB;AACpC,SAAK,WAAW;AAEhB,QAAI,WAAoB;AAExB,UAAM,UAAU;AAAA,MACd,MAAM;AAAA,MACN,aAAa;AAAA,IACf,CAAC,EACE,KAAK,SAAS,UAAU;AACvB,aAAO,SAAS,KAAK;AAAA,IACvB,CAAC,EACA,KAAK,CAAC,SAAS;AACd,UAAG,UAAU;AACX;AAAA,MACF;AAEA,WAAK,SAAS;AAAA,QACZ,eAAe;AAAA,QACf,kBAAkB;AAAA,MACpB,CAAC;AAED,YAAM,WAAW,MAAM,oBAAoB,IAAI;AAC/C,cAAQ,IAAI,iBAAiB,SAAS,EAAE;AACxC,WAAK,MAAM,YAAY,QAAQ;AAC/B,WAAK,aAAa;AAAA,IACpB,CAAC,EACA,MAAM,CAAC,QAAQ;AACd,WAAK,SAAS;AAAA,QACZ,OAAO,oBAAoB,QAAQ;AAAA,QACnC,eAAe;AAAA,QACf,kBAAkB;AAAA,MACpB,CAAC;AACD,cAAQ,MAAM,GAAG;AACjB,cAAQ,KAAK,gCAAgC,QAAQ;AAAA,IACvD,CAAC;AAEH,SAAK,SAAS;AAAA,MACZ,eAAe;AAAA,QACb,OAAO,WAAW;AAChB,qBAAW;AAAA,QACb;AAAA,MACF;AAAA,MACA,kBAAkB;AAAA,IACpB,CAAC;AAAA,EACH;AAAA,EAEA,cAAc,CAAC,MAAkC;AAC/C,MAAE,eAAe;AACjB,SAAK,cAAc,KAAK,MAAM,QAAQ;AAAA,EACxC;AAAA,EAEA,aAAa,YAAY;AACvB,SAAK,WAAW;AAEhB,UAAM,aAAoC;AAAA,MACxC,OAAO;AAAA,QACL;AAAA,UACE,aAAa;AAAA,UACb,QAAQ,EAAE,oBAAoB,CAAC,OAAO,EAAE;AAAA,QAC1C;AAAA,MACF;AAAA,MACA,UAAU;AAAA,IACZ;AAEA,UAAM,CAAC,UAAU,IAAI,MAAM,OAAO,mBAAmB,UAAU;AAC/D,UAAM,OAAO,MAAM,WAAW,QAAQ;AACtC,UAAM,UAAU,MAAM,KAAK,KAAK;AAEhC,QAAI;AACJ,QAAI;AACF,iBAAW,KAAK,MAAM,OAAO;AAAA,IAC/B,SAAS,KAAK;AACZ,WAAK,SAAS;AAAA,QACZ,OAAQ,IAAc,SAAS;AAAA,MACjC,CAAC;AACD;AAAA,IACF;AACA,eAAW,MAAM,oBAAoB,QAAQ;AAE7C,SAAK,MAAM,YAAY,UAAU,UAAU;AAC3C,SAAK,aAAa;AAClB,WAAO;AAAA,EACT;AAAA;AAAA;AAAA,EAIA,gBAAgB,CAAC,UAA2B;AAC1C,QAAI,CAAC,MAAO;AACZ,QAAI,MAAM,WAAW,EAAG;AACxB,UAAM,OAAO,MAAM,CAAC;AACpB,UAAM,SAAS,IAAI,WAAW;AAC9B,SAAK,WAAW;AAEhB,WAAO,WAAW,MAAM,OAAO;AAC/B,WAAO,SAAS,OAAK;AACnB,UAAI;AACJ,UAAI;AACF,mBAAW,KAAK,MAAM,EAAE,QAAQ,MAAgB;AAAA,MAClD,SACM,KAAK;AACT,aAAK,SAAS;AAAA,UACZ,OAAQ,IAAc,SAAS;AAAA,QACjC,CAAC;AACD;AAAA,MACF;AACA,iBAAW,MAAM,oBAAoB,QAAQ;AAC7C,WAAK,MAAM,YAAY,QAAQ;AAC/B,WAAK,aAAa;AAAA,IACpB;AACA,WAAO,UAAU,OAAK,QAAQ,IAAI,EAAE,MAAM;AAAA,EAC5C;AAAA,EAEA,eAAe;AACb,SAAK,SAAS;AAAA,MACZ,UAAU;AAAA,IACZ,CAAC;AACD,SAAK,WAAW;AAChB,SAAK,MAAM,aAAa;AAAA,EAC1B;AAAA,EAEA,cAAc,CAAC,QAAgB;AAC7B,SAAK,SAAS;AAAA,MACZ,UAAU;AAAA,IACZ,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,eAAe,aAAa,IAAI,CAAAA,WAAS;AAC7C,aAAO;AAAA,QAAC;AAAA;AAAA,UAEN,KAAKA,OAAM;AAAA,UACX,OAAOA,OAAM;AAAA,UACb,cAAcA,OAAM;AAAA,UACpB,UAAU,KAAK;AAAA;AAAA,QAJVA,OAAM;AAAA,MAKb;AAAA,IACF,CAAC;AAED,QAAI;AACJ,QAAG,KAAK,MAAM,OAAO;AACnB,qBACE,qBAAC,SAAI,WAAU,wBACZ;AAAA,aAAK,MAAM;AAAA,QACZ,oBAAC,OAAE,MAAK,KAAI,SAAS,MAAM,KAAK,WAAW,GAAG,WAAU,8BAA6B,eAAC;AAAA,SACxF;AAAA,IAEJ;AAEA,WACE,qBAAC,SACC;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,eAAY;AAAA,UACZ,QAAQ,KAAK,MAAM;AAAA,UACnB,cAAc,MAAM,KAAK,aAAa;AAAA,UACtC,OAAO,EAAE,YAAY;AAAA,UAEpB;AAAA;AAAA,YACD,qBAAC,aAAQ,WAAU,0BACjB;AAAA,kCAAC,QAAI,YAAE,kBAAkB,GAAE;AAAA,cAC3B,oBAAC,OAAG,YAAE,6CAA6C,GAAE;AAAA,cACrD,oBAAC,SACE,iBAAO,OAAO,uBAAuB,aACpC;AAAA,gBAAC;AAAA;AAAA,kBACC,eAAY;AAAA,kBACZ,WAAU;AAAA,kBACV,SAAS,KAAK;AAAA,kBAAY;AAAA,wCAAC,gBAAY;AAAA,oBAAE;AAAA,oBAAE,EAAE,YAAY;AAAA;AAAA;AAAA,cAC3D,IAEA,qBAAC,WACC;AAAA,qCAAC,OAAE,WAAU,0CAAyC,cAAY,EAAE,YAAY,GAAG;AAAA,sCAAC,gBAAa;AAAA,kBAAE;AAAA,kBAAE,EAAE,YAAY;AAAA,mBAAE;AAAA,gBACrH,oBAAC,WAAM,eAAY,yBAAwB,MAAK,QAAO,OAAO,EAAE,SAAS,OAAO,GAAG,UAAU,CAAC,MAAM,KAAK,cAAc,EAAE,OAAO,KAAK,GAAG;AAAA,iBAC1I,GAEJ;AAAA,eACF;AAAA,YAEA,oBAAC,aAAQ,WAAU,0BACjB,+BAAC,UAAK,UAAU,KAAK,aACnB;AAAA,kCAAC,QAAI,YAAE,eAAe,GAAE;AAAA,cACxB,oBAAC,OACC,+BAAC,SAAM,GAAM;AAAA;AAAA,gBACkC,oBAAC,OAAE,MAAK,2BAA0B,QAAO,UAAS,KAAI,uBAAsB,0BAAY;AAAA,gBAAI;AAAA,iBAC3I,GACF;AAAA,cACA;AAAA,gBAAC;AAAA;AAAA,kBACC,cAAY,EAAE,WAAW;AAAA,kBACzB,eAAY;AAAA,kBACZ,MAAK;AAAA,kBACL,WAAU;AAAA,kBACV,SAAS,EAAE,cAAc;AAAA,kBACzB,OAAO,KAAK,MAAM;AAAA,kBAClB,SAAS,KAAK;AAAA,kBACd,UAAU,KAAK;AAAA;AAAA,cACjB;AAAA,cACA,oBAAC,SACC;AAAA,gBAAC;AAAA;AAAA,kBACC,eAAY;AAAA,kBACZ,MAAK;AAAA,kBACL,WAAU;AAAA,kBACV,UAAU,KAAK,MAAM,SAAS,SAAS;AAAA,kBACxC;AAAA;AAAA,cAAa,GAChB;AAAA,eACF,GACF;AAAA,YAEA,qBAAC,aAAQ,WAAU,yDACjB;AAAA,kCAAC,QAAI,YAAE,gBAAgB,GAAE;AAAA,cACzB,oBAAC,OACE,YAAE,0DAA0D,GAC/D;AAAA,cACA,oBAAC,SAAI,WAAU,oCACZ,wBACH;AAAA,eACF;AAAA;AAAA;AAAA,MACF;AAAA,MAEA;AAAA,QAAC;AAAA;AAAA,UACC,QAAQ,CAAC,CAAC,KAAK,MAAM;AAAA,UACrB,OAAO,EAAE,eAAe;AAAA,UACxB,UAAU,CAAC,MAAa,KAAK,sBAAsB,CAAC;AAAA,UACpD,SAAS,EAAE,2BAA2B,EAAE,YAAY,KAAK,MAAM,iBAAiB,CAAC;AAAA;AAAA,MACnF;AAAA,OACF;AAAA,EAEJ;AACF;AAEA,MAAM,YAAY,gBAAgB,EAAE,iBAAiB;AACrD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f3a6249e96d42fc8e59bc18fb123f3ec8de2b220"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return _n=function(){return s},s}_n();class LRe extends On.Component{render(){return _n().f[0]++,_n().s[0]++,te.jsx("div",{className:"maputnik-public-style",children:te.jsxs(Gs,{className:"maputnik-public-style-button","aria-label":this.props.title,onClick:()=>(_n().f[1]++,_n().s[1]++,this.props.onSelect(this.props.url)),children:[te.jsxs("div",{className:"maputnik-public-style-header",children:[te.jsx("div",{children:this.props.title}),te.jsx("span",{className:"maputnik-space"}),te.jsx(lZ,{})]}),te.jsx("div",{className:"maputnik-public-style-thumbnail",style:{backgroundImage:`url(${this.props.thumbnailUrl})`}})]})})}}class FRe extends On.Component{constructor(e){_n().f[2]++,_n().s[2]++,super(e),_n().s[3]++,this.state={styleUrl:""}}clearError(){_n().f[3]++,_n().s[4]++,this.setState({error:null})}onCancelActiveRequest(e){_n().f[4]++,_n().s[5]++,e?(_n().b[0][0]++,_n().s[6]++,e.stopPropagation()):_n().b[0][1]++,_n().s[7]++,this.state.activeRequest?(_n().b[1][0]++,_n().s[8]++,this.state.activeRequest.abort(),_n().s[9]++,this.setState({activeRequest:null,activeRequestUrl:null})):_n().b[1][1]++}onStyleSelect=(_n().s[10]++,e=>{_n().f[5]++,_n().s[11]++,this.clearError();let t=(_n().s[12]++,!1);_n().s[13]++,fetch(e,{mode:"cors",credentials:"same-origin"}).then(function(i){return _n().f[6]++,_n().s[14]++,i.json()}).then(i=>{if(_n().f[7]++,_n().s[15]++,t){_n().b[2][0]++,_n().s[16]++;return}else _n().b[2][1]++;_n().s[17]++,this.setState({activeRequest:null,activeRequestUrl:null});const r=(_n().s[18]++,xd.ensureStyleValidity(i));_n().s[19]++,console.log("Loaded style ",r.id),_n().s[20]++,this.props.onStyleOpen(r),_n().s[21]++,this.onOpenToggle()}).catch(i=>{_n().f[8]++,_n().s[22]++,this.setState({error:`Failed to load: '${e}'`,activeRequest:null,activeRequestUrl:null}),_n().s[23]++,console.error(i),_n().s[24]++,console.warn("Could not open the style URL",e)}),_n().s[25]++,this.setState({activeRequest:{abort:function(){_n().f[9]++,_n().s[26]++,t=!0}},activeRequestUrl:e})});onSubmitUrl=(_n().s[27]++,e=>{_n().f[10]++,_n().s[28]++,e.preventDefault(),_n().s[29]++,this.onStyleSelect(this.state.styleUrl)});onOpenFile=(_n().s[30]++,async()=>{_n().f[11]++,_n().s[31]++,this.clearError();const e=(_n().s[32]++,{types:[{description:"json",accept:{"application/json":[".json"]}}],multiple:!1}),[t]=(_n().s[33]++,await window.showOpenFilePicker(e)),i=(_n().s[34]++,await t.getFile()),r=(_n().s[35]++,await i.text());let o;_n().s[36]++;try{_n().s[37]++,o=JSON.parse(r)}catch(s){_n().s[38]++,this.setState({error:s.toString()}),_n().s[39]++;return}return _n().s[40]++,o=xd.ensureStyleValidity(o),_n().s[41]++,this.props.onStyleOpen(o,t),_n().s[42]++,this.onOpenToggle(),_n().s[43]++,i});onFileChanged=(_n().s[44]++,e=>{if(_n().f[12]++,_n().s[45]++,e)_n().b[3][1]++;else{_n().b[3][0]++,_n().s[46]++;return}if(_n().s[47]++,e.length===0){_n().b[4][0]++,_n().s[48]++;return}else _n().b[4][1]++;const t=(_n().s[49]++,e[0]),i=(_n().s[50]++,new FileReader);_n().s[51]++,this.clearError(),_n().s[52]++,i.readAsText(t,"UTF-8"),_n().s[53]++,i.onload=r=>{_n().f[13]++;let o;_n().s[54]++;try{_n().s[55]++,o=JSON.parse(r.target?.result)}catch(s){_n().s[56]++,this.setState({error:s.toString()}),_n().s[57]++;return}_n().s[58]++,o=xd.ensureStyleValidity(o),_n().s[59]++,this.props.onStyleOpen(o),_n().s[60]++,this.onOpenToggle()},_n().s[61]++,i.onerror=r=>(_n().f[14]++,_n().s[62]++,console.log(r.target))});onOpenToggle(){_n().f[15]++,_n().s[63]++,this.setState({styleUrl:""}),_n().s[64]++,this.clearError(),_n().s[65]++,this.props.onOpenToggle()}onChangeUrl=(_n().s[66]++,e=>{_n().f[16]++,_n().s[67]++,this.setState({styleUrl:e})});render(){_n().f[17]++;const e=(_n().s[68]++,this.props.t),t=(_n().s[69]++,Ooe.map(r=>(_n().f[18]++,_n().s[70]++,te.jsx(LRe,{url:r.url,title:r.title,thumbnailUrl:r.thumbnail,onSelect:this.onStyleSelect},r.id))));let i;return _n().s[71]++,this.state.error?(_n().b[5][0]++,_n().s[72]++,i=te.jsxs("div",{className:"maputnik-modal-error",children:[this.state.error,te.jsx("a",{href:"#",onClick:()=>(_n().f[19]++,_n().s[73]++,this.clearError()),className:"maputnik-modal-error-close",children:""})]})):_n().b[5][1]++,_n().s[74]++,te.jsxs("div",{children:[te.jsxs(w1,{"data-wd-key":"modal:open",isOpen:this.props.isOpen,onOpenToggle:()=>(_n().f[20]++,_n().s[75]++,this.onOpenToggle()),title:e("Open Style"),children:[i,te.jsxs("section",{className:"maputnik-modal-section",children:[te.jsx("h1",{children:e("Open local Style")}),te.jsx("p",{children:e("Open a local JSON style from your computer.")}),te.jsx("div",{children:typeof window.showOpenFilePicker=="function"?(_n().b[6][0]++,te.jsxs(Gs,{"data-wd-key":"modal:open.file.button",className:"maputnik-big-button",onClick:this.onOpenFile,children:[te.jsx(AF,{})," ",e("Open Style")]})):(_n().b[6][1]++,te.jsxs("label",{children:[te.jsxs("a",{className:"maputnik-button maputnik-upload-button","aria-label":e("Open Style"),children:[te.jsx(AF,{})," ",e("Open Style")]}),te.jsx("input",{"data-wd-key":"modal:open.file.input",type:"file",style:{display:"none"},onChange:r=>(_n().f[21]++,_n().s[76]++,this.onFileChanged(r.target.files))})]}))})]}),te.jsx("section",{className:"maputnik-modal-section",children:te.jsxs("form",{onSubmit:this.onSubmitUrl,children:[te.jsx("h1",{children:e("Load from URL")}),te.jsx("p",{children:te.jsxs(Eb,{t:e,children:["Load from a URL. Note that the URL must have ",te.jsx("a",{href:"https://enable-cors.org",target:"_blank",rel:"noopener noreferrer",children:"CORS enabled"}),"."]})}),te.jsx(UK,{"aria-label":e("Style URL"),"data-wd-key":"modal:open.url.input",type:"text",className:"maputnik-input",default:e("Enter URL..."),value:this.state.styleUrl,onInput:this.onChangeUrl,onChange:this.onChangeUrl}),te.jsx("div",{children:te.jsx(Gs,{"data-wd-key":"modal:open.url.button",type:"submit",className:"maputnik-big-button",disabled:this.state.styleUrl.length<1,children:"Load from URL"})})]})}),te.jsxs("section",{className:"maputnik-modal-section maputnik-modal-section--shrink",children:[te.jsx("h1",{children:e("Gallery Styles")}),te.jsx("p",{children:e("Open one of the publicly available styles to start from.")}),te.jsx("div",{className:"maputnik-style-gallery-container",children:t})]})]}),te.jsx(KRe,{isOpen:!!this.state.activeRequest,title:e("Loading style"),onCancel:r=>(_n().f[22]++,_n().s[77]++,this.onCancelActiveRequest(r)),message:e("Loading: {{requestUrl}}",{requestUrl:this.state.activeRequestUrl})})]})}}const zRe=(_n().s[78]++,Po()(FRe));function qf(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalShortcuts.tsx",e="56c3984d0ef3534e088a574117d91f5af2db0afb",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalShortcuts.tsx",statementMap:{0:{start:{line:7,column:14},end:{line:7,column:26}},1:{start:{line:8,column:17},end:{line:41,column:5}},2:{start:{line:42,column:25},end:{line:115,column:5}},3:{start:{line:116,column:4},end:{line:145,column:6}},4:{start:{line:130,column:12},end:{line:133,column:22}},5:{start:{line:137,column:12},end:{line:141,column:22}},6:{start:{line:148,column:23},end:{line:148,column:64}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:146,column:3}},line:6},1:{name:"(anonymous_1)",decl:{start:{line:129,column:57},end:{line:129,column:58}},loc:{start:{line:129,column:72},end:{line:134,column:11}},line:129},2:{name:"(anonymous_2)",decl:{start:{line:136,column:65},end:{line:136,column:66}},loc:{start:{line:136,column:80},end:{line:142,column:11}},line:136}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},f:{0:0,1:0,2:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalShortcuts.tsx"],names:[],mappings:"AAiBa,SAwCA,UAxCA,KAwCA,YAxCA;AAjBb,OAAO,WAAW;AAClB,SAAS,OAA6B,uBAAuB;AAE7D,OAAO,WAAW;AASlB,MAAM,+BAA+B,MAAM,UAAuC;AAAA,EAChF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,OAAO;AAAA,MACX;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,gBAAgB;AAAA,MAC1B;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,YAAY;AAAA,MACtB;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,cAAc;AAAA,MACxB;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,oBAAoB;AAAA,MAC9B;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,sBAAsB;AAAA,MAChC;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,gBAAgB;AAAA,MAC1B;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,WAAW;AAAA,MACrB;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,aAAa;AAAA,MACvB;AAAA,IACF;AAGA,UAAM,eAAe;AAAA,MACnB;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,+BAAgC;AAAA,MAC1C;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,eAAC;AAAA,WAAM;AAAA,QACtC,MAAM,EAAE,+BAAgC;AAAA,MAC1C;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,+BAAgC;AAAA,MAC1C;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,eAAC;AAAA,WAAM;AAAA,QACtC,MAAM,EAAE,+BAAgC;AAAA,MAC1C;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,gBAAE;AAAA,QACZ,MAAM,EAAE,uBAAwB;AAAA,MAClC;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,kBAAI;AAAA,QACd,MAAM,EAAE,yBAA0B;AAAA,MACpC;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,kBAAI;AAAA,QACd,MAAM,EAAE,yBAA0B;AAAA,MACpC;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,mBAAK;AAAA,QACf,MAAM,EAAE,0BAA2B;AAAA,MACrC;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,mBAAK;AAAA,WAAM;AAAA,QAC1C,MAAM,EAAE,sCAAuC;AAAA,MACjD;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,kBAAI;AAAA,WAAM;AAAA,QACzC,MAAM,EAAE,sCAAsC;AAAA,MAChD;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,gBAAE;AAAA,WAAM;AAAA,QACvC,MAAM,EAAE,mCAAmC;AAAA,MAC7C;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,kBAAI;AAAA,WAAM;AAAA,QACzC,MAAM,EAAE,mCAAmC;AAAA,MAC7C;AAAA,IACF;AAGA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,WAAW;AAAA,QAEpB,+BAAC,aAAQ,WAAU,mDACjB;AAAA,8BAAC,OACC,+BAAC,SAAM,GAAM;AAAA;AAAA,YACL,oBAAC,UAAK,iBAAG;AAAA,YAAO;AAAA,aACxB,GACF;AAAA,UACA,oBAAC,QACE,eAAK,IAAI,CAAC,MAAM,QAAQ;AACvB,mBAAO,qBAAC,SAAc,WAAU,sCAC9B;AAAA,kCAAC,QAAmB,eAAK,OAAhB,OAAK,GAAe;AAAA,cAC7B,oBAAC,QAAmB,eAAK,QAAhB,OAAK,GAAgB;AAAA,iBAFf,GAGjB;AAAA,UACF,CAAC,GACH;AAAA,UACA,oBAAC,OAAG,YAAE,8DAA8D,GAAE;AAAA,UACtE,oBAAC,QACE,uBAAa,IAAI,CAAC,MAAM,QAAQ;AAC/B,mBAAO,qBAAC,QACN;AAAA,kCAAC,UAAM,eAAK,KAAI;AAAA,cAAO;AAAA,cAAE,KAAK;AAAA,iBADhB,GAEhB;AAAA,UACF,CAAC,GACH;AAAA,WACF;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,iBAAiB,gBAAgB,EAAE,sBAAsB;AAC/D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"56c3984d0ef3534e088a574117d91f5af2db0afb"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return qf=function(){return s},s}qf();class jRe extends On.Component{render(){qf().f[0]++;const e=(qf().s[0]++,this.props.t),t=(qf().s[1]++,[{key:te.jsx("kbd",{children:"?"}),text:e("Shortcuts menu")},{key:te.jsx("kbd",{children:"o"}),text:e("Open modal")},{key:te.jsx("kbd",{children:"e"}),text:e("Export modal")},{key:te.jsx("kbd",{children:"d"}),text:e("Data Sources modal")},{key:te.jsx("kbd",{children:"s"}),text:e("Style Settings modal")},{key:te.jsx("kbd",{children:"i"}),text:e("Toggle inspect")},{key:te.jsx("kbd",{children:"m"}),text:e("Focus map")},{key:te.jsx("kbd",{children:"!"}),text:e("Debug modal")}]),i=(qf().s[2]++,[{key:te.jsx("kbd",{children:"+"}),text:e("Increase the zoom level by 1.")},{key:te.jsxs(te.Fragment,{children:[te.jsx("kbd",{children:"Shift"})," + ",te.jsx("kbd",{children:"+"})]}),text:e("Increase the zoom level by 2.")},{key:te.jsx("kbd",{children:"-"}),text:e("Decrease the zoom level by 1.")},{key:te.jsxs(te.Fragment,{children:[te.jsx("kbd",{children:"Shift"})," + ",te.jsx("kbd",{children:"-"})]}),text:e("Decrease the zoom level by 2.")},{key:te.jsx("kbd",{children:"Up"}),text:e("Pan up by 100 pixels.")},{key:te.jsx("kbd",{children:"Down"}),text:e("Pan down by 100 pixels.")},{key:te.jsx("kbd",{children:"Left"}),text:e("Pan left by 100 pixels.")},{key:te.jsx("kbd",{children:"Right"}),text:e("Pan right by 100 pixels.")},{key:te.jsxs(te.Fragment,{children:[te.jsx("kbd",{children:"Shift"})," + ",te.jsx("kbd",{children:"Right"})]}),text:e("Increase the rotation by 15 degrees.")},{key:te.jsxs(te.Fragment,{children:[te.jsx("kbd",{children:"Shift"})," + ",te.jsx("kbd",{children:"Left"})]}),text:e("Decrease the rotation by 15 degrees.")},{key:te.jsxs(te.Fragment,{children:[te.jsx("kbd",{children:"Shift"})," + ",te.jsx("kbd",{children:"Up"})]}),text:e("Increase the pitch by 10 degrees.")},{key:te.jsxs(te.Fragment,{children:[te.jsx("kbd",{children:"Shift"})," + ",te.jsx("kbd",{children:"Down"})]}),text:e("Decrease the pitch by 10 degrees.")}]);return qf().s[3]++,te.jsx(w1,{"data-wd-key":"modal:shortcuts",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:e("Shortcuts"),children:te.jsxs("section",{className:"maputnik-modal-section maputnik-modal-shortcuts",children:[te.jsx("p",{children:te.jsxs(Eb,{t:e,children:["Press ",te.jsx("code",{children:"ESC"})," to lose focus of any active elements, then press one of:"]})}),te.jsx("dl",{children:t.map((r,o)=>(qf().f[1]++,qf().s[4]++,te.jsxs("div",{className:"maputnik-modal-shortcuts__shortcut",children:[te.jsx("dt",{children:r.key},"dt"+o),te.jsx("dd",{children:r.text},"dd"+o)]},o)))}),te.jsx("p",{children:e("If the Map is in focused you can use the following shortcuts")}),te.jsx("ul",{children:i.map((r,o)=>(qf().f[2]++,qf().s[5]++,te.jsxs("li",{children:[te.jsx("span",{children:r.key})," ",r.text]},o)))})]})})}}const NRe=(qf().s[6]++,Po()(jRe));function Su(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalDebug.tsx",e="c09f0bfde95742e69af0d091b2de9baefbfef43a",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalDebug.tsx",statementMap:{0:{start:{line:7,column:27},end:{line:7,column:37}},1:{start:{line:8,column:20},end:{line:8,column:48}},2:{start:{line:9,column:19},end:{line:9,column:49}},3:{start:{line:10,column:19},end:{line:10,column:49}},4:{start:{line:11,column:4},end:{line:53,column:6}},5:{start:{line:22,column:14},end:{line:26,column:27}},6:{start:{line:23,column:96},end:{line:23,column:153}},7:{start:{line:29,column:14},end:{line:33,column:27}},8:{start:{line:30,column:96},end:{line:30,column:153}},9:{start:{line:56,column:19},end:{line:56,column:56}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:54,column:3}},line:6},1:{name:"(anonymous_1)",decl:{start:{line:21,column:140},end:{line:21,column:141}},loc:{start:{line:21,column:156},end:{line:27,column:13}},line:21},2:{name:"(anonymous_2)",decl:{start:{line:23,column:89},end:{line:23,column:90}},loc:{start:{line:23,column:96},end:{line:23,column:153}},line:23},3:{name:"(anonymous_3)",decl:{start:{line:28,column:136},end:{line:28,column:137}},loc:{start:{line:28,column:152},end:{line:34,column:13}},line:28},4:{name:"(anonymous_4)",decl:{start:{line:30,column:89},end:{line:30,column:90}},loc:{start:{line:30,column:96},end:{line:30,column:153}},line:30}},branchMap:{0:{loc:{start:{line:21,column:12},end:{line:27,column:17}},type:"binary-expr",locations:[{start:{line:21,column:12},end:{line:21,column:44}},{start:{line:21,column:64},end:{line:27,column:17}}],line:21},1:{loc:{start:{line:28,column:12},end:{line:34,column:17}},type:"binary-expr",locations:[{start:{line:28,column:12},end:{line:28,column:40}},{start:{line:28,column:60},end:{line:34,column:17}}],line:28}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalDebug.tsx"],names:[],mappings:"AAuCQ,cAKQ,YALR;AAvCR,OAAO,WAAW;AAClB,SAAS,OAA6B,uBAAuB;AAE7D,OAAO,WAAW;AAqBlB,MAAM,2BAA2B,MAAM,UAAmC;AAAA,EACxE,SAAS;AACP,UAAM,EAAC,GAAG,QAAO,IAAI,KAAK;AAE1B,UAAM,UAAU,KAAK,MAAM,QAAQ,IAAI,IAAE;AACzC,UAAM,SAAS,CAAE,QAAQ,OAAO,IAAK,QAAQ,CAAC;AAC9C,UAAM,SAAS,CAAE,QAAQ,OAAO,IAAK,QAAQ,CAAC;AAE9C,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,OAAO;AAAA,QAEhB;AAAA,+BAAC,aAAQ,WAAU,mDACjB;AAAA,gCAAC,QAAI,YAAE,SAAS,GAAE;AAAA,YACjB,KAAK,MAAM,aAAa,YACvB,oBAAC,QACE,iBAAO,QAAQ,KAAK,MAAM,sBAAuB,EAAE,IAAI,CAAC,CAAC,KAAK,GAAG,MAAM;AACtE,qBAAO,oBAAC,QACN,+BAAC,WACC;AAAA,oCAAC,WAAM,MAAK,YAAW,SAAS,KAAK,UAAU,CAAC,MAAM,KAAK,MAAM,wBAAwB,KAAK,EAAE,OAAO,OAAO,GAAG;AAAA,gBAAE;AAAA,gBAAE;AAAA,iBACvH,KAHc,GAIhB;AAAA,YACF,CAAC,GACH;AAAA,YAED,KAAK,MAAM,aAAa,QACvB,oBAAC,QACE,iBAAO,QAAQ,KAAK,MAAM,sBAAuB,EAAE,IAAI,CAAC,CAAC,KAAK,GAAG,MAAM;AACtE,qBAAO,oBAAC,QACN,+BAAC,WACC;AAAA,oCAAC,WAAM,MAAK,YAAW,SAAS,KAAK,UAAU,CAAC,MAAM,KAAK,MAAM,wBAAwB,KAAK,EAAE,OAAO,OAAO,GAAG;AAAA,gBAAE;AAAA,gBAAE;AAAA,iBACvH,KAHc,GAIhB;AAAA,YACF,CAAC,GACH;AAAA,aAEJ;AAAA,UACA,qBAAC,aAAQ,WAAU,0BACjB;AAAA,gCAAC,QAAI,YAAE,OAAO,GAAE;AAAA,YAChB,oBAAC,OACC,+BAAC,SAAM,GACL;AAAA;AAAA,gBAAC;AAAA;AAAA,kBACC,QAAO;AAAA,kBACP,KAAI;AAAA,kBACJ,MAAM,sCAAsC,OAAO,IAAI,MAAM,IAAI,MAAM;AAAA,kBACxE;AAAA;AAAA,cAED;AAAA,cAAI;AAAA,eACN,GACF;AAAA,aACF;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,aAAa,gBAAgB,EAAE,kBAAkB;AACvD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"c09f0bfde95742e69af0d091b2de9baefbfef43a"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Su=function(){return s},s}Su();class GRe extends On.Component{render(){Su().f[0]++;const{t:e,mapView:t}=(Su().s[0]++,this.props),i=(Su().s[1]++,Math.round(t.zoom)+1),r=(Su().s[2]++,+t.center.lng.toFixed(5)),o=(Su().s[3]++,+t.center.lat.toFixed(5));return Su().s[4]++,te.jsxs(w1,{"data-wd-key":"modal:debug",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:e("Debug"),children:[te.jsxs("section",{className:"maputnik-modal-section maputnik-modal-shortcuts",children:[te.jsx("h1",{children:e("Options")}),(Su().b[0][0]++,this.props.renderer==="mlgljs"&&(Su().b[0][1]++,te.jsx("ul",{children:Object.entries(this.props.maplibreGlDebugOptions).map(([s,a])=>(Su().f[1]++,Su().s[5]++,te.jsx("li",{children:te.jsxs("label",{children:[te.jsx("input",{type:"checkbox",checked:a,onChange:c=>(Su().f[2]++,Su().s[6]++,this.props.onChangeMaplibreGlDebug(s,c.target.checked))})," ",s]})},s)))}))),(Su().b[1][0]++,this.props.renderer==="ol"&&(Su().b[1][1]++,te.jsx("ul",{children:Object.entries(this.props.openlayersDebugOptions).map(([s,a])=>(Su().f[3]++,Su().s[7]++,te.jsx("li",{children:te.jsxs("label",{children:[te.jsx("input",{type:"checkbox",checked:a,onChange:c=>(Su().f[4]++,Su().s[8]++,this.props.onChangeOpenlayersDebug(s,c.target.checked))})," ",s]})},s)))})))]}),te.jsxs("section",{className:"maputnik-modal-section",children:[te.jsx("h1",{children:e("Links")}),te.jsx("p",{children:te.jsxs(Eb,{t:e,children:[te.jsx("a",{target:"_blank",rel:"noopener noreferrer",href:`https://www.openstreetmap.org/#map=${i}/${o}/${r}`,children:"Open in OSM"}),". Opens the current view on openstreetmap.org"]})})]})]})}}const WRe=(Su().s[9]++,Po()(GRe));function fi(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalGlobalState.tsx",e="681e0b3080d4effb89e735abebd0878f77572d27",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalGlobalState.tsx",statementMap:{0:{start:{line:10,column:33},end:{line:116,column:1}},1:{start:{line:11,column:34},end:{line:18,column:3}},2:{start:{line:12,column:18},end:{line:12,column:32}},3:{start:{line:13,column:24},end:{line:13,column:41}},4:{start:{line:14,column:4},end:{line:17,column:8}},5:{start:{line:14,column:62},end:{line:17,column:5}},6:{start:{line:19,column:34},end:{line:31,column:3}},7:{start:{line:20,column:18},end:{line:20,column:39}},8:{start:{line:21,column:24},end:{line:21,column:26}},9:{start:{line:22,column:4},end:{line:28,column:5}},10:{start:{line:23,column:6},end:{line:27,column:7}},11:{start:{line:24,column:8},end:{line:26,column:10}},12:{start:{line:29,column:4},end:{line:29,column:77}},13:{start:{line:30,column:4},end:{line:30,column:32}},14:{start:{line:32,column:24},end:{line:40,column:3}},15:{start:{line:33,column:23},end:{line:33,column:48}},16:{start:{line:34,column:16},end:{line:34,column:17}},17:{start:{line:35,column:4},end:{line:37,column:5}},18:{start:{line:35,column:34},end:{line:35,column:57}},19:{start:{line:36,column:6},end:{line:36,column:14}},20:{start:{line:38,column:4},end:{line:38,column:60}},21:{start:{line:39,column:4},end:{line:39,column:40}},22:{start:{line:41,column:27},end:{line:45,column:3}},23:{start:{line:42,column:23},end:{line:42,column:48}},24:{start:{line:43,column:4},end:{line:43,column:32}},25:{start:{line:44,column:4},end:{line:44,column:40}},26:{start:{line:46,column:30},end:{line:50,column:3}},27:{start:{line:47,column:23},end:{line:47,column:48}},28:{start:{line:48,column:4},end:{line:48,column:41}},29:{start:{line:49,column:4},end:{line:49,column:40}},30:{start:{line:51,column:32},end:{line:55,column:3}},31:{start:{line:52,column:23},end:{line:52,column:48}},32:{start:{line:53,column:4},end:{line:53,column:45}},33:{start:{line:54,column:4},end:{line:54,column:40}},34:{start:{line:56,column:20},end:{line:56,column:45}},35:{start:{line:57,column:25},end:{line:85,column:14}},36:{start:{line:57,column:76},end:{line:85,column:13}},37:{start:{line:63,column:29},end:{line:63,column:68}},38:{start:{line:72,column:29},end:{line:72,column:70}},39:{start:{line:79,column:23},end:{line:79,column:46}},40:{start:{line:86,column:2},end:{line:115,column:4}},41:{start:{line:117,column:25},end:{line:117,column:68}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:10,column:33},end:{line:10,column:34}},loc:{start:{line:10,column:44},end:{line:116,column:1}},line:10},1:{name:"(anonymous_1)",decl:{start:{line:11,column:34},end:{line:11,column:35}},loc:{start:{line:11,column:40},end:{line:18,column:3}},line:11},2:{name:"(anonymous_2)",decl:{start:{line:14,column:43},end:{line:14,column:44}},loc:{start:{line:14,column:62},end:{line:17,column:5}},line:14},3:{name:"(anonymous_3)",decl:{start:{line:19,column:34},end:{line:19,column:35}},loc:{start:{line:19,column:50},end:{line:31,column:3}},line:19},4:{name:"(anonymous_4)",decl:{start:{line:32,column:24},end:{line:32,column:25}},loc:{start:{line:32,column:30},end:{line:40,column:3}},line:32},5:{name:"(anonymous_5)",decl:{start:{line:35,column:27},end:{line:35,column:28}},loc:{start:{line:35,column:34},end:{line:35,column:57}},line:35},6:{name:"(anonymous_6)",decl:{start:{line:41,column:27},end:{line:41,column:28}},loc:{start:{line:41,column:38},end:{line:45,column:3}},line:41},7:{name:"(anonymous_7)",decl:{start:{line:46,column:30},end:{line:46,column:31}},loc:{start:{line:46,column:49},end:{line:50,column:3}},line:46},8:{name:"(anonymous_8)",decl:{start:{line:51,column:32},end:{line:51,column:33}},loc:{start:{line:51,column:53},end:{line:55,column:3}},line:51},9:{name:"(anonymous_9)",decl:{start:{line:57,column:39},end:{line:57,column:40}},loc:{start:{line:57,column:76},end:{line:85,column:13}},line:57},10:{name:"(anonymous_10)",decl:{start:{line:63,column:18},end:{line:63,column:19}},loc:{start:{line:63,column:29},end:{line:63,column:68}},line:63},11:{name:"(anonymous_11)",decl:{start:{line:72,column:18},end:{line:72,column:19}},loc:{start:{line:72,column:29},end:{line:72,column:70}},line:72},12:{name:"(anonymous_12)",decl:{start:{line:79,column:17},end:{line:79,column:18}},loc:{start:{line:79,column:23},end:{line:79,column:46}},line:79}},branchMap:{0:{loc:{start:{line:13,column:24},end:{line:13,column:41}},type:"binary-expr",locations:[{start:{line:13,column:24},end:{line:13,column:35}},{start:{line:13,column:39},end:{line:13,column:41}}],line:13},1:{loc:{start:{line:23,column:6},end:{line:27,column:7}},type:"if",locations:[{start:{line:23,column:6},end:{line:27,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:23},2:{loc:{start:{line:29,column:18},end:{line:29,column:76}},type:"cond-expr",locations:[{start:{line:29,column:56},end:{line:29,column:67}},{start:{line:29,column:70},end:{line:29,column:76}}],line:29},3:{loc:{start:{line:48,column:28},end:{line:48,column:40}},type:"binary-expr",locations:[{start:{line:48,column:28},end:{line:48,column:34}},{start:{line:48,column:38},end:{line:48,column:40}}],line:48},4:{loc:{start:{line:53,column:30},end:{line:53,column:44}},type:"binary-expr",locations:[{start:{line:53,column:30},end:{line:53,column:38}},{start:{line:53,column:42},end:{line:53,column:44}}],line:53},5:{loc:{start:{line:63,column:56},end:{line:63,column:67}},type:"binary-expr",locations:[{start:{line:63,column:56},end:{line:63,column:61}},{start:{line:63,column:65},end:{line:63,column:67}}],line:63},6:{loc:{start:{line:72,column:58},end:{line:72,column:69}},type:"binary-expr",locations:[{start:{line:72,column:58},end:{line:72,column:63}},{start:{line:72,column:67},end:{line:72,column:69}}],line:72},7:{loc:{start:{line:94,column:8},end:{line:97,column:12}},type:"binary-expr",locations:[{start:{line:94,column:8},end:{line:94,column:30}},{start:{line:94,column:50},end:{line:97,column:12}}],line:94},8:{loc:{start:{line:98,column:8},end:{line:101,column:12}},type:"binary-expr",locations:[{start:{line:98,column:8},end:{line:98,column:28}},{start:{line:98,column:48},end:{line:101,column:12}}],line:98}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalGlobalState.tsx"],names:["variables"],mappings:"AAsFI,SAEI,KAFJ,YAAA;AArFJ,SAAS,uBAA6C;AACtD,SAAS,gBAAgB;AACzB,OAAO,YAAY;AAEnB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,SAAS,sBAAsB;AAG/B,OAAO,SAAS;AAchB,MAAM,2BAAoE,CAAC,UAAU;AACnF,QAAM,0BAA0B,MAA6B;AAC3D,UAAM,QAAQ,MAAM;AACpB,UAAM,cAAc,MAAM,SAAS,CAAC;AAEpC,WAAO,OAAO,QAAQ,WAAW,EAAE,IAAI,CAAC,CAAC,KAAK,KAAK,OAAO;AAAA,MACxD;AAAA,MACA,OAAO,MAAM;AAAA,IACf,EAAE;AAAA,EACJ;AAEA,QAAM,0BAA0B,CAACA,eAAqC;AACpE,UAAM,QAAQ,EAAE,GAAG,MAAM,SAAS;AAGlC,UAAM,cAAmD,CAAC;AAC1D,eAAW,YAAYA,YAAW;AAChC,UAAI,SAAS,IAAI,KAAK,MAAM,IAAI;AAC9B,oBAAY,SAAS,GAAG,IAAI;AAAA,UAC1B,SAAS,SAAS;AAAA,QACpB;AAAA,MACF;AAAA,IACF;AAEA,UAAM,QAAQ,OAAO,KAAK,WAAW,EAAE,SAAS,IAAI,cAAc;AAElE,UAAM,eAAe,KAAK;AAAA,EAC5B;AAEA,QAAM,gBAAgB,MAAM;AAC1B,UAAMA,aAAY,wBAAwB;AAC1C,QAAI,QAAQ;AACZ,WAAOA,WAAU,KAAK,CAAA,MAAK,EAAE,QAAQ,MAAM,KAAK,EAAE,GAAG;AACnD;AAAA,IACF;AACAA,eAAU,KAAK,EAAE,KAAK,MAAM,KAAK,IAAI,OAAO,QAAQ,CAAC;AACrD,4BAAwBA,UAAS;AAAA,EACnC;AAEA,QAAM,mBAAmB,CAAC,UAAkB;AAC1C,UAAMA,aAAY,wBAAwB;AAC1CA,eAAU,OAAO,OAAO,CAAC;AACzB,4BAAwBA,UAAS;AAAA,EACnC;AAEA,QAAM,sBAAsB,CAAC,OAAe,WAAmB;AAC7D,UAAMA,aAAY,wBAAwB;AAC1CA,eAAU,KAAK,EAAE,MAAM,UAAU;AACjC,4BAAwBA,UAAS;AAAA,EACnC;AAEA,QAAM,wBAAwB,CAAC,OAAe,aAAqB;AACjE,UAAMA,aAAY,wBAAwB;AAE1CA,eAAU,KAAK,EAAE,QAAQ,YAAY;AACrC,4BAAwBA,UAAS;AAAA,EACnC;AAEA,QAAM,YAAY,wBAAwB;AAE1C,QAAM,iBAAiB,UAAU,IAAI,CAAC,UAAU,+BAC7C,MAAA,EACC,UAAA;AAAA,IAAA,oBAAC,MAAA,EACC,UAAA;AAAA,MAAC;AAAA,MAAA;AAAA,QACC,OAAO,MAAM,EAAE,KAAK;AAAA,QACpB,OAAO,SAAS;AAAA,QAChB,UAAU,CAAC,UAAU,oBAAoB,OAAO,SAAS,EAAE;AAAA,QAC3D,eAAa,+BAA+B;AAAA,MAAA;AAAA,IAC9C,EAAA,CACF;AAAA,wBACC,MAAA,EACC,UAAA;AAAA,MAAC;AAAA,MAAA;AAAA,QACC,OAAO,MAAM,EAAE,OAAO;AAAA,QACtB,OAAO,SAAS;AAAA,QAChB,UAAU,CAAC,UAAU,sBAAsB,OAAO,SAAS,EAAE;AAAA,QAC7D,eAAa,iCAAiC;AAAA,MAAA;AAAA,IAChD,EAAA,CACF;AAAA,wBACC,MAAA,EAAG,OAAO,EAAE,eAAe,SAAQ,GAClC,UAAA;AAAA,MAAC;AAAA,MAAA;AAAA,QACC,SAAS,MAAM,iBAAiB,KAAK;AAAA,QACrC,OAAO,MAAM,EAAE,iBAAiB;AAAA,QAChC,eAAY;AAAA,QAEZ,8BAAC,UAAA,CAAA,CAAS;AAAA,MAAA;AAAA,IACZ,EAAA,CACF;AAAA,EAAA,EAAA,GAzBO,KA0BT,CACD;AAED,SACE;AAAA,IAAC;AAAA,IAAA;AAAA,MACC,eAAY;AAAA,MACZ,QAAQ,MAAM;AAAA,MACd,cAAc,MAAM;AAAA,MACpB,OAAO,MAAM,EAAE,wBAAwB;AAAA,MAGtC,UAAA;AAAA,QAAA,UAAU,WAAW,KAChB,qBAAC,OAAA,EACC,UAAA;AAAA,UAAA,oBAAC,KAAA,EAAG,UAAA,MAAM,EAAE,2FAA2F,EAAA,CAAE;AAAA,UACzG,oBAAC,OAAA,EAAc,WAAU,uBACvB,UAAA,oBAAC,KAAA,EAAI,WAAW,OAAO,MAAM,MAAA,CAAO,EAAA,GAD7B,KAET;AAAA,QAAA,EAAA,CACF;AAAA,QAEL,UAAU,SAAS,KACpB,qBAAC,SAAA,EACC,UAAA;AAAA,UAAA,oBAAC,SAAA,CAAA,CACD;AAAA,UACA,oBAAC,WACE,UAAA,eAAA,CACH;AAAA,QAAA,EAAA,CACF;AAAA,4BAEC,OAAA,EACC,UAAA;AAAA,UAAC;AAAA,UAAA;AAAA,YACC,SAAS;AAAA,YACT,eAAY;AAAA,YAEZ,UAAA;AAAA,cAAA,oBAAC,gBAAA,CAAA,CAAe;AAAA,cACf,MAAM,EAAE,cAAc;AAAA,YAAA;AAAA,UAAA;AAAA,QACzB,EAAA,CACF;AAAA,MAAA;AAAA,IAAA;AAAA,EACF;AAEJ;AAEA,MAAM,mBAAmB,gBAAgB,EAAE,wBAAwB;AACnE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"681e0b3080d4effb89e735abebd0878f77572d27"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return fi=function(){return s},s}fi();fi().s[0]++;const QRe=n=>{fi().f[0]++,fi().s[1]++;const e=()=>{fi().f[1]++;const h=(fi().s[2]++,n.mapStyle),m=(fi().s[3]++,fi().b[0][0]++,h.state||(fi().b[0][1]++,{}));return fi().s[4]++,Object.entries(m).map(([v,x])=>(fi().f[2]++,fi().s[5]++,{key:v,value:x.default}))};fi().s[6]++;const t=h=>{fi().f[3]++;const m=(fi().s[7]++,{...n.mapStyle}),v=(fi().s[8]++,{});fi().s[9]++;for(const x of h)fi().s[10]++,x.key.trim()!==""?(fi().b[1][0]++,fi().s[11]++,v[x.key]={default:x.value}):fi().b[1][1]++;fi().s[12]++,m.state=Object.keys(v).length>0?(fi().b[2][0]++,v):(fi().b[2][1]++,void 0),fi().s[13]++,n.onStyleChanged(m)};fi().s[14]++;const i=()=>{fi().f[4]++;const h=(fi().s[15]++,e());let m=(fi().s[16]++,1);for(fi().s[17]++;h.find(v=>(fi().f[5]++,fi().s[18]++,v.key===`key${m}`));)fi().s[19]++,m++;fi().s[20]++,h.push({key:`key${m}`,value:"value"}),fi().s[21]++,t(h)};fi().s[22]++;const r=h=>{fi().f[6]++;const m=(fi().s[23]++,e());fi().s[24]++,m.splice(h,1),fi().s[25]++,t(m)};fi().s[26]++;const o=(h,m)=>{fi().f[7]++;const v=(fi().s[27]++,e());fi().s[28]++,v[h].key=(fi().b[3][0]++,m||(fi().b[3][1]++,"")),fi().s[29]++,t(v)};fi().s[30]++;const s=(h,m)=>{fi().f[8]++;const v=(fi().s[31]++,e());fi().s[32]++,v[h].value=(fi().b[4][0]++,m||(fi().b[4][1]++,"")),fi().s[33]++,t(v)},a=(fi().s[34]++,e()),c=(fi().s[35]++,a.map((h,m)=>(fi().f[9]++,fi().s[36]++,te.jsxs("tr",{children:[te.jsx("td",{children:te.jsx(dd,{label:n.t("Key"),value:h.key,onChange:v=>(fi().f[10]++,fi().s[37]++,o(m,(fi().b[5][0]++,v||(fi().b[5][1]++,"")))),"data-wd-key":"global-state-variable-key:"+m})}),te.jsx("td",{children:te.jsx(dd,{label:n.t("Value"),value:h.value,onChange:v=>(fi().f[11]++,fi().s[38]++,s(m,(fi().b[6][0]++,v||(fi().b[6][1]++,"")))),"data-wd-key":"global-state-variable-value:"+m})}),te.jsx("td",{style:{verticalAlign:"middle"},children:te.jsx(Gs,{onClick:()=>(fi().f[12]++,fi().s[39]++,r(m)),title:n.t("Remove variable"),"data-wd-key":"global-state-remove-variable",children:te.jsx(nC,{})})})]},m))));return fi().s[40]++,te.jsxs(w1,{"data-wd-key":"modal:global-state",isOpen:n.isOpen,onOpenToggle:n.onOpenToggle,title:n.t("Global State Variables"),children:[(fi().b[7][0]++,a.length===0&&(fi().b[7][1]++,te.jsxs("div",{children:[te.jsx("p",{children:n.t("No global state variables defined. Add variables to create reusable values in your style.")}),te.jsx("div",{className:"maputnik-doc-inline",children:te.jsx(I6,{fieldSpec:qr.$root.state})},"doc")]}))),(fi().b[8][0]++,a.length>0&&(fi().b[8][1]++,te.jsxs("table",{children:[te.jsx("thead",{}),te.jsx("tbody",{children:c})]}))),te.jsx("div",{children:te.jsxs(Gs,{onClick:i,"data-wd-key":"global-state-add-variable",children:[te.jsx(z6,{}),n.t("Add Variable")]})})]})},YRe=(fi().s[41]++,Po()(QRe));function Yo(){var n="/home/runner/work/maputnik/maputnik/src/libs/metadata.ts",e="5a9c2665b160f40983faeb4cc69ad8e0d0d449de",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/metadata.ts",statementMap:{0:{start:{line:2,column:2},end:{line:14,column:3}},1:{start:{line:3,column:21},end:{line:6,column:6}},2:{start:{line:7,column:4},end:{line:9,column:5}},3:{start:{line:8,column:6},end:{line:8,column:60}},4:{start:{line:10,column:4},end:{line:10,column:33}},5:{start:{line:12,column:4},end:{line:12,column:95}},6:{start:{line:13,column:4},end:{line:13,column:24}},7:{start:{line:17,column:2},end:{line:17,column:30}},8:{start:{line:17,column:20},end:{line:17,column:30}},9:{start:{line:18,column:17},end:{line:18,column:37}},10:{start:{line:19,column:23},end:{line:19,column:109}},11:{start:{line:20,column:2},end:{line:24,column:3}},12:{start:{line:21,column:4},end:{line:21,column:41}},13:{start:{line:23,column:4},end:{line:23,column:69}},14:{start:{line:25,column:14},end:{line:25,column:31}},15:{start:{line:26,column:16},end:{line:26,column:39}},16:{start:{line:27,column:2},end:{line:27,column:29}},17:{start:{line:30,column:2},end:{line:30,column:26}},18:{start:{line:30,column:16},end:{line:30,column:26}},19:{start:{line:31,column:14},end:{line:31,column:31}},20:{start:{line:32,column:17},end:{line:32,column:40}},21:{start:{line:33,column:2},end:{line:33,column:29}}},fnMap:{0:{name:"loadJSON",decl:{start:{line:1,column:15},end:{line:1,column:23}},loc:{start:{line:1,column:43},end:{line:15,column:1}},line:1},1:{name:"downloadGlyphsMetadata",decl:{start:{line:16,column:22},end:{line:16,column:44}},loc:{start:{line:16,column:58},end:{line:28,column:1}},line:16},2:{name:"downloadSpriteMetadata",decl:{start:{line:29,column:22},end:{line:29,column:44}},loc:{start:{line:29,column:54},end:{line:34,column:1}},line:29}},branchMap:{0:{loc:{start:{line:7,column:4},end:{line:9,column:5}},type:"if",locations:[{start:{line:7,column:4},end:{line:9,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:7},1:{loc:{start:{line:17,column:2},end:{line:17,column:30}},type:"if",locations:[{start:{line:17,column:2},end:{line:17,column:30}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:17},2:{loc:{start:{line:20,column:2},end:{line:24,column:3}},type:"if",locations:[{start:{line:20,column:2},end:{line:24,column:3}},{start:{line:22,column:9},end:{line:24,column:3}}],line:20},3:{loc:{start:{line:30,column:2},end:{line:30,column:26}},type:"if",locations:[{start:{line:30,column:2},end:{line:30,column:26}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:30}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0},f:{0:0,1:0,2:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/metadata.ts"],names:[],mappings:"AAAA,eAAe,SAAY,KAAa,cAA6B;AACnE,MAAI;AACF,UAAM,WAAW,MAAM,MAAM,KAAK;AAAA,MAChC,MAAM;AAAA,MACN,aAAa;AAAA,IACf,CAAC;AACD,QAAI,CAAC,SAAS,IAAI;AAChB,YAAM,IAAI,MAAM,iCAAiC,GAAG;AAAA,IACtD;AACA,WAAO,MAAM,SAAS,KAAK;AAAA,EAC7B,QAAQ;AACN,YAAQ,KAAK,+BAA+B,MAAM,2BAA2B,YAAY;AACzF,WAAO;AAAA,EACT;AACF;AAEA,sBAAsB,uBAAuB,aAAwC;AACnF,MAAG,CAAC,YAAa,QAAO,CAAC;AAIzB,QAAM,SAAS,IAAI,IAAI,WAAW;AAClC,QAAM,eAAe,MAAM,mBAAmB,aAAa,IAAI,MAAM,mBAAmB,SAAS,IAAI;AACrG,MAAG,OAAO,aAAa,cAAc;AACnC,WAAO,WAAW;AAAA,EACpB,OAAO;AACL,WAAO,WAAW,OAAO,SAAU,QAAQ,cAAc,OAAO;AAAA,EAClE;AACA,QAAM,MAAM,OAAO,SAAS;AAC5B,QAAM,QAAQ,MAAM,SAAS,KAAK,CAAC,CAAa;AAChD,SAAO,CAAC,GAAG,IAAI,IAAI,KAAK,CAAC;AAC3B;AAEA,sBAAsB,uBAAuB,SAAoC;AAC/E,MAAG,CAAC,QAAS,QAAO,CAAC;AACrB,QAAM,MAAM,UAAU;AACtB,QAAM,SAAS,MAAM,SAAS,KAAK,CAAC,CAA2B;AAC/D,SAAO,OAAO,KAAK,MAAM;AAC3B;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"5a9c2665b160f40983faeb4cc69ad8e0d0d449de"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Yo=function(){return s},s}Yo();async function Ioe(n,e){Yo().f[0]++,Yo().s[0]++;try{const t=(Yo().s[1]++,await fetch(n,{mode:"cors",credentials:"same-origin"}));if(Yo().s[2]++,t.ok)Yo().b[0][1]++;else throw Yo().b[0][0]++,Yo().s[3]++,new Error("Failed to load metadata for "+n);return Yo().s[4]++,await t.json()}catch{return Yo().s[5]++,console.warn("Can not load metadata for "+n+", using default value "+e),Yo().s[6]++,e}}async function qRe(n){if(Yo().f[1]++,Yo().s[7]++,n)Yo().b[1][1]++;else return Yo().b[1][0]++,Yo().s[8]++,[];const e=(Yo().s[9]++,new URL(n)),t=(Yo().s[10]++,"/"+encodeURIComponent("{fontstack}")+"/"+encodeURIComponent("{range}")+".pbf");Yo().s[11]++,e.pathname===t?(Yo().b[2][0]++,Yo().s[12]++,e.pathname="/fontstacks.json"):(Yo().b[2][1]++,Yo().s[13]++,e.pathname=e.pathname.replace(t,".json"));const i=(Yo().s[14]++,e.toString()),r=(Yo().s[15]++,await Ioe(i,[]));return Yo().s[16]++,[...new Set(r)]}async function VRe(n){if(Yo().f[2]++,Yo().s[17]++,n)Yo().b[3][1]++;else return Yo().b[3][0]++,Yo().s[18]++,[];const e=(Yo().s[19]++,n+".json"),t=(Yo().s[20]++,await Ioe(e,{}));return Yo().s[21]++,Object.keys(t)}function Dh(){var n="/home/runner/work/maputnik/maputnik/src/libs/diffmessage.ts",e="f92fa2abb31199d99fd3ae02d967dc6702faf862",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/diffmessage.ts",statementMap:{0:{start:{line:3,column:18},end:{line:3,column:47}},1:{start:{line:4,column:2},end:{line:4,column:70}},2:{start:{line:4,column:30},end:{line:4,column:68}},3:{start:{line:7,column:2},end:{line:7,column:71}},4:{start:{line:7,column:58},end:{line:7,column:69}},5:{start:{line:10,column:2},end:{line:10,column:71}},6:{start:{line:10,column:58},end:{line:10,column:69}}},fnMap:{0:{name:"diffMessages",decl:{start:{line:2,column:9},end:{line:2,column:21}},loc:{start:{line:2,column:47},end:{line:5,column:1}},line:2},1:{name:"(anonymous_1)",decl:{start:{line:4,column:21},end:{line:4,column:22}},loc:{start:{line:4,column:30},end:{line:4,column:68}},line:4},2:{name:"undoMessages",decl:{start:{line:6,column:16},end:{line:6,column:28}},loc:{start:{line:6,column:54},end:{line:8,column:1}},line:6},3:{name:"(anonymous_3)",decl:{start:{line:7,column:51},end:{line:7,column:52}},loc:{start:{line:7,column:58},end:{line:7,column:69}},line:7},4:{name:"redoMessages",decl:{start:{line:9,column:16},end:{line:9,column:28}},loc:{start:{line:9,column:54},end:{line:11,column:1}},line:9},5:{name:"(anonymous_5)",decl:{start:{line:10,column:51},end:{line:10,column:52}},loc:{start:{line:10,column:58},end:{line:10,column:69}},line:10}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/diffmessage.ts"],names:[],mappings:"AAAA,SAAQ,YAAW;AAGnB,SAAS,aAAa,aAAiC,YAAgC;AACrF,QAAM,UAAU,KAAK,aAAa,UAAU;AAC5C,SAAO,QAAQ,IAAI,SAAO,IAAI,UAAU,MAAM,IAAI,KAAK,KAAK,GAAG,CAAC;AAClE;AAEO,gBAAS,aAAa,aAAiC,YAAgC;AAC5F,SAAO,aAAa,aAAa,UAAU,EAAE,IAAI,OAAK,UAAU,CAAC;AACnE;AACO,gBAAS,aAAa,aAAiC,YAAgC;AAC5F,SAAO,aAAa,aAAa,UAAU,EAAE,IAAI,OAAK,UAAU,CAAC;AACnE;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f92fa2abb31199d99fd3ae02d967dc6702faf862"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Dh=function(){return s},s}Dh();function koe(n,e){Dh().f[0]++;const t=(Dh().s[0]++,uue(n,e));return Dh().s[1]++,t.map(i=>(Dh().f[1]++,Dh().s[2]++,i.command+" "+i.args.join(" ")))}function $Re(n,e){return Dh().f[2]++,Dh().s[3]++,koe(n,e).map(t=>(Dh().f[3]++,Dh().s[4]++,"Undo "+t))}function HRe(n,e){return Dh().f[4]++,Dh().s[5]++,koe(n,e).map(t=>(Dh().f[5]++,Dh().s[6]++,"Redo "+t))}function wc(){var n="/home/runner/work/maputnik/maputnik/src/libs/urlopen.ts",e="d72dae9738057e855ea98626011f8090b99877cc",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/urlopen.ts",statementMap:{0:{start:{line:3,column:21},end:{line:3,column:50}},1:{start:{line:4,column:19},end:{line:4,column:55}},2:{start:{line:5,column:2},end:{line:8,column:3}},3:{start:{line:6,column:4},end:{line:6,column:44}},4:{start:{line:7,column:4},end:{line:7,column:75}},5:{start:{line:9,column:2},end:{line:9,column:18}},6:{start:{line:12,column:2},end:{line:12,column:41}},7:{start:{line:13,column:2},end:{line:23,column:3}},8:{start:{line:14,column:21},end:{line:17,column:6}},9:{start:{line:18,column:17},end:{line:18,column:38}},10:{start:{line:19,column:4},end:{line:19,column:43}},11:{start:{line:21,column:4},end:{line:21,column:63}},12:{start:{line:22,column:4},end:{line:22,column:28}}},fnMap:{0:{name:"getStyleUrlFromAddressbarAndRemoveItIfNeeded",decl:{start:{line:2,column:16},end:{line:2,column:60}},loc:{start:{line:2,column:63},end:{line:10,column:1}},line:2},1:{name:"loadStyleUrl",decl:{start:{line:11,column:22},end:{line:11,column:34}},loc:{start:{line:11,column:45},end:{line:24,column:1}},line:11}},branchMap:{0:{loc:{start:{line:5,column:2},end:{line:8,column:3}},type:"if",locations:[{start:{line:5,column:2},end:{line:8,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:5}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0},f:{0:0,1:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/urlopen.ts"],names:[],mappings:"AAAA,OAAO,WAAW;AAGX,gBAAS,+CAA8D;AAC5E,QAAM,aAAa,IAAI,IAAI,OAAO,SAAS,IAAI;AAC/C,QAAM,WAAW,WAAW,aAAa,IAAI,OAAO;AACpD,MAAI,UAAU;AACZ,eAAW,aAAa,OAAO,OAAO;AACtC,WAAO,QAAQ,aAAa,CAAC,GAAG,SAAS,OAAO,WAAW,SAAS,CAAC;AAAA,EACvE;AACA,SAAO;AACT;AAEA,sBAAsB,aAAa,UAAqD;AACtF,UAAQ,IAAI,iBAAiB,QAAQ;AACrC,MAAI;AACF,UAAM,WAAW,MAAM,MAAM,UAAU;AAAA,MACrC,MAAM;AAAA,MACN,aAAa;AAAA,IACf,CAAC;AACD,UAAM,OAAO,MAAM,SAAS,KAAK;AACjC,WAAO,MAAM,oBAAoB,IAAI;AAAA,EACvC,QAAQ;AACN,YAAQ,KAAK,oCAAoC,QAAQ;AACzD,WAAO,MAAM;AAAA,EACf;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d72dae9738057e855ea98626011f8090b99877cc"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return wc=function(){return s},s}wc();function ZRe(){wc().f[0]++;const n=(wc().s[0]++,new URL(window.location.href)),e=(wc().s[1]++,n.searchParams.get("style"));return wc().s[2]++,e?(wc().b[0][0]++,wc().s[3]++,n.searchParams.delete("style"),wc().s[4]++,window.history.replaceState({},document.title,n.toString())):wc().b[0][1]++,wc().s[5]++,e}async function Toe(n){wc().f[1]++,wc().s[6]++,console.log("Loading style",n),wc().s[7]++;try{const e=(wc().s[8]++,await fetch(n,{mode:"cors",credentials:"same-origin"})),t=(wc().s[9]++,await e.json());return wc().s[10]++,xd.ensureStyleValidity(t)}catch{return wc().s[11]++,console.warn("Could not fetch default style: "+n),wc().s[12]++,xd.emptyStyle}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var HR=function(n,e){return HR=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var r in i)i.hasOwnProperty(r)&&(t[r]=i[r])},HR(n,e)};function Roe(n,e){HR(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function XRe(n){var e=typeof Symbol=="function"&&n[Symbol.iterator],t=0;return e?e.call(n):{next:function(){return n&&t>=n.length&&(n=void 0),{value:n&&n[t++],done:!n}}}}function JRe(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var i=t.call(n),r,o=[],s;try{for(;(e===void 0||e-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(a){s={error:a}}finally{try{r&&!r.done&&(t=i.return)&&t.call(i)}finally{if(s)throw s.error}}return o}function eDe(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(JRe(arguments[e]));return n}var Doe=(function(){function n(e,t){this.target=t,this.type=e}return n})(),tDe=(function(n){Roe(e,n);function e(t,i){var r=n.call(this,"error",i)||this;return r.message=t.message,r.error=t,r}return e})(Doe),nDe=(function(n){Roe(e,n);function e(t,i,r){t===void 0&&(t=1e3),i===void 0&&(i="");var o=n.call(this,"close",r)||this;return o.wasClean=!0,o.code=t,o.reason=i,o}return e})(Doe);/*!
 * Reconnecting WebSocket
 * by Pedro Ladaria <pedro.ladaria@gmail.com>
 * https://github.com/pladaria/reconnecting-websocket
 * License MIT
 */var iDe=function(){if(typeof WebSocket<"u")return WebSocket},rDe=function(n){return typeof n<"u"&&!!n&&n.CLOSING===2},ub={maxReconnectionDelay:1e4,minReconnectionDelay:1e3+Math.random()*4e3,minUptime:5e3,reconnectionDelayGrowFactor:1.3,connectionTimeout:4e3,maxRetries:1/0,maxEnqueuedMessages:1/0};(function(){function n(e,t,i){var r=this;i===void 0&&(i={}),this._listeners={error:[],message:[],open:[],close:[]},this._retryCount=-1,this._shouldReconnect=!0,this._connectLock=!1,this._binaryType="blob",this._closeCalled=!1,this._messageQueue=[],this.onclose=null,this.onerror=null,this.onmessage=null,this.onopen=null,this._handleOpen=function(o){r._debug("open event");var s=r._options.minUptime,a=s===void 0?ub.minUptime:s;clearTimeout(r._connectTimeout),r._uptimeTimeout=setTimeout(function(){return r._acceptOpen()},a),r._ws.binaryType=r._binaryType,r._messageQueue.forEach(function(c){return r._ws.send(c)}),r._messageQueue=[],r.onopen&&r.onopen(o),r._listeners.open.forEach(function(c){return r._callEventListener(o,c)})},this._handleMessage=function(o){r._debug("message event"),r.onmessage&&r.onmessage(o),r._listeners.message.forEach(function(s){return r._callEventListener(o,s)})},this._handleError=function(o){r._debug("error event",o.message),r._disconnect(void 0,o.message==="TIMEOUT"?"timeout":void 0),r.onerror&&r.onerror(o),r._debug("exec error listeners"),r._listeners.error.forEach(function(s){return r._callEventListener(o,s)}),r._connect()},this._handleClose=function(o){r._debug("close event"),r._clearTimeouts(),r._shouldReconnect&&r._connect(),r.onclose&&r.onclose(o),r._listeners.close.forEach(function(s){return r._callEventListener(o,s)})},this._url=e,this._protocols=t,this._options=i,this._options.startClosed&&(this._shouldReconnect=!1),this._connect()}return Object.defineProperty(n,"CONNECTING",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(n,"OPEN",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(n,"CLOSING",{get:function(){return 2},enumerable:!0,configurable:!0}),Object.defineProperty(n,"CLOSED",{get:function(){return 3},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"CONNECTING",{get:function(){return n.CONNECTING},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"OPEN",{get:function(){return n.OPEN},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"CLOSING",{get:function(){return n.CLOSING},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"CLOSED",{get:function(){return n.CLOSED},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"binaryType",{get:function(){return this._ws?this._ws.binaryType:this._binaryType},set:function(e){this._binaryType=e,this._ws&&(this._ws.binaryType=e)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"retryCount",{get:function(){return Math.max(this._retryCount,0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"bufferedAmount",{get:function(){var e=this._messageQueue.reduce(function(t,i){return typeof i=="string"?t+=i.length:i instanceof Blob?t+=i.size:t+=i.byteLength,t},0);return e+(this._ws?this._ws.bufferedAmount:0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"extensions",{get:function(){return this._ws?this._ws.extensions:""},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"protocol",{get:function(){return this._ws?this._ws.protocol:""},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"readyState",{get:function(){return this._ws?this._ws.readyState:this._options.startClosed?n.CLOSED:n.CONNECTING},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"url",{get:function(){return this._ws?this._ws.url:""},enumerable:!0,configurable:!0}),n.prototype.close=function(e,t){if(e===void 0&&(e=1e3),this._closeCalled=!0,this._shouldReconnect=!1,this._clearTimeouts(),!this._ws){this._debug("close enqueued: no ws instance");return}if(this._ws.readyState===this.CLOSED){this._debug("close: already closed");return}this._ws.close(e,t)},n.prototype.reconnect=function(e,t){this._shouldReconnect=!0,this._closeCalled=!1,this._retryCount=-1,!this._ws||this._ws.readyState===this.CLOSED?this._connect():(this._disconnect(e,t),this._connect())},n.prototype.send=function(e){if(this._ws&&this._ws.readyState===this.OPEN)this._debug("send",e),this._ws.send(e);else{var t=this._options.maxEnqueuedMessages,i=t===void 0?ub.maxEnqueuedMessages:t;this._messageQueue.length<i&&(this._debug("enqueue",e),this._messageQueue.push(e))}},n.prototype.addEventListener=function(e,t){this._listeners[e]&&this._listeners[e].push(t)},n.prototype.dispatchEvent=function(e){var t,i,r=this._listeners[e.type];if(r)try{for(var o=XRe(r),s=o.next();!s.done;s=o.next()){var a=s.value;this._callEventListener(e,a)}}catch(c){t={error:c}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(t)throw t.error}}return!0},n.prototype.removeEventListener=function(e,t){this._listeners[e]&&(this._listeners[e]=this._listeners[e].filter(function(i){return i!==t}))},n.prototype._debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._options.debug&&console.log.apply(console,eDe(["RWS>"],e))},n.prototype._getNextDelay=function(){var e=this._options,t=e.reconnectionDelayGrowFactor,i=t===void 0?ub.reconnectionDelayGrowFactor:t,r=e.minReconnectionDelay,o=r===void 0?ub.minReconnectionDelay:r,s=e.maxReconnectionDelay,a=s===void 0?ub.maxReconnectionDelay:s,c=0;return this._retryCount>0&&(c=o*Math.pow(i,this._retryCount-1),c>a&&(c=a)),this._debug("next delay",c),c},n.prototype._wait=function(){var e=this;return new Promise(function(t){setTimeout(t,e._getNextDelay())})},n.prototype._getNextUrl=function(e){if(typeof e=="string")return Promise.resolve(e);if(typeof e=="function"){var t=e();if(typeof t=="string")return Promise.resolve(t);if(t.then)return t}throw Error("Invalid URL")},n.prototype._connect=function(){var e=this;if(!(this._connectLock||!this._shouldReconnect)){this._connectLock=!0;var t=this._options,i=t.maxRetries,r=i===void 0?ub.maxRetries:i,o=t.connectionTimeout,s=o===void 0?ub.connectionTimeout:o,a=t.WebSocket,c=a===void 0?iDe():a;if(this._retryCount>=r){this._debug("max retries reached",this._retryCount,">=",r);return}if(this._retryCount++,this._debug("connect",this._retryCount),this._removeListeners(),!rDe(c))throw Error("No valid WebSocket class provided");this._wait().then(function(){return e._getNextUrl(e._url)}).then(function(h){e._closeCalled||(e._debug("connect",{url:h,protocols:e._protocols}),e._ws=e._protocols?new c(h,e._protocols):new c(h),e._ws.binaryType=e._binaryType,e._connectLock=!1,e._addListeners(),e._connectTimeout=setTimeout(function(){return e._handleTimeout()},s))})}},n.prototype._handleTimeout=function(){this._debug("timeout event"),this._handleError(new tDe(Error("TIMEOUT"),this))},n.prototype._disconnect=function(e,t){if(e===void 0&&(e=1e3),this._clearTimeouts(),!!this._ws){this._removeListeners();try{this._ws.close(e,t),this._handleClose(new nDe(e,t,this))}catch{}}},n.prototype._acceptOpen=function(){this._debug("accept open"),this._retryCount=0},n.prototype._callEventListener=function(e,t){"handleEvent"in t?t.handleEvent(e):t(e)},n.prototype._removeListeners=function(){this._ws&&(this._debug("removeListeners"),this._ws.removeEventListener("open",this._handleOpen),this._ws.removeEventListener("close",this._handleClose),this._ws.removeEventListener("message",this._handleMessage),this._ws.removeEventListener("error",this._handleError))},n.prototype._addListeners=function(){this._ws&&(this._debug("addListeners"),this._ws.addEventListener("open",this._handleOpen),this._ws.addEventListener("close",this._handleClose),this._ws.addEventListener("message",this._handleMessage),this._ws.addEventListener("error",this._handleError))},n.prototype._clearTimeouts=function(){clearTimeout(this._connectTimeout),clearTimeout(this._uptimeTimeout)},n})();function Poe(){var n="/home/runner/work/maputnik/maputnik/src/libs/store/apistore.ts",e="511b7cd31edca7d05c4852901896ddb82085d1f5",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/store/apistore.ts",statementMap:{0:{start:{line:7,column:18},end:{line:7,column:24}},1:{start:{line:10,column:4},end:{line:11,column:7}},2:{start:{line:12,column:17},end:{line:12,column:37}},3:{start:{line:13,column:17},end:{line:13,column:28}},4:{start:{line:14,column:4},end:{line:14,column:45}},5:{start:{line:15,column:4},end:{line:15,column:50}},6:{start:{line:16,column:4},end:{line:16,column:37}},7:{start:{line:19,column:4},end:{line:27,column:5}},8:{start:{line:20,column:23},end:{line:20,column:79}},9:{start:{line:21,column:19},end:{line:21,column:40}},10:{start:{line:22,column:23},end:{line:22,column:27}},11:{start:{line:23,column:6},end:{line:23,column:39}},12:{start:{line:24,column:6},end:{line:24,column:32}},13:{start:{line:26,column:6},end:{line:26,column:54}},14:{start:{line:30,column:23},end:{line:30,column:67}},15:{start:{line:31,column:4},end:{line:42,column:6}},16:{start:{line:32,column:6},end:{line:32,column:26}},17:{start:{line:32,column:19},end:{line:32,column:26}},18:{start:{line:33,column:6},end:{line:33,column:52}},19:{start:{line:34,column:24},end:{line:34,column:40}},20:{start:{line:35,column:6},end:{line:39,column:7}},21:{start:{line:36,column:8},end:{line:36,column:41}},22:{start:{line:38,column:8},end:{line:38,column:27}},23:{start:{line:40,column:27},end:{line:40,column:65}},24:{start:{line:41,column:6},end:{line:41,column:44}},25:{start:{line:45,column:4},end:{line:53,column:5}},26:{start:{line:46,column:23},end:{line:48,column:8}},27:{start:{line:49,column:19},end:{line:49,column:40}},28:{start:{line:50,column:6},end:{line:50,column:45}},29:{start:{line:52,column:6},end:{line:52,column:92}},30:{start:{line:57,column:22},end:{line:61,column:5}},31:{start:{line:62,column:15},end:{line:62,column:26}},32:{start:{line:63,column:4},end:{line:72,column:7}},33:{start:{line:71,column:6},end:{line:71,column:38}},34:{start:{line:71,column:17},end:{line:71,column:38}},35:{start:{line:73,column:4},end:{line:73,column:20}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:2},end:{line:9,column:3}},loc:{start:{line:9,column:20},end:{line:17,column:3}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:10,column:58},end:{line:10,column:59}},loc:{start:{line:10,column:64},end:{line:11,column:5}},line:10},2:{name:"(anonymous_2)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:15},end:{line:28,column:3}},line:18},3:{name:"(anonymous_3)",decl:{start:{line:29,column:2},end:{line:29,column:3}},loc:{start:{line:29,column:23},end:{line:43,column:3}},line:29},4:{name:"(anonymous_4)",decl:{start:{line:31,column:27},end:{line:31,column:28}},loc:{start:{line:31,column:34},end:{line:42,column:5}},line:31},5:{name:"(anonymous_5)",decl:{start:{line:44,column:2},end:{line:44,column:3}},loc:{start:{line:44,column:25},end:{line:54,column:3}},line:44},6:{name:"(anonymous_6)",decl:{start:{line:56,column:2},end:{line:56,column:3}},loc:{start:{line:56,column:17},end:{line:74,column:3}},line:56},7:{name:"(anonymous_7)",decl:{start:{line:70,column:13},end:{line:70,column:14}},loc:{start:{line:70,column:29},end:{line:72,column:5}},line:70}},branchMap:{0:{loc:{start:{line:10,column:30},end:{line:11,column:6}},type:"binary-expr",locations:[{start:{line:10,column:30},end:{line:10,column:53}},{start:{line:10,column:58},end:{line:11,column:5}}],line:10},1:{loc:{start:{line:32,column:6},end:{line:32,column:26}},type:"if",locations:[{start:{line:32,column:6},end:{line:32,column:26}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:32},2:{loc:{start:{line:45,column:4},end:{line:53,column:5}},type:"if",locations:[{start:{line:45,column:4},end:{line:53,column:5}},{start:{line:51,column:11},end:{line:53,column:5}}],line:45},3:{loc:{start:{line:71,column:6},end:{line:71,column:38}},type:"if",locations:[{start:{line:71,column:6},end:{line:71,column:38}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:71}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/store/apistore.ts"],names:[],mappings:"AAAA,OAAO,WAAW;AAClB,SAAQ,cAAa;AACrB,OAAO,2BAA2B;AAO3B,aAAM,cAAqC;AAAA,EAEhD;AAAA,EACA;AAAA,EACA,gBAAoC;AAAA,EACpC;AAAA,EAEA,YAAY,MAA4B;AACtC,SAAK,qBAAqB,KAAK,uBAAuB,MAAM;AAAA,IAAC;AAC7D,UAAM,OAAO,OAAO,SAAS;AAC7B,UAAM,OAAO;AACb,SAAK,WAAW,UAAU,IAAI,IAAI,IAAI;AACtC,SAAK,eAAe,QAAQ,IAAI,IAAI,IAAI;AACxC,SAAK,OAAO,KAAK,KAAK,KAAK,IAAI;AAAA,EACjC;AAAA,EAEA,MAAM,OAAsB;AAC1B,QAAI;AACF,YAAM,WAAW,MAAM,MAAM,KAAK,WAAW,WAAW,EAAC,MAAM,OAAM,CAAC;AACtE,YAAM,OAAO,MAAM,SAAS,KAAK;AACjC,YAAM,WAAW;AACjB,WAAK,gBAAgB,SAAS,CAAC;AAC/B,WAAK,mBAAmB;AAAA,IAC1B,QAAQ;AACN,YAAM,IAAI,MAAM,8BAA8B;AAAA,IAChD;AAAA,EACF;AAAA,EAEA,qBAAqB;AACnB,UAAM,aAAa,IAAI,sBAAsB,KAAK,YAAY;AAC9D,eAAW,YAAY,OAAK;AAC1B,UAAG,CAAC,EAAE,KAAM;AACZ,cAAQ,IAAI,gCAAgC;AAC5C,UAAI,cAAc,MAAM;AACxB,UAAI;AACF,sBAAc,KAAK,MAAM,EAAE,IAAI;AAAA,MACjC,SAAQ,KAAK;AACX,gBAAQ,MAAM,GAAG;AAAA,MACnB;AACA,YAAM,eAAe,MAAM,oBAAoB,WAAW;AAC1D,WAAK,mBAAmB,YAAY;AAAA,IACtC;AAAA,EACF;AAAA,EAEA,MAAM,iBAAoD;AACxD,QAAG,KAAK,eAAe;AACrB,YAAM,WAAW,MAAM,MAAM,KAAK,WAAW,aAAa,KAAK,eAAe;AAAA,QAC5E,MAAM;AAAA,MACR,CAAC;AACD,YAAM,OAAO,MAAM,SAAS,KAAK;AACjC,aAAO,MAAM,oBAAoB,IAAI;AAAA,IACvC,OAAO;AACL,YAAM,IAAI,MAAM,oEAAoE;AAAA,IACtF;AAAA,EACF;AAAA;AAAA,EAGA,KAAK,UAAoC;AACvC,UAAM,YAAY;AAAA,MAChB,MAAM;AAAA,QACJ,MAAM,oBAAoB,QAAQ;AAAA,MACpC;AAAA,IACF;AAEA,UAAM,KAAK,SAAS;AACpB,UAAM,KAAK,WAAW,aAAa,IAAI;AAAA,MACrC,QAAQ;AAAA,MACR,MAAM;AAAA,MACN,SAAS;AAAA,QACP,gBAAgB;AAAA,MAClB;AAAA,MACA,MAAM;AAAA,IACR,CAAC,EACE,MAAM,SAAS,OAAO;AACrB,UAAG,MAAO,SAAQ,MAAM,KAAK;AAAA,IAC/B,CAAC;AACH,WAAO;AAAA,EACT;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"511b7cd31edca7d05c4852901896ddb82085d1f5"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Poe=function(){return s},s}Poe();function ci(){var n="/home/runner/work/maputnik/maputnik/src/libs/store/stylestore.ts",e="1506dd6f3469e4801b7fd940c02682bf4ad7b098",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/store/stylestore.ts",statementMap:{0:{start:{line:4,column:22},end:{line:4,column:32}},1:{start:{line:5,column:20},end:{line:5,column:27}},2:{start:{line:6,column:20},end:{line:9,column:1}},3:{start:{line:10,column:24},end:{line:10,column:44}},4:{start:{line:12,column:2},end:{line:12,column:39}},5:{start:{line:15,column:17},end:{line:15,column:19}},6:{start:{line:16,column:2},end:{line:21,column:3}},7:{start:{line:16,column:15},end:{line:16,column:16}},8:{start:{line:17,column:16},end:{line:17,column:42}},9:{start:{line:18,column:4},end:{line:20,column:5}},10:{start:{line:19,column:6},end:{line:19,column:32}},11:{start:{line:22,column:2},end:{line:22,column:16}},12:{start:{line:25,column:16},end:{line:25,column:30}},13:{start:{line:26,column:2},end:{line:26,column:86}},14:{start:{line:29,column:2},end:{line:31,column:3}},15:{start:{line:30,column:4},end:{line:30,column:41}},16:{start:{line:32,column:16},end:{line:32,column:30}},17:{start:{line:33,column:18},end:{line:33,column:26}},18:{start:{line:34,column:2},end:{line:34,column:17}},19:{start:{line:37,column:2},end:{line:37,column:57}},20:{start:{line:47,column:4},end:{line:47,column:40}},21:{start:{line:51,column:4},end:{line:56,column:5}},22:{start:{line:51,column:17},end:{line:51,column:18}},23:{start:{line:52,column:18},end:{line:52,column:44}},24:{start:{line:53,column:6},end:{line:55,column:7}},25:{start:{line:54,column:8},end:{line:54,column:44}},26:{start:{line:60,column:4},end:{line:62,column:5}},27:{start:{line:61,column:6},end:{line:61,column:32}},28:{start:{line:63,column:20},end:{line:63,column:67}},29:{start:{line:64,column:22},end:{line:64,column:68}},30:{start:{line:65,column:4},end:{line:67,column:5}},31:{start:{line:66,column:6},end:{line:66,column:35}},32:{start:{line:68,column:4},end:{line:68,column:30}},33:{start:{line:72,column:4},end:{line:72,column:51}},34:{start:{line:73,column:16},end:{line:73,column:37}},35:{start:{line:74,column:19},end:{line:77,column:5}},36:{start:{line:75,column:6},end:{line:75,column:65}},37:{start:{line:76,column:6},end:{line:76,column:67}},38:{start:{line:78,column:4},end:{line:89,column:5}},39:{start:{line:79,column:6},end:{line:79,column:15}},40:{start:{line:81,column:6},end:{line:88,column:7}},41:{start:{line:84,column:8},end:{line:84,column:21}},42:{start:{line:85,column:8},end:{line:85,column:17}},43:{start:{line:87,column:8},end:{line:87,column:16}},44:{start:{line:90,column:4},end:{line:90,column:20}}},fnMap:{0:{name:"loadDefaultStyle",decl:{start:{line:11,column:16},end:{line:11,column:32}},loc:{start:{line:11,column:35},end:{line:13,column:1}},line:11},1:{name:"loadStoredStyles",decl:{start:{line:14,column:9},end:{line:14,column:25}},loc:{start:{line:14,column:28},end:{line:23,column:1}},line:14},2:{name:"isStyleKey",decl:{start:{line:24,column:9},end:{line:24,column:19}},loc:{start:{line:24,column:25},end:{line:27,column:1}},line:24},3:{name:"fromKey",decl:{start:{line:28,column:9},end:{line:28,column:16}},loc:{start:{line:28,column:22},end:{line:35,column:1}},line:28},4:{name:"styleKey",decl:{start:{line:36,column:9},end:{line:36,column:17}},loc:{start:{line:36,column:27},end:{line:38,column:1}},line:36},5:{name:"(anonymous_5)",decl:{start:{line:46,column:2},end:{line:46,column:3}},loc:{start:{line:46,column:16},end:{line:48,column:3}},line:46},6:{name:"(anonymous_6)",decl:{start:{line:50,column:2},end:{line:50,column:3}},loc:{start:{line:50,column:10},end:{line:57,column:3}},line:50},7:{name:"(anonymous_7)",decl:{start:{line:59,column:2},end:{line:59,column:3}},loc:{start:{line:59,column:25},end:{line:69,column:3}},line:59},8:{name:"(anonymous_8)",decl:{start:{line:71,column:2},end:{line:71,column:3}},loc:{start:{line:71,column:17},end:{line:91,column:3}},line:71},9:{name:"(anonymous_9)",decl:{start:{line:74,column:19},end:{line:74,column:20}},loc:{start:{line:74,column:25},end:{line:77,column:5}},line:74}},branchMap:{0:{loc:{start:{line:18,column:4},end:{line:20,column:5}},type:"if",locations:[{start:{line:18,column:4},end:{line:20,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:18},1:{loc:{start:{line:26,column:9},end:{line:26,column:85}},type:"binary-expr",locations:[{start:{line:26,column:9},end:{line:26,column:27}},{start:{line:26,column:31},end:{line:26,column:57}},{start:{line:26,column:61},end:{line:26,column:85}}],line:26},2:{loc:{start:{line:29,column:2},end:{line:31,column:3}},type:"if",locations:[{start:{line:29,column:2},end:{line:31,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:29},3:{loc:{start:{line:53,column:6},end:{line:55,column:7}},type:"if",locations:[{start:{line:53,column:6},end:{line:55,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:53},4:{loc:{start:{line:60,column:4},end:{line:62,column:5}},type:"if",locations:[{start:{line:60,column:4},end:{line:62,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:60},5:{loc:{start:{line:65,column:4},end:{line:67,column:5}},type:"if",locations:[{start:{line:65,column:4},end:{line:67,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:65},6:{loc:{start:{line:81,column:6},end:{line:88,column:7}},type:"if",locations:[{start:{line:81,column:6},end:{line:88,column:7}},{start:{line:86,column:13},end:{line:88,column:7}}],line:81},7:{loc:{start:{line:81,column:10},end:{line:83,column:81}},type:"binary-expr",locations:[{start:{line:81,column:10},end:{line:81,column:35}},{start:{line:81,column:40},end:{line:81,column:53}},{start:{line:82,column:6},end:{line:82,column:21}},{start:{line:83,column:6},end:{line:83,column:37}},{start:{line:83,column:41},end:{line:83,column:80}}],line:81}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0},b:{0:[0,0],1:[0,0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0,0,0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/store/stylestore.ts"],names:[],mappings:"AAAA,OAAO,WAAW;AAClB,SAAQ,oBAAmB;AAC3B,OAAO,mBAAmB;AAG1B,MAAM,gBAAgB;AACtB,MAAM,cAAc;AACpB,MAAM,cAAc;AAAA,EAClB,QAAQ,CAAC,eAAe,cAAc,EAAE,KAAK,GAAG;AAAA,EAChD,aAAa,CAAC,eAAe,cAAc,EAAE,KAAK,GAAG;AACvD;AAEA,MAAM,kBAAkB,cAAc,CAAC,EAAE;AAGlC,gBAAS,mBAAsD;AACpE,SAAO,aAAa,eAAe;AACrC;AAGA,SAAS,mBAAmB;AAC1B,QAAM,SAAS,CAAC;AAChB,WAAS,IAAI,GAAG,IAAI,OAAO,aAAa,QAAQ,KAAK;AACnD,UAAM,MAAM,OAAO,aAAa,IAAI,CAAC;AACrC,QAAG,WAAW,GAAI,GAAG;AACnB,aAAO,KAAK,QAAQ,GAAI,CAAC;AAAA,IAC3B;AAAA,EACF;AACA,SAAO;AACT;AAEA,SAAS,WAAW,KAAa;AAC/B,QAAM,QAAQ,IAAI,MAAM,GAAG;AAC3B,SAAO,MAAM,WAAW,KAAK,MAAM,CAAC,MAAM,iBAAiB,MAAM,CAAC,MAAM;AAC1E;AAGA,SAAS,QAAQ,KAAa;AAC5B,MAAG,CAAC,WAAW,GAAG,GAAG;AACnB,UAAM;AAAA,EACR;AAEA,QAAM,QAAQ,IAAI,MAAM,GAAG;AAC3B,QAAM,UAAU,MAAM,CAAC;AACvB,SAAO;AACT;AAGA,SAAS,SAAS,SAAiB;AACjC,SAAO,CAAC,eAAe,aAAa,OAAO,EAAE,KAAK,GAAG;AACvD;AAGO,aAAM,WAAkC;AAAA;AAAA;AAAA;AAAA,EAI7C;AAAA;AAAA;AAAA,EAIA,cAAc;AACZ,SAAK,YAAY,iBAAiB;AAAA,EACpC;AAAA;AAAA,EAGA,QAAQ;AACN,aAAS,IAAI,GAAG,IAAI,OAAO,aAAa,QAAQ,KAAK;AACnD,YAAM,MAAM,OAAO,aAAa,IAAI,CAAC;AACrC,UAAG,IAAI,WAAW,aAAa,GAAG;AAChC,eAAO,aAAa,WAAW,GAAG;AAAA,MACpC;AAAA,IACF;AAAA,EACF;AAAA;AAAA,EAGA,MAAM,iBAAoD;AACxD,QAAG,KAAK,UAAU,WAAW,GAAG;AAC9B,aAAO,iBAAiB;AAAA,IAC1B;AACA,UAAM,UAAU,OAAO,aAAa,QAAQ,YAAY,MAAM;AAC9D,UAAM,YAAY,OAAO,aAAa,QAAQ,SAAS,OAAO,CAAC;AAE/D,QAAI,WAAW;AACb,aAAO,KAAK,MAAM,SAAS;AAAA,IAC7B;AACA,WAAO,iBAAiB;AAAA,EAC1B;AAAA;AAAA,EAGA,KAAK,UAAoC;AACvC,eAAW,MAAM,oBAAoB,QAAQ;AAC7C,UAAM,MAAM,SAAS,SAAS,EAAE;AAEhC,UAAM,SAAS,MAAM;AACnB,aAAO,aAAa,QAAQ,KAAK,KAAK,UAAU,QAAQ,CAAC;AACzD,aAAO,aAAa,QAAQ,YAAY,QAAQ,SAAS,EAAE;AAAA,IAC7D;AAEA,QAAI;AACF,aAAO;AAAA,IACT,SAAS,GAAG;AAEV,UAAI,aAAa,iBACf,EAAE,SAAS;AAAA,MACX,EAAE,SAAS;AAAA,MACX,EAAE,SAAS,wBACX,EAAE,SAAS,+BACV;AACD,aAAK,MAAM;AACX,eAAO;AAAA,MACT,OAAO;AACL,cAAM;AAAA,MACR;AAAA,IACF;AACA,WAAO;AAAA,EACT;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"1506dd6f3469e4801b7fd940c02682bf4ad7b098"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return ci=function(){return s},s}ci();const X6=(ci().s[0]++,"maputnik"),Uoe=(ci().s[1]++,"style"),a$=(ci().s[2]++,{latest:[X6,"latest_style"].join(":")}),oDe=(ci().s[3]++,Ooe[0].url);function l$(){return ci().f[0]++,ci().s[4]++,Toe(oDe)}function sDe(){ci().f[1]++;const n=(ci().s[5]++,[]);ci().s[6]++;for(let e=(ci().s[7]++,0);e<window.localStorage.length;e++){const t=(ci().s[8]++,window.localStorage.key(e));ci().s[9]++,Koe(t)?(ci().b[0][0]++,ci().s[10]++,n.push(aDe(t))):ci().b[0][1]++}return ci().s[11]++,n}function Koe(n){ci().f[2]++;const e=(ci().s[12]++,n.split(":"));return ci().s[13]++,ci().b[1][0]++,e.length===3&&(ci().b[1][1]++,e[0]===X6)&&(ci().b[1][2]++,e[1]===Uoe)}function aDe(n){if(ci().f[3]++,ci().s[14]++,Koe(n))ci().b[2][1]++;else throw ci().b[2][0]++,ci().s[15]++,"Key is not a valid style key";const e=(ci().s[16]++,n.split(":")),t=(ci().s[17]++,e[2]);return ci().s[18]++,t}function u$(n){return ci().f[4]++,ci().s[19]++,[X6,Uoe,n].join(":")}class lDe{mapStyles;constructor(){ci().f[5]++,ci().s[20]++,this.mapStyles=sDe()}purge(){ci().f[6]++,ci().s[21]++;for(let e=(ci().s[22]++,0);e<window.localStorage.length;e++){const t=(ci().s[23]++,window.localStorage.key(e));ci().s[24]++,t.startsWith(X6)?(ci().b[3][0]++,ci().s[25]++,window.localStorage.removeItem(t)):ci().b[3][1]++}}async getLatestStyle(){if(ci().f[7]++,ci().s[26]++,this.mapStyles.length===0)return ci().b[4][0]++,ci().s[27]++,l$();ci().b[4][1]++;const e=(ci().s[28]++,window.localStorage.getItem(a$.latest)),t=(ci().s[29]++,window.localStorage.getItem(u$(e)));return ci().s[30]++,t?(ci().b[5][0]++,ci().s[31]++,JSON.parse(t)):(ci().b[5][1]++,ci().s[32]++,l$())}save(e){ci().f[8]++,ci().s[33]++,e=xd.ensureStyleValidity(e);const t=(ci().s[34]++,u$(e.id));ci().s[35]++;const i=()=>{ci().f[9]++,ci().s[36]++,window.localStorage.setItem(t,JSON.stringify(e)),ci().s[37]++,window.localStorage.setItem(a$.latest,e.id)};ci().s[38]++;try{ci().s[39]++,i()}catch(r){if(ci().s[40]++,ci().b[7][0]++,r instanceof DOMException&&(ci().b[7][1]++,r.code===22||(ci().b[7][2]++,r.code===1014)||(ci().b[7][3]++,r.name==="QuotaExceededError")||(ci().b[7][4]++,r.name==="NS_ERROR_DOM_QUOTA_REACHED")))ci().b[6][0]++,ci().s[41]++,this.purge(),ci().s[42]++,i();else throw ci().b[6][1]++,ci().s[43]++,r}return ci().s[44]++,e}}function Ih(){var n="/home/runner/work/maputnik/maputnik/src/libs/store/style-store-factory.ts",e="2de8d55bfe17551e08818e39ce7b23b7139f970e",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/store/style-store-factory.ts",statementMap:{0:{start:{line:5,column:19},end:{line:5,column:65}},1:{start:{line:6,column:22},end:{line:6,column:118}},2:{start:{line:8,column:2},end:{line:20,column:3}},3:{start:{line:9,column:26},end:{line:11,column:6}},4:{start:{line:10,column:40},end:{line:10,column:81}},5:{start:{line:12,column:4},end:{line:17,column:5}},6:{start:{line:13,column:6},end:{line:13,column:33}},7:{start:{line:14,column:6},end:{line:14,column:33}},8:{start:{line:16,column:6},end:{line:16,column:36}},9:{start:{line:19,column:4},end:{line:19,column:34}},10:{start:{line:21,column:22},end:{line:21,column:100}},11:{start:{line:22,column:2},end:{line:22,column:66}},12:{start:{line:23,column:2},end:{line:23,column:20}}},fnMap:{0:{name:"createStyleStore",decl:{start:{line:4,column:22},end:{line:4,column:38}},loc:{start:{line:4,column:55},end:{line:24,column:1}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:10,column:26},end:{line:10,column:27}},loc:{start:{line:10,column:40},end:{line:10,column:81}},line:10}},branchMap:{0:{loc:{start:{line:6,column:22},end:{line:6,column:118}},type:"binary-expr",locations:[{start:{line:6,column:22},end:{line:6,column:30}},{start:{line:6,column:34},end:{line:6,column:118}}],line:6},1:{loc:{start:{line:8,column:2},end:{line:20,column:3}},type:"if",locations:[{start:{line:8,column:2},end:{line:20,column:3}},{start:{line:18,column:9},end:{line:20,column:3}}],line:8},2:{loc:{start:{line:21,column:22},end:{line:21,column:100}},type:"cond-expr",locations:[{start:{line:21,column:36},end:{line:21,column:64}},{start:{line:21,column:67},end:{line:21,column:100}}],line:21}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0},f:{0:0,1:0},b:{0:[0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/store/style-store-factory.ts"],names:[],mappings:"AAEA,SAAS,8CAA8C,oBAAoB;AAC3E,SAAS,qBAAqB;AAC9B,SAAS,kBAAkB;AAE3B,sBAAsB,iBAAiB,gBAA8D;AACnG,QAAM,WAAW,6CAA6C;AAC9D,QAAM,cAAc,YAAY,OAAO,QAAQ,0BAA0B,WAAW,+BAA+B;AACnH,MAAI;AACJ,MAAI,OAAoD;AACtD,UAAM,gBAAgB,IAAI,cAAc;AAAA,MACtC,oBAAoB,CAAA,aAAY,eAAe,UAAU,EAAC,MAAM,MAAK,CAAC;AAAA,IACxE,CAAC;AACD,QAAI;AACF,YAAM,cAAc,KAAK;AACzB,mBAAa;AAAA,IACf,QAAQ;AACN,mBAAa,IAAI,WAAW;AAAA,IAC9B;AAAA,EACF,OAAO;AACL,iBAAa,IAAI,WAAW;AAAA,EAC9B;AACA,QAAM,cAAc,cAAc,MAAM,aAAa,QAAQ,IAAI,MAAM,WAAW,eAAe;AACjG,iBAAe,aAAa,EAAC,aAAa,MAAM,MAAM,MAAK,CAAC;AAC5D,SAAO;AACT;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2de8d55bfe17551e08818e39ce7b23b7139f970e"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Ih=function(){return s},s}Ih();async function uDe(n){Ih().f[0]++;const e=(Ih().s[0]++,ZRe()),t=(Ih().s[1]++,Ih().b[0][0]++,e&&(Ih().b[0][1]++,window.confirm("Load style from URL: "+e+" and discard current changes?")));let i;Ih().s[2]++,Ih().b[1][1]++,Ih().s[9]++,i=new lDe;const r=(Ih().s[10]++,t?(Ih().b[2][0]++,await Toe(e)):(Ih().b[2][1]++,await i.getLatestStyle()));return Ih().s[11]++,n(r,{initialLoad:!0,save:!1}),Ih().s[12]++,i}function Na(){var n="/home/runner/work/maputnik/maputnik/src/libs/revisions.ts",e="2443d70bd38cc3b176918d5f84a8a7d35a1ef2fe",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/revisions.ts",statementMap:{0:{start:{line:5,column:4},end:{line:5,column:38}},1:{start:{line:6,column:4},end:{line:6,column:50}},2:{start:{line:9,column:4},end:{line:9,column:53}},3:{start:{line:12,column:4},end:{line:12,column:43}},4:{start:{line:15,column:4},end:{line:15,column:66}},5:{start:{line:16,column:4},end:{line:16,column:34}},6:{start:{line:17,column:4},end:{line:17,column:22}},7:{start:{line:20,column:4},end:{line:22,column:5}},8:{start:{line:21,column:6},end:{line:21,column:24}},9:{start:{line:23,column:4},end:{line:23,column:24}},10:{start:{line:26,column:4},end:{line:28,column:5}},11:{start:{line:27,column:6},end:{line:27,column:24}},12:{start:{line:29,column:4},end:{line:29,column:24}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:2},end:{line:4,column:3}},loc:{start:{line:4,column:37},end:{line:7,column:3}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:15},end:{line:10,column:3}},line:8},2:{name:"(anonymous_2)",decl:{start:{line:11,column:2},end:{line:11,column:3}},loc:{start:{line:11,column:16},end:{line:13,column:3}},line:11},3:{name:"(anonymous_3)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:24},end:{line:18,column:3}},line:14},4:{name:"(anonymous_4)",decl:{start:{line:19,column:2},end:{line:19,column:3}},loc:{start:{line:19,column:9},end:{line:24,column:3}},line:19},5:{name:"(anonymous_5)",decl:{start:{line:25,column:2},end:{line:25,column:3}},loc:{start:{line:25,column:9},end:{line:30,column:3}},line:25}},branchMap:{0:{loc:{start:{line:4,column:14},end:{line:4,column:35}},type:"default-arg",locations:[{start:{line:4,column:33},end:{line:4,column:35}}],line:4},1:{loc:{start:{line:20,column:4},end:{line:22,column:5}},type:"if",locations:[{start:{line:20,column:4},end:{line:22,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:20},2:{loc:{start:{line:26,column:4},end:{line:28,column:5}},type:"if",locations:[{start:{line:26,column:4},end:{line:28,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:26}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{0:[0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/revisions.ts"],names:[],mappings:"AAEO,aAAM,cAAc;AAAA,EACzB;AAAA,EACA;AAAA,EAGA,YAAY,mBAAiB,CAAC,GAAG;AAC/B,SAAK,YAAY;AACjB,SAAK,aAAa,iBAAiB,SAAS;AAAA,EAC9C;AAAA,EAEA,IAAI,SAAS;AACX,WAAO,KAAK,UAAU,KAAK,UAAU,SAAS,CAAC;AAAA,EACjD;AAAA,EAEA,IAAI,UAAU;AACZ,WAAO,KAAK,UAAU,KAAK,UAAU;AAAA,EACvC;AAAA,EAEA,YAAY,UAAoC;AAG9C,SAAK,YAAY,KAAK,UAAU,MAAM,GAAG,KAAK,aAAa,CAAC;AAE5D,SAAK,UAAU,KAAK,QAAQ;AAC5B,SAAK;AAAA,EAEP;AAAA,EAEA,OAAO;AACL,QAAG,KAAK,aAAa,GAAG;AACtB,WAAK;AAAA,IACP;AACA,WAAO,KAAK;AAAA,EACd;AAAA,EAEA,OAAO;AACL,QAAG,KAAK,aAAa,KAAK,UAAU,SAAS,GAAG;AAC9C,WAAK;AAAA,IACP;AACA,WAAO,KAAK;AAAA,EACd;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2443d70bd38cc3b176918d5f84a8a7d35a1ef2fe"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Na=function(){return s},s}Na();class cDe{revisions;currentIdx;constructor(e=(Na().b[0][0]++,[])){Na().f[0]++,Na().s[0]++,this.revisions=e,Na().s[1]++,this.currentIdx=e.length-1}get latest(){return Na().f[1]++,Na().s[2]++,this.revisions[this.revisions.length-1]}get current(){return Na().f[2]++,Na().s[3]++,this.revisions[this.currentIdx]}addRevision(e){Na().f[3]++,Na().s[4]++,this.revisions=this.revisions.slice(0,this.currentIdx+1),Na().s[5]++,this.revisions.push(e),Na().s[6]++,this.currentIdx++}undo(){return Na().f[4]++,Na().s[7]++,this.currentIdx>0?(Na().b[1][0]++,Na().s[8]++,this.currentIdx--):Na().b[1][1]++,Na().s[9]++,this.current}redo(){return Na().f[5]++,Na().s[10]++,this.currentIdx<this.revisions.length-1?(Na().b[2][0]++,Na().s[11]++,this.currentIdx++):Na().b[2][1]++,Na().s[12]++,this.current}}var uT,c$;function ADe(){if(c$)return uT;c$=1;var n="Expected a function",e=NaN,t="[object Symbol]",i=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,s=/^0o[0-7]+$/i,a=parseInt,c=typeof window=="object"&&window&&window.Object===Object&&window,h=typeof self=="object"&&self&&self.Object===Object&&self,m=c||h||Function("return this")(),v=Object.prototype,x=v.toString,E=Math.max,D=Math.min,P=function(){return m.Date.now()};function F(Z,G,oe){var ue,xe,me,Ie,Me,Te,je=0,Ee=!1,qe=!1,At=!0;if(typeof Z!="function")throw new TypeError(n);G=X(G)||0,q(oe)&&(Ee=!!oe.leading,qe="maxWait"in oe,me=qe?E(X(oe.maxWait)||0,G):me,At="trailing"in oe?!!oe.trailing:At);function gt(Ke){var Oe=ue,Be=xe;return ue=xe=void 0,je=Ke,Ie=Z.apply(Be,Oe),Ie}function Le(Ke){return je=Ke,Me=setTimeout(De,G),Ee?gt(Ke):Ie}function Re(Ke){var Oe=Ke-Te,Be=Ke-je,Ve=G-Oe;return qe?D(Ve,me-Be):Ve}function Ge(Ke){var Oe=Ke-Te,Be=Ke-je;return Te===void 0||Oe>=G||Oe<0||qe&&Be>=me}function De(){var Ke=P();if(Ge(Ke))return _t(Ke);Me=setTimeout(De,Re(Ke))}function _t(Ke){return Me=void 0,At&&ue?gt(Ke):(ue=xe=void 0,Ie)}function at(){Me!==void 0&&clearTimeout(Me),je=0,ue=Te=xe=Me=void 0}function Tt(){return Me===void 0?Ie:_t(P())}function Kt(){var Ke=P(),Oe=Ge(Ke);if(ue=arguments,xe=this,Te=Ke,Oe){if(Me===void 0)return Le(Te);if(qe)return Me=setTimeout(De,G),gt(Te)}return Me===void 0&&(Me=setTimeout(De,G)),Ie}return Kt.cancel=at,Kt.flush=Tt,Kt}function W(Z,G,oe){var ue=!0,xe=!0;if(typeof Z!="function")throw new TypeError(n);return q(oe)&&(ue="leading"in oe?!!oe.leading:ue,xe="trailing"in oe?!!oe.trailing:xe),F(Z,G,{leading:ue,maxWait:G,trailing:xe})}function q(Z){var G=typeof Z;return!!Z&&(G=="object"||G=="function")}function V(Z){return!!Z&&typeof Z=="object"}function H(Z){return typeof Z=="symbol"||V(Z)&&x.call(Z)==t}function X(Z){if(typeof Z=="number")return Z;if(H(Z))return e;if(q(Z)){var G=typeof Z.valueOf=="function"?Z.valueOf():Z;Z=q(G)?G+"":G}if(typeof Z!="string")return Z===0?Z:+Z;Z=Z.replace(i,"");var oe=o.test(Z);return oe||s.test(Z)?a(Z.slice(2),oe?2:8):r.test(Z)?e:+Z}return uT=W,uT}var hDe=ADe();const dDe=Ou(hDe);var n3={exports:{}};n3.exports;var A$;function fDe(){return A$||(A$=1,(function(n,e){var t=200,i="__lodash_hash_undefined__",r=1,o=2,s=9007199254740991,a="[object Arguments]",c="[object Array]",h="[object AsyncFunction]",m="[object Boolean]",v="[object Date]",x="[object Error]",E="[object Function]",D="[object GeneratorFunction]",P="[object Map]",F="[object Number]",W="[object Null]",q="[object Object]",V="[object Promise]",H="[object Proxy]",X="[object RegExp]",Z="[object Set]",G="[object String]",oe="[object Symbol]",ue="[object Undefined]",xe="[object WeakMap]",me="[object ArrayBuffer]",Ie="[object DataView]",Me="[object Float32Array]",Te="[object Float64Array]",je="[object Int8Array]",Ee="[object Int16Array]",qe="[object Int32Array]",At="[object Uint8Array]",gt="[object Uint8ClampedArray]",Le="[object Uint16Array]",Re="[object Uint32Array]",Ge=/[\\^$.*+?()[\]{}|]/g,De=/^\[object .+?Constructor\]$/,_t=/^(?:0|[1-9]\d*)$/,at={};at[Me]=at[Te]=at[je]=at[Ee]=at[qe]=at[At]=at[gt]=at[Le]=at[Re]=!0,at[a]=at[c]=at[me]=at[m]=at[Ie]=at[v]=at[x]=at[E]=at[P]=at[F]=at[q]=at[X]=at[Z]=at[G]=at[xe]=!1;var Tt=typeof window=="object"&&window&&window.Object===Object&&window,Kt=typeof self=="object"&&self&&self.Object===Object&&self,Ke=Tt||Kt||Function("return this")(),Oe=e&&!e.nodeType&&e,Be=Oe&&!0&&n&&!n.nodeType&&n,Ve=Be&&Be.exports===Oe,yt=Ve&&Tt.process,ft=(function(){try{return yt&&yt.binding&&yt.binding("util")}catch{}})(),Ct=ft&&ft.isTypedArray;function Lt(J,ye){for(var Ne=-1,St=J==null?0:J.length,fn=0,nn=[];++Ne<St;){var xi=J[Ne];ye(xi,Ne,J)&&(nn[fn++]=xi)}return nn}function kt(J,ye){for(var Ne=-1,St=ye.length,fn=J.length;++Ne<St;)J[fn+Ne]=ye[Ne];return J}function an(J,ye){for(var Ne=-1,St=J==null?0:J.length;++Ne<St;)if(ye(J[Ne],Ne,J))return!0;return!1}function Hn(J,ye){for(var Ne=-1,St=Array(J);++Ne<J;)St[Ne]=ye(Ne);return St}function Wn(J){return function(ye){return J(ye)}}function _i(J,ye){return J.has(ye)}function Ln(J,ye){return J?.[ye]}function Un(J){var ye=-1,Ne=Array(J.size);return J.forEach(function(St,fn){Ne[++ye]=[fn,St]}),Ne}function xn(J,ye){return function(Ne){return J(ye(Ne))}}function Zn(J){var ye=-1,Ne=Array(J.size);return J.forEach(function(St){Ne[++ye]=St}),Ne}var Rn=Array.prototype,Ot=Function.prototype,be=Object.prototype,ie=Ke["__core-js_shared__"],le=Ot.toString,de=be.hasOwnProperty,se=(function(){var J=/[^.]+$/.exec(ie&&ie.keys&&ie.keys.IE_PROTO||"");return J?"Symbol(src)_1."+J:""})(),Ae=be.toString,ve=RegExp("^"+le.call(de).replace(Ge,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),We=Ve?Ke.Buffer:void 0,tt=Ke.Symbol,Pe=Ke.Uint8Array,Xe=be.propertyIsEnumerable,y=Rn.splice,ot=tt?tt.toStringTag:void 0,Dt=Object.getOwnPropertySymbols,xt=We?We.isBuffer:void 0,tn=xn(Object.keys,Object),dt=Mo(Ke,"DataView"),Xn=Mo(Ke,"Map"),yi=Mo(Ke,"Promise"),Dn=Mo(Ke,"Set"),Fn=Mo(Ke,"WeakMap"),vi=Mo(Object,"create"),Zi=Co(dt),Ki=Co(Xn),Ji=Co(yi),ki=Co(Dn),Ri=Co(Fn),pr=tt?tt.prototype:void 0,rn=pr?pr.valueOf:void 0;function Li(J){var ye=-1,Ne=J==null?0:J.length;for(this.clear();++ye<Ne;){var St=J[ye];this.set(St[0],St[1])}}function $o(){this.__data__=vi?vi(null):{},this.size=0}function Ws(J){var ye=this.has(J)&&delete this.__data__[J];return this.size-=ye?1:0,ye}function Ur(J){var ye=this.__data__;if(vi){var Ne=ye[J];return Ne===i?void 0:Ne}return de.call(ye,J)?ye[J]:void 0}function pn(J){var ye=this.__data__;return vi?ye[J]!==void 0:de.call(ye,J)}function zi(J,ye){var Ne=this.__data__;return this.size+=this.has(J)?0:1,Ne[J]=vi&&ye===void 0?i:ye,this}Li.prototype.clear=$o,Li.prototype.delete=Ws,Li.prototype.get=Ur,Li.prototype.has=pn,Li.prototype.set=zi;function oi(J){var ye=-1,Ne=J==null?0:J.length;for(this.clear();++ye<Ne;){var St=J[ye];this.set(St[0],St[1])}}function wl(){this.__data__=[],this.size=0}function nA(J){var ye=this.__data__,Ne=ko(ye,J);if(Ne<0)return!1;var St=ye.length-1;return Ne==St?ye.pop():y.call(ye,Ne,1),--this.size,!0}function nu(J){var ye=this.__data__,Ne=ko(ye,J);return Ne<0?void 0:ye[Ne][1]}function qi(J){return ko(this.__data__,J)>-1}function tc(J,ye){var Ne=this.__data__,St=ko(Ne,J);return St<0?(++this.size,Ne.push([J,ye])):Ne[St][1]=ye,this}oi.prototype.clear=wl,oi.prototype.delete=nA,oi.prototype.get=nu,oi.prototype.has=qi,oi.prototype.set=tc;function no(J){var ye=-1,Ne=J==null?0:J.length;for(this.clear();++ye<Ne;){var St=J[ye];this.set(St[0],St[1])}}function Ls(){this.size=0,this.__data__={hash:new Li,map:new(Xn||oi),string:new Li}}function rl(J){var ye=Ss(this,J).delete(J);return this.size-=ye?1:0,ye}function Ya(J){return Ss(this,J).get(J)}function Io(J){return Ss(this,J).has(J)}function iA(J,ye){var Ne=Ss(this,J),St=Ne.size;return Ne.set(J,ye),this.size+=Ne.size==St?0:1,this}no.prototype.clear=Ls,no.prototype.delete=rl,no.prototype.get=Ya,no.prototype.has=Io,no.prototype.set=iA;function Uo(J){var ye=-1,Ne=J==null?0:J.length;for(this.__data__=new no;++ye<Ne;)this.add(J[ye])}function Lr(J){return this.__data__.set(J,i),this}function fa(J){return this.__data__.has(J)}Uo.prototype.add=Uo.prototype.push=Lr,Uo.prototype.has=fa;function Ho(J){var ye=this.__data__=new oi(J);this.size=ye.size}function Ko(){this.__data__=new oi,this.size=0}function Iu(J){var ye=this.__data__,Ne=ye.delete(J);return this.size=ye.size,Ne}function iu(J){return this.__data__.get(J)}function ru(J){return this.__data__.has(J)}function nc(J,ye){var Ne=this.__data__;if(Ne instanceof oi){var St=Ne.__data__;if(!Xn||St.length<t-1)return St.push([J,ye]),this.size=++Ne.size,this;Ne=this.__data__=new no(St)}return Ne.set(J,ye),this.size=Ne.size,this}Ho.prototype.clear=Ko,Ho.prototype.delete=Iu,Ho.prototype.get=iu,Ho.prototype.has=ru,Ho.prototype.set=nc;function Sl(J,ye){var Ne=go(J),St=!Ne&&is(J),fn=!Ne&&!St&&uo(J),nn=!Ne&&!St&&!fn&&ka(J),xi=Ne||St||fn||nn,Gn=xi?Hn(J.length,String):[],Ei=Gn.length;for(var li in J)de.call(J,li)&&!(xi&&(li=="length"||fn&&(li=="offset"||li=="parent")||nn&&(li=="buffer"||li=="byteLength"||li=="byteOffset")||_A(li,Ei)))&&Gn.push(li);return Gn}function ko(J,ye){for(var Ne=J.length;Ne--;)if(Ia(J[Ne][0],ye))return Ne;return-1}function ku(J,ye,Ne){var St=ye(J);return go(J)?St:kt(St,Ne(J))}function ou(J){return J==null?J===void 0?ue:W:ot&&ot in Object(J)?Va(J):Vi(J)}function ic(J){return co(J)&&ou(J)==a}function rc(J,ye,Ne,St,fn){return J===ye?!0:J==null||ye==null||!co(J)&&!co(ye)?J!==J&&ye!==ye:kc(J,ye,Ne,St,rc,fn)}function kc(J,ye,Ne,St,fn,nn){var xi=go(J),Gn=go(ye),Ei=xi?c:Qs(J),li=Gn?c:Qs(ye);Ei=Ei==a?q:Ei,li=li==a?q:li;var Ar=Ei==q,Gr=li==q,mr=Ei==li;if(mr&&uo(J)){if(!uo(ye))return!1;xi=!0,Ar=!1}if(mr&&!Ar)return nn||(nn=new Ho),xi||ka(J)?Tu(J,ye,Ne,St,fn,nn):rA(J,ye,Ei,Ne,St,fn,nn);if(!(Ne&r)){var hr=Ar&&de.call(J,"__wrapped__"),Hr=Gr&&de.call(ye,"__wrapped__");if(hr||Hr){var Ys=hr?J.value():J,Zo=Hr?ye.value():ye;return nn||(nn=new Ho),fn(Ys,Zo,Ne,St,nn)}}return mr?(nn||(nn=new Ho),Ll(J,ye,Ne,St,fn,nn)):!1}function Lh(J){if(!Es(J)||Du(J))return!1;var ye=zl(J)?ve:De;return ye.test(Co(J))}function pa(J){return co(J)&&vo(J.length)&&!!at[ou(J)]}function Tc(J){if(!Fi(J))return tn(J);var ye=[];for(var Ne in Object(J))de.call(J,Ne)&&Ne!="constructor"&&ye.push(Ne);return ye}function Tu(J,ye,Ne,St,fn,nn){var xi=Ne&r,Gn=J.length,Ei=ye.length;if(Gn!=Ei&&!(xi&&Ei>Gn))return!1;var li=nn.get(J);if(li&&nn.get(ye))return li==ye;var Ar=-1,Gr=!0,mr=Ne&o?new Uo:void 0;for(nn.set(J,ye),nn.set(ye,J);++Ar<Gn;){var hr=J[Ar],Hr=ye[Ar];if(St)var Ys=xi?St(Hr,hr,Ar,ye,J,nn):St(hr,Hr,Ar,J,ye,nn);if(Ys!==void 0){if(Ys)continue;Gr=!1;break}if(mr){if(!an(ye,function(Zo,qs){if(!_i(mr,qs)&&(hr===Zo||fn(hr,Zo,Ne,St,nn)))return mr.push(qs)})){Gr=!1;break}}else if(!(hr===Hr||fn(hr,Hr,Ne,St,nn))){Gr=!1;break}}return nn.delete(J),nn.delete(ye),Gr}function rA(J,ye,Ne,St,fn,nn,xi){switch(Ne){case Ie:if(J.byteLength!=ye.byteLength||J.byteOffset!=ye.byteOffset)return!1;J=J.buffer,ye=ye.buffer;case me:return!(J.byteLength!=ye.byteLength||!nn(new Pe(J),new Pe(ye)));case m:case v:case F:return Ia(+J,+ye);case x:return J.name==ye.name&&J.message==ye.message;case X:case G:return J==ye+"";case P:var Gn=Un;case Z:var Ei=St&r;if(Gn||(Gn=Zn),J.size!=ye.size&&!Ei)return!1;var li=xi.get(J);if(li)return li==ye;St|=o,xi.set(J,ye);var Ar=Tu(Gn(J),Gn(ye),St,fn,nn,xi);return xi.delete(J),Ar;case oe:if(rn)return rn.call(J)==rn.call(ye)}return!1}function Ll(J,ye,Ne,St,fn,nn){var xi=Ne&r,Gn=qa(J),Ei=Gn.length,li=qa(ye),Ar=li.length;if(Ei!=Ar&&!xi)return!1;for(var Gr=Ei;Gr--;){var mr=Gn[Gr];if(!(xi?mr in ye:de.call(ye,mr)))return!1}var hr=nn.get(J);if(hr&&nn.get(ye))return hr==ye;var Hr=!0;nn.set(J,ye),nn.set(ye,J);for(var Ys=xi;++Gr<Ei;){mr=Gn[Gr];var Zo=J[mr],qs=ye[mr];if(St)var su=xi?St(qs,Zo,mr,ye,J,nn):St(Zo,qs,mr,J,ye,nn);if(!(su===void 0?Zo===qs||fn(Zo,qs,Ne,St,nn):su)){Hr=!1;break}Ys||(Ys=mr=="constructor")}if(Hr&&!Ys){var Lo=J.constructor,rs=ye.constructor;Lo!=rs&&"constructor"in J&&"constructor"in ye&&!(typeof Lo=="function"&&Lo instanceof Lo&&typeof rs=="function"&&rs instanceof rs)&&(Hr=!1)}return nn.delete(J),nn.delete(ye),Hr}function qa(J){return ku(J,Ta,Ru)}function Ss(J,ye){var Ne=J.__data__;return Fl(ye)?Ne[typeof ye=="string"?"string":"hash"]:Ne.map}function Mo(J,ye){var Ne=Ln(J,ye);return Lh(Ne)?Ne:void 0}function Va(J){var ye=de.call(J,ot),Ne=J[ot];try{J[ot]=void 0;var St=!0}catch{}var fn=Ae.call(J);return St&&(ye?J[ot]=Ne:delete J[ot]),fn}var Ru=Dt?function(J){return J==null?[]:(J=Object(J),Lt(Dt(J),function(ye){return Xe.call(J,ye)}))}:Ni,Qs=ou;(dt&&Qs(new dt(new ArrayBuffer(1)))!=Ie||Xn&&Qs(new Xn)!=P||yi&&Qs(yi.resolve())!=V||Dn&&Qs(new Dn)!=Z||Fn&&Qs(new Fn)!=xe)&&(Qs=function(J){var ye=ou(J),Ne=ye==q?J.constructor:void 0,St=Ne?Co(Ne):"";if(St)switch(St){case Zi:return Ie;case Ki:return P;case Ji:return V;case ki:return Z;case Ri:return xe}return ye});function _A(J,ye){return ye=ye??s,!!ye&&(typeof J=="number"||_t.test(J))&&J>-1&&J%1==0&&J<ye}function Fl(J){var ye=typeof J;return ye=="string"||ye=="number"||ye=="symbol"||ye=="boolean"?J!=="__proto__":J===null}function Du(J){return!!se&&se in J}function Fi(J){var ye=J&&J.constructor,Ne=typeof ye=="function"&&ye.prototype||be;return J===Ne}function Vi(J){return Ae.call(J)}function Co(J){if(J!=null){try{return le.call(J)}catch{}try{return J+""}catch{}}return""}function Ia(J,ye){return J===ye||J!==J&&ye!==ye}var is=ic((function(){return arguments})())?ic:function(J){return co(J)&&de.call(J,"callee")&&!Xe.call(J,"callee")},go=Array.isArray;function ms(J){return J!=null&&vo(J.length)&&!zl(J)}var uo=xt||Fr;function yo(J,ye){return rc(J,ye)}function zl(J){if(!Es(J))return!1;var ye=ou(J);return ye==E||ye==D||ye==h||ye==H}function vo(J){return typeof J=="number"&&J>-1&&J%1==0&&J<=s}function Es(J){var ye=typeof J;return J!=null&&(ye=="object"||ye=="function")}function co(J){return J!=null&&typeof J=="object"}var ka=Ct?Wn(Ct):pa;function Ta(J){return ms(J)?Sl(J):Tc(J)}function Ni(){return[]}function Fr(){return!1}n.exports=yo})(n3,n3.exports)),n3.exports}var pDe=fDe();const ZR=Ou(pDe);function ar(){var n="/home/runner/work/maputnik/maputnik/src/libs/layerwatcher.ts",e="f697c030ede0efa960b33f85ca9652efe882c805",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/layerwatcher.ts",statementMap:{0:{start:{line:10,column:4},end:{line:11,column:7}},1:{start:{line:12,column:4},end:{line:13,column:7}},2:{start:{line:14,column:4},end:{line:14,column:23}},3:{start:{line:15,column:4},end:{line:15,column:28}},4:{start:{line:16,column:4},end:{line:16,column:90}},5:{start:{line:19,column:28},end:{line:19,column:48}},6:{start:{line:20,column:4},end:{line:22,column:5}},7:{start:{line:21,column:6},end:{line:21,column:88}},8:{start:{line:24,column:4},end:{line:26,column:5}},9:{start:{line:25,column:6},end:{line:25,column:42}},10:{start:{line:27,column:4},end:{line:27,column:48}},11:{start:{line:30,column:33},end:{line:30,column:58}},12:{start:{line:31,column:4},end:{line:44,column:7}},13:{start:{line:32,column:6},end:{line:43,column:9}},14:{start:{line:33,column:32},end:{line:33,column:71}},15:{start:{line:34,column:23},end:{line:34,column:53}},16:{start:{line:35,column:8},end:{line:41,column:11}},17:{start:{line:36,column:10},end:{line:40,column:13}},18:{start:{line:37,column:40},end:{line:37,column:75}},19:{start:{line:38,column:12},end:{line:38,column:71}},20:{start:{line:39,column:12},end:{line:39,column:64}},21:{start:{line:42,column:8},end:{line:42,column:60}},22:{start:{line:45,column:4},end:{line:47,column:5}},23:{start:{line:46,column:6},end:{line:46,column:52}},24:{start:{line:51,column:4},end:{line:51,column:25}},25:{start:{line:54,column:4},end:{line:54,column:30}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:2},end:{line:9,column:3}},loc:{start:{line:9,column:25},end:{line:17,column:3}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:10,column:52},end:{line:10,column:53}},loc:{start:{line:10,column:58},end:{line:11,column:5}},line:10},2:{name:"(anonymous_2)",decl:{start:{line:12,column:62},end:{line:12,column:63}},loc:{start:{line:12,column:68},end:{line:13,column:5}},line:12},3:{name:"(anonymous_3)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:18},end:{line:28,column:3}},line:18},4:{name:"(anonymous_4)",decl:{start:{line:29,column:2},end:{line:29,column:3}},loc:{start:{line:29,column:32},end:{line:48,column:3}},line:29},5:{name:"(anonymous_5)",decl:{start:{line:31,column:39},end:{line:31,column:40}},loc:{start:{line:31,column:53},end:{line:44,column:5}},line:31},6:{name:"(anonymous_6)",decl:{start:{line:32,column:46},end:{line:32,column:47}},loc:{start:{line:32,column:65},end:{line:43,column:7}},line:32},7:{name:"(anonymous_7)",decl:{start:{line:35,column:58},end:{line:35,column:59}},loc:{start:{line:35,column:71},end:{line:41,column:9}},line:35},8:{name:"(anonymous_8)",decl:{start:{line:36,column:50},end:{line:36,column:51}},loc:{start:{line:36,column:68},end:{line:40,column:11}},line:36},9:{name:"(anonymous_9)",decl:{start:{line:50,column:2},end:{line:50,column:3}},loc:{start:{line:50,column:16},end:{line:52,column:3}},line:50},10:{name:"(anonymous_10)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:21},end:{line:55,column:3}},line:53}},branchMap:{0:{loc:{start:{line:9,column:14},end:{line:9,column:23}},type:"default-arg",locations:[{start:{line:9,column:21},end:{line:9,column:23}}],line:9},1:{loc:{start:{line:10,column:27},end:{line:11,column:6}},type:"binary-expr",locations:[{start:{line:10,column:27},end:{line:10,column:47}},{start:{line:10,column:52},end:{line:11,column:5}}],line:10},2:{loc:{start:{line:12,column:32},end:{line:13,column:6}},type:"binary-expr",locations:[{start:{line:12,column:32},end:{line:12,column:57}},{start:{line:12,column:62},end:{line:13,column:5}}],line:12},3:{loc:{start:{line:24,column:4},end:{line:26,column:5}},type:"if",locations:[{start:{line:24,column:4},end:{line:26,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:24},4:{loc:{start:{line:32,column:7},end:{line:32,column:36}},type:"binary-expr",locations:[{start:{line:32,column:7},end:{line:32,column:30}},{start:{line:32,column:34},end:{line:32,column:36}}],line:32},5:{loc:{start:{line:33,column:32},end:{line:33,column:71}},type:"binary-expr",locations:[{start:{line:33,column:32},end:{line:33,column:65}},{start:{line:33,column:69},end:{line:33,column:71}}],line:33},6:{loc:{start:{line:37,column:40},end:{line:37,column:75}},type:"binary-expr",locations:[{start:{line:37,column:40},end:{line:37,column:69}},{start:{line:37,column:73},end:{line:37,column:75}}],line:37},7:{loc:{start:{line:45,column:4},end:{line:47,column:5}},type:"if",locations:[{start:{line:45,column:4},end:{line:47,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:45}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0},b:{0:[0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/layerwatcher.ts"],names:[],mappings:"AAAA,OAAO,cAAc;AACrB,OAAO,aAAa;AAUpB,qBAAqB,aAAa;AAAA,EAChC;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EAEA,YAAY,OAA4B,CAAC,GAAG;AAC1C,SAAK,kBAAkB,KAAK,oBAAoB,MAAM;AAAA,IAAC;AACvD,SAAK,uBAAuB,KAAK,yBAAyB,MAAM;AAAA,IAAC;AAEjE,SAAK,WAAW,CAAC;AACjB,SAAK,gBAAgB,CAAC;AAKtB,SAAK,oCAAoC,SAAS,KAAK,0BAA0B,GAAI;AAAA,EACvF;AAAA,EAEA,WAAW,KAAU;AACnB,UAAM,kBAAkB,EAAE,GAAG,KAAK,SAAS;AAE3C,eAAW,YAAY,OAAO,KAAK,IAAI,MAAM,YAAY,GAAG;AAG1D,WAAK,SAAS,QAAQ,IAAI,IAAI,MAAM,aAAa,QAAQ,EAAE,QAAQ;AAAA,IACrE;AAAC;AAED,QAAG,CAAC,QAAQ,iBAAiB,KAAK,QAAQ,GAAG;AAC3C,WAAK,gBAAgB,KAAK,QAAQ;AAAA,IACpC;AAEA,SAAK,kCAAkC,GAAG;AAAA,EAC5C;AAAA,EAEA,yBAAyB,KAAU;AACjC,UAAM,uBAAuB,EAAE,GAAG,KAAK,cAAc;AAErD,WAAO,KAAK,KAAK,QAAQ,EAAE,QAAQ,cAAY;AAC7C,OAAC,KAAK,SAAS,QAAQ,KAAK,CAAC,GAAG,QAAQ,mBAAiB;AACvD,cAAM,kBAAkB,KAAK,cAAc,aAAa,KAAK,CAAC;AAC9D,cAAM,SAAS,EAAE,aAAa,cAAc;AAC5C,YAAI,oBAAoB,UAAU,MAAa,EAAE,QAAQ,aAAW;AAClE,iBAAO,KAAK,QAAQ,UAAU,EAAE,QAAQ,kBAAgB;AACtD,kBAAM,sBAAsB,gBAAgB,YAAY,KAAK,CAAC;AAC9D,gCAAoB,QAAQ,WAAW,YAAY,CAAC,IAAI,CAAC;AACzD,4BAAgB,YAAY,IAAI;AAAA,UAClC,CAAC;AAAA,QACH,CAAC;AAED,aAAK,cAAc,aAAa,IAAI;AAAA,MACtC,CAAC;AAAA,IACH,CAAC;AAED,QAAG,CAAC,QAAQ,sBAAsB,KAAK,aAAa,GAAG;AACrD,WAAK,qBAAqB,KAAK,aAAa;AAAA,IAC9C;AAAA,EAEF;AAAA;AAAA,EAGA,IAAI,UAAU;AACZ,WAAO,KAAK;AAAA,EACd;AAAA,EAEA,IAAI,eAAe;AACjB,WAAO,KAAK;AAAA,EACd;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f697c030ede0efa960b33f85ca9652efe882c805"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return ar=function(){return s},s}ar();class mDe{onSourcesChange;onVectorLayersChange;throttledAnalyzeVectorLayerFields;_sources;_vectorLayers;constructor(e=(ar().b[0][0]++,{})){ar().f[0]++,ar().s[0]++,this.onSourcesChange=(ar().b[1][0]++,e.onSourcesChange||(ar().b[1][1]++,()=>{ar().f[1]++})),ar().s[1]++,this.onVectorLayersChange=(ar().b[2][0]++,e.onVectorLayersChange||(ar().b[2][1]++,()=>{ar().f[2]++})),ar().s[2]++,this._sources={},ar().s[3]++,this._vectorLayers={},ar().s[4]++,this.throttledAnalyzeVectorLayerFields=dDe(this.analyzeVectorLayerFields,5e3)}analyzeMap(e){ar().f[3]++;const t=(ar().s[5]++,{...this._sources});ar().s[6]++;for(const i of Object.keys(e.style.tileManagers))ar().s[7]++,this._sources[i]=e.style.tileManagers[i]._source.vectorLayerIds;ar().s[8]++,ZR(t,this._sources)?ar().b[3][1]++:(ar().b[3][0]++,ar().s[9]++,this.onSourcesChange(this._sources)),ar().s[10]++,this.throttledAnalyzeVectorLayerFields(e)}analyzeVectorLayerFields(e){ar().f[4]++;const t=(ar().s[11]++,{...this._vectorLayers});ar().s[12]++,Object.keys(this._sources).forEach(i=>{ar().f[5]++,ar().s[13]++,(ar().b[4][0]++,this._sources[i]||(ar().b[4][1]++,[])).forEach(r=>{ar().f[6]++;const o=(ar().s[14]++,ar().b[5][0]++,this._vectorLayers[r]||(ar().b[5][1]++,{})),s=(ar().s[15]++,{sourceLayer:r});ar().s[16]++,e.querySourceFeatures(i,s).forEach(a=>{ar().f[7]++,ar().s[17]++,Object.keys(a.properties).forEach(c=>{ar().f[8]++;const h=(ar().s[18]++,ar().b[6][0]++,o[c]||(ar().b[6][1]++,{}));ar().s[19]++,h[a.properties[c]]={},ar().s[20]++,o[c]=h})}),ar().s[21]++,this._vectorLayers[r]=o})}),ar().s[22]++,ZR(t,this._vectorLayers)?ar().b[7][1]++:(ar().b[7][0]++,ar().s[23]++,this.onVectorLayersChange(this._vectorLayers))}get sources(){return ar().f[9]++,ar().s[24]++,this._sources}get vectorLayers(){return ar().f[10]++,ar().s[25]++,this._vectorLayers}}function fe(){var n="/home/runner/work/maputnik/maputnik/src/components/App.tsx",e="8a07c2afbabbb0ad6515959638246d740e8d9d6d",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/App.tsx",statementMap:{0:{start:{line:36,column:0},end:{line:36,column:30}},1:{start:{line:38,column:29},end:{line:38,column:60}},2:{start:{line:39,column:26},end:{line:39,column:54}},3:{start:{line:40,column:31},end:{line:40,column:64}},4:{start:{line:41,column:28},end:{line:41,column:58}},5:{start:{line:42,column:2},end:{line:59,column:3}},6:{start:{line:43,column:24},end:{line:43,column:95}},7:{start:{line:44,column:4},end:{line:46,column:5}},8:{start:{line:45,column:6},end:{line:45,column:47}},9:{start:{line:47,column:9},end:{line:59,column:3}},10:{start:{line:48,column:24},end:{line:48,column:96}},11:{start:{line:49,column:4},end:{line:51,column:5}},12:{start:{line:50,column:6},end:{line:50,column:47}},13:{start:{line:52,column:9},end:{line:59,column:3}},14:{start:{line:53,column:24},end:{line:53,column:93}},15:{start:{line:54,column:4},end:{line:56,column:5}},16:{start:{line:55,column:6},end:{line:55,column:47}},17:{start:{line:58,column:4},end:{line:58,column:15}},18:{start:{line:62,column:2},end:{line:71,column:4}},19:{start:{line:75,column:15},end:{line:75,column:19}},20:{start:{line:78,column:4},end:{line:78,column:17}},21:{start:{line:79,column:4},end:{line:79,column:45}},22:{start:{line:80,column:4},end:{line:80,column:38}},23:{start:{line:81,column:4},end:{line:116,column:6}},24:{start:{line:117,column:4},end:{line:119,column:7}},25:{start:{line:118,column:35},end:{line:118,column:69}},26:{start:{line:121,column:31},end:{line:194,column:3}},27:{start:{line:122,column:22},end:{line:179,column:5}},28:{start:{line:126,column:10},end:{line:126,column:40}},29:{start:{line:132,column:10},end:{line:132,column:35}},30:{start:{line:138,column:10},end:{line:138,column:37}},31:{start:{line:144,column:10},end:{line:144,column:38}},32:{start:{line:150,column:10},end:{line:150,column:39}},33:{start:{line:156,column:10},end:{line:156,column:42}},34:{start:{line:162,column:10},end:{line:164,column:12}},35:{start:{line:170,column:10},end:{line:170,column:63}},36:{start:{line:176,column:10},end:{line:176,column:36}},37:{start:{line:180,column:4},end:{line:193,column:7}},38:{start:{line:181,column:6},end:{line:192,column:7}},39:{start:{line:182,column:8},end:{line:182,column:24}},40:{start:{line:183,column:8},end:{line:183,column:30}},41:{start:{line:184,column:13},end:{line:192,column:7}},42:{start:{line:185,column:25},end:{line:187,column:10}},43:{start:{line:186,column:10},end:{line:186,column:41}},44:{start:{line:188,column:8},end:{line:191,column:9}},45:{start:{line:189,column:10},end:{line:189,column:44}},46:{start:{line:190,column:10},end:{line:190,column:29}},47:{start:{line:195,column:19},end:{line:213,column:3}},48:{start:{line:196,column:4},end:{line:212,column:5}},49:{start:{line:197,column:6},end:{line:203,column:7}},50:{start:{line:198,column:8},end:{line:198,column:27}},51:{start:{line:199,column:8},end:{line:199,column:22}},52:{start:{line:200,column:13},end:{line:203,column:7}},53:{start:{line:201,column:8},end:{line:201,column:27}},54:{start:{line:202,column:8},end:{line:202,column:22}},55:{start:{line:205,column:6},end:{line:211,column:7}},56:{start:{line:206,column:8},end:{line:206,column:27}},57:{start:{line:207,column:8},end:{line:207,column:22}},58:{start:{line:208,column:13},end:{line:211,column:7}},59:{start:{line:209,column:8},end:{line:209,column:27}},60:{start:{line:210,column:8},end:{line:210,column:22}},61:{start:{line:215,column:4},end:{line:215,column:102}},62:{start:{line:215,column:65},end:{line:215,column:100}},63:{start:{line:216,column:4},end:{line:216,column:60}},64:{start:{line:219,column:4},end:{line:219,column:63}},65:{start:{line:222,column:4},end:{line:222,column:41}},66:{start:{line:225,column:21},end:{line:225,column:55}},67:{start:{line:226,column:24},end:{line:226,column:93}},68:{start:{line:227,column:21},end:{line:227,column:110}},69:{start:{line:228,column:4},end:{line:230,column:7}},70:{start:{line:229,column:6},end:{line:229,column:80}},71:{start:{line:233,column:4},end:{line:235,column:7}},72:{start:{line:234,column:6},end:{line:234,column:80}},73:{start:{line:237,column:29},end:{line:251,column:3}},74:{start:{line:238,column:4},end:{line:242,column:5}},75:{start:{line:239,column:6},end:{line:241,column:9}},76:{start:{line:243,column:25},end:{line:249,column:5}},77:{start:{line:250,column:4},end:{line:250,column:38}},78:{start:{line:252,column:19},end:{line:375,column:3}},79:{start:{line:253,column:4},end:{line:258,column:6}},80:{start:{line:259,column:4},end:{line:261,column:5}},81:{start:{line:260,column:6},end:{line:260,column:71}},82:{start:{line:262,column:4},end:{line:264,column:5}},83:{start:{line:263,column:6},end:{line:263,column:71}},84:{start:{line:265,column:4},end:{line:269,column:5}},85:{start:{line:266,column:6},end:{line:268,column:7}},86:{start:{line:267,column:8},end:{line:267,column:63}},87:{start:{line:270,column:4},end:{line:272,column:5}},88:{start:{line:271,column:6},end:{line:271,column:44}},89:{start:{line:273,column:19},end:{line:273,column:51}},90:{start:{line:274,column:24},end:{line:274,column:26}},91:{start:{line:275,column:4},end:{line:286,column:5}},92:{start:{line:276,column:26},end:{line:276,column:42}},93:{start:{line:277,column:6},end:{line:285,column:9}},94:{start:{line:278,column:8},end:{line:283,column:9}},95:{start:{line:279,column:24},end:{line:281,column:11}},96:{start:{line:282,column:10},end:{line:282,column:34}},97:{start:{line:284,column:8},end:{line:284,column:40}},98:{start:{line:287,column:25},end:{line:338,column:6}},99:{start:{line:288,column:23},end:{line:288,column:109}},100:{start:{line:289,column:6},end:{line:302,column:7}},101:{start:{line:290,column:35},end:{line:290,column:43}},102:{start:{line:291,column:8},end:{line:301,column:10}},103:{start:{line:303,column:33},end:{line:303,column:100}},104:{start:{line:304,column:6},end:{line:317,column:7}},105:{start:{line:305,column:35},end:{line:305,column:53}},106:{start:{line:306,column:8},end:{line:316,column:10}},107:{start:{line:318,column:25},end:{line:318,column:88}},108:{start:{line:319,column:6},end:{line:337,column:7}},109:{start:{line:320,column:52},end:{line:320,column:62}},110:{start:{line:321,column:20},end:{line:321,column:78}},111:{start:{line:322,column:8},end:{line:332,column:10}},112:{start:{line:334,column:8},end:{line:336,column:10}},113:{start:{line:339,column:24},end:{line:339,column:30}},114:{start:{line:340,column:4},end:{line:354,column:5}},115:{start:{line:341,column:6},end:{line:341,column:42}},116:{start:{line:342,column:6},end:{line:353,column:7}},117:{start:{line:343,column:28},end:{line:343,column:33}},118:{start:{line:344,column:8},end:{line:352,column:9}},119:{start:{line:345,column:10},end:{line:351,column:11}},120:{start:{line:346,column:28},end:{line:346,column:49}},121:{start:{line:347,column:30},end:{line:347,column:69}},122:{start:{line:348,column:12},end:{line:348,column:44}},123:{start:{line:350,column:12},end:{line:350,column:46}},124:{start:{line:355,column:4},end:{line:357,column:5}},125:{start:{line:356,column:6},end:{line:356,column:40}},126:{start:{line:358,column:4},end:{line:360,column:5}},127:{start:{line:359,column:6},end:{line:359,column:40}},128:{start:{line:361,column:4},end:{line:363,column:5}},129:{start:{line:362,column:6},end:{line:362,column:47}},130:{start:{line:364,column:4},end:{line:366,column:5}},131:{start:{line:365,column:6},end:{line:365,column:31}},132:{start:{line:367,column:4},end:{line:374,column:7}},133:{start:{line:372,column:6},end:{line:372,column:26}},134:{start:{line:373,column:6},end:{line:373,column:27}},135:{start:{line:376,column:11},end:{line:383,column:3}},136:{start:{line:377,column:24},end:{line:377,column:49}},137:{start:{line:378,column:21},end:{line:378,column:67}},138:{start:{line:379,column:4},end:{line:379,column:61}},139:{start:{line:380,column:4},end:{line:382,column:7}},140:{start:{line:384,column:11},end:{line:391,column:3}},141:{start:{line:385,column:24},end:{line:385,column:49}},142:{start:{line:386,column:21},end:{line:386,column:67}},143:{start:{line:387,column:4},end:{line:387,column:61}},144:{start:{line:388,column:4},end:{line:390,column:7}},145:{start:{line:392,column:16},end:{line:406,column:3}},146:{start:{line:393,column:33},end:{line:393,column:37}},147:{start:{line:394,column:17},end:{line:394,column:43}},148:{start:{line:395,column:4},end:{line:395,column:53}},149:{start:{line:396,column:4},end:{line:396,column:53}},150:{start:{line:397,column:4},end:{line:397,column:38}},151:{start:{line:397,column:31},end:{line:397,column:38}},152:{start:{line:398,column:4},end:{line:402,column:5}},153:{start:{line:399,column:6},end:{line:401,column:9}},154:{start:{line:403,column:4},end:{line:403,column:29}},155:{start:{line:404,column:4},end:{line:404,column:49}},156:{start:{line:405,column:4},end:{line:405,column:32}},157:{start:{line:407,column:19},end:{line:413,column:3}},158:{start:{line:408,column:25},end:{line:411,column:5}},159:{start:{line:412,column:4},end:{line:412,column:38}},160:{start:{line:414,column:19},end:{line:419,column:3}},161:{start:{line:415,column:19},end:{line:415,column:45}},162:{start:{line:416,column:28},end:{line:416,column:43}},163:{start:{line:417,column:4},end:{line:417,column:37}},164:{start:{line:418,column:4},end:{line:418,column:41}},165:{start:{line:420,column:16},end:{line:427,column:3}},166:{start:{line:421,column:19},end:{line:421,column:45}},167:{start:{line:422,column:26},end:{line:422,column:41}},168:{start:{line:423,column:24},end:{line:423,column:55}},169:{start:{line:424,column:4},end:{line:424,column:46}},170:{start:{line:425,column:4},end:{line:425,column:48}},171:{start:{line:426,column:4},end:{line:426,column:39}},172:{start:{line:428,column:28},end:{line:437,column:3}},173:{start:{line:429,column:19},end:{line:429,column:45}},174:{start:{line:430,column:26},end:{line:430,column:41}},175:{start:{line:431,column:18},end:{line:431,column:45}},176:{start:{line:432,column:26},end:{line:432,column:70}},177:{start:{line:433,column:4},end:{line:433,column:88}},178:{start:{line:434,column:4},end:{line:434,column:33}},179:{start:{line:435,column:4},end:{line:435,column:33}},180:{start:{line:436,column:4},end:{line:436,column:39}},181:{start:{line:438,column:20},end:{line:445,column:3}},182:{start:{line:439,column:26},end:{line:439,column:61}},183:{start:{line:440,column:4},end:{line:443,column:6}},184:{start:{line:444,column:4},end:{line:444,column:39}},185:{start:{line:446,column:19},end:{line:450,column:3}},186:{start:{line:447,column:26},end:{line:447,column:61}},187:{start:{line:448,column:4},end:{line:448,column:33}},188:{start:{line:449,column:4},end:{line:449,column:39}},189:{start:{line:451,column:16},end:{line:455,column:3}},190:{start:{line:452,column:4},end:{line:454,column:27}},191:{start:{line:456,column:21},end:{line:470,column:3}},192:{start:{line:457,column:21},end:{line:457,column:44}},193:{start:{line:458,column:4},end:{line:469,column:5}},194:{start:{line:459,column:27},end:{line:465,column:7}},195:{start:{line:466,column:6},end:{line:466,column:26}},196:{start:{line:468,column:6},end:{line:468,column:22}},197:{start:{line:471,column:14},end:{line:475,column:3}},198:{start:{line:472,column:4},end:{line:472,column:34}},199:{start:{line:473,column:4},end:{line:473,column:47}},200:{start:{line:474,column:4},end:{line:474,column:34}},201:{start:{line:477,column:23},end:{line:477,column:25}},202:{start:{line:478,column:4},end:{line:517,column:5}},203:{start:{line:479,column:21},end:{line:479,column:53}},204:{start:{line:480,column:6},end:{line:516,column:7}},205:{start:{line:481,column:8},end:{line:481,column:93}},206:{start:{line:482,column:8},end:{line:484,column:9}},207:{start:{line:483,column:10},end:{line:483,column:38}},208:{start:{line:486,column:8},end:{line:489,column:10}},209:{start:{line:490,column:18},end:{line:490,column:28}},210:{start:{line:491,column:8},end:{line:495,column:9}},211:{start:{line:492,column:10},end:{line:492,column:62}},212:{start:{line:494,column:10},end:{line:494,column:63}},213:{start:{line:496,column:32},end:{line:503,column:9}},214:{start:{line:497,column:10},end:{line:499,column:11}},215:{start:{line:498,column:12},end:{line:498,column:19}},216:{start:{line:500,column:10},end:{line:502,column:11}},217:{start:{line:501,column:12},end:{line:501,column:50}},218:{start:{line:504,column:8},end:{line:515,column:9}},219:{start:{line:505,column:10},end:{line:512,column:11}},220:{start:{line:506,column:25},end:{line:506,column:77}},221:{start:{line:507,column:12},end:{line:507,column:34}},222:{start:{line:509,column:29},end:{line:509,column:63}},223:{start:{line:510,column:25},end:{line:510,column:46}},224:{start:{line:511,column:12},end:{line:511,column:34}},225:{start:{line:514,column:10},end:{line:514,column:78}},226:{start:{line:518,column:4},end:{line:523,column:5}},227:{start:{line:519,column:6},end:{line:519,column:51}},228:{start:{line:520,column:6},end:{line:522,column:9}},229:{start:{line:526,column:21},end:{line:526,column:55}},230:{start:{line:527,column:4},end:{line:527,column:53}},231:{start:{line:529,column:16},end:{line:533,column:3}},232:{start:{line:530,column:4},end:{line:532,column:7}},233:{start:{line:535,column:40},end:{line:535,column:50}},234:{start:{line:536,column:21},end:{line:547,column:5}},235:{start:{line:539,column:8},end:{line:541,column:11}},236:{start:{line:544,column:8},end:{line:544,column:44}},237:{start:{line:545,column:8},end:{line:545,column:28}},238:{start:{line:548,column:21},end:{line:548,column:40}},239:{start:{line:550,column:4},end:{line:572,column:5}},240:{start:{line:551,column:6},end:{line:559,column:8}},241:{start:{line:557,column:38},end:{line:557,column:66}},242:{start:{line:561,column:6},end:{line:571,column:8}},243:{start:{line:574,column:4},end:{line:576,column:5}},244:{start:{line:575,column:6},end:{line:575,column:63}},245:{start:{line:577,column:25},end:{line:577,column:27}},246:{start:{line:578,column:4},end:{line:580,column:5}},247:{start:{line:579,column:6},end:{line:579,column:52}},248:{start:{line:581,column:4},end:{line:581,column:160}},249:{start:{line:583,column:18},end:{line:601,column:3}},250:{start:{line:584,column:43},end:{line:584,column:53}},251:{start:{line:585,column:35},end:{line:585,column:45}},252:{start:{line:586,column:16},end:{line:586,column:38}},253:{start:{line:587,column:20},end:{line:587,column:50}},254:{start:{line:588,column:4},end:{line:588,column:70}},255:{start:{line:589,column:23},end:{line:589,column:122}},256:{start:{line:589,column:66},end:{line:589,column:91}},257:{start:{line:589,column:109},end:{line:589,column:121}},258:{start:{line:590,column:4},end:{line:594,column:5}},259:{start:{line:591,column:6},end:{line:591,column:58}},260:{start:{line:593,column:6},end:{line:593,column:39}},261:{start:{line:595,column:4},end:{line:599,column:5}},262:{start:{line:596,column:6},end:{line:596,column:38}},263:{start:{line:597,column:11},end:{line:599,column:5}},264:{start:{line:598,column:6},end:{line:598,column:46}},265:{start:{line:600,column:4},end:{line:600,column:71}},266:{start:{line:602,column:27},end:{line:647,column:3}},267:{start:{line:603,column:16},end:{line:603,column:38}},268:{start:{line:604,column:23},end:{line:604,column:52}},269:{start:{line:605,column:4},end:{line:617,column:5}},270:{start:{line:606,column:21},end:{line:606,column:42}},271:{start:{line:607,column:23},end:{line:607,column:25}},272:{start:{line:608,column:6},end:{line:610,column:9}},273:{start:{line:609,column:8},end:{line:609,column:35}},274:{start:{line:611,column:6},end:{line:616,column:9}},275:{start:{line:618,column:17},end:{line:618,column:45}},276:{start:{line:619,column:4},end:{line:621,column:5}},277:{start:{line:620,column:6},end:{line:620,column:29}},278:{start:{line:622,column:17},end:{line:622,column:46}},279:{start:{line:623,column:4},end:{line:646,column:5}},280:{start:{line:624,column:6},end:{line:645,column:7}},281:{start:{line:625,column:22},end:{line:625,column:37}},282:{start:{line:626,column:46},end:{line:629,column:9}},283:{start:{line:630,column:20},end:{line:630,column:24}},284:{start:{line:631,column:8},end:{line:636,column:9}},285:{start:{line:632,column:33},end:{line:632,column:63}},286:{start:{line:633,column:10},end:{line:635,column:11}},287:{start:{line:634,column:12},end:{line:634,column:26}},288:{start:{line:637,column:8},end:{line:642,column:9}},289:{start:{line:638,column:10},end:{line:641,column:13}},290:{start:{line:644,column:8},end:{line:644,column:26}},291:{start:{line:648,column:18},end:{line:653,column:3}},292:{start:{line:649,column:4},end:{line:652,column:27}},293:{start:{line:655,column:4},end:{line:660,column:27}},294:{start:{line:663,column:4},end:{line:663,column:60}},295:{start:{line:665,column:20},end:{line:667,column:3}},296:{start:{line:666,column:4},end:{line:666,column:34}},297:{start:{line:668,column:28},end:{line:675,column:3}},298:{start:{line:669,column:4},end:{line:674,column:7}},299:{start:{line:676,column:28},end:{line:683,column:3}},300:{start:{line:677,column:4},end:{line:682,column:7}},301:{start:{line:685,column:19},end:{line:685,column:51}},302:{start:{line:686,column:26},end:{line:686,column:92}},303:{start:{line:687,column:36},end:{line:700,column:5}},304:{start:{line:698,column:34},end:{line:698,column:57}},305:{start:{line:701,column:23},end:{line:708,column:14}},306:{start:{line:705,column:30},end:{line:705,column:57}},307:{start:{line:706,column:23},end:{line:706,column:57}},308:{start:{line:709,column:38},end:{line:723,column:5}},309:{start:{line:724,column:24},end:{line:743,column:14}},310:{start:{line:744,column:24},end:{line:754,column:14}},311:{start:{line:755,column:35},end:{line:824,column:8}},312:{start:{line:765,column:30},end:{line:765,column:55}},313:{start:{line:773,column:30},end:{line:773,column:59}},314:{start:{line:783,column:30},end:{line:783,column:58}},315:{start:{line:792,column:30},end:{line:792,column:56}},316:{start:{line:802,column:30},end:{line:802,column:54}},317:{start:{line:812,column:30},end:{line:812,column:57}},318:{start:{line:821,column:30},end:{line:821,column:61}},319:{start:{line:825,column:4},end:{line:836,column:6}}},fnMap:{0:{name:"setFetchAccessToken",decl:{start:{line:37,column:9},end:{line:37,column:28}},loc:{start:{line:37,column:44},end:{line:60,column:1}},line:37},1:{name:"updateRootSpec",decl:{start:{line:61,column:9},end:{line:61,column:23}},loc:{start:{line:61,column:52},end:{line:72,column:1}},line:61},2:{name:"(anonymous_2)",decl:{start:{line:77,column:2},end:{line:77,column:3}},loc:{start:{line:77,column:21},end:{line:120,column:3}},line:77},3:{name:"(anonymous_3)",decl:{start:{line:118,column:28},end:{line:118,column:29}},loc:{start:{line:118,column:35},end:{line:118,column:69}},line:118},4:{name:"(anonymous_4)",decl:{start:{line:121,column:31},end:{line:121,column:32}},loc:{start:{line:121,column:37},end:{line:194,column:3}},line:121},5:{name:"(anonymous_5)",decl:{start:{line:125,column:17},end:{line:125,column:18}},loc:{start:{line:125,column:23},end:{line:127,column:9}},line:125},6:{name:"(anonymous_6)",decl:{start:{line:131,column:17},end:{line:131,column:18}},loc:{start:{line:131,column:23},end:{line:133,column:9}},line:131},7:{name:"(anonymous_7)",decl:{start:{line:137,column:17},end:{line:137,column:18}},loc:{start:{line:137,column:23},end:{line:139,column:9}},line:137},8:{name:"(anonymous_8)",decl:{start:{line:143,column:17},end:{line:143,column:18}},loc:{start:{line:143,column:23},end:{line:145,column:9}},line:143},9:{name:"(anonymous_9)",decl:{start:{line:149,column:17},end:{line:149,column:18}},loc:{start:{line:149,column:23},end:{line:151,column:9}},line:149},10:{name:"(anonymous_10)",decl:{start:{line:155,column:17},end:{line:155,column:18}},loc:{start:{line:155,column:23},end:{line:157,column:9}},line:155},11:{name:"(anonymous_11)",decl:{start:{line:161,column:17},end:{line:161,column:18}},loc:{start:{line:161,column:23},end:{line:165,column:9}},line:161},12:{name:"(anonymous_12)",decl:{start:{line:169,column:17},end:{line:169,column:18}},loc:{start:{line:169,column:23},end:{line:171,column:9}},line:169},13:{name:"(anonymous_13)",decl:{start:{line:175,column:17},end:{line:175,column:18}},loc:{start:{line:175,column:23},end:{line:177,column:9}},line:175},14:{name:"(anonymous_14)",decl:{start:{line:180,column:44},end:{line:180,column:45}},loc:{start:{line:180,column:51},end:{line:193,column:5}},line:180},15:{name:"(anonymous_15)",decl:{start:{line:185,column:40},end:{line:185,column:41}},loc:{start:{line:185,column:55},end:{line:187,column:9}},line:185},16:{name:"(anonymous_16)",decl:{start:{line:195,column:19},end:{line:195,column:20}},loc:{start:{line:195,column:26},end:{line:213,column:3}},line:195},17:{name:"(anonymous_17)",decl:{start:{line:214,column:2},end:{line:214,column:3}},loc:{start:{line:214,column:28},end:{line:217,column:3}},line:214},18:{name:"(anonymous_18)",decl:{start:{line:215,column:45},end:{line:215,column:46}},loc:{start:{line:215,column:65},end:{line:215,column:100}},line:215},19:{name:"(anonymous_19)",decl:{start:{line:218,column:2},end:{line:218,column:3}},loc:{start:{line:218,column:25},end:{line:220,column:3}},line:218},20:{name:"(anonymous_20)",decl:{start:{line:221,column:2},end:{line:221,column:3}},loc:{start:{line:221,column:27},end:{line:223,column:3}},line:221},21:{name:"(anonymous_21)",decl:{start:{line:224,column:2},end:{line:224,column:3}},loc:{start:{line:224,column:27},end:{line:231,column:3}},line:224},22:{name:"(anonymous_22)",decl:{start:{line:228,column:42},end:{line:228,column:43}},loc:{start:{line:228,column:53},end:{line:230,column:5}},line:228},23:{name:"(anonymous_23)",decl:{start:{line:232,column:2},end:{line:232,column:3}},loc:{start:{line:232,column:23},end:{line:236,column:3}},line:232},24:{name:"(anonymous_24)",decl:{start:{line:233,column:41},end:{line:233,column:42}},loc:{start:{line:233,column:52},end:{line:235,column:5}},line:233},25:{name:"(anonymous_25)",decl:{start:{line:237,column:29},end:{line:237,column:30}},loc:{start:{line:237,column:50},end:{line:251,column:3}},line:237},26:{name:"(anonymous_26)",decl:{start:{line:252,column:19},end:{line:252,column:20}},loc:{start:{line:252,column:44},end:{line:375,column:3}},line:252},27:{name:"(anonymous_27)",decl:{start:{line:277,column:30},end:{line:277,column:31}},loc:{start:{line:277,column:48},end:{line:285,column:7}},line:277},28:{name:"(anonymous_28)",decl:{start:{line:287,column:56},end:{line:287,column:57}},loc:{start:{line:287,column:67},end:{line:338,column:5}},line:287},29:{name:"(anonymous_29)",decl:{start:{line:371,column:7},end:{line:371,column:8}},loc:{start:{line:371,column:13},end:{line:374,column:5}},line:371},30:{name:"(anonymous_30)",decl:{start:{line:376,column:11},end:{line:376,column:12}},loc:{start:{line:376,column:17},end:{line:383,column:3}},line:376},31:{name:"(anonymous_31)",decl:{start:{line:384,column:11},end:{line:384,column:12}},loc:{start:{line:384,column:17},end:{line:391,column:3}},line:384},32:{name:"(anonymous_32)",decl:{start:{line:392,column:16},end:{line:392,column:17}},loc:{start:{line:392,column:26},end:{line:406,column:3}},line:392},33:{name:"(anonymous_33)",decl:{start:{line:407,column:19},end:{line:407,column:20}},loc:{start:{line:407,column:38},end:{line:413,column:3}},line:407},34:{name:"(anonymous_34)",decl:{start:{line:414,column:19},end:{line:414,column:20}},loc:{start:{line:414,column:30},end:{line:419,column:3}},line:414},35:{name:"(anonymous_35)",decl:{start:{line:420,column:16},end:{line:420,column:17}},loc:{start:{line:420,column:27},end:{line:427,column:3}},line:420},36:{name:"(anonymous_36)",decl:{start:{line:428,column:28},end:{line:428,column:29}},loc:{start:{line:428,column:39},end:{line:437,column:3}},line:428},37:{name:"(anonymous_37)",decl:{start:{line:438,column:20},end:{line:438,column:21}},loc:{start:{line:438,column:46},end:{line:445,column:3}},line:438},38:{name:"(anonymous_38)",decl:{start:{line:446,column:19},end:{line:446,column:20}},loc:{start:{line:446,column:37},end:{line:450,column:3}},line:446},39:{name:"(anonymous_39)",decl:{start:{line:451,column:16},end:{line:451,column:17}},loc:{start:{line:451,column:30},end:{line:455,column:3}},line:451},40:{name:"(anonymous_40)",decl:{start:{line:456,column:21},end:{line:456,column:22}},loc:{start:{line:456,column:35},end:{line:470,column:3}},line:456},41:{name:"(anonymous_41)",decl:{start:{line:471,column:14},end:{line:471,column:15}},loc:{start:{line:471,column:40},end:{line:475,column:3}},line:471},42:{name:"(anonymous_42)",decl:{start:{line:476,column:2},end:{line:476,column:3}},loc:{start:{line:476,column:23},end:{line:524,column:3}},line:476},43:{name:"(anonymous_43)",decl:{start:{line:496,column:32},end:{line:496,column:33}},loc:{start:{line:496,column:42},end:{line:503,column:9}},line:496},44:{name:"(anonymous_44)",decl:{start:{line:525,column:2},end:{line:525,column:3}},loc:{start:{line:525,column:17},end:{line:528,column:3}},line:525},45:{name:"(anonymous_45)",decl:{start:{line:529,column:16},end:{line:529,column:17}},loc:{start:{line:529,column:29},end:{line:533,column:3}},line:529},46:{name:"(anonymous_46)",decl:{start:{line:534,column:2},end:{line:534,column:3}},loc:{start:{line:534,column:16},end:{line:582,column:3}},line:534},47:{name:"(anonymous_47)",decl:{start:{line:538,column:27},end:{line:538,column:28}},loc:{start:{line:538,column:42},end:{line:542,column:7}},line:538},48:{name:"(anonymous_48)",decl:{start:{line:543,column:20},end:{line:543,column:21}},loc:{start:{line:543,column:27},end:{line:546,column:7}},line:543},49:{name:"(anonymous_49)",decl:{start:{line:557,column:25},end:{line:557,column:26}},loc:{start:{line:557,column:38},end:{line:557,column:66}},line:557},50:{name:"(anonymous_50)",decl:{start:{line:583,column:18},end:{line:583,column:19}},loc:{start:{line:583,column:24},end:{line:601,column:3}},line:583},51:{name:"(anonymous_51)",decl:{start:{line:589,column:50},end:{line:589,column:51}},loc:{start:{line:589,column:66},end:{line:589,column:91}},line:589},52:{name:"(anonymous_52)",decl:{start:{line:589,column:100},end:{line:589,column:101}},loc:{start:{line:589,column:109},end:{line:589,column:121}},line:589},53:{name:"(anonymous_53)",decl:{start:{line:602,column:27},end:{line:602,column:28}},loc:{start:{line:602,column:41},end:{line:647,column:3}},line:602},54:{name:"(anonymous_54)",decl:{start:{line:608,column:21},end:{line:608,column:22}},loc:{start:{line:608,column:36},end:{line:610,column:7}},line:608},55:{name:"(anonymous_55)",decl:{start:{line:648,column:18},end:{line:648,column:19}},loc:{start:{line:648,column:29},end:{line:653,column:3}},line:648},56:{name:"(anonymous_56)",decl:{start:{line:654,column:2},end:{line:654,column:3}},loc:{start:{line:654,column:29},end:{line:661,column:3}},line:654},57:{name:"(anonymous_57)",decl:{start:{line:662,column:2},end:{line:662,column:3}},loc:{start:{line:662,column:25},end:{line:664,column:3}},line:662},58:{name:"(anonymous_58)",decl:{start:{line:665,column:20},end:{line:665,column:21}},loc:{start:{line:665,column:36},end:{line:667,column:3}},line:665},59:{name:"(anonymous_59)",decl:{start:{line:668,column:28},end:{line:668,column:29}},loc:{start:{line:668,column:44},end:{line:675,column:3}},line:668},60:{name:"(anonymous_60)",decl:{start:{line:676,column:28},end:{line:676,column:29}},loc:{start:{line:676,column:44},end:{line:683,column:3}},line:676},61:{name:"(anonymous_61)",decl:{start:{line:684,column:2},end:{line:684,column:3}},loc:{start:{line:684,column:11},end:{line:837,column:3}},line:684},62:{name:"(anonymous_62)",decl:{start:{line:698,column:23},end:{line:698,column:24}},loc:{start:{line:698,column:34},end:{line:698,column:57}},line:698},63:{name:"(anonymous_63)",decl:{start:{line:705,column:18},end:{line:705,column:19}},loc:{start:{line:705,column:30},end:{line:705,column:57}},line:705},64:{name:"(anonymous_64)",decl:{start:{line:706,column:17},end:{line:706,column:18}},loc:{start:{line:706,column:23},end:{line:706,column:57}},line:706},65:{name:"(anonymous_65)",decl:{start:{line:765,column:24},end:{line:765,column:25}},loc:{start:{line:765,column:30},end:{line:765,column:55}},line:765},66:{name:"(anonymous_66)",decl:{start:{line:773,column:24},end:{line:773,column:25}},loc:{start:{line:773,column:30},end:{line:773,column:59}},line:773},67:{name:"(anonymous_67)",decl:{start:{line:783,column:24},end:{line:783,column:25}},loc:{start:{line:783,column:30},end:{line:783,column:58}},line:783},68:{name:"(anonymous_68)",decl:{start:{line:792,column:24},end:{line:792,column:25}},loc:{start:{line:792,column:30},end:{line:792,column:56}},line:792},69:{name:"(anonymous_69)",decl:{start:{line:802,column:24},end:{line:802,column:25}},loc:{start:{line:802,column:30},end:{line:802,column:54}},line:802},70:{name:"(anonymous_70)",decl:{start:{line:812,column:24},end:{line:812,column:25}},loc:{start:{line:812,column:30},end:{line:812,column:57}},line:812},71:{name:"(anonymous_71)",decl:{start:{line:821,column:24},end:{line:821,column:25}},loc:{start:{line:821,column:30},end:{line:821,column:61}},line:821}},branchMap:{0:{loc:{start:{line:42,column:2},end:{line:59,column:3}},type:"if",locations:[{start:{line:42,column:2},end:{line:59,column:3}},{start:{line:47,column:9},end:{line:59,column:3}}],line:42},1:{loc:{start:{line:42,column:6},end:{line:42,column:43}},type:"binary-expr",locations:[{start:{line:42,column:6},end:{line:42,column:24}},{start:{line:42,column:28},end:{line:42,column:43}}],line:42},2:{loc:{start:{line:44,column:4},end:{line:46,column:5}},type:"if",locations:[{start:{line:44,column:4},end:{line:46,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:44},3:{loc:{start:{line:47,column:9},end:{line:59,column:3}},type:"if",locations:[{start:{line:47,column:9},end:{line:59,column:3}},{start:{line:52,column:9},end:{line:59,column:3}}],line:47},4:{loc:{start:{line:49,column:4},end:{line:51,column:5}},type:"if",locations:[{start:{line:49,column:4},end:{line:51,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:49},5:{loc:{start:{line:52,column:9},end:{line:59,column:3}},type:"if",locations:[{start:{line:52,column:9},end:{line:59,column:3}},{start:{line:57,column:9},end:{line:59,column:3}}],line:52},6:{loc:{start:{line:54,column:4},end:{line:56,column:5}},type:"if",locations:[{start:{line:54,column:4},end:{line:56,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:54},7:{loc:{start:{line:163,column:12},end:{line:163,column:61}},type:"cond-expr",locations:[{start:{line:163,column:44},end:{line:163,column:53}},{start:{line:163,column:56},end:{line:163,column:61}}],line:163},8:{loc:{start:{line:181,column:6},end:{line:192,column:7}},type:"if",locations:[{start:{line:181,column:6},end:{line:192,column:7}},{start:{line:184,column:13},end:{line:192,column:7}}],line:181},9:{loc:{start:{line:184,column:13},end:{line:192,column:7}},type:"if",locations:[{start:{line:184,column:13},end:{line:192,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:184},10:{loc:{start:{line:184,column:17},end:{line:184,column:88}},type:"binary-expr",locations:[{start:{line:184,column:17},end:{line:184,column:44}},{start:{line:184,column:48},end:{line:184,column:88}}],line:184},11:{loc:{start:{line:188,column:8},end:{line:191,column:9}},type:"if",locations:[{start:{line:188,column:8},end:{line:191,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:188},12:{loc:{start:{line:196,column:4},end:{line:212,column:5}},type:"if",locations:[{start:{line:196,column:4},end:{line:212,column:5}},{start:{line:204,column:11},end:{line:212,column:5}}],line:196},13:{loc:{start:{line:197,column:6},end:{line:203,column:7}},type:"if",locations:[{start:{line:197,column:6},end:{line:203,column:7}},{start:{line:200,column:13},end:{line:203,column:7}}],line:197},14:{loc:{start:{line:197,column:10},end:{line:197,column:53}},type:"binary-expr",locations:[{start:{line:197,column:10},end:{line:197,column:19}},{start:{line:197,column:23},end:{line:197,column:33}},{start:{line:197,column:37},end:{line:197,column:53}}],line:197},15:{loc:{start:{line:200,column:13},end:{line:203,column:7}},type:"if",locations:[{start:{line:200,column:13},end:{line:203,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:200},16:{loc:{start:{line:200,column:17},end:{line:200,column:46}},type:"binary-expr",locations:[{start:{line:200,column:17},end:{line:200,column:26}},{start:{line:200,column:30},end:{line:200,column:46}}],line:200},17:{loc:{start:{line:205,column:6},end:{line:211,column:7}},type:"if",locations:[{start:{line:205,column:6},end:{line:211,column:7}},{start:{line:208,column:13},end:{line:211,column:7}}],line:205},18:{loc:{start:{line:205,column:10},end:{line:205,column:39}},type:"binary-expr",locations:[{start:{line:205,column:10},end:{line:205,column:19}},{start:{line:205,column:23},end:{line:205,column:39}}],line:205},19:{loc:{start:{line:208,column:13},end:{line:211,column:7}},type:"if",locations:[{start:{line:208,column:13},end:{line:211,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:208},20:{loc:{start:{line:208,column:17},end:{line:208,column:46}},type:"binary-expr",locations:[{start:{line:208,column:17},end:{line:208,column:26}},{start:{line:208,column:30},end:{line:208,column:46}}],line:208},21:{loc:{start:{line:225,column:21},end:{line:225,column:55}},type:"binary-expr",locations:[{start:{line:225,column:21},end:{line:225,column:49}},{start:{line:225,column:53},end:{line:225,column:55}}],line:225},22:{loc:{start:{line:226,column:24},end:{line:226,column:93}},type:"binary-expr",locations:[{start:{line:226,column:24},end:{line:226,column:70}},{start:{line:226,column:74},end:{line:226,column:93}}],line:226},23:{loc:{start:{line:227,column:21},end:{line:227,column:110}},type:"cond-expr",locations:[{start:{line:227,column:55},end:{line:227,column:96}},{start:{line:227,column:99},end:{line:227,column:110}}],line:227},24:{loc:{start:{line:238,column:4},end:{line:242,column:5}},type:"if",locations:[{start:{line:238,column:4},end:{line:242,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:238},25:{loc:{start:{line:238,column:8},end:{line:238,column:123}},type:"binary-expr",locations:[{start:{line:238,column:8},end:{line:238,column:40}},{start:{line:238,column:44},end:{line:238,column:123}}],line:238},26:{loc:{start:{line:252,column:30},end:{line:252,column:39}},type:"default-arg",locations:[{start:{line:252,column:37},end:{line:252,column:39}}],line:252},27:{loc:{start:{line:259,column:4},end:{line:261,column:5}},type:"if",locations:[{start:{line:259,column:4},end:{line:261,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:259},28:{loc:{start:{line:259,column:8},end:{line:259,column:62}},type:"binary-expr",locations:[{start:{line:259,column:8},end:{line:259,column:23}},{start:{line:259,column:27},end:{line:259,column:62}}],line:259},29:{loc:{start:{line:262,column:4},end:{line:264,column:5}},type:"if",locations:[{start:{line:262,column:4},end:{line:264,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:262},30:{loc:{start:{line:262,column:8},end:{line:262,column:62}},type:"binary-expr",locations:[{start:{line:262,column:8},end:{line:262,column:23}},{start:{line:262,column:27},end:{line:262,column:62}}],line:262},31:{loc:{start:{line:266,column:6},end:{line:268,column:7}},type:"if",locations:[{start:{line:266,column:6},end:{line:268,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:266},32:{loc:{start:{line:266,column:10},end:{line:266,column:69}},type:"binary-expr",locations:[{start:{line:266,column:10},end:{line:266,column:16}},{start:{line:266,column:20},end:{line:266,column:35}},{start:{line:266,column:39},end:{line:266,column:69}}],line:266},33:{loc:{start:{line:270,column:4},end:{line:272,column:5}},type:"if",locations:[{start:{line:270,column:4},end:{line:272,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:270},34:{loc:{start:{line:273,column:19},end:{line:273,column:51}},type:"binary-expr",locations:[{start:{line:273,column:19},end:{line:273,column:45}},{start:{line:273,column:49},end:{line:273,column:51}}],line:273},35:{loc:{start:{line:275,column:4},end:{line:286,column:5}},type:"if",locations:[{start:{line:275,column:4},end:{line:286,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:275},36:{loc:{start:{line:275,column:8},end:{line:275,column:35}},type:"binary-expr",locations:[{start:{line:275,column:8},end:{line:275,column:16}},{start:{line:275,column:20},end:{line:275,column:35}}],line:275},37:{loc:{start:{line:278,column:8},end:{line:283,column:9}},type:"if",locations:[{start:{line:278,column:8},end:{line:283,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:278},38:{loc:{start:{line:278,column:12},end:{line:278,column:56}},type:"binary-expr",locations:[{start:{line:278,column:12},end:{line:278,column:27}},{start:{line:278,column:31},end:{line:278,column:56}}],line:278},39:{loc:{start:{line:289,column:6},end:{line:302,column:7}},type:"if",locations:[{start:{line:289,column:6},end:{line:302,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:289},40:{loc:{start:{line:304,column:6},end:{line:317,column:7}},type:"if",locations:[{start:{line:304,column:6},end:{line:317,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:304},41:{loc:{start:{line:319,column:6},end:{line:337,column:7}},type:"if",locations:[{start:{line:319,column:6},end:{line:337,column:7}},{start:{line:333,column:13},end:{line:337,column:7}}],line:319},42:{loc:{start:{line:321,column:20},end:{line:321,column:78}},type:"cond-expr",locations:[{start:{line:321,column:40},end:{line:321,column:67}},{start:{line:321,column:70},end:{line:321,column:78}}],line:321},43:{loc:{start:{line:321,column:20},end:{line:321,column:37}},type:"binary-expr",locations:[{start:{line:321,column:20},end:{line:321,column:25}},{start:{line:321,column:29},end:{line:321,column:37}}],line:321},44:{loc:{start:{line:340,column:4},end:{line:354,column:5}},type:"if",locations:[{start:{line:340,column:4},end:{line:354,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:340},45:{loc:{start:{line:344,column:8},end:{line:352,column:9}},type:"if",locations:[{start:{line:344,column:8},end:{line:352,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:344},46:{loc:{start:{line:355,column:4},end:{line:357,column:5}},type:"if",locations:[{start:{line:355,column:4},end:{line:357,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:355},47:{loc:{start:{line:358,column:4},end:{line:360,column:5}},type:"if",locations:[{start:{line:358,column:4},end:{line:360,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:358},48:{loc:{start:{line:361,column:4},end:{line:363,column:5}},type:"if",locations:[{start:{line:361,column:4},end:{line:363,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:361},49:{loc:{start:{line:364,column:4},end:{line:366,column:5}},type:"if",locations:[{start:{line:364,column:4},end:{line:366,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:364},50:{loc:{start:{line:397,column:4},end:{line:397,column:38}},type:"if",locations:[{start:{line:397,column:4},end:{line:397,column:38}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:397},51:{loc:{start:{line:398,column:4},end:{line:402,column:5}},type:"if",locations:[{start:{line:398,column:4},end:{line:402,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:398},52:{loc:{start:{line:432,column:26},end:{line:432,column:70}},type:"cond-expr",locations:[{start:{line:432,column:46},end:{line:432,column:65}},{start:{line:432,column:68},end:{line:432,column:70}}],line:432},53:{loc:{start:{line:433,column:31},end:{line:433,column:87}},type:"cond-expr",locations:[{start:{line:433,column:69},end:{line:433,column:78}},{start:{line:433,column:81},end:{line:433,column:87}}],line:433},54:{loc:{start:{line:457,column:21},end:{line:457,column:44}},type:"binary-expr",locations:[{start:{line:457,column:21},end:{line:457,column:38}},{start:{line:457,column:42},end:{line:457,column:44}}],line:457},55:{loc:{start:{line:458,column:4},end:{line:469,column:5}},type:"if",locations:[{start:{line:458,column:4},end:{line:469,column:5}},{start:{line:467,column:11},end:{line:469,column:5}}],line:458},56:{loc:{start:{line:480,column:6},end:{line:516,column:7}},type:"if",locations:[{start:{line:480,column:6},end:{line:516,column:7}},{start:{line:485,column:13},end:{line:516,column:7}}],line:480},57:{loc:{start:{line:480,column:10},end:{line:480,column:56}},type:"binary-expr",locations:[{start:{line:480,column:10},end:{line:480,column:34}},{start:{line:480,column:38},end:{line:480,column:56}}],line:480},58:{loc:{start:{line:481,column:26},end:{line:481,column:92}},type:"binary-expr",locations:[{start:{line:481,column:26},end:{line:481,column:49}},{start:{line:481,column:53},end:{line:481,column:92}}],line:481},59:{loc:{start:{line:482,column:8},end:{line:484,column:9}},type:"if",locations:[{start:{line:482,column:8},end:{line:484,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:482},60:{loc:{start:{line:497,column:10},end:{line:499,column:11}},type:"if",locations:[{start:{line:497,column:10},end:{line:499,column:11}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:497},61:{loc:{start:{line:505,column:10},end:{line:512,column:11}},type:"if",locations:[{start:{line:505,column:10},end:{line:512,column:11}},{start:{line:508,column:17},end:{line:512,column:11}}],line:505},62:{loc:{start:{line:518,column:4},end:{line:523,column:5}},type:"if",locations:[{start:{line:518,column:4},end:{line:523,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:518},63:{loc:{start:{line:526,column:21},end:{line:526,column:55}},type:"binary-expr",locations:[{start:{line:526,column:21},end:{line:526,column:49}},{start:{line:526,column:53},end:{line:526,column:55}}],line:526},64:{loc:{start:{line:527,column:11},end:{line:527,column:52}},type:"binary-expr",locations:[{start:{line:527,column:11},end:{line:527,column:40}},{start:{line:527,column:44},end:{line:527,column:52}}],line:527},65:{loc:{start:{line:537,column:16},end:{line:537,column:41}},type:"binary-expr",locations:[{start:{line:537,column:16},end:{line:537,column:29}},{start:{line:537,column:33},end:{line:537,column:41}}],line:537},66:{loc:{start:{line:550,column:4},end:{line:572,column:5}},type:"if",locations:[{start:{line:550,column:4},end:{line:572,column:5}},{start:{line:560,column:11},end:{line:572,column:5}}],line:550},67:{loc:{start:{line:574,column:4},end:{line:576,column:5}},type:"if",locations:[{start:{line:574,column:4},end:{line:576,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:574},68:{loc:{start:{line:578,column:4},end:{line:580,column:5}},type:"if",locations:[{start:{line:578,column:4},end:{line:580,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:578},69:{loc:{start:{line:589,column:66},end:{line:589,column:91}},type:"cond-expr",locations:[{start:{line:589,column:81},end:{line:589,column:84}},{start:{line:589,column:87},end:{line:589,column:91}}],line:589},70:{loc:{start:{line:590,column:4},end:{line:594,column:5}},type:"if",locations:[{start:{line:590,column:4},end:{line:594,column:5}},{start:{line:592,column:11},end:{line:594,column:5}}],line:590},71:{loc:{start:{line:595,column:4},end:{line:599,column:5}},type:"if",locations:[{start:{line:595,column:4},end:{line:599,column:5}},{start:{line:597,column:11},end:{line:599,column:5}}],line:595},72:{loc:{start:{line:597,column:11},end:{line:599,column:5}},type:"if",locations:[{start:{line:597,column:11},end:{line:599,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:597},73:{loc:{start:{line:605,column:4},end:{line:617,column:5}},type:"if",locations:[{start:{line:605,column:4},end:{line:617,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:605},74:{loc:{start:{line:605,column:8},end:{line:605,column:39}},type:"binary-expr",locations:[{start:{line:605,column:8},end:{line:605,column:18}},{start:{line:605,column:22},end:{line:605,column:39}}],line:605},75:{loc:{start:{line:619,column:4},end:{line:621,column:5}},type:"if",locations:[{start:{line:619,column:4},end:{line:621,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:619},76:{loc:{start:{line:619,column:8},end:{line:619,column:27}},type:"binary-expr",locations:[{start:{line:619,column:8},end:{line:619,column:12}},{start:{line:619,column:16},end:{line:619,column:27}}],line:619},77:{loc:{start:{line:623,column:4},end:{line:646,column:5}},type:"if",locations:[{start:{line:623,column:4},end:{line:646,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:623},78:{loc:{start:{line:631,column:8},end:{line:636,column:9}},type:"if",locations:[{start:{line:631,column:8},end:{line:636,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:631},79:{loc:{start:{line:633,column:10},end:{line:635,column:11}},type:"if",locations:[{start:{line:633,column:10},end:{line:635,column:11}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:633},80:{loc:{start:{line:637,column:8},end:{line:642,column:9}},type:"if",locations:[{start:{line:637,column:8},end:{line:642,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:637},81:{loc:{start:{line:685,column:19},end:{line:685,column:51}},type:"binary-expr",locations:[{start:{line:685,column:19},end:{line:685,column:45}},{start:{line:685,column:49},end:{line:685,column:51}}],line:685},82:{loc:{start:{line:686,column:26},end:{line:686,column:92}},type:"cond-expr",locations:[{start:{line:686,column:46},end:{line:686,column:83}},{start:{line:686,column:86},end:{line:686,column:92}}],line:686},83:{loc:{start:{line:701,column:23},end:{line:708,column:14}},type:"cond-expr",locations:[{start:{line:701,column:70},end:{line:708,column:5}},{start:{line:708,column:8},end:{line:708,column:14}}],line:701},84:{loc:{start:{line:724,column:24},end:{line:743,column:14}},type:"cond-expr",locations:[{start:{line:724,column:56},end:{line:743,column:5}},{start:{line:743,column:8},end:{line:743,column:14}}],line:724},85:{loc:{start:{line:744,column:24},end:{line:754,column:14}},type:"cond-expr",locations:[{start:{line:744,column:97},end:{line:754,column:5}},{start:{line:754,column:8},end:{line:754,column:14}}],line:744}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0,87:0,88:0,89:0,90:0,91:0,92:0,93:0,94:0,95:0,96:0,97:0,98:0,99:0,100:0,101:0,102:0,103:0,104:0,105:0,106:0,107:0,108:0,109:0,110:0,111:0,112:0,113:0,114:0,115:0,116:0,117:0,118:0,119:0,120:0,121:0,122:0,123:0,124:0,125:0,126:0,127:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:0,136:0,137:0,138:0,139:0,140:0,141:0,142:0,143:0,144:0,145:0,146:0,147:0,148:0,149:0,150:0,151:0,152:0,153:0,154:0,155:0,156:0,157:0,158:0,159:0,160:0,161:0,162:0,163:0,164:0,165:0,166:0,167:0,168:0,169:0,170:0,171:0,172:0,173:0,174:0,175:0,176:0,177:0,178:0,179:0,180:0,181:0,182:0,183:0,184:0,185:0,186:0,187:0,188:0,189:0,190:0,191:0,192:0,193:0,194:0,195:0,196:0,197:0,198:0,199:0,200:0,201:0,202:0,203:0,204:0,205:0,206:0,207:0,208:0,209:0,210:0,211:0,212:0,213:0,214:0,215:0,216:0,217:0,218:0,219:0,220:0,221:0,222:0,223:0,224:0,225:0,226:0,227:0,228:0,229:0,230:0,231:0,232:0,233:0,234:0,235:0,236:0,237:0,238:0,239:0,240:0,241:0,242:0,243:0,244:0,245:0,246:0,247:0,248:0,249:0,250:0,251:0,252:0,253:0,254:0,255:0,256:0,257:0,258:0,259:0,260:0,261:0,262:0,263:0,264:0,265:0,266:0,267:0,268:0,269:0,270:0,271:0,272:0,273:0,274:0,275:0,276:0,277:0,278:0,279:0,280:0,281:0,282:0,283:0,284:0,285:0,286:0,287:0,288:0,289:0,290:0,291:0,292:0,293:0,294:0,295:0,296:0,297:0,298:0,299:0,300:0,301:0,302:0,303:0,304:0,305:0,306:0,307:0,308:0,309:0,310:0,311:0,312:0,313:0,314:0,315:0,316:0,317:0,318:0,319:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0],26:[0],27:[0,0],28:[0,0],29:[0,0],30:[0,0],31:[0,0],32:[0,0,0],33:[0,0],34:[0,0],35:[0,0],36:[0,0],37:[0,0],38:[0,0],39:[0,0],40:[0,0],41:[0,0],42:[0,0],43:[0,0],44:[0,0],45:[0,0],46:[0,0],47:[0,0],48:[0,0],49:[0,0],50:[0,0],51:[0,0],52:[0,0],53:[0,0],54:[0,0],55:[0,0],56:[0,0],57:[0,0],58:[0,0],59:[0,0],60:[0,0],61:[0,0],62:[0,0],63:[0,0],64:[0,0],65:[0,0],66:[0,0],67:[0,0],68:[0,0],69:[0,0],70:[0,0],71:[0,0],72:[0,0],73:[0,0],74:[0,0],75:[0,0],76:[0,0],77:[0,0],78:[0,0],79:[0,0],80:[0,0],81:[0,0],82:[0,0],83:[0,0],84:[0,0],85:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/App.tsx"],names:["shortcut","mapStyle","style"],mappings:"AAurBmB,SAAA,KAwNA,YAxNA;AAvrBnB,OAAO,WAAW;AAClB,OAAO,eAAe;AACtB,OAAO,WAAW;AAClB,OAAO,YAAY;AACnB,OAAO,SAAS;AAChB,SAAQ,aAAY;AACpB,SAAQ,wBAAuB;AAC/B,OAAO,UAAU;AACjB,SAAS,eAAe;AAExB,SAAQ,wBAAuB;AAC/B,OAAO,YAAY;AAEnB,OAAO,mBAAmB;AAC1B,OAAO,mBAAmB;AAC1B,OAAO,gBAAgB;AACvB,OAAO,eAAe;AACtB,OAAO,iBAAiB;AACxB,OAAO,gBAAmC;AAC1C,OAAO,eAAe;AACtB,OAAO,kBAAkB;AAEzB,OAAO,mBAAmB;AAC1B,OAAO,iBAAiB;AACxB,OAAO,kBAAkB;AACzB,OAAO,eAAe;AACtB,OAAO,oBAAoB;AAC3B,OAAO,gBAAgB;AACvB,OAAO,sBAAsB;AAE7B,SAAQ,wBAAwB,8BAA6B;AAC7D,OAAO,WAAW;AAClB,SAAS,cAAc,oBAAoB;AAC3C,SAAS,wBAA0C;AACnD,SAAS,qBAAqB;AAC9B,OAAO,kBAAkB;AACzB,OAAO,YAAY;AACnB,OAAO,aAAa;AAKpB,OAAO,SAAS,OAAO;AAEvB,SAAS,oBAAoB,KAAa,UAA8B;AACtE,QAAM,qBAAqB,IAAI,MAAM,oBAAoB;AACzD,QAAM,kBAAkB,IAAI,MAAM,iBAAiB;AACnD,QAAM,uBAAuB,IAAI,MAAM,sBAAsB;AAC7D,QAAM,oBAAoB,IAAI,MAAM,mBAAmB;AACvD,MAAI,sBAAsB,iBAAiB;AACzC,UAAM,cAAc,MAAM,eAAe,gBAAgB,UAAU,EAAC,eAAe,KAAI,CAAC;AACxF,QAAI,aAAa;AACf,aAAO,IAAI,QAAQ,SAAS,WAAW;AAAA,IACzC;AAAA,EACF,WACS,sBAAsB;AAC7B,UAAM,cAAc,MAAM,eAAe,iBAAiB,UAAU,EAAC,eAAe,KAAI,CAAC;AACzF,QAAI,aAAa;AACf,aAAO,IAAI,QAAQ,SAAS,WAAW;AAAA,IACzC;AAAA,EACF,WACS,mBAAmB;AAC1B,UAAM,cAAc,MAAM,eAAe,cAAc,UAAU,EAAC,eAAe,KAAI,CAAC;AACtF,QAAI,aAAa;AACf,aAAO,IAAI,QAAQ,SAAS,WAAW;AAAA,IACzC;AAAA,EACF,OACK;AACH,WAAO;AAAA,EACT;AACF;AAEA,SAAS,eAAe,MAAW,WAAmB,WAAgB;AACpE,SAAO;AAAA,IACL,GAAG;AAAA,IACH,OAAO;AAAA,MACL,GAAG,KAAK;AAAA,MACR,CAAC,SAAS,GAAG;AAAA,QACX,GAAG,KAAK,MAAM,SAAS;AAAA,QACvB,QAAQ;AAAA,MACV;AAAA,IACF;AAAA,EACF;AACF;AAyCA,qBAAqB,YAAY,MAAM,UAAyB;AAAA,EAC9D;AAAA,EACA,aAAiC;AAAA,EACjC;AAAA,EAEA,YAAY,OAAY;AACtB,UAAM,KAAK;AAEX,SAAK,gBAAgB,IAAI,cAAc;AACvC,SAAK,2BAA2B;AAEhC,SAAK,QAAQ;AAAA,MACX,QAAQ,CAAC;AAAA,MACT,OAAO,CAAC;AAAA,MACR,UAAU,MAAM;AAAA,MAChB,oBAAoB;AAAA,MACpB,SAAS,CAAC;AAAA,MACV,cAAc,CAAC;AAAA,MACf,UAAU;AAAA,MACV,MAAM;AAAA,MACN,SAAS;AAAA,QACP,MAAM;AAAA,QACN,QAAQ;AAAA,UACN,KAAK;AAAA,UACL,KAAK;AAAA,QACP;AAAA,MACF;AAAA,MACA,QAAQ;AAAA,QACN,UAAU;AAAA,QACV,SAAS;AAAA,QACT,MAAM;AAAA,QACN,WAAW;AAAA,QACX,QAAQ;AAAA,QACR,OAAO;AAAA,QACP,aAAa;AAAA,QACb,YAAY;AAAA,MACd;AAAA,MACA,wBAAwB;AAAA,QACtB,oBAAoB;AAAA,QACpB,oBAAoB;AAAA,QACpB,uBAAuB;AAAA,MACzB;AAAA,MACA,wBAAwB;AAAA,QACtB,cAAc;AAAA,MAChB;AAAA,MACA,YAAY;AAAA,IACd;AAEA,SAAK,eAAe,IAAI,aAAa;AAAA,MACnC,sBAAsB,CAAA,MAAK,KAAK,SAAS,EAAE,cAAc,EAAE,CAAC;AAAA,IAC9D,CAAC;AAAA,EACH;AAAA,EAEA,6BAA6B,MAAM;AACjC,UAAM,YAAY;AAAA,MAChB;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,WAAW;AAAA,QAC9B;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,MAAM;AAAA,QACzB;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,QAAQ;AAAA,QAC3B;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,SAAS;AAAA,QAC5B;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,UAAU;AAAA,QAC7B;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,aAAa;AAAA,QAChC;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK;AAAA,YACH,KAAK,MAAM,aAAa,QAAQ,YAAY;AAAA,UAC9C;AAAA,QACF;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACZ,mBAAS,cAAc,oBAAoB,EAAwB,MAAM;AAAA,QAC5E;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,OAAO;AAAA,QAC1B;AAAA,MACF;AAAA,IACF;AAEA,aAAS,KAAK,iBAAiB,SAAS,CAAC,MAAM;AAC7C,UAAG,EAAE,QAAQ,UAAU;AACpB,UAAE,OAAuB,KAAK;AAC/B,iBAAS,KAAK,MAAM;AAAA,MACtB,WACQ,KAAK,MAAM,OAAO,aAAa,SAAS,kBAAkB,SAAS,MAAM;AAC/E,cAAM,WAAW,UAAU,KAAK,CAACA,cAAa;AAC5C,iBAAQA,UAAS,QAAQ,EAAE;AAAA,QAC7B,CAAC;AAED,YAAG,UAAU;AACX,eAAK,SAAS,aAAa,KAAK;AAChC,mBAAS,QAAQ;AAAA,QACnB;AAAA,MACF;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,iBAAiB,CAAC,MAAqB;AACrC,QAAG,UAAU,SAAS,YAAY,EAAE,QAAQ,KAAK,KAAK,GAAG;AACvD,UAAG,EAAE,WAAW,EAAE,YAAY,EAAE,YAAY,IAAI;AAC9C,UAAE,eAAe;AACjB,aAAK,OAAO;AAAA,MACd,WACQ,EAAE,WAAW,EAAE,YAAY,IAAI;AACrC,UAAE,eAAe;AACjB,aAAK,OAAO;AAAA,MACd;AAAA,IACF,OACK;AACH,UAAG,EAAE,WAAW,EAAE,YAAY,IAAI;AAChC,UAAE,eAAe;AACjB,aAAK,OAAO;AAAA,MACd,WACQ,EAAE,WAAW,EAAE,YAAY,IAAI;AACrC,UAAE,eAAe;AACjB,aAAK,OAAO;AAAA,MACd;AAAA,IACF;AAAA,EACF;AAAA,EAEA,MAAM,oBAAoB;AACxB,SAAK,aAAa,MAAM,iBAAiB,CAAC,UAAU,SAAS,KAAK,eAAe,UAAU,IAAI,CAAC;AAChG,WAAO,iBAAiB,WAAW,KAAK,cAAc;AAAA,EACxD;AAAA,EAEA,uBAAuB;AACrB,WAAO,oBAAoB,WAAW,KAAK,cAAc;AAAA,EAC3D;AAAA,EAEA,UAAU,eAAyC;AACjD,SAAK,YAAY,KAAK,aAAa;AAAA,EACrC;AAAA,EAEA,YAAY,aAAqB;AAC/B,UAAM,WAAoC,KAAK,MAAM,SAAS,YAAY,CAAC;AAC3E,UAAM,cAAc,SAAS,oCAAoC,KAAK,OAAO;AAE7E,UAAM,WAAY,OAAO,gBAAgB,WAAW,YAAY,QAAQ,SAAS,WAAW,IAAG;AAC/F,2BAAuB,QAAQ,EAAE,KAAK,CAAA,UAAS;AAC7C,WAAK,SAAS,EAAE,MAAM,eAAe,KAAK,MAAM,MAAM,UAAU,KAAK,EAAC,CAAC;AAAA,IACzE,CAAC;AAAA,EACH;AAAA,EAEA,YAAY,SAAiB;AAC3B,2BAAuB,OAAO,EAAE,KAAK,CAAA,UAAS;AAC5C,WAAK,SAAS,EAAE,MAAM,eAAe,KAAK,MAAM,MAAM,UAAU,KAAK,EAAC,CAAC;AAAA,IACzE,CAAC;AAAA,EACH;AAAA,EAEA,2BAA2B,CAAC,UAAkB,UAAe;AAE3D,QACE,aAAa,uBACb,UAAU,IAAI,KAAK,MAAM,UAAU,CAAC,YAAY,mBAAmB,GAAG,QAAQ,GAC9E;AACA,WAAK,SAAS;AAAA,QACZ,UAAU;AAAA,MACZ,CAAC;AAAA,IACH;AAEA,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,UAAU;AAAA,QACR,GAAI,KAAK,MAAM,SAAiB;AAAA,QAChC,CAAC,QAAQ,GAAG;AAAA,MACd;AAAA,IACF;AAEA,SAAK,eAAe,YAAY;AAAA,EAClC;AAAA,EAEA,iBAAiB,CAAC,UAAoC,OAAyB,CAAC,MAAY;AAC1F,WAAO;AAAA,MACL,MAAM;AAAA,MACN,aAAa;AAAA,MACb,aAAa;AAAA,MACb,GAAG;AAAA,IACL;AAKA,QAAI,SAAS,UAAU,OAAO,SAAS,WAAW,UAAU;AAC1D,eAAS,SAAS,oBAAoB,SAAS,QAAQ,QAAQ;AAAA,IACjE;AAEA,QAAI,SAAS,UAAU,OAAO,SAAS,WAAW,UAAU;AAC1D,eAAS,SAAS,oBAAoB,SAAS,QAAQ,QAAQ;AAAA,IACjE;AAEA,eAAW,CAAC,WAAW,MAAM,KAAK,OAAO,QAAQ,SAAS,OAAO,GAAG;AAClE,UAAI,UAAU,SAAS,UAAU,OAAO,OAAO,QAAQ,UAAU;AAC/D,eAAO,MAAM,oBAAoB,OAAO,KAAK,QAAQ;AAAA,MACvD;AAAA,IACF;AAGA,QAAI,KAAK,aAAa;AACpB,WAAK,uBAAuB,QAAQ;AAAA,IACtC;AAEA,UAAM,SAA4B,iBAAiB,QAAQ,KAAK,CAAC;AAGjE,UAAM,cAA2C,CAAC;AAClD,QAAI,YAAY,SAAS,QAAQ;AAC/B,YAAM,cAAc,IAAI,OAAO,IAAI;AACnC,eAAS,OAAO,QAAQ,CAAC,OAAO,UAAU;AACxC,YAAI,MAAM,OAAO,MAAM,YAAY,IAAI,MAAM,EAAE,GAAG;AAChD,gBAAM,QAAQ,IAAI;AAAA,YAChB,UAAU,KAAK;AAAA,UACjB;AACA,sBAAY,KAAK,KAAK;AAAA,QACxB;AACA,oBAAY,IAAI,MAAM,IAAI,IAAI;AAAA,MAChC,CAAC;AAAA,IACH;AAEA,UAAM,eAA8B,YAAY,OAAO,MAAM,EAAE,IAAI,CAAA,UAAS;AAE1E,YAAM,WAAW,MAAM,QAAQ,MAAM,iEAAiE;AACtG,UAAI,UAAU;AACZ,cAAM,CAAC,EAAE,OAAO,OAAO,IAAI;AAC3B,eAAO;AAAA,UACL,SAAS,MAAM;AAAA,UACf,QAAQ;AAAA,YACN,MAAM;AAAA,YACN,MAAM;AAAA,cACJ,OAAO,SAAS,OAAO,EAAE;AAAA,cACzB,KAAK;AAAA,cACL;AAAA,YACF;AAAA,UACF;AAAA,QACF;AAAA,MACF;AAGA,YAAM,qBAAqB,MAAM,QAAQ,MAAM,8CAA8C;AAC7F,UAAI,oBAAoB;AACtB,cAAM,CAAC,EAAE,OAAO,OAAO,IAAI;AAC3B,eAAO;AAAA,UACL,SAAS,MAAM;AAAA,UACf,QAAQ;AAAA,YACN,MAAM;AAAA,YACN,MAAM;AAAA,cACJ,OAAO,SAAS,OAAO,EAAE;AAAA,cACzB,KAAK;AAAA,cACL;AAAA,YACF;AAAA,UACF;AAAA,QACF;AAAA,MACF;AAEA,YAAM,aAAa,MAAM,QAAQ,MAAM,0CAA0C;AACjF,UAAI,YAAY;AACd,cAAM,CAAC,EAAE,OAAO,OAAO,UAAU,OAAO,IAAI;AAC5C,cAAM,MAAO,SAAS,WAAY,CAAC,OAAO,QAAQ,EAAE,KAAK,GAAG,IAAI;AAChE,eAAO;AAAA,UACL,SAAS,MAAM;AAAA,UACf,QAAQ;AAAA,YACN,MAAM;AAAA,YACN,MAAM;AAAA,cACJ,OAAO,SAAS,OAAO,EAAE;AAAA,cACzB;AAAA,cACA;AAAA,YACF;AAAA,UACF;AAAA,QACF;AAAA,MACF,OACK;AACH,eAAO;AAAA,UACL,SAAS,MAAM;AAAA,QACjB;AAAA,MACF;AAAA,IACF,CAAC;AAED,QAAI,gBAAgD;AACpD,QAAI,OAAO,SAAS,GAAG;AACrB,sBAAgB,UAAU,QAAQ;AAElC,iBAAW,SAAS,QAAQ;AAC1B,cAAM,EAAC,QAAO,IAAI;AAClB,YAAI,SAAS;AACX,cAAI;AACF,kBAAM,UAAU,QAAQ,MAAM,GAAG,EAAE,CAAC;AAEpC,kBAAM,YAAY,QAAQ,MAAM,qBAAqB,EAAG,CAAC;AACzD,kBAAM,eAAe,SAAS;AAAA,UAChC,SACO,KAAK;AACV,oBAAQ,KAAK,UAAU,MAAM,GAAG;AAAA,UAClC;AAAA,QACF;AAAA,MACF;AAAA,IACF;AAEA,QAAG,SAAS,WAAW,KAAK,MAAM,SAAS,QAAQ;AACjD,WAAK,YAAY,SAAS,MAAgB;AAAA,IAC5C;AACA,QAAG,SAAS,WAAW,KAAK,MAAM,SAAS,QAAQ;AACjD,WAAK,YAAY,SAAS,MAAgB;AAAA,IAC5C;AAEA,QAAI,KAAK,aAAa;AACpB,WAAK,cAAc,YAAY,QAAQ;AAAA,IACzC;AACA,QAAI,KAAK,MAAM;AACb,WAAK,UAAU,QAAQ;AAAA,IACzB;AAEA,SAAK,SAAS;AAAA,MACZ,UAAU;AAAA,MACV;AAAA,MACA,QAAQ;AAAA,IACV,GAAG,MAAM;AACP,WAAK,aAAa;AAClB,WAAK,cAAc;AAAA,IACrB,CAAC;AAAA,EAEH;AAAA,EAEA,SAAS,MAAM;AACb,UAAM,cAAc,KAAK,cAAc,KAAK;AAE5C,UAAM,WAAW,aAAa,KAAK,MAAM,UAAU,WAAW;AAC9D,SAAK,eAAe,aAAa,EAAC,aAAa,MAAK,CAAC;AACrD,SAAK,SAAS;AAAA,MACZ,OAAO;AAAA,IACT,CAAC;AAAA,EACH;AAAA,EAEA,SAAS,MAAM;AACb,UAAM,cAAc,KAAK,cAAc,KAAK;AAC5C,UAAM,WAAW,aAAa,KAAK,MAAM,UAAU,WAAW;AAC9D,SAAK,eAAe,aAAa,EAAC,aAAa,MAAK,CAAC;AACrD,SAAK,SAAS;AAAA,MACZ,OAAO;AAAA,IACT,CAAC;AAAA,EACH;AAAA,EAEA,cAAc,CAAC,SAA+C;AAC5D,QAAI,EAAE,UAAU,SAAS,IAAI;AAC7B,QAAI,SAAS,KAAK,MAAM,SAAS;AACjC,eAAW,MAAM,UAAU,GAAG,OAAO,SAAO,CAAC;AAC7C,eAAW,MAAM,UAAU,GAAG,OAAO,SAAO,CAAC;AAC7C,QAAG,aAAa,SAAU;AAE1B,QAAI,aAAa,KAAK,MAAM,oBAAoB;AAC9C,WAAK,SAAS;AAAA,QACZ,oBAAoB;AAAA,MACtB,CAAC;AAAA,IACH;AAEA,aAAS,OAAO,MAAM,CAAC;AACvB,qBAAiB,QAAQ,UAAU,QAAQ;AAC3C,SAAK,eAAe,MAAM;AAAA,EAC5B;AAAA,EAEA,iBAAiB,CAAC,kBAAwC;AACxD,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,QAAQ;AAAA,IACV;AACA,SAAK,eAAe,YAAY;AAAA,EAClC;AAAA,EAEA,iBAAiB,CAAC,UAAkB;AAClC,UAAM,SAAS,KAAK,MAAM,SAAS;AACnC,UAAM,kBAAkB,OAAO,MAAM,CAAC;AACtC,oBAAgB,OAAO,OAAO,CAAC;AAC/B,SAAK,eAAe,eAAe;AAAA,EACrC;AAAA,EAEA,cAAc,CAAC,UAAkB;AAC/B,UAAM,SAAS,KAAK,MAAM,SAAS;AACnC,UAAM,gBAAgB,OAAO,MAAM,CAAC;AAEpC,UAAM,cAAc,UAAU,cAAc,KAAK,CAAC;AAClD,gBAAY,KAAK,YAAY,KAAK;AAClC,kBAAc,OAAO,OAAO,GAAG,WAAW;AAC1C,SAAK,eAAe,aAAa;AAAA,EACnC;AAAA,EAEA,0BAA0B,CAAC,UAAkB;AAC3C,UAAM,SAAS,KAAK,MAAM,SAAS;AACnC,UAAM,gBAAgB,OAAO,MAAM,CAAC;AAEpC,UAAM,QAAQ,EAAE,GAAG,cAAc,KAAK,EAAE;AACxC,UAAM,gBAAgB,YAAY,QAAQ,EAAC,GAAG,MAAM,OAAM,IAAI,CAAC;AAC/D,kBAAc,aAAa,cAAc,eAAe,SAAS,YAAY;AAE7E,UAAM,SAAS;AACf,kBAAc,KAAK,IAAI;AACvB,SAAK,eAAe,aAAa;AAAA,EACnC;AAAA,EAGA,kBAAkB,CAAC,OAAe,QAAgB,UAAkB;AAClE,UAAM,gBAAgB,KAAK,MAAM,SAAS,OAAO,MAAM,CAAC;AACxD,kBAAc,KAAK,IAAI;AAAA,MACrB,GAAG,cAAc,KAAK;AAAA,MACtB,IAAI;AAAA,IACN;AAEA,SAAK,eAAe,aAAa;AAAA,EACnC;AAAA,EAEA,iBAAiB,CAAC,OAAe,UAA8B;AAC7D,UAAM,gBAAgB,KAAK,MAAM,SAAS,OAAO,MAAM,CAAC;AACxD,kBAAc,KAAK,IAAI;AAEvB,SAAK,eAAe,aAAa;AAAA,EACnC;AAAA,EAEA,cAAc,CAAC,aAAuB;AACpC,SAAK,SAAS;AAAA,MACZ,UAAU;AAAA,IACZ,GAAG,KAAK,aAAa;AAAA,EACvB;AAAA,EAEA,mBAAmB,CAAC,aAAuC;AACzD,UAAM,WAAoC,SAAS,YAAY,CAAC;AAChE,QAAG,SAAS,mBAAmB,MAAM,QAAW;AAC9C,YAAM,eAAe;AAAA,QACnB,GAAG;AAAA,QACH,UAAU;AAAA,UACR,GAAG,SAAS;AAAA,UACZ,qBAAqB;AAAA,QACvB;AAAA,MACF;AACA,aAAO;AAAA,IACT,OAAO;AACL,aAAO;AAAA,IACT;AAAA,EACF;AAAA,EAEA,YAAY,CAAC,UAAoC,eAA4C;AAC3F,SAAK,SAAS,EAAC,WAAsB,CAAC;AACtC,eAAW,KAAK,iBAAiB,QAAQ;AACzC,SAAK,eAAe,QAAQ;AAAA,EAC9B;AAAA,EAEA,MAAM,eAAe;AACnB,UAAM,aAAwE,CAAC;AAC/E,eAAU,OAAO,OAAO,KAAK,KAAK,MAAM,SAAS,OAAO,GAAG;AACzD,YAAM,SAAS,KAAK,MAAM,SAAS,QAAQ,GAAG;AAC9C,UAAG,OAAO,SAAS,YAAY,EAAE,SAAS,SAAS;AACjD,mBAAW,GAAG,IAAI,KAAK,MAAM,QAAQ,GAAG,KAAK,EAAC,GAAG,KAAK,MAAM,SAAS,QAAQ,GAAG,EAAC;AACjF,YAAI,WAAW,GAAG,EAAE,WAAW,QAAW;AACxC,qBAAW,GAAG,EAAE,SAAS,CAAC;AAAA,QAC5B;AAAA,MACF,OAAO;AACL,mBAAW,GAAG,IAAI;AAAA,UAChB,MAAM,OAAO;AAAA,UACb,QAAQ,CAAC;AAAA,QACX;AAEA,YAAI,MAAM,OAAO;AAEjB,YAAI;AACF,gBAAM,oBAAoB,KAAM,KAAK,MAAM,QAAQ;AAAA,QACrD,SAAQ,KAAK;AACX,kBAAQ,KAAK,mCAAmC,GAAG;AAAA,QACrD;AAEA,cAAM,kBAAkB,CAAC,SAAa;AACpC,cAAG,CAAC,OAAO,UAAU,eAAe,KAAK,MAAM,eAAe,GAAG;AAC/D;AAAA,UACF;AAEA,qBAAU,SAAS,KAAK,eAAe;AACrC,uBAAW,GAAG,EAAE,OAAO,KAAK,MAAM,EAAE;AAAA,UACtC;AAAA,QACF;AAEA,YAAI;AACF,cAAI,IAAK,WAAW,YAAY,GAAG;AACjC,kBAAM,OAAO,MAAO,IAAI,QAAQ,IAAK,UAAU,EAAE,CAAC,EAAG,YAAY,EAAE;AACnE,4BAAgB,IAAI;AAAA,UACtB,OAAO;AACL,kBAAM,WAAW,MAAM,MAAM,KAAM,EAAE,MAAM,OAAO,CAAC;AACnD,kBAAM,OAAO,MAAM,SAAS,KAAK;AACjC,4BAAgB,IAAI;AAAA,UACtB;AAAA,QACF,SAAQ,KAAK;AACX,kBAAQ,MAAM,sCAAsC,GAAG,MAAM,GAAG,EAAE;AAAA,QACpE;AAAA,MACF;AAAA,IACF;AAEA,QAAG,CAAC,QAAQ,KAAK,MAAM,SAAS,UAAU,GAAG;AAC3C,cAAQ,MAAM,mBAAmB,UAAU;AAC3C,WAAK,SAAS;AAAA,QACZ,SAAS;AAAA,MACX,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,eAAgB;AACd,UAAM,WAAmC,KAAK,MAAM,SAAS,YAAY,CAAC;AAC1E,WAAO,SAAS,mBAAmB,KAAK;AAAA,EAC1C;AAAA,EAEA,cAAc,CAAC,YAMT;AACJ,SAAK,SAAS;AAAA,MACZ;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,cAAc;AACZ,UAAM,EAAC,UAAU,cAAa,IAAI,KAAK;AAEvC,UAAM,WAAW;AAAA,MACf,UAAW,iBAAiB;AAAA,MAC5B,qBAAqB,CAACC,cAAiC;AACrD,eAAO,MAAM,oBAAoBA,WAAU;AAAA,UACzC,eAAe;AAAA,QACjB,CAAC;AAAA,MACH;AAAA,MACA,cAAc,CAAC,MAAkB;AAC/B,aAAK,aAAa,WAAW,EAAE,GAAG;AAClC,aAAK,aAAa;AAAA,MACpB;AAAA,IACF;AAEA,UAAM,WAAW,KAAK,aAAa;AAEnC,QAAI;AAGJ,QAAG,aAAa,MAAM;AACpB,mBAAa;AAAA,QAAC;AAAA,QAAA;AAAA,UACX,GAAG;AAAA,UACJ,UAAU,KAAK;AAAA,UACf,cAAc,KAAK,MAAM,uBAAuB;AAAA,UAChD,eAAe,CAAC,YAAY,KAAK,cAAc,CAAC,OAAO;AAAA,QAAA;AAAA,MACzD;AAAA,IACF,OAAO;AAEL,mBAAa;AAAA,QAAC;AAAA,QAAA;AAAA,UAAe,GAAG;AAAA,UAC9B,UAAU,KAAK;AAAA,UACf,SAAS,KAAK,MAAM;AAAA,UACpB,oBAAoB,KAAK,MAAM,aAAa;AAAA,UAC5C,kBAAkB,KAAK,MAAM,SAAS,OAAO,KAAK,MAAM,kBAAkB;AAAA,UAC1E,eAAe,KAAK;AAAA,QAAA;AAAA,MAAe;AAAA,IACvC;AAEA,QAAI;AACJ,QAAG,KAAK,MAAM,SAAS,MAAM,UAAU,GAAG;AACxC,mBAAa,KAAK,MAAM,SAAS,QAAQ,YAAY,EAAE;AAAA,IACzD;AACA,UAAM,eAAkC,CAAC;AACzC,QAAI,YAAY;AACd,mBAAa,SAAS,SAAS,UAAU;AAAA,IAC3C;AAEA,WAAO,oBAAC,SAAI,OAAO,cAAc,WAAU,2BAA0B,eAAY,sBAC9E,UAAA,WAAA,CACH;AAAA,EACF;AAAA,EAEA,gBAAgB,MAAM;AACpB,UAAM,EAAC,UAAU,UAAU,OAAM,IAAI,KAAK;AAC1C,UAAM,EAAC,mBAAkB,IAAI,KAAK;AAClC,UAAM,MAAM,IAAI,IAAI,SAAS,IAAI;AACjC,UAAM,UAAU,KAAK,KAAK,UAAU,QAAQ,CAAC;AAC7C,QAAI,aAAa,IAAI,SAAS,GAAG,OAAO,IAAI,kBAAkB,EAAE;AAEhE,UAAM,aAAa,OAAO,QAAQ,MAAM,EACrC,IAAI,CAAC,CAAC,KAAK,GAAG,MAAO,QAAQ,OAAO,MAAM,IAAK,EAC/C,OAAO,CAAA,QAAO,QAAQ,IAAI;AAE7B,QAAI,WAAW,SAAS,GAAG;AACzB,UAAI,aAAa,IAAI,SAAS,WAAW,KAAK,GAAG,CAAC;AAAA,IACpD,OACK;AACH,UAAI,aAAa,OAAO,OAAO;AAAA,IACjC;AAEA,QAAI,aAAa,OAAO;AACtB,UAAI,aAAa,OAAO,MAAM;AAAA,IAChC,WACS,aAAa,WAAW;AAC/B,UAAI,aAAa,IAAI,QAAQ,SAAS;AAAA,IACxC;AAEA,YAAQ,aAAa,EAAC,mBAAkB,GAAG,YAAY,IAAI,IAAI;AAAA,EACjE;AAAA,EAEA,yBAAyB,CAAC,aAAiC;AACzD,UAAM,MAAM,IAAI,IAAI,SAAS,IAAI;AACjC,UAAM,aAAa,IAAI,aAAa,IAAI,OAAO;AAE/C,QAAI,cAAc,eAAe,IAAI;AACnC,YAAM,SAAS,WAAW,MAAM,GAAG;AACnC,YAAM,WAAqC,CAAC;AAC5C,aAAO,QAAQ,CAAA,cAAa;AAC1B,iBAAS,SAAS,IAAI;AAAA,MACxB,CAAC;AAED,WAAK,SAAS;AAAA,QACZ,QAAQ;AAAA,UACN,GAAG,KAAK,MAAM;AAAA,UACd,GAAG;AAAA,QACL;AAAA,MACF,CAAC;AAAA,IACH;AAEA,UAAM,OAAO,IAAI,aAAa,IAAI,MAAM;AACxC,QAAI,QAAQ,SAAS,IAAI;AACvB,WAAK,YAAY,IAAgB;AAAA,IACnC;AAEA,UAAM,OAAO,IAAI,aAAa,IAAI,OAAO;AACzC,QAAI,MAAM;AACR,UAAI;AACF,cAAM,QAAQ,KAAK,MAAM,GAAG;AAC5B,cAAM,CAAC,SAAS,kBAAkB,IAAI;AAAA,UACpC,MAAM,CAAC;AAAA,UACP,SAAS,MAAM,CAAC,GAAG,EAAE;AAAA,QACvB;AAEA,YAAI,QAAQ;AACZ,YAAI,YAAY,KAAK;AACnB,gBAAM,iBAAiB,KAAK,KAAK,UAAU,QAAQ,CAAC;AACpD,cAAI,mBAAmB,SAAS,SAAS,EAAE,GAAG;AAC5C,oBAAQ;AAAA,UACV;AAAA,QACF;AACA,YAAI,OAAO;AACT,eAAK,SAAS;AAAA,YACZ;AAAA,YACA,yBAAyB,SAAS,OAAO,kBAAkB,EAAE;AAAA,UAC/D,CAAC;AAAA,QACH;AAAA,MACF,SACO,KAAK;AACV,gBAAQ,KAAK,GAAG;AAAA,MAClB;AAAA,IACF;AAAA,EACF;AAAA,EAEA,gBAAgB,CAAC,UAAkB;AACjC,SAAK,SAAS;AAAA,MACZ,oBAAoB;AAAA,MACpB,yBAAyB,KAAK,MAAM,SAAS,OAAO,KAAK,EAAE;AAAA,IAC7D,GAAG,KAAK,aAAa;AAAA,EACvB;AAAA,EAEA,SAAS,WAAqC,OAAgB;AAC5D,SAAK,SAAS;AAAA,MACZ,QAAQ;AAAA,QACN,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,SAAS,GAAG;AAAA,MACf;AAAA,IACF,GAAG,KAAK,aAAa;AAAA,EACvB;AAAA,EAEA,YAAY,WAAqC;AAC/C,SAAK,SAAS,WAAW,CAAC,KAAK,MAAM,OAAO,SAAS,CAAC;AAAA,EACxD;AAAA,EAEA,kBAAkB,CAAC,eAA4C;AAC7D,SAAK,SAAS,EAAE,WAAW,CAAC;AAAA,EAC9B;AAAA,EAEA,0BAA0B,CAAC,KAA+C,UAAmB;AAC3F,SAAK,SAAS;AAAA,MACZ,wBAAwB;AAAA,QACtB,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,GAAG,GAAG;AAAA,MACT;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,0BAA0B,CAAC,KAA+C,UAAe;AACvF,SAAK,SAAS;AAAA,MACZ,wBAAwB;AAAA,QACtB,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,GAAG,GAAG;AAAA,MACT;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,SAAS,KAAK,MAAM,SAAS,UAAU,CAAC;AAC9C,UAAM,gBAAgB,OAAO,SAAS,IAAI,OAAO,KAAK,MAAM,kBAAkB,IAAI;AAElF,UAAM,UAAU;AAAA,MAAC;AAAA,MAAA;AAAA,QACf,UAAU,KAAK,aAAa;AAAA,QAC5B,UAAU,KAAK,MAAM;AAAA,QACrB,UAAU,KAAK,MAAM;AAAA,QACrB,oBAAoB,KAAK,MAAM,aAAa;AAAA,QAC5C,SAAS,KAAK,MAAM;AAAA,QACpB,gBAAgB,KAAK;AAAA,QACrB,aAAa,KAAK;AAAA,QAClB,eAAe,KAAK;AAAA,QACpB,eAAe,CAAC,UAAoC,KAAK,YAAY,KAAK;AAAA,MAAA;AAAA,IAC5E;AAEA,UAAM,aAAa,KAAK,MAAM,OAAO,aAAa;AAAA,MAAC;AAAA,MAAA;AAAA,QACjD,OAAO,KAAK,MAAM;AAAA,QAClB,UAAU,CAACC,WAAU,KAAK,eAAeA,MAAK;AAAA,QAC9C,SAAS,MAAM,KAAK,SAAS,cAAc,KAAK;AAAA,MAAA;AAAA,IAClD,IAAK;AAEL,UAAM,YAAY;AAAA,MAAC;AAAA,MAAA;AAAA,QACjB,aAAa,KAAK;AAAA,QAClB,gBAAgB,KAAK;AAAA,QACrB,aAAa,KAAK;AAAA,QAClB,yBAAyB,KAAK;AAAA,QAC9B,gBAAgB,KAAK;AAAA,QACrB,eAAe,KAAK;AAAA,QACpB,oBAAoB,KAAK,MAAM;AAAA,QAC/B;AAAA,QACA,SAAS,KAAK,MAAM;AAAA,QACpB,QAAQ,KAAK,MAAM;AAAA,MAAA;AAAA,IACrB;AAEA,UAAM,cAAc,gBAAgB;AAAA,MAAC;AAAA,MAAA;AAAA,QAEnC,OAAO;AAAA,QACP,YAAY,KAAK,MAAM;AAAA,QACvB,cAAc,KAAK,MAAM,qBAAqB;AAAA,QAC9C,aAAa,KAAK,MAAM,uBAAuB,KAAK,MAAM,SAAS,OAAO,SAAO;AAAA,QACjF,SAAS,KAAK,MAAM;AAAA,QACpB,cAAc,KAAK,MAAM;AAAA,QACzB,MAAM,KAAK,MAAM;AAAA,QACjB,aAAa,KAAK;AAAA,QAClB,gBAAgB,KAAK;AAAA,QACrB,gBAAgB,KAAK;AAAA,QACrB,aAAa,KAAK;AAAA,QAClB,yBAAyB,KAAK;AAAA,QAC9B,iBAAiB,KAAK;AAAA,QACtB,QAAQ,KAAK,MAAM;AAAA,MAAA;AAAA,MAdd,KAAK,MAAM;AAAA,IAelB,IAAK;AAEL,UAAM,cAAe,KAAK,MAAM,OAAO,SAAS,KAAK,MAAM,MAAM,SAAU,IAAI;AAAA,MAAC;AAAA,MAAA;AAAA,QAC9E,cAAc;AAAA,QACd,oBAAoB,KAAK,MAAM;AAAA,QAC/B,eAAe,KAAK;AAAA,QACpB,UAAU,KAAK,MAAM;AAAA,QACrB,QAAQ,KAAK,MAAM;AAAA,QACnB,OAAO,KAAK,MAAM;AAAA,MAAA;AAAA,IACpB,IAAK;AAGL,UAAM,8BAAU,OAAA,EACd,UAAA;AAAA,MAAA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,UAAU,KAAK,aAAa;AAAA,UAC5B,wBAAwB,KAAK,MAAM;AAAA,UACnC,wBAAwB,KAAK,MAAM;AAAA,UACnC,yBAAyB,KAAK;AAAA,UAC9B,yBAAyB,KAAK;AAAA,UAC9B,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,MAAM,KAAK,YAAY,OAAO;AAAA,UAC5C,SAAS,KAAK,MAAM;AAAA,QAAA;AAAA,MACtB;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,MAAM,KAAK,YAAY,WAAW;AAAA,QAAA;AAAA,MAClD;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,UAAU,KAAK,MAAM;AAAA,UACrB,gBAAgB,KAAK;AAAA,UACrB,0BAA0B,KAAK;AAAA,UAC/B,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,MAAM,KAAK,YAAY,UAAU;AAAA,QAAA;AAAA,MACjD;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,UAAU,KAAK,MAAM;AAAA,UACrB,gBAAgB,KAAK;AAAA,UACrB,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,MAAM,KAAK,YAAY,QAAQ;AAAA,UAC7C,YAAY,KAAK,MAAM;AAAA,UACvB,iBAAiB,KAAK;AAAA,QAAA;AAAA,MACxB;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,aAAa,KAAK;AAAA,UAClB,cAAc,MAAM,KAAK,YAAY,MAAM;AAAA,UAC3C,YAAY,KAAK,MAAM;AAAA,QAAA;AAAA,MACzB;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,UAAU,KAAK,MAAM;AAAA,UACrB,gBAAgB,KAAK;AAAA,UACrB,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,MAAM,KAAK,YAAY,SAAS;AAAA,QAAA;AAAA,MAChD;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,UAAU,KAAK,MAAM;AAAA,UACrB,gBAAgB,KAAK;AAAA,UACrB,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,MAAM,KAAK,YAAY,aAAa;AAAA,QAAA;AAAA,MACpD;AAAA,IAAA,EAAA,CACF;AAEA,WAAO;AAAA,MAAC;AAAA,MAAA;AAAA,QACN;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA,KAAK,KAAK,YAAY;AAAA,QACtB,QAAQ;AAAA,QACR;AAAA,MAAA;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8a07c2afbabbb0ad6515959638246d740e8d9d6d"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return fe=function(){return s},s}fe();fe().s[0]++;window.Buffer=Oae.Buffer;function tw(n,e){fe().f[0]++;const t=(fe().s[1]++,n.match(/\.tilehosting\.com/)),i=(fe().s[2]++,n.match(/\.maptiler\.com/)),r=(fe().s[3]++,n.match(/\.thunderforest\.com/)),o=(fe().s[4]++,n.match(/\.locationiq\.com/));if(fe().s[5]++,fe().b[1][0]++,t||(fe().b[1][1]++,i)){fe().b[0][0]++;const s=(fe().s[6]++,xd.getAccessToken("openmaptiles",e,{allowFallback:!0}));if(fe().s[7]++,s)return fe().b[2][0]++,fe().s[8]++,n.replace("{key}",s);fe().b[2][1]++}else if(fe().b[0][1]++,fe().s[9]++,r){fe().b[3][0]++;const s=(fe().s[10]++,xd.getAccessToken("thunderforest",e,{allowFallback:!0}));if(fe().s[11]++,s)return fe().b[4][0]++,fe().s[12]++,n.replace("{key}",s);fe().b[4][1]++}else if(fe().b[3][1]++,fe().s[13]++,o){fe().b[5][0]++;const s=(fe().s[14]++,xd.getAccessToken("locationiq",e,{allowFallback:!0}));if(fe().s[15]++,s)return fe().b[6][0]++,fe().s[16]++,n.replace("{key}",s);fe().b[6][1]++}else return fe().b[5][1]++,fe().s[17]++,n}function h$(n,e,t){return fe().f[1]++,fe().s[18]++,{...n,$root:{...n.$root,[e]:{...n.$root[e],values:t}}}}class gDe extends On.Component{revisionStore;styleStore=(fe().s[19]++,null);layerWatcher;constructor(e){fe().f[2]++,fe().s[20]++,super(e),fe().s[21]++,this.revisionStore=new cDe,fe().s[22]++,this.configureKeyboardShortcuts(),fe().s[23]++,this.state={errors:[],infos:[],mapStyle:xd.emptyStyle,selectedLayerIndex:0,sources:{},vectorLayers:{},mapState:"map",spec:qr,mapView:{zoom:0,center:{lng:0,lat:0}},isOpen:{settings:!1,sources:!1,open:!1,shortcuts:!1,export:!1,debug:!1,globalState:!1,codeEditor:!1},maplibreGlDebugOptions:{showTileBoundaries:!1,showCollisionBoxes:!1,showOverdrawInspector:!1},openlayersDebugOptions:{debugToolbox:!1},fileHandle:null},fe().s[24]++,this.layerWatcher=new mDe({onVectorLayersChange:t=>(fe().f[3]++,fe().s[25]++,this.setState({vectorLayers:t}))})}configureKeyboardShortcuts=(fe().s[26]++,()=>{fe().f[4]++;const e=(fe().s[27]++,[{key:"?",handler:()=>{fe().f[5]++,fe().s[28]++,this.toggleModal("shortcuts")}},{key:"o",handler:()=>{fe().f[6]++,fe().s[29]++,this.toggleModal("open")}},{key:"e",handler:()=>{fe().f[7]++,fe().s[30]++,this.toggleModal("export")}},{key:"d",handler:()=>{fe().f[8]++,fe().s[31]++,this.toggleModal("sources")}},{key:"s",handler:()=>{fe().f[9]++,fe().s[32]++,this.toggleModal("settings")}},{key:"g",handler:()=>{fe().f[10]++,fe().s[33]++,this.toggleModal("globalState")}},{key:"i",handler:()=>{fe().f[11]++,fe().s[34]++,this.setMapState(this.state.mapState==="map"?(fe().b[7][0]++,"inspect"):(fe().b[7][1]++,"map"))}},{key:"m",handler:()=>{fe().f[12]++,fe().s[35]++,document.querySelector(".maplibregl-canvas").focus()}},{key:"!",handler:()=>{fe().f[13]++,fe().s[36]++,this.toggleModal("debug")}}]);fe().s[37]++,document.body.addEventListener("keyup",t=>{if(fe().f[14]++,fe().s[38]++,t.key==="Escape")fe().b[8][0]++,fe().s[39]++,t.target.blur(),fe().s[40]++,document.body.focus();else if(fe().b[8][1]++,fe().s[41]++,fe().b[10][0]++,this.state.isOpen.shortcuts||(fe().b[10][1]++,document.activeElement===document.body)){fe().b[9][0]++;const i=(fe().s[42]++,e.find(r=>(fe().f[15]++,fe().s[43]++,r.key===t.key)));fe().s[44]++,i?(fe().b[11][0]++,fe().s[45]++,this.setModal("shortcuts",!1),fe().s[46]++,i.handler()):fe().b[11][1]++}else fe().b[9][1]++})});handleKeyPress=(fe().s[47]++,e=>{fe().f[16]++,fe().s[48]++,navigator.platform.toUpperCase().indexOf("MAC")>=0?(fe().b[12][0]++,fe().s[49]++,fe().b[14][0]++,e.metaKey&&(fe().b[14][1]++,e.shiftKey)&&(fe().b[14][2]++,e.keyCode===90)?(fe().b[13][0]++,fe().s[50]++,e.preventDefault(),fe().s[51]++,this.onRedo()):(fe().b[13][1]++,fe().s[52]++,fe().b[16][0]++,e.metaKey&&(fe().b[16][1]++,e.keyCode===90)?(fe().b[15][0]++,fe().s[53]++,e.preventDefault(),fe().s[54]++,this.onUndo()):fe().b[15][1]++)):(fe().b[12][1]++,fe().s[55]++,fe().b[18][0]++,e.ctrlKey&&(fe().b[18][1]++,e.keyCode===90)?(fe().b[17][0]++,fe().s[56]++,e.preventDefault(),fe().s[57]++,this.onUndo()):(fe().b[17][1]++,fe().s[58]++,fe().b[20][0]++,e.ctrlKey&&(fe().b[20][1]++,e.keyCode===89)?(fe().b[19][0]++,fe().s[59]++,e.preventDefault(),fe().s[60]++,this.onRedo()):fe().b[19][1]++))});async componentDidMount(){fe().f[17]++,fe().s[61]++,this.styleStore=await uDe((e,t)=>(fe().f[18]++,fe().s[62]++,this.onStyleChanged(e,t))),fe().s[63]++,window.addEventListener("keydown",this.handleKeyPress)}componentWillUnmount(){fe().f[19]++,fe().s[64]++,window.removeEventListener("keydown",this.handleKeyPress)}saveStyle(e){fe().f[20]++,fe().s[65]++,this.styleStore?.save(e)}updateFonts(e){fe().f[21]++;const t=(fe().s[66]++,fe().b[21][0]++,this.state.mapStyle.metadata||(fe().b[21][1]++,{})),i=(fe().s[67]++,fe().b[22][0]++,t["maputnik:openmaptiles_access_token"]||(fe().b[22][1]++,_oe.openmaptiles)),r=(fe().s[68]++,typeof e=="string"?(fe().b[23][0]++,e.replace("{key}",i)):(fe().b[23][1]++,e));fe().s[69]++,qRe(r).then(o=>{fe().f[22]++,fe().s[70]++,this.setState({spec:h$(this.state.spec,"glyphs",o)})})}updateIcons(e){fe().f[23]++,fe().s[71]++,VRe(e).then(t=>{fe().f[24]++,fe().s[72]++,this.setState({spec:h$(this.state.spec,"sprite",t)})})}onChangeMetadataProperty=(fe().s[73]++,(e,t)=>{fe().f[25]++,fe().s[74]++,fe().b[25][0]++,e==="maputnik:renderer"&&(fe().b[25][1]++,t!==Tae(this.state.mapStyle,["metadata","maputnik:renderer"],"mlgljs"))?(fe().b[24][0]++,fe().s[75]++,this.setState({mapState:"map"})):fe().b[24][1]++;const i=(fe().s[76]++,{...this.state.mapStyle,metadata:{...this.state.mapStyle.metadata,[e]:t}});fe().s[77]++,this.onStyleChanged(i)});onStyleChanged=(fe().s[78]++,(e,t=(fe().b[26][0]++,{}))=>{fe().f[26]++,fe().s[79]++,t={save:!0,addRevision:!0,initialLoad:!1,...t},fe().s[80]++,fe().b[28][0]++,e.glyphs&&(fe().b[28][1]++,typeof e.glyphs=="string")?(fe().b[27][0]++,fe().s[81]++,e.glyphs=tw(e.glyphs,e)):fe().b[27][1]++,fe().s[82]++,fe().b[30][0]++,e.sprite&&(fe().b[30][1]++,typeof e.sprite=="string")?(fe().b[29][0]++,fe().s[83]++,e.sprite=tw(e.sprite,e)):fe().b[29][1]++,fe().s[84]++;for(const[a,c]of Object.entries(e.sources))fe().s[85]++,fe().b[32][0]++,c&&(fe().b[32][1]++,"url"in c)&&(fe().b[32][2]++,typeof c.url=="string")?(fe().b[31][0]++,fe().s[86]++,c.url=tw(c.url,e)):fe().b[31][1]++;fe().s[87]++,t.initialLoad?(fe().b[33][0]++,fe().s[88]++,this.getInitialStateFromUrl(e)):fe().b[33][1]++;const i=(fe().s[89]++,fe().b[34][0]++,wd(e)||(fe().b[34][1]++,[])),r=(fe().s[90]++,[]);if(fe().s[91]++,fe().b[36][0]++,e&&(fe().b[36][1]++,e.layers)){fe().b[35][0]++;const a=(fe().s[92]++,new window.Map);fe().s[93]++,e.layers.forEach((c,h)=>{if(fe().f[27]++,fe().s[94]++,fe().b[38][0]++,c.id===""&&(fe().b[38][1]++,a.has(c.id))){fe().b[37][0]++;const m=(fe().s[95]++,new Error(`layers[${h}]: duplicate layer id [empty_string], previously used`));fe().s[96]++,r.push(m)}else fe().b[37][1]++;fe().s[97]++,a.set(c.id,!0)})}else fe().b[35][1]++;const o=(fe().s[98]++,r.concat(i).map(a=>{fe().f[28]++;const c=(fe().s[99]++,a.message.match(/layers\[(\d+)\]: (duplicate layer id "?(.*)"?, previously used)/));if(fe().s[100]++,c){fe().b[39][0]++;const[,v,x]=(fe().s[101]++,c);return fe().s[102]++,{message:a.message,parsed:{type:"layer",data:{index:parseInt(v,10),key:"id",message:x}}}}else fe().b[39][1]++;const h=(fe().s[103]++,a.message.match(/layers\[(\d+)\]: (source "(?:.*)" not found)/));if(fe().s[104]++,h){fe().b[40][0]++;const[,v,x]=(fe().s[105]++,h);return fe().s[106]++,{message:a.message,parsed:{type:"layer",data:{index:parseInt(v,10),key:"source",message:x}}}}else fe().b[40][1]++;const m=(fe().s[107]++,a.message.match(/layers\[(\d+)\]\.(?:(\S+)\.)?(\S+): (.*)/));if(fe().s[108]++,m){fe().b[41][0]++;const[,v,x,E,D]=(fe().s[109]++,m),P=(fe().s[110]++,fe().b[43][0]++,x&&(fe().b[43][1]++,E)?(fe().b[42][0]++,[x,E].join(".")):(fe().b[42][1]++,E));return fe().s[111]++,{message:a.message,parsed:{type:"layer",data:{index:parseInt(v,10),key:P,message:D}}}}else return fe().b[41][1]++,fe().s[112]++,{message:a.message}}));let s=(fe().s[113]++,void 0);if(fe().s[114]++,i.length>0){fe().b[44][0]++,fe().s[115]++,s=_L(e),fe().s[116]++;for(const a of i){const{message:c}=(fe().s[117]++,a);if(fe().s[118]++,c){fe().b[45][0]++,fe().s[119]++;try{const h=(fe().s[120]++,c.split(":")[0]),m=(fe().s[121]++,h.match(/^\S+?\[\d+\]\.[^[]+/)[0]);fe().s[122]++,Y4.unset(s,m)}catch(h){fe().s[123]++,console.warn(c+" "+h)}}else fe().b[45][1]++}}else fe().b[44][1]++;fe().s[124]++,e.glyphs!==this.state.mapStyle.glyphs?(fe().b[46][0]++,fe().s[125]++,this.updateFonts(e.glyphs)):fe().b[46][1]++,fe().s[126]++,e.sprite!==this.state.mapStyle.sprite?(fe().b[47][0]++,fe().s[127]++,this.updateIcons(e.sprite)):fe().b[47][1]++,fe().s[128]++,t.addRevision?(fe().b[48][0]++,fe().s[129]++,this.revisionStore.addRevision(e)):fe().b[48][1]++,fe().s[130]++,t.save?(fe().b[49][0]++,fe().s[131]++,this.saveStyle(e)):fe().b[49][1]++,fe().s[132]++,this.setState({mapStyle:e,dirtyMapStyle:s,errors:o},()=>{fe().f[29]++,fe().s[133]++,this.fetchSources(),fe().s[134]++,this.setStateInUrl()})});onUndo=(fe().s[135]++,()=>{fe().f[30]++;const e=(fe().s[136]++,this.revisionStore.undo()),t=(fe().s[137]++,$Re(this.state.mapStyle,e));fe().s[138]++,this.onStyleChanged(e,{addRevision:!1}),fe().s[139]++,this.setState({infos:t})});onRedo=(fe().s[140]++,()=>{fe().f[31]++;const e=(fe().s[141]++,this.revisionStore.redo()),t=(fe().s[142]++,HRe(this.state.mapStyle,e));fe().s[143]++,this.onStyleChanged(e,{addRevision:!1}),fe().s[144]++,this.setState({infos:t})});onMoveLayer=(fe().s[145]++,e=>{fe().f[32]++;let{oldIndex:t,newIndex:i}=(fe().s[146]++,e),r=(fe().s[147]++,this.state.mapStyle.layers);if(fe().s[148]++,t=ML(t,0,r.length-1),fe().s[149]++,i=ML(i,0,r.length-1),fe().s[150]++,t===i){fe().b[50][0]++,fe().s[151]++;return}else fe().b[50][1]++;fe().s[152]++,t===this.state.selectedLayerIndex?(fe().b[51][0]++,fe().s[153]++,this.setState({selectedLayerIndex:i})):fe().b[51][1]++,fe().s[154]++,r=r.slice(0),fe().s[155]++,Pae(r,t,i),fe().s[156]++,this.onLayersChange(r)});onLayersChange=(fe().s[157]++,e=>{fe().f[33]++;const t=(fe().s[158]++,{...this.state.mapStyle,layers:e});fe().s[159]++,this.onStyleChanged(t)});onLayerDestroy=(fe().s[160]++,e=>{fe().f[34]++;const t=(fe().s[161]++,this.state.mapStyle.layers),i=(fe().s[162]++,t.slice(0));fe().s[163]++,i.splice(e,1),fe().s[164]++,this.onLayersChange(i)});onLayerCopy=(fe().s[165]++,e=>{fe().f[35]++;const t=(fe().s[166]++,this.state.mapStyle.layers),i=(fe().s[167]++,t.slice(0)),r=(fe().s[168]++,_L(i[e]));fe().s[169]++,r.id=r.id+"-copy",fe().s[170]++,i.splice(e,0,r),fe().s[171]++,this.onLayersChange(i)});onLayerVisibilityToggle=(fe().s[172]++,e=>{fe().f[36]++;const t=(fe().s[173]++,this.state.mapStyle.layers),i=(fe().s[174]++,t.slice(0)),r=(fe().s[175]++,{...i[e]}),o=(fe().s[176]++,"layout"in r?(fe().b[52][0]++,{...r.layout}):(fe().b[52][1]++,{}));fe().s[177]++,o.visibility=o.visibility==="none"?(fe().b[53][0]++,"visible"):(fe().b[53][1]++,"none"),fe().s[178]++,r.layout=o,fe().s[179]++,i[e]=r,fe().s[180]++,this.onLayersChange(i)});onLayerIdChange=(fe().s[181]++,(e,t,i)=>{fe().f[37]++;const r=(fe().s[182]++,this.state.mapStyle.layers.slice(0));fe().s[183]++,r[e]={...r[e],id:i},fe().s[184]++,this.onLayersChange(r)});onLayerChanged=(fe().s[185]++,(e,t)=>{fe().f[38]++;const i=(fe().s[186]++,this.state.mapStyle.layers.slice(0));fe().s[187]++,i[e]=t,fe().s[188]++,this.onLayersChange(i)});setMapState=(fe().s[189]++,e=>{fe().f[39]++,fe().s[190]++,this.setState({mapState:e},this.setStateInUrl)});setDefaultValues=(fe().s[191]++,e=>{fe().f[40]++;const t=(fe().s[192]++,fe().b[54][0]++,e.metadata||(fe().b[54][1]++,{}));if(fe().s[193]++,t["maputnik:renderer"]===void 0){fe().b[55][0]++;const i=(fe().s[194]++,{...e,metadata:{...e.metadata,"maputnik:renderer":"mlgljs"}});return fe().s[195]++,i}else return fe().b[55][1]++,fe().s[196]++,e});openStyle=(fe().s[197]++,(e,t)=>{fe().f[41]++,fe().s[198]++,this.setState({fileHandle:t}),fe().s[199]++,e=this.setDefaultValues(e),fe().s[200]++,this.onStyleChanged(e)});async fetchSources(){fe().f[42]++;const e=(fe().s[201]++,{});fe().s[202]++;for(const t of Object.keys(this.state.mapStyle.sources)){const i=(fe().s[203]++,this.state.mapStyle.sources[t]);if(fe().s[204]++,fe().b[57][0]++,i.type!=="vector"||(fe().b[57][1]++,!("url"in i)))fe().b[56][0]++,fe().s[205]++,e[t]=(fe().b[58][0]++,this.state.sources[t]||(fe().b[58][1]++,{...this.state.mapStyle.sources[t]})),fe().s[206]++,e[t].layers===void 0?(fe().b[59][0]++,fe().s[207]++,e[t].layers=[]):fe().b[59][1]++;else{fe().b[56][1]++,fe().s[208]++,e[t]={type:i.type,layers:[]};let r=(fe().s[209]++,i.url);fe().s[210]++;try{fe().s[211]++,r=tw(r,this.state.mapStyle)}catch(s){fe().s[212]++,console.warn("Failed to setFetchAccessToken: ",s)}fe().s[213]++;const o=s=>{if(fe().f[43]++,fe().s[214]++,Object.prototype.hasOwnProperty.call(s,"vector_layers"))fe().b[60][1]++;else{fe().b[60][0]++,fe().s[215]++;return}fe().s[216]++;for(const a of s.vector_layers)fe().s[217]++,e[t].layers.push(a.id)};fe().s[218]++;try{if(fe().s[219]++,r.startsWith("pmtiles://")){fe().b[61][0]++;const s=(fe().s[220]++,await new mT(r.substring(10)).getTileJson(""));fe().s[221]++,o(s)}else{fe().b[61][1]++;const s=(fe().s[222]++,await fetch(r,{mode:"cors"})),a=(fe().s[223]++,await s.json());fe().s[224]++,o(a)}}catch(s){fe().s[225]++,console.error(`Failed to process source for url: '${r}', ${s}`)}}}fe().s[226]++,ZR(this.state.sources,e)?fe().b[62][1]++:(fe().b[62][0]++,fe().s[227]++,console.debug("Setting sources",e),fe().s[228]++,this.setState({sources:e}))}_getRenderer(){fe().f[44]++;const e=(fe().s[229]++,fe().b[63][0]++,this.state.mapStyle.metadata||(fe().b[63][1]++,{}));return fe().s[230]++,fe().b[64][0]++,e["maputnik:renderer"]||(fe().b[64][1]++,"mlgljs")}onMapChange=(fe().s[231]++,e=>{fe().f[45]++,fe().s[232]++,this.setState({mapView:e})});mapRenderer(){fe().f[46]++;const{mapStyle:e,dirtyMapStyle:t}=(fe().s[233]++,this.state),i=(fe().s[234]++,{mapStyle:(fe().b[65][0]++,t||(fe().b[65][1]++,e)),replaceAccessTokens:c=>(fe().f[47]++,fe().s[235]++,xd.replaceAccessTokens(c,{allowFallback:!0})),onDataChange:c=>{fe().f[48]++,fe().s[236]++,this.layerWatcher.analyzeMap(c.map),fe().s[237]++,this.fetchSources()}}),r=(fe().s[238]++,this._getRenderer());let o;fe().s[239]++,r==="ol"?(fe().b[66][0]++,fe().s[240]++,o=te.jsx(Pbe,{...i,onChange:this.onMapChange,debugToolbox:this.state.openlayersDebugOptions.debugToolbox,onLayerSelect:c=>(fe().f[49]++,fe().s[241]++,this.onLayerSelect(+c))})):(fe().b[66][1]++,fe().s[242]++,o=te.jsx(Jde,{...i,onChange:this.onMapChange,options:this.state.maplibreGlDebugOptions,inspectModeEnabled:this.state.mapState==="inspect",highlightedLayer:this.state.mapStyle.layers[this.state.selectedLayerIndex],onLayerSelect:this.onLayerSelect}));let s;fe().s[243]++,this.state.mapState.match(/^filter-/)?(fe().b[67][0]++,fe().s[244]++,s=this.state.mapState.replace(/^filter-/,"")):fe().b[67][1]++;const a=(fe().s[245]++,{});return fe().s[246]++,s?(fe().b[68][0]++,fe().s[247]++,a.filter=`url('#${s}')`):fe().b[68][1]++,fe().s[248]++,te.jsx("div",{style:a,className:"maputnik-map__container","data-wd-key":"maplibre:container",children:o})}setStateInUrl=(fe().s[249]++,()=>{fe().f[50]++;const{mapState:e,mapStyle:t,isOpen:i}=(fe().s[250]++,this.state),{selectedLayerIndex:r}=(fe().s[251]++,this.state),o=(fe().s[252]++,new URL(location.href)),s=(fe().s[253]++,kL(JSON.stringify(t)));fe().s[254]++,o.searchParams.set("layer",`${s}~${r}`);const a=(fe().s[255]++,Object.entries(i).map(([c,h])=>(fe().f[51]++,fe().s[256]++,h===!0?(fe().b[69][0]++,c):(fe().b[69][1]++,null))).filter(c=>(fe().f[52]++,fe().s[257]++,c!==null)));fe().s[258]++,a.length>0?(fe().b[70][0]++,fe().s[259]++,o.searchParams.set("modal",a.join(","))):(fe().b[70][1]++,fe().s[260]++,o.searchParams.delete("modal")),fe().s[261]++,e==="map"?(fe().b[71][0]++,fe().s[262]++,o.searchParams.delete("view")):(fe().b[71][1]++,fe().s[263]++,e==="inspect"?(fe().b[72][0]++,fe().s[264]++,o.searchParams.set("view","inspect")):fe().b[72][1]++),fe().s[265]++,history.replaceState({selectedLayerIndex:r},"Maputnik",o.href)});getInitialStateFromUrl=(fe().s[266]++,e=>{fe().f[53]++;const t=(fe().s[267]++,new URL(location.href)),i=(fe().s[268]++,t.searchParams.get("modal"));if(fe().s[269]++,fe().b[74][0]++,i&&(fe().b[74][1]++,i!=="")){fe().b[73][0]++;const s=(fe().s[270]++,i.split(",")),a=(fe().s[271]++,{});fe().s[272]++,s.forEach(c=>{fe().f[54]++,fe().s[273]++,a[c]=!0}),fe().s[274]++,this.setState({isOpen:{...this.state.isOpen,...a}})}else fe().b[73][1]++;const r=(fe().s[275]++,t.searchParams.get("view"));fe().s[276]++,fe().b[76][0]++,r&&(fe().b[76][1]++,r!=="")?(fe().b[75][0]++,fe().s[277]++,this.setMapState(r)):fe().b[75][1]++;const o=(fe().s[278]++,t.searchParams.get("layer"));if(fe().s[279]++,o){fe().b[77][0]++,fe().s[280]++;try{const s=(fe().s[281]++,o.split("~")),[a,c]=(fe().s[282]++,[s[0],parseInt(s[1],10)]);let h=(fe().s[283]++,!0);if(fe().s[284]++,a!=="-"){fe().b[78][0]++;const m=(fe().s[285]++,kL(JSON.stringify(e)));fe().s[286]++,m!==parseInt(a,10)?(fe().b[79][0]++,fe().s[287]++,h=!1):fe().b[79][1]++}else fe().b[78][1]++;fe().s[288]++,h?(fe().b[80][0]++,fe().s[289]++,this.setState({selectedLayerIndex:c,selectedLayerOriginalId:e.layers[c].id})):fe().b[80][1]++}catch(s){fe().s[290]++,console.warn(s)}}else fe().b[77][1]++});onLayerSelect=(fe().s[291]++,e=>{fe().f[55]++,fe().s[292]++,this.setState({selectedLayerIndex:e,selectedLayerOriginalId:this.state.mapStyle.layers[e].id},this.setStateInUrl)});setModal(e,t){fe().f[56]++,fe().s[293]++,this.setState({isOpen:{...this.state.isOpen,[e]:t}},this.setStateInUrl)}toggleModal(e){fe().f[57]++,fe().s[294]++,this.setModal(e,!this.state.isOpen[e])}onSetFileHandle=(fe().s[295]++,e=>{fe().f[58]++,fe().s[296]++,this.setState({fileHandle:e})});onChangeOpenlayersDebug=(fe().s[297]++,(e,t)=>{fe().f[59]++,fe().s[298]++,this.setState({openlayersDebugOptions:{...this.state.openlayersDebugOptions,[e]:t}})});onChangeMaplibreGlDebug=(fe().s[299]++,(e,t)=>{fe().f[60]++,fe().s[300]++,this.setState({maplibreGlDebugOptions:{...this.state.maplibreGlDebugOptions,[e]:t}})});render(){fe().f[61]++;const e=(fe().s[301]++,fe().b[81][0]++,this.state.mapStyle.layers||(fe().b[81][1]++,[])),t=(fe().s[302]++,e.length>0?(fe().b[82][0]++,e[this.state.selectedLayerIndex]):(fe().b[82][1]++,void 0)),i=(fe().s[303]++,te.jsx(N9e,{renderer:this._getRenderer(),mapState:this.state.mapState,mapStyle:this.state.mapStyle,inspectModeEnabled:this.state.mapState==="inspect",sources:this.state.sources,onStyleChanged:this.onStyleChanged,onStyleOpen:this.onStyleChanged,onSetMapState:this.setMapState,onToggleModal:h=>(fe().f[62]++,fe().s[304]++,this.toggleModal(h))})),r=(fe().s[305]++,this.state.isOpen.codeEditor?(fe().b[83][0]++,te.jsx(v5e,{value:this.state.mapStyle,onChange:h=>(fe().f[63]++,fe().s[306]++,this.onStyleChanged(h)),onClose:()=>(fe().f[64]++,fe().s[307]++,this.setModal("codeEditor",!1))})):(fe().b[83][1]++,void 0)),o=(fe().s[308]++,te.jsx(l7e,{onMoveLayer:this.onMoveLayer,onLayerDestroy:this.onLayerDestroy,onLayerCopy:this.onLayerCopy,onLayerVisibilityToggle:this.onLayerVisibilityToggle,onLayersChange:this.onLayersChange,onLayerSelect:this.onLayerSelect,selectedLayerIndex:this.state.selectedLayerIndex,layers:e,sources:this.state.sources,errors:this.state.errors})),s=(fe().s[309]++,t?(fe().b[84][0]++,te.jsx(C9e,{layer:t,layerIndex:this.state.selectedLayerIndex,isFirstLayer:this.state.selectedLayerIndex<1,isLastLayer:this.state.selectedLayerIndex===this.state.mapStyle.layers.length-1,sources:this.state.sources,vectorLayers:this.state.vectorLayers,spec:this.state.spec,onMoveLayer:this.onMoveLayer,onLayerChanged:this.onLayerChanged,onLayerDestroy:this.onLayerDestroy,onLayerCopy:this.onLayerCopy,onLayerVisibilityToggle:this.onLayerVisibilityToggle,onLayerIdChange:this.onLayerIdChange,errors:this.state.errors},this.state.selectedLayerOriginalId)):(fe().b[84][1]++,void 0)),a=(fe().s[310]++,this.state.errors.length+this.state.infos.length>0?(fe().b[85][0]++,te.jsx(Y9e,{currentLayer:t,selectedLayerIndex:this.state.selectedLayerIndex,onLayerSelect:this.onLayerSelect,mapStyle:this.state.mapStyle,errors:this.state.errors,infos:this.state.infos})):(fe().b[85][1]++,void 0)),c=(fe().s[311]++,te.jsxs("div",{children:[te.jsx(WRe,{renderer:this._getRenderer(),maplibreGlDebugOptions:this.state.maplibreGlDebugOptions,openlayersDebugOptions:this.state.openlayersDebugOptions,onChangeMaplibreGlDebug:this.onChangeMaplibreGlDebug,onChangeOpenlayersDebug:this.onChangeOpenlayersDebug,isOpen:this.state.isOpen.debug,onOpenToggle:()=>(fe().f[65]++,fe().s[312]++,this.toggleModal("debug")),mapView:this.state.mapView}),te.jsx(NRe,{isOpen:this.state.isOpen.shortcuts,onOpenToggle:()=>(fe().f[66]++,fe().s[313]++,this.toggleModal("shortcuts"))}),te.jsx(H9e,{mapStyle:this.state.mapStyle,onStyleChanged:this.onStyleChanged,onChangeMetadataProperty:this.onChangeMetadataProperty,isOpen:this.state.isOpen.settings,onOpenToggle:()=>(fe().f[67]++,fe().s[314]++,this.toggleModal("settings"))}),te.jsx(mRe,{mapStyle:this.state.mapStyle,onStyleChanged:this.onStyleChanged,isOpen:this.state.isOpen.export,onOpenToggle:()=>(fe().f[68]++,fe().s[315]++,this.toggleModal("export")),fileHandle:this.state.fileHandle,onSetFileHandle:this.onSetFileHandle}),te.jsx(zRe,{isOpen:this.state.isOpen.open,onStyleOpen:this.openStyle,onOpenToggle:()=>(fe().f[69]++,fe().s[316]++,this.toggleModal("open")),fileHandle:this.state.fileHandle}),te.jsx(PRe,{mapStyle:this.state.mapStyle,onStyleChanged:this.onStyleChanged,isOpen:this.state.isOpen.sources,onOpenToggle:()=>(fe().f[70]++,fe().s[317]++,this.toggleModal("sources"))}),te.jsx(YRe,{mapStyle:this.state.mapStyle,onStyleChanged:this.onStyleChanged,isOpen:this.state.isOpen.globalState,onOpenToggle:()=>(fe().f[71]++,fe().s[318]++,this.toggleModal("globalState"))})]}));return fe().s[319]++,te.jsx(W9e,{toolbar:i,layerList:o,layerEditor:s,codeEditor:r,map:this.mapRenderer(),bottom:a,modals:c})}}const yDe=m$.createRoot(document.querySelector("#app"));yDe.render(te.jsx(lx.Provider,{value:{className:"react-icons"},children:te.jsx(gDe,{})}));document.querySelector(".loading").style.display="none";
//# sourceMappingURL=index-BJq0dwJ3.js.map
